[{"tags": ["c", "opengl", "common-lisp", "fread", "sbcl"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4861515"}, "edited": false, "score": 0, "creation_date": 1432170213, "post_id": 30362662, "comment_id": 48817111, "body": "I will look into opticl for sure, but for now I am just trying to get the same functionality from cl-opengl that I know how to get in C."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4861515"}, "edited": false, "score": 0, "creation_date": 1432170783, "post_id": 30362662, "comment_id": 48817254, "body": "Thanks for the tip. Starting now with  <code>(setf mystream (open &quot;wall.rgb&quot; :direction :input :element-type &#39;(unsigned-byte 8)))</code>  It seems like the next step in this analogy would be to say  <code>(setf data (make-sequence &#39;(unsigned-byte 8) (file-length stream)))</code>  but this gives me an error  <code>(UNSIGNED-BYTE 8) is a bad type specifier for sequences.</code>  I&#39;ll be back soon if I figure something out."}, {"owner": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "edited": false, "score": 0, "creation_date": 1432172007, "post_id": 30362662, "comment_id": 48817575, "body": "Do read the CLHS documentation for the functions you are using.  I recommend using <code>make-array</code> here."}], "tags": [], "owner": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "is_accepted": false, "score": 0, "last_activity_date": 1432168631, "creation_date": 1432168631, "answer_id": 30362662, "question_id": 30362221, "link": "https://stackoverflow.com/questions/30362221/whats-the-common-lisp-equivalent-of-the-c-function-fread/30362662#30362662", "title": "What&#39;s the Common Lisp equivalent of the C function fread?", "body": "<p>If you really want to do this raw, you need to specify an <code>element-type</code> to <code>open</code> (or <code>with-open-file</code>) that is a subtype of <code>integer</code> (most likely something like <code>'(unsigned-byte 8)</code> so that it is read as octets instead of characters.</p>\n\n<p>I would use a library to read images, though.  I have used <code>opticl</code> in the past, which is quite straightforward and uses two- or three-dimensional simple-arrays to represent image data (two dimensions plus one for the colours).</p>\n"}, {"comments": [{"owner": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "edited": false, "score": 0, "creation_date": 1432247985, "post_id": 30364078, "comment_id": 48860295, "body": "If a condition is signalled during the read, the stream will not be closed.  Better use <code>with-open-file</code> instead of <code>open</code> and <code>close</code>.  Also, it looks like you are operating on unbound variables.  I&#39;d expect <code>let</code> bindings instead of the <code>setf</code> forms."}, {"owner": {"reputation": 46737, "user_id": 31615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1127d0098e693682f382758abd9f6c76?s=128&d=identicon&r=PG", "display_name": "Svante", "link": "https://stackoverflow.com/users/31615/svante"}, "edited": false, "score": 0, "creation_date": 1432248278, "post_id": 30364078, "comment_id": 48860383, "body": "So, I propose the following improvement: <code>(defun read-rgb-file (filename) (with-open-file (mystream filename :direction :input :element-type &#39;(unsigned-byte 8) :if-does-not-exist :error) (let ((data (make-array (file-length mystream) :element-type &#39;(unsigned-byte 8)))) (read-sequence data mystream) data)))</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4861515"}, "is_accepted": false, "score": 0, "last_activity_date": 1432179259, "creation_date": 1432179259, "answer_id": 30364078, "question_id": 30362221, "link": "https://stackoverflow.com/questions/30362221/whats-the-common-lisp-equivalent-of-the-c-function-fread/30364078#30364078", "title": "What&#39;s the Common Lisp equivalent of the C function fread?", "body": "<p>Many thanks to Svante for leading me in the right direction. Here is what worked:</p>\n\n<pre><code>(setf mystream (open rgb-file-name :direction :input :element-type '(unsigned-byte 8)))\n(setf data (make-array (file-length mystream) :element-type '(unsigned-byte 8)))\n(read-sequence data mystream)\n(close mystream)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4861515"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1432179259, "creation_date": 1432165626, "last_edit_date": 1432166915, "question_id": 30362221, "link": "https://stackoverflow.com/questions/30362221/whats-the-common-lisp-equivalent-of-the-c-function-fread", "title": "What&#39;s the Common Lisp equivalent of the C function fread?", "body": "<p>I'm attempting to port some C code to Common Lisp (details probably irrelevant, but I'm trying to read an rgb image file into a block of memory to bind a texture for use with cl-opengl). The C version of what I'm trying to do is:</p>\n\n<pre><code>void * data;\nFILE * file;\nint bytecount = width * height * 3;\nfile = fopen ( rgbfilepath, \"rb\" );\ndata = malloc( bytecount );\nfread( data, bytecount, file);\nfclose( file );\n//do stuff with data...\n</code></pre>\n\n<p>It has been a few years since I did this, but my understanding of this code is that it is reading a bunch of bytes from the file into the <code>malloc</code>-ed memory without paying any attention whatsoever to the content of those bytes.</p>\n\n<p>After some googling, I found <a href=\"http://rosettacode.org/wiki/Read_entire_file#Common_Lisp\" rel=\"nofollow\">http://rosettacode.org/wiki/Read_entire_file#Common_Lisp</a> and <a href=\"http://www.codecodex.com/wiki/Read_a_file_into_a_byte_array#Common_Lisp\" rel=\"nofollow\">http://www.codecodex.com/wiki/Read_a_file_into_a_byte_array#Common_Lisp</a> which are very similar. My version looks like</p>\n\n<pre><code>(with-open-file (stream rgb-file-path)\n  (let ((data (make-string (file-length stream)))\n    (read-sequence data stream)\n    ;;do stuff with data...\n</code></pre>\n\n<p>When I run this thing on an rgb file, I get the following complaint from SBCL:</p>\n\n<pre><code>debugger invoked on a SB-INT:STREAM-DECODING-ERROR in thread\n#&lt;THREAD \"main thread\" RUNNING {10055E6EA3}&gt;:\n  :UTF-8 stream decoding error on\n  #&lt;SB-SYS:FD-STREAM\n  for \"file /home/john/code/lisp/commonlisp/opengl-practice/wall.rgb\"\n    {1005A8EB53}&gt;:\n\n    the octet sequence #(218 0) cannot be decoded.\n</code></pre>\n\n<p>My speculative interpretation of this is that the use of <code>make-string</code> expects the bytes to be characters, while the rgb file I am loading just has a bunch of bytes, not necessarily valid ASCII or whatever character set is expected. But I could be way off. Any suggestions about how to duplicate what <code>fread()</code> does?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "gpu", "gpgpu"], "comments": [{"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "edited": false, "score": 0, "creation_date": 1432166095, "post_id": 30362092, "comment_id": 48816049, "body": "FYI: There is <a href=\"http://deeplearning.net/software/theano/tutorial/using_gpu.html\" rel=\"nofollow noreferrer\">Theano</a> (Python) that can use the GPU. It compiles symbolic expressions to CUDA code that runs on your GPU."}, {"owner": {"reputation": 133, "user_id": 4582950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81092a04a22b2db9fbe62a6c5a9d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "blind.wolf", "link": "https://stackoverflow.com/users/4582950/blind-wolf"}, "edited": false, "score": 0, "creation_date": 1432194946, "post_id": 30362092, "comment_id": 48826156, "body": "If there is a lot of independent data going through that (hundeds of MB/s), than it can really speed things up. Only problem I see is in &quot;resulting rectangles can be arbitrary size&quot;. I&#39;ve never heard/read about allocating through kernels. If it&#39;s size is known before start, it&#39;s ok, but arrays must be defined before GPU kernel starts. So it basically depends on F (both input and output) and size of A"}, {"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "reply_to_user": {"reputation": 133, "user_id": 4582950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81092a04a22b2db9fbe62a6c5a9d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "blind.wolf", "link": "https://stackoverflow.com/users/4582950/blind-wolf"}, "edited": false, "score": 0, "creation_date": 1432234939, "post_id": 30362092, "comment_id": 48853607, "body": "@blind.wolf Yes, the sizes are known, it just must not be of the same shape as A, for example in case of integer array upscaling."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1432240721, "post_id": 30362092, "comment_id": 48856873, "body": "Why would anyone vote to close this question?????"}, {"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "reply_to_user": {"reputation": 35010, "user_id": 703016, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6daa32d7171f74efb1b663c6edc32e3b?s=128&d=identicon&r=PG&f=1", "display_name": "user703016", "link": "https://stackoverflow.com/users/703016/user703016"}, "edited": false, "score": 0, "creation_date": 1432305896, "post_id": 30362092, "comment_id": 48886950, "body": "@buttifulbuttefly well, I think so. Imagine you have several arrays, and you want to get an average values, for example. Like layers in Photoshop, but only index values. And now move one layer around and see changing result in real time. But to start with, I wanted smth. very very simple, like in mentioned examples with substitution or row/column repetition. If I could make my array filled with palette values, it would alone be a nice improvement. And substitution can be perfectly parallelised, am I right?"}], "answers": [{"comments": [{"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1432504873, "post_id": 30412227, "comment_id": 48942423, "body": "Okay, so you mean it is totally possible to do such things. I will try with OpenCL then, I&#39;m very intrigued. I will update if something interesting comes out."}, {"owner": {"reputation": 133, "user_id": 4582950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81092a04a22b2db9fbe62a6c5a9d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "blind.wolf", "link": "https://stackoverflow.com/users/4582950/blind-wolf"}, "reply_to_user": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1432618235, "post_id": 30412227, "comment_id": 48981733, "body": "It should be, however I&#39;m not sure about real speedup. If it really follows this pattern, speedup should be substantial. Problem is with F. If it&#39;s execution is really random, then it will be mostly serialized and it&#39;s better to do it with OpenMP or threads, because GPU will be serializing most of the code. (with serialized code, CPU is at least 3 times faster)"}], "tags": [], "owner": {"reputation": 133, "user_id": 4582950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81092a04a22b2db9fbe62a6c5a9d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "blind.wolf", "link": "https://stackoverflow.com/users/4582950/blind-wolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1432618743, "last_edit_date": 1432618743, "creation_date": 1432381246, "answer_id": 30412227, "question_id": 30362092, "link": "https://stackoverflow.com/questions/30362092/basic-gpu-application-integer-calculations/30412227#30412227", "title": "Basic GPU application, integer calculations", "body": "<p>There is not much difference between OpenCL/CUDA so choose which works better for you. Just remember that CUDA will limit you to the NVidia GPUs.</p>\n\n<p>If i understand corretly to your problem, kernel (function executed on GPU) should be simple. It should follow this pseudocode:</p>\n\n<pre><code>kernel main(shared A, shared outA, const struct R, const struct P, const int maxOut, const int sizeA)\n  int index := getIndex() // get offset in input array\n  if(sizeA &gt;= index) return // GPU often works better when n of threads is 2^n\n  int outIndex := index*maxOut // to get offset in output array\n  outA[outIndex] := F(A[index], R, P)\nend\n</code></pre>\n\n<p>Functions F should be inlined and you can use switch or if for different function. Since there is not known size of the output of F, then you have to use more memory. Each kernel instance must know positions for correct memory writes and reads so there have to be some maximum size (if there is none, than this all is useless and you have to use CPU!). If different sizes are sparse, then I would use something like computing these different sizes after getting the array back to RAM and compute these few with CPU, while filling outA with some zeros or indication values.</p>\n\n<p>Sizes of arrays are obviously length(A) * maxOut = length(outA).</p>\n\n<p>I forgot to mention that if execution of F is not same in most of the cases (same source code), than GPU will serialize it. GPU multiprocessors have a few cores connected into the same instruction cache so it will have to serialize the code, which is not the same for all cores! OpenMP or threads are better choice for this kind of problem!</p>\n"}, {"comments": [{"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1438882541, "post_id": 30501309, "comment_id": 51643792, "body": "Thanks for the infos. Main question by me was however much more on the surface. I want just few loops where I scan keyboard state and call functions. Now I write in Python (with VIM). Till now I could do things without debugging somehow. Porting to C/C++ (well I hardly even need C++ for that sort of apps) probably would solve performance issues and it is still the standard approach, also supported by other tools. In short, how do I combine a normal C program (Say SDL) with parallel code?"}, {"owner": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "reply_to_user": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1438939143, "post_id": 30501309, "comment_id": 51666087, "body": "Before I answer, be aware that there is a distinction between threading and parallel programming, in the sense that threading is about synchronizing and scheduling jobs, whereas GPU parallel programming is the ideological approach to organize code and data in a much broader sense so that it fits parallel hardware execution. To be blunt, the first kind of parallelism explicitly handles complex data dependencies, which the GPU parallelism does not like at all. From your description, it sounds like pthreads is what you need, e.g.:see <a href=\"http://softpixel.com/~cwright/programming/threads/threads.c.php\" rel=\"nofollow noreferrer\">softpixel.com/~cwright/programming/threads/threads.c.php</a>"}, {"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1438980840, "post_id": 30501309, "comment_id": 51690591, "body": "No, now I don&#39;t want CPU parallelisation, or threads on the CPU side. I meant, I have a main loop (sorry, I wrote &#39;loops&#39; before), so I scan keyboard state then do some math, but the result, namely array, which is standartised, want to process with GPU. So I imagine I just need to call some &quot;special&quot; function from my program. Still have not much success to find clear instructions. It is just typical real time interactive application. Also I don&#39;t need feedback from the GPU."}, {"owner": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "reply_to_user": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1438988389, "post_id": 30501309, "comment_id": 51693111, "body": "Both CUDA and OpenCL libraries are essentially C libraries, so all tutorials should simply work for C without much hassles."}, {"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1439053028, "post_id": 30501309, "comment_id": 51708072, "body": "Yes it is clear. &quot;All tutorials&quot; is the problem for me however. Several times started with Cuda documentations, and some other docs, but it takes me somewhere else, than what I want. I think it is offtopic to discuss tutorials, that&#39;s why I asked about if someone could share simple related examples. I try <a href=\"http://www.fixstars.com/en/opencl/book\" rel=\"nofollow noreferrer\">fixstars.com/en/opencl/book</a> now, it is quite understandable."}], "tags": [], "owner": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "is_accepted": false, "score": 2, "last_activity_date": 1435215863, "last_edit_date": 1435215863, "creation_date": 1432802232, "answer_id": 30501309, "question_id": 30362092, "link": "https://stackoverflow.com/questions/30362092/basic-gpu-application-integer-calculations/30501309#30501309", "title": "Basic GPU application, integer calculations", "body": "<p>When your code is highly parallel (i.e. there are small or no data dependencies between stages of processing) then you can go for CUDA (more finegrained control over synching) or OpenCL (very similar AND portable OpenGL-like API to interface with the GPU for kernel processing). Most of the acceleration work we do happens in OpenCL, which has excellent interop with both OpenGL and DirectX, but we also have the same setup working with CUDA. One big difference between CUDA and OpenCL is that in CUDA you can compile kernels once and delay-load (and/or link) them in your app, whereas in OpenCL the compiler plays nice with the OpenCL driver stack to ensure the kernel is compiled when the app starts. </p>\n\n<p>One alternative that is often overlooked if you're using Microsoft Visual Studio is C++AMP, a C++ syntax-friendly and intuitive api for those who do not want to dig into the logic twists and turns of OpenCL/CUDA API's. Big advantage here is that the code also works if you do not have a GPU in the system, but then you do not have as many options to tweak performance. Still, in a lot of cases, this is a fast and efficient way to write proof your concept code and re-implement bits and parts in CUDA or OpenCL later.</p>\n\n<p>OpenMP and Thread Building Blocks are only good alternatives when you have synching issues and lots of data dependencies. Native threading using worker threads is also a viable solution, but only if you have a good idea on how synch-points can be set up between the different processes in such a way that threads do not starve each-other out when fighting for priority. This is a lot harder to get right, and tools such as Parallel Studio are a must. But then, so is NVida NSight if you're writing GPU code.</p>\n\n<p><strong>Appendix:</strong> </p>\n\n<p>A new platform called Quasar (<a href=\"http://quasar.ugent.be/blog/\" rel=\"nofollow\">http://quasar.ugent.be/blog/</a>) is being developed that enables you to write your math problems in a syntax that is very similar to Matlab, but with full support of c/c++/c# or java integration, and cross-compiles (LLVM, CLANG) your \"kernel\" code to any underlying hardware configuration. It generates CUDA ptx files, or runs on openCL, or even on your CPU using TBB's, or a mixture of them. Using a few monikers, you can decorate the algorithm so that the underlying compiler can infer types (you can also explicitly use strict typing), so you can leave the type-heavy stuff entirely up to the compiler. To be fair, at the time of writing, the system is still w.i.p. and the first OpenCL compiled programs are just being tested, but most important benefit is fast prototyping with almost identical performance compared to optimized cuda.</p>\n"}, {"comments": [{"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1434917925, "post_id": 30947765, "comment_id": 49969281, "body": "Thank a lot, this pours a bit light to my question. I have made an update illustrating exact examples. Theoretically it answers the criteria, but I am not sure, especially about this lookup table caching. Could you take a look and say if it will work like I imagine there? Because these two calculations actually are most typical for the app."}, {"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "edited": false, "score": 0, "creation_date": 1434978620, "post_id": 30947765, "comment_id": 49991971, "body": "thank you, that is the info I needed for the moment. The new millenium bitmap editor is on the way :)"}], "tags": [], "owner": {"reputation": 337, "user_id": 106804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b5afbe55a4beae824e3b88f75d954b1?s=128&d=identicon&r=PG", "display_name": "Luis Yanes", "link": "https://stackoverflow.com/users/106804/luis-yanes"}, "is_accepted": true, "score": 1, "last_activity_date": 1434946928, "last_edit_date": 1495540124, "creation_date": 1434750494, "answer_id": 30947765, "question_id": 30362092, "link": "https://stackoverflow.com/questions/30362092/basic-gpu-application-integer-calculations/30947765#30947765", "title": "Basic GPU application, integer calculations", "body": "<p>What you want to do is send values really fast to the GPU using the high frequency dispatch and then display the result of a function which is basically texture lookups and some parameters.</p>\n\n<p>I would say this problem will only be worth solving on the GPU if two conditions are met:</p>\n\n<ol>\n<li><p>The size of <code>A[]</code> is optimised to make the transfer times irrelevant (Look at, <a href=\"http://blog.theincredibleholk.org/blog/2012/11/29/a-look-at-gpu-memory-transfer/\" rel=\"nofollow noreferrer\">http://blog.theincredibleholk.org/blog/2012/11/29/a-look-at-gpu-memory-transfer/</a>).</p></li>\n<li><p>The lookup table is not too big and/or the lookup values are organized in a way that the cache can be maximally utilized, in general random lookups on the GPU can be slow, ideally you can pre-load the <code>R[]</code> values in a shared memory buffer for each element of the <code>A[]</code> buffer.</p></li>\n</ol>\n\n<p>If you can answer both of those questions positively then and only then consider having a go at using the GPU for your problem, else those 2 factors will overpower the computational speed-up that the GPU can provide you with.</p>\n\n<p>Another thing you can have a look at is to as best as you can overlap the transfer and computing times to hide as much as possible the slow transfer rates of CPU->GPU data.</p>\n\n<p>Regarding your <code>F(A, R, P)</code> function you need to make sure that you do not need to know the value of <code>F(A, R, P)[0]</code> in order to know what the value of <code>F(A, R, P)[1]</code> is because if you do then you need to rewrite <code>F(A, R, P)</code> to go around this issue, using some parallelization technique. If you have a limited number of <code>F()</code> functions then this can be solved by writing a parallel version of each <code>F()</code> function for the GPU to use, but if <code>F()</code> is user-defined then your problem becomes a bit trickier.</p>\n\n<p>I hope this is enough information to have an informed guess towards whether you should or not use a GPU to solve your problem.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Having read your edit, I would say yes. The palette could fit in shared memory (See <a href=\"https://stackoverflow.com/questions/4983764/cuda-shared-memory-size\">GPU shared memory size is very small - what can I do about it?</a>) which is very fast, if you have more than one palette, you could fit 16KB (size of shared mem on most cards) / 4KB per palette = 4 palettes per block of threads.</p>\n\n<p>One last warning, integer operations are not the fastest on the GPU, consider using floating points if necessary after you have implemented your algorithm and it is working as a cheap optimization.</p>\n"}], "owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 3, "accepted_answer_id": 30947765, "answer_count": 3, "score": 17, "last_activity_date": 1435215863, "creation_date": 1432164730, "last_edit_date": 1434917631, "question_id": 30362092, "link": "https://stackoverflow.com/questions/30362092/basic-gpu-application-integer-calculations", "title": "Basic GPU application, integer calculations", "body": "<p>Long story short, I have done several prototypes of interactive software. I use pygame now (python sdl wrapper) and everything is done on CPU. I am starting to port it to C now and at the same time search for the existing possibilities to use some GPU power to entlast the CPU from redundant operations. However I cannot find a good \"guideline\" what exact technology/tools should I pick in my situation. I just read plethora of docs, it drains my mental powers very fast. I am not sure if it is possible at all, so I'm puzzled.<br>\nHere I've made a very rough sketch of my typical application skeleton that I develop, but given that it uses GPU now (note, I have almost zero practical knowledge about GPU programming). Still important is that data types and functionality must be exactly preserved. Here it is:<br>\n<img src=\"https://i.stack.imgur.com/oLFqw.png\" alt=\"enter image description here\"></p>\n\n<p>So F(A,R,P) is some custom function, for example element substitution, repetition, etc. Function is presumably constant in program lifetime,  rectangle's shapes generally are not equal with A shape, so it is not in-place calculation. So they are simply generated whith my functions. Examples of F: repeat rows and columns of A; substitute values with values from Substitution tables; compose some tiles into single array; any math function on A values, etc. As said all this can be easily made on CPU, but app must be really smooth. BTW in pure Python it became just unusable after adding several visual features, which are based on numpy arrays. Cython helps to make fast custom functions but then the source code is already kind of a salad.</p>\n\n<p>Question:  </p>\n\n<ul>\n<li><p>Does this schema reflect some (standart) technology/dev.tools?  </p></li>\n<li><p>Is CUDA what I am looking for? If yes, some links/examples <strong>which coincides</strong> whith my application structure, would be great.</p></li>\n</ul>\n\n<p>I realise, this a big question, so I will give more details if it helps.</p>\n\n<hr>\n\n<p><strong>Update</strong>   </p>\n\n<p>Here is a concrete example of two typical calculations for my prototype of bitmap editor. So the editor works with indexes and the data include layers with corresponding bit masks. I can determine the size of layers and masks are same size as layers and, say, all layers are same size (<strong>1024^2 pixels</strong> = 4 MB for 32 bit values). And my palette is say, <strong>1024 elements</strong> (4 Kilobytes for 32 bpp format).<br>\nConsider I want to do two things now:  </p>\n\n<p><strong>Step 1</strong>. I want to flatten all layers in one. Say A1 is default layer (background) and layers 'A2' and 'A3' have masks 'm2' and 'm3'. In python i'd write: </p>\n\n<pre><code>from numpy import logical_not\n...\nResult = (A1 * logical_not(m2) + A2 * m2) * logical_not(m3) + A3 * m3\n</code></pre>\n\n<p>Since the data is independent I believe it must give speedup proportionl to number of parallel blocks. </p>\n\n<p><strong>Step 2</strong>. Now I have an array and want to 'colorize' it with some palette, so it will be my lookup table. As I see now, there is a problem with simultanous read of lookup table element.\n <img src=\"https://i.stack.imgur.com/1H6a6.png\" alt=\"enter image description here\"></p>\n\n<p>But my idea is, probably one can just duplicate the palette for all blocks, so each block can read its own palette? Like this: \n<img src=\"https://i.stack.imgur.com/FoEA1.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c#", "c++", "c", "marshalling", "free"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432164052, "post_id": 30361975, "comment_id": 48815456, "body": "Do you have an idea of what <code>free()</code>ing memory means?, if you do the equivalent in c, you would cause undefined behavior, you shall not <code>free()</code> static memory."}, {"owner": {"reputation": 339, "user_id": 3406177, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100003105027998/picture?type=large", "display_name": "Aladdin", "link": "https://stackoverflow.com/users/3406177/aladdin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432164433, "post_id": 30361975, "comment_id": 48815588, "body": "i can allocate the memory using Marshal class, and set the value and after finishing free it with the proper method, but it&#39;s too mush compared to MarshalAs magical attribute"}, {"owner": {"reputation": 339, "user_id": 3406177, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100003105027998/picture?type=large", "display_name": "Aladdin", "link": "https://stackoverflow.com/users/3406177/aladdin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432164566, "post_id": 30361975, "comment_id": 48815630, "body": "using MSCRV free method on that marshaled memory location caused the application to abort, what I&#39;m asking is what&#39;s the proper method to free this location of memory"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432166179, "post_id": 30361975, "comment_id": 48816074, "body": "The C code is very evil, it returns a <a href=\"http://en.wikipedia.org/wiki/Dangling_pointer\" rel=\"nofollow noreferrer\">dangling pointer</a>.  If it did not reallocate <i>text</i> then the memory was already released after it returns since the pinvoke marshaller owns it.  Looks like it works, but then it randomly doesn&#39;t when you&#39;re not looking.  Also high odds that it will corrupt the heap while writing *text.  If it does allocate then you can&#39;t release it unless it used an allocator that your C# code has access to."}], "owner": {"reputation": 339, "user_id": 3406177, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100003105027998/picture?type=large", "display_name": "Aladdin", "link": "https://stackoverflow.com/users/3406177/aladdin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432163953, "creation_date": 1432163953, "question_id": 30361975, "link": "https://stackoverflow.com/questions/30361975/free-c-automatically-marshalled-data-using-marashalas-attribute", "title": "Free C# Automatically Marshalled Data using MarashalAs Attribute", "body": "<p>CLR can marshal managed types into unmanaged c/c++ types using marshal as attrubte\nwhat I need is that what is the proper method to free this allocated memory.. for example::</p>\n\n<p>in C/C++ code</p>\n\n<pre><code>char* dummy(char* text){\n//do some thing\nreturn text;//dummy way to return it to the caller to free it.\n}\n</code></pre>\n\n<p>and in C#</p>\n\n<pre><code>[DllImport(\"test.dll\",CallingConvention=CallingConvention.Cdecl)]\nstatic extern IntPtr dummy([MarshalAs(UnmanagedType.LPStr)] string text);\n</code></pre>\n\n<p>and finally the test</p>\n\n<pre><code>    C# Test\nIntPtr marshaledData=dummy(\"any text\");\n//what is the proper way to free this memory location\n</code></pre>\n"}, {"tags": ["c", "arrays", "chars"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1432164114, "post_id": 30361927, "comment_id": 48815470, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  Is the data in the file really all on one line?  Is there a significance to the commas marking the end of the first items and the semicolon marking the end of the last?  Does semicolon mark end of line, end of data, something else?  Note that you must do something other than try the <code>fgets()</code> call if you fail to open the file; <code>return 0;</code> might be appropriate given that you have <code>return 1;</code> at the end on success."}, {"owner": {"reputation": 1540, "user_id": 4922489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/450bb952f1c8e0b990995ddd5324d10a?s=128&d=identicon&r=PG&f=1", "display_name": "Donoven Rally", "link": "https://stackoverflow.com/users/4922489/donoven-rally"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1432164720, "post_id": 30361927, "comment_id": 48815678, "body": "hi there, the file is all in one line. commas representing end of item and semicolon represents end of file"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1432164724, "post_id": 30361927, "comment_id": 48815679, "body": "Also, is the word &quot;Item&quot; of significance, or is it constant text?  Is the input &#39;product name&#39;, dash, price, comma/semicolon end marker?"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 0, "last_activity_date": 1495657609, "last_edit_date": 1495657609, "creation_date": 1432166012, "answer_id": 30362288, "question_id": 30361927, "link": "https://stackoverflow.com/questions/30361927/reading-text-file-and-breaking-it-by-delimiters/30362288#30362288", "title": "Reading text file and breaking it by delimiters", "body": "<p>Having read a line as you are doing, you need to split it into item entries.  Since you're using <code>strtok()</code>, I assume that you don't need to identify the delimiter.  Also, one of the reasons for disliking <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok.html\" rel=\"nofollow noreferrer\"><code>strtok()</code></a> and preferring Microsoft's <a href=\"https://msdn.microsoft.com/en-us/library/ftsafwz3.aspx\" rel=\"nofollow noreferrer\"><code>strtok_s()</code></a> on Windows and POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok_r.html\" rel=\"nofollow noreferrer\"><code>strtok_r()</code></a> everywhere else is that you can't have nested calls to <code>strtok()</code>, but you need them.  Or you need to use <code>scanf()</code>, or some other technique.</p>\n\n<p><sup><em>Warning: none of this code has been near a compiler!</em></sup></p>\n\n<pre><code>char *next_ptr = NULL;\nchar *next_item = strtok_r(line, \",;\", &amp;next_ptr);\n\nwhile (next_item != NULL){\n    char *item_ptr = NULL;\n    char *name = strtok_r(next_item, \"-\", &amp;item_ptr);\n    if (name == NULL)\n    {\n        fprintf(stderr, \"Failed to scan name out of [%s]\\n\", next_item);\n        break;\n    }\n    int price;\n    next_item = strtok_r(NULL, \" ,\", &amp;item_ptr);\n    assert(next_item != NULL);\n    if (sscanf(next_item, \"%d\", &amp;price) != 1)\n        fprintf(stderr, \"Failed to convert [%s] to integer\\n\", next_item);\n    else\n        printf(\"Item: [%s] price %d\\n\", name, price);\n    next_item = strtok_r(NULL, \",;\", &amp;next_ptr);\n}\n</code></pre>\n\n<p>The <code>break</code> on error is because I'm being lazy.  Ideally, you should continue to the next item in the line, but that involves rewriting the loop as a <code>for</code> loop:</p>\n\n<pre><code>for (next_item = strtok_r(line, \",;\", &amp;next_ptr);\n     next_item != NULL;\n     next_item = strtok_r(NULL, \",;\", &amp;next_ptr))\n{\n    ...body of loop except for final call to strtok_r()...\n}\n</code></pre>\n\n<p>Now you can use <code>continue</code> and the <code>next_item = strtok_r(NULL, \",;\", &amp;next_ptr)</code> statement will be executed, and that's crucial.  You might need to worry about an empty item after the semicolon; add <code>&amp;&amp; *next_item != '\\0'</code> to the loop condition.</p>\n\n<p>If you can't use <code>strtok_r()</code> or <code>strtok_s()</code> for some reason (what?), then you can consider using:</p>\n\n<pre><code>char name[30];\nint price;\nif (sscanf(next_item, \"%29[^-] - %d\", name, &amp;price) != 2)\n{\n    fprintf(stderr, \"Failed to extract item name and price from [%s]\\n\", next_item);\n    continue; // Or break!\n}\n</code></pre>\n\n<p>And there are other options too &mdash; many of them, in fact.</p>\n\n<p>Note that <code>strtok()</code> and its relatives all (a) destroy the input string and (b) do not tell you which character marked the end, and (c) treats multiple separators as one, so you can't spot empty items between two delimiters (which isn't a problem in this example).  The destruction is chopping the original string into shorter substrings by inserting null bytes where the delimiter was found.</p>\n\n<p>Note that if an item name contains a dash, you're hosed with this system.  You'll interpret the 'Vacuum-24' as being an item named 'Vacuum' with 24 as the price.  You can work around that, too, but it is harder (think <code>strstr()</code> to find <code>\" - \"</code> (blank, dash, blank) as a separator between item name and price, for example).</p>\n"}], "owner": {"reputation": 1540, "user_id": 4922489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/450bb952f1c8e0b990995ddd5324d10a?s=128&d=identicon&r=PG&f=1", "display_name": "Donoven Rally", "link": "https://stackoverflow.com/users/4922489/donoven-rally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 30362288, "answer_count": 1, "score": 0, "last_activity_date": 1495657609, "creation_date": 1432163705, "last_edit_date": 1432163917, "question_id": 30361927, "link": "https://stackoverflow.com/questions/30361927/reading-text-file-and-breaking-it-by-delimiters", "title": "Reading text file and breaking it by delimiters", "body": "<p>I am trying to read a text file with the following structure:</p>\n\n<pre><code>Item 1 - 50, Item 2 - 400, Item 3 - 120, Item 4 - 15;\n</code></pre>\n\n<p>and while looping over the file, I want to store the price and the item name in two strings.\nTo make it more clear, I have <code>int credit</code> which I want to compare with the price and if the credit is bigger I'm printing the price.</p>\n\n<p>I managed to print all the products with this function :</p>\n\n<pre><code>int credit = 1000; //For the example purpose\nint displayProducts(){\n\n    int row=0;\n    char line[MAX_LINE_SIZE + 1]; // ptr to the current input line\n    FILE *fp;\n\n    fp = fopen(\"machinedata.txt\", \"r\");\n    if (fp == NULL)\n    {\n        printf(\"Error while opening the file.\\n\");\n    //  exit(EXIT_FAILURE);\n    }\n\n    while (fgets(line, MAX_LINE_SIZE, fp)) {\n        char *next_item;  // ptr to the next item extracted from the current line\n        char* name = NULL;\n        int price;\n\n        next_item = strtok(line, \" ,\");\n\n        while (next_item != NULL){\n            printf(\"%s\\n\", next_item);\n            next_item = strtok(NULL, \" ,\");\n            /*WHAT CAN I DO HERE TO EXTRACT EACH PRICE AND COMPARE WITH CREDIT??*/\n        }\n    }\n\n    fclose(fp);\n    return 1;\n}\n</code></pre>\n\n<p>I am taking first steps in C language and I just can't figure out how to do that.\nAny help please?</p>\n"}, {"tags": ["c", "linux-kernel", "makefile", "arm", "native"], "comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 3, "creation_date": 1432164804, "post_id": 30361837, "comment_id": 48815695, "body": "This was a known problem. A patch exists (see for example <a href=\"http://forum.xda-developers.com/showpost.php?p=51760869\" rel=\"nofollow noreferrer\">forum.xda-developers.com/showpost.php?p=51760869</a>)"}, {"owner": {"reputation": 4118, "user_id": 1667513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ENqfL.jpg?s=128&g=1", "display_name": "nonsensickle", "link": "https://stackoverflow.com/users/1667513/nonsensickle"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1432166518, "post_id": 30361837, "comment_id": 48816147, "body": "@user58697 do you mind putting that up as an answer? That way it will be more visible for everyone."}], "answers": [{"tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": true, "score": 2, "last_activity_date": 1432167097, "creation_date": 1432167097, "answer_id": 30362441, "question_id": 30361837, "link": "https://stackoverflow.com/questions/30361837/how-do-i-understand-and-fix-error-while-compiling-linux-kernel-for-embedded-syst/30362441#30362441", "title": "How do I understand and fix error while compiling Linux kernel for embedded system", "body": "<p>As requested:</p>\n\n<p>This was a known problem. A patch exists (see for example <a href=\"http://forum.xda-developers.com/showpost.php?p=51760869\" rel=\"nofollow\">here</a>)</p>\n"}], "owner": {"reputation": 737, "user_id": 3326293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/QcKfK.jpg?s=128&g=1", "display_name": "user3326293", "link": "https://stackoverflow.com/users/3326293/user3326293"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 30362441, "answer_count": 1, "score": 2, "last_activity_date": 1432167097, "creation_date": 1432163204, "last_edit_date": 1432165579, "question_id": 30361837, "link": "https://stackoverflow.com/questions/30361837/how-do-i-understand-and-fix-error-while-compiling-linux-kernel-for-embedded-syst", "title": "How do I understand and fix error while compiling Linux kernel for embedded system", "body": "<p>While trying to compile the following file: </p>\n\n<pre><code>/*\n *  linux/arch/arm/mm/proc-syms.c\n *\n *  Copyright (C) 2000-2002 Russell King\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 2 as\n * published by the Free Software Foundation.\n */\n#include &lt;linux/module.h&gt;\n#include &lt;linux/mm.h&gt;\n\n#include &lt;asm/cacheflush.h&gt;\n#include &lt;asm/proc-fns.h&gt;\n#include &lt;asm/tlbflush.h&gt;\n#include &lt;asm/page.h&gt;\n\n#ifndef MULTI_CPU\nEXPORT_SYMBOL(cpu_dcache_clean_area);\nEXPORT_SYMBOL(cpu_set_pte_ext);\nEXPORT_SYMBOL(cpu_tima_set_pte_ext);\n#else\nEXPORT_SYMBOL(processor);\n#endif\n\n#ifndef MULTI_CACHE\nEXPORT_SYMBOL(__cpuc_flush_kern_all);\nEXPORT_SYMBOL(__cpuc_flush_user_all);\nEXPORT_SYMBOL(__cpuc_flush_user_range);\nEXPORT_SYMBOL(__cpuc_coherent_kern_range);\nEXPORT_SYMBOL(__cpuc_flush_dcache_area);\n#else\nEXPORT_SYMBOL(cpu_cache);\n#endif\n\n#ifdef CONFIG_MMU\n#ifndef MULTI_USER\nEXPORT_SYMBOL(__cpu_clear_user_highpage);\nEXPORT_SYMBOL(__cpu_copy_user_highpage);\n#else\nEXPORT_SYMBOL(cpu_user);\n#endif\n#endif\n\n/*\n * No module should need to touch the TLB (and currently\n * no modules do.  We export this for \"loadkernel\" support\n * (booting a new kernel from within a running kernel.)\n */\n#ifdef MULTI_TLB\nEXPORT_SYMBOL(cpu_tlb);\n#endif\n</code></pre>\n\n<p>I get the following error: </p>\n\n<pre><code>arch/arm/mm/proc-syms.c:21:1: error: 'cpu_tima_set_pte_ext' undeclared here (not in a function)\nmake[1]: *** [arch/arm/mm/proc-syms.o] Error 1\nmake: *** [arch/arm/mm] Error 2\n</code></pre>\n\n<p>I am actually surprised that I get this error. This is code which I downloaded from a vendor, and I do not think it would have error in it. Is there someway to bypass this error? Is this a real error, or something which will be fixed during the link phase? </p>\n\n<p>@user58697 - You d'man. Thanks. Thank you so much. This was the fastest reply and correct. </p>\n"}, {"tags": ["c++", "c", "qt", "gcc", "shared-libraries"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432163605, "post_id": 30361699, "comment_id": 48815319, "body": "Even if you could dump all the symbols from the shared library, you cannot provide the prototypes to call the functions correctly, I think I would write a python script to extract all the function prototypes from the header file and generate c++ code to be used in the program, you can even make it a step of the build process so the code is updated on demand. <b>clang</b> has a nice python and even c++ interface for parsing c code, which would help making the process robust. If you can hire me, I can do it."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1432165550, "post_id": 30361699, "comment_id": 48815919, "body": "The statement &quot;However, when I link at runtime via dlopen, I won&#39;t be able to include the header file.&quot; makes no sense. Even if you didn&#39;t &quot;link at runtime via dlopen&quot;, you still &quot;won&#39;t be able to include the header file.&quot; Header files have absolutely nothing to do with runtime. Header files are included at compile time. What happens at runtime is completely unrelated. You can include a header files, make use of its #define-s, etc., in your code, and as long as your code does not directly reference symbols from an external library, you can dlopen it, and resolve its symbols with dlsym."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1432197808, "post_id": 30361699, "comment_id": 48827854, "body": "if you want to link at runtime why do not you use QLibrary?"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 933838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c88f6d5cd429b54e371cb56f2cc8b083?s=128&d=identicon&r=PG", "display_name": "Josh A.", "link": "https://stackoverflow.com/users/933838/josh-a"}, "edited": false, "score": 0, "creation_date": 1432212885, "post_id": 30365040, "comment_id": 48838533, "body": "Mainly because this is an enormous project and this requirement would introduce the only compile-time, form factor specific dependency. Also, it would be nice if a stripped down desktop could load libfoo-phone.so in certain situations not determined at compile time."}], "tags": [], "owner": {"reputation": 753, "user_id": 2172459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750bdd93b854a92288fec857151718b4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/2172459/pat"}, "is_accepted": false, "score": 2, "last_activity_date": 1432185009, "creation_date": 1432185009, "answer_id": 30365040, "question_id": 30361699, "link": "https://stackoverflow.com/questions/30361699/how-to-use-a-library-loaded-at-runtime-in-c-and-qt/30365040#30365040", "title": "How to use a library loaded at runtime in C++ and Qt", "body": "<p>Why link at runtime?  Just link to the appropriate .so depending on the current build target (phone vs desktop).  The platforms dynamic linker will load the *.so for you automatically when the executable is run, and you don't have to worry about runtime loading of a library.  You can include the header, reference the symbols all you want, and there won't be any problems.</p>\n"}], "owner": {"reputation": 257, "user_id": 933838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c88f6d5cd429b54e371cb56f2cc8b083?s=128&d=identicon&r=PG", "display_name": "Josh A.", "link": "https://stackoverflow.com/users/933838/josh-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432185009, "creation_date": 1432162219, "question_id": 30361699, "link": "https://stackoverflow.com/questions/30361699/how-to-use-a-library-loaded-at-runtime-in-c-and-qt", "title": "How to use a library loaded at runtime in C++ and Qt", "body": "<p>I currently have an application that runs on a desktop and a phone. The desktop requires a full-featured libfoo.so, but the mobile version only requires a small subset of libfoo.so. Someone else has already implemented libfoo-phone.so, and it uses the same function names as libfoo.so for the functions that it actually implements. </p>\n\n<p>I am currently including libfoo-phone.h, which works as usual because its being linked against at compile time. However, when I link at runtime via dlopen, I won't be able to include the header file. Is there an easy way to make this work without a huge wrapper that makes 100's of calls to dlsym?</p>\n"}, {"tags": ["c", "ubuntu", "gdb"], "comments": [{"owner": {"reputation": 1968, "user_id": 2368132, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1c2487e1ee8cdf6257e19b374a6aa46f?s=128&d=identicon&r=PG", "display_name": "Mike Crawford", "link": "https://stackoverflow.com/users/2368132/mike-crawford"}, "edited": false, "score": 0, "creation_date": 1432161901, "post_id": 30361613, "comment_id": 48814802, "body": "&quot;How do the pros debug?&quot;  I use lots of assertions; I only use a debugger when assertions don&#39;t yield joy."}, {"owner": {"reputation": 1968, "user_id": 2368132, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1c2487e1ee8cdf6257e19b374a6aa46f?s=128&d=identicon&r=PG", "display_name": "Mike Crawford", "link": "https://stackoverflow.com/users/2368132/mike-crawford"}, "edited": false, "score": 0, "creation_date": 1432162135, "post_id": 30361613, "comment_id": 48814875, "body": "does it help to replace &quot;-ggdb&quot; with just &quot;-g&quot; in your  Makefile?  When you try it, do a &quot;make clean&quot; before you do &quot;make&quot;."}, {"owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "reply_to_user": {"reputation": 1968, "user_id": 2368132, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1c2487e1ee8cdf6257e19b374a6aa46f?s=128&d=identicon&r=PG", "display_name": "Mike Crawford", "link": "https://stackoverflow.com/users/2368132/mike-crawford"}, "edited": false, "score": 0, "creation_date": 1432162371, "post_id": 30361613, "comment_id": 48814956, "body": "same results when compiling with -g and -ggdb"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1432162533, "post_id": 30361613, "comment_id": 48815003, "body": "You&#39;ll be better off not using GDB TUI (Text User Interface). It uses curses and my experience is that it tends to muck up the terminal. That is, leave out <code>layout src</code>."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1432219521, "post_id": 30361613, "comment_id": 48843711, "body": "When using gdb&#39;s TUI for programs that write to stdout or stderr, you can use the <code>set inferior-tty</code> command to use a terminal that&#39;s in a different window (to create one, open a gnome-terminal or xterm window, and in it type <code>tty; sleep 99999</code>). You can also use <code>M-X gdb</code> in emacs for another kind of text-based interface to gdb."}, {"owner": {"reputation": 355, "user_id": 1537973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48089f72415daa6cd261e2f4ac4f1520?s=128&d=identicon&r=PG", "display_name": "facebook-100001358991487", "link": "https://stackoverflow.com/users/1537973/facebook-100001358991487"}, "edited": false, "score": 0, "creation_date": 1432367820, "post_id": 30361613, "comment_id": 48907612, "body": "@tarabyteTry putting &quot;layout src&quot;  below the &quot;run&quot; command"}], "owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432161742, "creation_date": 1432161742, "question_id": 30361613, "link": "https://stackoverflow.com/questions/30361613/gdb-garbles-source-and-command-window", "title": "GDB garbles source and command window", "body": "<p>I'm running gdb in an Ubuntu VM and am not able to get it to run without what seems like it breaking.  Everything gets garbled after about the third <code>n</code> next command.  Is there any way to realistically use gdb?  Am I supposed to just debug with <code>printf</code>'s?  How do the pros debug?</p>\n\n<p>From the command line:</p>\n\n<pre><code>make\ngdb\n</code></pre>\n\n<p>In <code>main.c</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\nstatic void Greet(uint16_t num_times) {\n  size_t i;\n  for (i = 0; i &lt; num_times; i++) {\n    printf(\"Hello, World!\\n\");\n  }\n}\n\n\nint main(int argc, char* argv[]) {\n  Greet(atoi(argv[1]));\n  return 0;\n}\n</code></pre>\n\n<p>In <code>makefile</code>:</p>\n\n<pre><code>CC=gcc \nCFLAGS=-Wall -ggdb\nmain: main.o\n\nclean:\n    rm -f main main.o\n</code></pre>\n\n<p>In <code>.gdbinit</code>:</p>\n\n<pre><code>file ./main\nset args 3\n\n# Breakpoints\nbreak main\n\n# Put source on top\nlayout src\n\nrun\n</code></pre>\n"}, {"tags": ["c", "fgetc", "putchar"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1432161755, "post_id": 30361574, "comment_id": 48814762, "body": "What do you think <code>putchar(EOF)</code> does?"}, {"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1432161844, "post_id": 30361574, "comment_id": 48814788, "body": "I think it maybe should evaluate to <code>EOF</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432161881, "post_id": 30361574, "comment_id": 48814795, "body": "But <i>why</i> do you want to write <code>EOF</code> to the output? Anyway, <code>EOF</code> is not <code>unsigned char</code> so it won&#39;t work."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1432161945, "post_id": 30361574, "comment_id": 48814816, "body": "@Chaker.benhamed Where does it say that <code>putchar</code> won&#39;t write anything if the argument is <code>EOF</code>? And why do you think that <code>putchar</code> will return <code>EOF</code> if there <i>wasn&#39;t</i> an error, when the documentation says it returns <code>EOF</code> on error?"}, {"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "edited": false, "score": 0, "creation_date": 1432162074, "post_id": 30361574, "comment_id": 48814852, "body": "No i don&#39;t want to write <code>EOF</code> to the output but what i understand from <code>Linux Programmer&#39;s Manual</code> that <code>putchar</code> return <code>EOF</code> int the case of error."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432162109, "post_id": 30361574, "comment_id": 48814866, "body": "Yes but that is if <code>putchar()</code> fails, not the echo of what you write. Please just stick to your first method, which worked."}, {"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "edited": false, "score": 0, "creation_date": 1432162196, "post_id": 30361574, "comment_id": 48814891, "body": "But shouldn&#39;t <code>putchar</code> fails since <code>EOF</code> is not an ASCII value?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432162307, "post_id": 30361574, "comment_id": 48814935, "body": "Its failure is a property of the output stream, not what you send it. Sending <code>EOF</code> does <i>not</i> tell it to fail."}, {"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "edited": false, "score": 0, "creation_date": 1432162356, "post_id": 30361574, "comment_id": 48814953, "body": "Ahh OK i see thanks."}], "answers": [{"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": true, "score": 1, "last_activity_date": 1432163554, "creation_date": 1432163554, "answer_id": 30361896, "question_id": 30361574, "link": "https://stackoverflow.com/questions/30361574/merging-fgetc-and-putchar-in-while-loop/30361896#30361896", "title": "Merging fgetc and putchar in while loop", "body": "<p><code>getchar</code> returns one of the following:</p>\n\n<ul>\n<li>A character, represented as an <code>unsigned char</code> value (e.g. typically between 0 and 255, inclusive of those values), converted to an <code>int</code>. Thus, there are typically one of 256 (<code>UCHAR_MAX+1</code>, technically) values that fall into this category.</li>\n<li>A non-character, <code>EOF</code>, which has a negative value, typically -1.</li>\n</ul>\n\n<p>Thus, <code>getchar</code> may typically return one of <strong>257</strong> (not 256) values. If you attempt to convert that value straight to <code>char</code> or <code>unsigned char</code> (e.g. by calling <code>putchar</code>), you'll be losing the <code>EOF</code> information.</p>\n\n<p>For this reason you need to store the return value of <code>getchar</code> into an <code>int</code> <strong>before</strong> you convert it to an <code>unsigned char</code> or <code>char</code>.</p>\n"}], "owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 30361896, "answer_count": 1, "score": 2, "last_activity_date": 1432163554, "creation_date": 1432161565, "last_edit_date": 1432161770, "question_id": 30361574, "link": "https://stackoverflow.com/questions/30361574/merging-fgetc-and-putchar-in-while-loop", "title": "Merging fgetc and putchar in while loop", "body": "<p>I am writing a simple code to print the content of the file to stdout.</p>\n\n<p>When i use this :</p>\n\n<pre><code>while((c=fgetc(fp))!=EOF)putchar(c);\n</code></pre>\n\n<p>It works like it should but i wanna to merge <code>putchar</code> and <code>fgetc</code>. So i wrote </p>\n\n<pre><code>while(putchar(fgetc(fp))!=EOF);\n</code></pre>\n\n<p>But it doesn't seem to work. So i check the return value of <code>putchar</code></p>\n\n<pre><code>RETURN VALUE\n       fputc(),  putc()  and  putchar()  return  the  character  written as an\n       unsigned char cast to an int or EOF on error.\n</code></pre>\n\n<p>So why it doesn't work?</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 1, "creation_date": 1432161320, "post_id": 30361496, "comment_id": 48814638, "body": "Because <code>calloc</code> zero initializes your array, and you never populate it with anything. Also, it&#39;s spelled &quot;length&quot;"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1432161410, "post_id": 30361496, "comment_id": 48814663, "body": "...and you&#39;re exceeding your allocated length with <code>t[lenght] = &#39;\\0&#39;</code> regardless, thus invoking undefined behavior. Arrays in C are zero-base-indexed. Meaning <code>0...(lenght-1)</code> are the allowable range of indexes.."}, {"owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "edited": false, "score": 0, "creation_date": 1432161505, "post_id": 30361496, "comment_id": 48814689, "body": "<code>t[length] = &#39;\\0&#39;;</code> is an out of bound write."}, {"owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "edited": false, "score": 0, "creation_date": 1432161690, "post_id": 30361496, "comment_id": 48814737, "body": "I do : newstring[lenght-1]=&#39;\\0&#39; but the problem remains"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1432161645, "post_id": 30361559, "comment_id": 48814725, "body": "If posting an answer, maybe consider answering the question question posted: why <code>strlen(string)</code> reports <code>0</code>."}], "tags": [], "owner": {"reputation": 797, "user_id": 4905701, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206378492964245/picture?type=large", "display_name": "Ron Kuper", "link": "https://stackoverflow.com/users/4905701/ron-kuper"}, "is_accepted": false, "score": 0, "last_activity_date": 1432161511, "creation_date": 1432161511, "answer_id": 30361559, "question_id": 30361496, "link": "https://stackoverflow.com/questions/30361496/issue-with-string-creation-c/30361559#30361559", "title": "Issue with string creation C", "body": "<p>If length doesn't include the null termination then you should set t[length - 1] to zero, or alternatively calloc with size length + 1.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1432161634, "creation_date": 1432161634, "answer_id": 30361592, "question_id": 30361496, "link": "https://stackoverflow.com/questions/30361496/issue-with-string-creation-c/30361592#30361592", "title": "Issue with string creation C", "body": "<p><code>strlen</code> returns the number of characters before the first <code>'\\0'</code>. You'll get the same result if you use:</p>\n\n<pre><code>char s[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\nint len = strlen(s); // len will be zero.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 1, "creation_date": 1432161862, "post_id": 30361610, "comment_id": 48814793, "body": "OP&#39;s use of <code>calloc</code> is correct. You do the same exact thing, just with more lines of code. Technically, all this function has to do is <code>return calloc(length, sizeof(char));</code>"}, {"owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "edited": false, "score": 0, "creation_date": 1432162091, "post_id": 30361610, "comment_id": 48814857, "body": "I know that the calloc function resets memory(in addition to allocate memory), the function memset does the same thing? what change?"}], "tags": [], "owner": {"reputation": 498, "user_id": 4766483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/331420ff8dbf2f78729bb2a77dc1faa4?s=128&d=identicon&r=PG&f=1", "display_name": "TJ1S", "link": "https://stackoverflow.com/users/4766483/tj1s"}, "is_accepted": false, "score": 1, "last_activity_date": 1432161723, "creation_date": 1432161723, "answer_id": 30361610, "question_id": 30361496, "link": "https://stackoverflow.com/questions/30361496/issue-with-string-creation-c/30361610#30361610", "title": "Issue with string creation C", "body": "<p>There's a couple of issues here. The first is that you're terminating t (and I'm not sure what t references actually) with a null-terminator at index \"length\", which will be one greater than the size of the array. So you're accessing some random blob of memory there. The second is improperly using calloc. I think you want something more like:</p>\n\n<pre><code>char* new_string(int length) {\n    char* new_string;\n    new_string = malloc(sizeof(char) * length);\n    memset(new_string, 0, length);\n    new_string[length-1] = '\\0';\n    return new_string;\n}\n</code></pre>\n\n<p>Strlen in your example returns 0 because it counts the characters before the null terminator, which happens to be 0 in your implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "is_accepted": false, "score": 0, "last_activity_date": 1432163519, "creation_date": 1432163519, "answer_id": 30361891, "question_id": 30361496, "link": "https://stackoverflow.com/questions/30361496/issue-with-string-creation-c/30361891#30361891", "title": "Issue with string creation C", "body": "<p>strlen count the number of character in the c string until it see a \"\\0\" (end of string) so as your string is initialized with \"\\0\" its length is actually 0. change this value to another one like.</p>\n\n<pre><code>  memcpy(string, \"good things\", 10);\n  printf(\"%d\", strlen(string));\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1432163519, "creation_date": 1432161168, "last_edit_date": 1432161632, "question_id": 30361496, "link": "https://stackoverflow.com/questions/30361496/issue-with-string-creation-c", "title": "Issue with string creation C", "body": "<p>I want to make a function that create a new string with a specific lenght.\nThis is the code:</p>\n\n<pre><code>char* newString(int lenght){\n\n    char* newstring =(char*)((calloc(lenght, sizeof(char))));\n    newstring[lenght] = '\\0';\n    return newstring;\n}\n</code></pre>\n\n<p>I use it in this way:</p>\n\n<pre><code>char* string = newString(10);\n</code></pre>\n\n<p>My problem is that when I do:</p>\n\n<pre><code>printf(\"String lenght  %lu \\n\",strlen(string));\n</code></pre>\n\n<p>I get 0 but I don't understand why.\nI am neophyte with C.\nThank for your time</p>\n"}, {"tags": ["c", "linux", "glibc"], "answers": [{"comments": [{"owner": {"reputation": 8608, "user_id": 1091116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/15098b2b940cacd8b4d07026e01e3102?s=128&d=identicon&r=PG", "display_name": "d33tah", "link": "https://stackoverflow.com/users/1091116/d33tah"}, "edited": false, "score": 0, "creation_date": 1432160547, "post_id": 30361371, "comment_id": 48814385, "body": "Why does <code>getpwuid</code> involve name resolution?"}, {"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "reply_to_user": {"reputation": 8608, "user_id": 1091116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/15098b2b940cacd8b4d07026e01e3102?s=128&d=identicon&r=PG", "display_name": "d33tah", "link": "https://stackoverflow.com/users/1091116/d33tah"}, "edited": false, "score": 0, "creation_date": 1432160682, "post_id": 30361371, "comment_id": 48814431, "body": "User accounts and names are both directory-lookup requests that can be handled by network services (NIS, LDAP, ActiveDirectory) in addition to local files. Note now the <code>passwd</code>, <code>shadow</code>, and <code>group</code> entries are in <code>nsswitch.conf</code> - <code>Name Service Switch</code>."}], "tags": [], "owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "is_accepted": true, "score": 3, "last_activity_date": 1432160434, "creation_date": 1432160434, "answer_id": 30361371, "question_id": 30361303, "link": "https://stackoverflow.com/questions/30361303/why-is-getpwuid-calling-connect-on-my-system/30361371#30361371", "title": "Why is getpwuid calling connect on my system?", "body": "<p><code>nscd</code> is the <a href=\"http://linux.die.net/man/8/nscd\" rel=\"nofollow\">\"name service cache daemon\"</a>. Clients connect to it via socket (using the <code>nscd*</code> functions in your stack trace) and it caches name lookup results. It makes sense to just offload all the work into this daemon instead of special-casing the things in each client.</p>\n"}], "owner": {"reputation": 8608, "user_id": 1091116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/15098b2b940cacd8b4d07026e01e3102?s=128&d=identicon&r=PG", "display_name": "d33tah", "link": "https://stackoverflow.com/users/1091116/d33tah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 30361371, "answer_count": 1, "score": 2, "last_activity_date": 1432160434, "creation_date": 1432160077, "last_edit_date": 1432160392, "question_id": 30361303, "link": "https://stackoverflow.com/questions/30361303/why-is-getpwuid-calling-connect-on-my-system", "title": "Why is getpwuid calling connect on my system?", "body": "<p>Consider the following Linux commands on Fedora 21:</p>\n\n<pre><code>[0:12:57][/tmp/nss]$ echo 'main() { getpwuid(1000); }' &gt; test.c                                          \n[0:12:59][/tmp/nss]$ gcc -ggdb test.c                          \n[0:13:01][/tmp/nss]$ gdb ./a.out -ex 'break main' -ex 'r' -ex 'break connect' -ex 'c' -ex 'bt' -ex 'quit'\nGNU gdb (GDB) Fedora 7.8.2-38.fc21\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-redhat-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\n\nwarning: ~/.gdbinit.local: No such file or directory\nReading symbols from ./a.out...done.\nBreakpoint 1 at 0x40054a: file test.c, line 1.\nStarting program: /tmp/nss/a.out \n-----------------------------------------------------------------------------------------------------------------------[regs]\n  RAX: 0x0000000000400546  RBX: 0x0000000000000000  RBP: 0x00007FFFFFFFDB70  RSP: 0x00007FFFFFFFDB70  o d I t s Z a P c \n  RDI: 0x0000000000000001  RSI: 0x00007FFFFFFFDC58  RDX: 0x00007FFFFFFFDC68  RCX: 0x0000000000400560  RIP: 0x000000000040054A                                                    \n  R8 : 0x0000003F3E1B8E80  R9 : 0x0000003F3E1B8E80  R10: 0x0000003F3E1B76A0  R11: 0x0000003F3DE1FEF0  R12: 0x0000000000400450                                                    \n  R13: 0x00007FFFFFFFDC50  R14: 0x0000000000000000  R15: 0x0000000000000000\n  CS: 0033  DS: 0000  ES: 0000  FS: 0000  GS: 0000  SS: 002B                                                                                                                     \n-----------------------------------------------------------------------------------------------------------------------[code]\n=&gt; 0x40054a &lt;main+4&gt;:   mov    edi,0x3e8\n   0x40054f &lt;main+9&gt;:   mov    eax,0x0\n   0x400554 &lt;main+14&gt;:  call   0x400420 &lt;getpwuid@plt&gt;\n   0x400559 &lt;main+19&gt;:  pop    rbp\n   0x40055a &lt;main+20&gt;:  ret    \n   0x40055b:    nop    DWORD PTR [rax+rax*1+0x0]\n   0x400560 &lt;__libc_csu_init&gt;:  push   r15\n   0x400562 &lt;__libc_csu_init+2&gt;:        push   r14\n-----------------------------------------------------------------------------------------------------------------------------\n\nBreakpoint 1, main () at test.c:1\n1       main() { getpwuid(1000); }\nBreakpoint 2 at 0x3f3df00f70: file ../sysdeps/unix/syscall-template.S, line 81.\nContinuing.\n-----------------------------------------------------------------------------------------------------------------------[regs]\n  RAX: 0x0000000000000020  RBX: 0x0000000000000003  RBP: 0x00007FFFFFFFD790  RSP: 0x00007FFFFFFFD688  o d I t s z a p C \n  RDI: 0x0000000000000003  RSI: 0x00007FFFFFFFD6F0  RDX: 0x000000000000006E  RCX: 0x6F732F6463736E2F  RIP: 0x0000003F3DF00F70                                                    \n  R8 : 0x00001FFFFFFFF5A4  R9 : 0x0000000000000001  R10: 0x0000000000000000  R11: 0x0000000000000202  R12: 0x0000000000000013                                                    \n  R13: 0x00007FFFFFFFD690  R14: 0x0000000000000007  R15: 0x00001FFFFFFFF5A4                                                                                                      \n  CS: 0033  DS: 0000  ES: 0000  FS: 0000  GS: 0000  SS: 002B\n-----------------------------------------------------------------------------------------------------------------------[code]\n=&gt; 0x3f3df00f70 &lt;connect&gt;:      cmp    DWORD PTR [rip+0x2bbd7d],0x0        # 0x3f3e1bccf4 &lt;__libc_multiple_threads&gt;\n   0x3f3df00f77 &lt;connect+7&gt;:    jne    0x3f3df00f89 &lt;connect+25&gt;\n   0x3f3df00f79 &lt;__connect_nocancel&gt;:   mov    eax,0x2a\n   0x3f3df00f7e &lt;__connect_nocancel+5&gt;: syscall \n   0x3f3df00f80 &lt;__connect_nocancel+7&gt;: cmp    rax,0xfffffffffffff001\n   0x3f3df00f86 &lt;__connect_nocancel+13&gt;:        jae    0x3f3df00fb9 &lt;connect+73&gt;\n   0x3f3df00f88 &lt;__connect_nocancel+15&gt;:        ret    \n   0x3f3df00f89 &lt;connect+25&gt;:   sub    rsp,0x8\n-----------------------------------------------------------------------------------------------------------------------------\n\nBreakpoint 2, connect () at ../sysdeps/unix/syscall-template.S:81\n81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)\n#0  connect () at ../sysdeps/unix/syscall-template.S:81\n#1  0x0000003f3df37663 in open_socket (type=type@entry=GETFDPW, key=key@entry=0x3f3df86853 \"passwd\", keylen=keylen@entry=0x7) at nscd_helper.c:207\n#2  0x0000003f3df37d1d in __nscd_get_mapping (type=type@entry=GETFDPW, key=key@entry=0x3f3df86853 \"passwd\", mappedp=mappedp@entry=0x3f3e1bc618 &lt;map_handle+8&gt;) at nscd_helper.c:293\n#3  0x0000003f3df38277 in __nscd_get_map_ref (type=type@entry=GETFDPW, name=name@entry=0x3f3df86853 \"passwd\", mapptr=mapptr@entry=0x3f3e1bc610 &lt;map_handle&gt;, gc_cyclep=gc_cyclep@entry=0x7fffffffd9fc) at nscd_helper.c:443\n#4  0x0000003f3df34758 in nscd_getpw_r (key=0x7fffffffda87 \"1000\", keylen=keylen@entry=0x5, type=type@entry=GETPWBYUID, resultbuf=resultbuf@entry=0x3f3e1ba160 &lt;resbuf.9883&gt;, buffer=buffer@entry=0x602010 \"\", buflen=buflen@entry=0x400, result=0x7fffffffdb38) at nscd_getpw_r.c:95\n#5  0x0000003f3df34bd9 in __nscd_getpwuid_r (uid=uid@entry=0x3e8, resultbuf=resultbuf@entry=0x3f3e1ba160 &lt;resbuf.9883&gt;, buffer=buffer@entry=0x602010 \"\", buflen=buflen@entry=0x400, result=result@entry=0x7fffffffdb38) at nscd_getpw_r.c:63\n#6  0x0000003f3dec3610 in __getpwuid_r (uid=uid@entry=0x3e8, resbuf=resbuf@entry=0x3f3e1ba160 &lt;resbuf.9883&gt;, buffer=0x602010 \"\", buflen=buflen@entry=0x400, result=result@entry=0x7fffffffdb38) at ../nss/getXXbyYY_r.c:196\n#7  0x0000003f3dec2ebe in getpwuid (uid=0x3e8) at ../nss/getXXbyYY.c:116\n#8  0x0000000000400559 in main () at test.c:1\n[0:13:04][/tmp/nss]$ cat /etc/nsswitch.conf\n#\n# /etc/nsswitch.conf\n#\n# An example Name Service Switch config file. This file should be\n# sorted with the most-used services at the beginning.\n#\n# The entry '[NOTFOUND=return]' means that the search for an\n# entry should stop if the search in the previous entry turned\n# up nothing. Note that if the search failed due to some other reason\n# (like no NIS server responding) then the search continues with the\n# next entry.\n#\n# Valid entries include:\n#\n#       nisplus                 Use NIS+ (NIS version 3)\n#       nis                     Use NIS (NIS version 2), also called YP\n#       dns                     Use DNS (Domain Name Service)\n#       files                   Use the local files\n#       db                      Use the local database (.db) files\n#       compat                  Use NIS on compat mode\n#       hesiod                  Use Hesiod for user lookups\n#       [NOTFOUND=return]       Stop searching if not found so far\n#\n\n# To use db, put the \"db\" in front of \"files\" for entries you want to be\n# looked up first in the databases\n#\n# Example:\n#passwd:    db files nisplus nis\n#shadow:    db files nisplus nis\n#group:     db files nisplus nis\n\npasswd:     files\nshadow:     files\ngroup:      files\n#initgroups: files\n\n#hosts:     db files nisplus nis dns\nhosts:      files dns mdns4_minimal myhostname\n\n# Example - obey only what nisplus tells us...\n#services:   nisplus [NOTFOUND=return] files\n#networks:   nisplus [NOTFOUND=return] files\n#protocols:  nisplus [NOTFOUND=return] files\n#rpc:        nisplus [NOTFOUND=return] files\n#ethers:     nisplus [NOTFOUND=return] files\n#netmasks:   nisplus [NOTFOUND=return] files     \n\nbootparams: nisplus [NOTFOUND=return] files\n\nethers:     files\nnetmasks:   files\nnetworks:   files\nprotocols:  files\nrpc:        files\nservices:   files\n\nnetgroup:   files\n\npublickey:  nisplus\n\nautomount:  files\naliases:    files nisplus\n</code></pre>\n\n<p>Why is <code>connect</code> being called here when a simple lookup on <code>/etc/passwd</code> would do?</p>\n"}, {"tags": ["c", "time"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1432159823, "post_id": 30361232, "comment_id": 48814123, "body": "Don&#39;t use the time as the seed. Call <code>srand()</code> with a specific seed instead of the time."}, {"owner": {"reputation": 513, "user_id": 4922364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9iR-kNVu834/AAAAAAAAAAI/AAAAAAAAAC4/LpHxHa1_QIg/photo.jpg?sz=128", "display_name": "Peter Emil", "link": "https://stackoverflow.com/users/4922364/peter-emil"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1432159944, "post_id": 30361232, "comment_id": 48814166, "body": "Yes I am asking about using this with a specific game that I play, I want to always get the same level, so is this feasible or not?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1432160134, "post_id": 30361232, "comment_id": 48814237, "body": "If you&#39;re the system administrator you can set the clock on the system and then run your game. You should do it in a script so there&#39;s no typing delay between them."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1432160201, "post_id": 30361232, "comment_id": 48814260, "body": "What operating system? The details of doing this are OS-specific."}, {"owner": {"reputation": 48529, "user_id": 63074, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e77511a13f8c53b87610e52b4b38aa43?s=128&d=identicon&r=PG", "display_name": "Mike Dinescu", "link": "https://stackoverflow.com/users/63074/mike-dinescu"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1432160256, "post_id": 30361232, "comment_id": 48814278, "body": "@Barmar - that&#39;s likely not enough.. you need to set the time at the exact time when the PRNG is seeded. Otherwise there could be other processes that could introduce delays"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1432160334, "post_id": 30361232, "comment_id": 48814312, "body": "I know, but it&#39;s about as good as you can do without modifying the program."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1432160377, "post_id": 30361232, "comment_id": 48814331, "body": "Surely this only works if the resolution of the clock used by the software is in the seconds&#39; range? (related: <a href=\"http://stackoverflow.com/q/5574914/2564301\">stackoverflow.com/q/5574914/2564301</a>, and dozens of similar questions) For example, if the load time of this application is more than a second, it won&#39;t work with setting the clock."}, {"owner": {"reputation": 513, "user_id": 4922364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9iR-kNVu834/AAAAAAAAAAI/AAAAAAAAAC4/LpHxHa1_QIg/photo.jpg?sz=128", "display_name": "Peter Emil", "link": "https://stackoverflow.com/users/4922364/peter-emil"}, "edited": false, "score": 0, "creation_date": 1432160398, "post_id": 30361232, "comment_id": 48814334, "body": "I would like to know if I can do this on windows 7 and jailbroken iOS"}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432160599, "post_id": 30361232, "comment_id": 48814400, "body": "@Jongware a second seems like a reasonable margin of error, you can always set the clock back an extra 3 seconds if the app takes 3.4--3.7 seconds to load but finding what second is used to seed during the load could take a few tries."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1432160874, "post_id": 30361232, "comment_id": 48814499, "body": "Most games are smart enough to add &quot;user Input&quot; to the timing of the start of the game as well as a very precise timer to seed with.  This makes sure this cannot be exploited trivially.  Don&#39;t seed on start, but after the first or second user input."}], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 4922364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9iR-kNVu834/AAAAAAAAAAI/AAAAAAAAAC4/LpHxHa1_QIg/photo.jpg?sz=128", "display_name": "Peter Emil", "link": "https://stackoverflow.com/users/4922364/peter-emil"}, "edited": false, "score": 0, "creation_date": 1432160163, "post_id": 30361283, "comment_id": 48814244, "body": "Thank you, can you give me a link or at least tell me what to search for in order to learn more about how to do this?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1432160171, "post_id": 30361283, "comment_id": 48814248, "body": "On Unix you could use <code>LD_PRELOAD</code> to replace the <code>time()</code> function."}, {"owner": {"reputation": 48529, "user_id": 63074, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e77511a13f8c53b87610e52b4b38aa43?s=128&d=identicon&r=PG", "display_name": "Mike Dinescu", "link": "https://stackoverflow.com/users/63074/mike-dinescu"}, "reply_to_user": {"reputation": 513, "user_id": 4922364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9iR-kNVu834/AAAAAAAAAAI/AAAAAAAAAC4/LpHxHa1_QIg/photo.jpg?sz=128", "display_name": "Peter Emil", "link": "https://stackoverflow.com/users/4922364/peter-emil"}, "edited": false, "score": 0, "creation_date": 1432160696, "post_id": 30361283, "comment_id": 48814438, "body": "@PeterEmil I&#39;ve added two links - one to the IDAPro website and the other to a book that is written like a tutorial that explains how to use tools like IDA and WinDBG to identify the code you would like to intercept and how to modify it to do what you want"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1432160756, "post_id": 30361283, "comment_id": 48814469, "body": "Or just pass in a set value instead of using time.  Then, you completely control the state of the game."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1432161012, "post_id": 30361283, "comment_id": 48814539, "body": "@MichaelDorgan: yup - modifying the original executable. Rigging the system to always return the same time may have been possible in ye olde DOS days but under Windows I&#39;m not so sure that&#39;s doable."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1432161103, "post_id": 30361283, "comment_id": 48814572, "body": "If you know where the call is, you probably could hit the word.  Of course for games that live on a server and you access as a client, you get booted for stuff like this.  :)"}], "tags": [], "owner": {"reputation": 48529, "user_id": 63074, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e77511a13f8c53b87610e52b4b38aa43?s=128&d=identicon&r=PG", "display_name": "Mike Dinescu", "link": "https://stackoverflow.com/users/63074/mike-dinescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1432159961, "creation_date": 1432159961, "answer_id": 30361283, "question_id": 30361232, "link": "https://stackoverflow.com/questions/30361232/freezing-time-to-get-the-same-random-outcome/30361283#30361283", "title": "Freezing time to get the same random outcome", "body": "<p>If the game uses a pseudo-random number generator that is seeded from the runtime timestamp then yes, if you manage to set the time to the same value each time the game is started then you should get the same levels.</p>\n\n<p>Probably the way to do it though would be to intercept the calls to the get system time system call and set the time to a specific value at that time and let the rest of it go unaltered.</p>\n\n<p>You could try to give it a go with IDA Pro (<a href=\"https://www.hex-rays.com/products/ida/\" rel=\"nofollow noreferrer\">https://www.hex-rays.com/products/ida/</a>) or some other disassembler/debugger. I also found this book an interesting read with respect to <em>hacking</em> with IDA Pro (<a href=\"https://rads.stackoverflow.com/amzn/click/com/0764574817\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/Reversing-Secrets-Engineering-Eldad-Eilam/dp/0764574817</a>) </p>\n"}, {"tags": [], "owner": {"reputation": 797, "user_id": 4905701, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206378492964245/picture?type=large", "display_name": "Ron Kuper", "link": "https://stackoverflow.com/users/4905701/ron-kuper"}, "is_accepted": false, "score": 0, "last_activity_date": 1432161804, "creation_date": 1432161804, "answer_id": 30361628, "question_id": 30361232, "link": "https://stackoverflow.com/questions/30361232/freezing-time-to-get-the-same-random-outcome/30361628#30361628", "title": "Freezing time to get the same random outcome", "body": "<p>I suspect you are not likely to be able to freeze time with sufficient granulity, unless the game was coded to use seconds rather then msec or usec. Ask it will take is one hardware interrupt from mouse, disk, display network etc to make this non deterministic. </p>\n\n<p>Don't cheat.... ;-) </p>\n"}], "owner": {"reputation": 513, "user_id": 4922364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9iR-kNVu834/AAAAAAAAAAI/AAAAAAAAAC4/LpHxHa1_QIg/photo.jpg?sz=128", "display_name": "Peter Emil", "link": "https://stackoverflow.com/users/4922364/peter-emil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 30361283, "answer_count": 2, "score": 1, "last_activity_date": 1432161804, "creation_date": 1432159696, "question_id": 30361232, "link": "https://stackoverflow.com/questions/30361232/freezing-time-to-get-the-same-random-outcome", "title": "Freezing time to get the same random outcome", "body": "<p>When studying the first programming course at college we learnt that time is introduced as the seed value of the rand function in order to give out random values every time the code runs. If I can fix time and play a game that gives random levels each time you hit play, will I always get the same level? And if yes is there anyway to do this?</p>\n"}, {"tags": ["java", "c++", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432159002, "post_id": 30361046, "comment_id": 48813842, "body": "No, <code>sizeof()</code> will not give it the length of the string but the size of the type, are you sure of <code>(*this)-&gt;</code>?"}, {"owner": {"reputation": 805, "user_id": 3618509, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2ebf555307f721af722397544de00285?s=128&d=identicon&r=PG&f=1", "display_name": "JavaProphet", "link": "https://stackoverflow.com/users/3618509/javaprophet"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432159557, "post_id": 30361046, "comment_id": 48814028, "body": "@iharob I found it online, testing will show whether it&#39;s good or not."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432160303, "post_id": 30361046, "comment_id": 48814303, "body": "You can check how <code>JNIEnv</code> is defined and whether it&#39;s a pointer <code>typedef</code> which would mean that <code>(*this)</code> makes sense."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1432166294, "post_id": 30361046, "comment_id": 48816102, "body": "<code>JNIEnv</code> is indeed a pointer: <code>typedef const struct JNINativeInterface *JNIEnv;</code> thus the JNI functions effectively take a <code>JNINativeInterface**</code> as input, so <code>(*this)-&gt;</code> is correct syntax to use."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1432166397, "post_id": 30361097, "comment_id": 48816123, "body": "The second parameter of <code>bind()</code> expects a <code>sockaddr*</code> pointer as input: <code>bind(sockfd, (struct sockaddr*)&amp;sun, sizeof(sun))</code>"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1432159034, "creation_date": 1432159034, "answer_id": 30361097, "question_id": 30361046, "link": "https://stackoverflow.com/questions/30361046/get-length-of-jstring-char/30361097#30361097", "title": "Get length of jstring/char *?", "body": "<p>Since the type of the variable is <code>const char *</code> it suggests that it's a <code>nul</code> terminated string, hence</p>\n\n<pre><code>size_t length = strlen(npath);\n</code></pre>\n\n<p>should be enough.</p>\n\n<p>Although, your call to <code>bind()</code> is wrong, you shold pass the size of the address structure, for which</p>\n\n<pre><code>return bind(sockfd, sun, sizeof(sun));\n</code></pre>\n\n<p>should be correct.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1432166242, "creation_date": 1432166242, "answer_id": 30362316, "question_id": 30361046, "link": "https://stackoverflow.com/questions/30361046/get-length-of-jstring-char/30362316#30362316", "title": "Get length of jstring/char *?", "body": "<p>First, you have a memory leak.  The <code>char*</code> pointer returned by <code>GetStringUTFChars()</code> <em>must</em> be freed using <code>ReleaseStringUTFChars()</code>, which you are not doing.</p>\n\n<p>Second, <code>bind()</code> expects you to specify the byte size of the <code>sockaddr_un</code> struct, not the character length of <code>npath</code>.  Also, the second parameter of <code>bind()</code> expects a <code>sockaddr*</code> pointer as input.</p>\n\n<p>Third, <code>sockaddr_un::sun_path</code> is a <code>char[]</code> array, you cannot assign a <code>char*</code> pointer to it. You have to copy the content that is being pointed at.</p>\n\n<p>Try this:</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_org_avuna_httpd_util_CLibJNI_bind(JNIEnv * this, jclass cls, jint sockfd, jint family, jstring path, jint len)\n{\n    struct sockaddr_un sun;\n    memset(&amp;sun, 0, sizeof(sun));\n    sun.sun_family = family;\n    const char *npath = (*this)-&gt;GetStringUTFChars(this, path, 0);\n    strncpy(sun.sun_path, npath, UNIX_PATH_MAX);\n    (*this)-&gt;ReleaseStringUTFChars(this, path, npath);\n    return bind(sockfd, (struct sockaddr *) &amp;sun, sizeof(sun));\n}\n</code></pre>\n\n<p>With that said, <code>sockaddr_un</code> <em>always</em> uses <code>AF_UNIX</code> for its family, so it does not make sense to pass a <code>family</code> as an input value.  If you need to pass in different <code>family</code> values, you need to use a different <code>sockaddr_...</code> struct for each <code>family</code>, eg:</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_org_avuna_httpd_util_CLibJNI_bind(JNIEnv * this, jclass cls, jint sockfd, jint family, jstring path, jint len)\n{\n    switch (family)\n    {\n        case AF_UNIX:\n        {\n            struct sockaddr_un sun;\n            memset(&amp;sun, 0, sizeof(sun));\n            sun.sun_family = AF_UNIX;\n            const char *npath = (*this)-&gt;GetStringUTFChars(this, path, 0);\n            strncpy(sun.sun_path, npath, UNIX_PATH_MAX);\n            (*this)-&gt;ReleaseStringUTFChars(this, path, npath);\n            return bind(sockfd, (struct sockaddr *) &amp;sun, sizeof(sun));\n        }\n\n        case AF_INET:\n        {\n            struct sockaddr_in sin;\n            memset(&amp;sin, 0, sizeof(sin));\n            sin.sin_family = AF_INET;\n            const char *npath = (*this)-&gt;GetStringUTFChars(this, path, 0);\n            inet_pton(AF_INET, npath, &amp;sin.sin_addr);\n            sin.sin_port = 0;\n            (*this)-&gt;ReleaseStringUTFChars(this, path, npath);\n            return bind(sockfd, (struct sockaddr *) &amp;sin, sizeof(sin));\n        }\n\n        case AF_INET6:\n        {\n            struct sockaddr_in6 sin;\n            memset(&amp;sin, 0, sizeof(sin));\n            sin.sin6_family = AF_INET6;\n            const char *npath = (*this)-&gt;GetStringUTFChars(this, path, 0);\n            inet_pton(AF_INET6, npath, &amp;sin.sin6_addr);\n            sin.sin6_port = 0;\n            (*this)-&gt;ReleaseStringUTFChars(this, path, npath);\n            return bind(sockfd, (struct sockaddr *) &amp;sin, sizeof(sin));\n        }\n\n        // and so on ...\n    }\n\n    return -1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 619, "user_id": 1805643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec3672cb06390666410b2c0f39de8e5?s=128&d=identicon&r=PG", "display_name": "Jack Culhane", "link": "https://stackoverflow.com/users/1805643/jack-culhane"}, "is_accepted": false, "score": 2, "last_activity_date": 1531477644, "creation_date": 1531477644, "answer_id": 51323059, "question_id": 30361046, "link": "https://stackoverflow.com/questions/30361046/get-length-of-jstring-char/51323059#51323059", "title": "Get length of jstring/char *?", "body": "<p>Regarding the length of the jstring, what is needed is GetStringUTFLength.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html</a></p>\n\n<p>This should be more efficient than calling strlen on the null terminated char* as I don't think it will need to search for the final null.</p>\n"}], "owner": {"reputation": 805, "user_id": 3618509, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2ebf555307f721af722397544de00285?s=128&d=identicon&r=PG&f=1", "display_name": "JavaProphet", "link": "https://stackoverflow.com/users/3618509/javaprophet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4573, "favorite_count": 0, "accepted_answer_id": 30361097, "answer_count": 3, "score": 0, "last_activity_date": 1531477644, "creation_date": 1432158810, "question_id": 30361046, "link": "https://stackoverflow.com/questions/30361046/get-length-of-jstring-char", "title": "Get length of jstring/char *?", "body": "<p>This is my JNI C code:</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_org_avuna_httpd_util_CLibJNI_bind(JNIEnv * this, jclass cls, jint sockfd, jint family, jstring path, jint len) {\n    struct sockaddr_un sun;\n    sun.sun_family = family;\n    const char *npath = (*this)-&gt;GetStringUTFChars(this, path, 0);\n    sun.sun_path = npath;\n    return bind(sockfd, sun, sizeof(&amp;npath));\n}\n</code></pre>\n\n<p>I just guessed unsuccessfully (<code>sizeof(&amp;npath)</code>) how to get the length. I'm not well versed in C, but I figure there is a way to get a length out of a jstring.</p>\n\n<p>Google yields nothing, what basic thing am I missing?</p>\n"}, {"tags": ["c", "function-pointers"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1432157077, "post_id": 30360617, "comment_id": 48813034, "body": "There&#39;s no way to pass &quot;any function&quot;, the compiler needs to know in great detail how to generate the function call. There are <a href=\"http://en.wikipedia.org/wiki/Variadic_function\" rel=\"nofollow noreferrer\">variadic functions</a> that take a variable number of parameters, but I assume that&#39;s not what you&#39;re talking about."}, {"owner": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "edited": false, "score": 0, "creation_date": 1432158993, "post_id": 30360617, "comment_id": 48813836, "body": "You might check out <a href=\"http://stackoverflow.com/questions/4393716/is-there-a-a-way-to-achieve-closures-in-c\">closures/blocks in C</a>"}, {"owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "edited": false, "score": 0, "creation_date": 1432284048, "post_id": 30360617, "comment_id": 48872325, "body": "@John consider accepting one of the answer."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4922264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/058fdb687e3707663d957d73e0a4194d?s=128&d=identicon&r=PG&f=1", "display_name": "God_is_a_sociopath_so_are_we", "link": "https://stackoverflow.com/users/4922264/god-is-a-sociopath-so-are-we"}, "is_accepted": false, "score": 1, "last_activity_date": 1432158177, "creation_date": 1432158177, "answer_id": 30360911, "question_id": 30360617, "link": "https://stackoverflow.com/questions/30360617/function-that-meassures-execution-time-of-any-function-passed-as-parameter/30360911#30360911", "title": "Function that meassures execution time of any function passed as parameter", "body": "<p>First of all be carefull as clock() returns clock cycles and not seconds, to get the seconds you must divide the result from Clock() with CLOCKS_PER_SEC wich is defined in time.h\nI guess it's seconds what you want. if not then just ignore that.</p>\n\n<p>you could create a struct with the values you wish for your problem</p>\n\n<p>something like this</p>\n\n<pre><code>typedef struct values {\n   int *v\n} *VALUES;\n</code></pre>\n\n<p>where you would store your values. You can store as many as you wish as long as you write a = malloc (N*(sizeof (int))) with N being how many ints you want to store! Like this you can have 1000000000000 variables, just one, or maybe even zero, it's your choice, these are variables that wont be lost untill the end of the program. You just need to have ptr receiving a variable of type VALUES.</p>\n\n<p>to access the values you just do \nVALUES a; a->v;\nand there you go, simple as that!</p>\n\n<p>Hope I helped.</p>\n"}, {"tags": [], "owner": {"reputation": 4982, "user_id": 155253, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b539ac44c75b40bab8d2b19aac94c18f?s=128&d=identicon&r=PG", "display_name": "Codism", "link": "https://stackoverflow.com/users/155253/codism"}, "is_accepted": false, "score": 0, "last_activity_date": 1432158299, "creation_date": 1432158299, "answer_id": 30360935, "question_id": 30360617, "link": "https://stackoverflow.com/questions/30360617/function-that-meassures-execution-time-of-any-function-passed-as-parameter/30360935#30360935", "title": "Function that meassures execution time of any function passed as parameter", "body": "<p>You need a language that supports lambda expression. As far as I know, C does not support lambda expression so far. The following is a C++0x snippet that shows how this can be done:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate&lt;typename F&gt;\n void timeIt(const F&amp; f) {\n    cout &lt;&lt; \"start...\" &lt;&lt; endl;\n    f();\n    cout &lt;&lt; \"end...\" &lt;&lt; endl;\n}\n\nint f(int n) {\n    return n &lt;= 1 ? 1 : n*f(n-1);\n}\n\nvoid main() {\n    int n = 20;\n    timeIt([n] {\n        cout &lt;&lt; \"result=\" &lt;&lt; f(n) &lt;&lt; endl;\n    });\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4066339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b56bb48b60175656a78577cb4369145?s=128&d=identicon&r=PG&f=1", "display_name": "John Rodens", "link": "https://stackoverflow.com/users/4066339/john-rodens"}, "edited": false, "score": 0, "creation_date": 1432404970, "post_id": 30361234, "comment_id": 48918208, "body": "OK. I added CLOCKS_PER_SEC devide in printf on line 12 and it prints time for each function. It works. Thanks. I just don&#39;t get what&#39;s happening with all these defines. May I ask what literature to look at to find out more if you don&#39;t have time to explain it in more detail. And thanks again :)"}, {"owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "reply_to_user": {"reputation": 43, "user_id": 4066339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b56bb48b60175656a78577cb4369145?s=128&d=identicon&r=PG&f=1", "display_name": "John Rodens", "link": "https://stackoverflow.com/users/4066339/john-rodens"}, "edited": false, "score": 1, "creation_date": 1432491160, "post_id": 30361234, "comment_id": 48938426, "body": "@JohnRodens Glad it works for you :). All these defines are preprocessor (ab)use to make it works. As you can see, you use 2 temporary variable when checking the time for 1 function. Meaning you have to generate multiple variable name to make it works. This is what <code>__COUNTER__</code> does. The <code>MACRO_CONCAT</code> helps build a unique variable name for temporary variable. <code>args...</code> is as variadic macro argument to let us define a macro with any number of parameter. So I recommend you read about: 1) Variadic macros 2) macro string concatenation to better understand how it works."}], "tags": [], "owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "is_accepted": true, "score": 1, "last_activity_date": 1432159732, "creation_date": 1432159732, "answer_id": 30361234, "question_id": 30360617, "link": "https://stackoverflow.com/questions/30360617/function-that-meassures-execution-time-of-any-function-passed-as-parameter/30361234#30361234", "title": "Function that meassures execution time of any function passed as parameter", "body": "<p>Doing so with function pointer is not possible in C.</p>\n\n<p>Hopefully, I believe there is a viable alternative, provided you can use it.\nIt uses macro to wrap the function call instead of an intermediary function.</p>\n\n<p>Here is a possible implementation:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n\n#define CHECK_TIME(fct, args...) CHECK_TIME_IMPL(fct, __COUNTER__ , args)\n\n#define CONCAT_IMPL( x, y ) x##y\n#define MACRO_CONCAT( x, y ) CONCAT_IMPL( x, y )\n\n#define CHECK_TIME_IMPL(fct, COUNTER, args...) time_t MACRO_CONCAT(start_time, COUNTER) = clock(); \\\n  (fct)(args); \\\n  time_t MACRO_CONCAT(end_time, COUNTER) = clock();     \\\n  printf(\"%f\\n\", (double)MACRO_CONCAT(end_time, COUNTER) - MACRO_CONCAT(start_time, COUNTER));\n\nvoid print_range(int n1, int n2)\n{\n  int i;\n  for(i=n1; i&lt;n2; i++){\n    printf(\"%d\\n\", i);\n  }\n}\n\nvoid something_else(char c) {\n  printf(\"Char: %c\\n\", c);\n}\n\nvoid no_param() {printf(\"Doing nothing\\n\");}\n\nint main()\n{\n  int n1 = 1, n2 = 10;\n\n  CHECK_TIME(print_range, n1, n2);\n  CHECK_TIME(print_range, n1, n2);\n  CHECK_TIME(something_else, 'c');\n  CHECK_TIME(no_param);\n\n  return 0;\n}\n</code></pre>\n\n<p>Note that I did not fix the problem related to the misuse of <code>clock()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4066339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b56bb48b60175656a78577cb4369145?s=128&d=identicon&r=PG&f=1", "display_name": "John Rodens", "link": "https://stackoverflow.com/users/4066339/john-rodens"}, "is_accepted": false, "score": -1, "last_activity_date": 1432387899, "creation_date": 1432387899, "answer_id": 30413296, "question_id": 30360617, "link": "https://stackoverflow.com/questions/30360617/function-that-meassures-execution-time-of-any-function-passed-as-parameter/30413296#30413296", "title": "Function that meassures execution time of any function passed as parameter", "body": "<p>After doing some more research I have found out that I was trying to do a callback in c. Didn't realize it isn't possible the way I wanted it.</p>\n"}], "owner": {"reputation": 43, "user_id": 4066339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b56bb48b60175656a78577cb4369145?s=128&d=identicon&r=PG&f=1", "display_name": "John Rodens", "link": "https://stackoverflow.com/users/4066339/john-rodens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 30361234, "answer_count": 4, "score": 2, "last_activity_date": 1432387899, "creation_date": 1432156921, "question_id": 30360617, "link": "https://stackoverflow.com/questions/30360617/function-that-meassures-execution-time-of-any-function-passed-as-parameter", "title": "Function that meassures execution time of any function passed as parameter", "body": "<p>I want to create a function that measures execution time of any function that is passed as it's argument no matter how many arguments the function that is passed has.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n\ntypedef void (*FUNC_PTR)(int, int);\n\nvoid print_range(int n1, int n2)\n{\n    int i;\n    for(i=n1; i&lt;n2; i++){\n            printf(\"%d\\n\", i);\n    }   \n}\n\nvoid measureTime(FUNC_PTR ptr, int n1, int n2)\n{\n    time_t start_time = clock();\n    ptr(n1, n2); \n    time_t end_time = clock();\n    printf(\"%f\\n\", (double)end_time - start_time);\n\n}\n\nmain()\n{   \n    int n1 = 1, n2 = 1000;\n    FUNC_PTR ptr = print_range;\n    measureTime(ptr, n1, n2);\n}\n</code></pre>\n\n<p>I got it working for this specific case of passing <code>print_range</code> that has 2 arguments.</p>\n\n<p>Is there any way to make <code>measureTime</code> function execute any function that is passed as <code>FUNC_PTR ptr</code> without having to pass <code>print_range</code> <code>n1</code> and <code>n2</code> arguments to <code>measureTime</code> function.</p>\n\n<p>So for instance function that is passed as <code>ptr</code> can have any number of arguments and <code>measureTime</code> will still work.</p>\n\n<pre><code>void measureTime(FUNC_PTR ptr)\n{\n    time_t start_time = clock();\n    ptr;\n    time_t end_time = clock();\n    printf(\"%f\\n\", (double)end_time - start_time);\n}\n</code></pre>\n\n<p>And if above can work how would than main look like?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432156976, "post_id": 30360552, "comment_id": 48812971, "body": "@Jongware I suppose an array of <code>42</code> elements..."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432157039, "post_id": 30360552, "comment_id": 48813012, "body": "@Jongware I edited. it means 6 lines and 7 columns."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1432157814, "post_id": 30360552, "comment_id": 48813361, "body": "Have you attempted to solve this yourself yet?  Any code to show?"}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1432158110, "post_id": 30360552, "comment_id": 48813482, "body": "yeah, but I didn&#39;t reach a complete solution, I will try to put something in few minutes.."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1432161541, "post_id": 30360552, "comment_id": 48814697, "body": "Homework attempt without posting any code or making any attempt to solve by oneself."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1432161652, "post_id": 30360552, "comment_id": 48814727, "body": "I edited the solution."}], "answers": [{"tags": [], "owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1432161617, "creation_date": 1432161617, "answer_id": 30361589, "question_id": 30360552, "link": "https://stackoverflow.com/questions/30360552/a-way-to-go-over-the-diagonals-of-an-array-of-size-67/30361589#30361589", "title": "A way to go over the diagonals of an array of size [6][7]", "body": "<p>Diagonals are sequences where </p>\n\n<ul>\n<li><code>i == j + c</code> for i from (0,height) and c (-width, height)</li>\n<li>or <code>i == -j + c</code>. </li>\n</ul>\n\n<p>So if goal to write code that fits into small number of lines - just write loops that go over i {0-6} and check for indexes to fit in range. Something like </p>\n\n<pre><code>for (int c= -7; c &lt; 7; c++)\n{\n  int starsOnDiag = 0;\n  for(int i = 0; i &lt; 7; i++)\n  { \n     starsOnDiag += !indexesInRange(i, j) ? 0 :\n         cell[i, i+c] == '*' ? 1 : 0;\n  }\n  ... // other diagonal and check for other symbol\n }\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1432161635, "creation_date": 1432156702, "last_edit_date": 1432161635, "question_id": 30360552, "link": "https://stackoverflow.com/questions/30360552/a-way-to-go-over-the-diagonals-of-an-array-of-size-67", "title": "A way to go over the diagonals of an array of size [6][7]", "body": "<p>I'm building in C language, a game called 4-in-a-row or Connect Four, for a fast review of the game you can see here: \n<a href=\"http://en.wikipedia.org/wiki/Connect_Four\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Connect_Four</a> </p>\n\n<p>so, I have a 2 dimensional array of size [6][7], and I want to check in diagonal if there are 4 tokens which are \"*\" or \"o\" that are defined as a chars which are in a a row. I'm trying to write a function that after each play, it sums up all the possible diagonals and see if the sum is 4 for example, or if we want to check in pairs, if we get three similar pairs then there are 4 equal tokens in a row, so in this case the sum is 3, and so on..</p>\n\n<p>for all I know, there are 12 different different diagonals (every 6 on different direction), how do u suggest me to write this function while being the most effective? and also including all the possibilities with less that 16 lines of code. \nany kind of help would be appreciated!  </p>\n\n<p>here is an example of what I did:</p>\n\n<pre><code>int CheckDiagonal_1(char matrix[Rows][Columns])\n{\n    int s_count = 0;\n    int o_count = 0;\n    for(int i = 0; i &lt; 4; i++)\n    {\n        for(int j = 5; j &gt;= 3; j--)\n        {\n            for(int k = 0; k &lt;= 3; k++)\n            {\n                if(matrix[j-k][i+k]== matrix[j-k-1][i+k+1]) count ++;\n                if(count==4) return count;\n            }\n            count = 0;\n\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 2, "creation_date": 1432158851, "post_id": 30360409, "comment_id": 48813778, "body": "How can we possibly answer that question without seeing complete code of your kernel? This <code>__SRCVERSION</code> can be anything: maybe it just some compiled string, and maybe it&#39;s being used somewhere and hence it&#39;s essential."}, {"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1432159797, "post_id": 30360409, "comment_id": 48814116, "body": "That looks like a preprocessor macro, not a function. Find the definition of the macro and take a look at what it expands to."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1432162067, "post_id": 30361533, "comment_id": 48814849, "body": "And in some cases the build can be configured to define the <code>__SRCVERSION</code> macro so it either embeds the information in the generated object file or ignores it."}], "tags": [], "owner": {"reputation": 10223, "user_id": 592182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fu0me.jpg?s=128&g=1", "display_name": "forsvarir", "link": "https://stackoverflow.com/users/592182/forsvarir"}, "is_accepted": true, "score": 2, "last_activity_date": 1432162463, "last_edit_date": 1432162463, "creation_date": 1432161419, "answer_id": 30361533, "question_id": 30360409, "link": "https://stackoverflow.com/questions/30360409/what-is-the-purpose-of-srcversion-function-at-the-end-of-each-c-file/30361533#30361533", "title": "What is the purpose of &quot;__SRCVERSION&quot; function at the end of each C file?", "body": "<p>Macros like this are often used to embed versioning information into binaries when they are compiled.  They can be updated automatically when fetched out of a <a href=\"http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html\" rel=\"nofollow\">source control system with appropriate rules</a>.  Removing them shouldn't cause any harm, but you will lose the benefit of being able to search a binary to identify which versions of your source files were used to compile it.</p>\n\n<p>As @Keith Thompson says below, it may also be possible to configure your build to not embed the information.  Below is an example of the macro definition taken from <a href=\"http://apsc496.googlecode.com/svn/trunk/design_documents/control_system/rtos/bsp-TI-omap3530-src/install/usr/include/sys/srcversion.h\" rel=\"nofollow\">here</a> (different systems are likely to have different definitions).  You can see that it uses the <code>__USESRCVERSION</code> definition to decide which version of the <code>__SRCVERSION</code> macro is used:</p>\n\n<pre><code>#ifndef __USESRCVERSION\n#define __SRCVERSION(id)\n#else /* __USESRCVERSION */\n\n#ifdef __QNXNTO__\n\n#if defined __SRCVERSION\n#undef __SRCVERSION\n#endif /*__SRCVERSION */\n\n#define __SRCVERSION(id) \\\n    __asm__(\".section .ident,\\\"SM\\\",@progbits,1\"); \\\n    __asm__(\".asciz \" #id); \\\n    __asm__(\".previous\");\n\n#endif /* __QNXNTO__ */\n\n#endif /* __USESRCVERSION */\n</code></pre>\n"}], "owner": {"reputation": 3049, "user_id": 774437, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6fL8U.jpg?s=128&g=1", "display_name": "moorara", "link": "https://stackoverflow.com/users/774437/moorara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 30361533, "answer_count": 1, "score": 1, "last_activity_date": 1432162463, "creation_date": 1432156191, "last_edit_date": 1432159734, "question_id": 30360409, "link": "https://stackoverflow.com/questions/30360409/what-is-the-purpose-of-srcversion-function-at-the-end-of-each-c-file", "title": "What is the purpose of &quot;__SRCVERSION&quot; function at the end of each C file?", "body": "<p>I am working on the source code of a Unix-based kernel. I noticed that the last line of each source code file (.c or .h) is a specific line with the following format:</p>\n\n<pre><code>__SRCVERSION( \"$URL: ... $ $Rev: 219996 $\" )\n</code></pre>\n\n<p>The URL points to the web address of the same file. I'm wondering what does that mean, and what is it actually for? Would it be any problem if I delete this line from all of my source code files?</p>\n"}, {"tags": ["c++", "c", "integer", "overflow"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1432155963, "post_id": 30360335, "comment_id": 48812461, "body": "Upvoting for I think it&#39;s good that people seek explanations of things."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1432156002, "post_id": 30360335, "comment_id": 48812480, "body": "Most architectures use a single bit for the <i>sign</i>, and fill up with <code>1</code>&#39;s."}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 1, "creation_date": 1432156107, "post_id": 30360335, "comment_id": 48812533, "body": "Have a look <a href=\"http://stackoverflow.com/questions/12335784/c-integer-overflow?rq=1\">here</a>"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1432156159, "post_id": 30360335, "comment_id": 48812557, "body": "MCQ? There&#39;s far too many TLAs these days..."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432156207, "post_id": 30360335, "comment_id": 48812583, "body": "MCQ=&gt; Multiple Choice Q"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1432156288, "post_id": 30360335, "comment_id": 48812630, "body": "So 11^5 is 14? Not with my integer :p First specify the size, signed/unsigned etc.etc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1432157574, "post_id": 30360335, "comment_id": 48813262, "body": "<code>11 ^ 5 --&gt; 14</code> (decimal) --&gt; <code>1011 xor 0101 --&gt; 1110</code> (binary).  No overflow involved."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432156538, "post_id": 30360471, "comment_id": 48812744, "body": "Appreciate your concern sir, But I run the program on c++ compiler it showed up being (b) 14."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 2, "creation_date": 1432156624, "post_id": 30360471, "comment_id": 48812789, "body": "@Moshin: Aha. You used the expression <code>11^5</code> in C++ source code. That does not calculate a power and wrap around. It is a bitlevel XOR operation."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432156707, "post_id": 30360471, "comment_id": 48812846, "body": "Sir I need to understand that, Kindly if you could impart the knowledge."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 1, "creation_date": 1432156715, "post_id": 30360471, "comment_id": 48812852, "body": "@MohsinAli Just as side note, the result 14 (with the correct operations) isn&#180;t possible at all, independent from the int size."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1432156776, "post_id": 30360471, "comment_id": 48812876, "body": "@deviantfan how would it be possible sir?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432156786, "post_id": 30360471, "comment_id": 48812881, "body": "@MohsinAli <code>Sir I need to understand that, Kindly if you could impart the knowledge.</code> He said that <code>11^5</code> in C++ code doesn&#180;t mean <code>11*11*11*11*11</code>. C++ is not maths. If you want 11^5 of maths, don&#180;t use <code>^</code> of C++"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432156871, "post_id": 30360471, "comment_id": 48812917, "body": "@MohsinAli <code>how would it be possible sir?</code> It is <i>not</i> possible. <code>11^5 % 2^x = 14</code> is not solvable with natural numbers x."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1432156881, "post_id": 30360471, "comment_id": 48812924, "body": "@deviantfan I&#39;m not doing math here sir. I&#39;m trying to get the ways of c++."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1432157092, "post_id": 30360471, "comment_id": 48813040, "body": "@AlanStokes I&#180;m assuming that OP means exponentiation."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432157281, "post_id": 30360471, "comment_id": 48813117, "body": "If the result goes out of the range of integer then is there any kind of truncating happens?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1432157313, "post_id": 30360471, "comment_id": 48813130, "body": "@deviantfan It&#39;s not merely possible, it&#39;s required. <code>^</code> in C++ denotes bitwise xor. This is clearer in binary. 1011 ^ 0101 = 1110. In  decimal, 11^5 = 14."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1432157354, "post_id": 30360471, "comment_id": 48813157, "body": "@deviantfan Why? Question is tagged C++."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1432157440, "post_id": 30360471, "comment_id": 48813202, "body": "@AlanStokes Well, why... good question. Maybe because he&#180;s mentioning overflows. Mohsin Ali: Please clarify."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432157499, "post_id": 30360471, "comment_id": 48813234, "body": "Right sir. I&#39;m dealing with overflowing problem. How does that go in c++?"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1432156816, "last_edit_date": 1432156816, "creation_date": 1432156425, "answer_id": 30360471, "question_id": 30360335, "link": "https://stackoverflow.com/questions/30360335/integer-overflow-concept/30360471#30360471", "title": "Integer overflow concept", "body": "<p>Since you're asking about wrap-around I'm answering that below. But as is clear from comments, you really tried the C++ expression <code>11^5</code>, a bitlevel XOR, and got the answer 14, which has nothing to do with wraparound. The XOR result of each pair of bits is 0 if they're the same value, and 1 if they're different.</p>\n\n<hr>\n\n<p>Now, in the following ^ denotes exponentiation; it's a common notation for that.</p>\n\n<p>11^5 = 161051.</p>\n\n<p>Now consider a situation where 16 bits are used to represent integers, and there's only magnitude, no sign. I.e. a 16-bit unsigned C++ integer type. Then there are 2^16 possible bit patterns, and they are numbered 0 through 2^16 - 1, and represent those numbers.</p>\n\n<p>161051 is larger than the largest possible value of that 16-bit type. If it were 2^16 exactly it would correspond to 0 (called <strong>wrap-around</strong>), if it were 2^16 + 1 it would correspond to 1, and so on. So it corresponds to 161051 - 2^16.</p>\n\n<p>Now if that in turn also was greater than 2^16 - 1 you would repeat the process.</p>\n\n<p>And this produces the remainder of integer division by 2^16.</p>\n\n<p>Essentially it correspond to just <em>removing</em> all the bits except the 16 least significant ones.</p>\n\n<p>By the way the result for this example is not any of your choices (a), (b), (c) or (d).</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432157657, "post_id": 30360782, "comment_id": 48813295, "body": "Yes here goes the answer. Thanks Sir you got my problem solved."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 3, "creation_date": 1432157685, "post_id": 30360782, "comment_id": 48813307, "body": "@MohsinAli And how this is an overflow problem like you insisted several times?"}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432157754, "post_id": 30360782, "comment_id": 48813330, "body": "look sir I&#39;m new to all these, I thought if it nothing else then it would be overflow problem."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 0, "creation_date": 1432157807, "post_id": 30360782, "comment_id": 48813357, "body": "However Thanks To your effort sir."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1432157962, "post_id": 30360782, "comment_id": 48813418, "body": "@Alan Stokes Ok sir. What would we be calling it then?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "edited": false, "score": 1, "creation_date": 1432158937, "post_id": 30360782, "comment_id": 48813817, "body": "@MohsinAli It&#180;s a XOR ([bitwise] <i>exclusive &quot;or&quot;</i>), a kind of bitwise operation. Essentially a calculation like plus and minus, just different from plus and minus."}, {"owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1432159069, "post_id": 30360782, "comment_id": 48813873, "body": "@deviantfan I really confused you sir, and I apologize for that."}], "tags": [], "owner": {"reputation": 5554, "user_id": 2352507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZncEA.jpg?s=128&g=1", "display_name": "Sunsetquest", "link": "https://stackoverflow.com/users/2352507/sunsetquest"}, "is_accepted": false, "score": 5, "last_activity_date": 1432157729, "last_edit_date": 1432157729, "creation_date": 1432157564, "answer_id": 30360782, "question_id": 30360335, "link": "https://stackoverflow.com/questions/30360335/integer-overflow-concept/30360782#30360782", "title": "Integer overflow concept", "body": "<pre><code>   DecVal   BinVal\n    11   -&gt; 1011\nXOR 5    -&gt; 0101\n           -------\n    14   -&gt; 1110\n</code></pre>\n\n<p>fyi, This does not really have anything to do with int overflow.</p>\n"}], "owner": {"reputation": 125, "user_id": 4363405, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/040b0d2a55c10bd92d190f3508960ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Ali", "link": "https://stackoverflow.com/users/4363405/mohsin-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1432157729, "creation_date": 1432155874, "last_edit_date": 1432156722, "question_id": 30360335, "link": "https://stackoverflow.com/questions/30360335/integer-overflow-concept", "title": "Integer overflow concept", "body": "<p>How int overflow works. I mean to ask what would be the final result of an integer value if an overflow happens? I need to understand it on paper. Like I'm given a multiple choice question:</p>\n\n<blockquote>\n  <p>11^5 Produces:<br>\n  a. 12<br>\n  b. 14 <br>\n  c. 15 <br>\n  d. 17.<br></p>\n</blockquote>\n\n<p>I know the answer is <code>(b)14</code>, but want to know why?</p>\n"}, {"tags": ["c", "linux", "networking", "archlinux", "getaddrinfo"], "answers": [{"comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1432166621, "post_id": 30362326, "comment_id": 48816175, "body": "By that, I meant res_init() inside the loop."}, {"owner": {"reputation": 554, "user_id": 1404847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e561f78e12f68899f4b4621fdecdeee?s=128&d=identicon&r=PG", "display_name": "kassiopeia", "link": "https://stackoverflow.com/users/1404847/kassiopeia"}, "edited": false, "score": 0, "creation_date": 1432208377, "post_id": 30362326, "comment_id": 48835168, "body": "That actually works sometimes (but rather seldom). I assume that it works if the network connection is already established, but <code>resolv.conf</code> has not been updated yet when the application is started. Once <code>resolv.conf</code> is updated, the call to <code>res_init</code> in the loop loads the new configuration and then <code>getaddrinfo</code> suceeds. But if the network connection is not ready on application start, it still keeps failing,"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 554, "user_id": 1404847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e561f78e12f68899f4b4621fdecdeee?s=128&d=identicon&r=PG", "display_name": "kassiopeia", "link": "https://stackoverflow.com/users/1404847/kassiopeia"}, "edited": false, "score": 0, "creation_date": 1432252513, "post_id": 30362326, "comment_id": 48861683, "body": "My step-by-step demo involves starting the application when no DNS resolution is configured at all, which would be the case when no network connections exist. Did you try starting the demo code with the call to rs_init() without a network connection, and then connecting to a network? This short little demo code is quite easy to test. There&#39;s no need to assume anything."}, {"owner": {"reputation": 554, "user_id": 1404847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e561f78e12f68899f4b4621fdecdeee?s=128&d=identicon&r=PG", "display_name": "kassiopeia", "link": "https://stackoverflow.com/users/1404847/kassiopeia"}, "edited": false, "score": 0, "creation_date": 1432282361, "post_id": 30362326, "comment_id": 48871366, "body": "When I first used your test program I only renamed <code>resolv.conf</code> but did not try to disconnect and reconnect the network. Now I tried it and it works. In my application I immediately tried to use <code>res_ninit</code> as the man pages told me that the other function is deprecated. After reverting back to <code>res_init</code> this also works fine. I probably overlooked something concerning the initialization of the <code>__res_state</code> structure. I will go over this again and see how I can make <code>res_ninit</code> behave the same as <code>res_init</code>."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 6, "last_activity_date": 1432166270, "creation_date": 1432166270, "answer_id": 30362326, "question_id": 30360029, "link": "https://stackoverflow.com/questions/30360029/if-getaddrinfo-fails-once-it-fails-forever-even-after-network-is-ready/30362326#30362326", "title": "If getaddrinfo fails once, it fails forever (even after network is ready)", "body": "<p>You can understand the answer by compiling the following test program, and following the instructions below:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char *argv[])\n{\n    while (1)\n    {\n        struct addrinfo *res;\n        int rc=getaddrinfo(argv[1], \"http\", NULL, &amp;res);\n\n        printf(\"getaddrinfo returned %d\\n\", rc);\n\n        if (rc == 0)\n            freeaddrinfo(res);\n\n        sleep(1);\n    }\n}\n</code></pre>\n\n<p>Before you run this test program:</p>\n\n<ol>\n<li>Connect to the network.</li>\n<li>Rename, temporarily <code>/etc/resolv.conf</code> to <code>/etc/resolv.conf.save</code>.</li>\n<li>Start this test program, using a good hostname.</li>\n<li>Soon after the test program starts, and starts printing error codes, rename <code>/etc/resolv.conf.save</code> to <code>/etc/resolv.conf</code>.</li>\n<li>Observe that the test program is still reporting DNS resolution failures.</li>\n<li>If you CTRL-C and restart it, though, the test program will now report valid DNS resolution.</li>\n</ol>\n\n<p>When you disconnect and reconnect from the network, your network stack rewrites and updates <code>/etc/resolv.conf</code> accordingly. This configuration file is needed by the DNS resolver in the C library. The C library reads the DNS configuration from <code>/etc/resolv.conf</code> the first time, and caches it. It doesn't check, with every lookup, if the contents of <code>/etc/resolv.conf</code> have changed.</p>\n\n<p>Finally:</p>\n\n<ol start=\"7\">\n<li>Your homework assignment is to add a call to <code>res_init()</code>, defined in <code>resolv.h</code>, to this test program, read the corresponding man page, and see what happens. That's your answer.</li>\n</ol>\n"}], "owner": {"reputation": 554, "user_id": 1404847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e561f78e12f68899f4b4621fdecdeee?s=128&d=identicon&r=PG", "display_name": "kassiopeia", "link": "https://stackoverflow.com/users/1404847/kassiopeia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2713, "favorite_count": 0, "accepted_answer_id": 30362326, "answer_count": 1, "score": 8, "last_activity_date": 1577429614, "creation_date": 1432154644, "last_edit_date": 1577429614, "question_id": 30360029, "link": "https://stackoverflow.com/questions/30360029/if-getaddrinfo-fails-once-it-fails-forever-even-after-network-is-ready", "title": "If getaddrinfo fails once, it fails forever (even after network is ready)", "body": "<p>I am writing a C application which is run as a <a href=\"https://wiki.archlinux.org/index.php/Systemd#Service_types\" rel=\"noreferrer\">systemd service</a> on boot (distro: Arch Linux) and which shall connect to a server. Because the application is run on boot it eventually happens that the network connection is not yet established. This naturally leads to a failure of the first function which requires one, which in my case is <code>getaddrinfo</code>.</p>\n\n<p>So I thought that I would just write a loop which repeatedly calls <code>getaddrinfo</code> until it suceeds once the network is ready. Unfortunately I found that <code>getaddrinfo</code> keeps failing with <code>name or service not known</code> even after the connection was established.</p>\n\n<p>I am able to ping the server by its hostname but <code>getaddrinfo</code> still won't do it. If I stop the application and run it again, everything works fine. If the network connection is already established before the first call, <code>getaddrinfo</code> works fine too.</p>\n\n<p>Apparently, if <code>getaddrinfo</code> failed once because the network was not ready, it will fail forever. It seems not to be aware of the now existing connection. When using the deprecated <code>gethostbyname</code>, the behaviour is the same.</p>\n\n<p>What is the reason for this behaviour? Is there a way to force <code>getaddrinfo</code> to refresh internal variables (if such exist) or similar which might explain why the function still believes that there is no connection? Is there another function which I should call previously in order to check whether the network is ready?</p>\n\n<p>I would like to avoid a delay which waits for some time, expecting the network to be connected afterwards. I would also prefer to check for a connection from within my application and not have a bash script first check for it and then start the application.</p>\n"}, {"tags": ["c", "curl"], "comments": [{"owner": {"reputation": 2147, "user_id": 2136640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d392b830abbaf0d8af1124c1dd371?s=128&d=identicon&r=PG", "display_name": "Timothy Brown", "link": "https://stackoverflow.com/users/2136640/timothy-brown"}, "edited": false, "score": 0, "creation_date": 1432154692, "post_id": 30359859, "comment_id": 48811745, "body": "Why don&#39;t you program against the <code>libcurl</code> instead of calling <code>system()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1432161607, "last_edit_date": 1432161607, "creation_date": 1432154147, "answer_id": 30359895, "question_id": 30359859, "link": "https://stackoverflow.com/questions/30359859/how-to-use-curl-with-a-variable-in-c/30359895#30359895", "title": "How to use curl with a variable in c", "body": "<p>You need <code>sprintf()</code>/<code>snprintf()</code>, if you are expecting you program to recieve input from <code>curl</code>'s output, then <code>system()</code> will not let you do that.</p>\n\n<p>Example:</p>\n\n<pre><code>char command[100];\nint  result;\n\nresult = snprintf(command, sizeof(command), \"curl -o %s %s\", url, filename);\nif (result &gt;= sizeof(command))\n    oopsTheBufferIsTooSmall();\nsystem(command);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4836096, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/50a1ff89a13f9d17e21e93fa607eeea7?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Lorenzo Panagsagan", "link": "https://stackoverflow.com/users/4836096/miguel-lorenzo-panagsagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432161607, "creation_date": 1432154040, "question_id": 30359859, "link": "https://stackoverflow.com/questions/30359859/how-to-use-curl-with-a-variable-in-c", "title": "How to use curl with a variable in c", "body": "<p>I have a program that stores an RSS feed in a linked list. My dilemma is that the url for a specific feed is stored in a structure element. How do I curl a variable?</p>\n\n<pre><code>    void get_feed(int holder, struct node *head){\n\n    struct node *temp = head;\n    char *feed_url = 0;\n\n    while(temp-&gt;position != holder){\n            temp = temp-&gt;link;\n    }\n\n    feed_url = temp-&gt;url;\n\n    system(\"curl feed_url -o feed.txt\") //doesn't work\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432154146, "post_id": 30359843, "comment_id": 48811451, "body": "You really don&#39;t need to &quot;convert to hexadecimal&quot;. The data is already represented in numerical way inside the computer and the data link. Just pass the string as is."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1432154395, "post_id": 30359843, "comment_id": 48811603, "body": "Before you try to send anything over UDP, define precisely how the information you&#39;re going to send should be encoded as a chunk of bytes."}, {"owner": {"reputation": 387, "user_id": 4321738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82ac8885bad10ec7133c6db1649ebf9a?s=128&d=identicon&r=PG&f=1", "display_name": "Strawhare", "link": "https://stackoverflow.com/users/4321738/strawhare"}, "edited": false, "score": 0, "creation_date": 1432154952, "post_id": 30359843, "comment_id": 48811902, "body": "I know it converts it already, but I need to add in Bit stuffing later, and I thought this would be the easiest way to do it, if it was already in a numerical form. The program is by no means finished yet David, I will have that implemented later."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432154329, "post_id": 30359927, "comment_id": 48811569, "body": "I think what he really wants is <code>sendto(clientSocket,buffer,strlen(buffer)...</code>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432154401, "post_id": 30359927, "comment_id": 48811606, "body": "@EugeneSh.: Nope, because he went to the bother of converting buffer into an integer with ChartoInt."}, {"owner": {"reputation": 387, "user_id": 4321738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82ac8885bad10ec7133c6db1649ebf9a?s=128&d=identicon&r=PG&f=1", "display_name": "Strawhare", "link": "https://stackoverflow.com/users/4321738/strawhare"}, "edited": false, "score": 0, "creation_date": 1432155026, "post_id": 30359927, "comment_id": 48811946, "body": "Why is it that you don&#39;t need that operator if you send an array of characters? Is that already defined as a pointer then?"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 387, "user_id": 4321738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82ac8885bad10ec7133c6db1649ebf9a?s=128&d=identicon&r=PG&f=1", "display_name": "Strawhare", "link": "https://stackoverflow.com/users/4321738/strawhare"}, "edited": false, "score": 0, "creation_date": 1432155060, "post_id": 30359927, "comment_id": 48811964, "body": "@Michael: Exactly. An array in C decays into a pointer to the first array element."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": true, "score": 0, "last_activity_date": 1432154248, "creation_date": 1432154248, "answer_id": 30359927, "question_id": 30359843, "link": "https://stackoverflow.com/questions/30359843/udp-sockets-in-c-passing-integer-values/30359927#30359927", "title": "UDP Sockets in C - Passing Integer Values", "body": "<p>You <em>can</em> send a single integer over a socket. It will travel as 4 or 8 bytes, and the byte order can be different on different CPU types, so that can be a problem.</p>\n\n<p>But what you are doing is trying to use an integer as a pointer. What you really want is something like</p>\n\n<pre><code>t = sendto(clientSocket,&amp;message,sizeof(message),0,(struct sockaddr *)&amp;serverAddr,addr_size);\n</code></pre>\n\n<p>Note the address-of operator \"<code>&amp;</code>\" on <code>message</code>.</p>\n"}], "owner": {"reputation": 387, "user_id": 4321738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82ac8885bad10ec7133c6db1649ebf9a?s=128&d=identicon&r=PG&f=1", "display_name": "Strawhare", "link": "https://stackoverflow.com/users/4321738/strawhare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1852, "favorite_count": 0, "accepted_answer_id": 30359927, "answer_count": 1, "score": 0, "last_activity_date": 1432154248, "creation_date": 1432153973, "question_id": 30359843, "link": "https://stackoverflow.com/questions/30359843/udp-sockets-in-c-passing-integer-values", "title": "UDP Sockets in C - Passing Integer Values", "body": "<p>So I'm trying to set up a UDP connection that will take a user inputted character string, convert it to hexadecimal, and send it to the server. I've been told it's possible to send things other than a character array through sockets (which is the only way I've done it before), but I've hit a few walls. First off, I was getting a whole load of errors when I explicitly sent an integer (complaining about casting integer to pointer), so I cast it as a void pointer instead. I don't get the warning messages, but I get the same error. </p>\n\n<p>My question is: Have I made a mistake in the logic setting up the socket, or is it not possible to do what I'm trying to do?</p>\n\n<pre><code>void main(){\n\n  /*Create UDP socket*/\n  clientSocket = socket(PF_INET, SOCK_DGRAM, 0);                    //setup the socket with an address structure and frame type\n\n  /*Configure settings in address struct*/\n  serverAddr.sin_family = AF_INET;                                  //set the type of address\n  serverAddr.sin_port = htons(7891);                                //set the port number you'll be using\n  serverAddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");              //set the address you're sending to\n  memset(serverAddr.sin_zero, '\\0', sizeof serverAddr.sin_zero);    //Just something that needs to be done\n\n  /*Initialize size variable to be used later on*/\n  addr_size = sizeof serverAddr;\n  pthread_t thread;\n  int t = 0;\n  int message;\n\n  while(1){\n    memset(buffer, '\\0', sizeof buffer);\n    printf(\"Type a sentence to send to server:\\n\");\n    fgets(buffer,1024,stdin);\n    printf(\"You typed: %s\",buffer);\n    message = ChartoInt(buffer);\n    printf(\"You are sending: %x\\n\", message);\n    /*Send message to server*/\n    t = sendto(clientSocket,(void*)message,sizeof(message),0,(struct sockaddr *)&amp;serverAddr,addr_size);\n    printf(\"The Value of t is %x\\n\",t);\n  }\n}\n</code></pre>\n"}, {"tags": ["java", "c", "casting", "network-programming", "type-conversion"], "comments": [{"owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "edited": false, "score": 1, "creation_date": 1432154025, "post_id": 30359691, "comment_id": 48811386, "body": "your phone send integer which is 4 bytes I suppose it does it in big endian?when receiving it you have to convert it in your local endianess...in the place of void getSubArray why not use memcpy ?"}, {"owner": {"reputation": 544, "user_id": 891261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff5024000cf6551c4182055af5a7f5d?s=128&d=identicon&r=PG", "display_name": "Jesper Bangsholt", "link": "https://stackoverflow.com/users/891261/jesper-bangsholt"}, "edited": false, "score": 0, "creation_date": 1432154054, "post_id": 30359691, "comment_id": 48811400, "body": "Remember to convert to host order from network order. Otherwise your bytes <i>may</i> be the wrong way around.  Have a look at htonl and ntohl."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432154091, "post_id": 30359691, "comment_id": 48811417, "body": "Yes please print the value in <code>hex</code> and check that the bytes are not in reverse order, if the are you just need to convert them from their endiannes to the correct one."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432154783, "post_id": 30359691, "comment_id": 48811789, "body": "I don&#39;t see how the Java code you presented can &quot;work&quot;, since <code>p = new DatagramPacket(data, 16); udpSocket.send(p[0]);</code> should not even <i>compile</i>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 544, "user_id": 891261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff5024000cf6551c4182055af5a7f5d?s=128&d=identicon&r=PG", "display_name": "Jesper Bangsholt", "link": "https://stackoverflow.com/users/891261/jesper-bangsholt"}, "edited": false, "score": 0, "creation_date": 1432155022, "post_id": 30359691, "comment_id": 48811944, "body": "@JesperBangsholt, yes and no.  Network byte order does not happen automagically -- the byte order of the message is chosen by the sender. In this case it <i>happens</i> to be network byte order, but that&#39;s a function of the behavior of <code>DataOutputStream,writeInt()</code>, whose documentation does not cast it in those terms."}, {"owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "edited": false, "score": 0, "creation_date": 1432155759, "post_id": 30359691, "comment_id": 48812326, "body": "roll = (int*)temp; ??? but in your code you did roll=byteToInt(temp); which return an int...it is not good. roll=(int)temp; is much suitable."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432158261, "post_id": 30359691, "comment_id": 48813530, "body": "Anyway, it&#39;s not a byte-order problem.  The <code>byteToInt()</code> function presented implements the correct byte order, but it has other problems."}], "answers": [{"tags": [], "owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "is_accepted": false, "score": 1, "last_activity_date": 1432156553, "last_edit_date": 1432156553, "creation_date": 1432155211, "answer_id": 30360178, "question_id": 30359691, "link": "https://stackoverflow.com/questions/30359691/byte-to-int-type-conversion-network-application/30360178#30360178", "title": "byte to int type conversion network application", "body": "<pre><code>#include &lt;sdint.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netinet/in.h&gt;\n\nuint32_t byteToInt(char* bytes)\n{\n uint8_t b[4];\n memcpy(b, bytes, 4);\n if ((b[0] | b[1] | b[2] | b[3]) &lt; 0)WPRINT_APP_INFO ( (\"boh\\r\\n\"));\n return ntohl(*((uint32_t *)b));\n}\n ...\n //thread receiver\nwiced_packet_get_data(packet, 0, (uint8_t**)&amp;rx_data, &amp;rx_data_length, &amp;available_data_length);\ntraffic_type = rx_data[0];\nid = rx_data[1];\ntakeOffPressed = rx_data[2];\nmemcpy(temp, rx_data+3, 4);\nroll = byteToInt(temp);\nWPRINT_APP_INFO ( (\"Rx: \\\" Packet Type: %c Id: %c  TakeOffPressed = %c \\r\\n  roll: %d \\r\\n \", (unsigned char )traffic_type, (unsigned char )id, (unsigned char)takeOffPressed, roll);\n</code></pre>\n\n<p>no need of</p>\n\n<pre><code>void getSubArray(char* dest, char* source, int start, int end)\n</code></pre>\n\n<p>you can replace it by a </p>\n\n<pre><code>memcpy(void* dest, void* src, size_t t);//from string.h\n</code></pre>\n\n<p>alse I have modified your byteToInt function to a thing more interessting</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1432158902, "last_edit_date": 1432158902, "creation_date": 1432155659, "answer_id": 30360296, "question_id": 30359691, "link": "https://stackoverflow.com/questions/30359691/byte-to-int-type-conversion-network-application/30360296#30360296", "title": "byte to int type conversion network application", "body": "<p>You have some possible signedness confusion.  Consider your <code>byteToInt()</code> function:</p>\n\n<pre><code>int byteToInt(char* bytes)\n{\n  int ch1 = bytes[0];\n  int ch2 = bytes[1];\n  int ch3 = bytes[2];\n  int ch4 = bytes[3];\n  if ((ch1 | ch2 | ch3 | ch4) &lt; 0)\n      WPRINT_APP_INFO ( (\"boh\\r\\n\"));\n  return ((ch1 &lt;&lt; 24) + (ch2 &lt;&lt; 16) + (ch3 &lt;&lt; 8) + (ch4 &lt;&lt; 0));\n}\n</code></pre>\n\n<p>Suppose the 4-byte value that was sent was <code>511</code> (decimal).  The bytes sent are then <code>0x00 0x00 0x01 0xff</code>.  Now suppose that the receiving system features signed, two's complement <code>char</code>s, which is not uncommon.  In that case, on the receiver those chars will be interpreted as values <code>0 0 1 -1</code> (decimal).  There are now two problems with this:</p>\n\n<ol>\n<li>The behavior of applying a shift operator to a negative left operand (i.e. the value of <code>ch4</code> in my example) is undefined.</li>\n<li>A reasonably likely actual behavior for <code>-1 &lt;&lt; 0</code> would be to yield <code>-1</code> (a zero-bit shift evaluating to the value of its left operand).  In that case, the overall computed value would be <code>256 + -1 = 255</code>.</li>\n</ol>\n\n<p>Of course, that's just an example, but only one in sixteen 32-bit <code>int</code>s have the high bit of every byte clear.</p>\n\n<p>Both issues could be addressed by performing the computation with the appropriate unsigned quantities.  That could be done like this:</p>\n\n<pre><code>int byteToInt(char* bytes)\n{\n  uint8_t ch1 = bytes[0];\n  uint8_t ch2 = bytes[1];\n  uint8_t ch3 = bytes[2];\n  uint8_t ch4 = bytes[3];\n  return ((ch1 &lt;&lt; 24) + (ch2 &lt;&lt; 16) + (ch3 &lt;&lt; 8) + (ch4 &lt;&lt; 0));\n}\n</code></pre>\n\n<p>Note, too, that it is wasteful to extract a subarray to pass to <code>byteToInt()</code>.  It would be better to just use a bit of pointer arithmetic:</p>\n\n<pre><code>roll = byteToInt(rx_data + 3);\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3146756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/885c538792dbb72e36e9de8b140e6561?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3146756/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 30360296, "answer_count": 2, "score": 0, "last_activity_date": 1432158902, "creation_date": 1432153414, "last_edit_date": 1432154870, "question_id": 30359691, "link": "https://stackoverflow.com/questions/30359691/byte-to-int-type-conversion-network-application", "title": "byte to int type conversion network application", "body": "<p>I'm sending from my android phone integer as byte with the following code(I put only the needed chunks): </p>\n\n<pre><code>private byte[] intToByteArray ( final int i ) throws IOException {      \n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\n    DataOutputStream dos = new DataOutputStream(bos);\n    dos.writeInt(i);\n    dos.flush();\n    return bos.toByteArray();\n}\n//thread sender\n        data = new byte[16];\n        ...\n        try {\n            temp = intToByteArray((int) (roll*100));\n        } catch (IOException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        }\n        data[3] = temp[0];\n        data[4] = temp[1];\n        data[5] = temp[2];\n        data[6] = temp[3];\n        ...\n        p = new DatagramPacket(data, 16);\n        udpSocket.send(p);\n</code></pre>\n\n<p>The sending code works because I have tried it with a Java received, and the results are correct. The real receiver has to be implemented with an embedded device, Murata SN8200: I receive the packet, but I my integer results (for instance, roll) are not correct. The code that I'm using for converting from byte to int is the following: </p>\n\n<pre><code>void getSubArray(char* dest, char* source, int start, int end){\n   uint8_t i, j = 0;\n   for(i=start; i&lt;end; i++){\n       dest[j] = source[i];\n       j++;\n   }\n}\nint byteToInt(char* bytes)\n{\n  int ch1 = bytes[0];\n  int ch2 = bytes[1];\n  int ch3 = bytes[2];\n  int ch4 = bytes[3];\n  if ((ch1 | ch2 | ch3 | ch4) &lt; 0)\n      WPRINT_APP_INFO ( (\"boh\\r\\n\"));\n  return ((ch1 &lt;&lt; 24) + (ch2 &lt;&lt; 16) + (ch3 &lt;&lt; 8) + (ch4 &lt;&lt; 0));\n}\n...\n//thread receiver\nwiced_packet_get_data(packet, 0, (uint8_t**)&amp;rx_data, &amp;rx_data_length, &amp;available_data_length);\ntraffic_type = rx_data[0];\n        id = rx_data[1];\n        takeOffPressed = rx_data[2];\n        getSubArray(temp, rx_data, 3, 7);\n        roll = byteToInt(temp);\n        WPRINT_APP_INFO ( (\"Rx: \\\" Packet Type: %c Id: %c  TakeOffPressed = %c \\r\\n  roll: %d \\r\\n \", (unsigned char )traffic_type, (unsigned char )id, (unsigned char)takeOffPressed, roll);\n</code></pre>\n\n<p>Reading other discussions I have already tried to do: roll = (int*)(temp); as suggested in another post, but it doesn't work for me (aliasing compiler error). Any idea to solve the problem? thanks</p>\n"}, {"tags": ["c", "compilation", "pascal", "abi"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "edited": false, "score": 0, "creation_date": 1432151230, "post_id": 30358914, "comment_id": 48809759, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2171177/what-is-application-binary-interface-abi\">What is Application Binary Interface (ABI)?</a>"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432151683, "post_id": 30358914, "comment_id": 48810036, "body": "Nope, the ABI is determined by the compiler used (which may actually just be conforming to the language specification)."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1432153504, "post_id": 30358914, "comment_id": 48811068, "body": "It states there that ABIs are provided by the same people designing the platform. Is there not just one ABI for the platform or many different ABIs for the different compilers? For example, on Linux if I have GCC and then a different compiler for Pascal, there will be two different ABIs? Do the ABIs come with the compiler?"}, {"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 2, "creation_date": 1432156920, "post_id": 30358914, "comment_id": 48812942, "body": "Platform-defined ABI is only for the invocation of services of that platform. Internally, each language/compiler are free to do whatever their creators like."}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1432215044, "post_id": 30358914, "comment_id": 48840124, "body": "Note that some aspects of platform services invocations (like SEH) go beyond the direct calling code."}], "answers": [{"tags": [], "owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "is_accepted": false, "score": 0, "last_activity_date": 1432163554, "creation_date": 1432163554, "answer_id": 30361897, "question_id": 30358914, "link": "https://stackoverflow.com/questions/30358914/application-binary-interface-confusion/30361897#30361897", "title": "Application Binary Interface confusion", "body": "<p>You may have a couple of concepts unnecessarily conjoined.  In it's simplest form an OS provides a framework to run programs.  ABIs are concrete instances of APIs (Application Programming Interface).  A IoT device might not have an OS (it may simply run a single program) but will use ABIs.  Different systems and compilers will create different ABIs.  The order in which parameters are passed on the stack is just one of these differences.  Compilers often try to place data in on-processor registers to avoid using the stack (for performance).  The stack itself is generally little more than a special register on the processor that is incremented and decremented appropriately.  Other things important for ABIs are byte order (big/little endian), bitness (the size of basic data types) and who is in charge of stack housekeeping (does the caller or callee adjust the stack address).  Generally, the nature of an ABI is decided mostly by what is convenient based on the architecture of the machine.</p>\n"}, {"tags": [], "owner": {"reputation": 1205, "user_id": 2655905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78614e85e3c08eed9e43ab7197a90f3?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/2655905/stuart"}, "is_accepted": false, "score": 0, "last_activity_date": 1432228984, "creation_date": 1432228984, "answer_id": 30380452, "question_id": 30358914, "link": "https://stackoverflow.com/questions/30358914/application-binary-interface-confusion/30380452#30380452", "title": "Application Binary Interface confusion", "body": "<p>The purpose of an ABI is to allow code developed using development tools (compiler/linker/etc) from different suppliers to work together. There aren't any hard and fast rules such as \"ABI's are developed by operating system vendors\". An ABI is just a document that can be followed or ignored.</p>\n\n<p>I've seen an ABI specification from Intel for their x86 processors, and if I remember correctly they were language specific (or maybe portions of them were language specific). ABI's will usually be language specific because programming languages have different features and, and the most obvious/efficient ways to support these features will be language specific.</p>\n\n<p>This blog post <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2004/01/02/47184.aspx\" rel=\"nofollow\">The history of calling conventions</a> goes into more detail.</p>\n"}, {"tags": [], "owner": {"reputation": 1500, "user_id": 1624169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd3ee80afb7e777359b3eaf8c724a642?s=128&d=identicon&r=PG", "display_name": "Chawathe Vipul S", "link": "https://stackoverflow.com/users/1624169/chawathe-vipul-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1432649672, "creation_date": 1432649672, "answer_id": 30461123, "question_id": 30358914, "link": "https://stackoverflow.com/questions/30358914/application-binary-interface-confusion/30461123#30461123", "title": "Application Binary Interface confusion", "body": "<p>ABI is not monopoly of OS vendors. Programs may be deployed as firmware, and even OSs are collections of programs. So calling convention, that as you suggest can be considered part of ABI specification, is selected by compilation tool chain vendors for HLL (or by programmer for assembly language). For computers that are used via OSs, developers making apps require linking their programs with OS libraries. If these libraries are built with one calling convention when deployed as part of OS, then compiler switches or other such mechanisms take care for targeting the OS. So, OS vendors have a say in specifying the ABI.</p>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1432649672, "creation_date": 1432150716, "question_id": 30358914, "link": "https://stackoverflow.com/questions/30358914/application-binary-interface-confusion", "title": "Application Binary Interface confusion", "body": "<p>I know that there many questions about ABI on here but it's still something that I don't fully understand.</p>\n\n<p>Someone told me recently that when people used to write Pascal and then C became more popular, there were issues or confusion because Pascal when compiled would push function parameters on the stack in the reverse order to C. I questioned that should that not depend on the target platform rather than the program language. Is it not the ABI that would determine this? Isn't the ABI developed by the Operating System developers and not dependant on the programming language?</p>\n\n<p>Sorry if the question is long. It's just something I can't get my head around. I'm trying to understand fully what goes on behind the scenes rather than just being able to write code. Thanks in advance for any help. </p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 2, "creation_date": 1432150670, "post_id": 30358855, "comment_id": 48809446, "body": "Try looking at the ASCII codes for upper and lower case letters, and you should spot a pattern."}, {"owner": {"reputation": 3629, "user_id": 631615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8774bd471bec0899483c832ea428436?s=128&d=identicon&r=PG", "display_name": "librik", "link": "https://stackoverflow.com/users/631615/librik"}, "edited": false, "score": 1, "creation_date": 1432150719, "post_id": 30358855, "comment_id": 48809475, "body": "Do you know about arrays yet?  You want to make a table so you can look up one piece of information (&#39;a&#39;) and retrieve another piece of information (&#39;A&#39;).  I&#39;ll leave it to you to figure out how."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1432150804, "post_id": 30358855, "comment_id": 48809526, "body": "Maybe <a href=\"http://stackoverflow.com/questions/2169261\">C <code>isupper()</code> function</a> can help?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1432151023, "post_id": 30358855, "comment_id": 48809627, "body": "And while ASCII covers some character sets, it doesn&#39;t cover the majority of real-world character sets.  In particular, all the solutions mentioning ASCII that I&#39;ve seen won&#39;t work on accented characters."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432161588, "post_id": 30358855, "comment_id": 48814713, "body": "For a better understanding of the concepts, you could read the <a href=\"http://unicode.org/faq/casemap_charprop.html\" rel=\"nofollow noreferrer\">Unicode FAQ on Case Mapping</a>. (And to properly <i>implement</i> it - most likely outside the target of your exercise - you would need to include the entire current Unicode standard.)"}], "answers": [{"tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 3, "last_activity_date": 1432150722, "creation_date": 1432150722, "answer_id": 30358915, "question_id": 30358855, "link": "https://stackoverflow.com/questions/30358855/c-string-functions-without-string-h-library/30358915#30358915", "title": "C: String functions without string.h library", "body": "<p>You can just check if the character is within the range of characters, say between 'a' and 'z' and just add or subtract 32, which is the difference between the ascii value of capital and lower letters.  See the ascii table here: <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">http://www.asciitable.com/</a></p>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 3, "last_activity_date": 1432150740, "creation_date": 1432150740, "answer_id": 30358925, "question_id": 30358855, "link": "https://stackoverflow.com/questions/30358855/c-string-functions-without-string-h-library/30358925#30358925", "title": "C: String functions without string.h library", "body": "<p>Just do</p>\n\n<pre><code>if (string[i] &gt;= 'a' &amp;&amp; string[i] &lt;= 'z') {\n    string[i] = string[i] - 'a' + 'A';\n}\n</code></pre>\n\n<p>It will convert lower case to upper case by changing a..z to 0..26 then adding the ASCII value for 'A' to it.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 4921718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204255760986448/picture?type=large", "display_name": "Matej Veli\u010dan", "link": "https://stackoverflow.com/users/4921718/matej-veli%c4%8dan"}, "edited": false, "score": 0, "creation_date": 1432151611, "post_id": 30358929, "comment_id": 48809986, "body": "Thank you very much! ASCII came in mind to me, but I didn&#39;t know you can use it that way."}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 7, "last_activity_date": 1432151353, "last_edit_date": 1432151353, "creation_date": 1432150776, "answer_id": 30358929, "question_id": 30358855, "link": "https://stackoverflow.com/questions/30358855/c-string-functions-without-string-h-library/30358929#30358929", "title": "C: String functions without string.h library", "body": "<p>Your system probably uses ASCII. In ASCII, the codepoints of lowercase characters and uppercase characters are sequential.</p>\n\n<p>So we can just do:</p>\n\n<pre><code>void to_upper(char *message) {\n    while (*message) {\n        if (*message &gt;= 'a' &amp;&amp; *message &lt;= 'z')\n            *message = *message - 'a' + 'A';\n        message++;\n    }   \n}   \n</code></pre>\n\n<p>Other character encodings can become <strong>much more complicated</strong>. For example, EBCDIC doesn't have contiguous characters. And UTF-8 introduces a world of problems because of the numerous languages that you need to support.</p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1432152489, "post_id": 30359091, "comment_id": 48810523, "body": "Nice trick - but regarding <i>and you can avoid an if</i>...  checking the range of character before applying is still required, which likely will get back to using the <code>if</code> keyword."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1432152750, "post_id": 30359091, "comment_id": 48810647, "body": "@ryyker Nope, that is the point - you do not need to check the range as long as you&#39;re sure the five characters I&#39;ve enumerated in my answer don&#39;t appear in your string. That bit will then only be set for lowercase ASCII letters, which is what you want to convert; for all other chars, that bit will be 0 anyway, so it makes no difference."}], "tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 2, "last_activity_date": 1432151445, "last_edit_date": 1432151445, "creation_date": 1432151313, "answer_id": 30359091, "question_id": 30358855, "link": "https://stackoverflow.com/questions/30358855/c-string-functions-without-string-h-library/30359091#30359091", "title": "C: String functions without string.h library", "body": "<p>There's a neat trick for converting ASCII cases. Consider these characters:</p>\n\n<p><code>A</code> - binary <code>01000001</code><br>\n<code>a</code> - binary <code>01100001</code></p>\n\n<p><br>\nAs we can see, the difference is in the 6th bit, counting from the right. Indeed, the difference between uppercase and lowercase ASCII chars is 2^5 = 32. So, to convert a letter to uppercase, simply AND it with <code>0xDF (11011111)</code> to set that bit to 0. In this way you don't even have to check if the character is in uppercase already.</p>\n\n<p>Note that this will break non-letter characters that are above <code>0x60</code>, namely the backtick, <code>{</code>, <code>|</code>, <code>}</code> and <code>~</code>. But as long as you don't have these in your strings, it should be fine to use this and you can avoid an <code>if</code> :).</p>\n\n<p>Note: Only use that as a cool trick for this homework. Normally you should just use proper, tested solutions (aka <code>string.h</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 2575, "user_id": 10669875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae3bf8ded4da2254e5aa66d54167613?s=128&d=identicon&r=PG&f=1", "display_name": "wovano", "link": "https://stackoverflow.com/users/10669875/wovano"}, "edited": false, "score": 0, "creation_date": 1595680668, "post_id": 58535375, "comment_id": 111561941, "body": "Your first code snippet is identical to the accepted answer posted more than 4 years before (only the variable name is different). And regarding your second code snippet... why not just use <code>printf(&quot;%s&quot;, arr)</code> or <code>puts(arr)</code>? What does this answer add to the already posted answers?"}], "tags": [], "owner": {"reputation": 9, "user_id": 10606198, "user_type": "registered", "profile_image": "https://graph.facebook.com/1190749481055163/picture?type=large", "display_name": "Anfaas Qureshi", "link": "https://stackoverflow.com/users/10606198/anfaas-qureshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1571898534, "creation_date": 1571898534, "answer_id": 58535375, "question_id": 30358855, "link": "https://stackoverflow.com/questions/30358855/c-string-functions-without-string-h-library/58535375#58535375", "title": "C: String functions without string.h library", "body": "<pre><code>void toUpper(char *arr) {\n    while (*arr) {\n        if (*arr &gt;= 'a' &amp;&amp; *arr &lt;= 'z')\n            *arr = *arr - 'a' + 'A';\n        arr++;\n    }   \n   }  \n</code></pre>\n\n<p>use this function to make all the letters uppercase in a string just call the toUpper funcn and give your array as a prarameter.\nfor printing the array just use for loop and move in array index elements and print the letters.</p>\n\n<pre><code>   for(int i=0;arr[i] !='\\0';i++)\n   {\n    printf(\"%c\",arr[i]);\n   } \n</code></pre>\n\n<p>this will print every elements in the array which is the string,</p>\n"}], "owner": {"reputation": 65, "user_id": 4921718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204255760986448/picture?type=large", "display_name": "Matej Veli\u010dan", "link": "https://stackoverflow.com/users/4921718/matej-veli%c4%8dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1460, "favorite_count": 0, "accepted_answer_id": 30358929, "answer_count": 5, "score": 4, "last_activity_date": 1571898534, "creation_date": 1432150531, "last_edit_date": 1432151189, "question_id": 30358855, "link": "https://stackoverflow.com/questions/30358855/c-string-functions-without-string-h-library", "title": "C: String functions without string.h library", "body": "<p>I have homework to do and I need some help. I didn't come here to get someone to do my work, just to help me.</p>\n\n<p>I have to create my own string.h \"library\" (actually header and function file), so I am <strong>forbidden</strong> to use <strong><code>#include &lt;string.h&gt;</code> and <code>#include &lt;ctypes.h&gt;</code></strong>. They also recommended us not to use malloc, but it was just a recommendation, not forbidden. \nFor most of the functions I know how to write them.\nI planned to save \"strings\" like arrays of chars like: </p>\n\n<pre><code>char array[50];\n</code></pre>\n\n<p>But I came to a problem of creating toupper and tolower functions.\nSure, I can make huge switch cases or a lot if (else if's) like this:</p>\n\n<pre><code>if(string[i]=='a') {string[i]=='A' };\n else if(string[i]=='b') {string[i]=='B' };\n    .\n    .\n    .\n    else if(string[i]=='z') {string[i]=='Z' };\n</code></pre>\n\n<p>But is there any better solution?</p>\n\n<p>Strings are going to be created <strong>randomly</strong> so they will look somewhat like this:</p>\n\n<pre><code>ThisISSomESTRing123.\n</code></pre>\n\n<p>So after <code>toupper</code> function, randomly generated string should look like this:</p>\n\n<pre><code>THISISSOMESTRING123.\n</code></pre>\n\n<p>Also how would you create <code>puts</code> function (printing) so everything would be in same row? Just \"printf\" inside \"for\" loop?</p>\n"}, {"tags": ["c", "file", "compare", "diff"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432149795, "post_id": 30358541, "comment_id": 48808961, "body": "As for the first character - you are first reading the files char by char and comparing. Then you are reading the strings, if the characters are not the same. But the first character of the string was already read. This is why you don&#39;t get it."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1432149853, "post_id": 30358541, "comment_id": 48808987, "body": "Why don&#39;t you use the linux <code>diff</code>?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432149860, "post_id": 30358541, "comment_id": 48808994, "body": "&quot;Show all differences&quot; - so, if you have 10 lines in files A and B, and then in file B, you insert a line at index 5, do you consider all lines after and including 5 to be different, or just that one line?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1432150000, "post_id": 30358541, "comment_id": 48809100, "body": "I would read both file linewise into arrays of strings and navigate those. Abstract from the file I/O which is cumbersome and algorithmically irrelevant. (Don&#39;t get me wrong -- I understand it&#39;s part of the assignment. But try to separate I/O from data processing. Later in life you&#39;ll be thankful if you have modular blocks which you can combine easily.)"}, {"owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432150016, "post_id": 30358541, "comment_id": 48809110, "body": "@szczurcio just that one line."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150037, "post_id": 30358541, "comment_id": 48809128, "body": "So what are the difference  between these strings: &quot;ab&quot;, &quot;ba&quot; ?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1432150048, "post_id": 30358541, "comment_id": 48809133, "body": "@CommuSoft Or Araxis merge? Because it&#39;s an exercise, I assume."}, {"owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1432150134, "post_id": 30358541, "comment_id": 48809176, "body": "@CommuSoft I prefer not rely too much on existing commands and not everyone have Linux."}, {"owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150264, "post_id": 30358541, "comment_id": 48809236, "body": "@EugeneSh. Difference between &quot;ab&quot; and &quot;ba&quot; is the order of the characters. For me, it&#39;s like different &quot;word&quot;. (for example, &quot;god&quot; and &quot;dog&quot; are two different words too)"}, {"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1432150349, "post_id": 30358541, "comment_id": 48809292, "body": "@LordRixuel Not everyone has Linux, but most who don&#39;t can get Cygwin or other free tools."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150440, "post_id": 30358541, "comment_id": 48809335, "body": "@LordRixuel You didn&#39;t get my question. Consider two files, one contains lines &quot;aaa&quot; and &quot;bbb&quot;,  and the second contains &quot;bbb&quot;, &quot;aaa&quot;. What should your program output?"}, {"owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150491, "post_id": 30358541, "comment_id": 48809365, "body": "@EugeneSh. Output should show no difference."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150527, "post_id": 30358541, "comment_id": 48809379, "body": "But it is totally not how you program works."}, {"owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150696, "post_id": 30358541, "comment_id": 48809463, "body": "@EugeneSh. For the moment, let&#39;s just say both files are already sorted. I know I didn&#39;t put any sorting function in my program yet just for simplicity."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432150841, "post_id": 30358541, "comment_id": 48809554, "body": "But even if they are. You are reading the strings from two files in parallel. So a single shift will render all of the future comparisons false. &quot;Difference&quot; has to be well and formally defined, and the algorithm for that definition should be implemented."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432151091, "post_id": 30358541, "comment_id": 48809665, "body": "You can look at the files as &quot;sets&quot; of words, and compute the set differences <code>A \\ B</code> and <code>B \\ A</code> which both might be not empty. But then you should decide what is your output. Just one of them? Both? In which order?"}, {"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 0, "creation_date": 1432152300, "post_id": 30358541, "comment_id": 48810419, "body": "I think the approach is rather naive. Difference may mean many things. If the example is not trivial you may end up with several options and then you need a metric do tell which is the best."}], "answers": [{"comments": [{"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1432150197, "post_id": 30358661, "comment_id": 48809207, "body": "<code>ungetc()</code> is another option."}], "tags": [], "owner": {"reputation": 441, "user_id": 3705763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R4BCb.jpg?s=128&g=1", "display_name": "Adashi", "link": "https://stackoverflow.com/users/3705763/adashi"}, "is_accepted": false, "score": 0, "last_activity_date": 1432149868, "creation_date": 1432149868, "answer_id": 30358661, "question_id": 30358541, "link": "https://stackoverflow.com/questions/30358541/how-to-compare-two-files-and-show-all-the-differences-in-c/30358661#30358661", "title": "How to compare two files and show all the differences in C?", "body": "<p>The first character you're missing is being digested by getc(), in the first loop. To fix that, try using only the second while() or seek back one char before starting the next while() loop</p>\n"}, {"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 2, "creation_date": 1432150451, "post_id": 30358772, "comment_id": 48809344, "body": "Why did you specify the buffer length to be one less than it actually is in your <code>fgets</code> call? As stated in the documentation above, that count includes the null terminator. Also, don&#39;t use hardcoded buffer sizes, this can easily lead to bugs if that size is changed, use <code>sizeof</code>."}, {"owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432152492, "post_id": 30358772, "comment_id": 48810524, "body": "Good point on the <code>-1</code> buffer sizes, I didn&#39;t realize that. I agree with you on the other point but didn&#39;t want to make the answer too long/complex."}], "tags": [], "owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "is_accepted": false, "score": 0, "last_activity_date": 1432150252, "last_edit_date": 1495535215, "creation_date": 1432150252, "answer_id": 30358772, "question_id": 30358541, "link": "https://stackoverflow.com/questions/30358541/how-to-compare-two-files-and-show-all-the-differences-in-c/30358772#30358772", "title": "How to compare two files and show all the differences in C?", "body": "<p>Your two calls to <code>fgets()</code> are wrong. According to the <a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"nofollow noreferrer\"><code>fgets()</code> documentation</a>:</p>\n\n<blockquote>\n  <p>char * fgets ( char * str, int num, FILE * stream );</p>\n  \n  <p><strong>str</strong>: Pointer to an array of chars where the string read is copied. </p>\n  \n  <p><strong>num</strong>: Maximum number of characters to be copied into str (including the\n  terminating null-character). </p>\n  \n  <p><strong>stream</strong>: Pointer to a FILE object that\n  identifies an input stream. stdin can be used as argument to read from\n  the standard input.</p>\n</blockquote>\n\n<p>Trying to write into your programs's <code>argv[]</code> probably won't end well. At a minimum you'd want to do something like:</p>\n\n<pre><code>char string1[100];\nchar string2[100];\n\nfgets(string1, 99, fp1);\nfgets(string2, 99, fp2);\n</code></pre>\n\n<p>Also <a href=\"https://stackoverflow.com/a/26557243/439599\">be aware</a> that using <code>feof()</code> like this is probably the wrong thing to do.</p>\n\n<p>As for your comparison problem...trying to do a file comparison and checking for added/deleted strings is not an easy problem. You can start at <a href=\"https://stackoverflow.com/q/805626/439599\">this question</a> for some background.</p>\n"}], "owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432150252, "creation_date": 1432149455, "question_id": 30358541, "link": "https://stackoverflow.com/questions/30358541/how-to-compare-two-files-and-show-all-the-differences-in-c", "title": "How to compare two files and show all the differences in C?", "body": "<p>I'm currently trying to make a program that compare 2 files and that show all the differences. </p>\n\n<p>The problems I'm having are:</p>\n\n<ul>\n<li><p>First line of the result doesn't show the first character.</p></li>\n<li><p>The differences don't have right results.</p></li>\n</ul>\n\n<p>I've two input files.</p>\n\n<p>file.txt</p>\n\n<pre><code>AAA\nBBB\nCCC\nDDD\nEEE\n</code></pre>\n\n<p>file2.txt</p>\n\n<pre><code>AAA\n111\nBBB\n222\n333\nCCC\nDDD\nEEE\n444\n</code></pre>\n\n<p>The output (1st line is bugged) I'm getting is:</p>\n\n<pre><code>11\nBBB\n222\n333\nCCC\n</code></pre>\n\n<p>And the output (without the 1st line bug) I desire to get must be:</p>\n\n<pre><code>111\n222\n333\n444\n</code></pre>\n\n<p>This is currently my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint compare(char *fname1, char *fname2)\n{\n    FILE *fp1 = fopen(fname1, \"r\"); \n    FILE *fp2 = fopen(fname2, \"r\");\n    int ch1, ch2;\n\n    if (fp1 == NULL) \n    {\n        printf(\"Can't open %s\", fname1);\n        exit(1);\n    } \n    else if (fp2 == NULL)\n    {\n        printf(\"Can't open %s\", fname2);\n        exit(1);\n    } \n    else\n    {\n        ch1 = getc(fp1);    \n        ch2 = getc(fp2);\n\n        while ((ch1 != EOF) &amp;&amp; (ch2 != EOF) &amp;&amp; (ch1 == ch2)) \n        {\n            ch1 = getc(fp1);\n            ch2 = getc(fp2);\n        }\n\n        if (ch1 == ch2)\n        {\n            printf(\"Same. \\n\");\n        }\n        else if (ch1 != ch2)\n        {\n            printf(\"Different strings:\\n\");\n\n            while(!feof(fp1) &amp;&amp; !feof(fp2))\n            {\n                fgets(fname1, ch1, fp1);\n                fgets(fname2, ch2, fp2);\n\n                if(strcmp(fname1, fname2) != 0)\n                {\n                    printf(\"%s\", fname2);\n                }\n            }\n        }\n    }\n\n    fclose(fp1);\n    fclose(fp2);\n    return 0;\n}\n</code></pre>\n\n<p>And the main function:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    if (argc == 3){\n        compare(argv[1], argv[2]);\n    }else{\n        printf(\"Usage: ./what file.txt file2.txt \\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Comparing file.txt and file2.txt or file2.txt and file.txt should give the same result.</p>\n"}, {"tags": ["c", "buffer-overflow"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 4, "creation_date": 1432147886, "post_id": 30358034, "comment_id": 48807842, "body": "your <code>inp</code> is 64 bytes. so input 65 bytes and you&#39;ve overflow..."}, {"owner": {"reputation": 33896, "user_id": 1611055, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e0a298478afff848f791de8fcbcbc7e?s=128&d=identicon&r=PG", "display_name": "Andreas Fester", "link": "https://stackoverflow.com/users/1611055/andreas-fester"}, "edited": false, "score": 4, "creation_date": 1432147987, "post_id": 30358034, "comment_id": 48807908, "body": "And to fix it, <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">use fgets()</a>"}, {"owner": {"reputation": 8208, "user_id": 1971598, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2dadb39a8fbedbdb2c473a162c251b2a?s=128&d=identicon&r=PG", "display_name": "Edgar Aroutiounian", "link": "https://stackoverflow.com/users/1971598/edgar-aroutiounian"}, "edited": false, "score": 0, "creation_date": 1432148088, "post_id": 30358034, "comment_id": 48807973, "body": "@orangesoda which book is this?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432148155, "post_id": 30358034, "comment_id": 48808011, "body": "For example, by entering a carefully crafted byte sequence, most likely non-ascii, which is 68 byte long, you could overwrite the function pointer with a known address of a different function which then gets executed (in a larger program, say, an office package). But that is not directly heap related, it would equally apply to a struct on the stack. In order to do something heap specific you would target data which you know is close on the heap, or perhaps manipulate the book keeping information stored between the memory chunks (but I am not sure how that would do anything but crash the prog)."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1432148173, "post_id": 30358034, "comment_id": 48808024, "body": "Take a look at <a href=\"http://stackoverflow.com/questions/3302255/c-scanf-vs-gets-vs-fgets\">THIS</a>"}, {"owner": {"reputation": 2957, "user_id": 4921818, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16de181c77eb7d275e996e2df3e5438?s=128&d=identicon&r=PG", "display_name": "tam5", "link": "https://stackoverflow.com/users/4921818/tam5"}, "edited": false, "score": 0, "creation_date": 1432149911, "post_id": 30358034, "comment_id": 48809028, "body": "the textbook is Computer Security Principles and Practice (2nd ed) by Stallings"}], "answers": [{"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 5, "last_activity_date": 1432148041, "creation_date": 1432148041, "answer_id": 30358111, "question_id": 30358034, "link": "https://stackoverflow.com/questions/30358034/heap-overflow-attack/30358111#30358111", "title": "Heap Overflow Attack", "body": "<p>The code uses <code>gets</code>, which is infamous for its potential security problem: there's no way to specify the length of the buffer you pass to it, it'll just keep reading from <code>stdin</code> until it encounters <code>\\n</code> or <code>EOF</code>. It may therefore overflow your buffer and write to memory outside of it, and then bad things will happen - it could crash, it could keep running, it could start playing porn. </p>\n\n<p>To fix this, you should use <a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"noreferrer\"><code>fgets</code></a> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 1, "last_activity_date": 1432148063, "creation_date": 1432148063, "answer_id": 30358127, "question_id": 30358034, "link": "https://stackoverflow.com/questions/30358034/heap-overflow-attack/30358127#30358127", "title": "Heap Overflow Attack", "body": "<p>You can fill up next with more than 64 bytes you will by setting the address for <code>process</code>. Thereby enable one to insert whatever address one wishes. The address could be a pointer to any function.</p>\n\n<p>To fix simple ensure that only 63 bytes (one for null) is read into the array <code>inp</code> - use <code>fgets</code></p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 5, "last_activity_date": 1432148133, "creation_date": 1432148133, "answer_id": 30358146, "question_id": 30358034, "link": "https://stackoverflow.com/questions/30358034/heap-overflow-attack/30358146#30358146", "title": "Heap Overflow Attack", "body": "<p>The problem is that <code>gets()</code> will keep reading into the buffer until it reads a newline or reaches EOF. It doesn't know the size of the buffer, so it doesn't know that it should stop when it hits its limit. If the line is 64 bytes or longer, this will go outside the buffer, and overwrite <code>process</code>. If the user entering the input knows about this, he can type just the right characters at position 64 to replace the function pointer with a pointer to some other function that he wants to make the program call instead.</p>\n\n<p>The fix is to use a function other than <code>gets()</code>, so you can specify a limit on the amount of input that will be read. Instead of</p>\n\n<pre><code>gets(next-&gt;inp);\n</code></pre>\n\n<p>you can use:</p>\n\n<pre><code>fgets(next-&gt;inp, sizeof(next-&gt;inp), stdin);\n</code></pre>\n\n<p>The second argument to <code>fgets()</code> tells it to write at most 64 bytes into <code>next-&gt;inp</code>. So it will read at most 63 bytes from <code>stdin</code> (it needs to allow a byte for the null string terminator).</p>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 2642746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5178743ea850e140651b57dfe3f93bc4?s=128&d=identicon&r=PG", "display_name": "fbiazi", "link": "https://stackoverflow.com/users/2642746/fbiazi"}, "is_accepted": false, "score": 0, "last_activity_date": 1432149683, "creation_date": 1432149683, "answer_id": 30358605, "question_id": 30358034, "link": "https://stackoverflow.com/questions/30358034/heap-overflow-attack/30358605#30358605", "title": "Heap Overflow Attack", "body": "<p>The function gets does not limit the amount of text that comes from <code>stdin</code>. If more than 63 chars come from <code>stdin</code>, there will be an overflow.\nThe gets discards the LF char, that would be an [Enter] key, but it adds a null char at the end, thus the 63 chars limit.</p>\n\n<p>If the value at <code>inp</code> is filled with 64 non-null chars, as it can be directly accessed, the <code>showlen</code> function will trigger an access violation, as <code>strlen</code> will search for the null-char beyond <code>inp</code> to determine its size.</p>\n\n<p>Using <code>fgets</code> would be a good fix to the first problem but it will also add a LF char and the null, so the new limit of readable text would be 62.</p>\n\n<p>For the second, just take care of what is written on <code>inp</code>.</p>\n"}], "owner": {"reputation": 2957, "user_id": 4921818, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16de181c77eb7d275e996e2df3e5438?s=128&d=identicon&r=PG", "display_name": "tam5", "link": "https://stackoverflow.com/users/4921818/tam5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 30358146, "answer_count": 4, "score": 6, "last_activity_date": 1432149683, "creation_date": 1432147780, "question_id": 30358034, "link": "https://stackoverflow.com/questions/30358034/heap-overflow-attack", "title": "Heap Overflow Attack", "body": "<p>I am learning about heap overflow attacks and my textbook provides the following vulnerable C code:</p>\n\n<pre><code>/* record type to allocate on heap */\ntypedef struct chunk {\n    char inp[64];            /* vulnerable input buffer */\n    void (*process)(char *); /* pointer to function to process inp */\n} chunk_t;\n\nvoid showlen(char *buf)\n{\n    int len;\n    len = strlen(buf);\n    printf(\"buffer5 read %d chars\\n\", len);\n}\n\nint main(int argc, char *argv[])\n{\n    chunk_t *next;\n\n    setbuf(stdin, NULL);\n    next = malloc(sizeof(chunk_t));\n    next-&gt;process = showlen;\n    printf(\"Enter value: \");\n    gets(next-&gt;inp);\n    next-&gt;process(next-&gt;inp);\n    printf(\"buffer5 done\\n\");\n}\n</code></pre>\n\n<p>However, the textbook doesn't explain how one would fix this vulnerability. If anyone could please explain the vulnerability and a way(s) to fix it that would be great. (Part of the problem is that I am coming from Java, not C)</p>\n"}, {"tags": ["c", "memory-leaks", "crt"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1432150319, "post_id": 30357986, "comment_id": 48809272, "body": "Make sure you&#39;re using the debug version (<code>&#47;MTd</code> or <code>&#47;MDd</code>)."}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1432150501, "post_id": 30357986, "comment_id": 48809370, "body": "Where do I put those flags?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432150781, "post_id": 30357986, "comment_id": 48809508, "body": "Sounds like a coding problem.  Please post the code.  Otherwise we can only make WAGs."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1432151707, "post_id": 30357986, "comment_id": 48810054, "body": "@Sunspawn: Unless you&#39;ve changed the project properties (C/C++ -&gt; Code Generation), just use the <code>Debug </code> and not <code>Release</code> configuration. Also make sure to do this: <code>If you are using the multithreaded DLL version of the CRT library (the &#47;MD option), include the context operator: {,,msvcr100d.dll}_crtBreakAlloc</code> (for VS2013 it&#39;s <code>msvcr120d</code>)."}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "edited": false, "score": 0, "creation_date": 1432152512, "post_id": 30357986, "comment_id": 48810538, "body": "I am using the default F5 debug mode. Is that something different?"}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "edited": false, "score": 0, "creation_date": 1432204928, "post_id": 30357986, "comment_id": 48832749, "body": "Okay, apparently I WAS using the /MD one - only now it tells me that &quot;module msvcr100d.dll is not found&quot; - despite it being right there in the System32 folder."}], "answers": [{"tags": [], "owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "is_accepted": false, "score": 2, "last_activity_date": 1486769320, "creation_date": 1486769320, "answer_id": 42170353, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide/42170353#42170353", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<p>If you are using the multithread version of the CRT, enter the following in the\nwatch window (in column name) : </p>\n\n<pre><code>(int*){,,ucrtbased.dll}_crtBreakAlloc\n</code></pre>\n\n<p>then press enter and change the value -1 to the new allocation number that causes a user-defined breakpoint.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yOEOz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yOEOz.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 4753, "user_id": 271713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3fd349523e1c6030f677a7480b0f94?s=128&d=identicon&r=PG", "display_name": "Luke Dunstan", "link": "https://stackoverflow.com/users/271713/luke-dunstan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487920629, "creation_date": 1487920629, "answer_id": 42432839, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide/42432839#42432839", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<p>It seems that for Visual Studio 2015 it is necessary to use two underscores:</p>\n\n<pre><code>(int*){,,ucrtbased.dll}__crtBreakAlloc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 5449704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sm18B.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5449704/carl"}, "is_accepted": true, "score": 3, "last_activity_date": 1491985401, "creation_date": 1491985401, "answer_id": 43364133, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide/43364133#43364133", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<p><code>_crtBreakAlloc</code> is a macro under VS2015 that is replaced by a call to a function returning a pointer to an int. Tracking a variable in the watch window doesn't seem an option.<br>\nBetter insert in your (debug) code something like this:  </p>\n\n<pre><code>_crtBreakAlloc = 18;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 7140889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd02bbdf6d2c49b84de26ae025daf13?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142 Skorka", "link": "https://stackoverflow.com/users/7140889/rafa%c5%82-skorka"}, "is_accepted": false, "score": 3, "last_activity_date": 1546117208, "last_edit_date": 1546117208, "creation_date": 1546116848, "answer_id": 53973270, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide/53973270#53973270", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<pre><code>{,,ucrtbased.dll}*__p__crtBreakAlloc()\n</code></pre>\n\n<p>works for Visual Studio 2017</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 950131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3326d01ace2c191c669370960e7071e4?s=128&d=identicon&r=PG", "display_name": "stoper", "link": "https://stackoverflow.com/users/950131/stoper"}, "edited": false, "score": 0, "creation_date": 1604161560, "post_id": 54217314, "comment_id": 114265236, "body": "Had same issue! Note, this applies to e.g. VS 2019 where you use <code>{,,ucrtbased.dll}_crtBreakAlloc</code> as other answer suggests. Likely this page could be used to guess whatever symbol name should be used in future versions - <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/finding-memory-leaks-using-the-crt-library?view=vs-2019\" rel=\"nofollow noreferrer\">Visual Studio documentation</a>"}], "tags": [], "owner": {"reputation": 71, "user_id": 10922441, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CGvtUOt5hwA/AAAAAAAAAAI/AAAAAAAAru8/3rch6O_qcDw/photo.jpg?sz=128", "display_name": "Claude Peloquin", "link": "https://stackoverflow.com/users/10922441/claude-peloquin"}, "is_accepted": false, "score": 7, "last_activity_date": 1547810066, "last_edit_date": 1547810066, "creation_date": 1547642508, "answer_id": 54217314, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide/54217314#54217314", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<p>_crtBreakAlloc will be reported as unidentified if the ucrtbased.dll symbols are not loaded. I had this problem because I do not automatically load my symbols. You can go in your module list and manually Load symbols for ucrtbased.dll and then _crtBreakAlloc should show up and work.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11943493"}, "is_accepted": false, "score": 3, "last_activity_date": 1566198959, "last_edit_date": 1566198959, "creation_date": 1566152315, "answer_id": 57547229, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide/57547229#57547229", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<p>few options:\n<br/>\n- add <strong>{,,ucrtbased.dll }_crtBreakAlloc</strong> as variable to Watch\n<br/>\nthis requires symbols loaded in order watch window to display variable type correctly<br/></p>\n\n<p>find out which CRT version <strong>crt*.dll</strong> you compile against. (new ucrtbase<strong>d</strong>.dll, older msvcrt<strong>d*</strong>.dll, etc) \n<br/>\n<a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features?view=vs-2019</a>\n<br/>\nload all modules, or add manually into \\tools\\options\\debug\\symbols\\load only spec modules\n<br/>note: your Debug config compile with /MD<strong>d</strong> (it will have _DEBUG defined)\n<br/>Release config compile with /MD  (most of debug macros just zero;)</p>\n\n<p><br/>\n- use <strong>memchk_break</strong> macro as bellow, it will show alloc block in locals automatically\n<br/>\n(since it resolves through compilation)</p>\n\n<p><br/>\n- let it run, pass on first break, let it print mem leaks if any\n<br/>\n- on second round, type in the alloc block into variable, run and catch</p>\n\n<hr/>\n\n<pre><code>#ifdef _DEBUG\n   #define memchk_break() { auto&amp; _ab = _crtBreakAlloc; __debugbreak(); }\n#else\n   #define memchk_break() 0;\n#endif\nvoid main(){\n   memchk_break();\n   // your code\n   _CrtDumpMemoryLeaks();\n}\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3764, "favorite_count": 1, "accepted_answer_id": 43364133, "answer_count": 6, "score": 10, "last_activity_date": 1566198959, "creation_date": 1432147609, "last_edit_date": 1432152446, "question_id": 30357986, "link": "https://stackoverflow.com/questions/30357986/using-crtbreakalloc-to-find-memory-leaks-identifier-crtbreakalloc-is-unide", "title": "Using _crtBreakAlloc to find memory leaks - identifier &quot;_crtBreakAlloc&quot; is unidentified", "body": "<p>I am trying to use <code>_crtBreakAlloc</code> in the Watch window as suggested in <a href=\"https://msdn.microsoft.com/en-us/library/x98tx3cf.aspx\" rel=\"noreferrer\">this</a> link, but the value line says that 'identifier \"_crtBreakAlloc\" is unidentified' and it simply does not work.</p>\n\n<p>What am I doing wrong? I'm using Visual Studio by the way.</p>\n\n<p>An example of code:</p>\n\n<pre><code>#define _CRTDBG_MAP_ALLOC\n#include &lt;stdlib.h&gt;\n#include &lt;crtdbg.h&gt;\n\n#include &lt;malloc.h&gt;\n\n\nint main()\n{\n    int *arr = (int*)malloc(10 * sizeof(int)); //breakpoint here\n    free(arr);\n    return 0;\n}\n</code></pre>\n\n<p>I then write _crtBreakAlloc into the Name field of the Watch window and hit enter when encountering the breakpoint.</p>\n"}, {"tags": ["c", "shell", "segmentation-fault", "signals"], "comments": [{"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432148004, "post_id": 30357958, "comment_id": 48807921, "body": "<code>r[size-1] = NULL;</code> scares me... what is <code>size</code> when <code>size = parser(input, r);</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1432148043, "post_id": 30357958, "comment_id": 48807949, "body": "Do you have a backtrace from the crash?"}, {"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432148123, "post_id": 30357958, "comment_id": 48807992, "body": "it would be interesting to know if &quot;background&quot; were printed before the crash..."}, {"owner": {"reputation": 9, "user_id": 4921089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694e99eecff70dc54a5bb7ff894e06c?s=128&d=identicon&r=PG&f=1", "display_name": "Glassigt", "link": "https://stackoverflow.com/users/4921089/glassigt"}, "reply_to_user": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432150520, "post_id": 30357958, "comment_id": 48809377, "body": "@polarysekt edited the question so it answers your question, but in short: i use <code>size</code> to see the amount of commands, remove the <code>&amp;</code> if there is one. also, <code>background</code> is printed."}, {"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432151523, "post_id": 30357958, "comment_id": 48809936, "body": "I missed the type of r. <code>char * r[40]</code> Would <code>r[size-1][0] = &#39;\\0&#39;;</code> work?"}, {"owner": {"reputation": 9, "user_id": 4921089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694e99eecff70dc54a5bb7ff894e06c?s=128&d=identicon&r=PG&f=1", "display_name": "Glassigt", "link": "https://stackoverflow.com/users/4921089/glassigt"}, "edited": false, "score": 0, "creation_date": 1432151962, "post_id": 30357958, "comment_id": 48810229, "body": "I get the error <code>sleep: invalid time interval &#39;&#39; </code> where the last thing is two single qoutation-marks. then it prints the <code>OUTSIDE LOOP</code>-message before segfaulting."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1432154602, "post_id": 30357958, "comment_id": 48811701, "body": "Note: don&#39;t use printf() and friends inside a signal handler. They are not signal safe."}, {"owner": {"reputation": 9, "user_id": 4921089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694e99eecff70dc54a5bb7ff894e06c?s=128&d=identicon&r=PG&f=1", "display_name": "Glassigt", "link": "https://stackoverflow.com/users/4921089/glassigt"}, "edited": false, "score": 0, "creation_date": 1432155362, "post_id": 30357958, "comment_id": 48812113, "body": "I know I should not use &quot;printf()&quot;, but it makes no difference if I remove it (still segfault) and it&#39;s currently really only used for debugging to see if it does somewhat right. :("}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1432164926, "post_id": 30357958, "comment_id": 48815727, "body": "Yes, that&#39;s the hard stuff: having more than one error in a progam. And not knowing whom to blame."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432312496, "post_id": 30357958, "comment_id": 48891228, "body": "I, while using gdb (which should be compiled with &#39;-ggdb&#39;, not just &#39;-g&#39;  because then it produces a max amount of info specifically for the gdb debugger."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432312563, "post_id": 30357958, "comment_id": 48891260, "body": "have you checked, upon entry to &#39;parse()&#39; that parameter &#39;r&#39; contains the address of &#39;r&#39;?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432313367, "post_id": 30357958, "comment_id": 48891631, "body": "these two line: &#39;typedef void (*sighandler_t)(int); sighandler_t signal(int signum, sighandler_t handler);&#39; are defined in the signal.h file, so should not be in your source file"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432314109, "post_id": 30357958, "comment_id": 48891985, "body": "have you checked that the string pointed to by &#39;input&#39; is NUL (&#39;\\0&#39;) terminated?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432314801, "post_id": 30357958, "comment_id": 48892321, "body": "the list of delimiters probably should include a space, a comma, a semicolon, and a few other key delimiters that the user might normally enter   I also do not see where parens, braces, &#39;&amp;&amp;&#39;, &#39;||&#39; and other normal command line delimiters are being handled."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432315072, "post_id": 30357958, "comment_id": 48892463, "body": "regarding this line: &#39;else if(strcmp(&quot;&amp;&quot;, r[size-1]) == 0)&#39;  Suggest having the called functions look for that, as part of their parameter processing (they can, for now, always ignore that directive"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432315288, "post_id": 30357958, "comment_id": 48892580, "body": "this line: &#39;if(r[0] == NULL)&#39; is depending on the data contents.  Suggest using &#39;if( 0 == size )&#39; as a reason to jump back to the top of the loop"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432315828, "post_id": 30357958, "comment_id": 48892849, "body": "when using the signaling feature, the main loop is going to be spending most of its&#39; time waiting for the user to input a command line.  if not using the signaling feature, then the main loop is going to be spending most of its&#39; time in the waitpid() function.   Is this the operation you are looking for?  Why is the signal handler performing a waitpid()?   That is like &#39;closing the barn door after that horse has ran away."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432316177, "post_id": 30357958, "comment_id": 48893018, "body": "should the main() function be calling &#39;signal()&#39; when #if SIGDET!=1?"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1432313292, "creation_date": 1432313292, "answer_id": 30401986, "question_id": 30357958, "link": "https://stackoverflow.com/questions/30357958/segfault-when-using-signalhandlers-while-writing-a-basic-shell-in-c/30401986#30401986", "title": "Segfault when using signalhandlers while writing a basic shell in c", "body": "<p>You might want to read the man page for 'signal()'  which, in part says:</p>\n\n<blockquote>\n  <p>The behavior of signal() varies across UNIX versions, and has also\n  var\u2010\n         ied historically across different versions of Linux.   Avoid  its  use:\n         use sigaction(2) instead.</p>\n</blockquote>\n\n<p>Please note the part about using sigaction() rather than signal()</p>\n"}], "owner": {"reputation": 9, "user_id": 4921089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694e99eecff70dc54a5bb7ff894e06c?s=128&d=identicon&r=PG&f=1", "display_name": "Glassigt", "link": "https://stackoverflow.com/users/4921089/glassigt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432313292, "creation_date": 1432147529, "last_edit_date": 1432152589, "question_id": 30357958, "link": "https://stackoverflow.com/questions/30357958/segfault-when-using-signalhandlers-while-writing-a-basic-shell-in-c", "title": "Segfault when using signalhandlers while writing a basic shell in c", "body": "<p>So, I am writing a basic shell in C and need to have signal-handlers. </p>\n\n<p>Detection of terminated background process should be implemented by two mechanisms where one selects which should be compiled at compilation time. The mechanisms are ordinary polling and detection by signals sent from the child processes. The user should be able to select which mechanism to use by defining a macro <code>SIGDET=1</code> at compilation time to have termination detected by signals. If SIGDET is undefined or equals zero then termination should be detected by polling.</p>\n\n<p>I need to compile using <code>gcc -pedantic -Wall -ansi -O4</code>\nWhen I call on my program using <code>cc -pedantic -Wall -ansi -O4 main.c -o shell -DSIGDET=1 &amp;&amp; ./shell</code>, then run a short background-process (for example, <code>sleep 2 &amp;</code>), it gives me a segfault. I don't know why, can someone help me?</p>\n\n<p>Execute is a function that takes the commands, <code>fork()</code> and then in child uses <code>execvp</code>.</p>\n\n<p><strong>EDIT: Got a few questions:</strong> </p>\n\n<p><code>parser()</code> returns the amount of commands that is put in, for example <code>sleep 3 &amp;</code> returns 3. <code>r[size-1] = NULL</code> removes the last command, but only if it is <code>&amp;</code>. That is because I don't want to send it to execute, I only need to know it's supposed to run in the background.</p>\n\n<p><strong>EDIT: Print Out:</strong></p>\n\n<p><code>background</code> immediately after putting in a command with <code>&amp;</code>.\nThen it prints out the <code>OUTSIDE LOOP</code> message, before it prints a segfault and then exits.</p>\n\n<p><strong>EDIT: With -g flag and running gdb</strong></p>\n\n<p>I run debug, and I get the following:</p>\n\n<pre><code>&gt;: sleep 2 &amp;\nbackground\n&gt;: OUTSIDE LOOP: 11661 with this status: 0\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7aa0ad9 in strtok () from /lib/x86_64-linux-gnu/libc.so.6\n</code></pre>\n\n<p>I am not doing anything weird with strtok(), it's only used in the parser and it is as follows:</p>\n\n<pre><code>int parser(char * input, char ** r)\n{\n    int i = 0;\n    char *tokens = strtok(input, DELIM);\n    /* char r[40]; */\n\n    while(tokens) \n    {\n        r[i] = tokens;\n        tokens = strtok(NULL, DELIM);\n        i++;\n    }\n    r[i] = NULL;\n    return i;\n}\n</code></pre>\n\n<p>Heres sort of my code (excluding parsing and execute-functions and such):</p>\n\n<pre><code>#define _POSIX_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt; /* for getcwd */\n#include &lt;stdlib.h&gt; /* for malloc */\n#include &lt;signal.h&gt;\n#include \"functions.h\"\n#include \"textfunc.h\"\n#include \"textfunc.c\"\n#include \"functions.c\"\n\n#define MAX_LENGTH 80\n#define DELIM \" \\n\\r\\t\"\n\ntypedef void (*sighandler_t)(int);\nsighandler_t signal(int signum, sighandler_t handler);\n\nvoid sig(int signal)\n{\n  int status;\n  pid_t pid = waitpid(-1, &amp;status, WNOHANG);\n  printf(\" OUTSIDE LOOP: %d with this status: %d\\n\", pid, status);\n}\n\nint main()\n{\n  char *input;\n  char * r[40];\n  int size;\n\n  signal(SIGINT, SIG_IGN); /* */\n\n  #if SIGDET==1\n  signal(SIGCHLD, sig); \n  #endif\n\n  while(1)\n  {\n    int bg = -1;\n\n    #if SIGDET!=1\n    int status;\n    pid_t pid = waitpid(-1, &amp;status, WNOHANG);\n    if(pid &gt; 0)\n      printf(\"INSIDE LOOP: %d with this status: %d\\n\", pid, status);\n    #endif\n\n    prompt();\n\n    input = readInput();\n    size = parser(input, r);\n\n    if(r[0] == NULL)\n        continue;\n    else if(strcmp(\"&amp;\", r[size-1]) == 0)\n    {\n      printf(\"background\\n\");\n      r[size-1] = NULL;\n      bg = 0;\n    }\n    if(strcmp(\"exit\", r[0]) == 0)\n        {\n        kill(0, SIGKILL);\n      }\n    else if(strcmp(\"cd\", r[0]) == 0)\n      changedir(r[1]);\n    else if(strcmp(\"checkEnv\", r[0]) == 0)\n      checkenv(r);\n    else\n    {\n        execute(&amp;input, r, bg);\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pipe", "posix"], "comments": [{"owner": {"reputation": 140, "user_id": 4909719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fbc2ca18b77df0b1610f4c6263613c?s=128&d=identicon&r=PG&f=1", "display_name": "Abel", "link": "https://stackoverflow.com/users/4909719/abel"}, "edited": false, "score": 2, "creation_date": 1432147566, "post_id": 30357911, "comment_id": 48807679, "body": "the best thing would be to make a second pipe this time with inverted ends compared to the first."}], "answers": [{"tags": [], "owner": {"reputation": 2685, "user_id": 293023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96ae36cc4310f8658e2ef09730ac191d?s=128&d=identicon&r=PG&f=1", "display_name": "niry", "link": "https://stackoverflow.com/users/293023/niry"}, "is_accepted": false, "score": 0, "last_activity_date": 1432183501, "creation_date": 1432183501, "answer_id": 30364778, "question_id": 30357911, "link": "https://stackoverflow.com/questions/30357911/bidirectional-anyonymous-pipe-in-c/30364778#30364778", "title": "bidirectional anyonymous pipe in c", "body": "<p>See below, and it only works this way because pipe is 4KB buffered and the strings are smaller, otherwise it might get into deadlock.</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int ret_val;\n    int pfd[2];\n    int dfp[2];\n    char buff[32];\n    char string1[]=\"String for pipe I/O\";\n    char string2[]=\"String 2 for pipe I/O\";\n\n    ret_val = pipe(pfd), pipe(dfp);\n\n    pid_t pid = fork();\n    if (0 &gt; pid) {\n        printf(\"Error forking\\n\");\n        exit(1);\n    }\n    if (pid == 0) {\n        // child\n        close(pfd[0]); // close the read end\n        close(dfp[1]); // close the write end\n        ret_val = write(pfd[1],string1,strlen(string1)); /*Write to pipe*/\n        if (ret_val != strlen(string1)) {\n            printf(\"Write did not return expected value\\n\");\n            exit(2); // Print error message and exit\n        }\n        ret_val = read(dfp[0],buff,strlen(string2)); /* Read from pipe */\n        if (ret_val != strlen(string2)) {\n            printf(\"Read did not return expected value\\n\");\n            exit(3);                       /* Print error message and exit */\n        }\n        printf(\"child read '%s' from the parent program\\n\",buff);\n    }\n    else {\n        // parent\n        close(pfd[1]); /* close the write end of pipe */\n        close(dfp[0]); /* close the read end */\n        ret_val = write(dfp[1],string2,strlen(string2)); /*Write to pipe*/\n        if (ret_val != strlen(string2)) {\n            printf(\"Write did not return expected value\\n\");\n            exit(2); // Print error message and exit\n        }\n        ret_val = read(pfd[0],buff,strlen(string1)); /* Read from pipe */\n        if (ret_val != strlen(string1)) {\n            printf(\"Read did not return expected value\\n\");\n            exit(3);                       /* Print error message and exit */\n        }\n        printf(\"parent read '%s' from the child program\\n\",buff);\n        wait(NULL);\n    }\n    exit(0);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3785281"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432183501, "creation_date": 1432147349, "last_edit_date": 1432147660, "question_id": 30357911, "link": "https://stackoverflow.com/questions/30357911/bidirectional-anyonymous-pipe-in-c", "title": "bidirectional anyonymous pipe in c", "body": "<p>I have coded this (hopefully correct) anonymous pipe in C with Ubuntu, but I can't connect in both direction. How can I fix this the easiest way, to connect from child to parent and from parent to child?</p>\n\n<pre><code>int main() {\nint ret_val;\nint pfd[2];\nchar buff[32];\nchar string1[]=\"String for pipe I/O\";\n\nret_val = pipe(pfd);   \n\nif (fork() == 0) {\n   // child \n   close(pfd[0]); // close the read end \n   ret_val = write(pfd[1],string1,strlen(string1)); /*Write to pipe*/\n   if (ret_val != strlen(string1)) {\n      printf(\"Write did not return expected value\\n\");\n      exit(2); // Print error message and exit\n   }\n}\nelse {\n   // parent\n   close(pfd[1]); /* close the write end of pipe */\n   ret_val = read(pfd[0],buff,strlen(string1)); /* Read from pipe */\n   if (ret_val != strlen(string1)) {\n      printf(\"Read did not return expected value\\n\");\n      exit(3);                       /* Print error message and exit */\n   }\n   printf(\"parent read %s from the child program\\n\",buff);\n\n}\nexit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct", "literals"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1432146689, "post_id": 30357607, "comment_id": 48807184, "body": "May I ask the reason for not using unions? It seems to me like a perfect case for using them."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1432148034, "post_id": 30357607, "comment_id": 48807944, "body": "Honestly, if you are just serializing to an array, memcpy it where you want and call it good.  More so because your sizes are different and won&#39;t memory align well at all."}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 1, "creation_date": 1432149002, "post_id": 30357607, "comment_id": 48808527, "body": "How would you type <code>s1_t</code> or <code>s2_2</code> literals in your source?"}, {"owner": {"reputation": 623, "user_id": 2465014, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae529120f0d9b6a1335336ebc97a3578?s=128&d=identicon&r=PG", "display_name": "gdoug", "link": "https://stackoverflow.com/users/2465014/gdoug"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1432149451, "post_id": 30357607, "comment_id": 48808757, "body": "@JoachimPileborg Embedded system programming, every byte counts! @MichaelDorgan <code>memcpy</code> requires I know ahead of time the number of bytes I will be requesting, or that I can easily calculate it, which is not true in my case. @ysap we can assume C99 and use compound literals (<code>(s1_t){&#39;a&#39;, 10}</code>) or whatever works, really."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1432149775, "post_id": 30357607, "comment_id": 48808947, "body": "If you can&#39;t define a predictable, consistent structure for your data, then how do you anticipate <i>consuming</i> it?"}, {"owner": {"reputation": 623, "user_id": 2465014, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae529120f0d9b6a1335336ebc97a3578?s=128&d=identicon&r=PG", "display_name": "gdoug", "link": "https://stackoverflow.com/users/2465014/gdoug"}, "edited": false, "score": 0, "creation_date": 1432150167, "post_id": 30357607, "comment_id": 48809188, "body": "Good question, but that has already been handled. Perhaps a little more context is what is required. We are working with a postfix expression evaluator that represents expressions as sequential bytecode (which is just serialized structs) that is part of a data-processing tool. We are trying to provide a reasonable way for our future users to write these expressions as efficiently as possible."}], "answers": [{"comments": [{"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1432164191, "post_id": 30359163, "comment_id": 48815496, "body": "+1, but it worth mentioning that some compilers let you enforce a &quot;packed&quot; memory organization on your structures, thus eliminating padding. GCC, for one, has the attribute <code>packed</code> to identify that."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1432152082, "last_edit_date": 1432152082, "creation_date": 1432151545, "answer_id": 30359163, "question_id": 30357607, "link": "https://stackoverflow.com/questions/30357607/can-arbitrary-byte-arrays-be-constructed-pre-compile-time-from-various-structs-u/30359163#30359163", "title": "Can arbitrary byte arrays be constructed pre-compile time from various structs using macros in C?", "body": "<blockquote>\n  <p>We all know that we can \"mash\" together string literals in C without most compilers troubling us</p>\n</blockquote>\n\n<p>Indeed, no conforming C compiler will complain, as the semantics of such constructs are defined explicitly by the standard(s).  I mention this to highlight that the result is not accidental, subject to luck or compiler whim, or any such thing, as your comments seem to allow as possibilities.</p>\n\n<blockquote>\n  <p>Effectively I want to declare byte arrays that are arbitrary combinations of [two structure types]. Is this reasonably possible? I would prefer not to use unions.</p>\n</blockquote>\n\n<p>Strictly speaking, it is not possible.  You cannot use <code>struct</code> literals in any combination to initialize a byte array.  You can achieve something fairly close in C99 or later using unions, and if you want compile-time initialization from <code>struct</code> literals, then I don't see any other option.  It would look like this:</p>\n\n<pre><code>typedef union {\n    s1_t s1;\n    s2_t s2;\n} s_u;\n\ns_u array[] = {\n    { .s1 = (s1_t) { 'a', 42 } },\n    { .s1 = (s1_t) { 'b', 17 } },\n    { .s2 = (s2_t) { 1856 } },\n    { .s1 = (s1_t) { 'Q', -1 } }\n};\n\nunsigned char *byte_array = (unsigned char *)array;\n</code></pre>\n\n<p>I suppose, however, that your reason for wanting to avoid unions is to pack together <code>struct</code> representations of different sizes without padding.  This is not possible.  Indeed, even with only <strong>one</strong> struct type, it is not necessarily possible to arrange instances without any padding between last element of one instance and the first of the next instance.  It may not be easy even to force it with <code>memcpy()</code>, as the representations of your <code>struct</code>s can have both trailing padding and internal padding, all accounted in their sizes.  And don't forget that the values of any padding bytes are undefined.</p>\n\n<p>You describe the result you're after as \"sequential bytecode\" and \"<em>serialized</em> structs\" (emphasis added).  I can't be certain what \"serialized\" means to you in this context, but to me it normally means something quite different from \"internal representation\".  In fact, avoiding dependency on internal representation is one of the main reasons for serialization.</p>\n\n<p>If your objective conforms to my idea of serialization, then your best bet for avoiding making your users write bytecode is to provide them a bytecode compiler, with input and output in whatever forms will be most convenient.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1432165003, "creation_date": 1432165003, "answer_id": 30362132, "question_id": 30357607, "link": "https://stackoverflow.com/questions/30357607/can-arbitrary-byte-arrays-be-constructed-pre-compile-time-from-various-structs-u/30362132#30362132", "title": "Can arbitrary byte arrays be constructed pre-compile time from various structs using macros in C?", "body": "<p>It may be possible to achieve something like what you're after with some nasty macro-based clunkery, if your data structure is defined in a separate file which code can <code>#include</code>ed multiple times while different macros are in effect.</p>\n\n<p>Suppose for example that your data is in a file <code>foo.dat</code> of the following format:</p>\n\n<pre><code>INTS(1,2)\nIDBL(-4,3)\nINTS(5,23)\n</code></pre>\n\n<p>Items should be listed on separate lines, with <em>no semicolons</em>.</p>\n\n<p>One could start by doing something like:</p>\n\n<pre><code>#define INTS(x,y) INT_PAIR Field ## __LINE__;\n#define IDBL(x,y) INT_DBL  Field ## __LINE__;\nstruct ALL_DATA {\n#include \"foo.dat\"\n  int END_OF_DATA;\n};\n#undef INTS\n#undef INTS\n</code></pre>\n\n<p>This would then be followed by:</p>\n\n<pre><code>#define INTS(x,y) {(x),(y)},\n#define IDBL(x,y) {(x),(y)},\nconst struct ALL_DATA all_data = {\n#include \"foo.dat\"\n  0};\n#undef INTS\n#undef INTS\n</code></pre>\n\n<p>At that point one would have a compile-time constant structure containing a concatenation of a mixture of the other structure types, which could be parsed at run-time if it was constructed according to some form of known rules (e.g. the first value is positive for all int/int pairs, negative for all int/double pairs, and zero for end-of-data).</p>\n\n<p>If one wanted to have an array containing the starting offsets of all the items (in int-sized units) from the start of the structure, one could use a couple more inclusions:</p>\n\n<pre><code>#define INTS(x,y) INT_PAIR FIELD_ID_ ## __LINE__, dummy1x ## __LINE__,\n#define IDBL(x,y) INT_DBL  FIELD_ID_ ## __LINE__, \\\n    dummy1x ## __LINE__, dummy2x ## __LINE__,\nenum DATA_IDS {\n#include \"foo.dat\"\n  dummy_end_id};\n#undef INTS\n#undef INTS\n#define INTS(x,y) FIELD_ID_ ## __LINE__, \n#define IDBL(x,y) FIELD_ID_ ## __LINE__,\nunsigned int data_offsets[] = {\n#include \"foo.dat\"\n  -1};\n#undef INTS\n#undef INTS\n</code></pre>\n\n<p>I don't know any way to make this work without either abusing the <code>__LINE__</code> directive or requiring that each line of the data file supply a unique identifier name; which approach is preferable could be open to discussion.</p>\n"}], "owner": {"reputation": 623, "user_id": 2465014, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae529120f0d9b6a1335336ebc97a3578?s=128&d=identicon&r=PG", "display_name": "gdoug", "link": "https://stackoverflow.com/users/2465014/gdoug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 30359163, "answer_count": 2, "score": 1, "last_activity_date": 1432165003, "creation_date": 1432146385, "question_id": 30357607, "link": "https://stackoverflow.com/questions/30357607/can-arbitrary-byte-arrays-be-constructed-pre-compile-time-from-various-structs-u", "title": "Can arbitrary byte arrays be constructed pre-compile time from various structs using macros in C?", "body": "<p>We all know that we can \"mash\" together string literals in C without most compilers troubling us, for example <code>char[] result = \"a\" \"b\"; // result = \"ab\"</code>. I want to generalize this idea to structs.</p>\n\n<p>Suppose I have the following structs:</p>\n\n<pre><code>typedef struct s1 {\n char a;\n int b;\n} s1_t;\n\ntypedef struct s2 {\n int c;\n} s2_t;\n</code></pre>\n\n<p>Effectively I want to declare byte arrays that are arbitrary combinations of <code>s1_t</code> and <code>s2_t</code>. Is this reasonably possible? I would prefer not to use unions. The contents of the structs will be known at compile time.</p>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1432146223, "post_id": 30357518, "comment_id": 48806912, "body": "<code>n-&gt;next</code> is set to point to what was previously on top of the stack; then <code>s-&gt;top</code> is set to point to the newly inserted element."}, {"owner": {"reputation": 17, "user_id": 4724669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92209cfc554d849970fddcdd211b26d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rinzler", "link": "https://stackoverflow.com/users/4724669/rinzler"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432146474, "post_id": 30357518, "comment_id": 48807050, "body": "*headPtr -&gt; A -&gt; B -&gt; C -&gt; NULL, for stack ADT, a new node should add before A because of LIFO?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432146700, "post_id": 30357518, "comment_id": 48807189, "body": "given the statement: &#39; retrun n;&#39; it is obvious this is not a true copy of the code.  Suggest performing a simple copy/paste"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432146774, "post_id": 30357518, "comment_id": 48807221, "body": "the &#39;problem&#39; code is simply inserting the new node at the beginning of the linked list.   BTW: the returned value from malloc should always be checked (!=NULL) to assure the operation was successful"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4724669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92209cfc554d849970fddcdd211b26d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rinzler", "link": "https://stackoverflow.com/users/4724669/rinzler"}, "edited": false, "score": 0, "creation_date": 1432147066, "post_id": 30357752, "comment_id": 48807370, "body": "The process goes like that for adding new node i think : A-&gt;D-&gt;B-&gt;NULL if i want to add &#39;E&#39; to stack, it becomes A-&gt;D-&gt;B-&gt;E-&gt;NULL. Am I right ? @neil"}, {"owner": {"reputation": 1442, "user_id": 721263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a4401306decf204b7eeffd88deffa?s=128&d=identicon&r=PG", "display_name": "Neil Smithline", "link": "https://stackoverflow.com/users/721263/neil-smithline"}, "reply_to_user": {"reputation": 17, "user_id": 4724669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92209cfc554d849970fddcdd211b26d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rinzler", "link": "https://stackoverflow.com/users/4724669/rinzler"}, "edited": false, "score": 0, "creation_date": 1432147249, "post_id": 30357752, "comment_id": 48807489, "body": "If you <i>push</i> <code>E</code> it will become <code>E-&gt;A-&gt;D-&gt;B-&gt;NULL</code>. You need to read up on the <a href=\"https://en.wikipedia.org/wiki/Stack_(abstract_data_type)\" rel=\"nofollow noreferrer\">stack data structure</a>. What you have described is the behavior you would see in a <a href=\"https://en.wikipedia.org/wiki/Queue_(abstract_data_type)\" rel=\"nofollow noreferrer\">queue</a>."}], "tags": [], "owner": {"reputation": 1442, "user_id": 721263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a4401306decf204b7eeffd88deffa?s=128&d=identicon&r=PG", "display_name": "Neil Smithline", "link": "https://stackoverflow.com/users/721263/neil-smithline"}, "is_accepted": true, "score": 1, "last_activity_date": 1432146827, "creation_date": 1432146827, "answer_id": 30357752, "question_id": 30357518, "link": "https://stackoverflow.com/questions/30357518/incomprehensible-expression-in-stack-adt-implementation/30357752#30357752", "title": "Incomprehensible expression in Stack ADT implementation", "body": "<p>The push operation adds a new item to the top of the stack. In this implementation, the top of the stack is <code>s-&gt;top</code>. The second item on the stack is <code>s-&gt;top-&gt;next</code>, the third is <code>s-&gt;top-&gt;next-&gt;next</code>, and so on.</p>\n\n<p>I think it is easier to think of</p>\n\n<pre><code>n-&gt;next = s-&gt;top;\ns-&gt;top = n;\n</code></pre>\n\n<p>as </p>\n\n<pre><code>s-&gt;top = n;\nn-&gt;next = s-&gt;top;\n</code></pre>\n\n<p>The first statement is making the new node <code>n</code> the top of the stack. But the second item of the stack is <code>NULL</code> while it should be the old top of the stack. The second statement fixes this, making the old top of the stack the second item of the stack.    </p>\n"}, {"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 1, "last_activity_date": 1432146837, "creation_date": 1432146837, "answer_id": 30357753, "question_id": 30357518, "link": "https://stackoverflow.com/questions/30357518/incomprehensible-expression-in-stack-adt-implementation/30357753#30357753", "title": "Incomprehensible expression in Stack ADT implementation", "body": "<p>Let's try my Paint skillz:</p>\n\n<p>Before:</p>\n\n<p><img src=\"https://i.stack.imgur.com/bUcvN.png\" alt=\"enter image description here\"></p>\n\n<p>After:</p>\n\n<p><img src=\"https://i.stack.imgur.com/ROAxG.png\" alt=\"enter image description here\"></p>\n\n<p><br><code>NULL</code> indicates that the node points to nothing, i.e., it is the last node inserted.\nNote that <code>next</code> points to the next <em>node</em>, not to that node's <code>next</code>, I just had no better way of showing this here.</p>\n"}], "owner": {"reputation": 17, "user_id": 4724669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92209cfc554d849970fddcdd211b26d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rinzler", "link": "https://stackoverflow.com/users/4724669/rinzler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 30357752, "answer_count": 2, "score": 0, "last_activity_date": 1432146837, "creation_date": 1432146139, "question_id": 30357518, "link": "https://stackoverflow.com/questions/30357518/incomprehensible-expression-in-stack-adt-implementation", "title": "Incomprehensible expression in Stack ADT implementation", "body": "<p>There is a stack ADT implementation below. In this implemantation, programmer has used linked list.</p>\n\n<pre><code>struct Node {\n    char *elem;\n    struct Node *next;\n};\n\nstatic struct Node *new_node(void *elem, int elem_size)\n{\n    struct Node *n = malloc(sizeof(struct Node));\n    n-&gt;elem = malloc(elem_size);\n    memcpy(n-&gt;elem, elem, elem_size);\n    n-&gt;next = NULL;\n\n    retrun n;\n}\n\nstruct Stack {\n    int elem_size;\n    int n_elems;\n    struct Node *top;\n}\n</code></pre>\n\n<p>I got it, except the code block as shown below.</p>\n\n<pre><code>void stack_push(struct Stack *s, void *elem)\n{\n    struct Node *n = new_node(elem, s-&gt;elem_size);\n    n-&gt;next = s-&gt;top;\n    s-&gt;top = n;\n\n    s-&gt;n_elems++;\n}\n</code></pre>\n\n<p>I did not understand that </p>\n\n<pre><code>n-&gt;next = s-&gt;top;\ns-&gt;top = n;\n</code></pre>\n\n<p>Would anyone like to help me to understand this statements. I will appreciate.</p>\n"}, {"tags": ["c", "xcode", "division"], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 2122084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W4Zzz.jpg?s=128&g=1", "display_name": "BrainSteel", "link": "https://stackoverflow.com/users/2122084/brainsteel"}, "edited": false, "score": 1, "creation_date": 1432144613, "post_id": 30356996, "comment_id": 48805977, "body": "Huh. So it throws an <code>EXC_ARITHMETIC</code> instead of a simple overflow? Will a check like <code>if(denom &amp;&amp; !(num == -2147483648 &amp;&amp; denom == -1)) ...</code> remedy the problem?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432146502, "post_id": 30356996, "comment_id": 48807069, "body": "suggest adding code to check for special cases and returning an appropriate result for those special cases."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 2, "last_activity_date": 1432144412, "creation_date": 1432144412, "answer_id": 30356996, "question_id": 30356886, "link": "https://stackoverflow.com/questions/30356886/exc-arithmetic-error-with-nonzero-denominator-xcode/30356996#30356996", "title": "EXC_ARITHMETIC Error With Nonzero Denominator - XCode", "body": "<p>Your <code>num</code> happens to be the most negative number that can be represented by a signed 32-bit variable (assuming 2's complement); unfortunately for you, the most positive number that can be so represented is 2147483647 - one less than -2147483648/-1.</p>\n"}], "owner": {"reputation": 663, "user_id": 2122084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W4Zzz.jpg?s=128&g=1", "display_name": "BrainSteel", "link": "https://stackoverflow.com/users/2122084/brainsteel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 30356996, "answer_count": 1, "score": 1, "last_activity_date": 1432144412, "creation_date": 1432144097, "question_id": 30356886, "link": "https://stackoverflow.com/questions/30356886/exc-arithmetic-error-with-nonzero-denominator-xcode", "title": "EXC_ARITHMETIC Error With Nonzero Denominator - XCode", "body": "<p>Usually, when I get an <code>EXC_ARITHMETIC</code> error, it means I divided by zero, which makes sense to me. However, this time I have no idea what is going on. Here is a function that is being called rather frequently:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>GP_TYPE GP_NodeFunction_Divide(GP_Node* node, GP_Mem* mem, void* data){\n\n    /* These are just normal function calls.\n       I can say with some certainty they are not misbehaving. */\n    GP_TYPE denom = GP_Call(node-&gt;next[1], mem, data);\n    GP_TYPE num = GP_Call(node-&gt;next[0], mem, data);\n\n    if (denom) {\n        /* denom != 0, right? */\n        return num / denom; /* Crash! EXC_ARITHMETIC */\n    }\n\n    else return 1e12;\n}\n</code></pre>\n\n<p>My program runs for several minutes with no incident, presumably calling this functions hundreds of thousands of times, but will still crash here occasionally. </p>\n\n<p><code>GP_TYPE</code> is defined as follows:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#ifdef GP_USE_DOUBLE\n#define GP_TYPE double\n#else\n#define GP_TYPE int\n#endif\n</code></pre>\n\n<p><code>GP_USE_DOUBLE</code> is NOT defined.</p>\n\n<p>I've been compiling with <code>-O0</code>, and XCode's debug window holds this information at the crash site:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>...\nnum = (int)-2147483648\ndenom = (int)-1\n...\n</code></pre>\n\n<p>This information is consistent. Every time this function crashes, the values of <code>num</code> and <code>denom</code> are the same.</p>\n\n<p>I tried to specifically type <code>num / denom</code> into the debug window as an expression, and XCode promptly crashed (Which, I suppose, is not the weirdest thing about this bug).</p>\n\n<p>I can also navigate the debug window to observe the <code>GP_Node* node</code>, and it has been a valid pointer, with valid elements, every time it crashes. </p>\n\n<p>Is XCode's debug window bugged? (I've just recently updated to XCode 6.3.2)</p>\n\n<p>Is <code>denom</code> secretly <code>0</code>? Is this even possible?</p>\n\n<p>Is there another way to get an <code>EXC_ARITHMETIC</code> from a division of <code>int</code>s?</p>\n\n<p>What is going on?</p>\n"}, {"tags": ["c", "swift", "variadic-functions"], "comments": [{"owner": {"reputation": 370144, "user_id": 1271826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/duhm9.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1271826/rob"}, "edited": false, "score": 0, "creation_date": 1432145286, "post_id": 30356835, "comment_id": 48806371, "body": "If you&#39;ve already created this <code>HumboldtCallback</code> class in Objective-C, why don&#39;t you create a method in that class that calls <code>initGEOS_r</code>?"}, {"owner": {"reputation": 533, "user_id": 998750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e0c77016373961b8ea711799274f5236?s=128&d=identicon&r=PG", "display_name": "Andrea Cremaschi", "link": "https://stackoverflow.com/users/998750/andrea-cremaschi"}, "reply_to_user": {"reputation": 370144, "user_id": 1271826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/duhm9.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1271826/rob"}, "edited": false, "score": 0, "creation_date": 1432145762, "post_id": 30356835, "comment_id": 48806653, "body": "At the end I finished implementing directly a plain C wrapper function (initGEOSWrapper) that calls initGEOS_r.. But still this does not answer the question on how to handle C variadic function arguments in Swift"}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 998750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e0c77016373961b8ea711799274f5236?s=128&d=identicon&r=PG", "display_name": "Andrea Cremaschi", "link": "https://stackoverflow.com/users/998750/andrea-cremaschi"}, "edited": false, "score": 0, "creation_date": 1432146907, "post_id": 30357455, "comment_id": 48807279, "body": "ugh. Thank you for the answer!"}], "tags": [], "owner": {"reputation": 4025, "user_id": 2599552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bApEQ.png?s=128&g=1", "display_name": "James Snook", "link": "https://stackoverflow.com/users/2599552/james-snook"}, "is_accepted": true, "score": 0, "last_activity_date": 1432145911, "creation_date": 1432145911, "answer_id": 30357455, "question_id": 30356835, "link": "https://stackoverflow.com/questions/30356835/swift-and-c-callbacks-with-variadic-arguments/30357455#30357455", "title": "Swift and C callbacks with variadic arguments", "body": "<p>You need to write a C function instead of an objective C method. Unfortunately Swift will convert these into Swift Closure. However you can write a function/method in objective C to return your function pointer. This will stop Swift being able to convert the function to a closure. i.e in your objectiveC header:</p>\n\n<pre><code>void myCallback (const char *fmt, ...);\nGEOSContextHandle_t getMyCallback ();\n</code></pre>\n\n<p>then in the class implement getMyCallback like this:</p>\n\n<pre><code>GEOSContextHandle_t getMyCallback () {\n  return myCallback;\n}\n</code></pre>\n\n<p>and implement your callback function. In Swift you'll end up with:</p>\n\n<pre><code>initGEOS_r(getMyCallback(), ...)\n</code></pre>\n\n<p>I believe that you can do this with a plain C header and .c file rather than using an object.</p>\n"}], "owner": {"reputation": 533, "user_id": 998750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e0c77016373961b8ea711799274f5236?s=128&d=identicon&r=PG", "display_name": "Andrea Cremaschi", "link": "https://stackoverflow.com/users/998750/andrea-cremaschi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 30357455, "answer_count": 1, "score": 3, "last_activity_date": 1432145911, "creation_date": 1432143954, "question_id": 30356835, "link": "https://stackoverflow.com/questions/30356835/swift-and-c-callbacks-with-variadic-arguments", "title": "Swift and C callbacks with variadic arguments", "body": "<p>I am trying to use a C API in Swift that requires me to pass a callback to a function using variadic arguments, i.e.:</p>\n\n<pre><code>extern GEOSContextHandle_t GEOS_DLL initGEOS_r(\n                                    GEOSMessageHandler notice_function,\n                                    GEOSMessageHandler error_function);\n</code></pre>\n\n<p>where GEOSMessageHandler is defined as:</p>\n\n<pre><code>typedef void (*GEOSMessageHandler)(const char *fmt, ...);\n</code></pre>\n\n<p>How should I handle this? I tried to implement an Objective-C class with two class methods defined as follows:</p>\n\n<pre><code>@interface HumboldtCallback : NSObject\n+(void)noticeCallback:(const char *)args, ... NS_REQUIRES_NIL_TERMINATION;\n+(void)errorCallback:(const char *)args, ... NS_REQUIRES_NIL_TERMINATION;\n@end\n</code></pre>\n\n<p>but Swift does not let me access them. If I define the arguments as <code>void*</code> I can access them from Swift:</p>\n\n<pre><code>var GEOS_HANDLE: COpaquePointer {\n    let noticeCallbackPointer = HumboldtCallback.noticeCallback;\n    let errorCallbackPointer = HumboldtCallback.errorCallback;\n    return initGEOS_r(noticeCallbackPointer, errorCallbackPointer)\n}\n</code></pre>\n\n<p>but the compiler still isn't happy:</p>\n\n<pre><code>Cannot invoke 'initGEOS_r' with an argument list of type '((UnsafeMutablePointer&lt;Void&gt;) -&gt; Void, (UnsafeMutablePointer&lt;Void&gt;) -&gt; Void)'\n</code></pre>\n\n<p>Should I somehow cast the pointer to the callback function before passing it as a parameter to the init function? </p>\n"}, {"tags": ["c", "pipe", "output", "ubuntu-12.04"], "comments": [{"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "edited": false, "score": 1, "creation_date": 1432143740, "post_id": 30356733, "comment_id": 48805430, "body": "No. You do not need pipes. Use dup2 instead."}, {"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432143952, "post_id": 30356733, "comment_id": 48805565, "body": "Take a close look at the first parameter to write. You want standard out and standard error? <a href=\"http://codewiki.wikidot.com/c:system-calls:write\" rel=\"nofollow noreferrer\">codewiki.wikidot.com/c:system-calls:write</a> : &quot;The file descriptor of where to write the output. You can either use a file descriptor obtained from the open system call, or you can use 0, 1, or 2, to refer to standard input, standard output, or standard error, respectively&quot;"}, {"owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432144122, "post_id": 30356733, "comment_id": 48805663, "body": "yes but there is a little pre statement that says using pipes in Linux before the real statement, I mean, probably this problem could be solved wothout using pipes but I think that it&#39;s mandatory."}, {"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432144297, "post_id": 30356733, "comment_id": 48805787, "body": "So they want you to open files specified on the command line with arguments as opposed to doing the redirects on the command line..."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432144306, "post_id": 30356733, "comment_id": 48805792, "body": "I&#39;ve deleted my answer since you claim you&#39;re not allowed to use the <code>printf</code> family of functions; you might want to update your question with that information."}, {"owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "reply_to_user": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432144351, "post_id": 30356733, "comment_id": 48805817, "body": "@polarysekt maybe I&#39;m wrong but using write command I&#39;m not use out and -err as statement says."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432144357, "post_id": 30356733, "comment_id": 48805825, "body": "you could use re-open stdout and stderr to the desired files.  However, the declaration of main needs to be int main( int argc, char *argv{} ) so you can input the command line parameter that contain the output file names."}, {"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 0, "creation_date": 1432144451, "post_id": 30356733, "comment_id": 48805884, "body": "Well you can use <code>open(  char  *filename,  int  access,  int  permission )</code> to obtain a file descriptor for <code>write( int  handle,  void  *buffer,  int  nbyte )</code>. See: <code>close(  int  handle )</code>."}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "edited": false, "score": 1, "creation_date": 1432145092, "post_id": 30356733, "comment_id": 48806256, "body": "Your code is irreverent to your question ! (Again !)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432145398, "post_id": 30356733, "comment_id": 48806436, "body": "the most straight forward way to modify the stdout and stderr  is to use freopen().    from the man page:  &quot;The  freopen() function opens the file whose name is the string pointed        to by path and associates the stream pointed to by stream with it.  The        original  stream  (if  it exists) is closed.  The mode argument is used        just as in the fopen() function.    The  primary  use  of  the  freopen()        function  is  to change the file associated with a standard text stream  (stderr, stdin, or stdout). &quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "edited": false, "score": 0, "creation_date": 1432144878, "post_id": 30357087, "comment_id": 48806114, "body": "Edited to remove printf(). Since you told that later."}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "reply_to_user": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432145019, "post_id": 30357087, "comment_id": 48806209, "body": "@alwayslearn Welcome ! I see you are taking a course in Unix system programming :D All the best !"}, {"owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432145570, "post_id": 30357087, "comment_id": 48806548, "body": "xD thanks! but it&#39;s difficut for me, I&#39;m working and studying 7 days per week and I&#39;m turning mad :P"}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "reply_to_user": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432148002, "post_id": 30357087, "comment_id": 48807919, "body": "@alwayslearn &quot;Advanced Programming in the UNIX Environment&quot; by W. Richard Stevens and Stephen Rago is a very good book for this."}, {"owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432196558, "post_id": 30357087, "comment_id": 48827139, "body": "thanks for the book, I&#39;ll try to read when I&#39;ve some free time!"}, {"owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432200064, "post_id": 30357087, "comment_id": 48829447, "body": "not exactly, I posted the code that I&#39;ve, I&#39;ve been trying all morning to correct that but doesn&#39;t works, It creates the both output files (out and err) but no writes into there. I&#39;m studuing online a degree and sometimes it&#39;s really difficult to do without porffesors or mates to help you face by face."}], "tags": [], "owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "is_accepted": false, "score": 2, "last_activity_date": 1432144703, "creation_date": 1432144703, "answer_id": 30357087, "question_id": 30356733, "link": "https://stackoverflow.com/questions/30356733/get-standard-output-and-error-output-in-different-files-in-c/30357087#30357087", "title": "get standard output and error output in different files in C", "body": "<p>You can use <a href=\"http://linux.die.net/man/2/dup2\" rel=\"nofollow\">dup2</a> to redirect STDIN and STDERR to any other file you have opened.</p>\n\n<pre><code>int out_fd = creat(\"out.txt\",0644);\nif(out_fd &lt; 0){\n    printf(\"Could not open file for standard output\\n\");\n}\nwrite(STDOUT_FILENO, \"This is printed on the standard output\", strlen(\"This is printed on the standard output\"));\ndup2(out_fd, STDOUT_FILENO);\nwrite(STDOUT_FILENO, \"This goes into out.txt file \\n\", strlen(\"This goes into out.txt file \\n\"));\n</code></pre>\n\n<p>You can do it similarly for stderr.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "edited": false, "score": 0, "creation_date": 1432145743, "post_id": 30357158, "comment_id": 48806645, "body": "When you say that I need to parse the command-line options, is something like the examples that appear here (<a href=\"http://stackoverflow.com/questions/9642732/parsing-command-line-arguments\" title=\"parsing command line arguments\">stackoverflow.com/questions/9642732/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 2, "last_activity_date": 1432144935, "creation_date": 1432144935, "answer_id": 30357158, "question_id": 30356733, "link": "https://stackoverflow.com/questions/30356733/get-standard-output-and-error-output-in-different-files-in-c/30357158#30357158", "title": "get standard output and error output in different files in C", "body": "<p><code>write(1, ...</code> writes to standard output.  <code>write(2,...</code> writes to standard error. So all you have to do is reopen those file descriptors so that they're going into the designated files.  For example,</p>\n\n<pre><code>fd1 = open(\"outputfile\", O_WRONLY); dup2(fd1, 1);\nfd2 = open(\"errorfile\", O_WRONLY); dup2(fd2, 2);\n</code></pre>\n\n<p>After that, any standard output will go into <code>outputfile</code> and any error output will go to <code>errorfile</code>.</p>\n\n<p>But first, you have to parse the command-line options (found in <code>argv</code>, which is the first argument to <code>main</code>, whose length is given by the second argument to <code>main</code>) to find the <code>--out</code> and <code>--err</code> options and get their values.</p>\n"}, {"comments": [{"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "edited": false, "score": 0, "creation_date": 1432211284, "post_id": 30373083, "comment_id": 48837308, "body": "You shouldn&#39;t ask a question in the answers section. <code>Only have a little problem, when I build an exe appears a warning who says: warning:implicit declaration of function &#39;creat&#39;[-Wimplicit-function-declaration]  int out_fd = creat(&quot;out.txt&quot;,0644);  If anyone knows how to correct it please tell me. Thanks for all your help!</code>"}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "edited": false, "score": 0, "creation_date": 1432211389, "post_id": 30373083, "comment_id": 48837395, "body": "Include <code>fcntl.h</code> to get rid of <code>warning:implicit declaration of function &#39;creat&#39;[-Wimplicit-function-declaration]</code>"}], "tags": [], "owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "is_accepted": true, "score": 0, "last_activity_date": 1432209453, "creation_date": 1432209453, "answer_id": 30373083, "question_id": 30356733, "link": "https://stackoverflow.com/questions/30356733/get-standard-output-and-error-output-in-different-files-in-c/30373083#30373083", "title": "get standard output and error output in different files in C", "body": "<p>Well, finally I've got a code that seems that it works, I changed the command <code>cmd2 = write(1, \"hello world\", 11);</code> for  <code>cmd2 = system(\"echo $HOME\");</code> because I've troubles to write in a file a write function, changing this I achieve my objective fastly:</p>\n\n<pre><code>#include &lt;syscall.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[])\n{\n    const int cmd1 = system(\"sleep 5\");\n    int out_fd = creat(\"out.txt\",0644);\n    int err_fd = creat(\"err.txt\",0644);\n\n\n    if(out_fd &lt; 0){\n        //write(2, \"Can't open file out.txt\", strlen(\"Can't open file out.txt\"));\n        dup2(err_fd, 2);\n        write(2, \"Can't open file out.txt \\n\", strlen(\"Can't open file out.txt \\n\"));\n\n        return -1;\n        }else if(err_fd &lt; 0){\n            //write(2, \"Can't open file err.txt\", strlen(\"Can't open file err.txt\"));\n            dup2(err_fd, 2);\n            write(2, \"Can't open file err.txt \\n\", strlen(\"Can't open file err.txt \\n\"));\n\n            return -1;\n        }\n    if((cmd1 !=(0)))\n    {\n        //write(2, \"There is an error on command1\", strlen(\"There is an error on command1\"));\n        dup2(err_fd, 2);\n        write(2, \"Error on command1 \\n\", strlen(\"Error on command1 \\n\"));\n\n        return -1;\n        }\n    if((cmd1==(0)))\n    {\n\n        //write(1, \"success on command1\", strlen(\"success on command1\"));\n        dup2(out_fd, 1);\n        write(1, \"success on command1 \\n\", strlen(\"success on command1 \\n\"));\n        const int cmd2 = system(\"echo $HOME\");;\n\n        if(( cmd2==(0)))\n        {\n\n            //write(1, \"success on command2\", strlen(\"success on command2\"));\n            dup2(out_fd, 1);\n            write(1, \"success on command2 \\n\", strlen(\"success on command2 \\n\"));\n\n        }\n        else if(( cmd2 !=(0)))\n        {\n\n            //write(2, \"There is an error on command2\", strlen(\"There is an error on command2\"));\n            dup2(err_fd, 2);\n            write(2, \"Error on command2 \\n\", strlen(\"Error on command2 \\n\"));\n\n        }\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>Only have a little problem, when I build an exe appears a warning who says:\nwarning:implicit declaration of function 'creat'[-Wimplicit-function-declaration]</p>\n\n<p>int out_fd = creat(\"out.txt\",0644);</p>\n\n<p>If anyone knows how to correct it please tell me. Thanks for all your help!</p>\n"}], "owner": {"reputation": 103, "user_id": 4777395, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/53064cea6a9ed81dc7fe20f0ddd5c53d?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearn", "link": "https://stackoverflow.com/users/4777395/alwayslearn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 30373083, "answer_count": 3, "score": 0, "last_activity_date": 1432209453, "creation_date": 1432143651, "last_edit_date": 1432204140, "question_id": 30356733, "link": "https://stackoverflow.com/questions/30356733/get-standard-output-and-error-output-in-different-files-in-c", "title": "get standard output and error output in different files in C", "body": "<p>I'm trying to solve a problem because I'm learning to use system calls in C. I used a Ubuntu 12.04 64bit. </p>\n\n<p>I have this statement:</p>\n\n<p>Implement a code that allows to redirect the standard out of the two commands deferred into a file (standard output) and all error output into another file (error file). The names of the files will be specificated using out parameter (for the name of standard out) and parameter -err (for the name of error file).\nSyntax: after2 [args...] --do  [args...] --out --err</p>\n\n<p>It's not specified in the statement but I think that I need to use pipes. </p>\n\n<p>Also I can't use printf, scanf, getc...  family functions.</p>\n\n<p>And i have that code:</p>\n\n<pre><code>#include &lt;syscall.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(void) \n{\n    int cmd1 = system(\"sleep 5\");\n    int cmd2 = write(1, \"hello world\", 11);\n\n\n    if((cmd1 != (0)))\n    {\n        write(1,\"error in command 1\",18);\n    }\n    if((cmd1==(0)))\n    {\n        write(1, \"hello world\", 11);\n    }\n    return EXIT_SUCCESS;\n} \n</code></pre>\n\n<p>My question is, do you know some examples about similar questions? I look for some but I didn't find, also if you know other ways to help me I'm happy to accept. </p>\n\n<p>I post the code that I've now without erase the last version, by this way all people can see the evolution.</p>\n\n<pre><code>#include &lt;syscall.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(int argc, char* argv[])\n{\n    const char* cmd1 = system(\"sleep 5\");\n    const char* cmd2 = write(1, \"hello world\", 11);\n    int out_fd = creat(\"out.txt\",0644);\n    int err_fd = creat(\"err.txt\",0644);\n\n\n    if(out_fd &lt; 0){\n        write(2, \"Can't open file out.txt\", strlen(\"Can't open file out.txt\"));\n        dup2(err_fd, 2);\n        write(2, \"Can't open file out.txt \\n\", strlen(\"Can't open file out.txt \\n\"));\n\n        return -1;\n        }else if(err_fd &lt; 0){\n            write(2, \"Can't open file err.txt\", strlen(\"Can't open file err.txt\"));\n            dup2(err_fd, 2);\n            write(2, \"Can't open file err.txt \\n\", strlen(\"Can't open file err.txt \\n\"));\n\n            return -1;\n        }\n    if((cmd1 !=(0)))\n    {\n        write(2, \"There is an error on command1\", strlen(\"There is an error on command1\"));\n        dup2(err_fd, 2);\n        write(2, \"Error on command1 \\n\", strlen(\"Error on command1 \\n\"));\n\n        return -1;\n        }else if((cmd1==(0)))\n        {\n            write(1, \"success on command1\", strlen(\"success on command1\"));\n            dup2(out_fd, 1);\n            write(1, \"success on command1 \\n\", strlen(\"success on command1 \\n\"));\n            write(1, \"hello world\", 11);\n\n            if((cmd2==(0)))\n            {\n                write(1, \"hello world\", strlen(\"hello world\"));\n                dup2(out_fd, 1);\n                write(1, \"hello world \\n\", strlen(\"hello world \\n\"));\n\n            }\n            if((cmd2 != (0)))\n            {\n                write(2, \"There is an error on command2\", strlen(\"There is an error on command2\"));\n                dup2(err_fd, 2);\n                write(2, \"Error on command2 \\n\", strlen(\"Error on command2 \\n\"));\n\n            }\n        }\nreturn 0;\n}\n</code></pre>\n\n<p>This time prints in the shell <code>hello worldsuccess on command1There is an error on command2</code> and success on command1 and hello world in out.txt and There is an error on command2 in err.txt but I don't know why prints There is an error on command2 and in the same time prints hello world, any idea</p>\n\n<p>Obviously I've some errors yet but I'm not sure what I need to do if anyone can help me I'll be happy! </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c", "arrays", "hex", "driver", "uint32-t"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432143902, "post_id": 30356618, "comment_id": 48805530, "body": "You <i>can&#39;t</i> set a variable with type <code>uint32_t</code> to the string. C has &quot;strong typing&quot; meaning you can&#39;t loosely convert one type to another. You converted a binary value to a string. If you want it as a binary value you&#39;ll have to convert it back. But you could have converted the <code>uint32_t</code> to a hexadecimal string like this: <code>sprintf(hold, &quot;%lX&quot;, conversion)</code> although <code>hold[8]</code> won&#39;t be big enough to hold the 0 terminator that C strings have."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432144233, "post_id": 30356618, "comment_id": 48805739, "body": "BTW there is no such thing as a <code>base-10 unsigned int</code>. They are just binary bits. The difference between decimal, binary, hex, octal is just the human decision as to how they are represented in string format (apart from BCD representation, which isn&#39;t used in high level langages)."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4921576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce16afe33a65e1b77666a439a6b47b5?s=128&d=identicon&r=PG&f=1", "display_name": "IronMage", "link": "https://stackoverflow.com/users/4921576/ironmage"}, "edited": false, "score": 0, "creation_date": 1432143851, "post_id": 30356734, "comment_id": 48805504, "body": "My problem isn&#39;t the conversion of int -&gt; char[], it&#39;s that I need to be able to set a uint32_t equal to that char[]."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 41, "user_id": 4921576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce16afe33a65e1b77666a439a6b47b5?s=128&d=identicon&r=PG&f=1", "display_name": "IronMage", "link": "https://stackoverflow.com/users/4921576/ironmage"}, "edited": false, "score": 0, "creation_date": 1432144050, "post_id": 30356734, "comment_id": 48805624, "body": "@IronMage You cannot set <code>uint32_t</code> to be equal to a &quot;string&quot;. In fact there&#39;s no such thing as a <code>string</code> in C, you only have <code>char*</code>. You will <i>need</i> to convert the string representation of a number back to bits to be able to assign it to an <code>uint32_t</code>."}, {"owner": {"reputation": 41, "user_id": 4921576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce16afe33a65e1b77666a439a6b47b5?s=128&d=identicon&r=PG&f=1", "display_name": "IronMage", "link": "https://stackoverflow.com/users/4921576/ironmage"}, "edited": false, "score": 0, "creation_date": 1432144339, "post_id": 30356734, "comment_id": 48805809, "body": "How would I convert the string into a form that I can assign to a uint32_t ?"}], "tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": true, "score": 4, "last_activity_date": 1432144405, "last_edit_date": 1432144405, "creation_date": 1432143659, "answer_id": 30356734, "question_id": 30356618, "link": "https://stackoverflow.com/questions/30356618/converting-a-character-array-to-be-handled-as-a-hex-in-c/30356734#30356734", "title": "Converting a character array to be handled as a hex in C", "body": "<p>You should just use <code>snprintf</code>:</p>\n\n<pre><code>int x = 0xDA8F;\nchar buf[9];\nsnprintf(buf, sizeof(buf), \"%X\", x);   // Use %x for lowercase hex digits\n</code></pre>\n\n<p>To convert a hex representation of a number to an <code>int</code>, use <a href=\"http://www.cplusplus.com/reference/cstdlib/strtol/\" rel=\"nofollow\"><code>strtol</code></a> (the third argument to it lets you specify the base), or, since you want to assign it to an <code>unsigned</code> data type, <a href=\"http://www.cplusplus.com/reference/cstdlib/strtoul/\" rel=\"nofollow\"><code>strtoul</code></a>.</p>\n\n<p>The code would look something like this:</p>\n\n<pre><code>char* HexStr = \"8ADF4B\";\nuint32_t Num = strtoul(HexStr, NULL, 16);\nprintf(\"%X\\n\", Num);        // Outputs 8ADF4B\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4921576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce16afe33a65e1b77666a439a6b47b5?s=128&d=identicon&r=PG&f=1", "display_name": "IronMage", "link": "https://stackoverflow.com/users/4921576/ironmage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "accepted_answer_id": 30356734, "answer_count": 1, "score": 0, "last_activity_date": 1432144405, "creation_date": 1432143270, "question_id": 30356618, "link": "https://stackoverflow.com/questions/30356618/converting-a-character-array-to-be-handled-as-a-hex-in-c", "title": "Converting a character array to be handled as a hex in C", "body": "<p>I've just recently been required to work with C\u2014I normally work with Python and a bit of Java\u2014and I've been running into some issues. </p>\n\n<p>I created a function that converts a base-10 unsigned int into a character array that represents the equivalent hex. Now I need to be able to set a variable with type uint32_t to this 'hex'; what can I do to make sure this char[] is treated as an actual hex value?  </p>\n\n<p>The code is below:</p>\n\n<pre><code>int DecToHex(long int conversion, char * regParams[])\n{    \n    int hold[8];\n\n    for (int index = 0; conversion &gt; 0; index++)\n    {\n        hold[index] = conversion % 16;\n        conversion = conversion / 16;\n    }\n\n    int j = 0;\n\n    for (int i = 7; i &gt; -1; i--)\n    {\n        if (hold[i] &lt; 10 &amp;&amp; hold[i] &gt;= 0)\n        {\n            regParams[j] = '0' + hold[i];\n        }\n        else if (hold[i] &gt; 9 &amp;&amp; hold[i] &lt; 16)\n        {\n            regParams[j] = '7' + hold[i];\n        }\n        else\n        {\n            j--;\n        }\n        j++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "c", "audio", "audiotoolbox"], "owner": {"reputation": 1906, "user_id": 1051686, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/407548b0fad74b03c6c81fb72b51d441?s=128&d=identicon&r=PG", "display_name": "Devos50", "link": "https://stackoverflow.com/users/1051686/devos50"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1432143221, "creation_date": 1432143221, "question_id": 30356606, "link": "https://stackoverflow.com/questions/30356606/reading-a-pcm-encoded-16-bit-mono-wav-file-using-audiostreambasicdescription", "title": "Reading a PCM-encoded 16 bit mono wav file using AudioStreamBasicDescription", "body": "<p>I would like to read a PCM-encoded 16 bit mono wav file using the <code>AudioStreamBasicDescription</code> class and I'm currently using the following code to create the format:</p>\n\n<pre><code>AudioStreamBasicDescription format;\nformat.mSampleRate = 44100;\nformat.mFormatID = kAudioFormatLinearPCM;\nformat.mFormatFlags = (kLinearPCMFormatFlagIsBigEndian | kAudioFormatFlagIsPacked | kLinearPCMFormatFlagIsSignedInteger);\nformat.mBitsPerChannel = 16;\nformat.mChannelsPerFrame = 1;\nformat.mFramesPerPacket = 1;\nformat.mBytesPerPacket = 2;\n</code></pre>\n\n<p>Then I use the <code>ExtAudioFileSetProperty</code> method on the <code>ExtAudioFileRef</code> object:</p>\n\n<pre><code>err = ExtAudioFileSetProperty(eaf, kExtAudioFileProperty_ClientDataFormat, sizeof(format), &amp;format);\nif(noErr != err)\n{\n    // handle error\n    NSError *error = [NSError errorWithDomain:NSOSStatusErrorDomain code:err userInfo:nil];\n    NSLog(@\"%@\", error);\n}\n</code></pre>\n\n<p>The error printed is the following:</p>\n\n<pre><code>2015-05-20 19:26:12.773 MusicSense[33442:7245119] Error Domain=NSOSStatusErrorDomain Code=-50 \"The operation couldn\u2019t be completed. (OSStatus error -50.)\"\n</code></pre>\n\n<p>I believe there is a mistake in my <code>AudioStreamBasicDescriptor</code> but I'm not sure where. I've tried various other options but I get the same error. Did I make a mistake when defining the audio format or could there be something else?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1432142974, "post_id": 30356043, "comment_id": 48805000, "body": "Did you try to use a debugger, first client side, then server side ? And did you try to control return values of IO functions ? IMHO you should start that way to see exactly where the problem is."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1432143303, "post_id": 30356043, "comment_id": 48805177, "body": "You don&#39;t null-terminate <code>temp.c</code>, so printing it with <code>printf</code> invokes undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1432143125, "creation_date": 1432143125, "answer_id": 30356568, "question_id": 30356043, "link": "https://stackoverflow.com/questions/30356043/finding-ip-address-of-client-and-server-in-socket-programming/30356568#30356568", "title": "Finding IP Address of Client and Server in Socket Programming", "body": "<p>See the docs:</p>\n\n<blockquote>\n  <p>The  inet_ntoa()  function  converts the Internet host address in, given in network byte order, to a\n         string in IPv4 dotted-decimal notation.  The string is returned in a  statically  allocated  buffer,\n         <strong>which subsequent calls will overwrite</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1432146189, "creation_date": 1432146189, "answer_id": 30357532, "question_id": 30356043, "link": "https://stackoverflow.com/questions/30356043/finding-ip-address-of-client-and-server-in-socket-programming/30357532#30357532", "title": "Finding IP Address of Client and Server in Socket Programming", "body": "<p>Different problems in your code.</p>\n\n<p>As noticed by Colonel Thirty Two, you do not set temp to 0 before loading it, so you could have garbage in c[4] to c[9]</p>\n\n<p>You use 2 time inet_ntoa in same printf, what ends in printing both the second address as explained by David Schwartz</p>\n\n<p>You do not test all the functions</p>\n\n<p>You use same port in client for bind and connect. If you are trying to communicate on localhost, it cannot work since port is already bound for server. Unless you have a good reason to do so, you'd better bind client port to 0 meaning <em>choose any appropriate free port</em>.</p>\n\n<p>Once that's fixed, your programs correctly exchange data and show both addresses.</p>\n"}], "owner": {"reputation": 151, "user_id": 4346443, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/f23eab3ed01e01a64de69f87493a98ca?s=128&d=identicon&r=PG&f=1", "display_name": "ks_mani", "link": "https://stackoverflow.com/users/4346443/ks-mani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1284, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543835120, "creation_date": 1432141355, "question_id": 30356043, "link": "https://stackoverflow.com/questions/30356043/finding-ip-address-of-client-and-server-in-socket-programming", "title": "Finding IP Address of Client and Server in Socket Programming", "body": "<p>I have started practicing Socket Programming and I have written client and server program in C and they are communicating fine. However, I wish to find the IP address of Client as well as Server and print it in both the programs. </p>\n\n<p>Here is my client code ... </p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;arpa/inet.h&gt; \n\n\nstruct node \n{\n    int a;\n    int b;\n    char c[10];\n};\n\nint main(int argc, char const *argv[])\n{\n    int socketFD,port;\n    struct sockaddr_in serverAddress, clientAddress;\n    struct hostent *server;\n    if (argc &lt; 3) \n    {\n       fprintf(stderr,\"usage %s hostname port\\n\", argv[0]);\n       exit(0);\n    }\n    port = atoi(argv[2]);\n    socketFD = socket(AF_INET, SOCK_STREAM, 0);\n    if (socketFD &lt; 0) error(\"ERROR opening socket\");\n    server = gethostbyname(argv[1]);\n    if (server == NULL) \n    {\n        fprintf(stderr,\"ERROR, no such host\\n\");\n        exit(0);\n    }\n    bzero((char *) &amp;serverAddress, sizeof(serverAddress));\n    serverAddress.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr,(char *)&amp;serverAddress.sin_addr.s_addr, server-&gt;h_length);\n    serverAddress.sin_port = htons(port);\n\n    clientAddress.sin_family=AF_INET;\n    clientAddress.sin_port=htons(port);\n    clientAddress.sin_addr.s_addr=htonl(INADDR_ANY);\n\n    if (connect(socketFD,(struct sockaddr *)&amp;serverAddress,sizeof(serverAddress)) &lt; 0) error(\"ERROR connecting\");\n\n    struct node temp;\n    temp.a=21;\n    temp.b=32;\n    temp.c[0]='T';\n    temp.c[1]='E';\n    temp.c[2]='M';\n    temp.c[3]='P';\n    sendto(socketFD, (void *) &amp;temp, sizeof(temp), 0, (struct sockaddr*)&amp;serverAddress, sizeof(serverAddress));\n    printf(\"%s - %s\", inet_ntoa(serverAddress.sin_addr), inet_ntoa(clientAddress.sin_addr));\n\n\n    return 0;\n}\n</code></pre>\n\n<p>and here is my server code </p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;arpa/inet.h&gt; \n\n\nstruct node \n{\n    int a;\n    int b;\n    char c[10];\n};\n\n\nint main(int argc, char const *argv[])\n{\n    if (argc &lt; 2) \n    {\n        fprintf(stderr,\"ERROR, no port provided\\n\");\n        exit(1);\n    }\n    int socketFD,port,clientFD,clientLen;\n    struct sockaddr_in serverAddress, clientAddress;\n    if((socketFD=socket(AF_INET,SOCK_STREAM,0))&lt;0)\n    {\n        printf(\"Unable to create socket\\n\");\n        return 1;\n    }\n    bzero((char*)&amp;serverAddress,sizeof(serverAddress));\n    port=atoi(argv[1]);\n    serverAddress.sin_family=AF_INET;\n    serverAddress.sin_port=htons(port);\n    serverAddress.sin_addr.s_addr=htonl(INADDR_ANY);\n\n    if((bind(socketFD,(struct sockaddr *)&amp;serverAddress, sizeof(serverAddress)))&lt;0)\n    {\n        printf(\"Error on binding\\n\");\n        return 1;   \n    }\n    listen(socketFD,5);\n    clientLen=sizeof(clientAddress);\n    clientFD=accept(socketFD, (struct sockaddr *)&amp;clientAddress, &amp;clientLen);\n\n    struct node temp;\n    recvfrom(clientFD, (void *)&amp;temp, sizeof(temp), 0, (struct sockaddr*)&amp;clientAddress,  &amp;clientLen); \n\n    printf(\"%d-%d-%s\\n\", temp.a, temp.b, temp.c);\n    printf(\"%s - %s\", inet_ntoa(serverAddress.sin_addr), inet_ntoa(clientAddress.sin_addr));\n     close(clientFD);\n    return 0;\n}\n</code></pre>\n\n<p>The problem I am facing with server program is that in the output it is printing the value given to struct variable followed by some unknown characters and the IP address of client and server is printed as 0.0.0.0 for both..</p>\n\n<p>What is the problem and How to solve it?? </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 454, "user_id": 2900943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/106a1b43056af0079e4983663b1b2e63?s=128&d=identicon&r=PG&f=1", "display_name": "Happington", "link": "https://stackoverflow.com/users/2900943/happington"}, "edited": false, "score": 3, "creation_date": 1432140516, "post_id": 30355768, "comment_id": 48803670, "body": "What data type is &quot;ball&quot;?  What data type is getX() expecting?  They don&#39;t match."}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1432140663, "post_id": 30355768, "comment_id": 48803763, "body": "You are passing a <code>ball</code> object that is a type that doesn&#39;t match your <code>getX(...)</code>; function."}, {"owner": {"reputation": 129, "user_id": 4709078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GhQFiigUQEQ/AAAAAAAAAAI/AAAAAAAAACQ/1rJvXqJtCMA/photo.jpg?sz=128", "display_name": "Allydra", "link": "https://stackoverflow.com/users/4709078/allydra"}, "reply_to_user": {"reputation": 454, "user_id": 2900943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/106a1b43056af0079e4983663b1b2e63?s=128&d=identicon&r=PG&f=1", "display_name": "Happington", "link": "https://stackoverflow.com/users/2900943/happington"}, "edited": false, "score": 0, "creation_date": 1432141109, "post_id": 30355768, "comment_id": 48804005, "body": "@Happington getX() expects a GObject, no? And ball is a GOval, which is a GObject."}, {"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1432141272, "post_id": 30355768, "comment_id": 48804093, "body": "Show us the declaration of <code>ball</code> and the prototypes of your functions. I expect you are confused about c data types, conflating them with the concept of an object from another language."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432147897, "post_id": 30355768, "comment_id": 48807851, "body": "Shouldn&#39;t you be using <code>-getWidth(ball)</code> in the second conditional, and using <code>&lt; 0</code> not <code>&lt;= 0</code>? And if the answer from @Tarik is correct, something like <code>ball.width</code> instead?"}], "answers": [{"tags": [], "owner": {"reputation": 8749, "user_id": 990750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nIvmG.jpg?s=128&g=1", "display_name": "Tarik", "link": "https://stackoverflow.com/users/990750/tarik"}, "is_accepted": false, "score": 0, "last_activity_date": 1432141286, "last_edit_date": 1432141286, "creation_date": 1432140740, "answer_id": 30355866, "question_id": 30355768, "link": "https://stackoverflow.com/questions/30355768/c-bouncing-ball-gives-error/30355866#30355866", "title": "C Bouncing Ball Gives Error", "body": "<p>Having looked up the online reference of the Stanford C++ library, a GOval is a subclass of GObject wich has a getX() method. As such it should use <code>ball.getX ()</code></p>\n\n<p>See <a href=\"http://stanford.edu/~stepp/cppdoc/\" rel=\"nofollow\">http://stanford.edu/~stepp/cppdoc/</a></p>\n"}], "owner": {"reputation": 129, "user_id": 4709078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GhQFiigUQEQ/AAAAAAAAAAI/AAAAAAAAACQ/1rJvXqJtCMA/photo.jpg?sz=128", "display_name": "Allydra", "link": "https://stackoverflow.com/users/4709078/allydra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432236801, "creation_date": 1432140430, "last_edit_date": 1432141465, "question_id": 30355768, "link": "https://stackoverflow.com/questions/30355768/c-bouncing-ball-gives-error", "title": "C Bouncing Ball Gives Error", "body": "<p>I'm making a program that bounces a ball with C. I'm using the Stanford Portable Library to do it: ball is a GOval. This code should successfully bounce the ball, but when I run it, it says, \"error: getX: Illegal argument type\" The following is the only usage thus far of getX():</p>\n\n<pre><code>if (getX(ball) + getWidth(ball) &gt;= getWidth(window))\n    {\n        velocityx = -velocityx;\n    } \nelse if (getX(ball) &lt;= 0)\n    {\n        velocityx = -velocityx;\n    }\n</code></pre>\n\n<p>I don't understand how this could be an error, getX returns the X location of a GObject, which ball is.\nI can't use anything other than C or GObjects, this is for a class.\nThe example code of a bouncing ball <a href=\"http://pastebin.com/45L8cMM2\" rel=\"nofollow\">here</a> given by the instructor works.</p>\n"}, {"tags": ["c", "pointers", "struct", "function-pointers", "forward-declaration"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 6, "creation_date": 1432140387, "post_id": 30355701, "comment_id": 48803585, "body": "These are function pointer declarations. <a href=\"http://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\" title=\"how do function pointers in c work\">stackoverflow.com/questions/840501/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1432141553, "post_id": 30355701, "comment_id": 48804260, "body": "Post the code here.  Links  fail over time."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1432141961, "post_id": 30355701, "comment_id": 48804482, "body": "It&#39;s not his code, it is copyright."}, {"owner": {"reputation": 562, "user_id": 3877832, "user_type": "registered", "profile_image": "https://graph.facebook.com/684873665/picture?type=large", "display_name": "polarysekt", "link": "https://stackoverflow.com/users/3877832/polarysekt"}, "edited": false, "score": 1, "creation_date": 1432145938, "post_id": 30355701, "comment_id": 48806757, "body": "It&#39;s not strict. I&#39;m going to edit."}], "answers": [{"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": true, "score": 2, "last_activity_date": 1432150614, "creation_date": 1432150614, "answer_id": 30358889, "question_id": 30355701, "link": "https://stackoverflow.com/questions/30355701/understanding-c-struct/30358889#30358889", "title": "Understanding C struct", "body": "<p>They are <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">function pointers</a> and the syntax is: <code>return-type (*pointer_name)(args)</code>.  </p>\n\n<p>However, the developer's using a special technique, denoted by the first argument, which is always a pointer to a <code>_Parser</code> struct. It indeed allows a simple form of Object Oriented Programming, where classes can have methods that specifically act on a certain object instance that have to be manually set up and handled, though. Further information in @paxdiablo's excellent answer <a href=\"https://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c\">here</a>.</p>\n\n<p>Note: there're multiple violations to ISO C because you're not allowed to prefix names with a <code>_</code> and a capital name. More info <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier/228797#228797\">here</a>.</p>\n"}], "owner": {"reputation": 1572, "user_id": 1315800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92c5f76c79c00f979e93128bff2bb855?s=128&d=identicon&r=PG", "display_name": "Chamila Wijayarathna", "link": "https://stackoverflow.com/users/1315800/chamila-wijayarathna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 30358889, "answer_count": 1, "score": 0, "last_activity_date": 1432150614, "creation_date": 1432140202, "last_edit_date": 1432148886, "question_id": 30355701, "link": "https://stackoverflow.com/questions/30355701/understanding-c-struct", "title": "Understanding C struct", "body": "<p>I'm trying to understand what's happening in the following C struct:</p>\n\n<pre><code>/* EXCERPT from LINES 59-90 */\n/* parse.h\n * Copyright (c) 2011, Peter Ohler\n * All rights reserved.\n */\n\ntypedef struct _ParseInfo {\n    // used for the string parser\n    const char      *json;\n    const char      *cur;\n    const char      *end;\n    // used for the stream parser\n    struct _Reader  rd;\n\n    struct _Err     err;\n    struct _Options options;\n    VALUE       handler;\n    struct _ValStack    stack;\n    CircArray       circ_array;\n    int         expect_value;\n    VALUE       proc;\n    VALUE       (*start_hash)(struct _ParseInfo *pi);\n    void        (*end_hash)(struct _ParseInfo *pi);\n    VALUE       (*hash_key)(struct _ParseInfo *pi, const char *key, size_t klen);\n    void        (*hash_set_cstr)(struct _ParseInfo *pi, Val kval, const char *str, size_t len, const char *orig);\n    void        (*hash_set_num)(struct _ParseInfo *pi, Val kval, NumInfo ni);\n    void        (*hash_set_value)(struct _ParseInfo *pi, Val kval, VALUE value);\n\n    VALUE       (*start_array)(struct _ParseInfo *pi);\n    void        (*end_array)(struct _ParseInfo *pi);\n    void        (*array_append_cstr)(struct _ParseInfo *pi, const char     *str, size_t len, const char *orig);\n    void        (*array_append_num)(struct _ParseInfo *pi, NumInfo ni);\n    void        (*array_append_value)(struct _ParseInfo *pi, VALUE value);\n\n    void        (*add_cstr)(struct _ParseInfo *pi, const char *str, size_t len, const char *orig);\n    void        (*add_num)(struct _ParseInfo *pi, NumInfo ni);\n    void        (*add_value)(struct _ParseInfo *pi, VALUE val);\n} *ParseInfo;\n</code></pre>\n\n<p>from <a href=\"https://github.com/ohler55/oj/blob/master/ext/oj/parse.h#L59\" rel=\"nofollow\">https://github.com/ohler55/oj/blob/master/ext/oj/parse.h#L59</a>:</p>\n\n<p>I don't understand what's going on from lines #74 on (#22 in above listing). </p>\n\n<p>Starting with:</p>\n\n<pre><code>    VALUE       (*start_hash)(struct _ParseInfo *pi);\n</code></pre>\n\n<p>Can someone explain what these lines are doing?</p>\n"}, {"tags": ["c++", "c", "sse", "simd", "avx"], "comments": [{"owner": {"reputation": 514, "user_id": 2452562, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/262533d22c0be8926d9f00db1f39bdd6?s=128&d=identicon&r=PG&f=1", "display_name": "Ken P", "link": "https://stackoverflow.com/users/2452562/ken-p"}, "edited": false, "score": 1, "creation_date": 1432140659, "post_id": 30355620, "comment_id": 48803759, "body": "As a general rule, you should probably check for a capability before you use it.  However, the CPUID instructions that determine whether you have SSE3 or AVX will also determine whether you have SSE2 or MMX.  If you just save the outputs of those CPUID instructions to appropriate variables, you can perform a single bit test whenever you want to use a specific instruction."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432141144, "post_id": 30355620, "comment_id": 48804031, "body": "This has come up before on SO, but I can&#39;t seem to find the duplicate at the moment..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1432141938, "post_id": 30355620, "comment_id": 48804473, "body": "Intel CPUs are always backward compatible. Therefore if it supports an instruction set then it&#39;ll support all older versions"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1432144433, "post_id": 30355620, "comment_id": 48805868, "body": "See also: <a href=\"http://stackoverflow.com/a/17749005/253056\">stackoverflow.com/a/17749005/253056</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1432193843, "post_id": 30356591, "comment_id": 48825463, "body": "I don&#39;t think it&#39;s a good idea to make separate executable for different instruction sets.  One executable using a <a href=\"https://stackoverflow.com/questions/23676426/disable-avx2-functions-on-non-haswell-processors/23677889#23677889\">CPU dispatcher</a> is more ideal in my opinion."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1432222421, "post_id": 30356591, "comment_id": 48845949, "body": "The <code>&#47;arch:AVX</code> switch applies to an entire module, not just a function, but yes in theory you could create distinct cpp files for each function and compile with different build settings."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1432222495, "post_id": 30356591, "comment_id": 48845998, "body": "he main issue is that using virtual functions (or function pointers) adds overhead so it really depends on how much work you are doing in the &#39;dispatched&#39; functions. This design, was used by the original D3DXMath library. It as easy to optimize for specific CPUs and detect them at runtime, but the result loses a lot of performance for small operations. That is why DirectXMath for Windows uses only SSE and SSE2 so it can be aggressive inlined and has no &#39;guarded paths&#39; or &#39;virtual functions&#39; to use."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1432277861, "post_id": 30356591, "comment_id": 48868891, "body": "I agree you might not want function pointers for functions that you would normally use static inline with. I&#39;m not sure how to use a dispatcher in that case. In my link above someone mentioned using self modifying code with <code>memcpy</code>. That could solve the function pointer problem and still dispatch. I have not done that yet."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1432303565, "post_id": 30356591, "comment_id": 48885334, "body": "Any solution involving self-modifying code is problematic since that&#39;s basically indistinguishable from malware. You&#39;d have to create a non-NX memory area and jump to it."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1432307313, "post_id": 30356591, "comment_id": 48887917, "body": "Good point, I have not created self modifying code since 68k assembly days. In my case I use the dispatcher for functions where static inline is not useful. E.g. I put several static inline functions in one module and have only one function in the module which is external which I call with the dispatcher."}, {"owner": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "edited": false, "score": 0, "creation_date": 1434407400, "post_id": 30356591, "comment_id": 49755382, "body": "I&#39;ll wait for clang&#39;s ifunc support as in recent gcc: <a href=\"https://gcc.gnu.org/wiki/FunctionMultiVersioning\" rel=\"nofollow noreferrer\">Function Multi Versioning</a>"}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 10, "last_activity_date": 1594696542, "last_edit_date": 1594696542, "creation_date": 1432143161, "answer_id": 30356591, "question_id": 30355620, "link": "https://stackoverflow.com/questions/30355620/are-older-simd-versions-available-when-using-newer-ones/30356591#30356591", "title": "Are older SIMD-versions available when using newer ones?", "body": "<p>In general, these have been additive but keep in mind that there are differences between Intel and AMD support for these over the years.</p>\n<p>If you have AVX, then you can assume SSE, SSE2, SSE3, SSSE3, SSE4.1, and SSE 4.2 as well. Remember that to use AVX you also need to validate the OSXSAVE CPUID bit is set to ensure the OS you are using actually supports saving the AVX registers as well.</p>\n<p>You should still explicitly check for all the CPUID support you use in your code for robustness (say checking for AVX, OSXSAVE, SSE4, SSE3, SSSE3 at the same time to guard your AVX codepaths).</p>\n<pre><code>#include &lt;intrin.h&gt;\n\ninline bool IsAVXSupported()\n{\n#if defined(_M_IX86 ) || defined(_M_X64)\n   int CPUInfo[4] = {-1};\n   __cpuid( CPUInfo, 0 );\n\n   if ( CPUInfo[0] &lt; 1  )\n       return false;\n\n    __cpuid(CPUInfo, 1 );\n\n    int ecx = 0x10000000 // AVX\n              | 0x8000000 // OSXSAVE\n              | 0x100000 // SSE 4.2\n              | 0x80000 // SSE 4.1\n              | 0x200 // SSSE3\n              | 0x1; // SSE3\n\n    if ( ( CPUInfo[2] &amp; ecx ) != ecx )\n        return false;\n\n    return true;\n#else\n    return false;\n#endif\n}\n</code></pre>\n<p>SSE and SSE2 are required for all processors capable of x64 native, so they are good baseline assumptions for all code. Windows 8.0, Windows 8.1, and Windows 10 explicitly require SSE and SSE2 support even for x86 architectures so those instruction sets are pretty ubiquitous. In other words, if you fail a check for SSE or SSE2, just exit the app with a fatal error.</p>\n<pre><code>#include &lt;windows.h&gt;\n\ninline bool IsSSESupported()\n{\n#if defined(_M_IX86 ) || defined(_M_X64)\n   return ( IsProcessorFeaturePresent( PF_XMMI_INSTRUCTIONS_AVAILABLE ) != 0 &amp;&amp; IsProcessorFeaturePresent( PF_XMMI64_INSTRUCTIONS_AVAILABLE ) != 0 );\n#else\n    return false;\n#endif\n}\n</code></pre>\n<p>-or-</p>\n<pre><code>#include &lt;intrin.h&gt;\n\ninline bool IsSSESupported()\n{\n#if defined(_M_IX86 ) || defined(_M_X64)\n   int CPUInfo[4] = {-1};\n   __cpuid( CPUInfo, 0 );\n\n   if ( CPUInfo[0] &lt; 1  )\n       return false;\n\n    __cpuid(CPUInfo, 1 );\n\n    int edx = 0x4000000 // SSE2\n              | 0x2000000; // SSE\n\n    if ( ( CPUInfo[3] &amp; edx ) != edx )\n        return false;\n\n    return true;\n#else\n    return false;\n#endif\n}\n</code></pre>\n<p>Also, keep in mind that MMX, x87 FPU, and <a href=\"http://en.wikipedia.org/wiki/3DNow!\" rel=\"nofollow noreferrer\">AMD 3DNow!</a>* are all deprecated instruction sets for x64 native, so you shouldn't be using them actively anymore in newer code. A  good rule of thumb is to avoid using any intrinsic that returns a <code>__m64</code> or takes a <code>__m64</code> data type.</p>\n<p>You may want to check out this <a href=\"https://walbourn.github.io/directxmath-sse-sse2-and-arm-neon/\" rel=\"nofollow noreferrer\">DirectXMath blog series</a> with notes on many of these instruction sets and the relevant processor support requirements.</p>\n<p><strong>Note</strong> (*) - All the AMD 3DNow! instructions are deprecated except for <code>PREFETCH</code> and <code>PREFETCHW</code> which were carried forward. First generation Intel64 processors lacked support for these instructions, but they were later added as they are considered part of the core X64 instruction set. Windows 8.1 and Windows 10 x64 require <code>PREFETCHW</code> in particular, although the test is a little odd. Most Intel CPUs prior to Broadwell do not in fact report support for <code>PREFETCHW</code> through CPUID, but they treat the opcode as a no-op rather than throw an 'illegal instruction' exception. As such, the test here is (a) is it supported by CPUID, and (b) if not, does <code>PREFETCHW</code> at least not throw an exception.</p>\n<p>Here's some test code for Visual Studio that demonstrates the <code>PREFETCHW</code> test as well as many other CPUID bits for the x86 and x64 platforms.</p>\n<pre><code>#include &lt;intrin.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;excpt.h&gt;\n\nvoid main()\n{\n   unsigned int x = _mm_getcsr();\n   printf(&quot;%08X\\n&quot;, x );\n\n   bool prefetchw = false;\n\n   // See http://msdn.microsoft.com/en-us/library/hskdteyh.aspx\n   int CPUInfo[4] = {-1};\n   __cpuid( CPUInfo, 0 );\n\n   if ( CPUInfo[0] &gt; 0 )\n   {\n       __cpuid(CPUInfo, 1 );\n\n       // EAX\n       {\n           int stepping = (CPUInfo[0] &amp; 0xf);\n           int basemodel = (CPUInfo[0] &gt;&gt; 4) &amp; 0xf;\n           int basefamily = (CPUInfo[0] &gt;&gt; 8) &amp; 0xf;\n           int xmodel = (CPUInfo[0] &gt;&gt; 16) &amp; 0xf;\n           int xfamily = (CPUInfo[0] &gt;&gt; 20) &amp; 0xff;\n\n           int family = basefamily + xfamily;\n           int model = (xmodel &lt;&lt; 4) | basemodel;\n\n           printf(&quot;Family %02X, Model %02X, Stepping %u\\n&quot;, family, model, stepping );\n       }\n\n       // ECX\n       if ( CPUInfo[2] &amp; 0x20000000 ) // bit 29\n          printf(&quot;F16C\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x10000000 ) // bit 28\n          printf(&quot;AVX\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x8000000 ) // bit 27\n          printf(&quot;OSXSAVE\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x400000 ) // bit 22\n          printf(&quot;MOVBE\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x100000 ) // bit 20\n          printf(&quot;SSE4.2\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x80000 ) // bit 19\n          printf(&quot;SSE4.1\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x2000 ) // bit 13\n          printf(&quot;CMPXCHANG16B\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x1000 ) // bit 12\n          printf(&quot;FMA3\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x200 ) // bit 9\n          printf(&quot;SSSE3\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x1 ) // bit 0\n          printf(&quot;SSE3\\n&quot;);\n\n       // EDX\n       if ( CPUInfo[3] &amp; 0x4000000 ) // bit 26\n           printf(&quot;SSE2\\n&quot;);\n\n       if ( CPUInfo[3] &amp; 0x2000000 ) // bit 25\n           printf(&quot;SSE\\n&quot;);\n\n       if ( CPUInfo[3] &amp; 0x800000 ) // bit 23\n           printf(&quot;MMX\\n&quot;);\n   }\n   else\n       printf(&quot;CPU doesn't support Feature Identifiers\\n&quot;);\n\n   if ( CPUInfo[0] &gt;= 7 )\n   {\n       __cpuidex(CPUInfo, 7, 0);\n\n       // EBX\n       if ( CPUInfo[1] &amp; 0x100 ) // bit 8\n         printf(&quot;BMI2\\n&quot;);\n\n       if ( CPUInfo[1] &amp; 0x20 ) // bit 5\n         printf(&quot;AVX2\\n&quot;);\n\n       if ( CPUInfo[1] &amp; 0x8 ) // bit 3\n         printf(&quot;BMI\\n&quot;);\n   }\n   else\n       printf(&quot;CPU doesn't support Structured Extended Feature Flags\\n&quot;);\n\n   // Extended features\n   __cpuid( CPUInfo, 0x80000000 );\n\n   if ( CPUInfo[0] &gt; 0x80000000 )\n   {\n       __cpuid(CPUInfo, 0x80000001 );\n\n       // ECX\n       if ( CPUInfo[2] &amp; 0x10000 ) // bit 16\n           printf(&quot;FMA4\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x800 ) // bit 11\n           printf(&quot;XOP\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x100 ) // bit 8\n       {\n           printf(&quot;PREFETCHW\\n&quot;);\n           prefetchw = true;\n       }\n\n       if ( CPUInfo[2] &amp; 0x80 ) // bit 7\n           printf(&quot;Misalign SSE\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x40 ) // bit 6\n           printf(&quot;SSE4A\\n&quot;);\n\n       if ( CPUInfo[2] &amp; 0x1 ) // bit 0\n           printf(&quot;LAHF/SAHF\\n&quot;);\n\n       // EDX\n       if ( CPUInfo[3] &amp; 0x80000000 ) // bit 31\n           printf(&quot;3DNow!\\n&quot;);\n\n       if ( CPUInfo[3] &amp; 0x40000000 ) // bit 30\n           printf(&quot;3DNowExt!\\n&quot;);\n\n       if ( CPUInfo[3] &amp; 0x20000000 ) // bit 29\n           printf(&quot;x64\\n&quot;);\n\n       if ( CPUInfo[3] &amp; 0x100000 ) // bit 20\n           printf(&quot;NX\\n&quot;);\n   }\n   else\n       printf(&quot;CPU doesn't support Extended Feature Identifiers\\n&quot;);\n\n   if ( !prefetchw )\n   {\n       bool illegal = false;\n\n       __try\n       {\n           static const unsigned int s_data = 0xabcd0123;\n\n           _m_prefetchw(&amp;s_data);\n       }\n       __except (EXCEPTION_EXECUTE_HANDLER)\n       {\n           illegal = true;\n       }\n\n       if (illegal)\n       {\n           printf(&quot;PREFETCHW is an invalid instruction on this processor\\n&quot;);\n       }\n   }\n}\n</code></pre>\n<p><strong>UPDATE:</strong> The fundamental challenge, of course, is how do you handle systems that lack support for AVX? While the instruction set is useful, the biggest benefit of having an AVX-capable processor is the ability to use the <code>/arch:AVX</code> build switch which enables the global use of the <a href=\"http://en.wikipedia.org/wiki/VEX_prefix\" rel=\"nofollow noreferrer\">VEX prefix</a> for better SSE/SSE2 code-gen. The only problem is the resulting code DLL/EXE is not compatible with systems that lack AVX support.</p>\n<p>As such, for Windows, ideally you should build one EXE for non-AVX systems (assuming SSE/SSE2 only so use <code>/arch:SSE2</code> instead for x86 code; this setting is implicit for x64 code), a different EXE that is optimized for AVX (using <code>/arch:AVX</code>), and then use CPU detection to determine which EXE to use for a given system.</p>\n<p>Luckily with Xbox One, we can just always build with <code>/arch::AVX</code> since it's a fixed platform...</p>\n<p><strong>UPDATE 2:</strong> For clang/LLVM, you should use slight dikyfferent intriniscs for <code>CPUID</code>:</p>\n<pre><code>if defined(__clang__) || defined(__GNUC__)\n    __cpuid(1, CPUInfo[0], CPUInfo[1], CPUInfo[2], CPUInfo[3]);\n#else\n    __cpuid(CPUInfo, 1);\n#endif\n</code></pre>\n<pre><code>if defined(__clang__) || defined(__GNUC__)\n    __cpuid_count(7, 0, CPUInfo[0], CPUInfo[1], CPUInfo[2], CPUInfo[3]);\n#else\n    __cpuidex(CPUInfo, 7, 0);\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1478178196, "post_id": 30356721, "comment_id": 68054431, "body": "To be fair, this mixing issue only occurs when you mix non-VEX code with VEX using code (i.e., mix AVX or AVX2 with earlier 2 operand SSE instructions). Other than that it&#39;s fine and necessary to mix between generations - necessary because each extension isn&#39;t a complete useful USA by itself but builds on the last one."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1478454614, "post_id": 30356721, "comment_id": 68150373, "body": "@BeeOnRope, It&#39;s ok to mix, but you need to protect yourself from the issue I was talking about. See - <a href=\"http://stackoverflow.com/questions/7839925/using-avx-cpu-instructions-poor-performance-without-archavx\" title=\"using avx cpu instructions poor performance without archavx\">stackoverflow.com/questions/7839925/&hellip;</a>"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1478458043, "post_id": 30356721, "comment_id": 68151671, "body": "Yeah exactly, but even that question is a bit unclear since it doesn&#39;t point out that almost all interesting SSE instructions have a VEX-encoded version - including 128-bit variants. Many people still loosely call those &quot;SSE&quot; instructions. For example, you&#39;ll hear that <code>pshufb</code> is an <code>SSE3</code> instruction. Indeed an invocation like <code>phsufb xmm0, xmm1</code> creates an non-VEX encoding that would cause the performance problem you mention. Simply changing that to the identically behaved <code>pshufb xmm0, xmm0, xmm1</code>, however, changes it to VEX-encoding and avoids the issue."}], "tags": [], "owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "is_accepted": false, "score": 4, "last_activity_date": 1432143628, "creation_date": 1432143628, "answer_id": 30356721, "question_id": 30355620, "link": "https://stackoverflow.com/questions/30355620/are-older-simd-versions-available-when-using-newer-ones/30356721#30356721", "title": "Are older SIMD-versions available when using newer ones?", "body": "<p>As a general rule - don't mix different generations of SSE / AVX unless you have to. If you do, make sure you use vzeroupper or similar state clearing instructions, otherwise you may drag partial values and unknowingly create false dependencies, since most of the registers are shared between the modes\nEven when clearing, switching between modes may cause penalties, depending on the exact micro architecture.</p>\n\n<p>Further reading - <a href=\"https://software.intel.com/sites/default/files/m/d/4/1/d/8/11MC12_Avoiding_2BAVX-SSE_2BTransition_2BPenalties_2Brh_2Bfinal.pdf\" rel=\"nofollow\">https://software.intel.com/sites/default/files/m/d/4/1/d/8/11MC12_Avoiding_2BAVX-SSE_2BTransition_2BPenalties_2Brh_2Bfinal.pdf</a></p>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 3, "last_activity_date": 1478147299, "creation_date": 1478147299, "answer_id": 40393887, "question_id": 30355620, "link": "https://stackoverflow.com/questions/30355620/are-older-simd-versions-available-when-using-newer-ones/40393887#40393887", "title": "Are older SIMD-versions available when using newer ones?", "body": "<p><strong>See Chuck's answer for good advice on what you should do.  See this answer for a literal answer to the question asked, in case you're curious.</strong></p>\n\n<hr>\n\n<p>AVX support absolutely guarantees support for all <em>Intel</em> SSE* instruction sets, since it includes VEX-encoded versions of all of them.  As Chuck points out, you can check for previous ones at the same time with a bitmask, without bloating your code, but don't sweat it.</p>\n\n<p>Note that POPCNT, TZCNT, and stuff like that are not part of SSE-anything.  <a href=\"http://www.felixcloutier.com/x86/POPCNT.html\" rel=\"nofollow noreferrer\">POPCNT</a> has its own feature bit.  <a href=\"http://www.felixcloutier.com/x86/LZCNT.html\" rel=\"nofollow noreferrer\">LZCNT</a> has its own feature bit, too, since AMD introduced it separately from BMI1.  <a href=\"http://www.felixcloutier.com/x86/TZCNT.html\" rel=\"nofollow noreferrer\">TZCNT</a> is just part of BMI1, though.  Since some BMI1 instructions use VEX encodings, even latest-generation Pentium/Celeron CPUs (like Skylake Pentium) don't have BMI1. :(  I think Intel just wanted to omit AVX/AVX2, probably so they could sell CPUs with faulty upper-lanes of execution units as Pentiums, and they do this by disabling VEX support in the decoders.</p>\n\n<hr>\n\n<p>Intel SSE support has been incremental in all CPUs released so far.  SSE4.1 implies SSSE3, SSE3, SSE2, and SSE.  And SSE4.2 implies all of the preceding.  I'm not sure if any official x86 documentation precludes the possibility of a CPU with SSE4.1 support but not SSSE3.  (i.e. leave out PSHUFB, which is possibly expensive-to-implement.)  It's extremely unlikely in practice, though, since this would violate many people's assumptions.  As I said, it might even be officially forbidden, but I didn't check carefully.</p>\n\n<hr>\n\n<p>AVX does not include AMD SSE4a or AMD XOP.  AMD extensions have to be checked-for specially.  Also note that the newest AMD CPUs are dropping XOP support.  (Intel never adopted it, so most people don't write code to take advantage of it, so for AMD those transistors are mostly wasted.  It does have some nice stuff, like a 2-source byte permute, allowing a byte LUT twice as wide as PSHUFB, without the in-lane limitation of AVX2's VPSHUFB ymm).</p>\n\n<hr>\n\n<p><strong>SSE2 is baseline for the x86-64 architecture</strong>.  You do not have to check for SSE or SSE2 support in 64-bit builds.  I forget if MMX is baseline, too.  Almost certainly.</p>\n\n<p>The SSE instruction set includes some instructions that operate on MMX registers.  (e.g. <a href=\"http://www.felixcloutier.com/x86/PMAXSW.html\" rel=\"nofollow noreferrer\"><code>PMAXSW mm1, mm2/m64</code></a> was new with SSE.  The XMM version is part of SSE2.)  Even a 32-bit CPU supporting SSE needs to have MMX registers.  It would be madness to have MMX registers but only support the SSE instructions that use them, not the original MMX instructions (e.g. <a href=\"http://www.felixcloutier.com/x86/MOVD:MOVQ.html\" rel=\"nofollow noreferrer\"><code>movq mm0, [mem]</code></a>).  However, I haven't found anything definitive that rules out the possibility of an x86-based <a href=\"http://www.statemaster.com/encyclopedia/DeathStation-9000\" rel=\"nofollow noreferrer\">Deathstation 9000</a> with SSE but not MMX CPUID feature bits, but I didn't wade into Intel's official x86 manuals.  (See the <a href=\"/questions/tagged/x86\" class=\"post-tag\" title=\"show questions tagged &#39;x86&#39;\" rel=\"tag\">x86</a> tag wiki for links).</p>\n\n<p>Don't use MMX anyway, it's generally slower even if you only have 64 bits at a time to work on, in the low half of an XMM register.  The latest CPUs (like Intel Skylake) have lower throughput for the MMX versions of some instructions than for the XMM version.  In some cases, even worse latency.  For example, according to <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">Agner Fog's testing</a>, <code>PACKSSWB mm0, mm1</code> is 3 uops, with 2c latency, on Skylake.  The 128b and 256b XMM / YMM versions are 1 uop, with 1c latency.</p>\n"}], "owner": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 3, "accepted_answer_id": 30356591, "answer_count": 3, "score": 13, "last_activity_date": 1594696542, "creation_date": 1432139958, "last_edit_date": 1432144453, "question_id": 30355620, "link": "https://stackoverflow.com/questions/30355620/are-older-simd-versions-available-when-using-newer-ones", "title": "Are older SIMD-versions available when using newer ones?", "body": "<p>When I can use SSE3 or AVX, are then older SSE versions as SSE2 or MMX available -<br>\nor do I still need to check for them separately?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1432139499, "post_id": 30355436, "comment_id": 48802973, "body": "Hint: when you do <code>current-&gt;gds = (info_t *)malloc(sizeof(info_t));</code>, what value does <code>current</code> have?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 3, "creation_date": 1432139512, "post_id": 30355436, "comment_id": 48802990, "body": "<code>if (current == NULL) {     current-&gt;gds</code> - dereferencing a <code>NULL</code> pointer."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1432139591, "post_id": 30355436, "comment_id": 48803048, "body": "@molbdnilo Oops, I broke your hint. Didn&#39;t see it when I posted, sorry."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432140034, "post_id": 30355436, "comment_id": 48803351, "body": "Indeed all those four fields are using invalid <code>current</code> pointer. No matter whether the list exists or not, you still need to allocate memory for the struct, you should do that first and then either add it to the list or use it as the list pointer."}], "answers": [{"tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 2, "last_activity_date": 1432140183, "creation_date": 1432140183, "answer_id": 30355690, "question_id": 30355436, "link": "https://stackoverflow.com/questions/30355436/c-linked-list-push-segfault/30355690#30355690", "title": "C: linked list push segfault", "body": "<p>Your code of <code>push()</code> is very wrong. </p>\n\n<p><code>gds</code> is allocated and immediately overwritten:</p>\n\n<pre><code>    current-&gt;gds = (info_t *)malloc(sizeof(info_t));\n    current-&gt;gds = gds;\n</code></pre>\n\n<p>Even if <code>current</code> is <code>NULL</code>, it will be immediately dereferenced (which is most likely causes Segmentation Fault):</p>\n\n<pre><code>if (current == NULL)\n{\n    current-&gt;gds = (info_t *)malloc(sizeof(info_t));\n</code></pre>\n\n<p>Also, do not explicitly convert result of <code>malloc</code>.</p>\n\n<hr>\n\n<p>If I understood what you're trying to do, push should look like this.</p>\n\n<pre><code>void\npush(stk_t **stklist, info_t *gds)\n{\n    stk_t* current = *stklist;\n\n    // Create &amp; initialize new entry\n    // gds is passed as parameter, so use it!\n    stk_t* newstk = malloc(sizeof(stk_t));\n    newstk-&gt;gds = gds;\n    newstk-&gt;next = NULL;\n\n    // No entries had been inserted, overwrite root pointer\n    if(current == NULL) {\n        *stklist = newstk;\n        return;\n    }\n\n    // Find last entry that has available -&gt;next\n    while(current-&gt;next != NULL)\n        current = current-&gt;next;\n\n    current-&gt;next = newstk;\n}\n\n...\n\n// Use it like this\nstk_t* root = NULL;\npush(&amp;root, ...);\npush(&amp;root, ...);\npush(&amp;root, ...);\n</code></pre>\n\n<p>This is pretty idiomatic - keep pointer to a first entry, and for first entry overwrite pointer itself, for latter go to last entry and overwrite <code>next</code> in it. BTW, this is not <em>stack</em>, but simple <em>single-linked list</em></p>\n\n<p>For <em>stack</em> implementation will look like this:</p>\n\n<pre><code>void\npush(stk_t **stklist, info_t *gds)\n{\n    stk_t* newstk = malloc(sizeof(stk_t));\n    newstk-&gt;gds = gds;\n    newstk-&gt;next = *stklist;\n\n    // Push new entry on top of the stack\n    *stklist = newstk;\n}\n\ninfo_t*\npop(stk_t **stklist) {\n    stk_t* current = *stklist;\n    info_t* gds;\n\n    if(!current)\n        return NULL;\n\n    // Remove entry from top of the stack and\n    // use next entry as new top\n    *stklist = current-&gt;next;\n    gds = current-&gt;gds;\n    free(current);\n\n    return gds;\n}\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 4898807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/055d40cd24895f19041df84804cb029a?s=128&d=identicon&r=PG&f=1", "display_name": "Anson Cen", "link": "https://stackoverflow.com/users/4898807/anson-cen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 30355690, "answer_count": 1, "score": 0, "last_activity_date": 1432140183, "creation_date": 1432139356, "last_edit_date": 1432139507, "question_id": 30355436, "link": "https://stackoverflow.com/questions/30355436/c-linked-list-push-segfault", "title": "C: linked list push segfault", "body": "<p>I am trying to writing a function which can add new struct to the end of the linked list. while it always got Segmentation fault.</p>\n\n<pre><code>void\npush(stk_t *stklist, info_t *gds)\n{\n    stk_t *current = stklist;\n\n    if (current == NULL)\n    {\n        current-&gt;gds = (info_t *)malloc(sizeof(info_t));\n        current-&gt;gds = gds;\n        current-&gt;next = (stk_t *)malloc(sizeof(stk_t));\n        current-&gt;next = NULL;\n    }\n    else\n    {\n        while (current != NULL)\n        {\n            current = current-&gt;next;\n        }\n        current-&gt;next = (stk_t *)malloc(sizeof(stk_t));\n        current-&gt;next-&gt;gds = (info_t *)malloc(sizeof(info_t));\n        current-&gt;next-&gt;gds = gds;\n        current-&gt;next-&gt;next = (stk_t *)malloc(sizeof(stk_t));\n        current-&gt;next-&gt;next = NULL;\n    }\n\n}\n</code></pre>\n\n<p>And my structs </p>\n\n<pre><code>typedef struct{\n    char name[NAME_SIZE];\n    char aisle;\n    int shelf;\n    int weight;\n    int price;\n    int quantity;\n} info_t;\n\n\ntypedef struct stk stk_t;\n\nstruct stk{\n    info_t *gds;\n    stk_t *next;\n};\n</code></pre>\n\n<p>the aim of the function push() is to add the second argument to the end of the linked list.</p>\n"}, {"tags": ["c", "winapi", "midi", "pitch"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432141948, "post_id": 30355363, "comment_id": 48804476, "body": "@WeatherVane <code>array</code> is <code>int</code> (shown at the top)."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1432141986, "post_id": 30355363, "comment_id": 48804498, "body": "Show <code>array[i][2]</code> and <code>bend</code> in the same <code>printf</code> call."}, {"owner": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1432155279, "post_id": 30355363, "comment_id": 48812076, "body": "@CL. I&#39;ve edited my question with the new output image with array[i][2] and bend in the printf as requested."}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1432192649, "creation_date": 1432192649, "answer_id": 30366992, "question_id": 30355363, "link": "https://stackoverflow.com/questions/30355363/how-to-send-midi-pitch-bend-messages-correctly-in-c/30366992#30366992", "title": "How to send midi pitch bend messages correctly in c?", "body": "<p>The <code>message.data[]</code> values are correctly computed; the code does nothing wrong.</p>\n\n<p>The problem is that the bend values do not correspond to a half tone.\nThe default pitch bend range maps the 0..16383 control values to \u00b12 halftones; to get a half tone up, the values would have to go up to 12288.</p>\n"}], "owner": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 30366992, "answer_count": 1, "score": 1, "last_activity_date": 1432192649, "creation_date": 1432139166, "last_edit_date": 1495539895, "question_id": 30355363, "link": "https://stackoverflow.com/questions/30355363/how-to-send-midi-pitch-bend-messages-correctly-in-c", "title": "How to send midi pitch bend messages correctly in c?", "body": "<p>I'm trying to make a custom midi player, to do so I'm using an array that has already memorized correctly the midi messages data like this:</p>\n\n<pre><code>int array[3000][4]={{time,status,data1,data2},{...},...}\n</code></pre>\n\n<p>when I want my program to send the midi message (so that it can be played) I call this array and do the needed distinctions between noteon/off, pitch-bend and such. At first I thought I was doing the division in two 7 bits variables wrong, because I never worked with this procedure and I just copied the code from another question on stackoverflow, I posted my own question about it (<a href=\"https://stackoverflow.com/questions/30332416/how-to-divide-a-decimal-midi-pitch-bend-value-into-2-separated-7-bit-values-corr\">here</a>) and as it turns out the copied code works just fine. And yet the sound output isn't the right one, it barely has any change in pitch and when it has, it is so small I'm not even sure I'm hearing it (it should sound like a half tone bend with a vibrato in the end). So here's the code:</p>\n\n<pre><code> union { unsigned long word; unsigned char data[4]; } message;\n int main(int argc, char** argv) {\n     int midiport; // select which MIDI output port to open\n     uint16_t bend;\n     int flag,u;    // monitor the status of returning functions\n     uint16_t mask = 0x007F;\n     HMIDIOUT device;    // MIDI device interface for sending MIDI output\n     message.data[0] = 0x90;  \n     message.data[1] = 60;    \n     message.data[2] = 100;   \n     message.data[3] = 0;     // Unused parameter\n\n\n // Assign the MIDI output port number (from input or default to 0)\n if (!midiOutGetNumDevs()){\n     printf(\"non ci sono devices\");\n }\n if (argc &lt; 2) {\n     midiport = 0;\n }\n else {\n     midiport = 0;\n }\n printf(\"MIDI output port set to %d.\\n\", midiport);\n\n // Open the MIDI output port\n flag = midiOutOpen(&amp;device, midiport, 0, 0, CALLBACK_NULL);\n if (flag != MMSYSERR_NOERROR) {\n     printf(\"Error opening MIDI Output.\\n\");\n     return 1;\n }i = 0;\n message.data[0] = 0xC0;\n message.data[1] = 25;\n message.data[2] = 0;\n flag = midiOutShortMsg(device, message.word); //program change to steel guitar\n if (flag != MMSYSERR_NOERROR) {\n     printf(\"Warning: MIDI Output is not open.\\n\");\n }\n while (1){\n     if (array[i][1] == 1) { //note on \n         this_works();i++;\n     }\n     else if (array[i][1] == 0){//note off\n         this_also_works();i++;\n     }\n     else if (array[i][1] == 2){//pitch bend\n         while (array[i][1] == 2){\n             Sleep(10);\n             message.data[0] = 0xE0;\n             bend = (uint16_t) array[i][2];\n             message.data[1] = bend &amp; mask;\n             message.data[2] = (bend &amp; (mask &lt;&lt; 7)) &gt;&gt; 7;\n             printf(\"bending %d, %d\\n\", message.data[1],message.data[2]); \n             flag = midiOutShortMsg(device, message.word);\n             if (flag != MMSYSERR_NOERROR) {\n                 printf(\"Warning: MIDI Output is not open.\\n\");\n             }i++;\n         }\n     }\n }}\n</code></pre>\n\n<p>here's the pitch-bend array[][] values for a half tone bend with vibrato:</p>\n\n<pre><code>{ 6560, 2, 8192 },\n{ 6576, 2, 8320 },\n{ 6592, 2, 8448 },\n{ 6608, 2, 8704 },\n{ 6624, 2, 8832 },\n{ 6720, 2, 8832 },\n{ 6729, 2, 8832 },\n{ 6739, 2, 8832 },\n{ 6748, 2, 8832 },\n{ 6757, 2, 8832 },\n{ 6766, 2, 8832 },\n{ 6776, 2, 8704 },\n{ 6785, 2, 8704 },\n{ 6794, 2, 8704 },\n{ 6804, 2, 8704 },\n{ 6813, 2, 8704 },\n{ 6822, 2, 8832 },\n{ 6831, 2, 8832 },\n{ 6841, 2, 8832 },\n{ 6850, 2, 8832 },\n{ 6859, 2, 8832 },\n{ 6868, 2, 8832 },\n{ 6878, 2, 8832 },\n{ 6887, 2, 8832 },\n{ 6896, 2, 8832 },\n{ 6906, 2, 8832 },\n{ 6915, 2, 8832 },\n{ 6924, 2, 8960 },\n{ 6933, 2, 8960 },\n{ 6943, 2, 8960 },\n{ 6952, 2, 8960 },\n{ 6961, 2, 8960 },\n{ 6971, 2, 8832 },\n{ 6980, 2, 8832 },\n{ 6989, 2, 8832 },\n{ 6998, 2, 8832 },\n{ 7008, 2, 8832 },\n{ 7017, 2, 8832 },\n{ 7026, 2, 8832 },\n{ 7036, 2, 8960 },\n{ 7045, 2, 8960 },\n{ 7054, 2, 8960 },\n{ 7063, 2, 8960 },\n{ 7073, 2, 8960 },\n{ 7082, 2, 8960 },\n{ 7091, 2, 8960 },\n{ 7101, 2, 8960 },\n{ 7110, 2, 8960 },\n{ 7119, 2, 8960 },\n{ 7128, 2, 8960 },\n{ 7138, 2, 8960 },\n{ 7147, 2, 8960 },\n{ 7156, 2, 8832 },\n{ 7165, 2, 8832 },\n{ 7175, 2, 8832 },\n{ 7184, 2, 8704 },\n{ 7193, 2, 8704 },\n{ 7203, 2, 8704 },\n{ 7212, 2, 8704 },\n{ 7221, 2, 8704 },\n{ 7230, 2, 8704 },\n{ 7240, 2, 8704 },\n{ 7249, 2, 8704 },\n{ 7258, 2, 8704 },\n{ 7268, 2, 8704 },\n{ 7277, 2, 8704 },\n{ 7286, 2, 8704 },\n{ 7295, 2, 8704 },\n{ 7305, 2, 8832 },\n{ 7314, 2, 8832 },\n{ 7323, 2, 8832 },\n{ 7333, 2, 8960 },\n{ 7342, 2, 8960 },\n{ 7351, 2, 9088 },\n{ 7360, 2, 9088 },\n{ 7370, 2, 9088 },\n{ 7379, 2, 9088 },\n{ 7388, 2, 9088 },\n{ 7398, 2, 9088 },\n{ 7407, 2, 9088 },\n{ 7416, 2, 9088 },\n{ 7425, 2, 9088 },\n{ 7435, 2, 8960 },\n{ 7444, 2, 8960 },\n{ 7453, 2, 8832 },\n{ 7462, 2, 8832 },\n{ 7472, 2, 8832 },\n{ 7481, 2, 8704 },\n{ 7490, 2, 8704 },\n{ 7500, 2, 8576 },\n{ 7509, 2, 8576 },\n{ 7518, 2, 8576 },\n{ 7527, 2, 8576 },\n{ 7537, 2, 8576 },\n{ 7546, 2, 8576 },\n{ 7555, 2, 8576 },\n{ 7565, 2, 8576 },\n{ 7574, 2, 8576 },\n{ 7583, 2, 8704 },\n{ 7592, 2, 8704 },\n{ 7602, 2, 8832 },\n{ 7611, 2, 8832 },\n{ 7620, 2, 8832 },\n{ 7630, 2, 8832 },\n{ 7639, 2, 8832 },\n{ 7648, 2, 8832 },\n{ 7657, 2, 8832 },\n{ 7667, 2, 8832 },\n{ 7676, 2, 8832 },\n</code></pre>\n\n<p>and here's the printf output:\n<img src=\"https://i.stack.imgur.com/BUVTt.png\" alt=\"printf output as requested\"></p>\n\n<p>I really don't know what I'm doing wrong, any help will be appreciated.</p>\n"}, {"tags": ["c", "struct", "protocols"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1432139783, "post_id": 30355216, "comment_id": 48803197, "body": "<code>memcpy()</code>? this has really nothing to do with &quot;protocols&quot; and stuff."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1432147258, "creation_date": 1432147258, "answer_id": 30357892, "question_id": 30355216, "link": "https://stackoverflow.com/questions/30355216/parsing-and-sending-dataframes-in-c/30357892#30357892", "title": "parsing and sending dataframes in C", "body": "<p>Assuming you get the full packet in your char buffer (*), it is then simple :</p>\n\n<pre><code>struct Packet{\n   char header1[1];\n   char header2[2];\n   short lengthData;\n   char data[MAX_DATA_LENGTH];\n};\n\nvoid buftopacket(char *buffer, Packet *pkt) {\n    pkt-&gt;header1 = buffer[0];\n    pkt-&gt;header2 = buffer[1];\n    pkt-&gt;lengthData = buffer[2] &lt;&lt; 8 + buffer[3]; /* assuming network order */\n    memcpy(pkt-&gt;data, buffer + 4, (pkt-&gt;lengthData &lt;= MAX_DATA_LENGTH)\n        ? pkt-&gt;lengthData : MAX_DATA_LENGTH); /* do not write pass buffer end*/\n}\n</code></pre>\n\n<p>(*) but nothing ensures that you get full packet in one single read ...</p>\n"}], "owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432147258, "creation_date": 1432138753, "question_id": 30355216, "link": "https://stackoverflow.com/questions/30355216/parsing-and-sending-dataframes-in-c", "title": "parsing and sending dataframes in C", "body": "<p>I have some trouble to implement an existing protocol in C, escpecially with creating the data packets. </p>\n\n<p>The Packet looks like this:</p>\n\n<p>HeaderData 1(1Byte) | HeaderData 2(1 Byte) | Length_Data (2 Byte) | Data (Length variable)</p>\n\n<p>I get some data via serial port and it is saved in returnMessage:</p>\n\n<pre><code>int getMessage(char * returnMessage){\nint length = 0;\n//static char replay[REPLAY_MAX_SIZE];\nmemset(replay, 0x00, REPLAY_MAX_SIZE);\n// goes into the while-loop, if some data comes in\n// after a timeout of 20 seconds the program will be terminated\nif(select(fd +1 , &amp;set, NULL, NULL, &amp;timeout )){\n    length = read(fd, returnMessage, REPLAY_MAX_SIZE);\n    //reinitialize fd_set values\n    FD_ZERO(&amp;set);\n    FD_SET(fd, &amp;set);\n    return length;\n    }\n    //printf(\"[%s] ERROR CANNOT GET MESSAGE\\n\", __FUNCTION__);\nreturn -1;\n}\n</code></pre>\n\n<p>This data in returnMessage I will enhance to my packet to send it further. But I dont know how.</p>\n\n<p>Maybe there is a way with structs?</p>\n\n<pre><code>struct Packet{\n   char header1[1];\n   char header2[2];\n   char lengthData[20];\n   char data[MAX_DATA_LENGTH];\n};\n\nstruct Packet packet;\n</code></pre>\n\n<p>But how can I copy the data in returnMessage to packet.data[]? And how can I concatenate the data in the struct in order to send the packet.</p>\n\n<p>Have someone an introduction of creating/parsing packets for simple protocols?</p>\n\n<p>Thanks a lot,</p>\n\n<p>Florian</p>\n"}, {"tags": ["c", "sse"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 2062876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47744cec204d5c40e24432383a7fc570?s=128&d=identicon&r=PG", "display_name": "Cr_U", "link": "https://stackoverflow.com/users/2062876/cr-u"}, "edited": false, "score": 0, "creation_date": 1432208680, "post_id": 30355926, "comment_id": 48835380, "body": "Yes that was my assumption. Strangely enough I obtained required behaviour only with (N = 1). It works, but I wonder if this really utilizes the performance benefit of vectorization."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 37, "user_id": 2062876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47744cec204d5c40e24432383a7fc570?s=128&d=identicon&r=PG", "display_name": "Cr_U", "link": "https://stackoverflow.com/users/2062876/cr-u"}, "edited": false, "score": 0, "creation_date": 1432212397, "post_id": 30355926, "comment_id": 48838147, "body": "If you set N=1 you will get correct results in this particular case but there will be many redundant calculations, because your vectors will overlap by 7 elements. You should be benchmarking your optimised code and you should therefore notice that performance is very poor with N=1."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1432140934, "creation_date": 1432140934, "answer_id": 30355926, "question_id": 30355179, "link": "https://stackoverflow.com/questions/30355179/segmentation-fault-with-m128-in-c/30355926#30355926", "title": "Segmentation fault with __m128 in C", "body": "<p>In <code>threshold</code>, </p>\n\n<pre><code>short int i, N=16;\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>short int i, N=8;\n</code></pre>\n\n<p>This is because there are 8 x <code>short int</code> elements per vector, and pointer arithmetic takes the size of the elements into account (my guess is that you were assuming you needed to work with 16 bytes as the size of a vector ?).</p>\n"}, {"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432145081, "post_id": 30355968, "comment_id": 48806248, "body": "OP is using <code>_mm_loadu_si128</code>/<code>_mm_storeu_si128</code>, so alignment shouldn&#39;t be a problem."}, {"owner": {"reputation": 37, "user_id": 2062876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47744cec204d5c40e24432383a7fc570?s=128&d=identicon&r=PG", "display_name": "Cr_U", "link": "https://stackoverflow.com/users/2062876/cr-u"}, "edited": false, "score": 0, "creation_date": 1432208856, "post_id": 30355968, "comment_id": 48835505, "body": "I tried this approach, but I think I am still missing something. I could only solve this using unaligned versions of functions, which I guess is not optimal."}, {"owner": {"reputation": 4586, "user_id": 1507014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca563ac151770f5ae24c741970401c81?s=128&d=identicon&r=PG", "display_name": "Bentoy13", "link": "https://stackoverflow.com/users/1507014/bentoy13"}, "edited": false, "score": 1, "creation_date": 1432210527, "post_id": 30355968, "comment_id": 48836771, "body": "I think alignment may be eventually a problem, but here the problem is more simple. In a now-deleted comment (sadly), it was pointed out that your offset on <code>src</code> is <code>i*N</code>, but the index <code>i</code> is incremented by <code>N</code> and not 1. So you get a seg fault at some point because you try to reach address <code>src+1023*8</code>, far away from the actual end of the allocated space of <code>src</code>."}, {"owner": {"reputation": 37, "user_id": 2062876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47744cec204d5c40e24432383a7fc570?s=128&d=identicon&r=PG", "display_name": "Cr_U", "link": "https://stackoverflow.com/users/2062876/cr-u"}, "edited": false, "score": 0, "creation_date": 1432214420, "post_id": 30355968, "comment_id": 48839659, "body": "Thank you. This also explains why it only works with N=1. Now I got it to work with N=4, but for some reason not with N=8."}, {"owner": {"reputation": 37, "user_id": 2062876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47744cec204d5c40e24432383a7fc570?s=128&d=identicon&r=PG", "display_name": "Cr_U", "link": "https://stackoverflow.com/users/2062876/cr-u"}, "edited": false, "score": 0, "creation_date": 1432227979, "post_id": 30355968, "comment_id": 48849439, "body": "This is what I did to make it work, however I can only get 4 short ints inside the vector. Thank you!"}], "tags": [], "owner": {"reputation": 4586, "user_id": 1507014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca563ac151770f5ae24c741970401c81?s=128&d=identicon&r=PG", "display_name": "Bentoy13", "link": "https://stackoverflow.com/users/1507014/bentoy13"}, "is_accepted": false, "score": 1, "last_activity_date": 1432223076, "last_edit_date": 1495541155, "creation_date": 1432141105, "answer_id": 30355968, "question_id": 30355179, "link": "https://stackoverflow.com/questions/30355179/segmentation-fault-with-m128-in-c/30355968#30355968", "title": "Segmentation fault with __m128 in C", "body": "<p>Before a comment on alignment, please take into account houssam's comment and <a href=\"https://stackoverflow.com/a/30355926/1507014\">Paul's answer</a>, corruption comes from here for sure.</p>\n\n<p>Now, <code>src</code> may be not 16-byte aligned. Refering to this <a href=\"https://stackoverflow.com/questions/11214632/alignment-guarantees-of-static-char-array\"> post about alignment on static arrays</a>, <code>src</code> is aligned on 2-byte words at least, but maybe not on 16-byte addresses.</p>\n\n<p>So, even if <code>line1</code> is declared as an aligned pointer, the assignment at first line of the for-loop may break this constraint.</p>\n\n<p>Consider adding <code>__attribute__ ((aligned(8)))</code> in the declaration of <code>src</code> (inside <code>main()</code>).</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To be clear after my comment: one initial root cause was pointed out by PaulR in his answer, type <code>__m128</code> has the size of 8 short ints, not 16. One other root cause of failure is a problem with index <code>i</code>. By writing <code>line1 = src+i*N</code> and <code>i+=N</code>, the offset from <code>src</code> is actually increasing by <code>N*N</code> at each iteration.</p>\n\n<p>So you have two exclusive solutions:</p>\n\n<ul>\n<li>either change the increment of index <code>i</code> <strong>and</strong> the end limit of the index : <code>for(i = 0; i &lt; len/N; i++)</code>; leave the rest as is.</li>\n<li>or change the offsets, <strong>both</strong> for <code>src</code> <strong>and</strong> <code>dst</code>: <code>line1 = src + i;</code>, and <code>_mm_storeu_si128((__m128i*) (dst + i), v3 );</code> </li>\n</ul>\n"}], "owner": {"reputation": 37, "user_id": 2062876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47744cec204d5c40e24432383a7fc570?s=128&d=identicon&r=PG", "display_name": "Cr_U", "link": "https://stackoverflow.com/users/2062876/cr-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 30355926, "answer_count": 2, "score": 0, "last_activity_date": 1432223076, "creation_date": 1432138631, "question_id": 30355179, "link": "https://stackoverflow.com/questions/30355179/segmentation-fault-with-m128-in-c", "title": "Segmentation fault with __m128 in C", "body": "<p>I am getting Segmentation fault when running the compilation of following short C code:</p>\n\n<pre><code>#include &lt;pmmintrin.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define VALUE 4242\n\ntypedef short int Type;\nvoid threshold(Type *dst, const Type *src, int len)\n{\n  short int i, N=16;\n  short int checkval[] = { VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE,VALUE };\n\n  const short int* __attribute__ ((aligned (16))) line1;\n\n  __m128i v1, v2, v3:\n  v2 = _mm_loadu_si128((__m128i*) checkval );\n\n  for(i = 0; i &lt; len; i+=N)\n    {\n      line1 = src + N*i;\n      //Thisline                                                                                                                                     \n      v1 = _mm_loadu_si128((__m128i*) line1 );\n      v3 = _mm_cmpgt_epi16( v1, v2 );\n\n      _mm_storeu_si128((__m128i*) (dst + N*i), v3 );\n\n    }\n  return;\n}\n\nint main()\n{\n  int N = 1024;\n  Type dst[N], src[N];\n  int i;\n  for(i = 0; i &lt; N; i++)\n    src[i] = rand()%VALUE;\n\n  threshold(dst, src, N);\n  return 0;\n}\n</code></pre>\n\n<p>I am quite assured the line after the \"This line\" is giving me problems, but I can't tell if the problem is caused by line1 not fitting inside __m128i or some other error.</p>\n\n<p>As a subquestion - I tried to align the elements in line1, would function _mm_load_si128 be more appropriate (I tried both, but I cannot avoid the fault).</p>\n"}, {"tags": ["c", "printf", "overflow", "operator-keyword", "size-t"], "comments": [{"owner": {"reputation": 235784, "user_id": 673730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d1e4893fe7a566e6e4b90876b642163?s=128&d=identicon&r=PG", "display_name": "Luchian Grigore", "link": "https://stackoverflow.com/users/673730/luchian-grigore"}, "edited": false, "score": 0, "creation_date": 1432138403, "post_id": 30355004, "comment_id": 48802321, "body": "Which part surprises you exactly?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1432138445, "post_id": 30355004, "comment_id": 48802353, "body": "related: <a href=\"http://stackoverflow.com/questions/199333/how-to-detect-integer-overflow-in-c-c\" title=\"how to detect integer overflow in c c\">stackoverflow.com/questions/199333/&hellip;</a>"}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1432138536, "post_id": 30355004, "comment_id": 48802413, "body": "isn&#39;t the type of <code>size_t</code> dependent on the machine you are running on? maybe the max of <code>size_t</code> is greater than <code>UINT_MAX</code>?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 235784, "user_id": 673730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d1e4893fe7a566e6e4b90876b642163?s=128&d=identicon&r=PG", "display_name": "Luchian Grigore", "link": "https://stackoverflow.com/users/673730/luchian-grigore"}, "edited": false, "score": 0, "creation_date": 1432138564, "post_id": 30355004, "comment_id": 48802428, "body": "@Luchian <code>largerNum now = 0</code> and on the very next line <code>0 &lt; UINT_MAX</code> returns false. Anyway, I cannot reproduce the result on VS2015, using the 32-bit compiler."}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1432138590, "post_id": 30355004, "comment_id": 48802444, "body": "@Praetorian I couldnt reproduce it either"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432138630, "post_id": 30355004, "comment_id": 48802471, "body": "In <code>(0 &lt; UINT_MAX)</code> does your compiler consider <code>0</code> to be <code>int</code>? If so, <code>(0 &lt; 0xFFFFFFFF)</code> is false."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 4, "creation_date": 1432138696, "post_id": 30355004, "comment_id": 48802513, "body": "I think <code>size_t</code> is 64-bit on your platform, but you&#39;re using the wrong <code>printf</code> format specifier, and thus truncating. Since this is tagged C++ as well, use <code>cout</code> for printing, and your problems will probably go away."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1432138818, "post_id": 30355004, "comment_id": 48802583, "body": "@Praetorian I think you should build an answer out of this, <code>%u</code> is simply not the correct way to display <code>size_t</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1432138952, "post_id": 30355004, "comment_id": 48802655, "body": "@Praetorian in MSVC <code>limits.h</code> it is <code>#define UINT_MAX 0xffffffff</code>"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432139156, "post_id": 30355004, "comment_id": 48802762, "body": "@WeatherVane Never mind what I said earlier, it doesn&#39;t matter anyway. That literal is too big to fit into an <code>int</code>, so it&#39;ll be promoted to an <code>unsigned int</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1432139232, "post_id": 30355004, "comment_id": 48802809, "body": "@Praetorian pls ignore mine too since OP does not dispute <code>(0 &lt; 0xFFFFFFFF)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1432139413, "post_id": 30355004, "comment_id": 48802906, "body": "@Praetorian just got there, upvoted you: when I compiled/ran OP&#39;s code in MSVC, I got the correct result for the last test: <code>Is (largerNum &lt; Num)? YES</code> which suggests his <code>size_t</code> is different to mine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1432140383, "post_id": 30355004, "comment_id": 48803581, "body": "Making it work with &#39;unsigned long&#39; shows: it is an printf issue Please fix it, better get rid of these.."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432140571, "post_id": 30355004, "comment_id": 48803705, "body": "Thank you all for your help! I&#39;ve gone through some of these comments and incorporated some of the information into the code.  One of the things i realized is that for sake of completeness <code>UINT_MAX</code> should have been <code>ULONG_MAX</code>, but that doesn&#39;t explain why changing the original code stipit from <code>size_t</code> to <code>unsigned long</code> would allow the code to function correctly."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432140751, "post_id": 30355004, "comment_id": 48803811, "body": "@DieterL&#252;cking Is there any reason why an <code>unsigned long</code> would be treated differently from <code>size_t</code>? Not disputing that it is treated differntly, just looking for a history lesson or explaination of printf&#39;s internal workings i guess."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1432140885, "post_id": 30355004, "comment_id": 48803889, "body": "@Praetorian I&#39;m here! just reading and testing! =)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1432140886, "post_id": 30355004, "comment_id": 48803890, "body": "@Makenbaccon 32 vs. 64 bit (size_t) is the difference"}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432141365, "post_id": 30355004, "comment_id": 48804146, "body": "@DieterL&#252;cking I updated my code to reflect proper usage of <code>printf()</code>, and huzzah! there it is, all the numbers I wasn&#39;t seeing. =D Thank you for your help."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432140447, "post_id": 30355489, "comment_id": 48803625, "body": "I&#39;m going to go look up <code>%zu</code> right now.  I&#39;m more confused why changing <code>size_t</code> to <code>unsigned long</code> would make my code work."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432140794, "post_id": 30355489, "comment_id": 48803838, "body": "Is there any reason why an <code>unsigned long</code> would be treated differently from <code>size_t</code>? Not disputing that it is treated differntly, just looking for a history lesson or explaination of printf&#39;s internal workings i guess."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432141306, "post_id": 30355489, "comment_id": 48804113, "body": "@Makenbaccon <code>unsigned long</code> may differ in range from <code>size_t</code>.  Same size does not mean same range - although <i>that</i> is rare."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432141439, "post_id": 30355489, "comment_id": 48804187, "body": "Disregard all of my ignorance.  I&#39;ve updated the final code with those pesky <code>%zu</code> entries and huzzah! everything makes sense.  Thank you for your time. =)"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432142122, "post_id": 30355489, "comment_id": 48804563, "body": "@Makenbaccon Try printing the sizes of <code>unsigned int</code>, <code>unsigned long</code> and <code>size_t</code> (remember to use <code>%zu</code> to print the result of <code>sizeof</code> :)). The first two are probably 4 bytes each and the last 8."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 6, "last_activity_date": 1432139488, "creation_date": 1432139488, "answer_id": 30355489, "question_id": 30355004, "link": "https://stackoverflow.com/questions/30355004/do-the-and-operators-work-correctly-when-size-t-overflow/30355489#30355489", "title": "Do the &quot;&lt;&quot; and &quot;&gt;&quot; operators work correctly when size_t overflow?", "body": "<p>My guess is your platform has a 64-bit <code>size_t</code>, and you're using the wrong format specifier to print a <code>size_t</code>, which is <a href=\"https://stackoverflow.com/a/14504175/241631\">undefined behavior</a> and is resulting in the misleading output. </p>\n\n<p>To <a href=\"https://stackoverflow.com/a/1669254/241631\">print <code>size_t</code>s</a>, use <code>%zu</code> on gcc and clang, and <code>%Iu</code> on MSVC. Or forget all that and use <code>std::cout</code> to print the results. </p>\n\n<p>Using <code>%Iu</code> on VS2015, the output I get on a 64-bit compiler is</p>\n\n<pre><code>largerNum = 12\nNum = 4294967295\nNum + 1 = 4294967296\nlargerNum now = 4294967296\nlargerNum did not overflow: 4294967296\nIs (0 &lt; UINT_MAX)?\nYES\nIs (largerNum &lt; Num)?\nNO\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1432143843, "post_id": 30356503, "comment_id": 48805500, "body": "Thank you, this will effect how I code in c++.  I originally tagged this c++, but that was a mistake. I&#39;ll have to look into boost::format. Thanks again for your help!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1432142921, "creation_date": 1432142921, "answer_id": 30356503, "question_id": 30355004, "link": "https://stackoverflow.com/questions/30355004/do-the-and-operators-work-correctly-when-size-t-overflow/30356503#30356503", "title": "Do the &quot;&lt;&quot; and &quot;&gt;&quot; operators work correctly when size_t overflow?", "body": "<p>Just adding to @Praetorian's answer and showing a type safe implementation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nint main (void) {\n   using std::size_t;\n   using std::cout;\n\n   size_t largerNum = 12;\n   size_t Num = std::numeric_limits&lt;size_t&gt;::max();\n\n   cout &lt;&lt; \"largerNum = \" &lt;&lt; largerNum &lt;&lt; \"\\nNum = \" &lt;&lt; Num &lt;&lt; \"\\nNum + 1 = \" &lt;&lt; Num + 1 &lt;&lt; \"\\n\";\n   largerNum = Num + 1;\n   cout &lt;&lt; \"largerNum now = \" &lt;&lt; largerNum &lt;&lt; \"\\n\";\n\n   if(largerNum &lt; Num ){\n       cout &lt;&lt; \"largerNum overflowed to \" &lt;&lt; largerNum &lt;&lt; \"\\n\";\n   }\n   else {\n       cout &lt;&lt; \"largerNum did not overflow: \" &lt;&lt; largerNum &lt;&lt; \"\\n\";\n   }\n\n   cout &lt;&lt; \"Is (0 &lt; Unsigned Maximum)?\\n\";\n\n   (0 &lt; std::numeric_limits&lt;size_t&gt;::max())?cout &lt;&lt; \"YES\\n\":cout &lt;&lt; \"NO\\n\";\n\n   cout &lt;&lt; \"Is (largerNum &lt; Num)?\\n\";\n\n   (largerNum &lt; Num)?cout &lt;&lt; \"YES\\n\":cout &lt;&lt; \"NO\\n\";\n\n   return 0;\n}\n</code></pre>\n\n<p>Hence: 'printf' a not a good choice in C++, it is not type safe (although good compilers can recognize invalid format specifiers). On the other hand the iostream operators are cumbersome (for many) and are bad if an output has to be translated to different languages (eg.: gnu getline). You may browse the net for a type safe format string (eg.: boost::format)</p>\n"}], "owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 30355489, "answer_count": 2, "score": 3, "last_activity_date": 1499353927, "creation_date": 1432138154, "last_edit_date": 1499353927, "question_id": 30355004, "link": "https://stackoverflow.com/questions/30355004/do-the-and-operators-work-correctly-when-size-t-overflow", "title": "Do the &quot;&lt;&quot; and &quot;&gt;&quot; operators work correctly when size_t overflow?", "body": "<p>I'm working on a project to update 20 year old code, and many of the issues have to do with integer overflow.  I wanted to make sure I was testing for overflow correctly, so I wrote a test program.  It's output supprised me.  Here it is:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\nint main (void) {\n\n   size_t largerNum,Num;\n\n   largerNum = 12;\n   Num = UINT_MAX;\n\n   printf(\"largerNum = %u\\nNum = %u\\nNum + 1 = %u\\n\", largerNum    , Num, Num + 1);\n\n   largerNum = Num + 1;\n\n   printf(\"largerNum now = %u\\n\", largerNum);\n\n   if(largerNum &lt; Num ){\n      printf(\"largerNum overflowed to %u\\n\", largerNum);\n   }\n   else {\n      printf(\"largerNum did not overflow: %u\\n\", largerNum);\n   }\n\n   printf(\"Is (0 &lt; UINT_MAX)?\\n\");\n\n   (0 &lt; UINT_MAX)?printf(\"YES\\n\"):printf(\"NO\\n\");\n\n   printf(\"Is (largerNum &lt; Num)?\\n\");\n\n   (largerNum &lt; Num)?printf(\"YES\\n\"):printf(\"NO\\n\");\n\n   return 0;\n}\n</code></pre>\n\n<p>And its output:</p>\n\n<pre><code>[afischer@susm603 /home/afischer/Fischer_Playground/overflowTest]$ main\nlargerNum = 12\nNum = 4294967295\nNum + 1 = 0\nlargerNum now = 0\nlargerNum did not overflow: 0\nIs (0 &lt; UINT_MAX)?\nYES\nIs (largerNum &lt; Num)?\nNO\n</code></pre>\n\n<p>I've looked at some other posts <a href=\"https://stackoverflow.com/questions/14899088/uint-max-1-equals-what\" title=\"here\">here</a> and <a href=\"https://stackoverflow.com/questions/988588/is-using-unsigned-integer-overflow-good-practice\" title=\"here\">here</a> and read this <a href=\"http://www.cs.utah.edu/~regehr/papers/overflow12.pdf\" rel=\"nofollow noreferrer\" title=\"paper\">paper</a>, but it has not made the output anymore clear.  Anyone see this before?</p>\n\n<p>Edit: I got it to work when changing from <code>size_t</code> to <code>unsigned long</code>, which shouldn't do anything.</p>\n\n<pre><code>  6 int main (void) {\n  7 \n  8    unsigned long largerNum,Num;\n  9 \n 10    largerNum = 12;\n 11    Num = UINT_MAX;\n 12 \n 13    printf(\"largerNum = %u\\nNum = %u\\nNum + 1 = %u\\n\", largerNum    , Num, Num + 1);\n 14 \n 15    largerNum = Num + 2;\n 16 \n 17    printf(\"largerNum now = %u\\n\", largerNum);\n 18 \n 19    if(largerNum &lt; Num ){\n 20       printf(\"largerNum overflowed to %u\\n\", largerNum);\n 21    }\n 22    else {\n 23       printf(\"largerNum did not overflow: %u\\n\", largerNum);\n 24    }\n 25 \n 26    printf(\"Is (0 &lt; UINT_MAX)?\\n\");\n 27 \n 28    (0 &lt; UINT_MAX)?printf(\"YES\\n\"):printf(\"NO\\n\");\n 29 \n 30    printf(\"Is (largerNum &lt; Num)?\\n\");\n 31 \n 32    (largerNum &lt; Num)?printf(\"YES\\n\"):printf(\"NO\\n\");\n 33 \n 34 \n 35    printf(\"largerNum = %u\\n\", largerNum);\n 36    printf(\"Num = %u\\n\", Num);\n 37 \n 38    return 0;\n 39 }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[afischer@susm603 /home/afischer/Fischer_Playground/overflowTest]$ main\nlargerNum = 12\nNum = 4294967295\nNum + 1 = 0\nlargerNum now = 1\nlargerNum overflowed to 1\nIs (0 &lt; UINT_MAX)?\nYES\nIs (largerNum &lt; Num)?\nYES\nlargerNum = 1\nNum = 4294967295\n</code></pre>\n\n<p>Edit2:</p>\n\n<p>Upon reading some comments, I substituted 'UINT_MAX' for 'ULONG_MAX', and the ternary operators functioned correctly.  I then changed 'size_t' to 'unsigned long'. and it still works correctly.  What is odd to me is that on my machine, 'size_t', 'unsigned int', and 'unsigned long' are all the same number of bytes, and 'UINT_MAX' and 'ULONG_MAX' are the same value, yet that ternary operator would still fail despite everything being the same.  Maybe it's not the same? This upsets my understanding of C.</p>\n\n<p>For those interested, the working code:</p>\n\n<pre><code>  6 int main (void) {\n  7    /* Can be size_t or unsigned long */\n  8    size_t largerNum,Num;\n  9 \n 10    largerNum = 12;\n 11    Num = ULONG_MAX;\n 12 \n 13    printf(\"largerNum = %u\\nNum = %u\\nNum + 1 = %u\\n\", largerNum    , Num, Num + 1);\n 14 \n 15    largerNum = Num + 2;\n 16 \n 17    printf(\"largerNum now = %u\\n\", largerNum);\n 18 \n 19    if(largerNum &lt; Num ){\n 20       printf(\"largerNum overflowed to %u\\n\", largerNum);\n 21    }\n 22    else {\n 23       printf(\"largerNum did not overflow: %u\\n\", largerNum);\n 24    }\n 25 \n 26    printf(\"Is (0 &lt; ULONG_MAX)?\\n\");\n 27 \n 28    (0 &lt; ULONG_MAX)?printf(\"YES\\n\"):printf(\"NO\\n\");\n 29 \n 30    printf(\"Is (largerNum &lt; Num)?\\n\");\n 31 \n 32    (largerNum &lt; Num)?printf(\"YES\\n\"):printf(\"NO\\n\");\n 33 \n 34    \n 35    printf(\"largerNum = %u\\n\", largerNum);\n 36    printf(\"Num = %u\\n\", Num);\n 37    \n 38    return 0;\n 39 }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[afischer@susm603 /home/afischer/Fischer_Playground/overflowTest]$ main\nlargerNum = 12\nNum = 4294967295\nNum + 1 = 0\nlargerNum now = 1\nlargerNum overflowed to 1\nIs (0 &lt; ULONG_MAX)?\nYES\nIs (largerNum &lt; Num)?\nYES\nlargerNum = 1\nNum = 4294967295\n</code></pre>\n\n<p>Final Edit:</p>\n\n<p>After reading more comments, I found that my <code>printf()</code> statements were wrong.  Thank you all for your help, and everything makes way more sense now. =D</p>\n\n<p>Final code:</p>\n\n<pre><code>  6 int main (void) {\n  7 \n  8    unsigned long largerNum,Num;\n  9 \n 10    largerNum = 12;\n 11    Num = ULONG_MAX;\n 12 \n 13    printf(\"largerNum = %zu\\nNum = %zu\\nNum + 1 = %zu\\n\", larger    Num, Num, Num + 1);\n 14 \n 15    largerNum = Num + 2;\n 16 \n 17    printf(\"largerNum now = %zu\\n\", largerNum);\n 18 \n 19    if(largerNum &lt; Num ){\n 20       printf(\"largerNum overflowed to %zu\\n\", largerNum);\n 21    }\n 22    else {\n 23       printf(\"largerNum did not overflow: %zu\\n\", largerNum);\n 24    }\n 25 \n 26    printf(\"Is (0 &lt; ULONG_MAX)?\\n\");\n 27 \n 28    (0 &lt; ULONG_MAX)?printf(\"YES\\n\"):printf(\"NO\\n\");\n 29 \n 30    printf(\"Is (largerNum &lt; Num)?\\n\");\n 31 \n 32    (largerNum &lt; Num)?printf(\"YES\\n\"):printf(\"NO\\n\");\n 33 \n 34 \n 35    printf(\"largerNum = %zu\\n\", largerNum);\n 36    printf(\"Num = %zu\\n\", Num);\n 37 \n 38    return 0;\n 39 }\n</code></pre>\n\n<p>Final Output:</p>\n\n<pre><code>[afischer@susm603 /home/afischer/Fischer_Playground/overflowTest]$ main\nlargerNum = 12\nNum = 18446744073709551615\nNum + 1 = 0\nlargerNum now = 1\nlargerNum overflowed to 1\nIs (0 &lt; ULONG_MAX)?\nYES\nIs (largerNum &lt; Num)?\nYES\nlargerNum = 1\nNum = 18446744073709551615\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1432138022, "post_id": 30354895, "comment_id": 48802057, "body": "<code>getchar</code> returns an <code>int</code>, but <code>((text[*times])=getchar())</code> does not. So you can&#39;t compare it to <code>EOF</code>. No character is an EOF."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1432138036, "post_id": 30354895, "comment_id": 48802070, "body": "Don&#39;t return  references to automatic variables! Even static ones."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1432138078, "post_id": 30354895, "comment_id": 48802100, "body": "<code>*times++;   &#47;&#47;call stack here</code> --&gt;&gt; <code>*times +=1;   &#47;&#47;call stack here</code>"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1432138093, "post_id": 30354895, "comment_id": 48802110, "body": "@EugeneSh. Well, it&#39;s C, so pointers, not references."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432138357, "post_id": 30354895, "comment_id": 48802292, "body": "@EugeneSh. - Why no returning static variables?  I&#39;ve always thought the only distinction vs a global was symbol name scope, and as a rule of thumb, limiting scope as much as possible is a good thing.   Is there some fundamental rule I&#39;m missing that makes using a global better?"}, {"owner": {"reputation": 11, "user_id": 4921189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nitl6.png?s=128&g=1", "display_name": "Haeral", "link": "https://stackoverflow.com/users/4921189/haeral"}, "edited": false, "score": 0, "creation_date": 1432138390, "post_id": 30354895, "comment_id": 48802311, "body": "THANKS! No more sigsegv but now I don&#39;t know how to &quot;enter&quot; the EOF in DOS. Any ideas?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1432138394, "post_id": 30354895, "comment_id": 48802314, "body": "@BrianMcFarland He originally wrote &quot;references&quot;, now he&#39;s changed it to &quot;variables&quot;; what he really meant were pointers to locally allocated variables."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432138409, "post_id": 30354895, "comment_id": 48802328, "body": "@Haeral <code>Ctrl-Z</code> and hit return."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1432138438, "post_id": 30354895, "comment_id": 48802346, "body": "You&#39;re allowing <code>*times</code> to go to 1000 (and exiting the loop at that point), then <code>text[ *times ] = &#39;\\0&#39;</code> potentially writes to <code>text[1000]</code>, past the end of the array."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432138626, "post_id": 30354895, "comment_id": 48802469, "body": "@szczurcio I have reverted to original one right away, because I still consider pointers and references as synonyms in English, not C or C++."}, {"owner": {"reputation": 11, "user_id": 4921189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nitl6.png?s=128&g=1", "display_name": "Haeral", "link": "https://stackoverflow.com/users/4921189/haeral"}, "edited": false, "score": 0, "creation_date": 1432138665, "post_id": 30354895, "comment_id": 48802487, "body": "So I should do this: while((*times&lt;999)&amp;&amp;(((text[*times])=getchar())!=EOF))"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1432138876, "post_id": 30354895, "comment_id": 48802621, "body": "@BrianMcFarland You CAN return a pointer to a locally declared static variable, and it will be safe most of the times (unless you start considering the reentrancy of the function). But I would say it&#39;s a bad practice. Along with using static variables where it is not really needed."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432139953, "post_id": 30354895, "comment_id": 48803307, "body": "@EugeneSh. - I agree reentrancy can be an issue (e.g. <code>strtok</code>) but the most common example possible <i>good</i> uses include 1) functions that return <code>const</code> references to local statics, e.g. various lookup table / conversion routines 2) functions that implement something singleton-like.  Never universally write of a tool as bad just because it&#39;s dangerous if misused. E.g. dynamite is dangerous if misused, but the modern world wouldn&#39;t exist without it."}, {"owner": {"reputation": 8038, "user_id": 304748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0a40ced265d8fde3bd35d5689c4181?s=128&d=identicon&r=PG", "display_name": "Brian Walker", "link": "https://stackoverflow.com/users/304748/brian-walker"}, "edited": false, "score": 0, "creation_date": 1432143258, "post_id": 30354895, "comment_id": 48805145, "body": "Initialize times to 0 before calling load"}], "answers": [{"comments": [{"owner": {"reputation": 3518, "user_id": 4310347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b956bea507c10ef218b1f4bac18c4e1?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Chrbolka", "link": "https://stackoverflow.com/users/4310347/jan-chrbolka"}, "edited": false, "score": 0, "creation_date": 1432188673, "post_id": 30356403, "comment_id": 48822595, "body": "This is not really an answer.  Do you have any suggestions, as to where in the code it could be happening, or how to fix it?"}], "tags": [], "owner": {"reputation": 1, "user_id": 2378207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d06ca8011835099ce208c3de713092?s=128&d=identicon&r=PG", "display_name": "parvinder09", "link": "https://stackoverflow.com/users/2378207/parvinder09"}, "is_accepted": false, "score": -1, "last_activity_date": 1432142599, "creation_date": 1432142599, "answer_id": 30356403, "question_id": 30354895, "link": "https://stackoverflow.com/questions/30354895/sigsegv-in-c-function/30356403#30356403", "title": "SIGSEGV in C function", "body": "<p>You are probably trying to access an array element out of bounds or trying to use too much memory.</p>\n"}], "owner": {"reputation": 11, "user_id": 4921189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nitl6.png?s=128&g=1", "display_name": "Haeral", "link": "https://stackoverflow.com/users/4921189/haeral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432142599, "creation_date": 1432137875, "last_edit_date": 1432138165, "question_id": 30354895, "link": "https://stackoverflow.com/questions/30354895/sigsegv-in-c-function", "title": "SIGSEGV in C function", "body": "<p>I'm quite a novice to C, and I'm having trouble with an excercise I have to do:\nEnter a text, and a character, use the function struct info find(char *,int,char) \nwhich returns a structure with the address of the first occurrence in the text and\nthe amount of times it appears in the text. I'm getting SIGSEGV error when trying to use it. I've marked the lines with apparent problems:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct info{\n    char *ret;\n    int length;\n};\n\nchar * load(int *);\nstruct info find(char *, int, char);\n\nint main(void)\n{\n    char *TP;\n    char character;\n    struct info SP;\n    int times;\n\n    TP=load(&amp;times);                        //loads the text\n    printf(\"Enter the character to find\");\n    scanf(\"%c\", &amp;character);\n    //finds a character, and returns a struct   with the address of the first\n    //occurrence in the text and the amount of times it appears in the text\n    SP=find(TP, times, character);\n\n    if(SP.ret!=NULL)\n    {\n        printf(\"%s\", SP.ret);\n        printf(\"The length of the displayed text is %d\", SP.length);\n    }\n    else\n    {\n        printf(\"Character doesn't exist in the text\");\n    }\n\n    return(0);\n}\n\nchar * load(int *times)\n{\n    static char text[1000];\n    printf(\"Enter text, max 1000 chars\\n\");\n    while((*times&lt;1000)&amp;&amp;(((text[*times])=getchar())!=EOF))\n    {\n        *times++;                           //call stack here\n    }\n    text[*times]='\\0';                      //call stack here\n    return(text);\n}\n\nstruct info find(char *TP, int cant, char character)\n{\n    static struct info aux;\n    aux.ret=strchr(TP,character);\n    aux.length=strlen(aux.ret);\n    return(aux);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1432137089, "post_id": 30354556, "comment_id": 48801430, "body": "I assume your actual code initializes <code>x0</code> to some valid value before calculating?"}, {"owner": {"reputation": 538, "user_id": 4912876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5f96391f5499c01e98d03957e31f98?s=128&d=identicon&r=PG", "display_name": "Toni Homedes i Saun", "link": "https://stackoverflow.com/users/4912876/toni-homedes-i-saun"}, "edited": false, "score": 2, "creation_date": 1432137772, "post_id": 30354556, "comment_id": 48801874, "body": "This is more a math question than a C question. This is one of first topics on Machine Learning courses. Too long to explain here... local minimums, overshot, ..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1432137788, "post_id": 30354556, "comment_id": 48801883, "body": "You do know, the maxima/minima of a function occur where it&#39;s derivative is 0, well you need ot use a root finding algorithm."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432137844, "post_id": 30354556, "comment_id": 48801926, "body": "@iharob BTW, if a function&#39;s derivative is 0, it&#39;s not always the min/max, could be the inflection point too."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432138765, "post_id": 30354556, "comment_id": 48802555, "body": "@szczurcio I don&#39;t think so, as I think of it, remember that I am not a mathematician, but a physicist, I see that derivative of a function equalt to <code>0</code> means, that the tangent line at the point where the derivative is <code>0</code> is parallel to the <code>x</code> axis, hence it&#39;s either a minimum or a maximum. And also, if it&#39;s a maximum or a minimum you can check with the second derivative."}, {"owner": {"reputation": 11, "user_id": 3559779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/760235f6b1e3ad9f6bdbcac20aa6d1f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3559779", "link": "https://stackoverflow.com/users/3559779/user3559779"}, "edited": false, "score": 0, "creation_date": 1432139055, "post_id": 30354556, "comment_id": 48802704, "body": "so I assume that it is quite difficult,Indeed if i want to calculate without derivative , where the function has the meximum value or the minimum for example in the range [0,5]"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432139202, "post_id": 30354556, "comment_id": 48802789, "body": "@iharob No, it is possible that, for a given <code>x0</code>, the derivative will be equal to 0 and yet <code>f(x0)</code> won&#39;t be a local maximum / minimum. For example, consider <code>f(x) = x^3</code>: <a href=\"http://www.wolframalpha.com/input/?i=x\" rel=\"nofollow noreferrer\">wolframalpha.com/input/?i=x</a>^3 (will need to reenter the expression, SO messes up the link)"}, {"owner": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432140185, "post_id": 30354556, "comment_id": 48803443, "body": "@iharob, what&#39;s the derivative of <a href=\"http://www.wolframalpha.com/input/?i=y%3Dx%5E3\" rel=\"nofollow noreferrer\"><code>y=x^3</code></a> at <code>x=0</code>?  Also a physicist here :-)  I think @szczurcio meant saddle point instead of inflection point."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432140186, "post_id": 30354556, "comment_id": 48803445, "body": "Certainly any delta <code>h</code> should be relative to <code>x</code> --&gt; <code>float h = x*0.00001;</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1432140527, "post_id": 30354556, "comment_id": 48803678, "body": "What are the bounds of <code>x</code>? This function gets funky for <code>x &lt;= -10</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432140936, "post_id": 30354556, "comment_id": 48803919, "body": "The maximum finite result of <code>float f()</code> occurs at <code>x == FLT_MAX&#47;2</code>.  The minimum finite occurs at <code>nextafterf(-10.0, 0.0)</code>.  Perhaps OP is looking for <i>local</i> maximums and minimums?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1432141875, "post_id": 30354556, "comment_id": 48804441, "body": "@szczurcio You are absolutely right, I didn&#39;t think of such function, in fact any odd power of <code>x</code> would exhibit what you describe at <code>x = 0</code>."}], "owner": {"reputation": 11, "user_id": 3559779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/760235f6b1e3ad9f6bdbcac20aa6d1f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3559779", "link": "https://stackoverflow.com/users/3559779/user3559779"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432137118, "creation_date": 1432136983, "last_edit_date": 1432137118, "question_id": 30354556, "link": "https://stackoverflow.com/questions/30354556/calculate-the-maximum-and-miimun-of-a-function-using-derivates-in-c", "title": "Calculate the maximum and miimun of a function using derivates in c", "body": "<p>I have a function returning <code>2*x + log(x+10)</code>. Is possible to find the maximum and the minimum of this function using the derivatives ?\nThis is my code  to calculate the derivative.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;math.h&gt;\n\nfloat f(float x)\n{\n    return 2*x +log(x+10);\n}\n\nvoid main()\n{\n    float x0 ;//point where i want to calculte the derivative\n    float h = 0.00001;  \n\n    printf(\"derivative in the point  %f is %f \\n\", x0 , (f(x0+h)-f(x0))/h);\n}\n</code></pre>\n\n<p>But at this point I don't know how to go ahead.</p>\n"}, {"tags": ["c", "encryption", "lua", "luasocket"], "comments": [{"owner": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "edited": false, "score": 0, "creation_date": 1432136339, "post_id": 30354283, "comment_id": 48800885, "body": "You seem to be describing ssh.  <a href=\"http://stackoverflow.com/questions/5965062/how-to-establish-an-ssh-connection-in-a-lua-script-to-execute-a-command-on-a-rem\" title=\"how to establish an ssh connection in a lua script to execute a command on a rem\">stackoverflow.com/questions/5965062/&hellip;</a>"}, {"owner": {"reputation": 113, "user_id": 4921120, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72467aac8840a267da0540bd2a3a244a?s=128&d=identicon&r=PG&f=1", "display_name": "Eliter", "link": "https://stackoverflow.com/users/4921120/eliter"}, "reply_to_user": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "edited": false, "score": 0, "creation_date": 1432136777, "post_id": 30354283, "comment_id": 48801205, "body": "It is not a server. It is a Personal Computer, without any SSH already installed (if SSH is something you install, if you&#39;re running a windows 8 client.)"}, {"owner": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "edited": false, "score": 0, "creation_date": 1432136965, "post_id": 30354283, "comment_id": 48801348, "body": "You can install SSH on Windows.  Depending on how familiar you are with Linux, you could <a href=\"http://www.howtogeek.com/howto/41560/how-to-get-ssh-command-line-access-to-windows-7-using-cygwin/\" rel=\"nofollow noreferrer\">use cygwin</a>"}, {"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1432142560, "post_id": 30354283, "comment_id": 48804786, "body": "Very simple encryption and decryption: <code>function xorFF(str) return (str:gsub(&#39;.&#39;, function(c) return c.char(255-c:byte()) end)) end</code>"}, {"owner": {"reputation": 113, "user_id": 4921120, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72467aac8840a267da0540bd2a3a244a?s=128&d=identicon&r=PG&f=1", "display_name": "Eliter", "link": "https://stackoverflow.com/users/4921120/eliter"}, "edited": false, "score": 0, "creation_date": 1432162699, "post_id": 30354283, "comment_id": 48815045, "body": "str:gsub() needs two arguments, Egor, and &quot;.&quot; is not a valid variable name, I do believe."}, {"owner": {"reputation": 334, "user_id": 4781191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sliy7Sck__U/AAAAAAAAAAI/AAAAAAAAAIY/wQ8Nat8uGkM/photo.jpg?sz=128", "display_name": "JD_GRINDER", "link": "https://stackoverflow.com/users/4781191/jd-grinder"}, "edited": false, "score": 0, "creation_date": 1432190799, "post_id": 30354283, "comment_id": 48823748, "body": "Well, you can use a simple xor since this is one of the easiest methods, after that you can, if you want, use a substitution method based on a coded rule you implement( ex: Caesar&#39;s cypher), etc. search on your favorite engine about cryptography and you will find tons of information both for beginners and for hardcore users. for the offtopic... use the same engine to search for &quot;lua server socket example&quot; and you will have some relevant links there too."}, {"owner": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 0, "creation_date": 1432425009, "post_id": 30354283, "comment_id": 48923116, "body": "You can use something like Diffie-Hellman to exchange a shared secret between the two end-points. You can then use that as the secret key(run it through a hash to get the desired bit-length) in a symmetric cipher like AES. If you don&#39;t care about encrypting the commands sent, just authenticating, look at using <code>HMAC-SHA*</code> as a way to prove the other node knows the secret-key without disclosing. The third way is to use Public key crypto, something like RSA or ECC+ECDSA to do authenication."}], "answers": [{"tags": [], "owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "is_accepted": false, "score": 1, "last_activity_date": 1432544423, "creation_date": 1432544423, "answer_id": 30434600, "question_id": 30354283, "link": "https://stackoverflow.com/questions/30354283/simple-encryption-in-lua/30434600#30434600", "title": "Simple encryption in lua", "body": "<blockquote>\n  <p>how do you get LuaSocket to reply to the client?</p>\n</blockquote>\n\n<p>The server obtains the request using <code>client:receive</code> and sends its response using <code>client:send</code>. Please note that even if the documentation calls the variable \"client\", it doesn't mean the client side of the connection. Instead it means the \"connection to the client\" from the server's point of view, returned by <code>client:accept</code>.</p>\n\n<p>See <a href=\"http://w3.impa.br/~diego/software/luasocket/old/luasocket-2.0-beta/introduction.html\" rel=\"nofollow\">http://w3.impa.br/~diego/software/luasocket/old/luasocket-2.0-beta/introduction.html</a></p>\n"}], "owner": {"reputation": 113, "user_id": 4921120, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72467aac8840a267da0540bd2a3a244a?s=128&d=identicon&r=PG&f=1", "display_name": "Eliter", "link": "https://stackoverflow.com/users/4921120/eliter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432544423, "creation_date": 1432136238, "question_id": 30354283, "link": "https://stackoverflow.com/questions/30354283/simple-encryption-in-lua", "title": "Simple encryption in lua", "body": "<p>I was wondering, what would be the easiest way to encrypt a message, into a 128-bit with a key. I wanted to code something on my personal computer, that would use LuaSocket, and based on what is sent to my PC, the computer executes <em>X</em> command. This is just something easy, and something for me to code, so I can remotely access my computer, from another computer. I want to make the script first require a password, before granting access to ANY command. But, if someone is spying on the connection, they can take the password, and abuse my PC. So, is there a simple way to securely communicate between MY PC, and the PC that is connecting with my PC (dunno much about encryption)? (somewhat-off-topic: how do you get LuaSocket to reply to the client? lua.org explains client-to-server, but how do you do server-to-client?)</p>\n"}, {"tags": ["c", "pointers", "printf", "memory-address", "unary-operator"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 17, "creation_date": 1432136088, "post_id": 30354097, "comment_id": 48800692, "body": "<code>void main()</code> should be <code>int main(void)</code>. If your book, tutorial, or instructor told you to use <code>void main()</code>, find a better one."}, {"owner": {"reputation": 927, "user_id": 4955995, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1080487418662922/picture?type=large", "display_name": "Prakhar Agrawal", "link": "https://stackoverflow.com/users/4955995/prakhar-agrawal"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1489682719, "post_id": 30354097, "comment_id": 72789274, "body": "@KeithThompson How does that matter?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 927, "user_id": 4955995, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1080487418662922/picture?type=large", "display_name": "Prakhar Agrawal", "link": "https://stackoverflow.com/users/4955995/prakhar-agrawal"}, "edited": false, "score": 2, "creation_date": 1489691009, "post_id": 30354097, "comment_id": 72794385, "body": "@PrakharAgrawal: It matters because the 1989 ANSI C standard, which introduced the <code>void</code> keyword, also specified that the main function may be defined as <code>int main(void) { &#47;* ... *&#47; }</code>. It says nothing about <code>void main()</code>, and a conforming implementation may reject it. There are plenty of books and tutorials that suggest using <code>void main()</code>; this is a strong indication that the author really doesn&#39;t know the language very well. (This is for hosted implementations. For freestanding implementations, where the program doesn&#39;t run under an OS, the program entry point is implementation-defined."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 927, "user_id": 4955995, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1080487418662922/picture?type=large", "display_name": "Prakhar Agrawal", "link": "https://stackoverflow.com/users/4955995/prakhar-agrawal"}, "edited": false, "score": 0, "creation_date": 1489691062, "post_id": 30354097, "comment_id": 72794414, "body": "@PrakharAgrawal: See also the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a>, starting with question 11.12a."}, {"owner": {"reputation": 927, "user_id": 4955995, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1080487418662922/picture?type=large", "display_name": "Prakhar Agrawal", "link": "https://stackoverflow.com/users/4955995/prakhar-agrawal"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1489730500, "post_id": 30354097, "comment_id": 72808086, "body": "@KeithThompson Thanks!"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1505274809, "post_id": 30354097, "comment_id": 79339516, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9053658/correct-format-specifier-to-print-pointer-address\">Correct format specifier to print pointer (address)?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 6, "creation_date": 1432135978, "post_id": 30354164, "comment_id": 48800615, "body": "Important thing to cast to <code>void *</code>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1432136398, "post_id": 30354164, "comment_id": 48800917, "body": "@Blue Moon - why is it important to cast (void *) ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1432137888, "post_id": 30354164, "comment_id": 48801959, "body": "I tested, in a little app, printing address of variable with and without cast but got same result.   But clearly the standard&#39;s statement ( <i>p The argument shall be a pointer to void</i> ) leaves little room for interpretation.  Thank you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432141180, "post_id": 30354164, "comment_id": 48804046, "body": "So can all pointers convert to <code>void *</code>?  I <i>think</i> the answer is yes, except maybe not function pointers."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1432144886, "post_id": 30354164, "comment_id": 48806117, "body": "Yes, the any object pointer T * can be converted to void * safely and back: <b>C11 draft, 6.3.2.3, 1 pointer to void may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to void and back again</b>. But not function pointers: <b>6.3.2.3, 8 A pointer to a function of one type may be converted to a pointer to a function of another type and back again</b>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432147128, "post_id": 30354164, "comment_id": 48807422, "body": "@Blue Moon This does leave the issue of how to print a function pointer (OP&#39;s potential memory address).  Cast to <code>uintmax_t</code> and hope for the best?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1432147548, "post_id": 30354164, "comment_id": 48807665, "body": "@chux There&#39;s no standard way to print a function pointer&#39;s address. Casting to <code>void *</code> and printing with <code>%p</code> or as you say can cast to <code>uintmax_t</code> and printing <i>may</i> work in practice. But there&#39;s no such guarantee it&#39;ll work (neither is it standard conforming). The standard leaves the representation of the function pointers to as <i>implementation defined</i> and there&#39;s no guarantee that the function pointer value is some kind of integer. So casting to any integer type may not work."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432148031, "post_id": 30354164, "comment_id": 48807940, "body": "@Blue Moon C11 draft  informative <i>J.5.7 Function pointer casts</i> implies that casting to <code>void *</code> is a usual extension method to print the function pointer - though not guaranteed to be portable."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 82, "last_activity_date": 1432137245, "last_edit_date": 1432137245, "creation_date": 1432135946, "answer_id": 30354164, "question_id": 30354097, "link": "https://stackoverflow.com/questions/30354097/how-to-printf-a-memory-address-in-c/30354164#30354164", "title": "How to printf a memory address in C", "body": "<p>Use the format specifier <code>%p</code>:</p>\n\n<pre><code>printf(\"variable A is at address: %p\\n\", (void*)&amp;A);\n</code></pre>\n\n<hr>\n\n<p>The standard requires that the argument is of type <code>void*</code> for <code>%p</code> specifier. Since, <code>printf</code> is a variadic function, there's no implicit conversion to <code>void *</code> from <code>T *</code> which would happen implicitly for any non-variadic functions in C. Hence, the cast is required. To quote the standard:</p>\n\n<p><strong>7.21.6  Formatted input/output functions (C11 draft)</strong></p>\n\n<blockquote>\n  <p>p The argument shall be a pointer to void. The value of the pointer is\n  converted to a sequence of printing characters, in an\n  implementation-defined manner.</p>\n</blockquote>\n\n<p>Whereas you are using <code>%x</code>, which expects <code>unsigned int</code> whereas <code>&amp;A</code> is of type <code>int *</code>. You can read about format specifiers for <a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\">printf from the manual</a>. Format specifier mismatch in printf leads to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\"><em>undefined behaviour</em></a>. </p>\n"}, {"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 3, "creation_date": 1595281316, "post_id": 58474907, "comment_id": 111415305, "body": "Careful with this; it assumes 32-bit pointers,and won&#39;t work with 64-bit."}], "tags": [], "owner": {"reputation": 1354, "user_id": 5412470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCzZm.png?s=128&g=1", "display_name": "hmofrad", "link": "https://stackoverflow.com/users/5412470/hmofrad"}, "is_accepted": false, "score": 0, "last_activity_date": 1571588340, "creation_date": 1571588340, "answer_id": 58474907, "question_id": 30354097, "link": "https://stackoverflow.com/questions/30354097/how-to-printf-a-memory-address-in-c/58474907#58474907", "title": "How to printf a memory address in C", "body": "<p>A workaround to use <code>%x</code> with length specifier to print an <code>int</code> or <code>unsigned int</code> without compiler complaining about casting would be to use malloc:</p>\n\n<pre><code>unsigned int* D = malloc(sizeof(unsigned int)); // Allocate D\nunsigned int D_address = *((unsigned int*) &amp;D); // D address for %08x without warning\n*D = 75; // D value\nprintf(\"variable D is at address: %p / 0x%08x with value: %u\\n\", D, D_address, *D);\n</code></pre>\n\n<p>Alternatively you can compile with gcc <code>-w</code> flag to suppress those casting warnings. </p>\n"}], "owner": {"reputation": 481, "user_id": 4921101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de2f06ac49c178875eadca53415555b?s=128&d=identicon&r=PG&f=1", "display_name": "varlotbarnacle", "link": "https://stackoverflow.com/users/4921101/varlotbarnacle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101859, "favorite_count": 4, "accepted_answer_id": 30354164, "answer_count": 2, "score": 43, "last_activity_date": 1571588340, "creation_date": 1432135781, "last_edit_date": 1432143252, "question_id": 30354097, "link": "https://stackoverflow.com/questions/30354097/how-to-printf-a-memory-address-in-c", "title": "How to printf a memory address in C", "body": "<p>My code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main()\n    {\n    char string[10];\n    int A = -73;\n    unsigned int B = 31337;\n\n    strcpy(string, \"sample\");\n\n    // printing with different formats\n    printf(\"[A] Dec: %d, Hex: %x, Unsigned: %u\\n\", A,A,A);\n    printf(\"[B] Dec: %d, Hex: %x, Unsigned: %u\\n\", B,B,B);\n    printf(\"[field width on B] 3: '%3u', 10: '%10u', '%08u'\\n\", B,B,B);\n\n    // Example of unary address operator (dereferencing) and a %x\n    // format string \n    printf(\"variable A is at address: %08x\\n\", &amp;A);\n</code></pre>\n\n<p>I am using the terminal in linux mint to compile, and when I try to compile using gcc I get the following error message:</p>\n\n<pre><code>basicStringFormatting.c: In function \u2018main\u2019:\nbasicStringFormatting.c:18:2: warning: format \u2018%x\u2019 expects argument\nof type \u2018unsigned int\u2019, but argument 2 has type \u2018int *\u2019 [-Wformat=]\nprintf(\"variable A is at address: %08x\\n\", &amp;A);\n</code></pre>\n\n<p>All I am trying to do is print the address in memory of the variable A.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 25, "user_id": 4258947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/447faf1203f1b3712249bd721211630c?s=128&d=identicon&r=PG&f=1", "display_name": "iYehuda", "link": "https://stackoverflow.com/users/4258947/iyehuda"}, "edited": false, "score": 0, "creation_date": 1432134183, "post_id": 30353367, "comment_id": 48799279, "body": "@Begginer: example of <code>opendir()</code>? Or an example of a third party library?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432134219, "post_id": 30353367, "comment_id": 48799304, "body": "More interesting question (and answer) than I initially thought. I&#39;m so used to nix&#39;s (and other consumer devices&#39;) hierarchical file systems that I forgot there may be other things out there. The <i>path</i> argument to <code>fopen</code> could be anything, like an URL or database location. Classical file systems are doomed anyway."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432134415, "post_id": 30353367, "comment_id": 48799459, "body": "@PeterSchneider: Indeed. I used to forgot also that <code>open()</code> is not a C standard function, until I had to do C in Windows. About <code>fopen(url)</code> take a look at <a href=\"http://kripken.github.io/emscripten-site/index.html\" rel=\"nofollow noreferrer\">emscriptem</a>."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 3, "last_activity_date": 1432133818, "creation_date": 1432133818, "answer_id": 30353367, "question_id": 30353253, "link": "https://stackoverflow.com/questions/30353253/is-there-a-way-of-opening-a-directory-from-a-specific-path-using-stdio-h-and-std/30353367#30353367", "title": "Is there a way of opening a directory from a specific path using stdio.h and stdlib.h?", "body": "<p>The C language does not have the notion of <em>directories</em> so there is no standard C way of using them.</p>\n\n<p>The <code>&lt;dirent.h&gt;</code> thing is a POSIX API, so it should be available in any *nix OS. Other oses have other mechanisms to read the directory. For example, in Windows there is <code>FindFirstFile()</code>/<code>FindNextFile()</code>.</p>\n\n<p>You could use a third party, OS agnostic library, of course, but it will use any of these APIs under the hood.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1432134627, "last_edit_date": 1432134627, "creation_date": 1432133844, "answer_id": 30353376, "question_id": 30353253, "link": "https://stackoverflow.com/questions/30353253/is-there-a-way-of-opening-a-directory-from-a-specific-path-using-stdio-h-and-std/30353376#30353376", "title": "Is there a way of opening a directory from a specific path using stdio.h and stdlib.h?", "body": "<p>On modern Unix-like systems, the answer is No (even though you can open a directory for reading, you can't actually read from it).</p>\n\n<p>If you go back far enough in history, the answer was 'sometimes'.  If you look at p183-4 of the second edition of K&amp;R, you will see code reading a directory directly.  That simply does not work on current versions of Unix.</p>\n\n<p>You might be able to open a directory for reading, but you can't then do anything more with it.</p>\n\n<pre><code>$ cat opendot.c\n#include &lt;stdio.h&gt;\nint main(void)\n{\n    FILE *fp = fopen(\".\", \"r\");\n    if (fp != 0)\n    {\n        printf(\"OK\\n\");\n        char buffer[256];\n        size_t nbytes;\n        if ((nbytes = fread(buffer, sizeof(char), sizeof(buffer), fp)) &gt; 0)\n        {\n            for (size_t i = 0; i &lt; nbytes; i++)\n                printf(\"0x%.2X\\n\", buffer[i]);\n        }\n        else\n            printf(\"Read failed\\n\");\n        fclose(fp);\n    }\n    else\n        printf(\"Failed\\n\");\n    return 0;\n}\n$ make opendot\ngcc -O3 -g -std=c11 -Wall -Wextra -Werror opendot.c -o opendot\n$ ./opendot\nOK\nRead failed\n$\n</code></pre>\n\n<p>(Tested on Mac OS X 10.10.3 with GCC 5.1.0.)</p>\n\n<p>You can use <code>open()</code> to open a directory for reading, primarily so you can use the file descriptor in operations such as <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fchdir.html\" rel=\"nofollow\"><code>fchdir()</code></a> and\n<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/openat.html\" rel=\"nofollow\"><code>openat()</code></a>.  The <code>fopen()</code> calls illustrated above use the <code>open()</code> function underneath.</p>\n\n<p>But you can't actually read from the directory.</p>\n"}], "owner": {"reputation": 25, "user_id": 4258947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/447faf1203f1b3712249bd721211630c?s=128&d=identicon&r=PG&f=1", "display_name": "iYehuda", "link": "https://stackoverflow.com/users/4258947/iyehuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432137034, "creation_date": 1432133569, "last_edit_date": 1432137034, "question_id": 30353253, "link": "https://stackoverflow.com/questions/30353253/is-there-a-way-of-opening-a-directory-from-a-specific-path-using-stdio-h-and-std", "title": "Is there a way of opening a directory from a specific path using stdio.h and stdlib.h?", "body": "<p>I'm trying to make a program in C which gets a path of a directory and does things with the files inside.\nIs there any way of doing this without using <code>dirent.h</code> or <code>dir.h</code>?</p>\n\n<p>Also, is there any function which opens a directory with a url such as <code>fopen</code> but that opens files with a url path?</p>\n"}, {"tags": ["c", "shift"], "comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 1, "creation_date": 1432133203, "post_id": 30353001, "comment_id": 48798458, "body": "What would be the desired behavior?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1432133604, "post_id": 30353001, "comment_id": 48798790, "body": "Of course it is dropping.. Where would they go?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432133633, "post_id": 30353001, "comment_id": 48798823, "body": "Cast the upper bits var before shifting."}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432133801, "post_id": 30353001, "comment_id": 48798983, "body": "It should concatenate error_upper and error_lower in the lower 40 bits of my uint64_t error. I get that if I left shift a 32 bit int the top bits would drop off. but if I typecast it as a 64 bit int and shift it, shouldn&#39;t it move those bits into positions 33-40?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432133812, "post_id": 30353001, "comment_id": 48799000, "body": "@WeatherVane Cast to what?"}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432133898, "post_id": 30353001, "comment_id": 48799052, "body": "my original code was error = ((uint64_t) error_upper&lt;&lt;8) | error_lower; but that didn&#39;t work either."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1432134178, "post_id": 30353001, "comment_id": 48799273, "body": "Maybe your hardware doesn&#39;t handle 64-bit values as a whole but splits them somehow and loses the bits?  Can you do a shift of <b>only</b> <code>error_upper</code> without the <code>| error_lower</code> and see if you still lose the top bits?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432134225, "post_id": 30353001, "comment_id": 48799307, "body": "@EugeneSh. mybad - misread it."}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1432134283, "post_id": 30353001, "comment_id": 48799365, "body": "@AndrewHenle, that is an interesting idea. I&#39;ve already tried doing a shift strictly on error_upper and it still drops the bits, which would suggest maybe my hardware doesn&#39;t support it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432134359, "post_id": 30353001, "comment_id": 48799416, "body": "I doubt it is a hardware issue. It would be helpful if you hardcode some values, run the code and show the results."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432134429, "post_id": 30353001, "comment_id": 48799467, "body": "@SparkyGuru Please try to provide more information about which CPU and compiler that is used. The error cannot be reproduced with the code posted. I would suspect some compiler oddity on the given system, maybe a glitchy <code>uint64_t</code> handling mechanism on a 32 bit compiler."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432134437, "post_id": 30353001, "comment_id": 48799477, "body": "As @Lundin, cannot reproduce. Were the bits there in the first place?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432134714, "post_id": 30353001, "comment_id": 48799663, "body": "Btw the endianess of your SPI interface and/or display is not necessarily the same as the endianess of your CPU. SPI data is often in big endian format and MCUs may have any endianess. But I don&#39;t see how this would cause the mentioned issue."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432134725, "post_id": 30353001, "comment_id": 48799678, "body": "Your printf format needs to be <code>%0llX</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432134819, "post_id": 30353001, "comment_id": 48799761, "body": "You are just not printing it right. use <code>%llx</code>"}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432134849, "post_id": 30353001, "comment_id": 48799786, "body": "@WeatherVane right, I had a typo before, my printf format was %010x."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1432135032, "post_id": 30353001, "comment_id": 48799916, "body": "<code>printf(&quot;%010x&quot;, error);</code> is printing <code>00cedf1234</code>. <code>printf(&quot;%010llx&quot;, error);</code> is printing <code>abcedf1234</code>. I think we can close the question here.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432135230, "post_id": 30353001, "comment_id": 48800084, "body": "Indeed... the printf functions are evil. Before posting questions like this, view your actual data in the debugger maybe?"}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432134789, "post_id": 30353193, "comment_id": 48799732, "body": "@SparkyGuru AFAIK %X evaluate 32 bits variables. Your code is correct is your fprintf the problem."}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432134969, "post_id": 30353193, "comment_id": 48799870, "body": "Possibly, I don&#39;t see why it would be. is there a way I can test that?"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1432134393, "last_edit_date": 1432134393, "creation_date": 1432133428, "answer_id": 30353193, "question_id": 30353001, "link": "https://stackoverflow.com/questions/30353001/c-code-left-shift-is-shifting-but-dropping-top-bits/30353193#30353193", "title": "C code: left shift is shifting but dropping top bits", "body": "<p>Why are you saying that the upper byte is cut?\nIf I use your code and print the result is ok:</p>\n\n<pre><code>uint32_t temp = 0x01020304;\nuint32_t *disp_addr = &amp;temp;\nuint64_t error_upper;\nuint8_t error_lower;\nuint64_t error= 0;\n\nerror_lower = *(disp_addr+1);\nerror_upper = *(disp_addr+0);\nerror = (error_upper&lt;&lt;8) | error_lower;\n\nprintf(\"\\n%08X%08X\\n\",  (uint32_t)(error&gt;&gt;32), error);\n</code></pre>\n\n<p>Output is</p>\n\n<pre><code>0000000102030401\n</code></pre>\n\n<p>Are you using <code>%d</code> to printout the value?</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432135797, "post_id": 30353467, "comment_id": 48800517, "body": "when I try printf(&quot;%llx\\n&quot;, error); I get 500000ffffffffff."}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432136056, "post_id": 30353467, "comment_id": 48800667, "body": "@WeatherVane <code>double L</code> is what I used."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "edited": false, "score": 0, "creation_date": 1432136210, "post_id": 30353467, "comment_id": 48800784, "body": "@SparkyGuru if I run that exact code that&#39;s the output from the two formats. LPs deleted his recent comment, I deleted my reply."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1432136324, "post_id": 30353467, "comment_id": 48800870, "body": "<code>%x</code> requires an argument of type <code>unsigned int</code>; using it with a <code>uint64_t</code> argument has undefined behavior. <code>%llx</code> requires an argument of type <code>unsigned long long int</code>; using it with a <code>uint64_t</code> argument has undefined behavior <i>unless</i> <code>uint64_t</code> is defined as <code>unsigned long long int</code> (which it commonly is). <code>&lt;inttypes.h&gt;</code> defines macros for <code>printf</code> formats for the types defined in <code>&lt;stdint.h&gt;</code> -- or you can convert to <code>uintmax_t</code> and use <code>%ju</code>: <code>printf(&quot;%ju\\n&quot;, (uintmax_t)x);</code>"}, {"owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1432136843, "post_id": 30353467, "comment_id": 48801262, "body": "@KeithThompson Thanks, I think your comment on expected arguments helped the most. I&#39;m kind of a noob programmer. I&#39;m an EE student thrown into a programming role."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 4, "last_activity_date": 1432135777, "last_edit_date": 1432135777, "creation_date": 1432134046, "answer_id": 30353467, "question_id": 30353001, "link": "https://stackoverflow.com/questions/30353001/c-code-left-shift-is-shifting-but-dropping-top-bits/30353467#30353467", "title": "C code: left shift is shifting but dropping top bits", "body": "<p>The <code>printf</code> format specifier is incorrect.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef unsigned __int64 uint64_t;\ntypedef unsigned char uint8_t;\n\nint main(void) {\n    uint64_t error_upper, error;\n    uint8_t error_lower;\n\n    error_lower = 0x34;\n    error_upper = 0xABCEDF12;\n    error = (error_upper &lt;&lt; 8) | error_lower;\n    printf(\"%x\\n\", error);\n    printf(\"%llx\\n\", error);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>cedf1234\nabcedf1234\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1432135071, "post_id": 30353792, "comment_id": 48799940, "body": "Good comment, buy definetly not an answer"}], "tags": [], "owner": {"reputation": 538, "user_id": 4912876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5f96391f5499c01e98d03957e31f98?s=128&d=identicon&r=PG", "display_name": "Toni Homedes i Saun", "link": "https://stackoverflow.com/users/4912876/toni-homedes-i-saun"}, "is_accepted": false, "score": -1, "last_activity_date": 1432135201, "last_edit_date": 1432135201, "creation_date": 1432134944, "answer_id": 30353792, "question_id": 30353001, "link": "https://stackoverflow.com/questions/30353001/c-code-left-shift-is-shifting-but-dropping-top-bits/30353792#30353792", "title": "C code: left shift is shifting but dropping top bits", "body": "<p>Look carefully at </p>\n\n<pre><code>uint32_t *disp_addr = &amp;temp;\n...\nerror_lower = *(disp_addr+0);\n</code></pre>\n\n<p>Because <code>disp_addr</code> is a ptr to uint32_t you are storing a 32bit value in a 8bit variable. Depending on your machine endiannes and how you load <code>disp_addr</code> you may be loading the wrong data.</p>\n\n<p>You probably wanted to do:</p>\n\n<pre><code>uint32_t *disp_addr = &amp;temp;\n...\nerror_lower = *(uint8_t *)(disp_addr+0);\n</code></pre>\n\n<p>which is not the same.</p>\n"}], "owner": {"reputation": 43, "user_id": 4920911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3d5d491d3d59081211ab1351c41bce?s=128&d=identicon&r=PG&f=1", "display_name": "SparkyGuru", "link": "https://stackoverflow.com/users/4920911/sparkyguru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 30353467, "answer_count": 3, "score": 4, "last_activity_date": 1432135777, "creation_date": 1432133002, "last_edit_date": 1432134763, "question_id": 30353001, "link": "https://stackoverflow.com/questions/30353001/c-code-left-shift-is-shifting-but-dropping-top-bits", "title": "C code: left shift is shifting but dropping top bits", "body": "<p>I'm doing a small embedded project where I have 40 bits transferred through a SPI type interface. I pull these bits off of a 32 bit bus and place the upper 32 bits into a <code>uint32_t</code> variable and the lower 8 bits into a <code>uint8_t</code> variable. I'm trying to combine them into a single <code>uint64_t</code>. However when I shift by 8, it drops the top 8 bits. Here is my code.</p>\n\n<pre><code>uint64_t getError()\n{\n    uint32_t * disp_addr = (uint32_t*)(MYDISPLAY);\n\n    uint64_t error_upper;\n    uint8_t error_lower;\n    uint64_t error= 0;\n\n    error_lower = *(disp_addr+1);\n    error_upper = *(disp_addr+0);\n    error = ((uint64_t) error_upper) &lt;&lt;8 | error_lower;\n    return error;\n}\n</code></pre>\n\n<p>This code is working except for the fact that it's dropping my top 8 bits.\nAny thoughts or hints would be greatly appreciated. Thanks.</p>\n\n<p><strong>edit</strong></p>\n\n<pre><code>uint64_t getError()\n{\n    uint32_t * disp_addr = (uint32_t*)(MYDISPLAY);\n\n    uint64_t error_upper;\n    uint8_t error_lower;\n    uint64_t error= 0;\n\n    error_lower = 0x34;\n    error_upper = 0xABCDEF12;\n    error = ((uint64_t) error_upper) &lt;&lt;8 | error_lower;\n    printf(\"%010x\", error);\n    //return error;\n}\n</code></pre>\n\n<p>Results:\n00cdef1234</p>\n"}, {"tags": ["c++", "c", "gcc", "makefile", "g++"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1432133709, "post_id": 30353090, "comment_id": 48798897, "body": "I did it and when I compile I have no reference on the &quot;main&quot;. The main is in the c++ file <code>LIMITOR_TEST_example_32f.cpp</code>"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "reply_to_user": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1432134362, "post_id": 30353090, "comment_id": 48799419, "body": "Did it compile all the files? Do you see all the .o files? What I wrote there is  obviously not usable since you didn&#39;t define LD, but the principle should be right. Could you give the full code after you&#39;ve added this?"}, {"owner": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1432134875, "post_id": 30353090, "comment_id": 48799807, "body": "No it stop on the first file. But it might be for a different reason I update qustion and show the logs"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "reply_to_user": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1432135574, "post_id": 30353090, "comment_id": 48800336, "body": "@leykan LD is a common name for the linker program, in this case it is GCC as well. I added a full source that <i>could</i> work, but didn&#39;t run it."}, {"owner": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1432136042, "post_id": 30353090, "comment_id": 48800656, "body": "Thx it works !  the only thing is that I don&#39;t understand this Makefile I&#39;m gona do some research on the gramar thx"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "reply_to_user": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "edited": false, "score": 0, "creation_date": 1432137092, "post_id": 30353090, "comment_id": 48801433, "body": "I&#39;ll add some explanations to it in a few hours, too busy at the moment."}], "tags": [], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "is_accepted": true, "score": 1, "last_activity_date": 1432135517, "last_edit_date": 1432135517, "creation_date": 1432133234, "answer_id": 30353090, "question_id": 30352880, "link": "https://stackoverflow.com/questions/30352880/compile-a-project-with-c-and-c-files-separately-using-gcc-and-g/30353090#30353090", "title": "Compile a project with C and C++ files separately using gcc and g++?", "body": "<p>Try adding these rules:</p>\n\n<pre><code>%.o: %.c\n     $(CC) $(CFLAGS) $&lt;\n\n%.o: %.cpp\n     $(CPP) $(CFLAGS) $&lt;\n</code></pre>\n\n<p>And changing your main line to:</p>\n\n<pre><code>$(NAME): $(OBJ) $(OBJCPP)\n     $(LD)  $^ -o $@ $(LDFLAGS)\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Here is an attempt to integrate this in your code. I did not run this, though.</p>\n\n<pre><code>TECHAUDIO_ROOT = ../../../../../../..\nTECHAUDIO_GENERIC = $(TECHAUDIO_ROOT)/Generic\nTECHAUDIO_MALLOC_3DSL = $(TECHAUDIO_ROOT)/Tools/Malloc_3DSL\nTECHAUDIO_SIGPROC_COMMON_SRC = ../../../../SignalProcessing/RefFT/Common/src\nTECHAUDIO_SIGPROC_SRC = ../../../../SignalProcessing/RefFT/Float/src\nTECHAUDIO_LIMOTOR_SRC = ../../../RefFT/Float/src\nTECHAUDIO_LIMOTOR_COMMON_SRC = ../../../RefFT/Common/src/API\n\nINCLUDES += -I$(TECHAUDIO_GENERIC)/Common/Include \\\n            -I$(TECHAUDIO_GENERIC)/X86/Include \\\n            -I$(TECHAUDIO_MALLOC_3DSL)/RefFT/Common/Include \\\n            -I$(TECHAUDIO_SIGPROC_COMMON_SRC) \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Math \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Transform \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Filter \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Vector \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/SSTP \\\n            -I$(TECHAUDIO_LIMOTOR_SRC)/API \\\n            -I$(TECHAUDIO_LIMOTOR_COMMON_SRC) \\\n            -I$(TECHAUDIO_LIMOTOR_SRC)\n\n SRCS =     $(TECHAUDIO_LIMOTOR_SRC)/LIMITOR_main_32f.c \\\n            $(TECHAUDIO_LIMOTOR_SRC)/API/LIMITOR_API_32f.c \\\n            $(TECHAUDIO_LIMOTOR_SRC)/API/LIMITOR_API_coordinate_32f.c\n\nSRCSCPP =   $(TECHAUDIO_LIMOTOR_SRC)/Test/LIMITOR_TEST_example_32f.cpp\n#           $(TECHAUDIO_LIMOTOR_SRC)/VST/LIMITOR_VST_audioEffect_32f.cpp \\                                                                                                      \n#           $(TECHAUDIO_LIMOTOR_SRC)/VST/LIMITOR_VST_main_32f.cpp                                                                                                               \n\nNAME = Bonjour\n\nCC = gcc -c\nCPP = g++ -c\nLD = g++ -o\n\nCFLAGS += $(INCLUDES)\nCFLAGS += -D_X86_GCC_4_1_1_TARGET_\n#CFLAGS +=-D_X86_VC8_TARGET_                                                                                                                                                        \n\nRM = rm -f\n\nOBJ= $(SRCS:.c=.o)\n\nOBJCPP= $(SRCSCPP:.cpp=.o)\n\n%.o: %.c\n    $(CC) $&lt; -o $@ $(CFLAGS)\n\n%.o: %.cpp\n    $(CPP) $&lt; -o $@  $(CFLAGS)\n\nall: $(NAME)\n\n$(NAME): $(OBJ) $(OBJCPP)\n    $(LD) $@  $^ -lm\n\nclean:\n         $(RM) $(OBJ) $(OBJCPP)\n\nfclean: clean\n    $(RM) $(NAME)\n\nre: fclean all\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 2803140, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/56cd341723f5ce202e38bedc94a4aa65?s=128&d=identicon&r=PG&f=1", "display_name": "leykan", "link": "https://stackoverflow.com/users/2803140/leykan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 30353090, "answer_count": 1, "score": 1, "last_activity_date": 1432199322, "creation_date": 1432132724, "last_edit_date": 1432199322, "question_id": 30352880, "link": "https://stackoverflow.com/questions/30352880/compile-a-project-with-c-and-c-files-separately-using-gcc-and-g", "title": "Compile a project with C and C++ files separately using gcc and g++?", "body": "<p>I have a project that contains C and C++ files and I created a Makefile to compile this project.</p>\n\n<p>Is it possible to have a Makefile that will \"separate\" the C and C++ files, the C files will be compile with gcc and the C++ files with g++ and create one binary ?</p>\n\n<p>This is the Makefile I created:</p>\n\n<pre><code>TECHAUDIO_ROOT = ../../../../../../..\nTECHAUDIO_GENERIC = $(TECHAUDIO_ROOT)/Generic\nTECHAUDIO_MALLOC_3DSL = $(TECHAUDIO_ROOT)/Tools/Malloc_3DSL\nTECHAUDIO_SIGPROC_COMMON_SRC = ../../../../SignalProcessing/RefFT/Common/src\nTECHAUDIO_SIGPROC_SRC = ../../../../SignalProcessing/RefFT/Float/src\nTECHAUDIO_LIMOTOR_SRC = ../../../RefFT/Float/src\nTECHAUDIO_LIMOTOR_COMMON_SRC = ../../../RefFT/Common/src/API\n\nINCLUDES += -I$(TECHAUDIO_GENERIC)/Common/Include \\\n            -I$(TECHAUDIO_GENERIC)/X86/Include \\\n            -I$(TECHAUDIO_MALLOC_3DSL)/RefFT/Common/Include \\\n            -I$(TECHAUDIO_SIGPROC_COMMON_SRC) \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Math \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Transform \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Filter \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Vector \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/SSTP \\\n            -I$(TECHAUDIO_LIMOTOR_SRC)/API \\\n            -I$(TECHAUDIO_LIMOTOR_COMMON_SRC) \\\n            -I$(TECHAUDIO_LIMOTOR_SRC)\n\nSRCS =      $(TECHAUDIO_LIMOTOR_SRC)/LIMITOR_main_32f.c \\\n            $(TECHAUDIO_LIMOTOR_SRC)/API/LIMITOR_API_32f.c \\\n            $(TECHAUDIO_LIMOTOR_SRC)/API/LIMITOR_API_coordinate_32f.c\n\nSRCSCPP =   $(TECHAUDIO_LIMOTOR_SRC)/Test/LIMITOR_TEST_example_32f.cpp\n#           $(TECHAUDIO_LIMOTOR_SRC)/VST/LIMITOR_VST_audioEffect_32f.cpp \\                                                                                                      \n#           $(TECHAUDIO_LIMOTOR_SRC)/VST/LIMITOR_VST_main_32f.cpp                                                                                                               \n\nNAME = Bonjour\n\nCC = gcc\n\nCPP = g++\n\nCFLAGS += $(INCLUDES)\nCFLAGS += -D_X86_GCC_4_1_1_TARGET_\n#CFLAGS +=-D_X86_VC8_TARGET_                                                                                                                                                        \nRM = rm -f\n\nOBJ= $(SRCS:.c=.o)\n\nOBJCPP= $(SRCSCPP:.cpp=.o)\n\nall: $(NAME)\n\n$(NAME): $(OBJ)\n        $(CC) $(CFLAGS) $(OBJ) -o $(NAME) -lm\n         $(OBJCPP)\n        $(CPP) $(CFLAGS) $(OBJCPP) -o $(NAME) -lm\n\nclean:\n        $(RM) $(OBJ) $(OBJCPP)\n\nfclean: clean\n        $(RM) $(NAME)\nre: fclean all\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Below is an updated version of the Makefile:</p>\n\n<pre><code>TECHAUDIO_ROOT = ../../../../../../..\nTECHAUDIO_GENERIC = $(TECHAUDIO_ROOT)/Generic\nTECHAUDIO_MALLOC_3DSL = $(TECHAUDIO_ROOT)/Tools/Malloc_3DSL\nTECHAUDIO_SIGPROC_COMMON_SRC = ../../../../SignalProcessing/RefFT/Common/src\nTECHAUDIO_SIGPROC_SRC = ../../../../SignalProcessing/RefFT/Float/src\nTECHAUDIO_LIMOTOR_SRC = ../../../RefFT/Float/src\nTECHAUDIO_LIMOTOR_COMMON_SRC = ../../../RefFT/Common/src/API\n\nINCLUDES += -I$(TECHAUDIO_GENERIC)/Common/Include \\\n            -I$(TECHAUDIO_GENERIC)/X86/Include \\\n            -I$(TECHAUDIO_MALLOC_3DSL)/RefFT/Common/Include \\\n            -I$(TECHAUDIO_SIGPROC_COMMON_SRC) \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Math \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Transform \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Filter \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/Vector \\\n            -I$(TECHAUDIO_SIGPROC_SRC)/SSTP \\\n            -I$(TECHAUDIO_LIMOTOR_SRC)/API \\\n            -I$(TECHAUDIO_LIMOTOR_COMMON_SRC) \\\n            -I$(TECHAUDIO_LIMOTOR_SRC)\n\n SRCS =     $(TECHAUDIO_LIMOTOR_SRC)/LIMITOR_main_32f.c \\\n            $(TECHAUDIO_LIMOTOR_SRC)/API/LIMITOR_API_32f.c \\\n            $(TECHAUDIO_LIMOTOR_SRC)/API/LIMITOR_API_coordinate_32f.c\n\nSRCSCPP =   $(TECHAUDIO_LIMOTOR_SRC)/Test/LIMITOR_TEST_example_32f.cpp\n#           $(TECHAUDIO_LIMOTOR_SRC)/VST/LIMITOR_VST_audioEffect_32f.cpp \\                                                                                                      \n#           $(TECHAUDIO_LIMOTOR_SRC)/VST/LIMITOR_VST_main_32f.cpp                                                                                                               \n\nNAME = Bonjour\n\nCC = gcc\n\nCPP = g++\n\nCFLAGS += $(INCLUDES)\nCFLAGS += -D_X86_GCC_4_1_1_TARGET_\n#CFLAGS +=-D_X86_VC8_TARGET_                                                                                                                                                        \n\nRM = rm -f\n\nOBJ= $(SRCS:.c=.o)\n\nOBJCPP= $(SRCSCPP:.cpp=.o)\n\n%.o: %.c\n        $(CC) $(CFLAGS) $&lt;\n\n%.o: %.cpp\n        $(CPP) $(CFLAGS) $&lt;\n\nall: $(NAME)\n\n$(NAME): $(OBJ) $(OBJCPP)\n           $(LD)  $^ -o $@ $(LDFLAGS)\n\nclean:\n         $(RM) $(OBJ) $(OBJCPP)\n\nfclean: clean\n        $(RM) $(NAME)\nre: fclean all\n</code></pre>\n\n<p>These are the errors I receive when I execute <code>make</code>:</p>\n\n<pre><code>/usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): r\u00e9adressage 20 a un index de symbole 13 invalide\n/usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): r\u00e9adressage 21 a un index de symbole 22 invalide\n/usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_line): r\u00e9adressage 0 a un index de symbole 2 invalide\n/usr/lib/gcc/i686-linux-gnu/4.8/../../../i386-linux-gnu/crt1.o: dans la fonction \u00ab _start \u00bb:\n(.text+0x18): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab main \u00bb\n/tmp/ccvLa3z6.o: dans la fonction \u00ab LIMITOR_3DSL_getStatusSize_32f \u00bb:\nLIMITOR_main_32f.c:(.text+0x1e): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab MALLOC_3DSL_compute_memory_size_align_heap \u00bb\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "malloc", "sizeof"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1432132706, "post_id": 30352850, "comment_id": 48798082, "body": "Warning: when calling <code>sizeof</code> in <code>malloc</code> (and the like) <a href=\"http://stackoverflow.com/a/17258659/1151654\">you should write it</a> as <code>ptr = malloc(sizeof(*ptr) * ...);</code> instead of <code>ptr = malloc(sizeof(ptrtype*) * ...);</code>. Here, for instance, you should write <code>malloc(sizeof(*(bt-&gt;node[n].key))*(*keylen));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1432133253, "post_id": 30352946, "comment_id": 48798503, "body": "<code>sizeof</code> counts bytes, not bits."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1432134557, "post_id": 30352946, "comment_id": 48799559, "body": "@KeithThompson ah yes indeed."}], "tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": false, "score": 1, "last_activity_date": 1432134547, "last_edit_date": 1432134547, "creation_date": 1432132889, "answer_id": 30352946, "question_id": 30352850, "link": "https://stackoverflow.com/questions/30352850/size-of-array-allocated-with-malloc-is-showing-one-less-than-expected/30352946#30352946", "title": "size of array allocated with malloc is showing one less than expected", "body": "<p><code>sizeof(bt-&gt;node[n].key)</code> is <code>sizeof(uint16_t*)</code> which could be 8 (on 64 bits)\n<code>sizeof(bt-&gt;node[n].key[0])</code> is <code>sizeof(*(uint16_t*))</code> which is 2</p>\n\n<p>And <code>8 / 2</code> equals 4.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1432134316, "last_edit_date": 1432134316, "creation_date": 1432132896, "answer_id": 30352950, "question_id": 30352850, "link": "https://stackoverflow.com/questions/30352850/size-of-array-allocated-with-malloc-is-showing-one-less-than-expected/30352950#30352950", "title": "size of array allocated with malloc is showing one less than expected", "body": "<p><code>sizeof</code> operator produces the <em>size</em> of a <code>type</code>, not the amount of memory <em>allocated to a pointer</em>.</p>\n\n<p>In your case, what happenning is</p>\n\n<ul>\n<li><code>key</code> is of type <code>int16_t *</code></li>\n<li><code>sizeof(bt-&gt;node[n].key)</code> gives <code>sizeof(int16_t *)</code> which on 64 bit, <code>8</code></li>\n<li><code>sizeof(bt-&gt;node[n].key[0])</code> which is <code>sizeof(int16_t )</code>, which is <code>2</code></li>\n</ul>\n\n<p>Ultimately,  it's <code>8/2</code> = 4.</p>\n\n<p>There is absolutely no measurement of the amount of memory returned by <code>malloc()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 4912876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5f96391f5499c01e98d03957e31f98?s=128&d=identicon&r=PG", "display_name": "Toni Homedes i Saun", "link": "https://stackoverflow.com/users/4912876/toni-homedes-i-saun"}, "is_accepted": true, "score": 4, "last_activity_date": 1432133199, "creation_date": 1432133199, "answer_id": 30353075, "question_id": 30352850, "link": "https://stackoverflow.com/questions/30352850/size-of-array-allocated-with-malloc-is-showing-one-less-than-expected/30353075#30353075", "title": "size of array allocated with malloc is showing one less than expected", "body": "<p>Look carefully, you are confusing the pointer with the array:</p>\n\n<blockquote>\n  <p>Where bt->node[n].key is a pointer to int16_t.</p>\n</blockquote>\n\n<p>Thus, bt->node[n].key is a pointer to the allocated memory, not the allocated memory itself, and <code>sizeof bt-&gt;node[n].key</code> is <code>sizeof &lt;pointer to ...&gt;</code> which, in your system is 8 (64 bits).</p>\n\n<pre><code>8 / sizeof uint16_t = 8 / 2 = 4\n</code></pre>\n\n<p>You can not check the size of the allocated memory chunk, you have to trust <code>malloc()</code> to work well or return <code>NULL</code> if it can't.</p>\n"}], "owner": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 30353075, "answer_count": 3, "score": 0, "last_activity_date": 1432134547, "creation_date": 1432132627, "last_edit_date": 1432134465, "question_id": 30352850, "link": "https://stackoverflow.com/questions/30352850/size-of-array-allocated-with-malloc-is-showing-one-less-than-expected", "title": "size of array allocated with malloc is showing one less than expected", "body": "<p>I have this: </p>\n\n<pre><code>alloc(Btree *bt, uint8_t *keylen, int16_t n)\n{\n\nbt-&gt;node[n].key = malloc(sizeof(int16_t)*(*keylen));\n{\n</code></pre>\n\n<p>Where <code>bt-&gt;node[n].key</code> is a pointer to <code>int16_t</code>.</p>\n\n<p>With the debugger running, I can verify that <code>keylen</code> is <code>5</code>.</p>\n\n<p>But if I put:</p>\n\n<pre><code>int kl = sizeof(bt-&gt;node[n].key) / sizeof(bt-&gt;node[n].key[0])\n</code></pre>\n\n<p><code>kl</code> is <code>4</code>.</p>\n\n<p>What did I do wrong?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1432132919, "creation_date": 1432132919, "answer_id": 30352959, "question_id": 30352652, "link": "https://stackoverflow.com/questions/30352652/swaps-and-comparisons-in-quicksort/30352959#30352959", "title": "Swaps and Comparisons in Quicksort", "body": "<p>You can:</p>\n\n<ul>\n<li>Make <code>swapcounter</code> global.</li>\n<li>Make the function take a pointer to the variable.</li>\n<li>Make the function call another function to do the counting, thus making maintaining the counter state Someone Else's problem.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4920858, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206277084303675/picture?type=large", "display_name": "Thanasis Papailiou", "link": "https://stackoverflow.com/users/4920858/thanasis-papailiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432132919, "creation_date": 1432132140, "last_edit_date": 1432132871, "question_id": 30352652, "link": "https://stackoverflow.com/questions/30352652/swaps-and-comparisons-in-quicksort", "title": "Swaps and Comparisons in Quicksort", "body": "<p>I think I have managed to figure the comparisons but I am trying to figure out how can I count the numbers of swaps. I have a problem with the value of <code>swapcounter</code> and the recursion. Any ideas?  </p>\n\n<pre><code>int quicksort (int nums[],int n,int left,int right){//quicksort takes an array, the leftmost index and the rightmost index\n\n    int swapCounter=0;\n    int i=left,j=right,temp;\n    int comparisonCounter = 0;\n    int pivot = nums[(left + right) / 2];\n/* partition */\n    while(i&lt;=j){\n    comparisonCounter++;\n        while(nums[i]&lt;=pivot)\n            i++;\n        while(nums[j]&gt;pivot)\n            j--;\n        if(i&lt;=j){\n            temp=nums[i];\n            nums[i]=nums[j];\n            nums[j]=temp;\n            i++;\n            j--;\n            swapCounter++;\n        }\n    }  \n\n    /* recursion */\n    if (left &lt; j)\n        comparisonCounter+=quicksort(nums,n, left, j);\n    if (i &lt; right)\n        comparisonCounter+=quicksort(nums,n, i, right);\n\n    printf(\"\\nSwaps=%d\\n\",swapCounter);\n    return comparisonCounter;\n    }\n</code></pre>\n"}, {"tags": ["c", "kernel", "specifications", "pci-e"], "comments": [{"owner": {"reputation": 3489, "user_id": 2101909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tQb0i.jpg?s=128&g=1", "display_name": "ben rudgers", "link": "https://stackoverflow.com/users/2101909/ben-rudgers"}, "edited": false, "score": 0, "creation_date": 1432132179, "post_id": 30352507, "comment_id": 48797679, "body": "What code have you tried?"}, {"owner": {"reputation": 725, "user_id": 4618915, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ecf6fed6fc438de89d293c30927f0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "Kroma", "link": "https://stackoverflow.com/users/4618915/kroma"}, "reply_to_user": {"reputation": 3489, "user_id": 2101909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tQb0i.jpg?s=128&g=1", "display_name": "ben rudgers", "link": "https://stackoverflow.com/users/2101909/ben-rudgers"}, "edited": false, "score": 0, "creation_date": 1432132309, "post_id": 30352507, "comment_id": 48797773, "body": "It is about the understanding first. You cannot code without being sure how to make it work. I just need to know if I get the whole picture before coding."}, {"owner": {"reputation": 3489, "user_id": 2101909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tQb0i.jpg?s=128&g=1", "display_name": "ben rudgers", "link": "https://stackoverflow.com/users/2101909/ben-rudgers"}, "edited": false, "score": 0, "creation_date": 1432132601, "post_id": 30352507, "comment_id": 48797990, "body": "That seems too-broad for StackOverflow&#39;s question and answer format because it will take a lot of effort to explain 800 pages of documentation. On the other hand, if there is some code, the question is narrowed."}, {"owner": {"reputation": 725, "user_id": 4618915, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ecf6fed6fc438de89d293c30927f0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "Kroma", "link": "https://stackoverflow.com/users/4618915/kroma"}, "reply_to_user": {"reputation": 3489, "user_id": 2101909, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tQb0i.jpg?s=128&g=1", "display_name": "ben rudgers", "link": "https://stackoverflow.com/users/2101909/ben-rudgers"}, "edited": false, "score": 0, "creation_date": 1432133160, "post_id": 30352507, "comment_id": 48798420, "body": "If I show the pseudo code to keep it simple, you think it is alright ben ?"}], "owner": {"reputation": 725, "user_id": 4618915, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ecf6fed6fc438de89d293c30927f0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "Kroma", "link": "https://stackoverflow.com/users/4618915/kroma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432136393, "creation_date": 1432131805, "last_edit_date": 1432136393, "question_id": 30352507, "link": "https://stackoverflow.com/questions/30352507/pci-express-communicate-kernel-graphic-card", "title": "Pci express - communicate kernel -&gt; graphic card", "body": "<p><strong>The final goal is to be able to write to a PCIE device from the kernel, without the already made functions, to understand the inner working</strong> (and then, obviously, use them again).</p>\n\n<p>I saw the PCIE specs which are 800+ pages (the 3.0 especially). </p>\n\n<p>Huge is not enough to describe that.</p>\n\n<p>I cannot afford to go along those at the step I currently am (reading 2.0 and 3.1 would be very time consuming).</p>\n\n<p>I read many sources and it seems that we can write to pcie via messages (and not buses anymore like in pci).\nPcie should be memory mapped so I think that we could write to that memory from the kernel and aknowledge the driver that we did it.</p>\n\n<p>The driver will then make the <code>out(l/b)</code> assembly instruction to notify the device in question.</p>\n\n<p>This my very high level understanding of pcie (I don't want to dive into the spec details now). It may not be correct though. </p>\n\n<p>If someone could tell me where I am wrong in my thinking, that would be very helpful.</p>\n\n<p>Here is the pseudo code of my thinking (no error checking and such):</p>\n\n<pre><code>static int64_t my_driver_address;\n\npcie_write_device(uint32_t * my_data_physical_address) {\n // we pass the physical address where the data is. It has to be contiguous.\n pcie_send_address(&amp;my_driver_address, my_data_physical_address);\n\n // now the device is acknowledged that some data has been mmaped, knows where and will treat it as such\n}\n\npcie_read_device(anytype_t ** buff){\n\n // this function calls the inq assembly instruction and store the resulting address in the pointer\n ptr * address_to_read = pcie_get_data();\n\n // read the mmaped memory region. No mem allocation code.\n *buf = get_data_from region(address_to_read);\n\n // now data from device is in the buff, ready to be sent to the OS or anything..\n}\n</code></pre>\n"}, {"tags": ["c", "gps", "arm", "embedded"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432131504, "post_id": 30352132, "comment_id": 48797053, "body": "What will happen when there are not enough <code>COMMA</code>s in the input, or if the input is longer than 99 bytes?"}, {"owner": {"reputation": 13, "user_id": 4688673, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3215981cde7931aa109cf3d44cf4afeb?s=128&d=identicon&r=PG&f=1", "display_name": "P N R", "link": "https://stackoverflow.com/users/4688673/p-n-r"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432131918, "post_id": 30352132, "comment_id": 48797434, "body": "this is my raw data from the gps continuosly getting. $GPGGA,060723.00,1234.5678,N,1234.5678,E,,,M,,M,,*81.from this function based on the comma position i&#39;m storing the values into the arrays."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1432132381, "post_id": 30352132, "comment_id": 48797828, "body": "DO NOT rely on this input! Always be prepared to have invalid chars in the input!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432132490, "post_id": 30352132, "comment_id": 48797903, "body": "Aside: you should be picking up the <code>N</code> and the <code>E</code> too, in case they say <code>S</code> and <code>W</code>. Perhaps your app doesn&#39;t expect that, but your assumptions generally make for weak code."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432132762, "post_id": 30352132, "comment_id": 48798131, "body": "@Olaf last 2 bytes, after *, are checksum. I hope OP check it to validate RX buffer. If this is granted function can avoid to check integrity twice."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1432133032, "post_id": 30352132, "comment_id": 48798341, "body": "@LPs: Yes, but to me it looks like buffer overflow in the first place. Further improvements need to be done, but it would be sufficient to verify the checksum at the end. And: not sure what kind of cheksum this is (suppose it is not a proper CRC?), but I would check validity of each char anyway using a proper lightweight scanner/parser. This asumes corruption to be unlikely, otherwise I would first verify the checksum."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432133256, "post_id": 30352132, "comment_id": 48798505, "body": "@Olaf Checksum is a simple XOR of bytes. I guess/hope OP is validating RX chars on the RX reciver function/interrupt."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1432133476, "post_id": 30352132, "comment_id": 48798661, "body": "@LPs: I had expected this, taking the age of NEMA into account. So, one really should not just use this to validate the input, but also use the formatting."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432131956, "post_id": 30352327, "comment_id": 48797474, "body": "Corruption from an interrupt is much less likely than from malformed input data (corruption during reception e.g. or unexpected input). One should always check external input at least. Finding corruption from an interrupt is actually a pain in the a** to find."}], "tags": [], "owner": {"reputation": 96, "user_id": 4759815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85aae512422569deb694afdf67f8acda?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Klitzke", "link": "https://stackoverflow.com/users/4759815/andrew-klitzke"}, "is_accepted": false, "score": 0, "last_activity_date": 1432131367, "creation_date": 1432131367, "answer_id": 30352327, "question_id": 30352132, "link": "https://stackoverflow.com/questions/30352132/after-making-function-call-in-the-programme-control-is-jumping-into-the-unspeci/30352327#30352327", "title": "After making function call in the programme ,control is jumping into the unspecified memory location", "body": "<p>Sounds like corruption to me. Most likely stack overflow or stack corruption. I'd halt in the debugger at different points in the code and take a look at the link register that has been pushed onto the stack and see if it changes at any point during execution. It could be getting corrupted from an interrupt or other function as well. This will require understanding of the ARM/C calling convention, so you may have to do some research.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4688673, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3215981cde7931aa109cf3d44cf4afeb?s=128&d=identicon&r=PG&f=1", "display_name": "P N R", "link": "https://stackoverflow.com/users/4688673/p-n-r"}, "edited": false, "score": 0, "creation_date": 1432132466, "post_id": 30352388, "comment_id": 48797888, "body": "when i&#39;m debugging the code it is successfully executing the statements untill the &quot;}&quot; of the function ,after that it is going into the unspecified memory locations.With the help of debug option i observed that the assembly code ,there the control is jumping into the unspecified memory insted of giving the control to calling function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13, "user_id": 4688673, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3215981cde7931aa109cf3d44cf4afeb?s=128&d=identicon&r=PG&f=1", "display_name": "P N R", "link": "https://stackoverflow.com/users/4688673/p-n-r"}, "edited": false, "score": 0, "creation_date": 1432132707, "post_id": 30352388, "comment_id": 48798084, "body": "If it does not return to the caller, there is no use in further debugging. This is a clear sign the return address has become corrupted, resulting in UB. So, you should follow my answer, as that is exactly what would happen on buffer overflow (unless your CPU has an ascending stack - quite unlikely)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432132919, "post_id": 30352388, "comment_id": 48798253, "body": "@LPs answer addresses that, if <code>str_cpy</code> expects a <code>&#39;\\0&#39;</code> terminator, it skips the <code>CR&#47;LF</code> and overflows the local buffer when it has found a <code>&#39;\\0&#39;</code> somewhere."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432133348, "post_id": 30352388, "comment_id": 48798570, "body": "@WeatherVane: yes, that&#39;s what I meant by <code>NUL</code>-terminated. Just don&#39;t refer to NEMA explicitly. Question is which format the input actually has and if it is properly terminated or not. The receiver thread/interrupt may very well do this and even veryfy the checksum (I might have preferred that actually, depending on tolerable interrupt behaviour)."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 2, "last_activity_date": 1432132174, "last_edit_date": 1432132174, "creation_date": 1432131500, "answer_id": 30352388, "question_id": 30352132, "link": "https://stackoverflow.com/questions/30352132/after-making-function-call-in-the-programme-control-is-jumping-into-the-unspeci/30352388#30352388", "title": "After making function call in the programme ,control is jumping into the unspecified memory location", "body": "<p>This sounds like a classic buffer overflow overwriting the return address. Check tempbuff. <code>str_cpy()</code> might be a good start (if it is like <code>strcpy()</code>, it will overflow the buffer is the source is not <code>NUL</code>-terminated). You might pass the buffer size to it to prevent overflow under all circumstances (even of the source is malformed).</p>\n\n<p>The remaining code is also pretty \"optimistic\", as it will exhibit <strong>undefined behaviour</strong> (UB) if the input is corrupted. Without proper range-checking, I would not accept such code! Keep in mind that all external (not self-generated) data may be corrupted. And according to murphy's law it <em>will</em>.</p>\n\n<p>Also, It is not clear why you copy the data first to the buffer. It would be much faster and easier to parse it directly from the input buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 3365, "user_id": 2564696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfecfacff3f61943083d01444ade243?s=128&d=identicon&r=PG", "display_name": "dmuir", "link": "https://stackoverflow.com/users/2564696/dmuir"}, "is_accepted": false, "score": 0, "last_activity_date": 1432131855, "creation_date": 1432131855, "answer_id": 30352527, "question_id": 30352132, "link": "https://stackoverflow.com/questions/30352132/after-making-function-call-in-the-programme-control-is-jumping-into-the-unspeci/30352527#30352527", "title": "After making function call in the programme ,control is jumping into the unspecified memory location", "body": "<p>As Andrew said, it sounds like stack corruption. One possibility is that you are writing beyond the end of tmpbuff, and it looks to me as if that's in the str_cpy. You could try using strncpy instead, or (massively) increasing the tmpbuff size; if that sorts the problem then the thing to fix is that the rx buffer is not giving you a string of length at most 99, as your code assumes.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432132714, "post_id": 30352584, "comment_id": 48798091, "body": "Re your last remark about <code>commapos</code>, switching between <code>unsigned char</code> and <code>int</code> variables will sooner or later lead to tears."}, {"owner": {"reputation": 13, "user_id": 4688673, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3215981cde7931aa109cf3d44cf4afeb?s=128&d=identicon&r=PG&f=1", "display_name": "P N R", "link": "https://stackoverflow.com/users/4688673/p-n-r"}, "edited": false, "score": 0, "creation_date": 1432197428, "post_id": 30352584, "comment_id": 48827602, "body": "changes helped me a lot."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 3, "last_activity_date": 1432133021, "last_edit_date": 1432133021, "creation_date": 1432131993, "answer_id": 30352584, "question_id": 30352132, "link": "https://stackoverflow.com/questions/30352132/after-making-function-call-in-the-programme-control-is-jumping-into-the-unspeci/30352584#30352584", "title": "After making function call in the programme ,control is jumping into the unspecified memory location", "body": "<p>I guess you are using <a href=\"http://en.wikipedia.org/wiki/NMEA_0183\" rel=\"nofollow\">NMEA 0183</a> standard protocol for GPS.</p>\n\n<p>Messages are <code>&lt;CR&gt; &lt;LF&gt;</code> terminated and not NULL terminated.</p>\n\n<p>Then check if your is not using string function to do the work.</p>\n\n<p>I mean that the str_cpy has to look like below:</p>\n\n<pre><code>str_cpy(char *tempbuff, char *aa_GPS_GPGGA_RxBuffer, uint8_t bufferlength)\n{\n   for (int i=0; i&lt;bufferLength; i++)\n   {\n      *(tempbuff+i) = *(aa_GPS_GPGGA_RxBuffer+i);\n   }\n} \n</code></pre>\n\n<p>Another problem I think your application could have is how <code>aa_GPS_GPGGA_RxBuffer</code> is filled. This because of you are coping the RXmessage in a temp buffer.\nI guess that the reason that drive you to copy received message to a tempbuffer is  that the RX buffer has to be refilled by another task/interrupt.</p>\n\n<p>In that case, are use sure that the RX buffer cannot be overwritted during your copy to tempbuffer?  </p>\n\n<p>Anyway you have always to check integriti of your message before to do this: I hope you did the checksum of received messages before to validate the RX buffer.</p>\n\n<p>Last little thing, this code doesn't make sense:</p>\n\n<pre><code>commapos = loop2 ; \nloop1 = 0;\nloop2 = 0;\nloop2 =  commapos + 1;   \n</code></pre>\n\n<p>you can change it to:</p>\n\n<pre><code>loop1 = 0;\nloop2++;   \n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As repored by  @Weather Vane: switching between <code>unsigned char</code> and <code>int</code> variables is never a good idea.</p>\n"}], "owner": {"reputation": 13, "user_id": 4688673, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3215981cde7931aa109cf3d44cf4afeb?s=128&d=identicon&r=PG&f=1", "display_name": "P N R", "link": "https://stackoverflow.com/users/4688673/p-n-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 30352584, "answer_count": 4, "score": 0, "last_activity_date": 1432133021, "creation_date": 1432130892, "question_id": 30352132, "link": "https://stackoverflow.com/questions/30352132/after-making-function-call-in-the-programme-control-is-jumping-into-the-unspeci", "title": "After making function call in the programme ,control is jumping into the unspecified memory location", "body": "<p>i am developing a gps code which takes the raw data from the gps and decodes the data and saves it into the  respected variables(arrays).The problem  is whenever i make the function call,it is executing the function statements upto the end of the function ie., \"}\" ,and after that the control is going into some unspecified memory locations insted of handover the control to main function.<br>\nwhy it is happening? without using the microcontroller, the code is working fine in compiler,why?Is there any steps i need to take care for microcontroller registers?</p>\n\n<pre><code>void gps_Gpgga_data_pro_funct(void)\n{\n int            loop1 , loop2  , loop3 ;\n\n unsigned char  commapos = 0;           //to hold the comma position\n unsigned char  tempbuff[100];       //temparary buffer\n\nstr_cpy(tempbuff,aa_GPS_GPGGA_RxBuffer); //received data taking into tempbuff\n\nif(tempbuff[3] == 'G' &amp;&amp; tempbuff[4] == 'G' &amp;&amp; tempbuff[5] == 'A')\n    {\n         loop1 = 0;\n         loop2 = 7;\n          while(tempbuff[loop2] != COMMA)                //getting the time\n          {\n           gga_time[loop1] = tempbuff[loop2];\n           loop1 ++;\n           loop2 ++;\n          }\n                                //storing the comma position in a variable.\n          gga_time[loop1] = '\\0';           //GPGGA time\n          commapos = loop2 ; \n          loop1 = 0;\n          loop2 = 0;\n          loop2 =  commapos + 1;                //setting the position for latitude\n          while(tempbuff[loop2] != COMMA)        //receiving the latitude value\n          {\n           gga_lat[loop1] = tempbuff[loop2] ;\n           loop2 ++;\n           loop1 ++;\n          }\n          commapos = loop2;                      //saving the commaposition\n          gga_lat[loop1] = '\\0';            //GPGGA latitude\n\n          loop1 = 0;\n          loop2 = 0;\n         loop2 = commapos + 3;\n\n          while(tempbuff[loop2] != COMMA)            // receiving the longitude value\n          {\n           gga_long[loop1] = tempbuff[loop2] ;\n           loop1 ++;\n           loop2 ++;\n          }\n          commapos = loop2 ;\n          gga_long[loop1] = '\\0';               //GPGGA longitude\n\n    }\nelse\n    {\n        /*do nothing*/\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "libav", "v4l2"], "comments": [{"owner": {"reputation": 22991, "user_id": 1169096, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=128&d=identicon&r=PG", "display_name": "uml&#228;ute", "link": "https://stackoverflow.com/users/1169096/uml%c3%a4ute"}, "edited": false, "score": 0, "creation_date": 1432243306, "post_id": 30352017, "comment_id": 48858267, "body": "why don&#39;t you just access v4l2 directly?"}, {"owner": {"reputation": 311, "user_id": 1326721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa14f7a87a1f4674734c48ff3993d08?s=128&d=identicon&r=PG", "display_name": "Markus I.", "link": "https://stackoverflow.com/users/1326721/markus-i"}, "reply_to_user": {"reputation": 22991, "user_id": 1169096, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=128&d=identicon&r=PG", "display_name": "uml&#228;ute", "link": "https://stackoverflow.com/users/1169096/uml%c3%a4ute"}, "edited": false, "score": 0, "creation_date": 1432717609, "post_id": 30352017, "comment_id": 49034836, "body": "We had different development platforms (OSX and different versions of Linux) in the beginning. That&#39;s why a big part of our code is coupled quite tight to this library..."}], "owner": {"reputation": 311, "user_id": 1326721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa14f7a87a1f4674734c48ff3993d08?s=128&d=identicon&r=PG", "display_name": "Markus I.", "link": "https://stackoverflow.com/users/1326721/markus-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432130575, "creation_date": 1432130575, "question_id": 30352017, "link": "https://stackoverflow.com/questions/30352017/av-read-frame-reads-frames-from-cache", "title": "av_read_frame reads frames from cache", "body": "<p>I want to detect an object with my camera. For performance reason, i like to keep the connection to my camera alive and read new images on demand. </p>\n\n<p>The function to read images calls <code>av_read_frame</code> till the frame is complete and then does some calculation. </p>\n\n<p>My problem now is, that the frames \"chain-up\". If i stop frequently asking for new frames, i get old-images and not the current, because they're not yet readed (even i don't need them). If possible, i don't want to read the images with an additional thread because i don't want to waste resources on my RaspberryPi. Any ideas how to disable this \"cache\" or other ideas?</p>\n"}, {"tags": ["c", "linux", "sh", "busybox"], "comments": [{"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1432639325, "post_id": 30351750, "comment_id": 48994769, "body": "Try <code>strace -ff -o &#47;tmp&#47;foo program</code> -- this will run strace on your program, following forks, and storing trace results per-process in /tmp/foo.NNNNN. I think you&#39;ll find that system(3) is NOT resetting the SIGHUP handler, though perhaps something else is."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "reply_to_user": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1432644597, "post_id": 30351750, "comment_id": 48998729, "body": "@GilHamilton Good point. Previously I did run strace, but only for slightly other tests. I reran your suggested strace. The logs show that the spawned sh calls rt_sigaction: <code>rt_sigaction(SIGHUP, {0x10000000, [], 0}, {SIG_DFL, [], SA_NOCLDSTOP}, 16) = 0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1432637535, "post_id": 30353626, "comment_id": 48993394, "body": "OK, so my comparison with what I observe with bash is not the same to what I observe with my c program and <code>system</code>. I am sorry for that confusion and will delete the bash comparison part."}], "tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": false, "score": 1, "last_activity_date": 1432134460, "creation_date": 1432134460, "answer_id": 30353626, "question_id": 30351750, "link": "https://stackoverflow.com/questions/30351750/sighup-signal-handler-reset-to-default-when-using-system-on-embedded-linux-wit/30353626#30353626", "title": "SIGHUP signal handler reset to default when using system() on embedded linux with busybox", "body": "<p>I don't think that's exactly what's happening. When you type 'trap' into the shell, you're asking it list the actions it has established for that signal. When you invoke a subshell, you haven't given it any actions, so it won't show any (it doesn't know about what you gave to its parent) but that doesn't mean it has reset the SIGHUP state.</p>\n\n<p>Try this small script that proves SIGHUP is still ignored even though \"trap\" shows nothing:</p>\n\n<pre><code>trap \"\" HUP\necho \"TRAPs in parent\"\ntrap\nsh -c 'echo \"TRAPs in child\"; trap; sleep 5; echo \"Still here. Traps: \"; trap' &amp;\nchild=$!\nsleep 1\nkill -HUP $child\necho 'Killed child'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": true, "score": 0, "last_activity_date": 1432655555, "creation_date": 1432655555, "answer_id": 30463337, "question_id": 30351750, "link": "https://stackoverflow.com/questions/30351750/sighup-signal-handler-reset-to-default-when-using-system-on-embedded-linux-wit/30463337#30463337", "title": "SIGHUP signal handler reset to default when using system() on embedded linux with busybox", "body": "<p>Digging deeper into the sources of the busybox that is running on the Linux I found out that the shell in busybox is calling <code>signal(SIGHUP, SIG_DFL);</code> during init. This resets the sighup handler to default. So the shell itself and the program it runs (provided with <code>-c ...</code>) are running with default SIGHUP handler.</p>\n\n<p>I see no code path that bypasses resetting the SIGHUP signal handler, so it seems I cannot achieve what I want with <code>system()</code>.</p>\n"}], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "accepted_answer_id": 30463337, "answer_count": 2, "score": -1, "last_activity_date": 1432655555, "creation_date": 1432129906, "last_edit_date": 1432643680, "question_id": 30351750, "link": "https://stackoverflow.com/questions/30351750/sighup-signal-handler-reset-to-default-when-using-system-on-embedded-linux-wit", "title": "SIGHUP signal handler reset to default when using system() on embedded linux with busybox", "body": "<p>I am working on an embedded linux with busybox. As part of my application I have a rc.init script E80-startmyprog. That script is calling my program prog.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>trap \"\" HUP\nstartmyprog &gt;${LOGFILE} 2&gt;&amp;1 &lt;/dev/null &amp;\n\nstartmyprog() {\n  prog\n}\n</code></pre>\n\n<p>In my program I can see that the signal handlers are set to ignore SIGHUP. I am checking that with</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct sigaction act;\nsigaction(1, NULL, &amp;act);\nprintf(\"action %p\\n\", act.sa_sigaction);  // prints out 1 -&gt; SIG_IGN\n</code></pre>\n\n<p>Now at some time in my program I need to start another process, give it some input and check if it printed \"yes\" on stdout. I am using system to do that.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>const int ret = system(\"[ `echo input | second_process` == yes ]\");\n</code></pre>\n\n<p>Normal behavior is that <code>WIFEXITED(ret)</code> is true and that <code>WEXITSTATUS(ret)</code> is 0 or 1.</p>\n\n<p>But in some cases with unfortunate timing <code>WIFSIGNALED(ret)</code> is true and <code>WTERMSIG(ret)</code> is 1 (SIGHUP).</p>\n\n<p>Debugging shows that if I <code>execl(\"second_process\", \"second_process\", (char*)NULL)</code> the signal handler state in second_process is set correctly to SIGHUP=ignore. But if I use <code>system</code>, then second_process has SIGHUP=default.</p>\n\n<p>My questions are:</p>\n\n<p>What is going on there? Who is resetting the SIGHUP signal handler at startup? Is it the shell? Is there a way to prevent that? (In the sh man page I have not seen a command line option that looks so.)</p>\n\n<p>I know I could do a workaround and setup a pipe, fork, exec second_process, write input to pipe, read output from pipe and parse output, but that is a lot of stuff compared to a system one liner and there is good chance that I will miss something and get it wrong.</p>\n"}, {"tags": ["sql", "c", "oracle", "oracle-pro-c"], "comments": [{"owner": {"reputation": 211530, "user_id": 10397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a116491222bf3f94c85381528593fd7?s=128&d=identicon&r=PG", "display_name": "Justin Cave", "link": "https://stackoverflow.com/users/10397/justin-cave"}, "edited": false, "score": 0, "creation_date": 1432130151, "post_id": 30351537, "comment_id": 48795993, "body": "That&#39;s not going to be simple.  Why would you want to architect the system that way?  It is possible for PL/SQL to call out to the database host operating system via a Java stored procedure or via the <code>dbms_scheduler</code> package.  But that would be quite a few moving pieces to manage so it&#39;s not something that you&#39;d normally design."}, {"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "reply_to_user": {"reputation": 211530, "user_id": 10397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a116491222bf3f94c85381528593fd7?s=128&d=identicon&r=PG", "display_name": "Justin Cave", "link": "https://stackoverflow.com/users/10397/justin-cave"}, "edited": false, "score": 0, "creation_date": 1432130791, "post_id": 30351537, "comment_id": 48796489, "body": "Thanks for your reply! would it be still complicated via dbms_scheduler?! I am using Quest Code Tester to test my codes. I have been thinking of executing pro*c in Quest Code Tester"}, {"owner": {"reputation": 211530, "user_id": 10397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a116491222bf3f94c85381528593fd7?s=128&d=identicon&r=PG", "display_name": "Justin Cave", "link": "https://stackoverflow.com/users/10397/justin-cave"}, "edited": false, "score": 0, "creation_date": 1432130955, "post_id": 30351537, "comment_id": 48796630, "body": "Given that there are quite a few testing frameworks out there, I would strongly suggest using one of them to test code that runs outside the database rather than having the database call out to the operating system to invoke executables just because you have an application that tests database calls."}, {"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "reply_to_user": {"reputation": 211530, "user_id": 10397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a116491222bf3f94c85381528593fd7?s=128&d=identicon&r=PG", "display_name": "Justin Cave", "link": "https://stackoverflow.com/users/10397/justin-cave"}, "edited": false, "score": 0, "creation_date": 1432132368, "post_id": 30351537, "comment_id": 48797821, "body": "thanks for your tips, I guess I&#39;ll use another tools to test pro*c programs."}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1367722, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b014b75ed07af8e1b223bc9d2da94c2f?s=128&d=identicon&r=PG", "display_name": "TenG", "link": "https://stackoverflow.com/users/1367722/teng"}, "is_accepted": true, "score": 1, "last_activity_date": 1432139033, "creation_date": 1432139033, "answer_id": 30355312, "question_id": 30351537, "link": "https://stackoverflow.com/questions/30351537/how-can-i-call-a-proc-program-directly-from-pl-sql/30355312#30355312", "title": "How can I call a PRO*C program directly from PL/SQL?", "body": "<p>You can link external libraries (Windows DLL or UNIX \".so\" files) to Oracle and then make them callable via PLSQL. This has been around at least since Oracle 8i. </p>\n\n<p>This though requires DBA privs on the server to set this up, and is probably not a recommended approach these days .... but useful for crunching huge data.</p>\n\n<p>See <a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_extern_proc.htm\" rel=\"nofollow\" title=\"here\">here</a> for more details.</p>\n\n<p>Calling a actual program directly, as opposed to a library function from PLSQL would be done indirectly via DBMS_SCHEDULER as @Justin suggested as the easiest way, creating a program with the PROGRAM_TYPE as EXECUTABLE. See <a href=\"http://docs.oracle.com/cd/B28359_01/server.111/b28310/scheduse003.htm#ADMIN12406\" rel=\"nofollow\">here</a> for more info.</p>\n\n<p>A couple of things to note when doing this, the program will run as the (assuming UNIX) \"oracle\" user - bringing with it some security considerations, e.g. if the program creates a file it will be created as owned by oracle, and so might not be accessible to an \"application\" user. The program will run on the Oracle database server.</p>\n"}], "owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 0, "accepted_answer_id": 30355312, "answer_count": 1, "score": 1, "last_activity_date": 1545657717, "creation_date": 1432129432, "last_edit_date": 1545657717, "question_id": 30351537, "link": "https://stackoverflow.com/questions/30351537/how-can-i-call-a-proc-program-directly-from-pl-sql", "title": "How can I call a PRO*C program directly from PL/SQL?", "body": "<p>I couldn't find a similar question here. </p>\n\n<p>I have a PRO*C program named <code>pro_c.pc</code>. How can I call and execute this in a piece of PL/SQL code?! Could someone give me a simple example?!</p>\n"}, {"tags": ["c", "function", "menu", "linked-list", "structure"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432129514, "post_id": 30351326, "comment_id": 48795449, "body": "The function <code>addPainting()</code> seems to be nested in <code>main()</code>"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432129576, "post_id": 30351326, "comment_id": 48795503, "body": "Please don&#39;t define functions/structs inside other functions..."}, {"owner": {"reputation": 614, "user_id": 2537102, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/8TNp9.png?s=128&g=1", "display_name": "Bregalad", "link": "https://stackoverflow.com/users/2537102/bregalad"}, "edited": false, "score": 1, "creation_date": 1432129591, "post_id": 30351326, "comment_id": 48795520, "body": "Welcome! It would be nice if you told us what exactly is your issue so we can help you. Just &quot;it does not work&quot; is not enough for us."}, {"owner": {"reputation": 1, "user_id": 4920545, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203557287326522/picture?type=large", "display_name": "Tsvetomir Pavlov", "link": "https://stackoverflow.com/users/4920545/tsvetomir-pavlov"}, "edited": false, "score": 0, "creation_date": 1432129763, "post_id": 30351326, "comment_id": 48795667, "body": "I have to write the three functions I mentioned and I have no idea how and where to start. This is the issue."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432129773, "post_id": 30351326, "comment_id": 48795677, "body": "<code>addPainting()</code> will create a file with only one record, overwriting previous records, unless you change the open mode to <code>&quot;ab&quot;</code> to append."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1432129808, "post_id": 30351326, "comment_id": 48795704, "body": "Your code as is will not compile.  You have to get that first before going forward to the other questions, but, there are many tutorials on how to create and use linked lists in C.  <b><i><a href=\"http://www.learn-c.org/en/Linked_lists\" rel=\"nofollow noreferrer\">Here is one</a></i></b>.  Google <i>Linked Lists in C</i> for more."}, {"owner": {"reputation": 1, "user_id": 4920545, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203557287326522/picture?type=large", "display_name": "Tsvetomir Pavlov", "link": "https://stackoverflow.com/users/4920545/tsvetomir-pavlov"}, "edited": false, "score": 0, "creation_date": 1432130170, "post_id": 30351326, "comment_id": 48796012, "body": "How do I fix the error: storage size of &#39;painting&#39; isn&#39;t known?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1432130954, "post_id": 30351326, "comment_id": 48796628, "body": "Storage size problem is due to local scope of struct.  It is not known in the function because you created it with local scope in main().  (see below)"}], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432130923, "post_id": 30352097, "comment_id": 48796598, "body": "Most importantly, the painting database will be wiped out each time <code>addPainting</code> is called."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432131059, "post_id": 30352097, "comment_id": 48796692, "body": "@szczurcio - There are many other things wrong.  But OP has to ask.  The question I answered is the only one asked so far (struct size error)"}, {"owner": {"reputation": 1, "user_id": 4920545, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203557287326522/picture?type=large", "display_name": "Tsvetomir Pavlov", "link": "https://stackoverflow.com/users/4920545/tsvetomir-pavlov"}, "edited": false, "score": 0, "creation_date": 1432131460, "post_id": 30352097, "comment_id": 48797009, "body": "So how do I make it that when addPainting is called it adds a painting to the exsiting ones, not deleting the database?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 1, "user_id": 4920545, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203557287326522/picture?type=large", "display_name": "Tsvetomir Pavlov", "link": "https://stackoverflow.com/users/4920545/tsvetomir-pavlov"}, "edited": false, "score": 0, "creation_date": 1432131503, "post_id": 30352097, "comment_id": 48797051, "body": "@TsvetomirPavlov The problem is your <code>fopen</code> call. Read the manual: <a href=\"http://www.cplusplus.com/reference/cstdio/fopen/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/fopen</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 1, "user_id": 4920545, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203557287326522/picture?type=large", "display_name": "Tsvetomir Pavlov", "link": "https://stackoverflow.com/users/4920545/tsvetomir-pavlov"}, "edited": false, "score": 0, "creation_date": 1432131772, "post_id": 30352097, "comment_id": 48797300, "body": "@TsvetomirPavlov - I have made an edit to the struct definition (used typedef ) and edited function as well.  Once you use fopen() to create a file, you can write strings using several methods.  I will edit once again to illustrate creating a string and writing it to file using fputs().  (give me a minute)"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1432214999, "last_edit_date": 1432214999, "creation_date": 1432130801, "answer_id": 30352097, "question_id": 30351326, "link": "https://stackoverflow.com/questions/30351326/menu-type-program/30352097#30352097", "title": "Menu type program", "body": "<p>First problem:   You are missing the closing brace ( <code>}</code> ) for the main() function. (but I am sure you knew that)</p>\n\n<p><strong><em>The reason for the struct size error is that</em></strong> you are attempting to create an instance of <code>struct painting</code> in the  <code>void addPainting()</code> function, when it was created with local scope in the main function, and therefore <strong><em>it is not visible to the function</em></strong>.   Create <code>struct painting</code> with global scope if you want to use it this way:  </p>\n\n<p><strong><em>This will build (and run)</em></strong> but only for the functions defined, the others are commented out.  There are other problems you will have to work out, or ask about.   </p>\n\n<p><strong><em>EDITED</em></strong> to fix scanf() statements, show use of fopen()/fclose(), create and write strings using sprintf()/fputs()...  </p>\n\n<pre><code>void addPainting(void);\n//void erasePainting(void);\n//void printData(void);\n//void modifyData(void);\n\ntypedef    struct //created with global scope, visible to all functions\n{\n    char code[20];\n    char name[50];\n    char paintingName[50];\n    double price;\n    int year;\n\n}PAINTING;\n\nPAINTING painting[100];//array of instance of PAINTING\n\n#define PATH \"C:\\\\play\\\\painting.txt\"  //edit to your need\n\n\nint main()\n{\n\n    int choice;\n    do\n    {\n        printf(\"Menu\\n\");\n        printf(\"To add a painting press 1.\\n\");\n        printf(\"To erase a painting press 2.\\n\");\n        printf(\"To print data for all paintings by authors alphabetically press 3.\\n\");\n        printf (\"To modify data for a painting press 4.\\n\");\n        printf(\"To exit the program press 5.\\n\");\n        scanf(\"%d\",&amp;choice);\n\n        switch(choice)\n        {\n           case 1:\n            {\n                addPainting();\n                break;\n            }\n            case 2:\n            {\n                //erasePainting();\n                break;\n            }\n            case 3:\n            {\n                //printData();\n                break;\n            }\n            case 4:\n            {\n                //modifyData();\n                break;\n            }\n\n            default: printf (\"Wrong choice. Try again\\n\");\n                break;\n        }\n    }while (choice !=5);\n}\n\nvoid addPainting(void)\n{\n    FILE *fp;\n    char stringToWrite[80];\n    //Note: this function could be prototyped with an int argument\n    //        to be used as an index for the array arguments of your\n    //        structure.  Currently, the indexes are hard-coded to 0, \n\n\n    printf(\"Enter code:\");\n    //scanf(\"%s\", &amp;painting[0].code); \n    scanf(\"%s\", painting[0].code); //&amp; not needed for char array (char *) et. al.\n    printf(\"Enter the name of the author:\");\n    scanf(\"%s\", painting[0].name);\n    printf(\"Enter the name of the painting:\");\n    scanf(\"%s\", painting[0].paintingName);\n    printf(\"Enter price:\");\n    scanf(\"%lf\", &amp;painting[0].price);\n    printf(\"Enter the year of creation:\");\n    scanf(\"%d\", &amp;painting[0].year);\n    fp = fopen (PATH, \"a\");//open for create/append text file (not write binary, \"wb\")\n\n    if(fp)\n    {\n        sprintf(stringToWrite, \"Painting Code is: %s\\n\", painting[0].code);\n        fputs(stringToWrite, fp);\n        // do others same way...\n        //...\n        fclose(fp);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4920545, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203557287326522/picture?type=large", "display_name": "Tsvetomir Pavlov", "link": "https://stackoverflow.com/users/4920545/tsvetomir-pavlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1675, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432214999, "creation_date": 1432128985, "last_edit_date": 1432129436, "question_id": 30351326, "link": "https://stackoverflow.com/questions/30351326/menu-type-program", "title": "Menu type program", "body": "<p>I have an assignment to write a program for supporting an art gallery in C. It has to be menu based program using lists. I wrote the first function of the menu and I need some help writing the other three. So I have a structure of an unique code of the painting, author's name, painting's name, price, year of the painting. I have to create a function deleting a painting using the unique code, print out all the info about every painting and modifying a painting again using said code. The data has to be in a dynamic type structure using a linked list. This is the program so far. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid addPainting(void);\nvoid erasePainting(void);\nvoid printData(void);\nvoid modifyData(void);\n\nint main()\n{\n\n    struct paintings\n    {\n        char code[20];\n        char name[50];\n        char paintingName[50];\n        double price;\n        int year;\n\n    }painting[100];\n    int choice;\n    do\n    {\n        printf(\"Menu\\n\");\n        printf(\"To add a painting press 1.\\n\");\n        printf(\"To erase a painting press 2.\\n\");\n        printf(\"To print data for all paintings by authors alphabetically press 3.\\n\");\n        printf (\"To modify data for a painting press 4.\\n\");\n        printf(\"To exit the program press 5.\\n\");\n        scanf(\"%d\",&amp;choice);\n\n        switch(choice)\n        {\n           case 1:\n            {\n                addPainting();\n                break;\n            }\n            case 2:\n            {\n                erasePainting();\n                break;\n            }\n            case 3:\n            {\n                printData();\n                break;\n            }\n            case 4:\n            {\n                modifyData();\n                break;\n            }\n\n            default: printf (\"Wrong choice. Try again\\n\");\n                break;\n        }\n    }while (choice !=5);\n\n\n\nvoid addPainting()\n{\n    FILE *fp;\n\n\n    struct paintings painting;\n    printf(\"Enter code:\");\n    scanf(\"%s\", &amp;painting.code);\n    printf(\"Enter the name of the author:\");\n    scanf(\"%s\", &amp;painting.name);\n    printf(\"Enter the name of the painting:\");\n    scanf(\"%s\", &amp;painting.paintingName);\n    printf(\"Enter price:\");\n    scanf(\"%lf\", &amp;painting.price);\n    printf(\"Enter the year of creation:\");\n    scanf(\"%d\", &amp;painting.year);\n      if ((fp=fopen(\"paintings\",\"wb\"))==NULL)\n        exit(1);\n    if ((fwrite (&amp;painting,sizeof(painting),1,fp)!=1))\n        exit(2);\n    fclose(fp);\n\n}\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "cuda"], "comments": [{"owner": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 1, "creation_date": 1432200594, "post_id": 30351272, "comment_id": 48829838, "body": "I think a semicolon (<code>;</code>) is missing after <b>Debug\\.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 977, "user_id": 238038, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/248d25234db5a1efe4842b5a648e478b?s=128&d=identicon&r=PG", "display_name": "nurabha", "link": "https://stackoverflow.com/users/238038/nurabha"}, "edited": false, "score": 0, "creation_date": 1445354909, "post_id": 30427217, "comment_id": 54284046, "body": "You should see my updated answer in the post <a href=\"http://stackoverflow.com/questions/27719933/cuda-6-5-error-msb3191-unable-to-create-directory-and-lnk2001-unresolved-extern\" title=\"cuda 6 5 error msb3191 unable to create directory and lnk2001 unresolved extern\">stackoverflow.com/questions/27719933/&hellip;</a>"}], "tags": [], "owner": {"reputation": 101, "user_id": 2283685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf80850300655c02d175805f85f66d6?s=128&d=identicon&r=PG", "display_name": "TheGoozah", "link": "https://stackoverflow.com/users/2283685/thegoozah"}, "is_accepted": false, "score": 2, "last_activity_date": 1432494246, "creation_date": 1432494246, "answer_id": 30427217, "question_id": 30351272, "link": "https://stackoverflow.com/questions/30351272/cuda-error-msb3191/30427217#30427217", "title": "CUDA error MSB3191", "body": "<p>The issue was that the CMake file was filling \"SourceLib.dir\\Debug\" into the Intermediate Directory property (Project Properties -> General). Deleting it resolved the issue with the CUDA 7.0 target</p>\n"}], "owner": {"reputation": 101, "user_id": 2283685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf80850300655c02d175805f85f66d6?s=128&d=identicon&r=PG", "display_name": "TheGoozah", "link": "https://stackoverflow.com/users/2283685/thegoozah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432494246, "creation_date": 1432128840, "last_edit_date": 1495541254, "question_id": 30351272, "link": "https://stackoverflow.com/questions/30351272/cuda-error-msb3191", "title": "CUDA error MSB3191", "body": "<p>I tried to do the two new steps manually in my older project (<a href=\"https://stackoverflow.com/questions/30320349/cuda-link-error-lib-to-dll?noredirect=1#comment48746468_30320349\">CUDA Link Error (Lib to Dll)</a>) to get my CUDA kernel running (just added the structure to the Lib part of the project). The steps are:</p>\n\n<p><strong>1:</strong> Project's 'Build Customization' to use CUDA 7.0(.targets, .props)</p>\n\n<p><strong>2:</strong> TestKernel.cu I've changed it's type to CUDA C/C++ in the Class Property Page. </p>\n\n<p>Now I'm getting the following error message from CUDA 7.0.targets:</p>\n\n<blockquote>\n  <p>Error    1   error MSB3191: Unable to create directory\n  \"SourceLib.dir\\Debug\\C:\\Users\\Matthieu\\Desktop\\Project\\src\\SourceLib\\Helpers\\\".\n  The given path's format is not supported. C:\\Program Files\n  (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V120\\BuildCustomizations\\CUDA\n  7.0.targets   412 9   SourceLib</p>\n</blockquote>\n\n<p>I've searched for a solution but I can't find any. Everyone is talking about this part \"<strong>SourceLib.dir\\Debug</strong>\\C:\\Users.......\", which obviously looks wrong, but I can't find the setting in Visual Studio or CMake. Where can I adjust this?</p>\n\n<p>It's similar to this question (<a href=\"https://stackoverflow.com/questions/27719933/cuda-6-5-error-msb3191-unable-to-create-directory-and-lnk2001-unresolved-extern\">CUDA 6.5: error MSB3191 Unable to create directory and LNK2001 Unresolved External symbol</a>), but I can't fix it by copying the .cu file.</p>\n\n<p>If I don't set the .targets file it won't build. I'll get the older error. Any help? \nAnd alternative for getting the setup running using Cmake is also welcome :)\nThx!</p>\n"}, {"tags": ["python", "c", "ctypes", "tcp-ip", "visa"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432130055, "post_id": 30351258, "comment_id": 48795910, "body": "How whould a &quot;data available event&quot; help you around the problem, that you do not know how much data you need to read? Or would the connection be closed by the peer after all data had been sent?"}, {"owner": {"reputation": 154, "user_id": 1534630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d44067a58906a952a27a3e44ede3047?s=128&d=identicon&r=PG&f=1", "display_name": "kepurlaukis", "link": "https://stackoverflow.com/users/1534630/kepurlaukis"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432184177, "post_id": 30351258, "comment_id": 48820863, "body": "It will be used for binary transparent data transmission. If any data is available I should read it and pass to higher layers for data analysis. Right now I&#39;m doing what using twisted. And trying to find an away to use NI VISA for that."}], "owner": {"reputation": 154, "user_id": 1534630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d44067a58906a952a27a3e44ede3047?s=128&d=identicon&r=PG&f=1", "display_name": "kepurlaukis", "link": "https://stackoverflow.com/users/1534630/kepurlaukis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432129403, "creation_date": 1432128813, "last_edit_date": 1432129403, "question_id": 30351258, "link": "https://stackoverflow.com/questions/30351258/is-it-possible-to-enable-some-kind-of-data-available-event-on-ni-visa-for-tcp", "title": "Is it possible to enable some kind of &quot;data available event&quot; on NI-VISA for TCP/IP SOCKET resource?", "body": "<p>For Serial resource (Serial COM port) I enable VI_EVENT_ASRL_CHAR event. (After this event I'm checking for available data in buffer with reading attribute VI_ATTR_ASRL_AVAIL_NUM and reading all data from buffer)</p>\n\n<p>For TCP/IP I'm connecting to i.e.'TCPIP0::192.168.200.200::54321::SOCKET' resource. So how I could get ant event which will tell me about available data in receiving buffer?</p>\n\n<p>I need an event because I'm receiving binary data without termination character and with variable data size.</p>\n\n<p>I'm using PYTHON, ctypes and visa32.dll</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432132111, "post_id": 30352580, "comment_id": 48797616, "body": "Parsing issue, IMHO. Heard of some rule that <code>#</code> has to be the first char of a line. Not very sure though."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1432132175, "post_id": 30352580, "comment_id": 48797677, "body": "You did not &quot;remove a blank line&quot;."}, {"owner": {"reputation": 20105, "user_id": 451540, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jajjn.png?s=128&g=1", "display_name": "thumbmunkeys", "link": "https://stackoverflow.com/users/451540/thumbmunkeys"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 1, "creation_date": 1432132180, "post_id": 30352580, "comment_id": 48797681, "body": "@NatashaDutta first non whitespace character"}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 20105, "user_id": 451540, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jajjn.png?s=128&g=1", "display_name": "thumbmunkeys", "link": "https://stackoverflow.com/users/451540/thumbmunkeys"}, "edited": false, "score": 1, "creation_date": 1432132216, "post_id": 30352580, "comment_id": 48797715, "body": "@thumbmunkeys You&#39;re the man !!! Right. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 2, "last_activity_date": 1432132119, "creation_date": 1432132119, "answer_id": 30352640, "question_id": 30352580, "link": "https://stackoverflow.com/questions/30352580/conditional-compilation-error-with-macros/30352640#30352640", "title": "Conditional compilation error with macros", "body": "<p>Preprocessor statements need to be on their own lines. So you can't put it on the same line as a <code>{</code> or anything else that's not part of the statement.</p>\n"}, {"tags": [], "owner": {"reputation": 1989, "user_id": 566459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1nBL.png?s=128&g=1", "display_name": "Kun Ling", "link": "https://stackoverflow.com/users/566459/kun-ling"}, "is_accepted": false, "score": 1, "last_activity_date": 1432180718, "last_edit_date": 1432180718, "creation_date": 1432132206, "answer_id": 30352676, "question_id": 30352580, "link": "https://stackoverflow.com/questions/30352580/conditional-compilation-error-with-macros/30352676#30352676", "title": "Conditional compilation error with macros", "body": "<p>The Tag <code>\uff03ifdef</code> you are using is correct. In the C language, lines that start with <code>#</code> in the code are called preprocessor directives. The preprocessor deletes them and uses them as commands to modify the code file prior to compilation. </p>\n\n<p>For such statement for preprocessor, it should start in a new line, and only white space is allowed before the <code>#</code>. You should not put it after <code>{</code>.</p>\n\n<p>For your code, compiler will like it, if it could be arranged as following.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define NUM 10\nmain()\n{     \n#ifdef NUM   \n    printf(\"compilation succesfull\");  \n#endif  \n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "is_accepted": false, "score": 1, "last_activity_date": 1432132393, "creation_date": 1432132393, "answer_id": 30352755, "question_id": 30352580, "link": "https://stackoverflow.com/questions/30352580/conditional-compilation-error-with-macros/30352755#30352755", "title": "Conditional compilation error with macros", "body": "<p>The preprocessor is unable to understand the line:</p>\n\n<pre><code>{    #ifdef NUM \n</code></pre>\n\n<p>The compiler doesn't know how to handle the statement <code>#ifdef NUM</code>, it'll say <code>#</code> is unknown and unknown type <code>ifdef</code>.</p>\n\n<p>it'll reach the line</p>\n\n<pre><code>#endif \n</code></pre>\n\n<p>but didn't see <code>ifdef</code> before, thus you'll get <code>#endif without #if</code> error.</p>\n\n<p>When you replace it in a new line, then the preprocessor knows what to do and the output will be:</p>\n\n<pre><code>main()\n{\n    printf(\"compilation succesfull\");\n}\n</code></pre>\n\n<p>Validate this by running <code>gcc -E yourprogram</code>.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://computerscience.stackexchange.com"], "markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1439905020, "open_beta_date": 1332272936, "closed_beta_date": 1331060400, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/cs/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon.png", "audience": "students, researchers and practitioners of computer science", "site_url": "https://cs.stackexchange.com", "api_site_parameter": "cs", "logo_url": "https://cdn.sstatic.net/Sites/cs/Img/logo.png", "name": "Computer Science", "site_type": "main_site"}, "on_date": 1432131984, "question_id": 42801}, "owner": {"reputation": 11, "user_id": 4921002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca6356c6548cade9580376287dcc34b?s=128&d=identicon&r=PG&f=1", "display_name": "manish", "link": "https://stackoverflow.com/users/4921002/manish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1432180718, "creation_date": 1432128534, "last_edit_date": 1432132797, "question_id": 30352580, "link": "https://stackoverflow.com/questions/30352580/conditional-compilation-error-with-macros", "title": "Conditional compilation error with macros", "body": "<pre><code>#include&lt;stdio.h&gt;\n#define NUM 10\nmain()\n{     \n    #ifdef NUM   \n    printf(\"compilation succesfull\");  \n    #endif  \n}  \n</code></pre>\n\n<p>The above code compiles perfectly fine and upon execution prints\ncompilation successful, but if I remove a blank line before the first statement in <code>main()</code>\nit gives an error. ie. \"stray #\" in the program and many other errors.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define NUM 10\nmain()\n{    #ifdef NUM                              \n     printf(\"compilation succesfull\");  \n     #endif  \n}  \n</code></pre>\n\n<p>Can any one help me?</p>\n"}, {"tags": ["c", "pointers", "function-pointers"], "comments": [{"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "edited": false, "score": 9, "creation_date": 1432128078, "post_id": 30350926, "comment_id": 48794259, "body": "God help whoever has to read this code when you&#39;re done with it..."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1432128499, "post_id": 30350926, "comment_id": 48794607, "body": "Of course void pointer are made for these kinds of &#39;hacks&#39;. BUT I guess its definitly no good design to pass a function pointer to a function that maybe was made for the purpose of handling different datatypes like, int*,float*,double*, struct whatever* etc. So I think you better write a function that arguments are pointer to functions."}, {"owner": {"reputation": 967, "user_id": 2489299, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d3920f8b4b567a9250bfaaa246537c7?s=128&d=identicon&r=PG", "display_name": "jayjay", "link": "https://stackoverflow.com/users/2489299/jayjay"}, "edited": false, "score": 0, "creation_date": 1432128619, "post_id": 30350926, "comment_id": 48794704, "body": "I should clarify, this is a question to improve my understanding of the language, I currently have no actual use case."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 1, "creation_date": 1432128654, "post_id": 30350926, "comment_id": 48794739, "body": "Ok, then forget about such weired stuff."}, {"owner": {"reputation": 967, "user_id": 2489299, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d3920f8b4b567a9250bfaaa246537c7?s=128&d=identicon&r=PG", "display_name": "jayjay", "link": "https://stackoverflow.com/users/2489299/jayjay"}, "edited": false, "score": 0, "creation_date": 1432128762, "post_id": 30350926, "comment_id": 48794831, "body": "Hmmm... Well thats not very enlightening."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1432128816, "post_id": 30350926, "comment_id": 48794870, "body": "Ill already gave you a hint of why you should&#39;nt do it. If you have no particular use case - stop thinking about solving a problem that is not really a problem."}, {"owner": {"reputation": 967, "user_id": 2489299, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d3920f8b4b567a9250bfaaa246537c7?s=128&d=identicon&r=PG", "display_name": "jayjay", "link": "https://stackoverflow.com/users/2489299/jayjay"}, "edited": false, "score": 0, "creation_date": 1432129335, "post_id": 30350926, "comment_id": 48795293, "body": "Thank you for your previous insight, and I am in agreement with you that it would not be the best design choice."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1432132299, "post_id": 30350926, "comment_id": 48797767, "body": "Keep in mind that a function pointer may be stored in any other function pointer (via casting) as long as it it cast back to the correct function pointer type before being used to make a function call. So you can use a <code>void (*)(void)</code> (or whatever function pointer type) as a kind of &quot;void*&quot; for function pointers."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1432132454, "post_id": 30350926, "comment_id": 48797879, "body": "Also, POSIX sort of requires that a function pointer can be round-tripped through a <code>void*</code> because of how the <code>dlsym()</code> function is specified."}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 7, "creation_date": 1432128565, "post_id": 30351038, "comment_id": 48794663, "body": "If <code>foo()</code> is a function, you can use <code>&amp;foo</code>. It&#39;s just the same as using <code>foo</code> itself."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1432132481, "post_id": 30351038, "comment_id": 48797895, "body": "Same as with statically allocated arrays. You can include the <code>&amp;</code> and you can omit the <code>&amp;</code>. The compiler will interpret it the same way."}], "tags": [], "owner": {"reputation": 150, "user_id": 4886540, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bYQYz2QVmQ0/AAAAAAAAAAI/AAAAAAAAALY/CZfH3E7FKmI/photo.jpg?sz=128", "display_name": "nobody0day", "link": "https://stackoverflow.com/users/4886540/nobody0day"}, "is_accepted": false, "score": -5, "last_activity_date": 1432128286, "creation_date": 1432128286, "answer_id": 30351038, "question_id": 30350926, "link": "https://stackoverflow.com/questions/30350926/storing-the-pointer-to-a-function-pointer-in-a-void/30351038#30351038", "title": "Storing the pointer to a function pointer in a void*", "body": "<p>This code snippet is wrong.</p>\n\n<pre>\n\n    void(*fp)(void) = &function;\n    function_taking_void_pointer((void*)fp);\n\n</pre>\n\n<p>In C/C++ the <code>function name</code> will be relocated to a specific address in <code>linking stage</code>, so you cannot use <code>&amp;</code> before a <code>function name</code>. In addition <code>function name</code> is not a variable in C/C++, so you also cannot try to get its address.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1432132535, "post_id": 30351733, "comment_id": 48797943, "body": "The standard doesn&#39;t say anything about converting function pointer types to <code>void *</code>; you explicitly quote what it says: <i>A <b>pointer to void</b> may be converted to or from a <b>pointer to any object type</b>.</i> Functions are not objects; that&#39;s why it says <i>A pointer type may be derived from a function type <b>or</b> an object type</i>; the two sets of types (pointers to objects and pointers to functions) are not the same and are not necessarily convertible. POSIX even removed the text that used to provide a get-out clause. There are machines where function pointers are very elaborate (big, complex)."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1432190472, "post_id": 30351733, "comment_id": 48823582, "body": "@JonathanLeffler Yes, that is what my answer says. Keep in mind that question asked about <i>pointer to function pointer</i>. And that is object type and can be converted to <code>void*</code>."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 4, "last_activity_date": 1432132173, "last_edit_date": 1432132173, "creation_date": 1432129853, "answer_id": 30351733, "question_id": 30350926, "link": "https://stackoverflow.com/questions/30350926/storing-the-pointer-to-a-function-pointer-in-a-void/30351733#30351733", "title": "Storing the pointer to a function pointer in a void*", "body": "<p>You are right that all pointer types are <em>object types</em>:</p>\n\n<p>N1570 6.3.5 Types, paragraph 20,  fifth list item:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>A pointer type may be derived from a function type</strong> or an object type, called the\n  referenced type. A pointer type describes an object whose value provides a reference\n  to an entity of the referenced type. A pointer type derived from the referenced type T\n  is sometimes called \u2018\u2018pointer to T\u2019\u2019. The construction of a pointer type from a\n  referenced type is called \u2018\u2018pointer type derivation\u2019\u2019. <strong>A pointer type is a complete\n  object type.</strong></li>\n  </ul>\n</blockquote>\n\n<p>But pointers to object types don't necessarily have same size as <code>void*</code> (6.2.5 p28). </p>\n\n<blockquote>\n  <ol start=\"28\">\n  <li><strong>A pointer to void shall have the same representation and alignment requirements as a\n  pointer to a character type.</strong><sup>48)</sup> Similarly, pointers to qualified or unqualified versions of\n  compatible types shall have the same representation and alignment requirements. All\n  pointers to structure types shall have the same representation and alignment requirements\n  as each other. All pointers to union types shall have the same representation and\n  alignment requirements as each other. <strong>Pointers to other types need not have the same\n  representation or alignment requirements.</strong></li>\n  </ol>\n</blockquote>\n\n<p>However, they can all be <strong>converted</strong> to <code>void*</code> (6.3.2.3 p1):</p>\n\n<blockquote>\n  <ol>\n  <li>A pointer to void may be converted to or from a pointer to any object type. A pointer to\n  any object type may be converted to a pointer to void and back again; the result shall\n  compare equal to the original pointer.</li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 967, "user_id": 2489299, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d3920f8b4b567a9250bfaaa246537c7?s=128&d=identicon&r=PG", "display_name": "jayjay", "link": "https://stackoverflow.com/users/2489299/jayjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 1, "accepted_answer_id": 30351733, "answer_count": 2, "score": 7, "last_activity_date": 1432132173, "creation_date": 1432128003, "last_edit_date": 1432130576, "question_id": 30350926, "link": "https://stackoverflow.com/questions/30350926/storing-the-pointer-to-a-function-pointer-in-a-void", "title": "Storing the pointer to a function pointer in a void*", "body": "<p>I understand why you cannot do:</p>\n\n<pre><code>void(*fp)(void) = &amp;function;\nfunction_taking_void_pointer((void*)fp);\n</code></pre>\n\n<p>because the lengths of the types may be different.</p>\n\n<p>but is there anything wrong with adding annother layer of indirection:</p>\n\n<pre><code>void(*fp)(void) = &amp;function;\nvoid(**fpp)(void) = &amp;fp;\nfunction_taking_void_pointer((void*)fpp)\n</code></pre>\n\n<p>My thinking behind this: The pointer to the function pointer should be pointing to data memory and therefore should have the same length as the void* type.</p>\n\n<p>So how wrong am I?</p>\n"}, {"tags": ["c++", "c", "multidimensional-array"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 5, "creation_date": 1432127517, "post_id": 30350699, "comment_id": 48793839, "body": "You would&#39;ve got warnings when compiling that sort of code."}, {"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "edited": false, "score": 0, "creation_date": 1432127562, "post_id": 30350699, "comment_id": 48793866, "body": "C++ uses row-major order."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4920379"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1432127673, "post_id": 30350699, "comment_id": 48793959, "body": "@Cool Guy, what type of warning?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 6, "creation_date": 1432127757, "post_id": 30350699, "comment_id": 48794013, "body": "@crossover , GCC gives <code>warning: missing braces around initializer [-Wmissing-braces]</code> and <code>warning: (near initialization for &#39;Multi[0]&#39;) [-Wmissing-braces]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2543, "user_id": 3190576, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/MlMic.jpg?s=128&g=1", "display_name": "gdrt", "link": "https://stackoverflow.com/users/3190576/gdrt"}, "is_accepted": true, "score": 64, "last_activity_date": 1519827422, "last_edit_date": 1519827422, "creation_date": 1432127486, "answer_id": 30350723, "question_id": 30350699, "link": "https://stackoverflow.com/questions/30350699/multi-dimensional-array-initialization/30350723#30350723", "title": "Multi-dimensional array initialization", "body": "<p>You can initialize arrays in both ways, though the usage of curly inner braces is recommended as it improves the readability.</p>\n\n<p>The easiest way to find the value of an element of a multi-dimensional array non-formatted with braces  is by splitting the array. For example, your array's dimensions are 2x3x2:</p>\n\n<p>First split the array into <strong>2</strong> sets (<strong>2</strong>x3x2)</p>\n\n<pre><code>{14,11,13,10,9,6,8,7,1,5,4,2} --&gt; {{14,11,13,10,9,6}, {8,7,1,5,4,2}}\n</code></pre>\n\n<p>Then split each set into <strong>3</strong> sets (2x<strong>3</strong>x2)</p>\n\n<pre><code>{{14,11,13,10,9,6},{8,7,1,5,4,2}} --&gt; {{{14,11}, {13,10} ,{9,6}}, {{8,7}, {1,5}, {4,2}}}\n</code></pre>\n\n<p>Now, as you see there are <strong>2</strong> elements left in every smaller set (2x3x<strong>2</strong>), so you have formatted your array with braces.</p>\n\n<p>Now it's simpler to find the value of the element with the index of <code>[1][1][0]</code>. This element is the 2nd ([<strong>1</strong>][1][0]) bigger set's 2nd ([1][<strong>1</strong>][0]) smaller set's 1st ([1][1][<strong>0</strong>]) element, so the answer is <strong>1</strong>.</p>\n\n<hr>\n\n<p>That being said, such an exam question shows the lack of professionalism of your teacher, who's more interested in abusing the programming language syntax, rather than teaching fundamental initialization rules.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 25, "last_activity_date": 1432129272, "creation_date": 1432129272, "answer_id": 30351455, "question_id": 30350699, "link": "https://stackoverflow.com/questions/30350699/multi-dimensional-array-initialization/30351455#30351455", "title": "Multi-dimensional array initialization", "body": "<p>The correct answer that should yield full score would be: compile code with all warnings enabled and you won't end up writing crappy code like this.</p>\n\n<pre><code>gcc test.c -std=c11 -pedantic-errors -Wall -Wextra\ntest.c: In function 'main':\ntest.c:6:3: warning: missing braces around initializer [-Wmissing-braces]\n   int Multi[2][3][2] = {14,11,13,10,9,6,8,7,1,5,4,2};\n   ^\n</code></pre>\n\n<p>However, I suspect that your teacher is not so much concerned about the code being crap, but is rather looking for the detail in the C language which allows arrays (and structures) to be initialized even though the brace list does not match the structure of what's being initialized.</p>\n\n<p>As far as the C language is concerned, <code>int Multi[2][3][2] = {14,11,13,10,9,6,8,7,1,5,4,2}</code> is completely equivalent to:</p>\n\n<pre><code>// properly written initialization list for a 3D array\nint Multi[2][3][2] = \n{ \n  {\n    {14, 11},\n    {13, 10},\n    { 9,  6}\n  },\n  {\n    { 8,  7},\n    { 1,  5},\n    { 4,  2}\n  }\n};\n</code></pre>\n\n<p>The <em>only</em> rationale for why the first form is allowed, is because it allows you to write stuff like </p>\n\n<pre><code>int Multi[2][3][2] = {0};\n</code></pre>\n\n<p>which explicitly initializes the first element to 0 and the rest of the elements as if they had static storage duration (0 as well). Meaning all elements will be set to zero.</p>\n\n<p>Writing things like <code>int Multi[2][3][2] = {14,11,13,10,9,6,8,7,1,5,4,2}</code> is abusing the C language. It is very bad practice. Doing so is banned by MISRA-C and so on.</p>\n\n<p>A good teacher would be concerned about teaching you how to enable all compiler warnings and how to properly initialize multi-dimensional arrays, rather than letting you interpret obfuscated nonsense code.</p>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 4089990, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004131012544/picture?type=large", "display_name": "Sandeep Kumar Patil", "link": "https://stackoverflow.com/users/4089990/sandeep-kumar-patil"}, "is_accepted": false, "score": 2, "last_activity_date": 1432716609, "creation_date": 1432716609, "answer_id": 30477523, "question_id": 30350699, "link": "https://stackoverflow.com/questions/30350699/multi-dimensional-array-initialization/30477523#30477523", "title": "Multi-dimensional array initialization", "body": "<p>int Multi[2][3][2] = {14,11,13,10,9,6,8,7,1,5,4,2};</p>\n\n<p>memory map of Multi[2][3][2]  is-></p>\n\n<p>Multi[0][0][0]=14;</p>\n\n<p>Multi[0][0][1]=11;</p>\n\n<p>Multi[0][1][0]=13;</p>\n\n<p>Multi[0][1][1]=10;</p>\n\n<p>Multi[0][2][0]=9;</p>\n\n<p>Multi[0][2][1]=6;</p>\n\n<p>Multi[1][0][0]=8;</p>\n\n<p>Multi[1][0][1]=7;</p>\n\n<p>Multi[1][1][0]=1;</p>\n\n<p>Multi[1][1][1]=5;</p>\n\n<p>Multi[1][2][0]=42;</p>\n\n<p>Multi[1][2][1]=2;</p>\n\n<p>therefore the value of Multi[1][1][0]=1; this is so simple </p>\n\n<p>and we can also initialize like this</p>\n\n<p>int Multi[2][3][2] = {{{14,11},{13,10},{9,6}},{{8,7},{1,5},{4,2}}};</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4920379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9467, "favorite_count": 7, "accepted_answer_id": 30350723, "answer_count": 3, "score": 45, "last_activity_date": 1519827422, "creation_date": 1432127418, "question_id": 30350699, "link": "https://stackoverflow.com/questions/30350699/multi-dimensional-array-initialization", "title": "Multi-dimensional array initialization", "body": "<p>I have seen a question in C++ exam today:</p>\n\n<p><strong>Given the array</strong> <code>int Multi[2][3][2] = {14,11,13,10,9,6,8,7,1,5,4,2}</code>, <strong>what is the value of</strong> <code>Multi[1][1][0]</code><strong>?</strong></p>\n\n<p>Shouldn't 3-dimensional arrays be initialized like this: <code>{{{},{}},{{},{}},{{},{}}}</code>? How can I find the value of element with such indeces? It's so confusing.</p>\n"}, {"tags": ["c", "macros", "c-preprocessor", "predefined-macro"], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 4, "last_activity_date": 1432135154, "last_edit_date": 1432135154, "creation_date": 1432127971, "answer_id": 30350914, "question_id": 30350558, "link": "https://stackoverflow.com/questions/30350558/why-my-macro-doesnt-compile/30350914#30350914", "title": "Why my macro doesn&#39;t compile?", "body": "<p><code>__LINE__</code> does no expand to a \"string\", but to an <code>int</code>.</p>\n\n<p>To get around this you might like to do the following:</p>\n\n<pre><code>#define _LINE_FILE2(filename, linenumber) \"Line \" #linenumber \" of \" filename \n#define _LINE_FILE1(filename, linenumber) _LINE_FILE2(filename, linenumber)\n#define LINE_FILE _LINE_FILE1(__FILE__, __LINE__)\n</code></pre>\n\n<hr>\n\n<p>Further (gcc) details on</p>\n\n<ul>\n<li>predefined macros: <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html</a></li>\n<li>stringification: <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Stringification.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/cpp/Stringification.html</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 4912876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5f96391f5499c01e98d03957e31f98?s=128&d=identicon&r=PG", "display_name": "Toni Homedes i Saun", "link": "https://stackoverflow.com/users/4912876/toni-homedes-i-saun"}, "is_accepted": false, "score": 0, "last_activity_date": 1432128410, "creation_date": 1432128410, "answer_id": 30351074, "question_id": 30350558, "link": "https://stackoverflow.com/questions/30350558/why-my-macro-doesnt-compile/30351074#30351074", "title": "Why my macro doesn&#39;t compile?", "body": "<p>AFAIK you can not do that on the preprocessor, the usual way is:</p>\n\n<pre><code>    printf(\"Line %d of file %s\", __LINE__, __FILE__);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1432129396, "post_id": 30351475, "comment_id": 48795342, "body": "You do not really want to stringify the &quot;string&quot; <code>__FILE__</code>."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 3, "last_activity_date": 1432129447, "last_edit_date": 1432129447, "creation_date": 1432129317, "answer_id": 30351475, "question_id": 30350558, "link": "https://stackoverflow.com/questions/30350558/why-my-macro-doesnt-compile/30351475#30351475", "title": "Why my macro doesn&#39;t compile?", "body": "<p>You need an stringify helper</p>\n\n<pre><code>#define STR_HELPER(x) #x\n#define STR(x) STR_HELPER(x)\n</code></pre>\n\n<p>then</p>\n\n<pre><code>#define LINE_FILE (\"Line\" STR(__LINE__)\"of file\"__FILE__)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2024, "user_id": 966897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53382646faab1172cd3218a0afb59b88?s=128&d=identicon&r=PG", "display_name": "lollo", "link": "https://stackoverflow.com/users/966897/lollo"}, "is_accepted": false, "score": 0, "last_activity_date": 1432135318, "creation_date": 1432135318, "answer_id": 30353922, "question_id": 30350558, "link": "https://stackoverflow.com/questions/30350558/why-my-macro-doesnt-compile/30353922#30353922", "title": "Why my macro doesn&#39;t compile?", "body": "<p>To debug the macro you may use the C preprocessor separate.</p>\n\n<p>linenumber.c</p>\n\n<pre><code>#define LINE_FILE_WRONG (\"Line\"#__LINE__\"of file\"__FILE__)\n\n// solution of LPs\n#define STR_HELPER(x) #x\n#define STR(x) STR_HELPER(x)\n#define LINE_FILE (\"Line \" STR(__LINE__) \" of file \" __FILE__)\n\nLINE_FILE_WRONG\nLINE_FILE\n</code></pre>\n\n<p>Run the C preprocessor for this file and get</p>\n\n<pre><code>% cpp linenumber.c\n# 1 \"linenumber.c\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"/usr/include/stdc-predef.h\" 1 3 4\n# 1 \"&lt;command-line&gt;\" 2\n# 1 \"linenumber.c\"\n\n\n\n\n\n\n\n(\"Line\"#8\"of file\"\"linenumber.c\")\n(\"Line \" \"9\" \" of file \" \"linenumber.c\")\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4883680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/527f0508267c202ea51338752a27c908?s=128&d=identicon&r=PG&f=1", "display_name": "SPiCaRia", "link": "https://stackoverflow.com/users/4883680/spicaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1432135318, "creation_date": 1432127082, "last_edit_date": 1432134872, "question_id": 30350558, "link": "https://stackoverflow.com/questions/30350558/why-my-macro-doesnt-compile", "title": "Why my macro doesn&#39;t compile?", "body": "<pre><code>#define LINE_FILE (\"Line\"#__LINE__\"of file\"__FILE__)\n\nint main(void)\n{\n    printf(\"%s\", LINE_FILE);\n}\n</code></pre>\n\n<p>What I expected:</p>\n\n<blockquote>\n  <p>LINE_FILE = \"Line <em>linenumber</em> of file <em>filename</em>\"</p>\n</blockquote>\n\n<p>and <code>printf()</code> can output this string.</p>\n\n<p><a href=\"http://ww2.sinaimg.cn/large/005FchG6gw1esb0pvwxr3j30he06jjt7.jpg\" rel=\"nofollow\">http://ww2.sinaimg.cn/large/005FchG6gw1esb0pvwxr3j30he06jjt7.jpg</a></p>\n"}, {"tags": ["c", "gcc", "compiler-warnings"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1432127522, "post_id": 30350551, "comment_id": 48793841, "body": "Reading the gcc manual suggests <code>-w</code> might do what you need."}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432128125, "post_id": 30350551, "comment_id": 48794299, "body": "Hrm.. Do you know how to use <code>-w</code> in <code>#pragma diagnostic</code>? It only deals with warning flags (starting with <code>-W</code>) and only has options for <code>ignored</code>, <code>warning</code> and <code>error</code>.  I can&#39;t change the command line (better chance of changing the generator, but I really don&#39;t want to do that)."}, {"owner": {"reputation": 614, "user_id": 2537102, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/8TNp9.png?s=128&g=1", "display_name": "Bregalad", "link": "https://stackoverflow.com/users/2537102/bregalad"}, "edited": false, "score": 0, "creation_date": 1432129523, "post_id": 30350551, "comment_id": 48795460, "body": "1) Why don&#39;t use use a recent gcc? They have improved a lot since the 3.x  versions 2) Why are the warnings causing you a problems? If you&#39;re compiling someone else&#39;s code I don&#39;t see how this is an issue."}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1432129751, "post_id": 30350551, "comment_id": 48795655, "body": "1) Not my decision. It works currently, so little chance of that changing soon (it&#39;s not a trivial change). 2a) Because <code>-Werror</code>, 2b) I end up getting thousands of those due to how it&#39;s included."}], "answers": [{"comments": [{"owner": {"reputation": 11742, "user_id": 2790048, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OZndo.png?s=128&g=1", "display_name": "Nick Volynkin", "link": "https://stackoverflow.com/users/2790048/nick-volynkin"}, "edited": false, "score": 0, "creation_date": 1432130037, "post_id": 30351632, "comment_id": 48795891, "body": "Thanks for answering. Please edit your question to improve formatting. The code example and a citation can be formatted with edit tools. So the question gets easier to read and understand."}], "tags": [], "owner": {"reputation": 307, "user_id": 4920739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0771c643189144477a376f168c3adda8?s=128&d=identicon&r=PG&f=1", "display_name": "vguberinic", "link": "https://stackoverflow.com/users/4920739/vguberinic"}, "is_accepted": true, "score": 2, "last_activity_date": 1432130020, "last_edit_date": 1432130020, "creation_date": 1432129639, "answer_id": 30351632, "question_id": 30350551, "link": "https://stackoverflow.com/questions/30350551/cant-suppress-warnings-on-an-older-gcc/30351632#30351632", "title": "Can&#39;t suppress warnings on an older GCC", "body": "<p>Try using <code>#pragma GCC system_header</code>.</p>\n\n<p>From manual: </p>\n\n<blockquote>\n  <p>The header files declaring interfaces to the operating system and runtime libraries often cannot be written in strictly conforming C.  Therefore, GCC gives code found in system headers special treatment.  All warnings, other than those generated by \u2018#warning\u2019 (see Diagnostics), are suppressed while GCC is processing a system header.</p>\n</blockquote>\n"}], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 30351632, "answer_count": 1, "score": 2, "last_activity_date": 1432130020, "creation_date": 1432127066, "last_edit_date": 1432129352, "question_id": 30350551, "link": "https://stackoverflow.com/questions/30350551/cant-suppress-warnings-on-an-older-gcc", "title": "Can&#39;t suppress warnings on an older GCC", "body": "<p>I'm working with some autogenerated code that tends to have lines like</p>\n\n<pre><code>void f(int16_t a)\n{\n    if (a &lt; INT32_MAX)\n       ...\n}\n</code></pre>\n\n<p>Which obviously produce warnings such as:</p>\n\n<pre><code>warning: comparison is always true due to limited range of data type\n</code></pre>\n\n<p>I can't change the GCC command line options, I can just add code before/after the autogenerated stuff, like this:</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wtype-limits\"\n#pragma GCC diagnostic ignored \"-Wtautological-constant-out-of-range-compare\"\n\n#include \"autogenerated.h\"\n\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>Which works nicely on newer GCC versions, but I need to support back to gcc-3.4.6. I can deal with missing <code>#pragma GCC diagnostic push</code>, but it seems this warning was bundled with <code>-Wextra</code>in previous versions. So, I try to disable it all:</p>\n\n<pre><code>// GCC 4.6+ needed for push/pop\n#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6)\n#pragma GCC diagnostic push\n#endif\n// Disable warnings about unknown pragmas in case some of the options\n// aren't present in the current version\n#pragma GCC diagnostic ignored \"-Wpragmas\"\n// Disable the problematic warnings\n#pragma GCC diagnostic ignored \"-Wtautological-constant-out-of-range-compare\"\n#pragma GCC diagnostic ignored \"-Wsign-compare\"\n#pragma GCC diagnostic ignored \"-Wtype-limits\"\n// Sometimes it is bundled in -Wextra without a specific one, so disable that too\n#pragma GCC diagnostic ignored \"-Wextra\"\n// Disable everything else as well!\n#pragma GCC diagnostic ignored \"-Wall\"\n\n#include \"autogenerated.h\"\n\n#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6)\n#pragma GCC diagnostic pop\n#else\n#pragma GCC diagnostic warning \"-Wtautological-constant-out-of-range-compare\"\n#pragma GCC diagnostic warning \"-Wsign-compare\"\n#pragma GCC diagnostic warning \"-Wtype-limits\"\n#pragma GCC diagnostic warning \"-Wextra\"\n#pragma GCC diagnostic warning \"-Wall\"\n#pragma GCC diagnostic warning \"-Wpragmas\"\n#endif\n</code></pre>\n\n<p>And I still get that warning. </p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>After some more looking, seems like this is not possible. <code>#pragma GCC diagnostic</code> has been added in <code>gcc-4.2.4</code>, and the lines were ignored completely. There was no warning because <code>-Wpragmas</code> also is not present in <code>gcc-3.4.6</code>. </p>\n\n<p>I'll have to resort to changing/tricking the generator to not create warnable code.</p>\n"}, {"tags": ["c", "gtk"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4920119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097953814bdb0ba7f1f1813ea56bb3d8?s=128&d=identicon&r=PG&f=1", "display_name": "tux tux", "link": "https://stackoverflow.com/users/4920119/tux-tux"}, "edited": false, "score": 0, "creation_date": 1432190958, "post_id": 30359421, "comment_id": 48823840, "body": "Thanks jcoppens, Really this comments helped .was confused on key generation for few days.this code is working.Shall i ask 1 more doubt;while in timer function call  only this key is generated , but using the same code how to generate key event without timer"}, {"owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "reply_to_user": {"reputation": 25, "user_id": 4920119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097953814bdb0ba7f1f1813ea56bb3d8?s=128&d=identicon&r=PG&f=1", "display_name": "tux tux", "link": "https://stackoverflow.com/users/4920119/tux-tux"}, "edited": false, "score": 0, "creation_date": 1432217223, "post_id": 30359421, "comment_id": 48841866, "body": "You can extract the code from the timeout function (the  entire <code>if (gdk_keymap_get_entries_for_keyval</code> (included) statement) and put it in a separate function. This was just to show how to send a key after 2 seconds."}], "tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": true, "score": 2, "last_activity_date": 1432152569, "creation_date": 1432152569, "answer_id": 30359421, "question_id": 30350420, "link": "https://stackoverflow.com/questions/30350420/how-to-generate-keypress-event-programmatically/30359421#30359421", "title": "How to generate keypress event programmatically", "body": "<p>Have a look at <a href=\"https://mail.gnome.org/archives/gtk-app-devel-list/2004-July/msg00036.html\" rel=\"nofollow\">this article</a>, particularly the following snippet of code:</p>\n\n<hr>\n\n<pre><code>/* synthesize Alt+O key press */\nevent = gdk_event_new (GDK_KEY_PRESS);\nevent-&gt;key.window = widget-&gt;window;\n</code></pre>\n\n<p>This line should actually read:</p>\n\n<pre><code>event-&gt;key.window = g_object_ref (widget-&gt;window);\n</code></pre>\n\n<p>Otherwise you'll get interesting error messages later on if you destroy\nwidgets.  Took some time to figure out for myself. :)</p>\n\n<hr>\n"}], "owner": {"reputation": 25, "user_id": 4920119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097953814bdb0ba7f1f1813ea56bb3d8?s=128&d=identicon&r=PG&f=1", "display_name": "tux tux", "link": "https://stackoverflow.com/users/4920119/tux-tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1976, "favorite_count": 0, "accepted_answer_id": 30359421, "answer_count": 1, "score": 2, "last_activity_date": 1432779749, "creation_date": 1432126772, "last_edit_date": 1432779749, "question_id": 30350420, "link": "https://stackoverflow.com/questions/30350420/how-to-generate-keypress-event-programmatically", "title": "How to generate keypress event programmatically", "body": "<p>I am trying to develop a GTK application in Linux. In this scenario I do not have a keyboard attached, and I need to generate <code>key_press_event</code> for GTK.</p>\n\n<p>I have written a multithreaded program to generate key press, but it works only once; after that the keypress is not getting generated.</p>\n\n<p><code>GtkWidget *window;</code> is declared as global in order to get the same window handler for both threads.</p>\n\n<p>The program has 2 threads. The first holds the GTK main and gtk screen display code. The second generates key events according to user requirements.</p>\n\n<p>I ported the <code>if()</code> block into my code, but the result is the same.</p>\n\n<p>The signal is generated once. After that it's not coming to 2nd thread (signal generation thread).</p>\n\n<p>I have put some debug prints, but they are not executed. It seems to be waiting on <code>gtk_main</code> in the first thread.</p>\n\n<p>My code is the following:</p>\n\n<pre><code>void S1(void)\n{\n    GtkWidget *Win_1;\n    GtkBuilder *builder;        \n    builder = gtk_builder_new ();\n    gtk_builder_add_from_file (builder, \"/home/glade/glade1.glade\", NULL);\n    window = GTK_WIDGET (gtk_builder_get_object (builder, \"Win_1\"));        \n    g_signal_connect_swapped(G_OBJECT(window), \"destroy\", G_CALLBACK(gtk_main_quit), G_OBJECT(window));\n    g_signal_connect (G_OBJECT (window), \"key_press_event\", G_CALLBACK (kp_event), NULL);\n    gtk_widget_show_all(window);\n    gtk_main(); \n}\n\nkp_event()\n{\n    gtk_widget_destroy (window);            \n    S2();\n}\n</code></pre>\n\n<p><code>S2</code> is the same as <code>S1</code>, only differing in their screen item. I am calling <code>S2</code> from keypress handler of <code>S1</code> and vice versa.</p>\n\n<p>Since I have no keyboards attached, I need to change two screens based on some user input via sockets or something.</p>\n"}, {"tags": ["c", "data-structures", "strtok"], "comments": [{"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 1, "creation_date": 1432126175, "post_id": 30349925, "comment_id": 48792759, "body": "I think your call to <code>strncpy</code> is wrong. The size must include the terminating \\0. Suggest you use the <code>strdup</code> function instead, it&#39;s a combined <code>malloc</code> and <code>strcpy</code>."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4841806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1d1c05db1c36d9b067ac1c7fb67a9d6?s=128&d=identicon&r=PG&f=1", "display_name": "themacexpert", "link": "https://stackoverflow.com/users/4841806/themacexpert"}, "edited": false, "score": 0, "creation_date": 1432153914, "post_id": 30350223, "comment_id": 48811327, "body": "Thanks! This was very helpful. Quick followup - I appear to not be attaching the docNodes correctly. Can you spot anything wrong with this logic?    \t\t\t                                            <code>if ((TheIndex-&gt;index[currIndex]-&gt;page) == NULL)   \t\t\t{   \t\t\t\tTheIndex-&gt;index[currIndex]-&gt;page = myDoc;   \t\t\t}    \t\t\telse   \t\t\t{   \t\t\t\tTheIndex-&gt;index[currIndex]-&gt;page-&gt;next = myDoc;   \t\t\t}</code>"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 83, "user_id": 4841806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1d1c05db1c36d9b067ac1c7fb67a9d6?s=128&d=identicon&r=PG&f=1", "display_name": "themacexpert", "link": "https://stackoverflow.com/users/4841806/themacexpert"}, "edited": false, "score": 0, "creation_date": 1432155127, "post_id": 30350223, "comment_id": 48811990, "body": "@themacexpert The problem with this logic is that it works only for lists of length zero or one. As soon as the list gets a second element, this logic keeps writing over that element, instead of appending to the end of the list. There are two approaches to solving this: adding a <code>while</code> loop (search &quot;linked list in c example&quot;, there are plenty of tutorials for that on the web). The second approach is to keep a pointer to a pointer to <code>DocumentNode</code> which tells you where to put the new <code>DocumentNode</code>. Set it to <code>TheIndex-&gt;index[currIndex]-&gt;page</code> first, and then move to its <code>next</code> as you go."}, {"owner": {"reputation": 83, "user_id": 4841806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1d1c05db1c36d9b067ac1c7fb67a9d6?s=128&d=identicon&r=PG&f=1", "display_name": "themacexpert", "link": "https://stackoverflow.com/users/4841806/themacexpert"}, "edited": false, "score": 0, "creation_date": 1432155604, "post_id": 30350223, "comment_id": 48812245, "body": "Thanks a million! I won&#39;t make this mistake again haha."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1432126298, "creation_date": 1432126298, "answer_id": 30350223, "question_id": 30349925, "link": "https://stackoverflow.com/questions/30349925/reconstructing-an-index-in-c/30350223#30350223", "title": "Reconstructing an Index in C", "body": "<p>Your approach is too complex: the loop is trying to maintain the state, and has a long chain of conditions to decide what to do with the next token.</p>\n\n<p>Rather than doing your <code>strtok</code>s one at a time, do the first one to get the word, the second one to get the count, and then do the rest of them in pairs. It should go as follows:</p>\n\n<pre><code>while (fgets(theLine, sizeof(theLine), newPointer) != NULL) {\n    pch = strtok (theLine,\" \");\n    char *word = malloc(strlen(pch)+1);\n    strcpy(word, pch);\n    ... // Add the word\n    pch = strtok(NULL, \" \");\n    int pairCount = atoi(pch);\n    for (int i = 0 ; i != pairCount ; i++) {\n         pch = strtok(NULL, \" \");\n         int id = atoi(pch);\n         pch = strtok(NULL, \" \");\n         int count = atoi(pch);\n         ... // Add the document\n    }\n}\n</code></pre>\n\n<p>P.S. If you understood this approach well, you would probably enjoy <a href=\"http://www.cs.virginia.edu/~evans/cs655/readings/ewd594.html\" rel=\"nofollow\">this tale</a> by Edsger Dijkstra.</p>\n"}], "owner": {"reputation": 83, "user_id": 4841806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1d1c05db1c36d9b067ac1c7fb67a9d6?s=128&d=identicon&r=PG&f=1", "display_name": "themacexpert", "link": "https://stackoverflow.com/users/4841806/themacexpert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 30350223, "answer_count": 1, "score": 1, "last_activity_date": 1446976201, "creation_date": 1432125589, "last_edit_date": 1446976201, "question_id": 30349925, "link": "https://stackoverflow.com/questions/30349925/reconstructing-an-index-in-c", "title": "Reconstructing an Index in C", "body": "<p>I have a program that reads in a giant text file of lines in this format, and I need to construct a data structure from this text file. </p>\n\n<pre><code>microfinance 5 41 5 1650 2 1667 1 1811 1 1988 5 \nsubminiature 1 432 1 \n</code></pre>\n\n<p>The number 1st number after the word is the number of documents in which the word is found. The following numbers alternate between the document ID number and the amount of occurrences of the word found in the document. So for <strong>microfinance</strong>, there are 5 documents, the first one is document 41 with 5 occurences, next is doc 1650 with 2, etc.</p>\n\n<p>I use strtok to get each element and organize them. I know strtok is working fine. The problem is attaching the elements correctly to my data structures.</p>\n\n<pre><code>DocumentNode *myDoc;\nwhile (fgets(theLine, sizeof(theLine), newPointer) != NULL)\n    {\n        counter = 0;\n        pch = strtok (theLine,\" \");\n        while (pch != NULL)\n        {\n         if (0 == counter)\n         {\n            WordNode *toInsertPtr = (malloc(sizeof(struct WordNode)));\n            word = (malloc(100));\n            strncpy (word, pch, strlen(pch));\n            toInsertPtr-&gt;word = word;\n            toInsertPtr-&gt;next = NULL;\n\n            currIndex = JenkinsHash(word, MAX_HASH_SLOT);\n            if ((TheIndex-&gt;index[currIndex]) == NULL)\n            {\n                TheIndex-&gt;index[currIndex] = toInsertPtr;\n            }\n            else \n            {\n                TheIndex-&gt;index[currIndex]-&gt;next = toInsertPtr;\n            }   \n         }\n\n         if (1 == counter)\n         {\n            numOfDocs = atoi(pch);\n         }\n\n         if (counter % 2 == 0 &amp;&amp; counter != 0 &amp;&amp; pch != NULL)\n         {\n            myDoc= (malloc(sizeof(struct DocumentNode)));\n            myDoc-&gt;next = NULL;\n            int doc_id = atoi(pch);\n            myDoc-&gt;documentID = doc_id;         \n         }\n\n         if (counter % 2 != 0 &amp;&amp; counter != 1 &amp;&amp; pch != NULL)\n         {\n            myDoc-&gt;occurences = atoi(pch);\n\n            if (TheIndex-&gt;index[currIndex]-&gt;page == NULL)\n            {\n                TheIndex-&gt;index[currIndex]-&gt;page = myDoc;\n            }\n            else\n            {\n                TheIndex-&gt;index[currIndex]-&gt;page-&gt;next = myDoc;\n            }\n         }\n          pch = strtok (NULL, \" \");\n          counter++;\n        }\n    } \n</code></pre>\n\n<p>I've GDBed to find out that the problem is here. The first if statement checking to see if there is a doc node at the index is always catching as null (even when there is clearly something at that point in the index) and it's overwriting one slot again and again. Why would it always believe it's NULL when it's not?</p>\n\n<pre><code>        if (TheIndex-&gt;index[currIndex]-&gt;page == NULL)\n        {\n            TheIndex-&gt;index[currIndex]-&gt;page = myDoc;\n        }\n        else\n        {\n            TheIndex-&gt;index[currIndex]-&gt;page-&gt;next = myDoc;\n        }\n</code></pre>\n\n<p>The data structures are as follows:</p>\n\n<pre><code>typedef struct DocumentNode {\n    struct DocumentNode *next;      // pointer to next member of the list.\n    int documentID;                 //doc identifier (filename, ie. 1, 2, etc.)\n    int occurences;                 //num. occurances. \n} DocumentNode;\n\ntypedef struct WordNode {                \n    struct WordNode *next;           //pointer to the next word (for collisions)\n    char *word;                      //the word itself.\n    DocumentNode *page;              // pointer to the first element of the page list.\n} WordNode;\n\ntypedef struct InvertedIndex {\n    WordNode *index[MAX_HASH_SLOT];   \n} InvertedIndex;\n</code></pre>\n"}, {"tags": ["c#", "c++", "c", "communication", "thrift-protocol"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1432125035, "post_id": 30349663, "comment_id": 48791830, "body": "i64 sounds good, maybe you convert it incorrecly on server side?"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1432125160, "post_id": 30349663, "comment_id": 48791925, "body": "Are the bytes in good order? Maybe by chance the problem is endianess."}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432125561, "post_id": 30349663, "comment_id": 48792262, "body": "How about using <code>volatile</code> as it has something to do with time."}, {"owner": {"reputation": 15, "user_id": 4077939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yZkvu0HrrI/AAAAAAAAAAI/AAAAAAAAACE/u4_ChjSORu8/photo.jpg?sz=128", "display_name": "Ayush Agarwal", "link": "https://stackoverflow.com/users/4077939/ayush-agarwal"}, "edited": false, "score": 0, "creation_date": 1432125685, "post_id": 30349663, "comment_id": 48792353, "body": "Konrad I am using DateTime at server side. and Date time internally is a structure so should I go for structure but in that Case I have to write a new structure for date and time and fill it one by one."}, {"owner": {"reputation": 15, "user_id": 4077939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yZkvu0HrrI/AAAAAAAAAAI/AAAAAAAAACE/u4_ChjSORu8/photo.jpg?sz=128", "display_name": "Ayush Agarwal", "link": "https://stackoverflow.com/users/4077939/ayush-agarwal"}, "edited": false, "score": 0, "creation_date": 1432125745, "post_id": 30349663, "comment_id": 48792413, "body": "Yes luk bytes are in order. first of all understanding thrift deepely is bit difficult  but the array which i have at client side i am getting at server side also."}, {"owner": {"reputation": 15, "user_id": 4077939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yZkvu0HrrI/AAAAAAAAAAI/AAAAAAAAACE/u4_ChjSORu8/photo.jpg?sz=128", "display_name": "Ayush Agarwal", "link": "https://stackoverflow.com/users/4077939/ayush-agarwal"}, "edited": false, "score": 0, "creation_date": 1432125808, "post_id": 30349663, "comment_id": 48792453, "body": "yanivx Volatile is a good idea but is there any volatile key work in CSharp also because datatype at both the ends should be same."}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432126037, "post_id": 30349663, "comment_id": 48792642, "body": "@AyushAgarwal yes there does exist volatile keyword in C#"}, {"owner": {"reputation": 15, "user_id": 4077939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yZkvu0HrrI/AAAAAAAAAAI/AAAAAAAAACE/u4_ChjSORu8/photo.jpg?sz=128", "display_name": "Ayush Agarwal", "link": "https://stackoverflow.com/users/4077939/ayush-agarwal"}, "reply_to_user": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432127840, "post_id": 30349663, "comment_id": 48794083, "body": "@yanivx i will try with that also. and let you know if it works."}, {"owner": {"reputation": 15, "user_id": 4077939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yZkvu0HrrI/AAAAAAAAAAI/AAAAAAAAACE/u4_ChjSORu8/photo.jpg?sz=128", "display_name": "Ayush Agarwal", "link": "https://stackoverflow.com/users/4077939/ayush-agarwal"}, "reply_to_user": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432525423, "post_id": 30349663, "comment_id": 48946109, "body": "@yanivx i64 is correct because I have to send the number of mili seconds from 1970 to present ."}], "answers": [{"tags": [], "owner": {"reputation": 1050, "user_id": 748140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c232622479d14b751fe75ce82c41999?s=128&d=identicon&r=PG", "display_name": "codeSF", "link": "https://stackoverflow.com/users/748140/codesf"}, "is_accepted": true, "score": 1, "last_activity_date": 1432237954, "creation_date": 1432237954, "answer_id": 30383114, "question_id": 30349663, "link": "https://stackoverflow.com/questions/30349663/which-data-type-is-most-appropriate-for-datetime-in-thrift-communication-in-c/30383114#30383114", "title": "Which Data Type is most appropriate for datetime in thrift communication in c++?", "body": "<p>I think Konrad's comment is probably the accurate short answer, you need to make sure that the C++ i64 has the same meaning as the C# i64. The .Net DateTime uses Windows tick counts (100 nano second intervals since 1601). Your C++ code may be expecting seconds since 1970. Read on...</p>\n\n<p>Cross platform Date/Time presents several challenges. There are numerous system interfaces, distinct programming language facilities and various ways to encode date/time. In most cases systems and languages don\u2019t try to provide compatibility with each other. </p>\n\n<p>To get a sense for the range of possibilities:</p>\n\n<ul>\n<li>Gnu Linux supports struct timeval (usec resolution), struct timespec (nsec resolution), time_t (second resolution), struct tm (date/time broken down), among others, more info here: <a href=\"ftp://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_21.html\" rel=\"nofollow\">ftp://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_21.html</a></li>\n<li>Windows uses SYSTEMTIME, FILETIME and LARGE_INTEGER for high resolution timers.</li>\n<li>C++98 inherits time() from C but C++11 supplies the std::chrono library</li>\n<li>.Net supplies the DateTime structure and other features </li>\n</ul>\n\n<p>If you want to deal with dates and times across platforms it can be beneficial to select a \u201cpivot format\u201d, a format that all of your code relies on when communicating date/time externally (for example, with Apache Thrift).  </p>\n\n<p>Converting to/from a pivot format (or any other specific format) is something you need to do actively. It is uncommon for any two systems to supply compatible structures and semantics. </p>\n\n<p>For example, POSIX and Windows both produce a 64 bit integer housing the elapsed time since an epoch but the granularity (units of time) and epoch (starting point) are different. Windows GetSystemTimeAsFileTime() returns a FILETIME storing the 64-bit number of 100-nanosecond intervals since midnight Jan 1, 1601 and the POSIX time() function returns the number of seconds that have elapsed since Jan 1, 1970. Also some systems define fields that exceed their clock granularity. Windows GetSystemTime() reports values to the millisecond but is generally accurate to only about 10 milliseconds. Add to this timezones, leap seconds and other anomalies and you are really taking a flyer if you just copy bits from one struct to another or reinterpret a pointer without carefully considering the source and the destination.</p>\n\n<p>An explicit struct is often clearer than an implicit elapsed-unit/epoch integral value for general purpose communication of time stamp style data. For example, something like this might work for a Thrift RPC application:</p>\n\n<pre><code>struct TimeStamp {\n  1: i16 year\n  2: byte month\n  3: byte day\n  4: byte hour=0\n  5: byte minute=0\n  6: i16 second=0\n  7: double fraction=0\n}\n</code></pre>\n\n<p>If you want to be able to do math with your timestamps (e.g. subtract two timestamps to find an elapsed time) then an integral value (like i64) may be better but you will still need to establish a pivot format and carefully manage conversions from platform to platform and language to language to address granularity and epoch at a minimum. </p>\n\n<p>One nice thing about the JVM and .Net/CLR environments is that you can use the respective platform libraries from any language on the platform. Thus if you use managed C++ your C++ code will have access to the same mscorlib.DateTime as the C# server.</p>\n"}], "owner": {"reputation": 15, "user_id": 4077939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yZkvu0HrrI/AAAAAAAAAAI/AAAAAAAAACE/u4_ChjSORu8/photo.jpg?sz=128", "display_name": "Ayush Agarwal", "link": "https://stackoverflow.com/users/4077939/ayush-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1383, "favorite_count": 1, "accepted_answer_id": 30383114, "answer_count": 1, "score": 0, "last_activity_date": 1432237954, "creation_date": 1432124905, "question_id": 30349663, "link": "https://stackoverflow.com/questions/30349663/which-data-type-is-most-appropriate-for-datetime-in-thrift-communication-in-c", "title": "Which Data Type is most appropriate for datetime in thrift communication in c++?", "body": "<p>In thrift communication I need to send Date and Time from client to server. so which datatype will be most appropriate. </p>\n\n<p>My Client is in C++ and Server is in C-Sharp. and in Server I am using DateTime keyword for doing this task. but Confused about Cpp that What I should use because I64 which I am using right now is not giving me the correct data at server side. </p>\n\n<p>Thanks in Advance </p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "registry"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1432126526, "post_id": 30349575, "comment_id": 48793032, "body": "Is your process virtualized?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1432126738, "post_id": 30349575, "comment_id": 48793204, "body": "undet task manager - &gt; processes -&gt; UAC virtualization : not allowed."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1432128470, "post_id": 30349575, "comment_id": 48794580, "body": "Use the KEY_WOW64_64KEY to access the 64-bit registry view from a 32-bit program, KEY_WOW64_32KEY to see the 32-bit registry view from a 64-bit program.  Deleting keys you don&#39;t have sufficient permission to delete is a non-starter of course.   You must ask for UAC elevation with a manifest.  Or the access permissions of the (parent) key need to be changed so a non-privileged user account can whack it."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432128601, "post_id": 30349575, "comment_id": 48794689, "body": "@HansPassant can I do it programatically from within the application without a manifest?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432128890, "post_id": 30349575, "comment_id": 48794923, "body": "Guessing at what &quot;it&quot; might mean: asking for UAC elevation requires a manifest, no other way."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432134728, "post_id": 30349575, "comment_id": 48799681, "body": "@HansPassant The code already uses the alternate registry view flags. And it has a manifest because it is not virtualised."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432149332, "post_id": 30349575, "comment_id": 48808703, "body": "@HansPassant: &quot;<i>asking for UAC elevation requires a manifest, no other way</i>&quot; - that is not entirely true. Using <code>ShellExecute&#47;Ex()</code> with the &quot;runas&quot; verb, or the COM Elevation Moniker, will invoke UAC elevation without needing a manifest on the target process/object."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1432149450, "post_id": 30349575, "comment_id": 48808756, "body": "@DavidHaim: you should use <code>RegDeleteTree()</code> or <code>SHDeleteKey()</code> to delete a key and its subkeys, instead of enumerating the subkeys manually to delete them. The <code>RegDeleteKeyEx()</code> documentation even says as much."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1432194491, "post_id": 30349575, "comment_id": 48825915, "body": "@RemyLebeau <code>RegDeleteKeyEx</code> is the only function that can delete keys from 64 bit app from 32 registry and vice versa"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1432222796, "post_id": 30349575, "comment_id": 48846197, "body": "@DavidHaim: Not true. Use <code>RegOpenKeyEx()</code> to open a parent 32/64bit key and then use <code>RegDeleteTree()</code>/<code>SHDeleteKey()</code> to recursively delete its subkeys as needed."}], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 326, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432124658, "creation_date": 1432124658, "question_id": 30349575, "link": "https://stackoverflow.com/questions/30349575/deleting-32-registry-key-from-a-64-application", "title": "Deleting 32 registry key from a 64 application", "body": "<p>I'm trying to write a generic API to deal with windows registry.\nof course, the first problems that come to mind is all the cross 32-64 excessing plus the problems the UAC poses since win 7..</p>\n\n<p>in my API , I can create new subkeys from 64 application to the 32-registry keys , but when I try to delete them,\nI face several problems.</p>\n\n<p>for example, my \"create or return a subkey if exists\" function looks like this:</p>\n\n<pre><code>Registry::SubKey Registry::RegistryKey::subKey(const std::wstring&amp; subkey){\n    HKEY registryKey;\n    auto result = RegCreateKeyEx(m_RegistryKey, subkey.c_str(), 0, //m_RegistryKey is 100% valid , for example HKEY_LOCAL_MACHINE\n        NULL, REG_OPTION_NON_VOLATILE ,KEY_ALL_ACCESS | ((Registry::currentBitMode() == 64) ? KEY_WOW64_64KEY : KEY_WOW64_32KEY), \n            NULL, &amp;registryKey, NULL); //currentBitMode return 64 or 32 , depends on what the developer set beforehand\n    return Registry::SubKey(registryKey, false);\n}\n</code></pre>\n\n<p>and it works perfectly. I can create new subkeys under the 32-subset of the registry or the 64.</p>\n\n<p>now, here is my deleting methode:</p>\n\n<pre><code>bool Registry::RegistryKey::deleteSubKey(const std::wstring&amp; subkey){\n    std::wstring name(MAX_PATH, 0);\n    HKEY subKeyHandle;\n\nauto buffer = subkey;\n//m_RegistryKey - member variable, should be valid. at least it's valid when I try it\nauto isFunctionSuccessful = RegOpenKeyEx(m_RegistryKey, buffer.c_str(), 0, KEY_ALL_ACCESS | (Registry::currentBitMode() == 64) ? KEY_WOW64_64KEY : KEY_WOW64_32KEY, &amp;subKeyHandle);\n\nif (isFunctionSuccessful != ERROR_SUCCESS){\n    std::cout &lt;&lt; \"error : \" &lt;&lt; isFunctionSuccessful &lt;&lt; \"\\n\";\n    return false;\n}\n\nif (buffer.back() != L'\\\\'){\n    buffer += L'\\\\';\n}\n\nDWORD dwSize = MAX_PATH;\nisFunctionSuccessful = RegEnumKeyEx(subKeyHandle, 0, &amp;name[0], &amp;dwSize, NULL, NULL, NULL, nullptr);\n\nif (isFunctionSuccessful == ERROR_SUCCESS){\n    do {\n        name = name.substr(0, name.find(wchar_t(0)));\n        if (!deleteSubKey(buffer + name)) {\n            break;\n        }\n\n        dwSize = MAX_PATH;\n        name.resize(MAX_PATH);\n        isFunctionSuccessful = RegEnumKeyEx(subKeyHandle, 0, &amp;name[0], &amp;dwSize, NULL, NULL, NULL, nullptr);\n    } while (isFunctionSuccessful == ERROR_SUCCESS);\n}\n\nRegCloseKey(subKeyHandle);\n\nisFunctionSuccessful = RegDeleteKeyEx(m_RegistryKey, subkey.c_str(), (Registry::currentBitMode() == 64) ? KEY_WOW64_64KEY : KEY_WOW64_32KEY, 0);\n\nif (isFunctionSuccessful == ERROR_SUCCESS){\n    return true;\n}\n\nreturn false;\n</code></pre>\n\n<p>}</p>\n\n<p>this is my C++ variation on the (nasty) MSDN example here :\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724235%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms724235%28v=vs.85%29.aspx</a></p>\n\n<p>now , here is the problem :\nI , for example, create a new 32 key under HKEY_LOCAL_MACHINE/Software in the name of XXX ,\nI can open it with my function , see it's values and see it under regedit.</p>\n\n<p>if I try to delete under the string \"Software\\XXX\" I get error code 2 - File note found.\nIf I try to delete it inder the stirng  SOFTWARE\\Wow6432Node\\XXX I get error code 5 - Access denied.\neven when running the executable as admin , I still see the 2 error code . any Ideas?</p>\n"}, {"tags": ["c", "list", "function", "pointers"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432125358, "post_id": 30349519, "comment_id": 48792087, "body": "&quot;Listed link&quot;? Surely you mean &quot;linked list&quot;?"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432126110, "post_id": 30349519, "comment_id": 48792699, "body": "Is it not? the structure  is list{ node* first};"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432137263, "post_id": 30349519, "comment_id": 48801541, "body": "I just found out what you ment, the title was wrong. changed."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432126040, "post_id": 30349726, "comment_id": 48792643, "body": "my apologies, the code was half-written in spanish so i changed it, forgot that one. It&#39;s fine in my code, no errors nor warnings"}], "tags": [], "owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "is_accepted": false, "score": 0, "last_activity_date": 1432125089, "creation_date": 1432125089, "answer_id": 30349726, "question_id": 30349519, "link": "https://stackoverflow.com/questions/30349519/pointers-and-linked-list-in-c-unexpected-behavior-of-program/30349726#30349726", "title": "pointers and linked list in C- unexpected behavior of program", "body": "<pre><code>int stacknewmovie (movie* p, list* l){\nif(!p || !l){\n   return 0; \n}\n node* n;\n n=newnode();\nif(!n){\n  return 0;\n}\ninsertnodeinfo(n, p);\nn-&gt;next=NULL;\nif(l-&gt;first==NULL){\n    l-&gt;first=node;                 //problem here replace \"node\" by \"n\"??\n    return 1;\n}else{\n    n-&gt;next=l-&gt;first;\n    l-&gt;first=n;\n    return 1;\n}\n</code></pre>\n\n<p>as I did in the comment replace \"node\" by \"n\" first (I suppose that you want to write \"n\" not \"node\")</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432125969, "post_id": 30349968, "comment_id": 48792588, "body": "Thaks for the replies! Sorry, my native language is not english, so &quot;linked list&quot; might not be the proper term. yes, I don&#39;t care about the order of the list, so I just insert it always at the beggining. How is that a problem then?"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432126711, "post_id": 30349968, "comment_id": 48793183, "body": "Also, a circular linked list should have the last node pointing to the first, right? Mine points to NULL, if I am correct. I don&#39;t change where it points unless the list is not empty so the last node always keeps NULL, I think."}, {"owner": {"reputation": 560, "user_id": 3516731, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PQAgt.jpg?s=128&g=1", "display_name": "Adri&#225;n Romero", "link": "https://stackoverflow.com/users/3516731/adri%c3%a1n-romero"}, "reply_to_user": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432128695, "post_id": 30349968, "comment_id": 48794766, "body": "Only if the list is empty, but in else statement you put <code>n-&gt;next=l-&gt;first;</code> then the &#39;last&#39; node points to the first node. Can you show insertnodeinfo(n,p) code?"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432129333, "post_id": 30349968, "comment_id": 48795291, "body": "Sure, I&#39;ll post it right now. Anyway, I&#39;m sorry I am not getting it. Do you mean &quot;n&quot; is the last node, so it points to the first? I thought n would be the first node in the list, not the last... Again, thank you very much for the reply."}, {"owner": {"reputation": 560, "user_id": 3516731, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PQAgt.jpg?s=128&g=1", "display_name": "Adri&#225;n Romero", "link": "https://stackoverflow.com/users/3516731/adri%c3%a1n-romero"}, "reply_to_user": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432131528, "post_id": 30349968, "comment_id": 48797087, "body": "How do you call stacknewmovie?"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432132203, "post_id": 30349968, "comment_id": 48797699, "body": "I just call it after filling its fields:                              <code>stacknewmovie(p,getprofilelist(profile));</code>"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432132496, "post_id": 30349968, "comment_id": 48797909, "body": "I don&#39;t think the problem is how I call that function. Here I call only moviecopy after filling the fields:                <code>moviecopy(paux, p);                printf(&quot;\\nTitle:%s&quot;,getmovietitle(paux));                printf(&quot;\\nAuthor:%s&quot;,getmovieauthor(paux));                printf(&quot;\\nRelease date: %d&#47;%d&#47;%d&quot;, getmoviereleaseday(paux),getmoviereleasemonth(paux),getmovie&zwnj;&#8203;releaseyear(paux));                printf(&quot;\\nDate watched: %d&#47;%d&#47;%d&quot;, getmoviedateday(paux),getmoviedatemonth(paux),getmoviedateye&zwnj;&#8203;ar(paux));                printf(&quot;\\nValoration:%d&quot;, getmovieval(paux));               </code>"}, {"owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "edited": false, "score": 0, "creation_date": 1432132611, "post_id": 30349968, "comment_id": 48798000, "body": "If i don&#39;t use moviecopy and just print the movie I just filled, it works. But copying that movie and printing the copy causes it to show empty."}], "tags": [], "owner": {"reputation": 560, "user_id": 3516731, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PQAgt.jpg?s=128&g=1", "display_name": "Adri&#225;n Romero", "link": "https://stackoverflow.com/users/3516731/adri%c3%a1n-romero"}, "is_accepted": false, "score": 0, "last_activity_date": 1432125685, "creation_date": 1432125685, "answer_id": 30349968, "question_id": 30349519, "link": "https://stackoverflow.com/questions/30349519/pointers-and-linked-list-in-c-unexpected-behavior-of-program/30349968#30349968", "title": "pointers and linked list in C- unexpected behavior of program", "body": "<p>I think it is not a linked list because: </p>\n\n<pre><code>n-&gt;next=l-&gt;first; //this made the list a circular linked list \nl-&gt;first=n;       //Here is the problem I think \n</code></pre>\n\n<p>Because always the new node becomes the first node in the list, Is this that you want? </p>\n"}], "owner": {"reputation": 1, "user_id": 4920241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a34ecd4f7d1b2ba24f1a5d98d04ea4d?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/4920241/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432137281, "creation_date": 1432124510, "last_edit_date": 1432137281, "question_id": 30349519, "link": "https://stackoverflow.com/questions/30349519/pointers-and-linked-list-in-c-unexpected-behavior-of-program", "title": "pointers and linked list in C- unexpected behavior of program", "body": "<p>I recently started programming in C, and I've been working in a linked list program for a while. Now, the program is about having a profile in which you will register movies you watch and then save them in a .txt file. the trouble comes with the movie getting into the list. when I try to print it, the fields will show empty, as if I weren't assigning the pointers properly, but the fact is that the program KNOWS that I stacked a movie in my profile. I know it's a hard question to ask, any help would be appreciated. I'll show here the Insertmovie function, where I think there might be the problem, and the moviecopy function(I tested that function and does not work itself, although I doubt I did something wrong there):</p>\n\n<pre><code>int stacknewmovie (movie* p, list* l){\n    if(!p || !l){\n        return 0;\n    }\n    node* n;\n    n=newnode();\n    if(!n){\n        return 0;\n    }\n    insertnodeinfo(n, p);\n    n-&gt;next=NULL;\n    if(l-&gt;first==NULL){\n        l-&gt;first=n;\n        return 1;\n    }else{\n        n-&gt;next=l-&gt;first;\n        l-&gt;first=n;\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Here the moviecopy:</p>\n\n<pre><code>int moviecopy(movie* pel2,movie* pel1){\n    if(!pel1 || !pel2){\n        return NULL;\n    }else{\n        pel2=pel1;\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Again, thanks for taking your time. I didn't know how to show my problem better, as the compiler doesn't even warns me about anything.</p>\n\n<pre><code>node* insertnodeinfo(node* n, movie* p){\n    if(!p || !n){\n        return NULL;\n    }else{\n        moviecopy(n-&gt;info, p);\n        return n;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "function", "return"], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1432124390, "post_id": 30349317, "comment_id": 48791307, "body": "Plus one for standard quotation."}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1432124434, "post_id": 30349317, "comment_id": 48791333, "body": "@Bathsheba Appreciate that!! Gracious. :-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432126445, "post_id": 30349317, "comment_id": 48792972, "body": "I don&#39;t quite see what the value limits of a long have to do with the question."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1432126982, "post_id": 30349317, "comment_id": 48793399, "body": "I conject that Natasha, like me, wanted to examine the validity of the assignment <code>b=1000000000</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1432127223, "post_id": 30349317, "comment_id": 48793603, "body": "@Bathsheba I read the question as &quot;is it valid to return a long integer from a function&quot;, rather than &quot;does the code in this example have well-defined behavior&quot;. Anyway, no biggie."}], "tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": true, "score": 11, "last_activity_date": 1432124351, "last_edit_date": 1432124351, "creation_date": 1432123946, "answer_id": 30349317, "question_id": 30349288, "link": "https://stackoverflow.com/questions/30349288/can-long-int-be-returned-by-a-function-in-c/30349317#30349317", "title": "Can long int be returned by a function in c?", "body": "<p>Yes, it is valid.</p>\n\n<p>As long as you're retuning a proper <code>long int</code> value (which we can see, you're doing<sup>#</sup>) and catching that into another <code>long int</code> (you need to take care), it should be fine.</p>\n\n<hr>\n\n<p>#) As per the <code>C11</code> standard, <code>LONG_MAX</code> is <code>+2147483647</code> and <code>1000000000</code> is less than that. Chapter \u00a75.2.4.2.1, for reference.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432126464, "post_id": 30349403, "comment_id": 48792988, "body": "I don&#39;t quite see what the value limits of a long have to do with the question."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432126531, "post_id": 30349403, "comment_id": 48793035, "body": "How could you? I upvoted your answer :-) Seriously, it would have been very relevant had the OP, say had wanted to assign 10,000,000,000 to the <code>long int</code>. That&#39;s not always well-defined."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432127053, "post_id": 30349403, "comment_id": 48793463, "body": "The type of the integer literal itself is the smallest possible that can fit the number, for the given system. But it is never smaller than <code>int</code>. This is well-defined in 6.4.4.1. In case of 10 billion, the compiler would likely pick type <code>long long int</code>.  If you then show that into a long, the following applies (6.3.1.3) <code>&quot;Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised.&quot;</code>. So something implementation-defined is guaranteed to happen."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1432124171, "creation_date": 1432124171, "answer_id": 30349403, "question_id": 30349288, "link": "https://stackoverflow.com/questions/30349288/can-long-int-be-returned-by-a-function-in-c/30349403#30349403", "title": "Can long int be returned by a function in c?", "body": "<p>The C standard stipulates a minimum size of 32 bits for a <code>long int</code>, stored in such a way as to guarantee that values in the range [\u22122147483647, +2147483647] can be represented. (Note that a 2s compliment representation gives you \u22122147483648). So the assignment of 1,000,000,000 to a <code>long int</code> is always defined.</p>\n\n<p>Returning a value copy of a <code>long int</code> is well-defined too.</p>\n\n<p>Note that if you hadn't <em>initialised</em> <code>b</code> (i.e. if you had omitted the statement <code>b=1000000000;</code>), then the behaviour of your program would have been undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1432125014, "creation_date": 1432125014, "answer_id": 30349704, "question_id": 30349288, "link": "https://stackoverflow.com/questions/30349288/can-long-int-be-returned-by-a-function-in-c/30349704#30349704", "title": "Can long int be returned by a function in c?", "body": "<p>A function can return pretty much any type:</p>\n\n<blockquote>\n  <p>6.9.1 </p>\n  \n  <p>The return type of a function shall be void or a complete object type other than array type.</p>\n</blockquote>\n\n<p>And that's it. </p>\n"}, {"comments": [{"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1432287000, "post_id": 30350019, "comment_id": 48874070, "body": "Apologies to the three detractors who clearly think I&#39;m lowering the tone. But I and two others thought it was funny. So I&#39;m saying the jury is still out on this one."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1433868496, "post_id": 30350019, "comment_id": 49532307, "body": "This answer continues to divide opinion but at least those in favour now out number those against."}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 3, "last_activity_date": 1432126546, "last_edit_date": 1432126546, "creation_date": 1432125815, "answer_id": 30350019, "question_id": 30349288, "link": "https://stackoverflow.com/questions/30349288/can-long-int-be-returned-by-a-function-in-c/30350019#30350019", "title": "Can long int be returned by a function in c?", "body": "<h2>Can long int be returned by a function in c?</h2>\n\n<p><img src=\"https://i.stack.imgur.com/NTft5.gif\" alt=\"Can long int be returned by a function in c?\"></p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n"}], "owner": {"reputation": 187, "user_id": 4920287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/013abfd3fe55622499bc37c24825e919?s=128&d=identicon&r=PG&f=1", "display_name": "Vasu Dev Garg", "link": "https://stackoverflow.com/users/4920287/vasu-dev-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4884, "favorite_count": 0, "accepted_answer_id": 30349317, "answer_count": 4, "score": 3, "last_activity_date": 1539534512, "creation_date": 1432123879, "last_edit_date": 1432124551, "question_id": 30349288, "link": "https://stackoverflow.com/questions/30349288/can-long-int-be-returned-by-a-function-in-c", "title": "Can long int be returned by a function in c?", "body": "<p>Suppose we want to return a <strong>long integer</strong> by a function.\nHow to do it?\nIs it valid?</p>\n\n<pre><code>long int function()\n{\n  long int b;\n  b=1000000000;\n  return b;\n} \n</code></pre>\n"}, {"tags": ["c", "pointers", "embedded"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1432123728, "post_id": 30349162, "comment_id": 48790839, "body": "Yes, there is a problem with endianness. The result of <code>*current8bits</code> depends on the platform&#39;s endianness."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1432124449, "post_id": 30349162, "comment_id": 48791344, "body": "Yes, this should work if you take care with the endianness. Of course this type of bit-twiddling may inhibit other optimizations so have you checked that your compiler doesn&#39;t already generate the desired code for extracting the most-significant 8 bits through a shift? Not all embedded compilers are entirely hopeless you know, just most of them.."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432178458, "post_id": 30349162, "comment_id": 48819128, "body": "I might miss the point, but what would be the advantage of the first part&#39;s extending to 32 bits instead of directly calculating on the 8 bit values? Depending on the architecture (I assume a 32 Bitter - Cortex-M?), this may even be faster and more compact in 32 bits than some suspectible conversions (endianess!) using casts you will have a hard time to understand when looking at this code after some months. Also, you should use <code>stdint.h</code> instead of assuming long to be 32 bits and char 8 bits! Not to speak of char&#39;s signed-ness being left to the implementation."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432178523, "post_id": 30350484, "comment_id": 48819137, "body": "That might generate even more code than the original version, depending on toolchain and target arch."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1432126938, "creation_date": 1432126938, "answer_id": 30350484, "question_id": 30349162, "link": "https://stackoverflow.com/questions/30349162/pointer-type-of-smaller-size-than-variable/30350484#30350484", "title": "Pointer type of smaller size than variable", "body": "<p>Yes, it is endian dependent code, to make it portable you can use a mask and the left shift operator:</p>\n\n<pre><code>uint8_t goal8bits = 0x01;               // 8 bits\nuint32_t current32bits = 0x01234567;    // 32 bits\nuint32_t step32bits = 1;                // 32 bits\n\nif (goal8bits &lt; ((current32bits &amp; 0xFF000000) &gt;&gt; 24)) {\n    current32bits += step32bits;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432178825, "post_id": 30352003, "comment_id": 48819209, "body": "That &quot;macro&quot; (its a function actually) compares <code>char</code> with <code>void *</code>. Wouldn&#39;t call that &quot;good&quot;. Also, gcc provides macros for this <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html\" rel=\"nofollow noreferrer\">already</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432185417, "post_id": 30352003, "comment_id": 48821290, "body": "@Olaf OP Is talking about embedded system. Cross compiler and toolchains are not always derived from gcc. In many case you have to deal with very poor libs and compiler/linker options. Those solutions could work well with very basic systems."}, {"owner": {"reputation": 105, "user_id": 2982253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8057bb7a382b6481deb47e9c0f2de1?s=128&d=identicon&r=PG&f=1", "display_name": "Omsitelta", "link": "https://stackoverflow.com/users/2982253/omsitelta"}, "edited": false, "score": 0, "creation_date": 1432191061, "post_id": 30352003, "comment_id": 48823893, "body": "I know the endianism of my system (in fact I have who, one for simulation and other for the real micro) so I solve it with a macro for my the initialization of the pointer to do the same as you commented depending on the current system.  The use of a macro is just to make it clearer what i am doing.  Thank you!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432214006, "post_id": 30352003, "comment_id": 48839368, "body": "@LPs: &quot;gcc provides ...&quot; does not imply I expect him to use it. It is just a hint his compiler/cpp might also have some support for this. Wheter he uses Keil, IAR, sdcc or anything else (some commercial toolchains use gcc - Microchip for instance, iirc Atmel, too). However, there are still better ways without pointers (using a union for instance); Also, I still see no advantage. To me the question has the smell of an XY-problem."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432215113, "post_id": 30352003, "comment_id": 48840180, "body": "@Olaf I&#39;m not getting you. Where the code I <a href=\"http://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine\">LINKED</a> is comparing char to void *?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432216351, "post_id": 30352003, "comment_id": 48841139, "body": "@LPs: <code>return (test_endian[0] == NULL)</code>!"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432218619, "post_id": 30352003, "comment_id": 48842953, "body": "@Olaf Last comment: I was referring to the top voted answer, not to the question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432219430, "post_id": 30352003, "comment_id": 48843629, "body": "@LPs: There are currently two answers with the same number of votes. If you refer to <i>your</i> answer, you might have noticed that I commented that, neither the question nor the other answer. You might have missed that we are talking about <code>C</code>, not <code>C++</code> (where comparing <code>char</code> to the macro <code>NULL</code> would still be bad style). So, you still have to prove me wrong. Oh, and regarding &quot;embedded&quot;: you might have a look at my profile. Just a hint."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432219640, "post_id": 30352003, "comment_id": 48843801, "body": "@Olaf lol. In the question I <a href=\"http://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine\">LINKED</a> there is only one top-voted and checked-as-correct ansswer: the one with 60 upvotes..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432221344, "post_id": 30352003, "comment_id": 48845165, "body": "Ok, that was not clear to me; your last comment now made it clear (one should always express clearly what is meant). Well, that&#39;s exactly how I would have done it (see my other comment - didn&#39;t read the referenced answer until now). However, I still suspect the question <i>here</i> is actually not the right one. But without more information ..."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 1, "last_activity_date": 1432221604, "last_edit_date": 1495541658, "creation_date": 1432130548, "answer_id": 30352003, "question_id": 30349162, "link": "https://stackoverflow.com/questions/30349162/pointer-type-of-smaller-size-than-variable/30352003#30352003", "title": "Pointer type of smaller size than variable", "body": "<p>If you know the endianless of your system, and it is static you have to select from</p>\n\n<pre><code>char *current8bits = (char *)&amp;current32bits;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char *current8bits = (((char *)&amp;current32bits)+3);\n</code></pre>\n\n<p>If you have to test it, and your system cannot give you such of info you can derive it at application startup</p>\n\n<pre><code>uint32_t temp = 0x01020304;\nuint8_t *temp2 = (uint8_t *)(&amp;temp);\nif (*temp2 == 0x01)\n{\n   char *current8bits = (char *)&amp;current32bits;\n}\nelse\n{\n   char *current8bits = (((char *)&amp;current32bits)+3);\n}\n</code></pre>\n\n<p>Another good solution is the top-voted and checked-as-answered answer <a href=\"https://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine\">HERE</a>. </p>\n"}], "owner": {"reputation": 105, "user_id": 2982253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8057bb7a382b6481deb47e9c0f2de1?s=128&d=identicon&r=PG&f=1", "display_name": "Omsitelta", "link": "https://stackoverflow.com/users/2982253/omsitelta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 30352003, "answer_count": 2, "score": 0, "last_activity_date": 1432221604, "creation_date": 1432123513, "question_id": 30349162, "link": "https://stackoverflow.com/questions/30349162/pointer-type-of-smaller-size-than-variable", "title": "Pointer type of smaller size than variable", "body": "<p>Working with embedded systems, in order to have more resolution in a incremental sequence, I have two variables, one always following the other.</p>\n\n<p>Specifically, I set a goal value using a 8 bits variable, but to go from one point (current value) to another I do it using 32 bits steps.</p>\n\n<p>For example (that is a stupid example, but it just to show how I want to use it, in my code there are some temporizations which require the 32 bits varaibles to allow a slow change):</p>\n\n<pre><code>/* The variables */\nchar goal8bits;         // 8 bits\nlong int current32bits; // 32 bits    \nchar current8bits;      // 8 bits    \nlong int step32bits;    // 32 bits\n\n/* The main function (in the real code that is done periodically with a specific period) */\ncurrent32bits = CONVERT_8BITS_TO_32BITS(current8bits);  // E.g: 0xAB -&gt; 0xABABABAB\nif (goal8bits &lt; current8bits) {\n   current32bits += step32bits;\n}\ncurrent8bits = CONVERT_32BITS_TO_8BITS(current32bits);  // E.g: 0x01234567 -&gt; 0x01\n\n/* Other parts of the code */\nI use current8bits to know the current value in the middle of a transition.\n</code></pre>\n\n<p>My question is if I can use a char pointer and make it point to the 32 bits variable one, so I do not need to update it each time I change it.\nThe previous example will look like this:</p>\n\n<pre><code>/* The variables */\nchar goal8bits;         // 8 bits\nlong int current32bits; // 32 bits\nchar *current8bits = (char *)&amp;current32bits;      // Pointer to 8 bits\nlong int step32bits;    // 32 bits\n\n/* The main function (in the real code that is done periodically with a specific period) */\nif (goal8bits &lt; *current8bits) {\n   current32bits += step32bits;\n}\n\n/* Other parts of the code */\nI will use *current8bits to know the current value in the middle of a transition.\n</code></pre>\n\n<p>Do you see any problem in doing that? Can it lead to a problem wih endianism?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1432123882, "post_id": 30349146, "comment_id": 48790949, "body": "update the question with the expected output."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1432124091, "post_id": 30349146, "comment_id": 48791091, "body": "<i>sigh</i>. real output. I&#39;m asking this because your textual description is vague."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1432124593, "creation_date": 1432124593, "answer_id": 30349550, "question_id": 30349146, "link": "https://stackoverflow.com/questions/30349146/expand-defines-with-gcc/30349550#30349550", "title": "Expand defines with GCC", "body": "<p>The defines \"in the header\" are not \"expanded\", what do you expect to happen?</p>\n\n<p>Instead, places where they are <em>used</em> are going to be preprocessed to have the definitions inserted.</p>\n\n<p>You typically preprocess a C file, not a header, i.e. something where a <code>#define</code> is used without being defined.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4749818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7a31cf907fa03862660c7e5e08e0671?s=128&d=identicon&r=PG&f=1", "display_name": "bremby", "link": "https://stackoverflow.com/users/4749818/bremby"}, "is_accepted": true, "score": 1, "last_activity_date": 1432124680, "creation_date": 1432124680, "answer_id": 30349587, "question_id": 30349146, "link": "https://stackoverflow.com/questions/30349146/expand-defines-with-gcc/30349587#30349587", "title": "Expand defines with GCC", "body": "<p>GCC (the preprocessor actually) ignores your defines because they are unused. Try appending <code>int x = SIO_ASSOCIATE_HANDLE;</code> and rerun the gcc.</p>\n"}], "owner": {"reputation": 147, "user_id": 4855729, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/105be4bb0681f13a62f889589db2dd2c?s=128&d=identicon&r=PG&f=1", "display_name": "user4855729", "link": "https://stackoverflow.com/users/4855729/user4855729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 30349587, "answer_count": 2, "score": -1, "last_activity_date": 1432124684, "creation_date": 1432123492, "last_edit_date": 1432124684, "question_id": 30349146, "link": "https://stackoverflow.com/questions/30349146/expand-defines-with-gcc", "title": "Expand defines with GCC", "body": "<p>How can I expand or collapse the defines in the header file for example</p>\n\n<pre><code>#define IOC_IN 0x80000000\n#define IOC_WS2 0x08000000\n#define _WSAIOW(x,y)(IOC_IN|(x)|(y))\n#define SIO_ASSOCIATE_HANDLE _WSAIOW(IOC_WS2,1)\n</code></pre>\n\n<p>I tried doing <code>gcc -E file.h &gt; output.h</code> however this outputs an empty file. I am using MingW compiler.</p>\n\n<p>I expect the defines to be subsituted like this:</p>\n\n<pre><code>#define IOC_IN 0x80000000\n#define IOC_WS2 0x08000000\n#define _WSAIOW(x,y)(IOC_IN|(x)|(y))\n#define SIO_ASSOCIATE_HANDLE (IOC_IN|(IOC_WS2)|(1))\n</code></pre>\n"}, {"tags": ["c#", "c", "dynamic", "reflection"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1432123338, "post_id": 30349011, "comment_id": 48790545, "body": "The closest you are going to get is to have a predefined table that matches a string to a function to call. Otherwise standard C doesn&#39;t have any kind of reflection or introspection capabilities at all."}, {"owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "edited": false, "score": 0, "creation_date": 1432123387, "post_id": 30349011, "comment_id": 48790585, "body": "int (*fp1)(double) = func1; I think you want something like this - storing the pointer to a function in variable then call it (or in your case creating the structure with fields corresponding to functions)."}, {"owner": {"reputation": 5459, "user_id": 1734730, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/L8dDj.jpg?s=128&g=1", "display_name": "Nathan Cooper", "link": "https://stackoverflow.com/users/1734730/nathan-cooper"}, "edited": false, "score": 0, "creation_date": 1432125712, "post_id": 30349011, "comment_id": 48792381, "body": "It&#39;s the metadata .NET produces that allows reflection. If there is a C solutions to your problem, it will be by a very different mechanism."}], "answers": [{"tags": [], "owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "is_accepted": false, "score": 2, "last_activity_date": 1432123497, "creation_date": 1432123497, "answer_id": 30349150, "question_id": 30349011, "link": "https://stackoverflow.com/questions/30349011/reflection-like-features-with-c/30349150#30349150", "title": "Reflection like features with C", "body": "<p>Unfortunately, the compiled program doesn't know the functions' names after the compiler/linker have done their job. Interpreted languages like C# retain most of the source code while the program is running, therefore the interpreter can search the code base for certain functions (I don't claim to know how reflection actually works though).</p>\n\n<p>Your only solutions there is to either have a map that binds a string/enum to a function pointer, or do a similar process with a scripting language in your code base (like Lua)</p>\n"}, {"tags": [], "owner": {"reputation": 2715, "user_id": 2854001, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/vUFjy.jpg?s=128&g=1", "display_name": "Thomas Koelle", "link": "https://stackoverflow.com/users/2854001/thomas-koelle"}, "is_accepted": false, "score": -1, "last_activity_date": 1432124253, "creation_date": 1432124253, "answer_id": 30349430, "question_id": 30349011, "link": "https://stackoverflow.com/questions/30349011/reflection-like-features-with-c/30349430#30349430", "title": "Reflection like features with C", "body": "<p>Since you are new to c++ then learning the precompiler directives may take you some of the way. E.g. this code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n//#define TEST \"true\"\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    std::cout &lt;&lt; \"a\";\n    #ifdef TEST\n    std::cout &lt;&lt; \"b\";\n    #endif\n    std::cout &lt;&lt; \"c\";\n\n    return 0;\n}\n</code></pre>\n\n<p>Remove the // in the row with #define to print \"b\"</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4920210, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9aCAFoIKKnU/AAAAAAAAAAI/AAAAAAAADGE/vdMylOyj0Do/photo.jpg?sz=128", "display_name": "Ivaylo Mateev", "link": "https://stackoverflow.com/users/4920210/ivaylo-mateev"}, "edited": false, "score": 0, "creation_date": 1432125738, "post_id": 30349609, "comment_id": 48792403, "body": "I was looking for more dynamic solution, but the question was already answered and it is not possible."}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 1, "last_activity_date": 1432124725, "creation_date": 1432124725, "answer_id": 30349609, "question_id": 30349011, "link": "https://stackoverflow.com/questions/30349011/reflection-like-features-with-c/30349609#30349609", "title": "Reflection like features with C", "body": "<ul>\n<li>structure with members \"name\" (string) and \"fn\" (function pointer);</li>\n<li>array of such structures;</li>\n<li>loop which scan for correct name and call corresponding function by the pointer;</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 4920210, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9aCAFoIKKnU/AAAAAAAAAAI/AAAAAAAADGE/vdMylOyj0Do/photo.jpg?sz=128", "display_name": "Ivaylo Mateev", "link": "https://stackoverflow.com/users/4920210/ivaylo-mateev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1432124725, "creation_date": 1432123122, "last_edit_date": 1432123639, "question_id": 30349011, "link": "https://stackoverflow.com/questions/30349011/reflection-like-features-with-c", "title": "Reflection like features with C", "body": "<p>I am wondering how I can call functions in C dynamically without typing the function call in the code.<br>\nI have different Messages, for example: <code>START</code>, <code>STOP</code>, <code>TEST</code>.<br>\nI have functions in a library: <code>process_msg_START</code>, <code>process_msg_STOP</code>, <code>process_msg_TEST</code>.<br>\nI want to call the correct function without typing the Name explicitly, something like using Reflections or the dynamic runtime in C#.<br>\nDo you have any Ideas? I am very new to C and my search wasn\u2019t successful.</p>\n"}, {"tags": ["c", "compression", "lzw"], "comments": [{"owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "edited": false, "score": 1, "creation_date": 1432123322, "post_id": 30348835, "comment_id": 48790536, "body": "Is it stable problem? I.e. do you have the same result &quot;no end of stream character&quot; on the same inputs? If yes, show us example of problem input."}, {"owner": {"reputation": 2835, "user_id": 2160877, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Xp0Zv.jpg?s=128&g=1", "display_name": "dragi", "link": "https://stackoverflow.com/users/2160877/dragi"}, "edited": false, "score": 0, "creation_date": 1432135553, "post_id": 30348835, "comment_id": 48800326, "body": "Does <code>bit_write</code> return -1 in the cases when it doesn&#39;t put EOS?"}, {"owner": {"reputation": 161, "user_id": 3193636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4db26b6ddbd297f1916945a9a1ddee8c?s=128&d=identicon&r=PG&f=1", "display_name": "damaar", "link": "https://stackoverflow.com/users/3193636/damaar"}, "edited": false, "score": 0, "creation_date": 1432367990, "post_id": 30348835, "comment_id": 48907652, "body": "I added an example of execution to show you the compressed file. <code>bit_write</code> return -1 in case of errors during file processing (open, close, flush, etc.), but not in the case you mentioned."}, {"owner": {"reputation": 161, "user_id": 3193636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4db26b6ddbd297f1916945a9a1ddee8c?s=128&d=identicon&r=PG&f=1", "display_name": "damaar", "link": "https://stackoverflow.com/users/3193636/damaar"}, "edited": false, "score": 0, "creation_date": 1432392652, "post_id": 30348835, "comment_id": 48914215, "body": "I finally find the solution to this problem. It was that I have to check that there is enough space in the buffer for an entire coded symbol, otherwise it will split the symbol and it can&#39;t be recovered anymore. So a little change to make it works: <code>if (space == 0 &amp;&amp; space &lt; len)</code>"}], "owner": {"reputation": 161, "user_id": 3193636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4db26b6ddbd297f1916945a9a1ddee8c?s=128&d=identicon&r=PG&f=1", "display_name": "damaar", "link": "https://stackoverflow.com/users/3193636/damaar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432392815, "creation_date": 1432122599, "last_edit_date": 1432392815, "question_id": 30348835, "link": "https://stackoverflow.com/questions/30348835/trouble-with-compression-in-lzw", "title": "Trouble with compression in LZW", "body": "<p>I'm having trouble while implementing the compressor of the LZW. The compressor seems to work fine but while processing some streams it doesn't put the end of stream character (defined with the value 256), the result is that the decompressor will loop infinitely. \nThe code of the compressor is the following: </p>\n\n<pre><code>int compress1(FILE* input, BIT_FILE* output) {\nCODE next_code;         // next node\nCODE current_code;      // current node\nCODE index;             // node of the found character\nint character;\nint ret;\n\nnext_code = FIRST_CODE;\n\ndictionary_init();\n\nif ((current_code = getc(input)) == EOF)\n    current_code = EOS;\n\nwhile ((character = getc(input)) != EOF) {\n    index  = dictionary_lookup(current_code, (SYMBOL)character);\n    if (dictionary[index].code != UNUSED) {\n        current_code = dictionary[index].code;\n    }\n    else {\n        if (next_code &lt;= MAX_CODE-1) {\n            dictionary[index].code = next_code++;\n            dictionary[index].parent = current_code;\n            dictionary[index].symbol = (SYMBOL)character;\n        }\n        else {\n            // handling full dictionary\n            dictionary_init();\n            next_code = FIRST_CODE;\n        }\n        ret = bit_write(output, (uint64_t) current_code, BITS);\n        if( ret != 0)\n            return -1;\n\n        current_code = (CODE)character;\n    }\n}\nret = bit_write(output, (uint64_t) current_code, BITS);\nif (ret != 0)\n    return -1;\n\nret = bit_write(output, (uint64_t) EOS, BITS);\nif (ret != 0)\n    return -1;\n\nif (bit_close(output) == -1) {\n    printf(\"Ops: error during closing\\n\");\n    return -1;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p><code>CODE</code> and <code>SYMBOL</code> are <code>typedef</code> of, respectively, <code>uint32_t</code> and <code>uint16_t</code>, <code>FIRST_CODE</code> is defined as 257. The funtion <code>dictionary_init()</code> simply initializes the dictionary, <code>dictionary_lookup()</code> returns the index of a child having symbol \"<code>character</code>\" of the parent node \"<code>current_node</code>\" (if it exists).</p>\n\n<p>The writing of the binary file is defined as:</p>\n\n<pre><code>int bit_write(BIT_FILE* bf, uint64_t data, int len)\n{\nint space, result, offset, wbits, udata;\nuint64_t* p;\nuint64_t tmp;\n\nudata = (int)data;\n\nif (bf == NULL || len &lt; 1 || len &gt; (8* sizeof(data)))\n    return -1;\n\nif (bf-&gt;reading == true)\n    return -1;\n\nwhile (len &gt; 0) {\n    space = bf-&gt;end - bf-&gt;next;\n    if (space &lt; 0) {\n        return -1;\n    }\n    // if buffer is full, flush data to file and reinit BIT_IO struct\n    if (space == 0) {\n        result = bit_flush(bf);\n        if (result &lt; 0)\n            return -1;\n    }\n\n    p = bf-&gt;buf + (bf-&gt;next/64);\n    offset = bf-&gt;next % 64;\n    wbits = 64 - offset;\n\n    if (len &lt; wbits)\n        wbits = len;\n\n    tmp = le64toh(*p);\n    tmp |= (data &lt;&lt; offset);\n    *p = htole64(tmp);\n\n    bf-&gt;next += wbits;\n    len -= wbits;\n    data &gt;&gt;= wbits;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>I already opened the file using another function, so the <code>bit_write</code> take as input the pointer to the <code>bf</code> structure.\nCan someone help me finding the error?</p>\n\n<p>An example of when this problem arises is the following:</p>\n\n<p>If the input string is \"<i>Nel mezzo del cammi</i>\" everything works fine and I have the following compressed file (in Hexadecimal, using 12 Bits for encoding symbols):</p>\n\n<p><i>4E 50 06 6C 00 02 6D 50 06 7A A0 07 6F 00 02 64<br>\n20 10 20 30 06 61 D0 06 6D 90 06 0D A0 00 00 01</i>  </p>\n\n<p>If I add another character to the string, in particular \"<i>Nel mezzo del cammin</i>\", I have the following result:</p>\n\n<p><i>4E 50 06 6C 00 02 6D 50 06 7A A0 07 6F 00 02 64<br>\n20 10 20 30 06 61 D0 06 6D 90 06 6E D0 00 0A 00<br>\n10</i></p>\n\n<p>In the second case it doesn't write the End of Stream correctly.</p>\n\n<p><strong>SOLUTION</strong>: check that there is enough space in the buffer for the whole coded symbol I am going to write. Just change:</p>\n\n<pre><code>if (space == 0)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>if(space == 0 &amp;&amp; space &lt; len)\n</code></pre>\n"}, {"tags": ["c", "pointers", "printf"], "comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 8, "creation_date": 1432122047, "post_id": 30348598, "comment_id": 48789649, "body": "Choose a language. You say C++, but you&#39;re using C idioms, and the question is tagged with both."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 1, "creation_date": 1432122053, "post_id": 30348598, "comment_id": 48789652, "body": "<a href=\"http://www.cplusplus.com/reference/cctype/isdigit/\" rel=\"nofollow noreferrer\"><code>isdigit</code></a>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1432122118, "post_id": 30348598, "comment_id": 48789705, "body": "Use <code>strcmp</code> for comparing two strings,  not <code>!=</code>. You can use <code>if( isdigit(argv[count]) )</code> to check if the argument is a digit."}, {"owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1432122213, "post_id": 30348598, "comment_id": 48789776, "body": "oh my bad. I&#39;m programming in visual studio 2013 so I tagged it as c++. But I want it to compile in c also."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 2, "creation_date": 1432122303, "post_id": 30348598, "comment_id": 48789829, "body": "UPDATE &quot;I want it to compile in c also&quot; - then remove the C++ tag. // For C++, boost&#39;s <code>lexical_cast&lt;int&gt;(argv[count + 1])</code> is a good option - it will throw if an <code>int</code> can&#39;t be parsed from the text, or if there&#39;s garbage text afterwards...."}, {"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432122313, "post_id": 30348598, "comment_id": 48789840, "body": "Why reinvent the wheel by parsing your own arguments? What is wrong with <a href=\"http://en.wikipedia.org/wiki/Getopt\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Getopt</a> ?"}, {"owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1432122343, "post_id": 30348598, "comment_id": 48789864, "body": "isdigit works on per character basis right so It can&#39;t check values more than 9"}, {"owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1432122916, "post_id": 30348598, "comment_id": 48790274, "body": "edit: I just now realized that the != comparison was in the if statement. I placed that condition since atoi returns 0 if the first character was not a digit"}, {"owner": {"reputation": 1234, "user_id": 4780422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9596b4921462c9b3cde54012e8c15826?s=128&d=identicon&r=PG&f=1", "display_name": "t3ft3l--i", "link": "https://stackoverflow.com/users/4780422/t3ft3l-i"}, "edited": false, "score": 0, "creation_date": 1432123322, "post_id": 30348598, "comment_id": 48790535, "body": "Im not realy sure you want to include boost, but it has easy <a href=\"http://www.boost.org/doc/libs/1_58_0/doc/html/program_options.html\" rel=\"nofollow noreferrer\">boost::program_options</a> lib."}], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1432122644, "post_id": 30348632, "comment_id": 48790075, "body": "On a side note: <code>endptr</code> will be set to point to the first character after the number, so if the number is a valid integer, it should point to a null-terminator which ends the string. In other words, to check whether the conversion was successful, do <code>if (*endptr == 0)</code>"}, {"owner": {"reputation": 1334, "user_id": 2156785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1", "display_name": "ANjaNA", "link": "https://stackoverflow.com/users/2156785/anjana"}, "edited": false, "score": 0, "creation_date": 1432123469, "post_id": 30348632, "comment_id": 48790645, "body": "you can use functions return value to decide."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 1334, "user_id": 2156785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1", "display_name": "ANjaNA", "link": "https://stackoverflow.com/users/2156785/anjana"}, "edited": false, "score": 2, "creation_date": 1432128469, "post_id": 30348632, "comment_id": 48794578, "body": "@ANjaNA - No, you can&#39;t use the return value to determine if the conversion failed because the return value when the conversion fails is also a possible result from a successful conversion.  You <b>must</b> use the value of <code>endptr</code>."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1432213393, "post_id": 30348632, "comment_id": 48838919, "body": "@AndrewHenle This is why <code>atoi</code> is so retarded. Seriously, I&#39;d like to meet whoever introduced <code>atoi</code>, <code>atof</code>, and <code>gets</code> into the standard and ask them what they were thinking at the time."}], "tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": true, "score": 13, "last_activity_date": 1432124365, "last_edit_date": 1432124365, "creation_date": 1432122063, "answer_id": 30348632, "question_id": 30348598, "link": "https://stackoverflow.com/questions/30348598/how-to-check-if-argvcount-is-an-integer/30348632#30348632", "title": "How to check if argv[count] is an integer", "body": "<p><code>atoi()</code> cannot do what you want. You need to use <a href=\"http://linux.die.net/man/3/strtol\"><code>strtol()</code></a> to achieve this. It has much improved error checking capacity.</p>\n\n<p><strong>Signature:</strong></p>\n\n<pre><code>long int strtol(const char *nptr, char **endptr, int base);\n</code></pre>\n\n<p>This function returns the converted integral number as a long int value, else zero value is returned. \nAfter the conversion, you can check the contents of <code>endptr</code>  and decide upon that.</p>\n"}, {"comments": [{"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1432129581, "post_id": 30348764, "comment_id": 48795510, "body": "This doesn&#39;t deserve downvotes as it was posted while the question was also tagged C++...."}], "tags": [], "owner": {"reputation": 3682, "user_id": 1400817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/666a05ea91a0a7e833c3e221a421a47a?s=128&d=identicon&r=PG", "display_name": "Werner Erasmus", "link": "https://stackoverflow.com/users/1400817/werner-erasmus"}, "is_accepted": false, "score": 1, "last_activity_date": 1432122396, "creation_date": 1432122396, "answer_id": 30348764, "question_id": 30348598, "link": "https://stackoverflow.com/questions/30348598/how-to-check-if-argvcount-is-an-integer/30348764#30348764", "title": "How to check if argv[count] is an integer", "body": "<p>You could also use the c++11 alternatives, that are implemented in terms of strtol (see <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow\">stol</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1432148913, "post_id": 30348801, "comment_id": 48808488, "body": "I tried this and it&#39;s the same as above problem. Works with those following inputs but fails on catching the error for &quot;-p 17ss&quot; input"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1432149474, "post_id": 30348801, "comment_id": 48808767, "body": "@MDuh: how does it &quot;fail&quot;? - you can see <a href=\"http://ideone.com/fiMTbo\" rel=\"nofollow noreferrer\">here</a> how <code>sscanf</code> with that text returns <code>0</code>... as per the <code>== 1</code> test above, that does mean it caught the error.  It&#39;s when it returns exactly 1 that the input is valid and <code>n</code> will be set to the numeric value thereof."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1432149682, "post_id": 30348801, "comment_id": 48808893, "body": "To be more explicit, for your particular use case you want <code>if (sscanf(argv[count + 1], &quot;%d%*c&quot;, &amp;pid) != 1) { err = 1; cout &lt;&lt; &quot;pid argument is not a valid input&quot; &lt;&lt; endl; pid = -1; }</code> etc..."}, {"owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 1, "creation_date": 1432149810, "post_id": 30348801, "comment_id": 48808972, "body": "ohh, yep. Missed that part, forgot to replace my if condition &gt;.&gt;. Yep actually works also now."}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 3, "last_activity_date": 1432131409, "last_edit_date": 1432131409, "creation_date": 1432122487, "answer_id": 30348801, "question_id": 30348598, "link": "https://stackoverflow.com/questions/30348598/how-to-check-if-argvcount-is-an-integer/30348801#30348801", "title": "How to check if argv[count] is an integer", "body": "<p>The following is a convenient one-liner...</p>\n\n<pre><code>sscanf(argv[count + 1], \"%d%*c\", &amp;n) == 1\n</code></pre>\n\n<p>...that will evaluate true if it was possible to read into the <code>int n</code> and there was no trailing character afterwards.  The '*' in <code>%*c</code> suppresses assignment, so there's no need to pass a pointer to a dummy <code>char</code> variable.  See <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow\">scanf docs here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "is_accepted": false, "score": 1, "last_activity_date": 1432125611, "creation_date": 1432125611, "answer_id": 30349939, "question_id": 30348598, "link": "https://stackoverflow.com/questions/30348598/how-to-check-if-argvcount-is-an-integer/30349939#30349939", "title": "How to check if argv[count] is an integer", "body": "<p>In C, you can simply go through the char* and check if there are digits only.</p>\n\n<pre><code>char c = '0';\nint i = 0;\nint err = 0\nwhile ( c != '\\0'){\n    if (arg[i] &lt; 47 || arg[i] &gt; 57){\n        err = 1;\n        break;\n    }\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8671, "favorite_count": 0, "accepted_answer_id": 30348632, "answer_count": 4, "score": 5, "last_activity_date": 1432131409, "creation_date": 1432121984, "last_edit_date": 1432122389, "question_id": 30348598, "link": "https://stackoverflow.com/questions/30348598/how-to-check-if-argvcount-is-an-integer", "title": "How to check if argv[count] is an integer", "body": "<p>I'm trying to create a command line application in C++ and I want to make sure that the input is an integer after a certain command argument. </p>\n\n<p>For this example, I want to check if the next argument is an integer after the \"-p\" command argument. Here's the snippet of my code right now.</p>\n\n<pre><code>while (count &lt; argc){\n    if (strcmp(\"-p\", argv[count]) == 0){\n        has_p = true; //Boolean\n        pid = atoi(argv[count + 1]);\n        if (pid == 0 &amp;&amp; argv[count + 1] != \"0\" ){\n            err = 1;\n            cout &lt;&lt; \"pid argument is not a valid input\" &lt;&lt; endl;\n            pid = -1;\n        }\n        count++;\n    }\n...\n}\n</code></pre>\n\n<p>Now this code correctly catches the error in this inputs:</p>\n\n<ul>\n<li>-p 1777</li>\n<li>-p sss</li>\n<li>-p sss17</li>\n<li>-p [space] -U</li>\n</ul>\n\n<p>but fails at this input format</p>\n\n<ul>\n<li>-p 17sss</li>\n</ul>\n\n<p>I tried to remedy this by trying to compare it using sprintf. Unfortunately supplying sprintf with the char array pointer only outputs 1 character in buffer2. </p>\n\n<pre><code>while (count &lt; argc){\n    if (strcmp(\"-p\", argv[count]) == 0){\n        has_p = true; //Boolean\n        pid = atoi(argv[count + 1]);\n        sprintf(buffer, \"%d\", pid);\n        sprintf(buffer2, \"%d\", *argv[count + 1]);\n        if (pid == 0 &amp;&amp; argv[count + 1] != \"0\" || (buffer != buffer2) ){\n            err = 1;\n            cout &lt;&lt; \"pid argument is not a valid input\" &lt;&lt; endl;\n            pid = -1;\n        }\n        count++;\n    }\n...\n}\n</code></pre>\n\n<p>Is there a way to make sprintf read the whole char array? If not, is there a better solution for this apart from looping through the pointer until I hit \"\\0\"</p>\n"}, {"tags": ["android", "c", "service"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1432121980, "post_id": 30348542, "comment_id": 48789605, "body": "&quot;Is it possible to use this library in background service for the app&quot; -- yes. Whether it will work or not would depend upon the library. &quot;Can NDK be used for this?&quot; -- yes, the NDK is used for adding C/C++ code to an Android app."}, {"owner": {"reputation": 23, "user_id": 4920149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73823e773462547f35e8093aa854bed6?s=128&d=identicon&r=PG&f=1", "display_name": "Rudra Mishra", "link": "https://stackoverflow.com/users/4920149/rudra-mishra"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1432122158, "post_id": 30348542, "comment_id": 48789740, "body": "got it. Thanks a lot"}], "answers": [{"tags": [], "owner": {"reputation": 6834, "user_id": 2221895, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SIhun.png?s=128&g=1", "display_name": "Don Chakkappan", "link": "https://stackoverflow.com/users/2221895/don-chakkappan"}, "is_accepted": false, "score": 0, "last_activity_date": 1432122072, "creation_date": 1432122072, "answer_id": 30348638, "question_id": 30348542, "link": "https://stackoverflow.com/questions/30348542/is-it-possible-to-use-a-c-library-in-background-service-for-an-android-app/30348638#30348638", "title": "Is it possible to use a C library in background service for an android app?", "body": "<p>If you are a fresher in <code>JNI with Android</code>  , try to learn some basics like <code>HelloWorld</code> programs . </p>\n\n<p>You will get JNI <a href=\"https://github.com/donchakkappan/JNI-with-Android\" rel=\"nofollow\">example 1</a> , <a href=\"https://github.com/donchakkappan/Date-Time-Using-JNI---Android\" rel=\"nofollow\">example 2</a> .</p>\n\n<p>You need to setup <a href=\"https://developer.android.com/tools/sdk/ndk/index.html\" rel=\"nofollow\">Android NDK</a> to compile all of your <code>native codes</code></p>\n"}], "owner": {"reputation": 23, "user_id": 4920149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73823e773462547f35e8093aa854bed6?s=128&d=identicon&r=PG&f=1", "display_name": "Rudra Mishra", "link": "https://stackoverflow.com/users/4920149/rudra-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1432122072, "creation_date": 1432121826, "last_edit_date": 1432122030, "question_id": 30348542, "link": "https://stackoverflow.com/questions/30348542/is-it-possible-to-use-a-c-library-in-background-service-for-an-android-app", "title": "Is it possible to use a C library in background service for an android app?", "body": "<p>I have a library written in C which I want to use in an android application. Is it possible to use this library in background service for the app? Can NDK be used for this? Or is there any other method available?</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121479, "post_id": 30348386, "comment_id": 48789221, "body": "<code>turbo c++</code> I wonder why&#39;d someone use a 25-odd year old beast at present time?"}, {"owner": {"reputation": 99, "user_id": 2320990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/LHIP2.jpg?s=128&g=1", "display_name": "Mohit Singla", "link": "https://stackoverflow.com/users/2320990/mohit-singla"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121546, "post_id": 30348386, "comment_id": 48789270, "body": "then.. what should i use?"}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121711, "post_id": 30348386, "comment_id": 48789388, "body": "<code>gcc</code>, it is a <code>C</code> compiler and conforms to the latest standards."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1432121755, "post_id": 30348386, "comment_id": 48789425, "body": "Why in the blazes do you <code>fflush(stdin)</code>?"}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1432121826, "post_id": 30348386, "comment_id": 48789482, "body": "@EOF <i>(just to complete your sentence)</i> ....which is undefined behavior. :-)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121883, "post_id": 30348386, "comment_id": 48789534, "body": "@NatashaDutta: I am aware. But worse, it just makes <b>no sense</b>."}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432121971, "post_id": 30348386, "comment_id": 48789596, "body": "@EOF I was just trying to be explicit. No offense, please."}], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 3227721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtyqY.jpg?s=128&g=1", "display_name": "Atafar", "link": "https://stackoverflow.com/users/3227721/atafar"}, "is_accepted": false, "score": 1, "last_activity_date": 1432230898, "creation_date": 1432230898, "answer_id": 30381033, "question_id": 30348386, "link": "https://stackoverflow.com/questions/30348386/undefined-symbol-system-in-module-in-c/30381033#30381033", "title": "Undefined symbol _system in module in c", "body": "<p>The <code>Undefined symbol _system</code> linker error means that the linker cannot find any (static) library code to link against your <code>system(\"cls\")</code> calls. In the case of Turbo C++ this probably means you have to specify an additional library in your project configuration.</p>\n\n<p>If you would use a contemporary C compiler such as GCC or Clang (which are freely available for many systems), you will not have this problem.</p>\n"}], "owner": {"reputation": 99, "user_id": 2320990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/LHIP2.jpg?s=128&g=1", "display_name": "Mohit Singla", "link": "https://stackoverflow.com/users/2320990/mohit-singla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1342, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432230898, "creation_date": 1432121430, "question_id": 30348386, "link": "https://stackoverflow.com/questions/30348386/undefined-symbol-system-in-module-in-c", "title": "Undefined symbol _system in module in c", "body": "<p>i have this code. I am getting linker error. I don't know what it is this linker error. please help me. I am using turbo c++ compiler for this code.</p>\n\n<pre><code>#include&lt;string.h&gt;\n#include&lt;process.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;dos.h&gt;\nstruct contact\n{\n  long ph;\n char name[20],add[20],email[30];\n\n};\nstruct contact list;\nchar query[20],name[20];\nFILE *fp, *ft;\nint i,n,ch,l,found;\n\nvoid main()\n{\nstart:\nsystem(\"cls\");    /* ************Main menu ***********************  */\nprintf(\"\\n\\t **** Welcome to a0 contact Manager ****\");\nprintf(\"\\n\\n\\n\\t\\t\\tMAIN MENU\\n\\t\\t=====================\\n\\t\\t[1] Add    a new Contact\\n\\t\\t[2] List all Contacts\\n\\t\\t[3] Search for contact\\n  \\t\\t[4] Edit a Contact\\n\\t\\t[5] Delete a Contact\\n\\t\\t[0] Exit\\n\\t\\t=================\\n\\t\\t\");\nprintf(\"Enter the choice:\");\nscanf(\"%d\",&amp;ch);\nswitch(ch)\n{\n    case 0:\n    printf(\"\\n\\n\\t\\tAre you sure u want to exit?\");\n    break;\n    /* *********************add new contacts************  */\n\n    case 1:\n    system(\"cls\");\n    fp=fopen(\"contact.dll\",\"a\");\n    for(;;)\n    {\n        fflush(stdin);\n        printf(\"To exit enter blank space in the name input\\nName (Use identical):\");\n        scanf(\"%[^\\n]\",&amp;list.name);\n        if(stricmp(list.name,\"\")==0 || stricmp(list.name,\" \")==0)\n        break;\n        fflush(stdin);\n        printf(\"Phone:\");\n        scanf(\"%ld\",&amp;list.ph);\n        fflush(stdin);\n        printf(\"address:\");\n        scanf(\"%[^\\n]\",&amp;list.add);\n        fflush(stdin);\n        printf(\"email address:\");\n        gets(list.email);\n        printf(\"\\n\");\n        fwrite(&amp;list,sizeof(list),1,fp);\n    }\n    fclose(fp);\n    break;\n\n    /* *********************list of contacts*************************  */\n\n    case 2:\n    system(\"cls\");\n    printf(\"\\n\\t\\t================================\\n\\t\\t\\tLIST OF CONTACTS\\n\\t\\t================================\\n\\nName\\t\\tPhone No\\t    Address\\t\\tE-mail ad.\\n=================================================================\\n\\n\");\n    for(i=97;i&lt;=122;i=i+1)\n    {\n        fp=fopen(\"contact.dll\",\"r\");\n        fflush(stdin);\n        found=0;\n        while(fread(&amp;list,sizeof(list),1,fp)==1)\n        {\n            if(list.name[0]==i || list.name[0]==i-32)\n            {\n                printf(\"\\nName\\t: %s\\nPhone\\t: %ld\\nAddress\\t: %s\\nEmail\\t: %s\\n\",list.name,list.ph,list.add,list.email);\n                found++;\n            }\n        }\n        if(found!=0)\n        {\n            printf(\"=========================================================== [%c]-(%d)\\n\\n\",i-32,found);\n            getch();\n        }\n        fclose(fp);\n    }\n    break;\n\n    /* *******************search contacts**********************  */\n    case 3:\n    system(\"cls\");\n    do\n    {\n        found=0;\n        printf(\"\\n\\n\\t..::CONTACT SEARCH\\n\\t===========================\\n\\t..::Name ofcontact to search: \");\n        fflush(stdin);\n        scanf(\"%[^\\n]\",&amp;query);\n        l=strlen(query);\n        fp=fopen(\"contact.dll\",\"r\");\n        system(\"cls\");\n        printf(\"\\n\\n..::Search result for '%s' \\n===================================================\\n\",query);\n        while(fread(&amp;list,sizeof(list),1,fp)==1)\n        {\n            for(i=0;i&lt;=l;i++)\n            name[i]=list.name[i];\n            name[l]='\\0';\n            if(stricmp(name,query)==0)\n            {\n                printf(\"\\n..::Name\\t: %s\\n..::Phone\\t: %ld\\n..::Address\\t: %s\\n..::Email\\t:%s\\n\",list.name,list.ph,list.add,list.email);\n                found++;\n                if(found%4==0)\n                {\n                    printf(\"..::Press any key to continue...\");\n                    getch();\n                }\n            }\n        }\n        if(found==0)\n            printf(\"\\n..::No match found!\");\n        else\n            printf(\"\\n..::%d match(s) found!\",found);\n        fclose(fp);\n        printf(\"\\n ..::Try again?\\n\\n\\t[1] Yes\\t\\t[0] No\\n\\t\");\n        scanf(\"%d\",&amp;ch);\n    }\n    while(ch==1);\n    break;\n\n\n    /* *********************edit contacts************************/\n    case 4:\n    system(\"cls\");\n    fp=fopen(\"contact.dll\",\"r\");\n    ft=fopen(\"temp.dat\",\"w\");\n    fflush(stdin);\n    printf(\"..::Edit contact\\n===============================\\n\\n\\t..::Enter the name of contact to edit:\");\n    scanf(\"%[^\\n]\",name);\n    while(fread(&amp;list,sizeof(list),1,fp)==1)\n    {\n        if(stricmp(name,list.name)!=0)\n        fwrite(&amp;list,sizeof(list),1,ft);\n    }\n    fflush(stdin);\n    printf(\"\\n\\n..::Editing '%s'\\n\\n\",name);\n    printf(\"..::Name(Use identical):\");\n    scanf(\"%[^\\n]\",&amp;list.name);\n    fflush(stdin);\n    printf(\"..::Phone:\");\n    scanf(\"%ld\",&amp;list.ph);\n    fflush(stdin);\n    printf(\"..::address:\");\n    scanf(\"%[^\\n]\",&amp;list.add);\n    fflush(stdin);\n    printf(\"..::email address:\");\n    gets(list.email);\n    printf(\"\\n\");\n    fwrite(&amp;list,sizeof(list),1,ft);\n    fclose(fp);\n    fclose(ft);\n    remove(\"contact.dll\");\n    rename(\"temp.dat\",\"contact.dll\");\n    break;\n\n    /* ********************delete contacts**********************/\n    case 5:\n    system(\"cls\");\n    fflush(stdin);\n    printf(\"\\n\\n\\t..::DELETE A CONTACT\\n\\t==========================\\n\\t..::Enter the name of contact to delete:\");\n    scanf(\"%[^\\n]\",&amp;name);\n    fp=fopen(\"contact.dll\",\"r\");\n    ft=fopen(\"temp.dat\",\"w\");\n    while(fread(&amp;list,sizeof(list),1,fp)!=0)\n    if (stricmp(name,list.name)!=0)\n        fwrite(&amp;list,sizeof(list),1,ft);\n    fclose(fp);\n    fclose(ft);\n    remove(\"contact.dll\");\n    rename(\"temp.dat\",\"contact.dll\");\n    break;\n\n    default:\n    printf(\"Invalid choice\");\n    break;\n}\nprintf(\"\\n\\n\\n..::Enter the Choice:\\n\\n\\t[1] Main Menu\\t\\t[0] Exit\\n\");\nscanf(\"%d\",&amp;ch);\nswitch(ch)\n{\n    case 1:\n    goto start;\n    case 0:\n    break;\n    default:\n    printf(\"Invalid choice\");\n    break;\n}\n}\n</code></pre>\n\n<p>I am facing this error.\nUndefined symbol _system in module in c.</p>\n"}, {"tags": ["c", "pointers", "struct", "tree"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432121531, "post_id": 30348214, "comment_id": 48789260, "body": "How could we help you if you don&#39;t show the relevant parts of your source ?"}], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "edited": false, "score": 0, "creation_date": 1432122754, "post_id": 30348573, "comment_id": 48790164, "body": "so would i be setting it as tree_t *tree = **tree;?"}, {"owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "reply_to_user": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "edited": false, "score": 1, "creation_date": 1432123243, "post_id": 30348573, "comment_id": 48790482, "body": "if you paste the code of your &quot;command&quot; function I can help you with this"}, {"owner": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "edited": false, "score": 0, "creation_date": 1432123829, "post_id": 30348573, "comment_id": 48790913, "body": "Edited. Command function is added. Sorry my original code is really long and actually has a lot of different functions so I tried to simplify it down as much as I could so you guys wont have to read like 200 lines. I just need tree to be modified and keep the modifications at the same time so dont worry about the struct_t *c"}, {"owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "reply_to_user": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "edited": false, "score": 0, "creation_date": 1432124280, "post_id": 30348573, "comment_id": 48791228, "body": "ok, call &quot;command&quot; like this: command(input_data, &amp;tree)  but &quot;tree&quot; is still initialized with &quot;NULL&quot;...peraph you did it point to some allocated memory in your &quot;process_stock&quot; or &quot;process_print_stock&quot;??...what the role of &quot;process_stock&quot; and &quot;process_print_stock&quot; also is &quot;struct_t&quot; well defined (typed struct ??)"}, {"owner": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "edited": false, "score": 0, "creation_date": 1432124811, "post_id": 30348573, "comment_id": 48791627, "body": "Yes tree gets allocated memory in process_stock and print_stock just prints out data that was saved from process_stock . Yea struct_t is properly defined. How would I dereference tree in command"}, {"owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "reply_to_user": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "edited": false, "score": 0, "creation_date": 1432125235, "post_id": 30348573, "comment_id": 48791982, "body": "to allocate &quot;tree&quot; do the following: *tree = (tree_t *)malloc(sizeof(tree_t));   &quot; *tree &quot; is of type &quot; tree_t * &quot; so to access elements in &quot;tree_t&quot; struct, do: (*tree)-&gt;data, (*tree)-&gt;left, (*tree)-&gt;right"}], "tags": [], "owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "is_accepted": false, "score": 0, "last_activity_date": 1432121912, "creation_date": 1432121912, "answer_id": 30348573, "question_id": 30348214, "link": "https://stackoverflow.com/questions/30348214/c-how-retain-data-in-a-modified-tree/30348573#30348573", "title": "c how retain data in a modified tree", "body": "<pre><code> main(int argc, char *argv[]) \n  {\n   tree_t *tree = NULL;\n   command(input_data, tree);\n   return 0;\n  }\n</code></pre>\n\n<p>from what I see in the main function  </p>\n\n<pre><code>      tree_t *tree = NULL\n</code></pre>\n\n<p>you have initialized \"tree\" with \"NULL\" and in the function</p>\n\n<pre><code>  command(input_data, tree);\n</code></pre>\n\n<p>you pass its value i.e \"NULL\" to the \"command\" function.</p>\n\n<p>replace this with:</p>\n\n<pre><code>       command(input_data, &amp;tree);\n</code></pre>\n\n<p>and in the command function define the value of \"tree\"</p>\n"}], "owner": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432123700, "creation_date": 1432120970, "last_edit_date": 1432123700, "question_id": 30348214, "link": "https://stackoverflow.com/questions/30348214/c-how-retain-data-in-a-modified-tree", "title": "c how retain data in a modified tree", "body": "<p>So I have a tree that is declared in main and function command to modify it. \nRight now my problem is I scanf in some data and condition 1 runs and it stores the data fine. However when I run condition 2, the tree is overwritten with NULL and the data stored from before is erased. How do I keep the data?</p>\n\n<pre><code>typedef struct tree_s tree_t;\ntypedef struct {\n     int i;   \n     char a*\n}data_t;\n\nstruct tree_s {\n    data_t data;\n    tree_t *left;\n    tree_t *right;\n};\nint\nmain(int argc, char *argv[]) {\n    tree_t *tree = NULL;\n    command(input_data, tree);\n    return 0;\n}\n\ncommand(blablah){\n    if(condition1){\n        /*inserts data into tree*/\n    if(condition2){\n        /*uses data that has been inserted to print something*/\n    }\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<pre><code>void\ncommand(struct_t *c, tree_t **tree) {\n\nswitch (*(c-&gt;input)) {     /*c-&gt;input is a character array*/\n    case condition_one:\n        process_stock(c, tree);\n        break;\n\n    case condition_2:\n        process_print_stock(c, tree);\n        break;\n\n    default:\n        printf(\"Unrecognised top-level command!.\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432120725, "post_id": 30348076, "comment_id": 48788679, "body": "What operating system are you using?"}, {"owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432120941, "post_id": 30348076, "comment_id": 48788827, "body": "windows 8.1 @szczurcio :D"}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 1, "creation_date": 1432120958, "post_id": 30348076, "comment_id": 48788839, "body": "It&#39;s too broad a question to answer. I&#39;m not knowledgeable, but there may be 1000 ways to do so...."}, {"owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121046, "post_id": 30348076, "comment_id": 48788898, "body": "@NatashaDutta then please pick a fairly easy way and give me some instruction/ keywords"}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 2, "creation_date": 1432121122, "post_id": 30348076, "comment_id": 48788963, "body": "I would have done that gladly, if you would have tried something of yourself first. Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions."}, {"owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121529, "post_id": 30348076, "comment_id": 48789258, "body": "Thanks @NatashaDutta"}], "answers": [{"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": true, "score": 0, "last_activity_date": 1432121065, "creation_date": 1432121065, "answer_id": 30348252, "question_id": 30348076, "link": "https://stackoverflow.com/questions/30348076/fetching-data-from-websites-and-make-them-into-txts/30348252#30348252", "title": "Fetching data from websites and make them into .txts", "body": "<p>The basic concept is this: you'll need to connect to the HTTP server on port 80, fetch the HTML, parse it and store the information you want in files. To accomplish the former, if you're using Windows, you can use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383630%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>WinInet</code></a> API. Otherwise go with <code>cURL</code>, which is a very popular, efficient, cross-platform solution. </p>\n\n<p>The other tasks require a relatively good command of C, but it's nothing special - you'll need to work with strings to parse your results, then use C's file I/O (<code>fopen</code>/<code>fprintf</code>/<code>fwrite</code>) to save your stuff to disk.</p>\n"}], "owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 30348252, "answer_count": 1, "score": -2, "last_activity_date": 1432121065, "creation_date": 1432120605, "question_id": 30348076, "link": "https://stackoverflow.com/questions/30348076/fetching-data-from-websites-and-make-them-into-txts", "title": "Fetching data from websites and make them into .txts", "body": "<p>I am having an assignment in which I have to fetch data from a site (somewhat like a news site) and make them into text files and then list them using tags.\nCould someone please provide me some information/knowledge/keywords/instructions that can help me finish this?(using C only) Thank you.</p>\n"}, {"tags": ["java", "c++", "c"], "comments": [{"owner": {"reputation": 429, "user_id": 2339785, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5edb558727b3a126d41d2eed45a82bda?s=128&d=identicon&r=PG", "display_name": "kylecorver", "link": "https://stackoverflow.com/users/2339785/kylecorver"}, "edited": false, "score": 1, "creation_date": 1432120117, "post_id": 30347887, "comment_id": 48788291, "body": "it&#39;s the same, just the execution time is another?"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1432120166, "post_id": 30347887, "comment_id": 48788315, "body": "I can&#39;t comment on all languages, but in C and C++ there&#39;s no other expression with the same effect and value as post-increment. I suspect Java&#39;s the same."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 429, "user_id": 2339785, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5edb558727b3a126d41d2eed45a82bda?s=128&d=identicon&r=PG", "display_name": "kylecorver", "link": "https://stackoverflow.com/users/2339785/kylecorver"}, "edited": false, "score": 2, "creation_date": 1432120245, "post_id": 30347887, "comment_id": 48788367, "body": "@kylecorver: No, the two expressions have the same side effect but different values. <code>i++</code> is an <i>rvalue</i> holding a copy of value of <code>i</code> before the increment. <code>++i</code> and <code>i=i+1</code> are both <i>lvalues</i> denoting the variable <code>i</code> after the increment."}, {"owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "edited": false, "score": 0, "creation_date": 1432120351, "post_id": 30347887, "comment_id": 48788442, "body": "for i++ there is a copy that is done previouly to the incrementation and you use this copy in your expression. That&#39;s why ++i is more encourage for iterator as there is no extra copy."}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "edited": false, "score": 0, "creation_date": 1432120414, "post_id": 30347887, "comment_id": 48788478, "body": "@NGI is it so? Interesting, never knew this. You have any reference for this which I can refer? I thought modern compilers would have optimized this anyway..."}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432120469, "post_id": 30347887, "comment_id": 48788515, "body": "This is a good ? I don&#39;t know why people start down voting for no reason."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121123, "post_id": 30347887, "comment_id": 48788967, "body": "@NatashaDutta: &quot;I thought modern compilers would have optimized this anyway..&quot; - they do, in most situations. But with pre-increment, there&#39;s no need to worry about whether they do or not."}, {"owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121494, "post_id": 30347887, "comment_id": 48789233, "body": "@NatashaDutta, for the basic mechanism I would refer to Scott Meyers  More Effective C++ item 6 &quot;Distinguish between prefix and postfix forms of increment and decrement operators &quot;.I think the copy may not be eluded/avoided &quot;by definition&quot;."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1432131884, "post_id": 30347887, "comment_id": 48797404, "body": "@MikeSeymour: In C, <code>++i</code> and <code>i = i + 1</code> are both rvalues.  This is in contrast to C++."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1432132348, "post_id": 30347887, "comment_id": 48797801, "body": "@caf: Good point, and yet another example of why questions should be about a single language."}], "answers": [{"comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 1, "creation_date": 1432120910, "post_id": 30347992, "comment_id": 48788801, "body": "heh???? <code>i = i++;</code> is <b>_UB</b>. don&#39;t use it. Read bout sequence points."}, {"owner": {"reputation": 3046, "user_id": 2380618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec99c8f94340a994622895716881210?s=128&d=identicon&r=PG", "display_name": "Phil Anderson", "link": "https://stackoverflow.com/users/2380618/phil-anderson"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121230, "post_id": 30347992, "comment_id": 48789034, "body": "Why was there a downvote on this answer? If there&#39;s an issue with it I&#39;d like to correct it."}, {"owner": {"reputation": 3046, "user_id": 2380618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec99c8f94340a994622895716881210?s=128&d=identicon&r=PG", "display_name": "Phil Anderson", "link": "https://stackoverflow.com/users/2380618/phil-anderson"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121310, "post_id": 30347992, "comment_id": 48789087, "body": "@Natasha I know i = i++ is not something that is ever correct, I was just presenting it as an interesting side-effect to educate and amuse! Sounds like I should remove it though."}, {"owner": {"reputation": 3046, "user_id": 2380618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec99c8f94340a994622895716881210?s=128&d=identicon&r=PG", "display_name": "Phil Anderson", "link": "https://stackoverflow.com/users/2380618/phil-anderson"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121516, "post_id": 30347992, "comment_id": 48789249, "body": "Sorry Natasha, didn&#39;t mean to imply that you had... I was replying to your comment seperately. No offence meant or taken."}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432121614, "post_id": 30347992, "comment_id": 48789328, "body": "yeah, same here. Hope you got my point why i asked you <b>not</b> to use <code>i = i++</code>, right?"}, {"owner": {"reputation": 3046, "user_id": 2380618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec99c8f94340a994622895716881210?s=128&d=identicon&r=PG", "display_name": "Phil Anderson", "link": "https://stackoverflow.com/users/2380618/phil-anderson"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432125443, "post_id": 30347992, "comment_id": 48792160, "body": "Absolutely! It&#39;s a crazy thing to do! I was only pointing it out as a curiosity that&#39;s all. It does something different to what a beginner would expect, and I have seen it done accidentally by beginnners in the past. Incidentally, what does _UB mean?"}], "tags": [], "owner": {"reputation": 3046, "user_id": 2380618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec99c8f94340a994622895716881210?s=128&d=identicon&r=PG", "display_name": "Phil Anderson", "link": "https://stackoverflow.com/users/2380618/phil-anderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1432121348, "last_edit_date": 1432121348, "creation_date": 1432120329, "answer_id": 30347992, "question_id": 30347887, "link": "https://stackoverflow.com/questions/30347887/how-to-represent-this-basic-expression/30347992#30347992", "title": "How to represent this basic expression?", "body": "<p>In terms of how the value of i gets changed, they're the same thing - So they're both equivalent to i = i + 1;</p>\n\n<p>The difference only becomes apparent when they're used as part of an expression.</p>\n\n<pre><code>j = i++;    // j = i\n\nj = ++i;    // j = i + 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 1, "creation_date": 1432121310, "post_id": 30348308, "comment_id": 48789088, "body": "please add the properties of comma operator in last case, otherwise, it may be a bit confusing to newcomers. :-)"}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1432122026, "post_id": 30348308, "comment_id": 48789634, "body": "For the case of C++ you probably have to add a disclaimer like <i>&quot;, unless some yahoo has overloaded one or more of the relevant operators for the type of <code>i</code>&quot;</i>."}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432122047, "post_id": 30348308, "comment_id": 48789650, "body": "@NatashaDutta @saka1029  <code>(i = i + 1, i - 1)</code> what will be the value of <code>i</code> after this line and why"}, {"owner": {"reputation": 13155, "user_id": 4910279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a24754c60fd95e2f27f4c8275505863?s=128&d=identicon&r=PG", "display_name": "saka1029", "link": "https://stackoverflow.com/users/4910279/saka1029"}, "edited": false, "score": 0, "creation_date": 1432122674, "post_id": 30348308, "comment_id": 48790104, "body": "Expressions sparated by comma operator <code>(e1, e2, ... , en)</code> are evaluated  left to right sequencially.  and the last expression <code>en</code> is returned."}, {"owner": {"reputation": 658, "user_id": 4161244, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/80ba8dd588e2b3d9cd382b33b7759615?s=128&d=identicon&r=PG&f=1", "display_name": "Brahim", "link": "https://stackoverflow.com/users/4161244/brahim"}, "edited": false, "score": 0, "creation_date": 1432124047, "post_id": 30348308, "comment_id": 48791057, "body": "I thinks it&#39;s a bit more complicated when i is an object (like iterators). Which will involve copying the object in the second case."}], "tags": [], "owner": {"reputation": 13155, "user_id": 4910279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a24754c60fd95e2f27f4c8275505863?s=128&d=identicon&r=PG", "display_name": "saka1029", "link": "https://stackoverflow.com/users/4910279/saka1029"}, "is_accepted": true, "score": 5, "last_activity_date": 1432121221, "creation_date": 1432121221, "answer_id": 30348308, "question_id": 30347887, "link": "https://stackoverflow.com/questions/30347887/how-to-represent-this-basic-expression/30348308#30348308", "title": "How to represent this basic expression?", "body": "<p>In C or C++,</p>\n\n<p><code>++i</code> means</p>\n\n<pre><code>(i = i + 1)\n</code></pre>\n\n<p><code>i++</code> means</p>\n\n<pre><code>(i = i + 1, i - 1)\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 4042202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yoQoa.jpg?s=128&g=1", "display_name": "Key_coder", "link": "https://stackoverflow.com/users/4042202/key-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1432122445, "accepted_answer_id": 30348308, "answer_count": 2, "score": -6, "last_activity_date": 1433008463, "creation_date": 1432120051, "last_edit_date": 1433008463, "question_id": 30347887, "link": "https://stackoverflow.com/questions/30347887/how-to-represent-this-basic-expression", "closed_reason": "Not suitable for this site", "title": "How to represent this basic expression?", "body": "<p>I know basically how post increment and pre-increment work. But I'm just wondering in any language if <code>++i</code> expression is represented as <code>i = i+1;</code> then how to represent <code>i++;</code></p>\n"}, {"tags": ["c", "runtime-error", "visual-studio-2015"], "comments": [{"owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "edited": false, "score": 0, "creation_date": 1432119627, "post_id": 30347501, "comment_id": 48787987, "body": "Also, i found that the error occurs when i type more than 64 leters (512 bits)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1432119978, "post_id": 30347501, "comment_id": 48788205, "body": "Why do you <code>block-&gt;block[block-&gt;size] = malloc(sizeof(unsigned char));</code> malloc() a single unsigned char, when you want to <code>for (i = 0; i &lt; 8; i++) {         block-&gt;block[block-&gt;size][i] = &#39;\\x0&#39;;     }</code> access at least eight of them?"}, {"owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432120079, "post_id": 30347501, "comment_id": 48788267, "body": "You know what @EOF, you&#39;re right... that was exactly that i was noticing. Let me check maybe that&#39;s the problem."}, {"owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432120368, "post_id": 30347501, "comment_id": 48788453, "body": "What do you sugest? I tryed the following: &#39; block-&gt;block[block-&gt;size] = malloc(sizeof(unsigned char) * 8);&#39; and did not work. Maybe i&#39;m just too tired haha. Any ideas? @EOF"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432120502, "post_id": 30347501, "comment_id": 48788531, "body": "Sure. Get a debugger. Compile with <code>address sanitizer</code> if you&#39;ve got gcc or clang. Run under <code>valgind</code>."}, {"owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432120617, "post_id": 30347501, "comment_id": 48788610, "body": "I&#39;m using Visual Studio because GCC was giving me Errors in Windows 8. But to be honest i didn&#39;t look in a lot of places. You have any information regarding GCC and Windows 8?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432121392, "post_id": 30347501, "comment_id": 48789149, "body": "You are simply accessing an array out of bounds somewhere. And yes, the <code>malloc(sizeof(unsigned char))</code> statement is complete nonsense. It&#39;s point to allocate one byte of memory. BTW you mention &quot; GCC was giving me Errors in Windows 8&quot;. Do you mean compilation errors or runtime errors ? Which errors ?"}, {"owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432121567, "post_id": 30347501, "comment_id": 48789287, "body": "@MichaelWalz a complete nonsense? You mean like i shouldn&#39;t use it at all? Because for some reason in my mind <code>malloc(sizeof(unsigned char) * 8)</code> sounds like it should do the trick, Unless i&#39;m using it incorrectly."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1432121698, "post_id": 30347501, "comment_id": 48789381, "body": "@HectorHammett try that and get back to us. BTW char size is <code>1</code> so you can write <code>malloc(8)</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432121729, "post_id": 30347501, "comment_id": 48789404, "body": "I didn&#39;t look into it in details, but allocating one byte if pointless. The pointer to your byte takes already 4 bytes (or even 8 bytes on  64 bit system). So instead of having a <i>pointer</i> to your single byte you could just have that sigle byte in your structure. But for sure one of your array indexes is out of bounds somewhere."}, {"owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1432151550, "post_id": 30347501, "comment_id": 48809954, "body": "@MattMcNabb I tryed that and still didn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "is_accepted": false, "score": -1, "last_activity_date": 1432187495, "creation_date": 1432187495, "answer_id": 30365556, "question_id": 30347501, "link": "https://stackoverflow.com/questions/30347501/run-time-check-failure-2-stack-around-the-variable-original-block-was-corrupt/30365556#30365556", "title": "Run-time check failure #2 - stack around the variable original_block was corrupted", "body": "<p>Ok guys, i wasn't able to fix the problem. So i took a different approach and now it's working.</p>\n\n<p>I've changed the structurue to this:</p>\n\n<pre><code>typedef struct {\n    int size;\n    int capacity;\n    unsigned char *block;\n}Blocks64;\n</code></pre>\n\n<p>And i changed the function to initialize the structure, but now i also add how many blocks i'll use, so first i calculate how many 64bit blocks (8 unsigned chars) i'm gonna need:</p>\n\n<pre><code>void init_64bBlock(Blocks64 *block,int total) {\n    block-&gt;size = 0;\n    block-&gt;capacity = total;\n    block-&gt;block = malloc(sizeof(unsigned char) * (8 * total));\n}\n</code></pre>\n\n<p>and use it right here:</p>\n\n<pre><code>total_blocks = ceil(strlen(plain) / 8.0);\ninit_64bBlock(&amp;original_block,total_blocks);\ninit_64bBlock(&amp;expanded_block,total_blocks);\n</code></pre>\n\n<p>Now it's working. Thank you very much for your help!</p>\n"}], "owner": {"reputation": 129, "user_id": 2361305, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A33Xv.jpg?s=128&g=1", "display_name": "Hector Mendoza Jacobo", "link": "https://stackoverflow.com/users/2361305/hector-mendoza-jacobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432187495, "creation_date": 1432119038, "last_edit_date": 1432119969, "question_id": 30347501, "link": "https://stackoverflow.com/questions/30347501/run-time-check-failure-2-stack-around-the-variable-original-block-was-corrupt", "title": "Run-time check failure #2 - stack around the variable original_block was corrupted", "body": "<p>I'm afraid that this question has been asked before, and i sort of get why it's giving me this error, but I honestly cannot find exactly why. I wish you could help me with this guys?</p>\n\n<p>I have to make the DES algorithm for my class, and i've already made the first step, and it works only when the text it's not too long. For some reason when i try to type a really long text it give me this error. Here's my code:</p>\n\n<p>A structure where i store all the 64 bit blocks.</p>\n\n<pre><code>typedef struct {\n    int size;\n    int capacity;\n    unsigned char *block[8];\n}Blocks64;\n</code></pre>\n\n<p>The function that i use to add a 64 bit block (unsigned char[8])</p>\n\n<pre><code>void add_64bBlock(Blocks64 *block, char *value) {\n    int i;\n    block-&gt;block[block-&gt;size] = malloc(sizeof(unsigned char));\n    for (i = 0; i &lt; 8; i++) {\n        block-&gt;block[block-&gt;size][i] = '\\x0';\n    }\n    for (i = 0; i &lt; 8; i++) {\n        block-&gt;block[block-&gt;size][i] = value[i];\n    }\n    block-&gt;size++;\n}\n</code></pre>\n\n<p>and the function for the first expantion:</p>\n\n<pre><code>Blocks64 expansionI(char *plain) {\n    Blocks64 original_block;//Estructura para bloques del texto plano\n    Blocks64 expanded_block;//Estructura para el texto ya expandido de expansionI\n    int total_blocks;//Bloques totales\n    int i;\n    int j;\n    int k;\n    unsigned char byte[8];//bloque de 64 bits auxiliar\n\n    //C\u00e1lculo del total de Bloques\n    total_blocks = ceil(strlen(plain) / 8.0);\n    init_64bBlock(&amp;original_block);\n    init_64bBlock(&amp;expanded_block);\n    printf(\"bloques: %d\\n\", total_blocks);\n\n    //Pasar el texto plano a bloques en la estructura\n    for (i = 0; i&lt;total_blocks; i++) {\n        init_byte(byte);\n        for (j = 0; j&lt;8; j++) {\n            if(plain[(j + (i * 8))] == '\\x0')\n                j = 8;\n            else\n                byte[j] = plain[(j + (i * 8))];\n        }\n        add_64bBlock(&amp;original_block, byte);\n        //add_64bBlock_null(&amp;expanded_block);\n    }\n\n    //Prop\u00f3sitos de Debuggeo\n    for (i = 0; i&lt;total_blocks; i++) {\n        printf(\"Bloque %d\\n\",i+1);\n        for (j = 0; j &lt; 8; j++) {\n            printf(\"%d.- %c - %d - \", j, get_64bBlock(&amp;original_block, i)[j], get_64bBlock(&amp;original_block, i)[j]);\n            printbinchar(get_64bBlock(&amp;original_block, i)[j]);\n            printf(\"\\n\");\n        }\n    }\n\n    for (i = 0; i &lt; total_blocks; i++) {\n        init_byte(byte);\n        for (j = 0; j &lt; 4; j++) {\n            for (k = 7; k &gt;= 0; k--) {\n                if ((get_64bBlock_char(&amp;original_block, i, k) &amp; (1 &lt;&lt; 6 - (j * 2))) &gt; 0) {\n                    byte[j] = byte[j] | (1 &lt;&lt; k);\n                }\n            }\n        }\n        for (j = 0; j &lt; 4; j++) {\n            for (k = 7; k &gt;= 0; k--) {\n                if ((get_64bBlock_char(&amp;original_block, i, k) &amp; (1 &lt;&lt; 7 - (j * 2))) &gt; 0) {\n                    byte[j+4] = byte[j+4] | (1 &lt;&lt; k);\n                }\n            }\n        }\n        add_64bBlock(&amp;expanded_block,byte);\n    }\n    //Debuggeo\n    printf(\"---------------\\n\");\n    for (i = 0; i &lt; total_blocks; i++) {\n        printf(\"El bloque %d\\n\",i);\n        printf(\"L0:\\n\");\n        for (j = 0; j &lt; 4; j++) {\n            printf(\"%d.- %c - %d - \", j, get_64bBlock_char(&amp;expanded_block, i, j), get_64bBlock_char(&amp;expanded_block, i, j));\n            printbinchar(get_64bBlock_char(&amp;expanded_block, i, j));\n            printf(\"\\n\");\n        }\n        printf(\"R0:\\n\");\n        for (j = 4; j &lt; 8; j++) {\n            printf(\"%d.- %c - %d - \", j, get_64bBlock_char(&amp;expanded_block, i, j), get_64bBlock_char(&amp;expanded_block, i, j));\n            printbinchar(get_64bBlock_char(&amp;expanded_block, i, j));\n            printf(\"\\n\");\n        }\n    }\n    return expanded_block;\n}\n</code></pre>\n\n<p>what's really weird is that it gives me the error and it halts, but when i check the window, the first expansion it's complete and correct. I don't really know what's going on. I tried freeing the chars inside the struct, but it's giving me an error. Any help would be REALLY appreciated. Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432118762, "post_id": 30347368, "comment_id": 48787399, "body": "Your code has a very important problem, <code>double x; if (x == 0)</code> will most likely fail if <code>0</code> was not assigned explicitly to <code>x</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4918103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go7Ex.jpg?s=128&g=1", "display_name": "Sci-Walk", "link": "https://stackoverflow.com/users/4918103/sci-walk"}, "edited": false, "score": 0, "creation_date": 1432125228, "post_id": 30347433, "comment_id": 48791976, "body": "Thanks 2 Iharob. But the last thing which is haunted me:  printf(&quot;%f\\n&quot;, *(r+i)); I am absolutely sure that with this line It works correct. I checked it out"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3, "user_id": 4918103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go7Ex.jpg?s=128&g=1", "display_name": "Sci-Walk", "link": "https://stackoverflow.com/users/4918103/sci-walk"}, "edited": false, "score": 0, "creation_date": 1432125340, "post_id": 30347433, "comment_id": 48792071, "body": "Yes it must work if <code>i</code> is not too large to make a read out of bounds, but I strongly recommend <code>printf(&quot;%f\\n&quot;, r[i]);</code> syntax, it&#39;s very clear what it means, whereas <code>printf(&quot;%f\\n&quot;, *(r + i));</code> is harder to read."}, {"owner": {"reputation": 3, "user_id": 4918103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go7Ex.jpg?s=128&g=1", "display_name": "Sci-Walk", "link": "https://stackoverflow.com/users/4918103/sci-walk"}, "edited": false, "score": 0, "creation_date": 1432125975, "post_id": 30347433, "comment_id": 48792596, "body": "Ok, thanks. I understand  about syntax. But I do not understand why printf has such an impact. Is it problem of GCC?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1432120629, "last_edit_date": 1432120629, "creation_date": 1432118855, "answer_id": 30347433, "question_id": 30347368, "link": "https://stackoverflow.com/questions/30347368/count-elements-in-array-inside-function/30347433#30347433", "title": "Count elements in array inside function", "body": "<p>You can't count items in a <code>double</code> array, that technique is used for strings, because in c strings have a special last value <code>'\\0'</code> which is basically <code>0</code>, hence it can be used as a truth value in a loop to help count characters or find the end of the string for any other purpose.</p>\n\n<p>Specially in your case, all the elements are <code>100.0</code>, so why are you expecting <code>while (*(array + i))</code> to even start looping?</p>\n\n<p>Also, you need to be clear about the syntax <code>*(array + i)</code> which is the same as <code>array[i]</code> and it's obvious which of the two is better.</p>\n\n<p>In c you need to keep track about the number of elements of an array, if you want to \"<em>though I don't like that</em>\" you can use a struct</p>\n\n<pre><code>struct DoubleArray  \n{\n    double *data;\n    size_t  size;\n};\n</code></pre>\n\n<p>and then you could use functions to initialize, deinitialize, set/get values etc., for example</p>\n\n<pre><code>struct DoubleArray *new_double_array(size_t size)\n{\n    struct DoubleArray *array;\n    array = malloc(sizeof(*array));\n    if (array == NULL)\n        return NULL;\n    array-&gt;data = malloc(size * sizeof(double));\n    if (array-&gt;data == NULL)\n    {\n        free(array);\n        return NULL;\n    }\n    array-&gt;size = size;\n\n    return array;\n}\n</code></pre>\n\n<p>And then I'd recommend to make this struct <strong>opaque</strong>, i.e. to hide it's fields from the struct users, so that you can prevent misusing the fields.</p>\n"}, {"tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1432119265, "last_edit_date": 1432119265, "creation_date": 1432118906, "answer_id": 30347450, "question_id": 30347368, "link": "https://stackoverflow.com/questions/30347368/count-elements-in-array-inside-function/30347450#30347450", "title": "Count elements in array inside function", "body": "<p>As I can see, in your code,</p>\n\n<pre><code>while(*(array + i)){ \n</code></pre>\n\n<p>does not include any boundary check on the index <code>i</code>. So, it will create memory overrun and hence you'll face <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>. </p>\n\n<p>It does not have any effect for <em>commenting out <code>printf(\"%f\\n\", *(r+i));</code></em>.</p>\n\n<p>Also, there is a fundamental problem in your <code>count_pieces()</code> function. Without checking the input parameter <code>array</code> against NULL, you started to deference it. It can cause you serious trouble if the function is called with a NULL argument. You should put a check first.</p>\n"}], "owner": {"reputation": 3, "user_id": 4918103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/go7Ex.jpg?s=128&g=1", "display_name": "Sci-Walk", "link": "https://stackoverflow.com/users/4918103/sci-walk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30347433, "answer_count": 2, "score": 0, "last_activity_date": 1432120629, "creation_date": 1432118693, "last_edit_date": 1432118719, "question_id": 30347368, "link": "https://stackoverflow.com/questions/30347368/count-elements-in-array-inside-function", "title": "Count elements in array inside function", "body": "<p>I know that similar question was asked but, I need some explanation:\nThere is a code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint count_pieces(double *array){\n    int i = 0;\n    while(*(array + i)){  \n        i++;\n    }\n    return i;\n}\nint main()\n{   \n    int i;\n    int n=1005;\n    double r[n];\n    for(i=0;i&lt;n;i++){\n        *(r+i) = 100.0;\n        printf(\"%f\\n\", *(r+i));\n    }\n    printf(\"\\n----------------------\\n\");\n    printf(\"N=%d\",count_pieces(r)); \n    printf(\"\\n----------------------\\n\");\n    return 1;\n}\n</code></pre>\n\n<p>count_pieces() was taken from <a href=\"http://know-all.net\" rel=\"nofollow\">know-all.net</a> and was adapted for double. All works FINE. BUT! - when I comment line: <code>printf(\"%f\\n\", *(r+i));</code> It becomes work incomprehensible! Why? What's happening?</p>\n"}, {"tags": ["c++", "c", "windows", "webrtc"], "answers": [{"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 0, "last_activity_date": 1432118943, "creation_date": 1432118943, "answer_id": 30347466, "question_id": 30347261, "link": "https://stackoverflow.com/questions/30347261/how-to-let-different-processes-use-different-network-interfaces-windows-7/30347466#30347466", "title": "How to let different processes use different network interfaces Windows 7?", "body": "<p>You should use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms741621%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>WSAIoctl</code></a> function with the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd877219%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>SIO_ADDRESS_LIST_QUERY</code></a> control code. That will allow you to get a list of network interfaces for your system, you will then be able to use the address of the interface you want in your <code>bind</code> calls.</p>\n"}], "owner": {"reputation": 145, "user_id": 4511149, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-yST4Our2CxU/AAAAAAAAAAI/AAAAAAAABXo/tEhNIKH0HdI/photo.jpg?sz=128", "display_name": "KrishPS", "link": "https://stackoverflow.com/users/4511149/krishps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432118943, "creation_date": 1432118442, "question_id": 30347261, "link": "https://stackoverflow.com/questions/30347261/how-to-let-different-processes-use-different-network-interfaces-windows-7", "title": "How to let different processes use different network interfaces Windows 7?", "body": "<p>I'm writing WebRTC related application. My system has multiple network interfaces. \n1. How can I let different processes use different network interfaces to communicate?\n2. One Interface should be used for signaling and another will be for data transfer or video/audio call.?</p>\n"}, {"tags": ["c", "multithreading", "struct"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1432117226, "post_id": 30346618, "comment_id": 48786381, "body": "Fix your missing deallocations and your own confusion about data and allData first."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1432120428, "post_id": 30346618, "comment_id": 48788485, "body": "you mix the address of <code>*data</code> and <code>*data</code>. <code>(void *)&amp;data</code> is a <code>struct thread_data**</code> and this pointer is the same but the value inside is different"}], "answers": [{"tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": false, "score": 0, "last_activity_date": 1432120709, "creation_date": 1432120709, "answer_id": 30348113, "question_id": 30346618, "link": "https://stackoverflow.com/questions/30346618/dynamically-allocating-struct-inside-a-loop/30348113#30348113", "title": "Dynamically allocating struct inside a loop", "body": "<p>Directly use data</p>\n\n<pre><code>#include &lt;pthread.h&gt;                                                           \n#include &lt;stdio.h&gt;                                                             \n#include &lt;stdlib.h&gt;                                                            \n\n#define NUM_THREADS     5                                                      \n\nstruct thread_data {                                                           \n    long thread_id;                                                            \n    int thread_sum;                                                            \n};                                                                             \n\nvoid *PrintHello(void *threadData)                                             \n{                                                                              \n\n    struct thread_data  *data_input = (struct thread_data *)threadData;        \n\n    printf(\"Hello World! It's me, thread #%ld! ,%d , pointer %d\\n\", data_input-&gt;thread_id, data_input-&gt;thread_sum, data_input); \n    pthread_exit(NULL);                                                        \n}                                                                              \n\n\nint main(int argc, char *argv[])                                               \n{                                                                              \n    pthread_t threads[NUM_THREADS];;                                           \n    struct thread_data allData[NUM_THREADS];                                   \n    int rc;                                                                    \n    long t;                                                                    \n    for (t = 0; t &lt; NUM_THREADS; t++){                                         \n\n        struct thread_data* data = malloc(sizeof(struct thread_data));         \n\n        //allData[t].thread_id = t;                                            \n        //allData[t].thread_sum = 100;                                         \n\n        //  struct thread_data data;                                           \n        data-&gt;thread_id = t;                                                   \n        data-&gt;thread_sum = 0;                                                  \n\n        printf(\"In main: creating thread %ld  , %d , %d\\n\", data-&gt;thread_id, data-&gt;thread_sum, &amp;data); \n        rc = pthread_create(&amp;threads[t], NULL, PrintHello, (void *)data);      \n        if (rc){                                                               \n            printf(\"ERROR; return code from pthread_create() is %d\\n\", rc);    \n            exit(-1);                                                          \n        }                                                                      \n    }                                                                          \n    /* Last thing that main() should do */                                 \n    pthread_exit(NULL);                                                    \n\n    return 0;                                                              \n} \n</code></pre>\n\n<p>Will ouput:</p>\n\n<pre><code>In main: creating thread 0  , 0 , -273609272\nIn main: creating thread 1  , 0 , -273609272\nHello World! It's me, thread #0! ,0 , pointer 13357072\nIn main: creating thread 2  , 0 , -273609272\nIn main: creating thread 3  , 0 , -273609272\nIn main: creating thread 4  , 0 , -273609272\nHello World! It's me, thread #2! ,0 , pointer 13357712\nHello World! It's me, thread #1! ,0 , pointer 13357392\nHello World! It's me, thread #4! ,0 , pointer 13359632\nHello World! It's me, thread #3! ,0 , pointer 13358032\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "is_accepted": true, "score": 2, "last_activity_date": 1432124336, "last_edit_date": 1432124336, "creation_date": 1432120953, "answer_id": 30348207, "question_id": 30346618, "link": "https://stackoverflow.com/questions/30346618/dynamically-allocating-struct-inside-a-loop/30348207#30348207", "title": "Dynamically allocating struct inside a loop", "body": "<p>on your code <code>&amp;data</code> is of type <code>struct thread_data **</code>\nreplace this </p>\n\n<pre><code> rc = pthread_create(&amp;threads[t], NULL, PrintHello, (void *)&amp;data);\n</code></pre>\n\n<p>by this</p>\n\n<pre><code> rc = pthread_create(&amp;threads[t], NULL, PrintHello, (void *)data);\n</code></pre>\n\n<p>also, you have to call <code>free</code> for each allocated memory inside (and just before <code>pthread_exit</code>) the <code>PrintHello</code> function</p>\n"}], "owner": {"reputation": 3, "user_id": 4919858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UzKXSklvmII/AAAAAAAAAAI/AAAAAAAAANM/oNTsJOoWAIQ/photo.jpg?sz=128", "display_name": "Adham Hurani", "link": "https://stackoverflow.com/users/4919858/adham-hurani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 30348207, "answer_count": 2, "score": 0, "last_activity_date": 1432124336, "creation_date": 1432116607, "last_edit_date": 1432117993, "question_id": 30346618, "link": "https://stackoverflow.com/questions/30346618/dynamically-allocating-struct-inside-a-loop", "title": "Dynamically allocating struct inside a loop", "body": "<p>I have wrote a simple program to play with <code>pthread</code>s . </p>\n\n<p>Each thread receives as thread data a pointer to a <code>struct</code> and prints it. Then I have wrote a loop to dynamically allocate <code>struct</code>s and then use the point in the thread creation.</p>\n\n<p>The problem is, Why does all threads receive the same <code>stuct</code> although I have allocated different loops?</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#define NUM_THREADS     5\n\nstruct thread_data {\n    long thread_id;\n    int thread_sum;\n};\n\nvoid *PrintHello(void *threadData)\n{\n\n    struct thread_data  *data_input = (struct thread_data *)threadData;\n\n    printf(\"Hello World! It's me, thread #%ld! ,%d , pointer %d\\n\", data_input-&gt;thread_id, data_input-&gt;thread_sum, data_input);\n    pthread_exit(NULL);\n}\n\n\nint main(int argc, char *argv[])\n{\n    pthread_t threads[NUM_THREADS];;\n    struct thread_data allData[NUM_THREADS];\n    int rc;\n    long t;\n    for (t = 0; t &lt; NUM_THREADS; t++){\n\n        struct thread_data* data = malloc(sizeof(struct thread_data));\n\n        //allData[t].thread_id = t;\n        //allData[t].thread_sum = 100;\n\n        //  struct thread_data data;\n        data-&gt;thread_id = t;\n        data-&gt;thread_sum = 0;\n\n        printf(\"In main: creating thread %ld  , %d , %d\\n\", data-&gt;thread_id, data-&gt;thread_sum, &amp;data);\n        rc = pthread_create(&amp;threads[t], NULL, PrintHello, (void *)&amp;data);\n        if (rc){\n            printf(\"ERROR; return code from pthread_create() is %d\\n\", rc);\n            exit(-1);\n        }\n    }\n\n    /* Last thing that main() should do */\n    pthread_exit(NULL);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault"], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 6, "last_activity_date": 1432116347, "creation_date": 1432116347, "answer_id": 30346512, "question_id": 30346449, "link": "https://stackoverflow.com/questions/30346449/segmentation-fault-two-functions-dont-run-simultaneously/30346512#30346512", "title": "Segmentation fault - Two functions don&#39;t run simultaneously", "body": "<p>You don't initialize <code>size</code>, therefore its value will be <em>indeterminate</em> and you will have <em>undefined behavior</em> when you use it to create your arrays.</p>\n\n<p>Undefined behavior makes your whole program ill-formed.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 2794817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1124844804/picture?type=large", "display_name": "Sneha Choudhury", "link": "https://stackoverflow.com/users/2794817/sneha-choudhury"}, "edited": false, "score": 0, "creation_date": 1432120634, "post_id": 30346768, "comment_id": 48788620, "body": "Okay...I get the point...So now how do I initialize this variable size? Because size is later what I have defined."}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 23, "user_id": 2794817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1124844804/picture?type=large", "display_name": "Sneha Choudhury", "link": "https://stackoverflow.com/users/2794817/sneha-choudhury"}, "edited": false, "score": 0, "creation_date": 1432120772, "post_id": 30346768, "comment_id": 48788713, "body": "@SnehaChoudhury simply move your <code>float</code> array definitions after you calculate <code>size</code>. That&#39;ll solve the issue."}, {"owner": {"reputation": 23, "user_id": 2794817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1124844804/picture?type=large", "display_name": "Sneha Choudhury", "link": "https://stackoverflow.com/users/2794817/sneha-choudhury"}, "edited": false, "score": 0, "creation_date": 1432121005, "post_id": 30346768, "comment_id": 48788860, "body": "doesn&#39;t work still!! I still get a segmentation fault after the velocity_solve is executed...which means it doesn&#39;t execute the density_solve anymore. I realize that I do not use the arrays anywhere but I use the pointers rather, so I tried commenting out the array declaration as well...that does not help either. Any idea what else could be going wrong?"}], "tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": false, "score": 3, "last_activity_date": 1432117781, "last_edit_date": 1432117781, "creation_date": 1432116999, "answer_id": 30346768, "question_id": 30346449, "link": "https://stackoverflow.com/questions/30346449/segmentation-fault-two-functions-dont-run-simultaneously/30346768#30346768", "title": "Segmentation fault - Two functions don&#39;t run simultaneously", "body": "<p>In your code, <code>size</code> is a local variable of type <code>auto</code> storage. Unless initialized explicitly, it will have garbage or <em>indeterminate</em> value, making use of which like</p>\n\n<pre><code>float vel_x[size];\n</code></pre>\n\n<p>invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>Related : From <code>C11</code> standard, chapter 6.2.4, <em>\"Storage durations of objects\"</em>,</p>\n\n<p>Paragraph 5:</p>\n\n<blockquote>\n  <p>An object whose identifier is declared with no linkage and without the storage-class specifier <code>static</code> has <em>automatic storage duration,</em> ...</p>\n</blockquote>\n\n<p>and Paragraph 6:</p>\n\n<blockquote>\n  <p>...The initial value of the object is indeterminate. ...</p>\n</blockquote>\n\n<p>Also, from the same document, chapter \u00a76.7.9, <em>\"Initialization\"</em>, paragraph 10</p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate.</p>\n</blockquote>\n\n<p>and finally, from appendix J.2, <em>\"Undefined behavior\"</em></p>\n\n<blockquote>\n  <p>The value of an object with automatic storage duration is used while it is\n  indeterminate</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 2794817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1124844804/picture?type=large", "display_name": "Sneha Choudhury", "link": "https://stackoverflow.com/users/2794817/sneha-choudhury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1465429061, "creation_date": 1432116197, "last_edit_date": 1465429061, "question_id": 30346449, "link": "https://stackoverflow.com/questions/30346449/segmentation-fault-two-functions-dont-run-simultaneously", "title": "Segmentation fault - Two functions don&#39;t run simultaneously", "body": "<p>I have the following code for my program</p>\n\n<pre><code>int main(void)\n{\n    int i,size;\n    float vel_x[size],vel_y[size],vel_x0[size],vel_y0[size],rho[size],rho0[size];\n    float *ux, *vy, *ux0, *vy0;\n    float *r, *r0;\n    struct fdparam fdparam_1;\n\n    printf(\"Enter the number of grid points: \\t\");\n    scanf(\"%d\", &amp;fdparam_1.N);\n    printf(\"Enter the maximum number of iterations: \\t\");\n    scanf(\"%d\", &amp;fdparam_1.MAXIT);\n    printf(\"Enter the value for time domain: \\t\");\n    scanf(\"%f\", &amp;fdparam_1.t_domain);\n    printf(\"Enter the time step and density of the fluid: \\t \\t\");\n    scanf(\"%f\\t%f\", &amp;fdparam_1.Dt, &amp;fdparam_1.dens);\n    printf(\"Enter the diffusion coefficient and viscosity: \\t \\t\");\n    scanf(\"%f\\t%f\",&amp;fdparam_1.diff, &amp;fdparam_1.mu);\n    printf(\"The parameters are N=%d, MAXIT=%d, t_domain=%f, Dt=%f, diff=%e, mu=%e, dens=%f \\n\",fdparam_1.N, fdparam_1.MAXIT, fdparam_1.t_domain, fdparam_1.Dt, fdparam_1.diff, fdparam_1.mu, fdparam_1.dens);\n\n    size=(fdparam_1.N+2)*(fdparam_1.N+2);\n    printf(\"The size is %d \\n\",size );\n\n    r  = (float*) calloc (size,sizeof(float));\n    r0 = (float*) calloc (size,sizeof(float));\n    ux = (float*) calloc (size,sizeof(float));\n    vy = (float*) calloc (size,sizeof(float));\n    ux0 = (float*)calloc (size,sizeof(float));\n    vy0 = (float*)calloc (size,sizeof(float));\n\n    var_init(fdparam_1.N,r0,ux0,vy0,fdparam_1.dens);\n\n//      t=0;    \n//      Solver functions\n//      while (t&lt;fdparam_1.t_domain){\n      velocity_solve(fdparam_1.N,ux,vy,ux0,vy0,fdparam_1.Dt,fdparam_1.mu,fdparam_1.MAXIT);    //calculates ux and vy to be used in the density solver\n    density_solve(fdparam_1.N,r,r0,ux,vy,fdparam_1.Dt,fdparam_1.diff,fdparam_1.MAXIT);      //uses ux and vy calculated from Navier Stokes in the velocity solver to calculate density r\n//      t+=fdparam_1.Dt\n//      }\n}\n\n    //velocity solver function\n\n    void velocity_solve(int n, float *u, float *v, float *u0, float *v0, float dt, float m, int MAXITER)\n{\n    int i,j;\n\n    add_source(n,u,u0,dt);          add_source(n,v,v0,dt);\n    swap(u0,u);     swap(v0,v);\n    diffusion(n,u,u0,dt,m,MAXITER);         diffusion(n,v,v0,dt,m,MAXITER);\n    projection(n,u,v,u0,v0,MAXITER);\n    swap(u0,u);     swap(v0,v);\n    advection(n,u,u0,u0,v0,dt);     advection(n,v,v0,u0,v0,dt);\n    projection(n,u,v,u0,v0,MAXITER);\n\n    printf(\"Printing velocities now \\n\");\n    for (i=0; i&lt;=n+1; i++){\n            for (j=0;j&lt;=n+1;j++){\n                    printf(\"%f \\t %f \\n\",u[ix(i,j)],v[ix(i,j)]);\n            }\n    }\n}\n\n// density solver function\n\nvoid density_solve(int n, float *x, float *x0,  float *u, float *v, float dt, float diff, int MAXITER)\n{\n    int i,j;\n\n    add_source(n,x,x0,dt);\n    swap(x0,x);\n    diffusion(n,x,x0,dt,diff,MAXITER);\n    swap(x0,x);\n    advection(n,x,x0,u,v,dt);\n\n    printf(\"Printing density now \\n\");\n    for (i=0;i&lt;=n+1;i++){\n            for (j=0; j&lt;=n+1;j++){\n                    printf(\"%f \\t\",x[ix(i,j)]);\n            }\n    }\n    printf(\"\\n\");\n\n}\n</code></pre>\n\n<p>The main problem that I am facing while executing this code is that I get a segmentation fault when I try to run both the functions <code>velocity_solve</code> and <code>density_solve</code> together. The two functions are executed properly when they are run individually i.e. when I comment <code>velocity_solve</code>, <code>density_solve</code> runs fine and vice-versa.</p>\n\n<p>I am pretty sure there is nothing wrong with the functions being used in the <code>velocity_solve</code> and <code>density_solve</code> routines because neither of the two routines would give individual outputs. I suspect there is something going wrong when the two functions are supposed to interact, i.e the output of <code>velocity_solve</code> needs to be used in <code>density_solve</code>.</p>\n\n<p>I tried initializing the size variable but then it doesn't make a difference at all. But then I realized that I do not use the arrays that are defined so I commented them out, instead I use the pointers for which I have already allocated memory, then why does it still give a segmentation fault when I try to call both the functions together in main function?</p>\n\n<p>Can someone suggest what is going wrong in the code? </p>\n"}, {"tags": ["c", "list"], "answers": [{"tags": [], "owner": {"reputation": 7267, "user_id": 1051621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAEvg.jpg?s=128&g=1", "display_name": "Mark Shevchenko", "link": "https://stackoverflow.com/users/1051621/mark-shevchenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1432116312, "last_edit_date": 1432116312, "creation_date": 1432116276, "answer_id": 30346483, "question_id": 30346285, "link": "https://stackoverflow.com/questions/30346285/linked-lists-displays-in-reverse/30346483#30346483", "title": "linked lists displays in reverse", "body": "<p>You can append each new entity at the end of the list:</p>\n\n<pre><code>void add(num)\n{\n  struct node *temp, *temp2;\n  temp=(struct node *)malloc(sizeof(struct node));\n  temp-&gt;val=num;\n  if (head== NULL)\n      {\n       head=temp;\n       head-&gt;next=NULL;\n      }\n  else\n      {\n       temp2 = head;\n       while (temp2-&gt;next != NULL)\n            temp2 = temp2-&gt;next;\n\n       temp2-&gt;next = temp;\n       temp-&gt;next = NULL;\n      }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51908, "user_id": 702361, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e2a400cef6dbb94a8777c161d5b43d0c?s=128&d=identicon&r=PG", "display_name": "phoxis", "link": "https://stackoverflow.com/users/702361/phoxis"}, "is_accepted": false, "score": 0, "last_activity_date": 1432118453, "creation_date": 1432118453, "answer_id": 30347270, "question_id": 30346285, "link": "https://stackoverflow.com/questions/30346285/linked-lists-displays-in-reverse/30347270#30347270", "title": "linked lists displays in reverse", "body": "<p>The code does not look good to me, because at the end of all insertions the head points to the last element of the list with the <code>next</code> field uninitialized. This does not print the list in reverse, this will print the last element inserted and then the behaviour will be undefined. Also, as you loose the head pointer, you have lost the list and all the allocated memory (leak).</p>\n\n<p>I will recommend to maintain a <code>tail</code> pointer which will always point to the tail of the list. An append function can just add a new node after the <code>tail</code> and update the <code>tail</code> by advancing it. The <code>head</code> remains the same and points the first element of the list. You can also assign the value of <code>head</code> into a temporary variable, iterate to the end of the list, and insert, but in this case the insertion will be costly.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 3237995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd6d18515221a4fcc07893118a8730a6?s=128&d=identicon&r=PG&f=1", "display_name": "girl101", "link": "https://stackoverflow.com/users/3237995/girl101"}, "is_accepted": false, "score": 1, "last_activity_date": 1433221861, "last_edit_date": 1433221861, "creation_date": 1432877529, "answer_id": 30521802, "question_id": 30346285, "link": "https://stackoverflow.com/questions/30346285/linked-lists-displays-in-reverse/30521802#30521802", "title": "linked lists displays in reverse", "body": "<p>Instead of doing</p>\n\n<pre>\n    head->next = temp;\n    head=temp;\n</pre>\n\n<p>do </p>\n\n<pre>\n    temp->next=head;\n    head=temp;\n</pre>\n"}], "owner": {"reputation": 172, "user_id": 3814804, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2697fbbeae61331f5981d6c144eb29?s=128&d=identicon&r=PG&f=1", "display_name": "HRG", "link": "https://stackoverflow.com/users/3814804/hrg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 30346483, "answer_count": 3, "score": 0, "last_activity_date": 1433221861, "creation_date": 1432115734, "last_edit_date": 1432118450, "question_id": 30346285, "link": "https://stackoverflow.com/questions/30346285/linked-lists-displays-in-reverse", "title": "linked lists displays in reverse", "body": "<p>I was trying a single linked list. After creating the list, it tries to display in forward order, but it displays in reverse. I guess I am adding nodes in forward position but why does it display from the last input value?</p>\n\n<p>Here is the code </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdbool.h&gt;\nvoid add(num);\nvoid insert();\nvoid display();\nstruct node\n{\nint val;\nstruct node *next;\n};\n\nstruct node *head =NULL;\n\nmain()\n{\n\nint data,i=0;\nhead = (struct node *)malloc(sizeof(struct node));\nwhile(1)\n    {\n      printf(\"enter your choice\");\n      scanf(\"%d\",&amp;i);\n\n      switch(i)\n       {\n         case 1:\n         insert();\n         break;\n\n         case 2:\n         display();\n         break;\n\n         default:\n         printf(\"thankyou\");\n\n        }\n\n      }\n\n\n\n}\n\nvoid add(num)\n{\n  struct node *temp;\n  temp=(struct node *)malloc(sizeof(struct node));\n  temp-&gt;val=num;\n  if (head== NULL)\n      {\n       head=temp;\n       head-&gt;next=NULL;\n      }\n  else\n      {\n       head-&gt;next = temp\n       head=temp;\n      }\n}\n\nvoid insert()\n{\n  int ch;\n  if (head-&gt;val == NULL )\n     {\n       printf(\"Enter the value for the first node :\");\n       scanf(\"%d\",&amp;ch);\n       add(ch);\n      }\n  else if(head-&gt;val != NULL)\n      {\n       printf(\"Enter the value to insert :\");\n       scanf(\"%d\",&amp;ch);\n       add(ch);\n      }\n  }\n\nvoid display()\n{\n struct node *newnode;\n newnode = head;\n  if(newnode == NULL)\n       printf(\"invalid list\");\n  else\n     {\n       while(newnode!=NULL)\n        {\n          printf(\"%d \\t\\t\",newnode-&gt;val);\n          newnode=newnode-&gt;next;\n\n         }\n     } \n }\n</code></pre>\n"}, {"tags": ["c", "arguments", "argument-passing"], "comments": [{"owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1432115729, "post_id": 30346141, "comment_id": 48785218, "body": "function will operate as-if it had all the parameter, but the third parameter could just be junk and leads to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">UB</a>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 1, "creation_date": 1432115835, "post_id": 30346141, "comment_id": 48785307, "body": "@Dayalrai: no - it&#39;s undefined behaviour - almost anything can happen. On many ABIs the stack frame will be incorrect, leading to potentially disastrous consequences."}, {"owner": {"reputation": 1832, "user_id": 831376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1AQ5T.gif?s=128&g=1", "display_name": "deStrangis", "link": "https://stackoverflow.com/users/831376/destrangis"}, "edited": false, "score": 0, "creation_date": 1432115863, "post_id": 30346141, "comment_id": 48785330, "body": "You have a double -and inconsistent- declaration. Declarations are only useful at compile time, so the compiler can check that the function is used correctly. If you manage to fool the compiler like you have done, the linker will just find a call to <code>add()</code> and code for <code>add()</code> and will link them together."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1432115950, "post_id": 30346141, "comment_id": 48785398, "body": "The correct behaviour is to have an include file that exposes the prototypes (function declarations) that are in a C file. If you have add.c you must have add.h where the functions of add.c are declared as prototypes ... This behaviour allows you to avoid the issue you indicate. You may use <code>gcc -Wall</code> to verify all warnings, the option <code>--pedantic</code> indicates more warning (but is very boring)"}, {"owner": {"reputation": 103, "user_id": 928726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1830068e624af7fe496cccb42ba35bb1?s=128&d=identicon&r=PG", "display_name": "Vivek Agrawal", "link": "https://stackoverflow.com/users/928726/vivek-agrawal"}, "edited": false, "score": 0, "creation_date": 1432116013, "post_id": 30346141, "comment_id": 48785448, "body": "Can somebody tell me, why did I get downvote? At least I deserve a reason for the downvote."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 1, "creation_date": 1432117305, "post_id": 30346141, "comment_id": 48786423, "body": "I don&#39;t want to get into a vote war but upvoted because this is a perfectly reasonable question that will lead an improved understanding of &#39;C&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 7, "last_activity_date": 1432115498, "creation_date": 1432115498, "answer_id": 30346183, "question_id": 30346141, "link": "https://stackoverflow.com/questions/30346141/calling-function-with-lesser-number-of-arguments-in-c/30346183#30346183", "title": "calling function with lesser number of arguments in C?", "body": "<p>Use your header files correctly.<br>\nConfigure your compiler to emit as many warnings as possible.<br>\n<strong>Mind the warnings!</strong></p>\n\n<p><strong>add.h</strong></p>\n\n<pre><code>#ifndef ADD_H_INCLUDED\n#define ADD_H_INCLUDED\nint add(int a, int b, int c);\n#endif\n</code></pre>\n\n<p><strong>add.c</strong></p>\n\n<pre><code>#include \"add.h\"\nint add(int a, int b, int c) {\n    return a + b + c;\n}\n</code></pre>\n\n<p><strong>file.c</strong></p>\n\n<pre><code>#include \"add.h\"\nvoid foo() {\n    add(1, 2);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1432115526, "creation_date": 1432115526, "answer_id": 30346197, "question_id": 30346141, "link": "https://stackoverflow.com/questions/30346141/calling-function-with-lesser-number-of-arguments-in-c/30346197#30346197", "title": "calling function with lesser number of arguments in C?", "body": "<p>Calling a function with to few arguments leads to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\"><em>undefined behavior</em></a> as the value of those arguments will be indeterminate.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1432115944, "creation_date": 1432115944, "answer_id": 30346363, "question_id": 30346141, "link": "https://stackoverflow.com/questions/30346141/calling-function-with-lesser-number-of-arguments-in-c/30346363#30346363", "title": "calling function with lesser number of arguments in C?", "body": "<blockquote>\n  <p>C linker doesn't compare arguments while linking.</p>\n</blockquote>\n\n<p>That is correct. Unlike C++ linker which considers argument types to be part of a function signature, C linker considers only function names. That is why it is possible to create a situation with undefined behavior simply by supplying a wrong function prototype the way that you show.</p>\n\n<blockquote>\n  <p>what is the good practice to avoid this situation or get some sort of warning during compilation?</p>\n</blockquote>\n\n<p>Always put prototypes of functions that you are intended to share into a header, and include that header from the places where the function is used and the place where the function is defined. This would ensure that compiler issues a diagnostic message. Treat all compiler warnings as errors. C compilers are often rather forgiving, so their warnings usually indicate something very important.</p>\n"}], "owner": {"reputation": 103, "user_id": 928726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1830068e624af7fe496cccb42ba35bb1?s=128&d=identicon&r=PG", "display_name": "Vivek Agrawal", "link": "https://stackoverflow.com/users/928726/vivek-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 30346363, "answer_count": 3, "score": 2, "last_activity_date": 1432117014, "creation_date": 1432115368, "last_edit_date": 1432117014, "question_id": 30346141, "link": "https://stackoverflow.com/questions/30346141/calling-function-with-lesser-number-of-arguments-in-c", "title": "calling function with lesser number of arguments in C?", "body": "<p>I strangely found that C allows linking of function where argument list doesn't match:</p>\n\n<pre><code>//add.c\nint add(int a, int b, int c) {\n    return a + b + c;\n}\n//file.c\nint add (int,int); //Note: only 2 arguments\nvoid foo() {\n    add(1,2);\n}\n</code></pre>\n\n<p>I compiled add.c first, then compiled file.c, both got compiled successfully. Strangely, linker didn't give any sort of error or warning, probably the reason is C linker doesn't compare arguments while linking. I'm not 100% sure about it though. Someone please comment on this.</p>\n\n<p>Now, the question is what is the good practice to avoid this situation or get some sort of warning during compilation, because in my project there are lot of functions in different files, and now &amp; then we have to add some extra argument in the function.</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432115278, "post_id": 30345897, "comment_id": 48784860, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1038155"}, "edited": false, "score": 0, "creation_date": 1432116005, "post_id": 30345897, "comment_id": 48785439, "body": "You are reserving Memory with calloc. Where is it deallocated/? MAy this be the Problem?! Don`t understand your question completly. Which pointer and which Array element?"}, {"owner": {"reputation": 643, "user_id": 4892892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/433166266860648/picture?type=large", "display_name": "Zolt&#225;n Cs&#225;ti", "link": "https://stackoverflow.com/users/4892892/zolt%c3%a1n-cs%c3%a1ti"}, "edited": false, "score": 0, "creation_date": 1432116492, "post_id": 30345897, "comment_id": 48785843, "body": "I think my problem is not as of &quot;Why is \u201cwhile ( !feof (file) )\u201d always wrong?&quot;, because the strings are read properly but I just cannot reset the pointer <code>inputItems</code> to point to the first structure of a structure array.  Miguel13366, you will see my problem if you run the code. Specifically, when printing the structure array using the function <code>printItemStructure</code>, <code>itputItems[0].tag</code> does not point to the first character of &quot;Film1&quot;. It is because the pointer is not reset."}, {"owner": {"reputation": 643, "user_id": 4892892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/433166266860648/picture?type=large", "display_name": "Zolt&#225;n Cs&#225;ti", "link": "https://stackoverflow.com/users/4892892/zolt%c3%a1n-cs%c3%a1ti"}, "edited": false, "score": 0, "creation_date": 1432117016, "post_id": 30345897, "comment_id": 48786255, "body": "I forgot about <code>free</code> to deallocate memory, but it is not the case here, since <code>free</code> would follow the <code>printItemStructure</code> function where the problem occurs."}, {"owner": {"reputation": 643, "user_id": 4892892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/433166266860648/picture?type=large", "display_name": "Zolt&#225;n Cs&#225;ti", "link": "https://stackoverflow.com/users/4892892/zolt%c3%a1n-cs%c3%a1ti"}, "edited": false, "score": 0, "creation_date": 1432118373, "post_id": 30345897, "comment_id": 48787140, "body": "During, I saw that every element of the structure array <code>inputItems</code> contains the <code>inputItems[N-1].tag</code>. I just cannot figure out, why. Please help me."}, {"owner": {"reputation": 643, "user_id": 4892892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/433166266860648/picture?type=large", "display_name": "Zolt&#225;n Cs&#225;ti", "link": "https://stackoverflow.com/users/4892892/zolt%c3%a1n-cs%c3%a1ti"}, "edited": false, "score": 0, "creation_date": 1432119383, "post_id": 30345897, "comment_id": 48787807, "body": "user3121023, I used <code>calloc</code> and then <code>strcpy</code> as you advised. It works! Thank you very much, it was all that was missing from my larger code. How can I accept your answer, since you sent it as a comment? Perhaps you could copy your answer to the answer section so that I can accept it."}], "owner": {"reputation": 643, "user_id": 4892892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/433166266860648/picture?type=large", "display_name": "Zolt&#225;n Cs&#225;ti", "link": "https://stackoverflow.com/users/4892892/zolt%c3%a1n-cs%c3%a1ti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1432114863, "creation_date": 1432114656, "last_edit_date": 1432114863, "question_id": 30345897, "link": "https://stackoverflow.com/questions/30345897/reset-a-structure-array-pointer", "title": "Reset a structure array pointer", "body": "<p>I want to process data given in a txt file. It has several rows and 2 columns. For my algorithm, I have to use a structure array so that each array item corresponds to one line in the txt file. Within one line, there is a string and a number. Therefore, I created two members of the structure. I go on row-by-row and fill in the structure. However, somehow, I have to reset the structure array pointer to the first element, and this is what I can't achieve.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid loadData(struct item *inputItems, FILE *inputStream);\nvoid printItemStructure(struct item *itemArray, int nItems);\n\nstruct item{\n    char *tag;\n    double itemSize;\n};\n\n\nint main()\n{\n    /* Handle the input file */\n    char *inputFileName = \"d:\\\\Users\\\\User\\\\Downloads\\\\input.txt\";\n    FILE *input;\n    input = fopen(inputFileName, \"r\");\n    if (input == NULL){\n        printf(\"Could not open the file for reading.\");\n        return -1;\n    }\n/* ========== Read the file content to the input structure ========== */\n\n    /*Determine the number of items by counting the rows of the input file */\n    int N = 0; /* number of items */\n    int nChars = -1; /* number of characters (exclude EOF character) */\n    char penChar; /* penultimate character */\n    char currentChar = ' '; /* last character read from the file stream */\n    char lastChar; /* number of characters */\n    while (!feof(input)){\n        lastChar = currentChar;\n        currentChar = fgetc(input);\n        nChars++;\n        if (currentChar == '\\n')\n            N++;\n    }\n    if (lastChar != '\\n' /* the file does not end with '\\n' ... */\n        &amp;&amp; nChars != 0)  /* ... and is not empty */\n        N++;\n\n    /* Process data row-by-row */\n    struct item *inputItems = calloc(N, sizeof(struct item));\n    struct item *origItems = inputItems; /* this will be reseted */\n    loadData(inputItems, input);\n\n    inputItems = origItems;\n    printItemStructure(inputItems, N);\n\n    /* Close the file */\n    fclose(input);\n\n    return 0;\n}\n\nvoid loadData(struct item *inputItems, FILE *inputStream){\n    rewind(inputStream);\n    char *start = inputItems[0].tag;\n    char row[200];\n    int rowSize = 200;\n    int i = 0;\n    char title[200];\n    double size;\n    while (fgets(row, rowSize, inputStream)){\n        sscanf(row, \"%s %lf\", title, &amp;size); // why doesn't it work directly?\n        inputItems[i].tag = title;\n        inputItems[i].itemSize = size;\n        printf(\"%s\\n\", row);\n        i++;\n    }\n}\n\nvoid printItemStructure(struct item *itemArray, int nItems){\n    /* Print the members of the item structure array for debugging purposes */\n    for (int j = 0; j&lt;nItems; j++)\n    {\n        printf(\"\\nitemArray[%d]\\n   Tag: %s,   Size: %lf\\n\",\n            j, itemArray[j].tag, itemArray[j].itemSize);\n    }\n}\n</code></pre>\n\n<p>Why can't I reset the <code>*tag</code> field of the <code>inputItems</code> structure array?\nThe <code>input.txt</code> file contains:</p>\n\n<pre><code>Film1 1.8\nFilm2   4.25\n</code></pre>\n"}, {"tags": ["c++", "c", "makefile"], "comments": [{"owner": {"reputation": 20747, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1432115578, "post_id": 30345844, "comment_id": 48785102, "body": "Do you have any &quot;sub&quot;-Makefiles?"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1432116140, "post_id": 30345844, "comment_id": 48785550, "body": "Apearently the `foo.so&#39; was not add as dependency of linking, and the make in a serial invocation would create it anyway in some stage..."}, {"owner": {"reputation": 859, "user_id": 2156825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/077db5bd1a2dda03bdf6146de32e44c4?s=128&d=identicon&r=PG", "display_name": "lulijeta", "link": "https://stackoverflow.com/users/2156825/lulijeta"}, "reply_to_user": {"reputation": 20747, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1432118286, "post_id": 30345844, "comment_id": 48787079, "body": "@E_net4 If you mean makefiles calling other makefiles, yes I do. It&#39;s like a tree structure"}, {"owner": {"reputation": 859, "user_id": 2156825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/077db5bd1a2dda03bdf6146de32e44c4?s=128&d=identicon&r=PG", "display_name": "lulijeta", "link": "https://stackoverflow.com/users/2156825/lulijeta"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1432118509, "post_id": 30345844, "comment_id": 48787225, "body": "@WojciechFrohmberg foo.so is not always the same so. Sometimes it is called a.so, sometimes b.so. It breaks the compilation at different stages. Sometimes the make output does not make much sense either, because it gets mixed from 8 different jobs, which is an expected disadvantage of distributing the compilation"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1432118799, "post_id": 30345844, "comment_id": 48787434, "body": "@lulijeta Yes because it problably depends which dependency isn&#39;t compiled at the time of linking..."}, {"owner": {"reputation": 859, "user_id": 2156825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/077db5bd1a2dda03bdf6146de32e44c4?s=128&d=identicon&r=PG", "display_name": "lulijeta", "link": "https://stackoverflow.com/users/2156825/lulijeta"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1432120947, "post_id": 30345844, "comment_id": 48788831, "body": "@WojciechFrohmberg It makes sense. How can I check the dependencies? I mean, the shared objects are there, since it has no problem compiling serial. It must be about timing / sequence of compilation of different parts. The problem is that the project is big and I lack the overview to all parts of it. Is there a way to see or detect the lacking dependencies?"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1432121764, "post_id": 30345844, "comment_id": 48789432, "body": "@lulijeta: The rules that create the a.so, b.so etc should look like <code>a.so: dependencies_of_a.so</code> and so on. The linking rule should be <code>executable: a.so b.so foo.so ...</code>"}], "owner": {"reputation": 859, "user_id": 2156825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/077db5bd1a2dda03bdf6146de32e44c4?s=128&d=identicon&r=PG", "display_name": "lulijeta", "link": "https://stackoverflow.com/users/2156825/lulijeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1432115050, "creation_date": 1432114533, "last_edit_date": 1432115050, "question_id": 30345844, "link": "https://stackoverflow.com/questions/30345844/executing-make-parallel-does-not-compile", "title": "executing make parallel does not compile", "body": "<p>I am working on a quite complex and big C/C++ project.\nWhen compiling the project using <code>make -j8</code>, it does not compile, although it compiles when running <code>make</code> plainly, without setting parallel jobs. It does not happen every time, but it happens very often. \nAs I mentioned, the project is big and complex and I fear that the dependencies are not set right in the make files. Do you think that's the issue? Any ideas how I could correct it? And why would it happen <em>only</em> very often and not every time?</p>\n\n<hr>\n\n<p>I forgot to add the make output:</p>\n\n<pre><code>foo.so: file not recognized: File truncated  \ncollect2: error: ld returned 1 exit status   \nmake[3]: ___ Error 1   \nmake[3]: Leaving directory ___  \nmake[2]: ___ Error 2   \nmake[2]: Leaving directory ___  \n=====================================================================   make[1]: ___ Error 1   \nmake[1]: Leaving directory ___   \nmake: ___ Error 1   \nmake: *** Waiting for unfinished jobs....   \nmake[3]: Leaving directory ___ make[2]: Leaving directory ___  \n=====================================================================   make[1]: Leaving directory ___  \n</code></pre>\n"}, {"tags": ["c++", "c", "parsing", "ffmpeg", "h.264"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4683544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27185467f3f06f6f600c441f75fb6e96?s=128&d=identicon&r=PG&f=1", "display_name": "Yoohoo", "link": "https://stackoverflow.com/users/4683544/yoohoo"}, "edited": false, "score": 0, "creation_date": 1432190633, "post_id": 30346309, "comment_id": 48823650, "body": "that helps, but still got many other errors, it should be c-c++ incapable, thank you very much"}], "tags": [], "owner": {"reputation": 98, "user_id": 4117270, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/000c959050f333ebdd48d4a9868bc25d?s=128&d=identicon&r=PG&f=1", "display_name": "Kuldeep More", "link": "https://stackoverflow.com/users/4117270/kuldeep-more"}, "is_accepted": true, "score": 1, "last_activity_date": 1432115782, "creation_date": 1432115782, "answer_id": 30346309, "question_id": 30345495, "link": "https://stackoverflow.com/questions/30345495/ffmpeg-h264-parsing/30346309#30346309", "title": "FFmpeg H264 parsing", "body": "<p>In main() function of your code </p>\n\n<pre><code>  char *arghwtf = malloc(INBUF_SIZE);\n</code></pre>\n\n<p>You have allocated memory by using malloc function which returns void * , and you are assigning this void * to char * that's why you are getting errors. You have to typecast it into char *.</p>\n\n<p>Instead try this.</p>\n\n<pre><code> char *arghwtf =(char *) malloc(INBUF_SIZE);\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 4683544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27185467f3f06f6f600c441f75fb6e96?s=128&d=identicon&r=PG&f=1", "display_name": "Yoohoo", "link": "https://stackoverflow.com/users/4683544/yoohoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2912, "favorite_count": 0, "accepted_answer_id": 30346309, "answer_count": 1, "score": 1, "last_activity_date": 1432115782, "creation_date": 1432113756, "question_id": 30345495, "link": "https://stackoverflow.com/questions/30345495/ffmpeg-h264-parsing", "title": "FFmpeg H264 parsing", "body": "<p>I am using FFmpeg to decoding H.264 video, for the following program:</p>\n\n<pre><code>    #include &lt;stdlib.h&gt;\n    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;signal.h&gt;\n\n    #include &lt;sys/time.h&gt;\n    #include &lt;time.h&gt;\n\n#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libavutil/mathematics.h&gt;\n\n#include &lt;SDL/SDL.h&gt;\n\nvoid sigint_handler(int signal) {\n    printf(\"\\n\");\n    exit(0);\n}\n\nconst char *window_title;\nSDL_Surface *screen;\nSDL_Overlay *yuv_overlay;\n\n#define INBUF_SIZE 80000\n\n/*\n * Video decoding example\n */\n\nstatic long get_time_diff(struct timeval time_now) {\n   struct timeval time_now2;\n   gettimeofday(&amp;time_now2,0);\n   return time_now2.tv_sec*1.e6 - time_now.tv_sec*1.e6 + time_now2.tv_usec - time_now.tv_usec;\n}\n\nint video_open(AVCodecContext *avctx, const char *filename){\n    int flags = SDL_HWSURFACE|SDL_ASYNCBLIT|SDL_HWACCEL;\n    int w,h;\n\n    flags |= SDL_RESIZABLE;\n\n    if (avctx-&gt;width){\n        w = avctx-&gt;width;\n        h = avctx-&gt;height;\n    } else {\n        w = 640;\n        h = 480;\n    }\n\n    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0) {\n    fprintf(stderr, \"SDL_INIT_VIDEO failed!\\n\");\n    exit(1);\n    }\n\n    screen = SDL_SetVideoMode(w, h, 0, flags);\n\n    if (!screen) {\n        fprintf(stderr, \"SDL: could not set video mode - exiting\\n\");\n        return -1;\n    }\n    if (!window_title)\n        window_title = filename;\n    SDL_WM_SetCaption(window_title, window_title);\n\n    yuv_overlay = SDL_CreateYUVOverlay(w, h, SDL_YV12_OVERLAY, screen);\n\n    if (yuv_overlay-&gt;hw_overlay) {\n    fprintf(stderr, \"Using hardware overlay!\\n\");\n    }\n\n    return 0;\n}\n\nint main(int argc, char **argv) {\n    AVCodec *codec;\n    AVCodecContext *c= NULL;\n    AVCodecParserContext *parser = NULL;\n    int frame, got_picture, len2, len;\n    const char *filename;\n    FILE *f;\n    AVFrame *picture;\n    char *arghwtf = malloc(INBUF_SIZE);\n    char *luma = NULL;\n    char *chroma = NULL;\n    int i=0;\n    uint64_t in_len;\n    int pts, dts;\n    struct timeval t;\n    float inv_fps = 1e6/23.98;\n    AVPacket avpkt;\n    SDL_Rect rect;\n\n\n    /* register all the codecs */\n    avcodec_register_all();\n\n    filename = argv[1];\n\n    av_init_packet(&amp;avpkt);\n\n    printf(\"Decoding file %s...\\n\", filename);\n\n    /* find the H.264 video decoder */\n    codec = avcodec_find_decoder(CODEC_ID_H264);\n    if (!codec) {\n        fprintf(stderr, \"codec not found\\n\");\n        exit(1);\n    }\n\n    c = avcodec_alloc_context3(codec);\n    picture = avcodec_alloc_frame();\n\n    c-&gt;skip_loop_filter = 48; // skiploopfilter=all\n\n    if (avcodec_open(c, codec) &lt; 0) {\n        fprintf(stderr, \"could not open codec\\n\");\n        exit(1);\n    }\n\n    /* the codec gives us the frame size, in samples */\n    parser = av_parser_init(c-&gt;codec_id);\n    parser-&gt;flags |= PARSER_FLAG_ONCE;\n\n    f = fopen(filename, \"rb\");\n    if (!f) {\n        fprintf(stderr, \"could not open %s\\n\", filename);\n        exit(1);\n    }\n\n    frame = 0;\n    gettimeofday(&amp;t, 0);\n    if(fread(arghwtf, 1, INBUF_SIZE, f) == 0) {\n    exit(1);\n    }\n    in_len = 80000;\n        while (in_len &gt; 0 &amp;&amp; !feof(f)) {\n        len = av_parser_parse2(parser, c, &amp;avpkt.data, &amp;avpkt.size, arghwtf, in_len,\n                                   pts, dts, AV_NOPTS_VALUE);\n\n            len2 = avcodec_decode_video2(c, picture, &amp;got_picture, &amp;avpkt);\n            if (len2 &lt; 0) {\n                fprintf(stderr, \"Error while decoding frame %d\\n\", frame);\n                exit(1);\n            }\n            if (got_picture) {\n        if(!screen) {\n            video_open(c, filename);\n\n            rect.x = 0;\n            rect.y = 0;\n            rect.w = c-&gt;width;\n            rect.h = c-&gt;height;\n            inv_fps = av_q2d(c-&gt;time_base);\n            fprintf(stderr, \"w:%i h:%i\\n\", rect.w, rect.h);\n\n            luma = malloc(c-&gt;width*c-&gt;height);\n            chroma = malloc(c-&gt;width*c-&gt;height/4);\n\n            SDL_DisplayYUVOverlay(yuv_overlay, &amp;rect);\n\n            signal(SIGINT, sigint_handler);\n        }\n                fprintf(stderr, \"\\rDisplaying %c:frame %3d (%02d:%02d)...\", av_get_pict_type_char(picture-&gt;pict_type), frame, frame/1440, (frame/24)%60);\n                fflush(stderr);\n\n        SDL_LockYUVOverlay(yuv_overlay);\n\n                for(i=0;i&lt;c-&gt;height;i++) {\n                  memcpy(luma + i * c-&gt;width, picture-&gt;data[0] + i * picture-&gt;linesize[0], c-&gt;width);\n                }\n        memcpy(yuv_overlay-&gt;pixels[0], luma, c-&gt;width * c-&gt;height);\n                for(i=0;i&lt;c-&gt;height/2;i++) {\n                  memcpy(chroma + i * c-&gt;width/2, picture-&gt;data[2] + i * picture-&gt;linesize[2], c-&gt;width/2);\n                }\n        memcpy(yuv_overlay-&gt;pixels[1], chroma, c-&gt;width * c-&gt;height / 4);\n                for(i=0;i&lt;c-&gt;height/2;i++) {\n                  memcpy(chroma + i * c-&gt;width/2, picture-&gt;data[1] + i * picture-&gt;linesize[1], c-&gt;width/2);\n                }\n        memcpy(yuv_overlay-&gt;pixels[2], chroma, c-&gt;width * c-&gt;height / 4);\n\n        SDL_UnlockYUVOverlay(yuv_overlay);\n        SDL_DisplayYUVOverlay(yuv_overlay, &amp;rect);\n\n        while(get_time_diff(t) &lt; inv_fps) {\n            sleep(1000);\n        }\n                frame++;\n        gettimeofday(&amp;t, 0);\n            }\n        memcpy(arghwtf, arghwtf + len, 80000-len);\n        fread(arghwtf + 80000 - len, 1, len, f);\n        }\n\n    /* some codecs, such as MPEG, transmit the I and P frame with a\n       latency of one frame. You must do the following to have a\n       chance to get the last frame of the video */\n    avpkt.data = NULL;\n    avpkt.size = 0;\n    len = avcodec_decode_video2(c, picture, &amp;got_picture, &amp;avpkt);\n    if (got_picture) {\n        printf(\"saving last frame %3d\\n\", frame);\n        fflush(stdout);\n\n    /* Display last frame here, same code as in the decoding loop above. */\n\n        frame++;\n    }\n\n    fclose(f);\n\n    avcodec_close(c);\n    av_free(c);\n    av_free(picture);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>It gives error:</p>\n\n<pre><code>||=== H264_decoding, Debug ===|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp||In function \u2018int main(int, char**)\u2019:|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|107|error: invalid conversion from \u2018void*\u2019 to \u2018char*\u2019 [-fpermissive]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|136|warning: \u2018AVFrame* avcodec_alloc_frame()\u2019 is deprecated (declared at /home/yoohoo/ffmpeg_build/include/libavcodec/avcodec.h:3629) [-Wdeprecated-declarations]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|136|warning: \u2018AVFrame* avcodec_alloc_frame()\u2019 is deprecated (declared at /home/yoohoo/ffmpeg_build/include/libavcodec/avcodec.h:3629) [-Wdeprecated-declarations]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|138|error: invalid conversion from \u2018int\u2019 to \u2018AVDiscard\u2019 [-fpermissive]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|140|error: \u2018avcodec_open\u2019 was not declared in this scope|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|163|error: invalid conversion from \u2018char*\u2019 to \u2018const uint8_t* {aka const unsigned char*}\u2019 [-fpermissive]|\n/home/yoohoo/ffmpeg_build/include/libavcodec/avcodec.h|4465|error:   initializing argument 5 of \u2018int av_parser_parse2(AVCodecParserContext*, AVCodecContext*, uint8_t**, int*, const uint8_t*, int, int64_t, int64_t, int64_t)\u2019 [-fpermissive]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|181|error: invalid conversion from \u2018void*\u2019 to \u2018char*\u2019 [-fpermissive]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|182|error: invalid conversion from \u2018void*\u2019 to \u2018char*\u2019 [-fpermissive]|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|188|error: \u2018av_get_pict_type_char\u2019 was not declared in this scope|\n/home/yoohoo/codeblocks/Real-time video streaming/H264_decoding/main.cpp|210|error: \u2018sleep\u2019 was not declared in this scope|\n||=== Build finished: 9 errors, 2 warnings ===|\n</code></pre>\n\n<p>I am wondering it is an incompatible problem due to I move this C program to C++, but I finally need to use it in C++. How to solve these invalid conversion problem? Thanks in advance!</p>\n"}, {"tags": ["c", "pointers", "struct", "doubly-linked-list"], "comments": [{"owner": {"reputation": 2083, "user_id": 4226229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128d08a5af2ca422365a5b6c542b7263?s=128&d=identicon&r=PG&f=1", "display_name": "Anna Tomanek", "link": "https://stackoverflow.com/users/4226229/anna-tomanek"}, "edited": false, "score": 0, "creation_date": 1432113811, "post_id": 30345449, "comment_id": 48783767, "body": "It would help if you explained what the result was. Any errors thrown?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1432113910, "post_id": 30345449, "comment_id": 48783837, "body": "<a href=\"http://stackoverflow.com/a/605858/28169\">Please don&#39;t cast the return value of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 3, "user_id": 4919540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3194364922027fa94778b52e62c91f?s=128&d=identicon&r=PG&f=1", "display_name": "john scott", "link": "https://stackoverflow.com/users/4919540/john-scott"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432114906, "post_id": 30345449, "comment_id": 48784589, "body": "But then it&#39;s giving error cant convert void* to dlink * @unwind"}, {"owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1432114983, "post_id": 30345449, "comment_id": 48784643, "body": "A double linked list, having a pointer only to the first element (and having to write a loop to find the last one) definitely defeats its purpose   You should represent a list as a pair of pointers,     ` struct  list { struct dlink *first, *last, };`"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432115030, "post_id": 30345449, "comment_id": 48784682, "body": "@johnscott Then you&#39;re not compiling with a C compiler."}, {"owner": {"reputation": 3, "user_id": 4919540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3194364922027fa94778b52e62c91f?s=128&d=identicon&r=PG&f=1", "display_name": "john scott", "link": "https://stackoverflow.com/users/4919540/john-scott"}, "reply_to_user": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1432115095, "post_id": 30345449, "comment_id": 48784730, "body": "i am having *plink &amp; *nlink for that purpose @MichelBillaud"}, {"owner": {"reputation": 3, "user_id": 4919540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3194364922027fa94778b52e62c91f?s=128&d=identicon&r=PG&f=1", "display_name": "john scott", "link": "https://stackoverflow.com/users/4919540/john-scott"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432115137, "post_id": 30345449, "comment_id": 48784762, "body": "i am using turbo C++ @unwind"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432115640, "post_id": 30345449, "comment_id": 48785152, "body": "Won&#39;t compile with MSCV - <code>&#39;dlink&#39; : undeclared identifier</code>. It should be <code>struct dlink</code> since you have not typedefed <code>dlink</code>. You have also omitted function prototypes so the compiler won&#39;t be able to call the functions correctly."}, {"owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1432117173, "post_id": 30345449, "comment_id": 48786337, "body": "@johnscott : plink and nlink are for previous and next elements.  First and last are another story - you could also store a count inside. You append function should be <code>void append(struct list *l, int n)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1432117812, "creation_date": 1432117812, "answer_id": 30347029, "question_id": 30345449, "link": "https://stackoverflow.com/questions/30345449/sorting-of-double-linked-list-in-c/30347029#30347029", "title": "Sorting of double linked list in C", "body": "<p>Look at this part</p>\n\n<pre><code>int a=count(*q);\nfor(int i=0; i&lt;a; i++,temp=temp-&gt;nlink)\n   {\n      s=temp-&gt;nlink;\n      for(int j=i+1; j&lt;=a; j++,s=s-&gt;nlink)\n      { ....\n</code></pre>\n\n<p>Seems you are using indexes from <code>0</code> (first loop) to <code>count(*q)</code> (second) for a list with <code>count(*g)</code> elements. </p>\n\n<p>Something is probably wrong in your algorithm - even if it doesnt cause \"index out of bounds\" errors (because you don't use arrays).</p>\n\n<p>And it appears when you try to sort the second way, because you have not tested the first way seriously enough.</p>\n"}], "owner": {"reputation": 3, "user_id": 4919540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3194364922027fa94778b52e62c91f?s=128&d=identicon&r=PG&f=1", "display_name": "john scott", "link": "https://stackoverflow.com/users/4919540/john-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1432117812, "creation_date": 1432113654, "last_edit_date": 1432114309, "question_id": 30345449, "link": "https://stackoverflow.com/questions/30345449/sorting-of-double-linked-list-in-c", "title": "Sorting of double linked list in C", "body": "<p>I created a program to sort double linked list in ascending order, and the result was unexpected, but when I used the same program for descending order by changing  a line in it, it worked perfectly. Please tell where m going wrong </p>\n\n<pre><code>/*Structure of double linked list */ \n    struct dlink\n    {\n        int num;\n        struct dlink *plink; //previous address\n        struct dlink *nlink; //next address\n    };\n            void main()\n            {\n                clrscr();\n                struct dlink *st;\n                st=NULL;\n\n                append(&amp;st,100); //to put values in double linked list\n                append(&amp;st,32);\n                append(&amp;st,200);\n                append(&amp;st,107);\n                display(st);\n                ascending(&amp;st);\n                display(st);\n                getch();\n            }\n       /* function to add values to double linked list */ \n        void append(struct dlink **q,int n)\n        {\n            struct dlink *temp,*r;\n            temp=*q;\n\n            if(temp==NULL)\n            {\n                temp=(dlink *)malloc(sizeof(dlink));\n                temp-&gt;num=n;\n                temp-&gt;plink=NULL;\n                temp-&gt;nlink=NULL;\n                *q=temp;\n            }\n            else\n            {\n                while(temp-&gt;nlink!=NULL)\n                    temp=temp-&gt;nlink;\n                r=(dlink *)malloc(sizeof(dlink));\n                r-&gt;num=n;\n                r-&gt;nlink=NULL;\n                r-&gt;plink=temp;\n                temp-&gt;nlink=r;\n            }\n        }\n\n\n            void ascending(struct dlink **q)\n            {\n                struct dlink *temp,*s,*p=NULL;\n                temp=*q;\n                int a=count(*q);\n                printf(\" a %d \",a);\n\n                for(int i=0;i&lt;a;i++,temp=temp-&gt;nlink)\n\n                {\n                    s=temp-&gt;nlink;\n                    for(int j=i+1;j&lt;=a;j++,s=s-&gt;nlink)\n                    {\n                           if((temp-&gt;num) &lt;  (s-&gt;num)) //for ascending i was using //if(temp-&gt;num &gt; s-&gt;num but it is not getting desired result it is just printing //one value and by this one for descending order program is working perfectly //for descending order\n                        {       \n                                (s-&gt;plink)-&gt;nlink=s-&gt;nlink;\n                                if(s-&gt;nlink!=NULL)\n                                    (s-&gt;nlink)-&gt;plink=s-&gt;plink;\n\n                                s-&gt;plink=temp-&gt;plink;\n                                s-&gt;nlink=temp;\n                                temp=s;\n                                (temp-&gt;nlink)-&gt;plink=temp;\n                        }\n                    }\n                    if(i==0)\n                        *q=temp;\n\n                      if(i!=0)\n                    {\n                        p-&gt;nlink=temp;\n                        temp-&gt;plink=p;\n                    }\n                       p=temp;\n\n\n                }\n                temp=*q;   \n                /* To see if the addresse , previous address , next address are correct */ \n                while(temp!=NULL)\n                    {\n                        printf(\"as %u %u %u\\n\",temp-&gt;plink,temp-&gt;nlink,temp);\n                        temp=temp-&gt;nlink;\n                    }   \n            }\n</code></pre>\n"}, {"tags": ["c", "pointers", "void"], "comments": [{"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1432113925, "post_id": 30345445, "comment_id": 48783849, "body": "What&#39;s the platform and CPU where you&#39;ll run this code?"}, {"owner": {"reputation": 7267, "user_id": 1051621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAEvg.jpg?s=128&g=1", "display_name": "Mark Shevchenko", "link": "https://stackoverflow.com/users/1051621/mark-shevchenko"}, "edited": false, "score": 8, "creation_date": 1432114066, "post_id": 30345445, "comment_id": 48783964, "body": "This statement may be used, if your try to call a procedure with a well-known fixed address, f.e. a BIOS procedure. In old IBM PC you could call <code>(void (*far)())0xFFFFFFF0ul</code>. This procedure restarts the PC."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 8, "creation_date": 1432121053, "post_id": 30345445, "comment_id": 48788909, "body": "I feel like this has a side meaning of &quot;F**k you&quot; when you find it in code you&#39;re supposed to maintain. Then again, as a non-C dev, all C looks like an incomprehensible mess to me, so I could well be dead wrong."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1432137878, "post_id": 30345445, "comment_id": 48801952, "body": "cdecl can&#39;t quite explain this one, but <a href=\"http://cdecl.ridiculousfish.com/?q=explain+%28void+%28%2A%29%28%29%29foo\" rel=\"nofollow noreferrer\">with minor modifications</a> it spits out a perfectly readable English description."}, {"owner": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1432138218, "post_id": 30345445, "comment_id": 48802193, "body": "@QPaysTaxes once you get a little bit used to the C/C++ (member) function pointer notation then it is actually fairly easy to read that. However still casting a literal to a function pointer and call it is quite a &quot;WTF&quot; operation... unless you are writing beyond an OS."}, {"owner": {"reputation": 1976, "user_id": 1825795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ce7ea9ccd1d09d51d16aa31328f03db9?s=128&d=identicon&r=PG", "display_name": "Koushik Shetty", "link": "https://stackoverflow.com/users/1825795/koushik-shetty"}, "edited": false, "score": 0, "creation_date": 1432563211, "post_id": 30345445, "comment_id": 48963155, "body": "just a fact: this exact code is used in TI&#39;s MSP430 series controllers to jump to BSL(Bootstrap loader) location i&#39;ve seen and used it in the 5xx and the 2xx series."}], "answers": [{"comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1432114540, "post_id": 30345510, "comment_id": 48784324, "body": "Not quite right. Also <code>void (*)()</code> is a pointer, but it&#39;s not a valid declaration statement in some cases, because of the missing identifier for that pointer. This declaration is valid: <code>void call_a_ptr(void(*)());</code> - it declares a function that takes a pointer to a function which returns void and takes no arguments."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 18, "last_activity_date": 1432118288, "last_edit_date": 1432118288, "creation_date": 1432113800, "answer_id": 30345510, "question_id": 30345445, "link": "https://stackoverflow.com/questions/30345445/what-does-void-0x1000-mean/30345510#30345510", "title": "What does `((void (*)())0x1000)();` mean?", "body": "<p><code>(void (*)())</code> is a pointer to a function returning <code>void</code> and taking an unspecified, but fixed, number of arguments.</p>\n\n<p><code>(void (*)())0x1000</code> is <em>casting</em> the literal <code>0x1000</code> to the above type.</p>\n\n<p>Finally, the suffixed <code>()</code> <em>calls</em> that function. The expression preceding that needs to be in brackets otherwise the suffixed <code>()</code> will bind to the <code>0x1000</code> which is not syntactically valid.</p>\n\n<p>It's down to you to check if the casting is actually valid. If not then the behaviour of your program is <em>undefined</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 9, "creation_date": 1432114171, "post_id": 30345657, "comment_id": 48784038, "body": "... function which takes an unspecified, but fixed, number of arguments. To be a function taking no arguments it should be <code>void (*)(void)</code>"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1489768897, "post_id": 30345657, "comment_id": 72831897, "body": "&quot;<i>(oops, see the comment by pmg)</i>&quot; Why not <a href=\"https://stackoverflow.com/posts/30345657/edit\">edit</a> your answer to include that?"}], "tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 13, "last_activity_date": 1432116001, "last_edit_date": 1495542322, "creation_date": 1432114126, "answer_id": 30345657, "question_id": 30345445, "link": "https://stackoverflow.com/questions/30345445/what-does-void-0x1000-mean/30345657#30345657", "title": "What does `((void (*)())0x1000)();` mean?", "body": "<p>A constant</p>\n\n<pre><code>0x1000\n</code></pre>\n\n<p>gets cast to a type:</p>\n\n<pre><code>(type)0x1000\n</code></pre>\n\n<p>The type is <code>void (*)()</code> \u2014 a pointer (asterisk) to a function which takes no parameters (empty parentheses on the right) (oops, see <a href=\"https://stackoverflow.com/questions/30345445/#comment48784038_30345657\">the comment by pmg</a>) and returns no value (<code>void</code> on the left). Additional parens on the asterisk prevent associating it to <code>void</code>, which would incorrectly create a <code>void *</code> type here.</p>\n\n<p>So after the cast you have a pointer to a parameter-less void function at the addres 0x1000:</p>\n\n<pre><code>(void (*)())0x1000\n</code></pre>\n\n<p>And that function...</p>\n\n<pre><code>((void (*)())0x1000)\n</code></pre>\n\n<p>gets called by adding an empty parameters list:</p>\n\n<pre><code>((void (*)())0x1000)();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 46, "last_activity_date": 1432119864, "last_edit_date": 1432119864, "creation_date": 1432114795, "answer_id": 30345939, "question_id": 30345445, "link": "https://stackoverflow.com/questions/30345445/what-does-void-0x1000-mean/30345939#30345939", "title": "What does `((void (*)())0x1000)();` mean?", "body": "<p><code>C</code> declarations are decoded from inside out using a simple rule: start from the identifier and check on the right side for <code>[]</code> (array) or <code>()</code> (function) then check on the left side for the type of the values (stored in the array or returned by the function), without crossing the parentheses; escape from the parentheses and repeat.</p>\n\n<p>For example:</p>\n\n<pre><code>void (*p)()\n</code></pre>\n\n<p><code>p</code> is (nothing on the right) <em>a pointer</em> (on the left, don't cross the parentheses) <em>to</em> (escape the parentheses, read the next level) <em>a function</em> (right) <em>that returns nothing</em> (left).</p>\n\n<p>When the identifier (<code>p</code> in this case) is missing, all that remains is a type declaration.</p>\n\n<p>A type enclosed in parentheses, put in front of a value is a type cast.</p>\n\n<pre><code>(void (*)())0x1000\n</code></pre>\n\n<p>converts the number <code>0x1000</code> to a <em>pointer to a function that doesn't return anything</em> (see what's outside the parentheses in the paragraph about the declaration of <code>p</code> above).</p>\n\n<p>On the next level, the expression above (a pointer to a function can be used in the same way as a function name) is used to execute the code pointed at.</p>\n\n<p>See below the entire expression de-composed:</p>\n\n<pre><code>(\n  (\n    void (*)()   /* type: pointer to function that doesn't return anything     */\n  )0x1000        /* value 0x1000 treated as a value of the type declared above */\n)                /* enclose in parentheses to specify the order of evaluation  */ \n();              /* the pointer above used as a function name to run the code  */\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2317, "user_id": 1858296, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c17e1958b8bae919289c0a71f96922f7?s=128&d=identicon&r=PG", "display_name": "Arturo Torres S&#225;nchez", "link": "https://stackoverflow.com/users/1858296/arturo-torres-s%c3%a1nchez"}, "edited": false, "score": 2, "creation_date": 1432131030, "post_id": 30348056, "comment_id": 48796673, "body": "Yes, but this doesn&#39;t explain why the other syntax does what it does."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2317, "user_id": 1858296, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c17e1958b8bae919289c0a71f96922f7?s=128&d=identicon&r=PG", "display_name": "Arturo Torres S&#225;nchez", "link": "https://stackoverflow.com/users/1858296/arturo-torres-s%c3%a1nchez"}, "edited": false, "score": 0, "creation_date": 1432133433, "post_id": 30348056, "comment_id": 48798628, "body": "@ArturoTorresS&#225;nchez If you cast an integer to a function pointer, the integer will turn into the address of a function. Just like any other integer to pointer cast will turn an integer into an address. And then you call that function. What else is there to explain? I assume the OP is already familiar with how pointers work. This is not really complex code, the original was just a bit unreadable."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 6, "last_activity_date": 1432120531, "creation_date": 1432120531, "answer_id": 30348056, "question_id": 30345445, "link": "https://stackoverflow.com/questions/30345445/what-does-void-0x1000-mean/30348056#30348056", "title": "What does `((void (*)())0x1000)();` mean?", "body": "<p>The person who wrote that code should have rewritten it in a readable manner as:</p>\n\n<pre><code>#define ADDRESS_OF_FUNCTION_X 0x1000\n\ntypedef void (*func_ptr_t)(void);\n\n...\n\nfunc_ptr_t function_x = (func_ptr_t)ADDRESS_OF_FUNCTION_X;\nfunction_x();\n</code></pre>\n\n<p>What the code does is now pretty much self-documented.</p>\n"}], "owner": {"reputation": 1753, "user_id": 4637326, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1093075744051398/picture?type=large", "display_name": "Radoslaw Krasimirow", "link": "https://stackoverflow.com/users/4637326/radoslaw-krasimirow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3998, "favorite_count": 11, "closed_date": 1432138136, "accepted_answer_id": 30345939, "answer_count": 4, "score": 39, "last_activity_date": 1432120531, "creation_date": 1432113634, "last_edit_date": 1432114351, "question_id": 30345445, "link": "https://stackoverflow.com/questions/30345445/what-does-void-0x1000-mean", "closed_reason": "Duplicate", "title": "What does `((void (*)())0x1000)();` mean?", "body": "<p>Here is a code that purpose is to set the program counter to jump to address <code>0x1000</code>. I know what it does but I don't understand how. It is related to my lack of C language knowledge. May be you can enlighten me. Here is the statement/function (I even don't know what it is :))</p>\n\n<pre><code>((void (*)())0x1000)();\n</code></pre>\n\n<p>I thing it is pointer to a functions that returns <code>void</code> and accepts no argument. Please correct me if I am wrong.</p>\n"}, {"tags": ["java", "c++", "c", "performance", "code-cleanup"], "comments": [{"owner": {"reputation": 1658, "user_id": 1420839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/54b6fa2e7a734b6c61d5c96a2c907357?s=128&d=identicon&r=PG", "display_name": "Dragondraikk", "link": "https://stackoverflow.com/users/1420839/dragondraikk"}, "edited": false, "score": 0, "creation_date": 1432113255, "post_id": 30345191, "comment_id": 48783400, "body": "Why not run a benchmark test and see? Right now this seems rather homework-y"}, {"owner": {"reputation": 6418, "user_id": 2187273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/eAmJW.jpg?s=128&g=1", "display_name": "Laurent S.", "link": "https://stackoverflow.com/users/2187273/laurent-s"}, "edited": false, "score": 0, "creation_date": 1432113323, "post_id": 30345191, "comment_id": 48783437, "body": "This is quite subjective so might not be suited for SO but from where I see it, solution 1 is cleaner as you clearly split both processes so that if the number of iteration for a specific task changes you don&#39;t have to bother changing your test. That said, there&#39;s a thirs alternative : 1) Iterate from 0 to 9 and perform both tasks 2) second iteration from 10 to 19 only performing taskB"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1432113381, "post_id": 30345191, "comment_id": 48783479, "body": "The second is only good if you <i>must</i> do the tasks alternatingly for 10 steps. Otherwise, it doesn&#39;t express what the code is supposed to do, so you should write the first. It&#39;s very unlikely that incrementing an integer ten times more will make the slightest difference in performance."}, {"owner": {"reputation": 617, "user_id": 1829237, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ee86517a4453caa25b193a8a7b2c7e80?s=128&d=identicon&r=PG", "display_name": "Trung Nguyen", "link": "https://stackoverflow.com/users/1829237/trung-nguyen"}, "edited": false, "score": 0, "creation_date": 1432113513, "post_id": 30345191, "comment_id": 48783570, "body": "I want to ask for performance and clean code. This is a small example but in a large project I think it is a big problem."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1432113736, "post_id": 30345191, "comment_id": 48783714, "body": "@TrungNguyen A) what language? Might be that you are working an a project using C, C++ and java, but I have my doubts. B) Why do you think this is &quot;a big problem&quot; ?"}, {"owner": {"reputation": 617, "user_id": 1829237, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ee86517a4453caa25b193a8a7b2c7e80?s=128&d=identicon&r=PG", "display_name": "Trung Nguyen", "link": "https://stackoverflow.com/users/1829237/trung-nguyen"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1432114145, "post_id": 30345191, "comment_id": 48784019, "body": "@tobi303, A) yes, I asked for C, C++ and Java"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1432114372, "post_id": 30345191, "comment_id": 48784193, "body": "@TrungNguyen: You&#39;re really asking about three different languages? Sorry, too broad."}, {"owner": {"reputation": 617, "user_id": 1829237, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ee86517a4453caa25b193a8a7b2c7e80?s=128&d=identicon&r=PG", "display_name": "Trung Nguyen", "link": "https://stackoverflow.com/users/1829237/trung-nguyen"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1432114496, "post_id": 30345191, "comment_id": 48784287, "body": "@tobi303,  B)As my little knowledge,  I confuse that in a large project the solution 1 may raise many duplicate of code, but the solution 2 seems slower."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1432123915, "post_id": 30345191, "comment_id": 48790966, "body": "What do you mean with duplicate of code? The fact that you have 2 for loops?? And what do you mean with &quot;2 seems slower&quot;? Did you measure it? I dont see any reason why any of the two should be significantly slower/faster."}, {"owner": {"reputation": 50650, "user_id": 3182664, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2s35X.png?s=128&g=1", "display_name": "Marco13", "link": "https://stackoverflow.com/users/3182664/marco13"}, "edited": false, "score": 0, "creation_date": 1432125268, "post_id": 30345191, "comment_id": 48792005, "body": "The decision about whether a question is &quot;primarily opinion based&quot; seems to be <i>primarily opinion based</i>."}], "answers": [{"tags": [], "owner": {"reputation": 1577, "user_id": 2476976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18223b1af890df006c696524a81cf50c?s=128&d=identicon&r=PG", "display_name": "Kenneth Clark", "link": "https://stackoverflow.com/users/2476976/kenneth-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1432113258, "creation_date": 1432113258, "answer_id": 30345293, "question_id": 30345191, "link": "https://stackoverflow.com/questions/30345191/should-use-many-the-loop-or-one-loop-and-check-condition-inside/30345293#30345293", "title": "Should use many the loop or one loop and check condition inside", "body": "<p>According to your example solution 2 would be better based on the fact you only loop once. But you would have to account for what logic is in Task A vs Task B.  </p>\n"}, {"comments": [{"owner": {"reputation": 617, "user_id": 1829237, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ee86517a4453caa25b193a8a7b2c7e80?s=128&d=identicon&r=PG", "display_name": "Trung Nguyen", "link": "https://stackoverflow.com/users/1829237/trung-nguyen"}, "edited": false, "score": 0, "creation_date": 1432116227, "post_id": 30345338, "comment_id": 48785621, "body": "Thanks for your answer. Your solution is good. But please tell me about solution 1 and solution 2. The solution 1 do 30 loop times, the solution 2 do 20 loop times + 20 checking condition, so which are better."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 617, "user_id": 1829237, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ee86517a4453caa25b193a8a7b2c7e80?s=128&d=identicon&r=PG", "display_name": "Trung Nguyen", "link": "https://stackoverflow.com/users/1829237/trung-nguyen"}, "edited": false, "score": 0, "creation_date": 1432116496, "post_id": 30345338, "comment_id": 48785849, "body": "Just by comparing the loop counts, it can&#39;t be said whether it makes any difference. Technically, the the solution 2 (and my answer) could be better because they loop fewer times. But that in itself is not sufficient to make any performance claims. Execute both and measure the performance to see if it makes any difference."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1432113369, "creation_date": 1432113369, "answer_id": 30345338, "question_id": 30345191, "link": "https://stackoverflow.com/questions/30345191/should-use-many-the-loop-or-one-loop-and-check-condition-inside/30345338#30345338", "title": "Should use many the loop or one loop and check condition inside", "body": "<p>Whether it makes any performance difference is what taskA and taskB is. But IMO, having single loop with a condition (<code>i&gt;10</code>) is going to make the code less readable.</p>\n\n<p>So you could make the equivalent code in a cleaner way:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; ++i)\n{\n  // do taskA\n  // do taskB\n}\n\nfor (int i = 10; i &lt; 20; ++i)\n{\n  // do taskB\n}\n</code></pre>\n\n<p>This is equivalent to solution 2 and how much better depends on the tasks A and B.</p>\n"}, {"comments": [{"owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "reply_to_user": {"reputation": 481, "user_id": 2262795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ef9dcbb2c7b1d30e81fb78d867ee25?s=128&d=identicon&r=PG", "display_name": "ceekay", "link": "https://stackoverflow.com/users/2262795/ceekay"}, "edited": false, "score": 0, "creation_date": 1432114420, "post_id": 30345616, "comment_id": 48784226, "body": "@ceekay yup, thanks."}], "tags": [], "owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "is_accepted": false, "score": 1, "last_activity_date": 1432114402, "last_edit_date": 1432114402, "creation_date": 1432114013, "answer_id": 30345616, "question_id": 30345191, "link": "https://stackoverflow.com/questions/30345191/should-use-many-the-loop-or-one-loop-and-check-condition-inside/30345616#30345616", "title": "Should use many the loop or one loop and check condition inside", "body": "<p>As others mentioned, a lot depends on what type of task is performed in those loops. Although the default choice should be option 1 for readability. \nThere is one case though where option 1 <strong>should be</strong> the choice for reasons more than syntactic sugar. If task A and task B will work on their own memory blocks <a href=\"http://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"nofollow\">locality of reference</a> will in most likelihood outperform option 2.</p>\n\n<p>for eg:</p>\n\n<pre><code>for(int i = 0 ; i &lt; 10; i++){\n     doSomething = dataBlockForTaskA[i]; // lots of cache hits\n}\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>for (int j = 0; j &lt; 20; j++){\n    doSomething = dataBlockForTaskB[j]; // fetches some memory around BlockB\n    if ( j &lt; 10 ){\n         doSOmething = dataBlockForTaskA[j] // oops cache miss\n    }\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50650, "user_id": 3182664, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2s35X.png?s=128&g=1", "display_name": "Marco13", "link": "https://stackoverflow.com/users/3182664/marco13"}, "is_accepted": false, "score": 2, "last_activity_date": 1432118953, "last_edit_date": 1495540712, "creation_date": 1432118953, "answer_id": 30347472, "question_id": 30345191, "link": "https://stackoverflow.com/questions/30345191/should-use-many-the-loop-or-one-loop-and-check-condition-inside/30347472#30347472", "title": "Should use many the loop or one loop and check condition inside", "body": "<p>As already pointed out several times, it all depends on what the \"tasks\" are.</p>\n\n<p>One could argue about \"style\" or \"readability\", but this is clearly subjective. </p>\n\n<p>So there is not much left for an <em>objective</em> answer, except for two points:</p>\n\n<ul>\n<li>Common best practices</li>\n<li>Performance</li>\n</ul>\n\n<hr>\n\n<p>Regarding the Best Practices, I'd like to refer to <a href=\"http://en.wikipedia.org/wiki/Separation_of_concerns\" rel=\"nofollow noreferrer\">Separation Of Concerns</a>. If the tasks are completely independent (and they obviously are - otherwise you would not even have the chance to change the execution order), then the principle of <em>Separation of Concerns</em> suggests to put the execution into two separate loops. So this favors your <strong>first</strong> solution. One could even consider going one step further, and split these into two methods:</p>\n\n<pre><code>void executeA(int times) {\n    for (int i = 0; i &lt; times; ++i) {\n        // do taskA\n    }\n}\n\nvoid executeB(int times) {\n    for (int i = 0; i &lt; times; ++i) {\n        // do taskB\n    }\n}\n</code></pre>\n\n<p>and replace the loops with these methods:</p>\n\n<pre><code>executeA(10);\nexecuteB(20);\n</code></pre>\n\n<p>(going even further is possible here, but may miss the point of the question)</p>\n\n<hr>\n\n<p>Regarding the performance, there will usually not be much difference, although details may depend on the tasks and the compiler. Modern compilers are optimizing pretty well, and <em>might</em> even unroll the loops, so that the first solution would be equivalent to</p>\n\n<pre><code>taskA();\n... // 10 times\ntaskA();\ntaskB();\n... // 20 times\ntaskB();\n</code></pre>\n\n<p>and the second solution would be equivalent to</p>\n\n<pre><code>taskB();\ntaskA();\n... // 10 times\ntaskB();\ntaskA();\ntaskB();\ntaskB();\n... // 10 times\ntaskB();\ntaskB();\n</code></pre>\n\n<p>Even if the loops are not unrolled, <a href=\"http://en.wikipedia.org/wiki/Branch_predictor\" rel=\"nofollow noreferrer\">Branch Prediction</a> will take care of the <code>if</code>. However, the <strong>first</strong> solution would then still be preferable for several reasons:</p>\n\n<ul>\n<li>(Data) locality, as pointed out <a href=\"https://stackoverflow.com/a/30345616/3182664\">by bashrc</a></li>\n<li>Possible nitty-gritty <a href=\"http://shipilev.net/blog/2015/black-magic-method-dispatch/\" rel=\"nofollow noreferrer\">compiler- and language specific details</a></li>\n<li>The possibility to <em>parallelize</em> the loops.</li>\n</ul>\n\n<p>The latter refers to the fact that you can trivially parallelize a simple loop like</p>\n\n<pre><code>for (int i = 0; i &lt; times; ++i) {\n    taskA();\n}\n</code></pre>\n\n<p>For example, in Java (or C++, given that you have an appropriate infrastructure), you can simply throw 10 instances of <code>taskA</code> into a thread pool. Also annotating such a loop with something like <code>#pragma omp parallel</code> is easily possible (although I'm not familiar with OpenMP). If there is an <code>if</code>-condition, this will interfere with most parallelization approaches.</p>\n\n<p>So based on these observations, I'd vote for <strong>solution 1</strong>.</p>\n"}], "owner": {"reputation": 617, "user_id": 1829237, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ee86517a4453caa25b193a8a7b2c7e80?s=128&d=identicon&r=PG", "display_name": "Trung Nguyen", "link": "https://stackoverflow.com/users/1829237/trung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1432122392, "accepted_answer_id": 30345338, "answer_count": 4, "score": 0, "last_activity_date": 1432118953, "creation_date": 1432112999, "last_edit_date": 1432113113, "question_id": 30345191, "link": "https://stackoverflow.com/questions/30345191/should-use-many-the-loop-or-one-loop-and-check-condition-inside", "closed_reason": "Opinion-based", "title": "Should use many the loop or one loop and check condition inside", "body": "<p>I have 2 tasks TaskA and TaskB, TaskA will be processed 10 times, taskB will be processed 20 times. Now there are two solutions to do as below\nSolution 1:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; ++i)\n{\n   // do taskA\n}\nfor (int i = 0; i &lt; 20; ++i)\n{\n   // do taskB\n}\n</code></pre>\n\n<p>Solution 2:</p>\n\n<pre><code>for (int i = 0; i &lt; 20; ++i)\n{\n    if (i &lt; 10)\n    { \n        //do taskA\n    }\n   // do taskB\n}\n</code></pre>\n\n<p>I want to ask either solution 1 or solution 2 is better for performance and clean code?</p>\n"}, {"tags": ["c", "ncurses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1432389822, "post_id": 30345083, "comment_id": 48913371, "body": "That&#39;s actually two questions, and since there is no complete test program, there&#39;s nothing left to answer."}, {"owner": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1432542394, "post_id": 30345083, "comment_id": 48951786, "body": "I don&#39;t see, why is this two question. But I have made it work anyway, so you are right there is nothing left to answer. I will paste the solution and close the question."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1432542421, "post_id": 30345083, "comment_id": 48951801, "body": "I&#39;m writing a solution now."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 0, "creation_date": 1432194024, "post_id": 30360939, "comment_id": 48825595, "body": "Even if I change the key of the pair to something different than 0, it has no effect."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1432542461, "last_edit_date": 1432542461, "creation_date": 1432158306, "answer_id": 30360939, "question_id": 30345083, "link": "https://stackoverflow.com/questions/30345083/ncurses-colors-in-pad/30360939#30360939", "title": "NCURSES - colors in pad", "body": "<p>Color pair 0 is special, because (referring to the <a href=\"http://invisible-island.net/ncurses/man/curs_color.3x.html\" rel=\"nofollow\">manual page</a>) it is always the default foreground and background colors:</p>\n\n<blockquote>\n  <p>Color  pair  0 is assumed to be white on black, but is\n  actually whatever the terminal implements before color\n  is initialized.  It cannot be modified by the application.</p>\n</blockquote>\n\n<p>There are three components of color pairs which combine to form a cell's color (see <a href=\"http://invisible-island.net/ncurses/man/curs_color.3x.html#h3-Color-Rendering\" rel=\"nofollow\">manual page</a>):</p>\n\n<ul>\n<li>background character</li>\n<li>window attribute set via wattron, etc.</li>\n<li>video attributes (including COLOR_PAIR value) passed in the parameter to waddch.</li>\n</ul>\n\n<p>The last two affect the result if a nonzero color-pair is passed; otherwise they do not (and the preceding item on the list is used).  These are all <em>window</em> operations.  The functions attron/attron apply to <code>stdscr</code>, not to the pad or window <code>p</code>.  If those were changed to <code>wattron(p,COLOR_PAIR(3));</code>, etc., the result would be improved.</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 0, "creation_date": 1432227506, "post_id": 30379757, "comment_id": 48849142, "body": "Again, I have tried to change the number of the key, nothing has changed. Please see the edit."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 0, "creation_date": 1432244904, "post_id": 30379757, "comment_id": 48859032, "body": "suggest refreshing the pad &#39;prefresh(); after changing the contents of the pad"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 0, "creation_date": 1432244969, "post_id": 30379757, "comment_id": 48859064, "body": "I think... before defining init_color(3...) that the entries for 1 and 2 need to be defined"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 1, "creation_date": 1432245375, "post_id": 30379757, "comment_id": 48859246, "body": "this is one way to include the color attributes to a char:   &#39; waddch( p, str[i] | COLOR_PAIR(3) )&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 0, "creation_date": 1432245808, "post_id": 30379757, "comment_id": 48859444, "body": "you might want to use the &#39;touchwin()&#39; function after the attron() function (and again after the attoff() function to update the pad attributes"}, {"owner": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "edited": false, "score": 0, "creation_date": 1432245940, "post_id": 30379757, "comment_id": 48859507, "body": "Yay, &#39; waddch( p, str[i] | COLOR_PAIR(3) )&#39;  made it and now everything is displayed properly :). Post it as answer and I will tag it as solution.Thanks."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": -1, "last_activity_date": 1432226832, "creation_date": 1432226832, "answer_id": 30379757, "question_id": 30345083, "link": "https://stackoverflow.com/questions/30345083/ncurses-colors-in-pad/30379757#30379757", "title": "NCURSES - colors in pad", "body": "<p>this excerpt from the man pages for ncurses indicates the problem is using color pair 0.</p>\n\n<h2>The init_pair routine changes the definition of a color-pair. It takes three arguments: the number of the color-pair to be changed, the foreground color number, and the background color number. For portable applications:</h2>\n\n<p>The value of the first argument must be between <strong>1 and COLOR_PAIRS-1</strong>, except that if default colors are used (see use_default_colors) the upper limit is adjusted to allow for extra pairs which use a default color in foreground and/or background. \"  emphasis mine</p>\n"}], "owner": {"reputation": 173, "user_id": 2336375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yopr6.jpg?s=128&g=1", "display_name": "MartinVotruba", "link": "https://stackoverflow.com/users/2336375/martinvotruba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432542461, "creation_date": 1432112735, "last_edit_date": 1432227421, "question_id": 30345083, "link": "https://stackoverflow.com/questions/30345083/ncurses-colors-in-pad", "title": "NCURSES - colors in pad", "body": "<p>I am writing an application in ncurses and I am dealing with colour displaying in pads. I add some text into pad <code>p</code> with colour attribute on like this:</p>\n\n<pre><code>    if(has_colors())\n        start_color();\n    init_pair(0, COLOR_GREEN, COLOR_BLACK);\n    attron(COLOR_PAIR(0));\n    while( (ch=fgetc(f)) != EOF){\n            waddch(p,ch);\n    }\n    attroff(COLOR_PAIR(0));\n    fclose(f);\n</code></pre>\n\n<p>But then when I display part of the tab with <code>prefresh(p,0, 0, 0,0, LINES-1,COLS-1);</code> the text is printed without any change. (only the background is a bit different because I started colour mode). I am afraid that when the text is copied from the pad to screen, it does not copy the formatting, is that right? If so, is there any way how to accomplish that?</p>\n\n<p>Thanks!</p>\n\n<p>|||-----EDIT------|||\nSo even when I cahnge the key to something different than zero, it doesn't work. I am printing into the pad with this:</p>\n\n<pre><code>    init_pair(3,COLOR_RED,COLOR_CYAN);\n    attron(COLOR_PAIR(3));\n    for (i=0;i&lt;str.length();i++){\n        waddch(p,str[i]);\n    }\n    attroff(COLOR_PAIR(3)); \n</code></pre>\n\n<p>and the text after <code>prefresh</code> is displayed as normal.</p>\n"}, {"tags": ["c", "segmentation-fault", "dynamic-allocation"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1432112404, "post_id": 30344902, "comment_id": 48782722, "body": "Does the code work as expected?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1432112419, "post_id": 30344902, "comment_id": 48782734, "body": "Correct what? What&#39;s wrong with your code?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1432112448, "post_id": 30344902, "comment_id": 48782749, "body": "To elaborate what @CoolGuy said, Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions."}, {"owner": {"reputation": 47, "user_id": 4319044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c7a2f0c9105a4df5e603df88dd3add8?s=128&d=identicon&r=PG&f=1", "display_name": "Allemis", "link": "https://stackoverflow.com/users/4319044/allemis"}, "edited": false, "score": 0, "creation_date": 1432112476, "post_id": 30344902, "comment_id": 48782766, "body": "no - when I try to print what I&#180;ve saved in the structure, I get a Seg fault..."}, {"owner": {"reputation": 8946, "user_id": 4374739, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/292ca74d572d7871fbae034b12ace389?s=128&d=identicon&r=PG", "display_name": "SuperBiasedMan", "link": "https://stackoverflow.com/users/4374739/superbiasedman"}, "edited": false, "score": 0, "creation_date": 1432112573, "post_id": 30344902, "comment_id": 48782838, "body": "Please post the full stack trace of your error, it&#39;s vital for answering questions."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1432112624, "post_id": 30344902, "comment_id": 48782887, "body": "<code>c</code> should be an <code>int</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1432113350, "post_id": 30344902, "comment_id": 48783456, "body": "<code>ptrLine-&gt;next_line = NULL;  return ptrLine-&gt;next_line;</code> =&gt; <code>curr_line = read_line(curr_line, pFile);</code> =&gt; <code>while(curr_line-&gt;next_line</code> : <code>NULL-&gt;next_line</code> &lt;- Seg fault"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1432123553, "post_id": 30344902, "comment_id": 48790718, "body": "So let me get this straight... If a file is 4TB, you want to allocate 4TB to copy the bytes from storage to working memory? Coo-coo! This problem comes up often among new programmers, and those of us seasoned programmers realise... The less memory your program requires, the easier it&#39;ll be to optimise and the less likely it&#39;ll drag the entire system down into hell. Read one line at a time, buddy. In fact, if you can get away with reading ONE CHARACTER at a time, do that instead! Your life will be much easier, because you won&#39;t have to worry about allocation to begin with."}], "answers": [{"tags": [], "owner": {"reputation": 559, "user_id": 3238855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/864Hs.jpg?s=128&g=1", "display_name": "Narcisse Doudieu Siewe", "link": "https://stackoverflow.com/users/3238855/narcisse-doudieu-siewe"}, "is_accepted": false, "score": 0, "last_activity_date": 1432123065, "creation_date": 1432123065, "answer_id": 30349002, "question_id": 30344902, "link": "https://stackoverflow.com/questions/30344902/c-read-an-unknown-number-of-lines-of-unknown-length-from-a-file/30349002#30349002", "title": "C: read an unknown number of lines of unknown length from a file", "body": "<pre><code>line* read_line(line* ptrLine, FILE* pFile){\n\nptrLine = malloc(sizeof(line));\n\nptrLine-&gt;data = malloc(1024*sizeof(char));\nint curr_position = 0;\nchar c;\n\nwhile(1){\n    c = fgetc(pFile);\n    if(c == '\\n' || c == EOF) {\n        *(ptrLine-&gt;data + curr_position) = '\\0';\n        break;\n    }\n    *(ptrLine-&gt;data + curr_position) = c;\n    curr_position++;\n}\n\nptrLine-&gt;next_line = NULL;\nreturn ptrLine-&gt;next_line;\n</code></pre>\n\n<p>}</p>\n\n<p>in this code, the last 2 lines are not good:</p>\n\n<pre><code>  ptrLine-&gt;next_line = NULL\n  return ptrLine-&gt;next_line;\n</code></pre>\n\n<p>you set next_line to NULL and you return it so your \"read_line\" function ever return \"NULL\"\nto avoid this, change the last line by this:</p>\n\n<pre><code>   return ptrLine;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4749818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7a31cf907fa03862660c7e5e08e0671?s=128&d=identicon&r=PG&f=1", "display_name": "bremby", "link": "https://stackoverflow.com/users/4749818/bremby"}, "is_accepted": false, "score": 0, "last_activity_date": 1432124031, "creation_date": 1432124031, "answer_id": 30349351, "question_id": 30344902, "link": "https://stackoverflow.com/questions/30344902/c-read-an-unknown-number-of-lines-of-unknown-length-from-a-file/30349351#30349351", "title": "C: read an unknown number of lines of unknown length from a file", "body": "<p>Look at your <code>read_line</code> function. What is the first parameter? I assume you want to build a linked list of <code>line</code> structures, so the first parameter is the 'head' of the linked list. The <em>value</em> of the parameter is on the stack since you are calling a function, but then you overwrite that <em>value</em> by calling <code>malloc</code>.</p>\n\n<p>At the end of your function you then set the <code>next_line</code> field to <code>NULL</code> and return that. That is also not correct and that is the main reason you are getting the SegFault.</p>\n\n<p>The easiest fix is to make a new variable in this function, say <code>new_line</code>, and use that throughout the function. Then at the end you set the <code>next_line</code> field of it to the <code>ptrLine</code> parameter and return <code>new_line</code>.</p>\n\n<p>I am describing the actions more than writing the actual code to make you think about what to do.</p>\n"}], "owner": {"reputation": 47, "user_id": 4319044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c7a2f0c9105a4df5e603df88dd3add8?s=128&d=identicon&r=PG&f=1", "display_name": "Allemis", "link": "https://stackoverflow.com/users/4319044/allemis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1432124031, "creation_date": 1432112317, "last_edit_date": 1432112702, "question_id": 30344902, "link": "https://stackoverflow.com/questions/30344902/c-read-an-unknown-number-of-lines-of-unknown-length-from-a-file", "title": "C: read an unknown number of lines of unknown length from a file", "body": "<p>I am trying to write a program that reads an unknown number of lines of an unknown length (using <code>malloc</code>) and saves them into a structure.</p>\n\n<p>When I try to print what I've saved in the structure, I get a Segmentation fault.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct line{\n    struct line* next_line;\n    char* data;\n}line;\n\nline* read_line(line* ptrLine, FILE* pFile);\n\nint main(int argc, char *argv[])\n{\n    if(argc &lt; 2){\n        return 2;\n    }\n\n    FILE* pFile;\n\n    if((pFile = fopen(argv[1], \"r\")) == NULL){\n        return 1;\n    }\n\n    line* list_beginning = NULL;\n    line* curr_line;\n\n    curr_line = read_line(list_beginning, pFile);\n\n    while(1){\n        if(fgetc(pFile) == EOF) break;\n        fseek(pFile, -1, SEEK_CUR);\n        curr_line = read_line(curr_line, pFile);\n    }\n\n    //printf(\"%c\", (list_beginning-&gt;data[0]));\n    /*while(curr_line-&gt;next_line != NULL){\n        unsigned int i = 0;\n        for(i = 0; i &lt; strlen(curr_line-&gt;data); i++){\n            printf(\"%c\", curr_line-&gt;data[i]);\n        }\n    }*/\n\n    fclose(pFile);\n    return 0;\n}\n\nline* read_line(line* ptrLine, FILE* pFile){\n\n    ptrLine = malloc(sizeof(line));\n\n    ptrLine-&gt;data = malloc(1024*sizeof(char));\n    int curr_position = 0;\n    char c;\n\n    while(1){\n        c = fgetc(pFile);\n        if(c == '\\n' || c == EOF) {\n            *(ptrLine-&gt;data + curr_position) = '\\0';\n            break;\n        }\n        *(ptrLine-&gt;data + curr_position) = c;\n        curr_position++;\n    }\n\n    ptrLine-&gt;next_line = NULL;\n    return ptrLine-&gt;next_line;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "linked-list", "malloc"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1432110890, "post_id": 30344318, "comment_id": 48781743, "body": "offtopic: Why are you mixing dynamic (malloc) memory with local memory in list nodes?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1432112264, "post_id": 30344318, "comment_id": 48782624, "body": "This: <code>helpPoint = ((struct pointList*) malloc(sizeof(struct pointList)));</code> really should be <code>helpPoint = malloc(sizeof *helpPoint);</code>. Way shorter, easier to read, less risk of error, and just ... well, better. <a href=\"http://stackoverflow.com/a/605858/28169\">Please don&#39;t cast the return value of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1432112730, "post_id": 30344318, "comment_id": 48782972, "body": "@Telijas  Should there be struct pointList *next instead of  struct pointList *prev; in the structure definition?"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1432110974, "creation_date": 1432110974, "answer_id": 30344410, "question_id": 30344318, "link": "https://stackoverflow.com/questions/30344318/creating-list-using-pointers/30344410#30344410", "title": "Creating List using pointers", "body": "<p>The problem with the first code snippet is that you take and use the pointer to a local variable. The variable <code>newElement</code> have its scope inside the loop only, so when the loop iterates the current <code>newElement</code> variable goes out of scope and you are left with a stray pointer. This leads to <em>undefined behavior</em>.</p>\n\n<p>You also allocate memory for <code>helpPoint</code> but you don't actually use it (when you initialize <code>newElement</code> using <code>helpPoint</code> you initialize one uninitialized structure with another uninitialized structure), and you do not free it anywhere leading to memory leaks.</p>\n"}], "owner": {"reputation": 1, "user_id": 4919425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c356925451b158f7493c4eb2b87bf3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Telijas", "link": "https://stackoverflow.com/users/4919425/telijas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432110974, "creation_date": 1432110717, "question_id": 30344318, "link": "https://stackoverflow.com/questions/30344318/creating-list-using-pointers", "title": "Creating List using pointers", "body": "<p>I want to create a linked list and keep two pointers. One for the head and one for the last element. I tried several approaches and just found a solution, but I don't know why my first solution don't work. The pointer in head->next  always points on the last element, instead of the correct one.</p>\n\n<pre><code>int main(void){ // first solution\n\n    struct pointList *lastElement;\n    struct pointList *head;\n    struct pointList headHelp = {.next = NULL, .p.x = 5, .p.y = 5};\n    head = &amp;headHelp;\n    int i = 0;\n    lastElement = &amp;headHelp;\n    for( i = 8; i &lt; 10; i++){\n        printf(\"LastElement: %d/%d\\n\", lastElement-&gt;p.x, lastElement-&gt;p.y);\n        struct pointList *helpPoint;\n        helpPoint = ((struct pointList*) malloc(sizeof(struct pointList)));\n        struct pointList newElement = *helpPoint;\n        newElement.next = NULL;\n        newElement.p.x = i;\n        newElement.p.y = i;\n\n        lastElement-&gt;next = &amp;newElement;\n        lastElement = &amp;newElement;\n    }\n    //printList(head);\n    printf(\"LastElement: %d/%d\\n\", lastElement-&gt;p.x, lastElement-&gt;p.y);\n    printf(\"head -&gt; next: %d/%d\\n\", head-&gt;next-&gt;p.x, head-&gt;next-&gt;p.y);\n    printf(\"finish\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>LastElement: 5/5\nLastElement: 8/8\nLastElement: 9/9\nhead -&gt; next: 9/9\nfinish\n</code></pre>\n\n<p>but it should be  :   head -> next: 8/8\nSo the \"next\" pointer of head is changed in every loop execution</p>\n\n<p>The solution which works looks like this:</p>\n\n<pre><code>int main(void){\n\n    struct pointList *lastElement;\n    struct pointList *head;\n    struct pointList headHelp = {.next = NULL, .p.x = 5, .p.y = 5};\n    head = &amp;headHelp;\n    int i = 0;\n    lastElement = &amp;headHelp;\n    for( i = 8; i &lt; 10; i++){\n        printf(\"LastElement: %d/%d\\n\", lastElement-&gt;p.x, lastElement-&gt;p.y);\n        lastElement-&gt;next = ((struct pointList*) malloc(sizeof(struct pointList)));\n\n        lastElement-&gt;next-&gt;next = NULL;\n        lastElement-&gt;next-&gt;p.x = i;\n        lastElement-&gt;next-&gt;p.y = i;\n\n        lastElement = lastElement-&gt;next;\n    }\n    //printList(head);\n    printf(\"LastElement: %d/%d\\n\", lastElement-&gt;p.x, lastElement-&gt;p.y);\n    printf(\"head -&gt; next: %d/%d\\n\", head-&gt;next-&gt;p.x, head-&gt;next-&gt;p.y);\n    printf(\"finish\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>used struct:</p>\n\n<pre><code>struct pointList {\n    struct point p;\n    struct pointList *prev;\n};\n</code></pre>\n"}, {"tags": ["c++", "c", "ubuntu", "gcc", "g++"], "comments": [{"owner": {"reputation": 123, "user_id": 2297870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/40b6014ab7aee184d8e9d2df85514952?s=128&d=identicon&r=PG", "display_name": "Somil Bhandari", "link": "https://stackoverflow.com/users/2297870/somil-bhandari"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1432110594, "post_id": 30344106, "comment_id": 48781565, "body": "The error message thrown on running gcc is given in the title. I have explained that file &#39;cc1&#39; exists and user has permissions to the file. Please tell me what details you need."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1432111149, "post_id": 30344106, "comment_id": 48781916, "body": "You might want to strace the compile and see exactly what problems the system runs into looking for <code>cc1</code>: <code>strace gcc -c foo.c 2&gt;&amp;1 | grep cc1</code>"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1432111239, "post_id": 30344106, "comment_id": 48781970, "body": "How did you install gcc ? What is the command you&#39;re running that produces this error ? What does <code>gcc -v</code> reveal ? Please check which gcc binary you&#39;re actually running, in case you&#39;ve somehow installed different gcc versions at different places."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1432111253, "post_id": 30344106, "comment_id": 48781981, "body": "Also, GCC&#39;s <code>-v</code> option might be helpful."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1432111521, "post_id": 30344106, "comment_id": 48782166, "body": "You may not have <code>build-essential</code>. Try installing it: <code>sudo apt-get install build-essential</code>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1432113667, "post_id": 30344106, "comment_id": 48783664, "body": "You can ask at: askubuntu.com/ where this question would be more suitable."}, {"owner": {"reputation": 123, "user_id": 2297870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/40b6014ab7aee184d8e9d2df85514952?s=128&d=identicon&r=PG", "display_name": "Somil Bhandari", "link": "https://stackoverflow.com/users/2297870/somil-bhandari"}, "edited": false, "score": 0, "creation_date": 1432115946, "post_id": 30344106, "comment_id": 48785395, "body": "gcc installation : apt-get install gcc ;  command used to compile: gcc a.c ;  gcc version 4.7.2 ;  This is a fresh install of gcc"}], "answers": [{"tags": [], "owner": {"reputation": 5835, "user_id": 1446154, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203591509f88fc8c8aeadc01dc1a5d1?s=128&d=identicon&r=PG&f=1", "display_name": "Laser", "link": "https://stackoverflow.com/users/1446154/laser"}, "is_accepted": false, "score": 4, "last_activity_date": 1432194748, "last_edit_date": 1592644375, "creation_date": 1432194748, "answer_id": 30367716, "question_id": 30344106, "link": "https://stackoverflow.com/questions/30344106/gcc-error-trying-to-exec-cc1-execvp-no-such-file-or-directory-when-running-w/30367716#30367716", "title": "gcc error trying to exec &#39;cc1&#39;: execvp: No such file or directory when running with non-root user", "body": "<h1>First way:</h1>\n<p>Under the <code>root</code> account use the command:</p>\n<blockquote>\n<p>which gcc</p>\n<p>which cc1</p>\n<p>ls -l $Output of previous command</p>\n</blockquote>\n<p>It will show you where are <code>cc1</code> and <code>gcc</code> and rights of <code>cc1</code><br />\nCheck that you have proper rights for <code>cc1</code> file</p>\n<p>Then under &quot;regular&quot; user:</p>\n<blockquote>\n<p>which gcc</p>\n</blockquote>\n<p>Output of <code>which gcc</code> should be the same as for root.</p>\n<p>If right is ok and path to <code>gcc</code> the same as under the <code>root</code>, add <code>PATH</code> to <code>cc1</code> for user.</p>\n<h1>Second way:</h1>\n<p>Under the <code>root</code> account:</p>\n<blockquote>\n<p>gcc -v hello_world.c 2&gt;&amp;1 | grep cc1</p>\n</blockquote>\n<p>And do the same under the &quot;regular&quot; account.</p>\n<p>It will show you the real commands that was used for compilation.</p>\n<p>Compare them and check rights and <code>PATH</code> as in first way</p>\n<hr />\n<p>To add PATH use: <code>export PATH=$PATH:$add_new_path_to_folder_here</code></p>\n"}, {"tags": [], "owner": {"reputation": 1119, "user_id": 338305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad99e05f1418d754838929c52881d17?s=128&d=identicon&r=PG", "display_name": "wintondeshong", "link": "https://stackoverflow.com/users/338305/wintondeshong"}, "is_accepted": false, "score": 0, "last_activity_date": 1470684837, "creation_date": 1470684837, "answer_id": 38837168, "question_id": 30344106, "link": "https://stackoverflow.com/questions/30344106/gcc-error-trying-to-exec-cc1-execvp-no-such-file-or-directory-when-running-w/38837168#38837168", "title": "gcc error trying to exec &#39;cc1&#39;: execvp: No such file or directory when running with non-root user", "body": "<p>In my case, this error was occurring while attempting to compile an updated version of ffi, nokogiri and other gems on Ubuntu. <code>gcc -v</code> revealed I was using gcc and g++ 4.8. </p>\n\n<p>The fix was to switch my gcc/g++ symlinks to use 4.9 instead of 4.8.</p>\n\n<pre><code>$ which gcc \n$ ls -ld /usr/local/bin/gcc\n$ sudo rm /usr/local/bin/gcc\n$ sudo ln -s /usr/bin/gcc-4.9 /usr/local/bin/gcc\n$ ls -ld /usr/local/bin/gcc\n</code></pre>\n\n<p>Repeat for g++.</p>\n"}], "owner": {"reputation": 123, "user_id": 2297870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/40b6014ab7aee184d8e9d2df85514952?s=128&d=identicon&r=PG", "display_name": "Somil Bhandari", "link": "https://stackoverflow.com/users/2297870/somil-bhandari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20642, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1470754434, "creation_date": 1432110120, "last_edit_date": 1470754434, "question_id": 30344106, "link": "https://stackoverflow.com/questions/30344106/gcc-error-trying-to-exec-cc1-execvp-no-such-file-or-directory-when-running-w", "title": "gcc error trying to exec &#39;cc1&#39;: execvp: No such file or directory when running with non-root user", "body": "<p>I see that same question has been asked many times but my problem is different.</p>\n\n<p>I installed gcc on ubuntu 14.04 and and it works fine with root user.\nWhen I attempt to compile using non-root user it throws</p>\n\n<blockquote>\n  <p>error gcc: error trying to exec 'cc1': execvp: No such file or\n  directory</p>\n</blockquote>\n\n<p>Once I compile the file with root user, non-root user is able to execute the file without any error but it is not able to compile the file.</p>\n\n<p>I suspect there is a problem with file permissions and I have checked permissions for cc1 and non root user had execute permission on the file.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38891, "user_id": 338803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b99fb33f647bc77b3d4a55a31402882?s=128&d=identicon&r=PG", "display_name": "sje397", "link": "https://stackoverflow.com/users/338803/sje397"}, "edited": false, "score": 0, "creation_date": 1432110013, "post_id": 30344009, "comment_id": 48781218, "body": "I think it might need to be declared &#39;extern&#39;, and defined in one of the c files...not sure though."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1432110095, "post_id": 30344009, "comment_id": 48781277, "body": "&quot;<i>in file2.h I include file1.h</i>&quot; You should not do that, if your includes are not protected enough from multiple inclusion (with <code>#ifdef</code>s and such) it can lead to quite a few problems"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432110371, "post_id": 30344092, "comment_id": 48781444, "body": "No, don&#39;t add spaghetti to a properly designed program! Write setter/getter functions."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432110659, "post_id": 30344092, "comment_id": 48781606, "body": "@Lundin And C is, frankly, the wrong language for that approach."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1432111194, "post_id": 30344092, "comment_id": 48781948, "body": "@PeterSchneider Good program design is, frankly, completely unrelated to which programming language you are using. Programming in C is certainly not an excuse for writing crap code!"}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1432111929, "post_id": 30344092, "comment_id": 48782404, "body": "@Lundin Bad code comes in many forms - overengineering is one of them. It&#39;s best to use programming techniques that are appropriate for the situation."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432112491, "post_id": 30344092, "comment_id": 48782777, "body": "@JackWhitham There is an overwhelming amount of research and widely-recognized coding standards that all say that global variables are bad. Regardless of programming language. There exists very few if any cases where (non const) global variables are the correct solution to a problem. Even if they seem to be because the use is limited and the code is simple, further development/maintenance of that code which seemed simple at first, may add complexity and need for even more variables. And if you used global variables in the original code, then that is the moment when bad code rot begins."}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 0, "creation_date": 1432116523, "post_id": 30344092, "comment_id": 48785870, "body": "I advocate only <i>appropriate</i> use of techniques. Coding standards can enforce bad design as easily as they can enforce good design. The overhead of the set/get paradigm is not normally the extra clock cycles, but rather the extra lines you had to add to the source files and the extra time the maintenance programmer spends reading them in order to understand what&#39;s happening. In some cases this is for the best, in other cases it is not. If you blindly stick to &quot;XYZ considered harmful&quot; no matter what, then you end up doing other harmful things instead."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432121229, "post_id": 30344092, "comment_id": 48789031, "body": "@Lundin Also, we are discussing very fundamental properties of the programming language here. Getters and setters must be backed by a store, some variable. Possibly global, or maybe file or function static. A thorough understanding of the programming language facilities is the first and fundamental prerequisite for <i>any</i> programming in this language."}], "tags": [], "owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "is_accepted": false, "score": 0, "last_activity_date": 1432110069, "creation_date": 1432110069, "answer_id": 30344092, "question_id": 30344009, "link": "https://stackoverflow.com/questions/30344009/issues-with-a-static-variable-in-c/30344092#30344092", "title": "Issues with a static variable in C", "body": "<p>Move the variable declaration to <code>file1.c</code> and get rid of <code>static</code>:</p>\n\n<pre><code>  short mode=0;\n</code></pre>\n\n<p>Add an <code>extern</code> definition to <code>file1.h</code>:</p>\n\n<pre><code>  extern short mode;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": -1, "last_activity_date": 1432110522, "last_edit_date": 1432110522, "creation_date": 1432110101, "answer_id": 30344100, "question_id": 30344009, "link": "https://stackoverflow.com/questions/30344009/issues-with-a-static-variable-in-c/30344100#30344100", "title": "Issues with a static variable in C", "body": "<p>That is the semantics of <code>static</code> in this context: It creates a separate variable in each source file.</p>\n\n<p>For a common variable which spans several source files you need <code>extern</code> declarations in each source file which wants to use it -- typically through a header --, and <em>one</em>  definition in one of the source files.</p>\n\n<p>On a general note, I can recommend the C FAQ (<a href=\"http://c-faq.com/\" rel=\"nofollow\">http://c-faq.com/</a>). There is a section about declarations and definitions, <a href=\"http://c-faq.com/decl/decldef.html\" rel=\"nofollow\">http://c-faq.com/decl/decldef.html</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432110180, "post_id": 30344115, "comment_id": 48781330, "body": "And you have to say <code>short mode;</code> in one of the c files."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1432110288, "last_edit_date": 1432110288, "creation_date": 1432110141, "answer_id": 30344115, "question_id": 30344009, "link": "https://stackoverflow.com/questions/30344009/issues-with-a-static-variable-in-c/30344115#30344115", "title": "Issues with a static variable in C", "body": "<p>If you have static in .h file defined and including that <code>.h</code> file in <code>.c</code> files you are basically defining static variable in each .c file and they are all different objects.</p>\n\n<p>You have to do</p>\n\n<pre><code>extern short mode;\n</code></pre>\n\n<p>in some <code>.h</code> file and include this <code>.h</code> in whichever <code>.c</code> file you need.</p>\n\n<p>Once the variable is declared in some <code>.h</code> file you need to define it somewhere.. I mean in some <code>.c</code> file.</p>\n\n<pre><code>short mode;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1479449602, "last_edit_date": 1479449602, "creation_date": 1432110157, "answer_id": 30344122, "question_id": 30344009, "link": "https://stackoverflow.com/questions/30344009/issues-with-a-static-variable-in-c/30344122#30344122", "title": "Issues with a static variable in C", "body": "<p>When you write a line like </p>\n\n<pre><code>static short mode=0;\n</code></pre>\n\n<p>in a .h file and the .h file is included in multiple .c files, you effectively create multiple <code>short mode</code> variables, one in each .c file that ends up including the .h file.</p>\n\n<p>If you want to have one variable, make it <code>extern</code>, make sure to define it in only one .c file.</p>\n\n<p>in file1.h:</p>\n\n<pre><code>// Just the declaration in the .h file.\nextern short mode;\n</code></pre>\n\n<p>in file1.c:</p>\n\n<pre><code>// The definition in only one .c file.\nshort mode = 0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432111358, "post_id": 30344434, "comment_id": 48782069, "body": "Mandatory comment from some 1980s dinosaur that will follow: &quot;But this adds several CPU ticks of overhead code.&quot; Mandatory answer will follow: &quot;No, all compilers on the market are perfectly capable of inlining code, and have been so since the mid 90s&quot;."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1432111946, "post_id": 30344434, "comment_id": 48782418, "body": "Nice. Hats off to you :)"}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 1, "creation_date": 1432116789, "post_id": 30344434, "comment_id": 48786096, "body": "Hang on. You complain that global variables are bad programming practice, but you still have one! It&#39;s just that you&#39;ve hidden it. All the normal global variable problems, such as lack of reentrancy and lack of thread safety, still apply."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 0, "creation_date": 1432119154, "post_id": 30344434, "comment_id": 48787647, "body": "@JackWhitham Global variables are variables that are accessible globally everywhere in the project, hence global. This example has a <i>local file scope variable</i> which is not the same thing. The main problems with globals are avoided: spaghetti program design and cluttering of the global namespace. But indeed any static variable will become problematic in multi-threaded systems and therefore needs to be protected by semaphores."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 0, "creation_date": 1432121876, "post_id": 30344434, "comment_id": 48789528, "body": "I second @JackWhitham. Blindly programming getters and setters is not (much) better than plain access to a global variable. In particular it does not solve the potential complexity introduced by global access to properties. (The caveat is that it responds better to implementation changes.)"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1432121883, "post_id": 30344434, "comment_id": 48789535, "body": "The arguments you give are not valid, imo: &quot;spaghetti program design&quot; is not prevented at all (if assignments are replaced by get or set, how does that improve program structure?); and &quot;cluttering of the global namespace&quot; is, if anything, increased because the getter and setter introduce <i>two</i> names instead of just one, the variable name."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432122114, "post_id": 30344434, "comment_id": 48789700, "body": "I would also argue that this is not an answer; the question is about a basic facility of the C programming language and not about language independent program design."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432122300, "post_id": 30344434, "comment_id": 48789826, "body": "@PeterSchneider Variables (and macros) in the global namespace are far more dangerous than functions, because of the potential for accidental use by mistake in large code bases. As for how avoiding globals lead to better program design: <a href=\"http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>. Or go maintain any program larger than 10k LOC that uses global variables and you&#39;ll see for yourself."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432123029, "post_id": 30344434, "comment_id": 48790368, "body": "I do not see how global setters and getter backed by a file static variable (i.e. your proposal) are better maintainable or less likely to be used accidentally than a simple global variable (the OP&#39;s attempt).  In both cases a global state is globally accessible, which can be a maintenance problem. And in both cases a decent programming environment, GUI or not, spits out all uses in no time. The wikipedia article, by contrast, mentions poor man&#39;s OOP through opaque structures with factory and manipulator functions operating on them, which improves encapsulation but plays in a different league."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432123511, "post_id": 30344434, "comment_id": 48790686, "body": "@PeterSchneider The difference is in the design: the implementation is hidden to the caller, the internals which are irrelevant to them are hidden away. It is really the very same thing as asking what is the difference between a private variable with setters/getters or a public variable in a C++ class. Indeed opaque type implementations as demonstrated on Wikipedia are preferred: they also remove the multi-threading issue. But suggesting that to the OP might be straying a tad bit too far away from the question."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1432111680, "last_edit_date": 1432111680, "creation_date": 1432111048, "answer_id": 30344434, "question_id": 30344009, "link": "https://stackoverflow.com/questions/30344009/issues-with-a-static-variable-in-c/30344434#30344434", "title": "Issues with a static variable in C", "body": "<p>The whole point of having a variable declared as <code>static</code> is to reduce its scope and make it inaccessible to other files. This is known as <em>private encapsulation</em> and is <em>good programming practice</em>.</p>\n\n<p>The opposite of private encapsulation is known as <em>spaghetti coding</em>, where you declare a variable as global, with the <code>extern</code> keyword. This is <em>very bad programming practice</em> (unless in some cases where the variable is declared const, which isn't the case here).</p>\n\n<p><strong>Under no circumstances should you attempt to rewrite good code based on private encapsulation into bad code based on spaghetti.</strong></p>\n\n<p>Also you should never <em>define</em> variables in header files, because that never makes any sense. A header file is just a description of the interface which is implemented in its corresponding c file, it should not implement anything (even though C allows one to do all kinds of stupid and crazy things).</p>\n\n<p>What you should do is:</p>\n\n<p>file1.h</p>\n\n<pre><code>short get_mode (void);\nvoid  set_mode (short m);\n</code></pre>\n\n<p>file1.c</p>\n\n<pre><code>#include \"file1.h\"\n\nstatic short mode = 0;\n\nshort get_mode (void)\n{\n  return mode;\n}\n\nvoid set_mode (short m)\n{\n  mode = m;\n}\n</code></pre>\n\n<p>some_other_file.c</p>\n\n<pre><code>#include \"file1.h\"\n\nshort mode = get_mode();\ndo_stuff_with(mode);\n</code></pre>\n\n<p>This is how you design programs properly, period. No matter which programming language that is used. Do not listen to anyone recommending <code>extern</code> or other such nonsense!</p>\n"}], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 30344122, "answer_count": 5, "score": 1, "last_activity_date": 1479449602, "creation_date": 1432109859, "question_id": 30344009, "link": "https://stackoverflow.com/questions/30344009/issues-with-a-static-variable-in-c", "title": "Issues with a static variable in C", "body": "<p>say I have 4 files. </p>\n\n<pre><code>file1.h\nfile1.c\nfile2.h\nfile2.c \n</code></pre>\n\n<p>in <code>file1.h</code>  I have a variable :</p>\n\n<pre><code>static short mode=0;\n</code></pre>\n\n<p>in <code>file1.c</code>: </p>\n\n<pre><code>#include \"file1.h\"\n...............\nif ( mode ==0)\n  do stuff\nelse {\n   do something else \n}\n</code></pre>\n\n<p>the problem I have is that I can only change <code>mode</code> value in <code>file2.c</code></p>\n\n<p>in file2.h I include file1.h   and in the source file2.c, I change the value of to <code>1</code> but this has no influence on it in <code>file1.c</code></p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1432111259, "post_id": 30343893, "comment_id": 48781988, "body": "there are 2 <code>}</code> missing before <code>return result</code>. Can you also add a main function which shows how you call the function. What are <code>g_width</code> and <code>g_height</code>?"}, {"owner": {"reputation": 15, "user_id": 4919382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e78a131e35243f5670732f2b50ab0fc?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4919382/john"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1432114625, "post_id": 30343893, "comment_id": 48784392, "body": "i have got it right now. Thanks anyway. so the g_width and g_heightare  column and row of matrix."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4919382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e78a131e35243f5670732f2b50ab0fc?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4919382/john"}, "edited": false, "score": 0, "creation_date": 1432114424, "post_id": 30344550, "comment_id": 48784229, "body": "uint32_t* tempresult=identity_matrix();     ssize_t i;      if (exponent == 0)     result=identity_matrix();     for (i = 0; i &lt; exponent; i++)          tempresult = matrix_mul(tempresult, matrix);         result=tempresult;     return result; } Thanks so much, i modified the code, got it right finally."}], "tags": [], "owner": {"reputation": 63, "user_id": 4917222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/efkn2.jpg?s=128&g=1", "display_name": "hugz", "link": "https://stackoverflow.com/users/4917222/hugz"}, "is_accepted": false, "score": 1, "last_activity_date": 1432111376, "creation_date": 1432111376, "answer_id": 30344550, "question_id": 30343893, "link": "https://stackoverflow.com/questions/30343893/matrix-multiplication-and-poweing-c/30344550#30344550", "title": "matrix multiplication and poweing c", "body": "<p>If your function <code>matrix_mul</code> is right, why don't you re-use it in the <code>matrix_pow</code> function ?</p>\n\n<p>It would give something like that :</p>\n\n<pre><code>uint32_t* matrix_pow(const uint32_t* matrix, uint32_t exponent) {\n\n    uint32_t* tempresult=identity_matrix();\n    ssize_t i;\n\n    if (exponent == 0) return identity_matrix();\n    for (i = 0; i &lt; exponent; i++) tempresult = matrix_mul(tempresult, matrix);\n\n    return tempresult;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4919382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e78a131e35243f5670732f2b50ab0fc?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4919382/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432111376, "creation_date": 1432109487, "last_edit_date": 1432109767, "question_id": 30343893, "link": "https://stackoverflow.com/questions/30343893/matrix-multiplication-and-poweing-c", "title": "matrix multiplication and poweing c", "body": "<p>I have tried poweing for several time but never get it right. Can anyone help me figure out what's wrong with my code? my multi is right.</p>\n\n<pre><code>uint32_t* matrix_mul(const uint32_t* matrix_a, const uint32_t* matrix_b) {\n\n uint32_t* result = new_matrix();\n\n    /*\n        to do\n\n        1 2   1 0    1 2\n        3 4 x 0 1 =&gt; 3 4\n\n        1 2   5 6    19 22\n        3 4 x 7 8 =&gt; 43 50\n    */\n    for(ssize_t y=0; y&lt;g_height; y++){\n        for(ssize_t x=0; x&lt;g_width; x++){\n            for(int i=0; i&lt;g_width; i++)\n                result[y*g_width + x]+=matrix_a[y*g_width + i]*matrix_b[i*g_width + x ];\n        }\n    }\n    return result;\n}\n\n/**\n * Returns new matrix, powering the matrix to the exponent\n */\nuint32_t* matrix_pow(const uint32_t* matrix, uint32_t exponent) {\n\n    uint32_t* result = new_matrix();\n\n    /*\n        to do\n\n        1 2        1 0\n        3 4 ^ 0 =&gt; 0 1\n\n        1 2        1 2\n        3 4 ^ 1 =&gt; 3 4\n\n        1 2        199 290\n        3 4 ^ 4 =&gt; 435 634\n    */\n    uint32_t*tempresult=cloned(matrix);\n    if(exponent==0){\n        result=identity_matrix();\n    }\n    else if(exponent==1) {\n            result=tempresult;\n    } \n    else if(exponent==2){\n        for(ssize_t y=0; y&lt;g_height; y++){\n            for(ssize_t x=0; x&lt;g_width; x++){\n                for(int i=0; i&lt;g_width; i++)\n                    result[y*g_width + x]+=matrix[y*g_width + i]*matrix[i*g_width + x ];\n            }\n\n        }\n    }\nelse if(exponent&gt;=3){\n        for(ssize_t y=0; y&lt;g_height; y++){\n            for(ssize_t x=0; x&lt;g_width; x++){\n                for(int i=0; i&lt;g_width; i++)\n                       result[y*g_width + x]+=matrix[y*g_width + i]*matrix[i*g_width + x ];\n            }\n\n        }\n        for(int j=1;j&lt;=exponent-2;j++){\n            for(ssize_t y=0; y&lt;g_height; y++){\n                for(ssize_t x=0; x&lt;g_width; x++){\n                    for(int i=0; i&lt;g_width; i++)\n\n                        result[y*g_width + x]+=result[y*g_width + i]*matrix[i*g_width + x ];\n\n    return result;\n}\n</code></pre>\n"}]