[{"tags": ["angular", "typescript", "jwt"], "comments": [{"owner": {"reputation": 621, "user_id": 7440160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4413d34fcfa7ef253e5db4e04fa2abc3?s=128&d=identicon&r=PG&f=1", "display_name": "Suryan", "link": "https://stackoverflow.com/users/7440160/suryan"}, "edited": false, "score": 0, "creation_date": 1540425878, "post_id": 52979026, "comment_id": 92865474, "body": "This should be JSON.stringify instead of <code>login(user){     localStorage.setItem(&#39;currentUser&#39;, JSON.parse(user));</code> and there is a typo in <code>getItem(&#39;currentUer&#39;)</code> instead of <code>currentUser</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10497113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e0cfc9d6b0b51000f8071079df2bc7?s=128&d=identicon&r=PG&f=1", "display_name": "user10497113", "link": "https://stackoverflow.com/users/10497113/user10497113"}, "edited": false, "score": 0, "creation_date": 1540461537, "post_id": 52979099, "comment_id": 92878364, "body": "@Suryan Thank you for you answers i did correct my code above, but currentUser returns just the username and the password of the user and not the other fields like firstName, so i must use another function to retrieve the user with all fields."}], "tags": [], "owner": {"reputation": 69, "user_id": 6189341, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ALWE_27C5wo/AAAAAAAAAAI/AAAAAAAAAEY/0iz3uE1ZgYE/photo.jpg?sz=128", "display_name": "ccmorataya", "link": "https://stackoverflow.com/users/6189341/ccmorataya"}, "is_accepted": false, "score": 0, "last_activity_date": 1540422324, "creation_date": 1540422324, "answer_id": 52979099, "question_id": 52979026, "link": "https://stackoverflow.com/questions/52979026/how-to-get-details-from-logged-user/52979099#52979099", "title": "How to get details from logged user", "body": "<p>At this line:</p>\n\n<pre><code>this.currentUser = JSON.parse(localStorage.getItem('currentUer'));\n</code></pre>\n\n<p>you are getting <code>currentUer</code> not <code>currentUser</code>.</p>\n\n<p>In the devtools are you viewing that key?</p>\n"}], "owner": {"reputation": 17, "user_id": 10497113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e0cfc9d6b0b51000f8071079df2bc7?s=128&d=identicon&r=PG&f=1", "display_name": "user10497113", "link": "https://stackoverflow.com/users/10497113/user10497113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540460725, "creation_date": 1540421904, "last_edit_date": 1540460725, "question_id": 52979026, "link": "https://stackoverflow.com/questions/52979026/how-to-get-details-from-logged-user", "title": "How to get details from logged user", "body": "<p>i want to retrieve logged user informations from local storage so i can greet the user after his authentication to the the app.</p>\n\n<pre><code>login(user){\n    localStorage.setItem('currentUser',  JSON.stringify(user));\n    return this.http.post(this.host+\"/login\",user, {observe:'response'});\n}\n\n\nexport class HomeComponent implements OnInit {\n  currentUser:User;\n\n  constructor(public authenticationService:AuthenticationService) {\n    this.currentUser= JSON.parse(localStorage.getItem('currentUser'));\n    console.log(this.currentUser);\n}\n</code></pre>\n\n<p>Here i call the user from local storage but it doesn't work. Can you help me with that?</p>\n\n<pre><code>&lt;div class=\"alert alert-dark\" role=\"alert\"&gt;\n    &lt;h2&gt;Welcome {{currentUser.firstName}} !!&lt;/h2&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1540420689, "creation_date": 1540420689, "answer_id": 52978865, "question_id": 52978752, "link": "https://stackoverflow.com/questions/52978752/custom-directive-push-children-text-in-an-array/52978865#52978865", "title": "Custom directive push children text in an array", "body": "<p>You aren't sharing enough of your code for me to tell what's going on, but my assumption is you're trying to dig into the content (to find the p tags) before they are available. Here is a simple demo for how you could go about it:</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-zeu51h?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-zeu51h?file=src%2Fapp%2Fapp.component.html</a></p>\n\n<p><strong>Directive</strong></p>\n\n<pre><code>import { Directive, ElementRef, OnInit } from '@angular/core';\n\n@Directive({\n  selector: '[appMyDirective]'\n})\nexport class MyDirectiveDirective implements OnInit{\n  private readonly _elementRef: ElementRef;\n  public items: string[];\n  constructor(_el: ElementRef) {\n    this._elementRef = _el;\n  }\n  ngOnInit(): void {\n    const pTags = this._elementRef.nativeElement.querySelectorAll('p');\n    this.items = [];\n    if (pTags) {\n      pTags.forEach( p =&gt; this.items.push(p.innerText));\n      console.log(this.items);\n    }\n  }\n\n}\n</code></pre>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>&lt;div appMyDirective&gt;\n  &lt;p&gt;Start editing to see some magic happen :)&lt;/p&gt;\n  &lt;p&gt;Something else&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 10037409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8865442bba7db6a7d21af4acc540f7?s=128&d=identicon&r=PG&f=1", "display_name": "orphen92300", "link": "https://stackoverflow.com/users/10037409/orphen92300"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540443459, "creation_date": 1540420026, "last_edit_date": 1540421576, "question_id": 52978752, "link": "https://stackoverflow.com/questions/52978752/custom-directive-push-children-text-in-an-array", "title": "Custom directive push children text in an array", "body": "<p>I have a custom directive on a div</p>\n\n<pre><code>&lt;div appAutoTypingText&gt;\n  &lt;p&gt;on va mettre un premier texte&lt;/p&gt;\n  &lt;p&gt;Puis un second texte&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I want my directive get the text inside the p tag and push them in a array like this</p>\n\n<pre><code>['on va mettre un premier texte', 'Puis un second texte']\n</code></pre>\n\n<p>How can i have this result please?\nI cant find in Element ref an array of the children i just have a NodeList or a HTMLcollection</p>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["typescript", "express", "covariance", "contravariance"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1540428572, "post_id": 52978401, "comment_id": 92866005, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/37377731/extend-express-request-object-using-typescript\">Extend Express Request object using Typescript</a>?"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1540476006, "post_id": 52978401, "comment_id": 92887541, "body": "@jcalz IMO no: the other thread was about augmenting <code>Request</code> while this one is about using a separate interface."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1540476846, "post_id": 52978401, "comment_id": 92888104, "body": "I think the problems are the same (&quot;I need to add something to every <code>Request</code>&quot;) and the solution in the other thread is easier and more type-safe than using a separate interface.  When you are treating a function parameter like a writable thing, you want covariance for the writable part, but TypeScript gives you contravariance because it assumes that you are reading from function parameters and not writing to them.  By locally merging into the <code>Request</code> declaration you sidestep this.  Your suggestion of making it an optional property is perfect, though."}, {"owner": {"reputation": 4029, "user_id": 80280, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wfRgf.jpg?s=128&g=1", "display_name": "Eric Liprandi", "link": "https://stackoverflow.com/users/80280/eric-liprandi"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1540485772, "post_id": 52978401, "comment_id": 92893571, "body": "@jcalz you are correct, the option described in the other ticket would be a good way to do what I am doing. However my question is about TypeScript in general, not specifically about Express. I just used Express as my example since that&#39;s where I am having the problem."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1540490306, "post_id": 52978401, "comment_id": 92895837, "body": "Locally merging some properties into an existing interface works whether or not it&#39;s Express."}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540492323, "post_id": 52978401, "comment_id": 92896795, "body": "Locally adding required properties to an interface when untyped JavaScript code is producing objects that are declared as that interface but don&#39;t have the extra properties is very unsound and I wouldn&#39;t recommend it."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1540562580, "post_id": 52978401, "comment_id": 92924300, "body": "Yes, it would have to be an optional property to be fully sound.  A required property where the very first thing you do when any of your code touches the object is to add the property is technically unsound but idiomatic enough that I can&#39;t bring myself to discourage it very forcefully.  I&#39;d feel hypocritical given the way complex objects tend to be built starting with a type asserted lie (<code>const x = {} as Foo</code>) and then adding properties until the assertion become true.  YMMV of course."}], "answers": [{"comments": [{"owner": {"reputation": 4029, "user_id": 80280, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wfRgf.jpg?s=128&g=1", "display_name": "Eric Liprandi", "link": "https://stackoverflow.com/users/80280/eric-liprandi"}, "edited": false, "score": 0, "creation_date": 1540485994, "post_id": 52991167, "comment_id": 92893683, "body": "the latter part of your answer is what&#39;s concerning me. I definitely don&#39;t want to have it optional all the way through. For 99% of my code, it&#39;s set. As mentioned above, this question is more generic for me. I might repost at a later date with non-expressJS stuff."}, {"owner": {"reputation": 774, "user_id": 4428020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a092daf58075c616b5facfd2867c7930?s=128&d=identicon&r=PG&f=1", "display_name": "klvenky", "link": "https://stackoverflow.com/users/4428020/klvenky"}, "reply_to_user": {"reputation": 4029, "user_id": 80280, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wfRgf.jpg?s=128&g=1", "display_name": "Eric Liprandi", "link": "https://stackoverflow.com/users/80280/eric-liprandi"}, "edited": false, "score": 1, "creation_date": 1542651158, "post_id": 52991167, "comment_id": 93636524, "body": "@EricLiprandi you can probably try the typescript union types like below:      function handler(req: BetterRequest &amp; Request, res: Response) {         req.foo = &#39;bar&#39;;     } I have used something similar before. Hope it helps :)"}, {"owner": {"reputation": 774, "user_id": 4428020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a092daf58075c616b5facfd2867c7930?s=128&d=identicon&r=PG&f=1", "display_name": "klvenky", "link": "https://stackoverflow.com/users/4428020/klvenky"}, "edited": false, "score": 0, "creation_date": 1542651329, "post_id": 52991167, "comment_id": 93636594, "body": "or you could even use const newReq = req as BetterRequest; I am not sure if that&#39;s good way though"}, {"owner": {"reputation": 29741, "user_id": 741970, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/3MjXC.png?s=128&g=1", "display_name": "Dmitry Minkovsky", "link": "https://stackoverflow.com/users/741970/dmitry-minkovsky"}, "edited": false, "score": 0, "creation_date": 1592565378, "post_id": 52991167, "comment_id": 110477513, "body": "Thanks! Making this property optional seems pretty creative and would not have occurred to me. Although I opted for a different\u2014less safe but perhaps more practical\u2014 approach, this answer definitely elucidated something for me about the TS compiler."}], "tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": true, "score": 3, "last_activity_date": 1540475932, "creation_date": 1540475932, "answer_id": 52991167, "question_id": 52978401, "link": "https://stackoverflow.com/questions/52978401/how-do-i-make-the-typescript-compiler-happy-about-variance-when-calling-generic/52991167#52991167", "title": "how do I make the TypeScript compiler happy about variance when calling generic handlers (like expressJS middleware)", "body": "<p>An explicit cast as you suggested is probably the best way if you know you are going to immediately set the <code>foo</code> property and you want to be able to use the property from that point on without checking whether it is defined.  Another approach is to declare the <code>foo</code> property as optional; then a <code>Request</code> can be implicitly converted to a <code>BetterRequest</code> (so your handler can be implicitly converted to an Express handler), but the type of the <code>foo</code> property will include <code>undefined</code> and you'll have to deal with that every time you use the property.</p>\n"}, {"tags": [], "owner": {"reputation": 29741, "user_id": 741970, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/3MjXC.png?s=128&g=1", "display_name": "Dmitry Minkovsky", "link": "https://stackoverflow.com/users/741970/dmitry-minkovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1592565523, "last_edit_date": 1592565523, "creation_date": 1592564059, "answer_id": 62468708, "question_id": 52978401, "link": "https://stackoverflow.com/questions/52978401/how-do-i-make-the-typescript-compiler-happy-about-variance-when-calling-generic/62468708#62468708", "title": "how do I make the TypeScript compiler happy about variance when calling generic handlers (like expressJS middleware)", "body": "<p>The issue occurs at <code>app.use(handler)</code> because, as the error says:</p>\n\n<blockquote>\n  <p>Type 'Request' is not assignable to type 'BetterRequest'. Property 'foo' is missing in type 'Request'.</p>\n</blockquote>\n\n<p>The compiler rejects this assignment because <code>handler</code> is saying, \"I'm expecting that the caller will give me a 'BetterRequest', but <code>app.use()</code> is saying, \"For any handler you give me, I can only guarantee that I'll pass in a 'Request'\".</p>\n\n<p>I think the most elegant solution, then, is:</p>\n\n<pre><code>app.use(handler as RequestHander)\n</code></pre>\n\n<p>This type assertion tells <code>app.use()</code> that <code>handler</code> is a <code>RequestHandler</code>, versus what it is in reality, a \"<code>BetterRequestHandler</code>\". This is fine as long as <code>handler</code> always safely/correctly references <code>req.foo</code>.</p>\n\n<p>I think this improves on Matt McCutchen's suggestion of making <code>req.foo</code> optional, because you don't have to keep checking its value to please the compiler, even if you know the value is there.</p>\n\n<hr>\n\n<p>As a concrete example, my use-case was to have a validation middleware before my main handler: </p>\n\n<pre><code>interface ValidatedRequest&lt;T extends object&gt; extends Request {\n    validation: T,\n}\n\nfunction registerValidate(\n    req: ValidatedRequest&lt;RegisterInput&gt;,\n    res: Response,\n    next: NextFunction,\n) {\n    const validation : string | RegisterInput = validate&lt;RegisterInput&gt;(req.body);\n    if (typeof validation === 'string') {\n        return next(badRequest(validation));\n    } else {\n        req.validation = validation;\n        next();\n    }\n}\n\nfunction register(\n    req: ValidatedRequest&lt;RegisterInput&gt;,\n    res: Response,\n    next: NextFunction\n) {\n    // Use req.validation\n}\n\napp.post(\n    '/path', \n    registerValidate as RequestHandler,\n    register as RequestHandler\n);\n</code></pre>\n"}], "owner": {"reputation": 4029, "user_id": 80280, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wfRgf.jpg?s=128&g=1", "display_name": "Eric Liprandi", "link": "https://stackoverflow.com/users/80280/eric-liprandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 52991167, "answer_count": 2, "score": 1, "last_activity_date": 1592565523, "creation_date": 1540417906, "question_id": 52978401, "link": "https://stackoverflow.com/questions/52978401/how-do-i-make-the-typescript-compiler-happy-about-variance-when-calling-generic", "title": "how do I make the TypeScript compiler happy about variance when calling generic handlers (like expressJS middleware)", "body": "<p><em>disclaimer:</em> I am still a little fuzzy on variance in general...</p>\n\n<p>My situation is as follows:</p>\n\n<pre><code>// index.ts\nimport express from 'express';\nimport {Request, Response} from 'express';\nconst app = express();\napp.use(handler);\n\ninterface BetterRequest extends Request {\n    foo: string;\n}\n\nfunction handler(req: BetterRequest, res: Response) {\n    req.foo = 'bar';\n}\n\n// tsconfig.json\n{\n    \"compilerOptions\": {\n        \"target\": \"es6\",\n        \"module\": \"commonjs\",\n        \"strict\": true,\n        \"allowSyntheticDefaultImports\": true,\n        \"esModuleInterop\": true\n    }\n}\n</code></pre>\n\n<p>The error that I get is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[ts]\nArgument of type '(req: BetterRequest, res: Response) =&gt; void' is not assignable to parameter of type 'RequestHandlerParams'.\nType '(req: BetterRequest, res: Response) =&gt; void' is not assignable to type 'RequestHandler'.\n    Types of parameters 'req' and 'req' are incompatible.\n    Type 'Request' is not assignable to type 'BetterRequest'.\n        Property 'foo' is missing in type 'Request'.\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6Z1oh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Z1oh.png\" alt=\"enter image description here\"></a></p>\n\n<p>I understand what the error is saying and that I could either turn off those warnings from the <code>tsconfig.json</code> file or by a line comment.\nBut that's not what I am after.</p>\n\n<p>How do I properly write code to handle this situation?</p>\n\n<p>is the following the only way?</p>\n\n<pre><code>// index.ts\nfunction handler(req: Request, res: Response) {\n    const req2 = req as BetterRequest;\n    req2.foo = 'bar';\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "promise", "ionic4"], "answers": [{"comments": [{"owner": {"reputation": 326, "user_id": 4446885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a82152937b0353ac25b5dc59c9ff1a95?s=128&d=identicon&r=PG&f=1", "display_name": "Onfire", "link": "https://stackoverflow.com/users/4446885/onfire"}, "edited": false, "score": 0, "creation_date": 1540424859, "post_id": 52978997, "comment_id": 92865247, "body": "Thanks for this, it&#39;s definitely a step in the right direction - it cleans up my promise / observables a lot and makes the api calls much cleaner! How would I do a generic catch block on the apiRequest promise? I want to be able to catch any generic errors (e.g. tokens exist but have been invalidated) and be able to  handle that error accordingly? I tried to put a catch onto the end of <code>this.http.request(httpRequest).toPromise()</code> which does catch it,  but caused this <code>await this.api.getCustomer();</code> to resolve instead of failing?"}, {"owner": {"reputation": 960, "user_id": 7597651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jbc1X.jpg?s=128&g=1", "display_name": "mykhailo.romaniuk", "link": "https://stackoverflow.com/users/7597651/mykhailo-romaniuk"}, "reply_to_user": {"reputation": 326, "user_id": 4446885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a82152937b0353ac25b5dc59c9ff1a95?s=128&d=identicon&r=PG&f=1", "display_name": "Onfire", "link": "https://stackoverflow.com/users/4446885/onfire"}, "edited": false, "score": 1, "creation_date": 1540427201, "post_id": 52978997, "comment_id": 92865741, "body": "The problem is that you are omitting your error without rethrow. Simply propagate an error inside your api in your catch block. Article about propagation - <a href=\"https://link.medium.com/DpIXtJiYhR\" rel=\"nofollow noreferrer\">link.medium.com/DpIXtJiYhR</a>"}], "tags": [], "owner": {"reputation": 960, "user_id": 7597651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jbc1X.jpg?s=128&g=1", "display_name": "mykhailo.romaniuk", "link": "https://stackoverflow.com/users/7597651/mykhailo-romaniuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1540421685, "creation_date": 1540421685, "answer_id": 52978997, "question_id": 52978388, "link": "https://stackoverflow.com/questions/52978388/best-way-to-handle-promise-catch-errors-when-i-sometimes-want-it-to-fail-silentl/52978997#52978997", "title": "Best way to handle Promise catch errors when I sometimes want it to fail silently", "body": "<p>The main problem is that you are mixing <code>Observables</code> with <code>Promises</code> in the wrong way.</p>\n\n<p>For simplicity, I suggest using only one of them at a time. </p>\n\n<p><em>Simple solution:</em></p>\n\n<pre><code>checkAuth() {\n   this.api.getCustomer()\n       .then((request: Subject&lt;any&gt;) =&gt; request.toPromise())\n       .then(() =&gt; { this.isLoggedIn = true; })\n       .catch(() =&gt; { this.isLoggedIn = false; });\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>import { from } from 'rxjs';\n\ncheckAuth() {\n   const customersObservable = from(this.api.getCustomer());\n   customersObservable.subscribe(\n       () =&gt; { this.isLoggedIn = true; },\n       () =&gt; { this.isLoggedIn = false; }\n   );\n}\n</code></pre>\n\n<p><em>Better solution:</em></p>\n\n<p>Use Promises or Observables on a low level to make your service's API clear.</p>\n\n<p>Example with <a href=\"https://stackoverflow.com/questions/36777284/angular-2-convert-observable-to-promise\">converting Observables into Promises</a>:</p>\n\n<pre><code>export class OauthService {\n    public async getTokens(): Promise&lt;any&gt; { ... }\n}\n\nexport class ApiService {\n    public async getCustomers(): Promise&lt;Customer&gt; {\n        ...\n        return await this.authRequest(someRequest);\n    }\n\n    private async authorisedRequest(request) : Promise&lt;any&gt; {\n        const [token, token_secret] = await this.oauth.getTokens();\n\n        if (!token || !token_secret) {\n            throw 'Tokens not available';\n        }\n\n        return await this.apiRequest(request);\n    }\n\n    private async apiRequest(request) : Promise&lt;any&gt; {\n        const httpRequest = ...;\n        // Here we are converting our Observable to a Promise to avoid mixing\n        return await this.http.request(httpRequest)\n            .toPromise();\n    }\n}\n\nexport class AuthenticationService {\n    public async checkAuth() {\n        try {\n            await this.api.getCustomer();\n            this.isLoggedIn = true;\n        } catch {\n            this.isLoggedIn = false;\n        }\n    }\n}\n</code></pre>\n\n<p>You also can use an approach with <code>Observable</code> by <a href=\"https://stackoverflow.com/questions/39319279/convert-promise-to-observable\">converting promise to observable</a> (in general code will be similar to the example with promises, so I skipping it)</p>\n"}], "owner": {"reputation": 326, "user_id": 4446885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a82152937b0353ac25b5dc59c9ff1a95?s=128&d=identicon&r=PG&f=1", "display_name": "Onfire", "link": "https://stackoverflow.com/users/4446885/onfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52978997, "answer_count": 1, "score": 1, "last_activity_date": 1540421685, "creation_date": 1540417856, "question_id": 52978388, "link": "https://stackoverflow.com/questions/52978388/best-way-to-handle-promise-catch-errors-when-i-sometimes-want-it-to-fail-silentl", "title": "Best way to handle Promise catch errors when I sometimes want it to fail silently", "body": "<p>I am writing a Ionic app using Ionic 4 and I am having some trouble getting my Promises to execute in the correct order (or perhaps I am just thinking about this wrong). It's my first time using Typescript as well, so bear with me.</p>\n\n<p>The app needs to interface with our API which uses Oauth. I am storing the Oauth tokens using ionic storage, which also uses Promises for get/set so this is adding to my problem.</p>\n\n<p>If you take the following file snippets:</p>\n\n<p>oauth.service.ts:</p>\n\n<pre><code>export class OauthService {\n\n...    \n\n    public async setTokens(token: string, token_secret: string) {\n        return Promise.all([this.storage.set('token', token), this.storage.set('token_secret', token_secret)]);\n    }\n\n    public async getTokens() {\n        return Promise.all([this.storage.get('token'), this.storage.get('token_secret')]);\n    }\n\n...\n\n}\n</code></pre>\n\n<p>api.service.ts: </p>\n\n<pre><code>export class ApiService {\n\n...\n\n    public async getCustomer() {\n        const requestData = {\n            .. request data ..\n        };\n\n        return this.authorisedRequest(requestData);\n    }\n\n    private authorisedRequest(requestData) {\n        return this.oauth.getTokens().then(([token, token_secret]) =&gt; {\n\n            if (!token || !token_secret) {\n                return Promise.reject('Tokens not available');\n            }\n\n            const tokens = {\n                'key': token,\n                'secret': token_secret\n            };\n\n            const oauthHeader = this.oauth.createHeader(requestData, tokens);\n            const headers = this.createHeaders({\n                'Authorization': oauthHeader.Authorization\n            });\n\n            return this.apiRequest(requestData.method, requestData.url, {}, headers);\n\n        }).catch((error) =&gt; {\n            // @todo what to do here, if anything?\n            console.info('token error:', error)\n        });\n    }\n\n    private async apiRequest(type, path, data, headers = null) {\n        if (!headers) {\n            headers = this.headers;\n        }\n\n        const response = new Subject();\n        const httpRequest = new HttpRequest(\n            type,\n            path,\n            data,\n            {\n                headers: headers\n            }\n        );\n\n        this.http.request(httpRequest).subscribe((res: any) =&gt; {\n            if (res.type) {\n                response.next(res.body);\n            }\n        }, error =&gt; {\n            const responseError = error.error.messages.error[0];\n            this.alerter.presentAlert(responseError.message);\n\n            response.error(error);\n        });\n\n        return response;\n    }\n\n}\n</code></pre>\n\n<p>authentication.service.ts:</p>\n\n<pre><code>export class AuthenticationService {\n\n...\n\n    public checkAuth() {\n        this.api.getCustomer().then((request: Subject&lt;any&gt;) =&gt; {\n\n           // this still executes but request is undefined.\n\n            request.subscribe((resp: any) =&gt; {\n                this.isLoggedIn = true;\n            }, (error) =&gt; {\n                this.isLoggedIn = false;\n            });\n        });\n    }\n\n...\n\n}\n</code></pre>\n\n<p>For the most part this is working ok, in all cases where the token does exist as the promise is not rejected.</p>\n\n<p>However when I run checkAuth()  on init (to check if the user is already logged in) the getTokens() promise returns a reject which is caught straight away (in api.service) but the 'then' inside checkAuth is still run even though it should have been caught, which gives me an error:</p>\n\n<p><code>TypeError: Cannot read property 'subscribe' of undefined</code></p>\n\n<p>I can move the catch block to inside the checkAuth function, but that would mean I have to do it in all cases where I am doing an API call (~30 odd endpoints) which is not ideal. </p>\n\n<p>With no catch at all I get this error:</p>\n\n<p><code>Uncaught (in promise): Tokens not available</code></p>\n\n<p>How can I either have the reject fail silently, or perhaps just pass the error along checkAuth? </p>\n\n<p>Or am I going about this process the wrong way entirely? I do have a feeling that my process for retrieving the oauth token is wrong here (causing the nested promises for any api call).</p>\n"}, {"tags": ["angular", "typescript", "angular5"], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 4122891, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GgNV6.jpg?s=128&g=1", "display_name": "Suren Konathala", "link": "https://stackoverflow.com/users/4122891/suren-konathala"}, "edited": false, "score": 0, "creation_date": 1540441778, "post_id": 52980571, "comment_id": 92868889, "body": "Thanks much. This solved the error. How do i use this in the Component? I need to print the values"}], "tags": [], "owner": {"reputation": 161, "user_id": 3409030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46b5a3ca842c72efcb8b43a46b187b9?s=128&d=identicon&r=PG&f=1", "display_name": "Pranesh U H", "link": "https://stackoverflow.com/users/3409030/pranesh-u-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1540435411, "creation_date": 1540435411, "answer_id": 52980571, "question_id": 52978218, "link": "https://stackoverflow.com/questions/52978218/subscribe-undefined-error-when-returning-observableobject-from-service-in/52980571#52980571", "title": "&#39;subscribe&#39; undefined error when returning Observable&lt;Object[]&gt; from service in Angular 5?", "body": "<p><code>getAllBlobsJS</code> should return as an observable so that you can subscribe to it. \n<pre></p>\n\n<code>getAllBlobsJS(): Observable&lt;Azureblob[]&gt; {\nreturn new Observable(obs=&gt;{\n  var localArr: Azureblob[] = [];\n\n  this.blobServiceObj = \n   AzureStorageBlobServiceJS.createBlobService(this.connectionString);\n\n  this.blobList = this.blobServiceObj.listBlobsSegmented('acs', null, function \n  (error, results) {\n    if (error) {\n      console.log(\"**** Error\");\n      obs.error();\n    } else {\n      for (var i = 0, blob; blob = results.entries[i]; i++) {\n        console.log(\"Blob \", i, blob); /** SEE BELOW **/\n        localArr.push(new Azureblob(blob.name));\n      }\n    }\n    console.log(\"localArr - # of blobs returned=\", localArr.length); /** SEE BELOW \n  **/\n    return localArr;\n  });\n\n  obs.next(this.blobList);\n  obs.complete();\n })}\n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 4122891, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GgNV6.jpg?s=128&g=1", "display_name": "Suren Konathala", "link": "https://stackoverflow.com/users/4122891/suren-konathala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 52980571, "answer_count": 1, "score": 0, "last_activity_date": 1540435411, "creation_date": 1540416879, "last_edit_date": 1540422388, "question_id": 52978218, "link": "https://stackoverflow.com/questions/52978218/subscribe-undefined-error-when-returning-observableobject-from-service-in", "title": "&#39;subscribe&#39; undefined error when returning Observable&lt;Object[]&gt; from service in Angular 5?", "body": "<p>I'm building objects <code>new Azureblob(blob.name</code> for each value retuned by external service and adding it to an Array <code>new Azureblob(blob.name</code>. Also able to return this from anonymous function <code>return localArr</code>. </p>\n\n<p><strong>Questions:</strong></p>\n\n<ol>\n<li>How can we return this through the method for it to be used by the component? </li>\n<li>Also need to make it as <code>Observable&lt;Azureblob[]</code> because the service takes a while to fetch the data from the server?</li>\n</ol>\n\n<p><strong>Model</strong></p>\n\n<pre><code>export class Azureblob {\n  blobName: string;\n\n  constructor(private blobName1: string) {\n    this.blobName = blobName1;\n  }\n}  \n</code></pre>\n\n<p><strong>Service. Is this correct?</strong></p>\n\n<pre><code> import { Azureblob } from '../models/azureblob';\n ..\n export class BlobService {\n   constructor() { }\n   blobServiceObj: any;\n   blobList: Observable&lt;Azureblob[]&gt; = of([]);\n\n   getAllBlobsJS(): Observable&lt;Azureblob[]&gt; {\n     var localArr: Azureblob[] = [];\n\n     this.blobServiceObj = AzureStorageBlobServiceJS.createBlobService(this.connectionString);\n\n     this.blobList = this.blobServiceObj.listBlobsSegmented('acs', null, function (error, results) {\n        if (error) {\n         console.log(\"**** Error\");\n        } else {\n          for (var i = 0, blob; blob = results.entries[i]; i++) {\n             console.log(\"Blob \", i, blob); /** SEE BELOW **/\n             localArr.push(new Azureblob(blob.name));\n           }\n        }\n         console.log(\"localArr - # of blobs returned=\", localArr.length); /** SEE BELOW **/\n        return localArr;\n      });\n\n      return this.blobList;\n   }\n</code></pre>\n\n<p>The service works fine and returns result as</p>\n\n<pre><code> Blob 0 \n BlobResult\u00a0{name: \"Git-Logo-1788C.png\", creationTime: \"Mon, 17 Sep 2018 17:57:39 GMT\", lastModified: \"Mon, 17 Sep 2018 17:57:39 GMT\", etag: \"0x8D61CC70ED10A9F\", contentLength: \"5684\",\u00a0\u2026}\n\n localArr - # of blobs returned= 4\n</code></pre>\n\n<p><strong>Component</strong></p>\n\n<pre><code>blobList: Azureblob[] = [];\n\nthis.blobService.getAllBlobsJS()\n  .subscribe(\n    (val) =&gt; {\n      console.log(\"..values=\", val);\n    });\n</code></pre>\n\n<p><strong>Error i'm seeing</strong>\n<a href=\"https://i.stack.imgur.com/ThYSr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ThYSr.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["angular", "typescript", "angular-pipe"], "comments": [{"owner": {"reputation": 13387, "user_id": 965834, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BiCtr.png?s=128&g=1", "display_name": "Jeto", "link": "https://stackoverflow.com/users/965834/jeto"}, "edited": false, "score": 1, "creation_date": 1540416219, "post_id": 52978074, "comment_id": 92862734, "body": "Please show your pipe&#39;s code. Also use the post formatting tools."}, {"owner": {"reputation": 29, "user_id": 8858312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6c0f9c972bd5c440e4249717e4f89f?s=128&d=identicon&r=PG&f=1", "display_name": "kkom", "link": "https://stackoverflow.com/users/8858312/kkom"}, "reply_to_user": {"reputation": 13387, "user_id": 965834, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BiCtr.png?s=128&g=1", "display_name": "Jeto", "link": "https://stackoverflow.com/users/965834/jeto"}, "edited": false, "score": 0, "creation_date": 1540416376, "post_id": 52978074, "comment_id": 92862777, "body": "Edited the post with pipe code"}, {"owner": {"reputation": 13387, "user_id": 965834, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BiCtr.png?s=128&g=1", "display_name": "Jeto", "link": "https://stackoverflow.com/users/965834/jeto"}, "reply_to_user": {"reputation": 3786, "user_id": 3131085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af46eb34957e6fdc051e365e5853aa54?s=128&d=identicon&r=PG&f=1", "display_name": "Jason White", "link": "https://stackoverflow.com/users/3131085/jason-white"}, "edited": false, "score": 0, "creation_date": 1540416450, "post_id": 52978074, "comment_id": 92862801, "body": "Or did you? Well maybe @JasonWhite edited same time as you :)"}], "owner": {"reputation": 29, "user_id": 8858312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6c0f9c972bd5c440e4249717e4f89f?s=128&d=identicon&r=PG&f=1", "display_name": "kkom", "link": "https://stackoverflow.com/users/8858312/kkom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540416907, "creation_date": 1540416117, "last_edit_date": 1540416907, "question_id": 52978074, "link": "https://stackoverflow.com/questions/52978074/angular2-pipe-is-not-working-inside-modal-within-same-page", "title": "Angular2 pipe is not working inside Modal within same page", "body": "<p>I am new to Angular. </p>\n\n<p><code>&lt;h4&gt;{{item.accountNumber | acctNumberFormat : _acctFormat}}&lt;/h4&gt;</code> once we click on the account number, it will open a modal. Inside Modal we have same account number.</p>\n\n<p><code>&lt;h4 class=\"modal-title\"&gt;{{_selectedItem?.accountNumber}}&lt;/h4&gt;</code></p>\n\n<p><code>acctNumberFormat</code> is a pipe, which takes an argument <code>\"Last6\"</code> which displays the first 3 digits as * and last 6 digits as it is.</p>\n\n<p><strong>Example</strong>: 123456789 will be converting as ***456789.</p>\n\n<p>Outside modal pipe is working fine, inside modal it is giving </p>\n\n<blockquote>\n  <p>inline template:30:114 caused by Cannot read property 'slice' of null</p>\n</blockquote>\n\n<pre><code>import {PipeTransform, Pipe} from \"@angular/core\";\n\n@Pipe({\nname: \"acctNumberFormat\"\n})\n\nexport class AccountNumberFormatPipe implements PipeTransform {\n\n// Format types:\n// \"All\" - Show all digits of account numbers. Example: 758000086\n// \"Last4\"  Show only last 6 digits of account numbers. Example: ***000086\n// \"Last6\" - Show only last 4 digits of account numbers. Example: *****0086\n\npublic transform(value: any, format?: string): string {\n    if (typeof(value) === \"number\") {\n        value = value.toString;\n    }\n\n    if (format === undefined) {\n        format = \"All\";\n    }\n\n    switch (format) {\n        case \"All\":\n            // do nothing\n            break;\n        case \"Last4\":\n            value = \"*****\" + value.slice(-4, value.length + 1);\n            break;\n        case \"Last6\":\n            value = \"***\" + value.slice(-6, value.length + 1);\n            break;\n        default:\n            // do nothing\n            break;\n    }\n\n    return value;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I really appreciate your time.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "typescript", "rxjs", "rxjs5", "rxjs6"], "comments": [{"owner": {"reputation": 4003, "user_id": 533711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMAf9.jpg?s=128&g=1", "display_name": "ischenkodv", "link": "https://stackoverflow.com/users/533711/ischenkodv"}, "edited": false, "score": 0, "creation_date": 1540418687, "post_id": 52978032, "comment_id": 92863528, "body": "What is the content of <code>DBMSProxy.getInstance()</code>?"}, {"owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "reply_to_user": {"reputation": 4003, "user_id": 533711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMAf9.jpg?s=128&g=1", "display_name": "ischenkodv", "link": "https://stackoverflow.com/users/533711/ischenkodv"}, "edited": false, "score": 0, "creation_date": 1540418923, "post_id": 52978032, "comment_id": 92863586, "body": "@Dmitri it&#39;s the singleton design pattern, it just returns a static instance"}], "answers": [{"comments": [{"owner": {"reputation": 50474, "user_id": 6680611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRJqu.png?s=128&g=1", "display_name": "cartant", "link": "https://stackoverflow.com/users/6680611/cartant"}, "edited": false, "score": 2, "creation_date": 1540420664, "post_id": 52978617, "comment_id": 92864096, "body": "Use <a href=\"http://rxjs-dev.firebaseapp.com/api/index/function/defer\" rel=\"nofollow noreferrer\"><code>defer</code></a> instead of <code>new Observable</code>, etc."}, {"owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "reply_to_user": {"reputation": 50474, "user_id": 6680611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRJqu.png?s=128&g=1", "display_name": "cartant", "link": "https://stackoverflow.com/users/6680611/cartant"}, "edited": false, "score": 0, "creation_date": 1540420818, "post_id": 52978617, "comment_id": 92864146, "body": "@cartant I know that&#39;s an odd question, but may I ask you why the solution above works? specially why I do need a new observable?"}, {"owner": {"reputation": 50474, "user_id": 6680611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRJqu.png?s=128&g=1", "display_name": "cartant", "link": "https://stackoverflow.com/users/6680611/cartant"}, "edited": false, "score": 0, "creation_date": 1540421000, "post_id": 52978617, "comment_id": 92864217, "body": "Your solution is the same as using <code>defer</code> - just more verbose. The problem is due to the function being called to evaluate the arg passed to <code>concat</code>. With <code>defer</code>, the function is called at the time of subscription - which is what you want."}, {"owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "reply_to_user": {"reputation": 50474, "user_id": 6680611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRJqu.png?s=128&g=1", "display_name": "cartant", "link": "https://stackoverflow.com/users/6680611/cartant"}, "edited": false, "score": 0, "creation_date": 1540421056, "post_id": 52978617, "comment_id": 92864236, "body": "nope sorry I mean, why I can&#39;t just say <code>const operations = concat(     dbmsProxy.createDatastores().asObservable(),     UsersDAO.insert(users) );</code> considering that <code>UsersDAO.insert(users)</code> already returns an <code>Observable</code>?"}, {"owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "reply_to_user": {"reputation": 50474, "user_id": 6680611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRJqu.png?s=128&g=1", "display_name": "cartant", "link": "https://stackoverflow.com/users/6680611/cartant"}, "edited": false, "score": 0, "creation_date": 1540421187, "post_id": 52978617, "comment_id": 92864281, "body": "ok thanks now it makes sense, sorry I just read the edit. So if I don&#39;t use <code>defer</code> (or the previous solution), even if using <code>concat</code>, the function is anyway executed concurrently with the previous one?"}, {"owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "reply_to_user": {"reputation": 50474, "user_id": 6680611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRJqu.png?s=128&g=1", "display_name": "cartant", "link": "https://stackoverflow.com/users/6680611/cartant"}, "edited": false, "score": 0, "creation_date": 1540421480, "post_id": 52978617, "comment_id": 92864360, "body": "thanks @cartant I got it, it makes totally sense now.  The second arg of <code>concat</code>, before to encounter the <code>observable</code>, executes already the code which expects the first one to be completed. I thought that <code>concat</code> by default executes the code sequentially, but it first gets the observables to chain. Thanks a million!"}, {"owner": {"reputation": 34013, "user_id": 674326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb1ffcb8355a833bc34334d75cefeb3d?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/674326/brandon"}, "edited": false, "score": 0, "creation_date": 1541454833, "post_id": 52978617, "comment_id": 93215960, "body": "the problem is that your 2 functions (createDatastores() and UsersDAO.insert) both return <i>hot</i> observables that have already started their work before you subscribe to them.  When you have observable factories that return hot observables, <code>defer</code> is the easiest way to &quot;convert&quot; them into cold observable factories that only do their work when you actually subscribe.  Technically you should also wrap <code>createDatastores()</code> in <code>defer</code> but in your particular use case (where you synchronously subscribe) it doesn&#39;t make a practical difference."}], "tags": [], "owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "is_accepted": true, "score": 4, "last_activity_date": 1540421250, "last_edit_date": 1540421250, "creation_date": 1540419192, "answer_id": 52978617, "question_id": 52978032, "link": "https://stackoverflow.com/questions/52978032/rxjs-issue-with-the-concat-operator-when-executing-operations-sequentially/52978617#52978617", "title": "Rxjs issue with the concat operator when executing operations sequentially", "body": "<p>My current solution is to convert the <code>Subject</code> to <code>Observable</code>, create a new Observable with the second one, and remove the square brackets (otherwise I will get back the observables and not the results) and this seems to work:</p>\n\n<pre><code>const operations = concat(\n    dbmsProxy.createDatastores().asObservable(),\n    defer(() =&gt; UsersDAO.insert(users))\n);\noperations.subscribe(onSubscribe);\nfunction onSubscribe(result: any) {\n    console.log('Finished all: ', result);\n}\n</code></pre>\n"}], "owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 1, "accepted_answer_id": 52978617, "answer_count": 1, "score": 3, "last_activity_date": 1540421250, "creation_date": 1540415842, "question_id": 52978032, "link": "https://stackoverflow.com/questions/52978032/rxjs-issue-with-the-concat-operator-when-executing-operations-sequentially", "title": "Rxjs issue with the concat operator when executing operations sequentially", "body": "<p>I am using rxjs 6 and I am executing two async operations where the order is important. </p>\n\n<p>I do have this chunk of code which works perfectly: </p>\n\n<pre><code>dbmsProxy.createDatastores().subscribe(() =&gt; {\n    UsersDAO.insert(users).subscribe(() =&gt; {\n        console.log('FINISHED ALL THE CHAIN');\n    });\n});\n</code></pre>\n\n<p>But when I try to use <code>concat</code> of <code>rxjs</code> I do have an issue because the second one is executed before the first one finishes: </p>\n\n<pre><code>concat([dbmsProxy.createDatastores(), UsersDAO.insert(users)]).subscribe();\n</code></pre>\n\n<p>Below the DBMSProxy methods</p>\n\n<pre><code>public createDatastores(): Observable&lt;string&gt; {\n    const _this: DBMSProxy = this;\n    const subject = new Subject&lt;string&gt;();\n    const subscription: Subscription = UsersDAO.createDatastore().subscribe(\n        onSuccess,\n        onError,\n        onFinally\n    );\n    return subject;\n\n    function onSuccess(datastore: Nedb): void {\n        console.log(`USERS Datastore Created Successfully`);\n        _this.db.users = datastore;\n        subject.next('success');\n    }\n\n    function onError(err: string) {\n        subject.error('error');\n        console.error(err);\n    }\n\n    function onFinally() {\n        subject.complete();\n        subscription.unsubscribe();\n    }\n}\n\npublic insertDocuments(documents: any, datastore: Nedb): Subject&lt;any&gt; {\n    const subject = new Subject&lt;any&gt;();\n    datastore.insert(documents, onInsert);\n    return subject;\n\n    function onInsert(err: Error, newDocuments: any) {\n        if (err) {\n            subject.error(err);\n        } else {\n            // add to the documents to insert the id just created from nedb when inserting the document\n            documents.forEach((document: any, ind: number) =&gt; {\n                document.id = newDocuments[ind]._id;\n            });\n            subject.next(documents);\n        }\n        subject.complete();\n    }\n}\n</code></pre>\n\n<p>And below the UsersDAO methods: </p>\n\n<pre><code>public static createDatastore(): Subject&lt;Nedb | string&gt; {\n        const subject = new Subject&lt;Nedb | string&gt;();\n        const datastore = new Nedb({\n            filename: USERS_DATASTORE_FULL_NAME,\n            autoload: true,\n            onload\n        });\n        return subject;\n\n        function onload(err: Error) {\n            if (err) {\n                subject.error(\n                    `Error creating USERS datastore: ${err.name} - ${err.message}`\n                );\n            } else {\n                subject.next(datastore);\n            }\n            subject.complete();\n        }\n    }\n\n    public static insert(users: User[]): Observable&lt;any&gt; {\n        return DBMSProxy.getInstance()\n            .insertDocuments(users, DBMSProxy.getInstance().db.users)\n            .pipe(catchError((val: any) =&gt; of('Error inserting the users')));\n    }\n</code></pre>\n\n<p>Any idea of what's going on please? </p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 6992, "user_id": 495157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UFMPn.png?s=128&g=1", "display_name": "JGFMK", "link": "https://stackoverflow.com/users/495157/jgfmk"}, "edited": false, "score": 0, "creation_date": 1540415244, "post_id": 52977891, "comment_id": 92862369, "body": "<a href=\"https://www.learnrxjs.io/operators/\" rel=\"nofollow noreferrer\">learnrxjs.io/operators</a>"}, {"owner": {"reputation": 6494, "user_id": 1668501, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/yuQQv.png?s=128&g=1", "display_name": "Code-EZ", "link": "https://stackoverflow.com/users/1668501/code-ez"}, "edited": false, "score": 1, "creation_date": 1540415541, "post_id": 52977891, "comment_id": 92862479, "body": "did you tried concat arrayOfUsers.pipe(concat(anotherArrayOfUsers )).subscribe((response)=&gt;{}); ?"}], "answers": [{"tags": [], "owner": {"reputation": 1157, "user_id": 4693209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b886011ab9adc2882e8fcb621ecc1a?s=128&d=identicon&r=PG", "display_name": "Quentin Fonck", "link": "https://stackoverflow.com/users/4693209/quentin-fonck"}, "is_accepted": true, "score": 7, "last_activity_date": 1540461685, "creation_date": 1540461685, "answer_id": 52986531, "question_id": 52977891, "link": "https://stackoverflow.com/questions/52977891/how-to-combine-two-observable-arrays-of-the-same-type-in-angular-6/52986531#52986531", "title": "How to combine two observable arrays of the same type in angular 6?", "body": "<p>Since your observables are http calls, I assume they complete after emitting.\nyou can use forkJoin to combine them:</p>\n\n<pre><code>var arrayOfUsers = this.httpCallToGetObservableArrayOfUsers();\nvar anotherArrayOfUsers = this.httpCallToGetADifferentArrayOfUsers();\n\nconst allUsersArray = forkJoin(arrayOfUsers, anotherArrayOfUsers).pipe(\n    map(([users, otherUsers]) =&gt; users.concat(otherUsers))\n);\n</code></pre>\n\n<p>if your observables do not complete, use combineLatest:</p>\n\n<pre><code>const allUsersArray = combineLatest(arrayOfUsers, anotherArrayOfUsers).pipe(\n    map(([users, otherUsers]) =&gt; users.concat(otherUsers))\n);\n</code></pre>\n"}], "owner": {"reputation": 528, "user_id": 4363607, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh6.googleusercontent.com/-rmQAtiHZGXM/AAAAAAAAAAI/AAAAAAAAAEE/KV_KzL5tjCI/photo.jpg?sz=128", "display_name": "TopBanana9000", "link": "https://stackoverflow.com/users/4363607/topbanana9000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2637, "favorite_count": 0, "accepted_answer_id": 52986531, "answer_count": 1, "score": 2, "last_activity_date": 1540461685, "creation_date": 1540415074, "question_id": 52977891, "link": "https://stackoverflow.com/questions/52977891/how-to-combine-two-observable-arrays-of-the-same-type-in-angular-6", "title": "How to combine two observable arrays of the same type in angular 6?", "body": "<p>I cannot seem to figure out how to combine two observable arrays. This is using Angular 6, rxjs 6.3.2</p>\n\n<p>Example code:</p>\n\n<pre><code>var arrayOfUsers = this.httpCallToGetObservableArrayOfUsers();\nvar anotherArrayOfUsers = this.httpCallToGetADifferentArrayOfUsers();\n\n//how do I combine these two Observable&lt;User[]&gt;?\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["javascript", "typescript", "javascript-intellisense"], "answers": [{"tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": true, "score": 0, "last_activity_date": 1540476258, "creation_date": 1540476258, "answer_id": 52991298, "question_id": 52977847, "link": "https://stackoverflow.com/questions/52977847/how-to-create-a-d-ts-file-for-an-internal-javascript-module/52991298#52991298", "title": "How to create a .d.ts file for an internal JavaScript module", "body": "<p>Your <code>config.d.ts</code> should look like this to match the structure of <code>config.js</code>:</p>\n\n<pre><code>const config: {\n    setting1: {\n        prop1: string,\n        prop2: number\n    },\n    setting2: string[]\n};\nexport default config;\n</code></pre>\n\n<p>Note that the <code>config</code> constant is declared with a type that matches the structure of your configuration file, and the <code>export default</code> part is identical.  Having the <code>config.d.ts</code> file in the same directory as <code>config.js</code> should be enough for TypeScript to find it.  If this isn't working, please add the exact error that you get to the question.</p>\n"}], "owner": {"reputation": 8200, "user_id": 3120446, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/heCaC.jpg?s=128&g=1", "display_name": "dx_over_dt", "link": "https://stackoverflow.com/users/3120446/dx-over-dt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52991298, "answer_count": 1, "score": -1, "last_activity_date": 1540476258, "creation_date": 1540414852, "question_id": 52977847, "link": "https://stackoverflow.com/questions/52977847/how-to-create-a-d-ts-file-for-an-internal-javascript-module", "title": "How to create a .d.ts file for an internal JavaScript module", "body": "<p>I have a JavaScript project which uses a json file for configuration.  Which config file is loaded is determined by environment variables, so I have a wrapper file, <code>config.js</code> that loads the proper json file and exports it as a constant.</p>\n\n<p>I'm using VS Code, and would like to create a declaration file so I can get intellisense.  I'm not familiar enough with TypeScript to know the correct file structure nor how to associate my config.js file with the exported interface (or module or namespace?).</p>\n\n<p>This is a dumbed down version of what I have.  As far as I can tell, VS Code doesn't know to associate <code>config.d.ts</code> with the export of <code>config.js</code>.</p>\n\n<p><strong>/config/config.json</strong></p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n    \"setting1\": {\n        \"prop1\": \"foo\",\n        \"prop2\": 123\n    },\n    \"setting2\": [ \"a\", \"b\", \"c\" ]\n}\n</code></pre>\n\n<p><strong>/src/config.js</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import fs from 'fs';\nimport path from 'path';\n\nconst config = JSON.parse(fs.readFileSync(path.join('..', 'config', 'config.json')));\n\n// do some stuff to `config`\n\nexport default config;\n</code></pre>\n\n<p><strong>/src/config.d.ts</strong></p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>export namespace config {\n    export const setting1: {\n            prop1: string,\n            prop2: number\n        },\n        setting2: string[]\n    }\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "redux", "redux-thunk"], "comments": [{"owner": {"reputation": 16909, "user_id": 240424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0a5abec6f92b89177d044ced69acf8?s=128&d=identicon&r=PG", "display_name": "Yakimych", "link": "https://stackoverflow.com/users/240424/yakimych"}, "edited": false, "score": 1, "creation_date": 1547206040, "post_id": 52977666, "comment_id": 95122357, "body": "What is the type signature of your <code>getAllProducts</code> thunk? I have an example of getting redux and redux-thunks typed with typesafe-actions <a href=\"https://github.com/Yakimych/lift-log-react-ts/blob/master/src/components/App.tsx#L88\" rel=\"nofollow noreferrer\">here</a>, but it might be tricky to see the big picture. It could help to see the rest of your relevant code."}], "answers": [{"tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": false, "score": 2, "last_activity_date": 1578987691, "creation_date": 1578987691, "answer_id": 59729326, "question_id": 52977666, "link": "https://stackoverflow.com/questions/52977666/correct-typescript-type-for-thunk-dispatch/59729326#59729326", "title": "Correct TypeScript Type for thunk dispatch?", "body": "<p>Redux can dispatch actions that are plain objects. Say we have such action <code>{type: 'ACTION2'}</code>. We can create action creator and wrap it inside dispatch like this</p>\n\n<pre><code>// This is our action\ninterface Action2 extends Action { type: \"ACTION2\"; }\n\n// And this is action crator\nconst action2 = (): Action2 =&gt; ({ type: \"ACTION2\" });\n</code></pre>\n\n<p>With <code>thunk</code> middleware Redux can dispatch functions. And we can create async action like this</p>\n\n<pre><code>// This action will be dispatched from async action creator\ninterface Action1 extends Action { type: \"ACTION1\"; payload: string; }\n\n// And async action creator\nconst thunkAction = (arg: string): ThunkAction&lt;Promise&lt;void&gt;, {}, AppState, KnownActions&gt; =&gt; \n    async dispatch =&gt; {\n        const res = await asyncFunction(arg);\n        dispatch({ type: \"ACTION1\", payload: res });\n    },  \n</code></pre>\n\n<p>Here <code>ThunkAction&lt;R, S, E, A extends Action&gt;</code> type is used. It accepts following type arguments:</p>\n\n<ul>\n<li><code>R</code> stays for return type of the internal function. In the above example, internal function is async function so it returns <code>Promise&lt;void&gt;</code></li>\n<li><code>S</code> stays for the app state</li>\n<li><code>E</code> is the extension attribute type which is not used</li>\n<li><code>A</code> is type of the action. <code>KnownActions</code> in example above is the union of all possible action types (<code>type KnownActions = Action1 | Action2;</code>)</li>\n</ul>\n\n<p>Now lets look at how component can be typed.</p>\n\n<pre><code>interface Component1DispatchProps {\n  action2: () =&gt; Action2;\n  thunkAction: (arg: string) =&gt; Promise&lt;void&gt;;\n}\n\ninterface Component1StateProps {\n  stateprop: string;\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch&lt;AppState, {}, KnownActions&gt;\n) =&gt; {\n  return {\n    action2: () =&gt; dispatch(action2()),\n    thunkAction: (arg: string) =&gt; \n      dispatch(thunkAction(arg))\n  };\n};\n</code></pre>\n\n<p><code>thunkAction</code> method returns <code>dispatch(thunkAction(arg))</code>, where <code>thunkAction(arg)</code> returns <code>ThunkAction&lt;Promise&lt;void&gt;, {}, AppState, KnownActions&gt;</code>. So <code>dispatch</code> will be called with the argument of type <code>ThunkAction</code> and will be resolved to </p>\n\n<pre><code>&lt;TReturnType&gt;(\n  thunkAction: ThunkAction&lt;TReturnType, TState, TExtraThunkArg, TBasicAction&gt;,\n): TReturnType;\n</code></pre>\n\n<p>As a result <code>dispatch(thunkAction(arg))</code> will return <code>TReturnType</code> or <code>Promise&lt;void&gt;</code> in our example. Such signature is set for <code>thunkAction</code> in <code>Component1DispatchProps</code>.</p>\n\n<p>Complete example is <a href=\"https://codesandbox.io/s/thunkdispatch-fmpq4\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1717, "user_id": 10468320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b208e351947bac08d3cf4337e5570bd2?s=128&d=identicon&r=PG&f=1", "display_name": "Kaca992", "link": "https://stackoverflow.com/users/10468320/kaca992"}, "is_accepted": false, "score": 0, "last_activity_date": 1579957890, "last_edit_date": 1579957890, "creation_date": 1579956505, "answer_id": 59909374, "question_id": 52977666, "link": "https://stackoverflow.com/questions/52977666/correct-typescript-type-for-thunk-dispatch/59909374#59909374", "title": "Correct TypeScript Type for thunk dispatch?", "body": "<p>You could also provide another override for the redux Dispatch function in your global type definition:</p>\n\n<p>(put this inside global.d.ts or some other global type definition)</p>\n\n<pre><code>import { ThunkAction } from 'redux-thunk';\nimport { Action } from 'redux';\n\ndeclare module 'redux' {\n    export interface Dispatch&lt;A extends Action = AnyAction&gt; {\n        &lt;T extends ThunkAction&lt;any, any, any, any&gt;&gt;(action: T): T extends ThunkAction&lt;infer K, any, any, any&gt; ? K : never;\n    }\n}\n</code></pre>\n\n<p>And then in your mapDispatchToProps use Dispatch type and not ThunkDispatch.</p>\n"}, {"tags": [], "owner": {"reputation": 5518, "user_id": 923340, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NZPwv.jpg?s=128&g=1", "display_name": "Lukasz &#39;Severiaan&#39; Grela", "link": "https://stackoverflow.com/users/923340/lukasz-severiaan-grela"}, "is_accepted": false, "score": 3, "last_activity_date": 1585948113, "last_edit_date": 1585948113, "creation_date": 1585947220, "answer_id": 61020248, "question_id": 52977666, "link": "https://stackoverflow.com/questions/52977666/correct-typescript-type-for-thunk-dispatch/61020248#61020248", "title": "Correct TypeScript Type for thunk dispatch?", "body": "<p>This setup works very well for me:</p>\n\n<pre><code>// store.ts\n//...\nexport type TAppState = ReturnType&lt;typeof rootReducer&gt;;\nexport type TDispatch = ThunkDispatch&lt;TAppState, void, AnyAction&gt;;\nexport type TStore = Store&lt;TAppState, AnyAction&gt; &amp; { dispatch: TDispatch };\nexport type TGetState = () =&gt; TAppState;\n//...\nconst store: TStore = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(...middleware), ...enhancers)\n);\nexport default store;\n</code></pre>\n\n<p>Where <code>rootReducer</code> on my setup looks like this <code>const rootReducer = createRootReducer(history);</code></p>\n\n<pre><code>// createRootReducer.ts\nimport { combineReducers, Reducer, AnyAction } from 'redux';\nimport { History } from 'history';\nimport {\n  connectRouter,\n  RouterState,\n  LocationChangeAction,\n} from 'connected-react-router';\n// ... here imports of reducers\ntype TAction = AnyAction &amp; LocationChangeAction&lt;any&gt;;\n\nexport type TRootReducer = Reducer&lt;\n  {\n    // ... here types of the reducer data slices\n    router: RouterState;\n  },\n  TAction\n&gt;;\nconst createRootReducer = (history: History): TRootReducer =&gt;\n  combineReducers({\n    // ... here actual inserting imported reducers\n    router: connectRouter(history),\n  });\n\nexport default createRootReducer;\n</code></pre>\n\n<p>Then in connected component</p>\n\n<pre><code>import { connect } from 'react-redux';\nimport Add, { IProps } from './Add'; // Component\nimport { TDispatch, TAppState } from '../../store';\n\ntype TStateProps = Pick&lt;\n  IProps,\n  'title' | 'data' | 'loading'\n&gt;;\nconst mapStateToProps = (\n  state: TAppState,\n): TStateProps =&gt; {\n    // ... here you have typed state :)\n    // and return the TStateProps object as required\n    return {\n      loading: state.someReducer.loading,\n      //...\n    }\n}\n\ntype TDispatchProps = Pick&lt;IProps,  'onSave'&gt;;\nconst mapDispatchToProps = (\n  dispatch: TDispatch,\n): TDispatchProps =&gt; {\n   // here you  have typed dispatch now\n   // return the TDispatchProps object as required\n   return {\n    onSave: (): void =&gt; {\n      dispatch(saveEntry()).then(() =&gt; {\n        backButton();\n      });\n    },\n   }\n}\n\n</code></pre>\n\n<p>As for the thunk actions I do as follows</p>\n\n<pre><code>// this is a return type of the thunk\ntype TPromise = Promise&lt;ISaveTaskResponse | Error&gt;;\n\nexport const saveEntry = (): ThunkAction&lt;\n  TPromise, // thunk return type\n  TAppState, // state type\n  any, // extra argument, (not used)\n  ISaveEntryAction // action type\n&gt; =&gt; (dispatch: TDispatch, getState: TGetState): TPromise =&gt; {\n  // use getState\n  // dispatch start saveEntry action\n  // make async call\n  return Axios.post('/some/endpoint', {}, {})\n    .then((results: { data: ISaveTaskResponse; }): Promise&lt;ISaveTaskResponse&gt; =&gt; {\n      // get results\n      // you can dispatch finish saveEntry action\n      return Promise.resolve(data);\n    })\n    .catch((error: Error): Promise&lt;Error&gt; =&gt; {\n      // you can dispatch an error saveEntry action\n      return Promise.reject(error);\n    });\n};\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 514, "user_id": 2923905, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b8c20fba936df81c2f374adc60ad9a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/2923905/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1600938231, "creation_date": 1600938231, "answer_id": 64043096, "question_id": 52977666, "link": "https://stackoverflow.com/questions/52977666/correct-typescript-type-for-thunk-dispatch/64043096#64043096", "title": "Correct TypeScript Type for thunk dispatch?", "body": "<p>In my experience the problem is not with the type of the dispatch parameter but actually the <strong>props type on the component</strong>.</p>\n<p><em>Note: My solution is not using the function notation of <code>mapDispatchToProps</code> since that is <a href=\"https://react-redux.js.org/using-react-redux/connect-mapdispatch\" rel=\"nofollow noreferrer\">not recommended</a> until necessary (and I did not needed it yet). But I guess this solution could be adapted to it (having the right sandbox).</em></p>\n<p>To define the props properly (without needing to create a copy-pasta interface) it is necessary to <strong>separate the <code>mapDispatchToProps</code> into two pieces, one for reducer actions and one for thunk actions</strong>.</p>\n<p>To show this solution I've forked an example from another answer (thanks @Fyodor).</p>\n<p>Full code here: <a href=\"https://codesandbox.io/s/thunkdispatch-forked-uss1b?file=/src/Component.tsx\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/thunkdispatch-forked-uss1b?file=/src/Component.tsx</a></p>\n<p>Component props are a combination of:</p>\n<pre><code>interface ComponentOwnProps {\n  ownprop: string;\n}\n\nconst mapStateToProps = (state: AppState) =&gt; ({\n  stateprop: state.stateprop\n});\n\nconst mapDispatchToProps = {\n  action2\n};\n\nconst mapDispatchThunkToProps = {\n  thunkAction\n};\n</code></pre>\n<p>The complete type of the props is defined as:</p>\n<pre><code>type ComponentProps = ComponentOwnProps &amp;\n  ReturnType&lt;typeof mapStateToProps&gt; &amp;\n  typeof mapDispatchToProps &amp;\n  ThunkProps&lt;typeof mapDispatchThunkToProps&gt;;\n</code></pre>\n<p>The only trick here is <code>ThunkProps</code> which converts the Thunk action types in the dictionary from &quot;double function&quot; <code>(args) =&gt; (dispatch, getState) =&gt; void</code> to the connected (and simpler) <code>(args) =&gt; void</code> functions.</p>\n<pre><code>// types from redux examples (usually in `store.ts`)\nexport type RootState = ReturnType&lt;typeof store.getState&gt;;\nexport type AppThunk&lt;ReturnType = void&gt; = ThunkAction&lt;\n  ReturnType,\n  RootState,\n  any, // or some ThunkExtraArgument interface\n  Action&lt;string&gt;\n&gt;;\n\n// the tricky part: convert each `(args) =&gt; AppThunk =&gt; void` to `(args) =&gt; void`\nexport type ThunkProps&lt;T extends { [K in keyof T]: (...a: any[]) =&gt; AppThunk&lt;void&gt; }&gt; = {\n  [K in keyof T]: (...args: Parameters&lt;T[K]&gt;) =&gt; void;\n};\n</code></pre>\n<p>... and finally you can connect the component</p>\n<pre><code>// don't forget to combine the two mapDispatch-es\nexport default connect(\n  mapStateToProps,\n  {...mapDispatchToProps, ...mapDispatchThunkToProps}\n)(Component);\n</code></pre>\n<p>Full code (forked and updated from @Fyodor's answer): <a href=\"https://codesandbox.io/s/thunkdispatch-forked-uss1b?file=/src/Component.tsx\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/thunkdispatch-forked-uss1b?file=/src/Component.tsx</a> ... all important code and types are in <code>Component.tsx</code> for convenience.</p>\n<p><em>Note: even though this solution has some limitations, for me it serves the purpose of <strong>not writing unnecessary interfaces</strong> and having <strong>well typed props</strong> including function params.</em></p>\n"}], "owner": {"reputation": 4233, "user_id": 183523, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/M1f8O.jpg?s=128&g=1", "display_name": "Carl Rippon", "link": "https://stackoverflow.com/users/183523/carl-rippon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6000, "favorite_count": 2, "answer_count": 4, "score": 17, "last_activity_date": 1600938231, "creation_date": 1540413908, "last_edit_date": 1548235214, "question_id": 52977666, "link": "https://stackoverflow.com/questions/52977666/correct-typescript-type-for-thunk-dispatch", "title": "Correct TypeScript Type for thunk dispatch?", "body": "<p>I have an asynchronous redux action and so am using the thunk middleware.</p>\n\n<p>I have <code>mapStateToProps</code>, <code>mapDispatchToProps</code> and <code>connect</code> functions for a component as follows:</p>\n\n<pre><code>const mapStateToProps = (store: IApplicationState) =&gt; {\n  return {\n    loading: store.products.loading,\n    products: store.products.products\n  };\n};\nconst mapDispatchToProps = (dispatch: any) =&gt; {\n  return {\n    getAllProducts: () =&gt; dispatch(getAllProducts())\n  };\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProductsPage);\n</code></pre>\n\n<p><strong>This all works but I wondered if is possible to replace the <code>any</code> type on the dispatch parameter in <code>mapDispatchToProps</code>?</strong></p>\n\n<p>I tried <code>ThunkDispatch&lt;IApplicationState, void, Action&gt;</code> but get the following TypeScript error on the connect function:</p>\n\n<pre><code>Argument of type 'typeof ProductsPage' is not assignable to parameter of type 'ComponentType&lt;Matching&lt;{ loading: boolean; products: IProduct[]; } &amp; { getAllProducts: () =&gt; Promise&lt;void&gt;; }, IProps&gt;&gt;'.\n  Type 'typeof ProductsPage' is not assignable to type 'ComponentClass&lt;Matching&lt;{ loading: boolean; products: IProduct[]; } &amp; { getAllProducts: () =&gt; Promise&lt;void&gt;; }, IProps&gt;, any&gt;'.\n    Types of property 'getDerivedStateFromProps' are incompatible.\n      Type '(props: IProps, state: IState) =&gt; { products: IProduct[]; search: string; }' is not assignable to type 'GetDerivedStateFromProps&lt;Matching&lt;{ loading: boolean; products: IProduct[]; } &amp; { getAllProducts: () =&gt; Promise&lt;void&gt;; }, IProps&gt;, any&gt;'.\n        Types of parameters 'props' and 'nextProps' are incompatible.\n          Type 'Readonly&lt;Matching&lt;{ loading: boolean; products: IProduct[]; } &amp; { getAllProducts: () =&gt; Promise&lt;void&gt;; }, IProps&gt;&gt;' is not assignable to type 'IProps'.\n            Types of property 'getAllProducts' are incompatible.\n              Type '() =&gt; Promise&lt;void&gt;' is not assignable to type '() =&gt; (dispatch: Dispatch&lt;AnyAction&gt;) =&gt; Promise&lt;void&gt;'.\n                Type 'Promise&lt;void&gt;' is not assignable to type '(dispatch: Dispatch&lt;AnyAction&gt;) =&gt; Promise&lt;void&gt;'.\n                  Type 'Promise&lt;void&gt;' provides no match for the signature '(dispatch: Dispatch&lt;AnyAction&gt;): Promise&lt;void&gt;'.\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YOMcD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YOMcD.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Is it possible to replace the <code>any</code> type on the dispatch parameter in <code>mapDispatchToProps</code>?</strong></p>\n"}, {"tags": ["node.js", "typescript", "npm"], "comments": [{"owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1540411908, "post_id": 52977116, "comment_id": 92860898, "body": "These instructions are specific to the <code>bt-presence</code> project. npmjs.com uses the README from the repository, so that text is just a copy of the README. Are you running into a specific error?"}, {"owner": {"reputation": 121, "user_id": 5956071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a942991f3b19567185f3dad2076f194e?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/5956071/brian"}, "reply_to_user": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1540418296, "post_id": 52977116, "comment_id": 92863420, "body": "I am using it as an example - where would a git repository, that includes a TypeScript package, be cloned to, so that it could be built and where would that build command actually be run from?"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5956071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a942991f3b19567185f3dad2076f194e?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/5956071/brian"}, "edited": false, "score": 0, "creation_date": 1540503142, "post_id": 52991437, "comment_id": 92901426, "body": "Thanks Matt. I&#39;m using it with Node-Red and I&#39;d like to use it as a replacement for the currently installed version while I test my changes.  As the installed version does not have the <code>ts</code> file, could I just insert that file in the right place in the installed versions folder? Is the <code>build</code> command from the <b>modules</b> <code>package.json</code> location or the applications?"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "reply_to_user": {"reputation": 121, "user_id": 5956071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a942991f3b19567185f3dad2076f194e?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/5956071/brian"}, "edited": false, "score": 0, "creation_date": 1540508898, "post_id": 52991437, "comment_id": 92903205, "body": "First question: I don&#39;t recommend modifying an installed directory created by npm.  Instead add <code>&quot;bt-presence&quot;: &quot;path&#47;to&#47;bt-presence&quot;</code> (replace with the actual relative path to your <code>bt-presence</code> repository) to the <code>dependencies</code> section of <code>package.json</code> in your application and then run <code>npm install</code>, and npm should make a symlink to your <code>bt-presence</code> repository so that Node-RED will use it.  Second question: the <code>bt-presence</code> <code>package.json</code> location (I updated the answer)."}, {"owner": {"reputation": 121, "user_id": 5956071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a942991f3b19567185f3dad2076f194e?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/5956071/brian"}, "edited": false, "score": 0, "creation_date": 1543181307, "post_id": 52991437, "comment_id": 93814910, "body": "I am on this again Matt - Managed to clone and build a version of <code>bt-presence</code>. I can see where to add the dependency but a little nervous of running the <code>npm install</code> command.  Where exactly in relation to the <code>node-modules</code> folder should I run this? You mention <code>application</code> but this isn&#39;t really an application - just another module in <code>node-modules</code> that requires <code>bt-presence</code>. Do I just run the command in the folder where the <code>package.json</code> file resides that I have set the dependency?"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "reply_to_user": {"reputation": 121, "user_id": 5956071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a942991f3b19567185f3dad2076f194e?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/5956071/brian"}, "edited": false, "score": 0, "creation_date": 1543272582, "post_id": 52991437, "comment_id": 93850607, "body": "I assume you have a top directory with a <code>package.json</code> file you created that specifies dependencies on <code>node-red</code> and <code>node-red-contrib-bt-presence</code>.  Add a relative-path dependency on <code>bt-presence</code> to this <code>package.json</code> file and run <code>npm install</code> in the top directory.  As long as the <code>bt-presence</code> version number is compatible, <code>node-red-contrib-bt-presence</code> will use your modified version of <code>bt-presence</code> without you having to edit <code>node_modules&#47;node-red-contrib-bt-presence&#47;package.json</code>.  Hopefully that does it; let me know if you need more help."}], "tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": true, "score": 1, "last_activity_date": 1540508421, "last_edit_date": 1540508421, "creation_date": 1540476718, "answer_id": 52991437, "question_id": 52977116, "link": "https://stackoverflow.com/questions/52977116/how-to-modify-an-npm-package-built-with-typescript/52991437#52991437", "title": "How to modify an npm package built with TypeScript", "body": "<ul>\n<li>If you want to work on the <code>bt-presence</code> package in isolation, you can put the cloned repository anywhere.  If you want to use your modified version of <code>bt-presence</code> in combination with an application, my recommended approach is to register <code>bt-presence</code> as a dependency in the application's <code>package.json</code> file with the version set to a relative path to your <code>bt-presence</code> repository; then running <code>npm install</code> in the application will make a symlink from <code>node_modules/bt-presence</code> in the application to your <code>bt-presence</code> repository.</li>\n<li><code>npm run build</code> should indeed be run from the root folder that contains the <code>package.json</code> of <code>bt-presence</code>.</li>\n<li>If you just want to change the code of <code>bt-presence</code>, you won't need to modify its <code>package.json</code>.  You would only modify the <code>package.json</code> if you need to change any of the settings in there, e.g, if you need to add additional dependencies to your version of <code>bt-presence</code>.</li>\n</ul>\n\n<p>None of the above is really specific to TypeScript.  (Some JavaScript packages have build processes too if they need to transform or package the JavaScript files in some way.)</p>\n"}], "owner": {"reputation": 121, "user_id": 5956071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a942991f3b19567185f3dad2076f194e?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/5956071/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 1, "accepted_answer_id": 52991437, "answer_count": 1, "score": 1, "last_activity_date": 1540508421, "creation_date": 1540411324, "question_id": 52977116, "link": "https://stackoverflow.com/questions/52977116/how-to-modify-an-npm-package-built-with-typescript", "title": "How to modify an npm package built with TypeScript", "body": "<p>I want to try and make some changes to a package published in npm? (I've suggest some changes as an issue but I think they are simple enough for me to attempt them).</p>\n\n<p><a href=\"https://www.npmjs.com/package/bt-presence#contributing--modifying\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/bt-presence#contributing--modifying</a></p>\n\n<p>The author supplies some information on how to modify the package, but not really enough for someone doing it for the first time.</p>\n\n<ul>\n<li>Where should I clone the GitHub repo to?  The folder where the package is installed?  I tried it in my home folder and that would not build (unmodified).</li>\n<li>The command <code>npm run build</code> - where is this run from?  The root folder of the package where the <code>package.json</code> is?</li>\n<li>Will I need to modify the <code>package.json</code>?</li>\n</ul>\n\n<p>In general what is the best way to develop something like this for npm?  I've worked on packages before but they were simply Javascript.</p>\n"}, {"tags": ["typescript", "ecmascript-6", "mocha.js", "babeljs", "babel-register"], "comments": [{"owner": {"reputation": 134258, "user_id": 785065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAbxM.jpg?s=128&g=1", "display_name": "loganfsmyth", "link": "https://stackoverflow.com/users/785065/loganfsmyth"}, "edited": false, "score": 0, "creation_date": 1540411290, "post_id": 52977075, "comment_id": 92860610, "body": "Do you have an issue if you enable both presets?"}, {"owner": {"reputation": 1467, "user_id": 9335205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ea423e163268f02a8a87d4163a8d0b7?s=128&d=identicon&r=PG&f=1", "display_name": "JGleason", "link": "https://stackoverflow.com/users/9335205/jgleason"}, "reply_to_user": {"reputation": 134258, "user_id": 785065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAbxM.jpg?s=128&g=1", "display_name": "loganfsmyth", "link": "https://stackoverflow.com/users/785065/loganfsmyth"}, "edited": false, "score": 0, "creation_date": 1540412282, "post_id": 52977075, "comment_id": 92861092, "body": "yeah which ever is not the right way and comes first it breaks. Thanks for reminding me I will add some"}], "owner": {"reputation": 1467, "user_id": 9335205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ea423e163268f02a8a87d4163a8d0b7?s=128&d=identicon&r=PG&f=1", "display_name": "JGleason", "link": "https://stackoverflow.com/users/9335205/jgleason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540412617, "creation_date": 1540411197, "last_edit_date": 1540412617, "question_id": 52977075, "link": "https://stackoverflow.com/questions/52977075/can-i-use-babel-to-transpile-both-ecma-and-typescript", "title": "Can I use Babel to transpile both ECMA and Typescript?", "body": "<p>I have a simple project with 2 tests. </p>\n\n<pre><code>test.jsx\ntest.tsx\n</code></pre>\n\n<p>When I run mocha with the following presets </p>\n\n<pre><code>\"presets\": [\"@babel/preset-env\", \"@babel/preset-react\"]\n</code></pre>\n\n<p>The jsx test works but the tsx has a problem parsing...</p>\n\n<pre><code>(function (exports, require, module, __filename, __dirname) { import React from\n'react';\n                                                                     ^^^^^\n\nSyntaxError: Unexpected identifier\n</code></pre>\n\n<p>When I change to...</p>\n\n<pre><code>\"presets\": [\"@babel/preset-typescript\", \"@babel/preset-react\"],\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>I:\\...\\enzyme-example-mocha\\test\\.setup.js:1\n(function (exports, require, module, __filename, __dirname) { import { JSDOM } f\nrom 'jsdom';\n                                                                     ^\n\nSyntaxError: Unexpected token {\n</code></pre>\n\n<p>Is there a way I can get both to work? My project is based off of </p>\n\n<p><a href=\"https://github.com/airbnb/enzyme/tree/master/packages/enzyme-example-mocha\" rel=\"nofollow noreferrer\">https://github.com/airbnb/enzyme/tree/master/packages/enzyme-example-mocha</a></p>\n\n<p>I also tried </p>\n\n<pre><code>[\"@babel/preset-typescript\", \"@babel/preset-env\", \"@babel/preset-react\"]\n</code></pre>\n\n<p>But I get the same...</p>\n\n<pre><code>I:\\...\\enzyme-example-mocha\\test\\.setup.js:1\n(function (exports, require, module, __filename, __dirname) { import { JSDOM } f\nrom 'jsdom';\n</code></pre>\n\n<p>If I switch around <code>[\"@babel/preset-env\", \"@babel/preset-typescript\", \"@babel/preset-react\"]</code> I get </p>\n\n<pre><code>(function (exports, require, module, __filename, __dirname) { import React from\n'react';\n                                                                     ^^^^^\n\nSyntaxError: Unexpected identifier\n</code></pre>\n"}, {"tags": ["typescript", "typescript-typings"], "answers": [{"comments": [{"owner": {"reputation": 12301, "user_id": 5776910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-OvtBiuAouu4/AAAAAAAAAAI/AAAAAAAAEug/tdrwTl5nWc8/photo.jpg?sz=128", "display_name": "Rico Kahler", "link": "https://stackoverflow.com/users/5776910/rico-kahler"}, "edited": false, "score": 0, "creation_date": 1540482710, "post_id": 52992479, "comment_id": 92891887, "body": "Thanks for the answer! Definitely helped! I found that <code>import &#39;@sift&#47;skipper&#47;typings&#39;;</code> works (where the library has the file <code>typings.d.ts</code> in its root) when I import it at the entry point of my app. I don&#39;t hate the way this looks but now I question how unconventional this is. What do you think? How weird is this?"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "reply_to_user": {"reputation": 12301, "user_id": 5776910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-OvtBiuAouu4/AAAAAAAAAAI/AAAAAAAAEug/tdrwTl5nWc8/photo.jpg?sz=128", "display_name": "Rico Kahler", "link": "https://stackoverflow.com/users/5776910/rico-kahler"}, "edited": false, "score": 1, "creation_date": 1540485857, "post_id": 52992479, "comment_id": 92893614, "body": "It&#39;s unconventional, but if you&#39;re OK with it for your own projects, fine.  TypeScript is designed so that a package can bundle its own type declarations seamlessly by placing the <code>.d.ts</code> files alongside the <code>.js</code> files and the caller doesn&#39;t have to do anything other than the import of the module it actually wants to use.  Many packages do this.  I&#39;ve never seen another package that expects callers to do a separate import to get type declarations, though I&#39;ve seen one package (Kendo UI) that expects developers to download the <code>.d.ts</code> elsewhere and add it to their project."}], "tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": true, "score": 1, "last_activity_date": 1540495659, "last_edit_date": 1540495659, "creation_date": 1540479760, "answer_id": 52992479, "question_id": 52976454, "link": "https://stackoverflow.com/questions/52976454/how-do-i-add-typings-to-a-multiple-file-es-style-imports-javascript-repo/52992479#52992479", "title": "How do I add typings to a multiple-file/es-style-imports javascript repo?", "body": "<p>You are out of luck; if you want to make the imports work without special configuration in every project that uses the library, you'll need to create a <code>.d.ts</code> file alongside each <code>.js</code> file.</p>\n\n<p>Based on my experiments, TypeScript's algorithm to load a project is roughly like this (others feel free to contribute corrections):</p>\n\n<ol>\n<li>Load all source files specified by the <code>files</code>, <code>include</code>, and <code>exclude</code> fields and the <code>types</code> option in <code>tsconfig.json</code>.  For each loaded file, follow <code>&lt;reference&gt;</code> directives and attempt to follow module imports using <a href=\"https://www.typescriptlang.org/docs/handbook/module-resolution.html\" rel=\"nofollow noreferrer\">module resolution</a>, but if module resolution fails, don't report an error yet.  </li>\n<li>Make a list of all module declarations seen (<code>declare module \"foo\" { ... }</code>).</li>\n<li>Revisit each module import to associate it with an actual module: if a module declaration was seen, then use it, otherwise if module resolution found a file that is an external module, then use it, otherwise report an error.</li>\n</ol>\n\n<p>(Side note for the curious: this means that if an import in step 1 loads a a non-module file with global declarations, those global declarations remain in effect even if the import ends up associated with a module declaration instead of the file!)</p>\n\n<p>Previously, your <code>typings.d.ts</code> file got loaded as one of the source files of the original project.  But now, nothing is forcing the <code>typings.d.ts</code> file in the library to be loaded, and module resolution for <code>'@sift/skipper/components/Loader'</code> is looking for a <code>.d.ts</code> file alongside the <code>.js</code> file, and none exists.  The <code>types</code> field of <code>package.json</code> only comes into play when you load the root of a package (via either an import or the <code>types</code> option or <code>&lt;reference types=\"...\"/&gt;</code>); it isn't a general way to find type declarations for all submodules of a package.</p>\n\n<p>Your other options (in roughly increasing order of unconventionality) would be to have the main project use <code>&lt;reference path=\"...\"/&gt;</code> to the library's <code>typings.d.ts</code>, add the library's <code>typings.d.ts</code> to the <code>files</code> or <code>include</code> field of the main project's <code>tsconfig.json</code>, or use <code>typeRoots</code> and <code>types</code> to force the loading of the root of the library package.</p>\n"}], "owner": {"reputation": 12301, "user_id": 5776910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-OvtBiuAouu4/AAAAAAAAAAI/AAAAAAAAEug/tdrwTl5nWc8/photo.jpg?sz=128", "display_name": "Rico Kahler", "link": "https://stackoverflow.com/users/5776910/rico-kahler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 52992479, "answer_count": 1, "score": 0, "last_activity_date": 1540495659, "creation_date": 1540408721, "last_edit_date": 1540409618, "question_id": 52976454, "link": "https://stackoverflow.com/questions/52976454/how-do-i-add-typings-to-a-multiple-file-es-style-imports-javascript-repo", "title": "How do I add typings to a multiple-file/es-style-imports javascript repo?", "body": "<p><strong>TL;DR</strong>: we want one typings file for the multiple files in the repo</p>\n\n<hr>\n\n<p>We have an internal javascript library we're trying to add types to. This javascript library is does not bundle it's files so they are imported like so:</p>\n\n<pre><code>import someModule from '@org/some/module/path';\nimport otherModule from '@org/some/module/other';\n</code></pre>\n\n<p>So far we've had success by creating a typings declaration file (<code>typings.d.ts</code>) and putting this file at the root of our typescript project:</p>\n\n<p><code>typings.d.ts</code></p>\n\n<pre><code>declare module '@org/some/module/path' {\n  export default function someModule(): string;\n}\n\ndeclare module '@org/some/module/other' {\n  export default function otherModule(): string;\n}\n</code></pre>\n\n<p>BUT since we're getting a bit more serious with TypeScript, we're looking to move this typings file to that library (instead of in the repo that imports the library) so that those typings can live in that library's repo and be re-used in future typescript projects.</p>\n\n<hr>\n\n<p>What I've tried is moving the <code>typings.d.ts</code> file to the internal repo and adding the key <code>\"types\": \"./typings.d.ts\"</code> to the repo's package.json</p>\n\n<p>After publishing the I'm stilling getting the following error:</p>\n\n<pre><code>Could not find a declaration file for module '@sift/skipper/components/Loader'\n</code></pre>\n\n<hr>\n\n<p>Am I missing something? Any ideas?</p>\n"}, {"tags": ["json", "angular", "typescript"], "comments": [{"owner": {"reputation": 2485, "user_id": 3812888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/blosZ.jpg?s=128&g=1", "display_name": "The Head Rush", "link": "https://stackoverflow.com/users/3812888/the-head-rush"}, "edited": false, "score": 0, "creation_date": 1540408891, "post_id": 52976386, "comment_id": 92859494, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/8312459/iterate-through-object-properties\" title=\"iterate through object properties\">stackoverflow.com/questions/8312459/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 10541539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9c05ce76ea5544009ad19cf400f707?s=128&d=identicon&r=PG&f=1", "display_name": "ceaserg", "link": "https://stackoverflow.com/users/10541539/ceaserg"}, "is_accepted": false, "score": 1, "last_activity_date": 1540409185, "creation_date": 1540409185, "answer_id": 52976561, "question_id": 52976386, "link": "https://stackoverflow.com/questions/52976386/how-can-a-iterate-through-objects-instead-of-array/52976561#52976561", "title": "How can a Iterate through objects instead of array", "body": "<p>You should parse the JSON object that your HTTP GET returns and treat it as an object so you can access each member of the JSON object.</p>\n\n<pre><code>this.search().subscribe( data =&gt; {\n    let jsonObject: any = JSON.parse(data);\n    console.log(jsonObject);\n    // parse through jsonObject members\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1118, "user_id": 10395768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-E51_QgOLMUQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXaFOFylQ9iX8Ti5A9m60yAGIxAaA/mo/photo.jpg?sz=128", "display_name": "Bal&#225;zs Tak&#225;cs", "link": "https://stackoverflow.com/users/10395768/bal%c3%a1zs-tak%c3%a1cs"}, "is_accepted": true, "score": 0, "last_activity_date": 1540410740, "creation_date": 1540410740, "answer_id": 52976947, "question_id": 52976386, "link": "https://stackoverflow.com/questions/52976386/how-can-a-iterate-through-objects-instead-of-array/52976947#52976947", "title": "How can a Iterate through objects instead of array", "body": "<p>Iterate the response object, but select only those values which are objects.</p>\n\n<pre><code>for(const key of Object.keys(sampleResponseObject)) {\n    if(typeof sampleResponseObject[key] === 'object') {\n        console.log(sampleResponseObject[key]);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10301881, "user_type": "registered", "profile_image": "https://graph.facebook.com/151769805748334/picture?type=large", "display_name": "Miguel Barra", "link": "https://stackoverflow.com/users/10301881/miguel-barra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52976947, "answer_count": 2, "score": 0, "last_activity_date": 1540410740, "creation_date": 1540408401, "last_edit_date": 1540409301, "question_id": 52976386, "link": "https://stackoverflow.com/questions/52976386/how-can-a-iterate-through-objects-instead-of-array", "title": "How can a Iterate through objects instead of array", "body": "<p>I want to retrieve json data from this url <a href=\"http://mindicador.cl/api\" rel=\"nofollow noreferrer\">http://mindicador.cl/api</a>. But specifically I want to retrieve all objects like \"uf\", \"ivp\" and so on in order to then show them in a table or list. Unfortunately, there are no in array format so How can Iterate over there?</p>\n\n<pre><code>{\n    \"version\": \"1.5.0\",\n    \"autor\": \"mindicador.cl\",\n    \"fecha\": \"2018-10-24T17:00:00.000Z\",\n    \"uf\": {\n        \"codigo\": \"uf\",\n        \"nombre\": \"Unidad de fomento (UF)\",\n        \"unidad_medida\": \"Pesos\",\n        \"fecha\": \"2018-10-24T04:00:00.000Z\",\n        \"valor\": 27413.56\n    },\n    \"ivp\": {\n        \"codigo\": \"ivp\",\n        \"nombre\": \"Indice de valor promedio (IVP)\",\n        \"unidad_medida\": \"Pesos\",\n        \"fecha\": \"2018-10-24T04:00:00.000Z\",\n        \"valor\": 28523.73\n    }\n}\n</code></pre>\n\n<p>And I want to iterate through all objects, that is, \"uf\", \"ivp\", and so on. How can I do it? It's not an array so I can't use map I guess.</p>\n\n<p>This is my service's method:</p>\n\n<pre><code>search(): Observable&lt;Object&gt; {\n    const queryUrl = this.apiUrl;\n    return this.http.get(queryUrl);\n  }\n</code></pre>\n"}, {"tags": ["json", "angular", "typescript"], "comments": [{"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540442671, "post_id": 52976315, "comment_id": 92869079, "body": "Can you tell what you are getting in <code>resouces</code> of  <code>let resource: string = resources[label];</code>?"}, {"owner": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "reply_to_user": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540447583, "post_id": 52976315, "comment_id": 92870616, "body": "@Justcode I wasn&#39;t sure of what you were asking for, so I replaced my example to include the <code>resource</code> variable, and I added the console output when doing <code>console.log(resources)</code>"}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540448532, "post_id": 52976315, "comment_id": 92871007, "body": "Can you post actual data instead of <code>Object { Object, ... }</code>? this should be a resources object."}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540448662, "post_id": 52976315, "comment_id": 92871044, "body": "I tested it here <a href=\"https://stackblitz.com/edit/angular-3w7mjd\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-3w7mjd</a> its working fine, there must be something wrong with your resources file or import resources."}, {"owner": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "reply_to_user": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540448832, "post_id": 52976315, "comment_id": 92871121, "body": "@Justcode I just updated my question. However, the example you gave is my 2nd example: when I initialise the indexed type directly in the code, it works properly. However, when I import the json, it works only if I input hard coded strings between the brackets (like <code>resources[&#39;label.skills&#39;]</code>). It doesn&#39;t work if I use a variable."}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540449569, "post_id": 52976315, "comment_id": 92871489, "body": "very much confusing, can you create demo in stackblitz, so I can take a loook?"}, {"owner": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "reply_to_user": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540449710, "post_id": 52976315, "comment_id": 92871555, "body": "@Justcode My bad, I just checked your example again. And for some reason, it&#39;s working... I don&#39;t get it. I did exactly what you did. I&#39;ll have to try again on my device."}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540449970, "post_id": 52976315, "comment_id": 92871694, "body": "Create example of yours, so I can take a look"}, {"owner": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "reply_to_user": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540450299, "post_id": 52976315, "comment_id": 92871862, "body": "@Justcode <a href=\"https://stackblitz.com/edit/angular-uu9lzi\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-uu9lzi</a> It&#39;s not very different from yours. But for some reasons, it&#39;s working there..."}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "reply_to_user": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "edited": false, "score": 0, "creation_date": 1540451100, "post_id": 52976315, "comment_id": 92872245, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182468/discussion-between-just-code-and-clockwork\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "is_accepted": true, "score": 3, "last_activity_date": 1540807420, "last_edit_date": 1540807420, "creation_date": 1540572613, "answer_id": 53013202, "question_id": 52976315, "link": "https://stackoverflow.com/questions/52976315/in-angular-imported-json-file-as-indexed-type-always-return-undefined/53013202#53013202", "title": "In Angular, imported json file as indexed type always return undefined", "body": "<p><strong>Edit:</strong></p>\n\n<p>According to a comment on the Angular CLI issue, a workaround is to set <code>\"esModuleInterop\": true</code> in tsconfig.json, and to change the import statement from: </p>\n\n<pre><code>import * as resources from '../assets/resources/ResourcesBundle.json';\n</code></pre>\n\n<p>To this: </p>\n\n<pre><code>import resources from '../assets/resources/ResourcesBundle.json';\n</code></pre>\n\n<hr>\n\n<p><strong>Original answer:</strong></p>\n\n<p>After checking multiple times on different devices, I think this is a bug directly related to Angular (current version: 7.0.2). </p>\n\n<p>To take the example I gave in the question again: </p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-h2aspf?file=tsconfig.json\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-h2aspf?file=tsconfig.json</a></p>\n\n<p>On the browser, this demo is outputting <code>Change language</code> on the console. </p>\n\n<p>On locale device: </p>\n\n<ul>\n<li>Download and unzip the stackblitz demo in a folder</li>\n<li>Run <code>npm i</code> in the project folder</li>\n<li>If you run with <code>ng serve</code>, you will notice <code>undefined</code> in the web browser console</li>\n<li>Stop Angular, then run again with <code>ng serve --prod</code>. The web browser console is now properly outputting <code>Change language</code></li>\n</ul>\n\n<p>I've opened the following issues for Angular and Angular CLI projects on GitHub for this problem: </p>\n\n<ul>\n<li><p>Angular: <a href=\"https://github.com/angular/angular/issues/26785\" rel=\"nofollow noreferrer\">Issue #26785: Imported json file as indexed type always giving undefined when Angular is not running in production mode</a></p></li>\n<li><p>Angular CLI: <a href=\"https://github.com/angular/angular-cli/issues/12781\" rel=\"nofollow noreferrer\">Issue #12781: Imported json file as indexed type always giving undefined, but not when running ng serve --prod</a></p></li>\n</ul>\n"}], "owner": {"reputation": 193, "user_id": 7473935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kp0cf.jpg?s=128&g=1", "display_name": "Clockwork", "link": "https://stackoverflow.com/users/7473935/clockwork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 53013202, "answer_count": 1, "score": 4, "last_activity_date": 1540807999, "creation_date": 1540408165, "last_edit_date": 1540807999, "question_id": 52976315, "link": "https://stackoverflow.com/questions/52976315/in-angular-imported-json-file-as-indexed-type-always-return-undefined", "title": "In Angular, imported json file as indexed type always return undefined", "body": "<p>You will find instructions to reproduce on your own device at the bottom. </p>\n\n<hr>\n\n<p>I have a basic Angular project I created using Angular CLI, running on TypeScript 3.1.3, with nothing much added aside a class and a json file. </p>\n\n<p>I created a class ResourcesService with the following command with Angular CLI: </p>\n\n<pre><code>ng generate service Resources\n</code></pre>\n\n<p>I'm basically using it to load json files, as a mean of localising (instead of using Angular unfinished builtin internationalisation features). </p>\n\n<p>The following is my class, as well as the json file: </p>\n\n<p>ResourcesBundle.json</p>\n\n<pre><code>{\n    \"label.changeLanguage\": \"Change language\",\n    \"label.education\": \"Education\",\n    \"label.experience\": \"Experiences\",\n    \"label.skills\": \"Skills\",\n    \"label.summary\": \"Summary\",\n    \"label.language.english\": \"English\",\n    \"label.language.french\": \"French\"\n}\n</code></pre>\n\n<p>resources.service.ts</p>\n\n<pre><code>import * as resources from '../assets/resources/ResourcesBundle.json';\n\n@Injectable({\n    providedIn: 'root'\n})\n\nexport class ResourcesService {\n\n    constructor() {}\n\n    public getString(label: string): string {\n        let resource: string = resources[label];\n        return resource;\n    }\n}\n</code></pre>\n\n<p>Of course, in order to be able to import the json file that way, I've set <code>\"resolveJsonModule\": true</code> in tsconfig.json. </p>\n\n<p>The service by itself is working properly. I can inject it and call the getString method, and it's running without any error. </p>\n\n<p>However, no matter what value I pass to the getString method, the returned value is always <code>undefined</code>. I've even tried to hard code the value for <code>label = 'label.summary'</code>, but it's still returning <code>undefined</code>. The only time it's working properly is when I write the string directly between the brackets: </p>\n\n<pre><code>let resource: string;\nlabel = 'label.summary';\nresource = resources[label]; // resource == undefined\nresource = resources['label.summary']; // resource == 'Summary'\n</code></pre>\n\n<p>Within the TS on VSCode, the content of <code>resources</code> is as following: </p>\n\n<pre><code>    label.changeLanguage\n    label.education\n    label.experience\n    label.language.english\n    label.language.french\n    label.skills\n    label.summary\n</code></pre>\n\n<p>When using <code>console.log(resources)</code>, the console was displaying something like this on Firefox: </p>\n\n<pre><code>    Object {\n            label.changeLanguage: \"Change language\"\n            label.education: \"Education\"\n            label.experience: \"Experience\"\n            label.language.english: \"English\"\n            label.language.french: \"French\"\n            label.skills: \"Skills\"\n            label.summary: \"Summary\"\n    }\n</code></pre>\n\n<p>So the json is properly loaded, but it can only be used with hard coded string. </p>\n\n<p>The only other solution I found was to give up the json file and initialise an indexed type directly in the code:</p>\n\n<pre><code>private resources: { [key: string]: string } = {\n    'label.changeLanguage': 'Change language',\n    'label.education': 'Education',\n    'label.experience': 'Experiences',\n    'label.skills': 'Skills',\n    'label.summary': 'Summary',\n    'label.language.english': 'English',\n    'label.language.french': 'French'\n};\n</code></pre>\n\n<p>However, I don't think that's a good approach, at all... </p>\n\n<p>In the case of the imported json file, why does it always return undefined when I use a variable? Or otherwise, why does it work only with a hard coded string between the brackets? </p>\n\n<hr>\n\n<p><strong>Edit:</strong> </p>\n\n<p>You will find below a stackblitz link to a demo project: </p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-h2aspf?file=tsconfig.json\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-h2aspf?file=tsconfig.json</a></p>\n\n<p>If you run it on the browser, it will work properly (the console will properly display <code>Change language</code>). </p>\n\n<p>However, if you download it and run it locally,  you will notice that the console will display <code>undefined</code> instead. </p>\n\n<p>To run it locally: </p>\n\n<ul>\n<li>You must have npm and Angular CLI</li>\n<li>Download and unzip the stackblitz demo in a folder</li>\n<li>Run <code>npm i</code> in the project folder</li>\n<li>Run <code>ng serve --open</code></li>\n<li>Open the console on your browser, it should be displaying <code>undefined</code>, instead of the expected value (<code>Change language</code> on stackblitz) </li>\n</ul>\n"}, {"tags": ["javascript", "typescript", "visual-studio-2013", "definitelytyped"], "comments": [{"owner": {"reputation": 1340, "user_id": 9898651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633ab16a76904ee3826867715fd6d5cd?s=128&d=identicon&r=PG&f=1", "display_name": "Adam H", "link": "https://stackoverflow.com/users/9898651/adam-h"}, "edited": false, "score": 1, "creation_date": 1540407982, "post_id": 52976235, "comment_id": 92859072, "body": "The version of TypeScript you are using does not matter, what you target with TSC does. Just upgrade your TypeScript to 2.0 or Above but don&#39;t change your target in your tsc.config and you will be fine."}, {"owner": {"reputation": 53, "user_id": 1290282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UIpPu.jpg?s=128&g=1", "display_name": "Aninda Sen", "link": "https://stackoverflow.com/users/1290282/aninda-sen"}, "reply_to_user": {"reputation": 1340, "user_id": 9898651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633ab16a76904ee3826867715fd6d5cd?s=128&d=identicon&r=PG&f=1", "display_name": "Adam H", "link": "https://stackoverflow.com/users/9898651/adam-h"}, "edited": false, "score": 0, "creation_date": 1540408834, "post_id": 52976235, "comment_id": 92859464, "body": "@AdamH Thanks for replying. My mvc project is not reading from tsconfig.json which is placed at the root of the visual studio 2013 project. I have been configuring typescript with msbuild compiler options. You mean to say that I can install typescript 3.3.1 in visual studio 2013? this blog does not seem to agree with that - <a href=\"https://github.com/Microsoft/TypeScript/issues/11214\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/11214</a>"}, {"owner": {"reputation": 1340, "user_id": 9898651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633ab16a76904ee3826867715fd6d5cd?s=128&d=identicon&r=PG&f=1", "display_name": "Adam H", "link": "https://stackoverflow.com/users/9898651/adam-h"}, "edited": false, "score": 0, "creation_date": 1540409560, "post_id": 52976235, "comment_id": 92859823, "body": "Huh I did not know that. If that is the case, and it looks like it is, then you either going to live without the support, upgrade VS or move the &#39;compiling&#39; of the TypeScript outside of msbuild and use another editor. it sucks but i think those might be your only options."}], "owner": {"reputation": 53, "user_id": 1290282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UIpPu.jpg?s=128&g=1", "display_name": "Aninda Sen", "link": "https://stackoverflow.com/users/1290282/aninda-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540407792, "creation_date": 1540407792, "question_id": 52976235, "link": "https://stackoverflow.com/questions/52976235/definitely-typed-library-support-for-typescript-1-8-5", "title": "Definitely typed library support for Typescript 1.8.5", "body": "<p>I have searched for clues on how to work with Definitely typed libraries that  work with typescript 1.8 but haven't found anything helpful. My environment is Visual Studio 2013 with Typescript 1.8. Looks like most of the definitely typed libraries (backbone, requirejs, underscore, jquery among others) have moved into typescript 2.0 and above. </p>\n\n<p>We have an existing app written in backbone with requirejs which we are trying to move to typescript. Not much help out there for that too.</p>\n\n<p>Are there any Definitely typed libraries out there for typescript 1.8?</p>\n\n<p>Should the typed libraries be included in the csproj file or should they be like nuget (not included but referenced)?</p>\n\n<p>Can Definitely typed libraries written for typescript > 1.8 be used to work with 1.8 somehow?</p>\n\n<p>Should I use nuget definitely typed libraries or should I use npm ones. If either then how cause nuget typed libraries definitely did not help and npm ones were (written for ts > 1.8) were throwing lots of errors?</p>\n\n<p>Lastly, A big THANK YOU! to microsoft to ween the latest typescript versions off of visual studio 2013 for no good reason! </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["typescript", "subclass", "factory"], "answers": [{"tags": [], "owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "is_accepted": false, "score": 0, "last_activity_date": 1540408353, "creation_date": 1540408353, "answer_id": 52976371, "question_id": 52976118, "link": "https://stackoverflow.com/questions/52976118/of-what-type-should-a-superclass-be-when-using-a-subclass-factory-pattern-in-typ/52976371#52976371", "title": "Of what type should a superclass be when using a subclass factory pattern in TypeScript?", "body": "<p>This way?</p>\n\n<pre><code>function nameableSubclassOf(superclass: {new(): any}) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1594, "user_id": 969237, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8f2d4acd707f8ed562492626a63c481e?s=128&d=identicon&r=PG", "display_name": "Matthew Adams", "link": "https://stackoverflow.com/users/969237/matthew-adams"}, "edited": false, "score": 0, "creation_date": 1540412325, "post_id": 52976487, "comment_id": 92861106, "body": "That&#39;s some awesome voodoo metamagic that actually allows my tests to pass.  Can we make this a learning moment and have you explain it?  The part that&#39;s trippin&#39; my brain out specifically is <code>function nameableSubclassOf&lt;C extends new (...args: any[]) =&gt; any&gt; (superclass: C):       C extends new (...args: infer A) =&gt; infer T         ? new (...args: A) =&gt; T &amp; INameable         : never</code>, which looks to be a <code>function</code> with no body, unless my brain&#39;s TypeScript parser is messed up."}, {"owner": {"reputation": 1594, "user_id": 969237, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8f2d4acd707f8ed562492626a63c481e?s=128&d=identicon&r=PG", "display_name": "Matthew Adams", "link": "https://stackoverflow.com/users/969237/matthew-adams"}, "edited": false, "score": 0, "creation_date": 1540414440, "post_id": 52976487, "comment_id": 92862027, "body": "I&#39;ve been working on trait support in TypeScript using this subclass factory pattern at <a href=\"https://github.com/matthewadams/typescript-trait/pull/2\" rel=\"nofollow noreferrer\">github.com/matthewadams/typescript-trait/pull/2</a>. @jcalz, would you mind collaborating on it with me?  Specifically, I&#39;d like to generalize the solution one more level, so that the interface that gets implemented is variable."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 1594, "user_id": 969237, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8f2d4acd707f8ed562492626a63c481e?s=128&d=identicon&r=PG", "display_name": "Matthew Adams", "link": "https://stackoverflow.com/users/969237/matthew-adams"}, "edited": false, "score": 0, "creation_date": 1540423495, "post_id": 52976487, "comment_id": 92864905, "body": "Regarding voodoo metamagic, I updated the answer to describe how I&#39;m using a single-signature <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">function overload</a>."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 1594, "user_id": 969237, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8f2d4acd707f8ed562492626a63c481e?s=128&d=identicon&r=PG", "display_name": "Matthew Adams", "link": "https://stackoverflow.com/users/969237/matthew-adams"}, "edited": false, "score": 0, "creation_date": 1540424803, "post_id": 52976487, "comment_id": 92865237, "body": "Regarding making the implemented interface variable... what would you be passing to the function other than the superclass?  Would it be two classes?  Or a class and a <a href=\"https://www.typescriptlang.org/docs/handbook/mixins.html\" rel=\"nofollow noreferrer\">mixin</a>  (in which case are you doing something significantly different from the mixin stuff on that page)?"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1540423432, "last_edit_date": 1540423432, "creation_date": 1540408844, "answer_id": 52976487, "question_id": 52976118, "link": "https://stackoverflow.com/questions/52976118/of-what-type-should-a-superclass-be-when-using-a-subclass-factory-pattern-in-typ/52976487#52976487", "title": "Of what type should a superclass be when using a subclass factory pattern in TypeScript?", "body": "<p>I think your choices are either to tell Typescript that <code>superclass</code> is <code>new</code>able, the syntax for which is <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html#using-class-types-in-generics\" rel=\"nofollow noreferrer\">briefly alluded to in the TypeScript handbook</a>:</p>\n\n<pre><code>// \"new (...args: any[]) =&gt; any\" means the constructor takes any number of arguments \n// and returns anything\n\nfunction nameableSubclassOf&lt;C extends new (...args: any[]) =&gt; any&gt;(superclass: C) {\n  return class extends superclass implements INameable {\n    name?: string = name\n  }\n}\n</code></pre>\n\n<p>This should allow the compiler to infer a usable, but fairly opaque type for the return value of <code>nameableSubclassOf</code>:</p>\n\n<pre><code>const NameableFoo = nameableSubclassOf(Foo)\n// const NameableFoo: {\n//   new (...args: any[]): nameableSubclassOf&lt;typeof Foo&gt;.(Anonymous class);\n//   prototype: nameableSubclassOf&lt;any&gt;.(Anonymous class);\n// } &amp; typeof Foo \ud83d\ude41\n\nconst nameableFoo = new NameableFoo();\n// const nameableFoo: nameableSubclassOf2&lt;typeof Foo&gt;.(Anonymous class) &amp; Foo; \ud83d\ude41\n\nconst fooName = nameableFoo.name;\n// const fooName: string | undefined; \ud83d\ude42\n</code></pre>\n\n<hr>\n\n<p>... or, if you want a more explicit type that doesn't rely on anonymous classes, you can use generics to specify the superclass and <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-8.html#conditional-types\" rel=\"nofollow noreferrer\">conditional types</a> to extract the constructor argument and return types from it:</p>\n\n<pre><code>function nameableSubclassOf&lt;C extends new (...args: any[]) =&gt; any&gt;(\n  superclass: C\n): C extends new (...args: infer A) =&gt; infer T ? new (...args: A) =&gt; T &amp; INameable : never;\nfunction nameableSubclassOf(\n  superclass: new (...args: any[]) =&gt; any\n): new (...args: any[]) =&gt; INameable {\n  return class extends superclass implements INameable {\n    name?: string = name\n  }\n}\n</code></pre>\n\n<p>Note that I used a single <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">overload</a> for the function call signature, which is what the caller sees.  The implementation signature is looser because it's hard for the compiler to verify that a value is assignable to a conditional type... so the one-signature-overload is a way to get more type safety for the caller of a function without having to use loads of <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertions</a> in the implementation.</p>\n\n<p>That's more verbose, but when you use it you get nicer types:</p>\n\n<pre><code>const NameableFoo = nameableSubclassOf(Foo)\n// const NameableFoo: new () =&gt; Foo &amp; INameable \ud83d\ude42\n\nconst nameableFoo = new NameableFoo()\n// const nameableFoo: Foo &amp; INameable \ud83d\ude42\n\nconst fooName = nameableFoo.name\n// const fooName: string | undefined \ud83d\ude42\n</code></pre>\n\n<hr>\n\n<p>Hope one of those helps.  Good luck!</p>\n"}], "owner": {"reputation": 1594, "user_id": 969237, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8f2d4acd707f8ed562492626a63c481e?s=128&d=identicon&r=PG", "display_name": "Matthew Adams", "link": "https://stackoverflow.com/users/969237/matthew-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 52976487, "answer_count": 2, "score": 0, "last_activity_date": 1540424700, "creation_date": 1540407267, "last_edit_date": 1592644375, "question_id": 52976118, "link": "https://stackoverflow.com/questions/52976118/of-what-type-should-a-superclass-be-when-using-a-subclass-factory-pattern-in-typ", "title": "Of what type should a superclass be when using a subclass factory pattern in TypeScript?", "body": "<p>I'm trying to implement a subclass factory pattern in TypeScript 3.x.\nConsider this test:</p>\n<pre><code>import { expect } from 'chai'\n\ndescribe('subclass factory', () =&gt; {\n  it('should work', () =&gt; {\n    interface INameable {\n      name?: string\n    }\n\n    const name = 'I am a Nameable!'\n\n    function nameableSubclassOf&lt;T&gt; (superclass) {\n      return class extends superclass implements INameable {\n        name?: string = name\n      }\n    }\n\n    class Foo {}\n\n    const NameableFoo = nameableSubclassOf(Foo)\n    const nameableFoo = new NameableFoo()\n\n    expect(nameableFoo).to.be.instanceOf(Foo)\n    expect(nameableFoo.name).to.be.ok\n    expect(nameableFoo.name).to.equal(name)\n  })\n})\n</code></pre>\n<p>Compilation fails with the following message:</p>\n<blockquote>\n<p>TSError: \u2a2f Unable to compile TypeScript:</p>\n<p>src/test/subclass-factory.ts(11,37): error TS7006: Parameter 'superclass' implicitly has an 'any' type.</p>\n</blockquote>\n<p>How do I change the above code to successfully compile and return a <code>class</code> that is a subclass of <code>T</code> that also declares that it implements <code>INameable</code>?</p>\n"}, {"tags": ["angular", "typescript", "dependency-injection"], "comments": [{"owner": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1540407509, "post_id": 52976106, "comment_id": 92858862, "body": "The value for <code>APP_CONFIG</code> is asynchronously being set, so you will need the value to be some sort of asynchronous result type (i.e. observable/subject/promise) so that your code that needs it can wait until it has finished loading."}, {"owner": {"reputation": 726, "user_id": 2531854, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b7765bc55a6f0f771dcb4791c1a35788?s=128&d=identicon&r=PG", "display_name": "user2531854", "link": "https://stackoverflow.com/users/2531854/user2531854"}, "reply_to_user": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1540411253, "post_id": 52976106, "comment_id": 92860594, "body": "How would I implement that? Here is a stack overflow answer that helped me get started with using <code>APP_INITIALIZER</code>: <a href=\"https://stackoverflow.com/questions/49559009/angular5-deploying-angular-application-to-multiple-clients/49559443\" title=\"angular5 deploying angular application to multiple clients\">stackoverflow.com/questions/49559009/&hellip;</a>.   I didn&#39;t see anywhere they used an observable for <code>APP_CONFIG</code>."}], "answers": [{"comments": [{"owner": {"reputation": 726, "user_id": 2531854, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b7765bc55a6f0f771dcb4791c1a35788?s=128&d=identicon&r=PG", "display_name": "user2531854", "link": "https://stackoverflow.com/users/2531854/user2531854"}, "edited": false, "score": 0, "creation_date": 1540474476, "post_id": 52977589, "comment_id": 92886407, "body": "Awesome! Thanks for sharing. I&#39;ll give it a shot!"}, {"owner": {"reputation": 726, "user_id": 2531854, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b7765bc55a6f0f771dcb4791c1a35788?s=128&d=identicon&r=PG", "display_name": "user2531854", "link": "https://stackoverflow.com/users/2531854/user2531854"}, "edited": false, "score": 0, "creation_date": 1540474723, "post_id": 52977589, "comment_id": 92886569, "body": "What does <code>IAppStore</code> and <code>ConfigActions</code> look like? I&#39;m not super familiar with ngrx, although I&#39;m going through some tutorials now."}, {"owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "reply_to_user": {"reputation": 726, "user_id": 2531854, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b7765bc55a6f0f771dcb4791c1a35788?s=128&d=identicon&r=PG", "display_name": "user2531854", "link": "https://stackoverflow.com/users/2531854/user2531854"}, "edited": false, "score": 0, "creation_date": 1540480239, "post_id": 52977589, "comment_id": 92890365, "body": "IappStore is an interface that contain  contain all state properties and configActions are the list of actions (add config and delete config) in that case"}, {"owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "reply_to_user": {"reputation": 726, "user_id": 2531854, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b7765bc55a6f0f771dcb4791c1a35788?s=128&d=identicon&r=PG", "display_name": "user2531854", "link": "https://stackoverflow.com/users/2531854/user2531854"}, "edited": false, "score": 0, "creation_date": 1540480261, "post_id": 52977589, "comment_id": 92890379, "body": "here is a great tutorial <a href=\"https://coursetro.com/posts/code/151/Angular-Ngrx-Store-Tutorial---Learn-Angular-State-Management\" rel=\"nofollow noreferrer\">coursetro.com/posts/code/151/&hellip;</a>"}], "tags": [], "owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "is_accepted": false, "score": 1, "last_activity_date": 1540473427, "last_edit_date": 1540473427, "creation_date": 1540413562, "answer_id": 52977589, "question_id": 52976106, "link": "https://stackoverflow.com/questions/52976106/app-initializer-is-not-firing-before-factory/52977589#52977589", "title": "APP_INITIALIZER is not firing before factory", "body": "<p>I've had this problem before and tried many possibilities with no luck, the only solution is that i used ngrx/store</p>\n\n<p>In app.config.ts you can dispatch an action to save the config in the store, and you can get it after that in other services by doing: store.select()   Subscribe to  it and do your control</p>\n\n<p><strong>app.module.ts</strong></p>\n\n<pre><code>providers: [\n AuthService, // oidc-client.ts where i need the config from json\n DataService,\n ConfigService,\n {\n  provide: APP_INITIALIZER,\n  useFactory: loadConfig,\n  deps: [ConfigService],\n  multi: true,\n },\n</code></pre>\n\n<p><strong>config.service.ts</strong></p>\n\n<pre><code>  import { HttpClient } from '@angular/common/http';\n  import { Injectable } from '@angular/core';\n  import { Store } from '@ngrx/store';\n  import { IAppStore } from '../models/store.model';\n  import * as ConfigActions from '../store/actions/config.actions';\n\n  @Injectable()\n   export class ConfigService {\n   public config: any = {};\n\n   constructor(private http: HttpClient, private store: Store&lt;IAppStore&gt;) {}\n\n   getConfig(key: string): string {\n     return this.config[key] || '';\n    }\n  public loadConfig() {\n     return new Promise((resolve, reject) =&gt; {\n      this.http.get('app-config.json').subscribe(\n      (response) =&gt; {\n        this.config = response;\n        this.store.dispatch(new ConfigActions.AddConfig(response)); // dispatch action to update the store\n        resolve(true);\n      }\n    );\n  });\n  }}\n</code></pre>\n\n<p><strong>AuthService</strong></p>\n\n<pre><code>  import { Log, User, UserManager, WebStorageStateStore } from 'oidc-client';\n  ...\n  @Injectable()\n  export class AuthService {\n  private _userManager: UserManager;\n  public _user: User;\n  constructor(\n    private store: Store&lt;IAppStore&gt;\n    private httpClient: HttpClient,\n    private route: Router,\n    private configs: ConfigService\n  ) {\nthis.store.select('appConfig').subscribe((configdata) =&gt; {\n  Log.logger = console;\n  const config = {\n  authority: configdata.stsAuthority,\n  client_id: configdata.clientId,\n  redirect_uri: `${configdata.clientRoot}/#/auth-callback#`,\n  scope: 'openid profile fusionApi.full_access',\n  response_type: 'id_token token',\n  post_logout_redirect_uri: `${configdata.clientRoot}?postLogout=true`, // delet all stored tokens after logout\n  userStore: new WebStorageStateStore({ store: window.localStorage }),\n  automaticSilentRenew: true,\n  silent_redirect_uri: `${configdata.clientRoot}/assets/html/silent-refresh-redirect.html`,\n};\n  this._userManager = new UserManager(config);\n  this._userManager.getUser().then((user) =&gt; {\n  if (user &amp;&amp; !user.expired) {\n    this._user = user;\n  }\n});\n ...\n}\n\nlogin(): Promise&lt;any&gt; {\n return this._userManager.signinRedirect();\n}\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1283, "user_id": 1934388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GiyBs.jpg?s=128&g=1", "display_name": "Avtandil Kavrelishvili", "link": "https://stackoverflow.com/users/1934388/avtandil-kavrelishvili"}, "is_accepted": false, "score": 0, "last_activity_date": 1541241523, "creation_date": 1541241523, "answer_id": 53130516, "question_id": 52976106, "link": "https://stackoverflow.com/questions/52976106/app-initializer-is-not-firing-before-factory/53130516#53130516", "title": "APP_INITIALIZER is not firing before factory", "body": "<p>I have same problem and fix it.</p>\n\n<p>module-factory:</p>\n\n<pre><code>import { InjectionToken } from '@angular/core';\nimport { HttpClient, HttpBackend } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport { AuthorizationService } from './authorization.service';\n\nexport const AUTH_CONFIG = new InjectionToken&lt;string&gt;('auth.config.path', {\n    factory: () =&gt; 'config.json',\n  });\n\n\n  export function CheckAuthorizationState(handler: HttpBackend, authService: AuthorizationService, path: string) {\n    return async () =&gt; {\n      const http = new HttpClient(handler);\n      // get config for authorization\n      await http.get(path)\n        .pipe(\n          map((response: any) =&gt; {\n            authService.init(response);\n          })\n        ).toPromise();\n      // check authorization\n      await authService.checkAuthorization();\n    };\n  }\n</code></pre>\n\n<p>module:</p>\n\n<pre><code>import { NgModule, APP_INITIALIZER, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AuthorizationService } from './authorization.service';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { AuthorizationGuardService } from './authorization-guard.service';\nimport { AuthorizationInterceptor } from './authorization-interpretator';\nimport { HttpBackend, HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport { CheckAuthorizationState, AUTH_CONFIG } from './module-factories';\n\n\n\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  providers: [\n    AuthorizationService,\n    AuthorizationGuardService,\n    {\n      provide: APP_INITIALIZER,\n      useFactory: CheckAuthorizationState,\n      deps: [HttpBackend, AuthorizationService, AUTH_CONFIG],\n      multi: true\n    },\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: AuthorizationInterceptor,\n      multi: true\n    }\n  ],\n  declarations: []\n})\n\nexport class AuthorizationModule {\n  static forRoot(path: string): ModuleWithProviders {\n    return {\n      ngModule: AuthorizationModule,\n      providers: [\n        { provide: AUTH_CONFIG, useValue: path }\n      ]\n    };\n  }\n}\n</code></pre>\n\n<p>Here is my authorization library which publish for you: <a href=\"https://www.npmjs.com/package/sso-authorization-oidc-client\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/sso-authorization-oidc-client</a></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12673912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3e3f5f5e1737bc29e0269a249b25fbb?s=128&d=identicon&r=PG&f=1", "display_name": "wassim-k", "link": "https://stackoverflow.com/users/12673912/wassim-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1578473868, "creation_date": 1578473868, "answer_id": 59642402, "question_id": 52976106, "link": "https://stackoverflow.com/questions/52976106/app-initializer-is-not-firing-before-factory/59642402#59642402", "title": "APP_INITIALIZER is not firing before factory", "body": "<p>I came across this issue just today and the following is how I managed to fix it. hoping this might be helpful to someone.</p>\n\n<p>This is specific to <code>angular-oauth2-oidc</code> in a way</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const oauthModuleConfigFactory = (config: AppConfig): OAuthModuleConfig =&gt; ({\n    resourceServer: {\n        allowedUrls: [config.apiUrl],\n        sendAccessToken: true\n    }\n});\n\n// OAuthModuleConfig is provided by OAuthModule as useValue\n// and Angular resolves useValue providers before APP_INITIALIZER\n// This may be a bug, since Angular still attempts to resolve the value\n// even if it has been overriden with a useFactory as below\nconst fixForAppInitializers = ({ ngModule, providers = [] }: ModuleWithProviders&lt;any&gt;) =&gt; ({\n    ngModule,\n    providers: [...providers.filter((value: any) =&gt; value.provide !== OAuthModuleConfig)]\n});\n\n@NgModule({\n    imports: [fixForAppInitializers(OAuthModule.forRoot())],\n    providers: [\n        AuthGuard,\n        { provide: OAuthModuleConfig, useFactory: oauthModuleConfigFactory, deps: [APP_CONFIG] },\n        ...\n    ]\n})\nexport class AuthModule { }\n</code></pre>\n\n<p>That wasn't enough though, because <code>OAuthModule</code>'s <code>DefaultOAuthInterceptor</code> requires <code>OAuthModuleConfig</code> which needs the <code>app.config.json</code> to load first, but in order to load the config we need to use the <code>HttpClient</code> which injects <code>HTTP_INTERCEPTORS</code> on request, thus throwing <code>config is not loaded</code> error below.</p>\n\n<p>This is how I solved that problem:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// We're using the primitive HttpXhrBackend service instead of HttpClient\n// so that it does not attempt to inject http interceptors\n// which has app config as a dependency, thus attempting to inject the config\n// before it's loaded and throwing an error in the process\n@Injectable()\nexport class AppConfigLoader {\n\n    private _config: AppConfig | undefined;\n\n    public constructor(\n        private readonly httpClient: HttpXhrBackend\n    ) { }\n\n    public get config(): AppConfig {\n        if (!this._config) {\n            throw new Error('config is not loaded');\n        }\n        return this._config;\n    }\n\n    public async load(): Promise&lt;void&gt; {\n        const request = this.createJsonRequest&lt;AppConfig&gt;(`${window.location.origin}/app.config.json`);\n        this._config = await this.httpClient.handle(request).pipe(\n            filter(event =&gt; event instanceof HttpResponse),\n            map((response: any) =&gt; response.body)\n        ).toPromise();\n    }\n\n    private createJsonRequest&lt;T&gt;(url: string): HttpRequest&lt;T&gt; {\n        return new HttpRequest&lt;T&gt;('GET', url, { headers: new HttpHeaders({ 'content-type': 'application/json' }) });\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 287, "user_id": 9970857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MDRpM.jpg?s=128&g=1", "display_name": "hafizi hamid", "link": "https://stackoverflow.com/users/9970857/hafizi-hamid"}, "edited": false, "score": 0, "creation_date": 1584444552, "post_id": 60258916, "comment_id": 107432693, "body": "what is the config.json ?"}, {"owner": {"reputation": 185, "user_id": 1141037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6500e32eed9fc3e4b168325a6097e52?s=128&d=identicon&r=PG", "display_name": "DiederikTiemstra", "link": "https://stackoverflow.com/users/1141037/diederiktiemstra"}, "reply_to_user": {"reputation": 287, "user_id": 9970857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MDRpM.jpg?s=128&g=1", "display_name": "hafizi hamid", "link": "https://stackoverflow.com/users/9970857/hafizi-hamid"}, "edited": false, "score": 1, "creation_date": 1584546691, "post_id": 60258916, "comment_id": 107471290, "body": "Can be any json file containing some settings you need for configuring your application  Checkout <a href=\"https://github.com/dtiemstra/AngularConfigDemo\" rel=\"nofollow noreferrer\">github.com/dtiemstra/AngularConfigDemo</a> for an example"}], "tags": [], "owner": {"reputation": 185, "user_id": 1141037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6500e32eed9fc3e4b168325a6097e52?s=128&d=identicon&r=PG", "display_name": "DiederikTiemstra", "link": "https://stackoverflow.com/users/1141037/diederiktiemstra"}, "is_accepted": false, "score": 1, "last_activity_date": 1581930064, "creation_date": 1581930064, "answer_id": 60258916, "question_id": 52976106, "link": "https://stackoverflow.com/questions/52976106/app-initializer-is-not-firing-before-factory/60258916#60258916", "title": "APP_INITIALIZER is not firing before factory", "body": "<p>I had the same problem. The OAuthModuleConfig needs to be set synchronously. So the settings need to be loaded before the OAuthModuleConfig is created (in a factory).</p>\n\n<p>I implemented it by loading the settings before the AppModule is bootstrapped.</p>\n\n<p>Main.ts:</p>\n\n<pre><code>fetch('/assets/config.json')\n.then(response =&gt; response.json())\n.then(config =&gt; {\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic([{ provide: APP_SETTINGS, useValue: config }])\n  .bootstrapModule(AppModule)\n  .catch(err =&gt; console.error(err));\n});\n</code></pre>\n\n<p>App.module.ts</p>\n\n<p>Inside the module declaration:</p>\n\n<pre><code>....\nproviders: [\n{ provide: OAuthModuleConfig, useFactory: authConfigFactory, deps: [APP_SETTINGS] },\n],\nbootstrap: [AppComponent]\n.....\n\n\nexport function authConfigFactory(settings: AppSettings): OAuthModuleConfig {\nreturn {\nresourceServer: {\n    allowedUrls: settings.protectedUrls,\n    sendAccessToken: true,\n   }\n };\n}\n</code></pre>\n"}], "owner": {"reputation": 726, "user_id": 2531854, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b7765bc55a6f0f771dcb4791c1a35788?s=128&d=identicon&r=PG", "display_name": "user2531854", "link": "https://stackoverflow.com/users/2531854/user2531854"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1925, "favorite_count": 0, "answer_count": 4, "score": 9, "last_activity_date": 1581930064, "creation_date": 1540407208, "question_id": 52976106, "link": "https://stackoverflow.com/questions/52976106/app-initializer-is-not-firing-before-factory", "title": "APP_INITIALIZER is not firing before factory", "body": "<p>I'm using <code>APP_INITIALIZER</code> to load environment specific variables. I need to use these variables inside of my <code>authConfigFactory</code>, but the factory keeps loading before <code>APP_INITIALIZER</code> has completed inside of the app config.</p>\n\n<p>I'm using this library: <a href=\"https://github.com/manfredsteyer/angular-oauth2-oidc\" rel=\"noreferrer\">https://github.com/manfredsteyer/angular-oauth2-oidc</a> </p>\n\n<p>I want to use the value of <code>APP_CONFIG.authConfig.allowedUrls</code> inside of my auth config factory. How can I make sure it sets the configuration first before the auth factory.</p>\n\n<p>I get this error in the factory : <code>Cannot read property 'authConfig' of undefined</code></p>\n\n<p><code>app.module.ts</code>:</p>\n\n<pre><code>providers: [\n    AppConfigService,\n    {\n      provide: APP_INITIALIZER,\n      useFactory: (config: AppConfigService) =&gt; () =&gt; config.load(),\n      multi: true,\n      deps: [AppConfigService]\n    },\n    {\n      provide: OAuthModuleConfig,\n      useFactory: authConfigFactory\n    }\n]\n</code></pre>\n\n<p><code>app.config.ts</code>:</p>\n\n<pre><code>export let APP_CONFIG: AppConfig;\n\n@Injectable()\nexport class AppConfigService {\n  constructor(\n    private injector: Injector\n  ) {}\n\n  config = null;\n\n  public load() {\n    const http = this.injector.get(HttpClient);\n\n    return http\n      .get('../assets/config/config.json')\n      .pipe(\n        tap(returnedConfig =&gt; {\n          const t = new AppConfig();\n          APP_CONFIG = Object.assign(t, returnedConfig);\n        })\n      )\n      .toPromise();\n  }\n\n}\n</code></pre>\n\n<p><code>auth-config-factor</code>:</p>\n\n<pre><code>export function authConfigFactory(): OAuthModuleConfig {\n  return {\n    resourceServer: {\n      allowedUrls: APP_CONFIG.authConfig.allowedUrls,\n      sendAccessToken: true\n    }\n  };\n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1540407252, "post_id": 52976064, "comment_id": 92858739, "body": "Is <code>@sap&#47;api</code> an NPM package?"}, {"owner": {"reputation": 13, "user_id": 10014267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544b663bce36d47e7f6e53e5b251cf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Uzerty", "link": "https://stackoverflow.com/users/10014267/kyle-uzerty"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1540407338, "post_id": 52976064, "comment_id": 92858776, "body": "No it is a link to a git branch."}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1540407435, "post_id": 52976064, "comment_id": 92858829, "body": "Using <code>npm link</code> or something like that? Does <code>node_modules&#47;@sap&#47;api</code> exists, or does this live somewhere else?"}, {"owner": {"reputation": 13, "user_id": 10014267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544b663bce36d47e7f6e53e5b251cf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Uzerty", "link": "https://stackoverflow.com/users/10014267/kyle-uzerty"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1540407595, "post_id": 52976064, "comment_id": 92858901, "body": "There is a folder in the project with the following hierarchy: &quot;node_modules/@sap/api&quot; which contains all the files."}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1540407677, "post_id": 52976064, "comment_id": 92858938, "body": "alright that <i>should</i> work for regular includes, but I did just find this github discussion: <a href=\"https://github.com/Microsoft/TypeScript/issues/12398\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/12398</a>"}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1540407723, "post_id": 52976064, "comment_id": 92858953, "body": "That discussion suggests that you shouldn&#39;t directly use .ts file but instead have a .js and .d.ts files. Basically, build your dependencies separately. I don&#39;t know if that has changed since 2016."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1540408856, "post_id": 52976064, "comment_id": 92859475, "body": "Can you show your tsconfig.json?"}], "owner": {"reputation": 13, "user_id": 10014267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544b663bce36d47e7f6e53e5b251cf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Uzerty", "link": "https://stackoverflow.com/users/10014267/kyle-uzerty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540407019, "creation_date": 1540407019, "question_id": 52976064, "link": "https://stackoverflow.com/questions/52976064/cannot-find-module-when-importing-pure-typescript-package", "title": "Cannot find module when importing pure Typescript package", "body": "<p>I am trying to import a Typescript class from one of my Node packages and I am getting the following error:</p>\n\n<pre><code>    module.js:549\n    throw err;\n    ^\n\nError: Cannot find module '@sap/api'\n    at Function.Module._resolveFilename (module.js:547:15)\n    at Function.Module._load (module.js:474:25)\n</code></pre>\n\n<p>In this file:</p>\n\n<pre><code>import { Plugin } from \"@sap/api\";\n\nnew Plugin();\n</code></pre>\n\n<p>Which imports from this index.ts file:</p>\n\n<pre><code>export { Plugin } from \"./src/plugin\";\n</code></pre>\n\n<p>Which refers to \"src/plugin.ts\":</p>\n\n<pre><code>export class Plugin {\n    constructor() {}\n\n    onLoad() {}\n\n    onUnload() {}\n\n    onReload() {}\n}\n</code></pre>\n\n<p>When I shift click on the import in VSCode it takes me to the correct file.</p>\n\n<p>What am I doing wrong? I am new to Typescript, so sorry if it is a nooby mistake.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 1, "creation_date": 1540407075, "post_id": 52975970, "comment_id": 92858643, "body": "What is <code>this.SolutionService.response</code> actually doing? Is that returning some kind of resolved promise? With Observables, you could utilize operators and/or <code>async</code> pipe to ensure that stuff is disposed/unsubscribed when the component is destroyed."}, {"owner": {"reputation": 15, "user_id": 9475318, "user_type": "registered", "profile_image": "https://graph.facebook.com/439243583177039/picture?type=large", "display_name": "Patrick Morgan", "link": "https://stackoverflow.com/users/9475318/patrick-morgan"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1540407216, "post_id": 52975970, "comment_id": 92858712, "body": "Yes, it returns the data for the component from a service"}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1540407283, "post_id": 52975970, "comment_id": 92858752, "body": "In what format? That doesn&#39;t look to be any standard structure in terms of Angular, either <code>Observable&lt;T&gt;</code> or <code>Promise&lt;T&gt;</code>. <code>json()</code> is usually executed with <code>fetch()</code> statements within <code>.then()</code>. This could be part of the issue. If that is an asynchronous call, you simply cannot just use <code>if()</code> to check the actual response."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9475318, "user_type": "registered", "profile_image": "https://graph.facebook.com/439243583177039/picture?type=large", "display_name": "Patrick Morgan", "link": "https://stackoverflow.com/users/9475318/patrick-morgan"}, "edited": false, "score": 0, "creation_date": 1540407013, "post_id": 52976003, "comment_id": 92858617, "body": "Thanks for the info, but this is not the main issue, the main issue is that the code continue going after the navigating line, so if I put some code after it or a debugger, it would be hit"}, {"owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "reply_to_user": {"reputation": 15, "user_id": 9475318, "user_type": "registered", "profile_image": "https://graph.facebook.com/439243583177039/picture?type=large", "display_name": "Patrick Morgan", "link": "https://stackoverflow.com/users/9475318/patrick-morgan"}, "edited": false, "score": 0, "creation_date": 1540407090, "post_id": 52976003, "comment_id": 92858650, "body": "there also change it as  if (this.res) {"}], "tags": [], "owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "is_accepted": false, "score": 0, "last_activity_date": 1540406806, "creation_date": 1540406806, "answer_id": 52976003, "question_id": 52975970, "link": "https://stackoverflow.com/questions/52975970/ngoninit-keeps-running-for-a-while-after-navigating-to-another-route/52976003#52976003", "title": "ngOnInit() keeps running for a while after navigating to another route", "body": "<p>First of all Its not an issue with ngOninit, your ngIf condition itself wrong, it should just check if the value exists also use safe navigation operator to check if variables has values,</p>\n\n<pre><code>&lt;div *ngIf=\"res\"&gt;\n       &lt;div&gt; Temp Equals {{res?.Temp?.toFixed(2)}} &lt;/div&gt;\n       &lt;div&gt; Press Equals {{res?.Press?.toFixed(2)}} &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 479, "user_id": 6600839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f583d5298272f83f62c807767ba22c?s=128&d=identicon&r=PG&f=1", "display_name": "alokstar", "link": "https://stackoverflow.com/users/6600839/alokstar"}, "reply_to_user": {"reputation": 15, "user_id": 9475318, "user_type": "registered", "profile_image": "https://graph.facebook.com/439243583177039/picture?type=large", "display_name": "Patrick Morgan", "link": "https://stackoverflow.com/users/9475318/patrick-morgan"}, "edited": false, "score": 0, "creation_date": 1540407222, "post_id": 52976060, "comment_id": 92858719, "body": "pardon me if i am wrong but using it something like &lt;solution-component *ngIf=&#39;condition&#39;&gt; &lt;/solution-component&gt; should resolve this. You wont need that workaround i guess."}], "tags": [], "owner": {"reputation": 479, "user_id": 6600839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f583d5298272f83f62c807767ba22c?s=128&d=identicon&r=PG&f=1", "display_name": "alokstar", "link": "https://stackoverflow.com/users/6600839/alokstar"}, "is_accepted": false, "score": 0, "last_activity_date": 1540407303, "last_edit_date": 1540407303, "creation_date": 1540407003, "answer_id": 52976060, "question_id": 52975970, "link": "https://stackoverflow.com/questions/52975970/ngoninit-keeps-running-for-a-while-after-navigating-to-another-route/52976060#52976060", "title": "ngOnInit() keeps running for a while after navigating to another route", "body": "<p>You can avoid this by putting *ngIf condition on your solution component. This will load the component only if the condition is true and other errors won't occur.\nsomething like:</p>\n\n<pre><code>  &lt;solution-component *ngIf='data'\n[inputData]= 'data'&gt;\n&lt;/solution-component&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9475318, "user_type": "registered", "profile_image": "https://graph.facebook.com/439243583177039/picture?type=large", "display_name": "Patrick Morgan", "link": "https://stackoverflow.com/users/9475318/patrick-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541670718, "creation_date": 1540406664, "last_edit_date": 1541670718, "question_id": 52975970, "link": "https://stackoverflow.com/questions/52975970/ngoninit-keeps-running-for-a-while-after-navigating-to-another-route", "title": "ngOnInit() keeps running for a while after navigating to another route", "body": "<p>I'm working on an <code>Angular 5</code> application, Now I have a component called <strong>Solution</strong> which gets data from another component.</p>\n\n<p>It works fine but the problem happens when I press <strong>Reload</strong> button of the browser, so <em>there is no data sent to the component</em>, so I put <em>an if statement</em> to check is the data equal to undefined, then it will redirect to the home page.</p>\n\n<p>Actually it works and it redirects to the home page but the navigating process takes a while to redirect and meanwhile, the rest of the Solution component keeps loading and gets all variables equal to undefined so that any count function or toFixed() function in the HTML will return errors in the console.</p>\n\n<p>I solved that with a <strong>workaround</strong> to put the rest of the <code>ngInOnIt</code> in the else statement of the if condition I mentioned before and <code>*ngIf</code> statement in the <code>HTML</code> to check for the data coming from the service.It worked but it isn't of course the best approach.  </p>\n\n<pre><code> export class SolutionComponent implements OnInit {\n    res;\n    solutionData = new SolutionData()\n    constructor(private SolutionService: GetSolutionService,\n        private http: Http,\n        private router: Router) { }\n\n    ngOnInit() {\n        this.res = this.SolutionService.response;\n        if (this.res === undefined) {    \n                  this.router.navigate(['Home']); }\n        else {\n        this.solutionData.Temp = this.res.json()['Temp'];\n        this.solutionData.Press = this.res.json()['Press'];\n         }\n    }\n</code></pre>\n\n<p>and in HTML for ex.</p>\n\n<pre><code>      &lt;div *ngIf=\"res!==undefined\"&gt;\n          &lt;div&gt; Temp Equals {{res.Temp.toFixed(2)}} &lt;/div&gt;\n          &lt;div&gt; Press Equals {{res.Press.toFixed(2)}} &lt;/div&gt;\n      &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["typescript", "import"], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "edited": false, "score": 0, "creation_date": 1540407164, "post_id": 52975830, "comment_id": 92858687, "body": "Hello -  It changes the transpiled code, but still have the same issue.  I have this now:      <code>if (module_a_1.moduleA.propertyA) {</code>  Note that now instead of &#39;default&#39;, it adds a &#39;moduleA&#39; sub-object which is the reference name I gave it in the import statement.  I&#39;m still trying to access &#39;propertyA&#39; on an undefined object because it should be:      <code>if (module_a_1.propertyA) {</code>  to work properly.  Note that &#39;module_a_1&#39; is the generated name the Typescript transpiler gives in the Require statement."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "edited": false, "score": 0, "creation_date": 1540407418, "post_id": 52975830, "comment_id": 92858817, "body": "@Steve Can you touch the .js file? It uses an old AMD module system, I am not much familiar with it. Would be so easy if it used es6 modules or at least commonJS"}, {"owner": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "edited": false, "score": 0, "creation_date": 1540431360, "post_id": 52975830, "comment_id": 92866564, "body": "Hi Nurbol... thanks for the quick reply.  The .js is ours but I&#39;m trying to use it as-is.  It works fine if importing it into another .js file.  Just trying to get it to work in the .ts file."}, {"owner": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "edited": false, "score": 1, "creation_date": 1540431918, "post_id": 52975830, "comment_id": 92866694, "body": "Looks like you edited your answer.  And your updated answer does indeed work.  Thank you!  I&#39;m still catching on with this stuff."}], "tags": [], "owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "is_accepted": true, "score": 0, "last_activity_date": 1540407762, "last_edit_date": 1540407762, "creation_date": 1540406055, "answer_id": 52975830, "question_id": 52975656, "link": "https://stackoverflow.com/questions/52975656/transpiled-typescript-unexpectedly-adding-default-export-object/52975830#52975830", "title": "Transpiled typescript unexpectedly adding &#39;default&#39; export object", "body": "<p>Does this help? </p>\n\n<pre><code>import * as moduleA from 'moduleA';\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 3642215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c4f3f7812ebec06ceda8a57103dec?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3642215/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 52975830, "answer_count": 1, "score": 0, "last_activity_date": 1540407762, "creation_date": 1540405285, "question_id": 52975656, "link": "https://stackoverflow.com/questions/52975656/transpiled-typescript-unexpectedly-adding-default-export-object", "title": "Transpiled typescript unexpectedly adding &#39;default&#39; export object", "body": "<p>Long-time C++ guy, recent web-dev guy.  My application has a .js file that returns an object:</p>\n\n<pre><code>define('moduleA', [...], function(...) {\n    ...\n    return {\n        propertyA: /*boolean value*/,\n        ...\n    };\n});\n</code></pre>\n\n<p>The ellipses are irrelevant for this question.  Now I have a .ts file where I'm trying to import this Javascript module and reference it in the Typescript code.  My Typescript looks something like:</p>\n\n<pre><code>//@ts-ignore\nimport moduleA from 'moduleA';\n\nexport class ModuleB {\n    ...\n    public someMethod() {\n        if (moduleA.propertyA) {\n            ...\n        }\n    }\n    ...\n}\n</code></pre>\n\n<p>When this Typescript is transpiled, the Require statement at the top is correct, but the transpiled code in 'someMethod' above is:</p>\n\n<pre><code>if (module_a_1.default.propertyA) {\n    ...\n}\n</code></pre>\n\n<p>I don't understand where this 'default' sub-object is coming from.  As it is now, an exception is thrown when running because 'propertyA' cannot be referenced on 'undefined'.  If the 'default' wasn't there and the transpiled code was:</p>\n\n<pre><code>if (module_a_1.propertyA) {\n    ...\n}\n</code></pre>\n\n<p>Then it should work.  I'm guessing this is some rookie mistake with Typescript.  Can anyone offer insight?  Thanks in advance!</p>\n\n<ul>\n<li>Steve</li>\n</ul>\n"}, {"tags": ["typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540480159, "post_id": 52975020, "comment_id": 92890322, "body": "AFAIK, there isn&#39;t a good solution to declare the type of something that comes from an optional dependency, unless the type is very simple and you can just duplicate it in your package.  Compare to <a href=\"https://stackoverflow.com/q/52795354\">this unanswered question</a>.  The only alternative I see (which may not be worthwhile) is to make a second package (suppose it&#39;s called <code>sqorn-with-pg</code>) that has <code>pg</code> as a required dependency and re-exports <code>sqorn-pg</code> with the proper type information and let TypeScript users use <code>sqorn-with-pg</code> if they want the type information."}, {"owner": {"reputation": 1017, "user_id": 3140821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZqSt.png?s=128&g=1", "display_name": "Eejdoowad", "link": "https://stackoverflow.com/users/3140821/eejdoowad"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540489612, "post_id": 52975020, "comment_id": 92895489, "body": "Thanks for the info and work around Matt. I suppose accepting an any type parameter is preferable to maintaining an additional package."}], "owner": {"reputation": 1017, "user_id": 3140821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZqSt.png?s=128&g=1", "display_name": "Eejdoowad", "link": "https://stackoverflow.com/users/3140821/eejdoowad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540402788, "creation_date": 1540402788, "question_id": 52975020, "link": "https://stackoverflow.com/questions/52975020/declare-module-instance-argument-in-type-declarations-file", "title": "Declare module instance argument in type declarations file", "body": "<p><strong>General:</strong></p>\n\n<p>I'm writing a type declarations file for a Javascript package. The root export is a function that optionally accepts an instance of a third party module. The third party module is not a declared dependency in package.json because I want users to be able to use their preferred version of the third party dependency. I cannot figure out how to specify the type of the argument.</p>\n\n<p><strong>Specific:</strong></p>\n\n<p><a href=\"https://github.com/lusakasa/sqorn/tree/master/packages/sqorn-pg\" rel=\"nofollow noreferrer\">Sqorn Postgres</a> is a Javascript library that builds and executes SQL queries. The execution functionality only works if you pass the <a href=\"https://node-postgres.com/\" rel=\"nofollow noreferrer\">Node Postgres</a> module as an argument. Node Postgres is NOT a declared dependency in Sqorn Postgres's package.json. Node Postgres has <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/pg/index.d.ts\" rel=\"nofollow noreferrer\">typings on Definitely Typed</a>.</p>\n\n<p>Sqorn Postgres is initialized as follows:</p>\n\n<pre><code>const sqorn = require('sqorn-pg')\nconst pg = require('pg')\nconst pool = new pg.Pool()\nconst sq = sqorn({ pg, pool })\n</code></pre>\n\n<p>Sqorn Postgres' <a href=\"https://github.com/lusakasa/sqorn/blob/master/packages/sqorn-pg/index.d.ts\" rel=\"nofollow noreferrer\">current Type Declarations</a> exports the following function.</p>\n\n<pre><code>declare function sqorn({ pg, pool }: { pg: any, pool: any }): sqorn.sq;\n</code></pre>\n\n<p>I'd like to use specific types for the <code>pg</code> and <code>pool</code> arguments, but cannot figure out how.</p>\n"}, {"tags": ["angular", "typescript", "visual-studio-code"], "comments": [{"owner": {"reputation": 14424, "user_id": 2497335, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/208cc48458f7afeb5f9f6d3801686b07?s=128&d=identicon&r=PG", "display_name": "Daniel Gimenez", "link": "https://stackoverflow.com/users/2497335/daniel-gimenez"}, "edited": false, "score": 1, "creation_date": 1540402169, "post_id": 52974811, "comment_id": 92856108, "body": "Can you show the surrounding code, or link to stackblitz with full solution?  There&#39;s nothing to go on here."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1540402239, "post_id": 52974811, "comment_id": 92856138, "body": "It&#39;s likely that it&#39;s been rewritten to <code>_this</code> or something like that during the transpilation. Look at the &quot;Locals&quot; or &quot;Scope&quot; section of your debugging interface and look for other items in scope."}, {"owner": {"reputation": 698, "user_id": 5606128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o5nmx.jpg?s=128&g=1", "display_name": "Americo Arvani", "link": "https://stackoverflow.com/users/5606128/americo-arvani"}, "edited": false, "score": 0, "creation_date": 1540402418, "post_id": 52974811, "comment_id": 92856237, "body": "Hi Terrance is normal because you are in the this which is the event instead  the global scope this, try this  const me = this , outside off the this.router and then !me.dataLoaded"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "reply_to_user": {"reputation": 698, "user_id": 5606128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o5nmx.jpg?s=128&g=1", "display_name": "Americo Arvani", "link": "https://stackoverflow.com/users/5606128/americo-arvani"}, "edited": false, "score": 0, "creation_date": 1540402489, "post_id": 52974811, "comment_id": 92856274, "body": "@AmericoArvani There is no local <code>this</code> because the <code>subscribe</code> is using an arrow function."}, {"owner": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "reply_to_user": {"reputation": 14424, "user_id": 2497335, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/208cc48458f7afeb5f9f6d3801686b07?s=128&d=identicon&r=PG", "display_name": "Daniel Gimenez", "link": "https://stackoverflow.com/users/2497335/daniel-gimenez"}, "edited": false, "score": 0, "creation_date": 1540403004, "post_id": 52974811, "comment_id": 92856575, "body": "Correct the local this is undefined only when debugging. It works fine if the code just runs. I just need to know if there is a way that I can see the local &#39;this&#39; inside the subscribe when debugging. @Daniel Giminez there is no surrounding code. This could be an interview question one day"}], "answers": [{"tags": [], "owner": {"reputation": 2438, "user_id": 2759473, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/fkdGV.jpg?s=128&g=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/2759473/tomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1540405219, "last_edit_date": 1540405219, "creation_date": 1540404408, "answer_id": 52975432, "question_id": 52974811, "link": "https://stackoverflow.com/questions/52974811/this-is-undefined-inside-subscribe/52975432#52975432", "title": "&#39;This&#39; is undefined inside subscribe", "body": "<p>Please have a look on <code>closure</code> expand sections in debugger <code>variables</code> tab. Your real <code>this</code> will be one level above the top-most, where <code>this</code> is referred to component controller name. Each anonymous function creates additional closure, in your case it's enclosed in <code>subscribe</code>, ant this closure will be opened by default by VS Code when your breakpoint will be hit.</p>\n\n<p>And please try to avoid this old-style JS hacking <code>let that = this</code> e.c.t, because when you on TypeScript, Classes, ES6 and arrow functions those hacks are just not needed anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 2253, "user_id": 4604530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ce304c9957f0682e5074fc8cc07c4ad?s=128&d=identicon&r=PG&f=1", "display_name": "rst", "link": "https://stackoverflow.com/users/4604530/rst"}, "edited": false, "score": 0, "creation_date": 1541858780, "post_id": 52975441, "comment_id": 93365278, "body": "I stumbled across this, can you explain why?"}, {"owner": {"reputation": 135, "user_id": 324709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492c2de1f7b463db870164f60fc145e?s=128&d=identicon&r=PG", "display_name": "Scott Leckie", "link": "https://stackoverflow.com/users/324709/scott-leckie"}, "edited": false, "score": 0, "creation_date": 1585438795, "post_id": 52975441, "comment_id": 107760192, "body": "Please see the response from My Stack Overfloweth, below - that/this is no longer the recommended route"}, {"owner": {"reputation": 394, "user_id": 8018902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669af2f36d89d9da0736ddc9827834c0?s=128&d=identicon&r=PG&f=1", "display_name": "Raikish", "link": "https://stackoverflow.com/users/8018902/raikish"}, "edited": false, "score": 0, "creation_date": 1615820482, "post_id": 52975441, "comment_id": 117802965, "body": "@ParsaGachkar answer should be the accepted one."}], "tags": [], "owner": {"reputation": 3796, "user_id": 8612835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sPwm6.jpg?s=128&g=1", "display_name": "Sachin Shah", "link": "https://stackoverflow.com/users/8612835/sachin-shah"}, "is_accepted": true, "score": 2, "last_activity_date": 1540404436, "creation_date": 1540404436, "answer_id": 52975441, "question_id": 52974811, "link": "https://stackoverflow.com/questions/52974811/this-is-undefined-inside-subscribe/52975441#52975441", "title": "&#39;This&#39; is undefined inside subscribe", "body": "<p>When you are using <code>.subscribe()</code> then in angular it may possible that it'll not getting <code>this</code>. In my case I used another replica of this. It always works for me. It may for you also. </p>\n\n<pre><code>var that = this; // Hear I store the this ref into another that\nthis.router.events\n        .filter(event =&gt; (event instanceof NavigationEnd))\n            .subscribe((routeData: any) =&gt; {                        \n                if(!that.dataLoaded){  // Hear you can use that instead of this\n                  ...\n                }\n            }); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "edited": false, "score": 0, "creation_date": 1583542713, "post_id": 60573061, "comment_id": 107164440, "body": "What is settings that you are passing?"}, {"owner": {"reputation": 3954, "user_id": 2838827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bulbG.jpg?s=128&g=1", "display_name": "My Stack Overfloweth", "link": "https://stackoverflow.com/users/2838827/my-stack-overfloweth"}, "reply_to_user": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "edited": false, "score": 0, "creation_date": 1583874938, "post_id": 60573061, "comment_id": 107258740, "body": "The return value of our &quot;getClientSettingsByCategory&quot; method. Which is an array of &quot;Setting&quot; objects."}, {"owner": {"reputation": 135, "user_id": 324709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492c2de1f7b463db870164f60fc145e?s=128&d=identicon&r=PG", "display_name": "Scott Leckie", "link": "https://stackoverflow.com/users/324709/scott-leckie"}, "edited": false, "score": 0, "creation_date": 1585438671, "post_id": 60573061, "comment_id": 107760168, "body": "Perfect - that makes sense. Thanks for making it clear, especially on the that/this debate."}], "tags": [], "owner": {"reputation": 3954, "user_id": 2838827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bulbG.jpg?s=128&g=1", "display_name": "My Stack Overfloweth", "link": "https://stackoverflow.com/users/2838827/my-stack-overfloweth"}, "is_accepted": false, "score": 0, "last_activity_date": 1583538701, "creation_date": 1583538701, "answer_id": 60573061, "question_id": 52974811, "link": "https://stackoverflow.com/questions/52974811/this-is-undefined-inside-subscribe/60573061#60573061", "title": "&#39;This&#39; is undefined inside subscribe", "body": "<p>As someone who was close to implementing the <code>that = this</code> route from the accepted answer, save yourself and look into the answer Tomas wrote. It's good to spend some extra time on and to avoid using javascript hacks if possible. </p>\n\n<p>For an example in using arrow functions to keep your <code>this</code> context, see below.</p>\n\n<p>This is the code I originally had which lost the <code>this</code> context:</p>\n\n<pre><code>this.settingsService.getClientSettingsByCategory(clientId, categoryId)\n    .subscribe(\n        this.loadJobStatusReport\n    );\n</code></pre>\n\n<p>And this is the updated code which keeps the expected <code>this</code> context:</p>\n\n<pre><code>this.settingsService.getClientSettingsByCategory(clientId, categoryId)\n    .subscribe(\n        settings =&gt; this.loadJobStatusReport(settings)\n    );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 9671940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605a41a9b7ba40d792450f1df52a3612?s=128&d=identicon&r=PG", "display_name": "ParsaGachkar", "link": "https://stackoverflow.com/users/9671940/parsagachkar"}, "is_accepted": false, "score": 2, "last_activity_date": 1586931859, "creation_date": 1586931859, "answer_id": 61222553, "question_id": 52974811, "link": "https://stackoverflow.com/questions/52974811/this-is-undefined-inside-subscribe/61222553#61222553", "title": "&#39;This&#39; is undefined inside subscribe", "body": "<p>I'm not sure this is a good idea or not. I'm a beginner. but You could use the <code>.bind(this)</code> method.</p>\n\n<p>here is an angular ts example:</p>\n\n<pre><code>this.myService.getData().subscribe((data=&gt;{\n    this.doSomething(data);\n    alert(this.somethingElse);\n}).bind(this));\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3231, "favorite_count": 0, "accepted_answer_id": 52975441, "answer_count": 4, "score": 4, "last_activity_date": 1586931859, "creation_date": 1540401941, "question_id": 52974811, "link": "https://stackoverflow.com/questions/52974811/this-is-undefined-inside-subscribe", "title": "&#39;This&#39; is undefined inside subscribe", "body": "<p>I have a subscribe statement and I am trying to debug this however when I step through in VS Code 'this' is always undefined inside the statement. In this situation 'this.dataLoaded' is undefined. how can I get it to not be undefined when debugging?</p>\n\n<pre><code>this.router.events\n            .filter(event =&gt; (event instanceof NavigationEnd))\n                .subscribe((routeData: any) =&gt; {                        \n                    if(!this.dataLoaded){\n                      ...\n                    }\n                });  \n</code></pre>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions", "webstorm", "firebase-admin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1540415023, "post_id": 52974783, "comment_id": 92862285, "body": "If everything builds ok with <code>npm run build</code>, then the problem lies within webstorm."}, {"owner": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1540468719, "post_id": 52974783, "comment_id": 92882516, "body": "it outputs an error. But it something regarding the parent directory (the app itself), But actually, there&#39;s no error at all. I had to change the build script to <code>tsc --skipLibCheck</code>."}, {"owner": {"reputation": 2811, "user_id": 2360310, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f6925a512e762b9717a0a89d22176582?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2360310/john"}, "edited": false, "score": 0, "creation_date": 1540964221, "post_id": 52974783, "comment_id": 93051555, "body": "I tested with &quot;firebase init&quot; function only. with VS code all good and your package.json has no problem. FYI, firebase-admin module refers @google-cloud/firestore types. I presume your webstorm does not parse properly."}, {"owner": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "reply_to_user": {"reputation": 2811, "user_id": 2360310, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f6925a512e762b9717a0a89d22176582?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2360310/john"}, "edited": false, "score": 0, "creation_date": 1540982688, "post_id": 52974783, "comment_id": 93060058, "body": "@JohnCho I think the problem has to do with the parent directory and not with the functions folder, since I have the exact same folder in a different app and Webstorm parses it properly"}, {"owner": {"reputation": 2811, "user_id": 2360310, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f6925a512e762b9717a0a89d22176582?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2360310/john"}, "edited": false, "score": 0, "creation_date": 1540989416, "post_id": 52974783, "comment_id": 93063617, "body": "@Eliya Cohen easier debug way is from simple code. I just confirmed nothing wrong with your package.json file. As you mentioned, webstorm works with others project. Then your code are not compatible with webstorm. Can you provide source code?"}, {"owner": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "edited": false, "score": 0, "creation_date": 1541004078, "post_id": 52974783, "comment_id": 93073497, "body": "I would love to share that source code, but it&#39;s signed under NDA. Anyway, I guess I won&#39;t find an answer here since I can&#39;t elaborate enough to figure out it doesn&#39;t work. What I can tell you - the parent folder is ionic 4 project."}], "answers": [{"comments": [{"owner": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "edited": false, "score": 0, "creation_date": 1540542322, "post_id": 52990622, "comment_id": 92912889, "body": "Plus, try to hover on settings. Will it show you its source too?"}, {"owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "reply_to_user": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "edited": false, "score": 0, "creation_date": 1540546510, "post_id": 52990622, "comment_id": 92915263, "body": "yes - see updated answer. please try invalidating caches after un-excluding the folder"}, {"owner": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "edited": false, "score": 0, "creation_date": 1540547833, "post_id": 52990622, "comment_id": 92916025, "body": "Still, no luck. I have another project with the same dependencies and it works there. I tried to compare the node_modules and it looks the same."}], "tags": [], "owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "is_accepted": false, "score": 0, "last_activity_date": 1540546475, "last_edit_date": 1540546475, "creation_date": 1540474474, "answer_id": 52990622, "question_id": 52974783, "link": "https://stackoverflow.com/questions/52974783/firebase-cloud-functions-ts-unresolved-functions-variables-methods/52990622#52990622", "title": "Firebase Cloud Functions TS - Unresolved functions/variables/methods", "body": "<p>The problem is that FireStore functions are actually declared in <code>@google-cloud/firestore</code> plugin that is installed as a dependency of <code>firebase-admin</code> but not listed in your project <code>package.json</code>. And WebStorm auto-excludes all indirect dependencies from indexing for better performance, so functions definitions are not available to code analyser. To work out the issue, right-click <code>node_modules/@google-cloud</code> folder in your <strong>Project</strong> tool window and shooe <strong>Mark directory as/Not excluded</strong>. This should solve the issue:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YJsX7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YJsX7.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FlrTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FlrTY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 7338, "user_id": 1860540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/509a82813b73b7b673891fb909d2dde6?s=128&d=identicon&r=PG", "display_name": "Eliya Cohen", "link": "https://stackoverflow.com/users/1860540/eliya-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 496, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1540797410, "creation_date": 1540401835, "last_edit_date": 1540797410, "question_id": 52974783, "link": "https://stackoverflow.com/questions/52974783/firebase-cloud-functions-ts-unresolved-functions-variables-methods", "title": "Firebase Cloud Functions TS - Unresolved functions/variables/methods", "body": "<p>I use the IDE WebStorm, and I'm having some difficulties coding the cloud functions. It looks like WebStorm doesn't recognize some methods/ functions/variables of firebase.</p>\n\n<p>Example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/N6mVL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/N6mVL.png\" alt=\"enter image description here\"></a></p>\n\n<p>The dark red color means that it couldn't resolve the property.\nAs you can see, it doesn't recognize <code>db.settings</code>, <code>snapshot.data()</code>, <code>db.doc()</code> and <code>snapshot.id</code>.</p>\n\n<p>My package.json (auto-generated, haven't touched anything):</p>\n\n<pre><code>{\n  \"name\": \"functions\",\n  \"scripts\": {\n    \"lint\": \"tslint --project tsconfig.json\",\n    \"build\": \"tsc\",\n    \"serve\": \"npm run build &amp;&amp; firebase serve --only functions\",\n    \"shell\": \"npm run build &amp;&amp; firebase functions:shell\",\n    \"start\": \"npm run shell\",\n    \"deploy\": \"firebase deploy --only functions\",\n    \"logs\": \"firebase functions:log\"\n  },\n  \"main\": \"lib/index.js\",\n  \"dependencies\": {\n    \"firebase-admin\": \"~6.0.0\",\n    \"firebase-functions\": \"^2.0.3\"\n  },\n  \"devDependencies\": {\n    \"tslint\": \"~5.8.0\",\n    \"typescript\": \"~2.8.3\"\n  },\n  \"private\": true\n}\n</code></pre>\n\n<p>What I tried so far with no success:</p>\n\n<ul>\n<li>Invalidate and Restart</li>\n<li>Reinstall node_modules</li>\n<li>Cancel exclusion of the package <code>@google-cloud</code></li>\n<li>delete <code>functions</code> and <code>firebase init functions</code> - Worked for a moment and then it failed to locate the source.</li>\n<li>Tried to un-exclude <code>node_modules</code> just for the sake of it.</li>\n</ul>\n\n<p>Unexcluded packages:</p>\n\n<ul>\n<li>@google-cloud</li>\n<li>@types (+ @types/*)</li>\n<li>firebase-admin</li>\n<li>firebase-functions</li>\n<li>tslint</li>\n<li>typescript</li>\n</ul>\n\n<p>PS - I don't know if it has to do with the parent folder, but I'm using Ionic 4 in this project, while in another project I use only Angular and it behaves well (both functions folders has the exact same settings).</p>\n\n<h3>Update 1 - I tried to run this project both on PC and MacOS (different devices) and it happens in both of them. This issue doesn't happen on different projects.</h3>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 292, "user_id": 10060627, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2FL53uMS-c/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pTjaNUA43EazT82mhneXoMIUQSog/mo/photo.jpg?sz=128", "display_name": "Ajay Ojha", "link": "https://stackoverflow.com/users/10060627/ajay-ojha"}, "edited": false, "score": 0, "creation_date": 1540404666, "post_id": 52974357, "comment_id": 92857484, "body": "I believe your &#39;mode&#39; object is undefined. can you please check. as per your question where is dynamic comes into the picture, because I see everything is fixed validators based on your data. is your form validation rules are coming from server?"}], "answers": [{"tags": [], "owner": {"reputation": 1721, "user_id": 9907293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae67c5374c6bad59016f9b13c58b8c4?s=128&d=identicon&r=PG&f=1", "display_name": "Buczkowski", "link": "https://stackoverflow.com/users/9907293/buczkowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1540404393, "creation_date": 1540404393, "answer_id": 52975425, "question_id": 52974357, "link": "https://stackoverflow.com/questions/52974357/how-can-i-dynamically-create-a-validator-and-bind-to-a-form-group/52975425#52975425", "title": "How can I dynamically create a validator and bind to a form group?", "body": "<p>It will create <code>FormGroup</code> after receiving response (api request):</p>\n\n<pre><code>export class AccountFormComponent implements OnInit {\n    ngOnInit() {\n        this.modeService.get().subscribe(\n            mode =&gt; {\n                this.mode = mode;\n                this.isConfigurationLoading = false;\n\n                this.createForm();\n            },\n            () =&gt; {\n                this.isConfigurationLoading = false;\n            }\n        );\n    }\n\n    private createForm() {\n        this.formGroup = this.fb.group({\n            internal: [\n                {value: true, disabled: !this.isTypeEditable},\n                [Validators.required]\n            ],\n            name: ['', [Validators.required]],\n            firstName: [\n                {value: '', disabled: !this.showAdminFields},\n                [Validators.required]\n            ],\n            lastName: [\n                {value: '', disabled: !this.showAdminFields},\n                [Validators.required]\n            ],\n            email: [\n                {value: '', disabled: !this.showAdminFields},\n                [Validators.required, Validators.email, emailDomainValidator(this.mode)]\n            ]\n        });\n    }\n}\n</code></pre>\n\n<p>If you want to firstly create <code>FormGroup</code> and then update validators when response arrive then you can try this:</p>\n\n<pre><code>export class AccountFormComponent implements OnInit {\n    ngOnInit() {\n        this.formGroup = this.fb.group({\n            internal: [\n                {value: true, disabled: !this.isTypeEditable},\n                [Validators.required]\n            ],\n            name: ['', [Validators.required]],\n            firstName: [\n                {value: '', disabled: !this.showAdminFields},\n                [Validators.required]\n            ],\n            lastName: [\n                {value: '', disabled: !this.showAdminFields},\n                [Validators.required]\n            ],\n            email: [\n                {value: '', disabled: !this.showAdminFields},\n                [Validators.required, Validators.email]\n            ]\n        });\n\n        this.modeService.get().subscribe(\n            mode =&gt; {\n                this.mode = mode;\n                this.isConfigurationLoading = false;\n\n                this.formGroup.controls.email.setValidators([\n                    Validators.required,\n                    Validators.email,\n                    emailDomainValidator(this.mode)\n                ]);\n                this.formGroup.controls.email.updateValueAndValidity();\n            },\n            () =&gt; {\n                this.isConfigurationLoading = false;\n            }\n        );\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3524699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7497670d7f16ce658e8fd05d10c4da5b?s=128&d=identicon&r=PG&f=1", "display_name": "user3524699", "link": "https://stackoverflow.com/users/3524699/user3524699"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52975425, "answer_count": 1, "score": 1, "last_activity_date": 1540404393, "creation_date": 1540400267, "last_edit_date": 1540402745, "question_id": 52974357, "link": "https://stackoverflow.com/questions/52974357/how-can-i-dynamically-create-a-validator-and-bind-to-a-form-group", "title": "How can I dynamically create a validator and bind to a form group?", "body": "<p>currently I am working on an angular project along with a java backend that serves rest api. I want to issue a rest api call and then obtain an object , which is then passed to a custom validator function and then use this validator in the form group. However this is not working as expected because of using RxJs</p>\n\n<p>so here is my rest api call from angular js</p>\n\n<pre><code>@Injectable()\nexport class ModeService {\n  get() {\n    return this.httpClient\n      .get&lt;Mode&gt;(`${this.config.api}/configuredMode`)\n      .pipe(shareReplay(1));\n  }\n}\n</code></pre>\n\n<p>my angular component is as follows</p>\n\n<pre><code>export class AccountFormComponent implements OnInit {\n     ngOnInit() {\n    this.modeService.get().subscribe(\n      mode =&gt; {\n        this.mode = mode;\n        this.isConfigurationLoading = false;\n        this.emailValidator = emailDomainValidator(this.mode);\n      },\n      () =&gt; {\n        this.isConfigurationLoading = false;\n      }\n    );\n\n    this.formGroup = this.fb.group({\n      internal: [\n        { value: true, disabled: !this.isTypeEditable },\n        [Validators.required]\n      ],\n      name: ['', [Validators.required]],\n      firstName: [\n        { value: '', disabled: !this.showAdminFields },\n        [Validators.required]\n      ],\n      lastName: [\n        { value: '', disabled: !this.showAdminFields },\n        [Validators.required]\n      ],\n      email: [\n        { value: '', disabled: !this.showAdminFields },\n        [Validators.required, Validators.email, this.emailValidator]\n      ]\n}\n</code></pre>\n\n<p>and my template is as follows</p>\n\n<pre><code>&gt; &lt;form novalidate [formGroup]=\"formGroup\"\n&gt; (ngSubmit)=\"handleSubmit(formGroup.value)\" class=\"mb-3\"\n&gt; *ngIf=\"(!isLoading &amp;&amp; !isConfigurationLoading)\"&gt;   &lt;pc-form-layout&gt;\n&gt; \n&gt; &lt;/form&gt;\n</code></pre>\n\n<p>and my validator function </p>\n\n<pre><code>export function emailDomainValidator(configuredMode: Mode): ValidatorFn {\n  return (control: AbstractControl): { [key: string]: boolean } | null =&gt; {\n    if (configuredMode.propositionType === PropositionType.CMS) {\n      const emailId: string = control.value;\n      const emailDomain: string = configuredMode.emailDomain;\n      if (!emailId.endsWith(emailDomain)) {\n        return { invalidEmail: true };\n      }\n      return null;\n    }\n    return null;\n  };\n}\n</code></pre>\n\n<p>However i get an error when i access the application taken from the chrome developer console. what i can make out is in the emailDomainValidator , the configuredMode is undefined, and on calling propositionType I get this issue.</p>\n\n<pre><code>VM30160 AccountFormComponent.ngfactory.js:1312 ERROR TypeError: Cannot read property 'propositionType' of undefined\n    at Object.eval [as updateRenderer] (VM30160 AccountFormComponent.ngfactory.js:1323)\n    at Object.debugUpdateRenderer [as updateRenderer] (VM28852 core.js:14891)\n    at checkAndUpdateView (VM28852 core.js:14005)\n    at callViewAction (VM28852 core.js:14351)\n    at execComponentViewsAction (VM28852 core.js:14283)\n    at checkAndUpdateView (VM28852 core.js:14006)\n    at callViewAction (VM28852 core.js:14351)\n    at execEmbeddedViewsAction (VM28852 core.js:14309)\n    at checkAndUpdateView (VM28852 core.js:14001)\n    at callViewAction (VM28852 core.js:14351)\n</code></pre>\n\n<p>Any idea how can fix this issue ??? any help is appreciated and thank you so much</p>\n"}, {"tags": ["angular", "mongodb", "typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10551314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89367d3878bc36b51df80c932ad4694?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/10551314/vaibhav"}, "edited": false, "score": 0, "creation_date": 1540464182, "post_id": 52974568, "comment_id": 92879934, "body": "Thanks for the reply! I need to use the POST request itself, so could you please let me know how would you refine it with an &quot;actionType&quot;?"}, {"owner": {"reputation": 1513, "user_id": 6872740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Adihz.jpg?s=128&g=1", "display_name": "shuk", "link": "https://stackoverflow.com/users/6872740/shuk"}, "reply_to_user": {"reputation": 61, "user_id": 10551314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89367d3878bc36b51df80c932ad4694?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/10551314/vaibhav"}, "edited": false, "score": 0, "creation_date": 1540464995, "post_id": 52974568, "comment_id": 92880363, "body": "@vaibhav Yes I&#39;ve added a full example"}, {"owner": {"reputation": 61, "user_id": 10551314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89367d3878bc36b51df80c932ad4694?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/10551314/vaibhav"}, "edited": false, "score": 1, "creation_date": 1540469429, "post_id": 52974568, "comment_id": 92882924, "body": "Thanks a lot you made my day!"}], "tags": [], "owner": {"reputation": 1513, "user_id": 6872740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Adihz.jpg?s=128&g=1", "display_name": "shuk", "link": "https://stackoverflow.com/users/6872740/shuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1540464818, "last_edit_date": 1540464818, "creation_date": 1540401087, "answer_id": 52974568, "question_id": 52974334, "link": "https://stackoverflow.com/questions/52974334/angular-6-delete-data-from-mongodb-typescript/52974568#52974568", "title": "Angular 6 - Delete data from MongoDB, Typescript", "body": "<p>It seems like you are calling the method correctly.\nI would refine it with an <code>actionType</code> attached to the body if you would like to keep it a post request\nOtherwise, use DELETE method and pass the listId in the params, and pick it up in your server using <code>req.params.id</code></p>\n\n<p><strong>CLIENT SIDE</strong></p>\n\n<p><em>HTML:</em></p>\n\n<p><code>&lt;button (click)=\"delete(list)\"&gt;&lt;i class=\"fa fa-trash\"&gt;&lt;/i&gt;&lt;/button&gt;</code></p>\n\n<p><em>TS:</em></p>\n\n<pre><code>delete(LIST) {\n  this.deleteservice.deletelist({list: LIST, actionType: 'DELETE').subscribe((data) =&gt; {\n    this.doclists.splice(this.doclists.findIndex(list =&gt; list._id === LIST._id), 1);\n  }, (error) =&gt; {\n    console.log(error);\n}); }\n</code></pre>\n\n<ul>\n<li>Note the <code>findIndex</code> function which allows a mixure of a <code>map</code>ping function and an index finding function. It's more performative (instead of mapping all objects to object._id and then calling <code>indexOf</code> to find the index of a specific object by an ID (<code>indexOf</code> will not find you the object you are looking for by passing a full object as <code>Object === sameObject =&gt; false</code></li>\n<li><p>Note the param passed into the <code>deleteList</code> method. You can either set it by pure string, or make use of the convinience <code>enums</code> offer:</p>\n\n<pre><code>export enum LIST_ACTIONS {\n  CREATE, // translates to 0 \n  DELETE, // translates to 1,\n  ANOTHER_ACTION = 100, // translates to 100\n  YET_ANOTHER_ACTION // translates to 101\n}\n\nthis.deleteService.deleteList({list: listID, actionType: ACTION_TYPES.DELETE})\n</code></pre></li>\n<li><p>Also, it would be safer to <code>findIndex</code> first and then call <code>splice</code>: EX: </p>\n\n<pre><code>const INDEX = array.findIndex(object =&gt; object._id === objectID);\nif (INDEX &gt; -1) { array.splice(INDEX, 1); }\n</code></pre></li>\n</ul>\n\n<p><em>SERVICE:</em></p>\n\n<p>Normally you would use <code>POST</code> to CREATE something, and <code>PATCH</code> or <code>PUT</code> to ALTER it (change properties of the doc). You can also use <code>POST</code> of course but that would not be very definitive. In case you do, a use of an ACTION_TYPE is required so the call does not mix with any other functions to the same route you are calling with the same <code>METHOD</code>:</p>\n\n<pre><code>deletelist(data: {list: List, actionType: ACTION_TYPES}) {\n  return this.http.post&lt;any&gt;(`${this.baseUrl}/api/save`, data);\n}\n</code></pre>\n\n<p><strong>SERVER SIDE</strong></p>\n\n<p><em>ROUTER:</em></p>\n\n<p><code>router.post('/api/save', myDocHandlingFunction)</code></p>\n\n<p><em>CONTROLLER</em></p>\n\n<pre><code>export function myDocHandlingFunction(req, res, next) {\n  if (req.body.actionType === ACTION_TYPES.DELETE) {\n    LIST_MODEL.findByIdAndRemove(req.body.list._id)\n      .then(success =&gt; {\n        res.status(200).json({message: 'Removed'})\n      })\n      .catch(error =&gt; {\n        res.status(500).json({message: 'Did not remove'})\n      })\n  }\n}\n</code></pre>\n\n<ul>\n<li>NOTE: Remember to create an enum Object for the server side too. either by Typescript or using JS <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\" rel=\"nofollow noreferrer\">Object.freeze()</a> method</li>\n<li>NOTE: By using a <code>POST</code> HTTP method, you declare you may not actually REMOVE the doc but actually alter it somehow. Perhaps by adding a property to the doc such as <code>removed: false</code>, and by \"removing\" it you actually change <code>removed</code> to <code>true</code> using <code>LIST_MODEL.findByIdAndUpdate(list._id, {removed: true}).then().catch()</code></li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 10551314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89367d3878bc36b51df80c932ad4694?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/10551314/vaibhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 52974568, "answer_count": 1, "score": -1, "last_activity_date": 1540464818, "creation_date": 1540400168, "last_edit_date": 1540437283, "question_id": 52974334, "link": "https://stackoverflow.com/questions/52974334/angular-6-delete-data-from-mongodb-typescript", "title": "Angular 6 - Delete data from MongoDB, Typescript", "body": "<p>This is my HTML</p>\n\n<pre><code>  &lt;tr *ngFor=\"let list of doclists;\"&gt;\n  &lt;td&gt;{{list.id}}&lt;/td&gt;\n  &lt;td&gt;{{list.name}}&lt;/td&gt;\n\n  &lt;td&gt;\n    &lt;button (click)=\"delete(list)\"&gt;&lt;i class=\"fa fa-trash\"&gt;&lt;/i&gt;&lt;/button&gt;\n  &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Typescript</p>\n\n<pre><code>delete(list) {\nconsole.log('value to delete', JSON.stringify(list));    \nthis.deleteservice.deletelist(list.id).subscribe((data) =&gt; {\n  this.doclists.splice(this.doclists.indexof(list), 1);      \n}, (error) =&gt; {\n  console.log(error);\n}); }\n</code></pre>\n\n<p>Service</p>\n\n<pre><code>deletelist(list) {\nlet delete = this.http.post&lt;any&gt;(`${this.baseUrl}/api/save`, list);\nreturn delete; }\n</code></pre>\n\n<p>Here I am using the post endpoint to delete from MongoDB, kindly help me out with this delete operation. Thanks! in advance. </p>\n"}, {"tags": ["javascript", "typescript", "three.js", "web-worker"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 1, "creation_date": 1540400166, "post_id": 52974287, "comment_id": 92855081, "body": "How are <code>e.data.verticesBufferArray</code> and <code>e.data.normalsBufferArray</code> set to some value?"}, {"owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "reply_to_user": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1540400279, "post_id": 52974287, "comment_id": 92855148, "body": "@Pointy they are sent through a WebWorker, I have not written the code to avoid messing too much. Data arrives correctly."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1540401662, "post_id": 52974287, "comment_id": 92855833, "body": "How does data arrive correctly if you say that the value is <code>undefined</code> instead of a buffer?"}, {"owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1540401946, "post_id": 52974287, "comment_id": 92855985, "body": "Hello @Bergi buffer is ok. But when I try to create const vertices = new Float32Array(verticesBuffer); (from the buffer), vertices is undefined. So, it is the conversion from the buffer to the Float32Array what does not work."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1540402482, "post_id": 52974287, "comment_id": 92856268, "body": "@AlbertoValero Are you sure there? A <code>new</code> expression never produces <code>undefined</code>. We&#39;d need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to reproduce this behaviour."}, {"owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1540402697, "post_id": 52974287, "comment_id": 92856412, "body": "@Bergi Making close examine I get undefined because I get an uncaught exception: Uncaught RangeError: Invalid typed array length: 39744. So problem is related with the length, I have seen there is an optional parameter in the Float32Array constructor. I will play with it."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1540402885, "post_id": 52974287, "comment_id": 92856519, "body": "OK, that sounds more real. Please <a href=\"https://stackoverflow.com/posts/52974287/edit\">edit</a> your question to include that error message - of course the variables don&#39;t get assigned a value after an exception."}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1540404528, "post_id": 52974287, "comment_id": 92857414, "body": "Shouldn&#39;t big typed arrays and buffers be transferred as &quot;transferrable objects&quot; and not through the serialization mechanism anyway?"}, {"owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "reply_to_user": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1540405249, "post_id": 52974287, "comment_id": 92857794, "body": "@Pointy an ArrayBuffer is a transferable object. That&#39;s why I am doing all this."}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1540405481, "post_id": 52974287, "comment_id": 92857900, "body": "The thing is you&#39;ve posted a very limited amount of code; it&#39;s not obvious how you&#39;re transferring it. All we know is that you&#39;ve got a problem."}, {"owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "reply_to_user": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 1, "creation_date": 1540405592, "post_id": 52974287, "comment_id": 92857949, "body": "@Pointy forget about the transfer. Transfer is done right (it is checked). Problem does not lay on the transfer, but on the conversion from ArrayBuffer to Float32Array. Error is here: const vertices = new Float32Array(verticesBuffer);"}], "owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1605889396, "creation_date": 1540399950, "last_edit_date": 1540405665, "question_id": 52974287, "link": "https://stackoverflow.com/questions/52974287/how-to-build-float32array-from-arraybuffer", "title": "How to build Float32Array from ArrayBuffer", "body": "<p>Consider I have an ArrayBuffer, as shown in next screenshot)</p>\n\n<p><a href=\"https://i.stack.imgur.com/LyNfW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LyNfW.png\" alt=\"Screenshot from google developers console\"></a></p>\n\n<pre><code>//recompute object from vertices and normals\nconst verticesBuffer:ArrayBuffer = e.data.verticesBufferArray;\nconst normalsBuffer:ArrayBuffer = e.data.normalsBufferArray;\n\nconst vertices = new Float32Array(verticesBuffer);\nconst normals = new Float32Array(normalsBuffer);\n</code></pre>\n\n<p>But at this point vertices and normals are undefined. So, variables vertices and normals are undefined while verticesBuffer and normalBuffer are ok.</p>\n\n<p>On the conversion I get following error </p>\n\n<pre><code>const vertices = new Float32Array(verticesBuffer);\n</code></pre>\n\n<blockquote>\n  <p>Uncaught RangeError: Invalid typed array length: 39744</p>\n</blockquote>\n\n<p>So question is <strong>how to pass from verticesBuffer:ArrayBuffer to vertices:Float32Array ?</strong></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "redux"], "comments": [{"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1540400588, "post_id": 52974277, "comment_id": 92855295, "body": "View the HTML source of your page. What is put in<code>__REDUX_STATE__</code>  ?"}, {"owner": {"reputation": 1, "user_id": 10553252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af2332d7add2c6495eeb7e5492dd2e?s=128&d=identicon&r=PG&f=1", "display_name": "krantni", "link": "https://stackoverflow.com/users/10553252/krantni"}, "reply_to_user": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1540400903, "post_id": 52974277, "comment_id": 92855470, "body": "<code>window.__REDUX_STATE__ = { person: [{ firstName: &quot;John&quot;, lastName: &quot;Doe&quot; }]}</code> is what the in the script tag from the renderHTML function. I never see that variable on the client side. I don&#39;t know of a way to debug the returned html from the service call"}, {"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1540403213, "post_id": 52974277, "comment_id": 92856676, "body": "Then log what <code>window.__REDUX_STATE__</code> is in your other part of the application. don&#39;t reference it as <code>(window as any)</code>. You&#39;re setting the global variable fine, if it&#39;s not defined later in your code you&#39;re either deleting it or have a syntax error"}, {"owner": {"reputation": 1, "user_id": 10553252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af2332d7add2c6495eeb7e5492dd2e?s=128&d=identicon&r=PG&f=1", "display_name": "krantni", "link": "https://stackoverflow.com/users/10553252/krantni"}, "reply_to_user": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1540403827, "post_id": 52974277, "comment_id": 92857015, "body": "<code>(window as any)</code> is keeping typescript happy. But I put a <code>console.log</code> within the script tag of the HTML response and I&#39;m not seeing it anywhere. Which leads me to believe it&#39;s not getting run, which would also be the reason the variable isn&#39;t getting set."}, {"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1540405930, "post_id": 52974277, "comment_id": 92858112, "body": "Keep debugging. Script tags in the page execute immediately, if you aren&#39;t seeing logging there figure out why. Are there javascript errors in the console? Where do console logs work and where do they stop working?"}], "owner": {"reputation": 1, "user_id": 10553252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af2332d7add2c6495eeb7e5492dd2e?s=128&d=identicon&r=PG&f=1", "display_name": "krantni", "link": "https://stackoverflow.com/users/10553252/krantni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540400071, "creation_date": 1540399910, "question_id": 52974277, "link": "https://stackoverflow.com/questions/52974277/server-side-rendering-redux-passing-state-to-client", "title": "Server Side Rendering - Redux passing state to client", "body": "<p>I've been experimenting with SSR with React/Redux and following the tutorial on the <a href=\"https://redux.js.org/recipes/serverrendering\" rel=\"nofollow noreferrer\">Redux website</a>. But I am not having success with passing my state from the server to the client through the window. On the client my variable comes back as undefined. I haven't been able to find a way to debug this. </p>\n\n<p>I'm also using typescript to develop but building to JavaScript (unsure if that would give me trouble)</p>\n\n<p><strong>Server Code</strong></p>\n\n<pre><code>app.get(\"/reactComponent\", function (req, res) {\n  var hardCodedState = { person: [{ firstName: \"John\", lastName: \"Doe\" }]};\n\n  const store = createStore(appReducer, hardCodedState); \n  const body = renderToString(\n    &lt;Provider store={store}&gt; \n      &lt;Data /&gt; \n    &lt;/Provider&gt;\n  );\n\n  const preloadedState = store.getState();\n\n  res.send(renderHTML(body, preloadedState));\n});\nfunction renderHTML(html, preloadedState) {\n  return `&lt;!doctype html&gt;\n  &lt;html&gt;\n    &lt;head&gt;\n      &lt;title&gt;Redux Universal Example&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n      &lt;div id=\"root\"&gt;${html}&lt;/div&gt;\n      &lt;script&gt;\n        window.__REDUX_STATE__ = ${JSON.stringify(preloadedState).replace(/&lt;/g,'\\\\u003c')}\n      &lt;/script&gt;\n      &lt;script src=\"/static/bundle.js\"&gt;&lt;/script&gt;\n    &lt;/body&gt;\n  &lt;/html&gt;`\n}\n</code></pre>\n\n<p><strong>Client Side</strong></p>\n\n<pre><code>public componentDidMount(){\n  axios.get(\"http://localhost/reactComponent\").then(response =&gt; {\n    const preloadedState = (window as any).__REDUX_STATE__;\n    // delete (window as any).__REDUX_STATE__;\n    const store = createStore(appReducer,preloadedState);\n    hydrate(&lt;Provider store={store}&gt;&lt;Data /&gt;&lt;/Provider&gt;, document.getElementById(\"content\"));\n  }).catch(error =&gt;{\n    console.log(\"error\",error);\n  });\n}\n</code></pre>\n\n<p><code>const preloadedState = (window as any).__REDUX_STATE__;</code> always comes back as undefined, so my component never renders on the client from mismatched results on hydrate.</p>\n\n<p>Anything I can try or steps could take to debug the hand off from the server to the client?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "http", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 6179613, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6b678804a2dabaaeff3c61dddd00655?s=128&d=identicon&r=PG&f=1", "display_name": "cbrawl", "link": "https://stackoverflow.com/users/6179613/cbrawl"}, "edited": false, "score": 1, "creation_date": 1540399488, "post_id": 52974149, "comment_id": 92854703, "body": "Brilliant. I knew it was going to be something silly but I never thought it&#39;d be this silly. Thank you."}], "tags": [], "owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": true, "score": 6, "last_activity_date": 1540399372, "creation_date": 1540399372, "answer_id": 52974149, "question_id": 52974132, "link": "https://stackoverflow.com/questions/52974132/typeerror-map-is-not-a-function/52974149#52974149", "title": "TypeError: map is not a function", "body": "<p>Your parameter <code>map</code> is shadowing your imported <code>map</code>:</p>\n\n<pre><code>import { map, catchError } from 'rxjs/operators';\n//       ^^^------------------- import\n\n// ...\n\npublic createMap(map) {\n//               ^^^----------- parameter\n</code></pre>\n\n<p>So within <code>createMap</code>, you can't use the imported <code>map</code>; it's inaccessible.</p>\n\n<p>Consider either renaming the parameter, or renaming the import.</p>\n"}], "owner": {"reputation": 691, "user_id": 6179613, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6b678804a2dabaaeff3c61dddd00655?s=128&d=identicon&r=PG&f=1", "display_name": "cbrawl", "link": "https://stackoverflow.com/users/6179613/cbrawl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 52974149, "answer_count": 1, "score": 1, "last_activity_date": 1540469362, "creation_date": 1540399308, "question_id": 52974132, "link": "https://stackoverflow.com/questions/52974132/typeerror-map-is-not-a-function", "title": "TypeError: map is not a function", "body": "<p>I am trying to make a POST call to the API and am receiving the error in the title. I have checked all other related questions and have made sure it is none of those issues. I have imported the rxjs <code>map</code> operator. In fact, I am using this exact same syntax in hundreds of other http calls in my front-end Angular 6 application without a problem.</p>\n\n<p>Here is the code snippet causing an issue:</p>\n\n<pre><code>public createMap(map) {\n    map.companyId = this.company.getCompanyId();\n    const temp = this.json.clone(map);\n    temp.settings = this.json.manageJSON(temp.settings, true);\n\n    return this.authHttp.post(environment.coreApiPath + 'importMaps', temp)\n        .pipe(map((res: any) =&gt; {\n            map.ID = res.ID;\n            map.tempName = null;\n            this.maps.push(map);\n            return map;\n        }),\n        catchError(error =&gt; { throw Error('Custom Error: There was an error when attempting to create this import map.') }));\n}\n</code></pre>\n\n<p>The error is on the line that reads <code>.pipe(map((res: any) =&gt; {</code></p>\n\n<p>Any idea what could be causing this issue?</p>\n\n<p>Here are my imports just in case you're wondering:</p>\n\n<pre><code>import { HttpClient } from '@angular/common/http';\nimport { map, catchError } from 'rxjs/operators';\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "nestjs"], "comments": [{"owner": {"reputation": 31092, "user_id": 1715121, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nEEr.jpg?s=128&g=1", "display_name": "Ele", "link": "https://stackoverflow.com/users/1715121/ele"}, "edited": false, "score": 1, "creation_date": 1540398095, "post_id": 52973770, "comment_id": 92853916, "body": "The two arrays contain only strings or role objects?  Probably, you&#39;re comparing objects and not strings."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1540398155, "post_id": 52973770, "comment_id": 92853953, "body": "Thanks for asking a question!  Since you are having a code problem, please review what constitutes a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that you can get a meaningful answer."}, {"owner": {"reputation": 140, "user_id": 8303988, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/T0XHn.jpg?s=128&g=1", "display_name": "ivankoleda", "link": "https://stackoverflow.com/users/8303988/ivankoleda"}, "edited": false, "score": 0, "creation_date": 1540398167, "post_id": 52973770, "comment_id": 92853957, "body": "could you rpovide an example of <code>role</code> object"}, {"owner": {"reputation": 33, "user_id": 7736918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32541ce0b41b260f0496913ad50a1eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ppolicherla91", "link": "https://stackoverflow.com/users/7736918/ppolicherla91"}, "edited": false, "score": 0, "creation_date": 1540398571, "post_id": 52973770, "comment_id": 92854192, "body": "sorry about that I provided an example of the two object that i am working with and the implementation i am using for my roleguard"}, {"owner": {"reputation": 31092, "user_id": 1715121, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nEEr.jpg?s=128&g=1", "display_name": "Ele", "link": "https://stackoverflow.com/users/1715121/ele"}, "edited": false, "score": 1, "creation_date": 1540398763, "post_id": 52973770, "comment_id": 92854291, "body": "You&#39;re facing another problem for sure."}, {"owner": {"reputation": 33, "user_id": 7736918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32541ce0b41b260f0496913ad50a1eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ppolicherla91", "link": "https://stackoverflow.com/users/7736918/ppolicherla91"}, "edited": false, "score": 0, "creation_date": 1540399525, "post_id": 52973770, "comment_id": 92854728, "body": "darn i was afraid that was the case"}, {"owner": {"reputation": 33, "user_id": 7736918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32541ce0b41b260f0496913ad50a1eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ppolicherla91", "link": "https://stackoverflow.com/users/7736918/ppolicherla91"}, "edited": false, "score": 0, "creation_date": 1540402500, "post_id": 52973770, "comment_id": 92856277, "body": "Just checked something out if I add another item to the &quot;roles&quot; object so there are 3 items it works only when there are 2 is when it stops working."}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "edited": false, "score": 1, "creation_date": 1540463572, "post_id": 52973770, "comment_id": 92879609, "body": "Instead of editing your question post your solution as an answer and accept it so that others can see that your problem was solved. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 7736918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32541ce0b41b260f0496913ad50a1eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ppolicherla91", "link": "https://stackoverflow.com/users/7736918/ppolicherla91"}, "is_accepted": false, "score": 0, "last_activity_date": 1540480412, "creation_date": 1540480412, "answer_id": 52992710, "question_id": 52973770, "link": "https://stackoverflow.com/questions/52973770/include-function-inside-a-some-function/52992710#52992710", "title": "Include function inside a some function", "body": "<p>So I found out the issue had nothing to do with the role guard code. That is working fine the problem was with a mismatch in the role names. My friend and I resolved the names and all is working fine. I am a bit embarrassed, Thank you for all the help that was provided.</p>\n"}], "owner": {"reputation": 33, "user_id": 7736918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32541ce0b41b260f0496913ad50a1eb0?s=128&d=identicon&r=PG&f=1", "display_name": "ppolicherla91", "link": "https://stackoverflow.com/users/7736918/ppolicherla91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540488873, "creation_date": 1540398013, "last_edit_date": 1540488873, "question_id": 52973770, "link": "https://stackoverflow.com/questions/52973770/include-function-inside-a-some-function", "title": "Include function inside a some function", "body": "<p>I am getting a json object for my role guard and I am trying to check and see if the user has a set of roles where one of them is in the list of accepted roles for the action. I have the function set up as follows:</p>\n\n<pre><code>export class RoleGuard implements CanActivate{\nconstructor (private readonly reflector: Reflector, readonly jwtService: JwtService) {}\npublic canActivate(context: ExecutionContext): boolean {\n    const roles = this.reflector.get&lt;string[]&gt;('groups', context.getHandler());\n    if (!roles) {\n        return true;\n    }\n    const request = context.switchToHttp().getRequest();\n    const user: any = this.jwtService.decode(request.headers.authorization.substr(7), { json: true, complete: true });\n    // tslint:disable-next-line:ter-arrow-parens\n    const hasGroup = () =&gt; user.payload.groups.some((role: any) =&gt; roles.includes(role));\n    return user &amp;&amp; user.payload.groups &amp;&amp; hasGroup();\n</code></pre>\n\n<p>user.payload.groups is the array of the roles the user has and \"roles\" is the list of accepted roles that can perform the action. However every time that the program runs it fails even with the right role. What is happening here that I am not seeing? I got this from the documentation from the nestjs website: <a href=\"https://docs.nestjs.com/guards\" rel=\"nofollow noreferrer\">https://docs.nestjs.com/guards</a></p>\n\n<p>example for groups object:</p>\n\n<pre><code>Array(3) [\"role1\", \"role2\", \"role3\"]\nlength:3\n__proto__:Array(0) [, \u2026]\n0:\"role1\"\n1:\"role2\"\n2:\"role3\"\n</code></pre>\n\n<p>example for roles object:</p>\n\n<pre><code>Array(2) [\"role4\", \"role3\"]\nlength:2\n__proto__:Array(0) [, \u2026]\n0:\"role4\"\n1:\"role3\"\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1832, "user_id": 8947748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d73b489c80b662f62baccd4f8c4da4?s=128&d=identicon&r=PG&f=1", "display_name": "rhavelka", "link": "https://stackoverflow.com/users/8947748/rhavelka"}, "edited": false, "score": 0, "creation_date": 1540400298, "post_id": 52973610, "comment_id": 92855161, "body": "in your subscribe, if you take out the <code>this.cacin = cabin</code> and add a <code>console.log(cabin)</code>, do you get the full cabin object or just the comments?"}, {"owner": {"reputation": 83, "user_id": 2665110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a897920fd21a13e762712ac43dfa3?s=128&d=identicon&r=PG", "display_name": "Natasha", "link": "https://stackoverflow.com/users/2665110/natasha"}, "reply_to_user": {"reputation": 1832, "user_id": 8947748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d73b489c80b662f62baccd4f8c4da4?s=128&d=identicon&r=PG&f=1", "display_name": "rhavelka", "link": "https://stackoverflow.com/users/8947748/rhavelka"}, "edited": false, "score": 0, "creation_date": 1540400676, "post_id": 52973610, "comment_id": 92855353, "body": "I get the full cabin"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 7953755, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10159102321335497/picture?type=large", "display_name": "Pari Baker", "link": "https://stackoverflow.com/users/7953755/pari-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1540402596, "last_edit_date": 1540402596, "creation_date": 1540400498, "answer_id": 52974420, "question_id": 52973610, "link": "https://stackoverflow.com/questions/52973610/push-an-array-inside-a-array-and-after-update-array-and-save-to-database-angul/52974420#52974420", "title": "Push an array inside a array and after update array and save to database - angular", "body": "<p>Well the issue is with the put method itself, you need to put back the whole object.. what I like to do is get the object first then add the data and push it all back as it was if you use mongoose for example you can update just the child schema of a schema, but it depends on the db engine.. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>updatePosts(){\r\n const data={\"last\": \"test2\"};\r\n\r\n return this.http.get&lt;{post: Posts}&gt;('http://localhost:3000/posts/5').pipe(\r\n  map(post=&gt;{\r\n    console.log(post);\r\n\r\n\r\n     return{\r\n           description: cabin.description,\r\n           featured: cabin.featured,\r\n           comments: cabin.comments\r\n\r\n         };\r\n\r\n\r\n     })\r\n    ).subscribe(updatedEntries=&gt;{\r\n      updatedEntries.cabin.comments.push(data);\r\n      return this.http.put('http://localhost:3000/cabins/'+id, updatedEntries);\r\n\r\n\r\n\r\n});</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 83, "user_id": 2665110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a897920fd21a13e762712ac43dfa3?s=128&d=identicon&r=PG", "display_name": "Natasha", "link": "https://stackoverflow.com/users/2665110/natasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540503809, "creation_date": 1540397493, "last_edit_date": 1540503809, "question_id": 52973610, "link": "https://stackoverflow.com/questions/52973610/push-an-array-inside-a-array-and-after-update-array-and-save-to-database-angul", "title": "Push an array inside a array and after update array and save to database - angular", "body": "<p>I want to push an array comment in to cabin.comments array and after UPDATE of the cabin array with the new comment in it when the user submits a comment using the onSubmit() and update the cabin with the updateCabin.\nIn the console when running \"ng serve --open\" I am getting an error: </p>\n\n<p>error TS1128: Declaration or statement expect</p>\n\n<p>I am using a JSON database in the main folder.<br>\nI am really new to angular and I am lost.</p>\n\n<p>This is my component </p>\n\n<pre><code>            import { Location } from '@angular/common';\n    import { Component, Inject, OnInit } from '@angular/core';\n    import { FormBuilder, FormGroup, Validators } from '@angular/forms';\n    import { Params, ActivatedRoute } from '@angular/router';\n\n\n    import { Comment } from '../shared/comment';\n    import { Cabin } from '../shared/cabin';\n    import { CabinService } from '../services/cabin.service';\n\n    @Component({\n      selector: 'app-cabin-detail',\n      templateUrl: './cabin-detail.component.html',\n      styleUrls: ['./cabin-detail.component.css']\n    })\n    export class CabinDetailComponent implements OnInit {\n       cabin: Cabin;\n       cabins: Cabin[];\n      comment: Comment;\n      commentForm: FormGroup;\n      errMess: string;\n\n\n      formErrors = {\n        'author' : '',\n        'rating' : '',\n        'comment' : ''\n      };\n\n      validationMessages = {\n        'author' : {\n          'required' : 'Name is required',\n          'minlength' : 'Name must be at least 2 characters long',\n          'maxlength' : 'Name cannot be more that 25 characters long'\n        }\n      };\n\n\n      constructor(\n        private cabinService: CabinService,\n         private fb: FormBuilder,\n        private location: Location,\n        private route: ActivatedRoute,\n        @Inject(\"BaseURL\") private BaseURL\n      ) {\n        this.createForm();\n      }\n\n      ngOnInit(): void {\n        this.getCabin();\n        this.getCabins();\n\n\n      }\n\n      getCabin(): void {\n        const id = +this.route.snapshot.paramMap.get('id');\n        this.cabinService.getCabin(id)\n          .subscribe(cabin =&gt; this.cabin = cabin);\n      }\n\n\n      getCabins(): void {\n        this.cabinService.getCabins()\n        .subscribe(cabins =&gt; this.cabins = cabins);\n      }\n\n    /* addComment(description: string): void {\n        description = description.trim();\n        if (!description) { return; }\n        this.cabinService.addCabin({ description } as Cabin)\n          .subscribe(cabin =&gt; {\n            this.cabins.push(cabin);\n          });\n      }\n     */\n     /* delete(cabin: Cabin): void {\n        this.cabins = this.cabins.filter(h =&gt; h !== cabin);\n        this.cabinService.deleteCabin(cabin).subscribe();\n      }\n      */\n\n        createForm() {\n        this.commentForm = this.fb.group({\n          author: ['', [ Validators.required, Validators.minLength(2) ] ],\n          rating: 5,\n          comment: ['', [ Validators.required ] ],\n        });\n\n        this.commentForm.valueChanges\n          .subscribe(data =&gt; this.onValueChanged(data));\n\n        this.onValueChanged(); // (re)set form validation messages\n      }\n\n        onValueChanged(commentFormData?: any) {\n        if (!this.commentForm) {\n          return;\n        }\n        const form = this.commentForm;\n        for (const field in this.formErrors) {\n          this.formErrors[field] = '';\n          const control = form.get(field);\n          if (control &amp;&amp; control.dirty &amp;&amp; !control.valid) {\n            const messages = this.validationMessages[field];\n            for (const key in control.errors) {\n              this.formErrors[field] += messages[key] + ' ';\n            }\n          }\n        }\n\n        if (this.commentForm.valid) {\n          this.comment = this.commentForm.value;\n        } else {\n          this.comment = undefined;\n        }\n      }\n\n      onSubmit(cabinId) {\n        const id = +this.route.snapshot.paramMap.get('id');\n        console.log(cabinId)\n\n        this.cabin.comments.push(this.comment);\n        this.cabinService.updatePosts(cabinId);\n\n        this.commentForm.reset({\n            author: '',\n            rating: 5,\n            comment: ''\n        });\n      }\n\n\n    }\n</code></pre>\n\n<p>My cabinService</p>\n\n<pre><code>            import { Injectable } from '@angular/core';\n\n    import { HttpClient, HttpHeaders } from '@angular/common/http';\n\n    import { Observable, of } from 'rxjs';\n    import { catchError, map, tap } from 'rxjs/operators';\n\n    import { Cabin } from '../shared/cabin';\n    import { MessageService } from './message.service';\n\n\n\n    const httpOptions = {\n      headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n    };\n\n    @Injectable({\n      providedIn: 'root'\n    })\n    export class CabinService {\n\n      private cabinsUrl = 'http://localhost:3000/cabins';  // URL to web api\n\n      constructor(\n        private http: HttpClient,\n        private messageService: MessageService) { }\n\n      /** GET cabins from the server */\n      getCabins(): Observable&lt;Cabin[]&gt; {\n        return this.http.get&lt;Cabin[]&gt;(this.cabinsUrl)\n          .pipe(\n            tap(cabins =&gt; this.log('fetched cabins')),\n            catchError(this.handleError('getCabins', []))\n          );\n      }\n\n      getFeaturedCabin(): Observable&lt;Cabin[]&gt; {\n        const url = 'http://localhost:3000/cabins?featured=true';\n        return this.http.get&lt;Cabin[]&gt;(url).pipe(\n          tap(_ =&gt; this.log('o')),\n          catchError(this.handleError&lt;Cabin[]&gt;(`getFeaturedCabin`))\n        );\n      }\n      /** GET cabin by id. Return `undefined` when id not found */\n      getCabinNo404&lt;Data&gt;(id: number): Observable&lt;Cabin&gt; {\n        const url = `${this.cabinsUrl}/?id=${id}`;\n        return this.http.get&lt;Cabin[]&gt;(url)\n          .pipe(\n            map(cabins =&gt; cabins[0]), // returns a {0|1} element array\n            tap(h =&gt; {\n              const outcome = h ? `fetched` : `did not find`;\n              this.log(`${outcome} cabin id=${id}`);\n            }),\n            catchError(this.handleError&lt;Cabin&gt;(`getCabin id=${id}`))\n          );\n      }\n\n      /** GET cabin by id. Will 404 if id not found */\n      getCabin(id: number): Observable&lt;Cabin&gt; {\n        const url = `${this.cabinsUrl}/${id}`;\n        return this.http.get&lt;Cabin&gt;(url).pipe(\n          tap(_ =&gt; this.log(`fetched cabin id=${id}`)),\n          catchError(this.handleError&lt;Cabin&gt;(`getCabin id=${id}`))\n        );\n      }\n\n          updatePosts(id) {\n        const comment:Comment= {   author: '',\n        rating: '',\n        comment: '',\n        date: '' };\n        return this.http.get&lt;Cabin&gt;('http://localhost:3000/cabins/' + id).pipe(\n          map(cabin =&gt; {\n            console.log(cabin);\n\n\n            return {\n              description: cabin.description,\n              featured: cabin.featured,\n              comments: cabin.comments\n\n            };\n\n\n          })\n        ).subscribe(updatedEntries =&gt; {\n          console.log(updatedEntries);\n\n          updatedEntries.comments.push(data);\n          return this.http.put('http://localhost:3000/cabins/' + id, updatedEntries);\n\n        });\n\n      }\n\n\n\n      /*\n\n\n\n      /**\n       * Handle Http operation that failed.\n       * Let the app continue.\n       * @param operation - name of the operation that failed\n       * @param result - optional value to return as the observable result\n       */\n      private handleError&lt;T&gt;(operation = 'operation', result?: T) {\n        return (error: any): Observable&lt;T&gt; =&gt; {\n\n          // TODO: send the error to remote logging infrastructure\n          console.error(error); // log to console instead\n\n          // TODO: better job of transforming error for user consumption\n          this.log(`${operation} failed: ${error.message}`);\n\n          // Let the app keep running by returning an empty result.\n          return of(result as T);\n        };\n      }\n\n      /** Log a CabinService message with the MessageService */\n      private log(message: string) {\n        this.messageService.add(`CabinService: ${message}`);\n      }\n\n    }\n</code></pre>\n\n<p>My JSON database</p>\n\n<pre><code>      \"cabins\": [\n        {\n          \"id\": 0,\n          \"description\": \"Tucked away on the hillside among lush gardens of banana &amp; citrus trees\",\n          \"featured\": \"true\",\n          \"comments\": [\n            {\n              \"rating\": 5,\n              \"comment\": \"Beautiful place!\",\n              \"author\": \"John Gomez\",\n              \"date\": \"2018-10-16T17:57:28.556094Z\"\n            },\n            {\n              \"rating\": 4,\n              \"comment\": \"Amazing!\",\n              \"author\": \"Paul Villar\",\n              \"date\": \"2017-09-05T17:57:28.556094Z\"\n            }\n          ]\n        }\n      ]\n</code></pre>\n"}, {"tags": ["typescript", "vue.js", "jsx"], "comments": [{"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540480882, "post_id": 52973485, "comment_id": 92890783, "body": "I&#39;m no expert on custom JSX configurations in TypeScript, but I&#39;ll fiddle with your project if you provide enough code to reproduce the problem.  It looks like I need the definition of <code>SomeComponent</code>."}, {"owner": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540574023, "post_id": 52973485, "comment_id": 92930221, "body": "@MattMcCutchen Edited the question with the info you requested"}], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "edited": false, "score": 0, "creation_date": 1540689072, "post_id": 53017665, "comment_id": 92956718, "body": "Sadly, this did not fix my issue (the error messages didn&#39;t even change), but I still thank you for your effort to try and help with this fairly outlandish issue."}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "reply_to_user": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "edited": false, "score": 1, "creation_date": 1540994133, "post_id": 53017665, "comment_id": 93066903, "body": "Are you using TypeScript 3.0 or newer for <code>JSX.LibraryManagedAttributes</code> support?  I&#39;ll make the usual offer that if you publish a repository that reproduces the problem, I&#39;ll mess with it."}, {"owner": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "edited": false, "score": 0, "creation_date": 1541031290, "post_id": 53017665, "comment_id": 93083924, "body": "I wasn&#39;t using TypeScript 3 yet, that explains it. I guess I&#39;ll upgrade and get back to you in case it doesn&#39;t work."}], "tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": false, "score": 2, "last_activity_date": 1540598769, "creation_date": 1540598769, "answer_id": 53017665, "question_id": 52973485, "link": "https://stackoverflow.com/questions/52973485/unable-to-use-html-attributes-on-custom-components-in-tsx/53017665#53017665", "title": "Unable to use HTML attributes on custom components in TSX", "body": "<p>I was able to shut off type checking of JSX attributes by adding the following to <code>namespace JSX</code> in <code>jsx.d.ts</code>:</p>\n\n<pre><code>type LibraryManagedAttributes&lt;C, P&gt; = {[name: string]: any};\n</code></pre>\n\n<p>(For reasons I have not investigated, <code>type LibraryManagedAttributes&lt;C, P&gt; = any;</code> does not work.)</p>\n\n<p>Getting proper type checking would be a matter of defining <code>JSX.LibraryManagedAttributes</code> to calculate the JSX attributes type of a component from the component type.  But <a href=\"https://github.com/Microsoft/TypeScript/issues/13260#issuecomment-270276955\" rel=\"nofollow noreferrer\">this comment</a> suggests the calculation is very complex for Vue (in contrast to React).</p>\n"}], "owner": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540598769, "creation_date": 1540397104, "last_edit_date": 1540573997, "question_id": 52973485, "link": "https://stackoverflow.com/questions/52973485/unable-to-use-html-attributes-on-custom-components-in-tsx", "title": "Unable to use HTML attributes on custom components in TSX", "body": "<p>For starters, I'm using <code>jsx: \"preserve\"</code> with this <code>jsx.d.ts</code> file, taken from a quick Google search on the subject.</p>\n\n<pre><code>import Vue, {VNode} from \"vue\";\n\ndeclare global {\n  namespace JSX {\n    interface Element extends VNode {}\n    interface ElementClass extends Vue {}\n    interface IntrinsicElements {\n      [elem: string]: any;\n    }\n  }\n}\n</code></pre>\n\n<p>Unfortunately, while everything I found pretty much provided this exact declaration file, none of the results went further in-depth about how to use JSX with custom components.</p>\n\n<p>In my case, I have a component defined with <code>Vue.extend()</code> that I'd like to use within JSX. This component is the default export in a file called <code>SomeComponent.tsx</code>. The code that's causing the issue looks like this.</p>\n\n<pre><code>import Vue, {CreateElement} from \"vue\";\n\nimport SomeComponent from \"./SomeComponent.tsx\";\n\nexport default Vue.extend({\n  name: \"SomeOtherComponent\",\n  functional: true,\n  render: (h: CreateElement) =&gt; (\n    &lt;div class=\"something\"&gt;\n      &lt;SomeComponent\n        class=\"something-else\"\n        someProp={1234}\n      &gt;\n        Slot Content\n      &lt;/SomeComponent&gt;\n    &lt;/div&gt;\n  )\n});\n</code></pre>\n\n<p>Compilation fails at line 11, column 9 with the following message: <code>TS2339: Property 'class' does not exist on type 'ComponentOptions&lt;Record&lt;string, any&gt; &amp; Vue, DefaultData&lt;Record&lt;string, any&gt; &amp; Vue&gt;, DefaultMethod...'</code>.</p>\n\n<p>I understand that it fails to type-check the use of <code>class=\"something-else\"</code> on the custom component.<br>\nTaken from the <a href=\"https://github.com/Microsoft/TypeScript/issues/3203\" rel=\"nofollow noreferrer\">JSX in TypeScript</a> proposal on GitHub:</p>\n\n<blockquote>\n  <p><code>&lt;Something x={expr1} { ...spr } y={expr2} /&gt;</code><br>\n  Given an element attributes type <code>E</code> derived from <code>Something</code> in the above example, the attributes of the element are checked as follows:</p>\n  \n  <p>If the attribute is a normal attribute <code>P</code> initialized with <code>expr</code>:<br>\n  If <code>E</code> has a property <code>P</code>, process <code>expr</code> with the contextual type of the type of <code>E.P</code>. Otherwise, issue an error.<br>\n  It is an error if <code>expr</code> is not assignable to <code>E.P</code>.</p>\n</blockquote>\n\n<p>However, what I don't know/understand is how I'd be able to get the <code>class</code> attribute to type-check properly, i.e. in what way I'd need to adjust my <code>jsx.d.ts</code>.</p>\n\n<p>If need be, I would also be fine with disabling type-checking for JSX, but I'm unsure how I would do that as well. Here's what I tried so far.</p>\n\n<p>According to the proposal linked above  </p>\n\n<blockquote>\n  <p>If the element type is <code>any</code>, the element instance type is <code>any</code>.</p>\n</blockquote>\n\n<p>I tried setting <code>JSX.ElementClass</code> to <code>any</code> by replacing <code>interface ElementClass extends Vue {}</code> with <code>type ElementClass = any</code>, but it failed with the same error at the exact same location.</p>\n\n<p>I also tried adding <code>interface ElementAttributesPropert {}</code> to my <code>jsx.d.ts</code>, in accordance with</p>\n\n<blockquote>\n  <p>The interface <code>JSX.ElementAttributesProperty</code> defines this process. It may have 0 properties, in which case all attributes are assumed to be valid and of type <code>any</code>, [...].</p>\n</blockquote>\n\n<p>This, in turn, produces another error, that is</p>\n\n<pre><code>TS2322: Type '{ class: string; someProp: number; }' is not assignable to type 'CombinedVueInstance&lt;Record&lt;string, any&gt; &amp; Vue, object, object, object, Record&lt;never, any&gt;&gt;'.\n  Type '{ class: string; someProp: number; }' is not assignable to type 'Vue'.\n    Property '$el' is missing in type '{ class: string; someProp: number; }'.\n</code></pre>\n\n<p>I know this code <em>should</em> work, as I've run it through Babel after manually removing the TypeScript parts and receiving the expected output.</p>\n\n<h2>Edit for Matt McCutchen:</h2>\n\n<p>This is the definition for <code>SomeComponent</code> I have. It's pretty much just a wrapper around <code>&lt;router-link /&gt;</code> rigged to do something additional on click. Works like a charm in regular templates, e.g. SFC <code>&lt;template&gt;</code>. The only reason I've tried to solve this with JSX was <a href=\"https://github.com/vuejs/vue/issues/6872\" rel=\"nofollow noreferrer\">this</a> issue with templates and functional components.</p>\n\n<pre><code>import Vue, {CreateElement, RenderContext} from \"vue\";\n\nexport default Vue.extend({\n  name: \"SomeComponent\",\n  functional: true,\n  render(h: CreateElement, {children, data}: RenderContext) {\n    const doStuff = () =&gt; console.log(\"Hello there!\");\n\n    return (\n      &lt;router-link\n        {...data}\n        nativeOnClick={doStuff}\n      &gt;\n        {children}\n      &lt;/router-link&gt;\n    );\n  }\n});\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "angular6"], "comments": [{"owner": {"reputation": 365, "user_id": 1036396, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/787cd65cd9a80fa5cdbeb1f38e237c87?s=128&d=identicon&r=PG", "display_name": "Jason Spence", "link": "https://stackoverflow.com/users/1036396/jason-spence"}, "edited": false, "score": 0, "creation_date": 1576696888, "post_id": 52973461, "comment_id": 104986607, "body": "After running into this same issue a year later, I have found a better solution based on @Andriy solution below.   Use: &quot;SecurityContext.URL&quot; instead of &quot;SecurityContext.RESOURCE_URL&quot;   this.userProfilePhoto = this.sanitizer.sanitize(SecurityContext.URL, <code>${ this.userDetails.profilePhotoUrl }?t=${ this.timestamp }</code>);"}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 2634404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a1Jfy.png?s=128&g=1", "display_name": "poxopox", "link": "https://stackoverflow.com/users/2634404/poxopox"}, "is_accepted": true, "score": 2, "last_activity_date": 1540397186, "creation_date": 1540397186, "answer_id": 52973509, "question_id": 52973461, "link": "https://stackoverflow.com/questions/52973461/angular-6-display-sanitized-background-image/52973509#52973509", "title": "Angular 6 display sanitized background image", "body": "<p>Reference the actual property <code>changingThisBreaksApplicationSecurity</code> since you need to get the url string.</p>\n"}, {"tags": [], "owner": {"reputation": 12628, "user_id": 3244064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea793dcbaff5a5e29ad3d05ef564d86?s=128&d=identicon&r=PG", "display_name": "Andriy", "link": "https://stackoverflow.com/users/3244064/andriy"}, "is_accepted": false, "score": 1, "last_activity_date": 1540454766, "creation_date": 1540454766, "answer_id": 52984317, "question_id": 52973461, "link": "https://stackoverflow.com/questions/52973461/angular-6-display-sanitized-background-image/52984317#52984317", "title": "Angular 6 display sanitized background image", "body": "<p>In order to get a row resouce URL of <code>safeValue</code> object, <a href=\"https://github.com/angular/angular/blob/7.0.0/packages/platform-browser/src/security/dom_sanitization_service.ts#L151\" rel=\"nofollow noreferrer\"><code>DomSanitizerImpl.sanitize()</code></a> function may be used:</p>\n\n<pre><code>...\nimport { \u0275DomSanitizerImpl, DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n...\n\n// row URL \nurl = 'https://www.gravatar.com/avatar/5ea793dcbaff5a5e29ad3d05ef564d86';\n\n// safe value type URL\nsafeUrl = this._sanitizer.bypassSecurityTrustResourceUrl(this.url);\n\n// sanitized back from safe value raw URL\nsanitizedUrl = this._sanitizerImpl.sanitize(SecurityContext.RESOURCE_URL, this.safeUrl);\n\n...\nconstructor(protected _sanitizer: DomSanitizer, protected _sanitizerImpl: \u0275DomSanitizerImpl) {}\n</code></pre>\n\n<p>I created a <a href=\"https://stackblitz.com/edit/angular-mkg7gx?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">STACKBLITZ</a> to demonstrate it, please look at <code>console.logs</code></p>\n"}], "owner": {"reputation": 365, "user_id": 1036396, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/787cd65cd9a80fa5cdbeb1f38e237c87?s=128&d=identicon&r=PG", "display_name": "Jason Spence", "link": "https://stackoverflow.com/users/1036396/jason-spence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "accepted_answer_id": 52973509, "answer_count": 2, "score": 1, "last_activity_date": 1540454766, "creation_date": 1540397036, "last_edit_date": 1540398673, "question_id": 52973461, "link": "https://stackoverflow.com/questions/52973461/angular-6-display-sanitized-background-image", "title": "Angular 6 display sanitized background image", "body": "<p>I've been able to construct the image url without receiving the sanitizer errors, but my background image still will not show up. Do I have to access the \"changingThisBreaksApplicationSecurity\" property for this image to show properly? Any help with this is greatly appreciated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bhT1c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bhT1c.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/8711J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8711J.png\" alt=\"Chrome DevTools\"></a></p>\n\n<p><strong>UPDATE:</strong>\nIt seems wrong to access this property in the markup, but it works.\n<a href=\"https://i.stack.imgur.com/mw9Bt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mw9Bt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "primeng"], "comments": [{"owner": {"reputation": 45386, "user_id": 1264804, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/oYX71.png?s=128&g=1", "display_name": "isherwood", "link": "https://stackoverflow.com/users/1264804/isherwood"}, "edited": false, "score": 1, "creation_date": 1540395715, "post_id": 52972997, "comment_id": 92852421, "body": "There doesn&#39;t seem to be any Angular code in your Angular question."}, {"owner": {"reputation": 171, "user_id": 5574597, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e785db5f0b2b2d7fe64ade484906e0b0?s=128&d=identicon&r=PG&f=1", "display_name": "Leminur", "link": "https://stackoverflow.com/users/5574597/leminur"}, "reply_to_user": {"reputation": 45386, "user_id": 1264804, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/oYX71.png?s=128&g=1", "display_name": "isherwood", "link": "https://stackoverflow.com/users/1264804/isherwood"}, "edited": false, "score": 0, "creation_date": 1540395970, "post_id": 52972997, "comment_id": 92852596, "body": "Ohhh! Sorry about that! Should I put in the TypeScript part, or is it okay @isherwood?"}, {"owner": {"reputation": 301, "user_id": 896305, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/290314355273bdf3cc4b7050264b5428?s=128&d=identicon&r=PG", "display_name": "balaG", "link": "https://stackoverflow.com/users/896305/balag"}, "edited": false, "score": 0, "creation_date": 1540396032, "post_id": 52972997, "comment_id": 92852629, "body": "can you add the ts file and if possible simulate the issue in <a href=\"http://stackblitz.com\" rel=\"nofollow noreferrer\">stackblitz.com</a>"}, {"owner": {"reputation": 45386, "user_id": 1264804, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/oYX71.png?s=128&g=1", "display_name": "isherwood", "link": "https://stackoverflow.com/users/1264804/isherwood"}, "edited": false, "score": 0, "creation_date": 1540396049, "post_id": 52972997, "comment_id": 92852645, "body": "Of course. How can we troubleshoot your app without it? In particular, <code>addAviso()</code> and <code>deletaAviso()</code>, but also anything else relevant."}, {"owner": {"reputation": 171, "user_id": 5574597, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e785db5f0b2b2d7fe64ade484906e0b0?s=128&d=identicon&r=PG&f=1", "display_name": "Leminur", "link": "https://stackoverflow.com/users/5574597/leminur"}, "edited": false, "score": 0, "creation_date": 1540396511, "post_id": 52972997, "comment_id": 92852950, "body": "There! I have added the TS part, I am going to share the stackblitz simulation in a bit."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5574597, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e785db5f0b2b2d7fe64ade484906e0b0?s=128&d=identicon&r=PG&f=1", "display_name": "Leminur", "link": "https://stackoverflow.com/users/5574597/leminur"}, "edited": false, "score": 0, "creation_date": 1540398985, "post_id": 52973647, "comment_id": 92854416, "body": "That did the right trick! I shall remember this change detector, thanks for that!"}], "tags": [], "owner": {"reputation": 7629, "user_id": 1167953, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IPwxJ.jpg?s=128&g=1", "display_name": "Andrius Naru\u0161evi\u010dius", "link": "https://stackoverflow.com/users/1167953/andrius-naru%c5%a1evi%c4%8dius"}, "is_accepted": true, "score": 3, "last_activity_date": 1540397615, "creation_date": 1540397615, "answer_id": 52973647, "question_id": 52972997, "link": "https://stackoverflow.com/questions/52972997/div-element-is-only-loading-correctly-after-clicks/52973647#52973647", "title": "Div element is only loading correctly after clicks", "body": "<p>This is probably the common problem of not properly detecting changes. Add <a href=\"https://angular.io/api/core/ChangeDetectorRef\" rel=\"nofollow noreferrer\">ChangeDetectorRef</a> injection into your component:</p>\n\n<pre><code>constructor (..., changeDetector: ChangeDetectorRef)\n</code></pre>\n\n<p>and invoke <code>detectChanges</code> after adding/removing:</p>\n\n<pre><code>addAviso(){\n    this.disparaEmails.push(new EmailDispara());\n    this.changeDetector.detectChanges(); // &lt;- this line here\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5574597, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e785db5f0b2b2d7fe64ade484906e0b0?s=128&d=identicon&r=PG&f=1", "display_name": "Leminur", "link": "https://stackoverflow.com/users/5574597/leminur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52973647, "answer_count": 1, "score": 0, "last_activity_date": 1540397615, "creation_date": 1540395563, "last_edit_date": 1540396677, "question_id": 52972997, "link": "https://stackoverflow.com/questions/52972997/div-element-is-only-loading-correctly-after-clicks", "title": "Div element is only loading correctly after clicks", "body": "<p>I am having a bit of trouble when loading dynamic divs on Angular. I have made a button which adds new divs on each click on a specific area. But the problem happens once I have added them, as they are shown incorrectly:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sAE6q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sAE6q.png\" alt=\"Imagem 1\"></a></p>\n\n<p>The editor and the calendar (Both are made by PrimeNG) are not shown after I add such div, as it shows on the picture above. But after I click twice on the text box (marked as red in the picture below), the components load up.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UsuoH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UsuoH.png\" alt=\"Imagem 2\"></a></p>\n\n<p>Here is the HTML code I am using to show that.</p>\n\n<pre><code>&lt;div class=\"ui-g-9\" style=\"border: 2px solid #c8c8c8; border-radius: 5px;\"&gt;\n        &lt;section class=\"card\" style=\"display: flex; overflow-x: auto; overflow-y: unset;\"&gt;\n                &lt;div *ngFor=\"let disparaEmail of disparaEmails\" class=\"ui-g-4\" style=\"margin-right: 10px; border: 1px solid #c8c8c8; border-radius: 5px; min-width: 466.828px;\"&gt;\n\n                    &lt;p class=\"titulo-campo font1 fw700\"&gt;Assunto:&lt;/p&gt;\n                    &lt;textarea pInputTextarea [rows]=\"2\" [(ngModel)]=\"disparaEmail.assuntoEmail\" style=\"width: 100%; resize:unset; font-size: 18px;\"&gt;&lt;/textarea&gt;\n\n                    &lt;p class=\"titulo-campo font1 fw700\"&gt;Tipo de Aviso:&lt;/p&gt;\n                    &lt;p-editor [style]=\"{'height':'300px'}\" [(ngModel)]=\"disparaEmail.msgEmail\"&gt;&lt;/p-editor&gt;\n\n                    &lt;p class=\"titulo-campo font1 fw700\"&gt;Data:&lt;/p&gt;\n                    &lt;p-calendar [(ngModel)]=\"disparaEmail.dataEmail\" dateFormat=\"dd/mm/yy\" showButtonBar=\"true\" [locale]=\"br\" [monthNavigator]=\"true\"\n                        [yearNavigator]=\"true\" yearRange=\"2018:2050\"&gt;&lt;/p-calendar&gt;\n\n                &lt;/div&gt;\n        &lt;/section&gt;\n&lt;/div&gt;\n\n &lt;div style=\"display: inline-grid;\"&gt;\n        &lt;i class=\"fa fa-plus botoes-chamada\" (click)=\"addAviso()\" style=\"color: #819049; padding:30px; margin-bottom: 10px;\" pTooltip=\"Adicionar um tipo de aviso.\"&gt;&lt;/i&gt;\n        &lt;i class=\"fa fa-minus botoes-chamada\" (click)=\"deletaAviso()\" style=\"color: #905149; padding:10px;\" pTooltip=\"Remover o \u00faltimo tipo de aviso inserido.\"&gt;&lt;/i&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>Here is the TS part:</p>\n\n<pre><code>addAviso(){\n    this.disparaEmails.push(new EmailDispara());\n}\n\ndeletaAviso(){\n    if (this.disparaEmails.length &gt; 1){\n        this.disparaEmails.splice(this.disparaEmails.length - 1, 1);\n    }\n}\n</code></pre>\n\n<p>Thanks for the help in advance! </p>\n"}, {"tags": ["angular", "typescript", "angularjs-directive", "ngfor"], "answers": [{"tags": [], "owner": {"reputation": 11744, "user_id": 5914191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EqWhs.jpg?s=128&g=1", "display_name": "Teddy Sterne", "link": "https://stackoverflow.com/users/5914191/teddy-sterne"}, "is_accepted": false, "score": 2, "last_activity_date": 1540396394, "last_edit_date": 1540396394, "creation_date": 1540395988, "answer_id": 52973152, "question_id": 52972992, "link": "https://stackoverflow.com/questions/52972992/use-counter-outside-ngfor/52973152#52973152", "title": "use counter outside ngfor", "body": "<p>You can use the <code>length</code> property of the array to display how many elements are in the table.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;#&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Name&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;IP&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Session_ID&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;tr *ngFor='let obj of methodResponse; let theIndex = index;'&gt;\n      &lt;td scope=\"row\"&gt; {{theIndex + 1}}&lt;/td&gt;\n      &lt;td&gt;{{obj.name}}&lt;/td&gt;\n      &lt;td&gt;{{obj.sourceIp}}&lt;/td&gt;\n      &lt;td&gt;{{obj.sessionId}}&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n  &lt;tfoot&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;/td&gt;\n      &lt;td&gt;{{methodResponse.length}}&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tfoot&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 896305, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/290314355273bdf3cc4b7050264b5428?s=128&d=identicon&r=PG", "display_name": "balaG", "link": "https://stackoverflow.com/users/896305/balag"}, "is_accepted": false, "score": 0, "last_activity_date": 1540396188, "creation_date": 1540396188, "answer_id": 52973202, "question_id": 52972992, "link": "https://stackoverflow.com/questions/52972992/use-counter-outside-ngfor/52973202#52973202", "title": "use counter outside ngfor", "body": "<p>// final value of theIndex\nyou can achieve it using the below code </p>\n\nLast value: {{methodResponse.length - 1}}\n"}], "owner": {"reputation": 46, "user_id": 5445448, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154327434108957/picture?type=large", "display_name": "Mohamed Saber", "link": "https://stackoverflow.com/users/5445448/mohamed-saber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540396394, "creation_date": 1540395539, "last_edit_date": 1540396388, "question_id": 52972992, "link": "https://stackoverflow.com/questions/52972992/use-counter-outside-ngfor", "title": "use counter outside ngfor", "body": "<p>I am trying to count number of row in my table using it ouside ngFor directive as the following code illustrate</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;#&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Name&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;IP&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Session_ID&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;tr *ngFor='let obj of methodResponse; let theIndex = index;'&gt;\n      &lt;th scope=\"row\"&gt; {{theIndex + 1}}&lt;/th&gt;\n      &lt;td&gt;{{obj.name}}&lt;/td&gt;\n      &lt;td&gt;{{obj.sourceIp}}&lt;/td&gt;\n      &lt;td&gt;{{obj.sessionId}}&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;!-- I want to use the final value of theIndex value here --&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>how can I count each row and use it outside the ngFor, I have tried to call a function inside ngFor but it didn't work for me, any help ?</p>\n"}, {"tags": ["angular", "typescript", "angular6", "vmware-clarity"], "answers": [{"tags": [], "owner": {"reputation": 6815, "user_id": 3969946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d321732817d23db36dd8dc81036f122?s=128&d=identicon&r=PG", "display_name": "Jeremy Wilken", "link": "https://stackoverflow.com/users/3969946/jeremy-wilken"}, "is_accepted": false, "score": 0, "last_activity_date": 1540577562, "creation_date": 1540577562, "answer_id": 53014212, "question_id": 52972906, "link": "https://stackoverflow.com/questions/52972906/making-prefill-date-input-in-ui/53014212#53014212", "title": "making prefill date input in UI", "body": "<p>This has nothing to do with Clarity, but rather how some HTML elements work. </p>\n\n<p>The issue is that you are creating a new date that is based on UTC, and then dropping the timezone (the substr removes the Z). The <code>datetime-local</code> input assumes that it is in the local time zone. So you'll have to build the date in the local time zone and then it will display properly. You will have to construct the time manually (or use a library like MomentJS) because there is no JavaScript Date method that gives you the <code>YYYY-MM-DDTHH:MM</code> type format.</p>\n\n<p><code>datetime-local</code> is not supported by all major browsers, so I would caution against using it.</p>\n"}], "owner": {"reputation": 223, "user_id": 4912160, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6bI0AwiQpeo/AAAAAAAAAAI/AAAAAAAAAQ0/jt6CEw7LTqc/photo.jpg?sz=128", "display_name": "vinay k hegde", "link": "https://stackoverflow.com/users/4912160/vinay-k-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540577562, "creation_date": 1540395281, "last_edit_date": 1540400922, "question_id": 52972906, "link": "https://stackoverflow.com/questions/52972906/making-prefill-date-input-in-ui", "title": "making prefill date input in UI", "body": "<p>Hi I am new to vmware clarity UI, My problem I am using datetime-local I want to pre populate the current date and time in the datetime-local filed I am trying to do it using ngModel with following format 2017-06-13T13:00, its pre-populating on the UI but the time is not showing proper, <strong>its behind 5hours IST</strong> Please let me know where I am going wrong, Thanks in advance</p>\n\n<p>html component</p>\n\n<pre><code> &lt;clr-input-container&gt;\n    &lt;label&gt;Start Time&lt;/label&gt;\n    &lt;input type=\"datetime-local\" clrInput [(ngModel)]=\"start_time\" name=\"start_time\" style=\"width:100%\" required /&gt;\n    &lt;!-- &lt;clr-control-helper&gt;Please choose Incident Start Date&amp;Time in DD/MM/YYYY Hr:M:-AM/PM&lt;/clr-control-helper&gt; --&gt;\n    &lt;clr-control-error&gt;This field is required!&lt;/clr-control-error&gt;\n &lt;/clr-input-container&gt;\n</code></pre>\n\n<p>ts file</p>\n\n<pre><code>start_time =  new Date().toISOString().substr(0, 16);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cjPr1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cjPr1.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 9812400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHqVY.jpg?s=128&g=1", "display_name": "PuntanetDeveloper", "link": "https://stackoverflow.com/users/9812400/puntanetdeveloper"}, "is_accepted": true, "score": 1, "last_activity_date": 1540396934, "creation_date": 1540396934, "answer_id": 52973428, "question_id": 52972902, "link": "https://stackoverflow.com/questions/52972902/default-placeholder-of-select-box-in-angular/52973428#52973428", "title": "Default &quot;placeholder&quot; of Select-box in Angular?", "body": "<p>you can use <code>ngModel</code></p>\n\n<pre><code> &lt;select class=\"custom-select\" [(ngModel)]=\"model.select\"  name=\"select\" id=\"combo\"&gt;\n      &lt;option value=\"\"&gt;&lt;/option&gt;\n      &lt;option *ngFor=\"let item of list\" [ngValue]=\"item\"&gt;{{ item}}&lt;/option&gt;\n &lt;/select&gt;\n</code></pre>\n\n<p>component:</p>\n\n<pre><code>reset(){\n   model.selct='';\n}\n</code></pre>\n"}], "owner": {"reputation": 707, "user_id": 8343916, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/54d382e5c2f991df05e0f0138af7e5a9?s=128&d=identicon&r=PG&f=1", "display_name": "claudioz", "link": "https://stackoverflow.com/users/8343916/claudioz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 52973428, "answer_count": 1, "score": 0, "last_activity_date": 1540396934, "creation_date": 1540395271, "question_id": 52972902, "link": "https://stackoverflow.com/questions/52972902/default-placeholder-of-select-box-in-angular", "title": "Default &quot;placeholder&quot; of Select-box in Angular?", "body": "<p>I'm developing a web application (front-end size) using Angular 6.\nI have a question: I'm creating a component that contains different select-box, like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6DmL9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6DmL9.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I create a <code>reset()</code> method that changes all the select-box with the placeholder value (without canceling or modifying the options associated with him in any way)? \nIs there any way that allows this by modifying the html template programmatically?\nThanks!</p>\n"}, {"tags": ["typescript", "react-redux"], "comments": [{"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540478829, "post_id": 52972805, "comment_id": 92889462, "body": "I can help you investigate the original problem (lack of an error) if you provide code sufficient to reproduce the problem (e.g., both component classes)."}, {"owner": {"reputation": 21, "user_id": 10194073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5070fce4cb25a67b9348b5d1faa5865d?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/10194073/jb1"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540586047, "post_id": 52972805, "comment_id": 92935504, "body": "@MattMcCutchen I modified the description. As you can see, the ChildComp expects a string for &quot;offset,&quot; but the ParentComp is a number. This doesn&#39;t throw an error in typescript unless I modify the ChildProps to be &quot;offset: ParamObj[&#39;offset&#39;];&quot;"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540599980, "post_id": 52972805, "comment_id": 92938635, "body": "Your code gives me two errors: (1) the <code>const { offset } = this.props;</code> needs to be moved inside <code>render</code> and (2) <code>ParentProps</code> is not defined.  When I fix #1 and change <code>ParentProps</code> to <code>ParamObj</code>, then I get the expected error on the <code>offset</code> attribute, <code>Type &#39;number&#39; is not assignable to type &#39;string&#39;.</code>.  So the code you posted does not seem to be reproducing the problem."}, {"owner": {"reputation": 21, "user_id": 10194073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5070fce4cb25a67b9348b5d1faa5865d?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/10194073/jb1"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540939969, "post_id": 52972805, "comment_id": 93046293, "body": "@MattMcCutchen oops, I had a typos/wrong placements in the code sample. Hmm, so it seems like if the corrected code works, is there some setting that I could be missing? This is part of a very large project so I can&#39;t paste it here. But that&#39;s essentially what&#39;s happening for the Parent/Child component."}, {"owner": {"reputation": 21, "user_id": 10194073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5070fce4cb25a67b9348b5d1faa5865d?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/10194073/jb1"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540940418, "post_id": 52972805, "comment_id": 93046422, "body": "@MattMcCutchen Sorry, I updated the code sample since it looks like it was changed in the code. Does the new sample still work for you? If not, is it the way that it&#39;s now set up?"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540940775, "post_id": 52972805, "comment_id": 93046507, "body": "I pasted the new code sample into a file in a new project and added the React import and I still get the expected error, <code>Type &#39;number&#39; is not assignable to type &#39;string&#39;.</code>  You can try this yourself.  There must be something different about your original large project.  If you want to track down the issue, you&#39;ll have to either do it yourself or make a copy of the project and remove irrelevant code until you&#39;re left with a complete project that reproduces the problem that you&#39;re willing to share."}, {"owner": {"reputation": 21, "user_id": 10194073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5070fce4cb25a67b9348b5d1faa5865d?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/10194073/jb1"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1541020226, "post_id": 52972805, "comment_id": 93080766, "body": "@MattMcCutchen okay, thanks! I will have to investigate."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10194073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5070fce4cb25a67b9348b5d1faa5865d?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/10194073/jb1"}, "is_accepted": false, "score": 0, "last_activity_date": 1540468144, "creation_date": 1540468144, "answer_id": 52988575, "question_id": 52972805, "link": "https://stackoverflow.com/questions/52972805/typescript-doesnt-catch-wrong-type-in-react-sub-component/52988575#52988575", "title": "Typescript doesn&#39;t catch wrong type in react sub component", "body": "<p>I figured this out. I don't know why TS works this way, but it turns out I needed to do:</p>\n\n<pre><code>interface SubCompProps {\n    param1: ParamObj[\"param1\"];\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10194073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5070fce4cb25a67b9348b5d1faa5865d?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/10194073/jb1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540940244, "creation_date": 1540394979, "last_edit_date": 1540940244, "question_id": 52972805, "link": "https://stackoverflow.com/questions/52972805/typescript-doesnt-catch-wrong-type-in-react-sub-component", "title": "Typescript doesn&#39;t catch wrong type in react sub component", "body": "<p>React reducer:</p>\n\n<pre><code>export interface ParamObj {\n    count: number;\n    offset: number;\n}\n...\n</code></pre>\n\n<p>Then, I have a component:</p>\n\n<pre><code>import { ParamObj } from \"./MyReducer\";\n\ninterface ParentProps {\n    params: ParamObj;\n    handleClick: () =&gt; void;\n}\nclass ParentComp extends React.Component&lt;ParentProps, {}&gt; {\n    render() {\n        return &lt;ChildComp offset={this.props.params.offset} /&gt;;\n    }\n}\n</code></pre>\n\n<p>In the subcomponent, I have:</p>\n\n<pre><code>interface ChildProps {\n    offset: string;\n}\nclass ChildComp extends React.Component&lt;ChildProps, {}&gt; {\n    render() {\n        return &lt;div&gt;{this.props.offset}&lt;/div&gt;\n    }\n}\n</code></pre>\n\n<p>The problem is that the subcomponent doesn't throw an error even though the param1 type doesn't match the type from the parent component. The expected behavior is that it should say the SubComponent param1 expects a number, but the prop type is a string.</p>\n\n<p>How can I get it to recognize the type from the parent component?</p>\n\n<p>EDIT:\nAdded complete code. </p>\n"}, {"tags": ["angular", "typescript", "web", "ecmascript-6"], "comments": [{"owner": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "edited": false, "score": 0, "creation_date": 1540395927, "post_id": 52972768, "comment_id": 92852566, "body": "I suggest you take some more code from the live example and place it in the question. But I tried to give some insight in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "edited": false, "score": 0, "creation_date": 1540413916, "post_id": 52972943, "comment_id": 92861784, "body": "Wow, thanks for the very insightful reply :)  Using cast was what I was trying myself, but I wasn&#39;t sure how to approach it, this really helped!  I&#39;ve seen generic interfaces, but haven&#39;t actually used it myself before, so I should definitely try to look into that, thanks!  My idea was to aim for something like your last suggestion, but I used <code>implements</code> instead of <code>extends</code>  , so I will probably try that approach"}, {"owner": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "reply_to_user": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "edited": false, "score": 0, "creation_date": 1540414112, "post_id": 52972943, "comment_id": 92861890, "body": "You&#39;re welcome. <code>extends</code> is used when creating a new interface that inherits properties from another. <code>implements</code> is used when creating a class that implements an interface."}, {"owner": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "edited": false, "score": 0, "creation_date": 1540454207, "post_id": 52972943, "comment_id": 92874020, "body": "So I tried using extended interfaces, but I ran into some trouble.  In the stackblitz I have a service. This service has a function, that is responsible for adding an item to an array, and returning that array. This function has return type &quot;ItemInterface[]&quot;. When I invoke the function from app.component: <code>this.listOfCars = this.utilService.addItem(car, listOfCars) </code>, I get the following error on <code>this.listOfCars</code> <code>Type &#39;ItemInterface[]&#39; is not assignable to type &#39;CarInterface[]&#39;.</code> Is there a way to make addItem generic, so that it can return any of the 2 types of lists? Or"}, {"owner": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "reply_to_user": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "edited": false, "score": 0, "creation_date": 1540472407, "post_id": 52972943, "comment_id": 92884980, "body": "The method expects items, and a car is not an item, so no you can&#39;t do that. You&#39;re expecting the method to add a car to an array of items? If you could do that, there&#39;s no point in having type safety. You should pass the method an item, whose <code>item</code> property is a car. Or change the method to except cars or houses."}, {"owner": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "reply_to_user": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "edited": false, "score": 0, "creation_date": 1540472646, "post_id": 52972943, "comment_id": 92885119, "body": "If you want a truly generic method, you could have the signature be <code>public addItem&lt;T&gt;(itemToAdd: T, arrayTarget: T[]): T[] { ... }</code>, but that still wouldn&#39;t make your error go away because you&#39;re trying to force one type into an array of another type that&#39;s not compatible."}, {"owner": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "edited": false, "score": 1, "creation_date": 1540480649, "post_id": 52972943, "comment_id": 92890647, "body": "Thanks for the reply once again :) I have messed around with it all day, and I ended up with a solution with a generic approach, and it works like a charm!  I feel like the quality of my code has been raised by 200% :D Thanks again for the tips, even after I gave you credit"}], "tags": [], "owner": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "is_accepted": true, "score": 1, "last_activity_date": 1540416529, "last_edit_date": 1540416529, "creation_date": 1540395407, "answer_id": 52972943, "question_id": 52972768, "link": "https://stackoverflow.com/questions/52972768/an-interface-with-a-property-that-has-a-varying-interface/52972943#52972943", "title": "An interface, with a property that has a varying interface", "body": "<p>In your example, <code>listOfCars</code> is typed as <code>ItemInterface[]</code>, which has the following definition:</p>\n\n<pre><code>export interface ItemInterface {\n  id: number;\n  item: CarInterface | HouseInterface;\n}\n</code></pre>\n\n<p>TypeScript only knows that <code>item</code> will be either <code>CarInterface</code> or <code>HouseInterface</code>, but doesn't know which. So you'd have to cast:</p>\n\n<pre><code>const value = this.listOfCars.find(entry =&gt; (&lt;CarInterface&gt;entry.item).color === 'green');\n</code></pre>\n\n<p>This design seems a little odd though. It doesn't look like you need to mix cars and houses in the same list or anything like that, so typing them as the same may not be necessary. Are you sure you don't perhaps need a generic interface? Something like:</p>\n\n<pre><code>export interface ItemInterface&lt;T&gt; {\n  id: number;\n  item: T;\n} \n\npublic listOfCars: ItemInterface&lt;CarInterface&gt;[] = [];\n</code></pre>\n\n<p>Or perhaps an <code>ItemInterface</code> which the other interfaces extend?</p>\n\n<pre><code>export interface ItemInterface {\n  id: number;\n} \n\nexport interface CarInterface extends ItemInterface {\n  color: string;\n  doors: number;\n} \n\nexport interface HouseInterface extends ItemInterface {\n  rooms: number;\n  squareMeters: number;\n} \n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 4132538, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/264569d9d8bff833f8935405ec0a1453?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/4132538/jesper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 52972943, "answer_count": 1, "score": 0, "last_activity_date": 1540416529, "creation_date": 1540394873, "question_id": 52972768, "link": "https://stackoverflow.com/questions/52972768/an-interface-with-a-property-that-has-a-varying-interface", "title": "An interface, with a property that has a varying interface", "body": "<p>First, a link to my stackblitz: <a href=\"https://stackblitz.com/edit/angular-hnfgcx\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-hnfgcx</a></p>\n\n<p>I have written a more technical description of my issue in stackblitz aswell, so please read that for any clarification :)</p>\n\n<p>So the title might be a bit confusing, but let me try to elaborate.</p>\n\n<p>I have a basic interface for my \"items\", that has 2 properties: </p>\n\n<p>id - a unique identifier \nitem - a varying type (Either CarInterface or HouseInterface)</p>\n\n<p>However, when I try to access properties of a CarInterface or HouseInterface, the type isn't recognized.</p>\n\n<p>Thanks for your time!</p>\n"}, {"tags": ["typescript", "error-handling", "try-catch"], "comments": [{"owner": {"reputation": 26154, "user_id": 5436257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iGuaK.jpg?s=128&g=1", "display_name": "Joe Clay", "link": "https://stackoverflow.com/users/5436257/joe-clay"}, "edited": false, "score": 2, "creation_date": 1540394299, "post_id": 52972198, "comment_id": 92851492, "body": "Relevant TypeScript issues: <a href=\"https://github.com/Microsoft/TypeScript/issues/13219\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/13219</a> and <a href=\"https://github.com/Microsoft/TypeScript/issues/5413\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/5413</a>."}, {"owner": {"reputation": 11951, "user_id": 1126273, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XqyXV.png?s=128&g=1", "display_name": "Bal&#225;zs &#201;des", "link": "https://stackoverflow.com/users/1126273/bal%c3%a1zs-%c3%89des"}, "reply_to_user": {"reputation": 26154, "user_id": 5436257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iGuaK.jpg?s=128&g=1", "display_name": "Joe Clay", "link": "https://stackoverflow.com/users/5436257/joe-clay"}, "edited": false, "score": 1, "creation_date": 1540411279, "post_id": 52972198, "comment_id": 92860605, "body": "@JoeClay those where the issues that inspired this question, thanks for linking them!"}], "answers": [{"comments": [{"owner": {"reputation": 11951, "user_id": 1126273, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XqyXV.png?s=128&g=1", "display_name": "Bal&#225;zs &#201;des", "link": "https://stackoverflow.com/users/1126273/bal%c3%a1zs-%c3%89des"}, "edited": false, "score": 0, "creation_date": 1540411165, "post_id": 52973742, "comment_id": 92860554, "body": "I love asking these questions because I learn something new about ts every time (didn&#39;t know that you can declare function props)! The idea looks like a pretty nice workaround!"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 4, "last_activity_date": 1540397932, "creation_date": 1540397932, "answer_id": 52973742, "question_id": 52972198, "link": "https://stackoverflow.com/questions/52972198/type-safe-error-handling-without-3rd-party-libraries/52973742#52973742", "title": "Type-safe error handling without 3rd party libraries", "body": "<p>Since there's currently <a href=\"https://github.com/Microsoft/TypeScript/issues/13219\" rel=\"nofollow noreferrer\">no <code>throws</code> in TypeScript</a>, any suggestion is going to look like a workaround.  You're looking for a solution that doesn't result in any overhead for the user who wants to ignore errors, but which allows the users who do want to catch errors to get stronger types for the errors.  </p>\n\n<p>How about something like this (which requires TS3.1 and up to work):</p>\n\n<pre><code>function mighThrow(input: number): void {\n  if (input === 1) {\n    throw new TypeError('cannot be one')\n  } else if (input === 2) {\n    throw new SyntaxError('invalid syntax: 2')\n  }\n  console.log('all good', input);\n}\nmighThrow.throws = undefined! as TypeError | SyntaxError;\n</code></pre>\n\n<p>Here we have used a <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#properties-declarations-on-functions\" rel=\"nofollow noreferrer\">function property declaration</a> to declare a phantom property called <code>throws</code>.  A phantom property is one which doesn't really exist at runtime, but the compiler thinks it does, so the compiler maintains extra type information.  In this case, <code>undefined! as TypeError | SyntaxError</code> is just <code>undefined</code> at runtime, but the compiler thinks <code>mighThrow</code> has a <code>throws</code> property of type <code>TypeError | SyntaxError</code>.  </p>\n\n<p>Now when people want to catch errors, they can use a helper function:</p>\n\n<pre><code>type ThrowsType&lt;T&gt; = T extends { throws: infer E } ? E : unknown;\nconst asTypedError = &lt;FS extends Function[]&gt;(e: any, ...f: FS): ThrowsType&lt;FS[number]&gt; =&gt; e;\n</code></pre>\n\n<p>like this:</p>\n\n<pre><code>try {\n  const x = mighThrow(123);\n} catch (err) {\n  const typedErr = asTypedError(mighThrow, err);\n  // typedErr is now TypeError | SyntaxError\n  if (typedErr instanceof TypeError) {\n    typedErr; // TypeError\n  } else {\n    typedErr; // SyntaxError\n  }       \n}\n</code></pre>\n\n<hr>\n\n<p>It's not perfect by any means.  It requires the error catcher to keep track of which functions were called themselves.  A try-catch block that surrounds multiple functions would need to pass in all those functions to <code>asTypedError()</code>:</p>\n\n<pre><code>declare const alsoMightThrow: { throws: URIError } &amp; ((input: string) =&gt; number);\ntry {\n  const x = mighThrow(alsoMightThrow(\"hey\"));\n} catch (err) {     \n  const typedErr = asTypedError(err, mighThrow, alsoMightThrow); // \ud83d\ude10\n  // typedErr: TypeError | SyntaxError | URIError\n}\n</code></pre>\n\n<p>And nothing actually <em>guarantees</em> that the caught error is of the type(s) declared in the <code>throws</code> property... it's up to the library maintainer to get that right (which is hard because so many things can throw a <code>TypeError</code> at runtime).  Conversely, most functions will not have such a <code>throws</code> property, so there's not a lot of incentive for the average developer to use this type of error catching.  If someone puts a non-<code>throws</code> function there, <code>asTypedError</code> will output an <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#new-unknown-top-type\" rel=\"nofollow noreferrer\"><code>unknown</code></a> error, which is hardly more useful than <code>any</code>. You'd have to educate library users how to use this thing, at which point it could be easier just to <a href=\"http://usejsdoc.org/\" rel=\"nofollow noreferrer\">document</a> the heck out of your function and error catchers can do their own <code>instanceof</code> checks to narrow from <code>any</code>.  It's a workaround for a missing language feature, and it looks like it.  \ud83e\udd37\u200d\u2640\ufe0f</p>\n\n<hr>\n\n<p>Oh well, hope that helps.  Good luck!</p>\n"}], "owner": {"reputation": 11951, "user_id": 1126273, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XqyXV.png?s=128&g=1", "display_name": "Bal&#225;zs &#201;des", "link": "https://stackoverflow.com/users/1126273/bal%c3%a1zs-%c3%89des"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 52973742, "answer_count": 1, "score": 3, "last_activity_date": 1540397932, "creation_date": 1540393178, "question_id": 52972198, "link": "https://stackoverflow.com/questions/52972198/type-safe-error-handling-without-3rd-party-libraries", "title": "Type-safe error handling without 3rd party libraries", "body": "<p>I understand that the reason why typesafe error handling is not a thing in ts is because we are missing the <code>throws</code> clause from functions. So because of this whenever I do this:</p>\n\n<pre><code>function mighThrow(input: number): void {\n  if (input === 1) {\n    throw new TypeError('cannot be one')\n  } else if(input === 2) {\n    throw new SyntaxError('invalid syntax: 2')\n  }\n  console.log('all good', input)\n}\n</code></pre>\n\n<p>I can't catch the errors with accurate typing:</p>\n\n<pre><code>try {\n  mighThrow(1)\n} catch(e) {\n  // e is any, even though it could be TypeError | SyntaxError\n}\n</code></pre>\n\n<p>The issue is the same with <code>Promise</code>s, the catcher functions argument is hardcoded <code>any</code>:</p>\n\n<pre><code>interface Promise&lt;T&gt; {\n  then&lt;TResult1 = T, TResult2 = never&gt;(onfulfilled?: ((value: T) =&gt; TResult1 | PromiseLike&lt;TResult1&gt;) | undefined | null, onrejected?: ((reason: any) =&gt; TResult2 | PromiseLike&lt;TResult2&gt;) | undefined | null): Promise&lt;TResult1 | TResult2&gt;;\n  catch&lt;TResult = never&gt;(onrejected?: ((reason: any) =&gt; TResult | PromiseLike&lt;TResult&gt;) | undefined | null): Promise&lt;T | TResult&gt;;\n}\n</code></pre>\n\n<p>The argument of <code>catch</code> is any.</p>\n\n<p>So <strong>my question is</strong> how can I get around this? If I'm a library author, is there a typesafe way to help users figure out what exactly are they catching? I'm aware of solutions like adding an <code>Either</code> type and calling it a day, but this enforces handling the error on the spot, which just turns the code into something similar to as if the language would have checked exceptions.</p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions", "stackdriver"], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 6765187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-S2UDIn8LEdY/AAAAAAAAAAI/AAAAAAAAAUY/h3GRJJCdlds/photo.jpg?sz=128", "display_name": "Hady Rashwan", "link": "https://stackoverflow.com/users/6765187/hady-rashwan"}, "edited": false, "score": 0, "creation_date": 1540818879, "post_id": 53017695, "comment_id": 92991991, "body": "It&#39;s basically the same as what is said in the official repo <a href=\"https://github.com/googleapis/cloud-debug-nodejs\" rel=\"nofollow noreferrer\">github.com/googleapis/cloud-debug-nodejs</a> . still facing the same problem"}], "tags": [], "owner": {"reputation": 56, "user_id": 9453128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fTnA.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9453128/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1540599111, "creation_date": 1540599111, "answer_id": 53017695, "question_id": 52972137, "link": "https://stackoverflow.com/questions/52972137/use-stackdriver-debugger-with-cloud-functions-for-firebase-in-typescript/53017695#53017695", "title": "Use Stackdriver debugger with cloud functions for Firebase in Typescript", "body": "<p>This <a href=\"https://medium.com/google-cloud/stackdriver-debugger-on-google-cloud-functions-d49a6ee5f12c\" rel=\"nofollow noreferrer\">solution</a> implement Stackdriver Debugger with Cloud Function. It might be useful to review how they implement it versus your code.  </p>\n"}], "owner": {"reputation": 316, "user_id": 6765187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-S2UDIn8LEdY/AAAAAAAAAAI/AAAAAAAAAUY/h3GRJJCdlds/photo.jpg?sz=128", "display_name": "Hady Rashwan", "link": "https://stackoverflow.com/users/6765187/hady-rashwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1540599111, "creation_date": 1540393002, "last_edit_date": 1540393380, "question_id": 52972137, "link": "https://stackoverflow.com/questions/52972137/use-stackdriver-debugger-with-cloud-functions-for-firebase-in-typescript", "title": "Use Stackdriver debugger with cloud functions for Firebase in Typescript", "body": "<p>I want to connect the stackdriver debug agent in the cloud functions for firebase. The following is how I did set up the stackdriver agent to use on the start on the functions I want to debug.</p>\n\n<pre><code>// For debugging purposes\nconst debug = require('@google-cloud/debug-agent').start({  allowExpressions: true,\n});\n\nexport async function listen() {\n     await debug.isReady();\n}\n</code></pre>\n\n<p>Then use it like the following </p>\n\n<pre><code>export async function exampleCallableWrapper(\n  data: any,\n  context: functions.https.CallableContext\n) {\n  await listen();\n  data.Id = shortid.generate();\n// Do something\n\n  return \n}\n</code></pre>\n\n<p>I want to see the data object for example. The snapshot doesn't show anything after putting the breakpoint. </p>\n\n<ul>\n<li><p>I did put the breakpoint in the original functions/src folder where the function is located.</p></li>\n<li><p>I also tried to point it on the lib folder manually with no luck as I had to do it manually.</p></li>\n<li><p>I did see the function start and return ok successfully with no problem but nothing to show in the stackdriver debugger page </p></li>\n</ul>\n\n<p>The versions of functions and stackdriver are as follows</p>\n\n<pre><code>\"@google-cloud/debug-agent\": \"^3.0.0\",\n\n\"firebase-functions\": \"^2.0.5\",\n</code></pre>\n"}, {"tags": ["typescript", "angular5"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5673162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RARBREzIJbA/AAAAAAAAAAI/AAAAAAAAAKk/PSA27P-bkX4/photo.jpg?sz=128", "display_name": "Muhammad Usama", "link": "https://stackoverflow.com/users/5673162/muhammad-usama"}, "edited": false, "score": 0, "creation_date": 1540392109, "post_id": 52971530, "comment_id": 92849962, "body": "Ohhh Man you saved my day thank you so much. Can you also explain what is the difference and why this worked?"}, {"owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "reply_to_user": {"reputation": 5, "user_id": 5673162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RARBREzIJbA/AAAAAAAAAAI/AAAAAAAAAKk/PSA27P-bkX4/photo.jpg?sz=128", "display_name": "Muhammad Usama", "link": "https://stackoverflow.com/users/5673162/muhammad-usama"}, "edited": false, "score": 0, "creation_date": 1540392205, "post_id": 52971530, "comment_id": 92850038, "body": "as i explained above data is an array not a object."}], "tags": [], "owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "is_accepted": true, "score": 1, "last_activity_date": 1540391308, "creation_date": 1540391308, "answer_id": 52971530, "question_id": 52971510, "link": "https://stackoverflow.com/questions/52971510/logging-entire-response-on-console-show-the-data-but-when-i-try-to-get-the-indi/52971530#52971530", "title": "Logging entire response on console show the data. But when i try to get the individual property in typescript it gives undefined. Why?", "body": "<p>Your response is an <strong><code>array</code></strong>, you need to access by using an index or with loop, the following should work good.</p>\n\n<pre><code> console.log(data);\n console.log(data[0]['userName']);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5673162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RARBREzIJbA/AAAAAAAAAAI/AAAAAAAAAKk/PSA27P-bkX4/photo.jpg?sz=128", "display_name": "Muhammad Usama", "link": "https://stackoverflow.com/users/5673162/muhammad-usama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12, "favorite_count": 0, "accepted_answer_id": 52971530, "answer_count": 1, "score": 0, "last_activity_date": 1540391308, "creation_date": 1540391248, "question_id": 52971510, "link": "https://stackoverflow.com/questions/52971510/logging-entire-response-on-console-show-the-data-but-when-i-try-to-get-the-indi", "title": "Logging entire response on console show the data. But when i try to get the individual property in typescript it gives undefined. Why?", "body": "<p>I am getting some response while catching a socket.io event in angular. when i log the whole response on console its showing all properties but when i try to get individual property then it gives undefined. I am attaching a pic for reference.\nP.S: I am new in type Script.</p>\n\n<pre><code>this._chatService.onNewUserJoined()\n  .subscribe((data:any) =&gt; {\n    console.log(data);\n    console.log(data['userName']);\n    this.snackBar.open(`${data['userName']} Joined chat room!!!`, \"ok\", {\n      duration: 2000,\n    });\n  });\n</code></pre>\n\n<p>Thank you<a href=\"https://i.stack.imgur.com/8aVaC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "edited": false, "score": 0, "creation_date": 1540394890, "post_id": 52971359, "comment_id": 92851897, "body": "There&#39;s an old proposal related to this, still open: <a href=\"https://github.com/Microsoft/TypeScript/issues/8584\" rel=\"nofollow noreferrer\">add a flag to disable () =&gt; void being subtype of () =&gt; a</a>"}, {"owner": {"reputation": 2851, "user_id": 243089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c504339686fb2092eba997ee8899131?s=128&d=identicon&r=PG", "display_name": "Victor Zamanian", "link": "https://stackoverflow.com/users/243089/victor-zamanian"}, "reply_to_user": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "edited": false, "score": 0, "creation_date": 1540397722, "post_id": 52971359, "comment_id": 92853719, "body": "@artem interesting discussion!"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1540406323, "post_id": 52971359, "comment_id": 92858288, "body": "There&#39;s a <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-functions-returning-non-void-assignable-to-function-returning-void\" rel=\"nofollow noreferrer\">FAQ</a> for that.  Notice that overriding a function follows the same assignability rules as assigning a value to a variable."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1540406885, "post_id": 52971359, "comment_id": 92858555, "body": "If you really care, you can use the return type <code>undefined</code> instead of <code>void</code>.  They are similar (the caller will get an <code>undefined</code> value at runtime in either case) but possibly closer to your intent.  Of course an implementation of an <code>undefined</code>-returning function needs to explicitly <code>return undefined</code> instead of implicitly (with just <code>return</code> or leaving off <code>return</code>), so it&#39;s up to you."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1540406950, "post_id": 52971359, "comment_id": 92858584, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47019100/how-to-define-a-function-which-cannot-return-anything-in-typescript\">How to define a function which cannot return anything in TypeScript</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2851, "user_id": 243089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c504339686fb2092eba997ee8899131?s=128&d=identicon&r=PG", "display_name": "Victor Zamanian", "link": "https://stackoverflow.com/users/243089/victor-zamanian"}, "edited": false, "score": 0, "creation_date": 1540391915, "post_id": 52971720, "comment_id": 92849822, "body": "Oh I see. So do I understand it correctly that it isn&#39;t possible to restrict/detect implementing methods to not return a value because of this?"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 2851, "user_id": 243089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c504339686fb2092eba997ee8899131?s=128&d=identicon&r=PG", "display_name": "Victor Zamanian", "link": "https://stackoverflow.com/users/243089/victor-zamanian"}, "edited": false, "score": 1, "creation_date": 1540391952, "post_id": 52971720, "comment_id": 92849850, "body": "I guess, yes (not possible), just like if you&#39;d use <code>any</code>."}], "tags": [], "owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "is_accepted": true, "score": 1, "last_activity_date": 1540391815, "creation_date": 1540391815, "answer_id": 52971720, "question_id": 52971359, "link": "https://stackoverflow.com/questions/52971359/why-can-i-override-void-return-type-with-non-void-in-implementation-of-abstract/52971720#52971720", "title": "Why can I override void return type with non-void in implementation of abstract method (and not vice versa)?", "body": "<p>From the typescript spec: </p>\n\n<blockquote>\n  <p>The Void type is a subtype of the Any type</p>\n</blockquote>\n\n<p>So we can infer that <code>void</code> behaves much like <code>any</code>, since it is its subtype, i.e. you can redefine (narrow-down) <code>void</code> type to something more specific like <code>string</code>, just like <code>any</code>.</p>\n\n<p>P.S. There isn't much information on <code>void</code> in TS docs or spec.</p>\n\n<p><a href=\"https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#325-the-void-type\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#325-the-void-type</a></p>\n"}], "owner": {"reputation": 2851, "user_id": 243089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c504339686fb2092eba997ee8899131?s=128&d=identicon&r=PG", "display_name": "Victor Zamanian", "link": "https://stackoverflow.com/users/243089/victor-zamanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 52971720, "answer_count": 1, "score": 1, "last_activity_date": 1540406524, "creation_date": 1540390844, "question_id": 52971359, "link": "https://stackoverflow.com/questions/52971359/why-can-i-override-void-return-type-with-non-void-in-implementation-of-abstract", "title": "Why can I override void return type with non-void in implementation of abstract method (and not vice versa)?", "body": "<p>I'm wondering why the following TypeScript code compiles without error or warning (using tsc).</p>\n\n<pre><code>abstract class A {\n  abstract foo(): void;\n}\n\nclass B extends A {\n  foo(): number { // this is fine?\n    return 1;\n  }\n}\n</code></pre>\n\n<p>I am seemingly able to create an abstract class with an abstract method that has a void return type, but the implementing class can use a non-void return type and still count as implementing said abstract method.</p>\n\n<p>On the other hand, I am (correctly in my mind) <em>not</em> allowed to declare the abstract method with a non-void return type and use a void return type in the implementation (or any type that is different from the declaration).</p>\n\n<pre><code>abstract class A {\n  abstract foo(): string;\n}\n\nclass B extends A {\n  foo(): void {\n    console.log('does not compile');\n  }\n}\n</code></pre>\n\n<p>Why is it okay to override a void return type? Should it be? Is this a bug in the compiler or intended behavior?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["typescript", "automated-tests", "e2e-testing", "testcafe"], "answers": [{"tags": [], "owner": {"reputation": 4930, "user_id": 9994312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2LIza.png?s=128&g=1", "display_name": "Alex Kamaev", "link": "https://stackoverflow.com/users/9994312/alex-kamaev"}, "is_accepted": true, "score": 2, "last_activity_date": 1613036404, "last_edit_date": 1613036404, "creation_date": 1540454378, "answer_id": 52984215, "question_id": 52971078, "link": "https://stackoverflow.com/questions/52971078/testcafe-default-vs-named-classes/52984215#52984215", "title": "TestCafe Default vs Named Classes", "body": "<p>It is not required to use the <code>default</code> keyword for TestCafe. Moreover, it does not affect test passing or a browser's operation. It's just a way of exporting/importing a class from a module with one class. If you want to write your own <a href=\"https://devexpress.github.io/testcafe/documentation/guides/concepts/page-model.html\" rel=\"nofollow noreferrer\">page model</a>, you can use one module with two classes:</p>\n<p>Page models:</p>\n<pre><code>import { Selector } from 'testcafe';\n\nexport class PageModel1 {\n    constructor () {\n        this.h1  = Selector('h1');\n        this.div = Selector('div');\n    }\n}\n\nexport class PageModel2 {\n    constructor () {\n        this.body = Selector('body');\n        this.span = Selector('span');\n    }\n}\n</code></pre>\n<p>Test code:</p>\n<pre><code>import { PageModel1, PageModel2 } from './models';\n\nconst pm1 = new PageModel1();\nconst pm2 = new PageModel2();\n\ntest(`Recreate invisible element and click`, async t =&gt; {\n    await t.click(pm1.div);\n    await t.click(pm1.h1);\n\n    await t.click(pm2.body);\n    await t.click(pm2.span);\n});\n</code></pre>\n<p>\u00a0\nIt's just a question of organizing your code, so you can write it in the manner suitable for you.</p>\n"}], "owner": {"reputation": 526, "user_id": 983166, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e2192eff61b3dfeb88f65b08f5e33df6?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/983166/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 52984215, "answer_count": 1, "score": 2, "last_activity_date": 1613036404, "creation_date": 1540389964, "last_edit_date": 1541333594, "question_id": 52971078, "link": "https://stackoverflow.com/questions/52971078/testcafe-default-vs-named-classes", "title": "TestCafe Default vs Named Classes", "body": "<p>Looking over the Page Object model for TestCafe I noticed that all of the classes are flagged with <code>default</code> rather than typical named classes.</p>\n\n<p><a href=\"http://devexpress.github.io/testcafe/documentation/recipes/using-page-model.html\" rel=\"nofollow noreferrer\">http://devexpress.github.io/testcafe/documentation/recipes/using-page-model.html</a></p>\n\n<p>I'm wondering what the reason is behind this, does it somehow assist in the passing of test controller and queuing of browser actions?  </p>\n\n<blockquote>\n  <p>TestCafe allows you to avoid passing the test controller to the method explicitly. Instead, you can import t to the page model file. <a href=\"http://devexpress.github.io/testcafe/documentation/test-api/test-code-structure.html#test-controller\" rel=\"nofollow noreferrer\">link</a></p>\n</blockquote>\n\n<p>I would like to avoid using default classes as <a href=\"https://stackoverflow.com/questions/33305954/typescript-export-vs-default-export\">this article</a> suggests but I want to know what the trade-offs are specific to TestCafe.  Thank you.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ngrx", "ngrx-effects"], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 6679657, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/RHism.jpg?s=128&g=1", "display_name": "Shahrukh Shahid", "link": "https://stackoverflow.com/users/6679657/shahrukh-shahid"}, "edited": false, "score": 0, "creation_date": 1540466743, "post_id": 52971965, "comment_id": 92881337, "body": "I tried this. Now I am getting following error &quot;ERROR in Error during template compile of &#39;AppModule&#39;   Function calls are not supported in decorators but &#39;CustomEffectsModule&#39; was called.&quot;"}, {"owner": {"reputation": 11744, "user_id": 5914191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EqWhs.jpg?s=128&g=1", "display_name": "Teddy Sterne", "link": "https://stackoverflow.com/users/5914191/teddy-sterne"}, "reply_to_user": {"reputation": 325, "user_id": 6679657, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/RHism.jpg?s=128&g=1", "display_name": "Shahrukh Shahid", "link": "https://stackoverflow.com/users/6679657/shahrukh-shahid"}, "edited": false, "score": 0, "creation_date": 1540473655, "post_id": 52971965, "comment_id": 92885804, "body": "I put together a demo on <a href=\"https://stackblitz.com/edit/angular-t15jww\" rel=\"nofollow noreferrer\">Stackblitz</a> which seems to be working for me."}, {"owner": {"reputation": 325, "user_id": 6679657, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/RHism.jpg?s=128&g=1", "display_name": "Shahrukh Shahid", "link": "https://stackoverflow.com/users/6679657/shahrukh-shahid"}, "edited": false, "score": 0, "creation_date": 1540473984, "post_id": 52971965, "comment_id": 92886053, "body": "Have you tried building it using angular cli and webpack config? Because I get error while building the app using npm run build:ssr command"}], "tags": [], "owner": {"reputation": 11744, "user_id": 5914191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EqWhs.jpg?s=128&g=1", "display_name": "Teddy Sterne", "link": "https://stackoverflow.com/users/5914191/teddy-sterne"}, "is_accepted": false, "score": 0, "last_activity_date": 1540392531, "creation_date": 1540392531, "answer_id": 52971965, "question_id": 52971056, "link": "https://stackoverflow.com/questions/52971056/function-calls-are-not-supported-in-decorators-ngrx-effects-while-building-the-a/52971965#52971965", "title": "Function calls are not supported in decorators NgRx/Effects while building the App", "body": "<p>I would use the <code>forRoot</code> pattern in your case to construct the module you want to be imported. This should allow you to run custom code.</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n})\nexport class CustomEffectsModule {\n  static forRoot() {\n    const customEffects= this.copy(LoopbackEffects);\n    customEffects.push(GuardFailEffect)\n    return EffectsModule.forRoot(customEffects);\n  }\n\n  private static copy(o) {\n    let output = Array.isArray(o) ? [] : {};\n    for (let key in o) {\n      let v = o[key];\n      output[key] = typeof v === 'object' &amp;&amp; v !== null ? copy(v) : v;\n    }\n    return output;\n  }\n}\n</code></pre>\n\n<h3>App.module.ts</h3>\n\n<pre class=\"lang-js prettyprint-override\"><code>imports : [\n  CustomEffectsModule.forRoot()\n]\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 6679657, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/RHism.jpg?s=128&g=1", "display_name": "Shahrukh Shahid", "link": "https://stackoverflow.com/users/6679657/shahrukh-shahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540392531, "creation_date": 1540389919, "question_id": 52971056, "link": "https://stackoverflow.com/questions/52971056/function-calls-are-not-supported-in-decorators-ngrx-effects-while-building-the-a", "title": "Function calls are not supported in decorators NgRx/Effects while building the App", "body": "<p>I am using Loopback SDK generator to generate the NgRx store/effects module. I customized the library to support the major changes that were required.</p>\n\n<p><em>Then I wrote custom effect to listen to GuardNotFound action and redirect to 404 page but its not working while building the app.</em></p>\n\n<p>Here is my <strong>custom-effects.ts file</strong></p>\n\n<pre><code>@Injectable()\nexport class GuardFailEffect {\n  constructor(private action$: Actions, private router: Router) {\n  }\n  @Effect({ dispatch: false })\n  redirect$ = this.action$.pipe(\n    ofType('[Campaign] Guard Fail', '[LoopbackAuth] Auth Guard fail'),\n    tap(() =&gt; {\n      this.router.navigateByUrl('/404');\n    })\n  );\n}\n\nexport const CustomEffects= copy(LoopbackEffects); &lt;--- array of effects classes generated from SDK\nCustomEffects.push(GuardFailEffect); &lt;--- inserting my custom effect\n\n\n//function to deep copy the array of Classes aka objects\nexport function copy(o) {\n  let output, v, key;\n  output = Array.isArray(o) ? [] : {};\n  for (key in o) {\n    v = o[key];\n    output[key] = typeof v === 'object' &amp;&amp; v !== null ? copy(v) : v;\n  }\n  return output;\n}\n</code></pre>\n\n<p><strong>App.module.ts</strong></p>\n\n<pre><code>imports : [\nEffectsModule.forRoot(CustomEffects)\n]\n</code></pre>\n\n<p>While building the app i get this error </p>\n\n<pre><code>    ERROR in src\\app\\app.module.ts(89,27): Error during template compile of 'AppModule'\n  Function calls are not supported in decorators but 'copy' was called in 'CustomEffects'\n    'CustomEffects' calls 'copy'.\n</code></pre>\n\n<p><strong>=></strong> <strong><em>If I don't deep copy the array it gives me an error while using push function</em></strong></p>\n\n<pre><code>[ts]\nArgument of type 'typeof GuardFailEffect' is not assignable to parameter of type 'typeof LoopbackAuthEffects ... 5 more ... | typeof SubscriptionEffects'.\n  Type 'typeof GuardFailEffect' is not assignable to type 'typeof SubscriptionEffects'.\n    Types of parameters 'router' and 'subscription' are incompatible.\n      Type 'SubscriptionApi' is not assignable to type 'Router'.\n        Property 'rootComponentType' is missing in type 'SubscriptionApi'.\nclass GuardFailEffect\n</code></pre>\n\n<p>Can someone point me to the right direction?</p>\n"}, {"tags": ["angular", "typescript", "input", "runtime-error", "parent-child"], "comments": [{"owner": {"reputation": 617, "user_id": 9963032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vWnCr.jpg?s=128&g=1", "display_name": "yannick", "link": "https://stackoverflow.com/users/9963032/yannick"}, "edited": false, "score": 0, "creation_date": 1540389906, "post_id": 52971026, "comment_id": 92848357, "body": "And where do you try to access the length property where it is undefined?"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540389957, "post_id": 52971026, "comment_id": 92848394, "body": "in the child, but I got the length in the console, it printed 2 and a line after it printed this error. I&#39;ll add a screenshot"}, {"owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "edited": false, "score": 1, "creation_date": 1540390097, "post_id": 52971026, "comment_id": 92848502, "body": "at quiz-course component add ? before length like this quiz?.questions?.length in the html"}, {"owner": {"reputation": 4159, "user_id": 8277987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WyWE9.png?s=128&g=1", "display_name": "Daniel C.", "link": "https://stackoverflow.com/users/8277987/daniel-c"}, "edited": false, "score": 0, "creation_date": 1540390144, "post_id": 52971026, "comment_id": 92848532, "body": "Go to <code>IQuiz</code> class, assuming that <code>questions</code> is an array, check if it is initialized properly (example, questions = [])"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540390336, "post_id": 52971026, "comment_id": 92848654, "body": "questions is defined like that: questions: IQuestion[]; and I defined IQuestions too. I added the interfaces now"}, {"owner": {"reputation": 12486, "user_id": 5640649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab190da855988ffae29d287c7d55ebbe?s=128&d=identicon&r=PG", "display_name": "lealceldeiro", "link": "https://stackoverflow.com/users/5640649/lealceldeiro"}, "edited": false, "score": 0, "creation_date": 1540390356, "post_id": 52971026, "comment_id": 92848680, "body": "Show how you try to access it in the child component."}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1540390357, "post_id": 52971026, "comment_id": 92848681, "body": "<code>and I get this error</code> &lt;= show the code where the error is occurring."}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540390412, "post_id": 52971026, "comment_id": 92848725, "body": "it say that in the line when I print the value but It is printing the value"}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 1, "creation_date": 1540390538, "post_id": 52971026, "comment_id": 92848818, "body": "No, the stack trace states it occurs in method <code>restartQuiz</code>. Show that code."}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540390970, "post_id": 52971026, "comment_id": 92849142, "body": "I added it. I&#39;m doing the same thing and try to access the length of the questions array, but also I get the length in the console from console.log"}, {"owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "edited": false, "score": 0, "creation_date": 1540391313, "post_id": 52971026, "comment_id": 92849406, "body": "you have to init your quiz variable in the parent component"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540391484, "post_id": 52971026, "comment_id": 92849534, "body": "I know that I have values in the parent component because I tried to print it and I got value, and also I get the value in the child when I print with console.log, so it&#39;s weird that I get this error when I get the data with console.log"}, {"owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "edited": false, "score": 0, "creation_date": 1540391662, "post_id": 52971026, "comment_id": 92849647, "body": "do you get currentUnitQuiz from an observable subscription?"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540391802, "post_id": 52971026, "comment_id": 92849743, "body": "yes and I see the data I get in the parent component. There&#39;s a lot of irrelevant code there but I&#39;ll edit the question and add the relevant code from parent ts"}, {"owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "edited": false, "score": 0, "creation_date": 1540391936, "post_id": 52971026, "comment_id": 92849835, "body": "delete subscribe block and use Async pipe to avoid undefined case &lt;quiz-course [quiz]=&quot;currentUnitQuizObservable | async&quot;&gt;&lt;/quiz-course&gt;"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540392630, "post_id": 52971026, "comment_id": 92850345, "body": "didn&#39;t work, now I get this error: Error: InvalidPipeArgument: &#39;[object Object]&#39; for pipe &#39;AsyncPipe&#39;"}, {"owner": {"reputation": 387, "user_id": 6905597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61d160f7448c27be3641e21e2736fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin McCann", "link": "https://stackoverflow.com/users/6905597/kevin-mccann"}, "edited": false, "score": 0, "creation_date": 1562304282, "post_id": 52971026, "comment_id": 100339638, "body": "Any particular reason the quiz is type IQuiz, and not type Quiz that implements the interface?"}], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540397815, "post_id": 52972723, "comment_id": 92853769, "body": "it doesn&#39;t work unfortunately. I need to call restartQuiz when the component start it&#39;s life so I need to change that too and call it in ngOnChanges? what about the html file that contains the data from @Input?"}, {"owner": {"reputation": 83, "user_id": 5115563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jlI2XMnQ_ps/AAAAAAAAAAI/AAAAAAAAABM/BquX7TU7duo/photo.jpg?sz=128", "display_name": "reddevilzee", "link": "https://stackoverflow.com/users/5115563/reddevilzee"}, "reply_to_user": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "edited": false, "score": 0, "creation_date": 1540398544, "post_id": 52972723, "comment_id": 92854178, "body": "You mentioned you need to call restartQuiz() in oninit(). That  doesnt change. Do not call restartQuiz() in onchanges. but intialize your quiz input variable in onchanges().   simply to put, Since its a child component, onchanges will make sure the input varibale will have the latest value once the child is loaded.  edited the answer to avoid misunderstandings."}], "tags": [], "owner": {"reputation": 83, "user_id": 5115563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jlI2XMnQ_ps/AAAAAAAAAAI/AAAAAAAAABM/BquX7TU7duo/photo.jpg?sz=128", "display_name": "reddevilzee", "link": "https://stackoverflow.com/users/5115563/reddevilzee"}, "is_accepted": false, "score": 1, "last_activity_date": 1540398593, "last_edit_date": 1540398593, "creation_date": 1540394687, "answer_id": 52972723, "question_id": 52971026, "link": "https://stackoverflow.com/questions/52971026/angular-6-cannot-read-property-length-of-undefined/52972723#52972723", "title": "Angular 6: Cannot read property &#39;length&#39; of undefined", "body": "<p>this is an input to the child and so my best bet to avoid these undefined issue, use onchanges lifehook.</p>\n\n<pre><code> import { OnChanges, SimpleChanges } from '@angular/core';\n\nexport class CourseQuizComponent implements OnInit, OnChanges {\n  ngOnChanges(changes: SimpleChanges) {\n   for (const prop of Object.keys(changes)) {\n    const chng = changes[prop];\n    if (prop === 'quiz') {\n      this.quiz = chng.currentValue;\n      // use this quiz variable in the restartQuiz() \n    }\n  }\n }\n ngOnInit() {\n   this.restartQuiz();\n  }\n}\n</code></pre>\n\n<p>try this and let me know if this works.</p>\n"}], "owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3005, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540398593, "creation_date": 1540389824, "last_edit_date": 1540392230, "question_id": 52971026, "link": "https://stackoverflow.com/questions/52971026/angular-6-cannot-read-property-length-of-undefined", "title": "Angular 6: Cannot read property &#39;length&#39; of undefined", "body": "<p>I have a really strange problem. I'm sending data from parent to child component with @Input, and I get this error but when I tried to print the value in ngOnInit, I got the correct value and not undefined.\nThe data in the parent is defined and I get the value in the console when I print the data in the parent and child component and I still get that error (even if I access the data)</p>\n\n<p><strong>this is the screenshot of the error and the value I get from console.log</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/lqlR5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lqlR5.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/HQZNI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HQZNI.png\" alt=\"enter image description here\"></a></p>\n\n<p>relevant parent html:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;quiz-course [quiz]=\"currentUnitQuiz\"&gt;&lt;/quiz-course&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>parent ts:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export class CoursePlayComponent implements OnInit {\r\n  errorMessage: string;\r\n  course: ICourse;\r\n  courseId: number;\r\n\r\n  // the current and prev quiz of this and prev unit (if there are)\r\n  public currentUnitQuiz: IQuiz;\r\n  public showQuiz: boolean;\r\n  \r\n  // .. more properties\r\n\r\n\r\n  constructor(private courseService: CourseService,\r\n      private route: ActivatedRoute,\r\n      private router: Router,\r\n      private userProgressService: UserProgressService) { }\r\n\r\n  ngOnInit() {\r\n      // save this course id from course-detail and get http request from the service\r\n      this.courseId = JSON.parse(localStorage.getItem(\"courseId\"));\r\n      this.getCourse(this.courseId);\r\n    }\r\n    \r\n  // Get course detail by id\r\n  getCourse(id: number) {\r\n      this.courseService.getCourse(id).subscribe(\r\n          course =&gt; {\r\n            this.course = course;\r\n            \r\n            // .. more code\r\n\r\n            if (this.route.snapshot.firstChild.data.type == 'quiz') {\r\n              this.getQuiz(this.currentUnitPos);\r\n            }\r\n          },\r\n          error  =&gt; this.errorMessage = &lt;any&gt;error);\r\n      }\r\n      \r\n      getQuiz(currentUnitPosition: number) {\r\n      // .. more code\r\n        this.showQuiz = true;\r\n        this.currentUnitQuiz = this.course.units.find(u =&gt; u.position ===\r\n        currentUnitPosition).quiz;\r\n      }\r\n }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>EDIT: added more code so it'll be clear. I get the same error when I try to access the length, but I also can print and get a number so I don't know what's the problem.</p>\n\n<p>child ts:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export class CourseQuizComponent implements OnInit {\r\n\r\n  @Input() quiz: IQuiz;\r\n  \r\n  // 1 = show the first page. 2 = show questions page. 0 = show neither\r\n  public currentQuestion: IQuestion;\r\n  public currentIndex: number;\r\n  public currentUnit: number;\r\n  public userAnswers: number[] = [];\r\n  public correctAnswers: number;\r\n\r\n  constructor(private courseService: CourseService,\r\n      private route: ActivatedRoute,\r\n      private router: Router,\r\n      private fb: FormBuilder) { }\r\n\r\n  ngOnInit() {\r\n    console.log(\"length in child: \", this.quiz.questions.length); // **NOT** undefined\r\n    this.restartQuiz();\r\n  }\r\n  \r\n    restartQuiz() {\r\n    this.currentUnit = +this.route.snapshot.paramMap.get('unitId');\r\n    this.correctAnswers = 0;\r\n\r\n    for(let i = 0; i &lt; this.quiz.questions.length; i++) {\r\n      this.userAnswers[i] = 0;\r\n    }\r\n\r\n    this.getCurrentQuestion(0);\r\n  }\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>interfaces:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export interface IQuiz {\r\n  id: number;\r\n  name: number;\r\n  unit_id: number;\r\n  unit_position: number;\r\n  questions: IQuestion[];\r\n}\r\n\r\nexport interface IQuestion {\r\n  id: number;\r\n  name: string;\r\n  quiz_id: number;\r\n  position: number;\r\n  question: string;\r\n  answer1: string;\r\n  answer2: string;\r\n  answer3: string;\r\n  answer4: string;\r\n  correct: number;\r\n  selected: number;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "angular", "typescript", "http", "rxjs"], "comments": [{"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "edited": false, "score": 1, "creation_date": 1540389837, "post_id": 52970863, "comment_id": 92848308, "body": "you should probably use  the <code>merge</code> operator instead of using the <code>forkJoin</code>. That will generate an event for every request that completes and you can handle them one by one instead of all at once."}, {"owner": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "edited": false, "score": 0, "creation_date": 1540390268, "post_id": 52970863, "comment_id": 92848614, "body": "Have a look at <code>concatMap</code>"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "edited": false, "score": 0, "creation_date": 1540391714, "post_id": 52970863, "comment_id": 92849680, "body": "mergeMap is more useful to flatten some inner observables. In your case however it sounds like you start directly with a list of observables and you want to treat their responses individually. That means 10 initial requests made then 10 responses whenever they end. If you want to have 1 request - 1 response, 1 request - 1 response you can use concatMap as @martin suggested."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540391684, "post_id": 52971488, "comment_id": 92849659, "body": "Thanks a lot! This is example is very helpfull"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540391929, "post_id": 52971488, "comment_id": 92849827, "body": "I&#39;m glad it is. Let me know if you want one for concatMap or mergeMap as well."}, {"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540404115, "post_id": 52971488, "comment_id": 92857154, "body": "It actually works! It displays the cards, one after the other ! Thanks ^^"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 1, "creation_date": 1540406003, "post_id": 52971488, "comment_id": 92858151, "body": "keep in mind that the order is the one the responses come in, you&#39;ll have to do the ordering yourself if you need a specific order."}, {"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540470955, "post_id": 52971488, "comment_id": 92883993, "body": "Can i ask you a question about how to refresh array dynamicly ?"}, {"owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "reply_to_user": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540471697, "post_id": 52971488, "comment_id": 92884478, "body": "@ims16 in a separate question yes. :) I won&#39;t get to it for about 3-4 hours, maybe someone else will be able to help you until then."}, {"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540471774, "post_id": 52971488, "comment_id": 92884533, "body": "Here is the new question if you can help :)  <a href=\"https://stackoverflow.com/questions/52988318/update-on-datachange-on-angular-6\" title=\"update on datachange on angular 6\">stackoverflow.com/questions/52988318/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25995, "user_id": 5152732, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eL0xfQom3xQ/AAAAAAAAAAI/AAAAAAAAB1E/j1B2Mcgvt6M/photo.jpg?sz=128", "display_name": "toskv", "link": "https://stackoverflow.com/users/5152732/toskv"}, "is_accepted": true, "score": 2, "last_activity_date": 1540391180, "creation_date": 1540391180, "answer_id": 52971488, "question_id": 52970863, "link": "https://stackoverflow.com/questions/52970863/handling-http-response-one-by-one-in-angular-6/52971488#52971488", "title": "Handling http response one by one in Angular 6", "body": "<p>A solution would be to change the <code>forkJoin</code> to <code>merge</code> so that instead of getting one event when all the requests are done you get an event after each one of them finishes.</p>\n\n<p>If you'd have for example this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>waitForAll() {\n  this.values = [];\n  this.loadAllAtOnce([100, 200, 300, 400, 3000])\n    .subscribe(values =&gt; {\n      this.values = values;\n    });\n}\n\nloadAllAtOnce(values: number[]) {\n  return forkJoin(\n    values.map(x =&gt; of (x).pipe(delay(x)))\n  ).pipe(\n    tap(values =&gt; {\n      console.log(values);\n\n    })\n  );\n}\n</code></pre>\n\n\n\n<p>It could be rewritten to this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>asTheyCome() {\n  this.values = [];\n  this.loadAsSoonAsAvailable([100, 200, 300, 400, 3000])\n    .subscribe(value =&gt; {\n      this.values.push(value);\n    });\n}\n\nloadAsSoonAsAvailable(values: number[]) {\n  return merge(\n    ...values.map(x =&gt; of (x).pipe(delay(x)))\n  ).pipe(\n    tap(value =&gt; console.log(value))\n  );\n}\n</code></pre>\n\n\n\n<p>You can find a working example <a href=\"https://stackblitz.com/edit/angular-forkjoin-vs-merge\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 52971488, "answer_count": 1, "score": 1, "last_activity_date": 1540391180, "creation_date": 1540389380, "question_id": 52970863, "link": "https://stackoverflow.com/questions/52970863/handling-http-response-one-by-one-in-angular-6", "title": "Handling http response one by one in Angular 6", "body": "<p>Actually i have 15 http requests which are send to the API. \nAll i want to do is to handle responses one by one whithout waiting the end of all the requests (I have a request which can take some minutes to send result).</p>\n\n<p>Service side : </p>\n\n<pre><code>    findOneByOne(): Observable&lt;any&gt; {\n    const calls = this.getCardsPath().map(el =&gt; this.getPromises(el));\n    return Observable.forkJoin(calls)\n        .map(res =&gt; {\n            const tab = [];\n            for (let i = 0; i &lt; res.length; i++) {\n                tab.push(this.checkInfoService(res[i].json()));\n            }\n            return tab;\n        });\n}\n\n\ngetPromises(str: String): Promise&lt;any&gt; {\n    return this.requester.obtain({\n        restUrl: \"/administration/\" + str,\n        method: RequestMethod.Get\n    })\n        .toPromise()\n        .then(res =&gt; res)\n        .catch(err =&gt; err);\n}\n</code></pre>\n\n<p>Component side :</p>\n\n<pre><code>    displayDashboardInfoService() {\n    if (this.featuresFlag.getCurrentVersion() !== \"1.08\" &amp;&amp; this.featuresFlag.getCurrentVersion() !== \"-1\") {\n        this.busy = this.dashboardInfoService.findAll()\n            .then((res: DashboardInfo[]) =&gt; this.findPaths(res))\n            .then((res: DashboardInfo[]) =&gt; this.loadItems(res))\n            .catch((err: any) =&gt; {\n                if (environment.debugLevel &gt;= 3) console.error(err);\n            });\n    }\n    else {\n\n        this.dashboardInfoService.findOneByOne()\n            .subscribe((res) =&gt; {\n                const tab = [];\n                for (let i = 0; i &lt; res.length; i++) {\n                    tab.push(res[i][0]);\n                }\n                this.findPaths(tab);\n                this.loadItems(tab);\n            });\n    }\n\n}\n</code></pre>\n\n<p>Thanks :)</p>\n"}, {"tags": ["javascript", "angular", "typescript", "parameters"], "comments": [{"owner": {"reputation": 83, "user_id": 5115563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jlI2XMnQ_ps/AAAAAAAAAAI/AAAAAAAAABM/BquX7TU7duo/photo.jpg?sz=128", "display_name": "reddevilzee", "link": "https://stackoverflow.com/users/5115563/reddevilzee"}, "edited": false, "score": 0, "creation_date": 1540397556, "post_id": 52970702, "comment_id": 92853630, "body": "i see you have mentioned in your input and output in HeroDetailComponent but i dont see them in your html  &lt;div *ngIf=&quot;openDetail == true&quot;&gt;    &lt;app-hero-detail&gt;&lt;/app-hero-detail&gt; &lt;/div&gt;.. Is that correct??"}, {"owner": {"reputation": 5228, "user_id": 1540456, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b1ea91368341177cdd2172e3fb714253?s=128&d=identicon&r=PG", "display_name": "Atlas91", "link": "https://stackoverflow.com/users/1540456/atlas91"}, "reply_to_user": {"reputation": 83, "user_id": 5115563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jlI2XMnQ_ps/AAAAAAAAAAI/AAAAAAAAABM/BquX7TU7duo/photo.jpg?sz=128", "display_name": "reddevilzee", "link": "https://stackoverflow.com/users/5115563/reddevilzee"}, "edited": false, "score": 0, "creation_date": 1540454776, "post_id": 52970702, "comment_id": 92874311, "body": "yes, that&#39;s what i wrote"}], "owner": {"reputation": 5228, "user_id": 1540456, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b1ea91368341177cdd2172e3fb714253?s=128&d=identicon&r=PG", "display_name": "Atlas91", "link": "https://stackoverflow.com/users/1540456/atlas91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540389599, "creation_date": 1540388923, "last_edit_date": 1540389599, "question_id": 52970702, "link": "https://stackoverflow.com/questions/52970702/table-details-with-angular-and-multiple-components", "title": "Table details with angular and multiple components", "body": "<p>I've got a table. Once I click on a row, I load some more details about that row. Also, <code>on-click</code> the table disappears and instead a new div appears with the details. I made it correctly using one component but now I want to separate everything in more components. One for the table and one for the details. I <em>don't</em> want to call the service again <code>on click</code>, so i can just pass the params i need from a component to another on click. This is what I tried so far:</p>\n\n<p>The table:</p>\n\n<pre><code>&lt;table *ngIf=\"loading == false &amp;&amp; openDetail == false\"&gt;\n        &lt;thead&gt;\n          &lt;th&gt;\n            Name\n          &lt;/th&gt;\n          &lt;th&gt;\n            Birth Year\n          &lt;/th&gt;\n          &lt;th&gt;\n            Actions\n          &lt;/th&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          &lt;tr *ngFor=\"let item of list let i = index\" [attr.data-index]=\"i\" (openHeroDetailFromAbout) = \"openDetailsFunction($event)\"&gt;\n          &lt;!-- &lt;tr *ngFor=\"let item of list let i = index\" [attr.data-index]=\"i\" (click) = \"openHeroDetail(item)\"&gt; --&gt;\n            &lt;td&gt;\n              &lt;mat-form-field class=\"example-full-width\" *ngIf=\"item.edit == true\"&gt;\n                &lt;input matInput placeholder=\"Name\" [(ngModel)]=\"item.name\"&gt;\n              &lt;/mat-form-field&gt;\n              &lt;span *ngIf=\"item.edit == false || item.edit == undefined\"&gt;\n                  {{item.name}}\n              &lt;/span&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n              &lt;mat-form-field class=\"example-full-width\" *ngIf=\"item.edit == true\"&gt;\n                &lt;input matInput placeholder=\"Year\" [(ngModel)]=\"item.birth_year\"&gt;\n              &lt;/mat-form-field&gt;\n              &lt;span *ngIf=\"item.edit == false || item.edit == undefined\"&gt;\n                  {{item.birth_year}}\n              &lt;/span&gt;\n            &lt;/td&gt;\n            &lt;td style=\"width: 160px\"&gt;\n              &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-6\"&gt;\n                    &lt;button type=\"button\" class=\"mdc-icon-button material-icons\" click-stop-propagation (click) = \"confirmHero(item, $event)\" *ngIf=\"item.edit == true\"&gt;\n                        &lt;mat-icon&gt;check&lt;/mat-icon&gt;\n                    &lt;/button&gt;\n                    &lt;button type=\"button\" class=\"mdc-icon-button material-icons\" click-stop-propagation (click) = \"editHero(item, $event)\" *ngIf=\"item.edit == false || item.edit == undefined\"&gt;\n                        &lt;mat-icon&gt;edit&lt;/mat-icon&gt;\n                    &lt;/button&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-6\"&gt;\n                    &lt;button type=\"button\" class=\"mdc-icon-button material-icons\" click-stop-propagation (click) = \"deleteHero(i, item, $event)\"&gt;\n                        &lt;mat-icon&gt;delete&lt;/mat-icon&gt;\n                    &lt;/button&gt;\n                  &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt; \n</code></pre>\n\n<p>and then below the table</p>\n\n<pre><code>&lt;div *ngIf=\"openDetail == true\"&gt;\n   &lt;app-hero-detail&gt;&lt;/app-hero-detail&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The first component with <code>openHeroDetailFromAbout</code> is called <code>TableComponent</code> and in there i have this:</p>\n\n<pre><code>openHeroDetailFromAbout(item: any): void {\n    item.openDetail = true;\n    console.log(item);\n  }\n</code></pre>\n\n<p>the second component is called <code>HeroDetailComponent</code> :</p>\n\n<pre><code> import { Component, OnInit, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-hero-detail',\n  templateUrl: './hero-detail.component.html',\n  styleUrls: ['./hero-detail.component.scss']\n})\nexport class HeroDetailComponent implements OnInit {\n  @Input() heroName: string; // hero's name\n\n  @Output() openDetails = new EventEmitter&lt;any&gt;();\n\n  constructor() { }\n\n  ngOnInit() {\n\n  }\n\n  openDetailsFunction(item: any): void {\n    this.openDetails.emit(item);\n    this.heroName = item.name;\n    console.log(item);\n  }\n\n}\n</code></pre>\n\n<p>But nothing fires on click on the row. I just pass <code>item</code> object from component to the other and in the detail component show that information. Also the <code>console.log()</code> not work</p>\n"}, {"tags": ["html", "angular", "typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9992370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557ea8dc7c078262c7ded556fd57c68?s=128&d=identicon&r=PG&f=1", "display_name": "rannes", "link": "https://stackoverflow.com/users/9992370/rannes"}, "edited": false, "score": 0, "creation_date": 1540388002, "post_id": 52970267, "comment_id": 92846944, "body": "no actually  after clicking on remove_circle button this edit and save buttons should display in same page but not in table after completion of table."}, {"owner": {"reputation": 617, "user_id": 9963032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vWnCr.jpg?s=128&g=1", "display_name": "yannick", "link": "https://stackoverflow.com/users/9963032/yannick"}, "reply_to_user": {"reputation": 99, "user_id": 9992370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557ea8dc7c078262c7ded556fd57c68?s=128&d=identicon&r=PG&f=1", "display_name": "rannes", "link": "https://stackoverflow.com/users/9992370/rannes"}, "edited": false, "score": 1, "creation_date": 1540388312, "post_id": 52970267, "comment_id": 92847166, "body": "ah I think I see what you want. Check my Edit in my Answer."}], "tags": [], "owner": {"reputation": 617, "user_id": 9963032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vWnCr.jpg?s=128&g=1", "display_name": "yannick", "link": "https://stackoverflow.com/users/9963032/yannick"}, "is_accepted": true, "score": 1, "last_activity_date": 1540388285, "last_edit_date": 1540388285, "creation_date": 1540387718, "answer_id": 52970267, "question_id": 52970152, "link": "https://stackoverflow.com/questions/52970152/i-have-a-table-which-are-having-maticon-buttons-after-clicking-on-button-it-shou/52970267#52970267", "title": "i have a table which are having maticon buttons after clicking on button it should display 2 buttons at end of the table", "body": "<p>You can use your already implemented <strong>data.isClicked</strong> property to handle the visibility of the other buttons. If they should only be visible, if the first button is clicked just do it like this:</p>\n\n<pre><code>&lt;tr*ngFor=\"let data of database \"&gt;\n  &lt;td&gt;{{data.name}}&lt;/td&gt;\n  &lt;td&gt;{{data.id}}&lt;/td&gt;\n  &lt;td&gt;\n    &lt;button mat-icon-button color=\"primary\" (click)=\"data.isClicked = !data.isClicked\"  [ngClass]=\"{'myClass': data.isClicked}\"&gt;\n      &lt;mat-icon&gt;remove_circle&lt;/mat-icon&gt;\n    &lt;/button&gt;\n  &lt;/td&gt;\n  &lt;td *ngIf=\"data.isClicked\"&gt;\n   &lt;button&gt;Edit&lt;button&gt;\n   &lt;button&gt;Save&lt;button&gt;\n  &lt;/td&gt;\n&lt;tr&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT After clarification:</strong></p>\n\n<p>Just combine your actions in a Click Mehtod then:</p>\n\n<p>Your HTML File:</p>\n\n<pre><code>&lt;tr*ngFor=\"let data of database \"&gt;\n  &lt;td&gt;{{data.name}}&lt;/td&gt;\n  &lt;td&gt;{{data.id}}&lt;/td&gt;\n  &lt;td&gt;\n    &lt;button mat-icon-button color=\"primary\" (click)=\"clickEvent(data)\"  [ngClass]=\"{'myClass': data.isClicked}\"&gt;\n      &lt;mat-icon&gt;remove_circle&lt;/mat-icon&gt;\n    &lt;/button&gt;\n  &lt;/td&gt;\n&lt;tr&gt;\n\n&lt;div*ngIf=\"showButtons\"&gt;\n   &lt;button&gt;Edit&lt;button&gt;\n   &lt;button&gt;Save&lt;button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And your .ts File:</p>\n\n<pre><code>showButtons: boolean = false;\nclickEvent(data){\n  data.isClicked = !data.isClicked;\n  this.showButtons = !this.showButtons;\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 9992370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557ea8dc7c078262c7ded556fd57c68?s=128&d=identicon&r=PG&f=1", "display_name": "rannes", "link": "https://stackoverflow.com/users/9992370/rannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52970267, "answer_count": 1, "score": -1, "last_activity_date": 1540388285, "creation_date": 1540387397, "question_id": 52970152, "link": "https://stackoverflow.com/questions/52970152/i-have-a-table-which-are-having-maticon-buttons-after-clicking-on-button-it-shou", "title": "i have a table which are having maticon buttons after clicking on button it should display 2 buttons at end of the table", "body": "<p>i have a table which are having mat-icon-buttons after clicking on button it should display 2 buttons at end of the table.\n  if i click on button it chaining color  from primary to red color and now i want to 2 buttons for this button i mean after clicking button at the end after complication of table it should display buttons ( edit and save). i would like know how add that 2 buttons end of the table when we clicked mat-icon-button. \nplease help me in these.\nThanks.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;tr*ngFor=\"let data of database \"&gt;\r\n&lt;td&gt;{{data.name}}&lt;/td&gt;\r\n&lt;td&gt;{{data.id}}&lt;/td&gt;\r\n&lt;td&gt;\r\n  &lt;button mat-icon-button color=\"primary\" (click)=\"data.isClicked = !data.isClicked\"  [ngClass]=\"{'myClass': data.isClicked}\"&gt;\r\n &lt;mat-icon&gt;remove_circle&lt;/mat-icon&gt;\r\n    &lt;/button&gt;\r\n  &lt;/td&gt;\r\n  &lt;tr&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["angular", "typescript", "angular-ui-router"], "comments": [{"owner": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 1, "creation_date": 1540387436, "post_id": 52970104, "comment_id": 92846558, "body": "Did you add the <code>RouterModule.forRoot</code> to the module containing the component?"}, {"owner": {"reputation": 772, "user_id": 8708710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440c96fe2dc212e8d498d0166799e951?s=128&d=identicon&r=PG", "display_name": "Lakindu Akash", "link": "https://stackoverflow.com/users/8708710/lakindu-akash"}, "reply_to_user": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 1, "creation_date": 1540387564, "post_id": 52970104, "comment_id": 92846642, "body": "@callback yes, in my lazy loaded module I have added RouterModule.forChild(). Every path  I mentioned are in that module."}, {"owner": {"reputation": 720, "user_id": 5333195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CnaPW.jpg?s=128&g=1", "display_name": "hevans900", "link": "https://stackoverflow.com/users/5333195/hevans900"}, "edited": false, "score": 1, "creation_date": 1540388880, "post_id": 52970104, "comment_id": 92847567, "body": "I find the Chrome/Firefox extension <a href=\"https://augury.rangle.io/\" rel=\"nofollow noreferrer\">Augury</a> works wonders when facing router woes"}], "owner": {"reputation": 772, "user_id": 8708710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440c96fe2dc212e8d498d0166799e951?s=128&d=identicon&r=PG", "display_name": "Lakindu Akash", "link": "https://stackoverflow.com/users/8708710/lakindu-akash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1540387256, "creation_date": 1540387256, "question_id": 52970104, "link": "https://stackoverflow.com/questions/52970104/angular-wont-find-named-router-outlet", "title": "Angular won&#39;t find named router outlet", "body": "<p>I have two router outlets in my application. One is the primary router outlet and other router outlet is in component template which is loaded with lazy loaded module. Name of the router outlet is <code>pr</code> and I have defined path for that route inside the lazy loaded module like this </p>\n\n<p><code>{outlet:'pr',path: 'students', component: StudentTableComponent, canActivate: [AuthGuard]}</code></p>\n\n<p>Inside the component I have router link with this.</p>\n\n<pre><code>&lt;button mat-button mat-stroked-button \n[routerLink]=\"[{ outlets: { pr:'students'} }]\"&gt;View Students\n &lt;/button&gt;\n</code></pre>\n\n<p>In the same component I have put the <code>&lt;router-outlet name=\"pr\"&gt;&lt;/router-outlet&gt;</code>. After clicking the link app is correctly navigated showing <code>project/132/(pr:students)</code>. No errors appears ,although not showing the component. If I put the router outlet in the main component which have primary outlet it loads. Ex: </p>\n\n<pre><code>&lt;router-outlet&gt;&lt;/router-outlet&gt;\n\n&lt;router-outlet name=\"pr\"&gt;&lt;/router-outlet&gt;\n</code></pre>\n\n<p>But after moving outlet elsewhere Angular won't identify the outlet</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 4282, "user_id": 578808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fdMGa.png?s=128&g=1", "display_name": "eestein", "link": "https://stackoverflow.com/users/578808/eestein"}, "edited": false, "score": 0, "creation_date": 1540983900, "post_id": 53074349, "comment_id": 93060663, "body": "Yes, I noticed once I ran the code using node it&#39;d work. Only through my angular app it was not working. Thank you for your help. I&#39;ll be making the necessary changes."}], "tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": true, "score": 4, "last_activity_date": 1540942779, "creation_date": 1540942779, "answer_id": 53074349, "question_id": 52969177, "link": "https://stackoverflow.com/questions/52969177/typescript-createprogram-throwing-ts-sys-is-undefined/53074349#53074349", "title": "TypeScript createProgram throwing &#39;ts.sys is undefined&#39;", "body": "<p>The TypeScript compiler library requires a compiler host to implement operations such as reading and writing files.  If you don't pass a compiler host to <code>createProgram</code>, then the library tries to create a default host automatically based on the lower-level <code>ts.sys</code> object.  <code>ts.sys</code> in turn is only automatically generated in Node.js-like environments.  So to use the TypeScript compiler library in a non-Node.js environment, you'll need to either pass your own compiler host to <code>createProgram</code> (don't worry, you only need to implement the methods you actually use) or create <code>ts.sys</code> yourself (though that is <a href=\"https://github.com/Microsoft/TypeScript/issues/5924#issuecomment-162108399\" rel=\"nofollow noreferrer\">less recommended</a>).</p>\n\n<p>Feel free to file a TypeScript issue about the poor error message if there isn't already one.</p>\n"}], "owner": {"reputation": 4282, "user_id": 578808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fdMGa.png?s=128&g=1", "display_name": "eestein", "link": "https://stackoverflow.com/users/578808/eestein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 53074349, "answer_count": 1, "score": 1, "last_activity_date": 1540942779, "creation_date": 1540384610, "question_id": 52969177, "link": "https://stackoverflow.com/questions/52969177/typescript-createprogram-throwing-ts-sys-is-undefined", "title": "TypeScript createProgram throwing &#39;ts.sys is undefined&#39;", "body": "<p>I'm trying to use <code>createProgram</code>, but I'm getting <code>ts.sys is undefined</code> for this code:</p>\n\n<pre><code>try {\n    createProgram(Utils.getFileNames(), {\n        lib: ['lib.es6.d.ts']\n        // target: ScriptTarget.ES5,\n        // module: ModuleKind.CommonJS\n    });\n} catch (ex) {\n    debugger;\n}\n</code></pre>\n\n<p>I've tried both ways, with the commented part and with the lib option.\nThis is the stack trace:</p>\n\n<pre><code>createCompilerHost@http://localhost:4200/vendor.js:203082:13\ncreateProgram@http://localhost:4200/vendor.js:203374:24\n./src/app/docs/generator.ts/Generator.generate@http://localhost:4200/main.js:1855:13\nGettingStartedComponent@http://localhost:4200/main.js:3352:9\ncreateClass@http://localhost:4200/vendor.js:42397:20\ncreateDirectiveInstance@http://localhost:4200/vendor.js:42284:20\ncreateViewNodes@http://localhost:4200/vendor.js:43504:36\ncreateRootView@http://localhost:4200/vendor.js:43418:5\ncallWithDebugContext@http://localhost:4200/vendor.js:44449:22\ndebugCreateRootView@http://localhost:4200/vendor.js:43936:12\n./node_modules/@angular/core/fesm5/core.js/&lt;/ComponentFactory_.prototype.create@http://localhost:4200/vendor.js:41764:20\n./node_modules/@angular/core/fesm5/core.js/&lt;/ComponentFactoryBoundToModule.prototype.create@http://localhost:4200/vendor.js:36416:16\n./node_modules/@angular/core/fesm5/core.js/&lt;/ViewContainerRef_.prototype.createComponent@http://localhost:4200/vendor.js:41874:28\n</code></pre>\n\n<p>Important bits:</p>\n\n<pre><code>createCompilerHost@http://localhost:4200/vendor.js:203082:13\ncreateProgram@http://localhost:4200/vendor.js:203374:24\n</code></pre>\n\n<p>I'm using this example from TS' wiki page: <a href=\"https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#using-the-type-checker\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#using-the-type-checker</a></p>\n\n<p>I tried searching about the issue, but could not find anything useful. Is there a package I'm missing, some configuration? I can't figure it out.</p>\n\n<p>I appreciate any help...</p>\n\n<p>My imports:</p>\n\n<pre><code>import {\n    Node,\n    createProgram,\n    forEachChild,\n    isClassDeclaration,\n    isModuleDeclaration,\n    TypeChecker,\n    ScriptTarget,\n    ModuleKind\n} from 'typescript';\n</code></pre>\n"}, {"tags": ["typescript", "dependency-injection", "domain-driven-design", "nestjs", "clean-architecture"], "comments": [{"owner": {"reputation": 4346, "user_id": 1016228, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/66f589227a200c1f1465682ab8650254?s=128&d=identicon&r=PG", "display_name": "RollerCosta", "link": "https://stackoverflow.com/users/1016228/rollercosta"}, "edited": false, "score": 0, "creation_date": 1588504080, "post_id": 52969037, "comment_id": 108916379, "body": "any advantage of using abstract classes(+no default functionality) over interface (+ string provider) ? or opposite."}], "answers": [{"tags": [], "owner": {"reputation": 2697, "user_id": 3354444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Z3Jq.png?s=128&g=1", "display_name": "amankkg", "link": "https://stackoverflow.com/users/3354444/amankkg"}, "is_accepted": true, "score": 12, "last_activity_date": 1540797797, "last_edit_date": 1592644375, "creation_date": 1540797797, "answer_id": 53040617, "question_id": 52969037, "link": "https://stackoverflow.com/questions/52969037/nestjs-dependency-injection-and-ddd-clean-architecture/53040617#53040617", "title": "Nestjs Dependency Injection and DDD / Clean Architecture", "body": "<p>It is not possible to <a href=\"https://github.com/nestjs/nest/issues/43#issuecomment-300092490\" rel=\"noreferrer\">resolve dependency by the interface in NestJS</a> due to the language limitations/features <a href=\"https://www.typescriptlang.org/docs/handbook/type-compatibility.html\" rel=\"noreferrer\">(see structural vs nominal typing)</a>.</p>\n<p>And, if you are using an interface to define a (type of) dependency, then you have to use string tokens. But, you also can use class itself, or its name as a string literal, so you don't need to mention it during injection in, say, dependant's constructor.</p>\n<p>Example:</p>\n<pre><code>// *** app.module.ts ***\nimport { Module } from '@nestjs/common';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { AppServiceMock } from './app.service.mock';\n\nprocess.env.NODE_ENV = 'test'; // or 'development'\n\nconst appServiceProvider = {\n  provide: AppService, // or string token 'AppService'\n  useClass: process.env.NODE_ENV === 'test' ? AppServiceMock : AppService,\n};\n\n@Module({\n  imports: [],\n  controllers: [AppController],\n  providers: [appServiceProvider],\n})\nexport class AppModule {}\n\n// *** app.controller.ts ***\nimport { Get, Controller } from '@nestjs/common';\nimport { AppService } from './app.service';\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  root(): string {\n    return this.appService.root();\n  }\n}\n</code></pre>\n<p>You also can use an abstract class instead of an interface or give both interface and implementation class a similar name (and use aliases in-place).</p>\n<p>Yes, comparing to C#/Java this might look like a dirty hack. Just keep in mind that interfaces are design-time only. In my example, <code>AppServiceMock</code> and <code>AppService</code> are not even inheriting from interface nor abstract/base class (in real world, they should, of course) and everything will work as long as they implement method <code>root(): string</code>.</p>\n<p>Quote from <a href=\"https://docs.nestjs.com/fundamentals/custom-providers\" rel=\"noreferrer\">the NestJS docs on this topic</a>:</p>\n<blockquote>\n<p>NOTICE</p>\n<p>Instead of a custom token, we have used the ConfigService class, and therefore we have overridden the default implementation.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4987, "user_id": 2619188, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/ZlPjB.gif?s=128&g=1", "display_name": "demisx", "link": "https://stackoverflow.com/users/2619188/demisx"}, "edited": false, "score": 0, "creation_date": 1575509928, "post_id": 54659066, "comment_id": 104594088, "body": "Is it OK for <code>Foo</code> to only implement <code>IFoo</code> without extending it too, provided the abstract class has not shared logic and merely is a inject-via-interface hack in TypeScript?"}, {"owner": {"reputation": 477, "user_id": 929874, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/RBCT2.png?s=128&g=1", "display_name": "nolazybits", "link": "https://stackoverflow.com/users/929874/nolazybits"}, "reply_to_user": {"reputation": 4987, "user_id": 2619188, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/ZlPjB.gif?s=128&g=1", "display_name": "demisx", "link": "https://stackoverflow.com/users/2619188/demisx"}, "edited": false, "score": 0, "creation_date": 1581884268, "post_id": 54659066, "comment_id": 106576755, "body": "Yes it is OK for you to implement only."}, {"owner": {"reputation": 4346, "user_id": 1016228, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/66f589227a200c1f1465682ab8650254?s=128&d=identicon&r=PG", "display_name": "RollerCosta", "link": "https://stackoverflow.com/users/1016228/rollercosta"}, "edited": false, "score": 0, "creation_date": 1588503863, "post_id": 54659066, "comment_id": 108916308, "body": "any advantage of using abstract classes(+no default functionality) over interface (+ string provider) ? or opposite."}, {"owner": {"reputation": 477, "user_id": 929874, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/RBCT2.png?s=128&g=1", "display_name": "nolazybits", "link": "https://stackoverflow.com/users/929874/nolazybits"}, "edited": false, "score": 1, "creation_date": 1591228384, "post_id": 54659066, "comment_id": 109979904, "body": "in this instance, you will need to use an abstract class to keep it (therefore the reference for the DI) in the JS world, as interface simply aren&#39;t transpiled"}], "tags": [], "owner": {"reputation": 477, "user_id": 929874, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/RBCT2.png?s=128&g=1", "display_name": "nolazybits", "link": "https://stackoverflow.com/users/929874/nolazybits"}, "is_accepted": false, "score": 7, "last_activity_date": 1550007600, "creation_date": 1550007600, "answer_id": 54659066, "question_id": 52969037, "link": "https://stackoverflow.com/questions/52969037/nestjs-dependency-injection-and-ddd-clean-architecture/54659066#54659066", "title": "Nestjs Dependency Injection and DDD / Clean Architecture", "body": "<p>You can indeed use interfaces, well abstract classes. One typescript feature is inferring interface from classes (which are kept in JS world), so something like this will work</p>\n\n<p>IFoo.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export abstract class IFoo {\n    public abstract bar: string;\n}\n</code></pre>\n\n<p>Foo.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class Foo \n    extends IFoo\n    implement IFoo\n{\n    public bar: string\n    constructor(init: Partial&lt;IFoo&gt;) {\n        Object.assign(this, init);\n    }\n}\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>const appServiceProvider = {\n  provide: IFoo,\n  useClass: Foo,\n};\n\n</code></pre>\n"}], "owner": {"reputation": 404, "user_id": 4517857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539d518307c1ae15c1340471a3949130?s=128&d=identicon&r=PG&f=1", "display_name": "Alerosa", "link": "https://stackoverflow.com/users/4517857/alerosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10647, "favorite_count": 6, "accepted_answer_id": 53040617, "answer_count": 2, "score": 17, "last_activity_date": 1550007600, "creation_date": 1540384215, "last_edit_date": 1540404101, "question_id": 52969037, "link": "https://stackoverflow.com/questions/52969037/nestjs-dependency-injection-and-ddd-clean-architecture", "title": "Nestjs Dependency Injection and DDD / Clean Architecture", "body": "<p>I'm experimenting with Nestjs by trying to implement a clean-architecture structure and I'd like to validate my solution because I'm not sure I understand the best way to do it.\nPlease note that the example is almost pseudo-code and a lot of types are missing or generic because they're not the focus of the discussion.</p>\n\n<p>Starting from my domain logic, I might want to implement it in a class like the following:</p>\n\n<pre><code>@Injectable()\nexport class ProfileDomainEntity {\n  async addAge(profileId: string, age: number): Promise&lt;void&gt; {\n    const profile = await this.profilesRepository.getOne(profileId)\n    profile.age = age\n    await this.profilesRepository.updateOne(profileId, profile)\n  }\n}\n</code></pre>\n\n<p>Here I need to get access to the <code>profileRepository</code>, but following the principles of the clean architecture, I don't want to be bothered with the implementation just now so I write an interface for it:</p>\n\n<pre><code>interface IProfilesRepository {\n  getOne (profileId: string): object\n  updateOne (profileId: string, profile: object): bool\n}\n</code></pre>\n\n<p>Then I inject the dependency in the <code>ProfileDomainEntity</code> constructor and I make sure it's gonna follow the expected interface:</p>\n\n<pre><code>export class ProfileDomainEntity {\n  constructor(\n    private readonly profilesRepository: IProfilesRepository\n  ){}\n\n  async addAge(profileId: string, age: number): Promise&lt;void&gt; {\n    const profile = await this.profilesRepository.getOne(profileId)\n    profile.age = age\n\n    await this.profilesRepository.updateOne(profileId, profile)\n  }\n}\n</code></pre>\n\n<p>And then I create a simple in memory implementation that let me run the code:</p>\n\n<pre><code>class ProfilesRepository implements IProfileRepository {\n  private profiles = {}\n\n  getOne(profileId: string) {\n    return Promise.resolve(this.profiles[profileId])\n  }\n\n  updateOne(profileId: string, profile: object) {\n    this.profiles[profileId] = profile\n    return Promise.resolve(true)\n  }\n}\n</code></pre>\n\n<p>Now it's time to wiring everything together by using a module:</p>\n\n<pre><code>@Module({\n  providers: [\n    ProfileDomainEntity,\n    ProfilesRepository\n  ]\n})\nexport class ProfilesModule {}\n</code></pre>\n\n<p>The problem here is that obviously <code>ProfileRepository</code> implements <code>IProfilesRepository</code> but it's not <code>IProfilesRepository</code> and therefore, as far as I understand, the token is different and Nest is not able to resolve the dependency.</p>\n\n<p>The only solution that I've found to this is to user a custom provider to manually set the token:</p>\n\n<pre><code>@Module({\n  providers: [\n    ProfileDomainEntity,\n    {\n      provide: 'IProfilesRepository',\n      useClass: ProfilesRepository\n    }\n  ]\n})\nexport class ProfilesModule {}\n</code></pre>\n\n<p>And modify the <code>ProfileDomainEntity</code> by specifying the token to use with <code>@Inject</code>:</p>\n\n<pre><code>export class ProfileDomainEntity {\n  constructor(\n    @Inject('IProfilesRepository') private readonly profilesRepository: IProfilesRepository\n  ){}\n}\n</code></pre>\n\n<p>Is this a reasonable approach to use to deal wit all my dependencies or am I completely off-track? \nIs there any better solution?\nI'm new fairly new to all of these things (NestJs, clean architecture/DDD and Typescript as well) so I might be totally wrong here.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["typescript", "webpack"], "comments": [{"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540480641, "post_id": 52968975, "comment_id": 92890638, "body": "Was there more to the stack trace of the error?  I&#39;m no expert with webpack, but if you publish a repository that reproduces the problem, I&#39;ll fiddle with it a bit."}, {"owner": {"reputation": 719, "user_id": 1843115, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/78db9db05592b88ac21e4661478a3eea?s=128&d=identicon&r=PG", "display_name": "orepor", "link": "https://stackoverflow.com/users/1843115/orepor"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1543587699, "post_id": 52968975, "comment_id": 93984051, "body": "turns out it was due to some circular dependency between packages in my lerna project."}], "owner": {"reputation": 719, "user_id": 1843115, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/78db9db05592b88ac21e4661478a3eea?s=128&d=identicon&r=PG", "display_name": "orepor", "link": "https://stackoverflow.com/users/1843115/orepor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540384513, "creation_date": 1540383994, "last_edit_date": 1540384513, "question_id": 52968975, "link": "https://stackoverflow.com/questions/52968975/webpack-4-in-production-mode-fails-compiling-typescript", "title": "webpack 4 in production mode fails compiling typescript", "body": "<p>After migrating from webpack 3 to webpack 4 following the <a href=\"https://webpack.js.org/migrate/4/#update-plugins\" rel=\"nofollow noreferrer\">readme</a></p>\n\n<p>my typescript app has a complication error when setting webpack to <code>mode: production</code></p>\n\n<p>the error:</p>\n\n<pre><code>Uncaught TypeError: Object(...) is not a function\n    at Object.822 (Tag.tsx:65)\n</code></pre>\n\n<p>Which maps to this line:</p>\n\n<pre><code>withExpertFeed(({removeAttribute}) =&gt; ({removeAttribute})),\n</code></pre>\n\n<p>this webpack config works:</p>\n\n<pre><code>module.exports = merge(common(), {\n    devtool: 'source-map',\n    mode: 'development', // Set to development\n    plugins: [\n        }),\n        new CopyWebpackPlugin([{\n            from: 'public',\n        }, ]),\n        new ForkTsCheckerWebpackPlugin({\n            checkSyntacticErrors: false,\n            tsconfig: '../web-tsconfig.json',\n        }),\n        new HtmlWebpackPlugin({\n            inject: true,\n            template: path.resolve(__dirname, 'public/index.html'),\n            filename: 'index.html',\n            minify: {\n                removeComments: true,\n                collapseWhitespace: true,\n                removeRedundantAttributes: true,\n                useShortDoctype: true,\n                removeEmptyAttributes: true,\n                removeStyleLinkTypeAttributes: true,\n                keepClosingSlash: true,\n                minifyJS: true,\n                minifyCSS: true,\n                minifyURLs: true,\n            },\n        }),\n    ],\n    optimization: {\n        minimizer: [\n            new UglifyJSPlugin({\n                uglifyOptions: {\n                    output: {\n                        ascii_only: true,\n                    },\n                },\n                parallel: true,\n                cache: true,\n                sourceMap: true\n            }),\n        ]\n    }\n});\n</code></pre>\n\n<p>the same webpack config when I set <code>mode: production</code> fails with the above error</p>\n"}, {"tags": ["reactjs", "typescript", "redux", "react-redux", "tslint"], "comments": [{"owner": {"reputation": 13638, "user_id": 4374566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d5ab25523e9e65cec29bb4fa303bd3?s=128&d=identicon&r=PG", "display_name": "Agney", "link": "https://stackoverflow.com/users/4374566/agney"}, "edited": false, "score": 3, "creation_date": 1540384456, "post_id": 52968903, "comment_id": 92844403, "body": "You have imported <code>addTodo</code> and destructured the same variable from <code>this.props</code>. This is clear case of shadowing, you can change name of either to make this go away"}, {"owner": {"reputation": 8031, "user_id": 8331756, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qcaCX.jpg?s=128&g=1", "display_name": "J. Hesters", "link": "https://stackoverflow.com/users/8331756/j-hesters"}, "reply_to_user": {"reputation": 13638, "user_id": 4374566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d5ab25523e9e65cec29bb4fa303bd3?s=128&d=identicon&r=PG", "display_name": "Agney", "link": "https://stackoverflow.com/users/4374566/agney"}, "edited": false, "score": 0, "creation_date": 1540386039, "post_id": 52968903, "comment_id": 92845588, "body": "@BoyWithSilverWings Yeah true, thank you. Mind posting this as an answer so I can mark it?"}, {"owner": {"reputation": 5592, "user_id": 1981705, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6h0po.png?s=128&g=1", "display_name": "lkbaerenfaenger", "link": "https://stackoverflow.com/users/1981705/lkbaerenfaenger"}, "edited": false, "score": 0, "creation_date": 1578664904, "post_id": 52968903, "comment_id": 105523196, "body": "I am facing basically the same problem using JS and ESLint with Airbnb&#39;s style guide. This style guides forbids both: not destructuring <code>props</code> <i>and</i> shadowing variable names, so I feel like I have to violate either one rule or the other. What&#39;s the official way of dealing with this. I think you should re-open the question, @J.Hesters. Cheers. :)"}], "answers": [{"tags": [], "owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "is_accepted": true, "score": 3, "last_activity_date": 1540387609, "creation_date": 1540387609, "answer_id": 52970227, "question_id": 52968903, "link": "https://stackoverflow.com/questions/52968903/shadowed-name-in-typescript-and-react-redux/52970227#52970227", "title": "Shadowed name in TypeScript and React-Redux", "body": "<p>This is the result of TSLint <a href=\"https://eslint.org/docs/rules/no-shadow\" rel=\"nofollow noreferrer\"><code>no-shadow</code> rule</a>. It allows to avoid mistakes that result from unintentionally shadowed variables. And it requires to provide workarounds for variables that could be safely shadowed.</p>\n\n<p>Here <code>addTodo</code> import is shadowed by <code>addTodo</code> prop. It seems this was intentional, the rule is an obstacle in this case.</p>\n\n<p>Such problems with <code>no-shadow</code> can be avoided by enforcing a style where objects aren't destructured if variables may become ambiguous. This allows to resolve common problems with similarly named properties, e.g. in <code>props</code> and <code>state</code> objects. This also can improve the readability in some places because no backtracking is needed, while other places may become more verbose:</p>\n\n<pre><code>import * as actions from \"../../redux/actions\";\n\n// ... component code\n  handleAdd = (todo: Todo) =&gt; {\n    const { props } = this;\n    // some code ... eventually:\n    props.addTodo(todo);\n  } \n\nexport default connect(\n  mapStateToProps,\n  { addTodo: actions.addTodo }\n)(MyComponent);\n</code></pre>\n\n<p>For multiple action creators as props, some <code>pick</code> implementation could be used instead of <code>{ addTodo: actions.addTodo }</code>.</p>\n\n<p>This style may be in conflict with ESLint <a href=\"https://eslint.org/docs/rules/prefer-destructuring\" rel=\"nofollow noreferrer\"><code>prefer-destructuring</code> rule</a>.</p>\n"}], "owner": {"reputation": 8031, "user_id": 8331756, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qcaCX.jpg?s=128&g=1", "display_name": "J. Hesters", "link": "https://stackoverflow.com/users/8331756/j-hesters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3596, "favorite_count": 1, "accepted_answer_id": 52970227, "answer_count": 1, "score": 5, "last_activity_date": 1540387609, "creation_date": 1540383782, "last_edit_date": 1540386940, "question_id": 52968903, "link": "https://stackoverflow.com/questions/52968903/shadowed-name-in-typescript-and-react-redux", "title": "Shadowed name in TypeScript and React-Redux", "body": "<p>I'm building a React Native app with TypeScript and React-Redux.</p>\n\n<p>I connected my component using connect:</p>\n\n<pre><code>import { addTodo } from \"../../redux/actions\";\n\nexport interface Props {\n  addTodo: (todo: Todo) =&gt; void;\n}\n\n// ... component code\n  handleAdd = (todo: Todo) =&gt; {\n    const { addTodo, ... } = this.props; // ... = more destructuring\n    // some code ... eventually:\n    addTodo(todo);\n  } \n\nexport default connect(\n  mapStateToProps,\n  { addTodo }\n)(MyComponent);\n</code></pre>\n\n<p>The problem is now, that TSLint complains about a shadowed variable:</p>\n\n<pre><code>[tslint] Shadowed name: 'addTodo'\n</code></pre>\n\n<p>This feels like a mistake from TypeScript not recognizing React-Redux' functionality. I mean it's taught in the Redux docs to map dispatch to props this way.</p>\n\n<p>Am I doing something wrong? Or do you have to do this differently when using TypeScript?</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 5, "creation_date": 1540409245, "post_id": 52973675, "comment_id": 92859667, "body": "Please provide a description of why this code is a possible solution."}, {"owner": {"reputation": 7059, "user_id": 1137334, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9b2a13764b560b46cc04e2e0e29940a4?s=128&d=identicon&r=PG", "display_name": "m93a", "link": "https://stackoverflow.com/users/1137334/m93a"}, "reply_to_user": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 1, "creation_date": 1540456297, "post_id": 52973675, "comment_id": 92875129, "body": "I revisited the code, thought about it, and found out there is a much simpler solution. Thanks!"}], "tags": [], "owner": {"reputation": 7059, "user_id": 1137334, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9b2a13764b560b46cc04e2e0e29940a4?s=128&d=identicon&r=PG", "display_name": "m93a", "link": "https://stackoverflow.com/users/1137334/m93a"}, "is_accepted": true, "score": 2, "last_activity_date": 1540481635, "last_edit_date": 1540481635, "creation_date": 1540397726, "answer_id": 52973675, "question_id": 52968745, "link": "https://stackoverflow.com/questions/52968745/required-but-possibly-undefined-type/52973675#52973675", "title": "Required but possibly undefined type", "body": "<p>I finally found a solution. And it's more readable than I expected it to be.</p>\n\n<pre><code>type Required_ish&lt;T&gt; =\n{\n    [K in keyof Required&lt;T&gt;]: T[K]\n};\n</code></pre>\n\n<hr>\n\n<p>Ok, but why does this work? Let's break this down.</p>\n\n<p>First, I start with a homomorphic <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\" rel=\"nofollow noreferrer\">mapped type</a>:</p>\n\n<pre><code>type Required_ish&lt;T&gt; = { [K in keyof T]: T[K] }\n</code></pre>\n\n<p>Mapped types are a feature that allows you to modify a type but maintain its  internal structure (a tuple will still be a tuple) and property modifiers (readonly, optional) unless you're explicit about it. The line I just wrote is more-or-less an identity type: for each key of <code>T</code> it returns the same type and modifiers as <code>T</code> had.</p>\n\n<p>Now there are two modifiers that allow changing the requiredness of a property: </p>\n\n<pre><code>{ [K in keyof T]?:  T[K] } // add the optional modifier\n{ [K in keyof T]-?: T[K] } // remove the optional modifier\n</code></pre>\n\n<p>It might be tempting to use <code>-?</code> here, but sadly this modifier does two things. Not only it removes the optional modifier from the property, it also removes undefined from the resulting type. This means that whenever you use <code>-?</code>, you have no way to return a type that extends undefined.</p>\n\n<p>Luckily, we can get the keys not from <code>T</code>, but from <code>Required&lt;T&gt;</code>. As the compiler takes all the modifiers from the left-hand side (the part before <code>:</code>), the property will have the same modifiers as <code>Required&lt;T&gt;[K]</code>. This means that it will never be optional and the <code>readonly</code> modifier will stay unchanged. And because we haven't used the <code>-?</code> modifier, <code>T[K]</code> will stay intact and possibly undefined.</p>\n\n<p>This way we effectively bypassed the side-effect of <code>-?</code> and the resulting type does exactly what I asked.</p>\n"}], "owner": {"reputation": 7059, "user_id": 1137334, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9b2a13764b560b46cc04e2e0e29940a4?s=128&d=identicon&r=PG", "display_name": "m93a", "link": "https://stackoverflow.com/users/1137334/m93a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 52973675, "answer_count": 1, "score": 3, "last_activity_date": 1540481635, "creation_date": 1540383219, "last_edit_date": 1540398998, "question_id": 52968745, "link": "https://stackoverflow.com/questions/52968745/required-but-possibly-undefined-type", "title": "Required but possibly undefined type", "body": "<p>I want to create a class in TypeScript, which implements an interface in a way that it is required to have all properties of that interface, even the optional ones, but allows for the optional properties to be <code>undefined</code>.</p>\n\n<p>This is <code>Required_ish&lt;T&gt;</code> type would be wider than <code>Required&lt;T&gt;</code>, but stricter than <code>T</code>, because it would require me to explicitly list all the properties. However the same values would be assignable to the parameters of <code>Required_ish&lt;T&gt;</code> and <code>T</code>.</p>\n\n<p>I've tried this but it seems to do the same thing as <code>Required</code>:</p>\n\n<pre><code>type Required_ish&lt;T&gt; = T &amp; { [K in keyof T]-?: T[K] | undefined }\n</code></pre>\n\n<hr>\n\n<p>The desired properties:</p>\n\n<pre><code>interface Foo {\n    a: string;\n    b?: number;\n}\n\nclass Bar1 implements Foo               { a = ''; } // allowed\nclass Bar2 implements Required_ish&lt;Foo&gt; { a = ''; } // error\nclass Bar3 implements Required&lt;Foo&gt;     { a = ''; } // error\n\nclass Bar4 implements Foo               { a = ''; b = undefined; } // allowed\nclass Bar5 implements Required_ish&lt;Foo&gt; { a = ''; b = undefined; } // allowed\nclass Bar6 implements Required&lt;Foo&gt;     { a = ''; b = undefined; } // error\n\nclass Bar7 implements Foo               { a = ''; b = 0; } // allowed\nclass Bar8 implements Required_ish&lt;Foo&gt; { a = ''; b = 0; } // allowed\nclass Bar9 implements Required&lt;Foo&gt;     { a = ''; b = 0; } // allowed\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "api", "firebase", "google-cloud-functions"], "answers": [{"comments": [{"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540391596, "post_id": 52971465, "comment_id": 92849594, "body": "Thanks for the reply, that still returns &#39;ok&#39; on a 404 response from the API. :-( This also returns &#39;Function returned undefined, expected Promise or value&#39;"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540391881, "post_id": 52971465, "comment_id": 92849798, "body": "This has probably to do with the way you use/configure request-promise. You have probably to add <code>resolveWithFullResponse: true</code> in your options. See <a href=\"https://github.com/request/request-promise#get-the-full-response-instead-of-just-the-body\" rel=\"nofollow noreferrer\">github.com/request/&hellip;</a>."}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540392060, "post_id": 52971465, "comment_id": 92849915, "body": "For the second part of your comment (that you added later on): try returning <code>true</code> instead of <code>parsedBody</code>. Ideally you should return a Promise. For example if you write the response of the API to a document in the database you would return the Promise returned by <code>set()</code>."}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540392573, "post_id": 52971465, "comment_id": 92850307, "body": "I have tested with resolveWithFullResponse: true, and changed the returns to boolean but I get the following response <a href=\"https://imgur.com/a/UXv5pEZ\" rel=\"nofollow noreferrer\">imgur.com/a/UXv5pEZ</a>"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540392852, "post_id": 52971465, "comment_id": 92850487, "body": "Where is hosted the API?"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540392916, "post_id": 52971465, "comment_id": 92850531, "body": "On which payment plan are you? The free &quot;Spark&quot; plan allows outbound network requests only to Google-owned services. You may need to be on the &quot;Flame&quot; or &quot;Blaze&quot; plan if you API is not a Google-owned service. See  <a href=\"https://firebase.google.com/pricing/\" rel=\"nofollow noreferrer\">firebase.google.com/pricing</a>"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540392980, "post_id": 52971465, "comment_id": 92850573, "body": "On the image you provide we cannot see the entire error message."}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540393356, "post_id": 52971465, "comment_id": 92850836, "body": "I am hosting the API on an RPI, I am on the pay as you go blaze plan. Here is the full image <a href=\"https://imgur.com/a/0jP7uXa\" rel=\"nofollow noreferrer\">imgur.com/a/0jP7uXa</a>"}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540393761, "post_id": 52971465, "comment_id": 92851121, "body": "As mentioned in the main thread, the API is receiving the correct data and sending back the response to Firebase, but it&#39;s not triggering a failed call."}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540395148, "post_id": 52971465, "comment_id": 92852077, "body": "If I am not mistaking, I think that it actually DOES trigger a failed call since the error message you show is generated by <code>console.log(&#39;ERR &#39;, err);</code>, which is in the <code>catch()</code>."}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540395598, "post_id": 52971465, "comment_id": 92852349, "body": "It is the error from the catch, but when I have the Cloud retry function capability turned on, it doesn&#39;t retry the function, I need to trigger the retry function the only way it does that is if the function completely fails and is not just showing a console logged error. And the response error message is showing 20 seconds after firebase returns finished with status: &#39;ok&#39;"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540395941, "post_id": 52971465, "comment_id": 92852574, "body": "Try returning <code>return false;</code> instead of <code>return err;</code>. There may be a delay for the console.log() to appear in the log, this is not an incorrect behavior."}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540396040, "post_id": 52971465, "comment_id": 92852636, "body": "I changed that earlier when I updates the then() to return true. Still no joy."}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540396074, "post_id": 52971465, "comment_id": 92852662, "body": "You could also try just with <code>return rp(options);</code> and no more <code>.then()</code> nor <code>catch()</code>. The Cloud Function will return the error generated by request-promise and will consider it as an error."}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540396771, "post_id": 52971465, "comment_id": 92853126, "body": "Same thing returns Function returned undefined, expected Promise or value. I have also tested returning a boolean on the API the the above return you mentioned. Am I trying to do something really outlandish?"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540397345, "post_id": 52971465, "comment_id": 92853506, "body": "No nothing really outlandish...  Are you testing locally or on the platform (after re-deploying)?"}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540397921, "post_id": 52971465, "comment_id": 92853817, "body": "I have an Angular application running locally feeding data into the Cloud Firestore DB, which is then feeding into a API server locally in my house via my external IP. As previously mentioned the API is responding correctly and returning the correct errors but Firebase is not responding with an error."}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540398014, "post_id": 52971465, "comment_id": 92853868, "body": "Where is the Cloud function running? On the Firebase platform or locally (<a href=\"https://firebase.google.com/docs/functions/local-emulator\" rel=\"nofollow noreferrer\">firebase.google.com/docs/functions/local-emulator</a>)?"}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540398131, "post_id": 52971465, "comment_id": 92853938, "body": "The Firebase platform. Should we move this into private chat? Stackoverflow keeps warning me."}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 0, "creation_date": 1540398370, "post_id": 52971465, "comment_id": 92854070, "body": "Actually I don&#39;t know how to help you more for the moment.... I would have to try your code in my testing environment (and set up an API to be called) and I have no more time today. I may give a try tomorrow afternoon (Brussels time)..."}, {"owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "edited": false, "score": 1, "creation_date": 1540398526, "post_id": 52971465, "comment_id": 92854169, "body": "Ok thank you for your help, I am going to keep trying things my end. I can provide the code, or give you some form of access."}], "tags": [], "owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "is_accepted": true, "score": 0, "last_activity_date": 1540391123, "creation_date": 1540391123, "answer_id": 52971465, "question_id": 52968614, "link": "https://stackoverflow.com/questions/52968614/firebase-cloud-function-never-failing-on-404-api-call/52971465#52971465", "title": "Firebase Cloud Function never failing on 404 API call", "body": "<p>The Cloud Function returns the result before the call is complete because you don't return the Promise returned by the request-promise call.</p>\n\n<p>Changing your code as follows should do the trick (at least for this problem):</p>\n\n<pre><code>exports.sendUser = functions.firestore\n  .document('user/{userId}')\n  .onCreate((snap, context) =&gt; {\n\n    const data = snap.data();\n    const options = {\n      method: 'POST',\n      uri: 'http://' + ip + ':' + port + '/user',\n      body: data,\n      json: true,\n    };\n\n    return rp(options) // &lt;-- See the change here  \n      .then(function (parsedBody) {\n        console.log('TEN ', parsedBody);\n        return parsedBody;\n      })\n      .catch(function (err) {\n        console.log('ERR ', err);\n        return err;\n      });\n  });\n</code></pre>\n\n<p>I would suggest you watch the official Video Series (<a href=\"https://firebase.google.com/docs/functions/video-series/\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/functions/video-series/</a>) which explain very well this point about returning Promises for background functions (in particular the ones titled \"Learn JavaScript Promises\"). </p>\n"}], "owner": {"reputation": 1048, "user_id": 10490334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KThPV.png?s=128&g=1", "display_name": "Hensler Software", "link": "https://stackoverflow.com/users/10490334/hensler-software"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 52971465, "answer_count": 1, "score": 0, "last_activity_date": 1540392117, "creation_date": 1540382868, "last_edit_date": 1540392117, "question_id": 52968614, "link": "https://stackoverflow.com/questions/52968614/firebase-cloud-function-never-failing-on-404-api-call", "title": "Firebase Cloud Function never failing on 404 API call", "body": "<p>I have a function running on the creation of a document.</p>\n\n<p>When I send this information to an external API Firebase returns on 'ok' message before the API call is complete.</p>\n\n<pre><code>const functions = require('firebase-functions');\nconst request = require('request');\nconst admin = require('firebase-admin');\nconst rp = require('request-promise');\n\nconst port = '****';\nconst ip = '***.***.***.***';\n\nadmin.initializeApp(functions.config().firebase);\n\nexports.sendUser = functions.firestore\n  .document('user/{userId}')\n  .onCreate((snap, context) =&gt; {\n\n    const data = snap.data();\n    const options = {\n      method: 'POST',\n      uri: 'http://' + ip + ':' + port + '/user',\n      body: data,\n      json: true,\n    };\n\n    rp(options)\n      .then(function (parsedBody) {\n        console.log('TEN ', parsedBody);\n        return parsedBody;\n      })\n      .catch(function (err) {\n        console.log('ERR ', err);\n        return err;\n      });\n  });\n</code></pre>\n\n<p>As you can see from my function it is not doing anything special apart from sending the data to an external source.</p>\n\n<p>The API look like the following:-</p>\n\n<pre><code>app.post('/user', function (req, res) {\n\n    fs.exists(path, function(exists) {\n        if (exists === true) {\n            console.log('Currently Printing Different User Info');\n            fs.unlinkSync(path);        \n            res.status(404).json({errorCode: 404, errorMessage: 'Currently Printing Different User.'});\n            return;\n        } else {\n            fs.writeFile(path, '', () =&gt; { console.log('File Created'); });\n            fs.unlinkSync(path);        \n            res.status(200).json({statusCode: 200, statusMessage: 'Here we go'});\n            return;\n        }\n    });\n})\n</code></pre>\n\n<p>How can I get Firebase to recognise the returned 404 as a failed call, and also wait until the call is complete before returning ok or failed.</p>\n\n<p>The API is behaving correctly with Postman but not when data is posted via Firebase.\nHas anyone encountered this before, or can anybody see what I am doing wrong?</p>\n\n<p>The data is being parse over to the serve but only once Firebase has returned with 'ok' even if I purposely trigger a fail.</p>\n\n<p>I need this in place to be able to use the Firebase Cloud Function retry function.</p>\n\n<p>Images can be seen @ <a href=\"https://imgur.com/a/1qYxrci\" rel=\"nofollow noreferrer\">https://imgur.com/a/1qYxrci</a></p>\n"}, {"tags": ["angular", "typescript", "bootstrap-4", "angular6"], "comments": [{"owner": {"reputation": 2078, "user_id": 554021, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Gef5G.jpg?s=128&g=1", "display_name": "Baruch", "link": "https://stackoverflow.com/users/554021/baruch"}, "edited": false, "score": 0, "creation_date": 1540382484, "post_id": 52968487, "comment_id": 92843124, "body": "Why not use the Bootstrap components for Angular?"}, {"owner": {"reputation": 1736, "user_id": 1310853, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/cc33f2a4c0b0dfeb93eb91975eba98d2?s=128&d=identicon&r=PG", "display_name": "E.Meir", "link": "https://stackoverflow.com/users/1310853/e-meir"}, "reply_to_user": {"reputation": 2078, "user_id": 554021, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Gef5G.jpg?s=128&g=1", "display_name": "Baruch", "link": "https://stackoverflow.com/users/554021/baruch"}, "edited": false, "score": 0, "creation_date": 1540382692, "post_id": 52968487, "comment_id": 92843267, "body": "@Baruch what can i benefits from that? can you please share a link?"}, {"owner": {"reputation": 1636, "user_id": 8358892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7h1Pv.png?s=128&g=1", "display_name": "Shashikant Devani", "link": "https://stackoverflow.com/users/8358892/shashikant-devani"}, "edited": false, "score": 0, "creation_date": 1540382906, "post_id": 52968487, "comment_id": 92843393, "body": "Have you tried this <code>.&#47;node_modules&#47;jquery&#47;dist&#47;jquery.min.js</code> instead of <code>node_modules&#47;jquery&#47;dist&#47;jquery.min.js</code>?"}, {"owner": {"reputation": 1636, "user_id": 8358892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7h1Pv.png?s=128&g=1", "display_name": "Shashikant Devani", "link": "https://stackoverflow.com/users/8358892/shashikant-devani"}, "edited": false, "score": 2, "creation_date": 1540383001, "post_id": 52968487, "comment_id": 92843459, "body": "and when you change in angular.json file you must need to stop your application and start it again via <code>ng serve</code> or your default set command."}, {"owner": {"reputation": 1736, "user_id": 1310853, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/cc33f2a4c0b0dfeb93eb91975eba98d2?s=128&d=identicon&r=PG", "display_name": "E.Meir", "link": "https://stackoverflow.com/users/1310853/e-meir"}, "reply_to_user": {"reputation": 1636, "user_id": 8358892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7h1Pv.png?s=128&g=1", "display_name": "Shashikant Devani", "link": "https://stackoverflow.com/users/8358892/shashikant-devani"}, "edited": false, "score": 0, "creation_date": 1540383255, "post_id": 52968487, "comment_id": 92843610, "body": "@ShashikantDevani, tried but it didn&#39;t work.."}, {"owner": {"reputation": 2078, "user_id": 554021, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Gef5G.jpg?s=128&g=1", "display_name": "Baruch", "link": "https://stackoverflow.com/users/554021/baruch"}, "edited": false, "score": 0, "creation_date": 1540383809, "post_id": 52968487, "comment_id": 92843989, "body": "Benefit? It&#39;s essentially all the Bootstrap components written as Angular components, all you have to do is add them to your module and use them according to the docs. Here you go: <a href=\"https://ng-bootstrap.github.io/#/home\" rel=\"nofollow noreferrer\">ng-bootstrap.github.io/#/home</a>"}, {"owner": {"reputation": 1736, "user_id": 1310853, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/cc33f2a4c0b0dfeb93eb91975eba98d2?s=128&d=identicon&r=PG", "display_name": "E.Meir", "link": "https://stackoverflow.com/users/1310853/e-meir"}, "edited": false, "score": 0, "creation_date": 1540384181, "post_id": 52968487, "comment_id": 92844233, "body": "this is written , not by twitter, but 3&#39;rd party, right?"}, {"owner": {"reputation": 1736, "user_id": 1310853, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/cc33f2a4c0b0dfeb93eb91975eba98d2?s=128&d=identicon&r=PG", "display_name": "E.Meir", "link": "https://stackoverflow.com/users/1310853/e-meir"}, "edited": false, "score": 0, "creation_date": 1540387021, "post_id": 52968487, "comment_id": 92846252, "body": "finely figured it up, i needed to install and include &#39;tether.js` in the scripts list it started to work"}, {"owner": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "edited": false, "score": 0, "creation_date": 1612845440, "post_id": 52968487, "comment_id": 116887114, "body": "Why did you need <code>tether,js</code> ?"}], "owner": {"reputation": 1736, "user_id": 1310853, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/cc33f2a4c0b0dfeb93eb91975eba98d2?s=128&d=identicon&r=PG", "display_name": "E.Meir", "link": "https://stackoverflow.com/users/1310853/e-meir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5087, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540384446, "creation_date": 1540382424, "last_edit_date": 1540384446, "question_id": 52968487, "link": "https://stackoverflow.com/questions/52968487/angular-json-scripts-not-loading", "title": "Angular.json scripts not loading", "body": "<p>i am trying to use <code>bootstrap</code> navbar with the example from <code>bootstrap</code> docs,\nif i am loading it from <code>angular.json</code> the toggle hamburger is not working.\nif i am using there CDN links from <code>bootstrap</code> docs:</p>\n\n<pre><code>   &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\" integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\"&gt;\n  &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js\" integrity=\"sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n  &lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js\" integrity=\"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>it's working.</p>\n\n<p>this is the code i am using (its from Bootstrap site)</p>\n\n<pre><code>&lt;nav class=\"navbar navbar-expand-lg navbar-light bg-light\"&gt;\n  &lt;a class=\"navbar-brand\" href=\"#\"&gt;Navbar&lt;/a&gt;\n  &lt;button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"&gt;\n    &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n  &lt;/button&gt;\n\n  &lt;div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\"&gt;\n    &lt;ul class=\"navbar-nav mr-auto\"&gt;\n      &lt;li class=\"nav-item active\"&gt;\n        &lt;a class=\"nav-link\" href=\"#\"&gt;Home &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;\n      &lt;/li&gt;\n      &lt;li class=\"nav-item\"&gt;\n        &lt;a class=\"nav-link\" href=\"#\"&gt;Link&lt;/a&gt;\n      &lt;/li&gt;\n      &lt;li class=\"nav-item dropdown\"&gt;\n        &lt;a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;\n          Dropdown\n        &lt;/a&gt;\n        &lt;div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\"&gt;\n          &lt;a class=\"dropdown-item\" href=\"#\"&gt;Action&lt;/a&gt;\n          &lt;a class=\"dropdown-item\" href=\"#\"&gt;Another action&lt;/a&gt;\n          &lt;div class=\"dropdown-divider\"&gt;&lt;/div&gt;\n          &lt;a class=\"dropdown-item\" href=\"#\"&gt;Something else here&lt;/a&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n      &lt;li class=\"nav-item\"&gt;\n        &lt;a class=\"nav-link disabled\" href=\"#\"&gt;Disabled&lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;form class=\"form-inline my-2 my-lg-0\"&gt;\n      &lt;input class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\"&gt;\n      &lt;button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\"&gt;Search&lt;/button&gt;\n    &lt;/form&gt;\n  &lt;/div&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>this is the <code>angular.json</code> file</p>\n\n<pre><code>{\n  \"$schema\": \"./node_modules/@angular/cli/lib/config/schema.json\",\n  \"version\": 1,\n  \"newProjectRoot\": \"projects\",\n  \"projects\": {\n    \"ClientApp\": {\n      \"root\": \"\",\n      \"sourceRoot\": \"src\",\n      \"projectType\": \"application\",\n      \"prefix\": \"app\",\n      \"schematics\": {},\n      \"architect\": {\n        \"build\": {\n          \"builder\": \"@angular-devkit/build-angular:browser\",\n          \"options\": {\n            \"outputPath\": \"dist/ClientApp\",\n            \"index\": \"src/index.html\",\n            \"main\": \"src/main.ts\",\n            \"polyfills\": \"src/polyfills.ts\",\n            \"tsConfig\": \"src/tsconfig.app.json\",\n            \"assets\": [\n              \"src/favicon.ico\",\n              \"src/assets\"\n            ],\n            \"styles\": [\n              \"node_modules/bootstrap/dist/css/bootstrap.min.css\",\n              \"node_modules/@fortawesome/fontawesome-free/css/all.min.css\",\n              \"src/styles.css\"\n            ],\n            \"scripts\": [\n              \"node_modules/jquery/dist/jquery.min.js\",\n              \"node_modules/popper.js/dist/popper.js\",\n              \"node_modules/bootstrap/dist/js/bootstrap.min.js\"\n            ]\n          },\n          \"configurations\": {\n            \"production\": {\n              \"fileReplacements\": [\n                {\n                  \"replace\": \"src/environments/environment.ts\",\n                  \"with\": \"src/environments/environment.prod.ts\"\n                }\n              ],\n              \"optimization\": true,\n              \"outputHashing\": \"all\",\n              \"sourceMap\": false,\n              \"extractCss\": true,\n              \"namedChunks\": false,\n              \"aot\": true,\n              \"extractLicenses\": true,\n              \"vendorChunk\": false,\n              \"buildOptimizer\": true\n            }\n          }\n        },\n        \"serve\": {\n          \"builder\": \"@angular-devkit/build-angular:dev-server\",\n          \"options\": {\n            \"browserTarget\": \"ClientApp:build\"\n          },\n          \"configurations\": {\n            \"production\": {\n              \"browserTarget\": \"ClientApp:build:production\"\n            }\n          }\n        },\n        \"extract-i18n\": {\n          \"builder\": \"@angular-devkit/build-angular:extract-i18n\",\n          \"options\": {\n            \"browserTarget\": \"ClientApp:build\"\n          }\n        },\n        \"test\": {\n          \"builder\": \"@angular-devkit/build-angular:karma\",\n          \"options\": {\n            \"main\": \"src/test.ts\",\n            \"polyfills\": \"src/polyfills.ts\",\n            \"tsConfig\": \"src/tsconfig.spec.json\",\n            \"karmaConfig\": \"src/karma.conf.js\",\n            \"styles\": [\n              \"src/styles.css\"\n            ],\n            \"scripts\": [],\n            \"assets\": [\n              \"src/favicon.ico\",\n              \"src/assets\"\n            ]\n          }\n        },\n        \"lint\": {\n          \"builder\": \"@angular-devkit/build-angular:tslint\",\n          \"options\": {\n            \"tsConfig\": [\n              \"src/tsconfig.app.json\",\n              \"src/tsconfig.spec.json\"\n            ],\n            \"exclude\": [\n              \"**/node_modules/**\"\n            ]\n          }\n        }\n      }\n    },\n    \"ClientApp-e2e\": {\n      \"root\": \"e2e/\",\n      \"projectType\": \"application\",\n      \"architect\": {\n        \"e2e\": {\n          \"builder\": \"@angular-devkit/build-angular:protractor\",\n          \"options\": {\n            \"protractorConfig\": \"e2e/protractor.conf.js\",\n            \"devServerTarget\": \"ClientApp:serve\"\n          },\n          \"configurations\": {\n            \"production\": {\n              \"devServerTarget\": \"ClientApp:serve:production\"\n            }\n          }\n        },\n        \"lint\": {\n          \"builder\": \"@angular-devkit/build-angular:tslint\",\n          \"options\": {\n            \"tsConfig\": \"e2e/tsconfig.e2e.json\",\n            \"exclude\": [\n              \"**/node_modules/**\"\n            ]\n          }\n        }\n      }\n    }\n  },\n  \"defaultProject\": \"ClientApp\"\n}\n</code></pre>\n\n<p>i have the same issue like <a href=\"https://stackoverflow.com/questions/46916060/scripts-dont-load-from-angular-cli-json\"><strong>here</strong></a>.</p>\n\n<p>The CSS file are loaded and i can see the <code>navbar</code> but the toggle (hamburger) on responsive don't work</p>\n"}, {"tags": ["typescript", "vuejs2", "vee-validate"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5152735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c6Amu.jpg?s=128&g=1", "display_name": "Matthew Moss", "link": "https://stackoverflow.com/users/5152735/matthew-moss"}, "edited": false, "score": 0, "creation_date": 1540460535, "post_id": 52972446, "comment_id": 92877691, "body": "Thanks, good point on the validation logic being within the child component. For some reason though I still get the same issue."}], "tags": [], "owner": {"reputation": 2684, "user_id": 10314162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15cf1edc54d0fde7769f36cb2b8d0ad?s=128&d=identicon&r=PG", "display_name": "George Hanson", "link": "https://stackoverflow.com/users/10314162/george-hanson"}, "is_accepted": false, "score": 1, "last_activity_date": 1540393863, "creation_date": 1540393863, "answer_id": 52972446, "question_id": 52968276, "link": "https://stackoverflow.com/questions/52968276/veevalidate-attach-method-a-field-is-missing-a-name-or-data-vv-name-attribu/52972446#52972446", "title": "VeeValidate attach method: A field is missing a &quot;name&quot; or &quot;data-vv-name&quot; attribute when fields do have name", "body": "<p>I think you might be thinking about it wrong. Ideally the validation logic should be within the child component, not the parent. But you <strong>should</strong> still be able to use the parent to run the validations. As you are injecting the validator instance from the parent, you should be able to update your child component to the following:</p>\n\n<pre><code>export default class PersonalDetailsComponent extends Vue {\n    @Inject('$validator') public $validator!: Validator;\n\n    first_name: string = '';\n    surname: string = '';\n    email: string = '';\n\n    public mounted() {\n        this.$validator.attach('first_name', 'required');\n        this.$validator.attach('surname', 'required');\n        this.$validator.attach('email', 'required');\n    }\n}\n</code></pre>\n\n<p>Then you can remove the <code>attachValidators</code> method from the parent. This should attach those validation rules to the validator instance being provided by the parent. So in theory the parent can run <code>this.$validator.validateAll();</code> and it should validate based on the rules within the child component.</p>\n"}, {"comments": [{"owner": {"reputation": 2684, "user_id": 10314162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15cf1edc54d0fde7769f36cb2b8d0ad?s=128&d=identicon&r=PG", "display_name": "George Hanson", "link": "https://stackoverflow.com/users/10314162/george-hanson"}, "edited": false, "score": 0, "creation_date": 1540462275, "post_id": 52986118, "comment_id": 92878836, "body": "Weird, client side validation is a pain. I like to use server side validation and have the front end handle it appropriately depending on the response. It saves having to write validation twice"}], "tags": [], "owner": {"reputation": 41, "user_id": 5152735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c6Amu.jpg?s=128&g=1", "display_name": "Matthew Moss", "link": "https://stackoverflow.com/users/5152735/matthew-moss"}, "is_accepted": true, "score": 1, "last_activity_date": 1540460401, "creation_date": 1540460401, "answer_id": 52986118, "question_id": 52968276, "link": "https://stackoverflow.com/questions/52968276/veevalidate-attach-method-a-field-is-missing-a-name-or-data-vv-name-attribu/52986118#52986118", "title": "VeeValidate attach method: A field is missing a &quot;name&quot; or &quot;data-vv-name&quot; attribute when fields do have name", "body": "<p>I've managed to achieve what I needed - validation of particular fields - by using the <code>data-vv-validate-on</code> attribute along with a custom event. This way I can fire an event on whichever inputs need validating when the button is clicked.</p>\n\n<p>Parent component updated to:</p>\n\n<pre><code>@Component({\n    template: `\n        &lt;div class=\"container\"&gt;\n            &lt;personal-details-component ref=\"personalDetails\"&gt;&lt;/personal-details-component&gt;\n\n            &lt;div class=\"row\"&gt;\n                    &lt;Button :onClick=\"handleButtonClick\" :buttonText=\"'Validate'\"&gt;&lt;/Button&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    `,\n    components: {\n        PersonalDetailsComponent,\n    },\n    $_veeValidate: {validator: 'new'}\n})\nexport default class ClaimComponent extends Vue {\n    $refs!: {\n        personalDetails: PersonalDetailsComponent\n    }\n\n    handleButtonClick() {\n        this.$refs.personalDetails.validateInput();\n    }\n}\n</code></pre>\n\n<p>And PersonalDetails component:</p>\n\n<pre><code>@Component({\n    template: `\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-12\"&gt;\n            &lt;form class=\"material-form\"&gt;\n                &lt;div class=\"group w-third\"&gt;\n                    &lt;input v-model=\"first_name\" ref=\"firstName\" type=\"text\" name=\"first_name\"\n                    v-validate=\"'required'\" \n                    data-vv-validate-on=\"validateStep\" required&gt;\n                    &lt;span class=\"highlight\"&gt;&lt;/span&gt;\n                    &lt;span class=\"bar\"&gt;&lt;/span&gt;\n                    &lt;label&gt;First name&lt;/label&gt;\n                    &lt;span class=\"form-text error-text\"&gt;{{ errors.first('first_name') }}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class=\"group w-third\"&gt;\n                    &lt;input v-model=\"surname\" ref=\"surname\" type=\"text\" name=\"surname\" \n                    v-validate=\"'required'\"\n                    data-vv-validate-on=\"validateStep\" required&gt;\n                    &lt;span class=\"highlight\"&gt;&lt;/span&gt;\n                    &lt;span class=\"bar\"&gt;&lt;/span&gt;\n                    &lt;label&gt;Surname&lt;/label&gt;\n                    &lt;span class=\"form-text error-text\"&gt;{{ errors.first('surname') }}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class=\"group w-third\"&gt;\n                    &lt;input v-model=\"email\" ref=\"email\" type=\"text\" name=\"email\" \n                    data-vv-validate-on=\"validateStep\" v-validate=\"'required|email'\" \n                    required&gt;\n                    &lt;span class=\"highlight\"&gt;&lt;/span&gt;\n                    &lt;span class=\"bar\"&gt;&lt;/span&gt;\n                    &lt;label&gt;Email address&lt;/label&gt;\n                    &lt;span class=\"form-text error-text\"&gt;{{ errors.first('email') }}&lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    `\n})\nexport default class PersonalDetailsComponent extends Vue {\n    @Inject('$validator') public $validator!: Validator;\n    $refs!: {\n        firstName: HTMLInputElement,\n        surname: HTMLInputElement,\n        email: HTMLInputElement\n    }\n\n    first_name: string = '';\n    surname: string = '';\n    email: string = '';\n\n    public validateInput() {\n        this.$refs.firstName.dispatchEvent(new Event('validateStep'));\n        this.$refs.surname.dispatchEvent(new Event('validateStep'));\n        this.$refs.email.dispatchEvent(new Event('validateStep'));\n    }\n}\n</code></pre>\n\n<p>I still don't understand why the <code>attach</code> method was not working, but this alternative does work.</p>\n"}, {"tags": [], "owner": {"reputation": 1183, "user_id": 6332074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RUGS2.png?s=128&g=1", "display_name": "Muhammad Waqas Dilawar", "link": "https://stackoverflow.com/users/6332074/muhammad-waqas-dilawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1616137576, "creation_date": 1616137576, "answer_id": 66703850, "question_id": 52968276, "link": "https://stackoverflow.com/questions/52968276/veevalidate-attach-method-a-field-is-missing-a-name-or-data-vv-name-attribu/66703850#66703850", "title": "VeeValidate attach method: A field is missing a &quot;name&quot; or &quot;data-vv-name&quot; attribute when fields do have name", "body": "<p>In my case, <code>data-vv-name=&quot;someName&quot;</code> was missing. When you have two similar controls for instance <strong>v-autocomplete</strong> then fields with the same name will conflict with each other, so in order to resolve that you can use <code>data-vv-name=&quot;someName&quot;</code>.\nExample is given below:</p>\n<pre><code> &lt;v-autocomplete\n          v-model=&quot;id&quot;\n          :items=&quot;items&quot;\n          :label=&quot;$t('scheduling.fields.truck-id')&quot;\n          :placeholder=&quot;$t('common.words.none')&quot;\n          readonly\n          :disabled=&quot;!canEdit&quot;\n          :append-icon=&quot;''&quot;&gt;\n &lt;/v-autocomplete&gt;`\n\n &lt;v-autocomplete\n          v-model=&quot;id2&quot;\n          :items=&quot;items2&quot;\n          :label=&quot;label2&quot;\n          :placeholder=&quot;$t('common.words.none')&quot;\n          readonly\n          data-vv-name=&quot;someName&quot;\n          :disabled=&quot;!canEdit&quot;\n          :append-icon=&quot;''&quot;&gt;\n &lt;/v-autocomplete&gt;`\n</code></pre>\n<p><a href=\"https://vee-validate.logaretm.com/v2/examples/scopes.html\" rel=\"nofollow noreferrer\">Reference</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5152735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c6Amu.jpg?s=128&g=1", "display_name": "Matthew Moss", "link": "https://stackoverflow.com/users/5152735/matthew-moss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5226, "favorite_count": 1, "accepted_answer_id": 52986118, "answer_count": 3, "score": 3, "last_activity_date": 1616137576, "creation_date": 1540381842, "question_id": 52968276, "link": "https://stackoverflow.com/questions/52968276/veevalidate-attach-method-a-field-is-missing-a-name-or-data-vv-name-attribu", "title": "VeeValidate attach method: A field is missing a &quot;name&quot; or &quot;data-vv-name&quot; attribute when fields do have name", "body": "<p>I have a parent component rendering a personal details component and am injecting the parent's validator scope. if I use the <code>v-validate</code> directive and <code>this.$validator.validateAll()</code> or <code>this.$validator.validate('field_name')</code> this works fine.</p>\n\n<p>However, I need to validate some fields independently, but when using <code>this.$validator.attach('first_name', 'required')</code> for example I am getting the following warning <code>[vee-validate] A field is missing a \"name\" or \"data-vv-name\" attribute</code>. I have tried moving the call to attach the validators into the click handler, in case the input element isn't fully rendered when calling it from <code>mounted()</code> but still get the same problem. I have also tried both <code>name</code> or <code>data-vv-name</code> attributes independently.</p>\n\n<p>Parent.ts</p>\n\n<pre><code>import { Vue, Component } from 'vue-property-decorator';\n\nimport PersonalDetailsComponent from './PersonalDetails';\n\n@Component({\n    template: `\n        &lt;div class=\"container\"&gt;\n            &lt;personal-details-component&gt;&lt;/personal-details-component&gt;\n\n            &lt;div class=\"row\"&gt;\n                    &lt;Button :onClick=\"handleButtonClick\" :buttonText=\"'Validate'\"&gt;&lt;/Button&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    `,\n    components: {\n        PersonalDetailsComponent,\n    },\n    $_veeValidate: {validator: 'new'}\n})\nexport default class ClaimComponent extends Vue {\n\n    mounted() {\n        this.attachValidators();\n    }\n\n    handleButtonClick() {\n        this.$validator.validateAll();\n    }\n\n    attachValidators() {\n        console.log(document.getElementsByName('first_name')); // Finds the element\n\n        this.$validator.attach('first_name', 'required');\n        this.$validator.attach('surname', 'required');\n        this.$validator.attach('email', 'required');\n    }\n\n}\n</code></pre>\n\n<p>PersonalDetails.ts</p>\n\n<pre><code>import {Vue, Component, Inject} from 'vue-property-decorator';\n\nimport {Validator} from 'vee-validate';\n\n@Component({\n    template: `\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-12\"&gt;\n            &lt;form class=\"material-form\"&gt;\n                &lt;div class=\"group w-third\"&gt;\n                    &lt;input v-model=\"first_name\" type=\"text\" name=\"first_name\" required&gt;\n                    &lt;span class=\"highlight\"&gt;&lt;/span&gt;\n                    &lt;span class=\"bar\"&gt;&lt;/span&gt;\n                    &lt;label&gt;First name&lt;/label&gt;\n                    &lt;span class=\"form-text error-text\"&gt;{{ errors.first('first_name') }}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class=\"group w-third\"&gt;\n                    &lt;input v-model=\"surname\" type=\"text\" name=\"surname\" required&gt;\n                    &lt;span class=\"highlight\"&gt;&lt;/span&gt;\n                    &lt;span class=\"bar\"&gt;&lt;/span&gt;\n                    &lt;label&gt;Surname&lt;/label&gt;\n                    &lt;span class=\"form-text error-text\"&gt;{{ errors.first('surname') }}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class=\"group w-third\"&gt;\n                    &lt;input v-model=\"email\" type=\"text\" name=\"email\" required&gt;\n                    &lt;span class=\"highlight\"&gt;&lt;/span&gt;\n                    &lt;span class=\"bar\"&gt;&lt;/span&gt;\n                    &lt;label&gt;Email address&lt;/label&gt;\n                    &lt;span class=\"form-text error-text\"&gt;{{ errors.first('email') }}&lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    `\n})\nexport default class PersonalDetailsComponent extends Vue {\n    @Inject('$validator') public $validator!: Validator;\n\n    first_name: string = '';\n    surname: string = '';\n    email: string = '';\n\n}\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 1, "creation_date": 1540382218, "post_id": 52968285, "comment_id": 92842964, "body": "Interesting. I am curious about source of this solution (I want to read it). Is this an official approach?"}, {"owner": {"reputation": 662, "user_id": 836640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2a625ac62e10325d46a96ed5348cf338?s=128&d=identicon&r=PG", "display_name": "Marcus Krahl", "link": "https://stackoverflow.com/users/836640/marcus-krahl"}, "reply_to_user": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 2, "creation_date": 1540382334, "post_id": 52968285, "comment_id": 92843044, "body": "<a href=\"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#merging-interfaces\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/&hellip;</a> it is right in the typescript documentation although for a special case which at first did not seem to map to my problem (see the observable section)"}, {"owner": {"reputation": 1329, "user_id": 1087372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20523b3caa864e4d0f16dd681187c728?s=128&d=identicon&r=PG", "display_name": "SanBen", "link": "https://stackoverflow.com/users/1087372/sanben"}, "edited": false, "score": 0, "creation_date": 1580222942, "post_id": 52968285, "comment_id": 106022244, "body": "The documentation is now available under &#39;Module Augmentation&#39; --&gt; <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/&hellip;</a>"}], "tags": [], "owner": {"reputation": 662, "user_id": 836640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2a625ac62e10325d46a96ed5348cf338?s=128&d=identicon&r=PG", "display_name": "Marcus Krahl", "link": "https://stackoverflow.com/users/836640/marcus-krahl"}, "is_accepted": true, "score": 4, "last_activity_date": 1540381867, "creation_date": 1540381867, "answer_id": 52968285, "question_id": 52968047, "link": "https://stackoverflow.com/questions/52968047/merge-typescript-interface-and-class-in-different-files/52968285#52968285", "title": "Merge Typescript interface and class in different files", "body": "<p>The solution to this problem is to redeclare the \"hosting\" typescript module to augment its definition: </p>\n\n<pre><code>//test.interface.ts\ndeclare module './test.class.ts' {\n  interface Test {\n    example(input: 'a number'): number;\n    example(input: 'a string'): string;\n  }\n}\n\n//test.class.ts\nimport \"./test.interface.ts\";\n\nclass Test {\n  example(input: string): any {\n    //return something\n  }\n}\n\nconst obj = new Test();\nobj.example('a number'); //return type is number\nobj.example('a string'); //return type is string\nobj.example('something else'); //return type is any\n</code></pre>\n"}], "owner": {"reputation": 662, "user_id": 836640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2a625ac62e10325d46a96ed5348cf338?s=128&d=identicon&r=PG", "display_name": "Marcus Krahl", "link": "https://stackoverflow.com/users/836640/marcus-krahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1714, "favorite_count": 1, "accepted_answer_id": 52968285, "answer_count": 1, "score": 2, "last_activity_date": 1540381867, "creation_date": 1540381160, "last_edit_date": 1540381563, "question_id": 52968047, "link": "https://stackoverflow.com/questions/52968047/merge-typescript-interface-and-class-in-different-files", "title": "Merge Typescript interface and class in different files", "body": "<p>In Typescript it is possible to merge an interface and a class if they have the same name and are in the same file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Test {\n  example(input: 'a number'): number;\n  example(input: 'a string'): string;\n}\n\nclass Test {\n  example(input: string): any {\n    //return something\n  }\n}\n\nconst obj = new Test();\nobj.example('a number'); //return type is number\nobj.example('a string'); //return type is string\nobj.example('something else'); //return type is any\n</code></pre>\n\n<p>However there does not seem to be a way to split these interface definitions into multiple files, e.g.:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>//test.interface.ts\nexport interface Test {\n  example(input: 'a number'): number;\n  example(input: 'a string'): string;\n}\n\n//test.class.ts\nimport \"./test.interface.ts\";\n\nclass Test {\n  example(input: string): any {\n    //return something\n  }\n}\n\nconst obj = new Test();\nobj.example('a number'); //return type is any but should be number\nobj.example('a string'); //return type is any but should be string\nobj.example('something else'); //return type is any\n</code></pre>\n\n<p>What is the correct way to split such an interface definition between a class and an actual interface into multiple files?</p>\n"}, {"tags": ["angular", "typescript", "angular6"], "comments": [{"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540381332, "post_id": 52967994, "comment_id": 92842383, "body": "Can you also post the code you use to change the user? if you just change it by reference, this will not work which is why I need to see the code (the one you trigger on button click, the &quot;updateUser&quot; method)"}, {"owner": {"reputation": 3222, "user_id": 3922727, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e0e83df5f937a2157f15827e97fe5215?s=128&d=identicon&r=PG&f=1", "display_name": "alim1990", "link": "https://stackoverflow.com/users/3922727/alim1990"}, "reply_to_user": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540381396, "post_id": 52967994, "comment_id": 92842429, "body": "Okay give me 2 minutes."}, {"owner": {"reputation": 3222, "user_id": 3922727, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e0e83df5f937a2157f15827e97fe5215?s=128&d=identicon&r=PG&f=1", "display_name": "alim1990", "link": "https://stackoverflow.com/users/3922727/alim1990"}, "reply_to_user": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540381505, "post_id": 52967994, "comment_id": 92842492, "body": "@pascalpuetz you can check the button script now."}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540381868, "post_id": 52967994, "comment_id": 92842715, "body": "Where do you change the user in getUsersArray? There is no code where you reflect the change back to the array. I expected that to happen in updateUser but it seems you&#39;re just calling a service there."}, {"owner": {"reputation": 3222, "user_id": 3922727, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e0e83df5f937a2157f15827e97fe5215?s=128&d=identicon&r=PG&f=1", "display_name": "alim1990", "link": "https://stackoverflow.com/users/3922727/alim1990"}, "reply_to_user": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540382048, "post_id": 52967994, "comment_id": 92842835, "body": "<code>getUsersArray</code> is a simple array that we iterate over to display data sent from server using <code>*ngFor</code>"}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540382194, "post_id": 52967994, "comment_id": 92842944, "body": "Yep, and that array needs to be changed if you change the user. Usually you&#39;d do that by using a formArray containing the formControls and don&#39;t mix them. That&#39;s why I was asking where you reflect the changes in your array when a user changes (you&#39;re binding to the array via [value]=&quot;users.role_type&quot;)"}, {"owner": {"reputation": 3222, "user_id": 3922727, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e0e83df5f937a2157f15827e97fe5215?s=128&d=identicon&r=PG&f=1", "display_name": "alim1990", "link": "https://stackoverflow.com/users/3922727/alim1990"}, "reply_to_user": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540382361, "post_id": 52967994, "comment_id": 92843058, "body": "how to use form arrays without mixing them"}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1540382436, "post_id": 52967994, "comment_id": 92843098, "body": "<a href=\"https://angular.io/guide/reactive-forms#dynamic-controls-using-form-arrays\" rel=\"nofollow noreferrer\">angular.io/guide/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5942, "user_id": 757391, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e9ceced45a5080f99c783ef93a8229f?s=128&d=identicon&r=PG", "display_name": "Ludevik", "link": "https://stackoverflow.com/users/757391/ludevik"}, "is_accepted": false, "score": 3, "last_activity_date": 1540382050, "creation_date": 1540382050, "answer_id": 52968365, "question_id": 52967994, "link": "https://stackoverflow.com/questions/52967994/angular-6-cannot-get-the-new-value-typed-inside-an-input-displaying-data-from-ng/52968365#52968365", "title": "Angular 6 cannot get the new value typed inside an input displaying data from ngFor loop data", "body": "<p>You should not bind <code>[value]=\"users.role_type\"</code> to the input when using reactive forms. Use just <code>formControlName</code> and set the value when creating the <code>FormControl</code>.</p>\n\n<p>In your <code>formGroup</code> you should have a <code>FormArray</code> and create edit_role_type <code>FormControl</code> for each user in your array.</p>\n\n<p>When using reactive forms the model used to prefill the data is not two way bound. Users array will not be changed when input value changes. Instead in your update click handler you should get the data from form: <code>this.formGroup.value</code> and update your users based on the form data.</p>\n\n<p>Or you can drop reactive forms and use model driven forms and use two way binding through <code>[(ngModel)]</code>.</p>\n"}], "owner": {"reputation": 3222, "user_id": 3922727, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e0e83df5f937a2157f15827e97fe5215?s=128&d=identicon&r=PG&f=1", "display_name": "alim1990", "link": "https://stackoverflow.com/users/3922727/alim1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540382050, "creation_date": 1540381010, "last_edit_date": 1540381482, "question_id": 52967994, "link": "https://stackoverflow.com/questions/52967994/angular-6-cannot-get-the-new-value-typed-inside-an-input-displaying-data-from-ng", "title": "Angular 6 cannot get the new value typed inside an input displaying data from ngFor loop data", "body": "<p>I am getting data and display it inside an input of a reactive form:</p>\n\n<pre><code>&lt;div *ngFor=\"let users of getUsersArray; let i = index;\"&gt;\n    &lt;mat-form-field&gt;\n        &lt;input matInput color=\"warn\" \n        [value]=\"users.role_type\" \n        formControlName=\"edit_role_type\" placeholder=\"Role Type\"&gt;\n    &lt;/mat-form-field&gt;&amp;nbsp;\n&lt;/div&gt;\n</code></pre>\n\n<p>This form control is created inside a reactive form:</p>\n\n<pre><code>'edit_role_type': new FormControl({value:'', disabled: true}, Validators.required),\n</code></pre>\n\n<p>I have an update button, so if a user wants to update the field with new data:</p>\n\n<pre><code>&lt;button mat-raised-button color=\"warn\" \n    (click)=\"updateUser(users)\" [disabled]=\"formGroup4.valid\"&gt;\n    &lt;mat-icon&gt;update&lt;/mat-icon&gt; Update Data\n&lt;/button&gt;\n</code></pre>\n\n<p>If I console the value of <code>users</code> on update button click, I can see the data generated from the <code>*ngFor</code>.</p>\n\n<p>If I changed the value and console it, I only see the old values and the new typed one isn't displayed.</p>\n\n<p>Here is the update button script:</p>\n\n<pre><code>updateUser(users){\n    console.log(users)\n    let email = this.formGroup4.controls['edit_user_email'].value;\n    if(this.formGroup4.get('edit_user_password').hasError('minLength'))\n    {\n         //Password error\n    }\n   else if(email!='' &amp;&amp; !email.endsWith('@test.org'))\n   {\n        //return email error\n   }\n   else\n  {\n      this.auth.updateUserData(users).subscribe(\n        (data)=&gt;{\n\n        },\n        (error)=&gt;{\n          console.log(error)\n        }\n      );\n    }\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "webstorm", "jetbrains-ide", "angular7"], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "edited": false, "score": 0, "creation_date": 1540386270, "post_id": 52968713, "comment_id": 92845761, "body": "thanks, I didn&#39;t notice this. Disabling angular language service works for now"}, {"owner": {"reputation": 2251, "user_id": 3872998, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pCtVV.jpg?s=128&g=1", "display_name": "Sampgun", "link": "https://stackoverflow.com/users/3872998/sampgun"}, "edited": false, "score": 0, "creation_date": 1549982035, "post_id": 52968713, "comment_id": 96096270, "body": "Worked for me. Bundled typescript is v3.0.1, while in project I have v3.2.4"}, {"owner": {"reputation": 402, "user_id": 2024228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/946856a340bbb6952c647dba319f9eda?s=128&d=identicon&r=PG", "display_name": "Raid", "link": "https://stackoverflow.com/users/2024228/raid"}, "edited": false, "score": 1, "creation_date": 1550121475, "post_id": 52968713, "comment_id": 96155740, "body": "Thank you, sir. You turned my sadness into relief."}], "tags": [], "owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "is_accepted": true, "score": 22, "last_activity_date": 1540383119, "creation_date": 1540383119, "answer_id": 52968713, "question_id": 52967980, "link": "https://stackoverflow.com/questions/52967980/typescript-initialization-error-in-webstorm-after-update-to-angular-7/52968713#52968713", "title": "TypeScript - Initialization error in WebStorm after update to Angular 7", "body": "<p><a href=\"https://youtrack.jetbrains.com/issue/WEB-34463\" rel=\"noreferrer\">WEB-34463</a> is fixed in <a href=\"https://www.jetbrains.com/webstorm/eap/\" rel=\"noreferrer\">2018.3 EAP</a>, fix is <em>not</em> available in 2018.2.5.</p>\n\n<p>As a workaround, try changing Typescript version to <em>Bundled</em> in <strong>Settings | Languages &amp; Frameworks | TypeScript</strong>, or disable Angular language service there</p>\n"}], "owner": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5070, "favorite_count": 1, "accepted_answer_id": 52968713, "answer_count": 1, "score": 4, "last_activity_date": 1541923159, "creation_date": 1540380965, "last_edit_date": 1541923159, "question_id": 52967980, "link": "https://stackoverflow.com/questions/52967980/typescript-initialization-error-in-webstorm-after-update-to-angular-7", "title": "TypeScript - Initialization error in WebStorm after update to Angular 7", "body": "<p>I am using WebStorm (version 2018.2.5) for developing my Angular application.\nAfter updating to Angular 7, I always get the following error in the TypeScript window of WebStorm:</p>\n\n<pre><code>Error:Initialization error (angular 2 language service). Cannot read property 'CommandTypes' of undefined\n</code></pre>\n\n<p>After research I found this tracked issue from JetBrains and it says it is fixed with version 2018.2.3.<a href=\"https://youtrack.jetbrains.com/issue/WEB-34463\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p><br>\nSo I shouldn't get this error anymore? But it is still there..\nMy app still can compile and run commands like <code>ng serve</code> so my application runs anyway correctly.</p>\n\n<p>Anyone has an idea how to get rid of this error? Is this error JetBrains WebStorm related?</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540383130, "post_id": 52967906, "comment_id": 92843537, "body": "What version of react and react definitions are you using ?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540387222, "post_id": 52967906, "comment_id": 92846410, "body": "I think it might be a bug, if I declare <code>declare const Button: React.ComponentClass&lt;Props&gt; &amp; { defaultProps: typeof defaultProps }</code> it works, if I declare <code>declare const Button: React.StatelessComponent&lt;Props&gt; &amp; { defaultProps: typeof defaultProps }</code> it does not work, I would expect defaultprops to be picked up in both casses"}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540387769, "post_id": 52967906, "comment_id": 92846775, "body": "For a direct usage <code>&lt;Button&#47;&gt;</code>, the stateless component is working for me using the current <code>master</code> of TypeScript, so the bug seems to have been fixed.  However, the <code>inject</code> HOC may not be using <code>JSX.LibraryManagedAttributes</code>; I haven&#39;t looked into that yet."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540388965, "post_id": 52967906, "comment_id": 92847646, "body": "@MattMcCutchen it&#39;s a bug fixed in 3.2 does not work on 3.1 .."}, {"owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "edited": false, "score": 0, "creation_date": 1540389140, "post_id": 52967906, "comment_id": 92847786, "body": "Oops, duplicate work again.  I&#39;d like a better way to avoid it on Stack Overflow, but my sense is that trying to bring it up on meta won&#39;t be worth my energy."}], "answers": [{"comments": [{"owner": {"reputation": 6596, "user_id": 1409674, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c8efcd23d64202e3667226982609dc5?s=128&d=identicon&r=PG", "display_name": "Tomek Buszewski", "link": "https://stackoverflow.com/users/1409674/tomek-buszewski"}, "edited": false, "score": 0, "creation_date": 1540448346, "post_id": 52970717, "comment_id": 92870933, "body": "Thanks Titian! But do I really have to include definition of <code>children</code>? Shouldn&#39;t this be inherited/extended from somewhere? Seems kinda tedious."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 6596, "user_id": 1409674, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c8efcd23d64202e3667226982609dc5?s=128&d=identicon&r=PG", "display_name": "Tomek Buszewski", "link": "https://stackoverflow.com/users/1409674/tomek-buszewski"}, "edited": false, "score": 0, "creation_date": 1540452655, "post_id": 52970717, "comment_id": 92873097, "body": "@TomekBuszewski The usual way is to use as you have the type directly on  the variable <code>const Button: React.StatelessComponent&lt;Props&gt;</code>. You could easily create a helper type <code>type StatelessComponentArgs&lt;T&gt; = T &amp; { children?: React.ReactNode }</code> and use that as an argument. I&#39;ll edit the answer to and this."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1540452694, "last_edit_date": 1540452694, "creation_date": 1540388944, "answer_id": 52970717, "question_id": 52967906, "link": "https://stackoverflow.com/questions/52967906/typescript-doesnt-see-defaultprops-for-functional-components/52970717#52970717", "title": "TypeScript doesn&#39;t see defaultProps for functional components", "body": "<p>This is a <a href=\"https://github.com/Microsoft/TypeScript/issues/27425\" rel=\"nofollow noreferrer\">bug</a> on 3.1. The code below works on 3.2 (at moment unreleased, you can install using <code>npm install typescript@next</code></p>\n\n<pre><code>interface Props {\n  onClick: () =&gt; void;\n  disabled: boolean;\n  classes: string;\n  color: string;\n}\ntype StatelessComponentArgs&lt;T&gt; = T &amp; { children?: React.ReactNode } // reusable type for the arguments of a stateless compontent\nconst Button = (props: StatelessComponentArgs&lt;Props&gt;): React.ReactElement&lt;any&gt; =&gt; {\n  const { children, onClick, classes, disabled, color } = props;\n\n  return (\n    &lt;button onClick={onClick} disabled={disabled} &gt;\n      {children}\n    &lt;/button&gt;\n  );\n};\n\nButton.defaultProps = {\n  color: \"Red\",\n  disabled: false,\n  onClick: () =&gt; false,\n};\n\nlet d = &lt;Button classes=\"\" color=\"\" onClick={() =&gt; { }} disabled={false}&gt;&lt;/Button&gt;\nlet d3 = &lt;Button classes=\"\" color=\"\" onClick={() =&gt; { }} &gt;&lt;/Button&gt;\n</code></pre>\n\n<p>There is also an issue with your code. If you explicitly type <code>Button</code> as a <code>React.StatelessComponent&lt;Props&gt;</code> <code>defaultProps</code> will implicitly be <code>Partial&lt;Props&gt;</code> regardless of what you assign to it. You need to let the compiler infer the type of <code>defaultProps</code> as in the sample above. </p>\n"}, {"tags": [], "owner": {"reputation": 22363, "user_id": 4468617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09c08e1ae93a83e9102b6715fc75b4c?s=128&d=identicon&r=PG", "display_name": "Matt McCutchen", "link": "https://stackoverflow.com/users/4468617/matt-mccutchen"}, "is_accepted": false, "score": 1, "last_activity_date": 1540388964, "creation_date": 1540388964, "answer_id": 52970721, "question_id": 52967906, "link": "https://stackoverflow.com/questions/52967906/typescript-doesnt-see-defaultprops-for-functional-components/52970721#52970721", "title": "TypeScript doesn&#39;t see defaultProps for functional components", "body": "<p>In order for the <code>defaultProps</code> to work, the actual type of your <code>defaultProps</code> object has to be present on the the type of <code>Button</code>.  Since TypeScript 3.1, <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#properties-declarations-on-functions\" rel=\"nofollow noreferrer\">you can declare a function and assign to its properties</a> and the assigned properties will be automatically added to the function's type, <em>unless</em> you have already annotated a type for the function, as you have.  If I remove the type annotation and then make the necessary changes for the code to work (specify the type of the <code>props</code> parameter and add a type assertion to the default <code>color</code> to stop it from widening), then I'm able to call the component successfully:</p>\n\n<pre><code>const Button = (props: Props &amp; { children?: React.ReactNode }): React.ReactElement&lt;any&gt; =&gt; {\n  const { children, onClick, classes, disabled, color } = props;\n\n  return (\n    &lt;button onClick={onClick} disabled={disabled} className={[classes.Main, classes[color]].join(\" \")}&gt;\n      {children}\n    &lt;/button&gt;\n  );\n};\nButton.defaultProps = {\n  color: \"Red\" as Colors,\n  disabled: false,\n  onClick: () =&gt; false,\n};\n\nconst WrappedButton = inject(styles)(Button);\n&lt;WrappedButton/&gt;;\n</code></pre>\n\n<p>An alternative to removing the type annotation is to use a custom interface that includes the type of your <code>defaultProps</code> object, as I believe Titian Cernicova-Dragomir was thinking:</p>\n\n<pre><code>interface Props {\n  onClick: () =&gt; void;\n  disabled: boolean;\n  classes: JSS.Classes;\n  color: Colors;\n  // Something is broken with `inject` without this.\n  children?: React.ReactNode;\n}\n\nconst buttonDefaultProps = {\n  color: \"Red\" as Colors,\n  disabled: false,\n  onClick: () =&gt; false,\n};\ninterface ButtonSFC extends React.SFC&lt;Props&gt; {\n  defaultProps: typeof buttonDefaultProps;\n}\n\nconst Button: ButtonSFC = (props): React.ReactElement&lt;any&gt; =&gt; {\n  const { children, onClick, classes, disabled, color } = props;\n\n  return (\n    &lt;button onClick={onClick} disabled={disabled} className={[classes.Main, classes[color]].join(\" \")}&gt;\n      {children}\n    &lt;/button&gt;\n  );\n};\nButton.defaultProps = buttonDefaultProps;\n\nconst WrappedButton = inject(styles)(Button);\n&lt;WrappedButton/&gt;;\n</code></pre>\n\n<p>Note that <code>&lt;Button/&gt;</code> gives an error in TypeScript 3.1: it seems that the <code>defaultProps</code> are not being honored for stateless function components.  In the current <code>master</code> version of TypeScript, this problem no longer occurs (so I don't think it's worth investigating) (edit: Titian Cernicova-Dragomir's answer has the link to the bug report), but there's a different problem: <code>&lt;WrappedButton/&gt;</code> gives an error because support for calling <code>React.ComponentType</code> has been <a href=\"https://github.com/Microsoft/TypeScript/issues/27948\" rel=\"nofollow noreferrer\">temporarily removed</a>.  Work on a fix for that is in progress.  Hopefully, for the moment, as long as you don't need to call <code>Button</code> directly, you can stay on TypeScript 3.1.</p>\n"}], "owner": {"reputation": 6596, "user_id": 1409674, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c8efcd23d64202e3667226982609dc5?s=128&d=identicon&r=PG", "display_name": "Tomek Buszewski", "link": "https://stackoverflow.com/users/1409674/tomek-buszewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2642, "favorite_count": 0, "accepted_answer_id": 52970717, "answer_count": 2, "score": 1, "last_activity_date": 1540452694, "creation_date": 1540380749, "question_id": 52967906, "link": "https://stackoverflow.com/questions/52967906/typescript-doesnt-see-defaultprops-for-functional-components", "title": "TypeScript doesn&#39;t see defaultProps for functional components", "body": "<p>I know this problem has been tackled in here, but I can't seem to find a solution that would help me.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>import * as React from \"react\";\nimport inject from \"react-jss\";\n\nimport styles from \"./index.styles\";\n\nimport * as JSS from \"jss\";\n\ntype Colors = \"Red\" | \"White\";\n\ninterface Props {\n  onClick: () =&gt; void;\n  disabled: boolean;\n  classes: JSS.Classes;\n  color: Colors;\n}\n\nconst Button: React.StatelessComponent&lt;Props&gt; = (props): React.ReactElement&lt;any&gt; =&gt; {\n  const { children, onClick, classes, disabled, color } = props;\n\n  return (\n    &lt;button onClick={onClick} disabled={disabled} className={[classes.Main, classes[color]].join(\" \")}&gt;\n      {children}\n    &lt;/button&gt;\n  );\n};\n\nButton.defaultProps = {\n  color: \"Red\",\n  disabled: false,\n  onClick: () =&gt; false,\n};\n\nexport default inject(styles)(Button);\n</code></pre>\n\n<p>All seems good, but when I use this component without either <code>color</code> or <code>onClick</code> props, I am getting an error:</p>\n\n<blockquote>\n  <p>Error:(14, 8) TS2322: Type '{ children: string; onClick: () => void;\n  disabled: boolean; }' is not assignable to type 'Pick'.   Property 'color' is missing in type '{ children:\n  string; onClick: () => void; disabled: boolean; }'.</p>\n</blockquote>\n\n<p>What can I do? I'm on TS3.1.1.</p>\n"}, {"tags": ["javascript", "typescript", "angular6"], "comments": [{"owner": {"reputation": 345, "user_id": 3274282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zv43v.png?s=128&g=1", "display_name": "L.A", "link": "https://stackoverflow.com/users/3274282/l-a"}, "edited": false, "score": 1, "creation_date": 1540389596, "post_id": 52967816, "comment_id": 92848119, "body": "listeing for document:click in a hostListener is the way to go like here <a href=\"https://stackoverflow.com/questions/40107008/detect-click-outside-angular-component\" title=\"detect click outside angular component\">stackoverflow.com/questions/40107008/&hellip;</a>"}, {"owner": {"reputation": 3128, "user_id": 2347438, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QbHt6.png?s=128&g=1", "display_name": "Veshraj Joshi", "link": "https://stackoverflow.com/users/2347438/veshraj-joshi"}, "reply_to_user": {"reputation": 345, "user_id": 3274282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zv43v.png?s=128&g=1", "display_name": "L.A", "link": "https://stackoverflow.com/users/3274282/l-a"}, "edited": false, "score": 0, "creation_date": 1540451197, "post_id": 52967816, "comment_id": 92872297, "body": "thanks @L.A that works fine with little twist"}], "owner": {"reputation": 3128, "user_id": 2347438, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QbHt6.png?s=128&g=1", "display_name": "Veshraj Joshi", "link": "https://stackoverflow.com/users/2347438/veshraj-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540380979, "creation_date": 1540380482, "last_edit_date": 1540380979, "question_id": 52967816, "link": "https://stackoverflow.com/questions/52967816/getattribute-function-gives-an-error-of-property-getattribute-does-not-exis", "title": "getAttribute() function gives an error of &quot;Property &#39;getAttribute&#39; does not exist on type &#39;EventTarget&#39;&quot; in angular js", "body": "<p>I am working in header part where I need to make open and close function of menu using Angular6.</p>\n\n<p>I could not find any way to fire an function on click event occurred somewhere else but not on some component. So I dicided to make such function with javascript inside angular js. I have following code to do so.  </p>\n\n<pre><code>export class HeaderComponent implements OnInit, AfterViewInit {\n  menus : any;\n  activeLang : string;\n  // flag for menu closed or not\n  isMenuClosed : any;\n\n  constructor(private router : Router) { \n    this.isMenuClosed = true;\n    // assign this object to newInstance so that it can be used inside javascript function\n    let newInstance = this;\n    // function whenever click event occured\n    document.addEventListener(\"click\", function(event){\n      // check if event.target.getAttribute('class') is true of not\n      // unfortunetly this line shows error event.target.getAttribute property doesnot exists ... \n      // getAttribute is not property its function\n      // I also try (event.target as HTMLInputElement).getAttribute()\n      if(!!event.target.getAttribute('class'))\n      {\n        let eventClass = event.target.getAttribute('class');\n        // confirm if click has been occured out of menu\n        if(!eventClass.includes(\"ti-close\") &amp;&amp; \n           !eventClass.includes(\"nav-toggler\") &amp;&amp;\n           !eventClass.includes(\"left-sidebar\") &amp;&amp; \n           !eventClass.includes(\"scroll-sidebar\") &amp;&amp;\n           !eventClass.includes(\"sidebar-nav\") &amp;&amp; \n           !eventClass.includes(\"sidebarnav\"))\n        {\n          newInstance.hideSideBar();\n        }\n      }\n      else\n      {\n        newInstance.hideSideBar();\n      }\n    });\n\n    hideSideBar()\n    {\n      let classString = document.getElementsByTagName('body')[0].getAttribute('class');\n      classString =  classString.replace(\" show-sidebar\",\"\");\n      document.getElementsByTagName('body')[0].setAttribute('class',classString);\n      this.isMenuClosed = true;\n    }\n}\n</code></pre>\n\n<p>This is working perfect if server is not started but got error whenever  <code>ng serve -o</code> command has been fired and whole thing stuck in saying error. In terminal it shows  <code>error TS2339: Property 'getAttribute' does not exist on type 'EventTarget'</code></p>\n\n<p>I tried <code>try{}catch(e){}</code>, <code>(event.target as HTMLInputElement).getAttribute('class')</code>,<code>event.target.hasOwnProperty('getAttribute')</code> nothing worked. What's the problem there.</p>\n\n<p>Is there any other way to get the functionality.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1540379749, "post_id": 52967521, "comment_id": 92841350, "body": "You don&#39;t. That&#39;s not the purpose of a single page application : if you have to load your JS dynamically, consider using languages such as PHP."}], "answers": [{"tags": [], "owner": {"reputation": 4046, "user_id": 571156, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/EIukk.jpg?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/571156/vivek-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1540380877, "last_edit_date": 1540380877, "creation_date": 1540380432, "answer_id": 52967803, "question_id": 52967521, "link": "https://stackoverflow.com/questions/52967521/how-to-add-script-tags-dynamically-in-index-html-page-of-the-angular-5-project/52967803#52967803", "title": "How to add script tags dynamically in index.html page of the angular 5+ project?", "body": "<p>I don't know your exact use case. But sometimes we need to load some script which is required in some workflows ONLY, instead of downloading unnecessarily. </p>\n\n<p>For example \nI have a banking app and I need to load payment-gateway SDK only in a few scenarios. So whenever that part of the code is executed than at that time I used the javascript function</p>\n\n<pre><code>_loadScript(scriptSrcUrl, onLoadSuccessCallback, onErrorCallback) {\n  if (scriptSrcUrl)\n    if (document.querySelector('script[src=\"' + scriptSrcUrl + '\"]')) {\n      onLoadSuccessCallback();\n    } else {\n      var a = document.createElement('script');\n      a.setAttribute('async', ''),\n        (a.src = scriptSrcUrl),\n        onLoadSuccessCallback &amp;&amp; (a.onload = onLoadSuccessCallback),\n        onErrorCallback &amp;&amp; (a.onerror = onErrorCallback),\n        document.head.appendChild(a);\n    }\n}\n\n_scriptLoaded(result) {\n    if(result) {\n        // use the script\n    } else {\n        // handleError\n    }\n}\n\n\nlazyLoadScriptsInDom() {\n    this._loadScript(\n        \"https://checkout.razorpay.com/v1/checkout.js\",\n        this._scriptLoaded.bind(this, !0),\n        this._scriptLoaded.bind(this, !1)\n    );\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9050653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cd3k.jpg?s=128&g=1", "display_name": "Bishnu Kumar Bhakat", "link": "https://stackoverflow.com/users/9050653/bishnu-kumar-bhakat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1540380877, "creation_date": 1540379630, "question_id": 52967521, "link": "https://stackoverflow.com/questions/52967521/how-to-add-script-tags-dynamically-in-index-html-page-of-the-angular-5-project", "title": "How to add script tags dynamically in index.html page of the angular 5+ project?", "body": "<p>Where I can add any script tags dynamically, by getting server side response. </p>\n"}, {"tags": ["javascript", "angular", "typescript", "http", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 1386, "user_id": 1794058, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/624fc33c8075a5f5315323eed98432e2?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/1794058/ritesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1540379835, "creation_date": 1540379835, "answer_id": 52967586, "question_id": 52967510, "link": "https://stackoverflow.com/questions/52967510/handling-multiple-http-responses-one-by-one-in-angular-6/52967586#52967586", "title": "Handling multiple http responses one by one in Angular 6", "body": "<p>You can use Observable's zip operator where in you can zip all our 15 API call and get the response in an array in the order they were zipped. </p>\n\n<p>More on zip operator: <a href=\"https://www.learnrxjs.io/operators/combination/zip.html\" rel=\"nofollow noreferrer\">https://www.learnrxjs.io/operators/combination/zip.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540381185, "post_id": 52967611, "comment_id": 92842290, "body": "So i should return something like this :     Observable.forkJoin(calls).subscribe(responses =&gt; {...});  But honestly, i don&#39;t really know what should i put between the curly brackets :/"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1540381571, "post_id": 52967611, "comment_id": 92842528, "body": "I think async/await is easter , +1 forkJoin"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540381748, "post_id": 52967611, "comment_id": 92842647, "body": "@ims16 you should put what you want to do once the requests have been made. For instance, <code>console.log(&#39;Requests made&#39;);</code> would be a good start !"}, {"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540381826, "post_id": 52967611, "comment_id": 92842686, "body": "Ah! it was obvious, thanks for your help, i&#39;ll try this :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1540381899, "post_id": 52967611, "comment_id": 92842733, "body": "@malbarmawi Promises are fine, but snice RxJs is natively used by Angular and is way more powerful than promises, I think that you should take advantage of it. Personal opinion, but I think it&#39;s a good practice to do so !"}, {"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540385100, "post_id": 52967611, "comment_id": 92844848, "body": "@trichetriche Last question please : i have a little problem when i loop on the result.  `                for (let i = 0; i &lt; res.length; i++) {                     console.log(i);                     return res[i].json();                 }`  The code run only for the first value, and i want him to loop 15 times, i know that the problem is the return, but i don&#39;t really know how to fix it. Thanks"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1540385193, "post_id": 52967611, "comment_id": 92844933, "body": "Depends on what you want to do, but yes, simply remove the return and replace it with another console log if you want to see the response"}, {"owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "edited": false, "score": 0, "creation_date": 1540385289, "post_id": 52967611, "comment_id": 92845001, "body": "@trichetriche i want to return the values one by one and catch them in the component. Actually, i&#39;m getting only the first item, but not the others"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 1, "creation_date": 1540385420, "post_id": 52967611, "comment_id": 92845118, "body": "Give them to a variable then ! <code>this.responses = responses</code>, you can do whatever you want with it"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": true, "score": 2, "last_activity_date": 1540379910, "creation_date": 1540379910, "answer_id": 52967611, "question_id": 52967510, "link": "https://stackoverflow.com/questions/52967510/handling-multiple-http-responses-one-by-one-in-angular-6/52967611#52967611", "title": "Handling multiple http responses one by one in Angular 6", "body": "<p>Try this : </p>\n\n<pre><code>findOneByOne() {\n  const calls = this.getCardsPath().map(el =&gt; this.getPromises(el));\n  forkJoin(calls).subscribe(responses =&gt; {...});\n}\n</code></pre>\n\n<p><code>responses</code> will contain every response, ranging from the first call to the last one : <code>responses[0]</code> will be the response for the first element, and so on. </p>\n"}, {"tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1540381362, "creation_date": 1540381362, "answer_id": 52968125, "question_id": 52967510, "link": "https://stackoverflow.com/questions/52967510/handling-multiple-http-responses-one-by-one-in-angular-6/52968125#52968125", "title": "Handling multiple http responses one by one in Angular 6", "body": "<p>You can use <strong>async/await</strong> </p>\n\n<p>example of api request </p>\n\n<pre><code>export function getData(data) {\n  return of(data)\n    .pipe(delay(2000))\n    .toPromise()\n}\n</code></pre>\n\n<p><em>component</em> </p>\n\n<pre><code>  async display() {\n    let first = await getData('first call');\n    console.log(first);\n\n    let second = await getData('second call')\n    console.log(second)\n  }\n</code></pre>\n\n<blockquote>\n  <p>You need to mark the methos with <code>async</code> in order to use await and convert any observable to <code>promise</code> as the example of the api request</p>\n</blockquote>\n\n<p><a href=\"https://stackblitz.com/edit/angular-7onrf8\" rel=\"nofollow noreferrer\"><strong>demo</strong></a></p>\n"}], "owner": {"reputation": 111, "user_id": 10551582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hTMr2ntWNtc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMWx4gyZmtrjCqw6sSG1OxMWdcHg/mo/photo.jpg?sz=128", "display_name": "ims16", "link": "https://stackoverflow.com/users/10551582/ims16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 0, "accepted_answer_id": 52967611, "answer_count": 3, "score": 3, "last_activity_date": 1540381714, "creation_date": 1540379587, "last_edit_date": 1540381714, "question_id": 52967510, "link": "https://stackoverflow.com/questions/52967510/handling-multiple-http-responses-one-by-one-in-angular-6", "title": "Handling multiple http responses one by one in Angular 6", "body": "<p>Actually, i have 15 http requests which are send to the API. I want to handle the responses one by one and print a response when the request end.</p>\n\n<p>Service side :</p>\n\n<pre><code>    findOneByOne(): Promise&lt;any&gt; {\n    const promises = [];\n\n    this.getCardsPath().forEach(element =&gt; {\n        promises.push(this.getPromises(element));\n    });\n    return Promise.all(promises)\n        .then((res) =&gt; res)\n        .catch(err =&gt; err);\n}\n\ngetPromises(str: String): Promise&lt;any&gt; {\n    return this.requester.obtain({\n        restUrl: \"/administration/\" + str,\n        method: RequestMethod.Get\n    })\n        .toPromise()\n        .then(res =&gt; this.checkInfoService(res.json()))\n        .catch(err =&gt; err);\n}\n</code></pre>\n\n<p>Component side : </p>\n\n<pre><code>display() {\n            this.dashboardInfoService.findOneByOne()\n            .then((res) =&gt; {\n                const tab = [];\n                for (let i = 0; i &lt; res.length; i++) {\n                    tab.push(res[i][0]);\n                }\n                this.findPaths(tab);\n                this.loadItems(tab);\n            })\n            .catch((err: any) =&gt; {\n                if (environment.debugLevel &gt;= 3) console.error(err);\n            });\n}\n</code></pre>\n\n<p>I'm a begginer in Angular, so i don't really know how to deal with multiple promises.</p>\n\n<p>thanks in advance for your assistance :)</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 33929, "user_id": 1746830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BQuS5.jpg?s=128&g=1", "display_name": "Rayon", "link": "https://stackoverflow.com/users/1746830/rayon"}, "edited": false, "score": 0, "creation_date": 1540380060, "post_id": 52967497, "comment_id": 92841537, "body": "Could be done using one liner: <code>a.find(elA =&gt; !b.find(elB =&gt; elB.Id === elA.Id))</code>"}, {"owner": {"reputation": 9735, "user_id": 6299857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O4G3u.jpg?s=128&g=1", "display_name": "Prasad Telkikar", "link": "https://stackoverflow.com/users/6299857/prasad-telkikar"}, "reply_to_user": {"reputation": 33929, "user_id": 1746830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BQuS5.jpg?s=128&g=1", "display_name": "Rayon", "link": "https://stackoverflow.com/users/1746830/rayon"}, "edited": false, "score": 0, "creation_date": 1540380160, "post_id": 52967497, "comment_id": 92841607, "body": "Thank you all for your overwhelming response, I will try each and every suggestions. It would be great if you help me with explanation as <b>I am new to typescript, javascript too</b>"}, {"owner": {"reputation": 6718, "user_id": 5361130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206601a888686677c4a74c89d9a2920f?s=128&d=identicon&r=PG", "display_name": "ponury-kostek", "link": "https://stackoverflow.com/users/5361130/ponury-kostek"}, "edited": false, "score": 0, "creation_date": 1540380403, "post_id": 52967497, "comment_id": 92841767, "body": "@Prasadtelkikar there&#39;s not even one answer written in TS :)"}, {"owner": {"reputation": 9735, "user_id": 6299857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O4G3u.jpg?s=128&g=1", "display_name": "Prasad Telkikar", "link": "https://stackoverflow.com/users/6299857/prasad-telkikar"}, "reply_to_user": {"reputation": 6718, "user_id": 5361130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206601a888686677c4a74c89d9a2920f?s=128&d=identicon&r=PG", "display_name": "ponury-kostek", "link": "https://stackoverflow.com/users/5361130/ponury-kostek"}, "edited": false, "score": 0, "creation_date": 1540380480, "post_id": 52967497, "comment_id": 92841817, "body": "@ponury-kostek, good catch.. I updated my comment.. Solutions are working like a charm..Cheers"}], "answers": [{"comments": [{"owner": {"reputation": 33929, "user_id": 1746830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BQuS5.jpg?s=128&g=1", "display_name": "Rayon", "link": "https://stackoverflow.com/users/1746830/rayon"}, "edited": false, "score": 1, "creation_date": 1540379899, "post_id": 52967529, "comment_id": 92841419, "body": "If only single object is expected then <code>Array#find</code> could be used instead of <code>Array#filter</code>. Good use of <code>Set</code> ;)"}, {"owner": {"reputation": 26836, "user_id": 1132354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BaAv.png?s=128&g=1", "display_name": "Nikhil Aggarwal", "link": "https://stackoverflow.com/users/1132354/nikhil-aggarwal"}, "reply_to_user": {"reputation": 33929, "user_id": 1746830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BQuS5.jpg?s=128&g=1", "display_name": "Rayon", "link": "https://stackoverflow.com/users/1746830/rayon"}, "edited": false, "score": 1, "creation_date": 1540380009, "post_id": 52967529, "comment_id": 92841501, "body": "@Rayon - Agreed. I will update the answer covering both the scenarios. Thanks!"}, {"owner": {"reputation": 9735, "user_id": 6299857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O4G3u.jpg?s=128&g=1", "display_name": "Prasad Telkikar", "link": "https://stackoverflow.com/users/6299857/prasad-telkikar"}, "edited": false, "score": 1, "creation_date": 1540380575, "post_id": 52967529, "comment_id": 92841893, "body": "I tried this one working as expected.. Thanks Nikhil"}], "tags": [], "owner": {"reputation": 26836, "user_id": 1132354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BaAv.png?s=128&g=1", "display_name": "Nikhil Aggarwal", "link": "https://stackoverflow.com/users/1132354/nikhil-aggarwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1540380129, "last_edit_date": 1540380129, "creation_date": 1540379657, "answer_id": 52967529, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript/52967529#52967529", "title": "Get non existing element from array in javascript", "body": "<p>Try following. Create a <strong>Set</strong> of <strong>Ids</strong> of <code>b</code> array and then filter array <code>a</code> based on that.</p>\n\n<p><strong>CASE 1</strong>: Use <strong>Array.filter</strong> in case of more than 1 entry</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var a = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}, {'Id': 4, 'name':'prasad', 'age':25}];\r\nvar b = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}];\r\n\r\nvar objB = b.reduce((a,c) =&gt; a.add(c.Id), new Set());\r\n\r\nvar result = a.filter(v =&gt; !objB.has(v.Id));\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>CASE 2</strong>: Use <strong>Array.find</strong> in case of 1 entry</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var a = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}, {'Id': 4, 'name':'prasad', 'age':25}];\r\nvar b = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}];\r\n\r\nvar objB = b.reduce((a,c) =&gt; a.add(c.Id), new Set());\r\n\r\nvar result = a.find(v =&gt; !objB.has(v.Id));\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 9735, "user_id": 6299857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O4G3u.jpg?s=128&g=1", "display_name": "Prasad Telkikar", "link": "https://stackoverflow.com/users/6299857/prasad-telkikar"}, "edited": false, "score": 0, "creation_date": 1540380635, "post_id": 52967572, "comment_id": 92841930, "body": "More readable and easy to understand. I tried this as well.. working as expected. but sorry I can accept only one answer... Cheers"}], "tags": [], "owner": {"reputation": 496, "user_id": 2887613, "user_type": "registered", "profile_image": "https://graph.facebook.com/717871649/picture?type=large", "display_name": "Raphael Aleixo", "link": "https://stackoverflow.com/users/2887613/raphael-aleixo"}, "is_accepted": false, "score": 1, "last_activity_date": 1540379809, "creation_date": 1540379809, "answer_id": 52967572, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript/52967572#52967572", "title": "Get non existing element from array in javascript", "body": "<p>With ES6:</p>\n\n<pre><code>const idsFromB = b.map(item =&gt; item.Id)\nconst c = a.filter(item =&gt; idsFromB.indexOf(item.Id) &lt; 0)\n//outputs [{'Id': 4, 'name':'prasad', 'age':25}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 876, "user_id": 1776964, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/788b5dd9ba6c754311c8d08d199e88e1?s=128&d=identicon&r=PG", "display_name": "philip_nunoo", "link": "https://stackoverflow.com/users/1776964/philip-nunoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1540380029, "creation_date": 1540380029, "answer_id": 52967653, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript/52967653#52967653", "title": "Get non existing element from array in javascript", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var a = [{ 'Id': 1, 'name': 'bob', 'age': 22 }, { 'Id': 2, 'name': 'alice', 'age': 12 }, { 'Id': 3, 'name': 'mike', 'age': 13 }, { 'Id': 4, 'name': 'prasad', 'age': 25 }];\r\nvar b = [{ 'Id': 1, 'name': 'bob', 'age': 22 }, { 'Id': 2, 'name': 'alice', 'age': 12 }, { 'Id': 3, 'name': 'mike', 'age': 13 }];\r\n\r\nconst na = [];\r\n\r\na.filter((_a) =&gt; {\r\n    let isNotUnique = true;\r\n    for (var elementB of b) {\r\n        if (_a.Id === elementB.Id) {\r\n            isNotUnique = false;\r\n            break;\r\n        }\r\n    }\r\n    \r\n    if (isNotUnique) {\r\n        na.push(_a);\r\n    }\r\n    \r\n});\r\n\r\nconsole.log(na);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 644, "user_id": 10321267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UbV1.jpg?s=128&g=1", "display_name": "Sinane", "link": "https://stackoverflow.com/users/10321267/sinane"}, "is_accepted": false, "score": -1, "last_activity_date": 1540381927, "last_edit_date": 1540381927, "creation_date": 1540380190, "answer_id": 52967707, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript/52967707#52967707", "title": "Get non existing element from array in javascript", "body": "<pre><code>var c;\n\na.forEach((aobj) =&gt; {\nc = 0;\nb.forEach((bobj) =&gt; {\nif (aobj.Id === bobj.Id) {\n  c++;\n }\n})\n if (c === 0) console.log(aobj);\n})`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30623, "user_id": 1762224, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/20969bd926bb6a29ee19a07a25f7fea8?s=128&d=identicon&r=PG", "display_name": "Mr. Polywhirl", "link": "https://stackoverflow.com/users/1762224/mr-polywhirl"}, "is_accepted": false, "score": 0, "last_activity_date": 1540380699, "creation_date": 1540380699, "answer_id": 52967890, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript/52967890#52967890", "title": "Get non existing element from array in javascript", "body": "<p>This is essentially a <a href=\"https://en.wikipedia.org/wiki/Complement_(set_theory)\" rel=\"nofollow noreferrer\">set difference</a> problem.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var a = [\r\n  {'Id': 1, 'name':'bob', 'age':22},\r\n  {'Id': 2, 'name':'alice', 'age':12},\r\n  {'Id': 3, 'name':'mike', 'age':13},\r\n  {'Id': 4, 'name':'prasad', 'age':25}\r\n];\r\nvar b = [\r\n  {'Id': 1, 'name':'bob', 'age':22},\r\n  {'Id': 2, 'name':'alice', 'age':12},\r\n  {'Id': 3, 'name':'mike', 'age':13}\r\n];\r\n\r\nconsole.log(JSON.stringify(diff(a, b), null, 2));\r\n\r\nfunction diff(a, b) {\r\n  return a.filter(x =&gt; !b.some(y =&gt; deepCompare(x, y)));\r\n}\r\n\r\n// https://stackoverflow.com/a/1144249/1762224\r\nfunction deepCompare(){var t,e,r,n;function o(t,e){var f;if(isNaN(t)&amp;&amp;isNaN(e)&amp;&amp;\"number\"==typeof t&amp;&amp;\"number\"==typeof e)return!0;if(t===e)return!0;if(\"function\"==typeof t&amp;&amp;\"function\"==typeof e||t instanceof Date&amp;&amp;e instanceof Date||t instanceof RegExp&amp;&amp;e instanceof RegExp||t instanceof String&amp;&amp;e instanceof String||t instanceof Number&amp;&amp;e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&amp;&amp;e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(r.indexOf(t)&gt;-1||n.indexOf(e)&gt;-1)return!1;for(f in e){if(e.hasOwnProperty(f)!==t.hasOwnProperty(f))return!1;if(typeof e[f]!=typeof t[f])return!1}for(f in t){if(e.hasOwnProperty(f)!==t.hasOwnProperty(f))return!1;if(typeof e[f]!=typeof t[f])return!1;switch(typeof t[f]){case\"object\":case\"function\":if(r.push(t),n.push(e),!o(t[f],e[f]))return!1;r.pop(),n.pop();break;default:if(t[f]!==e[f])return!1}}return!0}if(arguments.length&lt;1)return!0;for(t=1,e=arguments.length;t&lt;e;t++)if(r=[],n=[],!o(arguments[0],arguments[t]))return!1;return!0}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { top: 0; max-height: 100% !important; }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4881174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urPrI.jpg?s=128&g=1", "display_name": "Ahmed Alaa", "link": "https://stackoverflow.com/users/4881174/ahmed-alaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1611035370, "last_edit_date": 1611035370, "creation_date": 1611015660, "answer_id": 65783889, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript/65783889#65783889", "title": "Get non existing element from array in javascript", "body": "<p>Use <code>Array.filter()</code> to filter the first array (if the second <code>Array.some()</code> has an element with the first array <code>Id</code>).</p>\n<p>The result of <code>arr2.some()</code> is inverted to include only the ones that are not in <code>arr1</code>.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    let arr1 = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}, {'Id': 4, 'name':'prasad', 'age':25}];\nlet arr2 = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}];\n    \nlet result = arr1.filter(x=&gt;!arr2.some(y=&gt;x.Id===y.Id));\nconsole.log(result)    // output: [{'Id': 4, 'name':'prasad', 'age':25}]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 9735, "user_id": 6299857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O4G3u.jpg?s=128&g=1", "display_name": "Prasad Telkikar", "link": "https://stackoverflow.com/users/6299857/prasad-telkikar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 52967529, "answer_count": 6, "score": 0, "last_activity_date": 1611035370, "creation_date": 1540379511, "question_id": 52967497, "link": "https://stackoverflow.com/questions/52967497/get-non-existing-element-from-array-in-javascript", "title": "Get non existing element from array in javascript", "body": "<p>I have two arrays</p>\n\n<pre><code>var a = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}, {'Id': 4, 'name':'prasad', 'age':25}];\nvar b = [{'Id': 1, 'name':'bob', 'age':22}, {'Id': 2, 'name':'alice', 'age':12}, {'Id': 3, 'name':'mike', 'age':13}];\n</code></pre>\n\n<p>I want to compare each element of array a with array b based on ID (Ids are unique always) and want only record which present in array a but not in array b</p>\n\n<p>Here expected output would be</p>\n\n<pre><code>{'Id': 4, 'name':'prasad', 'age':25}\n</code></pre>\n\n<p>What I have tried so far:</p>\n\n<pre><code>for (var elementA of a) {\n    var uniqueElement = true;\n    for (var elementB of b) {\n         //if condition chekcs elementA.Id and elementB.Id\n         //setting values\n    }\n}\n</code></pre>\n\n<p>I believe there will be elegant approve to solve this? </p>\n"}, {"tags": ["typescript", "nestjs"], "owner": {"reputation": 21, "user_id": 4526813, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UW1KWmGOZZ4/AAAAAAAAAAI/AAAAAAAAEVI/Iy-VkvcJTT8/photo.jpg?sz=128", "display_name": "Leandro Sa", "link": "https://stackoverflow.com/users/4526813/leandro-sa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2971, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540378882, "creation_date": 1540378882, "question_id": 52967309, "link": "https://stackoverflow.com/questions/52967309/nestjs-validation-pipe-and-customvalidatordecorator-with-service-layer", "title": "NESTJS Validation Pipe and CustomValidatorDecorator with Service Layer", "body": "<p>Hello i am recently new on NESTJS and i need help to solve this problem. the problem consist that i need on the validation pipe to have access to the token of the request to call antoher api ( with the same token ) and using the HttpModule to check if the id sent was valid or not.</p>\n\n<p>Validation Pipe ( Sample from nestjs docs): </p>\n\n<pre><code>@Injectable()\nexport class ValidationPipe implements PipeTransform&lt;any&gt; {\n  async transform(value, { metatype }: ArgumentMetadata) {\n    if (!metatype || !this.toValidate(metatype)) {\n      return value;\n    }\n    const object = plainToClass(metatype, value);\n    const errors = await validate(object);\n    if (errors.length &gt; 0) {\n      throw new BadRequestException('Validation failed');\n    }\n    return value;\n  }\n\n  private toValidate(metatype): boolean {\n    const types = [String, Boolean, Number, Array, Object];\n    return !types.find((type) =&gt; metatype === type);\n  }\n}\n</code></pre>\n\n<p>Custom Validator : </p>\n\n<pre><code>import { registerDecorator, ValidationOptions, ValidationArguments } from 'class-validator';\n\nexport function IsLanguageValid(property: string, validationOptions?: ValidationOptions) {\n  return function(object: Object, propertyName: string) {\n    registerDecorator({\n      name: 'isLanguageValid',\n      target: object.constructor,\n      propertyName: propertyName,\n      constraints: [property],\n      options: validationOptions,\n      validator: {\n        validate(value: any, args: ValidationArguments) {\n          const [relatedPropertyName] = args.constraints;\n          const relatedValue = (args.object as any)[relatedPropertyName];\n\n          // WHERE HOW CAN I ACCESS TO A SERVICE AND TOKEN OF THE REQUEST\n          this.httpModule.get('url to other api', { headers: { authrorization : TOKEN }})\n        },\n      },\n    });\n  };\n}\n</code></pre>\n\n<p>What is the propose of that, on the DTO i put the decorators for validation and then he calls the api automatically to check the language_id exist or not.</p>\n\n<pre><code>  @ApiModelProperty()\n  @IsLanguageValid({}, { message: 'the language id sent is not valid'})\n  @IsNumber({}, { message: 'the id should be a number' })\n  language_id: number;\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "angular6"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 3, "creation_date": 1540378775, "post_id": 52967254, "comment_id": 92840762, "body": "Probably, having your code would certainly help telling you what you did wrong."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 7089576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BJX1S.jpg?s=128&g=1", "display_name": "vancho", "link": "https://stackoverflow.com/users/7089576/vancho"}, "is_accepted": false, "score": 0, "last_activity_date": 1540379181, "creation_date": 1540379181, "answer_id": 52967407, "question_id": 52967254, "link": "https://stackoverflow.com/questions/52967254/avoid-component-flickering-on-redirect-angular-6/52967407#52967407", "title": "Avoid component flickering on redirect Angular 6", "body": "<p>Use <code>this.router.navigate(['/home']);</code> in your component when login.</p>\n"}], "owner": {"reputation": 523, "user_id": 10551540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/35psh.png?s=128&g=1", "display_name": "Robert garcia", "link": "https://stackoverflow.com/users/10551540/robert-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540379181, "creation_date": 1540378684, "question_id": 52967254, "link": "https://stackoverflow.com/questions/52967254/avoid-component-flickering-on-redirect-angular-6", "title": "Avoid component flickering on redirect Angular 6", "body": "<p>i have an app created with angular 6, i manage the logged statement with a guard, but when the user is logged and he goes to /login it must redirect to /dashboard, it redirects, but the login component appears for a moment and then redirects</p>\n\n<p>Any way to avoid that flickering?</p>\n"}, {"tags": ["typescript", "firebase", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 36705, "user_id": 306149, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/99b44e3cb23b76ce97baac83f20c6c86?s=128&d=identicon&r=PG", "display_name": "Matt Bierner", "link": "https://stackoverflow.com/users/306149/matt-bierner"}, "edited": false, "score": 1, "creation_date": 1540448987, "post_id": 52979728, "comment_id": 92871199, "body": "Using <code>reference</code> directives in modern typescript is almost always a red flag. It may work short term but it is not the correct approach"}], "tags": [], "owner": {"reputation": 7629, "user_id": 978005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9219975d0b744e19422761516d419f12?s=128&d=identicon&r=PG", "display_name": "Phix", "link": "https://stackoverflow.com/users/978005/phix"}, "is_accepted": false, "score": 0, "last_activity_date": 1540427781, "creation_date": 1540427781, "answer_id": 52979728, "question_id": 52967044, "link": "https://stackoverflow.com/questions/52967044/cannot-find-name-firebase-vanilla-typescript/52979728#52979728", "title": "Cannot find name &#39;firebase&#39; vanilla typescript", "body": "<p>I wonder if there's another way (using tsconfig), but adding the following line to the top of your entry file resolves the issue:</p>\n\n<pre><code>/// &lt;reference path=\"node_modules/firebase/index.d.ts\" /&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10480925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-32rXiP_rLJw/AAAAAAAAAAI/AAAAAAAAArA/NTPdLNWaEdk/photo.jpg?sz=128", "display_name": "Ben Chaimowicz", "link": "https://stackoverflow.com/users/10480925/ben-chaimowicz"}, "edited": false, "score": 0, "creation_date": 1540453848, "post_id": 52983029, "comment_id": 92873819, "body": "Thanks! It does work, and I will use it, but doesn&#39;t it mean that it&#39;s no longer vanilla? It fattens the folder size significantly."}, {"owner": {"reputation": 41, "user_id": 10480925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-32rXiP_rLJw/AAAAAAAAAAI/AAAAAAAAArA/NTPdLNWaEdk/photo.jpg?sz=128", "display_name": "Ben Chaimowicz", "link": "https://stackoverflow.com/users/10480925/ben-chaimowicz"}, "edited": false, "score": 0, "creation_date": 1540454365, "post_id": 52983029, "comment_id": 92874108, "body": "To be clear, since I&#39;m a total noob, I didn&#39;t realize importing will break some of my other code (links between .ts files) , so I chose the 2nd option. Nevertheless, thank you so much, I think this is the first working answer on the internet. :)"}], "tags": [], "owner": {"reputation": 36705, "user_id": 306149, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/99b44e3cb23b76ce97baac83f20c6c86?s=128&d=identicon&r=PG", "display_name": "Matt Bierner", "link": "https://stackoverflow.com/users/306149/matt-bierner"}, "is_accepted": true, "score": 4, "last_activity_date": 1540450138, "creation_date": 1540450138, "answer_id": 52983029, "question_id": 52967044, "link": "https://stackoverflow.com/questions/52967044/cannot-find-name-firebase-vanilla-typescript/52983029#52983029", "title": "Cannot find name &#39;firebase&#39; vanilla typescript", "body": "<p>TypeScript does not know that you are importing firebase because the import happens in an html file. Although it may be clear to you that your <code>ts</code> file will be used in that same html file, TypeScript cannot determine this and it also cannot assume that that your <code>ts</code> file will only be used on html pages that have firebase already included.</p>\n\n<hr>\n\n<p>The best solution is to take <code>firebase</code> as a real dependency using <code>npm</code> </p>\n\n<pre><code>npm install --save firebase\n</code></pre>\n\n<p>and then import it in your ts file:</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>import * as firebase from 'firebase';\n\nvar config = {\n    ...\n};\nfirebase.initializeApp(config);\n</code></pre>\n\n<p>Then use webpack or a similar tool to <a href=\"https://webpack.js.org/guides/typescript/\" rel=\"nofollow noreferrer\">compile that TypeScript to a single js file</a></p>\n\n<hr>\n\n<p>If you do not want to add a real import, then you can reference just the global types from firebase using:</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>declare const firebase: typeof import('firebase');\n\nvar config = {\n    ...\n};\nfirebase.initializeApp(config);\n</code></pre>\n\n<p>This also requires that you install firebase locally using <code>npm</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 608, "user_id": 2930091, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/64d76b805c99642dcd3bd19383a4a4bd?s=128&d=identicon&r=PG&f=1", "display_name": "Partik", "link": "https://stackoverflow.com/users/2930091/partik"}, "is_accepted": false, "score": 0, "last_activity_date": 1596263629, "creation_date": 1596263629, "answer_id": 63202479, "question_id": 52967044, "link": "https://stackoverflow.com/questions/52967044/cannot-find-name-firebase-vanilla-typescript/63202479#63202479", "title": "Cannot find name &#39;firebase&#39; vanilla typescript", "body": "<p><strong>TL;DR</strong> Just download <a href=\"https://github.com/firebase/firebase-js-sdk/blob/master/packages/firebase/index.d.ts\" rel=\"nofollow noreferrer\">this file</a> and throw it somewhere in your project folder.</p>\n<p>Simple solution, <strong>but be warned</strong>, doing this means Typescript will always assume your script has access to the variable <code>firebase</code>, even when it actually doesn't.</p>\n<hr />\n<p>As @Matt Bierner said, you're importing <code>firebase</code> with script tags in the HTML. So Typescript doesn't know that <code>firebase</code> was imported. So it doesn't know anything about &quot;firebase&quot;, and therefore it red lines it.</p>\n<p>His solution including installing the firebase package from npm and importing it, and also webpacking it, since node_modules (the folder with all your npm packages) isn't something your front end code usually has access to.</p>\n<p>Why would bundling the npm firebase package fix the problem? Because for one thing, inside the package there's a file called index.d.ts, and THAT tells Typescript everything it needs to know about the <code>firebase</code> object.</p>\n<p>So instead of webpacking and stuff, you can skip all that, and simply copy just that file into your project folder. VSCode will find it, and it won't complain about 'firebase' anymore.</p>\n<p>Here's the link to the file: <a href=\"https://github.com/firebase/firebase-js-sdk/blob/master/packages/firebase/index.d.ts\" rel=\"nofollow noreferrer\">https://github.com/firebase/firebase-js-sdk/blob/master/packages/firebase/index.d.ts</a></p>\n<hr />\n<p><strong>WARNING:</strong> You may have some pages in your app that don't have access to <code>firebase</code>. If you use <code>firebase</code> on those pages, Typescript will not throw an error even though it should, so your Javascript will throw an error, likely <code>'firebase' is not defined</code>.</p>\n<p>Just remember to include the firebase HTML snippets on whatever page you need firebase for.</p>\n<p>For me, I generally make single page apps where <code>firebase</code> is global anyway, so this is a great quick fix.</p>\n"}], "owner": {"reputation": 41, "user_id": 10480925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-32rXiP_rLJw/AAAAAAAAAAI/AAAAAAAAArA/NTPdLNWaEdk/photo.jpg?sz=128", "display_name": "Ben Chaimowicz", "link": "https://stackoverflow.com/users/10480925/ben-chaimowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 52983029, "answer_count": 3, "score": 4, "last_activity_date": 1596263629, "creation_date": 1540378017, "last_edit_date": 1540425813, "question_id": 52967044, "link": "https://stackoverflow.com/questions/52967044/cannot-find-name-firebase-vanilla-typescript", "title": "Cannot find name &#39;firebase&#39; vanilla typescript", "body": "<p>I've searched everywhere and cannot find a solution to this problem:      </p>\n\n<pre><code>var config = {\n    apiKey: \"xxxxxxxx\",\n    authDomain: \"xxxxxxxxx\",\n    databaseURL: \"xxxxxxxxx\",\n    projectId: \"xxxxxxx\",\n    storageBucket: \"xxxxxxxxxx\",\n    messagingSenderId: \"xxxxxxxx\"\n};\nfirebase.initializeApp(config);\n</code></pre>\n\n<p>I am not using Angular nor node.js, just vanilla typescript in vscode, and no matter what I do, 'firebase' is always red lined, and name cannot be found. I followed the documentations and some youtube tutorials step by step several times and I'm just desperate right now. deploying works, no probs there... </p>\n\n<p>I have also used this link in my html:</p>\n\n<pre><code>&lt;script src=\"https://www.gstatic.com/firebasejs/5.5.5/firebase.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>And moving the given snippets between files doesn't help.\nwhat am I doing wrong?</p>\n\n<p>I have found something odd. In chrome console, I am able to find 'firebase', it exists and imported from CDN, But it is not the same in VSCode as it still won't let me compile due to the missing name error.</p>\n\n<p>Could it be related to my tsconfig?</p>\n\n<p>Edit #2: I contacted firebase support and we are looking for a solution, I have to note that they have wonderful tech support, kudos.\nMy theory now is that my VSCode .ts files are unable to import variables from files that are not .ts. Is this normal?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1540376934, "post_id": 52966630, "comment_id": 92839645, "body": "Can&#39;t you simply use <code>response.issues.length</code> to get the total ?"}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1540376964, "post_id": 52966630, "comment_id": 92839671, "body": "What you actually filtering? which results are removed from it?"}, {"owner": {"reputation": 25, "user_id": 7851265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7324260938a37fa14493e7dd8f6b6c46?s=128&d=identicon&r=PG&f=1", "display_name": "aq2dwe", "link": "https://stackoverflow.com/users/7851265/aq2dwe"}, "edited": false, "score": 0, "creation_date": 1540377141, "post_id": 52966630, "comment_id": 92839776, "body": "i get a bulk response from the API, in that response I want to count how many are open,closed and resolved."}, {"owner": {"reputation": 135, "user_id": 8103931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bab063db1ffc44367080071d79a58d?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Boehmer", "link": "https://stackoverflow.com/users/8103931/leon-boehmer"}, "edited": false, "score": 0, "creation_date": 1540377243, "post_id": 52966630, "comment_id": 92839851, "body": "You could also you a switch statement"}, {"owner": {"reputation": 1017, "user_id": 7964447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99c122bd0b5370b8326fb1ddefbcf676?s=128&d=identicon&r=PG", "display_name": "Bytech", "link": "https://stackoverflow.com/users/7964447/bytech"}, "edited": false, "score": 0, "creation_date": 1540377339, "post_id": 52966630, "comment_id": 92839916, "body": "The accepted answer at <a href=\"https://stackoverflow.com/questions/14696326/break-array-of-objects-into-separate-arrays-based-on-a-property\" title=\"break array of objects into separate arrays based on a property\">stackoverflow.com/questions/14696326/&hellip;</a> looks like the cleanest solution."}, {"owner": {"reputation": 1017, "user_id": 7964447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99c122bd0b5370b8326fb1ddefbcf676?s=128&d=identicon&r=PG", "display_name": "Bytech", "link": "https://stackoverflow.com/users/7964447/bytech"}, "edited": false, "score": 0, "creation_date": 1540377360, "post_id": 52966630, "comment_id": 92839934, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14696326/break-array-of-objects-into-separate-arrays-based-on-a-property\">break array of objects into separate arrays based on a property</a>"}], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 1640765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16761ec6d44c5e2759516d22972399b?s=128&d=identicon&r=PG", "display_name": "ankr", "link": "https://stackoverflow.com/users/1640765/ankr"}, "is_accepted": false, "score": 0, "last_activity_date": 1540377128, "creation_date": 1540377128, "answer_id": 52966734, "question_id": 52966630, "link": "https://stackoverflow.com/questions/52966630/how-to-reduce-the-repeated-lines/52966734#52966734", "title": "How to reduce the repeated lines?", "body": "<p>Perhaps something like</p>\n\n<pre><code>getJiraOpenIssues(id:string) {\n  const fn = (response, state) =&gt; {\n    return response.issues.filter((status) =&gt; status.fields.status.name === state);\n  };\n\n  return this.http.get&lt;any&gt;( apiUrl )\n  .subscribe(response =&gt; {\n    let open = fn(response, 'Open');\n    let closed = fn(response, 'Closed');\n    let resolved = fn(response, 'Resolved');\n    let progress = fn(response, 'In Progress');\n\n    let Total = open.length + closed.length + resolved.length + progress.length;\n    console.log(Total);\n  });\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7851265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7324260938a37fa14493e7dd8f6b6c46?s=128&d=identicon&r=PG&f=1", "display_name": "aq2dwe", "link": "https://stackoverflow.com/users/7851265/aq2dwe"}, "edited": false, "score": 1, "creation_date": 1540377370, "post_id": 52966736, "comment_id": 92839939, "body": "This one is returning just the total , I want the total for each items as wll"}, {"owner": {"reputation": 4046, "user_id": 571156, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/EIukk.jpg?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/571156/vivek-kumar"}, "reply_to_user": {"reputation": 25, "user_id": 7851265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7324260938a37fa14493e7dd8f6b6c46?s=128&d=identicon&r=PG&f=1", "display_name": "aq2dwe", "link": "https://stackoverflow.com/users/7851265/aq2dwe"}, "edited": false, "score": 0, "creation_date": 1540377461, "post_id": 52966736, "comment_id": 92839987, "body": "<code>console.log(item)</code> instead of <code>console.log(item.length)</code>"}, {"owner": {"reputation": 25, "user_id": 7851265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7324260938a37fa14493e7dd8f6b6c46?s=128&d=identicon&r=PG&f=1", "display_name": "aq2dwe", "link": "https://stackoverflow.com/users/7851265/aq2dwe"}, "edited": false, "score": 0, "creation_date": 1540377618, "post_id": 52966736, "comment_id": 92840095, "body": "Yes, But in that case i&#39;ll have to make multiple API calls"}], "tags": [], "owner": {"reputation": 4046, "user_id": 571156, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/EIukk.jpg?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/571156/vivek-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1540377405, "last_edit_date": 1540377405, "creation_date": 1540377129, "answer_id": 52966736, "question_id": 52966630, "link": "https://stackoverflow.com/questions/52966630/how-to-reduce-the-repeated-lines/52966736#52966736", "title": "How to reduce the repeated lines?", "body": "<p>You can do this.</p>\n\n<pre><code>   getJiraOpenIssues(id:string) {\n        const desired = ['Open', 'Closed', 'Resolved', 'In Progress'];\n        return this.http.get&lt;any&gt;( apiUrl )\n        .subscribe(response =&gt; {\n          let items = response.issues.filter((status) =&gt; {\n            return desired.includes(status.fields.status.name);\n          });\n\n          console.log(item.length);\n\n        });\n      }\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong>\nSuggestion:</p>\n\n<p>Once I had used JIRA, I can consider using <code>JIRA JQL</code> API, documentation url below.</p>\n\n<p>I guess there must be an API where you can pass that we need the issue statue which you really required instead of filtering at your end. Moreover <code>JQL</code> execute on the database it will do the filtering job more efficiently.</p>\n\n<p><a href=\"https://developer.atlassian.com/server/jira/platform/jira-rest-api-examples/\" rel=\"nofollow noreferrer\">https://developer.atlassian.com/server/jira/platform/jira-rest-api-examples/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1572, "user_id": 2644604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mfxg.jpg?s=128&g=1", "display_name": "Hariprasath Yadav", "link": "https://stackoverflow.com/users/2644604/hariprasath-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1540377378, "creation_date": 1540377378, "answer_id": 52966815, "question_id": 52966630, "link": "https://stackoverflow.com/questions/52966630/how-to-reduce-the-repeated-lines/52966815#52966815", "title": "How to reduce the repeated lines?", "body": "<pre><code>getJiraOpenIssues(id:string) {\n    return this.http.get&lt;any&gt;( apiUrl )\n    .subscribe(response =&gt; {\n        let open = this.responseFilter(response, 'Open');\n\n        let closed = this.responseFilter(response, 'Closed');\n\n        let resolved = this.responseFilter(response, 'Resolved');\n\n        let progress = this.responseFilter(response, 'In Progress');\n\n        let Total = open.length + closed.length + resolved.length + progress.length;\n        console.log(Total);\n\n    });\n}\n\nresponseFilter (response, filter) {\n    fv = response.issues.filter((status) =&gt; {\n        return status.fields.status.name === filter;\n    });\n    return fv;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7851265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7324260938a37fa14493e7dd8f6b6c46?s=128&d=identicon&r=PG&f=1", "display_name": "aq2dwe", "link": "https://stackoverflow.com/users/7851265/aq2dwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1540379202, "creation_date": 1540376811, "last_edit_date": 1540379202, "question_id": 52966630, "link": "https://stackoverflow.com/questions/52966630/how-to-reduce-the-repeated-lines", "title": "How to reduce the repeated lines?", "body": "<p>The below function does what it is supposed to do, but the code is repeated many times.</p>\n\n<p>Is there any way to simplify the below code?</p>\n\n<pre><code>  getJiraOpenIssues(id:string) {\n    return this.http.get&lt;any&gt;( apiUrl )\n    .subscribe(response =&gt; {\n      let open = response.issues.filter((status) =&gt; {\n        return status.fields.status.name === 'Open';\n      });\n\n      let closed = response.issues.filter((status) =&gt; {\n        return status.fields.status.name === 'Closed';\n      });\n\n      let resolved = response.issues.filter((status) =&gt; {\n        return status.fields.status.name === 'Resolved';\n      });\n\n      let progress = response.issues.filter((status) =&gt; {\n        return status.fields.status.name === 'In Progress';\n      });\n\n      let Total = open.length + closed.length + resolved.length + progress.length;\n      console.log(Total);\n\n    });\n  }\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "typescript"], "comments": [{"owner": {"reputation": 167922, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1540376317, "post_id": 52966418, "comment_id": 92839269, "body": "In a word - no."}, {"owner": {"reputation": 40275, "user_id": 3744304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/17uwe.jpg?s=128&g=1", "display_name": "connexo", "link": "https://stackoverflow.com/users/3744304/connexo"}, "edited": false, "score": 0, "creation_date": 1540376383, "post_id": 52966418, "comment_id": 92839309, "body": "As long as you don&#39;t need to transpile your code to something like ES5, going with <code>class MyArray extends Array</code> should be fine. The problem is the non-polyfillable, non-transpileable <code>new.target</code>."}, {"owner": {"reputation": 40275, "user_id": 3744304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/17uwe.jpg?s=128&g=1", "display_name": "connexo", "link": "https://stackoverflow.com/users/3744304/connexo"}, "edited": false, "score": 1, "creation_date": 1540376642, "post_id": 52966418, "comment_id": 92839471, "body": "The suggested workaround could be applied on <code>ThatOtherArray</code> which you&#39;d then use to extend in all your subclasses as well."}, {"owner": {"reputation": 16053, "user_id": 1458413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bc610c6d3b002273accb42820b3be34d?s=128&d=identicon&r=PG", "display_name": "Lux", "link": "https://stackoverflow.com/users/1458413/lux"}, "reply_to_user": {"reputation": 40275, "user_id": 3744304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/17uwe.jpg?s=128&g=1", "display_name": "connexo", "link": "https://stackoverflow.com/users/3744304/connexo"}, "edited": false, "score": 0, "creation_date": 1540379800, "post_id": 52966418, "comment_id": 92841380, "body": "@connexo no. However it would be possible to create an Array-like. But dont do this."}, {"owner": {"reputation": 40275, "user_id": 3744304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/17uwe.jpg?s=128&g=1", "display_name": "connexo", "link": "https://stackoverflow.com/users/3744304/connexo"}, "reply_to_user": {"reputation": 16053, "user_id": 1458413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bc610c6d3b002273accb42820b3be34d?s=128&d=identicon&r=PG", "display_name": "Lux", "link": "https://stackoverflow.com/users/1458413/lux"}, "edited": false, "score": 0, "creation_date": 1540380535, "post_id": 52966418, "comment_id": 92841861, "body": "@Lux You&#39;re not giving arguments."}, {"owner": {"reputation": 16053, "user_id": 1458413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bc610c6d3b002273accb42820b3be34d?s=128&d=identicon&r=PG", "display_name": "Lux", "link": "https://stackoverflow.com/users/1458413/lux"}, "edited": false, "score": 0, "creation_date": 1540380697, "post_id": 52966418, "comment_id": 92841966, "body": "Just check the link in the question: &quot;However, any subclass of FooError will have to manually set the prototype as well.&quot; so this won&#39;t help."}], "owner": {"reputation": 6209, "user_id": 1935318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ftlsb.jpg?s=128&g=1", "display_name": "amaurym", "link": "https://stackoverflow.com/users/1935318/amaurym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540376093, "creation_date": 1540376093, "question_id": 52966418, "link": "https://stackoverflow.com/questions/52966418/a-javascript-array-class-same-behavior-but-thats-not-array", "title": "A JavaScript Array class, same behavior, but that&#39;s not Array?", "body": "<p>For some reasons, I cannot create <code>class MyArray extends Array</code>, it breaks the constructor: <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#why-doesnt-extending-built-ins-like-error-array-and-map-work\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/TypeScript/wiki/FAQ#why-doesnt-extending-built-ins-like-error-array-and-map-work</a>.</p>\n\n<p>They propose the <code>setPrototype</code> solution, but I have a lot of subclasses, and don't want to do that for every subclass.</p>\n\n<p>So is there a class that behaves <em>exactly</em> like Array:</p>\n\n<ul>\n<li>can access elements via [index]</li>\n<li>is iterable</li>\n<li>has all builtin methods like .map, .filter etc.</li>\n</ul>\n\n<p>but that's not Array itself? In this case I could just do <code>class MyArray extends ThatOtherArray</code>, and everything should be fine.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1540376343, "post_id": 52966345, "comment_id": 92839280, "body": "How do you include it? Can you paste your <code>tsconfig.json</code>"}, {"owner": {"reputation": 99, "user_id": 7950832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99da285d9e553753fa63ad6d82089d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Keller", "link": "https://stackoverflow.com/users/7950832/benjamin-keller"}, "reply_to_user": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1540376570, "post_id": 52966345, "comment_id": 92839433, "body": "Just editet @DanielHabenicht"}, {"owner": {"reputation": 4659, "user_id": 1008762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f59fb62df3f86e8a9c16d3d5b1595705?s=128&d=identicon&r=PG", "display_name": "Cito", "link": "https://stackoverflow.com/users/1008762/cito"}, "edited": false, "score": 0, "creation_date": 1540386436, "post_id": 52966345, "comment_id": 92845867, "body": "The <code>tsconfig.json</code> looks ok, the problem must be elsewhere. I recommend using <code>&quot;target&quot;: &quot;es2017&quot;</code> though since all browsers that support web extensions should support that. One scenario that would cause your problem is when <code>tsconfig.app.json</code> is extending a different config (it should extend the <code>tsconfig.json</code> you showed above)."}, {"owner": {"reputation": 4659, "user_id": 1008762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f59fb62df3f86e8a9c16d3d5b1595705?s=128&d=identicon&r=PG", "display_name": "Cito", "link": "https://stackoverflow.com/users/1008762/cito"}, "edited": false, "score": 0, "creation_date": 1540386919, "post_id": 52966345, "comment_id": 92846193, "body": "Also, check the <code>tsConfig</code> setting in <code>angular.json</code>. It should point to <code>src&#47;tsconfig.app.json</code> which should extend <code>tsconfig.json</code>."}, {"owner": {"reputation": 99, "user_id": 7950832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99da285d9e553753fa63ad6d82089d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Keller", "link": "https://stackoverflow.com/users/7950832/benjamin-keller"}, "reply_to_user": {"reputation": 4659, "user_id": 1008762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f59fb62df3f86e8a9c16d3d5b1595705?s=128&d=identicon&r=PG", "display_name": "Cito", "link": "https://stackoverflow.com/users/1008762/cito"}, "edited": false, "score": 0, "creation_date": 1540389631, "post_id": 52966345, "comment_id": 92848149, "body": "Thanks @Cito, checked your ideas with no success, and edited question to add that elements"}], "answers": [{"tags": [], "owner": {"reputation": 4659, "user_id": 1008762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f59fb62df3f86e8a9c16d3d5b1595705?s=128&d=identicon&r=PG", "display_name": "Cito", "link": "https://stackoverflow.com/users/1008762/cito"}, "is_accepted": true, "score": 2, "last_activity_date": 1540407972, "creation_date": 1540407972, "answer_id": 52976272, "question_id": 52966345, "link": "https://stackoverflow.com/questions/52966345/how-to-use-web-ext-types-to-avoid-error-ts2304/52976272#52976272", "title": "How to use web-ext-types to avoid error TS2304", "body": "<p>The problem here is this setting in <code>tsconfig.app.json</code>:</p>\n\n<pre><code>\"compilerOptions\": {\n  \"types\": []\n},\n</code></pre>\n\n<p>This tells the Angular CLI to run the TypeScript compiler with no type packages, overriding the <code>typeRoots</code> setting in <code>tsconfig.json</code>. This also explains why your IDE knows the <code>browser</code> namespace, but the Angular CLI does not, since the IDE only uses the <code>tsconfig.json</code> configuration, not the one in <code>tsconfig.app.json</code> which is specific to the Angular CLI. Just remove the <code>types</code> setting in <code>tsconfig.app.json</code> and the problem should be solved.</p>\n"}], "owner": {"reputation": 99, "user_id": 7950832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99da285d9e553753fa63ad6d82089d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Keller", "link": "https://stackoverflow.com/users/7950832/benjamin-keller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 52976272, "answer_count": 1, "score": 2, "last_activity_date": 1540407972, "creation_date": 1540375826, "last_edit_date": 1540392193, "question_id": 52966345, "link": "https://stackoverflow.com/questions/52966345/how-to-use-web-ext-types-to-avoid-error-ts2304", "title": "How to use web-ext-types to avoid error TS2304", "body": "<p>I'm trying to build a web extension with Angular 6, so i found web-ext-types to declare the types for Web Extension API.</p>\n\n<p>So just trying to make a new angular project, updating tsconfig.json to include <code>node_modules/web-ext-types</code> seems to do the job as i can see <code>browser</code> as recognized type in Visual Studio Code. So far so good.</p>\n\n<p>Now i want to build my project by runnin <code>ng build --aot</code> and i've got following error: <code>error TS2304: Cannot find name 'browser'</code>.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>tsconfig.json: </p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"baseUrl\": \"./\",\n    \"outDir\": \"./dist/out-tsc\",\n    \"sourceMap\": true,\n    \"declaration\": false,\n    \"moduleResolution\": \"node\",\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"target\": \"es2017\",\n    \"typeRoots\": [\n      \"node_modules/@types\",\n      \"node_modules/web-ext-types\"\n    ],\n    \"lib\": [\n      \"es2017\",\n      \"dom\"\n    ],\n    \"paths\": {\n      \"myLibrary\": [\n        \"projects/my-library\"\n      ],\n      \"myLibrary/*\": [\n        \"projects/my-library/*\"\n      ]\n    }\n  }\n}\n</code></pre>\n\n<p>tsconfig.app.json:</p>\n\n<pre><code>{\n  \"extends\": \"../../tsconfig.json\",\n  \"compilerOptions\": {\n    \"outDir\": \"../../out-tsc/app\",\n    \"module\": \"es2015\",\n    \"types\": []\n  },\n  \"exclude\": [\n    \"src/test.ts\",\n    \"**/*.spec.ts\"\n  ]\n}\n</code></pre>\n\n<p>also from <code>angular.json</code> : </p>\n\n<pre><code>\"tsConfig\": \"projects/extension/tsconfig.app.json\",\n</code></pre>\n\n<p>Created a github repo to show full code reproducing my issue: <a href=\"https://github.com/benk79/angular-web-ext-base\" rel=\"nofollow noreferrer\">https://github.com/benk79/angular-web-ext-base</a></p>\n"}, {"tags": ["html", "angular", "typescript", "observable"], "comments": [{"owner": {"reputation": 496, "user_id": 8245113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AWyz4uBZmjg/AAAAAAAAAAI/AAAAAAAAzao/fQIH_hipq08/photo.jpg?sz=128", "display_name": "Troels Lenda", "link": "https://stackoverflow.com/users/8245113/troels-lenda"}, "edited": false, "score": 0, "creation_date": 1540380545, "post_id": 52966344, "comment_id": 92841874, "body": "Cloud it be a security issue?  Take a look at bypassSecurityTrustUrl <a href=\"https://angular.io/guide/security#bypass-security-apis\" rel=\"nofollow noreferrer\">angular.io/guide/security#bypass-security-apis</a>"}, {"owner": {"reputation": 339, "user_id": 1288906, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/533c71b724b5920b37bdaf336bfff63d?s=128&d=identicon&r=PG", "display_name": "user1288906", "link": "https://stackoverflow.com/users/1288906/user1288906"}, "reply_to_user": {"reputation": 496, "user_id": 8245113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AWyz4uBZmjg/AAAAAAAAAAI/AAAAAAAAzao/fQIH_hipq08/photo.jpg?sz=128", "display_name": "Troels Lenda", "link": "https://stackoverflow.com/users/8245113/troels-lenda"}, "edited": false, "score": 0, "creation_date": 1540380979, "post_id": 52966344, "comment_id": 92842160, "body": "Hmmm...probably not. If i use &quot;this.fileUploads&quot; directly in my *ngFor, it works well. I am assuming, if there was a security issue this would not work either?"}], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 1288906, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/533c71b724b5920b37bdaf336bfff63d?s=128&d=identicon&r=PG", "display_name": "user1288906", "link": "https://stackoverflow.com/users/1288906/user1288906"}, "is_accepted": true, "score": 0, "last_activity_date": 1540385191, "creation_date": 1540385191, "answer_id": 52969405, "question_id": 52966344, "link": "https://stackoverflow.com/questions/52966344/nested-ngfor-in-observable-array/52969405#52969405", "title": "Nested *ngFor in Observable Array", "body": "<p>I got it working. I was modifying the observable in subscribe instead of in map.</p>\n"}], "owner": {"reputation": 339, "user_id": 1288906, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/533c71b724b5920b37bdaf336bfff63d?s=128&d=identicon&r=PG", "display_name": "user1288906", "link": "https://stackoverflow.com/users/1288906/user1288906"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 52969405, "answer_count": 1, "score": 0, "last_activity_date": 1540385191, "creation_date": 1540375826, "last_edit_date": 1540379949, "question_id": 52966344, "link": "https://stackoverflow.com/questions/52966344/nested-ngfor-in-observable-array", "title": "Nested *ngFor in Observable Array", "body": "<p>I am trying to bind a nested observable array using Angular 6 in my HTML and show the list(image_urls) in my carousel.\nHowever, I am unable to bind the nested array.  Any help or advice is much appreciated. Thanks in advance</p>\n\n<p>This is what I have so far:</p>\n\n<p>Components.ts</p>\n\n<pre><code>getAvailableCars()\n{\n    this.cars$ = this.carService.getAvailableCars();\n         this.cars$.subscribe(car =&gt; {\n            car.forEach(c =&gt; {\n             c.image_urls = new Array&lt;any&gt;(); \n                this.fileUploads = this.uploadFileService.getFiles(c.car_id);\n                this.fileUploads.subscribe(res =&gt; {\n                 c.image_urls = res;\n             });\n        });\n    });\n   }\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code>&lt;div class=\"row\" *ngFor=\"let car of cars$ | async\u201d&gt;\n    &lt;span&gt;{{car.name}}&lt;/span&gt;\n\n    &lt;mdb-carousel [isControls]=\"true\" [animation]=\"'slide'\u201d&gt; \n        &lt;mdb-slide *ngFor=\"let file of car.image_urls | async\u201d&gt; \n            &lt;span&gt;{{file.url}}&lt;/span&gt;\n        &lt;/mdb-slide&gt;\n     &lt;/mdb-carousel&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Console</p>\n\n<pre><code>Car(3) [{\u2026}, {\u2026}, {\u2026}]\n0:\ncar_id: 30\nexterior_color: 4\nfuel_type_name: \"Petrol\"\nimage_urls: Array(2)\n0: FileUpload {url: \"https://s3.amazonaws.com/xx/30/SocialPost_5695408_facebook.png\"}\n1: FileUpload {url: \"https://s3.amazonaws.com/xx/30/logo_size.jpg\"}\nlength: 2\n__proto__: Array(0) \n</code></pre>\n\n<p>If i use this.fileUploads directly in the Carousel it works, but not when i push it to c.image_urls. Since, I have multiple cars and each have different image urls, I need to add the image_urls to the object of car.</p>\n\n<p>Thanks again!</p>\n"}, {"tags": ["angular", "typescript", "interface"], "answers": [{"comments": [{"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1540375947, "post_id": 52966332, "comment_id": 92839062, "body": "To avoid further confusion, you should also consider renaming the interface <code>Employees</code> to <code>Employee</code> as the interface describes only one Employee."}, {"owner": {"reputation": 345, "user_id": 3274282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zv43v.png?s=128&g=1", "display_name": "L.A", "link": "https://stackoverflow.com/users/3274282/l-a"}, "edited": false, "score": 0, "creation_date": 1540376044, "post_id": 52966332, "comment_id": 92839118, "body": "the clearest way for me to do is have an <code>Employee</code> interface and than a type like <code>type Employees = Employee[]</code>"}, {"owner": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "edited": false, "score": 0, "creation_date": 1540379743, "post_id": 52966332, "comment_id": 92841347, "body": "renaiming to Employee can be seen as a bad practise too as for example in .NET the best practise for modelName would be Employees"}], "tags": [], "owner": {"reputation": 636, "user_id": 8113401, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hBHf43-UHnI/AAAAAAAAAAI/AAAAAAAABqU/Qa7O-pxi9eo/photo.jpg?sz=128", "display_name": "Tibin Thomas", "link": "https://stackoverflow.com/users/8113401/tibin-thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1540377255, "last_edit_date": 1540377255, "creation_date": 1540375802, "answer_id": 52966332, "question_id": 52966282, "link": "https://stackoverflow.com/questions/52966282/how-to-define-interface-for-complex-properties-in-typescript-angular/52966332#52966332", "title": "How to define interface for complex properties in typescript angular", "body": "<p>Change line number 2.</p>\n\n<p>employees: Employees; to employees: Employees[];</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-ejnmbk\" rel=\"nofollow noreferrer\">See this for sample code</a></p>\n\n<pre><code>import { Component } from '@angular/core';\n\n interface Employees {\n  empID: string;\n  name: string;\n  gender: string;\n  salary: number;\n  DOB: Date\n}\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: [ './app.component.css' ]\n})\nexport class AppComponent  {\nname = 'Angular';\nemployees: Employees[];\nconstructor() {\n\nthis.employees = [\n{ empID: 'empid101', name: 'Jhon', gender: 'male', salary: 1200, DOB: new Date('12/24/2016') }\n];\n\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 4380369, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/da0d2530f00c28ea823f013b0d1f0c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/4380369/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 52966332, "answer_count": 1, "score": 1, "last_activity_date": 1540377255, "creation_date": 1540375654, "question_id": 52966282, "link": "https://stackoverflow.com/questions/52966282/how-to-define-interface-for-complex-properties-in-typescript-angular", "title": "How to define interface for complex properties in typescript angular", "body": "<p>I have <strong>employees</strong> array of objects in my Angular App. I need to put <em>type</em> for it instead of <strong><em>any</em></strong>, so i have defined <strong><em>interface</em></strong>. But i get the error as below.</p>\n\n<blockquote>\n  <p>ERROR in src/app/newComp/employee/employee.component.ts(11,3): error TS2322: Type '{ empID: string; name: string; gender: string; salary: number; DOB: string; }[]' is not assignable to type 'Employees'.\n    Property 'empID' is missing in type '{ empID: string; name: string; gender: string; salary: number; DOB: string; }[]'.\n  src/app/newComp/employee/employee.component.ts(20,7): error TS2322: Type '{ empID: string; name: string; gender: string; salary: number; DOB: string; }[]' is not assignable to type 'Employees'.\n    Property 'empID' is missing in type '{ empID: string; name: string; gender: string; salary: number; DOB: string; }[]'.</p>\n</blockquote>\n\n<p>How to solve this? Here is my whole code.</p>\n\n<pre><code>export class EmployeeComponent {\nemployees: Employees;\nconstructor() {\nthis.employees = [\n{ empID: 'empid101', name: 'Jhon', gender: 'male', salary: 1200, DOB: '12/24/2016' },\n{ empID: 'empid102', name: 'Nancy', gender: 'female', salary: 2445.23, DOB: '4/2/2016' },\n{ empID: 'empid103', name: 'Julie', gender: 'female', salary: 5000.23, DOB: '4/14/2016' },\n{ empID: 'empid104', name: 'Brito', gender: 'male', salary: 4352, DOB: '5/12/2016' }\n];\n}\n/* tslint:disable */\nrefreshTheData(): void {\n  this.employees = [\n    { empID: 'empid101', name: 'Jhon', gender: 'male', salary: 1200, DOB: '12/24/2016' },\n    { empID: 'empid102', name: 'Nancy', gender: 'female', salary: 2445.23, DOB: '4/2/2016' },\n    { empID: 'empid103', name: 'Julie', gender: 'female', salary: 5000.23, DOB: '4/14/2016' },\n    { empID: 'empid104', name: 'Brito', gender: 'male', salary: 4352, DOB: '5/12/2016' },\n    { empID: 'empid105', name: 'Clark', gender: 'male', salary: 7543, DOB: '2/15/1990' }   ];    }\n\n\n\n interface Employees{\n  empID: string,\n  name: string,\n  gender: string,\n  salary: number,\n  DOB: Date\n}\ninterface Employees extends Array&lt;Employees&gt;{}\n</code></pre>\n"}, {"tags": ["javascript", "json", "angular", "typescript"], "owner": {"reputation": 21, "user_id": 9761147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enaIo.jpg?s=128&g=1", "display_name": "psyhedeliq", "link": "https://stackoverflow.com/users/9761147/psyhedeliq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540375179, "creation_date": 1540375179, "question_id": 52966144, "link": "https://stackoverflow.com/questions/52966144/how-can-i-change-the-font-size-of-the-placeholder-inside-an-angular-app-im-usi", "title": "How can I change the font size of the placeholder inside an Angular app? I&#39;m using formly ngx with my app", "body": "<pre><code>@Injectable()\nexport class SomeClass {\n    public SomeValidationForm(): FormlyFieldConfig[] {\n        return [\n            {\n                fieldGroupClassName: 'row',\n                fieldGroup: [\n                    {\n                        className: 'col-lg-12 col-md-12 col-sm-12 col-xs-12',\n                        key: '',\n                        type: 'radio',\n                        templateOptions: {\n                            label: '',\n                            placeholder: '',\n                            required: true,\n                            options: [{ value: '', label: ' ' }, { value: '', label: '' }]\n                        }\n                    }\n                ]\n            } \n</code></pre>\n\n<p>Attached an image for example[1]</p>\n\n<p>I want to change the font size of the placeholder in the img example!\nI am a beginner! I have searched for the answer but couldn't manage to find it!\nPlease help!\nThank you!</p>\n\n<pre><code>  [1]: https://i.stack.imgur.com/d13Dd.png\n</code></pre>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "angular-cli"], "comments": [{"owner": {"reputation": 9274, "user_id": 5166336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGjjg.png?s=128&g=1", "display_name": "Sunil Singh", "link": "https://stackoverflow.com/users/5166336/sunil-singh"}, "edited": false, "score": 0, "creation_date": 1540375058, "post_id": 52965908, "comment_id": 92838544, "body": "Can you share the code for <code>TabGuard</code> ?"}, {"owner": {"reputation": 5781, "user_id": 1427798, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/iTN8X.png?s=128&g=1", "display_name": "An-droid", "link": "https://stackoverflow.com/users/1427798/an-droid"}, "reply_to_user": {"reputation": 9274, "user_id": 5166336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGjjg.png?s=128&g=1", "display_name": "Sunil Singh", "link": "https://stackoverflow.com/users/5166336/sunil-singh"}, "edited": false, "score": 0, "creation_date": 1540379432, "post_id": 52965908, "comment_id": 92841156, "body": "I tried to remove the guard just in case, same result. And it happens in the RequestComponent  which is not protected by the guard"}], "answers": [{"comments": [{"owner": {"reputation": 5781, "user_id": 1427798, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/iTN8X.png?s=128&g=1", "display_name": "An-droid", "link": "https://stackoverflow.com/users/1427798/an-droid"}, "edited": false, "score": 0, "creation_date": 1540382028, "post_id": 52968287, "comment_id": 92842819, "body": "Just to precise, the correct url is loaded and the tab array is managed correctly also. the issue is only in the component the routerlink refers to. It&#39;s difficult to explain. I edited my question"}, {"owner": {"reputation": 5781, "user_id": 1427798, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/iTN8X.png?s=128&g=1", "display_name": "An-droid", "link": "https://stackoverflow.com/users/1427798/an-droid"}, "edited": false, "score": 0, "creation_date": 1540383595, "post_id": 52968287, "comment_id": 92843835, "body": "It&#39;s not relevant, you can think of each component as a simple nearly empty component that just has some input and select options. but I can share the template of the container, maybe more usefull"}], "tags": [], "owner": {"reputation": 9274, "user_id": 5166336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGjjg.png?s=128&g=1", "display_name": "Sunil Singh", "link": "https://stackoverflow.com/users/5166336/sunil-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1540381871, "last_edit_date": 1592644375, "creation_date": 1540381871, "answer_id": 52968287, "question_id": 52965908, "link": "https://stackoverflow.com/questions/52965908/on-angular-6-routerlink-with-tabs-is-not-loading-the-components-correctly/52968287#52968287", "title": "On Angular 6 RouterLink with tabs is not loading the components correctly", "body": "<blockquote>\n<h2>Issue</h2>\n</blockquote>\n<p>As your explanation, its look like you have shared the <code>data</code> in <code>tab</code>. You might be using the same reference when you are adding the <code>tab</code> into <code>tabs</code>.</p>\n<blockquote>\n<h2>Fix</h2>\n</blockquote>\n<p>Just do deep cloning of <code>tab</code> just before you add into <code>tabs</code> variable.</p>\n<p>Its better to remove the earlier data for the same tab before adding new one.</p>\n<h2>Service Class</h2>\n<pre><code>public tabs: Tab[] = []\n\npublic addTab(tab: Tab){\n   let cloneTab = JSON.parse(JSON.stringif(tab));\n   //remove the old matching tab here.\n   this.tabs.push(cloneTab);\n}\n</code></pre>\n"}], "owner": {"reputation": 5781, "user_id": 1427798, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/iTN8X.png?s=128&g=1", "display_name": "An-droid", "link": "https://stackoverflow.com/users/1427798/an-droid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 937, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540383932, "creation_date": 1540374491, "last_edit_date": 1540383932, "question_id": 52965908, "link": "https://stackoverflow.com/questions/52965908/on-angular-6-routerlink-with-tabs-is-not-loading-the-components-correctly", "title": "On Angular 6 RouterLink with tabs is not loading the components correctly", "body": "<p>The template of the tabs is simply this : </p>\n\n<pre><code>&lt;nav mat-tab-nav-bar\n     class=\"nav-container\"&gt;\n\n&lt;a mat-tab-link\n   [routerLink]=\"'/fixedtabroute'\"\n   routerLinkActive #rla0=\"routerLinkActive\"\n   [active]=\"rla0.isActive\"&gt;\n  Fixed tab\n&lt;/a&gt;\n\n&lt;a mat-tab-link\n   [routerLink]=\"tab.link\"\n   routerLinkActive #rla=\"routerLinkActive\"\n   [active]=\"rla.isActive\"\n   *ngFor=\"let tab of tabs\"\n   (mousedown)=\"closeTab($event, tab)\"&gt;\n  &lt;mat-icon&gt;{{ tab.icon }}&lt;/mat-icon&gt;\n  &lt;p&gt;{{ tab.title }}&lt;/p&gt;\n  &lt;span&gt;&amp;nbsp;{{tab.index}}&lt;/span&gt;\n\n  &lt;div class=\"tab-close\"&gt;\n    &lt;a mat-icon-button (click)=\"crossClose($event, tab)\"&gt;\n      &lt;mat-icon&gt;close&lt;/mat-icon&gt;\n    &lt;/a&gt;\n  &lt;/div&gt;\n&lt;/a&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>I have a service that keep tracks of openned tabs through an array, as you guess the number of tabs is not fix : </p>\n\n<pre><code>public tabs: Tab[] = [];\n</code></pre>\n\n<p>of </p>\n\n<pre><code>export interface TabInfo&lt;T = any&gt; {\n  id: string;\n  title: string;\n  link: string;\n  data?: T;\n}\nexport class Tab&lt;T = any&gt; implements TabInfo&lt;T&gt; {\n  public id: string;\n  public title: string;\n  public link: string;\n  public data?: T;\n  constructor(info: TabInfo&lt;T&gt;) {\n    this.id = info.id;\n    this.title = info.title;\n    this.link = info.link;\n    this.data = info.data;\n  }\n}\n</code></pre>\n\n<p>To activate/open a new tab my TabService provide this simple method (This method can be called only from the fixed tab) : </p>\n\n<pre><code>  public activate(tab: Tab): void {\n    this.router.navigateByUrl(tab.link);\n  }\n</code></pre>\n\n<p>The router is : </p>\n\n<pre><code>const appRoutes: Routes = [\n  {\n    path: '',\n    canActivateChild: [AuthGuard],\n    children: [\n      {\n        path: 'auth',\n        component: UnauthenticatedContainerComponent,\n        data: { excludeLogin: true },\n        children: [\n          { path: 'login', component: LoginComponent },\n        ],\n      },\n      {\n        path: '',\n        component: AuthenticatedContainerComponent,\n        data: { requireLogin: true },\n        children: [\n          { path: 'profile', component: ProfileComponent, resolve: { profile: ProfileResolve } },\n          {\n            path: '',\n            component: RequestContainerComponent,\n            children: [\n              {\n                path: '',\n                redirectTo: 'requests',\n                pathMatch: 'full',\n              },\n              { path: 'requests', component: RequestListComponent },\n              { path: 'request/:id/create/:index', component: RequestComponent },\n              { path: 'request/:id/results/:index', component: RequestResultListComponent, canActivate: [TabGuard] },\n              { path: 'request/:id/edit/:index', component: RequestComponent, canActivate: [TabGuard] },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n  { path: '**', redirectTo: '/' },\n];\n</code></pre>\n\n<p>The fixed tab is <code>RequestListComponent</code> each tab can be of any other child from <code>RequestContainerComponent</code> </p>\n\n<p>The <code>RequestContainerComponent</code> template (the componant does nothing else):</p>\n\n<pre><code>&lt;app-tabs&gt;&lt;/app-tabs&gt;\n&lt;div class=\"request-container-wrapper\"&gt;\n  &lt;router-outlet&gt;&lt;/router-outlet&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The issue is when I navigate between openned tabs from the array, the data of each tab stay the same as the data of either 1)The last openned tab I navigatedByUrl to 2)The last tab oppened after going back to the fixed tab. It happens only between tabs with the same url pattern as described in EDIT1.</p>\n\n<hr>\n\n<p>EDIT1 : </p>\n\n<p>I just tested openning multiple tabs that point to the same route but with different ids for example : </p>\n\n<pre><code>In tab 1 : /request/5c98c7eb77f998b79d2a53/edit/1\nIn tab 2 : /request/5c98cb8b77f998b79d2a58/edit/1\nIn tab 3 : /request/5c98c8fb77f998b79d2a55/results/1\nIn tab 4 : /request/5c98c8fb77f998b79d2a54/create/1\n</code></pre>\n\n<p>I can navigate with no component loading or data update issue between : edit, results, create. But if I navigate between different edit tabs nothing change I have my issue.</p>\n\n<p>My issue is only between same url pattern, why ?</p>\n"}, {"tags": ["angular", "typescript", "angular-components", "angular-dynamic-components"], "answers": [{"tags": [], "owner": {"reputation": 991, "user_id": 4544288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NXKlvPbQ4wA/AAAAAAAAAAI/AAAAAAAAABE/EBjOj2lD-N0/photo.jpg?sz=128", "display_name": "Massimiliano Sartoretto", "link": "https://stackoverflow.com/users/4544288/massimiliano-sartoretto"}, "is_accepted": false, "score": 5, "last_activity_date": 1541172050, "creation_date": 1541172050, "answer_id": 53121340, "question_id": 52965870, "link": "https://stackoverflow.com/questions/52965870/angular-lags-performance-if-multiple-dom-elements-inserted-via-dynamic-component/53121340#53121340", "title": "Angular lags performance if multiple DOM elements inserted via dynamic component with binding", "body": "<p>The scroll effect you are seeing is reasonable given the amount of rows you are rendering (and the \"complex\" grouping logic behind it).</p>\n\n<p>I would suggest to use some kind of virtual scroll component such as <a href=\"https://github.com/rintoj/ngx-virtual-scroller\" rel=\"noreferrer\">https://github.com/rintoj/ngx-virtual-scroller</a> or the new <a href=\"https://material.angular.io/cdk/scrolling/overview#virtual-scrolling\" rel=\"noreferrer\">https://material.angular.io/cdk/scrolling/overview#virtual-scrolling</a> to reuse DOM nodes and considerably improve performance</p>\n"}], "owner": {"reputation": 224, "user_id": 10000004, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oYSn_u2uU7g/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2dXtXcq5MBm-Sp3hbrDNPxmFngdw/mo/photo.jpg?sz=128", "display_name": "Ripul Chhabra", "link": "https://stackoverflow.com/users/10000004/ripul-chhabra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1448, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1541172050, "creation_date": 1540374367, "last_edit_date": 1541121899, "question_id": 52965870, "link": "https://stackoverflow.com/questions/52965870/angular-lags-performance-if-multiple-dom-elements-inserted-via-dynamic-component", "title": "Angular lags performance if multiple DOM elements inserted via dynamic component with binding", "body": "<p>I have created n-level nested expand/collapse functionality using dynamic components of angular 5.</p>\n\n<p>Functionally everything is working fine but when I load multiple dom elements browser either crashes or scroll stops working (Jerky Scroll)</p>\n\n<p>Basically its advanced reporting feature with user selected filters and group by dimensions that we are offering.</p>\n\n<p>Here is how my developed feature works</p>\n\n<p>1) User visits report page on the web app. \n2) The user selects filters and groupby params according to which I generate div based table having multiple row.</p>\n\n<p>Now I have kept condition checking that user can further expand/collapse row, based on the object which I am maintaining using group by. Here group by indicates the number of levels which user can utilize</p>\n\n<p>For example, Group by parameters are Country, OS, Appname and Campaign, I will render first level table displaying data for all countries available with expand button for every row, on click of expanding button I render another table having Operating System (OS) data for that specific country and so on...</p>\n\n<p>I have actually identified why performance issue occurs, it might be because I am checking for that specific expand/collapsed button identified by next groupby object and isCollapsed parameter. Because of that specific condition is checking multiple time periodically scroll either stops working or browser start performing slow </p>\n\n<p>Here is video illustrating how it works and scrollbar performance</p>\n\n<pre><code>https://youtu.be/m1a2uxhoNqc\n</code></pre>\n\n<p>I can not upload code on plunker or any other online tool because it's already integrated into a platform that I am developing having actual data.</p>\n\n<p>I am not able to add code here due to stackoverflow character limit but have created gist.</p>\n\n<p>Here is url to access code:</p>\n\n<pre><code>https://drive.google.com/drive/folders/1ZxAS8yHd8iHJ6ds3mZhLR0bw6o0cnRL6?usp=sharing\n</code></pre>\n\n<p>I would like to make code more reusable will do it once performance issue is resolved.</p>\n\n<p>Have a look into this and let me know my mistakes to improve code quality and performance issues.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["angular", "typescript", "api"], "comments": [{"owner": {"reputation": 61, "user_id": 6750694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6eHqi.png?s=128&g=1", "display_name": "Debasish Pothal", "link": "https://stackoverflow.com/users/6750694/debasish-pothal"}, "edited": false, "score": 0, "creation_date": 1540374442, "post_id": 52965776, "comment_id": 92838139, "body": "you are using observable, so i think you can use something like the below <code>this.http.post(...)    .map(response =&gt; {       &#47;&#47; do as neeeded    })    .catch(this.handleError)    .subscribe(       data =&gt; { \t\t&#47;&#47; do what you want with the data \t  },       () =&gt; { \t\t&#47;&#47; the action is complete now \t  }    );</code>  <code>private handleError(error: Response) {     console.error(error); &#47;&#47; log to console instead     return Observable.throw(error.json().error || &#39;Server Error&#39;); }</code>"}, {"owner": {"reputation": 397, "user_id": 9815897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HYbCS.jpg?s=128&g=1", "display_name": "Nemanja Andric", "link": "https://stackoverflow.com/users/9815897/nemanja-andric"}, "reply_to_user": {"reputation": 61, "user_id": 6750694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6eHqi.png?s=128&g=1", "display_name": "Debasish Pothal", "link": "https://stackoverflow.com/users/6750694/debasish-pothal"}, "edited": false, "score": 0, "creation_date": 1540374496, "post_id": 52965776, "comment_id": 92838175, "body": "I try that but no result..."}, {"owner": {"reputation": 397, "user_id": 9815897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HYbCS.jpg?s=128&g=1", "display_name": "Nemanja Andric", "link": "https://stackoverflow.com/users/9815897/nemanja-andric"}, "reply_to_user": {"reputation": 61, "user_id": 6750694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6eHqi.png?s=128&g=1", "display_name": "Debasish Pothal", "link": "https://stackoverflow.com/users/6750694/debasish-pothal"}, "edited": false, "score": 0, "creation_date": 1540374842, "post_id": 52965776, "comment_id": 92838387, "body": "Property &#39;subscribe&#39; does not exist on type &#39;MatDialogRef&lt;any, any&gt;&#39;."}, {"owner": {"reputation": 61, "user_id": 6750694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6eHqi.png?s=128&g=1", "display_name": "Debasish Pothal", "link": "https://stackoverflow.com/users/6750694/debasish-pothal"}, "edited": false, "score": 0, "creation_date": 1540375319, "post_id": 52965776, "comment_id": 92838696, "body": "try using Promises instead, trun your http call into a promise and try doing the actions in the resolve of the promise"}, {"owner": {"reputation": 397, "user_id": 9815897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HYbCS.jpg?s=128&g=1", "display_name": "Nemanja Andric", "link": "https://stackoverflow.com/users/9815897/nemanja-andric"}, "reply_to_user": {"reputation": 61, "user_id": 6750694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6eHqi.png?s=128&g=1", "display_name": "Debasish Pothal", "link": "https://stackoverflow.com/users/6750694/debasish-pothal"}, "edited": false, "score": 0, "creation_date": 1540375451, "post_id": 52965776, "comment_id": 92838787, "body": "Wait, I just want to be sure to understand me. On click on something I open Modal, and if this modal return to me true I proceed to rest of code. Problem is that modal is one component and I need a result of modal response in another component."}], "owner": {"reputation": 397, "user_id": 9815897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HYbCS.jpg?s=128&g=1", "display_name": "Nemanja Andric", "link": "https://stackoverflow.com/users/9815897/nemanja-andric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540374076, "creation_date": 1540374076, "question_id": 52965776, "link": "https://stackoverflow.com/questions/52965776/frize-block-of-code-while-waiting-for-a-response-from-modal", "title": "Frize block of code while waiting for a response from modal", "body": "<p>The idea is when a user works on something and try to run some sensitive component, he needs to confirm the password. In that way, we can authenticate the user.\nConfirm password dialog look something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xmaqL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xmaqL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Method in appGlobal.service.ts</p>\n\n<pre><code>  OpenACLModal() {\n    this.aclModal.open(AccessControlListComponent, { width: '450px' });\n  }\n</code></pre>\n\n<p>This is Open method in access-control-list.service.ts</p>\n\n<pre><code>  //Open a new dialog window with the specified configuration.\n  open(content: any, config: MatDialogConfig = {}): MatDialogRef&lt;any&gt; {\n    const dialog = this.dialog.open(content, config);\n\n    this.stack.push(dialog);\n\n    return dialog;\n  }\n</code></pre>\n\n<p>So, now I can trigger my modal in just one line of code, referenced in appGlobal.service.ts </p>\n\n<pre><code> let modal = this.appGlobal.OpenACLModal();\n</code></pre>\n\n<p>When I click ok on modal I perform this:</p>\n\n<pre><code>AuthUser() {\n    let auth = new Authorize();\n    auth.Credentials.CredentialsData1 = this.email;\n    auth.Credentials.CredentialsData2 = this.password;\n\n    this.http.post(this.appGlobal.BASE_SERVER_ADDRESS + 'api/AppServer/Authorize', auth).subscribe((res) =&gt; {\n      if (res['IsAuthorized'] == true) {\n        // do something\n      }\n      else // do something\n    });\n  }\n</code></pre>\n\n<p><strong>Q: I want to do something similar to this:</strong></p>\n\n<pre><code>let modal = this.appGlobal.OpenACLModal();\n    if (modal==true)\n    {\n        // I want to freeze code here and wait for the response of modal \n        // Check response if true\n        // do something\n    }\n    else alert(\"You don't have permission to perform this kind of action\");\n</code></pre>\n\n<p>How to do that? Thank anyone.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular6", "rxjs6"], "comments": [{"owner": {"reputation": 5159, "user_id": 2882688, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GZLz2.png?s=128&g=1", "display_name": "firegloves", "link": "https://stackoverflow.com/users/2882688/firegloves"}, "edited": false, "score": 0, "creation_date": 1540375658, "post_id": 52965491, "comment_id": 92838898, "body": "if the token is already expired your backend send 401 to you. you need to refresh before the token expires"}, {"owner": {"reputation": 5159, "user_id": 2882688, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GZLz2.png?s=128&g=1", "display_name": "firegloves", "link": "https://stackoverflow.com/users/2882688/firegloves"}, "edited": false, "score": 0, "creation_date": 1540375828, "post_id": 52965491, "comment_id": 92838994, "body": "or you can extend token&#39;s expiration date for each received request"}, {"owner": {"reputation": 734, "user_id": 8636516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4db0993772924fd3c4ee0a74b88d0f?s=128&d=identicon&r=PG&f=1", "display_name": "harkesh kumar", "link": "https://stackoverflow.com/users/8636516/harkesh-kumar"}, "edited": false, "score": 0, "creation_date": 1580107723, "post_id": 52965491, "comment_id": 105974787, "body": "is your problem get fixed can you help with answer how you did it"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8247592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-29qsoMFr32k/AAAAAAAAAAI/AAAAAAAAALU/45J9ifNg20s/photo.jpg?sz=128", "display_name": "Artemy Khodorev", "link": "https://stackoverflow.com/users/8247592/artemy-khodorev"}, "edited": false, "score": 0, "creation_date": 1540557810, "post_id": 53001731, "comment_id": 92921423, "body": "If I do in TokenInterceptor <code>this.auth.refreshTokens().subscribe(...)</code>, it goes into an infinite loop, returning an error at each iteration."}, {"owner": {"reputation": 6672, "user_id": 317951, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f441c9678f416d71cff295e717a018ff?s=128&d=identicon&r=PG", "display_name": "Jeff Fairley", "link": "https://stackoverflow.com/users/317951/jeff-fairley"}, "reply_to_user": {"reputation": 105, "user_id": 8247592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-29qsoMFr32k/AAAAAAAAAAI/AAAAAAAAALU/45J9ifNg20s/photo.jpg?sz=128", "display_name": "Artemy Khodorev", "link": "https://stackoverflow.com/users/8247592/artemy-khodorev"}, "edited": false, "score": 0, "creation_date": 1540852875, "post_id": 53001731, "comment_id": 93009282, "body": "Sounds like a different code flow problem, but in a microcosm, I still stand by the need to <code>subscribe()</code>."}], "tags": [], "owner": {"reputation": 6672, "user_id": 317951, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f441c9678f416d71cff295e717a018ff?s=128&d=identicon&r=PG", "display_name": "Jeff Fairley", "link": "https://stackoverflow.com/users/317951/jeff-fairley"}, "is_accepted": false, "score": 0, "last_activity_date": 1540530125, "creation_date": 1540530125, "answer_id": 53001731, "question_id": 52965491, "link": "https://stackoverflow.com/questions/52965491/refresh-token-jwt-in-interceptor-angular-6/53001731#53001731", "title": "Refresh token (JWT) in interceptor Angular 6", "body": "<p>In your example you never subscribe to your <code>refreshTokens().pipe()</code> code. Without a subscription, the observable won't execute.</p>\n"}, {"tags": [], "owner": {"reputation": 17285, "user_id": 3738171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2JdKH.jpg?s=128&g=1", "display_name": "Guerric P", "link": "https://stackoverflow.com/users/3738171/guerric-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1610393730, "last_edit_date": 1610393730, "creation_date": 1540822286, "answer_id": 53047345, "question_id": 52965491, "link": "https://stackoverflow.com/questions/52965491/refresh-token-jwt-in-interceptor-angular-6/53047345#53047345", "title": "Refresh token (JWT) in interceptor Angular 6", "body": "<p>You have to do something like that:</p>\n<pre><code>const firstReq = cloneAndAddHeaders(req);\n\nreturn next.handle(firstReq).pipe(\n   catchError(\n      err =&gt; {\n         if (err instanceof HttpErrorResponse) {\n            if (err.status === 401 || err.status === 403) {\n               if (firstReq.url === '/api2/auth/refresh') {\n                  auth.setToken('');\n                  auth.setRefreshToken('');\n                  this.router.navigate(['/login']);\n               } else {\n                  return this.auth.refreshTokens()\n                    .pipe(mergeMap(() =&gt; next.handle(cloneAndAddHeaders(req))));\n               }\n            }\n            return throwError(err.message || 'Server error');\n         }\n      }\n    )\n );\n</code></pre>\n<p>The implementation of <code>cloneAndAddHeaders</code> should be something like this:</p>\n<pre><code>private cloneAndAddHeaders(request: HttpRequest&lt;any&gt;): HttpRequest&lt;any&gt; {\n    return request.clone({\n       setHeaders: {\n           Authorization: `YourToken`\n       }\n    });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "is_accepted": false, "score": 0, "last_activity_date": 1540823092, "creation_date": 1540823092, "answer_id": 53047600, "question_id": 52965491, "link": "https://stackoverflow.com/questions/52965491/refresh-token-jwt-in-interceptor-angular-6/53047600#53047600", "title": "Refresh token (JWT) in interceptor Angular 6", "body": "<pre><code>req = this.auth.refreshTokens().pipe(\n      switchMap(() =&gt; req.clone({\n            setHeaders: {\n              Authorization: `Bearer ${this.auth.getToken()}`\n            }\n          }))\n      )\n</code></pre>\n\n<p>This will first call <code>refreshToken</code> and run the <code>tap</code> there, then emit request with the new <code>this.auth.getToken()</code>, note that <code>accToken</code> still have old value as the code is not rerun.</p>\n"}], "owner": {"reputation": 105, "user_id": 8247592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-29qsoMFr32k/AAAAAAAAAAI/AAAAAAAAALU/45J9ifNg20s/photo.jpg?sz=128", "display_name": "Artemy Khodorev", "link": "https://stackoverflow.com/users/8247592/artemy-khodorev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7822, "favorite_count": 2, "answer_count": 3, "score": 4, "last_activity_date": 1613271820, "creation_date": 1540373226, "last_edit_date": 1540820304, "question_id": 52965491, "link": "https://stackoverflow.com/questions/52965491/refresh-token-jwt-in-interceptor-angular-6", "title": "Refresh token (JWT) in interceptor Angular 6", "body": "<p>Initially, I had a function that simply checked for the presence of a token and, if it was not present, sent the user to the login header. Now I need to implement the logic of refreshing a token when it expires with the help of a refreshing token. But I get an error 401. The refresh function does not have time to work and the work in the interceptor goes further to the error. How can I fix the code so that I can wait for the refresh to finish, get a new token and not redirect to the login page?</p>\n\n<p><strong>TokenInterceptor</strong></p>\n\n<pre><code>import {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from \"@angular/common/http\";\nimport {Injectable, Injector} from \"@angular/core\";\nimport {AuthService} from \"../services/auth.service\";\nimport {Observable, throwError} from \"rxjs\";\nimport {catchError, tap} from \"rxjs/operators\";\nimport {Router} from \"@angular/router\";\nimport {JwtHelperService} from \"@auth0/angular-jwt\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TokenInterceptor implements HttpInterceptor{\n\n  private auth: AuthService;\n\n  constructor(private injector: Injector, private router: Router) {}\n\n  jwtHelper: JwtHelperService = new JwtHelperService();\n\n  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n\n    this.auth = this.injector.get(AuthService);\n\n    const accToken = this.auth.getToken();\n    const refToken = this.auth.getRefreshToken();\n\n    if ( accToken &amp;&amp; refToken ) {\n\n      if ( this.jwtHelper.isTokenExpired(accToken) ) {\n        this.auth.refreshTokens().pipe(\n          tap(\n            () =&gt; {\n              req = req.clone({\n                setHeaders: {\n                  Authorization: `Bearer ${accToken}`\n                }\n              });\n            }\n          )\n        )\n      } else {\n        req = req.clone({\n          setHeaders: {\n            Authorization: `Bearer ${accToken}`\n          }\n        });\n      }\n\n    }\n    return next.handle(req).pipe(\n      catchError(\n        (error: HttpErrorResponse) =&gt; this.handleAuthError(error)\n      )\n    );\n  }\n\n  private handleAuthError(error: HttpErrorResponse): Observable&lt;any&gt;{\n    if (error.status === 401) {\n      this.router.navigate(['/login'], {\n        queryParams: {\n          sessionFailed: true\n        }\n      });\n    }\n    return throwError(error);\n  }\n\n}\n</code></pre>\n\n<p><strong>AuthService</strong></p>\n\n<pre><code>import {Injectable} from \"@angular/core\";\nimport {HttpClient, HttpHeaders} from \"@angular/common/http\";\nimport {Observable, of} from \"rxjs\";\nimport {RefreshTokens, Tokens, User} from \"../interfaces\";\nimport {map, tap} from \"rxjs/operators\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService{\n\n  private authToken = null;\n  private refreshToken = null;\n\n  constructor(private http: HttpClient) {}\n\n  setToken(authToken: string) {\n    this.authToken = authToken;\n  }\n\n  setRefreshToken(refreshToken: string) {\n    this.refreshToken = refreshToken;\n  }\n\n  getToken(): string {\n    this.authToken = localStorage.getItem('auth-token');\n    return this.authToken;\n  };\n\n  getRefreshToken(): string {\n    this.refreshToken = localStorage.getItem('refresh-token');\n    return this.refreshToken;\n  };\n\n  isAuthenticated(): boolean {\n    return !!this.authToken;\n  }\n\n  isRefreshToken(): boolean {\n    return !!this.refreshToken;\n  }\n\n  refreshTokens(): Observable&lt;any&gt; {\n\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': 'Bearer ' + this.getRefreshToken()\n      })\n    };\n\n    return this.http.post&lt;RefreshTokens&gt;('/api2/auth/refresh', {}, httpOptions)\n      .pipe(\n        tap((tokens: RefreshTokens) =&gt; {\n          localStorage.setItem('auth-token', tokens.access_token);\n          localStorage.setItem('refresh-token', tokens.refresh_token);\n          this.setToken(tokens.access_token);\n          this.setRefreshToken(tokens.refresh_token);\n          console.log('Refresh token ok');\n        })\n      );\n  }\n\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1540373466, "post_id": 52965449, "comment_id": 92837498, "body": "The <code>multi-pages website</code> statement is ambiguous : do you have a SPA (Angular with its router), or do you have your application on two separate tabs in your browser ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1540373530, "post_id": 52965449, "comment_id": 92837541, "body": "Also, please post the code of your data service, as it might help us to see if you&#39;re making HTTP calls or using RxjS proxies such as <code>Subject</code> or <code>BehaviorSubject</code>"}, {"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540373872, "post_id": 52965449, "comment_id": 92837744, "body": "Added the info. Thank you."}, {"owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "edited": false, "score": 0, "creation_date": 1540373995, "post_id": 52965449, "comment_id": 92837831, "body": "u can pass the data on the url while u navigate like queryParam"}, {"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540374217, "post_id": 52965449, "comment_id": 92837974, "body": "The information is passed on fine. The problem is that the contact page seems to reset when you navigate to it, and doesn&#39;t take the data from the data service. Ideally, the page doesn&#39;t reset, but otherwise it should get data from the data service, if that data is available when it loads."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540376506, "post_id": 52966063, "comment_id": 92839381, "body": "When is <code>ngOnDestroy</code> performed? Internet tells me it is &#39;when a component is destroyed&#39;. If I change from my contact page to my main page, is that the moment the contact page is &#39;destroyed&#39;?  Also, adding the unsubscribe function doesn&#39;t seem to work. If I add it, the contact form is receiving no information from the service anymore."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540376696, "post_id": 52966063, "comment_id": 92839506, "body": "<a href=\"https://angular.io/guide/lifecycle-hooks\" rel=\"nofollow noreferrer\">According to the documentation</a>, it&#39;s performed when a component is indeed destroyed. A component is destroyed when it&#39;s not displayed in the screen anymore : on deletion, Angular calls <code>OnDestroy</code>. What do you mean exactly by <code>receiving no information from the service anymore</code> ? Can you be more explicit, something like &quot;when I change routes and come back, nothign is displayed in the console&quot; ?"}, {"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540378943, "post_id": 52966063, "comment_id": 92840859, "body": "Initially, I could see in the console that the contact page was receiving the data I was giving it from the main page. With the addition of <code>unsubscribe</code>, it no longer does (which makes sense if the contact page is unsubscribed when not displayed). Now, I never see the console show anything coming from the contact page, which leads me to think that it is never receiving information from the data service."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540379009, "post_id": 52966063, "comment_id": 92840897, "body": "Well yes, that&#39;s kind of the point ... What behavior are you expecting ? Do you really want your deleted component to perform actions when you change data in your service ? Be warned that it&#39;s dangerous ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540379067, "post_id": 52966063, "comment_id": 92840932, "body": "@KKiek If you want to see the data you have sent to your service, you will have to reload your contact component, or subscribe to your service in a non-destroyed feature (such as the service itself, or the app component)"}, {"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540379328, "post_id": 52966063, "comment_id": 92841082, "body": "Then probably, <code>ngOnInit</code> is not the best place to subscribe to the service. What would be a good place to do so? I&#39;ve tried <code>ngOnChanges</code>, but then I also get no output from the contact page in the console."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540379454, "post_id": 52966063, "comment_id": 92841169, "body": "Again, you need to tell me your desired behavior. If you simply want to log when the value changes, you can do it in the service. The issue you have isn&#39;t with <code>ngOnInit</code>, but with your desired behavior, which has to do with what you want to do, and where you want to do it !"}, {"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540379818, "post_id": 52966063, "comment_id": 92841389, "body": "Sorry if I&#39;m not very clear. I&#39;m quite new to this kind of programming. What I want is pass information from the main page to the service. The contact page should retrieve the information from the service every time the user navigates to the contact page."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540380530, "post_id": 52966063, "comment_id": 92841855, "body": "Then it&#39;s done already ! everytime you will open the contact page, the last value you have emitted will be displayed in your console. Your service, if it is a singleton (= injected into the highest module you have), will only hold the last value of the stream. If not, simply change your <code>Subject</code> to a <code>BehaviorSubject</code> (same principle, except that the <code>BehaviorSubject</code> starts with a value). I made a stackblitz to show you the principle : <a href=\"https://stackblitz.com/edit/angular-1udpfm?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a>. Simply emit a value, then show the component."}, {"owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "edited": false, "score": 0, "creation_date": 1540393173, "post_id": 52966063, "comment_id": 92850713, "body": "Using BehaviorSubject seems to have done the trick! Thanks so much for the help."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": true, "score": 0, "last_activity_date": 1540374924, "creation_date": 1540374924, "answer_id": 52966063, "question_id": 52965449, "link": "https://stackoverflow.com/questions/52965449/angular2-carry-over-value-of-variable-when-changing-pages/52966063#52966063", "title": "Angular2 carry over value of variable when changing pages", "body": "<p>You're creating a <code>Subject</code> : this is a proxy that serves as an observable and an observer. </p>\n\n<p>When you create a <code>[Behavior|Replay]Subject</code>, you're creating a <strong>hot stream</strong> : any observer subscribing to it will receive the last value of it. </p>\n\n<p>This is different from a <strong>cold stream</strong>, like HTTP calls, where the whole stream is transmitted : once you have subscribed to it and the observable is finalized, you're not subscribed to it anymore. </p>\n\n<p>In code words, it means everytime you create an instance of your contact component, you create a new subscription, and the subscription code is ran everytime you call <code>next</code> on your subject <strong>OR</strong> when you create a new subscription (hot streams get the latest value of the stream at their first subscription).</p>\n\n<p>To avoid that, you can either limit your subscription to a single call, or delete your subscrpition at component destruction. I recommend the latter : </p>\n\n<pre><code>ngOnInit() {\n  this.streamSubscription = this.dataService.Stream.subscribe(...);\n}\n\nngOnDestroy() {\n  this.streamSubscription.unsubscribe();\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6025681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0Yid_yY4H4/AAAAAAAAAAI/AAAAAAAAAEg/YqCC_0dlq6A/photo.jpg?sz=128", "display_name": "K Kiek", "link": "https://stackoverflow.com/users/6025681/k-kiek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 52966063, "answer_count": 1, "score": 1, "last_activity_date": 1540374936, "creation_date": 1540373102, "last_edit_date": 1540374936, "question_id": 52965449, "link": "https://stackoverflow.com/questions/52965449/angular2-carry-over-value-of-variable-when-changing-pages", "title": "Angular2 carry over value of variable when changing pages", "body": "<p>I have a multi-page website (using the router) and would like to carry a variable value over from one page to the other. </p>\n\n<p>On my contact form page, I have the following code:</p>\n\n<pre><code>testName:string = \"hello\";\n\nngOnInit()\n{       \n    this.dataService.Stream\n        .subscribe(\n            (city:City) =&gt; this.processData(city),\n            (err) =&gt; console.log('Error at processing data'),\n            () =&gt; console.log('Complete...')\n        )\n}\n\nprocessData(city:City)\n{\n    console.log('the city name is: ', this.testName);\n    this.problematicCity = city;\n    this.testName = city.name;\n    console.log('received data for city: ', this.testName);\n}\n</code></pre>\n\n<p>When I'm on the main page and send a city to the data service, I get the following output in the console:</p>\n\n<pre><code>the city name is: hello\nreceived data for city: Luxemburg\n</code></pre>\n\n<p>I therefore know that information is passed on correctly.\nHowever, when I then go to the contact page, <code>testName</code> is changed back to 'hello'.</p>\n\n<p>How do I prevent this from happening?\nI have tried not initiating testName, but then I get the error: <code>assignment to undeclared variable string</code>.</p>\n\n<p>Moving <code>testName:string = \"hello\";</code> to <code>ngOnInit</code> also results in the same error.</p>\n\n<p><strong>Addition:</strong> This is my data service:</p>\n\n<pre><code>//data.service.ts\nimport {Subject} from 'rxjs/Subject';\nimport {Injectable} from 'angular2/core';\nimport {City} from '../model/city.model';\n\n@Injectable()\n\nexport class DataService\n{\n    Stream:Subject&lt;City&gt;;\n\n    constructor()\n    {\n        this.Stream = new Subject();\n    }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "html2canvas", "pdfmake"], "owner": {"reputation": 155, "user_id": 7301611, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bc878b0dfef60db1d5e17185cf75e60?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil89", "link": "https://stackoverflow.com/users/7301611/jamil89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 539, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540372584, "creation_date": 1540372584, "question_id": 52965246, "link": "https://stackoverflow.com/questions/52965246/svg-get-not-rendered-in-a-pdf-file-using-pdfmake-and-html2canvas", "title": "SVG get not rendered in a pdf file (using pdfmake and html2canvas)", "body": "<p>This is my code but this block has some problems on IE11:</p>\n\n<pre><code>let chartTwo = document.getElementById('chartPosizioneGlobale');\n              self.callHtml2canvas(chartTwo, 'chartPosizioneGlobale').then((canvas) =&gt; {\n                const chartData = canvas.toDataURL('image/png');\n                /* self.docDefinition.content.push({\u00a0image:\u00a0chartData, alignment: 'right'\u00a0});*/\n                self.docDefinition.content['columns'] = {};\n                self.docDefinition.content.push({ \"columns\": [{ image: chartData, fit: [400, 400] }/*, { image: chartData, fit: [300, 300] }*/] }); \n</code></pre>\n\n<p>This is an svg chart (ngx-charts plugin) and it get rendered on chrome as pdf. I'm tried to change html2canvas versione but it still doesn't work. This doesn't work on IE, I have all the right elements on my pdf except to this chart. Anyone know a solution or you suggest to use another plugin? Thanks (following a complete .ts)</p>\n\n<pre><code> import { Component, OnInit, ViewChildren } from '@angular/core';\ndeclare var $: any;\nimport * as _ from 'underscore';\nimport { PageService } from '../commons/service.component';\nimport { AppSettings } from '../commons/url-constant';\nimport { DatePipe, DecimalPipe } from '@angular/common';\nimport { IOption } from 'ng-select';\nimport { TimelineLayoutComponent } from '../timeline-layout/timeline-layout.component';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Ng2SmartTableModule, LocalDataSource } from 'ng2-smart-table';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { LastUpdateComponent } from '../last-update/last-update.component';\nimport { DotsMenuComponent } from '../commons/dots-menu/dots-menu.component';\nimport { SnotifyService, SnotifyPosition, SnotifyToastConfig } from 'ng-snotify';\nimport { SharedServiceComponent } from '../commons/shared-service/shared-service.component';\nimport { StartupService } from '../commons/startup.service';\nimport { GenericChartComponent } from '../generic-chart/generic-chart.component';\n/*import * as jsPDF from 'jspdf';*/\n\ndeclare var pdfMake: any;\nimport pdfFonts from \"./pdfmake/vfs_fonts\";\nimport pdfMake from \"pdfmake/build/pdfmake\";\n\n/*import 'es6-promise';*/\n\npdfMake.vfs = pdfFonts.pdfMake.vfs;\nimport * as html2canvas from 'html2canvas';\nimport { AUTO_STYLE } from '@angular/animations';\nimport { discardPeriodicTasks } from '@angular/core/testing';\npdfMake.fonts = {\n  myFont: {\n    normal: 'Ubuntu-Regular.ttf',\n    bold: 'Ubuntu-Bold.ttf',\n    italics: 'Ubuntu-Light.ttf',\n    bolditalics: 'Ubuntu.ttf'\n  }\n};\n\n@Component({\n  selector: 'app-report-manager',\n  templateUrl: './report-manager.component.html',\n  styleUrls: ['./report-manager.component.scss']\n})\n\nexport class ReportManagerComponent implements OnInit {\n\n\n  /* Provvisori */\n\n  chartAsset2Report = [];\n  idChartAsset2 = \"chartAsset2\";\n  tipoServizio = 'UBI Light PF';\n  ndg = 'XX9EF41241F';\n  nConsulenza = '23648124312';\n  luogo = 'Bergamo';\n  cliente = 'Mario Rossi';\n  today = '23 Ottobre 2018';\n  titoloSezione = 'Vista di sintesi - Principali informazioni di portafoglio';\n  currentPage = 0;\n  downloadFlag = false;\n\n  orangeBar = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQUAAAAECAYAAAA3ZFkCAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAA8SURBVHhe7dgxAQAgAMOwgSWMopYXHlwseeqh4+x1AwAAAADUmL8AAAAAQAlTEAAAAADKmIIAAAAAUCV5/C4CwC0exZ0AAAAASUVORK5CYII=';\n\n  logoUbiBanca = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD';\n\n  iconaVistaSintesi = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAnCAYAAAB9qAq4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAK+SURBVFhH5Zg9a1RBFIb9TyJKNESNJqJZCz';\n\n  docDefinition = {\n    content: [\n    ],\n    defaultStyle: {\n      font: 'myFont'\n    },\n    styles: {\n      h1: {\n        fontSize: 28,\n        color: '#004777',\n        bold: true\n      },\n      h2: {\n        fontSize: 17,\n        color: '#004777',\n        bold: true\n      },\n      h3: {\n        fontSize: 12,\n        color: '#004777'\n      },\n      blue: {\n        color: '#004777'\n      }\n    },\n    pageOrientation: 'landscape',\n    pageMargins: [0, 0, 0, 0]\n  };\n\n  /*  view: any[] = [700, 400];*/\n\n  // options\n  showXAxis = true;\n  showYAxis = true;\n  gradient = false;\n  showLegend = true;\n  showXAxisLabel = true;\n  xAxisLabel = 'Country';\n  showYAxisLabel = true;\n  yAxisLabel = 'Population';\n\n  colorScheme = {\n    domain: ['#5AA454', '#A10A28', '#C7B42C', '#AAAAAA']\n  };\n\n  initialAssets;\n  prodottiPortafoglio;\n  lastUpdate;\n  rows;\n  /*pdf = [{\n    'tipo': \"grafico\",\n    \"grafico\": [\n      { \"CODICE\": \"001\", \"DESCRIZIONE\": \"OBB. E TIT. STATO\", \"PERCENTUALE\": 69.86, \"CONTROVALORE\": 3942097.1, \"CTVPFTTOTALE\": 5642856.95 },\n      { \"CODICE\": \"002\", \"DESCRIZIONE\": \"OBB. E TIT. STATO\", \"PERCENTUALE\": 69.86, \"CONTROVALORE\": 3942097.1, \"CTVPFTTOTALE\": 5642856.95 }\n    ]\n  }];*/\n\n  constructor(private pageService: PageService) {\n    let self = this;\n    /*self.pdf.forEach(function (item) {\n      if (item['tipo'] == 'grafico') {\n        item['grafico'].forEach(function (element) {\n          element['name'] = element['DESCRIZIONE'];\n          element['value'] = element['CTVPFTTOTALE'] / 100 * element['PERCENTUALE'];\n          element['percent'] = element['PERCENTUALE'];\n        })\n      }\n    })*/\n    self.initialAssets = self.pageService.getSessionStorage('ptfIniziale_' + AppSettings.lastCustomerNdg);\n    if (self.initialAssets) {\n      let filteredPf = self.initialAssets['grpPortafoglio']['grpElementoSaldo'];\n      self.lastUpdate = AppSettings.lastUpdate;\n      let groupByCode = _.groupBy(filteredPf, 'dscRapportoCompleto');\n      var dataReworked = _.map(groupByCode, function (value, key) {\n        return {\n          name: key,\n          value: value\n        };\n      });\n      self.prodottiPortafoglio = dataReworked;\n      self.prodottiPortafoglio.forEach(function (it) {\n        let arrayCtv = [];\n        let arrayUtile = [];\n        it['value'].forEach(function (element) {\n          arrayCtv.push(element['impCtvDisponibile']);\n          arrayUtile.push(element['impUtilePerdita'])\n        })\n        var sum = _.reduce(arrayCtv, function (memo, num) { return memo + num; }, 0);\n        var sum2 = _.reduce(arrayUtile, function (memo, num) { return memo + num; }, 0);\n        it['ctvTotale'] = sum;\n        it['impUtileTotale'] = sum2;\n      });\n    }\n    let filters = {}\n    /*  debugger;*/\n    self.pageService.getProfilazioneReport(filters).toPromise().then(response =&gt; {\n      let groupedDatas = _.groupBy(response, 'CODICESEZIONE');\n      groupedDatas = _.toArray(groupedDatas);\n      self.rows = groupedDatas;\n      console.log(self.rows)\n      let arr = [];\n      self.rows.forEach(function (el) {\n        let stored = _.filter(el, function (store) {\n          if (store.STORED &amp;&amp; store.STORED != '') {\n            arr.push(store.STORED);\n          }\n        })\n      })\n      arr.forEach(function (stored) {\n        if (stored == '/recuperaasset2livreport/') {\n          self.pageService.getAsset2Report(filters).toPromise().then(response =&gt; {\n\n            let firstAggregazione = [];\n            firstAggregazione.push({ content: [] });\n\n            firstAggregazione['content'] = response;\n            firstAggregazione['content'].forEach(function (item) {\n              item['name'] = item['DESCRIZIONE'];\n              item['value'] = item['CTVPFTTOTALE'] / 100 * item['PERCENTUALE'];\n              item['percent'] = item['PERCENTUALE'];\n            });\n            self.chartAsset2Report = firstAggregazione['content'];\n          })\n        }\n      })\n\n\n\n    })\n  }\n\n  callHtml2canvas(chart, chartId) {\n    return html2canvas(chart, {\n      async: false,\n      //height: 500,\n      //width: 1000,\n      //scale: 3,\n      useCORS: false,\n      backgroundColor: null,\n      logging: false,\n      onclone: (document) =&gt; {\n        document.getElementById(chartId).style.visibility = 'visible';\n      }\n    })\n\n  }\n\n  printHeader() {\n    if (this.currentPage &gt; 3) {\n      this.docDefinition.content.push({\n        columns: [\n          {\n            width: 35,\n            image: this.iconaVistaSintesi\n          },\n          {\n            width: 'auto',\n            text: this.titoloSezione,\n            style: ['h2'],\n            margin: [0, 7, 0, 0]\n          }\n        ], columnGap: 10, margin: [10, 15, 0, 0], pageBreak: 'before'\n      });\n      this.docDefinition.content.push({ image: this.orangeBar, margin: [0, 5, 0, 20] });\n    }\n  }\n  printFooter() {\n    if (this.currentPage &gt; 3) {\n      this.docDefinition.content.push({\n        columns: [\n          {\n            width: 'auto',\n            text: this.currentPage,\n            style: ['blue'],\n            margin: [15, 15, 580, 15]\n          },\n          {\n            width: 180,\n            image: this.logoUbiBanca,\n            margin: [30, 15]\n          }\n        ]\n      });\n    }\n    else if (this.currentPage === 2)\n      this.docDefinition.content.push({ image: this.logoUbiBanca, width: 180, margin: [25, 150, 0, 15], alignment: 'right' });\n  }\n\n  ngOnInit() {// Charts are now rendered\n\n    let self = this;\n    let logo = document.getElementById('logoUbiBanca');\n    self.callHtml2canvas(logo, 'logoUbiBanca').then((canvas) =&gt; {\n      /* Pg.1 */\n      self.currentPage++;\n      const \u00a0logoData \u00a0= \u00a0canvas.toDataURL();\n      self.docDefinition.content.push({ \u00a0image: \u00a0logoData, \u00a0width: \u00a0230, margin: [35, 50, 0, 175] \u00a0});\n      self.docDefinition.content.push({ text: 'Report di Diagnosi e Monitoraggio', style: ['h1'], margin: [35, 0, 0, 2] });\n      self.docDefinition.content.push({ image: self.orangeBar, margin: 0 });\n      let \u00a0banner \u00a0= \u00a0document.getElementById('bannerCanvas');\n      self.callHtml2canvas(banner, \u00a0'bannerCanvas').then((canvas) \u00a0=&gt; \u00a0{\n        const \u00a0bannerData \u00a0= \u00a0canvas.toDataURL();\n        self.docDefinition.content.push({ \u00a0image: \u00a0bannerData, margin: 0, \u00a0pageBreak: \u00a0'after' \u00a0});\n        /* Pg.2 */\n        self.currentPage++;\n        self.docDefinition.content.push({ text: self.cliente, alignment: 'right', style: ['h1'], margin: [25, 260, 35, 5] });\n        self.docDefinition.content.push({ image: self.orangeBar, margin: 0 });\n        self.docDefinition.content.push({ text: self.tipoServizio, alignment: 'right', style: ['blue'], margin: [25, 8, 35, 2] });\n        self.docDefinition.content.push({ text: 'NDG ' + self.ndg, alignment: 'right', style: ['blue'], margin: [25, 2, 35, 2] });\n        self.docDefinition.content.push({ text: 'Rapporto di consulenza n. ' + self.nConsulenza, alignment: 'right', style: ['blue'], margin: [25, 2, 35, 5] });\n        self.docDefinition.content.push({ text: self.luogo + ', ' + self.today, alignment: 'right', style: ['blue'], margin: [25, 15, 35, 2], fontSize: 9 });\n        self.printFooter();\n        /* Pg.3 */\n        self.currentPage++;\n        self.docDefinition.content.push({ text: 'Indice', alignment: 'right', style: ['h1'], margin: [25, 260, 35, 5], pageBreak: 'before' });\n        self.docDefinition.content.push({ image: self.orangeBar, margin: 0 });\n        this.docDefinition.content.push({\n          columns: [\n            {\n              width: '50%',\n              text: ''\n            },\n            {\n              width: '45%',\n              table: {\n                widths: ['*', 'auto', 20, '*'],\n                body: [\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Profilatura ed elenco rapporti considerati', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Posizione globale e composizione portafoglio', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Performance', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Andamento del portafoglio complessivo', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Andamento plus/minus posizioni in essere', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'CVaR', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Indicatore Sintetico di Qualit\u00e0 e Adeguatezza', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Scadenziario e posizione fiscale', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Analisi della componente azionaria', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }],\n                  [{ image: self.iconaVistaSintesi, width: 25 }, { text: 'Analisi della componente obbligazionaria', style: ['blue'], bold: true, margin: [0, 5, 0, 0] }, '', { text: 'pag.x', style: 'blue', bold: true, margin: [0, 5, 0, 0] }]\n                ]\n              },\n              layout: 'noBorders'\n            },\n            {\n              width: '5%',\n              text: ''\n            }\n          ]\n        });\n        let \u00a0chart \u00a0= \u00a0document.getElementById('chartElencoRapporti');\n        self.callHtml2canvas(chart, \u00a0'chartElencoRapporti').then((canvas) \u00a0=&gt; \u00a0{\n          /* Pg.4 */\n          self.currentPage++;\n          self.printHeader();\n          //DA SCOMMENTARE\n          /* const chartData = canvas.toDataURL();\n           self.docDefinition.content.push({ image: chartData, width: 400 });*/\n          **let chartTwo = document.getElementById('chartPosizioneGlobale');\n          self.callHtml2canvas(chartTwo, 'chartPosizioneGlobale').then((canvas) =&gt; {\n            const chartData = canvas.toDataURL('image/png');\n            /* self.docDefinition.content.push({\u00a0image:\u00a0chartData, alignment: 'right'\u00a0});*/\n            self.docDefinition.content['columns'] = {};\n            self.docDefinition.content.push({ \"columns\": [{ image: chartData, fit: [400, 400] }/*, { image: chartData, fit: [300, 300] }*/] });**\n\n            //self.printFooter();\n\n\n            /* Pg. 43 */\n            const disclaimer1 = 'Lorem ipsum dolor sit amet';\n\n            self.currentPage++;\n            self.printHeader();\n            self.docDefinition.content.push({ text: disclaimer1, margin: [35, 15, 35, 3] });\n            self.docDefinition.content.push({ text: disclaimer2, margin: [35, 3, 35, 3] });\n            self.docDefinition.content.push({ text: disclaimer3, margin: [35, 3, 35, 3] });\n            self.docDefinition.content.push({ text: disclaimer4, margin: [35, 3, 35, 15] });\n            self.printFooter();\n\n            self.downloadFlag = true;\n\n          });\n        });\n      });\n    });\n\n  }\n  download() {\n    // Download PDF\n    let self = this;\n    if (self.downloadFlag) {\n      pdfMake.createPdf(self.docDefinition).download('chartToPdf' + '.pdf');\n    } else {\n      console.log('Chart is not yet rendered!');\n    }\n\n  }\n\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "error-handling", "tsconfig"], "answers": [{"comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 1, "creation_date": 1540372973, "post_id": 52965328, "comment_id": 92837187, "body": "Not true ..the type of the variable is inferred based on the assignment .."}], "tags": [], "owner": {"reputation": 192, "user_id": 6919520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a2yDP.jpg?s=128&g=1", "display_name": "lone_worrior", "link": "https://stackoverflow.com/users/6919520/lone-worrior"}, "is_accepted": false, "score": 0, "last_activity_date": 1540372783, "creation_date": 1540372783, "answer_id": 52965328, "question_id": 52965234, "link": "https://stackoverflow.com/questions/52965234/typescript-compiler-type-assignment-error-ignored/52965328#52965328", "title": "Typescript compiler type assignment error ignored", "body": "<p>This will not give compile error because you have not assigned the type of <code>customer</code> or <code>customerViewModel</code>, but if you do something like this then you should get compile time error:</p>\n\n<pre><code>const customer:Customer = new Customer();\nlet customerViewModel:CustomerLayoutViewModel = new CustomerLayoutViewModel();\n\ncustomerViewModel  = customer;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3482, "user_id": 1093774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34c14ab130b6fbd08cb2cd54326de7b7?s=128&d=identicon&r=PG", "display_name": "Diemauerdk", "link": "https://stackoverflow.com/users/1093774/diemauerdk"}, "edited": false, "score": 0, "creation_date": 1540375434, "post_id": 52965376, "comment_id": 92838774, "body": "But doing that is not a solution for me - I have to configure(if possible) the compiler so that this scenario gives a compile error."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 3482, "user_id": 1093774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34c14ab130b6fbd08cb2cd54326de7b7?s=128&d=identicon&r=PG", "display_name": "Diemauerdk", "link": "https://stackoverflow.com/users/1093774/diemauerdk"}, "edited": false, "score": 1, "creation_date": 1540377166, "post_id": 52965376, "comment_id": 92839789, "body": "@Diemauerdk not possible, this is a fundamental way the type system works. The private property has no runtime impact if unassigned, it&#39;s the closest you will get to normative typing in typescript"}, {"owner": {"reputation": 3482, "user_id": 1093774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34c14ab130b6fbd08cb2cd54326de7b7?s=128&d=identicon&r=PG", "display_name": "Diemauerdk", "link": "https://stackoverflow.com/users/1093774/diemauerdk"}, "edited": false, "score": 0, "creation_date": 1540377708, "post_id": 52965376, "comment_id": 92840134, "body": "Okay, but that sucks. I have a background as C# developer, so I guess I still carry that bag with me :) In my opinion, it&#39;s a bug but I guess it&#39;s by design then. I had hoped that I could configure a more strict behaviour that would catch this, for example in tsconfig. Thanks for the answer though :)"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 3482, "user_id": 1093774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34c14ab130b6fbd08cb2cd54326de7b7?s=128&d=identicon&r=PG", "display_name": "Diemauerdk", "link": "https://stackoverflow.com/users/1093774/diemauerdk"}, "edited": false, "score": 0, "creation_date": 1540377785, "post_id": 52965376, "comment_id": 92840182, "body": "@Diemauerdk for simple classes you will probably get unwanted compatibilities usually as the class grows these become less of an issue. I have a  C# background and it is an adjustment I agree :)"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 0, "last_activity_date": 1540372910, "creation_date": 1540372910, "answer_id": 52965376, "question_id": 52965234, "link": "https://stackoverflow.com/questions/52965234/typescript-compiler-type-assignment-error-ignored/52965376#52965376", "title": "Typescript compiler type assignment error ignored", "body": "<p>Typescript uses structural typing when determining type compatibility. This means that if the two types have a compatible structure they will be compatible:</p>\n\n<pre><code>class Customer { name: string }\nclass CustomerLayoutViewModel { name: string }\nconst customer = new Customer();\nlet customerViewModel = new CustomerLayoutViewModel();\ncustomerViewModel = customer; // OK compatible\n</code></pre>\n\n<p>If <code>Customer</code> has extra properties the types are still compatible, there is no chance someone will access through <code>customerViewModel</code> something that isn't there:</p>\n\n<pre><code>class Customer { name: string; fullName: string }\nclass CustomerLayoutViewModel { name: string }\nconst customer = new Customer();\nlet customerViewModel = new CustomerLayoutViewModel();\ncustomerViewModel = customer; // still OK compatible\n</code></pre>\n\n<p>You will get compatibility errors if <code>CustomerLayoutViewModel</code> has extra required properties:</p>\n\n<pre><code>class Customer { name: string }\nclass CustomerLayoutViewModel { name: string; fullName: string }\nconst customer = new Customer();\nlet customerViewModel = new CustomerLayoutViewModel();\ncustomerViewModel = customer; //error now\n</code></pre>\n\n<p>The one way to ensure types are incompatible it to add a private field to a class. private fields will not be compatible with any other field in any other class event if the name is the same:</p>\n\n<pre><code>class Customer { private x: string }\nclass CustomerLayoutViewModel { private x: string }\nconst customer = new Customer();\nlet customerViewModel = new CustomerLayoutViewModel();\ncustomerViewModel = customer; //error Types have separate declarations of a private property 'x'. \n</code></pre>\n"}], "owner": {"reputation": 3482, "user_id": 1093774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34c14ab130b6fbd08cb2cd54326de7b7?s=128&d=identicon&r=PG", "display_name": "Diemauerdk", "link": "https://stackoverflow.com/users/1093774/diemauerdk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52965376, "answer_count": 2, "score": 0, "last_activity_date": 1540376149, "creation_date": 1540372556, "last_edit_date": 1540376149, "question_id": 52965234, "link": "https://stackoverflow.com/questions/52965234/typescript-compiler-type-assignment-error-ignored", "title": "Typescript compiler type assignment error ignored", "body": "<p>I have the following scenario:</p>\n\n<pre><code>const customer = new Customer();\nlet customerViewModel = new CustomerLayoutViewModel();\n\ncustomerViewModel = customer;\n</code></pre>\n\n<p>This does not produce an error when compiled which in my mind is the wrong behaviour. This seems to be due to the fact that <code>Customer</code> and <code>CustomerLayoutViewModel</code> are completely identical.</p>\n\n<p>The problem is that over time they will not be identical and I want the above code to give a compile error because the types are different.</p>\n\n<p>So my question: How do I configure the compiler to produce an error in the above example?</p>\n"}, {"tags": ["angular", "typescript", "unit-testing", "karma-jasmine", "concept"], "answers": [{"comments": [{"owner": {"reputation": 18470, "user_id": 2398593, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XQHYX.jpg?s=128&g=1", "display_name": "maxime1992", "link": "https://stackoverflow.com/users/2398593/maxime1992"}, "reply_to_user": {"reputation": 1771, "user_id": 2309928, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6fryX.jpg?s=128&g=1", "display_name": "Synoon", "link": "https://stackoverflow.com/users/2309928/synoon"}, "edited": false, "score": 0, "creation_date": 1540373860, "post_id": 52964990, "comment_id": 92837735, "body": "But do you compile your prod bundle with AOT?"}, {"owner": {"reputation": 18470, "user_id": 2398593, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XQHYX.jpg?s=128&g=1", "display_name": "maxime1992", "link": "https://stackoverflow.com/users/2398593/maxime1992"}, "reply_to_user": {"reputation": 1771, "user_id": 2309928, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6fryX.jpg?s=128&g=1", "display_name": "Synoon", "link": "https://stackoverflow.com/users/2309928/synoon"}, "edited": false, "score": 1, "creation_date": 1540373977, "post_id": 52964990, "comment_id": 92837823, "body": "Also, it&#39;s just a typescript check and once typescript is compiled, there&#39;s absolutely no effect at runtime. So you&#39;re either not compiling with AOT or for some reason TS can&#39;t catch that probably because it comes from a template call (which should be transpiled into TS code with AOT but hey... no idea why it doesn&#39;t catch it :D)"}], "tags": [], "owner": {"reputation": 18470, "user_id": 2398593, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XQHYX.jpg?s=128&g=1", "display_name": "maxime1992", "link": "https://stackoverflow.com/users/2398593/maxime1992"}, "is_accepted": true, "score": 1, "last_activity_date": 1540371857, "creation_date": 1540371857, "answer_id": 52964990, "question_id": 52964597, "link": "https://stackoverflow.com/questions/52964597/angular-unit-testing-components-with-protected-input-fields/52964990#52964990", "title": "Angular unit-testing components with protected @Input fields", "body": "<p>I've never seen any example of that (using <code>protected</code> on an <code>input</code>).</p>\n\n<p>In fact, they should be public because as the name speaks by itself, an <code>input</code> should be updated from outside the class. Do you use AOT on your app? I'm even surprise if that compile actually.</p>\n\n<p>And from Angular point of you, it'll be the same problem that you have in your test to update the property. If you're in dev mode, then it uses <code>JIT</code> (just in time compilation) and you don't get that kind of checks from the template. That's why it might be working.</p>\n\n<p>Conclusion: Just put all your <code>input</code>s <code>public</code>.</p>\n"}], "owner": {"reputation": 1771, "user_id": 2309928, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6fryX.jpg?s=128&g=1", "display_name": "Synoon", "link": "https://stackoverflow.com/users/2309928/synoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 52964990, "answer_count": 1, "score": 0, "last_activity_date": 1540371857, "creation_date": 1540370754, "last_edit_date": 1540371092, "question_id": 52964597, "link": "https://stackoverflow.com/questions/52964597/angular-unit-testing-components-with-protected-input-fields", "title": "Angular unit-testing components with protected @Input fields", "body": "<p>We got used to make variables <code>protected</code> which are only used in a component and its subclasses but not in the template. </p>\n\n<p>That's especially an advantage if you have like 10 many variables in your class and with <code>protected</code> <code>private</code> and <code>public</code> it's very easy to know which variables are used in the template.</p>\n\n<pre><code>@Input() public disablePlus: boolean = false;\n@Input() public disableMinus: boolean = false;\n\n@Input() protected jumpSize: number = 1000;\n</code></pre>\n\n<p>now I'm about to create some unit-test for this component. But i cannot activly change those values inside my <code>it</code> method:</p>\n\n<pre><code>it('should change jumpSize to 5000', () =&gt; {\n    component.jumpSize= 5000; \n    // ts2445: Property `jumpSize` is protected and only accessible within class and its subclasses\n    ...\n});\n\nit('plus should be disabled', () =&gt; {\n    component.disablePlus= true; // no error\n    ...\n});\n</code></pre>\n\n<p>Is there a way to leave jumpSize <code>protected</code> or do we have to change it to <code>public</code>?</p>\n\n<p>Or do you event think that our approach with <code>protected @Input</code> fields is anyway stupid and not very useful?</p>\n\n<p>I'm thankful for any advice.</p>\n"}, {"tags": ["angular", "typescript", "unit-testing", "jasmine", "spyon"], "comments": [{"owner": {"reputation": 4779, "user_id": 8105437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CURix.jpg?s=128&g=1", "display_name": "dmcgrandle", "link": "https://stackoverflow.com/users/8105437/dmcgrandle"}, "edited": false, "score": 0, "creation_date": 1540430200, "post_id": 52964500, "comment_id": 92866328, "body": "Is it possible it is getting stuck in the this.utilities.resolveJsonReferences() call?  I don&#39;t see a spy preventing that call from being executed.  I would try spying on that with some reasonable data returned for your result variable and see if that is what&#39;s going on."}, {"owner": {"reputation": 463, "user_id": 5504061, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4598efc59e408bb83a4b4112c085f5f1?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/5504061/developer"}, "reply_to_user": {"reputation": 4779, "user_id": 8105437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CURix.jpg?s=128&g=1", "display_name": "dmcgrandle", "link": "https://stackoverflow.com/users/8105437/dmcgrandle"}, "edited": false, "score": 0, "creation_date": 1540553567, "post_id": 52964500, "comment_id": 92919116, "body": "@dmcgrandle that is not a problem. <code>this.utilities.resolveJsonReferences</code> accepts and returns the same value by checking helper function. I already verified by placing console.log in the previous line and it did not reach."}], "owner": {"reputation": 463, "user_id": 5504061, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4598efc59e408bb83a4b4112c085f5f1?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/5504061/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1608355709, "creation_date": 1540370462, "last_edit_date": 1608355709, "question_id": 52964500, "link": "https://stackoverflow.com/questions/52964500/jasmine-spy-setup-for-promise-wraps-observable", "title": "Jasmine spy setup for Promise wraps Observable", "body": "<p>I am writing Angular a unit test case for a promise that wraps the observable call using Jasmine. I am not able to mock this promise in order to test it.</p>\n<p><strong>Component</strong></p>\n<pre><code>ngOnInit(){\n this.getOrder().then(\n        () =&gt; {\n            this.getShippingAddress();\n        });\n}\n\nprivate getOrder() {        \n    var promise = new Promise((resolve, reject) =&gt; {\n        this.orderService.getOrder(this.orderOfferId)\n            .subscribe(\n            res =&gt; {\n               // This part is not executed from Test\n                var result: IOrderViewData = this.utilities.resolveJsonReferences(res);\n                this.viewData = result;\n                if (this.viewData.orderDate &lt; this.today) {\n                    this.message = &quot;Order cannot be in the past&quot;;\n                }                   \n                resolve();\n            },\n            err =&gt; {                  \n                reject();\n            });\n    });\n    return promise;\n}\n\nprivate getShippingAddress() {        \n  return  this.communicationService.getShippingAddress(this.orderOfferId);\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<pre><code>    it('Should validate the order date given the date is in past', (done) =&gt; {\n        orderMockViewData.orderDate = new Date(2017,10,22);\n\n        let orderSpy = spyOn(orderService, &quot;getOrder&quot;).and.returnValue(Observable.of(orderMockViewData));\n        let addressSpy = spyOn(communicationService, &quot;getShippingAddress&quot;).and.returnValue(Observable.of(shippingMockViewData));\n        fixture.detectChanges();\n\n        fixture.whenStable().then(() =&gt; {\n            expect(orderSpy).toHaveBeenCalledWith(&quot;order/d371abcb-a935-4f85-bcca-baa0bf32e1ac&quot;); // SUCCESS\n            expect(addressSpy).toHaveBeenCalledWith(&quot;address/d371abcb-a935-4f85-bcca-baa0bf32e1ac&quot;); // FAILED\n            expect(componentInstance.message).toEqual(&quot;Order cannot be in the past&quot;); // FAILED\n            done();\n        });\n\n    });\n</code></pre>\n<p><strong>Problem</strong></p>\n<p>I could see orderSpy is getting called as it was setup using Observable. of. But the call to the communicationService does not happen as it was resolved in a promise.</p>\n<p>Does anyone help me on how to mock such things as I need to test promise and observable combination?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 770, "user_id": 4091337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/571fac3c538daeefb2ed28c670530fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Teun van der Wijst", "link": "https://stackoverflow.com/users/4091337/teun-van-der-wijst"}, "edited": false, "score": 0, "creation_date": 1540370069, "post_id": 52964239, "comment_id": 92835383, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40295832/how-to-change-css-styling-from-within-angular-2-component\">How to change CSS styling from within Angular 2 Component</a>"}, {"owner": {"reputation": 1008, "user_id": 9162349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Jx5B2AU3KxE/AAAAAAAAAAI/AAAAAAAAABE/RhmzWiGJ6H4/photo.jpg?sz=128", "display_name": "Ashraful Islam", "link": "https://stackoverflow.com/users/9162349/ashraful-islam"}, "edited": false, "score": 1, "creation_date": 1540370606, "post_id": 52964239, "comment_id": 92835683, "body": "cant you use attribute binding in this case in the corresponding button elements? LIke <code>&lt;button [disabled]=&quot;someCondition&quot; (click)=&quot;accept(row)&quot; mat-raised-button id=&quot;accept&quot;&gt;accept&lt;&#47;button&gt;</code>"}, {"owner": {"reputation": 41, "user_id": 3504563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8b4e0db7573c59c5602728850137d3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3504563", "link": "https://stackoverflow.com/users/3504563/user3504563"}, "reply_to_user": {"reputation": 1008, "user_id": 9162349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Jx5B2AU3KxE/AAAAAAAAAAI/AAAAAAAAABE/RhmzWiGJ6H4/photo.jpg?sz=128", "display_name": "Ashraful Islam", "link": "https://stackoverflow.com/users/9162349/ashraful-islam"}, "edited": false, "score": 0, "creation_date": 1540371576, "post_id": 52964239, "comment_id": 92836267, "body": "@AshrafulIslam thank you I will try this"}, {"owner": {"reputation": 111, "user_id": 2459346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de185de49daada0bc46084909c6db299?s=128&d=identicon&r=PG", "display_name": "priya_21", "link": "https://stackoverflow.com/users/2459346/priya-21"}, "edited": false, "score": 0, "creation_date": 1540372194, "post_id": 52964239, "comment_id": 92836685, "body": "Please click on this <a href=\"https://stackoverflow.com/questions/48226868/document-getelementbyid-replacement-in-angular4-typescript/48226924\">link</a> to find better way of using html elements."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3504563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8b4e0db7573c59c5602728850137d3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3504563", "link": "https://stackoverflow.com/users/3504563/user3504563"}, "edited": false, "score": 0, "creation_date": 1540371299, "post_id": 52964607, "comment_id": 92836087, "body": "it is in a separated function getData() where I get data and show them on the table"}, {"owner": {"reputation": 21, "user_id": 5848800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713042f88ea602087003d7044a9eb701?s=128&d=identicon&r=PG&f=1", "display_name": "vasilv", "link": "https://stackoverflow.com/users/5848800/vasilv"}, "reply_to_user": {"reputation": 41, "user_id": 3504563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8b4e0db7573c59c5602728850137d3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3504563", "link": "https://stackoverflow.com/users/3504563/user3504563"}, "edited": false, "score": 0, "creation_date": 1540371828, "post_id": 52964607, "comment_id": 92836451, "body": "If getData() is invoked before the view is compiled, the result will be the same."}], "tags": [], "owner": {"reputation": 21, "user_id": 5848800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713042f88ea602087003d7044a9eb701?s=128&d=identicon&r=PG&f=1", "display_name": "vasilv", "link": "https://stackoverflow.com/users/5848800/vasilv"}, "is_accepted": false, "score": 0, "last_activity_date": 1540370773, "creation_date": 1540370773, "answer_id": 52964607, "question_id": 52964239, "link": "https://stackoverflow.com/questions/52964239/angular-mat-table-show-or-hide-mat-cell-content/52964607#52964607", "title": "Angular - mat-table : show or hide mat-cell content", "body": "<p>Where in typescript do you set the style? Most probably it should be in the <code>ngAfterViewInit</code> hook as the buttons are not in the DOM yet, if you are trying to set the style before it.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6442225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f778fe9009473dc7a7a55b44d1e6cc2?s=128&d=identicon&r=PG&f=1", "display_name": "levk", "link": "https://stackoverflow.com/users/6442225/levk"}, "is_accepted": false, "score": 0, "last_activity_date": 1540371738, "creation_date": 1540371738, "answer_id": 52964954, "question_id": 52964239, "link": "https://stackoverflow.com/questions/52964239/angular-mat-table-show-or-hide-mat-cell-content/52964954#52964954", "title": "Angular - mat-table : show or hide mat-cell content", "body": "<p>You have some approaches for this:\n1)  changing the html of the button to </p>\n\n<pre><code>&lt;button #acceptButton (click)=\"accept(row,acceptButton)\" mat-raised-button id=\"accept\"&gt;accept&lt;/button&gt;\n</code></pre>\n\n<p>then in your accept function you can access element native properties \nsomething like this: </p>\n\n<pre><code>accept(row,buttonRef){\n    buttonRef._elementRef.nativeElement.style.display = 'none'\nbla bla logic\n}\n</code></pre>\n\n<p>this will change the button display property to none and hide the button</p>\n\n<p>2) you can attach logic to *ngIf then the button will be removed from the DOM\n example <a href=\"https://stackblitz.com/edit/angular-ngif-else\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1610460953, "post_id": 65685683, "comment_id": 116136021, "body": "While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/65685683/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 154, "user_id": 9061085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HNBrKtaJxFk/AAAAAAAAAAI/AAAAAAAAbAQ/uRn4Q6AgcPk/photo.jpg?sz=128", "display_name": "AndyNope", "link": "https://stackoverflow.com/users/9061085/andynope"}, "is_accepted": false, "score": 0, "last_activity_date": 1610461217, "last_edit_date": 1610461217, "creation_date": 1610460890, "answer_id": 65685683, "question_id": 52964239, "link": "https://stackoverflow.com/questions/52964239/angular-mat-table-show-or-hide-mat-cell-content/65685683#65685683", "title": "Angular - mat-table : show or hide mat-cell content", "body": "<p>Add to your div/container of your Tab:</p>\n<pre><code>[ngClass]=&quot;{ 'invisible': !displayTab}&quot;\n\n    .invisible * {\n    visibility: hidden !important;\n    transition: 0s !important;\n}\n</code></pre>\n<pre><code>    yourToggleFunction(): void{\n     this.displayTab = !this.displayTab;\n   }\n</code></pre>\n<p>Then you can switch it with a <code>(click)=&quot;yourToggleFunction()&quot;</code>.</p>\n<p>This might help:\n<a href=\"https://stackoverflow.com/questions/48871755/how-to-hide-tab-but-keep-content-of-tab-displayed-in-angular-material-in-angula?rq=1\">How to hide tab, but keep content of tab displayed in angular material in angular2?</a></p>\n"}], "owner": {"reputation": 41, "user_id": 3504563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8b4e0db7573c59c5602728850137d3b?s=128&d=identicon&r=PG&f=1", "display_name": "user3504563", "link": "https://stackoverflow.com/users/3504563/user3504563"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1002, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1610461217, "creation_date": 1540369647, "question_id": 52964239, "link": "https://stackoverflow.com/questions/52964239/angular-mat-table-show-or-hide-mat-cell-content", "title": "Angular - mat-table : show or hide mat-cell content", "body": "<p>I have a simple mat-table, where the user accept or reject the row of the table</p>\n\n<pre><code>&lt;ng-container matColumnDef=\"accept\"&gt;\n  &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;accept &lt;/mat-header-cell&gt;\n  &lt;mat-cell *matCellDef=\"let row\"&gt;\n    &lt;button (click)=\"accept(row)\" mat-raised-button id=\"accept\"&gt;accept&lt;/button&gt;\n  &lt;/mat-cell&gt;\n&lt;/ng-container&gt;\n\n&lt;ng-container matColumnDef=\"reject\"&gt;\n  &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;reject &lt;/mat-header-cell&gt;\n  &lt;mat-cell *matCellDef=\"let row\"&gt;\n    &lt;button (click)=\"reject(row)\" mat-raised-button id=\"reject\"&gt;reject&lt;/button&gt; &lt;/mat-cell&gt;\n&lt;/ng-container&gt;\n</code></pre>\n\n<p>So, when the row is already accepted or rejected, those buttons should be hidden</p>\n\n<p>I tried this</p>\n\n<pre><code> document.getElementById(\"accept\").style.visibility = \"hidden\";\n</code></pre>\n\n<p>and this</p>\n\n<pre><code> document.getElementById(\"accept\").style.display = 'none';\n</code></pre>\n\n<p>but they didn't work, I got an error \"<strong>Cannot read property 'style' of null</strong>\"</p>\n\n<p>I don't know if the question is clear enough but if you need more information I will provide.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["angular", "typescript", "ionic-framework"], "comments": [{"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1540997175, "post_id": 52964197, "comment_id": 93068936, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20279484/how-to-access-the-correct-this-inside-a-callback\">How to access the correct `this` inside a callback?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "is_accepted": false, "score": 1, "last_activity_date": 1540371078, "last_edit_date": 1540371078, "creation_date": 1540369557, "answer_id": 52964212, "question_id": 52964197, "link": "https://stackoverflow.com/questions/52964197/cannot-assign-public-variable-from-a-function-in-angular-6/52964212#52964212", "title": "Cannot assign public variable from a function in Angular 6", "body": "<p>You need to use <strong><code>arrow function</code></strong> in this case, because using this refers to the function context.</p>\n\n<pre><code>this._window.AppCenter.getInstallId(success =&gt; {\n     this.deviceId = success;        \n});\n</code></pre>\n\n<p>You can refer the answer <strong><a href=\"https://stackoverflow.com/questions/6394812/this-inside-of-ajax-success-not-working\"><code>here</code></a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 3795, "user_id": 4724147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZDnz.jpg?s=128&g=1", "display_name": "Harunur Rashid", "link": "https://stackoverflow.com/users/4724147/harunur-rashid"}, "is_accepted": true, "score": 2, "last_activity_date": 1540370642, "creation_date": 1540370642, "answer_id": 52964558, "question_id": 52964197, "link": "https://stackoverflow.com/questions/52964197/cannot-assign-public-variable-from-a-function-in-angular-6/52964558#52964558", "title": "Cannot assign public variable from a function in Angular 6", "body": "<pre><code>this._window.AppCenter.getInstallId(success =&gt; {\n      console.log(success);\n      this.deviceId = success;        \n});\n</code></pre>\n\n<p>For more detail, read <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" rel=\"nofollow noreferrer\">this</a></p>\n"}], "owner": {"reputation": 45, "user_id": 611432, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0930fb8e6f4be2943490030afa0e6ce6?s=128&d=identicon&r=PG", "display_name": "Renaldas", "link": "https://stackoverflow.com/users/611432/renaldas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52964558, "answer_count": 2, "score": 0, "last_activity_date": 1540371078, "creation_date": 1540369499, "question_id": 52964197, "link": "https://stackoverflow.com/questions/52964197/cannot-assign-public-variable-from-a-function-in-angular-6", "title": "Cannot assign public variable from a function in Angular 6", "body": "<p>I'm using cordova AppCenter Shared plugin inside Ionic4 app and calling function, I was able to get ID in console, but cannot assign it to public variable, any ideas?:</p>\n\n<p>Stack: Angular 6</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>public deviceId: string = '';\r\n\r\nthis._window.AppCenter.getInstallId(function(success, error) {\r\n          console.log(success);\r\n          this.deviceId = success;        \r\n      });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["java", "typescript", "debugging", "server", "webstorm"], "comments": [{"owner": {"reputation": 578, "user_id": 6376949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wxr4H.png?s=128&g=1", "display_name": "T K", "link": "https://stackoverflow.com/users/6376949/t-k"}, "edited": false, "score": 0, "creation_date": 1540369914, "post_id": 52964132, "comment_id": 92835288, "body": "Welcome to SO. Please read: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "is_accepted": false, "score": 0, "last_activity_date": 1540384794, "creation_date": 1540384794, "answer_id": 52969232, "question_id": 52964132, "link": "https://stackoverflow.com/questions/52964132/start-typescript-echo-server-debugging/52969232#52969232", "title": "Start TypeScript Echo server DEBUGGING", "body": "<ul>\n<li>install dependencies by running <code>npm i</code> in <code>server</code> folder</li>\n<li>open the project in WebStorm via <strong>File | Open</strong></li>\n<li>in <strong>Settings | Languages &amp; Frameworks | TypeScript</strong>, enable <strong>Recompile on changes</strong> to compile your .ts code</li>\n<li>open <code>server/src/echoserver.ts</code> in editor to get it compiled</li>\n<li>select the generated <code>server/src/echoserver.js</code> in <strong>Project</strong> tree, choose <strong>Run</strong> from its right-click menu => your server will start. To debug, add breakpoints to <code>server/src/echoserver.ts</code> and choose <strong>Debug</strong></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 10550666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326118f08a637e9c4ef8dfa9d3f55b02?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel.fo", "link": "https://stackoverflow.com/users/10550666/marcel-fo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540408046, "creation_date": 1540369304, "last_edit_date": 1540408046, "question_id": 52964132, "link": "https://stackoverflow.com/questions/52964132/start-typescript-echo-server-debugging", "title": "Start TypeScript Echo server DEBUGGING", "body": "<p>I need to start a TypeScript echo server over WebStorm and debug it, but I don't know how to do it. </p>\n\n<p>\"Bring the template\" Echo server\" to run. Debug the application\nserver side (with WebStorm). \"</p>\n\n<p>What are the differences when accessing the parameters of a GET or a POST request?</p>\n\n<p><a href=\"https://mega.nz/#F!f3Z0HSAS!PxjiZeIq3WzZu55re_VM_A\" rel=\"nofollow noreferrer\">https://mega.nz/#F!f3Z0HSAS!PxjiZeIq3WzZu55re_VM_A</a></p>\n"}, {"tags": ["javascript", "angular", "html", "typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1540369712, "post_id": 52964161, "comment_id": 92835185, "body": "The errro is gone I will accept ur answer ASAP, I have one more question when I click update  to add new user, I get The following error : <code>OPTIONS http:&#47;&#47;locahost:4200&#47;users net::ERR_NAME_NOT_RESOLVED</code>  what do I need to change ?"}, {"owner": {"reputation": 5258, "user_id": 3162724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833457f6ec5ea62785cd84e0c312a8a4?s=128&d=identicon&r=PG", "display_name": "Niladri", "link": "https://stackoverflow.com/users/3162724/niladri"}, "reply_to_user": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1540369992, "post_id": 52964161, "comment_id": 92835337, "body": "@user9964622 do you have an actual api running at <code>http:&#47;&#47;locahost:4200&#47;users</code> or is it a mock api? it&#39;s not able to locate the api"}, {"owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "edited": false, "score": 0, "creation_date": 1540370007, "post_id": 52964161, "comment_id": 92835343, "body": "does the url that u are trying to access in the update function exist ?"}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1540370123, "post_id": 52964161, "comment_id": 92835402, "body": "I want to user mock api , without firebase or mongo , but I dont know how to do it, any help will be apreciated"}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1540370178, "post_id": 52964161, "comment_id": 92835442, "body": "@hana_wujira no I am learning am stuck here , what do I need to do save those entered data as mock up , is it possible without firebase or mongo?"}, {"owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "edited": false, "score": 0, "creation_date": 1540370494, "post_id": 52964161, "comment_id": 92835619, "body": "i hope this <a href=\"https://medium.com/letsboot/the-perfect-mock-backend-to-start-with-an-angular-application-3d751d16614f\" rel=\"nofollow noreferrer\">article</a> can be useful."}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1540372528, "post_id": 52964161, "comment_id": 92836907, "body": "@hana_wujira I have implemented as per documentation and changed the base url too but still i get the following error  OPTIONS <code>http:&#47;&#47;locahost:3000&#47;users net::ERR_NAME_NOT_RESOLVED</code> what do I need to change?"}, {"owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "edited": false, "score": 0, "creation_date": 1540372647, "post_id": 52964161, "comment_id": 92836974, "body": "can u share your mockup json data ?"}, {"owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "reply_to_user": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1540372727, "post_id": 52964161, "comment_id": 92837016, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182406/discussion-between-hana-wujira-and-user9964622\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 750, "user_id": 5029410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpOWq.jpg?s=128&g=1", "display_name": "h_w", "link": "https://stackoverflow.com/users/5029410/h-w"}, "is_accepted": true, "score": 13, "last_activity_date": 1540369415, "creation_date": 1540369415, "answer_id": 52964161, "question_id": 52964095, "link": "https://stackoverflow.com/questions/52964095/angular-6-error-typeerror-cannot-read-property-tolowercase-of-undefined/52964161#52964161", "title": "Angular 6: ERROR TypeError: Cannot read property &#39;toLowerCase&#39; of undefined", "body": "<p>change the </p>\n\n<pre><code>baseUrl: 'http://locahost:4200/users';\n</code></pre>\n\n<p>to </p>\n\n<pre><code>baseUrl= 'http://locahost:4200/users';\n</code></pre>\n\n<p>since the type of baseUrl is string</p>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 3482040, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003404175716/picture?type=large", "display_name": "Aman Gupta", "link": "https://stackoverflow.com/users/3482040/aman-gupta"}, "is_accepted": false, "score": 4, "last_activity_date": 1563476938, "last_edit_date": 1563476938, "creation_date": 1563476606, "answer_id": 57101129, "question_id": 52964095, "link": "https://stackoverflow.com/questions/52964095/angular-6-error-typeerror-cannot-read-property-tolowercase-of-undefined/57101129#57101129", "title": "Angular 6: ERROR TypeError: Cannot read property &#39;toLowerCase&#39; of undefined", "body": "<p><strong>Error Solved !!!</strong>\nThe Error is due to the colon:</p>\n\n<pre><code>baseUrl: 'http://locahost:4200/users';\n</code></pre>\n\n<p>Use '=' in place of ':' because baseUrl is string.</p>\n\n<pre><code>baseUrl='http://locahost:4200/users';\n</code></pre>\n"}], "owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15717, "favorite_count": 2, "accepted_answer_id": 52964161, "answer_count": 2, "score": 9, "last_activity_date": 1563476938, "creation_date": 1540369175, "question_id": 52964095, "link": "https://stackoverflow.com/questions/52964095/angular-6-error-typeerror-cannot-read-property-tolowercase-of-undefined", "title": "Angular 6: ERROR TypeError: Cannot read property &#39;toLowerCase&#39; of undefined", "body": "<p>I am creating CRUD app in angular six about users, when I am trying to add new user I am getting the following error: </p>\n\n<p>Here is the error I am getting : </p>\n\n<pre><code>core.js:12301 ERROR TypeError: Cannot read property 'toLowerCase' of undefined\n    at HttpXsrfInterceptor.push../node_modules/@angular/common/fesm5/http.js.HttpXsrfInterceptor.intercept (http.js:1718)\n    at HttpInterceptorHandler.push../node_modules/@angular/common/fesm5/http.js.HttpInterceptorHandler.handle (http.js:1134)\n    at HttpInterceptingHandler.push../node_modules/@angular/common/fesm5/http.js.HttpInterceptingHandler.handle (http.js:1769)\n    at MergeMapSubscriber.project (http.js:974)\n    at MergeMapSubscriber.push../node_modules/rxjs/_esm5/internal/operators/mergeMap.js.MergeMapSubscriber._tryNext (mergeMap.js:61)\n    at MergeMapSubscriber.push../node_modules/rxjs/_esm5/internal/operators/mergeMap.js.MergeMapSubscriber._next (mergeMap.js:51)\n    at MergeMapSubscriber.push../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next (Subscriber.js:54)\n    at Observable._subscribe (scalar.js:5)\n    at Observable.push../node_modules/rxjs/_esm5/internal/Observable.js.Observable._trySubscribe (Observable.js:43)\n    at Observable.push../node_modules/rxjs/_esm5/internal/Observable.js.Observable.subscribe (Observable.js:29)\n</code></pre>\n\n<p>Here is add user component html : </p>\n\n<pre><code>&lt;div class=\"container add-user\"&gt;\n  &lt;div class=\"col-md-6\"&gt;\n    &lt;h2 class=\"text-center\"&gt;Add User&lt;/h2&gt;\n    &lt;form [formGroup]=\"addForm\" (ngSubmit)=\"onSubmit()\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"email\"&gt;Email address:&lt;/label&gt;\n        &lt;input type=\"email\" formControlName=\"email\" placeholder=\"Email\" name=\"email\" class=\"form-control\" id=\"email\"&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"firstName\"&gt;First Name:&lt;/label&gt;\n        &lt;input formControlName=\"firstName\" placeholder=\"First Name\" name=\"firstName\" class=\"form-control\" id=\"firstName\"&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"lastName\"&gt;Last Name:&lt;/label&gt;\n        &lt;input formControlName=\"lastName\" placeholder=\"Last name\" name=\"lastName\" class=\"form-control\" id=\"lastName\"&gt;\n      &lt;/div&gt;\n\n      &lt;button class=\"btn btn-success\"&gt;Update&lt;/button&gt;\n    &lt;/form&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is ts file:</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {UserService} from '../service/user.service';\nimport {first} from 'rxjs/operators';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'app-add-user',\n  templateUrl: './add-user.component.html',\n  styleUrls: ['./add-user.component.scss']\n})\nexport class AddUserComponent implements OnInit {\n\n  constructor(private formBuilder: FormBuilder, private router: Router, private userService: UserService) { }\n\n  addForm: FormGroup;\n\n  ngOnInit() {\n\n    this.addForm = this.formBuilder.group({\n      id: [],\n      email: ['', Validators.required],\n      firstName: ['', Validators.required],\n      lastName: ['', Validators.required]\n    });\n\n  }\n\n  onSubmit() {\n    this.userService.createUser(this.addForm.value)\n      .subscribe( data =&gt; {\n        this.router.navigate(['list-user']);\n      });\n  }\n\n}\n</code></pre>\n\n<p>here is user service:</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { User } from '../model/user.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(private http: HttpClient) { }\n  baseUrl: 'http://locahost:4200/users';\n\n  getUsers() {\n    return this.http.get&lt;User[]&gt;(this.baseUrl);\n  }\n  getUserById(id: number) {\n    return this.http.get&lt;User&gt;(this.baseUrl + '/' + id);\n  }\n  createUser(user: User) {\n    return this.http.post(this.baseUrl, user);\n  }\n  updateUser(user: User) {\n    return this.http.put(this.baseUrl + '/' + user.id, user);\n  }\n  deleteUser(id: number) {\n    return this.http.delete(this.baseUrl + '/' + id);\n  }\n}\n</code></pre>\n\n<p>I tried different ways but am not able to solve the issue :)</p>\n\n<p>what am I doing wrong in my app? any help will be apreciated, thanks</p>\n"}, {"tags": ["node.js", "typescript", "microservices", "mqtt", "nestjs"], "comments": [{"owner": {"reputation": 1, "user_id": 4910083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XHHGsHewSkY/AAAAAAAAAAI/AAAAAAAAHjY/DwrBGKyePEQ/photo.jpg?sz=128", "display_name": "Tanas", "link": "https://stackoverflow.com/users/4910083/tanas"}, "edited": false, "score": 0, "creation_date": 1592480752, "post_id": 52964076, "comment_id": 118299301, "body": "This strange behavior was fixed in <a href=\"https://github.com/nestjs/nest/releases/tag/v7.0.0\" rel=\"nofollow noreferrer\">Nest 7.0</a>. You can directly subscribe topic without any suffix."}], "answers": [{"comments": [{"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "edited": false, "score": 0, "creation_date": 1548089143, "post_id": 54277108, "comment_id": 95409194, "body": "I have created an example on how to publish messages as a client in this answer: <a href=\"https://stackoverflow.com/a/54293468/4694994\">stackoverflow.com/a/54293468/4694994</a> Is this what you were looking for?"}], "tags": [], "owner": {"reputation": 2655, "user_id": 1057796, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2605a5bfc8689786ae731b11b7dd5ce3?s=128&d=identicon&r=PG", "display_name": "Alexandre", "link": "https://stackoverflow.com/users/1057796/alexandre"}, "is_accepted": false, "score": 3, "last_activity_date": 1547994572, "last_edit_date": 1547994572, "creation_date": 1547992279, "answer_id": 54277108, "question_id": 52964076, "link": "https://stackoverflow.com/questions/52964076/whats-a-valid-messagepattern-for-nestjs-mqtt-microservice/54277108#54277108", "title": "What&#39;s a valid @MessagePattern for NestJS MQTT microservice?", "body": "<p>The documentation is not very clear, but it seem that for mqtt if you have <code>@MessagePattern('mytopic')</code> you can publish a command on the topic <code>mytopic_ack</code> and you will get response on <code>mytopic_res</code>. I am still trying to find out how to publish to the mqtt broker from a service. </p>\n\n<p>See <a href=\"https://github.com/nestjs/nest/blob/e019afa472c432ffe9e7330dc786539221652412/packages/microservices/server/server-mqtt.ts#L99\" rel=\"nofollow noreferrer\">https://github.com/nestjs/nest/blob/e019afa472c432ffe9e7330dc786539221652412/packages/microservices/server/server-mqtt.ts#L99</a></p>\n\n<pre><code>  public getAckQueueName(pattern: string): string {\n    return `${pattern}_ack`;\n  }\n\n  public getResQueueName(pattern: string): string {\n    return `${pattern}_res`;\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2655, "user_id": 1057796, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2605a5bfc8689786ae731b11b7dd5ce3?s=128&d=identicon&r=PG", "display_name": "Alexandre", "link": "https://stackoverflow.com/users/1057796/alexandre"}, "edited": false, "score": 2, "creation_date": 1548104396, "post_id": 54294325, "comment_id": 95415776, "body": "As you say it&#39;s not very convinient and a bit confusing. At first I was happy to see this build-in interface with MQTT or AMQP, but then I understood that it use request-response paradigm, and this is a bit strange for this kind of protocole."}, {"owner": {"reputation": 330, "user_id": 4983899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/484f408730ebbd555500b66a44e6f7d5?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/4983899/nilo"}, "edited": false, "score": 1, "creation_date": 1549528103, "post_id": 54294325, "comment_id": 95936080, "body": "Thanks very much for the clarification, like Alexandre pointed out, it kinda defeats the purpose when there&#39;s such a coupling to a specific client paradigm. Just glad I now know how it&#39;s supposed to be used"}, {"owner": {"reputation": 457, "user_id": 5172039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be26670ccb6ca1d96b48a2da48b5d265?s=128&d=identicon&r=PG&f=1", "display_name": "Makuna", "link": "https://stackoverflow.com/users/5172039/makuna"}, "edited": false, "score": 0, "creation_date": 1602824092, "post_id": 54294325, "comment_id": 113847087, "body": "Does somebody use the clientMqtt class for publishing? I have the problem, that is publish not just the data - also the pattern and id. But I just need the data.  I use the ClientMqtt.send function."}], "tags": [], "owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "is_accepted": true, "score": 4, "last_activity_date": 1548089405, "last_edit_date": 1548089405, "creation_date": 1548088967, "answer_id": 54294325, "question_id": 52964076, "link": "https://stackoverflow.com/questions/52964076/whats-a-valid-messagepattern-for-nestjs-mqtt-microservice/54294325#54294325", "title": "What&#39;s a valid @MessagePattern for NestJS MQTT microservice?", "body": "<h2>nest.js Pattern Handler</h2>\n\n<p>On nest.js side we have the following pattern handler:</p>\n\n<pre><code>@MessagePattern('sum')\nsum(data: number[]): number {\n  return data.reduce((a, b) =&gt; a + b, 0);\n}\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/a/54277108/4694994\">@Alexandre</a> explained, this will actually listen to <code>sum_ack</code>.</p>\n\n<hr>\n\n<h2>Non-nest.js Client</h2>\n\n<p>A non-nest.js client could look like this (just save as client.js, run <code>npm install mqtt</code> and run the program with <code>node client.js</code>):</p>\n\n<pre><code>var mqtt = require('mqtt')\nvar client  = mqtt.connect('mqtt://localhost:1883')\n\nclient.on('connect', function () {\n  client.subscribe('sum_res', function (err) {\n    if (!err) {\n      client.publish('sum_ack', '{\"data\": [2, 3]}');\n    }\n  })\n})\n\nclient.on('message', function (topic, message) {\n  console.log(message.toString())\n  client.end()\n})\n</code></pre>\n\n<p>It sends a message on the topic <code>sum_ack</code> and listens to messages on <code>sum_res</code>. When it receives a message on <code>sum_res</code>, it logs the message and ends the program. nest.js expects the message format to be <code>{data: myData}</code> and then call the param handler <code>sum(myData)</code>.</p>\n\n<pre><code>// Log:\n{\"err\":null,\"response\":5} // This is the response from sum()\n{\"isDisposed\":true} // Internal \"complete event\" (according to unit test)\n</code></pre>\n\n<p>Of course, this is not very convenient...</p>\n\n<hr>\n\n<h2>nest.js Client</h2>\n\n<p>That is because this is meant to be used with another nest.js client rather than a normal mqtt client. The nest.js client abstracts all the internal logic away. See <a href=\"https://stackoverflow.com/a/54293468/4694994\">this answer</a>, which describes the client for redis (only two lines need to be changed for mqtt).</p>\n\n<pre><code>async onModuleInit() {\n  await this.client.connect();\n  // no 'sum_ack' or {data: [0, 2, 3]} needed\n  this.client.send('sum', [0, 2, 3]).toPromise();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 2193996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4b59270deb1195aace09c081eecc9b7?s=128&d=identicon&r=PG", "display_name": "Hakier", "link": "https://stackoverflow.com/users/2193996/hakier"}, "is_accepted": false, "score": 0, "last_activity_date": 1563746558, "last_edit_date": 1563746558, "creation_date": 1563746049, "answer_id": 57137251, "question_id": 52964076, "link": "https://stackoverflow.com/questions/52964076/whats-a-valid-messagepattern-for-nestjs-mqtt-microservice/57137251#57137251", "title": "What&#39;s a valid @MessagePattern for NestJS MQTT microservice?", "body": "<p>I was fighting with MQTT today and this helped me a little, but I had more problems and below you can see my findings:</p>\n\n<h2>Wrong way of configuration broker URL</h2>\n\n<p>In my case when I used non-local MQTT server I started with this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  const app = await NestFactory.createMicroservice(AppModule, {\n    transport: Transport.MQTT,\n    options: {\n      host: 'test.mosquitto.org',\n      port: 1883,\n      protocol: 'tcp',\n    },\n  });\n  await app.listenAsync();\n</code></pre>\n\n<p>but like you can read in a <a href=\"https://github.com/nestjs/nest/blob/107b243c8b7d00c428c4ab9740dad074ec4af89d/packages/microservices/server/server-mqtt.ts#L26\" rel=\"nofollow noreferrer\">constructor of ServerMqtt</a> they use <code>url</code> option only (when not provided it fallbacks to <a href=\"https://github.com/nestjs/nest/blob/8d367c415bdf175d0d86df55505c1207ec251d51/packages/microservices/constants.ts#L5\" rel=\"nofollow noreferrer\"><code>'mqtt://localhost:1883'</code></a>. While I do not have local MQTT it will never resolve <code>app.listenAsync()</code> which is resolved only on <a href=\"https://github.com/nestjs/nest/blob/107b243c8b7d00c428c4ab9740dad074ec4af89d/packages/microservices/server/server-mqtt.ts#L42\" rel=\"nofollow noreferrer\">connect</a> and will also not run any handler.</p>\n\n<h3>It started to work when I adjusted code to use <code>url</code> option.</h3>\n\n<pre class=\"lang-js prettyprint-override\"><code>  const app = await NestFactory.createMicroservice(AppModule, {\n    transport: Transport.MQTT,\n    options: {\n      url: 'mqtt://test.mosquitto.org:1883',\n    },\n  });\n  await app.listenAsync();\n</code></pre>\n\n<h2>Messages require <code>id</code> property</h2>\n\n<p>Second very weird problem was that when I used <strong>Non-nest.js Client</strong> script from @KimKern I had to register two MessagePatterns: <code>sum</code> and <code>sum_ack</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  @MessagePattern('sum')\n  sum(data: number[]): number {\n    return data.reduce((a, b) =&gt; a + b, 0);\n  }\n\n  @MessagePattern('sum_ack')\n  sumAck(data: number[]): number {\n    return data.reduce((a, b) =&gt; a + b, 0);\n  }\n</code></pre>\n\n<p>When I used <code>console.log</code> I discovered that the latter is being run but only when the first one is present. You can push the same message to the broker using mqtt cli tool to check it:</p>\n\n<p><code>mqtt pub -t 'sum_ack' -h 'test.mosquitto.org' -m '{\"data\":[1,2]}'</code></p>\n\n<p>But the biggest problem was that it <strong>didn't reply (publish sum_res)</strong>.</p>\n\n<h3>The solution was to provide also <code>id</code> while sending a message.</h3>\n\n<p><code>mqtt pub -t 'sum_ack' -h 'test.mosquitto.org' -m '{\"data\":[1,2], \"id\":\"any-id\"}'</code></p>\n\n<p>Then we could remove 'sum_ack' MessagePattern and leave only this code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  @MessagePattern('sum')\n  sum(data: number[]): number {\n    return data.reduce((a, b) =&gt; a + b, 0);\n  }\n</code></pre>\n\n<p>The reason for this was hidden inside <code>handleMessage</code> method of ServerMqtt which will not <a href=\"https://github.com/nestjs/nest/blob/107b243c8b7d00c428c4ab9740dad074ec4af89d/packages/microservices/server/server-mqtt.ts#L89\" rel=\"nofollow noreferrer\">publish</a> response from a handler if a message didn't have <a href=\"https://github.com/nestjs/nest/blob/107b243c8b7d00c428c4ab9740dad074ec4af89d/packages/microservices/server/server-mqtt.ts#L75\" rel=\"nofollow noreferrer\"><code>id</code></a>.</p>\n\n<p><strong>TL/DR</strong>\nSpecify url to message broker using <code>url</code> option only and always provide <code>id</code> for a message.</p>\n\n<p>I hope that will save some time to others.</p>\n\n<p>Happy hacking!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15035592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LZ6Ed.jpg?s=128&g=1", "display_name": "Deskaria", "link": "https://stackoverflow.com/users/15035592/deskaria"}, "is_accepted": false, "score": 0, "last_activity_date": 1611051323, "last_edit_date": 1611051323, "creation_date": 1611046777, "answer_id": 65788226, "question_id": 52964076, "link": "https://stackoverflow.com/questions/52964076/whats-a-valid-messagepattern-for-nestjs-mqtt-microservice/65788226#65788226", "title": "What&#39;s a valid @MessagePattern for NestJS MQTT microservice?", "body": "<p>@Tanas is right. Nestjs/Microservice now listens to your $[topic] and answer to $[topic]/reply. The postfix _ack and _res  are deprecated.</p>\n<p>For example:</p>\n<pre><code>  @MessagePattern('helloWorld')\n  getHello(): string {\n    console.log(&quot;hello world&quot;)\n    return this.appService.getHello();\n  }\n</code></pre>\n<p>Listens now on Topic: <em><strong>helloWorld</strong></em> <br>\nReplies now on Topic <em><strong>helloWorld/reply</strong></em> <br></p>\n<p><strong>Regarding ID</strong></p>\n<p>You <strong>should</strong> also provide an id within the payload (See @Hakier) and Nestjs will reply with an answer, containing your id.\nIf you don't have any id, there still won't be any reply but the corresponding logic will still trigger.</p>\n<p>For example (Using the snipped from above):<br>\nyour msg:</p>\n<pre><code>{&quot;data&quot;:&quot;foo&quot;,&quot;id&quot;:&quot;bar&quot;}\n</code></pre>\n<p>Nestjs reply:</p>\n<pre><code>{&quot;response&quot;:&quot;Hello World!&quot;,&quot;isDisposed&quot;:true,&quot;id&quot;:&quot;bar&quot;}\n</code></pre>\n<p><strong>Without ID:</strong></p>\n<p>your message:</p>\n<pre><code>{&quot;data&quot;:&quot;foo&quot;} or {}\n</code></pre>\n<p><em>No reply</em> but <em>Hello World</em> in Terminal</p>\n"}], "owner": {"reputation": 330, "user_id": 4983899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/484f408730ebbd555500b66a44e6f7d5?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/4983899/nilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4896, "favorite_count": 3, "accepted_answer_id": 54294325, "answer_count": 4, "score": 4, "last_activity_date": 1611051323, "creation_date": 1540369105, "last_edit_date": 1548089295, "question_id": 52964076, "link": "https://stackoverflow.com/questions/52964076/whats-a-valid-messagepattern-for-nestjs-mqtt-microservice", "title": "What&#39;s a valid @MessagePattern for NestJS MQTT microservice?", "body": "<p>I'm trying to setup a MQTT Microservice using NestJS according to <a href=\"https://docs.nestjs.com/microservices/mqtt\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n\n<p>I've started a working Mosquitto Broker using Docker and verified it's operability using various MQTT clients. Now, when I start the NestJS service it seems to be connecting correctly (mqqt.fx shows new client), yet I am unable to receive any messages in my controllers.\nThis is my bootstrapping, just like in the docs:</p>\n\n<p><strong>main.ts</strong></p>\n\n<pre><code>async function bootstrap() {\n    const app = await NestFactory.createMicroservice(AppModule, {\n        transport: Transport.MQTT,\n        options: {\n            host: 'localhost',\n            port: 1883,\n            protocol: 'tcp'\n        }\n    });\n    app.listen(() =&gt; console.log('Microservice is listening'));\n}\nbootstrap();\n</code></pre>\n\n<p><strong>app.controller.ts</strong></p>\n\n<pre><code>@Controller()\nexport class AppController {\n\n    @MessagePattern('mytopic') // tried {cmd:'mytopic'} or {topic:'mytopic'}\n    root(msg: Buffer) {\n        console.log('received: ', msg)\n    }\n}\n</code></pre>\n\n<p>Am I using the message-pattern decorator wrongly or is my concept wrong of what a NestJS MQTT microservice even is supposed to do? I thought it might subscribe to the topic I pass to the decorator. My only other source of information being the corresponding <a href=\"https://github.com/nestjs/nest/blob/master/packages/microservices/test/server/server-mqtt.spec.ts\" rel=\"nofollow noreferrer\">unit tests</a></p>\n"}, {"tags": ["angular", "typescript", "csv", "angular5", "export-to-csv"], "owner": {"reputation": 4065, "user_id": 1856206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/VRMBo.jpg?s=128&g=1", "display_name": "Hodaya Shalom", "link": "https://stackoverflow.com/users/1856206/hodaya-shalom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540369447, "creation_date": 1540368976, "last_edit_date": 1540369447, "question_id": 52964036, "link": "https://stackoverflow.com/questions/52964036/create-angular5-csv-with-multiple-sheets", "title": "Create angular5-csv with multiple sheets", "body": "<p>I use <a href=\"https://www.npmjs.com/package/angular5-csv\" rel=\"nofollow noreferrer\">angular5-csv</a> to create and download csv file from my data.</p>\n\n<p>Is there a way to create multiple sheets?</p>\n\n<p>for example I have 2 objects : data1 and data2, and I want that each object will be displayed in a separate sheet. </p>\n\n<pre><code>var data1 = [\n  {\n    name: \"Test 1\",\n    age: 13,\n    average: 8.2,\n    approved: true,\n    description: \"using 'Content here, content here' \"\n  },\n  {\n    name: 'Test 2',\n    age: 11,\n    average: 8.2,\n    approved: true,\n    description: \"using 'Content here, content here' \"\n  },\n  {\n    name: 'Test 4',\n    age: 10,\n    average: 8.2,\n    approved: true,\n    description: \"using 'Content here, content here' \"\n  },\n];\n\nvar data2 = [\n  {\n    name: \"Test 1\",\n    age: 13,\n    average: 8.2,\n    approved: true,\n    description: \"using 'Content here, content here' \"\n  },\n  {\n    name: 'Test 2',\n    age: 11,\n    average: 8.2,\n    approved: true,\n    description: \"using 'Content here, content here' \"\n  },\n  {\n    name: 'Test 4',\n    age: 10,\n    average: 8.2,\n    approved: true,\n    description: \"using 'Content here, content here' \"\n  },\n];\n</code></pre>\n"}, {"tags": ["typescript", "tslint"], "owner": {"reputation": 735, "user_id": 2564384, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/82fe0fe87f876c5c131dd3d155a78855?s=128&d=identicon&r=PG", "display_name": "Markus Mauch", "link": "https://stackoverflow.com/users/2564384/markus-mauch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1540452396, "creation_date": 1540368460, "last_edit_date": 1540452396, "question_id": 52963889, "link": "https://stackoverflow.com/questions/52963889/how-to-enforce-line-breaks-in-single-line-if-statements-using-allman-brace-style", "title": "How to enforce line breaks in single line if statements using allman brace style", "body": "<p>How can I configure tslint to enforce this</p>\n\n<pre><code>if ( test )\n{\n    return true;\n}\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>if ( test ) { return true; }\n</code></pre>\n\n<p>My tslint file looks like this:</p>\n\n<pre><code>\"one-line\": [\n    false,\n    \"check-catch\",\n    \"check-finally\",\n    \"check-else\",\n    \"check-open-brace\",\n    \"check-whitespace\"\n]\n\n\"brace-style\": [\n    \"allman\",\n    {\n        \"allowSingleLine\": false\n    }\n]\n</code></pre>\n\n<p>But that doesn't work. Thanks in advance!</p>\n"}, {"tags": ["angular", "typescript", "arraylist"], "comments": [{"owner": {"reputation": 2259, "user_id": 1165734, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7d6dd57ebebafad7e0f91c56adad1685?s=128&d=identicon&r=PG", "display_name": "Ionel Lupu", "link": "https://stackoverflow.com/users/1165734/ionel-lupu"}, "edited": false, "score": 0, "creation_date": 1540368645, "post_id": 52963795, "comment_id": 92834566, "body": "just out of curiosity: What are you trying to do? I think you are making things complicated working with arrays like this."}, {"owner": {"reputation": 4725, "user_id": 8808496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSryZ.jpg?s=128&g=1", "display_name": "Felix Lemke", "link": "https://stackoverflow.com/users/8808496/felix-lemke"}, "edited": false, "score": 0, "creation_date": 1540369099, "post_id": 52963795, "comment_id": 92834797, "body": "Do you mean <code>0: { Assigned_CategoryHead_Id: [4, 3, 2], Assigned...</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": true, "score": 1, "last_activity_date": 1540368394, "creation_date": 1540368394, "answer_id": 52963871, "question_id": 52963795, "link": "https://stackoverflow.com/questions/52963795/join-array-in-typescript-angular-2/52963871#52963871", "title": "Join array in Typescript Angular 2", "body": "<p>The result you're expecting is not a valid object. I think what you're looking for is an Object like this:</p>\n\n<pre><code>{\n  \"Assigned_CategoryHead_Id\": \"4, 3, 2\",\n  \"Assigned_CategoryHead_Name\": \"Head4, Head3, Head2\"\n}\n</code></pre>\n\n<p>Try this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var array = [{\r\n    Assigned_CategoryHead_Id: 4,\r\n    Assigned_CategoryHead_Name: \"Head4\"\r\n  },\r\n  {\r\n    Assigned_CategoryHead_Id: 3,\r\n    Assigned_CategoryHead_Name: \"Head3\"\r\n  },\r\n  {\r\n    Assigned_CategoryHead_Id: 2,\r\n    Assigned_CategoryHead_Name: \"Head2\"\r\n  }\r\n]\r\n\r\nvar Assigned_CategoryHead_Ids = [];\r\nvar Assigned_CategoryHead_Names = [];\r\n\r\narray.forEach(item =&gt; {\r\n  Assigned_CategoryHead_Ids.push(item.Assigned_CategoryHead_Id);\r\n  Assigned_CategoryHead_Names.push(item.Assigned_CategoryHead_Name);\r\n})\r\n\r\nvar resultantObject = {\r\n  Assigned_CategoryHead_Id: Assigned_CategoryHead_Ids.join(', ').toString(),\r\n  Assigned_CategoryHead_Name: Assigned_CategoryHead_Names.join(', ').toString()\r\n}\r\n\r\nconsole.log(resultantObject);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 200, "user_id": 6627559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T9RXi.jpg?s=128&g=1", "display_name": "Fahd Allebdi", "link": "https://stackoverflow.com/users/6627559/fahd-allebdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1540368830, "creation_date": 1540368830, "answer_id": 52963992, "question_id": 52963795, "link": "https://stackoverflow.com/questions/52963795/join-array-in-typescript-angular-2/52963992#52963992", "title": "Join array in Typescript Angular 2", "body": "<p>object or array formula, can't mix properties together.</p>\n\n<p>kindly see the example below.</p>\n\n<p>we will define an array of objects and then will join new object to our array.</p>\n\n<pre><code> let originalArray = [\n  { Assigned_CategoryHead_Id: 4, Assigned_CategoryHead_Name: \"Head4\" },\n  { Assigned_CategoryHead_Id: 3, Assigned_CategoryHead_Name: \"Head3\" },\n  { Assigned_CategoryHead_Id: 2, Assigned_CategoryHead_Name: \"Head2\" }\n];\nlet object = { Assigned_CategoryHead_Id: 5, Assigned_CategoryHead_Name: \"Head5\" };\n\nlet combinedArray = [object,...originalArray];\nconsole.log(combinedArray);\n</code></pre>\n\n<p>output in browser console:</p>\n\n<pre><code>(4)\u00a0[{\u2026}, {\u2026}, {\u2026}, {\u2026}]\n0: {Assigned_CategoryHead_Id: 5, Assigned_CategoryHead_Name: \"Head5\"}\n1: {Assigned_CategoryHead_Id: 4, Assigned_CategoryHead_Name: \"Head4\"}\n2: {Assigned_CategoryHead_Id: 3, Assigned_CategoryHead_Name: \"Head3\"}\n3: {Assigned_CategoryHead_Id: 2, Assigned_CategoryHead_Name: \"Head2\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 5554070, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b1FV3.jpg?s=128&g=1", "display_name": "Vishnu KR", "link": "https://stackoverflow.com/users/5554070/vishnu-kr"}, "is_accepted": false, "score": 0, "last_activity_date": 1540370563, "creation_date": 1540370563, "answer_id": 52964534, "question_id": 52963795, "link": "https://stackoverflow.com/questions/52963795/join-array-in-typescript-angular-2/52964534#52964534", "title": "Join array in Typescript Angular 2", "body": "<p>Please use <a href=\"http://www.typescriptlang.org/play/#src=const%20array1%20%3D%20%5B%7B%20Assigned_CategoryHead_Id%3A%204%2C%20Assigned_CategoryHead_Name%3A%20%22Head4%22%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20%7B%20Assigned_CategoryHead_Id%3A%203%2C%20Assigned_CategoryHead_Name%3A%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Head3%22%20%7D%2C%20%7B%20Assigned_CategoryHead_Id%3A2%2CAssigned_CategoryHead_Name%3A%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Head2%22%20%7D%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20%2F%2F%20expected%20output%20object%20structure%0D%0A%20%20%20%20%20%20class%20NewObject%20%7B%0D%0A%20%20%20%20%20%20%20%20%20Assigned_CategoryHead_Id%3A%20Array%3Cnumber%3E%3B%0D%0A%20%20%20%20%20%20%20%20%20Assigned_CategoryHead_Name%3A%20Array%3Cstring%3E%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20class%20ObjCreater%7B%0D%0A%20%20%20%20%20%20%20%20%20obj%3A%20NewObject%3B%20%2F%2F%20expected%20output%20object%20structure%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20createObj(objs%3A%20Array%3C%7B%20Assigned_CategoryHead_Id%3A%20number%2C%20%0D%0A%20%20%20%20%20%20%20%20%20%20Assigned_CategoryHead_Name%3A%20string%20%7D%3E)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20this.obj%20%3D%20new%20NewObject()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.obj.Assigned_CategoryHead_Id%20%3D%20objs.map(e%20%3D%3E%20e.Assigned_CategoryHead_Id)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.obj.Assigned_CategoryHead_Name%20%3D%20objs.map(e%20%3D%3E%20%0D%0A%20%20%20%20%20%20%20%20%20%20e.Assigned_CategoryHead_Name)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(this.obj)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20creater%20%3D%20new%20ObjCreater()%3B%0D%0A%0D%0A%20%20%20%20%20%20let%20button%20%3D%20document.createElement(&#39;button&#39;)%3B%0D%0A%20%20%20%20%20%20button.textContent%20%3D%20%22Say%20Hello%22%3B%0D%0A%20%20%20%20%20%20button.onclick%20%3D%20function%20()%20%7B%0D%0A%20%20%20%20%20%20%20console.log(creater.createObj(array1))%3B%0D%0A%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20document.body.appendChild(button)%3B\" rel=\"nofollow noreferrer\">TypescriptPlayground</a> and paste the code. and use RUN button. this playground is always fun when we want to check very basic things like this. Your output object structure is little bit confused,</p>\n\n<pre><code>  const array1 = [{ Assigned_CategoryHead_Id: 4, Assigned_CategoryHead_Name: \"Head4\" \n                  }, { Assigned_CategoryHead_Id: 3, Assigned_CategoryHead_Name: \n                  \"Head3\" }, { Assigned_CategoryHead_Id:2,Assigned_CategoryHead_Name: \n                 \"Head2\" }];\n\n  // expected output object structure\n  class NewObject {\n     Assigned_CategoryHead_Id: Array&lt;number&gt;;\n     Assigned_CategoryHead_Name: Array&lt;string&gt;;\n  }\n\n  class ObjCreater{\n     obj: NewObject; // expected output object structure\n      /**\n      * function used to create desired object\n      */\n      public createObj(objs: Array&lt;{ Assigned_CategoryHead_Id: number,Assigned_CategoryHead_Name: string }&gt;): string {\n\n      this.obj = new NewObject();\n      this.obj.Assigned_CategoryHead_Id = objs.map(e =&gt; e.Assigned_CategoryHead_Id);\n      this.obj.Assigned_CategoryHead_Name = objs.map(e =&gt; \n      e.Assigned_CategoryHead_Name);\n      return JSON.stringify(this.obj);\n\n    }\n  }\n\n  const creater = new ObjCreater();\n\n  let button = document.createElement('button');\n  button.textContent = \"Say Hello\";\n  button.onclick = function () {\n   console.log(creater.createObj(array1));\n }\n\n document.body.appendChild(button);\n</code></pre>\n\n<p>output: in console (JSON)</p>\n\n<pre><code>  {\"Assigned_CategoryHead_Id\":[4,3,2],\"Assigned_CategoryHead_Name\": \n  [\"Head4\",\"Head3\",\"Head2\"]}\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 2269094, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001284462021/picture?type=large", "display_name": "garvit gupta", "link": "https://stackoverflow.com/users/2269094/garvit-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 52963871, "answer_count": 3, "score": 0, "last_activity_date": 1540370563, "creation_date": 1540368140, "question_id": 52963795, "link": "https://stackoverflow.com/questions/52963795/join-array-in-typescript-angular-2", "title": "Join array in Typescript Angular 2", "body": "<p>I have below array:</p>\n\n<pre><code>0: {Assigned_CategoryHead_Id: 4, Assigned_CategoryHead_Name: \"Head4\"}\n1: {Assigned_CategoryHead_Id: 3, Assigned_CategoryHead_Name: \"Head3\"}\n2: {Assigned_CategoryHead_Id: 2, Assigned_CategoryHead_Name: \"Head2\"}\n</code></pre>\n\n<p>I want to join the array to get the below output:</p>\n\n<pre><code>0: {Assigned_CategoryHead_Id: 4, 3, 2, Assigned_CategoryHead_Name: \"Head4\", \"Head3\", \"Head2\"}\n</code></pre>\n\n<p>How I can achieve the above output in Angular 2 tyepscript?</p>\n"}, {"tags": ["angular", "typescript", "npm", "angular7", "angular-upgrade"], "comments": [{"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1540368208, "post_id": 52963754, "comment_id": 92834322, "body": "Angular actually has an official Update tool that you should be using. It makes the update process pretty straightforward and easy. Try <a href=\"https://update.angular.io/\" rel=\"nofollow noreferrer\">Angular Update</a>"}, {"owner": {"reputation": 5259, "user_id": 715286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BqXXo.jpg?s=128&g=1", "display_name": "Qortex", "link": "https://stackoverflow.com/users/715286/qortex"}, "edited": false, "score": 0, "creation_date": 1540368616, "post_id": 52963754, "comment_id": 92834555, "body": "Please tell the steps you went through, otherwise it&#39;s hard to know. Did you do <code>ng update</code> ? What does your packages.json look like?"}, {"owner": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "edited": false, "score": 0, "creation_date": 1540369830, "post_id": 52963754, "comment_id": 92835240, "body": "I did the following ng command from my link: <code>ng update @angular&#47;cli @angular&#47;core</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3475, "user_id": 254662, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3e84fd4b4147b922e32b7b62cce3b41e?s=128&d=identicon&r=PG", "display_name": "Anjum....", "link": "https://stackoverflow.com/users/254662/anjum"}, "is_accepted": false, "score": 0, "last_activity_date": 1540368208, "creation_date": 1540368208, "answer_id": 52963805, "question_id": 52963754, "link": "https://stackoverflow.com/questions/52963754/update-angular-6-to-7-dependency-warning-and-typescript-error/52963805#52963805", "title": "Update Angular 6 to 7 - dependency warning and typescript error", "body": "<p>Did you remove your old <code>node_modules</code> folder? if not please delete it and also delete package-lock.json if it's there. clean npm cache <code>npm cache clean -f</code> and try installing all the packages </p>\n"}, {"comments": [{"owner": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "edited": false, "score": 0, "creation_date": 1540370024, "post_id": 52964126, "comment_id": 92835358, "body": "your solution for solving my dependency problems worked well :) I ran <code>npm cache clean -f</code> and afterwords <code>ng update --all</code>.  Anyway I have still the typescript error: <code>Error:Initialization error (angular 2 language service). Cannot read property &#39;CommandTypes&#39; of undefined</code>"}, {"owner": {"reputation": 5259, "user_id": 715286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BqXXo.jpg?s=128&g=1", "display_name": "Qortex", "link": "https://stackoverflow.com/users/715286/qortex"}, "reply_to_user": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "edited": false, "score": 1, "creation_date": 1540371161, "post_id": 52964126, "comment_id": 92836003, "body": "Ok, mark as an answer then :) Update Typescript also. And it is another issue, you have to see from what code it is thrown, and it might be another question to ask on StackOverflow if you can&#39;t solve it."}], "tags": [], "owner": {"reputation": 5259, "user_id": 715286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BqXXo.jpg?s=128&g=1", "display_name": "Qortex", "link": "https://stackoverflow.com/users/715286/qortex"}, "is_accepted": true, "score": 2, "last_activity_date": 1540369262, "creation_date": 1540369262, "answer_id": 52964126, "question_id": 52963754, "link": "https://stackoverflow.com/questions/52963754/update-angular-6-to-7-dependency-warning-and-typescript-error/52964126#52964126", "title": "Update Angular 6 to 7 - dependency warning and typescript error", "body": "<p>The problem is you don't have the latest version for those two packages.</p>\n\n<ol>\n<li>You need to update your package <code>Codelyzer</code> to the latest version. <code>ng update --all</code> should do it, otherwise you can also edit your <code>package.json</code> by hand.</li>\n</ol>\n\n<p>You can see <a href=\"https://github.com/mgechev/codelyzer/blob/master/CHANGELOG.md\" rel=\"nofollow noreferrer\">here</a> that the latest version (4.5.0) of this package has been made compatible with Angular 7, so you need to use it instead of your 4.2.1 version.</p>\n\n<ol start=\"2\">\n<li>Same thing for your <code>@ngtools/webpack</code>, you need to use the latest version (see <a href=\"https://www.npmjs.com/package/@ngtools/webpack\" rel=\"nofollow noreferrer\">here</a>, it is 7.0.2). It is likely you don't have this one explicitly in your packages.json, so you may just need to do a <code>npm cache clean -f</code> before running <code>ng update</code>.</li>\n</ol>\n\n<p>If this still doesn't work, I suggest you remove your <code>node_modules</code> directory, it will force <code>npm install</code> to rebuild all from the latest versions on the repository, given you correctly updated your <code>package.json</code> (by hand or through <code>ng update</code>).</p>\n"}], "owner": {"reputation": 498, "user_id": 9268779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43afa9bcfc677875fae699eafe1cedeb?s=128&d=identicon&r=PG&f=1", "display_name": "student18", "link": "https://stackoverflow.com/users/9268779/student18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5415, "favorite_count": 0, "accepted_answer_id": 52964126, "answer_count": 2, "score": 3, "last_activity_date": 1543300528, "creation_date": 1540368001, "last_edit_date": 1543300528, "question_id": 52963754, "link": "https://stackoverflow.com/questions/52963754/update-angular-6-to-7-dependency-warning-and-typescript-error", "title": "Update Angular 6 to 7 - dependency warning and typescript error", "body": "<p>I used this link to upgrade my simple angular frontend to Angular 7:</p>\n\n<p><a href=\"https://entwickler.de/online/javascript/angular-7-579846703.html\" rel=\"nofollow noreferrer\">Update to Angular 7</a></p>\n\n<p>While updating i got several warnings for package.json and polyfills.ts files:</p>\n\n<pre><code>UPDATE package.json (1313 bytes)\nnpm WARN @ngtools/webpack@6.1.5 requires a peer of typescript@~2.4.0 || ~2.5.0 || ~2.6.0 || ~2.7.0 || ~2.8.0 || ~2.9.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/compiler@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/core@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/platform-browser-dynamic@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/platform-browser@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/common@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules\\fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"win32\",\"arch\":\"x64\"})\n\nadded 69 packages, removed 4 packages, updated 16 packages and moved 2 packages in 43.395s\nUPDATE package.json (1315 bytes)\nUPDATE src/polyfills.ts (3165 bytes)\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/compiler@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/core@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/platform-browser-dynamic@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/platform-browser@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN codelyzer@4.2.1 requires a peer of @angular/common@&gt;=2.3.1 &lt;7.0.0 || &gt;6.0.0-beta &lt;7.0.0 but none is installed. You must install peer dependencies yourself.\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules\\fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"win32\",\"arch\":\"x64\"})\n</code></pre>\n\n<p>And I also have this error from typescript (3.0.1):</p>\n\n<pre><code>Error:Initialization error (angular 2 language service). Cannot read property 'CommandTypes' of undefined\n</code></pre>\n\n<p>Can anyone suggest a workaround how to fix these dependency warnings and typescript error?\nDo I need to change the dependencies manually? If yes I would need an example how to...</p>\n"}, {"tags": ["typescript", "generics", "typeof"], "answers": [{"comments": [{"owner": {"reputation": 4782, "user_id": 1339698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d43d1dd397dceade900eb917cec4167?s=128&d=identicon&r=PG", "display_name": "jsdw", "link": "https://stackoverflow.com/users/1339698/jsdw"}, "edited": false, "score": 0, "creation_date": 1540417196, "post_id": 52964723, "comment_id": 92863074, "body": "Thanks, this is perfect! Looking at those proposals, better <code>typeof</code> support still sounds like it&#39;s a way off. This is one advantage of using classes over functions more for this sort of thing I suppose - you have the type information built in alongside them and don&#39;t have to resort to such hackery!"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 16, "last_activity_date": 1540371150, "creation_date": 1540371150, "answer_id": 52964723, "question_id": 52963637, "link": "https://stackoverflow.com/questions/52963637/typescript-is-it-possible-to-get-the-return-type-of-a-generic-function/52964723#52964723", "title": "TypeScript: Is it possible to get the return type of a generic function?", "body": "<p>There is a proposal to allow using <code>typeof</code> with arbitrary expressions to allow things like getting the return type of a generic functions for a specific type argument (see <a href=\"https://github.com/Microsoft/TypeScript/issues/26043\" rel=\"noreferrer\">here</a> and <a href=\"https://github.com/Microsoft/TypeScript/issues/6606\" rel=\"noreferrer\">here</a>)</p>\n\n<p>A more generic workaround that works today is to use a generic class with a field that is tied to the return type of the function. We can then extract the field of the class. Since for classes we can specify generic type parameters in type expressions we can extract the generic form of the return type:</p>\n\n<pre><code>export function MyFunc&lt;A&gt;() {\n  return {\n    foo: (os : A) =&gt; {}\n  }\n}\n\nclass Helper &lt;T&gt; {\n  Return = MyFunc&lt;T&gt;()\n}\ntype FuncReturnType&lt;T&gt; = Helper&lt;T&gt;['Return']\ntype ForBool = FuncReturnType&lt;boolean&gt; //  {foo: (os: boolean) =&gt; void;}\ntype ForString = FuncReturnType&lt;string&gt; //  {foo: (os: string) =&gt; void;}\n</code></pre>\n\n<p><strong>Note</strong> If you have constraints of <code>A</code> you will need to duplicate those on <code>T</code> in <code>Helper</code> and <code>FuncReturnType</code>, that is unavoidable unfortunately.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "edited": false, "score": 0, "creation_date": 1598160689, "post_id": 60846777, "comment_id": 112364049, "body": "You can write <code>ReplaceTypeInArray</code> like: <code>type ReplaceTypeInArray&lt;ARR extends unknown[], F, T&gt; = { [K in keyof ARR]: Replace&lt;ARR[K], F, T&gt;; };</code>"}, {"owner": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "edited": false, "score": 0, "creation_date": 1598161139, "post_id": 60846777, "comment_id": 112364110, "body": "You can also remove the <code>ALL</code> type and just use <code>unknown</code> instead."}, {"owner": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "edited": false, "score": 0, "creation_date": 1598161564, "post_id": 60846777, "comment_id": 112364201, "body": "Also, removing the constraint on <code>ARR</code> from <code>ReplaceTypeInArray</code> altogether would allow it to <i>just work</i> on object types -- or any type -- as well. i.e. <code>type ReplaceTypeIn&lt;T, FROM, TO&gt; = { [K in keyof T]: Replace&lt;T[K], FROM, TO&gt;; };</code>"}, {"owner": {"reputation": 6868, "user_id": 2321594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee967a558f8d1199605924e1d51ce36?s=128&d=identicon&r=PG", "display_name": "Aidin", "link": "https://stackoverflow.com/users/2321594/aidin"}, "reply_to_user": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "edited": false, "score": 0, "creation_date": 1598399532, "post_id": 60846777, "comment_id": 112445100, "body": "@tim.stasse thanks for your comments.  I am not sure what <code>Replace&lt;&gt;</code> is in your comments.  Nonetheless, I am pretty sure that writing your own solution with a Playground Link would make it easier to follow and also easier to digest for other people."}, {"owner": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "edited": false, "score": 0, "creation_date": 1598418454, "post_id": 60846777, "comment_id": 112448759, "body": "<code>Replace</code> was meant to be <code>ReplaceType</code>. Unfortunately, the Playground Link is too long to fit in a comment though."}, {"owner": {"reputation": 6868, "user_id": 2321594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee967a558f8d1199605924e1d51ce36?s=128&d=identicon&r=PG", "display_name": "Aidin", "link": "https://stackoverflow.com/users/2321594/aidin"}, "reply_to_user": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "edited": false, "score": 0, "creation_date": 1598444524, "post_id": 60846777, "comment_id": 112460230, "body": "@tim.stasse  I meant an &quot;answer&quot;, not a comment.  If you can get rid of my pyramid of <code>ReplaceTypeInArray</code> that would definitely worth being an answer on its own!"}], "tags": [], "owner": {"reputation": 6868, "user_id": 2321594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee967a558f8d1199605924e1d51ce36?s=128&d=identicon&r=PG", "display_name": "Aidin", "link": "https://stackoverflow.com/users/2321594/aidin"}, "is_accepted": false, "score": 4, "last_activity_date": 1585131576, "creation_date": 1585131576, "answer_id": 60846777, "question_id": 52963637, "link": "https://stackoverflow.com/questions/52963637/typescript-is-it-possible-to-get-the-return-type-of-a-generic-function/60846777#60846777", "title": "TypeScript: Is it possible to get the return type of a generic function?", "body": "<p><a href=\"https://stackoverflow.com/a/52964723\">Titian's solution above</a> works great if the Generic is only applied inside the function body.</p>\n\n<p>However, there are cases that <strong>the Generic Type is a part of the arguments and/or return type.</strong> e.g. </p>\n\n<pre><code>function MyFunc3&lt;T extends object | number | string&gt;(r: number, p: T, x: boolean): T {\n    return p;\n}\n</code></pre>\n\n<p>So, to generalize Titian's solution and support fixating both the arguments and the return type of any generic function, I wrote the following:</p>\n\n<h3>Required Utility Types</h3>\n\n<pre><code>// From https://stackoverflow.com/a/53808212 by jcalz (https://stackoverflow.com/users/2887218)\nexport type IfEquals&lt;T, U, Y=unknown, N=never&gt; =\n    (&lt;G&gt;() =&gt; G extends T ? 1 : 2) extends\n    (&lt;G&gt;() =&gt; G extends U ? 1 : 2) ? Y : N;\n\n// Aidin: Please comment if you could make the following shorter!\ntype ReplaceType&lt;T, FROM_TYPE, TO_TYPE&gt; = IfEquals&lt;T, FROM_TYPE, TO_TYPE, T&gt;;\ntype ReplaceTypeInArray&lt;ARR, F, T&gt; =\n    ARR extends [] ? []\n    : ARR extends [infer P0] ? [P0 extends F ? T : P0]\n    : ARR extends [infer P0, infer P1] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2, infer P3] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;, ReplaceType&lt;P3, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2, infer P3, infer P4] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;, ReplaceType&lt;P3, F, T&gt;, ReplaceType&lt;P4, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2, infer P3, infer P4, infer P5] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;, ReplaceType&lt;P3, F, T&gt;, ReplaceType&lt;P4, F, T&gt;, ReplaceType&lt;P5, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2, infer P3, infer P4, infer P5, infer P6] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;, ReplaceType&lt;P3, F, T&gt;, ReplaceType&lt;P4, F, T&gt;, ReplaceType&lt;P5, F, T&gt;, ReplaceType&lt;P6, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2, infer P3, infer P4, infer P5, infer P6, infer P7] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;, ReplaceType&lt;P3, F, T&gt;, ReplaceType&lt;P4, F, T&gt;, ReplaceType&lt;P5, F, T&gt;, ReplaceType&lt;P6, F, T&gt;, ReplaceType&lt;P7, F, T&gt;]\n    : ARR extends [infer P0, infer P1, infer P2, infer P3, infer P4, infer P5, infer P6, infer P7, infer P8] ? [ReplaceType&lt;P0, F, T&gt;, ReplaceType&lt;P1, F, T&gt;, ReplaceType&lt;P2, F, T&gt;, ReplaceType&lt;P3, F, T&gt;, ReplaceType&lt;P4, F, T&gt;, ReplaceType&lt;P5, F, T&gt;, ReplaceType&lt;P6, F, T&gt;, ReplaceType&lt;P7, F, T&gt;, ReplaceType&lt;P8, F, T&gt;]\n    : never;\n</code></pre>\n\n<h3>Sample Functions</h3>\n\n<pre><code>type ALL = string | number | object | boolean;\n\nexport function MyFunc1&lt;T extends ALL&gt;() {\n  return {\n    foo: (os : T) =&gt; {}\n  }\n}\n\nfunction MyFunc2&lt;T extends ALL&gt;(r: 55, p: T, x: boolean): T {\n    return p;\n}\n</code></pre>\n\n<h3>Fixation examples</h3>\n\n<pre><code>// Inspired by https://stackoverflow.com/a/52964723 by Titian (https://stackoverflow.com/users/125734)\nclass Helper1 &lt;T extends ALL&gt; {\n    Fixate = (...args: ReplaceTypeInArray&lt;Parameters&lt;typeof MyFunc1&gt;, ALL, T&gt;) =&gt; MyFunc1&lt;T&gt;(...args);\n}\ntype FixatedFunc1&lt;T extends ALL&gt; = Helper1&lt;T&gt;['Fixate'];\n\n// -- Usage\n\ntype ForNumber1 = FixatedFunc1&lt;number&gt; //  {foo: (os: number) =&gt; void;}\ntype ForString1 = FixatedFunc1&lt;string&gt; //  {foo: (os: string) =&gt; void;}\n\n// ~~~~~~~~~~~~~~~~~~~\n\nclass Helper2 &lt;T extends ALL&gt; {\n    Fixate = (...args: ReplaceTypeInArray&lt;Parameters&lt;typeof MyFunc2&gt;, ALL, T&gt;) =&gt; MyFunc2&lt;T&gt;(...args);\n}\ntype FixatedFunc2&lt;T extends ALL&gt; = Helper2&lt;T&gt;['Fixate'];\n\n// -- Usage\n\ntype ForNumber2 = FixatedFunc2&lt;number&gt; //  (args_0: 55, args_1: number, args_2: boolean) =&gt; number\ntype ForString2 = FixatedFunc2&lt;string&gt; //  (args_0: 55, args_1: string, args_2: boolean) =&gt; string\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=1&amp;ssc=1&amp;pln=60&amp;pc=99#code/FAehAID9p2-hi6ggMQE4HsC24AWALgQA4DOAXGKQQIYDGA1pgG4Cm6AZgDaYDuAdHRwgaIAKwBmABwAGKQCYAjPPAAjAJ7gAVnRpcAXuAAUhEhSq1GLdtz6DhAV1LtSIeVKkB2JVICUwVgAPYkx0AnACdWJWcABJDgBRAEcHPVIAHgAVABpwAFVcgE0AXgcAOwYyvjLcgDlistY2dAA+cGLgAEgjdIBxFqNfdrbe8CCCVjKAE1JwTPAAfnBFcHJweSHxyZmunv7B4fBRrenZvMXl1fWhpcKr2oBuYBRwAEEASyn3srWABS5WDRnOAhNhsJNwu8OOB1JgHCC4VwpuBsDQGDECHgYhxMFweLxvgBzcCkPChCboACEwEi0XAACVWMQuPRWJkoqwsrlUPSAPIAWQA+plCr8ErlMrzhaKEm1inFEik0lzwDyBdKxRKpSLNXMWk9aTFGczWezorEyq90OgaOp0q96fTuRK5cBwO63o6xoEJqdwABtAC6FyDbo9awd9O9vpmAe+HHY4F+MmDS39yej21mqAu8z+KbD7ojXpOsf98cTydyFfQScUqYDxpZdDZHPSVdVLtyTdNbd+imdesDhaukczfvLZQTtY7Nbr1anlfkDf9PZbZs5HdQXYZTObrei7YHnb13b3vcPv3kg8yLWHHtHJZ9Wbji5nMgX0-n4DnV8-lYkFc1wPTcPxPW8zxNdc+2PbdT13KCQPba9wJaSD9w3dsJBvO8R2LKNS1mScv1nN9v1-FDf2wn8yN+AAWIDz2gy8wLgiCEIwmCcPQi9NxQti0I43isO4oTmM3OicPvcNPQI58J1-MDf2PCj-xnajf0kmiSLERjEMwrcd2AgzYKMpikL-VCePEkSrLEiytIE6yLLEKS8Nk8cy0UtTyNoyjaI02itN-VztMrAA2PTOJY0TjK4uy4svfizP0vtqKc+yDMclLos3UKMsSzdwrch98M8ojvLCmcVL8nzfkCkjgto0Lf2Kqqk08KLhMM+DCqPWLzIM5LesGtKBtSy9spGia8vG3L2zagrRsvTwSpksdCNfEilNomqSP8kiGsrJqdLqtrf1W9rfikLqbJ69i+v7ObuuGh7ls3dKcu6qa3pm9t8q+u7FsBizLqWv7rrWotwEaZonheJBEZgcAAGVXn5X4ABkElVPJagAYUyWJeVqFGoCRhBnkNN5Mcx9oSQIdAiXAAAfGGHGwVREzZzBVC0Vg6HCNnVEwXFATKeGghCMJwA4cpBfeTAynAfl1FQeXFCycqacxgYhgAbzDdBWAIBx0GVw2HxxTA1iMTBZjWTIhmKNp9YAXzDD2PeAOWygVpWVbV+X5C1zbXlpgZ0DWMRQuIR3ckCNYRbFmgyl8R3wEtj1jdN83wGIJ5vbAcmKYQVVYgADVeImSbJ0vKZeC1SGId5jeRDR8CIMhKBAah6CYZpbAEUERHEeQAE5wro7wJDUTRMneAh3lT4xTG7ix++sTh8XsbAQCcFwQGUMRPAkOj-DoFlSFmAAJVguGidAVlD+TY3D3XM5HVB3kCGgJnpow-AgE0HQISCgmUOQWitDaO0vwQE0HBBSDIhpMDQlVurP2ihBLvxdM7No6CNZZAGEA-gICwG+ELjSDkqof5-1YFMDBdBNbzDDhHemd8H7sGYS0f0AByb+v8Ji8MDPDYuABaMR+RSA0EJKwKm1DUChFqBzLmT96YCLoQwwhZQVHsDaMXTO1tbb2zWDozm7A8HgGYJgT4DwPbU0UegFGjMiQrHlBoiYWjMHpGoEzMohJ9EQEMaLYx4DfFEksdY2xRcID12QMAS+QJb730fioF+MZZjv1dl-Wh-95SAOAaA8BhUoHWltO2eBiCXDpBQWgoOft5DYNprgw4BCGlEIKaQopFDgD2IUbk+hjCQ4sNfpkth8oOGpKIXwjxrBhGiIgBIqRMi5FULpI45R5j0AqHcQMrxdAQ5mNUYE90RgyGkEFDIaOoVzmCkUKY3R6Bci3PkEnUWAJU6WKOewNZMRHHOL8YSHZNDBGDODj4lx-iTnGFuVc8AMdnlFLuWscJ-jEVgMFK8tQ7zxaWNRYSIAA\" rel=\"nofollow noreferrer\">Playground Link (Contains all 3 parts)</a></p>\n\n<p>Now, one can simply use <code>ReturnType&lt;T&gt;</code> or <code>Parameteres&lt;T&gt;</code> on any of these fixated function types!</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 2063390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idBMk.jpg?s=128&g=1", "display_name": "tim.stasse", "link": "https://stackoverflow.com/users/2063390/tim-stasse"}, "is_accepted": false, "score": 1, "last_activity_date": 1599316326, "creation_date": 1599316326, "answer_id": 63755049, "question_id": 52963637, "link": "https://stackoverflow.com/questions/52963637/typescript-is-it-possible-to-get-the-return-type-of-a-generic-function/63755049#63755049", "title": "TypeScript: Is it possible to get the return type of a generic function?", "body": "<p>Expanding on Aidin's answer, I've managed to make <code>ReplaceTypeIn</code>, which works for any number of elements, objects as well as arrays, and uses only a couple of lines:</p>\n<pre class=\"lang-js prettyprint-override\"><code>// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n// Derived from https://stackoverflow.com/a/53808212 by jcalz (https://stackoverflow.com/users/2887218)\nexport type IfEquals&lt;T, U, Y=unknown, N=never&gt; =\n    (&lt;G&gt;() =&gt; G extends T ? 1 : 2) extends\n    (&lt;G&gt;() =&gt; G extends U ? 1 : 2) ? Y : N;\n\ntype ReplaceType&lt;T, FROM_TYPE, TO_TYPE&gt; = IfEquals&lt;T, FROM_TYPE, TO_TYPE, T&gt;;\ntype ReplaceTypeIn&lt;T, FROM_TYPE, TO_TYPE&gt; = {\n  [K in keyof T]: ReplaceType&lt;T[K], FROM_TYPE, TO_TYPE&gt;;\n};\n\n// ~~~~~~~~~~~~~~~~~~~~~~ SAMPLE FUNCTIONS ~~~~~~~~~~~~~~~~~~~\n\nexport function MyFunc1&lt;T extends unknown&gt;() {\n  return {\n    foo: (os: T) =&gt; {}\n  }\n}\n\nfunction MyFunc2&lt;T extends unknown&gt;(r: 55, p: T, x: boolean): T {\n    return p;\n}\n\n// ~~~~~~~~~~~~~~~~~~~~~ FIXATIONS ~~~~~~~~~~~~~~~~~~~~\n\n// Derived from https://stackoverflow.com/a/52964723 by Titian (https://stackoverflow.com/users/125734)\nclass Helper1 &lt;T extends unknown&gt; {\n    Fixate = (...args: ReplaceTypeIn&lt;Parameters&lt;typeof MyFunc1&gt;, unknown, T&gt;) =&gt; MyFunc1&lt;T&gt;(...args);\n}\ntype FixatedFunc1&lt;T extends unknown&gt; = Helper1&lt;T&gt;['Fixate'];\n\n// -- Usage\n\ntype ForNumber1 = FixatedFunc1&lt;number&gt; //  {foo: (os: number) =&gt; void;}\ntype ForString1 = FixatedFunc1&lt;string&gt; //  {foo: (os: string) =&gt; void;}\n\n// ~~~~~~~~~~~~~~~~~~~\n\nclass Helper2 &lt;T extends unknown&gt; {\n    Fixate = (...args: ReplaceTypeIn&lt;Parameters&lt;typeof MyFunc2&gt;, unknown, T&gt;) =&gt; MyFunc2&lt;T&gt;(...args);\n}\ntype FixatedFunc2&lt;T extends unknown&gt; = Helper2&lt;T&gt;['Fixate'];\n\n// -- Usage\n\ntype ForNumber2 = FixatedFunc2&lt;number&gt; //  (r: 55, p: number, x: boolean) =&gt; number\ntype ForString2 = FixatedFunc2&lt;string&gt; //  (r: 55, p: string, x: boolean) =&gt; string\n</code></pre>\n<p>Here's a <a href=\"https://www.typescriptlang.org/play?#code/FAehAID9p2-hi6ggEQKYCcCWA3dAJuAGaYD2AtuABYAutADgM4BcYTtAhgMYDWZ%20TMQA2ZAO4A6bpRCcQAVgDMADgAMygEwBGDeABGAT3AArbp2EAvcAAo6jVuy58BWEeKkyArkyxMQG5WUAdm1lAEpgdAAPBjJMWnBaAwZ0cABJYgBRAEdPcyYAHgAVABpwAFUygE0AXk8AO1568XqygDka%20vRBAD5wGuAASGsCgHEe6zD%20vtHwaNp0eoImcCLwAH5wLXAWcA0p%20cXloZHxyenwWcOllfKNrZ29qc2qx7aAbmBgJJTwACV0AxhDx0EVkuhimUAGJ-ADyAFkAPpFKoABUyZSKsORaMyfRq6SyuXykPAMIROPRmOxKKpqx6nx%20qQBQJBYJSaXqpPJSNpGNWNNx%20PAAG9gOBwABtADS4Gw9XAvHQBjIxFWAF1dizgdxQeDijL1dC4bzcdTKXjPgBfT4oKBIB3QcAAZQAgvDUQAZTJk8ptADCRTSsLazvtjvgX2isXiJAa3Fo2DICvhBih8a0xTmUQWN3ADSaLQmUzFEsw6FonkwCtLEpIZDIu2sZFYqymNT6Iqt4vA3e7wGI8cTyfAqfT9W4Giz12W%20cazTE9QmmF28nkZQYu1K4Ciuz0DeE6E49TCW9FPbLFarCoY1q%20YHDEfgZLSAA1XUGQ2Gnwh72gsHghAkOQVB2MwbAgBwPD8IIbiSNIFCyAoGgAJwAGwACwhIo%20hGEU2CJseNhgQ4kFODBriiPBXg%20Jgfg6PIQSKBhETcMCTArAAEugwgpJg2zTjmRwrAWC5LuedZktgUScAs-Q2BIimcJgADmrbamy4KcgUqLKZwFAVr4BRMqqo5phmPRlKJLSYj07Z9GOGbFBMikSMpalhHeTJSTJCwEOO3CZmsM4ifORbydxvFYEFPSSgA5FC0myegcXqraD4ALQZRUTCcCp6BfN5UJxG0ngUHo0XyYlvmEAFmb1GVFWYH0D6isQDZNi2uwNeVWD2eAuBkNgBDvN2RVxM6tA4PUKnbAS1XJf5TkcNNKktRAbUdTYXXgCt8oqf1g3DaNf6Pj%20kBfGxnAceAkV8bogm5rO1mLp2F4%20cl8nWK57nqYCOp6hyXK6Zg%20mGXRxngqZjkThollzoWi62f1MOTs531KapTCecAY3gh9fkBVOwVCXmL3iQSd1YMTsUJUlCypelEBZTleUFd8%20PFZgpW9ZgujzfTtXxlOPVNetErWCu4Brhu3WNVgZS7voB5HieFyi1gHO-Fzk2rfzBNC7DBR7TN4s2FLMvgJuu1Tftit7irx79SbKnAEAA\" rel=\"nofollow noreferrer\">playground link</a> for the example above.</p>\n"}], "owner": {"reputation": 4782, "user_id": 1339698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d43d1dd397dceade900eb917cec4167?s=128&d=identicon&r=PG", "display_name": "jsdw", "link": "https://stackoverflow.com/users/1339698/jsdw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5193, "favorite_count": 2, "accepted_answer_id": 52964723, "answer_count": 3, "score": 15, "last_activity_date": 1599316326, "creation_date": 1540367704, "question_id": 52963637, "link": "https://stackoverflow.com/questions/52963637/typescript-is-it-possible-to-get-the-return-type-of-a-generic-function", "title": "TypeScript: Is it possible to get the return type of a generic function?", "body": "<p>I have exported a function from some module that looks like:</p>\n\n<pre><code>export function MyFunc&lt;A&gt;() {\n    return {\n        foo: (in: A) =&gt; void\n    }\n}\n</code></pre>\n\n<p>Now, in some other module, I want to be able to talk about the different return types of <code>MyFunc</code>. Since I didn't export the type, I'll use <code>typeof</code> to get hold of the type I want given the value <code>MyFunc</code>. <strong>Ideally I would do the following</strong>:</p>\n\n<pre><code>import { MyFunc } from \"mymodule\";\ntype MyFuncReturned&lt;A&gt; = ReturnType&lt;typeof MyFunc&lt;A&gt;&gt;;\n\nfunction foo(): MyFuncReturned&lt;string&gt; {\n   // ...\n}\n</code></pre>\n\n<p>Hrmph, this doesn't work; <code>typeof</code> can only be passed a value and doesn't like my attempt to specify the generic type of that value.</p>\n\n<p>The best I can do is convincing TypeScript to infer specific types of <code>MyFunc</code> from values I've created, and then giving them individual type aliases, eg:</p>\n\n<pre><code>const myFuncStringReturn = MyFunc&lt;string&gt;();\ntype MyFuncStringReturn = typeof myFuncStringReturn;\n</code></pre>\n\n<p>To avoid actually running <code>MyFunc</code> just to get the type info, I can hide it behind a function and use <code>ReturnType</code> on it:</p>\n\n<pre><code>const myFuncStringReturn = () =&gt; MyFunc&lt;string&gt;();\ntype MyFuncStringReturn = ReturnType&lt;typeof myFuncStringReturn&gt;;\n\nconst myFuncBoolReturn = () =&gt; MyFunc&lt;bool&gt;();\ntype MyFuncBoolReturn = ReturnType&lt;typeof myFuncBoolReturn&gt;;\n</code></pre>\n\n<p>This gives me a way of, one type at a time, talking about the different return types of <code>MyFunc</code>, but it </p>\n\n<ul>\n<li>Involves actual runtime code to be written that TS can infer from.  </li>\n<li>Doesn't let me talk about <code>MyFunc</code> in a more generic sense.</li>\n</ul>\n\n<p>The only \"proper\" solution I can come up with is duplicating a bunch of type info when I declare <code>MyFunc</code>:</p>\n\n<pre><code>export function MyFunc&lt;A&gt;(): MyFuncReturns&lt;A&gt; {\n    return {\n        foo: (in: A) =&gt; void\n    }\n}\n\nexport type MyFuncReturns&lt;A&gt; = {\n    foo: (in: A) =&gt; void\n}\n</code></pre>\n\n<p>But now as I change <code>MyFunc</code>, I have to make sure to keep <code>MyFuncReturns</code> in sync with it.</p>\n\n<p><strong>Is there any way I can get hold of a type like <code>MyFuncReturns&lt;A&gt;</code> given just our exported value <code>MyFunc</code>, without having to add runtime code or add the boilerplate above?</strong></p>\n"}, {"tags": ["node.js", "typescript", "mongoose"], "owner": {"reputation": 600, "user_id": 4146843, "user_type": "registered", "accept_rate": 26, "profile_image": "https://lh5.googleusercontent.com/-DZjNNF12BhE/AAAAAAAAAAI/AAAAAAAAATo/UEfgNQGXxGg/photo.jpg?sz=128", "display_name": "Jean-Luc Aubert", "link": "https://stackoverflow.com/users/4146843/jean-luc-aubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540365824, "creation_date": 1540365824, "question_id": 52963127, "link": "https://stackoverflow.com/questions/52963127/nodejs-typescript-mongoose-unable-to-get-document-with-findbyid", "title": "NodeJS, TypeScript, Mongoose unable to get document with FindById", "body": "<p>Well, newbie with NodeJS and Mongoose, will try to get a document from a collection and use a class to manage results as i want to do.</p>\n\n<p>I followed many tutos, but... i don't understand why, with the following code, i always get a null object with a findById() method on a model.</p>\n\n<p>After hours spent, i decide to get help...</p>\n\n<p>So, first i define a Model (simplified version) :</p>\n\n<pre><code>import { Schema, Model, model } from 'mongoose';\n\nimport { DocumentInterface } from './../interfaces/document-product-interface';\nimport { ProductClass } from './product-class';\n\nvar productSchema: Schema = new Schema(\n    {\n        _id: {\n            type: String,\n            required: 'Required _id'\n        },\n        id: {\n            type: String,\n            required: 'EAN required'\n        },\n        product_name: {\n            type: String\n        }\n    }\n);\n\n// Scheme methods\nproductSchema.method('title', ProductClass.prototype.title);\n\nexport const Products: Model&lt;DocumentInterface&gt; = model&lt;DocumentInterface&gt;('ProductClass', productSchema);\n</code></pre>\n\n<p>Next, create a class (for business purpose) :</p>\n\n<pre><code>import { ProductInterface } from './../interfaces/product-interface';\n\nexport class ProductClass implements ProductInterface{\n    public _id: String;\n    public id: String;\n    public product_name_fr?: string;\n    public product_name?: string;\n\npublic constructor() {}\n\npublic title(): string {\n  return 'something';\n}\n}\n</code></pre>\n\n<p>Next... The Document interface :</p>\n\n<pre><code>import { Document } from 'mongoose';\nimport { ProductInterface } from './product-interface';\nimport { ProductClass } from 'models/product-class';\n\nexport interface DocumentInterface extends ProductInterface, Document, ProductClass {}\n</code></pre>\n\n<p>Finally, just a controller, to get a product :</p>\n\n<pre><code> import { Products }  from '../models/product-model';\n import { SoappliProductInterface } from './../interfaces/soappli-product-interface';\n\n import { Request, Response, NextFunction} from 'express';\n\nexport class ProductController {\n   public get(request: Request, response: Response, next: NextFunction) {\n        console.log('Search for a product : ' + request.params.ean);\n\n        Products.findById(request.params.ean, (error: any, product: DocumentInterface) =&gt; {\n            if (error) {\n                response.status(500).send( {message: error})\n            } else {\n                console.log('Product: ' + JSON.stringify(product));\n                if (product) {\n                    console.log('Product title: ' + product.title);\n                    response.status(200).send(product);\n                } else {\n                    response.status(404).send({message: 'no matches for : ' + request.params.ean})\n                }\n            }\n        });\n    }\n }\n</code></pre>\n\n<p>When i run with Postman and use a correct _id, got null for product...</p>\n\n<p>If i remove all classes and interfaces, get the entire document...</p>\n\n<p>What's wrong with this code ?</p>\n\n<p>Thx</p>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 123, "user_id": 9186111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a006709480fa1138d27751baf23b6d?s=128&d=identicon&r=PG&f=1", "display_name": "Blanc", "link": "https://stackoverflow.com/users/9186111/blanc"}, "edited": false, "score": 0, "creation_date": 1592917506, "post_id": 52962567, "comment_id": 110591559, "body": "You are probably confusing the compiler (tsc) version and the language (typescript) version. tsc -v prints the <i>compiler</i> version."}], "answers": [{"comments": [{"owner": {"reputation": 9735, "user_id": 6299857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O4G3u.jpg?s=128&g=1", "display_name": "Prasad Telkikar", "link": "https://stackoverflow.com/users/6299857/prasad-telkikar"}, "edited": false, "score": 0, "creation_date": 1540367503, "post_id": 52962845, "comment_id": 92833919, "body": "I am new to typescript and curious to learn.. I have question? is typescript version and typescript compiler version are updated through same command. because I believe OP asked about typescript compiler and your answer is more about updating typescript version"}, {"owner": {"reputation": 180, "user_id": 9440892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q_6ZL5ixmr8/AAAAAAAAAAI/AAAAAAAAAXM/hbIdPt7evUo/photo.jpg?sz=128", "display_name": "Vijay VJ", "link": "https://stackoverflow.com/users/9440892/vijay-vj"}, "edited": false, "score": 0, "creation_date": 1540369838, "post_id": 52962845, "comment_id": 92835245, "body": "Thanks for reply But I already use this command my typescript version changes to 3.0 but tsc version not changes I retain the sane 1.5.3 version"}], "tags": [], "owner": {"reputation": 225, "user_id": 4605014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0bc55d82d8dc62a9fc2ae839f45e174?s=128&d=identicon&r=PG&f=1", "display_name": "Deval", "link": "https://stackoverflow.com/users/4605014/deval"}, "is_accepted": false, "score": 0, "last_activity_date": 1540364782, "creation_date": 1540364782, "answer_id": 52962845, "question_id": 52962567, "link": "https://stackoverflow.com/questions/52962567/need-to-upgrade-typescript-compiler-tsc-version-to-3-0/52962845#52962845", "title": "Need to upgrade typescript compiler `tsc` version to 3.0", "body": "<p>Use following npm command to update</p>\n\n<p>Updating to specific version</p>\n\n<pre><code>npm install -g typescript@3.0\n</code></pre>\n\n<p>or</p>\n\n<pre><code>npm update -g typescript@3.0\n</code></pre>\n\n<p>For more read <a href=\"https://www.npmjs.com/package/typescript\" rel=\"nofollow noreferrer\">this</a></p>\n"}], "owner": {"reputation": 180, "user_id": 9440892, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q_6ZL5ixmr8/AAAAAAAAAAI/AAAAAAAAAXM/hbIdPt7evUo/photo.jpg?sz=128", "display_name": "Vijay VJ", "link": "https://stackoverflow.com/users/9440892/vijay-vj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1648, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1540364782, "creation_date": 1540363706, "question_id": 52962567, "link": "https://stackoverflow.com/questions/52962567/need-to-upgrade-typescript-compiler-tsc-version-to-3-0", "title": "Need to upgrade typescript compiler `tsc` version to 3.0", "body": "<p>How to upgrade <code>tsc</code> version to 2.62</p>\n\n<blockquote>\n  <p>currently i'm using 1.5.3 version</p>\n</blockquote>\n"}, {"tags": ["html", "css", "angular", "typescript", "angular-material"], "answers": [{"comments": [{"owner": {"reputation": 119030, "user_id": 16940, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7fc2db839382b30434539fbc967c498e?s=128&d=identicon&r=PG", "display_name": "Simon_Weaver", "link": "https://stackoverflow.com/users/16940/simon-weaver"}, "edited": false, "score": 2, "creation_date": 1579475354, "post_id": 52975755, "comment_id": 105768796, "body": "Your &#39;component&#39; version doesn&#39;t really work. Well it does, but only because of a wrong assumption. First <code>::ng-deep .mat-select-panel</code> in a component actually DOES define this css for the global space. So as soon as your component is used the first time this css is now in the global scope and stays there forever. So if you have one component that uses this it will break the second component. So your &#39;flexible override&#39; is by far the best way to go. The css MUST be in the global scope because mat-select uses an overlay so component css wouldn&#39;t take effect on the actual dialog."}, {"owner": {"reputation": 1052, "user_id": 11135174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e72ea47f557234d6e62d9d2b0f4c3f7?s=128&d=identicon&r=PG&f=1", "display_name": "Rapha&#235;l Balet", "link": "https://stackoverflow.com/users/11135174/rapha%c3%abl-balet"}, "edited": false, "score": 0, "creation_date": 1602750911, "post_id": 52975755, "comment_id": 113820718, "body": "Changing the default max-height may move some part <b>off the screen</b> and could make some option not selectable (These chances are bigger if you&#39;re using it within a <code>MatDialog</code>)"}], "tags": [], "owner": {"reputation": 786, "user_id": 1966301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUPJV.png?s=128&g=1", "display_name": "Gordon Westerman", "link": "https://stackoverflow.com/users/1966301/gordon-westerman"}, "is_accepted": true, "score": 31, "last_activity_date": 1540405729, "creation_date": 1540405729, "answer_id": 52975755, "question_id": 52962476, "link": "https://stackoverflow.com/questions/52962476/in-angular7-how-do-i-change-the-height-of-a-mat-select-when-shows-the-list-of-i/52975755#52975755", "title": "In angular7, how do I change the height of a mat-select when shows the list of items?", "body": "<p>Like <a href=\"https://stackoverflow.com/a/46770809/1966301\">this helpful answer</a> to a similar question already states there are a couple of ways you can solve this problem and which one you choose depends on whether you want to apply your rules globally or locally. None of the following examples require you to change the ViewEncapsulation type of your component.</p>\n\n<h1>Local override</h1>\n\n<p>Using <a href=\"https://angular.io/guide/component-styles#deprecated-deep--and-ng-deep\" rel=\"noreferrer\">::ng-deep</a> you can simply override the styles of both the trigger and the panel that are being rendered in child components of your component. <strong>Important</strong>: ::ng-deep has been marked as deprecated and while it still works there is no guarantee it will do so in future.</p>\n\n<p><strong>select-multiple-example.component.css</strong></p>\n\n<pre class=\"lang-css prettyprint-override\"><code>::ng-deep .mat-select-trigger {\n  min-width: 80vw;\n}\n\n::ng-deep .mat-select-panel {\n  max-height: 80vh !important;\n}\n</code></pre>\n\n<p><strong>select-multiple-example.component.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;mat-form-field&gt;\n  &lt;mat-select placeholder=\"ITEMS\" multiple&gt;\n    &lt;mat-option *ngFor=\"let item of items\" [value]=\"topping\"&gt;{{item}}&lt;/mat-option&gt;\n  &lt;/mat-select&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n\n<p><strong><a href=\"https://stackblitz.com/edit/stackoverflow-52962476-mat-select-height-ng-deep\" rel=\"noreferrer\">DEMO</a></strong> (I edited your code for the purpose of the demo)</p>\n\n<hr>\n\n<h1>Global override</h1>\n\n<p>This will apply your overrides to all triggers or panels within your application.</p>\n\n<p><strong>styles.css</strong></p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.mat-select-trigger {\n  min-width: 80vw;\n}\n\n.mat-select-panel {\n  max-height: 80vh !important;\n}\n</code></pre>\n\n<p><strong><a href=\"http://stackblitz.com/edit/stackoverflow-52962476-mat-select-height-global-override\" rel=\"noreferrer\">DEMO</a></strong> (overrides can be found in <em>/assets/styles/material-override.scss</em>)</p>\n\n<hr>\n\n<h1>Flexible override</h1>\n\n<p>Using the <strong>@Input pannelClass</strong> on your <a href=\"https://material.angular.io/components/select/api#MatSelect\" rel=\"noreferrer\">MatSelect</a> (<em>mat-select</em>) will allow you to apply different overrides depending on your use case and independent from other selects in your app.</p>\n\n<p><strong>styles.css</strong></p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.panel-override {\n  max-height: 80vh !important;\n}\n\n.panel-override-2 {\n  max-height: 100px !important;\n}\n</code></pre>\n\n<p><strong>select-multiple-example.component.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;mat-form-field&gt;\n  &lt;mat-select placeholder=\"ITEMS\" multiple [panelClass]=\"applyPanelOverride2 ? 'panel-override-2' : 'panel-override'\"&gt;\n    &lt;mat-option *ngFor=\"let item of items\" [value]=\"item\"&gt;{{item}}&lt;/mat-option&gt;\n  &lt;/mat-select&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n\n<p><strong><a href=\"https://stackblitz.com/edit/stackoverflow-52962476-mat-select-height-panelclass-input\" rel=\"noreferrer\">DEMO</a></strong> (note the checkbox in the toolbar)</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 7759655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-62hzIvcLlRI/AAAAAAAAAAI/AAAAAAAAAgE/YNYzE3py5r4/photo.jpg?sz=128", "display_name": "Ashe Li ", "link": "https://stackoverflow.com/users/7759655/ashe-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1553066047, "creation_date": 1553066047, "answer_id": 55255321, "question_id": 52962476, "link": "https://stackoverflow.com/questions/52962476/in-angular7-how-do-i-change-the-height-of-a-mat-select-when-shows-the-list-of-i/55255321#55255321", "title": "In angular7, how do I change the height of a mat-select when shows the list of items?", "body": "<p>FWIW, setting the option height has never been supported.</p>\n\n<p>You must do css hack for change height.</p>\n\n<p>source:\n<a href=\"https://github.com/angular/material2/issues/8054\" rel=\"nofollow noreferrer\">https://github.com/angular/material2/issues/8054</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11336614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c46f4d525a0c437d7354a4a1b9a557?s=128&d=identicon&r=PG&f=1", "display_name": "davida227", "link": "https://stackoverflow.com/users/11336614/davida227"}, "is_accepted": false, "score": 1, "last_activity_date": 1557430598, "creation_date": 1557430598, "answer_id": 56066449, "question_id": 52962476, "link": "https://stackoverflow.com/questions/52962476/in-angular7-how-do-i-change-the-height-of-a-mat-select-when-shows-the-list-of-i/56066449#56066449", "title": "In angular7, how do I change the height of a mat-select when shows the list of items?", "body": "<p>Re the update, try to use max height instead of min.</p>\n\n<p>If you use Gordans suggestion of @Input Panelclass, use 'panelClass=...\" instead of '[panelClass]=...', otherwise the styling won't take affect. </p>\n"}], "owner": {"reputation": 1208, "user_id": 4374672, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E0Evb.png?s=128&g=1", "display_name": "Woody", "link": "https://stackoverflow.com/users/4374672/woody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26812, "favorite_count": 2, "accepted_answer_id": 52975755, "answer_count": 3, "score": 14, "last_activity_date": 1608654932, "creation_date": 1540363349, "last_edit_date": 1608654932, "question_id": 52962476, "link": "https://stackoverflow.com/questions/52962476/in-angular7-how-do-i-change-the-height-of-a-mat-select-when-shows-the-list-of-i", "title": "In angular7, how do I change the height of a mat-select when shows the list of items?", "body": "<p>In Angular7, how can I increase the height of a mat-select when it is showing the items? I have the following component file:</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>import { Component, ViewEncapsulation } from \"@angular/core\";\nimport { FormControl } from \"@angular/forms\";\n\n/** @title Select with multiple selection */\n@Component({\n  selector: \"select-multiple-example\",\n  templateUrl: \"select-multiple-example.html\",\n  styleUrls: [\"select-multiple-example.css\"],\n  encapsulation: ViewEncapsulation.None\n})\nexport class SelectMultipleExample {\n  toppings = new FormControl();\n  toppingList: string[] = [\n    \"Extra cheese\",\n    \"Mushroom\",\n    \"Onion\",\n    \"Pepperoni\",\n    \"Sausage\",\n    \"Tomato\",\n    \"CBFnTQcZ79AeYrdq\",\n    \"1KiYwRjeqdqjNzVb\",\n    \"TeLvgGl7t3yHDrZE\",\n    \"s3ivzgLZO9qDNovJ\",\n    \"QOOH2MCNRRXVJNwD\",\n    \"1RWqdyPpu8yHSDoO\",\n    \"d3aAOYIWYJE695Lf\",\n    \"JoXDWP6zKSrZTIUc\",\n    \"hpxQKFJsJcgVey5A\",\n    \"UMI0akuHn2M5BaAP\",\n    \"LRnQgNNjpqZwpdzj\",\n    \"ZDIgw68mQyNLtxob\",\n    \"Q6HY6tcqFcySJqD9\",\n    \"WVFSg4TKeEqqoF1g\",\n    \"ka4ORT9rUW8EPaPd\",\n    \"ingfHsjBXAmt7yvo\",\n    \"G3MY6MowhI7s0fN9\",\n    \"ZlWqSoRnlhXQCbYz\",\n    \"gerR70hrO5alwsOR\",\n    \"dk0xrarQzfH6HAdl\",\n    \"D1WCkB9jhhPMiuv7\",\n    \"zPMj4g6Iu52jXqwq\",\n    \"P4OEXKI2FZfFVqVn\",\n    \"xMcOFx5m92d9oGQz\",\n    \"dkyWq0tLJ8wQknaA\",\n    \"iJZUeyjyyn3qQaCT\",\n    \"5KhUjwEJK8wIYkoa\",\n    \"YB3rEUkE12Pf9hcO\",\n    \"qzrzSvzDXukVXvZi\",\n    \"Hr1lccIcJZurLKiL\",\n    \"noQo0pUMBeuQGpcf\",\n    \"Tw4ACNCyDbpMI5MQ\",\n    \"kK3QMSqyrNAwo3J0\",\n    \"lvXP7qEm3biOpVbu\",\n    \"gzy7bHaW2Qq6StN0\",\n    \"GjXJAaRovr5CwHaO\",\n    \"7CfVdILE7RhaVDvI\",\n    \"8i5j8nlokIdkPEoO\",\n    \"XpSWhgdwON3XFI15\",\n    \"w5R5JfrDnuCzhqN7\",\n    \"azhjvfD5geZaKjfc\",\n    \"6y1Zdt18KSRNMdxx\",\n    \"kd5ou8n6Ae5sILpj\",\n    \"2p0YQKWdOvpXo4cD\",\n    \"XfmEOsiIpq4C0PVc\",\n    \"qYIzI8y3vOdx2KJ6\",\n    \"6MzPKWHOn1oFOHpd\",\n    \"tJgyk3p4UIDEj985\",\n    \"RXwLNofzoJHUYgOf\"\n  ];\n}\n</code></pre>\n\n<p>Where I am able to set the width with the following CSS and html:</p>\n\n<p>CSS:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code> .myFilter .mat-select-trigger {\n  min-width: 80vw;\n}\n</code></pre>\n\n<p>HTML:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;mat-form-field&gt;\n  &lt;mat-select class=\"myFilter\" placeholder=\"Pizza Stuff\" [formControl]=\"toppings\" multiple&gt;\n    &lt;mat-option *ngFor=\"let topping of toppingList\" [value]=\"topping\"&gt;{{topping}}&lt;/mat-option&gt;\n  &lt;/mat-select&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n\n<p>Which is fine, but I want to be able to set the height not the width. If I try and change the CSS to this:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.myFilter .mat-select-trigger {\n  max-height: 80vh;\n}\n</code></pre>\n\n<p>then the height of the box increases and not the actual list of items. Assuming that I am somehow able to do that, how can I then ensure that the list doesn't extend beyond the number of items in the <code>toppingList</code> array if, for example, the data contained within it is updated to </p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>toppingList: string[] = [\n    \"Extra cheese\",\n    \"Mushroom\",\n    \"Onion\",\n    \"Pepperoni\",\n    \"Sausage\",\n    \"Tomato\",\n    \"CBFnTQcZ79AeYrdq\",\n    \"1KiYwRjeqdqjNzVb\",\n    \"TeLvgGl7t3yHDrZE\",\n    \"s3ivzgLZO9qDNovJ\",\n    \"QOOH2MCNRRXVJNwD\",\n    \"1RWqdyPpu8yHSDoO\",\n    \"d3aAOYIWYJE695Lf\",\n    \"JoXDWP6zKSrZTIUc\",\n    \"hpxQKFJsJcgVey5A\"\n  ];\n</code></pre>\n\n<p>In other words, if the list is reduced, how can I show all items and remove the scrollbar?\nThanks in advance.</p>\n\n<p>UPDATE:</p>\n\n<p>So I have made the following changes:\nCSS:</p>\n\n<pre><code>.myFilter {\n  background-color: yellow; /* Added this to check it was working*/\n  min-height: 85vh;\n}\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;mat-form-field&gt;\n  &lt;mat-select [panelClass]=\"'myFilter'\" placeholder=\"Pizza Stuff\" [formControl]=\"toppings\" multiple&gt;\n    &lt;mat-option *ngFor=\"let topping of toppingList\" [value]=\"topping\"&gt;{{topping}}&lt;/mat-option&gt;\n  &lt;/mat-select&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n\n<p>Which has changed the height to <code>85vh</code> but if I have only 5 items I want the list shorter. </p>\n"}, {"tags": ["angular", "html", "typescript", "ionic3"], "comments": [{"owner": {"reputation": 180, "user_id": 8494198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b68d91caccc9b80aa0a0a37391960f76?s=128&d=identicon&r=PG&f=1", "display_name": "Omsl", "link": "https://stackoverflow.com/users/8494198/omsl"}, "edited": false, "score": 0, "creation_date": 1540366801, "post_id": 52962405, "comment_id": 92833522, "body": "Do you want the color of the selected tab to be obvious?"}, {"owner": {"reputation": 13, "user_id": 9223827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159cc2b6ec65c4873ee102777a884908?s=128&d=identicon&r=PG&f=1", "display_name": "Rincy", "link": "https://stackoverflow.com/users/9223827/rincy"}, "reply_to_user": {"reputation": 180, "user_id": 8494198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b68d91caccc9b80aa0a0a37391960f76?s=128&d=identicon&r=PG&f=1", "display_name": "Omsl", "link": "https://stackoverflow.com/users/8494198/omsl"}, "edited": false, "score": 0, "creation_date": 1540377342, "post_id": 52962405, "comment_id": 92839920, "body": "I need the selected tab should be my 1st tab . I tried &quot;this.appCtrl.getRootNav().setRoot(TabsPage)&quot; , but it hiding my side menu."}, {"owner": {"reputation": 13, "user_id": 9223827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159cc2b6ec65c4873ee102777a884908?s=128&d=identicon&r=PG&f=1", "display_name": "Rincy", "link": "https://stackoverflow.com/users/9223827/rincy"}, "reply_to_user": {"reputation": 180, "user_id": 8494198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b68d91caccc9b80aa0a0a37391960f76?s=128&d=identicon&r=PG&f=1", "display_name": "Omsl", "link": "https://stackoverflow.com/users/8494198/omsl"}, "edited": false, "score": 0, "creation_date": 1540377448, "post_id": 52962405, "comment_id": 92839981, "body": "and i tried &quot;this.parent.select(0)&quot; . It getting my 1st tab, but the second tab showing sub page. I need the second tab to show my tab2Root page"}, {"owner": {"reputation": 180, "user_id": 8494198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b68d91caccc9b80aa0a0a37391960f76?s=128&d=identicon&r=PG&f=1", "display_name": "Omsl", "link": "https://stackoverflow.com/users/8494198/omsl"}, "edited": false, "score": 0, "creation_date": 1540380069, "post_id": 52962405, "comment_id": 92841546, "body": "can you try <a href=\"https://stackoverflow.com/questions/52939125/ionic-4-simple-tab-in-blank-project/52945197#52945197\">this</a> ?"}, {"owner": {"reputation": 13, "user_id": 9223827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159cc2b6ec65c4873ee102777a884908?s=128&d=identicon&r=PG&f=1", "display_name": "Rincy", "link": "https://stackoverflow.com/users/9223827/rincy"}, "reply_to_user": {"reputation": 180, "user_id": 8494198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b68d91caccc9b80aa0a0a37391960f76?s=128&d=identicon&r=PG&f=1", "display_name": "Omsl", "link": "https://stackoverflow.com/users/8494198/omsl"}, "edited": false, "score": 0, "creation_date": 1540470863, "post_id": 52962405, "comment_id": 92883910, "body": "tried it, but not working"}], "owner": {"reputation": 13, "user_id": 9223827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159cc2b6ec65c4873ee102777a884908?s=128&d=identicon&r=PG&f=1", "display_name": "Rincy", "link": "https://stackoverflow.com/users/9223827/rincy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540396272, "creation_date": 1540363043, "last_edit_date": 1540396272, "question_id": 52962405, "link": "https://stackoverflow.com/questions/52962405/ionic-3-tab-not-focusing-on-particular-tab1root-while-loading", "title": "ionic 3 Tab not focusing on particular tab1Root while loading", "body": "<p>I am using ion-tabs in my app.\nWhen i navigating from 2nd tabs sup page to tabs, it loading the tab1Root page, but tab focused on 2nd tab.</p>\n\n<p>Here is my code:</p>\n\n<pre><code> dismiss() {\n    this.navCtrl.push(TabsPage).then(() =&gt; {\n      const index = this.viewCtrl.index;\n      this.navCtrl.remove(index);\n  });\n  }\n</code></pre>\n\n<p>tabs.html</p>\n\n<pre><code>&lt;ion-tabs &gt;\n  &lt;ion-tab [root]=\"tab1Root\" tabTitle=\"Home\" tabIcon=\"home\"&gt;&lt;/ion-tab&gt;\n  &lt;ion-tab [root]=\"tab2Root\" tabTitle=\"My Booking\" tabIcon=\"book\"&gt;&lt;/ion-tab&gt;\n  &lt;ion-tab [root]=\"tab3Root\" tabTitle=\"Chat\" tabIcon=\"chatbubbles\"&gt;&lt;/ion-tab&gt;\n  &lt;ion-tab [root]=\"tab4Root\" tabTitle=\"Profile\" tabIcon=\"person\"&gt;&lt;/ion-tab&gt;\n&lt;/ion-tabs&gt;\n</code></pre>\n\n<p>I am navigating to tabs page at dismiss() from [root]=\"tab2Root\". My tab will be in 2nd tab. I need it to focus at first tab when i call dismiss(). and 2nd tab will me in tab2Root page</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 467, "user_id": 6223063, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TKPOY.png?s=128&g=1", "display_name": "Ankit Kumar Singh", "link": "https://stackoverflow.com/users/6223063/ankit-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1540363574, "post_id": 52962389, "comment_id": 92831666, "body": "On the click of the close button fire an http request to save your data, and wrap it inside a promise, in case of success call the modal dismiss, and incase of failure simply display an error message,"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 10264207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iH_BPgYZmdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN49DCp8RCzYxDleb2vd_SmU6o_Ig/mo/photo.jpg?sz=128", "display_name": "Jijo Robin", "link": "https://stackoverflow.com/users/10264207/jijo-robin"}, "edited": false, "score": 0, "creation_date": 1540364306, "post_id": 52962623, "comment_id": 92832043, "body": "I tried this and it seems to work but the problem is after the modal closes the screen gets greyed out and I&#39;m unable to click on any links"}, {"owner": {"reputation": 10464, "user_id": 9338572, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c50e486f217794cd7f8fadd0ddfdb8c3?s=128&d=identicon&r=PG&f=1", "display_name": "mpro", "link": "https://stackoverflow.com/users/9338572/mpro"}, "reply_to_user": {"reputation": 157, "user_id": 10264207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iH_BPgYZmdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN49DCp8RCzYxDleb2vd_SmU6o_Ig/mo/photo.jpg?sz=128", "display_name": "Jijo Robin", "link": "https://stackoverflow.com/users/10264207/jijo-robin"}, "edited": false, "score": 0, "creation_date": 1540364766, "post_id": 52962623, "comment_id": 92832317, "body": "Are you sure then you put <code>*ngIf</code> directive in the right place? It should be on the very top modal element."}, {"owner": {"reputation": 157, "user_id": 10264207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iH_BPgYZmdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN49DCp8RCzYxDleb2vd_SmU6o_Ig/mo/photo.jpg?sz=128", "display_name": "Jijo Robin", "link": "https://stackoverflow.com/users/10264207/jijo-robin"}, "edited": false, "score": 0, "creation_date": 1540365044, "post_id": 52962623, "comment_id": 92832479, "body": "I found out the issue. After submission the modal-backdrop class is getting appended to the modal. I&#39;ll have to find a way to remove that. If you know how to do that it would be helpful."}, {"owner": {"reputation": 10464, "user_id": 9338572, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c50e486f217794cd7f8fadd0ddfdb8c3?s=128&d=identicon&r=PG&f=1", "display_name": "mpro", "link": "https://stackoverflow.com/users/9338572/mpro"}, "reply_to_user": {"reputation": 157, "user_id": 10264207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iH_BPgYZmdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN49DCp8RCzYxDleb2vd_SmU6o_Ig/mo/photo.jpg?sz=128", "display_name": "Jijo Robin", "link": "https://stackoverflow.com/users/10264207/jijo-robin"}, "edited": false, "score": 1, "creation_date": 1540367805, "post_id": 52962623, "comment_id": 92834090, "body": "It means that something might be wrong with the logic. What styles this class contains? It is just workaround but you could try to remove / switch off styles added by <code>modal-backdrop</code> class by adding <code>[ngStyle]=&quot;{ &#39;PROPERTY&#39; : CONDITION ? &#39;VALUE_if_true&#39; : &#39;VALUE_if_false&#39;}&quot;</code> to element on which that class appears. For example <code>[ngStyle]=&quot;{ &#39;disable&#39; : isModalOn ? &#39;&#39; : &#39;none&#39;}&quot;</code>. It might be necessary add also <code>!important</code> to those styles, which I don&#39;t like but sometimes helps."}], "tags": [], "owner": {"reputation": 10464, "user_id": 9338572, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c50e486f217794cd7f8fadd0ddfdb8c3?s=128&d=identicon&r=PG&f=1", "display_name": "mpro", "link": "https://stackoverflow.com/users/9338572/mpro"}, "is_accepted": false, "score": 1, "last_activity_date": 1540363959, "creation_date": 1540363959, "answer_id": 52962623, "question_id": 52962389, "link": "https://stackoverflow.com/questions/52962389/close-modal-on-submit/52962623#52962623", "title": "close modal on submit", "body": "<p>You can define global variable in your ts file which helps you to handle displaying the modal:</p>\n\n<pre><code>public isModalOn: boolean = false;\n</code></pre>\n\n<p>Next add it to modal html element as a condition:</p>\n\n<pre><code>&lt;div class=\"modal\" id=\"myModal\" *ngIf=\"isModalOn\"&gt;\n  ...\n&lt;/div&gt;\n</code></pre>\n\n<p>Then your modal will appear only when the variable is true. You need to also change the value of variable to <code>true</code> on click method which invokes the modal window.</p>\n\n<p>Last step is to bring back the variable value to <code>false</code> on the end of method which submits the modal:</p>\n\n<pre><code>createUser() {\n  ...\n  this.isModalOn = false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4725, "user_id": 8808496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSryZ.jpg?s=128&g=1", "display_name": "Felix Lemke", "link": "https://stackoverflow.com/users/8808496/felix-lemke"}, "is_accepted": true, "score": 1, "last_activity_date": 1540365585, "creation_date": 1540365585, "answer_id": 52963058, "question_id": 52962389, "link": "https://stackoverflow.com/questions/52962389/close-modal-on-submit/52963058#52963058", "title": "close modal on submit", "body": "<p>I highly recommend to use angulars reactive forms, your form will be much easier to refactor and to implement, since almost all logic is just located in the component class, and demonstrate it using a simplified example. At first create your template in the following form, of course you should add your classes since it looks like you're using bootstrap.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"modal\" #myModal&gt;\n  &lt;form  #createForm=\"ngForm\" (ngSubmit)=\" createUser()\" &gt;\n    &lt;div&gt;\n      &lt;label for=\"text\"&gt;First name&lt;/label&gt;&lt;br&gt;\n      &lt;input type=\"text\" formControlName=\"name \"required&gt;\n    &lt;/div&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In the component class create the form using</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class FormComponent {\n  createForm: FormGroup;\n  ViewChild('myModal') modal: ElementRef;\n\n  constructor() {\n    this.createForm = new FormGroup({\n      name: new FormControl(null),\n      email: new FormControl(null)\n      // etc\n    })\n  }\n\n  createUser() {\n    const userData = {\n      user: this.createForm.value;\n      role: // where you get role from\n    }\n    this.Authentication.create_user(userData).subscribe(res =&gt; {\n      this.modal.nativeElement.modal('hide');\n    });\n  }\n}\n</code></pre>\n\n<p>with the <code>ViewChild</code> you get access to the modal and should be able to call bootstraps <code>.modal('hide')</code>.</p>\n"}], "owner": {"reputation": 157, "user_id": 10264207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iH_BPgYZmdM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN49DCp8RCzYxDleb2vd_SmU6o_Ig/mo/photo.jpg?sz=128", "display_name": "Jijo Robin", "link": "https://stackoverflow.com/users/10264207/jijo-robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52963058, "answer_count": 2, "score": 0, "last_activity_date": 1540365585, "creation_date": 1540362984, "last_edit_date": 1540365264, "question_id": 52962389, "link": "https://stackoverflow.com/questions/52962389/close-modal-on-submit", "title": "close modal on submit", "body": "<p>I'm implementing a crud operation and I want to <strong>close the modal on submit</strong>. If i use data-dismiss on the submit button it will only close the button button the functionality doesn't take place. I want the functionality to take place also the the modal to be closed.</p>\n\n<p>Here is my code</p>\n\n<blockquote>\n  <p><strong>component.html</strong></p>\n</blockquote>\n\n<pre><code>&lt;!-- The Modal --&gt;\n\n&lt;div class=\"modal\" id=\"myModal\"&gt;\n&lt;div class=\"modal-dialog\"&gt;\n  &lt;div class=\"modal-content\"&gt; \n\n    &lt;!-- Modal Header --&gt;\n    &lt;div class=\"modal-header\"&gt;\n      &lt;h4 class=\"modal-title\"&gt;Create User&lt;/h4&gt;\n      &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Modal body --&gt;\n    &lt;div class=\"modal-body\"&gt;\n        &lt;!-- &lt;form [formGroup]=\"userForm\" (ngSubmit)=\"add(title.value,releaseYear.value))\"&gt; --&gt;\n            &lt;form  #createForm=\"ngForm\" (ngSubmit)=\" createUser()\" &gt;\n\n          &lt;div class=\"form-group\" [class.has-error]=\"firstname.invalid  &amp;&amp; firstname.touched\"&gt;\n            &lt;label for=\"text\"&gt;First name&lt;/label&gt;&lt;br&gt;\n            &lt;input type=\"text\"  class=\"form-control\" [(ngModel)]=\"user.user.first_name\" name=\"firstname\" required #firstname=\"ngModel\" &gt;\n            &lt;span class=\"help-block\" *ngIf=\"firstname.invalid &amp;&amp; firstname.touched\"&gt;\n                *First Name is required\n              &lt;/span&gt;\n          &lt;/div&gt;\n          &lt;div class=\"form-group\" [class.has-error]=\"lastname.invalid  &amp;&amp; lastname.touched\"&gt;\n            &lt;label for=\"text\"&gt;Last name&lt;/label&gt;&lt;br&gt;\n            &lt;input type=\"text\"  class=\"form-control\" [(ngModel)]=\"user.user.last_name\" name=\"lastname\" required #lastname=\"ngModel\"&gt;\n            &lt;span class=\"help-block\" *ngIf=\"lastname.invalid &amp;&amp; lastname.touched\"&gt;\n                *Last Name is required\n              &lt;/span&gt;\n\n          &lt;/div&gt;\n          &lt;div class=\"form-group\" [class.has-error]=\"email.invalid  &amp;&amp; email.touched\"&gt;\n            &lt;label for=\"text\"&gt;Email&lt;/label&gt;&lt;br&gt;\n            &lt;input type=\"text\" class=\"form-control\" pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$\" [(ngModel)]=\"user.user.email\" name=\"email\" required #email=\"ngModel\"&gt;\n            &lt;span class=\"help-block\" *ngIf=\"email.invalid &amp;&amp; email.touched\"&gt;\n              *Email is required\n            &lt;/span&gt; &lt;br&gt;\n            &lt;span class=\"help-block\" *ngIf=\"email.errors?.pattern\"&gt;\n              *Invalid pattern\n            &lt;/span&gt; \n          &lt;/div&gt;\n\n              &lt;div class=\"form-group\" [class.has-error]=\"role.touched &amp;&amp; role.invalid\"&gt;\n                &lt;label for=\"role\"&gt;Role&lt;/label&gt;\n                &lt;select id=\"role\" name=\"role\"\n                       class=\"form-control\" required [(ngModel)]=\"user.role\" #role=\"ngModel\" &gt;\n                  &lt;option *ngFor=\"let role of roles\" [value]=\"role.name\" &gt;\n                    {{role.name}}\n                  &lt;/option&gt;\n                &lt;/select&gt;\n                &lt;span class=\"help-block\"\n                    *ngIf=\"role.touched &amp;&amp; role.invalid\"&gt;\n                     *Role is required\n                &lt;/span&gt;\n            &lt;/div&gt;  \n\n          &lt;button type=\"submit\"  [disabled]=\"createForm.invalid\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n\n\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<blockquote>\n  <p><strong>component.ts</strong></p>\n</blockquote>\n\n<pre><code>//Create User\ncreateUser() {\nvar data= this.user_data;\n let user:any = {};\n   user[\"username\"] = this.user.user.email\n   user[\"first_name\"] = this.user.user.first_name\n   user[\"last_name\"]= this.user.user.last_name\n   user[\"email\"]= this.user.user.email\n\n   this.userData[\"user\"] = user\n   this.userData[\"role\"] = this.user.role\n   console.log(this.userData, \"sending data\")\n   this.Authentication.create_user(this.userData).subscribe(res=&gt;{\n//  data.push(res);\n   this.getUsersFromServices();  \n//  console.log(this.getUsersFromServices);\n   console.log('data received after creating user',res);   \n   },\n   err =&gt;{\n  console.error(\"Error creating user!\"); \n// return Observable.throw(Error);\n\n})\n\n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540371697, "post_id": 52961185, "comment_id": 92836362, "body": "Where is your type parameter defined ? Could you provide a full example? It work fine in my experiments .."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540371785, "post_id": 52961185, "comment_id": 92836421, "body": "Ex: <code>function whatever (param: SomeThing) {      return function decorator&lt;T extends ()=&gt; string&gt;(target: Object, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor&lt;T&gt;)     {}  }  class test {   @whatever(new SomeThing()) &#47;*err*&#47;   m(){ }   @whatever(new SomeThing()) &#47;*ok*&#47;   mw(): string{ return &quot;&quot; } }</code>"}, {"owner": {"reputation": 111, "user_id": 2873581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09d3c892614949bfde86cf18c11428d?s=128&d=identicon&r=PG&f=1", "display_name": "Paul S.", "link": "https://stackoverflow.com/users/2873581/paul-s"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540373442, "post_id": 52961185, "comment_id": 92837485, "body": "@TitianCernicova-Dragomir - I added the full example, please take a look. The idea is to prevent it from being applied to synchronous methods.  It currently can be applied fine."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540373812, "post_id": 52961185, "comment_id": 92837699, "body": "I get an error if I try to apply it on methods that do not return a <code>Promise</code>, the single exception is methods returning <code>any</code>..  Could you post a full example that reproduces the issue ? Including the target class. Here is my stackblitz showing it works <a href=\"https://stackblitz.com/edit/typescript-xh9n49\" rel=\"nofollow noreferrer\">stackblitz.com/edit/typescript-xh9n49</a>"}, {"owner": {"reputation": 111, "user_id": 2873581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09d3c892614949bfde86cf18c11428d?s=128&d=identicon&r=PG&f=1", "display_name": "Paul S.", "link": "https://stackoverflow.com/users/2873581/paul-s"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540382420, "post_id": 52961185, "comment_id": 92843086, "body": "I&#39;ll try tomorrow during work hours and get back to you."}, {"owner": {"reputation": 111, "user_id": 2873581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09d3c892614949bfde86cf18c11428d?s=128&d=identicon&r=PG&f=1", "display_name": "Paul S.", "link": "https://stackoverflow.com/users/2873581/paul-s"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1540427190, "post_id": 52961185, "comment_id": 92865738, "body": "Yep, the issue was a any return type. Not sure how I missed that, thank you for the assist!"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 2873581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09d3c892614949bfde86cf18c11428d?s=128&d=identicon&r=PG&f=1", "display_name": "Paul S.", "link": "https://stackoverflow.com/users/2873581/paul-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1540427163, "creation_date": 1540427163, "answer_id": 52979669, "question_id": 52961185, "link": "https://stackoverflow.com/questions/52961185/typescript-restrict-decorator-via-typedpropertydescriptor-on-decorator-factorie/52979669#52979669", "title": "Typescript: restrict decorator via TypedPropertyDescriptor on decorator factories", "body": "<p>The issue was that our signature for these methods was effectively <code>any</code>, which <code>Promise&lt;any&gt;</code> fullfills.</p>\n\n<p>Many thanks to @TitianCernicova-Dragomir for helping to figure this out.</p>\n"}, {"comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 111, "user_id": 2873581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09d3c892614949bfde86cf18c11428d?s=128&d=identicon&r=PG&f=1", "display_name": "Paul S.", "link": "https://stackoverflow.com/users/2873581/paul-s"}, "edited": false, "score": 0, "creation_date": 1540507919, "post_id": 52994199, "comment_id": 92902946, "body": "@PaulS. Glad to help, don&#39;t forget to give jcalz an upvote in the link, he is the source of the <code>IfAny</code> type :)"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1540485394, "creation_date": 1540485394, "answer_id": 52994199, "question_id": 52961185, "link": "https://stackoverflow.com/questions/52961185/typescript-restrict-decorator-via-typedpropertydescriptor-on-decorator-factorie/52994199#52994199", "title": "Typescript: restrict decorator via TypedPropertyDescriptor on decorator factories", "body": "<p>The problem was cause by the fact that the function retunred any and the decorator would be compatible with <code>any</code> since <code>any</code> is compatbile with any constraint. </p>\n\n<p>You can avoid the decorator being compatible with a function returning any using <a href=\"https://stackoverflow.com/questions/49927523/disallow-call-with-any/49928360#49928360\">this</a> trick to detect <code>any</code>:</p>\n\n<pre><code>class SomeThing { }\ntype IfAny&lt;T, Y, N&gt; = 0 extends (1 &amp; T) ? Y : N; \nfunction whatever(param: SomeThing) {\n    return function decorator&lt;T extends () =&gt; Promise&lt;any&gt;&gt;(target: Object,\n        propertyKey: string | symbol,\n        descriptor: TypedPropertyDescriptor&lt;T&gt; &amp; IfAny&lt;ReturnType&lt;T&gt;, \"Any not allowed retrun a promise\", {}&gt;) {\n\n    }\n}\nclass test {\n    @whatever(new SomeThing()) /*err*/\n    m() : any{\n    }\n    @whatever(new SomeThing()) /*ok*/ mw() {\n        return Promise.resolve(\"\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 2873581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09d3c892614949bfde86cf18c11428d?s=128&d=identicon&r=PG&f=1", "display_name": "Paul S.", "link": "https://stackoverflow.com/users/2873581/paul-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 52994199, "answer_count": 2, "score": 0, "last_activity_date": 1540485394, "creation_date": 1540355838, "last_edit_date": 1540373491, "question_id": 52961185, "link": "https://stackoverflow.com/questions/52961185/typescript-restrict-decorator-via-typedpropertydescriptor-on-decorator-factorie", "title": "Typescript: restrict decorator via TypedPropertyDescriptor on decorator factories", "body": "<p>I know that the standard way to restrict what a decorator can apply on is to use a TypedPropertyDescriptor, a la <code>export function decorator(target, key, TypedPropertyDescriptor&lt;T extends ...&gt;) {...}</code></p>\n\n<p>This works fine when used as is. But if a decorator factory is involved, the TS compiler no longer seems to enforce it.</p>\n\n<p>i.e: <code>export function whatever (param: SomeThing) { return function decorator(target, key, TypedPropertyDescriptor&lt;T extends ...&gt;) {...} }</code></p>\n\n<p>You can put this (^) on anything you like, which defeats the purpose. How does one restrict decorators when used via factories?</p>\n\n<p>I tried searching around, but couldn't quite find anything.</p>\n\n<p>Full example:</p>\n\n<pre><code>export function AsyncEndpoint(\n    method: string,\n    path: string,\n    model?: ClassType&lt;IRequest&gt;,\n    validationRules: any = {},\n    responseStatus: number = HttpStatus.OK,\n    base: string = \"v1\"\n) {\n    // noinspection TsLint\n    return function(\n        target: Controller, // This is the class prototype\n        propertyKey: string, // This is the prop/method name called\n        descriptor: TypedPropertyDescriptor&lt;(...p: any[]) =&gt; Promise&lt;any&gt;&gt;\n    ): any {...}\n</code></pre>\n"}]