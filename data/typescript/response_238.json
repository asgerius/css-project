[{"tags": ["javascript", "arrays", "typescript", "filter"], "comments": [{"owner": {"reputation": 1173, "user_id": 7881234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cb0dea4bda1e3667ef29d6e878d273?s=128&d=identicon&r=PG&f=1", "display_name": "doobean", "link": "https://stackoverflow.com/users/7881234/doobean"}, "reply_to_user": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1564614939, "post_id": 57299831, "comment_id": 101093560, "body": "@CertainPerformance oh I&#39;m going to edit the question. It was supposed to be an object. But feel free to suggest a better structure if you have an idea. Thanks for the comment."}, {"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1564615059, "post_id": 57299831, "comment_id": 101093579, "body": "Yep, an object is probably the most easily understandable structure, that&#39;s the sort of thing I&#39;d do as well."}], "answers": [{"comments": [{"owner": {"reputation": 1173, "user_id": 7881234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cb0dea4bda1e3667ef29d6e878d273?s=128&d=identicon&r=PG&f=1", "display_name": "doobean", "link": "https://stackoverflow.com/users/7881234/doobean"}, "edited": false, "score": 0, "creation_date": 1564630714, "post_id": 57299921, "comment_id": 101096302, "body": "It works wonderfully, thank you so much. But could you briefly explain the block of code where occurrencesOfId variable is? I am trying to understand how does that reduce function works there. Thank you."}, {"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "reply_to_user": {"reputation": 1173, "user_id": 7881234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cb0dea4bda1e3667ef29d6e878d273?s=128&d=identicon&r=PG&f=1", "display_name": "doobean", "link": "https://stackoverflow.com/users/7881234/doobean"}, "edited": false, "score": 1, "creation_date": 1564641072, "post_id": 57299921, "comment_id": 101098985, "body": "It&#39;s an object indexed by <code>id</code>, whose values are the number of occurrences of each ID. Eg, for <code>A</code>, it&#39;s <code>{ 0: 2, 1: 1 }</code>. For <code>C</code>, it&#39;s <code>{ 2: 3 }</code>. The <code>(a[id] || 0)</code> looks up the existing count-in-progress for that ID on the accumulator, and if it doesn&#39;t exist, resolves to 0 instead. Then, 1 is added to the whole expression, and assigned back to the accumulator. It&#39;s a pretty common pattern <a href=\"https://www.google.com/search?q=how+to+count+up+occurrences+into+object+reduce+javascript+stackoverflow+site:stackoverflow.com\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": true, "score": 3, "last_activity_date": 1564640402, "last_edit_date": 1564640402, "creation_date": 1564614854, "answer_id": 57299921, "question_id": 57299831, "link": "https://stackoverflow.com/questions/57299831/filtering-the-complicated-data-in-an-array-and-return-a-new-one/57299921#57299921", "title": "Filtering the complicated data in an array and return a new one", "body": "<p>Assuming that your output <code>accounts</code> property is meant to be an object:</p>\n\n<p>I'd split the problem into chunks first. If you can figure out a way to transform an individual <code>accounts</code> array into the desired output structure, you're most of the way there (and the rest is just a simple <code>.map</code>). So, we just need to turn</p>\n\n<pre><code>[{id: 0, data: {}}, {id: 1, data: {}}, {id: 0, data: {}}]\n</code></pre>\n\n<p>into</p>\n\n<pre><code>{joint: [{id: 0, data: {}}, {id: 0, data: {}}], individual: [{id: 1, data: {}}]}\n</code></pre>\n\n<p>One option is to iterate over the input objects, and just count up the number of occurrences of each id. Then, once you have a count, just iterate over the input objects again, looking up the count for each one. If the count is 1, push it to an <code>individual</code> array, else push it to a <code>joint</code> array:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const arr = [\r\n  { name: 'A', accounts: [{id: 0, data: {}}, {id: 1, data: {}}, {id: 0, data: {}}]},\r\n  { name: 'B', accounts: [{id: 0, data: {}}, {id: 1, data: {}}]},\r\n  { name: 'C', accounts: [{id: 2, data: {}}, {id: 2, data: {}}, {id: 2, data: {}}]},\r\n];\r\n\r\nconst transformAccounts = (inputAccounts) =&gt; {\r\n  const occurrencesOfId = inputAccounts.reduce((a, { id }) =&gt; {\r\n    a[id] = (a[id] || 0) + 1;\r\n    return a;\r\n  }, {});\r\n  const joint = [];\r\n  const individual = [];\r\n  inputAccounts.forEach((obj) =&gt; {\r\n    if (occurrencesOfId[obj.id] &gt; 1) {\r\n      joint.push(obj);\r\n    } else {\r\n      individual.push(obj);\r\n    }\r\n  });\r\n  return { joint, individual };\r\n};\r\n\r\nconst output = arr.map(({ name, accounts }) =&gt; ({\r\n  name,\r\n  accounts: transformAccounts(accounts)\r\n}));\r\nconsole.log(output);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 1061, "user_id": 9196467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hNr2MsW0o_M/AAAAAAAAAAI/AAAAAAAAAAk/yQ0PJK_IojU/photo.jpg?sz=128", "display_name": "Sampson Crowley", "link": "https://stackoverflow.com/users/9196467/sampson-crowley"}, "edited": false, "score": 0, "creation_date": 1564616636, "post_id": 57299990, "comment_id": 101093887, "body": "While this code may work for the question, It is better to provide <b><i>why</i></b> this answers the question. this is a site built on <b>learning</b>, not just wring code for other people"}], "tags": [], "owner": {"reputation": 1, "user_id": 11866445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8a4f18ce0c253b0a0d5470a3578dcc?s=128&d=identicon&r=PG", "display_name": "OrangeJedi", "link": "https://stackoverflow.com/users/11866445/orangejedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564615389, "creation_date": 1564615389, "answer_id": 57299990, "question_id": 57299831, "link": "https://stackoverflow.com/questions/57299831/filtering-the-complicated-data-in-an-array-and-return-a-new-one/57299990#57299990", "title": "Filtering the complicated data in an array and return a new one", "body": "<p>I tried this out and it worked:</p>\n\n<pre><code>const arr = [\n    { name: 'A', accounts: [{id: 0, data: {}}, {id: 1, data: {}}, {id: 0, data: {}}]},\n    { name: 'B', accounts: [{id: 0, data: {}}, {id: 1, data: {}}]},\n    { name: 'C', accounts: [{id: 2, data: {}}, {id: 2, data: {}}, {id: 2, data: {}}]},\n];\n\n\nlet newArr = [];\nfor(let i = 0;i &lt; arr.length;i++){\n    let join = [];\n    let individual = [];\n    for(let j = 0;j&lt;arr[i].accounts.length;j++){\n        console.log(idInArrayCount(arr[i].accounts,arr[i].accounts[j].id));\n        if(idInArrayCount(arr[i].accounts,arr[i].accounts[j].id) &gt; 1){\n            join.push(arr[i].accounts[j]);\n        }else{\n            individual.push(arr[i].accounts[j]);\n        }\n    }\n    newArr.push({\n        \"name\" : arr[i].name,\n        accounts : {\n            \"join\" : join,\n            \"individual\" : individual\n        }\n    });\n    function idInArrayCount(array,ID){\n        let count = 0;\n        for(let i = 0;i &lt; array.length;i++){\n            if(array[i].id === ID){\n                count++;\n            }\n        }\n        return count;\n    }\n}\nconsole.log(newArr);\n</code></pre>\n\n<p>The variable  <code>newArr</code> contains the wanted value.</p>\n"}, {"tags": [], "owner": {"reputation": 236, "user_id": 8672473, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gO4c9y23pIM/AAAAAAAAAAI/AAAAAAAAHOI/vX-gzoV0O8E/photo.jpg?sz=128", "display_name": "user8672473", "link": "https://stackoverflow.com/users/8672473/user8672473"}, "is_accepted": false, "score": 1, "last_activity_date": 1564619100, "creation_date": 1564619100, "answer_id": 57300391, "question_id": 57299831, "link": "https://stackoverflow.com/questions/57299831/filtering-the-complicated-data-in-an-array-and-return-a-new-one/57300391#57300391", "title": "Filtering the complicated data in an array and return a new one", "body": "<p>Uses really similar logic as above answer, just the code is little different, it might help you better understand how you can work with data.</p>\n\n<p>So first step is that you must create some sort of table of occurrences.\nThen based on that sort the accounts between joint and individual. \nYou did not specify if you want to merge the data or they are just duplicates.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const arr = [\r\n    { name: 'A', accounts: [{id: 0, data: {}}, {id: 1, data: {}}, {id: 0, data: {}}]},\r\n    { name: 'B', accounts: [{id: 0, data: {}}, {id: 1, data: {}}]},\r\n    { name: 'C', accounts: [{id: 2, data: {}}, {id: 2, data: {}}, {id: 2, data: {}}]},\r\n];\r\n\r\nlet newArray = arr.map( value =&gt; {\r\n    let accounts = {\r\n        joint: [],\r\n        individual: [],\r\n    };\r\n    let table = {};\r\n    \r\n    for ( let acc of value.accounts ) {\r\n        if ( table.hasOwnProperty(acc.id) ) {\r\n            table[acc.id] += 1;\r\n        } else {\r\n            table[acc.id] = 1;\r\n        }\r\n    }\r\n\r\n    let finder = id =&gt; a =&gt; a.id === Number(id);\r\n\r\n    for ( let id in table ) {\r\n        let f = finder(id);\r\n        let account = value.accounts.find( f );\r\n        if (table[id] === 1) {\r\n            accounts.individual.push( account );\r\n        } else {\r\n            accounts.joint.push( account );\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...value,\r\n        accounts\r\n    }\r\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1173, "user_id": 7881234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cb0dea4bda1e3667ef29d6e878d273?s=128&d=identicon&r=PG&f=1", "display_name": "doobean", "link": "https://stackoverflow.com/users/7881234/doobean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 57299921, "answer_count": 3, "score": 1, "last_activity_date": 1564640402, "creation_date": 1564614101, "last_edit_date": 1564615137, "question_id": 57299831, "link": "https://stackoverflow.com/questions/57299831/filtering-the-complicated-data-in-an-array-and-return-a-new-one", "title": "Filtering the complicated data in an array and return a new one", "body": "<p>I have an array like this :</p>\n\n<pre><code>const arr = [\n              { name: 'A', accounts: [{id: 0, data: {}}, {id: 1, data: {}}, {id: 0, data: {}}]},\n              { name: 'B', accounts: [{id: 0, data: {}}, {id: 1, data: {}}]},\n              { name: 'C', accounts: [{id: 2, data: {}}, {id: 2, data: {}}, {id: 2, data: {}}]},\n];\n\n</code></pre>\n\n<p>and I would like to modify this array like this :</p>\n\n<pre><code>const arr = [\n              { name: 'A', accounts: {joint: [{id: 0, data: {}}, {id: 0, data: {}}], individual: [{id: 1, data: {}}]}},\n              { name: 'B', accounts: {joint: [], individual: [{id: 0, data: {}}, {id: 1, data: {}}]}},\n              { name: 'C', accounts: {joint: [{id: 2, data: {}}, {id: 2, data: {}}, {id: 2, data: {}}], individual: []}},\n];\n</code></pre>\n\n<p>which means, putting the same accounts id in an joint and non repeated id object in an individual.</p>\n\n<p>This is how I tried :</p>\n\n<pre><code>              for (let i = 0; i &lt; arr.length - 1; i++) {\n                const compareValue = test[standard].id;\n                if (compareValue === test[i].id) {\n                   joint.push(test[i]);\n                }\n                standard++;\n            }\n            if (joint.length &gt; 0) {\n                if (joint.filter(account =&gt; account.id === test[standard].id).length &gt; 0) {\n                    joint.push(test[standard]);\n                } else {\n                    individual.push(test[standard]);\n                }\n            }\n            if (joint.length === 1) {\n                const item = joint[0];\n                individual.push(item);\n                joint.pop();\n            }\n        } else {\n            individual.push(test[0]);\n        }\n</code></pre>\n\n<p>Could you help me to figure out what i have missed?\nThanks.</p>\n"}, {"tags": ["javascript", "arrays", "typescript", "ecmascript-6"], "answers": [{"tags": [], "owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": true, "score": 2, "last_activity_date": 1564614147, "creation_date": 1564614147, "answer_id": 57299840, "question_id": 57299813, "link": "https://stackoverflow.com/questions/57299813/filtering-the-data-in-an-array-and-return-the-adjusted-array/57299840#57299840", "title": "Filtering the data in an array and return the adjusted array", "body": "<p>You're unconditionally reassigning a <code>name</code>'s accumulator property on every iteration.</p>\n\n<p>To fix that, and to avoid mutating the input, create a new array for the name if it doesn't exist yet, and then push to it. Then transform it back into an array of objects by mapping its <code>Object.entries</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const arr = [\r\n  { name: 'A', accounts: ['a', 'b']},\r\n  { name: 'B', accounts: ['c', 'd']},\r\n  { name: 'C', accounts: ['e', 'f']},\r\n  { name: 'A', accounts: ['g', 'h']},\r\n  { name: 'B', accounts: ['i', 'j']}\r\n];\r\n\r\nconst groupedObj = arr.reduce((a, { name, accounts }) =&gt; {\r\n  if (!a[name]) {\r\n    a[name] = [];\r\n  }\r\n  a[name].push(...accounts);\r\n  return a;\r\n}, {});\r\nconst grouped = Object.entries(groupedObj)\r\n  .map(([name, accounts]) =&gt; ({ name, accounts }));\r\n\r\nconsole.log(grouped);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 4173, "user_id": 7428434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1348497625208827/picture?type=large", "display_name": "Shanon Jackson", "link": "https://stackoverflow.com/users/7428434/shanon-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1564623074, "last_edit_date": 1564623074, "creation_date": 1564615407, "answer_id": 57299994, "question_id": 57299813, "link": "https://stackoverflow.com/questions/57299813/filtering-the-data-in-an-array-and-return-the-adjusted-array/57299994#57299994", "title": "Filtering the data in an array and return the adjusted array", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    const data = [\r\n                  { name: 'A', accounts: [\"a\", \"b\"]},\r\n                  { name: 'B', accounts: [\"c\", \"d\"]},\r\n                  { name: 'C', accounts: [\"e\", \"f\"]},\r\n                  { name: 'A', accounts: [\"g\", \"h\"]},\r\n                  { name: 'B', accounts: [\"i\", \"j\"]}\r\n    ];\r\n    \r\n    \r\n    const newData = data.reduce((accum, curr, i) =&gt; {\r\n        const atIndex = accum.findIndex((entry) =&gt; entry.name === curr.name);\r\n        if(i !== atIndex &amp;&amp; atIndex !== -1) {\r\n            const mergedAccounts = accum[atIndex].accounts.concat(curr.accounts);\r\n            return Object.assign([], accum, {[atIndex]: {...accum[atIndex], accounts: mergedAccounts}})\r\n        }\r\n        return accum.concat(curr);\r\n    }, []);\r\n    \r\n    console.log(newData);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>It's really just a Merge/De-Dupe in 1 loop</p>\n"}], "owner": {"reputation": 1173, "user_id": 7881234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cb0dea4bda1e3667ef29d6e878d273?s=128&d=identicon&r=PG&f=1", "display_name": "doobean", "link": "https://stackoverflow.com/users/7881234/doobean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 57299840, "answer_count": 2, "score": 0, "last_activity_date": 1564623074, "creation_date": 1564613884, "question_id": 57299813, "link": "https://stackoverflow.com/questions/57299813/filtering-the-data-in-an-array-and-return-the-adjusted-array", "title": "Filtering the data in an array and return the adjusted array", "body": "<p>I have an array like this :</p>\n\n<pre><code>const arr = [\n              { name: 'A', accounts: [a, b]},\n              { name: 'B', accounts: [c, d]},\n              { name: 'C', accounts: [e, f]},\n              { name: 'A', accounts: [g, h]},\n              { name: 'B', accounts: [i, j]}\n];\n\n</code></pre>\n\n<p>and I would like to modify this array like this :</p>\n\n<pre><code>const arr = [\n              { name: 'A', accounts: [a, b, g, h]},\n              { name: 'B', accounts: [c, d, i, j]},\n              { name: 'C', accounts: [e, f]}\n]\n</code></pre>\n\n<p>which means combining the account items with the object has same name.</p>\n\n<p>This is how I tried :</p>\n\n<pre><code>returnGroupedArr = (arr) =&gt; {\n              const result = arr.reduce((f, s) =&gt; {\n                           f[s.name] = s[f.name];\n                           f[s.name].push(s);\n                           return f;\n              }\n}\n</code></pre>\n\n<p>Could you help me to figure out what i have missed?\nThanks.</p>\n"}, {"tags": ["angular", "typescript", "angular7"], "answers": [{"tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 0, "last_activity_date": 1564642110, "creation_date": 1564642110, "answer_id": 57303231, "question_id": 57299728, "link": "https://stackoverflow.com/questions/57299728/use-path-relative-to-src-in-angular/57303231#57303231", "title": "Use path relative to @src in Angular", "body": "<p>In your tsconfig.json add</p>\n\n<pre><code>  \"baseUrl\": \"./\",\n</code></pre>\n\n<p>Then remove baseUrl in your tsconfig.app.json</p>\n\n<p>Then make sure restart angular cli then run again</p>\n"}], "owner": {"reputation": 27795, "user_id": 577805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dbbe0a475e6a151f0595b83e55475f34?s=128&d=identicon&r=PG", "display_name": "Miguel Moura", "link": "https://stackoverflow.com/users/577805/miguel-moura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564642110, "creation_date": 1564613097, "question_id": 57299728, "link": "https://stackoverflow.com/questions/57299728/use-path-relative-to-src-in-angular", "title": "Use path relative to @src in Angular", "body": "<p>On an Angular 7 application I have the following:</p>\n\n<p><strong>tsconfig.json</strong></p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"outDir\": \"./dist/out-tsc\",\n    \"sourceMap\": true,\n    \"declaration\": false,\n    \"module\": \"es2015\",\n    \"moduleResolution\": \"node\",\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"target\": \"es5\",\n    \"lib\": [\n      \"es2018\",\n      \"dom\"\n    ],\n    \"typeRoots\": [\n      \"node_modules/@types\"\n    ],\n    \"paths\": {\n      \"core-js/es7/reflect\": [\"../../node_modules/core-js/proposals/reflect-metadata\"],\n      \"core-js/es6/*\": [\"../../node_modules/core-js/es/*\"],\n      \"@src/*\": [\"src/*\"]\n    }\n  }\n}\n</code></pre>\n\n<p><strong>tsconfig.app.json</strong></p>\n\n<pre><code>{\n  \"extends\": \"../tsconfig.json\",\n  \"compilerOptions\": {\n    \"baseUrl\": \"./app\",\n    \"outDir\": \"../out-tsc/app\"\n  },\n  \"exclude\": [\n    \"test.ts\",\n    \"**/*.spec.ts\"\n  ]\n}\n</code></pre>\n\n<p>On a component I have the following:</p>\n\n<pre><code>import { environment } from '@src/environments/environment';\n</code></pre>\n\n<p>But when I build the application I get the error:</p>\n\n<pre><code>Cannot find module '@src/environments/environment'.\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["typescript", "aws-api-gateway", "amazon-cloudfront", "aws-cdk"], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 728602, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20aaecb668d651a4c167ebc12325afd2?s=128&d=identicon&r=PG", "display_name": "Cadell Christo", "link": "https://stackoverflow.com/users/728602/cadell-christo"}, "edited": false, "score": 0, "creation_date": 1597324783, "post_id": 57467656, "comment_id": 112100298, "body": "That path pattern also needs to match the API Gateway: <a href=\"https://stackoverflow.com/a/53804396/728602\">stackoverflow.com/a/53804396/728602</a>"}], "tags": [], "owner": {"reputation": 91, "user_id": 2057438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6cf300b0a0a4c7058d4a081375af72?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/2057438/gary"}, "is_accepted": false, "score": 9, "last_activity_date": 1565640526, "creation_date": 1565640526, "answer_id": 57467656, "question_id": 57299700, "link": "https://stackoverflow.com/questions/57299700/how-to-setup-cloudfront-with-apigateway-and-s3-using-aws-cdk/57467656#57467656", "title": "How to setup CloudFront with ApiGateway and S3 using AWS CDK?", "body": "<p>I am working on the same architecture. The api.url is tokenized so url parsing will not work.</p>\n\n<p>You need to build the domain name from several other properties. Also set the originPath and allowedMethods.</p>\n\n<p>This originConfig worked for me:</p>\n\n<pre><code>{\n  customOriginSource: {\n    domainName: `${api.restApiId}.execute-api.${this.region}.${this.urlSuffix}`\n  },\n  originPath: `/${api.deploymentStage.stageName}`,\n  behaviors: [{\n    pathPattern: '/api/*',\n    allowedMethods: cloudfront.CloudFrontAllowedMethods.ALL\n  }]\n}\n\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11865932, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-56fPdNnHGQU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc50kh01juCP93YPSf4zbE231m5ug/photo.jpg?sz=128", "display_name": "Marko Pavlovi\u0107", "link": "https://stackoverflow.com/users/11865932/marko-pavlovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1565640526, "creation_date": 1564612936, "question_id": 57299700, "link": "https://stackoverflow.com/questions/57299700/how-to-setup-cloudfront-with-apigateway-and-s3-using-aws-cdk", "title": "How to setup CloudFront with ApiGateway and S3 using AWS CDK?", "body": "<p>I'm trying to use the AWS CDK to setup a CloudFront distribution with 2 different origins:</p>\n\n<ul>\n<li>S3</li>\n<li>ApiGateway</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/tQyGY.jpg\" rel=\"nofollow noreferrer\">Here's a diagram of the stack.</a></p>\n\n<p>The problem I am having is that I can't pass the domain of the API Gateway to the CloudFront distribution properly. Here's my attempt:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const api = new ag.RestApi(this, \"RestApi\", {\n    deploy: true\n});\n\napi.root\n    .addResource(\"api\")\n    .addResource(\"photo\")\n    .addResource(\"{id}\")\n    .addMethod(\"GET\", new ag.LambdaIntegration(lambdaFunction));\n\nconst url = URL.parse(api.url);\nconst domainName = url.hostname as string;\n\nconst dist = new cf.CloudFrontWebDistribution(this, \"Distribution\", {\n    originConfigs: [\n        {\n            s3OriginSource: { s3BucketSource: bucket },\n            behaviors: [{ isDefaultBehavior: true }]\n        },\n        {\n            customOriginSource: { domainName },\n            behaviors: [\n                {\n                    pathPattern: \"/api/*\"\n                }\n            ]\n        }\n    ]\n});\n\nnew cdk.CfnOutput(this, \"ApiUrl\", { value: api.url });\n</code></pre>\n\n<p>If I comment out the second object in the <code>originConfigs</code> array, everything goes through, and the <code>ApiUrl</code> output prints the correct value. However, if I leave the code as in the above example, I get the following error:</p>\n\n<pre><code>1/2 | 12:18:13 AM | UPDATE_FAILED | AWS::CloudFront::Distribution | Distribution/CFDistribution (DistributionCFDistribution882A7313) The parameter origin name cannot be null or empty. (Service: AmazonCloudFront; Status Code: 400; Error Code: InvalidArgument; Request ID: 1606f9b3-b3e1-11e9-81fd-bb6eb7bd9c83)\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1304, "user_id": 3853300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640302f2d86df84fdf1b4916718b96e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheki", "link": "https://stackoverflow.com/users/3853300/sheki"}, "edited": false, "score": 0, "creation_date": 1564614110, "post_id": 57299610, "comment_id": 101093384, "body": "You may have a problem with that approach. So far I know you can not call <code>someInjectedDBService</code> if it&#39;s not declared <code>static</code> also.  But you have to try to use that approach in a real example, and see if you can declare <code>getThings</code> in <code>SomeService</code> as <code>static</code> without getting an error."}, {"owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "reply_to_user": {"reputation": 1304, "user_id": 3853300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640302f2d86df84fdf1b4916718b96e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheki", "link": "https://stackoverflow.com/users/3853300/sheki"}, "edited": false, "score": 0, "creation_date": 1564629205, "post_id": 57299610, "comment_id": 101096032, "body": "Apart from what @Sheki mentioned, If you intend to unit test your code, then it will not be easy to mock."}], "owner": {"reputation": 566, "user_id": 1959789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adcd1b0539493f93088aee3cec187f70?s=128&d=identicon&r=PG", "display_name": "stevecowling", "link": "https://stackoverflow.com/users/1959789/stevecowling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564612208, "creation_date": 1564612208, "question_id": 57299610, "link": "https://stackoverflow.com/questions/57299610/implications-of-calling-static-angular-service-methods-from-class-getter", "title": "Implications of Calling static Angular service methods from class getter", "body": "<p>I guess I'm asking if I'm making my classes <strong>too smart</strong>.</p>\n\n<p>SomeService</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>public static getThings(owner:Owner):Thing[]{\n    return someInjectedDBService.getThingsForOwner(owner);\n}\n</code></pre>\n\n<p>OwnerClass</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { SomeService } from './services/some.service';\nexport class Owner {\n    getThings():Thing[]{\n        return SomeService.getThings(this);\n    }\n}\n</code></pre>\n"}, {"tags": ["typescript", "types"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1564692505, "last_edit_date": 1564692505, "creation_date": 1564691865, "answer_id": 57316661, "question_id": 57299572, "link": "https://stackoverflow.com/questions/57299572/how-to-implement-a-generic-first-case-switch-type/57316661#57316661", "title": "How to implement a generic First &quot;case/switch&quot; type", "body": "<p>This is a typescript bug. </p>\n\n<p>First the workaround, if we take <code>void</code> out of the conditional types and put it into the type parameters to the type alias:</p>\n\n<pre><code>type FallbackIfNotVoid&lt;Default, Type, False&gt; = [Type] extends [Default] ? False : Type;\n\ntype First&lt;\n  Default = void,\n  A = void,\n  B = void,\n  C = void,\n  D = void&gt; =\n  FallbackIfNotVoid&lt;Default, A,\n  FallbackIfNotVoid&lt;Default, B,\n  FallbackIfNotVoid&lt;Default, C,\n  FallbackIfNotVoid&lt;Default, D, Default&gt;&gt;&gt;&gt;;\n\n\ntype IfVoid&lt;P, True, False = void&gt; = [void] extends [P] ? True : False;\n\ntype Experiment&lt;T, Default = void&gt; = First&lt;Default,\n  IfVoid&lt;T, \"voidCase\"&gt;,\n  T\n&gt;;\n\ntype VoidType = Experiment&lt;void&gt;; // \"voidCase\", as expected\ntype OtherType = Experiment&lt;\"test\"&gt; // \"test\" now\n</code></pre>\n\n<p>Now for the bug, this is a minimal reproduction: </p>\n\n<pre><code>type Default = { x: string }\n\ntype M&lt;A&gt; = [A extends \"A\" ? A : Default] extends [Default] ? \"Y\" : \"N\" // Simplified to \"Y\" regardless of A\n</code></pre>\n\n<p><code>M</code> is simplified to <code>\"Y\"</code>. This happens if the tested type (<code>[A extends \"A\" ? A : Default]</code>) is also a conditional type and if that conditional type contains in the false branch the type that is tested for in the outer conditional type. This only happens for the false branch. For example the type below does not get similarly simplified:</p>\n\n<pre><code>type Default = { x: string }\n\ntype M&lt;A&gt; = [A extends \"A\" ? Default: A] extends [Default] ? \"Y\" : \"N\" // no simplification\n</code></pre>\n\n<p>Putting the <code>Default</code> in a type parameter works around this because it prevents this eager optimization. </p>\n\n<p>I will search for an existing issue and post it if I find it. I am 100% sure I have seen similar issues relating to conditional type simplification, just not sure if they were this exact one. </p>\n\n<p><strong>Edit</strong>: Yup I was right, I did see something similar before, was even involved in the conversation about it (getting forgetful in my old age \ud83d\ude43) <a href=\"https://github.com/microsoft/TypeScript/issues/30708\" rel=\"nofollow noreferrer\">Here</a> is the issue, jack-williams has a similar repro there as well: </p>\n\n<pre><code>type Inner&lt;T&gt; = [T] extends [true] ? false : true;\ntype Outer&lt;T&gt; = [Inner&lt;T&gt;] extends [true] ? 1 : 2; // Already resolved to 2.\n</code></pre>\n"}], "owner": {"reputation": 4030, "user_id": 2075944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CGDE9.png?s=128&g=1", "display_name": "phry", "link": "https://stackoverflow.com/users/2075944/phry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 57316661, "answer_count": 1, "score": 2, "last_activity_date": 1564692505, "creation_date": 1564611881, "last_edit_date": 1564680847, "question_id": 57299572, "link": "https://stackoverflow.com/questions/57299572/how-to-implement-a-generic-first-case-switch-type", "title": "How to implement a generic First &quot;case/switch&quot; type", "body": "<p>I am currently in the process of refactoring the typings of redux-starter-kit to be more readable for non-typescript-powerusers.</p>\n\n<p>Right now, it looks like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code> type PayloadActionCreator&lt;\n  P = any,\n  T extends string = string,\n  PA extends PrepareAction&lt;P&gt; | void = void\n  &gt; =\n  IfPrepareActionMethodProvided&lt;PA,\n    ActionCreatorWithPreparedPayload&lt;PA, T&gt;,\n    IfMaybeUndefined&lt;P,\n      ActionCreatorWithOptionalPayload&lt;P, T&gt;,\n      IfVoid&lt;P,\n        ActionCreatorWithoutPayload&lt;T&gt;,\n        ActionCreatorWithPayload&lt;P, T&gt;\n      &gt;\n    &gt;\n  &gt;\n</code></pre>\n\n<p>but I want to do away with the nesting and hope to achieve something like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type PayloadActionCreator&lt;\n  P = any,\n  T extends string = string,\n  PA extends PrepareAction&lt;P&gt; | void = void\n  &gt; =\n  First&lt;\n    IfPrepareActionMethodProvided&lt;PA, ActionCreatorWithPreparedPayload&lt;PA, T&gt;, void&gt;,\n    IfMaybeUndefined&lt;P, ActionCreatorWithOptionalPayload&lt;P, T&gt;, void&gt;,\n    IfVoid&lt;P, ActionCreatorWithoutPayload&lt;T&gt;, void&gt;,\n    ActionCreatorWithPayload&lt;P, T&gt;\n  &gt;;\n</code></pre>\n\n<p>So, <code>First</code> should be a type that takes a number of types and returns the fist of them that is not <code>void</code></p>\n\n<p>I've implemented a naive version of <code>First</code> that works quite well, until a type with a generic like <code>IfVoid</code> is passed into it. Then I get to the case, where I get <code>void</code> returned, even if there would be later options given that are not <code>void</code> - see this code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type FallbackIfNotVoid&lt;Type,  False&gt; = [Type] extends [void] ? False : Type;\n\ntype First&lt;\n  A = void,\n  B = void,\n  C = void,\n  D = void\n  &gt; = \n  FallbackIfNotVoid&lt;A, \n  FallbackIfNotVoid&lt;B, \n  FallbackIfNotVoid&lt;C, \n  FallbackIfNotVoid&lt;D, void&gt;\n  &gt;&gt;&gt;;\n\n\n  type IfVoid&lt;P, True, False = void&gt; = [void] extends [P] ? True : False;\n\n  type Experiment&lt;T&gt; = First&lt;\n    IfVoid&lt;T, \"voidCase\"&gt;,\n    T\n  &gt;;\n\n  type VoidType = Experiment&lt;void&gt;; // \"voidCase\", as expected\n  type OtherType = Experiment&lt;\"test\"&gt; // this should be \"test\", but is void\n</code></pre>\n\n<p>I'm guessing this is something with TS doing some pre-optimization that backfires later. \nHovering the type indicates that my type definition is optimized to <code>[void] extends [T] ? \"voidCase\" : void</code></p>\n\n<p>Does someone have an idea on how to implement such a <code>First</code> type alternatively?</p>\n"}, {"tags": ["javascript", "typescript", "jestjs"], "comments": [{"owner": {"reputation": 32248, "user_id": 1558171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XPmqF.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/1558171/dom"}, "edited": false, "score": 1, "creation_date": 1564612516, "post_id": 57299503, "comment_id": 101093086, "body": "How exactly are you planning on using this? You could store it in a closure variable, but not sure if that&#39;ll meet your needs? However, in terms of the describe block, use an actual <code>function () {}</code> instead of an arrow function and you can call <code>this.description</code>. For example, <code>describe(&#39;hi&#39;, function () { console.log(this.description); })</code> However this does not work with a <code>test</code>/<code>it</code> block."}, {"owner": {"reputation": 12228, "user_id": 271106, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RN48w.jpg?s=128&g=1", "display_name": "Michal Ciechan", "link": "https://stackoverflow.com/users/271106/michal-ciechan"}, "reply_to_user": {"reputation": 32248, "user_id": 1558171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XPmqF.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/1558171/dom"}, "edited": false, "score": 0, "creation_date": 1564613315, "post_id": 57299503, "comment_id": 101093250, "body": "I want to create a helper method for snapshot naming based on dynamic data/env variables as well as the Test + Description name"}, {"owner": {"reputation": 12228, "user_id": 271106, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RN48w.jpg?s=128&g=1", "display_name": "Michal Ciechan", "link": "https://stackoverflow.com/users/271106/michal-ciechan"}, "reply_to_user": {"reputation": 32248, "user_id": 1558171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XPmqF.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/1558171/dom"}, "edited": false, "score": 0, "creation_date": 1564614370, "post_id": 57299503, "comment_id": 101093436, "body": "I might be able to use <code>expect.extend()</code> which binds <code>this</code> and has <code>testPath: &quot;&#47;index.test.ts&quot;</code> and <code>currentTestName: &quot;Description Test&quot;</code>"}, {"owner": {"reputation": 108811, "user_id": 1269037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/mMk1e.jpg?s=128&g=1", "display_name": "Dan Dascalescu", "link": "https://stackoverflow.com/users/1269037/dan-dascalescu"}, "edited": false, "score": 1, "creation_date": 1593685820, "post_id": 57299503, "comment_id": 110869528, "body": "Dupe of <a href=\"https://stackoverflow.com/questions/52788380/how-to-get-the-current-spec-name\">How to get the current spec name</a>, and I&#39;ve just posted a new answer over there."}], "answers": [{"comments": [{"owner": {"reputation": 108811, "user_id": 1269037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/mMk1e.jpg?s=128&g=1", "display_name": "Dan Dascalescu", "link": "https://stackoverflow.com/users/1269037/dan-dascalescu"}, "edited": false, "score": 0, "creation_date": 1593685941, "post_id": 57300457, "comment_id": 110869603, "body": "Yeah but you have to define a constant for every test. There&#39;s an <a href=\"https://stackoverflow.com/questions/52788380/get-the-current-test-spec-name-in-jest/62694295#62694295\">easier way</a>."}], "tags": [], "owner": {"reputation": 806, "user_id": 9173317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nhji1.jpg?s=128&g=1", "display_name": "Viacheslav Moskalenko", "link": "https://stackoverflow.com/users/9173317/viacheslav-moskalenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1564621273, "last_edit_date": 1564621273, "creation_date": 1564619894, "answer_id": 57300457, "question_id": 57299503, "link": "https://stackoverflow.com/questions/57299503/jest-get-test-and-description-name/57300457#57300457", "title": "Jest - Get Test and Description Name", "body": "<p>Perhaps, the most obvious solution is what you want. Instead of passing literals to <code>describe</code> and <code>it</code> just store them in a respective constants which could then be easily accessed inside the respective test cases though the outer scope.</p>\n\n<p>These constants could be easily initialized either by values from the environmental variables or by literal defaults.</p>\n\n<pre><code>const suiteA = 'Description';\ndescribe(suiteA, () =&gt; {\n  const testA = 'Test';\n  it(testA, () =&gt; {\n    expect(`${suiteA} - ${testA}`).toBe(\"Description - Test\");\n  });\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 9130688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj5U2.jpg?s=128&g=1", "display_name": "Coding Edgar", "link": "https://stackoverflow.com/users/9130688/coding-edgar"}, "is_accepted": false, "score": 3, "last_activity_date": 1564623884, "creation_date": 1564623884, "answer_id": 57300836, "question_id": 57299503, "link": "https://stackoverflow.com/questions/57299503/jest-get-test-and-description-name/57300836#57300836", "title": "Jest - Get Test and Description Name", "body": "<p>You can achieve this using a custom matcher</p>\n\n<pre><code>expect.extend({\n  testName(exp) {\n      return {\n          pass: this.currentTestName === exp,\n          message: () =&gt; '',\n      };\n  },\n});\n\ndescribe(\"Description\", () =&gt; {\n  it(\"Test\", () =&gt; {\n      expect(`Description Test`).testName();\n  });\n});\n</code></pre>\n"}], "owner": {"reputation": 12228, "user_id": 271106, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RN48w.jpg?s=128&g=1", "display_name": "Michal Ciechan", "link": "https://stackoverflow.com/users/271106/michal-ciechan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1535, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564623884, "creation_date": 1564611335, "last_edit_date": 1564613424, "question_id": 57299503, "link": "https://stackoverflow.com/questions/57299503/jest-get-test-and-description-name", "title": "Jest - Get Test and Description Name", "body": "<p>I am trying to get the name of the test name that was passed into <code>it(name: string)</code> Jest function, as well as the description name that was passed into <code>describe(name: string, ....)</code>.</p>\n\n<p>Is there a way to access this somehow?</p>\n\n<p>E.g.</p>\n\n<pre><code>describe(\"Description\", () =&gt; {\n  it(\"Test\", () =&gt; {\n\n    const description = \"How do I get the description name?\"\n    const test = \"How do I get the test name?\";\n\n    expect(`${description} - ${test}`).toBe(\"Description - Test\");\n  });\n})\n</code></pre>\n\n<p><a href=\"https://codesandbox.io/s/keen-moser-hjjke?fontsize=14&amp;module=%2Findex.test.ts&amp;previewwindow=tests&amp;view=editor\" rel=\"nofollow noreferrer\">CodeSandbox Link</a></p>\n\n<p><strong>Update 1</strong></p>\n\n<p>Underlying reason why I want this is because I want to do some custom snapshot naming conventions based on describe, test, and some environment variables (e.g. viewport sizes + mock/real data).</p>\n"}, {"tags": ["arrays", "typescript", "reduce"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1564611289, "creation_date": 1564611289, "answer_id": 57299496, "question_id": 57299348, "link": "https://stackoverflow.com/questions/57299348/typescript-how-to-properly-type-omitprops-helper-via-generics/57299496#57299496", "title": "Typescript: how to properly type omitProps helper via generics", "body": "<p>Generally when dealing with generics you will end up with some type assertions here and there in the implementation. I think when writing generic functions the focus should generally be on call site type safety, while trying to minimize type assertions in the implementation.</p>\n\n<p>The version I have would remove the <code>R</code> parameter as that should always be <code>Omit&lt;O, K&gt;</code> and the extra type parameter will prevent assignment of <code>O</code> to the result (Since <code>R</code> could theoretically have extra props).  </p>\n\n<p>Second, the assignment <code>acc[keyName] = obj[keyName]</code>  will only succeed if both sides of the assignment would be <code>O[keyof O]</code> (or at least the same exact type, since we are dealing with generics). The simplest way to do that would be to  start from <code>{} as O</code> in reduce.</p>\n\n<p>Fortunately ts will figure out that <code>O</code> is assignable to <code>Omit&lt;O, K&gt;</code> so no more type assertions there. </p>\n\n<p>Opinions may vary as to where you do the asserting, but that is the least amount of assertions I can come up with. Hope this helps, good luck with it \ud83d\ude09</p>\n\n<pre><code>export const omitProps = &lt;\n  O extends Record&lt;string,any&gt;, \n  K extends keyof O\n&gt;(\n  obj: O,\n  keys: Array&lt;K&gt; | Set&lt;K&gt;,\n): Omit&lt;O, K&gt; =&gt; {\n  const keysSet: Set&lt;K | keyof O&gt; = keys instanceof Array ? new Set(keys) : keys;\n  const originalKeys = Object.keys(obj) as Array&lt;keyof O&gt;;\n\n  return originalKeys.reduce(\n    (acc, keyName) =&gt; {      \n      if(!keysSet.has(keyName)){\n        acc[keyName] = obj[keyName]\n      }\n\n      return acc\n    },\n    {} as O,\n  );\n};\n\n</code></pre>\n"}], "owner": {"reputation": 288, "user_id": 3819491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3d5ccc782ff1ecc42eeeb4d8b8ec02?s=128&d=identicon&r=PG", "display_name": "hotell", "link": "https://stackoverflow.com/users/3819491/hotell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57299496, "answer_count": 1, "score": 1, "last_activity_date": 1564611289, "creation_date": 1564610224, "last_edit_date": 1564610974, "question_id": 57299348, "link": "https://stackoverflow.com/questions/57299348/typescript-how-to-properly-type-omitprops-helper-via-generics", "title": "Typescript: how to properly type omitProps helper via generics", "body": "<p>When implementing <code>omitProps</code> which should omit provided props from object and return new one, there are errors when resolving types within reduce.</p>\n\n<p>Following works ( immutable approach )</p>\n\n<pre><code>export const omitProps = &lt;\n  O extends Record&lt;string,any&gt;, \n  K extends keyof O, \n  R extends Omit&lt;O, K&gt; = Omit&lt;O, K&gt;\n&gt;(\n  obj: O,\n  keys: Array&lt;K&gt; | Set&lt;K&gt;,\n): R =&gt; {\n  const keysSet = keys instanceof Array ? new Set(keys) : keys;\n  const originalKeys = Object.keys(obj) as Array&lt;keyof O&gt;;\n\n  return originalKeys.reduce(\n    (acc, keyName) =&gt; {      \n      return keysSet.has(keyName as K)\n         ? acc\n         : {\n             ...acc,\n             [keyName]: obj[keyName],\n           };\n    {} as R,\n\n  );\n};\n</code></pre>\n\n<p>While that works, using spread when creating new object within reduce is very slow operation.</p>\n\n<p>If we wanna implement much faster solution via reference assignemnt TS will complain:</p>\n\n<pre><code>export const omitProps = &lt;\n  O extends Record&lt;string,any&gt;, \n  K extends keyof O, \n  R extends Omit&lt;O, K&gt; = Omit&lt;O, K&gt;\n&gt;(\n  obj: O,\n  keys: Array&lt;K&gt; | Set&lt;K&gt;,\n): R =&gt; {\n  const keysSet = keys instanceof Array ? new Set(keys) : keys;\n  const originalKeys = Object.keys(obj) as Array&lt;keyof O&gt;;\n\n  return originalKeys.reduce(\n    (acc, keyName) =&gt; {      \n      if(!keysSet.has(keyName as K)){\n        // \ud83d\udea8 ERROR -&gt; Type 'keyof O' cannot be used to index type 'R'.ts(2536)\n        acc[keyName] = obj[keyName]\n      }\n\n      return acc\n    },\n    {} as R,\n  );\n};\n</code></pre>\n\n<p>Only way how to make TS happy is following casting ( basically we're lying to the compiler )</p>\n\n<pre><code>export const omitProps = &lt;\n  O extends Record&lt;string,any&gt;, \n  K extends keyof O, \n  R extends Omit&lt;O, K&gt; = Omit&lt;O, K&gt;\n&gt;(\n  obj: O,\n  keys: Array&lt;K&gt; | Set&lt;K&gt;,\n): R =&gt; {\n  const keysSet = keys instanceof Array ? new Set(keys) : keys;\n  // \u2705 kinda LIE by casting to string keys union\n  const originalKeys = Object.keys(obj) as Array&lt;keyof O&gt;;\n\n  return originalKeys.reduce(\n    (acc, keyName) =&gt; {      \n      if(!keysSet.has(keyName as K)){\n        // \u2705 NO ERROR\n        acc[keyName] = obj[keyName]\n      }\n\n      return acc\n    },\n    // \u2705 LIE TO ACCUMULATOR! OUCH!\n    {} as O,\n  // \u2705 CAST WHOLE REDUCE result to demanded outcome\n  ) as R;\n};\n</code></pre>\n\n<p>So question is if there is some better solution as this one feels quite hacky/verbose</p>\n"}, {"tags": ["typescript", "angular8", "google-api-js-client"], "comments": [{"owner": {"reputation": 566, "user_id": 8471295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a9c32d1eeaf2f1fcd68912605e793d?s=128&d=identicon&r=PG&f=1", "display_name": "Severin Jaeschke", "link": "https://stackoverflow.com/users/8471295/severin-jaeschke"}, "edited": false, "score": 0, "creation_date": 1567611626, "post_id": 57299340, "comment_id": 102016736, "body": "Have a look at this <a href=\"https://stackoverflow.com/a/42782430/8471295\">answer</a> from Jack. In his answer Jack explains in-depth how type lookup works and how you make the gapi type reference behave nicely within angular."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 11361291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3b14ff83d501677de44eb1db3b954c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Ho", "link": "https://stackoverflow.com/users/11361291/jonathan-ho"}, "is_accepted": true, "score": 0, "last_activity_date": 1564612120, "creation_date": 1564612120, "answer_id": 57299599, "question_id": 57299340, "link": "https://stackoverflow.com/questions/57299340/angular-8-compiler-cannot-find-name-gapi/57299599#57299599", "title": "Angular 8: Compiler &quot;cannot find name &#39;gapi&#39;&quot;", "body": "<p>Turns out I was implementing the first link incorrectly. The answer was to declare the variable <code>gapi: any</code> outside of the service.</p>\n\n<pre><code>declare var gapi: any; //this is the key\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(private router: Router) { }\n  ... \n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11361291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3b14ff83d501677de44eb1db3b954c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Ho", "link": "https://stackoverflow.com/users/11361291/jonathan-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 57299599, "answer_count": 1, "score": 0, "last_activity_date": 1564612120, "creation_date": 1564610189, "question_id": 57299340, "link": "https://stackoverflow.com/questions/57299340/angular-8-compiler-cannot-find-name-gapi", "title": "Angular 8: Compiler &quot;cannot find name &#39;gapi&#39;&quot;", "body": "<p>Before I get marked for duplicate, I have already tried the solution to a very similar problem <a href=\"https://stackoverflow.com/questions/48891097/angular-2-error-cannot-find-name-gapi\">here</a> and updated the typings in my comiplerOptions in tsconfig.json as <a href=\"https://stackoverflow.com/questions/41416539/typescript-error-cannot-find-name-gapi-transpile-failed\">this solution</a>. </p>\n\n<p>Basically I have created an Angular Service (Angular 8, which is why the previous solutions might not have worked) that calls the Google Api (gapi) for Google SignIn. </p>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(private router: Router) { }\n\n  gapi: any; //solution from link one which allows me to run it locally\n\n  googleInit() {\n    gapi.load('auth2', () =&gt; {\n      gapi.auth2.init({\n        ...\n      })\n    });\n  }\n  ... (other gapi calls)\n\n}\n</code></pre>\n\n<p>This service works completely fine on my local server (localhost:4200) even though there is an error message from the compiler.</p>\n\n<pre><code> ERROR in src/app/shared/services/user/user.service.ts(25,12): error TS2663: Cannot find name 'gapi'. Did you mean the instance member 'this.gapi'?\n</code></pre>\n\n<p>However, when I try to run <code>npm run build</code> to deploy it on a server, the compiler crashes and displays \"<code>This is probably not a problem with npm. There is likely additional logging output above.</code>\"</p>\n\n<p>The log is displayed as </p>\n\n<pre><code>0 info it worked if it ends with ok\n1 verbose cli [\n1 verbose cli   '/usr/local/Cellar/node/12.4.0/bin/node',\n1 verbose cli   '/usr/local/bin/npm',\n1 verbose cli   'run',\n1 verbose cli   'build'\n1 verbose cli ]\n2 info using npm@6.10.2\n3 info using node@v12.4.0\n4 verbose run-script [ 'prebuild', 'build', 'postbuild' ]\n5 info lifecycle pos@0.0.0~prebuild: pos@0.0.0\n6 info lifecycle pos@0.0.0~build: pos@0.0.0\n7 verbose lifecycle pos@0.0.0~build: unsafe-perm in lifecycle true\n8 verbose lifecycle pos@0.0.0~build: PATH: /usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/jho/TzuChi/taurus/flaskr/static/pos/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Frameworks/Mono.framework/Versions/Current/Commands\n9 verbose lifecycle pos@0.0.0~build: CWD: /Users/jho/TzuChi/taurus/flaskr/static/pos\n10 silly lifecycle pos@0.0.0~build: Args: [ '-c', 'ng build' ]\n11 silly lifecycle pos@0.0.0~build: Returned: code: 1  signal: null\n12 info lifecycle pos@0.0.0~build: Failed to exec build script\n13 verbose stack Error: pos@0.0.0 build: `ng build`\n13 verbose stack Exit status 1\n13 verbose stack     at EventEmitter.&lt;anonymous&gt; (/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/index.js:326:16)\n13 verbose stack     at EventEmitter.emit (events.js:200:13)\n13 verbose stack     at ChildProcess.&lt;anonymous&gt; (/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/lib/spawn.js:55:14)\n13 verbose stack     at ChildProcess.emit (events.js:200:13)\n13 verbose stack     at maybeClose (internal/child_process.js:1021:16)\n13 verbose stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:283:5)\n14 verbose pkgid pos@0.0.0\n15 verbose cwd /Users/jho/TzuChi/taurus/flaskr/static/pos\n16 verbose Darwin 18.7.0\n17 verbose argv \"/usr/local/Cellar/node/12.4.0/bin/node\"    \"/usr/local/bin/npm\" \"run\" \"build\"\n18 verbose node v12.4.0\n19 verbose npm  v6.10.2\n20 error code ELIFECYCLE\n21 error errno 1\n22 error pos@0.0.0 build: `ng build`\n22 error Exit status 1\n23 error Failed at the pos@0.0.0 build script.\n23 error This is probably not a problem with npm. There is likely additional logging output above.\n24 verbose exit [ 1, true ]\n</code></pre>\n\n<p>Thank you so much for any feedback.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 107, "user_id": 11170231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b703aeb2e2ff7f50da6c021a7b86e8?s=128&d=identicon&r=PG&f=1", "display_name": "Script0r", "link": "https://stackoverflow.com/users/11170231/script0r"}, "reply_to_user": {"reputation": 1304, "user_id": 3853300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640302f2d86df84fdf1b4916718b96e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheki", "link": "https://stackoverflow.com/users/3853300/sheki"}, "edited": false, "score": 0, "creation_date": 1564610793, "post_id": 57299330, "comment_id": 101092685, "body": "Thats it @Sheki, works like a charm! Thanks! Add it as answer and ill accept it :D"}, {"owner": {"reputation": 1304, "user_id": 3853300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640302f2d86df84fdf1b4916718b96e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheki", "link": "https://stackoverflow.com/users/3853300/sheki"}, "edited": false, "score": 0, "creation_date": 1564611008, "post_id": 57299330, "comment_id": 101092749, "body": "I&#39;m glad I could help! (by the way, the problem has nothing to do with async or sync it has to do with the context of <code>this</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 3853300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640302f2d86df84fdf1b4916718b96e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheki", "link": "https://stackoverflow.com/users/3853300/sheki"}, "is_accepted": true, "score": 2, "last_activity_date": 1564611504, "creation_date": 1564611504, "answer_id": 57299523, "question_id": 57299330, "link": "https://stackoverflow.com/questions/57299330/how-can-i-call-component-method-from-async-function/57299523#57299523", "title": "How can I call component method from async function?", "body": "<p>Use arrow function instead of the keyword <code>function</code> like </p>\n\n<pre><code>FB.getLoginStatus((response)=&gt;{ \n</code></pre>\n\n<p>or save <code>this</code> in a variable and use that instead of <code>this</code> before calling <code>FB.getLoginStatus</code> like:</p>\n\n<pre><code>ngOnInit() {\n  let $this = this;\n  FB.getLoginStatus(function (response) {\n    $this.ParseFacebookLoginStatus(response);\n  });\n}\n</code></pre>\n\n<p>otherwise the keyword <code>this</code> is not referring to the component but to the new function.</p>\n\n<p>So the problem has nothing to do with <code>async</code> or <code>sync</code> it has to do with the context of <code>this</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 11170231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b703aeb2e2ff7f50da6c021a7b86e8?s=128&d=identicon&r=PG&f=1", "display_name": "Script0r", "link": "https://stackoverflow.com/users/11170231/script0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "closed_date": 1564733489, "accepted_answer_id": 57299523, "answer_count": 1, "score": 1, "last_activity_date": 1564611504, "creation_date": 1564610129, "question_id": 57299330, "link": "https://stackoverflow.com/questions/57299330/how-can-i-call-component-method-from-async-function", "closed_reason": "Duplicate", "title": "How can I call component method from async function?", "body": "<p>My code:</p>\n\n<pre><code>export class TestComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n    FB.getLoginStatus(function (response) {\n      this.ParseFacebookLoginStatus(response);\n    });\n  }\n\n  ParseFacebookLoginStatus(response) {\n    console.log(response.status);\n  }\n</code></pre>\n\n<p>My console is outputting <code>ERROR TypeError: this.ParseFacebookLoginStatus is not a function</code>.</p>\n\n<p>I just guessing here that getLoginStatus is async and this in the result context insnt my TestComponent? How can I return to my TestComponent with a proper callback?</p>\n"}, {"tags": ["angular", "typescript", "modal-dialog", "angular7"], "answers": [{"tags": [], "owner": {"reputation": 1024, "user_id": 3021349, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/W6R7t.png?s=128&g=1", "display_name": "ram12393", "link": "https://stackoverflow.com/users/3021349/ram12393"}, "is_accepted": false, "score": 0, "last_activity_date": 1564622381, "creation_date": 1564622381, "answer_id": 57300688, "question_id": 57299293, "link": "https://stackoverflow.com/questions/57299293/how-to-close-modal-after-clicking-on-link-inside-modal-in-angular-7/57300688#57300688", "title": "How to close modal after clicking on link inside modal in angular 7", "body": "<p>let's say in your modal you have a snippet of code as below </p>\n\n<p><strong><code>in component.html</code></strong></p>\n\n<pre><code>&lt;a (click)=\"goToNextPage()\" &gt;click here&lt;/a&gt;\n</code></pre>\n\n<p>and in the <code>component.ts</code>file add the following code</p>\n\n<p>in <strong><code>component.ts</code></strong></p>\n\n<pre><code>constructor(\n    private router:Router,\n    public dialogRef: MatDialogRef&lt;ModalComponent&gt; //replace your modal component here,\n  ) { }\n\ngoToNextPage(){\n    this.dialogRef.close();\n    this.router.navigate(['/nextPageURL']);\n}\n</code></pre>\n\n<p>for better understanding check the <a href=\"https://material.angular.io/components/dialog/overview\" rel=\"nofollow noreferrer\"><strong><code>official doc</code></strong></a></p>\n"}], "owner": {"reputation": 9, "user_id": 8826964, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DwuRojyzECg/AAAAAAAAAAI/AAAAAAAAABg/hganQYUu6BI/photo.jpg?sz=128", "display_name": "Awais Azmat", "link": "https://stackoverflow.com/users/8826964/awais-azmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564622381, "creation_date": 1564609922, "question_id": 57299293, "link": "https://stackoverflow.com/questions/57299293/how-to-close-modal-after-clicking-on-link-inside-modal-in-angular-7", "title": "How to close modal after clicking on link inside modal in angular 7", "body": "<p>i am giving link inside modal which will go on another page on clicking. when link opens another page the modal doesnot get close so i need help in closing modal.</p>\n\n\n    \n      \n\n          \n\n              &times;\n            \n\n        \n        \n          Important Note\n          <p>We strongly recommend you for Individual reservation.</p> \n          Continue as Couple...\n        \n\n\n\n      \n    \n  \n"}, {"tags": ["javascript", "reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 5261430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba730c920839c918114571f6672e5a5?s=128&d=identicon&r=PG", "display_name": "Devin Metivier", "link": "https://stackoverflow.com/users/5261430/devin-metivier"}, "is_accepted": false, "score": 0, "last_activity_date": 1564680801, "creation_date": 1564680801, "answer_id": 57314244, "question_id": 57299292, "link": "https://stackoverflow.com/questions/57299292/cannot-invoke-an-expression-whose-type-lacks-a-call-signature-type-number-di/57314244#57314244", "title": "Cannot invoke an expression whose type lacks a call signature. Type &#39;number | Dispatch&lt;SetStateAction&lt;number&gt;&gt;&#39; has no compatible call signatures", "body": "<p>Needed explicitly defined type:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type UpdateState = React.Dispatch&lt;React.SetStateAction&lt;number&gt;&gt;;\n\nconst [pats, givePats] = React.useState&lt;number&gt;(0);\nconst value = React.useMemo&lt;[number, UpdateState]&gt;(() =&gt; [pats, givePats], [pats]);\nconst PatsContext = React.createContext(value);\n\nfunction PatsProvider({ children }) {\n  return &lt;PatsContext.Provider value={value}&gt;{children}&lt;/PatsContext.Provider&gt;;\n}\n</code></pre>\n\n<p>Passing <code>children</code> inside of the context provider infers the type <code>any</code> to children - as I think it should be? This solves the second error.</p>\n\n<p>Alternatively I could've passed the <code>initialValue</code> as an object with my <code>state</code> and <code>updater</code>. Type inference would've been more explicitly <code>number</code> for the state and <code>React.Dispatch&lt;React.SetStateAction&lt;number&gt;&gt;</code> for the updater instead of being infered as <code>(number | Dispatch&lt;SetStateAction&lt;number&gt;&gt;)</code>. However, the second error's solution remains the same.</p>\n"}], "owner": {"reputation": 16, "user_id": 5261430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ba730c920839c918114571f6672e5a5?s=128&d=identicon&r=PG", "display_name": "Devin Metivier", "link": "https://stackoverflow.com/users/5261430/devin-metivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564680801, "creation_date": 1564609922, "question_id": 57299292, "link": "https://stackoverflow.com/questions/57299292/cannot-invoke-an-expression-whose-type-lacks-a-call-signature-type-number-di", "title": "Cannot invoke an expression whose type lacks a call signature. Type &#39;number | Dispatch&lt;SetStateAction&lt;number&gt;&gt;&#39; has no compatible call signatures", "body": "<p>I'm setting up state to be passed through context in React (with hooks). When using the dispatched state updater function, I get this error:</p>\n\n<p><code>Cannot invoke an expression whose type lacks a call signature. Type 'number | Dispatch&lt;SetStateAction&lt;number&gt;&gt;' has no compatible call signatures</code></p>\n\n<p>I'm pretty new to TypeScript, and I think that I might be just missing a type somewhere, but I'm stuck \ud83d\ude05</p>\n\n<p>Initially I was trying to pass the <code>defaultValue</code> (which in my case is a <code>number</code>) and then tried passing the state and updater into the Provider's value. BUT... the type is inferred from that context's <code>defaultValue</code> - which is required (for some reason). So that doesn't work...</p>\n\n<p>I'm passing the <code>value</code> to both <code>React.createContext()</code> and <code>PatsContext.Provider</code>. Again, because a defaultValue is required in <code>React.createContext()</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as React from 'react';\n\nconst [pats, givePats] = React.useState(0);\nconst value = React.useMemo(() =&gt; [pats, givePats], [pats]);\nconst PatsContext = React.createContext(value);\n\nfunction PatsProvider() {\n  return &lt;PatsContext.Provider value={value} /&gt;;\n}\n\nfunction GoodBoi() {\n  const [, givePats] = React.useContext(PatsContext);\n\n  return (\n    &lt;button onClick={() =&gt; givePats(prevPats =&gt; prevPats + 1)} type='button'&gt;\n      Good Boi!\n    &lt;/button&gt;\n  );\n}\n\nfunction PatsDisplay() {\n  const [pats] = React.useContext(PatsContext);\n  return &lt;div&gt;The good boi has received {pats} pats.&lt;/div&gt;;\n}\n\nfunction GoodBoiExample() {\n  return (\n    &lt;PatsProvider&gt;\n      &lt;PatsDisplay /&gt;\n      &lt;GoodBoi /&gt;\n    &lt;/PatsProvider&gt;\n  );\n}\n\nexport default GoodBoiExample;\n</code></pre>\n\n<p>Trying to use <code>givePats()</code> yields the TypeScript error as described above.</p>\n\n<p>Also, using <code>&lt;PatsProvider /&gt;</code> in the <code>&lt;GoodBoiExample /&gt;</code> component yields this error as well:</p>\n\n<p><code>Type '{ children: Element[]; }' has no properties in common with type 'IntrinsicAttributes'.</code></p>\n\n<p>Not sure what that means. But I like to think that once I get passed the first error this will fall in line? \u00af_(\u30c4)_/\u00af Thanks!</p>\n"}, {"tags": ["javascript", "typescript", "internationalization"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 6532551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2571fd64dd346bbecdac857c99600c09?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Kunze", "link": "https://stackoverflow.com/users/6532551/timo-kunze"}, "edited": false, "score": 0, "creation_date": 1564609985, "post_id": 57299140, "comment_id": 101092473, "body": "Thanks a lot, works great. I have not been aware of the normalize function."}, {"owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "reply_to_user": {"reputation": 125, "user_id": 6532551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2571fd64dd346bbecdac857c99600c09?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Kunze", "link": "https://stackoverflow.com/users/6532551/timo-kunze"}, "edited": false, "score": 0, "creation_date": 1564610011, "post_id": 57299140, "comment_id": 101092481, "body": "glad I could help !"}], "tags": [], "owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "is_accepted": true, "score": 1, "last_activity_date": 1564608872, "creation_date": 1564608872, "answer_id": 57299140, "question_id": 57299098, "link": "https://stackoverflow.com/questions/57299098/how-to-detect-special-unicode-characters-as-equal-to-their-base-character/57299140#57299140", "title": "How to detect special Unicode characters as equal to their base character?", "body": "<p>You can use this method to sanitize your string:</p>\n\n<pre><code>str = str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\n</code></pre>\n\n<p>The normalize part separate the characters and their accents. Then the replace remove the accents. And finally we transform the string to lowercase characters.</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\" rel=\"nofollow noreferrer\">Normalize</a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace\" rel=\"nofollow noreferrer\">Replace</a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase\" rel=\"nofollow noreferrer\">toLowerCase</a></p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 6532551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2571fd64dd346bbecdac857c99600c09?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Kunze", "link": "https://stackoverflow.com/users/6532551/timo-kunze"}, "edited": false, "score": 0, "creation_date": 1565096700, "post_id": 57363279, "comment_id": 101237867, "body": "I totally agree that your solution should be used if you know the locale. Unfortunately in my case I don&#39;t know the locale and in fact it can be mixed - not within a single string, but within the strings that I want to search. Fortunately the strings are limited to only a few different locales and for these cases the solution of @Morphyish works well enough. I&#39;ll integrate the &#223;/SS case though."}, {"owner": {"reputation": 5148, "user_id": 53276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330bc82a1e67a4fcbd08ebe471212440?s=128&d=identicon&r=PG", "display_name": "Mihai Nita", "link": "https://stackoverflow.com/users/53276/mihai-nita"}, "reply_to_user": {"reputation": 125, "user_id": 6532551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2571fd64dd346bbecdac857c99600c09?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Kunze", "link": "https://stackoverflow.com/users/6532551/timo-kunze"}, "edited": false, "score": 0, "creation_date": 1565170981, "post_id": 57363279, "comment_id": 101264994, "body": "The lack of locale info only affects item 3, the others are still handled better with the Collator. \u2022 Even if you don&#39;t know the locale, you can use the default locale, or even &quot;en&quot;, and you will get better results than NFC + lowercase. For default locale use Intl.Collator([], {sensitivity:&quot;base&quot;}). \u2022 The  &#223;/SS is just an example, you should not &quot;solve&quot; it by treating it as a special case. I can give you examples from Greek, if you want :-) \u2022 If you really-really want  to go the NFD way (why?), at least use uppercase."}, {"owner": {"reputation": 125, "user_id": 6532551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2571fd64dd346bbecdac857c99600c09?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Kunze", "link": "https://stackoverflow.com/users/6532551/timo-kunze"}, "edited": false, "score": 0, "creation_date": 1565281084, "post_id": 57363279, "comment_id": 101313564, "body": "I&#39;m trying to make Intl.Collator work, but always get an empty result:    ```   const myStrings = [&quot;\u010covjek&quot;, &quot;hello&quot;];   const searchText = &quot;co&quot;;   const collator = Intl.Collator(undefined, { sensitivity: &quot;base&quot;, usage: &quot;search&quot; });   const filteredStrings = myStrings.filter((s) =&gt; { return collator.compare(s, this.searchText) === 0; });   ```      I guess I&#39;m misunderstanding <code>usage: &quot;search&quot;</code>. This option does not seem to enable partial matches."}], "tags": [], "owner": {"reputation": 5148, "user_id": 53276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330bc82a1e67a4fcbd08ebe471212440?s=128&d=identicon&r=PG", "display_name": "Mihai Nita", "link": "https://stackoverflow.com/users/53276/mihai-nita"}, "is_accepted": false, "score": 1, "last_activity_date": 1565025438, "creation_date": 1565025438, "answer_id": 57363279, "question_id": 57299098, "link": "https://stackoverflow.com/questions/57299098/how-to-detect-special-unicode-characters-as-equal-to-their-base-character/57363279#57363279", "title": "How to detect special Unicode characters as equal to their base character?", "body": "<p><strong>Better solution (TLDR):</strong></p>\n\n<pre><code>Intl.Collator(locale, {sensitivity:\"base\"}).compare(str1, str2)\n</code></pre>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator</a></p>\n\n<p>It is less error-prone than NFD / replace accents / lowercase.</p>\n\n<p>You can of course create the collator and reuse it:</p>\n\n<pre><code>var col = new Intl.Collator(\"cz\", {sensitivity:\"base\"});\nvar result = col.compare(\"\u010covjek\", \"covjek\")\n</code></pre>\n\n<hr>\n\n<p><strong>Details</strong></p>\n\n<p>Some problems with the NFD approach:\n1. the differences can consistent of more than accents\n2. the regexp does not cover all accents\n3. lowercase conversion should be locale sensitive, not using the generic one\n4. uppercase would be better than uppercase</p>\n\n<p><strong>1. There is more than accents (example)</strong></p>\n\n<p>In Japanese there are \"narrow\" and \"wide\" forms for Kana, so \"\uff7d\" == \"\u30b9\"\nBut</p>\n\n<pre><code>\"\uff7d\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"\uff7d\"\n\"\u30b9\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"\u30b9\"\n</code></pre>\n\n<p>Not equal</p>\n\n<p>But using Collator</p>\n\n<pre><code>Intl.Collator(\"jp\", {sensitivity:\"base\"}).compare(\"\uff7d\", \"\u30b9\") =&gt; 0 (equal, correct)\n</code></pre>\n\n<p><strong>2. The regexp does not cover all accents (example)</strong></p>\n\n<p>Or Hebrew vowels (Niqqud) (<a href=\"https://en.wikipedia.org/wiki/Niqqud\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Niqqud</a>)</p>\n\n<pre><code>\"\u05db\u05b0\u05bc\u05ea\u05b4\u05d9\u05d1 \u05de\u05b8\u05dc\u05b5\u05d0\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"\u05db\u05b0\u05bc\u05ea\u05b4\u05d9\u05d1 \u05de\u05b8\u05dc\u05b5\u05d0\"\n\"\u05db\u05ea\u05d9\u05d1 \u05de\u05dc\u05d0\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"\u05db\u05ea\u05d9\u05d1 \u05de\u05dc\u05d0\"\n</code></pre>\n\n<p>Not equal</p>\n\n<p>But using Collator</p>\n\n<pre><code>Intl.Collator(\"he\", {sensitivity:\"base\"}).compare(\"\u05db\u05ea\u05d9\u05d1 \u05de\u05dc\u05d0\", \"\u05db\u05b0\u05bc\u05ea\u05b4\u05d9\u05d1 \u05de\u05b8\u05dc\u05b5\u05d0\")\n</code></pre>\n\n<p>The result is 0 (equal, correct)</p>\n\n<p>Similar for Arabic (<a href=\"https://en.wikipedia.org/wiki/Arabic_diacritics\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Arabic_diacritics</a>)</p>\n\n<p><strong>3. Locale sensitivity example</strong></p>\n\n<p>Take the \"well known Turkish I problem\" (<a href=\"https://en.wikipedia.org/wiki/Dotted_and_dotless_I\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Dotted_and_dotless_I</a>)</p>\n\n<pre><code>\"\u0131\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"\u0131\"\n\"I\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"i\"\n</code></pre>\n\n<p>So the result would be \"not equal\"</p>\n\n<p>Using the collator, with bad a non-Turkish locale:</p>\n\n<pre><code>Intl.Collator(\"fr\", {sensitivity:\"base\"}).compare(\"\u0131\", \"I\") =&gt; 1 // not equal\n</code></pre>\n\n<p>Using the (correct) Turkish locale:</p>\n\n<pre><code>Intl.Collator(\"tr\", {sensitivity:\"base\"}).compare(\"\u0131\", \"I\") =&gt; 0 // equal\n</code></pre>\n\n<p>So the locale matters</p>\n\n<p><strong>4. \"Why uppercase\" example</strong></p>\n\n<p>In German \"\u00df\" uppercases to \"SS\" so \"\u00df\" == \"SS\" ignoring case\nBut</p>\n\n<pre><code>str1 = \"\u00df\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"\u00df\"\nstr2 = \"SS\".normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase(); =&gt; \"SS\"\n</code></pre>\n\n<p>So the result would be \"not equal\"</p>\n\n<p>But</p>\n\n<pre><code>Intl.Collator(\"de\", {sensitivity:\"base\"}).compare(\"SS\", \"\u00df\") =&gt; 0 (equal, correct)\n</code></pre>\n\n<p><strong>Note:</strong> These are just some examples. Even if you say <em>\"I don't care about Japanese / Hebrew / Turkish\"</em> the proposed answer (with NFD) will fail in other locales. It is just not a good approach. Collator was designed to compare strings in an i18n aware way.</p>\n"}], "owner": {"reputation": 125, "user_id": 6532551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2571fd64dd346bbecdac857c99600c09?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Kunze", "link": "https://stackoverflow.com/users/6532551/timo-kunze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 57299140, "answer_count": 2, "score": 0, "last_activity_date": 1565025438, "creation_date": 1564608609, "question_id": 57299098, "link": "https://stackoverflow.com/questions/57299098/how-to-detect-special-unicode-characters-as-equal-to-their-base-character", "title": "How to detect special Unicode characters as equal to their base character?", "body": "<p>I want to implement a search field that will also find strings like \"\u010covjek\" when entering \"covjek\". Of course I could hard-code every pair of a special character and its base character, but I guess there is a better way. Does anybody know how to achieve such kind of string comparison with Typescript/Javascript?</p>\n"}, {"tags": ["typescript", "typescript-types"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 1, "creation_date": 1564608349, "post_id": 57298990, "comment_id": 101091971, "body": "No that information is not in the type system. You could create an alternate way to specify the defaults, but directly it&#39;s not available"}], "answers": [{"tags": [], "owner": {"reputation": 14428, "user_id": 1191551, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/97ced8a229689b73b098a542636052e8?s=128&d=identicon&r=PG", "display_name": "Chet", "link": "https://stackoverflow.com/users/1191551/chet"}, "is_accepted": false, "score": 1, "last_activity_date": 1564614539, "creation_date": 1564614539, "answer_id": 57299895, "question_id": 57298990, "link": "https://stackoverflow.com/questions/57298990/is-there-a-type-level-way-to-extract-properties-that-have-default-from-a-class/57299895#57299895", "title": "Is there a type-level way to extract properties that have default from a class?", "body": "<p>I think what you mean by \"no default value\" is that the value can be undefined. Currently, your code throws a type error because <code>noDefault</code> does not contain undefined in its type definition.</p>\n\n<p>So let me reframe the question:</p>\n\n<blockquote>\n  <p>How do I find all of the keys in a class that are potentially undefined?</p>\n</blockquote>\n\n<p>Something like this works:</p>\n\n<pre><code>type DefaultPropertyNames&lt;T&gt; = Exclude&lt;{\n    [K in keyof T]: {key: K, value: T[K] extends T[K] &amp; {} ? true : false}\n}[keyof T], {value: false}&gt;[\"key\"]\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/MYGwhgzhAEBiD29oG8BQ1oAtIBECmAZmAK4gAuAXNAEaIh5gB20AvNGQE7F7rRggR4ACVyES5Ko2IBbang6toAFgBMvRvHxFSlGnQbMAPtGKMAJoQCWjPGdQBfVKjIBPAA55oW8WQAKHeA8OVwA5MGk8CAAeABUAPkUAUQAPUGILKLQASABtAGloa2gAazwXeAJoGIBdKmRSlyo8gBpoADd+bioY-OroPGSyPHMYHry+gDIUe2gAfnYuTyoiATxHexyGiqrq1uQOkC7oFYg1uJyAIgaL6qdXDzhEbx0YNmfyf0D5UPDIqIR4AkAPRA6AAWgSAHJsBB3mRIdBjJD+IIRLCxDpIUA\" rel=\"nofollow noreferrer\">playground</a></p>\n\n<p>To explain a little bit: </p>\n\n<ul>\n<li><p><code>T[K] &amp; {}</code> removes <code>undefined</code> from a type. </p></li>\n<li><p><code>T[K] extends T[K] &amp; {}</code> tells you if undefined is in the union type</p></li>\n<li><p><code>{[K in keyof T]: ... }[keyof T]</code> creates a union type from each property key</p></li>\n<li><p><code>Exclude</code> lets you remove items from the union type.</p></li>\n</ul>\n"}], "owner": {"reputation": 4555, "user_id": 379439, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eff26034f6349f400f0fd0bc1f06c1af?s=128&d=identicon&r=PG", "display_name": "Just Jake", "link": "https://stackoverflow.com/users/379439/just-jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564614539, "creation_date": 1564607971, "question_id": 57298990, "link": "https://stackoverflow.com/questions/57298990/is-there-a-type-level-way-to-extract-properties-that-have-default-from-a-class", "title": "Is there a type-level way to extract properties that have default from a class?", "body": "<p>I want to extract the key names of properties in a class that have default values. Is this information available to the type system?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>class Foo {\n  hasDefault: boolean = true\n  alsoHasDefault: number = 42\n  noDefault: boolean\n}\n\n// How can this be implemented?\ntype DefaultPropertyNames&lt;T&gt; = ... \n\n// Example output:\ntype FooDefaults = DefaultPropertyNames&lt;Foo&gt; // -&gt; 'hasDefault' | 'alsoHasDefault'\n</code></pre>\n"}, {"tags": ["typescript", "iterable"], "comments": [{"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1564609084, "post_id": 57298909, "comment_id": 101092194, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18884249/checking-whether-something-is-iterable\">Checking whether something is iterable</a>"}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1564609103, "post_id": 57298909, "comment_id": 101092203, "body": "This question is identical to the one you linked \u2014 you should just post the answer over there."}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 1, "creation_date": 1564609258, "post_id": 57298909, "comment_id": 101092259, "body": "@jhpratt \u2014 It really is not, the referred question is about <b>dynamic</b> check in <b>Javascript</b> and mine is about <b>static</b> check in <b>TypeScript</b>. Actually, I wrote <i>because</i> I didn&#39;t see the typescript version, and the documentation was no straight to the point. My intent is for some googler to quickly find a TypeScript solution for this issue. If you were confused, I&#39;d invite you to edit. I don&#39;t have any idea to clarify my question further (yet)."}], "answers": [{"tags": [], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "is_accepted": true, "score": 2, "last_activity_date": 1564607574, "creation_date": 1564607574, "answer_id": 57298910, "question_id": 57298909, "link": "https://stackoverflow.com/questions/57298909/how-can-i-check-whether-an-object-is-iterable-statically/57298910#57298910", "title": "How can I check whether an object is iterable statically?", "body": "<p>There is an <a href=\"https://www.typescriptlang.org/docs/handbook/iterators-and-generators.html#iterables\" rel=\"nofollow noreferrer\"><code>Iterable</code></a> type that would do just that:</p>\n\n<pre><code>function fn(ary: Iterable&lt;any&gt;) {\n    for (let value of ary)\n        console.log(value)\n}\n</code></pre>\n\n<p><sup><a href=\"https://www.typescriptlang.org/play/index.html#code/GYVwdgxgLglg9mABMMAKAhgJwJ4C5ECSUAppugEYA2xAPOmNgHwCUiA3gFCLfJyaKpqURADd0lEMURxgiLNmZce3CAgDOcagDpKcAOaoxE4ooC+HDilQBGVgHo7iAGLoYlNYlUBbAA5v0sAiWaADa1gC69o4A8gDSQA\" rel=\"nofollow noreferrer\">Corresponding TypeScript playground here</a>.</sup></p>\n\n<p>Note that <code>Iterable</code> requires on type argument. <code>any</code> allows you to specifically detect <em>just</em> if an object is iterable, although you could go further and specify on what you would like to iterate (eg. <code>Iterable&lt;Number&gt;</code>).</p>\n"}], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 57298910, "answer_count": 1, "score": 1, "last_activity_date": 1564608956, "creation_date": 1564607574, "last_edit_date": 1564608956, "question_id": 57298909, "link": "https://stackoverflow.com/questions/57298909/how-can-i-check-whether-an-object-is-iterable-statically", "title": "How can I check whether an object is iterable statically?", "body": "<p>I have a function which needs an iterable:</p>\n\n<pre><code>function fn(ary) {\n    for (let value of ary)\n        console.log(value)\n}\n</code></pre>\n\n<p>In javascript, I would take advantage of <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\" rel=\"nofollow noreferrer\"><code>Symbol.iterator</code></a>:</p>\n\n<blockquote>\n  <pre class=\"lang-js prettyprint-override\"><code>function isIterable(obj) {\n    // checks for null and undefined\n    if (obj == null) {\n        return false;\n    }\n    return typeof obj[Symbol.iterator] === 'function';\n}\n</code></pre>\n</blockquote>\n\n<p><sup>Taken from <a href=\"https://stackoverflow.com/a/32538867/6320039\">Tomas Kulich original answer</a>.</sup></p>\n\n<p>which would lead to the next code:</p>\n\n<pre><code>function fn(ary) {\n    if (!isIterable(ary)) throw 'Not iterable'\n\n    for (let value of ary)\n        console.log(value)\n}\n</code></pre>\n\n<p>Isn't there a way to take advantage of TypeScript's typing facilities rather than using this on-the-fly function?</p>\n"}, {"tags": ["java", "node.js", "angular", "typescript", "http"], "comments": [{"owner": {"reputation": 33331, "user_id": 1898563, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d99204bcce923f40f5c72b7f80121644?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1898563/michael"}, "edited": false, "score": 0, "creation_date": 1564607807, "post_id": 57298832, "comment_id": 101091823, "body": "What does an SSL certificate have to do with Angular?"}, {"owner": {"reputation": 1221, "user_id": 7727575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c87cb83738ab6ef3f7198545b602a20?s=128&d=identicon&r=PG&f=1", "display_name": "S&#233;bastien Temprado", "link": "https://stackoverflow.com/users/7727575/s%c3%a9bastien-temprado"}, "edited": false, "score": 0, "creation_date": 1564608712, "post_id": 57298832, "comment_id": 101092084, "body": "we need more information to answer your question"}], "owner": {"reputation": 9, "user_id": 11866123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd72d6d772ced0830533008a59dc2609?s=128&d=identicon&r=PG&f=1", "display_name": "Jean N", "link": "https://stackoverflow.com/users/11866123/jean-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564609005, "creation_date": 1564607159, "last_edit_date": 1564609005, "question_id": 57298832, "link": "https://stackoverflow.com/questions/57298832/about-ssl-certificate-in-production-why-doesnt-my-request-work", "title": "About SSL Certificate in Production. Why doesn&#39;t my request work?", "body": "<p>I have a <code>get (http)</code> request in my Java code, in localhost I can run normally, my code works, but in production I get no response. Returns error <code>500</code>.</p>\n\n<p>When I test my production request by Postman, it returns a message missing <code>SSL</code> certificate. My questions are how to solve this problem and is the error possible due to lack of <code>SSL</code>?</p>\n\n<p>My production site does not have <code>SSL</code> certificate</p>\n"}, {"tags": ["javascript", "node.js", "typescript", "asynchronous", "axios"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1564604264, "post_id": 57298221, "comment_id": 101090550, "body": "Your first <code>await</code> is simply awaiting the result of the <code>map</code> function, which is synchronous and returns immediately. If you want to wait for all of the promises to return, use <code>Promise.all</code>."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1564604320, "post_id": 57298221, "comment_id": 101090566, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37360567/how-do-i-await-a-list-of-promises-in-javascript-typescript\">How do I await a list of Promises in JavaScript/TypeScript?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 973085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09e6b51973fea232649d3008016bc15d?s=128&d=identicon&r=PG", "display_name": "Evvo", "link": "https://stackoverflow.com/users/973085/evvo"}, "edited": false, "score": 0, "creation_date": 1614633071, "post_id": 57298958, "comment_id": 117439575, "body": "I tried this but got an error because the get() returns string|Promise and it doesn&#39;t match the function&#39;s return type"}], "tags": [], "owner": {"reputation": 54, "user_id": 9291797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3A3MxOFlCXs/AAAAAAAAAAI/AAAAAAAAAB4/vMvVCko6vDI/photo.jpg?sz=128", "display_name": "Berkay Bindebir", "link": "https://stackoverflow.com/users/9291797/berkay-bindebir"}, "is_accepted": false, "score": 1, "last_activity_date": 1564607836, "creation_date": 1564607836, "answer_id": 57298958, "question_id": 57298221, "link": "https://stackoverflow.com/questions/57298221/how-can-i-wait-for-a-response-using-axios-and-typescript/57298958#57298958", "title": "How can I wait for a response using Axios and Typescript?", "body": "<p>Your \"<strong>create</strong>\" function is not returning a promise, its a void return type function.\nAlso, you need to add await before async task like \"<strong>Axios</strong>\". Object.values is not an async task.</p>\n\n<pre><code>class PlaylistController {\n    // Metodo inicial para criacao da playlist\n    public create(req: Request, res: Response): void {\n      let artists = req.body.bands;\n      artists = artists.split(',');\n\n      search = Object.values(artists).map((artistsName): any =&gt; this.searchArtists(artistsName));\n      console.log(search)\n    }\n\n    private searchArtists = async (artistName): Promise&lt;AxiosResponse&gt; =&gt; {\n        return await axios.get(`${API_URL}/search`, {\n            params: {\n              q: artistName,\n              type: 'artist',\n            },\n            headers: {\n              Authorization: `${TOKEN_TYPE} ${REFRESH_TOKEN}`,\n            }\n        })\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 7742993, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/265179737193e8f7f5d92a46ff9ffed4?s=128&d=identicon&r=PG&f=1", "display_name": "DouglasNickson", "link": "https://stackoverflow.com/users/7742993/douglasnickson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564607836, "creation_date": 1564604099, "question_id": 57298221, "link": "https://stackoverflow.com/questions/57298221/how-can-i-wait-for-a-response-using-axios-and-typescript", "title": "How can I wait for a response using Axios and Typescript?", "body": "<p>I need your help to adjust my methods to wait for a axios response. Basically, I send a request to an WebService and I need wait the response to catch the return and call another method.</p>\n\n<p>I've tried to use async/await on my calls but I probably used it wrong.</p>\n\n<pre><code>class PlaylistController {\n  // Metodo inicial para criacao da playlist\n  public async create(req: Request, res: Response): Promise&lt;Response&gt; {\n    let artists = req.body.bands;\n    artists = artists.split(',');\n\n    const search = await Object.values(artists)\n      .map((artistsName): Promise&lt;AxiosResponse&gt; =&gt; this.searchArtists(artistsName));\n    console.log(search);\n\n  }\n\n  private searchArtists = async (artistName): Promise&lt;AxiosResponse&gt; =&gt; axios.get(`${API_URL}/search`, {\n    params: {\n      q: artistName,\n      type: 'artist',\n    },\n    headers: {\n      Authorization: `${TOKEN_TYPE} ${REFRESH_TOKEN}`,\n    },\n  }).then((response): AxiosResponse =&gt; { console.log(response.data.artists); return response; })\n    .catch((error) =&gt; { console.log(error.response.data); return error; });\n}\n</code></pre>\n\n<p>This code first log the result of the \"console.log(search);\" with this output:</p>\n\n<pre><code>[Promise { pending },\n Promise { pending },\n Promise { pending } ]\n</code></pre>\n\n<p>After that is showed the axios response.</p>\n"}, {"tags": ["reactjs", "typescript", "types", "react-hooks"], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 2700724, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/96072134d4de7f0dcf451d47d3da0eae?s=128&d=identicon&r=PG&f=1", "display_name": "Tarang Hirani", "link": "https://stackoverflow.com/users/2700724/tarang-hirani"}, "edited": false, "score": 0, "creation_date": 1564652427, "post_id": 57304378, "comment_id": 101104835, "body": "What&#39;s the difference? I&#39;m a little confused by this."}, {"owner": {"reputation": 516, "user_id": 2700724, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/96072134d4de7f0dcf451d47d3da0eae?s=128&d=identicon&r=PG&f=1", "display_name": "Tarang Hirani", "link": "https://stackoverflow.com/users/2700724/tarang-hirani"}, "edited": false, "score": 0, "creation_date": 1564653787, "post_id": 57304378, "comment_id": 101105595, "body": "But I need to pass dispatch so that the children can also use it."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "reply_to_user": {"reputation": 516, "user_id": 2700724, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/96072134d4de7f0dcf451d47d3da0eae?s=128&d=identicon&r=PG&f=1", "display_name": "Tarang Hirani", "link": "https://stackoverflow.com/users/2700724/tarang-hirani"}, "edited": false, "score": 0, "creation_date": 1564656885, "post_id": 57304378, "comment_id": 101107246, "body": "My bad, didn&#39;t see your last sentences. Have a look at the update now."}], "tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": false, "score": 3, "last_activity_date": 1583678656, "last_edit_date": 1583678656, "creation_date": 1564646481, "answer_id": 57304378, "question_id": 57298149, "link": "https://stackoverflow.com/questions/57298149/react-ts-usecontext-usereducer-hook/57304378#57304378", "title": "React TS useContext useReducer hook", "body": "<blockquote>\n  <p>I am trying to pass the context value of state and dispatch to the child component.</p>\n</blockquote>\n\n<p>The <code>MenuContext</code> type is determined by <code>initialState</code> - they don't match up in your case. You could declare a custom context value type:</p>\n\n<pre><code>type StoreApi = {\n  state: typeof initialState\n  dispatch: React.Dispatch&lt;Action&gt;\n}\n</code></pre>\n\n<p>Then define <code>MenuContext</code> like this:</p>\n\n<pre><code>// undefined is just the default in case, you don't have a provider defined\nexport const MenuContext = React.createContext&lt;StoreApi | undefined&gt;(undefined)\n// or if you want it more like your first example (I would prefer first variant)\nexport const MenuContext = React.createContext&lt;StoreApi | typeof initialState&gt;(initialState)\n</code></pre>\n\n<blockquote>\n  <p>Is this also a correct way to implement useContext and useReducer hooks?</p>\n</blockquote>\n\n<p>Above is a common pattern to initialize a React context. Further extension points:</p>\n\n<p>1.) Currently, all your context <a href=\"https://reactjs.org/docs/hooks-reference.html#usecontext\" rel=\"nofollow noreferrer\">consumers re-render each render phase</a>, as <code>value</code> is a new object reference every time. If you have slow performance (no premature optimization), memoize <code>value</code>:</p>\n\n<pre><code>const value = React.useMemo(() =&gt; ({ state, dispatch }), [state])\n</code></pre>\n\n<p>2.) Create a custom <code>useMenu</code> hook, that returns <code>state</code>, <code>dispatch</code> and other useful API methods. </p>\n\n<pre><code>function useMenu() {\n  const context = React.useContext(MenuContext);\n  if (context === undefined) throw new Error(`No provider for MenuContext given`);\n  const { state, dispatch } = context;\n  const myApiMethod = () =&gt; dispatch({ type: \"SET_ACTIVE\", label: \"foo\" })\n  return { ...context, myApiMethod };\n}\n\nconst Client = () =&gt; {\n  const { state, dispatch, myApiMethod } = useMenu()\n  // ...\n}\n</code></pre>\n\n<p>This way <code>MenuContext</code> is encapsulated, there is no need to use <code>React.useContext(MenuContext)</code> and the client gets a tailored API. Further reading: <a href=\"https://kentcdodds.com/blog/how-to-use-react-context-effectively/\" rel=\"nofollow noreferrer\">How to use React Context effectively</a> and its related articles.</p>\n"}, {"tags": [], "owner": {"reputation": 662, "user_id": 4288978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b6e2ec670eaa8a5e0a1e78f2b101d9?s=128&d=identicon&r=PG", "display_name": "Tejas", "link": "https://stackoverflow.com/users/4288978/tejas"}, "is_accepted": true, "score": 5, "last_activity_date": 1564664420, "creation_date": 1564664420, "answer_id": 57309618, "question_id": 57298149, "link": "https://stackoverflow.com/questions/57298149/react-ts-usecontext-usereducer-hook/57309618#57309618", "title": "React TS useContext useReducer hook", "body": "<p>Your problem is that your context is supposed to have the same type as <code>initialState</code>, but instead, you set your context's default value to <code>{ state, dispatch }</code>.</p>\n\n<p>This is incorrect.</p>\n\n<p>To solve, either set your context's default type to <code>{ state, dispatch }</code> (I think this is what you want, <em>or</em> set the context's default type to <code>typeof initialState</code>.</p>\n\n<p>Here's <a href=\"https://codesandbox.io/s/react-typescript-juf1h\" rel=\"noreferrer\">the solution</a>.</p>\n"}], "owner": {"reputation": 516, "user_id": 2700724, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/96072134d4de7f0dcf451d47d3da0eae?s=128&d=identicon&r=PG&f=1", "display_name": "Tarang Hirani", "link": "https://stackoverflow.com/users/2700724/tarang-hirani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5862, "favorite_count": 0, "accepted_answer_id": 57309618, "answer_count": 2, "score": 4, "last_activity_date": 1583678690, "creation_date": 1564603688, "last_edit_date": 1583678690, "question_id": 57298149, "link": "https://stackoverflow.com/questions/57298149/react-ts-usecontext-usereducer-hook", "title": "React TS useContext useReducer hook", "body": "<p>I can't figure out what the type error is in this code</p>\n\n<pre><code>import React from 'react';\n\ninterface IMenu {\n  items: {\n    title: string,\n    active: boolean,\n    label: string\n  }[]\n}\n\n\ntype Action =\n  | { type: 'SET_ACTIVE', label: string }\n\nconst initialState: IMenu = {\n  items: [\n    { title: 'Home', active: false, label: 'home' },\n    { title: 'Customer', active: false, label: 'customer' },\n    { title: 'Employee', active: false, label: 'employee' },\n    { title: 'Report', active: false, label: 'report' },\n  ]\n}\n\nconst reducer = (state: IMenu = initialState, action: Action) =&gt; {\n  switch (action.type) {\n    case 'SET_ACTIVE': {\n      const label = action.label;\n      const items = state.items.map((item) =&gt; {\n        if (item.label === label) {\n          return { ...item, active: true };\n        }\n        return { ...item, active: false }\n      })\n      return { items }\n    }\n    default:\n      throw new Error();\n  }\n};\n\nexport const MenuContext = React.createContext(initialState);\nexport const MenuConsumer = MenuContext.Consumer;\n\nexport function MenuProvider(props: any) {\n  const [state, dispatch] = React.useReducer(reducer, initialState)\n  const value = { state, dispatch };\n  console.log(value)\n  return (\n    &lt;MenuContext.Provider value={value}&gt;\n      {props.children}\n    &lt;/MenuContext.Provider&gt;\n  )\n}\n</code></pre>\n\n<p>The error I receive is this </p>\n\n<pre><code>    /Volumes/Tarang External/react-context-typescript/src/context/index.tsx\nTypeScript error in /Volumes/Tarang External/react-context-typescript/src/context/index.tsx(49,27):\nProperty 'items' is missing in type '{ state: { items: { active: boolean; title: string; label: string; }[]; }; dispatch: Dispatch&lt;{ type: \"SET_ACTIVE\"; label: string; }&gt;; }' but required in type 'IMenu'.  TS2741\n\n    47 |   console.log(value)\n    48 |   return (\n  &gt; 49 |     &lt;MenuContext.Provider value={value}&gt;\n       |                           ^\n    50 |       {props.children}\n    51 |     &lt;/MenuContext.Prov\n</code></pre>\n\n<p>Can someone help point out what exactly I'm doing wrong? I am new to typescript so please guide me if necessary. I am trying to pass the context value of state and dispatch to the child component. I am not sure what's going. Is this also a correct way to implement useContext and useReducer hooks?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1564624181, "post_id": 57298071, "comment_id": 101095210, "body": "If you&#39;re using a framework like angular, this is built in. If you&#39;re not, check out <a href=\"https://webpack.js.org/\" rel=\"nofollow noreferrer\">webpack.js.org</a>.  Tutorial on a basic example using environment variables: <a href=\"https://medium.com/@justintulk/passing-environment-variables-into-your-code-with-webpack-cab09d8974b0\" rel=\"nofollow noreferrer\">medium.com/@justintulk/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2534, "user_id": 10609635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e433b22da80480e4d7d811ceec10430?s=128&d=identicon&r=PG&f=1", "display_name": "SpencerPark", "link": "https://stackoverflow.com/users/10609635/spencerpark"}, "is_accepted": false, "score": 6, "last_activity_date": 1604817560, "last_edit_date": 1604817560, "creation_date": 1564623852, "answer_id": 57300832, "question_id": 57298071, "link": "https://stackoverflow.com/questions/57298071/is-it-possible-to-declare-dynamic-string-type-in-typescript/57300832#57300832", "title": "Is it possible to declare dynamic string type in Typescript", "body": "<p>Update for those who still find their way here: this will be added in 4.1, see <a href=\"https://github.com/microsoft/TypeScript/pull/40336\" rel=\"nofollow noreferrer\">TypeScript#40336</a>.</p>\n<pre class=\"lang-js prettyprint-override\"><code>export type SaveTokenNamespace&lt;K extends string&gt; = { [T in K]: `SAVE_TOKEN/${T}` };\n\nexport function makeNamespace&lt;K extends TEnv&gt;(env: Record&lt;K, unknown&gt;): SaveTokenNamespace&lt;K&gt; {\n  return Object.keys(env).reduce((ns, k) =&gt; ({ ...ns, [k]: `SAVE_TOKEN/${k}` }), {} as SaveTokenNamespace&lt;K&gt;);\n}\n\nconsole.log(makeNamespace(env));\nconst envNamespace = makeNamespace(env);\nconst test1: 'SAVE_TOKEN/qa1' = envNamespace.qa1; // Ok!\nconst test2: 'SAVE_TOKEN/notqa1' = envNamespace.qa1; // Error: Type '&quot;SAVE_TOKEN/qa1&quot;' is not assignable to type '&quot;SAVE_TOKEN/notqa1&quot;'.\n</code></pre>\n<p><a href=\"https://www.typescriptlang.org/play?target=2&amp;module=0&amp;ts=4.1.0-beta#code/KYDwDg9gTgLgBMAdgVwLZwKIcQNzgbzgBNgcBLRGAGjgEcBDARjgF8BuAWAChRJY4YATzDA4AFWx4AvHADWwQRABmA4cGWZJnHuGjwAxhEQBneEhwAuOACVghqEQA8E3DULGIqYDAAWFAOZWKKgARsBQrAB8cDL43HDEpBQwVnFcCQkeXr4BVoxU8awF6XRMqYWZnt5+iIFw+YUsxezc3Lx6qiJwAMr0OMBiEPKIAHL0XsZg9PrAjgDSCCAwSETGcKZQAdGxcADaYnAUcHMAulYABt0AggBqGAD6YgDycxgjAPQAJPhiLOes2jaun4SmQiH0MDIRjgqHo8jGEymM3mi2WiFW4kkkQAFOYrLZ7E45jQwbJEBAAO6ISIASisvX6g2GCOAk2mszm0TSCSg3mQUEQcCeIQAVnYYAA6eSCYy43A0iW8ojIGbY7EmGiyGkxaLYwgSg0avayM5wS63B7PV4fb6yP6sGluFhwehrBkDIZIFls5GcmnaFitLiGEwQAA2wAlYYg-mxsPh41ZSOAcpwNP93BDpgQuG9yZiMLhwDz7NTGeDRmzy1MjCsAHJrndHi83u8GIw6wXzCWZhL22w4O93kLZABCTOV+DVmAAJnrjctLY+5Jg7c7Mm7iZ9kf7g+HGCgUGgVjEajgdYARAvm9a20wL52yGsVy7jMYyP5EPQQhGBBBOqIl7XlarYru2D4SkAA\" rel=\"nofollow noreferrer\">Try it in the TypeScript playground</a></p>\n<hr />\n<p>There are some popular open proposals/requests including <a href=\"https://github.com/microsoft/TypeScript/issues/6579\" rel=\"nofollow noreferrer\">Regex-validated string type: TypeScript#6579</a> and <a href=\"https://github.com/microsoft/TypeScript/issues/12754\" rel=\"nofollow noreferrer\">TypeScript#12754</a> with a <a href=\"https://github.com/microsoft/TypeScript/issues/12754#issuecomment-351066369\" rel=\"nofollow noreferrer\">comment about this exact use case</a>, but as of 3.5.1 the answer is no.</p>\n"}], "owner": {"reputation": 86, "user_id": 1834691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8256921f53521daed10242b5791d2bf4?s=128&d=identicon&r=PG", "display_name": "Exit Ekkasit Pinyoanuntapong", "link": "https://stackoverflow.com/users/1834691/exit-ekkasit-pinyoanuntapong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "closed_date": 1564625971, "answer_count": 1, "score": 1, "last_activity_date": 1604817560, "creation_date": 1564603278, "last_edit_date": 1564622985, "question_id": 57298071, "link": "https://stackoverflow.com/questions/57298071/is-it-possible-to-declare-dynamic-string-type-in-typescript", "closed_reason": "Duplicate", "title": "Is it possible to declare dynamic string type in Typescript", "body": "<p>Suppose:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export enum EEnv { devint, qa1 };\nexport type TEnv = keyof typeof EEnv;\nexport const env:Record&lt;TEnv, {something:number}&gt; = {\n  devint: {\n    something: 1,\n  },\n  qa1: {\n    something: 1,\n  },\n}\n</code></pre>\n\n<p>Then I want to create dynamic object based on <code>env</code> object, like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const SAVE_TOKEN: Record&lt;TEnv, string&gt; = {\n  devint: \"SAVE_TOKEN/devint\", // based on \"env\" key\n  qa1: \"SAVE_TOKEN/qa1\", // based on \"env\" key\n}\n</code></pre>\n\n<p>Is there any way to create type of string to be <strong><em><code>\"SAVE_TOKEN/\"+TEnv</code></em></strong> rather that just string.</p>\n"}, {"tags": ["javascript", "typescript", "typedoc"], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 4397574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cd76535237833a23d22c2a2ac1fd59?s=128&d=identicon&r=PG", "display_name": "ozm", "link": "https://stackoverflow.com/users/4397574/ozm"}, "is_accepted": false, "score": 0, "last_activity_date": 1591525177, "creation_date": 1591525177, "answer_id": 62243905, "question_id": 57298054, "link": "https://stackoverflow.com/questions/57298054/linking-to-external-library-documentation-with-typedoc/62243905#62243905", "title": "Linking to external library documentation with TypeDoc", "body": "<p>Yes you can use following syntax by putting text between square brackets <code>[]</code> and url between parenthesis <code>()</code>.</p>\n\n<pre><code>[Text to be displayed](URL)\n</code></pre>\n\n<p>For example: Link to an <code>npm</code> module called <code>pg-structure</code>.</p>\n\n<p><code>[pg-structure](https://www.npmjs.com/package/pg-structure)</code></p>\n\n<p>I also usually link to related paragraph by copying from <code>npm</code> link icon left to title. (See icon left to <code>Synopsis</code> title in example picture below)</p>\n\n<p><a href=\"https://i.stack.imgur.com/KVYha.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KVYha.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 181, "user_id": 11838788, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C0n5QyAf0M8/AAAAAAAAAAI/AAAAAAAAkIE/_Ehbr0cjYWk/photo.jpg?sz=128", "display_name": "Erik Macik", "link": "https://stackoverflow.com/users/11838788/erik-macik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1591525177, "creation_date": 1564603195, "question_id": 57298054, "link": "https://stackoverflow.com/questions/57298054/linking-to-external-library-documentation-with-typedoc", "title": "Linking to external library documentation with TypeDoc", "body": "<p>I have a TypeScript project, and I'm using TypeDoc to generate documentation for it. In my project I am using an external library that has its own existing documentation. In the TypeDoc output for my project I want to link the reader to the documentation for the external library without having to manually insert a URL.</p>\n\n<p>The closest I've come to a solution is placing double brackets in the code comments around what I want to link to, like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>/** I want to link to something called [[Foo]] */\n</code></pre>\n\n<p>But this doesn't seem to work for types in an external library.</p>\n\n<p>Is this possible to achieve?</p>\n"}, {"tags": ["typescript", "docker", "docker-compose", "nestjs"], "comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1564601886, "post_id": 57297703, "comment_id": 101089674, "body": "What benefits are you hoping to get from using Docker here, as opposed to a local Node installation?"}, {"owner": {"reputation": 161, "user_id": 4313268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsIb4.jpg?s=128&g=1", "display_name": "Matias Benedetto", "link": "https://stackoverflow.com/users/4313268/matias-benedetto"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 2, "creation_date": 1564602492, "post_id": 57297703, "comment_id": 101089908, "body": "Hello @DavidMaze the benefit is to make use of the other services initiated by docker-compose."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 4313268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsIb4.jpg?s=128&g=1", "display_name": "Matias Benedetto", "link": "https://stackoverflow.com/users/4313268/matias-benedetto"}, "edited": false, "score": 0, "creation_date": 1564603269, "post_id": 57297918, "comment_id": 101090179, "body": "I want to rebuild the image every time my source code changes in development, I can&#39;t commit every time. Is this possible?"}, {"owner": {"reputation": 12299, "user_id": 609290, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WUBht.jpg?s=128&g=1", "display_name": "DazWilkin", "link": "https://stackoverflow.com/users/609290/dazwilkin"}, "reply_to_user": {"reputation": 161, "user_id": 4313268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsIb4.jpg?s=128&g=1", "display_name": "Matias Benedetto", "link": "https://stackoverflow.com/users/4313268/matias-benedetto"}, "edited": false, "score": 0, "creation_date": 1564604917, "post_id": 57297918, "comment_id": 101090773, "body": "You should probably script the flow... <code>docker-compose down</code>, rebuild your image and tag it appropriately, edit your docker-compose.yaml, <code>docker-compose up</code>. It&#39;s possible to volume mount the sources into the image too and then you&#39;d need only restart the container|process for them to be detected but then the merits of using docker are less clear."}], "tags": [], "owner": {"reputation": 12299, "user_id": 609290, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WUBht.jpg?s=128&g=1", "display_name": "DazWilkin", "link": "https://stackoverflow.com/users/609290/dazwilkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1564602410, "creation_date": 1564602410, "answer_id": 57297918, "question_id": 57297703, "link": "https://stackoverflow.com/questions/57297703/how-to-watch-file-changes-developing-in-nestjs-app-inside-docker-container/57297918#57297918", "title": "How to watch file changes developing in NestJs app inside Docker container", "body": "<p>When you run <code>docker-compose ...</code>, it looks for a matching image (<code>c2c/messages:v1</code>) and if it...</p>\n\n<ul>\n<li>finds the image locally, it runs it</li>\n<li>doesn't find it, your <code>docker-compose.yaml</code> will cause docker-compose to build  the image.</li>\n</ul>\n\n<p>Once running, one way to change the running process, is to change the files <em>within</em> the container image and then trigger to process to reload them. But, it is considered good practice to have 'immutable' (don't change) containers.</p>\n\n<p>One way you may address this is to:</p>\n\n<ul>\n<li>add your sources to source control</li>\n<li>use some unique identifier of your source to detect changes.</li>\n</ul>\n\n<p>(commonly a hash of your sources e.g. with git <code>git --rev-parse HEAD</code>) </p>\n\n<p>If your sources change, the hash will change and you can use this to trigger a rebuild of the image <em>when</em> docker-compose next starts. A simple way to do this would to be to:</p>\n\n<ul>\n<li><code>TAG=$(git rev-parse HEAD)</code></li>\n<li>then use the hash as the tag for your image (instead of <code>v1</code>), e.g. <code>c2c/messages:${TAG}</code></li>\n</ul>\n\n<p>Your workflow would become:</p>\n\n<ul>\n<li>change your sources</li>\n<li>calculate the hash</li>\n<li><code>docker-compose up...</code> referencing the image tagged with the hash to force rebuild</li>\n</ul>\n\n<p>Using source control gives you a history of your sources.</p>\n\n<p>Using image tags of your source's hashes allows you to match images to commits</p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 4313268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsIb4.jpg?s=128&g=1", "display_name": "Matias Benedetto", "link": "https://stackoverflow.com/users/4313268/matias-benedetto"}, "is_accepted": false, "score": 7, "last_activity_date": 1564619923, "creation_date": 1564619923, "answer_id": 57300459, "question_id": 57297703, "link": "https://stackoverflow.com/questions/57297703/how-to-watch-file-changes-developing-in-nestjs-app-inside-docker-container/57300459#57300459", "title": "How to watch file changes developing in NestJs app inside Docker container", "body": "<p>I have it working now :)</p>\n\n<p>The key is to create a <strong>volume</strong> in docker-compose with the local machine root folder of your microservice folder, in this case <strong>./services/c2c-server-messages</strong> as the root of the app in the container <strong>:/api/messages</strong></p>\n\n<p>In this way, you are using your local files to run the app and not the files copied to the container, so you can watch for the changes when you save a file.</p>\n\n<p>Example:</p>\n\n<pre><code>  messages:\n   image: c2c/messages:v1\n   volumes:\n    - ./services/c2c-server-messages:/api/messages\n   command: npm run start:dev\n   build:\n     context: ./services/c2c-server-messages\n     dockerfile: Dockerfile\n   container_name: c2c_server_messages\n   depends_on:\n     - postgres\n     - nginx\n   networks:\n     c2c_net:\n       ipv4_address: 172.28.1.5\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 4313268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsIb4.jpg?s=128&g=1", "display_name": "Matias Benedetto", "link": "https://stackoverflow.com/users/4313268/matias-benedetto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2943, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1564619923, "creation_date": 1564601284, "last_edit_date": 1564601630, "question_id": 57297703, "link": "https://stackoverflow.com/questions/57297703/how-to-watch-file-changes-developing-in-nestjs-app-inside-docker-container", "title": "How to watch file changes developing in NestJs app inside Docker container", "body": "<p>I'm having a problem with <strong>NestJS</strong> and <strong>Docker</strong>. I want to run the development script via npm start: dev but the problem is that the app runs ok but it dosn't detect any change in the souce files, so I cant use it to develop my app. </p>\n\n<p>This is part of my <strong>docker-compose.yml</strong>:</p>\n\n<pre><code>messages:\n   image: c2c/messages:v1\n   command: npm run start:dev\n   build:\n     context: ./services/c2c-server-messages\n     dockerfile: Dockerfile\n   container_name: c2c_server_messages\n   depends_on:\n     - postgres\n     - nginx\n   networks:\n     c2c_net:\n       ipv4_address: 172.28.1.5\n</code></pre>\n\n<p>And the <strong>Dockerfile</strong> of my Nest app:</p>\n\n<pre><code>FROM node:10-alpine\nWORKDIR /api/messages\nADD . .\nRUN npm install\nEXPOSE 3000\nCMD [\"npm\", \"run\", \"start\"]\n</code></pre>\n\n<p>My npm start:dev script in <strong>package.json</strong>:</p>\n\n<pre><code>\"start:dev\": \"tsc-watch -p tsconfig.build.json --onSuccess \\\"node dist/main.js\\\"\",\n</code></pre>\n\n<p>The <strong>console output</strong> show me this, but the app dosn't detect the file changes:</p>\n\n<pre><code>c2c_server_messages | 7:26:29 PM - Found 0 errors. Watching for file changes.\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [NestFactory] Starting Nest application...\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [InstanceLoader] TypeOrmModule dependencies initialized +63ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [InstanceLoader] AppModule dependencies initialized +2ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [InstanceLoader] TypeOrmCoreModule dependencies initialized +151ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [InstanceLoader] TypeOrmModule dependencies initialized +1ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [InstanceLoader] MessageModule dependencies initialized +2ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [RoutesResolver] AppController {/}: +8ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [RouterExplorer] Mapped {/, GET} route +6ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [RoutesResolver] MessageController {/messages}: +1ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [RouterExplorer] Mapped {/, POST} route +2ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [RouterExplorer] Mapped {/all, GET} route +2ms\nc2c_server_messages | [Nest] 36   - 07/31/2019, 7:26 PM   [NestApplication] Nest application successfully started +5ms\n</code></pre>\n"}, {"tags": ["javascript", "postgresql", "typescript", "sequelize.js"], "answers": [{"tags": [], "owner": {"reputation": 912, "user_id": 8054597, "user_type": "registered", "profile_image": "https://graph.facebook.com/1931651176860800/picture?type=large", "display_name": "Dmytro Mysak", "link": "https://stackoverflow.com/users/8054597/dmytro-mysak"}, "is_accepted": false, "score": 0, "last_activity_date": 1564675195, "creation_date": 1564675195, "answer_id": 57312922, "question_id": 57297551, "link": "https://stackoverflow.com/questions/57297551/sequelize-query-table-by-column-and-associated-records-column/57312922#57312922", "title": "Sequelize query table by column and associated record&#39;s column", "body": "<p>Try to update through to this one:</p>\n\n<pre><code>through: { model: DB.AlbumArtists // write correct model name }\n</code></pre>\n\n<p>And also yo can simplify where condition:</p>\n\n<pre><code>where: { artistId: albumArtists }\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 7977846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64c6599c7f988bc4d075d263dfeeed83?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/7977846/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 14, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564675195, "creation_date": 1564600619, "question_id": 57297551, "link": "https://stackoverflow.com/questions/57297551/sequelize-query-table-by-column-and-associated-records-column", "title": "Sequelize query table by column and associated record&#39;s column", "body": "<p>I am trying to query for music albums that are associated with an exact amount of artists.</p>\n\n<p>I am correctly associating the models using a many-to-many table but my query is failing to do what I'd like it to do. </p>\n\n<pre><code>    albumArtists = albumArtists.map((artist) =&gt; {\n        return artist.id;\n    });\n\n   const album = await DB.Album.findOne({\n        where: {\n            name: albumName,\n        },\n        include: [\n            {\n                model: DB.Artist,\n                through: {\n                    where: {\n                        artistId: {\n                            [Op.and]: albumArtists\n                        }\n                    }\n                }\n            },\n        ],\n    });\n</code></pre>\n\n<p>I am trying to query for an album with <code>name</code> set to <code>albumName</code> and has associated <code>albumArtists</code> with <code>artistId</code> matching all in <code>albumArtists</code>.</p>\n\n<p>I tried setting my <code>where</code> clause outside of the <code>through</code> object but that didn't seem to work either.</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 1768, "user_id": 5031771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001177430983/picture?type=large", "display_name": "Wilhelm Olejnik", "link": "https://stackoverflow.com/users/5031771/wilhelm-olejnik"}, "edited": false, "score": 0, "creation_date": 1564607591, "post_id": 57297674, "comment_id": 101091755, "body": "Dude, you&#39;re like typescript equivalent of unbeatable video game boss. Thanks a lot."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 1768, "user_id": 5031771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001177430983/picture?type=large", "display_name": "Wilhelm Olejnik", "link": "https://stackoverflow.com/users/5031771/wilhelm-olejnik"}, "edited": false, "score": 0, "creation_date": 1564607768, "post_id": 57297674, "comment_id": 101091816, "body": "@WilhelmOlejnik \ud83d\ude02 That is a fresh title you gave me. Thanks \ud83d\ude09"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1564601467, "last_edit_date": 1564601467, "creation_date": 1564601146, "answer_id": 57297674, "question_id": 57297461, "link": "https://stackoverflow.com/questions/57297461/require-at-least-one-property-of-given-type/57297674#57297674", "title": "Require at least one property of given type", "body": "<p>Not sure we can do better than a custom error. We can force a type error on the parameter using a conditional type if the union of values in the type (<code>T[keyof T]</code>) does not contain <code>FootballService</code></p>\n\n<pre><code>class FootballService {\n  getMatches() { return [] }\n}\n\nfunction defineMatchesOnComponent&lt;T&gt;(component: T &amp; (FootballService extends T[keyof T] ? {} : \"No FootballService property was defined\")) {\n   /* */\n}\n\nclass ComponentA {\n  constructor(public footballService: FootballService, public otherProp: string) {}\n}\n\nclass ComponentB {\n  constructor(public whateverNameYouWant: FootballService, public otherProp: number) {}\n}\n\nclass ComponentC {\n  constructor(public otherProp: boolean) {}\n}\n\nconst a = new ComponentA(new FootballService(), 'xd');\nconst b = new ComponentB(new FootballService(), 2);\nconst c = new ComponentC(true);\n\n\ndefineMatchesOnComponent(a); // should be ok\ndefineMatchesOnComponent(b); // should be ok\ndefineMatchesOnComponent(c); // should be type error\n</code></pre>\n"}], "owner": {"reputation": 1768, "user_id": 5031771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001177430983/picture?type=large", "display_name": "Wilhelm Olejnik", "link": "https://stackoverflow.com/users/5031771/wilhelm-olejnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57297674, "answer_count": 1, "score": 1, "last_activity_date": 1564601467, "creation_date": 1564600218, "question_id": 57297461, "link": "https://stackoverflow.com/questions/57297461/require-at-least-one-property-of-given-type", "title": "Require at least one property of given type", "body": "<p>consider the following code</p>\n\n<pre><code>class FootballService {\n  getMatches() { return [] }\n}\n\nfunction defineMatchesOnComponent(component: X) {\n  component.matches = Object.values(component)\n    .find(property =&gt; property instanceof FootballService)\n    .getMatches();\n}\n\nclass ComponentA {\n  constructor(public footballService: FootballService, public otherProp: string) {}\n}\n\nclass ComponentB {\n  constructor(public whateverNameYouWant: FootballService, public otherProp: number) {}\n}\n\nclass ComponentC {\n  constructor(public otherProp: string) {}\n}\n\nconst a = new ComponentA(new FootballService(), 'xd');\nconst b = new ComponentB(new FootballService(), 2);\nconst c = new ComponentC(true);\n\n</code></pre>\n\n<p>is it possible to define such type <code>X</code> that the following will happen:</p>\n\n<pre><code>defineMatchesOnComponent(a); // should be ok\ndefineMatchesOnComponent(b); // should be ok\ndefineMatchesOnComponent(c); // should be type error\n</code></pre>\n\n<p>In other words is it possible to require at least one property but it may have any name ?</p>\n\n<p>demo: <a href=\"https://stackblitz.com/edit/typescript-fekr1o\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/typescript-fekr1o</a></p>\n"}, {"tags": ["reactjs", "typescript", "redux", "jestjs", "enzyme"], "comments": [{"owner": {"reputation": 521, "user_id": 9645113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WiM4X.jpg?s=128&g=1", "display_name": "Prabhat Mishra", "link": "https://stackoverflow.com/users/9645113/prabhat-mishra"}, "edited": false, "score": 0, "creation_date": 1564598854, "post_id": 57297011, "comment_id": 101088403, "body": "try <code>mount</code> instead of <code>shallow</code> <a href=\"https://airbnb.io/enzyme/docs/api/mount.html\" rel=\"nofollow noreferrer\">airbnb.io/enzyme/docs/api/mount.html</a>"}, {"owner": {"reputation": 13, "user_id": 11865599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aebc70ab01e253bdb338fe86762e39d?s=128&d=identicon&r=PG&f=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/11865599/jasmine"}, "reply_to_user": {"reputation": 521, "user_id": 9645113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WiM4X.jpg?s=128&g=1", "display_name": "Prabhat Mishra", "link": "https://stackoverflow.com/users/9645113/prabhat-mishra"}, "edited": false, "score": 0, "creation_date": 1564604074, "post_id": 57297011, "comment_id": 101090479, "body": "Tried already, does not work. Do I have to use dive?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 11675191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a90e4c425eb05749ce3e62c9cb8c4e?s=128&d=identicon&r=PG&f=1", "display_name": "mda_lyon", "link": "https://stackoverflow.com/users/11675191/mda-lyon"}, "is_accepted": true, "score": 1, "last_activity_date": 1564868035, "last_edit_date": 1592644375, "creation_date": 1564696502, "answer_id": 57317456, "question_id": 57297011, "link": "https://stackoverflow.com/questions/57297011/how-to-access-app-components-with-jest-when-using-redux-container/57317456#57317456", "title": "How to access App components with Jest when using Redux container?", "body": "<p>Here is the Redux documentation that should help you:</p>\n<blockquote>\n<p>In a unit test, you would normally import the App component like this:</p>\n</blockquote>\n<pre><code>import App from './App'\n</code></pre>\n<blockquote>\n<p>However, when you import it, you're actually holding the wrapper component returned by connect(), and not the App component itself. If you want to test its interaction with Redux, this is good news: you can wrap it in a  with a store created specifically for this unit test. But sometimes you want to test just the rendering of the component, without a Redux store.</p>\n<p>In order to be able to test the App component itself without having to deal with the decorator, we recommend you to also export the undecorated component:</p>\n</blockquote>\n<pre><code>import { connect } from 'react-redux'\n\n// Use named export for unconnected component (for tests)\nexport class App extends Component {\n  /* ... */\n}\n\n// Use default export for the connected component (for app)\nexport default connect(mapStateToProps)(App)\n</code></pre>\n<blockquote>\n<p>Since the default export is still the decorated component, the import statement pictured above will work as before so you won't have to change your application code. However, you can now import the undecorated App components in your test file like this:</p>\n</blockquote>\n<pre><code>// Note the curly braces: grab the named export instead of default export\nimport { App } from './App'\n</code></pre>\n<blockquote>\n<p>And if you need both:</p>\n</blockquote>\n<pre><code>import ConnectedApp, { App } from './App'\n</code></pre>\n<p>More at <a href=\"https://redux.js.org/recipes/writing-tests\" rel=\"nofollow noreferrer\">https://redux.js.org/recipes/writing-tests</a></p>\n"}], "owner": {"reputation": 13, "user_id": 11865599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aebc70ab01e253bdb338fe86762e39d?s=128&d=identicon&r=PG&f=1", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/11865599/jasmine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57317456, "answer_count": 1, "score": 1, "last_activity_date": 1564868035, "creation_date": 1564598105, "last_edit_date": 1564598825, "question_id": 57297011, "link": "https://stackoverflow.com/questions/57297011/how-to-access-app-components-with-jest-when-using-redux-container", "title": "How to access App components with Jest when using Redux container?", "body": "<p>I am having some trouble testing components inside App because I am only exporting AppContainer.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const ConnectedApp = connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nconst AppContainer = () =&gt; (\r\n  &lt;Provider store={clearanceStore}&gt;\r\n    &lt;ConnectedApp /&gt;\r\n  &lt;/Provider&gt;\r\n);\r\n\r\nexport default AppContainer;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>How do I test components inside App's return()? This is what I have for a test now which gives an error: Method \u201csimulate\u201d is meant to be run on 1 node. 0 found instead.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>test('setSubmit triggered when clicking submit button', () =&gt; {\r\n    const setSubmit = jest.fn();\r\n    const wrapper = shallow(&lt;App /&gt;);\r\n    const button = wrapper.find('#something');\r\n    button.simulate('click');\r\n    expect(setSubmit).toHaveBeenCalled();\r\n  });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["html", "typescript", "angular-material", "materialize", "angular8"], "comments": [{"owner": {"reputation": 13080, "user_id": 9226213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d9b1e59fd7fb8bc106b44b337ce5d83?s=128&d=identicon&r=PG&f=1", "display_name": "G. Tranter", "link": "https://stackoverflow.com/users/9226213/g-tranter"}, "edited": false, "score": 0, "creation_date": 1564601561, "post_id": 57296992, "comment_id": 101089528, "body": "Use <code>form.value</code> (without the &#39;s&#39;). Also bind the select with <code>ngModel</code> instead of <code>value</code>: <code>&lt;mat-select ([ngModel])=&quot;opcEscolhidas&quot; multiple&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 3158369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f22ba7585d664567a0213c96d34707f?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Singla", "link": "https://stackoverflow.com/users/3158369/deepak-singla"}, "is_accepted": false, "score": 1, "last_activity_date": 1564609698, "creation_date": 1564609698, "answer_id": 57299251, "question_id": 57296992, "link": "https://stackoverflow.com/questions/57296992/can-i-get-values-from-a-dynamically-created-multiple-select-element/57299251#57299251", "title": "Can I get values from a dynamically created multiple select element?", "body": "<p>You need to bind ngModel to the control. Go through this video,</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=hAaoPOx_oIw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=hAaoPOx_oIw</a></p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 3158369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f22ba7585d664567a0213c96d34707f?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Singla", "link": "https://stackoverflow.com/users/3158369/deepak-singla"}, "is_accepted": false, "score": 0, "last_activity_date": 1565285072, "creation_date": 1565285072, "answer_id": 57417850, "question_id": 57296992, "link": "https://stackoverflow.com/questions/57296992/can-i-get-values-from-a-dynamically-created-multiple-select-element/57417850#57417850", "title": "Can I get values from a dynamically created multiple select element?", "body": "<p>Try this </p>\n\n<pre><code>&lt;select\n                      class=\"custom-select\"\n                      name=\"overallRating\"\n                      [ngModel]=\"inspectionGeneralInfo?.OverallRating\"&gt;\n                      &lt;option [value]=\"-1\"&gt;\n                        Select a rating\n                      &lt;/option&gt;\n                      &lt;option \n                        *ngFor=\"let orc of inspectionGeneralInfo?.OverallRatingChoices\"\n                         [value]=\"orc.AnswerCode\"&gt;\n                        {{orc.AnswerDescription}}\n                      &lt;/option&gt;\n              &lt;/select&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8949066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631f949fe7cb47ba0a20dbe8f42d2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Thalys Menezes", "link": "https://stackoverflow.com/users/8949066/thalys-menezes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565285072, "creation_date": 1564598026, "last_edit_date": 1564600656, "question_id": 57296992, "link": "https://stackoverflow.com/questions/57296992/can-i-get-values-from-a-dynamically-created-multiple-select-element", "title": "Can I get values from a dynamically created multiple select element?", "body": "<p>Can I get values from a dynamically created multiple select element?\nI have fixed categories of products which I intend to load dynamically from an API. Each one of those categories has an array with the options I want to be able to select. I'm stuck with it, I cant retrieve the selected values, and I recently read something that says that we can't get the selected values from a dynamically created select with angular-material. Is that true?</p>\n\n<p>I've tried getting the elements by id using jQuery and have tried multiple ways of getting the selected values.</p>\n\n<p>On my menu-service, which I didn't show, I print form.values but it is empty'; it should contain the selected options, or the opcEscolhidas array should contain the selected values.</p>\n\n<p>Here is my template:</p>\n\n<pre><code>&lt;div id=\"main\" class=\"row\"&gt;\n  &lt;h2&gt;Selecione os itens do Card\u00e1pio&lt;/h2&gt;\n\n  &lt;form (submit)=\"onCreateMenu(form)\" #form=\"ngForm\" id=\"items-form\"&gt;\n    &lt;ul class=\"collapsible\" data-collapsible=\"accordion\"&gt; \n      &lt;li *ngFor=\"let categoria of categorias\"&gt;\n        &lt;div class=\"collapsible-header\"&gt;{{categoria.nome}}&lt;/div&gt;\n        &lt;div class=\"collapsible-body\"&gt;\n          &lt;div class=\"opGroup\"&gt;\n            &lt;mat-form-field&gt;\n              &lt;mat-label&gt;{{categoria.nome}}&lt;/mat-label&gt;\n              &lt;mat-select ([value])=\"opcEscolhidas\" multiple&gt;\n                &lt;mat-option *ngFor=\"let opcao of categoria.opcoes\" [value]=\"opcao\"&gt;{{opcao}}&lt;/mat-option&gt;\n              &lt;/mat-select&gt;\n            &lt;/mat-form-field&gt;                   \n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;button type=\"submit\" class=\"btn\"&gt;Montar Card\u00e1pio&lt;/button&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and here is my component:</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\n// import * as $ from 'jquery';\nimport { FormControl } from '@angular/forms';\nimport { MenuService } from '../menu.service';\nimport { NgForm } from '@angular/forms';\n\n\n\n@Component({\n  selector: 'app-create-menu',\n  templateUrl: './create-menu.component.html',\n  styleUrls: ['./create-menu.component.css']\n})\nexport class CreateMenuComponent implements OnInit {\n  // feijao = \"\";\n  // arroz = \"\";\n  // macarrao = \"\";\n  // carne = \"\";\n  // acomp = \"\";\n  // salada = \"\";\n\n  opcEscolhidas = [];\n\n  categorias = [\n    {\n      \"id\":1,\n      \"nome\":\"Feij\u00e3o\",\n      \"opcoes\": [\"Carioca\", \"Preto\", \"Verde\", \"Macassa\"]\n    },\n    {\n      \"id\":2,\n      \"nome\":\"Arroz\",\n      \"opcoes\": [\"Branco\", \"Refogado\", \"Integral\"]\n    },\n    {\n      \"id\":3,\n      \"nome\":\"Macarr\u00e3o\",\n      \"opcoes\": [\"Alho e \u00d3leo\", \"Molho de tomate\", \"Manteiga e \ncebola\", \"Molho branco\"]\n    },\n    {\n      \"id\":4,\n      \"nome\":\"Carne\",\n      \"opcoes\": [\"Bisteca/porco\", \"Carne de sol\", \"Peito de \n frango\", \"Coxa de frango\"]\n    },\n    {\n      \"id\":5,\n      \"nome\":\"Acompanhamentos\",\n      \"opcoes\": [\"Pur\u00ea\", \"Farofa\", \"Vinagrete\", \"Batata frita\"]\n    },\n    {\n      \"id\":6,\n      \"nome\":\"Salada\",\n      \"opcoes\": [\"Alface\", \"Tomate\", \"R\u00facula\", \"Repolho\"]\n    }\n  ];\n\n  public menuService;\n\n  constructor(menuService: MenuService) { \n    this.menuService = menuService;\n  }\n\n  ngOnInit() {\n  }\n\n  onCreateMenu(form: NgForm) {\n    this.menuService.createMenu(form);\n  }\n</code></pre>\n\n<p>On my menu-service, which I didnt show, I print form.values, but it is empty, and it should contain the selected options. Or my \"opcEscolhidas\" array should contain the selected values.<strong>strong text</strong></p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 2, "creation_date": 1564597061, "post_id": 57296621, "comment_id": 101087613, "body": "<code>id: number;</code> does not add an <code>id</code> property to your <code>personFilter</code> object; it merely tells TypeScript that it should be prepared to allow an <code>id</code> property to be set to a <code>number</code> on any object typed as <code>PersonFilter</code> at some point."}, {"owner": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1564599374, "post_id": 57296621, "comment_id": 101088633, "body": "Suggestions: <code>fromObject</code> should be static. <code>this[k]=k</code> should be <code>this[k]=v</code>. <code>filterData: {}</code> should be <code>filterData = {}</code>."}, {"owner": {"reputation": 426, "user_id": 2494723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72bf0cccad6e2dd58f5be3bbbfd25be5?s=128&d=identicon&r=PG", "display_name": "JohnSmith", "link": "https://stackoverflow.com/users/2494723/johnsmith"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1564638542, "post_id": 57296621, "comment_id": 101098111, "body": "@HereticMonkey thx, I gave them defaults and it worked."}, {"owner": {"reputation": 426, "user_id": 2494723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72bf0cccad6e2dd58f5be3bbbfd25be5?s=128&d=identicon&r=PG", "display_name": "JohnSmith", "link": "https://stackoverflow.com/users/2494723/johnsmith"}, "reply_to_user": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1564638667, "post_id": 57296621, "comment_id": 101098162, "body": "@NinoFiliu <code>fromObject</code> cannot be static. <code>this[k] = k</code> was typo. <code>filterData</code> - I want to type-declare, not to default."}], "answers": [{"tags": [], "owner": {"reputation": 1927, "user_id": 82242, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mpEv0.jpg?s=128&g=1", "display_name": "Bradley", "link": "https://stackoverflow.com/users/82242/bradley"}, "is_accepted": true, "score": 0, "last_activity_date": 1564606950, "creation_date": 1564606950, "answer_id": 57298791, "question_id": 57296621, "link": "https://stackoverflow.com/questions/57296621/check-for-child-object-property-existence/57298791#57298791", "title": "Check for child object property existence", "body": "<p>First, <code>id:number</code> doesn't assign a value, it types it.</p>\n\n<p>If you use typescriptlang.org/playground you can see your <code>PersonFilter</code> class compile to:</p>\n\n<pre><code>// typescript\nclass PersonFilter extends BaseFilter {\n    id: number;\n    name: string;\n\n    constructor() {\n        super();\n    }\n}\n\n// compiled javascript\nclass PersonFilter extends BaseFilter {\n    constructor() {\n        super();\n    }\n}\n</code></pre>\n\n<p>Notice that there is no variable assignments, id and name properties just don't exist. With the compilerOption \"strictNullChecks\" set to true, your code will produce a compile error. Now, if you assign default properties to these, you'll get their assignments:</p>\n\n<pre><code>// typescript\nclass PersonFilter extends BaseFilter {\n    public id: number = undefined;\n    public name: string = undefined;\n\n    constructor() {\n        super();\n    }\n}\n\n// compiled javascript\nclass PersonFilter extends BaseFilter {\n    constructor() {\n        super();\n        this.id = undefined;\n        this.name = undefined;\n    }\n}\n</code></pre>\n\n<p>The above accomplishes what you're after. However, it's not ideal. Ideal is making use of interfaces.</p>\n\n<pre><code>abstract class BaseFilter {\n\n    constructor() {\n        // do nothing\n    }\n\n    protected fromObject(filterData: {}): BaseFilter {\n        return Object.assign( this, filterData );\n    }\n}\n\ninterface IPersonData {\n    id: number;\n    name: string;\n}\n\nclass PersonFilter extends BaseFilter implements IPersonData {\n\n    id: number;\n    name: string;\n\n    constructor() {\n        super();\n    }\n\n    fromObject( filterData:IPersonData ): PersonFilter {\n        return super.fromObject( filterData ) as PersonFilter;\n    }\n\n}\n</code></pre>\n\n<p>In this solution, we're filtering the properties by the input type while still reusing the \"fromObject\" logic. By managing the input, we can completely skip the checking altogether.</p>\n"}], "owner": {"reputation": 426, "user_id": 2494723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72bf0cccad6e2dd58f5be3bbbfd25be5?s=128&d=identicon&r=PG", "display_name": "JohnSmith", "link": "https://stackoverflow.com/users/2494723/johnsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57298791, "answer_count": 1, "score": 1, "last_activity_date": 1564606950, "creation_date": 1564596314, "question_id": 57296621, "link": "https://stackoverflow.com/questions/57296621/check-for-child-object-property-existence", "title": "Check for child object property existence", "body": "<p>I am trying to create base class which checks if child class has property:</p>\n\n<pre><code># base-filter.ts\nexport abstract class BaseFilter {\n    constructor(\n    ) {\n    }\n\n    fromObject(filterData: {}, throwOnInvalid = true): BaseFilter {\n        for (const [k, v] of Object.entries(filterData)) {\n            if (!(k in this)) {\n                if (throwOnInvalid) {\n                    throw new Error('Filter key ' + k + ' does not exist');\n                }\n            } else {\n                this[k] = k;\n            }\n        }\n\n        return this;\n    }\n}\n\n# person-filter.ts\nimport { BaseFilter } from './base-filter';\n\nexport class PersonFilter extends BaseFilter {\n    id: number;\n    name: string;\n\n    constructor() {\n        super();\n    }\n}\n</code></pre>\n\n<p>Now setting values:</p>\n\n<pre><code>const personFilter = new PersonFilter();\npersonFilter.fromObject({\n    id: 1,\n    foo: 'ahv'\n});\n</code></pre>\n\n<p>'id' should pass, 'foo' should throw error. But both throw errors.</p>\n\n<p>I have tried also following, no cigar.</p>\n\n<pre><code>if (!this.hasOwnProperty(k))\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "ngrx"], "comments": [{"owner": {"reputation": 3094, "user_id": 2928077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c03196d02378b54f173c2f56b61e817?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy.Chernobrivets", "link": "https://stackoverflow.com/users/2928077/yevgeniy-chernobrivets"}, "edited": false, "score": 0, "creation_date": 1564595513, "post_id": 57296201, "comment_id": 101086953, "body": "Where do you inject services in your effects?"}, {"owner": {"reputation": 1020, "user_id": 5286203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8739ffea2ce743dcabf44c70c9011e9f?s=128&d=identicon&r=PG&f=1", "display_name": "Flignats", "link": "https://stackoverflow.com/users/5286203/flignats"}, "reply_to_user": {"reputation": 3094, "user_id": 2928077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c03196d02378b54f173c2f56b61e817?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy.Chernobrivets", "link": "https://stackoverflow.com/users/2928077/yevgeniy-chernobrivets"}, "edited": false, "score": 0, "creation_date": 1564595911, "post_id": 57296201, "comment_id": 101087125, "body": "@Yevgeniy.ChernobrivetsUpdated the guilds.effects.ts with its constructor and added the guilds.state.ts code"}], "answers": [{"comments": [{"owner": {"reputation": 1020, "user_id": 5286203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8739ffea2ce743dcabf44c70c9011e9f?s=128&d=identicon&r=PG&f=1", "display_name": "Flignats", "link": "https://stackoverflow.com/users/5286203/flignats"}, "edited": false, "score": 0, "creation_date": 1564596803, "post_id": 57296580, "comment_id": 101087493, "body": "That was it! I thought that since the guild state extended the AppState that it would have been accessible - but I guess not"}], "tags": [], "owner": {"reputation": 3094, "user_id": 2928077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c03196d02378b54f173c2f56b61e817?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy.Chernobrivets", "link": "https://stackoverflow.com/users/2928077/yevgeniy-chernobrivets"}, "is_accepted": true, "score": 2, "last_activity_date": 1564596108, "creation_date": 1564596108, "answer_id": 57296580, "question_id": 57296201, "link": "https://stackoverflow.com/questions/57296201/ngrx-effect-withlatestfrom-typescript-error-ts2345-troubleshooting/57296580#57296580", "title": "NGRX Effect withLatestFrom Typescript error ts2345 troubleshooting", "body": "<p>You are using wrong store - you injected in your effects <code>Store&lt;State&gt;</code> where <code>State</code> is guild state and of course user selectors won't work on it. You need to inject Store with User state and use it instead. </p>\n"}], "owner": {"reputation": 1020, "user_id": 5286203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8739ffea2ce743dcabf44c70c9011e9f?s=128&d=identicon&r=PG&f=1", "display_name": "Flignats", "link": "https://stackoverflow.com/users/5286203/flignats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "accepted_answer_id": 57296580, "answer_count": 1, "score": 1, "last_activity_date": 1564596108, "creation_date": 1564594362, "last_edit_date": 1564595888, "question_id": 57296201, "link": "https://stackoverflow.com/questions/57296201/ngrx-effect-withlatestfrom-typescript-error-ts2345-troubleshooting", "title": "NGRX Effect withLatestFrom Typescript error ts2345 troubleshooting", "body": "<p>I'm not sure how to continue troubleshooting this ts2345 error and could use some help with understanding its cause.</p>\n\n<p>Error Detail</p>\n\n<blockquote>\n  <p>Argument of type '(source$: Observable) => Observable' is not assignable to parameter of type 'OperatorFunction'.</p>\n  \n  <p>Types of parameters 'source$' and 'source' are incompatible.</p>\n  \n  <p>import(\"c:/Users/Flignats/Documents/GitHub/reqloot/node_modules/rxjs/internal/Observable\").Observable' is not assignable to type 'import(\"c:/Users/Flignats/Documents/GitHub/reqloot/node_modules/rxjs/internal/Observable\").Observable'.</p>\n  \n  <p>Property 'user' is missing in type 'import(\"c:/Users/Flignats/Documents/GitHub/reqloot/src/app/modules/guilds/guilds.state\").State' but required in type 'import(\"c:/Users/Flignats/Documents/GitHub/reqloot/src/app/modules/user/user.state\").State'.ts(2345)</p>\n  \n  <p>user.state.ts(19, 3): 'user' is declared here.</p>\n</blockquote>\n\n<p>This is my effect file in the 'guilds' feature</p>\n\n<p>guilds.effects.ts</p>\n\n<pre><code>import { IPrivateGuildDetails } from './guilds.model';\nimport { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { ROUTER_NAVIGATION, RouterNavigationAction } from '@ngrx/router-store';\nimport { Actions, ofType, createEffect } from '@ngrx/effects';\nimport { of } from 'rxjs';\nimport {\n    map,\n    mergeMap,\n    catchError,\n    withLatestFrom,\n    switchMap,\n    tap,\n    filter\n} from 'rxjs/operators';\n// Core\nimport * as fromCore from '../../core';\nimport * as fromAuth from '../../core/auth/auth.selectors';\nimport * as fromUser from '../user/user.selectors';\n// Key\nexport const GUILDS_KEY = 'GUILDS';\n// State\nimport { State, selectGuilds } from './guilds.state';\n// Actions\nimport {\n    createGuild,\n    createGuildSuccess,\n    createGuildFailure,\n    loadPublicGuilds,\n    loadPublicGuildsSuccess,\n    loadPublicGuildsFailure,\n    loadTriggerStatusCreateGuild,\n    loadTriggerStatusCreateGuildFailure,\n    loadTriggerStatusCreateGuildSuccess,\n    selectPublicGuild,\n    loadPublicGuild,\n    loadPublicGuildSuccess,\n    loadPublicGuildFailure,\n    loadMyGuild,\n    loadMyGuildSuccess,\n    loadMyGuildFailure\n} from './guilds.actions';\n\n@Injectable()\nexport class GuildsEffects {\n    loadMyGuild$ = createEffect(() =&gt;\n        this.actions$.pipe(\n            ofType(loadMyGuild),\n            withLatestFrom(this.store.pipe(select(fromUser.selectUserAccountDetails))),\n            switchMap(([action, user]) =&gt;\n                this.afs.loadMyGuild(user).pipe(\n                    map((result: IPrivateGuildDetails) =&gt; loadMyGuildSuccess({ myGuild: result })),\n                    catchError(error =&gt; of(loadMyGuildFailure({ error })))\n                )\n            )\n        )\n    );\n\n    loadTriggerStatusCreateGuild$ = createEffect(() =&gt;\n        this.actions$.pipe(\n            ofType(loadTriggerStatusCreateGuild),\n            withLatestFrom(this.store.pipe(select(fromAuth.selectUid))),\n            mergeMap(([action, uid]) =&gt;\n                this.afs.getTriggerStatusCreateNewGuild(uid).pipe(\n                    map(triggerStatus =&gt;\n                        loadTriggerStatusCreateGuildSuccess({ triggerStatus })\n                    ),\n                    catchError(error =&gt;\n                        of(loadTriggerStatusCreateGuildFailure({ error }))\n                    )\n                )\n            )\n        )\n    );\n\n  constructor(\n    private actions$: Actions,\n    private afs: fromCore.FirestoreService,\n    private localStorageService: fromCore.LocalStorageService,\n    private router: Router,\n    private store: Store&lt;State&gt;\n  ) {}\n    }\n</code></pre>\n\n<p>guilds.state.ts</p>\n\n<pre><code>import { ActionReducerMap, createFeatureSelector } from '@ngrx/store';\nimport { AppState } from '@app/core';\n\nimport { guildsReducer } from './guilds.reducer';\nimport { GuildsStateDetails } from './guilds.model';\n\nexport const FEATURE_NAME = 'guilds';\n\nexport interface GuildsState {\n  state: GuildsStateDetails;\n};\n\nexport const reducers: ActionReducerMap&lt;GuildsState&gt; = {\n  state: guildsReducer\n};\n\nexport const selectGuilds = createFeatureSelector&lt;State, GuildsState&gt;(FEATURE_NAME);\n\nexport interface State extends AppState {\n  guilds: GuildsState;\n};\n</code></pre>\n\n<p>The error is produced in the <code>loadMyGuild$</code> withLatestFrom select fn</p>\n\n<p>The <code>loadTriggerStatusCreateGuild$</code> effect is using a select from the core module and it does not produce an error.</p>\n\n<p>If I update the <code>loadMyGuild$</code> withLatestFrom selector with a selector from the <code>Guilds</code> module, i.e. <code>selectGuilds</code> there is no error.</p>\n\n<p>I'm unsure what could be different in the <code>User</code> feature module that is causing this error when trying to use its selectors in the <code>Guilds</code> feature module.</p>\n\n<p>user.state.ts</p>\n\n<pre><code>import { ActionReducerMap, createFeatureSelector } from '@ngrx/store';\nimport { AppState } from '@app/core';\n\nimport { userReducer } from './user.reducer';\nimport { UserStateDetails } from './user.model';\n\nexport const FEATURE_NAME = 'user';\nexport const selectUser = createFeatureSelector&lt;State, UserState&gt;(FEATURE_NAME);\n\nexport const reducers: ActionReducerMap&lt;UserState&gt; = {\n  state: userReducer\n};\n\nexport interface UserState {\n  state: UserStateDetails;\n}\n\nexport interface State extends AppState {\n  user: UserState;\n}\n</code></pre>\n\n<p>user.selectors.ts</p>\n\n<pre><code>import { createSelector } from '@ngrx/store';\n\nimport { UserState, selectUser } from './user.state';\n\nexport const selectActiveUser = createSelector(\n  selectUser,\n  (state: UserState) =&gt; state.state\n);\n\nexport const selectUserAccountDetails = createSelector(\n  selectUser,\n  (state: UserState) =&gt; state.state.account\n);\n\nexport const selectUserLoading = createSelector(\n  selectUser,\n  (state: UserState) =&gt; state.state.loading\n);\n\nexport const selectUserError = createSelector(\n  selectUser,\n  (state: UserState) =&gt; state.state.error\n);\n</code></pre>\n\n<p>user.model.ts</p>\n\n<pre><code>import { HttpErrorResponse } from '@angular/common/http';\nimport { Timestamp } from '@firebase/firestore-types';\n\nexport interface IUser {\n  applixir?: {\n    lastWatchedAt?: Timestamp;\n    staminaLastGiven?: Timestamp;\n    totalAdsWatched?: number;\n    totalStaminaCollected?: number;\n    currentAdsTrackedCount: number;\n  };\n  balance: {\n    claimed: number;\n    unclaimed: number;\n  };\n  createdAt: Timestamp;\n  displayName?: string;\n  email: string;\n  fcmTokens?: { [token: string]: true };\n  guildDetails?: {\n    attacks: { [key: string]: number };\n    boosts: { [key: string]: { [key: string]: number } };\n    guildId: string;\n    guildTokensCollected: number;\n    guildTokensCollectedCount: number;\n    shield: { [key: string]: number };\n  };\n  referredBy?: string;\n  referredAt?: Timestamp;\n  stamina: number;\n  staminaLastGiven?: Timestamp;\n  subscriberStamina?: number;\n  subscriberStaminaLastGiven?: Timestamp;\n  uid: string;\n  updatedAt?: Timestamp;\n}\n\nexport interface UserStateDetails {\n  error: HttpErrorResponse | string;\n  loading: boolean;\n\n  account: IUser;\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "edited": false, "score": 2, "creation_date": 1564594080, "post_id": 57296133, "comment_id": 101086322, "body": "<i>Are angular services accessible form an async context?</i> Yes"}, {"owner": {"reputation": 3, "user_id": 6415198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28a2e30f5deba4bfea86fb1273c1fab?s=128&d=identicon&r=PG&f=1", "display_name": "A NASR", "link": "https://stackoverflow.com/users/6415198/a-nasr"}, "reply_to_user": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "edited": false, "score": 0, "creation_date": 1564594466, "post_id": 57296133, "comment_id": 101086490, "body": "But as I have shown above its not working out for me for some reason."}, {"owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "edited": false, "score": 0, "creation_date": 1564594498, "post_id": 57296133, "comment_id": 101086507, "body": "I already described why. Unbound <code>this</code> context."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1564599672, "post_id": 57296133, "comment_id": 101088762, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20279484/how-to-access-the-correct-this-inside-a-callback\">How to access the correct `this` inside a callback?</a>"}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1564604341, "post_id": 57296133, "comment_id": 101090574, "body": "just a suggestion, there&#39;s no reason to convert this to a promise. use the <code>.subsccribe</code> method of the observable and use the next / error handlers as needed"}, {"owner": {"reputation": 3, "user_id": 6415198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28a2e30f5deba4bfea86fb1273c1fab?s=128&d=identicon&r=PG&f=1", "display_name": "A NASR", "link": "https://stackoverflow.com/users/6415198/a-nasr"}, "edited": false, "score": 0, "creation_date": 1564604908, "post_id": 57296133, "comment_id": 101090771, "body": "Yea, I was trying to apply my understanding to promises. Thanks for the suggestion though."}], "answers": [{"tags": [], "owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "is_accepted": false, "score": 2, "last_activity_date": 1564594143, "creation_date": 1564594143, "answer_id": 57296148, "question_id": 57296133, "link": "https://stackoverflow.com/questions/57296133/are-angular-services-accessible-form-an-async-context/57296148#57296148", "title": "Are angular services accessible form an async context?", "body": "<p>Change this</p>\n\n<pre><code>this.http.get(..)toPromise().then( this.loginCallbackHandler )\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>this.http.get(..)toPromise().then( this.loginCallbackHandler.bind(this) )\n</code></pre>\n\n<p>clousures has no <code>this</code> context so you must bind it.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6415198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28a2e30f5deba4bfea86fb1273c1fab?s=128&d=identicon&r=PG&f=1", "display_name": "A NASR", "link": "https://stackoverflow.com/users/6415198/a-nasr"}, "edited": false, "score": 0, "creation_date": 1564602836, "post_id": 57297306, "comment_id": 101090033, "body": "Thank&#39;s that should be helpful."}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "reply_to_user": {"reputation": 3, "user_id": 6415198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28a2e30f5deba4bfea86fb1273c1fab?s=128&d=identicon&r=PG&f=1", "display_name": "A NASR", "link": "https://stackoverflow.com/users/6415198/a-nasr"}, "edited": false, "score": 0, "creation_date": 1564607411, "post_id": 57297306, "comment_id": 101091684, "body": "You&#39;re welcome. I updated the answer to include another alternative - async await."}], "tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": false, "score": 1, "last_activity_date": 1564607330, "last_edit_date": 1564607330, "creation_date": 1564599464, "answer_id": 57297306, "question_id": 57296133, "link": "https://stackoverflow.com/questions/57296133/are-angular-services-accessible-form-an-async-context/57297306#57297306", "title": "Are angular services accessible form an async context?", "body": "<p>As already mentioned in some comments, the <code>this</code> context is not what you expect. Either use <code>.bind(this)</code> or use the lambda syntax.</p>\n\n<pre><code>clicked() {\n   this.http.get(..)\n      .toPromise()\n      .then(response =&gt; this.loginCallbackHandler(response))\n      .catch(error =&gt; console.log(error));\n}\n</code></pre>\n\n<p>I'd recommend reading up on how <code>this</code> context behaves in JavaScript (and therefore in TypeScript). <a href=\"https://blog.pragmatists.com/the-many-faces-of-this-in-javascript-5f8be40df52e\" rel=\"nofollow noreferrer\">This would be a good start.</a></p>\n\n<p>On another note, you could also use async/await if you want to use promises. </p>\n\n<pre><code>async clicked() {\n   try {\n      const response = await this.http.get(..).toPromise();\n      this.loginCallbackHandler(response) ;\n   } catch (error) {\n      console.log(error);\n   } \n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6415198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28a2e30f5deba4bfea86fb1273c1fab?s=128&d=identicon&r=PG&f=1", "display_name": "A NASR", "link": "https://stackoverflow.com/users/6415198/a-nasr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564607330, "creation_date": 1564594043, "last_edit_date": 1564604153, "question_id": 57296133, "link": "https://stackoverflow.com/questions/57296133/are-angular-services-accessible-form-an-async-context", "title": "Are angular services accessible form an async context?", "body": "<p>So, I have been trying access my services inside a promise callback.\nI have added all necessary modules and imported them into my file.\nI have also declared them in the constructor.</p>\n\n<pre><code>//This is part of my login Component Class and this line code is bound to a //button click\n\nclicked(){\nthis.http.get(..)toPromise().then( this.loginCallbackHandler ).catch((error) =&gt; console.log(error));\n      //any service accessed here works fine example\n      console.log(this.app)// this is fine here\n}\n//\nloginCallbackHandler(reponse){\n      //accessing any service from here produces the the error below (error1)\n      //For example\n      console.log(this.html)\n      //Or\n      console.log(this.app)\n}\n//constructor definition\n  constructor(@Host() public app: AppComponent,\n              private oauthService: OAuthService,\n              private http: HttpClient\n              ){}\n\n//Error1\n\nERROR Error: Uncaught (in promise): TypeError: Cannot read property 'html' of undefined\nTypeError: Cannot read property 'html' of undefined\n    at push../src/app/login/login.page.ts.LoginPage.loginCallbackHandler (login.page.ts:64)\n    at \n</code></pre>\n\n<p>Edit:\nThe issue turned out to be an issue in my understanding to the context of the 'this' keyword, but not in angular services.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "redux", "react-redux"], "answers": [{"tags": [], "owner": {"reputation": 4819, "user_id": 11847125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be47a50b0a0c3b973a8602b84821db9?s=128&d=identicon&r=PG&f=1", "display_name": "azundo", "link": "https://stackoverflow.com/users/11847125/azundo"}, "is_accepted": false, "score": 0, "last_activity_date": 1564592645, "creation_date": 1564592645, "answer_id": 57295831, "question_id": 57295665, "link": "https://stackoverflow.com/questions/57295665/failed-prop-type-required-prop-types-are-undefined-in-my-redux-store/57295831#57295831", "title": "Failed prop type. Required prop types are undefined in my redux store", "body": "<p>mapStateToProps gets your root reducer state - so use state.content.open instead of state.open.</p>\n"}, {"comments": [{"owner": {"reputation": 102, "user_id": 9487755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f24e9c342242f1d664f663ffb0689c?s=128&d=identicon&r=PG&f=1", "display_name": "KFrancis", "link": "https://stackoverflow.com/users/9487755/kfrancis"}, "edited": false, "score": 0, "creation_date": 1564594094, "post_id": 57295841, "comment_id": 101086328, "body": "Ohh, I see now. This fixed my issue, thanks for explaining it out as well and the typescript tip."}], "tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": true, "score": 3, "last_activity_date": 1564592704, "creation_date": 1564592704, "answer_id": 57295841, "question_id": 57295665, "link": "https://stackoverflow.com/questions/57295665/failed-prop-type-required-prop-types-are-undefined-in-my-redux-store/57295841#57295841", "title": "Failed prop type. Required prop types are undefined in my redux store", "body": "<pre><code>const mapStateToProps = (state: any) =&gt; ({\n    open: state.open,\n})\n</code></pre>\n\n<p>in this function, <code>state</code> is the root state. Ie, the one produced by the rootReducer. This state looks like: </p>\n\n<pre><code>{\n  content: {\n    open: // some boolean\n  }\n}\n</code></pre>\n\n<p>So to access it, you need to do:</p>\n\n<pre><code>const mapStateToProps = (state: any) =&gt; ({\n    open: state.content.open,\n})\n</code></pre>\n\n<hr>\n\n<p>PS, since you're using typescript, you should be able to do better than <code>any</code> for the type. At the very least, you could do this:</p>\n\n<pre><code>// in the file with the root reducer:\nconst rootReducer = combineReducers({\n    content: ContentReducer\n});\nexport type RootState = ReturnType&lt;typeof rootReducer&gt;;\n\n// And then use it elsewhere like:\nconst mapStateToProps = (state: RootState) =&gt; ({\n    open: state.content.open,\n})\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 9487755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f24e9c342242f1d664f663ffb0689c?s=128&d=identicon&r=PG&f=1", "display_name": "KFrancis", "link": "https://stackoverflow.com/users/9487755/kfrancis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 57295841, "answer_count": 2, "score": 0, "last_activity_date": 1564592704, "creation_date": 1564591969, "question_id": 57295665, "link": "https://stackoverflow.com/questions/57295665/failed-prop-type-required-prop-types-are-undefined-in-my-redux-store", "title": "Failed prop type. Required prop types are undefined in my redux store", "body": "<p>So I'm learning react and redux and I get this error in the console whenever I load my page. I'm not sure what it means since my store should be connected properly (as far as I know, but obviously it's not).</p>\n\n<blockquote>\n  <p>Warning: Failed prop type: The prop <code>open</code> is marked as required in ><code>Navigation</code>, but its value is <code>undefined</code>.</p>\n</blockquote>\n\n<p>This is component (shortened to the key parts I think)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>Navigation.propTypes = {\n    open: PropTypes.bool.isRequired,\n};\n\nconst mapStateToProps = (state: any) =&gt; ({\n    open: state.open,\n})\n\nexport default connect(mapStateToProps, { shiftContent })(Navigation);\n</code></pre>\n\n<p>My action</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const shiftContent = (open: boolean) =&gt; {\n    return {\n        type: ContentTypes.SHIFT_CONTENT,\n        payload: open\n    }\n}\n</code></pre>\n\n<p>My Reducer:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const initialState = {\n    open: false,\n};\n\nexport default function(state = initialState, action: IAction) {\n    switch(action.type) {\n        case ContentTypes.SHIFT_CONTENT:\n            console.log(\"shifting Open = \" + action.payload);\n            return {\n                ...state,\n                open: action.payload\n            };\n        default:\n            return state;\n    }\n}\n</code></pre>\n\n<p>My combined reducer:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import ContentReducer from './ContentReducer';\n\nconst rootReducer = combineReducers({\n    content: ContentReducer\n});\n</code></pre>\n\n<p>And where I'm initializing my store:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import rootReducer from './Reducers';\n\nconst store = createStore(rootReducer);\n</code></pre>\n\n<p>I tried setting up an initial state for the store like:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const initialStore = {\n   open: false\n}\nconst store = createStore(rootReducer, initialStore);\n</code></pre>\n\n<p>But that gave me an error as well.</p>\n"}, {"tags": ["javascript", "typescript", "function", "ionic-framework"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6026447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c28e9eeec41b582076cfafd3265d7d4?s=128&d=identicon&r=PG", "display_name": "Riazbapoo", "link": "https://stackoverflow.com/users/6026447/riazbapoo"}, "edited": false, "score": 0, "creation_date": 1564589731, "post_id": 57295028, "comment_id": 101084364, "body": "Correct! thank you! I should&#39;ve asked for help 6 hours ago \ud83d\ude02 !"}], "tags": [], "owner": {"reputation": 208, "user_id": 5144809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PIsJmAbGJnc/AAAAAAAAAAI/AAAAAAAAABM/Ys1mb9e6Dr4/photo.jpg?sz=128", "display_name": "gaurav soni", "link": "https://stackoverflow.com/users/5144809/gaurav-soni"}, "is_accepted": true, "score": 1, "last_activity_date": 1564589482, "creation_date": 1564589482, "answer_id": 57295028, "question_id": 57294694, "link": "https://stackoverflow.com/questions/57294694/typescript-calling-function-at-random-intervals-in-ionic/57295028#57295028", "title": "typescript - calling function at random intervals in ionic", "body": "<p>Can you update your <code>setTimeout(this.myFunction, rand * 1000);</code> function to,</p>\n\n<pre><code>setTimeout(this.myFunction.bind(this), rand * 1000);\n</code></pre>\n\n<p>I believe the issue is related to <strong>this</strong> context.</p>\n"}, {"tags": [], "owner": {"reputation": 391, "user_id": 3855048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b780497343d7fe29e3766b7fc2ca5c7?s=128&d=identicon&r=PG&f=1", "display_name": "yashpatelyk", "link": "https://stackoverflow.com/users/3855048/yashpatelyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1564592944, "creation_date": 1564592944, "answer_id": 57295896, "question_id": 57294694, "link": "https://stackoverflow.com/questions/57294694/typescript-calling-function-at-random-intervals-in-ionic/57295896#57295896", "title": "typescript - calling function at random intervals in ionic", "body": "<p>You could do something like this,</p>\n\n<pre><code>changeStyle() {\n    ...\n    ...\n    const randomMilliSeconds = Math.floor( Math.random() * 10 ) * 1000;\n    setTimeout(() =&gt; {\n        this.changeStyle();\n    }, randomMilliSeconds) \n}\n</code></pre>\n\n<p>You just need to call changeStyle once, manually or using click event and it will call itself at random intervals.</p>\n"}], "owner": {"reputation": 61, "user_id": 6026447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c28e9eeec41b582076cfafd3265d7d4?s=128&d=identicon&r=PG", "display_name": "Riazbapoo", "link": "https://stackoverflow.com/users/6026447/riazbapoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57295028, "answer_count": 2, "score": 0, "last_activity_date": 1564592944, "creation_date": 1564588342, "question_id": 57294694, "link": "https://stackoverflow.com/questions/57294694/typescript-calling-function-at-random-intervals-in-ionic", "title": "typescript - calling function at random intervals in ionic", "body": "<p>I would like to repeatedly call the changeStyle() function at random intervals</p>\n\n<p>here is my code so far: </p>\n\n<pre><code>\n    this.platform.ready().then(() =&gt; {\n         this.myFunction()\n    });\n</code></pre>\n\n<pre><code>   myFunction() {\n     var min = 5,\n     max = 10;\n     var rand = Math.floor(Math.random() * (max - min + 1) + min); //Generate Random number between 5 - 10\n     this.changeStyle()\n     setTimeout(this.myFunction, rand * 1000);\n  }\n\n\n</code></pre>\n\n<pre><code>  changeStyle() {\n    console.log('changing style');\n    this.sensorImage = 'path/to/image1';\n    setTimeout(() =&gt; {\n      this.sensorImage = 'path/to/image2';\n    },\n      2000);\n  }\n</code></pre>\n\n<p>the relevant html code is</p>\n\n<pre><code>    &lt;img id='35' (click)=\"changeStyle()\" \n      src=\"{{sensorImage}}\"&gt;\n</code></pre>\n\n<p>ideally what this should do is call the changeStyle() function repeatedly and randomly without any input from me. however, I get a runtime error saying:</p>\n\n<p>'TypeError: this.changeStyle is not a function. (In 'this.changeStyle('')', 'this.changeStyle' is undefined)'</p>\n"}, {"tags": ["typescript", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 7159043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e529c6dcd750a5b915b797e88770ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7159043/chris"}, "edited": false, "score": 0, "creation_date": 1564602101, "post_id": 57295539, "comment_id": 101089762, "body": "Thanks @jcalz for your great example! The use of array indexes to &quot;simulate&quot; decreasing numbers is clever ;-) I&#39;ve amended the example (A2 was indeed wrong, stupid copy / paste error) and added an example for the method invocation part as requested.  I don&#39;t assume there will be anything better, but I&#39;ll hold off accepting your answer for a short while."}, {"owner": {"reputation": 152, "user_id": 7159043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e529c6dcd750a5b915b797e88770ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7159043/chris"}, "edited": false, "score": 0, "creation_date": 1564645419, "post_id": 57295539, "comment_id": 101101062, "body": "Great, thanks! I still don&#39;t quite seem to have wrapped my head around primitives as types, could have gotten that second part myself..."}, {"owner": {"reputation": 152, "user_id": 7159043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e529c6dcd750a5b915b797e88770ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7159043/chris"}, "edited": false, "score": 0, "creation_date": 1564645570, "post_id": 57295539, "comment_id": 101101129, "body": "One thing, though: I believe now your <code>Rec</code> does not deal with arrays of primitives correctly (there wasn&#39;t anything in my example, so my bad). I&#39;ve changed it, replacing <code>{ id: string }</code> with <code>T extends Primitive ? T : { id: string }</code> and all seems fine. Thanks again!"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1564620375, "last_edit_date": 1564620375, "creation_date": 1564591476, "answer_id": 57295539, "question_id": 57294314, "link": "https://stackoverflow.com/questions/57294314/typescript-omitting-object-levels-in-deep-object-types/57295539#57295539", "title": "Typescript: Omitting Object &quot;Levels&quot; in &quot;Deep&quot; Object Types", "body": "<p>To make your type definitions less repetitive I'd suggest something like this:</p>\n\n<pre><code>type PrevNum = [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];\n// lengthen as needed\n\nexport type RetainLevel&lt;N extends number, T&gt; = {\n  [P in keyof T]: T[P] extends infer TP\n    ? TP extends Primitive\n      ? TP\n      : TP extends any[] ? { [I in keyof TP]: Rec&lt;N, TP[I]&gt; } : Rec&lt;N, TP&gt;\n    : never\n};\n\ntype Rec&lt;N extends number, T&gt; = N extends 0\n  ? { id: string }\n  : RetainLevel&lt;PrevNum[N], T&gt;;\n</code></pre>\n\n<p>This allows you to specify types like <code>RetainLevel&lt;10, XXX&gt;</code> instead of <code>Retain10Level&lt;XXX&gt;</code>.  TypeScript doesn't really let you do type-level arithmetic, so there's no way to subtract one from an arbitrary number.  The <code>PrevNum</code> tuple is probably good enough, though; you can make it as long as whatever you deem the largest reasonable value people will ask for.</p>\n\n<hr>\n\n<p>Testing to see if this gives the types you've specified:</p>\n\n<pre><code>type MutuallyExtends&lt;T extends U, U extends V, V = T&gt; = true;\n\ntype A0 = RetainLevel&lt;0, A&gt;;\ntype A0Okay = MutuallyExtends&lt;A0, A0Manual&gt;; // okay\n\ntype A1 = RetainLevel&lt;1, A&gt;;\ntype A1Okay = MutuallyExtends&lt;A1, A1Manual&gt;; // okay\n</code></pre>\n\n<p>These look okay.</p>\n\n<pre><code>type A2 = RetainLevel&lt;2, A&gt;;\ntype A2Okay = MutuallyExtends&lt;A2, A2Manual&gt;; // error?\n</code></pre>\n\n<p>Looks like your <code>A2</code> type isn't the same as <code>RetainLevel&lt;2, A&gt;</code>.  Although I checked that your <code>Retain2Levels&lt;A&gt;</code> is the same as <code>RetainLevel&lt;2, A&gt;</code>, so I guess your code doesn't quite constitute a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum reproducible example</a>.  I'm going to assume it's okay.</p>\n\n<hr>\n\n<p>As for the casting part, please put an example of what you mean in your code, and then maybe I or someone else will be able to answer that.  If you mean that the number is passed in as a parameter, the above might help if you make the function generic in <code>N</code>, the type of that number.  Seems like a separate question, maybe, but you're the boss!</p>\n\n<p><strong>UPDATE</strong>: seeing your example for <code>getAs()</code>, yes, now that <code>RetainLevel</code> is generic in the number <code>N</code>, you can make <code>getAs()</code> generic also:</p>\n\n<pre><code>declare function getAs&lt;N extends number&gt;(levels: N): Array&lt;RetainLevel&lt;N, A&gt;&gt;;\n</code></pre>\n\n<p>This should work the way you want:</p>\n\n<pre><code>const a0s = getAs(0); // Array&lt;RetainLevel&lt;0, A&gt;&gt;, same as Array&lt;A0&gt;\nconst a1s = getAs(1); // Array&lt;RetainLevel&lt;1, A&gt;&gt;, same as Array&lt;A1&gt;\nconst a10s = getAs(10); // Array&lt;RetainLevel&lt;10, A&gt;&gt;;\n</code></pre>\n\n<hr>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgILIN4ChnOAEwC5kBnMKUAcwG4dkBHYsikGugI2ICFbcETiAYQDaAXVoBfLFlCRYiFF0x0CTclV7IADlAgA3bpoRDJ02dHhJkg5blWl1rTTAD2LtSza58A5ABExUxlwCwV-WzwiB09NCGIAUSDzeSt4iPtmDSwpLDAATy0UVAAGAFk4EABXOAAbZABedKjMpzpGaKzcTkxIjypkCSNfVCgoODyAHgxejtYBgD5JWlyCooBGcqrahqa+1tx2lq9kbuxcO2bHY9wdfWJpjKuBzT57maPnukG6fmIRscmZ3OjxidFwrncs2uyB8f1G4ym7yeEkWX1R3xWhTQACZNtU6o0gSDOgw9sdTmCkaDztpdAYIjTifsabS7j0mZRPizkMZ2ZdPFzzt8abygYz+SSaRCyS9zrC0PDAZTxTLledRVT+sKWSjZdrtb8FQCppSObLpVDZfL-gixcCJcyaXE+WTBbhdWiltJ8liAAoUAC2wDAwD0KHqdAAPlCo8gAGKVEAIEMuECxqoB9jQWPsNw1CAVWMkPKZlw1WOJ-AQGCgCD4dOVGo1ZY+lD+-QAOUqAZ2wgAtGsADTFQdD7GDgDMg4ALIOAKyDgBsg4A7IOAByDgCco5HayHa3Hayna1nawXa2XaxX4iwAHo78gIAAPSAgfDIOAkZAgCB1uvSC+WguFAYDIK2yAAEoQGAcCgAAMvoEA1BMHZPq+EDvt+GZZlAg7IAAKvMOx2sIvp4CAyAANYQHkLgwIRojEARZGiOhb4+BRMDQIRvpqgA-Lx7GYZx-rAEGIZhmquCCQRfHcrgzHkS+HHfhUeRiMggnTMIACSFHUbR9G8UxUEQAgqH4XJemiMREjIMQ0EWR2Vm+vMarEL+YZQF80iYigTmocJWE-t2uFWcRjRoSpInfsUdDaZqcxSIpZmwQhSEoe2ehdgGwgdqIEXLFWCA1HAujIDAibJsAqbIJQMGoCQQUxSFOHQPMAAU+ZhjUvgdgAlHCxrQelICIb1lloPMqJYAgqZkJ+xTfo0DVgE1nXFAN1DIA+RoIqNcHjZlEwjtN8z4SQcABigX77ZMJTufNICLXAawrfVjUkJ1azbbtj42pMh0ZZNQ7nZd123d+gMTKgaxPQtYFvctOxrRtaxbTte0w8Dx2g2dqAzS2qzIKUlRgPiNR5PEGFYRMBHBZxACq+FM4z34AGr4RzOxETs5CVBAxNYiUOy4xNyGnfhhO0BBJQAPJUeMOxkxTtRUzTqmwwTZQVPis1y2sYswUdEsoWDMv+WgayK8rjSq5T1O0z4sMWxseu1AbJOoNixtjWbEzjtNsve9itt5Cr5OO5rsWw0HPt4p7WOPtAUAgfxWBAA\" rel=\"nofollow noreferrer\">Link to code</a>  </p>\n"}], "owner": {"reputation": 152, "user_id": 7159043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e529c6dcd750a5b915b797e88770ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7159043/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57295539, "answer_count": 1, "score": 0, "last_activity_date": 1564620375, "creation_date": 1564587043, "last_edit_date": 1564601972, "question_id": 57294314, "link": "https://stackoverflow.com/questions/57294314/typescript-omitting-object-levels-in-deep-object-types", "title": "Typescript: Omitting Object &quot;Levels&quot; in &quot;Deep&quot; Object Types", "body": "<p>Given an API that can provide \"expanded\" versions of an object graph, I'm looking to get a simple way of defining the types returned.</p>\n\n<p>As an example, for the these definitions</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface A {\n  id: string;\n  q: string;\n  b: B;\n  cs: C[];\n}\n\ninterface B {\n  id: string;\n  prev: B;\n  c: C;\n}\n\ninterface C {\n  id: string;\n  foo: string;\n  ds: D[];\n}\n\ninterface D {\n  id: string;\n  e: E;\n}\n\ninterface E {\n  id: string;\n}\n</code></pre>\n\n<p>I would need to derive e.g. the following types</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type A0 = {\n  id: string,\n  q: string,\n  b: { id: string },\n  cs: Array&lt;{id: string}&gt;,\n};\n\ntype A1 = {\n  id: string,\n  q: string,\n  b: {\n    id: string,\n    prev: { id: string },\n    c: { id: string },\n  },\n  cs: Array&lt;{\n    id: string,\n    foo: string,\n    ds: Array&lt;{id: string}&gt;,\n  }&gt;,\n};\n\ntype A2 = {\n  id: string,\n  q: string,\n  b: {\n    id: string,\n    prev: {\n      id: string,\n      prev: { id: string },\n      c: { id: string },\n    },\n    c: {\n      id: string,\n      foo: string,\n      ds: Array&lt;{\n        id: string,\n      }&gt;,\n    },\n  },\n  cs: Array&lt;{\n    id: string,\n    foo: string,\n    ds: Array&lt;{\n      id: string,\n      e: { id: string},\n    }&gt;,\n  }&gt;,\n};\n</code></pre>\n\n<p>What I have are the following types (and so on for larger levels)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type Retain0Levels&lt;T&gt; = {\n  [P in keyof T]:\n    T[P] extends infer TP\n    ? TP extends Primitive\n      ? TP\n      : TP extends any[]\n        ? Array&lt;{ id: string }&gt;\n        : { id: string }\n   : never\n};\n\nexport type Retain1Level&lt;T&gt; = {\n  [P in keyof T]:\n    T[P] extends infer TP\n    ? TP extends Primitive\n      ? TP\n      : TP extends any[]\n        ? { [I in keyof TP]: Retain0Levels&lt;TP[I]&gt; }\n        : Retain0Levels&lt;TP&gt;\n    : never\n};\n\nexport type Retain2Levels&lt;T&gt; = {\n  [P in keyof T]:\n    T[P] extends infer TP\n    ? TP extends Primitive\n      ? TP\n      : TP extends any[]\n        ? { [I in keyof TP]: Retain1Level&lt;TP[I]&gt; }\n        : Retain1Level&lt;TP&gt;\n    : never\n};\n\ntype Primitive = string | Function | number | boolean | symbol | undefined | null;\n\n</code></pre>\n\n<p>This works fine, but there are of course two problems with this:</p>\n\n<ol>\n<li>I have to define a type for each level. It would be nice to have just two types (I assume one doesn't work or would get very messy): a leaf (level0) and a recursively defined higher order level.</li>\n<li>the consumer of my API access handler has to cast the return type (e.g. <code>A</code>) to the type they requested (by providing a parameter indicating how many levels to expand). It would be nice to have the return type based on the input parameter provided.</li>\n</ol>\n\n<p>As an example for (2), say we have a function that calls backend API, e.g. <code>getAs(levels: number): A[]</code>. I'd like this to be <code>getAs(levels: number): Array&lt;RetainLevels&lt;A, levels&gt;&gt;</code> (or similar). If it isn't, the consumer has to call the method with e.g. <code>getAs(5) as RetainLevels&lt;A, 5&gt;</code>.</p>\n\n<p>Does anyone have any suggestions of how to improve what I currently have to solve (one of) the above problems?</p>\n\n<p>P.S. Kudos to <a href=\"https://stackoverflow.com/users/125734/titian-cernicova-dragomir\">@titian-cernicova-dragomir</a>\n from who's <a href=\"https://stackoverflow.com/a/55539616/7159043\">answer</a> I derived what I currently have</p>\n\n<h3>Edited</h3>\n\n<p>Corrected mistake as pointed out by @jcalz and added an example for \"dynamic return type\" use case based on the type defined.</p>\n"}, {"tags": ["typescript", "jestjs", "babel-jest", "lit-element"], "comments": [{"owner": {"reputation": 2202, "user_id": 6193024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOy6k.jpg?s=128&g=1", "display_name": "Umbo", "link": "https://stackoverflow.com/users/6193024/umbo"}, "edited": false, "score": 0, "creation_date": 1564608066, "post_id": 57293878, "comment_id": 101091881, "body": "Are you using <code>babel-jest</code>? Can you share your babel configuration file?"}, {"owner": {"reputation": 17, "user_id": 11817971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M6PYEHFqXjg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEtoxdxDLeex0d3tZ6Tye03c-Dog/photo.jpg?sz=128", "display_name": "Raymon", "link": "https://stackoverflow.com/users/11817971/raymon"}, "reply_to_user": {"reputation": 2202, "user_id": 6193024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOy6k.jpg?s=128&g=1", "display_name": "Umbo", "link": "https://stackoverflow.com/users/6193024/umbo"}, "edited": false, "score": 0, "creation_date": 1564785577, "post_id": 57293878, "comment_id": 101157951, "body": "Yes i do @Umbo I&#39;ve added it above. ```"}, {"owner": {"reputation": 2202, "user_id": 6193024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOy6k.jpg?s=128&g=1", "display_name": "Umbo", "link": "https://stackoverflow.com/users/6193024/umbo"}, "edited": false, "score": 0, "creation_date": 1564987657, "post_id": 57293878, "comment_id": 101194251, "body": "I forgot to ask you about the <code>tsconfig.json</code>, could you post that as well?"}, {"owner": {"reputation": 17, "user_id": 11817971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M6PYEHFqXjg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEtoxdxDLeex0d3tZ6Tye03c-Dog/photo.jpg?sz=128", "display_name": "Raymon", "link": "https://stackoverflow.com/users/11817971/raymon"}, "reply_to_user": {"reputation": 2202, "user_id": 6193024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOy6k.jpg?s=128&g=1", "display_name": "Umbo", "link": "https://stackoverflow.com/users/6193024/umbo"}, "edited": false, "score": 0, "creation_date": 1565078212, "post_id": 57293878, "comment_id": 101227855, "body": "@Umbo here it is."}, {"owner": {"reputation": 2202, "user_id": 6193024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOy6k.jpg?s=128&g=1", "display_name": "Umbo", "link": "https://stackoverflow.com/users/6193024/umbo"}, "edited": false, "score": 0, "creation_date": 1565864191, "post_id": 57293878, "comment_id": 101484074, "body": "The only thing I can think of is that in <code>transformIgnorePatterns</code> you&#39;re skipping the transformation of <code>lit-element</code> and <code>lit-html</code>. The error seems to occur in the <code>lit-element</code> package because of untranspiled es imports. Try not to ignore those packages and see what happens."}, {"owner": {"reputation": 1475, "user_id": 8740975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uh7wr.jpg?s=128&g=1", "display_name": "Akshay Rajput", "link": "https://stackoverflow.com/users/8740975/akshay-rajput"}, "edited": false, "score": 0, "creation_date": 1579254953, "post_id": 57293878, "comment_id": 105713047, "body": "Any updates on these issue?"}], "owner": {"reputation": 17, "user_id": 11817971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M6PYEHFqXjg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEtoxdxDLeex0d3tZ6Tye03c-Dog/photo.jpg?sz=128", "display_name": "Raymon", "link": "https://stackoverflow.com/users/11817971/raymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 688, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565092711, "creation_date": 1564585615, "last_edit_date": 1565092711, "question_id": 57293878, "link": "https://stackoverflow.com/questions/57293878/error-running-jest-test-from-litelement-file-modules-import", "title": "Error running Jest test from LitElement File (modules import)", "body": "<p>When i try to run jest tests, the self written typescript files are working fine. But the LitElement files won't (Transpile) thats my guess. </p>\n\n<p>I've cleared the cache,\nI've created the babel.config.js file\nAnd tried to add the modules to the transformIgnorePatterns.</p>\n\n<p>Jest Error from test:</p>\n\n<pre><code>import { TemplateResult } from 'lit-html';\n           ^\n\n    SyntaxError: Unexpected token {\n\n    &gt; 1 | import { css, *CSSResult*, customElement, html, *LitElement* } from 'lit-element';\n</code></pre>\n\n<p>Jest.config.js file:</p>\n\n<pre><code>module.exports = {\n    // Automatically clear mock calls and instances between every test\n    clearMocks: true,\n\n    // Indicates whether the coverage information should be collected while executing the test\n    collectCoverage: true,\n\n    // An array of glob patterns indicating a set of files for which coverage information should be collected\n    // collectCoverageFrom: null,\n    collectCoverageFrom: [\n        '**/*.{js,jsx}',\n        '!**/node_modules/**',\n        '!**/vendor/**',\n        '!**/bin/**'\n    ],\n\n    // An array of regexp pattern strings used to skip coverage collection\n    coveragePathIgnorePatterns: ['/node_modules/', '/bin/'],\n\n    // An object that configures minimum threshold enforcement for coverage results\n    // coverageThreshold: null,\n    coverageThreshold: {\n        global: {\n            branches: 80,\n            functions: 80,\n            lines: 80,\n            statements: -10\n        }\n    },\n\n    // An array of file extensions your modules use\n    moduleFileExtensions: ['js', 'ts', 'node'],\n\n    roots: ['&lt;rootDir&gt;/src'],\n\n    // The test environment that will be used for testing\n    testEnvironment: 'node',\n\n    // An array of regexp pattern strings that are matched against all test paths, matched tests are skipped\n    testPathIgnorePatterns: ['/node_modules/', '/bin/'],\n\n    // A map from regular expressions to paths to transformers\n    transform: {\n        '^.+\\\\.tsx?$': 'ts-jest',\n        '^.+\\\\.jsx?$': 'babel-jest',\n        '.+\\\\.(css|styl|less|sass|scss)$':\n            '&lt;rootDir&gt;/node_modules/jest-css-modules-transform'\n    },\n\n    // An array of regexp pattern strings that are matched against all source file paths, matched files will skip transformation\n    transformIgnorePatterns: [\n        '/node_modules/',\n        '/node_modules/(?!CCSResult).+\\\\.js$',\n        '/node_modules/(?!html).+\\\\.js$',\n        '/node_modules/(?!css).+\\\\.js$',\n        '/node_modules/(?!lit-element).+\\\\.js$',\n        '/node_modules/(?!lit-html).+\\\\.js',\n        '/node_modules/(?!lit-boilerplate).+\\\\.js'\n    ],\n\n    modulePaths: ['&lt;rootDir&gt;']\n};\n</code></pre>\n\n<p>Hello.ts file</p>\n\n<pre><code>import { css, CSSResult, customElement, html, LitElement } from 'lit-element';\nimport { TemplateResult } from 'lit-html';\n\n/**\n * App root component\n */\n@customElement('example-hello')\nexport class Hello extends LitElement {\n    static get styles(): CSSResult {\n        return css`\n            button {\n                background-color: palevioletred;\n                padding: 5px 8px;\n                color: white;\n                font-size: 16px;\n            }\n        `;\n    }\n\n    /**\n     * Render function\n     */\n    public render = (): TemplateResult =&gt; html`\n        &lt;button&gt;Hello&lt;/button&gt;\n    `;\n\n    demo: number = sum(20, 10);\n}\n\nexport function sum(first: number, second: number): number {\n    return first + second;\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'example-hello': Hello;\n    }\n}\n</code></pre>\n\n<p>Babel configuration file:</p>\n\n<pre><code>// babel.config.js\n// babel.config.js\nmodule.exports = {\n    presets: [\n        [\n            '@babel/preset-env',\n            {\n                targets: {\n                    node: 'current'\n                }\n            },\n            '@babel/preset-typescript'\n        ]\n    ],\n    plugins: [\n        ['@babel/plugin-syntax-typescript', { isTSX: true }],\n        ['@babel/plugin-syntax-dynamic-import'],\n        ['@babel/plugin-proposal-decorators', { legacy: true }],\n        ['@babel/plugin-proposal-class-properties', { loose: true }]\n    ]\n};\n\n\n</code></pre>\n\n<p>tsconfig.json:</p>\n\n<pre><code>{\n    \"compilerOptions\": {\n        /* Basic Options */\n        \"target\": \"es2018\",                       /* Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017','ES2018' or 'ESNEXT'. */\n        \"module\": \"commonjs\",                     /* Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'. */\n        \"lib\": [\"dom\", \"es2018\"],                 /* Specify library files to be included in the compilation. */\n        \"declaration\": true,                      /* Generates corresponding '.d.ts' file. */\n        \"sourceMap\": true,                        /* Generates corresponding '.map' file. */\n        \"outDir\": \"./dist\",                       /* Redirect output structure to the directory. */\n        \"rootDir\": \"./src\",                       /* Specify the root directory of input files. Use to control the output directory structure with --outDir. */\n        \"noResolve\": false,                       /* Do not add triple-slash references or module import targets to the list of compiled files. */\n        \"skipLibCheck\": true,                     /* Skip type checking of all declaration files (*.d.ts). */\n\n        /* Strict Type-Checking Options */\n        \"strict\": true,                           /* Enable all strict type-checking options below. */\n\n        /* Additional Checks */\n        \"noUnusedLocals\": true,                   /* Report errors on unused locals. */\n        \"noUnusedParameters\": true,               /* Report errors on unused parameters. */\n        \"noImplicitReturns\": true,                /* Report error when not all code paths in function return a value. */\n\n        /* Module Resolution Options */\n        \"moduleResolution\": \"node\",               /* Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6). */\n        \"baseUrl\": \"./\",                          /* Base directory to resolve non-absolute module names. */\n        \"allowSyntheticDefaultImports\": true,     /* Allow default imports from modules with no default export. This does not affect code emit, just typechecking. */\n        \"esModuleInterop\": true,                  /* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies 'allowSyntheticDefaultImports'. */\n\n        /* Experimental Options */\n        \"experimentalDecorators\": true            /* Enables experimental support for ES7 decorators. */\n    },\n    \"exclude\": [\n        \"node_modules\",\n        \"!node_modules/@types\",\n        \"package.json\",\n        \"postcss.config.js\",\n        \"src/assets\",\n        \"dist\",\n        \"webpack.config.js\"\n    ],\n    \"include\": [\n        \"src\"\n    ]\n}\n\n</code></pre>\n\n<p>I expect to run Jest and that the test and passes.\n(Typescript files without imports work and return passed.)</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1564583900, "post_id": 57293286, "comment_id": 101080945, "body": "first check this: <a href=\"https://angular.io/guide/http#requesting-non-json-data\" rel=\"nofollow noreferrer\">angular.io/guide/http#requesting-non-json-data</a>"}, {"owner": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "edited": false, "score": 0, "creation_date": 1564584033, "post_id": 57293286, "comment_id": 101081052, "body": "If you are working with Promises, use &#39;then&#39; instead of &#39;subscribe&#39;"}, {"owner": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "reply_to_user": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "edited": false, "score": 0, "creation_date": 1564584256, "post_id": 57293286, "comment_id": 101081208, "body": "@Dino its my first app, so I&#39;m not sure... tried to replace &quot;subscribe&quot; to &quot;then&quot; and got the error <code>Property &#39;then&#39; does not exist on type &#39;Observable&lt;Promise&lt;string&gt;&gt;&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "edited": false, "score": 0, "creation_date": 1564584156, "post_id": 57293337, "comment_id": 101081134, "body": "sorry its my first app work on angular. with your example I&#39;m getting this error: <code>Property &#39;subscribe&#39; does not exist on type &#39;Subscription&#39;</code>"}, {"owner": {"reputation": 1183, "user_id": 10460880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce9c365b769be33ee994450d0bbb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "Jake12342134", "link": "https://stackoverflow.com/users/10460880/jake12342134"}, "reply_to_user": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "edited": false, "score": 0, "creation_date": 1564584408, "post_id": 57293337, "comment_id": 101081315, "body": "<code>this.http.post(&quot;url&quot;, {data: &quot;data&quot;}).subscribe(data =&gt; {console.log(data)})</code>"}, {"owner": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "edited": false, "score": 0, "creation_date": 1564584628, "post_id": 57293337, "comment_id": 101081449, "body": "got the error <code>error TS2339: Property &#39;subscribe&#39; does not exist on type &#39;void&#39;.</code>"}], "tags": [], "owner": {"reputation": 1183, "user_id": 10460880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce9c365b769be33ee994450d0bbb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "Jake12342134", "link": "https://stackoverflow.com/users/10460880/jake12342134"}, "is_accepted": false, "score": 0, "last_activity_date": 1564583935, "creation_date": 1564583935, "answer_id": 57293337, "question_id": 57293286, "link": "https://stackoverflow.com/questions/57293286/angular-how-to-access-http-post-response-and-parse-as-json/57293337#57293337", "title": "angular - how to access http post response and parse as json?", "body": "<p>Why are you mapping in your subscription? All you need to do is display the data.</p>\n\n<p>Just do <code>.subscribe(data =&gt; console.log(JSON.stringify(data))</code> get rid of the map.</p>\n\n<p>Edit: Also your <code>.subscribe</code> needs to be outside your pipe, if you do need to pipe that it. Which you don't in this instance.</p>\n\n<pre><code>return this.http.post(url, JSON.stringify(formData), {headers:headers}).pipe(\n    map((res:Response) =&gt; (res.text()))).subscribe(data =&gt; {console.log(data)}\n  );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "edited": false, "score": 0, "creation_date": 1564584505, "post_id": 57293475, "comment_id": 101081363, "body": "got the error <code>error TS2339: Property &#39;subscribe&#39; does not exist on type &#39;void&#39;.</code>"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "edited": false, "score": 0, "creation_date": 1564584704, "post_id": 57293475, "comment_id": 101081511, "body": "@anderlaini I have update my answer if you want to return an observable you don&#39;t need to subscribe from the login method \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564584510, "last_edit_date": 1564584510, "creation_date": 1564584354, "answer_id": 57293475, "question_id": 57293286, "link": "https://stackoverflow.com/questions/57293286/angular-how-to-access-http-post-response-and-parse-as-json/57293475#57293475", "title": "angular - how to access http post response and parse as json?", "body": "<p>your subscribe method can't be place inside the pipe </p>\n\n<pre><code>login(email: String, password: String) : void {\n\n ....\n\n this.http.post(this.env.API_URL+'/login', JSON.stringify(formData), {headers:headers})\n  .pipe(map((res:Response) =&gt; (res.text())))\n  .subscribe(data =&gt; {console.log(data)});\n}\n</code></pre>\n\n<blockquote>\n  <p>you don't need the return statement</p>\n</blockquote>\n\n<p>the othe case is to return an observable from login method so in this case you can't subscribe inside the login method </p>\n\n<pre><code>login(email: String, password: String) : Observable&lt;any&gt; {\n\n ....\n\n return this.http.post(this.env.API_URL+'/login', JSON.stringify(formData), {headers:headers})\n  .pipe(map((res:Response) =&gt; (res.text()))\n}\n</code></pre>\n\n<p><strong>use login method as observable</strong> </p>\n\n<pre><code>  login('example@example.com','123456').subscribe(data =&gt; {console.log(data)});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": false, "score": 0, "last_activity_date": 1564584762, "creation_date": 1564584762, "answer_id": 57293610, "question_id": 57293286, "link": "https://stackoverflow.com/questions/57293286/angular-how-to-access-http-post-response-and-parse-as-json/57293610#57293610", "title": "angular - how to access http post response and parse as json?", "body": "<p>There are multiple issues with your implementation.</p>\n\n<p>I've mentioned all the issues inline in code comments so that they're easy to follow:</p>\n\n<pre><code>import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nimport { Storage } from '@ionic/storage';\nimport { EnvService } from './env.service';\nimport { Injectable } from '@angular/core';\nimport { map } from \"rxjs/operators\";\n\n...\n\nlogin(email: String, password: String) {\n\n  // Issue 1: These headers need not be set explicitly. HttpClient automatically does that for you. So you can get rid of these.\n  //let headers = new HttpHeaders({\n  //  'Accept': '*/*',\n  //  'Content-Type': 'text/plain'\n  //});\n\n  let formData = {\n    user: 'myuser',\n    pass: 'mypass',\n    retsession: true\n  }\n\n  // Issue 2: You're stringifying the request payload which is supposed to be sent as a JSON Object. So remove the JSON.stringify\n  // Remove the headers too as we've gotten rid of them above.\n\n  // Issue 3: I think in the pipe and map you're trying to call .json on the response. Since you're using HttpClient, that also isn't really required as HttpClient does that out of the box for you. So get rid of those.\n  return this.http.post(this.env.API_URL + '/login', formData)\n    .subscribe(data =&gt; console.log(data));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208, "user_id": 11863265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJpop.jpg?s=128&g=1", "display_name": "RR1112", "link": "https://stackoverflow.com/users/11863265/rr1112"}, "is_accepted": false, "score": 2, "last_activity_date": 1564588979, "creation_date": 1564588979, "answer_id": 57294884, "question_id": 57293286, "link": "https://stackoverflow.com/questions/57293286/angular-how-to-access-http-post-response-and-parse-as-json/57294884#57294884", "title": "angular - how to access http post response and parse as json?", "body": "<p>As the response coming from  server is of type text, have your tried explicitly specifying the response as text in the post request like below,</p>\n\n<pre><code>this.http.post(url, formData, {responseType: 'text' })\n</code></pre>\n\n<p>By default angular HttpClient tries to process the response as json and fails in parser when a text-based response is received, altough the http request succeeds</p>\n"}], "owner": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6399, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1564588979, "creation_date": 1564583795, "question_id": 57293286, "link": "https://stackoverflow.com/questions/57293286/angular-how-to-access-http-post-response-and-parse-as-json", "title": "angular - how to access http post response and parse as json?", "body": "<p>I'm trying to send this POST to an API but seems impossible to access response data (which is coming as text and I need to parse as JSON).</p>\n\n<pre><code>import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nimport { Storage } from '@ionic/storage';\nimport { EnvService } from './env.service';\nimport { Injectable } from '@angular/core';\nimport { map } from \"rxjs/operators\";\n\n...\n\nlogin(email: String, password: String) {\n\n  let headers = new HttpHeaders({\n    'Accept'       :'*/*',\n    'Content-Type' :'text/plain'\n  });\n\n  let formData = {\n    user       : 'myuser',\n    pass       : 'mypass',\n    retsession : true\n  }\n\n  return this.http.post(this.env.API_URL+'/login', JSON.stringify(formData), {headers:headers}).pipe(\n    map((res:Response) =&gt; (res.text()))\n    .subscribe(data =&gt; {console.log(data)})\n  );\n}\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>[ng] ERROR in src/app/services/auth.service.ts(42,8): error TS2339: Property 'subscribe' does not exist on type 'OperatorFunction&lt;Response, Promise&lt;string&gt;&gt;'.\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "edited": false, "score": 0, "creation_date": 1564583116, "post_id": 57293042, "comment_id": 101080438, "body": "Could you show us the exception you get, and how you are testing the typedObject type ? Are you using <code>typeof</code> ? Is Interval a Class or an Interface ?"}, {"owner": {"reputation": 12486, "user_id": 5640649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab190da855988ffae29d287c7d55ebbe?s=128&d=identicon&r=PG", "display_name": "lealceldeiro", "link": "https://stackoverflow.com/users/5640649/lealceldeiro"}, "edited": false, "score": 0, "creation_date": 1564583367, "post_id": 57293042, "comment_id": 101080610, "body": "Please, post all the relevant code"}, {"owner": {"reputation": 2485, "user_id": 3812888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/blosZ.jpg?s=128&g=1", "display_name": "The Head Rush", "link": "https://stackoverflow.com/users/3812888/the-head-rush"}, "edited": false, "score": 0, "creation_date": 1564583636, "post_id": 57293042, "comment_id": 101080787, "body": "Unless you&#39;ve called <code>new Interval()</code> somewhere <code>a.interval</code> is an object literal, not an <code>Interval</code> instance."}, {"owner": {"reputation": 1553, "user_id": 3624141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c94f5b55339017d3ec654c65d07cc3f?s=128&d=identicon&r=PG&f=1", "display_name": "user122222", "link": "https://stackoverflow.com/users/3624141/user122222"}, "reply_to_user": {"reputation": 2485, "user_id": 3812888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/blosZ.jpg?s=128&g=1", "display_name": "The Head Rush", "link": "https://stackoverflow.com/users/3812888/the-head-rush"}, "edited": false, "score": 0, "creation_date": 1564584020, "post_id": 57293042, "comment_id": 101081039, "body": "@TheHeadRush where should I call it?"}, {"owner": {"reputation": 2485, "user_id": 3812888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/blosZ.jpg?s=128&g=1", "display_name": "The Head Rush", "link": "https://stackoverflow.com/users/3812888/the-head-rush"}, "edited": false, "score": 0, "creation_date": 1564584921, "post_id": 57293042, "comment_id": 101081666, "body": "Before you call <code>getRange</code>. Not intending to sound snippy but without code (or context) there&#39;s not much more to say."}], "owner": {"reputation": 1553, "user_id": 3624141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c94f5b55339017d3ec654c65d07cc3f?s=128&d=identicon&r=PG&f=1", "display_name": "user122222", "link": "https://stackoverflow.com/users/3624141/user122222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564602593, "creation_date": 1564582964, "last_edit_date": 1564602593, "question_id": 57293042, "link": "https://stackoverflow.com/questions/57293042/unable-to-cast-object-to-type-interval-typescript", "title": "Unable to cast Object to type Interval typescript", "body": "<p>I have an object  <code>a</code> which has lots of properties inside. On edit I save these properties and one of them is <code>interval</code>. Later I assign it to other property (<code>typedObject</code>) Everything works fine. Then I click edit and do not change the <code>interval</code>  and then I try to assign it to <code>typedObject</code> but it somehow shows that it's an <code>Object</code> and not the type of <code>Interval</code>. I try to  cast it to type of <code>Interval</code> like: </p>\n\n<p><code>const typedObject: Interval = a.interval as Interval;</code></p>\n\n<p>also tried: <code>const typedObject: Interval = &lt;Interval&gt;a.interval;</code></p>\n\n<p>But it <code>typedObject</code> is still Object. Why is that happening? </p>\n\n<p>I need to use function which only exists for type <code>Interval</code> and I get exception when  I call <code>typedObject.getRange();</code></p>\n\n<p><code>Interval</code> is a class.</p>\n\n<p>I get error:\n<code>Uncaught TypeError: a.interval.getRange is not a function</code></p>\n\n<p>It works if I do: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>        let typedObject = new IntervalRange();\r\n        typedObject.day = a.interval.day;\r\n        typedObject.month = a.interval.month;\r\n        typedObject.quarter = a.interval.quarter;\r\n        typedObject.timezone = a.interval.timezone;\r\n      \r\n        const from = &lt;Interval&gt;typedObject.getRange().from;\r\n        const to = &lt;Interval&gt;typedObject.getRange().to;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But assigning <code>typedObject.quarter = a.interval.quarter;</code> one by one doesn't look very clean</p>\n"}, {"tags": ["angular", "asp.net-mvc", "typescript", "rxjs", "ngrx"], "answers": [{"comments": [{"owner": {"reputation": 2591, "user_id": 4868839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0ae88c5689880ba355618317faec0?s=128&d=identicon&r=PG&f=1", "display_name": "User3250", "link": "https://stackoverflow.com/users/4868839/user3250"}, "edited": false, "score": 0, "creation_date": 1564583644, "post_id": 57292939, "comment_id": 101080793, "body": "Seems we are close. I get previous value on reload not current."}], "tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": true, "score": 2, "last_activity_date": 1564584596, "last_edit_date": 1564584596, "creation_date": 1564582677, "answer_id": 57292939, "question_id": 57292834, "link": "https://stackoverflow.com/questions/57292834/how-to-get-only-latest-data-from-ngrx-store-on-reload-api-call/57292939#57292939", "title": "How to get only latest data from ngrx/store on reload api call", "body": "<p>You can use withLatestFrom</p>\n\n<pre><code>@Effect()\n    loadNav$: Observable&lt;Action&gt; = this.action$.pipe(\n        ofType&lt;fromPortfolio.LoadTradeNAV&gt;(fromPortfolio.PortActionTypes.LOAD_TRADE_NAV),\n        withLatestFrom(this.store.pipe(select(selector))), // pass in your selector here in select()\n        switchMap((action) =&gt; this.dashSvc.getNetAssetValue(action.payload.key,action.payload.currency)\n            .pipe(\n                map((data) =&gt; {\n                    return new fromPortfolio.LoadSuccessTradeNAV(data)\n                })\n            )\n        )\n    );\n</code></pre>\n\n<p>Update. I would recommend you put this code in ngOnInit() hook</p>\n\n<pre><code>ngOnInit() {\n    this.portStore.pipe(\n    select(fromPortfolio.getNavData),\n    filter(f =&gt; !!f),\n    takeWhile(() =&gt; this.componentActive))\n    .subscribe((fmtRes) =&gt; {\n        console.log(fmtRes) //Issue here\n        this.data = fmtRes;\n    })\n}\n</code></pre>\n"}], "owner": {"reputation": 2591, "user_id": 4868839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0ae88c5689880ba355618317faec0?s=128&d=identicon&r=PG&f=1", "display_name": "User3250", "link": "https://stackoverflow.com/users/4868839/user3250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1961, "favorite_count": 0, "accepted_answer_id": 57292939, "answer_count": 1, "score": 1, "last_activity_date": 1582808563, "creation_date": 1564582340, "last_edit_date": 1582808563, "question_id": 57292834, "link": "https://stackoverflow.com/questions/57292834/how-to-get-only-latest-data-from-ngrx-store-on-reload-api-call", "title": "How to get only latest data from ngrx/store on reload api call", "body": "<p>I am using ngrx/store and ngrx/effects in my angular app.</p>\n\n<p>My issue is that selector in reducer returns old as well as new value after api call from feature state. Below is my code:</p>\n\n<p>reducer.ts</p>\n\n<pre><code>case PortfolioActions.PortActionTypes.LOAD_SUCCESS_TRADE_NAV:\n    return {\n        ...state,\n        navData: action.payload,\n        isLoadingNav: false\n    };\n\nexport const getNavData = createSelector(\n    getPortfolioFeatureState,\n    state =&gt; state.navData\n);\n</code></pre>\n\n<p>In effects.ts</p>\n\n<pre><code>@Effect()\n    loadNav$: Observable&lt;Action&gt; = this.action$.pipe(\n        ofType&lt;fromPortfolio.LoadTradeNAV&gt;(fromPortfolio.PortActionTypes.LOAD_TRADE_NAV),\n        switchMap((action) =&gt; this.dashSvc.getNetAssetValue(action.payload.key,action.payload.currency)\n            .pipe(\n                map((data) =&gt; {\n                    return new fromPortfolio.LoadSuccessTradeNAV(data)\n                })\n            )\n        )\n    );\n</code></pre>\n\n<p>In compoenent.ts</p>\n\n<pre><code>reload(){\n    this.portStore.dispatch(new portfolioActions.LoadTradeNAV(this.searchParam));\n\n    this.portStore.pipe(\n    select(fromPortfolio.getNavData),\n    filter(f =&gt; !!f),\n    takeWhile(() =&gt; this.componentActive))\n    .subscribe((fmtRes) =&gt; {\n        console.log(fmtRes) //Issue here\n        this.data = fmtRes;\n    })\n}\n</code></pre>\n\n<p>In component when I call <code>reload()</code> method, in <code>subscribe()</code> I always get the old data and then later on new data after the api call is done.</p>\n\n<p>My question is how can I get the store data only after the api load success is done </p>\n"}, {"tags": ["angular", "typescript", "tslint", "typescript3.0"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1564582487, "post_id": 57292759, "comment_id": 101080025, "body": "Take a look at <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html#class-types\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/interfaces.html#class-types</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "edited": false, "score": 0, "creation_date": 1564593412, "post_id": 57293233, "comment_id": 101086065, "body": "Thanks for your help, and I have a question. In this case maybe I lost the core of the concept, isn&#39;t it? I want to use not a <code>BaseModel</code> as data type. I want to give the data type in parameter to the service. Something like this: <code>constructor(dataService: DataService&lt;Photoalbum&gt;) { }</code>"}, {"owner": {"reputation": 28003, "user_id": 1083663, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/784657ec6f91c7406a2c4121d8bda505?s=128&d=identicon&r=PG", "display_name": "GOTO 0", "link": "https://stackoverflow.com/users/1083663/goto-0"}, "reply_to_user": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "edited": false, "score": 1, "creation_date": 1564595253, "post_id": 57293233, "comment_id": 101086852, "body": "@netdjw I see. I&#39;ve updated my answer. Let me know if it&#39;s still not what you&#39;re looking for."}], "tags": [], "owner": {"reputation": 28003, "user_id": 1083663, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/784657ec6f91c7406a2c4121d8bda505?s=128&d=identicon&r=PG", "display_name": "GOTO 0", "link": "https://stackoverflow.com/users/1083663/goto-0"}, "is_accepted": false, "score": 1, "last_activity_date": 1564595193, "last_edit_date": 1564595193, "creation_date": 1564583604, "answer_id": 57293233, "question_id": 57292759, "link": "https://stackoverflow.com/questions/57292759/property-parse-does-not-exist-on-type-new-t/57293233#57293233", "title": "Property &#39;parse&#39; does not exist on type &#39;new () =&gt; T&#39;", "body": "<p>Well, <code>parse</code> only exists as a static property of <code>BaseModel</code>, so it's no surprise that you are receiving an error.\nChange the type of <code>type</code> in the constructor.</p>\n\n<pre><code>  constructor(\n    private type: { new (): T, parse(data: any): any },\n    private url: string,\n    private http: HttpClient) { }\n\n</code></pre>\n\n<p>Then update the definition of the parse method to accept one argument.</p>\n\n<pre><code>export class BaseModel {\n  id: number;\n  prepareToSave: () =&gt; void;\n  static parse (item: any): any {\n    throw new Error('not implemented');\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564595193, "creation_date": 1564582106, "question_id": 57292759, "link": "https://stackoverflow.com/questions/57292759/property-parse-does-not-exist-on-type-new-t", "title": "Property &#39;parse&#39; does not exist on type &#39;new () =&gt; T&#39;", "body": "<p>I'm working on a general data service in Angular witch can handle data models and communicate with backend.</p>\n\n<p>Now I have multiple services to each API endpoints, same code, just the model type (and of course the URI) is the difference.</p>\n\n<p>I started develop a multipurpose service on this way:</p>\n\n<p>Here is BaseModel to define most basic things on models, <code>models/base_model/base.model.ts</code>:</p>\n\n<pre><code>export class BaseModel {\n  id: number;\n  prepareToSave: () =&gt; void;\n  static parse () {\n    throw new Error('not implemented');\n  }\n}\n</code></pre>\n\n<p>Here is a Photoalbum model to define a data set, <code>models/photoalbum/photoalbum.model.ts</code>:</p>\n\n<pre><code>export class Photoalbum {\n  id: number;\n  public: boolean;\n  name: string;\n\n  static parse(data: any) {\n    return new this(data);\n  }\n\n  prepareToSave() {\n    return {\n      // convert datas to backend\n    }\n  }\n}\n</code></pre>\n\n<p>Here is the DataService to communicate the backend, <code>services/data/data.service.ts</code>:</p>\n\n<pre><code>export class DataService&lt;T extends BaseModel&gt; {\n  constructor(\n    private type: new () =&gt; T,\n    private url: string,\n    private http: HttpClient) { }\n\n  getAll(): Promise&lt;T[]&gt; {\n    return new Promise( resolve =&gt; {\n      this.http.get(this.url).subscribe( (result: any) =&gt; {\n        const data: T[] = [];\n        result.forEach( (item: any) =&gt; {\n          data.push(this.type.parse(item)); // error in this line\n        });\n        resolve(data);\n      });\n    });\n  }\n\n  // ...\n}\n</code></pre>\n\n<p>Now I get this error in DataService:</p>\n\n<pre><code>Property 'parse' does not exist on type 'new () =&gt; T'.\n</code></pre>\n\n<p>I'm using TypeScript 3.5.2 with tslint 5.9.1 if this is relevant.</p>\n\n<p>Is there any idea how to fix this?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 4, "creation_date": 1564582126, "post_id": 57292727, "comment_id": 101079795, "body": "Side note: <code>JSON.parse(JSON.stringify(this))</code> is a <b>lossy, slow</b> way to copy an object."}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1564582212, "post_id": 57292727, "comment_id": 101079850, "body": "<a href=\"http://www.typescriptlang.org/play/#code/IYIwzgLgTsDGEAJYBthjAgCsKBTAdhAMID2+AZgJYDmCA3gLABQCClAJgFwKRSX60APggCu+drir5c7ANzNW+YAFtc3Xv1oBeBAHJd8pgF9mzFGgykKNBLgAeEAuwzY8hK1VqMWCAG64oMEoybnwRZRAAhGExCSkZQ1ZYMl4ReBIoAAoASnoFVh4RAAcAnMSEEyZ8lDJcBB0c7g8bLQA+PJ8klMRk620EaQB3BGbqMvzWAHkQACtceAA6Cxp8TN7PABoEACkAZUmAOQWinDBcTL3DhY0BSnIAT0yIAAtKMGyP2QQAem+EF7eC38gWC+DYGFikn4MgAhHCJgg8BARFAwesaOVKpUzN0EFRAsQyJ56gNcMNRuMmPjIKMFkpVCTdNSIAZmMzacCgmQSQBGQw4-CQHjzMjsUYk9lEmgLGrSSm9MAkZC4BbIEhjM69MVS6hAgJc-DZWS-UTiKHSdhAA\" rel=\"nofollow noreferrer\">Works for me</a> (open the console to see the result)."}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1564582260, "post_id": 57292727, "comment_id": 101079883, "body": "(I don&#39;t see why <code>clone</code> should be an arrow function instead of a method, though.)"}, {"owner": {"reputation": 2212, "user_id": 7512358, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1492893ec3b80a28ba13603d8ad4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mhd", "link": "https://stackoverflow.com/users/7512358/mhd"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1564583827, "post_id": 57292727, "comment_id": 101080898, "body": "@T.J.Crowder any suggestion for clone?"}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1564584066, "post_id": 57292727, "comment_id": 101081074, "body": "For a shallow copy of enumerable, own properties: <code>return Object.assign(new Config(), this);</code>. For deep copies, see the answers to <a href=\"https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript\">this question</a>."}], "owner": {"reputation": 2212, "user_id": 7512358, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1492893ec3b80a28ba13603d8ad4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mhd", "link": "https://stackoverflow.com/users/7512358/mhd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1564592493, "creation_date": 1564582008, "last_edit_date": 1564582123, "question_id": 57292727, "link": "https://stackoverflow.com/questions/57292727/this-inside-instance-method-in-typescript", "title": "&#39;this&#39; inside instance method in TypeScript", "body": "<p>I'm writing <code>clone</code> method for a <code>Config</code> class: </p>\n\n<pre><code>abstract class ParentConfig {\n    id: string | undefined;\n    name: string = '';\n}\n\nexport class Config extends ParentConfig {\n    version: number | undefined;\n    constructor() {\n        super();\n    }\n\n    clone = (): Config =&gt; {\n        const config = new Config();\n        Object.assign(config, JSON.parse(JSON.stringify(this))); // this.version is undefined!!!\n        return config;\n    }\n}\n\nconst firstConfig = new Config();\nfirstConfig.name = 'first';\nfirstConfig.version = 1;\n\nconst secondConfig = firstConfig.clone();\nsecondConfig.version;// undefined\n</code></pre>\n\n<p>Before calling <code>clone</code>, I can see in the Dev tool that <code>Config</code> instance has a proper <code>version</code> but new returned <code>Config</code> has undefined version.</p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["angular", "typescript", "aot"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6376657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u3Yva.jpg?s=128&g=1", "display_name": "MayI", "link": "https://stackoverflow.com/users/6376657/mayi"}, "edited": false, "score": 0, "creation_date": 1564626707, "post_id": 57296648, "comment_id": 101095673, "body": "thanks, the build process got stuck at 12% after I change to <code>new RegExp(...)</code> for quite a long time, I have to stop it manually"}], "tags": [], "owner": {"reputation": 124, "user_id": 4119531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DA6mp.png?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/4119531/nico"}, "is_accepted": true, "score": 4, "last_activity_date": 1564596440, "creation_date": 1564596440, "answer_id": 57296648, "question_id": 57292603, "link": "https://stackoverflow.com/questions/57292603/angular7-aot-expression-form-not-supported/57296648#57296648", "title": "angular7 aot: Expression form not supported", "body": "<p>Have you tried setting up your regex as follows?</p>\n\n<pre><code>const regex = new RegExp('_(\\w)', 'g');\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6376657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u3Yva.jpg?s=128&g=1", "display_name": "MayI", "link": "https://stackoverflow.com/users/6376657/mayi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "accepted_answer_id": 57296648, "answer_count": 1, "score": 1, "last_activity_date": 1564596440, "creation_date": 1564581655, "question_id": 57292603, "link": "https://stackoverflow.com/questions/57292603/angular7-aot-expression-form-not-supported", "title": "angular7 aot: Expression form not supported", "body": "<p>In Angular7 I would like to create a util class like this:</p>\n\n<pre><code>export class FieldNameUtils {\n\n  static toHump(name: string) {\n    return name.replace(/_(\\w)/g, function (all, letter) {\n      return letter.toUpperCase();\n    });\n  }\n\n  static toLine(name: string) {\n    return name.replace('/([A-Z])/g', '_$1').toLowerCase();\n  }\n}\n</code></pre>\n\n<p>It's working well with development mode, but when I build with production, I got error like this:</p>\n\n<pre><code>field.name.utils.ts:4:25: Metadata collected contains an error that will be reported at runtime: Expression form not supported.\n  {\"__symbolic\":\"error\",\"message\":\"Expression form not supported\",\"line\":3,\"character\":24}\n</code></pre>\n\n<p>I have tried to change the <code>/_(\\w)/g</code> to a static variable, but still got error, I know lambda expression is not supported, so I'v already change <code>(all, letter) =&gt; ...</code> to a <code>function(all, letter){ ... }</code>\nThe error shows that an expression after <code>replace(</code> is not supported, but it is a <code>RegExp</code></p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11468342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b19128a3c939f6a5fd95f97ca8f59acc?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Lis", "link": "https://stackoverflow.com/users/11468342/pawe%c5%82-lis"}, "edited": false, "score": 0, "creation_date": 1564582355, "post_id": 57292686, "comment_id": 101079933, "body": "excellent, somehow I thought that using Parameters and ReturnType was the only way to do something fancy with functions-arguments. This turned out to be much, much easier than I expected :D"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1564581896, "creation_date": 1564581896, "answer_id": 57292686, "question_id": 57292534, "link": "https://stackoverflow.com/questions/57292534/how-to-make-higher-order-function-that-injects-an-argument-into-another/57292686#57292686", "title": "How to make higher order function that injects an argument into another?", "body": "<p>You can use tuples in rest parameters in the signature of the passed in function:</p>\n\n<pre><code>function inject5&lt;A extends any[], R&gt;(otherfunc: (n: number, ...a: A) =&gt; R) {\n    return function(...args: A): R {\n        return otherfunc(5, ...args);\n    }\n}\n\nfunction add(a: number, b: number, c: number, d: number) { return a+b+c+d; }\n\nconst add5 = inject5(add);\nadd5(6, 7, 8);\n\n</code></pre>\n\n<p>This way the passed in function has to have a first argument of type number, and we get the rest of the parameters in <code>A</code>. We can then use <code>A</code> into a new function signature  as the rest parameter of the function.</p>\n\n<p>This will apply exactly the same to your <code>UserRepository</code> example.</p>\n"}], "owner": {"reputation": 23, "user_id": 11468342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b19128a3c939f6a5fd95f97ca8f59acc?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Lis", "link": "https://stackoverflow.com/users/11468342/pawe%c5%82-lis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57292686, "answer_count": 1, "score": 1, "last_activity_date": 1564581896, "creation_date": 1564581452, "question_id": 57292534, "link": "https://stackoverflow.com/questions/57292534/how-to-make-higher-order-function-that-injects-an-argument-into-another", "title": "How to make higher order function that injects an argument into another?", "body": "<p>I want to create a function that will inject something into another one.</p>\n\n<p>In pure JS this would look like:</p>\n\n<pre><code>function add(a, b, c, d) { return a+b+c+d; }\n\nfunction inject5(otherfunc) {\n    return function(...args) { return otherfunc(5, ...args); }\n}\n\nconst add5 = inject5(add);\n</code></pre>\n\n<p>How can I do the same in typescript?</p>\n\n<pre><code>function inject5&lt;F extends (...args: any[]) =&gt; any&gt;(otherfunc: F) {\n    return function(...args: ParametersWithoutFirstOne&lt;F&gt;): ReturnType&lt;F&gt; {\n        return otherfunc(5, ...args);\n    }\n}\n</code></pre>\n\n<p>Of course I just made up this <code>ParametersWithoutFirstOne</code> thing.</p>\n\n<p>More real use case I have in mind:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const someService = injectUserRepository((userRepo: UserRepository, userId: string) =&gt; {\n    userRepository.get(userId).doSomething();\n})\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "is_accepted": false, "score": 0, "last_activity_date": 1564581975, "creation_date": 1564581975, "answer_id": 57292714, "question_id": 57292529, "link": "https://stackoverflow.com/questions/57292529/angular-deep-link-refresh-fails-while-app-is-hosted/57292714#57292714", "title": "Angular deep link refresh fails while app is hosted", "body": "<p>You have to use hash Location Strategy .Just use it on app module. </p>\n\n<pre><code>RouterModule.forRoot(appRoutes, {useHash: true});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 4964052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D5K_rm5ouGg/AAAAAAAAAAI/AAAAAAAAAH8/5iCh-4fuXSQ/photo.jpg?sz=128", "display_name": "Benjamin Hofstetter", "link": "https://stackoverflow.com/users/4964052/benjamin-hofstetter"}, "is_accepted": false, "score": 0, "last_activity_date": 1564582289, "creation_date": 1564582289, "answer_id": 57292818, "question_id": 57292529, "link": "https://stackoverflow.com/questions/57292529/angular-deep-link-refresh-fails-while-app-is-hosted/57292818#57292818", "title": "Angular deep link refresh fails while app is hosted", "body": "<p>You have to configure a rewrite on your server. Check the docs here.\n<a href=\"https://angular.io/guide/deployment#server-configuration\" rel=\"nofollow noreferrer\">https://angular.io/guide/deployment#server-configuration</a></p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "edited": false, "score": 0, "creation_date": 1564730491, "post_id": 57294321, "comment_id": 101134089, "body": "This is not necessary to change on .htaccess . you just have to use  hash Location Strategy on angular routing."}], "tags": [], "owner": {"reputation": 864, "user_id": 6453015, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gMooP.jpg?s=128&g=1", "display_name": "Marco Castano", "link": "https://stackoverflow.com/users/6453015/marco-castano"}, "is_accepted": false, "score": 0, "last_activity_date": 1564587056, "creation_date": 1564587056, "answer_id": 57294321, "question_id": 57292529, "link": "https://stackoverflow.com/questions/57292529/angular-deep-link-refresh-fails-while-app-is-hosted/57294321#57294321", "title": "Angular deep link refresh fails while app is hosted", "body": "<p>Server side\nUsing this mode requires URL rewriting on server side, basically you have to rewrite all your links to entry point of your application (e.g. index.html)</p>\n\n<p>The reason for this is that when you first visit the page (/deeplink), e.g. after a refresh, the browser has no way of knowing that this isn't a real URL, so it goes ahead and loads it. However if you have loaded up the root page first, and all the javascript code, then when you navigate to /deeplink Angular can get in there before the browser tries to hit the server and handle it accordingly.</p>\n\n<p>If you have .htaccess you can:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{REQUEST_FILENAME} -s [OR]\nRewriteCond %{REQUEST_FILENAME} -l [OR]\nRewriteCond %{REQUEST_FILENAME} -d\nRewriteRule ^.*$ - [NC,L]\n\nRewriteRule ^(.*) /index.html [NC,L]\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 7579104, "user_type": "registered", "profile_image": "https://graph.facebook.com/1521949597845519/picture?type=large", "display_name": "Simon Jerry", "link": "https://stackoverflow.com/users/7579104/simon-jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1564587056, "creation_date": 1564581437, "question_id": 57292529, "link": "https://stackoverflow.com/questions/57292529/angular-deep-link-refresh-fails-while-app-is-hosted", "title": "Angular deep link refresh fails while app is hosted", "body": "<p>I I am working on Angular 7. I have problem with deep link(www.example.com/deeplink) while my app is hosted if i do refresh. Precisely , it works perfect while on development. but after hosting, if i refresh page will not be available.</p>\n"}, {"tags": ["javascript", "regex", "typescript"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1564580374, "post_id": 57292145, "comment_id": 101078565, "body": "Because <code>messageControlValue</code> in <code>new RegExp(&#47;^messageControlValue&#47;)</code> is a <code>messageControlValue</code> string, not a <code>messageControlValue</code> variable. You meant to use <code>new RegExp(&quot;^&quot; + messageControlValue)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1564581961, "post_id": 57292170, "comment_id": 101079670, "body": "excellant thank you"}, {"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "reply_to_user": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1564581980, "post_id": 57292170, "comment_id": 101079683, "body": "No problem @knowledgeseeker, always glad to help."}, {"owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1564583266, "post_id": 57292170, "comment_id": 101080543, "body": "could you help me with this <a href=\"https://stackoverflow.com/questions/57290784/why-i-am-not-able-to-make-the-text-area-partially-non-editable-in-angular-5-and\" title=\"why i am not able to make the text area partially non editable in angular 5 and\">stackoverflow.com/questions/57290784/&hellip;</a>"}], "tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": true, "score": 2, "last_activity_date": 1564580350, "creation_date": 1564580350, "answer_id": 57292170, "question_id": 57292145, "link": "https://stackoverflow.com/questions/57292145/why-same-regex-expression-gives-two-different-results/57292170#57292170", "title": "why same regex expression gives two different results?", "body": "<p>Because in the second one you're literally testing for the string <code>messageControlValue</code>. Construct it like so:</p>\n\n<pre><code>let regex2: RegExp = new RegExp(`^${messageControlValue}`);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>let regex2: RegExp = new RegExp(\"^\" + messageControlValue);\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1564580346, "accepted_answer_id": 57292170, "answer_count": 1, "score": -2, "last_activity_date": 1564580679, "creation_date": 1564580269, "last_edit_date": 1564580411, "question_id": 57292145, "link": "https://stackoverflow.com/questions/57292145/why-same-regex-expression-gives-two-different-results", "closed_reason": "Duplicate", "title": "why same regex expression gives two different results?", "body": "<p>Hi I have two typescript snippet . both wants to achieve the same . however console.log prints different value. any idea what is wrong? why the code 2 prints false .</p>\n\n<pre><code>var regex1 = new RegExp(/^FEDEX /)\nvar messagePrefix = \"FEDEX \"\nconsole.log(regex1.test(messagePrefix)); // this prints true \n\nlet messageControlValue:string = \"FEDEX \"\nlet regex2:RegExp = new RegExp(/^messageControlValue/);\nconsole.log(regex2.test(messagePrefix)); // this prints false\n</code></pre>\n\n<p>really appreciatiate any help\nthanks</p>\n"}, {"tags": ["javascript", "angular", "typescript", "internet-explorer", "blur"], "comments": [{"owner": {"reputation": 8001, "user_id": 10309381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a284b365772283540b23d67dbbbd2d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak-MSFT", "link": "https://stackoverflow.com/users/10309381/deepak-msft"}, "edited": false, "score": 0, "creation_date": 1564583583, "post_id": 57291629, "comment_id": 101080757, "body": "I suggest you to try to make a test with any other event to check whether the issue can be produce with any event or the issue is specifically with this event. It can be possible that any events is not calling in IE. For testing purpose, try to remove tabindex=&quot;0&quot; and try to check whether event is working in IE or not."}, {"owner": {"reputation": 5898, "user_id": 3933927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Td4UR.png?s=128&g=1", "display_name": "Stavm", "link": "https://stackoverflow.com/users/3933927/stavm"}, "edited": false, "score": 0, "creation_date": 1564730733, "post_id": 57291629, "comment_id": 101134191, "body": "I&#39;m sorry, but I kinda cringe when I see people trying to rewrite an existing HTML element. in this case, looks like you&#39;re trying to rewrite the select. when dealing with select for example, have you considered accessibility ? are the users using screen-readers, able to hear the option they&#39;re currently selecting ? what happens when they press tab ? shift tab ? side arrow ? esc ? is RTL supported ? Browsers devs had whole teams that did an extensive research, met known standards and thought about edge cases. do you really think you can do better on your own ? do you really want to ?"}], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "is_accepted": true, "score": 2, "last_activity_date": 1564639667, "creation_date": 1564639667, "answer_id": 57302728, "question_id": 57291629, "link": "https://stackoverflow.com/questions/57291629/blur-event-is-not-triggering-in-ie-angular-2/57302728#57302728", "title": "Blur event is not triggering in IE - Angular 2+", "body": "<p>I was able to fix the problem by adding focusout and tabindex=-1 to a div element.\nBut by doing this value was not getting set to my custom dropdown.</p>\n\n<p>The reason for that is when I used focusout, the event was bubbling back to parent and took more time to set the dropdown value after selection.</p>\n\n<p>So I missed to stop the bubbling event, the fix was to stop the propogation.</p>\n\n<pre><code>// html\n&lt;div (focusout)=\"closeDropDown($event)\" tabindex=\"-1\"&gt;&lt;/div&gt;\n\n// ts\ncloseDropDown(event) {\n  event.stopPropogation();\n  this.dropdownOpen = false;\n}\n</code></pre>\n\n<p>The focusout event fires when an element is about to lose focus. The main difference between this event and blur is that focusout bubbles while blur does not.</p>\n\n<p>Find more about this on <a href=\"https://stackoverflow.com/questions/8973532/blur-vs-focusout-any-real-differences\">blur vs focusout -- any real differences?</a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/focusout_event\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Element/focusout_event</a></p>\n"}], "owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 57302728, "answer_count": 1, "score": 1, "last_activity_date": 1564729773, "creation_date": 1564578811, "last_edit_date": 1564729773, "question_id": 57291629, "link": "https://stackoverflow.com/questions/57291629/blur-event-is-not-triggering-in-ie-angular-2", "title": "Blur event is not triggering in IE - Angular 2+", "body": "<p>The below problem is related to <a href=\"https://stackoverflow.com/questions/39259775/blur-not-working-angular-2\">Blur not working - Angular 2</a> thread.</p>\n\n<p>I have a shared component of custom select and I am trying to add a blur event to close when the component is not in focus.</p>\n\n<pre><code>// HTML\n\n&lt;div (blur)=\"closeDropDown()\" tabindex=\"0\"&gt;\n  &lt;span (click)=\"selectClicked()\" class=\"placeholder\"&gt;\n    Select Item \n  &lt;/span&gt;\n  &lt;div class=\"options\"&gt;\n    &lt;ul&gt;\n       &lt;li *ngFor=\"let item of data\"&gt; \n       &lt;span&gt;{{item}}&lt;/span&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<h1>    </h1>\n\n<pre><code>//TS\n\n selectClicked() {\n   this.dropdownOpen = true;\n }\n\n closeDropDown() {\n   this.dropdownOpen = false;\n }\n</code></pre>\n\n<p>I was able to implement the blur event by adding the tabindex mentioned in the thread(works in all browsers except IE). But blur event is not firing in IE(version > 10).</p>\n\n<p>I tried to use focusout instead of blur but the selected value is not getting attached to the custom select and requires many selections to select an option.</p>\n\n<p>Why does blur is not triggering on div and are there any alternatives that I can use on block level elements?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular7", "angular-cdk"], "comments": [{"owner": {"reputation": 1793, "user_id": 6478359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yHXBy.jpg?s=128&g=1", "display_name": "Muhammet Can TONBUL", "link": "https://stackoverflow.com/users/6478359/muhammet-can-tonbul"}, "edited": false, "score": 0, "creation_date": 1564578332, "post_id": 57291193, "comment_id": 101077288, "body": "Can you make simple demo app on &quot;<a href=\"https://stackblitz.com/\" rel=\"nofollow noreferrer\">stackblitz.com</a>&quot; site, and share it?"}, {"owner": {"reputation": 155, "user_id": 10711849, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w2gem6O8NBw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iTKYcWZFiA2oB9vuI6VoiyAOOB0Q/mo/photo.jpg?sz=128", "display_name": "fatma ", "link": "https://stackoverflow.com/users/10711849/fatma"}, "reply_to_user": {"reputation": 1793, "user_id": 6478359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yHXBy.jpg?s=128&g=1", "display_name": "Muhammet Can TONBUL", "link": "https://stackoverflow.com/users/6478359/muhammet-can-tonbul"}, "edited": false, "score": 0, "creation_date": 1564579525, "post_id": 57291193, "comment_id": 101078015, "body": "<a href=\"https://angular-2cdcbb.stackblitz.io\" rel=\"nofollow noreferrer\">angular-2cdcbb.stackblitz.io</a>"}], "owner": {"reputation": 155, "user_id": 10711849, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w2gem6O8NBw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iTKYcWZFiA2oB9vuI6VoiyAOOB0Q/mo/photo.jpg?sz=128", "display_name": "fatma ", "link": "https://stackoverflow.com/users/10711849/fatma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1295, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564579718, "creation_date": 1564577553, "last_edit_date": 1564579718, "question_id": 57291193, "link": "https://stackoverflow.com/questions/57291193/angular-drag-and-drop-cdk-is-not-scrolling-container-when-dragging", "title": "Angular drag and drop cdk is not scrolling container when dragging", "body": "<p>I am developping a frontend app in which i am using angular 7.I am using angular cdk for dragging and dropping elements but the problem is when i make a drag the div container is not scrolling.So is there any sollution for that.</p>\n\n<p><a href=\"https://angular-2cdcbb.stackblitz.io\" rel=\"nofollow noreferrer\">https://angular-2cdcbb.stackblitz.io</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/1CbMS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1CbMS.png\" alt=\"enter image description here\"></a></p>\n\n<p>this is my html </p>\n\n<pre><code>&lt;div class=\"col_container\" &gt;\n  &lt;div class=\"column\" cdkDrag&gt;\n    box\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>this is my css </p>\n\n<pre><code>.col_container {\n  height: 300px;\n  width: 10%;\n  margin: 0 auto;\n  padding: 10px;\n  background-color: yellow;\n  overflow-x: auto;\n  overflow-y: auto;\n  border-style: solid;\n  border-width: 0.1px;\n  border-color: black;\n}\n.column {\n\n  color: blue;\n  background-color: azure;\n  border-style: solid;\n  border-width: 0.1px;\n  border-color: black;\n  display: inline-block;\n  width: 30px;\n  margin: 0 6px;\n  vertical-align:top;\n\n}\n</code></pre>\n\n<p>this is my component </p>\n\n<pre><code>@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'scrollTestForDragAndDrop';\n}\n</code></pre>\n\n<p>the expected behaviour is when i drag the box to the border the yellow div must scroll</p>\n"}, {"tags": ["javascript", "typescript", "d3.js", "intellisense", "jsdoc"], "owner": {"reputation": 33, "user_id": 10769977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TwKY2.png?s=128&g=1", "display_name": "Arthur Foucher", "link": "https://stackoverflow.com/users/10769977/arthur-foucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564577636, "creation_date": 1564577327, "last_edit_date": 1564577636, "question_id": 57291116, "link": "https://stackoverflow.com/questions/57291116/how-can-i-explicitely-set-a-generic-type-in-intellisense-for-javascript", "title": "How can I explicitely set a generic type in intellisense for javascript", "body": "<p>I'm using d3.js v5 and VS Code intellisense via JSDoc for typechecking. I want to generate a line based on data with the type <code>Array&lt;{ value: number }&gt;</code></p>\n\n<p>I'm calling </p>\n\n<pre><code>const lineGenerator = d3\n  .line()\n  .x(function(d, i) {\n    return xScale(i);\n  })\n  .y(function(d) {\n    return yScale(d.value);\n  });\n</code></pre>\n\n<p>However, d3.line has 2 signature:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export function line(): Line&lt;[number, number]&gt;;\n\nexport function line&lt;Datum&gt;(): Line&lt;Datum&gt;;\n</code></pre>\n\n<p>And VS Code's Intellisense is using the first one and complaining that <code>d.value</code> in invalid since <code>d</code> is of type <code>[number, number]</code></p>\n\n<p>In typescript, I'd be able to explicitely say</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const lineGenerator = d3\n  .line&lt;{ value: number}&gt;()\n  // ...\n</code></pre>\n\n<p>But i don't know how to do that with JSDoc and intellisense</p>\n"}, {"tags": ["javascript", "typescript", "comments", "jsdoc"], "answers": [{"comments": [{"owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "edited": false, "score": 0, "creation_date": 1564579692, "post_id": 57291913, "comment_id": 101078130, "body": "Dousse Thank you for the linked example. Greatly appreciate it."}, {"owner": {"reputation": 3284, "user_id": 1841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7626f7fd5a7d9ecc5f84d42c7eea4405?s=128&d=identicon&r=PG", "display_name": "Kewin Dousse", "link": "https://stackoverflow.com/users/1841827/kewin-dousse"}, "reply_to_user": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "edited": false, "score": 1, "creation_date": 1564579782, "post_id": 57291913, "comment_id": 101078180, "body": "No problem. I also added a link to an issue linked to TSDoc which is currently unsolved that might interest you."}], "tags": [], "owner": {"reputation": 3284, "user_id": 1841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7626f7fd5a7d9ecc5f84d42c7eea4405?s=128&d=identicon&r=PG", "display_name": "Kewin Dousse", "link": "https://stackoverflow.com/users/1841827/kewin-dousse"}, "is_accepted": true, "score": 1, "last_activity_date": 1564579722, "last_edit_date": 1564579722, "creation_date": 1564579615, "answer_id": 57291913, "question_id": 57291033, "link": "https://stackoverflow.com/questions/57291033/which-comment-format-is-correct-for-typescript-with-annotations/57291913#57291913", "title": "Which comment format is correct for TypeScript with annotations?", "body": "<p>CompoDoc has an <a href=\"https://compodoc.app/guides/jsdoc-tags.html\" rel=\"nofollow noreferrer\">example</a> of them using the first variation of the syntax you described. So, that means this (quoting their example) :</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>/**\n * @ignore\n */\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.css']\n})\nexport class AppComponent {}\n</code></pre>\n\n<p>However as shows <a href=\"https://github.com/Microsoft/tsdoc/issues/130\" rel=\"nofollow noreferrer\">this issue</a>, there's currently no fixed or official specification on how to write your TSDoc.</p>\n"}], "owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 57291913, "answer_count": 1, "score": 2, "last_activity_date": 1564579722, "creation_date": 1564577035, "last_edit_date": 1564577801, "question_id": 57291033, "link": "https://stackoverflow.com/questions/57291033/which-comment-format-is-correct-for-typescript-with-annotations", "title": "Which comment format is correct for TypeScript with annotations?", "body": "<p>I've been searching for an example of commenting on code that is annotated, all I can find are examples of comments on non annotated code.\nCan anyone clarify the correct or approved standard way of writing this?</p>\n\n<pre><code>/**\n * Description.\n */\n@Component({...})\nclass MyClass{...}\n</code></pre>\n\n<p>Or would this be written as</p>\n\n<pre><code>@Component({...})\n/**\n * Description.\n */\nclass MyClass{...}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "firebase", "mailgun"], "comments": [{"owner": {"reputation": 7928, "user_id": 592958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVNmU.jpg?s=128&g=1", "display_name": "phuzi", "link": "https://stackoverflow.com/users/592958/phuzi"}, "edited": false, "score": 0, "creation_date": 1564577127, "post_id": 57290857, "comment_id": 101076536, "body": "Guessing <code>mg.messages().send(...)</code> returns undefined, not a promise."}, {"owner": {"reputation": 77, "user_id": 2041475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6779983e45d6b41498deb00b9113c40?s=128&d=identicon&r=PG", "display_name": "MikkelT", "link": "https://stackoverflow.com/users/2041475/mikkelt"}, "reply_to_user": {"reputation": 7928, "user_id": 592958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVNmU.jpg?s=128&g=1", "display_name": "phuzi", "link": "https://stackoverflow.com/users/592958/phuzi"}, "edited": false, "score": 0, "creation_date": 1564577621, "post_id": 57290857, "comment_id": 101076853, "body": "the code suggestion says .send() returnPromise&lt;mailgun.messages.SendResponse&gt;, so it is a promise.. just apparently not when deployed."}, {"owner": {"reputation": 7928, "user_id": 592958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVNmU.jpg?s=128&g=1", "display_name": "phuzi", "link": "https://stackoverflow.com/users/592958/phuzi"}, "edited": false, "score": 0, "creation_date": 1564578182, "post_id": 57290857, "comment_id": 101077197, "body": "The documentation has something to say about <a href=\"https://github.com/bojand/mailgun-js/blob/master/docs/promises.md\" rel=\"nofollow noreferrer\">promises</a>. &quot;When a callback is not passed into to a function a Promise is returned...&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 2041475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6779983e45d6b41498deb00b9113c40?s=128&d=identicon&r=PG", "display_name": "MikkelT", "link": "https://stackoverflow.com/users/2041475/mikkelt"}, "edited": false, "score": 0, "creation_date": 1564577551, "post_id": 57291018, "comment_id": 101076814, "body": "Sorry forgot to add that I&#39;ve already tried this, but when I run lint on the function, I still get &quot;Promises must be handled appropriately&quot;. I reckon that mailgun defined their function as a promise, while it somehow isn&#39;t... ? And firebase just notice an unhandled promise and throws an error."}, {"owner": {"reputation": 77, "user_id": 2041475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6779983e45d6b41498deb00b9113c40?s=128&d=identicon&r=PG", "display_name": "MikkelT", "link": "https://stackoverflow.com/users/2041475/mikkelt"}, "edited": false, "score": 0, "creation_date": 1564578078, "post_id": 57291018, "comment_id": 101077138, "body": "I solved it haha... I just removed the (error, body) callback altogether. Then .catch and .then worked. No try-catch block needed as well!"}], "tags": [], "owner": {"reputation": 1550, "user_id": 11758131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4861bdb6ad28707418f6edc56d3fbd45?s=128&d=identicon&r=PG&f=1", "display_name": "Gibor", "link": "https://stackoverflow.com/users/11758131/gibor"}, "is_accepted": true, "score": 0, "last_activity_date": 1564577303, "last_edit_date": 1564577303, "creation_date": 1564576992, "answer_id": 57291018, "question_id": 57290857, "link": "https://stackoverflow.com/questions/57290857/getting-typeerror-cannot-read-property-catch-of-undefined-when-executing-a/57291018#57291018", "title": "Getting &quot;TypeError: Cannot read property &#39;catch&#39; of undefined&quot; when executing a mailgun cloud function in firebase", "body": "<p>That is because send is probably not returning a promise, it uses the callback method instead. you can notice that because you pass it a function which recieves the returning data in the line <code>mg.messages().send(sendData, *(error, body)* =&gt; {</code>.</p>\n\n<p>This means there is no <code>catch</code> phrase that can come after it. You get the error inside the callback function , so just handle it there, or if u really want you can wrap it with try and throw out the error, than catch it outside, like this: </p>\n\n<pre><code>try {\n   mg.messages().send(sendData, (error, body) =&gt; {\n       if (error) { throw new Error(error); }\n       console.log(\"message sent:\", body);\n   })\n} catch(e) {\n // handle error\n}\n</code></pre>\n\n<p>As a side note, I went to mailgun-js github repo to try and get you a documentation example, and i saw it is archived and no longer supported... you might wanna consider using another library :)</p>\n\n<p>Also, <a href=\"https://medium.com/codebuddies/getting-to-know-asynchronous-javascript-callbacks-promises-and-async-await-17e0673281ee\" rel=\"nofollow noreferrer\">here</a> is a nice article I found which explains pretty good the whole callbacks / promises / async-await mess, what are the differences and how and when to use each, if you want to read more.</p>\n"}], "owner": {"reputation": 77, "user_id": 2041475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6779983e45d6b41498deb00b9113c40?s=128&d=identicon&r=PG", "display_name": "MikkelT", "link": "https://stackoverflow.com/users/2041475/mikkelt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 1, "accepted_answer_id": 57291018, "answer_count": 1, "score": 0, "last_activity_date": 1564579598, "creation_date": 1564576470, "last_edit_date": 1564579598, "question_id": 57290857, "link": "https://stackoverflow.com/questions/57290857/getting-typeerror-cannot-read-property-catch-of-undefined-when-executing-a", "title": "Getting &quot;TypeError: Cannot read property &#39;catch&#39; of undefined&quot; when executing a mailgun cloud function in firebase", "body": "<p>I am trying to send an email using mailgun and firebase cloud functions. The mail IS sent, but still returns an error that crashes my app. I believe this is caused by the error: \nTypeError: Cannot read property 'catch' of undefined\n    at exports.sendReportRequest.functions.https.onRequest (/srv/lib/index.js:57:9)</p>\n\n<p>In my code, I am using mailgun's mailgun-js module to send the email, and I have copied code straight from the documentation. However, firebase requires that I \"handle promises correctly\", ie uses .catch to catch any errors. However, once deployed, it seems that firebase doesn't recognize .send() as a promise, and throws an error.</p>\n\n<p>This is for a flutter application, and whenever I run the cloud function, my app crashes, and the functions throws an error in the firebase logs.</p>\n\n<p>I am already using the blaze plan, so external API calls work. In fact, the email IS sent, but still throws an error that crashes my app. There are no problems with domain and apikey, else email wouldnt be sent.</p>\n\n<p>I have tried using onRequest, onCall and trigger functions, but they all throw the same error.</p>\n\n<p>I've tried returning the promise and not returning, but to no avail. Right now I am not returning anything (or returning void).</p>\n\n<pre><code>// MailGun cloud function\nexport const sendReportRequest = functions.https.onCall((data, context) =&gt; {\n    console.log(\"REPORT SENT\");\n    const sendData = {\n        from: 'Excited User &lt;me@samples.mailgun.org&gt;',\n        to: 'xxxx@gmail.com',\n        subject: 'Hello',\n        text: 'Testing some Mailgun awesomeness!'\n    };\n\n    mg.messages().send(sendData, (error, body) =&gt; {\n        if (error) { console.log(\"error!\", error); }\n        console.log(\"message sent:\", body);\n    })\n        .catch((err) =&gt; { console.log(\"error\", err); });\n});\n</code></pre>\n\n<p><strong>Error</strong> </p>\n\n<pre><code>TypeError: Cannot read property 'catch' of undefined\n    at Object.&lt;anonymous&gt; (/srv/lib/index.js:55:9)\n    at Generator.next (&lt;anonymous&gt;)\n    at /srv/lib/index.js:7:71\n    at new Promise (&lt;anonymous&gt;)\n    at __awaiter (/srv/lib/index.js:3:12)\n    at exports.sendReportRequest.functions.https.onRequest (/srv/lib/index.js:43:69)\n    at cloudFunction (/srv/node_modules/firebase-functions/lib/providers/https.js:57:9)\n    at /worker/worker.js:783:7\n    at /worker/worker.js:766:11\n    at _combinedTickCallback (internal/process/next_tick.js:132:\n</code></pre>\n"}, {"tags": ["java", "angular", "typescript"], "comments": [{"owner": {"reputation": 33331, "user_id": 1898563, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d99204bcce923f40f5c72b7f80121644?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1898563/michael"}, "edited": false, "score": 0, "creation_date": 1564576464, "post_id": 57290830, "comment_id": 101076130, "body": "Define a json schema and auto-generate both from the schema. <a href=\"https://www.npmjs.com/package/json-schema-to-typescript\" rel=\"nofollow noreferrer\">to Typescript</a> and <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">to Java</a>"}, {"owner": {"reputation": 1339, "user_id": 5650224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tY2JZ.png?s=128&g=1", "display_name": "m4gic", "link": "https://stackoverflow.com/users/5650224/m4gic"}, "edited": false, "score": 0, "creation_date": 1564576559, "post_id": 57290830, "comment_id": 101076186, "body": "or simpy use a <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">generator</a>"}, {"owner": {"reputation": 448, "user_id": 5846513, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fea2a51770e3caa0162652b2f131fc9f?s=128&d=identicon&r=PG&f=1", "display_name": "nour", "link": "https://stackoverflow.com/users/5846513/nour"}, "edited": false, "score": 0, "creation_date": 1564577568, "post_id": 57290830, "comment_id": 101076828, "body": "you can use swagger to convert your java dtos to typescript interfaces"}], "owner": {"reputation": 39, "user_id": 11857726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/657c997becffe4fd426fa1877705b173?s=128&d=identicon&r=PG&f=1", "display_name": "mitha.s", "link": "https://stackoverflow.com/users/11857726/mitha-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564577839, "creation_date": 1564576388, "last_edit_date": 1564577522, "question_id": 57290830, "link": "https://stackoverflow.com/questions/57290830/java-datatypes-to-typescript-types", "title": "Java datatypes to Typescript types", "body": "<p>I am trying to create an Interface in Angular 8. I would like to have type defined for every Json property and the back-end uses Spring/Java</p>\n\n<pre><code>Java Code and types:\nprivate TestDto(\n    @JsonProperty(\"id\") **String** id,\n    @JsonProperty(\"version\") **long** version,\n    @JsonProperty(\"modifyDate\") **Instant** modifyDate,\n    @JsonProperty(\"duration\") **Duration** duration,\n    @JsonProperty(\"testValue\") **Float** testValue\n)\n\nWhat should be in the Angular Interface?\nexport interface Example {\n    id: string;\n    version:\n    modifyDate:\n    duration:\n    testValue:\n}\n\nThank you in advance.\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-reactive-forms"], "comments": [{"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1564576520, "post_id": 57290784, "comment_id": 101076167, "body": "You could probably use a directive to do it. You would need a regex and if it doesn&#39;t match, you add the default text back or something like that."}, {"owner": {"reputation": 882, "user_id": 1549737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/io8fX.png?s=128&g=1", "display_name": "tmcc", "link": "https://stackoverflow.com/users/1549737/tmcc"}, "edited": false, "score": 0, "creation_date": 1564578672, "post_id": 57290784, "comment_id": 101077481, "body": "Don&#39;t do anything in the textarea, prepend &#39;RMO&#39; to the front at submission time.       const valueToActOn = <code>RMO${formfieldvalue}</code>"}, {"owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1564578719, "post_id": 57290784, "comment_id": 101077512, "body": "that solution the customer and manager dont like unfortunately"}, {"owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "reply_to_user": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1564582204, "post_id": 57290784, "comment_id": 101079843, "body": "@ukn i am using a regex now . however it still dont work.  ensureMessagePrefixNonEditable(inputTxtMsg: string){      let originalValue: string = inputTxtMsg;      let messagePrefixSearchWithSpace: string = this.messagePrefix.concat(&#39; &#39;);      let regex: RegExp = new RegExp(&quot;^&quot; + originalValue+ &quot;$&quot;);      if(!regex.test(messagePrefixSearchWithSpace)){       this.messageControl.patchValue(originalValue);     }    }"}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1564583440, "post_id": 57290784, "comment_id": 101080653, "body": "You could just prevent the keydown event if it doesnt match your regex"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1564582906, "post_id": 57292059, "comment_id": 101080306, "body": "i am using reactive form (ngModelChange)=&quot;doSomething($event)&quot;. will this applicable ?"}], "tags": [], "owner": {"reputation": 882, "user_id": 1549737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/io8fX.png?s=128&g=1", "display_name": "tmcc", "link": "https://stackoverflow.com/users/1549737/tmcc"}, "is_accepted": true, "score": 1, "last_activity_date": 1564585122, "last_edit_date": 1564585122, "creation_date": 1564580026, "answer_id": 57292059, "question_id": 57290784, "link": "https://stackoverflow.com/questions/57290784/why-i-am-not-able-to-make-the-text-area-partially-non-editable-in-angular-5-and/57292059#57292059", "title": "why i am not able to make the text area partially non editable in angular 5 and typescript?", "body": "<p>angular reactive forms version using ngModelChange event handler</p>\n\n<pre><code>private currentValue = \"\";\n\nconstructor(\n    private formBuilder: FormBuilder,\n) {\n    this.loginForm = this.formBuilder.group({\n        messageTxt: [\"\", Validators.required]\n    });\n}\n\npublic async ngOnInit() {\n    this.loginForm.controls[\"messageTxt\"].setValue(\"RMO\");\n    this.currentValue = \"RMO\";\n}\n\npublic keepRMO($event) {\n    let prefix = \"RMO\";\n    if ($event.substring(0, 3) !== prefix) {\n        alert(\"You are not allowed to remove the first three characters('RMO')\");\n        this.loginForm.controls[\"messageTxt\"].setValue(this.currentValue);\n    } else {\n        this.currentValue = $event;\n\n    }\n}\n</code></pre>\n\n<p>html:</p>\n\n<pre><code>&lt;textarea\nclass=\"form-control\"\nname=\"messageTxt\"\nid=\"messageTxt\"\nformControlName=\"messageTxt\"\nrows=\"6\"\n(ngModelChange)=\"keepRMO($event)\"\n&gt;&lt;/textarea&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "is_accepted": false, "score": 1, "last_activity_date": 1564584216, "creation_date": 1564584216, "answer_id": 57293428, "question_id": 57290784, "link": "https://stackoverflow.com/questions/57290784/why-i-am-not-able-to-make-the-text-area-partially-non-editable-in-angular-5-and/57293428#57293428", "title": "why i am not able to make the text area partially non editable in angular 5 and typescript?", "body": "<p>This is the directive I would use, you might need to adapt it. It check if the text contained in the input match your regex otherwise prevent the keydown. </p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;textarea regexDirective=\"your regex\"&gt;&lt;/textarea&gt;\n</code></pre>\n\n<p>Directive:</p>\n\n<pre><code>@Directive({\n    selector: '[regexDirective]'\n})\n export class RestrictToPatternDirective {\n        @Input() appRestrictToPattern = ''; // should be your regex passed as an input in case it needs to be reusable\n\n        constructor(private elementRef: ElementRef) { }\n\n        @HostListener('keydown', ['$event']) onKeyDown(e: KeyboardEvent): void {\n            if (new RegExp(this.appRestrictToPattern).test(this.elementRef.nativeElement.value + e.key)) {\n                // let it happen, don't do anything\n                return;\n            }  else {\n                e.preventDefault();\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 57292059, "answer_count": 2, "score": 0, "last_activity_date": 1564585122, "creation_date": 1564576241, "last_edit_date": 1564582738, "question_id": 57290784, "link": "https://stackoverflow.com/questions/57290784/why-i-am-not-able-to-make-the-text-area-partially-non-editable-in-angular-5-and", "title": "why i am not able to make the text area partially non editable in angular 5 and typescript?", "body": "<p>I am having an angular project developed using angular 5 and typescript . In my component's html template I have an text area box. I want to make the first few characters non editable in this text area. </p>\n\n<p>So for example from my components ts file i can set the initial value, for example : \"RMO \" to my text area .</p>\n\n<p>The user cannot remove the text \"RMO \" which is set in the text area.</p>\n\n<p>i have got some jquery code to achieve this (<a href=\"http://jsfiddle.net/zq4c873L/1/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/zq4c873L/1/</a>)  and i  convert it to typescript code. however it is not working as well</p>\n\n<p>so this is my text area defined in the components html template.</p>\n\n<pre><code>&lt;textarea id=\"messageTxt\" formControlName=\"message\" rows=\"6\" [placeholder]=\"'PLACEHOLDERS.MESSAGE' | translate\" (keydown)=\"ensureMessagePrefixNonEditable(messageTxt.value)\" (keyup)=\"calculateMessagingSegmentCount(messageTxt.value)\" #messageTxt&gt;&lt;/textarea&gt;\n</code></pre>\n\n<p>there is a function that is triggered whenever the user press a key down. ie ensureMessagePrefixNonEditable(messageTxt.value). this function tries to replace the old value if it doesn't match the text area content with a specific search string. The following is my function .</p>\n\n<pre><code>ensureMessagePrefixNonEditable(inputTxtMsg: string){\n console.log(inputTxtMsg);\n    let originalValue: string = inputTxtMsg;\n    if( !inputTxtMsg.startsWith(this.messagePrefix.concat(' ')) ) {\n    this.messageControl.setValue(originalValue);\n    }\n}\n</code></pre>\n\n<p>however the problem is i am able to remove the predefined value from the text area. any idea what am is wrong in the function ensureMessagePrefixNonEditable. really appreciate any help thank you</p>\n\n<p>i also rewrite my funtion as follows but still the problem</p>\n\n<pre><code>  ensureMessagePrefixNonEditable(inputTxtMsg: string){\n\n    let originalValue: string = inputTxtMsg;\n\n    let messagePrefixSearchWithSpace: string = this.messagePrefix.concat(' ');\n\n    let regex: RegExp = new RegExp(\"^\" + originalValue+ \"$\");\n\n    if(!regex.test(messagePrefixSearchWithSpace)){\n      this.messageControl.setValue(originalValue);\n      this.formGroup.patchValue( {message: originalValue });\n    }\n\n  }\n</code></pre>\n\n<p>i can see it enters inside the if block, however           this.formGroup.patchValue( {message: originalValue }); didnt set the message text area with the original string in the UI.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "edited": false, "score": 0, "creation_date": 1564575725, "post_id": 57290603, "comment_id": 101075695, "body": "It&#39;s very unclear to me what you want to achieve. Maybe <code>throttleTime</code> does what you want?"}, {"owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "reply_to_user": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "edited": false, "score": 0, "creation_date": 1564575875, "post_id": 57290603, "comment_id": 101075776, "body": "@martin I&#39;m attempting to debounce input then make an API call. Should new input come in the debounce will wait for input to stop before emitting the resulting value. I would like the active API call (if there is one) to be cancelled when the debounce is waiting, not after it has emitted which is current behaviour. Thanks for the info ill look into <code>throttleTime</code>"}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1564576201, "post_id": 57290603, "comment_id": 101075981, "body": "Then you should <code>concat</code> your api calls. <a href=\"https://www.learnrxjs.io/operators/combination/concat.html\" rel=\"nofollow noreferrer\">learnrxjs.io/operators/combination/concat.html</a>"}, {"owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "reply_to_user": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1564576466, "post_id": 57290603, "comment_id": 101076132, "body": "@ritaj Sorry i&#39;m struggling to see how to apply that, im only triggering a single API call when the debounce emits a value?"}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1564576779, "post_id": 57290603, "comment_id": 101076307, "body": "I&#39;ll post an answer."}, {"owner": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "edited": false, "score": 0, "creation_date": 1564577041, "post_id": 57290603, "comment_id": 101076483, "body": "@ste2425 From what you describe it looks like you don&#39;t want to be using <code>debounceTime</code> at all. <code>switchMap</code> will unsubscribe from the previous calls for you. Maybe <code>throttleTime</code> with the config object is really what you want. Otherwise if you could make marble diagram of what output you expect that would be very helpful."}, {"owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "reply_to_user": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "edited": false, "score": 0, "creation_date": 1564578513, "post_id": 57290603, "comment_id": 101077392, "body": "@martin i have seen marble diagrams in the docs and they have confused me no end. Been putting of learning how on earth to read them, guess i need to get on with it thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "edited": false, "score": 0, "creation_date": 1564577097, "post_id": 57290975, "comment_id": 101076521, "body": "Ahh i understand now, thanks for going to the effort of an example. However this isn&#39;t the behaviour im after. <code>keys</code> will be the search terms a user entered in a input. I need it to cancel a previous pending request whenever a new search term is emitted, but only issue a new API after a debounced period of time. I think that is a better explanation, ill update the OP!"}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "reply_to_user": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "edited": false, "score": 0, "creation_date": 1564577512, "post_id": 57290975, "comment_id": 101076793, "body": "Oh, I believe you just want to add <code>takeUntil</code> then. I&#39;ll edit the answer."}], "tags": [], "owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "is_accepted": false, "score": 2, "last_activity_date": 1564577555, "last_edit_date": 1564577555, "creation_date": 1564576817, "answer_id": 57290975, "question_id": 57290603, "link": "https://stackoverflow.com/questions/57290603/switchmap-and-debouncetime-cancel-pending/57290975#57290975", "title": "switchMap and debounceTime cancel pending", "body": "<p>I believe this should work for you:</p>\n\n<p>Use <code>concat</code> so the second emission waits for the first one to complete.</p>\n\n<pre><code>const getFromAPI = (key: string): Observable&lt;number&gt; =&gt; {\n    return;\n};\n\nconst keys: Observable&lt;string&gt; = new Observable();\n\nconcat(\n    keys.pipe(\n        debounceTime(500),\n        switchMap(key =&gt; getFromAPI(key)),\n        take(1)\n    )\n).subscribe(console.log);\n</code></pre>\n\n<p>Another example:</p>\n\n<pre><code>const getFromAPI = (key: string): Observable&lt;number&gt; =&gt; {\n    return;\n};\n\nconst keys: Observable&lt;string&gt; = new Observable();\n\nconst debouncedKeys = keys.pipe(debounceTime(500));\n\nconcat(\n    debouncedKeys.pipe(\n        switchMap(key =&gt; getFromAPI(key)),\n        take(1),\n        takeUntil(debouncedKeys)\n    )\n).subscribe(console.log);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "edited": false, "score": 0, "creation_date": 1564578649, "post_id": 57291229, "comment_id": 101077469, "body": "Thanks for your time and help, however the accepted answer solved my problem."}], "tags": [], "owner": {"reputation": 71, "user_id": 11860686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8613cbc80df9e4115189c3725b9cf?s=128&d=identicon&r=PG&f=1", "display_name": "fhewitt", "link": "https://stackoverflow.com/users/11860686/fhewitt"}, "is_accepted": false, "score": 1, "last_activity_date": 1564578546, "last_edit_date": 1564578546, "creation_date": 1564577632, "answer_id": 57291229, "question_id": 57290603, "link": "https://stackoverflow.com/questions/57290603/switchmap-and-debouncetime-cancel-pending/57291229#57291229", "title": "switchMap and debounceTime cancel pending", "body": "<p>Unsure here, need to be explored, but you could transform the _sub into two observables, one will be debounced and returns the original query, the second is not debounced and returned null/undefined.</p>\n\n<p>Then you merge them both and call the switchMap.</p>\n\n<p>The undebounced observable should allow you to cancel the call because it will reach the switchmap too. In with case the switchMap could return an empty or never observable. And you recreate the API call only when it's the debounched observable that came in with the value.</p>\n\n<p>Something like that?</p>\n\n<pre><code>const debounced = this._sub.pipe(debounceTime(500), filter(x =&gt; !!x), distinctUntilChanged());\nconst undebounced = this._sub.pipe(map(_ =&gt; undefined));\n\nmerge(debounced, undebounced).pipe(\n    switchMap(val =&gt; {\n        if (val) {\n            return this.getResults(val);\n        } else {\n            return never;\n        }\n    })\n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "edited": false, "score": 0, "creation_date": 1564578607, "post_id": 57291445, "comment_id": 101077443, "body": "Thanks this worked great! Looking at the docs and your comment it makes sense too."}], "tags": [], "owner": {"reputation": 8533, "user_id": 9423231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54730771ababc9c107cf6dac3087b23?s=128&d=identicon&r=PG&f=1", "display_name": "frido", "link": "https://stackoverflow.com/users/9423231/frido"}, "is_accepted": true, "score": 4, "last_activity_date": 1564578324, "creation_date": 1564578324, "answer_id": 57291445, "question_id": 57290603, "link": "https://stackoverflow.com/questions/57290603/switchmap-and-debouncetime-cancel-pending/57291445#57291445", "title": "switchMap and debounceTime cancel pending", "body": "<p>Use <code>takeUntil</code> to cancel your requests whenever <code>this._sub</code> emits.</p>\n\n<pre><code>this._sub.pipe(\n    debounceTime(500),\n    filter(x =&gt; !!x),\n    distinctUntilChanged(),\n    switchMap(searchTerm =&gt; this.getResults(searchTerm).pipe(\n      takeUntil(this._sub)\n    ))\n).subscribe((d: IDisplayEmp[]) =&gt; {\n    console.log('RES', d)\n    this.displayResults = d;\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 612, "user_id": 5253897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155939497895076/picture?type=large", "display_name": "Christian Jensen", "link": "https://stackoverflow.com/users/5253897/christian-jensen"}, "edited": false, "score": 0, "creation_date": 1592948029, "post_id": 62543975, "comment_id": 110606875, "body": "This is actually one line shorter than using <code>takeUntil</code> as well, since you don&#39;t have to use <code>debounceTime</code> and both require an inner pipe inside your <code>switchMap</code>."}], "tags": [], "owner": {"reputation": 612, "user_id": 5253897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155939497895076/picture?type=large", "display_name": "Christian Jensen", "link": "https://stackoverflow.com/users/5253897/christian-jensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1592947412, "creation_date": 1592947412, "answer_id": 62543975, "question_id": 57290603, "link": "https://stackoverflow.com/questions/57290603/switchmap-and-debouncetime-cancel-pending/62543975#62543975", "title": "switchMap and debounceTime cancel pending", "body": "<p>The accepted answer should work fine, but I wanted to share another way you can do this with <code>timer</code> instead of <code>debounceTime</code>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>this._sub.pipe(\n    filter(x =&gt; !!x),\n    distinctUntilChanged(),\n    switchMap(val =&gt; timer(500).pipe(\n        switchMap(() =&gt; this.getResults(val))\n    ))\n).subscribe(...);\n</code></pre>\n<p>Now, if an emissions reaches <code>switchMap</code>, the <code>timer</code> and everything in it (including an active network request) will be canceled, and a new <code>timer</code> will be created.</p>\n"}], "owner": {"reputation": 4193, "user_id": 3212848, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e9cc206f0d853edeedcbce8d6c00860?s=128&d=identicon&r=PG", "display_name": "ste2425", "link": "https://stackoverflow.com/users/3212848/ste2425"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2978, "favorite_count": 1, "accepted_answer_id": 57291445, "answer_count": 4, "score": 2, "last_activity_date": 1592947412, "creation_date": 1564575578, "question_id": 57290603, "link": "https://stackoverflow.com/questions/57290603/switchmap-and-debouncetime-cancel-pending", "title": "switchMap and debounceTime cancel pending", "body": "<p>I have a method that will search for employee's based on a search term.</p>\n\n<pre><code>this._sub.pipe(\n    debounceTime(500),\n    filter(x =&gt; !!x),\n    distinctUntilChanged(),\n    switchMap(this.getResults.bind(this))\n).subscribe((d: IDisplayEmp[]) =&gt; {\n    console.log('RES', d)\n    this.displayResults = d;\n});\n\nthis._sub.next('mySearchTerm');\n</code></pre>\n\n<p>This works great, previous API calls are cancelled if a new one is issued. However here comes the issue.</p>\n\n<p>Active API calls are only cancelled when the debounce has emitted. If an active API call returns whilst the debounce is waiting it still triggers my subscribe.</p>\n\n<p>I understand this is because the cancelling only happens within the scope of the switchmap.</p>\n\n<p>Is possible to refactor this so that if the debounce is waiting for input to stop it will cancel any pending API calls?</p>\n\n<p>Probably a naive approach but i attempted something like below, it emits values but now there is no debounce in effect.</p>\n\n<pre><code>this._sub.pipe(\n    filter(x =&gt; !!x),\n    distinctUntilChanged(),\n    switchMap((x) =&gt; {\n        return of(x)\n            .pipe(\n                debounceTime(500),\n                this.getResults.bind(this)\n            );\n    })\n).subscribe((d: IDisplayEmp[]) =&gt; {\n    console.log('RES', d)\n    this.displayResults = d;\n});\n</code></pre>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1564576344, "post_id": 57290484, "comment_id": 101076063, "body": "Install node, install tsc, write your program <code>console.log(&#39;Hello world&#39;);</code> in a <code>hello-world.ts</code> file. Run <code>tsc hello-world.ts</code>, that will transpile your <code>.ts</code> to <code>.js</code>. Now with JS you can either attach it to <code>index.html</code> or run it with node.js."}], "answers": [{"comments": [{"owner": {"reputation": 915, "user_id": 4151169, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-Ht0XHN7LwBQ/AAAAAAAAAAI/AAAAAAAAABg/K-vq6En_sMo/photo.jpg?sz=128", "display_name": "noitse", "link": "https://stackoverflow.com/users/4151169/noitse"}, "edited": false, "score": 0, "creation_date": 1564577481, "post_id": 57290761, "comment_id": 101076765, "body": "And what makes you think it&#39;s not a &quot;real&quot; language :) If Microsoft defines it as programing language, why can&#39;t you :)"}, {"owner": {"reputation": 371, "user_id": 4420482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gpXFg.png?s=128&g=1", "display_name": "Kashkashio", "link": "https://stackoverflow.com/users/4420482/kashkashio"}, "reply_to_user": {"reputation": 915, "user_id": 4151169, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-Ht0XHN7LwBQ/AAAAAAAAAAI/AAAAAAAAABg/K-vq6En_sMo/photo.jpg?sz=128", "display_name": "noitse", "link": "https://stackoverflow.com/users/4151169/noitse"}, "edited": false, "score": 0, "creation_date": 1564577640, "post_id": 57290761, "comment_id": 101076864, "body": "haha i&#39;m just being strict... my main everyday programming language is TS and one of my favourites. but as a Junior it can be confusing.. you are breaking into an open door ;) i think you cannot use typescript without understanding what stands behind it and how it related to javascript."}, {"owner": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "edited": false, "score": 0, "creation_date": 1564578963, "post_id": 57290761, "comment_id": 101077657, "body": "Well, with your logic we should also understand machine code, as in the end typescript is executed as low level instructions. And, you can execute a .ts file or ts statement with ts-node."}, {"owner": {"reputation": 371, "user_id": 4420482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gpXFg.png?s=128&g=1", "display_name": "Kashkashio", "link": "https://stackoverflow.com/users/4420482/kashkashio"}, "edited": false, "score": 0, "creation_date": 1564579328, "post_id": 57290761, "comment_id": 101077891, "body": "C&#39;mon i didn&#39;t say running .ts files is impossible. i have seen a &quot;junior&quot; question and found it reasonable to give a basic answer that will help to proceed. i&#39;m sad you didn&#39;t liked it."}], "tags": [], "owner": {"reputation": 371, "user_id": 4420482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gpXFg.png?s=128&g=1", "display_name": "Kashkashio", "link": "https://stackoverflow.com/users/4420482/kashkashio"}, "is_accepted": false, "score": -2, "last_activity_date": 1564577067, "last_edit_date": 1564577067, "creation_date": 1564576153, "answer_id": 57290761, "question_id": 57290484, "link": "https://stackoverflow.com/questions/57290484/how-we-write-and-run-hello-world-program-in-types-script-in-note-pad/57290761#57290761", "title": "How we write and run &quot;hello world&quot; program in Types Script in Note Pad", "body": "<p>Okay, why in the name of god you would like to do that?</p>\n\n<p>TypeScript is not a real language, its just a wrapper for native javascript which is the only language nodejs can use.. there is a \"tsc\" which is the TypeScript Compiler.. it has no connection to the IDE you are working with. you could write the code in NotePad and then you'll have to run the compiler which result in javascript files output that you can run with simple \n<code>node xxx.js</code> command..</p>\n\n<p>The IDE just makes it easier and shorter and dose the copmiling task for you and keeps clean and convenient environment.. </p>\n\n<p>Hope this info helps in certain way</p>\n"}], "owner": {"reputation": 1, "user_id": 10585487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032f0fe810ddbec1af7312c06ecc4fc2?s=128&d=identicon&r=PG&f=1", "display_name": "MaheshMudike", "link": "https://stackoverflow.com/users/10585487/maheshmudike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564577067, "creation_date": 1564575155, "question_id": 57290484, "link": "https://stackoverflow.com/questions/57290484/how-we-write-and-run-hello-world-program-in-types-script-in-note-pad", "title": "How we write and run &quot;hello world&quot; program in Types Script in Note Pad", "body": "<p>i want write and run  a simple \"hello world\" program in typescript in Note Pad with out using the Visual Studio code ,</p>\n"}, {"tags": ["typescript", "visual-studio-code", "intellisense"], "comments": [{"owner": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "edited": false, "score": 0, "creation_date": 1564575373, "post_id": 57289899, "comment_id": 101075522, "body": "You mean to disable one of the sources from auto suggestions, right?"}, {"owner": {"reputation": 45, "user_id": 10985470, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jy-V6D17F-M/AAAAAAAAAAI/AAAAAAAAAKE/JSUeEExzf3E/photo.jpg?sz=128", "display_name": "Charalampos Fanoulis", "link": "https://stackoverflow.com/users/10985470/charalampos-fanoulis"}, "reply_to_user": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "edited": false, "score": 0, "creation_date": 1564576379, "post_id": 57289899, "comment_id": 101076085, "body": "Not necessarily @Do\u011fancanArabac\u0131"}], "owner": {"reputation": 45, "user_id": 10985470, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jy-V6D17F-M/AAAAAAAAAAI/AAAAAAAAAKE/JSUeEExzf3E/photo.jpg?sz=128", "display_name": "Charalampos Fanoulis", "link": "https://stackoverflow.com/users/10985470/charalampos-fanoulis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564573174, "creation_date": 1564573174, "question_id": 57289899, "link": "https://stackoverflow.com/questions/57289899/how-to-select-the-imported-module-on-intellisense", "title": "How to select the imported module on IntelliSense?", "body": "<p>Is there any way to select which module VSC imports when I use intellisense? In other words:</p>\n\n<ul>\n<li>I have module A and module B, which both export the function <code>ask()</code></li>\n<li>How can I tell VSC to import module B's implementation of <code>ask()</code>?</li>\n</ul>\n"}, {"tags": ["javascript", "typescript", "react-native"], "comments": [{"owner": {"reputation": 340, "user_id": 11801477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8T0zA.png?s=128&g=1", "display_name": "bekanur98", "link": "https://stackoverflow.com/users/11801477/bekanur98"}, "edited": false, "score": 0, "creation_date": 1564572607, "post_id": 57289702, "comment_id": 101073982, "body": "interface OwnProps extends ComponentProps {       speciesSelection: any;     }"}, {"owner": {"reputation": 1104, "user_id": 6667328, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECmigumf0ys/AAAAAAAAAAI/AAAAAAAAFWI/I_CjdY2RTZE/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/6667328/sanyam-jain"}, "edited": false, "score": 0, "creation_date": 1564572617, "post_id": 57289702, "comment_id": 101073989, "body": "Can you post full code?"}, {"owner": {"reputation": 1778, "user_id": 9750662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b512d0e6e73b0b01c8a0ea6e94df6bf2?s=128&d=identicon&r=PG&f=1", "display_name": "remeus", "link": "https://stackoverflow.com/users/9750662/remeus"}, "edited": false, "score": 0, "creation_date": 1564572626, "post_id": 57289702, "comment_id": 101073992, "body": "Can you show the part where you are calling <code>onPrefixPress</code>?"}, {"owner": {"reputation": 340, "user_id": 11801477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8T0zA.png?s=128&g=1", "display_name": "bekanur98", "link": "https://stackoverflow.com/users/11801477/bekanur98"}, "edited": false, "score": 0, "creation_date": 1564572708, "post_id": 57289702, "comment_id": 101074042, "body": "<code>&lt;Button           onPress={() =&gt; this.onPrefixPress()}           transparent           style={styles.btn}         &gt;</code>"}, {"owner": {"reputation": 340, "user_id": 11801477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8T0zA.png?s=128&g=1", "display_name": "bekanur98", "link": "https://stackoverflow.com/users/11801477/bekanur98"}, "reply_to_user": {"reputation": 1104, "user_id": 6667328, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECmigumf0ys/AAAAAAAAAAI/AAAAAAAAFWI/I_CjdY2RTZE/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/6667328/sanyam-jain"}, "edited": false, "score": 0, "creation_date": 1564573002, "post_id": 57289702, "comment_id": 101074211, "body": "@SanyamJain code so big"}, {"owner": {"reputation": 1104, "user_id": 6667328, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECmigumf0ys/AAAAAAAAAAI/AAAAAAAAFWI/I_CjdY2RTZE/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/6667328/sanyam-jain"}, "edited": false, "score": 0, "creation_date": 1564573032, "post_id": 57289702, "comment_id": 101074229, "body": "Post BarcodeInput component and where you are impl that component."}, {"owner": {"reputation": 864, "user_id": 5554515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb985d5c3dbe86d3794ed811249773c?s=128&d=identicon&r=PG&f=1", "display_name": "Moyote", "link": "https://stackoverflow.com/users/5554515/moyote"}, "edited": false, "score": 0, "creation_date": 1564573053, "post_id": 57289702, "comment_id": 101074242, "body": "Please post the part where you render &lt;BarcodeInput /&gt;"}, {"owner": {"reputation": 1104, "user_id": 6667328, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECmigumf0ys/AAAAAAAAAAI/AAAAAAAAFWI/I_CjdY2RTZE/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/6667328/sanyam-jain"}, "edited": false, "score": 1, "creation_date": 1564573558, "post_id": 57289702, "comment_id": 101074525, "body": "Use <a href=\"https://www.hastebin.com\" rel=\"nofollow noreferrer\">hastebin.com</a> / <a href=\"http://del.dog\" rel=\"nofollow noreferrer\">del.dog</a> / <a href=\"https://gist.github.com\" rel=\"nofollow noreferrer\">gist.github.com</a>"}, {"owner": {"reputation": 340, "user_id": 11801477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8T0zA.png?s=128&g=1", "display_name": "bekanur98", "link": "https://stackoverflow.com/users/11801477/bekanur98"}, "reply_to_user": {"reputation": 1104, "user_id": 6667328, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECmigumf0ys/AAAAAAAAAAI/AAAAAAAAFWI/I_CjdY2RTZE/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/6667328/sanyam-jain"}, "edited": false, "score": 0, "creation_date": 1564574008, "post_id": 57289702, "comment_id": 101074779, "body": "@SanyamJain [<a href=\"https://gist.github.com/bekanur98/7f8fe4a6f6b3e13bebf91a30bf865068\" rel=\"nofollow noreferrer\">gist.github.com/bekanur98/7f8fe4a6f6b3e13bebf91a30bf865068</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1104, "user_id": 6667328, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECmigumf0ys/AAAAAAAAAAI/AAAAAAAAFWI/I_CjdY2RTZE/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/6667328/sanyam-jain"}, "is_accepted": true, "score": 1, "last_activity_date": 1564577111, "creation_date": 1564577111, "answer_id": 57291065, "question_id": 57289702, "link": "https://stackoverflow.com/questions/57289702/typeerror-undefined-is-not-an-object-this-props/57291065#57291065", "title": "TypeError: undefined is not an object (&#39;_this.props&#39;)", "body": "<p>It looks like you are trying to invoke a function (passed via props) which is undefined.\nMake <code>speciesSelection</code> prop optional.</p>\n\n<pre><code>interface Props {\n  species: Species;\n  barcode: BarcodeState;\n  speciesSelection?: any;\n  onChangeText: (prop: keyof BarcodeState, value: string) =&gt; void;\n}\n\ninterface State { }\n\nclass BarcodeInput extends React.Component&lt;Props, State&gt; {\n  onPrefixPress = () =&gt; {\n    Keyboard.dismiss();\n    this.props.speciesSelection &amp;&amp; this.props.speciesSelection.modalize.open();\n    this.props.speciesSelection &amp;&amp; this.props.speciesSelection.modalizeOpened = true;\n  }\n</code></pre>\n\n<p>or check why it's undefined.</p>\n"}], "owner": {"reputation": 340, "user_id": 11801477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8T0zA.png?s=128&g=1", "display_name": "bekanur98", "link": "https://stackoverflow.com/users/11801477/bekanur98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "accepted_answer_id": 57291065, "answer_count": 1, "score": 1, "last_activity_date": 1564577111, "creation_date": 1564572447, "question_id": 57289702, "link": "https://stackoverflow.com/questions/57289702/typeerror-undefined-is-not-an-object-this-props", "title": "TypeError: undefined is not an object (&#39;_this.props&#39;)", "body": "<p>I can't solve this problem. Can you help me.\nevaluating 'this.props.speciesSelection.modalize'</p>\n\n<pre><code>&lt;BarcodeInput\n        speciesSelection={this.props.speciesSelection}\n        species={species[0]}\n        barcode={{ manufacturerValue: \"\", codeValue: \"\" }}\n        onChangeText={this.onChangeText}\n      /&gt;\n\n\n class BarcodeInput extends React.Component&lt;Props, State&gt; {\n  onPrefixPress = () =&gt; {\n    Keyboard.dismiss();\n    this.props.speciesSelection.modalize.open();\n    this.props.speciesSelection.modalizeOpened = true;\n }\n</code></pre>\n\n<p>Red Box when I touch to button onPrefixPress</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10718579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN8Jx.jpg?s=128&g=1", "display_name": "FSanchez", "link": "https://stackoverflow.com/users/10718579/fsanchez"}, "edited": false, "score": 0, "creation_date": 1564578313, "post_id": 57289770, "comment_id": 101077267, "body": "When I directly assign the error I get the following error: <b>ERROR TypeError: Cannot read property &#39;username&#39; of undefined</b>  I will edit the post to better explain how I tried it. Sorry if I am not understanding what you want to tell me ..."}, {"owner": {"reputation": 41, "user_id": 10718579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN8Jx.jpg?s=128&g=1", "display_name": "FSanchez", "link": "https://stackoverflow.com/users/10718579/fsanchez"}, "edited": false, "score": 1, "creation_date": 1564585120, "post_id": 57289770, "comment_id": 101081784, "body": "ok, I&#39;ve been able to make it work, I just need to declare error as type &quot;ErrorSiguinin&quot;.  I update my post with the most developed solution and mark your answer as the one that solved my problem"}], "tags": [], "owner": {"reputation": 260, "user_id": 1911439, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/39feffa6237e0b1c8ac8d47d5665f784?s=128&d=identicon&r=PG", "display_name": "Andrew Seymour", "link": "https://stackoverflow.com/users/1911439/andrew-seymour"}, "is_accepted": true, "score": 1, "last_activity_date": 1564572702, "creation_date": 1564572702, "answer_id": 57289770, "question_id": 57289570, "link": "https://stackoverflow.com/questions/57289570/how-can-i-receive-my-rest-api-errors-and-place-them-on-the-form-quickly/57289770#57289770", "title": "How can I receive my REST API errors and place them on the form quickly?", "body": "<p>I'd store the error object as it is (don't try and see if the properties exist) and if the key is defined then use that error\ni.e <code>&lt;div *ngIf=\"error.password\"&gt;{{error.password}}&lt;/div&gt;</code></p>\n\n<p>Also use an <code>ng-repeat</code> to display your fields. This will make the whole thing scalable if you add more fields.</p>\n\n<p>If the fields need to be different or have different props, then define schema for each one like;</p>\n\n<pre><code>username: {\n type: string,\n ...otherDetails\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10718579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN8Jx.jpg?s=128&g=1", "display_name": "FSanchez", "link": "https://stackoverflow.com/users/10718579/fsanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57289770, "answer_count": 1, "score": 1, "last_activity_date": 1564585481, "creation_date": 1564571975, "last_edit_date": 1592644375, "question_id": 57289570, "link": "https://stackoverflow.com/questions/57289570/how-can-i-receive-my-rest-api-errors-and-place-them-on-the-form-quickly", "title": "How can I receive my REST API errors and place them on the form quickly?", "body": "<h1>The problem</h1>\n<p>In my application the form errors are handled from the REST API, for example the password is very similar to the username, or for example the username field is missing in the registry.</p>\n<p>The problem is that this requires a lot of code for each form, it is not difficult, but I would like to know if there is another way to do it without having to create a model for errors and with less code</p>\n<h1>The current code</h1>\n<h3>SigininComponent</h3>\n<p><strong>siginin-form.component.html</strong></p>\n<pre><code>&lt;form #newUserForm=&quot;ngForm&quot; (ngSubmit)=&quot;onSubmit()&quot;&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;username&quot; class=&quot;col-form-label&quot;&gt;Nombre de usuario&lt;/label&gt;\n                    &lt;input id=&quot;username&quot; type=&quot;email&quot; class=&quot;form-control&quot; autocomplete=&quot;username&quot; [(ngModel)]=&quot;newUser.username&quot; [ngClass]=&quot;{ 'is-invalid': submitted &amp;&amp; error.username }&quot; name=&quot;username&quot;/&gt;\n                    &lt;div *ngIf=&quot;error.username&quot; class=&quot;invalid-feedback&quot;&gt;\n                        &lt;div *ngIf=&quot;error.username&quot;&gt;{{error.username}}&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;label for=&quot;email&quot; class=&quot;col-form-label&quot;&gt;Correo Electronico&lt;/label&gt;\n                    &lt;input id=&quot;email&quot; type=&quot;email&quot; class=&quot;form-control&quot; autocomplete=&quot;email&quot; [(ngModel)]=&quot;newUser.email&quot; [ngClass]=&quot;{ 'is-invalid': submitted &amp;&amp; error.email }&quot; name=&quot;email&quot;/&gt;\n                    &lt;div *ngIf=&quot;error.email&quot; class=&quot;invalid-feedback&quot;&gt;\n                        &lt;div *ngIf=&quot;error.email&quot;&gt;{{error.email}}&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;label for=&quot;first-name&quot; class=&quot;col-form-label&quot;&gt;Nombre&lt;/label&gt;\n                    &lt;input id=&quot;first-name&quot; type=&quot;email&quot; class=&quot;form-control&quot; autocomplete=&quot;given-name&quot; [(ngModel)]=&quot;newUser.first_name&quot; [ngClass]=&quot;{ 'is-invalid': submitted &amp;&amp; error.first_name }&quot; name=&quot;first_name&quot;/&gt;\n                    &lt;div *ngIf=&quot;error.first_name&quot; class=&quot;invalid-feedback&quot;&gt;\n                        &lt;div *ngIf=&quot;error.first_name&quot;&gt;{{error.first_name}}&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;label for=&quot;last-name&quot; class=&quot;col-form-label&quot;&gt;Apellidos&lt;/label&gt;\n                    &lt;input id=&quot;last-name&quot; type=&quot;email&quot; class=&quot;form-control&quot; autocomplete=&quot;family-name&quot; [(ngModel)]=&quot;newUser.last_name&quot; [ngClass]=&quot;{ 'is-invalid': submitted &amp;&amp; error.last_name }&quot; name=&quot;last_name&quot;/&gt;\n                    &lt;div *ngIf=&quot;error.last_name&quot; class=&quot;invalid-feedback&quot;&gt;\n                        &lt;div *ngIf=&quot;error.last_name&quot;&gt;{{error.last_name}}&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;password&quot; class=&quot;col-form-label&quot;&gt;Contrase\u00f1a&lt;/label&gt;\n                    &lt;input id=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control&quot; autocomplete=&quot;off&quot; [(ngModel)]=&quot;newUser.password&quot; [ngClass]=&quot;{ 'is-invalid': submitted &amp;&amp; error.password }&quot; name=&quot;password&quot;/&gt;\n                    &lt;div *ngIf=&quot;error.password&quot; class=&quot;invalid-feedback&quot;&gt;\n                        &lt;div *ngIf=&quot;error.password&quot;&gt;{{error.password}}&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;label for=&quot;password_confirm&quot; class=&quot;col-form-label&quot;&gt;Confirmacion contrase\u00f1a&lt;/label&gt;\n                    &lt;input id=&quot;password_confirm&quot; type=&quot;password&quot; class=&quot;form-control&quot; autocomplete=&quot;off&quot; [(ngModel)]=&quot;newUser.password_confirm&quot; [ngClass]=&quot;{ 'is-invalid': submitted &amp;&amp; error.password_confirm }&quot; name=&quot;password_confirm&quot;/&gt;\n                    &lt;div *ngIf=&quot;error.password_confirm&quot; class=&quot;invalid-feedback&quot;&gt;\n                        &lt;div *ngIf=&quot;error.password_confirm&quot;&gt;{{error.password_confirm}}&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;button [disabled]=&quot;loading&quot; class=&quot;btn btn-primary&quot;&gt;\n                    &lt;span *ngIf=&quot;loading&quot; class=&quot;spinner-border spinner-border-sm mr-1&quot;&gt;&lt;/span&gt;\n                    Registrarme\n                &lt;/button&gt;\n                &lt;div *ngIf=&quot;error.general&quot; class=&quot;alert alert-danger mt-3 mb-0&quot;&gt;{{error.general}}&lt;/div&gt;\n            &lt;/form&gt;\n</code></pre>\n<p><strong>siginin-form.component.ts</strong></p>\n<pre><code>export class SigininFormComponent implements OnInit {\n\n    newUser: NewUser = new NewUser();\n    submitted = false;\n    loading = false;\n    error: ErrorSiginin = new ErrorSiginin();\n\n    constructor(private userService: UserService) {\n    }\n\n    ngOnInit() {\n    }\n\n    onSubmit() {\n        this.loading = true;\n        this.submitted = true;\n\n        this.userService.siginin(this.newUser.username, this.newUser.first_name, this.newUser.last_name,\n            this.newUser.email, this.newUser.password, this.newUser.password_confirm)\n            .subscribe(data =&gt; {\n\n            }, err =&gt; {\n\n                console.log(err);\n\n                if (err.hasOwnProperty('error')) {\n                    err.error.hasOwnProperty('username') ? this.error.username = `${err.error.username}` : this.error.username = '';\n                    err.error.hasOwnProperty('email') ? this.error.email = `${err.error.email}` : this.error.email = '';\n                    err.error.hasOwnProperty('first_name') ? this.error.first_name = `${err.error.first_name}` : this.error.first_name = '';\n                    err.error.hasOwnProperty('last_name') ? this.error.last_name = `${err.error.last_name}` : this.error.last_name = '';\n                    err.error.hasOwnProperty('password') ? this.error.password = `${err.error.password}` : this.error.password = '';\n                    // tslint:disable-next-line:max-line-length\n                    err.error.hasOwnProperty('password_confirm') ? this.error.password_confirm = `${err.error.password_confirm}` : this.error.password_confirm = '';\n                    // tslint:disable-next-line:max-line-length\n                    err.error.hasOwnProperty('non_field_errors') ? this.error.general = `${err.error.non_field_errors}` : this.error.general = '';\n                }\n                console.log(this.error);\n                this.loading = false;\n            });\n    }\n\n}\n</code></pre>\n<p><strong>ErrorSiginin.ts (the error model)</strong></p>\n<pre><code>export class ErrorSiginin {\n    username: string;\n\n    // tslint:disable-next-line:variable-name\n    first_name: string;\n    // tslint:disable-next-line:variable-name\n    last_name: string;\n    email: string;\n    password: string;\n    // tslint:disable-next-line:variable-name\n    password_confirm: string;\n    general: string;\n\n    constructor() {\n        this.username = '';\n        this.first_name = '';\n        this.last_name = '';\n        this.email = '';\n        this.password = '';\n        this.password_confirm = '';\n        this.general = '';\n    }\n\n}\n</code></pre>\n<h1>In conclusion</h1>\n<p>I want to get the errors of each element of the form that my API returns but the way I have to do it now is very tedious and repetitive (as you can see in the code).</p>\n<p>I can't think of another way to do it, and my knowledge of angular at the moment is limited</p>\n<p><strong>I need each error string separately to place it under each form entry</strong></p>\n<h1>Tests:</h1>\n<p>I have tried to directly assign the error as follows:</p>\n<p>I declare the error object as:</p>\n<pre><code>error: any;\n</code></pre>\n<p>and then I assign the error when the REST API returns it to me like this:</p>\n<pre><code>onSubmit() {\n        this.loading = true;\n        this.submitted = true;\n\n        this.userService.siginin(this.newUser.username, this.newUser.first_name, this.newUser.last_name,\n            this.newUser.email, this.newUser.password, this.newUser.password_confirm)\n            .subscribe(data =&gt; {\n\n            }, err =&gt; {\n\n                this.error = err.error;\n                this.loading = false;\n            });\n    }\n</code></pre>\n<p>Unfortunately that throws me the following exception:</p>\n<pre><code>ERROR TypeError: Cannot read property 'username' of undefined\n    at Object.eval [as updateDirectives] (SigininFormComponent.html:9)\n    at Object.debugUpdateDirectives [as updateDirectives] (core.js:39364)\n    at checkAndUpdateView (core.js:38376)\n    at callViewAction (core.js:38742)\n    at execComponentViewsAction (core.js:38670)\n    at checkAndUpdateView (core.js:38383)\n    at callViewAction (core.js:38742)\n    at execEmbeddedViewsAction (core.js:38699)\n    at checkAndUpdateView (core.js:38377)\n    at callViewAction (core.js:38742)\n</code></pre>\n<p>the html code is not modified in this test</p>\n<h1>The solution!</h1>\n<p>As Andy Seymour said:\nI only need to assign the error object that returns the request to my error object, therefore the code is as follows:</p>\n<pre><code>export class SigininFormComponent implements OnInit {\n\nnewUser: NewUser = new NewUser();\nsubmitted = false;\nloading = false;\nerror: ErrorSiginin = new ErrorSiginin();\nconstructor(private userService: UserService) {\n}\n\nngOnInit() {\n}\n\nonSubmit() {\n    this.loading = true;\n    this.submitted = true;\n\n    this.userService.siginin(this.newUser.username, this.newUser.first_name, this.newUser.last_name,\n        this.newUser.email, this.newUser.password, this.newUser.password_confirm)\n        .subscribe(data =&gt; {\n\n        }, err =&gt; {\n\n            console.log(err);\n            this.error = err.error;\n\n            this.loading = false;\n        });\n}\n</code></pre>\n<p>}</p>\n"}, {"tags": ["arrays", "angular", "typescript", "object", "json-deserialization"], "comments": [{"owner": {"reputation": 31, "user_id": 9480823, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wrJD1pwFEPE/AAAAAAAAAAI/AAAAAAAADec/dYfPgar3S6o/photo.jpg?sz=128", "display_name": "Fanny Bellais", "link": "https://stackoverflow.com/users/9480823/fanny-bellais"}, "edited": false, "score": 0, "creation_date": 1565004042, "post_id": 57289515, "comment_id": 101201918, "body": "I think it&#39;s maybe my json structure json may cause probleme with deserialization ? May be my post is not clear ?? please help me :)"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 15203672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d439a9ff0a1bcf11b32894d8340f49?s=128&d=identicon&r=PG&f=1", "display_name": "Amory", "link": "https://stackoverflow.com/users/15203672/amory"}, "is_accepted": false, "score": 0, "last_activity_date": 1613841914, "creation_date": 1613841914, "answer_id": 66294501, "question_id": 57289515, "link": "https://stackoverflow.com/questions/57289515/error-when-deserializing-json-by-json2typescript/66294501#66294501", "title": "Error when deserializing json by json2typescript", "body": "<p><code>@JsonProperty</code> may have 3 parameters. You need to set the third one to <code>true</code>.</p>\n<p><code>@JsonProperty(&quot;title&quot;, String, true)</code></p>\n<p>The third parameter tells if the property can be optional. [https://www.npmjs.com/package/json2typescript]</p>\n<p>You can use Any by importing it from json2typescript package.</p>\n<p><code>import {JsonObject, JsonProperty, Any} from &quot;json2typescript&quot;;</code></p>\n<p><code>@JsonProperty(&quot;url&quot;, Any, true)</code></p>\n"}], "owner": {"reputation": 31, "user_id": 9480823, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wrJD1pwFEPE/AAAAAAAAAAI/AAAAAAAADec/dYfPgar3S6o/photo.jpg?sz=128", "display_name": "Fanny Bellais", "link": "https://stackoverflow.com/users/9480823/fanny-bellais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1613841914, "creation_date": 1564571779, "last_edit_date": 1564572830, "question_id": 57289515, "link": "https://stackoverflow.com/questions/57289515/error-when-deserializing-json-by-json2typescript", "title": "Error when deserializing json by json2typescript", "body": "<p>I'm trying to deserialize my JSON to convert in typescript with the library <code>json2typescript</code> but I have this following error: </p>\n\n<blockquote>\n  <p>Error: Fatal error in JsonConvert. Failed to map the JSON object to the class \"typeGeneral\" because the defined JSON property \"type\" does not exist:</p>\n</blockquote>\n\n<pre><code>Class property: \n    _type\n\nJSON property: \n    type\n</code></pre>\n\n<p><strong>service.ts</strong></p>\n\n<pre><code>\n   return this.http.get&lt;Type&gt;(this.applicationApiUrl + \"/app\", this.httpOptions)\n     .pipe(retry(1), catchError(this.handleError));\n }\n</code></pre>\n\n<p><strong>model.ts</strong></p>\n\n<pre><code>import {JsonObject, JsonProperty} from \"json2typescript\";\n\n\n@JsonObject(\"app\")\nexport class App {\n\n\n  constructor(id: number, title: string, url: any, details: string, type: string, visible: boolean, imgApp: any, kazanUrl: any, favorite: boolean) {\n    this._id = id;\n    this._title = title;\n    this._url = url;\n    this._details = details;\n    this._type = type;\n    this._visible = visible;\n    this._imgApp = imgApp;\n    this._kazanUrl = kazanUrl;\n    this._favorite = favorite;\n  }\n\n  private _id: number = null;\n\n\n  @JsonProperty(\"title\", String)\n  private _title: string = undefined;\n\n\n  @JsonProperty(\"url\")\n  private _url: any = undefined;\n\n\n  @JsonProperty(\"details\", String)\n  private _details: string = undefined;\n\n\n  @JsonProperty(\"type\", String)\n  private _type: string = \"\";\n\n\n  @JsonProperty(\"visible\", Boolean)\n  private _visible: boolean = false;\n\n\n  @JsonProperty(\"imgApp\")\n  private _imgApp: any = undefined;\n\n\n  @JsonProperty(\"kazanUrl\")\n  private _kazanUrl: any = undefined;\n\n\n  @JsonProperty(\"favorite\", Boolean)\n  private _favorite: boolean;\n\n\n  get id(): number {\n    return this._id;\n  }\n\n  set id(value: number) {\n    this._id = value;\n  }\n\n  get title(): string {\n    return this._title;\n  }\n\n  set title(value: string) {\n    this._title = value;\n  }\n\n  get url(): any {\n    return this._url;\n  }\n\n  set url(value: any) {\n    this._url = value;\n  }\n\n  get details(): string {\n    return this._details;\n  }\n\n  set details(value: string) {\n    this._details = value;\n  }\n\n  get type(): string {\n    return this._type;\n  }\n\n  set type(value: string) {\n    this._type = value;\n  }\n\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  set visible(value: boolean) {\n    this._visible = value;\n  }\n\n  get imgApp(): any {\n    return this._imgApp;\n  }\n\n  set imgApp(value: any) {\n    this._imgApp = value;\n  }\n\n  get kazanUrl(): any {\n    return this._kazanUrl;\n  }\n\n  set kazanUrl(value: any) {\n    this._kazanUrl = value;\n  }\n\n  get favorite(): boolean {\n    return this._favorite;\n  }\n\n  set favorite(value: boolean) {\n    this._favorite = value;\n  }\n\n\n\n}\n@JsonObject(\"typeGeneral\")\nexport class Type {\n\n\n\n  private _id: number = null;\n\n  @JsonProperty(\"type\", String) private _type: string = \"\";\n\n  @JsonProperty(\"details\", String) private _details: string = undefined;\n\n  @JsonProperty(\"visible\", Boolean) private _visible: boolean = null;\n\n  @JsonProperty(\"app\", [App]) private _app: [App] = undefined;\n\n\n  get app(): any {\n    return this._app;\n  }\n\n  set app(value: any) {\n    this._app = value;\n  }\n\n  get id(): number {\n    return this._id;\n  }\n\n  set id(value: number) {\n    this._id = value;\n  }\n\n  get type(): string {\n    return this._type;\n  }\n\n  set type(value: string) {\n    this._type = value;\n  }\n\n  get details(): string {\n    return this._details;\n  }\n\n  set details(value: string) {\n    this._details = value;\n  }\n\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  set visible(value: boolean) {\n    this._visible = value;\n  }\n}\n\n</code></pre>\n\n<p><strong>component.ts</strong></p>\n\n<pre><code>\n  loadApplications() {\n    return this.restApi.getApplications()\n      .subscribe((data: {}) =&gt; {\n\n       console.log(data)\n\n        let jsonStr: string = JSON.stringify(data);\n        const jsonObjApp: any = JSON.parse(jsonStr);\n\n        let jsonConvert: JsonConvert = new JsonConvert();\n        jsonConvert.operationMode = OperationMode.LOGGING;\n        jsonConvert.ignorePrimitiveChecks = false;\n        jsonConvert.valueCheckingMode = ValueCheckingMode.DISALLOW_NULL;\n\n        console.log(jsonObjApp)\n\n        try {\n          let a: Type[] = jsonConvert.deserializeArray(jsonObjApp, Type);\n\n        } catch (e) {\n          console.log((&lt;Error&gt;e))\n        }\n      });\n\n</code></pre>\n\n<p>and here is my JSON</p>\n\n<pre><code>[\n    {\n        \"typeGeneral\":[\n            {\n                \"id\":1,\n                \"type\":\"Monitoring\",\n                \"details\":\"Ceci est un type Monitoring\",\n                \"visible\":true\n            },\n            {\n                \"id\":2,\n                \"type\":\"Check service\",\n                \"details\":\"Ceci est un type Check Service\",\n                \"visible\":false\n            },\n            {\n                \"app\":[\n                {\n                    \"id\":1,\n                    \"type\":\"Monitoring\",\n                    \"visible\":false,\n                    \"imgApp\":\"http://google.fr\",\n                    \"details\":\"Lorem ipsum dolor\",\n                    \"kazanUrl\":\"http://google.fr\",\n                    \"favorite\":false,\n                    \"title\":\"Monitoring app\",\n                    \"url\":\"http://google.fr\"\n                },\n                {\n                    \"id\":2,\n                    \"type\":\"Check Service\",\n                    \"visible\":true,\n                    \"imgApp\":\"http://google.fr\",\n                    \"details\":\"Lorem ipsum dolor\",\n                    \"kazanUrl\":\"http://google.fr\",\n                    \"favorite\":true,\n                    \"title\":\"Services app\",\n                    \"url\":\"http://google.fr\"\n                }\n                ]\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>How to resolve this problem? I'm stuck :(</p>\n"}, {"tags": ["node.js", "typescript", "node-postgres"], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 677767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a82b2645f72a9435afcabd19e733fea8?s=128&d=identicon&r=PG", "display_name": "VirtualWolf", "link": "https://stackoverflow.com/users/677767/virtualwolf"}, "is_accepted": true, "score": 4, "last_activity_date": 1564651660, "creation_date": 1564651660, "answer_id": 57305869, "question_id": 57289069, "link": "https://stackoverflow.com/questions/57289069/typescript-compile-problems-with-node-postgres/57305869#57305869", "title": "TypeScript compile problems with node-postgres", "body": "<p>Well, this seems to work! I just changed <code>db.ts</code> to export <code>pool</code> directly:</p>\n\n<pre><code>import { Pool } from 'pg';\n\nconst pool = new Pool({\n    host: process.env.PG_HOST,\n    port: parseInt(process.env.PG_PORT),\n    user: process.env.PG_USER,\n    password: process.env.PG_PASSWORD,\n    database: process.env.PG_DATABASE,\n});\n\nexport = pool;\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 677767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a82b2645f72a9435afcabd19e733fea8?s=128&d=identicon&r=PG", "display_name": "VirtualWolf", "link": "https://stackoverflow.com/users/677767/virtualwolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2190, "favorite_count": 2, "accepted_answer_id": 57305869, "answer_count": 1, "score": 4, "last_activity_date": 1564651660, "creation_date": 1564570305, "question_id": 57289069, "link": "https://stackoverflow.com/questions/57289069/typescript-compile-problems-with-node-postgres", "title": "TypeScript compile problems with node-postgres", "body": "<p>Disclaimer up-front, I'm fairly new to TypeScript so this may be a dumb question!</p>\n\n<p>I'm attempting to use the same setup for my Express/Postgres application as described in the <a href=\"https://node-postgres.com/guides/async-express\" rel=\"nofollow noreferrer\">node-postgres docs</a>, where I have a single module that connects to the PostgreSQL server and is included wherever I need to access it, but I'm having some trouble with TypeScript's types.</p>\n\n<p>For this example I've simplified everything down to entirely remove Express. If I do this everything works and TypeScript's compiler is happy:</p>\n\n<pre><code>import { Pool } from 'pg';\n\nconst pool = new Pool({\n    host: process.env.PG_HOST,\n    port: parseInt(process.env.PG_PORT),\n    user: process.env.PG_USER,\n    password: process.env.PG_PASSWORD,\n    database: process.env.PG_DATABASE,\n});\n\n(async function getRows() {\n    const result = await pool.query('SELECT id, message, created FROM media');\n\n    interface dbObject {\n        id: number,\n        message: string,\n        created: Date\n    }\n    await result.rows.map((row: dbObject) =&gt; {\n        console.log(row.id);\n        console.log(row.message);\n        console.log(row.created);\n    })\n})()\n</code></pre>\n\n<p>However, if I move the <code>pg</code> functions into its own separate <code>db.ts</code> module:</p>\n\n<pre><code>import { Pool } from 'pg';\n\nconst pool = new Pool({\n    host: process.env.PG_HOST,\n    port: parseInt(process.env.PG_PORT),\n    user: process.env.PG_USER,\n    password: process.env.PG_PASSWORD,\n    database: process.env.PG_DATABASE,\n});\n\nexport = {\n    query: (text, params) =&gt; pool.query(text, params),\n}\n</code></pre>\n\n<p>And import it into the main <code>app.ts</code> file:</p>\n\n<pre><code>import database from './db';\n\n(async function getRows() {\n    const result = await database.query('SELECT id, message, created FROM media', []);\n\n    interface dbObject {\n        id: number,\n        message: string,\n        created: Date\n    }\n    await result.rows.map((row: dbObject) =&gt; {\n        console.log(row.id);\n        console.log(row.message);\n        console.log(row.created);\n    })\n})()\n</code></pre>\n\n<p>I get several complaints:</p>\n\n<pre><code>src/app.ts:11:27 - error TS2345: Argument of type '(row: dbObject) =&gt; void' is not assignable to parameter of type '(value: any[], index: number, array: any[][]) =&gt; void'.\n  Types of parameters 'row' and 'value' are incompatible.\n    Type 'any[]' is missing the following properties from type 'dbObject': id, message, created\n\n11     await result.rows.map((row: dbObject) =&gt; {\n                             ~~~~~~~~~~~~~~~~~~~~\n\n\nFound 1 error.\n</code></pre>\n\n<p>I realise it's likely because I don't have any types added to the <code>query</code> function in my <code>db.ts</code> file, but I also don't actually know how to correctly add them to make this all work!</p>\n"}, {"tags": ["typescript", "protractor", "accessibility"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7439537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e617de0b4c82355166b5f19b6fb35e?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik Avinash", "link": "https://stackoverflow.com/users/7439537/karthik-avinash"}, "edited": false, "score": 0, "creation_date": 1564683469, "post_id": 57291804, "comment_id": 101121608, "body": "Thanks for your inputs. Let me go through the link and get back :)"}], "tags": [], "owner": {"reputation": 16, "user_id": 11852901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2090194ce628c6e656c977b1a42ff2?s=128&d=identicon&r=PG&f=1", "display_name": "PDX", "link": "https://stackoverflow.com/users/11852901/pdx"}, "is_accepted": true, "score": 0, "last_activity_date": 1564579267, "creation_date": 1564579267, "answer_id": 57291804, "question_id": 57288755, "link": "https://stackoverflow.com/questions/57288755/how-to-automate-keyboard-access-for-accessibility-testing-using-protractor/57291804#57291804", "title": "How to automate &#39;keyboard access&#39; for accessibility testing using protractor?", "body": "<p>I'm not sure if this is what you're asking, but there's a protractor plugin using axe-core <a href=\"https://github.com/angular/protractor-accessibility-plugin\" rel=\"nofollow noreferrer\">https://github.com/angular/protractor-accessibility-plugin</a></p>\n\n<p>This audits your web site to see if it adheres to the accessibility rules.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 13446043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vo1ik.png?s=128&g=1", "display_name": "Abhinaba", "link": "https://stackoverflow.com/users/13446043/abhinaba"}, "is_accepted": false, "score": 0, "last_activity_date": 1594273419, "creation_date": 1594273419, "answer_id": 62808183, "question_id": 57288755, "link": "https://stackoverflow.com/questions/57288755/how-to-automate-keyboard-access-for-accessibility-testing-using-protractor/62808183#62808183", "title": "How to automate &#39;keyboard access&#39; for accessibility testing using protractor?", "body": "<p>unfortunately, keyboard accessibility can not be automated. Alongside with protractor Axe plugin, you can use <a href=\"https://chrome.google.com/webstore/detail/accessibility-insights-fo/pbjjkligggfmakdaogkfomddhfmpjeni?hl=en\" rel=\"nofollow noreferrer\">Microsoft Accessibility Checker</a> plugin.</p>\n"}], "owner": {"reputation": 3, "user_id": 7439537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e617de0b4c82355166b5f19b6fb35e?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik Avinash", "link": "https://stackoverflow.com/users/7439537/karthik-avinash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 57291804, "answer_count": 2, "score": 0, "last_activity_date": 1594273419, "creation_date": 1564569199, "last_edit_date": 1564683333, "question_id": 57288755, "link": "https://stackoverflow.com/questions/57288755/how-to-automate-keyboard-access-for-accessibility-testing-using-protractor", "title": "How to automate &#39;keyboard access&#39; for accessibility testing using protractor?", "body": "<p>Can anyone please guide me on how to test web accessibility with protractor tool. \nOr \nHow can I automate keyboard access tests using any other tool?</p>\n"}, {"tags": ["typescript", "strongloop", "loopback"], "comments": [{"owner": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 0, "creation_date": 1564568373, "post_id": 57288406, "comment_id": 101071616, "body": "The image src attribute should be a string with the image path, not an object."}, {"owner": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "reply_to_user": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 0, "creation_date": 1564568645, "post_id": 57288406, "comment_id": 101071781, "body": "@RafaelDuarte if I use the path to the image as a string, it will display nothing."}, {"owner": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 2, "creation_date": 1564568704, "post_id": 57288406, "comment_id": 101071815, "body": "You need to display the absolute path to the image, for example : <code>www.yourdomain.com&#47;assets&#47;yourImage.png</code> , otherwise, the email receiver won&#39;t see the image."}, {"owner": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "reply_to_user": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 0, "creation_date": 1564583259, "post_id": 57288406, "comment_id": 101080537, "body": "@RafaelDuarte Yes that was indeed it, only problem was that Loopback didn&#39;t include non ts &amp; js files in the build folder. So it was looking for something that didn&#39;t exist. Thanks for your help, definitely helped me."}, {"owner": {"reputation": 524, "user_id": 7586354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6b25d17bc706e1c95cc8e18bd10be80d?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Duarte", "link": "https://stackoverflow.com/users/7586354/rafael-duarte"}, "edited": false, "score": 0, "creation_date": 1564583775, "post_id": 57288406, "comment_id": 101080872, "body": "No problem, if you found a solution don&#39;t forget to post it here, someone else might run into this post with the same problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 10293231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S3PIgu-6j88/AAAAAAAAAAI/AAAAAAAAACU/sCNxSSqCczM/photo.jpg?sz=128", "display_name": "Amar Bisht", "link": "https://stackoverflow.com/users/10293231/amar-bisht"}, "is_accepted": false, "score": 0, "last_activity_date": 1565083878, "last_edit_date": 1565083878, "creation_date": 1565076792, "answer_id": 57371046, "question_id": 57288406, "link": "https://stackoverflow.com/questions/57288406/loopback-cant-find-path-to-image/57371046#57371046", "title": "Loopback: Can&#39;t find path to image", "body": "<p>You'll need to create a folder and also define a data-source before you run the server.</p>\n\n<p>In datasource.json</p>\n\n<pre><code> \"storage\": {\n    \"name\": \"storage\",\n    \"connector\": \"loopback-component-storage\",\n    \"provider\": \"filesystem\",\n    \"root\": \"./server/storage/\"\n  },\n</code></pre>\n\n<p>and then create a folder \"storage\" in your server folder and then \"images\" folder inside your storage folder.</p>\n\n<p><strong>References</strong></p>\n\n<ul>\n<li><a href=\"https://loopback.io/doc/en/lb2/Storage-component.html\" rel=\"nofollow noreferrer\">https://loopback.io/doc/en/lb2/Storage-component.html</a></li>\n<li><a href=\"https://loopback.io/doc/en/lb3/Storage-component.html\" rel=\"nofollow noreferrer\">https://loopback.io/doc/en/lb3/Storage-component.html</a></li>\n</ul>\n"}], "owner": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565083878, "creation_date": 1564568061, "question_id": 57288406, "link": "https://stackoverflow.com/questions/57288406/loopback-cant-find-path-to-image", "title": "Loopback: Can&#39;t find path to image", "body": "<p>I am using Nodemailer to send an email and with that email I want to display an image. But I keep getting this error: </p>\n\n<blockquote>\n  <p>Cannot start the application. { Error: Cannot find module '../images/logo.png'</p>\n</blockquote>\n\n<p>I don't think this is an issue relating to typescript because importing the image goes well, without any errors. And I already have put *.png in my globals.d.ts,  I might overlook something though. </p>\n\n<p>My controller looks like this: </p>\n\n<pre><code>import { requestBody, post } from '@loopback/rest';\nimport { SendMail } from \"../models/mail.model\";\nimport logoImg from \"../images/logo.png\";\n\nexport class MailController {\n  constructor(\n  ) {\n  }\n\n\n  @post('/mail/acceptation')\n  async sendEmail(@requestBody() obj: SendMail): Promise&lt;SendMail&gt; {\n    return await transporter.sendMail({\n      from: \"agile@minbzk.nl\",\n      to: `${obj.to}`,\n      subject: \"Aanvraag geaccepteerd\",\n      html: `&lt;img src=${logoImg}`\n    })\n  }\n}\n</code></pre>\n\n<p>As you can see I am trying to put the image in the html value. Anyone know what I am doing wrong? </p>\n"}, {"tags": ["typescript", "typescript-typings", "typescript-generics", "conditional-types"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 3, "last_activity_date": 1564568377, "creation_date": 1564568377, "answer_id": 57288499, "question_id": 57288097, "link": "https://stackoverflow.com/questions/57288097/extract-and-add-the-particular-typings-from-a-class-for-properties-and-methods-t/57288499#57288499", "title": "Extract and add the particular typings from a class for properties and methods to a interface", "body": "<p>You don't need a conditional type for this, the builtin mapped type <code>Pick</code> should do the trick :</p>\n\n<pre><code>\nclass Bar {\n  a: boolean;\n  b: number;\n  c() {\n    return 'some string';\n  }\n  d() {}\n  e() {\n    return new Observable&lt;number&gt;();\n  }\n}\n\nclass Foo implements Pick&lt;Bar, 'a' |  'c' |  'e'&gt; {\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 623, "user_id": 2603723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/122Td.jpg?s=128&g=1", "display_name": "Serkan Sipahi", "link": "https://stackoverflow.com/users/2603723/serkan-sipahi"}, "edited": false, "score": 0, "creation_date": 1564569610, "post_id": 57288733, "comment_id": 101072289, "body": "I didn&#39;t know it would work with Pick so I wanted to show my wish usage."}, {"owner": {"reputation": 623, "user_id": 2603723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/122Td.jpg?s=128&g=1", "display_name": "Serkan Sipahi", "link": "https://stackoverflow.com/users/2603723/serkan-sipahi"}, "edited": false, "score": 0, "creation_date": 1564569669, "post_id": 57288733, "comment_id": 101072318, "body": "Could you explain what this does: MembersOrMethods[number] ! What&#39;s number doing in this place?"}, {"owner": {"reputation": 28003, "user_id": 1083663, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/784657ec6f91c7406a2c4121d8bda505?s=128&d=identicon&r=PG", "display_name": "GOTO 0", "link": "https://stackoverflow.com/users/1083663/goto-0"}, "reply_to_user": {"reputation": 623, "user_id": 2603723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/122Td.jpg?s=128&g=1", "display_name": "Serkan Sipahi", "link": "https://stackoverflow.com/users/2603723/serkan-sipahi"}, "edited": false, "score": 1, "creation_date": 1564569936, "post_id": 57288733, "comment_id": 101072470, "body": "It creates a union of the types of all elements of <code>MembersOrMethods</code>, so it&#39;s basically the same as <code>&#39;a&#39; | &#39;c&#39; | &#39;e&#39;</code>. It&#39;s because array element keys are always of type <code>number</code>."}], "tags": [], "owner": {"reputation": 28003, "user_id": 1083663, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/784657ec6f91c7406a2c4121d8bda505?s=128&d=identicon&r=PG", "display_name": "GOTO 0", "link": "https://stackoverflow.com/users/1083663/goto-0"}, "is_accepted": false, "score": 3, "last_activity_date": 1564569144, "creation_date": 1564569144, "answer_id": 57288733, "question_id": 57288097, "link": "https://stackoverflow.com/questions/57288097/extract-and-add-the-particular-typings-from-a-class-for-properties-and-methods-t/57288733#57288733", "title": "Extract and add the particular typings from a class for properties and methods to a interface", "body": "<p>If I undestand your intent correctly, you could do something like this:</p>\n\n<pre><code>type ExtractTypings&lt;Class, MembersOrMethods extends (keyof Class)[]&gt; =\nPick&lt;Class, MembersOrMethods[number]&gt;;\n\nclass Bar {\n  a: boolean;\n  b: number;\n  c() {\n    return 'some string';\n  }\n  d() {}\n  e() {\n    return new Observable&lt;number&gt;();\n  }\n}\n\nclass Foo implements ExtractTypings&lt;Bar, ['a', 'c', 'e']&gt; {\n\n}\n</code></pre>\n\n<p>Note that if you don't need the members to be declared as an array Titian Dragomir's solution is preferable.</p>\n"}, {"tags": [], "owner": {"reputation": 623, "user_id": 2603723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/122Td.jpg?s=128&g=1", "display_name": "Serkan Sipahi", "link": "https://stackoverflow.com/users/2603723/serkan-sipahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565462556, "last_edit_date": 1565462556, "creation_date": 1565430168, "answer_id": 57441021, "question_id": 57288097, "link": "https://stackoverflow.com/questions/57288097/extract-and-add-the-particular-typings-from-a-class-for-properties-and-methods-t/57441021#57441021", "title": "Extract and add the particular typings from a class for properties and methods to a interface", "body": "<p><strong>Update:</strong> I have found this two awesome typing libs which increases the number of typescript`s built-in types (Pick, Exclude, Extract, Merge, etc., ...) to for more great useful types (e.g. Head, Tail, Last, etc., ...):</p>\n\n<ul>\n<li><a href=\"https://github.com/piotrwitek/utility-types\" rel=\"nofollow noreferrer\">https://github.com/piotrwitek/utility-types</a></li>\n<li><a href=\"https://github.com/pirix-gh/ts-toolbelt\" rel=\"nofollow noreferrer\">https://github.com/pirix-gh/ts-toolbelt</a></li>\n</ul>\n\n<p>Also to mention this good articles that helped me to understand on how to build my own complex types:</p>\n\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/typescript-curry-ramda-types-f747e99744ab/\" rel=\"nofollow noreferrer\">https://www.freecodecamp.org/news/typescript-curry-ramda-types-f747e99744ab/</a> (<em>owner of ts-toolbelt</em>)</li>\n<li><a href=\"https://artsy.github.io/blog/2018/11/21/conditional-types-in-typescript/\" rel=\"nofollow noreferrer\">https://artsy.github.io/blog/2018/11/21/conditional-types-in-typescript/</a></li>\n</ul>\n\n<p><strong>Note:</strong> What I also found out is that the heart of these complex types to build is actually only <code>extends</code>, <code>type</code> and <code>infer</code>!</p>\n"}], "owner": {"reputation": 623, "user_id": 2603723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/122Td.jpg?s=128&g=1", "display_name": "Serkan Sipahi", "link": "https://stackoverflow.com/users/2603723/serkan-sipahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1565462556, "creation_date": 1564567132, "question_id": 57288097, "link": "https://stackoverflow.com/questions/57288097/extract-and-add-the-particular-typings-from-a-class-for-properties-and-methods-t", "title": "Extract and add the particular typings from a class for properties and methods to a interface", "body": "<p>Hello Typescript Professionals. I don't want a solution but a hint and if this is possible in Typescript. I am still relatively fresh with the Conditional Types. Is it possible to extract the typings from a class for properties and methods to a interface?</p>\n\n<pre><code>interface ExtractTypings&lt;Class, MembersOrMethods&gt; {\n  // ?????\n}\n\nclass Bar {\n  a: boolean;\n  b: number;\n  c() {\n    return 'some string';\n  }\n  d() {}\n  e() {\n    return new Observable&lt;number&gt;();\n  }\n}\n\nclass Foo implements ExtractTypings&lt;Bar, ['a, c, e']&gt; {\n\n}\n</code></pre>\n\n<p>Version of Typescript: 3.4.5</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 1358, "user_id": 10143290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zHY4o.jpg?s=128&g=1", "display_name": "I&#241;igo", "link": "https://stackoverflow.com/users/10143290/i%c3%b1igo"}, "edited": false, "score": 0, "creation_date": 1564567291, "post_id": 57287740, "comment_id": 101070951, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48688818/angular4-x-module-not-found-error-cant-resolve-classlist-js\">Angular4.x Module not found: Error: Can&#39;t resolve &#39;classlist.js&#39;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1358, "user_id": 10143290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zHY4o.jpg?s=128&g=1", "display_name": "I&#241;igo", "link": "https://stackoverflow.com/users/10143290/i%c3%b1igo"}, "is_accepted": true, "score": 2, "last_activity_date": 1564566073, "creation_date": 1564566073, "answer_id": 57287771, "question_id": 57287740, "link": "https://stackoverflow.com/questions/57287740/angular-error-cant-resolve-classlist-js/57287771#57287771", "title": "Angular - Error: Can&#39;t resolve &#39;classlist.js&#39;", "body": "<p>You can easily solve that with the following commands:</p>\n\n<pre><code>npm uninstall classlist.js --save\nnpm cache verify\nnpm install classlist.js --save-exact\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11862819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e175c824c046d87e39d6152c969e36c8?s=128&d=identicon&r=PG&f=1", "display_name": "teraxxx", "link": "https://stackoverflow.com/users/11862819/teraxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 57287771, "answer_count": 1, "score": 1, "last_activity_date": 1565694917, "creation_date": 1564565989, "last_edit_date": 1565694917, "question_id": 57287740, "link": "https://stackoverflow.com/questions/57287740/angular-error-cant-resolve-classlist-js", "title": "Angular - Error: Can&#39;t resolve &#39;classlist.js&#39;", "body": "<pre><code> import 'classlist.js';\n</code></pre>\n\n<p>I build the project using angular cli it throws an error in console. </p>\n\n<p>Executed this command in project \"<code>npm install --save classlist.js</code>\"</p>\n\n<pre><code>Module not found: Error: Can't resolve 'classlist.js' in src\n@ ./src/polyfills.ts 36:0-22\n@ multi ./src/polyfills.ts\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["angular", "typescript", "ngrx", "ngrx-store", "angular-test"], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 0, "creation_date": 1564590034, "post_id": 57294323, "comment_id": 101084519, "body": "I already did independent unit tests for reducer, effects and selectors. This is actually for a smart component. So I don&#39;t event need to test the smart component?"}, {"owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "reply_to_user": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 0, "creation_date": 1564590776, "post_id": 57294323, "comment_id": 101084903, "body": "No, you should certainly test the component. However, don&#39;t test it by actually allowing the selector to run. Mock it, and test the logic in the component based on the expected behavior you mock."}, {"owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 0, "creation_date": 1564591072, "post_id": 57294323, "comment_id": 101085037, "body": "alright, same for effects?... because I am using the mock store in my effects tests, too"}, {"owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "reply_to_user": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 1, "creation_date": 1564591277, "post_id": 57294323, "comment_id": 101085128, "body": "Yes, same for effects. If you allow your selectors to actually run, and there&#39;s a bug in your selector, the test for your component / effect will fail. It won&#39;t fail due to a bug in the code it&#39;s trying to test -- it would fail due to the bug in your selector! That&#39;s why you should mock it."}, {"owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 0, "creation_date": 1564591448, "post_id": 57294323, "comment_id": 101085206, "body": "Thank you!... I&#39;ll take a look at my code tomorrow to check if I have any other concerns and then check you answer :)"}], "tags": [], "owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1564591119, "last_edit_date": 1564591119, "creation_date": 1564587065, "answer_id": 57294323, "question_id": 57287487, "link": "https://stackoverflow.com/questions/57287487/ngrx-8-test-providemockstore-setstate-for-state-slice/57294323#57294323", "title": "NgRx 8 Test provideMockStore - setState for State Slice", "body": "<p>I would recommend taking a different approach here. What you should do instead is unit test your selector and component independently.</p>\n\n<p>NgRx 8 allows for <a href=\"https://ngrx.io/guide/store/testing#using-mock-selectors\" rel=\"noreferrer\">mock selectors</a>. Use that in your component to verify the component's logic is correct.</p>\n\n<p>Then, unit test your selector independently to verify that your selector is working as intended.</p>\n\n<p>This way the tests are independent, not brittle, and truly unit tests.</p>\n\n<p>Edit: The docs I linked are official, but an alternative way to mock your selectors is: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  beforeEach(() =&gt; {\n    TestBed.configureTestingModule({\n      providers: [\n        provideMockStore({\n          selectors: [\n            {\n              selector: yourSelectorNameHere,\n              value: someMockValueHere\n            }\n          ]\n        })\n      ]\n    });\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 0, "creation_date": 1564591764, "post_id": 57295581, "comment_id": 101085347, "body": "I&#39;ve actually tried to set <code>MockStore&lt;FeatureState&gt;</code> but it didn&#39;t work out either"}, {"owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "edited": false, "score": 1, "creation_date": 1564592162, "post_id": 57295581, "comment_id": 101085530, "body": "I mean TS didn&#39;t complain, but there were errors when running the test"}], "tags": [], "owner": {"reputation": 9151, "user_id": 10112124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6297e8a8df7affbe897ed476212148?s=128&d=identicon&r=PG", "display_name": "timdeschryver", "link": "https://stackoverflow.com/users/10112124/timdeschryver"}, "is_accepted": false, "score": 0, "last_activity_date": 1564591624, "creation_date": 1564591624, "answer_id": 57295581, "question_id": 57287487, "link": "https://stackoverflow.com/questions/57287487/ngrx-8-test-providemockstore-setstate-for-state-slice/57295581#57295581", "title": "NgRx 8 Test provideMockStore - setState for State Slice", "body": "<p>As xander mentioned you can use mockSelectors.\nThe reason why TS is complaining is because how you typed it.</p>\n\n<p><code>MockStore&lt;State&gt;</code> is probably your whole state tree, for just a feature slice, use <code>MockStore&lt;FeatureState&gt;</code> </p>\n"}], "owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5140, "favorite_count": 0, "accepted_answer_id": 57294323, "answer_count": 2, "score": 1, "last_activity_date": 1564591624, "creation_date": 1564565175, "question_id": 57287487, "link": "https://stackoverflow.com/questions/57287487/ngrx-8-test-providemockstore-setstate-for-state-slice", "title": "NgRx 8 Test provideMockStore - setState for State Slice", "body": "<p>I have a smart component test for my NgRx implementation that looks something like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>describe( 'Component', () =&gt; {\n  let store: MockStore&lt;State&gt;;\n\n  beforeEach( async( () =&gt; {\n    TestBed.configureTestingModule( {\n        /* ... */\n        providers: [\n            provideMockStore( { initialState: fromReducer.initialState } )\n        ]\n    } ).compileComponents();\n    store = TestBed.get&lt;Store&lt;State&gt;&gt;( Store );\n  } ) );\n\n  it( 'should load items in #ngOnInit', () =&gt; {\n    store.setState( {\n        item: {\n          ...fromReducer.initialState,\n          entities: { [item.id]: item },\n        },\n        otherFeature: null,\n        otherFeature: null,\n        otherFeature: null\n    } );\n    component.items$.subscribe( items =&gt;\n        store.select( ItemStoreSelectors.selectItems ).subscribe( fromStore =&gt; expect( items ).toEqual( fromStore ) )\n    );\n  } );\n});\n</code></pre>\n\n<p>I use <code>provideMockStore</code> and <code>setState</code> to mock my NgRx state. Everything works fine this way, but I really don't like this part of it:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>store.setState( {\n    item: {\n      ...fromReducer.initialState,\n      entities: { [item.id]: item },\n    },\n    otherFeature: null,\n    otherFeature: null,\n    otherFeature: null\n} );\n</code></pre>\n\n<p>I have to add every other feature slice of my state to the <code>setState</code> function. Otherwise Typescript will throw Errors.</p>\n\n<hr>\n\n<p>So preferably I don't want to set the root state, but rather a specific feature slice like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>store.setState( {\n  ...fromReducer.initialState,\n  entities: { [item.id]: item },\n} );\n</code></pre>\n\n<p>I couldn't find any documentation on how to use <code>provideMockStore</code> for specific slices of the state <a href=\"https://ngrx.io/guide/store/testing\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 1335789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/20ce603ab853be76377b179f66047a62?s=128&d=identicon&r=PG", "display_name": "Johan Aspeling", "link": "https://stackoverflow.com/users/1335789/johan-aspeling"}, "edited": false, "score": 0, "creation_date": 1567365320, "post_id": 57287030, "comment_id": 101934980, "body": "Hmm..  I would still just want to call the normal method, <code>sendInput(...)</code> and then have access to the calling context, I&#39;m not sure I understand your provided solution. I&#39;ve also noticed the context in the test fixture is different than a normal <code>.ts</code> file, so I&#39;m not sure if I&#39;ll be able to achieve what I want to in this scenario"}], "tags": [], "owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "is_accepted": false, "score": 0, "last_activity_date": 1564563869, "creation_date": 1564563869, "answer_id": 57287030, "question_id": 57286947, "link": "https://stackoverflow.com/questions/57286947/access-the-context-of-the-calling-method-in-an-exported-function/57287030#57287030", "title": "Access the context of the calling method in an exported function", "body": "<p>You can use the apply method on your function:</p>\n\n<pre><code>sendInput.apply(this, [myElement, 'testValue', formElement])\n</code></pre>\n\n<p>It allows you to pass your calling context as the first argument, and your array of arguments next.</p>\n"}], "owner": {"reputation": 590, "user_id": 1335789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/20ce603ab853be76377b179f66047a62?s=128&d=identicon&r=PG", "display_name": "Johan Aspeling", "link": "https://stackoverflow.com/users/1335789/johan-aspeling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564563869, "creation_date": 1564563620, "question_id": 57286947, "link": "https://stackoverflow.com/questions/57286947/access-the-context-of-the-calling-method-in-an-exported-function", "title": "Access the context of the calling method in an exported function", "body": "<p>I have a <code>utils</code> class file that contains a bunch of utility functions used by various other classes/components.</p>\n\n<p>The current scenario contains a <code>test-utils</code> class, used by karma unit tests to execute commonly used tasks. </p>\n\n<p>For instance, I have the following method to send input to a native element:</p>\n\n<pre><code>export function sendInput(fixture: ComponentFixture&lt;any&gt;, inputElement: any, text: string,  formControl?: AbstractControl): Promise&lt;any&gt; {\n    inputElement.value = text;\n    inputElement.dispatchEvent(new Event('input'));\n\n    if (!isNullOrUndefined(formControl)) {\n        formControl.markAsTouched();\n    }\n\n    fixture.detectChanges();\n    return fixture.whenStable();\n}\n</code></pre>\n\n<p>calling it by:</p>\n\n<pre><code>sendInput(fixture, myElement, 'testValue', formElement).then(() =&gt; { ... });\n</code></pre>\n\n<p>however I don't want to send parameters like <code>fixture</code> through as a paramter, because I know <code>fixture</code> is available on the calling context.</p>\n\n<p><strong>Question</strong>: How do I access the calling context in this scenario? I've tried the following, using an arrow function to pass through the context:</p>\n\n<pre><code>export const sendInput = (inputElement: any, value: string, formControl?: AbstractControl): Promise&lt;any&gt; =&gt; { \n    // method body\n    const context = this;\n\n    // this, context is undefined\n}\n</code></pre>\n\n<p>but <code>this</code> is still undefined. I don't think I understand the intricacies of javascript well enough to understand why this is not working</p>\n"}, {"tags": ["javascript", "angular", "typescript", "jasmine", "karma-jasmine"], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 3007690, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/0rsC3.jpg?s=128&g=1", "display_name": "kandarp", "link": "https://stackoverflow.com/users/3007690/kandarp"}, "edited": false, "score": 0, "creation_date": 1564567556, "post_id": 57286824, "comment_id": 101071106, "body": "I have added external js into  <code>angular.json</code> it works fine in runtime. I throw an error in a test only. If I do import statement in spec file as you mentioned, it throws <code>EsLint error</code> because I do not call LeaderLine explicitly in a test."}], "tags": [], "owner": {"reputation": 883, "user_id": 6380895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQi4F.jpg?s=128&g=1", "display_name": "Yohan Dahmani", "link": "https://stackoverflow.com/users/6380895/yohan-dahmani"}, "is_accepted": true, "score": 2, "last_activity_date": 1564563230, "creation_date": 1564563230, "answer_id": 57286824, "question_id": 57286701, "link": "https://stackoverflow.com/questions/57286701/how-to-use-external-js-lib-into-angular-component-test/57286824#57286824", "title": "How to use external js lib into angular component test", "body": "<p>I would try to import the lib like this :</p>\n\n<pre><code>import * as LeaderLine from 'leader-line';\n</code></pre>\n\n<p>instead of the var declaration. Is it only the tests that doesn't work or when you run your app it throws the error as well ?</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5513704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17804b4790dc7661cb49539b01f02660?s=128&d=identicon&r=PG&f=1", "display_name": "cuniquek87", "link": "https://stackoverflow.com/users/5513704/cuniquek87"}, "is_accepted": false, "score": 1, "last_activity_date": 1596196276, "creation_date": 1596196276, "answer_id": 63191335, "question_id": 57286701, "link": "https://stackoverflow.com/questions/57286701/how-to-use-external-js-lib-into-angular-component-test/63191335#63191335", "title": "How to use external js lib into angular component test", "body": "<p>I inject the methods in the component by using the function declaration way.</p>\n<pre><code>declare function A();\n</code></pre>\n<p>A way to test only the component's methods, and ignore all the imported ones from the external js file.\nYou can create a mock/&lt;external.js&gt; file, that will replace the origin on testing mode. You have to add it also into the angular.json file in test configuration.</p>\n<pre><code>&quot;test&quot;: {\n      &quot;builder&quot;: &quot;@angular-devkit/build-angular:karma&quot;,\n      &quot;options&quot;: {\n        &quot;main&quot;: &quot;src/test.ts&quot;,\n        &quot;polyfills&quot;: &quot;src/polyfills.ts&quot;,\n        &quot;tsConfig&quot;: &quot;src/tsconfig.spec.json&quot;,\n        &quot;karmaConfig&quot;: &quot;src/karma.conf.js&quot;,\n        &quot;sourceMap&quot;: true,\n        &quot;assets&quot;: [\n          &quot;src/favicon.ico&quot;,\n          &quot;src/assets&quot;,\n          &quot;src/env.js&quot;\n        ],\n        &quot;styles&quot;: [\n          &quot;src/styles.css&quot;,\n          &quot;src/sass/intracom-light.scss&quot;\n        ],\n        &quot;scripts&quot;: [\n          &quot;src/assets/mock/js/maps.js&quot;\n        ]\n      }\n    },\n</code></pre>\n<p>Replace the body of the calling methods to set up the testing behavior.</p>\n"}], "owner": {"reputation": 493, "user_id": 3007690, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/0rsC3.jpg?s=128&g=1", "display_name": "kandarp", "link": "https://stackoverflow.com/users/3007690/kandarp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 0, "accepted_answer_id": 57286824, "answer_count": 2, "score": 3, "last_activity_date": 1596196276, "creation_date": 1564562822, "question_id": 57286701, "link": "https://stackoverflow.com/questions/57286701/how-to-use-external-js-lib-into-angular-component-test", "title": "How to use external js lib into angular component test", "body": "<p>I have a component that uses an external js library: leader-line.\nWhen I try to test that component, it always throws an error that function for the external library is not defined. </p>\n\n<p><code>component file</code></p>\n\n<pre><code>declare var LeaderLine: any;\n\n@Component({\n  selector: 'app-flow-line',\n  templateUrl: './flow-line.component.html',\n  styleUrls: ['./flow-line.component.css']\n})\nexport class FlowLineComponent implements AfterViewInit, OnDestroy {\n\n  @Input() public flowPathConfig: any = new Array();\n  public myLines: any = new Array();\n  public ngAfterViewInit() {\n    for (let config of this.flowPathConfig) {\n      if (document.getElementById(config.fromStep) &amp;&amp; document.getElementById(config.toStep)) {\n        this.myLines.push(new LeaderLine(\n          document.getElementById(config.fromStep),\n          document.getElementById(config.toStep)\n        ));\n      }\n    }\n  }\n</code></pre>\n\n<p>spec file</p>\n\n<pre><code>import { async, ComponentFixture, TestBed } from '@angular/core/testing';\nimport { FlowLineComponent } from './flow-line.component';\nimport { FundamentalNgxModule } from 'fundamental-ngx';\n\n\ndescribe('FlowLineComponent', () =&gt; {\n  let component: FlowLineComponent;\n  let fixture: ComponentFixture&lt;FlowLineComponent&gt;;\n\n  beforeEach(async(() =&gt; {\n    TestBed.configureTestingModule({\n      declarations: [FlowLineComponent],\n      imports: [FundamentalNgxModule]\n    })\n      .compileComponents();\n  }));\n\n  beforeEach(() =&gt; {\n    fixture = TestBed.createComponent(FlowLineComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  });\n\n  it('it should draw line with pathConfig', () =&gt; {\n    component.flowPathConfig = [{ fromStep: '1', toStep: '2' }];\n    let el1 = document.createElement('div');\n    el1.setAttribute('id', '1');\n    let el2 = document.createElement('div');\n    el2.setAttribute('id', '2');\n    document.body.appendChild(el1);\n    document.body.appendChild(el2);\n    fixture.detectChanges();\n    component.ngAfterViewInit();\n    expect(component.myLines.length).toEqual(0);\n    expect(component).toBeTruthy();\n  });\n});\n</code></pre>\n\n<p>Following is the error trace. That shows reference error. \nPS: I have included the leader-line library using the following post: <a href=\"https://stackoverflow.com/questions/44945766/use-external-javascript-library-in-angular-application\">Use external javaScript library in angular application</a></p>\n\n<pre><code>HeadlessChrome 75.0.3770 (Mac OS X 10.14.6) FlowLineComponent it should draw line with pathConfig FAILED\n        ReferenceError: LeaderLine is not defined\n            at &lt;Jasmine&gt;\n            at FlowLineComponent.LeaderLine [as ngAfterViewInit] (http://localhost:9876/_karma_webpack_/webpack:/src/app/flow/flow-line/flow-line.component.ts:34:43)\n            at UserContext.&lt;anonymous&gt; (http://localhost:9876/_karma_webpack_/webpack:/src/app/flow/flow-line/flow-line.component.spec.ts:45:15)\n            at ZoneDelegate../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone.js:391:1)\n            at ProxyZoneSpec.push../node_modules/zone.js/dist/zone-testing.js.ProxyZoneSpec.onInvoke (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone-testing.js:308:1)\n            at ZoneDelegate../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone.js:390:1)\n            at Zone../node_modules/zone.js/dist/zone.js.Zone.run (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone.js:150:1)\n            at runInTestZone (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone-testing.js:561:1)\n            at UserContext.&lt;anonymous&gt; (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone-testing.js:576:1)\n            at &lt;Jasmine&gt;\nHeadlessChrome 75.0.3770 (Mac OS X 10.14.6): Executed 13 of 16 (1 FAILED) (0 secs / 3.274 secs)\nHeadlessChrome 75.0.3770 (Mac OS X 10.14.6) FlowLineComponent it should draw line with pathConfig FAILED\n        ReferenceError: LeaderLine is not defined\n            at &lt;Jasmine&gt;\n            at FlowLineComponent.LeaderLine [as ngAfterViewInit] (http://localhost:9876/_karma_webpack_/webpack:/src/app/flow/flow-line/flow-line.component.ts:34:43)\n            at UserContext.&lt;anonymous&gt; (http://localhost:9876/_karma_webpack_/webpack:/src/app/flow/flow-line/flow-line.component.spec.ts:45:15)\n            at ZoneDelegate../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone.js:391:1)\n            at ProxyZoneSpec.push../node_modules/zone.js/dist/zone-testing.js.ProxyZoneSpec.onInvoke (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone-testing.js:308:1)\n            at ZoneDelegate../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone.js:390:1)\n            at Zone../node_modules/zone.js/dist/zone.js.Zone.run (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone.js:150:1)\n            at runInTestZone (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone-testing.js:561:1)\n            at UserContext.&lt;anonymous&gt; (http://localhost:9876/_karma_webpack_/webpack:/node_modules/zone.js/dist/zone-testing.js:576:1)\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular6"], "comments": [{"owner": {"reputation": 11587, "user_id": 2651006, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/21db98493eb83498d8d0443c3fa3134f?s=128&d=identicon&r=PG", "display_name": "Ploppy", "link": "https://stackoverflow.com/users/2651006/ploppy"}, "edited": false, "score": 0, "creation_date": 1564562844, "post_id": 57286608, "comment_id": 101068342, "body": "To begin, I really recommend you to update your project to the latest version Angular, you will most likely have nothing to change in your code, follow the official guide <a href=\"https://update.angular.io/\" rel=\"nofollow noreferrer\">update.angular.io</a>."}, {"owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "edited": false, "score": 0, "creation_date": 1564564238, "post_id": 57286608, "comment_id": 101069095, "body": "i prefer using {{ form.value | json }} on the page to see the form array in realtime"}, {"owner": {"reputation": 9, "user_id": 6930798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJl2P.jpg?s=128&g=1", "display_name": "sedatistan", "link": "https://stackoverflow.com/users/6930798/sedatistan"}, "edited": false, "score": 0, "creation_date": 1564577240, "post_id": 57286608, "comment_id": 101076609, "body": "what kind of thing i have to use for this? still i dont get it"}], "owner": {"reputation": 9, "user_id": 6930798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJl2P.jpg?s=128&g=1", "display_name": "sedatistan", "link": "https://stackoverflow.com/users/6930798/sedatistan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564569193, "creation_date": 1564562476, "last_edit_date": 1564569193, "question_id": 57286608, "link": "https://stackoverflow.com/questions/57286608/how-to-get-form-data-values-at-angular-6", "title": "How to get form data values at angular 6", "body": "<p>how to get form data values on the network tab at the developer console?. I cant understand what I should use for that.</p>\n\n<p>I tried route.data but it is not working.</p>\n\n<pre><code>console.log(this._route.snapshot.data['ErrorMSG'])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jhFm4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jhFm4.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript", "typescript-typings", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 806, "user_id": 1130119, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2822e8dee83ca94ac50f8bca81cd82a?s=128&d=identicon&r=PG", "display_name": "UsainBloot", "link": "https://stackoverflow.com/users/1130119/usainbloot"}, "edited": false, "score": 1, "creation_date": 1564562709, "post_id": 57286621, "comment_id": 101068249, "body": "Works perfectly! I need to practice with conditional types. Thanks!"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1564562522, "creation_date": 1564562522, "answer_id": 57286621, "question_id": 57286582, "link": "https://stackoverflow.com/questions/57286582/mandatory-key-in-interface-based-on-optional-generic/57286621#57286621", "title": "Mandatory key in interface based on optional generic", "body": "<p>You could a type alias with a conditional type. </p>\n\n<pre><code>type IExample&lt;T = void&gt; = T extends void ?  {\n  foo: string\n} : {\n  foo: string,\n  bar: T\n}\n\u200b\u200b\n/* Allowed */\nconst withoutBar: IExample = {\n  foo: 'some string'\n}\n\u200b\n/* Not allowed, as I've passed in a generic for Bar */\nconst withoutBar: IExample&lt;number&gt; = {\n  foo: 'some string'\n}\n\u200b\n/* Allowed */\nconst withBar: IExample&lt;number&gt; = {\n  foo: 'some string',\n  bar: 1\n};\n\u200b\n/* Not allowed as I have not passed in a generic for Bar */\nconst withBar: IExample = {\n  foo: 'some string',\n  bar: 1 // Should error on \"bar\" as I have not passed in a generic\n};\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAkgogDwIYFswBsIB4AqUC8UAbgPYCWAJgHwFR4QLAQB2FAzseRVAPxRQBvAFD8AZiRIAuKG2AAnMswDmQgL5RpwsROmyFygDQioAIyRzpONUMDQBDaEB6AFRQAgunQkA7hG5OHQgDGJMyyUF5kwAAWJACuwABC5tLwyGiYtFpQ4lJQAORsJCjQeopKedb2zlAAciTAUEge3r4GjRwweUTQYEhsbL5Qio1QSiwQCoHZJHJQSbP+QSFhEdFxicmwiKgY2MyxKCYTNIRZOdIFRSXyZRWqto4u7p4+fgHBoQ2rUfMp2+l7A5HOQnQTGc75QrFGQ3ZR5Iz8MwWKAARjUAG4HtU6g0mi9Bn1YFAokhulBmPUoL1+oNhkhRuNJtNZvMoIsPitIj9NqkdhlTuCdJCrjD9OUEaZNiioA4HFAAMoxWLobgTOQzKAhKAAIiR2vaRJJZIpDWpA24dIZzAmZECGKAA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 806, "user_id": 1130119, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2822e8dee83ca94ac50f8bca81cd82a?s=128&d=identicon&r=PG", "display_name": "UsainBloot", "link": "https://stackoverflow.com/users/1130119/usainbloot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 57286621, "answer_count": 1, "score": 2, "last_activity_date": 1564564496, "creation_date": 1564562345, "last_edit_date": 1564564496, "question_id": 57286582, "link": "https://stackoverflow.com/questions/57286582/mandatory-key-in-interface-based-on-optional-generic", "title": "Mandatory key in interface based on optional generic", "body": "<p>Is there a way in Typescript to make an interface have a mandatory key when a generic is passed into it?</p>\n\n<p>I am looking for a way to be able to defined types for keys in interfaces only when a Generic is passed into it.</p>\n\n<p>eg.</p>\n\n<pre><code>interface IExample {\n  foo: string\n}\n\u200b\n/* You can't declare 2 interfaces of the same name, but this shows the structure I am aiming for */\ninterface IExample&lt;T&gt; {\n  foo: string,\n  bar: T\n}\n\u200b\n/* Allowed */\nconst withoutBar: IExample {\n  foo: 'some string'\n}\n\u200b\n/* Not allowed, as I've passed in a generic for Bar */\nconst withoutBar: IExample&lt;number&gt; {\n  foo: 'some string'\n}\n\u200b\n/* Allowed */\nconst withBar: IExample&lt;number&gt; {\n  foo: 'some string',\n  bar: 1\n};\n\u200b\n/* Not allowed as I have not passed in a generic for Bar */\nconst withBar: IExample {\n  foo: 'some string',\n  bar: 1 // Should error on \"bar\" as I have not passed in a generic\n};\n</code></pre>\n"}, {"tags": ["angular", "typescript", "routing", "angular-material", "angular-routerlink"], "comments": [{"owner": {"reputation": 237, "user_id": 7675935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b12a202ada87ab6b67469461b79ba?s=128&d=identicon&r=PG&f=1", "display_name": "ReturnTable", "link": "https://stackoverflow.com/users/7675935/returntable"}, "edited": false, "score": 1, "creation_date": 1569251889, "post_id": 57286141, "comment_id": 102527261, "body": "I don&#39;t know why this question was downvoted. This is what I was looking for."}], "answers": [{"comments": [{"owner": {"reputation": 1358, "user_id": 10143290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zHY4o.jpg?s=128&g=1", "display_name": "I&#241;igo", "link": "https://stackoverflow.com/users/10143290/i%c3%b1igo"}, "edited": false, "score": 0, "creation_date": 1564562845, "post_id": 57286670, "comment_id": 101068343, "body": "Thanks Patryk, that&#39;s what I needed to know!"}], "tags": [], "owner": {"reputation": 925, "user_id": 7172736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kVYSo.png?s=128&g=1", "display_name": "Patryk \u0141ucka", "link": "https://stackoverflow.com/users/7172736/patryk-%c5%81ucka"}, "is_accepted": true, "score": 2, "last_activity_date": 1564562716, "creation_date": 1564562716, "answer_id": 57286670, "question_id": 57286141, "link": "https://stackoverflow.com/questions/57286141/keep-angular-material-table-state-after-component-redirection/57286670#57286670", "title": "Keep Angular Material table state after Component redirection", "body": "<p>When you're redirecting between components, their content is destroyed, so there is no way for a destroyed component to remember anything ;)\nBut you can store the information about the page index somewhere else in the application (service or store if you're using Redux).</p>\n\n<p>So you can save the page index before redirection i.e. using service or even better just update service after every page change.</p>\n\n<p>Then you can get the index and use <code>pageIndex</code> property of <code>MatPaginator</code> as described in documentation: <a href=\"https://material.angular.io/components/paginator/api\" rel=\"nofollow noreferrer\">https://material.angular.io/components/paginator/api</a>\nto set correct page index after getting back to this page.\nLet me know if you need any more help with that.</p>\n"}], "owner": {"reputation": 1358, "user_id": 10143290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zHY4o.jpg?s=128&g=1", "display_name": "I&#241;igo", "link": "https://stackoverflow.com/users/10143290/i%c3%b1igo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 57286670, "answer_count": 1, "score": 2, "last_activity_date": 1564562716, "creation_date": 1564560805, "last_edit_date": 1564561349, "question_id": 57286141, "link": "https://stackoverflow.com/questions/57286141/keep-angular-material-table-state-after-component-redirection", "title": "Keep Angular Material table state after Component redirection", "body": "<p>I have a <em>TableComponent</em> with an Angular Material table that contains some <strong>links to other components</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/M2R7P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M2R7P.png\" alt=\"Second page of the table\"></a></p>\n\n<p>When I am on the second page of the table (Image above) and I click on the link, <code>routerLink</code> redirects to <em>DetailComponent</em>. Once I am redirected, if I press the back button or I execute <code>location.back()</code> I go back to <em>TableComponent</em>, but the table is located on the first page, instead of the one I was before.</p>\n\n<p><a href=\"https://i.stack.imgur.com/KLQEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KLQEa.png\" alt=\"First page of the table\"></a></p>\n\n<p>Is there a way to <strong>keep the previous state</strong> of the table, after redirections between components? </p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["typescript", "oop"], "comments": [{"owner": {"reputation": 34040, "user_id": 1346234, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/2y3FX.png?s=128&g=1", "display_name": "Justinas", "link": "https://stackoverflow.com/users/1346234/justinas"}, "edited": false, "score": 0, "creation_date": 1564560268, "post_id": 57285960, "comment_id": 101066926, "body": "Usually you have interfaces and controllers in different folders, one class/interface per file named as that class/interface. It&#39;s because one interface can be implemented by multiple classes"}, {"owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "reply_to_user": {"reputation": 34040, "user_id": 1346234, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/2y3FX.png?s=128&g=1", "display_name": "Justinas", "link": "https://stackoverflow.com/users/1346234/justinas"}, "edited": false, "score": 0, "creation_date": 1564560506, "post_id": 57285960, "comment_id": 101067037, "body": "Please explain why downvote and close."}, {"owner": {"reputation": 34040, "user_id": 1346234, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/2y3FX.png?s=128&g=1", "display_name": "Justinas", "link": "https://stackoverflow.com/users/1346234/justinas"}, "edited": false, "score": 0, "creation_date": 1564560583, "post_id": 57285960, "comment_id": 101067076, "body": "Because you ask <code>What color is better: blue or yellow and why?</code>"}, {"owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "reply_to_user": {"reputation": 34040, "user_id": 1346234, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/2y3FX.png?s=128&g=1", "display_name": "Justinas", "link": "https://stackoverflow.com/users/1346234/justinas"}, "edited": false, "score": 0, "creation_date": 1564560636, "post_id": 57285960, "comment_id": 101067094, "body": "I think it&#39;s not the same concept. You can say these two patterns are the same rather than close it. But actually, are them the same? That&#39;s also what I want to ask."}], "answers": [{"comments": [{"owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1564565649, "post_id": 57287006, "comment_id": 101069960, "body": "Very helpful answer. I think <code>emailServiceUser&#47;IEmailService.ts</code> is not the right place to put the interface when there are many concrete classes depend on the <code>IEmailService</code> interface, should I put this interface into a separated file or directory? The directory structure like <code>interfaces&#47;IEmailService.ts</code>, group by type. It&#39;s confused about how to organize interfaces and concrete classes when to use DDD."}, {"owner": {"reputation": 486, "user_id": 5235638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3e4b427adce6b684290ed656edb137?s=128&d=identicon&r=PG&f=1", "display_name": "SciFiThief", "link": "https://stackoverflow.com/users/5235638/scifithief"}, "reply_to_user": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1564567618, "post_id": 57287006, "comment_id": 101071147, "body": "If you&#39;re using DI, then <code>emailServiceUser&#47;</code> (important thing it&#39;s close to <code>EmailServiceUser</code>) would be the right place to put the interface. Concrete classes will be in completely different folders and that&#39;s OK. Probably your <code>EmailService</code> should not be a part of the Domain Model, but rather the app layer. Domain Model should be self-contained (no connection to app layer). At this point I can only guess, since you know your application better than me, but I suggest you to consult Clean Architecture by Bob Martin (layered arch, DI) and DDD by Eric Evans if you didn&#39;t read them yet."}, {"owner": {"reputation": 486, "user_id": 5235638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3e4b427adce6b684290ed656edb137?s=128&d=identicon&r=PG&f=1", "display_name": "SciFiThief", "link": "https://stackoverflow.com/users/5235638/scifithief"}, "reply_to_user": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1564567742, "post_id": 57287006, "comment_id": 101071230, "body": "Also, there&#39;s Domain-Driven Design Quickly by Abel Avram (Author), Floyd Marinescu (Author) in under 200 pages. DDD by Eric Evans can be overwhelming sometimes."}, {"owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1564568313, "post_id": 57287006, "comment_id": 101071580, "body": "Yes. I am reading it. It&#39;s a little hard to understand. There are few examples. And yes, I use IoC to manage DI as well.  This is a demo repo: <a href=\"https://github.com/mrdulin/gcp-task-queue\" rel=\"nofollow noreferrer\">github.com/mrdulin/gcp-task-queue</a>. But I put the interfaces casually."}, {"owner": {"reputation": 486, "user_id": 5235638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3e4b427adce6b684290ed656edb137?s=128&d=identicon&r=PG&f=1", "display_name": "SciFiThief", "link": "https://stackoverflow.com/users/5235638/scifithief"}, "reply_to_user": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1564575378, "post_id": 57287006, "comment_id": 101075529, "body": "Firstly, I&#39;d try to identify what should be a part of the domain model. Once that&#39;s done, you can put other stuff into different layers (anything related to rest calls). Then I&#39;d just follow the rules specified in the answer above in scope of a single layer and use the rule that layers above should only have access to objects on a layer below them."}, {"owner": {"reputation": 486, "user_id": 5235638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3e4b427adce6b684290ed656edb137?s=128&d=identicon&r=PG&f=1", "display_name": "SciFiThief", "link": "https://stackoverflow.com/users/5235638/scifithief"}, "reply_to_user": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1564575748, "post_id": 57287006, "comment_id": 101075711, "body": "You can structure layers in the projects with folders. It should be obvious just by the look at it, where&#39;s what. I think that&#39;s all the help I can provide."}], "tags": [], "owner": {"reputation": 486, "user_id": 5235638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3e4b427adce6b684290ed656edb137?s=128&d=identicon&r=PG&f=1", "display_name": "SciFiThief", "link": "https://stackoverflow.com/users/5235638/scifithief"}, "is_accepted": true, "score": 1, "last_activity_date": 1564563799, "creation_date": 1564563799, "answer_id": 57287006, "question_id": 57285960, "link": "https://stackoverflow.com/questions/57285960/put-interfaces-and-concrete-class-in-one-file-or-separate-them-in-different-file/57287006#57287006", "title": "Put interfaces and concrete class in one file or separate them in different files?", "body": "<p>If you don't need to expose an interface to some other code you may have that interface in the same file as a class. If the interface is used by several classes you may want to put it into a separate folder/file as mentioned in the comments. However, there are a few cases that are needed to be clarified.</p>\n\n<p>Typescript interfaces are slightly different from interfaces in other languages. From the handbook (<a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/interfaces.html</a>):</p>\n\n<blockquote>\n  <p>One of TypeScript\u2019s core principles is that type checking focuses on the shape that values have. This is sometimes called \u201cduck typing\u201d or \u201cstructural subtyping\u201d. In TypeScript, interfaces fill the role of naming these types, and are a powerful way of defining contracts within your code as well as contracts with code outside of your project.</p>\n</blockquote>\n\n<p>So in case of <code>IEmailServiceOptions</code> it is totally fine to have <code>interface IEmailServiceOptions {}</code> in the same file as a class, because you only expect the options to be of a certain shape. There are cases when you want to use it outside of the class, for example, if you have some other interface that has a property, which should comply with <code>interface IEmailServiceOptions {}</code>. However, the file/folder with this interface should be beside the class (<code>EmailService</code> in this case), because the options is something that the class \"depends\" on.</p>\n\n<p>As for <code>IEmailService</code> the situation is slightly different. You not just checking the shape of options that some method is accepting. You're binding class implementation to an interface. In this case an interface is not something that class owns or depends on, but something that the class is committed to (a contract). So ideally, if you put these kind of interfaces into a separate folder/file, the folder/file should not be beside the classes that implement the interface, but beside the class or something else that expects to use the instance of a class that implements the interface. It is especially noticeable when you're using DI.</p>\n\n<p>For example,</p>\n\n<pre><code>// emailServiceUser/EmailServiceUser.ts\nclass EmailServiceUser {\n    constructor(emailService: IEmailService) {}\n}\n\n// emailServiceUser/IEmailService.ts\ninterface IEmailService {\n    send(mail: any): Promise&lt;any&gt;;\n}\n\n// emailService/EmailService.ts\nimport IEmailService from '../emailServiceUser/IEmailService';\n\nclass EmailService implements IEmailService {...}\n</code></pre>\n\n<p>So, as you can see, that <code>EmailServiceUser</code> expects and emailService to implement <code>IEmailService</code>. That's why <code>EmailServiceUser</code> provides the interface (the interface is in the same folder). Now we can create as many classes as we want to implement the emailService.</p>\n"}], "owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57287006, "answer_count": 1, "score": 1, "last_activity_date": 1596864352, "creation_date": 1564560157, "last_edit_date": 1596864352, "question_id": 57285960, "link": "https://stackoverflow.com/questions/57285960/put-interfaces-and-concrete-class-in-one-file-or-separate-them-in-different-file", "title": "Put interfaces and concrete class in one file or separate them in different files?", "body": "<p>This question confused me for several years. Here are the demos:</p>\n\n<p><strong>Put interface and concrete in one file</strong> </p>\n\n<p><code>EmailService.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface IEmailService {\n  send(mail: any): Promise&lt;any&gt;;\n}\n\ninterface IEmailServiceOptions {}\n\nclass EmailService implements IEmailService {\n  public static getInstance(options: IEmailServiceOptions) {\n    if (EmailService.instance) {\n      return EmailService.instance;\n    } else {\n      EmailService.instance = new EmailService(options);\n      return EmailService.instance;\n    }\n  }\n  private static instance: EmailService;\n  private constructor(options: IEmailServiceOptions) {}\n\n  public async send(mail: any): Promise&lt;any&gt; {\n    // ...\n  }\n}\n\nexport { EmailService, IEmailService, IEmailServiceOptions };\n\n</code></pre>\n\n<p>Or, <strong>separate them in different files</strong>: </p>\n\n<p><code>EmailService.ts</code></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface IEmailService {\n  send(mail: any): Promise&lt;any&gt;;\n}\n\ninterface IEmailServiceOptions {}\n\nexport { IEmailService, IEmailServiceOptions };\n\n</code></pre>\n\n<p><code>EmailServiceImpl.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { IEmailService, IEmailServiceOptions } from './EmailService';\n\nclass EmailService implements IEmailService {\n  public static getInstance(options: IEmailServiceOptions) {\n    if (EmailService.instance) {\n      return EmailService.instance;\n    } else {\n      EmailService.instance = new EmailService(options);\n      return EmailService.instance;\n    }\n  }\n  private static instance: EmailService;\n  private constructor(options: IEmailServiceOptions) {}\n\n  public async send(mail: any): Promise&lt;any&gt; {\n    // ...\n  }\n}\n\nexport { EmailService };\n\n</code></pre>\n\n<p>Which one is better? Why?</p>\n"}, {"tags": ["javascript", "typescript", "ip-address"], "answers": [{"tags": [], "owner": {"reputation": 28003, "user_id": 1083663, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/784657ec6f91c7406a2c4121d8bda505?s=128&d=identicon&r=PG", "display_name": "GOTO 0", "link": "https://stackoverflow.com/users/1083663/goto-0"}, "is_accepted": false, "score": 1, "last_activity_date": 1564564748, "creation_date": 1564564748, "answer_id": 57287352, "question_id": 57285741, "link": "https://stackoverflow.com/questions/57285741/custom-js-logic-to-validate-ip-ranges-does-not-work-as-intended/57287352#57287352", "title": "Custom JS logic to validate IP ranges does not work as intended", "body": "<p>I split your code in two loops: one that checks if the single elements are valid and one that validates the ranges.\nNote that as soon as one of the elements in the first range is larger than its counterpart in the second range we can say that the range is invalid: there is no need to check further. Conversely, if the element in the first range is smaller that the element in the second range then the range is valid. There is really no need to check further unless the elements in both ranges are equal.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>getIpRangeValidStates() : boolean[] {\n  console.log(\"getIdRangeValidStates\");\n  let validStates = [];\n\n  for(let i = 0; i &lt; this.ipRangeFormArray.length; i++){\n    let currentFormGroup = this.ipRangeFormArray.controls[i];\n    let startRangeElements = (currentFormGroup.get('startRange').value as string).split(\".\");\n    let endRangeElements = (currentFormGroup.get('endRange').value as string).split(\".\");\n\n    let rangeValid = true;\n    for(let j = 0; j &lt; 4; j++) {\n      let startRangeAsInt = parseInt(startRangeElements[j]);\n      let endRangeAsInt = parseInt(endRangeElements[j]);\n      console.log(startRangeAsInt, \" : \", endRangeAsInt);\n\n      if(isNaN(startRangeAsInt) || isNaN(endRangeAsInt))\n      {\n        console.log(\"NaN, invalid\");\n        rangeValid = false;\n        break;\n      }\n    }\n    if (rangeValid) {\n      for(let j = 0; j &lt; 4; j++) {\n        let startRangeAsInt = parseInt(startRangeElements[j]);\n        let endRangeAsInt = parseInt(endRangeElements[j]);\n\n        if(startRangeAsInt &gt; endRangeAsInt) {\n          console.log(startRangeAsInt, \" &gt; \", endRangeAsInt, \"- invalid\");\n          rangeValid = false;\n          break;\n        }\n        if(startRangeAsInt &lt; endRangeAsInt) {\n          console.log(startRangeAsInt, \" &lt; \", endRangeAsInt, \"- valid\");\n          break;\n        }\n      }\n    }\n\n    rangeValid === false ? validStates.push(false) : validStates.push(true); \n  }\n  console.log(\"Range states: \", validStates);\n  return validStates;\n}\n</code></pre>\n\n<p>Of course, this can be simplified, but it will give you the idea.</p>\n"}, {"tags": [], "owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "is_accepted": false, "score": 1, "last_activity_date": 1564573629, "last_edit_date": 1564573629, "creation_date": 1564572926, "answer_id": 57289835, "question_id": 57285741, "link": "https://stackoverflow.com/questions/57285741/custom-js-logic-to-validate-ip-ranges-does-not-work-as-intended/57289835#57289835", "title": "Custom JS logic to validate IP ranges does not work as intended", "body": "<p>When working with IPs i would recommend converting the IP to a number instead of using the string representation.\n(An IP String is just a nice human-readable 4 byte integer, each block denoting the value of the byte at that position)</p>\n\n<p>Once you have the ip in number form, checking if an ip comes after another is a simple <code>&lt;</code>.<br>\nAlso checking if an ip is within a certain range <code>start, end</code> is trivial:\n<code>ip &gt;= start &amp;&amp; ip &lt;= end</code>.</p>\n\n<p>Code Example to convert the ip string into an integer and comparing it:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function ipToNumber(ipStr) {\r\n  let [a, b, c, d] = ipStr.split('.').map(Number);\r\n  // Note: Normally you would use shifts (a &lt;&lt; 24), etc...\r\n  // but javascript only supports *signed* 32bit shifts, so we need to use this.\r\n  return (a * 2**24) + (b &lt;&lt; 16) + (c &lt;&lt; 8) + d;\r\n}\r\n\r\nlet start = ipToNumber(\"127.0.0.1\");\r\nlet end = ipToNumber(\"128.0.0.1\");\r\n\r\nconsole.log(\"Start: \", start.toString(16)); // 0x7f000001\r\nconsole.log(\"End: \", end.toString(16)); // 0x80000001\r\nconsole.log(start &gt; end, start &lt; end); // false, true\r\n\r\n// check if ip is in range\r\nlet sample1 = ipToNumber(\"127.244.32.1\");\r\nconsole.log(\"sample1 in range:\", sample1 &gt;= start &amp;&amp; sample1 &lt;= end); // true\r\n\r\nlet sample2 = ipToNumber(\"128.1.0.22\");\r\nconsole.log(\"sample2 in range:\", sample2 &gt;= start &amp;&amp; sample2 &lt;= end); // false</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Integrated in your code example it could look like this:<br>\n(Note: my typescript isn't very good, i converted it to javascript)</p>\n\n<pre><code>function toIpNumber(ipStr) {\n  let parts = ipStr.split('.').map(Number);\n  if(parts.length !== 4 || parts.some(e =&gt; isNaN(e) || e &lt; 0 || e &gt; 255)) return false;\n  let [a,b,c,d] = parts;\n  return (a * 2**24) + (b &lt;&lt; 16) + (c &lt;&lt; 8) + d;\n}\n\nfunction getIpRangeValidStates() {\n    console.log(\"getIdRangeValidStates\");\n    let validStates = [];\n\n    for(let i = 0; i &lt; this.ipRangeFormArray.length; i++){\n      let currentFormGroup = this.ipRangeFormArray.controls[i];\n      let startRange = toIpNumber(currentFormGroup.get('startRange').value);\n      let endRange = toIpNumber(currentFormGroup.get('endRange').value);\n\n      let rangeValid = true;\n      if(startRange === false || endRange === false)\n        validStates.push(false);\n      else\n        validStates.push(startRange &lt;= endRange);\n    }\n    console.log(\"Range states: \", validStates);\n    return validStates;\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2732, "user_id": 1352921, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UkdAV.jpg?s=128&g=1", "display_name": "Oxi", "link": "https://stackoverflow.com/users/1352921/oxi"}, "is_accepted": false, "score": 0, "last_activity_date": 1564574636, "last_edit_date": 1564574636, "creation_date": 1564573875, "answer_id": 57290098, "question_id": 57285741, "link": "https://stackoverflow.com/questions/57285741/custom-js-logic-to-validate-ip-ranges-does-not-work-as-intended/57290098#57290098", "title": "Custom JS logic to validate IP ranges does not work as intended", "body": "<p>If i Understood your problem.</p>\n\n<p>The best way to check the provided ips are a range is by converting both ip's to a long int and compare the long int's.</p>\n\n<p>Converting to int can be done like</p>\n\n<pre><code>const d = dottedDec.split('.');\nconst longInt = ((((((+d[0])*256)+(+d[1]))*256)+(+d[2]))*256)+(+d[3]);\n</code></pre>\n\n<p>Note: this code is not checking if its a valid ipv4 or not</p>\n\n<p>Now when you have 2 numbers corresponding to 2 ips, you can compare it to check if its a range, also you can find how many ips in the range etc</p>\n"}], "owner": {"reputation": 1183, "user_id": 10460880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce9c365b769be33ee994450d0bbb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "Jake12342134", "link": "https://stackoverflow.com/users/10460880/jake12342134"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1564574636, "creation_date": 1564559299, "question_id": 57285741, "link": "https://stackoverflow.com/questions/57285741/custom-js-logic-to-validate-ip-ranges-does-not-work-as-intended", "title": "Custom JS logic to validate IP ranges does not work as intended", "body": "<p>I need to create some logic that allows for validation of a specified IP range. Not a single IP address but two addresses that make up a single range.</p>\n\n<p>I thought this would be somewhat simple so I devised some JS code that splits up the two input strings represented the ranges using a <code>.</code> delimiter and then compared each number in the first range with the equivalent number in the second range. If the start number is greater than the end number then the range would be invalid.</p>\n\n<p>This works, to a degree. However it's not completely accurate as I'm getting pairs such as <code>127.0.0.3 / 128.0.0.1</code> which return false when in reality this pair of IP addresses is a valid range (ignoring the technicalities with using 127 etc.) </p>\n\n<p>I'm not sure how exactly to check for a valid IP range, using Google doesn't seem to return any information on how to validate an IP range either.</p>\n\n<p>How can I change my code around so that all invalid ranges are included and all invalid are excluded?</p>\n\n<pre><code>getIpRangeValidStates() : boolean[] {\n    console.log(\"getIdRangeValidStates\");\n    let validStates = [];\n\n    for(let i = 0; i &lt; this.ipRangeFormArray.length; i++){\n      let currentFormGroup = this.ipRangeFormArray.controls[i];\n      let startRangeElements = (currentFormGroup.get('startRange').value as string).split(\".\");\n      let endRangeElements = (currentFormGroup.get('endRange').value as string).split(\".\");\n\n      let rangeValid = true;\n      for(let j = 0; j &lt; 4; j++) {\n        let startRangeAsInt = parseInt(startRangeElements[j]);\n        let endRangeAsInt = parseInt(endRangeElements[j]);\n        console.log(startRangeAsInt, \" : \", endRangeAsInt);\n\n        if(isNaN(startRangeAsInt) || isNaN(endRangeAsInt))\n        {\n          console.log(\"NaN, invalid\");\n          rangeValid = false;\n        }\n        else\n        {\n          if(startRangeAsInt &gt; endRangeAsInt) {\n            console.log(startRangeAsInt, \" &gt; \", endRangeAsInt, \"- invalid\")\n            rangeValid = false;\n          }\n        }\n      }\n\n      rangeValid === false ? validStates.push(false) : validStates.push(true); \n    }\n    console.log(\"Range states: \", validStates);\n    return validStates;\n  }\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "react-context"], "answers": [{"tags": [], "owner": {"reputation": 684, "user_id": 2425822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIpqB.jpg?s=128&g=1", "display_name": "Alex Trn", "link": "https://stackoverflow.com/users/2425822/alex-trn"}, "is_accepted": true, "score": 0, "last_activity_date": 1564568291, "creation_date": 1564568291, "answer_id": 57288475, "question_id": 57285528, "link": "https://stackoverflow.com/questions/57285528/typescript-react-context-consumer-doesnt-re-render-the-main-component/57288475#57288475", "title": "TypeScript - React Context consumer doesn&#39;t re-render the main component", "body": "<p>Just solve the problem! It was due to a mismatch between <code>react</code> and <code>react-dom</code> packages, where react was <em>16.8.6</em> and react-dom was <em>16.5.0</em>. After upgrading react-dom, it now works like a charm :)</p>\n"}], "owner": {"reputation": 684, "user_id": 2425822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIpqB.jpg?s=128&g=1", "display_name": "Alex Trn", "link": "https://stackoverflow.com/users/2425822/alex-trn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 57288475, "answer_count": 1, "score": 0, "last_activity_date": 1564568291, "creation_date": 1564558493, "question_id": 57285528, "link": "https://stackoverflow.com/questions/57285528/typescript-react-context-consumer-doesnt-re-render-the-main-component", "title": "TypeScript - React Context consumer doesn&#39;t re-render the main component", "body": "<p>I've implemented a react context structure for my application, it works correctly and changes the states I've defined. But the main problem is that the UI component (in which I have my consumer) does not re-renders.\nHere's my code in TypeScript:</p>\n\n<pre><code>class Home extends Component&lt;any, any&gt; {\n  render() {\n    return (\n      &lt;DataProvider&gt;\n        &lt;MainComponent /&gt;\n      &lt;/DataProvider&gt;\n    );\n  }\n}\n</code></pre>\n\n<p>My Context:</p>\n\n<pre><code>import React, { Component } from 'react';\n\nexport const dataContext = React.createContext({\n  state: {\n    temp: 0,\n  },\n  setGeneralState: () =&gt; {\n  /* */\n  },\n});\n\nexport default class DataProvider extends Component {\n  state = {\n    temp: 1,\n  };\n  render() {\n    return (\n      &lt;dataContext.Provider\n        value={{\n          state: this.state,\n          setGeneralState: () =&gt;\n            this.setState({\n              temp: 999,\n            }),\n        }}\n      &gt;\n        {this.props.children}\n      &lt;/dataContext.Provider&gt;\n    );\n  }\n}\n</code></pre>\n\n<p>And the consumer in UI:</p>\n\n<pre><code>&lt;dataContext.Consumer&gt;\n   {(context) =&gt; (\n        &lt;React.Fragment&gt;\n        &lt;p&gt;Temp Value: {context.state.temp}&lt;/p&gt;\n          &lt;button onClick={context.setGeneralState}&gt;\n          Press Me\n          &lt;/button&gt;\n        &lt;/React.Fragment&gt;\n        )}\n &lt;/dataContext.Consumer&gt;\n</code></pre>\n\n<p>So when I press the button, it should set the <code>temp</code> state to 999 and show it in UI, but it only changes the UI when some actions take place which the render function in the UI operates. I should note that the state is changed in React DevTools.</p>\n"}, {"tags": ["typescript", "vue.js", "vuex", "vue-router", "vuex-modules"], "owner": {"reputation": 26, "user_id": 4818123, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c7f6fefe7743c80b89b8af7d4ebacc2?s=128&d=identicon&r=PG&f=1", "display_name": "Takesi Tokugawa YD", "link": "https://stackoverflow.com/users/4818123/takesi-tokugawa-yd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1564558141, "creation_date": 1564558141, "question_id": 57285435, "link": "https://stackoverflow.com/questions/57285435/make-computed-property-update-when-vuexs-router-currentroute-name-changed", "title": "Make computed property update when Vuex&#39;s &quot;router.currentRoute.name&quot; changed", "body": "<p>Consider wizard-type application; it has \"proceed to next step\" button, which text should be \"next\" until the last step of some interaction with user:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;Button :text=\"!certainVuexStore.isLastStep ? 'next' : 'finish'\" /&gt;\n</code></pre>\n\n<p>Each step, the view changes by Vue-router (the below code is TypeScript):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export enum NamedRoutes {\n  firstStep = 'FIRST_STEP',\n  // ...\n  lastStep = 'LAST_STEP'\n}\n\nexport default new VueRouter({\n  routes: [\n    {\n      name: NamedRoutes.firstStep,\n      path: '/',\n      component: FirstStepView\n    },\n    // ...\n    {\n      name: NamedRoutes.lastStep,\n      path: `/${NamedRoutes.lastStep}`,\n      component: LastStepView\n    }\n  ]\n});\n</code></pre>\n\n<p>So, the computed property <code>isLastStep</code> of vuex store could be declared as:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { VuexModule, Module, Action, getModule } from 'vuex-module-decorators';\nimport store, { StoreModuleNames } from './Store';\nimport router, { NamedRoutes } from '@Router/routes';\n\n\n@Module({ name: StoreModuleNames.common, store, dynamic: true })\nexport default class Common extends VuexModule {\n\n  public get isLastStep(): boolean {\n    return router.currentRoute.name === NamedRoutes.lastStep;\n  }\n\n  @Action\n  public proceedToNextStep(): void {\n    switch (router.currentRoute.name) {\n      // Two steps is enough for now\n      case NamedRoutes.firstStep: {\n        router.push(\n            { name: NamedRoutes.lastStep },\n            (): void =&gt; { console.log(router.currentRoute.name); })\n        break;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Currently, <code>isLastStep</code> will not be updated when <code>router.push({ name: NamedRoutes.lastStep }</code> will be executed. Because I ask this question, I don't know the cause exactly, but it may be:</p>\n\n<ol>\n<li>Reactivity features of Vuex. It does not watch for the <code>router.currentRoute.name</code>.</li>\n<li><code>router.currentRoute.name</code> is external in respect to Vuex module.</li>\n</ol>\n\n<p>What the exact cause and how I can solve this problem?</p>\n"}, {"tags": ["typescript", "variables", "parameters", "graphql", "typegraphql"], "answers": [{"tags": [], "owner": {"reputation": 57003, "user_id": 6024220, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6s3nUiQ9-fI/AAAAAAAAAAI/AAAAAAAAA0E/3zpg3zXHu4I/photo.jpg?sz=128", "display_name": "Daniel Rearden", "link": "https://stackoverflow.com/users/6024220/daniel-rearden"}, "is_accepted": false, "score": 0, "last_activity_date": 1564574835, "creation_date": 1564574835, "answer_id": 57290405, "question_id": 57285103, "link": "https://stackoverflow.com/questions/57285103/typegraphql-parameter-error-in-playground-when-using-variables/57290405#57290405", "title": "typegraphql : parameter error in playground when using variables", "body": "<p>Incorrectly formatting your variables inside Playground will cause it to just not send the variables. If any of the variables were non-null, your request will fail validation.</p>\n\n<p>This</p>\n\n<pre><code>{\n  \"username\": \"test@test.com\"\n  \"password\": \"Test\"\n}\n</code></pre>\n\n<p>is not valid JSON because it's missing a comma. Playground will shown a red error indicator to the left of any lines that have syntax errors like these.</p>\n"}], "owner": {"reputation": 938, "user_id": 9168390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da446ed1c3084a00b8c209783778fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome ", "link": "https://stackoverflow.com/users/9168390/jerome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564574835, "creation_date": 1564556890, "question_id": 57285103, "link": "https://stackoverflow.com/questions/57285103/typegraphql-parameter-error-in-playground-when-using-variables", "title": "typegraphql : parameter error in playground when using variables", "body": "<p>I'm facing a weird issue, when trying to execute mutations with variables as parameters in the graphql playground</p>\n\n<pre><code>mutation userLogin($username:String!, $password:String!){\n  userLogin(\n    username: $username\n    password: $password) \n  {\n    id\n  }\n}\n</code></pre>\n\n<p>Parameters in playground \"QUERY VARIABLES\" tab:</p>\n\n<pre><code>{\n  \"username\": \"test@test.com\"\n  \"password\": \"Test\"\n}\n</code></pre>\n\n<p>this failed with message </p>\n\n<pre><code>{\n        \"path\": \"unk\",\n        \"code\": \"INTERNAL_SERVER_ERROR\",\n        \"message\": \"Variable \\\"$username\\\" of required type \\\"String!\\\" was not provided.\"\n      },\n      {\n        \"path\": \"unk\",\n        \"code\": \"INTERNAL_SERVER_ERROR\",\n        \"message\": \"Variable \\\"$password\\\" of required type \\\"String!\\\" was not provided.\"\n      }\n</code></pre>\n\n<p>but running this is working well :</p>\n\n<pre><code>mutation {\n  userLogin(\n    username: \"test8@test.com\"\n    password: \"Test1234!\") \n  {\n    id\n  }\n}\n</code></pre>\n\n<p>What am I missing here ?</p>\n\n<p>the variables are @ArgsType</p>\n\n<pre><code>@ArgsType()\nexport class LoginInputType {\n    @Field()\n    username: string;\n\n    @Field()\n    password: string;\n}\n</code></pre>\n\n<p>and I declare them in resolver</p>\n\n<pre><code>async userLogin(\n        @Args() { username, password }: LoginInputType,\n        @Ctx() context: GlobalContext\n    ): Promise&lt;UsersEntity | null&gt; {\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 3, "last_activity_date": 1564557309, "creation_date": 1564557309, "answer_id": 57285210, "question_id": 57285080, "link": "https://stackoverflow.com/questions/57285080/type-string-cant-be-used-to-index-type-unknown-or-how-to-let-typescript-a/57285210#57285210", "title": "type &#39;string&#39; can&#39;t be used to index type &#39;unknown || or how to let typescript assign Type[key] = SameType[key]", "body": "<p>You need to assert that <code>Object.keys</code> returns <code>Array&lt;keyof T&gt;</code> not <code>Array&lt;string&gt;</code>. </p>\n\n<pre><code>async function getAndAssignToObject&lt;T&gt;(key: string, objectToAssign: T): Promise&lt;T&gt; {\n  const data = await AppStorage.get&lt;T&gt;(key);\n  (Object.keys(data) as Array&lt;keyof T&gt;).forEach(dataKey =&gt; {\n    objectToAssign[dataKey] = data[dataKey];\n  });\n\n  return data;\n}\n\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/CYUwxgNghgTiAEYD2A7AzgF3gQQA64GUMkYoBzEALngG8AoeeCjAHgBUA+ACgGtqoUATwCU1AAowkAWwCWaEOw4BuOgF86UNIJRh4AMwCuOjDNRMQGbCmDY0aGWRRskAeQBGAK3CtOvEIOpMGBkUMgAaeCRPb2dbe0dqNlF4CWk5BU5aBkRUTHhgKAwoeABeeCgAdygZLDxCYlIKADpmRT8RFUYudy8wDCaefzQuAqLhcrQcGFJBFkHBJD14TmEmvRIAUSgwAAsRwqgAaX9SjizGRijejFi7BxQAbVGj-wBdUvyDp4PjwVfO+CqYQqbJwDAGGAoT5FFTqOjMKw2O6OZw9bxcABEGIi9EYUGoAEY1MIgA\" rel=\"nofollow noreferrer\">Playground</a></p>\n\n<p>The reason this is not the default is explained <a href=\"https://stackoverflow.com/questions/55012174/why-doesnt-object-keys-return-a-keyof-type-in-typescript/55012175#55012175\">here</a>. Basically the idea is that for example <code>objectToAssign</code> could have more properties than <code>keyof T</code> would suggest and this can lead to runtime errors. In this case you would be copying those extra keys to <code>data</code> which is not a problem in this function but might cause issues in other places.</p>\n"}], "owner": {"reputation": 4439, "user_id": 1255819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9Cizi.png?s=128&g=1", "display_name": "distante", "link": "https://stackoverflow.com/users/1255819/distante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "accepted_answer_id": 57285210, "answer_count": 1, "score": 2, "last_activity_date": 1564557309, "creation_date": 1564556790, "question_id": 57285080, "link": "https://stackoverflow.com/questions/57285080/type-string-cant-be-used-to-index-type-unknown-or-how-to-let-typescript-a", "title": "type &#39;string&#39; can&#39;t be used to index type &#39;unknown || or how to let typescript assign Type[key] = SameType[key]", "body": "<p>I have this helper function:</p>\n\n<pre><code>getAndAssignToObject&lt;T&gt;(key: string, objectToAssign: T): Promise&lt;T&gt; {\n  const data = await AppStorage.get&lt;T&gt;(key);\n  Object.keys(data).forEach( dataKey =&gt; {\n    // @ts-ignore\n    objectToAssign[dataKey] = data[dataKey];\n  });\n\n  return data;\n}\n</code></pre>\n\n<p>and is used in this way:</p>\n\n<pre><code>Helpers.getAndAssignToObject&lt;BlockingConfig&gt;(Components.BlockingRules, blockingData);\n</code></pre>\n\n<p>It works as expected but as you can see I have there a <code>@ts-ignore</code> that I would really like to remove.</p>\n\n<p>The errorI get when I remove it is :</p>\n\n<blockquote>\n  <p>Element implicitly has an 'any' type because expression of type 'string' can't be used to index type 'unknown'.\n    No index signature with a parameter of type 'string' was found on type 'unknown'   .ts(7053)</p>\n</blockquote>\n\n<p>and I do not know how to fix it. I tried to give <code>dataKey</code> the type <code>keyof T</code> but it didn't work.</p>\n"}, {"tags": ["typescript", "autodesk-forge", "autodesk-model-derivative"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7453056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3352122d4da0c19da0551ec570bcfea?s=128&d=identicon&r=PG", "display_name": "mustafa.salaheldin", "link": "https://stackoverflow.com/users/7453056/mustafa-salaheldin"}, "edited": false, "score": 0, "creation_date": 1564561199, "post_id": 57285847, "comment_id": 101067426, "body": "This one returns only the thumbnail of the design file. What I need is the thumbnail of each 3d view within this file. Although I retrieve a binary response, it seems like it is corrupted."}, {"owner": {"reputation": 5303, "user_id": 1759915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8suYs.jpg?s=128&g=1", "display_name": "Petr Broz", "link": "https://stackoverflow.com/users/1759915/petr-broz"}, "reply_to_user": {"reputation": 45, "user_id": 7453056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3352122d4da0c19da0551ec570bcfea?s=128&d=identicon&r=PG", "display_name": "mustafa.salaheldin", "link": "https://stackoverflow.com/users/7453056/mustafa-salaheldin"}, "edited": false, "score": 0, "creation_date": 1564562062, "post_id": 57285847, "comment_id": 101067884, "body": "Ah sorry, I misunderstood the question. Let me update the answer."}, {"owner": {"reputation": 5303, "user_id": 1759915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8suYs.jpg?s=128&g=1", "display_name": "Petr Broz", "link": "https://stackoverflow.com/users/1759915/petr-broz"}, "reply_to_user": {"reputation": 45, "user_id": 7453056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3352122d4da0c19da0551ec570bcfea?s=128&d=identicon&r=PG", "display_name": "mustafa.salaheldin", "link": "https://stackoverflow.com/users/7453056/mustafa-salaheldin"}, "edited": false, "score": 0, "creation_date": 1564562748, "post_id": 57285847, "comment_id": 101068273, "body": "When querying something like <code>curl -X GET https:&#47;&#47;developer.api.autodesk.com&#47;modelderivative&#47;v2&#47;design&zwnj;&#8203;data&#47;dXJ...&#47;manifest&zwnj;&#8203;&#47;urn:adsk.viewing:fs&zwnj;&#8203;.file:dXJ...&#47;output&#47;&zwnj;&#8203;Resource&#47;3D_View&#47;_3D&zwnj;&#8203;_%20960621&#47;_3D_1.png -H &#39;Accept: *&#47;*&#39; -H &#39;Accept-Encoding: gzip, deflate&#39; -H &#39;Authorization: Bearer &lt;token&gt;&#39;</code>, I got a correct thumbnail. If you&#39;re still having issues with yours, and don&#39;t mind sharing the model or your app credentials, please contact us via forge (dot) help (at) autodesk (dot) com and we&#39;ll investigate it further."}, {"owner": {"reputation": 45, "user_id": 7453056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3352122d4da0c19da0551ec570bcfea?s=128&d=identicon&r=PG", "display_name": "mustafa.salaheldin", "link": "https://stackoverflow.com/users/7453056/mustafa-salaheldin"}, "edited": false, "score": 0, "creation_date": 1564567662, "post_id": 57285847, "comment_id": 101071173, "body": "I use the sample revit model advanced mep file."}, {"owner": {"reputation": 5303, "user_id": 1759915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8suYs.jpg?s=128&g=1", "display_name": "Petr Broz", "link": "https://stackoverflow.com/users/1759915/petr-broz"}, "reply_to_user": {"reputation": 45, "user_id": 7453056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3352122d4da0c19da0551ec570bcfea?s=128&d=identicon&r=PG", "display_name": "mustafa.salaheldin", "link": "https://stackoverflow.com/users/7453056/mustafa-salaheldin"}, "edited": false, "score": 0, "creation_date": 1564568147, "post_id": 57285847, "comment_id": 101071482, "body": "That file seems to be working fine as well: <a href=\"https://pasteboard.co/IqvBWL9.png\" rel=\"nofollow noreferrer\">pasteboard.co/IqvBWL9.png</a>. Any specific details about how you&#39;re requesting the derivatives?"}], "tags": [], "owner": {"reputation": 5303, "user_id": 1759915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8suYs.jpg?s=128&g=1", "display_name": "Petr Broz", "link": "https://stackoverflow.com/users/1759915/petr-broz"}, "is_accepted": false, "score": 0, "last_activity_date": 1564562479, "last_edit_date": 1564562479, "creation_date": 1564559759, "answer_id": 57285847, "question_id": 57284679, "link": "https://stackoverflow.com/questions/57284679/how-can-i-define-the-image-size-for-the-derivative-thumbnail-in-forge-model-deri/57285847#57285847", "title": "How can I define the image size for the derivative thumbnail in forge model derivative API?", "body": "<p>If you only need a thumbnail of the main document, you can use the <a href=\"https://forge.autodesk.com/en/docs/model-derivative/v2/reference/http/urn-thumbnail-GET\" rel=\"nofollow noreferrer\">thumbnail</a> endpoint, where the desired image size can be specified via query parameters.</p>\n\n<p>If you're interested in non-standard thumbnails, for example, thumbnails of individual Revit views:</p>\n\n<ol>\n<li>Use the <a href=\"https://forge.autodesk.com/en/docs/model-derivative/v2/reference/http/urn-manifest-GET/\" rel=\"nofollow noreferrer\">GET /modelderivative/v2/designdata/:urn/manifest</a> request first to see all derivatives available for this model</li>\n<li>Find the URN of the thumbnail you're interested in (it could look similar to <code>urn:adsk.viewing:fs.file:dXJ.../output/Resource/3D View/{3D} 98112/{3D}1.png</code>)</li>\n<li>Pass this URN (this time <strong>not</strong> encoded in base64) into the <a href=\"https://forge.autodesk.com/en/docs/model-derivative/v2/reference/http/urn-manifest-derivativeurn-GET/\" rel=\"nofollow noreferrer\">GET /modelderivative/v2/designdata/:urn/manifest/:derivativeUrn</a> request</li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 7453056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3352122d4da0c19da0551ec570bcfea?s=128&d=identicon&r=PG", "display_name": "mustafa.salaheldin", "link": "https://stackoverflow.com/users/7453056/mustafa-salaheldin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564562479, "creation_date": 1564555226, "question_id": 57284679, "link": "https://stackoverflow.com/questions/57284679/how-can-i-define-the-image-size-for-the-derivative-thumbnail-in-forge-model-deri", "title": "How can I define the image size for the derivative thumbnail in forge model derivative API?", "body": "<p>I'm using the Model Derivative API in the following link: </p>\n\n<p><a href=\"https://forge.autodesk.com/en/docs/model-derivative/v2/reference/http/urn-manifest-derivativeurn-GET/\" rel=\"nofollow noreferrer\">https://forge.autodesk.com/en/docs/model-derivative/v2/reference/http/urn-manifest-derivativeurn-GET/</a></p>\n\n<p>to download the 3d views thumbnails from the model derivatives. There are three standard sizes for the thumbnail images.</p>\n\n<p>The question is how can I determine the size I want to download in my request?</p>\n"}, {"tags": ["angular", "typescript", "angular-router", "angular-router-guards"], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 4401980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6fc904160b62d0f44fe5ad4e139e9990?s=128&d=identicon&r=PG&f=1", "display_name": "Meh", "link": "https://stackoverflow.com/users/4401980/meh"}, "edited": false, "score": 1, "creation_date": 1564556649, "post_id": 57284845, "comment_id": 101065069, "body": "Actually that&#39;s a valid point. Also, the dynamic routes aren&#39;t being added if I don&#39;t let access to a specific route so they would be inaccessible anyway. Simply encapsulating everything in <code>children</code> of the root did solve my issue. Thanks!"}], "tags": [], "owner": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "is_accepted": true, "score": 2, "last_activity_date": 1564555951, "creation_date": 1564555951, "answer_id": 57284845, "question_id": 57284446, "link": "https://stackoverflow.com/questions/57284446/how-to-make-all-non-child-routes-guarded/57284845#57284845", "title": "How to make all non-child routes guarded?", "body": "<p>The clean way to achieve it would be to wrap them in <code>children</code> of one route. You said that you are aware of that but you also mentioned that it would cause you to change the whole structure - which is not the case. You probably thought of using <code>loadChildren</code> which would in fact cause a bigger change. Here's an example of wrapping your <code>knowledge-base</code> route using <code>children</code></p>\n\n<pre><code>  {\n    path: 'knowledge-base',\n    canActivate: [AuthGuardService],\n    children: [\n        {\n          path: '',\n          redirectTo: 'knowledge-base/create',\n          pathMatch: 'full'\n        },\n        {\n          path: 'create',\n          component: KnowledgeBaseCreateComponent\n        },\n        {\n          path: 'detail/:id',\n          component: KnowledgeBaseDetailComponent\n        },\n        {\n          path: 'edit/:id',\n          component: KnowledgeBaseEditComponent\n        }\n    ]\n  }\n</code></pre>\n\n<p>This is everything you have to change, basically just wrap it in <code>children</code>. You can apply this approach to other routes as well. Or if you want to use <code>RouterGuard</code> only once, you could create something like <code>path: 'main'</code>, and wrap everything there</p>\n"}, {"comments": [{"owner": {"reputation": 581, "user_id": 4401980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6fc904160b62d0f44fe5ad4e139e9990?s=128&d=identicon&r=PG&f=1", "display_name": "Meh", "link": "https://stackoverflow.com/users/4401980/meh"}, "edited": false, "score": 0, "creation_date": 1564557190, "post_id": 57285062, "comment_id": 101065347, "body": "Agreed, that&#39;s pretty much something I had to learn the hard way unfortunately, when I started off on the project I had little (if any) info at all about how to properly use angular routing. When I started to understand what impact this would have I was already way deep into my application, and had to improvise from there on"}], "tags": [], "owner": {"reputation": 318, "user_id": 4040523, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001694040026/picture?type=large", "display_name": "Gopal Yadav", "link": "https://stackoverflow.com/users/4040523/gopal-yadav"}, "is_accepted": false, "score": 2, "last_activity_date": 1564556724, "creation_date": 1564556724, "answer_id": 57285062, "question_id": 57284446, "link": "https://stackoverflow.com/questions/57284446/how-to-make-all-non-child-routes-guarded/57285062#57285062", "title": "How to make all non-child routes guarded?", "body": "<p>As per the best practices, you should organize your routes hierarchically and use the children to nest the child routes/components. Route Guards also works in the same way, that's why we have canActivateChild guard.</p>\n\n<p>You can still refactor your routing to only have the parent-child (nesting) relationship and use canActivateChild guard. And I think changing this would not be a major impact. If you do lazy loading and separate routes in modules then it might become a big change.</p>\n\n<pre><code>canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): \n    Observable&lt;boolean&gt; | Promise&lt;boolean&gt; | boolean {\n       return this.canActivate(route, state);\n}\n\n{ path: 'servers',  canActivateChild: [AuthGuard], component: ServersComponent,  children: [\n      { path: ':id', component: ServerComponent, resolve: { server: ServerResolver } },\n      { path: ':id/edit', component: EditServerComponent, canDeactivate: [canDeactivateGuard] }\n]}\n\n\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 4401980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6fc904160b62d0f44fe5ad4e139e9990?s=128&d=identicon&r=PG&f=1", "display_name": "Meh", "link": "https://stackoverflow.com/users/4401980/meh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57284845, "answer_count": 2, "score": 0, "last_activity_date": 1564556724, "creation_date": 1564554113, "question_id": 57284446, "link": "https://stackoverflow.com/questions/57284446/how-to-make-all-non-child-routes-guarded", "title": "How to make all non-child routes guarded?", "body": "<p>I have created a routing module in my angular 6 application (<strong>app.routing.ts</strong>). I have added multiple routes to my application, but haven't used the <code>child</code> directive anywhere for my routes (bad practice yes, but now I have added dynamic routes as well on another part of my application and don't want to change the entire structure, as it would take a very long time to do so). </p>\n\n<p>I wanted to know if there was a way I could globally use <code>canActivate: [AuthGuardService]</code> (which checks if user is logged in) for all my routes except the root. I have checked out a similar answer <a href=\"https://stackoverflow.com/questions/40873060/angular2-canactivate-guard-for-all-routes-except-one\">here</a> but the guard doesn't seem to work properly and still loads the page. (Maybe it's because I don't have any child routes). </p>\n\n<p>Also, I think that method also may not be the best way because in that case the the Guard (consumed layer) is able to know which layer is consuming it's methods (which imo is not the best approach for the mvc pattern, granted what I have done with the routing module isn't pretty either). Is there a way to achieve this in a cleaner manner?</p>\n\n<p><strong>app.routing.ts</strong> </p>\n\n<pre><code>export const routes: Routes = [\n  {\n    path: 'main',\n    component: MainComponent,\n    pathMatch: 'full'\n  },\n  {\n    path: 'search/:id',\n    component: GlobalSearchComponent\n  },\n  {\n    path: '',\n    canActivate: [AuthGuardService],\n    component: LoginComponent,\n  },\n  {\n    path: 'reset',\n    component: ResetPasswordComponent\n  },\n  {\n    path: 'forgot',\n    component: ForgotPasswordComponent\n  },\n  {\n    path: 'knowledge-base/create',\n    component: KnowledgeBaseCreateComponent\n  },\n  {\n    path: 'knowledge-base/detail/:id',\n    component: KnowledgeBaseDetailComponent\n  },\n  {\n    path: 'knowledge-base/edit/:id',\n    component: KnowledgeBaseEditComponent\n  },\n  {\n    path: 'projects/detail/:id',\n    component: ProjectDetailComponent\n  },\n  {\n    path: 'projects/create',\n    component: ProjectCreateComponent\n  },\n  {\n    path: '**',\n    component: NotFoundComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n</code></pre>\n\n<p><strong>authguard.service</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { TranslatePipe } from 'src/app/pipes/translate/translate.pipe';\n\n/**\n* This injector provides the auth-guard service throughout the application.\n*/\n@Injectable({\n  providedIn: 'root'\n})\n\n/**\n* The auth guard service is used to prevent unauthenticated users from\n* accessing restricted routes, it's used in app.routing.ts to protect the home\n* page route\n*/\nexport class AuthGuardService {\n  /**\n  * The constructor initializes the ToastrService &amp; TranslatePipe in the component.\n  */\n  constructor(private toastr: ToastrService,\n    private translate: TranslatePipe,\n    private router: Router) { }\n  /**\n   * This method checks if the user is authorized to access a certain route.\n   *\n   * @param  route\n   * @param  state\n   * @return\n   */\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    if (localStorage.getItem('jwtToken')) {\n      return true;\n    } else {\n      if (this.router.url !== '/') {\n        let error = this.translate.transform(\"generic[responses][error][401]\");\n        this.toastr.warning(error);\n        this.router.navigate(['']);\n      } else {\n        return true;\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1564553561, "post_id": 57284268, "comment_id": 101063710, "body": "As the error states, <code>t.clearImmediate</code> is undefined. Check why that is by placing a breakpoint there."}, {"owner": {"reputation": 693, "user_id": 10459875, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hY7fFTXNCno/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVnu9JQrA7AvGoVR2pLcwXaPn58dw/mo/photo.jpg?sz=128", "display_name": "mleaf", "link": "https://stackoverflow.com/users/10459875/mleaf"}, "edited": false, "score": 0, "creation_date": 1564553582, "post_id": 57284268, "comment_id": 101063718, "body": "check this <a href=\"https://stackoverflow.com/questions/46707216/react-cannot-read-property-bind-of-undefined/46707299\" title=\"react cannot read property bind of undefined\">stackoverflow.com/questions/46707216/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6881032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ba2bf7c15e5fd992c5de5582d30eb4?s=128&d=identicon&r=PG&f=1", "display_name": "DINESH S", "link": "https://stackoverflow.com/users/6881032/dinesh-s"}, "edited": false, "score": 0, "creation_date": 1564555101, "post_id": 57284351, "comment_id": 101064369, "body": "Thanks for response Ismail, Here I am not able to identify when that backend.js get called. even though if I put debug point, it bypasses."}], "tags": [], "owner": {"reputation": 724, "user_id": 7962589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOsYs.png?s=128&g=1", "display_name": "Ismail", "link": "https://stackoverflow.com/users/7962589/ismail"}, "is_accepted": true, "score": 1, "last_activity_date": 1564553660, "creation_date": 1564553660, "answer_id": 57284351, "question_id": 57284268, "link": "https://stackoverflow.com/questions/57284268/uncaught-typeerror-cannot-read-property-bind-of-undefined-in-backend-js/57284351#57284351", "title": "Uncaught TypeError: Cannot read property &#39;bind&#39; of undefined in backend.js", "body": "<p>Make sure \n<code>t.clearImmediate</code>is defined before calling <code>.bind()</code>method on it.</p>\n"}, {"tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": false, "score": 0, "last_activity_date": 1564555052, "creation_date": 1564555052, "answer_id": 57284647, "question_id": 57284268, "link": "https://stackoverflow.com/questions/57284268/uncaught-typeerror-cannot-read-property-bind-of-undefined-in-backend-js/57284647#57284647", "title": "Uncaught TypeError: Cannot read property &#39;bind&#39; of undefined in backend.js", "body": "<p>Either your own code, or one of your project's dependencies, must be using <code>clearImmediate</code>, which is a MSIE-only thing.</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/clearImmediate\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Window/clearImmediate</a></p>\n"}], "owner": {"reputation": 15, "user_id": 6881032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ba2bf7c15e5fd992c5de5582d30eb4?s=128&d=identicon&r=PG&f=1", "display_name": "DINESH S", "link": "https://stackoverflow.com/users/6881032/dinesh-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 57284351, "answer_count": 2, "score": 0, "last_activity_date": 1564555052, "creation_date": 1564553288, "last_edit_date": 1564553901, "question_id": 57284268, "link": "https://stackoverflow.com/questions/57284268/uncaught-typeerror-cannot-read-property-bind-of-undefined-in-backend-js", "title": "Uncaught TypeError: Cannot read property &#39;bind&#39; of undefined in backend.js", "body": "<p>I got this Error in my Angular 8 project while loading <a href=\"http://localhost:4200\" rel=\"nofollow noreferrer\">http://localhost:4200</a></p>\n\n<pre><code>Uncaught TypeError: Cannot read property 'bind' of undefined\n        at new t (backend.js:31)\n        at Object.&lt;anonymous&gt; (backend.js:31)\n        at Object.&lt;anonymous&gt; (backend.js:31)\n        at r (backend.js:1)\n        at Object.&lt;anonymous&gt; (backend.js:31)\n        at r (backend.js:1)\n        at Object.&lt;anonymous&gt; (backend.js:31)\n        at r (backend.js:1)\n        at Object.&lt;anonymous&gt; (backend.js:31)\n        at r (backend.js:1)\n\nthis.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()\n</code></pre>\n"}, {"tags": ["html", "typescript", "ionic3"], "comments": [{"owner": {"reputation": 1451, "user_id": 4453205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMvhx.jpg?s=128&g=1", "display_name": "10101010", "link": "https://stackoverflow.com/users/4453205/10101010"}, "edited": false, "score": 0, "creation_date": 1564554226, "post_id": 57283939, "comment_id": 101063989, "body": "You mean to ask without any library?"}, {"owner": {"reputation": 1311, "user_id": 2881402, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ajklt.jpg?s=128&g=1", "display_name": "Shreyas Achar", "link": "https://stackoverflow.com/users/2881402/shreyas-achar"}, "reply_to_user": {"reputation": 1451, "user_id": 4453205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMvhx.jpg?s=128&g=1", "display_name": "10101010", "link": "https://stackoverflow.com/users/4453205/10101010"}, "edited": false, "score": 0, "creation_date": 1564554417, "post_id": 57283939, "comment_id": 101064083, "body": "Yes right without librabry"}], "answers": [{"tags": [], "owner": {"reputation": 8603, "user_id": 3289660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGFex.jpg?s=128&g=1", "display_name": "Nidhin Joseph", "link": "https://stackoverflow.com/users/3289660/nidhin-joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1564551903, "creation_date": 1564551903, "answer_id": 57283985, "question_id": 57283939, "link": "https://stackoverflow.com/questions/57283939/convert-a-div-to-a-image-in-ionic-3/57283985#57283985", "title": "Convert a div to a image in ionic 3", "body": "<p>Try this library to convert HTML to a canvas.</p>\n\n<ul>\n<li><a href=\"http://html2canvas.hertzen.com/\" rel=\"nofollow noreferrer\">http://html2canvas.hertzen.com/</a></li>\n</ul>\n"}], "owner": {"reputation": 1311, "user_id": 2881402, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ajklt.jpg?s=128&g=1", "display_name": "Shreyas Achar", "link": "https://stackoverflow.com/users/2881402/shreyas-achar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564551903, "creation_date": 1564551692, "question_id": 57283939, "link": "https://stackoverflow.com/questions/57283939/convert-a-div-to-a-image-in-ionic-3", "title": "Convert a div to a image in ionic 3", "body": "<p>I am working in ionic 3 environment</p>\n\n<p>where i have a div as</p>\n\n<pre><code>&lt;div id = \"sample\"&gt;\n&lt;p&gt; This is a sample div &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now i just want to covert this div into a image and should be able to display as</p>\n\n<pre><code>&lt;img id = \"converted_div_into_image\"&gt;\n</code></pre>\n\n<p>I got an option of <strong>html to png npm package</strong>, but without it can we able to convert into image without any other sources?</p>\n"}, {"tags": ["typescript", "ionic-framework"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11807018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e37e77a90e1944220e206a12492913?s=128&d=identicon&r=PG&f=1", "display_name": "mandeep", "link": "https://stackoverflow.com/users/11807018/mandeep"}, "edited": false, "score": 0, "creation_date": 1564557103, "post_id": 57284003, "comment_id": 101065309, "body": "I tried the for..of loop, but it shows this error   <code>Type &#39;BaseArrayClass&lt;any&gt;&#39; is not an array type or a string type</code>."}], "tags": [], "owner": {"reputation": 1505, "user_id": 2329264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f89d84ccef2f2ecb947547783a722ec?s=128&d=identicon&r=PG", "display_name": "MofX", "link": "https://stackoverflow.com/users/2329264/mofx"}, "is_accepted": false, "score": 0, "last_activity_date": 1564551976, "creation_date": 1564551976, "answer_id": 57284003, "question_id": 57283822, "link": "https://stackoverflow.com/questions/57283822/what-should-i-pass-as-argument-to-addmarkersync/57284003#57284003", "title": "What should I pass as argument to addMarkerSync()?", "body": "<p>If this.Points is probably an array. Then you can access the elements by index:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.Points[i]\n</code></pre>\n\n<p>But a more idomatic way would be a for..of loop:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>for (var data of this.Points) {\n    let marker: Marker = this.map.addMarkerSync(data);\n    let t: string = marker.get('title');\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11807018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e37e77a90e1944220e206a12492913?s=128&d=identicon&r=PG&f=1", "display_name": "mandeep", "link": "https://stackoverflow.com/users/11807018/mandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1564551976, "creation_date": 1564551027, "question_id": 57283822, "link": "https://stackoverflow.com/questions/57283822/what-should-i-pass-as-argument-to-addmarkersync", "title": "What should I pass as argument to addMarkerSync()?", "body": "<p>I'm trying to modify the markers I've added to a google map. I've defined a BaseArrayClass Points. When I call a function, I want to traverse through Points and set each marker, without using Points.foreach().  </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.Points.forEach((data: any) =&gt; {\n    let marker: Marker = this.map.addMarkerSync(data);\n    let t: string = marker.get('title');\n}\n</code></pre>\n\n<p>I want to use a regular for loop, but don't know what I should pass as argument to addMarkerSync().</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>for(i=0;i&lt;this.Points.getLength();i++) {\n    let m: Marker = this.map.addMarkerSync(argument);\n    let t: string = m.get('title');\n  }\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 142, "user_id": 5667779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1UrZQMxUlRE/AAAAAAAAAAI/AAAAAAAAABw/dVGHrRqwiAw/photo.jpg?sz=128", "display_name": "Mostafa Bagheri", "link": "https://stackoverflow.com/users/5667779/mostafa-bagheri"}, "edited": false, "score": 0, "creation_date": 1564563978, "post_id": 57283375, "comment_id": 101068931, "body": "Usually I for these cases send selected row id in Url and in destination which here is generatecontract get record again by id from server and show"}, {"owner": {"reputation": 103, "user_id": 4908612, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f6fd5740dc68713bb0884f3aa09dc8d?s=128&d=identicon&r=PG&f=1", "display_name": "Malik Rizwan", "link": "https://stackoverflow.com/users/4908612/malik-rizwan"}, "reply_to_user": {"reputation": 142, "user_id": 5667779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1UrZQMxUlRE/AAAAAAAAAAI/AAAAAAAAABw/dVGHrRqwiAw/photo.jpg?sz=128", "display_name": "Mostafa Bagheri", "link": "https://stackoverflow.com/users/5667779/mostafa-bagheri"}, "edited": false, "score": 0, "creation_date": 1564646086, "post_id": 57283375, "comment_id": 101101409, "body": "Sorry for late response Thanks alot for your precious comment i already use this one method and solved my problem"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4908612, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f6fd5740dc68713bb0884f3aa09dc8d?s=128&d=identicon&r=PG&f=1", "display_name": "Malik Rizwan", "link": "https://stackoverflow.com/users/4908612/malik-rizwan"}, "edited": false, "score": 0, "creation_date": 1564552440, "post_id": 57283418, "comment_id": 101063266, "body": "i want to know if you dont mind that how could i pass my ricerca.component.ts data like this.contractdblist.cnt_num in my other component using this servode??"}, {"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "reply_to_user": {"reputation": 103, "user_id": 4908612, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f6fd5740dc68713bb0884f3aa09dc8d?s=128&d=identicon&r=PG&f=1", "display_name": "Malik Rizwan", "link": "https://stackoverflow.com/users/4908612/malik-rizwan"}, "edited": false, "score": 0, "creation_date": 1564553211, "post_id": 57283418, "comment_id": 101063563, "body": "just search for how to inject service in component"}], "tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 1, "last_activity_date": 1564548796, "creation_date": 1564548796, "answer_id": 57283418, "question_id": 57283375, "link": "https://stackoverflow.com/questions/57283375/how-to-pass-data-from-one-component-to-other/57283418#57283418", "title": "How to pass data from One component to other", "body": "<p>You can use Subject to do that</p>\n\n<pre><code>import { Injectable } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\n\n@Injectable()\nexport class MessageService {\n    private subject = new Subject&lt;any&gt;();\n\n    constructor() {}\n\n    sendMessage(message: any) {\n        this.subject.next(message);\n    }\n\n    getData() {\n        return this.subject.asObservable();\n    }\n}\n</code></pre>\n\n<p>So you can call <code>MessageService</code> class method <code>sendMessage()</code> to send data</p>\n\n<p>I defined 2 method here. The first method using next() to send message to the next subcriber. So in your component you just need to simply subscribe like this to get the data</p>\n\n<pre><code>private subscription$: Subscription;\n\npublic ngOnInit(): void {\n  this.subscription$ = this.messageervice\n            .getData()\n            .subscribe(data =&gt; { console.log(data); })\n}\n\npublic ngOnDestroy(): void {\n    this.subscription$.unsubscribe();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 7007700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5297cdd625276889afecfb876d8b6?s=128&d=identicon&r=PG&f=1", "display_name": "Tuhin Das", "link": "https://stackoverflow.com/users/7007700/tuhin-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1564549163, "creation_date": 1564549163, "answer_id": 57283478, "question_id": 57283375, "link": "https://stackoverflow.com/questions/57283375/how-to-pass-data-from-one-component-to-other/57283478#57283478", "title": "How to pass data from One component to other", "body": "<p>There are many ways to do so some of them are</p>\n\n<ol>\n<li>using input decorator when passing data from parent to child component.</li>\n<li>using output decorator with event emitter when passing data from child to parent component.</li>\n<li>using subjects for components not related to each other.</li>\n<li>using a service to set and get data to be passed.</li>\n</ol>\n\n<p>you can refer their official website for all the above ways.</p>\n"}], "owner": {"reputation": 103, "user_id": 4908612, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f6fd5740dc68713bb0884f3aa09dc8d?s=128&d=identicon&r=PG&f=1", "display_name": "Malik Rizwan", "link": "https://stackoverflow.com/users/4908612/malik-rizwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570775124, "creation_date": 1564548563, "last_edit_date": 1570775124, "question_id": 57283375, "link": "https://stackoverflow.com/questions/57283375/how-to-pass-data-from-one-component-to-other", "title": "How to pass data from One component to other", "body": "<p>I am new in angular working on a project.My problem is that i want to transfer data from one component to other. Actually i want to show data in text field from database and then have to update it. I have one component name ricerca.component.ts in which data in table is showing. now when i click on specific line(row) then data for that specific record i have to show in my other component name as generatecontract.comonent.ts. I don't know how to perform this. </p>\n\n<p>I made a model name ContractDblist assign all these value to that model but unfortunatelly not solved the problem in other component</p>\n\n<p>this is my ricercacomponnet code</p>\n\n<pre><code>    if(tag === 'Item1'){      \n this.router.navigate(['/workflow/rigester' ]);\n}\n}\n  public lstContractRecordDbValue :any[];\n  getContractRecordbyParameter(selecteditem: any, index: number) {    this.workFlowService.getContractRecordbyParameter(selecteditem).subscribe(data =&gt; {      \n      this.lstContractRecordDbValue = data;     \n      this.contractdblist.cnt_num=this.lstContractRecordDbValue[0].CNT_NUM;\n      this.contractdblist.contract=this.lstContractRecordDbValue[0].CONTRACT;      this.contractdblist.contacttype=this.lstContractRecordDbValue[0].CONTRACT_TYPE;      this.contractdblist.contractno=this.lstContractRecordDbValue[0].CONTRACT_NO;     \n      this.loading = false;\n    }, error =&gt; {\n      console.error('getAllTickets', error);\n      this.loading = false;\n    })\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ionic-framework"], "answers": [{"tags": [], "owner": {"reputation": 3975, "user_id": 6183113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248564385154034/picture?type=large", "display_name": "Chanaka Weerasinghe", "link": "https://stackoverflow.com/users/6183113/chanaka-weerasinghe"}, "is_accepted": false, "score": 0, "last_activity_date": 1564546725, "creation_date": 1564546725, "answer_id": 57283113, "question_id": 57282894, "link": "https://stackoverflow.com/questions/57282894/multiple-toast-for-ionic-4/57283113#57283113", "title": "multiple toast for ionic 4", "body": "<p>you can try this way</p>\n\n<pre><code>showMultipleToast(msg) {\n    this.mytoastController.create({\n      message: 'Your messege'+msg,\n      duration: 2000,\n      animated: true,\n      showCloseButton: true,\n      closeButtonText: \"Done\",\n      cssClass: \"my-toast\",\n      position: \"middle\"\n    }).then((mobj) =&gt; {\n      mobj.present();\n    });\n  }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11861647, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUVU5GYCmTw/AAAAAAAAAAI/AAAAAAAAAFQ/QWD5xt-FEZ4/photo.jpg?sz=128", "display_name": "marshall theofilus", "link": "https://stackoverflow.com/users/11861647/marshall-theofilus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564546725, "creation_date": 1564544868, "question_id": 57282894, "link": "https://stackoverflow.com/questions/57282894/multiple-toast-for-ionic-4", "title": "multiple toast for ionic 4", "body": "<p>I want to have multiple toast in ionic framework v4, but idk how to code it</p>\n\n<p>i try to implement multiple toast ionic v3 but its not what i want</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, OnInit } from '@angular/core';\nimport { ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'gd-toast',\n  templateUrl: './gd-toast.component.html',\n  styleUrls: ['./gd-toast.component.scss'],\n})\n\nexport class GdToastComponent implements OnInit {\n\n  constructor(public toastController: ToastController){}\n  ngOnInit() {\n  }\n\n  public toastMsgs: any = [];\n\n  async presentToast(msg) {\n      this.toastMsgs.push(msg);\n      const toast = await this.toastController.create({\n          message: this.toastMsgs.toString().split(\",\").join(\"\\n\"),\n          position: 'bottom',\n          showCloseButton: true,\n          closeButtonText: 'Ok',\n          // duration: 3000,       \n      });\n      toast.present();\n      toast.onDidDismiss().then(() =&gt; {\n          this.toastMsgs = [];\n      });\n  }\n\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "angular8"], "answers": [{"tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 2, "last_activity_date": 1564544676, "creation_date": 1564544676, "answer_id": 57282868, "question_id": 57282816, "link": "https://stackoverflow.com/questions/57282816/angular-rxjs-return-array-of-3-observable-streams/57282868#57282868", "title": "Angular RXJS return array of 3 observable streams", "body": "<p>You can use forkJoin in this case</p>\n\n<pre><code>forkJoin(\n  [\n   this.flamelinkService.getData('homePage'),\n   this.flamelinkService.getNav('mainNavigation'),\n   this.catalogApiService.get('loan_originators', qry)\n  ]\n).subscribe(([res1, res2, res3]) =&gt; {\n       // do something\n});\n</code></pre>\n"}], "owner": {"reputation": 2007, "user_id": 3066142, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/7Ci81.jpg?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3066142/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567393795, "creation_date": 1564544254, "last_edit_date": 1567393795, "question_id": 57282816, "link": "https://stackoverflow.com/questions/57282816/angular-rxjs-return-array-of-3-observable-streams", "title": "Angular RXJS return array of 3 observable streams", "body": "<p>I need to use the following 3 steams to create an array of each. IE: <code>[homePage, mainNavigation, loan_originators]</code></p>\n\n<p>But this only returns <code>mainNavigation</code></p>\n\n<pre><code>  const homePage = this.flamelinkService.getData('homePage');\n  const mainNavigation = this.flamelinkService.getNav('mainNavigation');\n  const loan_originators = this.catalogApiService.get('loan_originators', qry);\n\n  return mainNavigation.pipe(\n    concat( homePage, loan_originators),\n    first(),\n    tap( async navResolveData =&gt; {\n      // navResolveData = navResolveData[0];\n      _log('== Navigation Data Resolver ==&gt; ', 't', navResolveData);\n      if (isPlatformServer(this.platformId)) {\n        this.transferState.set(INFO_KEY, navResolveData);\n      }\n    }),\n  );\n</code></pre>\n\n<p>here im trying forkJoin. but nothing</p>\n\n<pre><code>  const homePage = this.flamelinkService.getData('homePage');\n  const mainNavigation = this.flamelinkService.getNav('mainNavigation');\n  const loan_originators = this.catalogApiService.get('loan_originators', qry);\n  return forkJoin([homePage, loan_originators, mainNavigation]).pipe(\n    first(),\n    tap( async navResolveData =&gt; {\n      // navResolveData = navResolveData[0];\n      _log('== Navigation Data Resolver ==&gt; ', 't', navResolveData);\n      if (isPlatformServer(this.platformId)) {\n        this.transferState.set(INFO_KEY, navResolveData);\n      }\n    }),\n  );\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "express", "jestjs", "facebook-messenger-bot"], "comments": [{"owner": {"reputation": 917, "user_id": 9130688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj5U2.jpg?s=128&g=1", "display_name": "Coding Edgar", "link": "https://stackoverflow.com/users/9130688/coding-edgar"}, "edited": false, "score": 0, "creation_date": 1564542302, "post_id": 57282175, "comment_id": 101060884, "body": "Could you add the test as well? Also, you mean break because continuing to execute? because if thats the behavior, then you should expect for that console print as well."}, {"owner": {"reputation": 7726, "user_id": 395461, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de67dae243e2d6f4654aa3ea48ee8626?s=128&d=identicon&r=PG", "display_name": "Shannon Matthews", "link": "https://stackoverflow.com/users/395461/shannon-matthews"}, "edited": false, "score": 0, "creation_date": 1564550239, "post_id": 57282175, "comment_id": 101062535, "body": "A HTTP request can have multiple &#39;responses&#39;, but the responses all have statuscodes in the 1xx range, such as 102 Processing. <a href=\"https://stackoverflow.com/a/53231701/395461\">stackoverflow.com/a/53231701/395461</a>"}, {"owner": {"reputation": 7726, "user_id": 395461, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de67dae243e2d6f4654aa3ea48ee8626?s=128&d=identicon&r=PG", "display_name": "Shannon Matthews", "link": "https://stackoverflow.com/users/395461/shannon-matthews"}, "edited": false, "score": 0, "creation_date": 1564550339, "post_id": 57282175, "comment_id": 101062562, "body": "What is your middleware doing that it could take longer than 20 seconds to process? Can you reduce that somehow?"}, {"owner": {"reputation": 199, "user_id": 8594124, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5184e32df24d8ad332c354080b72dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "God Himself", "link": "https://stackoverflow.com/users/8594124/god-himself"}, "reply_to_user": {"reputation": 7726, "user_id": 395461, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de67dae243e2d6f4654aa3ea48ee8626?s=128&d=identicon&r=PG", "display_name": "Shannon Matthews", "link": "https://stackoverflow.com/users/395461/shannon-matthews"}, "edited": false, "score": 0, "creation_date": 1564587709, "post_id": 57282175, "comment_id": 101083269, "body": "@Shannon things like sending videos take a long time to await"}, {"owner": {"reputation": 7726, "user_id": 395461, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de67dae243e2d6f4654aa3ea48ee8626?s=128&d=identicon&r=PG", "display_name": "Shannon Matthews", "link": "https://stackoverflow.com/users/395461/shannon-matthews"}, "edited": false, "score": 0, "creation_date": 1564624311, "post_id": 57282175, "comment_id": 101095242, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/53231492/are-multiple-responses-legal-in-http\">Are multiple responses legal in HTTP?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7726, "user_id": 395461, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de67dae243e2d6f4654aa3ea48ee8626?s=128&d=identicon&r=PG", "display_name": "Shannon Matthews", "link": "https://stackoverflow.com/users/395461/shannon-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1564623994, "creation_date": 1564623994, "answer_id": 57300849, "question_id": 57282175, "link": "https://stackoverflow.com/questions/57282175/how-to-send-more-responses-after-first-response-express-app/57300849#57300849", "title": "How to send more responses after first response express app", "body": "<p>From what I understand, it's not possible to send multiple responses per request, unless sending a <code>100 Continue</code> response. See the <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616.html\" rel=\"nofollow noreferrer\">W3 HTTP protocol documentation</a> for more info.</p>\n"}], "owner": {"reputation": 199, "user_id": 8594124, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5184e32df24d8ad332c354080b72dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "God Himself", "link": "https://stackoverflow.com/users/8594124/god-himself"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564623994, "creation_date": 1564538440, "last_edit_date": 1564553979, "question_id": 57282175, "link": "https://stackoverflow.com/questions/57282175/how-to-send-more-responses-after-first-response-express-app", "title": "How to send more responses after first response express app", "body": "<p>Facebook messenger api requires a 200 response be sent as soon as the webhook request is received on my server, within 20 seconds. This is potentially longer than the rest of the middleware needs to finish executing, so I send the 200 response first, then start executing middleware to handle sending a reply on messenger etc.</p>\n\n<p>However, this breaks Jest, as the middleware continues to output to the console after the response is retrieved from the jest mock function. There is no way I can think of to send multiple responses with res.send(), as that calls res.close() internally.</p>\n\n<p>Is this the correct approach? Should I not be sending the 200 response instantly? Is there a way to send multiple?</p>\n\n<p>I have tried using res.write(), but that does not send the response instantly.</p>\n\n<pre><code>private webhookEndpoint = async (req: express.Request, res: express.Response): Promise&lt;any&gt; =&gt; {\n        let body: MessageBodyRequest = req.body\n        if (\n            !isValidSHA1(\n                process.env.APP_SECRET as string,\n                JSON.stringify(req.body),\n                req.get('X-Hub-Signature') as string\n            )\n        ) {\n            console.error(\"Invalid webhook signature\")\n            return res.sendStatus(403);\n        }\n\n        // Checks this is an event from a page subscription\n        if (body.object === 'page') {\n            // Returns a '200 OK' response to all requests\n            res.status(200).send('EVENT_RECEIVED')\n            // Iterates over each entry - there may be multiple if batched\n            try {\n                //await triggers the try catch\n                return await Promise.all(body.entry.map(async (entry) =&gt; {\n                    let message = entry.messaging[0] //will only ever have 1 message\n                    console.log(\"message received: \", message)\n                    let messageReceived = new MessageReceived(message)\n                    return messageReceived.handle() \n                }))\n            } catch (error) {\n                console.error(\"Error handling incoming message: \", error)\n            }\n\n        } else {\n            // Returns a '404 Not Found' if event is not from a page subscription\n            return res.sendStatus(404)\n        }\n    }\n</code></pre>\n"}, {"tags": ["typescript", "vuejs2", "typescript-generics"], "comments": [{"owner": {"reputation": 852, "user_id": 1462485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ahgJA.jpg?s=128&g=1", "display_name": "LPains", "link": "https://stackoverflow.com/users/1462485/lpains"}, "edited": false, "score": 1, "creation_date": 1579358753, "post_id": 57281820, "comment_id": 105743848, "body": "I&#39;ve done this differently in the past. Instead of using Toggle&lt;T&gt; I would just call it Toggle. Your prop would require an interface instead of T. That should give you a similar solution without generics. I don&#39;t think Vue does very well with generics for components..."}], "answers": [{"tags": [], "owner": {"reputation": 583, "user_id": 2809176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c7b7bad63e38333d41b18f0960b2573?s=128&d=identicon&r=PG&f=1", "display_name": "user2809176", "link": "https://stackoverflow.com/users/2809176/user2809176"}, "is_accepted": false, "score": 0, "last_activity_date": 1607439005, "creation_date": 1607439005, "answer_id": 65201175, "question_id": 57281820, "link": "https://stackoverflow.com/questions/57281820/generics-in-typescript-vue-component/65201175#65201175", "title": "Generics in TypeScript Vue Component", "body": "<p>maybe you can use</p>\n<pre><code>extend&lt;Data, Methods, Computed, Props&gt;(options?: ThisTypedComponentOptionsWithRecordProps&lt;V, Data, Methods, Computed, Props&gt;): ExtendedVue&lt;V, Data, Methods, Computed, Props&gt;;\n\n\n\ninterface Data {\n  dataProp: boolean\n}\n\ninterface Methods {\n  methodOne: (name: Type) =&gt; Promise&lt;void&gt;\n}\n\ninterface Props {\n  items: Item[]\n}\n\nexport default Vue.extend&lt;Data, Methods, {}, Props&gt;({ ...\n</code></pre>\n"}], "owner": {"reputation": 1685, "user_id": 996804, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/LsmKp.jpg?s=128&g=1", "display_name": "Bishal Paudel", "link": "https://stackoverflow.com/users/996804/bishal-paudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1546, "favorite_count": 3, "answer_count": 1, "score": 10, "last_activity_date": 1607439005, "creation_date": 1564534959, "question_id": 57281820, "link": "https://stackoverflow.com/questions/57281820/generics-in-typescript-vue-component", "title": "Generics in TypeScript Vue Component", "body": "<p>I am trying to supply generic type into vue component, but don't know how to supply that from the caller.</p>\n\n<p>For example, for the component below </p>\n\n<pre><code>export default class Toggle&lt;T&gt; extends Vue {\n    @Prop({ default: {} })    private payload!: T;\n    @Prop(Function)           private handleCallback!: (payload: T) =&gt; Promise&lt;any&gt;;\n}\n</code></pre>\n\n<p>how would I supply type for <code>T</code>when it is called as below? </p>\n\n<p><code>&lt;toggle :payload=\"{propOfT: 'value of T'}\" :handleCallback='someCallbackFn'/&gt;</code></p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 5149876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4FcD1Tt4gQ8/AAAAAAAAAAI/AAAAAAAAABU/S7NS1wSEX5I/photo.jpg?sz=128", "display_name": "iuricernov", "link": "https://stackoverflow.com/users/5149876/iuricernov"}, "is_accepted": false, "score": 0, "last_activity_date": 1564535519, "creation_date": 1564535519, "answer_id": 57281875, "question_id": 57281659, "link": "https://stackoverflow.com/questions/57281659/cannot-deploy-google-cloud-functions-with-multiple-files/57281875#57281875", "title": "Cannot deploy Google Cloud Functions with multiple files", "body": "<p>I could fix that by adding this snippet into <code>tsconfig.json</code>:</p>\n\n<pre><code>\"exclude\": [\n    \"node_modules\"\n]\n</code></pre>\n\n<p>But I didn't get why this works.</p>\n"}], "owner": {"reputation": 46, "user_id": 5149876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4FcD1Tt4gQ8/AAAAAAAAAAI/AAAAAAAAABU/S7NS1wSEX5I/photo.jpg?sz=128", "display_name": "iuricernov", "link": "https://stackoverflow.com/users/5149876/iuricernov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564535519, "creation_date": 1564533204, "question_id": 57281659, "link": "https://stackoverflow.com/questions/57281659/cannot-deploy-google-cloud-functions-with-multiple-files", "title": "Cannot deploy Google Cloud Functions with multiple files", "body": "<p>I'm trying to deploy some functions script to Firebase Functions. But the following error happens when I try to deploy:</p>\n\n<pre><code>Function failed on loading user code. Error message: Code in file lib/index.js can't be loaded.\nDid you list all required modules in the package.json dependencies?\nDetailed stack trace: Error: Cannot find module './helloWorld'\n</code></pre>\n\n<p>I created the project by the <code>firebase init function</code> and created two files: <code>index.ts</code> and <code>helloWorld.ts</code>. I can deploy if I put all code in the same file <code>index.ts</code>. But the error happens when I divide the code into both.\nI checked that the Typescript is transpiling normally, generating the corresponding files into <code>lib/</code> folder.\nI looked around the internet, but didn't found a problem like this.</p>\n\n<p>File: index.ts</p>\n\n<pre><code>export * from './helloWorld';\n</code></pre>\n\n<p>File: helloWorld.ts</p>\n\n<pre><code>import * as functions from \"firebase-functions\";\n\nexport const helloWorld = functions.https.onRequest((request, response) =&gt; {\n    response.send(\"Hello World!\");\n});\n</code></pre>\n\n<p><strong>Transpiled files:</strong></p>\n\n<p>File: index.js</p>\n\n<pre><code>\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./helloWorld\"));\n//# sourceMappingURL=index.js.map\n</code></pre>\n\n<p>File: helloWorld.js</p>\n\n<pre><code>\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst functions = require(\"firebase-functions\");\nexports.helloWorld = functions.https.onRequest((request, response) =&gt; {\n    response.send(\"Hello World!\");\n});\n//# sourceMappingURL=helloWorld.js.map\n</code></pre>\n\n<p>I believe that Firebase functions is not deploying the <code>helloWorld.ts</code>. Or it is, but not transpiling it to <code>helloWorld.js</code>, so that <code>index.js</code> cannot find the module <code>./helloWorld</code>.</p>\n"}, {"tags": ["typescript", "redux"], "comments": [{"owner": {"reputation": 4173, "user_id": 7428434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1348497625208827/picture?type=large", "display_name": "Shanon Jackson", "link": "https://stackoverflow.com/users/7428434/shanon-jackson"}, "edited": false, "score": 1, "creation_date": 1564534369, "post_id": 57281183, "comment_id": 101059557, "body": "discriminated union documentation is what you&#39;re looking for because it gives you type-guards for free"}], "answers": [{"tags": [], "owner": {"reputation": 7159, "user_id": 877279, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5fa0544f9a87c652a5b5c1d4b401fcae?s=128&d=identicon&r=PG", "display_name": "Tyler Sebastian", "link": "https://stackoverflow.com/users/877279/tyler-sebastian"}, "is_accepted": false, "score": 2, "last_activity_date": 1564585774, "last_edit_date": 1564585774, "creation_date": 1564529416, "answer_id": 57281302, "question_id": 57281183, "link": "https://stackoverflow.com/questions/57281183/ts2339-typescript-error-for-redux-type-bindings/57281302#57281302", "title": "TS2339: TypeScript error for redux type bindings", "body": "<pre><code>export type SampleActionTypes = ReceiveData | IncrementCount;\n</code></pre>\n\n<p>The <code>data</code> property doesn't exist on the <code>IncrementCount</code> type.</p>\n\n<p>You can</p>\n\n<p>a) type assert</p>\n\n<pre><code>(action as ReceiveData).data\n</code></pre>\n\n<p>b) \"branded\" types (I don't know if this is 100% the correct term) <strong>edit</strong>: the correct term is \"discriminated union\"</p>\n\n<pre><code>interface IncrementCount {\n  type: 'INCREMENT_COUNT';\n}\n\ninterface ReceiveData {\n  type: 'RECEIVE_DATA';\n  data: Data;\n}\n</code></pre>\n\n<p>TS should be able to figure the rest out via duck-typing</p>\n\n<p>c) type guards</p>\n\n<pre><code>function isReceiveDataAction(x: any): x is ReceiveData {\n  return x.type === 'RECEIVE_DATA'\n}\n\nfunction isIncrementAction(x: any): x is IncrementData {\n  ...\n}\n\nif (isIncrementAction(action)) {\n  // action is IncrementData\n} else if (isReceiveDataAction(action)) {\n  // action is ReceieveData\n}\n</code></pre>\n"}], "owner": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564585774, "creation_date": 1564528281, "question_id": 57281183, "link": "https://stackoverflow.com/questions/57281183/ts2339-typescript-error-for-redux-type-bindings", "title": "TS2339: TypeScript error for redux type bindings", "body": "<p>I am new to TypeScript and getting error <code>TS2339</code> when trying to create my typed redux reducer. The error says:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UyRM0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UyRM0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there something wrong that I am doing with the typescript pipe operator? Thanks!</p>\n\n<p><strong>sampleActionTypes.ts:</strong></p>\n\n<pre><code>export interface Data {\n  allIds?: number[];\n  byId?: object;\n}\n\ninterface IncrementCount {\n  type: string;\n}\n\ninterface ReceiveData {\n  type: string;\n  data: Data;\n}\n\nexport type SampleActionTypes = ReceiveData | IncrementCount;\n</code></pre>\n\n<p><strong>sampleReducer.ts:</strong></p>\n\n<pre><code>\nexport interface SampleState {\n  count: number;\n  data: Data;\n}\n\nconst initialState = {\n  count: 0,\n  data: {},\n};\n\nconst sample = (state = initialState, action: SampleActionTypes): SampleState =&gt; {\n  switch (action.type) {\n    case 'INCREMENT_COUNT': {\n      const newCount = state.count + 1;\n      return {\n        ...state,\n        count: newCount,\n      };\n    }\n    case 'RECEIVE_DATA':\n      return {\n        ...state,\n        data: action.data, // error is here\n      };\n    default:\n      return state;\n  }\n};\n\nexport default sample;\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 0, "creation_date": 1564533117, "post_id": 57281583, "comment_id": 101059339, "body": "Nice!  Is it possible to adjust this type so that it correctly infers the return type? Right now it seems to always evaluate to <code>unknown</code> unless you specify it explicitly."}, {"owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 1, "creation_date": 1564533326, "post_id": 57281583, "comment_id": 101059379, "body": "More specifically, I&#39;d expect the type returned by <code>match</code> to be a union of all the types returned by the case functions stored under appropriate tags."}, {"owner": {"reputation": 2534, "user_id": 10609635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e433b22da80480e4d7d811ceec10430?s=128&d=identicon&r=PG&f=1", "display_name": "SpencerPark", "link": "https://stackoverflow.com/users/10609635/spencerpark"}, "reply_to_user": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 0, "creation_date": 1564533800, "post_id": 57281583, "comment_id": 101059464, "body": "The inference in that case is based on the usage. Since the result is fed into <code>console.log</code> it simply needs to be <code>any</code> so <code>R</code> is inferred as <code>any</code>. Assigning to <code>let t: string = match(point, {...})</code> would cause inference to unify <code>R</code> as <code>string</code>."}, {"owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 1, "creation_date": 1564534277, "post_id": 57281583, "comment_id": 101059539, "body": "Right, but that requires specifying the returned type explicitly.  There are other cases like <code>const result = match(x, {foo: _ =&gt; 1, bar: _ =&gt; &#39;2&#39;, baz: _ =&gt; [3]})</code> where the correct returned type is <code>1 | &#39;2&#39; | number[]</code>. It&#39;d be convenient to be able to infer that instead of writing it explicitly."}, {"owner": {"reputation": 2534, "user_id": 10609635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e433b22da80480e4d7d811ceec10430?s=128&d=identicon&r=PG&f=1", "display_name": "SpencerPark", "link": "https://stackoverflow.com/users/10609635/spencerpark"}, "reply_to_user": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 1, "creation_date": 1564622585, "post_id": 57281583, "comment_id": 101094942, "body": "That was keeping me up all night but I think it should be working as desired now. Thank you for the very interesting question."}, {"owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 0, "creation_date": 1564673261, "post_id": 57281583, "comment_id": 101116905, "body": "Thank <i>you</i> for finding a solution, this is awesome and very useful :D  I&#39;ll add the fourth property to the original question.  Would you be interested in publishing this as a package?"}, {"owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 0, "creation_date": 1564673509, "post_id": 57281583, "comment_id": 101117040, "body": "Looks like even <code>(cases as any)</code> is unnecessary now!"}, {"owner": {"reputation": 2534, "user_id": 10609635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e433b22da80480e4d7d811ceec10430?s=128&d=identicon&r=PG&f=1", "display_name": "SpencerPark", "link": "https://stackoverflow.com/users/10609635/spencerpark"}, "reply_to_user": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 1, "creation_date": 1564686769, "post_id": 57281583, "comment_id": 101123082, "body": "My pleasure, I won&#39;t publish as a package but you are more than welcome to!"}, {"owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "edited": false, "score": 0, "creation_date": 1564689813, "post_id": 57281583, "comment_id": 101124199, "body": "I&#39;ll make sure to mention/ping you if I do :)"}], "tags": [], "owner": {"reputation": 2534, "user_id": 10609635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e433b22da80480e4d7d811ceec10430?s=128&d=identicon&r=PG&f=1", "display_name": "SpencerPark", "link": "https://stackoverflow.com/users/10609635/spencerpark"}, "is_accepted": true, "score": 2, "last_activity_date": 1564686293, "last_edit_date": 1564686293, "creation_date": 1564532273, "answer_id": 57281583, "question_id": 57281154, "link": "https://stackoverflow.com/questions/57281154/whats-the-correct-type-for-a-general-purpose-match-function-for-tagged-unions/57281583#57281583", "title": "What&#39;s the correct type for a general-purpose match function for tagged unions?", "body": "<p>With a combination of mapped types and conditionals (taking advantage of the builtin <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#extracttu\" rel=\"nofollow noreferrer\">Extract</a>): </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Cases&lt;V extends {tag: string}, R&gt; = {\n    [K in V['tag']]: (v: Extract&lt;V, {tag: K}&gt;) =&gt; R\n}\nfunction match&lt;V extends {tag: string}, R&gt;(value: V, cases: Cases&lt;V, R&gt;): R {\n  return (cases as any)[value.tag](value);\n}\n</code></pre>\n\n<p>This signature will give an error for missing cases, infer the discriminated value type for the case (autocompletes in the playground only if the <code>=&gt;</code> is typed first), and raise an error for missing cases when specified as a literal.</p>\n\n<p><strong>Note</strong>: it will infer a stronger type than <code>Shape</code> for your <code>shape</code> example because of the <code>const</code> assignment. In that case the <code>match</code> call will raise an error about the extra case <code>circle</code> but providing the types explicitly silences that. <code>match&lt;Shape, string&gt;(shape, {...})</code></p>\n\n<p><a href=\"https://typescript-play.js.org/#code/C4TwDgpgBAwghgZwggPANShAHsCA7AEwSgG9g4BzALigWACcBLPCgXwBooAlAPigF5SAKCiioAbQDSUZlDTiA5OQoKAuqpoAKAG40AojnpwAxsHScylGpNY8AlAL5chrIQDMArnlOMA9nigAWzhgYwALdEwcfCJSZRo6JhYObh4dOAAbDwgaNE5jRGQaeCRUPNS7Gi5hUXoIYA96AM0C0qhEdrwQO3FtTOyAOmVVdKyIOwBuFyEhAHpZqLhAsAzoAEYhUEgoAGUwuG3+ESgAHzirKAVjRnpjVYVOIwJGDwQaPA9AgCMIeldRM6WaiXXA4L6+LAPKCg4AJBjMNhTITGfx0Wj7SA0PYHaCCIE0JTYYDgyGcGEEgASEAyGV8UAA7r56BkCABCBSsJEovAIXyrAa0iiaYKhCLYyCcRIItIIDEQCzHeZQcHAMJQNyMamxOB1KB1ACOHhuEAIx2ut1WWhITxeCFYDn4fAABgBBKDmu7QemMVV6uDPV5QAAk1v9ttYTvYxxhJKtMPtjigruhROVEOh+2AtDgIGIACIQ-G806XHZJlAlQBaPgKN0wtNYDMhbO5qB5qk0umM5lsvMKGZK7BLFbQABMyNRWbAvmYWbx8Uu09nUKwNDWnBANFHrHaxG5dC5qL5EAFviFIvCmiXeGACtESv8GRAUH80Fa0EYxANRrqptE19hKBNBILANwTR0kzdAD2izTQQywFIQxAe0S3tcsqxrKCZxvGCgPXKBRzsBQgA\" rel=\"nofollow noreferrer\">Link to playground</a></p>\n\n<h2>Update</h2>\n\n<p>To get better inference on the return type the signature gets a bit more complicated but it can be done:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Cases&lt;V extends {tag: string}&gt; = {\n    [K in V['tag']]: (v: Extract&lt;V, {tag: K}&gt;) =&gt; any\n}\ntype OnlyKnownCases&lt;C, T&gt; = C &amp; Record&lt;Exclude&lt;keyof C, T&gt;, \"Unknown case\"&gt; &amp; Record&lt;any, Function&gt;\n\nfunction match&lt;V extends {tag: string}, C extends Cases&lt;V&gt; = Cases&lt;V&gt;&gt;(value: V, cases: OnlyKnownCases&lt;C, V['tag']&gt;): ReturnType&lt;C[V['tag']]&gt; {\n  return cases[value.tag](value);\n}\n</code></pre>\n\n<p>Introducing the generic <code>C</code> allows the return type to be specified in terms of the parameter such that it is deferred to the call-site. Unfortunately this allows for extra cases since anything that <code>extends Cases&lt;V&gt;</code> is allowed. We restrict this by saying any case that is not on a valid tag (<code>Exclude&lt;keyof C, T&gt;</code>) must map to the string <code>\"Unknown case\"</code> which gives a nicer error than <code>never</code>. For completeness I've added <code>&amp; Record&lt;any, Function&gt;</code> so that in the very odd event that a case function is written as <code>\"Unknown case\"</code> it won't bypass our restriction.</p>\n\n<p><code>ReturnType&lt;C['someTag']&gt;</code> gives the return type of the case function for someTag. So <code>ReturnType&lt;C[V['tag']]&gt;</code> will work over the union of all the cases to give the union of all the returned types from the case functions.</p>\n\n<p><a href=\"https://typescript-play.js.org/#code/C4TwDgpgBAwghgZwggPANShAHsCA7AEwSgG9g4BzALigWACcBLPCgXwD4oBeUgKCgFQA2gGkozKGiEBychWkBdBTQAUANxoBRHPTgBjYOgA0pOTREcAlN05w8IXq16hIUAPJ4ANiBF4A9gDuePBIqDAmACqcPDBQAGRQAEoQen70BCjaep4ArgQQKADWECB+AGawkewmAEQAqniF-kFQeogQNZwJyanpKHYgJgBiOXgGjH547Ly8ZaPjk1AAtnDAegAW6Jg4+ESmlDR0TCysJrHYuITEIcjo0bDtqGjs7OpwuRA0aCZtoTQe3l8gWCjxQ4UkMjkinYlhoyWAOXoeAi4AKMCEUlklEUCk4JH4UHoEARSNajyEaneOQgADo5Ao3h9LABuRwzAD07O2cCWYE80AAjM5UVAAMrrOCuLgEgA++2oUGkekY9GyEGkJl0BEYOQQNDwOSWACMIPQnAI5WQDorcDgjX4sBqoLbgIcGMw2KzeKk8HRaBLIDRxZLoDwrQrZBd7Y6TC6aNIABIQTyePxQAJpTwEACE0lYXp9CD8-JpqYoKhWa02wcgrwQAYgJnxAk5UHtwHWUDKjGTezgRMJEAAjjkVRACATlar+aoSFqdQhWNYuJwAAYAQVaKrV6cYHcJcG1uqgABI54eF6xV0YCS7o7OXUubFAN86Lm2Hc6JcBaHAQMQajPR8amvRxLBZKBWwAWk4aRNxdD8sC-VZf3-KAaiTFM0wzegs2zGppA5LlsB5PloAAJm9SY-TAPxmB-MMzEVWj6KdLAaAFEwQBocjWCgRBWmo4AC2o4taTLCtVg2FQWLwYAmwJVtJm8KBJmgX5oEYYgiRHMcCCgFQ7H095UwCcdLAJWTXQMkgsC4p8VxfTcrP4n8VDPLBTlPEgQCXUCWy5AY3A7U0blnBzYOkSDiPoeg0mzMCIOg2DnLouTXIMzioHIyxCOFVwAEk8DKU1uHleMyj8Pw8ygS0mOkI1+xqurrQauAAC8814Sl6CgdioCKkr6FZQsfyJBAck8Bjlik9YVCwbMm0qvwaAAfWfLLGvoNbn2kcinUa9qdscoQAGYFCXXggA\" rel=\"nofollow noreferrer\">Link to playground</a></p>\n"}], "owner": {"reputation": 87, "user_id": 7399080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHOkh.png?s=128&g=1", "display_name": "Kinrany", "link": "https://stackoverflow.com/users/7399080/kinrany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57281583, "answer_count": 1, "score": 1, "last_activity_date": 1564686293, "creation_date": 1564528053, "last_edit_date": 1564673390, "question_id": 57281154, "link": "https://stackoverflow.com/questions/57281154/whats-the-correct-type-for-a-general-purpose-match-function-for-tagged-unions", "title": "What&#39;s the correct type for a general-purpose match function for tagged unions?", "body": "<p>I want to implement a <code>match</code> function that would work similar to Rust's <a href=\"https://doc.rust-lang.org/1.9.0/book/match.html\" rel=\"nofollow noreferrer\">match keyword</a>, but adjusted for TypeScript's structural type system.</p>\n\n<p>It's possible (but not ergonomic) to explicitly write the function's type for each unnamed tagged union that needs to be matched. Currently the best alternative seems to be switch-case, which have to be wrapped in <code>(()=&gt;{})()</code> to work as expressions.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// what type should this function have?\nfunction match(value, cases) {\n  return cases[value.tag](value);\n}\n\n// example 1\ntype Shape =\n  | {tag: 'circle', radius: number}\n  | {tag: 'textbox', text: string};\n\nconst shape: Shape = {tag: 'textbox', text: 'Hello world!'};\n\nlog(match(shape, {\n  // both fields are required\n  circle: ({radius}) =&gt; `A circle with radius ${radius}`,\n  textbox: ({text}) =&gt; `A text box that says \"${text}\"`\n})); // -&gt; 'A text box that says \"Hello world!\"'\n\n// example 2\nconst point = {tag: 'point', x: 1, y: 2} as const;\n\nlog(match(point, {\n  // only one case is required\n  point: ({x, y}) =&gt; `A point at (${x}, ${y})`\n})); // -&gt; 'A point at (1, 2)'\n</code></pre>\n\n<p>Some desired properties:</p>\n\n<ol>\n<li>Should verify that each possible tag has a corresponding case function.</li>\n<li>Should auto-complete tag names in the second argument based on the value's type.</li>\n<li>Should not require explicit generic parameters.</li>\n<li><strong>Update:</strong> Should correctly infer the returned type as a union of all the possible types.</li>\n</ol>\n\n<p>In case it's currently theoretically impossible to implement this, I'd like to know why and whether there's a work-in-progress language feature that will make this possible.</p>\n"}, {"tags": ["typescript", "google-chrome-extension", "rxjs"], "comments": [{"owner": {"reputation": 11144, "user_id": 4099454, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hjZGE.png?s=128&g=1", "display_name": "Hitmands", "link": "https://stackoverflow.com/users/4099454/hitmands"}, "edited": false, "score": 2, "creation_date": 1564557723, "post_id": 57280551, "comment_id": 101065616, "body": "<a href=\"https://www.learnrxjs.io/operators/creation/fromevent.html\" rel=\"nofollow noreferrer\">learnrxjs.io/operators/creation/fromevent.html</a> does the same job..."}, {"owner": {"reputation": 42546, "user_id": 3959875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wJdGu.png?s=128&g=1", "display_name": "wOxxOm", "link": "https://stackoverflow.com/users/3959875/woxxom"}, "edited": false, "score": 1, "creation_date": 1564563381, "post_id": 57280551, "comment_id": 101068635, "body": "Could be unrelated but combining <code>return</code> and a void function call is a bad idea that may confuse TS compiler so I suggest separating them."}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "edited": false, "score": 1, "creation_date": 1564566634, "post_id": 57280551, "comment_id": 101070555, "body": "you want to check if the element exists in a 1 sec interval, and if it exists subscribe to it&#39;s &#39;scroll&#39; event?"}, {"owner": {"reputation": 2316, "user_id": 4842857, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/k5xqy.jpg?s=128&g=1", "display_name": "Jack Steam", "link": "https://stackoverflow.com/users/4842857/jack-steam"}, "reply_to_user": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "edited": false, "score": 0, "creation_date": 1564584063, "post_id": 57280551, "comment_id": 101081071, "body": "@benshabatnoam now that you put it that way, interval + switchMap would be a better solution..."}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "edited": false, "score": 1, "creation_date": 1564601976, "post_id": 57280551, "comment_id": 101089712, "body": "10x for your question, it was fun to get it to work. check my answer."}], "answers": [{"tags": [], "owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "is_accepted": true, "score": 1, "last_activity_date": 1564601932, "creation_date": 1564601932, "answer_id": 57297836, "question_id": 57280551, "link": "https://stackoverflow.com/questions/57280551/how-to-subscribe-to-an-elements-that-not-exist-yet-event/57297836#57297836", "title": "How to subscribe to an element&#39;s (that not exist yet) event", "body": "<p>This observable will do the job:</p>\n\n<pre><code>const scroll$ = timer().pipe(\n  switchMap(() =&gt; of(document.querySelector('.section-scrollbox'))),\n  switchMap(bodyDiv =&gt; fromEvent(bodyDiv, 'scroll')),\n  retryWhen(errors =&gt; errors.pipe(\n    delay(1000)\n  ))\n);\n</code></pre>\n\n<hr>\n\n<h1>Explanation:</h1>\n\n<ol>\n<li><p><a href=\"https://www.learnrxjs.io/operators/creation/timer.html\" rel=\"nofollow noreferrer\">timer</a> - emits 1 value then completes.</p>\n\n<p>this is just for initializing the observable to look for your element.</p></li>\n<li><p>switchMap(() => of(document.querySelector('.section-scrollbox')))</p>\n\n<p>will return your element if exists</p></li>\n<li><p>switchMap(bodyDiv => fromEvent(bodyDiv, 'scroll'))</p>\n\n<p>if your element <strong>exists</strong> will return <strong>only</strong> the scroll event from now (won't look for the element any more)</p></li>\n<li><p>retryWhen(errors => errors.pipe(delay(1000)))</p>\n\n<p>if your element <strong>doesn't exists</strong> will retry step 2 to get your element again, <strong>after</strong> \na delay of 1 second.</p></li>\n</ol>\n\n<blockquote>\n  <p>Checkout this <a href=\"https://stackblitz.com/edit/nbs-typescript-rxjs-subscribe-2-element-event-on-element-create\" rel=\"nofollow noreferrer\">DEMO</a></p>\n</blockquote>\n"}], "owner": {"reputation": 2316, "user_id": 4842857, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/k5xqy.jpg?s=128&g=1", "display_name": "Jack Steam", "link": "https://stackoverflow.com/users/4842857/jack-steam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 57297836, "answer_count": 1, "score": 0, "last_activity_date": 1564648634, "creation_date": 1564523754, "last_edit_date": 1564648634, "question_id": 57280551, "link": "https://stackoverflow.com/questions/57280551/how-to-subscribe-to-an-elements-that-not-exist-yet-event", "title": "How to subscribe to an element&#39;s (that not exist yet) event", "body": "<p>I want to create an observable that subscribes to an event on an element that may not exist yet. If the element isn't found, it retries until the element is found.</p>\n\n<p>The problem is TypeScript doesn't like it.</p>\n\n<p>I get an error when I call <code>.pipe(...)</code> on the observable. The errors are on whatever I put in <code>pipe</code>, in this case <code>retryWhen(...)</code>. No errors if I don't use <code>pipe</code>.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>import { Observable } from 'rxjs'\nimport { retryWhen, delay } from 'rxjs/operators'\n\nexport const scroll$ = new Observable((subscriber) =&gt; {\n  const scrollbox = document.querySelector('.section-scrollbox')\n\n  if (scrollbox) {\n    scrollbox.addEventListener('scroll', handleEvent)\n\n    return scrollbox.removeEventListener('scroll', handleEvent)\n  } else {\n    subscriber.error()\n  }\n\n  function handleEvent(this: HTMLDivElement) {\n    subscriber.next(this)\n  }\n}).pipe(\n  retryWhen((errors) =&gt; errors.pipe(delay(1000))),\n)\n</code></pre>\n\n<p>I get these errors:</p>\n\n<blockquote>\n  <p>Argument of type 'MonoTypeOperatorFunction' is not assignable to parameter of type 'OperatorFunction'.</p>\n  \n  <p>Types of parameters 'source' and 'source' are incompatible.</p>\n  \n  <p>Type 'Observable' is not assignable to type 'Observable'.</p>\n  \n  <p>Type 'unknown' is not assignable to type 'HTMLDivElement'.ts(2345)</p>\n</blockquote>\n\n<p>How can I set the type to <code>Observable&lt;HTMLDivElement&gt;</code> in this scenario?</p>\n\n<p>BTW, this isn't an Angular question. I'm using this in a Chrome extension content script.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 0, "creation_date": 1564522064, "post_id": 57280207, "comment_id": 101056794, "body": "That has three strings, you want a Record with two strings."}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1564522119, "post_id": 57280207, "comment_id": 101056816, "body": "That&#39;s not a valid interface declaration, the <code>=</code> is only used in a type alias... which actually works with this assignment."}, {"owner": {"reputation": 933, "user_id": 8670745, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6169a29e46f467d48661ce0f4cb3a74?s=128&d=identicon&r=PG&f=1", "display_name": "yen", "link": "https://stackoverflow.com/users/8670745/yen"}, "edited": false, "score": 0, "creation_date": 1564522279, "post_id": 57280207, "comment_id": 101056871, "body": "Sorry bout the typo... i was switching between type and interface trying diff things. will correct questions @a"}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1564522348, "post_id": 57280207, "comment_id": 101056890, "body": "Well it should work with a type alias: <a href=\"https://github.com/microsoft/TypeScript/issues/15300\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/15300</a> -- post your actual code and error?"}], "answers": [{"comments": [{"owner": {"reputation": 933, "user_id": 8670745, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6169a29e46f467d48661ce0f4cb3a74?s=128&d=identicon&r=PG&f=1", "display_name": "yen", "link": "https://stackoverflow.com/users/8670745/yen"}, "edited": false, "score": 0, "creation_date": 1564522441, "post_id": 57280262, "comment_id": 101056920, "body": "That was my exact error message, and your solution worked! Thank you! I resisted casting to unknown because I had gotten used to the linter complaining about &quot;any&quot; types and confused the two..."}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1564523227, "post_id": 57280262, "comment_id": 101057180, "body": "Or you can just use a type alias instead of an interface."}, {"owner": {"reputation": 933, "user_id": 8670745, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6169a29e46f467d48661ce0f4cb3a74?s=128&d=identicon&r=PG&f=1", "display_name": "yen", "link": "https://stackoverflow.com/users/8670745/yen"}, "reply_to_user": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1564591770, "post_id": 57280262, "comment_id": 101085349, "body": "@AaronBeall the project&#39;s linter didn&#39;t let me, but who knows... it might have been because I had done something else wrong. I feel like ur 100% right tho! thx for the info. Super new to typescript."}], "tags": [], "owner": {"reputation": 158222, "user_id": 871050, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/A9cyT.png?s=128&g=1", "display_name": "Madara&#39;s Ghost", "link": "https://stackoverflow.com/users/871050/madaras-ghost"}, "is_accepted": false, "score": 2, "last_activity_date": 1564522106, "creation_date": 1564522106, "answer_id": 57280262, "question_id": 57280207, "link": "https://stackoverflow.com/questions/57280207/typescript-cannot-cast-down-to-generic-recordstring-string-type/57280262#57280262", "title": "Typescript: cannot cast down to generic &quot;Record&lt;string, string&gt;&quot; type?", "body": "<p>TypeScript signals an error here not because the two types are not assignable to one another, but because <em>they have no properties in common</em>, this is almost always made by mistake, and the instruction on the error is fairly clear on what to do in the case that is not.</p>\n\n<blockquote>\n  <p>Conversion of type 'foo' to type 'Record' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, <strong>convert the expression to 'unknown' first</strong>.</p>\n</blockquote>\n\n<p>Emphasis mine.</p>\n\n<p>So what you need to do is something like</p>\n\n<pre><code>declare const x: foo; // there exists a variable x of type foo.\nconst y = x as unknown as Record&lt;string, string&gt;; // cast to unknown, then to Record.\n</code></pre>\n\n<p><a href=\"https://typescript-play.js.org/#code/JYOwLgpgTgZghgYwgAgGIHt3IN4ChkHIyYBcyAzmFKAOYDc+hARnFGQOTHrvIA+y7FlHYMAvrlwATCAgA2rFAnQhKyAB5kM6BriUqwyAJ7IAvOuRxyyAEoz0USQB5K1EDQA0FKrQB8dZAD0AciYAA7kusqqAF6m5pbIAK4gANYg6ADuIBZWtkoOzt5uni6+-kHIGfYp5EA\" rel=\"nofollow noreferrer\">Playground link</a></p>\n"}], "owner": {"reputation": 933, "user_id": 8670745, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6169a29e46f467d48661ce0f4cb3a74?s=128&d=identicon&r=PG&f=1", "display_name": "yen", "link": "https://stackoverflow.com/users/8670745/yen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564522333, "creation_date": 1564521724, "last_edit_date": 1564522333, "question_id": 57280207, "link": "https://stackoverflow.com/questions/57280207/typescript-cannot-cast-down-to-generic-recordstring-string-type", "title": "Typescript: cannot cast down to generic &quot;Record&lt;string, string&gt;&quot; type?", "body": "<p>Why won't typescript allow me to cast the following:</p>\n\n<pre><code>interface foo {\n  foofoo: string\n  feefee: string\n  faafaa: 'red' | 'blue'\n}\n</code></pre>\n\n<p>into <code>Record&lt;string, string&gt;</code> ? How do I make that happen?</p>\n\n<p>I've tried:</p>\n\n<ul>\n<li>changing the string literals red|blue to just <code>string</code> type</li>\n<li>tried <code>instanceOfFoo as Record&lt;string, string&gt;</code></li>\n<li>tried changing it into a type instead of an interface</li>\n</ul>\n\n<p>...no joy whatsoever any help appreciated</p>\n"}, {"tags": ["typescript", "enums"], "comments": [{"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1564521463, "post_id": 57280118, "comment_id": 101056592, "body": "Just got the <code>as Enums</code> in the wrong place. It&#39;s <code>import * as Enums from &#39;.&#47;ModelsEnums&#39;</code>"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1564523542, "post_id": 57280118, "comment_id": 101057282, "body": "<code>import * as enums from &#39;.&#47;ModelsEnums&#39;</code> then <code>enums.ENUM1</code>, <code>enums.ENUM2</code>, etc."}], "answers": [{"tags": [], "owner": {"reputation": 9173, "user_id": 2765346, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nMXhV.png?s=128&g=1", "display_name": "Hristo Eftimov", "link": "https://stackoverflow.com/users/2765346/hristo-eftimov"}, "is_accepted": false, "score": 0, "last_activity_date": 1613578528, "creation_date": 1613578528, "answer_id": 66245804, "question_id": 57280118, "link": "https://stackoverflow.com/questions/57280118/organize-a-group-of-enums/66245804#66245804", "title": "Organize a group of enums", "body": "<p>If you have different enum:</p>\n<pre><code>export enum Cat {\n    Ragdoll,\n    Birman,\n    Abyssinian\n}\n\nexport enum Dog {\n    Bulldog,\n    Boxer,\n    Doberman\n}\n</code></pre>\n<p>You can group them in a <code>type</code>:</p>\n<pre><code>export type Animal = Cat | Dog;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6317057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1785094a58f72a5c8f4bea5e0030255d?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kalo", "link": "https://stackoverflow.com/users/6317057/amit-kalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1613578528, "creation_date": 1564521243, "last_edit_date": 1564523395, "question_id": 57280118, "link": "https://stackoverflow.com/questions/57280118/organize-a-group-of-enums", "title": "Organize a group of enums", "body": "<p>Im writing code with typescript and i have file that include 6 different enum.\nI want from another file to import all the enums together so i try the following syntax:</p>\n\n<pre><code>import * from './ModelsEnums' as Enums\n</code></pre>\n\n<p>when 'ModelsEnums.ts' is the file that has all the enums as follow:</p>\n\n<pre><code>    export enum ENUM1{\n          .enter code here\n          .\n          .\n    }\n\n    export enum ENUM2{\n          .\n          .\n          .\n    }\n.\n.\n.\n    export enum ENUM6{\n          .\n          .\n          .\n    }\n</code></pre>\n\n<p>but this one won't work for me, how should i do it?\nbtw i want to avoid from the following syntax:</p>\n\n<pre><code>import {enum1, enum2, ..., enum6} from './ModelsEnums'\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "editor", "material-ui", "avatar"], "answers": [{"tags": [], "owner": {"reputation": 1159, "user_id": 8383919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRJwN.png?s=128&g=1", "display_name": "Auskennfuchs", "link": "https://stackoverflow.com/users/8383919/auskennfuchs"}, "is_accepted": true, "score": 3, "last_activity_date": 1564521271, "creation_date": 1564521271, "answer_id": 57280122, "question_id": 57280077, "link": "https://stackoverflow.com/questions/57280077/unable-to-rotate-an-image-in-react/57280122#57280122", "title": "Unable to rotate an image in react", "body": "<p>You weren't using the rotate value. I've fixed it in this fork:</p>\n\n<p><a href=\"https://codesandbox.io/s/example-for-react-avatar-editor-dc6wh\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/example-for-react-avatar-editor-dc6wh</a></p>\n\n<pre><code>              &lt;AvatarEditor\n                rotate={this.state.rotate}\n              /&gt;\n\n</code></pre>\n\n<p>Also I've removed the <code>rotate=0</code> in the rotation functions. Don't know if you want to rotate it completely or just once in every direction</p>\n"}], "owner": {"reputation": 119, "user_id": 11246120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057868fa2869d3083fa5dd0b3cc714a0?s=128&d=identicon&r=PG&f=1", "display_name": "KillMe", "link": "https://stackoverflow.com/users/11246120/killme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 57280122, "answer_count": 1, "score": -1, "last_activity_date": 1564521271, "creation_date": 1564520984, "question_id": 57280077, "link": "https://stackoverflow.com/questions/57280077/unable-to-rotate-an-image-in-react", "title": "Unable to rotate an image in react", "body": "<p>I'm working on React-Avatar Editor. My rotate button is not functioning as expected. Here's my link to the code: <a href=\"https://codesandbox.io/s/example-for-react-avatar-editor-ofoz4\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/example-for-react-avatar-editor-ofoz4</a></p>\n"}, {"tags": ["javascript", "regex", "typescript"], "comments": [{"owner": {"reputation": 3811, "user_id": 6351322, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wai3S.png?s=128&g=1", "display_name": "guijob", "link": "https://stackoverflow.com/users/6351322/guijob"}, "edited": false, "score": 1, "creation_date": 1564520310, "post_id": 57279898, "comment_id": 101056269, "body": "what do you mean by <code>$open</code> and <code>$close</code> ?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1564520317, "post_id": 57279898, "comment_id": 101056271, "body": "<a href=\"https://stackoverflow.com/questions/5367369/named-capturing-groups-in-javascript-regex\" title=\"named capturing groups in javascript regex\">stackoverflow.com/questions/5367369/&hellip;</a>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1564520414, "post_id": 57279898, "comment_id": 101056291, "body": "<code>new RegExp(&#39;&lt;(?&lt;open&gt;.*?)&gt;&#39; + text + &#39;&lt;(?&lt;close&gt;.*?)&gt;&#39;)</code> and  <code>&#39;&lt;$&lt;open&gt;&gt;&#39; &amp; &#39;&lt;$&lt;close&gt;&gt;&#39;</code> in the replacement"}, {"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "edited": false, "score": 0, "creation_date": 1564520757, "post_id": 57279898, "comment_id": 101056379, "body": "perfect. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1564521151, "creation_date": 1564521151, "answer_id": 57280105, "question_id": 57279898, "link": "https://stackoverflow.com/questions/57279898/unable-to-access-regex-value-using-different-name/57280105#57280105", "title": "Unable to access regex value using different name", "body": "<p>You seem to target ECMAScript 2018+ JS environment.</p>\n\n<p>You may use <code>(?&lt;name&gt;pattern)</code> to define the <a href=\"https://stackoverflow.com/questions/5367369/named-capturing-groups-in-javascript-regex\">named capturing groups</a> in the pattern and <strong><code>$&lt;name&gt;</code> named replacement backreferences</strong> in the replacement pattern to refer to the strings captured with the named groups.</p>\n\n<p>You may also enhance the code a bit using</p>\n\n<pre><code>const regex = new RegExp('&lt;(?&lt;open&gt;[^&gt;]+)&gt;' + text.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&amp;') + '&lt;(?&lt;close&gt;[^&gt;]+)&gt;');\nrenderer.setProperty(node, 'innerHTML', node.innerHTML.replace(regex, '&lt;$&lt;open&gt;&gt;' + replaceText.replace(/\\$/g, '$$$$') + '&lt;$&lt;close&gt;&gt;'));\n</code></pre>\n\n<p><strong>NOTES</strong></p>\n\n<ul>\n<li><code>(?&lt;open&gt;[^&gt;]+)</code> matches and captures the open tag into <code>open</code> named group and <code>(?&lt;close&gt;[^&gt;]+)</code> captures the close tag into <code>close</code> named group with <code>[^&gt;]+</code> pattern: 1 or more chars other than <code>&gt;</code></li>\n<li><code>text.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&amp;')</code> is used to escape any special chars in <code>text</code></li>\n<li><code>replaceText.replace(/\\$/g, '$$$$')</code> is required to correctly handle <code>$1</code> like literal strings in the replacement text.</li>\n</ul>\n"}], "owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564521151, "creation_date": 1564520160, "question_id": 57279898, "link": "https://stackoverflow.com/questions/57279898/unable-to-access-regex-value-using-different-name", "title": "Unable to access regex value using different name", "body": "<p>I've the below Regex expression,</p>\n\n<pre><code>const regex = new RegExp('&lt;(.*)&gt;' + text + '&lt;(.*)&gt;');\nrenderer.setProperty(node, 'innerHTML', node.innerHTML.replace(regex, '&lt;$1&gt;' + replaceText + '&lt;$2&gt;'));\n</code></pre>\n\n<p>Instead of using <code>'&lt;$1&gt;'</code> and <code>'&lt;$2&gt;'</code>, I need to use <code>'&lt;$open&gt;'</code> &amp; <code>'&lt;$close&gt;'</code></p>\n\n<p>When I tried changing it's not working as expected. </p>\n\n<p>How can it be done ?</p>\n"}, {"tags": ["angular", "typescript", "ngx-bootstrap", "angular-test", "ngx-bootstrap-modal"], "comments": [{"owner": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "edited": false, "score": 0, "creation_date": 1564527251, "post_id": 57279830, "comment_id": 101058257, "body": "I believe there needs more details on the actual test, are you using the dispatcher api to trigger the click?"}, {"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "reply_to_user": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "edited": false, "score": 0, "creation_date": 1564754511, "post_id": 57279830, "comment_id": 101146045, "body": "The problem is in <a href=\"https://github.com/azerothcore/Keira3/blob/master/src/app/test-utils/editor-page-object.ts#L42\" rel=\"nofollow noreferrer\">this method</a>  that is used in <a href=\"https://github.com/azerothcore/Keira3/blob/master/src/app/components/editors/creature/creature-template-addon/creature-template-addon.integration.spec.ts#L140\" rel=\"nofollow noreferrer\">this test case</a>"}, {"owner": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "edited": false, "score": 0, "creation_date": 1564755891, "post_id": 57279830, "comment_id": 101146884, "body": "Looking quickly at your test there might be some async issues, have you tried with fakeasync along with tick()?"}, {"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "reply_to_user": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "edited": false, "score": 0, "creation_date": 1564755999, "post_id": 57279830, "comment_id": 101146951, "body": "@Lucho when that is the case, you usually see the action completed (in this case the modal closed) then the test finishes executing. Instead, in my case the modal is still open even <b>after</b> the test completes. And even more strange is that, in the Chrome window of the karma tests, if I click on the button the modal closes correctly."}, {"owner": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "edited": false, "score": 0, "creation_date": 1564756270, "post_id": 57279830, "comment_id": 101147115, "body": "Yes as I mentioned due to js async nature, which \u201cexpect\u201d is failing you exactly? Then I can write an example how I mean"}, {"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "reply_to_user": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "edited": false, "score": 0, "creation_date": 1564756957, "post_id": 57279830, "comment_id": 101147529, "body": "@Lucho if I use for example <code>page.expectModalHidden()</code> in the test, it fails. I&#39;ve tried also using <code>fakeAsync</code> and <code>tick()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "edited": false, "score": 0, "creation_date": 1564825748, "post_id": 57333256, "comment_id": 101163457, "body": "thanks for your answer, but unfortunately it does not solve the issue :("}, {"owner": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "reply_to_user": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "edited": false, "score": 0, "creation_date": 1564829947, "post_id": 57333256, "comment_id": 101164241, "body": "Did you try it with fakeAsync &amp; tick?"}, {"owner": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "reply_to_user": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "edited": false, "score": 0, "creation_date": 1564830315, "post_id": 57333256, "comment_id": 101164308, "body": "Updated an example on the post"}], "tags": [], "owner": {"reputation": 1148, "user_id": 6336460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1e94223a609ee14362aa12f225da3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lucho", "link": "https://stackoverflow.com/users/6336460/lucho"}, "is_accepted": false, "score": 1, "last_activity_date": 1564830289, "last_edit_date": 1564830289, "creation_date": 1564778905, "answer_id": 57333256, "question_id": 57279830, "link": "https://stackoverflow.com/questions/57279830/ngx-bootstrap-modal-does-not-hide-during-test/57333256#57333256", "title": "ngx-bootstrap modal does not hide during test", "body": "<p>Can you try with this instead in your clickElement method in test utilites \"page-object.ts\"</p>\n\n<p><strong>from:</strong></p>\n\n<pre><code>clickElement(element: HTMLElement): void {\n    element.click();\n    this.fixture.detectChanges();\n  }\n</code></pre>\n\n<p><strong>to:</strong></p>\n\n<pre><code>clickElement(element: HTMLElement): void {\n    element.dispatchEvent(new MouseEvent('click'));\n    this.fixture.detectChanges();\n  }\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/ngx-bootstrap-modal-test\" rel=\"nofollow noreferrer\">Example</a> of fakeAsync &amp; tick() test</p>\n"}, {"comments": [{"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "edited": false, "score": 0, "creation_date": 1564826047, "post_id": 57333769, "comment_id": 101163512, "body": "I&#39;ve tried to use this approach, instead of using the <code>bsModalRef</code>, but this does not solve the issue"}], "tags": [], "owner": {"reputation": 1949, "user_id": 6651984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BM3Ui.jpg?s=128&g=1", "display_name": "Abel Valdez", "link": "https://stackoverflow.com/users/6651984/abel-valdez"}, "is_accepted": false, "score": 0, "last_activity_date": 1564782225, "creation_date": 1564782225, "answer_id": 57333769, "question_id": 57279830, "link": "https://stackoverflow.com/questions/57279830/ngx-bootstrap-modal-does-not-hide-during-test/57333769#57333769", "title": "ngx-bootstrap modal does not hide during test", "body": "<p>You need to save the the modal reference in this.modalRef when you are showing it. </p>\n\n<pre><code>constructor(private modalService: BsModalService) {}\n\nngOnInit() {\n    this.modalRef = this.modalService.show(this.template, \n    { class: 'modal-md' });\n}\n\nsave(){\n     if (this.modalRef) {\n        this.modalRef.hide();\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1564830289, "creation_date": 1564519814, "last_edit_date": 1564520204, "question_id": 57279830, "link": "https://stackoverflow.com/questions/57279830/ngx-bootstrap-modal-does-not-hide-during-test", "title": "ngx-bootstrap modal does not hide during test", "body": "<p>In my Angular application, I'm writing some integration tests where I have an <a href=\"https://valor-software.com/ngx-bootstrap/#/modals\" rel=\"nofollow noreferrer\">ngx-bootstrap modal</a></p>\n\n<p>In my integration tests, I'm testing a Component which contains a button that pops up a modal. Inside a modal, there is a \"Save\" button which is clicked during the tests.</p>\n\n<p>Inside the Modal Component, the button triggers a method on click:\n <code>(click)=onSave()</code> and this is how the Modal Component looks like:</p>\n\n<pre><code>constructor(\n  protected bsModalRef: BsModalRef,\n) {}\n\n\nonSave() {\n  // do some stuff (NOTE: this part is actually executed during the test)\n  this.bsModalRef.hide();\n}\n</code></pre>\n\n<p>Everything works fine, except that the modal won't disappear. However the <code>onSave()</code> method is correctly executed.</p>\n\n<p>That is very strange, because if I manually click on the button after the test has finished to run, it correctly hides the modal</p>\n\n<p>But during the test, despite the button correctly receives the click and triggers the execution of the <code>onSave()</code> method, the modal does not disapper.</p>\n\n<p>Note: there are no spies involved here and, since it's an integration test, I would prefer to not mock the <code>hide()</code> method but to actually make it work during the test and then assert that the modal has correctly disappeared together with the other side-effects of my custom <code>onSave()</code> method.</p>\n"}, {"tags": ["typescript", "ionic-framework", "ionic3", "cordova-plugins", "phonegap-plugins"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10564631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hTpwfPvzx0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbASultZ35WRCH1oqJHrR2Gnoqm4wQ/mo/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/10564631/antonio"}, "edited": false, "score": 0, "creation_date": 1564578585, "post_id": 57284672, "comment_id": 101077429, "body": "Thanks for the help,  I tried it, but it&#39;s the (matches) itself that appears in the input. I still can&#39;t get the text speech available for edit"}, {"owner": {"reputation": 823, "user_id": 6844910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a18f4cc9585496e74dc15ad815d1e15?s=128&d=identicon&r=PG&f=1", "display_name": "Dushan", "link": "https://stackoverflow.com/users/6844910/dushan"}, "reply_to_user": {"reputation": 35, "user_id": 10564631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hTpwfPvzx0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbASultZ35WRCH1oqJHrR2Gnoqm4wQ/mo/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/10564631/antonio"}, "edited": false, "score": 0, "creation_date": 1564633865, "post_id": 57284672, "comment_id": 101096887, "body": "glad you found the answer :) @Antonio"}], "tags": [], "owner": {"reputation": 823, "user_id": 6844910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a18f4cc9585496e74dc15ad815d1e15?s=128&d=identicon&r=PG&f=1", "display_name": "Dushan", "link": "https://stackoverflow.com/users/6844910/dushan"}, "is_accepted": false, "score": 0, "last_activity_date": 1564555149, "creation_date": 1564555149, "answer_id": 57284672, "question_id": 57279374, "link": "https://stackoverflow.com/questions/57279374/is-there-a-way-to-save-the-text-in-speech-to-text-ionic-speech-recognition/57284672#57284672", "title": "Is there a way to save the &quot;text&quot; in speech to text Ionic Speech Recognition", "body": "<p>You can do something like this,</p>\n\n<p>Now your voice text results are saved in <code>matches</code> variable.</p>\n\n<p>Now lets change you input little bit. According to your problem what i understood was that you need to show your spoken text in an input field and then you need to change is by your hand if that text is not correct or something else.</p>\n\n<p>For that you can set you input value to matches. When you do that, your input field will display the matches texts and yet it will be editable. But you need to provide a different [(ngModel)] variable for that input since you need to identify and track the changed matching values(<code>matches</code>)</p>\n\n<p><code>&lt;ion-input  type=\"text\" value=\"matches\" [(ngModel)]=\"correctedMatches\"&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 10564631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hTpwfPvzx0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbASultZ35WRCH1oqJHrR2Gnoqm4wQ/mo/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/10564631/antonio"}, "is_accepted": false, "score": 0, "last_activity_date": 1564601567, "creation_date": 1564601567, "answer_id": 57297757, "question_id": 57279374, "link": "https://stackoverflow.com/questions/57279374/is-there-a-way-to-save-the-text-in-speech-to-text-ionic-speech-recognition/57297757#57297757", "title": "Is there a way to save the &quot;text&quot; in speech to text Ionic Speech Recognition", "body": "<p>I solved finally solved it with Angular trackBy</p>\n\n<pre><code> &lt;ion-grid&gt;\n        &lt;ion-row&gt;\n          &lt;ion-col *ngIf=\"matches\"&gt;\n                    &lt;h3 *ngFor=\"let match of matches; let i = index; trackBy:trackByInstance\"\"&gt;\n                      {{ match }}\n                    &lt;/h3&gt;\n                    &lt;ion-item&gt;\n                      &lt;ion-input  type=\"text\" [(ngModel)]=\"matches[i]\"&gt;\n                      &lt;/ion-input&gt;\n                    &lt;/ion-item&gt;\n          &lt;/ion-col&gt;\n        &lt;/ion-row&gt;\n     &lt;/ion-grid&gt;\n\n trackByInstance(index: any) {\n    return index;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10564631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hTpwfPvzx0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbASultZ35WRCH1oqJHrR2Gnoqm4wQ/mo/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/10564631/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564601567, "creation_date": 1564517674, "question_id": 57279374, "link": "https://stackoverflow.com/questions/57279374/is-there-a-way-to-save-the-text-in-speech-to-text-ionic-speech-recognition", "title": "Is there a way to save the &quot;text&quot; in speech to text Ionic Speech Recognition", "body": "<p>I have been able to use the ionic framework documentation to implement Ionic Speech Recognition (speech to text) on my project now I want to be able to save the text or audio using any form input, ngmodel or formcontrol</p>\n\n<p>I have tried using binding the matches variable to ng model assigned to a new variable but didn't work</p>\n\n<pre><code>startListening() {\n    let options = {\n      language: 'en-US',\n      matches: 2,\n      prompt: 'Say Something!'\n    }\n    this.speechRecognition.startListening(options).subscribe(matches =&gt; {\n      this.matches = matches;\n      this.cd.detectChanges();\n    });\n    this.isRecording = true;\n  }\n\n\n&lt;ion-grid&gt;\n    &lt;ion-row&gt;\n      &lt;ion-col *ngIf=\"matches\"&gt;\n                &lt;h3 *ngFor=\"let match of matches\"&gt;\n                  {{ match }}\n                &lt;/h3&gt;\n                &lt;ion-item&gt;\n                  &lt;ion-input  type=\"text\" [(ngModel)]=\"matches\"&gt;\n                  &lt;/ion-input&gt;\n                &lt;/ion-item&gt;\n      &lt;/ion-col&gt;\n    &lt;/ion-row&gt;\n &lt;/ion-grid&gt;\n</code></pre>\n\n<p>I expect to be able to see the text in the input so that I can have the option to edit before I save to database</p>\n"}, {"tags": ["javascript", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1564518167, "post_id": 57279233, "comment_id": 101055523, "body": "@AluanHaddad <code>fromEvent</code> only works on specific event targets. this is not one of them"}], "answers": [{"comments": [{"owner": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "edited": false, "score": 0, "creation_date": 1564518649, "post_id": 57279490, "comment_id": 101055675, "body": "Thanks, &quot;you don&#39;t pass in&quot; is where it clicked."}, {"owner": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "edited": false, "score": 0, "creation_date": 1564519121, "post_id": 57279490, "comment_id": 101055830, "body": "The &quot;resultCallback&quot; is an async callback for the result of actually registering the handler, because there are conditions where it can fail, and this is how the library returns the result.   So I would need to unsubscribe in the event it does."}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "reply_to_user": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "edited": false, "score": 0, "creation_date": 1564519231, "post_id": 57279490, "comment_id": 101055874, "body": "In that case, I&#39;d say make that function something like <code>(result) =&gt; { if (result.failed) { throw new Error(&#39;Event registration failed!&#39;); } }</code> that should cause the observable to error out"}, {"owner": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "edited": false, "score": 0, "creation_date": 1564520214, "post_id": 57279490, "comment_id": 101056238, "body": "Thanks, throwing an error doesn&#39;t complete the observable. But I can just pipe on a takeWhile() with a flag if it fails."}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "reply_to_user": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "edited": false, "score": 0, "creation_date": 1564520269, "post_id": 57279490, "comment_id": 101056255, "body": "yup, that works if your goal is completion. I just thought you might want it to go to the error handler in the failed case"}, {"owner": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "edited": false, "score": 0, "creation_date": 1564522732, "post_id": 57279490, "comment_id": 101057019, "body": "Good point thanks, I made a couple of BehaviourSubjects for the add and remove results so I can pipe some different scenarios before returning the actual event value."}], "tags": [], "owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "is_accepted": true, "score": 2, "last_activity_date": 1564518136, "creation_date": 1564518136, "answer_id": 57279490, "question_id": 57279233, "link": "https://stackoverflow.com/questions/57279233/wrapping-event-handler-callback-in-observable/57279490#57279490", "title": "Wrapping event handler callback in Observable", "body": "<p>rxjs already did this for you, with the <code>fromEventPattern</code> observable. </p>\n\n<pre><code>const resultCallback = (result) =&gt; {}; // not hyper clear on the point of this\n\nconst events$ = fromEventPattern(\n  (handler) =&gt; Library.addHandler('SOME_EVENT', handler, resultCallback),\n  (handler) =&gt; Library.removeHandler('SOME_EVENT', handler, resultCallback);\n);\n</code></pre>\n\n<p>you don't \"pass in\" the handler here. Your subscribe IS your handler:</p>\n\n<pre><code>events$.subscribe((val) =&gt; someHandler(val));\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 2445709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/90a0547d1ce3e255060c8718e9bb23f3?s=128&d=identicon&r=PG", "display_name": "hyperdrive", "link": "https://stackoverflow.com/users/2445709/hyperdrive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 57279490, "answer_count": 1, "score": 1, "last_activity_date": 1564518136, "creation_date": 1564516963, "question_id": 57279233, "link": "https://stackoverflow.com/questions/57279233/wrapping-event-handler-callback-in-observable", "title": "Wrapping event handler callback in Observable", "body": "<p>I'm trying to find a pattern for wrapping an event callback from a library to an RxJS Observable. </p>\n\n<p>The library I'm using registers handlers for events like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const someHandler = (args) =&gt; {}`;\nconst resultCallback = (result) =&gt; {}`;\n\nLibrary.addHandler('SOME_EVENT', someHandler, resultCallback);\nLibrary.removeHandler('SOME_EVENT', someHandler, resultCallback);\n</code></pre>\n\n<p>The <code>resultCallback</code> is a callback that returns if the handler was registered successfully.</p>\n\n<hr>\n\n<p>Ideally, I would like to pass the handler in as a parameter of the function, and emit it's result.</p>\n\n<p>I don't know how I can emit the value of the handler from this function, while also maintaining an object reference to the handler for removal.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>addEventHandlerObservable&lt;T&gt;(handler: any): Observable&lt;T&gt; {\n\n    return new Observale(observer =&gt; {\n\n        SomeLibrary.addHandler('SOME_EVENT', handler,\n        (result) =&gt; { \n            // was registered successfully?\n            if(result.failed) {\n                observer.error();\n                observer.complete();\n            }\n        });\n\n    });\n\n}\n</code></pre>\n"}, {"tags": ["typescript", "types", "union-types"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 3, "creation_date": 1564515353, "post_id": 57278853, "comment_id": 101054374, "body": "In short, no... TypeScript&#39;s type system is erased when transpiled and has no runtime effects.  You can do the opposite, however... start with an array like <code>const modes = [&quot;auto&quot;, &quot;manual&quot;] as const;</code> and then derive the type from it <code>type Mode = (typeof modes)[number]</code>"}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1564515726, "post_id": 57278853, "comment_id": 101054564, "body": "You could also just use a string enum, which creates both types and values: <code>enum Mode { auto = &quot;auto&quot;, manual = &quot;manual&quot; }</code> -- this isn&#39;t quite the same thing as what you&#39;re asking for (frustratingly string enums are not exactly the same thing as literal type unions with values) but arguably it&#39;s the intended solution to your problem"}], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1564515246, "answer_count": 0, "score": 0, "last_activity_date": 1564515101, "creation_date": 1564515101, "question_id": 57278853, "link": "https://stackoverflow.com/questions/57278853/convert-union-type-to-list-of-those-types-as-literals", "closed_reason": "Duplicate", "title": "Convert union type to list of those types as literals", "body": "<p>If I have a Typescript type like</p>\n\n<pre><code>type Mode = 'auto'|'manual';\n</code></pre>\n\n<p>Can I recover the list of them? Like</p>\n\n<pre><code>const modes: Mode[] = /*all the Modes */\n</code></pre>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "renderer"], "comments": [{"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "edited": false, "score": 0, "creation_date": 1564514981, "post_id": 57278780, "comment_id": 101054223, "body": "its not about css, it&#39;s styleList which will tell what text to replace with"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515303, "post_id": 57278780, "comment_id": 101054353, "body": "The problem in your code is that you are replacing the text where event a &quot;href&quot; matches your RegExp. Try to change to <code>&#39;&gt;www.url.com&lt;&#39;</code> and <code>&#39;&gt;&lt;i&gt;World&lt;&#47;i&gt;&lt;&#39;</code> and this will work. Also you can match space characters if there is any to still work with that. Also I don&#39;t think that it&#39;s a good idea to change an HTML like you are doing. 1) Using a renderer doesn&#39;t make any sence in here. 2) If you need to transform the showing value you can create a pipe that will process a value and match a text using map (obect with key-value pairs)"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515478, "post_id": 57278780, "comment_id": 101054435, "body": "Why the <code>href</code> is being replaced but not the text you can read here <a href=\"https://www.w3schools.com/jsref/jsref_replace.asp\" rel=\"nofollow noreferrer\">w3schools.com/jsref/jsref_replace.asp</a> in note"}, {"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515488, "post_id": 57278780, "comment_id": 101054439, "body": "How can I do only for <code>anchor</code> ?"}, {"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515608, "post_id": 57278780, "comment_id": 101054494, "body": "@Sergey I Agree, but this is the way. My design is very complex."}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515619, "post_id": 57278780, "comment_id": 101054500, "body": "If you mean by &quot;do only for anchor&quot; pipe usage is simply put between tags <code>{{ anchorText | transformingPipe:map }}</code>. Read more about pipes you can on angular.io."}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515679, "post_id": 57278780, "comment_id": 101054536, "body": "1) Why have you chosen to use a renderer? 2) The complex design is bad (the very complex is even worse). You will want to make your design as simple as possible, because it makes it easier to maintain and find the errrors"}, {"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515782, "post_id": 57278780, "comment_id": 101054587, "body": "If is a complex app, it as many history behind it. is der any way to do it in this function <code>styleList.forEach(styleItem =&gt; {</code>"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564515846, "post_id": 57278780, "comment_id": 101054611, "body": "Use native JS without renderer. I suggest using .innerText. It looks more appropriate"}, {"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564516923, "post_id": 57278780, "comment_id": 101055033, "body": ".innerText is not working, in case if need to replace <code>world</code> with <code>&lt;i&gt;world&lt;&#47;i&gt;</code> then it displays everything as text"}, {"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564516971, "post_id": 57278780, "comment_id": 101055051, "body": "is der any way to exclude <code>&lt;a href&gt;</code> while replacing ?"}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 1, "creation_date": 1564517467, "post_id": 57278780, "comment_id": 101055234, "body": "your design is the problem here.  You need to rearchitect"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1564517941, "post_id": 57278780, "comment_id": 101055431, "body": "<a href=\"https://stackblitz.com/edit/angular-1blll5?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-1blll5?file=src/app/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "edited": false, "score": 0, "creation_date": 1564519065, "post_id": 57279553, "comment_id": 101055812, "body": "&#39;&lt;$1&gt;&#39; instead I used &#39;&lt;$open&gt;&#39;, why it didn&#39;t work ?"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "reply_to_user": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "edited": false, "score": 0, "creation_date": 1564550074, "post_id": 57279553, "comment_id": 101062483, "body": "@user007 I guess you can find out it here <a href=\"https://2ality.com/2017/05/regexp-named-capture-groups.html\" rel=\"nofollow noreferrer\">2ality.com/2017/05/regexp-named-capture-groups.html</a>"}], "tags": [], "owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "is_accepted": true, "score": 0, "last_activity_date": 1564518435, "creation_date": 1564518435, "answer_id": 57279553, "question_id": 57278780, "link": "https://stackoverflow.com/questions/57278780/unable-to-modify-innerhtml-for-anchor-element/57279553#57279553", "title": "Unable to modify innerHTML for anchor element", "body": "<p>Here is what I've achieved\n<a href=\"https://stackblitz.com/edit/angular-mdhle9?file=src/app/style.service.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-mdhle9?file=src/app/style.service.ts</a></p>\n\n<p>The main thing I did is changed your service to use RegExp groups</p>\n\n<pre><code>for (const childNode of childNodes) {\n   const regex = new RegExp('&lt;(.*)&gt;' + styleItem.ori + '&lt;(.*)&gt;')\n\n   renderer.setProperty(childNode, 'innerHTML', childNode.innerHTML.replace(regex, '&lt;$1&gt;' + styleItem.replace + '&lt;$2&gt;'));\n}\n</code></pre>\n\n<p>Here I create two matching groups which will copy the innner of HTML opening and closing tag.</p>\n\n<p>And then I simply return these groups(tags inner) back to <code>&lt; &gt;</code> and place the value between them.</p>\n"}], "owner": {"reputation": 169, "user_id": 11537272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-spgk5kzBfzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resAubbUhQb_fcCEqQREATzcfXUSA/mo/photo.jpg?sz=128", "display_name": "user007", "link": "https://stackoverflow.com/users/11537272/user007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 57279553, "answer_count": 1, "score": 0, "last_activity_date": 1564518971, "creation_date": 1564514705, "last_edit_date": 1564518971, "question_id": 57278780, "link": "https://stackoverflow.com/questions/57278780/unable-to-modify-innerhtml-for-anchor-element", "title": "Unable to modify innerHTML for anchor element", "body": "<p>I'm trying to add some styles by DOM manipulation using angular renderer2.</p>\n\n<p>I could updated styles for all html elements expect for <code>anchor</code>.</p>\n\n<p>In the below e.g, I'm trying to replace this text <code>www.url.com</code> with this <code>World</code> to an anchor link.</p>\n\n<p>Note: Only trying to change the text, not the <code>href</code></p>\n\n<pre><code>  styleList = [\n    {\n      ori: 'www.url.com',\n      replace: 'World'\n    }\n  ];\n</code></pre>\n\n<p>When I inspect <code>&lt;a href=\"wWorld\"&gt;www.url.com&lt;/a&gt;</code>, <code>replace</code> text is getting added to the <code>href</code>.</p>\n\n<p>So expected output should be <code>&lt;a href=\"wwww.url.com\"&gt;World&lt;/a&gt;</code></p>\n\n<p>Why this is happening only to <code>anchor</code> tag ? </p>\n\n<p>Below is the function, which will update the DOM</p>\n\n<pre><code>styleList.forEach(styleItem =&gt; {\n  for (const childNode of childNodes) {\n    renderer.setProperty(childNode, 'innerHTML', childNode.innerHTML.replace(styleItem.ori, styleItem.replace));\n  }\n});\n</code></pre>\n\n<p>You can check this <a href=\"https://stackblitz.com/edit/angular-qxidnp?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">stackblitz</a> link for reference. </p>\n\n<p>Please help.</p>\n"}, {"tags": ["typescript", "properties", "predicate", "extraction", "arrow-functions"], "answers": [{"comments": [{"owner": {"reputation": 2039, "user_id": 3700119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQmyA.jpg?s=128&g=1", "display_name": "Sigex", "link": "https://stackoverflow.com/users/3700119/sigex"}, "edited": false, "score": 0, "creation_date": 1564668714, "post_id": 57279651, "comment_id": 101114217, "body": "Yes, I see how what I want to have can do much more than just equality. Which is all the orm can support with that function. So I will abandon this approach."}], "tags": [], "owner": {"reputation": 11, "user_id": 9430103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76161ce281a01290a9e675285de2e104?s=128&d=identicon&r=PG&f=1", "display_name": "A. Bronca", "link": "https://stackoverflow.com/users/9430103/a-bronca"}, "is_accepted": false, "score": 0, "last_activity_date": 1564518910, "creation_date": 1564518910, "answer_id": 57279651, "question_id": 57278689, "link": "https://stackoverflow.com/questions/57278689/javascript-extract-subject-propertyies-and-values-from-predicate-to-form-obj/57279651#57279651", "title": "Javascript extract subject property(ies) and value(s) from predicate to form object", "body": "<p>If you want to do something more complex than checking equality of columns (or other search functionality provided by your underlying database), you could get all the rows from the table and perform an array search, keeping in mind the fact that this query will not be optimized by your database.</p>\n"}], "owner": {"reputation": 2039, "user_id": 3700119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQmyA.jpg?s=128&g=1", "display_name": "Sigex", "link": "https://stackoverflow.com/users/3700119/sigex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564518910, "creation_date": 1564514349, "question_id": 57278689, "link": "https://stackoverflow.com/questions/57278689/javascript-extract-subject-propertyies-and-values-from-predicate-to-form-obj", "title": "Javascript extract subject property(ies) and value(s) from predicate to form object", "body": "<p>Given a function <code>findOneOrFail</code>;</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>/**\n * Finds first entity that matches given options.\n */\nfindOneOrFail(options?: FindOneOptions&lt;Entity&gt;): Promise&lt;Entity&gt;;\n</code></pre>\n\n<p>Used like;</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const email = \"bob@bob.com\";\nconst user: User = await this.userRepo.findOneOrFail({ email: email });\n</code></pre>\n\n<p>This will return first result that matches the condition that the email equals \"bob@bob.com\".</p>\n\n<p>I am attempting to extend <code>findOneOrFail</code> by creating a new function <code>getUserBy</code> which I can use like this;</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const email = \"bob@bob.com\";\nconst user: User = await this.userRepo.getUserBy(u =&gt; u.email === email);\n</code></pre>\n\n<p>Is this possible? I need to extract the property and value from the predicate.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>public async getUserBy(predicate: (u: User) =&gt; void): Promise&lt;User&gt; {\n    let user: User;\n    try {\n        const condition = {}; // Some how use the predicate to \n        // extract the condition { propety: \"value\" }\n        user = await this._userOrm.findOneOrFail(condition);\n    } catch (error) {\n        if (error instanceof EntityNotFoundError) {\n            return null;\n        }\n        throw error;\n    }\n    return user;\n}\n</code></pre>\n\n<p>Please note the <code>FindOneOptions&lt;T&gt;</code> interface is defined <a href=\"https://github.com/typeorm/typeorm/blob/master/src/find-options/FindOneOptions.ts\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 8859013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3La1AyvVqko/AAAAAAAAAAI/AAAAAAAAADg/PgLOcq8ObKs/photo.jpg?sz=128", "display_name": "Nathan Smith", "link": "https://stackoverflow.com/users/8859013/nathan-smith"}, "edited": false, "score": 0, "creation_date": 1564516590, "post_id": 57278541, "comment_id": 101054909, "body": "This handles 95% of cases, but it&#39;s <i>theoretically</i> possible that the forwarded ref is <i>also</i> a callback ref. I guess in that case I could do <code>if (forwardedRef &amp;&amp; typeof(forwardedRef) === &quot;function&quot;) forwardedRef(inputElement)</code>?"}, {"owner": {"reputation": 137, "user_id": 8859013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3La1AyvVqko/AAAAAAAAAAI/AAAAAAAAADg/PgLOcq8ObKs/photo.jpg?sz=128", "display_name": "Nathan Smith", "link": "https://stackoverflow.com/users/8859013/nathan-smith"}, "edited": false, "score": 1, "creation_date": 1564516691, "post_id": 57278541, "comment_id": 101054939, "body": "However, I also have this issue with it: &quot;Cannot assign to &#39;current&#39; because it is a read-only property.&quot;"}, {"owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "reply_to_user": {"reputation": 137, "user_id": 8859013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3La1AyvVqko/AAAAAAAAAAI/AAAAAAAAADg/PgLOcq8ObKs/photo.jpg?sz=128", "display_name": "Nathan Smith", "link": "https://stackoverflow.com/users/8859013/nathan-smith"}, "edited": false, "score": 0, "creation_date": 1564517501, "post_id": 57278541, "comment_id": 101055244, "body": "Ah right, I forgot about that. Yes indeed, I don&#39;t see a way around that. React must do something similar since they accept refs and callback refs. Editing the answer for completeness.  About TypeScript complaining, I never used TypeScript, but there seems to be 2 object types for refs: This issue explains it well <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/issues/31065\" rel=\"nofollow noreferrer\">github.com/DefinitelyTyped/DefinitelyTyped/issues/31065</a> You might want to use the non readonly version."}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1564517638, "last_edit_date": 1564517638, "creation_date": 1564513712, "answer_id": 57278541, "question_id": 57278120, "link": "https://stackoverflow.com/questions/57278120/using-react-callback-ref-with-forwarded-ref/57278541#57278541", "title": "Using react callback ref with forwarded ref", "body": "<p>You can do anything you want with the forwarded ref, including setting its current value:</p>\n\n<pre><code>const Checkbox = React.forwardRef(({ checked = false, indeterminate, ...rest }, forwardedRef) =&gt; (\n  &lt;input\n    type=\"checkbox\"\n    checked={checked}\n    ref={(inputElement) =&gt; {\n      if (inputElement) {\n        inputElement.indeterminate = !checked &amp;&amp; indeterminate\n      }\n\n      if (forwardedRef) {\n        if(typeof(forwardedRef) !== \"function\") {\n          forwardedRef(inputElement)\n      } else {\n        forwardedRef.current = inputElement\n      }\n    }\n    {...rest}\n  /&gt;\n))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1493, "user_id": 4377932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f9nFx.jpg?s=128&g=1", "display_name": "artcorpse", "link": "https://stackoverflow.com/users/4377932/artcorpse"}, "is_accepted": false, "score": 3, "last_activity_date": 1580208642, "creation_date": 1580208642, "answer_id": 59947075, "question_id": 57278120, "link": "https://stackoverflow.com/questions/57278120/using-react-callback-ref-with-forwarded-ref/59947075#59947075", "title": "Using react callback ref with forwarded ref", "body": "<p>The <code>useImperativeHandle</code> hook does almost exactly the same as your second example. The assignment of <code>ref.current</code> to <code>inRef</code> is then handled internally by React, and you don't have to break the contract by changing the readonly property.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const Checkbox = React.forwardRef&lt;HTMLInputElement, ICheckboxProps&gt;((props, inRef) =&gt; {\n  const { checked = false, indeterminate, ...rest } = props;\n\n  const ref = useRef&lt;HTMLInputElement&gt;(null)\n  useImperativeHandle(inRef, () =&gt; ref.current!, [ref])\n\n  return (\n    &lt;input\n      type=\"checkbox\"\n      checked={checked}\n      ref={ref}\n      {...rest}\n    /&gt;\n  )\n})\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?jsx=2&amp;ssl=22&amp;ssc=3&amp;pln=8&amp;pc=1#code/JYWwDg9gTgLgBAJQKYEMDGMA0cDeBXAZyWQDNtCkBJcJKFGYANyQAkUA7AEwBskBfOCSgQQcAERRUGMQCgZSAB6RYcGAE8wSOJQDCACyRoA1gCMICgArCwBOAF5cMuHDQHjSTgH4AXHDMReDic4YC4kGFoQUPokHz8IANR2GQEAMkQpGAA6SnYwPBgWABUAWQAZAEEYGChgEwKkAgAeYvLc-JgAUV4QJHYYAD45RWV4NAh2Anh9Q1Nzewz0bJJoAHcUKE5SFtKy9oLupF7%207F03OctrAgGAChuwK%20xQ0gBKewHHZ3HJ%20BwXc48CxIKG4RCeYQiUCi7Bi2Cy8MkUzgAgcDwgNgA3HIvhMkZISAsKNtWns8gcen1Bjd2HhuNwXsEKNRNHQGMw2FxeDdnkgyHAbm87B98Vk0HgoJJ%20gBCBnBSQwcXsfnBZxNUIdFXOVQaJB2MSuWZmBSyLVag3uTh2HDmowePia5z4q34%202m5w4eFZREwV1agD0Q2cDL4LyAA\" rel=\"nofollow noreferrer\">In typescript playground</a></p>\n\n<p>I would like to make a comment on the non-null assertion on <code>ref.current</code>. As far as I can tell, refs for children are resolved before refs for parents, but the only related statement in the documentation I could find is calling <code>inputRef.current.focus()</code> without a null guard in the <a href=\"https://reactjs.org/docs/hooks-reference.html#useimperativehandle\" rel=\"nofollow noreferrer\">documentation of <code>useImperativeHandle</code></a></p>\n"}], "owner": {"reputation": 137, "user_id": 8859013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3La1AyvVqko/AAAAAAAAAAI/AAAAAAAAADg/PgLOcq8ObKs/photo.jpg?sz=128", "display_name": "Nathan Smith", "link": "https://stackoverflow.com/users/8859013/nathan-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1580208642, "creation_date": 1564511868, "last_edit_date": 1564518610, "question_id": 57278120, "link": "https://stackoverflow.com/questions/57278120/using-react-callback-ref-with-forwarded-ref", "title": "Using react callback ref with forwarded ref", "body": "<p>I have a Checkbox react component that has to support the indeterminate state, but I'm updating our components to forward refs properly. The checkbox component already uses a callback ref internally to set the indeterminate property. Here's the original component (simplified):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type ICheckboxProps = {\n  checked?: boolean\n  indeterminate?: boolean\n} &amp; React.InputHTMLAttributes&lt;HTMLInputElement&gt;\n\nexport const Checkbox: React.FC&lt;ICheckboxProps&gt; = props =&gt; {\n  const { checked = false, ...rest } = props;\n  return (\n    &lt;input\n      type=\"checkbox\"\n      checked={checked}\n      ref={ref =&gt; {\n        if (ref) {\n          ref.indeterminate = !checked ? indeterminate! : false;\n        }\n      }}\n      {...rest}\n    /&gt;\n  )\n}\n</code></pre>\n\n<p>Now, since this is a UI library, I'm trying to forward a ref as well. But that clashes with the callback ref - now I have two separate refs. Additionally, the <em>forwarded</em> ref could be a callback ref. So I can't even access the instance there to set the indeterminate property. I've tried a bunch of stuff, but no matter what I do typescript's helpful red underlines tell me that I'm wrong.</p>\n\n<p>How do I both apply the forwarded ref to the input and set the indeterminate property on the input?</p>\n\n<p>Here's it most of the way but there's an issue noted:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type ICheckboxProps = {\n  checked?: boolean\n  indeterminate?: boolean\n} &amp; React.InputHTMLAttributes&lt;HTMLInputElement&gt;\n\nexport const Checkbox = React.forwardRef&lt;HTMLInputElement, ICheckboxProps&gt;((props, inRef) =&gt; {\n  const { checked = false, ...rest } = props;\n  return (\n    &lt;input\n      type=\"checkbox\"\n      checked={checked}\n      ref={ref =&gt; {\n        if (ref) {\n          ref.indeterminate = !checked ? indeterminate! : false;\n          if (inRef) {\n            if (typeof inRef === \"function\") {\n              inRef(ref)\n            } else {\n              inRef.current = ref // Cannot assign to 'current' because it is a read-only property.\n            }\n          }\n        }\n      }}\n      {...rest}\n    /&gt;\n  )\n})\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "jestjs", "material-ui", "enzyme"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1564511778, "post_id": 57277993, "comment_id": 101052814, "body": "That&#39;s an internal implementation detail; it&#39;s not accessible from outside, and that&#39;s a good thing. Make sure that the resulting value is what it ought to be."}, {"owner": {"reputation": 49, "user_id": 7397504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cbd2d6ac39b030a1a47ace193de323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightshade", "link": "https://stackoverflow.com/users/7397504/nightshade"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1564512148, "post_id": 57277993, "comment_id": 101052972, "body": "Do I not use wrapper.instance() to call restrictMaxLength? What would be the correct way to do so? Thanks!"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1564512191, "post_id": 57277993, "comment_id": 101052988, "body": "No, because it&#39;s not a property of the instance. Simulating input should trigger the function."}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1564512207, "post_id": 57277993, "comment_id": 101052998, "body": "You wouldn&#39;t test that function directly. You would instead validate the end result, perhaps in this case that <code>value</code> is what you expect after an input event has been simulated. Test the end result of the input event in terms of changes to props/state/attributes/etc. Otherwise move the function to a different file where it&#39;s exported, which would allow you to import/use in the component as well as test individually."}, {"owner": {"reputation": 49, "user_id": 7397504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cbd2d6ac39b030a1a47ace193de323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightshade", "link": "https://stackoverflow.com/users/7397504/nightshade"}, "edited": false, "score": 0, "creation_date": 1564512472, "post_id": 57277993, "comment_id": 101053128, "body": "Ok I see. However, wrapper.props().value is undefined when I use it, would that be how I test the end result?"}, {"owner": {"reputation": 49, "user_id": 7397504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cbd2d6ac39b030a1a47ace193de323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightshade", "link": "https://stackoverflow.com/users/7397504/nightshade"}, "edited": false, "score": 0, "creation_date": 1564592276, "post_id": 57277993, "comment_id": 101085572, "body": "How would I actually validate the end result because simulate does not actually go through onInput and call restrictMaxLength? So getDOMNode().getAttribute(&#39;value&#39;) would just be exactly what value I gave simulate."}], "owner": {"reputation": 49, "user_id": 7397504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cbd2d6ac39b030a1a47ace193de323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightshade", "link": "https://stackoverflow.com/users/7397504/nightshade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564513163, "creation_date": 1564511297, "last_edit_date": 1564513163, "question_id": 57277993, "link": "https://stackoverflow.com/questions/57277993/how-do-you-use-jest-to-test-a-function-inside-react-component", "title": "How do you use jest to test a function inside React component?", "body": "<p>How do I test restrictMaxLength in my textfield component? It is called onInput and I want to check that it is returning the correct values. How can I call restrictMaxLength in my jest test?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export default function StoreIDTextField(props: any) {\r\n  const { onValueChanged } = props;\r\n  // @ts-ignore\r\n  const classes:any = useStyles();\r\n  const [values, setValues] = React.useState&lt;State&gt;({\r\n    name: 'Cat in the Hat',\r\n    age: null,\r\n  });\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const handleChange = (name: keyof State) =&gt; (event: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {\r\n    setValues({ ...values, [name]: event.target.value });\r\n    onValueChanged(event.target.value);\r\n  };\r\n\r\n  function restrictMaxLength(e: any) {\r\n    return Math.max(0, parseInt((e.target as HTMLInputElement).value)).toString().slice(0, 3);\r\n  }\r\n\r\n  return (\r\n    &lt;form className={classes.container} noValidate autoComplete=\"off\"&gt;\r\n      &lt;TextField\r\n        type=\"number\"\r\n        onInput={(e) =&gt; {\r\n          // restricts maxLength of store number to 3 digits\r\n          // eslint-disable-next-line max-len,radix\r\n          (e.target as HTMLInputElement).value = restrictMaxLength(e);\r\n        }}\r\n        required\r\n        id=\"outlined-number\"\r\n        onChange={handleChange('age')}\r\n        value={values.age}\r\n        label=\"Store ID\"\r\n        defaultValue=\"\"\r\n        className={classes.textField}\r\n      /&gt;\r\n    &lt;/form&gt;\r\n  );\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><a href=\"https://i.stack.imgur.com/1h2nw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1h2nw.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1564511211, "post_id": 57277917, "comment_id": 101052498, "body": "Where are you getting this error?"}, {"owner": {"reputation": 55, "user_id": 6854401, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6204c8766478cce4e6f87f6222c3aaa?s=128&d=identicon&r=PG&f=1", "display_name": "Hoss", "link": "https://stackoverflow.com/users/6854401/hoss"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1564511289, "post_id": 57277917, "comment_id": 101052541, "body": "ERROR in src/app/app.component.ts(17,25): error TS2339: Property &#39;name&#39; does not exist on type &#39;{ production: boolean; apiUrl: string; auth: string; client_id: string; client_secret: string; scope: string; }&#39;."}, {"owner": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 1, "creation_date": 1564511296, "post_id": 57277917, "comment_id": 101052546, "body": "How are you importing Environemnt.prod.ts in app.component.ts?"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1564511348, "post_id": 57277917, "comment_id": 101052579, "body": "Which is line 17 now?"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1564511393, "post_id": 57277917, "comment_id": 101052609, "body": "according to your error, <code>name</code> doesn&#39;t exist on your type. So seems like a correct error ;)"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1564511455, "post_id": 57277917, "comment_id": 101052642, "body": "@AJT_82: Its does. The const <code>environment</code> does have a property <code>name</code>."}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1564511536, "post_id": 57277917, "comment_id": 101052681, "body": "Unless OP has made a typo somwhere it should work."}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1564511629, "post_id": 57277917, "comment_id": 101052737, "body": "@NicholasK Yeah, the const seems to have it... but the error refers to a type. There must be something going on that we are not seeing?"}, {"owner": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 1, "creation_date": 1564511687, "post_id": 57277917, "comment_id": 101052772, "body": "If you just want to display PRODUCTION, can you define environment as <code>environment = {..,name:&#39;PRODUCTION&#39;,... }</code> I don&#39;t see the point of &quot;&quot; and ()"}, {"owner": {"reputation": 766, "user_id": 4838893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4becb137e77ce3b2675af0a1717c4e70?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Cheng", "link": "https://stackoverflow.com/users/4838893/bill-cheng"}, "edited": false, "score": 0, "creation_date": 1564511745, "post_id": 57277917, "comment_id": 101052800, "body": "Make sure you have the same JSON structure in environment.ts as well"}, {"owner": {"reputation": 7532, "user_id": 1826354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b8892507cb6ede85be9ccb17132a6d1?s=128&d=identicon&r=PG", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/1826354/charlie-martin"}, "edited": false, "score": 0, "creation_date": 1564513224, "post_id": 57277917, "comment_id": 101053470, "body": "Change <code>import environment from ...</code> to <code>import { environment } from ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 6854401, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6204c8766478cce4e6f87f6222c3aaa?s=128&d=identicon&r=PG&f=1", "display_name": "Hoss", "link": "https://stackoverflow.com/users/6854401/hoss"}, "is_accepted": true, "score": 0, "last_activity_date": 1564683107, "creation_date": 1564683107, "answer_id": 57314787, "question_id": 57277917, "link": "https://stackoverflow.com/questions/57277917/property-name-does-not-exist-on-type/57314787#57314787", "title": "Property &#39;name&#39; does not exist on type", "body": "<p>This is working as expected.after clean the cache i rebuild it and it is working fine as expected.</p>\n"}], "owner": {"reputation": 55, "user_id": 6854401, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6204c8766478cce4e6f87f6222c3aaa?s=128&d=identicon&r=PG&f=1", "display_name": "Hoss", "link": "https://stackoverflow.com/users/6854401/hoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 57314787, "answer_count": 1, "score": 0, "last_activity_date": 1564683107, "creation_date": 1564511064, "question_id": 57277917, "link": "https://stackoverflow.com/questions/57277917/property-name-does-not-exist-on-type", "title": "Property &#39;name&#39; does not exist on type", "body": "<p>How to fix Property 'name' does not exist on type ?</p>\n\n<p>code block :</p>\n\n<pre><code>**Environemnt.prod.ts**\n\nexport const environment = {\n  production: true,\n  name:\"(Production)\",\n\n  apiUrl: 'https://test.org/getstatusboardvalue',\n  client_id: '4951-b5a3-0b4a94976aea',\n  client_secret: '7147f6b98f41',\n  scope: 'cis',\n  auth: '',\n};\n\n**app.component.ts**\n\nexport class AppComponent implements OnInit {\n\n\n  envName = environment.name;\n  public maintenanceMode: boolean = false;\n  public scaleLevel = ScaleLevel.Normal;\n\n  public get clientBoardTable(): BoardTable {\n    return this._appService.clientBoardTable;\n  }\n\n**app.component.html**\n&lt;div [ngClass]=\"{'overlay': maintenanceMode}\"&gt;&lt;/div&gt;\n&lt;div [ngClass]=\"{'smaller': scaleLevel == 1, 'smallest': scaleLevel == 2}\" class=\"main\"&gt;\n    &lt;div&gt;\n        Environemnt&lt;b style=\"color: red\" &gt;{{envName}}&lt;/b&gt;\n    &lt;/div&gt;\n  &lt;div class=\"page-contents\"&gt;\n\n\n    &lt;board-table [source]=\"clientBoardTable\"&gt;&lt;/board-table&gt;\n  &lt;/div&gt;\n  &lt;div class=\"page-footer\"&gt;Data as of: {{clientBoardTable.lastUpdatedOn | date:'medium'}}&lt;/div&gt; \n\n&lt;/div&gt;\n&lt;notification-list&gt;&lt;/notification-list&gt;\n</code></pre>\n\n<p>How to get the expected result like below\nExpected result : Environment = QA \nor\nEnvironment = PRODUCTION</p>\n"}, {"tags": ["typescript", "generics", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 721, "user_id": 2997478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/415a244181e20b030f5ee733a7eaa444?s=128&d=identicon&r=PG", "display_name": "kace91", "link": "https://stackoverflow.com/users/2997478/kace91"}, "edited": false, "score": 0, "creation_date": 1564516023, "post_id": 57278182, "comment_id": 101054670, "body": "Yup, that works perfectly! For some reason it hadn&#39;t occurred to me that it is possible to use more than one type variable. Thanks!"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 721, "user_id": 2997478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/415a244181e20b030f5ee733a7eaa444?s=128&d=identicon&r=PG", "display_name": "kace91", "link": "https://stackoverflow.com/users/2997478/kace91"}, "edited": false, "score": 0, "creation_date": 1564516274, "post_id": 57278182, "comment_id": 101054772, "body": "Conceptually you should be able to do it with a single type variable for the function type, the way you were doing it, but there are some <a href=\"https://github.com/microsoft/TypeScript/issues/31418\" rel=\"nofollow noreferrer\">limitations</a> there I&#39;d like to avoid."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1564512128, "creation_date": 1564512128, "answer_id": 57278182, "question_id": 57277784, "link": "https://stackoverflow.com/questions/57277784/typing-a-generic-wrapper-function-to-act-as-a-logger/57278182#57278182", "title": "Typing a generic wrapper function to act as a logger?", "body": "<p>I would make <code>syncLogger</code> generic both in the tuple of arguments <code>A</code> and the return type <code>R</code> of the function, like this:</p>\n\n<pre><code>const syncLogger = &lt;A extends any[], R&gt;(f: (...a: A) =&gt; R) =&gt; (\n  ...args: A\n): R =&gt; {\n  let value;\n  try {\n    value = f(...args);\n    functionLogger(\"info\", f, value, ...args); // actual logging\n  } catch (error) {\n    functionLogger(\"error\", f, error.message, ...args); //actual logging\n    throw error;\n  }\n  return value;\n};\n</code></pre>\n\n<p>This should work as you expect:</p>\n\n<pre><code>function originalFunction(x: string, y: number): boolean {\n  return (x &lt;= y.toFixed())\n}\n\nconst myLoggedFunction = syncLogger(originalFunction); // okay\n// const myLoggedFunction: (x: string, y: number) =&gt; boolean\n\nconst bool = myLoggedFunction(\"121\", 123); // info, originalFunction, true, \"121\", 123\nconsole.log(bool) // true\n</code></pre>\n\n<p>In fact, in many cases this will work even when the original function is itself generic, due to support added in TypeScript 3.4 for <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#higher-order-type-inference-from-generic-functions\" rel=\"nofollow noreferrer\">inferring higher-order function types</a>:</p>\n\n<pre><code>const loggingItself = syncLogger(syncLogger);\n// TS3.3-: \ud83d\ude22\n// const loggingItself: (...args: any[]) =&gt; (...args: any[]) =&gt; {} \n// TS3.4+: \ud83d\ude0a\n// const loggingItself: &lt;A extends any[], R&gt;(f: (...a: A) =&gt; R) =&gt; (...args: A) =&gt; R\n</code></pre>\n\n<p>Anyway, hope that helps.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/index.html#code/GYVwdgxgLglg9mABKSsEBk4HMsFMBOAFAHSkCG+WAzgFyJlgCeAlHQG5wwAmiA3gFCJEEBFTgAbXMXHYS5SlWYBufgF9+-EWCpREVRpEw4CiALyIAPAEFEuAB5RcYLlXpMA2gF0ANIgBKAHyEwHRyxGR0VsxmAf7RprGEgoik4QqR-Kz+MXzJkrpsZOIguCpCUPiMuUJChcW4ZshhFNTKyUIo0PBgRnhEAEQwYMBw-b7AvnUlvqktikqIAPSL9NAgRYgyOENYyarCZFAQABaIhAT4cPjRAjXI4F0Y2H2E-RdXY8i+7-jEALa4KhUMh4GbyVoLZZkNYbLZYHbtRBQY6XADutnwl3wZUQ6iE+FwUBA+CQU1KahU-E6aCQVxg8LARQAYg8aYQ7HQdPgdr5GHQwCA-gAjAhZIVwCS4BjVRAEokks52SzmRjEKBwJkwOy4LiEZjMNQaLQ6RB-Ri9HUs1DdRr6QzPAiEOkM5ms7rKJYrOAAazIjH4y2Eol0ZotXCtjzAoQ5egqPMQfMQAuFopy4slDCNwcQ6fEjVDDvDboQrwAjAAmUufCsAZg9gaGI18zqGrutCF8FWmiH6FarvlrWe0kukslz0UDXdwQ5NcJ2AEkoFRcOJgLaDBALUQ7ZuHdcVIGACoAZRrxBrAFo6IBeDcARHsBlbG3RzsBYRfL1ehWbpNyMLzxRJv2oOgGD-TwAL4fYH0QE8zwAFgAahvQAoPegp9NmeBclxXEJLBsexHGcVxQK8XxAmCL9yEiCC-Ag5ofyiHI-CAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 721, "user_id": 2997478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/415a244181e20b030f5ee733a7eaa444?s=128&d=identicon&r=PG", "display_name": "kace91", "link": "https://stackoverflow.com/users/2997478/kace91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57278182, "answer_count": 1, "score": 0, "last_activity_date": 1564512128, "creation_date": 1564510585, "question_id": 57277784, "link": "https://stackoverflow.com/questions/57277784/typing-a-generic-wrapper-function-to-act-as-a-logger", "title": "Typing a generic wrapper function to act as a logger?", "body": "<p>I have a generic JS function that wraps any function, in such a way that when the wrapper is called it will execute the wrapped function, log the event (input, and output of the function) and then return the output, resulting in \"transparent\" logging. My problem is that trying to move this function to TS and conserving the type information for the wrapped function and output is proving to be a little complex.</p>\n\n<p>Here's where I'm at currently:</p>\n\n<pre><code>const syncLogger = &lt;T&gt;(f: T) =&gt; (...args: unknown[]): ReturnType&lt;T&gt; =&gt; {\n  let value;\n  try {\n    value = f(...args);\n    functionLogger('info', f, value, ...args); // actual logging\n  } catch (error) {\n    functionLogger('error', f, error.message, ...args); //actual logging\n    throw error;\n  }\n  return value;\n};\n</code></pre>\n\n<p>and this is how it's supposed to be used:</p>\n\n<pre><code>const myLoggedFunction = syncLogger(originalFunction);\n</code></pre>\n\n<p>The main problem lies in <code>args</code>, the list of n arguments that I used to use as the functions' input: I see no way of letting TS know that those arguments correspond exactly with the arguments of the original function to be wrapped.</p>\n"}, {"tags": ["typescript", "default-value", "ternary"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 2, "creation_date": 1564508934, "post_id": 57277344, "comment_id": 101051484, "body": "It&#39;s not JavaScript."}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 1, "creation_date": 1564508989, "post_id": 57277344, "comment_id": 101051504, "body": "it&#39;s just saying arg is an optional argument, it&#39;s not a ternary operator"}, {"owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "reply_to_user": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1564509100, "post_id": 57277344, "comment_id": 101051542, "body": "@bryan60 so in Typescript use of the ?: together means optional?"}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 1, "creation_date": 1564509145, "post_id": 57277344, "comment_id": 101051560, "body": "putting ? after a function argument marks it as optional. the : is just the delimiter for typing the argument"}, {"owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "reply_to_user": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1564509304, "post_id": 57277344, "comment_id": 101051636, "body": "@Pointy thanks for the correction. It explains also why I could not find the reference. Too many files I have open and thought this was a js file."}, {"owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "reply_to_user": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1564509326, "post_id": 57277344, "comment_id": 101051645, "body": "@bryan60 thanks for the input. much appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 3329, "user_id": 8409922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZB5M.jpg?s=128&g=1", "display_name": "BadPiggie", "link": "https://stackoverflow.com/users/8409922/badpiggie"}, "edited": false, "score": 0, "creation_date": 1564509197, "post_id": 57277367, "comment_id": 101051584, "body": "But <code>public someFn</code> throws error declaration or <code>statement expected</code>"}], "tags": [], "owner": {"reputation": 297, "user_id": 6175465, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154139136117082/picture?type=large", "display_name": "Riley Steele Parsons", "link": "https://stackoverflow.com/users/6175465/riley-steele-parsons"}, "is_accepted": false, "score": 3, "last_activity_date": 1564508984, "creation_date": 1564508984, "answer_id": 57277367, "question_id": 57277344, "link": "https://stackoverflow.com/questions/57277344/typescript-what-is-this-ternary-format-doing-in-the-function-it-does-not-look-r/57277367#57277367", "title": "Typescript What is this ternary format doing in the function, it does not look right", "body": "<p>This is Typescript. The <code>?</code> indicates an optional variable during static type checking.</p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html#optional-properties\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/interfaces.html#optional-properties</a></p>\n\n<p>If the variable is unspecified in the function call it defaults to <code>undefined</code>.</p>\n"}], "owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564509035, "creation_date": 1564508885, "last_edit_date": 1564509035, "question_id": 57277344, "link": "https://stackoverflow.com/questions/57277344/typescript-what-is-this-ternary-format-doing-in-the-function-it-does-not-look-r", "title": "Typescript What is this ternary format doing in the function, it does not look right", "body": "<p>Typescript.\nLooking through a projects code I ran across some code written as such and I cannot track down if it is valid. If it is valid what is this doing because I don't see how what it would be defaulting to.</p>\n\n<pre><code>public someFn = function(arg ?: number): void {\n  console.log(arg);\n}\n</code></pre>\n\n<p>It is unclear what is going on with arg.\nIt is unclear what : void is doing here.</p>\n\n<p>Please explain if you can.\nThank you.</p>\n"}]