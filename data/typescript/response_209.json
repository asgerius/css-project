[{"tags": ["html", "angular", "typescript", "angular2-directives"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7873637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2569f414c2a00cf07851ca7d336d8335?s=128&d=identicon&r=PG&f=1", "display_name": "probot", "link": "https://stackoverflow.com/users/7873637/probot"}, "edited": false, "score": 0, "creation_date": 1547169202, "post_id": 54120253, "comment_id": 95109716, "body": "Brilliant. Thank you!"}], "tags": [], "owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1547088911, "last_edit_date": 1547088911, "creation_date": 1547078721, "answer_id": 54120253, "question_id": 54119868, "link": "https://stackoverflow.com/questions/54119868/i-want-to-load-a-component-inside-of-a-tag-which-also-uses-the-innerhtml-directi/54120253#54120253", "title": "I want to load a component inside of a tag which also uses the innerHTML directive", "body": "<p>You cannot have the component inside of the parent element if you also bind the <code>innerHTML</code> property. The element will contain only the HTML set by the <code>innerHTML</code> binding.</p>\n\n<p>You can achieve what you want by setting the <code>outerHTML</code> property of a child element (a sibling of the component). It can be a <code>div</code>, a <code>span</code> or another type of element; it will be replaced with the bound HTML content anyway.</p>\n\n<pre><code>&lt;ul *ngFor=\"let item of array\"&gt;\n  &lt;li&gt;\n    &lt;div [outerHTML]=\"item.listItemHtml\"&gt;&lt;/div&gt;\n    &lt;app-some-component [someInput]='item.componentInput'&gt;&lt;app-some-component&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>See <a href=\"https://stackblitz.com/edit/angular-hb5xd6\" rel=\"nofollow noreferrer\">this stackblitz</a> for a demo.</p>\n"}], "owner": {"reputation": 35, "user_id": 7873637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2569f414c2a00cf07851ca7d336d8335?s=128&d=identicon&r=PG&f=1", "display_name": "probot", "link": "https://stackoverflow.com/users/7873637/probot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54120253, "answer_count": 1, "score": 1, "last_activity_date": 1547088911, "creation_date": 1547076004, "question_id": 54119868, "link": "https://stackoverflow.com/questions/54119868/i-want-to-load-a-component-inside-of-a-tag-which-also-uses-the-innerhtml-directi", "title": "I want to load a component inside of a tag which also uses the innerHTML directive", "body": "<p>I'm trying to use the innerHTML directive as well as trying to load a component  in to that same tag.</p>\n\n<p>An example:</p>\n\n<pre><code>&lt;ul *ngFor=\"let item of array\"&gt;\n    &lt;li [innerHTML]=\"item.listItemHtml\"&gt;\n        &lt;app-some-component [someInput]='item.componentInput'&gt;&lt;app-some-component&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>so the end result should look something like this:</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;\n        &lt;span&gt;list item 1&lt;/span&gt;\n        &lt;span&gt;component input text 1&lt;/span&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n        &lt;span&gt;list item 2&lt;/span&gt;\n        &lt;span&gt;component input text 2&lt;/span&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>I'm still relatively new to angular so I'm trying to get the hang of things. If anyone could give me some insight on how I might be able to achieve this.. that would be great. </p>\n"}, {"tags": ["javascript", "angular", "typescript", "datepicker"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547074932, "post_id": 54119625, "comment_id": 95071811, "body": "Look into the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\" rel=\"nofollow noreferrer\"><code>reduce</code></a> function."}, {"owner": {"reputation": 554, "user_id": 7582211, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/FWd51.jpg?s=128&g=1", "display_name": "Guy who types fast", "link": "https://stackoverflow.com/users/7582211/guy-who-types-fast"}, "edited": false, "score": 0, "creation_date": 1547075382, "post_id": 54119625, "comment_id": 95071932, "body": "I&#39;m having a bit of an issue understanding the process, what is <code>myFilter</code> supposed to do? is it supposed to return a boolean?"}, {"owner": {"reputation": 59, "user_id": 9785476, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "KENUBBE", "link": "https://stackoverflow.com/users/9785476/kenubbe"}, "edited": false, "score": 0, "creation_date": 1547075541, "post_id": 54119625, "comment_id": 95071969, "body": "the parameter d: Date returns all dates in the whole calendar and when d is equal to  a date in the forbiddenDays array, it should return a boolean with value true and disable that date in the calendar"}, {"owner": {"reputation": 59, "user_id": 9785476, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "KENUBBE", "link": "https://stackoverflow.com/users/9785476/kenubbe"}, "edited": false, "score": 0, "creation_date": 1547075854, "post_id": 54119625, "comment_id": 95072055, "body": "I edited the post"}, {"owner": {"reputation": 59, "user_id": 9785476, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "KENUBBE", "link": "https://stackoverflow.com/users/9785476/kenubbe"}, "edited": false, "score": 0, "creation_date": 1547075998, "post_id": 54119625, "comment_id": 95072090, "body": "So basically it works great when I specify the index like [0] or [1] etc, but im not sure why it&#39;s not working with forEach() or filter()"}], "answers": [{"comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547076337, "post_id": 54119889, "comment_id": 95072166, "body": "Returning a value from <code>forEach</code> does not break out of the loop."}, {"owner": {"reputation": 554, "user_id": 7582211, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/FWd51.jpg?s=128&g=1", "display_name": "Guy who types fast", "link": "https://stackoverflow.com/users/7582211/guy-who-types-fast"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547076410, "post_id": 54119889, "comment_id": 95072190, "body": "I didn&#39;t say it does. I said it breaks the iteration, not the loop."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547076506, "post_id": 54119889, "comment_id": 95072213, "body": "And I\u2019m saying it breaks nothing. The return value goes nowhere."}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547076526, "post_id": 54119889, "comment_id": 95072217, "body": "@HereticMonkey Are you familiar with how <code>.every()</code> works?"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1547076604, "post_id": 54119889, "comment_id": 95072233, "body": "Of course, but we\u2019re discussing <code>forEach</code>. @jhpratt"}, {"owner": {"reputation": 554, "user_id": 7582211, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/FWd51.jpg?s=128&g=1", "display_name": "Guy who types fast", "link": "https://stackoverflow.com/users/7582211/guy-who-types-fast"}, "edited": false, "score": 0, "creation_date": 1547076614, "post_id": 54119889, "comment_id": 95072235, "body": "Yeah, the return value inside a forEach goes nowhere, but it still breaks the current iteration."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547076930, "post_id": 54119889, "comment_id": 95072311, "body": "Run the following: <code>[1,2,3].forEach(i =&gt; { console.log(i); return false; })</code> You&#39;ll see 1 2 3, because the iteration continues."}, {"owner": {"reputation": 554, "user_id": 7582211, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/FWd51.jpg?s=128&g=1", "display_name": "Guy who types fast", "link": "https://stackoverflow.com/users/7582211/guy-who-types-fast"}, "edited": false, "score": 0, "creation_date": 1547077058, "post_id": 54119889, "comment_id": 95072336, "body": "I see you are confusing iteration and loop. Run <code>[1,2,3].forEach(i =&gt; { console.log(i); return false;  console.log(&#39;this is never print&#39;);});</code>"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1547077830, "post_id": 54119889, "comment_id": 95072482, "body": "You&#39;re right. I was confusing the two... which makes be believe that perhaps your answer could be clearer :P"}, {"owner": {"reputation": 59, "user_id": 9785476, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "KENUBBE", "link": "https://stackoverflow.com/users/9785476/kenubbe"}, "edited": false, "score": 1, "creation_date": 1547084084, "post_id": 54119889, "comment_id": 95073817, "body": "@Guywhotypesfast that did the trick!  Cheers for the great explanation as well :)"}], "tags": [], "owner": {"reputation": 554, "user_id": 7582211, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/FWd51.jpg?s=128&g=1", "display_name": "Guy who types fast", "link": "https://stackoverflow.com/users/7582211/guy-who-types-fast"}, "is_accepted": true, "score": 2, "last_activity_date": 1547076449, "last_edit_date": 1547076449, "creation_date": 1547076161, "answer_id": 54119889, "question_id": 54119625, "link": "https://stackoverflow.com/questions/54119625/right-way-to-return-true-false-in-boolean-typescript-javascript-method/54119889#54119889", "title": "Right way to return true/false in boolean TypeScript/JavaScript method?", "body": "<p>Your function <code>myFilter</code> allways returns <code>false</code>.</p>\n\n<p>The <code>return</code> inside  <code>this.forbiddenDays.forEach()</code> only breaks out of the current iteration but doesn't cause your function to stop. You have to use <code>some</code> or <code>every</code>  instead:</p>\n\n<pre><code>public myFilter = (d: Date): boolean =&gt; {\n    return this.forbiddenDays.every(data =&gt; {\n        return data.start.getDate() !== d.getDate() // &lt;-- TRUE SHOULD CHANGE COLOR ON DAY IN CALENDAR\n    });\n}\n</code></pre>\n\n<p>this will return <code>true</code> only if all elements in the array fulfill <code>data.start.getDate() !== d.getDate()</code> and <code>false</code> otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "is_accepted": false, "score": 0, "last_activity_date": 1547079505, "creation_date": 1547079505, "answer_id": 54120347, "question_id": 54119625, "link": "https://stackoverflow.com/questions/54119625/right-way-to-return-true-false-in-boolean-typescript-javascript-method/54120347#54120347", "title": "Right way to return true/false in boolean TypeScript/JavaScript method?", "body": "<p>Your <code>myFilter</code> function always returns false. The return in the <code>forEach</code> or <code>filter</code> callback is <em>not</em> going to return the <code>myFilter</code> function. It just returns the callback you pass into it, which in this case is pretty pointless.</p>\n\n<p>What I think you want is something like this:</p>\n\n<pre><code>public myFilter = (d: Date): boolean =&gt; {\n  return this.forbiddenDays.every(forbiddenDay =&gt; {\n    return forbiddenDay.start.getDate() !== d.getDate();\n  });\n}\n</code></pre>\n\n<p>The <code>array.every()</code> method returns <code>false</code> if the callback returns <code>false</code> for any of the array elements. </p>\n\n<p>You could also write this using a <code>for..of</code> loop:</p>\n\n<pre><code>public myFilter = (d: Date): boolean =&gt; {\n  for (let forbiddenDay of this.forbiddenDays) {\n    if (forbiddenDay.start.getDate() !== d.getDate()) {\n      return true;\n    }\n  }\n  return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9785476, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "KENUBBE", "link": "https://stackoverflow.com/users/9785476/kenubbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6137, "favorite_count": 0, "accepted_answer_id": 54119889, "answer_count": 2, "score": 1, "last_activity_date": 1547105597, "creation_date": 1547074591, "last_edit_date": 1547105597, "question_id": 54119625, "link": "https://stackoverflow.com/questions/54119625/right-way-to-return-true-false-in-boolean-typescript-javascript-method", "title": "Right way to return true/false in boolean TypeScript/JavaScript method?", "body": "<p>I'm trying to disable all the dates where user already has a booked event on. \nI'm using <a href=\"https://www.npmjs.com/package/ng-pick-datetime\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/ng-pick-datetime</a> TypeScript and Angular 6. I'm more comfortable with Java but learning some Javascript on my own.</p>\n\n<p><strong>.TS</strong> </p>\n\n<pre><code>    getUserEvents() {\n    this._calendarService.getAllEvent().subscribe(res =&gt; {\n      this.allEvents = res.json();\n    });\n  }\n\n  filterForbiddenDays() {\n    this.allEvents.forEach(d =&gt; {\n      let day = {\n        'start': new Date(d.startDate.value),\n        'end': new Date(d.endDate.value)\n      };\n      this.forbiddenDays.push(day);\n    });\n  }\n\n  public myFilter = (d: Date): boolean =&gt; {\n    //return this.forbiddenDays[0].start.getDate() !== d.getDate() &amp;&amp; this.forbiddenDays[1].start.getDate() !== d.getDate() // &lt;-- THIS WORKS GREAT\n    this.forbiddenDays.filter(data =&gt; {\n      return data.start.getDate() !== d.getDate() // &lt;-- TRUE SHOULD CHANGE COLOR ON DAY IN CALENDAR\n    });\n    return false;\n  }\n</code></pre>\n\n<p>If I map the forbiddenDays array instead of forEach I can see that i'm getting true for every event in the forbiddenDays, which should change the color on theese days, in the calendar.</p>\n\n<p>But right now myFilter method results in this:\n<a href=\"https://i.stack.imgur.com/V6yRH.png\" rel=\"nofollow noreferrer\">pic of calendar</a></p>\n\n<p>What am i doing wrong? I feel like the problem is in myFilter method.</p>\n\n<p><strong>.HTML</strong></p>\n\n<pre><code>    &lt;div class=\"example-wrapper datePicker\"&gt;\n        &lt;label class=\"example-input-wrapper\" id=\"eventInputSuccess\"&gt;\n            &lt;input (click)=\"filterForbiddenDays()\" id=\"eventInputError\" placeholder=\"Click to choose date\"\n                (dateTimeInput)=\"basic.openModal()\" [(ngModel)]=\"dateTimeInput\" [owlDateTimeTrigger]=\"dt\"\n                [owlDateTimeFilter]=\"myFilter\" [owlDateTime]=\"dt\"&gt;&lt;i class=\"fa fa-calendar\" aria-hidden=\"true\"&gt;&lt;/i&gt;\n            &lt;owl-date-time #dt [pickerMode]=\"'dialog'\"&gt;&lt;/owl-date-time&gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<pre><code>return this.forbiddenDays[0].start.getDate() !== d.getDate();\n</code></pre>\n\n<p>results in : <a href=\"https://i.stack.imgur.com/TBOtT.png\" rel=\"nofollow noreferrer\">expected result but for all days in my array</a></p>\n\n<p>So basically it works great when I specify the index like [0] or [3] etc, but im not sure why it's not working with forEach() or filter()</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 3, "creation_date": 1547074592, "post_id": 54119545, "comment_id": 95071713, "body": "You have declared a class with a member method. Basically, you&#39;re telling node &quot;I want to define this class that does something, then that&#39;s it. Don&#39;t do anything else. Just exit.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 1, "last_activity_date": 1547075570, "creation_date": 1547075570, "answer_id": 54119786, "question_id": 54119545, "link": "https://stackoverflow.com/questions/54119545/unzip-files-using-typescript/54119786#54119786", "title": "unzip files using typescript", "body": "<p>As Patrick says in the comment, you're not actually running the code. You don't really need a class for this right now either. Try the following:</p>\n\n<pre><code>var unzip = require('unzip-stream');\nvar fs = require('fs-extra'); \n\nfunction unzip() {\n  return fs.createReadStream('./e2e/chrome.zip').pipe(unzip.Extract({ path: './e2e' }));\n}\n\nunzip();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23752, "user_id": 1118978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2rloq.jpg?s=128&g=1", "display_name": "Dervi\u015f Kay\u0131mba\u015f\u0131o\u011flu", "link": "https://stackoverflow.com/users/1118978/dervi%c5%9f-kay%c4%b1mba%c5%9f%c4%b1o%c4%9flu"}, "is_accepted": true, "score": 3, "last_activity_date": 1547075582, "creation_date": 1547075582, "answer_id": 54119789, "question_id": 54119545, "link": "https://stackoverflow.com/questions/54119545/unzip-files-using-typescript/54119789#54119789", "title": "unzip files using typescript", "body": "<p>you have declared your class but you did not run it.</p>\n\n<pre><code>var myInstance = new test();\nmyInstance.unzipp();\n</code></pre>\n"}], "owner": {"reputation": 794, "user_id": 5565253, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90e626123c21156d82ca4f26da204bf1?s=128&d=identicon&r=PG&f=1", "display_name": "EdXX", "link": "https://stackoverflow.com/users/5565253/edxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2352, "favorite_count": 0, "accepted_answer_id": 54119789, "answer_count": 2, "score": -2, "last_activity_date": 1547075582, "creation_date": 1547074239, "last_edit_date": 1547074573, "question_id": 54119545, "link": "https://stackoverflow.com/questions/54119545/unzip-files-using-typescript", "title": "unzip files using typescript", "body": "<p>I would like to unzip files using typescript. I have test.ts like below</p>\n\n<pre><code>var unzip = require('unzip-stream');\nvar fs = require('fs-extra'); \n\nclass test {\n  unzipp() {\n    return fs.createReadStream('./e2e/chrome.zip').pipe(unzip.Extract({ path: './e2e' }));\n  }\n}\n</code></pre>\n\n<p>But when I run </p>\n\n<pre><code>tsc test.ts\n</code></pre>\n\n<p>and then </p>\n\n<pre><code>node test.js\n</code></pre>\n\n<p>nothing happens.</p>\n\n<p>Can anyone  help with that please?</p>\n"}, {"tags": ["node.js", "typescript", "express", "loopbackjs"], "comments": [{"owner": {"reputation": 3588, "user_id": 157541, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f71466071ebc4f8f582a0bb5c3efc1bf?s=128&d=identicon&r=PG", "display_name": "sissonb", "link": "https://stackoverflow.com/users/157541/sissonb"}, "edited": false, "score": 1, "creation_date": 1547071650, "post_id": 54119043, "comment_id": 95070757, "body": "Would Middleware work? <a href=\"https://expressjs.com/en/guide/using-middleware.html\" rel=\"nofollow noreferrer\">expressjs.com/en/guide/using-middleware.html</a>"}, {"owner": {"reputation": 2913, "user_id": 4245294, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-ZTD9u96FrKU/AAAAAAAAAAI/AAAAAAAAAF0/uXngR7Vqjwg/photo.jpg?sz=128", "display_name": "Sam Malayek", "link": "https://stackoverflow.com/users/4245294/sam-malayek"}, "reply_to_user": {"reputation": 3588, "user_id": 157541, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f71466071ebc4f8f582a0bb5c3efc1bf?s=128&d=identicon&r=PG", "display_name": "sissonb", "link": "https://stackoverflow.com/users/157541/sissonb"}, "edited": false, "score": 0, "creation_date": 1547071838, "post_id": 54119043, "comment_id": 95070830, "body": "@sissonb Definitely. So, the more I read up on Express, it&#39;s just a series of request middleware chained together? So where in the chain should this <code>request_param-&gt;model_property</code> mapping occur?"}, {"owner": {"reputation": 3588, "user_id": 157541, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f71466071ebc4f8f582a0bb5c3efc1bf?s=128&d=identicon&r=PG", "display_name": "sissonb", "link": "https://stackoverflow.com/users/157541/sissonb"}, "edited": false, "score": 0, "creation_date": 1547072161, "post_id": 54119043, "comment_id": 95070951, "body": "Yep, it&#39;s just a chain of functions. Makes sure to call <code>next()</code> at the end of the middleware function and that the middleware is added before the controllers."}], "answers": [{"tags": [], "owner": {"reputation": 790, "user_id": 6273042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J4-lFIpZWcA/AAAAAAAAAAI/AAAAAAAABo4/o2B_lk7gXWE/photo.jpg?sz=128", "display_name": "Ionut Achim", "link": "https://stackoverflow.com/users/6273042/ionut-achim"}, "is_accepted": false, "score": 1, "last_activity_date": 1547125600, "creation_date": 1547125600, "answer_id": 54129393, "question_id": 54119043, "link": "https://stackoverflow.com/questions/54119043/map-request-object-parameters-keys-to-custom-keys-before-request-object-hits-con/54129393#54129393", "title": "Map request object parameters keys to custom keys before request object hits controller", "body": "<p>If you're looking transform param keys to camelcase - try <a href=\"https://github.com/monojack/ccqp\" rel=\"nofollow noreferrer\">ccqp</a> express middleware.</p>\n"}], "owner": {"reputation": 2913, "user_id": 4245294, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-ZTD9u96FrKU/AAAAAAAAAAI/AAAAAAAAAF0/uXngR7Vqjwg/photo.jpg?sz=128", "display_name": "Sam Malayek", "link": "https://stackoverflow.com/users/4245294/sam-malayek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1547157690, "creation_date": 1547071381, "last_edit_date": 1547157690, "question_id": 54119043, "link": "https://stackoverflow.com/questions/54119043/map-request-object-parameters-keys-to-custom-keys-before-request-object-hits-con", "title": "Map request object parameters keys to custom keys before request object hits controller", "body": "<p>I've got a Loopback 4 application and the request object's property keys are <code>snake_case</code> and they map to our DB column names which are <code>StudlyCase</code>. Let's say I want the application property names to be <code>camelCase</code>. So the data's keys will go through the following lifecycle:</p>\n\n<pre><code>Request Parameter (snake_case)\n        ||\n        \\/\nModel Property (camelCase)\n        ||\n        \\/\nMySQL Column (StudlyCase)\n</code></pre>\n\n<p>Loopback 4 takes care of the mapping between Model Property and MySQL Column. It has decorators that allow me to specify the DB column name associated to a Model Property while using the same property keys as the request object, like:</p>\n\n<pre><code>@property({\n  mysql: {\n    columnName: 'FirstName',\n  },\n  type: 'string',\n  required: true,\n})\nfirst_name: string;\n</code></pre>\n\n<p>I'm looking for an Express package or another simple way to apply custom mapping of the keys in request objects before they reach the controller, rather than at the data model layer, as Loopback's decorators allow.</p>\n\n<p>Laravel has exactly what I'm looking for. They call it the <code>Eloquent API Resource</code> layer. It's just an array of mappings, like:</p>\n\n<pre><code>[\n  'first_name' =&gt; 'firstName',\n  'last_name' =&gt; 'lastName',\n  ... more mappings ...\n]\n</code></pre>\n\n<p>But the point is that <strong>this mapping occurs before even the controller receives the request object</strong>.</p>\n\n<p>How can this be accomplished in Loopback 4 / Express / NodeJS?</p>\n\n<p><strong>UPDATE:</strong>\nIt looks like Loopback 4 wraps Express in its <code>@loopback/rest</code> package's Sequence APIs. I'll post another update once I've got this fully figured out, as well as the answer.</p>\n\n<p>Something I forgot to mention is that the Response object's property keys also needs to be the same case as the Request object's property keys (<code>snake_case</code> in my case). I'll post a TypeScript/LB4 solution.</p>\n"}, {"tags": ["node.js", "typescript", "socket.io", "angular5"], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 6162065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5BKK.jpg?s=128&g=1", "display_name": "Cabrra", "link": "https://stackoverflow.com/users/6162065/cabrra"}, "edited": false, "score": 0, "creation_date": 1547146338, "post_id": 54122016, "comment_id": 95101776, "body": "This is excellent solution and the one who fits my problem. However, as a side note, my team (after a long discussion) decided to put the socket.io server in the same port as the app server."}, {"owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "reply_to_user": {"reputation": 634, "user_id": 6162065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5BKK.jpg?s=128&g=1", "display_name": "Cabrra", "link": "https://stackoverflow.com/users/6162065/cabrra"}, "edited": false, "score": 1, "creation_date": 1547157514, "post_id": 54122016, "comment_id": 95106512, "body": "@Cabrra - Yes, putting it on the same port is the easiest for the client."}, {"owner": {"reputation": 489, "user_id": 1885795, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/50f6082063457adf6046e0912c23664e?s=128&d=identicon&r=PG", "display_name": "Vinoth Kumar", "link": "https://stackoverflow.com/users/1885795/vinoth-kumar"}, "edited": false, "score": 0, "creation_date": 1584603779, "post_id": 54122016, "comment_id": 107488265, "body": "I&#39;m in same situation now, I need some more clarification on this. How to get const socketConfig: SocketIoConfig = { url: serverURL, options: {} }; serverURL from my API. Is this possible to call service and get url and port from my php server"}, {"owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "reply_to_user": {"reputation": 489, "user_id": 1885795, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/50f6082063457adf6046e0912c23664e?s=128&d=identicon&r=PG", "display_name": "Vinoth Kumar", "link": "https://stackoverflow.com/users/1885795/vinoth-kumar"}, "edited": false, "score": 0, "creation_date": 1584605074, "post_id": 54122016, "comment_id": 107488672, "body": "@VinothKumar - Please read the first paragraph of the answer above.  It applies to your situation too."}, {"owner": {"reputation": 489, "user_id": 1885795, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/50f6082063457adf6046e0912c23664e?s=128&d=identicon&r=PG", "display_name": "Vinoth Kumar", "link": "https://stackoverflow.com/users/1885795/vinoth-kumar"}, "edited": false, "score": 0, "creation_date": 1584605745, "post_id": 54122016, "comment_id": 107488903, "body": "Yes I have read this paragraph, I have the code in ionic 3, For this only struggling where to add this script tag in this. Do you have any idea on this where I have to update the script tag code in ionic3?"}, {"owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "reply_to_user": {"reputation": 489, "user_id": 1885795, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/50f6082063457adf6046e0912c23664e?s=128&d=identicon&r=PG", "display_name": "Vinoth Kumar", "link": "https://stackoverflow.com/users/1885795/vinoth-kumar"}, "edited": false, "score": 1, "creation_date": 1584606163, "post_id": 54122016, "comment_id": 107489028, "body": "@VinothKumar - If you need more help that this answer offers, I&#39;d suggest you post your own question with your actual code and tag it appropriately to attract people that know your environment.  I don&#39;t know anything about ionic3 so this question isn&#39;t a good place to get help."}, {"owner": {"reputation": 489, "user_id": 1885795, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/50f6082063457adf6046e0912c23664e?s=128&d=identicon&r=PG", "display_name": "Vinoth Kumar", "link": "https://stackoverflow.com/users/1885795/vinoth-kumar"}, "edited": false, "score": 0, "creation_date": 1584606315, "post_id": 54122016, "comment_id": 107489068, "body": "Okay thanks for your response, will update as a new question"}], "tags": [], "owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 1, "last_activity_date": 1547094947, "creation_date": 1547094947, "answer_id": 54122016, "question_id": 54118891, "link": "https://stackoverflow.com/questions/54118891/socket-io-dynamic-initialization/54122016#54122016", "title": "Socket-io dynamic initialization", "body": "<p>For the client to dynamically get the socket.io config information from the server, you have to either include the config information in Javascript variables in a <code>&lt;script&gt;</code> tag in the HTML file that the client is running from OR you have to have a known URL that the client can send an Ajax call to request the socket.io config info.</p>\n\n<p>The first could be part of a server-side template system that includes a script tag that defines a Javascript object containing socket.io config info in every page on the site so the socket.io config info is always available.  That server-side template system could get the data from your one central place in the server.</p>\n\n<p>The second could just set up an Ajax reachable route at a known URL that the client can fetch the config info as needed.  This is probably slower than the first option because it involves a separate round-trip to the server, but is perhaps less of an imposition on the site architecture because it doesn't have to affection generation of HTML files on the site, it's just Javascript that goes with your socket.io initialization code.  On the server, it's just an additional route to add that's independent of everything else.</p>\n"}], "owner": {"reputation": 634, "user_id": 6162065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5BKK.jpg?s=128&g=1", "display_name": "Cabrra", "link": "https://stackoverflow.com/users/6162065/cabrra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 54122016, "answer_count": 1, "score": 1, "last_activity_date": 1547094947, "creation_date": 1547070644, "last_edit_date": 1547077327, "question_id": 54118891, "link": "https://stackoverflow.com/questions/54118891/socket-io-dynamic-initialization", "title": "Socket-io dynamic initialization", "body": "<h2>Problem statement</h2>\n\n<p>After implementing socket.io on my Angular app I was curious to learn if I could dynamically set-up the \"SocketIoModule\" on the client (FrontEnd) app.module file.</p>\n\n<p>I would like load the URL and port from the server (Back-end) config file following the description of the <a href=\"https://www.npmjs.com/package/ngx-socket-io\" rel=\"nofollow noreferrer\">npm package</a> </p>\n\n<pre><code>import { SocketIoModule, SocketIoConfig } from 'ngx-socket-io';\nimport { SocketService } from './services/socket.service';\nconst socketConfig: SocketIoConfig = { url: 'http://localhost:3000', options: {} };\n\n@NgModule({\n\n[..]\n\nimports: [\n    BrowserModule,\n    SocketIoModule.forRoot(socketConfig)\n  ],\nproviders: [\n  // all other providers\n  &lt;SocketProvider&gt;\n]\n\n[..]\n</code></pre>\n\n<p>//package.json </p>\n\n<pre><code>   \"ngx-socket-io\": \"^2.1.1\",\n   \"socket.io\": \"^2.2.0\",\n   \"socket.io-client\": \"^2.2.0\"\n</code></pre>\n\n<h3>Desired end state</h3>\n\n<pre><code>//backend config service\nlet url = config.env.url.base + config.env.url.socketIoPort;\nconst socketConfig: SocketIoConfig = { url: url, options: {} };\n</code></pre>\n\n<p>As a side note, the main challenge is that when the client is loading, the UI doesn't have access to the server side (Angular security).</p>\n\n<p>I also read that the best way to achieving this, is using the \"environment/environments\" files [Dev, Staging, Prod]. </p>\n\n<p>Final notes: the whole point of this is to have a centralized file to have all the configurations and make it easier to maintain.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": true, "score": 1, "last_activity_date": 1547071207, "creation_date": 1547071207, "answer_id": 54119000, "question_id": 54118756, "link": "https://stackoverflow.com/questions/54118756/html-pre-tag-with-script-examples-failing-to-compile-in-typescript-angular-a/54119000#54119000", "title": "HTML &lt;pre&gt; tag with script examples failing to compile in TypeScript / Angular application", "body": "<p>you can try</p>\n\n<pre><code>&lt;pre [innerHTML]=\"'\n    ImageData: object = {\n        text: STRING,\n        position: STRING,\n        color: STRING,\n        icon: {\n            fa: BOOLEAN,\n            url: STRING,\n            height: INT,\n            width: INT,\n            altText: STRING\n        }\n    }'\"&gt;\n&lt;/pre&gt;\n</code></pre>\n"}], "owner": {"reputation": 1925, "user_id": 830516, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9b687993aa3d3fb03c72e1bfe0a818d8?s=128&d=identicon&r=PG", "display_name": "Xenology", "link": "https://stackoverflow.com/users/830516/xenology"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 54119000, "answer_count": 1, "score": 0, "last_activity_date": 1547071207, "creation_date": 1547069946, "question_id": 54118756, "link": "https://stackoverflow.com/questions/54118756/html-pre-tag-with-script-examples-failing-to-compile-in-typescript-angular-a", "title": "HTML &lt;pre&gt; tag with script examples failing to compile in TypeScript / Angular application", "body": "<p>Trying to figure out why the following code won't load in my Angular template. Not finding many explanations on how to properly escape this:</p>\n\n<pre><code>&lt;div class=\"col-4\"&gt;\n    &lt;pre&gt;\n        ImageData: object = {\n            text: STRING,\n            position: STRING,\n            color: STRING,\n            icon: {\n                fa: BOOLEAN,\n                url: STRING,\n                height: INT,\n                width: INT,\n                altText: STRING\n            }\n        }\n    &lt;/pre&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["java", "angular", "typescript", "angular-routing", "angular-router"], "comments": [{"owner": {"reputation": 2060, "user_id": 8052043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ToK.jpg?s=128&g=1", "display_name": "CodeMatrix", "link": "https://stackoverflow.com/users/8052043/codematrix"}, "edited": false, "score": 0, "creation_date": 1547068427, "post_id": 54118428, "comment_id": 95069405, "body": "<a href=\"http://javascriptisnotjava.com\" rel=\"nofollow noreferrer\">javascriptisnotjava.com</a>"}, {"owner": {"reputation": 319, "user_id": 2850818, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0e20392d0ede4589801cb08833d62a00?s=128&d=identicon&r=PG&f=1", "display_name": "user2850818", "link": "https://stackoverflow.com/users/2850818/user2850818"}, "reply_to_user": {"reputation": 2060, "user_id": 8052043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ToK.jpg?s=128&g=1", "display_name": "CodeMatrix", "link": "https://stackoverflow.com/users/8052043/codematrix"}, "edited": false, "score": 0, "creation_date": 1547068660, "post_id": 54118428, "comment_id": 95069516, "body": "@CodeMatrix I know this isn&#39;t javascript. The backend of the application is Java. I just put it out there to explain why I&#39;m using the query parameters to navigate through pages. In fact, my code up there is TypeScript, not JavaScript."}], "owner": {"reputation": 319, "user_id": 2850818, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0e20392d0ede4589801cb08833d62a00?s=128&d=identicon&r=PG&f=1", "display_name": "user2850818", "link": "https://stackoverflow.com/users/2850818/user2850818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547068290, "creation_date": 1547068290, "question_id": 54118428, "link": "https://stackoverflow.com/questions/54118428/angular-routing-through-get-query-parameters", "title": "Angular Routing through GET Query Parameters", "body": "<p>I am building an Angular application inside another, older Java, application, and the idea is that one by one, we'll be replacing each page in the java application with a corresponding Angular page. However, I'm running into a problem with handling multiple pages. The Java application serves pages the following manner\nlocalhost:8080/app/Track?page={pageName}\nI'm trying to figure out exactly how I can write a route to handle this type of pages, since Angular seems to only like directory based routes. I tried using a matcher</p>\n\n<pre><code>export function GTSPage(url: UrlSegment[], group: UrlSegmentGroup, \npageName: string): UrlMatchResult {\nconsole.log(url);\nlet answer: UrlMatchResult = url.length === 1 &amp;&amp; \nurl[0].path.indexOf(pageName) &gt;= 0 ? ({consumed: url}) : null;\n    return answer;\n}\n</code></pre>\n\n<p>but this doesn't seem to work because the UrlSegment will only give me the path (which is just \"Track\"), but not the query parameters. Any ideas how I can go around this limitation?</p>\n"}, {"tags": ["javascript", "typescript", "ecmascript-6"], "answers": [{"comments": [{"owner": {"reputation": 16685, "user_id": 1229624, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/33221e57892f65c519a16ff5cd30f874?s=128&d=identicon&r=PG", "display_name": "Aminadav Glickshtein", "link": "https://stackoverflow.com/users/1229624/aminadav-glickshtein"}, "reply_to_user": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1547068428, "post_id": 54118441, "comment_id": 95069407, "body": "Thanks. I Fixed it."}], "tags": [], "owner": {"reputation": 16685, "user_id": 1229624, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/33221e57892f65c519a16ff5cd30f874?s=128&d=identicon&r=PG", "display_name": "Aminadav Glickshtein", "link": "https://stackoverflow.com/users/1229624/aminadav-glickshtein"}, "is_accepted": false, "score": 2, "last_activity_date": 1547068398, "last_edit_date": 1547068398, "creation_date": 1547068366, "answer_id": 54118441, "question_id": 54118406, "link": "https://stackoverflow.com/questions/54118406/simplify-the-javascript-code-using-typescript/54118441#54118441", "title": "Simplify the JavaScript code using TypeScript", "body": "<p>Yes. There is:</p>\n\n<pre><code> Object.assign(this,{\n         _session:AmberFile.session,\n         _sessionPath:AmberFile.sessionPath\n })\n</code></pre>\n\n<blockquote>\n  <p>The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object. It will return the target object.</p>\n</blockquote>\n\n<p>Read more:</p>\n\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 1504196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c18db55f2f3f68aa58678292fef4ffe5?s=128&d=identicon&r=PG&f=1", "display_name": "GreenTeaCake", "link": "https://stackoverflow.com/users/1504196/greenteacake"}, "is_accepted": false, "score": 2, "last_activity_date": 1547069803, "creation_date": 1547069803, "answer_id": 54118739, "question_id": 54118406, "link": "https://stackoverflow.com/questions/54118406/simplify-the-javascript-code-using-typescript/54118739#54118739", "title": "Simplify the JavaScript code using TypeScript", "body": "<pre><code>const {\n    session: _session,\n    sessionPath: _sessionPath,\n    sessionDevice: _sessionDevice\n} = AmberFile;\nObject.assign(this, { _session, _sessionPath, _sessionDevice });\n</code></pre>\n\n<p>See <a href=\"https://www.typescriptlang.org/play/#src=const%20AmberFile%20%3D%20%7B%0D%0A%20%20%20%20session%3A%20&#39;sessionVal&#39;%2C%0D%0A%20%20%20%20sessionPath%3A%20&#39;sessionPathVal&#39;%2C%0D%0A%20%20%20%20sessionDevice%3A%20&#39;sessionDeviceVal&#39;%2C%0D%0A%20%20%20%20%2F%2F%20etc%0D%0A%7D%3B%0D%0Aconst%20%7B%0D%0A%20%20%20%20session%3A%20_session%2C%0D%0A%20%20%20%20sessionPath%3A%20_sessionPath%2C%0D%0A%20%20%20%20sessionDevice%3A%20_sessionDevice%0D%0A%7D%20%3D%20AmberFile%3B%0D%0A%0D%0AObject.assign(this%2C%20%7B%20_session%2C%20_sessionPath%2C%20_sessionDevice%20%7D)%3B%0D%0A%0D%0Aconsole.log(this._session)%3B%0D%0Aconsole.log(this._sessionPath)%3B%0D%0Aconsole.log(this._sessionDevice)%3B\" rel=\"nofollow noreferrer\">TS Playground Example</a></p>\n"}], "owner": {"reputation": 965, "user_id": 3355407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/16a2074f9300b8f7fa4bf68a3b98aeee?s=128&d=identicon&r=PG&f=1", "display_name": "user21", "link": "https://stackoverflow.com/users/3355407/user21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547073440, "creation_date": 1547068202, "last_edit_date": 1547073440, "question_id": 54118406, "link": "https://stackoverflow.com/questions/54118406/simplify-the-javascript-code-using-typescript", "title": "Simplify the JavaScript code using TypeScript", "body": "<p>I am wondering if there is way to simplify the following code:</p>\n\n<pre><code>this._session = AmberFile.session;\nthis._sessionPath = AmberFile.sessionPath;\nthis._sessionDevice = AmberFile.sessionDevice;\nthis._ssconfig = AmberFile.ssconfig;\n</code></pre>\n\n<p>My attempt using TypeScript/ES6, but it doesn't look like it has cleaner code:</p>\n\n<pre><code>const {session, sessionPath, sessionDevice, ssconfig) = AmberFile\nthis._session = session;\nthis._sessionPath = sessionPath;\nthis._sessionDevice = session;\nthis._ssconfig = sessionPath;\n\nlet context: any = {  \n  sessionPath: this._sessionPath, \n  session: this._session,\n  sessionDevice: this._sessionDevice\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "firebase", "angular-material"], "comments": [{"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1547094095, "post_id": 54118275, "comment_id": 95075782, "body": "Can you please provide a StackBlitz?"}], "answers": [{"tags": [], "owner": {"reputation": 1360, "user_id": 9233226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EAh9PtPsvKw/AAAAAAAAAAI/AAAAAAAAAH0/AcBwHX8JuW8/photo.jpg?sz=128", "display_name": "Nitin Wahale", "link": "https://stackoverflow.com/users/9233226/nitin-wahale"}, "is_accepted": false, "score": 0, "last_activity_date": 1555493040, "last_edit_date": 1555493040, "creation_date": 1555491879, "answer_id": 55723815, "question_id": 54118275, "link": "https://stackoverflow.com/questions/54118275/angular-material-data-table-trying-to-load-data/55723815#55723815", "title": "Angular Material data table - Trying to load data", "body": "<p>You should try this code ... </p>\n\n<pre><code>    &lt;mat-table class=\"highlight\" #table [dataSource]=\"dataSource\" matSort&gt;\n &lt;!-- Dynamic      --&gt;\n        &lt;ng-container *ngFor=\"let col of displayedColumns\" matColumnDef={{col}}&gt;\n          &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;{{col.replace('_', ' ')| titlecase }} &lt;/mat-header-cell&gt;\n          &lt;mat-cell *matCellDef=\"let Exception\"&gt;\n            &lt;span&gt;{{Exception[col]}}&lt;/span&gt;\n          &lt;/mat-cell&gt;\n        &lt;/ng-container&gt;\n &lt;mat-header-row *matHeaderRowDef=\"displayedColumns\"&gt;&lt;/mat-header-row&gt;\n        &lt;mat-row *matRowDef=\"let row; columns: displayedColumns;\"&gt;&lt;/mat-row&gt;\n      &lt;/mat-table&gt;\n</code></pre>\n\n<blockquote>\n  <p>TS </p>\n</blockquote>\n\n<pre><code>        import { MatPaginator, MatSort, MatTableDataSource } from '@angular/material';\n</code></pre>\n\n<blockquote>\n  <p>/*  dataSource: MatTableDataSource;   replace this with */</p>\n</blockquote>\n\n<pre><code>dataSource = new MatTableDataSource();\n             this.dataSource.data = this.Task;\n</code></pre>\n"}], "owner": {"reputation": 4849, "user_id": 1299388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/fPo0R.jpg?s=128&g=1", "display_name": "Sami-L", "link": "https://stackoverflow.com/users/1299388/sami-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555493040, "creation_date": 1547067586, "last_edit_date": 1547070675, "question_id": 54118275, "link": "https://stackoverflow.com/questions/54118275/angular-material-data-table-trying-to-load-data", "title": "Angular Material data table - Trying to load data", "body": "<p>I was using the below TS code to load data with a Bootstrap table, and I wanted to experiment Angular Material Data table after a small lifting. At this point I just could load the table header, but could not find how to make data show. No error is thrown, the console log I inserted says: </p>\n\n<blockquote>\n  <p>Observable -> MapOperator -> thisArg: undefined</p>\n</blockquote>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { MatTableDataSource } from '@angular/material';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n@Component({\n  selector: 'app-tasks',\n  templateUrl: './tasks.component.html',\n  styleUrls: ['./tasks.component.scss']\n})\nexport class TasksComponent implements OnInit {\n  tasks: Observable&lt;any[]&gt;;\n\n  displayedColumns = ['description', 'note'];\n  dataSource: MatTableDataSource&lt;Tasks&gt;;\n\n  constructor(private db: AngularFirestore) {}\n\n  ngOnInit() {\n    this.tasks = this.db\n      .collection('tasks')\n      .snapshotChanges()\n      .pipe(\n        map(actions =&gt; {\n          return actions.map(a =&gt; {\n            const data = a.payload.doc.data() as Tasks;\n            const id = a.payload.doc.id;\n            return { id, ...data };\n          });\n        })\n      );\n\n  console.log(this.tasks);\n  return this.tasks;\n  }\n}\n\nexport interface Tasks {\n  description: string;\n  note: string;\n}\n</code></pre>\n\n<p>Here is my HTML:</p>\n\n<pre><code>&lt;mat-table #table [dataSource]=\"dataSource\"&gt;\n  &lt;ng-container matColumnDef=\"description\"&gt;\n    &lt;mat-header-cell *matHeaderCellDef&gt; description &lt;/mat-header-cell&gt;\n    &lt;mat-cell *matCellDef=\"let task\"&gt;{{task.description}}&lt;/mat-cell&gt;\n  &lt;/ng-container&gt;\n\n  &lt;ng-container matColumnDef=\"note\"&gt;\n    &lt;mat-header-cell *matHeaderCellDef&gt; note &lt;/mat-header-cell&gt;\n    &lt;mat-cell *matCellDef=\"let task\"&gt;{{task.note}}&lt;/mat-cell&gt;\n  &lt;/ng-container&gt;\n\n  &lt;mat-header-row *matHeaderRowDef=\"displayedColumns\"&gt;&lt;/mat-header-row&gt;\n  &lt;mat-row *matRowDef=\"let row; columns: displayedColumns;\"&gt;&lt;/mat-row&gt;\n&lt;/mat-table&gt;\n</code></pre>\n\n<p>I am using Angular 7 with the current packages versions, and the database contains records, so what am I doing wrong here ?</p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 42001, "user_id": 7495930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BvE1j04g-0c/AAAAAAAAAAI/AAAAAAAAB34/GwTEooh9wPo/photo.jpg?sz=128", "display_name": "Ryan Cogswell", "link": "https://stackoverflow.com/users/7495930/ryan-cogswell"}, "is_accepted": false, "score": 2, "last_activity_date": 1547066903, "creation_date": 1547066903, "answer_id": 54118129, "question_id": 54118056, "link": "https://stackoverflow.com/questions/54118056/how-to-export-react-component-from-a-typescript-file/54118129#54118129", "title": "how to export React component from a typescript file", "body": "<p>The issue is most likely your <code>import</code> statement where you are using this. I suspect you have:</p>\n\n<pre><code>import {ProductChecker} from \"yourfilename\";\n</code></pre>\n\n<p>but it should be:</p>\n\n<pre><code>import ProductChecker from \"yourfilename\";\n</code></pre>\n\n<p>The first assumes a named export, the second is for a default export.</p>\n"}], "owner": {"reputation": 1846, "user_id": 2446326, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/TumpQ.jpg?s=128&g=1", "display_name": "alernerdev", "link": "https://stackoverflow.com/users/2446326/alernerdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547066903, "creation_date": 1547066636, "question_id": 54118056, "link": "https://stackoverflow.com/questions/54118056/how-to-export-react-component-from-a-typescript-file", "title": "how to export React component from a typescript file", "body": "<p>I have a class that looks like this:</p>\n\n<blockquote>\n  <p>class ProductChecker extends React.Component { .... }</p>\n</blockquote>\n\n<p>at the bottom of the file, I have:</p>\n\n<blockquote>\n  <p>export default graphql(getSymbolInfoQuery)(ProductChecker);</p>\n</blockquote>\n\n<p>where graphql is imported from react-apollo and getSymbolInfoQuery is a gql templated string.  When compiling the project, I am getting:</p>\n\n<blockquote>\n  <p>src/client/gui/containers/product-checker.ts(3,10): error TS2305:\n  Module '\"../components/product-checker\"' has no exported member\n  'ProductChecker'</p>\n</blockquote>\n\n<p>but when I comment out the bottom of the file line and do:</p>\n\n<blockquote>\n  <p>export class ProductChecker extends React.Component {</p>\n</blockquote>\n\n<p>that seems to be building just fine.  So it looks like the export at the bottom of the file does not \"see\" class/component declaration higher up, and says that its not found.\nAny idea how to export a React class from a typescript source file?  THank you</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1547067704, "post_id": 54118045, "comment_id": 95069075, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30935336/official-information-on-arguments-in-es6-arrow-functions\">Official information on `arguments` in ES6 Arrow functions?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 975, "user_id": 10891544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25db99757cbc9bfda85ede996e95af2c?s=128&d=identicon&r=PG", "display_name": "Matt H", "link": "https://stackoverflow.com/users/10891544/matt-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1547066869, "creation_date": 1547066869, "answer_id": 54118117, "question_id": 54118045, "link": "https://stackoverflow.com/questions/54118045/how-to-validate-the-number-of-arguments-in-typescript/54118117#54118117", "title": "How to validate the number of arguments in TypeScript", "body": "<p>The code snippet that you posted doesn't seem to have the same error for me.  I do see that error if I change it to be an arrow function:</p>\n\n<pre><code>const myFunction = (foo) =&gt; {\n    if (arguments.length !== 1) {\n        throw new Error('myFunction expects 1 argument');\n    }\n}\n</code></pre>\n\n<p>You can try doing something like:</p>\n\n<pre><code>const myFunction = (...foo) =&gt; {\n    if (foo.length !== 1) {\n        throw new Error('myFunction expects 1 argument');\n    }\n}\n</code></pre>\n\n<p>To work around the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "is_accepted": false, "score": 2, "last_activity_date": 1547075698, "creation_date": 1547075698, "answer_id": 54119811, "question_id": 54118045, "link": "https://stackoverflow.com/questions/54118045/how-to-validate-the-number-of-arguments-in-typescript/54119811#54119811", "title": "How to validate the number of arguments in TypeScript", "body": "<p>You can also enforce the arity of your function in compile-time:</p>\n\n<pre><code>const myFunction = (...args: [any]) =&gt; {\n  /* ... */\n}\n</code></pre>\n\n<pre><code>myFunction(1);    // OK\nmyFunction(1, 2); // Compile-time error\n</code></pre>\n"}], "owner": {"reputation": 5905, "user_id": 451492, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fdf65c922a011afa1e050031a8895c85?s=128&d=identicon&r=PG", "display_name": "doberkofler", "link": "https://stackoverflow.com/users/451492/doberkofler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 54118117, "answer_count": 2, "score": 0, "last_activity_date": 1547075698, "creation_date": 1547066576, "last_edit_date": 1547070607, "question_id": 54118045, "link": "https://stackoverflow.com/questions/54118045/how-to-validate-the-number-of-arguments-in-typescript", "title": "How to validate the number of arguments in TypeScript", "body": "<p>I (only) use <code>arguments</code> to throw an error when an invalid number of arguments are passed to a function.</p>\n\n<pre><code>const myFunction = (foo) =&gt; {\n  if (arguments.length !== 1) {\n     throw new Error('myFunction expects 1 argument');\n  }\n}\n</code></pre>\n\n<p>Unfortunately in TypeScript I get the error <code>The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5. Consider using a standard function expression.</code> when referenced in arrow function.</p>\n\n<p>How can I (always) validate the number of arguments in TypeScript?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "office-js", "excel-addins"], "answers": [{"tags": [], "owner": {"reputation": 21725, "user_id": 88173, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/114b7dea411e3648a54fa459c89bed40?s=128&d=identicon&r=PG", "display_name": "Charles Williams", "link": "https://stackoverflow.com/users/88173/charles-williams"}, "is_accepted": true, "score": 1, "last_activity_date": 1547296999, "creation_date": 1547296999, "answer_id": 54159697, "question_id": 54117995, "link": "https://stackoverflow.com/questions/54117995/office-js-excel-detect-if-user-adds-removes-columns-or-rows/54159697#54159697", "title": "Office.js Excel: detect if user adds/removes columns (or rows)", "body": "<p>The best approach IMHO is to use Excel's Defined Names (aka Named Ranges or Named Items) instead of explicit references. That way you are making Excel do the work for you rather than trying to duplicate what Excel is already doing in your own code using Events.</p>\n\n<p>This is the recommended and most frequently used technique in other languages and APIs</p>\n"}], "owner": {"reputation": 5, "user_id": 4966060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb7281431836459220551f152038564?s=128&d=identicon&r=PG&f=1", "display_name": "David Rubino", "link": "https://stackoverflow.com/users/4966060/david-rubino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54159697, "answer_count": 1, "score": 0, "last_activity_date": 1547296999, "creation_date": 1547066357, "question_id": 54117995, "link": "https://stackoverflow.com/questions/54117995/office-js-excel-detect-if-user-adds-removes-columns-or-rows", "title": "Office.js Excel: detect if user adds/removes columns (or rows)", "body": "<p>I am creating an Excel Add-in in Angular using TypeScript. The goal of the add-in is to bind values from the add-in to the spreadsheet and save the reference so the user can know which worksheet/cell he bounded the value to.</p>\n\n<p>However, if the user inserts or removes a column (or a row), the cell reference recorded in the add-in needs to update to the new value.</p>\n\n<p>Here's an example:\nLet's say a user binds a value to cell A1. The reference (A1) will be displayed for that value in the add-in. Now, the user adds a new column in position A. The value previously shown in cell A1 will now be in cell B1. However, the add-in will still show cell A1 for the reference.</p>\n\n<p>I have thought of using the event <a href=\"https://docs.microsoft.com/en-us/javascript/api/office/office.eventtype?view=office-js\" rel=\"nofollow noreferrer\">Office.EventType.DocumentSelectionChanged</a>  to detect changes in the document. The problem is that the handler doesn't specify which part of the worksheet has changed, and I don't see myself checking every single cell to see if something has changed, as it would greatly impact my add-in performance.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["typescript", "vue.js", "vuetify.js", "vue-i18n", "vue-class-components"], "answers": [{"comments": [{"owner": {"reputation": 1931, "user_id": 2401829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7ziw.jpg?s=128&g=1", "display_name": "Sasha Kos", "link": "https://stackoverflow.com/users/2401829/sasha-kos"}, "edited": false, "score": 0, "creation_date": 1572391321, "post_id": 54218578, "comment_id": 103542847, "body": "is there any progress about this? How do you think did vue-class-component do smth about it?"}, {"owner": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "reply_to_user": {"reputation": 1931, "user_id": 2401829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7ziw.jpg?s=128&g=1", "display_name": "Sasha Kos", "link": "https://stackoverflow.com/users/2401829/sasha-kos"}, "edited": false, "score": 1, "creation_date": 1572428036, "post_id": 54218578, "comment_id": 103552649, "body": "@SashaKos The answer solves the problem. I&#39;m thinking that the trouble with Vue class components is that while <code>$t</code> exists when the class is instantiated but it has not yet been populated with <code>i18n</code> (to which <code>$t</code> refers)."}, {"owner": {"reputation": 1074, "user_id": 121257, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/215f733634f45a525d01e86076843d93?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/121257/paul"}, "edited": false, "score": 0, "creation_date": 1586630853, "post_id": 54218578, "comment_id": 108200231, "body": "I&#39;m having a similar issue when defining rules for a v-text-field: <code>Error in beforeMount hook: &quot;TypeError: Cannot read property &#39;_t&#39; of undefined&quot;</code>. Your solution with a getter doesn&#39;t seem to work for me: nameRules = [ (v: any) =&gt; !!v || this.errorName1]. Do you have any new input for this? Thanks."}], "tags": [], "owner": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "is_accepted": true, "score": 5, "last_activity_date": 1547646744, "creation_date": 1547646744, "answer_id": 54218578, "question_id": 54117907, "link": "https://stackoverflow.com/questions/54117907/how-to-use-vue-i18n-with-vue-class-components/54218578#54218578", "title": "How to use vue-i18n with Vue class components?", "body": "<p>The issue lied in the use of <code>this</code>.<br>\nBasically, Vue needs a very specific execution context that is not the same as what is normally accessible in the root context of a fresh <code>class</code>.</p>\n\n<p>The solution ends up being very simple: Use a getter.</p>\n\n<pre><code>import Vue from 'vue'\nimport Component from 'vue-class-component'\n\n@Component\nexport default class SomeComponent extends Vue {\n  public get someText () { return this.$t('some.key') }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1074, "user_id": 121257, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/215f733634f45a525d01e86076843d93?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/121257/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1586688936, "creation_date": 1586688936, "answer_id": 61170314, "question_id": 54117907, "link": "https://stackoverflow.com/questions/54117907/how-to-use-vue-i18n-with-vue-class-components/61170314#61170314", "title": "How to use vue-i18n with Vue class components?", "body": "<p>Your solution with placing the error message in a getter didn't work for me in the context of Vuetify input rules, I get this: <code>Error in beforeMount hook: \"TypeError: Cannot read property '_t' of undefined\"</code></p>\n\n<p>I managed to get it working in 2 possible ways:</p>\n\n<ol>\n<li>Use a getter, but for the whole rules array:</li>\n</ol>\n\n<pre><code>get someRules() {\n    return [\n        (v) =&gt; !!v || this.$t('field.must_not_be_empty')\n    ];\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Place the rules in the @Component decorator:</li>\n</ol>\n\n<pre><code>@Component({\n    data() {\n        return {\n            someRules: [\n                (v) =&gt; !!v || this.$t('field.must_not_be_empty')\n            ]\n        };\n    }\n})\nexport default class SomeComponent extends Vue {\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3728, "favorite_count": 1, "accepted_answer_id": 54218578, "answer_count": 2, "score": 5, "last_activity_date": 1586688936, "creation_date": 1547066011, "last_edit_date": 1547070152, "question_id": 54117907, "link": "https://stackoverflow.com/questions/54117907/how-to-use-vue-i18n-with-vue-class-components", "title": "How to use vue-i18n with Vue class components?", "body": "<p>The following code:</p>\n\n<pre><code>import Vue from 'vue'\nimport Component from 'vue-class-component'\n\n@Component\nexport default class SomeComponent extends Vue {\n  public someText = this.$t('some.key')\n}\n</code></pre>\n\n<p>Throws an error:</p>\n\n<blockquote>\n  <p><code>[Vue warn]: Error in data(): \"TypeError: i18n is undefined\"</code></p>\n</blockquote>\n\n<p>I made sure to initialize Vue with <code>Vue.use(VueI18n)</code> and <code>new Vue({ /* ... */, i18n })</code>. The <code>i18n</code> object is initialized this way:</p>\n\n<pre><code>new VueI18n({\n  locale: DEFAULT_LOCALE, // imported\n  fallbackLocale: 'en',\n  messages // imported\n})\n</code></pre>\n\n<p>Translations work perfectly fine as long as they are not immediately called, for example in templates or in component methods.</p>\n\n<p>This <a href=\"https://github.com/kazupon/vue-i18n/issues/449\" rel=\"noreferrer\">vue-i18n issue</a> seems to imply that there is an initialization problem.<br>\nI could work around this by using methods and only translating in templates, but there is a specific instance out of my control in which such immediate calls happen: <a href=\"https://vuetifyjs.com/en/components/inputs\" rel=\"noreferrer\">Vuetify input</a> <code>rules</code>.</p>\n\n<pre><code>someRule = [(v) =&gt; !!v || this.$t('field.must_not_be_empty')]\n</code></pre>\n\n<p>These rules are executed immediately, even with <code>lazy-validation</code> on <a href=\"https://vuetifyjs.com/en/components/forms\" rel=\"noreferrer\">Vuetify forms</a>.</p>\n\n<p>I have identified two possible solutions:</p>\n\n<ol>\n<li>Circumventing the Vuetify <code>rules</code> system and allowing to simply return a string to be translated within the template itself;</li>\n<li>Solving the <code>$t</code> immediate availability issue.</li>\n</ol>\n\n<p>Sadly I have not been able to accomplish any of these.</p>\n\n<p>Is there any way to solve this problem?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1547067926, "post_id": 54117892, "comment_id": 95069167, "body": "TS, ugly AF should be the new TS motto. There is no better way to write this at the moment since each key depends on the previous..."}, {"owner": {"reputation": 80557, "user_id": 578895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8cf27059d3e36cdb21e26d5e1defe8c?s=128&d=identicon&r=PG", "display_name": "Mark Kahn", "link": "https://stackoverflow.com/users/578895/mark-kahn"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1547068046, "post_id": 54117892, "comment_id": 95069227, "body": "@TitianCernicova-Dragomir -- Why am I unable to make a recursive version of this?  TS seems to support recursion but it falls apart here"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1547068218, "post_id": 54117892, "comment_id": 95069301, "body": "I mean for the signature. Yes in general TS supports recursive types, but this particular case just can&#39;t be modeled in TS, as far as I know, and as far as I have seen, this questions and similar have been asked several times before, I have not seen a better answer than the one with multiple overloads one for each depth you want to support"}, {"owner": {"reputation": 80557, "user_id": 578895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8cf27059d3e36cdb21e26d5e1defe8c?s=128&d=identicon&r=PG", "display_name": "Mark Kahn", "link": "https://stackoverflow.com/users/578895/mark-kahn"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1547070659, "post_id": 54117892, "comment_id": 95070332, "body": "meh!  well thanks for the confirmation anyway!"}, {"owner": {"reputation": 5037, "user_id": 4231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525da44a40ab0d4e5e88a6e6d0b55de?s=128&d=identicon&r=PG", "display_name": "Justin Howard", "link": "https://stackoverflow.com/users/4231110/justin-howard"}, "edited": false, "score": 1, "creation_date": 1547080908, "post_id": 54117892, "comment_id": 95073227, "body": "It seems like you have two conflicting ideas here. Ignoring the recursive bit for a minute, your function checks if <code>key</code> exists on <code>item</code>. But at the same time, you are telling TS that <code>key</code> must be on <code>item</code> by using <code>K extends keyof T</code>. Unless you&#39;re doing unsafe casts, the check <code>if (key in item)</code> should never be false correct?"}, {"owner": {"reputation": 80557, "user_id": 578895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8cf27059d3e36cdb21e26d5e1defe8c?s=128&d=identicon&r=PG", "display_name": "Mark Kahn", "link": "https://stackoverflow.com/users/578895/mark-kahn"}, "reply_to_user": {"reputation": 5037, "user_id": 4231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525da44a40ab0d4e5e88a6e6d0b55de?s=128&d=identicon&r=PG", "display_name": "Justin Howard", "link": "https://stackoverflow.com/users/4231110/justin-howard"}, "edited": false, "score": 0, "creation_date": 1547162634, "post_id": 54117892, "comment_id": 95108182, "body": "@JustinHoward -- Correct, nice catch!  I&#39;m actually converting some of our utility code to TS which is where that&#39;s coming from, but in a pure TS world it&#39;s unneeded."}], "answers": [{"tags": [], "owner": {"reputation": 5037, "user_id": 4231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525da44a40ab0d4e5e88a6e6d0b55de?s=128&d=identicon&r=PG", "display_name": "Justin Howard", "link": "https://stackoverflow.com/users/4231110/justin-howard"}, "is_accepted": true, "score": 1, "last_activity_date": 1547082168, "creation_date": 1547082168, "answer_id": 54120643, "question_id": 54117892, "link": "https://stackoverflow.com/questions/54117892/null-coalescing-ts-friendly-function/54120643#54120643", "title": "&#39;null coalescing&#39; TS-friendly function", "body": "<p>Currently in TypeScript it's not possible to express deep type paths like you're trying to achieve. There is a GitHub issue <a href=\"https://github.com/Microsoft/TypeScript/issues/12290\" rel=\"nofollow noreferrer\">discussing possible workarounds</a> similar to your own. There is also a proposal <a href=\"https://github.com/Microsoft/TypeScript/issues/20423\" rel=\"nofollow noreferrer\">suggesting the \"pathof\" keyword</a> to solve this exact issue.</p>\n\n<p>In the meantime, it seems like you'll need to define your types exhaustively to X levels like you've done in your edit.</p>\n"}], "owner": {"reputation": 80557, "user_id": 578895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8cf27059d3e36cdb21e26d5e1defe8c?s=128&d=identicon&r=PG", "display_name": "Mark Kahn", "link": "https://stackoverflow.com/users/578895/mark-kahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54120643, "answer_count": 1, "score": 2, "last_activity_date": 1547082168, "creation_date": 1547065919, "last_edit_date": 1547067283, "question_id": 54117892, "link": "https://stackoverflow.com/questions/54117892/null-coalescing-ts-friendly-function", "title": "&#39;null coalescing&#39; TS-friendly function", "body": "<p>I'm trying to get a 'null coalescing function' working in TS.  Basically <code>get(obj, 'key1', 'key2', 'key3')</code></p>\n\n<p>Here's what I have:</p>\n\n<pre><code>const X = {\n    a: 42,\n    b: 'bar',\n    c: {\n        d: 'foo'\n    }\n}\n\nfunction get&lt;T, K extends keyof T&gt;(item: T, key: K, ...more: string[]): T[K] | null {\n  if (key in item) {\n    const out = item[key];\n    if (more.length) {\n      return get(out, more[0], ...more.slice(1));\n    } else {\n      return out;\n    }\n  } else {\n    return null;\n  }\n}\n\nconst foo = get(X, 'c', 'd');\n</code></pre>\n\n<p>This works at the top level, e.g. <code>get(X, 'c')</code>, but breaks down on the recursion for some reason I can't figure out.  Whatever I try I get various TS errors that all more or less say I can't cast a string to <code>keyof T[K]</code>, even though that's exactly what I'm doing the first time I call it!</p>\n\n<p>help!</p>\n\n<p>[edit] So this works, but is ugly AF!  somebody help meeeeee</p>\n\n<pre><code>function get&lt;T, K extends keyof T&gt;(item: T, key: K): T[K] | null;\nfunction get&lt;T, K extends keyof T, L extends keyof T[K]&gt;(item: T, key1: K, key2: L): T[K][L] | null;\nfunction get&lt;T, K extends keyof T, L extends keyof T[K], M extends keyof T[K][L]&gt;(item: T, key1: K, key2: L, key3: M): T[K][L][M] | null;\nfunction get(obj, key, ...moreKeys) {\n  ...\n</code></pre>\n"}, {"tags": ["typescript", "react-native", "flowtype"], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 1294822, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/257ffb83b4c34d4bf143a36521574f1d?s=128&d=identicon&r=PG", "display_name": "Rigorous implementation", "link": "https://stackoverflow.com/users/1294822/rigorous-implementation"}, "is_accepted": false, "score": 0, "last_activity_date": 1547080632, "creation_date": 1547080632, "answer_id": 54120479, "question_id": 54117636, "link": "https://stackoverflow.com/questions/54117636/how-to-migrate-functional-component-from-flow-to-typescript-in-react-native/54120479#54120479", "title": "How to migrate functional component from flow to typescript in react native?", "body": "<p>I realised that I was not setting the size of the image. All I had to do was to </p>\n\n<pre><code>&lt;Image\n  source={AppIcons[type]}\n  style={[Styles.icon, { height: 20, width: 20 }, style]}\n/&gt;\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 1294822, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/257ffb83b4c34d4bf143a36521574f1d?s=128&d=identicon&r=PG", "display_name": "Rigorous implementation", "link": "https://stackoverflow.com/users/1294822/rigorous-implementation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547137211, "creation_date": 1547064885, "last_edit_date": 1547137211, "question_id": 54117636, "link": "https://stackoverflow.com/questions/54117636/how-to-migrate-functional-component-from-flow-to-typescript-in-react-native", "title": "How to migrate functional component from flow to typescript in react native?", "body": "<p>I have this functional component in flow</p>\n\n<pre><code>// @flow\n\nimport Images from '../../Images'\nimport Styles from './IconStyles'\n\nexport type IconType = $Keys&lt;typeof Images.icons&gt;\n\nexport type IconProps = {\n  type: IconType,\n  style?: any,\n}\n\nconst Icon = ({ type, style }: IconProps) =&gt; {\n  return (\n    &lt;Image\n      source={Images.icons[type]}\n      style={[Styles.icon, style]}\n    /&gt;\n  )\n}\n</code></pre>\n\n<p>I am trying to convert this to typescript. My progress so far is as below</p>\n\n<pre><code>import React from 'react'\nimport { Image } from 'react-native'\nimport Images from '../../Images'\nimport Styles from './IconStyles'\n\nexport type IconType = keyof typeof Images.icons\n\ninterface IconProps {\n  type: IconType\n  style?: any\n}\nconst Icon = ({ type, style }: IconProps) =&gt; (\n  &lt;Image source={Images.icons[type]} style={[Styles.icon, style]} /&gt;\n)\n\nexport default Icon\n</code></pre>\n\n<p>and the Images js file is something like this</p>\n\n<pre><code>const icons = {\n  chevronDown: require('./Icons/chevron-down.png'),\n  chevronRight: require('./Icons/chevron-right.png'),\n  ...\n}\n\nexport default {\n  icons\n}\n</code></pre>\n\n<p>can you peeps point me in the right direction? I know for a fact that my typescript is correct but i cannot see any of the icons in the app. I suspect it has something to do with the images.js file?</p>\n"}, {"tags": ["node.js", "typescript", "oauth-2.0"], "answers": [{"tags": [], "owner": {"reputation": 3304, "user_id": 6250402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iyE.jpg?s=128&g=1", "display_name": "hong4rc", "link": "https://stackoverflow.com/users/6250402/hong4rc"}, "is_accepted": false, "score": 0, "last_activity_date": 1547064714, "creation_date": 1547064714, "answer_id": 54117595, "question_id": 54117298, "link": "https://stackoverflow.com/questions/54117298/getting-undefined-when-using-typescript/54117595#54117595", "title": "getting undefined when using typescript", "body": "<p>I see one case return <code>undefined</code>, It is inside <code>try</code>, throw error and you catch it but don't return anything.</p>\n\n<p>You can check <code>return false</code> to check it.</p>\n"}], "owner": {"reputation": 247, "user_id": 4442944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/571652118/picture?type=large", "display_name": "Morten Due Christiansen", "link": "https://stackoverflow.com/users/4442944/morten-due-christiansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547064714, "creation_date": 1547063300, "last_edit_date": 1547064208, "question_id": 54117298, "link": "https://stackoverflow.com/questions/54117298/getting-undefined-when-using-typescript", "title": "getting undefined when using typescript", "body": "<p>I'm trying to implement <a href=\"https://www.npmjs.com/package/oauth2-server\" rel=\"nofollow noreferrer\">oauth2-server</a> using typescript.\nAnd need to define the model used and assigning it in the constructor of the Oauth2Server. But getting <code>undefined</code> model at runtime.</p>\n\n<p>I defined a set of functions like this</p>\n\n<pre><code>async function getClient(clientId:string, clientSecret:string) {\n    try {  \n        let dbClient = await OAuthClient.findById(clientId)\n        console.log(dbClient)\n        let client = toClientDTO(dbClient);\n        if(!client){\n            console.log(\"client not found\");\n            return false\n        }\n        if(clientSecret &amp;&amp; clientSecret !== client.secret){\n           throw new Error(\"client not found: 'secret error'\");\n        }\n\n        console.log(\"Client return value\", client);\n        return client;\n    } catch(e) {\n        console.log(\"get client err\", e);\n\n    }\n}\n</code></pre>\n\n<p>and exporting them like this:</p>\n\n<pre><code>export const model =  {\n    getAccessToken: getAccessToken,\n    getClient: getClient,\n    getRefreshToken: getRefreshToken,\n    getUser: getUser,\n    saveToken: saveToken,\n    validateScope: validateScope,\n    verifyScope: verifyScope,\n}\n</code></pre>\n\n<p>I am using the model here:</p>\n\n<pre><code>import Oauth2Server from 'oauth2-server';\nimport {model} from './model';\nconsole.log(model);\nconst oauth = new Oauth2Server({\n    model: model,\n    requireClientAuthentication: {password: false}\n});\nexport default oauth\n</code></pre>\n\n<p>but when I call functions on the oauth object.it complains that the model is undefined</p>\n\n<pre><code>import oauth from './oauth';\n\nexport default (app:Application) =&gt; {\n\napp.all('/oauth/token', (req:Request,res:Response) =&gt; {\n    var request = new OAuthRequest(req);\n    var response = new OAuthResponse(res);\n\n    oauth\n      .token(request,response)\n      .then(function(token) {\n\n        return res.json(token)\n      }).catch(function(err){\n        return res.status(500).json(err)\n      })\n  });\n}\n</code></pre>\n\n<p>I can get it to work using mostly the same setup and code using regular javascript.\nBut can not figure out why the model is <code>undefined</code> when I use typescript.</p>\n\n<p>All suggestions are welcome</p>\n\n<p>Best regards</p>\n"}, {"tags": ["typescript", "functional-programming", "reduce", "reducers", "strictnullchecks"], "answers": [{"comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1547062841, "post_id": 54117175, "comment_id": 95067085, "body": "&quot;Why does TypeScript infer the &#39;never&#39; type?&quot; &quot;because the type for <code>[]</code> is inferred to be <code>never[]</code>&quot;. If that was the case then why does <code>const array = [];</code> infer <code>array</code> as type <code>any[]</code>?"}, {"owner": {"reputation": 975, "user_id": 10891544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25db99757cbc9bfda85ede996e95af2c?s=128&d=identicon&r=PG", "display_name": "Matt H", "link": "https://stackoverflow.com/users/10891544/matt-h"}, "edited": false, "score": 1, "creation_date": 1547063257, "post_id": 54117175, "comment_id": 95067247, "body": "Normally TypeScript does a pretty good job at inferring the proper type for an empty array based on how it is used.  However, it isn&#39;t able to in this example because it doesn&#39;t have any types in the parameters or return type of the callback, and it doesn&#39;t use the original [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] array for type inferencing.  Doing something like <code>const array = [];</code> does indeed produce an <code>any[]</code> array.  However, I think this is an explicit exception to avoid confusing people.  If you do something like <code>[].filter(a =&gt; true);</code>, you will see that it infers the <code>never[]</code> type instead of the <code>any[]</code> type."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1547063494, "post_id": 54117175, "comment_id": 95067334, "body": "Relevant: <a href=\"https://github.com/Microsoft/TypeScript/issues/18687\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/18687</a>  It&#39;s more complicated than I realized, but <code>[]</code> gets inferred as some kind of &quot;widening <code>any[]</code>&quot; type when contextually typed... apparently in a way that doesn&#39;t happen when being passed as the accumulator in <code>reduce()</code>.  \ud83e\udd37\u200d\u2640\ufe0f"}, {"owner": {"reputation": 630, "user_id": 3570903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Dicf.jpg?s=128&g=1", "display_name": "millsp", "link": "https://stackoverflow.com/users/3570903/millsp"}, "edited": false, "score": 1, "creation_date": 1547066429, "post_id": 54117175, "comment_id": 95068560, "body": "@MattH Yes TS isn&#39;t able to determine the type of the array, you can either cast or pass the type as a template parameter to reduce then it works !"}], "tags": [], "owner": {"reputation": 975, "user_id": 10891544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25db99757cbc9bfda85ede996e95af2c?s=128&d=identicon&r=PG", "display_name": "Matt H", "link": "https://stackoverflow.com/users/10891544/matt-h"}, "is_accepted": true, "score": 46, "last_activity_date": 1547062952, "last_edit_date": 1547062952, "creation_date": 1547062743, "answer_id": 54117175, "question_id": 54117100, "link": "https://stackoverflow.com/questions/54117100/why-does-typescript-infer-the-never-type-when-reducing-an-array-with-concat/54117175#54117175", "title": "Why does TypeScript infer the &#39;never&#39; type when reducing an Array with concat?", "body": "<p>I believe this is because the type for <code>[]</code> is inferred to be <code>never[]</code>, which is the type for an array that MUST be empty.  You can use a type cast to address this:</p>\n\n<pre><code>['a', 'b', 'c'].reduce((accumulator, value) =&gt; accumulator.concat(value), [] as string[]);\n</code></pre>\n\n<p>Normally this wouldn't be much of a problem since TypeScript does a decent job at figuring out a better type to assign to an empty array based on what you do with it.  However, since your example is 'silly' as you put it, TypeScript isn't able to make any inferences and leaves the type as <code>never[]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 1317451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iW3Fg.jpg?s=128&g=1", "display_name": "depoulo", "link": "https://stackoverflow.com/users/1317451/depoulo"}, "edited": false, "score": 2, "creation_date": 1613492430, "post_id": 62537717, "comment_id": 117088531, "body": "This should be the accepted answer. Slightly different solution, using generics: <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].reduce&lt;string[]&gt;((accumulator, value) =&gt; accumulator.concat(value), []);</code>"}], "tags": [], "owner": {"reputation": 3862, "user_id": 3210677, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/108ff5af85167b56504817385123251e?s=128&d=identicon&r=PG", "display_name": "Andru", "link": "https://stackoverflow.com/users/3210677/andru"}, "is_accepted": false, "score": 12, "last_activity_date": 1592924084, "creation_date": 1592924084, "answer_id": 62537717, "question_id": 54117100, "link": "https://stackoverflow.com/questions/54117100/why-does-typescript-infer-the-never-type-when-reducing-an-array-with-concat/62537717#62537717", "title": "Why does TypeScript infer the &#39;never&#39; type when reducing an Array with concat?", "body": "<p>Better solution which <strong>avoids a type cast</strong>:</p>\n<p>Type the <code>accumulator</code> value as <code>string[]</code> (and <strong>avoid a type cast</strong> on <code>[]</code>):</p>\n<pre><code>['a', 'b', 'c'].reduce((accumulator: string[], value) =&gt; accumulator.concat(value), []);\n</code></pre>\n<p>Play with this solution <a href=\"https://www.typescriptlang.org/play/index.html?ssl=1&amp;ssc=38&amp;pln=1&amp;pc=44#code/NocghiA0AEIEZVgYxAXQHQCcCmATArktgBTFhJL4C2%20ANmAC4D2mAXNAM4OYCWAdgHNgqGADcwtfNgCU0ALwA%20aOUo16zTOiRM%20SRsXGSZMYdIDcQA\" rel=\"noreferrer\">in the typescript playground</a>.</p>\n<p><strong>Notes</strong>:</p>\n<ol>\n<li><p><strong>Type casts should be avoided</strong> if you can because you're taking one type and transpose it onto something else. This can cause side-effects since you're manually taking control of coercing a variable into another type.</p>\n</li>\n<li><p>This typescript error <strong>only occurs if the <code>strictNullChecks</code> option is set to <code>true</code></strong>. The Typescript error disappears when disabling that option, but that is probably not what you want.</p>\n</li>\n<li><p>I reference the entire error message I get with Typescript <code>3.9.2</code> here so that Google finds this thread for people who are searching for answers (because Typescript error messages sometimes change from version to version):</p>\n<pre><code>No overload matches this call.\n  Overload 1 of 2, '(...items: ConcatArray&lt;never&gt;[]): never[]', gave the following error.\n Argument of type 'string' is not assignable to parameter of type 'ConcatArray&lt;never&gt;'.\n  Overload 2 of 2, '(...items: ConcatArray&lt;never&gt;[]): never[]', gave the following error.\n Argument of type 'string' is not assignable to parameter of type 'ConcatArray&lt;never&gt;'.(2769)\n</code></pre>\n</li>\n</ol>\n"}], "owner": {"reputation": 630, "user_id": 3570903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Dicf.jpg?s=128&g=1", "display_name": "millsp", "link": "https://stackoverflow.com/users/3570903/millsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15021, "favorite_count": 5, "accepted_answer_id": 54117175, "answer_count": 2, "score": 27, "last_activity_date": 1594098242, "creation_date": 1547062387, "last_edit_date": 1594098242, "question_id": 54117100, "link": "https://stackoverflow.com/questions/54117100/why-does-typescript-infer-the-never-type-when-reducing-an-array-with-concat", "title": "Why does TypeScript infer the &#39;never&#39; type when reducing an Array with concat?", "body": "<p>Code speaks better than language, so:</p>\n\n<pre><code>['a', 'b', 'c'].reduce((accumulator, value) =&gt; accumulator.concat(value), []);\n</code></pre>\n\n<p>The code is very silly and returns a copied Array...</p>\n\n<p>TS complains on concat's argument: TS2345: Argument of type 'string' is not assignable to parameter of type 'ConcatArray'.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 161, "user_id": 9069800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9fe4eb376149861094a554aee23542?s=128&d=identicon&r=PG&f=1", "display_name": "mhombach", "link": "https://stackoverflow.com/users/9069800/mhombach"}, "edited": false, "score": 0, "creation_date": 1547066382, "post_id": 54116755, "comment_id": 95068543, "body": "Are you using &quot;angular&quot; (&quot;angular&quot; version 2 or higher) or &quot;angularjs&quot;?"}, {"owner": {"reputation": 47, "user_id": 10863021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41002b3bbc7493900538309aead235?s=128&d=identicon&r=PG&f=1", "display_name": "Hoobs", "link": "https://stackoverflow.com/users/10863021/hoobs"}, "reply_to_user": {"reputation": 161, "user_id": 9069800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9fe4eb376149861094a554aee23542?s=128&d=identicon&r=PG&f=1", "display_name": "mhombach", "link": "https://stackoverflow.com/users/9069800/mhombach"}, "edited": false, "score": 0, "creation_date": 1547068685, "post_id": 54116755, "comment_id": 95069532, "body": "@spyro Angular. not angularjs"}], "owner": {"reputation": 47, "user_id": 10863021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41002b3bbc7493900538309aead235?s=128&d=identicon&r=PG&f=1", "display_name": "Hoobs", "link": "https://stackoverflow.com/users/10863021/hoobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547060932, "creation_date": 1547060932, "question_id": 54116755, "link": "https://stackoverflow.com/questions/54116755/how-to-prevent-form-input-fields-from-clearing-when-button-is-clicked", "title": "How to prevent form input fields from clearing when button is clicked", "body": "<p>I have a simple form that allows users to enter multiple first and last names if they have had different names. The form initially loads with only one entry each for first and last name. To add more input fields for their name, they click a button which calls this function:</p>\n\n<p>TS CODE</p>\n\n<pre><code> addName(){\n   this.person.fullName.push({ firstName : \"\", lastName : \"\"});\n }\n</code></pre>\n\n<p>This adds the input fields as intended but also clears the user's input from the previous fields. How can I prevent user input from being cleared when more input fields are added dynamically?</p>\n\n<p>HTML code</p>\n\n<p>Button</p>\n\n<pre><code>&lt;button type=\"button\" class=\"btn btn-warning btn-block\" id=\"addName\" (click)=\"addName()\"&gt;More Names&lt;/button&gt;\n</code></pre>\n\n<p>MORE HTML</p>\n\n<pre><code>&lt;div class=\"card-body\"  *ngFor=\"let index of \n   person['fullName']'; trackBy : trackByName'\"&gt;\n             &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-sm-6\"&gt;\n                   &lt;div class=\"form-group\"&gt;\n                      &lt;input type=\"text\" class=\"form-control\" id=\"person.id\" placeholder=\"Given name\"\n                      required\n                      [(ngModel)]=\"index.firstName\" name=\"firstName\"\n                      #firstName=\"ngModel\"&gt;\n</code></pre>\n"}, {"tags": ["angularjs", "typescript", "angular5", "mat-table"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10192769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deddef955498cee92d7de291e636ef0?s=128&d=identicon&r=PG&f=1", "display_name": "user10192769", "link": "https://stackoverflow.com/users/10192769/user10192769"}, "edited": false, "score": 0, "creation_date": 1547058973, "post_id": 54116273, "comment_id": 95065454, "body": "Thanks but this will not work since &quot;user&quot; is undefined there in ng-container"}, {"owner": {"reputation": 21215, "user_id": 79677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc1ca130deb434dfe5bcc19fbbebe48a?s=128&d=identicon&r=PG&f=1", "display_name": "CBarr", "link": "https://stackoverflow.com/users/79677/cbarr"}, "reply_to_user": {"reputation": 69, "user_id": 10192769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deddef955498cee92d7de291e636ef0?s=128&d=identicon&r=PG&f=1", "display_name": "user10192769", "link": "https://stackoverflow.com/users/10192769/user10192769"}, "edited": false, "score": 0, "creation_date": 1547059055, "post_id": 54116273, "comment_id": 95065489, "body": "ah yes, perhaps just switch the order of those 2 elements then.  You will have to use 2 elements no matter what since you have two directives that use <code>*</code>, and you can only have one per element."}], "tags": [], "owner": {"reputation": 21215, "user_id": 79677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc1ca130deb434dfe5bcc19fbbebe48a?s=128&d=identicon&r=PG&f=1", "display_name": "CBarr", "link": "https://stackoverflow.com/users/79677/cbarr"}, "is_accepted": true, "score": 2, "last_activity_date": 1547058660, "creation_date": 1547058660, "answer_id": 54116273, "question_id": 54116154, "link": "https://stackoverflow.com/questions/54116154/implementing-if-else-condition-inside-a-mat-cell-of-a-mat-table-angular-5/54116273#54116273", "title": "Implementing if else condition inside a mat-cell of a mat-table - Angular 5", "body": "<p>you have <code>ngIf</code>, but it should be prefixed with an asterisks: <code>*ngIf</code></p>\n\n<p>Also, with a bound directive attribute like <code>*ngIf</code> you don't need to use the curly braces inside of that.  Just doing <code>*ngIf=\"user.roles.length == 1\"</code> should be fine.</p>\n\n<p>However, usually you can't have two directives on the same element with asterisks, so using another <code>&lt;ng-container&gt;</code> is probably the way to fix this:</p>\n\n<pre><code>&lt;ng-container matColumnDef=\"role\"&gt;\n  &lt;mat-header-cell *matHeaderCellDef&gt;Role&lt;/mat-header-cell&gt;\n  &lt;ng-container *ngIf=\"user.roles.length == 1\"&gt;\n    &lt;mat-cell *matCellDef=\"let user\" &gt;\n      Admin          \n    &lt;/mat-cell&gt;\n  &lt;/ng-container&gt;\n&lt;/ng-container&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 6284819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZZSLh.png?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/6284819/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1585826489, "creation_date": 1585826489, "answer_id": 60990378, "question_id": 54116154, "link": "https://stackoverflow.com/questions/54116154/implementing-if-else-condition-inside-a-mat-cell-of-a-mat-table-angular-5/60990378#60990378", "title": "Implementing if else condition inside a mat-cell of a mat-table - Angular 5", "body": "<p>You can use a class to set the display as none and will make the trick</p>\n\n<pre><code>&lt;ng-container matColumnDef=\"role\"&gt;\n&lt;mat-header-cell *matHeaderCellDef&gt;Role&lt;/mat-header-cell&gt;        \n&lt;mat-cell *matCellDef=\"let user\" [ngClass]=\"'hide':user.roles.length == 1\"&gt;\n    Admin          \n&lt;/mat-cell&gt;\n</code></pre>\n\n<p></p>\n\n<p>And in your stylesheet file</p>\n\n<pre><code>.hide {\n  display: none;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 7090937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBPiX.jpg?s=128&g=1", "display_name": "Ish", "link": "https://stackoverflow.com/users/7090937/ish"}, "is_accepted": false, "score": 1, "last_activity_date": 1604406357, "last_edit_date": 1604406357, "creation_date": 1604405943, "answer_id": 64662719, "question_id": 54116154, "link": "https://stackoverflow.com/questions/54116154/implementing-if-else-condition-inside-a-mat-cell-of-a-mat-table-angular-5/64662719#64662719", "title": "Implementing if else condition inside a mat-cell of a mat-table - Angular 5", "body": "<p>I have faced for a same kind of issue.. And i came up with following solutions.</p>\n<ol>\n<li>You can use <code>[ngClass]</code> as follows.</li>\n</ol>\n<blockquote>\n<pre><code>  &lt;tr mat-footer-row [ngClass]=&quot;dataSource.length==0 ? 'hide' : ''&quot; *matFooterRowDef=&quot;displayedColumns1&quot;&gt;&lt;/tr&gt;\n</code></pre>\n</blockquote>\n<ol start=\"2\">\n<li>Or If you want to hide some cells you can use <code>[hidden]</code> attribute. It's like CSS &quot;display: none&quot; property.</li>\n</ol>\n<blockquote>\n<pre><code>  &lt;tr mat-footer-row [hidden]=&quot;dataSource.length==0&quot; *matFooterRowDef=&quot;displayedColumns1&quot;&gt;&lt;/tr&gt;\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 69, "user_id": 10192769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deddef955498cee92d7de291e636ef0?s=128&d=identicon&r=PG&f=1", "display_name": "user10192769", "link": "https://stackoverflow.com/users/10192769/user10192769"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8757, "favorite_count": 0, "accepted_answer_id": 54116273, "answer_count": 3, "score": 2, "last_activity_date": 1604406357, "creation_date": 1547058081, "question_id": 54116154, "link": "https://stackoverflow.com/questions/54116154/implementing-if-else-condition-inside-a-mat-cell-of-a-mat-table-angular-5", "title": "Implementing if else condition inside a mat-cell of a mat-table - Angular 5", "body": "<p>I am trying to implement an if else condition inside a mat-cell of a mat-table in my angular application. But I am getting error from the console \"ERROR Error: StaticInjectorError(AppModule)[NgIf -> TemplateRef]: \"</p>\n\n<p>my code is </p>\n\n<pre><code>&lt;ng-container matColumnDef=\"role\"&gt;\n    &lt;mat-header-cell *matHeaderCellDef&gt;Role&lt;/mat-header-cell&gt;        \n    &lt;mat-cell *matCellDef=\"let user\" ngIf=\"{{user.roles.length == 1}}\"&gt;\n        Admin          \n    &lt;/mat-cell&gt;\n  &lt;/ng-container&gt;\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["typescript", "authorization", "bearer-token", "nestjs"], "comments": [{"owner": {"reputation": 1221, "user_id": 7002012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ed3bfc071e1d0ffbb736c0b5347130?s=128&d=identicon&r=PG&f=1", "display_name": "Expressingx", "link": "https://stackoverflow.com/users/7002012/expressingx"}, "edited": false, "score": 0, "creation_date": 1547065550, "post_id": 54115948, "comment_id": 95068176, "body": "Check Angular HttpInterceptors."}, {"owner": {"reputation": 13, "user_id": 10576304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6527aeaf6d64f11a9c5730344cb35f8b?s=128&d=identicon&r=PG&f=1", "display_name": "luissebas", "link": "https://stackoverflow.com/users/10576304/luissebas"}, "edited": false, "score": 0, "creation_date": 1547069702, "post_id": 54115948, "comment_id": 95069933, "body": "I cant edit the other one, that why I&#39;ve made this one, I will see the HttoInterceptors"}, {"owner": {"reputation": 593, "user_id": 2539032, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/yQD20.jpg?s=128&g=1", "display_name": "Alfred Alfizo Mosima", "link": "https://stackoverflow.com/users/2539032/alfred-alfizo-mosima"}, "edited": false, "score": 0, "creation_date": 1547206101, "post_id": 54115948, "comment_id": 95122385, "body": "How are you sending the request?"}, {"owner": {"reputation": 13, "user_id": 10576304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6527aeaf6d64f11a9c5730344cb35f8b?s=128&d=identicon&r=PG&f=1", "display_name": "luissebas", "link": "https://stackoverflow.com/users/10576304/luissebas"}, "edited": false, "score": 0, "creation_date": 1547226415, "post_id": 54115948, "comment_id": 95133190, "body": "I&#39;m trying to send the header into the page, because everything works when I use postman"}], "owner": {"reputation": 13, "user_id": 10576304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6527aeaf6d64f11a9c5730344cb35f8b?s=128&d=identicon&r=PG&f=1", "display_name": "luissebas", "link": "https://stackoverflow.com/users/10576304/luissebas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547065461, "creation_date": 1547057026, "last_edit_date": 1547065461, "question_id": 54115948, "link": "https://stackoverflow.com/questions/54115948/authorization-bearer-token", "title": "Authorization bearer token?", "body": "<p>I am using bearer authorization, but I don't know how to send the header auth to the view.</p>\n\n<p>Auth.guard:</p>\n\n<pre><code>import { Injectable, CanActivate, ExecutionContext, HttpException, HttpStatus } from '@nestjs/common';\nimport * as jwt from 'jsonwebtoken';\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  async canActivate(context: ExecutionContext): Promise&lt;boolean&gt; {\n    const request = context.switchToHttp().getRequest();\n    if(!request.headers.authorization){\n    return false;\n}\nrequest.user = await this.validateToken(request.headers.authorization);    \nreturn true;\n}\n  async validateToken(auth: string){\n    if(auth.split(' ')[0] !== 'Bearer'){\n        throw new HttpException('Invalid token', HttpStatus.FORBIDDEN);\n    }const token= auth.split(' ')[1];\n    try{\n        const decoded = jwt.verify(token, process.env.SECRET);\n        return decoded;\n    }catch(err){\n        const message = 'Token error: ' + (err.message || err.name);\n        throw new HttpException(message, HttpStatus.FORBIDDEN);\n    }\n  }\n}\n</code></pre>\n\n<p><a href=\"https://github.com/luisssebas/Project\" rel=\"nofollow noreferrer\">Github repository</a></p>\n"}, {"tags": ["reactjs", "typescript", "react-router"], "answers": [{"tags": [], "owner": {"reputation": 1656, "user_id": 800093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/STqXw.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/800093/chase"}, "is_accepted": true, "score": 0, "last_activity_date": 1547055260, "creation_date": 1547055260, "answer_id": 54115542, "question_id": 54115384, "link": "https://stackoverflow.com/questions/54115384/how-to-migrate-react-app-to-react-router-in-order-to-retrieve-parameters-from-pa/54115542#54115542", "title": "How to migrate React app to React Router in order to retrieve parameters from path", "body": "<p>Using react-router to do only that would be overkill. You can easily retrieve the url path with <code>window.location.pathname</code>. What you should is setup a listener on the location that sets the pathname to state and you can pass it down to the components that need it.</p>\n\n<pre><code>  window.addEventListener('locationchange', function(){\n         console.log('location changed!');\n  }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10891201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e9ed950e844882fa5f5ea110ac1710?s=128&d=identicon&r=PG&f=1", "display_name": "spence-wah", "link": "https://stackoverflow.com/users/10891201/spence-wah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 54115542, "answer_count": 1, "score": 0, "last_activity_date": 1547055260, "creation_date": 1547054617, "question_id": 54115384, "link": "https://stackoverflow.com/questions/54115384/how-to-migrate-react-app-to-react-router-in-order-to-retrieve-parameters-from-pa", "title": "How to migrate React app to React Router in order to retrieve parameters from path", "body": "<p>I have a fully functional React web-app that now has a new requirement of loading separate images based on the URL suffix. It seems that in order to retrieve any information from the path I need to have a React Router App. Is there ---\nA: A way to easily migrate to React Router so I can use this.props.location.pathname? \nor B: Another way to retrieve the pathname without migrating to React Router.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "edited": false, "score": 0, "creation_date": 1547054643, "post_id": 54115256, "comment_id": 95063509, "body": "Are you sure it wasn&#39;t null on the first line of code?"}, {"owner": {"reputation": 3465, "user_id": 4661771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772656d123cd3d69c5a70cf2d95d5b4f?s=128&d=identicon&r=PG", "display_name": "Batajus", "link": "https://stackoverflow.com/users/4661771/batajus"}, "edited": false, "score": 0, "creation_date": 1547054696, "post_id": 54115256, "comment_id": 95063537, "body": "How about storing the value of the input field in your component or a service?"}, {"owner": {"reputation": 11, "user_id": 1604330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2ebcf9b2bfbfe059227c3e93c0e54?s=128&d=identicon&r=PG", "display_name": "Paulo Weber", "link": "https://stackoverflow.com/users/1604330/paulo-weber"}, "reply_to_user": {"reputation": 8973, "user_id": 6382928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tzxR.jpg?s=128&g=1", "display_name": "Frank Modica", "link": "https://stackoverflow.com/users/6382928/frank-modica"}, "edited": false, "score": 0, "creation_date": 1547056498, "post_id": 54115256, "comment_id": 95064392, "body": "@FrankModica, yes"}, {"owner": {"reputation": 11, "user_id": 1604330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2ebcf9b2bfbfe059227c3e93c0e54?s=128&d=identicon&r=PG", "display_name": "Paulo Weber", "link": "https://stackoverflow.com/users/1604330/paulo-weber"}, "reply_to_user": {"reputation": 3465, "user_id": 4661771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772656d123cd3d69c5a70cf2d95d5b4f?s=128&d=identicon&r=PG", "display_name": "Batajus", "link": "https://stackoverflow.com/users/4661771/batajus"}, "edited": false, "score": 0, "creation_date": 1547056505, "post_id": 54115256, "comment_id": 95064395, "body": ". @Batajus your idea has some merit."}, {"owner": {"reputation": 127, "user_id": 8430114, "user_type": "registered", "profile_image": "https://graph.facebook.com/1110412778996271/picture?type=large", "display_name": "Eddy Howard", "link": "https://stackoverflow.com/users/8430114/eddy-howard"}, "edited": false, "score": 0, "creation_date": 1547066519, "post_id": 54115256, "comment_id": 95068593, "body": "Create a service (injectable) set it as an app.module provider. inject it into a constructor on whatever component you are using, have a prop within that service.ts and set that then get it again after re-init of the page."}], "owner": {"reputation": 11, "user_id": 1604330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2ebcf9b2bfbfe059227c3e93c0e54?s=128&d=identicon&r=PG", "display_name": "Paulo Weber", "link": "https://stackoverflow.com/users/1604330/paulo-weber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547054102, "creation_date": 1547054102, "question_id": 54115256, "link": "https://stackoverflow.com/questions/54115256/clear-form-in-another-component-in-angular6", "title": "Clear form in another component in Angular6", "body": "<p>I have a navigation bar in an app with the classic search textbox in it. The way I build my code like so</p>\n\n<pre><code>let searchValue : string = 'searchresult?keyword=' + this.searchFormHeader.controls['buscaHeader'].value\nthis.router.navigateByUrl( searchValue )\nthis.searchFormHeader.reset()\n</code></pre>\n\n<p>However, when the app arrives at the searchresult page/component, keyword equals <em>null</em>\nHow would I fix my code so that I can clear the textbox and still have the value?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 7230, "user_id": 4221083, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cbb81063f5b67ee63b903a9c8b277964?s=128&d=identicon&r=PG", "display_name": "theblindprophet", "link": "https://stackoverflow.com/users/4221083/theblindprophet"}, "edited": false, "score": 0, "creation_date": 1547054821, "post_id": 54115241, "comment_id": 95063602, "body": "You should try to avoid using traditional DOM manipulation in Angular. Look at <code>[ngClass]</code>"}, {"owner": {"reputation": 9909, "user_id": 5225844, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hKnPb.jpg?s=128&g=1", "display_name": "Naga Sai A", "link": "https://stackoverflow.com/users/5225844/naga-sai-a"}, "edited": false, "score": 0, "creation_date": 1547063188, "post_id": 54115241, "comment_id": 95067219, "body": "remove click event on child li, and it will be limited to parent li"}, {"owner": {"reputation": 9909, "user_id": 5225844, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hKnPb.jpg?s=128&g=1", "display_name": "Naga Sai A", "link": "https://stackoverflow.com/users/5225844/naga-sai-a"}, "edited": false, "score": 0, "creation_date": 1547063379, "post_id": 54115241, "comment_id": 95067290, "body": "<a href=\"https://stackblitz.com/edit/angular-8nm8ut?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-8nm8ut?file=src/app/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9842579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v-vfVZMHwxo/AAAAAAAAAAI/AAAAAAAACzA/27zCT8Z9-0o/photo.jpg?sz=128", "display_name": "Paul VH", "link": "https://stackoverflow.com/users/9842579/paul-vh"}, "edited": false, "score": 0, "creation_date": 1547062176, "post_id": 54115520, "comment_id": 95066778, "body": "i use the ng class but how could i restrinct only for the parent &quot;li&quot; , because it paints everything . Here&#39;s a little demo : <a href=\"https://stackblitz.com/edit/angular-dbmfzi\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-dbmfzi</a>"}, {"owner": {"reputation": 23752, "user_id": 1118978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2rloq.jpg?s=128&g=1", "display_name": "Dervi\u015f Kay\u0131mba\u015f\u0131o\u011flu", "link": "https://stackoverflow.com/users/1118978/dervi%c5%9f-kay%c4%b1mba%c5%9f%c4%b1o%c4%9flu"}, "reply_to_user": {"reputation": 11, "user_id": 9842579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v-vfVZMHwxo/AAAAAAAAAAI/AAAAAAAACzA/27zCT8Z9-0o/photo.jpg?sz=128", "display_name": "Paul VH", "link": "https://stackoverflow.com/users/9842579/paul-vh"}, "edited": false, "score": 0, "creation_date": 1547072881, "post_id": 54115520, "comment_id": 95071213, "body": "I am not sure what you mean. but you are now asking different question. If you feel that this answer is helpfull please consider to upvote/ mark it as answer so that the comminity can benefit from it"}], "tags": [], "owner": {"reputation": 23752, "user_id": 1118978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2rloq.jpg?s=128&g=1", "display_name": "Dervi\u015f Kay\u0131mba\u015f\u0131o\u011flu", "link": "https://stackoverflow.com/users/1118978/dervi%c5%9f-kay%c4%b1mba%c5%9f%c4%b1o%c4%9flu"}, "is_accepted": false, "score": 1, "last_activity_date": 1547055158, "creation_date": 1547055158, "answer_id": 54115520, "question_id": 54115241, "link": "https://stackoverflow.com/questions/54115241/how-to-remove-class-in-typescript/54115520#54115520", "title": "How to remove class in typescript", "body": "<p>you should avoid using javascript DOM manipulation in Angular. Check my example below. Angular is very powerfull and does not need to use traditional DOM manipulation</p>\n\n<pre><code>this.showMyClass = true;\nclicked(event){\n    this.showMyClass = false;\n}\n</code></pre>\n\n<p>in Html</p>\n\n<pre><code>&lt;div [ngClass]=\"{'myClass': showMyClass}\"&gt; &lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9842579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v-vfVZMHwxo/AAAAAAAAAAI/AAAAAAAACzA/27zCT8Z9-0o/photo.jpg?sz=128", "display_name": "Paul VH", "link": "https://stackoverflow.com/users/9842579/paul-vh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4422, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547055158, "creation_date": 1547054040, "last_edit_date": 1547054683, "question_id": 54115241, "link": "https://stackoverflow.com/questions/54115241/how-to-remove-class-in-typescript", "title": "How to remove class in typescript", "body": "<p>Well I have a menu with <code>li</code> tags and it has an <code>a</code> element has a child for navigation and everything works fine , the problem is that I want to remove all the elements, which has the class <code>seleccionado</code> and add only the <code>li</code> on which I'm clicking. I tried <code>.remove</code> to remove the class. It doesn't work, so is there any other option??</p>\n\n<p>The function removes first all elements with that class and after that it only adds the class to the <code>li</code>, which has been clicked.</p>\n\n<pre><code>clicked(event) {\n   var el = document.getElementsByClassName(\"detectar\");\n   el.classList.remove(\"seleccionado\");\n\n   if(window.location.pathname){\n       event.path[3].classList.add(\"seleccionado\");\n   }\n}\n</code></pre>\n"}, {"tags": ["html", "typescript", "ionic-framework", "ionic3", "modal-dialog"], "comments": [{"owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "edited": false, "score": 0, "creation_date": 1547054461, "post_id": 54115238, "comment_id": 95063412, "body": "I am working with angular but I think you need a pipe to safe HTML. <a href=\"https://forum.ionicframework.com/t/domsanitizer-with-a-pipetrasnform-in-ionic-3-vs-ionic2/96194\" rel=\"nofollow noreferrer\">forum.ionicframework.com/t/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5816793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821bd33dc387b3e667c65e4726bf5da4?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Amato", "link": "https://stackoverflow.com/users/5816793/michael-amato"}, "edited": false, "score": 0, "creation_date": 1547061685, "post_id": 54115432, "comment_id": 95066570, "body": "Thanks for the response @phucnh! I generate a pipe and added the code and change to the &lt;p&gt; element you mentioned. I also imported the PipesModule in my app.module.ts file and I&#39;m getting the following error: <a href=\"https://imgur.com/a/hB3YplX\" rel=\"nofollow noreferrer\">imgur.com/a/hB3YplX</a>"}, {"owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "reply_to_user": {"reputation": 55, "user_id": 5816793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821bd33dc387b3e667c65e4726bf5da4?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Amato", "link": "https://stackoverflow.com/users/5816793/michael-amato"}, "edited": false, "score": 0, "creation_date": 1547084937, "post_id": 54115432, "comment_id": 95074007, "body": "Can you capture PipesModule? I think you missing export pipe"}], "tags": [], "owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547054807, "creation_date": 1547054807, "answer_id": 54115432, "question_id": 54115238, "link": "https://stackoverflow.com/questions/54115238/line-breaks-getting-lost-while-passing-data/54115432#54115432", "title": "Line breaks getting lost while passing data?", "body": "<p>YOu need safe pipe</p>\n\n<pre><code>import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\n@Pipe({\n  name: 'safe'\n})\nexport class SafePipe implements PipeTransform {\n  constructor(protected _sanitizer: DomSanitizer) {\n  }\n  public transform(value: string, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n    switch (type) {\n      case 'html':\n        return this._sanitizer.bypassSecurityTrustHtml(value);\n      case 'style':\n        return this._sanitizer.bypassSecurityTrustStyle(value);\n      case 'script':\n        return this._sanitizer.bypassSecurityTrustScript(value);\n      case 'url':\n        return this._sanitizer.bypassSecurityTrustUrl(value);\n      case 'resourceUrl':\n        return this._sanitizer.bypassSecurityTrustResourceUrl(value);\n      default:\n        throw new Error(`Unable to bypass security for invalid type: ${type}`);\n    }\n  }\n}\n</code></pre>\n\n<p>and use</p>\n\n<pre><code>&lt;p [innerHTML]=\"theLongDesc | safe:'html'\"&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5816793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821bd33dc387b3e667c65e4726bf5da4?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Amato", "link": "https://stackoverflow.com/users/5816793/michael-amato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547054807, "creation_date": 1547054035, "question_id": 54115238, "link": "https://stackoverflow.com/questions/54115238/line-breaks-getting-lost-while-passing-data", "title": "Line breaks getting lost while passing data?", "body": "<p>Bit of a weird issue here that I've spent some time trying to resolve to no avail. </p>\n\n<p>I have a Array of type String that contains some data (some of which will need to be properly formatted in a Modal window. </p>\n\n<p>An example of a String in this array would be:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>\"Some sentence which will be followed by a list. &lt;br/&gt; - List Item 1 &lt;br/&gt; - List Item 2 &lt;br/&gt; - List Item 3\",</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the code I'm using to pass this data from my TypeScript class to the html:</p>\n\n<p>home.ts</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>const myPressedData = {\r\n      title: titleListFinance[tileNum],\r\n      longDesc: longDescListFinance[tileNum]\r\n    };\r\n\r\n    const myModalOptions: ModalOptions = {\r\n      enableBackdropDismiss: true,\r\n      cssClass: \"my-modal\"\r\n    }\r\n\r\n    const myModal = this.modal.create('ModalPage', { data: myPressedData }, myModalOptions);\r\n\r\n    myModal.present();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>modal.ts</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>ionViewWillLoad() {\r\n    let dataIn = this.navParams.get('data');\r\n    this.theTitle = dataIn.title;\r\n    this.theLongDesc = dataIn.longDesc;\r\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>modal.html</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ion-header &gt;\r\n\r\n  &lt;ion-navbar&gt;\r\n    &lt;ion-title align=\"center\"&gt;{{theTitle}}&lt;/ion-title&gt;\r\n  &lt;/ion-navbar&gt;\r\n\r\n&lt;/ion-header&gt;\r\n\r\n&lt;ion-footer&gt;\r\n  &lt;ion-buttons width=\"100%\" &gt;\r\n        &lt;button full ion-button (click)=\"closeModal()\"&gt;Close &lt;/button&gt;\r\n  &lt;/ion-buttons&gt;\r\n&lt;/ion-footer&gt;\r\n\r\n&lt;ion-content padding class=\"description\"&gt;\r\n\r\n  &lt;p&gt;\r\n    {{theLongDesc}}\r\n  &lt;/p&gt;\r\n\r\n&lt;/ion-content&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>End Result is as follows, with no line breaks. I've also attempted <br> \\n \\n and all other forms of line breaks I'm aware of. Any help would be appreciated, friends!</p>\n\n<p><a href=\"https://i.stack.imgur.com/OIklJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OIklJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Cheers!</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 1, "creation_date": 1547053864, "post_id": 54115109, "comment_id": 95063104, "body": "Where the function <code>calculateMargins()</code> is called?"}, {"owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "reply_to_user": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 0, "creation_date": 1547053886, "post_id": 54115109, "comment_id": 95063118, "body": "that is being called by the parent component."}, {"owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "edited": false, "score": 1, "creation_date": 1547053989, "post_id": 54115109, "comment_id": 95063176, "body": "Could you provide small demo on <a href=\"https://stackblitz.com/fork/angular\" rel=\"nofollow noreferrer\">stackblitz.com/fork/angular</a> ?"}, {"owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "edited": false, "score": 0, "creation_date": 1547054269, "post_id": 54115109, "comment_id": 95063320, "body": "return this.leftMarginStyles; or return this.marginStyles; ?"}, {"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 1, "creation_date": 1547054310, "post_id": 54115109, "comment_id": 95063338, "body": "Try showing the style in the view with <code>&lt;div&gt;{{ marginStyles | json }}&lt;&#47;div&gt;</code>. It may not be in a valid state (<code>height</code> and <code>left</code> may not be valid numbers in your code)."}, {"owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "reply_to_user": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1547054782, "post_id": 54115109, "comment_id": 95063580, "body": "@ConnorsFan I tried doing that, but I end up with the empty object that I initialized at the beginning. :("}, {"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1547054882, "post_id": 54115109, "comment_id": 95063636, "body": "You can then use <code>console.log</code> in <code>showMargins</code> and in <code>calculateMargins</code> to see if the functions are called and behave as you expect."}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1547055406, "post_id": 54115109, "comment_id": 95063886, "body": "this.marginStyles = {  &#39;height&#39;: height+&#39;px&#39;, &#39;margin-left&#39;: left+&#39;px&#39;  }???"}, {"owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "reply_to_user": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1547055714, "post_id": 54115109, "comment_id": 95064039, "body": "@ConnorsFan The functions are all being called correctly, it just appears that the marginStyles variable isn&#39;t updating in the UI. I confirmed that it&#39;s being set correctly but it&#39;s not reflecting that in the UI when I use my calculated values or when I hard code simple values."}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "edited": false, "score": 0, "creation_date": 1547055111, "post_id": 54115482, "comment_id": 95063745, "body": "Beat me to it, that&#39;s essentially what I am doing."}, {"owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "edited": false, "score": 0, "creation_date": 1547055297, "post_id": 54115482, "comment_id": 95063839, "body": "I&#39;m not seeing a difference in my source code vs what we&#39;ve implemented in stackblitz, which is confusing to me why it&#39;d work there but not in my project"}], "tags": [], "owner": {"reputation": 6624, "user_id": 4896493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/197888927236621/picture?type=large", "display_name": "Sergey Mell", "link": "https://stackoverflow.com/users/4896493/sergey-mell"}, "is_accepted": true, "score": 1, "last_activity_date": 1547055307, "last_edit_date": 1547055307, "creation_date": 1547054979, "answer_id": 54115482, "question_id": 54115109, "link": "https://stackoverflow.com/questions/54115109/angular-child-component-variable-not-updating-when-called-from-parent-component/54115482#54115482", "title": "Angular child component variable not updating when called from parent component", "body": "<p>I've implemented the similar code</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-cvayak\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-cvayak</a></p>\n\n<p>and it seems to be working as expected. Please, check for the differences.\nPay attention to the Element referencing by means of <code>ViewChild</code> decorator, all functions should be public, <code>ElementRef</code> type is the referencing component class because of typization.</p>\n"}, {"tags": [], "owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547055157, "creation_date": 1547055157, "answer_id": 54115519, "question_id": 54115109, "link": "https://stackoverflow.com/questions/54115109/angular-child-component-variable-not-updating-when-called-from-parent-component/54115519#54115519", "title": "Angular child component variable not updating when called from parent component", "body": "<p>I think you should return <code>marginStyles</code> instead of <code>leftMarginStyles</code></p>\n"}], "owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1470, "favorite_count": 0, "accepted_answer_id": 54115482, "answer_count": 2, "score": 0, "last_activity_date": 1547059553, "creation_date": 1547053492, "last_edit_date": 1547059553, "question_id": 54115109, "link": "https://stackoverflow.com/questions/54115109/angular-child-component-variable-not-updating-when-called-from-parent-component", "title": "Angular child component variable not updating when called from parent component", "body": "<p>I am having issues dynamically updating an elements style. </p>\n\n<p>I am overlaying some margins on top of an image. I created a child component to handle this. I call a function on my child component which calculates the margins and then sets a variable. </p>\n\n<p>Here is the parent component call, which is triggered by a button click.</p>\n\n<pre><code>showMargins() {\n    if (this.showingMargins) {\n\n        this.showingMargins = false;\n    } else {\n        this.showingMargins = true;\n        this.marginComponent.calculateMargins();\n    }\n}\n</code></pre>\n\n<p>And here is my child component:</p>\n\n<pre><code>marginStyles: any = {};\n...\ncalculateMargins() {\n    //logic \n    ...\n    //set the property\n    this.marginStyles = {\n       'height.px': height,\n       'margin-left.px': left\n    }\n}\n</code></pre>\n\n<p>And then in my template</p>\n\n<pre><code>&lt;div id=\"margin-left\" [ngStyle]=\"marginStyles\"&gt;\n</code></pre>\n\n<p>I've tried using a function as well</p>\n\n<pre><code>private leftDiv() {\n    debugger;\n    return this.marginStyles;\n}\n</code></pre>\n\n<p>thus changing my template to</p>\n\n<pre><code>&lt;div id=\"margin-left\" [ngStyle]=\"leftDiv()\"&gt;\n</code></pre>\n\n<p>but to no avail. If I hardcode the values when I declare the variable it works fine.</p>\n\n<pre><code>    marginStyles: any = {'height.px': 200, 'margin-left.px': 20};\n</code></pre>\n\n<p>And if I hardcode it in the template it works fine as well; it's just failing after I've done my calculations and won't render the lines that I'm overlaying. Where have I gone wrong? If it helps, I'm on Angular 4. </p>\n\n<p>Edit: I moved all of my logic to my parent component, and everything looks fine. It appears to me that the values I am for <code>marginStyle</code> are not being updated in the child component, which is baffling to me.  They should be updating. ngStyle is working fine, it's the variable that is not being updated. </p>\n"}, {"tags": ["angular", "typescript"], "owner": {"reputation": 1312, "user_id": 558239, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c0c92e8eb2525d406648d04fd81f9960?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/558239/andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547053483, "creation_date": 1547053483, "question_id": 54115102, "link": "https://stackoverflow.com/questions/54115102/how-to-get-correct-typescript-file-and-position-information-in-error-stack-in-an", "title": "How to get correct typescript file and position information in Error.stack in Angular 6+", "body": "<p>This might be a duplicate, but I am going in circles when asking Google to get an answer to this question:</p>\n\n<p>I run an Angular 7 application and when calling <code>const err = (new Error(\"\"));</code>, <code>err.stack</code> contains a stacktrace that does not show up the correct Typescript source filenames and positions, instead it shows the positions in the webpack result (something like <code>main.js:582:42</code>).  However, the Chrome browser does show the right Typescript file names and positions in the console view.</p>\n\n<p>FYI: Source map generation is enabled in angular.json.</p>\n\n<p>I have fiddled around with the <code>source-map-support</code> npm-package but that does not work in the browser.</p>\n\n<p>Any ideas how to get correct Typescript source filenames and positions in my <code>err.stack</code> stacktrace?</p>\n"}, {"tags": ["angular", "typescript", "angular7"], "answers": [{"tags": [], "owner": {"reputation": 817, "user_id": 6354647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32cf8e3a4eb9b17be3d7fc14cad8e5c9?s=128&d=identicon&r=PG", "display_name": "Michal Cumpl", "link": "https://stackoverflow.com/users/6354647/michal-cumpl"}, "is_accepted": true, "score": 2, "last_activity_date": 1547058435, "last_edit_date": 1547058435, "creation_date": 1547052242, "answer_id": 54114761, "question_id": 54114713, "link": "https://stackoverflow.com/questions/54114713/what-is-the-purpose-of-the-before-array-of-the-objects/54114761#54114761", "title": "What is the purpose of the ... before array of the objects", "body": "<p>From <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" rel=\"nofollow noreferrer\">MDN web docs Spread Syntax</a>:</p>\n\n<blockquote>\n  <p>Spread syntax allows an iterable such as an array expression or string\n  to be expanded in places where zero or more arguments (for function\n  calls) or elements (for array literals) are expected, or an object\n  expression to be expanded in places where zero or more key-value pairs\n  (for object literals) are expected.</p>\n</blockquote>\n\n<p>From <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters\" rel=\"nofollow noreferrer\">MDN web docs Rest parameters</a>:</p>\n\n<blockquote>\n  <p>The rest parameter syntax allows us to represent an indefinite number\n  of arguments as an array.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "is_accepted": false, "score": 3, "last_activity_date": 1547052331, "creation_date": 1547052331, "answer_id": 54114784, "question_id": 54114713, "link": "https://stackoverflow.com/questions/54114713/what-is-the-purpose-of-the-before-array-of-the-objects/54114784#54114784", "title": "What is the purpose of the ... before array of the objects", "body": "<p>It's <code>Spread syntax</code></p>\n\n<p>More info: <a href=\"https://code4developers.com/spread-syntax-in-javascript/\" rel=\"nofollow noreferrer\">https://code4developers.com/spread-syntax-in-javascript/</a></p>\n"}, {"tags": [], "owner": {"reputation": 7685, "user_id": 8718377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGFwM.png?s=128&g=1", "display_name": "veben", "link": "https://stackoverflow.com/users/8718377/veben"}, "is_accepted": false, "score": 2, "last_activity_date": 1547052402, "creation_date": 1547052402, "answer_id": 54114807, "question_id": 54114713, "link": "https://stackoverflow.com/questions/54114713/what-is-the-purpose-of-the-before-array-of-the-objects/54114807#54114807", "title": "What is the purpose of the ... before array of the objects", "body": "<p>It represents the <code>es6 spread operator</code>.\nIn your case, it allows you to pass a <strong>shallow</strong> copy of your <code>products</code> array.</p>\n"}], "owner": {"reputation": 13833, "user_id": 1213285, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rv7Sk.jpg?s=128&g=1", "display_name": "Oleg Gordiichuk", "link": "https://stackoverflow.com/users/1213285/oleg-gordiichuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1547052393, "accepted_answer_id": 54114761, "answer_count": 3, "score": -1, "last_activity_date": 1547058435, "creation_date": 1547052059, "last_edit_date": 1547053005, "question_id": 54114713, "link": "https://stackoverflow.com/questions/54114713/what-is-the-purpose-of-the-before-array-of-the-objects", "closed_reason": "Duplicate", "title": "What is the purpose of the ... before array of the objects", "body": "<p>I am currently learning Angular and have found example of the code that is a bit mysterious for me.</p>\n\n<p>I have a function that return <code>Observable&lt;Product[]&gt;</code> array of objects:</p>\n\n<pre><code>  connect(): Observable&lt;Product[]&gt; {\n\n    const dataMutations = [\n      this.productsSubject,\n      this.paginator.page,\n      this.sort.sortChange\n    ];\n\n    return merge(...dataMutations).pipe(map((products) =&gt; {\n      this.paginator.length = products.length;\n      return this.getPagedData(this.getSortedData([...products]));\n    }));\n  }\n</code></pre>\n\n<p>In this code block, there is the function <code>getSortedData</code> that takes <code>[...products]</code> what is purpose of the <code>...</code> before the array of products? </p>\n\n<p>Code sample of the <code>getSortedData</code>:</p>\n\n<pre><code>private getSortedData(data: Product[]) {\n    if (!this.sort.active || this.sort.direction === '') {\n      return data;\n    }\n\n    return data.sort((a, b) =&gt; {\n      const isAsc = this.sort.direction === 'asc';\n      switch (this.sort.active) {\n        case 'title': return compare(a.title, b.title, isAsc);\n        default: return 0;\n      }\n    });\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ionic3", "twilio"], "comments": [{"owner": {"reputation": 3804, "user_id": 1205647, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7b03ae8795066ff29f8da0860b6411b5?s=128&d=identicon&r=PG", "display_name": "Aragorn", "link": "https://stackoverflow.com/users/1205647/aragorn"}, "edited": false, "score": 1, "creation_date": 1547053545, "post_id": 54114514, "comment_id": 95062914, "body": "try to provide a local copy of the twilio.js file, I&#39;m guessing the device is not letting the app to download it. Depending on the type of device you might have to give permission, I&#39;m not sure."}, {"owner": {"reputation": 107, "user_id": 4397200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N8rcfGzSDOo/AAAAAAAAAAI/AAAAAAAAAH8/dp6RG83poN0/photo.jpg?sz=128", "display_name": "Remarc Balisi", "link": "https://stackoverflow.com/users/4397200/remarc-balisi"}, "reply_to_user": {"reputation": 3804, "user_id": 1205647, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7b03ae8795066ff29f8da0860b6411b5?s=128&d=identicon&r=PG", "display_name": "Aragorn", "link": "https://stackoverflow.com/users/1205647/aragorn"}, "edited": false, "score": 0, "creation_date": 1547054065, "post_id": 54114514, "comment_id": 95063212, "body": "Yeah, I did try to have a local copy of it. but still not working."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4397200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N8rcfGzSDOo/AAAAAAAAAAI/AAAAAAAAAH8/dp6RG83poN0/photo.jpg?sz=128", "display_name": "Remarc Balisi", "link": "https://stackoverflow.com/users/4397200/remarc-balisi"}, "edited": false, "score": 0, "creation_date": 1547106417, "post_id": 54122244, "comment_id": 95079398, "body": "yeah I think the undefine problem is fixed, but another error popped out.  <code>TypeError: Cannot set property &#39;audio&#39; of undefined {stack: (...), message: &quot;Cannot set property &#39;audio&#39; of undefined&quot;}</code>"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 107, "user_id": 4397200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N8rcfGzSDOo/AAAAAAAAAAI/AAAAAAAAAH8/dp6RG83poN0/photo.jpg?sz=128", "display_name": "Remarc Balisi", "link": "https://stackoverflow.com/users/4397200/remarc-balisi"}, "edited": false, "score": 0, "creation_date": 1547106515, "post_id": 54122244, "comment_id": 95079443, "body": "Yup, definitely looks like an error. If you can\u2019t figure out what\u2019s going on your best bet is to ask a new question and share the relevant code."}, {"owner": {"reputation": 107, "user_id": 4397200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N8rcfGzSDOo/AAAAAAAAAAI/AAAAAAAAAH8/dp6RG83poN0/photo.jpg?sz=128", "display_name": "Remarc Balisi", "link": "https://stackoverflow.com/users/4397200/remarc-balisi"}, "edited": false, "score": 0, "creation_date": 1547106868, "post_id": 54122244, "comment_id": 95079603, "body": "okay, thank you very much philnash. I hope you help me again when I posted another question regardign with this. :P"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 107, "user_id": 4397200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N8rcfGzSDOo/AAAAAAAAAAI/AAAAAAAAAH8/dp6RG83poN0/photo.jpg?sz=128", "display_name": "Remarc Balisi", "link": "https://stackoverflow.com/users/4397200/remarc-balisi"}, "edited": false, "score": 0, "creation_date": 1547106919, "post_id": 54122244, "comment_id": 95079626, "body": "I\u2019ll see what I can do! \ud83d\ude42"}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 1, "last_activity_date": 1547096856, "creation_date": 1547096856, "answer_id": 54122244, "question_id": 54114514, "link": "https://stackoverflow.com/questions/54114514/twilio-is-undefined-in-ionic-3/54122244#54122244", "title": "Twilio is undefined in Ionic 3", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>If you want to bundle the Twilio Client JS along with your app, you can actually <a href=\"https://www.npmjs.com/package/twilio-client\" rel=\"nofollow noreferrer\">install it from npm</a> now.</p>\n\n<pre><code>npm install twilio-client\n</code></pre>\n\n<p>You can then use it with:</p>\n\n<pre><code>const Device = require('twilio-client').Device;\nconst device = Device(token);\n</code></pre>\n\n<p>Let me know if that helps.</p>\n"}], "owner": {"reputation": 107, "user_id": 4397200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N8rcfGzSDOo/AAAAAAAAAAI/AAAAAAAAAH8/dp6RG83poN0/photo.jpg?sz=128", "display_name": "Remarc Balisi", "link": "https://stackoverflow.com/users/4397200/remarc-balisi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547096856, "creation_date": 1547051419, "question_id": 54114514, "link": "https://stackoverflow.com/questions/54114514/twilio-is-undefined-in-ionic-3", "title": "Twilio is undefined in Ionic 3", "body": "<p>I was trying to use twilio in my ionic 3 application. Twilio is working when I'm running it on a browser but when I tried to run it in an actual device it suddenly returns a <code>TypeError: undefined is not a function {stack: (...), message: \"undefined is not a function\"}</code></p>\n\n<p>In my index.html I import the twilio using cdn</p>\n\n<p><code>&lt;script type=\"text/javascript\" src=\"https://media.twiliocdn.com/sdk/js/client/releases/1.6.5/twilio.js\"&gt;&lt;/script&gt;</code></p>\n\n<p>then in my component:</p>\n\n<p><code>declare var Twilio: any;</code></p>\n\n<p>and use it like this:</p>\n\n<p><code>const device = Twilio.Device(token);</code></p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1547052187, "creation_date": 1547052187, "answer_id": 54114744, "question_id": 54114475, "link": "https://stackoverflow.com/questions/54114475/type-error-generic-type-is-not-assignable/54114744#54114744", "title": "Type error: Generic type is not assignable", "body": "<p><code>Action</code> represents a generic function. A generic function implies it can be called with <em>any</em> type that satisfies the type constrained for a given type parameter.</p>\n\n<p>So this code compiles without any issues:</p>\n\n<pre><code>declare const action: Action;\naction({ count: 0 }); //should return  {count :number } \naction({ sum: 0 });//should return  {sum :number } \naction({ msg: \"Some text\" });//should return  {msg:number } \n</code></pre>\n\n<p>The problem is that your function (at least according to it's signature) does not satisfy this requirement. It takes in a state and returns a state. As highlighted above the requirements of <code>action</code> make it more flexible.</p>\n\n<p>If your function is truly just an identity function you can just use <code>any</code> to make the function compatible with the signature</p>\n\n<pre><code>const action: Action = (state: any) =&gt; state\n</code></pre>\n\n<p>Or you can make the function implementation generic:</p>\n\n<pre><code>const action: Action = &lt;T&gt;(state: T) =&gt; state\n</code></pre>\n\n<p>If what you want is not a generic function (ie a function that works for any <code>T</code>) but a regular function with a signature that can be customized for a given type, you need to put the type argument on <code>Action</code>:</p>\n\n<pre><code>type Action&lt;S&gt; = (state: S) =&gt; S\ntype Dispatch = &lt;A extends Action&lt;any&gt;&gt;(action: A) =&gt; void\n\nconst dispatch = (action: Action&lt;any&gt;) =&gt; { }\n\nconst action: Action&lt;IState&gt; = (state) =&gt; state\n    //declare const action: Action;\naction({ count: 0 });\naction({ sum: 0 }); // error\naction({ msg: \"Some text\" }); // error\n\n\ndispatch(action)\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 870264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d2689cadc14f6af1ee5d862ec6ffbd?s=128&d=identicon&r=PG", "display_name": "user104729", "link": "https://stackoverflow.com/users/870264/user104729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 54114744, "answer_count": 1, "score": 1, "last_activity_date": 1547052187, "creation_date": 1547051293, "question_id": 54114475, "link": "https://stackoverflow.com/questions/54114475/type-error-generic-type-is-not-assignable", "title": "Type error: Generic type is not assignable", "body": "<p>The following code generates an type error, that I'm unable to understand. Any ideas what I'm doing wrong?</p>\n\n<pre><code>Type '(state: State) =&gt; State' is not assignable to type 'Action'.\n  Types of parameters 'state' and 'state' are incompatible.\n    Type 'S' is not assignable to type 'State'.\n</code></pre>\n\n<p>The error is generated on line 14 (<code>const action: Action = ...</code>). </p>\n\n<pre><code>interface IState {\n  count: number;\n}\n\nclass State implements IState {\n  count: number;\n}\n\ntype Action = &lt;S&gt;(state: S) =&gt; S\ntype Dispatch = &lt;A extends Action&gt;(action: A) =&gt; void\n\nconst dispatch = (action: Action) =&gt; { }\n\nconst action: Action = (state: State) =&gt; state\n\ndispatch(action)\n</code></pre>\n\n<p>I expect for <code>State</code> and the generic type <code>S</code> to be compatible.</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#src=interface%20IState%20%7B%0A%20%20%20%20count%3A%20number%3B%0A%7D%0A%0Aclass%20State%20implements%20IState%20%7B%0A%20%20%20%20count%3A%20number%3B%0A%7D%0A%0Atype%20Action%20%3D%20%3CS%3E(state%3A%20S)%20%3D%3E%20S%0Atype%20Dispatch%20%3D%20%3CA%20extends%20Action%3E(action%3A%20A)%20%3D%3E%20void%0A%0Aconst%20dispatch%20%3D%20(action%3A%20Action)%20%3D%3E%20%7B%20%7D%0A%0Aconst%20action%3A%20Action%20%3D%20(state%3A%20State)%20%3D%3E%20state%0A%0Adispatch(action)\" rel=\"nofollow noreferrer\">TS playground</a></p>\n"}, {"tags": ["node.js", "typescript", "npm"], "comments": [{"owner": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "edited": false, "score": 0, "creation_date": 1547050469, "post_id": 54114147, "comment_id": 95061037, "body": "You need to clear the npm cache <code>C:\\users\\username\\AppData\\Roaming\\npm</code>"}, {"owner": {"reputation": 692, "user_id": 6631759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dT5GxkCbQN0/AAAAAAAAAAI/AAAAAAAAAZ8/GPptky9YuUc/photo.jpg?sz=128", "display_name": "Christian M&#252;ller", "link": "https://stackoverflow.com/users/6631759/christian-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1547050641, "post_id": 54114147, "comment_id": 95061143, "body": "what about package.json? does it contain the typescript reference?"}, {"owner": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "reply_to_user": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "edited": false, "score": 0, "creation_date": 1547052022, "post_id": 54114147, "comment_id": 95062016, "body": "@sachinGupta: npm cache folder is empty as its a fresh install"}, {"owner": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "reply_to_user": {"reputation": 692, "user_id": 6631759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dT5GxkCbQN0/AAAAAAAAAAI/AAAAAAAAAZ8/GPptky9YuUc/photo.jpg?sz=128", "display_name": "Christian M&#252;ller", "link": "https://stackoverflow.com/users/6631759/christian-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1547052065, "post_id": 54114147, "comment_id": 95062040, "body": "@ChristianM&#252;ller: Tried outside my project folder as well."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "edited": false, "score": 0, "creation_date": 1547051814, "post_id": 54114241, "comment_id": 95061869, "body": "Even after running outside my project path and uninstalling globally, I still get typescript version."}, {"owner": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "reply_to_user": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "edited": false, "score": 0, "creation_date": 1547054345, "post_id": 54114241, "comment_id": 95063354, "body": "Did you try updating the angular cli ?"}, {"owner": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "edited": false, "score": 0, "creation_date": 1547058182, "post_id": 54114241, "comment_id": 95065099, "body": "Thanks! finally able to fix this one, the only issue was to use double quotes instead of single quotes in the command npm install typescript@&#39;&gt;=2.4.2 &lt;2.7.0&#39; --save.  Following is the proper command for any one stuck :  npm install typescript@&quot;&gt;=2.4.2 &lt;2.7.0&quot; --save"}], "tags": [], "owner": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1547050578, "creation_date": 1547050578, "answer_id": 54114241, "question_id": 54114147, "link": "https://stackoverflow.com/questions/54114147/typescript-is-not-removed-even-after-reinstalling-node/54114241#54114241", "title": "Typescript is not removed even after reinstalling node", "body": "<p>Maybe there is a mismatch in your package json. Update the typescript version as suggested and update package.json</p>\n\n<p>run: \n    <code>npm install typescript@'&gt;=2.4.2 &lt;2.7.0' --save</code></p>\n"}, {"comments": [{"owner": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "edited": false, "score": 0, "creation_date": 1547058503, "post_id": 54116192, "comment_id": 95065246, "body": "The single quote works in bash, not in windows command prompt."}], "tags": [], "owner": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "is_accepted": true, "score": 1, "last_activity_date": 1547058285, "creation_date": 1547058285, "answer_id": 54116192, "question_id": 54114147, "link": "https://stackoverflow.com/questions/54114147/typescript-is-not-removed-even-after-reinstalling-node/54116192#54116192", "title": "Typescript is not removed even after reinstalling node", "body": "<p>It seems there is a small mistake in compiler log:\nPlease run the following command to install a compatible version of TypeScript.</p>\n\n<pre><code>npm install typescript@'&gt;=2.4.2 &lt;2.7.0'\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>npm install typescript@\"&gt;=2.4.2 &lt;2.7.0\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3304, "user_id": 6250402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iyE.jpg?s=128&g=1", "display_name": "hong4rc", "link": "https://stackoverflow.com/users/6250402/hong4rc"}, "is_accepted": false, "score": 0, "last_activity_date": 1547059398, "creation_date": 1547059398, "answer_id": 54116439, "question_id": 54114147, "link": "https://stackoverflow.com/questions/54114147/typescript-is-not-removed-even-after-reinstalling-node/54116439#54116439", "title": "Typescript is not removed even after reinstalling node", "body": "<p>Check following step:</p>\n\n<ul>\n<li><p>You call <code>@angular/compiler-cli</code> in global or local(just one folder), you need install <code>typescript</code> same.</p></li>\n<li><p>Install <code>typescript</code> match <code>'&gt;=2.4.2 &lt;2.7.0'</code>, example : <code>typescript@2.6.2</code>, local or global with <code>-g</code>.</p></li>\n<li><p>Try close your <code>cmd</code>, reopen it (if typescript install global, cmd don't know it change if you don't reopen).</p></li>\n<li><p>Check your eviroment variable <code>NODE_PATH</code>, if it exist, go to that folder to remove module in that.</p></li>\n</ul>\n\n<p>To check <code>NODE_PATH</code>, type in your cmd : <code>echo %NODE_PATH%</code></p>\n"}], "owner": {"reputation": 13, "user_id": 6936876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f85ce15417ecb77dae330482adccb3?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/6936876/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 54116192, "answer_count": 3, "score": 0, "last_activity_date": 1547059398, "creation_date": 1547050216, "question_id": 54114147, "link": "https://stackoverflow.com/questions/54114147/typescript-is-not-removed-even-after-reinstalling-node", "title": "Typescript is not removed even after reinstalling node", "body": "<p>While working on Angular 5 project, I got the following error on compilation :</p>\n\n<pre><code>@angular/compiler-cli@5.2.11 requires typescript@'&gt;=2.4.2 &lt;2.7.0' but 2.7.2 was found instead.\nUsing this version can result in undefined behaviour and difficult to debug problems.\n\nPlease run the following command to install a compatible version of TypeScript.\n\n    npm install typescript@'&gt;=2.4.2 &lt;2.7.0'\n\nTo disable this warning run \"ng set warnings.typescriptMismatch=false\".\n</code></pre>\n\n<p>To fix this error did the following:</p>\n\n<ol>\n<li>Deleted all node_module instances, and uninstalled node from control panel -> add/remove programs.</li>\n<li>Reinstalled node </li>\n<li>Checked in cmd:npm view typescript version</li>\n<li>I received version as 3.2.2</li>\n<li>npm uninstall -g typescript</li>\n<li>npm cache verify</li>\n</ol>\n\n<p>Still typescript is not removed from npm. \nCan some one help me uninstall typescript completely? Been stuck on this for 2 days now.</p>\n"}, {"tags": ["typescript", "angular5", "edit-tableview"], "answers": [{"comments": [{"owner": {"reputation": 1227, "user_id": 8152794, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9jg7T.jpg?s=128&g=1", "display_name": "Fahad Subzwari", "link": "https://stackoverflow.com/users/8152794/fahad-subzwari"}, "edited": false, "score": 0, "creation_date": 1547051114, "post_id": 54114183, "comment_id": 95061419, "body": "I don&#39;t want to add additional key. So what&#39;s the solution then?"}, {"owner": {"reputation": 1227, "user_id": 8152794, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9jg7T.jpg?s=128&g=1", "display_name": "Fahad Subzwari", "link": "https://stackoverflow.com/users/8152794/fahad-subzwari"}, "edited": false, "score": 0, "creation_date": 1547051178, "post_id": 54114183, "comment_id": 95061472, "body": "Thanx for help. I have done it without adding any key :)"}, {"owner": {"reputation": 7275, "user_id": 3329836, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fc1f21187a572afe47d95587c32ce68f?s=128&d=identicon&r=PG", "display_name": "Jamie Rees", "link": "https://stackoverflow.com/users/3329836/jamie-rees"}, "reply_to_user": {"reputation": 1227, "user_id": 8152794, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9jg7T.jpg?s=128&g=1", "display_name": "Fahad Subzwari", "link": "https://stackoverflow.com/users/8152794/fahad-subzwari"}, "edited": false, "score": 0, "creation_date": 1547057797, "post_id": 54114183, "comment_id": 95064923, "body": "How did you do it?"}, {"owner": {"reputation": 1227, "user_id": 8152794, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9jg7T.jpg?s=128&g=1", "display_name": "Fahad Subzwari", "link": "https://stackoverflow.com/users/8152794/fahad-subzwari"}, "edited": false, "score": 0, "creation_date": 1547102982, "post_id": 54114183, "comment_id": 95078039, "body": "By putting condition <code>*ngIf=&quot;domain._id === editId&quot;</code>. and on edit i set editId = domain._id"}], "tags": [], "owner": {"reputation": 7275, "user_id": 3329836, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fc1f21187a572afe47d95587c32ce68f?s=128&d=identicon&r=PG", "display_name": "Jamie Rees", "link": "https://stackoverflow.com/users/3329836/jamie-rees"}, "is_accepted": true, "score": 3, "last_activity_date": 1547050373, "creation_date": 1547050373, "answer_id": 54114183, "question_id": 54114084, "link": "https://stackoverflow.com/questions/54114084/how-can-i-edit-specific-row-in-table-using-angular5/54114183#54114183", "title": "How can i edit specific row in table using angular5?", "body": "<p>What I would do is set a property on each row to indicate if it's being edited as shown below:</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-usbhmd\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-usbhmd</a></p>\n\n<p>The code for people that do not want to click that.</p>\n\n<p><strong>Html</strong></p>\n\n<pre><code>&lt;table class=\"table table-hover\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Domain&lt;/th&gt;\n      &lt;th&gt;Registered Date&lt;/th&gt;\n      &lt;th&gt;Action&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr *ngFor=\"let domain of domains; let i = index\"&gt;\n      &lt;td&gt;\n        &lt;span *ngIf=\"!domain.editable\"&gt;{{domain.name}}&lt;/span&gt;\n        &lt;input type=\"text\" class=\"form-control\" [(ngModel)]=\"domain.name\" *ngIf=\"domain.editable\"/&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n        &lt;span *ngIf=\"!domain.editable\"&gt;{{domain.reg_date}}&lt;/span&gt;\n         &lt;input type=\"date\" class=\"form-control\" [(ngModel)]=\"domain.reg_date\" *ngIf=\"domain.editable\"/&gt;\n      &lt;/td&gt;\n      &lt;td&gt;&lt;button class=\"btn btn-primary\" (click)=\"editDomain(domain)\"&gt;Edit&lt;/button&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>Component</strong></p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: [ './app.component.css' ]\n})\nexport class AppComponent  {\n  name = 'Angular';\n  domains = [];\n  isVisible : boolean = false;\n  constructor(){\n      this.domains = [\n    {\n      \"_id\" : \"12323vdfvd234\",\n      \"name\" : \"sixlogs.com\",\n      \"reg_date\" : \"2018-04-04\",\n      \"editable\": false\n    },\n    {\n      \"_id\" : \"12323vdfvd234\",\n      \"name\" : \"avanza.com\",\n      \"reg_date\" : \"2019-04-04\",\n      \"editable\": false\n    },\n    {\n      \"_id\" : \"12323vdfvd234\",\n      \"name\" : \"tps.com\",\n      \"reg_date\" : \"2018-04-04\",\n      \"editable\": false\n    },\n    {\n      \"_id\" : \"12323vdfvd234\",\n      \"name\" : \"utf.com\",\n      \"reg_date\" : \"2019-04-04\",\n      \"editable\": false\n    }\n  ]\n}\n\neditDomain(domain: any){\n    domain.editable = !domain.editable;\n  }\n}\n</code></pre>\n\n<p>As you can see I have added the <code>editable</code> property to the <code>domains</code> array, that gets set for the object when the <code>editDomain</code> get's triggered by the button click\nevent. With the <code>editable</code> property you can then changed your view to display inputs for each row.</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 4239928, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QzZl3LYnK-0/AAAAAAAAAAI/AAAAAAAAAE0/4rD98pxnWac/photo.jpg?sz=128", "display_name": "Safnas", "link": "https://stackoverflow.com/users/4239928/safnas"}, "is_accepted": false, "score": 1, "last_activity_date": 1608368220, "creation_date": 1608368220, "answer_id": 65368158, "question_id": 54114084, "link": "https://stackoverflow.com/questions/54114084/how-can-i-edit-specific-row-in-table-using-angular5/65368158#65368158", "title": "How can i edit specific row in table using angular5?", "body": "<p>use index of the row</p>\n<p>editable attribute in data won't be available generally</p>\n<p><a href=\"https://angular-ivy-dfeleo.stackblitz.io\" rel=\"nofollow noreferrer\">https://angular-ivy-dfeleo.stackblitz.io</a></p>\n<p><a href=\"https://stackblitz.com/edit/angular-ivy-dfeleo?devtoolsheight=33&amp;file=src/app/app.component.html\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-ivy-dfeleo?devtoolsheight=33&amp;file=src/app/app.component.html</a></p>\n"}], "owner": {"reputation": 1227, "user_id": 8152794, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9jg7T.jpg?s=128&g=1", "display_name": "Fahad Subzwari", "link": "https://stackoverflow.com/users/8152794/fahad-subzwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3803, "favorite_count": 0, "accepted_answer_id": 54114183, "answer_count": 2, "score": 0, "last_activity_date": 1608368220, "creation_date": 1547050022, "question_id": 54114084, "link": "https://stackoverflow.com/questions/54114084/how-can-i-edit-specific-row-in-table-using-angular5", "title": "How can i edit specific row in table using angular5?", "body": "<p>I have a table in my component having multiple records. I want to edit specific row on click edit button in table. But when it is make all rows editable.</p>\n\n<p>I have my table like this</p>\n\n<p>I have a table in which there are multiple rows. When i click on edit button within table so it make all rows of the table editable. Here is my code at stackblitz </p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-h4hgkz\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-h4hgkz</a></p>\n\n<p>When i click on edit button so it make all rows editable.</p>\n\n<p>I want only clicked row editable. How can i do it?</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "is_accepted": true, "score": 3, "last_activity_date": 1547049573, "creation_date": 1547049573, "answer_id": 54113949, "question_id": 54113805, "link": "https://stackoverflow.com/questions/54113805/how-to-display-a-string-value-on-multiple-lines-in-a-paragraph-that-contains-br/54113949#54113949", "title": "How to display a string value on multiple lines in a paragraph that contains &lt;br&gt; as a new line character", "body": "<p>One way to do it is to set the paragraph content with <code>[innerHTML]</code>:</p>\n\n<pre><code>&lt;p [innerHTML]=\"previewEmailMessage.message\"&gt;&lt;/p&gt;\n</code></pre>\n\n<p>See <a href=\"https://stackblitz.com/edit/angular-ojnact\" rel=\"nofollow noreferrer\">this stackblitz</a> for a demo.</p>\n"}, {"tags": [], "owner": {"reputation": 8011, "user_id": 3049127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9ef44fca009f9f18ecaf67b5c53936?s=128&d=identicon&r=PG&f=1", "display_name": "Shilly", "link": "https://stackoverflow.com/users/3049127/shilly"}, "is_accepted": false, "score": 1, "last_activity_date": 1547049703, "creation_date": 1547049703, "answer_id": 54113993, "question_id": 54113805, "link": "https://stackoverflow.com/questions/54113805/how-to-display-a-string-value-on-multiple-lines-in-a-paragraph-that-contains-br/54113993#54113993", "title": "How to display a string value on multiple lines in a paragraph that contains &lt;br&gt; as a new line character", "body": "<p>If this is the salesforce API, you can try using <code>this.previewEmailMessage.HtmlBody</code> instead.\nCan't immediately remember if there was a signature HTML field as well.</p>\n"}], "owner": {"reputation": 589, "user_id": 7109092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b647ea33e3f46e2334da3cf849ea03?s=128&d=identicon&r=PG", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/7109092/ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 54113949, "answer_count": 2, "score": 1, "last_activity_date": 1547049703, "creation_date": 1547049153, "question_id": 54113805, "link": "https://stackoverflow.com/questions/54113805/how-to-display-a-string-value-on-multiple-lines-in-a-paragraph-that-contains-br", "title": "How to display a string value on multiple lines in a paragraph that contains &lt;br&gt; as a new line character", "body": "<p>I am trying to display a string in a paragraph and this string contains <br> for the purpose of displaying it new line.</p>\n\n<p>But only thing i am getting is  br tag when i intend to break the line.</p>\n\n<p>This is my <strong>TypeScript</strong> method.</p>\n\n<pre><code>   viewEmailMessage(messageId: number): void {\n    console.log(messageId);\n    this.previewEmailMessage = new EmailMessage();\n    this.previewEmailMessage = this.emailMessageList.filter(item =&gt; item.id == messageId)[0];\n    console.log(this.previewEmailMessage);\n    this.previewEmailMessage.message = this.previewEmailMessage.message.replace(/(\\n)+/g, '&lt;br&gt;');\n    this.previewEmailMessage.signature = this.previewEmailMessage.signature.replace(/(\\n)+/g,'&lt;br&gt;')\n  }\n</code></pre>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;div class=\"modal fade\" id=\"preview-send\" role=\"dialog\"&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n\n\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n        &lt;h4 class=\"modal-title\"&gt;Preview&lt;/h4&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-body\"&gt;\n        &lt;div class=\"preview-content\"&gt;\n          &lt;div class=\"title\"&gt;\n            &lt;h2&gt;{{previewEmailMessage.title}}&lt;/h2&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"subject\"&gt;\n            &lt;p&gt;{{previewEmailMessage.subject}}&lt;/p&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"description\"&gt;\n            &lt;p&gt;{{previewEmailMessage.message}}&lt;/p&gt;\n          &lt;/div&gt;\n          &lt;div class=\"signature-wrap\"&gt; \n            &lt;p&gt;{{previewEmailMessage.signature}}&lt;/p&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer\"&gt;\n        &lt;button type=\"button\" class=\"btn default-btn\" data-dismiss=\"modal\"&gt;Send&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Result: <a href=\"https://i.stack.imgur.com/YJQ87.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YJQ87.png\" alt=\"Actual Output\"></a></p>\n\n<p>How can I display this on new line whenever line break occur in html.</p>\n"}, {"tags": ["javascript", "typescript", "es6-modules"], "comments": [{"owner": {"reputation": 813, "user_id": 6262037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VjFSr.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6262037/richard"}, "edited": false, "score": 0, "creation_date": 1547047873, "post_id": 54113401, "comment_id": 95059354, "body": "You can import the individual types from the library, or potentially get the whole third party class type, rather than importing everything?"}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1547048340, "post_id": 54113401, "comment_id": 95059625, "body": "I wouldn&#39;t expect to see that in the JS output, TS usually doesn&#39;t emit unused imports or imports only used as type annotation. You could also try creating a global type definition that simply exposes the third party types on global."}, {"owner": {"reputation": 132743, "user_id": 905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130b8a67fd029b2e6b5e56e7aad04952?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/905/keith"}, "reply_to_user": {"reputation": 813, "user_id": 6262037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VjFSr.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6262037/richard"}, "edited": false, "score": 0, "creation_date": 1547048514, "post_id": 54113401, "comment_id": 95059740, "body": "@Richard <code>third.party.d.ts</code> is around 3000 LoC and maintained from an npm types package - editing it is impractical."}, {"owner": {"reputation": 132743, "user_id": 905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130b8a67fd029b2e6b5e56e7aad04952?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/905/keith"}, "reply_to_user": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1547048720, "post_id": 54113401, "comment_id": 95059897, "body": "@Aaron I wouldn&#39;t either, but these definitions <i>are</i> used as they describe libraries loaded globally. It&#39;s an older API I&#39;m trying to make work with more modern code."}], "answers": [{"tags": [], "owner": {"reputation": 132743, "user_id": 905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130b8a67fd029b2e6b5e56e7aad04952?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/905/keith"}, "is_accepted": false, "score": 0, "last_activity_date": 1547049658, "creation_date": 1547049658, "answer_id": 54113979, "question_id": 54113401, "link": "https://stackoverflow.com/questions/54113401/stop-ts-including-import-of-definition-file-in-output/54113979#54113979", "title": "Stop TS including import of definition file in output", "body": "<p>I found a workaround, but I'm not sure whether it is a bug so would rather have a complete answer.</p>\n\n<p>The <code>typings/third.party.d.ts</code> file contains an <code>export = ...</code> statement, without which it won't work with <code>import</code> statements, however this appears to be what stops it working with <code>/// &lt;reference path=...</code> declarations.</p>\n\n<p>It looks like <code>/// &lt;reference path=...</code> won't work with anything that includes an explicit default module definition (though it can include <code>export module</code> and <code>export class</code>).</p>\n\n<p>It also looks like <code>import</code> is treated as an output dependency even if the file is explicitly <code>.d.ts</code>, which I think might be a bug in TS. </p>\n"}], "owner": {"reputation": 132743, "user_id": 905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130b8a67fd029b2e6b5e56e7aad04952?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/905/keith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547049658, "creation_date": 1547047708, "last_edit_date": 1547048916, "question_id": 54113401, "link": "https://stackoverflow.com/questions/54113401/stop-ts-including-import-of-definition-file-in-output", "title": "Stop TS including import of definition file in output", "body": "<p>I have a 3rd party library that is loaded dynamically with an authentication key.</p>\n\n<p>It's quite a complicated API, so I want type definitions in my TypeScript code.</p>\n\n<p>In my <code>.tsconfig</code> I'm using <code>\"target\": \"esnext\"</code> and <code>\"module\": \"esnext\"</code>.</p>\n\n<p>With a type definition <code>typings/third.party.d.ts</code> I have this in my TS code:</p>\n\n<pre><code>import * as third_party from './typings/third.party';\n</code></pre>\n\n<p>The problem is that ends up in the JS output - I don't want it to be and it shouldn't be when the source file is a <code>.d.ts</code>.</p>\n\n<p>I've tried including the extension:</p>\n\n<pre><code>import * as third_party from './typings/third.party.d.ts';\n</code></pre>\n\n<p>But this makes TS error code TS2691: <em>\"An import path cannot end with a '.d.ts' extension. Consider importing './typings/third.party' instead.\"</em></p>\n\n<p>I've tried adding:</p>\n\n<pre><code>/// &lt;reference path=\"typings/third.party.d.ts\" /&gt;\n</code></pre>\n\n<p>To the top of the file instead, but then it isn't found at all.</p>\n\n<p>I know I can hack about this with various bundlers, but I don't want the dependency - I want the TS compiler to enforce the definition from the <code>.d.ts</code> file but not try to include in the export <code>.js</code> file at all.</p>\n\n<p>How do I do that?</p>\n"}, {"tags": ["javascript", "typescript", "react-native"], "comments": [{"owner": {"reputation": 3097, "user_id": 4602928, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c04e59afdb86716b6221ed89dd3c26f1?s=128&d=identicon&r=PG&f=1", "display_name": "Wainage", "link": "https://stackoverflow.com/users/4602928/wainage"}, "edited": false, "score": 0, "creation_date": 1547048062, "post_id": 54113110, "comment_id": 95059465, "body": "So the code executes but the linter complains? Which version of <code>tsc</code>?"}, {"owner": {"reputation": 8361, "user_id": 439026, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb050c54b891309ffdd14a0e1fdd5e66?s=128&d=identicon&r=PG", "display_name": "zeh", "link": "https://stackoverflow.com/users/439026/zeh"}, "edited": false, "score": 0, "creation_date": 1547048617, "post_id": 54113110, "comment_id": 95059819, "body": "Where do you see the error, during transpilation or during execution? The <code>tsconfig.json</code> change is only supposed to act during transpilation. It doesn&#39;t add polyfills for the function, which will <i>not</i> exist on React Native executables (since they tend to use an old version of JavaScriptCore on Android). In that case you&#39;d need to add them through core-js or other polyfills. React Native is supposed to come with those through babel, but I wonder how complete it is."}, {"owner": {"reputation": 4828, "user_id": 8378419, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2772206b4d6afcbdfe7485286554190d?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Milejczak", "link": "https://stackoverflow.com/users/8378419/robbie-milejczak"}, "edited": false, "score": 0, "creation_date": 1547048991, "post_id": 54113110, "comment_id": 95060064, "body": "okay I am new to typescript so I did not realize that. This error is only being shown via tslint in VSCode. When I compile it isn&#39;t present, so I guess I&#39;m barking up the wrong tree?"}, {"owner": {"reputation": 4828, "user_id": 8378419, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2772206b4d6afcbdfe7485286554190d?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Milejczak", "link": "https://stackoverflow.com/users/8378419/robbie-milejczak"}, "edited": false, "score": 0, "creation_date": 1547050066, "post_id": 54113110, "comment_id": 95060804, "body": "also fwiw <code>Array.includes</code> and <code>Array.find</code> are polyfilled in all react-native javascript runtimes: <a href=\"https://facebook.github.io/react-native/docs/javascript-environment\" rel=\"nofollow noreferrer\">facebook.github.io/react-native/docs/javascript-environment</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6327640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69b822bd915d881e0ae0728d31a4f60?s=128&d=identicon&r=PG&f=1", "display_name": "\u041a\u043e\u043d\u0434\u0430\u043a\u043e\u0432 \u0410\u0440\u0442\u0435\u043c", "link": "https://stackoverflow.com/users/6327640/%d0%9a%d0%be%d0%bd%d0%b4%d0%b0%d0%ba%d0%be%d0%b2-%d0%90%d1%80%d1%82%d0%b5%d0%bc"}, "is_accepted": false, "score": 0, "last_activity_date": 1580504379, "creation_date": 1580504379, "answer_id": 60011139, "question_id": 54113110, "link": "https://stackoverflow.com/questions/54113110/react-native-typescript-property-includes-finds-does-not-exist-on-type/60011139#60011139", "title": "React Native, TypeScript - Property &#39;includes&#39;, &#39;finds&#39; does not exist on type &#39;any[]&#39; no matter what configuration is setup", "body": "<p>it helps me</p>\n\n<p>In tsconfig.json\n\"lib\": [\"es6\", \"ES2016.Array.Include\"],  </p>\n"}], "owner": {"reputation": 4828, "user_id": 8378419, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2772206b4d6afcbdfe7485286554190d?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Milejczak", "link": "https://stackoverflow.com/users/8378419/robbie-milejczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580504379, "creation_date": 1547046618, "question_id": 54113110, "link": "https://stackoverflow.com/questions/54113110/react-native-typescript-property-includes-finds-does-not-exist-on-type", "title": "React Native, TypeScript - Property &#39;includes&#39;, &#39;finds&#39; does not exist on type &#39;any[]&#39; no matter what configuration is setup", "body": "<p>I have found this question asked in many many many places but not a single one of the answers has worked for me. My hunch is that it has something to do with me working in react-native but I am uncertain.</p>\n\n<p>Basically I can't use es7 Array properties like <code>find</code> or <code>includes</code> without my linter claiming there is an error. There isn't one (the react-native Javascript environment includes this properties) but no matter what I do I can't remove the error.</p>\n\n<p>The bulk of responses to this issue center around altering <code>tsconfig.json</code>, specifically the <code>lib</code> or <code>target</code> properties.</p>\n\n<p>My current <code>tsconfig.json</code> is:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"allowJs\": true,\n    \"target\": \"esnext\",\n    \"outDir\": \"dist\",\n    \"module\": \"commonjs\",\n    \"sourceMap\": true,\n    \"lib\": [\"es2016.array.include\"],\n    \"jsx\": \"react-native\",\n    \"strict\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"esModuleInterop\": true,\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true\n  }\n}\n</code></pre>\n\n<p>Based on the documentation <code>es2016.array.include</code> is a valid value for the lib property but I still see the error <code>Property includes does not exist on type any[]</code>.</p>\n\n<p>I have tried setting target to es2015, es2016, es2017, es2018, es5, es6, and esnext. I have tried adding various things to my lib param including es6, es6, es7, dom, es2016, es2017, es2018, esnext, and the specific properties like es2106.array.includes but none of these values or any combination remove this error from my linter.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "edited": false, "score": 1, "creation_date": 1547046253, "post_id": 54112946, "comment_id": 95058325, "body": "it should be <code>className=&quot;main-div&quot;</code> not <code>class</code>"}, {"owner": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 2, "creation_date": 1547046381, "post_id": 54112946, "comment_id": 95058412, "body": "It literally tells you what the problem is <code>Property &#39;class&#39; does not exist</code>"}, {"owner": {"reputation": 121, "user_id": 9819211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039037402938474/picture?type=large", "display_name": "Yura  Morozov", "link": "https://stackoverflow.com/users/9819211/yura-morozov"}, "edited": false, "score": 0, "creation_date": 1547046614, "post_id": 54112946, "comment_id": 95058559, "body": "But I have the same problem with label. &lt;label for=&quot;remember-me&quot; className=&quot;remember&quot;&gt; &lt;span&gt;\u0417\u0430\u043f\u0430\u043c&#39;\u044f\u0442\u0430\u0442\u0438&lt;/span&gt; &lt;span&gt;&lt;input id=&quot;remember-me&quot; name=&quot;remember-me&quot; type=&quot;checkbox&quot;/&gt;&lt;/span&gt; &lt;/label&gt;"}, {"owner": {"reputation": 1705, "user_id": 1408451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RUZV9.jpg?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/1408451/timo"}, "edited": false, "score": 1, "creation_date": 1547046839, "post_id": 54112946, "comment_id": 95058697, "body": "Use <code>htmlFor</code> instead <code>for</code> in JSX templates."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 9819211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039037402938474/picture?type=large", "display_name": "Yura  Morozov", "link": "https://stackoverflow.com/users/9819211/yura-morozov"}, "edited": false, "score": 0, "creation_date": 1547046540, "post_id": 54112961, "comment_id": 95058513, "body": "Thank you. But I have the same problem with label. <code>&lt;label for=&quot;remember-me&quot; className=&quot;remember&quot;&gt;             &lt;span&gt;\u0417\u0430\u043f\u0430\u043c&#39;\u044f\u0442\u0430\u0442\u0438&lt;&#47;span&gt;\u00a0&lt;span&gt;&lt;input id=&quot;remember-me&quot; name=&quot;remember-me&quot; type=&quot;checkbox&quot;&#47;&gt;&lt;&#47;span&gt;         &lt;&#47;label&gt;</code>"}], "tags": [], "owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "is_accepted": false, "score": 0, "last_activity_date": 1547046114, "creation_date": 1547046114, "answer_id": 54112961, "question_id": 54112946, "link": "https://stackoverflow.com/questions/54112946/problems-in-switching-to-typescript-in-react-application/54112961#54112961", "title": "Problems in switching to TypeScript in React application", "body": "<p>You are missing a closing <code>&lt;/div&gt;</code> and the property is not <code>class</code>, but <code>className</code></p>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 3893820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/91cd12f9623383c437e054d93f3c89dc?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/3893820/dan"}, "is_accepted": false, "score": 7, "last_activity_date": 1547047382, "creation_date": 1547047382, "answer_id": 54113314, "question_id": 54112946, "link": "https://stackoverflow.com/questions/54112946/problems-in-switching-to-typescript-in-react-application/54113314#54113314", "title": "Problems in switching to TypeScript in React application", "body": "<p>The problem is that certain HTML attributes are also reserved words in Javascript, so to avoid problems, JSX syntax uses slightly different attributes from pure HTML.</p>\n\n<p>The main two you're having trouble with are:</p>\n\n<ul>\n<li><code>class</code> is now <code>className</code></li>\n<li><code>for</code> is now <code>htmlFor</code></li>\n</ul>\n\n<p>So your question would be:</p>\n\n<pre><code>&lt;div className=\"main-div\"&gt;\n    &lt;div className=\"panel\"&gt;\n    &lt;h2&gt;\u0412\u0445\u0456\u0434&lt;/h2&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And the label you posted in a comment would be:</p>\n\n<pre><code>&lt;label htmlFor=\"remember-me\" className=\"remember\"&gt;\n    &lt;span&gt;\u0417\u0430\u043f\u0430\u043c'\u044f\u0442\u0430\u0442\u0438&lt;/span&gt;\n    &lt;span&gt;&lt;input id=\"remember-me\" name=\"remember-me\" type=\"checkbox\"/&gt;&lt;/span&gt; \n&lt;/label&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4073, "user_id": 4972773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zgWz8.jpg?s=128&g=1", "display_name": "\u0430lex dyky\u0456", "link": "https://stackoverflow.com/users/4972773/%d0%b0lex-dyky%d1%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1547047611, "creation_date": 1547047611, "answer_id": 54113382, "question_id": 54112946, "link": "https://stackoverflow.com/questions/54112946/problems-in-switching-to-typescript-in-react-application/54113382#54113382", "title": "Problems in switching to TypeScript in React application", "body": "<p>yo!</p>\n\n<p>change <code>class</code> to <code>className</code> !</p>\n\n<pre><code>&lt;div className=\"main-div\"&gt;\n    &lt;div className=\"panel\"&gt;\n       &lt;h2&gt;\u0412\u0445\u0456\u0434&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 9819211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039037402938474/picture?type=large", "display_name": "Yura  Morozov", "link": "https://stackoverflow.com/users/9819211/yura-morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3224, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1547047611, "creation_date": 1547046054, "last_edit_date": 1547046554, "question_id": 54112946, "link": "https://stackoverflow.com/questions/54112946/problems-in-switching-to-typescript-in-react-application", "title": "Problems in switching to TypeScript in React application", "body": "<p>I need to switch my React app Components to Typescript. </p>\n\n<p>I installed TS package and created a <code>tsconfig.json</code> file, <code>react-app-env.d.ts</code> files. And I also changed the extension from .js to .tsx. But in one of components I have an error. For example: in <code>&lt;div&gt;</code></p>\n\n<pre><code>&lt;div class=\"main-div\"&gt;\n    &lt;div class=\"panel\"&gt;\n    &lt;h2&gt;\u0412\u0445\u0456\u0434&lt;/h2&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<blockquote>\n  <p>Type '{ children: Element[]; class: string; }' is not assignable to\n  type 'DetailedHTMLProps,\n  HTMLDivElement>'.   Property 'class' does not exist on type\n  'DetailedHTMLProps,\n  HTMLDivElement>'.ts(2322)</p>\n</blockquote>\n"}, {"tags": ["angular", "typescript", "frontend"], "comments": [{"owner": {"reputation": 173, "user_id": 8718463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c56ac6b657e5e9650af383ceb50b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Stol", "link": "https://stackoverflow.com/users/8718463/stol"}, "edited": false, "score": 0, "creation_date": 1547045294, "post_id": 54112649, "comment_id": 95057638, "body": "Are you adding the components dynamically? If so it&#39;s really easy to just call clear on the viewcontainerRef. See <a href=\"https://angular.io/guide/dynamic-component-loader#resolving-components\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 63, "user_id": 10358545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b2ba08f028668e026e326f51962a1e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/10358545/adam"}, "reply_to_user": {"reputation": 173, "user_id": 8718463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c56ac6b657e5e9650af383ceb50b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Stol", "link": "https://stackoverflow.com/users/8718463/stol"}, "edited": false, "score": 0, "creation_date": 1547045456, "post_id": 54112649, "comment_id": 95057767, "body": "I do add it &quot;dynamically&quot;. I edit my post with my solution to add it dynamically."}, {"owner": {"reputation": 1669, "user_id": 5955138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee000cb86f66861a3b7b4690715b42a?s=128&d=identicon&r=PG", "display_name": "shadowman_93", "link": "https://stackoverflow.com/users/5955138/shadowman-93"}, "edited": false, "score": 0, "creation_date": 1547046006, "post_id": 54112649, "comment_id": 95058162, "body": "You can easily put a flag for showing or hiding component. For example &lt;selector *ngIf=&quot;isHidden&quot;&gt;&lt;/selector&gt; that means your selector component will not shown on the screen."}, {"owner": {"reputation": 63, "user_id": 10358545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b2ba08f028668e026e326f51962a1e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/10358545/adam"}, "edited": false, "score": 0, "creation_date": 1547046428, "post_id": 54112649, "comment_id": 95058440, "body": "Yeah i know that, but i want to completely delete it."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1547046514, "post_id": 54112649, "comment_id": 95058497, "body": "This is a very broad question. I can think of a dozen ways to handle this. What kind of answer are you looking for?"}, {"owner": {"reputation": 173, "user_id": 8718463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c56ac6b657e5e9650af383ceb50b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Stol", "link": "https://stackoverflow.com/users/8718463/stol"}, "edited": false, "score": 0, "creation_date": 1547046814, "post_id": 54112649, "comment_id": 95058684, "body": "Ah, that&#39;s just an ngfor directive, it takes care of the whole add component and delete component for you if you just remove the user from the currentUsers array. If you want something more complex than the original directive you&#39;d most likely have to create your own directive."}, {"owner": {"reputation": 173, "user_id": 8718463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c56ac6b657e5e9650af383ceb50b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Stol", "link": "https://stackoverflow.com/users/8718463/stol"}, "edited": false, "score": 0, "creation_date": 1547047060, "post_id": 54112649, "comment_id": 95058843, "body": "Oh and ngIf actully removes the component from the DOM completely, unlike just setting hidden on it. See <a href=\"https://stackoverflow.com/questions/43034758/what-is-the-difference-between-ngif-and-hidden\">topic</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1547047555, "post_id": 54112649, "comment_id": 95059142, "body": "To sum it up : <a href=\"https://angular.io/guide/component-interaction#parent-listens-for-child-event\" rel=\"nofollow noreferrer\">outputs</a> along with <a href=\"https://angular.io/guide/displaying-data#conditional-display-with-ngif\" rel=\"nofollow noreferrer\">*ngIf</a>, <a href=\"https://angular.io/guide/structural-directives#write-a-structural-directive\" rel=\"nofollow noreferrer\">view container references</a>, <a href=\"https://angular.io/guide/dynamic-component-loader\" rel=\"nofollow noreferrer\">dynamic components</a>, and why not <a href=\"https://material.angular.io/cdk/portal/overview\" rel=\"nofollow noreferrer\">CDK dynamic components (portals)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2636, "user_id": 2436209, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/5rJZ7.jpg?s=128&g=1", "display_name": "Neil Stevens", "link": "https://stackoverflow.com/users/2436209/neil-stevens"}, "is_accepted": true, "score": 11, "last_activity_date": 1547047247, "creation_date": 1547047247, "answer_id": 54113277, "question_id": 54112649, "link": "https://stackoverflow.com/questions/54112649/how-to-let-a-component-delete-itself-on-a-button-click-with-in-angular/54113277#54113277", "title": "How to let a component delete itself on a button click with in angular", "body": "<p>As @cgTag commented there are many ways to handle this. One way is to add an <code>@Output</code> to your <code>WasGreetedComponent</code> which will emit to the parent component.</p>\n\n<p>Then in you <code>GreeterServiceComponent</code> you can find the element in the array and remove it (remember that your array should be immutable so you want to create a new instance of the array), this will cause the <code>ngFor</code> to reevaluate and update the view</p>\n\n<pre><code>@Component({\n  selector: 'app-was-greeted',\n  templateUrl: './was-greeted.component.html',\n  styleUrls: ['./was-greeted.component.scss']\n})\n\nexport class WasGreetedComponent implements OnInit {\n  @Input() user: string;\n\n  @Output() delete: EventEmitter&lt;string&gt; = new EventEmitter();\n\n  constructor() { }\n\n  deleteMe() {\n    console.log(\"here should be the action\");\n    this.delete.emit(user);\n  }\n}\n</code></pre>\n\n<p>Your parent component template would then subscribe to this emitter</p>\n\n<pre><code>&lt;div class=\"column\" *ngFor=\"let user of currentUsers\"&gt;\n    &lt;app-was-greeted [user]=\"user\" (delete)=\"deleteUser($event)\"&gt;&lt;/app-was-greeted&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And the component will need to handle the <code>deleteUser</code> callback and remove the user from the array</p>\n\n<pre><code>@Component({\n  selector: 'app-greeter-service',\n  templateUrl: './greeter-service.component.html'\n})\nexport class GreeterServiceComponent implements OnInit {\n  title = '';\n  currentUser = '';\n  isVisible = false;\n\n  currentUsers: any[] = [];\n\n  @ViewChild('newUser') inputField;\n\n  constructor() {}\n\n  ...\n\n  deleteUser(user: string) {\n    this.currentUsers = this.currentUsers.filter(x =&gt; x !== user);\n  }\n\n}\n</code></pre>\n\n<p>Like I said this is just one of many ways to skin a cat. Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 8718463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c56ac6b657e5e9650af383ceb50b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Stol", "link": "https://stackoverflow.com/users/8718463/stol"}, "is_accepted": false, "score": 1, "last_activity_date": 1547047447, "creation_date": 1547047447, "answer_id": 54113335, "question_id": 54112649, "link": "https://stackoverflow.com/questions/54112649/how-to-let-a-component-delete-itself-on-a-button-click-with-in-angular/54113335#54113335", "title": "How to let a component delete itself on a button click with in angular", "body": "<p>Let the component have an @Output parameter that the parent listens to and removes it from currentUsers, or add additional logic for the *ngFor to ignore it when drawing elements in the loop. Something like this maby?</p>\n\n<pre><code>&lt;div class=\"column\" *ngFor=\"let user of currentUsers; let i = index\"&gt;\n&lt;app-was-greeted *ngIf=\"shouldDisplay(i)\" (buttonClick)=\"removeMe(i)\" [user]=\"user\"&gt; \n&lt;/app-was-greeted&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": false, "score": 2, "last_activity_date": 1547049624, "last_edit_date": 1547049624, "creation_date": 1547048887, "answer_id": 54113727, "question_id": 54112649, "link": "https://stackoverflow.com/questions/54112649/how-to-let-a-component-delete-itself-on-a-button-click-with-in-angular/54113727#54113727", "title": "How to let a component delete itself on a button click with in angular", "body": "<blockquote>\n  <p>I can't make a component delete itself with angular.</p>\n</blockquote>\n\n<p>Let's say that the rendered HTML represents the <em>current</em> state of an application. There is a state where the component exists, and then there is a state where it doesn't exist. Don't think of it as an act of <em>deleting</em>, but that the <em>state</em> changed and afterwards the component is no longer rendered.</p>\n\n<blockquote>\n  <ol>\n  <li>Type your name</li>\n  </ol>\n</blockquote>\n\n<p>The <em>state</em> doesn't have any greetings.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Child component is created that is greeting you.</li>\n  </ol>\n</blockquote>\n\n<p>The <em>state</em> has at least one getting.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Child component contains button to delete itself</li>\n  </ol>\n</blockquote>\n\n<p>The <em>state</em> returns to not having any greetings.</p>\n\n<blockquote>\n  <p>Currently i fulfilled the first two steps and everything works fine. But i have no idea how i can make the child component delete itself. Coming from React i know, that there was the possibility to delete a \"component\" with the lifecycle methods somehow.</p>\n</blockquote>\n\n<p>If you <em>deleted</em> the component forcefully, then the components on the page would no longer represent the current <em>state</em> of the application. This is fine where you have <em>microstates</em> and an example would be something like a modal dialog. Where the dialog itself has its own state and the displaying of the dialog has a life-cycle relative to that microstate.</p>\n\n<p>I don't think this is the case given your example.</p>\n\n<pre><code>currentUsers: any[] = [];\n</code></pre>\n\n<p>The above is your <em>state</em> variable. The value of that <em>array</em> represents what will be rendered in the HTML. You can ask some questions and the answers help guide you.</p>\n\n<ol>\n<li>who owns the state?</li>\n<li>who can mutate that state?</li>\n<li>how do I ask the state owner to change it?</li>\n</ol>\n\n<p>Let's answer these questions</p>\n\n<blockquote>\n  <ol>\n  <li>who owns the state?</li>\n  </ol>\n</blockquote>\n\n<p>The <code>GreeterServiceComponent</code> component is the owner of the state, and in this case the state is represented as an array. In web components we refer to this as the component's state. It is an internal thing to the component.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>who can mutate that state?</li>\n  </ol>\n</blockquote>\n\n<p>We only want <code>GreeterServiceComponent</code> to make changes to this state. Source code outside of the class should not access it directly and mutate it. We can say that the component handles the storage and life-cycle of this internal state.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>how do I ask the state owner to change it?</li>\n  </ol>\n</blockquote>\n\n<p>This is where we get into Angular specifics. In Angular we have multiple ways to communicate between components. In this case, we want the <em>child</em> component to communicate to the <em>parent</em> component that it should <em>change</em> it's internal state. We want to tell the parent not to show the greeting anymore. Each approach to this problem has it's benefits and drawbacks, and it's up to you to decide which approach works for you.</p>\n\n<h2>@Output() bindings</h2>\n\n<p>A component in Angular can have an <code>@Output()</code> that executes an <em>expression</em> in the parent component's template. This is the same as passing a <em>callback</em> function to the properties of a React component.</p>\n\n<p>In the <code>WasGreetedComponent</code> you would add:</p>\n\n<pre><code>@Output()\npublic closed: Subject&lt;void&gt;() = new Subject();\n\ndeleteMe() { this.closed.next(); }\n</code></pre>\n\n<p>In the <code>GreeterServiceComponent</code> template you would change:</p>\n\n<pre><code>&lt;div class=\"column\" *ngFor=\"let user of currentUsers\"&gt;\n    &lt;app-was-greeted [user]=\"user\" \n                     (closed)=\"currentUsers = currentUsers.filter(u=&gt;u!==user)\"&gt;\n    &lt;/app-was-greeted&gt;\n&lt;/div&gt;\n</code></pre>\n\n<h2>Parent injection</h2>\n\n<p>A child component in Angular can inject its own parent component via the constructor, and you can then notify the parent directly.</p>\n\n<p>This approach by-passes the template, and any changes made in the parent might require the view to be updated. Therefore, it's recommended that the parent use <code>ChangeDetectorRef</code> to mark it's view as dity.</p>\n\n<p>In the <code>GreeterServiceComponent</code> you would add:</p>\n\n<pre><code> public deleteUser(user: any) {\n      this.currentUsers = this.currentUsers.filter(u=&gt;u !== user);\n      this.changeDetectorRef.markForCheck();\n }\n</code></pre>\n\n<p>In the <code>WasGreetedComponent</code> you would add:</p>\n\n<pre><code> constructor(parent: GreeterServiceComponent) {}\n deleteMe() { this.parent.deleteUser(this.user); }\n</code></pre>\n\n<h2>Global state via reactive programming</h2>\n\n<p>The final approach uses <em>reactive programming</em> where <em>observables</em> are used that allow <em>consumers</em> to watch for changes in the applications state. This has the advantage that the <em>state</em> is <em>owned</em> and <em>managed</em> by an <em>external</em> service. Popular services such as Redux/NGRX/NGXS are used heavily in Angular/React/Vue frameworks. There are many advantages to using a state store, but these are <em>difficult</em> frameworks to master and for a small project it's often overkill. Once you start using them they are difficult to quit using.</p>\n\n<p>We can create our own small version as a demonstration.</p>\n\n<p>You would add a service to represent your application state.</p>\n\n<pre><code> @Injectable({provideIn: 'root'})\n export class StateService {\n      public users: BehaviorSubject&lt;any[]&gt; = new BehaviorSubject([]);\n\n      public addUser(user: any) {\n           this.users\n             .pipe(first())\n             .subject(users =&gt; this.users.next([...users, user]));\n      }\n\n      public removeUser(user: any) {\n           this.users\n              .pipe(first())\n              .subject(users =&gt; this.users.next(users.filter(u=&gt;u !== user)));\n      }\n }\n</code></pre>\n\n<p>Now, in your <code>GreeterServiceComponent</code> it will no longer be the <em>owner</em> of the state. We will inject the above service and allow that service to manage it.</p>\n\n<pre><code>@Component({...})\nexport class GreeterServiceComponent implements OnInit {\n  constructor(public state: StateService) {}\n  greetingFunc(newUser : string) {\n      if(newUser) {\n          this.state.addUser(newUser);\n      }\n}\n</code></pre>\n\n<p>In the <code>GreeterServiceComponent</code> template we will use the <code>async</code> pipe to display the current <em>state</em> of users directly from the <code>StateService</code>. We do this because the service holds the <em>truth</em> about the current state. The <code>GreeterServiceComponent</code> component will not care about how it changes, because it does not own or manage it.</p>\n\n<pre><code>&lt;div class=\"column\" *ngFor=\"let user of state.users | async\"&gt;\n    &lt;app-was-greeted [user]=\"user\"&gt;&lt;/app-was-greeted&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The <code>WasGreetedComponent</code> component will use the <code>StateService</code> to make changes to the current <em>state</em>. This component does not care about it's parent component. You can <em>move</em> this component around in your application and it will still function correctly. This is an important benefit, because the other above approaches depend upon the structure of the DOM itself. So moving a component would require changes elsewhere to keep the component working.</p>\n\n<pre><code>@Component({...})\nexport class WasGreetedComponent implements OnInit {\n  constructor(public state: StateService) {}\n  deleteMe() {\n     this.state.removeUser(this.user);\n  }\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10358545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b2ba08f028668e026e326f51962a1e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/10358545/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7446, "favorite_count": 1, "accepted_answer_id": 54113277, "answer_count": 3, "score": 5, "last_activity_date": 1547049624, "creation_date": 1547045070, "last_edit_date": 1547045546, "question_id": 54112649, "link": "https://stackoverflow.com/questions/54112649/how-to-let-a-component-delete-itself-on-a-button-click-with-in-angular", "title": "How to let a component delete itself on a button click with in angular", "body": "<p>I can't make a component delete itself with angular. </p>\n\n<p>I am currently learning angular and started a small greeting project for the start. How the App should work:</p>\n\n<ol>\n<li>Type your name</li>\n<li>Child component is created that is greeting you. </li>\n<li>Child component contains button to delete itself</li>\n</ol>\n\n<p>Currently i fulfilled the first two steps and everything works fine. But i have no idea how i can make the child component delete itself. Coming from React i know, that there was the possibility to delete a \"component\" with the lifecycle methods somehow. Is there something similiar in angular? At the moment i can't find it, but i found the method \"OnDestroy()\" that is called, before a component is destroyed. But how do i destroy it properly? </p>\n\n<p>Parent:</p>\n\n<pre><code>import { Component, OnInit, ViewChild, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-greeter-service',\n  templateUrl: './greeter-service.component.html'\n})\nexport class GreeterServiceComponent implements OnInit {\n  title = '';\n  currentUser = '';\n  isVisible = false;\n\n  currentUsers: any[] = [];\n\n  @ViewChild('newUser') inputField;\n\n  constructor() {}\n\n  greetingFunc(newUser : string) {\n      if(newUser) {\n      this.currentUsers.push(newUser);\n      console.log(this.currentUsers);\n      this.inputField.nativeElement.value='';\n    }\n  }\n\n  ngOnInit() {\n      this.title = 'Welcome to the Greeter!';\n  }\n\n}\n</code></pre>\n\n<p>Child: </p>\n\n<pre><code>import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-was-greeted',\n  templateUrl: './was-greeted.component.html',\n  styleUrls: ['./was-greeted.component.scss']\n})\n\nexport class WasGreetedComponent implements OnInit {\n  @Input() user: string;\n\n  constructor() { }\n\n  deleteMe() {\n    console.log(\"here should be the action\");\n  }\n\n  ngOnInit() {\n  }\n}\n</code></pre>\n\n<p>How i add a component to the app \"dynamically\":</p>\n\n<pre><code>&lt;div class=\"column\" *ngFor=\"let user of currentUsers\"&gt;\n    &lt;app-was-greeted [user]=\"user\"&gt;&lt;/app-was-greeted&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So for every \"push\" in the array \"currentUsers\" a component is created. </p>\n"}, {"tags": ["angular", "typescript", "firebase", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "edited": false, "score": 0, "creation_date": 1547046094, "post_id": 54112676, "comment_id": 95058219, "body": "I have the same issue, initially <code>isLoggedIn$ | async</code> is displaying false, but when I navigate to a different  component the correct value is displayed"}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "edited": false, "score": 0, "creation_date": 1547046590, "post_id": 54112676, "comment_id": 95058545, "body": "Are you firing auth state change on navigation? If so, this might be why you get state change when navigating. Try to change the state manually to check if state change reflects well."}, {"owner": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "edited": false, "score": 0, "creation_date": 1547046890, "post_id": 54112676, "comment_id": 95058728, "body": "Sorry I don&#39;t get what you mean by &#39;firing auth state change on navigation&#39;"}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "edited": false, "score": 0, "creation_date": 1547047112, "post_id": 54112676, "comment_id": 95058876, "body": "I mean, when is the callback function in <code>onAuthStateChanged()</code> is triggered?"}, {"owner": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "edited": false, "score": 0, "creation_date": 1547047376, "post_id": 54112676, "comment_id": 95059033, "body": "I have added the complete .ts file. Please have a look. I have not added a callback function anywhere."}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "edited": false, "score": 0, "creation_date": 1547047790, "post_id": 54112676, "comment_id": 95059287, "body": "I think I get it. It displays <code>false</code> in the beginning because we give <a href=\"https://medium.com/@luukgruijs/understanding-rxjs-behaviorsubject-replaysubject-and-asyncsubject-8cc061f1cfc0\" rel=\"nofollow noreferrer\">BehaviorSubject</a><code>false</code> in the beginning. When you navigate to a different component, I think <code>firebase</code> is looking for auth state again therefore it is fired and changes the value of <code>isLoggedIn</code>. I think you need to have a look at the Firebase docs at this point."}], "tags": [], "owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "is_accepted": false, "score": 4, "last_activity_date": 1547045136, "creation_date": 1547045136, "answer_id": 54112676, "question_id": 54112543, "link": "https://stackoverflow.com/questions/54112543/shared-service-variable-is-undefined-when-checking-for-logged-user/54112676#54112676", "title": "Shared Service variable is undefined when checking for logged user", "body": "<p>It is not defined until the <code>firebase.auth().onAuthStateChanged</code> observable is completed. You can set <code>loggedIn</code> as <code>BehaviorSubject&lt;boolean&gt;</code> and use <code>async</code> pipe to get the value. Like this:</p>\n\n<pre><code>export class UserService {\n\n  private loggedIn: BehaviorSubject&lt;boolean&gt; = new BehaviorSubject(false);\n  public isLoggedIn = this.loggedIn.asObservable();\n\n\n  constructor() {\n    firebase.auth().onAuthStateChanged((user) =&gt; {\n      if (user) {\n        this.loggedIn.next(true);\n      } else {\n        this.loggedIn.next(false);\n      }\n    });\n  }\n}\n</code></pre>\n\n<p>In the component <code>.ts</code>:</p>\n\n<pre><code>isLoggedIn$ = this.userService.isLoggedIn;\nconstructor(private userService:UserService) {}\n</code></pre>\n\n<p>In the <code>.html</code>:</p>\n\n<pre><code>&lt;li *ngIf=\"!isLoggedIn$ | async\" /* ... */&gt;\n  ...\n&lt;/li&gt;\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 7870452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43269bb346a28880c5c9f9f33ee14b7?s=128&d=identicon&r=PG&f=1", "display_name": "LukeWarm2897", "link": "https://stackoverflow.com/users/7870452/lukewarm2897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547047316, "creation_date": 1547044749, "last_edit_date": 1547047316, "question_id": 54112543, "link": "https://stackoverflow.com/questions/54112543/shared-service-variable-is-undefined-when-checking-for-logged-user", "title": "Shared Service variable is undefined when checking for logged user", "body": "<p>I intend to check if a user is logged in, this information should be available throughout the application.</p>\n\n<p>To do this I have used this code in a shared service file <strong>user.service.ts</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  public loggedIn:boolean;\n\n  constructor() {\n    firebase.auth().onAuthStateChanged((user) =&gt; {\n      if (user) {\n        this.loggedIn=true;\n      } else {\n        this.loggedIn=false;\n      }\n    });\n  }\n}\n</code></pre>\n\n<p>I then injected this service into a navbar component as so</p>\n\n<p><strong>(navigation-bar.component.ts)</strong></p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../user.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-navigation-bar',\n  templateUrl: './navigation-bar.component.html',\n  styleUrls: ['./navigation-bar.component.css']\n})\nexport class NavigationBarComponent implements OnInit {\n\n  isLoggedIn$ = this.userService.isLoggedIn;\n\n  constructor(private userService:UserService, private router:Router) {\n  }\n\n  ngOnInit() {\n  }\n\n}\n</code></pre>\n\n<p><strong>(navigation-bar.component.html)</strong></p>\n\n<pre><code>&lt;li class=\"nav-item px-2\"&gt;\n  &lt;button type=\"button\" (click)=\"login()\" class=\"btn btn-info\"&gt;{{ \nuserService.loggedIn===undefined?'undefined':userService.loggedIn }} \n&lt;/button&gt;\n&lt;/li&gt;\n&lt;li *ngIf=\"!userService.loggedIn\" class=\"nav-item px-2\"&gt;\n  &lt;button type=\"button\" (click)=\"login()\" class=\"btn btn- \ninfo\"&gt;Login&lt;/button&gt;\n &lt;/li&gt;\n&lt;li *ngIf=\"userService.loggedIn\" class=\"nav-item px-2\"&gt;\n  &lt;button type=\"button\" (click)=\"logout()\" class=\"btn btn-info\"&gt;Log \nout&lt;/button&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>The <code>userService.loggedIn</code> variable is <code>undefined</code>, I want it to show either true or false depending on whether the user is signed in or not.</p>\n"}, {"tags": ["angular", "typescript", "angular7"], "comments": [{"owner": {"reputation": 22135, "user_id": 2079900, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3dv63.jpg?s=128&g=1", "display_name": "Amit Chigadani", "link": "https://stackoverflow.com/users/2079900/amit-chigadani"}, "edited": false, "score": 5, "creation_date": 1547044601, "post_id": 54112458, "comment_id": 95057187, "body": "Which angular version are you using? Add brackets to <code>@Injectable()</code>"}, {"owner": {"reputation": 3055, "user_id": 1700747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ee9e3311d4c44b4d5a56c864f11807c?s=128&d=identicon&r=PG", "display_name": "blue piranha", "link": "https://stackoverflow.com/users/1700747/blue-piranha"}, "reply_to_user": {"reputation": 22135, "user_id": 2079900, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3dv63.jpg?s=128&g=1", "display_name": "Amit Chigadani", "link": "https://stackoverflow.com/users/2079900/amit-chigadani"}, "edited": false, "score": 0, "creation_date": 1547044682, "post_id": 54112458, "comment_id": 95057233, "body": "I am using 7.0.7"}, {"owner": {"reputation": 3055, "user_id": 1700747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ee9e3311d4c44b4d5a56c864f11807c?s=128&d=identicon&r=PG", "display_name": "blue piranha", "link": "https://stackoverflow.com/users/1700747/blue-piranha"}, "reply_to_user": {"reputation": 22135, "user_id": 2079900, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3dv63.jpg?s=128&g=1", "display_name": "Amit Chigadani", "link": "https://stackoverflow.com/users/2079900/amit-chigadani"}, "edited": false, "score": 2, "creation_date": 1547044891, "post_id": 54112458, "comment_id": 95057379, "body": "OMG Thanks a lot. I wrote () in the post above but forgot in the code. Angular should do a better job in pointing the error."}], "answers": [{"tags": [], "owner": {"reputation": 22135, "user_id": 2079900, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3dv63.jpg?s=128&g=1", "display_name": "Amit Chigadani", "link": "https://stackoverflow.com/users/2079900/amit-chigadani"}, "is_accepted": false, "score": 11, "last_activity_date": 1547045259, "creation_date": 1547045259, "answer_id": 54112724, "question_id": 54112458, "link": "https://stackoverflow.com/questions/54112458/type-is-not-assignable-to-type-providedin-property-providedin-is-missing/54112724#54112724", "title": "Type is not assignable to type providedIn Property ProvidedIn is missing", "body": "<p>You have missed to add <code>parenthesis</code> for <code>@Injectable()</code> decorator</p>\n\n<pre><code>@Injectable()\nexport class ProductListService {\n   constructor(private http: HttpClient) {\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7685, "user_id": 8718377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGFwM.png?s=128&g=1", "display_name": "veben", "link": "https://stackoverflow.com/users/8718377/veben"}, "is_accepted": true, "score": 4, "last_activity_date": 1575963307, "last_edit_date": 1575963307, "creation_date": 1547045399, "answer_id": 54112765, "question_id": 54112458, "link": "https://stackoverflow.com/questions/54112458/type-is-not-assignable-to-type-providedin-property-providedin-is-missing/54112765#54112765", "title": "Type is not assignable to type providedIn Property ProvidedIn is missing", "body": "<p>Your <code>@Injectable</code> is not correct. Add the <code>providedIn</code> property which reference your component which will use the service:</p>\n\n<pre><code>@Injectable({\n  providedIn: 'app-productlist',\n})\nexport class ProductListService {\n   constructor(private http: HttpClient) {\n}\n</code></pre>\n\n<p>Another solution is to just use the decorator like that: <code>@Injectable()</code>, and to declare your service in your <code>app.module.ts</code> file, as provider</p>\n\n<pre><code>@Injectable()\nexport class ProductListService {\n   constructor(private http: HttpClient) {\n}\n</code></pre>\n"}], "owner": {"reputation": 3055, "user_id": 1700747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ee9e3311d4c44b4d5a56c864f11807c?s=128&d=identicon&r=PG", "display_name": "blue piranha", "link": "https://stackoverflow.com/users/1700747/blue-piranha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 54112765, "answer_count": 2, "score": 3, "last_activity_date": 1575963307, "creation_date": 1547044429, "last_edit_date": 1553534473, "question_id": 54112458, "link": "https://stackoverflow.com/questions/54112458/type-is-not-assignable-to-type-providedin-property-providedin-is-missing", "title": "Type is not assignable to type providedIn Property ProvidedIn is missing", "body": "<p>I am trying to create a service with the help of Angular's tutorial <a href=\"https://angular.io/guide/http\" rel=\"nofollow noreferrer\">https://angular.io/guide/http</a></p>\n\n<p>I'm using Angular <code>7.0.7</code>.</p>\n\n<p>The service would get json data from some url:</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable\nexport class ProductListService {\n  constructor(private http: HttpClient) {\n  }\n\n  productListUrl: string = \"https://blahblah.com/products\";\n\n  getProductList() {\n    return this.http.get(this.productListUrl);\n  }\n}\n</code></pre>\n\n<p>I am getting a squiggly line under <code>@Injectable()</code> with the title of this question. Why is that happening, and how do I resolve it?</p>\n\n<p>I have a component which will be using this service:</p>\n\n<pre><code> import { ProductListService } from '../services/productList.service';\n @Component({\n   selector: 'app-productlist',\n   templateUrl: './productlist.component.html',\n   styleUrls: ['./productlist.component.css'],\n   providers: [ProductListService]\n })\n</code></pre>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "input"], "comments": [{"owner": {"reputation": 1439, "user_id": 7321113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NwGHF.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/7321113/abhishek"}, "edited": false, "score": 0, "creation_date": 1547044559, "post_id": 54112225, "comment_id": 95057155, "body": "create global variable and get data from <code>@Output</code> and assign then to variable. variable value is in true and false. replace them to <code>[disabled]=&quot;variable&quot;</code>"}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547044596, "post_id": 54112225, "comment_id": 95057185, "body": "I edited your stackblitz <a href=\"https://stackblitz.com/edit/angular-file-upload-preview-wrdumr\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-file-upload-preview-wrdumr</a>"}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547044704, "post_id": 54112225, "comment_id": 95057247, "body": "@Florian, What edit you have made?? I could able to see only the result and not the code that you have changed.. Even though the output is itself like what i have given.."}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 1439, "user_id": 7321113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NwGHF.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/7321113/abhishek"}, "edited": false, "score": 0, "creation_date": 1547044784, "post_id": 54112225, "comment_id": 95057309, "body": "@Abhishek, I cannot edit anything in child because its another library and i have installed via <code>npm install fileupload</code>.."}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547045543, "post_id": 54112225, "comment_id": 95057825, "body": "@HelloWorld I didn&#39;t change in child, but I didn&#39;t understand that you need the button enabled. I&#39;m currently trying to figure out a solution"}, {"owner": {"reputation": 1439, "user_id": 7321113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NwGHF.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/7321113/abhishek"}, "edited": false, "score": 0, "creation_date": 1547046024, "post_id": 54112225, "comment_id": 95058171, "body": "@HelloWorld have you get any event after file upload in your child component?"}], "answers": [{"comments": [{"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "edited": false, "score": 0, "creation_date": 1547044977, "post_id": 54112545, "comment_id": 95057435, "body": "I have mentioned in question clearly that i cannot change child component."}, {"owner": {"reputation": 604, "user_id": 6724909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38050397d8fb79faa34183ef8b9faad?s=128&d=identicon&r=PG&f=1", "display_name": "Ved_Code_it", "link": "https://stackoverflow.com/users/6724909/ved-code-it"}, "reply_to_user": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "edited": false, "score": 0, "creation_date": 1547102315, "post_id": 54112545, "comment_id": 95077805, "body": "sorry, I missed it. could you please recheck my answer"}], "tags": [], "owner": {"reputation": 604, "user_id": 6724909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38050397d8fb79faa34183ef8b9faad?s=128&d=identicon&r=PG&f=1", "display_name": "Ved_Code_it", "link": "https://stackoverflow.com/users/6724909/ved-code-it"}, "is_accepted": false, "score": -1, "last_activity_date": 1547044752, "creation_date": 1547044752, "answer_id": 54112545, "question_id": 54112225, "link": "https://stackoverflow.com/questions/54112225/how-to-enable-the-input-and-button-from-parent-component-in-angular/54112545#54112545", "title": "How to enable the input and button from parent component in angular?", "body": "<p>Hi you can use Input property in the child component.\nhere is the working example <a href=\"https://stackblitz.com/edit/angular-file-upload-preview-ptgq2f\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-file-upload-preview-ptgq2f</a>\nPlease accept if the answer works for you.</p>\n"}, {"comments": [{"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "edited": false, "score": 0, "creation_date": 1547047546, "post_id": 54113188, "comment_id": 95059134, "body": "Is it a good way of approach?? Anyhow what will happen if i have 5 or 6 button tags inside the child component?"}], "tags": [], "owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "is_accepted": false, "score": 1, "last_activity_date": 1547065608, "last_edit_date": 1547065608, "creation_date": 1547046884, "answer_id": 54113188, "question_id": 54112225, "link": "https://stackoverflow.com/questions/54112225/how-to-enable-the-input-and-button-from-parent-component-in-angular/54113188#54113188", "title": "How to enable the input and button from parent component in angular?", "body": "<p>In your app.component.html :</p>\n\n<pre><code>&lt;app-profile-image (mouseenter)=onProfileImageHovered()&gt;&lt;/app-profile-image&gt;\n</code></pre>\n\n<p>In your app.component.ts : </p>\n\n<pre><code>onProfileImageHovered(){\n  document.getElementById('fileInput')['disabled'] = false;\n  const hoverTextCollection = document.getElementsByClassName('hover-text');\n  if (!hoverTextCollection) {\n    return null;\n  }\n  const btn = Array.from(hoverTextCollection).find((e) =&gt; {\n    return (e instanceof HTMLButtonElement &amp;&amp;\n            e.innerHTML === 'Choose file');\n  });\n  if(btn) {\n    btn['disabled'] = false;\n  }\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-file-upload-preview-wrdumr\" rel=\"nofollow noreferrer\">stackblitz</a> </p>\n"}], "owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547065608, "creation_date": 1547043714, "last_edit_date": 1547046033, "question_id": 54112225, "link": "https://stackoverflow.com/questions/54112225/how-to-enable-the-input-and-button-from-parent-component-in-angular", "title": "How to enable the input and button from parent component in angular?", "body": "<p>I am having parent component with the following,</p>\n\n<p><strong>app.component.html:</strong></p>\n\n<pre><code>&lt;h1&gt; Look at console &lt;/h1&gt;\n&lt;app-profile-image&gt;&lt;/app-profile-image&gt;\n</code></pre>\n\n<p><strong>app.component.ts:</strong></p>\n\n<pre><code>  ngOnInit() {\n\n    console.log((document.getElementById('fileInput') as any));\n\n    console.log((document.getElementById('fileInput') as any).disabled);\n\n    console.log((document.getElementsByClassName('hover-text') as any));\n\n    console.log((document.getElementsByClassName('hover-text') as any)[0].disabled)\n  }\n</code></pre>\n\n<p>You could able to see the parent and child component implementation in the <strong>example</strong> <a href=\"https://stackblitz.com/edit/angular-file-upload-preview-zaipvg\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-file-upload-preview-zaipvg</a></p>\n\n<p>Here in child component you could able to see the following,</p>\n\n<pre><code>  &lt;button class=\"hover-text\" [disabled]=\"true\"&gt;Choose file&lt;/button&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&lt;input id=\"fileInput\" type='file' (change)=\"onSelectFile($event)\" [disabled]=\"true\"&gt;\n</code></pre>\n\n<p>Both of it is in disabled state at default..</p>\n\n<p>The thing i am trying to do is <strong>need to enable these two disabled attributes using parent</strong>.</p>\n\n<p>The child <code>&lt;app-profile-image&gt;&lt;/app-profile-image&gt;</code> which i am using is library in my real application which means i cannot directly change the code of the child so via parent i need to change the <code>disabled</code> attribute to get enabled..</p>\n\n<p><strong>I have tried,</strong></p>\n\n<pre><code>console.log((document.getElementById('fileInput') as any));\n</code></pre>\n\n<p>and </p>\n\n<pre><code>console.log((document.getElementsByClassName('hover-text') as any));\n</code></pre>\n\n<p>and both gives disabled attribute (you can see the console in the given example)</p>\n\n<p>But,</p>\n\n<pre><code>console.log((document.getElementById('fileInput') as any).disabled);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>console.log((document.getElementsByClassName('hover-text') as any)[0].disabled)\n</code></pre>\n\n<p>gives the result as false but i am getting the disabled attribute in the above given console.log but then why i am getting the false as result even though the attribute was present?</p>\n\n<p>If it gives the result as <code>true</code> then it is known that disabled is true so based on the condition i can enable the button and input but don't know the reason it gives disabled as false in the console..</p>\n\n<p>Kindly help me to enable both the disabled <code>button</code> and <code>input</code> in the <a href=\"https://stackblitz.com/edit/angular-file-upload-preview-zaipvg\" rel=\"nofollow noreferrer\">given example</a> using <strong>only parent component</strong> (which is <code>app.component.ts</code> ) so that i can choose any image to upload in it..</p>\n\n<p>No way i can edit the child component because it is a library package and i am not having any code in my real application and only thing i can do is i can edit the parent component alone..</p>\n"}, {"tags": ["angular", "typescript", "ag-grid"], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 10122488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKSMV.jpg?s=128&g=1", "display_name": "Max CodeSmith", "link": "https://stackoverflow.com/users/10122488/max-codesmith"}, "is_accepted": true, "score": 1, "last_activity_date": 1547214308, "creation_date": 1547214308, "answer_id": 54147765, "question_id": 54111940, "link": "https://stackoverflow.com/questions/54111940/ag-grid-create-row-data-array-using-field-name-subsititutions/54147765#54147765", "title": "AG-Grid create row data array using field name subsititutions", "body": "<pre><code>for ( let i = 0 ; i &lt; rowOfValues ; i++ ) {\n\n    object = {};\n\n    object[rowOfColumnNames[i]] = rowOfValues[i];\n\n    rowData.push(object);\n\n}\n\nreturn rowData;\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 10122488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKSMV.jpg?s=128&g=1", "display_name": "Max CodeSmith", "link": "https://stackoverflow.com/users/10122488/max-codesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 54147765, "answer_count": 1, "score": 1, "last_activity_date": 1547214308, "creation_date": 1547042629, "question_id": 54111940, "link": "https://stackoverflow.com/questions/54111940/ag-grid-create-row-data-array-using-field-name-subsititutions", "title": "AG-Grid create row data array using field name subsititutions", "body": "<p>Using AG Grid we populate column defs array with column names returned by back end </p>\n\n<p>Consider the array below , populated with data returned by the back end :</p>\n\n<pre><code>columnDefs: [\n    { headerName: 'column_1', field: 'column_value_1' },\n    { headerName: 'column_2', field: 'column_value_2' },\n    { headerName: 'column_3', field: 'column_value_3' }\n]\n</code></pre>\n\n<p>What TypeScript syntax could be used to implement the pseudo snippet below ? :</p>\n\n<pre><code>given rowData = []\ngiven rowOfValues = [ row_value_1 , row_value_2 , row_value_3 ] // From Back End\ngiven rowOfColumnNames= [ column_value_1 , column_value_2 , column_value_3 ] // From Back End\n\nfor index = 0 ; while index &lt; rowOfValues.size ; index++\n\n add to rowData  ( rowOfColumnNames[index] : rowOfValues[index] )\n\nreturn rowData\n</code></pre>\n\n<p>As per AG_Grid specification , the resulting rowData array wouuld be as follows :</p>\n\n<pre><code>rowData = [ { \ncolumn_value_1: 'row_value_1', column_value_2 'row_value_2', column_value_3: row_value_3 } \n];\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547042952, "post_id": 54111923, "comment_id": 95056052, "body": "This is brilliant even if I don&#39;t end up using it :).  Very educational.  One thing I do not get is <code>TEnumKeys extends any</code> as a condition.  How is this not always true?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547043120, "post_id": 54111923, "comment_id": 95056156, "body": "@dagda1 That is always the question I get when I do this kind of solution :)). It is always true, but we are not interesting in the conditional behavior of conditional types, we are interested in their distributive behavior, the condition does not matter. See docs for the distributive behavior <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/advanced-types.html</a> or for my  simpler explanation here: <a href=\"https://stackoverflow.com/questions/51651499/typescript-what-is-a-naked-type-parameter/51651684#51651684\" title=\"typescript what is a naked type parameter\">stackoverflow.com/questions/51651499/&hellip;</a>"}, {"owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547043201, "post_id": 54111923, "comment_id": 95056206, "body": "I see, that makes sense.  This is great.  Might be too  unreadable for others but as I said very educational."}, {"owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547043402, "post_id": 54111923, "comment_id": 95056354, "body": "what is this actually saying <code>type GetPayload&lt;TPayloadMap, T extends PropertyKey&gt; = TPayloadMap extends Record&lt;T, infer U&gt; ? U : undefined;</code>  If <code>TPayloadMap</code> is a Record, return the generic type passed to Record?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547043497, "post_id": 54111923, "comment_id": 95056425, "body": "@dagda1 Everything is basically a <code>Record</code> in some way. It says if the key <code>T</code> is present in <code>TPayloadMap</code>  give me the type associated with it in <code>U </code>."}, {"owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547103846, "post_id": 54111923, "comment_id": 95078346, "body": "the second type argument to <code>ApiActionCreator</code> is always undefined.  So this is saying that the key <code>T</code> is never found in the <code>TPayloadMap</code>?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547106133, "post_id": 54111923, "comment_id": 95079269, "body": "@dagda1 I should not always be <code>undefined</code> in the expanded type I posted (which I copied form a tooltip, so it&#39;s the compiler not me saying it) the second argument is not always undefined, it&#39;s just hard to spot the not undefined spots ..<code>ApiActionCreator&lt;{     type: PeopleActionTypes.UPDATE; }, Fetchable&lt;Person&gt;&gt;</code>"}, {"owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547108588, "post_id": 54111923, "comment_id": 95080344, "body": "I&#39;m confused how it would ever be undefined.  Thanks for taking the time to answer these questions"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547108750, "post_id": 54111923, "comment_id": 95080425, "body": "@dagda1 if you want we can chat more on gitter.im. The undefined comes from the conditional type, I chose undefined as a default, you can change that: <code>TPayloadMap extends Record&lt;T, infer U&gt; ? U : undefined &#47;*THIS ONE*&#47;;</code>"}, {"owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "edited": false, "score": 0, "creation_date": 1547108862, "post_id": 54111923, "comment_id": 95080468, "body": "now I see, because the _FAIL and _OK are not in the keymap.  Sir, I salute you"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1547042961, "last_edit_date": 1547042961, "creation_date": 1547042573, "answer_id": 54111923, "question_id": 54111443, "link": "https://stackoverflow.com/questions/54111443/remove-duplication-in-async-api-call-types-with-typescript/54111923#54111923", "title": "remove duplication in async api call types with typescript", "body": "<p>You can avoid having to declare all the unions by using a conditional, conditional types distribute over a type parameter that contains a union. Using this behavior we can apply <code>ApiActionCreator</code> to all members of a union of enum literals. </p>\n\n<p>We can get the union of all enum of literals in <code>PeopleActionTypes</code> excluding <code>SET_CURRENT</code>, which is treated in a different way, using the <code>Exclude</code> conditional type (<code>type PeopleActionTypesKeys = Exclude&lt;PeopleActionTypes, PeopleActionTypes.SET_CURRENT&gt;</code>)</p>\n\n<p>The only problem that remains is the custom payloads for some action types. We can use an object type as a map to keep the relation between the enum member and the payload type.</p>\n\n<pre><code>type GetPayload&lt;TPayloadMap, T extends PropertyKey&gt; = TPayloadMap extends Record&lt;T, infer U&gt; ? U : undefined;\n\nexport type StandardActions&lt;TEnumKeys, TPayloadMap&gt; =\n    TEnumKeys extends any  ? ApiActionCreator&lt;{type: TEnumKeys }, GetPayload&lt;TPayloadMap, TEnumKeys&gt;&gt; \n    : never ;\n\n\nexport interface SetCurrent {\n    type: PeopleActionTypes.SET_CURRENT;\n    id: string;\n};\n\ntype PeopleActionTypesKeys = Exclude&lt;PeopleActionTypes, PeopleActionTypes.SET_CURRENT&gt;\n\nexport type PeopleActionCreators = SetCurrent | StandardActions&lt;PeopleActionTypesKeys, {\n    [PeopleActionTypes.ADD]: Fetchable&lt;Person&gt;,\n    [PeopleActionTypes.UPDATE]: Fetchable&lt;Person&gt;,\n    [PeopleActionTypes.ADD_OK]: Fetchable&lt;Person&gt;,\n}&gt;;\n</code></pre>\n\n<p>The solution above has less duplication, unfortunately you lose the nice name for the type aliases, if you hover over <code>PeopleActionCreators</code> you see:</p>\n\n<pre><code>type PeopleActionCreators = SetCurrent | ApiActionCreator&lt;{\n    type: PeopleActionTypes.GET_ALL;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.GET_ALL_OK;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.GET_ALL_FAIL;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.GET_ONE;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.GET_ONE_OK;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.GET_ONE_FAIL;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.ADD;\n}, Fetchable&lt;Person&gt;&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.ADD_OK;\n}, Fetchable&lt;Person&gt;&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.ADD_FAIL;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.UPDATE;\n}, Fetchable&lt;Person&gt;&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.UPDATE_OK;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.UPDATE_FAIL;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.REMOVE;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.REMOVE_OK;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.REMOVE_FAIL;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.RESET_PASSWORD;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.RESET_PASSWORD_OK;\n}, undefined&gt; | ApiActionCreator&lt;{\n    type: PeopleActionTypes.RESET_PASSWORD_FAIL;\n}, undefined&gt;\n</code></pre>\n\n<p>That is considerably less readable, even if it does the same, also the code itself might be more difficult to understand for others. </p>\n"}], "owner": {"reputation": 21618, "user_id": 11755, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5b9872f3076db04cb2ffb516091d80d0?s=128&d=identicon&r=PG", "display_name": "dagda1", "link": "https://stackoverflow.com/users/11755/dagda1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54111923, "answer_count": 1, "score": 1, "last_activity_date": 1547042961, "creation_date": 1547041057, "question_id": 54111443, "link": "https://stackoverflow.com/questions/54111443/remove-duplication-in-async-api-call-types-with-typescript", "title": "remove duplication in async api call types with typescript", "body": "<p>I have the following union of types:</p>\n\n<pre><code>export interface GetAll { type: PeopleActionTypes.GET_ALL; }\nexport type GetAllOk = ApiActionCreator&lt;{ type: PeopleActionTypes.GET_ALL_OK; }&gt;;\nexport type GetAllFail = ApiActionCreator&lt;{type: PeopleActionTypes.GET_ALL_FAIL}&gt;;\nexport type GetOne = ApiActionCreator&lt;{type: PeopleActionTypes.GET_ONE}&gt;;\nexport type GetOneOk = ApiActionCreator&lt;{type: PeopleActionTypes.GET_ONE_OK}&gt;;\nexport type GetOneFail = ApiActionCreator&lt;{type: PeopleActionTypes.GET_ONE_FAIL}&gt;;\nexport type Add = ApiActionCreator&lt;{type: PeopleActionTypes.ADD}, Fetchable&lt;Person&gt;&gt;;\nexport type AddOK = ApiActionCreator&lt;{type: PeopleActionTypes.ADD_OK}, Fetchable&lt;Person&gt;[]&gt;;\nexport type AddFail = ApiActionCreator&lt;{type: PeopleActionTypes.ADD_FAIL}&gt;;\nexport type Update = ApiActionCreator&lt;{type: PeopleActionTypes.UPDATE}&gt;;\nexport type UpdateOK = ApiActionCreator&lt;{type: PeopleActionTypes.UPDATE_OK}, Fetchable&lt;Person&gt;[]&gt;;\nexport type UpdateFail = ApiActionCreator&lt;{type: PeopleActionTypes.UPDATE_FAIL}&gt;;\nexport type Remove = ApiActionCreator&lt;{type: PeopleActionTypes.REMOVE}&gt;;\nexport type RemoveOK = ApiActionCreator&lt;{type: PeopleActionTypes.REMOVE_OK}&gt;;\nexport type RemoveFail = ApiActionCreator&lt;{type: PeopleActionTypes.REMOVE_FAIL}&gt;;\nexport type ResetPassword = ApiActionCreator&lt;{type: PeopleActionTypes.RESET_PASSWORD}&gt;;\nexport type ResetPasswordOK = ApiActionCreator&lt;{type: PeopleActionTypes.RESET_PASSWORD_OK}&gt;;\nexport type ResetPasswordFail = ApiActionCreator&lt;{type: PeopleActionTypes.RESET_PASSWORD_FAIL}&gt;;\n\nexport interface SetCurrent {\n  type: PeopleActionTypes.SET_CURRENT;\n  id: string;\n};\n\nexport type PeopleActionCreators =\n    SetCurrent\n    | GetAll\n    | GetAllOk\n    | GetAllFail\n    | GetOne\n    | GetOneOk\n    | GetOneFail\n    | Add\n    | AddOK\n    | AddFail\n    | Update\n    | UpdateOK\n    | UpdateFail\n    | Remove\n    | RemoveOK\n    | RemoveFail\n    | ResetPassword\n    | ResetPasswordOK\n    | ResetPasswordFail;\n</code></pre>\n\n<p>With my <code>ApiActionCreator</code> looking like this:</p>\n\n<p><code>export type ApiActionCreator&lt;T extends object, Payload = object | any[] | undefined&gt; = T &amp; { payload: Payload, error: ErrorMessage }</code></p>\n\n<p>For every operation, I have a <code>Xxx</code>, <code>XxxOK</code> and a <code>XxxFail</code>.</p>\n\n<p>Is there anyway in typescript I can somehow generate these types rather than having to create all 3 for ever operataion?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 21, "user_id": 10883918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q-zPkmzvjks/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaQaEB0zsheYvMo9kEhB-qCcgDvwQ/mo/photo.jpg?sz=128", "display_name": "Si Ci Pin", "link": "https://stackoverflow.com/users/10883918/si-ci-pin"}, "edited": false, "score": 0, "creation_date": 1547040432, "post_id": 54111149, "comment_id": 95054594, "body": "Yes, but I want after execution method to get out of method, I do not want to <code>execute this.productCart.push(product);         this.shopCartChanged.next(this.productCart);</code>"}, {"owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 0, "creation_date": 1547040561, "post_id": 54111149, "comment_id": 95054678, "body": "To finish the execution of the method you can do that. You can also make a <code>break</code> within your loop to finish the loop an continue the method if needed."}, {"owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 0, "creation_date": 1547040764, "post_id": 54111149, "comment_id": 95054785, "body": "You can also rewrite you code and use a map using your prod.name as key. So you dont have to loop over."}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "reply_to_user": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 0, "creation_date": 1547040820, "post_id": 54111149, "comment_id": 95054825, "body": "@J.Knabenschuh he should use a while loop with array.length and boolean condition, but regarding the code he posted, he should rewrite."}, {"owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 0, "creation_date": 1547041230, "post_id": 54111149, "comment_id": 95055045, "body": "Yeah of courese, he could also do that. But what is the advantage? He can also extend the for loop condition with its condition, there are a view solutions. I thought it is also interesting to know that there is a special keyword for breaking loops."}], "answers": [{"tags": [], "owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "is_accepted": false, "score": 0, "last_activity_date": 1547040512, "creation_date": 1547040512, "answer_id": 54111278, "question_id": 54111149, "link": "https://stackoverflow.com/questions/54111149/how-break-method-execution-in-the-typescript/54111278#54111278", "title": "How break method execution in the TypeScript", "body": "<p>You can find the object in your array with built-in method <a href=\"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Array/find\" rel=\"nofollow noreferrer\">find method</a>.</p>\n\n<pre><code>setProductCard(product: ProductModel) {\n  const prod = this.productCart.find((p) =&gt; p.name === product.name)\n  if (prod) {\n    prod.price += product.price;\n    prod.numberOfProduct += 1;\n  } else {\n    this.productCart.push(product);\n  }\n  this.shopCartChanged.next(this.productCart);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547041022, "post_id": 54111412, "comment_id": 95054931, "body": "productCart is an array, you can only access items inside with an index, this will throw an error."}, {"owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "reply_to_user": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547041308, "post_id": 54111412, "comment_id": 95055088, "body": "I know, this is an alternative solution not using an array as you see in my comment."}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547041523, "post_id": 54111412, "comment_id": 95055200, "body": "You talked about a Map, so if productCart is a Map object you should use <code>productCart.get(product.name)</code> to access it. Please clarify what is productCart in your solution"}], "tags": [], "owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547041961, "last_edit_date": 1547041961, "creation_date": 1547040945, "answer_id": 54111412, "question_id": 54111149, "link": "https://stackoverflow.com/questions/54111149/how-break-method-execution-in-the-typescript/54111412#54111412", "title": "How break method execution in the TypeScript", "body": "<p>You can also use a map like structure like object instead of array, maybe it is useful in your case.</p>\n\n<pre><code>setProductCart(product: ProductModel) {\n    let product = this.productCart[product.name];\n    if(product) {\n        product.price += product.price;\n        product.numberOfProduct += 1;\n    }\n    else {\n        this.productCart[product.name] = product;\n        this.shopCartChanged.next(this.productCart);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10883918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q-zPkmzvjks/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaQaEB0zsheYvMo9kEhB-qCcgDvwQ/mo/photo.jpg?sz=128", "display_name": "Si Ci Pin", "link": "https://stackoverflow.com/users/10883918/si-ci-pin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547041961, "creation_date": 1547040108, "question_id": 54111149, "link": "https://stackoverflow.com/questions/54111149/how-break-method-execution-in-the-typescript", "title": "How break method execution in the TypeScript", "body": "<p>I have easy problem. I have method <code>setProductCart</code> and I have <code>for</code> loop and in for I have <code>if</code> condition and when I execute the condition I want to back out from method. I using <code>return</code> for that, but I am not sure that is correct. </p>\n\n<pre><code>setProductCart(product: ProductModel) {\n\n        for (let i = 0; i &lt; this.productCart.length; i++) {\n            if (product.name == this.productCart[i].name) {\n\n                this.productCart[i].price += product.price;\n                this.productCart[i].numberOfProduct += 1;\n                return;\n\n\n            }\n        }\n        this.productCart.push(product);\n        this.shopCartChanged.next(this.productCart);\n\n    }\n</code></pre>\n\n<p>Does anyone know bather solution for this?</p>\n"}, {"tags": ["angular", "typescript", "angular2-ngcontent", "ng-content"], "comments": [{"owner": {"reputation": 1036, "user_id": 2036828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AC1cA.jpg?s=128&g=1", "display_name": "Jitendra G2", "link": "https://stackoverflow.com/users/2036828/jitendra-g2"}, "edited": false, "score": 2, "creation_date": 1547039649, "post_id": 54110940, "comment_id": 95054095, "body": "Is it possible to create a demo on <a href=\"https://stackblitz.com/\" rel=\"nofollow noreferrer\">stackblitz.com</a>?"}, {"owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 2, "creation_date": 1547039823, "post_id": 54110940, "comment_id": 95054196, "body": "You can use the /deep/ keyword in your css within your angular app. I do not know your css but something like should work <code>&#47;deep&#47; .highlighted-text {background-color: red;}</code> - see <a href=\"https://angular.io/guide/component-styles#deprecated-deep--and-ng-deep\" rel=\"nofollow noreferrer\">angular.io/guide/component-styles#deprecated-deep--and-ng-de&zwnj;&#8203;ep</a>"}, {"owner": {"reputation": 1449, "user_id": 867281, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/40a7122cd801b6d8304aa8717ca7c9bb?s=128&d=identicon&r=PG", "display_name": "Slaven Tomac", "link": "https://stackoverflow.com/users/867281/slaven-tomac"}, "reply_to_user": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 1, "creation_date": 1547039920, "post_id": 54110940, "comment_id": 95054265, "body": "You can do what @J.Knabenschuh said, or change encapsulation of entire component to: @Component({ . . .   encapsulation: ViewEncapsulation.None })"}, {"owner": {"reputation": 171, "user_id": 10495437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4bceed69261135469263d5ba54d67a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohandes", "link": "https://stackoverflow.com/users/10495437/mohandes"}, "reply_to_user": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 0, "creation_date": 1547040516, "post_id": 54110940, "comment_id": 95054645, "body": "@J.Knabenschuh thank you. it works."}, {"owner": {"reputation": 7665, "user_id": 894532, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/epFXH.jpg?s=128&g=1", "display_name": "Maihan Nijat", "link": "https://stackoverflow.com/users/894532/maihan-nijat"}, "reply_to_user": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "edited": false, "score": 0, "creation_date": 1547041298, "post_id": 54110940, "comment_id": 95055083, "body": "@J.Knabenschuh <code>&#47;deep&#47;</code> is deprecated."}, {"owner": {"reputation": 591, "user_id": 9176461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f55e8c4bacf465accdc786b9ec1b392?s=128&d=identicon&r=PG&f=1", "display_name": "J. Knabenschuh", "link": "https://stackoverflow.com/users/9176461/j-knabenschuh"}, "reply_to_user": {"reputation": 1449, "user_id": 867281, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/40a7122cd801b6d8304aa8717ca7c9bb?s=128&d=identicon&r=PG", "display_name": "Slaven Tomac", "link": "https://stackoverflow.com/users/867281/slaven-tomac"}, "edited": false, "score": 0, "creation_date": 1547041565, "post_id": 54110940, "comment_id": 95055223, "body": "Yeah, I know, see the link. I do not known alternative ways, exepcted the suggestion by @Slaven Tomac"}], "owner": {"reputation": 171, "user_id": 10495437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4bceed69261135469263d5ba54d67a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohandes", "link": "https://stackoverflow.com/users/10495437/mohandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547039428, "creation_date": 1547039428, "question_id": 54110940, "link": "https://stackoverflow.com/questions/54110940/angular-does-not-render-html-in-typescript", "title": "Angular does not render html in typescript", "body": "<p>I code some <code>html</code> in my component like below. I add <code>span</code> with specific class in renew <code>innerHTML</code> of an element:</p>\n\n<pre><code>        nodes = this.getAllTextnodes(this.textarea.nativeElement);\n        x1 = nodes[0].data.substring(0, this.characterLimit - 1);\n        x2 = nodes[0].data.substring(this.characterLimit - 1, nodes[0].nodeValue.length);\n        x3 = '';\n        for (let i = 1; i &lt; nodes.length; i++) {\n          x3 += '&lt;span class=\"highlighted-text\"&gt;' + nodes[i].nodeValue + '&lt;/span&gt;';\n        }\n\n        replaceContent = x1 + '&lt;span class=\"highlighted-text\"&gt;' + x2 + '&lt;/span&gt;' + x3;\n        this.textarea.nativeElement.innerHTML = replaceContent;\n</code></pre>\n\n<p>but when my code run, my class did not apply to span. I get below photo to make this sense better:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u63sd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u63sd.png\" alt=\"enter image description here\"></a></p>\n\n<p>and problem is here that i don't have <code>_ngcontent_c10</code> in my <code>span</code> , but i don't know how to fix this problem.</p>\n"}, {"tags": ["typescript", "asynchronous", "return-type"], "comments": [{"owner": {"reputation": 725, "user_id": 10030961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQLLa.jpg?s=128&g=1", "display_name": "Osakr", "link": "https://stackoverflow.com/users/10030961/osakr"}, "edited": false, "score": 2, "creation_date": 1547038055, "post_id": 54110490, "comment_id": 95053085, "body": "Should the type not be just Promise? Do you mean to get the expected type of the resolved promise? Edit: I guess not, but not an expert, I am awaiting responses"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 725, "user_id": 10030961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQLLa.jpg?s=128&g=1", "display_name": "Osakr", "link": "https://stackoverflow.com/users/10030961/osakr"}, "edited": false, "score": 2, "creation_date": 1547039511, "post_id": 54110490, "comment_id": 95054019, "body": "@Osakr is right, the way you define <code>asyncBar</code> the type will be <code>Promise&lt;{}&gt;</code> and that is correct as that is the return of the function. What do you expect <code>typebar</code> to be ? <code>Promise&lt;{one:number, two:number}&gt;</code> or do you just want <code>{one:number, two:number}</code>. We can get either one but you need to provide more info :)"}, {"owner": {"reputation": 4525, "user_id": 430531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tnJY6.jpg?s=128&g=1", "display_name": "tru7", "link": "https://stackoverflow.com/users/430531/tru7"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1547041536, "post_id": 54110490, "comment_id": 95055204, "body": "@TitianCernicova-Dragomir, yep, I want {one:number, two:number}, the type of the resolved promise"}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 1, "creation_date": 1547041796, "post_id": 54110490, "comment_id": 95055361, "body": "You can unpack a promise type with <code>type Unpack&lt;T&gt; = T extends Promise&lt;infer U&gt; ? U : never</code>"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 1, "creation_date": 1547042129, "post_id": 54110490, "comment_id": 95055567, "body": "@IngoB&#252;rk that sounds like an answer to me (or close to one), why put it where is should be :)"}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1547043144, "post_id": 54110490, "comment_id": 95056170, "body": "I&#39;m on mobile where I can&#39;t test it, which I like to do before posting an answer. But alright, I&#39;ll post it :-)"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1547043268, "post_id": 54110490, "comment_id": 95056253, "body": "@IngoB&#252;rk I test in the playground when on a mobile device :) If you switch to desktop site and use a coder keyboard it&#39;s usable ;)"}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1547043338, "post_id": 54110490, "comment_id": 95056308, "body": "Yeah, I don&#39;t have any of that. Hoping the recent announcement by Microsoft will include a better playground too... :-)"}], "answers": [{"tags": [], "owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "is_accepted": true, "score": 4, "last_activity_date": 1547043284, "last_edit_date": 1547043284, "creation_date": 1547043101, "answer_id": 54112073, "question_id": 54110490, "link": "https://stackoverflow.com/questions/54110490/return-type-of-async-method/54112073#54112073", "title": "Return type of async method", "body": "<p>You can define a type like</p>\n\n<pre><code>type Unpack&lt;T&gt; = T extends Promise&lt;infer U&gt; ? U : T;\n</code></pre>\n\n<p>and then use</p>\n\n<pre><code>class Foo {\n    async asyncBar() { return new Promise&lt;{one:1, two:2}&gt;((resolve) =&gt; resolve({ one: 1, two: 2 }));}\n}\n\ntype Unpack&lt;T&gt; = T extends Promise&lt;infer U&gt; ? U : T;\ntype typeBar = Unpack&lt;ReturnType&lt;Foo[\"asyncBar\"]&gt;&gt;;\n</code></pre>\n"}], "owner": {"reputation": 4525, "user_id": 430531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tnJY6.jpg?s=128&g=1", "display_name": "tru7", "link": "https://stackoverflow.com/users/430531/tru7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 54112073, "answer_count": 1, "score": 2, "last_activity_date": 1559058520, "creation_date": 1547037919, "last_edit_date": 1559058520, "question_id": 54110490, "link": "https://stackoverflow.com/questions/54110490/return-type-of-async-method", "title": "Return type of async method", "body": "<p>Amazingly Typescript can give the return type of a function or a class method with <code>ReturnType&lt;&gt;</code> as in:</p>\n\n<pre><code>class Foo{\n    bar(){ return {one:1, two:2};}\n}\n\ntype  typeBar = ReturnType&lt;Foo['bar']&gt;;\n</code></pre>\n\n<p>However, if the method is async, is it possible to get the type of the resolved promise? </p>\n\n<pre><code>class Foo{\n    async asyncBar() { return new Promise((resolve) =&gt; resolve({ one: 1, two: 2 }));}\n}\ntype  typeBar = ReturnType&lt;Foo['asyncBar']&gt;; // the type here is Promise\n</code></pre>\n\n<p>So what would be the operator(s) to get <code>{one:number, two:number}</code> from <code>Foo['asyncBar']</code>?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 12628, "user_id": 3244064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea793dcbaff5a5e29ad3d05ef564d86?s=128&d=identicon&r=PG", "display_name": "Andriy", "link": "https://stackoverflow.com/users/3244064/andriy"}, "edited": false, "score": 4, "creation_date": 1547038528, "post_id": 54110518, "comment_id": 95053396, "body": "You can also combine those 2 functions: <code>columns.unshift(columns.pop())</code>"}], "tags": [], "owner": {"reputation": 3093, "user_id": 7672014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fd0095c66b334d8946e1aa9cad8ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Swoox", "link": "https://stackoverflow.com/users/7672014/swoox"}, "is_accepted": true, "score": 4, "last_activity_date": 1547038272, "last_edit_date": 1547038272, "creation_date": 1547038025, "answer_id": 54110518, "question_id": 54110477, "link": "https://stackoverflow.com/questions/54110477/move-an-item-in-array-to-first-position-from-last-position-in-typescript/54110518#54110518", "title": "Move an item in array to first position from last position in typescript", "body": "<p>It's quite easy:</p>\n\n<pre><code>let last = column.pop();\ncolumn.unshift(last);\n</code></pre>\n\n<p>Pop is used to remove the last variable but you can assign it.\nUnshift will add a new item at the start of an array.</p>\n"}], "owner": {"reputation": 367, "user_id": 10487896, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FUWQZElVnEQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUijeyCdYA-iWcA4zQ-VS9C5-yGeQ/mo/photo.jpg?sz=128", "display_name": "vinuta", "link": "https://stackoverflow.com/users/10487896/vinuta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 54110518, "answer_count": 1, "score": 1, "last_activity_date": 1547038272, "creation_date": 1547037881, "question_id": 54110477, "link": "https://stackoverflow.com/questions/54110477/move-an-item-in-array-to-first-position-from-last-position-in-typescript", "title": "Move an item in array to first position from last position in typescript", "body": "<p>I have an array like this </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var column = [\"generic complaint\", \"epidemic complaint\", \"epidemic1 complaint\", \"epidemic2 complaint\", \"bal vivah\", \"name\"]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I want the Last array element to be placed in first position , the sorted array should like this </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var column = [\"name\",\"generic complaint\", \"epidemic complaint\", \"epidemic1 complaint\", \"epidemic2 complaint\", \"bal vivah\"] </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>need the solution in typescript</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable", "rxjs6"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10867959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8bf5fd1e8d6c0b87d8737ca3140733?s=128&d=identicon&r=PG&f=1", "display_name": "Yasemin K.", "link": "https://stackoverflow.com/users/10867959/yasemin-k"}, "edited": false, "score": 0, "creation_date": 1547038401, "post_id": 54110519, "comment_id": 95053307, "body": "But I still would not be able to store the value of res in postResponse."}, {"owner": {"reputation": 1392, "user_id": 2248174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1a78cfc3b13538ed7f37d899dc0597b?s=128&d=identicon&r=PG", "display_name": "Lenny D", "link": "https://stackoverflow.com/users/2248174/lenny-d"}, "edited": false, "score": 0, "creation_date": 1547038634, "post_id": 54110519, "comment_id": 95053466, "body": "What do you want to store the value into and why? are you simply displaying the value in a template? or doing more?"}], "tags": [], "owner": {"reputation": 7685, "user_id": 8718377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGFwM.png?s=128&g=1", "display_name": "veben", "link": "https://stackoverflow.com/users/8718377/veben"}, "is_accepted": false, "score": 0, "last_activity_date": 1547039323, "last_edit_date": 1547039323, "creation_date": 1547038032, "answer_id": 54110519, "question_id": 54110377, "link": "https://stackoverflow.com/questions/54110377/angular-receive-and-return-observablet-response-in-http-post/54110519#54110519", "title": "Angular - receive and return Observable&lt;T&gt; response in Http.post", "body": "<p>YThe method <code>http.post</code> already return an <code>Observable</code>, so you can directly do like that:</p>\n\n<pre><code>postARQRequest(request): Observable&lt;ArqResponse&gt;{\n    return this.http.post&lt;ArqResponse&gt;(this.arqUrl, request);\n}\n</code></pre>\n\n<p>and then subscribe to it: <code>this.arqService.postARQRequest(...).subscribe()</code></p>\n\n<p>If you want to transform an object to an Observable, you can use <code>of</code> from <strong>Rxjs6</strong>:</p>\n\n<pre><code>import { of } from 'rxjs';\n\n// ...\n\n// create an Observable from a value:\nof(someObject);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7439, "user_id": 224751, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3bf59e6fc195123f8f07126e71d89fe4?s=128&d=identicon&r=PG", "display_name": "Thor Jacobsen", "link": "https://stackoverflow.com/users/224751/thor-jacobsen"}, "is_accepted": true, "score": 5, "last_activity_date": 1547038365, "creation_date": 1547038365, "answer_id": 54110606, "question_id": 54110377, "link": "https://stackoverflow.com/questions/54110377/angular-receive-and-return-observablet-response-in-http-post/54110606#54110606", "title": "Angular - receive and return Observable&lt;T&gt; response in Http.post", "body": "<p>I'm guessing this is what you want:</p>\n\n<pre><code>postARQRequest(request): Observable&lt;ArqResponse&gt;{\n    return this.http.post&lt;ArqResponse&gt;(this.arqUrl, request);\n}\n</code></pre>\n\n<p>There's no need to subscribe to anything here. Given that <code>this.http.post</code> returns the type you want, just return that.</p>\n\n<p>If you really want to store the response in a local variable, there are some ways to do that:</p>\n\n<p>Use a promise instead, for getting the result. Make it observable using <code>of</code> later on:</p>\n\n<pre><code>async postARQRequest(request): Observable&lt;ArqResponse&gt;{\n    let postResponse = new ArqResponse;\n    postResponse = await this.http.post&lt;ArqResponse&gt;(this.arqUrl, request).toPromise();\n\n    return of(postResponse);\n}\n</code></pre>\n\n<p>Use the <code>tap</code> operator to react to the response, but not mutate it</p>\n\n<pre><code>postARQRequest(request): Observable&lt;ArqResponse&gt;{\n    return this.http.post&lt;ArqResponse&gt;(this.arqUrl, request).pipe(\n        tap((res) =&gt; ...) // do stuff with res here, but it won't be mutated\n    );\n}\n</code></pre>\n\n<p>Use the <code>map</code> operator to map the response to something else</p>\n\n<pre><code>postARQRequest(request): Observable&lt;ArqResponse&gt;{\n    return this.http.post&lt;ArqResponse&gt;(this.arqUrl, request).pipe(\n        map((res) =&gt; ...) // do stuff with res here, but it *will map to whatever you return from this handler*\n   );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 989, "user_id": 7557023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UK0sL.jpg?s=128&g=1", "display_name": "Sneha Pawar", "link": "https://stackoverflow.com/users/7557023/sneha-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1547038443, "creation_date": 1547038443, "answer_id": 54110635, "question_id": 54110377, "link": "https://stackoverflow.com/questions/54110377/angular-receive-and-return-observablet-response-in-http-post/54110635#54110635", "title": "Angular - receive and return Observable&lt;T&gt; response in Http.post", "body": "<p>I think this may help you</p>\n\n<pre><code>postARQRequest(): Observable&lt;ArqResponse[]&gt; {\n return this.http.post(this.arqUrl, request)\n .map(this.extractData()) &lt;== passing result of function\n .catch(this.handleError()); &lt;== passing result of function\n}\n</code></pre>\n\n<p>handle response and error here</p>\n\n<pre><code>private extractData(res: Response) {\n   let body = res.json(); \n   return body.data || { }; \n}\n\nprivate handleError (error: any) {\n    let errMsg = error.message || 'Server error';\n    console.error(errMsg); \n    return Observable.throw(errMsg);\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10867959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8bf5fd1e8d6c0b87d8737ca3140733?s=128&d=identicon&r=PG&f=1", "display_name": "Yasemin K.", "link": "https://stackoverflow.com/users/10867959/yasemin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2483, "favorite_count": 2, "accepted_answer_id": 54110606, "answer_count": 3, "score": 3, "last_activity_date": 1547040274, "creation_date": 1547037463, "last_edit_date": 1547040274, "question_id": 54110377, "link": "https://stackoverflow.com/questions/54110377/angular-receive-and-return-observablet-response-in-http-post", "title": "Angular - receive and return Observable&lt;T&gt; response in Http.post", "body": "<p>I implemented an method which returns an Observable. Inside this method I am using http.post to send a request to the backend. After receiving the response, which is a JSON object, I want to store this in an Observable variable and return that variable. But somehow I didn't manage to solve that problem. In .subscribe the res variable is not stored in the postResponse variable, but I can see in the \"local\" console.log that the res variable has the correct value. The global console.log is empty. Furthermore I get the error: </p>\n\n<blockquote>\n  <p>\"TS2322:\n  Type\u00a0'ArqResponse'\u00a0is\u00a0not\u00a0assignable\u00a0to\u00a0type\u00a0'Observable'\"\n  error  for the return.</p>\n</blockquote>\n\n<p>My code looks like this:</p>\n\n<pre><code>postARQRequest(request): Observable&lt;ArqResponse&gt;{\n    let postResponse = new ArqResponse;\n    const result = this.http.post&lt;ArqResponse&gt;(this.arqUrl, request)\n                       .subscribe((res: ArqResponse) =&gt; { postResponse = res; console.log('shadow: ' + res)});\n    console.log('global: ' + JSON.stringify(postResponse));\n    return postResponse;\n}\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>How can I store the response body in a variable, which then can\nbe returned?</li>\n<li>How can I \"cast\" an ArqResponse variable to an\nObservable variable?</li>\n<li><code>.subscribe</code> seems to be wrong since I get:</li>\n</ol>\n\n<blockquote>\n  <p>this.arqService.postARQRequest(...).subscribe is not a function\n      error</p>\n</blockquote>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 5905, "user_id": 451492, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fdf65c922a011afa1e050031a8895c85?s=128&d=identicon&r=PG", "display_name": "doberkofler", "link": "https://stackoverflow.com/users/451492/doberkofler"}, "edited": false, "score": 0, "creation_date": 1547047238, "post_id": 54113220, "comment_id": 95058949, "body": "I completely understand your initial remarks and I only used the Error constructor as an example for this type of use case. The second part of your feedback perfectly explains how to solve the problem. Thank you!"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1547047004, "creation_date": 1547047004, "answer_id": 54113220, "question_id": 54110204, "link": "https://stackoverflow.com/questions/54110204/how-to-deal-with-optional-parameters-in-browser-api-when-using-typescript/54113220#54113220", "title": "How to deal with optional parameters in browser API when using TypeScript", "body": "<p>Looking at the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\" rel=\"nofollow noreferrer\"><code>Error</code> documentation</a> you linked above, I see this:</p>\n\n<ul>\n<li><p><code>message</code>: Optional. A human-readable description of the error.</p></li>\n<li><p><code>fileName</code> <img src=\"https://i.stack.imgur.com/M9TSf.png\" alt=\"This API has not been standardized.\" title=\"This API has not been standardized.\">: Optional. The value for the <code>fileName</code> property on the created <code>Error</code> object. Defaults to the name of the file containing the code that called the <code>Error()</code> constructor.</p></li>\n<li><p><code>lineNumber</code> <img src=\"https://i.stack.imgur.com/M9TSf.png\" alt=\"This API has not been standardized.\" title=\"This API has not been standardized.\">:  Optional. The value for the <code>lineNumber</code> property on the created <code>Error</code> object. Defaults to the line number containing the <code>Error()</code> constructor invocation. </p></li>\n</ul>\n\n<p>Those big yellow warnings have the title \"This API has not been standardized.\" (which you can see on hover).  If you look at the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Browser_compatibility\" rel=\"nofollow noreferrer\">compatibility table</a> at the bottom of the documentation, it currently says that only Firefox supports those parameters.  Other browsers and node don't.  </p>\n\n<p>So I guess the reason TypeScript doesn't include them in its <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.2.2/lib/lib.es5.d.ts#L968-L972\" rel=\"nofollow noreferrer\">standard library definition for the <code>Error</code> constructor</a> is because it's not guaranteed to work in all JavaScript environments.</p>\n\n<hr>\n\n<p>Now if you're <strong>certain</strong> that the environment in which you will run your emitted JS code does support those parameters (i.e., if you are only going to run the code in Firefox), you can use <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#global-augmentation\" rel=\"nofollow noreferrer\">declaration merging</a> in your own TypeScript code to add the appropriate signature:</p>\n\n<pre><code>// assuming your code is in a module, so using global augmentation here\ndeclare global {\n  interface ErrorConstructor {\n    new(message?: string, fileName?: string, lineNumber?: number): Error;\n  }\n}\n</code></pre>\n\n<p>And then the compiler will not warn you:</p>\n\n<pre><code>export const iAmInAModule = true;\nthrow new Error(\"Badness happened\", \"badthing.js\", 123); // no compiler warning now\n</code></pre>\n\n<p>as you wanted.</p>\n\n<hr>\n\n<p>Hope that helps; good luck!</p>\n"}], "owner": {"reputation": 5905, "user_id": 451492, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fdf65c922a011afa1e050031a8895c85?s=128&d=identicon&r=PG", "display_name": "doberkofler", "link": "https://stackoverflow.com/users/451492/doberkofler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 54113220, "answer_count": 1, "score": 1, "last_activity_date": 1547047004, "creation_date": 1547036933, "question_id": 54110204, "link": "https://stackoverflow.com/questions/54110204/how-to-deal-with-optional-parameters-in-browser-api-when-using-typescript", "title": "How to deal with optional parameters in browser API when using TypeScript", "body": "<p>Example:</p>\n\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\" rel=\"nofollow noreferrer\">Error</a> constructor (<code>new Error([message[, fileName[, lineNumber]]])</code>) has two optional parameters (fileName and lineNumber) that I would like to use but the TypeScript compiler complains with the following error message <code>Expected 0-1 arguments, but got 3</code>.</p>\n\n<p>What is the proper way to prevent this kind of error in TypeScript?</p>\n"}, {"tags": ["typescript", "firebase", "jasmine", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 329, "user_id": 7177314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c0W3t.jpg?s=128&g=1", "display_name": "Kevin van Schaijk", "link": "https://stackoverflow.com/users/7177314/kevin-van-schaijk"}, "edited": false, "score": 0, "creation_date": 1547036484, "post_id": 54109970, "comment_id": 95052173, "body": "@dmcgrandle can you possibly help me out?"}, {"owner": {"reputation": 13013, "user_id": 2382650, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c7d1f30701e93afd6b330bb1f7479a6c?s=128&d=identicon&r=PG", "display_name": "Francisco Mateo", "link": "https://stackoverflow.com/users/2382650/francisco-mateo"}, "edited": false, "score": 0, "creation_date": 1547036514, "post_id": 54109970, "comment_id": 95052192, "body": "Have you read the docs? <a href=\"https://github.com/soumak77/firebase-mock/blob/HEAD/tutorials/client/firestore.md\" rel=\"nofollow noreferrer\">github.com/soumak77/firebase-mock/blob/HEAD/tutorials/client&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 329, "user_id": 7177314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c0W3t.jpg?s=128&g=1", "display_name": "Kevin van Schaijk", "link": "https://stackoverflow.com/users/7177314/kevin-van-schaijk"}, "reply_to_user": {"reputation": 13013, "user_id": 2382650, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c7d1f30701e93afd6b330bb1f7479a6c?s=128&d=identicon&r=PG", "display_name": "Francisco Mateo", "link": "https://stackoverflow.com/users/2382650/francisco-mateo"}, "edited": false, "score": 0, "creation_date": 1547037404, "post_id": 54109970, "comment_id": 95052720, "body": "@Francisco Mateo i did, but i can&#39;t figure out how to use it with jasmine."}, {"owner": {"reputation": 13013, "user_id": 2382650, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c7d1f30701e93afd6b330bb1f7479a6c?s=128&d=identicon&r=PG", "display_name": "Francisco Mateo", "link": "https://stackoverflow.com/users/2382650/francisco-mateo"}, "edited": false, "score": 0, "creation_date": 1547038491, "post_id": 54109970, "comment_id": 95053374, "body": "Please update your answer with what you have tried so far so others can try to help."}, {"owner": {"reputation": 329, "user_id": 7177314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c0W3t.jpg?s=128&g=1", "display_name": "Kevin van Schaijk", "link": "https://stackoverflow.com/users/7177314/kevin-van-schaijk"}, "reply_to_user": {"reputation": 13013, "user_id": 2382650, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c7d1f30701e93afd6b330bb1f7479a6c?s=128&d=identicon&r=PG", "display_name": "Francisco Mateo", "link": "https://stackoverflow.com/users/2382650/francisco-mateo"}, "edited": false, "score": 0, "creation_date": 1547039130, "post_id": 54109970, "comment_id": 95053785, "body": "@Francisco Mateo Edited!"}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 10428687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LSPshXHNLz0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVehFTcERAzHDhTaqxqHc6Lm2nrNA/mo/photo.jpg?sz=128", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10428687/marcel"}, "edited": false, "score": 0, "creation_date": 1592155178, "post_id": 59880645, "comment_id": 110317086, "body": "I cant really figure out how to alter this to test the promise the doc.update method returns. Do you maybe know how?"}, {"owner": {"reputation": 95, "user_id": 3476516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff12390a71822e7523aae1f93fbf3139?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Flegg", "link": "https://stackoverflow.com/users/3476516/mark-flegg"}, "reply_to_user": {"reputation": 124, "user_id": 10428687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LSPshXHNLz0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVehFTcERAzHDhTaqxqHc6Lm2nrNA/mo/photo.jpg?sz=128", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10428687/marcel"}, "edited": false, "score": 0, "creation_date": 1592408402, "post_id": 59880645, "comment_id": 110416544, "body": "@Marcel I&#39;ve updated my answer to specifically address the doc().update() command. Hope it helps!"}], "tags": [], "owner": {"reputation": 95, "user_id": 3476516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff12390a71822e7523aae1f93fbf3139?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Flegg", "link": "https://stackoverflow.com/users/3476516/mark-flegg"}, "is_accepted": false, "score": 2, "last_activity_date": 1592408362, "last_edit_date": 1592408362, "creation_date": 1579788989, "answer_id": 59880645, "question_id": 54109970, "link": "https://stackoverflow.com/questions/54109970/how-to-test-firestore-methods/59880645#59880645", "title": "how to test firestore methods", "body": "<p>This works for me as a basic setup for testing AngularFirestore:</p>\n\n<pre><code>{\n    const fakeAFS = jasmine.createSpyObj( 'AngularFirestore', [ 'collection' ]);\n    fakeAFS.collection.and.returnValue(jasmine.createSpyObj( 'collection', [ 'doc', 'snapshotChanges', 'valueChanges' ]));\n    fakeAFS.collection().doc.and.returnValue(jasmine.createSpyObj( 'doc', ['valueChanges']));\n    fakeAFS.collection().doc().valueChanges.and.returnValue( of('FakeDocument'));\n    fakeAFS.collection().doc().update.and.returnValue(Promise.resolve(null));\n\n    TestBed.configureTestingModule({\n        providers: [\n            { provide: AngularFirestore, useValue: fakeAFS }\n        ]\n     });\n}\n</code></pre>\n\n<p>Then, for the tests:</p>\n\n<pre><code>{\n   it('Fake afs should work', () =&gt; {\n\n        const collectionRef = fakeAFS.collection('TestCollectionName').doc('FAKE-ID').valueChanges();\n\n        expect(fakeAFS.collection).toHaveBeenCalledWith('TestCollectionName');\n        expect(fakeAFS.collection().doc).toHaveBeenCalledWith('FAKE-ID');\n        expect(collectionRef).toBeTruthy();\n    });\n   it('Fake AFS Update should work', async () =&gt; {\n       const testUpdate = await fakeAFS.collection().doc().update();\n\n       expect(testUpdate).toBe(null);\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 7177314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c0W3t.jpg?s=128&g=1", "display_name": "Kevin van Schaijk", "link": "https://stackoverflow.com/users/7177314/kevin-van-schaijk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1592408362, "creation_date": 1547036208, "last_edit_date": 1547039095, "question_id": 54109970, "link": "https://stackoverflow.com/questions/54109970/how-to-test-firestore-methods", "title": "how to test firestore methods", "body": "<p>I have the following issue:</p>\n\n<p>I want to test the following methods who make use of Firestore:</p>\n\n<p><em>databaseService.ts</em></p>\n\n<pre><code>import {Injectable} from '@angular/core';\nimport {AngularFirestore} from '@angular/fire/firestore';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class DatabaseService {\n  constructor(private afs: AngularFirestore) {\n  }\n\n  pushToDatabase(subject: string, key: string, object: Object): void {\n    this.afs.collection(subject).doc(key).set(JSON.parse(JSON.stringify(object)));\n  }\n\n  async getData(subject: string, key: string): Promise&lt;firebase.firestore.DocumentData&gt; {\n    const document = await this.afs.collection(subject).doc(key).ref.get();\n    return document.data();\n  }\n  async deleteData(subject: string, key: string) {\n    return await this.afs.collection(subject).doc(key).delete();\n  }\n}\n</code></pre>\n\n<p><em>databaseService.spec.ts</em></p>\n\n<pre><code>import {TestBed} from '@angular/core/testing';\nimport {DatabaseService} from './database.service';\nimport {AngularFirestore, AngularFirestoreModule} from '@angular/fire/firestore';\nimport {LoginComponent} from '../../components/login/login.component';\nimport {HttpClientTestingModule} from '@angular/common/http/testing';\nimport {InjectionToken} from '@angular/core';\nimport {AngularFireModule} from '@angular/fire';\nimport {async} from 'q';\nimport {AuthService} from '../auth/auth.service';\nimport {Router} from '@angular/router';\nimport {GithubService} from '../github/github.service';\n\nexport class AngularFirestoreMock {\n}\n\ndescribe('DatabaseService', () =&gt; {\n\n  let sut: DatabaseService;\n  let angularFireStore: AngularFirestore;\n\n  beforeEach(() =&gt; {\n    TestBed.configureTestingModule({\n      providers: [DatabaseService, AngularFirestore]\n    });\n\n    TestBed.overrideComponent(LoginComponent, {\n      set: {\n        providers: [\n          {provide: AngularFirestore, useClass: AngularFirestoreMock}\n        ]\n      }\n    });\n\n    sut = TestBed.get(DatabaseService);\n    angularFireStore = TestBed.get(AngularFirestore);\n\n  });\n\n  describe('#pushToDatabase', async () =&gt; {\n    it('should push data', function () {\n\n    });\n  });\n});\n</code></pre>\n\n<p>But i don't know how to start. I found &amp; installed the <a href=\"https://www.npmjs.com/package/firebase-mock\" rel=\"nofollow noreferrer\">firestore-mock</a> library. But even with this library i don't know how to proceed. </p>\n\n<p>Can someone help me out?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "edited": false, "score": 0, "creation_date": 1547036860, "post_id": 54109914, "comment_id": 95052382, "body": "formdata can hold key-value pairs and its perfectly fine to send multipart form content alongwith your regular string key-value pairs."}, {"owner": {"reputation": 1625, "user_id": 6764605, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8159ea7469e000226d5f18b730a9bf4?s=128&d=identicon&r=PG&f=1", "display_name": "justanoob", "link": "https://stackoverflow.com/users/6764605/justanoob"}, "reply_to_user": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "edited": false, "score": 1, "creation_date": 1547037367, "post_id": 54109914, "comment_id": 95052701, "body": "@KunalMukherjee My problem is not sending multipart content along with regular key-value pairs but sending them in a way that the server can unambiguously identify the file-comment pairs."}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "edited": false, "score": 0, "creation_date": 1547038921, "post_id": 54109914, "comment_id": 95053648, "body": "@justanoob assuming filename is unique, maybe you could <code>data.append(`${attachment.file.name}@file`, attachment.file)</code> and <code>data.append(`${attachment.file.name}@comment`, attachment.comment)</code>. Server-side you can easy rebuild a better structure to match comment and file that starts with the same name."}, {"owner": {"reputation": 2060, "user_id": 2861794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3804ab367637871dba57e8fb15d6a06?s=128&d=identicon&r=PG&f=1", "display_name": "J. S.", "link": "https://stackoverflow.com/users/2861794/j-s"}, "edited": false, "score": 0, "creation_date": 1547048271, "post_id": 54109914, "comment_id": 95059573, "body": "You can also stringify your JSON and parse it on server: <code>data.append(&#39;attachment&#39;, JSON.stringify(attachment))</code>"}], "owner": {"reputation": 1625, "user_id": 6764605, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8159ea7469e000226d5f18b730a9bf4?s=128&d=identicon&r=PG&f=1", "display_name": "justanoob", "link": "https://stackoverflow.com/users/6764605/justanoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1547036041, "creation_date": 1547036041, "question_id": 54109914, "link": "https://stackoverflow.com/questions/54109914/how-to-associate-additional-field-with-file-in-formdata", "title": "How to associate additional field with File in FormData", "body": "<p>In my web application i'm sending <code>FormData</code> from an Angular front-end to a Spring Boot server.</p>\n\n<p>I have the following <code>Attachment</code> model:</p>\n\n<pre><code>export interface Attachment {\n    file: File;\n    comment: string;\n}\n</code></pre>\n\n<p>I would like to send multiple attachments through one <code>FormData</code>.</p>\n\n<p>Currently i can send the files successfully with the following code:</p>\n\n<pre><code>attachments: Attachment[] = [];\n\n// pushing some data to the array\n\nconst data = new FormData();\nfor (const attachment of this.attachments) {\n      data.append('attachments', attachment.file);\n}\n\n// POSTing data to the server\n</code></pre>\n\n<p>But this doesn't include the comments along with the files.</p>\n\n<p>I would like to include the comments as well in a way that the server could identify exactly which comment belongs to which file.</p>\n\n<p>I cannot simply do something like <code>data.append('attachments', attachment)</code>, because <code>FormData</code> can only have string and <code>Blob</code> values.</p>\n\n<p>The best idea i could come up with is to add the comments to the <code>FormData</code> with the file names as the keys:</p>\n\n<pre><code>for (const attachment of this.attachments) {\n      data.append('attachments', attachment.file);\n\n      // the key is the file name and the value is the comment\n      data.append(attachment.file.name, attachment.comment);\n}\n</code></pre>\n\n<p>But this doesn't seem like a good solution and it's cumbersome to parse on the backend as well.</p>\n\n<p>Is there a better way to do this? I'd really appreciate any advice.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-reactive-forms", "angular-forms"], "comments": [{"owner": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "edited": false, "score": 0, "creation_date": 1547035961, "post_id": 54109540, "comment_id": 95051843, "body": "you could include the child form into the parent form. Then you pass the form.get(&#39;&lt;child-form-groupname&gt;&#39;) to the child by binding. So you won&#39;t need to manage the forms separately."}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1547036974, "post_id": 54109540, "comment_id": 95052451, "body": "If your form.value is like {name:..,description:...,others.properties} not {othersproperties:..,group:{name:..,description:...}} use FormgroupDirective like <a href=\"https://stackoverflow.com/questions/54073280/cascading-dropdown-fill-method-running-more-than-one-in-angular-7/54074308#54074308\" title=\"cascading dropdown fill method running more than one in angular 7\">stackoverflow.com/questions/54073280/&hellip;</a>"}, {"owner": {"reputation": 18470, "user_id": 2398593, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XQHYX.jpg?s=128&g=1", "display_name": "maxime1992", "link": "https://stackoverflow.com/users/2398593/maxime1992"}, "edited": false, "score": 0, "creation_date": 1554128182, "post_id": 54109540, "comment_id": 97627463, "body": "Hi, we (at work) have been working on that topic and I gave a proper answer you may want to check here <a href=\"https://stackoverflow.com/a/55457210/2398593\">stackoverflow.com/a/55457210/2398593</a> :)"}], "answers": [{"comments": [{"owner": {"reputation": 14622, "user_id": 532695, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67981608b1d90c4d7c5636a570fdf525?s=128&d=identicon&r=PG", "display_name": "Flavien Volken", "link": "https://stackoverflow.com/users/532695/flavien-volken"}, "edited": false, "score": 0, "creation_date": 1618838111, "post_id": 54110825, "comment_id": 118716189, "body": "In your example the nested example knows the parent while a good practice would be the parent to know the children (so that there is no cross dependency). Would it be possible to use <code>formGroupName</code> within the <code>Form1Component</code> and only expose the nested form to the child ?"}, {"owner": {"reputation": 3612, "user_id": 1403082, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/54208141329b219ea283669e84b537f5?s=128&d=identicon&r=PG", "display_name": "ylerjen", "link": "https://stackoverflow.com/users/1403082/ylerjen"}, "reply_to_user": {"reputation": 14622, "user_id": 532695, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67981608b1d90c4d7c5636a570fdf525?s=128&d=identicon&r=PG", "display_name": "Flavien Volken", "link": "https://stackoverflow.com/users/532695/flavien-volken"}, "edited": false, "score": 0, "creation_date": 1618942191, "post_id": 54110825, "comment_id": 118753988, "body": "In fact the nested form doesn&#39;t know anything about the parent (it&#39;s probably just the variable naming that made you think that). The only thing the nested form knows from the parent is that it has to pass a <code>FormGroup</code> through the <code>@Input</code>. So it&#39;s basically like all standard use of an <code>@Input</code> and the fact that a child should not know about the parent is totally respected here."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1403082, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/54208141329b219ea283669e84b537f5?s=128&d=identicon&r=PG", "display_name": "ylerjen", "link": "https://stackoverflow.com/users/1403082/ylerjen"}, "is_accepted": true, "score": 5, "last_activity_date": 1547049497, "last_edit_date": 1547049497, "creation_date": 1547039021, "answer_id": 54110825, "question_id": 54109540, "link": "https://stackoverflow.com/questions/54109540/angular-reactive-nested-forms/54110825#54110825", "title": "Angular reactive nested forms", "body": "<p>To merge your form with nested forms and have a single validation process for all of them, you can use the <code>formbuilder</code> to create the whole model object structure in the root form component.\nThen in its html template you will add the custom element of the sub-forms (ex: <code>&lt;nested-form&gt;</code>), which will render the sub-forms.</p>\n\n<p>See example : <a href=\"https://stackblitz.com/edit/angular-m5fexe\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-m5fexe</a>)</p>\n\n<p>Useful angular doc links : </p>\n\n<ul>\n<li><a href=\"https://angular.io/guide/reactive-forms#creating-nested-form-groups\" rel=\"nofollow noreferrer\">https://angular.io/guide/reactive-forms#creating-nested-form-groups</a></li>\n<li><a href=\"https://angular.io/guide/reactive-forms#step-3-generating-form-controls\" rel=\"nofollow noreferrer\">https://angular.io/guide/reactive-forms#step-3-generating-form-controls</a></li>\n</ul>\n\n<p>Code :</p>\n\n<pre><code>export class Form1Component  {\n  @Input() name: string;\n\n  public dummyForm: FormGroup;\n\n  constructor(\n      private _fb: FormBuilder,\n  ) {\n      this.createForm();\n  }\n\n  createForm() {\n    this.dummyForm = this._fb.group({\n      username: ['username', Validators.required],\n      nestedForm: this._fb.group({        \n        complement1: ['complement1', Validators.required],\n        complement2: ['complement2', Validators.required],\n      })\n    });\n  }\n\n  submit() {\n    if (this.dummyForm.valid) {\n      console.log('form AND subforms are valid', this.dummyForm.value);\n    } else {\n      console.warn('form AND/OR subforms are invalid', this.dummyForm.value);\n    }\n  }\n}\n</code></pre>\n\n<p>Template for the Form1Component :</p>\n\n<pre><code>&lt;form [formGroup]=\"dummyForm\" (ngSubmit)=\"submit()\"&gt;    \n    &lt;div&gt;\n      &lt;label for=\"username\"&gt;Root Input&lt;/label&gt;\n      &lt;input type=\"text\" id=\"username\" formControlName=\"username\"/&gt;\n    &lt;/div&gt;\n    &lt;nested-form [parentForm]=\"dummyForm\"&gt;&lt;/nested-form&gt;\n    &lt;button&gt;Send&lt;/button&gt;    \n  &lt;/form&gt;\n</code></pre>\n\n<p>Nested form code:</p>\n\n<pre><code>export class NestedFormComponent {\n  @Input()\n  public parentForm: FormGroup;\n}\n</code></pre>\n\n<p>Nested form template :</p>\n\n<pre><code>&lt;form [formGroup]=\"parentForm\"&gt;\n    &lt;div formGroupName=\"nestedForm\"&gt;\n      &lt;div&gt;\n        &lt;label for=\"complement1\"&gt;Nested input 1&lt;/label&gt;\n        &lt;input type=\"text\" formControlName=\"complement1\"/&gt;\n      &lt;/div&gt;\n      &lt;div&gt;\n        &lt;label for=\"complement1\"&gt;Nested input 1&lt;/label&gt;\n        &lt;input type=\"text\" formControlName=\"complement2\"/&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/form&gt;\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 4034856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40dab8e96b4cb4b39480cd846197982e?s=128&d=identicon&r=PG&f=1", "display_name": "ghjghgkj", "link": "https://stackoverflow.com/users/4034856/ghjghgkj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3923, "favorite_count": 1, "accepted_answer_id": 54110825, "answer_count": 1, "score": 2, "last_activity_date": 1547049497, "creation_date": 1547034811, "question_id": 54109540, "link": "https://stackoverflow.com/questions/54109540/angular-reactive-nested-forms", "title": "Angular reactive nested forms", "body": "<p>I am trying to nest multiple reactive forms in my angular project and there forms are in different components.</p>\n\n<p>For example I have a component that contains a form with two inputs one input for name and one input for description and a submit button. I call this component <code>NameDescComponent</code></p>\n\n<p>I am planning to use this component across multiple pages and forms. Here is the html for the component.</p>\n\n<pre><code>&lt;form [formGroup]=\"nameDescForm\" (ngSubmit)=\"customEmit()\"&gt;\n    &lt;div fxLayout=\"row\" fxLayoutGap=\"10px\" fxFlex&gt;\n      &lt;mat-form-field&gt;\n        &lt;input matInput placeholder=\"Name\" formControlName=\"name\"&gt;\n      &lt;/mat-form-field&gt;\n      &lt;mat-form-field fxFlex&gt;\n        &lt;input matInput placeholder=\"Description\" formControlName=\"description\"&gt;\n      &lt;/mat-form-field&gt;\n    &lt;/div&gt;\n    &lt;div fxLayout=\"column\" fxLayoutGap=\"10px\"&gt;\n      &lt;button type=\"submit\" mat-raised-button color=\"primary\"&gt;\n        {{buttonText}}\n      &lt;/button&gt;\n      &lt;div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<p>And here is the abbreviated ts file</p>\n\n<pre><code>public nameDescForm: FormGroup;\n\n\n\n@Input() public buttonText: string;\n  @Output() public save: EventEmitter&lt;any&gt; = new EventEmitter&lt;any&gt;();\n  @Output() public nameDescFormEmit: EventEmitter&lt;FormGroup&gt; = new EventEmitter&lt;FormGroup&gt;();\n\n  constructor(fb: FormBuilder) {\n    this.nameDescForm = fb.group({\n      'name': ['', Validators.required],\n      'description': ['']\n    });\n  }\n\n  public ngOnInit() {\n    console.log(this.nameDescForm);\n    this.nameDescFormEmit.emit(this.nameDescForm);\n  }\n\n  public customEmit() {\n    this.save.emit();\n  }\n</code></pre>\n\n<p>Then in a page where I am using this component I also have another form with the <code>NameDescComponent</code> inside the form, like this</p>\n\n<pre><code>&lt;form [formGroup]=\"parentForm\" (ngSubmit)=\"customEmit()\"&gt;\n\n  &lt;app-name-description (nameDescFormEmit)=\"getNameDescForm($event)\" buttonText=\"Save\" (save)=\"save()\"&gt;&lt;/app-name-description&gt;\n\n  &lt;input type=\"test\" formControlName=\"test\"&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>Currently what I am doing is passing the <code>nameDescFrom</code> from its component to the <code>ParentComponent</code> with the Output and EventEmitter. This solution seems to work and when I update child I am able to access the values. But the downside is when I go to submit the form I have to check that the <code>parentForm</code> and then <code>nameDescFrom</code> are both valid and manage both forms separately. </p>\n\n<p>I am wondering if there is a better way to approach this? When I can access the <code>nameDescFrom</code> from within the parent form?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 1, "creation_date": 1547034492, "post_id": 54109372, "comment_id": 95050947, "body": "I think it&#39;s about using &quot;+&quot; to concatenate values. try: console.log(test,&quot;--&gt;&quot;,test2)"}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 2, "creation_date": 1547034503, "post_id": 54109372, "comment_id": 95050954, "body": "Is the content of <code>this.vorgang.isEK</code> a &quot;String&quot; as in <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code>?"}, {"owner": {"reputation": 439, "user_id": 5651119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nqQ6.jpg?s=128&g=1", "display_name": "Pierre R-A", "link": "https://stackoverflow.com/users/5651119/pierre-r-a"}, "edited": false, "score": 2, "creation_date": 1547034624, "post_id": 54109372, "comment_id": 95051017, "body": "You can use <code>!!test</code> to get its boolean value. If test is undefined, it will return false, true otherwise."}, {"owner": {"reputation": 497, "user_id": 5358763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e343eb866651cf649d90595fc2b0b9?s=128&d=identicon&r=PG&f=1", "display_name": "M M", "link": "https://stackoverflow.com/users/5358763/m-m"}, "edited": false, "score": 0, "creation_date": 1547035743, "post_id": 54109372, "comment_id": 95051707, "body": "try <i>let test2 = &lt;boolean&gt;test ? true : false;</i>"}, {"owner": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "edited": false, "score": 0, "creation_date": 1547037353, "post_id": 54109372, "comment_id": 95052690, "body": "Thank you, guys, after some further investigation I found out that in fact test contains a string, though the property as well as (meanwhile) the variable are declared as boolean. I don&#39; t know why this is possible, but it is."}], "answers": [{"tags": [], "owner": {"reputation": 3162, "user_id": 5729813, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/543553a29a670d036966954eebda5a27?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar Walzade", "link": "https://stackoverflow.com/users/5729813/tushar-walzade"}, "is_accepted": false, "score": 0, "last_activity_date": 1547035232, "last_edit_date": 1547035232, "creation_date": 1547034899, "answer_id": 54109570, "question_id": 54109372, "link": "https://stackoverflow.com/questions/54109372/typescript-boolean-comparison-gives-wrong-results/54109570#54109570", "title": "Typescript Boolean-Comparison gives wrong results", "body": "<blockquote>\n  <p>It may happen in case of strings. Your <code>this.vorgang.isEK</code> might be a string.</p>\n</blockquote>\n\n<p>If so, Just replace your line <code>let test2 = test ? true : false;</code> with <code>let test4 = test3 == true ? true : false;</code>, where <strong><em>== will only check the value but not the data type</em></strong>.</p>\n\n<p>Your working snippet would be similar to the following -</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// getting it static\r\nlet test = \"false\";\r\n// Just for testing\r\nlet test2 = test == true ? true : false;\r\nconsole.log(test + ' -&gt; ' + test2);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1547040592, "post_id": 54109749, "comment_id": 95054703, "body": "You are new here :) . Please do not post an answer to comment another answer. It is not a forum. There is a link <i>&quot;add a comment&quot;</i> below each answer. You can just comment an answer, or edit your question to add some additional information, then add a comment to indicate you have completed your question."}], "tags": [], "owner": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547035479, "creation_date": 1547035479, "answer_id": 54109749, "question_id": 54109372, "link": "https://stackoverflow.com/questions/54109372/typescript-boolean-comparison-gives-wrong-results/54109749#54109749", "title": "Typescript Boolean-Comparison gives wrong results", "body": "<p>It is a boolean property:</p>\n\n<pre><code>get isEK(): boolean {\n  return this.art &amp;&amp; this.art.netto;\n}\n</code></pre>\n\n<p>The output is correct while my comparison doesn' t work. This is driving me mad.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "edited": false, "score": 0, "creation_date": 1547041196, "post_id": 54111154, "comment_id": 95055021, "body": "Thank you, I tried something similar within the getter, but it didn&#39; t solve the problem. Meanwhile I found a function called isTrueProperty() in ionic-angular/utils/utils, which did the trick on consumer-side. But still I cannot understand why a boolean-property turns into a string without explicit typecast."}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "reply_to_user": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "edited": false, "score": 0, "creation_date": 1547052724, "post_id": 54111154, "comment_id": 95062424, "body": "@DeddyH Because your &quot;boolean property&quot; is not a boolean at run time. A type declared with TypeScript doesn&#39;t ensure anything at run time. It is easy to fool the TS compiler. For example you could do: <code>let str = &#39;false&#39;; let test: boolean = str as any;</code> \u2192 here the variable <code>test</code> is a boolean at compile time but a string at run time. In particular, you can have this problem each time you take a variable from a <code>JSON.parse()</code> result."}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "reply_to_user": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "edited": false, "score": 0, "creation_date": 1547052933, "post_id": 54111154, "comment_id": 95062540, "body": "@DeddyH Additionally, the operator <code>&amp;&amp;</code> in JavaScript can be tricky. <a href=\"https://blog.mariusschulz.com/2016/05/25/the-and-and-or-operators-in-javascript\" rel=\"nofollow noreferrer\">blog.mariusschulz.com/2016/05/25/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "edited": false, "score": 0, "creation_date": 1547057896, "post_id": 54111154, "comment_id": 95064965, "body": "I see there is still much to learn left for me. I am quite new to JavaScript/TypeScript, usually I code in Pascal which is really strongly typed. But errors are there to be made once and then never again, am I right? :-)"}], "tags": [], "owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "is_accepted": false, "score": 0, "last_activity_date": 1547040121, "creation_date": 1547040121, "answer_id": 54111154, "question_id": 54109372, "link": "https://stackoverflow.com/questions/54109372/typescript-boolean-comparison-gives-wrong-results/54111154#54111154", "title": "Typescript Boolean-Comparison gives wrong results", "body": "<p>There is only one possible explanation: at runtime, the <code>test</code> variable contains the string <code>'false'</code>.</p>\n\n<pre><code>let test = 'false';\nlet test2 = test ? true : false;\nconsole.log(test + ' -&gt; ' + test2); // false -&gt; true\n</code></pre>\n\n<p>Try to use this code for the property <code>isEK</code>:</p>\n\n<pre><code>get isEK(): boolean {\n  return this.art &amp;&amp; this.art.netto ? true : false;\n}\n</code></pre>\n\n<p>You can also check a variable type at runtime with:</p>\n\n<pre><code>console.log('Type of test:', typeof test);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10889434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799c9797322371001d4d74f59e8ec40?s=128&d=identicon&r=PG&f=1", "display_name": "DeddyH", "link": "https://stackoverflow.com/users/10889434/deddyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2740, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547040121, "creation_date": 1547034306, "question_id": 54109372, "link": "https://stackoverflow.com/questions/54109372/typescript-boolean-comparison-gives-wrong-results", "title": "Typescript Boolean-Comparison gives wrong results", "body": "<p>I have a weird problem: in one of my classes there' s a readonly-property of type boolean. When I try to check this property I get unexpected results. Here' s a code-sample:</p>\n\n<pre><code>// vorgang is a reference to the class, isEK is the property\nlet test = this.vorgang.isEK;\n// Just for testing\nlet test2 = test ? true : false;\nconsole.log(test + ' -&gt; ' + test2);\n</code></pre>\n\n<p>And here's the resulting output:</p>\n\n<pre><code>true -&gt; true\nfalse -&gt; true\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["javascript", "typescript", "aurelia", "codesandbox"], "comments": [{"owner": {"reputation": 10689, "user_id": 2167109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3496781b80540d5a698d5cefe23eae?s=128&d=identicon&r=PG", "display_name": "Ashley Grant", "link": "https://stackoverflow.com/users/2167109/ashley-grant"}, "edited": false, "score": 1, "creation_date": 1547045755, "post_id": 54109160, "comment_id": 95057984, "body": "The code as written would seem correct to me. I believe the empty call to <code>setRoot</code> doesn&#39;t work when using Webpack, as Webpack needs you to be specific about what modules need to be loaded. If I had to guess, I&#39;d guess that there is a similar issue with how our CodeSandbox &quot;loader&quot; works."}, {"owner": {"reputation": 36989, "user_id": 3850405, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2b9eece8c493ba7ddcff82f845ff2af?s=128&d=identicon&r=PG&f=1", "display_name": "Ogglas", "link": "https://stackoverflow.com/users/3850405/ogglas"}, "reply_to_user": {"reputation": 10689, "user_id": 2167109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3496781b80540d5a698d5cefe23eae?s=128&d=identicon&r=PG", "display_name": "Ashley Grant", "link": "https://stackoverflow.com/users/2167109/ashley-grant"}, "edited": false, "score": 0, "creation_date": 1547046538, "post_id": 54109160, "comment_id": 95058512, "body": "@AshleyGrant I suspected the &quot;CodeSandbox loader&quot; as well at first. However I tested with Aurelia Script and got the exact same result. <a href=\"https://codesandbox.io/s/lp342n59w7\" rel=\"nofollow noreferrer\">codesandbox.io/s/lp342n59w7</a> Modified code from <a href=\"https://aurelia.io/blog/2018/11/04/aurelia-2018-q3-report/\" rel=\"nofollow noreferrer\">aurelia.io/blog/2018/11/04/aurelia-2018-q3-report</a>."}], "answers": [{"comments": [{"owner": {"reputation": 36989, "user_id": 3850405, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2b9eece8c493ba7ddcff82f845ff2af?s=128&d=identicon&r=PG&f=1", "display_name": "Ogglas", "link": "https://stackoverflow.com/users/3850405/ogglas"}, "edited": false, "score": 0, "creation_date": 1547710734, "post_id": 54227480, "comment_id": 95286982, "body": "I tried setting <code>&lt;body aurelia-app=&quot;app.js&quot;&gt;</code> in both examples but I still get the same error. See <code>Codesandbox</code>. <a href=\"https://codesandbox.io/s/lp342n59w7\" rel=\"nofollow noreferrer\">codesandbox.io/s/lp342n59w7</a> and <a href=\"https://codesandbox.io/s/0x4wvlly90\" rel=\"nofollow noreferrer\">codesandbox.io/s/0x4wvlly90</a>"}, {"owner": {"reputation": 1724, "user_id": 6672580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-6rBmPoEP_DQ/AAAAAAAAAAI/AAAAAAAAABU/17IsM_eOvmI/photo.jpg?sz=128", "display_name": "bigopon", "link": "https://stackoverflow.com/users/6672580/bigopon"}, "reply_to_user": {"reputation": 36989, "user_id": 3850405, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2b9eece8c493ba7ddcff82f845ff2af?s=128&d=identicon&r=PG&f=1", "display_name": "Ogglas", "link": "https://stackoverflow.com/users/3850405/ogglas"}, "edited": false, "score": 0, "creation_date": 1547725690, "post_id": 54227480, "comment_id": 95295104, "body": "In traditional setup, the entry of your app is <code>aurelia-bootstrapper</code>, it is responsible for finding elements with attribute: <code>aurelia-app</code> or <code>data-aurelia-app</code> and bootstrap based on the value of those attributes. What you have in those sandbox is different, you are not using the <code>aurelia-bootstrapper</code> to startup the app, instead you are starting with just a few simple line of JS."}], "tags": [], "owner": {"reputation": 1724, "user_id": 6672580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-6rBmPoEP_DQ/AAAAAAAAAAI/AAAAAAAAABU/17IsM_eOvmI/photo.jpg?sz=128", "display_name": "bigopon", "link": "https://stackoverflow.com/users/6672580/bigopon"}, "is_accepted": false, "score": 0, "last_activity_date": 1547685859, "creation_date": 1547685859, "answer_id": 54227480, "question_id": 54109160, "link": "https://stackoverflow.com/questions/54109160/aurelia-start-setroot-gives-the-error-no-applicationhost-was-specified/54227480#54227480", "title": "Aurelia start setRoot gives the error No applicationHost was specified", "body": "<p>In automatic bootstrapping, <code>aurelia-bootstrapper</code> detects elements with <code>aurelia-app</code> attribute, and based on the value specified, will load the main entry to bootstrap with the information about which elements host those <code>aurelia-app</code> attributes. That's why you can do <code>setRoot()</code> without any arguments. First argument is <code>app.js</code>, and the second argument is automatically supplied by the above detection.</p>\n\n<p>When you do manually bootstrapping like in the question code block, there is no information about root, thus the error as you saw. So it's correct, and standard way to do it that you are supplying the 2nd parameter.</p>\n"}], "owner": {"reputation": 36989, "user_id": 3850405, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2b9eece8c493ba7ddcff82f845ff2af?s=128&d=identicon&r=PG&f=1", "display_name": "Ogglas", "link": "https://stackoverflow.com/users/3850405/ogglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1547685859, "creation_date": 1547033540, "last_edit_date": 1547045817, "question_id": 54109160, "link": "https://stackoverflow.com/questions/54109160/aurelia-start-setroot-gives-the-error-no-applicationhost-was-specified", "title": "Aurelia start setRoot gives the error No applicationHost was specified", "body": "<p>Using the following code:</p>\n\n<pre><code>import { Aurelia } from \"aurelia-framework\";\n\nexport async function configure(aurelia) {\n  aurelia.use.standardConfiguration().developmentLogging();\n\n  await aurelia\n    .start()\n    .then(a =&gt; a.setRoot())\n    //.then(a =&gt; a.setRoot(\"app.js\", document.body))\n    .catch(ex =&gt; {\n      document.body.textContent = `Bootstrap error: ${ex}`;\n    });\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>Bootstrap error: Error: No applicationHost was specified.</p>\n</blockquote>\n\n<p>If I switch to use <code>.then(a =&gt; a.setRoot(\"app.js\", document.body))</code> instead of <code>.then(a =&gt; a.setRoot())</code> everything works.</p>\n\n<p>In Aurelias own quick start guide they use the following code:</p>\n\n<pre><code>import {Aurelia} from 'aurelia-framework';\n\nexport function configure(aurelia: Aurelia) {\n    aurelia.use.basicConfiguration();\n    aurelia.start().then(() =&gt; aurelia.setRoot());\n}\n</code></pre>\n\n<p>If i switch to <code>use.basicConfiguration</code> in my code I still get the same error.</p>\n\n<p><a href=\"https://aurelia.io/docs/tutorials/creating-a-todo-app#getting-ready-to-render\" rel=\"nofollow noreferrer\">https://aurelia.io/docs/tutorials/creating-a-todo-app#getting-ready-to-render</a></p>\n\n<p>Codesandbox to reproduce:</p>\n\n<p><a href=\"https://codesandbox.io/s/0x4wvlly90\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/0x4wvlly90</a></p>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "canvas"], "comments": [{"owner": {"reputation": 24997, "user_id": 7897395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2108bc8318af0d73434ffa286ba2b22f?s=128&d=identicon&r=PG&f=1", "display_name": "enxaneta", "link": "https://stackoverflow.com/users/7897395/enxaneta"}, "edited": false, "score": 0, "creation_date": 1547032412, "post_id": 54108669, "comment_id": 95049817, "body": "Tou may like to read this: <a href=\"https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\">Tainted canvases may not be exported</a>"}, {"owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "reply_to_user": {"reputation": 24997, "user_id": 7897395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2108bc8318af0d73434ffa286ba2b22f?s=128&d=identicon&r=PG&f=1", "display_name": "enxaneta", "link": "https://stackoverflow.com/users/7897395/enxaneta"}, "edited": false, "score": 0, "creation_date": 1547032683, "post_id": 54108669, "comment_id": 95049945, "body": "I tried that also but not working @enxaneta . I did an edit on the first post"}, {"owner": {"reputation": 2155, "user_id": 5909026, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-VWT4S_cML3I/AAAAAAAAAAI/AAAAAAAADdw/OpPjHPOydG4/photo.jpg?sz=128", "display_name": "Najam Us Saqib", "link": "https://stackoverflow.com/users/5909026/najam-us-saqib"}, "edited": false, "score": 0, "creation_date": 1547034958, "post_id": 54108669, "comment_id": 95051211, "body": "try this plugin: <a href=\"https://ionicframework.com/docs/native/base64/\" rel=\"nofollow noreferrer\">ionicframework.com/docs/native/base64</a>"}, {"owner": {"reputation": 300, "user_id": 10673121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6a70468b5f6ff88c3fc08c312333c3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10673121/jonathan"}, "edited": false, "score": 0, "creation_date": 1547035216, "post_id": 54108669, "comment_id": 95051390, "body": "<code>ctx.drawImage</code> is an asynchronus function. Maybe you try to convert it to base64  while its drawing on the canvas. Maybe thats why a conflict happen. You need to be sure, that the context is rendered done."}, {"owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "reply_to_user": {"reputation": 300, "user_id": 10673121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6a70468b5f6ff88c3fc08c312333c3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10673121/jonathan"}, "edited": false, "score": 0, "creation_date": 1547035563, "post_id": 54108669, "comment_id": 95051599, "body": "@Jonathan here it says it&#39;s void, doesn&#39;t return a promise <a href=\"https://developer.mozilla.org/es/docs/Web/API/CanvasRenderingContext2D/drawImage\" rel=\"nofollow noreferrer\">developer.mozilla.org/es/docs/Web/API/CanvasRenderingContext&zwnj;&#8203;2D/&hellip;</a>"}, {"owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "reply_to_user": {"reputation": 2155, "user_id": 5909026, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-VWT4S_cML3I/AAAAAAAAAAI/AAAAAAAADdw/OpPjHPOydG4/photo.jpg?sz=128", "display_name": "Najam Us Saqib", "link": "https://stackoverflow.com/users/5909026/najam-us-saqib"}, "edited": false, "score": 0, "creation_date": 1547035934, "post_id": 54108669, "comment_id": 95051826, "body": "that doesn&#39;t work @Najamussaqib , it returns an empty string"}, {"owner": {"reputation": 300, "user_id": 10673121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6a70468b5f6ff88c3fc08c312333c3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10673121/jonathan"}, "edited": false, "score": 0, "creation_date": 1547035989, "post_id": 54108669, "comment_id": 95051866, "body": "Did you try this: <a href=\"https://stackoverflow.com/questions/22710627/tainted-canvases-may-not-be-exported\" title=\"tainted canvases may not be exported\">stackoverflow.com/questions/22710627/&hellip;</a> ?"}, {"owner": {"reputation": 300, "user_id": 10673121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6a70468b5f6ff88c3fc08c312333c3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10673121/jonathan"}, "edited": false, "score": 0, "creation_date": 1547036095, "post_id": 54108669, "comment_id": 95051919, "body": "May this could help you too: <a href=\"https://ourcodeworld.com/articles/read/182/the-canvas-has-been-tainted-by-cross-origin-data-and-tainted-canvases-may-not-be-exported\" rel=\"nofollow noreferrer\">ourcodeworld.com/articles/read/182/&hellip;</a>"}, {"owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "reply_to_user": {"reputation": 300, "user_id": 10673121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6a70468b5f6ff88c3fc08c312333c3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10673121/jonathan"}, "edited": false, "score": 0, "creation_date": 1547036285, "post_id": 54108669, "comment_id": 95052033, "body": "@Jonathan Yes but I have no access over the server side"}, {"owner": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "edited": false, "score": 0, "creation_date": 1547040956, "post_id": 54108669, "comment_id": 95054903, "body": "When you say <i>&quot;but I get it in the following times I try to edit an image&quot;</i>, you mean you already did load it without the crossOrigin attribute? Then it&#39;s a cache issue (and while Chrome guys don not agree, a Chrome bug...). This could happen because your server don&#39;t send the proper Allow-Origin:vary headers when no crossOrigin is set, and that the browser will then keep using this resource from cache even when the attribute is set. The solution is to always require your images with the crossOrigin attribute, ir to set up your server correctly (but AWS S3 for one can&#39;t be set up in this way)"}, {"owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "reply_to_user": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "edited": false, "score": 0, "creation_date": 1547042144, "post_id": 54108669, "comment_id": 95055578, "body": "@Kaiido I always require it (I think) with the code above. What I don&#39;t understand is what you say, why I can do it once without any error but then on the next times I try to download it I get the error. It&#39;s an Ionic App, idk how much it&#39;s related to Chrome. I&#39;ve solved it with a different approach on my answer but I&#39;d like to know why this happens."}, {"owner": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "edited": false, "score": 0, "creation_date": 1547043380, "post_id": 54108669, "comment_id": 95056335, "body": "That may not be what I understood then. You mean that you can load &#39;img1.jpg&#39;, and export it to a dataURL once, but when you try to load again that same &#39;img1.jpg&#39; it will throw? I actually can&#39;t see a reason... <a href=\"https://stackoverflow.com/questions/49503171/the-image-tag-with-crossorigin-anonymous-cant-load-success-from-s3/49503414#49503414\">Here is what I thought you were facing</a> (don&#39;t hesitate to read the linked answer @serverfault, it&#39;s worth it). Oh and if in your answer you are talking about <a href=\"https://stackoverflow.com/a/42916772\">that post</a>, then don&#39;t be afraid of dropping an upvote ;-)"}, {"owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "edited": false, "score": 0, "creation_date": 1547044688, "post_id": 54108669, "comment_id": 95057234, "body": "Yes, thats what&#39;s happening, I get the error if I try to download the same image again. Sadl I don&#39;t have control over the server side. This post is what I used <a href=\"https://stackoverflow.com/questions/18650168/convert-blob-to-base64\" title=\"convert blob to base64\">stackoverflow.com/questions/18650168/convert-blob-to-base64</a> sry :/"}], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "is_accepted": true, "score": 0, "last_activity_date": 1547040923, "creation_date": 1547040923, "answer_id": 54111403, "question_id": 54108669, "link": "https://stackoverflow.com/questions/54108669/typescript-uncaught-domexception-failed-to-execute-todataurl-on-htmlcanvas/54111403#54111403", "title": "Typescript - Uncaught DOMException: Failed to execute &#39;toDataURL&#39; on &#39;HTMLCanvasElement&#39;: Tainted canvases may not be exported", "body": "<p>Instead of the approach in the first post, I've switched to downloading the image using Angular's HttpClient and then getting its base64.</p>\n\n<p>Code:</p>\n\n<pre><code>public getBase64Image(imgUrl: string): Observable&lt;string&gt; {\n    return new Observable(observer =&gt; {\n      this.http.get(imgUrl, { responseType: 'blob' }).subscribe(data =&gt; {\n        var reader = new FileReader();\n        reader.readAsDataURL(data);\n        reader.onloadend = () =&gt; {\n          observer.next(reader.result.toString().replace(\":application/octet-stream;\", \":image/png;\"));\n          observer.complete();\n        }\n      });\n    });\n  }\n</code></pre>\n"}], "owner": {"reputation": 777, "user_id": 4211173, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/54c802514f7e4b92e0dd18b6e6a12269?s=128&d=identicon&r=PG&f=1", "display_name": "Wrong", "link": "https://stackoverflow.com/users/4211173/wrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 0, "accepted_answer_id": 54111403, "answer_count": 1, "score": 0, "last_activity_date": 1547040923, "creation_date": 1547031760, "last_edit_date": 1547032657, "question_id": 54108669, "link": "https://stackoverflow.com/questions/54108669/typescript-uncaught-domexception-failed-to-execute-todataurl-on-htmlcanvas", "title": "Typescript - Uncaught DOMException: Failed to execute &#39;toDataURL&#39; on &#39;HTMLCanvasElement&#39;: Tainted canvases may not be exported", "body": "<p>I am building an Ionic App and I am getting this error when I try to convert to base64 an image from an URL.</p>\n\n<pre><code>Uncaught DOMException: Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.\n</code></pre>\n\n<p>My code is the following:</p>\n\n<pre><code>public getBase64Image(imgUrl: string): Promise&lt;string&gt; {\n    if (!imgUrl.includes(\"http\")) {\n      return;\n    }\n\n    return new Promise&lt;string&gt;(resolve =&gt; {\n      let img = new Image();\n\n      img.src = imgUrl;\n      img.crossOrigin = \"anonymous\"\n      img.onload = (() =&gt; {\n        let canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        let ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        let dataURL = canvas.toDataURL(\"image/png\");\n        resolve(dataURL);\n      });\n    });\n  }\n</code></pre>\n\n<p>I've read other questions where setting <code>anonymous</code> in <code>crossOrigin</code> was the solution, but I already have it.</p>\n\n<p>Hope you can help me, thanks.</p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>As a note, I don't get this the first time that I convert an image to base64 but I get it in the following times I try to edit an image.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1547031089, "post_id": 54108357, "comment_id": 95048915, "body": "How does initializing with <code>null</code> help you? why don&#39;t you initialize it as empty string? Anyway, just add a check for null. <code>if (this.expenses === null || this.expenses.toString() === &#39;&#39;)...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 5924315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hS8a6o4zLpA/AAAAAAAAAAI/AAAAAAAAFxM/eU_1ZWT8sMU/photo.jpg?sz=128", "display_name": "Oyvind Fredstie", "link": "https://stackoverflow.com/users/5924315/oyvind-fredstie"}, "is_accepted": false, "score": 0, "last_activity_date": 1547031458, "creation_date": 1547031458, "answer_id": 54108556, "question_id": 54108357, "link": "https://stackoverflow.com/questions/54108357/initialising-number-variables-with-null-and-checking-for-empty-values/54108556#54108556", "title": "Initialising number variables with null and checking for empty values", "body": "<p>Have you tried removing the toString? </p>\n\n<pre><code>if (this.expenses == null) {\n  this.inputHelperTextVisible = false;\n} else {\n  this.inputHelperTextVisible = true;\n}\n</code></pre>\n\n<p>If you use == rather than === expenses will be checked if it is undefined in addition to checking if it it null. </p>\n"}, {"tags": [], "owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547031626, "creation_date": 1547031626, "answer_id": 54108619, "question_id": 54108357, "link": "https://stackoverflow.com/questions/54108357/initialising-number-variables-with-null-and-checking-for-empty-values/54108619#54108619", "title": "Initialising number variables with null and checking for empty values", "body": "<p>You needn't set to null</p>\n\n<pre><code>export class ExpensesLogComponent implements OnInit {\n  inputHelperTextVisible = false;\n  expenses: number;\n</code></pre>\n\n<p>and check null or empty</p>\n\n<pre><code>if (!this.expenses || this.expenses.toString() == '') { }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 370, "user_id": 10835908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oddJ3.png?s=128&g=1", "display_name": "soumare", "link": "https://stackoverflow.com/users/10835908/soumare"}, "is_accepted": false, "score": 0, "last_activity_date": 1547032185, "creation_date": 1547032185, "answer_id": 54108778, "question_id": 54108357, "link": "https://stackoverflow.com/questions/54108357/initialising-number-variables-with-null-and-checking-for-empty-values/54108778#54108778", "title": "Initialising number variables with null and checking for empty values", "body": "<p>You have several options to avoid a mistake.\nBut I propose the one of nested loops to avoid any problems typescript.</p>\n\n<pre><code>    // it will work\n    if(this.expenses != null) {\n       if (this.expenses.toString() === '') {\n          this.inputHelperTextVisible = false;\n        } else {\n          this.inputHelperTextVisible = true;\n       }\n    } else{\n      this.inputHelperTextVisible = false;\n    }\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 10845059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86fa7ed018a26cf5aacc528c2e7cc819?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/10845059/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547032185, "creation_date": 1547030819, "question_id": 54108357, "link": "https://stackoverflow.com/questions/54108357/initialising-number-variables-with-null-and-checking-for-empty-values", "title": "Initialising number variables with null and checking for empty values", "body": "<p>I have to set a component property to null initially because I want an empty input when the page loads. I need to check if the string is empty but I can't do that when it is null, actually I can, everything still works from the user perspective but it throws an error so I suppose I shouldn't do it this way. So how can I check for an empty string with a nullable variable?</p>\n\n<pre><code>export class ExpensesLogComponent implements OnInit {\n  inputHelperTextVisible: boolean = false;\n  expenses: number = null;\n</code></pre>\n\n<p>Check if empty: </p>\n\n<pre><code> onKey(event: any) {\n    if (event.key === 'Enter') {\n      console.log('enter pressed!');\n    }\n    // error is this.expenses = null\n    if (this.expenses.toString() === '') {\n      this.inputHelperTextVisible = false;\n    } else {\n      this.inputHelperTextVisible = true;\n    }\n  }\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 1, "creation_date": 1547030394, "post_id": 54108185, "comment_id": 95048463, "body": "This works fine <code>export const getMakes = (year: number): Promise&lt;IMakes | IErrorResponse&gt; =&gt; Promise.resolve({     code: 0,     msg:&quot;&quot; })</code>, could you post more code ?"}, {"owner": {"reputation": 2078, "user_id": 554021, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Gef5G.jpg?s=128&g=1", "display_name": "Baruch", "link": "https://stackoverflow.com/users/554021/baruch"}, "edited": false, "score": 0, "creation_date": 1547030857, "post_id": 54108185, "comment_id": 95048761, "body": "Could you show the implementation of your function?"}], "answers": [{"tags": [], "owner": {"reputation": 2078, "user_id": 554021, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Gef5G.jpg?s=128&g=1", "display_name": "Baruch", "link": "https://stackoverflow.com/users/554021/baruch"}, "is_accepted": false, "score": 1, "last_activity_date": 1547031138, "creation_date": 1547031138, "answer_id": 54108461, "question_id": 54108185, "link": "https://stackoverflow.com/questions/54108185/return-union-type-causing-typescript-not-to-compile/54108461#54108461", "title": "Return union type causing typescript not to compile", "body": "<p>I've ran into this before, the way I've fixed it is by checking what the function is returning before returning anything.</p>\n\n<p>For example, take this function</p>\n\n<pre><code>interface Foo {\n    foo: string;\n}\n\ninterface Bar {\n    bar: boolean;\n}\n\nasync function fooBar(): Promise&lt;Foo | Bar&gt; {\n    try {\n        const response = await asyncFn();\n\n        return Promise.resolve({ foo: '' })\n    } catch (err) {\n        return Promise.reject({ bar: false });\n    }\n}\n</code></pre>\n\n<p>This function can return either <code>Foo</code> or <code>Bar</code>, but since the return depends on what happens in the <code>try/catch</code>, TypeScript won't type check for both if one case passes but not the other.</p>\n\n<p>So when doing:</p>\n\n<pre><code>fooBar()\n  .then(console.log)\n  .catch(console.error);\n</code></pre>\n\n<p>TypeScript won't throw a TypeError because the return of the function depends on logic that makes it possible for the function to return both values. </p>\n\n<p>Here is an example implementation of what I mean <a href=\"http://www.typescriptlang.org/play/#src=interface%20Foo%20%7B%0D%0A%20%20%20%20foo%3A%20string%3B%0D%0A%7D%0D%0A%0D%0Ainterface%20Bar%20%7B%0D%0A%20%20%20%20bar%3A%20boolean%3B%0D%0A%7D%0D%0A%0D%0Afunction%20asyncFn()%3A%20Promise%3Cany%3E%20%7B%0D%0A%20%20%20%20const%20n%20%3D%20Math.round(Math.random())%3B%0D%0A%0D%0A%20%20%20%20return%20n%20%3D%3D%3D%201%20%3F%20Promise.resolve()%20%3A%20Promise.reject()%3B%0D%0A%7D%0D%0A%0D%0Aasync%20function%20fooBar()%3A%20Promise%3CFoo%20%7C%20Bar%3E%20%7B%0D%0A%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20asyncFn()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20return%20Promise.resolve(%7B%20foo%3A%20&#39;&#39;%20%7D)%0D%0A%20%20%20%20%7D%20catch%20(err)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Promise.reject(%7B%20bar%3A%20false%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%7D%0D%0A%0D%0AfooBar().then(console.log).catch(console.error)%3B\" rel=\"nofollow noreferrer\">TypeScript playground</a>. I'm almost 100% sure that TypeScript only complains about this if you  have the <code>strictFunctionTypes</code> options.</p>\n\n<p>Hopefully this is clear enough.</p>\n"}], "owner": {"reputation": 1097, "user_id": 2595644, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e650aeee52681e0c0f82c33d8d55597a?s=128&d=identicon&r=PG", "display_name": "Marceli Janowski", "link": "https://stackoverflow.com/users/2595644/marceli-janowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547031372, "creation_date": 1547030300, "last_edit_date": 1547031372, "question_id": 54108185, "link": "https://stackoverflow.com/questions/54108185/return-union-type-causing-typescript-not-to-compile", "title": "Return union type causing typescript not to compile", "body": "<p>I have a function which is returning union type:</p>\n\n<pre><code>   export const getCarMakes = (year: number): Promise&lt;IMakes |IErrorResponse&gt; =&gt; {\n  return fetch(\n    'url', {\n      method: 'GET',\n    })\n  .then((res: Response) =&gt;  res.json())\n  .then((data: IMakes | IErrorResponse) =&gt; data)\n  .catch((error: any) =&gt; {\n    throw new Error(error);\n  });\n};\n</code></pre>\n\n<p>With interfaces:</p>\n\n<pre><code>interface IMakes {\n  makes: string [];\n}\n\ninterface IErrorResponse {\n  code: number;\n  msg: string;\n}\n</code></pre>\n\n<p>At moment VS code is complaining that </p>\n\n<pre><code>Property 'code' does not exist on type 'IMakes | IErrorResponse'.\nProperty 'code' does not exist on type 'IMakes'.\n</code></pre>\n\n<p>I think I missing something as I can get 2 completely different responses from API which can be a valid one with an array of the item or error with messsage. How I can sort this issue</p>\n"}, {"tags": ["reactjs", "typescript", "react-router-v4", "react-loadable"], "comments": [{"owner": {"reputation": 5052, "user_id": 2950032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bfee4307a21e38ef04af6c963dc564?s=128&d=identicon&r=PG&f=1", "display_name": "maazadeeb", "link": "https://stackoverflow.com/users/2950032/maazadeeb"}, "edited": false, "score": 0, "creation_date": 1547033299, "post_id": 54108159, "comment_id": 95050256, "body": "Would it be possible to create a small reproducible <a href=\"https://codesandbox.io\" rel=\"nofollow noreferrer\">codesandbox</a> or even a github repo? It would really help in debugging."}, {"owner": {"reputation": 1361, "user_id": 5073189, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/783103cd0c5602484616eb286aa4871b?s=128&d=identicon&r=PG&f=1", "display_name": "James Morrison", "link": "https://stackoverflow.com/users/5073189/james-morrison"}, "reply_to_user": {"reputation": 5052, "user_id": 2950032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bfee4307a21e38ef04af6c963dc564?s=128&d=identicon&r=PG&f=1", "display_name": "maazadeeb", "link": "https://stackoverflow.com/users/2950032/maazadeeb"}, "edited": false, "score": 0, "creation_date": 1547042298, "post_id": 54108159, "comment_id": 95055678, "body": "@MaazSyedAdeeb I can but it&#39;ll take a little while, I&#39;ll edit when I get to it if no one&#39;s answered first"}, {"owner": {"reputation": 1361, "user_id": 5073189, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/783103cd0c5602484616eb286aa4871b?s=128&d=identicon&r=PG&f=1", "display_name": "James Morrison", "link": "https://stackoverflow.com/users/5073189/james-morrison"}, "reply_to_user": {"reputation": 5052, "user_id": 2950032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bfee4307a21e38ef04af6c963dc564?s=128&d=identicon&r=PG&f=1", "display_name": "maazadeeb", "link": "https://stackoverflow.com/users/2950032/maazadeeb"}, "edited": false, "score": 0, "creation_date": 1547053851, "post_id": 54108159, "comment_id": 95063093, "body": "@MaazSyedAdeeb I&#39;ve uploaded a github repo"}, {"owner": {"reputation": 567, "user_id": 6497399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rMLGJ.jpg?s=128&g=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/6497399/honza"}, "edited": false, "score": 0, "creation_date": 1547118160, "post_id": 54108159, "comment_id": 95085761, "body": "hi have a look at my solution <a href=\"https://github.com/honzajerabek/route-bug-demo/commit/25bba45f7d16755e6c80adf240024cfa65522a9a\" rel=\"nofollow noreferrer\">github.com/honzajerabek/route-bug-demo/commit/&hellip;</a>"}, {"owner": {"reputation": 1361, "user_id": 5073189, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/783103cd0c5602484616eb286aa4871b?s=128&d=identicon&r=PG&f=1", "display_name": "James Morrison", "link": "https://stackoverflow.com/users/5073189/james-morrison"}, "edited": false, "score": 0, "creation_date": 1547120343, "post_id": 54108159, "comment_id": 95086988, "body": "Strange, the route switch isn&#39;t working at all in that solution now, it&#39;s not actually loading any pages"}], "answers": [{"comments": [{"owner": {"reputation": 1110, "user_id": 7388356, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VUVp6.jpg?s=128&g=1", "display_name": "Yusufbek", "link": "https://stackoverflow.com/users/7388356/yusufbek"}, "edited": false, "score": 0, "creation_date": 1610098297, "post_id": 54133277, "comment_id": 116029793, "body": "You made my day, mate!"}, {"owner": {"reputation": 188, "user_id": 6011583, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gBSV3chAN-w/AAAAAAAAAAI/AAAAAAAAAHI/55YEqZ54D4E/photo.jpg?sz=128", "display_name": "Muhammad Kamal", "link": "https://stackoverflow.com/users/6011583/muhammad-kamal"}, "edited": false, "score": 0, "creation_date": 1614014460, "post_id": 54133277, "comment_id": 117248910, "body": "Using render prop instead of component prop on the Route fixed the problem for me. Do you know the reason?"}], "tags": [], "owner": {"reputation": 1361, "user_id": 5073189, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/783103cd0c5602484616eb286aa4871b?s=128&d=identicon&r=PG&f=1", "display_name": "James Morrison", "link": "https://stackoverflow.com/users/5073189/james-morrison"}, "is_accepted": true, "score": 7, "last_activity_date": 1566459467, "last_edit_date": 1566459467, "creation_date": 1547138585, "answer_id": 54133277, "question_id": 54108159, "link": "https://stackoverflow.com/questions/54108159/react-router-route-re-rendering-component-on-route-change/54133277#54133277", "title": "React-Router - Route re-rendering component on route change", "body": "<p>Found the reason this is happening straight from a developer (credit Tim Dorr). The route is re-rendering the component every time because it is an anonymous function. This happens twice down the tree, both in App and Routes (within Loadable function), below respectively.</p>\n\n<pre><code>&lt;Route path=\"/\" component={() =&gt; &lt;Routes userRole={user.Role} /&gt;} /&gt;\n</code></pre>\n\n<p>needs to be </p>\n\n<pre><code>&lt;Routes userRole={user.Role} /&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>loader: () =&gt; import('./systemAdminRoutes/SystemAdminRoutes')\n</code></pre>\n\n<p>Basically my whole approach needs to be rethought</p>\n\n<p>EDIT: I eventually fixed this by using the render method on route:</p>\n\n<pre><code>&lt;Route path=\"/\" render={() =&gt; &lt;Routes userRole={user.Role} /&gt;} /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7027938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43cf64d6372c5072d881bb425889879c?s=128&d=identicon&r=PG&f=1", "display_name": "EvilEye", "link": "https://stackoverflow.com/users/7027938/evileye"}, "is_accepted": false, "score": 0, "last_activity_date": 1612981008, "creation_date": 1612981008, "answer_id": 66142719, "question_id": 54108159, "link": "https://stackoverflow.com/questions/54108159/react-router-route-re-rendering-component-on-route-change/66142719#66142719", "title": "React-Router - Route re-rendering component on route change", "body": "<p>Bumped into this problem and solved it like this:</p>\n<p>In the component:</p>\n<pre><code>import {useParams} from &quot;react-router-dom&quot;;\n    \nconst {userRole: roleFromRoute} = useParams();\nconst [userRole, setUserRole] = useState(null);\n\n\nuseEffect(()=&gt;{\n    setUserRole(roleFromRoute);\n},[roleFromRoute]}\n</code></pre>\n<p>In the routes:</p>\n<pre><code>&lt;Route path=&quot;/generic/:userRole&quot; component={myComponent} /&gt;\n</code></pre>\n<p>This sets up a generic route with a parameter for the role.</p>\n<p>In the component useParams picks up the changed parameter und the useEffect sets a state to trigger the render and whatever busines logic is needed.</p>\n<p>},[userRole]);</p>\n"}], "owner": {"reputation": 1361, "user_id": 5073189, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/783103cd0c5602484616eb286aa4871b?s=128&d=identicon&r=PG&f=1", "display_name": "James Morrison", "link": "https://stackoverflow.com/users/5073189/james-morrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9500, "favorite_count": 2, "accepted_answer_id": 54133277, "answer_count": 2, "score": 6, "last_activity_date": 1612981008, "creation_date": 1547030223, "last_edit_date": 1547115517, "question_id": 54108159, "link": "https://stackoverflow.com/questions/54108159/react-router-route-re-rendering-component-on-route-change", "title": "React-Router - Route re-rendering component on route change", "body": "<p>Please read this properly before marking as duplicate, I assure you I've read and tried everything everyone suggests about this issue on stackoverflow and github.</p>\n\n<p>I have a route within my app rendered as below;</p>\n\n<pre><code>&lt;div&gt;\n        &lt;Header compact={this.state.compact} impersonateUser={this.impersonateUser} users={users} organisations={this.props.organisations} user={user} logOut={this.logout} /&gt;\n        &lt;div className=\"container\"&gt;\n            {user &amp;&amp; &lt;Route path=\"/\" component={() =&gt; &lt;Routes userRole={user.Role} /&gt;} /&gt;}\n        &lt;/div&gt;\n    {this.props.alerts.map((alert) =&gt;\n            &lt;AlertContainer key={alert.Id} error={alert.Error} messageTitle={alert.Error ? alert.Message : \"Alert\"} messageBody={alert.Error ? undefined : alert.Message} /&gt;)\n        }\n    &lt;/div&gt;\n</code></pre>\n\n<p>The route rendering <code>Routes</code> renders a component that switches on the user role and lazy loads the correct routes component based on that role, that routes component renders a switch for the main pages. Simplified this looks like the below.</p>\n\n<pre><code>import * as React from 'react';\nimport LoadingPage from '../../components/sharedPages/loadingPage/LoadingPage';\nimport * as Loadable from 'react-loadable';\n\nexport interface RoutesProps {\n    userRole: string;\n}\n\nconst Routes = ({ userRole }) =&gt; {\n\nvar RoleRoutesComponent: any = null;\nswitch (userRole) {\n    case \"Admin\":\n        RoleRoutesComponent = Loadable({\n            loader: () =&gt; import('./systemAdminRoutes/SystemAdminRoutes'),\n            loading: () =&gt; &lt;LoadingPage /&gt;\n        });\n        break;\n    default:\n        break;\n}\n\nreturn (\n    &lt;div&gt;\n        &lt;RoleRoutesComponent/&gt; \n    &lt;/div&gt;\n);\n\n}\n\nexport default Routes;\n</code></pre>\n\n<p>And then the routes component</p>\n\n<pre><code>const SystemAdminRoutes = () =&gt; {\n\nvar key = \"/\";\n\nreturn (\n    &lt;Switch&gt;\n        &lt;Route key={key} exact path=\"/\" component={HomePage} /&gt;\n        &lt;Route key={key} exact path=\"/home\" component={HomePage} /&gt;\n        &lt;Route key={key} path=\"/second\" component={SecondPage} /&gt;\n        &lt;Route key={key} path=\"/third\" component={ThirdPage} /&gt;\n        ...\n        &lt;Route key={key} component={NotFoundPage} /&gt;\n    &lt;/Switch&gt;\n);\n}\n\nexport default SystemAdminRoutes;\n</code></pre>\n\n<p>So the issue is whenever the user navigates from \"/\" to \"/second\" etc... app re-renders <code>Routes</code>, meaning the role switch logic is rerun, the user-specific routes are reloaded and re-rendered and state on pages is lost. </p>\n\n<p>Things I've tried;</p>\n\n<p>\n<li>I've tried this with both react-loadable and <code>React.lazy()</code> and it has the same issue.</li>\n<li>I've tried making the routes components classes </li>\n<li>Giving all Routes down the tree the same key</li>\n<li>Rendering all components down to the switch with path \"/\" but still the same problem.</li>\n<li>Changing Route's component prop to render.</li>\n<li>Changing the main app render method to <code>component={Routes}</code> and getting props via redux</li>\n</p>\n\n<p>There must be something wrong with the way I'm rendering the main routes component in the app component but I'm stumped, can anyone shed some light? Also note this has nothing to do with react-router's switch. </p>\n\n<p>EDIT: I've modified one of my old test project to demonstrate this bug, you can clone the repo from <a href=\"https://github.com/Trackerchum/route-bug-demo\" rel=\"noreferrer\">https://github.com/Trackerchum/route-bug-demo</a> - once the repo's cloned just run an npm install in root dir and npm start. I've got it logging to console when the Routes and SystemAdminRoutes are re-rendered/remounted</p>\n\n<p>EDIT: I've opened an issue about this on GitHub, possible bug </p>\n\n<p><a href=\"https://github.com/ReactTraining/react-router/issues/6540\" rel=\"noreferrer\">Route re-rendering component on every path change, despite path of \"/\"</a></p>\n"}, {"tags": ["typescript", "mocha.js", "nativescript"], "comments": [{"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1547034707, "post_id": 54108116, "comment_id": 95051049, "body": "Try <code>tns test android --device 1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10889149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0338368a67414966ce2f0660337c420c?s=128&d=identicon&r=PG&f=1", "display_name": "TomB", "link": "https://stackoverflow.com/users/10889149/tomb"}, "is_accepted": true, "score": 0, "last_activity_date": 1547042140, "creation_date": 1547042140, "answer_id": 54111780, "question_id": 54108116, "link": "https://stackoverflow.com/questions/54108116/tns-test-android-hangs-after-synced-to-device/54111780#54111780", "title": "tns test android hangs after synced to device", "body": "<p>Adding <code>android:usesCleartextTraffic=\"true\"</code> to the <code>Android Manifest</code> to <code>&lt;application</code> file seems to have resolved the issue of not finding the Karma server.</p>\n\n<p>See <a href=\"https://github.com/NativeScript/nativescript-cli/issues/4182\" rel=\"nofollow noreferrer\">https://github.com/NativeScript/nativescript-cli/issues/4182</a></p>\n\n<p>I am using nativescript version <code>4.2.0</code> so the latest version may have fixed this.</p>\n"}], "owner": {"reputation": 1, "user_id": 10889149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0338368a67414966ce2f0660337c420c?s=128&d=identicon&r=PG&f=1", "display_name": "TomB", "link": "https://stackoverflow.com/users/10889149/tomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 54111780, "answer_count": 1, "score": 0, "last_activity_date": 1547042140, "creation_date": 1547030059, "last_edit_date": 1547031534, "question_id": 54108116, "link": "https://stackoverflow.com/questions/54108116/tns-test-android-hangs-after-synced-to-device", "title": "tns test android hangs after synced to device", "body": "<p>I'm currently trying to setup unit testing on my nativescript project. I'm using mocha with chai as my testing framework and have run <code>tns test init</code> all ok.</p>\n\n<p>When I run <code>tns test android</code> every runs ok and the emulator starts. However, after it has synced the application to my emulator, which also starts ok, it hangs at:</p>\n\n<pre><code>JS: NSUTR: fetching http://***.***.**.*:9876/context.json\nJS: NSUTR: fetching http://***.***.*.**:9876/context.json\nJS: NSUTR: fetching http://127.0.0.1:9876/context.json\n</code></pre>\n\n<p>I've tried a few different things, on being running <code>tns test android --debug-brk</code> to see where it fails. This says that  <code>Error: Could not find device by specified identifier 'undefined'</code> but the emulator is running fine as the command had started it up and I can see the emulator using <code>tns device</code>.</p>\n\n<p>Any help is much appreciated, thanks.</p>\n"}, {"tags": ["typescript", "express"], "comments": [{"owner": {"reputation": 748, "user_id": 1715153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrgXk.png?s=128&g=1", "display_name": "Ariel Frischer", "link": "https://stackoverflow.com/users/1715153/ariel-frischer"}, "edited": false, "score": 0, "creation_date": 1604205496, "post_id": 54108056, "comment_id": 114273414, "body": "I&#39;m also looking for help on this question, I have a similar issue."}], "owner": {"reputation": 1020, "user_id": 1378261, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rKPTa.jpg?s=128&g=1", "display_name": "Ren\u0101rs Vilnis", "link": "https://stackoverflow.com/users/1378261/ren%c4%81rs-vilnis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1547029859, "creation_date": 1547029859, "question_id": 54108056, "link": "https://stackoverflow.com/questions/54108056/custom-request-and-response-type-for-express-router", "title": "Custom request and response type for express router", "body": "<p>I want to create custom <code>express.Request</code> type that attaches logger to the request.</p>\n\n<p>I don't want to override the original <code>express.Request</code> express instead create a new one that extends it, as some parts of the app have other middleware that attaches other custom properties to the request.</p>\n\n<p>So in a <code>global.d.ts</code> I define the extended Request interface.</p>\n\n<pre><code>import { NextFunction, Request, Response } from \"express\";\nimport { Logger } from \"pino\";\n\ndeclare global {\n  interface AppRequest extends Request {\n    log: Logger;\n  }\n  interface AppResponse extends Response {}\n  interface AppNextFunction extends NextFunction {}\n}\n</code></pre>\n\n<p>Then in <code>some-app-router.ts</code>:</p>\n\n<pre><code>import { Router } from \"express\";\n\nconst router = Router();\n\nfunction validateSecretMiddleWare(req: AppRequest, res: AppResponse, next: AppNextFunction):void {\n  if (process.env.STATS_SECRET !== req.query.secret) {\n    res.sendStatus(404);\n    return;\n  }\n\n  next();\n}\n\nrouter.use(validateSecretMiddleWare);\n\nexport default router;\n</code></pre>\n\n<p>But I receive this error:</p>\n\n<blockquote>\n  <p>Argument of type '(req: AppRequest, res: AppResponse, next: AppNextFunction) => void' is not assignable to parameter of type 'PathParams'.\n    Type '(req: AppRequest, res: AppResponse, next: AppNextFunction) => void' is missing the following properties from type '(string | RegExp)[]': pop, push, concat, join, and 25 more.</p>\n</blockquote>\n\n<p>I inspected <code>express.RouterHandler</code> and saw that it uses <code>express.RequestHandlerParams</code>, that uses <code>Request, Response, NextFunction</code> types, doesn't my <code>AppRequest</code> as valid <code>express.Request</code>?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "foreach", "angular7"], "comments": [{"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1547029951, "post_id": 54107949, "comment_id": 95048176, "body": "Images won&#39;t be helpful, you need to add your data and try to create demo."}, {"owner": {"reputation": 588, "user_id": 8996442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b044d521ec40b46ae918a68c62496f?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Cheval", "link": "https://stackoverflow.com/users/8996442/nathan-cheval"}, "reply_to_user": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1547030095, "post_id": 54107949, "comment_id": 95048276, "body": "Where can I do the demo ?"}, {"owner": {"reputation": 12499, "user_id": 2630817, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zLW4a.png?s=128&g=1", "display_name": "Just code", "link": "https://stackoverflow.com/users/2630817/just-code"}, "edited": false, "score": 0, "creation_date": 1547030178, "post_id": 54107949, "comment_id": 95048322, "body": "edit your question and try to create snippet."}, {"owner": {"reputation": 3038, "user_id": 5466997, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/7JLBW.jpg?s=128&g=1", "display_name": "josemigallas", "link": "https://stackoverflow.com/users/5466997/josemigallas"}, "edited": false, "score": 0, "creation_date": 1547030292, "post_id": 54107949, "comment_id": 95048407, "body": "Why can&#39;t you parse your data programmatically (transform your objects manually) and then iterate? What is exactly the problem, that you don&#39;t know what format you are going to receive or that you don&#39;t know how to combine &quot;23&quot; and &quot;24&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 108, "user_id": 10612111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c054e149bda5d6ac7c641f5f9cdafe23?s=128&d=identicon&r=PG&f=1", "display_name": "MullisS", "link": "https://stackoverflow.com/users/10612111/mulliss"}, "is_accepted": false, "score": 1, "last_activity_date": 1547030227, "creation_date": 1547030227, "answer_id": 54108163, "question_id": 54107949, "link": "https://stackoverflow.com/questions/54107949/foreach-over-object-in-angular/54108163#54108163", "title": "Foreach over object in Angular", "body": "<p>i am not sure if i understood you correctly, but you can iterate over objects like this:</p>\n\n<pre><code>for(let key in object) {\nlet child = object[key];\n// Your Code\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2438, "user_id": 2759473, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/fkdGV.jpg?s=128&g=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/2759473/tomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1547030333, "creation_date": 1547030333, "answer_id": 54108196, "question_id": 54107949, "link": "https://stackoverflow.com/questions/54107949/foreach-over-object-in-angular/54108196#54108196", "title": "Foreach over object in Angular", "body": "<p>By default, object fields are not iterable in array-fashion way. You can however to try to wrap your handler in folliwing to be able to parse both array and object form:</p>\n\n<pre><code>if(Array.isArray(input)) {\n  /* Do what you are already doing */\n} else { /* We are working with object */\n  Object.keys(input).forEach((key) =&gt; {\n    /* Here you can iterate over each key in object */\n  })\n}\n</code></pre>\n\n<p>But still, your question scope is rather unclear</p>\n"}, {"tags": [], "owner": {"reputation": 7685, "user_id": 8718377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGFwM.png?s=128&g=1", "display_name": "veben", "link": "https://stackoverflow.com/users/8718377/veben"}, "is_accepted": false, "score": 0, "last_activity_date": 1547032212, "last_edit_date": 1547032212, "creation_date": 1547031116, "answer_id": 54108454, "question_id": 54107949, "link": "https://stackoverflow.com/questions/54107949/foreach-over-object-in-angular/54108454#54108454", "title": "Foreach over object in Angular", "body": "<p>Before you iterated through <code>data.resources</code>\nWith your changes, you have to iterate through <code>data.resources.docs</code>\nTry something like that:</p>\n\n<pre><code>data.resources.forEach(resource =&gt; {\n    console.log(resource);\n    resource.docs.forEach(doc =&gt; {\n        console.log(doc);\n        // ...\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "is_accepted": false, "score": 0, "last_activity_date": 1547031143, "creation_date": 1547031143, "answer_id": 54108463, "question_id": 54107949, "link": "https://stackoverflow.com/questions/54107949/foreach-over-object-in-angular/54108463#54108463", "title": "Foreach over object in Angular", "body": "<p>Be careful, I've noticed that you treat <code>resource.senders</code> and <code>resource.recipients</code> as array whereas it's a string in your screenshot.<br>\nI also noticed that if you have more than one sender/recipient you will assign <code>this.lang.isMulticontact</code> to resource.senders/recipient, so you won't have your senders/recipients anymore, is that what you want ?  </p>\n\n<p>Note that you should not modify your data parameter it can lead to <strong>undesirable side-effects.</strong></p>\n\n<pre><code>processPostData(data) {\n  const dataToProcess = [...data];\n  dataToProcess.resources.forEach((resource) =&gt; {\n    const propertiesUndefined = ['process_limit_date', 'creation_date', 'closing_date', 'countAttachments', 'countNotes'];\n    propertiesUndefined.forEach((property) =&gt; {\n      if (!resource[property]) { \n        resource[property] = this.lang.undefined;\n      }\n    });\n    const propertiesMultiContact = ['senders', 'recipients'];\n    propertiesMultiContact.forEach((property) =&gt; {\n      if (resource[property] instance of Array &amp;&amp; resource[property].length &gt; 1) {\n        resource[property] = this.lang.isMulticontact;\n      }\n    });\n   if (!resource['status_icon']) {\n     resource['status_icon'] = 'fa-question undefined';\n   }\n  });\n  return dataToProcess;\n}\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 8996442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b044d521ec40b46ae918a68c62496f?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Cheval", "link": "https://stackoverflow.com/users/8996442/nathan-cheval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9129, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1547035433, "creation_date": 1547029529, "last_edit_date": 1547035433, "question_id": 54107949, "link": "https://stackoverflow.com/questions/54107949/foreach-over-object-in-angular", "title": "Foreach over object in Angular", "body": "<p>I've got a little problem with my code. I already have a piece of code looping on an array (like this:<img src=\"https://i.imgur.com/Okwa00c.png\" alt=\"pic1\">)\nI take this array and turn it like this:<img src=\"https://i.imgur.com/uxjzuJo.png\" alt=\"pic2\"></p>\n\n<p>Here is the piece of code : </p>\n\n<pre><code>processPostData(data: any) {\n    Array.prototype.forEach.call(data.resources, (element: any) =&gt; {\n        console.log(element);\n        Object.keys(element).forEach((key) =&gt; {\n            console.log(key);\n            if ((element[key] == null || element[key] == '') &amp;&amp; ['process_limit_date', 'creation_date', 'closing_date', 'countAttachments', 'countNotes'].indexOf(key) === -1) {\n                element[key] = this.lang.undefined;\n            } else if ([\"senders\",\"recipients\"].indexOf(key) &gt; 0) {\n                if (element[key].length &gt; 1) {\n                    console.log(element[key]);\n                    element[key] = this.lang.isMulticontact;\n                } else {\n                    element[key] = element[key][0];\n                }\n            } else if (key == 'status_icon' &amp;&amp; element[key] == null) {\n                element[key] = 'fa-question undefined';\n            }\n\n        });\n    });\n\n    return data;\n}\n</code></pre>\n\n<p>Now the problem is that I modify my input \"data\" and now I have an object, like this : \n<a href=\"https://i.imgur.com/Zztp5ZK.png\" rel=\"nofollow noreferrer\">pic3</a></p>\n\n<p>I have now an Object instead of an Array and I didn't manage to loop through it the same way before. How could I do that? At least, for the first loop, and get an Array, or an Object, with the content of the \"23\" and \"24\" indexes of the Object. </p>\n\n<p>Tell me if I'm not clear enough, pretty hard to me to be as precise as possible</p>\n"}, {"tags": ["node.js", "typescript", "express", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 2271690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ov1I.png?s=128&g=1", "display_name": "sneha_h", "link": "https://stackoverflow.com/users/2271690/sneha-h"}, "edited": false, "score": 0, "creation_date": 1549204017, "post_id": 54148155, "comment_id": 95811572, "body": "I tried both ways but error is coming <code>ERROR TypeError: Cannot read property &#39;afterClosed&#39; of undefined</code>"}], "tags": [], "owner": {"reputation": 2209, "user_id": 1441024, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xCyqk.png?s=128&g=1", "display_name": "prettyfly", "link": "https://stackoverflow.com/users/1441024/prettyfly"}, "is_accepted": true, "score": 4, "last_activity_date": 1547215706, "creation_date": 1547215706, "answer_id": 54148155, "question_id": 54107947, "link": "https://stackoverflow.com/questions/54107947/how-to-refresh-component-after-matdialog-close-and-data-updated-in-database-in-a/54148155#54148155", "title": "How to refresh component after MatDialog close and data updated in database in Angular 6?", "body": "<p>You're only calling <code>getAllClients()</code> during the <code>OnInit</code> lifecycle hook of <code>ClientsComponent</code>. This means it will <strong>only</strong> load the clients on initialisation of the component (which is why you see the new client when you navigate away and back again, as the component re-initialises and the <code>OnInit</code> lifecycle hook is fired again).</p>\n\n<p>To counter that, you have two options (well, more than two if you were using state management (ngRx for example)).</p>\n\n<p>1) When you've added your new client, and closed the dialog, immediately call <code>getAllClients()</code> again, by subscribing to the <code>afterClosed</code> event of <code>MatDialog</code></p>\n\n<pre><code>this.addClientDialogRef.afterClosed().subscribe(() =&gt; { this.getAllClients(); } );\n</code></pre>\n\n<p>or</p>\n\n<p>2) Provide the new client object via the <code>afterClosed</code> event from the dialog itself, and push the new object to you <code>clients</code> array. The only caveat being, you'll need to return the new client object from your HTTP request in <code>saveClient</code></p>\n\n<p><strong>AddClientComponent</strong></p>\n\n<pre><code>saveClient(formdata: any) {\n    let theForm = this.clientForm.value;\n    this.clientService.addClient(theForm).subscribe(data =&gt; {\n       if (data.success === false) {\n          this.toastr.error(data.message);\n       } else {\n          this.toastr.success(data.message);\n          this.ngOnInit();\n          this.dialogRef.close(data.client); // &lt;--- Assuming the new object comes under the 'client' key of your response.\n       }\n       this.clientForm.reset();\n    });\n}\n</code></pre>\n\n<p><strong>ClientsComponent</strong></p>\n\n<pre><code>addClientDialogRef.afterClosed().subscribe((client: Client) =&gt; {\n    this.clients.push(client);\n}\n</code></pre>\n\n<p>The <code>afterClosed</code> event is documented (briefly) here: <a href=\"https://material.angular.io/components/dialog/overview\" rel=\"nofollow noreferrer\">https://material.angular.io/components/dialog/overview</a></p>\n\n<blockquote>\n  <p>The MatDialogRef provides a handle on the opened dialog. It can be\n  used to close the dialog and to receive notification when the dialog\n  has been closed.</p>\n\n<pre><code>dialogRef.afterClosed().subscribe(result =&gt; {   console.log(`Dialog\n   result: ${result}`); // Pizza! });\n\ndialogRef.close('Pizza!');\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 109, "user_id": 2271690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ov1I.png?s=128&g=1", "display_name": "sneha_h", "link": "https://stackoverflow.com/users/2271690/sneha-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8507, "favorite_count": 1, "accepted_answer_id": 54148155, "answer_count": 1, "score": 4, "last_activity_date": 1547215706, "creation_date": 1547029525, "last_edit_date": 1547210596, "question_id": 54107947, "link": "https://stackoverflow.com/questions/54107947/how-to-refresh-component-after-matdialog-close-and-data-updated-in-database-in-a", "title": "How to refresh component after MatDialog close and data updated in database in Angular 6?", "body": "<p>I am learning a MEAN stack app with angular 6. Here I want to refresh the component after adding a new client/car/driver/booking or updating a new client/car/driver/booking. But after adding a new value, the component showing all the values doesn't update or refresh(not able to see the current value at that time), but when i route between component and then go back to the same component it updates and shows all the values. </p>\n\n<p>I want that as the value is added or updated from a dialog form, it gets displayed at that time. </p>\n\n<p>Here is <code>add client component</code></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export class AddClientComponent implements OnInit {\r\n\r\n  clientForm: FormGroup;\r\n\r\n  constructor(private fb: FormBuilder,\r\n    private clientService: ClientService,\r\n    private toastr: ToastrService,\r\n    private router: Router,\r\n    public dialogRef: MatDialogRef &lt; AddClientComponent &gt; ) {\r\n\r\n    this.clientForm = this.fb.group({\r\n      'clientname': new FormControl(\"\"),\r\n      'clientphoneno': new FormControl(\"\"),\r\n      'clientemail': new FormControl(\"\"),\r\n      'clientaddress': new FormControl(\"\")\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.router.navigate(['/admin/clients']);\r\n  }\r\n\r\n  saveClient(formdata: any) {\r\n    let theForm = this.clientForm.value;\r\n    this.clientService.addClient(theForm).subscribe(data =&gt; {\r\n      if (data.success === false) {\r\n        this.toastr.error(data.message);\r\n      } else {\r\n        this.toastr.success(data.message);\r\n        this.ngOnInit();\r\n        this.dialogRef.close();\r\n      }\r\n      this.clientForm.reset();\r\n    });\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>here is the <code>client component</code> where the added values are displayed</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export class ClientsComponent implements OnInit {\r\n\r\n  public currentClient: IClient;\r\n  clients: any;\r\n\r\n  addClientDialogRef: MatDialogRef &lt; AddClientComponent &gt; ;\r\n  editClientDialogRef: MatDialogRef &lt; EditClientComponent &gt; ;\r\n\r\n  constructor(public dialog: MatDialog,\r\n    private dialogService: DialogService,\r\n    private clientService: ClientService,\r\n    private router: Router) {}\r\n\r\n  openAddClientDialog() {\r\n    this.dialogService.open(AddClientComponent, {\r\n      width: '500px'\r\n    })\r\n  }\r\n\r\n  openEditClientDialog(id) {\r\n    this.dialogService.open(EditClientComponent, {\r\n      width: '500px',\r\n      data: {\r\n        'id': id\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getAllClients();\r\n  }\r\n\r\n  getAllClients() {\r\n    this.clientService.getClients().subscribe((res) =&gt; {\r\n      this.clients = res;\r\n    }, err =&gt; {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  deleteClient(id) {\r\n    this.clientService.deleteClient(id)\r\n      .subscribe(res =&gt; {\r\n        this.router.navigate(['./clients']);\r\n        this.ngOnInit();\r\n      }, (err) =&gt; {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>here is the <code>client service</code></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>addClient(oClient) {\r\n  let headers = new Headers({\r\n    'Content-Type': 'application/json'\r\n  });\r\n  let options = new RequestOptions({\r\n    headers: headers\r\n  });\r\n  return this._http.post('http://localhost:3000/admin/clients/add', JSON.stringify(oClient), options).pipe(\r\n    map((response: Response) =&gt; response.json()));\r\n}\r\n\r\ngetClients() {\r\n  let headers = new Headers({\r\n    'Content-Type': 'application/json'\r\n  });\r\n  let options = new RequestOptions({\r\n    headers: headers\r\n  });\r\n  return this._http.get('http://localhost:3000/admin/clients', options).pipe(\r\n    map((response: Response) =&gt; response.json()));\r\n}\r\n\r\ngetClient(clientid) {\r\n  let headers = new Headers();\r\n  headers.append('Content-Type', 'application/json');\r\n  let options = new RequestOptions({\r\n    headers: headers\r\n  });\r\n  return this._http.get(`http://localhost:3000/admin/clients/${clientid}`, options).pipe(\r\n    map((response: Response) =&gt; response.json()));\r\n}\r\n\r\neditClient(clientId, oClient) {\r\n  let headers = new Headers({\r\n    'Content-Type': 'application/json'\r\n  });\r\n  let options = new RequestOptions({\r\n    headers: headers\r\n  });\r\n  return this._http.put(`http://localhost:3000/admin/clients/edit/${clientId}`, JSON.stringify(oClient), options).pipe(\r\n    map((response: Response) =&gt; response.json()));\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["angular", "typescript", "ngrx"], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 4271430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7hYSL.jpg?s=128&g=1", "display_name": "Adrien SAULNIER", "link": "https://stackoverflow.com/users/4271430/adrien-saulnier"}, "edited": false, "score": 1, "creation_date": 1547041630, "post_id": 54108151, "comment_id": 95055266, "body": "Ty for you explanation dude :)"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1547030193, "creation_date": 1547030193, "answer_id": 54108151, "question_id": 54107803, "link": "https://stackoverflow.com/questions/54107803/typescript-know-if-given-interface-is-in-type-alias/54108151#54108151", "title": "Typescript -&gt; Know if given interface is in type alias", "body": "<p>Assuming your union members (the union in the type alias) are not as simple as  in your question (ie they have some members) you can use a type constraint on your generic type parameter:</p>\n\n<pre><code>export interface A { a: number; }\nexport interface B { b: number; }\nexport interface C { c: number; }\nexport interface E { e: number; }\nexport type Reference = A | B | C;\n\nexport const getReference = &lt;T extends Reference&gt;(slug: ReferencesSlugs): (state: object) =&gt; Array&lt;T&gt; =&gt; {\n    return null!;\n}\n\ngetReference&lt;A&gt;('onchonch'); // VALID, tslint is ok\ngetReference&lt;E&gt;('onchonch'); // INAVLID, E is not in my type alias.\n</code></pre>\n\n<p>The reason the members matter is because typescript uses structural compatibility to determine type compatibility. This means if two types have the same fields they will be compatible. This also means two empty interfaces are compatible.</p>\n"}], "owner": {"reputation": 1146, "user_id": 4271430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7hYSL.jpg?s=128&g=1", "display_name": "Adrien SAULNIER", "link": "https://stackoverflow.com/users/4271430/adrien-saulnier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 54108151, "answer_count": 1, "score": 1, "last_activity_date": 1547030193, "creation_date": 1547029118, "question_id": 54107803, "link": "https://stackoverflow.com/questions/54107803/typescript-know-if-given-interface-is-in-type-alias", "title": "Typescript -&gt; Know if given interface is in type alias", "body": "<p>I have a type alias on multiple interfaces : </p>\n\n<pre><code>export interface A {}\nexport interface B {}\nexport interface C {}\nexport type Reference = A | B | C;\n</code></pre>\n\n<p>I have a method called <code>getReference</code> which returns, by default, an array of Reference. I would like my method takes a generic type and check if the given type is in my type alias.</p>\n\n<p><strong>That I have :</strong></p>\n\n<pre><code>export const getReference = (slug: ReferencesSlugs): (state: object) =&gt; Array&lt;Reference&gt; =&gt; {\n   ....... // some code\n   // return Reference[]\n}\n</code></pre>\n\n<p><strong>That I want :</strong></p>\n\n<p>Dev can pass generic type and Typescript check if the given type is in the type alias (Reference).</p>\n\n<pre><code>export const getReference = &lt;T&gt;(slug: ReferencesSlugs): (state: object) =&gt; Array&lt;T&gt; =&gt; {\n    ....... // some code\n    // As T is in Reference type -&gt; return T[]\n}\n\n\n\nthis.store.pipe( select(getReference&lt;A&gt;('onchonch')) ); // VALID, tslint is ok\nthis.store.pipe( select(getReference&lt;E&gt;('onchonch')) ); // INAVLID, E is not in my type alias.\n</code></pre>\n\n<p>Thanks by advance :)</p>\n"}, {"tags": ["typescript", "build", "bazel"], "owner": {"reputation": 6522, "user_id": 931511, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/eNqBf.jpg?s=128&g=1", "display_name": "guilhebl", "link": "https://stackoverflow.com/users/931511/guilhebl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547028717, "creation_date": 1547028717, "question_id": 54107683, "link": "https://stackoverflow.com/questions/54107683/bazel-build-error-expected-build-bazel-rules-typescript-to-be-version", "title": "Bazel build error: Expected build_bazel_rules_typescript to be version $", "body": "<p>While running bazel build getting error:</p>\n\n<pre><code>@bazel/typescript/check_version.js:73\n    throw new Error(`Expected build_bazel_rules_typescript to be version ${\n    ^\nError: Expected build_bazel_rules_typescript to be version 0.21.0\n</code></pre>\n\n<p>tried <strong>bazel clean --expunge</strong> , cleaning node_modules and bazel_out folders with no success</p>\n"}, {"tags": ["typescript", "typescript-generics"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 2, "creation_date": 1547029724, "post_id": 54107628, "comment_id": 95048038, "body": "jcalz is probably still asleep, you&#39;ll have to settle for my answer :)"}, {"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 1, "creation_date": 1556959502, "post_id": 54107628, "comment_id": 98611240, "body": "A simple and generic solution to prevent distribution of union types is to box them through an interface <a href=\"https://lorefnon.tech/2019/05/02/using-boxing-to-prevent-distribution-of-conditional-types/\" rel=\"nofollow noreferrer\">lorefnon.tech/2019/05/02/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 2184120, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0193029277a19797c4e59124f8e01aad?s=128&d=identicon&r=PG", "display_name": "Ziriax", "link": "https://stackoverflow.com/users/2184120/ziriax"}, "edited": false, "score": 0, "creation_date": 1547034303, "post_id": 54108007, "comment_id": 95050828, "body": "That is amazing, thanks a lot! However, I do not understand how this works, since every type <code>extends any</code> no? So why does the condition filter anything? Could you give me some references to read in order to understand this better?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 827, "user_id": 2184120, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0193029277a19797c4e59124f8e01aad?s=128&d=identicon&r=PG", "display_name": "Ziriax", "link": "https://stackoverflow.com/users/2184120/ziriax"}, "edited": false, "score": 2, "creation_date": 1547034788, "post_id": 54108007, "comment_id": 95051101, "body": "@Ziriax added an explanation at the end, we just use the distributive part of conditional types we don&#39;t actually care about the condition."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 4, "last_activity_date": 1547034749, "last_edit_date": 1547034749, "creation_date": 1547029689, "answer_id": 54108007, "question_id": 54107628, "link": "https://stackoverflow.com/questions/54107628/how-to-avoid-distribution-over-multiple-generic-type-parameters-in-typescript/54108007#54108007", "title": "How to avoid distribution over multiple generic type parameters in Typescript?", "body": "<p>The problem is no so much with the conditional part of your solution but more with the way variables type annotations work coupled with default type parameters.</p>\n\n<p>If not type is specified for a variable its type will be inferred. If you specify a type, no inference will occur. So when you say <code>const test3: TypedValue</code>, no inference for the generic type parameter will occur and the default value for the type parameter will be used. So <code>const test3: TypedValue</code> is equivalent to <code>const test3: TypedValue&lt;\"NUM\" | \"STR\"&gt;</code> which is equivalent to  <code>const test3: { type: \"NUM\" | \"STR\"; data: number | string; }</code></p>\n\n<p>Since this is the type of the variable, the object literal will just be checked against the type and it is compatible with it (<code>type</code> is <code>\"NUM\"</code>, compatible with <code>\"NUM\" | \"STR\"</code>, <code>data</code> is of type <code>string</code> compatible with <code>string | number</code>)</p>\n\n<p>You can convert your type into a true discriminated union using exactly the distributive behavior or conditional types:</p>\n\n<pre><code>type ValueType = \"NUM\" | \"STR\";\n\ntype TypeOf&lt;T&gt;\n    = T extends \"NUM\" ? number\n    : T extends \"STR\" ? string\n    : never;\n\ntype TypedValue&lt;T = ValueType&gt; = T extends any ? {\n    type: T;\n    data: TypeOf&lt;T&gt;;\n}: never;\n\n// Compiles, as intended\nconst test1: TypedValue = { type: \"NUM\", data: 123 }; \n\n// Does not compile, as intended\nconst test2: TypedValue&lt;\"NUM\"&gt; = { type: \"NUM\", data: \"123\" };\n\n// does not compile now\nconst test3: TypedValue = { type: \"NUM\", data: \"123\" };\n</code></pre>\n\n<p>With the definition above <code>TypedValue</code> without a type parameter is equivalent to :</p>\n\n<pre><code>{\n    type: \"NUM\";\n    data: number;\n} | {\n    type: \"STR\";\n    data: string;\n}\n</code></pre>\n\n<p>This means that a <code>type</code> to <code>STR</code> can never be compatible with a <code>data</code> of type <code>number</code> and a <code>type</code> to <code>NUM</code> can never be compatible with a <code>data</code> of type <code>string</code>.</p>\n\n<p>The conditional type in <code>TypedValue</code> is not used to express an actual condition, every <code>T</code> will extend <code>any</code>. The point of the conditional type is to distribute over <code>T</code>. This means that if <code>T</code> is a union, the result will be the type <code>{ type: T; data: TypeOf&lt;T&gt;; }</code> applied to every member of the union. Read more about the distributive behavior of conditional types <a href=\"http://www.typescriptlang.org/docs/handbook/advanced-types.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 827, "user_id": 2184120, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0193029277a19797c4e59124f8e01aad?s=128&d=identicon&r=PG", "display_name": "Ziriax", "link": "https://stackoverflow.com/users/2184120/ziriax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 54108007, "answer_count": 1, "score": 7, "last_activity_date": 1547038587, "creation_date": 1547028555, "last_edit_date": 1547038587, "question_id": 54107628, "link": "https://stackoverflow.com/questions/54107628/how-to-avoid-distribution-over-multiple-generic-type-parameters-in-typescript", "title": "How to avoid distribution over multiple generic type parameters in Typescript?", "body": "<p>I didn't know how to formulate my question properly, so I'll give an example.</p>\n\n<pre><code>type ValueType = \"NUM\" | \"STR\";\n\ntype TypeOf&lt;T&gt;\n    = T extends \"NUM\" ? number\n    : T extends \"STR\" ? string\n    : never;\n\ninterface TypedValue&lt;T = ValueType&gt; {\n    type: T;\n    data: TypeOf&lt;T&gt;;\n}\n\n\n// Compiles, as intended\nconst test1: TypedValue = { type: \"NUM\", data: 123 };\n\n// Does not compile, as intended\nconst test2: TypedValue&lt;\"NUM\"&gt; = { type: \"NUM\", data: \"123\" };\n\n// Should not compile, but does...\nconst test3: TypedValue = { type: \"NUM\", data: \"123\" };\n</code></pre>\n\n<p>It seems that Typescript generates many concrete types for the interface <code>TypedValue</code>:</p>\n\n<p>so</p>\n\n<pre><code>interface TypedValue&lt;T = ValueType, D = TypeOf&lt;T&gt;&gt; \n</code></pre>\n\n<p>corresponds to</p>\n\n<pre><code>interface TypedValue&lt;\"NUM\", number&gt; \ninterface TypedValue&lt;\"NUM\", string&gt; \ninterface TypedValue&lt;\"NUM\", never&gt; \ninterface TypedValue&lt;\"STR\", number&gt; \ninterface TypedValue&lt;\"STR\", string&gt; \ninterface TypedValue&lt;\"STR\", never&gt; \n</code></pre>\n\n<p>and maybe more, while I actually want this generic type to correspond to just</p>\n\n<pre><code>interface TypedValue&lt;\"NUM\", number&gt; \ninterface TypedValue&lt;\"STR\", string&gt; \n</code></pre>\n\n<p>How can I avoid this type distribution, e.g. how can I tie one type parameter to another type parameter in typescript? </p>\n\n<p>I know about the trick to suppress type distribution using</p>\n\n<pre><code>type TypeOf&lt;T&gt;\n    = [T] extends [\"NUM\"] ? number\n    : [T] extends [\"STR\"] ? string\n    : never;\n</code></pre>\n\n<p>But I can't seem solve the puzzle myself, and I really want to dig deeper in this magical type system, so any help is welcome :) Pretty sure jcalz knows how to tackle this ;)</p>\n\n<p><strong>EDIT</strong> <em>It finally clicked after Titian Cernicova-Dragomir answer! Personally I understand the solution better with the following code snippet:</em></p>\n\n<pre><code>type Pairs1&lt;T&gt; = [T, T];\ntype Pairs2&lt;T&gt; = T extends (infer X) ? [X, X] : never;\n\ntype P1 = Pairs1&lt;\"A\" | \"B\"&gt;; // =&gt; [\"A\" | \"B\", \"A\" | \"B\"]  \ntype P2 = Pairs2&lt;\"A\" | \"B\"&gt;; // =&gt; [\"A\", \"A\"] | [\"B\" | \"B\"]\n</code></pre>\n\n<p>What seems to happen, the Typescript compiler will check <code>T extends (infer X)</code> for each union member <code>\"A\"|\"B\"</code>, which always succeeds, but it now binds the matching type variable to a <strong>non-union</strong> type variable <code>X</code>. And the <code>infer X</code> is actually not needed, but it helped me to understand it better. </p>\n\n<p>Infinite gratitude, I've been struggling with this for a long time.</p>\n\n<p>So now I finally understand the following excerpt from the Typescript manual:</p>\n\n<p><em>In instantiations of a distributive conditional type <code>T extends U ? X : Y</code>, references to <code>T</code> within the conditional type are resolved to <strong>individual constituents of the union type</strong> (i.e. <code>T</code> refers to the individual constituents after the conditional type is distributed over the union type). Furthermore, references to <code>T</code> within <code>X</code> have an additional type parameter constraint <code>U</code> (i.e. <code>T</code> is considered assignable to <code>U</code> within <code>X</code>).</em></p>\n"}, {"tags": ["node.js", "typescript", "singleton"], "comments": [{"owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "edited": false, "score": 0, "creation_date": 1547027943, "post_id": 54107382, "comment_id": 95047020, "body": "<i>the output is &quot;aaa&quot;, but I need to output previous setted value (bbb)</i> - there&#39;s no evidence it was previously setted. The question doesn&#39;t show how these modules are related. Please, provide <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "edited": false, "score": 0, "creation_date": 1547030558, "post_id": 54107577, "comment_id": 95048574, "body": "I can&#39;t import part1 before, the race condition must be exact like my example"}, {"owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "reply_to_user": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "edited": false, "score": 0, "creation_date": 1547030627, "post_id": 54107577, "comment_id": 95048624, "body": "Why? You don&#39;t show how where part1 is used in your example. It&#39;s not imported in main."}, {"owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "reply_to_user": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "edited": false, "score": 0, "creation_date": 1547030972, "post_id": 54107577, "comment_id": 95048839, "body": "Is there a real reason why there should be dynamic <code>import()</code> and not static <code>import</code>?"}, {"owner": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "edited": false, "score": 0, "creation_date": 1547031051, "post_id": 54107577, "comment_id": 95048890, "body": "Yes, because modules are loaded by folder scan"}, {"owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "reply_to_user": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "edited": false, "score": 0, "creation_date": 1547031757, "post_id": 54107577, "comment_id": 95049425, "body": "At this point the question doesn&#39;t contain the problem that could be replicated besides singleton class. There&#39;s no race condition. It should work. <a href=\"https://stackblitz.com/edit/typescript-covzy1\" rel=\"nofollow noreferrer\">stackblitz.com/edit/typescript-covzy1</a>"}], "tags": [], "owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "is_accepted": false, "score": 1, "last_activity_date": 1547031501, "last_edit_date": 1547031501, "creation_date": 1547028395, "answer_id": 54107577, "question_id": 54107382, "link": "https://stackoverflow.com/questions/54107382/nodejs-ts-manage-shared-variable/54107577#54107577", "title": "nodejs ts manage shared variable", "body": "<p>Singleton classes can often be considered antipatterns, they are certainly antipatterns in modular environments. Modules naturally provide singletons in Node.js because they are evaluated only once under normal circumstances.</p>\n\n<p>The problem with original code is that <code>global.foo = \"bbb\"</code> in main.js is evaluated after <code>console.log(global.foo)</code> in part1.js, so there is race condition.</p>\n\n<p>It could be:</p>\n\n<p><em>global.js</em></p>\n\n<pre><code>export default { foo: 'a' };\n</code></pre>\n\n<p><em>part1.js</em></p>\n\n<pre><code>import _global from \"./global\"; // _global.foo === 'a'\nimport \"./part2\";  // _global.foo === 'b'\nconsole.log(_global.foo);\n</code></pre>\n\n<p><em>part2.js</em></p>\n\n<pre><code>import _global from \"./global\";\n_global.foo = \"b\";\n</code></pre>\n\n<p>Another potential problem in original code is that <code>global</code> import shadows <code>global</code> global.</p>\n"}], "owner": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547031501, "creation_date": 1547027775, "last_edit_date": 1547030815, "question_id": 54107382, "link": "https://stackoverflow.com/questions/54107382/nodejs-ts-manage-shared-variable", "title": "nodejs ts manage shared variable", "body": "<p>I have a singleton module</p>\n\n<pre><code>class Singleton {\n    private static instance: Singleton;\n    private _foo!: string;\n    private constructor() {\n\n    }\n    static getInstance() {\n        if (!Singleton.instance) {\n            Singleton.instance = new Singleton();\n            Singleton.instance._foo = \"aaa\";\n        }\n        return Singleton.instance;\n    }\n    get foo(): string {\n        return this._foo;\n    }\n    set foo(txt) {\n        this._foo = txt;\n    }\n}\nexport let global = Singleton.getInstance();\n</code></pre>\n\n<p>in the main file I do this</p>\n\n<pre><code>// main.ts\nimport { global } from \"./global\";\nglobal.foo = \"bbb\";\nconsole.log(global.foo);\nimport(\"./part1\").then((t) =&gt; {\n  t.default();\n});\n</code></pre>\n\n<p>this outputs \"bbb\".  Now main module import another file (part1.ts)</p>\n\n<p>In part1.ts I import again the global module</p>\n\n<pre><code>// part1.ts\nimport { global } from \"./global\";\nexport default () =&gt; {\n  console.log(\"test:\" + global.foo);\n};\n</code></pre>\n\n<p>the output is \"aaa\", but I need to output previous setted value (bbb)<br>\nHow can I make this?</p>\n"}, {"tags": ["typescript", "react-native", "jestjs"], "comments": [{"owner": {"reputation": 5207, "user_id": 554406, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ff72de27309c4114240d2c7d214a0d2f?s=128&d=identicon&r=PG", "display_name": "jchook", "link": "https://stackoverflow.com/users/554406/jchook"}, "edited": false, "score": 0, "creation_date": 1548020042, "post_id": 54107115, "comment_id": 95384200, "body": "Discussion here: <a href=\"https://github.com/facebook/metro/issues/242\" rel=\"nofollow noreferrer\">github.com/facebook/metro/issues/242</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 2644474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc1ded6ee221efcc7f9fbb042d2a7f2?s=128&d=identicon&r=PG", "display_name": "tegandbiscuits", "link": "https://stackoverflow.com/users/2644474/tegandbiscuits"}, "edited": false, "score": 0, "creation_date": 1594672732, "post_id": 54281248, "comment_id": 111202281, "body": "Might be worth pointing out that <code>transform</code> in the JSON example needs to be wrapped in double quotes (<code>&quot;transform&quot;</code>)."}], "tags": [], "owner": {"reputation": 5207, "user_id": 554406, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ff72de27309c4114240d2c7d214a0d2f?s=128&d=identicon&r=PG", "display_name": "jchook", "link": "https://stackoverflow.com/users/554406/jchook"}, "is_accepted": false, "score": 5, "last_activity_date": 1594685240, "last_edit_date": 1594685240, "creation_date": 1548020326, "answer_id": 54281248, "question_id": 54107115, "link": "https://stackoverflow.com/questions/54107115/couldnt-find-preset-modulemetro-react-native-babel-preset-relative-to-direct/54281248#54281248", "title": "Couldn&#39;t find preset &quot;module:metro-react-native-babel-preset&quot; relative to directory", "body": "<p><a href=\"https://github.com/facebook/metro/issues/242\" rel=\"nofollow noreferrer\">This issue</a> remains open at the time of writing.</p>\n<p>Users seem to have mixed results with the fixes, but these two worked for me:</p>\n<h2>Option 1: Change .babelrc to .babelrc.js</h2>\n<p>Simply rename <code>.babelrc</code> to <code>.babelrc.js</code> or <code>babel.config.js</code>.</p>\n<p>Don't forget to add <code>module.exports = </code> to the beginning of the file.</p>\n<p>This fixed my jest issue but broke other eslint plugins for me.</p>\n<h2>Option 2: Add transform to Jest config</h2>\n<p>For option 2, I think it works around the issue by manually invoking the react-native preprocessor on all javascript files.</p>\n<pre><code>transform: { '^.+\\\\.js$': '&lt;rootDir&gt;/node_modules/react-native/jest/preprocessor.js' }\n</code></pre>\n<p>If you don't have a separate Jest config file, you can add it to your package.json like...</p>\n<pre><code>{\n  &quot;jest&quot;: {\n    &quot;transform&quot;: { \n      &quot;^.+\\\\.js$&quot;: &quot;&lt;rootDir&gt;/node_modules/react-native/jest/preprocessor.js&quot; \n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1397, "user_id": 7890537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qQEYY.jpg?s=128&g=1", "display_name": "Qui-Gon Jinn", "link": "https://stackoverflow.com/users/7890537/qui-gon-jinn"}, "is_accepted": false, "score": 0, "last_activity_date": 1579486478, "last_edit_date": 1579486478, "creation_date": 1579485842, "answer_id": 59816147, "question_id": 54107115, "link": "https://stackoverflow.com/questions/54107115/couldnt-find-preset-modulemetro-react-native-babel-preset-relative-to-direct/59816147#59816147", "title": "Couldn&#39;t find preset &quot;module:metro-react-native-babel-preset&quot; relative to directory", "body": "<p>I had the same warnind in console. I fixed it by running this code:</p>\n\n<pre><code>npm i metro-react-native-babel-preset --save-dev\n</code></pre>\n"}], "owner": {"reputation": 4041, "user_id": 2026768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e48ee03566f6034c90888ef76ad6fac0?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2026768/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2700, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1594685240, "creation_date": 1547026989, "last_edit_date": 1547138807, "question_id": 54107115, "link": "https://stackoverflow.com/questions/54107115/couldnt-find-preset-modulemetro-react-native-babel-preset-relative-to-direct", "title": "Couldn&#39;t find preset &quot;module:metro-react-native-babel-preset&quot; relative to directory", "body": "<p>I'm trying to run my test suite but I am getting the following error:</p>\n\n<pre><code>Couldn't find preset \"module:metro-react-native-babel-preset\" relative to directory \"/Users/dan/Sites/X\"\n\n      at node_modules/babel-core/lib/transformation/file/options/option-manager.js:293:19\n          at Array.map (&lt;anonymous&gt;)\n      at OptionManager.resolvePresets (node_modules/babel-core/lib/transformation/file/options/option-manager.js:275:20)\n      at OptionManager.mergePresets (node_modules/babel-core/lib/transformation/file/options/option-manager.js:264:10)\n      at OptionManager.mergeOptions (node_modules/babel-core/lib/transformation/file/options/option-manager.js:249:14)\n      at OptionManager.init (node_modules/babel-core/lib/transformation/file/options/option-manager.js:368:12)\n      at File.initOptions (node_modules/babel-core/lib/transformation/file/index.js:212:65)\n      at File.initOptions (node_modules/ts-jest/dist/util/hacks.js:23:43)\n      at new File (node_modules/babel-core/lib/transformation/file/index.js:135:24)\n      at Pipeline.transform (node_modules/babel-core/lib/transformation/pipeline.js:46:16)\n</code></pre>\n\n<p>Here's my <code>jest</code> config in <code>package.json</code>:</p>\n\n<pre><code>\"jest\": {\n    \"preset\": \"react-native\",\n    \"moduleFileExtensions\": [\n      \"ts\",\n      \"tsx\",\n      \"js\",\n      \"jsx\",\n      \"json\"\n    ],\n    \"transform\": {\n      \"^.+\\\\.(js)$\": \"&lt;rootDir&gt;/node_modules/react-native/jest/preprocessor.js\",\n      \"\\\\.(ts|ts)x?$\": \"ts-jest\"\n    },\n    \"testRegex\": \"/src/.*.spec.(js|ts|tsx)?$\",\n    \"globals\": {\n      \"ts-jest\": {\n        \"useBabelrc\": true\n      }\n    }\n  }\n</code></pre>\n\n<p>If needed, here's the contents of <code>babelrc</code></p>\n\n<pre><code>{\n  \"presets\": [\"module:metro-react-native-babel-preset\"],\n  \"plugins\": [\n    [\n      \"module-resolver\",\n      {\n        \"alias\": {\n          \"~\": \"./src\"\n        }\n      }\n    ]\n  ]\n}\n</code></pre>\n"}, {"tags": ["typescript", "query-parameters"], "comments": [{"owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "edited": false, "score": 0, "creation_date": 1547032033, "post_id": 54107056, "comment_id": 95049603, "body": "Show &#39;route&#39; in &#39;dashboard.module.ts&#39; please!"}, {"owner": {"reputation": 9, "user_id": 10888773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KHNoi1UgVfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcay2oShAAdI0MwWC3oxLsHhkpax6Q/mo/photo.jpg?sz=128", "display_name": "Anusha M", "link": "https://stackoverflow.com/users/10888773/anusha-m"}, "reply_to_user": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "edited": false, "score": 0, "creation_date": 1547126872, "post_id": 54107056, "comment_id": 95090551, "body": "Thanks for help, I solved this problem by adding query params  in html.  [routerLink]=&quot;[item.page]&quot; [queryParams]=&quot;{tenantId: cookieService.get(&#39;tenantId&#39;)}&quot;"}], "owner": {"reputation": 9, "user_id": 10888773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KHNoi1UgVfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcay2oShAAdI0MwWC3oxLsHhkpax6Q/mo/photo.jpg?sz=128", "display_name": "Anusha M", "link": "https://stackoverflow.com/users/10888773/anusha-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547026781, "creation_date": 1547026781, "question_id": 54107056, "link": "https://stackoverflow.com/questions/54107056/how-to-append-query-parameters-on-url-for-all-the-child-roots-in-typescript", "title": "how to append query parameters on URL for all the child roots in typescript", "body": "<p>I have a requirement like read particular key from the Url which user enters\nfor example\nEX : localhost:4200/?tenantId=Demo</p>\n\n<p>I have to read tenantId from the url then it redirects to some third party library and comes back to localhost(Integration with third party library). When user clicks on one of my left menu item, url changes like \"localhost:4200/insights\"</p>\n\n<p>My routes.ts look likes below</p>\n\n<pre><code>const routes: Routes = [\n    {\n        path: '',\n        component: PagesComponent,\n        canActivate : [AppAuthGuard],\n        data: { roles: ['Developer', 'Tester'] },\n\n        children: [\n            {\n                path: '',\n                loadChildren: './insight/dashboard.module#DashboardModule'\n            },\n            {\n                path: 'insight',\n                loadChildren: './insight/dashboard.module#DashboardModule'\n            },\n            {\n                path: 'eis',\n                loadChildren: './eis/eis.module#EisModule'\n            },\n            {\n                path: 'oce',\n                loadChildren: './oce/oce.module#OceModule'\n            },\n            {\n                path: 'analytics',\n                loadChildren: './clm/clm.module#ClmModule'\n            },\n            {\n                path: 'automation',\n                loadChildren: './sa/sa.module#SaModule'\n            },\n            {\n                path: 'builder',\n                loadChildren: '../common/theme-builder/builder.module#BuilderModule'\n            },\n            {\n                path: 'profile',\n                component: ProfileComponent\n            }\n        ]\n    },\n    {\n        path: 'login',\n        canActivate: [NgxPermissionsGuard],\n        loadChildren: './auth/auth.module#AuthModule',\n        data: {\n            permissions: {\n                except: 'ADMIN'\n            }\n        },\n    },\n    {\n        path: '404',\n        component: ErrorPageComponent\n    },\n    {\n        path: 'error/:type',\n        component: ErrorPageComponent\n    },\n];\n</code></pre>\n\n<p>My url should look like localhost:4200/insight?tenantId=Demo</p>\n\n<p>How can I achieve?</p>\n"}, {"tags": ["angular", "typescript", "momentjs", "angular7"], "comments": [{"owner": {"reputation": 2330, "user_id": 10866113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OUL6k.jpg?s=128&g=1", "display_name": "Thanveer Shah", "link": "https://stackoverflow.com/users/10866113/thanveer-shah"}, "edited": false, "score": 0, "creation_date": 1547024191, "post_id": 54106272, "comment_id": 95044844, "body": "Its supposed to be [ngClass]=&quot;{&#39;current-date&#39; ? date.isSame(new Date(): &#39;day&#39;) }&quot;&gt;"}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "reply_to_user": {"reputation": 2330, "user_id": 10866113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OUL6k.jpg?s=128&g=1", "display_name": "Thanveer Shah", "link": "https://stackoverflow.com/users/10866113/thanveer-shah"}, "edited": false, "score": 0, "creation_date": 1547024230, "post_id": 54106272, "comment_id": 95044865, "body": "@ThanveerShah this is not a valid syntax for ngClass."}, {"owner": {"reputation": 2330, "user_id": 10866113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OUL6k.jpg?s=128&g=1", "display_name": "Thanveer Shah", "link": "https://stackoverflow.com/users/10866113/thanveer-shah"}, "edited": false, "score": 0, "creation_date": 1547024315, "post_id": 54106272, "comment_id": 95044929, "body": "That&#39;s how you do ternary operation"}, {"owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "reply_to_user": {"reputation": 2330, "user_id": 10866113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OUL6k.jpg?s=128&g=1", "display_name": "Thanveer Shah", "link": "https://stackoverflow.com/users/10866113/thanveer-shah"}, "edited": false, "score": 1, "creation_date": 1547024387, "post_id": 54106272, "comment_id": 95044969, "body": "@ThanveerShah Yes, but why are you talking about ternary here ? This has nothing to do with ternary."}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "edited": false, "score": 1, "creation_date": 1547024512, "post_id": 54106272, "comment_id": 95045043, "body": "I think the problem is about <code>new Date()</code> afaik you cannot call <code>new</code> in template. Can you try to make <code>isSame()</code> a method that returns <code>boolean</code> in the component and pass variables to it? Or, you can define a property like <code>newDate = new Date()</code> and use it in <code>date.isSame()</code>, maybe."}, {"owner": {"reputation": 103, "user_id": 6860796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c657886a2e974d9c46d3186d5a6ed3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Patryk B\u0142azi\u0144ski", "link": "https://stackoverflow.com/users/6860796/patryk-b%c5%82azi%c5%84ski"}, "edited": false, "score": 2, "creation_date": 1547024583, "post_id": 54106272, "comment_id": 95045095, "body": "To me, the problem is with <code>new Date()</code>. The best option would be map dates. Add new property isSame which will hold the result of the method and in template use it like <code>[ngClass]=&quot;{&#39;current-date&#39;: date.isSame}&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7685, "user_id": 8718377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGFwM.png?s=128&g=1", "display_name": "veben", "link": "https://stackoverflow.com/users/8718377/veben"}, "is_accepted": true, "score": 0, "last_activity_date": 1547025766, "last_edit_date": 1547025766, "creation_date": 1547025362, "answer_id": 54106632, "question_id": 54106272, "link": "https://stackoverflow.com/questions/54106272/ngclass-boolean-expression-gets-a-template-parsing-error/54106632#54106632", "title": "ngClass boolean expression gets a template parsing error", "body": "<p>It may be cause of the <code>isSame</code> method.\nDeclare a boolean var, which will be the result of this method:</p>\n\n<pre><code>isSame: boolean;\n// ...\nisDateSame = date.isSame(new Date(), 'day');\n</code></pre>\n\n<p>And use the boolean in the <code>ngClass</code>:</p>\n\n<pre><code>&lt;div class=\"timeline-date\"\n    *ngFor=\"let date of dates\"\n    [ngClass]=\"current-date: isSame\"&gt;\n  {{date.format(\"MMM Do\")}}\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>EDIT</strong>: How to properly use <code>moment.js</code> with angular:</p>\n\n<ol>\n<li><p>Install it with <code>npm</code></p>\n\n<p><code>npm install --save moment</code></p></li>\n<li><p>Import it in the <code>.ts</code> file:</p>\n\n<p><code>import * as moment from 'moment';</code></p></li>\n<li><p>Use it like that:</p>\n\n<p><code>let myMoment: moment.Moment = moment(\"someDate\");</code></p></li>\n</ol>\n"}], "owner": {"reputation": 439, "user_id": 10845059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86fa7ed018a26cf5aacc528c2e7cc819?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/10845059/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 54106632, "answer_count": 1, "score": 1, "last_activity_date": 1547027970, "creation_date": 1547024014, "last_edit_date": 1547027970, "question_id": 54106272, "link": "https://stackoverflow.com/questions/54106272/ngclass-boolean-expression-gets-a-template-parsing-error", "title": "ngClass boolean expression gets a template parsing error", "body": "<p>I want to check if a <strong>moment</strong> date is the current day. This isn't working and I'm not sure why it's getting this error. I think the error because of Angular.</p>\n\n<pre><code>&lt;div class=\"timeline-date\"\n      *ngFor=\"let date of dates\"\n      [ngClass]=\"{'current-date': date.isSame(new Date(), 'day') }\"&gt;\n  {{date.format(\"MMM Do\")}}\n&lt;/div&gt;\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>Uncaught Error: Template parse errors: Parser Error: Missing expected\n  ) at column 34 in [{'current-date': date.isSame(new Date(), 'day') }]</p>\n</blockquote>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "routes", "ionic4"], "answers": [{"tags": [], "owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "is_accepted": false, "score": 1, "last_activity_date": 1547023100, "creation_date": 1547023100, "answer_id": 54106033, "question_id": 54105700, "link": "https://stackoverflow.com/questions/54105700/pass-object-with-route-ionic-4/54106033#54106033", "title": "Pass object with route ionic 4", "body": "<p>My suggestion to you is to implement a <a href=\"https://angular.io/api/router/Resolve\" rel=\"nofollow noreferrer\">resolver</a></p>\n\n<p>Take a look at my <a href=\"https://stackblitz.com/edit/angular-provide-pipe-in-component\" rel=\"nofollow noreferrer\">DEMO</a> at StackBlitz to see it in action</p>\n\n<p>Implementing a resolver:</p>\n\n<pre><code>@Injectable()\nclass TeamResolver implements Resolve&lt;Team&gt; {\n  constructor(private myService: MyService) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable&lt;any&gt;|Promise&lt;any&gt;|any {\n    // return the data you need in your component using your service \n    // route params will sit in - route.params.id\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Declaring it:</p>\n\n<pre><code>@NgModule({\n  imports: [\n    RouterModule.forRoot([\n      {\n        path: 'team/:id',\n        component: TeamCmp,\n        resolve: {\n          team: TeamResolver\n        }\n      }\n    ])\n  ],\n  providers: [TeamResolver]\n})\nclass AppModule {}\n</code></pre>\n\n<hr>\n\n<p>Using it:</p>\n\n<pre><code>@Component({\n  ...\n})\nexport class TeamCmp {\n  constructor(private activatedRoute: ActivatedRoute) {\n    // the data sits here - this.activatedRoute.snapshot.data;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7499215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ec57810d165beba9a855777196ef69?s=128&d=identicon&r=PG&f=1", "display_name": "Md. Maruf ur Rahman", "link": "https://stackoverflow.com/users/7499215/md-maruf-ur-rahman"}, "is_accepted": false, "score": 0, "last_activity_date": 1554874443, "creation_date": 1554874443, "answer_id": 55605342, "question_id": 54105700, "link": "https://stackoverflow.com/questions/54105700/pass-object-with-route-ionic-4/55605342#55605342", "title": "Pass object with route ionic 4", "body": "<p>You can simply do it by using navigate of Router</p>\n\n<pre><code>    this.router.navigate(['screen2', {modelName: model}]);\n</code></pre>\n\n<p>and receive by ActivatedRoute</p>\n\n<pre><code>    this.activatedRoute.snapshot.paramMap.get('modelName');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 9115897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N6lVC.jpg?s=128&g=1", "display_name": "monkey", "link": "https://stackoverflow.com/users/9115897/monkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1587528297, "creation_date": 1587528297, "answer_id": 61357134, "question_id": 54105700, "link": "https://stackoverflow.com/questions/54105700/pass-object-with-route-ionic-4/61357134#61357134", "title": "Pass object with route ionic 4", "body": "<p>Since your question was 'how do I send stuff from one page to another', the solution needn't be constrained to using the router: another alternative is using storage. </p>\n\n<pre><code>import { Router } from '@angular/router';\nimport { Storage } from '@ionic/storage';\n\nblah() {\n    this.storage.set('importantThing', this.importantThing);\n    this.router.navigateByUrl('my-page/new-subpage');\n}\n</code></pre>\n\n<p>And then in the receiving page:</p>\n\n<pre><code>await this.storage.get('importantThing').then(result =&gt; {\n      this.importantThing= result;\n      console.log('my importantThing is', this.importantThing);\n    });\n</code></pre>\n\n<p>Just throwing it out there as an alternative. It's pretty useful the way my app is structured. The item will persist behind the scenes in storage until you delete it. Also may be useful, or not. Depends on what you need, I suppose! Hope it's useful.</p>\n"}], "owner": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2360, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1587528297, "creation_date": 1547021596, "question_id": 54105700, "link": "https://stackoverflow.com/questions/54105700/pass-object-with-route-ionic-4", "title": "Pass object with route ionic 4", "body": "<p>I am new to IONIC 4 and I want to pass an object from one screen to another screen. My first screen is screen1 and I want to pass \"model\" object of type \"any\" from screen1 to screen2.</p>\n\n<p>Currently i am navigating from my screen1 to screen2 using below code.</p>\n\n<blockquote>\n  <p>this.router.navigateByUrl('screen2/');</p>\n</blockquote>\n\n<p>How can i pass \"model\" object with this route?</p>\n\n<p>I searched on google for a solution but I found nothing related my question. I just found only one thing that we can pass data with URL using queryparams but I want to keep data private and don't want to show data in URL. </p>\n\n<p>Anyone knows, how can I do that?</p>\n"}, {"tags": ["typescript", "mongoose", "constructor"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 3341619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b59d54ac85fc2ac85b5e86e3650a3a1f?s=128&d=identicon&r=PG", "display_name": "Myolisi", "link": "https://stackoverflow.com/users/3341619/myolisi"}, "edited": false, "score": 0, "creation_date": 1547125256, "post_id": 54105714, "comment_id": 95089615, "body": "Thanks, I&#39;ll call the <code>configConnection</code> method after creating an instance. Very helpful."}, {"owner": {"reputation": 425, "user_id": 2059193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947f7adc5d32267e5b39971e021389f4?s=128&d=identicon&r=PG", "display_name": "Nikolai Tenev", "link": "https://stackoverflow.com/users/2059193/nikolai-tenev"}, "reply_to_user": {"reputation": 17, "user_id": 3341619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b59d54ac85fc2ac85b5e86e3650a3a1f?s=128&d=identicon&r=PG", "display_name": "Myolisi", "link": "https://stackoverflow.com/users/3341619/myolisi"}, "edited": false, "score": 0, "creation_date": 1547194143, "post_id": 54105714, "comment_id": 95116139, "body": "Measuring this yourself would have taken less time than asking in stackoverflow and would have given you a way more definitive answer ;) (as stated in my answer)"}], "tags": [], "owner": {"reputation": 425, "user_id": 2059193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947f7adc5d32267e5b39971e021389f4?s=128&d=identicon&r=PG", "display_name": "Nikolai Tenev", "link": "https://stackoverflow.com/users/2059193/nikolai-tenev"}, "is_accepted": true, "score": 0, "last_activity_date": 1547021647, "creation_date": 1547021647, "answer_id": 54105714, "question_id": 54105565, "link": "https://stackoverflow.com/questions/54105565/is-it-efficient-to-call-a-method-that-returns-a-promise-inside-a-constructor/54105714#54105714", "title": "Is it efficient to call a method (that returns a promise) inside a constructor", "body": "<p>I don't think it matters in this case, but I wouldn't do it like that. AFAIK constructor should be used only for instantiating object stuff, so I would use either a factory method to create the connection and then the object or just call <code>configConnection</code> after the constructor.</p>\n\n<p>Either way - the only way to know for sure is to measure both approaches.</p>\n"}], "owner": {"reputation": 17, "user_id": 3341619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b59d54ac85fc2ac85b5e86e3650a3a1f?s=128&d=identicon&r=PG", "display_name": "Myolisi", "link": "https://stackoverflow.com/users/3341619/myolisi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54105714, "answer_count": 1, "score": 1, "last_activity_date": 1547021647, "creation_date": 1547021007, "last_edit_date": 1547021372, "question_id": 54105565, "link": "https://stackoverflow.com/questions/54105565/is-it-efficient-to-call-a-method-that-returns-a-promise-inside-a-constructor", "title": "Is it efficient to call a method (that returns a promise) inside a constructor", "body": "<p>I have a method that has a mongoose connection, so I was wondering is it efficient to call that method inside a connection?</p>\n\n<pre><code>constructor(database: string, dbmodel: string) {\nthis.database = database;\nthis.dbmodel = dbmodel;\nthis.models = model(dbmodel, new Schema({}));\nthis.configConnection(); \n}\n\nprivate configConnection() {\nconnect('mongodb://localhost:27017/'+ this.database},options)\n      .then(res =&gt; console.log(res))\n      .catch(error =&gt; logger.info(error));\n}\n</code></pre>\n\n<p>At the moment the query results are returned after about 5-10 seconds, thus am not sure if the problem is with the implementation or calling the <code>configConnection</code> method inside the constructor. </p>\n"}, {"tags": ["node.js", "typescript", "http", "interface"], "comments": [{"owner": {"reputation": 343, "user_id": 9325478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a263fc20fc627e4ce2ecdbc5771cdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Chauhan", "link": "https://stackoverflow.com/users/9325478/amit-chauhan"}, "edited": false, "score": 1, "creation_date": 1547095863, "post_id": 54105527, "comment_id": 95076078, "body": "by defining const option: any error gone."}], "owner": {"reputation": 343, "user_id": 9325478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a263fc20fc627e4ce2ecdbc5771cdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Chauhan", "link": "https://stackoverflow.com/users/9325478/amit-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1547020849, "creation_date": 1547020849, "question_id": 54105527, "link": "https://stackoverflow.com/questions/54105527/argument-of-type-isms91options-is-not-assignable-to-parameter-of-type-string", "title": "Argument of type &#39;Isms91Options&#39; is not assignable to parameter of type &#39;string | URL&#39;", "body": "<p>I am new in typescript and just trying to convert Msg91 NodeJS API code to typescript but got an error while compiling the code. i.e 'Argument of type 'Isms91Options' is not assignable to the parameter of type \"string | URL'.\"</p>\n\n<p>I tried to remove all the possible type of error but I think I missed some.</p>\n\n<pre><code>interface IoptionsType {\n    phoneNumber: string;\n    message: string;\n}\n\ninterface IheadersType {\n  authkey: string;\n  contentType: string;\n}\n\ninterface Isms91Options {\n    method: string;\n    hostname: string;\n    port: string;\n    path: string;\n    headers: IheadersType;\n}\n\nexport const sendSms = (data: IoptionsType) =&gt; {\n  const {message, phoneNumber} = data;\n  const option: Isms91Options = {\n                  headers: {\n                    authkey: \"XXXXXXXXXXXXX\",\n                    contentType: \"application/json\"\n                  },\n                  hostname: \"api.msg91.com\",\n                  method: \"POST\",\n                  path: `http://api.msg91.com/api/v2/sendsms?message=${message}&amp;authkey=XXXXXXXXXXXXXXX&amp;`\n                        + `mobiles=+91${phoneNumber}&amp;route=4&amp;sender=XXXXX&amp;country=91&amp;unicode=1`,\n                  port: null,\n  };\n\n  const req = http.request(option, (res: Response) =&gt; {\n    const chunks: any[] = [];\n    res.on(\"data\", (chunk) =&gt; {\n      chunks.push(chunk);\n    });\n\n    res.on(\"end\", () =&gt; {\n      log.info(Buffer.concat(chunks));\n    });\n  });\n\n  req.write(JSON.stringify({\n    country: \"91\",\n    route: \"4\",\n    sender: \"XXXXXX\",\n    sms:\n     [ { message: \"testing\", to: [ \"XXXXXXX\" ] } ] }));\n  req.end();\n};\n</code></pre>\n\n<p>This is the error I am facing while compiling the code\nerror TS2345: Argument of type 'Isms91Options' is not assignable to parameter of type 'string | URL'.\n  Type 'Isms91Options' is missing the following properties from type 'URL': hash, host, href, origin, and 7 more.</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 183, "user_id": 5751850, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffe1ca90679090816b5fc3f50d77fff9?s=128&d=identicon&r=PG&f=1", "display_name": "Sneezy", "link": "https://stackoverflow.com/users/5751850/sneezy"}, "edited": false, "score": 0, "creation_date": 1547020150, "post_id": 54105317, "comment_id": 95042908, "body": "this is the info from the console.log, i&#39;d like to get the &quot;erTodeltEksamen&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 544, "user_id": 7861667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0d76e15496c2e015d03ed018fe16a1?s=128&d=identicon&r=PG&f=1", "display_name": "Srdjan", "link": "https://stackoverflow.com/users/7861667/srdjan"}, "is_accepted": true, "score": 0, "last_activity_date": 1547033878, "creation_date": 1547033878, "answer_id": 54109264, "question_id": 54105317, "link": "https://stackoverflow.com/questions/54105317/how-can-i-get-information-from-a-map-type/54109264#54109264", "title": "How can i get information from a map (type)", "body": "<p>If <code>this.props.besvarelsePlagiatstatus.get(70272)</code> returns an object than you can access <code>erTodeltEksamen</code> with <code>this.props.besvarelsePlagiatstatus.get(70272).erTodeltEksamen</code>...</p>\n"}], "owner": {"reputation": 183, "user_id": 5751850, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ffe1ca90679090816b5fc3f50d77fff9?s=128&d=identicon&r=PG&f=1", "display_name": "Sneezy", "link": "https://stackoverflow.com/users/5751850/sneezy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 54109264, "answer_count": 1, "score": 0, "last_activity_date": 1547033878, "creation_date": 1547019916, "question_id": 54105317, "link": "https://stackoverflow.com/questions/54105317/how-can-i-get-information-from-a-map-type", "title": "How can i get information from a map (type)", "body": "<p>You have for example this interface that hold a map with number, viewmodel.</p>\n\n<pre><code>     interface KlagenemnderPageProps {\n            besvarelsePlagiatstatus: Map&lt;number, BesvarelsePameldingViewModel&gt;;\n        }\n\nrender (){\n\nconsole.log(\n            \"Object\",\n            this.props.besvarelsePlagiatstatus.get(70272)\n        );\n\n}\n</code></pre>\n\n<p>This returns a object and i'd like to access these values.\n<a href=\"https://i.stack.imgur.com/lC8nI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lC8nI.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript", "angular6", "multi-select"], "comments": [{"owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "edited": false, "score": 0, "creation_date": 1547019974, "post_id": 54105172, "comment_id": 95042817, "body": "Stackblitz demo might be helpful"}], "owner": {"reputation": 223, "user_id": 4912160, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6bI0AwiQpeo/AAAAAAAAAAI/AAAAAAAAAQ0/jt6CEw7LTqc/photo.jpg?sz=128", "display_name": "vinay k hegde", "link": "https://stackoverflow.com/users/4912160/vinay-k-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1591688278, "creation_date": 1547019214, "question_id": 54105172, "link": "https://stackoverflow.com/questions/54105172/angular2-multiselect-dropdown-onaddfilternewitem-not-working", "title": "angular2-multiselect-dropdown onAddFilterNewItem not working", "body": "<p>Hi I am new to angular 6 and I using angular2-multiselect-dropdown but the thing is the onAddFilterNewItem not working.</p>\n\n<p>link for the multiselect- <a href=\"https://cuppalabs.github.io/angular2-multiselect-dropdown/#/searchfilterAddNewItem\" rel=\"nofollow noreferrer\">https://cuppalabs.github.io/angular2-multiselect-dropdown/#/searchfilterAddNewItem</a></p>\n\n<p>I tried to add settings and html tag which they have provided</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;angular2-multiselect style=\"width: 100%\" class=\"border-bot-none\" \nname=\"businessImpact\"\n[data]=\"businessImpactList\" [(ngModel)]=\"selectedbusinessImpactItems\" \n[settings]=\"businessImpactdropdownSettings\"\n(onSelect)=\"onItemSelect($event)\" (onDeSelect)=\"OnItemDeSelect($event)\" \n(onSelectAll)=\"onSelectAll($event)\"\n(onDeSelectAll)=\"onDeSelectAll($event)\" \n(onAddFilterNewItem)=\"onAddItem($event)\" required&gt;\n&lt;/angular2-multiselect&gt;\n</code></pre>\n\n<p>.ts(multiselect dropdown setting)</p>\n\n<pre><code>this.businessImpactdropdownSettings = {\nsingleSelection: true,\ntext: 'Select Business Impact',\nclasses: 'custom-class-example',\nprimaryKey: 'impactStatement',\nlabelKey: 'impactStatement',\nenableSearchFilter: true,\naddNewItemOnFilter: true,\nsearchBy: ['impactStatement']\n};\n\nonAddItem(data: string) {\nconsole.log(data);\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "vmware-clarity"], "answers": [{"tags": [], "owner": {"reputation": 6815, "user_id": 3969946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d321732817d23db36dd8dc81036f122?s=128&d=identicon&r=PG", "display_name": "Jeremy Wilken", "link": "https://stackoverflow.com/users/3969946/jeremy-wilken"}, "is_accepted": false, "score": 0, "last_activity_date": 1547052194, "creation_date": 1547052194, "answer_id": 54114747, "question_id": 54104911, "link": "https://stackoverflow.com/questions/54104911/how-to-get-filtered-results-from-clarity-datagrid/54114747#54114747", "title": "How to get filtered results from clarity datagrid?", "body": "<p>There is not currently an API to get the filtered list out, but currently the only support we have for is simple string filtering. You can get the active filters and apply the logic yourself to figure out what the list shows, example here <a href=\"https://clarity.design/documentation/datagrid/string-filtering\" rel=\"nofollow noreferrer\">https://clarity.design/documentation/datagrid/string-filtering</a>.</p>\n"}], "owner": {"reputation": 106, "user_id": 9363452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61989bb0d25dc7fecc6449fb593bf1c1?s=128&d=identicon&r=PG&f=1", "display_name": "officialMKL", "link": "https://stackoverflow.com/users/9363452/officialmkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547052194, "creation_date": 1547018087, "question_id": 54104911, "link": "https://stackoverflow.com/questions/54104911/how-to-get-filtered-results-from-clarity-datagrid", "title": "How to get filtered results from clarity datagrid?", "body": "<p>For my project at work I am using Angular for the frontend with Clarity Design. I have set up the datagrid with filtering. Now I want to get the list of filtered results to use inside another component. So I haven't found anything yet that makes it possible. That lead me to the question is it possible to get the filtered results out of the datagrid?</p>\n\n<p>Here is a very simple datagrid example: <a href=\"https://stackblitz.com/edit/clr-dg-filter-result\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/clr-dg-filter-result</a></p>\n"}, {"tags": ["typescript", "d3.js"], "comments": [{"owner": {"reputation": 1, "user_id": 10888008, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u7um1Pb34zA/AAAAAAAAAAI/AAAAAAAAAEQ/XKOELgw9eTU/photo.jpg?sz=128", "display_name": "JOYEB MULLA", "link": "https://stackoverflow.com/users/10888008/joyeb-mulla"}, "edited": false, "score": 0, "creation_date": 1547015479, "post_id": 54104373, "comment_id": 95040998, "body": "code :let svg = d3.select(&quot;body&quot;)            this.svg.append(&quot;svg&quot;)             .attr(&quot;width&quot;, 400)             .attr(&quot;height&quot;, 400)             .append(&#39;path&#39;)             .attr(&quot;d&quot;, d3.svg.symbol().type(&quot;triangle-up&quot;).size(500))             .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + 100 + &quot;,&quot; +               100 + &quot;)&quot;; })             .style(&quot;fill&quot;, &quot;red&quot;);"}, {"owner": {"reputation": 3428, "user_id": 4763309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcdc984b368da4f84e8f6fe92e5308a2?s=128&d=identicon&r=PG&f=1", "display_name": "mrkernelpanic", "link": "https://stackoverflow.com/users/4763309/mrkernelpanic"}, "edited": false, "score": 0, "creation_date": 1547016085, "post_id": 54104373, "comment_id": 95041179, "body": "Put your code as part of the question and not as a comment please."}, {"owner": {"reputation": 1, "user_id": 10888008, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u7um1Pb34zA/AAAAAAAAAAI/AAAAAAAAAEQ/XKOELgw9eTU/photo.jpg?sz=128", "display_name": "JOYEB MULLA", "link": "https://stackoverflow.com/users/10888008/joyeb-mulla"}, "reply_to_user": {"reputation": 3428, "user_id": 4763309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcdc984b368da4f84e8f6fe92e5308a2?s=128&d=identicon&r=PG&f=1", "display_name": "mrkernelpanic", "link": "https://stackoverflow.com/users/4763309/mrkernelpanic"}, "edited": false, "score": 0, "creation_date": 1547018370, "post_id": 54104373, "comment_id": 95042126, "body": "The javascript code is present at the URL : <a href=\"http://bl.ocks.org/ronakrrb/73e9204a66e2a9c1fee8\" rel=\"nofollow noreferrer\">bl.ocks.org/ronakrrb/73e9204a66e2a9c1fee8</a>"}], "owner": {"reputation": 1, "user_id": 10888008, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u7um1Pb34zA/AAAAAAAAAAI/AAAAAAAAAEQ/XKOELgw9eTU/photo.jpg?sz=128", "display_name": "JOYEB MULLA", "link": "https://stackoverflow.com/users/10888008/joyeb-mulla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547022900, "creation_date": 1547015465, "last_edit_date": 1547022900, "question_id": 54104373, "link": "https://stackoverflow.com/questions/54104373/convert-javascript-code-in-typescript-to-create-simple-pyramid", "title": "Convert javascript code in typescript to create simple pyramid", "body": "<p>I am creating a pyramid visual for my current project and have the below code which create only one triangle but i am unable to resize it as svg is resized.</p>\n\n<p>I got below code on internet  can you please help  me to translate this code to typescript code with d3.js ,the keyword(pyramid) does not work in my side.</p>\n\n<p>i am new to typescript and d3.js .</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var width = 700,\r\n  height = 450,\r\n  radius = Math.min(width, height) / 2;\r\n\r\nvar color = d3.scale.ordinal()\r\n  .range([\"#255aee\", \"#3a6fff\", \"#4f84ff\", \"rgb(101,154,302)\", \"rgb(122,175,323)\", \"rgb(144,197,345)\", \"rgb(165,218,366)\"]);\r\n\r\nvar svg = d3.select(\"body\").append(\"svg\")\r\n  .attr(\"width\", width)\r\n  .attr(\"height\", height)\r\n  .append(\"g\")\r\n\r\nvar data = [[\"region\", \"population\"], [\"Africa\", \"1110635000\"], [\"Americas\", \"972005000\"], [\"Asia\", \"4298723000\"], [\"Europe\", \"742452000\"], [\"Ocenia\", \"38304000\"]];\r\n\r\nd3.csv(/*\"data.csv\"*/data, function(error, data) {\r\n  var pyramid = d3.pyramid()\r\n    .size([width, height])\r\n    .value(function(d) {\r\n      return d.population;\r\n    });\r\n\r\n  var line = d3.svg.line()\r\n    .interpolate('linear-closed')\r\n    .x(function(d, i) {\r\n      return d.x;\r\n    })\r\n    .y(function(d, i) {\r\n      return d.y;\r\n    });\r\n\r\n  var g = svg.selectAll(\".pyramid-group\")\r\n    .data(pyramid(data))\r\n    .enter().append(\"g\")\r\n    .attr(\"class\", \"pyramid-group\");\r\n\r\n  g.append(\"path\")\r\n    .attr(\"d\", function(d) {\r\n      return line(d.coordinates);\r\n    })\r\n    .style(\"fill\", function(d) {\r\n      return color(d.region);\r\n    });\r\n\r\n  g.append(\"text\")\r\n    .attr({\r\n      \"y\": function(d, i) {\r\n        if (d.coordinates.length === 4) {\r\n          return (((d.coordinates[0].y - d.coordinates[1].y) / 2) + d.coordinates[1].y) + 5;\r\n        } else {\r\n          return (d.coordinates[0].y + d.coordinates[1].y) / 2 + 10;\r\n        }\r\n      },\r\n      \"x\": function(d, i) {\r\n        return width / 2;\r\n      }\r\n    })\r\n    .style(\"text-anchor\", \"middle\")\r\n    .text(function(d) {\r\n      return d.region;\r\n    });\r\n\r\n  d3.select(\"body\").append(\"table\")\r\n    .attr({\r\n      \"id\": \"footer\",\r\n      \"width\": width + \"px\"\r\n    })\r\n\r\n  d3.select(\"body #footer\").append(\"tr\")\r\n    .attr({\r\n      \"class\": \"PykCharts-credits\",\r\n      \"id\": \"credit-datasource\"\r\n    })\r\n    .append(\"td\")\r\n    .style(\"text-align\", \"left\")\r\n    .html(\"&lt;span style='pointer-events:none;'&gt;Credits: &lt;/span&gt;&lt;a href='http://pykcharts.com' target='_blank'&gt;\" + \"Pykcharts\" + \"&lt;/a&gt;\");\r\n\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>body {\r\n      font: 10px sans-serif;\r\n    }\r\n    \r\n    .arc path {\r\n      stroke: #fff;\r\n    }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;html&gt;\r\n&lt;head&gt;&lt;/head&gt;\r\n&lt;body&gt;\r\n  &lt;script src=\"http://d3js.org/d3.v3.min.js\"&gt;&lt;/script&gt;\r\n  &lt;script src=\"https://s3-ap-southeast-1.amazonaws.com/charts.pykih.com/gists/pyramid.js\"&gt;&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n&lt;!-- data.csv:\r\nregion,population\r\nAfrica,1110635000\r\nAmericas,972005000\r\nAsia,4298723000\r\nEurope,742452000\r\nOcenia,38304000\r\n--&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<pre><code>i want to draw a simple pyramid visual in power bi\n</code></pre>\n"}, {"tags": ["typescript", "constructor"], "comments": [{"owner": {"reputation": 23854, "user_id": 70345, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/aV45a.jpg?s=128&g=1", "display_name": "Ian Kemp", "link": "https://stackoverflow.com/users/70345/ian-kemp"}, "edited": false, "score": 0, "creation_date": 1547017787, "post_id": 54104187, "comment_id": 95041869, "body": "Your code makes no sense. Why would you try to return a value from a constructor? Why would you try to return a value that isn&#39;t an instance of the class?"}, {"owner": {"reputation": 3068, "user_id": 2045384, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8ca30e4fb6dc5eb9ff50af16807e620e?s=128&d=identicon&r=PG", "display_name": "tsh", "link": "https://stackoverflow.com/users/2045384/tsh"}, "reply_to_user": {"reputation": 23854, "user_id": 70345, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/aV45a.jpg?s=128&g=1", "display_name": "Ian Kemp", "link": "https://stackoverflow.com/users/70345/ian-kemp"}, "edited": false, "score": 0, "creation_date": 1547018534, "post_id": 54104187, "comment_id": 95042194, "body": "@IanKemp <code>return</code> in constructor is perfect valid (at least in JavaScript). And I would consider TypeScript as superset of JavaScript. So why it makes no sense. You may get more information about how to write a JavaScript constructor <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new#Description\" rel=\"nofollow noreferrer\">from MDN</a>."}, {"owner": {"reputation": 23854, "user_id": 70345, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/aV45a.jpg?s=128&g=1", "display_name": "Ian Kemp", "link": "https://stackoverflow.com/users/70345/ian-kemp"}, "edited": false, "score": 3, "creation_date": 1547019109, "post_id": 54104187, "comment_id": 95042464, "body": "But this isn&#39;t vanilla JavaScript, it&#39;s Typescript, and one of the reasons TS exists is to prevent you from doing some of the weird and nonsensical things that JavaScript allows, and returning a non-<code>this</code> value from a constructor definitely falls under &quot;weird and nonsensical&quot;. If you&#39;re going to write JS in TS, just write JS!"}], "answers": [{"comments": [{"owner": {"reputation": 3068, "user_id": 2045384, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8ca30e4fb6dc5eb9ff50af16807e620e?s=128&d=identicon&r=PG", "display_name": "tsh", "link": "https://stackoverflow.com/users/2045384/tsh"}, "edited": false, "score": 0, "creation_date": 1547018621, "post_id": 54104796, "comment_id": 95042226, "body": "You may get more information about how return value in constructor worked in JavaScript <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new#Description\" rel=\"nofollow noreferrer\">from MDN</a>. I would consider TypeScript as superset of JavaScript. And to my understanding, this means I can do this and it should work as is."}], "tags": [], "owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "is_accepted": false, "score": 2, "last_activity_date": 1547019717, "last_edit_date": 1547019717, "creation_date": 1547017541, "answer_id": 54104796, "question_id": 54104187, "link": "https://stackoverflow.com/questions/54104187/typescript-complain-has-no-initializer-and-is-not-definitely-assigned-in-the-co/54104796#54104796", "title": "TypeScript complain &quot;has no initializer and is not definitely assigned in the constructor&quot; about constructors by returning constructed object", "body": "<p>It considers {someField: true} as new object and the property someField has not been initialized.What is the purpose of return inside the constructor? You can replace it with <code>this.someField = true</code>.</p>\n\n<p>Edit: Actually, I debugged for more info, Try adding \"strictPropertyInitialization\": false to your compiler options and check. But it overrules the type strictness(beautiful feature of TS). But In my opinion, do not do this. For more <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html\" rel=\"nofollow noreferrer\">info</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1609405895, "post_id": 54106127, "comment_id": 115834756, "body": "This might still break <code>instanceof</code> though"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 41, "last_activity_date": 1547028176, "last_edit_date": 1547028176, "creation_date": 1547023438, "answer_id": 54106127, "question_id": 54104187, "link": "https://stackoverflow.com/questions/54104187/typescript-complain-has-no-initializer-and-is-not-definitely-assigned-in-the-co/54106127#54106127", "title": "TypeScript complain &quot;has no initializer and is not definitely assigned in the constructor&quot; about constructors by returning constructed object", "body": "<p><code>strictPropertyInitialization</code> forces you to initialize all properties that are not optional in the constructor of the class. This check can be useful as it ensures that you don't get unexpected uninitialized properties. There are several ways to get around the error, the first two are the general way to do it, in your case only the last on applies (I include all for completeness):</p>\n\n<p><strong>Initialize the field</strong></p>\n\n<p>If you define the property as <code>boolean</code> if should be <code>true</code> or <code>false</code> initialize it when you declare the field or initialize it in the constructor:</p>\n\n<pre><code>class MyClass {\n  someField: boolean = false;\n  constructor() {\n    return { someField: true };\n  }\n}\n</code></pre>\n\n<p><strong>Make the field optional</strong></p>\n\n<p>If the field can be <code>undefined</code>, you should mark this in the field declaration either by using <code>?</code> or typing the field as <code>undefined|boolean</code></p>\n\n<pre><code>class MyClass {\n    //someField?: boolean;\n    someField: boolean | undefined;\n    constructor() {\n        return { someField: true };\n    }\n}\n</code></pre>\n\n<p><strong>Use a not null assertion</strong></p>\n\n<p>In your case since in the constructor you are actually not initializing the current object (<code>this</code>) but returning a new one, you can tell the compiler it is wrong about the error and use a not null assertion. This assertion is specifically introduced because there are limitations in <code>strictPropertyInitialization</code> checks and sometimes the compiler gets it wrong. For those cases you can override what the compiler thinks, but you have to be explicit about it:</p>\n\n<pre><code>class MyClass {\n    someField!: boolean;\n    constructor() {\n        return { someField: true };\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1029, "user_id": 4689036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9eCBF.jpg?s=128&g=1", "display_name": "GMK Hussain", "link": "https://stackoverflow.com/users/4689036/gmk-hussain"}, "is_accepted": false, "score": 9, "last_activity_date": 1610005739, "last_edit_date": 1610005739, "creation_date": 1609404912, "answer_id": 65518667, "question_id": 54104187, "link": "https://stackoverflow.com/questions/54104187/typescript-complain-has-no-initializer-and-is-not-definitely-assigned-in-the-co/65518667#65518667", "title": "TypeScript complain &quot;has no initializer and is not definitely assigned in the constructor&quot; about constructors by returning constructed object", "body": "<p><strong>Solution 1</strong></p>\n<p>Add (!) sign after name:</p>\n<pre class=\"lang-js prettyprint-override\"><code>someField!:string;\n</code></pre>\n<p><strong>Solution 2</strong></p>\n<p>Open TypeScript config file\n<code>tsconfig.json</code> and add this code to compiler options</p>\n<pre class=\"lang-js prettyprint-override\"><code> &quot;angularCompilerOptions&quot;: {\n    //   ...\n    &quot;strictPropertyInitialization&quot;: false\n    //   ...\n  }\n\n</code></pre>\n<p>Note: it will make static analysis weaker</p>\n"}, {"comments": [{"owner": {"reputation": 2462, "user_id": 294150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f67b816e024e00049aec152d12c1a58?s=128&d=identicon&r=PG", "display_name": "npup", "link": "https://stackoverflow.com/users/294150/npup"}, "edited": false, "score": 1, "creation_date": 1610023513, "post_id": 65564257, "comment_id": 116005241, "body": "the question has nothing to do with angular, nor is any &quot;server&quot; involved"}, {"owner": {"reputation": 2462, "user_id": 294150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f67b816e024e00049aec152d12c1a58?s=128&d=identicon&r=PG", "display_name": "npup", "link": "https://stackoverflow.com/users/294150/npup"}, "edited": false, "score": 0, "creation_date": 1611264896, "post_id": 65564257, "comment_id": 116402963, "body": "Kindly check your own answer and realize that just over 5% of the words in your sentence under the code consists of the word &quot;server&quot;.  This answer will get no votes besides downvotes I am afraid."}], "tags": [], "owner": {"reputation": 49, "user_id": 11005608, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rwXwkwFmGPU/AAAAAAAAAAI/AAAAAAAAACo/BIKclg-Bhws/photo.jpg?sz=128", "display_name": "Oluwatobiloba", "link": "https://stackoverflow.com/users/11005608/oluwatobiloba"}, "is_accepted": false, "score": 2, "last_activity_date": 1611079333, "last_edit_date": 1611079333, "creation_date": 1609770132, "answer_id": 65564257, "question_id": 54104187, "link": "https://stackoverflow.com/questions/54104187/typescript-complain-has-no-initializer-and-is-not-definitely-assigned-in-the-co/65564257#65564257", "title": "TypeScript complain &quot;has no initializer and is not definitely assigned in the constructor&quot; about constructors by returning constructed object", "body": "<pre><code>&quot;angularCompilerOptions&quot;: {\n    //   ...\n    &quot;strictPropertyInitialization&quot;: false\n    //   ...   }\n</code></pre>\n<p>According to angular latest version, it supports strict typing, so you have to disbale it.</p>\n<p>Make modifications and restart server</p>\n"}], "owner": {"reputation": 3068, "user_id": 2045384, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8ca30e4fb6dc5eb9ff50af16807e620e?s=128&d=identicon&r=PG", "display_name": "tsh", "link": "https://stackoverflow.com/users/2045384/tsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38383, "favorite_count": 2, "accepted_answer_id": 54106127, "answer_count": 4, "score": 15, "last_activity_date": 1611079333, "creation_date": 1547014448, "question_id": 54104187, "link": "https://stackoverflow.com/questions/54104187/typescript-complain-has-no-initializer-and-is-not-definitely-assigned-in-the-co", "title": "TypeScript complain &quot;has no initializer and is not definitely assigned in the constructor&quot; about constructors by returning constructed object", "body": "<p>TypeScript show following error message to this code samples:</p>\n\n<pre><code>class MyClass {\n  someField: boolean;\n  constructor() {\n    return { someField: true };\n  }\n}\n</code></pre>\n\n<blockquote>\n  <p>Property 'someField' has no initializer and is not definitely assigned in the constructor.\n  <hr />\n  (property) MyClass.someField: boolean</p>\n</blockquote>\n\n<p><a href=\"https://www.typescriptlang.org/play/#src=class%20MyClass%20%7B%0D%0A%20%20someField%3A%20boolean%3B%0D%0A%20%20constructor()%20%7B%0D%0A%20%20%20%20return%20%7B%20someField%3A%20true%20%7D%3B%0D%0A%20%20%7D%0D%0A%7D\" rel=\"noreferrer\">TypeScript Playground</a> (You need to enable <code>strictNullChecks</code> and <code>strictPropertyInitialization</code> to see this error message.)</p>\n\n<p>Given code snippet is simplified from my original script. I would like to return the constructed value instead of assign values to this in constructor. What should I do to make TypeScript works without mentioned error?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "lazy-loading"], "comments": [{"owner": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1547014160, "post_id": 54104119, "comment_id": 95040582, "body": "in your <code>.&#47;settings</code> folder, you should have an <code>index.ts</code> file having: <code>export { SettingsRoutingModule } from &#39;.&#47;settings.module.ts&#39;;</code> (assuming the above module is <code>settings.module.ts</code>, otherwise angular won&#39;t be able to know that it should lazy load it. Also, <code>loadChildren</code> should have: <code>.&#47;settings&#47;settings.module#SettingsRoutingModule</code> instead, since it looks for the <code>index</code> file exporting the module named after <code>#</code>."}, {"owner": {"reputation": 433, "user_id": 10122561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cbe7348985af9dc8c537e176e410da?s=128&d=identicon&r=PG&f=1", "display_name": "danda", "link": "https://stackoverflow.com/users/10122561/danda"}, "reply_to_user": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1547014429, "post_id": 54104119, "comment_id": 95040674, "body": "Are you sure? in the documentation is: id- const routes: Routes = [   { path: &#39;&#39;, redirectTo: &#39;eager&#39;, pathMatch: &#39;full&#39; },   { path: &#39;eager&#39;, component: EagerComponent },   { path: &#39;lazy&#39;, loadChildren: &#39;lazy/lazy.module#LazyModule&#39; } ];"}, {"owner": {"reputation": 433, "user_id": 10122561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cbe7348985af9dc8c537e176e410da?s=128&d=identicon&r=PG&f=1", "display_name": "danda", "link": "https://stackoverflow.com/users/10122561/danda"}, "reply_to_user": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1547014603, "post_id": 54104119, "comment_id": 95040741, "body": "in <a href=\"https://angular-2-training-book.rangle.io/handout/modules/lazy-loading-module.html\" rel=\"nofollow noreferrer\">angular-2-training-book.rangle.io/handout/modules/&hellip;</a> I didn&#39;t see anything about a index.ts file.."}, {"owner": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1547014919, "post_id": 54104119, "comment_id": 95040826, "body": "as far as I can remember, the chunk file is created only as long as an index exports the module (that&#39;s a webpack behavior, if I&#39;m not wrong). I&#39;ve been using this system with lazy loaded modules since they came out and never had issues with that. Anyway, if you want to check whether the module is lazy loaded or not, just add a <code>console.log</code> in the lazy loaded module: if that&#39;s called onload, it&#39;s <b>not</b> lazyloaded, otherwise, if the log appears whenever you load that child specifically, it is."}, {"owner": {"reputation": 433, "user_id": 10122561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cbe7348985af9dc8c537e176e410da?s=128&d=identicon&r=PG&f=1", "display_name": "danda", "link": "https://stackoverflow.com/users/10122561/danda"}, "reply_to_user": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1547015248, "post_id": 54104119, "comment_id": 95040918, "body": "Thanks! the ngOnInit if the SettingsComponent isn&#39;t get called on load. actually when I am in a different state I cannot even find the code in the dev tool."}], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 10122561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cbe7348985af9dc8c537e176e410da?s=128&d=identicon&r=PG&f=1", "display_name": "danda", "link": "https://stackoverflow.com/users/10122561/danda"}, "edited": false, "score": 0, "creation_date": 1547022688, "post_id": 54104979, "comment_id": 95044076, "body": "great, thanks!! one more question- why do I see two js files?"}], "tags": [], "owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "is_accepted": false, "score": 10, "last_activity_date": 1547018350, "creation_date": 1547018350, "answer_id": 54104979, "question_id": 54104119, "link": "https://stackoverflow.com/questions/54104119/angular-lazy-loading-dont-see-it-is-working/54104979#54104979", "title": "Angular lazy loading - don&#39;t see it is working", "body": "<p>Because of this option <code>\"namedChunks\": false</code> in your angular.json, you won't see the named chunks anymore, instead it displays hashed-value as the file name. This is due to recent improvements(not sure from when) in angular/cli.</p>\n"}, {"tags": [], "owner": {"reputation": 1026, "user_id": 2243654, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b50041f844ab75be84007a9d001a573?s=128&d=identicon&r=PG&f=1", "display_name": "Kishori", "link": "https://stackoverflow.com/users/2243654/kishori"}, "is_accepted": false, "score": 2, "last_activity_date": 1592298159, "creation_date": 1592298159, "answer_id": 62404802, "question_id": 54104119, "link": "https://stackoverflow.com/questions/54104119/angular-lazy-loading-dont-see-it-is-working/62404802#62404802", "title": "Angular lazy loading - don&#39;t see it is working", "body": "<p>Yes it is OK, We do not see chunk.js anymore. A lazy loaded module appears with its name in network tab as mentioned by you and it appears only once for the first time. To see it again, clear everything out by clicking the circle with a line through it in the upper left of the Network Tab:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ad26p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ad26p.png\" alt=\"Lazy loaded module\"></a></p>\n"}], "owner": {"reputation": 433, "user_id": 10122561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cbe7348985af9dc8c537e176e410da?s=128&d=identicon&r=PG&f=1", "display_name": "danda", "link": "https://stackoverflow.com/users/10122561/danda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1875, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1592298159, "creation_date": 1547013996, "last_edit_date": 1547014729, "question_id": 54104119, "link": "https://stackoverflow.com/questions/54104119/angular-lazy-loading-dont-see-it-is-working", "title": "Angular lazy loading - don&#39;t see it is working", "body": "<p>I defined a lazy loading module.</p>\n\n<p>this is SettingsRoutingModule module-</p>\n\n<pre><code> const routes: Routes = [\n        {\n            path: '',\n            component: SettingsStandaloneComponent,\n            children: [\n                {\n                    path: '',\n                    redirectTo: 'profile',\n                    pathMatch: 'full'\n                },\n                {\n                    path: 'profile',\n                    component: SettingsProfileComponent\n                },\n                {\n                    path: 'about',\n                    component: SettingsAboutComponent\n                },\n                {\n                    path: 'affiliations',\n                    component: SettingsAffiliationsComponent\n                },\n                {\n                    path: 'communication',\n                    component: SettingsCommunicationComponent\n                },\n                {\n                    path: 'notifications',\n                    component: SettingsNotificationsComponent\n                },\n                {\n                    path: 'proxies',\n                    component: SettingsProxiesComponent\n                },\n                {\n                    path: '**',\n                    redirectTo: 'profile',\n                    pathMatch: 'full'\n                }\n            ]\n        }\n    ];\n\n    @NgModule({\n        imports: [RouterModule.forChild(routes)],\n        exports: [RouterModule]\n    })\n    export class SettingsRoutingModule { }\n</code></pre>\n\n<p>in the AppRoutingModule module-</p>\n\n<pre><code>{ path: 'settings',\n    loadChildren: './settings/settings.module#SettingsModule',\n    canActivate: [AuthGuard],\n},\n</code></pre>\n\n<p>in the prod production when a go to the network I don't see the \"chunk.js\" that everybody say that should appear\". only two files that looks like- 0.34016a93d44e785b623a.js</p>\n\n<p>In my localhost I see only \"settings-settings-module.js\"</p>\n\n<p>Is it OK or does it mean that my module isn't lazy?</p>\n"}, {"tags": ["angular", "typescript", "angular-ngselect"], "comments": [{"owner": {"reputation": 1036, "user_id": 2036828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AC1cA.jpg?s=128&g=1", "display_name": "Jitendra G2", "link": "https://stackoverflow.com/users/2036828/jitendra-g2"}, "edited": false, "score": 0, "creation_date": 1547013797, "post_id": 54103973, "comment_id": 95040484, "body": "Hi, it&#39;s seems working fine as you described as output result."}, {"owner": {"reputation": 1917, "user_id": 7328370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M9PaT.jpg?s=128&g=1", "display_name": "Nikhil Savaliya", "link": "https://stackoverflow.com/users/7328370/nikhil-savaliya"}, "reply_to_user": {"reputation": 1036, "user_id": 2036828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AC1cA.jpg?s=128&g=1", "display_name": "Jitendra G2", "link": "https://stackoverflow.com/users/2036828/jitendra-g2"}, "edited": false, "score": 0, "creation_date": 1547014615, "post_id": 54103973, "comment_id": 95040749, "body": "yes, i want to show dropdown only when users type something, right now its showing on focus"}, {"owner": {"reputation": 1036, "user_id": 2036828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AC1cA.jpg?s=128&g=1", "display_name": "Jitendra G2", "link": "https://stackoverflow.com/users/2036828/jitendra-g2"}, "edited": false, "score": 0, "creation_date": 1547015301, "post_id": 54103973, "comment_id": 95040938, "body": "You meant to say, when you click on multi-select drop-down, it should not show the item list? Item list only displayed when you start a typing something. Am I correct?"}, {"owner": {"reputation": 1917, "user_id": 7328370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M9PaT.jpg?s=128&g=1", "display_name": "Nikhil Savaliya", "link": "https://stackoverflow.com/users/7328370/nikhil-savaliya"}, "reply_to_user": {"reputation": 1036, "user_id": 2036828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AC1cA.jpg?s=128&g=1", "display_name": "Jitendra G2", "link": "https://stackoverflow.com/users/2036828/jitendra-g2"}, "edited": false, "score": 0, "creation_date": 1547016079, "post_id": 54103973, "comment_id": 95041176, "body": "yes,you got it."}, {"owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "edited": false, "score": 0, "creation_date": 1547018474, "post_id": 54103973, "comment_id": 95042170, "body": "something like autocomplete?"}, {"owner": {"reputation": 734, "user_id": 8636516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4db0993772924fd3c4ee0a74b88d0f?s=128&d=identicon&r=PG&f=1", "display_name": "harkesh kumar", "link": "https://stackoverflow.com/users/8636516/harkesh-kumar"}, "edited": false, "score": 0, "creation_date": 1547019178, "post_id": 54103973, "comment_id": 95042499, "body": "its better if you using multi select you should have checkbox to select all  and deselectAll"}], "answers": [{"tags": [], "owner": {"reputation": 1036, "user_id": 2036828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AC1cA.jpg?s=128&g=1", "display_name": "Jitendra G2", "link": "https://stackoverflow.com/users/2036828/jitendra-g2"}, "is_accepted": true, "score": 1, "last_activity_date": 1547019797, "last_edit_date": 1547019797, "creation_date": 1547018523, "answer_id": 54105012, "question_id": 54103973, "link": "https://stackoverflow.com/questions/54103973/ng-select-ng-select-show-dropdown-on-typing/54105012#54105012", "title": "@ng-select/ng-select show dropdown on typing", "body": "<p>I hope below logic can helpful,</p>\n\n<p><strong>.HTML</strong></p>\n\n<pre><code>&lt;ng-select #elem [items]=\"cities2\"\n               bindLabel=\"name\"\n               bindValue=\"id\"\n               [multiple]=\"true\"\n               placeholder=\"Select cities\"\n               [(ngModel)]=\"selectedCityIds\"\n               (open)=\"onOpen(elem)\"&gt;\n</code></pre>\n\n<p><strong>.TS</strong></p>\n\n<pre><code>onOpen(elem){\n if(elem.filterInput.nativeElement.value == \"\"){\n   elem.close();\n }\n}\n</code></pre>\n\n<p>If you want to hide drop-down toggle ( V ), you need to add style in parent component/file.</p>\n\n<p><strong>Index.html</strong></p>\n\n<pre><code>&lt;style&gt;\n    .ng-select .ng-arrow-wrapper {\n        display: none !important;\n    }\n&lt;/style&gt;\n</code></pre>\n"}], "owner": {"reputation": 1917, "user_id": 7328370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M9PaT.jpg?s=128&g=1", "display_name": "Nikhil Savaliya", "link": "https://stackoverflow.com/users/7328370/nikhil-savaliya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 0, "accepted_answer_id": 54105012, "answer_count": 1, "score": 0, "last_activity_date": 1547019797, "creation_date": 1547013034, "question_id": 54103973, "link": "https://stackoverflow.com/questions/54103973/ng-select-ng-select-show-dropdown-on-typing", "title": "@ng-select/ng-select show dropdown on typing", "body": "<p>I am using,\n<a href=\"https://stackblitz.com/edit/ng-select?file=app%2Fapp.component.ts\" rel=\"nofollow noreferrer\">ng-select</a>\nI am having one multi-select dropdown\neverything working proper but i want some change, i want to show dropdown when user start types something and show only filtered data on user's typed content in text box.</p>\n"}, {"tags": ["angular", "typescript", "get", "put"], "comments": [{"owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "edited": false, "score": 0, "creation_date": 1547013123, "post_id": 54103896, "comment_id": 95040314, "body": "You have two functions with same name <i>deleteHotel</i> but different arguments? Which is the correct one?"}, {"owner": {"reputation": 17, "user_id": 8388402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_IoTw5ZfR-k/AAAAAAAAAAI/AAAAAAAAAEM/SDgNZhwyAiY/photo.jpg?sz=128", "display_name": "Noor Shaker", "link": "https://stackoverflow.com/users/8388402/noor-shaker"}, "reply_to_user": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "edited": false, "score": 0, "creation_date": 1547013522, "post_id": 54103896, "comment_id": 95040404, "body": "without argument"}, {"owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "edited": false, "score": 0, "creation_date": 1547013887, "post_id": 54103896, "comment_id": 95040512, "body": "Do you have global variable <i>hotel</i> in your TS? I can see you are using <i>this.hotel</i> in your code. And what does deleteHotel(hotel.ID) do?"}, {"owner": {"reputation": 17, "user_id": 8388402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_IoTw5ZfR-k/AAAAAAAAAAI/AAAAAAAAAEM/SDgNZhwyAiY/photo.jpg?sz=128", "display_name": "Noor Shaker", "link": "https://stackoverflow.com/users/8388402/noor-shaker"}, "reply_to_user": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "edited": false, "score": 0, "creation_date": 1547015615, "post_id": 54103896, "comment_id": 95041031, "body": "@Arcteezy yes there are"}], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "reply_to_user": {"reputation": 17, "user_id": 8388402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_IoTw5ZfR-k/AAAAAAAAAAI/AAAAAAAAAEM/SDgNZhwyAiY/photo.jpg?sz=128", "display_name": "Noor Shaker", "link": "https://stackoverflow.com/users/8388402/noor-shaker"}, "edited": false, "score": 0, "creation_date": 1547017641, "post_id": 54104261, "comment_id": 95041812, "body": "@Noor Shaker does <code>hotel</code> object contains <code>hotelName</code>?"}, {"owner": {"reputation": 17, "user_id": 8388402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_IoTw5ZfR-k/AAAAAAAAAAI/AAAAAAAAAEM/SDgNZhwyAiY/photo.jpg?sz=128", "display_name": "Noor Shaker", "link": "https://stackoverflow.com/users/8388402/noor-shaker"}, "reply_to_user": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "edited": false, "score": 0, "creation_date": 1547018147, "post_id": 54104261, "comment_id": 95042026, "body": "@KiraAG yes it contain it"}, {"owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "edited": false, "score": 0, "creation_date": 1547018408, "post_id": 54104261, "comment_id": 95042143, "body": "can you console.log hotel  in delete method and show us the result?"}, {"owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "edited": false, "score": 0, "creation_date": 1547019762, "post_id": 54104261, "comment_id": 95042723, "body": "See there lies the answer. You don&#39;t have any properties inside Hotel{}."}, {"owner": {"reputation": 198, "user_id": 8237266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093f592669e3de079d2322daf853dfc2?s=128&d=identicon&r=PG&f=1", "display_name": "vikas biradar", "link": "https://stackoverflow.com/users/8237266/vikas-biradar"}, "edited": false, "score": 0, "creation_date": 1547027378, "post_id": 54104261, "comment_id": 95046665, "body": "try this   <code>deleteHotel(id: number) {         this.hs.getHotel(id).subscribe(         hotel =&gt; this.hotel = hotel; if (hotel.ID === 0) {     &#47;&#47; Don&#39;t delete, it was never saved.     this.onSaveComplete();      } else {     if (confirm(</code>Really delete the Hotel: ${hotel.hotelName}?<code>)) {     this.hs.deleteHotel(hotel.ID)     .subscribe(       () =&gt; this.onSaveComplete()      );     }   )} </code>"}], "tags": [], "owner": {"reputation": 198, "user_id": 8237266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093f592669e3de079d2322daf853dfc2?s=128&d=identicon&r=PG&f=1", "display_name": "vikas biradar", "link": "https://stackoverflow.com/users/8237266/vikas-biradar"}, "is_accepted": false, "score": 0, "last_activity_date": 1547014807, "creation_date": 1547014807, "answer_id": 54104261, "question_id": 54103896, "link": "https://stackoverflow.com/questions/54103896/how-to-delete-and-update-specific-item-in-angular/54104261#54104261", "title": "How to delete and update specific item in angular", "body": "<p>from the below code what i understood is you are trying to delete the hotel but not passing it to the delete function as it has list of hotels and you are trying to delete one hotel which you did not paas to the function because of which it is showing undefined</p>\n\n<pre><code>&lt;ul&gt;&lt;li *ngFor=\"let hotel of hotels\"&gt;\n\n    &lt;span&gt;\n        &lt;a class=\"btn\" (click)=\"deleteHotel()\"&gt;\n        Hotel ID :{{hotel.ID}} Hotel Name : {{hotel.hotelName}} \n   &lt;/a&gt;\n      &lt;/span&gt;\n\n&lt;/li&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>deleteHotel(): void {\n }</p>\n\n<p><strong>instead of this use below code</strong></p>\n\n<pre><code>&lt;ul&gt;&lt;li *ngFor=\"let hotel of hotels\"&gt;\n\n        &lt;span&gt;\n            &lt;a class=\"btn\" (click)=\"deleteHotel(hotel)\"&gt;\n            Hotel ID :{{hotel.ID}} Hotel Name : {{hotel.hotelName}} \n       &lt;/a&gt;\n          &lt;/span&gt;\n\n    &lt;/li&gt;&lt;/ul&gt;\n deleteHotel(hotel): void {\n    if (hotel.ID === 0) {\n    // Don't delete, it was never saved.\n    this.onSaveComplete();\n     } else {\n    if (confirm(`Really delete the Hotel: ${hotel.hotelName}?`)) {\n    this.hs.deleteHotel(hotel.ID)\n    .subscribe(\n      () =&gt; this.onSaveComplete()\n\n    );\n    }\n   }\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 8388402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_IoTw5ZfR-k/AAAAAAAAAAI/AAAAAAAAAEM/SDgNZhwyAiY/photo.jpg?sz=128", "display_name": "Noor Shaker", "link": "https://stackoverflow.com/users/8388402/noor-shaker"}, "is_accepted": true, "score": 0, "last_activity_date": 1547023760, "creation_date": 1547023760, "answer_id": 54106198, "question_id": 54103896, "link": "https://stackoverflow.com/questions/54103896/how-to-delete-and-update-specific-item-in-angular/54106198#54106198", "title": "How to delete and update specific item in angular", "body": "<p>it's work when I replace deleteHotel() by getHotel(hotel.ID) then add a delete hotel . </p>\n\n<p>this is the getHotel method: </p>\n\n<pre><code>    getHotel(id: number) {\n this.hs.getHotel(id).subscribe(\nhotel =&gt; this.hotel = hotel,\n  );\n  }\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8388402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_IoTw5ZfR-k/AAAAAAAAAAI/AAAAAAAAAEM/SDgNZhwyAiY/photo.jpg?sz=128", "display_name": "Noor Shaker", "link": "https://stackoverflow.com/users/8388402/noor-shaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 54106198, "answer_count": 2, "score": 0, "last_activity_date": 1547023760, "creation_date": 1547012688, "question_id": 54103896, "link": "https://stackoverflow.com/questions/54103896/how-to-delete-and-update-specific-item-in-angular", "title": "How to delete and update specific item in angular", "body": "<p>I have connect my reactive form app with REST API, and when I try to delete hotel it show me  Really delete the Hotel: (undefined)? \nit does not see the id of clicked hotel, what is the problem of my code? \nhow I can fix it </p>\n\n<p>This is the delete function:</p>\n\n<pre><code>    deleteHotel(): void {\n    if (this.hotel.ID === 0) {\n    // Don't delete, it was never saved.\n    this.onSaveComplete();\n     } else {\n    if (confirm(`Really delete the Hotel: ${this.hotel.hotelName}?`)) {\n    this.hs.deleteHotel(this.hotel.ID)\n    .subscribe(\n      () =&gt; this.onSaveComplete()\n\n    );\n    }\n   }\n   }\n</code></pre>\n\n<p>and here is the .html form:</p>\n\n<pre><code>  &lt;form  (ngSubmit)=\"onSubmit(rHotelForm)\" [formGroup] = \"rHotelForm\"&gt;\n  &lt;input type=\"hidden\" formConrolName=\"id\"/&gt;\n&lt;div class=\"form-group\"&gt;\n    &lt;div class=\"form-group col-md-6\"&gt;\n      &lt;label &gt;Hotel Name&lt;/label&gt;\n      &lt;input id=\"hotelNameId\" class=\"form-control\" type=\"text\" \n     formControlName=\"hotelName\"/&gt;\n\n    &lt;/div&gt; \n\n\n\n    &lt;div class=\"form-group\"&gt;\n        &lt;div class=\"form-group col-md-6\"&gt;\n          &lt;label &gt;Phone&lt;/label&gt;\n          &lt;input class=\"form-control\"formControlName=\"phone\"&gt;\n        &lt;/div&gt; &lt;/div&gt;\n\n\n                &lt;div class=\"form-group\"&gt;\n                    &lt;div class=\"form-group col-md-6\"&gt;\n                      &lt;label &gt;Number of rooms&lt;/label&gt;\n                      &lt;input class=\"form-control\" formControlName=\"numberOfRooms\" &gt;\n                    &lt;/div&gt; &lt;/div&gt;\n\n                      &lt;div class=\" col-md-6\"&gt;\n                        &lt;button  type=\"submit\" class=\"btn btn-lg btn-block btn-info\" [disabled] =\"!rHotelForm.valid\"&gt;Submit&lt;/button&gt;\n                      &lt;/div&gt; \n                      &lt;div class=\" col-md-6\"&gt;\n                          &lt;button class=\"btn btn-lg btn-block btn-secondary\" (click) =\"resetForm(hotelForm)\"&gt;Reset&lt;/button&gt;\n                        &lt;/div&gt; \n\n\n\n\n\n\n&lt;/form&gt; \n&lt;br&gt; Value : {{rHotelForm.value | json}}\n  &lt;form [formGroup] = \"hotelForm\"&gt;\n\n   &lt;ul&gt;&lt;li *ngFor=\"let hotel of hotels\"&gt;\n\n    &lt;span&gt;\n        &lt;a class=\"btn\" (click)=\"deleteHotel()\"&gt;\n        Hotel ID :{{hotel.ID}} Hotel Name : {{hotel.hotelName}} \n   &lt;/a&gt;\n      &lt;/span&gt;\n\n&lt;/li&gt;&lt;/ul&gt;\n&lt;button class=\"btn btn-lg btn-block btn-secondary\" (click) \n =\"deleteHotel(hotel.ID)\"&gt;Delet Hotel&lt;/button&gt;\n  &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["json", "angular", "typescript", "angular6"], "comments": [{"owner": {"reputation": 474, "user_id": 2002557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bf7d4dae2c13027ffa44dcc872ca4bc?s=128&d=identicon&r=PG", "display_name": "Jenya G", "link": "https://stackoverflow.com/users/2002557/jenya-g"}, "edited": false, "score": 2, "creation_date": 1547013519, "post_id": 54103812, "comment_id": 95040401, "body": "Or something like this <a href=\"https://stackblitz.com/edit/angular-movie-read-load-json-sample-eg-p5vhg6?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a>"}, {"owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "reply_to_user": {"reputation": 474, "user_id": 2002557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bf7d4dae2c13027ffa44dcc872ca4bc?s=128&d=identicon&r=PG", "display_name": "Jenya G", "link": "https://stackoverflow.com/users/2002557/jenya-g"}, "edited": false, "score": 0, "creation_date": 1547013733, "post_id": 54103812, "comment_id": 95040462, "body": "@JenyaG You can do more easily :) <code>return this.workers.find(w=&gt;w.id==workerId).name</code>"}, {"owner": {"reputation": 729, "user_id": 10176081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e3d78e0d50fd3c8d0a39ed3a482c06?s=128&d=identicon&r=PG&f=1", "display_name": "Empty_Soul", "link": "https://stackoverflow.com/users/10176081/empty-soul"}, "edited": false, "score": 0, "creation_date": 1547028700, "post_id": 54103812, "comment_id": 95047449, "body": "I am getting this error inn the console: <b>ERROR Error: Cannot read property &#39;length&#39; of undefined</b>"}], "answers": [{"comments": [{"owner": {"reputation": 4859, "user_id": 8918721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A73tJ.jpg?s=128&g=1", "display_name": "Stephan T.", "link": "https://stackoverflow.com/users/8918721/stephan-t"}, "edited": false, "score": 0, "creation_date": 1547013904, "post_id": 54103894, "comment_id": 95040517, "body": "really nice solution!"}, {"owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "edited": false, "score": 0, "creation_date": 1547014168, "post_id": 54103894, "comment_id": 95040586, "body": "Happy to help :)"}, {"owner": {"reputation": 729, "user_id": 10176081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e3d78e0d50fd3c8d0a39ed3a482c06?s=128&d=identicon&r=PG&f=1", "display_name": "Empty_Soul", "link": "https://stackoverflow.com/users/10176081/empty-soul"}, "edited": false, "score": 0, "creation_date": 1547028746, "post_id": 54103894, "comment_id": 95047472, "body": "I am getting this error inn the console: <b>ERROR Error: Cannot read property &#39;length&#39; of undefined</b> Stackblitz link <b><a href=\"https://stackblitz.com/edit/angular-movie-read-load-json-sample-eg-p5vhg6?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a></b>"}, {"owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "reply_to_user": {"reputation": 729, "user_id": 10176081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e3d78e0d50fd3c8d0a39ed3a482c06?s=128&d=identicon&r=PG&f=1", "display_name": "Empty_Soul", "link": "https://stackoverflow.com/users/10176081/empty-soul"}, "edited": false, "score": 0, "creation_date": 1547029480, "post_id": 54103894, "comment_id": 95047892, "body": "@Empty_Soul You might have forgotten to initialize the variables <i>workers</i> and <i>contacts</i>. Check it."}, {"owner": {"reputation": 729, "user_id": 10176081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e3d78e0d50fd3c8d0a39ed3a482c06?s=128&d=identicon&r=PG&f=1", "display_name": "Empty_Soul", "link": "https://stackoverflow.com/users/10176081/empty-soul"}, "edited": false, "score": 0, "creation_date": 1547029817, "post_id": 54103894, "comment_id": 95048090, "body": "I have  initialized avery variable, you can see the error in the <b>stackblitz</b> lin itself.Which i mentioned in the above comment."}, {"owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "edited": false, "score": 0, "creation_date": 1547030546, "post_id": 54103894, "comment_id": 95048563, "body": "Nope. Confused between initializing and declaring. Replace <code>contacts;</code> with <code>contacts = [];</code> and <code>workers;</code> with <code>workers = [];</code>. P.S. I found another error in that demo, trying to assign an object into array variable. Take care of it in original code."}, {"owner": {"reputation": 729, "user_id": 10176081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e3d78e0d50fd3c8d0a39ed3a482c06?s=128&d=identicon&r=PG&f=1", "display_name": "Empty_Soul", "link": "https://stackoverflow.com/users/10176081/empty-soul"}, "edited": false, "score": 0, "creation_date": 1547034116, "post_id": 54103894, "comment_id": 95050717, "body": "I got it thank you..:)"}], "tags": [], "owner": {"reputation": 3395, "user_id": 10409167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blZR5.jpg?s=128&g=1", "display_name": "Arcteezy", "link": "https://stackoverflow.com/users/10409167/arcteezy"}, "is_accepted": true, "score": 4, "last_activity_date": 1547012674, "creation_date": 1547012674, "answer_id": 54103894, "question_id": 54103812, "link": "https://stackoverflow.com/questions/54103812/to-display-the-values-of-the-other-json-using-the-id/54103894#54103894", "title": "To display the values of the other JSON using the id", "body": "<p>Here you go</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;td&gt;Assigned Workers&lt;/td&gt;\n    &lt;td&gt;\n        &lt;div *ngFor=\"let cWorker of contact.workers\"&gt;\n            &lt;div *ngFor=\"let worker of workers\" [hidden]=\"cWorker!=worker.id\"&gt;\n              {{worker.name}}\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8699, "user_id": 3519009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHxtF.jpg?s=128&g=1", "display_name": "Narendra Jadhav", "link": "https://stackoverflow.com/users/3519009/narendra-jadhav"}, "is_accepted": false, "score": 2, "last_activity_date": 1547014307, "creation_date": 1547014307, "answer_id": 54104162, "question_id": 54103812, "link": "https://stackoverflow.com/questions/54103812/to-display-the-values-of-the-other-json-using-the-id/54104162#54104162", "title": "To display the values of the other JSON using the id", "body": "<p>You could also use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\" rel=\"nofollow noreferrer\">Array.prototype.find()</a> to find your worker <code>name</code> based on the <code>id</code>. You need to create function inside of your <code>.ts</code> file like this</p>\n\n<pre><code> findWorkerName(wid) {\n    let obj = this.workers.find(({ id }) =&gt; id = wid)\n\n    return obj ? obj.name : '';\n }\n</code></pre>\n\n<p>And your component file is like this</p>\n\n<pre><code>&lt;h4&gt;Contacts&lt;/h4&gt;\n&lt;div class=\"cust-detail\" *ngFor=\"let contact of contacts\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Name&lt;/td&gt;\n        &lt;td&gt;{{contact.name }}&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Gender&lt;/td&gt;\n        &lt;td&gt;{{contact.gender}} &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Assigned Workers&lt;/td&gt;\n        &lt;td&gt;\n            &lt;span *ngFor=\"let id of contact.workers let i = index\"&gt;\n            {{findWorkerName(id)}} {{i&lt;contact.workers.length-1?',':''}}\n          &lt;/span&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n             &lt;hr&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>You could check with this working <a href=\"https://stackblitz.com/edit/angular-movie-read-load-json-sample-eg-edrhzn\" rel=\"nofollow noreferrer\">stackblitz</a> demo. I have made changes in your code.</p>\n"}], "owner": {"reputation": 729, "user_id": 10176081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e3d78e0d50fd3c8d0a39ed3a482c06?s=128&d=identicon&r=PG&f=1", "display_name": "Empty_Soul", "link": "https://stackoverflow.com/users/10176081/empty-soul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "closed_date": 1553229297, "accepted_answer_id": 54103894, "answer_count": 2, "score": 3, "last_activity_date": 1547014307, "creation_date": 1547012162, "question_id": 54103812, "link": "https://stackoverflow.com/questions/54103812/to-display-the-values-of-the-other-json-using-the-id", "closed_reason": "Not suitable for this site", "title": "To display the values of the other JSON using the id", "body": "<p><strong>SCENARIO:</strong></p>\n\n<p>I have 2 <code>JSON</code> files called <code>contacts</code> &amp; <code>workers</code>:</p>\n\n<p><strong>contacts</strong></p>\n\n<pre><code>  [\n     {\n      \"name\": \"Jhon Doe\",\n      \"gender\": \"Male\",\n      \"workers\": [\n        \"e39f9302-77b3-4c52-a858-adb67651ce86\",\n        \"38688c41-8fda-41d7-b0f5-c37dce3f5374\"\n       ]\n     },\n     {\n      \"name\": \"Peter Parker\",\n      \"gender\": \"Male\",\n      \"workers\": [\n         \"e39f9302-77b3-4c52-a858-adb67651ce86\",\n         \"40665c50-ff74-4e81-b968-e127bdf1fe28\"\n        ]\n     },\n     {\n      \"name\": \"Mark Wood\",\n      \"gender\": \"Male\",\n      \"workers\": [\n          \"ed780d15-428b-4bcd-8a91-bacae8b0b72e\"\n         ]\n     },\n     {\n      \"name\": \"Mary Jane\",\n      \"gender\": \"Female\",\n      \"workers\": [\n         \"40665c50-ff74-4e81-b968-e127bdf1fe28\",\n         \"ed780d15-428b-4bcd-8a91-bacae8b0b72e\"\n       ]\n     }\n]\n</code></pre>\n\n<p><strong>workers</strong></p>\n\n<pre><code>  [\n   {\n     \"id\": \"e39f9302-77b3-4c52-a858-adb67651ce86\",\n     \"name\": \"Alfy Odhams\"\n   },\n   {\n     \"id\": \"38688c41-8fda-41d7-b0f5-c37dce3f5374\",\n     \"name\": \"Allsun Suttle\"\n   },\n   {\n     \"id\": \"ed780d15-428b-4bcd-8a91-bacae8b0b72e\",\n     \"name\": \"Alvinia Ettritch\"\n   },\n   {\n     \"id\": \"40665c50-ff74-4e81-b968-e127bdf1fe28\",\n     \"name\": \"Ambrosi Lindenstrauss\"\n   }\n ]\n</code></pre>\n\n<p>I am displaying <code>contacts</code> like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VVoCe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VVoCe.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EXPECTED RESULT :</strong> </p>\n\n<p>I want to display assigned workers <code>name</code> for particular <code>contact</code> based on their <code>ID</code> like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JQIX9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JQIX9.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Stackblitz <strong><a href=\"https://stackblitz.com/edit/angular-movie-read-load-json-sample-eg-ezawxb?file=src/app/app.component.html\" rel=\"nofollow noreferrer\">DEMO</a></strong></p>\n"}, {"tags": ["reactjs", "typescript", "react-native", "i18next"], "comments": [{"owner": {"reputation": 2194, "user_id": 1195379, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e351f72af8e39996ca9371eb5f2c09d7?s=128&d=identicon&r=PG", "display_name": "vahissan", "link": "https://stackoverflow.com/users/1195379/vahissan"}, "edited": false, "score": 0, "creation_date": 1547008047, "post_id": 54103118, "comment_id": 95039027, "body": "Is <code>react-i18next</code> not an option?"}, {"owner": {"reputation": 5309, "user_id": 291695, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5dd46dc3499ad74d00f1225788883266?s=128&d=identicon&r=PG", "display_name": "Shaddix", "link": "https://stackoverflow.com/users/291695/shaddix"}, "reply_to_user": {"reputation": 2194, "user_id": 1195379, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e351f72af8e39996ca9371eb5f2c09d7?s=128&d=identicon&r=PG", "display_name": "vahissan", "link": "https://stackoverflow.com/users/1195379/vahissan"}, "edited": false, "score": 0, "creation_date": 1547008250, "post_id": 54103118, "comment_id": 95039085, "body": "I just don&#39;t need it. I&#39;m actually ok with using <code>i18n.t(&#39;SomeString&#39;)</code> everywhere, I&#39;m just curious why it doesn&#39;t work"}, {"owner": {"reputation": 5309, "user_id": 291695, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5dd46dc3499ad74d00f1225788883266?s=128&d=identicon&r=PG", "display_name": "Shaddix", "link": "https://stackoverflow.com/users/291695/shaddix"}, "reply_to_user": {"reputation": 2194, "user_id": 1195379, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e351f72af8e39996ca9371eb5f2c09d7?s=128&d=identicon&r=PG", "display_name": "vahissan", "link": "https://stackoverflow.com/users/1195379/vahissan"}, "edited": false, "score": 0, "creation_date": 1547009309, "post_id": 54103118, "comment_id": 95039318, "body": "I mean, I&#39;m curious why <code>t(&#39;WelcomeMessage&#39;)</code> doesn&#39;t work in RNative"}, {"owner": {"reputation": 98, "user_id": 3938382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4775dd53b1b7b5f5514da9154057efd?s=128&d=identicon&r=PG", "display_name": "bruteforcecat", "link": "https://stackoverflow.com/users/3938382/bruteforcecat"}, "edited": false, "score": 1, "creation_date": 1547010593, "post_id": 54103118, "comment_id": 95039618, "body": "It should be related to metro bundler."}], "answers": [{"comments": [{"owner": {"reputation": 5309, "user_id": 291695, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5dd46dc3499ad74d00f1225788883266?s=128&d=identicon&r=PG", "display_name": "Shaddix", "link": "https://stackoverflow.com/users/291695/shaddix"}, "edited": false, "score": 0, "creation_date": 1547021643, "post_id": 54103458, "comment_id": 95043597, "body": "sorry, I&#39;m not getting the benefits of your answer. <code>i18n.t(&#39;sample&#39;)</code> already works for me. It&#39;s <code>t(&#39;sample&#39;)</code> (without <code>i18n.</code>) that doesn&#39;t work in React Native. In your example you are using <code>i18n.t(&#39;sample&#39;)</code> at the end, which already works for me"}], "tags": [], "owner": {"reputation": 1658, "user_id": 5974845, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/593984821de8b53986cf33b9924c0ad4?s=128&d=identicon&r=PG&f=1", "display_name": "Amila Dulanjana", "link": "https://stackoverflow.com/users/5974845/amila-dulanjana"}, "is_accepted": false, "score": 0, "last_activity_date": 1547009670, "creation_date": 1547009670, "answer_id": 54103458, "question_id": 54103118, "link": "https://stackoverflow.com/questions/54103118/i18next-in-react-native-import-t-doesnt-work-works-in-react-web/54103458#54103458", "title": "i18next in React Native: import {t} doesn&#39;t work (works in React Web)", "body": "<p>You can achieve this functionality using <code>i18n-js</code>\n<a href=\"https://github.com/fnando/i18n-js/releases\" rel=\"nofollow noreferrer\">https://github.com/fnando/i18n-js/releases</a></p>\n\n<p>create a <code>.js</code> file.</p>\n\n<pre><code>import i18n from 'i18n-js';\n\nimport en from '../translations/en.json';\nimport ar from '../translations/ar.json';\n\ni18n.fallbacks = true;\ni18n.translations = { en, ar };\n\nexport default i18n;\n</code></pre>\n\n<p>In component class call this i18n.js file </p>\n\n<pre><code>import i18n from './i18n'\nclass Test extends Component {\n\n   render(){\n     return(\n        &lt;Text&gt;i18n.t('sample')&lt;/Text&gt;\n     )\n   }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 5309, "user_id": 291695, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5dd46dc3499ad74d00f1225788883266?s=128&d=identicon&r=PG", "display_name": "Shaddix", "link": "https://stackoverflow.com/users/291695/shaddix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1054, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547009670, "creation_date": 1547006925, "question_id": 54103118, "link": "https://stackoverflow.com/questions/54103118/i18next-in-react-native-import-t-doesnt-work-works-in-react-web", "title": "i18next in React Native: import {t} doesn&#39;t work (works in React Web)", "body": "<p>The following code works in normal React project (I'm using typescript, if it matters):</p>\n\n<pre><code>import {t} from \"i18next\";\n\nconst translation = t('WelcomeMessage');\n</code></pre>\n\n<p>the very same code doesn't work in React Native project giving an error:</p>\n\n<pre><code>import i18n, {t} from \"i18next\";\n\nconst translation1 = i18n.t('WelcomeMessage');   //works ok\nconst translation = t('WelcomeMessage'); //ERROR: (0, _i18next.t) is not a function\n</code></pre>\n\n<p>why <code>t('WelcomeMessage')</code> doesn't work in RNative? Does it have something to do with how i18next is exported in typedefinitions (<code>export = i18next;</code>)?</p>\n"}, {"tags": ["typescript", "firebase", "cors", "google-cloud-functions", "ionic4"], "comments": [{"owner": {"reputation": 345, "user_id": 9983127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8765c919867c192ddacbe101456986f?s=128&d=identicon&r=PG&f=1", "display_name": "caro", "link": "https://stackoverflow.com/users/9983127/caro"}, "edited": false, "score": 0, "creation_date": 1547000128, "post_id": 54102360, "comment_id": 95037610, "body": "What exactly is the error that you are receiving?"}, {"owner": {"reputation": 345, "user_id": 9983127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8765c919867c192ddacbe101456986f?s=128&d=identicon&r=PG&f=1", "display_name": "caro", "link": "https://stackoverflow.com/users/9983127/caro"}, "edited": false, "score": 2, "creation_date": 1547000168, "post_id": 54102360, "comment_id": 95037623, "body": "Also, <a href=\"https://stackoverflow.com/questions/42755131/enabling-cors-in-cloud-functions-for-firebase?rq=1\" title=\"enabling cors in cloud functions for firebase\">stackoverflow.com/questions/42755131/&hellip;</a> may be helpful - it looks like their problem was similar to yours."}, {"owner": {"reputation": 2206, "user_id": 7967164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fZY-EicPiTM/AAAAAAAAAAI/AAAAAAABvGI/Bb7G8qimGZY/photo.jpg?sz=128", "display_name": "Dennis Alund", "link": "https://stackoverflow.com/users/7967164/dennis-alund"}, "edited": false, "score": 0, "creation_date": 1547001906, "post_id": 54102360, "comment_id": 95037917, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42755131/enabling-cors-in-cloud-functions-for-firebase\">Enabling CORS in Cloud Functions for Firebase</a>"}, {"owner": {"reputation": 121, "user_id": 10247197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UTzEl2znUm8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oDhUQOJKSyzcwECUezzeDnCd9N_g/mo/photo.jpg?sz=128", "display_name": "dhammani", "link": "https://stackoverflow.com/users/10247197/dhammani"}, "edited": false, "score": 0, "creation_date": 1547003773, "post_id": 54102360, "comment_id": 95038234, "body": "I already checked it, the solution I used is on this post but it doesn&#39;t work. Oliver Dixon commented the response for Typescript, he said that &quot;Solution will make you lose logging on cloud functions (very bad)&quot;"}, {"owner": {"reputation": 771, "user_id": 4629157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11a83cd82cb903d18fd796572d518506?s=128&d=identicon&r=PG&f=1", "display_name": "Zhang Bruce", "link": "https://stackoverflow.com/users/4629157/zhang-bruce"}, "edited": false, "score": 0, "creation_date": 1547005311, "post_id": 54102360, "comment_id": 95038521, "body": "did you call initializeApp properly or did you remove the rest of your code for demoing, didn&#39;t you have to reference serviceAccount.json and all that stuff."}, {"owner": {"reputation": 121, "user_id": 10247197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UTzEl2znUm8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oDhUQOJKSyzcwECUezzeDnCd9N_g/mo/photo.jpg?sz=128", "display_name": "dhammani", "link": "https://stackoverflow.com/users/10247197/dhammani"}, "edited": false, "score": 0, "creation_date": 1547009806, "post_id": 54102360, "comment_id": 95039425, "body": "This is all the code"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 10247197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UTzEl2znUm8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oDhUQOJKSyzcwECUezzeDnCd9N_g/mo/photo.jpg?sz=128", "display_name": "dhammani", "link": "https://stackoverflow.com/users/10247197/dhammani"}, "edited": false, "score": 0, "creation_date": 1547042084, "post_id": 54106882, "comment_id": 95055534, "body": "It works now, thank you very much! You saved my day!"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "reply_to_user": {"reputation": 121, "user_id": 10247197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UTzEl2znUm8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oDhUQOJKSyzcwECUezzeDnCd9N_g/mo/photo.jpg?sz=128", "display_name": "dhammani", "link": "https://stackoverflow.com/users/10247197/dhammani"}, "edited": false, "score": 0, "creation_date": 1547047170, "post_id": 54106882, "comment_id": 95058921, "body": "Glad that I could help! You may upvote my answer if you think it was helpful, see <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>. Thanks!"}], "tags": [], "owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "is_accepted": true, "score": 1, "last_activity_date": 1547029178, "last_edit_date": 1547029178, "creation_date": 1547026241, "answer_id": 54106882, "question_id": 54102360, "link": "https://stackoverflow.com/questions/54102360/cant-deploy-firebase-cloud-function/54106882#54106882", "title": "Can&#39;t deploy firebase cloud function", "body": "<p>The following should work. You have to include the code of your asynchronous Firebase call <strong>inside</strong> the function.</p>\n\n<pre><code>import * as functions from 'firebase-functions'\nimport * as admin from 'firebase-admin'\nimport * as cors from 'cors'\n\nadmin.initializeApp()\n\nconst corsHandler = cors({origin: true})\n\nexport const getUser = functions.https.onRequest((request, response) =&gt; {\n\n    corsHandler(request, response, () =&gt; {\n\n        admin.firestore().doc(\"profiles/T0XCPHPkrJM4I10okb9KSHyukqn1\").get()\n        .then(snapshot =&gt; {\n            const data = snapshot.data()\n            console.log(data)\n            response.send(data)\n        })\n        .catch(error =&gt; {\n            console.log(error)\n          response.status(500).send(error)\n        })\n\n    })\n\n})\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 10247197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UTzEl2znUm8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oDhUQOJKSyzcwECUezzeDnCd9N_g/mo/photo.jpg?sz=128", "display_name": "dhammani", "link": "https://stackoverflow.com/users/10247197/dhammani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 54106882, "answer_count": 1, "score": 0, "last_activity_date": 1547029178, "creation_date": 1546999701, "question_id": 54102360, "link": "https://stackoverflow.com/questions/54102360/cant-deploy-firebase-cloud-function", "title": "Can&#39;t deploy firebase cloud function", "body": "<p>I'm trying to deploy a firebase cloud function with cors but it doesn't work. This is my code bellow, can someone help me with this ?</p>\n\n<pre><code>import * as functions from 'firebase-functions'\nimport * as admin from 'firebase-admin'\nimport * as cors from 'cors'\n\nadmin.initializeApp()\n\nconst corsHandler = cors({origin: true})\n\nexport const getUser = functions.https.onRequest((request, response) =&gt; {\n\n    corsHandler(request, response, () =&gt; {})\n\n    admin.firestore().doc(\"profiles/T0XCPHPkrJM4I10okb9KSHyukqn1\").get()\n    .then(snapshot =&gt; {\n        const data = snapshot.data()\n        console.log(data)\n        response.send(data)\n    })\n    .catch(error =&gt; {\n        console.log(error)\n        response.status(500).send(error)\n    })\n\n})\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "json", "typescript", "nestjs"], "comments": [{"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "edited": false, "score": 0, "creation_date": 1549840123, "post_id": 54101926, "comment_id": 96036805, "body": "Still having problems? :-)"}], "answers": [{"tags": [], "owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "is_accepted": false, "score": 0, "last_activity_date": 1547014026, "creation_date": 1547014026, "answer_id": 54104120, "question_id": 54101926, "link": "https://stackoverflow.com/questions/54101926/nestjs-middleware-get-request-response-body/54104120#54104120", "title": "nestjs middleware get request/response body", "body": "<p>The <em>response</em> body will not be accessible as a property. See this <a href=\"https://stackoverflow.com/q/19215042/4694994\">thread</a> for a solution.</p>\n\n<p>You should however be able to access the <em>request</em> body with <code>req.body</code> since nest uses <code>bodyParser</code> by default.</p>\n"}, {"tags": [], "owner": {"reputation": 573, "user_id": 1114686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500d72140ee848e6aaae2b99ca7f6594?s=128&d=identicon&r=PG", "display_name": "yumaa", "link": "https://stackoverflow.com/users/1114686/yumaa"}, "is_accepted": false, "score": 2, "last_activity_date": 1549963132, "creation_date": 1549963132, "answer_id": 54646546, "question_id": 54101926, "link": "https://stackoverflow.com/questions/54101926/nestjs-middleware-get-request-response-body/54646546#54646546", "title": "nestjs middleware get request/response body", "body": "<p>I've run against this question accidentally, it was listed in \"related\" to <a href=\"https://stackoverflow.com/questions/54636005/overloaded-routes-in-nestjs-controller\">my question</a>.</p>\n\n<p>I can extend <a href=\"https://stackoverflow.com/a/54104120/1114686\">Kim Kern's answer</a> a bit more, about responses.</p>\n\n<p>Problem with response is that response body ain't a property of response object, but <em>stream</em>. To be able to get it, you need to override methods, which writes to that stream.</p>\n\n<p>Like Kim Kern already said, you can look onto <a href=\"https://stackoverflow.com/questions/19215042/express-logging-response-body\">this thread</a>, there is accepted answer how to do this.</p>\n\n<p>Or you can take <a href=\"https://github.com/richardschneider/express-mung\" rel=\"nofollow noreferrer\">express-mung</a> middleware, which will do it for you, for example:</p>\n\n<pre><code>var mung = require('express-mung');\napp.use(mung.json(\n  function transform(body, req, res) {\n    console.log(body); // or whatever logger you use\n    return body;\n  }\n));\n</code></pre>\n\n<p>And there are two other different ways, which NestJS can offer you:</p>\n\n<ul>\n<li><a href=\"https://docs.nestjs.com/interceptors\" rel=\"nofollow noreferrer\">Interceptors</a>, like you said. There is example of <code>LoggingInterceptor</code> in documentation.</li>\n<li>You can write decorator for controller's methods, which will intercept their responses.</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { isObservable, from, of } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\n\n/**\n * Logging decorator for controller's methods\n */\nexport const LogReponse = (): MethodDecorator =&gt;\n  (target: object, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor&lt;any&gt;) =&gt; {\n\n    // save original method\n    const original = descriptor.value;\n\n    // replace original method\n    descriptor.value = function() { // must be ordinary function, not arrow function, to have `this` and `arguments`\n\n      // get original result from original method\n      const ret = original.apply(this, arguments);\n\n      // if it is null or undefined -&gt; just pass it further\n      if (ret == null) {\n        return ret;\n      }\n\n      // transform result to Observable\n      const ret$ = convert(ret);\n\n      // do what you need with response data\n      return ret$.pipe(\n        map(data =&gt; {\n          console.log(data); // or whatever logger you use\n          return data;\n        })\n      );\n    };\n\n    // return modified method descriptor\n    return descriptor;\n  };\n\nfunction convert(value: any) {\n  // is this already Observable? -&gt; just get it\n  if (isObservable(value)) {\n    return value;\n  }\n\n  // is this array? -&gt; convert from array\n  if (Array.isArray(value)) {\n    return from(value);\n  }\n\n  // is this Promise-like? -&gt; convert from promise, also convert promise result\n  if (typeof value.then === 'function') {\n    return from(value).pipe(mergeMap(convert));\n  }\n\n  // other? -&gt; create stream from given value\n  return of(value);\n}\n</code></pre>\n\n<p>Note though, that this will executes <em>before interceptors</em>, because this decorator change methods behaviour.</p>\n\n<p>And I don't think this is nice way to do logging, just mentioned it for variety :)</p>\n"}, {"comments": [{"owner": {"reputation": 1163, "user_id": 243424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b052f4656430fdd1efca5d543b629905?s=128&d=identicon&r=PG", "display_name": "Alex Fortuna", "link": "https://stackoverflow.com/users/243424/alex-fortuna"}, "edited": false, "score": 0, "creation_date": 1615201523, "post_id": 63782335, "comment_id": 117609114, "body": "By using this I can see successful responses only, as data structures (I&#39;m using GraphQL). If, say, an auth guard blocks the query (<code>message: &quot;Unauthorized&quot;</code> being the response), the interceptor is not invoked. Is there a known way how to access the raw response body after all in-app processing has taken place? I want to log actual details on what could have went wrong."}], "tags": [], "owner": {"reputation": 90, "user_id": 4969551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ca2235caac19e4a29d5039126b72c6?s=128&d=identicon&r=PG&f=1", "display_name": "Swadish", "link": "https://stackoverflow.com/users/4969551/swadish"}, "is_accepted": false, "score": 1, "last_activity_date": 1599502481, "last_edit_date": 1599502481, "creation_date": 1599501903, "answer_id": 63782335, "question_id": 54101926, "link": "https://stackoverflow.com/questions/54101926/nestjs-middleware-get-request-response-body/63782335#63782335", "title": "nestjs middleware get request/response body", "body": "<p>It's incredible how something so trivial is so hard to do.</p>\n<p>The easier way to log response body is to <strong>create an Interceptor</strong> (<a href=\"https://docs.nestjs.com/interceptors\" rel=\"nofollow noreferrer\">https://docs.nestjs.com/interceptors</a>):</p>\n<p><strong>AppModule</strong>:</p>\n<pre><code>providers: [\n    {\n      provide: APP_INTERCEPTOR,\n      useClass: HttpInterceptor,\n    }\n]\n</code></pre>\n<p><strong>HttpInterceptor</strong>:</p>\n<pre><code>import { CallHandler, ExecutionContext, Injectable, Logger, NestInterceptor } from '@nestjs/common';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class HttpInterceptor implements NestInterceptor {\n  private readonly logger = new Logger(HttpInterceptor.name);\n\n  intercept(\n    context: ExecutionContext,\n    next: CallHandler&lt;any&gt;,\n  ): Observable&lt;any&gt; | Promise&lt;Observable&lt;any&gt;&gt; {\n    return next.handle().pipe(\n      map(data =&gt; {\n        this.logger.debug(data);\n        return data;\n      }),\n    );\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4616982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337b2ebb63352a0c2b43b1c5375e6374?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Duran", "link": "https://stackoverflow.com/users/4616982/jose-duran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10585, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1599502481, "creation_date": 1546996027, "last_edit_date": 1547014446, "question_id": 54101926, "link": "https://stackoverflow.com/questions/54101926/nestjs-middleware-get-request-response-body", "title": "nestjs middleware get request/response body", "body": "<p>I am working with nestjs for a project, and want to log as much information as possible, one such thing being the body of the response and request of every http request. I made a nest middleware for that end:</p>\n\n<pre><code>import {token} from 'gen-uid';\nimport { inspect } from 'util';\nimport { Injectable, NestMiddleware, MiddlewareFunction } from '@nestjs/common';\nimport { Stream } from 'stream';\nimport { createWriteStream, existsSync, mkdirSync } from 'fs';\n\n@Injectable()\nexport class LoggerMiddleware implements NestMiddleware {\n    logfileStream: Stream;\n\n    constructor() {\n        if (!existsSync('./logs')) mkdirSync('./logs');\n        this.logfileStream = createWriteStream(\"./logs/serviceName-\"+ new Date().toISOString() + \".log\", {flags:'a'});\n    }\n\nresolve(...args: any[]): MiddlewareFunction {\n    return (req, res, next) =&gt; {\n        let reqToken = token();\n        let startTime = new Date();\n        let logreq = {\n            \"@timestamp\": startTime.toISOString(),\n            \"@Id\": reqToken,\n            query: req.query,\n            params: req.params,\n            url: req.url,\n            fullUrl: req.originalUrl,\n            method: req.method,\n            headers: req.headers,\n            _parsedUrl: req._parsedUrl,\n        }\n\n        console.log(\n            \"timestamp: \" + logreq[\"@timestamp\"] + \"\\t\" + \n            \"request id: \" + logreq[\"@Id\"] + \"\\t\" + \n            \"method:  \" + req.method + \"\\t\" +\n            \"URL: \" + req.originalUrl);\n\n        this.logfileStream.write(JSON.stringify(logreq));\n\n        const cleanup = () =&gt; {\n            res.removeListener('finish', logFn)\n            res.removeListener('close', abortFn)\n            res.removeListener('error', errorFn)\n        }\n\n        const logFn = () =&gt; {\n            let endTime = new Date();\n            cleanup()\n            let logres = {\n                \"@timestamp\": endTime.toISOString(),\n                \"@Id\": reqToken,\n                \"queryTime\": endTime.valueOf() - startTime.valueOf(),\n            }\n            console.log(inspect(res));\n        }\n\n        const abortFn = () =&gt; {\n            cleanup()\n            console.warn('Request aborted by the client')\n        }\n\n        const errorFn = err =&gt; {\n            cleanup()\n            console.error(`Request pipeline error: ${err}`)\n        }\n\n        res.on('finish', logFn) // successful pipeline (regardless of its response)\n        res.on('close', abortFn) // aborted pipeline\n        res.on('error', errorFn) // pipeline internal error\n\n        next();\n    };\n}\n}\n</code></pre>\n\n<p>Then I set this middleware as a global middleware to log all request, but looking at the res and req object, neither of them have a property.</p>\n\n<p>In the code sample I set the response object to be printed, running a hello world endpoint on my project that returns {\"message\":\"Hello World\"}\nI get the following output:</p>\n\n<blockquote>\n  <p>timestamp: 2019-01-09T00:37:00.912Z   request id: 2852f925f987    method:  GET    URL: /hello-world</p>\n  \n  <p>ServerResponse {\n    domain: null,\n    _events: { finish: [Function: bound resOnFinish] },\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    output: [],\n    outputEncodings: [],\n    outputCallbacks: [],\n    outputSize: 0,\n    writable: true,\n    _last: false,\n    upgrading: false,\n    chunkedEncoding: false,\n    shouldKeepAlive: true,\n    useChunkedEncodingByDefault: true,\n    sendDate: true,\n    _removedConnection: false,\n    _removedContLen: true,\n    _removedTE: true,\n    _contentLength: 0,\n    _hasBody: false,\n    _trailer: '',\n    finished: true,\n    _headerSent: true,\n    socket: null,\n    connection: null,\n    _header: 'HTTP/1.1 304 Not Modified\\r\\nX-Powered-By: Express\\r\\nETag: W/\"19-c6Hfa5VVP+Ghysj+6y9cPi5QQbk\"\\r\\nDate: Wed, 09 Jan 2019 00:37:00 GMT\\r\\nConnection: keep-alive\\r\\n\\r\\n',\n    _onPendingData: [Function: bound updateOutgoingData],\n    _sent100: false,\n    _expect_continue: false,\n    req: \n     IncomingMessage {\n       _readableState: \n        ReadableState {\n          objectMode: false,\n          highWaterMark: 16384,\n          buffer: [Object],\n          length: 0,\n          pipes: null,\n          pipesCount: 0,\n          flowing: true,\n          ended: true,\n          endEmitted: false,\n          reading: false,\n          sync: true,\n          needReadable: false,\n          emittedReadable: true,\n          readableListening: false,\n          resumeScheduled: true,\n          destroyed: false,\n          defaultEncoding: 'utf8',\n          awaitDrain: 0,\n          readingMore: true,\n          decoder: null,\n          encoding: null },\n       readable: true,\n       domain: null,\n       _events: {},\n       _eventsCount: 0,\n       _maxListeners: undefined,\n       socket: \n        Socket {\n          connecting: false,\n          _hadError: false,\n          _handle: [Object],\n          _parent: null,\n          _host: null,\n          _readableState: [Object],\n          readable: true,\n          domain: null,\n          _events: [Object],\n          _eventsCount: 10,\n          _maxListeners: undefined,\n          _writableState: [Object],\n          writable: true,\n          allowHalfOpen: true,\n          _bytesDispatched: 155,\n          _sockname: null,\n          _pendingData: null,\n          _pendingEncoding: '',\n          server: [Object],\n          _server: [Object],\n          _idleTimeout: 5000,\n          _idleNext: [Object],\n          _idlePrev: [Object],\n          _idleStart: 12562,\n          _destroyed: false,\n          parser: [Object],\n          on: [Function: socketOnWrap],\n          _paused: false,\n          read: [Function],\n          _consuming: true,\n          _httpMessage: null,\n          [Symbol(asyncId)]: 151,\n          [Symbol(bytesRead)]: 0,\n          [Symbol(asyncId)]: 153,\n          [Symbol(triggerAsyncId)]: 151 },\n       connection: \n        Socket {\n          connecting: false,\n          _hadError: false,\n          _handle: [Object],\n          _parent: null,\n          _host: null,\n          _readableState: [Object],\n          readable: true,\n          domain: null,\n          _events: [Object],\n          _eventsCount: 10,\n          _maxListeners: undefined,\n          _writableState: [Object],\n          writable: true,\n          allowHalfOpen: true,\n          _bytesDispatched: 155,\n          _sockname: null,\n          _pendingData: null,\n          _pendingEncoding: '',\n          server: [Object],\n          _server: [Object],\n          _idleTimeout: 5000,\n          _idleNext: [Object],\n          _idlePrev: [Object],\n          _idleStart: 12562,\n          _destroyed: false,\n          parser: [Object],\n          on: [Function: socketOnWrap],\n          _paused: false,\n          read: [Function],\n          _consuming: true,\n          _httpMessage: null,\n          [Symbol(asyncId)]: 151,\n          [Symbol(bytesRead)]: 0,\n          [Symbol(asyncId)]: 153,\n          [Symbol(triggerAsyncId)]: 151 },\n       httpVersionMajor: 1,\n       httpVersionMinor: 1,\n       httpVersion: '1.1',\n       complete: true,\n       headers: \n        { host: 'localhost:5500',\n          'user-agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0',\n          accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,<em>/</em>;q=0.8',\n          'accept-language': 'en-US,en;q=0.5',\n          'accept-encoding': 'gzip, deflate',\n          connection: 'keep-alive',\n          'upgrade-insecure-requests': '1',\n          'if-none-match': 'W/\"19-c6Hfa5VVP+Ghysj+6y9cPi5QQbk\"' },\n       rawHeaders: \n        [ 'Host',\n          'localhost:5500',\n          'User-Agent',\n          'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0',\n          'Accept',\n          'text/html,application/xhtml+xml,application/xml;q=0.9,<em>/</em>;q=0.8',\n          'Accept-Language',\n          'en-US,en;q=0.5',\n          'Accept-Encoding',\n          'gzip, deflate',\n          'Connection',\n          'keep-alive',\n          'Upgrade-Insecure-Requests',\n          '1',\n          'If-None-Match',\n          'W/\"19-c6Hfa5VVP+Ghysj+6y9cPi5QQbk\"' ],\n       trailers: {},\n       rawTrailers: [],\n       upgrade: false,\n       url: '/hello-world',\n       method: 'GET',\n       statusCode: null,\n       statusMessage: null,\n       client: \n        Socket {\n          connecting: false,\n          _hadError: false,\n          _handle: [Object],\n          _parent: null,\n          _host: null,\n          _readableState: [Object],\n          readable: true,\n          domain: null,\n          _events: [Object],\n          _eventsCount: 10,\n          _maxListeners: undefined,\n          _writableState: [Object],\n          writable: true,\n          allowHalfOpen: true,\n          _bytesDispatched: 155,\n          _sockname: null,\n          _pendingData: null,\n          _pendingEncoding: '',\n          server: [Object],\n          _server: [Object],\n          _idleTimeout: 5000,\n          _idleNext: [Object],\n          _idlePrev: [Object],\n          _idleStart: 12562,\n          _destroyed: false,\n          parser: [Object],\n          on: [Function: socketOnWrap],\n          _paused: false,\n          read: [Function],\n          _consuming: true,\n          _httpMessage: null,\n          [Symbol(asyncId)]: 151,\n          [Symbol(bytesRead)]: 0,\n          [Symbol(asyncId)]: 153,\n          [Symbol(triggerAsyncId)]: 151 },\n       _consuming: false,\n       _dumped: true,\n       next: [Function: next],\n       baseUrl: '',\n       originalUrl: '/hello-world',\n       _parsedUrl: \n        Url {\n          protocol: null,\n          slashes: null,\n          auth: null,\n          host: null,\n          port: null,\n          hostname: null,\n          hash: null,\n          search: null,\n          query: null,\n          pathname: '/hello-world',\n          path: '/hello-world',\n          href: '/hello-world',\n          _raw: '/hello-world' },\n       params: {},\n       query: {},\n       res: [Circular],\n       body: {},\n       route: Route { path: '/hello-world', stack: [Array], methods: [Object] } },\n    locals: {},\n    statusCode: 304,\n    statusMessage: 'Not Modified',\n    [Symbol(outHeadersKey)]: \n     { 'x-powered-by': [ 'X-Powered-By', 'Express' ],\n       etag: [ 'ETag', 'W/\"19-c6Hfa5VVP+Ghysj+6y9cPi5QQbk\"' ] } }</p>\n</blockquote>\n\n<p>In no place in the response object does the {\"message\":\"Hello World\"} message appears, I would like to know how to obtain the body from the res and req objects if it is possible please.</p>\n\n<p>Note: I know that nestjs has <code>Interceptors</code>, but following what the documentation says, middleware should be the solution for this problem. </p>\n"}, {"tags": ["typescript", "namespaces"], "answers": [{"tags": [], "owner": {"reputation": 1271, "user_id": 129674, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Euhl8.jpg?s=128&g=1", "display_name": "Jereme", "link": "https://stackoverflow.com/users/129674/jereme"}, "is_accepted": true, "score": 2, "last_activity_date": 1547004763, "creation_date": 1547004763, "answer_id": 54102872, "question_id": 54101864, "link": "https://stackoverflow.com/questions/54101864/how-to-override-a-function-in-a-merged-namespace-in-typescript/54102872#54102872", "title": "How to override a function in a merged namespace in typescript", "body": "<p>Well, you said it doesn't have to be pretty.... does this work for you:</p>\n\n<pre><code>namespace a.b.c {\n    export function hello() {\n        const elem = document.createElement(\"p\");\n        elem.innerText = \"Hello\";\n        document.body.append(elem);\n    }\n}\n\na.b.c[\"hello\"] = () =&gt; {\n    const elem = document.createElement(\"p\");\n    elem.innerText = \"HI!\";\n    document.body.append(elem);\n}\n\na.b.c.hello();\n</code></pre>\n"}], "owner": {"reputation": 686, "user_id": 1298952, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/75bdb74211e388e2280e9d5684e1aab3?s=128&d=identicon&r=PG", "display_name": "itcropper", "link": "https://stackoverflow.com/users/1298952/itcropper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 54102872, "answer_count": 1, "score": 0, "last_activity_date": 1547004763, "creation_date": 1546995481, "last_edit_date": 1546995689, "question_id": 54101864, "link": "https://stackoverflow.com/questions/54101864/how-to-override-a-function-in-a-merged-namespace-in-typescript", "title": "How to override a function in a merged namespace in typescript", "body": "<p>Lets say I have a namespace defined in a .d.ts file like this:</p>\n\n<pre><code>namespace a.b.c {\n   export function hello() { console.log('hello');}\n}\n</code></pre>\n\n<p>Is there a way to override hello() to do something else?</p>\n\n<p>Currently, when I try overriding it,</p>\n\n<pre><code>namespace a.b.c {\n    export function hello() {console.log('hi')}\n}\n</code></pre>\n\n<p>I'm getting error message when I try something like this:</p>\n\n<blockquote>\n  <p>error TS2384: Overload signatures must all be ambient or non-ambient.</p>\n</blockquote>\n\n<p>Assume that I can't change the .d.ts. </p>\n\n<p>It doesn't need to be pretty, but in the end, I need to be able to call</p>\n\n<pre><code>a.b.c.hello();\n</code></pre>\n\n<p>and get the value from the new function.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 469, "user_id": 4005400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/321bdf99249ff8722cb91eec178fb081?s=128&d=identicon&r=PG&f=1", "display_name": "JavaQuest", "link": "https://stackoverflow.com/users/4005400/javaquest"}, "is_accepted": false, "score": 0, "last_activity_date": 1547047265, "creation_date": 1547047265, "answer_id": 54113287, "question_id": 54101763, "link": "https://stackoverflow.com/questions/54101763/dynamically-replace-files-in-angular-6/54113287#54113287", "title": "dynamically replace files in angular 6", "body": "<p>Looks like the build takes care of replacing the files in component typescript :-)</p>\n"}], "owner": {"reputation": 469, "user_id": 4005400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/321bdf99249ff8722cb91eec178fb081?s=128&d=identicon&r=PG&f=1", "display_name": "JavaQuest", "link": "https://stackoverflow.com/users/4005400/javaquest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547047265, "creation_date": 1546994528, "question_id": 54101763, "link": "https://stackoverflow.com/questions/54101763/dynamically-replace-files-in-angular-6", "title": "dynamically replace files in angular 6", "body": "<p>I would like to replace dynamically files in angular, running an AB test. I am using fileReplacements in the angular.json file that angular 6 provides.</p>\n\n<p><strong>Test1</strong>:</p>\n\n<pre><code>            {\n             \"replace\": \"src/environments/controls\",\n             \"with\": \"src/environments/controls_Test1\"\n            }\n</code></pre>\n\n<p><strong>Test2</strong>:</p>\n\n<pre><code>            {\n             \"replace\": \"src/environments/controls\",\n             \"with\": \"src/environments/controls_Test2\"\n            }\n</code></pre>\n\n<p>My problem is in the component. How do I configure the path to pick data from controls_Test1 for one Test case? </p>\n\n<p>File1 controls_Test1.ts</p>\n\n<pre><code>export const control = 'control_test1';\n</code></pre>\n\n<p>File2 controls_Test2.ts</p>\n\n<p><code>export const control = 'control_test2';</code></p>\n\n<p>what path shld I have in the component to pick respective constants from the respective files for the AB test.</p>\n\n<p>src/environment/'&lt;'eachTestShldPickup respective Files'>'</p>\n"}, {"tags": ["angular", "typescript", "firebase", "google-cloud-firestore", "angularfire2"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9342802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780cc8f361c1edd51ef5a678f686615f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Sparrow", "link": "https://stackoverflow.com/users/9342802/lucas-sparrow"}, "edited": false, "score": 0, "creation_date": 1547042924, "post_id": 54102887, "comment_id": 95056029, "body": "thats weird because in other component I&#39;m using same logic and it works. I have the following somewhere else:    <code>this.userRef.valueChanges().pipe(map( (data: User) =&gt; {       this.userTeams = data.teams;     }));</code>"}, {"owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "reply_to_user": {"reputation": 71, "user_id": 9342802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780cc8f361c1edd51ef5a678f686615f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Sparrow", "link": "https://stackoverflow.com/users/9342802/lucas-sparrow"}, "edited": false, "score": 0, "creation_date": 1547088362, "post_id": 54102887, "comment_id": 95074703, "body": "I am pretty much sure, you need to subscribe to observables as they are cold by default. check this (example)[<a href=\"https://alligator.io/angular/cloud-firestore-angularfire/]\" rel=\"nofollow noreferrer\">alligator.io/angular/cloud-firestore-angularfire/]</a>&zwnj;&#8203;. Can you put your demo in stackblitz, It wiil be easy."}], "tags": [], "owner": {"reputation": 743, "user_id": 6663016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd121220ab034a07324d1cf31304372?s=128&d=identicon&r=PG&f=1", "display_name": "KiraAG", "link": "https://stackoverflow.com/users/6663016/kiraag"}, "is_accepted": false, "score": 0, "last_activity_date": 1547004875, "creation_date": 1547004875, "answer_id": 54102887, "question_id": 54101620, "link": "https://stackoverflow.com/questions/54101620/angular-firestore-problem-with-async-requests/54102887#54102887", "title": "Angular Firestore - problem with async requests?", "body": "<p>You need to subscribe to the observables, so that they start running.<code>valueChanges()</code> returns an observable, so you need to subscribe to listen to those changes. your code code should look like this. You need to for all the valueChanges() related operations.</p>\n\n<pre><code> this.userRef.valueChanges().pipe(map( (data) =&gt; {\n      console.log(data);\n      this.teamRef = this.afs.doc&lt;Team&gt;('teams/${data.teams[0]}');\n      console.log(this.teamRef);\n      console.log('init');\n      this.getTeam();\n    })).subscribe();\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9342802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780cc8f361c1edd51ef5a678f686615f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Sparrow", "link": "https://stackoverflow.com/users/9342802/lucas-sparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547004875, "creation_date": 1546993227, "question_id": 54101620, "link": "https://stackoverflow.com/questions/54101620/angular-firestore-problem-with-async-requests", "title": "Angular Firestore - problem with async requests?", "body": "<p>I have an issue with some basic logic. I have a User data structure with team field and other (uid email etc). Also, I have a team data structure with name, description, and an array of users in my firestore.</p>\n\n<p>What I'm trying to do is to at the init of the app get the user team id from the user, then get the team and then get the team members user profiles. I've written the following code:</p>\n\n<pre><code> ngAfterViewInit() {\n    this.userRef.valueChanges().pipe(map( (data) =&gt; {\n      console.log(data);\n      this.teamRef = this.afs.doc&lt;Team&gt;(`teams/${data.teams[0]}`);\n      console.log(this.teamRef);\n      console.log('init');\n      this.getTeam();\n    }));\n  }\n\n  private getTeam(): void {\n    this.teamRef.valueChanges().pipe(map( (teamData: Team) =&gt; {\n      this.team = teamData;\n      console.log('team');\n     this.getMembers();\n    }));\n  }\n\n  private getMembers(): void {\n    console.log('members init');\n    this.team.members.forEach((value) =&gt; {\n      this.afs.doc&lt;User&gt;(`users/${value}`).valueChanges().pipe(map( (data: User) =&gt; {\n        this.teamMembers.push(data);\n      }));\n    });\n    console.log('members:');\n    console.log(this.teamMembers);\n  }\n</code></pre>\n\n<p>My User interface looks like so:</p>\n\n<pre><code>export interface User {\n  email: string;\n  uid: string;\n  photoURL?: string;\n  displayName?: string;\n  teams?: string[]; // acutally only 1 team - field contains team doc id\n}\n</code></pre>\n\n<p>Any my Team interface:</p>\n\n<pre><code>export interface Team {\n  name: string;\n  description?: string;\n  admin?: string; // = creator - first user\n  members?: string[]; // array of users UIDs.\n  boards?: string[]; // array of board docs id.\n}\n</code></pre>\n\n<p>the data in the firesotre database are correct... </p>\n\n<p>I don't know what am I doing wrong. I don't get any data, even if the actions are invoked on the onInit hook</p>\n\n<p>Please help</p>\n"}, {"tags": ["typescript", "conditional-types"], "comments": [{"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1546993834, "post_id": 54101392, "comment_id": 95036232, "body": "As long as the implementation isn&#39;t a array function, standard javascript functions expose the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments\" rel=\"nofollow noreferrer\">arguments array object</a> that has all the arguments."}, {"owner": {"reputation": 161, "user_id": 3158208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ecade492d7d084e66f9c417a79ffe86?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/3158208/anonymous"}, "reply_to_user": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1547050584, "post_id": 54101392, "comment_id": 95061113, "body": "@ErikPhilips thanks, but my question is about typing, not implementation"}], "answers": [{"tags": [], "owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "is_accepted": true, "score": 2, "last_activity_date": 1546998239, "creation_date": 1546998239, "answer_id": 54102191, "question_id": 54101392, "link": "https://stackoverflow.com/questions/54101392/is-it-possible-to-type-the-spreadcall-method-a-puzzle-with-conditional-type-a/54102191#54102191", "title": "is it possible to type the &quot;spreadCall&quot; method? a puzzle with conditional type and infer", "body": "<p>I think you can use a <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#generic-rest-parameters\" rel=\"nofollow noreferrer\">generic rest parameter type</a> to do what you want:</p>\n\n<pre><code>function spreadCall&lt;A extends any[]&gt;(f1: () =&gt; A, f2: (...args: A) =&gt; any) {\n    const args = f1();\n    f2(...args);\n}\n</code></pre>\n\n<p>The return of <code>f1</code> has to be a <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple\" rel=\"nofollow noreferrer\">tuple</a> that matches the parameter types of the <code>f2</code> function:</p>\n\n<pre><code>declare function input(): [number, string]\ndeclare function output(a: number, b: string): void;\n\nspreadCall(input, output);\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3158208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ecade492d7d084e66f9c417a79ffe86?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/3158208/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 54102191, "answer_count": 1, "score": 0, "last_activity_date": 1546998239, "creation_date": 1546991369, "question_id": 54101392, "link": "https://stackoverflow.com/questions/54101392/is-it-possible-to-type-the-spreadcall-method-a-puzzle-with-conditional-type-a", "title": "is it possible to type the &quot;spreadCall&quot; method? a puzzle with conditional type and infer", "body": "<p>I have an issue at work which I can summarize with this example: is it possible to fully type the following function?</p>\n\n<pre><code>\n    function spreadCall(f1, f2) {\n        const args = f1();\n        f2(...args);\n    }\n\n</code></pre>\n\n<p>So we need f2 to accept exactly the same number of arguments (i.e. a tuple), with types in the same order, as the result of f1. I can't figure out a way to do this - the partial solution I can think of is enumerate several numbers of arguments, i.e.</p>\n\n<pre><code>\n    type Output&lt;F&gt; = \n         F extends ()=&gt;[infer A0] ? (a0:A0)=&gt;void :\n         F extends ()=&gt;[infer A0, infer A1] ? (a0:A0, a1:A1)=&gt;void :\n         F extends ()=&gt;[infer A0, infer A1, infer A2] ? (a0:A0, a1:A1, a2:A2)=&gt;void :\n         never;\n    // enumerate as many number of arguments as desired ^^\n\n    function spreadCall&lt;InputF&gt;(f1:InputF, f2:Output&lt;InputF&gt;) {\n        // ...\n    }\n\n</code></pre>\n\n<p>Is there a way to do it which handles any number of arguments?</p>\n"}, {"tags": ["html", "angular", "image", "typescript", "angular6"], "comments": [{"owner": {"reputation": 1603, "user_id": 6175174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43aee43acd936441ee06054cd7485790?s=128&d=identicon&r=PG&f=1", "display_name": "Wen W", "link": "https://stackoverflow.com/users/6175174/wen-w"}, "edited": false, "score": 1, "creation_date": 1546991592, "post_id": 54101295, "comment_id": 95035699, "body": "where&#39;s your image folder? can you take a picture of your folders?"}, {"owner": {"reputation": 138, "user_id": 10500202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JaHb7IlVQZU/AAAAAAAAAAI/AAAAAAAAABE/7ALOrkAO2o8/photo.jpg?sz=128", "display_name": "Junior Christ", "link": "https://stackoverflow.com/users/10500202/junior-christ"}, "reply_to_user": {"reputation": 1603, "user_id": 6175174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43aee43acd936441ee06054cd7485790?s=128&d=identicon&r=PG&f=1", "display_name": "Wen W", "link": "https://stackoverflow.com/users/6175174/wen-w"}, "edited": false, "score": 0, "creation_date": 1546992335, "post_id": 54101295, "comment_id": 95035885, "body": "I added the picture, see above."}, {"owner": {"reputation": 141, "user_id": 8116770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/khjaq.jpg?s=128&g=1", "display_name": "mfortes", "link": "https://stackoverflow.com/users/8116770/mfortes"}, "edited": false, "score": 3, "creation_date": 1546993207, "post_id": 54101295, "comment_id": 95036093, "body": "Check out this link <a href=\"https://stackoverflow.com/questions/45920722/images-not-loading-in-angular-2\">https://stackoverflow.com/questions/45920722/images-not-load&zwnj;&#8203;ing-in-angular-2</a>"}, {"owner": {"reputation": 2511, "user_id": 1968911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0XjWj.png?s=128&g=1", "display_name": "sketchthat", "link": "https://stackoverflow.com/users/1968911/sketchthat"}, "edited": false, "score": 2, "creation_date": 1547006055, "post_id": 54101295, "comment_id": 95038660, "body": "You should put the image in <code>assets</code> and the image source should be <code>assets&#47;image&#47;cat.jpg</code>. You don&#39;t want the image in your <code>app</code> folder."}, {"owner": {"reputation": 138, "user_id": 10500202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JaHb7IlVQZU/AAAAAAAAAAI/AAAAAAAAABE/7ALOrkAO2o8/photo.jpg?sz=128", "display_name": "Junior Christ", "link": "https://stackoverflow.com/users/10500202/junior-christ"}, "edited": false, "score": 0, "creation_date": 1548383760, "post_id": 54101295, "comment_id": 95531070, "body": "ok, thank you I will try that"}, {"owner": {"reputation": 138, "user_id": 10500202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JaHb7IlVQZU/AAAAAAAAAAI/AAAAAAAAABE/7ALOrkAO2o8/photo.jpg?sz=128", "display_name": "Junior Christ", "link": "https://stackoverflow.com/users/10500202/junior-christ"}, "edited": false, "score": 0, "creation_date": 1550200601, "post_id": 54101295, "comment_id": 96190712, "body": "It worked!!! thank you!!!"}, {"owner": {"reputation": 138, "user_id": 10500202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JaHb7IlVQZU/AAAAAAAAAAI/AAAAAAAAABE/7ALOrkAO2o8/photo.jpg?sz=128", "display_name": "Junior Christ", "link": "https://stackoverflow.com/users/10500202/junior-christ"}, "edited": false, "score": 0, "creation_date": 1563230172, "post_id": 54101295, "comment_id": 100623092, "body": "The problem has been solved."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 10800393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vvKQ9.jpg?s=128&g=1", "display_name": "Prithvi", "link": "https://stackoverflow.com/users/10800393/prithvi"}, "is_accepted": true, "score": 1, "last_activity_date": 1605981914, "creation_date": 1605981914, "answer_id": 64946393, "question_id": 54101295, "link": "https://stackoverflow.com/questions/54101295/angular-7-problem-with-component-to-show-image-on-html-why-isnt-the-image-show/64946393#64946393", "title": "Angular 7 problem with component to show image on html. Why isn&#39;t the image showing?", "body": "<p>Everything's fine with your code.</p>\n<p>Just move your image folder from</p>\n<blockquote>\n<p><code>/src/app/image</code></p>\n</blockquote>\n<p>to</p>\n<blockquote>\n<p><code>/src/assets</code></p>\n</blockquote>\n<p>directory &amp; do change the <code>src</code> in</p>\n<blockquote>\n<p>app.component.html</p>\n</blockquote>\n"}], "owner": {"reputation": 138, "user_id": 10500202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JaHb7IlVQZU/AAAAAAAAAAI/AAAAAAAAABE/7ALOrkAO2o8/photo.jpg?sz=128", "display_name": "Junior Christ", "link": "https://stackoverflow.com/users/10500202/junior-christ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 1, "accepted_answer_id": 64946393, "answer_count": 1, "score": 0, "last_activity_date": 1605981914, "creation_date": 1546990806, "last_edit_date": 1565191799, "question_id": 54101295, "link": "https://stackoverflow.com/questions/54101295/angular-7-problem-with-component-to-show-image-on-html-why-isnt-the-image-show", "title": "Angular 7 problem with component to show image on html. Why isn&#39;t the image showing?", "body": "<p>I am doing a click cat game, and when I put the path of the image of the cat in the component's template using img, the image does not appear when running the page.</p>\n\n<p>I tried to use the img as property using [img]=\"path\", and also enter the path directly to the img element</p>\n\n<p>Template:\n    </p>\n\n<pre><code>&lt;div&gt;{{catName1}}&lt;/div&gt;\n&lt;div&gt;\n    &lt;img src=\"./image/cat.jpg\" (click)=\"clickUp()\"&gt;\n&lt;/div&gt;\n&lt;div&gt;{{catClick1}}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Typescript</p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n selector: 'app-root',\n templateUrl: './app.component.html',\n styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n  catName1 = 'Misho';\n  catImg1 = 'image/cat.jpg';\n  catClick1 = 0;\n\n  clickUp(){\n    this.catClick1 += 1;\n  }\n\n} \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Z44gt.png\" rel=\"nofollow noreferrer\">How it is showing</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Ce1Q1.png\" rel=\"nofollow noreferrer\">Folder of the image</a></p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "is_accepted": true, "score": 1, "last_activity_date": 1546997256, "creation_date": 1546997256, "answer_id": 54102071, "question_id": 54101230, "link": "https://stackoverflow.com/questions/54101230/is-there-a-way-to-listen-to-an-event-from-directive-when-form-has-been-reset/54102071#54102071", "title": "Is there a way to listen to an event from Directive when form has been reset?", "body": "<p>Use <strong>NgControl</strong> </p>\n\n<blockquote>\n  <p>A base class that all control FormControl-based directives extend. It\n  binds a FormControl object to a DOM element.</p>\n</blockquote>\n\n<p>Inject NgControl in directive constructor then use the valuechanges method to subscribe the changes</p>\n\n<pre><code>import { Directive} from '@angular/core';\nimport { NgControl } from '@angular/forms';\n@Directive({\n  selector: '[reset]',\n})\nexport class ResetDirective {\n  constructor(private ngControl: NgControl) { }\n  ngOnInit() {\n    const reset$ = this.ngControl.control.valueChanges;\n    reset$.subscribe((e) =&gt; {\n      if (e === null) {\n        console.log('Yes Form has been reset!');\n      }\n    });\n  }\n}\n</code></pre>\n\n<p>Example:<a href=\"https://stackblitz.com/edit/reset-directive\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/reset-directive</a></p>\n"}], "owner": {"reputation": 4208, "user_id": 4084160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TTMdn.jpg?s=128&g=1", "display_name": "HenryDev", "link": "https://stackoverflow.com/users/4084160/henrydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 54102071, "answer_count": 1, "score": 1, "last_activity_date": 1546997256, "creation_date": 1546990347, "last_edit_date": 1546992385, "question_id": 54101230, "link": "https://stackoverflow.com/questions/54101230/is-there-a-way-to-listen-to-an-event-from-directive-when-form-has-been-reset", "title": "Is there a way to listen to an event from Directive when form has been reset?", "body": "<p>Is there a way to <strong>listen from Directive</strong> when form has been reset by using an <strong>event or lifeCycle Hook</strong>?</p>\n\n<p>I have this form that looks like this:</p>\n\n<pre><code>&lt;form [formGroup]=\"myForm\" (ngSubmit)=\"onFormSubmit($event)\"&gt;\n  &lt;input type=\"text\" formControlName=\"firstName\" myDirective/&gt;\n  &lt;button id=\"btnClear\" (click)=\"onReset($event)\"&gt;Clear&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>My Component:</strong></p>\n\n<pre><code>   @Component({\n     selector: 'app-form',\n     templateUrl: './app-form.component.html',\n     styleUrls: ['./app-form.component.scss']\n   })\n   export class AppSearchFormComponent implements OnInit {\n\n   myForm: FormGroup;\n\n   constructor(private _fb: FormBuilder, private store: Store&lt;any&gt;) { }\n\n   ngOnInit() {\n   this.createForm();\n   }\n\n   createForm(){\n       this.myForm = this._fb.group({\n       'firstName': ['', [Validators.minLength(2)]]\n    });\n   }\n\n onReset(evt) {\n  this.myForm.reset();\n  }\n }\n</code></pre>\n\n<p><strong>My custom Directive:</strong></p>\n\n<pre><code>@Directive({\n  selector: '[myDirective]'\n})\nexport class CustomDirective {\n\n   constructor(private el: ElementRef, private control : NgControl) { }\n\n     @HostListener('someEvent',['$event'])\n      onkeyup(event:any){\n\n       console.log('Yes Form has been reset!); // I want to display this message\n     }\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 2, "creation_date": 1546992716, "post_id": 54100991, "comment_id": 95035977, "body": "There is nothing wrong with your code example. The TypeError is often thrown by <i>operators</i> which are attached to the observables, and since you haven&#39;t shared how the observables are created, then we can&#39;t help you."}, {"owner": {"reputation": 5750, "user_id": 1854793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1dbf5ca363bf641d6277246f2b5c159f?s=128&d=identicon&r=PG", "display_name": "Davy", "link": "https://stackoverflow.com/users/1854793/davy"}, "edited": false, "score": 0, "creation_date": 1547038301, "post_id": 54100991, "comment_id": 95053235, "body": "Are you sure that in your actual code, you are importing from &#39;rxjs&#39; and not &#39;rxjs/operators&#39;? (that often causes similar errors)"}, {"owner": {"reputation": 671, "user_id": 5136485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5010d0a82ee6fb34eb9e9c6648088ed5?s=128&d=identicon&r=PG&f=1", "display_name": "delashum", "link": "https://stackoverflow.com/users/5136485/delashum"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1547055833, "post_id": 54100991, "comment_id": 95064097, "body": "Yeah, I just double checked and it&#39;s coming from &#39;rxjs&#39;, not &#39;rxjs/operators&#39;. @cgTag I will look into how the observables are created and see if there is an issue there. I didn&#39;t post that because it&#39;s a lot of code."}, {"owner": {"reputation": 671, "user_id": 5136485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5010d0a82ee6fb34eb9e9c6648088ed5?s=128&d=identicon&r=PG&f=1", "display_name": "delashum", "link": "https://stackoverflow.com/users/5136485/delashum"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1547068505, "post_id": 54100991, "comment_id": 95069444, "body": "@cgTag I edited the question to provide the sources of each observable (condensed into one function each), does this help? They both seem pretty straightforward to me."}, {"owner": {"reputation": 8791, "user_id": 7247920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAqar.jpg?s=128&g=1", "display_name": "ggradnig", "link": "https://stackoverflow.com/users/7247920/ggradnig"}, "edited": false, "score": 0, "creation_date": 1547072769, "post_id": 54100991, "comment_id": 95071173, "body": "Please add all imports to your question. Rule of thumb:  All operators - everything that is put into <code>pipe(...)</code> - is imported from <code>rxjs&#47;operators</code>  Everything else: From <code>rxjs</code>."}, {"owner": {"reputation": 671, "user_id": 5136485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5010d0a82ee6fb34eb9e9c6648088ed5?s=128&d=identicon&r=PG&f=1", "display_name": "delashum", "link": "https://stackoverflow.com/users/5136485/delashum"}, "reply_to_user": {"reputation": 8791, "user_id": 7247920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAqar.jpg?s=128&g=1", "display_name": "ggradnig", "link": "https://stackoverflow.com/users/7247920/ggradnig"}, "edited": false, "score": 0, "creation_date": 1547073361, "post_id": 54100991, "comment_id": 95071355, "body": "@ggradnig as mentioned above, I already triple checked this. each import is coming from the proper place. I will add them to the question though."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1547073697, "post_id": 54100991, "comment_id": 95071456, "body": "<code>store.getState()</code> does this return an observable?"}, {"owner": {"reputation": 671, "user_id": 5136485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5010d0a82ee6fb34eb9e9c6648088ed5?s=128&d=identicon&r=PG&f=1", "display_name": "delashum", "link": "https://stackoverflow.com/users/5136485/delashum"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1547076339, "post_id": 54100991, "comment_id": 95072168, "body": "@cgTag no it&#39;s a snapshot of the state. Just an object. see <a href=\"https://redux.js.org/api/store#getState\" rel=\"nofollow noreferrer\">redux.js.org/api/store#getState</a> for more details if you need"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6567154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7bdc8b1d0ddcb23cc6d3c6d96701fe7?s=128&d=identicon&r=PG&f=1", "display_name": "Seth Call", "link": "https://stackoverflow.com/users/6567154/seth-call"}, "is_accepted": false, "score": 1, "last_activity_date": 1547670811, "creation_date": 1547670811, "answer_id": 54224933, "question_id": 54100991, "link": "https://stackoverflow.com/questions/54100991/combinelatest-throwing-typeerror/54224933#54224933", "title": "combineLatest throwing TypeError", "body": "<p>Changing:</p>\n\n<pre><code>import { combineLatest } from 'rxjs/internal/observable/combineLatest';\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>import { combineLatest } from 'rxjs';\n</code></pre>\n\n<p>Fixed the error for me:</p>\n\n<pre><code>TypeError: You provided an invalid object where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\n</code></pre>\n\n<p>While you already have the proper import, it's possible there is an improper import in code you're not showing. As others have stated, there is no obvious problem with the code you have presented.</p>\n"}], "owner": {"reputation": 671, "user_id": 5136485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5010d0a82ee6fb34eb9e9c6648088ed5?s=128&d=identicon&r=PG&f=1", "display_name": "delashum", "link": "https://stackoverflow.com/users/5136485/delashum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1547670811, "creation_date": 1546988550, "last_edit_date": 1547077944, "question_id": 54100991, "link": "https://stackoverflow.com/questions/54100991/combinelatest-throwing-typeerror", "title": "combineLatest throwing TypeError", "body": "<pre><code>import { combineLatest } from 'rxjs';\n\nconst observable_1 = get_first_observable();\nconst observable_2 = get_second_observable();\n\nconsole.log('first log', observable_1, observable_2);\n\nobservable_1.subscribe(e =&gt; console.log('second log', e));\nobservable_2.subscribe(e =&gt; console.log('third log', e));\n\nconst combined = combineLatest(observable_1, observable_2);\n\nconsole.log('fourth log', combined);\n\ncombined.subscribe(e =&gt; console.log('fifth log', e)); // throws TypeError warning, doesn't work\n</code></pre>\n\n<p>I have a portion of code that behaved just as above, it was working fine until yesterday, when I made some changes to what I thought was unrelated code.</p>\n\n<p>The <code>first log</code> confirms that both of these variables are indeed <code>Observables</code>.</p>\n\n<p>The <code>second log</code> and <code>third log</code> confirm that each of observable is emitting at least one value.</p>\n\n<p>The <code>fourth log</code> confirms that <code>combineLatest()</code> is returning an <code>Observable</code> type.</p>\n\n<p>The <code>fifth log</code> never fires, and commenting that line out removes the warning. Anywhere I attempt to do <code>combined.subscribe()</code> it throws the following TypeError warning.</p>\n\n<pre><code>TypeError: You provided an invalid object where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\n</code></pre>\n\n<p>What is going on here?? I have tried everything I can think of to no avail. It seems to me that if I am passing two valid Observables to <code>combineLatest()</code>, and they each emit a value, then it should work as expected.</p>\n\n<p><em>As requested, the sources of the two observables are as follows:</em></p>\n\n<pre><code>import { BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\n\nconst get_first_observable = () =&gt; {\n  const subject = new BehaviorSubject&lt;string&gt;(null);\n  // I am using subject.next(...) elsewhere\n  return subject.asObservable().pipe(distinctUntilChanged());\n};\n\nconst get_second_observable = () =&gt; {\n  // where store is a redux Store\n  const store_subject = new BehaviorSubject(store.getState());\n  store.subscribe(() =&gt; {\n    store_subject.next(store.getState());\n  });\n  const stream = store_subject.asObservable();\n\n  const my_observable = stream.pipe(\n    map(state =&gt; {\n      return format_data(state) || [];\n    })\n  );\n\n  return my_observable;\n};\n</code></pre>\n\n<p><em>Alright, new update.</em></p>\n\n<p>This is really strange to me and I don't understand it at all, but I added the line of code below inside <code>get_second_observable()</code> before it returns <code>my_observable</code>, and then magically all the code works. Now if I comment that line back out it doesn't work anymore.. How does that make any sense? I don't save the new observable to a variable or use it at all. Just combining them seems to make it work down the chain.</p>\n\n<pre><code>combineLatest(my_observable, of(true));\n</code></pre>\n"}, {"tags": ["typescript", "mapped-types", "index-signature"], "comments": [{"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "edited": false, "score": 0, "creation_date": 1546983425, "post_id": 54100025, "comment_id": 95032982, "body": "Not alot of difference from my understanding - the <code>Record&lt;S,T&gt;</code> interface is a predefined conviennce/helper"}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 1, "creation_date": 1546984120, "post_id": 54100025, "comment_id": 95033254, "body": "<code>Record&lt;&gt;</code> is a mapped type, so you can do more interesting things with it, like <code>Record&lt;&quot;foo&quot; | &quot;bar&quot;, string&gt;</code>... see: <a href=\"https://stackoverflow.com/questions/51936369/what-is-the-record-type-in-typescript\" title=\"what is the record type in typescript\">stackoverflow.com/questions/51936369/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "is_accepted": true, "score": 21, "last_activity_date": 1547041046, "last_edit_date": 1547041046, "creation_date": 1546984776, "answer_id": 54100359, "question_id": 54100025, "link": "https://stackoverflow.com/questions/54100025/difference-between-index-signature-and-record-for-empty-object/54100359#54100359", "title": "Difference between index signature and Record for empty object?", "body": "<p>The definition for <code>Record</code> is:</p>\n\n<pre><code>/**\n * Construct a type with a set of properties K of type T\n */\ntype Record&lt;K extends keyof any, T&gt; = {\n    [P in K]: T;\n};\n</code></pre>\n\n<p>When creating a type like <code>type MyType = Record&lt;string, string&gt;;</code>, inlining <code>Record</code> leads to the following type:</p>\n\n<pre><code>type MyType = {\n    [P in string]: string;\n};\n</code></pre>\n\n<p>This is saying to create an object type with string property names within the set <code>string</code>. Since <code>string</code> is unbounded there's unlimited possibilities of strings (unlike a union of string literal types like <code>\"prop1\" | \"prop2\"</code>)... so it's describing an object that can have any number of properties with any name, with the only restriction being that the properties must have a type of <code>string</code>.</p>\n\n<p>So yes, <em>from a type checking perspective</em> it's basically equivalent to the example with the index signature without a mapped type (<code>{ [index: string]: string; }</code>.</p>\n\n<p><strong>Use a plain index signature</strong></p>\n\n<p>Using <code>Record</code> in this fashion is a little strange though and many people might not understand what's going on. A more common way to express intent when there can be any number of properties, is to not use a mapped type:</p>\n\n<pre><code>type ObjectWithStringProperties = {\n    [index: string]: string;\n};\n</code></pre>\n\n<p>This has the added benefit of helping explain what the key is supposed to be. For example:</p>\n\n<pre><code>type PersonsByName = {\n    [name: string]: Person;\n};\nconst collection: PersonsByName = {};\n</code></pre>\n\n<p>Note that in this way the types are different because a developer using an object with this type will have this extra described key name information to look at in their editor.</p>\n\n<p><strong>Using <code>Record</code></strong></p>\n\n<p>Note that <code>Record</code> is usually used like the following:</p>\n\n<pre><code>type ThreeStringProps = Record&lt;\"prop1\" | \"prop2\" | \"prop3\", string&gt;;\n// goes to...\ntype ThreeStringProps = { [P in \"prop1\" | \"prop2\" | \"prop3\"]: string; };\n// goes to...\ntype ThreeStringProps = {\n    prop1: string;\n    prop2: string;\n    prop3: string;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6197, "user_id": 32055, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/pGaRU.png?s=128&g=1", "display_name": "Chris Haines", "link": "https://stackoverflow.com/users/32055/chris-haines"}, "edited": false, "score": 1, "creation_date": 1580983927, "post_id": 54104476, "comment_id": 106280597, "body": "&quot;you can do a lot more thing with Record then you can with a simple index signature&quot; -- can you give an example of something you can do with Record you can&#39;t do with an index signature? Thanks!"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 6197, "user_id": 32055, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/pGaRU.png?s=128&g=1", "display_name": "Chris Haines", "link": "https://stackoverflow.com/users/32055/chris-haines"}, "edited": false, "score": 0, "creation_date": 1580987669, "post_id": 54104476, "comment_id": 106282703, "body": "@ChrisHaines <code>Record&lt;&quot;A&quot; | &quot;B&quot;, boolean&gt;</code> to get the type <code>{ A: boolean, B: boolean }</code>. Or <code>Record&lt;keyof T, boolean&gt;</code> to get a type with the same keys as <code>T</code> but of type <code>boolean</code>, just as examples"}, {"owner": {"reputation": 6197, "user_id": 32055, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/pGaRU.png?s=128&g=1", "display_name": "Chris Haines", "link": "https://stackoverflow.com/users/32055/chris-haines"}, "edited": false, "score": 0, "creation_date": 1581077193, "post_id": 54104476, "comment_id": 106318633, "body": "This can also be achieved with an index signature like so: <code>{ [key: keyof &quot;A&quot; | &quot;B&quot;]: boolean }</code>"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 6197, "user_id": 32055, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/pGaRU.png?s=128&g=1", "display_name": "Chris Haines", "link": "https://stackoverflow.com/users/32055/chris-haines"}, "edited": false, "score": 2, "creation_date": 1581078461, "post_id": 54104476, "comment_id": 106319308, "body": "@ChrisHaines No it can&#39;t, index signature parameters MUST be <code>string</code> or <code>number</code> (not even a union of the two works). You can use a mapped <code>{ [key in &quot;A&quot; | &quot;B&quot;]: boolean }</code>, but that really is just writing out what <code>Record&lt;&quot;A&quot; | &quot;B&quot;, boolean&gt;</code> really is."}, {"owner": {"reputation": 6197, "user_id": 32055, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/pGaRU.png?s=128&g=1", "display_name": "Chris Haines", "link": "https://stackoverflow.com/users/32055/chris-haines"}, "edited": false, "score": 0, "creation_date": 1581079905, "post_id": 54104476, "comment_id": 106320037, "body": "Apologies, wrong syntax; didn&#39;t have an editor on me. But my point is you can express it as an index signature still, so whilst I much prefer the cleaner syntax of <code>Record</code>, I&#39;m not convinced &quot;you can do a lot more thing with Record then you can with a simple index signature&quot;."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 6197, "user_id": 32055, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/pGaRU.png?s=128&g=1", "display_name": "Chris Haines", "link": "https://stackoverflow.com/users/32055/chris-haines"}, "edited": false, "score": 0, "creation_date": 1581084120, "post_id": 54104476, "comment_id": 106322049, "body": "@ChrisHaines you are confusing an index signatures with a mapped types. While they have similar syntax, they are different concepts."}, {"owner": {"reputation": 55109, "user_id": 368691, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/74a5bd659b3a8af09a336a932eebe3b1?s=128&d=identicon&r=PG", "display_name": "Gajus", "link": "https://stackoverflow.com/users/368691/gajus"}, "edited": false, "score": 0, "creation_date": 1610590611, "post_id": 54104476, "comment_id": 116184329, "body": "Another difference is that index syntax works with recursive structures <a href=\"https://www.typescriptlang.org/play?#code/C4TwDgpgBAUgzgewHZQLy0Ug2gXSgHygG8osBrCEALijmACcBLJAcxxvmSgF8CoAjBAgA2EAIYpCSAK4BbfhHp86TVnxnDhAbiA\" rel=\"nofollow noreferrer\">typescriptlang.org/play?#code/&hellip;</a> and Record does not <a href=\"https://www.typescriptlang.org/play?#code/C4TwDgpgBAUgzgewHZQLy0Ug2gXSgHygCUIBjBAJwBMAeOYCgSyQHMAaDZAPgKgCMECADYQAhikJIArgFs+ECr3pNWvaUKEBuIA\" rel=\"nofollow noreferrer\">typescriptlang.org/play?#code/&hellip;</a>"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 6, "last_activity_date": 1547020408, "last_edit_date": 1547020408, "creation_date": 1547016044, "answer_id": 54104476, "question_id": 54100025, "link": "https://stackoverflow.com/questions/54100025/difference-between-index-signature-and-record-for-empty-object/54104476#54104476", "title": "Difference between index signature and Record for empty object?", "body": "<p>Whether it is a good idea to use <code>Record</code> instead of a plain index signature may be a matter of debate (as David Shereet points out in his answer). Also the fact that you can do a lot more thing with <code>Record</code> then you can with a simple index signature is also something that should be mentioned.</p>\n\n<p>The main part of this question (in my reading) is whether the two types are the same. They are obviously declared in different  ways but are they the <strong>same</strong> type. While they are obviously compatible (that is you can assign one to the other and vice-versa) the question is are there corner cases where this is not possible.</p>\n\n<p>While it's hard to find an exhaustive list of what you can do with a type, Matt  McCutchen in this <a href=\"https://stackoverflow.com/questions/52443276/how-to-exclude-getter-only-properties-from-type-in-typescript/52473108#52473108\">answer</a> provides an interesting type that detects weather the <code>readonly</code> modifier is present (something that simple compatibility does not detect the difference between). I would surmise that if <code>Record</code> and an index signature are the considered the same in the way Matt uses them there (as part of the signature of a generic function) they are pretty much the same type declared in a different way:</p>\n\n<pre><code>type IfEquals&lt;X, Y&gt; =\n    (&lt;T&gt;() =&gt; T extends X ? 1 : 2) extends\n    (&lt;T&gt;() =&gt; T extends Y ? 1 : 2) ? \"Y\" : \"N\";\n\nlet same : IfEquals&lt;{x: string}, {x: string}&gt;= \"Y\"\nlet notsame : IfEquals&lt;{ y: string }, { x: string }&gt;= \"N\"\nlet notsamero: IfEquals&lt;{ readonly x: string }, { x: string }&gt; = \"N\"\nlet samerecord: IfEquals&lt;{ [x: string]:string }, Record&lt;string, string&gt;&gt; = \"Y\"\n</code></pre>\n\n<p>As we can see in the last example the type of <code>samerecord</code> is <code>Y</code> meaning that the compiler treated the two types as being the same thing. Thus I would surmise <code>{ [x: string]:string }</code> and  <code>Record&lt;string, string&gt;</code> are exactly the same thing.</p>\n"}], "owner": {"reputation": 250, "user_id": 10199493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b988b29075f97d782cf0f19d353d61?s=128&d=identicon&r=PG&f=1", "display_name": "mkusps", "link": "https://stackoverflow.com/users/10199493/mkusps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4804, "favorite_count": 4, "accepted_answer_id": 54100359, "answer_count": 2, "score": 19, "last_activity_date": 1613616619, "creation_date": 1546983117, "last_edit_date": 1613616619, "question_id": 54100025, "link": "https://stackoverflow.com/questions/54100025/difference-between-index-signature-and-record-for-empty-object", "title": "Difference between index signature and Record for empty object?", "body": "<p>I cannot figure out the difference between index signatures and record types. Could someone explain the differences and when to use one versus the other?</p>\n<p>Specifically, I am looking to define the type of an object that will have random strings for its keys and values, which will be iterated over.</p>\n<p>is there a difference between:</p>\n<pre><code>let objectVariable: Record&lt;string, string&gt; = {}\n</code></pre>\n<p>and</p>\n<pre><code>let objectVariable2: {[index: string]: string} = {}\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "edited": false, "score": 0, "creation_date": 1546992327, "post_id": 54099908, "comment_id": 95035882, "body": "Not possible. It would be tempting to write <code>ReturnType&lt;typeof this&gt;</code>, but it\u02bcs not going to work."}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1546997289, "post_id": 54099908, "comment_id": 95036995, "body": "I&#39;m not clear where you want this, can you give an example?"}], "owner": {"reputation": 51, "user_id": 9699721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661ad51675f89b88c9a182dcb8ebc49c?s=128&d=identicon&r=PG&f=1", "display_name": "scrapy_user", "link": "https://stackoverflow.com/users/9699721/scrapy-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546982523, "creation_date": 1546982523, "question_id": 54099908, "link": "https://stackoverflow.com/questions/54099908/get-the-return-type-of-the-function-inside-the-function", "title": "Get the return type of the function inside the function", "body": "<p>In a generic function like this:</p>\n\n<pre><code>interface Foo&lt;S,T&gt; {\n  state: S;\n  type: T;\n  valid: boolean;\n}\n\nfunction foo&lt;S,A&gt;(\n  state: S,\n  provider: TypeProvider&lt;S, A&gt;\n): Foo&lt;S,A&gt; {\n  const ret: Foo&lt;S,A&gt; = {\n    state: provider.getState(state),\n    type: provider.type()\n  }\n  ret.valid = false;\n  return ret;\n}\n</code></pre>\n\n<p>In the line:</p>\n\n<pre><code>const ret: Foo&lt;S,A&gt; = {\n</code></pre>\n\n<p>I will like to use a reference to the \"current declare return type of the function\" is any like this exist on Typescript >3.1.</p>\n\n<p>I'm aware of <code>ReturnType&lt;typeof foo&gt;</code> but just want to know on other solutions.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 5457, "user_id": 430661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a399649ac98c8c5fe40ae4249e02?s=128&d=identicon&r=PG", "display_name": "Alex Paven", "link": "https://stackoverflow.com/users/430661/alex-paven"}, "edited": false, "score": 0, "creation_date": 1546983977, "post_id": 54099513, "comment_id": 95033200, "body": "Perhaps __extends is only generated when you&#39;re using namespaces (internal modules)? I could be wrong but check if you have any namespaces defined, it&#39;s not advised when using external modules."}, {"owner": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 2, "creation_date": 1546986518, "post_id": 54099513, "comment_id": 95034182, "body": "Looks like eslint rules are being run on the emitted javascript. You will want to look into how to disable that and only run linting on the typescript code. Another thing you could try is to turn on the <code>--importHelpers</code> (<code>&quot;importHelpers&quot;: true</code>) compiler option and add <a href=\"https://www.npmjs.com/package/tslib\" rel=\"nofollow noreferrer\">tslib</a> to your project."}], "answers": [{"tags": [], "owner": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "is_accepted": true, "score": 1, "last_activity_date": 1547068017, "last_edit_date": 1547068017, "creation_date": 1546995960, "answer_id": 54101919, "question_id": 54099513, "link": "https://stackoverflow.com/questions/54099513/typescript-keeps-adding-a-function-above-the-imports/54101919#54101919", "title": "Typescript keeps adding a function above the imports", "body": "<p>During the compilation, TypeScript can generate helpers like <code>__extends</code> to make sure the related feature will work in runtime. You can think of them as polyfills. </p>\n\n<p>By default, helpers will be inlined in every file that needs them. In your case, that's every file that uses the <code>extends</code> clause.</p>\n\n<p>You can opt out of this behavior and supply the required helpers yourself \u2014 only this time they will be imported just once. Use the <code>--importHelpers</code> to make TypeScript pull them from <code>tslib</code> for you.</p>\n\n<p><strong><code>tsconfig.json</code></strong></p>\n\n<pre><code>\n{\n  \"compilerOptions\": {\n    ...\n    \"importHelpers\": true,\n    ...\n  }    \n}\n</code></pre>\n\n<p>Remember to install <code>tslib</code> in your project:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>npm install tslib\n</code></pre>\n\n<p>Read more about compiler options in the <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"nofollow noreferrer\">Handbook</a>.</p>\n"}], "owner": {"reputation": 2620, "user_id": 2884250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d880b0bfc6c878de208f1cc98b90e49a?s=128&d=identicon&r=PG&f=1", "display_name": "beek", "link": "https://stackoverflow.com/users/2884250/beek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 54101919, "answer_count": 1, "score": 0, "last_activity_date": 1547068017, "creation_date": 1546980753, "question_id": 54099513, "link": "https://stackoverflow.com/questions/54099513/typescript-keeps-adding-a-function-above-the-imports", "title": "Typescript keeps adding a function above the imports", "body": "<p>When typescript compiles the Javascript it's adding this function at the top</p>\n\n<pre><code>var __extends = (this &amp;&amp; this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array &amp;&amp; function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { PortWidget } from \"storm-react-diagrams\";\n</code></pre>\n\n<p>So then I get the error</p>\n\n<blockquote>\n  <p>Line 14:  Import in body of module; reorder to top  import/first</p>\n</blockquote>\n\n<p>Here is my tsconfig.json</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es5\",\n    \"lib\": [\n      \"es6\",\n      \"dom\"\n    ],\n    \"sourceMap\": false,\n    \"allowJs\": true,\n    \"jsx\": \"preserve\",\n    \"noImplicitReturns\": false,\n    \"noImplicitThis\": false,\n    \"noImplicitAny\": false,\n    \"strictNullChecks\": false,\n    \"skipLibCheck\": true,\n    \"strict\": false,\n    \"suppressImplicitAnyIndexErrors\": true,\n    \"noUnusedLocals\": false,\n    \"watch\": true,\n    \"experimentalDecorators\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"esModuleInterop\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"node\",\n    // \"resolveJsonModule\": true,\n    //\"noEmit\": true,\n    \"isolatedModules\": true\n  },\n  \"exclude\": [\n    \"node_modules\",\n    \"build\",\n    \"desktop\",\n    \"public\",\n    \"mobile\",\n    \"tests\",\n    \"src/player/*\"\n  ],\n  \"include\": [\n    \"src/admin/react\"\n  ]\n}\n</code></pre>\n\n<p>Any idea how I fix this? </p>\n\n<p>I can't see why this extend function is getting added each time. </p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1546982502, "post_id": 54099374, "comment_id": 95032579, "body": "Replace the %40 with @."}], "answers": [{"tags": [], "owner": {"reputation": 920, "user_id": 2149703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AawkF.jpg?s=128&g=1", "display_name": "Bill Turner", "link": "https://stackoverflow.com/users/2149703/bill-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1546982596, "creation_date": 1546982596, "answer_id": 54099915, "question_id": 54099374, "link": "https://stackoverflow.com/questions/54099374/40-keeps-changing-to-2540-when-using-safeurlassembler/54099915#54099915", "title": "%40 keeps changing to %2540 when using SafeUrlAssembler", "body": "<p>SafeUrlAssembler doesn't know that the string has already been \"safed\".  So, the already-escaped '@' ('%40') is read as the string to send.  Since '%' isn't safe, it's escaped to '%25'.</p>\n\n<p>Instead of passing in the already-escaped email address (\"myemail%40gmail.com\"), pass in the regular email address with '@'. (\"myemail@gmail.com\")</p>\n"}], "owner": {"reputation": 442, "user_id": 10316412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fad70ef20b46e67b047bd31c40feaa0?s=128&d=identicon&r=PG&f=1", "display_name": "masu9", "link": "https://stackoverflow.com/users/10316412/masu9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546982596, "creation_date": 1546979974, "question_id": 54099374, "link": "https://stackoverflow.com/questions/54099374/40-keeps-changing-to-2540-when-using-safeurlassembler", "title": "%40 keeps changing to %2540 when using SafeUrlAssembler", "body": "<p>I'm using safe-url-assembler in Angular 5.</p>\n\n<p>I'm passing an email address into this assembler, which calls an API.</p>\n\n<pre><code>const endpoint = SafeUrlAssembler(environment.baseUrl.api)\n  .template(ApiEndpoints.save)\n  .param(\"emailID\", email)\n  .toString();\nconsole.log(endpoint);\nreturn this.http.put&lt;any&gt;(endpoint, httpOptions);\n</code></pre>\n\n<p>The problem is, when I pass the email into the URL, it comes out like \"myemail%2540gmail.com\" instead of \"myemail%40gmail.com\"</p>\n\n<p>Has anyone solved this issue when using safe url assembler?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 1, "creation_date": 1546980321, "post_id": 54099354, "comment_id": 95031673, "body": "<code>XmlRpcRequest</code> doesn&#39;t return anything. you need to invoke it with <code>new</code>"}, {"owner": {"reputation": 335, "user_id": 332559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03c9e73b6189f44fed11250f232caadd?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/332559/shawn"}, "reply_to_user": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1546980526, "post_id": 54099354, "comment_id": 95031753, "body": "I tried that (and I needed new for the Javascript version too), however, I get the following error when I put     new XmlRpcRequest:  &#39;new&#39; expression, whose target lacks a construct signature in TypeScript, implicitly has an &#39;any&#39; type."}, {"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1546980559, "post_id": 54099354, "comment_id": 95031770, "body": "consider making it a <code>class</code>, not a prototype class."}, {"owner": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "edited": false, "score": 0, "creation_date": 1546981365, "post_id": 54099354, "comment_id": 95032109, "body": "Sidenote: <code>typeof null === &quot;object&quot;</code>"}, {"owner": {"reputation": 335, "user_id": 332559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03c9e73b6189f44fed11250f232caadd?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/332559/shawn"}, "reply_to_user": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "edited": false, "score": 0, "creation_date": 1546981477, "post_id": 54099354, "comment_id": 95032163, "body": "@Thomas I&#39;m sorry, I&#39;m not getting your reference to the code?"}, {"owner": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "edited": false, "score": 0, "creation_date": 1546981711, "post_id": 54099354, "comment_id": 95032264, "body": "If <code>data === null</code> then <code>if (!data.constructor.name){</code> will throw an error. Don&#39;t know wether this is an issue for your code; just something that I noticed."}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 332559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03c9e73b6189f44fed11250f232caadd?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/332559/shawn"}, "edited": false, "score": 0, "creation_date": 1546981005, "post_id": 54099533, "comment_id": 95031956, "body": "You are awesome!  It was the fat arrows!"}, {"owner": {"reputation": 335, "user_id": 332559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03c9e73b6189f44fed11250f232caadd?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/332559/shawn"}, "edited": false, "score": 0, "creation_date": 1546981209, "post_id": 54099533, "comment_id": 95032040, "body": "In case other read this, I also needed to add:  new (XmlRpcRequest as any)"}], "tags": [], "owner": {"reputation": 16510, "user_id": 212878, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nMS5a.jpg?s=128&g=1", "display_name": "Samuli Hakoniemi", "link": "https://stackoverflow.com/users/212878/samuli-hakoniemi"}, "is_accepted": true, "score": 0, "last_activity_date": 1546980812, "creation_date": 1546980812, "answer_id": 54099533, "question_id": 54099354, "link": "https://stackoverflow.com/questions/54099354/how-to-call-javascript-from-typescript/54099533#54099533", "title": "How to call JavaScript from TypeScript?", "body": "<p>Here's an answer why you're unable to use fat arrow syntax if you want to access prototype:\n<a href=\"https://teamtreehouse.com/community/does-arrow-function-syntax-works-for-prototype\" rel=\"nofollow noreferrer\">https://teamtreehouse.com/community/does-arrow-function-syntax-works-for-prototype</a></p>\n\n<p>Here's two additional explanations about <code>this</code> with fat arrow syntax: </p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#No_separate_this\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#No_separate_this</a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#Use_of_prototype_property\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#Use_of_prototype_property</a></p>\n\n<p>As a resolution you need to define it with normal function declaration:</p>\n\n<p><code>const XmlRpcRequest = function(url, method) { ... }</code></p>\n\n<p>Alternatively, you could use <strong>class</strong>:</p>\n\n<pre><code>class XmlRpcRequest {\n  constructor(url, method) {\n    ...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 332559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03c9e73b6189f44fed11250f232caadd?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/332559/shawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 54099533, "answer_count": 1, "score": -1, "last_activity_date": 1546993759, "creation_date": 1546979888, "last_edit_date": 1546993759, "question_id": 54099354, "link": "https://stackoverflow.com/questions/54099354/how-to-call-javascript-from-typescript", "title": "How to call JavaScript from TypeScript?", "body": "<p>I have a javascript file that I want to call from typescript.  I fixed one import problem and modified the base function to be recognized in tsc, however, I'm still facing an issue recognizing a declared function prototype in the javascript file. </p>\n\n<p>I do have <code>\"allowJs\": true</code>.</p>\n\n<p>Here is my fileTransfer.ts:</p>\n\n<pre><code>import { XmlRpcRequest } from \"./mimic\";\nconst updateCommentBtn: HTMLButtonElement = document.getElementById(\n    'makeComment',) as HTMLButtonElement;\n\nupdateCommentBtn.addEventListener('click', async () =&gt; {\n    const method = \"MakeComm\";\n    let request:any = XmlRpcRequest(\"http://localhost:1337/RPC2\", method);\n    request.addParam(document.getElementById(\"n1\")).value;\n    request.addParam(document.getElementById(\"n2\")).value;\n    let response = await request.send();\n    console.log(response);\n});\n</code></pre>\n\n<p>And here are the relevant portions of the mimic.js file that I'm importing:</p>\n\n<pre><code>export const XmlRpcRequest = (url, method) =&gt; {\n    this.serviceUrl = url;\n    this.methodName = method;\n    this.crossDomain = false;\n    this.withCredentials = false;   \n    this.params = [];\n    this.headers = {};\n};\n\nXmlRpcRequest.prototype.addParam = (data) =&gt; {\n    // Vars\n    var type = typeof data;\n\n    switch (type.toLowerCase()) {\n    case \"function\":\n        return;\n    case \"object\":\n        if (!data.constructor.name){\n            return;\n        }   \n    }\n    this.params.push(data);\n};\n</code></pre>\n\n<p>tsc compiles the project and the linter does not flag any errors. But, I get the following error in Chrome's console:</p>\n\n<pre><code>mimic.js:8 Uncaught TypeError: Cannot set property 'addParam' of undefined\n</code></pre>\n\n<p>This seems to me like an issue with accessing the exported function's prototype but I'm not quite sure how to fix it.  I should mention that I can run the file just fine in a Javascript only application, I only face this issue going to the Typescript environment.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "is_accepted": false, "score": 4, "last_activity_date": 1546979790, "creation_date": 1546979790, "answer_id": 54099337, "question_id": 54098969, "link": "https://stackoverflow.com/questions/54098969/ts-export-default-functional-component/54099337#54099337", "title": "ts: export default functional component", "body": "<p>It is:</p>\n\n<pre><code>export default (() =&gt; {\n  ...\n}) as React.SFC&lt;props&gt;;\n</code></pre>\n"}], "owner": {"reputation": 80557, "user_id": 578895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8cf27059d3e36cdb21e26d5e1defe8c?s=128&d=identicon&r=PG", "display_name": "Mark Kahn", "link": "https://stackoverflow.com/users/578895/mark-kahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546979790, "creation_date": 1546977933, "question_id": 54098969, "link": "https://stackoverflow.com/questions/54098969/ts-export-default-functional-component", "title": "ts: export default functional component", "body": "<p>Just wondering if I can do this without declaring a separate <code>const</code>:</p>\n\n<pre><code>const MyComponent: React.SFC&lt;props&gt; = () =&gt; {};\nexport default MyComponent\n</code></pre>\n\n<p>I want something like:</p>\n\n<pre><code>export default (MyComponent: React.SFC&lt;props&gt;) = () =&gt; {};\n</code></pre>\n\n<p>but I can't figure out the syntax</p>\n"}, {"tags": ["javascript", "arrays", "typescript", "mapping"], "comments": [{"owner": {"reputation": 13857, "user_id": 4114907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/08NXV.jpg?s=128&g=1", "display_name": "AndrewL64", "link": "https://stackoverflow.com/users/4114907/andrewl64"}, "edited": false, "score": 0, "creation_date": 1546977149, "post_id": 54098776, "comment_id": 95030332, "body": "The posted question does not appear to include <a href=\"https://idownvotedbecau.se/noattempt/\" rel=\"nofollow noreferrer\">any attempt</a> at all to solve the problem. StackOverflow expects you to <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">try to solve your own problem first</a>, as your attempts help us to better understand what you want. Please edit the question to show what you&#39;ve tried, so as to illustrate a specific roadblock you&#39;re running into using a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For more information, please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and take the <a href=\"https://stackoverflow.com/tour\">tour</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8361, "user_id": 439026, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb050c54b891309ffdd14a0e1fdd5e66?s=128&d=identicon&r=PG", "display_name": "zeh", "link": "https://stackoverflow.com/users/439026/zeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547495833, "last_edit_date": 1547495833, "creation_date": 1547495429, "answer_id": 54188217, "question_id": 54098776, "link": "https://stackoverflow.com/questions/54098776/how-to-map-key-and-values-in-typescript/54188217#54188217", "title": "How to map key and values in typescript?", "body": "<p>You <em>could</em> simplify your code to this:</p>\n\n<pre><code>var vehicles = new Array();\n\nvar keys = Object.keys(response.Vehicles);\n\nkeys.forEach(key =&gt; {\n    vehicles.push({ Manufacturer: key, Models: response.Vehicles[name] });\n});\n</code></pre>\n\n<p>No need to loop through <code>Vehicles</code> twice.</p>\n\n<p>In general, however, you can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" rel=\"nofollow noreferrer\"><code>Array.map</code></a> for data transformation like this. Whether that's always \"nicer\" is a bit subjective, but this would work:</p>\n\n<pre><code>const vehicles = Object.keys(response.Vehicles).map((vehicleKey) =&gt; {\n    return {\n        Manufacturer: vehicleKey,\n        Models: response.Vehicles[vehicleKey],\n    }\n});\n</code></pre>\n\n<p>As a rule of thumb, you should only need <code>Array.forEach</code> in JavaScript when you need a side effect, which is not your case; you only need data transformation.</p>\n"}], "owner": {"reputation": 55, "user_id": 7406004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720bf70545a3723ab728b84e9cf9483b?s=128&d=identicon&r=PG&f=1", "display_name": "Dunny", "link": "https://stackoverflow.com/users/7406004/dunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 506, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547495833, "creation_date": 1546976969, "last_edit_date": 1546979699, "question_id": 54098776, "link": "https://stackoverflow.com/questions/54098776/how-to-map-key-and-values-in-typescript", "title": "How to map key and values in typescript?", "body": "<p>I have the following response that I need to map into a useable format in typescript, </p>\n\n<pre><code>response =&gt; {\n\n    Vehicles:\n        BMW: Array(3)\n            0: {ModelName: \"M3\", ModelUid: \"14711\"}\n            1: {ModelName: \"X3\", ModelUid: \"14712\"}\n            2: {ModelName: \"Z4\", ModelUid: \"14713\"}\n\n        Aston Martin: Array(4)\n            0: {ModelName: \"DBS\", ModelUid: \"14742\"}\n            1: {ModelName: \"DB9\", ModelUid: \"14743\"}\n            2: {ModelName: \"V12 Vantage\", ModelUid: \"14744\"}\n            3: {ModelName: \"Virage\", ModelUid: \"14745\"}\n</code></pre>\n\n<p>I've done the below which works, but I think there must be a nicer way.</p>\n\n<pre><code>var vehicles = new Array();\n\nvar keys = Object.keys(response.Vehicles);\n\nkeys.forEach(key =&gt; {\n    vehicles.push({ Manufacturer: key, Models: [] });\n});\n\nfor (var i = 0; i &lt; vehicles.length; i++)\n{\n    var name = vehicles[i].Manufacturer;\n    vehicles[i].Models = response.Vehicles[name];\n}\n</code></pre>\n\n<p>Any help appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["node.js", "typescript", "express", "nestjs"], "answers": [{"comments": [{"owner": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1547022188, "post_id": 54100472, "comment_id": 95043834, "body": "Thanks! it works. but by this method all the &quot;src&quot; folder will be exposed as public right ? is this safe ?"}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1547073602, "post_id": 54100472, "comment_id": 95071433, "body": "I think it only gets exposed when you set <code>useStaticAssets</code> (which you don&#39;t have to). Views should only be accessible when you explicitly expose them via <code>@Render</code>."}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1547683190, "post_id": 54100472, "comment_id": 95280349, "body": "@maroodb not a solution for you?"}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1547811475, "post_id": 54100472, "comment_id": 95330338, "body": "But it does not expose any files publicly unless you explicitly reference them in <code>@Render</code>. And even if you have your views directory next to your src directory, you can access views in the src directory by using relative paths: <code>..&#47;src&#47;my-view</code>, but again only with <code>@Render</code>. So there&#39;s no difference."}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1549023562, "post_id": 54100472, "comment_id": 95765601, "body": "@maroodb I&#39;ve added a better option to my answer. :-)"}, {"owner": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1549027306, "post_id": 54100472, "comment_id": 95767727, "body": "this makes sense!"}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1549303541, "post_id": 54100472, "comment_id": 95846366, "body": "Oh, what happened? Ran into a problem?"}, {"owner": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 1, "creation_date": 1549355779, "post_id": 54100472, "comment_id": 95862266, "body": "Sorry, it was a undesired click :p"}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "edited": false, "score": 0, "creation_date": 1549654864, "post_id": 54100472, "comment_id": 95994637, "body": "The correct typings are available from version v5.7.0"}], "tags": [], "owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "is_accepted": true, "score": 7, "last_activity_date": 1549654817, "last_edit_date": 1549654817, "creation_date": 1546985454, "answer_id": 54100472, "question_id": 54098773, "link": "https://stackoverflow.com/questions/54098773/nestjs-multiple-views-directory/54100472#54100472", "title": "NestJs: multiple views directory", "body": "<h1>Since v5.7.0</h1>\n\n<p>You can set an array of directories:</p>\n\n<pre><code>app.setBaseViewsDir([\n  join(__dirname, '..', 'users/views'), \n  join(__dirname, '..', 'books/views'),\n]);\n</code></pre>\n\n<hr>\n\n<h1>Before v5.7.0</h1>\n\n<p>In express, you can <a href=\"http://expressjs.com/en/4x/api.html#app.set\" rel=\"noreferrer\">set an array of base path directories</a>:</p>\n\n<blockquote>\n  <p>A directory or an array of directories for the application's views. If an array, the views are looked up in the order they occur in the array.</p>\n</blockquote>\n\n<p>However, the typings in nest.js do not allow for an array, see <a href=\"https://github.com/nestjs/nest/issues/1513\" rel=\"noreferrer\">issue</a>. I've created a <a href=\"https://github.com/nestjs/nest/pull/1514\" rel=\"noreferrer\">pull request</a>, that will change that.</p>\n\n<p>Until the pull request is merged, you can do:</p>\n\n<pre><code>app.setBaseViewsDir([\n    join(__dirname, '..', 'users/views'), \n    join(__dirname, '..', 'books/views'),\n  ] as any);\n</code></pre>\n\n<p>As soon as the pull request is merged, you can remove the <code>as any</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3015, "user_id": 8318091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S9Vn3.jpg?s=128&g=1", "display_name": "Saurabh Yadav", "link": "https://stackoverflow.com/users/8318091/saurabh-yadav"}, "edited": false, "score": 0, "creation_date": 1592423963, "post_id": 54599163, "comment_id": 110424306, "body": "iam not able to achieve this, Failed to lookup view"}, {"owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "reply_to_user": {"reputation": 3015, "user_id": 8318091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S9Vn3.jpg?s=128&g=1", "display_name": "Saurabh Yadav", "link": "https://stackoverflow.com/users/8318091/saurabh-yadav"}, "edited": false, "score": 0, "creation_date": 1592424673, "post_id": 54599163, "comment_id": 110424593, "body": "@SaurabhYadav This too general to be answered. Please open a new question and include the relevant code snippets. Also, see the other answer above, maybe this will work for you."}, {"owner": {"reputation": 3015, "user_id": 8318091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S9Vn3.jpg?s=128&g=1", "display_name": "Saurabh Yadav", "link": "https://stackoverflow.com/users/8318091/saurabh-yadav"}, "edited": false, "score": 0, "creation_date": 1592425383, "post_id": 54599163, "comment_id": 110424919, "body": "in main.ts I have set  app.setBaseViewsDir(__dirname);  all thing are same as you have mentioned in answer. I have also created a git repo for this <a href=\"https://github.com/saurabhkhoshya/nestjs-mvc-handlebar\" rel=\"nofollow noreferrer\">github.com/saurabhkhoshya/nestjs-mvc-handlebar</a>"}, {"owner": {"reputation": 3015, "user_id": 8318091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S9Vn3.jpg?s=128&g=1", "display_name": "Saurabh Yadav", "link": "https://stackoverflow.com/users/8318091/saurabh-yadav"}, "edited": false, "score": 0, "creation_date": 1592427026, "post_id": 54599163, "comment_id": 110425624, "body": "it be great if you have any sample for this <a href=\"https://github.com/nestjs/nest/issues/1513\" rel=\"nofollow noreferrer\">github.com/nestjs/nest/issues/1513</a>"}, {"owner": {"reputation": 154, "user_id": 10208733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUJIN.png?s=128&g=1", "display_name": "Jboucly", "link": "https://stackoverflow.com/users/10208733/jboucly"}, "edited": false, "score": 0, "creation_date": 1606747142, "post_id": 54599163, "comment_id": 115047018, "body": "Nice ! Thank for your tricks"}], "tags": [], "owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "is_accepted": false, "score": 3, "last_activity_date": 1549654834, "creation_date": 1549654834, "answer_id": 54599163, "question_id": 54098773, "link": "https://stackoverflow.com/questions/54098773/nestjs-multiple-views-directory/54599163#54599163", "title": "NestJs: multiple views directory", "body": "<p>I'm assuming you have an app structure similar to this:</p>\n\n<pre><code>src\n  main.ts\n  /users\n       users.controller.ts\n       /views\n         my-view.hbs\n  /books\n       books.controller.ts\n       /views\n         my-view.hbs\n</code></pre>\n\n<p>Then you can set the base view dir to <code>src</code>: </p>\n\n<pre><code>app.setBaseViewsDir(__dirname);\n</code></pre>\n\n<p>And reference the view with its relative path in your controllers:</p>\n\n<pre><code>@Controller('users')\nexport class UsersController {\n\n  @Render('users/views/my-view')\n           ^^^^^^^^^^^^^^^^^^^\n  @Get()\n  async getMyView() {\n</code></pre>\n"}], "owner": {"reputation": 838, "user_id": 8514043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saR6D.jpg?s=128&g=1", "display_name": "maroodb", "link": "https://stackoverflow.com/users/8514043/maroodb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2628, "favorite_count": 0, "accepted_answer_id": 54100472, "answer_count": 2, "score": 3, "last_activity_date": 1549654834, "creation_date": 1546976957, "last_edit_date": 1547021129, "question_id": 54098773, "link": "https://stackoverflow.com/questions/54098773/nestjs-multiple-views-directory", "title": "NestJs: multiple views directory", "body": "<p>I am developing an MVC app using nestJs framework, and I used the hbs template-engine.</p>\n\n<p>According to the <a href=\"https://docs.nestjs.com/techniques/mvc\" rel=\"nofollow noreferrer\">documentation</a> I have to use this configuration to make nestjs able to serve views: </p>\n\n<pre><code>async function bootstrap() {\n  const app = await NestFactory.create(ApplicationModule);\n\n  app.useStaticAssets(join(__dirname, '..', 'public'));\n  app.setBaseViewsDir(join(__dirname, '..', 'views'));\n  app.setViewEngine('hbs');\n\n  await app.listen(3000);\n}\n</code></pre>\n\n<p>This configuration assumes that all views are located in one directory (views) but what if every module has its own views? </p>\n"}, {"tags": ["angular", "typescript", "sass"], "comments": [{"owner": {"reputation": 665, "user_id": 8385019, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/80bf458d89705c5c454bf999fe121ccf?s=128&d=identicon&r=PG&f=1", "display_name": "fitzmode", "link": "https://stackoverflow.com/users/8385019/fitzmode"}, "edited": false, "score": 0, "creation_date": 1546976474, "post_id": 54098409, "comment_id": 95030027, "body": "Have you tried using [style] or [ngClass] instead to create bindings of the styles to your <code>.ts</code> instead. ?"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 665, "user_id": 8385019, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/80bf458d89705c5c454bf999fe121ccf?s=128&d=identicon&r=PG&f=1", "display_name": "fitzmode", "link": "https://stackoverflow.com/users/8385019/fitzmode"}, "edited": false, "score": 0, "creation_date": 1546977019, "post_id": 54098409, "comment_id": 95030272, "body": "The issue i was having is not so much in the UI, but the inevitable state of needing to submit the color to a server.  So if i am using classes, how do i get the <i>color</i>&#39;s value out of the class.  Right now I am using the style to do:  <code>[style]=&quot;{&#39;color&#39;: myColorVar&quot;</code> and have myColorVar in my TS, but i was thinking that colors and anything UI oriented should be abstracted to the scss file for ease of updating the uniformity of the app without weird little niche ui color discrepencies being overlooked."}], "answers": [{"comments": [{"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1547047935, "post_id": 54101573, "comment_id": 95059400, "body": "The issue i am trying to get is submit colors to a server, so I am trying to figure out how to store the <code>$primary-color</code> in a js variable in order to submit it in a payload."}], "tags": [], "owner": {"reputation": 43, "user_id": 5924315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hS8a6o4zLpA/AAAAAAAAAAI/AAAAAAAAFxM/eU_1ZWT8sMU/photo.jpg?sz=128", "display_name": "Oyvind Fredstie", "link": "https://stackoverflow.com/users/5924315/oyvind-fredstie"}, "is_accepted": false, "score": 0, "last_activity_date": 1546992807, "creation_date": 1546992807, "answer_id": 54101573, "question_id": 54098409, "link": "https://stackoverflow.com/questions/54098409/can-i-export-sass-variables-and-import-them-into-a-angular-typescript-variables/54101573#54101573", "title": "Can I export Sass variables and import them into a Angular Typescript variables?", "body": "<p>Have you tried to define the colors as variables in src/styles.scss, linking them up with CSS selectors and referencing these selectors in the component html file?</p>\n\n<p>For example:</p>\n\n<pre><code>$primary-color: #333;\n$secondary-color: #777;\n.primary-color {\n   color: $primary-color;\n}\n.secondary-color {\n   color: $secondary-color;\n}\n</code></pre>\n\n<p>And then in your html component:</p>\n\n<pre><code>&lt;p class=\"primary-color\"&gt;Text with primary color&lt;/p&gt;\n&lt;p class=\"secondary-color\"&gt;Text with secondary color&lt;/p&gt;\n</code></pre>\n\n<p>For your interest you can also change the component css to scss by renaming the *.css and updating the StyleUrls reference in the component ts file.</p>\n"}], "owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1655, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1546992807, "creation_date": 1546975473, "last_edit_date": 1546976047, "question_id": 54098409, "link": "https://stackoverflow.com/questions/54098409/can-i-export-sass-variables-and-import-them-into-a-angular-typescript-variables", "title": "Can I export Sass variables and import them into a Angular Typescript variables?", "body": "<p>I have been looking at this for awhile.  I have my application right now as it is.  We have variables defined in the scss for coloring.  I am trying to import the variables into Typescript so I could submit them to servers.</p>\n\n<p>I have a bunch of font and color strings in my Angular component, but i figured to push them into a scss file as it is used for design.  The issue is that I dont know how to fetch the colors.</p>\n\n<p>I saw some people doing something similar in Javascript, but I have currently been unable to reproduce it in Typescript.</p>\n\n<p>Ideally, I want do do:</p>\n\n<p>Scss:</p>\n\n<pre><code>:export { myVariable:#ffffff; }\n</code></pre>\n\n<p>NGTypescript:</p>\n\n<pre><code>import {styles} from \"./styles.scss\";\n</code></pre>\n\n<p>and then do something akin to:</p>\n\n<pre><code>onPostRequest(){ let color = styles.myVariable; ... }\n</code></pre>\n\n<p>When i get to the import line above, it will state: <em>Cannot find module './icon-picker.component.scss'.ts(2307)</em></p>\n\n<p>I have seen in similar examples like React, which does similar, but i am having issues also porting that concept to Angular.  <a href=\"https://github.com/css-modules/css-modules/issues/86\" rel=\"noreferrer\">https://github.com/css-modules/css-modules/issues/86</a> shows concepts I was noticing.  Here is also a Javascript walkthrough which seems to also have issues with: <a href=\"https://til.hashrocket.com/posts/sxbrscjuqu-share-scss-variables-with-javascript\" rel=\"noreferrer\">https://til.hashrocket.com/posts/sxbrscjuqu-share-scss-variables-with-javascript</a></p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1546975392, "post_id": 54098336, "comment_id": 95029541, "body": "What is the end goal here? Do you just want to display the associated departments in a component or something else?"}, {"owner": {"reputation": 249, "user_id": 2283824, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea5148b3679032015ae13ba7e929aee1?s=128&d=identicon&r=PG", "display_name": "Yuniku_123", "link": "https://stackoverflow.com/users/2283824/yuniku-123"}, "reply_to_user": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1546975530, "post_id": 54098336, "comment_id": 95029610, "body": "I want to be able to search  employee by department name and email. I have list of emails and the list of departments id-s. In order to search departments I want to reach their names."}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 1, "creation_date": 1546975658, "post_id": 54098336, "comment_id": 95029671, "body": "You can do that with <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\" rel=\"nofollow noreferrer\">find</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" rel=\"nofollow noreferrer\">filter</a>, and <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\" rel=\"nofollow noreferrer\">some</a>. Give it a shot yourself and see if you can figure it out."}, {"owner": {"reputation": 249, "user_id": 2283824, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea5148b3679032015ae13ba7e929aee1?s=128&d=identicon&r=PG", "display_name": "Yuniku_123", "link": "https://stackoverflow.com/users/2283824/yuniku-123"}, "reply_to_user": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1546975926, "post_id": 54098336, "comment_id": 95029797, "body": "Thanks a lot! I will try and post it :)"}, {"owner": {"reputation": 249, "user_id": 2283824, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea5148b3679032015ae13ba7e929aee1?s=128&d=identicon&r=PG", "display_name": "Yuniku_123", "link": "https://stackoverflow.com/users/2283824/yuniku-123"}, "reply_to_user": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1546977800, "post_id": 54098336, "comment_id": 95030630, "body": "@Igor, I write it on this way: employees.forEach(emp =&gt; { emp.departmentsList.forEach(dep =&gt;         departments.filter(n =&gt; { if(dep==n.id)) { return n.name;}}))}); As you can see I search through employeeList to get departments id and than from departments list I found  name by matching Id from  employeeList :)"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10886089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1744c2882d8bf8a0b47fd13341ec1c?s=128&d=identicon&r=PG&f=1", "display_name": "triedthatalready", "link": "https://stackoverflow.com/users/10886089/triedthatalready"}, "is_accepted": false, "score": 0, "last_activity_date": 1546977310, "creation_date": 1546977310, "answer_id": 54098852, "question_id": 54098336, "link": "https://stackoverflow.com/questions/54098336/angular-6-search-complex-object-inside-list-and-get-name-from-lookup-table/54098852#54098852", "title": "Angular 6 - search complex object inside list and get name from lookup table", "body": "<pre><code>departments = [\n{ id: 1, name: 'dep1' },\n{ id: 2, name: 'dep2' },\n{ id: 3, name: 'dep3' },\n{ id: 4, name: 'dep4' },\n{ id: 5, name: 'dep5' },\n{ id: 6, name: 'dep6' }\n]\nconst valueFromInput = 'dep';\nconst allDepartmentNames = departments.map(department =&gt; department.name);\nconst result = allDepartmentNames.filter(name =&gt; name.includes(valueFromInput));\n\n\n\nconsole.log(result)\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 2283824, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea5148b3679032015ae13ba7e929aee1?s=128&d=identicon&r=PG", "display_name": "Yuniku_123", "link": "https://stackoverflow.com/users/2283824/yuniku-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546980019, "creation_date": 1546975227, "last_edit_date": 1546980019, "question_id": 54098336, "link": "https://stackoverflow.com/questions/54098336/angular-6-search-complex-object-inside-list-and-get-name-from-lookup-table", "title": "Angular 6 - search complex object inside list and get name from lookup table", "body": "<p>I want to search list of complex object.</p>\n\n<p>My list looks like:</p>\n\n<pre><code>  private employees: Employee[] = [\n    {\n      name: 'Mary Jay',\n      departmentsList: [1, 2, 3], //those are Id-s of departments from the list below\n      emailList: [ 'emp1@gamil.com', 'emp2@gmail.com', 'emp3@gmail.com' ]\n    }\n  ];\n\n\n   private departments: Department[] = [\n    { id: 1, name: 'dep1' },\n    { id: 2, name: 'dep2' },\n    { id: 3, name: 'dep3' },\n    { id: 4, name: 'dep4' },\n    { id: 5, name: 'dep5' },\n    { id: 6, name: 'dep6' }\n  ];\n</code></pre>\n\n<p>What I want to achieve is to implement search filter by department name and email.</p>\n\n<p>Does anyone have the idea how to get department name from lookup table iterting through this list of complex objects? Using this I would be able to search throug list of emails and list of departments using their names.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "json", "angular", "typescript", "angular6"], "comments": [{"owner": {"reputation": 7168, "user_id": 640053, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96fc923031cbec3fe58b7535229a179b?s=128&d=identicon&r=PG", "display_name": "Christian Benseler", "link": "https://stackoverflow.com/users/640053/christian-benseler"}, "edited": false, "score": 3, "creation_date": 1546974422, "post_id": 54098104, "comment_id": 95029056, "body": "Please post how you are consuming this json (a service? importing it from an external file?). In other words, show your javascript/angular code."}, {"owner": {"reputation": 1, "user_id": 10885996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd54a6cd71ee9bce4787239a748699e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark letterman", "link": "https://stackoverflow.com/users/10885996/mark-letterman"}, "reply_to_user": {"reputation": 7168, "user_id": 640053, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96fc923031cbec3fe58b7535229a179b?s=128&d=identicon&r=PG", "display_name": "Christian Benseler", "link": "https://stackoverflow.com/users/640053/christian-benseler"}, "edited": false, "score": 0, "creation_date": 1547056334, "post_id": 54098104, "comment_id": 95064321, "body": "no from a file that exist in my project ."}, {"owner": {"reputation": 1, "user_id": 10885996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd54a6cd71ee9bce4787239a748699e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark letterman", "link": "https://stackoverflow.com/users/10885996/mark-letterman"}, "reply_to_user": {"reputation": 7168, "user_id": 640053, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96fc923031cbec3fe58b7535229a179b?s=128&d=identicon&r=PG", "display_name": "Christian Benseler", "link": "https://stackoverflow.com/users/640053/christian-benseler"}, "edited": false, "score": 0, "creation_date": 1547060732, "post_id": 54098104, "comment_id": 95066180, "body": "btw i just edited the post if you like to recheck"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10886089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1744c2882d8bf8a0b47fd13341ec1c?s=128&d=identicon&r=PG&f=1", "display_name": "triedthatalready", "link": "https://stackoverflow.com/users/10886089/triedthatalready"}, "is_accepted": false, "score": 0, "last_activity_date": 1546975767, "creation_date": 1546975767, "answer_id": 54098490, "question_id": 54098104, "link": "https://stackoverflow.com/questions/54098104/angular-6-convert-json-to-array/54098490#54098490", "title": "Angular 6 - Convert JSON to array", "body": "<pre><code>var data = [\n  {\n    \"orderNumber\": 1,\n    \"orderTable\": \"905503111-9\",\n    \"orderDescription\": \"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\",\n    \"orderDate\": \"5/4/2018\",\n    \"orderPrice\": 79\n  }\n];\nvar newData = {\n    \"orderNumber\": 1,\n    \"orderTable\": \"905503111-9\",\n    \"orderDescription\": \"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\",\n    \"orderDate\": \"5/4/2018\",\n    \"orderPrice\": 79\n  };\n\ndata.push(newData)\nconsole.log(newData);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 6127672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-je6bPMk85QQ/AAAAAAAAAAI/AAAAAAAAAFc/7zs07ctRIMo/photo.jpg?sz=128", "display_name": "Auqib Rather", "link": "https://stackoverflow.com/users/6127672/auqib-rather"}, "is_accepted": false, "score": 0, "last_activity_date": 1547015537, "creation_date": 1547015537, "answer_id": 54104387, "question_id": 54098104, "link": "https://stackoverflow.com/questions/54098104/angular-6-convert-json-to-array/54104387#54104387", "title": "Angular 6 - Convert JSON to array", "body": "<p>you can do it simply like this and make sure name is same as data</p>\n\n<pre><code> data=[\n {\n\"orderNumber\": 1,\n\"orderTable\": \"905503111-9\",\n\"orderDescription\": \"Nullam porttitor lacus at turpis. Donec posuere metus vitae  ipsum. Aliquam non mauris.\",\n\"orderDate\": \"5/4/2018\",\n\"orderPrice\": 79\n}\n];\nlet d={data}\n\nconsole.log(d)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>let d={}\n d.data=[\n{\n\"orderNumber\": 1,\n\"orderTable\": \"905503111-9\",\n\"orderDescription\": \"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\",\n\"orderDate\": \"5/4/2018\",\n\"orderPrice\": 79\n}\n]\nconsole.log(d)\n</code></pre>\n\n<p>you will get the desired output</p>\n"}], "owner": {"reputation": 1, "user_id": 10885996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd54a6cd71ee9bce4787239a748699e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark letterman", "link": "https://stackoverflow.com/users/10885996/mark-letterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 998, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547060201, "creation_date": 1546974216, "last_edit_date": 1547060201, "question_id": 54098104, "link": "https://stackoverflow.com/questions/54098104/angular-6-convert-json-to-array", "title": "Angular 6 - Convert JSON to array", "body": "<p>Hellog guys , i am trying to convert json data to object array for add these data to kendo grid but i am getting this error </p>\n\n<p><strong>Uncaught (in promise): TypeError: Cannot read property 'slice' of undefined</strong></p>\n\n<p>This error mean my data format isn't correct !.</p>\n\n<p>This how data in json file are :</p>\n\n<pre><code>[\n  {\n    \"orderNumber\": 1,\n    \"orderTable\": \"905503111-9\",\n    \"orderDescription\": \"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\",\n    \"orderDate\": \"5/4/2018\",\n    \"orderPrice\": 79\n  }\n]\n</code></pre>\n\n<p>But i want them to be like this :</p>\n\n<pre><code>{\n  \"data\": [\n    {\n      \"orderNumber\": 1,\n      \"orderTable\": \"905503111-9\",\n      \"orderDescription\": \"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\",\n      \"orderDate\": \"5/4/2018\",\n      \"orderPrice\": 79\n    }\n  ],\n}\n</code></pre>\n\n<p>Here an example of how i am accessing json file (orders.ts)</p>\n\n<pre><code>import { orders } from './orders';\nimport { employees } from '../employee/employees';\n\n@Component({\n  selector: 'app-order',\n  templateUrl: './order.component.html',\n  styleUrls: ['./order.component.css']\n})\nexport class OrderComponent implements OnInit {\n  public result;\n  public data = orders;\n}\n</code></pre>\n\n<p>I tried many solutions like json.parse() and json.stringify() but didn't get what i need. </p>\n\n<p>Note : I am using json file (orders.ts) that exist in my project.</p>\n"}]