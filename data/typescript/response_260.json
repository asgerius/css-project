[{"tags": ["javascript", "reactjs", "typescript", "eslint", "storybook"], "comments": [{"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577835269, "post_id": 59549122, "comment_id": 105267347, "body": "Have you seen this? <a href=\"https://github.com/typescript-eslint/typescript-eslint/issues/379\" rel=\"nofollow noreferrer\">github.com/typescript-eslint/typescript-eslint/issues/379</a> Also, if you can find the json file for you eslint, you can just add the rule to see if that resolves."}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "reply_to_user": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577835436, "post_id": 59549122, "comment_id": 105267368, "body": "@mwilson With <code>create-react-app</code> I think the <code>.eslintrc</code> file is hidden from me. So I just have to find that JSON file and add the rule?"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577835539, "post_id": 59549122, "comment_id": 105267378, "body": "Yea, I&#39;m not sure if that app uses something different, but usually there is a file called <code>tslint.json</code> which is just a json file with TypeScript lint rules. If you have this in a repo somewhere, I can take a look"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577835650, "post_id": 59549122, "comment_id": 105267391, "body": "The error message is kind of confusing though. ES screams JavaScript, but <code>no-implicit-any</code> is a TypeScript thing. Since it&#39;s hanging off the <code>@typescript-eslint</code> path, I&#39;m assuming you&#39;re working with TypeScript"}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "reply_to_user": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577836043, "post_id": 59549122, "comment_id": 105267433, "body": "@mwilson yes I am! Still trying to find these files. I haven&#39;t created them manually, so I assume they&#39;re generated somewhere"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577836391, "post_id": 59549122, "comment_id": 105267486, "body": "It should be at the root. According to the docs, I think you&#39;re looking for <code>.eslintrc.js</code> (<a href=\"https://github.com/typescript-eslint/typescript-eslint/blob/master/docs/getting-started/linting/README.md\" rel=\"nofollow noreferrer\">github.com/typescript-eslint/typescript-eslint/blob/master/&zwnj;&#8203;docs/&hellip;</a>)"}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "reply_to_user": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577837034, "post_id": 59549122, "comment_id": 105267551, "body": "@mwilson I am still getting the same error even after adding the <code>.eslintrc.js</code> file to the root of my project. My project runs fine on it&#39;s own but with <code>yarn storybook</code> this error is produced"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1577837288, "post_id": 59549122, "comment_id": 105267580, "body": "Looks like there should be a <code>.eslintrc.json</code> file as well (this is the thing that should hold the rules). Do you see that? (<a href=\"https://eslint.org/docs/user-guide/configuring\" rel=\"nofollow noreferrer\">eslint.org/docs/user-guide/configuring</a>)"}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "reply_to_user": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 1, "creation_date": 1577856353, "post_id": 59549122, "comment_id": 105269291, "body": "@mwilson I added .eslintrc.json and it worked! You answer the question and I will mark it! Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "is_accepted": true, "score": 3, "last_activity_date": 1577916959, "creation_date": 1577916959, "answer_id": 59556532, "question_id": 59549122, "link": "https://stackoverflow.com/questions/59549122/definition-for-rule-typescript-eslint-no-implicit-any-was-not-found-with-stor/59556532#59556532", "title": "Definition for rule &#39;@typescript-eslint/no-implicit-any&#39; was not found with Storybook js", "body": "<p>It sounds like you're missing the <code>.eslintrc.json</code> file which describes the rules. You can read more about the file format and options here: <a href=\"https://eslint.org/docs/user-guide/configuring\" rel=\"nofollow noreferrer\">https://eslint.org/docs/user-guide/configuring</a></p>\n\n<p>Example:</p>\n\n<pre><code>{\n    \"parserOptions\": {\n        \"ecmaVersion\": 6,\n        \"sourceType\": \"module\",\n        \"ecmaFeatures\": {\n            \"jsx\": true\n        }\n    },\n    \"rules\": {\n        \"semi\": \"error\"\n    }\n}\n</code></pre>\n\n<p>If the error still occurs, try configuring the <code>no-implicit-any</code> rule. </p>\n"}], "owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4221, "favorite_count": 2, "accepted_answer_id": 59556532, "answer_count": 1, "score": 2, "last_activity_date": 1577916959, "creation_date": 1577834997, "last_edit_date": 1577849163, "question_id": 59549122, "link": "https://stackoverflow.com/questions/59549122/definition-for-rule-typescript-eslint-no-implicit-any-was-not-found-with-stor", "title": "Definition for rule &#39;@typescript-eslint/no-implicit-any&#39; was not found with Storybook js", "body": "<p>I am getting this error when I make changes to the generated code from running <code>Storybook.js</code>. These are the instructions I am following</p>\n\n<p><a href=\"https://gist.github.com/shilman/bc9cbedb2a7efb5ec6710337cbd20c0c\" rel=\"nofollow noreferrer\">https://gist.github.com/shilman/bc9cbedb2a7efb5ec6710337cbd20c0c</a></p>\n\n<p>But because I am adding <code>StorybookJS</code> to an existing project, the only commands I've ran are:</p>\n\n<pre><code>$ npx -p @storybook/cli@next sb init --story-format=csf-ts\n$ yarn add @storybook/addon-docs@next --dev\n</code></pre>\n\n<p>Running <code>yarn storybook</code> produces this error. </p>\n\n<pre><code>ERROR in ./src/stories/0-Welcome.stories.tsx\nModule Error (from ./node_modules/eslint-loader/dist/cjs.js):\n\n  Line 5:1:   Definition for rule '@typescript-eslint/no-implicit-any' was not found  @typescript-eslint/no-implicit-any\n  Line 24:1:  Definition for rule '@typescript-eslint/no-implicit-any' was not found  @typescript-eslint/no-implicit-any\n</code></pre>\n\n<p>The storybook server runs fine but as soon as I make changes to some text and <code>Storybook</code> tries to reload the changes, I get the error seen above.</p>\n\n<p>There is a lot of magic that happens behind the scenes of <code>create-react-app</code> so I am unaware of how to pinpoint and fix this error. My guess is that a <code>eslint typescript rule</code> is missing so upon <code>Storybook</code> reloading any type of change, the missing rule error occurs</p>\n\n<p><a href=\"https://i.stack.imgur.com/tKMjm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tKMjm.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "typescript", "floating-point"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 4, "creation_date": 1577835101, "post_id": 59549115, "comment_id": 105267332, "body": "Your data should contain <i>numbers</i>, not strings with numbers in them, ideally. And what you&#39;re seeing is normal computer (not just JavaScript) floating-point math."}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1577839250, "post_id": 59549115, "comment_id": 105267776, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 10697827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76311db7b289ce06c061d267ee2697d5?s=128&d=identicon&r=PG&f=1", "display_name": "Invic18", "link": "https://stackoverflow.com/users/10697827/invic18"}, "edited": false, "score": 0, "creation_date": 1577902832, "post_id": 59549195, "comment_id": 105278512, "body": "this did work for a bit but when I hooked it into my pie chart some of the floating points added  excess numbers behind the decimal. I think the roundDigit function that the other guy provided protected against this. Thanks for your submission though!"}], "tags": [], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1577836311, "creation_date": 1577836311, "answer_id": 59549195, "question_id": 59549115, "link": "https://stackoverflow.com/questions/59549115/sum-of-floating-point-numbers-in-objects-typescript/59549195#59549195", "title": "Sum of Floating Point numbers in Objects. ( Typescript )", "body": "<p>You can use your current dataset and run it through an <code>Array.reduce</code> function so add your numbers up. I'm a little unclear on the desired output so the below example spits out an object of protein, carbs, fat and calories.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const data = [{\"upload_date\":\"2019-12-31T21:41:42.943Z\",\"item\":\"hot_dog\",\"protein_content\":\"10.00\",\"carb_content\":\"25.00\",\"fat_content\":\"15.00\",\"calories\":\"1170.00\"},{\"upload_date\":\"2019-12-31T21:41:56.604Z\",\"item\":\"fried_rice\",\"protein_content\":\"3.50\",\"carb_content\":\"64.30\",\"fat_content\":\"28.00\",\"calories\":\"2188.00\"},{\"upload_date\":\"2019-12-31T21:43:06.372Z\",\"item\":\"greek_salad\",\"protein_content\":\"6.60\",\"carb_content\":\"10.30\",\"fat_content\":\"19.40\",\"calories\":\"1079.00\"},{\"upload_date\":\"2019-12-31T21:42:56.577Z\",\"item\":\"fried_rice\",\"protein_content\":\"3.50\",\"carb_content\":\"64.30\",\"fat_content\":\"28.00\",\"calories\":\"2188.00\"},{\"upload_date\":\"2019-12-31T21:42:45.559Z\",\"item\":\"steak\",\"protein_content\":\"25.10\",\"carb_content\":\"0.00\",\"fat_content\":\"0.50\",\"calories\":\"445.00\"},{\"upload_date\":\"2019-12-31T21:42:28.609Z\",\"item\":\"hot_dog\",\"protein_content\":\"10.00\",\"carb_content\":\"25.00\",\"fat_content\":\"15.00\",\"calories\":\"1170.00\"},{\"upload_date\":\"2019-12-31T21:42:15.793Z\",\"item\":\"steak\",\"protein_content\":\"25.10\",\"carb_content\":\"0.00\",\"fat_content\":\"0.50\",\"calories\":\"445.00\"},{\"upload_date\":\"2019-12-31T21:42:05.049Z\",\"item\":\"greek_salad\",\"protein_content\":\"6.60\",\"carb_content\":\"10.30\",\"fat_content\":\"19.40\",\"calories\":\"1079.00\"}];\r\n\r\nconst result = data.reduce( (acc, curr) =&gt; {\r\n  acc.protein_content += parseFloat(curr['protein_content']);\r\n  acc.carb_content += parseFloat(curr['carb_content']);\r\n  acc.fat_content += parseFloat(curr['fat_content']);\r\n  acc.calories += parseFloat(curr['calories']);\r\n  return acc;\r\n}, {protein_content: 0, carb_content: 0, fat_content: 0, calories: 0});\r\n\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 10697827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76311db7b289ce06c061d267ee2697d5?s=128&d=identicon&r=PG&f=1", "display_name": "Invic18", "link": "https://stackoverflow.com/users/10697827/invic18"}, "edited": false, "score": 0, "creation_date": 1577902713, "post_id": 59549251, "comment_id": 105278481, "body": "This one worked basically out of the box for me. The other example although an improvement required me to make some modifications but ultimately I had some extra floating point numbers when hooked into my pie chart. Thanks @pascalpuetz"}], "tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": true, "score": 1, "last_activity_date": 1577837544, "creation_date": 1577837544, "answer_id": 59549251, "question_id": 59549115, "link": "https://stackoverflow.com/questions/59549115/sum-of-floating-point-numbers-in-objects-typescript/59549251#59549251", "title": "Sum of Floating Point numbers in Objects. ( Typescript )", "body": "<p>JavaScript floating point math is subject to inacuracies, as you can see in <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">this issue</a>.</p>\n\n<p>You can just round to the desired digit by using the following:</p>\n\n<pre><code>const dietInfo =  [{\"upload_date\":\"2019-12-31T21:41:42.943Z\",\"item\":\"hot_dog\",\"protein_content\":\"10.00\",\"carb_content\":\"25.00\",\"fat_content\":\"15.00\",\"calories\":\"1170.00\"},{\"upload_date\":\"2019-12-31T21:41:56.604Z\",\"item\":\"fried_rice\",\"protein_content\":\"3.50\",\"carb_content\":\"64.30\",\"fat_content\":\"28.00\",\"calories\":\"2188.00\"},{\"upload_date\":\"2019-12-31T21:43:06.372Z\",\"item\":\"greek_salad\",\"protein_content\":\"6.60\",\"carb_content\":\"10.30\",\"fat_content\":\"19.40\",\"calories\":\"1079.00\"},{\"upload_date\":\"2019-12-31T21:42:56.577Z\",\"item\":\"fried_rice\",\"protein_content\":\"3.50\",\"carb_content\":\"64.30\",\"fat_content\":\"28.00\",\"calories\":\"2188.00\"},{\"upload_date\":\"2019-12-31T21:42:45.559Z\",\"item\":\"steak\",\"protein_content\":\"25.10\",\"carb_content\":\"0.00\",\"fat_content\":\"0.50\",\"calories\":\"445.00\"},{\"upload_date\":\"2019-12-31T21:42:28.609Z\",\"item\":\"hot_dog\",\"protein_content\":\"10.00\",\"carb_content\":\"25.00\",\"fat_content\":\"15.00\",\"calories\":\"1170.00\"},{\"upload_date\":\"2019-12-31T21:42:15.793Z\",\"item\":\"steak\",\"protein_content\":\"25.10\",\"carb_content\":\"0.00\",\"fat_content\":\"0.50\",\"calories\":\"445.00\"},{\"upload_date\":\"2019-12-31T21:42:05.049Z\",\"item\":\"greek_salad\",\"protein_content\":\"6.60\",\"carb_content\":\"10.30\",\"fat_content\":\"19.40\",\"calories\":\"1079.00\"}];\n\nconst {protein, calories, carbs, fat} = dietInfo.reduce((res, entry) =&gt; ({ \n     res.protein += +entry.protein_content, // The \"+\" operator transforms a string containing a number to an actual number\n     res.calories += +entry.calories\n     res.carbs += +entry.carbs_content,\n     res.fat += +entry.fat_content\n}), {protein: 0, calories: 0, carbs: 0, fat: 0});\n\n// Function to round to a specific digit or less\nconst roundToDigit = (num, digits) =&gt; (Math.round(num * Math.pow(10, digits) + Number.EPSILON) / Math.pow(10, digits)); \n\nthis.protein = roundToDigit(protein, 1);\nthis.calories = roundToDigit(calories, 1);\nthis.carbs = roundToDigit(carbs, 1);\nthis.fat = roundToDigit(fat, 1);\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10697827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76311db7b289ce06c061d267ee2697d5?s=128&d=identicon&r=PG&f=1", "display_name": "Invic18", "link": "https://stackoverflow.com/users/10697827/invic18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 59549251, "answer_count": 2, "score": 0, "last_activity_date": 1577837544, "creation_date": 1577834900, "question_id": 59549115, "link": "https://stackoverflow.com/questions/59549115/sum-of-floating-point-numbers-in-objects-typescript", "title": "Sum of Floating Point numbers in Objects. ( Typescript )", "body": "<p>I am trying to get the sum my floating point values, I am getting very weird output like 8 decimal places and other undesired results. What I want to do is just add all the objects protein values for example into a sum i.e 200.1</p>\n\n<p>**</p>\n\n<h2>DATA</h2>\n\n<p>**</p>\n\n<p>**</p>\n\n<pre><code>[{\"upload_date\":\"2019-12-31T21:41:42.943Z\",\"item\":\"hot_dog\",\"protein_content\":\"10.00\",\"carb_content\":\"25.00\",\"fat_content\":\"15.00\",\"calories\":\"1170.00\"},{\"upload_date\":\"2019-12-31T21:41:56.604Z\",\"item\":\"fried_rice\",\"protein_content\":\"3.50\",\"carb_content\":\"64.30\",\"fat_content\":\"28.00\",\"calories\":\"2188.00\"},{\"upload_date\":\"2019-12-31T21:43:06.372Z\",\"item\":\"greek_salad\",\"protein_content\":\"6.60\",\"carb_content\":\"10.30\",\"fat_content\":\"19.40\",\"calories\":\"1079.00\"},{\"upload_date\":\"2019-12-31T21:42:56.577Z\",\"item\":\"fried_rice\",\"protein_content\":\"3.50\",\"carb_content\":\"64.30\",\"fat_content\":\"28.00\",\"calories\":\"2188.00\"},{\"upload_date\":\"2019-12-31T21:42:45.559Z\",\"item\":\"steak\",\"protein_content\":\"25.10\",\"carb_content\":\"0.00\",\"fat_content\":\"0.50\",\"calories\":\"445.00\"},{\"upload_date\":\"2019-12-31T21:42:28.609Z\",\"item\":\"hot_dog\",\"protein_content\":\"10.00\",\"carb_content\":\"25.00\",\"fat_content\":\"15.00\",\"calories\":\"1170.00\"},{\"upload_date\":\"2019-12-31T21:42:15.793Z\",\"item\":\"steak\",\"protein_content\":\"25.10\",\"carb_content\":\"0.00\",\"fat_content\":\"0.50\",\"calories\":\"445.00\"},{\"upload_date\":\"2019-12-31T21:42:05.049Z\",\"item\":\"greek_salad\",\"protein_content\":\"6.60\",\"carb_content\":\"10.30\",\"fat_content\":\"19.40\",\"calories\":\"1079.00\"}]\n</code></pre>\n\n<h2>CODE</h2>\n\n<p>**</p>\n\n<pre><code>for(let i = 0; i &lt; dietInfo.length; i++) {\n     this.protein +=  dietInfo[i].protein_content\n     this.calories += parseFloat(dietInfo[i].calories)\n     this.carbs += parseFloat(dietInfo[i].carbs_content)\n     this.fat += parseFloat(dietInfo[i].fat_content)\n    //  this.protein = parseFloat(this.protein).toFixed(1)\n}\nconsole.log('before:', this.protein);\n// round of inaccuracies, assuming decimals\nthis.protein = Math.round(this.protein*100000000)/100000000;\nconsole.log('after:', this.protein);\n</code></pre>\n"}, {"tags": ["angular", "typescript", "http", "spotify", "bearer-token"], "comments": [{"owner": {"reputation": 4632, "user_id": 674906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Qo3i.jpg?s=128&g=1", "display_name": "scgough", "link": "https://stackoverflow.com/users/674906/scgough"}, "edited": false, "score": 0, "creation_date": 1577973263, "post_id": 59548993, "comment_id": 105296799, "body": "You can (with the right &#39;scope&#39;) retrieve a list of the Artists the user is following but you cannot retrieve a list of the users they follow."}, {"owner": {"reputation": 499, "user_id": 6106289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cb582b3f9d3d0e938ee41600b2cc6088?s=128&d=identicon&r=PG&f=1", "display_name": "skyleguy", "link": "https://stackoverflow.com/users/6106289/skyleguy"}, "reply_to_user": {"reputation": 4632, "user_id": 674906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Qo3i.jpg?s=128&g=1", "display_name": "scgough", "link": "https://stackoverflow.com/users/674906/scgough"}, "edited": false, "score": 0, "creation_date": 1578004554, "post_id": 59548993, "comment_id": 105309468, "body": "yikes, then doing what I want to do just got a lot harder /: I guess I&#39;ll have to maintain a list of user ids that have signed into my app and then have my own search function to find users by name and have a lookup to their ID that way. Thanks for the information!"}], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 6106289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cb582b3f9d3d0e938ee41600b2cc6088?s=128&d=identicon&r=PG&f=1", "display_name": "skyleguy", "link": "https://stackoverflow.com/users/6106289/skyleguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1578004602, "creation_date": 1578004602, "answer_id": 59570922, "question_id": 59548993, "link": "https://stackoverflow.com/questions/59548993/how-to-get-user-ids-of-current-users-followers-with-the-spotify-web-api/59570922#59570922", "title": "How to get user ids of current user&#39;s followers with the spotify web api?", "body": "<p>As scgough said in the comments, it appears that with the right scope set I could get a list of the Artists the user is following, but no scope will allow me to get a list of the current user's the user is following (other than just the number).</p>\n"}], "owner": {"reputation": 499, "user_id": 6106289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cb582b3f9d3d0e938ee41600b2cc6088?s=128&d=identicon&r=PG&f=1", "display_name": "skyleguy", "link": "https://stackoverflow.com/users/6106289/skyleguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578004602, "creation_date": 1577832935, "question_id": 59548993, "link": "https://stackoverflow.com/questions/59548993/how-to-get-user-ids-of-current-users-followers-with-the-spotify-web-api", "title": "How to get user ids of current user&#39;s followers with the spotify web api?", "body": "<p>Seems simple enough but can't seem to find how to get user ids my current user's followers in their documentation?</p>\n\n<p>The related documentation is located here:</p>\n\n<p><a href=\"https://developer.spotify.com/documentation/web-api/reference-beta/#category-user-profile\" rel=\"nofollow noreferrer\">https://developer.spotify.com/documentation/web-api/reference-beta/#category-user-profile</a></p>\n\n<p>It states that calling their '<a href=\"https://api.spotify.com/v1/me\" rel=\"nofollow noreferrer\">https://api.spotify.com/v1/me</a>' endpoint I can retrieve the current user's profile based on the authorization token I send. However the only information about user's followers is simply the number of followers they have. I would like to be able to retrieve my logged in user's followers and then use their follower's user ids to make other api calls (which seems fine as long as the other users have also allowed my application access to their data).</p>\n\n<p>Am I missing a scope in my initial authorization request that is hiding this information? Can I not see this information because the followers of my current user have not allowed permission to my application? Is there a different endpoint I need to use in order to retrieve this information?</p>\n\n<p>If this information is needed, I have used the Implicit Grant Flow Model with my Angular frontend to retrieve my bearer token.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 4350389, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e17af375747ecd10953cccd45647a7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user6680", "link": "https://stackoverflow.com/users/4350389/user6680"}, "edited": false, "score": 0, "creation_date": 1577830427, "post_id": 59548587, "comment_id": 105266599, "body": "This <code>{{1578069935 &gt; this.today}}</code> evaluates to false. When I put  this.today = +(new Date());  in ngOnInit. It should be true"}, {"owner": {"reputation": 1335, "user_id": 1037613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3YUq.png?s=128&g=1", "display_name": "Oded BD", "link": "https://stackoverflow.com/users/1037613/oded-bd"}, "reply_to_user": {"reputation": 153, "user_id": 4350389, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e17af375747ecd10953cccd45647a7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user6680", "link": "https://stackoverflow.com/users/4350389/user6680"}, "edited": false, "score": 0, "creation_date": 1577832431, "post_id": 59548587, "comment_id": 105266955, "body": "Just saw that your time is by seconds, so you need to divide by 1000, updated the answer as well"}], "tags": [], "owner": {"reputation": 1335, "user_id": 1037613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3YUq.png?s=128&g=1", "display_name": "Oded BD", "link": "https://stackoverflow.com/users/1037613/oded-bd"}, "is_accepted": false, "score": 0, "last_activity_date": 1577832320, "last_edit_date": 1577832320, "creation_date": 1577827925, "answer_id": 59548587, "question_id": 59548518, "link": "https://stackoverflow.com/questions/59548518/evaluating-two-epochs-angular/59548587#59548587", "title": "Evaluating two epochs - Angular", "body": "<p>In order to check the times you can convert today time to epoch just like that:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.today = +(new Date()/1000) // divide by 1000 to get seconds\n1576779848 &lt; this.today // true\n</code></pre>\n\n<p>Date in JS is by milliseconds as you can see here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date</a></p>\n"}], "owner": {"reputation": 153, "user_id": 4350389, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e17af375747ecd10953cccd45647a7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user6680", "link": "https://stackoverflow.com/users/4350389/user6680"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577832320, "creation_date": 1577827171, "last_edit_date": 1577830602, "question_id": 59548518, "link": "https://stackoverflow.com/questions/59548518/evaluating-two-epochs-angular", "title": "Evaluating two epochs - Angular", "body": "<p>I've tried evaluating an epoch with another epoch using <code>&lt;</code> but it always returns true or false, which is wrong. I converted them both to dates, but the same issue happens where its all either true or false based on if I use <code>&lt;</code> or <code>&gt;</code> Some are should be true and some should be false. </p>\n\n<pre><code>auctionHasEnded(auctionEndDate: Date) {\n    let date: Date;\n    date = new Date();\n    return new Date(auctionEndDate) &lt; date;\n  }\n\n\n &lt;td [ngStyle]=\"{'width': '55%'}\" id=\"dateReceived\" class=\"tableStyle\" mat-cell *matCellDef=\"let row\"&gt;\n              &lt;span id=\"endDateTimeLabel\" [ngStyle]=\"{'color':row.auctionEndDateTime  &gt; this.today ? 'red' : 'green' }\"&gt;\n                {{auctionHasEnded(row.auctionEndDateTime)}}&lt;/span&gt;&lt;/td&gt;\n          &lt;/ng-container&gt;\n</code></pre>\n\n<p><code>auctionEndDateTime examples from JSON response: 1576779848, 1577379500, 1578069935, 1577999303</code></p>\n\n<p>If I have an epoch, how can I evaluate it? I thought converting it to a date and comparing it to a new Date() would be the way to go, but it doesn't seem to evaluating correctly. I appreciate any help.</p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-platform", "google-cloud-firestore", "google-cloud-functions"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577824105, "post_id": 59548212, "comment_id": 105265463, "body": "I&#39;m curious why you override the types of <code>data</code> and <code>context</code> with <code>any</code>.  They should have their own very well-defined TypeScript types by default and these should help your IDE with autocomplete."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577824188, "post_id": 59548212, "comment_id": 105265481, "body": "Also, you should not try to catch an error here. If init fails, you will just defer another error to a future call to the admin SDK, which will be more difficult to diagnose.  Just let it fail normally with a helpful error message in the log: <code>try { admin.initializeApp() } catch (e) { }</code>"}, {"owner": {"reputation": 1092, "user_id": 10203069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c84b4b20bbd134478e2d1e995ab48cb?s=128&d=identicon&r=PG&f=1", "display_name": "linus_hologram", "link": "https://stackoverflow.com/users/10203069/linus-hologram"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577824362, "post_id": 59548212, "comment_id": 105265518, "body": "@DougStevenson thanks for your help. What should be the right type of data/context? If I remove any, I&#39;m getting an error <code>Parameter &#39;data&#39; implicitly has an &#39;any&#39; type.</code> Also, I&#39;ve split up my code into multiple files, and as far as I know, there must be only one call to initializeApp()? That&#39;s why I put the try/catch there."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577824513, "post_id": 59548212, "comment_id": 105265549, "body": "Make sure your dependencies are all up to date, and you&#39;re using the latest version of TypeScript.  I don&#39;t know what causes that error about &quot;any&quot;, but I&#39;ve never seen it myself.  My projects always are able to correctly infer the type from the TypeScript bindings provided by firebase-functions without having to specify any type information myself."}, {"owner": {"reputation": 1092, "user_id": 10203069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c84b4b20bbd134478e2d1e995ab48cb?s=128&d=identicon&r=PG&f=1", "display_name": "linus_hologram", "link": "https://stackoverflow.com/users/10203069/linus-hologram"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577824634, "post_id": 59548212, "comment_id": 105265571, "body": "@DougStevenson my firebase packages are all up to date, so is typescript?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577824733, "post_id": 59548212, "comment_id": 105265595, "body": "Sorry, I don&#39;t know.  It sounds like something is wrong in your project. Try rebuilding it from scratch.  The types should be inferred, and you should be able to use <code>admin.firestore.FieldValue.increment(1)</code> exactly like that after importing firebase-admin."}, {"owner": {"reputation": 9545, "user_id": 3068190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDAi7.jpg?s=128&g=1", "display_name": "samthecodingman", "link": "https://stackoverflow.com/users/3068190/samthecodingman"}, "edited": false, "score": 2, "creation_date": 1577825632, "post_id": 59548212, "comment_id": 105265766, "body": "@linus_hologram Instead of using <code>try { admin.initializeApp() } catch (e) { }</code>, use <code>if (!admin.apps.length) { admin.initializeApp() }</code>. Unless your app makes use of more than one named application at a time, this is sufficient to test if the Admin SDK has already been initialized and won&#39;t sink any errors thrown by <code>initializeApp</code> if it fails for other reasons."}, {"owner": {"reputation": 9545, "user_id": 3068190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDAi7.jpg?s=128&g=1", "display_name": "samthecodingman", "link": "https://stackoverflow.com/users/3068190/samthecodingman"}, "edited": false, "score": 0, "creation_date": 1577826004, "post_id": 59548212, "comment_id": 105265830, "body": "Out of curiosity as this is a type error, what do you get when you run <code>typeof admin.firestore.FieldValue.increment</code>?"}, {"owner": {"reputation": 1092, "user_id": 10203069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c84b4b20bbd134478e2d1e995ab48cb?s=128&d=identicon&r=PG&f=1", "display_name": "linus_hologram", "link": "https://stackoverflow.com/users/10203069/linus-hologram"}, "reply_to_user": {"reputation": 9545, "user_id": 3068190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDAi7.jpg?s=128&g=1", "display_name": "samthecodingman", "link": "https://stackoverflow.com/users/3068190/samthecodingman"}, "edited": false, "score": 0, "creation_date": 1577826796, "post_id": 59548212, "comment_id": 105265979, "body": "@samthecodingman I&#39;m sorry - just as Doug Stevenson called it, my entire project bricked as I tried to update TypeScript :-/ I&#39;m afraid I can&#39;t tell you what I get there. Probably have to setup a brand new CloudFunctions folder \ud83d\ude2d"}, {"owner": {"reputation": 9545, "user_id": 3068190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDAi7.jpg?s=128&g=1", "display_name": "samthecodingman", "link": "https://stackoverflow.com/users/3068190/samthecodingman"}, "edited": false, "score": 0, "creation_date": 1577826990, "post_id": 59548212, "comment_id": 105266007, "body": "@linus_hologram Have had that problem before - I simply stopped using Typescript :D"}], "owner": {"reputation": 1092, "user_id": 10203069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c84b4b20bbd134478e2d1e995ab48cb?s=128&d=identicon&r=PG&f=1", "display_name": "linus_hologram", "link": "https://stackoverflow.com/users/10203069/linus-hologram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577824293, "creation_date": 1577823952, "last_edit_date": 1577824293, "question_id": 59548212, "link": "https://stackoverflow.com/questions/59548212/typeerror-admin-firestore-fieldvalue-increment-is-not-a-function", "title": "TypeError: admin.firestore.FieldValue.increment is not a function", "body": "<p>in my cloud functions, I'm trying to <strong>increment a value by 1</strong>, using a batched write. This is my code:</p>\n\n<pre><code>const functions = require('firebase-functions')\nconst admin = require('firebase-admin')\ntry { admin.initializeApp() } catch (e) { }\n\nconst db = admin.firestore()\n\nexport const createInteraction = functions.https.onCall(async (data: any, context: any) =&gt; {\n  if (context &amp;&amp; context.auth) {\n    const interactionType = data.interactionType\n    const referencedContent = data.referencedContent\n    const currentUser = context.auth.token.uid\n\n    if (typeof interactionType === \"string\" &amp;&amp; [\"like\", \"reblog\"].includes(interactionType) &amp;&amp; typeof referencedContent === \"string\") {\n      try {\n        const batch = db.batch()\n        const interactionRef = db.collection(\"ugc\").doc()\n\n        batch.set(interactionRef, { cid: interactionRef.id, referencedContent: referencedContent, type: interactionType, uid: currentUser, timestamp: admin.database.ServerValue.TIMESTAMP });\n\n        const nativeContentRef = db.collection(\"ugc\").doc(referencedContent)\n        const increment = admin.firestore.FieldValue.increment(1)\n\n        if (interactionType === \"like\")\n          batch.update(nativeContentRef, { 'likes': increment })\n        else\n          batch.update(nativeContentRef, { 'reblogs': increment })\n\n        await batch.commit()\n        return { code: 200, success: true, message: \"Successfully created the interaction!\" }\n\n      } catch (error) {\n        console.error(\"An error occured trying to create a new interaction:\", error)\n        throw new functions.https.HttpsError('unknown', \"An error happened creating the interaction!\")  \n      }\n    } else { return { code: 400, success: false, message: \"The data attached to this request is invalid. We could not process it.\" }}\n  } else {\n    return { code: 401, success: false, message: 'The request was unauthenticated. We could not process it.'}\n  }\n})\n</code></pre>\n\n<p><strong>This is the error I get:</strong></p>\n\n<blockquote>\n  <p>An error occured trying to create a new interaction:\n  TypeError: admin.firestore.FieldValue.increment is not a function\n      at exports.createInteraction.functions.https.onCall (/srv/lib/interactions.js:21:62)\n      at func (/srv/node_modules/firebase-functions/lib/providers/https.js:320:32)\n      at \n      at process._tickDomainCallback (internal/process/next_tick.js:229:7)</p>\n</blockquote>\n\n<p>I really don't know where the error is - all the approaches recommended in other SO Questions with the same error do not work.</p>\n\n<p>I would be extremely thankful for any help I could get.</p>\n"}, {"tags": ["typescript", "generics", "types", "currying"], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1577847901, "post_id": 59548657, "comment_id": 105268573, "body": "The discussion describes the workaround and a warning that it&#39;s <a href=\"https://github.com/microsoft/TypeScript/issues/26980#issuecomment-566152178\" rel=\"nofollow noreferrer\">not supported</a>.  I&#39;d avoid recommending this for any production code that needs to keep working. Instead I&#39;d usually write an ugly type that specifically only supports some fixed recursion depth, such as, say 5.  (In this case you&#39;d have <code>type FinalReturnType&lt;T&gt; = ...FRT0&lt;T&gt;...</code>, <code>type FRT0&lt;T&gt; = ...FRT1&lt;T&gt;...</code>, all the way to <code>type FRT5&lt;T&gt; = ....</code> where the last one just bails out.) I wish recursive conditional types were supported, but they aren&#39;t."}, {"owner": {"reputation": 108213, "user_id": 27423, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CoNYx.jpg?s=128&g=1", "display_name": "Daniel Earwicker", "link": "https://stackoverflow.com/users/27423/daniel-earwicker"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577877345, "post_id": 59548657, "comment_id": 105272665, "body": "@jcalz thanks for the clarification, have added prominent disclaimer."}, {"owner": {"reputation": 108213, "user_id": 27423, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CoNYx.jpg?s=128&g=1", "display_name": "Daniel Earwicker", "link": "https://stackoverflow.com/users/27423/daniel-earwicker"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1599081894, "post_id": 59548657, "comment_id": 112666927, "body": "Looks like official support for recursive types is on the way: <a href=\"https://github.com/microsoft/TypeScript/pull/40002\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/pull/40002</a>"}], "tags": [], "owner": {"reputation": 108213, "user_id": 27423, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CoNYx.jpg?s=128&g=1", "display_name": "Daniel Earwicker", "link": "https://stackoverflow.com/users/27423/daniel-earwicker"}, "is_accepted": true, "score": 1, "last_activity_date": 1577877209, "last_edit_date": 1577877209, "creation_date": 1577828726, "answer_id": 59548657, "question_id": 59548176, "link": "https://stackoverflow.com/questions/59548176/returntype-of-curried-function/59548657#59548657", "title": "ReturnType of curried function", "body": "<p>This currently works (TS 3.7), but the TS team didn\u2019t intentionally allow it and hasn\u2019t decided to support it. It may break in future versions. </p>\n\n<pre><code>type FinalReturnType&lt;T&gt; = {\n  0: T,\n  1: T extends (...args: any) =&gt; infer R ? FinalReturnType&lt;R&gt; : T,\n}[T extends (...args: any) =&gt; infer _ ? 1 : 0];\n</code></pre>\n\n<p>It has to be this strange and ugly because there's currently a restriction that says a type can only call itself if it's nested inside another structural type (in this case, an object with two keys), but then we immediately pull the property we need from the tuple.</p>\n\n<p><strong>How it would ideally look:</strong></p>\n\n<p>If the language supported this kind of mechanism, I'd think it would be as simple as:</p>\n\n<pre><code>type FinalReturnType&lt;T&gt; = T extends (...args: any) =&gt; infer R\n                              ? FinalReturnType&lt;R&gt; \n                              : T;\n</code></pre>\n\n<p>In other words, use a recursive definition. If <code>T</code> is a function, it calls itself passing the return type of the function. If not a function, it returns <code>T</code> itself. So for example:</p>\n\n<pre><code>FinalReturnType&lt;string&gt; // -&gt; string\n</code></pre>\n\n<p>And so that terminates the recursion: when you've unwrapped all the layers of functions that return functions, you eventually reach a non-function.</p>\n\n<p>Unfortunately, this isn't possible, producing the error:</p>\n\n<pre><code>Type alias 'FinalReturnType' circularly references itself.\n</code></pre>\n\n<p>There was a <a href=\"https://github.com/microsoft/TypeScript/pull/33050\" rel=\"nofollow noreferrer\">change to enable recursive type references</a> but it doesn't enable this scenario.</p>\n\n<p>There is <a href=\"https://github.com/microsoft/TypeScript/issues/26980\" rel=\"nofollow noreferrer\">an open discussion of more general support for recursion</a>.</p>\n\n<p>The present situation is that you can only compile my answer if you add <code>[]</code> around the self-call to make it a tuple:</p>\n\n<pre><code>type FinalReturnType&lt;T&gt; = T extends (...args: any) =&gt; infer R\n                                ? [FinalReturnType&lt;R&gt;] \n    : T;\n\ntype t1 = FinalReturnType&lt;string&gt;;  // -&gt; string\n\ntype F = () =&gt; string\ntype t2 = FinalReturnType&lt;F&gt;;       // -&gt; [string]\n\ntype FF = () =&gt; () =&gt; string\ntype t3 = FinalReturnType&lt;FF&gt;;      // -&gt; [[string]]\n</code></pre>\n\n<p>As you can see, this re-wraps the results in layers of nested tuples, and you're back to the same problem, because you can't unwrap those either.</p>\n\n<p>Currently you can currently use the trick of wrapping in an object with two properties, then immediately unwrapping by indexing the right one, as described at the top of this answer. But this was enabled by accident, and the TS team aren\u2019t sure whether they want to support/encourage this.</p>\n"}], "owner": {"reputation": 441, "user_id": 7919572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7180a29a1e3cbca63bc706c4c7414a6?s=128&d=identicon&r=PG&f=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/7919572/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 59548657, "answer_count": 1, "score": 1, "last_activity_date": 1587670257, "creation_date": 1577823614, "last_edit_date": 1587670257, "question_id": 59548176, "link": "https://stackoverflow.com/questions/59548176/returntype-of-curried-function", "title": "ReturnType of curried function", "body": "<p>Using <code>ReturnType&lt;T&gt;</code> in a function returns, as you would expect, the return type.</p>\n\n<pre><code>type F = () =&gt; string\n//ReturnType&lt;F&gt; === string\n</code></pre>\n\n<p>Also, as you would expect, when using curried functions the return type is </p>\n\n<pre><code>type FF = () =&gt; () =&gt; string\n//ReturnType&lt;FF&gt; === () =&gt; string\n</code></pre>\n\n<p>Is there a way to create a generic type that returns the final return? I.E</p>\n\n<pre><code>type FF = () =&gt; () =&gt; string\n//FinalReturnType&lt;FF&gt; === string\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 0, "creation_date": 1577823759, "post_id": 59547996, "comment_id": 105265386, "body": "You should not make those method static if you plan to access them through the object. Static methods should be accessed by class name."}], "answers": [{"tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": true, "score": 0, "last_activity_date": 1577828179, "last_edit_date": 1577828179, "creation_date": 1577827036, "answer_id": 59548502, "question_id": 59547996, "link": "https://stackoverflow.com/questions/59547996/abstract-class-its-static-methods-type-in-typescript/59548502#59548502", "title": "Abstract class + its static methods type in typescript", "body": "<p>Static methods are called by their Class name and not via an Object, since they belong to the <code>prototype</code> and have no access to the (correct) <code>this</code> context. </p>\n\n<pre><code>abstract class BaseEntity {\n  static getById(id: number): BaseEntity {...}\n}\n\nabstract class BaseObject extends BaseEntity {\n  static getBySlug(slug: string): BaseObject {...}\n}\n\nclass User extends BaseObject {}\nclass Post extends BaseObject {}\n\nclass Interactor {\n  doSomething(obj: new () =&gt; BaseObject) { // Since you want to call both method, let's assume \"BaseObject\" is more fitting\n     // Since you are in a static context, you have no access to \"obj\" in the static method as long as you don't pass it (maybe a non-static function would be better?)\n     BaseEntity.getById(3) // no error\n     BaseObject.getBySlug('foo') // no error\n  }\n\n  main() {\n    this.doSomething(User) // no error\n    this.doSomething(Post) // no error\n  }\n}\n</code></pre>\n\n<p>Here a TypeScript <a href=\"http://www.typescriptlang.org/play/#code/IYIwzgLgTsDGEAJYBthjAgQmgpgUQDsIBLCATwQG8BYAKAQUmBNgQHMcJMyBJAEwAUxPgC4EBAK4BbEDigBKMdjD4ipCjXoMEUThKgFxOAO5JU6BDgAeEHAT4ZlqkuSoBfBAHpPCAFITIBAgAewQAB2QcXCCACxwkYKkw4kioABoEY3jdCH1DYCNTYgImAlh4iBjmSxs7BwQAMyhE2OIMFDQwOgY3Ol7aOlBIGHgzTqxcAHkQACscUetbe0dcQhcNbsYIZmJWDi4yAGVkCTYBMBO2MWHitkUJlWm50c1tHT0DQrGLRbqVx9m80QlA83j8AUQIXCkWilXisESyVSGSy71ynwKBBMCGKpXKsWqv2WjWaUla7XMXS0-X6dA6FgAqiooDUlvUnE8ge46ZSEAAFYKBInsqaAl602j0jA8IhyOAhFmvBB8YKHRKcGK3ATBWZKUXPCDyKheHyHYr4sjBCSZYBEIKhWDAZDIBAgYKVBBSDXBPgZSIQADkGE60niACIOWKIGGcRgpMFdI1SCQCGxNtowWayvFLdbgIniggCkwWAlZTYMrmEFUAG7xAihODlCxQsM6mYxwtwrY7Vheyo+osYZDBVNDhBVlUEAOIMLjUgIARSYBkWRF8SjgC0Jd2jQkZRIo8yVuQfFd8VkEFsUAA-PJ0wwnGt1AA6fbcfgCADMRrBDcsUDNFAD4PDgnLwG+nDcMcpwCAGDTBMEAa-j4-5yEBmwSgwy7FAIRpKgwlRtC+Kpqv2mqpgITJyChG4ARhWiEZqYAkaq6pEZRAqQLRaGAQmmF9EAA\" rel=\"nofollow noreferrer\">Playground link</a> to show that this compiles. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12633789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59548502, "answer_count": 1, "score": 1, "last_activity_date": 1577828179, "creation_date": 1577821978, "last_edit_date": 1577822071, "question_id": 59547996, "link": "https://stackoverflow.com/questions/59547996/abstract-class-its-static-methods-type-in-typescript", "title": "Abstract class + its static methods type in typescript", "body": "<p>I have an abstract <code>BaseObject</code> class, which extends abstract <code>BaseEntity</code> class, and two classes that extend <code>BaseObject</code> - <code>User</code> and <code>Post</code>. Both <code>BaseEntity</code> and <code>BaseObject</code> have their own static methods.</p>\n\n<p>Which type should have a parameter that would accept a constructor of <code>BaseObject</code>'s inheritors and would have access to all static methods?</p>\n\n<p>Some example code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>abstract class BaseEntity {\n  static getById(id: number): BaseEntity {...}\n}\n\nabstract class BaseObject extends BaseEntity {\n  static getBySlug(slug: string): BaseObject {...}\n}\n\nclass User extends BaseObject {}\nclass Post extends BaseObject {}\n\nclass Interactor {\n  doSomething(obj: ???) {\n     obj.getById(3) // no error\n     obj.getBySlug('foo') // no error\n  }\n\n  main() {\n    this.doSomething(User) // no error\n    this.doSomething(Post) // no error\n  }\n}\n</code></pre>\n"}, {"tags": ["typescript"], "owner": {"reputation": 177, "user_id": 11879477, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i7CV_4382Zo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciYx51WA2ig4z-gG6VIlD7PJXBSw/photo.jpg?sz=128", "display_name": "user12341234", "link": "https://stackoverflow.com/users/11879477/user12341234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577819342, "creation_date": 1577819342, "question_id": 59547713, "link": "https://stackoverflow.com/questions/59547713/use-module-exports-and-require-without-error-ts2451-cannot-redeclare-block-scop", "title": "Use module.exports and require without error TS2451: Cannot redeclare block-scoped variable", "body": "<p>I don't want to use <code>import</code> or <code>export</code> at all in my codebase. Only require and module.exports. It is a node only project. Problem is I get <code>error TS2451: Cannot redeclare block-scoped variable</code> whenever I require modules with the same names in different files.</p>\n\n<p>How can I fix this without changing the code? I've already seen solutions where you can add <code>import</code> or <code>export</code>. I don't want to do this. I want a solution that comes from setting a flag or compiler option or something like that.</p>\n"}, {"tags": ["typescript", "react-native", "continuous-integration", "eslint", "github-actions"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 4211551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcByG.jpg?s=128&g=1", "display_name": "Colin Cheung", "link": "https://stackoverflow.com/users/4211551/colin-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1578373395, "creation_date": 1578373395, "answer_id": 59622429, "question_id": 59547481, "link": "https://stackoverflow.com/questions/59547481/why-does-eslint-fail-on-github-actions-but-works-locally/59622429#59622429", "title": "Why does eslint fail on Github Actions but works locally?", "body": "<p>Turns out this was a file case sensitivity issue.</p>\n\n<p><code>../../styles/Colors</code> was renamed earlier by me to <code>../../styles/colors</code> (lowercase)</p>\n\n<p>However for some reason git didn't pick this up. I had to do this manually with <code>git mv</code></p>\n"}], "owner": {"reputation": 111, "user_id": 4211551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcByG.jpg?s=128&g=1", "display_name": "Colin Cheung", "link": "https://stackoverflow.com/users/4211551/colin-cheung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 59622429, "answer_count": 1, "score": 4, "last_activity_date": 1578373395, "creation_date": 1577817143, "question_id": 59547481, "link": "https://stackoverflow.com/questions/59547481/why-does-eslint-fail-on-github-actions-but-works-locally", "title": "Why does eslint fail on Github Actions but works locally?", "body": "<p>I have a workflow that looks like this</p>\n\n<pre><code>name: Node CI\n\non: [push]\n\njobs:\n  build:\n\n    runs-on: ubuntu-18.04\n\n    steps:\n    - uses: actions/checkout@v1\n    - uses: actions/setup-node@v1\n      with:\n        node-version: '12.x'\n    - run: npm install\n    - run: npm run lint\n</code></pre>\n\n<p>For some reason the lint stage fails and produces the following error</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; eslint . --ext .js,.jsx,.ts,.tsx\n\n\n/home/runner/work/ABC/ABC/src/components/folder/Folder.tsx\n##[error]  6:20  error  Missing file extension for \"../../styles/Colors\"        import/extensions\n##[error]  6:20  error  Unable to resolve path to module '../../styles/Colors'  import/no-unresolved\n\n/home/runner/work/ABC/ABC/src/components/todo/header/Heading.tsx\n##[error]  4:20  error  Missing file extension for \"../../../styles/Colors\"        import/extensions\n##[error]  4:20  error  Unable to resolve path to module '../../../styles/Colors'  import/no-unresolved\n\n\n/home/runner/work/ABC/ABC/src/screens/TodoScreen.tsx\n##[error]  3:20  error  Missing file extension for \"../styles/Colors\"        import/extensions\n##[error]  3:20  error  Unable to resolve path to module '../styles/Colors'  import/no-unresolved\n\n\u2716 6 problems (6 errors, 0 warnings)\n</code></pre>\n\n<p>When I run <code>npm run lint</code> locally, it successfully passes.</p>\n\n<p>I've tried running <code>npm ci</code> and then <code>npm run lint</code> and it still passes</p>\n"}, {"tags": ["angular", "typescript", "font-awesome"], "answers": [{"tags": [], "owner": {"reputation": 553, "user_id": 1495753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZNteK.jpg?s=128&g=1", "display_name": "danywalls", "link": "https://stackoverflow.com/users/1495753/danywalls"}, "is_accepted": false, "score": 0, "last_activity_date": 1577818938, "creation_date": 1577818938, "answer_id": 59547670, "question_id": 59547453, "link": "https://stackoverflow.com/questions/59547453/cannot-find-module-fortawesome-angular-fontawesome/59547670#59547670", "title": "Cannot find module &#39;@fortawesome/angular-fontawesome&#39;", "body": "<p>When you use @ at the end you need to set the version like the following command.</p>\n\n<pre><code>$ npm install @fortawesome/angular-fontawesome@0.3.x\n</code></pre>\n\n<p>The official <a href=\"https://www.npmjs.com/package/@fortawesome/angular-fontawesome\" rel=\"nofollow noreferrer\">forawesome</a> npm page has a full description of which version to use for each angular version.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11830040, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7mb-Fu_DK2k/AAAAAAAAAAI/AAAAAAAAATc/BF-VeBjWdo8/photo.jpg?sz=128", "display_name": "Yash Raj", "link": "https://stackoverflow.com/users/11830040/yash-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1605532582, "creation_date": 1605532582, "answer_id": 64858709, "question_id": 59547453, "link": "https://stackoverflow.com/questions/59547453/cannot-find-module-fortawesome-angular-fontawesome/64858709#64858709", "title": "Cannot find module &#39;@fortawesome/angular-fontawesome&#39;", "body": "<p>when you use @ at the end you need to specify the version number like</p>\n<pre><code>    `@3.3` etc\n</code></pre>\n<p>If you want the latest version just remove everything starting from <code>@</code> and it'll automatically install the latest stable version</p>\n"}], "owner": {"reputation": 11, "user_id": 12633478, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4A6KzXq0kU2eWKeChCKUi7wKmiJjM0egY5c2O=k-s128", "display_name": "sahar mohammadi", "link": "https://stackoverflow.com/users/12633478/sahar-mohammadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3215, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1605532582, "creation_date": 1577816907, "last_edit_date": 1577851650, "question_id": 59547453, "link": "https://stackoverflow.com/questions/59547453/cannot-find-module-fortawesome-angular-fontawesome", "title": "Cannot find module &#39;@fortawesome/angular-fontawesome&#39;", "body": "<p>I am trying to install <code>fontawesome&lt;0.4.x&gt;</code> in <code>Angular8</code>, but it gives me an error and say :</p>\n\n<pre><code>npm ERR! code E404\n\nnpm ERR! 404 Not Found - GET https://registry.npmjs.org/0.4.x - Not found\n\nnpm ERR! 404 \n\nnpm ERR! 404  '0.4.x@latest' is not in the npm registry.\n\nnpm ERR! 404 You should bug the author to publish it (or use the name yourself!)\n\nnpm ERR! 404 \n</code></pre>\n\n<p>I followed the process based on <a href=\"https://www.npmjs.com/package/@fortawesome/angular-fontawesome\" rel=\"nofollow noreferrer\">this page</a> </p>\n\n<p>But after executing the last line (<code>$ npm install @fortawesome/angular-fontawesome@&lt;version&gt;</code>)\nit gives me <code>ERR 404 !!</code>\nI will appreciate your help ... Thanx</p>\n"}, {"tags": ["typescript", "jwt", "nestjs", "nestjs-passport", "nestjs-jwt"], "answers": [{"tags": [], "owner": {"reputation": 2940, "user_id": 1906361, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/yWuuo.jpg?s=128&g=1", "display_name": "Shumail", "link": "https://stackoverflow.com/users/1906361/shumail"}, "is_accepted": false, "score": 3, "last_activity_date": 1577973075, "creation_date": 1577973075, "answer_id": 59564505, "question_id": 59547395, "link": "https://stackoverflow.com/questions/59547395/authentication-using-nestjs-passport-with-jwt-strategy/59564505#59564505", "title": "authentication using nestjs, passport with JWT strategy", "body": "<p>Just logging out the user doesn't make a JWT token invalid (unless the token has expired). </p>\n\n<p>In order to make sure that the token is not valid after logout, you need to apply some extra strategy. One common approach is to blacklist the token and maintain a list of blacklisted tokens.</p>\n\n<p>For that to work, on logout, you can add blacklist the token and add it into the blacklisted-tokens list. And in authentication, you can add check if the token is blacklisted and throw error accordingly.</p>\n\n<p>Check this answer for more ideas on dealing with this problem: <a href=\"https://stackoverflow.com/a/23089839/1906361\">https://stackoverflow.com/a/23089839/1906361</a></p>\n"}, {"tags": [], "owner": {"reputation": 4385, "user_id": 7717583, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/jmyAH.jpg?s=128&g=1", "display_name": "Xen_mar", "link": "https://stackoverflow.com/users/7717583/xen-mar"}, "is_accepted": false, "score": 2, "last_activity_date": 1592249284, "creation_date": 1592249284, "answer_id": 62395545, "question_id": 59547395, "link": "https://stackoverflow.com/questions/59547395/authentication-using-nestjs-passport-with-jwt-strategy/62395545#62395545", "title": "authentication using nestjs, passport with JWT strategy", "body": "<p>What you're trying to do is very uncommon, just FYI.</p>\n\n<p>Usually, you'd just delete the token in the user's <code>LocalStorage</code>.</p>\n\n<p>You can jump through some hoops and blacklist the token but that's a lot of work for something that is not necessary in most cases. If you want extra security, choose a shorter expiry time for the token.</p>\n"}], "owner": {"reputation": 858, "user_id": 9832888, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hJu3E-7WIwk/AAAAAAAAAAI/AAAAAAAAAAU/OnUrBV8i89I/photo.jpg?sz=128", "display_name": "Omar Abdelhady", "link": "https://stackoverflow.com/users/9832888/omar-abdelhady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2581, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1593456119, "creation_date": 1577816496, "last_edit_date": 1593456119, "question_id": 59547395, "link": "https://stackoverflow.com/questions/59547395/authentication-using-nestjs-passport-with-jwt-strategy", "title": "authentication using nestjs, passport with JWT strategy", "body": "<p>I'm trying to implement a nestjs authentication and authorization for a tasks app</p>\n<p>I'm using JWT strategy with passport</p>\n<p>But I Cannot implement logout method</p>\n<p>I tried</p>\n<pre class=\"lang-typescript prettyprint-override\"><code>@Get('/logout')\nlogout(@Request() req) {\n    req.logout();\n}\n</code></pre>\n<p>it returns 200 but then I can still get data with the token for the same user that just logged out</p>\n<p>my jwt-strategy file</p>\n<pre class=\"lang-typescript prettyprint-override\"><code>import { Injectable, UnauthorizedException } from &quot;@nestjs/common&quot;;\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy, ExtractJwt } from 'passport-jwt';\nimport { InjectRepository } from &quot;@nestjs/typeorm&quot;;\nimport { UserRepository } from &quot;./user.repository&quot;;\nimport { JwtPayload } from &quot;./jwt-payload.interface&quot;;\nimport * as config from 'config';\n\nconst jwtConfig = config.get('jwt');\n\n@Injectable()\nexport class JwtStrategy extends PassportStrategy(Strategy) {\n\n    constructor(@InjectRepository(UserRepository) private userRepository: UserRepository) {\n        super({\n            jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n            secretOrKey: process.env.JWT_SECRET || jwtConfig.secret\n        })\n    }\n\n    async validate(payload: JwtPayload) {\n        const {username} = payload;\n        const user = await this.userRepository.findOne({username});\n\n        if(!user) {\n            throw new UnauthorizedException();\n        }\n\n        return user;\n    }\n\n}\n</code></pre>\n<p>in tasks.controller i use it like this</p>\n<pre class=\"lang-typescript prettyprint-override\"><code>@Controller('tasks')\n@UseGuards(AuthGuard('jwt'))\n</code></pre>\n<p>my auth.module.ts</p>\n<pre class=\"lang-typescript prettyprint-override\"><code>import { Module } from '@nestjs/common';\nimport { AuthController } from './auth.controller';\nimport { AuthService } from './auth.service';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UserRepository } from './user.repository';\nimport { JwtModule } from '@nestjs/jwt';\nimport { PassportModule } from '@nestjs/passport';\nimport { JwtStrategy } from './jwt.strategy';\nimport * as config from 'config';\n\nconst jwtConfig = config.get('jwt');\n\n@Module({\n    imports: [\n        PassportModule.register({defaultStrategy: 'jwt'}),\n        JwtModule.register({\n            secret: process.env.JWT_SECRET || jwtConfig.secret,\n            signOptions: {\n                expiresIn: jwtConfig.expiresIn\n            }\n        }),\n        TypeOrmModule.forFeature([UserRepository])\n    ],\n    controllers: [AuthController],\n    providers: [\n        AuthService,\n        JwtStrategy\n    ],\n    exports: [\n        JwtStrategy,\n        PassportModule\n    ]\n})\nexport class AuthModule { }\n</code></pre>\n<p>I want to be able to log user out and the token should be invalid though and return 401</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "ionic4"], "comments": [{"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577818966, "post_id": 59547377, "comment_id": 105264393, "body": "Can we see how and where you call <code>scrollToBottom</code>?"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577819059, "post_id": 59547377, "comment_id": 105264405, "body": "@ConnorsFan Please see line <code>161</code> on the above gif."}, {"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577819245, "post_id": 59547377, "comment_id": 105264435, "body": "My suggestion: call <code>ChangeDetectorRef.detectChanges()</code> to update the view before calling <code>scrollToBottom()</code>."}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577819421, "post_id": 59547377, "comment_id": 105264468, "body": "@ConnorsFan That is unnecessary overhead to the component since it&#39;ll re-run the change detection for the whole component. But <code>setTimeout()</code> is more efficient here."}], "answers": [{"tags": [], "owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "is_accepted": true, "score": 0, "last_activity_date": 1577818671, "creation_date": 1577818671, "answer_id": 59547639, "question_id": 59547377, "link": "https://stackoverflow.com/questions/59547377/angular-nativeelement-scrolltop-has-weird-behavior/59547639#59547639", "title": "Angular nativeElement.scrollTop has weird behavior", "body": "<p>It seems a bug on Angular when accessing the native DOM elements. I have done like below and working perfectly fine now. i.e. use <code>setTimeout()</code></p>\n\n<pre><code>scrollToBottom(): void {\n   setTimeout(() =&gt; { this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight; }, 1);\n  }\n</code></pre>\n"}], "owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 59547639, "answer_count": 1, "score": 0, "last_activity_date": 1577818671, "creation_date": 1577816347, "question_id": 59547377, "link": "https://stackoverflow.com/questions/59547377/angular-nativeelement-scrolltop-has-weird-behavior", "title": "Angular nativeElement.scrollTop has weird behavior", "body": "<p>Can you tell me why <code>this.myScrollContainer.nativeElement.scrollTop</code> doesn't get the assigned value of this <code>this.myScrollContainer.nativeElement.scrollHeight</code>? What is hapening here?</p>\n\n<p>.ts</p>\n\n<pre><code> @ViewChild('scrollMe', { static: false }) private myScrollContainer: ElementRef;\n\n  scrollToBottom(): void {\n     this.myScrollContainer.nativeElement.scrollTop =  this.myScrollContainer.nativeElement.scrollHeight;\n   }\n</code></pre>\n\n<p>.html</p>\n\n<pre><code>&lt;div class=\"row2\" #scrollMe&gt;\n      &lt;ion-row&gt;\n        &lt;ion-col&gt;\n          &lt;app-school&gt;&lt;/app-school&gt;\n        &lt;/ion-col&gt;\n      &lt;/ion-row&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>.scss</p>\n\n<pre><code>.content {\n    ion-grid {\n        display: flex;\n        flex-direction: column;\n        height: 100% !important;\n    }\n\n    .row1 {\n        flex: 2 !important;\n    }\n\n    .row2 {\n        flex: 5 !important;\n        overflow: scroll !important;\n    }\n}\n</code></pre>\n\n<p>Gif - click to see it on a big screen</p>\n\n<p><a href=\"https://i.stack.imgur.com/NVU4g.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVU4g.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript", "nestjs", "clean-architecture", "onion-architecture"], "comments": [{"owner": {"reputation": 563, "user_id": 4447651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zfkr8.jpg?s=128&g=1", "display_name": "nerdy beast", "link": "https://stackoverflow.com/users/4447651/nerdy-beast"}, "edited": false, "score": 1, "creation_date": 1578371723, "post_id": 59547243, "comment_id": 105407564, "body": "Honestly I believe the 3 request/response dto&#39;s is the way to go and here&#39;s why: In theory if you had a &quot;UsersModule&quot;, that module would return &quot;User&quot; models to the rest of the application BUT how that module talks to the database should be no concern to the rest of the application. It would define it&#39;s own dto&#39;s for communication to the database. That way if you decide to swap out what database users get stored in, the rest of the application remains unaffected. This creates the correct separation of concerns and is a good pattern despite the &quot;duplication&quot; of models/dto&#39;s."}, {"owner": {"reputation": 2488, "user_id": 7764329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0dbb5b33bbcd830553cc0b7b050abc8c?s=128&d=identicon&r=PG&f=1", "display_name": "Question3r", "link": "https://stackoverflow.com/users/7764329/question3r"}, "reply_to_user": {"reputation": 563, "user_id": 4447651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zfkr8.jpg?s=128&g=1", "display_name": "nerdy beast", "link": "https://stackoverflow.com/users/4447651/nerdy-beast"}, "edited": false, "score": 0, "creation_date": 1578378892, "post_id": 59547243, "comment_id": 105409286, "body": "hm yes, I was just thinking about it because I only can image a user where I need to hide the sensitive data (password). Groups for example could be returned as database models ..."}], "answers": [{"comments": [{"owner": {"reputation": 4990, "user_id": 1788884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HYlfy.gif?s=128&g=1", "display_name": "Thatkookooguy", "link": "https://stackoverflow.com/users/1788884/thatkookooguy"}, "edited": false, "score": 0, "creation_date": 1578391883, "post_id": 59626301, "comment_id": 105414680, "body": "If this is close to what you&#39;re trying to achieve, let me know and I&#39;ll try and add an example on how to do this with <code>TypeORM</code> as well"}, {"owner": {"reputation": 2865, "user_id": 8468804, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/tBXMi.jpg?s=128&g=1", "display_name": "Chau Tran", "link": "https://stackoverflow.com/users/8468804/chau-tran"}, "edited": false, "score": 1, "creation_date": 1578414507, "post_id": 59626301, "comment_id": 105427003, "body": "Great answer. However for the <code>interface</code> part, I would recommend using something like <code>typegoose</code> to not involve <code>mongoose.Document</code> interface here."}, {"owner": {"reputation": 2488, "user_id": 7764329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0dbb5b33bbcd830553cc0b7b050abc8c?s=128&d=identicon&r=PG&f=1", "display_name": "Question3r", "link": "https://stackoverflow.com/users/7764329/question3r"}, "edited": false, "score": 1, "creation_date": 1578419604, "post_id": 59626301, "comment_id": 105429411, "body": "very nice answer @ thatkookooguy :) It would be awesome if you could expand your answer and add a TypeORM example"}, {"owner": {"reputation": 2488, "user_id": 7764329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0dbb5b33bbcd830553cc0b7b050abc8c?s=128&d=identicon&r=PG&f=1", "display_name": "Question3r", "link": "https://stackoverflow.com/users/7764329/question3r"}, "edited": false, "score": 1, "creation_date": 1578419655, "post_id": 59626301, "comment_id": 105429440, "body": "as far as I understood the sensitive data gets cut off while converting the User model to the IUser interface? while running your interceptor?"}, {"owner": {"reputation": 4990, "user_id": 1788884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HYlfy.gif?s=128&g=1", "display_name": "Thatkookooguy", "link": "https://stackoverflow.com/users/1788884/thatkookooguy"}, "reply_to_user": {"reputation": 2865, "user_id": 8468804, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/tBXMi.jpg?s=128&g=1", "display_name": "Chau Tran", "link": "https://stackoverflow.com/users/8468804/chau-tran"}, "edited": false, "score": 0, "creation_date": 1578436274, "post_id": 59626301, "comment_id": 105436377, "body": "@ChauTran wow. that&#39;s like the missing link to make this all work perfectly! thank you for opening my eyes to this :-)"}, {"owner": {"reputation": 4990, "user_id": 1788884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HYlfy.gif?s=128&g=1", "display_name": "Thatkookooguy", "link": "https://stackoverflow.com/users/1788884/thatkookooguy"}, "reply_to_user": {"reputation": 2488, "user_id": 7764329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0dbb5b33bbcd830553cc0b7b050abc8c?s=128&d=identicon&r=PG&f=1", "display_name": "Question3r", "link": "https://stackoverflow.com/users/7764329/question3r"}, "edited": false, "score": 0, "creation_date": 1578436395, "post_id": 59626301, "comment_id": 105436421, "body": "@Question3r sure. I&#39;ll try and provide an answer with typeORM soon :-). Basically, the class you define is the internal class, while everything sensitive is cut off when either you use the function <code>classToPlain</code> from <code>class-transformer</code> or by using the nestjs <code>ClassSerializerInterceptor</code> which calls <code>classToPlain</code> behind the scenes"}, {"owner": {"reputation": 2865, "user_id": 8468804, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/tBXMi.jpg?s=128&g=1", "display_name": "Chau Tran", "link": "https://stackoverflow.com/users/8468804/chau-tran"}, "edited": false, "score": 1, "creation_date": 1578437107, "post_id": 59626301, "comment_id": 105436687, "body": "@Thatkookooguy total off topic here but here&#39;s a blog post I wrote some times ago to demonstrate the use of Typegoose in NestJS: <a href=\"https://nartc.netlify.com/blogs/nestjs-typegoose/\" rel=\"nofollow noreferrer\">nartc.netlify.com/blogs/nestjs-typegoose</a>"}, {"owner": {"reputation": 4346, "user_id": 1016228, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/66f589227a200c1f1465682ab8650254?s=128&d=identicon&r=PG", "display_name": "RollerCosta", "link": "https://stackoverflow.com/users/1016228/rollercosta"}, "edited": false, "score": 0, "creation_date": 1589138532, "post_id": 59626301, "comment_id": 109168475, "body": "nice architecture, quick question : Do we really need to call user.toJSON to transform the response, I&#39;ve tried without it and it is working fine(transformation)."}, {"owner": {"reputation": 4346, "user_id": 1016228, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/66f589227a200c1f1465682ab8650254?s=128&d=identicon&r=PG", "display_name": "RollerCosta", "link": "https://stackoverflow.com/users/1016228/rollercosta"}, "edited": false, "score": 0, "creation_date": 1589139236, "post_id": 59626301, "comment_id": 109168711, "body": "I believe your controller code will throw an error where you are trying to create an instance of User by supplying createUserBody. User constructor expect Partial&lt;User&gt; as a parameter."}, {"owner": {"reputation": 4990, "user_id": 1788884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HYlfy.gif?s=128&g=1", "display_name": "Thatkookooguy", "link": "https://stackoverflow.com/users/1788884/thatkookooguy"}, "reply_to_user": {"reputation": 4346, "user_id": 1016228, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/66f589227a200c1f1465682ab8650254?s=128&d=identicon&r=PG", "display_name": "RollerCosta", "link": "https://stackoverflow.com/users/1016228/rollercosta"}, "edited": false, "score": 1, "creation_date": 1589622607, "post_id": 59626301, "comment_id": 109369900, "body": "@RollerCosta You&#39;re probably right. I added the toJSON function mostly for having the ability to do things manually whenever needed (keeping some attributes from leaving a certain function). In normal controller transformations, it&#39;s probably not needed.  About the error, I&#39;ll test it and check. I already changed the code in my codebase quite a bit and worked with it for a couple of months, so maybe something was fixed or got missed. I&#39;ll check the code snippet soonish and fix the problem or update the code. Thanks for the comments!"}, {"owner": {"reputation": 4346, "user_id": 1016228, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/66f589227a200c1f1465682ab8650254?s=128&d=identicon&r=PG", "display_name": "RollerCosta", "link": "https://stackoverflow.com/users/1016228/rollercosta"}, "edited": false, "score": 0, "creation_date": 1589710426, "post_id": 59626301, "comment_id": 109395749, "body": "@Thatkookooguy appreciate your response. I&#39;m new to this nodejs (nestjs + typorm ). Having some difficulties finding the best approach to design the entire framework. More related to dependency injection (should be inject multiple repositories inside one service or inject multiple services inside one service and resolve those dependencies at module level) . I can explain this in details but we need a platform to discuss them, could you help ?"}], "tags": [], "owner": {"reputation": 4990, "user_id": 1788884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HYlfy.gif?s=128&g=1", "display_name": "Thatkookooguy", "link": "https://stackoverflow.com/users/1788884/thatkookooguy"}, "is_accepted": true, "score": 21, "last_activity_date": 1578530605, "last_edit_date": 1578530605, "creation_date": 1578391849, "answer_id": 59626301, "question_id": 59547243, "link": "https://stackoverflow.com/questions/59547243/create-dtos-bos-and-daos-for-nestjs-rest-api/59626301#59626301", "title": "create DTOs, BOs and DAOs for NestJs REST API", "body": "<p>I handle this by having a single class to represent a User (internally and externally) with the <a href=\"https://www.npmjs.com/package/class-transformer\" rel=\"noreferrer\"><code>class-transformer</code></a> library (recommended by NestJs) to handle the differences between the exposed user and the internal user without defining two classes.</p>\n\n<p>Here's an example using your user model:</p>\n\n<h2>Defining the User Class</h2>\n\n<p>Since this user class is saved to the database, I usually create a base class for all the fields that every database object expects to have. Let's say:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class BaseDBObject {\n  // this will expose the _id field as a string\n  // and will change the attribute name to `id`\n  @Expose({ name: 'id' })\n  @Transform(value =&gt; value &amp;&amp; value.toString())\n  @IsOptional()\n  // tslint:disable-next-line: variable-name\n  _id: any;\n\n  @Exclude()\n  @IsOptional()\n  // tslint:disable-next-line: variable-name\n  _v: any;\n\n  toJSON() {\n    return classToPlain(this);\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n}\n</code></pre>\n\n<p>Next, our user will expend this basic class:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Exclude()\nexport class User extends BaseDBObject {\n  @Expose()\n  username: string;\n\n  password: string;\n\n  constructor(partial: Partial&lt;User&gt; = {}) {\n    super();\n    Object.assign(this, partial);\n  }\n}\n</code></pre>\n\n<p>I'm using a few decorators here from the <code>class-transformer</code> library to change this internal user (with all the database fields intact) when we expose the class outside of our server.</p>\n\n<ul>\n<li><code>@Expose</code> - will expose the attribute if the class-default is to exclude</li>\n<li><code>@Exclude</code> - will exclude the property if the class-default is to expose</li>\n<li><code>@Transform</code> - changes the attribute name when 'exporting'</li>\n</ul>\n\n<p>This means that after running the <code>classToPlain</code> function from <code>class-transformer</code>, all the rules we defined on the given class will be applied.</p>\n\n<h2>Controllers</h2>\n\n<p><code>NestJs</code> have a decorator you add to make sure classes you return from controller endpoints will use the <code>classToPlain</code> function to transform the object, returning the result object with all the private fields omitted and transformations (like changing <code>_id</code> to <code>id</code>) </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Get(':id')\n@UseInterceptors(ClassSerializerInterceptor)\nasync findById(@Param('id') id: string): Promise&lt;User&gt; {\n  return await this.usersService.find(id);\n}\n\n@Post()\n@UseInterceptors(ClassSerializerInterceptor)\nasync create(@Body() createUserBody: CreateUserBodyDTO): Promise&lt;User&gt; {\n  // create a new user from the createUserDto\n  const userToCreate = new User(createUserBody);\n\n  return await this.usersService.create(userToCreate);\n}\n</code></pre>\n\n<h2>Services</h2>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Injectable()\nexport class UsersService {\n  constructor(@InjectModel('User') private readonly userModel: Model&lt;IUser&gt;) { }\n\n  async create(createCatDto: User): Promise&lt;User&gt; {\n    const userToCreate = new User(createCatDto);\n    const createdUser = await this.userModel.create(userToCreate);\n\n    if (createdUser) {\n      return new User(createdUser.toJSON());\n    }\n  }\n\n  async findAll(): Promise&lt;User[]&gt; {\n    const allUsers = await this.userModel.find().exec();\n    return allUsers.map((user) =&gt; new User(user.toJSON()));\n  }\n\n  async find(_id: string): Promise&lt;User&gt; {\n    const foundUser = await this.userModel.findOne({ _id }).exec();\n    if (foundUser) {\n      return new User(foundUser.toJSON());\n    }\n  }\n}\n</code></pre>\n\n<p>Because internally we always use the User class, I convert the data returned from the database to a User class instance.</p>\n\n<p>I'm using <code>@nestjs/mongoose</code>, but basically after retrieving the user from the db, everything is the same for both <code>mongoose</code> and <code>TypeORM</code>.</p>\n\n<h2>Caveats</h2>\n\n<p>With <code>@nestjs/mongoose</code>, I can't avoid creating <code>IUser</code> interface to pass to the mongo <code>Model</code> class since it expects something that extends the mongodb <code>Document</code></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface IUser extends mongoose.Document {\n  username: string;\n\n  password: string;\n}\n</code></pre>\n\n<p>When GETting a user, the API will return this transformed JSON:</p>\n\n<pre><code>{\n    \"id\": \"5e1452f93794e82db588898e\",\n    \"username\": \"username\"\n}\n</code></pre>\n\n<p><a href=\"https://github.com/Thatkookooguy/once-class-demo\" rel=\"noreferrer\">Here's the code for this example in a GitHub repository</a>.</p>\n\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 2488, "user_id": 7764329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0dbb5b33bbcd830553cc0b7b050abc8c?s=128&d=identicon&r=PG&f=1", "display_name": "Question3r", "link": "https://stackoverflow.com/users/7764329/question3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7140, "favorite_count": 6, "accepted_answer_id": 59626301, "answer_count": 1, "score": 10, "last_activity_date": 1578530605, "creation_date": 1577815287, "last_edit_date": 1578419103, "question_id": 59547243, "link": "https://stackoverflow.com/questions/59547243/create-dtos-bos-and-daos-for-nestjs-rest-api", "title": "create DTOs, BOs and DAOs for NestJs REST API", "body": "<p>I would like to get into creating REST APIs with NestJs and I'm not sure how to setup scalable layer communication objects.</p>\n\n<p>So from the docs on how to <a href=\"https://docs.nestjs.com/controllers\" rel=\"noreferrer\">get started</a> I come up with a <code>UsersController</code> dealing with the HTTP requests and responses, a <code>UsersService</code> dealing with the logic between the controller and the database accessor and the <code>UsersRepository</code> which is responsible for the database management.</p>\n\n<p>I use the <a href=\"https://docs.nestjs.com/recipes/sql-typeorm\" rel=\"noreferrer\">TypeORM package</a> provided by NestJs so my database model would be</p>\n\n<pre><code>@Entity('User')\nexport class UserEntity extends BaseEntity {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ unique: true })\n  username: string;\n\n  @Column()\n  passwordHash: string;\n\n  @Column()\n  passwordSalt: string;\n}\n</code></pre>\n\n<p>but as you might know this model has to be mapped to other models and vice versa because you don't want to send the password information back to the client. I will try to describe my API flow with a simple example:</p>\n\n<hr>\n\n<p><strong>Controllers</strong></p>\n\n<p>First I have a controller endpoint for <code>GET /users/:id</code> and <code>POST /users</code>.</p>\n\n<pre><code>  @Get(':id')\n  findById(@Param() findByIdParamsDTO: FindByIdParamsDTO): Promise&lt;UserDTO&gt; {\n    // find user by id and return it\n  }\n\n  @Post()\n  create(@Body() createUserBodyDTO: CreateUserBodyDTO): Promise&lt;UserDTO&gt; {\n    // create a new user and return it\n  }\n</code></pre>\n\n<p>I setup the <a href=\"https://en.wikipedia.org/wiki/Data_transfer_object\" rel=\"noreferrer\">DTOs</a> and want to validate the request first. I use the <a href=\"https://docs.nestjs.com/techniques/validation\" rel=\"noreferrer\">class-validator</a> package provided by NestJs and created a folder called <strong>RequestDTOs</strong>. Finding something by id or deleting something by id via url parameters is reusable so I can put this into a shared folder for other resources like groups, documents, etc.</p>\n\n<pre><code>export class IdParamsDTO {\n  @IsUUID()\n  id: string;\n}\n</code></pre>\n\n<p>The POST request is user specific</p>\n\n<pre><code>export class CreateUserBodyDTO {\n  @IsString()\n  @IsNotEmpty()\n  username: string;\n\n  @IsString()\n  @IsNotEmpty()\n  password: string;\n}\n</code></pre>\n\n<p>Now the controller input gets validated before executing business logic. For the responses I created a folder called <strong>ResponseDTOs</strong> but currently it only contains the database user without its password information</p>\n\n<pre><code>export interface UserDTO {\n  id: string;\n  username: string;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Services</strong></p>\n\n<p>The service needs the bundled information from the params and the body.</p>\n\n<pre><code>  public async findById(findByIdBO: FindByIdBO): Promise&lt;UserBO&gt; {\n    // ...\n  }\n\n  public async create(createBO: CreateBO): Promise&lt;UserBO&gt; {\n    // ...\n  }\n</code></pre>\n\n<p>The GET request only needs the ID, but maybe it's still better to create a <a href=\"https://en.wikipedia.org/wiki/Business_object\" rel=\"noreferrer\">BO</a> because you might want to switch from string IDs to integers later. The \"find by id\" BO is reusable, I moved it to the shared directory</p>\n\n<pre><code>export interface IdBO {\n  id: string;\n}\n</code></pre>\n\n<p>For the user creation I created the folder <strong>RequestBOs</strong></p>\n\n<pre><code>export interface CreateBO {\n  username: string;\n  password: string;\n}\n</code></pre>\n\n<p>Now for the <strong>ResponseBOs</strong> the result would be</p>\n\n<pre><code>export interface UserBO {\n  id: string;\n  username: string;\n}\n</code></pre>\n\n<p>and as you will notice this is the same like the <strong>UserDTO</strong>. So one of them seems to be redundant?</p>\n\n<hr>\n\n<p><strong>Repositories</strong></p>\n\n<p>Lastly I setup the <a href=\"https://en.wikipedia.org/wiki/Data_access_object\" rel=\"noreferrer\">DAOs</a> for the repositories. I could use the auto-generated user repository and would deal with my database model I mentioned above. But then I would have to deal with it within my service business logic. When creating a user I would have to do it within the service and only call the <code>usermodel.save</code> function from the repository.</p>\n\n<p>Otherwise I could create <strong>RequestDAOs</strong></p>\n\n<p>The shared one..</p>\n\n<pre><code>export interface IdDAO {\n  id: string;\n}\n</code></pre>\n\n<p>And the POST DAO</p>\n\n<pre><code>export interface CreateDAO {\n  username: string;\n  password: string;\n}\n</code></pre>\n\n<p>With that I could create a database user within my repository and map database responses with <strong>ResponseDAOs</strong> but this would always be the whole database user without the password information. Seems to generate a big overhead again.</p>\n\n<hr>\n\n<p>I would like to know if my approach using 3 request and 3 response interfaces is way too much and can be simplified. But I would like to keep a flexible layer because I think those layers should be highly independent... On the other hand there would be a huge amount of models out there.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["javascript", "json", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577814433, "post_id": 59547080, "comment_id": 105263194, "body": "How do you expect to get index 0 from null?"}, {"owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577814485, "post_id": 59547080, "comment_id": 105263209, "body": "add checks if locations is null, render &quot;No Locations loaded&quot; etc"}, {"owner": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "reply_to_user": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577814532, "post_id": 59547080, "comment_id": 105263218, "body": "in componentDidMount if i put console.log it gives output"}, {"owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577814916, "post_id": 59547080, "comment_id": 105263316, "body": "put console in render function and you will see null"}, {"owner": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "reply_to_user": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577814949, "post_id": 59547080, "comment_id": 105263329, "body": "yes why it is so !!"}, {"owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577814988, "post_id": 59547080, "comment_id": 105263344, "body": "because your initial value is null and it will take time to get updated by api data"}, {"owner": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "reply_to_user": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577815016, "post_id": 59547080, "comment_id": 105263357, "body": "then how can I solve it !!"}, {"owner": {"reputation": 103, "user_id": 2228983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ade60186d30308900b3f4f05b60c307?s=128&d=identicon&r=PG&f=1", "display_name": "Varij Kapil", "link": "https://stackoverflow.com/users/2228983/varij-kapil"}, "reply_to_user": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "edited": false, "score": 0, "creation_date": 1577815078, "post_id": 59547080, "comment_id": 105263376, "body": "You are setting the Location property in a promise in the componentDidMount method. The value for Location is not set until that promise receives some data, therefore on first render, <code>this.state.Location</code> will be null. This is reason for your null error. as @ZohaibIjaz already mentioned, add a null check in your render for Location."}], "answers": [{"comments": [{"owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "reply_to_user": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "edited": false, "score": 1, "creation_date": 1577815897, "post_id": 59547212, "comment_id": 105263611, "body": "Dear, I explained earlier, if your code will try to do <code>something[0]</code> where something is <code>null</code> it will break. So you need to check if your variable is null or not. If null then do something else"}, {"owner": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "edited": false, "score": 0, "creation_date": 1577815970, "post_id": 59547212, "comment_id": 105263630, "body": "can we make function to check null and do output."}, {"owner": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "edited": false, "score": 0, "creation_date": 1577816575, "post_id": 59547212, "comment_id": 105263801, "body": "I tried but it did not works. I pass two parameter first any and another string. So first is null than empty other wise another string but as result is null it did not run :("}, {"owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "reply_to_user": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "edited": false, "score": 0, "creation_date": 1577816646, "post_id": 59547212, "comment_id": 105263823, "body": "I don&#39;t know much TypeScript"}], "tags": [], "owner": {"reputation": 16752, "user_id": 5567387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dyfPK.jpg?s=128&g=1", "display_name": "Zohaib Ijaz", "link": "https://stackoverflow.com/users/5567387/zohaib-ijaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1577815095, "creation_date": 1577815095, "answer_id": 59547212, "question_id": 59547080, "link": "https://stackoverflow.com/questions/59547080/react-state-array-gives-null-error-in-rendor/59547212#59547212", "title": "React state array gives null error in rendor", "body": "<p>Add a check to avoid <code>null</code> value</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>public render(): React.ReactElement&lt;IWeatherProps&gt; {\r\n    const { Locations } = this.state;\r\n    return (\r\n      &lt;div className={styles.weather}&gt;\r\n       {Locations ? Locations.results[0].locations[0].adminArea5 : 'Not loaded'}\r\n      &lt;/div&gt;\r\n    )\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1677, "user_id": 507913, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oVYgP.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/507913/milind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 59547212, "answer_count": 1, "score": 0, "last_activity_date": 1577815095, "creation_date": 1577814170, "question_id": 59547080, "link": "https://stackoverflow.com/questions/59547080/react-state-array-gives-null-error-in-rendor", "title": "React state array gives null error in rendor", "body": "<p>I am calling API which emit JSON  I am calling this promise api function in <strong>componentDidMount</strong> and setState and then call this in render method but it always emit null error.</p>\n\n<p>Please help me</p>\n\n<p><strong>interface for location</strong></p>\n\n<pre><code>export interface ILocation {\n  info: Info;\n  options: Options;\n  results: Result[];\n}\n\ninterface Result {\n  providedLocation: ProvidedLocation;\n  locations: Location[];\n}\n\ninterface Location {\n  street: string;\n  adminArea6: string;\n  adminArea6Type: string;\n  adminArea5: string;\n  adminArea5Type: string;\n  adminArea4: string;\n  adminArea4Type: string;\n  adminArea3: string;\n  adminArea3Type: string;\n  adminArea1: string;\n  adminArea1Type: string;\n  postalCode: string;\n  geocodeQualityCode: string;\n  geocodeQuality: string;\n  dragPoint: boolean;\n  sideOfStreet: string;\n  linkId: string;\n  unknownInput: string;\n  type: string;\n  latLng: LatLng;\n  displayLatLng: LatLng;\n  mapUrl: string;\n}\n\ninterface ProvidedLocation {\n  latLng: LatLng;\n}\n\ninterface LatLng {\n  lat: number;\n  lng: number;\n}\n\ninterface Options {\n  maxResults: number;\n  thumbMaps: boolean;\n  ignoreLatLngInput: boolean;\n}\n\ninterface Info {\n  statuscode: number;\n  copyright: Copyright;\n  messages: any[];\n}\n\ninterface Copyright {\n  text: string;\n  imageUrl: string;\n  imageAltText: string;\n}\n</code></pre>\n\n<p><strong>IWeatherStates</strong></p>\n\n<pre><code>export interface IWeatherStates {\n  Locations: ILocation\n}\n</code></pre>\n\n<p><strong>getLocation</strong></p>\n\n<pre><code>private getLocation(latitudes: number, longitude: number): Promise&lt;ILocation&gt; {\n\n    let promise: Promise&lt;ILocation&gt; = new Promise&lt;ILocation&gt;((resolve, reject) =&gt; {\n      let query = `${this.LIST_API_ENDPOINT}/location/${latitudes},${longitude}`\n      this.props.httpClient.get(query, HttpClient.configurations.v1, this.httpClientOptions).then((rawResponse: HttpClientResponse) =&gt; {\n        return rawResponse.json()\n      }).then((jsonResponse) =&gt; {\n        resolve(jsonResponse)\n      })\n    })\n    return promise\n  }\n}\n</code></pre>\n\n<p><strong>componentDidMount</strong></p>\n\n<pre><code>  public componentDidMount() {\n    this.getLocation(29.378586, 47.990341).then((location: ILocation) =&gt; {\n      this.setState({\n        Locations: location\n      })\n    })\n  }\n</code></pre>\n\n<p><strong>construction</strong></p>\n\n<pre><code>constructor(props: IWeatherProps) {\n    super(props)\n\n    this.state = {\n      Locations: null\n    }\n  }\n</code></pre>\n\n<p>**render which give error **</p>\n\n<pre><code>public render(): React.ReactElement&lt;IWeatherProps&gt; {\n    return (\n      &lt;div className={styles.weather}&gt;\n       {this.state.Locations.results[0].locations[0].adminArea5}\n      &lt;/div&gt;\n    )\n}\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>{this.state.Locations.results[0].locations[0].adminArea5}\n    results give null error </p>\n  </blockquote>\n</blockquote>\n"}, {"tags": ["node.js", "typescript", "jestjs", "e2e-testing", "nestjs"], "owner": {"reputation": 387, "user_id": 3497702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6752eae62db42a9f96ad5b3d24fb444?s=128&d=identicon&r=PG&f=1", "display_name": "user3497702", "link": "https://stackoverflow.com/users/3497702/user3497702"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1124, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577814047, "creation_date": 1577814047, "question_id": 59547069, "link": "https://stackoverflow.com/questions/59547069/nestjs-with-fastify-e2e-test-with-jest-mocking-is-not-working", "title": "Nestjs with Fastify e2e test with jest mocking is not working", "body": "<p>I have Nodejs API that use Fastify. The e2e test is written with jest.</p>\n\n<p>Please find my e2e test. It works and test passes.\nHere I find the response is same as the request parameter instead of mocking object.\nThe actual API respond the request parameter but here I am mocking different object but it is not using it for response.</p>\n\n<p>I am not sure whether passing request body is correct for POST.</p>\n\n<p>Why Jest mocking is not working. The similar mocking works for unit test.</p>\n\n<pre><code>\nimport {\n  FastifyAdapter,\n  NestFastifyApplication,\n} from '@nestjs/platform-fastify';\nimport { Test, TestingModule } from '@nestjs/testing';\nimport request from 'supertest';\nimport { AppModule } from '../src/app/app.module';\nimport Axios, { AxiosResponse } from 'axios';\nimport { HttpService } from '@nestjs/common';\nimport { Observable, of, observable } from 'rxjs';\nimport { OracleDBService } from 'synapse.bff.core';\n\ndescribe('AppController (e2e)', () =&gt; {\n  let app: NestFastifyApplication;\n  let httpService: HttpService;\n  let oracleDBService: OracleDBService;\n  beforeEach(async () =&gt; {\n    const moduleFixture: TestingModule = await Test.createTestingModule({\n      imports: [AppModule],\n    }).compile();\n\n    app = moduleFixture.createNestApplication&lt;NestFastifyApplication&gt;(\n      new FastifyAdapter(),\n    );\n    httpService = moduleFixture.get&lt;HttpService&gt;(HttpService);\n    oracleDBService = moduleFixture.get&lt;OracleDBService&gt;(OracleDBService);\n\n    await app.init();\n    jest.setTimeout(30000);\n  });\n\n  it('/ (GET)', () =&gt; {\n    const data = [\n      { name: 'item1', code: '100', category: 'cat1', price: 1250 },\n      { name: 'item2', code: '101', category: 'cat1', price: 1250 },\n      { name: 'item3', code: '102', category: 'cat1', price: 1250 },\n      { name: 'item4', code: '103', category: 'cat1', price: 1250 },\n    ];\n\n    const response: AxiosResponse&lt;any&gt; = {\n      data,\n      headers: {},\n      config: { url: 'http://localhost:3001/item/getitem' },\n      status: 200,\n      statusText: 'OK',\n    };\n\n    jest.spyOn(httpService, 'get').mockReturnValue(of(response));\n\n    return app\n      .inject({\n        method: 'GET',\n        url: '/item/100',\n      })\n      .then(onresponse =&gt;\n        expect(JSON.parse(onresponse.payload)).toEqual(response.data),\n      );\n  });\n\n it('/ (POST)', () =&gt; {\n    const data = {\n      Name: 'item1Mock',\n      Code: '500',\n      Category: 'cat1Mock',\n      Price: 9250,\n    };\n    const response: AxiosResponse&lt;any&gt; = {\n      data,\n      headers: {},\n      config: { url: 'http://localhost:3001/item/getitem' },\n      status: 200,\n      statusText: 'OK',\n    };\n\n    jest.spyOn(httpService, 'post').mockReturnValue(of(response));\n    return app\n      .inject({\n        method: 'POST',\n        url: '/item/create',\n        payload: {\n          body: {\n              Name: 'item1',\n              Code: '200',\n              Category: 'cat1',\n              Price: 1250,\n          },\n        },\n      })\n      .then(onResponse =&gt;\n        expect(\n          JSON.parse(onResponse.payload).message.Detail.message[0].target.body,\n        ).toEqual(response.data),\n      );\n  });\n\n</code></pre>\n\n<p>I am getting the following error</p>\n\n<pre><code> expect(received).toEqual(expected) // deep equality\n\n    - Expected\n    + Received\n\n      Object {\n    -   \"Category\": \"cat1Mock\",\n    -   \"Code\": \"500\",\n    -   \"Name\": \"item1Mock\",\n    -   \"Price\": 9250,\n    +   \"Category\": \"cat1\",\n    +   \"Code\": \"200\",\n    +   \"Name\": \"item1\",\n    +   \"Price\": 1250,\n      }\n\n      90 |         expect(\n      91 |           JSON.parse(onResponse.payload).message.Detail.message[0].target.body,\n    &gt; 92 |         ).toEqual(response.data),\n         |           ^\n      93 |       );\n      94 |   });\n      95 |\n\n      at item.controller.e2e-spec.ts:92:11\n\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "amazon-web-services", "api"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1577902064, "post_id": 59546708, "comment_id": 105278320, "body": "If you&#39;re unable to make this work with the current version of aws4 then you might consider installing an older version that doesn&#39;t rely on, and has no dependencies  that rely on, Buffer."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577814915, "post_id": 59546748, "comment_id": 105263314, "body": "Thank you. I added Buffer as described, but now I am getting an error Cannot read property &#39;slice&#39; of undefined. Do you know how to proceed here?"}, {"owner": {"reputation": 2487, "user_id": 3399430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXL2E.png?s=128&g=1", "display_name": "denixtry", "link": "https://stackoverflow.com/users/3399430/denixtry"}, "reply_to_user": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577816178, "post_id": 59546748, "comment_id": 105263692, "body": "Can paste some of the stack trace? I am guessing you are passing null somewhere to aws4"}, {"owner": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577817537, "post_id": 59546748, "comment_id": 105264075, "body": "I updated more of stack trace in the question above"}, {"owner": {"reputation": 2487, "user_id": 3399430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXL2E.png?s=128&g=1", "display_name": "denixtry", "link": "https://stackoverflow.com/users/3399430/denixtry"}, "reply_to_user": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577817854, "post_id": 59546748, "comment_id": 105264144, "body": "Can you also just use this for importing aws4   import * as aws4 from &#39;aws4&#39;;"}, {"owner": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577819086, "post_id": 59546748, "comment_id": 105264409, "body": "I have updated the import accordingly, unfortunately the error did not change."}, {"owner": {"reputation": 2487, "user_id": 3399430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXL2E.png?s=128&g=1", "display_name": "denixtry", "link": "https://stackoverflow.com/users/3399430/denixtry"}, "reply_to_user": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577821543, "post_id": 59546748, "comment_id": 105264913, "body": "Try using this library instead <a href=\"https://github.com/bhanuhiteshi/ngx-aws4#readme\" rel=\"nofollow noreferrer\">github.com/bhanuhiteshi/ngx-aws4#readme</a>"}, {"owner": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577825172, "post_id": 59546748, "comment_id": 105265684, "body": "I would like to use aws4 because it is far more popular and active. Has anyone been able to get this library to work with Angular 8 or is there another way of creating signed requests in Angular 8 for AWS API GW?"}, {"owner": {"reputation": 2487, "user_id": 3399430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXL2E.png?s=128&g=1", "display_name": "denixtry", "link": "https://stackoverflow.com/users/3399430/denixtry"}, "reply_to_user": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "edited": false, "score": 0, "creation_date": 1577828386, "post_id": 59546748, "comment_id": 105266240, "body": "The problem is the crypto library they use in aws4. You could fork aws4 and replace crypto with crypto-browserify.  <a href=\"https://www.npmjs.com/package/crypto-browserify\" rel=\"nofollow noreferrer\">npmjs.com/package/crypto-browserify</a>"}], "tags": [], "owner": {"reputation": 2487, "user_id": 3399430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXL2E.png?s=128&g=1", "display_name": "denixtry", "link": "https://stackoverflow.com/users/3399430/denixtry"}, "is_accepted": false, "score": 0, "last_activity_date": 1577811571, "creation_date": 1577811571, "answer_id": 59546748, "question_id": 59546708, "link": "https://stackoverflow.com/questions/59546708/generate-aws-signed-requests-in-angular/59546748#59546748", "title": "Generate AWS Signed Requests in Angular", "body": "<p>Install the buffer package using npm or yarn <code>npm install buffer</code>. And add the following into polyfills.ts ():</p>\n\n<pre><code>global.Buffer = global.Buffer || require('buffer').Buffer;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "is_accepted": true, "score": 1, "last_activity_date": 1578082113, "creation_date": 1578082113, "answer_id": 59584746, "question_id": 59546708, "link": "https://stackoverflow.com/questions/59546708/generate-aws-signed-requests-in-angular/59584746#59584746", "title": "Generate AWS Signed Requests in Angular", "body": "<p>At first, I tried to use <em>crypto-browserify</em>, but unfortunately, I got the exact same error as I got with <em>crypto</em>.\nTherefore, I implemented the request signing myself using this example:\n<a href=\"https://docs.aws.amazon.com/general/latest/gr/sigv4-signed-request-examples.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/general/latest/gr/sigv4-signed-request-examples.html</a></p>\n\n<p>The example is for python, but can easily be adapted for Javascript/Typescript.</p>\n\n<p>As described here:\n<a href=\"https://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html</a></p>\n\n<p>I used <strong><em>crypto-js</em></strong> instead of <em>crypto</em>, and did not get any errors.</p>\n"}], "owner": {"reputation": 103, "user_id": 11081132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f3245b7f08456c309bd963acdc02bc?s=128&d=identicon&r=PG&f=1", "display_name": "pmax", "link": "https://stackoverflow.com/users/11081132/pmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 59584746, "answer_count": 2, "score": 1, "last_activity_date": 1578082113, "creation_date": 1577811297, "last_edit_date": 1577817508, "question_id": 59546708, "link": "https://stackoverflow.com/questions/59546708/generate-aws-signed-requests-in-angular", "title": "Generate AWS Signed Requests in Angular", "body": "<p>From my Angular 8 app, I want to call a REST endpoint which is hosted on AWS API Gateway. The authorization of the endpoint is AWS_IAM, meaning that the request needs to be signed.</p>\n\n<p>How can signed request be done in Angular? There is a popular package aws4 (<a href=\"https://www.npmjs.com/package/aws4\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/aws4</a>) for JavaScript which would be my preferred option. However, I am not able to use this JS Package in my Angular app. This is what I did:</p>\n\n<ol>\n<li><code>npm install aws4</code> in angular project folder</li>\n<li><code>import * as aws4 from '../../../node_modules/aws4/aws4.js';</code> in my api.service.ts (which is the angular service for calling the APIs).</li>\n</ol>\n\n<p>When using the sign method from my API service</p>\n\n<pre><code>const signedRequest = aws4.sign(opts, {\naccessKeyId: accessKey,\nsecretAccessKey: secretKey,\nsessionToken: session})\n</code></pre>\n\n<p>I am getting following error:</p>\n\n<blockquote>\n  <p>Uncaught ReferenceError: Buffer is not defined at\n  Object../node_modules/core-util-is/lib/util.js at _webpack_require_</p>\n</blockquote>\n\n<p>I have also tried to use declare <code>declare var aws4: any</code>in my API service instead of importing, however I am always getting the error above.</p>\n\n<p>How can the package aws4 be imported to Angular 8 or alternatively, how can signed requests be generated for AWS in an Angular 8 app without implementing each step (meaning I want to use a library).</p>\n\n<p>Update:\nAfter adding Buffer, I am getting following error:</p>\n\n<blockquote>\n  <p>Uncaught TypeError: Cannot read property 'slice' of undefined\n      at Object../node_modules/readable-stream/lib/_stream_writable.js (_stream_writable.js:57)\n      at <strong>webpack_require</strong> (bootstrap:79)\n      at Object../node_modules/readable-stream/readable-browser.js (readable-browser.js:4)\n      at <strong>webpack_require</strong> (bootstrap:79)\n      at Object../node_modules/stream-browserify/index.js (index.js:28)\n      at <strong>webpack_require</strong> (bootstrap:79)\n      at Object../node_modules/hash-base/index.js (index.js:3)\n      at <strong>webpack_require</strong> (bootstrap:79)\n      at Object../node_modules/md5.js/index.js (index.js:3)\n      at <strong>webpack_require</strong> (bootstrap:79)</p>\n</blockquote>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"comments": [{"owner": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1577809799, "post_id": 59546147, "comment_id": 105261823, "body": "But this returns an object of type <code>Observable&lt;string[][]&gt;</code>. How can I change this to an object of type <code>Observable&lt;{logs: string[], date: Date}[]&gt;</code>?"}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "reply_to_user": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 1, "creation_date": 1577814980, "post_id": 59546147, "comment_id": 105263340, "body": "I&#39;ll add it to my example."}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "reply_to_user": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 1, "creation_date": 1577815724, "post_id": 59546147, "comment_id": 105263564, "body": "@ConstantinBeer I also added a working Stackblitz with the example code you provided and the adjustments I made."}], "tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": true, "score": 1, "last_activity_date": 1577815699, "last_edit_date": 1577815699, "creation_date": 1577807531, "answer_id": 59546147, "question_id": 59546080, "link": "https://stackoverflow.com/questions/59546080/how-to-solve-loglist-string-void-is-not-assignable-to-parameter-of-typ/59546147#59546147", "title": "How to solve `(logList: string[]) =&gt; void&#39; is not assignable to parameter of type &#39;(value: string[], index: number) =&gt; ObservableInput&lt;any&gt;`?", "body": "<p>You should not subscribe inside of a <code>map</code> function. Try to use <code>switchMap</code> and switch to an Observable that combines the results into a new Observable like this:</p>\n\n<pre><code>ngOnInit(): void {\n  this.dailyLogs$ = this.dateService.getDates()\n    .pipe(\n      map(values =&gt; values.filter(value =&gt; !!value)), // User filter to get only truthy dates\n      switchMap(dates =&gt; combineLatest( // switch to a combined observable of all 'findLogsByDate' calls and map each to the desired output\n        dates.map(date =&gt; this.logService.findLogsByDate(date) \n          .pipe( \n            map(logList =&gt; ({logs: logList, date}))\n          )\n        )\n      ))\n    );\n}\n</code></pre>\n\n<p>Here a working <a href=\"https://stackblitz.com/edit/angular-byyey4\" rel=\"nofollow noreferrer\">StackBlitz</a>.</p>\n"}], "owner": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 59546147, "answer_count": 1, "score": 1, "last_activity_date": 1577815699, "creation_date": 1577807134, "question_id": 59546080, "link": "https://stackoverflow.com/questions/59546080/how-to-solve-loglist-string-void-is-not-assignable-to-parameter-of-typ", "title": "How to solve `(logList: string[]) =&gt; void&#39; is not assignable to parameter of type &#39;(value: string[], index: number) =&gt; ObservableInput&lt;any&gt;`?", "body": "<p>I have a problem to make an observable object from two observables and keep the order of the first observable. As you can see in the example, the goal is to sort the observables by date.</p>\n\n<p>It looks like the problem lies in the <code>ngOnInit()</code> since there I get the error at the line <code>concatMap(logList =&gt; {</code>:</p>\n\n<pre><code>TS2345: Argument of type '(logList: string[]) =&gt; void' is not assignable to parameter of type '(value: string[], index: number) =&gt; ObservableInput&lt;any&gt;'. \u00a0\u00a0Type 'void' is not assignable to type 'ObservableInput&lt;any&gt;'.\n</code></pre>\n\n<p>I'm using <code>concatMap</code> because otherwise sometimes I have the problem that the <code>dailyLogs</code> are not in the right order.</p>\n\n<p>I have already tried and searched a lot, but after more than a day I could not find anything to get rid of this error message. The strange thing is also that even with this error it sometimes compiles and then the result is the right one. </p>\n\n<p>Also using <code>return</code> inside the <code>concatMap</code> did not work => <code>return dailyLogs.push({logs: logList, date});</code></p>\n\n<p>What am I doing wrong?</p>\n\n<p><br></p>\n\n<p>Following is my example code: </p>\n\n<p><strong>app.component.ts</strong></p>\n\n<pre><code>@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  dailyLogs$: Observable&lt;{logs: string[], date: Date}[]&gt;;\n\n  constructor(\n    private readonly logService: LogService,\n    private readonly dateService: DateService\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.dailyLogs$ = this.dateService.getDates()\n      .pipe(\n        map(values =&gt; {\n          const dates = Array&lt;Date&gt;();\n          values.forEach(value =&gt; {\n            if (value) {\n              dates.push(value);\n            }\n          });\n          return dates;\n        }),\n        map(dates =&gt; {\n          const dailyLogs = Array&lt;{logs: string[], date: Date}&gt;();\n          dates.forEach(date =&gt; {\n            this.logService.findLogsByDate(date)\n              .pipe(\n                concatMap(logList =&gt; {\n                  dailyLogs.push({logs: logList, date});\n                })\n              ).subscribe();\n          });\n          return dailyLogs;\n        })\n      );\n  }\n}\n</code></pre>\n\n<p><strong>app.component.html</strong></p>\n\n<pre><code>&lt;ng-container *ngIf=\"dailyLogs$\"&gt;\n  &lt;div *ngFor=\"let i of [0, 1, 2]\"&gt;\n    &lt;table&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Logs&lt;/th&gt;\n      &lt;/tr&gt;\n      &lt;tr *ngFor=\"let log of (dailyLogs$ | async)[i].logs\"&gt;\n        &lt;td&gt;{{log}}&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;br&gt;\n  &lt;/div&gt;\n&lt;/ng-container&gt;\n</code></pre>\n\n<p><strong>log.service.ts</strong></p>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class LogService {\n\n  firstLogs = [\n    'Log 1',\n    'Log 2',\n    'Log 3',\n    'Log 4'\n  ];\n\n  secondLogs = [\n    'Log 5',\n    'Log 6',\n    'Log 7',\n    'Log 8',\n    'Log 9',\n    'Log 10',\n    'Log 11'\n  ];\n\n  thirdLogs = [\n    'Log 12',\n    'Log 13'\n  ];\n\n  findLogsByDate(date: Date): Observable&lt;string[]&gt; {\n    const dateString = date.getFullYear() + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2);\n\n    if (dateString === '2019-12-17') {\n      return of(this.firstLogs);\n    } else if (dateString === '2019-12-16') {\n      return of(this.secondLogs);\n    } else if (dateString === '2019-12-13') {\n      return of(this.thirdLogs);\n    }\n  }\n}\n</code></pre>\n\n<p><strong>date.service.ts</strong></p>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class DateService {\n\n  firstDate = new Date('2019-12-17');\n  secondDate = new Date('2019-12-16');\n  thirdDate = null;\n  fourthDate = null;\n  fifthDate = new Date('2019-12-13');\n\n  getDates(): Observable&lt;Date[]&gt; {\n    return of([\n      this.firstDate,\n      this.secondDate,\n      this.thirdDate,\n      this.fourthDate,\n      this.fifthDate\n    ]);\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "firebase", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 4701, "user_id": 3662110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/I19Jk.jpg?s=128&g=1", "display_name": "jmargolisvt", "link": "https://stackoverflow.com/users/3662110/jmargolisvt"}, "edited": false, "score": 1, "creation_date": 1577806448, "post_id": 59545911, "comment_id": 105260800, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/49733377/correct-way-to-use-firestore-onsnapshot-with-react-redux\">correct way to use firestore onSnapShot with react redux</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "edited": false, "score": 0, "creation_date": 1577806799, "post_id": 59545948, "comment_id": 105260930, "body": "How to get the which new doc is added without looping through all of the docs or is there no method for that?"}], "tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": false, "score": 2, "last_activity_date": 1577806326, "creation_date": 1577806326, "answer_id": 59545948, "question_id": 59545911, "link": "https://stackoverflow.com/questions/59545911/how-to-use-firebase-functions-with-web-app-on-front-end/59545948#59545948", "title": "How to use firebase functions with web app on front end?", "body": "<p>The way to listen to a collection on the client side is with <code>onSnapshot</code>. This will notify you of every change, so if you only care about particular changes you can compare before and after and only run your code when the part you care about changes.</p>\n\n<pre><code>let prevSnapshot;\n\nfirebase\n  .app()\n  .firestore()\n  .collection('users')\n  .onSnapshot(snapshot =&gt; {\n    if (!prevSnapshot || snapshot.docs.length !== prevSnapshot.docs.length) {\n      // this is either the first snapshot, or the number of documents has changed.\n      prevSnapshot = snapshot;\n      // Do whatever you need to do\n    }\n  });\n</code></pre>\n"}], "owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1577807645, "answer_count": 1, "score": -7, "last_activity_date": 1577806362, "creation_date": 1577806042, "last_edit_date": 1577806362, "question_id": 59545911, "link": "https://stackoverflow.com/questions/59545911/how-to-use-firebase-functions-with-web-app-on-front-end", "closed_reason": "Needs more focus", "title": "How to use firebase functions with web app on front end?", "body": "<p>The thing I want is to detect the change is the collection <code>\"users\"</code>. But not all the change only one type of change. I want to trigger a callback when a new document is added to the collection.</p>\n\n<p>I am really new to firebase. The thing which I think I need is firebase cloud functions. But on the docs, I don't see any way to add <code>firebase-functions</code> and <code>firebase-tools</code> in HTML. If we can't use firebase-functions without node so kindly tell the correct way to detect the addition of new document inside firebase...</p>\n\n<p><strong>Note:</strong> I am also using typescript so please consider that it will not throw any error and give correct autocompletion(if there is a way to use firebase-functions on the browser)</p>\n"}, {"tags": ["javascript", "angular", "typescript", "user-interface", "angular-cli"], "comments": [{"owner": {"reputation": 11, "user_id": 11668536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfb3d2e440fe84d220c0d9bd4334a68?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/11668536/tony"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577806658, "post_id": 59545882, "comment_id": 105260878, "body": "I guess that is about angularJs @jonrsharpe"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577806712, "post_id": 59545882, "comment_id": 105260906, "body": "Why would you guess that? <code>@angular</code> and the <code>ng</code> CLI command is <a href=\"https://stackoverflow.com/questions/tagged/angular\">angular</a>, not <a href=\"https://stackoverflow.com/questions/tagged/angularjs\">angularjs</a>."}, {"owner": {"reputation": 11, "user_id": 11668536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfb3d2e440fe84d220c0d9bd4334a68?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/11668536/tony"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577807220, "post_id": 59545882, "comment_id": 105261079, "body": "i tried that but it needs admin access which i dont have.. is there any possible way to look into this @jonrsharpe..thank you for ur effort."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577807572, "post_id": 59545882, "comment_id": 105261191, "body": "As you&#39;ve seen, it works if you use <code>npm</code> to activate <code>ng</code> via the scripts in <code>package.json</code>. If you have a script like <code>&quot;ng&quot;: &quot;ng&quot;</code>, then e.g. <code>npm run ng -- --version</code> should work."}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 12249567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gu0WB.jpg?s=128&g=1", "display_name": "prathameshk73", "link": "https://stackoverflow.com/users/12249567/prathameshk73"}, "is_accepted": false, "score": 0, "last_activity_date": 1577807409, "creation_date": 1577807409, "answer_id": 59546130, "question_id": 59545882, "link": "https://stackoverflow.com/questions/59545882/the-term-ng-is-not-recognized-as-the-name-of-a-cmdlet-in-angular/59546130#59546130", "title": "the term ng is not recognized as the name of a cmdlet in angular", "body": "<p>Open Node JS command Prompt</p>\n\n<p>First uninstall angular cli globally</p>\n\n<p><strong>npm uninstall -g @angular/cli</strong></p>\n\n<p><strong>npm cache clean --force</strong></p>\n\n<p>Install latest angular cli</p>\n\n<p><strong>npm install -g @angular/cli</strong></p>\n\n<p>You will be able to access ng variable in  Node JS command prompt only. If you are using any other terminal such as windows CMD or bash ng command will not work. To make it work you need to set npm environment variables. To set environment variables you need admin access.</p>\n"}], "owner": {"reputation": 11, "user_id": 11668536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfb3d2e440fe84d220c0d9bd4334a68?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/11668536/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15691, "favorite_count": 1, "closed_date": 1577876182, "answer_count": 1, "score": -1, "last_activity_date": 1577807409, "creation_date": 1577805820, "question_id": 59545882, "link": "https://stackoverflow.com/questions/59545882/the-term-ng-is-not-recognized-as-the-name-of-a-cmdlet-in-angular", "closed_reason": "Duplicate", "title": "the term ng is not recognized as the name of a cmdlet in angular", "body": "<p>I'm very new to angular and i am learning from a project that has been developed some months back.</p>\n\n<p>node v is 12.13.1\nnpm v is 6.12.1</p>\n\n<ul>\n<li>I'm working in windows Operating system.</li>\n<li>when i tried ng --version or ng -v or ng v it is showing \"the term ng is not recognized as the name of a cmdlet in angular\".</li>\n<li>But using npm list -global --depth 0 shows me that @angular/cli@8.3.21.</li>\n<li>to run the application im using npm start since ng serve is not working.</li>\n</ul>\n\n<p>I tried Updating angularCli by following the steps given in the below link but still the same.\n<a href=\"https://www.npmjs.com/package/@angular/cli\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/@angular/cli</a></p>\n\n<p>please help me to solve this issue.\nThanks in advance.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 6876, "user_id": 4755974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de25c70b999a2ba776897801464447db?s=128&d=identicon&r=PG&f=1", "display_name": "Veselin Davidov", "link": "https://stackoverflow.com/users/4755974/veselin-davidov"}, "is_accepted": false, "score": 0, "last_activity_date": 1577805835, "creation_date": 1577805835, "answer_id": 59545883, "question_id": 59545876, "link": "https://stackoverflow.com/questions/59545876/what-is-in-typescript/59545883#59545883", "title": "What is (!!) in typescript?", "body": "<p>This changes the type of the variable to boolean. This way undefined or null or 0 for example will become false. And if it has a value will become true. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12539811"}, "delete_vote_count": 2, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1577805891, "answer_count": 1, "score": -1, "last_activity_date": 1577805835, "creation_date": 1577805771, "question_id": 59545876, "link": "https://stackoverflow.com/questions/59545876/what-is-in-typescript", "closed_reason": "Duplicate", "title": "What is (!!) in typescript?", "body": "<p>I encountered <code>!!</code> in some places . I do not know what that is. for example :</p>\n\n<pre><code>return this.http.get('url')\n           .pipe(item=&gt; !!item);\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 1, "creation_date": 1577837032, "post_id": 59545907, "comment_id": 105267550, "body": "Thanks for the answer.  I have read the docs you posted but I am still not sure what I need to do.  I have updated my code showing that I am setting the <code>sessionStorage</code> cookie, but I still have the issue. (and happy new years)"}, {"owner": {"reputation": 6121, "user_id": 816116, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/0IoOR.jpg?s=128&g=1", "display_name": "Gasim", "link": "https://stackoverflow.com/users/816116/gasim"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1577838276, "post_id": 59545907, "comment_id": 105267676, "body": "Open your inspector and check the &quot;Storage&quot; tab. There is a section called &quot;Session Storage.&quot; If you have your token there, you are all set in terms of setting the session. Now, you need to load it. Create an effect in your app.js (I would move AuthContext to its own AuthProvider component and call the effect there) and retrieve the token from session inside the effect. If the token is valid, set <code>authTokens</code> to the session data and pass that state to the context."}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1577900411, "post_id": 59545907, "comment_id": 105277912, "body": "I am sorry for be so clueless but where is the inspector?"}, {"owner": {"reputation": 6121, "user_id": 816116, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/0IoOR.jpg?s=128&g=1", "display_name": "Gasim", "link": "https://stackoverflow.com/users/816116/gasim"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1577900462, "post_id": 59545907, "comment_id": 105277925, "body": "I meant the dev tools. The one that you open by clicking \u201cinspect element\u201d"}], "tags": [], "owner": {"reputation": 6121, "user_id": 816116, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/0IoOR.jpg?s=128&g=1", "display_name": "Gasim", "link": "https://stackoverflow.com/users/816116/gasim"}, "is_accepted": true, "score": 4, "last_activity_date": 1577806000, "creation_date": 1577806000, "answer_id": 59545907, "question_id": 59545812, "link": "https://stackoverflow.com/questions/59545812/why-am-i-losing-my-login-in-my-react-app/59545907#59545907", "title": "Why am I losing my login in my React App?", "body": "<p>That's because you are storing login credentials in session's memory. When you change the URL on your own or refresh the page, the application's router (e.g React Router) is not the routing the website. It is the browser's native navigation system that loads it. As a result, all the memory that existed previously in the session is reset. It is loading a new page instead of navigating within the same page (do not let the URL change to fool you that it is actually a new page -- that's how HTML5 browser history works).</p>\n\n<p>You need to persist the state between sessions. You can do it using cookies, <code>sessionStorage</code>, or <code>localStorage</code>. Do not forget that if you use session storage, your user's information will be deleted if you close the browser.</p>\n\n<ul>\n<li>Session Storage (MDN): <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage</a></li>\n<li>Local Storage (MDN): <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage</a></li>\n</ul>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59545907, "answer_count": 1, "score": 0, "last_activity_date": 1577837582, "creation_date": 1577805363, "last_edit_date": 1577837582, "question_id": 59545812, "link": "https://stackoverflow.com/questions/59545812/why-am-i-losing-my-login-in-my-react-app", "title": "Why am I losing my login in my React App?", "body": "<p>I have an reactjs app that uses a django backend to deal with authentication.</p>\n\n<p>Here are the pertinent parts of my App.tsx Typescript code for my react app.</p>\n\n<pre><code>import React, {useState, useEffect} from 'react';\nimport { BrowserRouter as Router, Route, Link, RouteComponentProps, Redirect } from 'react-router-dom';\nimport {AuthContext, useAuth} from \"./context/auth\";\nimport './App.css';\nimport PrivateRoute from \"./PrivateRoute\";\nimport logoImg from \"./img/logo.svg\";\nimport { Card, Logo, Form, Input, Button } from \"./components/AuthForm\";\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\n\n\n// The \"Home\" Page.\nfunction Index() {\n    const [appUser, setAppUser] = useState({pk:-1, username: '', email: '', first_name: '', last_name:''});\n    const {authTokens} = useAuth();\n    useEffect(()=&gt; {\n        if (authTokens) {\n            const url = 'http://localhost:8000/rest-auth/user/';\n            const withCredentials = true;\n            const method = 'get';\n\n            // the token is what we got from the backend when we logged in.\n            const headers = {\n                \"Authorization\": \"Token \" + authTokens['key'] + \" \"\n            };\n            axios.request({method, url, withCredentials, headers}).then(response =&gt; {\n                console.log('Login() response is ', response);\n                setAppUser((appUser) =&gt; ({...appUser, ...response.data}));\n            })\n            //    .catch(error =&gt; { setAppUser(null); setLoggedIn(false); })\n        }\n    }, [authTokens]);\n    return authTokens ? (\n        &lt;h2&gt;Home you are logged in. {appUser.first_name || 'No first name'} email is {appUser.email}&lt;/h2&gt;\n    ) : (\n        &lt;Router&gt;\n            &lt;div&gt;\n                &lt;h2&gt;Home you not logged in.&lt;/h2&gt;\n                &lt;nav&gt;\n                    &lt;ul&gt;\n                        &lt;li&gt; &lt;Link to=\"/login\"&gt;Login&lt;/Link&gt; &lt;/li&gt;\n                        &lt;li&gt; &lt;Link to=\"/signup\"&gt;Sign Up&lt;/Link&gt; &lt;/li&gt;\n                    &lt;/ul&gt;\n                &lt;/nav&gt;\n\n                &lt;Route path=\"/login\" component={Login} /&gt;\n                &lt;Route path=\"/signup\" component={Signup} /&gt;\n            &lt;/div&gt;\n        &lt;/Router&gt;\n    );\n}\n\nfunction Login (props: RouteComponentProps&lt;TParams&gt;) {\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {authTokens, setAuthTokens} = useAuth();\n  const [isError, setIsError] = useState(false);\n  const referer = props.location.state ? props.location.state.referer : '/';\n  const [appUser, setAppUser] = useState({pk:-1, username: '', email: '', first_name: '', last_name:''});\n  const [isLoggedIn, setLoggedIn] = useState(false);\n\n  useEffect(()=&gt; {\n      // axios.get('http://localhost:8000/api/v1/rest-auth/user/', {headers: { 'Authorization': `Token ${token}`}})\n        if (!!authTokens) {\n            const url = 'http://localhost:8000/rest-auth/user/';\n            const withCredentials = true;\n            const method = 'get';\n            const headers = {\n                \"Authorization\": \"Token \" + authTokens['key'] + \" \"\n            };\n            axios.request({method, url, withCredentials, headers}).then(response =&gt; {\n                console.log('Login() /rest-auth/user response is ', response);\n                // setAppUser({...appUser, ...response.data});\n                setAppUser((appUser) =&gt; ({...appUser, ...response.data}));\n                setLoggedIn(true);\n            })\n            //    .catch(error =&gt; { setAppUser(null); setLoggedIn(false); })\n        }\n  }, [authTokens]);\n\n  function postLogin() {\n        const url = 'http://localhost:8000/rest-auth/login/';\n        const withCredentials = true;\n        const method = 'post';\n        const data = {\"username\": userName, \"password\": password};\n        // BIG WARNING!!!\n        // password is being passed unencrypted and in the clear.\n        axios.request({url, withCredentials, data, method}).then(\n            result =&gt; {\n                // console.log('Login.postLogin.else result is :', result);\n                if (result.status === 200) {\n                    setAuthTokens(result.data);\n                } else {\n                    setIsError(true);\n                }\n            });// .catch(e =&gt; { console.log('Login.postLogin.catch e is :', e); setIsError(true); });\n  } // end postLogin\n\n  if (authTokens) {\n    console.log('Login page authTokens is ', authTokens);\n    console.log('Login page appUser is ', appUser);\n\n    // UPDATE\n    // SET sessionStorage cookie\n    window.sessionStorage.setItem('key', authTokens['key']);\n\n    return &lt;Redirect to={referer}/&gt;;\n  } else {\n    console.log('Login page authTokens is ', authTokens);\n    console.log('Login page appUser is ', appUser);\n  }\n\n  return (\n      &lt;Card&gt;\n        &lt;Logo src={logoImg} /&gt;\n        &lt;Form&gt;\n          &lt;Input\n              type=\"username\"\n              placeholder=\"username\"\n              value={userName}\n              onChange={(e: { target: { value: React.SetStateAction&lt;string&gt;; }; }) =&gt; { setUserName(e.target.value); }}\n          /&gt;\n          &lt;Input\n              type=\"password\"\n              value={password}\n              onChange={(e: { target: { value: React.SetStateAction&lt;string&gt;; }; }) =&gt; { setPassword(e.target.value); }}\n              placeholder=\"password\" /&gt;\n          &lt;Button onClick={postLogin}&gt;Sign In&lt;/Button&gt;\n        &lt;/Form&gt;\n        &lt;Link to=\"/signup\"&gt;Don't have an account?&lt;/Link&gt;\n      &lt;/Card&gt;\n  );\n}\n\nconst App: React.FunctionComponent = () =&gt; {\n    const [authTokens, setAuthTokens] = useState(undefined);  //type: AuthTokens | undefined (see auth.js)\n    // &lt;AuthContext.Provider value={false}&gt;\n    return (\n      &lt;AuthContext.Provider value={{ authTokens, setAuthTokens }}&gt;\n        &lt;Router&gt;\n          &lt;div&gt;\n            &lt;nav&gt;\n              &lt;ul&gt;\n                &lt;li&gt; &lt;Link to=\"/\"&gt;Home&lt;/Link&gt; &lt;/li&gt;\n                &lt;li&gt; &lt;Link to=\"/products/1\"&gt;First Product&lt;/Link&gt; &lt;/li&gt;\n                &lt;li&gt; &lt;Link to=\"/products/2\"&gt;Second Product&lt;/Link&gt; &lt;/li&gt;\n                &lt;li&gt; &lt;Link to=\"/admin\"&gt;Admin Page&lt;/Link&gt; &lt;/li&gt;\n              &lt;/ul&gt;\n            &lt;/nav&gt;\n\n            &lt;Route path=\"/\" exact component={Index} /&gt;\n            &lt;Route path=\"/products/:id\" component={Product} /&gt;\n            &lt;Route path=\"/login\" component={Login} /&gt;\n            &lt;Route path=\"/signup\" component={Signup} /&gt;\n            &lt;PrivateRoute path=\"/admin\" component={Admin} /&gt;\n            &lt;Route path=\"/confirm-email/:id\" component={ConfirmEmail} /&gt;\n          &lt;/div&gt;\n        &lt;/Router&gt;\n      &lt;/AuthContext.Provider&gt;\n  );\n};\n\nexport default App;\n</code></pre>\n\n<p>Now if I start my backend server and start my app with <code>np start</code> I can navigate in a browser to <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a> and I see:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GkX7L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GkX7L.png\" alt=\"enter image description here\"></a></p>\n\n<p>and I can login if I click the \"Login\" link.  Here is a screen shot of me logged in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oezAC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oezAC.png\" alt=\"enter image description here\"></a></p>\n\n<p>I do notice that the browser location still reports <a href=\"http://localhost:3000/login\" rel=\"nofollow noreferrer\">http://localhost:3000/login</a> while the \"Home Page\" is being displayed.  But we can see that a Sheldon Plankton has logged in.  Now if I click on the links I have: Home, Product 1, Product 2 and Admin everything is fine.  But if I type in a URL into the browser like <a href=\"http://localhost:3000/\" rel=\"nofollow noreferrer\">http://localhost:3000/</a> I lose my login and I see:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nBDqd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nBDqd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Which shows that Sheldon Plankton is no longer logged in.</p>\n\n<p>What I am doing wrong?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 0, "creation_date": 1577805333, "post_id": 59545769, "comment_id": 105260439, "body": "<i>on several users</i> ? So you want this across requests? Angular only runs in the client. You need a server technology to synchronise this. As far as angular is concerned, you are <i>only start one at a time</i> but that is in the context of the Js running on that users browser"}], "answers": [{"comments": [{"owner": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 0, "creation_date": 1577805466, "post_id": 59545827, "comment_id": 105260481, "body": "The OP is already doing this. See their <a href=\"https://stackblitz.com/edit/angular-vc5ndg?file=src%2Fapp%2Ftask.service.ts\" rel=\"nofollow noreferrer\">service code</a> (handily not included in the question)"}, {"owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "reply_to_user": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 0, "creation_date": 1577805502, "post_id": 59545827, "comment_id": 105260491, "body": "no he isn&#39;t, you can start multiple timer in his stackblitz, not in mine"}, {"owner": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 0, "creation_date": 1577805551, "post_id": 59545827, "comment_id": 105260503, "body": "<code>startTimer....clearInterval(currentUserTimer.interval);..</code> I guess it depends what the OP means by start timer, but I&#39;m pretty sure this is not what the OP wants anyway"}, {"owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "reply_to_user": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 0, "creation_date": 1577805613, "post_id": 59545827, "comment_id": 105260518, "body": "well maybe it&#39;s like this inside his service, but try his stackblitz and you will see, you can have multiple timer running"}, {"owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577805946, "post_id": 59545827, "comment_id": 105260629, "body": "@Alann Your code also worked correctly, thank you very much!"}, {"owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "edited": false, "score": 0, "creation_date": 1577806032, "post_id": 59545827, "comment_id": 105260661, "body": "you&#39;re welcome ! Since you only showed us component code in the post I thought you wanted to solve it inside the component, I think the other answer is the best solution for your problem :)"}], "tags": [], "owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "is_accepted": false, "score": 1, "last_activity_date": 1577805471, "last_edit_date": 1577805471, "creation_date": 1577805441, "answer_id": 59545827, "question_id": 59545769, "link": "https://stackoverflow.com/questions/59545769/do-not-run-time-count-simultaneously/59545827#59545827", "title": "Do not run time count simultaneously", "body": "<p>If you just want to have one timer at a time for a specific user just do it like this :</p>\n\n<pre><code>  startTimer(data) {\n    if(this.currentTimer){\n      this.taskService.pauseTimer(this.currentTimer.key.ID);\n    }\n   this.currentTimer = data;\n   this.taskService.startTimer(data.key.ID);\n  }\n\n  pauseTimer(data) {\n    this.currentTimer = undefined;\n    this.currentTimer = this.taskService.pauseTimer(data.key.ID);\n  }\n</code></pre>\n\n<p>working sample : <a href=\"https://stackblitz.com/edit/angular-sdlgqn\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-sdlgqn</a></p>\n\n<p>as Liam said in comment, if you want to have only ONE timer across request, you have to implement it on the server side</p>\n"}, {"tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 2, "last_activity_date": 1577805678, "creation_date": 1577805678, "answer_id": 59545860, "question_id": 59545769, "link": "https://stackoverflow.com/questions/59545769/do-not-run-time-count-simultaneously/59545860#59545860", "title": "Do not run time count simultaneously", "body": "<p>Modify your start timer function as follows,</p>\n\n<p>this will check before starting any timer if existing time is running, if so it will stop it and start the requested timer.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-kwpbdc?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code> startTimer(data) {\n\n    // get remaining ids\n    const pauseIds = [];\n    this.data.forEach(d =&gt; {\n      if (d.ID !== data.key.ID\n        &amp;&amp; this.taskService.timerForUsers[d.ID] !== undefined\n        &amp;&amp; this.taskService.timerForUsers[d.ID].currentState === 'start')\n          pauseIds.push(d.ID);\n    });\n\n    // pause other timers\n    pauseIds.forEach(id =&gt; {\n      this.taskService.pauseTimer(id);\n    });\n\n    this.taskService.startTimer(data.key.ID);\n  }\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 59545860, "answer_count": 2, "score": 1, "last_activity_date": 1577822908, "creation_date": 1577804988, "last_edit_date": 1577822908, "question_id": 59545769, "link": "https://stackoverflow.com/questions/59545769/do-not-run-time-count-simultaneously", "title": "Do not run time count simultaneously", "body": "<p>I have a button that allows me to start / stop the timing of a user.</p>\n\n<p>At this time, it is possible to start several counts on several users simultaneously.</p>\n\n<p>Is there a way to only start one at a time? If I already have a count started, when trying to start a different row count, I want the previous row to be paused and the new row to start (the time from zero).</p>\n\n<p>How can I apply this?</p>\n\n<p><strong>html</strong></p>\n\n<pre><code>&lt;button id=\"button-basic\" dropdownToggle aria-controls=\"dropdown-basic\"&gt;\n        &lt;img *ngIf=\"taskService.timerForUsers[data.key.ID]?.currentState === 'pause' || taskService.timerForUsers[data.key.ID] == undefined\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcW6cJlI-KlS721hkuHDTMydZ_snrkhL9sm9wYHWRhd3FlvF1b&amp;s\" width=\"50\" height=\"50\"&gt;\n        &lt;img *ngIf=\"taskService.timerForUsers[data.key.ID]?.currentState ==='start'\"\n        src=\"https://png.pngtree.com/png-clipart/20190516/original/pngtree-pause-vector-icon-png-image_3791321.jpg\" width=\"50\" height=\"50\"&gt;\n        &lt;img *ngIf=\"!taskService.timerForUsers[data.key.ID]?.currentState ==='start'\"\n        src=\"https://png.pngtree.com/png-clipart/20190516/original/pngtree-pause-vector-icon-png-image_3791321.jpg\" width=\"50\" height=\"50\"&gt;\n      &lt;/button&gt;\n            &lt;ul id=\"dropdown-basic\" *dropdownMenu class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"button-basic\"&gt;\n                &lt;li role=\"menuitem\"&gt;&lt;a class=\"dropdown-item\"\n                        *ngIf=\"!taskService.timerForUsers[data.key.ID] || taskService.timerForUsers[data.key.ID].currentState === 'pause'\"\n                        routerLinkActive=\"active\" (click)=\"startTimer(data)\"&gt;Start&lt;/a&gt;&lt;/li&gt;\n                &lt;li role=\"menuitem\"&gt;&lt;a class=\"dropdown-item\"\n                        *ngIf=\"taskService.timerForUsers[data.key.ID]?.currentState === 'start'\"\n                        routerLinkActive=\"active\" (click)=\"pauseTimer(data)\"&gt;Stop&lt;/a&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 49708, "user_id": 438581, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/15a0033698497951faf2992ff3e1825c?s=128&d=identicon&r=PG", "display_name": "Brett DeWoody", "link": "https://stackoverflow.com/users/438581/brett-dewoody"}, "edited": false, "score": 0, "creation_date": 1577805473, "post_id": 59545749, "comment_id": 105260483, "body": "Sounds like rethinking how the state is managed might be necessary. For example, what if the tab state was managed in the parent, and passed down to each tab as props."}, {"owner": {"reputation": 28249, "user_id": 1347281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Frfi1.png?s=128&g=1", "display_name": "Vidya", "link": "https://stackoverflow.com/users/1347281/vidya"}, "reply_to_user": {"reputation": 49708, "user_id": 438581, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/15a0033698497951faf2992ff3e1825c?s=128&d=identicon&r=PG", "display_name": "Brett DeWoody", "link": "https://stackoverflow.com/users/438581/brett-dewoody"}, "edited": false, "score": 0, "creation_date": 1577806239, "post_id": 59545749, "comment_id": 105260731, "body": "Right. That&#39;s basically what I mentioned near the end. I was just curious if there was another way I was missing."}], "answers": [{"comments": [{"owner": {"reputation": 28249, "user_id": 1347281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Frfi1.png?s=128&g=1", "display_name": "Vidya", "link": "https://stackoverflow.com/users/1347281/vidya"}, "edited": false, "score": 0, "creation_date": 1577807105, "post_id": 59545859, "comment_id": 105261028, "body": "The custom hook is cool, but for now I will probably go for the first option, which aligns with what I was thinking anyway. The only thing I kinda wish for is that it could be a bit simpler because all the parent needs to do is reset the child to Tab 1; it doesn&#39;t need full control over child tabs. But alas, it looks like it&#39;s all or nothing."}], "tags": [], "owner": {"reputation": 6121, "user_id": 816116, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/0IoOR.jpg?s=128&g=1", "display_name": "Gasim", "link": "https://stackoverflow.com/users/816116/gasim"}, "is_accepted": true, "score": 1, "last_activity_date": 1577805677, "creation_date": 1577805677, "answer_id": 59545859, "question_id": 59545749, "link": "https://stackoverflow.com/questions/59545749/reset-tabs-in-child-component-in-react/59545859#59545859", "title": "Reset Tabs in Child Component in React", "body": "<p>You can add a prop to the tab container that sets the active tab from outside:</p>\n\n<pre><code>&lt;CategoryTabContainer activeTab={1} /&gt;\n\nconst CategoryTabContainer : React.FC&lt;ClientCategoryTabsProps&gt; = ({ activeTab = 1 }) =&gt; {\n  const [activeTabValue, setActiveTabValue] = useState&lt;number&gt;(activeTab);\n\n  // synchronize props with state\n  useEffect(() =&gt; {\n    if (activeTab !== activeTabValue) {\n      setActiveTabValue(activeTab);\n    }\n  }, [activeTab]);\n\n  // ...\n}\n</code></pre>\n\n<p>Then, set the logic for reset state in parent component.</p>\n\n<p>On the other hand, would you consider using <code>ContainerTabContainer</code> for rendering and using hooks to for setting the state?</p>\n\n<pre><code>const [activeTab, onTabClick, setActiveTab] = useTabs(tabData);\n\nreturn (\n  &lt;&gt;\n    &lt;button onClick={() =&gt; setActiveTab(0)}&gt;Reset&lt;/button&gt;\n    &lt;CategoryTabContainer activeTab={activeTab} onTabClick={onTabClick} /&gt;\n  &lt;/&gt;\n);\n</code></pre>\n\n<p>I personally prefer this approach more as it is more direct and \"Reacty\" :)</p>\n"}], "owner": {"reputation": 28249, "user_id": 1347281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Frfi1.png?s=128&g=1", "display_name": "Vidya", "link": "https://stackoverflow.com/users/1347281/vidya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 59545859, "answer_count": 1, "score": 0, "last_activity_date": 1577805677, "creation_date": 1577804892, "question_id": 59545749, "link": "https://stackoverflow.com/questions/59545749/reset-tabs-in-child-component-in-react", "title": "Reset Tabs in Child Component in React", "body": "<p>Consider two React components written in TypeScript where one is a child of the other. The child has tabs and maintains its own state as to which tab is currently selected:</p>\n\n<pre><code>export const ClientCategoryTabs: React.FunctionComponent&lt;ClientCategoryTabsProps&gt; = (props: ClientCategoryTabsProps) =&gt; {\n    const [state, setState] = useState&lt;ClientCategoryTabsState&gt;({\n        activeTab: \"1\"\n    });\n...}\n</code></pre>\n\n<p>There are other functions that toggle tabs on click as needed. The contents of the tabs may change, and that's handled in further descendants of this tabbed child component.</p>\n\n<p>Meanwhile, there are events in the parent component that need to reset the active tab to the first.</p>\n\n<p>While I know that providing new props can trigger a rerender, I can't figure out how to trigger a reset of the child state (well, just the tabs not the data inside the tabs) without leaking that state to the parent--in other words, maintaining the active tab state in the parent and then initializing child state with that value.</p>\n\n<p>Any ideas on how to maintain that separation are appreciated.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "cordova", "ionic-framework"], "comments": [{"owner": {"reputation": 21295, "user_id": 5437671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ZlWc.png?s=128&g=1", "display_name": "R. Richards", "link": "https://stackoverflow.com/users/5437671/r-richards"}, "edited": false, "score": 1, "creation_date": 1577803342, "post_id": 59545437, "comment_id": 105259759, "body": "<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval\" rel=\"nofollow noreferrer\">setInterval</a> doesn&#39;t return an Observable, or a Promise for that matter. It returns an interval ID which uniquely identifies the interval. You cannot subscribe to it."}, {"owner": {"reputation": 113, "user_id": 9138382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a921d6cffbce5de2ff34f4813f80b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/9138382/valentino"}, "reply_to_user": {"reputation": 21295, "user_id": 5437671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ZlWc.png?s=128&g=1", "display_name": "R. Richards", "link": "https://stackoverflow.com/users/5437671/r-richards"}, "edited": false, "score": 0, "creation_date": 1577803390, "post_id": 59545437, "comment_id": 105259776, "body": "Thanks for your answer. Im not an experienced coder. Do you know how tho fix it?"}, {"owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 2, "creation_date": 1577803656, "post_id": 59545437, "comment_id": 105259884, "body": "<a href=\"https://rxjs-dev.firebaseapp.com/api/index/function/interval\" rel=\"nofollow noreferrer\"><code>interval</code></a> is the Observable alternative to <code>setInterval()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 9138382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a921d6cffbce5de2ff34f4813f80b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/9138382/valentino"}, "edited": false, "score": 0, "creation_date": 1577804183, "post_id": 59545552, "comment_id": 105260050, "body": "Thanks a lot. Unfortunately, I cant find a way to implement it in my existing logic. Do you know how to solve it?"}], "tags": [], "owner": {"reputation": 7547, "user_id": 3429323, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fc5012a49b4671fdf8c473ee90190fc0?s=128&d=identicon&r=PG", "display_name": "Elias Soares", "link": "https://stackoverflow.com/users/3429323/elias-soares"}, "is_accepted": false, "score": 0, "last_activity_date": 1577803734, "creation_date": 1577803734, "answer_id": 59545552, "question_id": 59545437, "link": "https://stackoverflow.com/questions/59545437/how-to-subscribe-to-setinterval-in-angular-app/59545552#59545552", "title": "How to .subscribe to setInterval() in Angular app?", "body": "<p>You can use the <a href=\"https://www.learnrxjs.io/operators/creation/interval.html\" rel=\"nofollow noreferrer\"><code>interval()</code> from RxJS</a>:</p>\n\n<pre><code>// RxJS v6+\nimport { interval } from 'rxjs';\n\nconst source = interval(1000);\n\nsource.subscribe(/* your logic here */);\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 9138382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a921d6cffbce5de2ff34f4813f80b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/9138382/valentino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577803734, "creation_date": 1577803065, "question_id": 59545437, "link": "https://stackoverflow.com/questions/59545437/how-to-subscribe-to-setinterval-in-angular-app", "title": "How to .subscribe to setInterval() in Angular app?", "body": "<p>I am trying to build an iOS location tracking app with the Ionic 5 Framework, Angular, and Cordova Geolocation Plugin.</p>\n\n<p>I used to get user location changes with the watchPosition() function and it worked fine on Android devices. However, it does not work on iOS devices. </p>\n\n<p>My new approach is to get the current location with the getCurrentPosition() function combined with setInterval(). To get an updated location every one or two seconds.</p>\n\n<p>Unfortunately, I am getting following error now:</p>\n\n<p><strong><em>TypeError: this.watchLocationUpdates.subscribe is not a function</em></strong></p>\n\n<p>Anyone an Idea how to fix this?</p>\n\n<pre><code>  watchLocation() {\n    const options = {\n      maximumAge: 3600000,\n      timeout: 5000,\n      enableHighAccuracy: true,\n    };\n    this.isWatching = true;\n    this.trackingId =  '-' + Math.random().toString(36).substr(2, 28);\n\n    // Please find relevant setInterval() part below\n    this.watchLocationUpdates = setInterval(() =&gt; { this.geolocation.getCurrentPosition(options); }, 1000);\n    this.watchLocationUpdatesSub = this.watchLocationUpdates.subscribe((resp) =&gt; {\n      this.geoLocations = resp.coords;\n      this.geoLatitude = resp.coords.latitude;\n      this.geoLongitude = resp.coords.longitude;\n      this.geoAccuracy = Math.trunc(resp.coords.accuracy);\n      this.timeStamp = resp.timestamp;\n\n      const position = new google.maps.LatLng(resp.coords.latitude, resp.coords.longitude);\n      this.map.setCenter(position);\n      this.map.setZoom(16);\n\n      this.markers.map(marker =&gt; marker.setMap(null));\n      this.markers = [];\n        const latLng = new google.maps.LatLng(resp.coords.latitude, resp.coords.longitude);\n        const marker = new google.maps.Marker({\n          map: this.map,\n          icon: {\n            path: google.maps.SymbolPath.CIRCLE,\n            scale: 13,\n            fillColor: '#1AA0EC',\n            fillOpacity: 1,\n            strokeColor: 'white',\n            strokeWeight: 2\n        },\n          position: latLng\n        });\n        this.markers.push(marker);\n\n      console.table('watchLocation function called', {\n        trackingId: this.trackingId,\n        latitude: this.geoLatitude,\n        longitude: this.geoLongitude,\n        accuracy: this.geoAccuracy,\n        timeStamp: this.timeStamp,\n        uId: this.uId\n        });\n      this.geolocationService.insertUserGeolocation({\n        trackingId: this.trackingId,\n        latitude: this.geoLatitude,\n        longitude: this.geoLongitude,\n        accuracy: this.geoAccuracy,\n        timeStamp: this.timeStamp,\n        uId: this.uId\n        })\n        .subscribe((response) =&gt; {\n          localStorage.setItem('lastLocation', JSON.stringify({\n            trackingId: this.trackingId,\n            latitude: this.geoLatitude,\n            longitude: this.geoLongitude,\n            accuracy: this.geoAccuracy,\n            timeStamp: this.timeStamp,\n            uId: this.uId\n            }));\n          console.log(`user location data inserted in FB`, {\n            trackingId: this.trackingId,\n            latitude: this.geoLatitude,\n            longitude: this.geoLongitude,\n            accuracy: this.geoAccuracy,\n            timeStamp: this.timeStamp,\n            uId: this.uId\n            });\n        });\n      });\n  }```\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "react-native", "parent-child"], "comments": [{"owner": {"reputation": 291, "user_id": 10296360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a72de94db4a8f2d0fbb630caa6afbec?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Friedman", "link": "https://stackoverflow.com/users/10296360/nick-friedman"}, "edited": false, "score": 0, "creation_date": 1577816260, "post_id": 59545291, "comment_id": 105263710, "body": "I didn&#39;t read through all the above code, but can&#39;t you just pass down a function that will call setState on the grandfather to add the selected id?"}, {"owner": {"reputation": 45, "user_id": 7401830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BUdm5YNbxrk/AAAAAAAAAAI/AAAAAAAAAAw/OUhPrgM_bhU/photo.jpg?sz=128", "display_name": "Assaf petronio", "link": "https://stackoverflow.com/users/7401830/assaf-petronio"}, "reply_to_user": {"reputation": 291, "user_id": 10296360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a72de94db4a8f2d0fbb630caa6afbec?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Friedman", "link": "https://stackoverflow.com/users/10296360/nick-friedman"}, "edited": false, "score": 0, "creation_date": 1577878726, "post_id": 59545291, "comment_id": 105272932, "body": "could you maybe show what you mean? because I couldn&#39;t figure it out"}], "owner": {"reputation": 45, "user_id": 7401830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BUdm5YNbxrk/AAAAAAAAAAI/AAAAAAAAAAw/OUhPrgM_bhU/photo.jpg?sz=128", "display_name": "Assaf petronio", "link": "https://stackoverflow.com/users/7401830/assaf-petronio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577802276, "creation_date": 1577802276, "question_id": 59545291, "link": "https://stackoverflow.com/questions/59545291/react-context-api", "title": "React Context Api", "body": "<p>Im developing a products table with checkboxes on the side, the check box job is to send the Id of the choosen product once its clicked to it's grandfather so i can build an array of the choosen ones and send them via api.</p>\n\n<p>Its built like this:</p>\n\n<p>grandfather - Table page component.</p>\n\n<p>father - The table itself.</p>\n\n<p>child - The checkbox component.</p>\n\n<p>basically I'm having trouble how to pass the information, i know i should use context api but the syntax is confusing me, here's the code:</p>\n\n<p>Grandfather:</p>\n\n<pre><code>interface Istate {\n  Select: boolean;\n  SelectT: boolean;\n  SelectI: boolean;\n  Loader: boolean;\n  numOfProds: number;\n  listing: any;\n  checkBoxId: any;\n  prodName: string;\n  quantity: number;\n  price: number;\n  TempProdName: string;\n  TempQuantity: number;\n  TempPrice: number;\n}\n\ninterface Iprops {\n  id: string;\n  name: string;\n}\n\nclass Products extends Component&lt;Iprops, Istate&gt; {\n  state = {\n    Select: false,\n    SelectT: false,\n    SelectI: false,\n    Loader: false,\n    numOfProds: 0,\n    listing: Array,\n    checkBoxId: '',\n    prodName: '',\n    quantity: 0,\n    price: 0,\n    TempProdName: '',\n    TempQuantity: 0,\n    TempPrice: 0,\n  };\n\n  async componentDidMount() {\n    this.showLoader();\n    const listing = await AllProductsService.AllProducts();\n    this.setState({ listing });\n    console.log(listing);\n    this.setState({ numOfProds: listing.length });\n    this.hideLoader();\n  }\n\n  toggleSelect = () =&gt; {\n    const { Select } = this.state;\n    this.setState({ Select: !Select });\n  };\n\n  toggleSelect2 = () =&gt; {\n    const { SelectT } = this.state;\n    this.setState({ SelectT: !SelectT });\n  };\n\n  toggleSelect3 = () =&gt; {\n    const { SelectI } = this.state;\n    this.setState({ SelectI: !SelectI });\n  };\n\n  showLoader = () =&gt; {\n    this.setState({ Loader: true });\n  };\n\n  hideLoader = () =&gt; {\n    this.setState({ Loader: false });\n  };\n\n  CancelValue = () =&gt; {\n    const { prodName, quantity, price, TempPrice, TempProdName, TempQuantity } = this.state;\n    this.setState({ TempProdName: prodName });\n    this.setState({ TempQuantity: quantity });\n    this.setState({ TempPrice: price });\n  };\n\n  changeValue = (checkBoxId: any, value: any) =&gt; {\n    this.setState({\n      [checkBoxId]: value,\n    } as any);\n  };\n\n  render() {\n    const {\n      Select,\n      SelectT,\n      SelectI,\n      listing,\n      numOfProds,\n      Loader,\n      checkBoxId,\n      prodName,\n      quantity,\n      price,\n      TempProdName,\n      TempQuantity,\n      TempPrice,\n    } = this.state;\n    const { name, id } = this.props;\n    return (\n      &lt;ProductTableProvider\n        value={{\n          prodName,\n          quantity,\n          price,\n          checkBoxId,\n          changeValue: this.changeValue,\n        }}\n      &gt;\n        &lt;Breadcrumb path1=\"/overview\" one=\"Dashboard\" path2=\"/dashboard/products\" two=\"All Products\" /&gt;\n        &lt;InsideWrapper&gt;\n          &lt;Platform&gt;\n            &lt;h2&gt;Products&lt;/h2&gt;\n            &lt;br /&gt;\n            &lt;p&gt;Manage your products&lt;/p&gt;\n            &lt;CardStat header=\"Total\" numOf={numOfProds} page=\"Products\" /&gt;\n            &lt;CardStat header=\"Ebay\" numOf={numOfProds} page=\"Products\" /&gt;\n            &lt;div className=\"col-sm text-center new w-100\"&gt;\n              &lt;div className=\"text-right mb-4\"&gt;\n                &lt;GreenButton onClick={this.toggleSelect3}&gt;Export to Ebay&lt;/GreenButton&gt;\n                &lt;SimpleModal isOpen={SelectI} close={this.toggleSelect3} whatToDo={`Export ${name} to Ebay?`}&gt;\n                  &lt;YesNoButton name={name} id={id} /&gt;\n                &lt;/SimpleModal&gt;\n                &lt;RegularButton onClick={this.toggleSelect}&gt;Save&lt;/RegularButton&gt;\n                &lt;SimpleModal isOpen={Select} close={this.toggleSelect} whatToDo=\"Are you sure you want to save?\"&gt;\n                  &lt;YesNoButton name={name} id={id} /&gt;\n                &lt;/SimpleModal&gt;\n                &lt;OrangeButton onClick={this.CancelValue}&gt;Cancel&lt;/OrangeButton&gt;\n                &lt;DeleteButton onClick={this.toggleSelect2}&gt;Delete&lt;/DeleteButton&gt;\n                &lt;SimpleModal isOpen={SelectT} close={this.toggleSelect2} whatToDo=\"Are you sure you want to delete?\"&gt;\n                  &lt;YesNoButton name={name} id={id} /&gt;\n                &lt;/SimpleModal&gt;\n              &lt;/div&gt;\n              &lt;Card&gt;{Loader ? &lt;Loading /&gt; : &lt;DatatablePage listing={listing} /&gt;}&lt;/Card&gt;\n            &lt;/div&gt;\n          &lt;/Platform&gt;\n        &lt;/InsideWrapper&gt;\n      &lt;/ProductTableProvider&gt;\n    );\n  }\n}\nexport default Products;\n</code></pre>\n\n<p>Father:</p>\n\n<pre><code>const DatatablePage = (props: any) =&gt; {\n  const { listing } = props;\n  const rows = Array.isArray(listing)\n    ? listing.map((val: any) =&gt; {\n        return {\n          select: &lt;CheckBoxComp value={false} id={val._id} /&gt;,\n          name: &lt;TableText value={val.name} id={val._id} /&gt;,\n          barcode: val._id,\n          category: val.category,\n          image: &lt;ImageSec src={ImageProd} /&gt;,\n          unitsInStock: &lt;TableText value={val.unitsInStock} id={val._id} /&gt;,\n          price: &lt;TableText value={val.price} id={val._id} /&gt;,\n          more: &lt;ButtonsPopUp name={val.name} id={val._id} /&gt;,\n        };\n      })\n    : [];\n  const data = {\n    columns: [\n      {\n        label: '',\n        field: '',\n        sort: 'disabled',\n        width: 20,\n      },\n      {\n        label: 'Name',\n        field: 'name',\n        sort: 'asc',\n        width: 100,\n      },\n      {\n        label: 'Barcode',\n        field: 'barcode',\n        sort: 'asc',\n        width: 100,\n      },\n      {\n        label: 'Category',\n        field: 'category',\n        sort: 'asc',\n        width: 100,\n      },\n      {\n        label: 'Images',\n        field: 'images',\n        sort: 'asc',\n        width: 100,\n      },\n      {\n        label: 'Quantity',\n        field: 'unitsInStock',\n        sort: 'asc',\n        width: 150,\n      },\n      {\n        label: 'Price',\n        field: 'price',\n        sort: 'asc',\n        width: 150,\n      },\n      {\n        label: '...',\n        field: 'more',\n        sort: 'disabled',\n        width: 100,\n      },\n    ],\n    rows,\n  };\n  return (\n    &lt;Rules&gt;\n      &lt;MDBDataTable\n        entriesLabel=\"Show Products\"\n        infoLabel={['Showing', 'to', 'of', 'Products']}\n        fixed\n        responsive\n        btn\n        sortable\n        hover\n        data={data}\n        theadColor=\"white\"\n      /&gt;\n    &lt;/Rules&gt;\n  );\n};\n\nexport default DatatablePage;\n</code></pre>\n\n<p>Child:</p>\n\n<pre><code>interface Istate {\n  checked: boolean;\n  products?: any[];\n}\ninterface Iprops {\n  id: any;\n  value: any;\n  changeValue?: (checkBoxId: string, value: any) =&gt; void;\n}\nclass CheckBoxComp extends Component&lt;Iprops, Istate&gt; {\n  state = {\n    checked: true,\n    products: [] as any,\n  };\n\n  addOne = (id: any, checked: any) =&gt; {\n    let { products } = this.state;\n    const newObj = { id, checked };\n    products = products.concat(newObj);\n    this.setState({ products }, () =&gt; {\n      console.log(products);\n    });\n  };\n\n  isChecked = (id: any) =&gt; {\n    const { checked, products } = this.state;\n    const { changeValue } = this.props;\n    console.log(id);\n    this.setState({\n      checked: !checked,\n    });\n    if (changeValue) {\n      changeValue(id, checked);\n    }\n    this.addOne(id, checked);\n  };\n\n  render() {\n    const { id, value } = this.props;\n    const { checked } = this.state;\n    return (\n      &lt;Fragment&gt;\n        &lt;Checkbox&gt;\n          &lt;span /&gt;{' '}\n          &lt;label className=\"checkbox-wrapper\"&gt;\n            &lt;span className=\"display\" /&gt;\n            &lt;Inputt type=\"checkbox\" value={checked} onChange={this.isChecked.bind(this, id)} /&gt;\n            &lt;span className=\"checkmark\" /&gt;\n          &lt;/label&gt;\n        &lt;/Checkbox&gt;\n      &lt;/Fragment&gt;\n    );\n  }\n}\n\nexport default CheckBoxComp;\n</code></pre>\n\n<p>any help wrapping the code correctly using context api?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 1927, "user_id": 3125339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJoVN.png?s=128&g=1", "display_name": "MEDZ", "link": "https://stackoverflow.com/users/3125339/medz"}, "edited": false, "score": 0, "creation_date": 1577802445, "post_id": 59545145, "comment_id": 105259437, "body": "what do you see if you <code>console.log(typeof keys[i])</code> inside the loop?"}, {"owner": {"reputation": 1068, "user_id": 1279000, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/290568c65e584249ed48f9974a076585?s=128&d=identicon&r=PG", "display_name": "Christopher Stevens", "link": "https://stackoverflow.com/users/1279000/christopher-stevens"}, "edited": false, "score": 1, "creation_date": 1577811739, "post_id": 59545145, "comment_id": 105262430, "body": "Welcome! You may get better assistance if posting the code in your post instead of a screenshot of code."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "edited": false, "score": 0, "creation_date": 1577802593, "post_id": 59545324, "comment_id": 105259485, "body": "Well keys[i] is a string. i is a number. But i think this doesn&#39;t need a cast and that casting is a sign of code smell."}, {"owner": {"reputation": 1927, "user_id": 3125339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJoVN.png?s=128&g=1", "display_name": "MEDZ", "link": "https://stackoverflow.com/users/3125339/medz"}, "reply_to_user": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "edited": false, "score": 0, "creation_date": 1577802688, "post_id": 59545324, "comment_id": 105259521, "body": "what do you see if you <code>console.log(typeof keys[i])</code> inside the loop?"}, {"owner": {"reputation": 1927, "user_id": 3125339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJoVN.png?s=128&g=1", "display_name": "MEDZ", "link": "https://stackoverflow.com/users/3125339/medz"}, "reply_to_user": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "edited": false, "score": 0, "creation_date": 1577802801, "post_id": 59545324, "comment_id": 105259560, "body": "&quot;that casting is a sign of code smell&quot;. You may be forced to use it specially if you are using data that are not under your control. It&#39;s bad only if you cast data that you already strongly typed in the first place."}], "tags": [], "owner": {"reputation": 1927, "user_id": 3125339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJoVN.png?s=128&g=1", "display_name": "MEDZ", "link": "https://stackoverflow.com/users/3125339/medz"}, "is_accepted": false, "score": 0, "last_activity_date": 1577802497, "creation_date": 1577802497, "answer_id": 59545324, "question_id": 59545145, "link": "https://stackoverflow.com/questions/59545145/how-do-i-solve-the-a-element-implicitly-has-an-any-type-because-index-express/59545324#59545324", "title": "How do I solve the &quot;a Element implicitly has an &#39;any&#39; type because index expression is not of type &#39;number&#39;&quot; error?", "body": "<p>You can cast the value of <code>keys[i]</code>:</p>\n\n<pre><code>this.touches.push(event.touches[(keys[i] as number)])\n</code></pre>\n\n<p>Or if you expect it to be string then <code>(keys[i] as string)</code></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 8858208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af00341540fe8f4e67b13b4efca7cddb?s=128&d=identicon&r=PG&f=1", "display_name": "Xyrue", "link": "https://stackoverflow.com/users/8858208/xyrue"}, "is_accepted": true, "score": 0, "last_activity_date": 1577977783, "creation_date": 1577977783, "answer_id": 59565590, "question_id": 59545145, "link": "https://stackoverflow.com/questions/59545145/how-do-i-solve-the-a-element-implicitly-has-an-any-type-because-index-express/59565590#59565590", "title": "How do I solve the &quot;a Element implicitly has an &#39;any&#39; type because index expression is not of type &#39;number&#39;&quot; error?", "body": "<p>This error has nothing to do with your <code>i</code> variable.\n<code>event.touches</code>'s type is TouchList, this is how it looks:</p>\n\n<pre><code>interface TouchList {\n    readonly length: number;\n    item(index: number): Touch | null;\n    [index: number]: Touch;\n}\n</code></pre>\n\n<p>The index has to be a number yet Object.keys returns a <code>string[]</code> and this is why you have a type mismatch. </p>\n\n<p>You need to cast the string to number. You can do something as simple as <code>Number(keys[i])</code> but there are at least two keys (length &amp; item) that are not numbers so I recommend that you check that your casting returns an actual number first and only then push it to <code>this.touches</code></p>\n"}], "owner": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 59565590, "answer_count": 2, "score": 0, "last_activity_date": 1577977783, "creation_date": 1577801404, "last_edit_date": 1577807428, "question_id": 59545145, "link": "https://stackoverflow.com/questions/59545145/how-do-i-solve-the-a-element-implicitly-has-an-any-type-because-index-express", "title": "How do I solve the &quot;a Element implicitly has an &#39;any&#39; type because index expression is not of type &#39;number&#39;&quot; error?", "body": "<p>I'm using Typescript with strict compiler options which I really like. But when I have a for loop I get the following error <code>a Element implicitly has an 'any' type because index expression is not of type 'number'</code>. I changed <code>let i</code> to <code>let i:number</code> shouldn't that fix it?</p>\n\n<p>Here is the</p>\n\n<p><a href=\"https://i.stack.imgur.com/fmerH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fmerH.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "typescript", "typescript-typings", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1577813923, "post_id": 59545903, "comment_id": 105263049, "body": "I don&#39;t see that <code>reduce</code> adds any robustness at all (nor, for that matter, is it smaller); but it <b>does</b> increase complexity over simply creating an object and adding to it, not least introducing the footgun of forgetting the <code>return result;</code> line. As <a href=\"https://twitter.com/bterlson/status/1099010861065068544\" rel=\"nofollow noreferrer\">others have said</a>, <code>reduce</code> is overused."}], "tags": [], "owner": {"reputation": 19724, "user_id": 6539317, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/feded6c8f60453abde4e6bf81a877693?s=128&d=identicon&r=PG&f=1", "display_name": "felixmosh", "link": "https://stackoverflow.com/users/6539317/felixmosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1577805964, "creation_date": 1577805964, "answer_id": 59545903, "question_id": 59545011, "link": "https://stackoverflow.com/questions/59545011/object-with-generic-keys-in-typescript/59545903#59545903", "title": "Object with generic keys in typescript", "body": "<p><code>Object.keys</code> returns <strong>always</strong> <code>string[]</code> therefore you will need the casting.</p>\n\n<p>A smaller &amp; more robust version would use <code>reduce</code>.\nAnother small improvement would be to use the type of the original key, with <code>T[Key]</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const hash = {\n  \"first\": 'someString',\n  \"second\": 2,\n  \"third\": 3,\n}\n\ntype Result&lt;T&gt;= {\n  [Key in keyof T]: () =&gt; T[Key]\n}\n\nconst transform = &lt;T extends object&gt;(obj: T): Result&lt;T&gt; =&gt; {\n  return (Object.keys(obj) as Array&lt;keyof T&gt;).reduce((result, key) =&gt; {\n      result[key] = () =&gt; obj[key];\n      return result;\n  }, {} as Result&lt;T&gt;)\n}\n\nconst a = transform(hash)\n\na.first() // returns \"string\"\nb.second() // return \"number\"\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 6434547, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-y5PUUPWunJo/AAAAAAAAAAI/AAAAAAAAADI/8Ir_JTui2Xk/photo.jpg?sz=128", "display_name": "dieTrying", "link": "https://stackoverflow.com/users/6434547/dietrying"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4085, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1577814920, "creation_date": 1577800627, "last_edit_date": 1577814920, "question_id": 59545011, "link": "https://stackoverflow.com/questions/59545011/object-with-generic-keys-in-typescript", "title": "Object with generic keys in typescript", "body": "<p>I'd like to create a common function which will take an object, then do some transformations and return new object with same keys and different values. I'm trying to make it \"strongly-typed\", so everyone who uses it will have benefits of TS and non-existing keys should throw an error.</p>\n\n<p>What I have for now:</p>\n\n<pre><code>const hash = {\n  \"first\": 1,\n  \"second\": 2,\n  \"third\": 3,\n}\n\ntype Mapper&lt;T&gt; = {\n  [key in keyof T]: number\n}\n\ntype Result&lt;T&gt;= {\n  [key in keyof T]: () =&gt; number\n}\n\nconst transform = &lt;T&gt;(mapper: Mapper&lt;T&gt;) =&gt; {\n  const result = {} as Result&lt;T&gt;\n\n  (Object.keys(mapper) as (keyof T)[]).map(key =&gt; {\n    result[key] = () =&gt; mapper[key]\n  })\n\n  return result\n}\n\ntype Hash = typeof hash\n\nconst a = transform&lt;Hash&gt;(hash)\n\na.first()\n// a.fifth() OK error\n</code></pre>\n\n<p>It works well, but I'm looking for solutions to solve this:</p>\n\n<ol>\n<li><p>Remove type assertion <code>const result = {} as Result&lt;T&gt;</code></p></li>\n<li><p>Remove type assertion <code>(Object.keys(mapper) as (keyof T)[])</code> (or use <code>Object.entries</code>, but seems it also requires type assertion in this case)</p></li>\n</ol>\n\n<p>Could I implement the same, but in more \"clean\" way in Typescript?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577803752, "post_id": 59545487, "comment_id": 105259916, "body": "In the case of the buttons worked, however in that user who does not have any time stamp, the button does not appear, in the remaining worked :("}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "reply_to_user": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577803860, "post_id": 59545487, "comment_id": 105259944, "body": "what do you mean by timestamp? in what case its not working?"}, {"owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577804013, "post_id": 59545487, "comment_id": 105259999, "body": "I put a picture in the post ... the user &quot;Cristiano&quot; ... does not have the button, for never had a start time :("}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "reply_to_user": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577804050, "post_id": 59545487, "comment_id": 105260006, "body": "Updated my answer. Please check. added <code>|| taskService.timerForUsers[data.key.ID] == undefined</code> in <code>start</code>"}, {"owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577804214, "post_id": 59545487, "comment_id": 105260061, "body": "This worked perfectly! Do you know how I can stop a timer when another one runs? I do not intend to run several simultaneously. Thank you so much for your help!"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "reply_to_user": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577804348, "post_id": 59545487, "comment_id": 105260103, "body": "I think that a logical part. You can check before starting any timer if any other time is already running. If thats the case, stop all existing timers and start requested timer."}, {"owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "edited": false, "score": 0, "creation_date": 1577804513, "post_id": 59545487, "comment_id": 105260166, "body": "Yes, that was exactly what I wanted, but I am having some problems applying. Not stopping correctly"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 1, "last_activity_date": 1577850662, "last_edit_date": 1577850662, "creation_date": 1577803316, "answer_id": 59545487, "question_id": 59545002, "link": "https://stackoverflow.com/questions/59545002/swap-button-image-when-state-changes/59545487#59545487", "title": "Swap button image when state changes", "body": "<p>Change your <code>button</code> section as follows,</p>\n\n<p>I have also added <code>height</code> and <code>width</code> attribute for better viewing of image.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;button id=\"button-basic\" dropdownToggle aria-controls=\"dropdown-basic\"&gt;\n    &lt;img *ngIf=\"taskService.timerForUsers[data.key.ID]?.currentState === 'pause' || taskService.timerForUsers[data.key.ID] == undefined\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcW6cJlI-KlS721hkuHDTMydZ_snrkhL9sm9wYHWRhd3FlvF1b&amp;s\" width=\"50\" height=\"50\"&gt;\n    &lt;img *ngIf=\"taskService.timerForUsers[data.key.ID]?.currentState ==='start'\"\n    src=\"https://png.pngtree.com/png-clipart/20190516/original/pngtree-pause-vector-icon-png-image_3791321.jpg\" width=\"50\" height=\"50\"&gt;\n    &lt;img *ngIf=\"!taskService.timerForUsers[data.key.ID]?.currentState ==='start'\"\n    src=\"https://png.pngtree.com/png-clipart/20190516/original/pngtree-pause-vector-icon-png-image_3791321.jpg\" width=\"50\" height=\"50\"&gt;\n&lt;/button&gt;\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 59545487, "answer_count": 1, "score": 1, "last_activity_date": 1577850662, "creation_date": 1577800547, "last_edit_date": 1577822945, "question_id": 59545002, "link": "https://stackoverflow.com/questions/59545002/swap-button-image-when-state-changes", "title": "Swap button image when state changes", "body": "<p>I am testing a change of button states however I am having several difficulties.</p>\n\n<p>I am trying to set an image for the buttons when they are in a natural state (pause). When I click the button on a line, a dropdown opens and I want to click on start on that line, the button changes the image set in the Start state. My problem is that none of the images appear, does anyone know what I may be doing wrong?</p>\n\n<p>Thank you!</p>\n\n<p><strong>html</strong></p>\n\n<pre><code>&lt;button id=\"button-basic\" dropdownToggle aria-controls=\"dropdown-basic\"&gt;\n    &lt;img *ngIf=\"taskService.timerForUsers.currentState === 'pause'\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcW6cJlI-KlS721hkuHDTMydZ_snrkhL9sm9wYHWRhd3FlvF1b&amp;s\"&gt;\n    &lt;img *ngIf=\"taskService.timerForUsers[data.key.id]?.currentState ==='start'\"\n    src=\"https://png.pngtree.com/png-clipart/20190516/original/pngtree-pause-vector-icon-png-image_3791321.jpg\"&gt;\n    &lt;img *ngIf=\"!taskService.timerForUsers[data.key.id]?.currentState ==='start'\"\n    src=\"https://png.pngtree.com/png-clipart/20190516/original/pngtree-pause-vector-icon-png-image_3791321.jpg\"&gt;\n  &lt;/button&gt;\n        &lt;ul id=\"dropdown-basic\" *dropdownMenu class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"button-basic\"&gt;\n            &lt;li role=\"menuitem\"&gt;&lt;a class=\"dropdown-item\"\n                    *ngIf=\"!taskService.timerForUsers[data.key.ID] || taskService.timerForUsers[data.key.ID].currentState === 'pause'\"\n                    routerLinkActive=\"active\" (click)=\"startTimer(data)\"&gt;Start&lt;/a&gt;&lt;/li&gt;\n            &lt;li role=\"menuitem\"&gt;&lt;a class=\"dropdown-item\"\n                    *ngIf=\"taskService.timerForUsers[data.key.ID]?.currentState === 'start'\" routerLinkActive=\"active\" (click)=\"pauseTimer(data)\"&gt;Stop&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "reactive-forms"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1577800980, "post_id": 59544972, "comment_id": 105259017, "body": "Looks fine to me. Can you reproduce with a stackblizt?"}, {"owner": {"reputation": 13755, "user_id": 207051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktARb.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/207051/martin"}, "edited": false, "score": 0, "creation_date": 1577801759, "post_id": 59544972, "comment_id": 105259242, "body": "What is the issue? What numbers are failing validation?"}, {"owner": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 0, "creation_date": 1577801943, "post_id": 59544972, "comment_id": 105259295, "body": "You need to define what is valid and what is invalid, possibly providing examples of each if it is not straightforward."}, {"owner": {"reputation": 2944, "user_id": 2496553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7f1445360d51dacfe5a119d923f4eda?s=128&d=identicon&r=PG", "display_name": "alexander.sivak", "link": "https://stackoverflow.com/users/2496553/alexander-sivak"}, "reply_to_user": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 2, "creation_date": 1577804966, "post_id": 59544972, "comment_id": 105260311, "body": "@theMayer, I have reproduced the issue. See an update question. I think the question should be opened."}, {"owner": {"reputation": 13755, "user_id": 207051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktARb.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/207051/martin"}, "edited": false, "score": 0, "creation_date": 1577805302, "post_id": 59544972, "comment_id": 105260428, "body": "Yes this is a real issue. I can reproduce. Please vote to reopen."}, {"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577805787, "post_id": 59544972, "comment_id": 105260580, "body": "From <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/number\" rel=\"nofollow noreferrer\">MDN documentation</a>. <b><i>Pattern validation</i></b> - <i>&lt;input type=&quot;number&quot;&gt; elements do not support use of the pattern attribute for making entered values conform to a specific regex pattern. The rationale for this is that number inputs won&#39;t be valid if they contain anything except numbers, and you can constrain the minimum and maximum number of valid digits using the min and max attributes (as explained above).</i> By the way, does the leading zero affect the actual input value? I would think that it has no effect on it."}, {"owner": {"reputation": 13755, "user_id": 207051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktARb.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/207051/martin"}, "edited": false, "score": 2, "creation_date": 1577806026, "post_id": 59544972, "comment_id": 105260659, "body": "@alexander.sivak change the &lt;input type=&quot;number&quot;&gt; to &lt;input type=&quot;text&quot;&gt;   The reason for this is that when these are evaluated as numbers -- then implicitly converted back to string for the validation -- the leading zeros are stripped off. It would be the same as /^[1-9]\\d*$/.test(04) -- String(04) // returns 4"}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "edited": false, "score": 1, "creation_date": 1577808957, "post_id": 59544972, "comment_id": 105261613, "body": "@alexander.sivak As Martin already said, the leading zero is stripped. you can see the issue if you add <code>{{f.value | json}}</code> to your template or log your form when you submit."}, {"owner": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 0, "creation_date": 1577812118, "post_id": 59544972, "comment_id": 105262540, "body": "Please avoid putting answers in the comments. If you have an answer, then it is good to leave as an answer."}, {"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "reply_to_user": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 0, "creation_date": 1577814031, "post_id": 59544972, "comment_id": 105263084, "body": "@theMayer - We put answers in comments when answers are not allowed. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 4283, "user_id": 4766136, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/100000086927633/picture?type=large", "display_name": "Michal", "link": "https://stackoverflow.com/users/4766136/michal"}, "edited": false, "score": 0, "creation_date": 1607593678, "post_id": 59546860, "comment_id": 115323566, "body": "&quot;why would you want to do this.&quot; you did not answer the question"}, {"owner": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "reply_to_user": {"reputation": 4283, "user_id": 4766136, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/100000086927633/picture?type=large", "display_name": "Michal", "link": "https://stackoverflow.com/users/4766136/michal"}, "edited": false, "score": 0, "creation_date": 1607618210, "post_id": 59546860, "comment_id": 115335348, "body": "@Michal- Did you read the first half of my answer?"}, {"owner": {"reputation": 4283, "user_id": 4766136, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/100000086927633/picture?type=large", "display_name": "Michal", "link": "https://stackoverflow.com/users/4766136/michal"}, "edited": false, "score": 0, "creation_date": 1607639464, "post_id": 59546860, "comment_id": 115343820, "body": "I just posted my own answer."}, {"owner": {"reputation": 4283, "user_id": 4766136, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/100000086927633/picture?type=large", "display_name": "Michal", "link": "https://stackoverflow.com/users/4766136/michal"}, "edited": false, "score": 0, "creation_date": 1607639505, "post_id": 59546860, "comment_id": 115343840, "body": "You explained how things work but you didn&#39;t solve the problem. Validating input type number with leading zeros would be complicated."}], "tags": [], "owner": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "is_accepted": true, "score": -1, "last_activity_date": 1577812381, "creation_date": 1577812381, "answer_id": 59546860, "question_id": 59544972, "link": "https://stackoverflow.com/questions/59544972/invalidate-numbers-with-leading-zeros-with-validators-pattern/59546860#59546860", "title": "Invalidate numbers with leading zeros with Validators.pattern(..)", "body": "<p>It appears that some of the documentation on this feature may have been missed, as suggested in the comments.</p>\n\n<p>From the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/number\" rel=\"nofollow noreferrer\">MDN documentation</a>:</p>\n\n<blockquote>\n  <p><strong>Pattern validation</strong> - <code>&lt;input type=\"number\"&gt;</code> elements do not support use of the pattern attribute for making entered values conform to a specific regex pattern. The rationale for this is that number inputs won't be valid if they contain anything except numbers, and you can constrain the minimum and maximum number of valid digits using the min and max attributes (as explained above).</p>\n</blockquote>\n\n<p>The question that I'm left with is \"why would you want to do this.\" If you're trying to constrain a valid input to just numbers, that can be achieved by using the <code>input type=\"number\"</code>. If, however, you're trying to force the user to type in a certain pattern for unknown reasons, it is a virtual guarantee that your users will hate your software.  Instead, if a user input is understandable by the computer, then you should accept it. If it isn't, you should request user clarification, explaining why. It is unclear what the end-goal is here, but it seems that this is a case of <a href=\"https://blog.prototypr.io/ux-best-practices-of-form-validation-ddb8a0df14fd\" rel=\"nofollow noreferrer\">overzealous form validation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4283, "user_id": 4766136, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/100000086927633/picture?type=large", "display_name": "Michal", "link": "https://stackoverflow.com/users/4766136/michal"}, "is_accepted": false, "score": 1, "last_activity_date": 1607639788, "last_edit_date": 1607639788, "creation_date": 1607639422, "answer_id": 65243232, "question_id": 59544972, "link": "https://stackoverflow.com/questions/59544972/invalidate-numbers-with-leading-zeros-with-validators-pattern/65243232#65243232", "title": "Invalidate numbers with leading zeros with Validators.pattern(..)", "body": "<p>The correct solution here would be creating custom <code>OnlyDigits</code> directive:</p>\n<pre><code>import { Directive, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[onlyDigits]',\n})\nexport class OnlyDigitsDirective {\n  @HostListener('input', ['$event'])\n  onKeyDown(ev: KeyboardEvent) {\n    const input = ev.target as HTMLInputElement;\n    input.value = String(input.value.replace(/\\D+/g, ''));\n  }\n}\n\n</code></pre>\n<p>And then I believe you can keep the pattern validator:</p>\n<pre><code>form = new FormGroup({\n  'sum': new FormControl(null, Validators.pattern(/^[1-9][0-9]*$/))\n})\n</code></pre>\n<p>and optionally you can add HTML validation so that the user can't input more than 2 numbers:</p>\n<pre><code>&lt;input type=&quot;text&quot; formControlName=&quot;sum&quot; style=&quot;display:block; margin-bottom:10px;&quot; onlyDigits maxLength=&quot;2&quot;&gt;\n</code></pre>\n<p>You can also set the input mode to <code>numeric</code> if you want the user mobile experience to be better:</p>\n<p><a href=\"https://css-tricks.com/everything-you-ever-wanted-to-know-about-inputmode/\" rel=\"nofollow noreferrer\">https://css-tricks.com/everything-you-ever-wanted-to-know-about-inputmode/</a></p>\n"}], "owner": {"reputation": 2944, "user_id": 2496553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7f1445360d51dacfe5a119d923f4eda?s=128&d=identicon&r=PG", "display_name": "alexander.sivak", "link": "https://stackoverflow.com/users/2496553/alexander-sivak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "accepted_answer_id": 59546860, "answer_count": 2, "score": 1, "last_activity_date": 1607639788, "creation_date": 1577800407, "last_edit_date": 1577805784, "question_id": 59544972, "link": "https://stackoverflow.com/questions/59544972/invalidate-numbers-with-leading-zeros-with-validators-pattern", "title": "Invalidate numbers with leading zeros with Validators.pattern(..)", "body": "<p>I have a validator that uses a regex pattern <code>/^[1-9][0-9]*$/</code> to only allow numbers without leading zeros. </p>\n\n<p>This can expression can easily be tested like so:</p>\n\n<pre><code>/^[1-9][0-9]*$/.test(\"04\") // returns false\n/^[1-9][0-9]*$/.test(\"40\") // returns true\n</code></pre>\n\n<p>The ReactiveForm is defined as:</p>\n\n<pre><code>form = new FormGroup({\n  'sum': new FormControl(null, Validators.pattern(/^[1-9][0-9]*$/))\n})\n</code></pre>\n\n<p>And the template is</p>\n\n<pre><code>&lt;form [formGroup]=\"form\"&gt;\n  &lt;input type=\"number\" formControlName=\"sum\" style=\"display:block; margin-bottom:10px;\"&gt;\n  &lt;button type=\"submit\" [disabled]=\"!form.valid\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>When I use this in a ReactiveForm, entering a the number <code>04</code> should add the class <code>ng-invalid</code> to the field and mark the form as invalid. </p>\n\n<p>Instead the form is marked valid and the class <code>ng-valid</code> are added to the field. </p>\n\n<p>I reproduced it <a href=\"https://stackblitz.com/edit/angular-z2ggrf\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["typescript", "reflection", "typescript-decorator"], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 4, "last_activity_date": 1577915368, "creation_date": 1577915368, "answer_id": 59556378, "question_id": 59544924, "link": "https://stackoverflow.com/questions/59544924/typescript-how-to-get-all-property-decorators-from-only-the-class-type/59556378#59556378", "title": "Typescript: How to get all property decorators from only the class type?", "body": "<p>There's no built-in functionality in reflect-metadata to do this.  You can build something like this yourself by creating your own property decorator <em>using</em> reflect-metadata, by storing the list of property keys on the class's prototype and using that later.  For example:</p>\n\n<pre><code>function myPropertyDecorator(\n  metadataKey: string,\n  metadataValue: any\n): PropertyDecorator {\n  return function(ctorPrototype: any, propertyKey: string): void {\n    // original functionality\n    Reflect.defineMetadata(\n      \"data:\" + metadataKey,\n      metadataValue,\n      ctorPrototype,\n      propertyKey\n    );\n\n    // new functionality\n    let propertyKeys =\n      Reflect.getOwnMetadata(\"keys:\" + metadataKey, ctorPrototype) ||\n      (Reflect.getMetadata(\"keys:\" + metadataKey, ctorPrototype) || []).slice(\n        0\n      );\n    Reflect.defineMetadata(\"keys:\" + metadataKey, propertyKeys, ctorPrototype);\n\n    // record new property key\n    propertyKeys.push(propertyKey);\n  };\n}\n</code></pre>\n\n<p>And then you can still get the metadata given the property key:</p>\n\n<pre><code>function getMyPropertyDecorator(\n  ctor: { prototype: any },\n  metadataKey: string,\n  propertyKey: string\n) {\n  return Reflect.getMetadata(\n    \"data:\" + metadataKey,\n    ctor.prototype,\n    propertyKey\n  );\n}\n</code></pre>\n\n<p>As well as enumerate all the property keys for which you stored metadata:</p>\n\n<pre><code>function getMyPropertyDecoratorPropertyKeys(\n  ctor: { prototype: any },\n  metadataKey: string\n) {\n  return (Reflect.getMetadata(\"keys:\" + metadataKey, ctor.prototype) ||\n    []) as string[];\n}\n</code></pre>\n\n<p>And even get an object whose keys are those property keys and whose values are the metadata values:</p>\n\n<pre><code>function getMyPropertyDecorators(\n  ctor: { prototype: any },\n  metadataKey: string\n) {\n  const ret: Record&lt;string, any&gt; = {};\n  for (let propertyKey of getMyPropertyDecoratorPropertyKeys(\n    ctor,\n    metadataKey\n  )) {\n    ret[propertyKey] = getMyPropertyDecorator(ctor, metadataKey, propertyKey);\n  }\n  return ret;\n}\n</code></pre>\n\n<p>This last one gives you enough to do what you want:</p>\n\n<pre><code>const metadataKey = \"metadataKey\";\nclass User {\n  @myPropertyDecorator(metadataKey, 1)\n  name: string = \"1\";\n  @myPropertyDecorator(metadataKey, 2)\n  age: number = 3;\n}\n\nconsole.log(getMyPropertyDecorators(User, metadataKey)); // {name: 1, age: 2}\n</code></pre>\n\n<p>And if you want a dedicated function to pull out the values into an array (although I don't know how you'd ensure the ordering):</p>\n\n<pre><code>function getMyPropertyDecoratorValues(\n  ctor: { prototype: any },\n  metadataKey: string\n) {\n  const myPropertyDecorators = getMyPropertyDecorators(ctor, metadataKey);\n  return Object.keys(myPropertyDecorators).map(\n    propertyKey =&gt; myPropertyDecorators[propertyKey]\n  );\n}\n\n\nconsole.log(getMyPropertyDecoratorValues(User, metadataKey)); // [1, 2]\n</code></pre>\n\n<p>Okay, hope that helps.  Good luck!</p>\n\n<p><a href=\"https://stackblitz.com/edit/enumerate-property-decorators-workaround\" rel=\"nofollow noreferrer\">Link to code in Stackblitz</a></p>\n"}], "owner": {"reputation": 47, "user_id": 10974338, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-03OUjnND_N8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMUOUKrVgnkILtYsGSKeEVMOG_llg/mo/photo.jpg?sz=128", "display_name": "xue zhang", "link": "https://stackoverflow.com/users/10974338/xue-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577915368, "creation_date": 1577800120, "question_id": 59544924, "link": "https://stackoverflow.com/questions/59544924/typescript-how-to-get-all-property-decorators-from-only-the-class-type", "title": "Typescript: How to get all property decorators from only the class type?", "body": "<pre><code>const metadataKey = \"metadataKey\";\nclass User\n{\n    @Reflect.metadata(metadataKey, 1)\n    name: string;\n    @Reflect.metadata(metadataKey, 2)\n    age: number;\n}\n\ngetPropertyDecorators(User); // I hope it can return [1, 2]\n</code></pre>\n\n<p>I hope the function getPropertyDecorators doesn't need to create an instance of User. </p>\n"}, {"tags": ["angular", "typescript", "angular-material"], "comments": [{"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1577857160, "post_id": 59544892, "comment_id": 105269400, "body": "Do you need this:<a href=\"https://stackblitz.com/edit/angular-uyk1n7\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-uyk1n7</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "is_accepted": false, "score": 0, "last_activity_date": 1577857384, "creation_date": 1577857384, "answer_id": 59550215, "question_id": 59544892, "link": "https://stackoverflow.com/questions/59544892/how-to-add-a-red-dot-on-a-mat-step-header-icon-in-angular-7/59550215#59550215", "title": "how to add a red dot on a mat step header icon in angular 7?", "body": "<p>You can use <code>formgroup.valid</code> property which returns a boolean value based on the form validity and with the help of ngClass you can set the success or error class.</p>\n\n<p>Related HTML:</p>\n\n<pre><code>&lt;ng-template matStepLabel&gt;\n  &lt;div [ngClass]=\"firstFormGroup.valid ? 'suc' : 'err'\"&gt;\n    {{firstFormGroup.valid}}\n  &lt;/div&gt;\n&lt;/ng-template&gt;\n</code></pre>\n\n<p>CSS:</p>\n\n<pre><code>.err {\n  background-color: red;\n}\n\n.suc {\n  background-color: green;\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-uyk1n7\" rel=\"nofollow noreferrer\"><code>Here is a working Demo</code></a></p>\n"}], "owner": {"reputation": 29, "user_id": 12039936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551ff03496203632a73008787ca067d4?s=128&d=identicon&r=PG&f=1", "display_name": "rupekeshan", "link": "https://stackoverflow.com/users/12039936/rupekeshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1578881999, "creation_date": 1577799894, "last_edit_date": 1578881999, "question_id": 59544892, "link": "https://stackoverflow.com/questions/59544892/how-to-add-a-red-dot-on-a-mat-step-header-icon-in-angular-7", "title": "how to add a red dot on a mat step header icon in angular 7?", "body": "<p>i want to add a red dot on the angular material stepper head icon only if there is any error in form field of that mat step. for that i tried to add div inside the stepper class but it doesn't take effect. atleast i want to know about to add div dynamically using class.</p>\n\n<pre><code>&lt;mat-step-header class=\"mat-horizontal-stepper-header mat-step-header ng-tns-c10-1 ng-star-inserted\" role=\"tab\"\n    ng-reflect-state=\"number\" ng-reflect-label=\"Basic Information\" ng-reflect-icon-overrides=\"[object Object]\"\n    ng-reflect-index=\"0\" ng-reflect-selected=\"true\" ng-reflect-active=\"true\" ng-reflect-optional=\"false\" tabindex=\"0\"\n    id=\"cdk-step-label-0-0\" aria-posinset=\"1\" aria-setsize=\"2\" aria-controls=\"cdk-step-content-0-0\"\n    aria-selected=\"true\"&gt;\n    &lt;div class=\"mat-step-header-ripple mat-ripple\" mat-ripple=\"\" ng-reflect-trigger=\"[object HTMLElement]\"&gt;&lt;/div&gt;\n    &lt;div class=\"mat-step-icon-state-number mat-step-icon mat-step-icon-selected\"&gt;\n        &lt;div class=\"mat-step-icon-content\" ng-reflect-ng-switch=\"false\"&gt;\n            &lt;span class=\"ng-star-inserted\"&gt;1&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"mat-step-label mat-step-label-active mat-step-label-selected\"&gt;\n        &lt;div class=\"mat-step-text-label ng-star-inserted\"&gt;Basic Information&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/mat-step-header&gt;\n</code></pre>\n"}, {"tags": ["node.js", "angular", "typescript"], "comments": [{"owner": {"reputation": 21295, "user_id": 5437671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ZlWc.png?s=128&g=1", "display_name": "R. Richards", "link": "https://stackoverflow.com/users/5437671/r-richards"}, "edited": false, "score": 0, "creation_date": 1577797782, "post_id": 59544464, "comment_id": 105257954, "body": "See if any of <a href=\"https://stackoverflow.com/search?q=export+%27%C9%B5%C9%B5defineInjectable%27+was+not+found&amp;mixed=0\">these</a> will help you."}, {"owner": {"reputation": 157, "user_id": 11423078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8Ld1.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/11423078/umair"}, "edited": false, "score": 0, "creation_date": 1578483368, "post_id": 59544464, "comment_id": 105451081, "body": "Hey . I am getting the same error , any solution on that ?"}, {"owner": {"reputation": 11, "user_id": 6406100, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BxTZARhuMWg/AAAAAAAAAAI/AAAAAAAAABA/V9CneSkIwe0/photo.jpg?sz=128", "display_name": "Milton Marma", "link": "https://stackoverflow.com/users/6406100/milton-marma"}, "edited": false, "score": 0, "creation_date": 1578999408, "post_id": 59544464, "comment_id": 105613708, "body": "I removed ^ from the package.json to avoid version conflict, deleted node_modules folder and then ran yarn install --force now it&#39;s working."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6406100, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BxTZARhuMWg/AAAAAAAAAAI/AAAAAAAAABA/V9CneSkIwe0/photo.jpg?sz=128", "display_name": "Milton Marma", "link": "https://stackoverflow.com/users/6406100/milton-marma"}, "is_accepted": false, "score": 0, "last_activity_date": 1578999748, "creation_date": 1578999748, "answer_id": 59732470, "question_id": 59544464, "link": "https://stackoverflow.com/questions/59544464/i-am-getting-warning-in-node-modules-coreui-angular-fesm5-coreui-angular-js-4/59732470#59732470", "title": "I am getting WARNING in ./node_modules/@coreui/angular/fesm5/coreui-angular.js 493:33-51 &quot;export &#39;\u0275\u0275defineInjectable&#39; was not found in &#39;@angular/core&#39;", "body": "<ol>\n<li>Removed circumflex(^) from the package.json to avoid version conflict.</li>\n<li>Deleted the node modules folder</li>\n<li>yarn install --force</li>\n</ol>\n\n<p>Now it's working fine :) </p>\n"}], "owner": {"reputation": 11, "user_id": 6406100, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BxTZARhuMWg/AAAAAAAAAAI/AAAAAAAAABA/V9CneSkIwe0/photo.jpg?sz=128", "display_name": "Milton Marma", "link": "https://stackoverflow.com/users/6406100/milton-marma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 894, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578999748, "creation_date": 1577797349, "last_edit_date": 1577797620, "question_id": 59544464, "link": "https://stackoverflow.com/questions/59544464/i-am-getting-warning-in-node-modules-coreui-angular-fesm5-coreui-angular-js-4", "title": "I am getting WARNING in ./node_modules/@coreui/angular/fesm5/coreui-angular.js 493:33-51 &quot;export &#39;\u0275\u0275defineInjectable&#39; was not found in &#39;@angular/core&#39;", "body": "<p>I am facing warning at <code>ng serve</code> command and for this warning, I can't see anything in the web page. We are using <code>Core Ui Pro Admin Template</code>.</p>\n\n<p>Full Warning message list: </p>\n\n<pre><code>WARNING in ./node_modules/@coreui/angular/fesm5/coreui-angular.js 493:33-51\n\"export '\u0275\u0275defineInjectable' was not found in '@angular/core'\n\nWARNING in ./node_modules/@coreui/angular/fesm5/coreui-angular.js 816:30-48\n\"export '\u0275\u0275defineInjectable' was not found in '@angular/core'\n\nWARNING in ./node_modules/@coreui/angular/fesm5/coreui-angular.js 493:137-145\n\"export '\u0275\u0275inject' was not found in '@angular/core'\n\nWARNING in ./node_modules/@coreui/angular/fesm5/coreui-angular.js 493:155-163\n\"export '\u0275\u0275inject' was not found in '@angular/core'\n</code></pre>\n\n<p>My ng version: </p>\n\n<pre><code>Angular CLI: 7.3.9\nNode: 10.16.3\nOS: win32 x64\nAngular: 7.2.15\n... animations, common, compiler, compiler-cli, core, forms\n... http, language-service, platform-browser\n... platform-browser-dynamic, router\n\nPackage                           Version\n-----------------------------------------------------------\n@angular-devkit/architect         0.13.9\n@angular-devkit/build-angular     0.13.9\n@angular-devkit/build-optimizer   0.13.9\n@angular-devkit/build-webpack     0.13.9\n@angular-devkit/core              7.3.9\n@angular-devkit/schematics        7.3.9\n@angular/cli                      7.3.9\n@ngtools/webpack                  7.3.9\n@schematics/angular               7.3.9\n@schematics/update                0.13.9\nrxjs                              6.5.4\ntypescript                        3.1.6\nwebpack                           4.29.0\n</code></pre>\n\n<p>package.json file:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"name\": \"@coreui/coreui-pro-angular-admin-template-starter\",\r\n  \"version\": \"2.2.0\",\r\n  \"description\": \"CoreUI Pro Angular 2+ Admin Template\",\r\n  \"author\": {\r\n    \"name\": \"\u0141ukasz Holeczek\",\r\n    \"url\": \"http://holeczek.pl\",\r\n    \"github\": \"https://github.com/mrholek\",\r\n    \"twitter\": \"https://twitter.com/lukaszholeczek\"\r\n  },\r\n  \"contributors\": [\r\n    {\r\n      \"name\": \"Andrzej Kopa\u0144ski\",\r\n      \"url\": \"https://github.com/xidedix\"\r\n    }\r\n  ],\r\n  \"homepage\": \"https://coreui.io/pro/angular\",\r\n  \"copyright\": \"Copyright 2018 creativeLabs \u0141ukasz Holeczek\",\r\n  \"license\": \"https://coreui.io/pro/license/\",\r\n  \"scripts\": {\r\n    \"ng\": \"ng\",\r\n    \"start\": \"ng serve\",\r\n    \"build\": \"ng build --prod\",\r\n    \"test\": \"ng test\",\r\n    \"lint\": \"ng lint\",\r\n    \"e2e\": \"ng e2e\"\r\n  },\r\n  \"private\": true,\r\n  \"dependencies\": {\r\n    \"@agm/core\": \"^1.0.0-beta.5\",\r\n    \"@amcharts/amcharts4\": \"^4.6.0\",\r\n    \"@angular/animations\": \"^7.1.1\",\r\n    \"@angular/common\": \"^7.1.1\",\r\n    \"@angular/compiler\": \"^7.1.1\",\r\n    \"@angular/core\": \"^7.1.1\",\r\n    \"@angular/forms\": \"^7.1.1\",\r\n    \"@angular/http\": \"^7.1.1\",\r\n    \"@angular/platform-browser\": \"^7.1.1\",\r\n    \"@angular/platform-browser-dynamic\": \"^7.1.1\",\r\n    \"@angular/router\": \"^7.1.1\",\r\n    \"@coreui/angular\": \"^2.2.0\",\r\n    \"@coreui/coreui-plugin-chartjs-custom-tooltips\": \"^1.2.0\",\r\n    \"@coreui/coreui-pro\": \"^2.1.3\",\r\n    \"@coreui/icons\": \"0.3.0\",\r\n    \"@ng-bootstrap/ng-bootstrap\": \"^4.1.1\",\r\n    \"@ngrx/effects\": \"^7.4.0\",\r\n    \"@ngrx/entity\": \"^7.4.0\",\r\n    \"@ngrx/store\": \"^7.4.0\",\r\n    \"@ngrx/store-devtools\": \"^7.4.0\",\r\n    \"@ngx-translate/core\": \"^11.0.1\",\r\n    \"@ngx-translate/http-loader\": \"^4.0.0\",\r\n    \"@types/lodash\": \"^4.14.144\",\r\n    \"@types/number-to-words\": \"^1.2.0\",\r\n    \"angular-bootstrap-md\": \"^8.1.1\",\r\n    \"angular-calendar\": \"^0.26.4\",\r\n    \"angular-datatables\": \"^6.0.0\",\r\n    \"angular-in-memory-web-api\": \"^0.8.0\",\r\n    \"angular2-datatable\": \"^0.6.0\",\r\n    \"angular2-ladda\": \"^2.0.0\",\r\n    \"angular2-text-mask\": \"^9.0.0\",\r\n    \"angular2-toaster\": \"^7.0.0\",\r\n    \"bootstrap\": \"^4.1.3\",\r\n    \"chart.js\": \"2.7.3\",\r\n    \"core-js\": \"^2.5.7\",\r\n    \"datatables.net\": \"^1.10.19\",\r\n    \"datatables.net-dt\": \"^1.10.19\",\r\n    \"date-fns\": \"^1.29.0\",\r\n    \"flag-icon-css\": \"3.2.1\",\r\n    \"font-awesome\": \"^4.7.0\",\r\n    \"jquery\": \"^3.3.1\",\r\n    \"lodash\": \"^4.17.15\",\r\n    \"moment\": \"^2.22.2\",\r\n    \"mutationobserver-shim\": \"^0.3.2\",\r\n    \"ng-select\": \"^1.0.1\",\r\n    \"ng2-ace-editor\": \"^0.3.8\",\r\n    \"ng2-charts\": \"^1.6.0\",\r\n    \"ng2-dragula\": \"^1.5.0\",\r\n    \"ngrxstoredata\": \"^2.0.0\",\r\n    \"ngx-bootstrap\": \"^3.1.2\",\r\n    \"ngx-bootstrap-modal\": \"^2.0.1\",\r\n    \"ngx-json-viewer\": \"^2.4.0\",\r\n    \"ngx-pagination\": \"^4.1.0\",\r\n    \"ngx-perfect-scrollbar\": \"^7.1.0\",\r\n    \"ngx-quill\": \"^4.3.3\",\r\n    \"ngx-ui-loader\": \"^7.2.2\",\r\n    \"number-to-words\": \"^1.2.4\",\r\n    \"quill\": \"^1.3.6\",\r\n    \"rxjs\": \"^6.4.0\",\r\n    \"rxjs-compat\": \"^6.3.3\",\r\n    \"simple-line-icons\": \"^2.4.1\",\r\n    \"spinkit\": \"^1.2.5\",\r\n    \"ts-helpers\": \"^1.1.2\",\r\n    \"zone.js\": \"^0.8.26\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@angular-devkit/build-angular\": \"^0.13.8\",\r\n    \"@angular/cli\": \"^7.3.6\",\r\n    \"@angular/compiler-cli\": \"^7.1.1\",\r\n    \"@angular/language-service\": \"^7.1.1\",\r\n    \"@ngrx/schematics\": \"^7.4.0\",\r\n    \"@types/datatables.net\": \"^1.10.17\",\r\n    \"@types/jasmine\": \"^3.3.0\",\r\n    \"@types/jasminewd2\": \"^2.0.6\",\r\n    \"@types/jquery\": \"^3.3.29\",\r\n    \"@types/node\": \"^10.12.11\",\r\n    \"codelyzer\": \"^4.5.0\",\r\n    \"jasmine-core\": \"^2.99.0\",\r\n    \"jasmine-spec-reporter\": \"^4.2.1\",\r\n    \"karma\": \"^4.0.1\",\r\n    \"karma-chrome-launcher\": \"^2.2.0\",\r\n    \"karma-coverage-istanbul-reporter\": \"^2.0.4\",\r\n    \"karma-jasmine\": \"^2.0.1\",\r\n    \"karma-jasmine-html-reporter\": \"^1.4.0\",\r\n    \"node-sass\": \"^4.12.0\",\r\n    \"protractor\": \"^5.4.1\",\r\n    \"ts-node\": \"^7.0.1\",\r\n    \"tslint\": \"^5.11.0\",\r\n    \"typescript\": \"3.1.x\"\r\n  },\r\n  \"engines\": {\r\n    \"node\": \"&gt;= 8.9.4\",\r\n    \"npm\": \"&gt;= 5.6.0\"\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["typescript", "angular8"], "comments": [{"owner": {"reputation": 1125, "user_id": 12130501, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UKDZ5pOqWow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaXx5P-3Kgn-EBgT2_TibEvDndQA/photo.jpg?sz=128", "display_name": "Mridul", "link": "https://stackoverflow.com/users/12130501/mridul"}, "edited": false, "score": 0, "creation_date": 1577797774, "post_id": 59544414, "comment_id": 105257951, "body": "seem to be like a life cycle issue."}], "answers": [{"tags": [], "owner": {"reputation": 2133, "user_id": 4325849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc3ba5b56a6ceebf46cb2316d9072b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Newman", "link": "https://stackoverflow.com/users/4325849/chris-newman"}, "is_accepted": true, "score": 1, "last_activity_date": 1577798259, "creation_date": 1577798259, "answer_id": 59544613, "question_id": 59544414, "link": "https://stackoverflow.com/questions/59544414/updating-value-of-a-variable-and-viewchild-elementref-is-not-working-inside-sett/59544613#59544613", "title": "Updating value of a variable and ViewChild ElementRef is not working inside setTimeOut() function in .TS file", "body": "<p>Youll want to use \"fat arrow function\" syntax instead. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" rel=\"nofollow noreferrer\">It does not create it's own bindings to <code>this</code></a>, which allows you to access variables in your component easily.</p>\n\n<pre><code>ngAfterViewInit() {\n setTimeout(() =&gt; {\n   console.log(this.loading.nativeElement);\n  }, 1000);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 10586138, "user_type": "registered", "profile_image": "https://graph.facebook.com/2211490012258504/picture?type=large", "display_name": "Iliyas Shaik", "link": "https://stackoverflow.com/users/10586138/iliyas-shaik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577801238, "creation_date": 1577801238, "answer_id": 59545115, "question_id": 59544414, "link": "https://stackoverflow.com/questions/59544414/updating-value-of-a-variable-and-viewchild-elementref-is-not-working-inside-sett/59545115#59545115", "title": "Updating value of a variable and ViewChild ElementRef is not working inside setTimeOut() function in .TS file", "body": "<pre><code>ngAfterViewInit() {\n  setTimeout(() =&gt; {\n           console.log(this.loading.nativeElement);\n        },1000);\n}\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 11557256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9523790ff4422f968330e23ff5035a86?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi Jain", "link": "https://stackoverflow.com/users/11557256/ayushi-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 59544613, "answer_count": 2, "score": 1, "last_activity_date": 1577801238, "creation_date": 1577797050, "last_edit_date": 1577797239, "question_id": 59544414, "link": "https://stackoverflow.com/questions/59544414/updating-value-of-a-variable-and-viewchild-elementref-is-not-working-inside-sett", "title": "Updating value of a variable and ViewChild ElementRef is not working inside setTimeOut() function in .TS file", "body": "<p>I am working on an Angular project. I am using loader in the project. </p>\n\n<p><strong>app.html</strong></p>\n\n<pre><code>&lt;div #loading&gt;\n  &lt;app-loader&gt;&lt;/app-loader&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>app.ts</strong></p>\n\n<pre><code>@ViewChild('loading', {static:false}) loading:ElementRef;\n</code></pre>\n\n<p>If I use the code below, It is working absolutely fine. Console is printing the element. </p>\n\n<pre><code>ngAfterViewInit() {\n  console.log(this.loading.nativeElement);\n}\n</code></pre>\n\n<p>But if I use it inside the <code>setTimeOut()</code> function, In the console I am getting its value as <code>undefined</code>.</p>\n\n<pre><code>ngAfterViewInit() {\n setTimeout(function () {\n   console.log(this.loading.nativeElement);\n  }, 1000);\n}\n</code></pre>\n\n<p>Why is this so, I am not getting it inside <code>setTimeOut()</code> function. If I use a variable <code>loading=false</code> and if I update it inside <code>setTimeOut()</code> function as <code>setTimeout(function() {this.loading=false;}, 1000);</code> the value of loading still not updating there. </p>\n\n<p>I also can use <code>document.getElementById('loading')</code> in JavaScript or <code>$(\"#loading\").css(\"display\", \"none\");</code> in JQuery. But I don't have to. I want to use it only in type script, neither in java script nor in JQuery.</p>\n\n<p>Please let me know If any one know the way to access an element in <code>setTimeOut()</code> function in pure Typescript.</p>\n"}, {"tags": ["reactjs", "typescript", "react-router-v4"], "comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1578108485, "post_id": 59544291, "comment_id": 105341514, "body": "I think we need to see more about your system. I just replicated your issue in a codesandbox except it works as expected on my end <a href=\"https://codesandbox.io/s/react-router-redirects-typescript-epom2\" rel=\"nofollow noreferrer\"><b>See Here</b></a>... Can you try and reproduce the issue in a codesandbox so we can understand more?"}, {"owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "reply_to_user": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1578109173, "post_id": 59544291, "comment_id": 105341574, "body": "the sandbox has helped me edge closer, <code>export default withRouter(TopNav);</code> Use of default exports is forbidden (no-default-export)tslint(1) is there a way name the export?"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1578196958, "post_id": 59544291, "comment_id": 105358569, "body": "sure, just assign an alias for it. <code>export const MyTopNav = withRouter(TopNav);</code> or with that same alias you can also <code>export { MyTopNav }</code> if you don&#39;t inline export it. Let me know if that fixes the issue and I&#39;ll write it up as a solution. If it doesn&#39;t please reproduce your error on the sandbox and post the link so we can determine what the particular issue is."}], "answers": [{"comments": [{"owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 0, "creation_date": 1577937583, "post_id": 59545082, "comment_id": 105284573, "body": "the parent component where i declare <code>&lt;TopNav...</code> throws an error when it compiles now <code>Type &#39;{ loggedIn: boolean; fullName: string; avatar: string; }&#39; is missing the following properties from type &#39;PropsInterface&#39;: history, location, match  TS2739</code>"}], "tags": [], "owner": {"reputation": 4966, "user_id": 2300730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kcaPY.jpg?s=128&g=1", "display_name": "Jurica Smircic", "link": "https://stackoverflow.com/users/2300730/jurica-smircic"}, "is_accepted": false, "score": 4, "last_activity_date": 1577801047, "creation_date": 1577801047, "answer_id": 59545082, "question_id": 59544291, "link": "https://stackoverflow.com/questions/59544291/typescript-react-routecomponentprops-types-error-or-cant-access-history/59545082#59545082", "title": "TypeScript React: RouteComponentProps types error or cant access history", "body": "<p>The <code>RouteComponentProps</code> interface from <code>react-router-dom</code> is used to describe the object that the router will pass to the component props. The generic parameter of the interface is used to describe the shape of the \"match\" object where the router stores values for all extracted route parameters.</p>\n\n<p>As the route is always of string type, all matched route parameters can only be also strings, so the generic parameter must be a type that only has string properties. The problem is that your <code>isloggedIn</code> property is boolean. To satisfy the constraint it should be string. </p>\n\n<p>But I'm not sure that is what you want, from your code it looks like <code>fullName</code>, <code>isLoggedIn</code> are not route parameters but props that are passed to component explicitly.\nIf that is the case you can type the props object like this</p>\n\n<pre><code>interface PropsInterface extends RouteComponentProps {\n  avatar: string;\n  loggedIn: boolean;\n  fullName: string;\n}\n\nconst TopNav: React.FC&lt;PropsInterface&gt; = (props: PropsInterface) =&gt; {....\n</code></pre>\n\n<p>This gives you typed access to all router props (history, location, match...) and your additional props.</p>\n"}, {"comments": [{"owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 0, "creation_date": 1578055510, "post_id": 59577382, "comment_id": 105323881, "body": "I added your answer and the new errors it created above"}], "tags": [], "owner": {"reputation": 894, "user_id": 5743249, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-K9nPxZFYQbo/AAAAAAAAAAI/AAAAAAAAACQ/-vCcCKzgiMY/photo.jpg?sz=128", "display_name": "Hardik Chaudhary", "link": "https://stackoverflow.com/users/5743249/hardik-chaudhary"}, "is_accepted": false, "score": 5, "last_activity_date": 1578049243, "creation_date": 1578049243, "answer_id": 59577382, "question_id": 59544291, "link": "https://stackoverflow.com/questions/59544291/typescript-react-routecomponentprops-types-error-or-cant-access-history/59577382#59577382", "title": "TypeScript React: RouteComponentProps types error or cant access history", "body": "<p>If you want to pass <code>RouteComponentProps</code>, you have to wrap the component with <code>withRouter</code> and then export it.</p>\n\n<pre><code>export withRouter(TopNav);\n</code></pre>\n\n<p>and props type should be like,</p>\n\n<pre><code>interface PropsInterface extends RouteComponentProps {\n  avatar: string;\n  loggedIn: boolean;\n  fullName: string;\n}\n\nconst TopNav: React.FC&lt;PropsInterface&gt; = (props: PropsInterface) =&gt; {....\n</code></pre>\n\n<p>This will definitely fix your issue! </p>\n"}, {"tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": false, "score": 4, "last_activity_date": 1578137090, "creation_date": 1578137090, "answer_id": 59590209, "question_id": 59544291, "link": "https://stackoverflow.com/questions/59544291/typescript-react-routecomponentprops-types-error-or-cant-access-history/59590209#59590209", "title": "TypeScript React: RouteComponentProps types error or cant access history", "body": "<p>Seems that you have problem not only with <code>RouteComponentProps</code> but also with tslint config.</p>\n\n<ol>\n<li><p>Use <code>interface PropsInterface extends RouteComponentProps { /* ... */ }</code> as suggested by @Hardik Chaudhary.</p></li>\n<li><p>Wrap <code>TopNav</code> with <code>withRouter</code> HOC. It will inject <code>history</code> prop to <code>TopNav</code> component. But other props, like <code>loggedIn</code> will stay intact</p></li>\n<li><p>As you're not allowed to do default exports, do named export as below</p>\n\n<pre><code>// don't export TopNav\nconst TopNav: React.FC&lt;PropsInterface&gt; = /* ... */\n\nconst TopNavWithRouter = withRouter(TopNav)\n\nexport { TopNavWithROuter as TopNav }\n</code></pre>\n\n<p>Now <code>TopNav</code> is wrapped with router props but exported as named export. You can continue using it like you did it earlier.</p>\n\n<pre><code>import { TopNav } from './topnav.tsx'\n\n&lt;TopNav\n    loggedIn={global.shared.loggedIn} // false \n    fullName={global.shared.fullName} // ''\n    avatar={global.shared.avatarId} // ''\n/&gt;\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "is_accepted": false, "score": 2, "last_activity_date": 1578199090, "creation_date": 1578199090, "answer_id": 59597068, "question_id": 59544291, "link": "https://stackoverflow.com/questions/59544291/typescript-react-routecomponentprops-types-error-or-cant-access-history/59597068#59597068", "title": "TypeScript React: RouteComponentProps types error or cant access history", "body": "<p>You can fix your props as <a href=\"https://stackoverflow.com/users/5743249/hardik-chaudhary\">Hardik Chaudhary</a> suggested: You should use <code>interface PropsInterface extends RouteComponentProps { /* ... */ }</code>, since the first type parameter of RouteComponentProps is not meant for props (it's used for <a href=\"https://reacttraining.com/react-router/web/api/match\" rel=\"nofollow noreferrer\">match</a>)</p>\n\n<p>And if you are going to export your component as default export, you should use <code>export default</code> instead of <code>export</code>. so your code should be <code>export default withRouter(TopNav);</code> and react-router will inject the props to your component as you expected.</p>\n\n<p>Or if you prefer named exports, you can use <code>export const</code> to export your component with router props injected. I think this is probably your case since you used <code>export {...}</code> which is named export.</p>\n\n<p>For convenience, I'll leave the full code with my suggestions applied below.</p>\n\n<pre><code>import React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\n\ninterface PropsInterface extends RouteComponentProps {\n  avatar: string;\n  loggedIn: boolean;\n  fullName: string;\n}\n\nconst TopNav: React.FC&lt;PropsInterface&gt; = (props: PropsInterface) =&gt; { /* ... */ }\n\n// if you prefer default export\nexport default withRouter(TopNav);\n\n// if you prefer named export\n// Note: You must change the name of component above.\nexport const TopNav = withRouter(TopNav);\n</code></pre>\n"}], "owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2516, "favorite_count": 0, "answer_count": 4, "score": 7, "last_activity_date": 1578199090, "creation_date": 1577796118, "last_edit_date": 1578058428, "question_id": 59544291, "link": "https://stackoverflow.com/questions/59544291/typescript-react-routecomponentprops-types-error-or-cant-access-history", "title": "TypeScript React: RouteComponentProps types error or cant access history", "body": "<p>I have made a component and used it like...</p>\n\n<pre><code>&lt;TopNav\n    loggedIn={global.shared.loggedIn} // false \n    fullName={global.shared.fullName} // ''\n    avatar={global.shared.avatarId} // ''\n/&gt;\n</code></pre>\n\n<p>and inside the TopNav components I want to be able to access the props I have passed in and <code>props.history</code> or some other way of navigating the user programatically without a refresh..</p>\n\n<pre><code>import React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\n\n\ninterface PropsInterfaceNew {\n  avatar: string;\n  loggedIn: boolean;\n  fullName: string;\n}\n\ninterface PropsInterface\n  extends RouteComponentProps&lt;PropsInterfaceNew&gt; {}\n//                                    ^ Error\n\nconst TopNav: React.FC&lt;PropsInterface&gt; = (props: PropsInterface) =&gt; {\n...\n const firstName = props.fullName.split(' ')[0]; // I need props.fullName &amp; others\n  const search = (event: React.FormEvent) =&gt; {\n    event.preventDefault();\n    props.history.push('/my/profile'); // I need props.history\n  };\n</code></pre>\n\n<p>The error is</p>\n\n<pre><code>Type 'PropsInterfaceNew' does not satisfy the constraint '{ avatar?: string | undefined; loggedIn?: string | undefined; fullName?: string | undefined; }'.\n  Types of property 'loggedIn' are incompatible.\n    Type 'boolean' is not assignable to type 'string | undefined'.ts(2344)\n</code></pre>\n\n<p>alternatively if I remove the history completely like the below I have no errors but no access to history</p>\n\n<pre><code>interface PropsInterface {\n  avatar: string;\n  loggedIn: boolean;\n  fullName: string;\n}\n\nconst TopNav: React.FC&lt;PropsInterface&gt; = (props: PropsInterface) =&gt; {\n...\n</code></pre>\n\n<p>@hardik if I replace <code>export { TopNav };</code> with... </p>\n\n<pre><code>  export withRouter(TopNav);\n//^ err1      ^err2\n</code></pre>\n\n<p>I get the new error 2</p>\n\n<pre><code>statements are not aligned (align)tslint(1)\n</code></pre>\n\n<p>and error 1</p>\n\n<pre><code>Declaration or statement expected.ts(1128)\n</code></pre>\n"}, {"tags": ["typescript", "angular7", "mat-table"], "owner": {"reputation": 3, "user_id": 9427141, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Devendran yadav", "link": "https://stackoverflow.com/users/9427141/devendran-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 897, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577788762, "creation_date": 1577786862, "last_edit_date": 1577788762, "question_id": 59542597, "link": "https://stackoverflow.com/questions/59542597/angular-7-mat-select-multiplecheckbox-inside-mat-table-not-able-to-load-the", "title": "Angular 7: mat-select multiple(checkbox) inside mat-table, not able to load the data with Pre-selected checkbox item", "body": "<p>I'm trying to load mat-table with the data, which is having the mat-select in each row.</p>\n\n<p>I'm facing problem to load the [ngModel]) data, the ngModel list is getting cleared.</p>\n\n<p>Here is the sample code: </p>\n\n<pre><code> &lt;table style=\"width: 100%;\"  class=\"products-table\" mat-table [dataSource]=\"datasourceFrGridL3\"\n                        #table matSort [@animateStagger]=\"{value:'50'}\" fusePerfectScrollbar&gt;\n\n                        &lt;ng-container matColumnDef=\"userName\"&gt;\n                          &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;User Name &lt;/mat-header-cell&gt;\n                          &lt;mat-cell *matCellDef=\"let row\"&gt;\n                            &lt;p class=\"text-truncate\"&gt; {{row.userName}} &lt;/p&gt;\n                          &lt;/mat-cell&gt;\n                        &lt;/ng-container&gt;\n\n\n                        &lt;ng-container matColumnDef=\"department\"&gt;\n                          &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt; Department &lt;/mat-header-cell&gt;\n                          &lt;mat-cell *matCellDef=\"let row\"&gt;\n                            &lt;p class=\"text-truncate\"&gt; {{row.departmentName}} &lt;/p&gt;\n                          &lt;/mat-cell&gt;\n                        &lt;/ng-container&gt;\n\n                      &lt;ng-container matColumnDef=\"docTypes\"&gt;\n                        &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;Document Types (For Email alert) &lt;/mat-header-cell&gt;\n                        &lt;mat-cell *matCellDef=\"let row\"&gt;\n                          &lt;mat-form-field style=\"width: 200px;\"&gt;\n                            &lt;mat-select  formControlName=\"documenttypesL3\"  [(ngModel)]=\"row.documentTypeSelected\"  multiple  &gt;\n                              &lt;mat-option *ngFor=\"let dt of row.documentTypes\" [value]=\"dt.id\"&gt;\n                                {{dt.documentTypeName}}\n                              &lt;/mat-option&gt;\n                            &lt;/mat-select&gt;\n                          &lt;/mat-form-field&gt;\n                        &lt;/mat-cell&gt;\n                      &lt;/ng-container&gt;\n\n                        &lt;mat-header-row *matHeaderRowDef=\"displayedColumnsNew; \"&gt;&lt;/mat-header-row&gt;\n                        &lt;mat-row *matRowDef=\"let row; columns: displayedColumnsNew;\"&gt;\n                        &lt;/mat-row&gt;\n\n                      &lt;/table&gt;\n</code></pre>\n\n<p>The List is not getting selected.</p>\n\n<p>JSON Data for the same;</p>\n\n<pre><code>id: 43,\nuserName: \"adventq\",\nemail: \"advent@gmail.com\",\naccess: true,\ndepartmentId: 1,\ndepartmentName: \"Accounts data\",\ndocumentTypes:[\n {id: 1, documentTypeName: \"Capital Call\"},\n {id: 2, documentTypeName: \"Account statement\"},\n {id: 3, documentTypeName: \"Finance statement\"}],\ndocumentTypeSelected: [1,2]\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "progressive-web-apps"], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 12212344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kVOZ786rnAM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJlxXZdHmapwYNB1VUFyLU7jVRcw/photo.jpg?sz=128", "display_name": "kianoush dortaj", "link": "https://stackoverflow.com/users/12212344/kianoush-dortaj"}, "edited": false, "score": 0, "creation_date": 1577862755, "post_id": 59544849, "comment_id": 105270099, "body": "where i can put it ???"}, {"owner": {"reputation": 249, "user_id": 12212344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kVOZ786rnAM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJlxXZdHmapwYNB1VUFyLU7jVRcw/photo.jpg?sz=128", "display_name": "kianoush dortaj", "link": "https://stackoverflow.com/users/12212344/kianoush-dortaj"}, "edited": false, "score": 0, "creation_date": 1577865122, "post_id": 59544849, "comment_id": 105270420, "body": "if can do this i can use the pwa option for install it in the smaprt phone ?"}, {"owner": {"reputation": 512, "user_id": 1828907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38457500387a1417f9fae1493e49a4ac?s=128&d=identicon&r=PG", "display_name": "Rajesh G", "link": "https://stackoverflow.com/users/1828907/rajesh-g"}, "reply_to_user": {"reputation": 249, "user_id": 12212344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kVOZ786rnAM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJlxXZdHmapwYNB1VUFyLU7jVRcw/photo.jpg?sz=128", "display_name": "kianoush dortaj", "link": "https://stackoverflow.com/users/12212344/kianoush-dortaj"}, "edited": false, "score": 0, "creation_date": 1577866075, "post_id": 59544849, "comment_id": 105270575, "body": "I was wrong you can do Online/Offline check in DOM JS only.  Read <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events\" rel=\"nofollow noreferrer\">here</a>. May be based on this event you can force the user to offline page."}], "tags": [], "owner": {"reputation": 512, "user_id": 1828907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38457500387a1417f9fae1493e49a4ac?s=128&d=identicon&r=PG", "display_name": "Rajesh G", "link": "https://stackoverflow.com/users/1828907/rajesh-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1577799633, "creation_date": 1577799633, "answer_id": 59544849, "question_id": 59542096, "link": "https://stackoverflow.com/questions/59542096/dont-allow-using-pwa-offilne-in-angular-8/59544849#59544849", "title": "dont allow using pwa offilne in angular 8", "body": "<p>You can add listener for online/offline.</p>\n\n<pre><code>  var networkFlag = true;\n  window.addEventListener('online', handleConnection);\n  window.addEventListener('offline', handleConnection);\n</code></pre>\n\n<p>Inside HandleConnection you can set flag variable true or false based on network is online or offline. Using this flag variable you restrict loading your pages in offline.</p>\n\n<pre><code>  function handleConnection() {\n   networkFlag = navigator.onLine;\n    }\n</code></pre>\n\n<p>Hope this helps your case.</p>\n"}], "owner": {"reputation": 249, "user_id": 12212344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kVOZ786rnAM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJlxXZdHmapwYNB1VUFyLU7jVRcw/photo.jpg?sz=128", "display_name": "kianoush dortaj", "link": "https://stackoverflow.com/users/12212344/kianoush-dortaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1577886959, "answer_count": 1, "score": 0, "last_activity_date": 1577799633, "creation_date": 1577784318, "last_edit_date": 1577784683, "question_id": 59542096, "link": "https://stackoverflow.com/questions/59542096/dont-allow-using-pwa-offilne-in-angular-8", "closed_reason": "Needs more focus", "title": "dont allow using pwa offilne in angular 8", "body": "<p>I have created a PWA application with PWA and the service worker.</p>\n\n<p>My application allows to use the app when user is offline.</p>\n\n<p>but I want to not to allow access to user when the app is offline.</p>\n\n<p>how can I do this?</p>\n"}, {"tags": ["node.js", "typescript", "stripe-payments", "code-documentation", "tax-rate"], "comments": [{"owner": {"reputation": 666, "user_id": 1270929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6136fe60f32b1057c392250f3f17b620?s=128&d=identicon&r=PG", "display_name": "wsw", "link": "https://stackoverflow.com/users/1270929/wsw"}, "edited": false, "score": 1, "creation_date": 1577784727, "post_id": 59542084, "comment_id": 105253463, "body": "<code>@types&#47;stripe</code> is community maintained TS definitions on Stripe API which might not be up to date with latest Stripe API. Stripe frequently updates its API with new features. However, Stripe team is working on an official definition now matching the latest API version."}, {"owner": {"reputation": 74, "user_id": 11609269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XYMxLzRGaII/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMpfPxVts0BXSnoVxkD44gZyivUNw/mo/photo.jpg?sz=128", "display_name": "Ninjeneer", "link": "https://stackoverflow.com/users/11609269/ninjeneer"}, "reply_to_user": {"reputation": 666, "user_id": 1270929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6136fe60f32b1057c392250f3f17b620?s=128&d=identicon&r=PG", "display_name": "wsw", "link": "https://stackoverflow.com/users/1270929/wsw"}, "edited": false, "score": 0, "creation_date": 1577784844, "post_id": 59542084, "comment_id": 105253507, "body": "Thanks for the information. Is it possible to use the JS version in my TS project ?"}, {"owner": {"reputation": 666, "user_id": 1270929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6136fe60f32b1057c392250f3f17b620?s=128&d=identicon&r=PG", "display_name": "wsw", "link": "https://stackoverflow.com/users/1270929/wsw"}, "edited": false, "score": 0, "creation_date": 1578037185, "post_id": 59542084, "comment_id": 105316534, "body": "definitely you can use stripe-node in your TypeScript project."}], "owner": {"reputation": 74, "user_id": 11609269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XYMxLzRGaII/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMpfPxVts0BXSnoVxkD44gZyivUNw/mo/photo.jpg?sz=128", "display_name": "Ninjeneer", "link": "https://stackoverflow.com/users/11609269/ninjeneer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577784510, "creation_date": 1577784207, "last_edit_date": 1577784510, "question_id": 59542084, "link": "https://stackoverflow.com/questions/59542084/adding-tax-rates-on-invoiceintem", "title": "Adding tax rates on InvoiceIntem", "body": "<p><strong>Environment :</strong> NodeJS</p>\n\n<p><strong>Language :</strong> Typescript</p>\n\n<p>I am trying to add Tax Rates to my InvoiceItems, but it seems that the Stripe package does not follow the API doc.</p>\n\n<p>Here is my code :</p>\n\n<pre><code>newInvoiceItem = await this.stripe.invoiceItems.create({\n        customer: billingUser.billingData.customerID,\n        currency: this.settings.currency.toLocaleLowerCase(),\n        amount: Math.round(transaction.stop.roundedPrice * 100),\n        description: description,\n        tax_rates: defaultTax\n      }, {\n        idempotency_key: idemPotencyKey.keyNewInvoiceItem\n      });\n</code></pre>\n\n<p><a href=\"https://stripe.com/docs/api/invoiceitems/create#create_invoiceitem-tax_rates\" rel=\"nofollow noreferrer\">Documentation</a> says a <code>tax_rates</code> field is available, but this field isn't in Stripe package.</p>\n\n<p>Triggered error:</p>\n\n<pre><code>TS2769: No overload matches this call. \nOverload 1 of 2, '(data: InvoiceItemCreationOptions, options: HeaderOptions, response?: IResponseFn&lt;InvoiceItem&gt;): Promise&lt;InvoiceItem&gt;', gave the following error.     Argument of type '{ customer: string; currency: string; amount: number; description: string; tax_rates: ITaxRate; }' is not assignable to parameter of type 'InvoiceItemCreationOptions'.       Object literal may only specify known properties, and 'tax_rates' does not exist in type 'InvoiceItemCreationOptions'.   \nOverload 2 of 2, '(data: InvoiceItemCreationOptions, response?: IResponseFn&lt;InvoiceItem&gt;): Promise&lt;InvoiceItem&gt;', gave the following error.     Argument of type '{ customer: string; currency: string; amount: number; description: string; tax_rates: ITaxRate; }' is not assignable to parameter of type 'InvoiceItemCreationOptions'.       Object literal may only specify known properties, and 'tax_rates' does not exist in type 'InvoiceItemCreationOptions'\n</code></pre>\n\n<p>Available fields in <code>InvoiceItemCreationOptions</code> seen in module Stripe (index.d.ts):</p>\n\n<pre><code>amount?: number;\ncurrency: string;\ncustomer: string;\ndescription?: string;\ndiscountable?: boolean;\ninvoice?: string;\nquantity?: number;\nsubscription?: string;\nunit_amount?: number;\n</code></pre>\n\n<p>My current Stripe module version is 7.13.19 (latest version from <code>npm i @types/stripe</code>)</p>\n\n<p>Is the documentation erroneous or am I doing wrong ?</p>\n"}, {"tags": ["typescript", "interface", "swagger", "openapi"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2927132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e52a8d07e21a109d7216eb796c52c7?s=128&d=identicon&r=PG&f=1", "display_name": "Micho.bojcevski", "link": "https://stackoverflow.com/users/2927132/micho-bojcevski"}, "edited": false, "score": 0, "creation_date": 1577791736, "post_id": 59542992, "comment_id": 105255940, "body": "Thank you @MarkusMeyer for fast reply, I will try it out."}, {"owner": {"reputation": 1575, "user_id": 491024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/do7Tr.png?s=128&g=1", "display_name": "Lorna Mitchell", "link": "https://stackoverflow.com/users/491024/lorna-mitchell"}, "edited": false, "score": 0, "creation_date": 1578482129, "post_id": 59542992, "comment_id": 105450386, "body": "Please mark the answer as accepted if it worked! That gives credit to the user who helped you."}, {"owner": {"reputation": 4226, "user_id": 539048, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f355553e5ca142f02e4733062b56ce81?s=128&d=identicon&r=PG", "display_name": "GreenGiant", "link": "https://stackoverflow.com/users/539048/greengiant"}, "edited": false, "score": 0, "creation_date": 1604342010, "post_id": 59542992, "comment_id": 114313020, "body": "@Markus Where do you set this option? Is it part of the openapi-generator CLI or an option somewhere in the openapi.yaml file?"}, {"owner": {"reputation": 465, "user_id": 2175991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Fok.jpg?s=128&g=1", "display_name": "saganas", "link": "https://stackoverflow.com/users/2175991/saganas"}, "edited": false, "score": 0, "creation_date": 1610712789, "post_id": 59542992, "comment_id": 116225117, "body": "I had the same question, where to set that in property?"}], "tags": [], "owner": {"reputation": 852, "user_id": 6886501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jgqha.jpg?s=128&g=1", "display_name": "Markus Meyer", "link": "https://stackoverflow.com/users/6886501/markus-meyer"}, "is_accepted": true, "score": 4, "last_activity_date": 1577788918, "creation_date": 1577788918, "answer_id": 59542992, "question_id": 59541546, "link": "https://stackoverflow.com/questions/59541546/swagger-openapi-client-code-generator-changes-propery-name/59542992#59542992", "title": "Swagger/OpenAPI client code generator changes propery name", "body": "<p>Please have a look at the Codegen FAQ:\n<a href=\"https://github.com/swagger-api/swagger-codegen/wiki/FAQ#typescript\" rel=\"nofollow noreferrer\">Codegen - FAQ</a></p>\n\n<blockquote>\n  <p>The JSON response failed to deserialize properly into the object due to change in variable naming (snake_case to camelCase). Is there any way to keep the original naming?</p>\n  \n  <p>Yes, please use the following option when generating TypeScript clients:</p>\n</blockquote>\n\n<pre><code>modelPropertyNaming\n    Naming convention for the property: 'camelCase', 'PascalCase', 'snake_case' and 'original', which keeps the original name (Default: camelCase)\n</code></pre>\n\n<p>So, please set <strong>modelPropertyNaming</strong> to <em>original</em></p>\n"}], "owner": {"reputation": 31, "user_id": 2927132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e52a8d07e21a109d7216eb796c52c7?s=128&d=identicon&r=PG&f=1", "display_name": "Micho.bojcevski", "link": "https://stackoverflow.com/users/2927132/micho-bojcevski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1950, "favorite_count": 0, "accepted_answer_id": 59542992, "answer_count": 1, "score": 3, "last_activity_date": 1594998492, "creation_date": 1577780919, "question_id": 59541546, "link": "https://stackoverflow.com/questions/59541546/swagger-openapi-client-code-generator-changes-propery-name", "title": "Swagger/OpenAPI client code generator changes propery name", "body": "<p>I am developing a small web application with .NET Core backend and React (TS support) frontend.</p>\n\n<p>For API definition/documentation I am using OpenAPI and have problems with code generation for the client. Bellow is a snippet of the yaml definitions (from swagger.json) that I use to generate client interfaces with <a href=\"https://editor.swagger.io/\" rel=\"nofollow noreferrer\">Swagger Editor</a></p>\n\n<pre><code>crmObiskiPartnerjevResponse:\n      type: object\n      properties:\n        id:\n          type: integer\n          format: int32\n        PoslovniPartner:\n          type: integer\n          format: int32\n          nullable: true\n        DatumObiska:\n          type: string\n          format: date-time\n          nullable: true\n        NamenObiskaId:\n          type: integer\n          format: int32\n          nullable: true\n        Uporabnik:\n          type: integer\n          format: int32\n          nullable: true\n        Opomba:\n          type: string\n          nullable: true\n        NamenObiskaNaziv:\n          type: string\n          nullable: true\n        UporabnikNaziv:\n          type: string\n          nullable: true\n        PoslovniPartnerNaziv:\n          type: string\n          nullable: true\n      nullable: true\n</code></pre>\n\n<p>The problem is that when generating client code for typescript, Swagger editor messes up naming of properties. In this example it converts first letter to small cap (PoslovniPartner -> poslovniPartner). Any ideas would how to solve this would be much appreciated.</p>\n\n<pre><code>/**\n * ECE_crmWebAPI\n * No description provided (generated by Swagger Codegen https://github.com/swagger-api/swagger-codegen)\n *\n * OpenAPI spec version: v1\n * \n *\n * NOTE: This class is auto generated by the swagger code generator program.\n * https://github.com/swagger-api/swagger-codegen.git\n * Do not edit the class manually.\n */\n\nexport interface CrmObiskiPartnerjevResponse { \n    id?: number;\n    poslovniPartner?: number;\n    datumObiska?: Date;\n    namenObiskaId?: number;\n    uporabnik?: number;\n    opomba?: string;\n    namenObiskaNaziv?: string;\n    uporabnikNaziv?: string;\n    poslovniPartnerNaziv?: string;\n}\n</code></pre>\n"}, {"tags": ["typescript", "typeof"], "comments": [{"owner": {"reputation": 45, "user_id": 11554524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3fvw.jpg?s=128&g=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/11554524/jacob"}, "edited": false, "score": 0, "creation_date": 1577780845, "post_id": 59541521, "comment_id": 105252183, "body": "Also the editor also does not provide hints about the number."}], "answers": [{"tags": [], "owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1577781678, "last_edit_date": 1577781678, "creation_date": 1577781057, "answer_id": 59541566, "question_id": 59541521, "link": "https://stackoverflow.com/questions/59541521/what-means-typeof-arraynumber-in-typescript/59541566#59541566", "title": "What means typeof Array[number] in Typescript?", "body": "<p><code>typeof</code> gets the type of <code>names</code> variable (which is <code>readonly ['jacob', 'master jung', 'kyuhyun']</code>) then array/tuple member type is resolved. This is called indexed access types or <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-1.html#keyof-and-lookup-types\" rel=\"nofollow noreferrer\">lookup types</a>.  </p>\n\n<blockquote>\n  <p>Syntactically, they look exactly like an element access, but are written as types</p>\n</blockquote>\n\n<p>In this case we \"query\" the type of tuple member (tuple/array at index) which is <code>'jacob' | 'master jung' | 'kyuhyun'</code> </p>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#code/MYewdgzgLgBGCGBbAphGBeGBtA5AK3lACMcAaGHReaZAJxjwFcwBzMigawE9GALHsDgC6MajFCQoAbgBQULgAdkMAHJJUGGPKUgAZnHUQsYRoiJ0hUmAHprMAEQFi9mAB8HVGvSasX7+9x8AvZAA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}, {"tags": [], "owner": {"reputation": 3595, "user_id": 8384910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tdOxhK4hKB4/AAAAAAAAAAI/AAAAAAAABlk/dWnl8ZxHsdI/photo.jpg?sz=128", "display_name": "Richie Bendall", "link": "https://stackoverflow.com/users/8384910/richie-bendall"}, "is_accepted": false, "score": 0, "last_activity_date": 1577781145, "creation_date": 1577781145, "answer_id": 59541577, "question_id": 59541521, "link": "https://stackoverflow.com/questions/59541521/what-means-typeof-arraynumber-in-typescript/59541577#59541577", "title": "What means typeof Array[number] in Typescript?", "body": "<p>Anything with a type of <code>Names</code> has to be an item in the array.</p>\n\n<p>Now, you can do:</p>\n\n<pre><code>const value: Names = \"jacob\"\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11554524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3fvw.jpg?s=128&g=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/11554524/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 59541566, "answer_count": 2, "score": 2, "last_activity_date": 1577781678, "creation_date": 1577780723, "last_edit_date": 1577781550, "question_id": 59541521, "link": "https://stackoverflow.com/questions/59541521/what-means-typeof-arraynumber-in-typescript", "title": "What means typeof Array[number] in Typescript?", "body": "<pre class=\"lang-js prettyprint-override\"><code>const names = ['jacob', 'master jung', 'kyuhyun'] as const;\ntype Names = typeof names[number];\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/XlnXH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XlnXH.png\" alt=\"enter image description here\"></a></p>\n\n<p>I got the results I wanted, but I don't understand <code>typeof names[number]</code>.</p>\n\n<p>What does <code>typeof Array[number]</code> in Typescript mean?</p>\n"}, {"tags": ["html", "angular", "typescript", "user-interface", "material-design"], "comments": [{"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 2, "creation_date": 1577781786, "post_id": 59541403, "comment_id": 105252460, "body": "I love the contents of your array."}, {"owner": {"reputation": 149, "user_id": 12451924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a6db6cd13479923f7d30470305a250?s=128&d=identicon&r=PG&f=1", "display_name": "MenimE", "link": "https://stackoverflow.com/users/12451924/menime"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 1, "creation_date": 1577782239, "post_id": 59541403, "comment_id": 105252619, "body": "Thank You. Rock Music is love. Any solution tho?"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1577782412, "post_id": 59541403, "comment_id": 105252666, "body": "Sadly, I haven&#39;t got a clue. Good luck though.."}, {"owner": {"reputation": 149, "user_id": 12451924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a6db6cd13479923f7d30470305a250?s=128&d=identicon&r=PG&f=1", "display_name": "MenimE", "link": "https://stackoverflow.com/users/12451924/menime"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1577858217, "post_id": 59541403, "comment_id": 105269518, "body": "You have helped me a lot, Happy new year :)"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1577863751, "post_id": 59541403, "comment_id": 105270217, "body": "Happy new year!"}], "answers": [{"comments": [{"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1577782762, "post_id": 59541794, "comment_id": 105252791, "body": "Could you explain what you have done that was missed by OP in order to make it work? IMO, it will be helpful for future readers as well."}, {"owner": {"reputation": 3084, "user_id": 5868331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpLps.jpg?s=128&g=1", "display_name": "mayur", "link": "https://stackoverflow.com/users/5868331/mayur"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1577783112, "post_id": 59541794, "comment_id": 105252908, "body": "@NicholasK comments and how to implement added."}, {"owner": {"reputation": 3084, "user_id": 5868331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpLps.jpg?s=128&g=1", "display_name": "mayur", "link": "https://stackoverflow.com/users/5868331/mayur"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 1, "creation_date": 1577789336, "post_id": 59541794, "comment_id": 105255118, "body": "@MenimE was the solution helpful, Please accept and upvote if it was helpful to you"}], "tags": [], "owner": {"reputation": 3084, "user_id": 5868331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpLps.jpg?s=128&g=1", "display_name": "mayur", "link": "https://stackoverflow.com/users/5868331/mayur"}, "is_accepted": true, "score": 2, "last_activity_date": 1577783297, "last_edit_date": 1577783297, "creation_date": 1577782452, "answer_id": 59541794, "question_id": 59541403, "link": "https://stackoverflow.com/questions/59541403/movable-expansion-panel-in-angular-using-material/59541794#59541794", "title": "Movable Expansion-Panel in Angular using Material", "body": "<ul>\n<li><a href=\"https://angular-qlpqhb.stackblitz.io\" rel=\"nofollow noreferrer\">https://angular-qlpqhb.stackblitz.io</a></li>\n<li><a href=\"https://stackblitz.com/edit/angular-qlpqhb?file=src/app/cdk-drag-drop-sorting-example.html\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-qlpqhb?file=src/app/cdk-drag-drop-sorting-example.html</a></li>\n</ul>\n\n<p>Added <strong>(cdkDropListDropped)=\"drop($event)\"</strong> event for drag and drop events and added cdkDrag for dom elements which you want to drag</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;div cdkDropList class=\"example-list\" (cdkDropListDropped)=\"drop($event)\"&gt; // added html for drag and drop\n  &lt;div class=\"nomarLR mt-1 float-left col-12\" *ngFor=\"let x of listA;let i =index\" cdkDrag&gt; // cdkDrag elements which are draggable.\n                &lt;mat-accordion multi=\"false\" class=\"cus-accordion-style2 col-12\"\n                    class=\"nomarLR nomarTB\"&gt;\n                    &lt;mat-expansion-panel class=\"nomarLR nomarTB\"&gt;\n                        &lt;mat-expansion-panel-header class=\"nomarLR nomarTB\"&gt;\n                            &lt;mat-panel-title class=\"nomarLR nomarTB\"&gt;\n                                {{x.name}}\n              &lt;/mat-panel-title&gt;\n                        &lt;/mat-expansion-panel-header&gt;\n          &lt;div *ngFor= \"let y of listA\"&gt;\n            &lt;span *ngFor=\"let z of y.favMember\"&gt; {{z.artist}} &lt;/span&gt;\n          &lt;/div&gt;\n                    &lt;/mat-expansion-panel&gt;\n                &lt;/mat-accordion&gt;\n        &lt;/div&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p><strong>TS</strong></p>\n\n<pre><code>sortedArray = []\n\n\nlistA  = [\n{ name : \"Pink Floyd\", \nfavSong : \"Shine On You\", \nfavMember :[\n{artist : \"Nick Mason\"}\n]},\n{ name : \"Guns and Roses\", \nfavSong : \"November Rain\", \nfavMember :[\n{artist : \"Slash\"}\n]},\n{ name : \"Led Zeppelin\", \nfavSong : \"Stairway To heaven\", \nfavMember :[\n{artist : \"Jimmy page\"}\n]},\n\ndrop(event: CdkDragDrop&lt;string[]&gt;) {\n    moveItemInArray(this.listA, event.previousIndex, event.currentIndex);\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 12451924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a6db6cd13479923f7d30470305a250?s=128&d=identicon&r=PG&f=1", "display_name": "MenimE", "link": "https://stackoverflow.com/users/12451924/menime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 59541794, "answer_count": 1, "score": 1, "last_activity_date": 1577783297, "creation_date": 1577779937, "question_id": 59541403, "link": "https://stackoverflow.com/questions/59541403/movable-expansion-panel-in-angular-using-material", "title": "Movable Expansion-Panel in Angular using Material", "body": "<p>I have an array of objects </p>\n\n<pre><code>  listA  = [\n  { name : \"Pink Floyd\", \n    sequence : 1,\n    favSong : \"Shine On You\", \n    favMember :[\n    {artist : \"Nick Mason\"}\n  ]},\n    { name : \"Guns and Roses\", \n    sequence  :2,\n    favSong : \"November Rain\", \n    favMember :[\n    {artist : \"Slash\"}\n  ]},\n    { name : \"Led Zeppelin\",\n    sequence  :3,\n    favSong : \"Stairway To heaven\", \n    favMember :[\n    {artist : \"Jimmy page\"}\n  ]},\n]\n</code></pre>\n\n<p>and I am displaying them as multiple expansion panels on the UI. I want to add a feature where i can drag individual expansion panels and and change the order in the which the names are displayed. I tried using sortableJs but i cant figure it out. </p>\n\n<p>here is the <strong>HTML</strong></p>\n\n<pre><code>&lt;div&gt;\n    &lt;strong&gt;My favorite bands in order  : - &lt;/strong&gt;\n&lt;/div&gt;\n&lt;hr /&gt;\n&lt;hr /&gt;\n\n\n\n&lt;div class=\"row mt-3\"&gt;\n\n            &lt;div class=\"nomarLR mt-1 float-left col-12\" *ngFor=\"let x of listA;let i =index\"&gt;\n                &lt;mat-accordion multi=\"false\" class=\"cus-accordion-style2 col-12\" class=\"nomarLR nomarTB\"&gt;\n                    &lt;mat-expansion-panel class=\"nomarLR nomarTB\"&gt;\n                        &lt;mat-expansion-panel-header class=\"nomarLR nomarTB\"&gt;\n                            &lt;mat-panel-title class=\"nomarLR nomarTB\"&gt;\n                                {{x.name}}\n                            &lt;/mat-panel-title&gt;\n                        &lt;/mat-expansion-panel-header&gt;\n                        &lt;div *ngFor=\"let y of listA\"&gt;\n                            &lt;span *ngFor=\"let z of y.favMember\"&gt; {{z.artist}} &lt;/span&gt;\n                        &lt;/div&gt;\n                    &lt;/mat-expansion-panel&gt;\n                &lt;/mat-accordion&gt;\n            &lt;/div&gt;\n\n&lt;/div&gt;\n\n&lt;!-- why is multi not working ??--&gt;\n</code></pre>\n\n<p>Can someone please help me with it. Here is a <a href=\"https://stackblitz.com/edit/angular-material-gnrzcl\" rel=\"nofollow noreferrer\">Stackblitz</a> \nAlso, when ever the user moves the expansion panels it should push the array objects in a different array with updated sequence. </p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577778608, "post_id": 59541125, "comment_id": 105251481, "body": "yes return type of getAnalysisDetails is Observable but await not found in typescript"}, {"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "reply_to_user": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577778998, "post_id": 59541125, "comment_id": 105251595, "body": "@omarasi just use <code>.toPromise()</code> method. Please, see the bottom part of my reply"}, {"owner": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577779420, "post_id": 59541125, "comment_id": 105251733, "body": "can you tell me what .toPromise() do ?"}], "tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": false, "score": 1, "last_activity_date": 1577780152, "last_edit_date": 1577780152, "creation_date": 1577778287, "answer_id": 59541125, "question_id": 59541081, "link": "https://stackoverflow.com/questions/59541081/way-to-use-data-immediately-when-its-return-from-http-request-without-waiting-to/59541125#59541125", "title": "way to use data immediately when its return from HTTP request without waiting to loop throw all array element", "body": "<p>You can use <code>async</code> operator to <code>await</code> result your API call:</p>\n\n<pre><code>async fooFunction() \n{\n    this.allAnalysisData.forEach((analysis) =&gt; {\n        let detail= await this.analysisCenterService.getAnalysisDetails(analysis.id);\n        this.detailed.push({Analysis:analysis , det:detail});\n    });\n}\n</code></pre>\n\n<p>If return type of <code>getAnalysisDetails</code> is <code>Observable</code>, then you can convert to <code>Promise</code> using <code>.toPromise</code> method:</p>\n\n<pre><code> let result = await this.analysisCenterService.getAnalysisDetails(analysis.id).toPromise();\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p><a href=\"https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/topromise.md\" rel=\"nofollow noreferrer\">As docs says about <code>.toPromise</code>:</a> </p>\n\n<blockquote>\n  <p>Converts an Observable sequence to a ES2015 compliant promise.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577779092, "post_id": 59541161, "comment_id": 105251624, "body": "how your code will subscribe all observablesList ? there is no loop !"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577779240, "post_id": 59541161, "comment_id": 105251679, "body": "<code>observableList</code> contains the list of observables from looping of <code>allAnalysisData</code>, and the request to <code>getAnalysisDetails</code>"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577779284, "post_id": 59541161, "comment_id": 105251689, "body": "Have you tried my code? If you follow what I have done and subscribe to  <code>observablesList</code>, you will be able to get all of the returned responses"}, {"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577779403, "post_id": 59541161, "comment_id": 105251725, "body": "@wentjun forkJoin will wait for observable list to complete?"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577779445, "post_id": 59541161, "comment_id": 105251742, "body": "@AliWahab yes it will. It will wait for all observables to complete, before returning the values. This way it won&#39;t be undefined"}, {"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577779597, "post_id": 59541161, "comment_id": 105251781, "body": "Its a good solution but I was thinking that if I have 10 requests. So it will wait to execute those 10 request and then start returning values. Which will take good time to execute"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 1, "creation_date": 1577779742, "post_id": 59541161, "comment_id": 105251820, "body": "@AliWahab If you want it to start returning values when any of the request has been returned (without waiting for all request to be returned), you can use <code>combineLatest</code> instead of <code>forkJoin</code>"}, {"owner": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577780003, "post_id": 59541161, "comment_id": 105251915, "body": "i  tried your code exactly but it does not arrive to console statement !! are you sure that forkJoin can use in typescript"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577780155, "post_id": 59541161, "comment_id": 105251962, "body": "@omarasi yes, it works 100% with Angular and TypeScript. Have you tried using combineLatest then"}, {"owner": {"reputation": 5451, "user_id": 9765167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0hpIB.jpg?s=128&g=1", "display_name": "Ramesh Reddy", "link": "https://stackoverflow.com/users/9765167/ramesh-reddy"}, "reply_to_user": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577781768, "post_id": 59541161, "comment_id": 105252455, "body": "@omarasi make sure you&#39;re importing forkJoin from rxjs"}, {"owner": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "edited": false, "score": 0, "creation_date": 1577781989, "post_id": 59541161, "comment_id": 105252528, "body": "both combineLatest &amp; forkJoin wait for all observableList to subscribe , i want to return subscribed element immediately"}], "tags": [], "owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "is_accepted": false, "score": 1, "last_activity_date": 1577778547, "creation_date": 1577778547, "answer_id": 59541161, "question_id": 59541081, "link": "https://stackoverflow.com/questions/59541081/way-to-use-data-immediately-when-its-return-from-http-request-without-waiting-to/59541161#59541161", "title": "way to use data immediately when its return from HTTP request without waiting to loop throw all array element", "body": "<p>You shouldn't be nested your subscriptions within a forEach loop, and vice versa. Instead, you should be making full use of RxJS operators, since RxJS is natively available in Angular.</p>\n\n<p>For this instance, you can make use of <a href=\"https://www.learnrxjs.io/operators/combination/forkjoin.html\" rel=\"nofollow noreferrer\">forkJoin</a>,</p>\n\n<blockquote>\n  <p>When all observables complete, emit the last emitted value from each.</p>\n</blockquote>\n\n<p>forkJoin() will wait for the <code>Array.forEach()</code> loop to be completed before returning all the observables.</p>\n\n<pre><code>const observableList = [];\n\nthis.allAnalysisData.forEach((analysis) =&gt; {\n  observableList.push(this.analysisCenterService.getAnalysisDetails(analysis.id));\n});\n\nforkJoin(observablesList).subscribe(response =&gt; {\n  console.log(response);\n  // handle the rest\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 5181115, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NuyiT05DJuU/AAAAAAAAAAI/AAAAAAAAAD0/xT4V58uIFDo/photo.jpg?sz=128", "display_name": "Venkatesh Parihar", "link": "https://stackoverflow.com/users/5181115/venkatesh-parihar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577789280, "creation_date": 1577789280, "answer_id": 59543055, "question_id": 59541081, "link": "https://stackoverflow.com/questions/59541081/way-to-use-data-immediately-when-its-return-from-http-request-without-waiting-to/59543055#59543055", "title": "way to use data immediately when its return from HTTP request without waiting to loop throw all array element", "body": "<p>you can use like\nreturn forkJoin(\n     this.allAnalysisData.map(analysis=> this._httpClient.get('url of services'+ analysis))\n ).subscribes(response=> {});</p>\n"}], "owner": {"reputation": 13, "user_id": 9269914, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GWQMD8jOcbI/AAAAAAAAAAI/AAAAAAAAAKQ/tvEVL7bSdro/photo.jpg?sz=128", "display_name": "omar asi", "link": "https://stackoverflow.com/users/9269914/omar-asi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1577789280, "creation_date": 1577778017, "last_edit_date": 1577778708, "question_id": 59541081, "link": "https://stackoverflow.com/questions/59541081/way-to-use-data-immediately-when-its-return-from-http-request-without-waiting-to", "title": "way to use data immediately when its return from HTTP request without waiting to loop throw all array element", "body": "<p>I had a for loop in ts that loop throw list and for each array element make an HTTP request to get its detail , but I always had an error that there is now detailed because this loop take a lot of time , \nso there is any way to use each detailed One after the other without waiting to loop throw all array ?\n <strong><em>i need to use detailed immediately when its return from HTTP</em></strong> </p>\n\n<pre><code>this.allAnalysisData.forEach((analysis) =&gt; {\n        this.analysisCenterService.getAnalysisDetails(analysis.id).subscribe(detail =&gt; {\n            this.detailed.push({Analysis:analysis , det:detail});\n        });\n    });\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "is_accepted": false, "score": 0, "last_activity_date": 1577777922, "creation_date": 1577777922, "answer_id": 59541061, "question_id": 59541029, "link": "https://stackoverflow.com/questions/59541029/using-number-pipe-in-input-gives-nan-angular/59541061#59541061", "title": "Using number pipe in input gives Nan angular", "body": "<p>As you can see in the docs </p>\n\n<p><a href=\"https://angular.io/api/common/DecimalPipe\" rel=\"nofollow noreferrer\">https://angular.io/api/common/DecimalPipe</a></p>\n\n<p><code>DecimalPipe</code> has optional <code>locale</code> argument. Set it to correct value and it should work.</p>\n\n<pre><code>{{ value_expression | number [ : digitsInfo [ : locale ] ] }}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1553, "user_id": 3624141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c94f5b55339017d3ec654c65d07cc3f?s=128&d=identicon&r=PG&f=1", "display_name": "user122222", "link": "https://stackoverflow.com/users/3624141/user122222"}, "edited": false, "score": 0, "creation_date": 1577779460, "post_id": 59541218, "comment_id": 105251747, "body": "If I set minFractionDigits=2 and then add numbers after decimal separator they are just added to the whole number e.g.  I have number 11,111.00  and want to make 11,111,55 and it becomes  1,111,155.00"}, {"owner": {"reputation": 1553, "user_id": 3624141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c94f5b55339017d3ec654c65d07cc3f?s=128&d=identicon&r=PG&f=1", "display_name": "user122222", "link": "https://stackoverflow.com/users/3624141/user122222"}, "edited": false, "score": 0, "creation_date": 1577781165, "post_id": 59541218, "comment_id": 105252277, "body": "I&#39;m sorry... I made a typo there I meant 11,111.55 :( and yes, <code>value.toString().replace(&#39;,&#39;, &quot;&quot;);</code> this would work if locale is <code>EN</code> but in german language number looks like 11.111.111,15 so it that case it should remove <code>.</code> and not <code>,</code>. And I&#39;m not sure how to get thousand separator in different languages"}], "tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": false, "score": 1, "last_activity_date": 1577783610, "last_edit_date": 1577783610, "creation_date": 1577778925, "answer_id": 59541218, "question_id": 59541029, "link": "https://stackoverflow.com/questions/59541029/using-number-pipe-in-input-gives-nan-angular/59541218#59541218", "title": "Using number pipe in input gives Nan angular", "body": "<p>You need to remove unnecessary literals in your pipe code:</p>\n\n<pre><code>value = value.toString().replace(/\\D/g, \"\");\n</code></pre>\n\n<p>The whole code:</p>\n\n<pre><code>export class NumberFormatPipe implements PipeTransform {\n    transform(value: number | string, minFractionDigits: number = 0, \n        maxFractionDigits: number = 2, locale: string = 'en'): string \n    {\n        value = value.toString().replace(/\\D/g, \"\");\n        console.log(`value:`, value)        \n        return new Intl.NumberFormat(locale, {\n            minimumFractionDigits: minFractionDigits,\n            maximumFractionDigits: maxFractionDigits\n        }).format(Number(value));\n    }\n} \n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>If you want to make 11,111,55:</p>\n\n<pre><code>value = value.toString().replace(',', \"\");\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/decimal-pipe-comma-separator-example-arg-yumhfd?file=app/shared/number.pipe.ts\" rel=\"nofollow noreferrer\">A stackblitz example can be seen here</a></p>\n\n<p>UPDATE 1:</p>\n\n<p>You can make decision based on locale: </p>\n\n<pre><code>if(locale =='en')\n   value = value.toString().replace(/\\D/g, \"\");\nelse\n   value = value.toString().replace(',', \"\");\n</code></pre>\n\n<p>Or try to use built-in <a href=\"https://angular.io/api/common/DecimalPipe#description\" rel=\"nofollow noreferrer\">Angular decimal pipe</a>. It has parameter <code>locale</code>, so your unnecessary code such as <code>if</code> or <code>else</code>can be eluded.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 5181115, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NuyiT05DJuU/AAAAAAAAAAI/AAAAAAAAAD0/xT4V58uIFDo/photo.jpg?sz=128", "display_name": "Venkatesh Parihar", "link": "https://stackoverflow.com/users/5181115/venkatesh-parihar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577788393, "creation_date": 1577788393, "answer_id": 59542901, "question_id": 59541029, "link": "https://stackoverflow.com/questions/59541029/using-number-pipe-in-input-gives-nan-angular/59542901#59542901", "title": "Using number pipe in input gives Nan angular", "body": "<p>just initialize it with default value 0 or you can  use mask directive (ngx-currency)</p>\n"}], "owner": {"reputation": 1553, "user_id": 3624141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c94f5b55339017d3ec654c65d07cc3f?s=128&d=identicon&r=PG&f=1", "display_name": "user122222", "link": "https://stackoverflow.com/users/3624141/user122222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1295, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577788393, "creation_date": 1577777713, "last_edit_date": 1577778192, "question_id": 59541029, "link": "https://stackoverflow.com/questions/59541029/using-number-pipe-in-input-gives-nan-angular", "title": "Using number pipe in input gives Nan angular", "body": "<p>I want to make all numbers to be formatted based on our application language, so I made a pipe, where I pass locale and value. (similar to number pipe, just no need to register locale in app.module) and in all edit modals where input is also  a number it has to be formatted when user clicks outside the input.\nHowever I get error when input is formatted and user edits it again.</p>\n\n<p>I added a working sample here: \n<a href=\"https://stackblitz.com/edit/decimal-pipe-comma-separator-example-arg-h3gtrw\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/decimal-pipe-comma-separator-example-arg-h3gtrw</a></p>\n\n<p>in the input enter e.g. <code>11111</code>, then click outside you see input was formatted to <code>111,11</code> then add <code>.33</code> and it just gives NaN.</p>\n\n<p>how can I fix this? I thought of removing thousand separators (and leaving just decimal separator) before returning transformed value in <code>my number.pipe.ts</code> . But how do I get thousand separator? In <code>EN</code> it's <code>,</code> in <code>DE</code> it's <code>.</code> but I didn't find function to get separator based on locale.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//pipe\r\n */\r\n\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ \r\n    name: 'numberFormat'\r\n })\r\nexport class NumberFormatPipe implements PipeTransform {\r\n    transform(value: number | string, minFractionDigits: number = 0, maxFractionDigits: number = 2, locale: string = 'en'): string {\r\n        return new Intl.NumberFormat(locale, {\r\n            minimumFractionDigits: minFractionDigits,\r\n            maximumFractionDigits: maxFractionDigits\r\n        }).format(Number(value));\r\n    }\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div&gt;\r\n  &lt;input type=\"text\" [ngModel]=\"userNum | numberFormat\"\r\n                                (ngModelChange)=\"userNum=$event\" [ngModelOptions]=\"{updateOn:'blur'}\"&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["typescript", "rxjs", "nestjs"], "comments": [{"owner": {"reputation": 657, "user_id": 10715502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cnyaZ.jpg?s=128&g=1", "display_name": "Tal Ohana", "link": "https://stackoverflow.com/users/10715502/tal-ohana"}, "edited": false, "score": 0, "creation_date": 1577777398, "post_id": 59540835, "comment_id": 105251141, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/35254323/rxjs-observable-pagination\">RxJs Observable Pagination</a>"}], "answers": [{"comments": [{"owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "edited": false, "score": 0, "creation_date": 1577932760, "post_id": 59551166, "comment_id": 105283863, "body": "hmm.. replacing the <code>switchMap</code> seem to cause the <code>loginData</code> (which is actually a string of the login token) to be passed into the <code>takeWhile</code>, together with the response of the <code>getRequisitions</code> function. How do I prevent the login token to be passed?"}, {"owner": {"reputation": 8097, "user_id": 8618350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f100e1a27815164cb9a9bf00487858?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Cheung", "link": "https://stackoverflow.com/users/8618350/fan-cheung"}, "reply_to_user": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "edited": false, "score": 0, "creation_date": 1577947833, "post_id": 59551166, "comment_id": 105286685, "body": "sorry my mistake, i should mov the expand to inner observable. Updated the code"}, {"owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "edited": false, "score": 0, "creation_date": 1577951193, "post_id": 59551166, "comment_id": 105287716, "body": "Unfortunately the updated code still does not work - I added a <code>console.log</code> in the first line of the <code>takeWhile</code> and in the first time the value of <code>res</code> is still the login token"}], "tags": [], "owner": {"reputation": 8097, "user_id": 8618350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f100e1a27815164cb9a9bf00487858?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Cheung", "link": "https://stackoverflow.com/users/8618350/fan-cheung"}, "is_accepted": true, "score": 2, "last_activity_date": 1577952325, "last_edit_date": 1577952325, "creation_date": 1577869230, "answer_id": 59551166, "question_id": 59540835, "link": "https://stackoverflow.com/questions/59540835/nestjs-http-rxjs-traversing-a-paginated-endpoint/59551166#59551166", "title": "NestJs HTTP (rxjs) traversing a paginated endpoint", "body": "<p>You can replace the switchMap and replace with <code>expand</code> and <code>takeWhile</code></p>\n\n<pre><code>const requisitionData = this.login().pipe(\n     map(response =&gt; response.data.token),\n     switchMap(loginData =&gt; \n       getRequisitions(loginData).pipe(\n          expand(()=&gt;this.getRequisitions(loginData)),\n          takeWhile(res=&gt;{\n             const {cursor}=res.meta;\n             return cursor.next+1&lt;curosr.last_page\n          }),\n          map(response =&gt; response.data),\n          map(requisitions =&gt; this.processRequisitions(requisitions)),\n       ),\n  );\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 59551166, "answer_count": 1, "score": 0, "last_activity_date": 1577952325, "creation_date": 1577776410, "question_id": 59540835, "link": "https://stackoverflow.com/questions/59540835/nestjs-http-rxjs-traversing-a-paginated-endpoint", "title": "NestJs HTTP (rxjs) traversing a paginated endpoint", "body": "<p>I have the following code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>init() {\n  const requisitionData = this.login().pipe(\n    map(response =&gt; response.data.token),\n    switchMap(loginData =&gt; this.getRequisitions(loginData)),\n    map(response =&gt; response.data),\n    map(requisitions =&gt; this.processRequisitions(requisitions)),\n  );\n  requisitionData.subscribe();\n}\n</code></pre>\n\n<p>the <code>getRequisitions()</code> calls a search endpoint that returns paginated data like so:</p>\n\n<pre><code>{\n    data: [{        \n        title: '...',\n        reference: '...',\n    }],\n    meta: {\n        cursor: {\n            current_page: 1,\n            from: 1,\n            to: 50,\n            next: 2,\n            prev: null,\n            last_page: 2137,\n            per_page: 50,\n            total: 106824\n        }\n    },\n    message: 'Result List'\n}\n</code></pre>\n\n<p>My current code in <code>init()</code> only retrieves the first set of results (50 entries), performs some light processing on the data and saves it into the database (the <code>processRequisitions</code>). How do I change my code to:</p>\n\n<ul>\n<li>Get the first set of result</li>\n<li>Get the value of <code>meta.cursor.last_page</code></li>\n<li>Pass the <code>next_page</code> value and call the same endpoint until <code>last_page</code> is reached.</li>\n</ul>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1577786796, "post_id": 59540336, "comment_id": 105254155, "body": "At 35k I would expect you to know that debugging help is required to include the specific error rather than &quot;this fails&quot;. Could you please update the question?"}], "answers": [{"comments": [{"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 1, "creation_date": 1577782517, "post_id": 59540843, "comment_id": 105252700, "body": "It was also my first thought, but actually only the &quot;Partial&quot; part doesn&#39;t work here for some reason. Also if it was the consideration - type checking for <code>this</code> wouldn&#39;t work at all"}, {"owner": {"reputation": 3823, "user_id": 358308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c2af4f7f119918924bf867b5941c99?s=128&d=identicon&r=PG", "display_name": "petraszd", "link": "https://stackoverflow.com/users/358308/petraszd"}, "reply_to_user": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577785841, "post_id": 59540843, "comment_id": 105253842, "body": "Your are right. <code>this</code> can be used as type. But it is special type: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#polymorphic-this-types\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/&hellip;</a>"}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577786440, "post_id": 59540843, "comment_id": 105254017, "body": "Again, only partial part doesn&#39;t work. <a href=\"https://www.typescriptlang.org/play/index.html#code/MYGwhgzhAECiAeYC2AHEBTaBvaAoa0YIKAFmABQoBOA9ihAFzbTAnrADWTARjTRmAB20AL4BKZvgLQA9DOiC+KKSNxTu6AC4VqdRtAAKYKsi3oqEADyaSASwgBtAORFSYJwF0AfA4AMHsRwVNQIAVwh0ACEtHVp6JhxWdi5oXn50IVEJIOkWGkEITWYkzlFoAF5oXXopAiotUKphG3sAOg1tckS2UvFgkSA\" rel=\"nofollow noreferrer\">Playground</a>"}, {"owner": {"reputation": 3823, "user_id": 358308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c2af4f7f119918924bf867b5941c99?s=128&d=identicon&r=PG", "display_name": "petraszd", "link": "https://stackoverflow.com/users/358308/petraszd"}, "reply_to_user": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 1, "creation_date": 1577788085, "post_id": 59540843, "comment_id": 105254607, "body": "You are right again. I am giving up. It seems that it is a bug in compiler."}], "tags": [], "owner": {"reputation": 3823, "user_id": 358308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c2af4f7f119918924bf867b5941c99?s=128&d=identicon&r=PG", "display_name": "petraszd", "link": "https://stackoverflow.com/users/358308/petraszd"}, "is_accepted": false, "score": 1, "last_activity_date": 1577786228, "last_edit_date": 1577786228, "creation_date": 1577776507, "answer_id": 59540843, "question_id": 59540336, "link": "https://stackoverflow.com/questions/59540336/use-of-parametersthismethod-fails/59540843#59540843", "title": "use of Parameters&lt;this[&#39;method&#39;]&gt; fails", "body": "<p>I would just extract <code>{check: boolean}</code> to some interface and pass it along. Anyway that was not a question. The question is why it does not work with <code>this</code>.</p>\n\n<p>Compiler can not guarantee that <code>this</code> is going to be <code>Example</code> instance. Compiler only can guarantee that <code>this</code> is going to be of pseudo-generic <code>&lt;T extends Example&gt;</code> type.</p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#polymorphic-this-types\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/advanced-types.html#polymorphic-this-types</a>\n<a href=\"https://en.wikipedia.org/wiki/Bounded_quantification#F-bounded_quantification\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Bounded_quantification#F-bounded_quantification</a></p>\n\n<hr>\n\n<p>(<em>Updated: initial answer was totally wrong.</em>)</p>\n"}], "owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577786228, "creation_date": 1577773114, "question_id": 59540336, "link": "https://stackoverflow.com/questions/59540336/use-of-parametersthismethod-fails", "title": "use of Parameters&lt;this[&#39;method&#39;]&gt; fails", "body": "<pre><code>class Example { \n  alpha(props: { check: boolean }) { \n    // noop\n  }\n\n  beta(props:\n    Partial&lt;Parameters&lt;this['alpha']&gt;[0]&gt; // this fails\n    // Partial&lt;Parameters&lt;Example['alpha']&gt;[0]&gt; // this works\n    // Partial&lt;{ check: boolean }&gt; // this works\n  ) { \n    // noop\n  }\n\n  useBeta(props:\n    { check?: boolean | undefined }\n  ) { \n    const { check } = props\n    return this.beta({ check })\n  }\n\n}\n</code></pre>\n\n<p>I've been using <code>this</code> to reference methods input parameters, but I found a case where it's not working, and I wanted to document it / get some thoughts behind why this case doesn't work.</p>\n"}, {"tags": ["javascript", "typescript", "data-binding"], "answers": [{"tags": [], "owner": {"reputation": 10297, "user_id": 3218, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ef02f5184f7fae31e50c68dbb55117a3?s=128&d=identicon&r=PG", "display_name": "Skrud", "link": "https://stackoverflow.com/users/3218/skrud"}, "is_accepted": true, "score": 3, "last_activity_date": 1578013400, "creation_date": 1578013400, "answer_id": 59571986, "question_id": 59540081, "link": "https://stackoverflow.com/questions/59540081/is-there-a-way-to-force-a-javascript-element-to-redefine-itself-based-on-how-it/59571986#59571986", "title": "Is there a way to force a javascript element to redefine itself based on how it was originally defined?", "body": "<p>What you're describing is not really \"data-binding\" but <a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\">pass-by-reference</a>. In your example you expect an update to <code>name</code> to be reflected in <code>$this['name']</code>. That would only be possible if you were passing a <em>reference</em> (or a <em>pointer</em>) to the variable.</p>\n\n<p>However, in this case the variable is a <code>string</code>, and strings in JavaScript are <a href=\"https://www.sitepoint.com/immutability-javascript/\" rel=\"nofollow noreferrer\">immutable</a>:</p>\n\n<blockquote>\n  <p>no string methods change the string they operate on, they all return new strings. The reason is that strings are immutable \u2013 they cannot change, we can only ever make new strings.</p>\n</blockquote>\n\n<p>So, going step-by-step through your example:</p>\n\n<p>This creates a new string named 'Ezra', and assigns a variable called <code>name</code> to reference that string.</p>\n\n<pre><code>let name = 'Ezra';\n</code></pre>\n\n<p>This creates (or sets) a property in <code>$this</code> called <code>'name'</code> that references the string in <code>name</code> (which is <code>'Ezra'</code>).</p>\n\n<pre><code>$this['name'] = name;\n</code></pre>\n\n<p>This creates a new string called <code>'Bob'</code> and stores it in the variable called <code>name</code>. The variable already exists. This does not <em>mutate</em> the value that was previously held in there. Instead, <code>name</code> is being updated to point to a new reference.</p>\n\n<pre><code>// then :\nname = 'Bob';\n</code></pre>\n\n<p>However, if you were to pass an <em>object</em>, you'll notice that you can actually mutate it. This is because objects are passed-by-reference and you can <em>mutate the value at that reference</em>.</p>\n\n<p>For example:</p>\n\n<pre><code>// Create a new value that stores an object, with a property 'firstName'\nlet name = { firstName: 'Ezra' };\n\n// Assign myObject to $this['name']. Now $this['name'] and name both point to the same reference.\n$this['name'] = name;\n\n// Change the value in the object pointed-to by name\nname.firstName = 'Bob'\n\nconsole.log($this['name'].firstName); // &lt;- This will output 'Bob'\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 11536395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e6219ff0428a6ff7b8d32563a5ab24?s=128&d=identicon&r=PG&f=1", "display_name": "ezra", "link": "https://stackoverflow.com/users/11536395/ezra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 59571986, "answer_count": 1, "score": 5, "last_activity_date": 1578015725, "creation_date": 1577771130, "question_id": 59540081, "link": "https://stackoverflow.com/questions/59540081/is-there-a-way-to-force-a-javascript-element-to-redefine-itself-based-on-how-it", "title": "Is there a way to force a javascript element to redefine itself based on how it was originally defined?", "body": "<p>I was playing around with objects and constructors and stuff like that, and I was wondering if there was a way to bind a value to a variable based on how it was originally defined. I have the following code: </p>\n\n<p><strong>typescript</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>let cr = \"create\",\n  ap = \"apply\",\n  $this = {\n    set: (prop, value) =&gt; {\n      this[prop] = value;\n    }\n  };\nfunction creator() {\n  this.$ = (array: Object[]) =&gt; {\n    array.forEach((kp: Object) =&gt; {\n      let key = Object.keys(kp)[0];\n      let val = kp[Object.keys(kp)];\n      $this[key] = val;\n      creator.create(key, { value: val });\n    });\n  };\n  this.apply = (...objects: Object[]) =&gt; {\n    objects.forEach((obj: Object) =&gt; {\n      creator.call(obj);\n    });\n  };\n}\nfunction create(obj) {\n  function createValues(arr) {\n    let instance: Object = new obj();\n    let vals: any[] = [];\n    arr.forEach(name =&gt; {\n      vals.push(instance[name]);\n    });\n    return vals;\n  }\n  let names: string[] = Object.getOwnPropertyNames(new obj());\n  let values: string[] = createValues(names);\n  return combineArrays(names, values);\n}\nfunction combineArrays(arr1, arr2): { $?: any } { // the question mark removes an IDE error\n  let newObj: Object = {};\n  arr1.forEach(prop =&gt; {\n    newObj[prop] = arr2[arr1.indexOf(prop)];\n  });\n  return newObj;\n}\nObject.prototype.create = function(prop, options) {\n  return Object.defineProperty(this, prop, options);\n};\ncreate(creator).$([\n  { hi: \"hi\" }, \n  { bye: $this[\"hi\"] } // this is the important stuff\n]);\n</code></pre>\n\n<p>I was wondering if there is a way, inside the <code>set</code> function of the <code>$this</code> variable, to detect how it is <em>being</em> set and therefore determine if that value has changed and so it's value should to, if that makes any sense? Let's say you had this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>let $this = {\n  set: function(prop, value) {\n    this[prop] = value;\n  } \n}\nlet name = 'Ezra';\n$this['name'] = name;\n// then :\nname = 'Bob';\n// change $this.name too, so then:\nconsole.log($this.name);\n// &gt;&gt; 'Bob'\n</code></pre>\n\n<p>I believe this is called Data-Binding but I am unsure how to do it without creating endless numbers of proxies.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 1, "creation_date": 1577775650, "post_id": 59539744, "comment_id": 105250634, "body": "No way currently. Related <a href=\"https://github.com/microsoft/TypeScript/issues/6579#issuecomment-552653987\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/&hellip;</a>"}], "owner": {"reputation": 8300, "user_id": 986387, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5160c33ee0e63e8319b901da88c01a56?s=128&d=identicon&r=PG&f=1", "display_name": "invariant", "link": "https://stackoverflow.com/users/986387/invariant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577768014, "creation_date": 1577768014, "question_id": 59539744, "link": "https://stackoverflow.com/questions/59539744/how-to-get-type-safety-for-html-data-attributes", "title": "how to get type safety for html data-* attributes", "body": "<p>How to get typesafety for html data-* attributes </p>\n\n<pre><code>    interface DivProps {\n        id?:string \n        class?:string\n        // allow data-*  ? \n    }\n\n    function div(props:DivProps) {\n\n    }\nconst d = div({\"data-id\":\"1\"})\n</code></pre>\n"}, {"tags": ["typescript", "oop"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1577766377, "post_id": 59539455, "comment_id": 105248757, "body": "It&#39;s strange indeed - almost as if it is calling some implicit copy constructor."}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577775166, "post_id": 59539455, "comment_id": 105250526, "body": "I guess this allows to implement copy constructor in derived class, then use clone method to create clone/copy"}], "owner": {"reputation": 366, "user_id": 1402321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pDLai.jpg?s=128&g=1", "display_name": "microspace", "link": "https://stackoverflow.com/users/1402321/microspace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1577765267, "creation_date": 1577765267, "question_id": 59539455, "link": "https://stackoverflow.com/questions/59539455/typescript-base-class-inheritance", "title": "Typescript - base class inheritance", "body": "<p>I'm trying to understand this legacy code. I understand what is interface, class, but I don't understand why to return <code>new (this.constructor as any)(this)</code> from <code>clone</code> function? Do you have any ideas?</p>\n\n<pre><code>interface IClonable&lt;T&gt; {\n  clone(): T\n}\n\nexport interface IBaseComponent&lt;T&gt; extends IClonable&lt;T&gt; { }\n\nexport interface IBaseComponentParams { }\n\nexport class BaseComponent&lt;T&gt; implements IBaseComponent&lt;T&gt; {\n  constructor(_: IBaseComponentParams) { }\n\n  clone(): T {\n    return new (this.constructor as any)(this)\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "angular8"], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 10740495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MisNk.jpg?s=128&g=1", "display_name": "lijo Vijayan", "link": "https://stackoverflow.com/users/10740495/lijo-vijayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1577789364, "creation_date": 1577789364, "answer_id": 59543070, "question_id": 59539384, "link": "https://stackoverflow.com/questions/59539384/how-to-get-color-on-dropdown-of-select-on-angular-8/59543070#59543070", "title": "How to get color on dropdown of select on Angular 8?", "body": "<p>I am not sure if is what you are looking for, I think your code must be, </p>\n\n<p>Something like this.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>    &lt;select [(ngModel)]=\"selected\" [compareWith]=\"compareObjects\"\n         [ngStyle]=\"{'background-color': selected.color}\"&gt;\n         &lt;option *ngFor=\"let color of colors\" \n               [ngStyle]=\"{'background': color.value}\" [ngValue]=\"color\"&gt; \n               {{color.name}}\n         &lt;/option&gt;\n    &lt;/select&gt;\n</code></pre>\n\n<p><strong>*your variable name is differ from the .ts file, thats why your code won't worked.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10270937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095ce694427f017a6c3641f7b7fdcb40?s=128&d=identicon&r=PG&f=1", "display_name": "lokesh_bsr", "link": "https://stackoverflow.com/users/10270937/lokesh-bsr"}, "is_accepted": false, "score": 0, "last_activity_date": 1577790978, "last_edit_date": 1577790978, "creation_date": 1577790551, "answer_id": 59543293, "question_id": 59539384, "link": "https://stackoverflow.com/questions/59539384/how-to-get-color-on-dropdown-of-select-on-angular-8/59543293#59543293", "title": "How to get color on dropdown of select on Angular 8?", "body": "<p>**you are iterating the wrong list **</p>\n\n<ol>\n<li>In your typescript the list name is colors </li>\n<li>but you are trying to iterate the list data which is not there in your type script.</li>\n<li>So,change the data list to colors list in option tag and also change the ngModel name in HTML page.</li>\n<li>and then it will work as you expected.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 82, "user_id": 8407269, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SJZ7U1KY4lQ/AAAAAAAAAAI/AAAAAAAAAWs/F_Dxw5RALDw/photo.jpg?sz=128", "display_name": "Sharaaf Nazeer", "link": "https://stackoverflow.com/users/8407269/sharaaf-nazeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1577790835, "creation_date": 1577790835, "answer_id": 59543329, "question_id": 59539384, "link": "https://stackoverflow.com/questions/59539384/how-to-get-color-on-dropdown-of-select-on-angular-8/59543329#59543329", "title": "How to get color on dropdown of select on Angular 8?", "body": "<p>Your html part should be something like this</p>\n\n<pre><code>&lt;select [(ngModel)]=\"selectedColor\" [compareWith]=\"compareObjects\"\n         [ngStyle]=\"{'background-color': selected.color}\"&gt;\n         &lt;option *ngFor=\"let color of colors\" \n               [ngStyle]=\"{'background': color.value}\" [ngValue]=\"color\"&gt; \n               {{color.name}}\n         &lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 10586138, "user_type": "registered", "profile_image": "https://graph.facebook.com/2211490012258504/picture?type=large", "display_name": "Iliyas Shaik", "link": "https://stackoverflow.com/users/10586138/iliyas-shaik"}, "is_accepted": false, "score": 0, "last_activity_date": 1577801946, "creation_date": 1577801946, "answer_id": 59545238, "question_id": 59539384, "link": "https://stackoverflow.com/questions/59539384/how-to-get-color-on-dropdown-of-select-on-angular-8/59545238#59545238", "title": "How to get color on dropdown of select on Angular 8?", "body": "<p>Im not Sure but please check with adding [ngClass] for binding the color either on the selected option or the dropdown where you need. Hope this will work...</p>\n\n<pre><code> &lt;select [(ngModel)]=\"selected\" [compareWith]=\"compareObjects\"\n             [ngClass]=\"{'background-color': selected.color}\"&gt;\n             &lt;option *ngFor=\"let color of colors\" \n                   [ngClass]=\"{'background': color.value}\" [ngValue]=\"color\"&gt; \n                   {{color.name}}\n             &lt;/option&gt;\n    &lt;/select&gt;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11297174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4627f95167fad8b05f1dfc6d48dac75?s=128&d=identicon&r=PG&f=1", "display_name": "Birat", "link": "https://stackoverflow.com/users/11297174/birat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2808, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1602867408, "creation_date": 1577764578, "last_edit_date": 1578063396, "question_id": 59539384, "link": "https://stackoverflow.com/questions/59539384/how-to-get-color-on-dropdown-of-select-on-angular-8", "title": "How to get color on dropdown of select on Angular 8?", "body": "<p>I have tried to get color on dropdown of select according to the value that user has selected.\nThe code I have tried is:</p>\n\n<p>App.component.ts</p>\n\n<pre><code>\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n  selectedColor = '';\n\n  colors = [\n    {\n      name: 'yellow',\n      value: '#ffff00'\n    },\n    {\n      name: 'red',\n      value: '#ff3300'\n    },\n    {\n      name: 'blue',\n      value: '#0000ff'\n    }\n  ];\n\n  onChange(value){\n    this.selectedColor = value;\n  }\n}\n</code></pre>\n\n<p>App.component.html</p>\n\n<pre><code>&lt;select [(ngModel)]=\"selected\" [compareWith]=\"compareObjects\" [ngStyle]=\"{'background-color': selected.color}\"&gt;\n  &lt;option *ngFor=\"let color of colors\" [ngStyle]=\"{'background-color': color.value}\" [ngValue]=\"datas\"&gt;{{color.name}}&lt;/option&gt;\n &lt;/select&gt;\n</code></pre>\n\n<p>But It is getting my requirement only on Windows but not on mac. Any idea what to do?</p>\n"}, {"tags": ["typescript", "nestjs", "typeorm"], "comments": [{"owner": {"reputation": 17343, "user_id": 9576186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2beeea1d726e9c3fab3a91953895039b?s=128&d=identicon&r=PG", "display_name": "Jay McDoniel", "link": "https://stackoverflow.com/users/9576186/jay-mcdoniel"}, "edited": false, "score": 0, "creation_date": 1577764859, "post_id": 59539298, "comment_id": 105248529, "body": "I believe this is because <code>subscribe</code> has a different lexical <code>this</code> than the class itself. What happens if you just <code>console.log(this)</code> in the <code>processData</code> method?"}, {"owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "reply_to_user": {"reputation": 17343, "user_id": 9576186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2beeea1d726e9c3fab3a91953895039b?s=128&d=identicon&r=PG", "display_name": "Jay McDoniel", "link": "https://stackoverflow.com/users/9576186/jay-mcdoniel"}, "edited": false, "score": 0, "creation_date": 1577770017, "post_id": 59539298, "comment_id": 105249416, "body": "It outputs <code>SafeSubscriber { ... </code>, here&#39;s the whole thing: <a href=\"https://pastebin.com/s1zPFBfh\" rel=\"nofollow noreferrer\">pastebin.com/s1zPFBfh</a>"}, {"owner": {"reputation": 17343, "user_id": 9576186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2beeea1d726e9c3fab3a91953895039b?s=128&d=identicon&r=PG", "display_name": "Jay McDoniel", "link": "https://stackoverflow.com/users/9576186/jay-mcdoniel"}, "edited": false, "score": 0, "creation_date": 1577770940, "post_id": 59539298, "comment_id": 105249595, "body": "Just as I thought, the subscribe has a different lexical <code>this</code> than the class."}, {"owner": {"reputation": 1106, "user_id": 3762105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e266cb2ac48eef2fa2dfc2a0473cd9e?s=128&d=identicon&r=PG", "display_name": "troy", "link": "https://stackoverflow.com/users/3762105/troy"}, "edited": false, "score": 0, "creation_date": 1577773829, "post_id": 59539298, "comment_id": 105250175, "body": "One question, shouldn&#39;t <code>processData</code> be an <code>async</code> function?"}, {"owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "edited": false, "score": 0, "creation_date": 1577774237, "post_id": 59539298, "comment_id": 105250300, "body": "I&#39;m actually not sure about this either."}], "answers": [{"comments": [{"owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "edited": false, "score": 0, "creation_date": 1577771866, "post_id": 59540067, "comment_id": 105249758, "body": "This worked! I used the <code>map()</code> way because <code>mergeMap</code> seem to be expecting a return"}, {"owner": {"reputation": 17343, "user_id": 9576186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2beeea1d726e9c3fab3a91953895039b?s=128&d=identicon&r=PG", "display_name": "Jay McDoniel", "link": "https://stackoverflow.com/users/9576186/jay-mcdoniel"}, "reply_to_user": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "edited": false, "score": 0, "creation_date": 1577773390, "post_id": 59540067, "comment_id": 105250080, "body": "Perfect, I&#39;ll update the answer. Wasn&#39;t sure what your exact use case would be"}], "tags": [], "owner": {"reputation": 17343, "user_id": 9576186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2beeea1d726e9c3fab3a91953895039b?s=128&d=identicon&r=PG", "display_name": "Jay McDoniel", "link": "https://stackoverflow.com/users/9576186/jay-mcdoniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1577773405, "last_edit_date": 1577773405, "creation_date": 1577771068, "answer_id": 59540067, "question_id": 59539298, "link": "https://stackoverflow.com/questions/59539298/nestjs-typeorm-injected-repository-becomes-undefined/59540067#59540067", "title": "NestJs + TypeORM injected repository becomes undefined", "body": "<p>As the lexical binding of <code>this</code> is different in the class versus in the subscribe method, you'll need to find some other way to manage the function. If possible, I would suggest using one more <code>map</code> or a <code>mergeMap</code> and running your <code>this.processData</code> in it, then subscribing afterwards to let the events transpire as they will, essentially creating the callchain as</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>init() {\n  const requisitionData = this.loginMb().pipe(\n    map(response =&gt; response.data.token),\n    switchMap(loginData =&gt; this.getRequisitions(loginData)),\n    map(response =&gt; response.data),\n    map(this.processData), // or mergeMap(data =&gt; this.processData(data)), your choice\n  );\n  requisitionData.subscribe();\n}\n\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 1014038, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4e966664dfb9b699bd1c507959ee73b0?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/1014038/edwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 59540067, "answer_count": 1, "score": 0, "last_activity_date": 1577773405, "creation_date": 1577763619, "question_id": 59539298, "link": "https://stackoverflow.com/questions/59539298/nestjs-typeorm-injected-repository-becomes-undefined", "title": "NestJs + TypeORM injected repository becomes undefined", "body": "<p>I have a code that gets <code>Requisition</code> data from an external system like so:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>init() {\n  const requisitionData = this.loginMb().pipe(\n    map(response =&gt; response.data.token),\n    switchMap(loginData =&gt; this.getRequisitions(loginData)),\n    map(response =&gt; response.data),\n  );\n  requisitionData.subscribe(this.processData);\n}\n</code></pre>\n\n<p>Here is <code>processData()</code></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>processData(response: any) {\n  const requisitions = response.content.data;\n  for (const p of requisitions) {\n    const req = new Requisition(); // Requisition is the TypeORM entity\n    req.title = p.title;\n    req.reference = p.reference;\n    // other fields \n\n    this.repo.save(requisition);\n  }\n</code></pre>\n\n<p>Here's the constructor</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Injectable()\nexport class RequisitionSync {\n  constructor(\n    @InjectRepository(Requisition) private readonly repo: Repository&lt;Requisition&gt;,\n    private readonly httpService: HttpService,\n  ) {}\n</code></pre>\n\n<p>The problem is inside <code>processData()</code>, <code>this.repo</code> becomes <code>undefined</code>. If I do <code>console.log(this.repo)</code>  inside <code>init()</code>, it will not be <code>undefined</code>.</p>\n"}, {"tags": ["javascript", "arrays", "angular", "typescript"], "comments": [{"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577761563, "post_id": 59539043, "comment_id": 105248081, "body": "What is the string that u want to convert to array?"}, {"owner": {"reputation": 119, "user_id": 12196984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8abc1e9e0057b10a100686fc1a93110?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyuio", "link": "https://stackoverflow.com/users/12196984/qwertyuio"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577762557, "post_id": 59539043, "comment_id": 105248229, "body": "@Plochie I attached it"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577762955, "post_id": 59539043, "comment_id": 105248291, "body": "Cant u just parse that string using JSON.parse?"}, {"owner": {"reputation": 119, "user_id": 12196984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8abc1e9e0057b10a100686fc1a93110?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyuio", "link": "https://stackoverflow.com/users/12196984/qwertyuio"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577764566, "post_id": 59539043, "comment_id": 105248498, "body": "Ok how can I do It. Can You help me. @Plochie"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577764906, "post_id": 59539043, "comment_id": 105248537, "body": "Do you want to convert <code>property</code> string from <code>fields</code> array to array?"}, {"owner": {"reputation": 119, "user_id": 12196984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8abc1e9e0057b10a100686fc1a93110?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyuio", "link": "https://stackoverflow.com/users/12196984/qwertyuio"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577765205, "post_id": 59539043, "comment_id": 105248581, "body": "Yes, convert property string from fields"}, {"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577765464, "post_id": 59539043, "comment_id": 105248624, "body": "<code>Object.keys()</code> and then <code>map</code> all keys and push key and values to new array using <code>myArray.push()</code>"}, {"owner": {"reputation": 119, "user_id": 12196984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8abc1e9e0057b10a100686fc1a93110?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyuio", "link": "https://stackoverflow.com/users/12196984/qwertyuio"}, "edited": false, "score": 0, "creation_date": 1577765867, "post_id": 59539043, "comment_id": 105248674, "body": "Tried not working@GaurangDhorda"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1577775902, "post_id": 59539043, "comment_id": 105250720, "body": "Please create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Also, do not paste images of code - include them as text instead."}, {"owner": {"reputation": 119, "user_id": 12196984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8abc1e9e0057b10a100686fc1a93110?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyuio", "link": "https://stackoverflow.com/users/12196984/qwertyuio"}, "edited": false, "score": 0, "creation_date": 1577777579, "post_id": 59539043, "comment_id": 105251195, "body": "How to convert this thing to object, after taht valueswill be convert array and looping property: &quot;{&quot;type&quot;:&quot;select&quot;,&quot;label&quot;:&quot;Select&quot;,&quot;className&quot;:&quot;form-control&zwnj;&#8203;&quot;,&quot;name&quot;:&quot;select-157&zwnj;&#8203;7701474652&quot;,&quot;values&quot;&zwnj;&#8203;:[{&quot;label&quot;:&quot;&quot;,&quot;value&zwnj;&#8203;&quot;:&quot;&quot;,&quot;selected&quot;:true&zwnj;&#8203;},{&quot;label&quot;:&quot;&quot;,&quot;value&zwnj;&#8203;&quot;:&quot;&quot;}]}&quot;"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 1, "creation_date": 1577782098, "post_id": 59539043, "comment_id": 105252568, "body": "Please edit the question to include these changes instead of posting them as comments. Also, how should this &#39;object&#39; look like? Have a look around and read through the <a href=\"https://stackoverflow.com/help\">help center</a>. In particular <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12200222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--9XGA0CJLIE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5hlUdut62N7kvhhODCCSdLHEVFA/photo.jpg?sz=128", "display_name": "Clear Pan", "link": "https://stackoverflow.com/users/12200222/clear-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1577785405, "creation_date": 1577785405, "answer_id": 59542305, "question_id": 59539043, "link": "https://stackoverflow.com/questions/59539043/how-to-convert-these-objects-to-array-in-typescript/59542305#59542305", "title": "How to convert these objects to array in typescript", "body": "<p>Because your <code>return</code> statement was written in the wrong place.\nCheck your <code>{</code> <code>}</code> <code>(</code> <code>)</code></p>\n"}, {"tags": [], "owner": {"reputation": 4655, "user_id": 3001856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4dc6ee03387f59dedf4531be1eff7cab?s=128&d=identicon&r=PG&f=1", "display_name": "Akxe", "link": "https://stackoverflow.com/users/3001856/akxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1577786578, "last_edit_date": 1577786578, "creation_date": 1577786229, "answer_id": 59542482, "question_id": 59539043, "link": "https://stackoverflow.com/questions/59539043/how-to-convert-these-objects-to-array-in-typescript/59542482#59542482", "title": "How to convert these objects to array in typescript", "body": "<p>If you would use <code>validateEmptyOption(): boolean</code> you would get the hint, that your function does not return any value. The problem is your return statement if inside other functions thus not beeing return by the main one.</p>\n\n<p>There is almost <strong>never</strong> a need to use <strong><em>any</em></strong> as a type with typescript. (Until you do very complicated things...)</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>function validateEmptyOption(): boolean {\n    console.log(\"CHECKED\")\n\n    return this.currentForm.sections.every((section: Section) =&gt; {\n        return section.fields.every((field: Field) =&gt; {\n            debugger\n            if (field.type !== 'select') {\n                return false;\n            }\n\n            console.log(field)\n\n            try {\n                const emptyOptionSections = JSON.parse(field.property).emptyOptionSections;\n                if ((emptyOptionSections !== undefined) &amp;&amp; (emptyOptionSections == null)) {\n                    alert('QAZWSX');\n                    return false;\n                }\n            } catch (e) {\n                return false;\n            }\n\n            return true\n        });\n    });\n}\n</code></pre>\n\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every\" rel=\"nofollow noreferrer\"><code>every</code> method</a> is used to check if for every value inner function returns true.</p>\n"}], "owner": {"reputation": 119, "user_id": 12196984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8abc1e9e0057b10a100686fc1a93110?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyuio", "link": "https://stackoverflow.com/users/12196984/qwertyuio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59542482, "answer_count": 2, "score": 0, "last_activity_date": 1577786578, "creation_date": 1577760642, "last_edit_date": 1577785839, "question_id": 59539043, "link": "https://stackoverflow.com/questions/59539043/how-to-convert-these-objects-to-array-in-typescript", "title": "How to convert these objects to array in typescript", "body": "<p>How can I convert a string to a Typescript array?. Please help me.</p>\n\n<p>Look at the code:</p>\n\n<pre><code>private validateEmptyOption(): any {\n    console.log(\"CHECKED\")\n    let isValid = true;\n    this.currentForm.sections.forEach((section: Section) =&gt; {\n        section.fields.forEach((field: Field) =&gt; {\n            debugger\n            if (field.type === 'select') {\n                console.log(field)\n\n                const emptyOptionSections = JSON.parse(field.property).emptyOptionSections;\n\n                if ((emptyOptionSections !== undefined) &amp;&amp; (emptyOptionSections == null)) {\n                    alert('QAZWSX');\n                    isValid = false;\n                }\n             }\n        return isValid;\n        });\n    });\n}\n</code></pre>\n\n<p>This is my Result in console. I want do this convert to array and looping it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/b91ji.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b91ji.png\" alt=\"Check This\"></a></p>\n\n<p>Expected Result : There should be a validation message to inform that select controller cannot be empty</p>\n\n<p>Actual Result : Form can save without any validation</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577759521, "post_id": 59538914, "comment_id": 105247789, "body": "A <code>String</code> is an object, while a <code>string</code> is a primitive data type.  hey are often usable interchangeably, but not always.  Stick with the primitive and avoid <code>String</code> unless you need it.  You can also use <code>String()</code> instead of <code>new String()</code> to get a primitive.  See <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#Distinction_between_string_primitives_and_String_objects\" rel=\"nofollow noreferrer\">here</a> for more information."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577759594, "post_id": 59538914, "comment_id": 105247801, "body": "JavaScript doesn&#39;t have &quot;characters&quot; either, only strings.  So <code>&quot;foo&quot;.charAt(0)</code> returns the <i>string</i> <code>&quot;f&quot;</code>.  There&#39;s not much point to using an array of &quot;characters&quot; for a string:   an array of strings representing a single string is extra hassle for no benefit.  Stick with <code>string</code>."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 9278490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4304aaf6edc53bf2e142dfd1882390ba?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Artic", "link": "https://stackoverflow.com/users/9278490/bryan-artic"}, "is_accepted": false, "score": 0, "last_activity_date": 1577759436, "creation_date": 1577759436, "answer_id": 59538931, "question_id": 59538914, "link": "https://stackoverflow.com/questions/59538914/typescript-javascript-using-new-string-and-s-to-declare-variable/59538931#59538931", "title": "Typescript/Javascript - Using new String() and s = &#39;&#39; to declare variable", "body": "<p>For me, I usually do <code>let operators = '';</code> to declare and initialize the <code>string</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 9577, "user_id": 7668448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZykHD.jpg?s=128&g=1", "display_name": "Mohamed Allal", "link": "https://stackoverflow.com/users/7668448/mohamed-allal"}, "is_accepted": false, "score": 1, "last_activity_date": 1577761073, "last_edit_date": 1577761073, "creation_date": 1577760708, "answer_id": 59539053, "question_id": 59538914, "link": "https://stackoverflow.com/questions/59538914/typescript-javascript-using-new-string-and-s-to-declare-variable/59539053#59539053", "title": "Typescript/Javascript - Using new String() and s = &#39;&#39; to declare variable", "body": "<p>There is no array of chars in javascript and so in typescript (which is a super set over javascript).</p>\n\n<p><code>''</code> is a <code>String</code> object. And it's called a literal form.</p>\n\n<p><code>['a', 'b', 's']</code> is an array of String objects.</p>\n\n<p>So just use <code>''</code>;</p>\n\n<p>Now what is the difference between <code>''</code> and , <code>String</code>. The first is a <strong>primitive</strong> and the second is an <strong>object</strong>. But whatever whatever they are the same as for the first JavaScript automatically wrap it and construct a <code>String</code> object for it. And so we can use all the method of the string object! \nExcept for when it's used with <code>eval()</code>. The <strong>primitive</strong> is treated as <strong>a code source</strong>. And the <strong>String object</strong> is treated as a string.\nAnd a primitive will still differentiated from an object. But as functional they are the same.</p>\n\n<p>Here a show of difference with console.log()</p>\n\n<p><a href=\"https://i.stack.imgur.com/1O77e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1O77e.png\" alt=\"enter image description here\"></a></p>\n\n<p>From a general programming side! They are the same! And the difference doesn't matter at all. In few cases! As like with eval or console.log. The default handling of the engine can be different. But again whatever whatever rarely you get on those cases. And now it's all clear. The doc show more and better read the quote bellow.</p>\n\n<p>Better look at the doc ref here a link:</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String</a></p>\n\n<h2>Quoting:</h2>\n\n<blockquote>\n  <p>Note that JavaScript distinguishes between String objects and\n  primitive string values. (The same is true of Boolean and Numbers.)</p>\n  \n  <p>String literals (denoted by double or single quotes) and strings\n  returned from String calls in a non-constructor context (that is,\n  called without using the new keyword) are primitive strings.\n  JavaScript automatically converts primitives to String objects, so\n  that it's possible to use String object methods for primitive strings.\n  In contexts where a method is to be invoked on a primitive string or a\n  property lookup occurs, JavaScript will automatically wrap the string\n  primitive and call the method or perform the property lookup.</p>\n</blockquote>\n\n<pre><code>let s_prim = 'foo'\nlet s_obj = new String(s_prim)\n\nconsole.log(typeof s_prim) // Logs \"string\"\nconsole.log(typeof s_obj)  // Logs \"object\"\n</code></pre>\n\n<blockquote>\n  <p>String primitives and String objects also give different results when\n  using eval(). Primitives passed to eval are treated as source code;\n  String objects are treated as all other objects are, by returning the\n  object. For example:</p>\n</blockquote>\n\n<pre><code>let s1 = '2 + 2'              // creates a string primitive\nlet s2 = new String('2 + 2')  // creates a String object\nconsole.log(eval(s1))         // returns the number 4\nconsole.log(eval(s2))         // returns the string \"2 + 2\"\n</code></pre>\n\n<blockquote>\n  <p>For these reasons, the code may break when it encounters String\n  objects when it expects a primitive string instead, although\n  generally, authors need not worry about the distinction.</p>\n  \n  <p>A String object can always be converted to its primitive counterpart\n  with the valueOf() method.</p>\n</blockquote>\n\n<pre><code>console.log(eval(s2.valueOf()))  // returns the number 4\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 11883991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1a511c1bda8454b4339c7a370e8e4b?s=128&d=identicon&r=PG&f=1", "display_name": "doe", "link": "https://stackoverflow.com/users/11883991/doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "closed_date": 1577925050, "answer_count": 2, "score": 0, "last_activity_date": 1577925081, "creation_date": 1577759247, "question_id": 59538914, "link": "https://stackoverflow.com/questions/59538914/typescript-javascript-using-new-string-and-s-to-declare-variable", "closed_reason": "Duplicate", "title": "Typescript/Javascript - Using new String() and s = &#39;&#39; to declare variable", "body": "<p>How should an array of chars or a string be declared? Not sure if there's a difference between array of chars and string either.</p>\n\n<pre><code>let operators = new String();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>let operators = '';\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "namespaces", "declare", ".d.ts"], "answers": [{"comments": [{"owner": {"reputation": 3533, "user_id": 3928045, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CLOlW.jpg?s=128&g=1", "display_name": "Donnie D&#39;Amato", "link": "https://stackoverflow.com/users/3928045/donnie-damato"}, "edited": false, "score": 0, "creation_date": 1577787442, "post_id": 59542111, "comment_id": 105254370, "body": "This didn&#39;t work, I included my current config (which itself also doesn&#39;t seem to do anything) and from what I&#39;ve read quickly <code>typeRoots</code> isn&#39;t often used and hidden in the docs for reasons I don&#39;t entirely understand. Everyone is then pointed to using <code>baseUrl</code> and <code>paths</code>."}, {"owner": {"reputation": 3533, "user_id": 3928045, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CLOlW.jpg?s=128&g=1", "display_name": "Donnie D&#39;Amato", "link": "https://stackoverflow.com/users/3928045/donnie-damato"}, "edited": false, "score": 0, "creation_date": 1577789532, "post_id": 59542111, "comment_id": 105255205, "body": "I think I know why it doesn&#39;t work. I believe <code>typeRoots</code> is for named modules in the project. This is just importing a relative path in the project. I&#39;m under the impression I should be using the <code>baseUrl</code> and <code>paths</code> keys, but something else must be wrong."}], "tags": [], "owner": {"reputation": 1, "user_id": 11343786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_9gzHdZCAzs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf1chhkPlQ8ICa1gK6W8WAhEcoisA/mo/photo.jpg?sz=128", "display_name": "Jeonghun", "link": "https://stackoverflow.com/users/11343786/jeonghun"}, "is_accepted": false, "score": 0, "last_activity_date": 1577784377, "creation_date": 1577784377, "answer_id": 59542111, "question_id": 59538778, "link": "https://stackoverflow.com/questions/59538778/describing-a-nested-object-for-typescript-d-ts-file/59542111#59542111", "title": "Describing a nested object for typescript .d.ts file", "body": "<p>It's need to declare typeRoots in tsconfig.json.</p>\n\n<p>Below is example</p>\n\n<pre><code>{\n  \"compilerOptions\" : {\n    \"typeRoots\" : [ \"./node_modules/@types\", \"./src/types\"]\n}\n</code></pre>\n"}], "owner": {"reputation": 3533, "user_id": 3928045, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CLOlW.jpg?s=128&g=1", "display_name": "Donnie D&#39;Amato", "link": "https://stackoverflow.com/users/3928045/donnie-damato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577791440, "creation_date": 1577758002, "last_edit_date": 1577791440, "question_id": 59538778, "link": "https://stackoverflow.com/questions/59538778/describing-a-nested-object-for-typescript-d-ts-file", "title": "Describing a nested object for typescript .d.ts file", "body": "<p>In my project, I'm importing an object. That object is created by a function so the IDE has no clue what keys are on it (they're dynamic based on the config provided). My thought is that I can generate a <code>.d.ts</code> file that describes the object so people looking to know what keys are on it, can find them with code completion in the IDE.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// dynamicObject.js\nexport default makeAnObject(config);\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>// useObject.js\nimport someObject from './dynamicObject.js';\n\nconst result = someObject.| (code editor dropdown of keys here)\n</code></pre>\n\n<p>On one other note, I'm interested in <strong>not</strong> having the <code>.d.ts</code> file in the same directory as these files. I assume the <code>tsconfig.json</code> can handle this, I just have no clue what the syntax for the <code>.d.ts</code> file would look like. Typescript is hugely foreign to me and the docs are not helpful.</p>\n\n<p>For my <code>dynamicObject.d.ts</code> file, I started with something like this</p>\n\n<pre><code>declare namespace someObject {\n   interface oneKey {\n      nestedKey: string\n   }\n}\n</code></pre>\n\n<p>But the code editor still has no clue what the object composition is. I'm not sure if it's the way I'm writing the <code>.d.ts</code> file or something I'm missing in the <code>tsconfig.json</code>?</p>\n\n<p><strong>EDIT</strong>: Going to include my <code>tsconfig.json</code> as the first answer didn't work. Looking to have the most basic config, but I can imagine it might be missing more:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\n{\n    \"compileOnSave\": true,\n    \"compilerOptions\" : {\n       \"baseUrl\": \"./\",\n       \"paths\": {\n           \"*\" : [\"myCustomTypings/**.d.ts\"]\n       }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT2</strong> I've temporarily moved the <code>.d.ts</code> file in the same directory as the <code>dynamicObject.js</code> (named <code>dynamicObject.d.ts</code>) and now the IDE can tell it's <code>typeof someObject</code> but can't tell the object's structure. How do I describe the object in <code>dynamicObject.d.ts</code>? </p>\n"}, {"tags": ["typescript", "redux", "reselect"], "answers": [{"tags": [], "owner": {"reputation": 19390, "user_id": 10431574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8c9af9308ff187388114cc9d054149?s=128&d=identicon&r=PG", "display_name": "Linda Paiste", "link": "https://stackoverflow.com/users/10431574/linda-paiste"}, "is_accepted": false, "score": 0, "last_activity_date": 1614400034, "creation_date": 1614400034, "answer_id": 66395588, "question_id": 59538700, "link": "https://stackoverflow.com/questions/59538700/inferring-return-type-from-createselector-factory/66395588#66395588", "title": "Inferring return type from createSelector factory", "body": "<p>You <em>do</em> know what <code>createSelector</code> returns, because ultimately it's just a selector that selects the <code>customerId</code> and <code>profile</code>.  The selectors created by reselect have to extra properties like <code>recomputations</code> and <code>resetRecomputations</code>, but these don't matter for the purposes of react-redux.  We just want to know what arguments the selector takes and what it returns.</p>\n<p>This is what you are selecting:</p>\n<pre><code>type Selected = UploadProfileState &amp; Pick&lt;CustomerState, 'customerId'&gt;\n</code></pre>\n<p>So you can use that instead of <code>ReturnType&lt;ReturnType&lt;typeof uploadProfileSelectorFactory&gt;&gt;</code></p>\n<p>The return type of <code>uploadProfileSelectorFactory</code> would be:</p>\n<pre><code>(state: AppState, props: UploadProfileOwnProps) =&gt; Selected;\n</code></pre>\n<p>But that is long-winded and we have those same two arguments in multiple places, so if you want to you could define a helper type:</p>\n<pre><code>type UploadProfileSelector&lt;Return&gt; = (state: AppState, props: UploadProfileOwnProps) =&gt; Return;\n</code></pre>\n<p>or more generalized:</p>\n<pre><code>type ComponentSelector&lt;Props, Return&gt; = (state: AppState, props: Props) =&gt; Return;\ntype UploadProfileSelector&lt;Return&gt; = ComponentSelector&lt;UploadProfileOwnProps, Return&gt;;\n</code></pre>\n<p>Which you can use as the return type:</p>\n<pre><code>const uploadProfileSelectorFactory = (): UploadProfileSelector&lt;Selected&gt; =&gt;\n</code></pre>\n"}], "owner": {"reputation": 8133, "user_id": 117651, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2710fd07576f9347150047891cc410a7?s=128&d=identicon&r=PG", "display_name": "Matt Sieker", "link": "https://stackoverflow.com/users/117651/matt-sieker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 746, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1614400034, "creation_date": 1577757001, "question_id": 59538700, "link": "https://stackoverflow.com/questions/59538700/inferring-return-type-from-createselector-factory", "title": "Inferring return type from createSelector factory", "body": "<p>I'm trying to integrate reselect into some redux connected components. According to the docs for reselect (<a href=\"https://github.com/reduxjs/reselect#sharing-selectors-with-props-across-multiple-component-instances\" rel=\"nofollow noreferrer\">https://github.com/reduxjs/reselect#sharing-selectors-with-props-across-multiple-component-instances</a>), when dealing with props passed in, to ensure the selector is properly memoized, you basically create a factory function for <code>createSelector</code>, so every component calling <code>connect()</code> gets its own selector with its own memoized state. This makes sense, and I have it working in TypeScript:</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>interface UploadProfileOwnProps {\n    someValue: string;\n}\n\nconst getUploadProfile = (state: AppState, props: UploadProfileOwnProps): UploadProfileState =&gt; state.uploadProfile;\nconst getCustomer = (state: AppState, props: UploadProfileOwnProps): CustomerState =&gt; state.customer;\n\nconst uploadProfileSelectorFactory = () =&gt; createSelector(getCustomer, getUploadProfile, \n    (customerState, profile)=&gt;({\n        customerId: customerState.customerId,\n        ...profile\n    }));\n\ntype uploadProfileSelectorProps = ReturnType&lt;ReturnType&lt;typeof uploadProfileSelectorFactory&gt;&gt;;\n\nconst connectUploadProfile = connect(()=&gt;{\n    const selector = uploadProfileSelectorFactory();\n    const mapStateToProps = (state: AppState, props: UploadProfileOwnProps): uploadProfileSelectorProps =&gt;{\n        return selector(state, props);\n    };\n    return mapStateToProps;\n}, UploadProfileActions);\n</code></pre>\n\n<p>The <code>OwnProps</code> is just a placeholder, the state doesn't depend on it at all in this case, but in others it might. The double <code>ReturnType&lt;ReturnType&lt;&gt;&gt;</code> construct bugs me a bit, but it gets the job done. Now, the actual question:</p>\n\n<p><code>uploadProfileSelectorFactory</code> lacks an explicit return type. I have eslint configured to yell at me in that case. How can I convince TypeScript to tell it that the factory function's return type is whatever <code>createSelector()</code> returns? It does properly infer the return type, so it's not causing any issues outside of eslint being cranky. I see a few options:</p>\n\n<ol>\n<li>Just tell eslint to ignore the return type requirement for that line. While easiest, I don't really like it.</li>\n<li>Explicitly define the type that comes out of the combiner function, then have the factory function return the type of <code>CreateSelector</code>, which in this case would be a rather messy <code>OutputParametricSelector&lt;S, P, T, (res1: R1, res2: R2) =&gt; T&gt;</code> that I would have to remember to change if I add another selector.</li>\n<li>Somehow convince TypeScript to give me the return type of <code>createSelector()</code> without actually calling it. This might be able to be done with explicitly defining the return type of the combiner function, although I haven't tried it. This would probably also get rid of the <code>ReturnType&lt;ReturnType&lt;&gt;&gt;</code> business, at the cost of having me keep the combiner function and its return type in sync.</li>\n<li>Throw <code>re-reselect</code> or similar into the mix, and hope it doesn't have that issue.</li>\n<li>Invoke some TypeScript black magic that solves the whole thing.</li>\n</ol>\n\n<p>I'm hoping for some combination of 5 and 3, although I'll take 4 if needed. Unfortunately every example I've found just uses type inference and never deals with this.</p>\n"}, {"tags": ["javascript", "typescript", "async-await"], "comments": [{"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 2, "creation_date": 1577754181, "post_id": 59538474, "comment_id": 105246976, "body": "Possible, sure (anything can be <i>eventually</i> modified into something else), but it sounds like you have restrictions. What parts of it are you permitted to change? Put <code>called 5</code> in a <code>.then</code> after the IIFE?"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1577754387, "post_id": 59538474, "comment_id": 105247003, "body": "the order of console.log&#39;s you want is impossible, unless you put the <code>console.log(5)</code> somewhere else - i.e. where it won&#39;t be executed until asynchronous code completes - what the above comment suggests is <code>(async () =&gt; { ... etc ...})().then(() =&gt; console.log(&#39;called 5&#39;));</code>"}], "answers": [{"tags": [], "owner": {"reputation": 854, "user_id": 1978210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f122d35000067535ffd1f41df595ddc?s=128&d=identicon&r=PG&f=1", "display_name": "JonoJames", "link": "https://stackoverflow.com/users/1978210/jonojames"}, "is_accepted": false, "score": 0, "last_activity_date": 1577755843, "last_edit_date": 1577755843, "creation_date": 1577755094, "answer_id": 59538549, "question_id": 59538474, "link": "https://stackoverflow.com/questions/59538474/i-need-to-run-an-async-function-from-a-non-async-function-in-order-sync-is-i/59538549#59538549", "title": "I need to run an async function from a non-async function in order (sync) - is it possible?", "body": "<p>I took out the typescript tags and ran directly in the browser\naltering the following lines </p>\n\n<pre><code>async function delay(ms: number): Promise&lt;void&gt; {\n</code></pre>\n\n<p>to direct JS</p>\n\n<pre><code>async function delay(ms) {\n</code></pre>\n\n<p>and it works as you would expect by awaiting in order ...</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>async function delay(ms) {\r\n    await new Promise(r =&gt; setTimeout(r, ms));\r\n    console.log('called 3');\r\n}\r\n\r\nconsole.log('called 1');\r\n\r\n(async () =&gt; {\r\n    console.log('called 2');\r\n    await delay(5000);\r\n   await console.log('called 4');\r\n   \r\nconsole.log('called 5');\r\n})();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>It is important to remember that async functions are asynchronously so there would be no other way of calling  <code>console.log('called 5');</code> in order without placing it in the async function or using a <strong>then</strong> statement... I prefer the easier way of just putting the call in the async function..</p>\n"}, {"tags": [], "owner": {"reputation": 22073, "user_id": 1262551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dfbdbd848157f859c7b80d3bf5d3675?s=128&d=identicon&r=PG", "display_name": "ZER0", "link": "https://stackoverflow.com/users/1262551/zer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1577755849, "creation_date": 1577755849, "answer_id": 59538603, "question_id": 59538474, "link": "https://stackoverflow.com/questions/59538474/i-need-to-run-an-async-function-from-a-non-async-function-in-order-sync-is-i/59538603#59538603", "title": "I need to run an async function from a non-async function in order (sync) - is it possible?", "body": "<p>It's not that is a \"bad idea\", is that you cannot use the syntax you want. But you can definitely execute <code>console.log('called 5')</code> after the <code>async</code> function; it's just you cannot use <code>await</code> (given that you're not in an <code>async</code> function):</p>\n\n<pre><code>async function delay(ms) {\n    await new Promise(r =&gt; setTimeout(r, ms));\n    console.log('called 3');\n}\n\nconsole.log('called 1');\n\n(async () =&gt; {\n    console.log('called 2');\n    await delay(2000);\n    console.log('called 4');\n})().then(\n ()=&gt; console.log('called 5')\n);\n</code></pre>\n\n<p>Don't forget that an async function returns an implicit Promise as result; so you can use <code>then</code> to obtain the result you want.</p>\n\n<p>This, or you wrap everything in an <code>async function</code> so you can use <code>await</code>; but I understand from your question this is somehow not an option.</p>\n"}], "owner": {"reputation": 379, "user_id": 327454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51f6e2b885c1e53f20fe7b5006d830e4?s=128&d=identicon&r=PG", "display_name": "rage8885", "link": "https://stackoverflow.com/users/327454/rage8885"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577755849, "creation_date": 1577754102, "question_id": 59538474, "link": "https://stackoverflow.com/questions/59538474/i-need-to-run-an-async-function-from-a-non-async-function-in-order-sync-is-i", "title": "I need to run an async function from a non-async function in order (sync) - is it possible?", "body": "<p>Yes, it's a bad idea, a terrible idea.</p>\n\n<p>I'm trying to make this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>async function delay(ms: number): Promise&lt;void&gt; {\n    await new Promise(r =&gt; setTimeout(r, ms));\n    console.log('called 3');\n}\n\nconsole.log('called 1');\n\n(async () =&gt; {\n    console.log('called 2');\n    await delay(5000);\n    console.log('called 4');\n})();\n\nconsole.log('called 5');\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=14&amp;ssc=25&amp;pln=1&amp;pc=1#code/IYZwngdgxgBAZgV2gFwJYHsIwCYFMA2wYAFALYgBcMECpARrgE4CUVACo+qaiLgDwA3dKmwA+GAG8AUDFkxgAd2Cpk1XApgcuPXMUYwAvON7IAKqlK50CZHoA0Mcs2YBuGXKiYQ6fLgB0+OgA5sQA5FDA+L7YMADMoa5SAL5SUp4Q3r4BwWERUbgxAIwJblLEoJCwxMyG4tJyMOmZ-oEh4ZHRMABMJe6yisqqeIQkAKwADJOJDU0+LTnt+TEALL1JzNWls1mtuR0FMKMlQA\" rel=\"nofollow noreferrer\">Playground Link</a></p>\n\n<p>Output this:</p>\n\n<pre><code>called 1\ncalled 2\ncalled 3\ncalled 4\ncalled 5\n</code></pre>\n\n<p>Instead of this:</p>\n\n<pre><code>called 1\ncalled 2\ncalled 5\ncalled 3\ncalled 4\n</code></pre>\n\n<p>Is this possible at all?</p>\n"}, {"tags": ["javascript", "typescript", "types", "interface"], "answers": [{"tags": [], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "is_accepted": true, "score": 1, "last_activity_date": 1577754766, "last_edit_date": 1577754766, "creation_date": 1577754377, "answer_id": 59538493, "question_id": 59538451, "link": "https://stackoverflow.com/questions/59538451/how-do-i-get-rid-of-type-errors-when-pulling-data-from-html-objets-in-typescript/59538493#59538493", "title": "How do I get rid of type errors when pulling data from html objets in Typescript?", "body": "<p>When you start using selectors, the return type isn't known by the TypeScript compiler, so you have to cast it at times. Here's an example of what you can do to calm down the TypeScript Compiler</p>\n\n<pre><code>const element = document.getElementById('something');\nconst elementValue = (element as HTMLInputElement).value;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>const element = document.getElementById('something') as HTMLInputElement;\nconst elementValue = element.value;\n</code></pre>\n\n<p>Explanation:</p>\n\n<p><code>document.getElementById</code> returns an <code>Element</code>. <code>Element.value</code> doesn't exist, so you get a TypeScript error.</p>\n\n<p>So, by telling TypeScript that the element returned from your <code>document.getElementById</code> is of the type <code>HTMLInputElement</code>, you can then access <code>.value</code> without issue.</p>\n\n<p>The same goes for <code>Event.target</code>, it returns an <code>EventTarget</code> so you have to cast it to the type of element you are wanting to work with</p>\n\n<p>Same thing with form:</p>\n\n<pre><code>const form = document.getElementById('myform') as HTMLFormElement;\nform.onsubmit = e =&gt; console.log(e);\n</code></pre>\n\n<p>I <strong>would not</strong> recommend creating wrapper interfaces to handle your problem like you did with the <code>IHTMLElement</code> interface. Just cast it. The next thing you'll run into is missing methods/properties and you'll eventually just end up with duplicate class of the one that already exists.</p>\n\n<p>Or, another <strong>would not</strong> recommend, disable the <code>any</code> rule in your <code>tslint.json</code></p>\n\n<p><a href=\"https://palantir.github.io/tslint/rules/no-any/\" rel=\"nofollow noreferrer\">https://palantir.github.io/tslint/rules/no-any/</a></p>\n\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Element</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Event/target\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Event/target</a></li>\n</ul>\n"}], "owner": {"reputation": 18, "user_id": 7034016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KAE4FvlhiEw/AAAAAAAAAAI/AAAAAAAAABU/yfmAJ--vJOA/photo.jpg?sz=128", "display_name": "Jorrin Bruns", "link": "https://stackoverflow.com/users/7034016/jorrin-bruns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59538493, "answer_count": 1, "score": 0, "last_activity_date": 1577754766, "creation_date": 1577753851, "question_id": 59538451, "link": "https://stackoverflow.com/questions/59538451/how-do-i-get-rid-of-type-errors-when-pulling-data-from-html-objets-in-typescript", "title": "How do I get rid of type errors when pulling data from html objets in Typescript?", "body": "<p>I wanted to get some practice using Typescript, so I chose a small vanilla JS project and set out to convert it to a Typescript project. I basically copied all the code over to a new project and instead named my JS files with the .ts extension. I made sure that I had Typescript installed and that my VS Code had the Typescript Compiler. As I expected this gave me a massive list of errors in my .ts files because I didn't have types anywhere in my code. I attacked each error one by one and was able to figure out the issue with some googling, but now I'm stuck on the last error, and my google searches don't seem to be helping. </p>\n\n<p>The error is coming up every time I try to access a piece of data from an event.target object using bracket notation:</p>\n\n<pre><code>  const borrowForm = document.getElementById(\"borrowBookForm\")\n\n  borrowForm.onsubmit = event =&gt; {\n    event.preventDefault()\n    const bookID = parseInt(event.target[0].value, 10)\n    alert(library.borrow(bookID))\n    event.target[0].value = \"\"\n  }\n</code></pre>\n\n<p>Both instances of <code>event.target[0]</code> give me the following error: </p>\n\n<pre><code>Element implicitly has an 'any' type because expression of type '0' can't be used to index type 'EventTarget'.\n\nProperty '0' does not exist on type 'EventTarget'.\n</code></pre>\n\n<p>I tried fixing this by adding an interface for EventTarget with no success</p>\n\n<p>I then tried to access the data I want by targeting it directly through the DOM like this: </p>\n\n<pre><code>  const borrowForm = document.getElementById(\"borrowBookForm\")\n\n  borrowForm.onsubmit = event =&gt; {\n    event.preventDefault()\n    const bookToBorrow = document.getElementById(\"bookToBorrow\").value\n    const bookID = parseInt(bookToBorrow, 10)\n    alert(library.borrow(bookID))\n    bookToBorrow.value = \"\"\n  }\n</code></pre>\n\n<p>But in this case <code>.value</code> gives me this error: </p>\n\n<pre><code>Property 'value' does not exist on type 'HTMLElement'.\n</code></pre>\n\n<p>I tried fixing this by adding an interface for HTMLElement that looked like this:</p>\n\n<pre><code>export interface IHTMLElement {\n  value: string\n}\n</code></pre>\n\n<p>...but that didnt work either.</p>\n\n<p>In both cases, I've hit a dead-end.</p>\n\n<p>It is worth mentioning that these are superficial errors, and that my program performs as expected at runtime, but the purpose of this exercise was to learn more about how Typescript works by removing all the errors that it found with my JS code. I also wanted to achieve this with the <code>\"noImplicitAny\": true</code> setting turned on (perhaps this is where I went wrong?). Any guidance would be greatly appreciated</p>\n"}, {"tags": ["angular", "typescript", "angular-material", "frontend", "angular8"], "comments": [{"owner": {"reputation": 6396, "user_id": 5817313, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f5af73ed37487cfa3a6c03b6f3f7afb6?s=128&d=identicon&r=PG&f=1", "display_name": "Mamta", "link": "https://stackoverflow.com/users/5817313/mamta"}, "edited": false, "score": 1, "creation_date": 1577758517, "post_id": 59538339, "comment_id": 105247668, "body": "hi show your ts code as well"}, {"owner": {"reputation": 952, "user_id": 3760024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODz2Q.jpg?s=128&g=1", "display_name": "Santosh Kadam", "link": "https://stackoverflow.com/users/3760024/santosh-kadam"}, "edited": false, "score": 1, "creation_date": 1577771920, "post_id": 59538339, "comment_id": 105249772, "body": "please shows us ts code of above template."}], "answers": [{"tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": true, "score": 1, "last_activity_date": 1577789451, "creation_date": 1577789451, "answer_id": 59543087, "question_id": 59538339, "link": "https://stackoverflow.com/questions/59538339/how-to-open-mat-expansion-panel-when-the-form-group-of-that-panel-is-invalid/59543087#59543087", "title": "How to open mat-expansion-panel when the form group of that panel is invalid?", "body": "<p>get the expansions pannels using ViewChildren</p>\n\n<pre><code>  import {MatExpansionPanel} from '@angular/material/expansion';\n\n  @ViewChildren(MatExpansionPanel) pannels:QueryList&lt;MatExpansionPanel&gt;  \n</code></pre>\n\n<p>In a submit you can make some like, remember that the pannels will be with index 0 for the \"Personal\", 1 for the \"Work\"....</p>\n\n<pre><code>submit()\n{\n  this.pannels.forEach((x,index)=&gt;{\n     if (index==0 &amp;&amp; this.form.get('Personal').invalid)\n        x.open();\n     if (index==1 &amp;&amp; this.form.get('Work').invalid)\n        x.open();\n   ....\n   })\n}\n</code></pre>\n\n<p>NOTE: I don't know about how you make your form, so the condition can change, but I hope this help you</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 12018520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fac8ac0da182086fa4a8d502a3126b8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Parker", "link": "https://stackoverflow.com/users/12018520/peter-parker"}, "edited": false, "score": 0, "creation_date": 1577919518, "post_id": 59547915, "comment_id": 105281912, "body": "Thanks @Mamta for the reference."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1578739585, "post_id": 59547915, "comment_id": 105542708, "body": "Hi there. Answers in form of &quot;this code will help&quot; can be improved a great deal by explaining <i>why</i> the code might help. In general, answers that offer explanation and detail will be useful for a wider range of future readers."}], "tags": [], "owner": {"reputation": 6396, "user_id": 5817313, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f5af73ed37487cfa3a6c03b6f3f7afb6?s=128&d=identicon&r=PG&f=1", "display_name": "Mamta", "link": "https://stackoverflow.com/users/5817313/mamta"}, "is_accepted": false, "score": 0, "last_activity_date": 1578739465, "last_edit_date": 1578739465, "creation_date": 1577821259, "answer_id": 59547915, "question_id": 59538339, "link": "https://stackoverflow.com/questions/59538339/how-to-open-mat-expansion-panel-when-the-form-group-of-that-panel-is-invalid/59547915#59547915", "title": "How to open mat-expansion-panel when the form group of that panel is invalid?", "body": "<p>Please see if this helps you:</p>\n\n<pre><code>import { Component, Input,ApplicationRef} from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  myForm: FormGroup\n  expanded = []\n  errorPanles = []\n  formSubmitted = false\n  constructor(private fb: FormBuilder,private appRef: ApplicationRef) { }\n  ngOnInit() {\n    this.myForm = this.fb.group({\n      personal: this.fb.group({\n        fname: ['', [Validators.required]],\n        lname: ['']\n      }),\n      work: this.fb.group({\n        designation: ['', [Validators.required]],\n        department: ['', [Validators.required]],\n      })\n    });\n  }\n\n  send(form) {\n    this.formSubmitted = true\n    this.expanded = []\n    this.errorPanles = []\n    this.appRef.tick();\n    for (var key in form.controls) {\n      if (form.controls[key].valid === false) {\n        this.expanded.push(key)\n      }\n    }      \n    this.errorPanles = this.expanded  \n    if(this.errorPanles.length&gt;0){\n      // Form will not submit and material panel with error will open\n    }else{\n      // do whatever you want in case no error\n    }\n  }\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-s59zmn\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-s59zmn</a></p>\n\n<p>I am also learning phase in Angular.</p>\n"}], "owner": {"reputation": 61, "user_id": 12018520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fac8ac0da182086fa4a8d502a3126b8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Parker", "link": "https://stackoverflow.com/users/12018520/peter-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2409, "favorite_count": 1, "accepted_answer_id": 59543087, "answer_count": 2, "score": 1, "last_activity_date": 1578739465, "creation_date": 1577752462, "last_edit_date": 1577760308, "question_id": 59538339, "link": "https://stackoverflow.com/questions/59538339/how-to-open-mat-expansion-panel-when-the-form-group-of-that-panel-is-invalid", "title": "How to open mat-expansion-panel when the form group of that panel is invalid?", "body": "<p>I have a <code>formArray</code> with multiple <code>formGroups</code>. Each of the <code>formGroup</code> is inside an expansion panel. Now when I click on <code>\"Check what's missing\"</code> button, form validation runs and shows errors for the form fields that are invalid. But if the mat-expansion-panel is closed, you can't see which fields are invalid. When I check for form validation, I want the expansion panels with invalid <code>formGroup</code> to open so that the user can see which form fields are invalid. I have added the code for your reference:</p>\n\n<p></p>\n\n<pre><code>&lt;!-- Personal Form inside Expansion Panel Personal --&gt;\n&lt;mat-expansion-panel&gt;\n    &lt;mat-expansion-panel-header&gt;\n        &lt;mat-panel-title&gt;\n            Personal\n        &lt;/mat-panel-title&gt;\n    &lt;/mat-expansion-panel-header&gt;\n    &lt;app-personal-form [form]=\"form\"&gt;&lt;/app-personal-form&gt;\n&lt;/mat-expansion-panel&gt;\n\n&lt;!-- Work Form inside Expansion Panel Work --&gt;\n&lt;mat-expansion-panel&gt;\n    &lt;mat-expansion-panel-header&gt;\n        &lt;mat-panel-title&gt;\n            Work\n        &lt;/mat-panel-title&gt;\n    &lt;/mat-expansion-panel-header&gt;\n    &lt;app-work-form [form]=\"form\"&gt;&lt;/app-work-form&gt;\n&lt;/mat-expansion-panel&gt;\n\n&lt;!-- Address Form inside Expansion Panel Work --&gt;\n&lt;mat-expansion-panel&gt;\n    &lt;mat-expansion-panel-header&gt;\n        &lt;mat-panel-title&gt;\n            Address\n        &lt;/mat-panel-title&gt;\n    &lt;/mat-expansion-panel-header&gt;\n    &lt;app-address-form [form]=\"form\"&gt;&lt;/app-address-form&gt;\n&lt;/mat-expansion-panel&gt;\n\n&lt;div class=\"top-15\" align=\"end\"&gt;\n    &lt;button class=\"btn-success\" mat-raised-button [disabled]=\"form.valid\" (click)=\"form.showErrors()\"&gt;Check what's missing&lt;/button&gt; \n    &lt;button class=\"btn-success\" mat-raised-button [disabled]=\"!form.valid || !form.dirty\" (click)=\"save()\"&gt;Save&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["angular", "typescript", "angular-template"], "comments": [{"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577765879, "post_id": 59538266, "comment_id": 105248679, "body": "You have to change reference of <code>product</code> array and then <code>onChanges()</code> fire. So simply you can use <code>destructuring</code>  <code>this.product = [ ... this.product, newObj ]</code>"}, {"owner": {"reputation": 3, "user_id": 9022037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oI5BDM5FMFc/AAAAAAAAAAI/AAAAAAAAAZA/52tgv-B9A2g/photo.jpg?sz=128", "display_name": "daniel garcia", "link": "https://stackoverflow.com/users/9022037/daniel-garcia"}, "reply_to_user": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577816992, "post_id": 59538266, "comment_id": 105263924, "body": "@GaurangDhorda i&#39;ve applied desstructuring in the method ngOnInit of ProductsSaleTotalsComponent and is still not firing the method ngOnChanges, the thing that has changed is that le message Products Length is not updating when the products changes in ProductsSaleComponent"}, {"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577817852, "post_id": 59538266, "comment_id": 105264143, "body": "Alternatively, you can use <code>behaviorsubject&lt;T&gt;</code> in service... And inject service to components for getting and sending data of products."}, {"owner": {"reputation": 3, "user_id": 9022037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oI5BDM5FMFc/AAAAAAAAAAI/AAAAAAAAAZA/52tgv-B9A2g/photo.jpg?sz=128", "display_name": "daniel garcia", "link": "https://stackoverflow.com/users/9022037/daniel-garcia"}, "reply_to_user": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1578095298, "post_id": 59538266, "comment_id": 105339662, "body": "@GaurangDhorda i haven&#39;t tried the service with behaviorSubject but i&#39;ve created the project in StackBlitz, maybe i made some mistake explaining the problem or something else"}, {"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1578134515, "post_id": 59538266, "comment_id": 105345474, "body": "<a href=\"https://stackblitz.com/edit/angular-cy6zup?file=src%2Fapp%2Fproducts-sale-total%2Fproducts-sale-total.component.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a> checkout this link I have changes lots of things in your code. First You need <code>@output()</code> for every <code>EventEmitter</code> then you can access one component output value to parent component."}, {"owner": {"reputation": 3, "user_id": 9022037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oI5BDM5FMFc/AAAAAAAAAAI/AAAAAAAAAZA/52tgv-B9A2g/photo.jpg?sz=128", "display_name": "daniel garcia", "link": "https://stackoverflow.com/users/9022037/daniel-garcia"}, "reply_to_user": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1578326810, "post_id": 59538266, "comment_id": 105393730, "body": "Ohh thank you so much @GaurangDhorda i&#39;ve check your code and works"}, {"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1578381577, "post_id": 59538266, "comment_id": 105410194, "body": "welcome, I have answered the same... You can accept it too... Thank You."}], "answers": [{"tags": [], "owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "is_accepted": true, "score": 0, "last_activity_date": 1578381493, "creation_date": 1578381493, "answer_id": 59623835, "question_id": 59538266, "link": "https://stackoverflow.com/questions/59538266/angular-2-catch-event-when-shared-object-between-components-changes/59623835#59623835", "title": "Angular 2+ Catch event when shared object between components changes", "body": "<p><code>app-products-sale-total</code> and <code>app-products-sale</code> are both different component, so to communicate with them you need to use <code>@Output()</code> from <code>app-products-sale</code> and pass array of object to <code>app-products-sale-total</code>... Complete working example you can find out here in this <a href=\"https://stackblitz.com/edit/angular-cy6zup?file=src%2Fapp%2Fsales-point%2Fsales-point.component.html\" rel=\"nofollow noreferrer\">StackBlitz Link</a></p>\n\n<p>Your <strong><code>ProductSaleDetailComponent.ts</code></strong> is...</p>\n\n<pre><code>export class ProductSaleDetailComponent implements OnInit {\n    @Input() product: ProductSale;\n    @Input () index: number;\n    @Output() productData = new EventEmitter();\n    constructor() { }\n\n    ngOnInit() {\n       this.product.Quantity = 1;\n    }\n\n    changeInput(p){\n        this.productData.emit({event: 'add',value:p, index : this.index});\n    }\n}\n</code></pre>\n\n<p>Your <strong>ProductsSaleComponent</strong> <strong>template</strong> is...</p>\n\n<pre><code>    &lt;button type=\"button\" (click)=\"addProduct()\"&gt;Add Product!&lt;/button&gt;\n        &lt;div *ngFor=\"let product of products; let i=index\"&gt;\n             &lt;div&gt; \n                 &lt;app-product-sale-detail [product]=\"product\" [index]=\"i\" (productData)= \"productOutput($event)\" &gt;&lt;/app-product-sale-detail&gt;\n             &lt;/div&gt;\n        &lt;div&gt;\n            &lt;button aria-label=\"Delete\" color=\"warn\" (click)=\"removeProduct(i)\"&gt;\n              Remove Product\n            &lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>Your <strong>ProductSaleComponent.ts</strong> is...</p>\n\n<pre><code>export class ProductsSaleComponent implements OnInit {\n\n   @Input() products: Array&lt;ProductSale&gt; = [];\n   @Output() ProductOutputData = new EventEmitter(); \n   constructor() { }\n\n   ngOnInit() {\n      console.log('product Sale',new ProductSale());\n   }\n\n   addProduct() {\n      this.products.push(new ProductSale());\n   }\n\n   removeProduct(index: number) {\n      this.ProductOutputData.emit({event:'remove', index: index, value : this.products[index]} );\n      this.products.splice(index, 1);\n   }\n   productOutput(event){\n      this.ProductOutputData.emit(event);\n   }\n}\n</code></pre>\n\n<p>So, basically you need chain of <code>@Input() and</code>@Output()` to communicate between child-parent respectively..</p>\n"}], "owner": {"reputation": 3, "user_id": 9022037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oI5BDM5FMFc/AAAAAAAAAAI/AAAAAAAAAZA/52tgv-B9A2g/photo.jpg?sz=128", "display_name": "daniel garcia", "link": "https://stackoverflow.com/users/9022037/daniel-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 59623835, "answer_count": 1, "score": 0, "last_activity_date": 1578381493, "creation_date": 1577751691, "last_edit_date": 1578077767, "question_id": 59538266, "link": "https://stackoverflow.com/questions/59538266/angular-2-catch-event-when-shared-object-between-components-changes", "title": "Angular 2+ Catch event when shared object between components changes", "body": "<p>I have 3 components (Sales, ProductSales, ProductTotals) that share an array of products but the ProductsTotal component is not reading the changes of the array. The father component (Sales) initializes the array of products and set as intnput for the child components, the ProductSales component changes the value of the array of products (add, remove, change properties like unit price, etc) and the ProductTotals component read the array and constantly does the operations to obtain the total of the sum of the unit prices of the products and displays them.</p>\n\n<p><strong>SalesComponent.html</strong></p>\n\n<pre><code>&lt;app-products-sale-total class=\"full-wid\" [products]=\"products\"&gt;&lt;/app-products-sale-total&gt;\n&lt;app-products-sale class=\"full-wid\" [products]=\"products\"&gt;&lt;/app-products-sale&gt;\n</code></pre>\n\n<p>To display the totals i did this\n<strong>ProductTotals.html</strong></p>\n\n<pre><code>{{products.length}}\n&lt;strong&gt;Taxes:&lt;/strong&gt; {{taxes|currency}} \n&lt;strong&gt;Subtotal:&lt;/strong&gt; {{subtotal|currency}} \n&lt;strong&gt;Total:&lt;/strong&gt; {{total|currency}} \n</code></pre>\n\n<p><strong>ProductsTotal.ts</strong></p>\n\n<pre><code>import { Component, OnInit, Input, OnChanges, OnDestroy, SimpleChange } from '@angular/core';\nimport { ProductSale } from '../product-sale-detail/product-sale-detail.component';\n\n@Component({\n  selector: 'app-products-sale-total',\n  templateUrl: './products-sale-total.component.html',\n  styleUrls: ['./products-sale-total.component.scss']\n})\nexport class ProductsSaleTotalComponent implements OnChanges {\n\n  @Input() products: Array&lt;ProductSale&gt; = [];\n  total: number = 0;\n  subtotal: number = 0;\n  taxes: number = 0;\n  constructor() {\n   }\n\n  ngOnChanges(changes: import(\"@angular/core\").SimpleChanges): void {\n    calculateTotalFields();\n    console.log(changes);\n  }\n\n  calculateTotalFields(): void {\n    let total = 0;\n    let subtotal = 0;\n    let taxes = 0;\n    this.products.forEach(x =&gt; {\n      const totalProduct = x.UnitPrice * x.Quantity;\n      const taxesProduct = totalProduct * 0.16;\n      total += totalProduct;\n      subtotal += totalProduct - taxesProduct;\n      taxes += taxesProduct;\n    });\n    this.total = total;\n    this.taxes = taxes;\n    this.subtotal = subtotal;\n  }\n}\n\n</code></pre>\n\n<p>The problem is that only enters the ngOnChanges method once even though the object of products is changing.</p>\n\n<p>The result of updating products in ProductsSalesComponent:</p>\n\n<p><img src=\"https://i.stack.imgur.com/csUDH.png\" alt=\"result of updating products in ProductsSalesComponent\"></p>\n\n<p><strong>Edit</strong>\nI've created a project in StackBlitz to show the problem about how the ngOnChange event of the component 'ProductSaleTotal' is not fire when the object 'products' changes\n<a href=\"https://stackblitz.com/edit/angular-fcevey?file=src%2Fapp%2Fproducts-sale-total%2Fproducts-sale-total.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-fcevey?file=src%2Fapp%2Fproducts-sale-total%2Fproducts-sale-total.component.ts</a></p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1577751502, "post_id": 59538081, "comment_id": 105246464, "body": "Any way to do a stackblitz that demonstrates the issue?"}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 0, "creation_date": 1577754334, "post_id": 59538081, "comment_id": 105246990, "body": "concatMap only yields a second time once all the observables in it yield. <a href=\"https://angular-academy.com/rxjs-switchmap-concatmap-mergemap-exhaustmap/#concatmap\" rel=\"nofollow noreferrer\">This page</a> has a good explanation on how it works"}], "answers": [{"tags": [], "owner": {"reputation": 3424, "user_id": 2557682, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bed9a0a24d4e3a543de6869d1267175d?s=128&d=identicon&r=PG", "display_name": "crgolden", "link": "https://stackoverflow.com/users/2557682/crgolden"}, "is_accepted": true, "score": 0, "last_activity_date": 1588402989, "creation_date": 1588402989, "answer_id": 61555628, "question_id": 59538081, "link": "https://stackoverflow.com/questions/59538081/why-do-these-nested-observables-only-get-called-once/61555628#61555628", "title": "Why do these nested Observables only get called once?", "body": "<p>Turns out I needed to make the inner observables hot - adding <a href=\"https://www.learnrxjs.io/learn-rxjs/operators/multicasting/share\" rel=\"nofollow noreferrer\"><code>share()</code></a> solved the problem.</p>\n"}], "owner": {"reputation": 3424, "user_id": 2557682, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bed9a0a24d4e3a543de6869d1267175d?s=128&d=identicon&r=PG", "display_name": "crgolden", "link": "https://stackoverflow.com/users/2557682/crgolden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 61555628, "answer_count": 1, "score": 0, "last_activity_date": 1588402989, "creation_date": 1577749890, "question_id": 59538081, "link": "https://stackoverflow.com/questions/59538081/why-do-these-nested-observables-only-get-called-once", "title": "Why do these nested Observables only get called once?", "body": "<p>I have a nested series of observables like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.subscription = combineLatest(\n  [1$, ..., m$]\n).pipe(\n  filter((latest: [boolean, ..., number]) =&gt; {\n    const [1, ..., m] = latest;\n    const shouldContinue: boolean = &lt;some logic&gt;;\n    return shouldContinue;\n  }),\n  concatMap((latest: [boolean, ..., number]) =&gt; {\n    const [1, ..., m] = latest;\n\n    // Hits here first time, then never again\n\n    return &lt;method that returns an Observable&gt;().pipe(concatMap((result: [boolean, ..., number]) =&gt; {\n      const [2, ..., n] = result;\n\n      // Hits here first time, then never again\n\n      return &lt;another method that returns an Observable&gt;();\n    }));\n  })\n).subscribe((result: [boolean, ..., number]) =&gt; {\n  const [3, ..., o] = result;\n\n  // Hits here first time, then never again\n\n  &lt;some method&gt;();\n});\n</code></pre>\n\n<p>The first time <code>shouldContinue</code> is set to <code>true</code>, the remaining functions are called all the way into the subscription.</p>\n\n<p>But the second time <code>shouldContinue</code> is set to <code>true</code> (I can see it set in the debugger), the code never moves into the <code>concatMap</code>.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1721, "user_id": 7561063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e85f88d7948998c821283bc67082c9?s=128&d=identicon&r=PG&f=1", "display_name": "Allabakash", "link": "https://stackoverflow.com/users/7561063/allabakash"}, "edited": false, "score": 0, "creation_date": 1577773738, "post_id": 59537887, "comment_id": 105250154, "body": "can you try creating a demo to produce the issue  using <a href=\"https://stackblitz.com/\" rel=\"nofollow noreferrer\">stackblitz.com</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12293811"}, "reply_to_user": {"reputation": 1721, "user_id": 7561063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e85f88d7948998c821283bc67082c9?s=128&d=identicon&r=PG&f=1", "display_name": "Allabakash", "link": "https://stackoverflow.com/users/7561063/allabakash"}, "edited": false, "score": 0, "creation_date": 1577836802, "post_id": 59537887, "comment_id": 105267531, "body": "no as this is a compile time failure"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12293811"}, "is_accepted": false, "score": 0, "last_activity_date": 1578085191, "creation_date": 1578085191, "answer_id": 59585272, "question_id": 59537887, "link": "https://stackoverflow.com/questions/59537887/type-never-must-have-a-symbol-iterator-method-that-returns-an-iterator/59585272#59585272", "title": "Type &#39;never&#39; must have a &#39;[Symbol.iterator]()&#39; method that returns an iterator. typescript", "body": "<p>so I'm not sure if this is the solution but I removed the user and logged in</p>\n\n<pre><code>authComplete$.subscribe(([user, loggedIn]) =&gt; {\n</code></pre>\n\n<p>is now:</p>\n\n<pre><code>authComplete$.subscribe() =&gt; {\n</code></pre>\n\n<p>I have to continue setting up my auth scheme to see if the code will work or break. Once I have my answer I will further detail this answer.</p>\n\n<p>However as far as code compiling removing the array did work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12293811"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1578085191, "creation_date": 1577748045, "last_edit_date": 1577754759, "question_id": 59537887, "link": "https://stackoverflow.com/questions/59537887/type-never-must-have-a-symbol-iterator-method-that-returns-an-iterator", "title": "Type &#39;never&#39; must have a &#39;[Symbol.iterator]()&#39; method that returns an iterator. typescript", "body": "<p>I have this code </p>\n\n<pre><code>authComplete$.subscribe(([user, loggedIn]) =&gt; {\n</code></pre>\n\n<p>obviously this is just a incomplete code snippit of the line that the error is being caused on. The error being</p>\n\n<p><code>Type 'never' must have a '[Symbol.iterator]()' method that returns an iterator.</code></p>\n\n<p>I have no idea how to fix this. Or what this even means</p>\n\n<p>Here is the full code and my research so far</p>\n\n<pre><code>private handleAuthCallback() {\n    // Call when app reloads after user logs in with Auth0\n    const params = window.location.search;\n    if (params.includes('code=') &amp;&amp; params.includes('state=')) {\n      let targetRoute: string; // Path to redirect to after login processsed\n      const authComplete$ = this.handleRedirectCallback$.pipe(\n        // Have client, now call method to handle auth callback redirect\n        tap(cbRes =&gt; {\n          // Get and set target redirect route from callback results\n          targetRoute = cbRes.appState &amp;&amp; cbRes.appState.target ? cbRes.appState.target : '/';\n        }),\n        concatMap(() =&gt; {\n          // Redirect callback complete; get user and login status\n          return combineLatest([\n            this.getUser$(),\n            this.isAuthenticated$\n          ]);\n        })\n      );\n      // Subscribe to authentication completion observable\n      // Response will be an array of user and login status\n      authComplete$.subscribe(([user, loggedIn]) =&gt; {     // &lt;-- line error is on\n        // Redirect to target route after callback processing\n        this.router.navigate([targetRoute]);\n      });\n    }\n  }\n</code></pre>\n\n<p>this is in dealing with the auth0 angular intergration example which can be located here\n<a href=\"https://auth0.com/docs/quickstart/spa/angular2\" rel=\"nofollow noreferrer\">https://auth0.com/docs/quickstart/spa/angular2</a></p>\n\n<p>my research so far is with this website:</p>\n\n<p><a href=\"https://www.geekabyte.io/2019/06/typing-iterables-and-iterators-with.html\" rel=\"nofollow noreferrer\">https://www.geekabyte.io/2019/06/typing-iterables-and-iterators-with.html</a></p>\n\n<p>but to be honest after reading it a few times im even more confused. </p>\n\n<p>I did see that I may need to change some settings in my angular app to which I did in my tsconfig.json file</p>\n\n<pre><code>\"lib\": [\n      \"es2018\",\n      \"dom\",\n      \"es5\", \"es6\", \"dom.iterable\"\n    ]\n</code></pre>\n\n<p>help would be appreciated</p>\n"}, {"tags": ["angular", "typescript", "unit-testing", "karma-jasmine", "ngx-translate"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577750476, "post_id": 59537745, "comment_id": 105246255, "body": "It depends on how complete/accurate you expect it to be. For instance if what&#39;s left of <code>| translate</code> is the result of a function or even expression (e.g. &#39;FOO&#39;.replace(...) | translate) you won&#39;t be able to find them all. Similarly, if you use regular expressions to find the strings they have to fit some format (e.g. on same line as <code>| translate</code>). With these restrictions you could do this."}, {"owner": {"reputation": 1, "user_id": 12627863, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBpVyWazKfvZ0dQWDizAehz7rSXRuzsTFBeUVYHFw=k-s128", "display_name": "Aleksei Galimov", "link": "https://stackoverflow.com/users/12627863/aleksei-galimov"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1578042338, "post_id": 59537745, "comment_id": 105318227, "body": "I just want to know where and how to I can analyse and check ALL of the passed strings through the translate pipe (in all html files of the project, already processed if it was expression)."}], "owner": {"reputation": 1, "user_id": 12627863, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBpVyWazKfvZ0dQWDizAehz7rSXRuzsTFBeUVYHFw=k-s128", "display_name": "Aleksei Galimov", "link": "https://stackoverflow.com/users/12627863/aleksei-galimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577746838, "creation_date": 1577746838, "question_id": 59537745, "link": "https://stackoverflow.com/questions/59537745/ngx-translate-find-all-missing-keys-passed-through-translate-pipe-in-the-whole", "title": "ngx-translate: Find all missing keys passed through translate pipe in the whole project (unit test)", "body": "<p>I want to write the ONE unit test for the whole project (not for one specified component) in order to check if there are any missing keys (in my .json file with all translations), which I pass through translation pipe ANYWHERE in the project. For example:</p>\n\n<pre><code>&lt;span&gt;{{ 'FOO' | translate }}&lt;/span&gt;\n</code></pre>\n\n<p>If FOO key doesn`t exist in .json file, then the test should fail and (optionally) somehow return the list of missing keys. Is it possible to implement this feature in this way? Or at least in other comparable ways?</p>\n"}, {"tags": ["arrays", "angular", "typescript", "queue"], "comments": [{"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577749376, "post_id": 59537739, "comment_id": 105246033, "body": "for those who are telling me the approach is complicated, i am aware it is, this is based off  a task that has been set for me to enqueue and dequeue using only an array, a count and an index, without the use of built in functions such as push, shift, etc"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577749091, "post_id": 59537986, "comment_id": 105245977, "body": "its complicated intentionally because the goal is to implement enqueueing and dequeueing using only an array and a count just to get a better understanding of how those functions work and how queues work"}, {"owner": {"reputation": 6137, "user_id": 3870547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b3e98f2a1ec4b92a87aa6c76e095d8?s=128&d=identicon&r=PG&f=1", "display_name": "zmag", "link": "https://stackoverflow.com/users/3870547/zmag"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577749539, "post_id": 59537986, "comment_id": 105246064, "body": "@Banani720 Ok, I&#39;ve updated my post. I&#39;m not sure using <code>Array.prototype.slice</code> is right though."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577756745, "post_id": 59537986, "comment_id": 105247402, "body": "So technically <code>.slice()</code> works but gives the function an O(n) time complexity right?"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577756869, "post_id": 59537986, "comment_id": 105247419, "body": "The hint I was given is that I would need two indexes in this scenario to do it with a linear time complexity"}, {"owner": {"reputation": 6137, "user_id": 3870547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b3e98f2a1ec4b92a87aa6c76e095d8?s=128&d=identicon&r=PG&f=1", "display_name": "zmag", "link": "https://stackoverflow.com/users/3870547/zmag"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577756925, "post_id": 59537986, "comment_id": 105247430, "body": "@Banani720 I mean I&#39;m not sure using it is appropriate if your original goal is to understand how it works under the hood."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577756969, "post_id": 59537986, "comment_id": 105247437, "body": "Right that\u2019s the objective here I thought I had it but was told basically not to use helper methods"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577757086, "post_id": 59537986, "comment_id": 105247459, "body": "I will probably have to rework how I\u2019m getting around to this"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577769761, "post_id": 59537986, "comment_id": 105249388, "body": "I&#39;ve updated the question a little bit I feel like I am coming close but I am very much wrong somewhere in my code"}, {"owner": {"reputation": 6137, "user_id": 3870547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b3e98f2a1ec4b92a87aa6c76e095d8?s=128&d=identicon&r=PG&f=1", "display_name": "zmag", "link": "https://stackoverflow.com/users/3870547/zmag"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577778528, "post_id": 59537986, "comment_id": 105251456, "body": "@Banani720 I think I&#39;ve understood your needs. See updated post."}], "tags": [], "owner": {"reputation": 6137, "user_id": 3870547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b3e98f2a1ec4b92a87aa6c76e095d8?s=128&d=identicon&r=PG&f=1", "display_name": "zmag", "link": "https://stackoverflow.com/users/3870547/zmag"}, "is_accepted": false, "score": 0, "last_activity_date": 1577778489, "last_edit_date": 1577778489, "creation_date": 1577748972, "answer_id": 59537986, "question_id": 59537739, "link": "https://stackoverflow.com/questions/59537739/implementing-enqueue-and-dequeue-without-built-in-methods/59537986#59537986", "title": "Implementing Enqueue and Dequeue without built-in methods", "body": "<p>I think your approach is complicated and vague, I made a new one based on your intention.</p>\n\n<p>Even if this code doesn't match your needs, at least you can start from this one.</p>\n\n<p><strong>queue.component.ts</strong></p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>import { Component, Input } from \"@angular/core\";\n\n@Component({\n  selector: \"my-app\",\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.css\"]\n})\nexport class AppComponent {\n  @Input() userInput;\n  array = [];\n  arrayCount = 0;\n  dequeuedCount = 0;\n  dequeued;\n\n  get queue() {\n    const q = [];\n    for (let i = this.dequeuedCount; i &lt; this.arrayCount; i++) {\n      q[i - this.dequeuedCount] = this.array[i];\n    }\n    return q;\n  }\n\n  enQ() {\n    this.array[this.arrayCount++] = this.userInput;\n  }\n\n  deQ() {\n    if (this.arrayCount &gt; this.dequeuedCount) {\n      this.dequeued = this.array[this.dequeuedCount++];\n    } else {\n      this.dequeued = \"There is nothing else to dequeue\";\n    }\n  }\n}\n</code></pre>\n\n<p><strong>queue.component.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div&gt;\n  &lt;label for=\"userInput\"&gt;Input to Array:\n    &lt;input [(ngModel)]=\"userInput\" type=\"text\"&gt;\n  &lt;/label&gt;&lt;br&gt;\n  &lt;button (click)=\"enQ()\"&gt;Enqueue&lt;/button&gt;\n  &lt;button (click)=\"deQ()\"&gt;Dequeue&lt;/button&gt;\n\n  &lt;h3&gt;Arrays&lt;/h3&gt;\n  &lt;p&gt; {{ queue | json }} &lt;/p&gt;\n\n  &lt;h3&gt;Dequeued Item&lt;/h3&gt;\n  &lt;p&gt; {{ dequeued | json }} &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>stackblitz: <a href=\"https://stackblitz.com/edit/angular-bt8ufd\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-bt8ufd</a></p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577768964, "post_id": 59538190, "comment_id": 105249253, "body": "this works, I probably should&#39;ve worded my question better, I have edited the title and updated the question text accordingly hopefully it makes more sense now, I can&#39;t use any built-in functions"}], "tags": [], "owner": {"reputation": 1569, "user_id": 6235175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DhV4F.jpg?s=128&g=1", "display_name": "blazehub", "link": "https://stackoverflow.com/users/6235175/blazehub"}, "is_accepted": false, "score": 0, "last_activity_date": 1577750976, "creation_date": 1577750976, "answer_id": 59538190, "question_id": 59537739, "link": "https://stackoverflow.com/questions/59537739/implementing-enqueue-and-dequeue-without-built-in-methods/59538190#59538190", "title": "Implementing Enqueue and Dequeue without built-in methods", "body": "<p>Try the snippet, it should solve the problem.</p>\n\n<pre><code>import { Component } from \"@angular/core\";\n\n@Component({\n  selector: \"my-app\",\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.css\"]  \n})\nexport class AppComponent {\n  userInput: String;\n\n  array = [];\n  dequeued = [];\n\n  enQ() {\n    this.array.push(this.userInput);\n  }\n\n  deQ() {\n    if (this.array.length &gt; 0) {\n      this.dequeued.push(this.array[this.array.length - 1]);\n      this.array.shift();\n    }\n  }\n}\n\n\n&lt;div&gt;\n   &lt;label for=\"userInput\"&gt;Input to Array:\n   &lt;input [(ngModel)]=\"userInput\" type=\"text\"&gt;\n   &lt;/label&gt;&lt;br&gt;\n   &lt;button (click)=\"enQ()\"&gt;Enqueue&lt;/button&gt;\n   &lt;button (click)=\"deQ()\"&gt;Dequeue&lt;/button&gt;\n\n   &lt;h3&gt;Arrays&lt;/h3&gt;\n   &lt;p&gt; {{ array |json}} &lt;/p&gt;\n\n   &lt;h3&gt;Dequeued Item&lt;/h3&gt;\n   &lt;p&gt; {{ dequeued|json}} &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In your code you missing the <code>pipe</code> on <code>dequeue</code> variable, so when it hold the array the values will not be rendered by angular</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-yldzgl\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577778489, "creation_date": 1577746778, "last_edit_date": 1577768851, "question_id": 59537739, "link": "https://stackoverflow.com/questions/59537739/implementing-enqueue-and-dequeue-without-built-in-methods", "title": "Implementing Enqueue and Dequeue without built-in methods", "body": "<p>I have two functions one to dequeue and one to enqueue a user-inputted item from/to an array respectively.</p>\n\n<p><strong>What I know about queues</strong></p>\n\n<p>What I know about queues is pretty limited, I know they are similar to stacks but rather than being Last-In-First-Out (LIFO) as stacks are they are First-In-First-Out (FIFO) so basically whatever elements go into the array first will be taken out of the array first. </p>\n\n<p><strong>What I am trying right now</strong></p>\n\n<p>What I am trying to do right now is with the <code>Enqueue</code> button I am adding items to an array while incrementing the variable count by 1 with each push of the button so as to add each new user input to the next array position. In the dequeue function, I am setting each element of the <code>dequeue</code> array equal to each element of the original array by incrementing the <code>dequeueCount</code> variable.</p>\n\n<p><strong>What is the problem</strong>\nThe problem here is this, when I push the dequeue button I basically need to reindex everything so that after I dequeue an element the element at index 1, now takes the position index 0 and basically I always want to dequeue the item at element 0. </p>\n\n<p><strong>queue.component.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-queue',\n  templateUrl: './queue.component.html',\n  styleUrls: ['./queue.component.css']\n})\nexport class QueueComponent implements OnInit {\n  @Input() userInput: String \n  array = []\n  arrayCount = 0\n  dequeueCount = 0\n  dequeueArray = []\n  dequeued = null\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  enQ() {\n    this.array[this.arrayCount++] = this.userInput;\n\n  }\n\n  deQ() {\n    deQ() {\n    if (this.arrayCount &gt; 0) {\n    this.dequeueArray[this.dequeueCount++] = this.array[this.dequeueCount-1]\n    this.dequeued = this.dequeueArray[this.dequeueCount-1]\n    this.arrayCount--\n    }\n    else {\n      this.dequeued = \"There is nothing else to dequeue\"\n    }\n\n  }\n}\n</code></pre>\n\n<p>and I am trying to show the current value of the array here </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div&gt;\n  &lt;label for=\"userInput\"&gt;Input to Array:\n    &lt;input [(ngModel)]=\"userInput\" type=\"text\"&gt;\n  &lt;/label&gt;&lt;br&gt;\n  &lt;button (click)=\"enQ()\"&gt;Enqueue&lt;/button&gt;\n  &lt;button (click)=\"deQ()\"&gt;Dequeue&lt;/button&gt;\n\n  &lt;h3&gt;Arrays&lt;/h3&gt;\n  &lt;p *ngFor = \"let item of array\"&gt; {{ array }} &lt;/p&gt;\n\n  &lt;h3&gt;Dequeued Item&lt;/h3&gt;\n  &lt;p&gt; {{ dequeued}} &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>when I press the enqueue function everything seems to work correctly and a value is added to the array at the correct position so no problems with the enqueue function, however with the dequeue function, I need to somehow be able to dequeue the items and also remove the first item from the array and redisplay <code>{{ array }}</code> with the dequeued item removed.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic-framework"], "comments": [{"owner": {"reputation": 19, "user_id": 12531540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10112010d89f45add86dd6af79d75c63?s=128&d=identicon&r=PG", "display_name": "dominion", "link": "https://stackoverflow.com/users/12531540/dominion"}, "edited": false, "score": 0, "creation_date": 1577741635, "post_id": 59537026, "comment_id": 105243877, "body": "under <b>console.log</b> where I have,<code>staName: Object { closed: true, syncErrorThrown: false, syncErrorThrowable: true, \u2026 }</code> it supposes to be <code>staName: &quot;\u200bAloha Gas Ketu&quot;</code>"}, {"owner": {"reputation": 9909, "user_id": 5225844, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hKnPb.jpg?s=128&g=1", "display_name": "Naga Sai A", "link": "https://stackoverflow.com/users/5225844/naga-sai-a"}, "edited": false, "score": 0, "creation_date": 1577806801, "post_id": 59537026, "comment_id": 105260931, "body": "please share staService code from this line staName: this.staService.getStation(x.stationId) which seems to be the issue and please separate your console logs to debug easily"}, {"owner": {"reputation": 19, "user_id": 12531540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10112010d89f45add86dd6af79d75c63?s=128&d=identicon&r=PG", "display_name": "dominion", "link": "https://stackoverflow.com/users/12531540/dominion"}, "reply_to_user": {"reputation": 9909, "user_id": 5225844, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hKnPb.jpg?s=128&g=1", "display_name": "Naga Sai A", "link": "https://stackoverflow.com/users/5225844/naga-sai-a"}, "edited": false, "score": 0, "creation_date": 1577810580, "post_id": 59537026, "comment_id": 105262081, "body": "@NagaSaiA have reduced the content of <b>console.log</b> and I don&#39;t get what you mean here: <b>please share staService code from this line staName: this.staService.getStation(x.stationId)</b>"}, {"owner": {"reputation": 9909, "user_id": 5225844, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hKnPb.jpg?s=128&g=1", "display_name": "Naga Sai A", "link": "https://stackoverflow.com/users/5225844/naga-sai-a"}, "edited": false, "score": 0, "creation_date": 1577811218, "post_id": 59537026, "comment_id": 105262267, "body": "getStation method details in staService.ts file"}, {"owner": {"reputation": 19, "user_id": 12531540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10112010d89f45add86dd6af79d75c63?s=128&d=identicon&r=PG", "display_name": "dominion", "link": "https://stackoverflow.com/users/12531540/dominion"}, "reply_to_user": {"reputation": 9909, "user_id": 5225844, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hKnPb.jpg?s=128&g=1", "display_name": "Naga Sai A", "link": "https://stackoverflow.com/users/5225844/naga-sai-a"}, "edited": false, "score": 0, "creation_date": 1577811958, "post_id": 59537026, "comment_id": 105262495, "body": "@NagaSaiA have added the <b>station.service.ts</b> and <b>data-sharing.service.ts</b>"}], "owner": {"reputation": 19, "user_id": 12531540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10112010d89f45add86dd6af79d75c63?s=128&d=identicon&r=PG", "display_name": "dominion", "link": "https://stackoverflow.com/users/12531540/dominion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577811890, "creation_date": 1577741181, "last_edit_date": 1577811890, "question_id": 59537026, "link": "https://stackoverflow.com/questions/59537026/using-foreign-key-id-to-get-value-name-in-angular", "title": "Using foreign key (id) to get value (name) in angular", "body": "<p>Please, how can I get the value that is being represented by it Id in another <strong>database</strong>?\nI tried using map and subscribe but I think am missing something, if you check my <code>console.log</code> I can subscribe the data but it not <code>mapping</code> to the <strong>array object.</strong></p>\n\n<p><strong>manage-user.component.ts</strong></p>\n\n<pre><code>  public getUsers() {\n    this.userService.getUsers().subscribe(data =&gt; {\n      this.user = data['usrs'];\n      const q = data['usrs'].map(x =&gt; ({...x, staName: this.staService.getStation(x.stationId).subscribe((datum: any) =&gt; {\n          console.log(datum['res']['name']);\n          return{ staName: datum['res']['name']};\n        })}))\n      console.log(q);\n    }, err =&gt; {\n      alert(err.message);\n    });\n  }\n\n</code></pre>\n\n<p><strong>console.log</strong></p>\n\n<pre><code>(20) [\u2026]\n\u200b\n0: {\u2026}\n\u200b\u200b\nauthorities: Array [ {\u2026} ]\n\u200b\u200b\nid: 1\n\u200b\u200b\nimg: \"assets/images/Pictures/faces-images/face_image1.png\"\n\u200b\u200b\nname: \"Temidayo Abiodun\"\n\u200b\u200b\norgId: 1\n\u200b\u200b\npassword: \"banjo101\"\n\u200b\u200b\nrole: \"attendant\"\n\u200b\u200b\nstaName: Object { closed: true, syncErrorThrown: false, syncErrorThrowable: true, \u2026 }\n\u200b\u200b\nstationId: 1\n\u200b\u200b\nusername: \"attendant1@wamiri.com\"\n\n</code></pre>\n\n<p><strong>constant.ts</strong></p>\n\n<pre><code>export const usrs: User[] = [\n    { id: 1,  orgId: 1,   stationId: 1,   username: 'attendant1@wamiri.com',  password: 'banjo101',   name: 'Temidayo Abiodun',     img: 'assets/images/Pictures/faces-images/face_image1.png', role: Role.Attendant, authorities: [{authority: 'ROLE_ATTENDANT'} ]},\n    { id: 2,  orgId: 1,   stationId: 1,   username: 'attendant2@wamiri.com',  password: 'banjo102',   name: 'Oluwayemisi Adebayo',  img: 'assets/images/Pictures/faces-images/face_image2.png', role: Role.Attendant, authorities: [{authority: 'ROLE_ATTENDANT' }] },\n    { id: 3,  orgId: 1,   stationId: 1,   username: 'attendant3@wamiri.com',  password: 'banjo103',   name: 'Oluwole Afolabi',      img: 'assets/images/Pictures/faces-images/face_image3.png', role: Role.Attendant, authorities: [{authority: 'ROLE_ATTENDANT' }] },\n    { id: 4,  orgId: 1,   stationId: 1,   username: 'attendant4@wamiri.com',  password: 'banjo104',   name: 'Oluwafemi Afolayan',   img: 'assets/images/Pictures/faces-images/face_image4.png', role: Role.Attendant, authorities: [{authority: 'ROLE_ATTENDANT' }] },\n    { id: 5,  orgId: 2,   stationId: 5,   username: 'attendant5@wamiri.com',  password: 'banjo105',   name: 'Adebola Ayodele',      img: 'assets/images/Pictures/faces-images/face_image5.png', role: Role.Attendant, authorities: [{authority: 'ROLE_ATTENDANT'} ]}\n</code></pre>\n\n<p><strong>station.service.ts</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { Station } from '../_models/station';\nimport { DataSharingService } from './data-sharing.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StationService {\n  sta: Station;\n\n  constructor(\n    private dataSharing: DataSharingService,\n  ) { }\n\n  getStations() {\n    return this.dataSharing.httpGetAll('station');\n  }\n\n  getStation(id: any) {\n    return this.dataSharing.httpGetOne(id, 'station');\n  }\n\n  getStationsByOrg(id) {\n    return this.dataSharing.httpGetAllBy(id, 'orgId', 'station')\n    };\n}\n\n</code></pre>\n\n<p><strong>data-sharing.ts</strong></p>\n\n<pre><code>  public httpGetAll(owner: any) {\n    return this.http.get(`${this.url}/${owner}`, this.httpOptions).pipe(\n      catchError(e =&gt; {\n        throw new Error(e);\n      })\n    );\n  }\n\n  public httpGetOne(id: number, owner: any) {\n    return this.http.get(`${this.url}/${owner}/${id}`, this.httpOptions).pipe(\n      catchError(e =&gt; {\n        throw new Error(e + ' Please try again later.');\n      })\n    );\n  }\n\n  public httpGetAllBy(id: number, byId:string, owner: any) {\n      return new Promise((resolve, reject) =&gt; {\n       this.httpGetAll(owner)\n        .subscribe(data =&gt; {\n          let filterdData = Object.keys(data).map(function(key) {\n           return data[key].filter(x =&gt; x[byId] == id);\n          });\n          resolve(filterdData);\n        }, err =&gt; {\n          console.log(err.message);\n        });\n      });\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/liqWq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/liqWq.png\" alt=\"I want it to show the name, not the id\"></a></p>\n"}, {"tags": ["node.js", "typescript", "operating-system", "target-platform"], "comments": [{"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1577739647, "post_id": 59536758, "comment_id": 105243234, "body": "Not sure if this would help, but you could try wrapping <code>require(&#39;socketcan&#39;)</code> in a try/catch."}, {"owner": {"reputation": 141, "user_id": 3178486, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3604df470492648dbe976f02e0a211d?s=128&d=identicon&r=PG&f=1", "display_name": "user3178486", "link": "https://stackoverflow.com/users/3178486/user3178486"}, "reply_to_user": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1577793317, "post_id": 59536758, "comment_id": 105256460, "body": "I use this workaround, but... i don&#39;t know if its the proper way. I want to use es6 imports... to be consistent."}], "owner": {"reputation": 141, "user_id": 3178486, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3604df470492648dbe976f02e0a211d?s=128&d=identicon&r=PG&f=1", "display_name": "user3178486", "link": "https://stackoverflow.com/users/3178486/user3178486"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577739395, "creation_date": 1577739395, "question_id": 59536758, "link": "https://stackoverflow.com/questions/59536758/import-libs-depending-on-the-target-with-typescript", "title": "import libs depending on the target with Typescript", "body": "<p>I have a typescript project that need socketcan. Currently i use:</p>\n\n<pre><code>can = require('socketcan');\n</code></pre>\n\n<p>but\n1) its not an es6 like import (not really the problem)\n2) If i want to execute this code against a target who dont support Can Bus it says:</p>\n\n<pre><code>Error: Cannot find module './socketcan'\n</code></pre>\n\n<p>I really want to know how i cant configure imports depending on OS using typescript. I just want to fake socketcan when i run the code on OSX (my dev env.)</p>\n\n<p>What is the correct approach ?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12614644"}, "edited": false, "score": 0, "creation_date": 1577741602, "post_id": 59537060, "comment_id": 105243872, "body": "Unfortunately in my searches, they said that :( By selecting a file, I wanted to get the full path and then get a link to the physical folder in which the file was selected."}, {"owner": {"reputation": 1677, "user_id": 525690, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1l6Nj.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/525690/steve"}, "edited": false, "score": 0, "creation_date": 1577742572, "post_id": 59537060, "comment_id": 105244221, "body": "Yes, it is impossible with a file. If you want to upload a folder I think you can get some more information but I think the same restriction would ultimately apply."}], "tags": [], "owner": {"reputation": 1677, "user_id": 525690, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1l6Nj.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/525690/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1577741488, "creation_date": 1577741488, "answer_id": 59537060, "question_id": 59536737, "link": "https://stackoverflow.com/questions/59536737/get-path-from-selected-file/59537060#59537060", "title": "Get Path from Selected File", "body": "<p>Because of security concerns it is not possible to retrieve the file path. Also, it isn't really relevant information as generally the loaded file is to be viewed or sent to the server, neither thing requiring the full path to do.</p>\n\n<p>What is your use case for needing the full path?</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 12582842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aa241352fafca07ee3b5779eabe9e?s=128&d=identicon&r=PG&f=1", "display_name": "rkparmar", "link": "https://stackoverflow.com/users/12582842/rkparmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577755090, "creation_date": 1577755090, "answer_id": 59538548, "question_id": 59536737, "link": "https://stackoverflow.com/questions/59536737/get-path-from-selected-file/59538548#59538548", "title": "Get Path from Selected File", "body": "<p>All latest browser do not allow this for security reasons. Security stops for getting anything about client computer's file system.</p>\n\n<p>Practically you will not be using file path to restore/download file on client location so it isn't helpful.</p>\n\n<p>There is <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/File/mozFullPath\" rel=\"nofollow noreferrer\">File.mozFullPath</a> in Mozilla but it is not available.</p>\n\n<p><em>A privileged exension to the File interface, the mozFullPath property contains the full pathname of the represented file. This property is only available from within browser  code or old-style XPCOM-based Firefox extensions. It is not available to web content.</em></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12614644"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577755090, "creation_date": 1577739204, "question_id": 59536737, "link": "https://stackoverflow.com/questions/59536737/get-path-from-selected-file", "title": "Get Path from Selected File", "body": "<p>I need to get the full path of the file selected in the input.\nIs it possible to get this directory?</p>\n\n<p>I leave here the link of my input:<a href=\"https://stackblitz.com/edit/angular-zgpolh?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">link</a></p>\n\n<pre><code> &lt;div&gt;\n     &lt;input type=\"file\" (change)=\"showPreviewImage($event)\"&gt;\n     &lt;img [src]=\"localUrl\" *ngIf=\"localUrl\" class=\"imgPlaceholder\"&gt;\n    &lt;/div&gt;\n\n selectedFile:any;\n  currentMapDetails:any;\n  localUrl: any[];\n    constructor() { }\n    showPreviewImage(event: any) {\n        if (event.target.files &amp;&amp; event.target.files[0]) {\n            var reader = new FileReader();\n            reader.onload = (event: any) =&gt; {\n                this.localUrl = event.target.result;\n            }\n            reader.readAsDataURL(event.target.files[0]);\n        }\n    }\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["node.js", "angular", "typescript", "http"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577739141, "post_id": 59536681, "comment_id": 105243044, "body": "Are you sure it&#39;s the <i>client</i> that&#39;s the problem?"}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577742138, "post_id": 59536681, "comment_id": 105244057, "body": "@jonrsharpe I&#39;ve tested the three http services separately and they all return values just fine. Does that answer your question?  Thanks for reading!"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577742177, "post_id": 59536681, "comment_id": 105244070, "body": "And given that, and that any two are fine but three is a problem, why do you think the problem&#39;s at Angular&#39;s end?"}, {"owner": {"reputation": 26889, "user_id": 369792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdc806d0a8834e57b2d9309849dea8cd?s=128&d=identicon&r=PG", "display_name": "Jason Goemaat", "link": "https://stackoverflow.com/users/369792/jason-goemaat"}, "edited": false, "score": 0, "creation_date": 1577744558, "post_id": 59536681, "comment_id": 105244835, "body": "Sounds like any two of your requests will succeed, but the minute you add a third into the mix it will fail.  I can&#39;t think of anything in Angular that would cause that, could it be your server?  What do you see in the network tab of your browser&#39;s dev tools for the requests?  Can you try replacing one with <code>https:&#47;&#47;my-json-server.typicode.com&#47;typicode&#47;demo&#47;posts</code>?"}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577814391, "post_id": 59536681, "comment_id": 105263185, "body": "Fair question @jonrsharpe. I don&#39;t know who else to suspect in this case since the server is working fine. I&#39;m open to other ideas!"}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "reply_to_user": {"reputation": 26889, "user_id": 369792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdc806d0a8834e57b2d9309849dea8cd?s=128&d=identicon&r=PG", "display_name": "Jason Goemaat", "link": "https://stackoverflow.com/users/369792/jason-goemaat"}, "edited": false, "score": 0, "creation_date": 1577814704, "post_id": 59536681, "comment_id": 105263255, "body": "Nice suggestion @JasonGoemaat. When I replace all 3 urls with that json-server url, all three requests are successful.  I really thought it was the client, but this suggests it&#39;s my server."}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "edited": false, "score": 0, "creation_date": 1577815382, "post_id": 59536681, "comment_id": 105263463, "body": "Since all three requests work fine independently, it&#39;s puzzling why calling all three simultaneously fails."}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "edited": false, "score": 0, "creation_date": 1577818686, "post_id": 59536681, "comment_id": 105264330, "body": "@jonsharpe The issue is with my API.  I&#39;m using a library called tedious to make SQL queries from Node.  It is having concurrency issues (because TDS opens a new connection to the database for each request, it&#39;s throwing an error due to simultaneous requests).  It looks like the tedious-connection-pool flavor of tedious might be the ticket."}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "reply_to_user": {"reputation": 26889, "user_id": 369792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdc806d0a8834e57b2d9309849dea8cd?s=128&d=identicon&r=PG", "display_name": "Jason Goemaat", "link": "https://stackoverflow.com/users/369792/jason-goemaat"}, "edited": false, "score": 0, "creation_date": 1577818779, "post_id": 59536681, "comment_id": 105264348, "body": "@JasonGoemaat The issue is with my API. I&#39;m using a library called tedious to make SQL queries from Node. It is having concurrency issues (because TDS opens a new connection to the database for each request, it&#39;s throwing an error due to simultaneous requests). It looks like the tedious-connection-pool flavor of tedious might be the ticket"}, {"owner": {"reputation": 26889, "user_id": 369792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdc806d0a8834e57b2d9309849dea8cd?s=128&d=identicon&r=PG", "display_name": "Jason Goemaat", "link": "https://stackoverflow.com/users/369792/jason-goemaat"}, "edited": false, "score": 0, "creation_date": 1577978158, "post_id": 59536681, "comment_id": 105299178, "body": "Is that the mssql package?  I&#39;ve had trouble with that also, getting an error that the global connection was open.  If you can post a question on that I could answer with my solution...  It was weird how a &#39;connection pool&#39; could only have one connection :)"}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "reply_to_user": {"reputation": 26889, "user_id": 369792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdc806d0a8834e57b2d9309849dea8cd?s=128&d=identicon&r=PG", "display_name": "Jason Goemaat", "link": "https://stackoverflow.com/users/369792/jason-goemaat"}, "edited": false, "score": 0, "creation_date": 1578001659, "post_id": 59536681, "comment_id": 105308494, "body": "Hi @JasonGoemaat.  I do have a question concerning this issue: <a href=\"https://stackoverflow.com/questions/59536681/how-to-do-make-2-independent-parallel-http-requests-in-angular-2\" title=\"how to do make 2 independent parallel http requests in angular 2\">stackoverflow.com/questions/59536681/&hellip;</a>"}, {"owner": {"reputation": 26889, "user_id": 369792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdc806d0a8834e57b2d9309849dea8cd?s=128&d=identicon&r=PG", "display_name": "Jason Goemaat", "link": "https://stackoverflow.com/users/369792/jason-goemaat"}, "edited": false, "score": 0, "creation_date": 1578006075, "post_id": 59536681, "comment_id": 105309886, "body": "If the problem is with sql connections on the server and you&#39;re using the <code>mssql</code> package, try creating a new connection pool for each request and closing it:  <code>js     const pool = new sql.ConnectionPool(config);     const connect = await pool.connect();     try {         const request = await pool.request();         const result = await request.query(query);         pool.close();         return result;     } catch (err) {         pool.close();     } </code>  Creating a global connection pool and awaiting what is returned from connect() each time might work also."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "edited": false, "score": 0, "creation_date": 1577814266, "post_id": 59537304, "comment_id": 105263157, "body": "Thanks @mwilson. Good question. The dept query param is optional, and is used to filter the results (blank returns all departments). I would see the need for using Promises if I wanted to &#39;wait&#39; for these http requests to complete before invoking the next step, but that isn&#39;t the case here. I&#39;m just getting options for drop downs onInit.  If using Promise.all solves it, that&#39;s good, but I don&#39;t understand why it wouldn&#39;t work without it?  Do you?  Thanks!"}, {"owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "edited": false, "score": 0, "creation_date": 1577818691, "post_id": 59537304, "comment_id": 105264331, "body": "The issue is with my API.  I&#39;m using a library called tedious to make SQL queries from Node.  It is having concurrency issues (because TDS opens a new connection to the database for each request, it&#39;s throwing an error due to simultaneous requests).  It looks like the tedious-connection-pool flavor of tedious might be the ticket."}], "tags": [], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1577743550, "last_edit_date": 1577743550, "creation_date": 1577743135, "answer_id": 59537304, "question_id": 59536681, "link": "https://stackoverflow.com/questions/59536681/how-to-do-make-2-independent-parallel-http-requests-in-angular-2/59537304#59537304", "title": "How to do make &gt;2 independent / parallel http requests in Angular 2", "body": "<p>The error you're receiving looks like a bad request. Specifically, I think you're trying to call the <code>departments</code> endpoint without a required dept query param. (This is hard to determine without seeing your server side code)</p>\n\n<p>Your error:</p>\n\n<blockquote>\n  <p>Http failure response for\n  <strong><a href=\"http://my-corporate-url:3001/db/depts?deptName=\" rel=\"nofollow noreferrer\">http://my-corporate-url:3001/db/depts?deptName=</a></strong>: 0 Unknown Error</p>\n</blockquote>\n\n<p>If you set a correct value for <code>this.dept</code> before invoking your <code>departments</code> endpoint, do you get it to work?</p>\n\n<p>I would also recommend setting a breakpoint in the server code to see what the department's endpoint is receiving from the client. It could be that your server is throwing an exception because you're immediately trying to do something with the query param <code>deptName</code> but it's empty so your api barfs.</p>\n\n<p><em>Keep in mind, in JavaScript, an empty string (<code>''</code>) is a falsy value.</em></p>\n\n<p>Since you're calling all your endpoints at once like this:</p>\n\n<pre><code>  this.queryGroupNames();\n  this.queryBBB();\n  this.queryDepts();\n</code></pre>\n\n<p>You will need to chain those together if the previous call needs to pass data to the following call. If that isn't the case, and you just want to execute all requests at once, I would recommend using <code>Promise.all</code></p>\n\n<pre><code>Promise.all([\n  this._nodeHTTPService.getSDMGroups(),\n  this._nodeHTTPService.queryBranches(this.loc),\n  this._nodeHTTPService.getDepts(this.dept)\n]);\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 9041811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuQd2.jpg?s=128&g=1", "display_name": "mike_butak", "link": "https://stackoverflow.com/users/9041811/mike-butak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577743550, "creation_date": 1577738839, "last_edit_date": 1577742351, "question_id": 59536681, "link": "https://stackoverflow.com/questions/59536681/how-to-do-make-2-independent-parallel-http-requests-in-angular-2", "title": "How to do make &gt;2 independent / parallel http requests in Angular 2", "body": "<p><strong>Basic Situation:</strong>\nI am building a form in my app built with Angular CLI.  The form has three select boxes containing long lists of options.  These options are populated via http requests to a server.  I invoke three methods in ngOnInit to make these http requests (see code below).  No matter what sequence I call them in, only the first two requests ever complete.  </p>\n\n<p>Eventually the console will show the following error for the third request:</p>\n\n<pre><code>HttpErrorResponse {headers: HttpHeaders, status: 0, statusText: \"Unknown Error\", url: \"http://my-corporate-url:3001/db/depts?deptName=\", ok: false, \u2026}\nheaders: HttpHeaders {normalizedNames: Map(0), lazyUpdate: null, headers: Map(0)}\nstatus: 0\nstatusText: \"Unknown Error\"\nurl: \"http://my-corporate-url:3001/db/depts?deptName=\"\nok: false\nname: \"HttpErrorResponse\"\nmessage: \"Http failure response for http://my-corporate-url:3001/db/depts?deptName=: 0 Unknown Error\"\nerror: ProgressEvent {isTrusted: true, lengthComputable: false, loaded: 0, total: 0, type: \"error\", \u2026}\n__proto__: HttpResponseBase\n</code></pre>\n\n<p>I could \"chain\" the three http requests to be called sequentially, but I want the http services to be reusable in other forms I build which will have the same select box input elements.</p>\n\n<p><strong>Yes I already Read:</strong>\nThere are a few Stackoverflow questions out there similar to this one (especially <a href=\"https://stackoverflow.com/questions/44864803/handle-multiple-synchronous-independent-http-request-angular-2\">this question</a>), but none of them address this specific issue of being able to make only 2 http requests.  There is mention of using mergeMap and forkJoin, but these appear to designed for calling an array of identical requests.</p>\n\n<p><strong>My Code:</strong></p>\n\n<p>The component which is making the requets:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import { Component, OnInit } from '@angular/core';\r\nimport { NodeHTTPService } from '../node-http.service';\r\n\r\n@Component({\r\n  ...\r\n})\r\n\r\nexport class NewServiceDeskGroupComponent implements OnInit {\r\n  existingGroups;\r\n  deptArray;\r\n  locArray;\r\n  group: string = \"\";\r\n  dept: string = \"\";\r\n  loc: string = \"\";\r\n\r\n  constructor(private _nodeHTTPService: NodeHTTPService) { }\r\n\r\n  ngOnInit() {\r\n      this.queryGroupNames();\r\n      this.queryBBB();\r\n      this.queryDepts();\r\n  }\r\n\r\n  queryGroupNames() {\r\n    console.log('begin querying for groups')\r\n    this._nodeHTTPService.getSDMGroups().subscribe(\r\n      data =&gt; {this.existingGroups = data},\r\n      err =&gt; console.log(err),\r\n      () =&gt; console.log('done loading groups')\r\n    );\r\n  }\r\n\r\n  queryBBB() {\r\n    console.log('begin querying for branches')\r\n    this._nodeHTTPService.queryBranches(this.loc).subscribe(\r\n      data =&gt; {this.locArray = data},\r\n      err =&gt; console.log(err),\r\n      () =&gt; console.log('done loading branches')\r\n    );\r\n  }\r\n\r\n  queryDepts() {\r\n    console.log('begin querying for departments')\r\n    this._nodeHTTPService.getDepts(this.dept).subscribe(\r\n      data =&gt; {this.deptArray = data},\r\n      err =&gt; console.log(err),\r\n      () =&gt; console.log('done loading departments')\r\n    );\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My node-http.service.ts file:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({ 'Content-Type' : 'application/json' })\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class NodeHTTPService {\r\n  constructor(private http: HttpClient) { }\r\n  \r\n  getSDMGroups() {\r\n    let groups = this.http.get('http://my-corporate-url:3001/db/sdm-groups')\r\n    return groups;  \r\n  }\r\n\r\n  queryBranches(i) {\r\n    let bbbs = this.http.get(`http://my-corporate-url:3001/db/bbb-full-service?bbb=${i}`);\r\n    return bbbs;\r\n  }\r\n\r\n  getDepts(i) {\r\n    if (!i) { i = ''};\r\n    let depts = this.http.get(`http://my-corporate-url:3001/db/depts?deptName=${i}`);\r\n    return depts;\r\n  }\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>What I tried:</strong>\nI tried commenting out each of the three methods invoked in ngOnInit to see if one of them is erring out. I've also tried shuffling the order of the three method invocations.  In every scenario, the browser can successfully execute any 2 of the 3 methods, but the 3rd never completes.  </p>\n\n<p>Any pointers?  Thank you!</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 1, "creation_date": 1577738472, "post_id": 59536537, "comment_id": 105242834, "body": "your property names don&#39;t match with the received data. Either change your backend or cell templates : <code>{{row.userPhoneId}}</code> -&gt; <code>{{row.user_PHONE_ID}}</code>"}, {"owner": {"reputation": 14468, "user_id": 393805, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/44219d6c6ee38c27c9e2e001eae8659e?s=128&d=identicon&r=PG&f=1", "display_name": "tftd", "link": "https://stackoverflow.com/users/393805/tftd"}, "edited": false, "score": 0, "creation_date": 1577738618, "post_id": 59536537, "comment_id": 105242880, "body": "Yep - <code>&lt;td mat-cell *matCellDef=&quot;let row&quot;&gt;{{row.creationTs}}&lt;&#47;td&gt;</code> this should actually be <code>&lt;td mat-cell *matCellDef=&quot;let row&quot;&gt;{{row.creation_TS}}&lt;&#47;td&gt;</code> (and the other columns are incorrect as well). Also, your interface is incorrect as well."}, {"owner": {"reputation": 1, "user_id": 10078590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19d1f5c5ebfcf9a1dacaddfc495f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "learnerjaz", "link": "https://stackoverflow.com/users/10078590/learnerjaz"}, "reply_to_user": {"reputation": 14468, "user_id": 393805, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/44219d6c6ee38c27c9e2e001eae8659e?s=128&d=identicon&r=PG&f=1", "display_name": "tftd", "link": "https://stackoverflow.com/users/393805/tftd"}, "edited": false, "score": 0, "creation_date": 1577739408, "post_id": 59536537, "comment_id": 105243141, "body": "I changed the interface and the html with correct property names but still its not showing the data.@eldar @tftd"}, {"owner": {"reputation": 14468, "user_id": 393805, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/44219d6c6ee38c27c9e2e001eae8659e?s=128&d=identicon&r=PG&f=1", "display_name": "tftd", "link": "https://stackoverflow.com/users/393805/tftd"}, "edited": false, "score": 0, "creation_date": 1577739881, "post_id": 59536537, "comment_id": 105243334, "body": "Please provide the <code>full</code> example next time. You have an <code>ngIf</code> which means that the container is not initialized until the data is retrieved. <a href=\"https://stackoverflow.com/questions/50767580/mat-filtering-mat-sort-not-work-correctly-when-use-ngif-in-mat-table-parent\">mat-filtering/mat-sort not work correctly when use ngif in mat-table parent</a>"}, {"owner": {"reputation": 1, "user_id": 10078590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19d1f5c5ebfcf9a1dacaddfc495f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "learnerjaz", "link": "https://stackoverflow.com/users/10078590/learnerjaz"}, "edited": false, "score": 0, "creation_date": 1577763066, "post_id": 59536537, "comment_id": 105248313, "body": "without ngif too its not displaying data.when i replace service call with static data it works and mattable gets populated.But with service call its not.Please look at the code and advice.I have updated the latest code."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10078590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19d1f5c5ebfcf9a1dacaddfc495f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "learnerjaz", "link": "https://stackoverflow.com/users/10078590/learnerjaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1577810593, "creation_date": 1577810593, "answer_id": 59546596, "question_id": 59536537, "link": "https://stackoverflow.com/questions/59536537/angular-matable-not-showing-data/59546596#59546596", "title": "Angular MATABLE not showing data", "body": "<p>service should return an array of objects to map to MATTABLE datasource  correctly.</p>\n\n<p><strong>Below json  was not mapped correctly to  mattable.</strong>\n{\"user_PHONE_ID\":115451,\"phone_TYPE_CD\":\"DAY   \",\"phone_NBR\":\"1111111111\",\"user_ID\":115821,\"creation_TS\":\"2011-04-20T15:53:32.313+0000\",\"last_MODIFIED_TS\":null}</p>\n\n<p><strong>But this worked</strong>\n<strong>[</strong>{\"user_PHONE_ID\":115451,\"phone_TYPE_CD\":\"DAY   \",\"phone_NBR\":\"1111111111\",\"user_ID\":115821,\"creation_TS\":\"2011-04-20T15:53:32.313+0000\",\"last_MODIFIED_TS\":null}<strong>]</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 10078590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19d1f5c5ebfcf9a1dacaddfc495f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "learnerjaz", "link": "https://stackoverflow.com/users/10078590/learnerjaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577810593, "creation_date": 1577737856, "last_edit_date": 1577763259, "question_id": 59536537, "link": "https://stackoverflow.com/questions/59536537/angular-matable-not-showing-data", "title": "Angular MATABLE not showing data", "body": "<p><a href=\"https://i.stack.imgur.com/bAvUO.png\" rel=\"nofollow noreferrer\">UI shows datasource.filtereddata but mat table is not getting populated</a></p>\n\n<p><strong>please see the screen shot in the link.</strong>\nMat table is not showing the data,below are the html and typescript details.could some one look into it?\njson with data is getting displayed on the screen when i do datasource.filterdata..but table is not getting mapped to data.Console also shows the data.\nconsole.log(this.dataSource);\n  console.log(customers)</p>\n\n<p>Html  </p>\n\n<pre><code>&lt;mat-card *ngIf=\"!dataSource?.filteredData\" style=\"margin-bottom: 5px\"&gt;\n    &lt;div&gt;&lt;span&gt;ZERO RESULT&lt;/span&gt;&lt;/div&gt;\n&lt;/mat-card&gt;\n\n&lt;mat-card *ngIf=\"dataSource?.filteredData\"&gt;\n  &lt;table mat-table [dataSource]=\"dataSource\"  matSort&gt;\n\n    &lt;!-- Id Column --&gt;\n    &lt;ng-container matColumnDef=\"user_PHONE_ID\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;phone Id&lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt;{{element.user_PHONE_ID}}&lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;!-- Name Column --&gt;\n    &lt;ng-container matColumnDef=\"phone_TYPE_CD\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;Phone type cd&lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt;{{element.phone_TYPE_CD}}&lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;ng-container matColumnDef=\"last_MODIFIED_TS\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;last MODIFIED TS&lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt;{{element.last_MODIFIED_TS}}&lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;ng-container matColumnDef=\"phone_NBR\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;Phone nbr&lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt;{{element.phone_NBR}}&lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;ng-container matColumnDef=\"user_ID\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;Phone type cd&lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt;{{element.user_ID}}&lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;ng-container matColumnDef=\"creation_TS\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;creation ts&lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt;{{element.creation_TS}}&lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;tr mat-header-row *matHeaderRowDef=\"displayedColumns\"&gt;&lt;/tr&gt;\n    &lt;tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"&gt;&lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/mat-card&gt;\n\n   &lt;mat-paginator #paginator\n      [length]=\"dataSource?.data.length\"\n      [pageIndex]=\"0\"\n      [pageSize]=\"5\"\n      [pageSizeOptions]=\"[5,10,25, 50, 100, 250]\"&gt;\n  &lt;/mat-paginator&gt;  \n</code></pre>\n\n<p>Typescript</p>\n\n<pre><code>import { AfterViewInit, Component, OnInit, ViewChild } from '@angular/core';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTable, MatTableDataSource } from '@angular/material/table';\nimport { CustomerlistService } from './services/customerlist.service';\nimport { Customer } from './models/customer';\n\n// const ELEMENT_DATA: Customer[] = [\n//   {lastModifiedTs: \"1\",    phoneNbr: \"1\",    userPhoneId: \"1\",    phoneTypeCd: \"1\",    userId: \"1\",    creationTs: \"1\" },\n//   {lastModifiedTs: \"2\",    phoneNbr: \"12\",    userPhoneId: \"12\",    phoneTypeCd: \"12\",    userId: \"12\",    creationTs: \"12\" },];\n\n@Component({\n  selector: 'app-customer-list',\n  templateUrl: './customer-list.component.html',\n  styleUrls: ['./customer-list.component.css']\n})\nexport class CustomerListComponent implements  OnInit {\n  @ViewChild(MatPaginator, {static: false}) paginator: MatPaginator;\n  @ViewChild(MatSort, {static: false}) sort: MatSort;\n\ndataSource= new MatTableDataSource&lt;Customer&gt;();;\ncustomer;\n\ncustomers: Customer[];\n\n/** Columns displayed in the table. Columns IDs can be added, removed, or reordered. */\ndisplayedColumns: string[] = ['user_PHONE_ID', 'phone_TYPE_CD','last_MODIFIED_TS','phone_NBR','user_ID','creation_TS'];\n\nconstructor(private customerListService: CustomerlistService){}\n\nngOnInit() {\nthis.customerListService.getUserPhone()\n.subscribe((customers : Customer[])=&gt; {\n  this.customers = customers;\n  this.dataSource = new MatTableDataSource(customers)\n  console.log(this.dataSource);\n  console.log(customers);});  \n}\n}\n</code></pre>\n\n<p><strong>Interface</strong></p>\n\n<pre><code>export interface Customer {\n    last_MODIFIED_TS: string;\n    phone_NBR: string;\n    user_PHONE_ID: string;\n    phone_TYPE_CD: string;  \n    user_ID: string;\n    creation_TS: string;  \n}\n</code></pre>\n\n<p><strong>service</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError, BehaviorSubject } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { Customer } from '../models/customer';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CustomerlistService {\n\n  private _customers: BehaviorSubject&lt;Customer[]&gt;;\n\n  private dataStore : {\n    customer : Customer[]\n  }\n  private userPhoneUrl = 'http://localhost:8080/v1/userphones/115451';\n\n  constructor(private http: HttpClient) {\n    this.dataStore = { customer: [] };\n    this._customers = new BehaviorSubject&lt;Customer[]&gt;([]);\n   }\n\n   get customers(): Observable&lt;Customer[]&gt;{\n     return this._customers.asObservable();\n   }\n\n  getUserPhone() {\n    return this.http.get&lt;Customer[]&gt;(this.userPhoneUrl);\n\n  } \n\n\n  private handleError(err: HttpErrorResponse){\n    let errorMessage = '';\n    if (err.error instanceof ErrorEvent){\n      errorMessage = 'An error occured: ${err.error.message}';\n    } else {\n      errorMessage = 'Server returned code: ${err.status}, error message is:${err.message}';\n    }\n    console.error(errorMessage);\n    return throwError(errorMessage);\n  }                                          \n}\n</code></pre>\n"}, {"tags": ["typescript", "assertion"], "answers": [{"comments": [{"owner": {"reputation": 1497, "user_id": 6202210, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/225270517862151/picture?type=large", "display_name": "s1n7ax", "link": "https://stackoverflow.com/users/6202210/s1n7ax"}, "edited": false, "score": 0, "creation_date": 1577738387, "post_id": 59536454, "comment_id": 105242807, "body": "Typescript complained about AssertionError parameters. Following worked new AssertionError({ message: &#39;Expected &#39;val&#39; to be not null&#39; });"}], "tags": [], "owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "is_accepted": true, "score": 1, "last_activity_date": 1577799095, "last_edit_date": 1577799095, "creation_date": 1577737426, "answer_id": 59536454, "question_id": 59536319, "link": "https://stackoverflow.com/questions/59536319/how-to-declare-is-not-null-type-assertion-using-typescript-3-7-assertion-funct/59536454#59536454", "title": "How to declare &quot;is not null&quot; type assertion using Typescript 3.7 Assertion Functions", "body": "<p>This is indicated at the bottom of the <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions\" rel=\"nofollow noreferrer\">Assertion Functions</a> section of the What's New in 3.7, and uses the <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#nonnullablet\" rel=\"nofollow noreferrer\">NonNullable</a> utility class.</p>\n\n<pre><code>function assertIsDefined&lt;T&gt;(val: T): asserts val is NonNullable&lt;T&gt; {\n    if (val === undefined || val === null) {\n        throw new Error(\n            `Expected 'val' to be defined, but received ${val}`\n        );\n    }\n}\n</code></pre>\n\n<p>Note: the example on the Typescript site uses <code>AssertionError</code>, but the example does not work as-is in 3.7.2, so changing it to a plain <code>Error</code>.</p>\n"}], "owner": {"reputation": 1497, "user_id": 6202210, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/225270517862151/picture?type=large", "display_name": "s1n7ax", "link": "https://stackoverflow.com/users/6202210/s1n7ax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 59536454, "answer_count": 1, "score": 1, "last_activity_date": 1577799095, "creation_date": 1577736550, "question_id": 59536319, "link": "https://stackoverflow.com/questions/59536319/how-to-declare-is-not-null-type-assertion-using-typescript-3-7-assertion-funct", "title": "How to declare &quot;is not null&quot; type assertion using Typescript 3.7 Assertion Functions", "body": "<p>Currently I'm using following assertion function.</p>\n\n<pre><code>// declare\ndeclare function assert(value: unknown): asserts value;\n\n// use\nassert(topPort !== null);\nassert(bottomPort !== null);\nassert(leftPort !== null);\nassert(rightPort !== null);\n</code></pre>\n\n<p>I know it's possible to check <strong>is</strong> <code>null</code> by following,</p>\n\n<pre><code>declare function isNull(value: unknown): asserts value is null\nlet a = null;\nisNull(a)\n</code></pre>\n\n<p>But, how do I check <code>value</code> <strong>is not</strong> <code>null</code></p>\n\n<pre><code>// this `is not` invalid syntax\ndeclare function isNotNull(value: unknown): asserts value is not null\n</code></pre>\n"}, {"tags": ["angular", "typescript", "asynchronous", "promise", "async-await"], "answers": [{"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577737821, "post_id": 59536359, "comment_id": 105242625, "body": "\ud83e\udd14 <code>getFileCount</code> don&#39;t return an observable this will not work ,can you check your answer ?"}, {"owner": {"reputation": 509, "user_id": 10270970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kS3sgcSnMuM/AAAAAAAAAAI/AAAAAAAAAHA/RENLzmxiPpY/photo.jpg?sz=128", "display_name": "Leandro Hern&#225;ndez Mira", "link": "https://stackoverflow.com/users/10270970/leandro-hern%c3%a1ndez-mira"}, "reply_to_user": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577737990, "post_id": 59536359, "comment_id": 105242687, "body": "@MuhammedAlbarmavi Your solution is exactly the same as mine, it is copy and paste. Check your solution. getFileCount does return an observable."}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577738075, "post_id": 59536359, "comment_id": 105242715, "body": "at the first you was try to solve this by using async await ,that why I menthion another way \ud83d\ude42\ud83d\ude42"}, {"owner": {"reputation": 509, "user_id": 10270970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kS3sgcSnMuM/AAAAAAAAAAI/AAAAAAAAAHA/RENLzmxiPpY/photo.jpg?sz=128", "display_name": "Leandro Hern&#225;ndez Mira", "link": "https://stackoverflow.com/users/10270970/leandro-hern%c3%a1ndez-mira"}, "reply_to_user": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577738223, "post_id": 59536359, "comment_id": 105242759, "body": "@MuhammedAlbarmavi No, I proposed 2 solutions, Eduard worked the 2nd. That&#39;s why I deleted the other one, but I&#39;m sure it worked."}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577738367, "post_id": 59536359, "comment_id": 105242798, "body": "maybe I don&#39;t see that don&#39;t worry I will remove mine , we don&#39;t need to confuse other people when the try to solve their problem in future \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 509, "user_id": 10270970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kS3sgcSnMuM/AAAAAAAAAAI/AAAAAAAAAHA/RENLzmxiPpY/photo.jpg?sz=128", "display_name": "Leandro Hern&#225;ndez Mira", "link": "https://stackoverflow.com/users/10270970/leandro-hern%c3%a1ndez-mira"}, "is_accepted": true, "score": 2, "last_activity_date": 1577738016, "last_edit_date": 1577738016, "creation_date": 1577736819, "answer_id": 59536359, "question_id": 59536310, "link": "https://stackoverflow.com/questions/59536310/how-do-i-return-a-value-after-promise-is-resolved-angular-typescript/59536359#59536359", "title": "How do I return a value after promise is resolved Angular Typescript?", "body": "<p>The problem occurs because the call to the this.getFileCount () method runs asynchronously, that is, it does not wait for an answer and the process continues, so you must wait for its response.</p>\n\n<p>Try this:</p>\n\n<pre><code>  getFileCount() {\n    return this.http.get&lt;boolean&gt;(this.BaseURL + '/Count/File?Name=' + this.formData.Name);\n  }\n\n  insertRecord(form: NgForm) {\n    this.getFileCount().subscribe(result =&gt; {\n      this.FileCount = result;\n      console.log(this.FileCount);\n\n      if (this.FileCount == true) {\n        this.toastr.warning('Submitted failed', 'There is another file with the name: \"' + this.formData.Name + '\"');\n      }\n      else {\n        this.postFile().subscribe(\n          res =&gt; {\n            this.toastr.success('Submitted successfully', 'File Creation Complete');\n            this.refreshList();\n          },\n          (err) =&gt; {\n            console.log(err);\n          }\n        );\n      }\n    });\n\n  }\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 12388934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42b589a33966562bf9f1bf32e65514d?s=128&d=identicon&r=PG&f=1", "display_name": "Eduard", "link": "https://stackoverflow.com/users/12388934/eduard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 59536359, "answer_count": 1, "score": 1, "last_activity_date": 1577738448, "creation_date": 1577736506, "last_edit_date": 1577738448, "question_id": 59536310, "link": "https://stackoverflow.com/questions/59536310/how-do-i-return-a-value-after-promise-is-resolved-angular-typescript", "title": "How do I return a value after promise is resolved Angular Typescript?", "body": "<p>I am using Angular and Typescript to make an validation when i insert a value into a SQL database it check if the value is already in the database table. I get a response from an ASP .NET CORE API, if the value is already in the table database server will return <strong>true</strong>.</p>\n\n<p>The response is just this:</p>\n\n<pre><code>true\n</code></pre>\n\n<p>For example,i already have value \"1\" in database table then i am trying to insert value \"1\" but it will insert it into the table, when i try again to insert the value it will stop and will not let me insert it. If i refresh the page the same process happen even if there are >10 values of \"1\" in the database table. What can i use to fix this issue and how?</p>\n\n<pre><code>FileCount:boolean;\n</code></pre>\n\n<pre><code>getFileCount() {\n        this.http.get&lt;boolean&gt;(this.BaseURL + '/Count/File?Name=' + this.formData.Name)\n        .subscribe(\n            result =&gt; {\n                 this.FileCount = result;\n                 console.log(this.FileCount);\n            }\n        );\n    }\n</code></pre>\n\n<pre><code>insertRecord(form: NgForm) {\n    this.getFileCount();\n        if (this.FileCount == true) {\n            this.toastr.warning('Submitted failed', 'There is another file with the name: \"' + this.formData.Name + '\"');\n        }\n        else {\n            this.postFile().subscribe(\n                res =&gt; {\n                    this.toastr.success('Submitted successfully', 'File Creation Complete');\n                    this.refreshList();\n                },\n                (err) =&gt; {\n                    console.log(err);\n                }\n            );\n        }\n    }\n</code></pre>\n\n<pre><code>postFile() {\n        return this.http.post(this.BaseURL + '/File', this.formData);\n    }\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1063, "user_id": 5021398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fa675e614f18d04d7b7a394fc8b9986a?s=128&d=identicon&r=PG", "display_name": "thousight", "link": "https://stackoverflow.com/users/5021398/thousight"}, "is_accepted": false, "score": 2, "last_activity_date": 1577742657, "creation_date": 1577742657, "answer_id": 59537222, "question_id": 59536247, "link": "https://stackoverflow.com/questions/59536247/typescript-cannot-find-module-imported/59537222#59537222", "title": "Typescript Cannot find module imported", "body": "<p>Looks like I found it, it was because in package.json I added <code>\"type\": \"module\"</code></p>\n"}], "owner": {"reputation": 1063, "user_id": 5021398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fa675e614f18d04d7b7a394fc8b9986a?s=128&d=identicon&r=PG", "display_name": "thousight", "link": "https://stackoverflow.com/users/5021398/thousight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1781, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1577742657, "creation_date": 1577736063, "question_id": 59536247, "link": "https://stackoverflow.com/questions/59536247/typescript-cannot-find-module-imported", "title": "Typescript Cannot find module imported", "body": "<p>I saw a lot of related questions, but none of the answers seem to work for my scenario. I have 2 files in a node.js app (node version v13.5.0), <code>start.ts</code> and <code>app.ts</code> at root, and they look like this:</p>\n\n<p>start.ts:</p>\n\n<pre><code>import app from './app';\n\nconsole.log(app);\n</code></pre>\n\n<p>app.ts:</p>\n\n<pre><code>const app = {};\nexport default app;\n</code></pre>\n\n<p>tsconfig.json:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"allowJs\": true,\n    \"baseUrl\": \".\",\n    \"esModuleInterop\": true,\n    \"lib\": [\"esnext\", \"es2015\"],\n    \"module\": \"commonjs\",\n    \"moduleResolution\": \"node\",\n    \"outDir\": \"./build\",\n    \"pretty\": true,\n    \"resolveJsonModule\": true,\n    \"sourceMap\": true,\n    \"target\": \"es6\"\n  },\n  \"include\": [\"start.ts\", \"app.ts\", \"src/**/*.ts\"],\n  \"exclude\": [\"node_modules\", \"build\"]\n}\n</code></pre>\n\n<p>But when I tried to use <code>ts-node</code> to run <code>start.ts</code>, I'm getting this error:</p>\n\n<pre><code>Error: Cannot find module /&lt;project_directory&gt;/app imported from /&lt;project_directory&gt;/start.ts\n    at Loader.resolve [as _resolve] (internal/modules/esm/default_resolve.js:96:13)\n    at Loader.resolve (internal/modules/esm/loader.js:72:33)\n    at Loader.getModuleJob (internal/modules/esm/loader.js:156:40)\n    at ModuleWrap.&lt;anonymous&gt; (internal/modules/esm/module_job.js:42:40)\n    at link (internal/modules/esm/module_job.js:41:36)\n</code></pre>\n\n<p>I've also tried adding the file extension to the import, but then it gets me the Unknown file extension \".ts\" error. And it doesn't look like I will need typings since app is a simple object, but how come it is having trouble finding the module? Thanks.</p>\n"}, {"tags": ["angular", "typescript", "firebase", "rxjs"], "comments": [{"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 1, "creation_date": 1577735613, "post_id": 59536073, "comment_id": 105241849, "body": "Try <code>switchMap()</code> it will makes API call and request new observable each time input language is changed."}, {"owner": {"reputation": 694, "user_id": 2091583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heLY5.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/2091583/freddy"}, "edited": false, "score": 1, "creation_date": 1577735925, "post_id": 59536073, "comment_id": 105241962, "body": "Why do you have <code>take(1)</code>? It sounds like you do want to listen for more than just the first event"}, {"owner": {"reputation": 2097, "user_id": 4756173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=128&d=identicon&r=PG", "display_name": "Philippe Fanaro", "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"}, "reply_to_user": {"reputation": 694, "user_id": 2091583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heLY5.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/2091583/freddy"}, "edited": false, "score": 0, "creation_date": 1577736983, "post_id": 59536073, "comment_id": 105242321, "body": "@Freddy, well spotted. That was probably a reminiscent of my many attemps at making this work."}], "answers": [{"comments": [{"owner": {"reputation": 2097, "user_id": 4756173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=128&d=identicon&r=PG", "display_name": "Philippe Fanaro", "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"}, "edited": false, "score": 0, "creation_date": 1577741661, "post_id": 59536991, "comment_id": 105243889, "body": "A little bit before you posted this answer I had just managed to make it work here. I used <code>pipe</code> and <code>map</code> to have the language observable return me another observable every time the language changes; then I subscribe to it, and, inside, I subscribe to the returned observable. (Sounds more complicated than the code itself...) Do you see any problems with my solution? (I do unsubscribe to both subscriptions on <code>ngOnDestroy</code>.)"}, {"owner": {"reputation": 694, "user_id": 2091583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heLY5.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/2091583/freddy"}, "reply_to_user": {"reputation": 2097, "user_id": 4756173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=128&d=identicon&r=PG", "display_name": "Philippe Fanaro", "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"}, "edited": false, "score": 1, "creation_date": 1577742342, "post_id": 59536991, "comment_id": 105244130, "body": "Nothing major, that should be fine. Only concern I&#39;d have is if it was possible for the user to change the language twice and the second Observable finishes before the first. You could end up with the first&#39;s data in the end. But that scenario is probably unlikely anyway."}, {"owner": {"reputation": 2097, "user_id": 4756173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=128&d=identicon&r=PG", "display_name": "Philippe Fanaro", "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"}, "edited": false, "score": 0, "creation_date": 1577743699, "post_id": 59536991, "comment_id": 105244591, "body": "I&#39;m going to accept your answer, but also post mine later."}], "tags": [], "owner": {"reputation": 694, "user_id": 2091583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heLY5.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/2091583/freddy"}, "is_accepted": true, "score": 2, "last_activity_date": 1577758307, "last_edit_date": 1577758307, "creation_date": 1577740954, "answer_id": 59536991, "question_id": 59536073, "link": "https://stackoverflow.com/questions/59536073/how-to-nest-multiple-observables-subscriptions/59536991#59536991", "title": "How to Nest Multiple Observables/Subscriptions", "body": "<p>I think there's valid solutions for you using any of <code>concat</code>, <code>switchMap</code>, <code>merge</code>, <code>forkJoin</code>, etc. It really depends on the small things that you want out of them such as concurrency. I put together a little Stackblitz example using <code>forkJoin</code> here: <a href=\"https://stackblitz.com/edit/angular-xyf8a6\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-xyf8a6</a></p>\n\n<p>You can see in the console logs the different timings of each inner <code>Observable</code> to verify that using <code>forkJoin</code> has it so that it'll only take as long as the slowest observable.</p>\n\n<p>And the subscription as I have it:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.langChanged\n  .subscribe(newLang =&gt; {\n    console.log(`language changed ${newLang}`);\n    this.cancelLangChange.next();\n    forkJoin(\n      this.getUserName(newLang), \n      this.getUserBio(newLang), \n      this.getUserCreationDate(newLang)\n    )\n      .pipe(takeUntil(this.cancelLangChange))\n      .subscribe(([username, bio, userCreationDate]) =&gt; {\n        this.aboutMe.username = username;\n        this.aboutMe.bio = bio;\n        this.aboutMe.userCreationDate = userCreationDate;\n      });\n  });\n</code></pre>\n\n<p>I also added a second <code>Subject</code> <code>cancelLangChange</code> which is meant to cancel the <code>forkJoin</code> subscriptions if a user selects another language while it is still loading the first change.</p>\n"}, {"tags": [], "owner": {"reputation": 2097, "user_id": 4756173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=128&d=identicon&r=PG", "display_name": "Philippe Fanaro", "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1577744332, "creation_date": 1577744332, "answer_id": 59537451, "question_id": 59536073, "link": "https://stackoverflow.com/questions/59536073/how-to-nest-multiple-observables-subscriptions/59537451#59537451", "title": "How to Nest Multiple Observables/Subscriptions", "body": "<p>I managed to get it to work by using <code>pipe</code> and <code>map</code> basically. The <code>map</code> operation will use the first observable to generate another one based on the former's parameters. Then we subscribe in a nested manner, which will finally give us the data we wanted.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.aboutMeSubscription = this.headerService.langChanged.pipe(\n  map(\n    (newLang: string) =&gt; {\n      return this.db\n        .collection&lt;AboutMePage&gt;(\n          this.aboutMeCollectionName, \n          ref =&gt; ref.where('lang', '==', newLang)\n        )\n        .valueChanges();\n  })\n)\n  .subscribe(\n    langChangedAboutMeObs =&gt; {\n      this.langChangedSubscription = langChangedAboutMeObs\n        .subscribe(\n          (value: AboutMePage[]) =&gt; {\n            this.aboutMe = value[0];\n          }\n        );\n    }\n  );\n</code></pre>\n\n<p>I also changed my <code>Subject</code> to a <code>BehaviorSubject</code> so an initial value has been emitted even before the user does anything. Lastly, it's important to unsubscribe to both subscriptions on <code>ngOnDestroy</code>.</p>\n"}], "owner": {"reputation": 2097, "user_id": 4756173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=128&d=identicon&r=PG", "display_name": "Philippe Fanaro", "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 59536991, "answer_count": 2, "score": 1, "last_activity_date": 1577758307, "creation_date": 1577735015, "last_edit_date": 1577737017, "question_id": 59536073, "link": "https://stackoverflow.com/questions/59536073/how-to-nest-multiple-observables-subscriptions", "title": "How to Nest Multiple Observables/Subscriptions", "body": "<h1>1. The Problem</h1>\n\n<p>I'm trying to create a flow of changing language for my blog and, in sum, this is how it would look like:</p>\n\n<ol>\n<li>The user clicks a button that triggers an event (<code>Subject</code>), i.e., the language change.</li>\n<li>This language change is used to query <code>Firebase</code> for the correct page based on that language.</li>\n</ol>\n\n<p>If I do each step separately and, later, the user changes the language, then the query won't be triggered because it doesn't know an event has just happened. So I believe this should be some sort of nested subscription/observable. Am I wrong?</p>\n\n<h1>2. My Code So Far</h1>\n\n<p>I've tried nesting subscriptions, but it didn't work. I believe it was because of scoping bugs. Right now, this is what I'm trying:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.headerService.langChanged.pipe(\n  map(\n    (newLang: string) =&gt; {\n      this.db\n        .collection&lt;AboutMePage&gt;(\n          this.aboutMeCollectionName, \n          ref =&gt; ref.where('lang', '==', newLang)\n        )\n        .valueChanges();\n  })\n)\n  .subscribe(\n    value =&gt; {\n      this.aboutMe = value[0]\n    }\n  );\n</code></pre>\n\n<p>The <code>headerService.langChanged</code> is a <code>Subject&lt;string&gt;</code>.</p>\n\n<p>Is there an <code>rxjs</code> operator for this use case? <code>concat</code> seemed like a good candidate, but it would have wait for the previous <code>Observable</code> to end, which it doesn't in this case. And there's also the fact that I have to pass parameters onto the next observable...</p>\n"}, {"tags": ["typescript", "generics", "parameters"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1577734570, "post_id": 59535995, "comment_id": 105241517, "body": "The last one doesn&#39;t actually count, see <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/functions.html#overloads</a>; the type of example is <i>only</i> the one overload."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577756052, "post_id": 59535995, "comment_id": 105247299, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52760509/typescript-returntype-of-overloaded-function\">Typescript: ReturnType of overloaded function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1577779817, "post_id": 59538756, "comment_id": 105251855, "body": "Thank you for the info and the issue hint (+1). While I probably would not use this in production, this is interesting inference behavior."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 3, "last_activity_date": 1577757796, "creation_date": 1577757796, "answer_id": 59538756, "question_id": 59535995, "link": "https://stackoverflow.com/questions/59535995/parameters-generic-of-overloaded-function-doesnt-contain-all-options/59538756#59538756", "title": "Parameters generic of overloaded function doesn&#39;t contain all options", "body": "<p>In the answers to <a href=\"https://stackoverflow.com/questions/52760509/typescript-returntype-of-overloaded-function\">the question this duplicates</a> the limitation mentioned in <a href=\"https://stackoverflow.com/a/59536085/2887218\">@ford04's answer here</a>, that <code>infer</code> only looks at the last overloaded signature, is acknowledged.  </p>\n\n<p>But <a href=\"https://stackoverflow.com/a/52761156/2887218\">this answer</a> shows it's not <em>completely</em> impossible; you can tease out some information about overloads, at least for functions with up to some arbitrary fixed number of them.  But it's hairy and ugly and <a href=\"https://github.com/Microsoft/TypeScript/issues/28867\" rel=\"nofollow noreferrer\">there might be bugs in it, see microsoft/TypeScript#28867</a>.  Here's one way of doing it:</p>\n\n<pre><code>type Overloads&lt;T&gt; =\n  T extends {\n    (...args: infer A1): infer R1; (...args: infer A2): infer R2;\n    (...args: infer A3): infer R3; (...args: infer A4): infer R4\n  } ? [\n    (...args: A1) =&gt; R1, (...args: A2) =&gt; R2,\n    (...args: A3) =&gt; R3, (...args: A4) =&gt; R4\n  ] : T extends {\n    (...args: infer A1): infer R1; (...args: infer A2): infer R2;\n    (...args: infer A3): infer R3\n  } ? [\n    (...args: A1) =&gt; R1, (...args: A2) =&gt; R2,\n    (...args: A3) =&gt; R3\n  ] : T extends {\n    (...args: infer A1): infer R1; (...args: infer A2): infer R2\n  } ? [\n    (...args: A1) =&gt; R1, (...args: A2) =&gt; R2\n  ] : T extends {\n    (...args: infer A1): infer R1\n  } ? [\n    (...args: A1) =&gt; R1\n  ] : any\n\ntype OverloadedParameters&lt;T&gt; =\n  Overloads&lt;T&gt; extends infer O ?\n  { [K in keyof O]: Parameters&lt;Extract&lt;O[K], (...args: any) =&gt; any&gt;&gt; } : never\n\ntype OverloadedReturnType&lt;T&gt; =\n  Overloads&lt;T&gt; extends infer O ?\n  { [K in keyof O]: ReturnType&lt;Extract&lt;O[K], (...args: any) =&gt; any&gt;&gt; } : never\n</code></pre>\n\n<p>The <code>Overloads&lt;T&gt;</code> type alias takes a function type <code>T</code> and returns a tuple of its call signatures (for up to four overloads).  And <code>OverloadedParameters&lt;T&gt;</code> and <code>OverloadedReturnType&lt;T&gt;</code> map <code>Parameters&lt;T&gt;</code> and <code>ReturnType&lt;T&gt;</code> over that tuple, respectively.</p>\n\n<p>Let's see it in action (after correcting your example so that it actually has multiple overloads, as done in the other answer):</p>\n\n<pre><code>function example(a: string): number\nfunction example(a: string, b: string): number\nfunction example(a: string, b?: string): number {\n  return 1\n}\n\ntype ExampleOverloads = Overloads&lt;typeof example&gt;\n// type ExampleOverloads = [(a: string) =&gt; number, (a: string, b: string) =&gt; number]\n\ntype ExampleParameters = OverloadedParameters&lt;typeof example&gt;\n// type ExampleParameters = [[string], [string, string]]\n</code></pre>\n\n<p>Looks reasonable to me.  Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBA8gbhATgGwPYEMAmBnAPAFQD4oBeAKCinyggA9gIA7HKAbwsqgAoA6P9RAHNsALigBLRgDMkUAIIBGAJRjJMxFABKCgNzc+PAcNXTZcgEwqJpjZvM6OlXvyGjr6+QGYra2Zs96zoauJh5yACw+NlrhHAC+UAD8UADajvouxvLKpMTaADQZwVkWSrla5vnpQUZuct7l-oU1IfKRjbGUALpQYtR0DMzYbNUGtaFmyhO2ukXj7maW0xUOnHOtvhr1UR7+8Umpo5l1OSR5Cs1jraWNlUfFdQ1nWp4cPX009Ews7GstWZtsjs-LN-m5AaVlnZ9sk0n8riVTudLscxDdntDur0qJ9Bj97vMIVMFjMYYd4aigY0FG9sehGCAyGRQJBYAgUBhMBBMAAFAToAC2EAYiDwRFIHHgSDQWDFxAG32GgJgSQ4rFSAGlrFAANYQECoKSwLpiPmIQXCpB4ACi9HNAGNgLgYCkNV0UQ8xPSQGVnt7CMQEmJGBB2UyWdApRysNzNMKAK6IRj4cAQAjEciUKMynDp3GKkmwVWUdWu7V6g1GmAmrQJpMpyC4W3AB1Ol1uj3zb2+4j+wPYkNhshSeOMR3iVCMT6CsDICBcdBibAtySCKyMeMCgBGSGHo-Hk+nAtn88XUGXiFXhS3S5XjDXwc3O8Qe7HwAnU7oM7nC9vl-v16JH+q7rk+si-FAiB1lONJxOGqZQLa34QNmnLDCQbLSmhuARoaR4noQZAAPREVAEaIbQyGobKpCpL+553mu5QbtuSDNGeF5XlAN4Mf+THPCxz5dPBrJIcec5mhaIroZh0Zcry-JCtJOGpnhX7iRAhEkWRCFiSeklKVatEpCknH3u6qRmYIhRWV0XRAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577788930, "creation_date": 1577734466, "question_id": 59535995, "link": "https://stackoverflow.com/questions/59535995/parameters-generic-of-overloaded-function-doesnt-contain-all-options", "title": "Parameters generic of overloaded function doesn&#39;t contain all options", "body": "<p>Given an overloaded function <code>example</code>. </p>\n\n<pre><code>function example(a: string): number\nfunction example(a: string, b?: string): number { \n  return 1\n}\n\ntype Result = Parameters&lt;typeof example&gt;\n</code></pre>\n\n<p>I'd expect Result to contain ALL options for arguments of <code>example</code>, not just the first / top-most argument set. How can I get the parameters?</p>\n"}, {"tags": ["javascript", "typescript", "async-await"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1577733510, "post_id": 59535786, "comment_id": 105241175, "body": "It&#39;s not clear how any of what you&#39;re showing fits together. <code>this.options = await getCountries()</code>, maybe? Give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577733941, "post_id": 59535786, "comment_id": 105241309, "body": "@jonrsharpe Yeah this <code>this.options = await getCountries()</code> i closest to my need. But problem is I can&#39;t use <code>await</code> without <code>async</code>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577733989, "post_id": 59535786, "comment_id": 105241323, "body": "Correct, because it&#39;s really just a promise, <i>something</i> needs to resolve it."}, {"owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577734084, "post_id": 59535786, "comment_id": 105241363, "body": "@jonrsharpe So does this mean that if I want this api data inside here I will have change the whole code structure?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577734148, "post_id": 59535786, "comment_id": 105241383, "body": "That&#39;s the deal, yes."}, {"owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577734239, "post_id": 59535786, "comment_id": 105241412, "body": "@jonrsharpe Isn&#39;t there any alternative?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577734266, "post_id": 59535786, "comment_id": 105241420, "body": "Observables? Callbacks? See the canonical <a href=\"https://stackoverflow.com/q/14220321/3001761\">stackoverflow.com/q/14220321/3001761</a>. If you&#39;re not comfortable with async you probably don&#39;t want to be writing your own SPA framework."}, {"owner": {"reputation": 8797, "user_id": 12270289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f90bXHFopV0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfStPF8S5OWF3hBzDu-oJeTx3xOfQ/photo.jpg?sz=128", "display_name": "Klaycon", "link": "https://stackoverflow.com/users/12270289/klaycon"}, "edited": false, "score": 0, "creation_date": 1577734431, "post_id": 59535786, "comment_id": 105241474, "body": "@MaheerAli You need an asynchronous result, it&#39;s not possible to grab that and bring it into a fully synchronous context where you can immediately export and have it available synchronously to the rest of your code. If your options depend on a network request, then all code depending on the options is now asynchronous as it can&#39;t run until the network request finishes."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1577735386, "post_id": 59535786, "comment_id": 105241772, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/14220321/how-do-i-return-the-response-from-an-asynchronous-call\">How do I return the response from an asynchronous call?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "edited": false, "score": 0, "creation_date": 1577733852, "post_id": 59535839, "comment_id": 105241283, "body": "Its giving error. <code>&#39;await&#39; expression is only allowed within an async function.ts(1308)</code>"}, {"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "reply_to_user": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "edited": false, "score": 0, "creation_date": 1577734005, "post_id": 59535839, "comment_id": 105241332, "body": "Yep. Any function that awaits an async function, must also (logically) be async. So that error tells you everything you need to know here."}, {"owner": {"reputation": 8797, "user_id": 12270289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f90bXHFopV0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfStPF8S5OWF3hBzDu-oJeTx3xOfQ/photo.jpg?sz=128", "display_name": "Klaycon", "link": "https://stackoverflow.com/users/12270289/klaycon"}, "reply_to_user": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "edited": false, "score": 0, "creation_date": 1577734074, "post_id": 59535839, "comment_id": 105241357, "body": "Top-level await is still in the proposal stage, is it not? This is clearly in the top level from the use of <code>export</code>, making one of the variables depended on by the <code>export</code> async seems problematic. You&#39;ll have to import and resolve a promise to do things this way, per the other answer @MaheerAli"}], "tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": false, "score": 0, "last_activity_date": 1577733548, "creation_date": 1577733548, "answer_id": 59535839, "question_id": 59535786, "link": "https://stackoverflow.com/questions/59535786/how-to-use-api-result-as-the-property-of-the-object/59535839#59535839", "title": "How to use API result as the property of the object?", "body": "<p>Any function declared as <code>async</code> should be <code>awaited</code> (or use <code>.then()</code>) to use its resolved value.</p>\n\n<p>So you just have to <code>await</code> your <code>getCountries</code> function, too.</p>\n\n<pre><code>options: (await getCountries).map(x =&gt; x.name)\n</code></pre>\n"}], "owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577734708, "creation_date": 1577733232, "last_edit_date": 1577733465, "question_id": 59535786, "link": "https://stackoverflow.com/questions/59535786/how-to-use-api-result-as-the-property-of-the-object", "title": "How to use API result as the property of the object?", "body": "<p>I am making a a one page web app with JavaScript and TypeScript. I am also using the module system of JavaScript (<code>type=\"module\"</code>). </p>\n\n<p>I have a class called <code>Form</code> that takes in an object and creates a <code>Form</code>. I have a module in which I have all the data for Registration form. There is one select in the inputs which have options field. I was those options to be assigned to the array containing names of countries. I am using an API to get the names of the countries. But I am stuck. </p>\n\n<p>Below is my file <code>RegisterFormDialog.ts</code></p>\n\n<pre><code>const RegisterFormData: IForm = {\n   //... Some other props\n   inputs: [\n      //..Some other objects.\n      {\n         name: \"country\",\n         type: \"select\",\n         label: \"Country\",\n         options: countries.map(x =&gt; x.name) // Here I want result of the api\n      }\n   ]\n};\n\nexport const RegisterForm = new Form(RegisterFormData);\n\nexport const RegisterFormDialog = new Dialog({\n   child: RegisterForm.element,\n   title: \"Register\",\n   dismissable: true,\n   onClose: () =&gt; 5,\n   parentElement: qs(\"#main\") as HTMLElement\n});\n</code></pre>\n\n<p>The other file is which have the API function. Its name is <code>GetCountries.ts</code></p>\n\n<pre><code>export default async function getCountries() {\n   return await (await fetch(\"https://restcountries.eu/rest/v2/all\")).json();\n}\n</code></pre>\n\n<p>Now how could I assign the returned value of the data of API to the options property in the object.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577729826, "post_id": 59535111, "comment_id": 105239893, "body": "So does the code you&#39;ve posted work? Have you <i>tried</i> <code>concatMap</code>?"}, {"owner": {"reputation": 59, "user_id": 11541698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DglhV.jpg?s=128&g=1", "display_name": "UserX", "link": "https://stackoverflow.com/users/11541698/userx"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577730154, "post_id": 59535111, "comment_id": 105240021, "body": "I could not figure out the syntax for concatMap to get anything to work. I&#39;m not sure how to get an array of Observable&lt;Phone&gt; to work with it."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577730215, "post_id": 59535111, "comment_id": 105240039, "body": "What do you mean the <i>syntax</i>? It&#39;s just a function you call: <a href=\"https://rxjs.dev/api/operators/concatMap\" rel=\"nofollow noreferrer\">rxjs.dev/api/operators/concatMap</a>. Give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 59, "user_id": 11541698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DglhV.jpg?s=128&g=1", "display_name": "UserX", "link": "https://stackoverflow.com/users/11541698/userx"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577741779, "post_id": 59535111, "comment_id": 105243940, "body": "I&#39;ve updated my sample code of what I&#39;m trying to accomplish. However, it only works for a fixed number of phones."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1577742110, "post_id": 59535111, "comment_id": 105244049, "body": "Might want to checkout learn-rxjs: <a href=\"https://www.learnrxjs.io/operators/transformation/concatmap.html\" rel=\"nofollow noreferrer\">learnrxjs.io/operators/transformation/concatmap.html</a> They have lots of examples..."}], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 4675154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sRg1v.jpg?s=128&g=1", "display_name": "Vahid Rahmani", "link": "https://stackoverflow.com/users/4675154/vahid-rahmani"}, "edited": false, "score": 0, "creation_date": 1577857093, "post_id": 59547757, "comment_id": 105269390, "body": "forkJoin Wait for Observables to complete and then combine last values they emitted. but in this case we want Combine multiple sequential Observables into one Observable so you could use Observable.mergeAll operator.  see this link : <a href=\"http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html#instance-method-mergeAll\" rel=\"nofollow noreferrer\">reactivex.io/rxjs/class/es6/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1577819801, "creation_date": 1577819801, "answer_id": 59547757, "question_id": 59535111, "link": "https://stackoverflow.com/questions/59535111/combine-multiple-sequential-observables-into-one-observable/59547757#59547757", "title": "Combine multiple sequential Observables into one Observable", "body": "<p>Try forkJoin</p>\n\n<pre><code>savePhones(phones: Phone[]): Observable&lt;Phone[]&gt; {\n    return phones.length === 0 ? of&lt;Phone[]&gt;([]) : forkJoin(phones.map(\n      phone =&gt; this.postPhone(contactId, phone).pipe(\n        map(response =&gt; new Phone().loadFromJson(response)),\n      )\n    ));\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11541698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DglhV.jpg?s=128&g=1", "display_name": "UserX", "link": "https://stackoverflow.com/users/11541698/userx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 775, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577819801, "creation_date": 1577729675, "last_edit_date": 1577741737, "question_id": 59535111, "link": "https://stackoverflow.com/questions/59535111/combine-multiple-sequential-observables-into-one-observable", "title": "Combine multiple sequential Observables into one Observable", "body": "<p>I need to combine the results of multiple http calls into one Observable. The calls must happen in order, each must wait for the previous one to end, and the number of http calls is not known until runtime.</p>\n\n<p>I've seen similar questions, but the number of initial calls has always been known, and therefore, a couple of nested and/or chained pipe operations handled this easily. I will need to make 0-to-* API calls.</p>\n\n<p>I <em>think</em> that <code>concatMap()</code> is the way to go, but I could be wrong. And I couldn't figure out the syntax to make it work.</p>\n\n<pre><code>// Post all phones to API individually, but return updated results in single array.\nsavePhones(phones: Phone[]): Observable&lt;Phone[]&gt; {\n\n    let updatedPhones: Phone[] = [];\n\n    if (phones.length === 0) {\n        return of&lt;Phone[]&gt;(updatedPhones);\n    }\n\n    // I need to do something like this, but for 1 to **many** phones. \n    // When each Observable completes, add to array.\n    // Only after the prior Observable completes, start the next.\n    // When the last one is done, return the Observable array. \n    return this.postPhone(contactId, phones[0])\n        .pipe(\n            map(response1 =&gt; {\n                let p1 = new Phone();\n                p1.loadFromJson(response1);\n                updatedPhones.push(p1);\n            }),\n            concatMap(() =&gt; this.postPhone(contactId, phones[1])\n                .pipe(map(response2 =&gt; {\n                    let p2 = new Phone();\n                    p2.loadFromJson(response2);\n                    updatedPhones.push(p2);\n                }))),\n            concatMap(() =&gt; this.postPhone(contactId, phones[2])\n                .pipe(map(response3 =&gt; {\n                    let p3 = new Phone();\n                    p3.loadFromJson(response3);\n                    updatedPhones.push(p3);\n                }))),\n            map(() =&gt; {\n                return updatedPhones;\n            })\n        );\n\n}\n\nprivate postPhone(\n    contactId: string,\n    phone: Phone): Observable&lt;Phone&gt; {\n\n    let criteria = phone.toJson();\n    let url = phone.isNew()\n        ? `${apiUrl}/contacts/${contactId}/phones/add`\n        : `${apiUrl}/contacts/${contactId}/phones/${phone.phoneId}/update`;\n\n    return this.httpClient.post(url, criteria));\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["typescript", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2703334, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8145d9dffc22fe40ac0e48348ba7fbee?s=128&d=identicon&r=PG&f=1", "display_name": "Ismail G&#252;l", "link": "https://stackoverflow.com/users/2703334/ismail-g%c3%bcl"}, "edited": false, "score": 1, "creation_date": 1577776091, "post_id": 59535977, "comment_id": 105250781, "body": "Thank you very much. <code>InstanceType</code> is what I needed. Sometimes it&#39;s hard to find about the utilities of typescript in Google or I don&#39;t use the right keywords to look for them. :)"}], "tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 1, "last_activity_date": 1577734334, "creation_date": 1577734334, "answer_id": 59535977, "question_id": 59535087, "link": "https://stackoverflow.com/questions/59535087/how-to-use-typeof-for-generic-argument-value/59535977#59535977", "title": "How to use typeof for generic argument value?", "body": "<blockquote>\n  <p>is it possible to pass the class itself as a generic argument and then get its type inside the interface without needing to pass them separately</p>\n</blockquote>\n\n<p>You can use <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#instancetypet\" rel=\"nofollow noreferrer\">InstanceType</a> to get the instance type of a class type:</p>\n\n<pre><code>class ClassA {\n  constructor(public a: string) { }\n}\n\ninterface ComponentProps&lt;T extends new (...args: any) =&gt; any&gt; {\n  params: ConstructorParameters&lt;T&gt;[0]\n  onSubmit: (op: InstanceType&lt;T&gt;) =&gt; void\n}\n\ndeclare const props: ComponentProps&lt;typeof ClassA&gt;\nprops.params // params: string\nprops.onSubmit(new ClassA(\"foo\") ) // onSubmit: (op: ClassA) =&gt; void\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=12&amp;ssc=69&amp;pln=10&amp;pc=1#code/MYGwhgzhAEDC5QILQN4ChrWAewHYQBcAnAV2AOyIAoAHEgIxAEthowAuaQop3AcwCUqaAF80YtLwIBTIgDMwwaXGwBbGnmm4CABSLYaEADwAVaNIAeM3ABMYuaQHdoVAHTuwRPhE5hcATyEAXgA+NgCw9EwaTzBVHxV8YjIKIh1Y1WkZImMTEIBtAAYAXQxoPABlBlUmAk4qA04ASSS-JRN-GmlTEOCwgDdsJhtxNDQbaVBPZRwk6Bp9Q05YNQ0HbT0DYwJO6Ww5OAQIRBC0Ba3XGKI4mAB6W-mMhO5ePjPFiFdK6tqqB2d4JBjlQAERybDYEFCIT3cq4Kr0Gp1FyNQ5AxB9aCDYZAA\" rel=\"nofollow noreferrer\">Code sample</a></p>\n"}], "owner": {"reputation": 105, "user_id": 2703334, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8145d9dffc22fe40ac0e48348ba7fbee?s=128&d=identicon&r=PG&f=1", "display_name": "Ismail G&#252;l", "link": "https://stackoverflow.com/users/2703334/ismail-g%c3%bcl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 59535977, "answer_count": 1, "score": 0, "last_activity_date": 1577734334, "creation_date": 1577729560, "question_id": 59535087, "link": "https://stackoverflow.com/questions/59535087/how-to-use-typeof-for-generic-argument-value", "title": "How to use typeof for generic argument value?", "body": "<p>I want to define an interface where I pass a generic argument, then use the passed value and it's type at the same time.</p>\n\n<p>This is similar to what I want to accomplish:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface ComponentProps&lt;T extends new (...args: any) =&gt; any&gt; {\n  params: ConstructorParameters&lt;typeof T&gt;[0]\n  onSubmit: (op: T) =&gt; void\n}\n</code></pre>\n\n<p>Which gives this error because the argument is a value:</p>\n\n<blockquote>\n  <p>'T' only refers to a type, but is being used as a value here.ts(2693)</p>\n</blockquote>\n\n<p>I can define this interface and use it as:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface ComponentProps&lt;T&gt; {\n  onSubmit: (op: T) =&gt; void\n}\n\ntype CustomComponentProps = ComponentProps&lt;ClassA&gt; // I can directly pass the class\n</code></pre>\n\n<p>or</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface ComponentProps&lt;T extends new (...args: any) =&gt; any&gt; {\n  params: ConstructorParameters&lt;T&gt;[0]\n}\n\ntype CustomComponentProps = ComponentProps&lt;typeof ClassA&gt; // I need to pass typeof the class\n</code></pre>\n\n<p>It's probably a simple issue which I couldn't figure out yet, but is it possible to pass the class itself as a generic argument and then get its type inside the interface without needing to pass them separately as <code>ComponentProps&lt;ClassA, typeof ClassA&gt;</code>?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10011511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c947061e7ec294138b10919b149fc4?s=128&d=identicon&r=PG", "display_name": "Savas Karaduman", "link": "https://stackoverflow.com/users/10011511/savas-karaduman"}, "edited": false, "score": 0, "creation_date": 1577730768, "post_id": 59535226, "comment_id": 105240231, "body": "Hello, you are absolutely right. createStore is not running when I load dataSource. If I createStore again within selectTab(e), everything works fine. I knew this solution already but I am not sure If I am creating unnecessary objects which cause garbage. Because user will click Tab control many times to select different companies. Do you have any idea about this?"}, {"owner": {"reputation": 9884, "user_id": 2124351, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/68ee34d2fdd09893801d1510637c3244?s=128&d=identicon&r=PG&f=1", "display_name": "aw04", "link": "https://stackoverflow.com/users/2124351/aw04"}, "reply_to_user": {"reputation": 61, "user_id": 10011511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c947061e7ec294138b10919b149fc4?s=128&d=identicon&r=PG", "display_name": "Savas Karaduman", "link": "https://stackoverflow.com/users/10011511/savas-karaduman"}, "edited": false, "score": 1, "creation_date": 1577730900, "post_id": 59535226, "comment_id": 105240268, "body": "if you&#39;re overriding <code>this.datasource</code> each time I can&#39;t imagine it&#39;d be an issue. they may provide a way to update it without calling create again (I&#39;m not familiar with the tool so idk), but if not that&#39;s what you&#39;ll have to do"}], "tags": [], "owner": {"reputation": 9884, "user_id": 2124351, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/68ee34d2fdd09893801d1510637c3244?s=128&d=identicon&r=PG&f=1", "display_name": "aw04", "link": "https://stackoverflow.com/users/2124351/aw04"}, "is_accepted": true, "score": 1, "last_activity_date": 1577730221, "creation_date": 1577730221, "answer_id": 59535226, "question_id": 59535031, "link": "https://stackoverflow.com/questions/59535031/how-to-refresh-parameter-returning-by-a-function-in-angular/59535226#59535226", "title": "How to refresh parameter returning by a function in Angular", "body": "<p>Let's walk through what's going on here. The constructor fires and you create the store, calling <code>this.getFirmId()</code> which returns 0 at this point. When a tab is selected, <code>this.firmId</code> is correctly updated and you load the data source.</p>\n\n<p>The problem you have is that it's not likely running <code>createStore</code> again when you call <code>this.dataSource.load()</code>, meaning it never calls <code>this.getFirmId()</code> to update the value. You can confirm this by logging within the <code>getFirmId</code> function to see if it's firing. If not, you'll need to figure out how to update the dataSource before calling load again.</p>\n\n<pre><code>selectTab(e) {  \n  this.firmaId = e.itemData.id;\n  // update param here \n  this.dataSource.load();  \n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10011511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c947061e7ec294138b10919b149fc4?s=128&d=identicon&r=PG", "display_name": "Savas Karaduman", "link": "https://stackoverflow.com/users/10011511/savas-karaduman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 59535226, "answer_count": 1, "score": 0, "last_activity_date": 1577730221, "creation_date": 1577729295, "question_id": 59535031, "link": "https://stackoverflow.com/questions/59535031/how-to-refresh-parameter-returning-by-a-function-in-angular", "title": "How to refresh parameter returning by a function in Angular", "body": "<p>I am having problem on DevExtreme datasource and actually this question already sent to them and still being discussed. But I am wondering if I am missing something basic in Angular.</p>\n\n<p>DevExtreme introduce a AspNetData source control which makes communication with .NET API very easy. It accepts Options object where you can define additional parameters. In my scenario, I have defined \"firmaId\" loadParams which takes value via function.</p>\n\n<p>The function \"getFirmaId()\" simply returns \"firmaId\" variable.\nselectTab(e) function is being hit by clicking a tab controller. It gives a new value to \"firmaId\" succesfully. But when I load DataSource by using DevExtreme client API, loadParams of \"firmaId\" is always 0. Is it working as it is expected? In my opinion, this is contradicting functional programming concept of JavaScript.</p>\n\n<p>Any help appreciated.</p>\n\n<pre><code>firmaId: number;  \n\nconstructor(private dataService: DataService) {  \n\n    this.firmaId = 0;\n\n    this.dataSource = AspNetData.createStore({  \n      key: \"id\",  \n      loadUrl: Constants.apiRoot + \"/api/cari/get\",  \n      insertUrl: Constants.apiRoot + \"/api/cari\",  \n      updateUrl: Constants.apiRoot + \"/api/cari\",  \n      deleteUrl: Constants.apiRoot + \"/api/cari\",  \n      loadParams:  { firmaId : this.getFirmaId() },  \n      onBeforeSend: function(method, ajaxOptions) {  \n          ajaxOptions.xhrFields = { withCredentials: true };  \n      }  \n    });  \n  }  \n\n  getFirmaId():number{  \n    return this.firmaId;  \n  }  \n\n  selectTab(e) {  \n\n    this.firmaId = e.itemData.id;  \n    this.dataSource.load();  \n\n  }\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "three.js"], "comments": [{"owner": {"reputation": 7685, "user_id": 1314762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec8b9cd05efa622fd08e55414e63470?s=128&d=identicon&r=PG", "display_name": "Don McCurdy", "link": "https://stackoverflow.com/users/1314762/don-mccurdy"}, "edited": false, "score": 0, "creation_date": 1577761943, "post_id": 59534958, "comment_id": 105248126, "body": "In the JS version you use OrbitControls directly, while in TS you wrap it with a custom object... could you create a simpler example without that wrapper? There&#39;s a bit too much going on here for someone to reproduce your problem without a demo."}, {"owner": {"reputation": 72, "user_id": 7213999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/802f4407dba0ae87d8cf9fcf13ff28a0?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Soares", "link": "https://stackoverflow.com/users/7213999/diogo-soares"}, "reply_to_user": {"reputation": 7685, "user_id": 1314762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ec8b9cd05efa622fd08e55414e63470?s=128&d=identicon&r=PG", "display_name": "Don McCurdy", "link": "https://stackoverflow.com/users/1314762/don-mccurdy"}, "edited": false, "score": 0, "creation_date": 1577809972, "post_id": 59534958, "comment_id": 105261884, "body": "@DonMcCurdy tried to simplify the code, i dont know if its because its wrapped or if its something threejs does not entirely support from typescript or even angular. cant solve the issue, all seems the same, but is not working"}, {"owner": {"reputation": 27336, "user_id": 603003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XBlaU.png?s=128&g=1", "display_name": "ComFreek", "link": "https://stackoverflow.com/users/603003/comfreek"}, "edited": false, "score": 0, "creation_date": 1577810644, "post_id": 59534958, "comment_id": 105262107, "body": "Your import should be correct as we&#39;re using <a href=\"https://github.com/makimenko/angular-template-for-threejs/blob/15e13e8ad3e18187804ba9b2877c78b42d2808f2/projects/atft/src/lib/control/orbit-controls.component.ts#L2\" rel=\"nofollow noreferrer\">the exact same import</a> in <a href=\"https://github.com/makimenko/angular-template-for-threejs\" rel=\"nofollow noreferrer\">our project with Angular &amp; Three.js</a>. I remember there was some weird wrong mouse offset at the beginning. Could it be that? I forgot how I fixed that. Feel free to browse our source code."}, {"owner": {"reputation": 72, "user_id": 7213999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/802f4407dba0ae87d8cf9fcf13ff28a0?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Soares", "link": "https://stackoverflow.com/users/7213999/diogo-soares"}, "reply_to_user": {"reputation": 27336, "user_id": 603003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XBlaU.png?s=128&g=1", "display_name": "ComFreek", "link": "https://stackoverflow.com/users/603003/comfreek"}, "edited": false, "score": 0, "creation_date": 1577817110, "post_id": 59534958, "comment_id": 105263958, "body": "@ComFreek good project, i dont think its the same problem, i mean, i have drag controls also set and even tho i cant drag objects (the &#39;Hoveron&#39; is actually working), the mouse correctly identifies them in the scene, but for some reason, the orbitcontrols are not working (same for dragControls)"}, {"owner": {"reputation": 27336, "user_id": 603003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XBlaU.png?s=128&g=1", "display_name": "ComFreek", "link": "https://stackoverflow.com/users/603003/comfreek"}, "edited": false, "score": 0, "creation_date": 1577868092, "post_id": 59534958, "comment_id": 105270859, "body": "@DiogoSoares Then I think it&#39;s hard to debug over wire. Can you set up an online Angular fiddle (preferred) or a GitHub repo of a minimal reproducing example?"}], "owner": {"reputation": 72, "user_id": 7213999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/802f4407dba0ae87d8cf9fcf13ff28a0?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Soares", "link": "https://stackoverflow.com/users/7213999/diogo-soares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577809885, "creation_date": 1577728819, "last_edit_date": 1577809885, "question_id": 59534958, "link": "https://stackoverflow.com/questions/59534958/three-js-orbitcontrols-not-working-when-using-typescript-working-with-javascrip", "title": "THREE.js OrbitControls not working when using Typescript (Working with javascript)", "body": "<p>I have this small project written in javascript (one long file) and now i must move it to typescript (using DDD). Now the question is the following, the code is working when running the angular calls the javascript file. But when i try to use the newly created typescript with the same code, the orbit controls does not work at all, i am not able to move the scene like i used to using the javascript file.</p>\n\n<p>in the <strong>javascript</strong> the order i use is the following: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    const canvas = document.querySelector('#c');\n\n    renderer = new THREE.WebGLRenderer({canvas, antialias: true});\n    // some renderer properties\n\n    camera = new THREE.PerspectiveCamera(90, window.innerWidth / innerHeight, 0.1, 1000);\n    // camera position and lookat defined here\n\n    const orbitControls = new OrbitControls(camera, renderer.domElement);\n    orbitControls.update();\n\n</code></pre>\n\n<p>in the <strong>typescript</strong>, in the <strong>main.ts</strong> file we create the renderer, the canvas, and the camera, using an classes for the rendere, orbitControls...:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  private canvas: HTMLCanvasElement;\n  private evRenderer: EvRenderer; // simplified\n  private evCamera: EvCamera;\n\n\n  async ngOnInit() {\n    // some project related await calls\n\n    this.canvas = document.querySelector('#c');\n    this.evRenderer = new Renderer(this.canvas);\n    this.evScene = new EvScene();\n    this.evCamera = new EvCamera();\n\n    this.orbitControls = new EvOrbitControls(this.evCamera.camera, this.evRenderer.renderer);\n</code></pre>\n\n<p>now the EvOrbitControls class:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class EvOrbitControls {\n\n  private orbitControls: OrbitControls;\n  private evCamera: EvCamera;\n  private evRenderer: EvRenderer;\n\n  constructor(evCamera: EvCamera, evRenderer: EvRenderer) {\n    this.camera = evCamera;\n    this.renderer = evRenderer;\n    this.orbitControls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.orbitControls.update();\n  }\n\n  enable() {\n    this.orbitControls.enabled = true;\n  }\n\n  disable() {\n    this.orbitControls.enabled = false;\n  }\n}\n</code></pre>\n\n<p>This is obviously not over and improvements to code are needed, but still we can not use the orbitcontrols. The Scene appears correctly, with the objects inserted in it (like in the javascript).</p>\n\n<p><strong>Also</strong>:\n The project is in <strong>Angular 8</strong>. \n The import of orbitcontrols is the following: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\n</code></pre>\n\n<p>as by suggested in the npm site: \n<em>\"three-js exposes real modules now via three/examples/jsm/... for example to import Orbit, do import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\"</em></p>\n\n<p><strong>Also</strong>:\nThe <strong>EvRenderer</strong> and <strong>EvCamera</strong> just have a private atribute THREE.WebGlRenderer and a THREE.PerspectiveCamera, respectively, and the atributes are set in the constructor. the atributes are the same as in the javascript file.</p>\n\n<p>I've tried other imports too, like the the one in the <a href=\"https://www.npmjs.com/package/three-orbitcontrols-ts\" rel=\"nofollow noreferrer\">npm site</a>, which has 3 years since late update, and does not work, the problem remains the same.</p>\n\n<p>The code gives no errors/warnings, just the orbit controls does not work.</p>\n\n<p>Any help or suggestion will be helpfull :)</p>\n\n<p><strong>EDIT:</strong> Without the class wrapper as mentioned by @Don McCurdy the apllication stays like this, simply as this: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  private canvas: HTMLCanvasElement;\n  private evRenderer: EvRenderer;\n  private evCamera: EvCamera;\n  private orbitControls: OrbitControls;\n\n\n  async ngOnInit() {\n    // some project related await calls\n\n    this.canvas = document.querySelector('#c');\n    this.evRenderer = new Renderer(this.canvas);\n    this.evScene = new EvScene();\n    this.evCamera = new EvCamera();\n\n    this.orbitControls = new OrbitControls(this.evCamera.camera, this.evRenderer.renderer);\n    }\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript", "express", "ejs"], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 10626207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/611c5e694ee433fdb6424569985ebc29?s=128&d=identicon&r=PG", "display_name": "Mattia Rasulo", "link": "https://stackoverflow.com/users/10626207/mattia-rasulo"}, "is_accepted": true, "score": 1, "last_activity_date": 1577728429, "creation_date": 1577728429, "answer_id": 59534889, "question_id": 59534572, "link": "https://stackoverflow.com/questions/59534572/can-not-find-ejs-typescript-and-express/59534889#59534889", "title": "Can not find &#39;EJS&#39; Typescript and Express", "body": "<p>EJS is not made to work with TypeScript natively.</p>\n\n<p>Please check here how to properly set that up to be integrated in Express:</p>\n\n<p><a href=\"https://developer.okta.com/blog/2018/11/15/node-express-typescript\" rel=\"nofollow noreferrer\">https://developer.okta.com/blog/2018/11/15/node-express-typescript</a></p>\n"}], "owner": {"reputation": 60, "user_id": 7260381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2efecc93e18771fcc922d56e5a94868?s=128&d=identicon&r=PG&f=1", "display_name": "qqq", "link": "https://stackoverflow.com/users/7260381/qqq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1930, "favorite_count": 0, "accepted_answer_id": 59534889, "answer_count": 1, "score": 2, "last_activity_date": 1577728429, "creation_date": 1577726648, "question_id": 59534572, "link": "https://stackoverflow.com/questions/59534572/can-not-find-ejs-typescript-and-express", "title": "Can not find &#39;EJS&#39; Typescript and Express", "body": "<p>I'm trying to use EJS with typescript, I can use res.send  </p>\n\n<pre><code>app.set('views', path.join(__dirname, 'src/views/'));\napp.set('view engine', 'ejs');\n\n        app.get('/index', function (req, res, next) {\n        res.send('hello')  \n    });\n</code></pre>\n\n<p>But, when I try to use <code>render</code> method I get <code>Error: Cannot find module 'ejs'</code>. I'm sure that I installed ejs as globally and locally. What can cause that?</p>\n"}, {"tags": ["node.js", "typescript", "express", "model-view-controller"], "answers": [{"tags": [], "owner": {"reputation": 5875, "user_id": 4383512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PdRqP.png?s=128&g=1", "display_name": "Meme Composer", "link": "https://stackoverflow.com/users/4383512/meme-composer"}, "is_accepted": false, "score": 0, "last_activity_date": 1577726390, "creation_date": 1577726390, "answer_id": 59534525, "question_id": 59534477, "link": "https://stackoverflow.com/questions/59534477/when-using-typescript-and-express-i-cant-get-res-send-to-work-with-explicit-typ/59534525#59534525", "title": "When using typescript and express I can&#39;t get res.send to work with explicit types in my controller but it does work when the type is anny", "body": "<p>You can change your imports and type declarations to the following</p>\n\n<pre><code>import { Request, Response } from \"express\"\nimport {IHomeController} from \"./IHomeController\"\n\nexport class HomeController implements IHomeController{\n    GetRoot(req: Request, res: Response){\n        res.send(\"please let this work\");\n        return;\n    }\n}\n</code></pre>\n\n<p>Or this</p>\n\n<pre><code>import * as express from \"express\"\nimport {IHomeController} from \"./IHomeController\"\n\nexport class HomeController implements IHomeController{\n    GetRoot(req: express.Request, res: express.Response){\n        res.send(\"please let this work\");\n        return;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12626337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3e59e3245194d2f04b73286a692ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Kyler Daybell", "link": "https://stackoverflow.com/users/12626337/kyler-daybell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577726390, "creation_date": 1577726129, "question_id": 59534477, "link": "https://stackoverflow.com/questions/59534477/when-using-typescript-and-express-i-cant-get-res-send-to-work-with-explicit-typ", "title": "When using typescript and express I can&#39;t get res.send to work with explicit types in my controller but it does work when the type is anny", "body": "<p>I am trying to set up a project using express and typescript in an MVC configuration, my index.ts does the routing and sends the request and response objects to the appropriate controller function, In my case the home controller GetRoot function. </p>\n\n<pre><code>import { request, response } from \"express\"\nimport {IHomeController} from \"./IHomeController\"\n\nexport class HomeController implements IHomeController{\n    GetRoot(req: Express.Request, res:Express.Response){\n        res.send(\"please let this work\");\n        return;\n    }\n}\n</code></pre>\n\n<p>When I use explicit types, as shown above, I get the error \"Property 'send' does not exist on type 'Response'.\"</p>\n\n<p>However, when I use any I am able to use res.send() correctly. Not sure why.</p>\n"}, {"tags": ["arrays", "typescript", "types"], "comments": [{"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577734049, "post_id": 59534413, "comment_id": 105241348, "body": "I miss something -- why <code>function oneItem&lt;T&gt;(arr: T[]): T</code> is not good enough?"}, {"owner": {"reputation": 4515, "user_id": 4808079, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/hXTld.jpg?s=128&g=1", "display_name": "Seph Reed", "link": "https://stackoverflow.com/users/4808079/seph-reed"}, "reply_to_user": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577734155, "post_id": 59534413, "comment_id": 105241384, "body": "<code>const b = oneItem([&quot;foo&quot;, &quot;bar&quot;]);</code> ---&gt; <code>typeof b (string)</code>"}, {"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577734237, "post_id": 59534413, "comment_id": 105241410, "body": "and what it should be?"}, {"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577734788, "post_id": 59534413, "comment_id": 105241584, "body": "Ah, I think I understood! Need to learn how to read :)"}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1577763715, "creation_date": 1577763715, "answer_id": 59539306, "question_id": 59534413, "link": "https://stackoverflow.com/questions/59534413/typescript-function-which-returns-one-item-from-an-array-with-proper-type/59539306#59539306", "title": "Typescript function which returns one item from an array with proper type", "body": "<p>When you say \"proper\" type, I guess you mean you want the narrowest possible type the compiler can infer.  </p>\n\n<p>Whether or not this is \"proper\" is in the eye of the beholder; the runtime code <code>let x = 0</code> could have many possible typings in TypeScript, and the compiler has to pick just one of them unless you annotate the type yourself.  </p>\n\n<p>For example, I might want it to be interpreted as <code>let x: number = 0</code> which is the default compiler behavior and which makes sense if I plan to assign different numbers to <code>x</code> later.  Or I might want <code>let x: 0 | 1 = 0</code> because I'm only going to write code like <code>x = y &amp; 1</code> and I know that only those values will come out.  Or I might want <code>let x: 0 = 0</code> because <code>x</code> will always be <code>0</code> (although presumably I would use <code>const</code> in that case).  Or maybe I want <code>let x: number | string = 0</code> because sometimes I will assign <code>string</code> values to it.  Or maybe I want any other crazy type that includes <code>0</code> as a value.</p>\n\n<p>If you don't annotate it yourself, then the compiler has to infer the type, so it makes an assumption: non-<code>readonly</code> and non-<code>const</code> values will tend to be inferred as a \"widened\" type like <code>string</code>, <code>number</code>, or <code>boolean</code>, while <code>readonly</code> and <code>const</code> values will tend to be inferred as a \"narrow\" <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types\" rel=\"nofollow noreferrer\">literal type</a> like <code>\"foo</code>\", <code>0</code>, or <code>true</code>.  </p>\n\n<p>Sometimes the compiler's default assumption won't match the intent of the developer.  That doesn't mean the compiler did anything wrong; it's not as if it takes <code>let x = 0</code> and infers <code>string</code> for <code>x</code>.  It just means the developer might be required to put in some more effort to communicate his or her intent.</p>\n\n<hr>\n\n<p>So, when I write <code>[\"foo\", \"bar\"]</code>, the compiler tends to infer that as <code>string[]</code>. If I want something else, I can annotate it myself. Let's start with this version of your function:</p>\n\n<pre><code>function oneItem&lt;T&gt;(arr: readonly T[]): T {\n  return arr[~~(Math.random() * arr.length)];\n}\n</code></pre>\n\n<p>Here are some outputs:</p>\n\n<pre><code>let arr1 = [\"foo\", \"bar\"]; // inferred as string[]\nconst res1 = oneItem(arr1); // string\n\nlet arr2: Array&lt;\"foo\" | \"bar\"&gt; = [\"foo\", \"bar\"];\nconst res2 = oneItem(arr2); // \"foo\" | \"bar\"\n\nlet arr3: [\"foo\", \"bar\"] = [\"foo\", \"bar\"];\nconst res3 = oneItem(arr3); // \"foo\" | \"bar\"\n\nlet arr4: readonly [\"foo\", \"bar\"] = [\"foo\", \"bar\"];\nconst res4 = oneItem(arr4); // \"foo\" | \"bar\"\n\nlet arr5 = [\"foo\", \"bar\"] as const; // inferred as readonly [\"foo\", \"bar\"];\nconst res5 = oneItem(arr5);\n</code></pre>\n\n<p>You can see that <code>arr1</code> uses the default <code>string[]</code> inferred type, and thus <code>string</code> comes out of the function.  For <code>arr2</code>, <code>arr3</code>, and <code>arr4</code>, I've annotated the arrays as progressively narrower types, and all of them allow <code>\"foo\" | \"bar\"</code> to come out of the function.  The last one, <code>arr5</code>, uses a <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/overview.html#const-assertions\" rel=\"nofollow noreferrer\"><code>const</code> assertion</a> to ask the compiler to infer the type as the narrowest value it can, corresponding to that of <code>arr4</code>.</p>\n\n<p>So one way for you to proceed is just to specify the value's type more narrowly.</p>\n\n<hr>\n\n<p>Of course, in your use case, you have something like</p>\n\n<pre><code>const resArrayLiteral = oneItem([\"foo\", \"bar\"]); // string\n</code></pre>\n\n<p>And you would like <code>\"foo\" | \"bar\"</code> to come out instead of <code>string</code>.  Why should the <em>caller</em> of <code>oneItem()</code> have to ask the compiler to narrow the type of the array literal <code>[\"foo\", \"bar\"]</code>?  Can't the <em>implementer</em> of <code>oneItem()</code> use some sort of contextual typing hint to tell the compiler to interpret things more narrowly?</p>\n\n<p>Well, kind of, yes.  It's just not pretty.  Here's one way to do it:</p>\n\n<pre><code>type Narrowable = string | number | boolean | symbol | object | undefined | void | null | {};\n\nfunction oneItem&lt;T extends Narrowable&gt;(arr: readonly T[]): T {\n  return arr[~~(Math.random() * arr.length)];\n}\n</code></pre>\n\n<p>Here we are giving <code>T</code> a <a href=\"http://www.typescriptlang.org/docs/handbook/generics.html#generic-constraints\" rel=\"nofollow noreferrer\">constraint</a> to <code>Narrowable</code>, a union type of a bunch of things including <code>string</code>, <code>number</code>, and <code>boolean</code>.  In fact, the <code>Narrowable</code> type is a kind of tedious version of <code>unknown</code>, since most anything should be assignable to it.  But <code>Narrowable</code> gives the compiler a hint (see <a href=\"https://github.com/microsoft/TypeScript/pull/10676\" rel=\"nofollow noreferrer\">microsoft/TypeScript#10676</a>) that you'd like to see <code>T</code> inferred as a literal type, if possible.</p>\n\n<p>Let's see if it works:</p>\n\n<pre><code>const resArrayLiteral = oneItem([\"foo\", \"bar\"]); // \"foo\" | \"bar\"\n</code></pre>\n\n<p>Looks good now! <code>T</code> is inferred as <code>\"foo\" | \"bar\"</code> and not <code>string</code>.</p>\n\n<hr>\n\n<p>As I said, though: it's not pretty.  There's an <a href=\"https://github.com/microsoft/TypeScript/issues/30680\" rel=\"nofollow noreferrer\">open issue, (microsoft/TypeScript#30680)</a>, suggesting that we be able to write the <code>oneItem()</code> signature as something like</p>\n\n<pre><code>function oneI&lt;const T&gt;(arr: readonly T[]): T; // currently invalid syntax\n</code></pre>\n\n<p>where the <code>const</code> is in the signature, and it behaves similarly to having the caller use <code>as const</code>.  Not sure if that issue will ever go anywhere, though.  For now, we have to jump through hoops like <code>Narrowable</code>.</p>\n\n<hr>\n\n<p>Also, please note that the above <code>T extends Narrowable</code> does nothing to change the behavior of <code>arr1</code>.  If you write <code>let arr1 = [\"foo\", \"bar\"]</code>, then <code>arr</code> will be inferred as <code>string[]</code>.  Once it's a <code>string[]</code>, the compiler has forgotten all about <code>\"foo\"</code> and <code>\"bar\"</code> as literal types.  And thus <code>oneItem(arr1)</code> will return <code>string</code>; <code>T</code> will be inferred as <code>string</code>.  So at some point you might find yourself needing to write narrow types yourself, if you want them. </p>\n\n<hr>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAcghgJwQewO5wEYBtoF4oDOwCAlgHYDmUAPlGQK4C2GECNUGyyOcZ7BIZt3bIMAKwgBjYO3pkAJhABm5CPPYA3ZCXW0GWLOwDeAXwDcAKAtK50ksj4OIASWARGAHgAqUCAA83BQJYRBR0bAgAPgAKUIAuKAQIOHkHLBAoLwBtAF0ASgSfIwsoRIhgegQ+UKyAP1rogFk4YAALADoEXlTGaLyoACooUPacSja8nMsTKygLAHoB61tge0cyFw9JByJMyKhYpASklLSM7PzCsyh5+ahJSqSyYHSocg04LB1CEGe4PwsA3mVhwMlCAEYoPgsgAiJRcGEAGigMIwiBhUxud3ISlYSXUcGCRFIlFyFm2ZF2SQIkPwTlc7kOCHBeWut0IxHIFBB5WGSAATAkAIJIOAgDxwhHsVHo-bQyXIJEotEIDGWClUiAEflQqD0ty9UL81lYlHwxXSlUwnlgpAAZgSsPNSplqpyuqdCORrrV5J2Mmpdt1+sZoTtJvZCphlvRNr5CAALMdkqkyK9PYrvVb3fLnVn0VM-ZSA1qE8GNgzDUgExG7lGY6q46EAKweqP5t3DYIa4Bs7FkXFINRdsqnNMZDMu7Pq-1lAitukVg1M5usqxFzUEEVdEAAGRIbi6hkXLmXk47GNrZqltB964sQA\" rel=\"nofollow noreferrer\">Playground Link to code</a></p>\n"}], "owner": {"reputation": 4515, "user_id": 4808079, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/hXTld.jpg?s=128&g=1", "display_name": "Seph Reed", "link": "https://stackoverflow.com/users/4808079/seph-reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 59539306, "answer_count": 1, "score": 3, "last_activity_date": 1577763715, "creation_date": 1577725793, "question_id": 59534413, "link": "https://stackoverflow.com/questions/59534413/typescript-function-which-returns-one-item-from-an-array-with-proper-type", "title": "Typescript function which returns one item from an array with proper type", "body": "<p>I have a function that returns one item from an array:</p>\n\n<pre><code>function oneItem(arr: any[]) {\n  return arr[~~(Math.random() * arr.length)];\n}\n</code></pre>\n\n<p>I'd like to have approriate types for this.</p>\n\n<hr>\n\n<p><em>What I've Tried:</em></p>\n\n<pre><code>type ValuesOf&lt;T extends any[]&gt;= T[number];\nfunction oneItem&lt;ARRAY extends any[]&gt;(arr: ARRAY): ValuesOf&lt;ARRAY&gt; { ... }\n\nconst a = oneItem([\"foo\", \"bar\"]);\n// typeof a is (string) instead of (\"foo\" | \"bar\")\n</code></pre>\n\n<p>Found here (<a href=\"https://github.com/Microsoft/TypeScript/issues/20965\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/TypeScript/issues/20965</a>)</p>\n\n<hr>\n\n<p><strong>How do I return a single item from an array with proper type?</strong></p>\n\n<hr>\n\n<p>EDIT: I figured it out for readonly arrays:</p>\n\n<pre><code>type ValuesOf&lt;T extends readonly any[]&gt;= T[number];\nfunction oneItem&lt;ARRAY extends readonly any[]&gt;(arr: ARRAY): ValuesOf&lt;ARRAY&gt; { ... }\n\nconst a = oneItem([\"foo\", \"bar\"] as const);\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "json", "angular", "typescript"], "comments": [{"owner": {"reputation": 1757, "user_id": 1433107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/311ae28285121bb38f0ec1b6717d1aca?s=128&d=identicon&r=PG", "display_name": "ulmas", "link": "https://stackoverflow.com/users/1433107/ulmas"}, "edited": false, "score": 0, "creation_date": 1577724115, "post_id": 59533981, "comment_id": 105237827, "body": "what did you try in your template?"}, {"owner": {"reputation": 57, "user_id": 9961200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--GPVEhFXa4o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0tkqO9LqXMzXkaaMeo-hOXXyuK8Q/mo/photo.jpg?sz=128", "display_name": "keerthana bolloju", "link": "https://stackoverflow.com/users/9961200/keerthana-bolloju"}, "reply_to_user": {"reputation": 1757, "user_id": 1433107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/311ae28285121bb38f0ec1b6717d1aca?s=128&d=identicon&r=PG", "display_name": "ulmas", "link": "https://stackoverflow.com/users/1433107/ulmas"}, "edited": false, "score": 0, "creation_date": 1577724477, "post_id": 59533981, "comment_id": 105237957, "body": "&lt;thead&gt;           &lt;tr&gt;             &lt;th scope=&quot;col&quot;&gt;Student Name&lt;/th&gt;             &lt;th scope=&quot;col&quot;&gt;Roll Number&lt;/th&gt;             &lt;th scope=&quot;col&quot;&gt;Total Marks&lt;/th&gt;             &lt;th scope=&quot;col&quot;&gt;Status&lt;/th&gt;           &lt;/tr&gt;         &lt;/thead&gt;         &lt;tbody&gt;           &lt;tr *ngFor=&quot;let data of studentData&quot;&gt;                         &lt;td&gt;{{data.name | titlecase }}&lt;/td&gt;             &lt;td&gt;{{data.rollNumber}}&lt;/td&gt;             &lt;td&gt;{{data.marks.Maths+data.marks.English+data.marks.Science&zwnj;&#8203;}}&lt;/td&gt;             &lt;td&gt;&lt;/td&gt;           &lt;/tr&gt;         &lt;/tbody&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11200368, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OPqzMPs55fg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reHpzHrdkDCN9U5Xwtcec8wu-FFhA/mo/photo.jpg?sz=128", "display_name": "Hellz", "link": "https://stackoverflow.com/users/11200368/hellz"}, "edited": false, "score": 0, "creation_date": 1577725678, "post_id": 59534173, "comment_id": 105238418, "body": "I modified a little my stackblitz. This might work for you"}], "tags": [], "owner": {"reputation": 3, "user_id": 11200368, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OPqzMPs55fg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reHpzHrdkDCN9U5Xwtcec8wu-FFhA/mo/photo.jpg?sz=128", "display_name": "Hellz", "link": "https://stackoverflow.com/users/11200368/hellz"}, "is_accepted": false, "score": 0, "last_activity_date": 1577724457, "creation_date": 1577724457, "answer_id": 59534173, "question_id": 59533981, "link": "https://stackoverflow.com/questions/59533981/i-have-to-print-a-table-with-the-details-if-any-student-has-20-in-any-subject-t/59534173#59534173", "title": "i have to print a table with the details if any student has &lt;20 in any subject the status should be failed and colored red", "body": "<p>i made a stackblitz with a workaround.</p>\n\n<p>This can be upgraded but it's rudimentary</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-4zazjv\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-4zazjv</a></p>\n\n<p>Basically i managed the status with [ngClass] and printed in view the table you want.</p>\n\n<p>added .red class in component.css</p>\n\n<p>Hope this works for you.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 12585637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCC1xtiXv--RNomDjrhV5-awMWg8yc7UzSjLeFn=k-s128", "display_name": "HARI CHARAN K", "link": "https://stackoverflow.com/users/12585637/hari-charan-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1577725703, "creation_date": 1577725703, "answer_id": 59534396, "question_id": 59533981, "link": "https://stackoverflow.com/questions/59533981/i-have-to-print-a-table-with-the-details-if-any-student-has-20-in-any-subject-t/59534396#59534396", "title": "i have to print a table with the details if any student has &lt;20 in any subject the status should be failed and colored red", "body": "<p>Use the <code>ngClass</code> directive for dynamically assigning the classes to the template.\n<a href=\"https://angular.io/api/common/NgClass\" rel=\"nofollow noreferrer\">NgClass-Angular</a></p>\n\n<p>If it's just single style property change use <code>ngStyle</code> directive instead.\n<a href=\"https://angular.io/api/common/NgStyle\" rel=\"nofollow noreferrer\">NgStyle-Angular</a></p>\n\n<p>In your case, the total function can be modified as</p>\n\n<pre><code>  studentData = [];\n  total = [];\n  studentStatus = [];\n    totalScore() {\n        this.total = this.studentData.map(\n          student =&gt;\n            student.marks.English + student.marks.Maths + student.marks.Science\n        );\n      }\n</code></pre>\n\n<p>this will print the status of each student.</p>\n\n<pre><code>      status() {\n        this.studentStatus = this.studentData.map(student =&gt;\n          student.marks.find(mark =&gt; mark &lt; 20) ? \"Failed\" : \"Passed\"\n        );\n      }\n</code></pre>\n\n<p>If you want to map status and marks together do it as below</p>\n\n<pre><code> this.studentStatus = this.studentData.map(student =&gt; ({\n  ...student,\n  status: student.marks.find(mark =&gt; mark &lt; 20) ? \"Failed\" : \"Passed\"\n}));\n</code></pre>\n\n<p><code>studentStatus</code> will have all the student details object along with other property <code>status</code></p>\n\n<p>use <code>*ngFor</code> to loop through and write conditional styles using <code>ngClass</code> or <code>ngStyle</code></p>\n"}], "owner": {"reputation": 57, "user_id": 9961200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--GPVEhFXa4o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0tkqO9LqXMzXkaaMeo-hOXXyuK8Q/mo/photo.jpg?sz=128", "display_name": "keerthana bolloju", "link": "https://stackoverflow.com/users/9961200/keerthana-bolloju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577725928, "creation_date": 1577723603, "last_edit_date": 1577725928, "question_id": 59533981, "link": "https://stackoverflow.com/questions/59533981/i-have-to-print-a-table-with-the-details-if-any-student-has-20-in-any-subject-t", "title": "i have to print a table with the details if any student has &lt;20 in any subject the status should be failed and colored red", "body": "<p>i've tried this for to print the status of a student as \"fail\" if he scores less than 20 in any subject and \"topper\" if the sum of subjects total highest among all and if he fails the total \"tr\" color has to be red font</p>\n\n<pre class=\"lang-js prettyprint-override\"><code> public studentData = [\n     {\n         \"name\":\"rajiv\",\n         \"marks\":{\n             \"Maths\":18,\n             \"English\":21,\n             \"Science\":45\n         },\n         \"rollNumber\":\"KV2017-5A2\"\n     },\n     {\n         \"name\":\"abhishek\",\n         \"marks\":{\n             \"Maths\":43,\n             \"English\":30,\n             \"Science\":37\n         },\n         \"rollNumber\":\"KV2017-5A1\"\n     },\n     {\n         \"name\":\"zoya\",\n         \"marks\":{\n             \"Maths\":42,\n             \"English\":31,\n             \"Science\":50\n         },\n         \"rollNumber\":\"KV2017-5A3\"\n     }\n ]\n\n    totalScore(){\n    this.studentData.forEach(a =&gt; {\n    let res = a.marks.English + a.marks.Maths + a.marks.Science\n    this.total.push(res)\n    console.log(this.total)\n    }\n    )\n    }\n</code></pre>\n\n<p><strong>output : [84, 110, 123]</strong></p>\n\n<pre><code>status(){\nthis.studentData.forEach(a =&gt; {\nlet sample = a.marks\nlet values = [];\n\nfor (var key in sample) {\nvalues.push( sample[key]);\n};\nconsole.log(values);\nlet val = values.find(b =&gt; b&lt;20)\n console.log(val)\n return 'fail' }) } \n</code></pre>\n\n<p><strong>output:[18, 21, 45] \u00a0[43, 30, 37] [42, 31, 50]</strong></p>\n\n<p>how can i print the status accordingly please help me out</p>\n"}, {"tags": ["angular", "typescript", "angular-material-stepper"], "comments": [{"owner": {"reputation": 2687, "user_id": 11769164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cascCTYxkPQ/AAAAAAAAAAI/AAAAAAAAAkQ/KzEi1WfT8Ks/photo.jpg?sz=128", "display_name": "Ashot Aleqsanyan", "link": "https://stackoverflow.com/users/11769164/ashot-aleqsanyan"}, "edited": false, "score": 0, "creation_date": 1577928502, "post_id": 59533846, "comment_id": 105283235, "body": "what do you think about having two steppers instead of one, both with 4 steps?"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1577961356, "post_id": 59533846, "comment_id": 105291397, "body": "Try hiding them using <code>display:none</code> instead of <code>ngIf</code>"}], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 11656847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fc91b90ac05405db574d46e6d0f2ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alejosaur", "link": "https://stackoverflow.com/users/11656847/alejosaur"}, "edited": false, "score": 1, "creation_date": 1577974647, "post_id": 59563396, "comment_id": 105297407, "body": "Thank you very much!  The request is already done: <a href=\"https://github.com/angular/components/issues/12166\" rel=\"nofollow noreferrer\">github.com/angular/components/issues/12166</a> but marked as low-priority :("}], "tags": [], "owner": {"reputation": 2407, "user_id": 6683525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5acbf5ba06acd29815cf4678de449656?s=128&d=identicon&r=PG&f=1", "display_name": "Sasan", "link": "https://stackoverflow.com/users/6683525/sasan"}, "is_accepted": true, "score": 3, "last_activity_date": 1577968238, "creation_date": 1577968238, "answer_id": 59563396, "question_id": 59533846, "link": "https://stackoverflow.com/questions/59533846/angular-material-stepper-paginate/59563396#59563396", "title": "Angular Material Stepper &#39;Paginate&#39;", "body": "<p>The problem is that the <code>mat-step</code> changes to <code>mat-step-header</code> when it renders and any custom class or attribute on it will be gone.</p>\n\n<p>The following code works but it's messy. The best solution is to find another wizard component that has what you need or to submit a request for Material developers on GitHub to add a hidden flag to the <code>mat-step</code>.</p>\n\n<p><a href=\"https://angular-material2-beta-bqcc1y.stackblitz.io\" rel=\"nofollow noreferrer\">StackBlitz</a></p>\n\n<p>Class:</p>\n\n<pre><code>export class AppComponent implements OnInit, AfterViewInit{\n  private ngVersion: string = VERSION.full;\n\n  MAX_STEP = 7;\n\n  @ViewChild('stepper') private myStepper: MatStepper;\n  step: number = 0;\n  page:number = 0;\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    this.rerender();\n  }\n\n  goBack() {\n    if (this.step &gt; 0) {\n      this.step--;\n      this.myStepper.previous();\n    }\n    this.page = this.step &gt; 3 ? 1 : 0;\n    this.rerender();\n  }\n\n  goForward() {\n    if(this.step &lt; this.MAX_STEP) {\n      this.step++;\n      this.myStepper.next();\n    }\n    this.page = this.step &gt; 3 ? 1 : 0;\n    this.rerender() \n  }\n\n  private rerender() {\n\n    let headers = document.getElementsByTagName('mat-step-header');\n    let lines = document.getElementsByClassName('mat-stepper-horizontal-line');\n\n    for (let h of headers) {\n      if (this.page === 0) {\n        if (Number.parseInt(h.getAttribute('ng-reflect-index')) &gt; 3) {\n          h.style.display = 'none';\n        }\n        else {\n          h.style.display = 'flex';\n        }\n      }\n      else if (this.page === 1) {\n        if (Number.parseInt(h.getAttribute('ng-reflect-index')) &lt; 4) {\n          h.style.display = 'none';\n        }\n        else {\n          h.style.display = 'flex';\n        }\n      }\n    }\n\n    for (let i = 0; i &lt; lines.length; i++) {\n      if (this.page === 0) {\n        if (i &gt; 2) {\n          lines[i].style.display = 'none';\n        }\n        else {\n          lines[i].style.display = 'block';\n        }\n      }\n      else if (this.page === 1) {\n        if (i &lt; 4) {\n          lines[i].style.display = 'none';\n        }\n        else {\n          lines[i].style.display = 'block';\n        }\n      }\n    }\n\n  }\n\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;div class=\"solution\"&gt;\n\n  &lt;!---------------------------------------------------------------------------------------&gt;\n  &lt;mat-horizontal-stepper #stepper&gt;\n    &lt;mat-step&gt;\n      Step 1\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 2\n      &lt;input matInput placeholder=\"Address\" required&gt;\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 3\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 4\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 5\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 6\n      &lt;input matInput placeholder=\"Address\" required&gt;\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 7\n    &lt;/mat-step&gt;\n    &lt;mat-step&gt;\n      Step 8\n    &lt;/mat-step&gt;\n    &lt;!-- one option --&gt;\n  &lt;/mat-horizontal-stepper&gt;\n\n  &lt;!-- second option --&gt;\n  &lt;div&gt;\n    &lt;button (click)=\"goBack()\" type=\"button\" [hidden]=\"step === 0\"&gt;Back&lt;/button&gt;\n    &lt;button (click)=\"goForward()\" type=\"button\" [hidden]=\"step === MAX_STEP\"&gt;Next&lt;/button&gt;\n  &lt;/div&gt;\n  &lt;!---------------------------------------------------------------------------------------&gt;\n  Step: {{step}}\n  &lt;br&gt;\n  Page: {{page}}\n\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 8496515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01b87afc63fc16ca3b24761fdd7dcb5?s=128&d=identicon&r=PG&f=1", "display_name": "Seba M", "link": "https://stackoverflow.com/users/8496515/seba-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1601403692, "last_edit_date": 1601403692, "creation_date": 1601402948, "answer_id": 64125257, "question_id": 59533846, "link": "https://stackoverflow.com/questions/59533846/angular-material-stepper-paginate/64125257#64125257", "title": "Angular Material Stepper &#39;Paginate&#39;", "body": "<p>I got the same problem and an got a solution for a scrollable list.</p>\n<p>By setting <code>.mat-horizontal-stepper-header-container</code> to <code>overflow: scroll</code> and <code>.mat-horizontal-stepper-header</code> to <code>overflow: visbile</code> you will get a non squashed and scrollable header bar. Going to the next step (or scrolling the bar) can be easily done programmatically.</p>\n<p><a href=\"https://i.stack.imgur.com/gwZr6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gwZr6.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14256240, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjJm-EeoZ3EqPhJlCckuTOuIxhTq5e4K5zPqp3N=k-s128", "display_name": "Madhura Gore", "link": "https://stackoverflow.com/users/14256240/madhura-gore"}, "is_accepted": false, "score": 1, "last_activity_date": 1617182940, "creation_date": 1617182940, "answer_id": 66885037, "question_id": 59533846, "link": "https://stackoverflow.com/questions/59533846/angular-material-stepper-paginate/66885037#66885037", "title": "Angular Material Stepper &#39;Paginate&#39;", "body": "<p>I was working on the similar problem recently and with a bit of a reference from this answer <a href=\"https://stackoverflow.com/a/59563396/14256240\">https://stackoverflow.com/a/59563396/14256240</a> by <a href=\"https://stackoverflow.com/users/6683525/sasan\">Sasan</a>, I tried to write a more generalized version of the code. I've added a pagination option in the stepper by taking into account min and max index of the steps we want to display at any time. The rest of the steps which don't follow in between this range, have the display as &quot;none&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/tmquM.png\" rel=\"nofollow noreferrer\">Stepper With Pagination</a></p>\n<p>You can refer to the stackblitz over here:\n<a href=\"https://stackblitz.com/edit/angular-mat-stepper-paginator?file=src/app/stepper-paginator1/stepper-paginator1.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-mat-stepper-paginator?file=src/app/stepper-paginator1/stepper-paginator1.component.ts</a></p>\n<p>If you're interested in a more detailed explanation, you can check out my blog over here:\n<a href=\"https://madhura-gore.medium.com/angular-material-stepper-with-pagination-b9e1b091b8f6\" rel=\"nofollow noreferrer\">https://madhura-gore.medium.com/angular-material-stepper-with-pagination-b9e1b091b8f6</a></p>\n"}], "owner": {"reputation": 58, "user_id": 11656847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fc91b90ac05405db574d46e6d0f2ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alejosaur", "link": "https://stackoverflow.com/users/11656847/alejosaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 59563396, "answer_count": 3, "score": 4, "last_activity_date": 1617182940, "creation_date": 1577722932, "last_edit_date": 1577901448, "question_id": 59533846, "link": "https://stackoverflow.com/questions/59533846/angular-material-stepper-paginate", "title": "Angular Material Stepper &#39;Paginate&#39;", "body": "<p>I have many steps in my stepper, so i want to divide it in two parts, i.e. </p>\n\n<p>When users goes inside wizard, the stepper header shows only 1--2--3--4, then, when step 4 is finished, and the user goes into step 5, the header shows 5--6--7--8, and so on for next steps.</p>\n\n<p>Do you know any way to do this?</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tried using <code>*ngIf</code> to hide/unhide steps, but it does remove those steps from the stepper array, so entered information losts when step hides.</p>\n\n<p>Here is my *ngIf approach: <a href=\"https://stackblitz.com/edit/angular-material2-beta-kknvx9\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-material2-beta-kknvx9</a></p>\n\n<p>Also, tried a similar approach with <code>[hidden]</code>, but it does not work at all.</p>\n"}, {"tags": ["node.js", "reactjs", "typescript", "npm", "visual-studio-2019"], "comments": [{"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577722081, "post_id": 59533632, "comment_id": 105236942, "body": "As a js developer, instead of using visual studio you can use vs code its much easier :)"}, {"owner": {"reputation": 89, "user_id": 6795124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ed618d60e6e073fb4b878a39cb8f49?s=128&d=identicon&r=PG&f=1", "display_name": "ElettroAle", "link": "https://stackoverflow.com/users/6795124/elettroale"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577730878, "post_id": 59533632, "comment_id": 105240265, "body": "I can try, but i have an enterprise license for VS2019. I should use that"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577779142, "post_id": 59533632, "comment_id": 105251643, "body": "I dont know much on Visual Studio, but since its an editor it will be similar, so let me conclude so you need to have a react js and node js project. So first thing is install node and npm, after that for easiness you can install create react app using npm i -g create-react-app , g( g flag is for global), Then in your drive create a folder as Sample, inside that folder using terminal run create-react-app client, it will install your react application name as client (your wish whichever name you want - dont use capitialize it wont work ),"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577779151, "post_id": 59533632, "comment_id": 105251646, "body": "after that create a folder  called server in Sample folder , inside server folder do npm init -y (-y flag for yes to all), then install npm i express, and refer docs for simple server then expose a port in server folder and run it using npm run start (add the script in package.json) and go to client folder do npm start thats it , node will be running in 5000(whatever port you mention in code) and react will be running in 3000 (by default)"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577779160, "post_id": 59533632, "comment_id": 105251651, "body": "did you tried in this way ? if you are using the above way you can open Sample Folder in Visual Studio, and you can start coding so both client and server will be there, let me know so i will add the required steps for fast refresh and all as answer"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577780190, "post_id": 59533632, "comment_id": 105251984, "body": "Sure, let me know if it worked for you so i will add it as answer so it will be helpful for other people"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11289104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RTJEIqwq568/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcITc_R8duRf2k4j3o5zh0b7IF9ow/mo/photo.jpg?sz=128", "display_name": "subok lee", "link": "https://stackoverflow.com/users/11289104/subok-lee"}, "is_accepted": false, "score": 2, "last_activity_date": 1602911274, "last_edit_date": 1602911274, "creation_date": 1602910498, "answer_id": 64399140, "question_id": 59533632, "link": "https://stackoverflow.com/questions/59533632/build-script-dont-runs-when-creating-a-node-js-and-react-app-in-visual-studio/64399140#64399140", "title": "build script don&#39;t runs when creating a Node.js and React app in Visual Studio", "body": "<p>I had similar problems like yours.\nI solved this problem by this  undocumented feature of visual studio 2017,2019:</p>\n<pre><code>BY manual editing, \n You can add the following post-build event to package.json\n &quot;-vs-binding&quot;: { &quot;AfterBuild&quot;: [ &quot;build&quot; ] }\n\nby GUI, \n  in task runner explorer window, \n   select &quot;build&quot; task and let popup context menu open using right-mouse-button,\n    select bindings -&gt; After build (make its preceding check box on)\n  this will add &quot;-vs-binding&quot; property to your package.json\n\nEither one is okay. This  works on vs 2017 and may works on vs 2019 either.\n\nVS2017,2019 nodejs project build process seems \n  not to actually call my &quot;build&quot; script at all.\nwe should specify the &quot;build&quot; script as post-build event \n  for vs default nodejs build action.\nIt seems weired. I hope Microsoft solve this fault using  patches.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uOp2J.png\" rel=\"nofollow noreferrer\">task runner explorer capture image</a></p>\n"}], "owner": {"reputation": 89, "user_id": 6795124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ed618d60e6e073fb4b878a39cb8f49?s=128&d=identicon&r=PG&f=1", "display_name": "ElettroAle", "link": "https://stackoverflow.com/users/6795124/elettroale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1602911274, "creation_date": 1577721874, "question_id": 59533632, "link": "https://stackoverflow.com/questions/59533632/build-script-dont-runs-when-creating-a-node-js-and-react-app-in-visual-studio", "title": "build script don&#39;t runs when creating a Node.js and React app in Visual Studio", "body": "<p>I following a step by step guide to configure Visual Studio 2019 in order develop a Node.js-React app.\nThe guide is here:\n<a href=\"https://docs.microsoft.com/en-us/visualstudio/javascript/tutorial-nodejs-with-react-and-jsx?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/javascript/tutorial-nodejs-with-react-and-jsx?view=vs-2019</a></p>\n\n<p>Briefly, the guide tells to configure an npm script (called \"build\") that should be fired when visual studio compiles, in order to generate app-bundle.js through typescript, using the app.tsx which contains a react component.\nThis must be done by adding the following code snipped to package.json</p>\n\n<pre><code>\"scripts\": {\n    \"build\": \"webpack-cli app.tsx --config webpack-config.js\" \n}\n</code></pre>\n\n<p>however it doesn't work, because when i change something in app.tsx and run visual studio debbugger, the web page don't change at all.</p>\n\n<p>If I run the following command using the nuget package console</p>\n\n<pre><code>npm run-script build\n</code></pre>\n\n<p>then it works fine! </p>\n\n<p>So, is this a VS2019 bug, or is there some trick i miss?</p>\n\n<p>Many Thanks for the help</p>\n"}, {"tags": ["reactjs", "typescript", "react-hooks"], "comments": [{"owner": {"reputation": 89878, "user_id": 1945651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9J4D8.png?s=128&g=1", "display_name": "JLRishe", "link": "https://stackoverflow.com/users/1945651/jlrishe"}, "edited": false, "score": 2, "creation_date": 1577720680, "post_id": 59533298, "comment_id": 105236330, "body": "You&#39;re getting that error because your state object doesn&#39;t have a property called <code>setSelectedIndex</code>. It has a property called <code>selectedIndex</code>, so you should be using <code>this.setState({ selectedIndex: 1 })</code>. Incidentally, you seem to have some confusion between state and props."}], "answers": [{"comments": [{"owner": {"reputation": 89878, "user_id": 1945651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9J4D8.png?s=128&g=1", "display_name": "JLRishe", "link": "https://stackoverflow.com/users/1945651/jlrishe"}, "edited": false, "score": 0, "creation_date": 1577720961, "post_id": 59533352, "comment_id": 105236442, "body": "His attempt to use <code>setSelectedIndex</code> as a property name is a mistaken attempt to adapt hooks to non-hooks. The property should be called <code>selectedIndex</code>."}], "tags": [], "owner": {"reputation": 19724, "user_id": 6539317, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/feded6c8f60453abde4e6bf81a877693?s=128&d=identicon&r=PG&f=1", "display_name": "felixmosh", "link": "https://stackoverflow.com/users/6539317/felixmosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1577720641, "creation_date": 1577720641, "answer_id": 59533352, "question_id": 59533298, "link": "https://stackoverflow.com/questions/59533298/how-to-convert-a-react-functional-component-that-uses-hooks-to-a-class/59533352#59533352", "title": "How to convert a React Functional Component that uses hooks to a class?", "body": "<p>You defined the types of your <code>props</code> and <code>state</code> not properly,</p>\n\n<pre><code>interface Props {\n   classes: any;\n   selectedIndex: number;\n}\nclass ClipperDrawer extends React.Component&lt;any, Props&gt; {\n// ------------------------------------------^\n</code></pre>\n\n<p>it should be: </p>\n\n<pre><code>interface Props {\n   classes: any;\n   selectedIndex: number;\n}\n\ninterface State {\n  setSelectedIndex: number;\n// ... rest of the state values\n}\n\nclass ClipperDrawer extends React.Component&lt;Props, State&gt; {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2639, "user_id": 333757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/8VHQy.jpg?s=128&g=1", "display_name": "Amen Ra", "link": "https://stackoverflow.com/users/333757/amen-ra"}, "is_accepted": false, "score": 0, "last_activity_date": 1577721096, "creation_date": 1577721096, "answer_id": 59533454, "question_id": 59533298, "link": "https://stackoverflow.com/questions/59533298/how-to-convert-a-react-functional-component-that-uses-hooks-to-a-class/59533454#59533454", "title": "How to convert a React Functional Component that uses hooks to a class?", "body": "<p>I had <code>setSelectedIndex</code> instead of <code>selectedIndex</code></p>\n"}], "owner": {"reputation": 2639, "user_id": 333757, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/8VHQy.jpg?s=128&g=1", "display_name": "Amen Ra", "link": "https://stackoverflow.com/users/333757/amen-ra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1577721106, "creation_date": 1577720404, "last_edit_date": 1577721106, "question_id": 59533298, "link": "https://stackoverflow.com/questions/59533298/how-to-convert-a-react-functional-component-that-uses-hooks-to-a-class", "title": "How to convert a React Functional Component that uses hooks to a class?", "body": "<p>I have a couple of roadblocks that I am facing when trying to convert a React Functional Component to a class. Here is my functional component code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import * as React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\r\nimport { Link } from 'react-router-dom';\r\nimport './drawer.scss';\r\nimport { useEffect } from 'react';\r\n\r\nconst drawerWidth = 87;\r\nconst styles = {\r\n  root: {\r\n    display: 'flex'\r\n  },\r\n  appBar: {\r\n    zIndex: 2000\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: 3\r\n  }\r\n};\r\n\r\ninterface Props {\r\n  classes: any;\r\n}\r\n\r\nconst ClippedDrawer = (props: Props) =&gt; {\r\n  const [selectedIndex, setSelectedIndex] = React.useState(-1);\r\n\r\n  useEffect(() =&gt; {\r\n    const path: string = window.location.pathname;\r\n\r\n    switch (path) {\r\n      case '/':\r\n        setSelectedIndex(1);\r\n        break;\r\n      default:\r\n        setSelectedIndex(1);\r\n        break;\r\n    }\r\n  }, []);\r\n\r\n  const { classes } = props;\r\n\r\n  const handleClickDashboard = (\r\n    event:\r\n      | React.MouseEvent&lt;HTMLLIElement&gt;\r\n      | React.MouseEvent&lt;HTMLAnchorElement&gt;\r\n      | React.MouseEvent&lt;HTMLDivElement&gt;,\r\n    index: number = 0\r\n  ) =&gt; {\r\n    setSelectedIndex(index);\r\n  };\r\n\r\n  return (\r\n    &lt;div className={classes.root}&gt;\r\n      &lt;Drawer\r\n        className={classes.drawer}\r\n        variant='permanent'\r\n        classes={{\r\n          paper: classes.drawerPaper\r\n        }}\r\n      &gt;\r\n        &lt;div className={classes.toolbar} /&gt;\r\n        &lt;List&gt;\r\n          &lt;Link to={'/'}&gt;\r\n            &lt;ListItem\r\n              button={true}\r\n              selected={selectedIndex === 0}\r\n              onClick={handleClickDashboard}\r\n            &gt;\r\n              &lt;ListItemIcon&gt;\r\n                &lt;DashboardIcon /&gt;\r\n              &lt;/ListItemIcon&gt;\r\n              &lt;ListItemText primary='Dashboard' /&gt;\r\n            &lt;/ListItem&gt;\r\n          &lt;/Link&gt;\r\n          &lt;Divider /&gt;\r\n          &lt;Link to={'/'}&gt;\r\n            &lt;ListItem button={true} selected={selectedIndex === 2}&gt;\r\n              &lt;ListItemIcon&gt;\r\n                &lt;BarChartIcon /&gt;\r\n              &lt;/ListItemIcon&gt;\r\n              &lt;ListItemText primary='Scenario Analysis' /&gt;\r\n            &lt;/ListItem&gt;\r\n          &lt;/Link&gt;\r\n          &lt;Divider /&gt;\r\n          &lt;Link to={'/'}&gt;\r\n            &lt;ListItem button={true} selected={selectedIndex === 3}&gt;\r\n              &lt;ListItemIcon&gt;\r\n                &lt;AssignmentIndIcon /&gt;\r\n              &lt;/ListItemIcon&gt;\r\n              &lt;ListItemText primary='Admin' /&gt;\r\n            &lt;/ListItem&gt;\r\n          &lt;/Link&gt;\r\n        &lt;/List&gt;\r\n        &lt;div className='branding'&gt;\r\n          &lt;p&gt;Powered by&lt;/p&gt;\r\n          &lt;div className='logo' /&gt;\r\n        &lt;/div&gt;\r\n      &lt;/Drawer&gt;\r\n    &lt;/div&gt;\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(ClippedDrawer);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Now here is what I have done to try and convert the functional component into a class:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>interface Props {\r\n   classes: any;\r\n   selectedIndex: number;\r\n}\r\nclass ClipperDrawer extends React.Component&lt;any, Props&gt; {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      classes: [],\r\n      selectedIndex: 0\r\n    };\r\n  }\r\n\r\n  public componentDidMount(): void {\r\n    const path: string = window.location.pathname;\r\n\r\n    switch (path) {\r\n      case '/':\r\n        this.setState({setSelectedIndex: 1})\r\n        break;\r\n      default:\r\n        this.setState({setSelectedIndex: 1})\r\n        break;\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { classes, selectedIndex } = this.props;\r\n    return (\r\n      &lt;div className={classes.root}&gt;\r\n        &lt;Drawer\r\n          className={classes.drawer}\r\n          variant='permanent'\r\n          classes={{\r\n            paper: classes.drawerPaper\r\n          }}\r\n        &gt;\r\n          &lt;div className={classes.toolbar} /&gt;\r\n          &lt;List&gt;\r\n            &lt;Link to={'/'}&gt;\r\n              &lt;ListItem\r\n                button={true}\r\n                selected={selectedIndex === 0}\r\n                onClick={this.handleClickDashboard}\r\n              &gt;\r\n                &lt;ListItemIcon&gt;\r\n                  &lt;DashboardIcon /&gt;\r\n                &lt;/ListItemIcon&gt;\r\n                &lt;ListItemText primary='Dashboard' /&gt;\r\n              &lt;/ListItem&gt;\r\n            &lt;/Link&gt;\r\n            &lt;Divider /&gt;\r\n            &lt;Link to={'/'}&gt;\r\n              &lt;ListItem button={true} selected={selectedIndex === 2}&gt;\r\n                &lt;ListItemIcon&gt;\r\n                  &lt;BarChartIcon /&gt;\r\n                &lt;/ListItemIcon&gt;\r\n                &lt;ListItemText primary='Scenario Analysis' /&gt;\r\n              &lt;/ListItem&gt;\r\n            &lt;/Link&gt;\r\n            &lt;Divider /&gt;\r\n            &lt;Link to={'/'}&gt;\r\n              &lt;ListItem button={true} selected={selectedIndex === 3}&gt;\r\n                &lt;ListItemIcon&gt;\r\n                  &lt;AssignmentIndIcon /&gt;\r\n                &lt;/ListItemIcon&gt;\r\n                &lt;ListItemText primary='Admin' /&gt;\r\n              &lt;/ListItem&gt;\r\n            &lt;/Link&gt;\r\n          &lt;/List&gt;\r\n        &lt;/Drawer&gt;\r\n      &lt;/div&gt;\r\n    );\r\n  }\r\n\r\n  private handleClickDashboard = (\r\n    event:\r\n      | React.MouseEvent&lt;HTMLLIElement&gt;\r\n      | React.MouseEvent&lt;HTMLAnchorElement&gt;\r\n      | React.MouseEvent&lt;HTMLDivElement&gt;,\r\n    index: number = 0\r\n  ) =&gt; {\r\n    const { setSelectedIndex } = this.state;\r\n    this.setState({ setSelectedIndex: index });\r\n  };\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Now I want to remove the <code>useEffect</code> hook and put the logic in the <code>componentDidMount</code> and the <code>handleClickDashboard</code> methods. However I am getting an error saying But I am getting error </p>\n\n<pre><code>Argument of type '{ setSelectedIndex: number; }' is not assignable to parameter of type 'Props | ((prevState: Readonly&lt;Props&gt;, props: Readonly&lt;any&gt;) =&gt; Props | Pick&lt;Props, \"classes\" | \"selectedIndex\"&gt; | null) | Pick&lt;...&gt; | null'. Object literal may only specify known properties, and 'setSelectedIndex' does not exist in type \n</code></pre>\n"}, {"tags": ["html", "reactjs", "typescript", "forms", "react-final-form"], "comments": [{"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577720300, "post_id": 59533217, "comment_id": 105236185, "body": "did you tried putting a console.log(&#39;hitting on submit&#39;) on your submit function"}, {"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577720737, "post_id": 59533217, "comment_id": 105236351, "body": "yes, how you can see i tried to print the object that the onSubmit takes back from the form, but onothing. If i call it with an onClick inside the button, function works"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577720854, "post_id": 59533217, "comment_id": 105236399, "body": "so dealing with forms you can have multiple approaches, if you have multiple fields instead of handling onChange to each field will be using a single form tag which wraps all the fields since event delegation in js is there it will bubble up and each event target value we will get it. you can read more on this"}, {"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577721008, "post_id": 59533217, "comment_id": 105236460, "body": "so wait, what i have to do ? i still don&#39;t understand why it doesnt work"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577721080, "post_id": 59533217, "comment_id": 105236494, "body": "onSubmit function do a e.preventDefault() pass the event from the function where you bind it"}, {"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577721398, "post_id": 59533217, "comment_id": 105236637, "body": "wait, the preventDefault is not handled by the &quot;submitting&quot;? i mean, the disabled of the button depends to it. how the onSubmit function takes the preventDefault? i know that i call iit from the Form, so what do you mean with &quot;pass the event from the function where you bind it?. I want to ask sorry if i don&#39;t get this =/ and thanks for your help!"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577721502, "post_id": 59533217, "comment_id": 105236684, "body": "can you try to create a working codesandbox with minimal reproducable issue so will be able to help you, sorry i got less time thats why"}, {"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577722456, "post_id": 59533217, "comment_id": 105237127, "body": "<a href=\"https://codesandbox.io/s/wonderful-dew-5mue6\" rel=\"nofollow noreferrer\">codesandbox.io/s/wonderful-dew-5mue6</a>"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577722866, "post_id": 59533217, "comment_id": 105237313, "body": "Error in codesandbox"}, {"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577723042, "post_id": 59533217, "comment_id": 105237377, "body": "<a href=\"https://codesandbox.io/s/wonderful-dew-5mue6\" rel=\"nofollow noreferrer\">codesandbox.io/s/wonderful-dew-5mue6</a> it works for me now, i can see the entire form"}, {"owner": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577780131, "post_id": 59533217, "comment_id": 105251956, "body": "you are not using Field Component from the package in the official docs they are using that one, did you tried with that one and checked it, even though you are customizing you need to use that Field component its basically for tracking and triggering"}, {"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "reply_to_user": {"reputation": 5945, "user_id": 6159441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-ENoDf7Ah-Yg/AAAAAAAAAAI/AAAAAAAAAsU/U0xLn0FJlNs/photo.jpg?sz=128", "display_name": "DILEEP THOMAS", "link": "https://stackoverflow.com/users/6159441/dileep-thomas"}, "edited": false, "score": 0, "creation_date": 1577952938, "post_id": 59533217, "comment_id": 105288230, "body": "i&#39;m using th ehooks useField in the InputField component"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "edited": false, "score": 0, "creation_date": 1577953592, "post_id": 59546607, "comment_id": 105288443, "body": "without message: &#39;&#39; in works, thanks, now i will have to understand how to handle the validation errors to every field"}], "tags": [], "owner": {"reputation": 6530, "user_id": 103690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e86f7e41168df55b65e30cdda423e10?s=128&d=identicon&r=PG", "display_name": "Erik R.", "link": "https://stackoverflow.com/users/103690/erik-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1577810665, "creation_date": 1577810665, "answer_id": 59546607, "question_id": 59533217, "link": "https://stackoverflow.com/questions/59533217/how-can-i-trigger-final-form-onsubmit/59546607#59546607", "title": "How can I trigger final form onSubmit?", "body": "<p>If your form is valid, the validation function needs to return <code>{}</code>, not <code>{ message: '' }</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 12626125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYZRzEEBffpH4W0FxdUPquD7bZ1fD5ADALcm55=k-s128", "display_name": "Luca Sorace", "link": "https://stackoverflow.com/users/12626125/luca-sorace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577810665, "creation_date": 1577720019, "last_edit_date": 1577720124, "question_id": 59533217, "link": "https://stackoverflow.com/questions/59533217/how-can-i-trigger-final-form-onsubmit", "title": "How can I trigger final form onSubmit?", "body": "<p>I have a problem with React Final Form. I tried to follow the example on the official documentation, but I still don't understand why my form doesn't want to call the onSubmit as the example, and I'm still trying to understand what the role of handlesubmit is. </p>\n\n<p>I think that the problem is that my fields are called from another component that uses the useField hook.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import React, { FC } from 'react'\r\nimport { Form, Field } from 'react-final-form'\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Button,\r\n  createStyles,\r\n  makeStyles,\r\n  Theme,\r\n} from '@material-ui/core'\r\nimport { render } from 'react-dom'\r\nimport InputField from './InputField'\r\n\r\ninterface InputFinalFormModalProps {\r\n  fieldsValue: { title: string; value: string }[]\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =&gt;\r\n  createStyles({\r\n    annullaBtn: {\r\n      backgroundColor: '#fff',\r\n      border: `1px solid ${theme.palette.secondary.main}`,\r\n      color: theme.palette.secondary.main,\r\n      fontFamily: 'HouschkaHead',\r\n      fontSize: '17px',\r\n      fontWeight: 'bold',\r\n      paddingLeft: '40px',\r\n      paddingRight: '40px',\r\n      marginRight: '15px',\r\n    },\r\n    salvaBtn: {\r\n      fontFamily: 'HouschkaHead',\r\n      fontSize: '17px',\r\n      fontWeight: 'bold',\r\n      paddingLeft: '40px',\r\n      paddingRight: '40px',\r\n      marginLeft: '15px',\r\n    },\r\n    row: {\r\n      width: '100%',\r\n      textAlign: 'end',\r\n    },\r\n    container: {\r\n      '&amp; &gt; .MuiGrid-item': {\r\n        paddingBottom: '20px',\r\n        paddingTop: '0px',\r\n        paddingLeft: '11px',\r\n        paddingRight: '11px',\r\n      },\r\n    },\r\n  })\r\n)\r\n\r\nconst sleep = (ms: number) =&gt; new Promise((resolve) =&gt; setTimeout(resolve, ms))\r\n\r\nconst onSubmit = async (values: {}) =&gt; {\r\n  await sleep(300)\r\n  console.log(JSON.stringify(values))\r\n}\r\n\r\nconst validate = (values: {}) =&gt; {\r\n  const errors = {message: ''}\r\n   if (!Object.values(values).toString()) {\r\n         errors.message = \"Required\";\r\n       }  \r\n\r\n  return errors\r\n}\r\n\r\nconst InputFinalFormModal: FC&lt;InputFinalFormModalProps&gt; = ({ fieldsValue }) =&gt; {\r\n  const classes = useStyles()\r\n  return (\r\n    &lt;Form\r\n      onSubmit={onSubmit}\r\n      validate={validate}\r\n      render={({ handleSubmit, form, submitting, pristine, values }) =&gt; (\r\n        &lt;form onSubmit={handleSubmit}&gt;\r\n          &lt;Grid container className={classes.container}&gt;\r\n            {fieldsValue.map((field) =&gt; {\r\n              return (\r\n                &lt;InputField title={field.title} value={field.value} /&gt;\r\n              )\r\n            })}\r\n            \r\n          &lt;/Grid&gt;\r\n          &lt;Box className={classes.row} mt=\"20px\"&gt;\r\n            &lt;Button className={classes.annullaBtn}&gt;Annulla&lt;/Button&gt;\r\n            &lt;Button\r\n              type=\"submit\"\r\n              onClick={() =&gt; onSubmit(values)}\r\n              className={classes.salvaBtn}\r\n              disabled={submitting || pristine}\r\n            &gt;\r\n              Salva\r\n            &lt;/Button&gt;\r\n          &lt;/Box&gt;\r\n          {/* &lt;button\r\n            type=\"submit\"\r\n            onClick={() =&gt; onSubmit(values)}\r\n            disabled={submitting || pristine}\r\n          &gt;\r\n            Submit\r\n          &lt;/button&gt;\r\n          &lt;button\r\n            type=\"button\"\r\n            onClick={form.reset}\r\n            disabled={submitting || pristine}\r\n          &gt;\r\n            Reset\r\n          &lt;/button&gt; \r\n          &lt;pre&gt;{JSON.stringify(values)}&lt;/pre&gt;*/}\r\n        &lt;/form&gt;\r\n      )}\r\n    /&gt;\r\n  )\r\n}\r\n\r\nInputFinalFormModal.displayName = 'InputFinalFormModal'\r\n\r\nexport default InputFinalFormModal</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And here my snippet about the inputField </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import React, { FC, useEffect, useState } from 'react'\r\nimport { useField } from 'react-final-form'\r\nimport {\r\n  Box,\r\n  Grid,\r\n  createStyles,\r\n  makeStyles,\r\n  Theme,\r\n  withStyles,\r\n} from '@material-ui/core'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport { parse } from 'path'\r\n\r\ninterface InputFieldProps {\r\n  title: string\r\n  value: string\r\n}\r\n\r\n\r\nconst BootstrapInput = withStyles((theme: Theme) =&gt;\r\n  createStyles({\r\n    input: {\r\n      borderRadius: 4,\r\n      position: 'relative',\r\n      backgroundColor: theme.palette.common.white,\r\n      border: '1px solid #bdc7d3',\r\n      width: '100%',\r\n      padding: '10px 12px',\r\n      transition: theme.transitions.create(['border-color', 'box-shadow']),\r\n      // Use the system font instead of the default Roboto font.\r\n      fontFamily: 'Montserrat',\r\n      fontSize: '14px',\r\n      lineHeight: '1.21',\r\n      fontWeight: 'normal',\r\n      color: theme.palette.text.primary,\r\n      '&amp;:focus': {\r\n        boxShadow: 'inset 0 0 12px 4px rgba(0, 179, 152, 0.05)',\r\n        borderColor: theme.palette.secondary.main,\r\n      },\r\n    },\r\n  })\r\n)(InputBase)\r\n\r\nconst useStyles = makeStyles((theme: Theme) =&gt;\r\n  createStyles({\r\n    inputTitle: {\r\n      color: '#7C92A8',\r\n      fontSize: '19px',\r\n      lineHeight: 1.76,\r\n      transition: 'font-weight 0.5s, color 0.5s',\r\n      '&amp;.Mui-focused': {\r\n        color: theme.palette.secondary.main,\r\n        fontWeight: 'bold',\r\n      },\r\n    },\r\n    requiredText:{\r\n      color: 'red'\r\n    }\r\n  })\r\n)\r\n\r\nconst InputField: FC&lt;InputFieldProps&gt; = ({ title, value}) =&gt; {\r\n  let {input, meta} = useField(title)\r\n  const classes = useStyles()\r\n  let [handleValidate, setHandleVlidate] = useState(false)\r\n  let [required, setRequired] = useState('')\r\n\r\n  useEffect(() =&gt; {\r\n   if(parseInt(value)){\r\n     setRequired('valore non valido')\r\n     setHandleVlidate(true)\r\n     /* if(isNaN(input.value)){\r\n     } */\r\n   }else{\r\n\r\n     if(!input.value){\r\n       setRequired('Campo Obbligatorio')\r\n       setHandleVlidate(true)  \r\n     }\r\n   }\r\n  },[input.value])\r\n\r\n\r\n  return (\r\n    &lt;Grid item xs={12} md={6}&gt;\r\n      &lt;InputLabel\r\n        shrink\r\n        htmlFor=\"bootstrap-input\"\r\n        className={classes.inputTitle}\r\n      &gt;\r\n        {title}\r\n      &lt;/InputLabel&gt;\r\n      &lt;BootstrapInput\r\n        {...input}\r\n        defaultValue={value}\r\n        id=\"bootstrap-input\"\r\n        placeholder={value}\r\n      /&gt;\r\n       {meta.touched &amp;&amp; !input.value &amp;&amp; (\r\n&lt;span className={classes.requiredText}&gt;{required}&lt;/span&gt;\r\n      )}\r\n    &lt;/Grid&gt;\r\n    /*    &lt;Grid item xs={6} lg={6}&gt;\r\n      &lt;Box&gt;\r\n        &lt;label className={classes.inputTitle} onClick={() =&gt; console.log('check')}&gt;{title}&lt;/label&gt;\r\n      &lt;/Box&gt;\r\n      &lt;input {...field.input} className={classes.inputField} placeholder={value} /&gt;\r\n      {field.meta.touched &amp;&amp; field.meta.error &amp;&amp; (\r\n        &lt;span&gt;{field.meta.error}&lt;/span&gt;\r\n      )}\r\n        &lt;/Grid&gt; */\r\n  )\r\n}\r\n\r\nInputField.displayName = 'InputField'\r\n\r\nexport default InputField</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["json", "angular", "typescript", "kendo-grid", "webapi"], "comments": [{"owner": {"reputation": 668, "user_id": 9941039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--yKAej3kSAA/AAAAAAAAAAI/AAAAAAAAAAA/_Mnf-QVPB6o/photo.jpg?sz=128", "display_name": "TintinSansYeux", "link": "https://stackoverflow.com/users/9941039/tintinsansyeux"}, "edited": false, "score": 0, "creation_date": 1577719599, "post_id": 59533054, "comment_id": 105235844, "body": "this.gridData = typeof data === Array ? data : [data]"}, {"owner": {"reputation": 97, "user_id": 4239130, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e714b571ee53f7721023efea3e0931f8?s=128&d=identicon&r=PG&f=1", "display_name": "ASP.NET", "link": "https://stackoverflow.com/users/4239130/asp-net"}, "reply_to_user": {"reputation": 668, "user_id": 9941039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--yKAej3kSAA/AAAAAAAAAAI/AAAAAAAAAAA/_Mnf-QVPB6o/photo.jpg?sz=128", "display_name": "TintinSansYeux", "link": "https://stackoverflow.com/users/9941039/tintinsansyeux"}, "edited": false, "score": 0, "creation_date": 1577719802, "post_id": 59533054, "comment_id": 105235928, "body": "Kendo Grid binding UI format  as: &lt;kendo-grid [data]=&quot;gridData&quot; [height]=&quot;150&quot; style=&quot;float:left;&quot;&gt;     &lt;kendo-grid-column field=&quot;ID&quot; title=&quot;ID&quot; width=&quot;50&quot;&gt;     &lt;/kendo-grid-column&gt;     &lt;kendo-grid-column field=&quot;manufacturers.manufacturerName&quot; title=&quot;manufacturerName&quot; width=&quot;50&quot;&gt;     &lt;/kendo-grid-column&gt;   &lt;/kendo-grid&gt;"}, {"owner": {"reputation": 1825, "user_id": 11317776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwFLW.jpg?s=128&g=1", "display_name": "DUDANF", "link": "https://stackoverflow.com/users/11317776/dudanf"}, "edited": false, "score": 0, "creation_date": 1577721182, "post_id": 59533054, "comment_id": 105236537, "body": "This is a horribly written question. Kindly improve. You don&#39;t need good english, you simply need good formatting."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 4239130, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e714b571ee53f7721023efea3e0931f8?s=128&d=identicon&r=PG&f=1", "display_name": "ASP.NET", "link": "https://stackoverflow.com/users/4239130/asp-net"}, "edited": false, "score": 0, "creation_date": 1577720244, "post_id": 59533193, "comment_id": 105236154, "body": ",@MEDZ ,I there any way to remove Square brackets without mention array object names to use commonly.@Adrita Sharma"}, {"owner": {"reputation": 97, "user_id": 4239130, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e714b571ee53f7721023efea3e0931f8?s=128&d=identicon&r=PG&f=1", "display_name": "ASP.NET", "link": "https://stackoverflow.com/users/4239130/asp-net"}, "edited": false, "score": 0, "creation_date": 1577722055, "post_id": 59533193, "comment_id": 105236925, "body": "Could you plz help to this JSon data loop through,To remove square brackets.@Adrita Sharma"}], "tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1577719892, "creation_date": 1577719892, "answer_id": 59533193, "question_id": 59533054, "link": "https://stackoverflow.com/questions/59533054/convert-or-format-data-of-nested-arrays-in-json-objects-to-nested-json-objects-i/59533193#59533193", "title": "Convert or Format data of Nested Arrays in JSON Objects to Nested JSON Objects in Typescript For Bind Kendo Grid", "body": "<p>Try like this:</p>\n\n<pre><code>  output = [];\n\n  constructor() {\n    this.output.push({\n      ID: this.data.ID,\n      Ratio: this.data.Ratio,\n      UOM: this.data.UOM,\n      manufacturers: {\n        manufacturerName: this.data.manufacturers[0].manufacturerName,\n        categories: {\n          categoryName: this.data.manufacturers[0].categories[0].categoryName,\n          products: this.data.manufacturers[0].categories[0].products[0]\n        }\n      }\n    });\n  }\n</code></pre>\n\n<p><strong><a href=\"https://stackblitz.com/edit/angular-cbjgbz?embed=1&amp;file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">Working Demo</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 4239130, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e714b571ee53f7721023efea3e0931f8?s=128&d=identicon&r=PG&f=1", "display_name": "ASP.NET", "link": "https://stackoverflow.com/users/4239130/asp-net"}, "edited": false, "score": 0, "creation_date": 1578049121, "post_id": 59534183, "comment_id": 105321079, "body": "Could you please Format below data = {  &quot;ID&quot;:29614,&quot;Ratio&quot;:8,&quot;UOM&quot;:&quot;IN&quot;,   &quot;manufacturers&quot;: [{     &quot;manufacturerName&quot;: &quot;john&quot;,     &quot;categories&quot;: [{       &quot;categoryName&quot;: &quot;Beverage&quot;,       &quot;products&quot;: [{ &quot;uid&quot;: &quot;567&quot;, &quot;productID&quot;: 130927, &quot;name&quot;: &quot;After Shocks Popping Candy 1.06&quot;}]     }]   }     ,     {       &quot;manufacturerName&quot;: &quot;Dan&quot;,       &quot;categories&quot;: [{         &quot;categoryName&quot;: &quot;Organization&quot;,         &quot;products&quot;: [{ &quot;uid&quot;: &quot;65&quot;, &quot;productID&quot;: 5656, &quot;name&quot;: &quot;After Shocks Popping Candy 2.06&quot;}]       }]       }   ] }   @David Fagerburg"}, {"owner": {"reputation": 97, "user_id": 4239130, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e714b571ee53f7721023efea3e0931f8?s=128&d=identicon&r=PG&f=1", "display_name": "ASP.NET", "link": "https://stackoverflow.com/users/4239130/asp-net"}, "edited": false, "score": 0, "creation_date": 1578049685, "post_id": 59534183, "comment_id": 105321323, "body": "Could you please help me to format of multiple size of data @David Fagerburg"}], "tags": [], "owner": {"reputation": 21, "user_id": 11449009, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M8XfWe7NWBw/AAAAAAAAAAI/AAAAAAAAHsc/eF3tF5sscq4/photo.jpg?sz=128", "display_name": "David Fagerburg", "link": "https://stackoverflow.com/users/11449009/david-fagerburg"}, "is_accepted": false, "score": 1, "last_activity_date": 1577724508, "creation_date": 1577724508, "answer_id": 59534183, "question_id": 59533054, "link": "https://stackoverflow.com/questions/59533054/convert-or-format-data-of-nested-arrays-in-json-objects-to-nested-json-objects-i/59534183#59534183", "title": "Convert or Format data of Nested Arrays in JSON Objects to Nested JSON Objects in Typescript For Bind Kendo Grid", "body": "<p>If all you want to do is remove the square brackets, you could stringify the JSON, use a regular expression to remove all '[' and ']', and then parse it back into a JSON object: </p>\n\n<pre><code>getNoArrayJSON(data: {}): {} {\n    let dataString = JSON.stringify(data);\n    dataString = dataString.replace(/(\\[)|(\\])/g, \"\");\n    return JSON.parse(dataString);\n});\n</code></pre>\n\n<p>I wouldn't do this unless you know that the arrays in the response you're dealing with will only ever have a size of 1.</p>\n\n<p>Working Example: <a href=\"https://stackblitz.com/edit/typescript-jvhrbq\" rel=\"nofollow noreferrer\">RegEx Remove arrays</a> </p>\n\n<p>If you're set on putting that result in an array, <code>let newData = [getNoArrayJSON(data)];</code> and the format will exactly match your desired output.</p>\n"}], "owner": {"reputation": 97, "user_id": 4239130, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e714b571ee53f7721023efea3e0931f8?s=128&d=identicon&r=PG&f=1", "display_name": "ASP.NET", "link": "https://stackoverflow.com/users/4239130/asp-net"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1578049507, "creation_date": 1577719196, "last_edit_date": 1578049507, "question_id": 59533054, "link": "https://stackoverflow.com/questions/59533054/convert-or-format-data-of-nested-arrays-in-json-objects-to-nested-json-objects-i", "title": "Convert or Format data of Nested Arrays in JSON Objects to Nested JSON Objects in Typescript For Bind Kendo Grid", "body": "<p>I have been trying to convert a data of Nested Arrays in JSON Objects to Nested JSON Objects in Typescript. This is return data from rest api as getting in typescript:</p>\n\n<p>Nested array contains square brackets.</p>\n\n<pre><code>data={ \"ID\":29614,\"Ratio\":8,\"UOM\":\"IN\", \"manufacturers\": [{ \"manufacturerName\": \"john\", \"categories\": [{ \"categoryName\": \"Beverage\", \"products\": [{ \"uid\": \"567\", \"productID\": 130927, \"name\": \"After Shocks Popping Candy 1.06\"}] }] } , { \"manufacturerName\": \"Dan\", \"categories\": [{ \"categoryName\": \"Organization\", \"products\": [{ \"uid\": \"65\", \"productID\": 5656, \"name\": \"After Shocks Popping Candy 2.06\"}] }] } ] }\n\n\nFormat I need is:\n\ndata=[{ \"ID\":29614,\"Ratio\":8,\"UOM\":\"IN\", \"manufacturers\": { \"manufacturerName\": \"john\", \"categories\": { \"categoryName\": \"Beverage\", \"products\": { \"uid\": \"567\", \"productID\": 130927, \"name\": \"After Shocks Popping Candy 1.06\"} } } , { \"manufacturerName\": \"Dan\", \"categories\": { \"categoryName\": \"Organization\", \"products\": { \"uid\": \"65\", \"productID\": 5656, \"name`enter code here`\": \"After Shocks Popping Candy 2.06\"} } } }]\n\nOutput nested array should remove square brackets.\n\nI have tried this as\n\npublic gridData: any[];\n//gridData  for bind Kendo grid \n\nreturn this.restApi.getProductBin().subscribe((data: {}) =&gt; {\nthis.gridData = Array.of(data); //convert to array\n}\n\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic4"], "comments": [{"owner": {"reputation": 668, "user_id": 9941039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--yKAej3kSAA/AAAAAAAAAAI/AAAAAAAAAAA/_Mnf-QVPB6o/photo.jpg?sz=128", "display_name": "TintinSansYeux", "link": "https://stackoverflow.com/users/9941039/tintinsansyeux"}, "edited": false, "score": 0, "creation_date": 1577717761, "post_id": 59532722, "comment_id": 105235078, "body": "You need FormArray <a href=\"https://alligator.io/angular/reactive-forms-formarray-dynamic-fields/\" rel=\"nofollow noreferrer\">alligator.io/angular/reactive-forms-formarray-dynamic-fields</a>"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 668, "user_id": 9941039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--yKAej3kSAA/AAAAAAAAAAI/AAAAAAAAAAA/_Mnf-QVPB6o/photo.jpg?sz=128", "display_name": "TintinSansYeux", "link": "https://stackoverflow.com/users/9941039/tintinsansyeux"}, "edited": false, "score": 0, "creation_date": 1577717915, "post_id": 59532722, "comment_id": 105235148, "body": "@MsuArven Yes, I went through that too. But I have a fixed set of form control names no. So how can I apply that? And the article where it created upfront too. i.e. not like my use case."}, {"owner": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "edited": false, "score": 0, "creation_date": 1577718200, "post_id": 59532722, "comment_id": 105235248, "body": "The example is exactly your use case : you create a function returning a new formgroup with your fixed form controls and another one to push this new formgroup to the formarray. Finally you just need to call the last function with your &#39;add&#39; button"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "edited": false, "score": 0, "creation_date": 1577718354, "post_id": 59532722, "comment_id": 105235307, "body": "@G&#233;r&#244;meGrignon Please give pseudo kind of implementation on the answer section. That will really help me."}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577719024, "post_id": 59532722, "comment_id": 105235598, "body": "Is all this going to be a single form? or it is collection of different small forms?"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577719373, "post_id": 59532722, "comment_id": 105235746, "body": "@Plochie I need to save all data using the <code>Save</code> button. So it would be nice if I have 1 form. Any clue?"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577719926, "post_id": 59532722, "comment_id": 105235980, "body": "Thanks. It seems no different than the normal way. Since I have never done this kind of thing I thought it will have a different approach. I&#39;ll try that. @Plochie"}], "answers": [{"comments": [{"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "edited": false, "score": 0, "creation_date": 1577719611, "post_id": 59533106, "comment_id": 105235847, "body": "This seems great. I&#39;ll try that and come back. One question. Can you tell me how to get all those values to <code>Save</code> button? i.e. I need to save all at once."}, {"owner": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "reply_to_user": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "edited": false, "score": 0, "creation_date": 1577719766, "post_id": 59533106, "comment_id": 105235912, "body": "you&#39;ll get the result with <code>this.form.value.schoolPaths</code> as an array in this case."}], "tags": [], "owner": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "is_accepted": true, "score": 2, "last_activity_date": 1577719468, "creation_date": 1577719468, "answer_id": 59533106, "question_id": 59532722, "link": "https://stackoverflow.com/questions/59532722/create-forms-according-to-the-user-action-but-not-at-once/59533106#59533106", "title": "Create forms according to the user action. But not at once", "body": "<p>Based on the form you need to reproduce :</p>\n\n<p>Create a function returning a formGroup to populate your array</p>\n\n<pre><code>createSchoolPath(): FormGroup {\n  return this.fb.group({\n    schoolName: '',\n    level: '',\n    topics: [],\n    inProgress: true\n})\n}\n</code></pre>\n\n<p>You then need to create your parent form which include your form array (and populate it once for the first form you want to show upfront) :</p>\n\n<pre><code>constructor( private fb: formBuilder) {}\n\nform: FormGroup = this.fb.group({\n  schoolPaths: this.fb.array([this.createSchoolPaths])\n});\n\n</code></pre>\n\n<p>Finally as you want to let users add more sections, you need a way to populate your array :</p>\n\n<pre><code>/* component */\n\naddSchoolPath(): void {\n  const paths = this.form.get('schoolPaths') as FormArray;\n  // use the first function to push a new formGroup\n  paths.push(this.createSchoolPath());\n}\n\n&lt;!-- html --&gt;\n&lt;button (click)=\"addSchoolPath()\"&gt;+&lt;/button&gt;\n</code></pre>\n\n<p>To display it :</p>\n\n<pre><code>&lt;form [formGroup]=\"form\"&gt;\n  &lt;div formArrayName=\"schoolPaths\" *ngFor=\"let path of form.get('schoolPaths').controls; let i = index\"&gt;\n    &lt;div [formGroupName]=\"i\"&gt;\n      &lt;!-- place your inputs here --&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;button (click)=\"addSchoolPath()\"&gt;+&lt;/button&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577721383, "creation_date": 1577721383, "answer_id": 59533514, "question_id": 59532722, "link": "https://stackoverflow.com/questions/59532722/create-forms-according-to-the-user-action-but-not-at-once/59533514#59533514", "title": "Create forms according to the user action. But not at once", "body": "<p>To complementary G\u00e9r\u00f4me's answer, you can also use directly a formArray</p>\n\n<pre><code>createGroup()\n{\n   return new FormGroup({\n      school:new FormControl(),\n      level:new FormControl(),\n      topic:new FormControl(),\n      progress:new FormControl()\n   })\n}\n</code></pre>\n\n<p>At first you has a formArray</p>\n\n<pre><code>formArray:FormArray=new FormArray([this.createGroup()])\n</code></pre>\n\n<p>The add button is simple</p>\n\n<pre><code>add()\n{\n   this.formArray.push(this.createGroup())\n}\n</code></pre>\n\n<p>And the .html</p>\n\n<pre><code>&lt;form [formGroup]=\"formArray\"&gt;\n   &lt;div *ngFor=\"let group of formArray.controls\" [formGroup]=\"group\"&gt;\n      &lt;input formControlName=\"school\"&gt;\n      &lt;input formControlName=\"level\"&gt;\n      &lt;input formControlName=\"topic\"&gt;\n      &lt;input formControlName=\"progress\"&gt;\n   &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>See that, in general we use a formArray inside a formGroup, But in case you only want a FormArray, you can loop over the formArray.controls directly</p>\n"}], "owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59533106, "answer_count": 2, "score": -2, "last_activity_date": 1577721383, "creation_date": 1577717596, "last_edit_date": 1577717967, "question_id": 59532722, "link": "https://stackoverflow.com/questions/59532722/create-forms-according-to-the-user-action-but-not-at-once", "title": "Create forms according to the user action. But not at once", "body": "<p>I have to build a form like so.</p>\n\n<p>This shows upfront. i.e. without user interaction.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gVgUn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gVgUn.png\" alt=\"enter image description here\"></a></p>\n\n<p>When a user pressed the + button it creates the same kind of UI again like so.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qQXW3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qQXW3.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see that the user can add any number of same UI parts again and again. Can you tell me how to do this?</p>\n\n<p>I went through number of articles. But it has the whole form created once. i.e. not like my use case. Any direction for this?</p>\n\n<p>Example: <a href=\"https://jasonwatmore.com/post/2019/06/25/angular-8-dynamic-reactive-forms-example\" rel=\"nofollow noreferrer\">https://jasonwatmore.com/post/2019/06/25/angular-8-dynamic-reactive-forms-example</a></p>\n\n<p>and <a href=\"https://alligator.io/angular/reactive-forms-formarray-dynamic-fields/\" rel=\"nofollow noreferrer\">https://alligator.io/angular/reactive-forms-formarray-dynamic-fields/</a></p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577717690, "post_id": 59532716, "comment_id": 105235042, "body": "What do you ask exactly? <code>-1</code> is a valid return value from <code>findIndex</code>, meaning &quot;nothing found&quot;. So nothing was found in your case. (Also side comment: if you put <code>any</code> instead of proper type just to silence a warning, why do you bother to use TypeScript at all?)"}, {"owner": {"reputation": 534, "user_id": 3297547, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/aX6Aq.jpg?s=128&g=1", "display_name": "Chetan Hirapara", "link": "https://stackoverflow.com/users/3297547/chetan-hirapara"}, "reply_to_user": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577717775, "post_id": 59532716, "comment_id": 105235081, "body": "no, answer is 5 but is returning as -1"}, {"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577717981, "post_id": 59532716, "comment_id": 105235172, "body": "Because your test is wrong. The computer does exactly what you&#39;ve asked. It should be <code>(i.manager === false)</code> or the function you supply returns <code>undefined</code> and no elements are found, obviously."}, {"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577718049, "post_id": 59532716, "comment_id": 105235194, "body": "<code>(i =&gt; {i === 1})(1);</code> will be <code>undefined</code>; <code>(i =&gt; (i === 1))(1);</code> will be <code>true</code>"}, {"owner": {"reputation": 534, "user_id": 3297547, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/aX6Aq.jpg?s=128&g=1", "display_name": "Chetan Hirapara", "link": "https://stackoverflow.com/users/3297547/chetan-hirapara"}, "reply_to_user": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577718207, "post_id": 59532716, "comment_id": 105235253, "body": "@avysk - i needs some type here, eventhough it is taking any implicitly but it didn&#39;t work. ihave tested this in console of browser and it is working as i mentioned in que first code"}, {"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "edited": false, "score": 0, "creation_date": 1577718294, "post_id": 59532716, "comment_id": 105235288, "body": "Types do not affect how the code is executed. You wrote non-working JavaScirpt because your filter function returns <code>undefined</code> -- it won&#39;t work with TypeScript either, no matter what types you add. Start with fixing the filter function definition."}], "owner": {"reputation": 534, "user_id": 3297547, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/aX6Aq.jpg?s=128&g=1", "display_name": "Chetan Hirapara", "link": "https://stackoverflow.com/users/3297547/chetan-hirapara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577717989, "creation_date": 1577717550, "last_edit_date": 1577717989, "question_id": 59532716, "link": "https://stackoverflow.com/questions/59532716/error-ts7006-parameter-i-implicitly-has-an-any-type-in-reactjs-file", "title": "error TS7006: Parameter &#39;i&#39; implicitly has an &#39;any&#39; type. in reactJs file", "body": "<p>How to write below code in ReactJs - typescrpit file(index.tsx)</p>\n\n<pre><code>props.emplList.findIndex(i =&gt; i.manager === false);\n</code></pre>\n\n<p>I have already tried</p>\n\n<pre><code>props.emplList.findIndex((i:any) =&gt; {i.manager === false});\n</code></pre>\n\n<p>but it will <strong>return -1</strong> which is incorrect. Expected value is > 0 </p>\n\n<p>How to write this line with compitable with tsx file? \nHow to resolve this error <strong>Parameter 'i' implicitly has an 'any' type</strong> will be solve ?</p>\n"}, {"tags": ["typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1577726564, "post_id": 59532501, "comment_id": 105238750, "body": "Let the compiler infer the return type. A function explicitly typed as returning <code>any</code> indicates a misunderstanding in 99% of cases."}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1615561617, "last_edit_date": 1615561617, "creation_date": 1577759278, "answer_id": 59538917, "question_id": 59532501, "link": "https://stackoverflow.com/questions/59532501/type-inference-using-extended-type-in-typescript/59538917#59538917", "title": "Type inference using extended type in typescript", "body": "<p>This is essentially a missing feature in TypeScript (see <a href=\"https://github.com/microsoft/TypeScript/issues/24085\" rel=\"nofollow noreferrer\">microsoft/TypeScript#24085</a>); the compiler cannot reason very well about an unspecified generic type parameter, such as <code>T</code> is inside the implementation of <code>getTest()</code>.  When you <em>call</em> <code>getTest()</code>, <code>T</code> is specified, and the return type is computed properly then.  But when you <em>implement</em> <code>getTest()</code>, <code>T</code> is still an unspecified/unresolved type parameter, and the compiler essentially gives up.  Specifically, it does not try to use <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#control-flow-based-type-analysis\" rel=\"nofollow noreferrer\">control-flow-based type analysis</a> to narrow <code>T extends Test1 | Test2</code> to <code>Test1</code> or <code>Test2</code> based on the value of <code>t.key</code>.  This means that at present, generic type signatures like this are more useful to function callers than they are to function implementers.</p>\n<p>Perhaps someday there will be a solution to this in the language.  For now, there are workarounds.  The one that I use most often in this case is to add a single <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">overload signature</a> to the function.  Let the callers see the generic overload signature that's useful for them, while the implementation sees the non-generic union-typed signature that's useful for it:</p>\n<pre><code>// call signature, seen by callers\nfunction getTest&lt;T extends tests&gt;(t: T): ResourceModel&lt;T['key']&gt;;\n// implementation signature, seen only by implementation\nfunction getTest(t: tests): ResourceModel&lt;keys&gt; {\n  switch (t.key) {\n    case keys.key1: {\n      const d = t.payload; // string \n      const ret: ResourceModel&lt;keys.key1&gt; = { returnedObject1: 123 };\n      return ret;\n    } case keys.key2: {\n      const d = t.payload; // number\n      const ret: ResourceModel&lt;keys.key2&gt; = { returnedObject2: '123' };\n      return ret;\n    }\n  }\n}\n</code></pre>\n<p>This still isn't truly type safe; the above would not complain if you switched around the <code>return</code> statements so that <code>ReturnTypeOfTest1</code> comes back for <code>Test2</code> and vice versa.  But it's close to the best we can do here, at least for now, so you need to be careful in your implementation.</p>\n<p>Let's just make sure the call works as desired:</p>\n<pre><code>getTest({ key: keys.key1, payload: &quot;1&quot; }); // ReturnTypeOfTest1\ngetTest({ key: keys.key2, payload: 1 }); // ReturnTypeOfTest2\n</code></pre>\n<p>Looks good.  Anyway, I hope this helps; good luck!</p>\n<p><a href=\"https://www.typescriptlang.org/play/#code/PTAEBcAsFNQGwJYGdygPYDNQGtoE8kJIBDVYgJ1gFcloATUDNc0AY0tITQDsAoablQC2OfIQDevUKLwBGUAF5QsgDRSZAJkWgNvAL68QoGJVAVYCbuGjkMxVtCQqipCAljR7kGaADuCKFAAB2I8ODRiOmcoVyRINCo4BgAjWCDyNAA3BDp6ADpDMABBVnAqYjg4PGcQsIiGZD9Q0CFmWFY0ISC4aAAPUAAKYm40KBtQS2tbe0cASlBkqlQe8AByQlxoIInUJAQunt5JmzsHUAAVR3B5SWlcPAAuGSQ8+9kAbnVa8MinlHJLABzT4GY7TM6XFBaW4yJ73F73DSfaTfepPQRCVLkEG8QpERqNMYQPBBaDREioDpCRwQNBEWAYKjcUpcbgLaDhXy8cAk2DWFCEJSQ66gAA+FyuSNxRysJxmoAAStAyuRuOdeQB5DDCm6gSgq7j0DXJABW0FKsnRwix71AoNl4NgSoN6tJWuF0L1yqoqqNpvN4A0f3AAO4wLteKgBMI8V8oAAkqsRB1uBgEICfUC-BTQHEEkl2V6DfRQLlSdw6FmePSfJGYEWfWyeaSJoRaKhwHSAERKpAJcgOACyaFycC7zl8kAQrG8lgwNkIxB8GAyIiXjOZ4FZwVCPzoeOGDVyVgQaZpk9cfXs4CqO1z8USDH1jZlU1OsGHo-dV1AMIA2vCrz4LIAC6TzOo2rrQN+KAfOoAFiEBeAaGBireqqUEwYGOLNk6jj9kOI4cgAPAqoB9NYFYbGIAB82ifhyWF-gqIHIriRisBUcC5um3CkD6ZK5tAAgLHgbBcQuvAbiy1aAsqwrEec5G9JRdCEPy4BIDRAzgE85yzOB+E+oRo6KX+qz3KsIE0Z8Rj7N00DUlYnDVnsgJ8Sqgm0CJPC3skYn2T0TngC5fDSVusnyVcOlPBpSAGWhfbGdADFwMR8J0TCSD+OAM6DOASHzDC0icbQzxIZav7qNIJU8CgpbaAVqKRLaRj-Fm1U1Sm9X6oZSUDilRFpYBbx0Uo4gNr6dDGmaFpPLIGgAMx2siNXSM+qpFqt0h6OJZUjfgQZVWttXcPVDBKE1u71K1YAYlinWnT1yp9QRg2mQdyFjb+k2GtN-qlEdqwLYtqwrY9v1bZ1Bg7fo0pyeAwoDBN9xwohbw1NdvygF2shdnasy3WhLqatqVyyLwCNIyj+BowQSEaJjdTY-IeiE6ARgQRhpMekAA\" rel=\"nofollow noreferrer\">Playground Link to code</a></p>\n"}], "owner": {"reputation": 868, "user_id": 8555571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1ac59eb89771c08fe0f08d3dd3dbfd?s=128&d=identicon&r=PG", "display_name": "cuddlemeister", "link": "https://stackoverflow.com/users/8555571/cuddlemeister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59538917, "answer_count": 1, "score": 0, "last_activity_date": 1615561617, "creation_date": 1577716440, "question_id": 59532501, "link": "https://stackoverflow.com/questions/59532501/type-inference-using-extended-type-in-typescript", "title": "Type inference using extended type in typescript", "body": "<p>I have a factory, that should return a function, based on provided enum key. \nThis is done in switch case and all the functions there has different payloads. </p>\n\n<p>The goal I'm trying to achieve is to provide such typing to that function, that it will implicitly validate all the type of the payload and return type of the factory. See example below: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// the list of keys that are used for creation\nenum keys {\n    key1 = 1,\n    key2 = 2\n}\n// here are interfaces, that tie each key with payload, that should be provided.\n// Actually, payload is way more complex (another interfaces) but let's keep it simple\ninterface Test1 {\n    key: keys.key1;\n    payload: string;\n}\ninterface Test2 {\n    key: keys.key2;\n    payload: number;\n}\n\n// this is the type, that comes to the function below\ntype tests = Test1 | Test2;\n\n\ninterface ReturnTypeOfTest1 { returnedObject1: number; }\ninterface ReturnTypeOfTest2 { returnedObject2: string; }\n// this is how I'm configuring what should be returned depending on the key \n// the return type is set to \"ResourceModel\", which infers a key from a function payload\n// and identifies what exactly it should return\ninterface ModelOfTest {\n    [keys.key1]: ReturnTypeOfTest1;\n    [keys.key2]: ReturnTypeOfTest2;\n}\ntype ResourceModel&lt;R extends keys&gt; = ModelOfTest[R];\n\n\n</code></pre>\n\n<p><code>ResourceModel</code> type is created based on another stackoverflow question <a href=\"https://stackoverflow.com/questions/52593184/typescript-return-type-of-function-based-on-input-value-enum/52593348#52593348\">Typescript: Return type of function based on input value (enum)</a> </p>\n\n<p>Using type above I can either validate the type of the payload, but loose the validation of the return type:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\nfunction getTest(t: tests): any{\n    switch (t.key) {\n        case keys.key1: {\n            const data = t.payload; // is string\n            return {returnedObject1: 123 };\n        } case keys.key2: {\n            const data = t.payload; // is number\n            return {returnedObject2: '123' };\n\n        }\n    }\n}\ngetTest({key: keys.key1, payload: '1' }); // ReturnTypeOfTest1 | ReturnTypeOfTest2\n</code></pre>\n\n<p>Or get a proper return type, but loose a validation inside a switch case:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function getTest&lt;T extends tests&gt;(t: T): ResourceModel&lt;T['key']&gt; {\n    switch (t.key) {\n        case keys.key1: {\n            const d = t.payload; // string | number\n            return {returnedObject1: 123}; // also an error here, because it wants me to return both ReturnTypeOfTest1 &amp; ReturnTypeOfTest2\n        } case keys.key2: {\n            const d = t.payload; // string | number\n            return null;\n\n        }\n    }\n}\n getTest({key: keys.key2, payload: 1 }); // ReturnTypeOfTest2\n</code></pre>\n\n<p>Is there a way to type this thing correctly? Would really appreciate any help on this.</p>\n"}, {"tags": ["typescript", "pixi.js"], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 7027626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12758d902298f23437749452c40a03ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dzhurov", "link": "https://stackoverflow.com/users/7027626/ivan-dzhurov"}, "is_accepted": false, "score": 0, "last_activity_date": 1578648756, "creation_date": 1578648756, "answer_id": 59678879, "question_id": 59532487, "link": "https://stackoverflow.com/questions/59532487/pixi-import-not-working-cannot-find-module-pixi-js/59678879#59678879", "title": "PIXI import not working: Cannot find module pixi.js", "body": "<p>It depends a lot on your entire configuration. If you only use typescript, without a bundler you can continue using the <code>require</code> option and in your <code>tsconfig.json</code> make sure you have :</p>\n\n<p><code>include:[]</code></p>\n\n<p>Pointing directly to your <code>pixi... d.ts</code> file.</p>\n\n<p>If you use a bundler like webpack, it will depend on what version of PIXI you use. </p>\n\n<p>Before 5.0.0, it was fairly simple and your first approach should do the trick.  A while ago I created a demo repository for the same purpose:\n<a href=\"https://github.com/idzhurov/pixijs-game-boilerplate\" rel=\"nofollow noreferrer\">https://github.com/idzhurov/pixijs-game-boilerplate</a></p>\n\n<p>In 5+ versions, everything is modular, so it is a bit more specific. \nYou can try to start with the:\n<code>import { Application } from 'pixi.js'</code>\n and proceed from there.</p>\n"}, {"comments": [{"owner": {"reputation": 1164, "user_id": 3157899, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f590cb295c3083b8a119f61aa73c201?s=128&d=identicon&r=PG", "display_name": "Naxos84", "link": "https://stackoverflow.com/users/3157899/naxos84"}, "edited": false, "score": 1, "creation_date": 1586982371, "post_id": 60618350, "comment_id": 108334576, "body": "I needed <code>&quot;module&quot;: &quot;commonjs&quot;</code>"}], "tags": [], "owner": {"reputation": 444, "user_id": 632186, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9e86c4151c739898a650c4e14a57fb5?s=128&d=identicon&r=PG", "display_name": "Nihau", "link": "https://stackoverflow.com/users/632186/nihau"}, "is_accepted": false, "score": 5, "last_activity_date": 1583845826, "creation_date": 1583845826, "answer_id": 60618350, "question_id": 59532487, "link": "https://stackoverflow.com/questions/59532487/pixi-import-not-working-cannot-find-module-pixi-js/60618350#60618350", "title": "PIXI import not working: Cannot find module pixi.js", "body": "<p>Make sure you use <code>\"moduleResolution\": \"node\"</code> in your tsconfig.json</p>\n"}], "owner": {"reputation": 692, "user_id": 6035132, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154536381367656/picture?type=large", "display_name": "Eric Jorgensen", "link": "https://stackoverflow.com/users/6035132/eric-jorgensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1484, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1583845826, "creation_date": 1577716382, "question_id": 59532487, "link": "https://stackoverflow.com/questions/59532487/pixi-import-not-working-cannot-find-module-pixi-js", "title": "PIXI import not working: Cannot find module pixi.js", "body": "<p>I npm installed pixi.js into a typescript project.  This line (found in many examples) does not work:</p>\n\n<pre><code>import * as PIXI from 'pixi.js'; \n</code></pre>\n\n<p>I get the error \"Cannot find module 'pixi.js'\"</p>\n\n<p>I tried this workaround and it works fine:</p>\n\n<pre><code>const PIXI = require('pixi.js');\n</code></pre>\n\n<p>The problem is that this loses the type information I want. Pixi has a d.ts file, so I should be getting types.  What am I doing wrong here?</p>\n\n<p>-e</p>\n"}, {"tags": ["typescript", "sharepoint", "spfx", "office-ui-fabric"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1577726856, "post_id": 59532284, "comment_id": 105238830, "body": "What are you thinking when you have a react <code>render</code> method that doesn&#39;t return anything?"}, {"owner": {"reputation": 125, "user_id": 4193426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9brr8.jpg?s=128&g=1", "display_name": "khadi", "link": "https://stackoverflow.com/users/4193426/khadi"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1578211117, "post_id": 59532284, "comment_id": 105360497, "body": "why did you say that my render doesn&#39;t return anything ? i don&#39;t undurstand"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1578211490, "post_id": 59532284, "comment_id": 105360551, "body": "In your <code>.ts</code>  code, you have a <code>render</code> method that doesn&#39;t return what it renders."}, {"owner": {"reputation": 125, "user_id": 4193426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9brr8.jpg?s=128&g=1", "display_name": "khadi", "link": "https://stackoverflow.com/users/4193426/khadi"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1578212441, "post_id": 59532284, "comment_id": 105360705, "body": "I return dropList which i got from my getDropList() function"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1578212565, "post_id": 59532284, "comment_id": 105360728, "body": "I&#39;m talking about render. Why does it return void?"}, {"owner": {"reputation": 125, "user_id": 4193426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9brr8.jpg?s=128&g=1", "display_name": "khadi", "link": "https://stackoverflow.com/users/4193426/khadi"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1578212977, "post_id": 59532284, "comment_id": 105360789, "body": "ah ok, i&#39;m begginer in react and spfx, what must it return so that i can get my list?"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1578213061, "post_id": 59532284, "comment_id": 105360798, "body": "I don&#39;t know if it will fix your problem, I was just noting that you had a component that returns nothing from its render method.  since that&#39;s a bug in and of itself, I figured I would call your attention to it.  I was just trying to be helpful"}], "answers": [{"tags": [], "owner": {"reputation": 4884, "user_id": 8867311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211a7f414a3441006d1dd418596447a9?s=128&d=identicon&r=PG&f=1", "display_name": "Lee_MSFT", "link": "https://stackoverflow.com/users/8867311/lee-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1577774756, "last_edit_date": 1577774756, "creation_date": 1577774063, "answer_id": 59540483, "question_id": 59532284, "link": "https://stackoverflow.com/questions/59532284/transfer-list-from-ts-to-tsx/59540483#59540483", "title": "Transfer list from .ts to .tsx", "body": "<p>I would suggest you move the logic of binding drop down options to component(as async request of getting data and component life cycle).</p>\n\n<p>Pass webpart context to component in render function like.</p>\n\n<pre><code>const element: React.ReactElement&lt;IReactSpFxProps&gt; = React.createElement(\n            ReactSpFx,\n          {\n            description: this.properties.description,\n            context:this.context,\n            userToken: accessToken\n          });\n\n        ReactDom.render(element, this.domElement);\n</code></pre>\n\n<p>In component, declare variable to keep context.</p>\n\n<pre><code>import { WebPartContext } from '@microsoft/sp-webpart-base';\nexport interface IReactSpFxProps {\n  description: string,\n  context: WebPartContext,\n  userToken:string\n}\n</code></pre>\n\n<p>Implement   <code>public componentDidMount() {</code> to bind dropdonw options(replace with your data logic).</p>\n\n<pre><code>public componentDidMount() {\nvar reactHandler = this;\n    this.props.context.spHttpClient.get(`${this.props.context.pageContext.web.absoluteUrl}/_api/web/lists/getbytitle('TestList')/items?select=ID,Title,Address,Pic`,\n      SPHttpClient.configurations.v1).then((response: SPHttpClientResponse) =&gt; {\n        response.json().then((responseJSON: any) =&gt; {\n          reactHandler.setState({\n            items: responseJSON.value.sort()\n          });\n        });\n      });\n}\n</code></pre>\n\n<p><a href=\"http://www.sharepointsamples.com/spfx-load-sharepoint-list-items-in-a-dropdown-using-pnp-sp-js/\" rel=\"nofollow noreferrer\">one thread for your reference</a></p>\n"}], "owner": {"reputation": 125, "user_id": 4193426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9brr8.jpg?s=128&g=1", "display_name": "khadi", "link": "https://stackoverflow.com/users/4193426/khadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577774756, "creation_date": 1577715420, "last_edit_date": 1577774129, "question_id": 59532284, "link": "https://stackoverflow.com/questions/59532284/transfer-list-from-ts-to-tsx", "title": "Transfer list from .ts to .tsx", "body": "<p>I have a list that i get from SharePoint, and i want to use it as an items in my DropDownList in the .tsx file, i did it, but i have problem, i don't see items when i executed. But when i click on the dropDown, the items appear.\nWhen i debug the list which i get are realy empty in the first, it only fills up when i click on the DropDownList, i don't understand why my list are empty, i have same probleme whith all lists in my code. </p>\n\n<p>.ts </p>\n\n<pre><code>export default class DropWebPart extends BaseClientSideWebPart&lt;IDropPartProps&gt; {\n  constructor() {\n    super();\n  }\n  public render(): void {\n    const element: React.ReactElement&lt;IFaqProps&gt; = React.createElement(drop, {\n      dropList: this.getDropList()\n    });\n    ReactDom.render(element, this.domElement);\n  }\n  public getDropList(): IDropdownOption[] {\n    let dropList: IDropdownOption[] = new Array();\n    this._getData().then(response =&gt; {\n      response.forEach((itemc: IOptionCategorie) =&gt; {\n        dropList.push({ key: itemc.Categorie, text: itemc.Key });\n      });\n    });\n    return dropList;\n  }\n  public _getData(): Promise&lt;IOptionCategorie[]&gt; {\n    return sp.web.lists\n      .getByTitle(\"Option\")\n      .items.select(\"Key\", \"Option\")\n      .get()\n      .then((response: IOption[]) =&gt; {\n        return response;\n      });\n  }\n}\n</code></pre>\n\n<p>.tsx</p>\n\n<pre><code>export default class drop extends React.Component&lt;IDropProps&gt; {\n  public dropOption: IDropdownOption[];\n  constructor(props: IDropProps) {\n    super(props);\n    this.dropOption = props.dropList;\n    this.state = {\n      selectedItem: undefined\n    };\n  }\n  public render(): JSX.Element {\n    const { selectedItem } = this.state;\n    return (\n      &lt;div&gt;\n        &lt;FocusZone direction={FocusZoneDirection.vertical}&gt;\n          &lt;Dropdown\n            className={classNames.dropDown}\n            label=\"\"\n            selectedKey={selectedItem ? selectedItem.key : \"\"}\n            onChange={this._onChange}\n            options={this.dropOption}\n          /&gt;\n          //liste\n        &lt;/FocusZone&gt;\n      &lt;/div&gt;\n    );\n  }\n  private _onChange = (\n    event: React.FormEvent&lt;HTMLDivElement&gt;,\n    item: IDropdownOption\n  ): void =&gt; {\n    const { optionList } = this.props;\n    this.setState({\n      selectedItem: item\n    });\n  };\n}\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "redux", "react-redux"], "answers": [{"tags": [], "owner": {"reputation": 4109, "user_id": 8852158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61e252222cd7491e584b8a032330785?s=128&d=identicon&r=PG&f=1", "display_name": "helloitsjoe", "link": "https://stackoverflow.com/users/8852158/helloitsjoe"}, "is_accepted": false, "score": 1, "last_activity_date": 1577713328, "creation_date": 1577713328, "answer_id": 59531861, "question_id": 59531706, "link": "https://stackoverflow.com/questions/59531706/connecting-redux-to-my-app-at-the-top-level-doesnt-work/59531861#59531861", "title": "Connecting Redux to my app at the top level doesn&#39;t work", "body": "<p>In <code>index.ts</code>, you're importing the named <code>App</code> component instead of the default connected <code>App</code>:</p>\n\n<pre><code>import { App } from './App';\n</code></pre>\n\n<p>That should be</p>\n\n<pre><code>import App from './App';\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11095959, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216451603115849/picture?type=large", "display_name": "Aldo Fiore", "link": "https://stackoverflow.com/users/11095959/aldo-fiore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577713328, "creation_date": 1577712609, "question_id": 59531706, "link": "https://stackoverflow.com/questions/59531706/connecting-redux-to-my-app-at-the-top-level-doesnt-work", "title": "Connecting Redux to my app at the top level doesn&#39;t work", "body": "<p>I have been trying to debug this code for a while now, but I can't seem to understand what the problem is here. I am trying to connect my top-level app to the redux store, but I always get an empty store and I can't understand why. Here's the code:</p>\n\n<p>index.tsx</p>\n\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { App } from './App';\nimport { Store } from 'redux';\nimport createStore from './model/configureStore';\nimport { State } from './model/types';\n\nconst store: Store&lt;State&gt; = createStore();\n\nReactDOM.render(\n    &lt;Provider store={store}&gt;\n        &lt;App /&gt;\n    &lt;/Provider&gt;,\n    document.getElementById('root')\n);\n</code></pre>\n\n<p>App.tsx</p>\n\n<pre><code>import React from 'react';\nimport { State } from './model/types';\nimport { connect } from 'react-redux';\n\nexport const App:React.FunctionComponent = (props) =&gt; {\n    console.log(props);\n    return &lt;div&gt;Hello&lt;/div&gt;;\n};\n\nconst mapStateToProps = (state: State) =&gt; ({\n    isLoading: state.isLoading,\n});\n\nexport default connect(mapStateToProps)(App);\n</code></pre>\n\n<p>(The console log above will return an empty object, for some unknown reasons).</p>\n\n<p>loading.ts</p>\n\n<pre><code>import { BooleanAction } from '../utils/redux-utils';\n\nconst IS_LOADING = 'IS_LOADING_GENERAL';\n\nexport const setIsLoading = (payload: boolean) =&gt;\n    &lt;BooleanAction&gt;{\n        type: IS_LOADING,\n        payload,\n    };\n\nconst defaultState = true;\n\nexport const reducer = (\n    state: boolean = defaultState,\n    action: BooleanAction\n) =&gt; {\n    switch (action.type) {\n        case IS_LOADING:\n            return action.payload;\n        default:\n            return state;\n    }\n};\n</code></pre>\n\n<p>combineReducers.ts</p>\n\n<pre><code>import { ReducersMapObject, combineReducers } from 'redux';\nimport { reducer as isLoading } from './loading';\nimport { State } from './types';\n\nconst reducerMap: ReducersMapObject&lt;State&gt; = {\n    isLoading,\n};\n\nexport default combineReducers&lt;State&gt;(reducerMap);\n</code></pre>\n\n<p>configureStore.ts</p>\n\n<pre><code>import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './combineReducers';\n\nexport default () =&gt; createStore(rootReducer, applyMiddleware(thunk));\n</code></pre>\n\n<p>The code seems to be right to me, but it doesn't give me the expected result. Just to make it more confusing, if I don't wrap my app in the <code>&lt;Provider&gt;</code> at the <code>ReactDOM.render()</code> function, everything works, but I want to handle some loading state at the top level, so I need it to work this way.</p>\n\n<p>Thank you in advance!!</p>\n"}, {"tags": ["html", "angular", "typescript", "angular-components"], "comments": [{"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 3, "creation_date": 1577712583, "post_id": 59531653, "comment_id": 105232780, "body": "what is your requirement? From the question it is unclear what you are asking."}, {"owner": {"reputation": 176, "user_id": 7677487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62571cb75114562ee6e36495f2f204d6?s=128&d=identicon&r=PG&f=1", "display_name": "Sanju", "link": "https://stackoverflow.com/users/7677487/sanju"}, "edited": false, "score": 0, "creation_date": 1577713618, "post_id": 59531653, "comment_id": 105233275, "body": "if you want to load a component inside another component, you can try using <code>ng-content</code>"}, {"owner": {"reputation": 1137, "user_id": 9602452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "D Pro", "link": "https://stackoverflow.com/users/9602452/d-pro"}, "edited": false, "score": 0, "creation_date": 1577722428, "post_id": 59531653, "comment_id": 105237113, "body": "you can&#39;t use component for input, but you can put component in a template, and template can be passed into input"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1577727010, "post_id": 59531653, "comment_id": 105238890, "body": "You actually can bind a component via <code>Input</code> but not for the purpose of rendering it."}], "answers": [{"tags": [], "owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "is_accepted": false, "score": -1, "last_activity_date": 1577713687, "creation_date": 1577713687, "answer_id": 59531939, "question_id": 59531653, "link": "https://stackoverflow.com/questions/59531653/how-component-can-get-another-component-as-an-input/59531939#59531939", "title": "How component can get another component as an input?", "body": "<p>You wouldn't use an <code>input</code> for this, you will need to use content projection with <a href=\"https://angular.io/api/core/ContentChild#example\" rel=\"nofollow noreferrer\">ContentChild</a>.</p>\n\n<p>Example taken from Angular Docs:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Component({\n  selector: 'example-app',\n  template: `\n    &lt;tab&gt;\n      &lt;pane id=\"1\" *ngIf=\"shouldShow\"&gt;&lt;/pane&gt;\n      &lt;pane id=\"2\" *ngIf=\"!shouldShow\"&gt;&lt;/pane&gt;\n    &lt;/tab&gt;\n\n    &lt;button (click)=\"toggle()\"&gt;Toggle&lt;/button&gt;\n  `,\n})\nexport class ContentChildComp {\n  shouldShow = true;\n\n  toggle() { this.shouldShow = !this.shouldShow; }\n}\n</code></pre>\n\n<p>The <code>pane</code> component, is projected in the <code>tabs</code> component.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Component({\n  selector: 'tab',\n  template: `\n    &lt;div&gt;pane: {{pane?.id}}&lt;/div&gt;\n  `\n})\nexport class Tab {\n  @ContentChild(Pane, {static: false}) pane !: Pane;\n}\n</code></pre>\n\n<p>You get access to the <code>pane</code> component within the <code>tab</code> component by using <code>@ContentChild</code>.</p>\n\n<p>A full guide on <a href=\"https://blog.angular-university.io/angular-ng-content/\" rel=\"nofollow noreferrer\">content projection</a></p>\n"}, {"tags": [], "owner": {"reputation": 5550, "user_id": 2126355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X8cHJ.jpg?s=128&g=1", "display_name": "Masoud Bimar", "link": "https://stackoverflow.com/users/2126355/masoud-bimar"}, "is_accepted": true, "score": 1, "last_activity_date": 1577715852, "creation_date": 1577715852, "answer_id": 59532375, "question_id": 59531653, "link": "https://stackoverflow.com/questions/59531653/how-component-can-get-another-component-as-an-input/59532375#59532375", "title": "How component can get another component as an input?", "body": "<p>For Embedding Element Or Component Inside Another Component You Can Use <code>ng-content</code> like this:</p>\n\n<pre><code>@Component({\n  selector: 'outer-CMP',\n  template: `\n    &lt;div&gt; &lt;/div&gt;\n    &lt;ng-content&gt;&lt;/ng-content&gt;\n  `,\n  styleUrls: [....]\n})\nexport class OuterInputComponent {\n\n}\n</code></pre>\n\n<p>then :</p>\n\n<pre><code>@Component({\n  selector: 'inner-CMP',\n  template: `\n    &lt;div&gt; &lt;/div&gt;\n\n  `,\n  styleUrls: [....]\n})\nexport class InnerInputComponent {\n\n}\n</code></pre>\n\n<p>Use :</p>\n\n<pre><code>&lt;outer-CMP&gt; \n        &lt;inner-CMP&gt;\n        &lt;/inner-CMP&gt;\n&lt;/outer-CMP&gt; \n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 12267205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCjMU.jpg?s=128&g=1", "display_name": "heliya rb", "link": "https://stackoverflow.com/users/12267205/heliya-rb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 59532375, "answer_count": 2, "score": 1, "last_activity_date": 1577715852, "creation_date": 1577712408, "question_id": 59531653, "link": "https://stackoverflow.com/questions/59531653/how-component-can-get-another-component-as-an-input", "title": "How component can get another component as an input?", "body": "<p>I can set <strong>string</strong> or <strong>number</strong> as the input of component:</p>\n\n<pre><code>@Input('name') name: string;\n</code></pre>\n\n<p>and use it in HTML file:</p>\n\n<pre><code>&lt;div&gt;{{name}}&lt;/div&gt;\n</code></pre>\n\n<p>but I want to set a <strong>component</strong> instead of the string, like <code>name</code></p>\n\n<p>In other words: How can I set a <strong>component</strong> for the input of another <strong>component</strong>?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 176, "user_id": 4262006, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-TCxJQQHTabY/AAAAAAAAAAI/AAAAAAAAAAw/9NGjzDKQEJk/photo.jpg?sz=128", "display_name": "vijay", "link": "https://stackoverflow.com/users/4262006/vijay"}, "edited": false, "score": 0, "creation_date": 1577712387, "post_id": 59531593, "comment_id": 105232696, "body": "Can you please share your &quot;getAnalysisDetails&quot; function?"}, {"owner": {"reputation": 123, "user_id": 9576330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ian Middelkamp", "link": "https://stackoverflow.com/users/9576330/ian-middelkamp"}, "edited": false, "score": 0, "creation_date": 1577712572, "post_id": 59531593, "comment_id": 105232777, "body": "is getAnalysisDetails function an async operation like an http call? because your console.log statement will not print out the result"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9176592, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563082783781200/picture?type=large", "display_name": "Mhammed Zghoul", "link": "https://stackoverflow.com/users/9176592/mhammed-zghoul"}, "edited": false, "score": 0, "creation_date": 1577712680, "post_id": 59531661, "comment_id": 105232815, "body": "how can i use orderedAnalysis after subscribe done ?"}, {"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "reply_to_user": {"reputation": 47, "user_id": 9176592, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563082783781200/picture?type=large", "display_name": "Mhammed Zghoul", "link": "https://stackoverflow.com/users/9176592/mhammed-zghoul"}, "edited": false, "score": 0, "creation_date": 1577713292, "post_id": 59531661, "comment_id": 105233119, "body": "@MhammedZghoul please, see my updated answer"}, {"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577714320, "post_id": 59531661, "comment_id": 105233613, "body": "How can I use <code>async&#47;await</code> in subscribe?"}, {"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577714348, "post_id": 59531661, "comment_id": 105233623, "body": "<code>async&#47;await</code> works with promises, subscribe in angular is of Observable type."}, {"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "reply_to_user": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577714496, "post_id": 59531661, "comment_id": 105233687, "body": "@AliWahab please, see my updated answer"}, {"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 1, "creation_date": 1577715103, "post_id": 59531661, "comment_id": 105233950, "body": "@StepUp glad that you made changes."}], "tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": false, "score": 1, "last_activity_date": 1577714479, "last_edit_date": 1577714479, "creation_date": 1577712440, "answer_id": 59531661, "question_id": 59531593, "link": "https://stackoverflow.com/questions/59531593/why-can-i-not-access-an-array-element-when-i-fill-the-array-during-subscribe/59531661#59531661", "title": "Why can I not access an array element when I fill the array during subscribe?", "body": "<p>It happens because HTTP call is asynchronous. So your code would looks like this:</p>\n\n<pre><code>orderedAnalysis.forEach((analysis, i) =&gt; {                    \n     this.analysisCenterService.getAnalysisDetails(analysis.id)\n        .subscribe(detail =&gt; {\n                    analysis.detailed = detail;\n                    console.log(analysis);\n        });\n});\n</code></pre>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>You can use <code>async</code> operator to <code>await</code> result your API call:</p>\n\n<pre><code> async fooFunction() \n {\n     orderedAnalysis.forEach((analysis, i) =&gt; {                    \n        let result = await this.analysisCenterService.getAnalysisDetails(analysis.id);\n        analysis.detailed = result;\n     });\n     console.log(orderedAnalysis);\n }\n</code></pre>\n\n<p>If return type of <code>getAnalysisDetails</code> is <code>Observable</code>, then you can convert to <code>Promise</code> using <code>.toPromise</code> method:</p>\n\n<pre><code> let result = await this.analysisCenterService.getAnalysisDetails(analysis.id).toPromise();\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9176592, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563082783781200/picture?type=large", "display_name": "Mhammed Zghoul", "link": "https://stackoverflow.com/users/9176592/mhammed-zghoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1577713337, "answer_count": 1, "score": -3, "last_activity_date": 1577714479, "creation_date": 1577712139, "last_edit_date": 1577713482, "question_id": 59531593, "link": "https://stackoverflow.com/questions/59531593/why-can-i-not-access-an-array-element-when-i-fill-the-array-during-subscribe", "closed_reason": "Duplicate", "title": "Why can I not access an array element when I fill the array during subscribe?", "body": "<pre><code>orderedAnalysis.forEach((analysis) =&gt; {\n                this.analysisCenterService.getAnalysisDetails(analysis.id).subscribe(detail =&gt; {\n                    analysis.detailed = detail;\n                });\n            });\nconsole.log(orderedAnalysis[0]);\n</code></pre>\n\n<p>This is the result of the log statement:\n<a href=\"https://i.stack.imgur.com/CexZ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CexZ9.png\" alt=\"Log output\"></a></p>\n\n<p>But when I log <code>orderedAnalysis[0].detailed</code> the result will be undefined.</p>\n\n<p>Why does this happen and how do I do this propely?</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable", "angular8"], "answers": [{"tags": [], "owner": {"reputation": 1137, "user_id": 9602452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "D Pro", "link": "https://stackoverflow.com/users/9602452/d-pro"}, "is_accepted": false, "score": 1, "last_activity_date": 1577723412, "creation_date": 1577723412, "answer_id": 59533938, "question_id": 59531337, "link": "https://stackoverflow.com/questions/59531337/observable-stream-to-many-filtered-subscriptions/59533938#59533938", "title": "Observable Stream to Many Filtered Subscriptions", "body": "<p>Since you have a single stream you need to filter the events and keep only the ones a specific gauge needs at some point anyway.</p>\n\n<p>A similar scenario can be found in ngrx, where we have a stream of actions, and effects are listening to this stream and filtering only the actions they are interested in (using <code>ofType(\"MyAction\")</code> operator, which simply does <code>.filter(action =&gt; action.type === \"MyAction\")</code> under the hood). I'm afraid there's no other way</p>\n"}], "owner": {"reputation": 421, "user_id": 5092005, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10206147533318859/picture?type=large", "display_name": "Austen Stone", "link": "https://stackoverflow.com/users/5092005/austen-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577723412, "creation_date": 1577710995, "question_id": 59531337, "link": "https://stackoverflow.com/questions/59531337/observable-stream-to-many-filtered-subscriptions", "title": "Observable Stream to Many Filtered Subscriptions", "body": "<p>I am writing a service for an API called multisubscribe that takes an array of variables and starts sending a stream of data over HTTP. The data is a JSON payload with variable data sent upon change.</p>\n\n<p><code>{device: \"OEE\", variable: \"Availability\", data: [12]}</code></p>\n\n<p>I've managed to parse the stream and create an observable that emits these JSON payloads, when unsubscribing the HTTP request is aborted. Perfect! <a href=\"https://github.com/astone2014/devicewise-angular/blob/master/projects/devicewise-angular/src/lib/devicewise-multisubscribe-new.service.ts\" rel=\"nofollow noreferrer\">You can see the code on GitHub</a>.</p>\n\n<hr>\n\n<p>Now I'm trying to abstract the observable into another service called the MultisubscribeStore. I basically want to be able to add, remove, edit variables and each time the unsubscribe, resubscribe happens automatically within the service. This way the user doesn't have to think about the single stream.</p>\n\n<p>I tried creating a separate subject and emitting on that subject but I couldn't determine when the subject was done, so I couldn't unsubscribe.</p>\n\n<hr>\n\n<p>I also want to be able to filter the stream into many streams and pass them down to child components. For example I have 5 gauge components and they each represent different data. How can I send down an observable to each of them that will only emit the values they're interested in. I feel like creating multiple new observables with filter is poor performance.</p>\n\n<pre><code>const subscription1 = multiSubscribe$.pipe(\n  filter((data) =&gt; data.variable === 'Availability')\n);\n\nconst subscription2 = multiSubscribe$.pipe(\n  filter((data) =&gt; data.variable === 'Quality')\n);\n\nconst subscription3 = multiSubscribe$.pipe(\n  filter((data) =&gt; data.variable === 'Performance')\n);\n</code></pre>\n\n<p>Maybe what I want is already built into RXJS. I tried playing with share and multicast but to no avail.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 9941039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--yKAej3kSAA/AAAAAAAAAAI/AAAAAAAAAAA/_Mnf-QVPB6o/photo.jpg?sz=128", "display_name": "TintinSansYeux", "link": "https://stackoverflow.com/users/9941039/tintinsansyeux"}, "is_accepted": false, "score": 1, "last_activity_date": 1577710647, "creation_date": 1577710647, "answer_id": 59531260, "question_id": 59531113, "link": "https://stackoverflow.com/questions/59531113/enable-progress-bar-on-current-row-only/59531260#59531260", "title": "Enable progress bar on current row only", "body": "<p>Replace ([style.width])</p>\n\n<pre><code>&lt;div class=\"progress-bar\" [style.width]=\"percentage\"&gt;\n  &lt;div class=\"progress-text\"&gt;{{data.key.progress}}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>&lt;div class=\"progress-bar\" [style.width]=\"data.key.progress + '%\"&gt;\n  &lt;div class=\"progress-text\"&gt;{{data.key.progress}}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 1, "last_activity_date": 1577711582, "creation_date": 1577711582, "answer_id": 59531475, "question_id": 59531113, "link": "https://stackoverflow.com/questions/59531113/enable-progress-bar-on-current-row-only/59531475#59531475", "title": "Enable progress bar on current row only", "body": "<p>You need to change style binding as follows,</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-jichpb?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">DEMO</a></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"progress-bar\" [style.width]=\"data.key.progress + '%'\"&gt;\n</code></pre>\n\n<p>And in your update function, you don't need class level <code>percentage</code> variable.</p>\n\n<p><strong>Component</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code> updateSlider(event, data) {\n\n    if (this.updateSliderToggle) {\n      this.currentID = data.key.id;\n      let percentage: number = Math.floor(\n        (event.layerX / (event.target.offsetWidth - 3)) * 100\n      );\n\n      if (percentage &gt; 100) {\n        percentage = 100;\n      } else if (percentage &lt; 0) {\n        percentage = 0;\n      }\n      data.key.progress = percentage;\n    }\n  }\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59531475, "answer_count": 2, "score": 0, "last_activity_date": 1577801231, "creation_date": 1577710056, "last_edit_date": 1577801231, "question_id": 59531113, "link": "https://stackoverflow.com/questions/59531113/enable-progress-bar-on-current-row-only", "title": "Enable progress bar on current row only", "body": "<p>I have a progress bar, however if I change progress to an ID, all other lines are affected.\nHow can I change the progress only on that line without changing the rest?</p>\n\n<p><strong>html</strong></p>\n\n<pre><code>    &lt;div class=\"progress aqua\" [attr.data-width]=\"percentage\" (mousedown)=\"startUpdateSlider(data)\"\n        (mouseup)=\"endUpdateSlider(data)\" (mouseleave)=\"endUpdateSlider(data)\" (mousemove)=\"updateSlider($event,data)\"&gt;\n        &lt;div class=\"progress-text\"&gt;{{progress}}&lt;/div&gt;\n        &lt;div class=\"progress-bar\" [style.width]=\"percentage\"&gt;\n            &lt;div class=\"progress-text\"&gt;{{progress}}&lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>Component.ts</strong></p>\n\n<pre><code> startUpdateSlider(data) {\n    this.currentID = data.key.id;\n    this.updateSliderToggle = true;\n  }\n</code></pre>\n"}, {"tags": ["typescript", "interface", "typescript-typings"], "answers": [{"comments": [{"owner": {"reputation": 2761, "user_id": 5860259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nuQx9j3fJd4/AAAAAAAAAAI/AAAAAAAADqc/c7CiqUETjMo/photo.jpg?sz=128", "display_name": "Sunil Kashyap", "link": "https://stackoverflow.com/users/5860259/sunil-kashyap"}, "edited": false, "score": 0, "creation_date": 1577710500, "post_id": 59531129, "comment_id": 105231882, "body": "Thanks, solution works, I was exporting interface instead of type."}], "tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 2, "last_activity_date": 1577710141, "creation_date": 1577710141, "answer_id": 59531129, "question_id": 59531023, "link": "https://stackoverflow.com/questions/59531023/loosely-typed-object-with-union-type-key-in-typescript/59531129#59531129", "title": "Loosely typed object with union type key in typescript", "body": "<p>You can define a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\" rel=\"nofollow noreferrer\">mapped type</a> only with <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases\" rel=\"nofollow noreferrer\">type aliases</a>, interfaces cannot do this.</p>\n\n<pre><code>export type ObjectsType = 'text' | 'image' | 'circleText';\nexport type IAllowedObjects =  {\n  [key in ObjectsType]: boolean;\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=4&amp;ssc=2&amp;pln=1&amp;pc=1#code/KYDwDg9gTgLgBDAnmYcDyAjAVsAxjAZwBVlUBeOAchlBkrgB8qBLAWwEMBzYepy3ZlFwAbYEVqUA3AChQkWAlJwAkgEFhwiAHdgAE0w58BOBTgBvaXDgBtANbBEcZgDt02PIRIoAugC44GBAQouzOMgC%20QA\" rel=\"nofollow noreferrer\">Code sample</a></p>\n"}, {"tags": [], "owner": {"reputation": 8132, "user_id": 8605960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/manal.jpg?s=128&g=1", "display_name": "Asaf Aviv", "link": "https://stackoverflow.com/users/8605960/asaf-aviv"}, "is_accepted": false, "score": 2, "last_activity_date": 1577711149, "creation_date": 1577711149, "answer_id": 59531379, "question_id": 59531023, "link": "https://stackoverflow.com/questions/59531023/loosely-typed-object-with-union-type-key-in-typescript/59531379#59531379", "title": "Loosely typed object with union type key in typescript", "body": "<p>You can also use the <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkt\" rel=\"nofollow noreferrer\">Record</a> utility type which does the same as fords answer</p>\n\n<pre><code>type ObjectsType = 'text' | 'image' | 'circleText'\ntype IAllowedObjects = Record&lt;ObjectsType, boolean&gt;\n</code></pre>\n"}], "owner": {"reputation": 2761, "user_id": 5860259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nuQx9j3fJd4/AAAAAAAAAAI/AAAAAAAADqc/c7CiqUETjMo/photo.jpg?sz=128", "display_name": "Sunil Kashyap", "link": "https://stackoverflow.com/users/5860259/sunil-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 59531129, "answer_count": 2, "score": 3, "last_activity_date": 1577711149, "creation_date": 1577709592, "question_id": 59531023, "link": "https://stackoverflow.com/questions/59531023/loosely-typed-object-with-union-type-key-in-typescript", "title": "Loosely typed object with union type key in typescript", "body": "<p>I'm trying to create an interface of loosely typed objects with unions type key.</p>\n\n<pre><code>export type ObjectsType = 'text' | 'image' | 'circleText';\n\nexport interface IAllowedObjects {\n    [key: ObjectsType] : boolean;\n}\n</code></pre>\n\n<p>but getting </p>\n\n<blockquote>\n  <p>An index signature parameter type cannot be a union type. Consider\n  using a mapped object type instead</p>\n</blockquote>\n\n<p>already tried some solutions but no luck.</p>\n\n<ol>\n<li>tried <a href=\"https://stackoverflow.com/questions/51062671/union-type-in-typescript\">This</a> solution</li>\n</ol>\n\n<pre><code>    export type ObjectsType = 'text' | 'image' | 'circleText';\n    export interface IAllowedObjects {\n         [key in ObjectsType] : boolean;\n    }\n</code></pre>\n\n<blockquote>\n  <p>A computed property name in an interface must refer to an expression\n  whose type is a literal type or a 'unique symbol'</p>\n  \n  <p>A computed property name must be of type 'string', 'number', 'symbol',\n  or 'any'.</p>\n</blockquote>\n"}, {"tags": ["javascript", "reactjs", "typescript", "ref"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 2, "creation_date": 1577708400, "post_id": 59530724, "comment_id": 105230979, "body": "Refs don&#39;t have names. Do you mean the name of the property the ref is in? Or the <code>name</code> property of the DOM element the ref refers to? (<a href=\"https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element\" rel=\"nofollow noreferrer\"><code>div</code></a> elements don&#39;t have <code>name</code>s, they only have the <a href=\"https://html.spec.whatwg.org/multipage/dom.html#global-attributes\" rel=\"nofollow noreferrer\">global attributes</a>, which <code>name</code> isn&#39;t one of...) Or the tag name (<code>&quot;div&quot;</code> in your example)?"}, {"owner": {"reputation": 30122, "user_id": 7882470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJbpX.jpg?s=128&g=1", "display_name": "Dennis Vash", "link": "https://stackoverflow.com/users/7882470/dennis-vash"}, "edited": false, "score": 1, "creation_date": 1577708406, "post_id": 59530724, "comment_id": 105230982, "body": "If it doesn&#39;t have name how you want to get it? You should assign a name"}, {"owner": {"reputation": 2072, "user_id": 7317408, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-mMn0XC-_zd8/AAAAAAAAAAI/AAAAAAAACag/6sAIuewEPiY/photo.jpg?sz=128", "display_name": "A7DC", "link": "https://stackoverflow.com/users/7317408/a7dc"}, "edited": false, "score": 0, "creation_date": 1577708859, "post_id": 59530724, "comment_id": 105231173, "body": "Sorry my question wasn&#39;t clear. I want to assign each ref a name so I can use it later on"}, {"owner": {"reputation": 2852, "user_id": 5783700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tOYYR.jpg?s=128&g=1", "display_name": "ankitkanojia", "link": "https://stackoverflow.com/users/5783700/ankitkanojia"}, "edited": false, "score": 0, "creation_date": 1577709959, "post_id": 59530724, "comment_id": 105231651, "body": "@A7DC you need to declare constructor of reference in constructor section like  <i>this.divRef = React.createRef()</i> then you can use that reference on page anywhere using <i>this.divRef.current</i>"}], "answers": [{"comments": [{"owner": {"reputation": 2072, "user_id": 7317408, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-mMn0XC-_zd8/AAAAAAAAAAI/AAAAAAAACag/6sAIuewEPiY/photo.jpg?sz=128", "display_name": "A7DC", "link": "https://stackoverflow.com/users/7317408/a7dc"}, "edited": false, "score": 1, "creation_date": 1577709951, "post_id": 59531020, "comment_id": 105231645, "body": "This is great, thank you T.J! The  data-* attribute approach is what I&#39;m looking for, I think"}], "tags": [], "owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": true, "score": 1, "last_activity_date": 1577709576, "creation_date": 1577709576, "answer_id": 59531020, "question_id": 59530724, "link": "https://stackoverflow.com/questions/59530724/how-do-you-get-the-name-of-a-ref/59531020#59531020", "title": "How do you get the name of a ref?", "body": "<p>In a comment you've said:</p>\n\n<blockquote>\n  <p>I want to assign each ref a name so I can use it later on</p>\n</blockquote>\n\n<p>If you really mean the <strong>ref</strong>, the only reliable way I can think of to do that is with a WeakMap keyed by the ref. (Although you <em>could</em> use a Symbol-named property, more below.)</p>\n\n<p>Create the WeakMap in your constructor (or in your module, I don't know how much code needs to be able to use these names);</p>\n\n<pre><code>this.nameMap = new WeakMap();\n</code></pre>\n\n<p>And then when you need to get/assign the name:</p>\n\n<pre><code>let name = this.nameMap.get(this.divRef);\nif (!name) {\n    name = \"some appropriate name\";\n    this.nameMap.set(this.divRef, name);\n}\n</code></pre>\n\n<p>You <em>could</em> use a Symbol-named property, to store the name on the ref object itself, but in general storing arbitrary properties on objects your code doesn't control isn't a good idea. But for completeness, you'd create the symbol in your constructor (or module):</p>\n\n<pre><code>this.nameKey = Symbol(\"refname\");\n</code></pre>\n\n<p>then use it:</p>\n\n<pre><code>// I don't recommend this\nlet name = this.divRef[this.nameKey];\nif (!name) {\n    name = \"some appropriate name\";\n    this.divRef[this.nameKey] = name;\n}\n</code></pre>\n\n<p>But I don't recommend it. An environment with Symbol will also have WeakMap, which I'd use here.</p>\n\n<hr>\n\n<p><strong>But</strong>, if you mean the element the ref is currently referring to, you could use a <a href=\"https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes\" rel=\"nofollow noreferrer\"><code>data-*</code> attribute</a> for that:</p>\n\n<pre><code>// Assuming you've checked that `current` isn't `null`\nlet name = this.divRef.getAttribute(\"data-name\");\nif (!name) {\n    name = \"some appropriate name\";\n    this.divRef.setAttribute(\"data-name\", name);\n}\n</code></pre>\n\n<p>If you can assume <code>dataset</code> support, you could use <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/dataset\" rel=\"nofollow noreferrer\"><code>dataset</code></a> instead:</p>\n\n<pre><code>// Assuming you've checked that `current` isn't `null`\nlet name = this.divRef.dataset.name;\nif (!name) {\n    name = \"some appropriate name\";\n    this.divRef.dataset.name = name;\n}\n</code></pre>\n\n<p>That said, the WeakMap solution would work just as well for elements as for refs:</p>\n\n<pre><code>let name = this.nameMap.get(this.divRef.current);\nif (!name) {\n    name = \"some appropriate name\";\n    this.nameMap.set(this.divRef.current, name);\n}\n</code></pre>\n"}], "owner": {"reputation": 2072, "user_id": 7317408, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-mMn0XC-_zd8/AAAAAAAAAAI/AAAAAAAACag/6sAIuewEPiY/photo.jpg?sz=128", "display_name": "A7DC", "link": "https://stackoverflow.com/users/7317408/a7dc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 59531020, "answer_count": 1, "score": 0, "last_activity_date": 1577709576, "creation_date": 1577708273, "question_id": 59530724, "link": "https://stackoverflow.com/questions/59530724/how-do-you-get-the-name-of-a-ref", "title": "How do you get the name of a ref?", "body": "<p>Say you have this JSX:</p>\n\n<pre><code>&lt;div ref={this.divRef}&gt;\n  &lt;SomeComponent /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And you want to get the name of the ref and add it to your state, how would you do that?</p>\n\n<p>Something like:</p>\n\n<pre><code>componentDidMount() {\n    // get all the positions of the current sections\n    if (this.divRef.current) {\n      this.setState({\n        breakpoints: [{\n          name: this.divRef.current.name,\n          position: this.divRef.current.getBoundingClientRect().bottom,\n        }],\n      }, () =&gt; {\n          // tslint:disable-next-line:no-console\n          console.log(this.divRef.current, 'this.divRef.current')\n      })\n    }\n  }\n</code></pre>\n"}, {"tags": ["mongodb", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 10069, "user_id": 10770370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--BJzgsUzEAU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jRHebrD-MZX2COPwzspP78-RP34w/mo/photo.jpg?sz=128", "display_name": "Tom Slabbaert", "link": "https://stackoverflow.com/users/10770370/tom-slabbaert"}, "is_accepted": false, "score": 0, "last_activity_date": 1577708736, "creation_date": 1577708736, "answer_id": 59530832, "question_id": 59530682, "link": "https://stackoverflow.com/questions/59530682/sort-by-multiple-fields-mongodb/59530832#59530832", "title": "Sort by multiple fields MongoDB", "body": "<p>Mongo dosent offer a built in way to custom sort.</p>\n\n<p>You're going to have to add a new temporary field by nesting <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/cond/\" rel=\"nofollow noreferrer\">$cond</a>'s and sort by it, like so:</p>\n\n<pre><code>{\n    $addFields: {\n        sortLocale: {\n            \"$cond\": [{\"$eq\":[\"$type\", \"EN\"]},  1, {\"$cond\": [{\"$eq\":[\"$type\", \"IL\"]}, 2,  3]}]\n        }\n    }\n}\n</code></pre>\n\n<p>Now you can sort on <code>sortLocale</code> instead.</p>\n"}], "owner": {"reputation": 153, "user_id": 7745850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a828f69a57603f1b58e58bf5baaf8c71?s=128&d=identicon&r=PG&f=1", "display_name": "GigiProve", "link": "https://stackoverflow.com/users/7745850/gigiprove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577708736, "creation_date": 1577708085, "question_id": 59530682, "link": "https://stackoverflow.com/questions/59530682/sort-by-multiple-fields-mongodb", "title": "Sort by multiple fields MongoDB", "body": "<p>In my mongodb i have this situation: </p>\n\n<p><a href=\"https://i.stack.imgur.com/WMpfP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WMpfP.png\" alt=\"document\"></a></p>\n\n<p>I'd like to sort the <em>documents</em> array first by <code>documents.locale=EN</code> and then by version desc. \nI am currently using this because I have only two possible locale (IT, EN): </p>\n\n<pre><code>return this.model.aggregate([\n            {\n                $match: {\n                    documentType: documentType,\n                    country: country,\n                    'documents.locale': locale\n                }\n            },\n            {\n                $unwind: \"$documents\"\n            },\n            {\n                $sort: {'documents.locale': 1, 'documents.version': -1}\n            }\n        ]).exec()\n</code></pre>\n\n<p>But what if I have to add an other locale?\nHow can I do? Thanks</p>\n"}, {"tags": ["typescript", "typeorm", "typegraphql"], "answers": [{"tags": [], "owner": {"reputation": 237, "user_id": 12806691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b98265ecd4d15a95c371bb5266aa06?s=128&d=identicon&r=PG&f=1", "display_name": "Troy Kessler", "link": "https://stackoverflow.com/users/12806691/troy-kessler"}, "is_accepted": false, "score": 0, "last_activity_date": 1580393220, "creation_date": 1580393220, "answer_id": 59987837, "question_id": 59530140, "link": "https://stackoverflow.com/questions/59530140/matches-class-validator-decorator-not-working-for-type-graphql-auto-validation/59987837#59987837", "title": "matches class-validator decorator not working for type-graphql auto validation", "body": "<p>Although not knowing why <code>@Matches</code> doesn't work you could try the <code>@IsMobilePhone(locale: string)</code> and the <code>@IsPhoneNumber(region: string)</code> decorators which could even be a more elegant solution</p>\n"}], "owner": {"reputation": 36, "user_id": 1508953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869fabd7eae2ae82e761fc5f5fce1bcc?s=128&d=identicon&r=PG", "display_name": "insanebaba", "link": "https://stackoverflow.com/users/1508953/insanebaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580393220, "creation_date": 1577705605, "question_id": 59530140, "link": "https://stackoverflow.com/questions/59530140/matches-class-validator-decorator-not-working-for-type-graphql-auto-validation", "title": "matches class-validator decorator not working for type-graphql auto validation", "body": "<p>I'm trying to use class validator for validatin my inputtype in type-graphql but the @mathes decorator, is not working, All other decorators with suffix 'Is' are working, but not this one.</p>\n\n<pre><code>const mobileNumberRegex = /^(\\+[0-9]{1,3}[- ]?)?\\d{9,10}$/;\n\n@Field()\n@Matches(mobileNumberRegex)\nmobileNumber!: string;\n</code></pre>\n\n<p>I'm expecting error when the mobile number is not working, but it's not there.</p>\n"}, {"tags": ["typescript", "date", "type-conversion"], "comments": [{"owner": {"reputation": 105827, "user_id": 3037257, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nq6Zo.jpg?s=128&g=1", "display_name": "Pranav C Balan", "link": "https://stackoverflow.com/users/3037257/pranav-c-balan"}, "edited": false, "score": 1, "creation_date": 1577704599, "post_id": 59529896, "comment_id": 105229424, "body": "<code>new Date(1580294547189 )</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": true, "score": 0, "last_activity_date": 1577704621, "creation_date": 1577704621, "answer_id": 59529921, "question_id": 59529896, "link": "https://stackoverflow.com/questions/59529896/how-to-convert-a-string-to-date-format-in-typescript/59529921#59529921", "title": "How to convert a string to date format in typescript?", "body": "<p>The <code>Date</code> constructor can do this for you.</p>\n\n<pre><code>const myDate:Date = new Date(1580294547189);\nconst dateAsString = myDate.toString();\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 12306627, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X4FG-4GQnJA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpsLoLuWmLCCI2JuUA9fBAZ_CMzA/photo.jpg?sz=128", "display_name": "Anusha Krishnamurthy", "link": "https://stackoverflow.com/users/12306627/anusha-krishnamurthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59529921, "answer_count": 1, "score": 0, "last_activity_date": 1577704621, "creation_date": 1577704500, "question_id": 59529896, "link": "https://stackoverflow.com/questions/59529896/how-to-convert-a-string-to-date-format-in-typescript", "title": "How to convert a string to date format in typescript?", "body": "<p>I have a number 1580294547189 and I want this to be converted into something like this </p>\n\n<p>\"Mon Dec 30 2019 16:12:27 GMT+0530 (India Standard Time)\"</p>\n\n<p>Thanks in advance </p>\n"}]