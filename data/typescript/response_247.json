[{"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "is_accepted": true, "score": 3, "last_activity_date": 1570064166, "last_edit_date": 1570064166, "creation_date": 1570058168, "answer_id": 58210459, "question_id": 58210331, "link": "https://stackoverflow.com/questions/58210331/exclude-function-types-from-an-object-type/58210459#58210459", "title": "Exclude function types from an object type", "body": "<p>This is one of the listed examples of the <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\" rel=\"nofollow noreferrer\">Distributive Conditional\nTypes</a>\nexamples on the \"Advanced Types\" page of the Typescript handbook.</p>\n\n<blockquote>\n  <p>Conditional types are particularly useful when combined with mapped types:</p>\n  \n  <pre class=\"lang-js prettyprint-override\"><code>type FunctionPropertyNames&lt;T&gt; = { [K in keyof T]: T[K] extends Function ? K : never }[keyof T];\ntype FunctionProperties&lt;T&gt; = Pick&lt;T, FunctionPropertyNames&lt;T&gt;&gt;;\n\ntype NonFunctionPropertyNames&lt;T&gt; = { [K in keyof T]: T[K] extends Function ? never : K }[keyof T];\ntype NonFunctionProperties&lt;T&gt; = Pick&lt;T, NonFunctionPropertyNames&lt;T&gt;&gt;;\n\ninterface Part {\n    id: number;\n    name: string;\n    subparts: Part[];\n    updatePart(newName: string): void;\n}\n\ntype T40 = FunctionPropertyNames&lt;Part&gt;;  // \"updatePart\"\ntype T41 = NonFunctionPropertyNames&lt;Part&gt;;  // \"id\" | \"name\" | \"subparts\"\ntype T42 = FunctionProperties&lt;Part&gt;;  // { updatePart(newName: string): void }\ntype T43 = NonFunctionProperties&lt;Part&gt;;  // { id: number, name: string, subparts: Part[] }\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://github.com/microsoft/TypeScript/search?q=NonFunctionProperties&amp;unscoped_q=NonFunctionProperties\" rel=\"nofollow noreferrer\">A quick search of the Typescript Github repo</a> reveals that this type is not currently a built-in utility type (unlike the undocumented types <a href=\"https://github.com/microsoft/TypeScript/blob/v3.6.3/src/lib/es5.d.ts#L1456-L1464\" rel=\"nofollow noreferrer\"><code>Parameters&lt;T&gt;</code> and <code>ConstructorParameters&lt;T&gt;</code></a>), so you'll have to define the <code>NonFunctionProperties</code> equivalent yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 106152, "user_id": 1108891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zUoEd.jpg?s=128&g=1", "display_name": "Shaun Luttin", "link": "https://stackoverflow.com/users/1108891/shaun-luttin"}, "is_accepted": false, "score": 3, "last_activity_date": 1570069278, "last_edit_date": 1570069278, "creation_date": 1570060781, "answer_id": 58210754, "question_id": 58210331, "link": "https://stackoverflow.com/questions/58210331/exclude-function-types-from-an-object-type/58210754#58210754", "title": "Exclude function types from an object type", "body": "<p>Here is a simplified version of Jeff's comprehensive answer and a \n<a href=\"https://www.typescriptlang.org/play/index.html#code/JYOwLgpgTgZghgYwgAgKoGdrIN4FgBQyRyIcAthAFzLphSgDmA3AccnA1SQK5kBG0FoWIDaAMXoQQAE2oZBrYpzABJEDAD21ABQBKZAF4AfOxABPAgF8CBMGYAOKMdxAIwwDSAAKUDY6h2AHLkEOgAPAAqJgY4yIpEANoA0sigyADWEGYaMMgRALrUEcn5yBAAHpAy6MjOru6eyAD8yCnUIBAAblhWCZnZuQVCtg4oALJmAMLctBpkEaOGyADyZMBgYfJQADS1Lm4e3r7+QSHhW0ZGw-gA9DfIABIa3VDIz1hgABYoAAYT07N5qMfsg7I4AHTIACaGm4AHIADYImgQFBfOBgVKYz5wGpfFAAImUak0BOQMH2DRAoNG4IId2QKjx3ygKDgyAA7nAzKCNGVyggEdxpGykTTHMyMexWexyZTDk0gA\" rel=\"nofollow noreferrer\">playground link</a>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface User {\n    name: string;\n    age: number;\n    bestFriend: User;\n    getInfo: () =&gt; any\n}\n\n// Do not worry too much about understanding this \n// until you're ready for advanced TypeScript.\ntype FunctionPropertyNames&lt;T&gt; = { \n    [K in keyof T]: T[K] extends Function ? K : never \n}[keyof T];\n\ntype MyCustomType = Omit&lt;User, FunctionPropertyNames&lt;User&gt;&gt;;\n</code></pre>\n\n<p><strong>Result:</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/6QBDW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6QBDW.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 494, "user_id": 7445826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5FvM.jpg?s=128&g=1", "display_name": "Luiz Felipe", "link": "https://stackoverflow.com/users/7445826/luiz-felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 1, "accepted_answer_id": 58210459, "answer_count": 2, "score": 1, "last_activity_date": 1570069278, "creation_date": 1570057060, "question_id": 58210331, "link": "https://stackoverflow.com/questions/58210331/exclude-function-types-from-an-object-type", "title": "Exclude function types from an object type", "body": "<p>In the following excerpt of code:</p>\n\n<pre><code>interface User {\n  name: string;\n  age: number;\n  bestFriend: User;\n  getInfo: () =&gt; any;\n}\n\ntype MyCustomType = {\n  [key in keyof User]: User[key]\n};\n</code></pre>\n\n<p><sup><a href=\"https://www.typescriptlang.org/play/index.html#code/JYOwLgpgTgZghgYwgAgKoGdrIN4FgBQyRyIcAthAFzLphSgDmA3AccnA1SQK5kBG0FoWIDaAMXoQQAE2oZBrYpzABJEDAD21ABQBKZAF4AfOxABPAgF8CBMGYAOKALJmAwt1oayAFQcoDOIpEANoA1hBmyKDI4WYaMGiYUAC6cklhEclWQgQA9LnIABIaAG5YpVhgABYoAAYu7p4+frXIdo4AdMgAmhrcAOQANoM0ECjVcGBRU1Vw6G01yABEymqaS8gw3CAIYMAaIG1+HXkFKvPV0ChwyADucJFgGsgQAB4Ig9zS18NHjhezKZwKDXTbbXb7EAAfiAA\" rel=\"nofollow noreferrer\">Playground link.</a></sup></p>\n\n<p>Is there a way to remove only the function types of that interface? I've created the <code>MyCustomType</code> type, but I did not find a way to remove the function types, such as <code>getInfo</code>.</p>\n\n<p>How can I allow only non-functions types in that <code>MyCustomType</code> type?</p>\n\n<p>P.S.: Types such as <code>User</code> should not be filtered out.</p>\n"}, {"tags": ["node.js", "typescript", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 6143, "user_id": 1316000, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f84222b8993c77ecfa9e98979ac51917?s=128&d=identicon&r=PG", "display_name": "Rodrigo Sasaki", "link": "https://stackoverflow.com/users/1316000/rodrigo-sasaki"}, "edited": false, "score": 0, "creation_date": 1570059432, "post_id": 58210348, "comment_id": 102798565, "body": "But the <code>admin-sdk</code> doesn&#39;t work with keys, it only works by reading a file"}, {"owner": {"reputation": 145536, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "reply_to_user": {"reputation": 6143, "user_id": 1316000, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f84222b8993c77ecfa9e98979ac51917?s=128&d=identicon&r=PG", "display_name": "Rodrigo Sasaki", "link": "https://stackoverflow.com/users/1316000/rodrigo-sasaki"}, "edited": false, "score": 1, "creation_date": 1570059566, "post_id": 58210348, "comment_id": 102798590, "body": "@RodrigoSasaki Nowhere in your code above are you passing in a path to a file to some SDK.  You&#39;re calling <code>require()</code>, which is just going to parse the JSON and return the object it contains.  <code>admin.initializeApp()</code> doesn&#39;t know or care where the data comes from."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12551065"}, "edited": false, "score": 0, "creation_date": 1583226963, "post_id": 58210348, "comment_id": 107035574, "body": "how did you manage this, I am having the same problem, did you set the object as an .env variable then parse it somehow? thanks"}], "tags": [], "owner": {"reputation": 145536, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "is_accepted": true, "score": 1, "last_activity_date": 1570057174, "creation_date": 1570057174, "answer_id": 58210348, "question_id": 58210258, "link": "https://stackoverflow.com/questions/58210258/how-do-i-authenticate-with-firebase-auth-without-any-json-files/58210348#58210348", "title": "How do I authenticate with Firebase Auth without any json files?", "body": "<p>There's no reason you couldn't set keys with environment variables.</p>\n\n<p>Use <code>process.env.VAR_NAME</code> to get environment variables from within your Node.js application.</p>\n"}], "owner": {"reputation": 6143, "user_id": 1316000, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f84222b8993c77ecfa9e98979ac51917?s=128&d=identicon&r=PG", "display_name": "Rodrigo Sasaki", "link": "https://stackoverflow.com/users/1316000/rodrigo-sasaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58210348, "answer_count": 1, "score": 1, "last_activity_date": 1570057174, "creation_date": 1570056409, "last_edit_date": 1570056982, "question_id": 58210258, "link": "https://stackoverflow.com/questions/58210258/how-do-i-authenticate-with-firebase-auth-without-any-json-files", "title": "How do I authenticate with Firebase Auth without any json files?", "body": "<p>I am working on a system and trying to implement authentication with Firebase Auth.</p>\n\n<p>I see that Google generates private keys on json files. And it works fine authenticating with them according to <a href=\"https://firebase.google.com/docs/admin/setup/\" rel=\"nofollow noreferrer\">this tutorial</a></p>\n\n<p>Basically setting the <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable to the path where the keys are contained.</p>\n\n<p>Or sending the data manually like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var admin = require(\"firebase-admin\");\n\nvar serviceAccount = require(\"path/to/serviceAccountKey.json\");\n\nadmin.initializeApp({\n  credential: admin.credential.cert(serviceAccount),\n  databaseURL: \"https://my-firebase-project.firebaseio.com\"\n});\n</code></pre>\n\n<p>However I don't want to hold any physical files. Our entire stack is automated (aside from certain keys that are set as ENV vars from an external parameter store), and as such everything sits in source control, but I don't want to upload a key file to source control.</p>\n\n<p>How do I authenticate with Firebase Auth without the use of any physical files?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "loops"], "answers": [{"tags": [], "owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "is_accepted": true, "score": 1, "last_activity_date": 1570056535, "creation_date": 1570056535, "answer_id": 58210280, "question_id": 58210148, "link": "https://stackoverflow.com/questions/58210148/react-typescript-map-loop-interface-error/58210280#58210280", "title": "React Typescript map loop interface error", "body": "<p>The reason for this error is that the <code>routes</code> argument of type <code>object[]</code> cannot be cast to a type of <code>RoutesType[]</code>.</p>\n\n<p>The reason that TypeScript is attempting this type-cast is that type of <code>routes</code> is inferred and expected to be <code>RoutesType[]</code>, due to the type of the <code>prop</code> argument on the map callback.</p>\n\n<p>A fix would be to revise your <code>createLinks</code> function signature like this:</p>\n\n<pre><code> /* Update routes to RoutesType[] */\n const createLinks = (routes: RoutesType[]) =&gt; {\n    return routes.map((prop: RoutesType, key: number) =&gt; {\n      return (\n        &lt;NavItem key={key}&gt;\n          &lt;NavLink to={prop.layout + prop.path} tag={NavLinkRRD} \n                   onClick={closeCollapse} activeClassName=\"active\"&gt;\n            &lt;i className={prop.icon} /&gt;\n            {prop.name}\n          &lt;/NavLink&gt;\n        &lt;/NavItem&gt;\n      );\n    });\n  };\n</code></pre>\n\n<p>This change will require that all calls to <code>createLink</code> throughout your project specficy a <code>routes</code> value that is strictly typed to <code>RoutesType[]</code></p>\n"}], "owner": {"reputation": 159, "user_id": 2095053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3920d16a913f3c1eaf3ce218ebbee975?s=128&d=identicon&r=PG", "display_name": "Filippo Rivolta", "link": "https://stackoverflow.com/users/2095053/filippo-rivolta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58210280, "answer_count": 1, "score": 1, "last_activity_date": 1570056535, "creation_date": 1570055495, "question_id": 58210148, "link": "https://stackoverflow.com/questions/58210148/react-typescript-map-loop-interface-error", "title": "React Typescript map loop interface error", "body": "<p>I am trying to interface a map loop in JavaScript, what I have done is:</p>\n\n<pre><code>interface RoutesType {\n  path: string;\n  name: string;\n  icon: string;\n  layout: string;\n}\n</code></pre>\n\n<p>the code of the map loop is: </p>\n\n<pre><code>// creates the links that appear in the left menu / Sidebar\n  const createLinks = (routes: object[]) =&gt; {\n    return routes.map((prop: RoutesType, key: number) =&gt; {\n      return (\n        &lt;NavItem key={key}&gt;\n          &lt;NavLink to={prop.layout + prop.path} tag={NavLinkRRD} onClick={closeCollapse} activeClassName=\"active\"&gt;\n            &lt;i className={prop.icon} /&gt;\n            {prop.name}\n          &lt;/NavLink&gt;\n        &lt;/NavItem&gt;\n      );\n    });\n  };\n</code></pre>\n\n<p>The error I cannot understand is the following</p>\n\n<pre><code>TypeScript error: Argument of type '(prop: RoutesType, key: number) =&gt; Element' is not assignable to parameter of type '(value: object, index: number, array: object[]) =&gt; Element'.\n  Types of parameters 'prop' and 'value' are incompatible.\n    Type '{}' is missing the following properties from type 'RoutesType': path, name, icon, layout\n</code></pre>\n\n<p>Could you help me understand this issue?\nThanks,\nF.</p>\n"}, {"tags": ["reactjs", "typescript", "material-ui", "visual-studio-2019"], "answers": [{"comments": [{"owner": {"reputation": 2771, "user_id": 5690355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hCrmlc8OCOI/AAAAAAAAAAI/AAAAAAAAACU/pNY9phnLwOc/photo.jpg?sz=128", "display_name": "Amy Pellegrini", "link": "https://stackoverflow.com/users/5690355/amy-pellegrini"}, "edited": false, "score": 1, "creation_date": 1571990184, "post_id": 58291063, "comment_id": 103428417, "body": "I find this odd as the <code>node_modules</code> folder is not included within <code>src</code>. I&#39;m having the same problem but so far no solution."}], "tags": [], "owner": {"reputation": 8796, "user_id": 94508, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pQYOS.jpg?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/94508/chrisp"}, "is_accepted": false, "score": 1, "last_activity_date": 1570554798, "creation_date": 1570554798, "answer_id": 58291063, "question_id": 58210133, "link": "https://stackoverflow.com/questions/58210133/material-ui-components-not-found-during-typescript-module-resolution/58291063#58291063", "title": "Material-UI components not found during TypeScript module resolution", "body": "<p>After some research it turns out the tsconfig include section needs to be modified from the default value to find files in subdirectories.</p>\n\n<p>Default include only finds files in the src folder</p>\n\n<pre><code>\"include\": [\n  \"src\"\n]\n</code></pre>\n\n<p>modified finds files in any subdirectory</p>\n\n<pre><code>\"include\": [\n  \"src/**/*\"\n]\n</code></pre>\n\n<p>Good reference on tsconfig.json</p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/tsconfig-json.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6212947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04399dc507065b45066785efd88720a6?s=128&d=identicon&r=PG", "display_name": "Erami", "link": "https://stackoverflow.com/users/6212947/erami"}, "is_accepted": false, "score": 6, "last_activity_date": 1580632051, "creation_date": 1580632051, "answer_id": 60024393, "question_id": 58210133, "link": "https://stackoverflow.com/questions/58210133/material-ui-components-not-found-during-typescript-module-resolution/60024393#60024393", "title": "Material-UI components not found during TypeScript module resolution", "body": "<p>I faced same problem and my fix was to add <code>\"moduleResolution\": \"node\"</code> to tsconfig.json.</p>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 3874499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca6c26dc100875bce02094ae66da716c?s=128&d=identicon&r=PG", "display_name": "user172431", "link": "https://stackoverflow.com/users/3874499/user172431"}, "edited": false, "score": 1, "creation_date": 1599141482, "post_id": 63644185, "comment_id": 112687039, "body": "Too weird.. but this also worked for me. Suspect something else was going on, but ??"}], "tags": [], "owner": {"reputation": 155, "user_id": 9745104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QNaNJ.jpg?s=128&g=1", "display_name": "Devorein", "link": "https://stackoverflow.com/users/9745104/devorein"}, "is_accepted": false, "score": 4, "last_activity_date": 1598683203, "creation_date": 1598683203, "answer_id": 63644185, "question_id": 58210133, "link": "https://stackoverflow.com/questions/58210133/material-ui-components-not-found-during-typescript-module-resolution/63644185#63644185", "title": "Material-UI components not found during TypeScript module resolution", "body": "<p>For me the problem was fixed by simply removing all the import declarations and adding them again.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7307902, "user_type": "registered", "profile_image": "https://graph.facebook.com/926453517486260/picture?type=large", "display_name": "Himanshu Jain", "link": "https://stackoverflow.com/users/7307902/himanshu-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1609690082, "creation_date": 1609690082, "answer_id": 65551957, "question_id": 58210133, "link": "https://stackoverflow.com/questions/58210133/material-ui-components-not-found-during-typescript-module-resolution/65551957#65551957", "title": "Material-UI components not found during TypeScript module resolution", "body": "<p>For me the problem solved by running <code>npm install</code> / <code>yarn install</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15351688, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1711f6c32ff2e64f2357a590143e9f28?s=128&d=identicon&r=PG", "display_name": "Annon", "link": "https://stackoverflow.com/users/15351688/annon"}, "is_accepted": false, "score": 0, "last_activity_date": 1615185406, "creation_date": 1615185406, "answer_id": 66525287, "question_id": 58210133, "link": "https://stackoverflow.com/questions/58210133/material-ui-components-not-found-during-typescript-module-resolution/66525287#66525287", "title": "Material-UI components not found during TypeScript module resolution", "body": "<p>For me the problem was solved by running <code>yarn add @material-ui/data-grid</code>\nAnd I don't see the <code>@material-ui/data-grid</code> package in your package.json so I think that is missing</p>\n"}], "owner": {"reputation": 8796, "user_id": 94508, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pQYOS.jpg?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/94508/chrisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4003, "favorite_count": 1, "answer_count": 5, "score": 11, "last_activity_date": 1615185406, "creation_date": 1570055419, "last_edit_date": 1570117429, "question_id": 58210133, "link": "https://stackoverflow.com/questions/58210133/material-ui-components-not-found-during-typescript-module-resolution", "title": "Material-UI components not found during TypeScript module resolution", "body": "<p>I have a Visual Studio 2019 (v16.3.2) React TypeScript project which includes the Material-UI components. The TypeScript compiler can not resolve any of the @material-ui imports and errors such as the following occur causing the corresponding JavaScript not to be generated.</p>\n\n<pre><code>Error   TS2307  (TS) Cannot find module '@material-ui/core/Grid'.\n</code></pre>\n\n<p>The module for the error above is</p>\n\n<pre><code>import * as React from 'react';\n\n// Material-UI\nimport Grid from '@material-ui/core/Grid';\n\n// Components\nimport SkiWeekends from './SkiWeekends';\n\nconst EZForm: React.FC = () =&gt; {\n  return (\n    &lt;React.Fragment&gt;\n      &lt;Grid container spacing={3}&gt;\n        &lt;Grid item xs={12}&gt;\n          &lt;SkiWeekends/&gt;\n        &lt;/Grid&gt;\n        &lt;Grid item xs={12}&gt;\n          A\n        &lt;/Grid&gt;\n        &lt;Grid item xs={12}&gt;\n          B\n        &lt;/Grid&gt;\n        &lt;Grid item xs={12}&gt;\n          A\n        &lt;/Grid&gt;\n      &lt;/Grid&gt;\n    &lt;/React.Fragment&gt;\n  );\n}\n\nexport default EZForm;\n</code></pre>\n\n<p>The tsconfig.json is</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es5\",\n    \"lib\": [\n      \"dom\",\n      \"dom.iterable\",\n      \"es6\"\n    ],\n    \"noImplicitAny\": true,\n    \"noImplicitThis\": true,\n    \"strictNullChecks\": true,\n    \"allowJs\": true,\n    \"skipLibCheck\": true,\n    \"esModuleInterop\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"strict\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"node\",\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react\"\n  },\n  \"include\": [\n    \"src\"\n  ]\n}\n</code></pre>\n\n<p>The package.json is</p>\n\n<pre><code>{\n  \"name\": \"msc\",\n  \"version\": \"3.0.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"@types/jest\": \"24.0.18\",\n    \"@types/node\": \"12.7.9\",\n    \"@types/react\": \"16.9.4\",\n    \"@types/react-dom\": \"16.8.2\",\n    \"@types/react-redux\": \"7.1.4\",\n    \"@types/react-router-dom\": \"5.1.0\",\n    \"@types/redux-thunk\": \"2.1.32\",\n    \"@material-ui/core\": \"4.5.0\",\n    \"@material-ui/icons\": \"4.4.3\",\n    \"@material-ui/styles\": \"4.5.0\",\n    \"react\": \"16.10.1\",\n    \"react-dom\": \"16.10.1\",\n    \"react-redux\": \"7.1.1\",\n    \"react-router-dom\": \"5.1.2\",\n    \"react-scripts\": \"3.1.2\",\n    \"redux\": \"4.0.4\",\n    \"redux-devtools-extension\": \"2.13.8\",\n    \"redux-thunk\": \"2.3.0\",\n    \"typescript\": \"3.6.3\"\n  },\n  \"scripts\": {\n    \"start\": \"rimraf ./build &amp;&amp; react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"cross-env CI=true react-scripts test --env=jsdom\",\n    \"eject\": \"react-scripts eject\",\n    \"lint\": \"eslint ./src/\"\n  },\n  \"eslintConfig\": {\n    \"extends\": \"react-app\"\n  },\n  \"browserslist\": {\n    \"production\": [\n      \"&gt;0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}\n</code></pre>\n\n<p>I have verified the @material-ui packages are installed in the node_modules folder.</p>\n\n<p><a href=\"https://i.stack.imgur.com/76Nkg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/76Nkg.png\" alt=\"enter image description here\"></a></p>\n\n<p>All other packages/imports work correctly. Thoughts on why the material-ui modules are not being resolved during TS compilation appreciated.</p>\n"}, {"tags": ["typescript", "higher-order-functions"], "answers": [{"comments": [{"owner": {"reputation": 2178, "user_id": 2589035, "user_type": "registered", "profile_image": "https://graph.facebook.com/736211406/picture?type=large", "display_name": "t1m0thy", "link": "https://stackoverflow.com/users/2589035/t1m0thy"}, "edited": false, "score": 0, "creation_date": 1570139734, "post_id": 58211142, "comment_id": 102829681, "body": "That works brilliantly, it was the example I needed. Thank you. I also adapted the final &#39;R&#39; to allow for a variation on the wrapper that if fn returns undefined, will return magicObject instead: so the final R became &quot;(R extends void ? MagicObject : R)&quot;. Thanks again."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1570064850, "creation_date": 1570064850, "answer_id": 58211142, "question_id": 58210087, "link": "https://stackoverflow.com/questions/58210087/annotating-higher-order-functions-in-typescript/58211142#58211142", "title": "Annotating Higher Order Functions in Typescript", "body": "<p>If I understand what you're trying to do, I would type <code>doStuff()</code> like this instead:</p>\n\n<pre><code>const doStuff = &lt;T extends any[], R&gt;(\n  fn: (magicObject: MagicObj, ...args: T) =&gt; R\n): ((...args: T) =&gt; R) =&gt; (...args) =&gt; fn(myMagicObject, ...args);\n</code></pre>\n\n<p>This represents a transformation from any function whose first argument is type <code>MagicObj</code> to another function of the same type but with that <code>MagicObj</code> parameter removed.  It should work for any number of parameters, by using <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#tuples-in-rest-parameters-and-spread-expressions\" rel=\"nofollow noreferrer\">rest tuples</a>.</p>\n\n<p>Does that work for you?  Okay, hope that helps.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/index.html#code/PTAECsFcGcBdQGYHsBOpYFM4EsB2BzUabAWwAcAbbBbDAE1AwA8BDcijAWAChYBPMhlABZFvmwBjAPIAjcKAC8oAN6gWALiKwUeQgF8A3DwlJccUCT6jx0uRgnwlqjaABEr0IZ7HT5ukgBlWEgEBEVQAB4AFUYmTFw6aDVcPgBtAF0AGlAAJQA+AAoeUERcTQKSMUlZcHtYTWtquWyAOjaWFHxoTSiASkU83J5e8oK2lo6unv6FQZyZwbH2zugF0oqrKttah1blrt6jbh4QdCxYXVi2SiwfM3gEXABGcIKkOQatmuyyJ804HQEH4AJk0MiQSA4LFwPwAzJpcJASDIMCgRlpAYRZipiqAUBhgihcG4ABIYCgUJCgADqqAodFcRy83BM91KwNe73Anxs31AvwRSJRKBB-20ujWylx+MJxNcZIpVNEKGgjJ4zNZ5kesM5HxEX2a-L+oHBkIw0Ml0oJkCJpPJlNAUQAFkJhBDcGruMy7uZMHAXkp-EEQggCo8nocTmBNfA-bBjQUXADdNkZGCIVCYaAJILkai1smCDwOPB8dBIBR4+E408Cq4Aa5stpIBhsk9gbDI8cWb5Y+cOYHAsFQmHcMCu6cY2c4KDQInc8LU2LMQXxUXuCW8VgK7AB9PdwV27DsvXtK4uz6+3AdYPgyPtRPo739-C5y5TZnV5jiwSt+XKzeL4FM2GBdkAA\" rel=\"nofollow noreferrer\">Link to code</a> </p>\n"}], "owner": {"reputation": 2178, "user_id": 2589035, "user_type": "registered", "profile_image": "https://graph.facebook.com/736211406/picture?type=large", "display_name": "t1m0thy", "link": "https://stackoverflow.com/users/2589035/t1m0thy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 58211142, "answer_count": 1, "score": 2, "last_activity_date": 1570064850, "creation_date": 1570055073, "question_id": 58210087, "link": "https://stackoverflow.com/questions/58210087/annotating-higher-order-functions-in-typescript", "title": "Annotating Higher Order Functions in Typescript", "body": "<p>I'm Working with a rather large JS code base, trying to migrate it to typescript and have come across a problem annotating a particular higher order function...</p>\n\n<p><code>doStuff()</code> accepts <code>fn1</code> as an argument and wraps it returning a new function that accepts all but the first of argument of <code>fn1</code>. sort of like this:</p>\n\n<pre><code>const fn1 = (arg_1, arg_2, arg_3, arg_n) =&gt; { return 'Hello World' }\n\nconst doStuff = (fn) =&gt; (...args) =&gt; {\n    argument1 = getSomeStuffHere()\n    return fn(argument1, ...args)\n}\n\nconst test = doStuff(fn1)\nlet result = test('arg2', 'arg3', 'arg4')\n</code></pre>\n\n<p>Its worth pointing out there is one <code>doStuff()</code> and LOTS of <code>fnX()</code> functions with various numbers of arguments of various type combinations that get wrapped up by it. Its important that the functions created by doStuff are correctly typed, \"any => any\" will not do!</p>\n\n<p>After A LOT of messing about I've finally come up with this:</p>\n\n<pre><code>// just for testing simplified example\ntype MagicObj = {}\nconst myMagicObject = {}\n\ntype Wrapped&lt;T, R&gt; =\n    T extends [MagicObj, any, any, any, any] ? (a: T[1], b: T[2], c: T[3], d: T[4]) =&gt; R :\n    T extends [MagicObj, any, any, any] ? (a: T[1], b: T[2], c: T[3]) =&gt; R :\n    T extends [MagicObj, any, any] ? (a: T[1], b: T[2]) =&gt; R :\n    T extends [MagicObj, any] ? (a: T[1]) =&gt; R :\n    T extends [MagicObj] ? () =&gt; R :\n    unknown;\n\nconst doStuff = &lt;T extends any[], R&gt;(fn: (...args: T) =&gt; R): Wrapped&lt;T, R&gt; =&gt; (...args) =&gt; fn(myMagicObject, ...args)\n\n// testing examples\nconst fn1 = (obj: MagicObj, p1: string, p2: boolean, p3: number): string =&gt; { return 'Hello World' }\nconst fn2 = (obj: MagicObj, p1: number, p2: string) =&gt; { return 'Hello Mars' }\nconst fn3 = (obj: MagicObj, p1: boolean) =&gt; { return 'Hello The Moon' }\n\nconst test1 = doStuff(fn1)\n// const test1: (a: string, b: boolean, c: number) =&gt; string \nlet result1 = test1('str', true, 123) \n\nconst test2 = doStuff(fn2)\n// const test2: (a: number, b: string) =&gt; string\nlet result2 = test2(123, 'str')\n\nconst test3 = doStuff(fn3)\n// const test3: (a: boolean) =&gt; string\nlet result3 = test3(true)\n\n</code></pre>\n\n<p>This seems to sort of work. VSCodes type hinting intellisense witchcraft is showing me what i'd expect/want for the test1, 2, 3 and result variables at the bottom of the example BUT the function returned by doStuff <code>(...args) =&gt; fn(myMagicObject, ...args)</code>, no matter how I try to annotate it, reports an error along the lines of <code>Type '(...args: any[]) =&gt; any' is not assignable to type 'Wrapped&lt;T, R&gt;'.ts(2322)</code></p>\n\n<p>Any ideas how this can be done?</p>\n"}, {"tags": ["javascript", "algorithm", "typescript", "cluster-analysis"], "comments": [{"owner": {"reputation": 14667, "user_id": 535480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jBU8R.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/535480/james"}, "edited": false, "score": 1, "creation_date": 1570058018, "post_id": 58210062, "comment_id": 102798294, "body": "Say keywords 1, 13 and 47 share the same 3 urls [a,b,c].  Your code will build groups of [1,13,47] and then [13,47] - is that desired behavior?  It&#39;s really hard to eyeball your dataset and expected results can you pare that down to something that shows the problem within say 10 records?"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 12087868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBpB04bhjS5C34Fea8YGw1HOmH1MJLHXwNDEXIOBQ=k-s128", "display_name": "Abhishek Bag", "link": "https://stackoverflow.com/users/12087868/abhishek-bag"}, "is_accepted": false, "score": 1, "last_activity_date": 1570056996, "creation_date": 1570056996, "answer_id": 58210326, "question_id": 58210062, "link": "https://stackoverflow.com/questions/58210062/how-to-write-grouping-algorithm-that-groups-items-in-dataset-by-having-3-or-more/58210326#58210326", "title": "How to write grouping algorithm that groups items in dataset by having 3 or more similar properties", "body": "<p>One of the possible problems could be the way you are filtering the <code>dataset</code> array which is being looped through and being filtered inside its own loop. You can filter the <code>dataset</code> and remove the current  keyword and put it in another variable and then foreach on that instead of modifying <code>dataset</code> itself. </p>\n"}, {"tags": [], "owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "is_accepted": false, "score": 1, "last_activity_date": 1570059088, "last_edit_date": 1570059088, "creation_date": 1570058157, "answer_id": 58210456, "question_id": 58210062, "link": "https://stackoverflow.com/questions/58210062/how-to-write-grouping-algorithm-that-groups-items-in-dataset-by-having-3-or-more/58210456#58210456", "title": "How to write grouping algorithm that groups items in dataset by having 3 or more similar properties", "body": "<blockquote>\n  <p>Looking at the result, I don't think this is correct because this results in 135 \"groups\" and the expected number is 87, and the original code produces 88</p>\n</blockquote>\n\n<p>I think your issue is right at the top of your code</p>\n\n<pre><code>  let dataset = results;\n  let groups: any[] = [];\n\n  dataset.forEach((current: Result) =&gt; {\n    const group = { volume: 0, items: [current] };\n    dataset = dataset.filter(el =&gt; el.keyword !== current.keyword);\n</code></pre>\n\n<p>You're mutating <code>dataset</code> inside the <code>dataSet.forEach</code> function</p>\n\n<p>I think that needs to be</p>\n\n<pre><code>  //let dataset = results; remove this\n  let groups: any[] = [];\n\n  results.forEach((current: Result) =&gt; {\n    const group = { volume: 0, items: [current] };\n    const dataset = results.filter(el =&gt; el.keyword !== current.keyword);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1565, "user_id": 5093377, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9O8p.jpg?s=128&g=1", "display_name": "Milan Velebit", "link": "https://stackoverflow.com/users/5093377/milan-velebit"}, "is_accepted": false, "score": 1, "last_activity_date": 1570187906, "last_edit_date": 1570187906, "creation_date": 1570104981, "answer_id": 58218934, "question_id": 58210062, "link": "https://stackoverflow.com/questions/58210062/how-to-write-grouping-algorithm-that-groups-items-in-dataset-by-having-3-or-more/58218934#58218934", "title": "How to write grouping algorithm that groups items in dataset by having 3 or more similar properties", "body": "<p>This can be simplified into a single <code>reduce</code> fn invocation to avoid side-effects and confusion:</p>\n\n<pre><code>const out = data.reduce((acc, current, index) =&gt; {\n  const maybeGroup = acc.findIndex(\n    el =&gt; _.intersection(current.urls, el.urls).length &gt; 3\n  );\n  if (maybeGroup !== -1 || maybeGroup === 0) {\n    if(!acc[maybeGroup].searches.includes(current.keyword)) {\n      acc[maybeGroup].searches.push(current.keyword);\n      return acc;\n    }\n    return acc;\n  } else {\n    acc.push({\n      mainKeyword: current.keyword,\n      searches: [],\n      urls: current.urls\n    });\n    return acc;\n  }\n}, []);\nconsole.log(out.map(x =&gt; _.pick(x, ['mainKeyword', 'searches'])))\n</code></pre>\n\n<p>This ignores the counting &amp; sorting logic of course but that can be easily added into the existing code. </p>\n"}], "owner": {"reputation": 120, "user_id": 8714563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pKW9d13OOvM/AAAAAAAAAAI/AAAAAAAAAD4/ZBt-eZwWewY/photo.jpg?sz=128", "display_name": "Jak\u0161a Mali\u0161i\u0107", "link": "https://stackoverflow.com/users/8714563/jak%c5%a1a-mali%c5%a1i%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1570187906, "creation_date": 1570054865, "last_edit_date": 1570101076, "question_id": 58210062, "link": "https://stackoverflow.com/questions/58210062/how-to-write-grouping-algorithm-that-groups-items-in-dataset-by-having-3-or-more", "title": "How to write grouping algorithm that groups items in dataset by having 3 or more similar properties", "body": "<p>I'm building a tool for my client which groups keywords together based on the top 10 Google search URLs. The keyword is represented as a JavaScript object containing an array of URLs. The grouping criteria is that <strong>two keywords</strong> belong to the same group if they have <strong>3 or more URLs in common</strong>. Also, there should be <strong>no keyword duplication</strong> in generated groups and the total number of generated groups is not predefined before the grouping. I would appreciate any advice on the <em>logic</em> part of this problem, thanks!</p>\n\n<p>So far I managed to develop the algorithm provided below, but it still makes duplicates and doesn't group keyword 100% right (some keywords should be in the same group but they are not).</p>\n\n<pre><code>function makeKeywordGroupsNew(results: Result[], uid: string): Group[] {\n  let dataset = results;\n  let groups: any[] = [];\n\n  // loop thru all records in dataset\n  dataset.forEach((current: Result) =&gt; {\n    // initialize the group with the current keyword in it\n    const group = { volume: 0, items: [current] };\n    // remove the current keyword from the dataset\n    dataset = dataset.filter(el =&gt; el.keyword !== current.keyword);\n    // loop thru the new dataset and push the other keyword into the group if it has &gt;=3 urls in common with current keyword\n    dataset.forEach((other: Result) =&gt; {\n      const urlsInCommon = _.intersection(current.urls, other.urls);\n      if (urlsInCommon.length &gt;= 3) {\n        group.items.push(other);\n      }\n    });\n\n    // sum the keyword volumes to form the group volume - not important for the core logic\n    // @ts-ignore\n    group.volume = _.sum(group.items.map(item =&gt; item.volume));\n    // sort keywords in the formed group by volume - not important for the core logic\n    // @ts-ignore\n    group.items = group.items\n      .sort((a, b) =&gt; {\n        if (a.volume &lt; b.volume) return 1;\n        if (a.volume &gt; b.volume) return -1;\n        return 0;\n      })\n      .map(el =&gt; el.keyword);\n    // add the newly formed group to the groups array (the result)\n    groups.push(group);\n  });\n\n  // exclude the groups with only one keyword inside\n  groups = groups.filter(group =&gt; group.items.length &gt; 1);\n  // delete keyword duplicates inside of the group\n  groups = groups.map(group =&gt; ({ ...group, items: _.uniq(group.items) }));\n  // form the correct result object shape - not important for the core logic\n  return groups.map(group =&gt; ({\n    uid,\n    main: group.items[0],\n    keywords: group.items.slice(1, group.length),\n    volume: group.volume\n  }));\n}\n</code></pre>\n\n<p>I expected the output of <a href=\"https://pastebin.com/ZiAsXhKP\" rel=\"nofollow noreferrer\">input.json</a> to be <a href=\"https://pastebin.com/DQKZRXSr\" rel=\"nofollow noreferrer\">output.csv</a>, but my solution either puts fewer keywords in a group or makes the wrong groups.</p>\n"}, {"tags": ["javascript", "typescript", "fabricjs", "tiff"], "comments": [{"owner": {"reputation": 13379, "user_id": 3551786, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/iCAVo.png?s=128&g=1", "display_name": "Durga", "link": "https://stackoverflow.com/users/3551786/durga"}, "edited": false, "score": 0, "creation_date": 1570106017, "post_id": 58209996, "comment_id": 102814243, "body": "Use <a href=\"http://fabricjs.com/docs/fabric.Image.html#.fromURL\" rel=\"nofollow noreferrer\">fabric.Image.fromURL</a>. <a href=\"https://stackoverflow.com/a/36975511/3551786\">stackoverflow.com/a/36975511/3551786</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1746, "user_id": 904375, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ebTfV.jpg?s=128&g=1", "display_name": "Zeeshan Siddiqui", "link": "https://stackoverflow.com/users/904375/zeeshan-siddiqui"}, "edited": false, "score": 0, "creation_date": 1570813457, "post_id": 58333100, "comment_id": 103046344, "body": "Thanks a lot! So it works greate on the 2d context where we have the putImageData, but when I use it with webgl, should I be using drawPixels? What&#39;s the alternative when using webgl?"}, {"owner": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "reply_to_user": {"reputation": 1746, "user_id": 904375, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ebTfV.jpg?s=128&g=1", "display_name": "Zeeshan Siddiqui", "link": "https://stackoverflow.com/users/904375/zeeshan-siddiqui"}, "edited": false, "score": 0, "creation_date": 1570837089, "post_id": 58333100, "comment_id": 103054090, "body": "Why would you use webgl here? The only operation you&#39;ll do on this canvas is to put the ImageData on it. 2d context will be as fast as webgl or even faster (webgl contexts tend to be slower to initialise)."}, {"owner": {"reputation": 1746, "user_id": 904375, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ebTfV.jpg?s=128&g=1", "display_name": "Zeeshan Siddiqui", "link": "https://stackoverflow.com/users/904375/zeeshan-siddiqui"}, "edited": false, "score": 0, "creation_date": 1571069415, "post_id": 58333100, "comment_id": 103109340, "body": "I have 8MB TIFF images to render on the canvas. In some situations I will have multiple (upto 9) TIFF images to render on the same canvas with different opacity overlayed on top of each other.  My request for webgl was to figure out if there are any performance issues between the 2d and webgl implementations. Thanks."}], "tags": [], "owner": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "is_accepted": true, "score": 2, "last_activity_date": 1570757403, "creation_date": 1570757403, "answer_id": 58333100, "question_id": 58209996, "link": "https://stackoverflow.com/questions/58209996/unable-to-render-tiff-images-and-add-it-as-a-fabric-object/58333100#58333100", "title": "Unable to render TIFF images and add it as a Fabric Object", "body": "<p>I didn't find any mention of something able to handle ImageBitmap in fabric's github repo.</p>\n\n<p>However, you can very well create a Fabric.Image from an HTMLCanvasElement.\nSo you would have to draw this ImageBitmap on a canvas, and if we're going to use a canvas anyway, better to do it at the previous step, when you get an ImageData:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var scene = new fabric.Canvas('fabric');\r\nscene.setHeight(500);\r\nscene.setWidth(500);\r\n\r\nfetch( \"https://upload.wikimedia.org/wikipedia/commons/d/d8/Example.tiff\" )\r\n  .then( (resp) =&gt; resp.arrayBuffer() )\r\n  .then( makeFabricImageFromTiff )\r\n  .then( (fabricImage) =&gt; scene.add( fabricImage ) );\r\n\r\nfunction makeFabricImageFromTiff( buffer ) {\r\n  // Using UTIF.js to decode the array buffer and convert it to ImageData\r\n  const ifds = UTIF.decode( buffer );\r\n  UTIF.decodeImage( buffer, ifds[ 0 ] );\r\n  const timage = ifds[ 0 ];\r\n  const array = new Uint8ClampedArray( UTIF.toRGBA8( timage ) );\r\n  // Forming image Data\r\n  const imageData = new ImageData( array, timage.width, timage.height );\r\n  // a temporary canvas element\r\n  const canvas = document.createElement( 'canvas' );\r\n  canvas.width = timage.width;\r\n  canvas.height = timage.height;\r\n  // on which we draw the ImageData\r\n  canvas.getContext( '2d' )\r\n    .putImageData( imageData, 0, 0 );\r\n  // before converting it to a Fabric.Image instance\r\n  return new fabric.Image( canvas, { left: 50, top: 50 } );\r\n}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>canvas { border: 1px solid; }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdn.jsdelivr.net/gh/photopea/UTIF.js/UTIF.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/2.4.4/fabric.min.js\"&gt;&lt;/script&gt;\r\n&lt;canvas id=\"fabric\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1746, "user_id": 904375, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ebTfV.jpg?s=128&g=1", "display_name": "Zeeshan Siddiqui", "link": "https://stackoverflow.com/users/904375/zeeshan-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 58333100, "answer_count": 1, "score": 0, "last_activity_date": 1570757403, "creation_date": 1570054396, "question_id": 58209996, "link": "https://stackoverflow.com/questions/58209996/unable-to-render-tiff-images-and-add-it-as-a-fabric-object", "title": "Unable to render TIFF images and add it as a Fabric Object", "body": "<p>I've read the tutorials: <a href=\"http://fabricjs.com/articles\" rel=\"nofollow noreferrer\">http://fabricjs.com/articles</a> and the docs about Fabric Objects.</p>\n\n<p>I was able to load JPG and PNG images, but in my project I need to load TIFF images onto the canvas and be able to apply filters on it. I'm able to render TIFF images using the canvas context, but whenever 'renderAll()' is called it clears the context and my TIFF image is cleared. Also I cannot perform other operations like zoom, pan, brightness and contrast since I can't render it.</p>\n\n<p>Can someone please help me understand how I can convert a TIFF image into a Fabric Object so that I can do all standard fabric.Object related operations on it.</p>\n\n<p>Here are the steps I followed:</p>\n\n<ol>\n<li><p>To load a mock TIFF image I'm reading it as an arraybuffer.</p>\n\n<pre><code>public loadMockTiffImage() {\n// Create a new XMLHttpRequest object to read the mock TIFF image as ArrayBuffer\nconst xhr = new XMLHttpRequest();\n\n// Configure it: GET-request for the URL\nxhr.open('GET', 'assets/tif/sample.tif', true);\nxhr.responseType = 'arraybuffer';\nxhr.timeout = 10000; // timeout in ms, 10 seconds\n\n// Send the request over the network\nxhr.send();\n\n// After the response is received, load it\nxhr.onload = () =&gt; {\n  // analyze HTTP status of the response\n  if (xhr.status !== 200) {\n    // throw error incase status is not 200\n    console.log(`Error ${xhr.status}: ${xhr.statusText}`);\n  } else {\n    // Show the result\n    console.log(`Done, got ${xhr.response.byteLength} bytes`);\n    console.log(xhr.response);\n    // Add to canvas the XHR response which is of type ArrayBuffer\n    this.addTiffImageOnCanvas(xhr.response);\n  }\n};\n\n// Show progress of loading the bytes\nxhr.onprogress = event =&gt; {\n  if (event.lengthComputable) {\n    console.log(`Received ${event.loaded} of ${event.total} bytes`);\n  } else {\n    console.log(`Received ${event.loaded} bytes`); // no Content-Length\n  }\n};\n\n// Log any network request errors\nxhr.onerror = () =&gt; {\n  console.log('Request failed!');\n};\n}\n</code></pre></li>\n<li><p>Next I use UTIF.js to decode the ArrayBuffer and convert it to ImageBitmap so that I can use canvas.drawImage() to render it on the canvas. <strong>How do I convert this ImageBitmap/ArrayBuffer to a FabricJS object?</strong></p>\n\n<pre><code>private addTiffImageOnCanvas(buffer: ArrayBuffer) {\n// Using UTIF.js to decode the array buffer and convert it to ImageBitmap\nconst ifds = UTIF.decode(buffer);\nUTIF.decodeImage(buffer, ifds[0]);\nconst timage = ifds[0];\nconst array = new Uint8ClampedArray(UTIF.toRGBA8(timage));\n// Forming image Data\nconst imageData = new ImageData(array, timage.width, timage.height);\nlet ibm: ImageBitmap = null;\nconst bmPromise: Promise&lt;ImageBitmap&gt; = createImageBitmap(imageData);\n\nbmPromise.then(bitmap =&gt; {\n  ibm = bitmap;\n  fabric.Image.fromObject(ibm, image =&gt; {\n     // TODO: How or What should I do now?\n  });\n});\n</code></pre>\n\n<p>}</p></li>\n</ol>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["typescript", "generics", "types", "subtyping"], "comments": [{"owner": {"reputation": 2179, "user_id": 8233039, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155537737819292/picture?type=large", "display_name": "Flavio Vilante", "link": "https://stackoverflow.com/users/8233039/flavio-vilante"}, "edited": false, "score": 0, "creation_date": 1576707575, "post_id": 58209952, "comment_id": 104990582, "body": "<a href=\"https://stackoverflow.com/a/59363875/8233039\">this answer</a> is very detailed about this error message. See if you can solve your problem with it."}], "answers": [{"tags": [], "owner": {"reputation": 1476, "user_id": 1372883, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/127986174d1281a23820584baecc0ea8?s=128&d=identicon&r=PG", "display_name": "ed&#39;", "link": "https://stackoverflow.com/users/1372883/ed"}, "is_accepted": true, "score": 3, "last_activity_date": 1570056108, "last_edit_date": 1570056108, "creation_date": 1570055767, "answer_id": 58210184, "question_id": 58209952, "link": "https://stackoverflow.com/questions/58209952/generic-function-subtype-constraint-error-and-confusion/58210184#58210184", "title": "Generic Function Subtype Constraint Error and Confusion", "body": "<p>The \"problem\" is this: <code>T extends (...args: any[]) =&gt; any</code></p>\n\n<p>Its more visualisable if you see the below version:</p>\n\n<pre><code>export function logFn&lt;T extends (...args: any[]) =&gt; any&gt;(fn: T): T {\n  return (a, b) =&gt; fn(a, b);\n}\n</code></pre>\n\n<p>You will see the error holds</p>\n\n<blockquote>\n  <p>Type '(a: any, b: any) => any' is not assignable to type 'T'.\n    '(a: any, b: any) => any' is assignable to the constraint of type 'T', but 'T' could be instantiated with a different subtype of constraint '(...args: any[]) => any'.</p>\n</blockquote>\n\n<p>Both of the below are valid as far as <code>T extends (...args: any[]) =&gt; any</code> goes</p>\n\n<ol>\n<li><code>logFn((a, b) =&gt; a + b)</code></li>\n<li><code>logFn((a, b, c) =&gt; c)</code></li>\n</ol>\n\n<p>But if you refer back to the example I gave, the inner definition as:</p>\n\n<pre><code>return (a, b) =&gt; fn(a, b);\n</code></pre>\n\n<p>So option 2. will throw an error here, which is why typescript is warning you about it.</p>\n\n<pre><code>logFn&lt;T extends (...args: any[]) =&gt; any&gt;(fn: T): T\n</code></pre>\n\n<p>We are going to receive a type <code>T</code> and return a type <code>T</code>. <code>return (a, b) =&gt; fn(a, b);</code> is a valid return type, it does extend <code>(...args: any[]) =&gt; any</code> but how can you be sure that the value passed to <code>fn</code> (<code>T</code>) matches that signature? (i.e. it could be another incompatible subtype of <code>(...args: any[]) =&gt; any</code>)</p>\n\n<p>Not sure if I explained well enough, but thats my understanding</p>\n\n<p>The reason your workaround is fine is because by adding <code>(...args: Parameters&lt;T&gt;) =&gt; ReturnType&lt;T&gt;</code> you are telling the compiler the parameters &amp; return types must match those of the passed function, as opposed to <code>T</code> which could be any other function definition</p>\n"}], "owner": {"reputation": 163, "user_id": 5322465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf03c6621f736b501517439fc931c14?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5322465/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 58210184, "answer_count": 1, "score": 3, "last_activity_date": 1570056108, "creation_date": 1570054081, "question_id": 58209952, "link": "https://stackoverflow.com/questions/58209952/generic-function-subtype-constraint-error-and-confusion", "title": "Generic Function Subtype Constraint Error and Confusion", "body": "<p>I was playing with the idea of a simple wrapper function using TypeScript. I ended up getting something working with the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export function logFn&lt;T extends (...args: any[]) =&gt; any&gt;(\n  fn: T,\n): (...args: Parameters&lt;T&gt;) =&gt; ReturnType&lt;T&gt;  {\n  const log = (...args: Parameters&lt;T&gt;): ReturnType&lt;T&gt; =&gt; {\n    console.log('log')\n    return fn(...args)\n  }\n  return log\n}\n</code></pre>\n\n<p>This works and the compiler is happy. My question is around my initial attempt which looked more like this</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export function logFn&lt;T extends (...args: any[]) =&gt; any&gt;(\n  fn: T,\n): T  {\n  const log: T = (...args) =&gt; {\n    console.log('log')\n    return fn(...args)\n  }\n  return log\n}\n</code></pre>\n\n<p>This was giving me an error at the <code>log</code> variable declaration with the error:</p>\n\n<pre><code>Type '(...args: any[]) =&gt; any' is not assignable to type 'T'.\n  '(...args: any[]) =&gt; any' is assignable to the constraint of type 'T', but 'T' could be instantiated with a different subtype of constraint '(...args: any[]) =&gt; any'.\n</code></pre>\n\n<p>It seems that there's some subtype relationship constraint that I can't fully wrap my head around (this error isn't doing me too many favors either). Was hoping someone with a better mental grasp on this stuff could give me a decent explanation so I can be less confused by this behavior (which I'm sure is correct).</p>\n"}, {"tags": ["angular", "twitter-bootstrap", "typescript", "angular-forms", "angular-validation"], "comments": [{"owner": {"reputation": 461, "user_id": 9206672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2MR1aNIYMTk/AAAAAAAAAAI/AAAAAAAAAA8/3ucBnz3t3tk/photo.jpg?sz=128", "display_name": "John Gallego", "link": "https://stackoverflow.com/users/9206672/john-gallego"}, "edited": false, "score": 0, "creation_date": 1570054311, "post_id": 58209865, "comment_id": 102797532, "body": "Binding the &quot;terms&quot; control to the input via &quot;formControlName&quot; should be enough. No need to bind [checked] to it as well. In fact I suspect that might be the issue."}, {"owner": {"reputation": 10525, "user_id": 1186050, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/1aeaf46e73772e9f9c7784bf0ee0705c?s=128&d=identicon&r=PG", "display_name": "user1186050", "link": "https://stackoverflow.com/users/1186050/user1186050"}, "reply_to_user": {"reputation": 461, "user_id": 9206672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2MR1aNIYMTk/AAAAAAAAAAI/AAAAAAAAAA8/3ucBnz3t3tk/photo.jpg?sz=128", "display_name": "John Gallego", "link": "https://stackoverflow.com/users/9206672/john-gallego"}, "edited": false, "score": 0, "creation_date": 1570054866, "post_id": 58209865, "comment_id": 102797640, "body": "ya I&#39;ve tried without. Just tried again and still no ability to invalidate the form when unchecking the checkbox. I&#39;m just wondering if I should try using a ngx-bootstrap element instead? I don&#39;t think that would matter but? I&#39;ll remove it from the OP"}], "answers": [{"comments": [{"owner": {"reputation": 10525, "user_id": 1186050, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/1aeaf46e73772e9f9c7784bf0ee0705c?s=128&d=identicon&r=PG", "display_name": "user1186050", "link": "https://stackoverflow.com/users/1186050/user1186050"}, "edited": false, "score": 0, "creation_date": 1570055393, "post_id": 58210110, "comment_id": 102797745, "body": "ah ha! I&#39;m kinda new to Angular and didn&#39;t know about that being a newbie. Thanks!"}], "tags": [], "owner": {"reputation": 461, "user_id": 9206672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2MR1aNIYMTk/AAAAAAAAAAI/AAAAAAAAAA8/3ucBnz3t3tk/photo.jpg?sz=128", "display_name": "John Gallego", "link": "https://stackoverflow.com/users/9206672/john-gallego"}, "is_accepted": true, "score": 1, "last_activity_date": 1570055257, "creation_date": 1570055257, "answer_id": 58210110, "question_id": 58209865, "link": "https://stackoverflow.com/questions/58209865/angular-7-form-and-bootstrap-checkbox-validates-form-when-checked-but-doesnt-in/58210110#58210110", "title": "Angular 7 form and Bootstrap checkbox validates form when checked but doesn&#39;t invalidate when unchecked", "body": "<p>Ah, didn't see it before:</p>\n\n<p>You need to use Validators.requiredTrue in order for the checkbox control to work properly.</p>\n"}], "owner": {"reputation": 10525, "user_id": 1186050, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/1aeaf46e73772e9f9c7784bf0ee0705c?s=128&d=identicon&r=PG", "display_name": "user1186050", "link": "https://stackoverflow.com/users/1186050/user1186050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 58210110, "answer_count": 1, "score": 0, "last_activity_date": 1570055257, "creation_date": 1570053376, "last_edit_date": 1570054946, "question_id": 58209865, "link": "https://stackoverflow.com/questions/58209865/angular-7-form-and-bootstrap-checkbox-validates-form-when-checked-but-doesnt-in", "title": "Angular 7 form and Bootstrap checkbox validates form when checked but doesn&#39;t invalidate when unchecked", "body": "<p>I have a register form with a checkbox for the T of S. The 'Register' button (the form) gets enabled when the form is valid, and disabled when invalid. I can fill out the form and select the checkbox and the register button becomes enabled/clickable. So the form is valid, but when I uncheck it, the register button remains enabled/clickable and the form remains valid. It doesn't become invalid!</p>\n\n<p>FYI - I added a couple of statements into the input 'name' and '[checked]' to see if that would get it to work but had no luck.</p>\n\n<p>Here is my form and some of the .ts code. Some code is left out to keep it short.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.css']\r\n})\r\nexport class RegisterComponent implements OnInit, AfterViewInit {\r\n  // some variables here removed\r\n  registerForm: FormGroup;\r\n  bsConfig: Partial&lt;BsDatepickerConfig&gt;;\r\n  terms = false;\r\n  \r\n  \r\n\r\n  constructor(private authService: AuthService, private router: Router,\r\n              private alertService: AlertService, private fb: FormBuilder, private zone: NgZone) {}\r\n\r\n  ngOnInit() {\r\n    this.bsConfig = {\r\n      containerClass: 'theme-red'\r\n    };\r\n    this.createRegisterForm();\r\n  }\r\n  \r\n  createRegisterForm() {\r\n    this.registerForm = this.fb.group({\r\n      terms: ['', Validators.required],\r\n    });\r\n  }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form [formGroup]=\"registerForm\" (ngSubmit)=\"register()\"&gt;\r\n  &lt;div class=\"form-group\"&gt;\r\n    &lt;div class=\"form-check\"&gt;\r\n      &lt;input class=\"form-check-input\" id=\"gridCheck\" \r\n         [ngClass]=\"{'is-invalid': registerForm.get('terms').errors &amp;&amp; registerForm.get('terms').touched}\" \r\n         name=\"terms\" \r\n         type=\"checkbox\"  \r\n         formControlName=\"terms\"&gt;\r\n      &lt;label class=\"form-check-label\" for=\"gridCheck\"&gt;Agree to terms&lt;/label&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n\r\n  &lt;div class=\"form-group text-center\"&gt;\r\n    &lt;button class=\"btn btn-yb w-100\" [disabled]=\"!registerForm.valid\" type=\"submit\"&gt;\r\n        &lt;span *ngIf=\"loadingRegister\" class=\"spinner-border spinner-border-sm color-yb-white\" role=\"status\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n        &lt;span class=\"sr-only\"&gt;Loading...&lt;/span&gt;\r\n        &lt;span *ngIf=\"!loadingRegister\"&gt;Register&lt;/span&gt;\r\n    &lt;/button&gt;\r\n  &lt;/div&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["typescript", "record"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 1, "creation_date": 1570055461, "post_id": 58209636, "comment_id": 102797760, "body": "Please post code. this is incredibly broad"}], "answers": [{"comments": [{"owner": {"reputation": 4399, "user_id": 7385798, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/bc11dd8b186448da419102d83c48a138?s=128&d=identicon&r=PG&f=1", "display_name": "tmp dev", "link": "https://stackoverflow.com/users/7385798/tmp-dev"}, "edited": false, "score": 0, "creation_date": 1570061615, "post_id": 58209727, "comment_id": 102798962, "body": "Thanks for this, I have one more requirement where I know the values only later on.  How do I do this?"}], "tags": [], "owner": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "is_accepted": true, "score": 1, "last_activity_date": 1570052460, "creation_date": 1570052460, "answer_id": 58209727, "question_id": 58209636, "link": "https://stackoverflow.com/questions/58209636/typescript-recordtype-add-items-dynamically/58209727#58209727", "title": "typescript recordtype add items dynamically", "body": "<p>If I understood your need:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type DataCount = Record&lt;'total' | 'success' | 'error', number&gt;;\n\nconst sample: DataCount = {\n  total: 0,\n  success: 0,\n  error: 0\n}\n\n// increment count\n</code></pre>\n"}], "owner": {"reputation": 4399, "user_id": 7385798, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/bc11dd8b186448da419102d83c48a138?s=128&d=identicon&r=PG&f=1", "display_name": "tmp dev", "link": "https://stackoverflow.com/users/7385798/tmp-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1570060268, "accepted_answer_id": 58209727, "answer_count": 1, "score": -1, "last_activity_date": 1570052460, "creation_date": 1570051833, "question_id": 58209636, "link": "https://stackoverflow.com/questions/58209636/typescript-recordtype-add-items-dynamically", "closed_reason": "Needs more focus", "title": "typescript recordtype add items dynamically", "body": "<p>I need to store the following data in any structure.</p>\n\n<p>\"Total Count\": \n\"Error Count\": \n\"Success Count\": </p>\n\n<p>The keys are known upfront, however the values will only be determined at different stages in the processing cycle.  What is the best data structure which I can use to store this data.  I can convert the keys to an enum and use the record type but not sure how to proceed from there.</p>\n"}, {"tags": ["typescript", "pass-by-reference", "pass-by-name"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 1, "creation_date": 1570049879, "post_id": 58209234, "comment_id": 102796305, "body": "You could create a union type, so you&#39;d only be able to pass in <code>x</code> or <code>y</code> or <code>z</code> or <code>w</code>. However, it feels like there is a better way to go about this but there is not enough information about the actual problem."}, {"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570050769, "post_id": 58209234, "comment_id": 102796591, "body": "A union type will improve the situation, you are correct. I will still need to define my properties twice - once in the class and another time in the union type, but it&#39;s better than what I have now. The actual problem isn&#39;t relevant here, I&#39;m basically looking for a way to pass a property by reference."}], "answers": [{"comments": [{"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "edited": false, "score": 0, "creation_date": 1570088802, "post_id": 58209527, "comment_id": 102805464, "body": "Thanks, this works fine, if I make all my properties public. I don&#39;t want to make them public, so I&#39;ll resort to writing the union type manually"}, {"owner": {"reputation": 475, "user_id": 991985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6dfdf708b992e8c68577f8c572288269?s=128&d=identicon&r=PG", "display_name": "bbrownd", "link": "https://stackoverflow.com/users/991985/bbrownd"}, "edited": false, "score": 2, "creation_date": 1570090665, "post_id": 58209527, "comment_id": 102806279, "body": "You can always secure those properties after the fact:  <code>export interface MySecureClass extends Omit&lt;MyClass, &quot;a&quot;|&quot;b&quot;&gt; {};</code> <code>export const MySecureClass: new () =&gt; MySecureClass = MyClass;</code>"}], "tags": [], "owner": {"reputation": 1476, "user_id": 1372883, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/127986174d1281a23820584baecc0ea8?s=128&d=identicon&r=PG", "display_name": "ed&#39;", "link": "https://stackoverflow.com/users/1372883/ed"}, "is_accepted": true, "score": 2, "last_activity_date": 1570051272, "creation_date": 1570051272, "answer_id": 58209527, "question_id": 58209234, "link": "https://stackoverflow.com/questions/58209234/typescript-pass-property-by-reference/58209527#58209527", "title": "Typescript pass property by reference", "body": "<p>You could use <code>keyof</code> and <code>number extends</code> maybe? To allow passing only keys of the class which are numbers.</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/MYGwhgzhAECyCeBhcVoG8BQ1oAcCuARiAJbDRgBc0AdngLYECmATtALzQAMA3FroSTIEqtBi3Zde2fEVLRgVCABdmxagHMJAIi28+MwdDXBmjOo2pKAFH2wBrRvCqZsr6AG0A0kerQH8AHsAMzgkFAgAXQBaAH4ReiZWRgAPJQsAExgEZEgILwjoGOhvEUYANxZbaABfd39g0JyoCL4ASnQqpQALYjz-CIBqAakajGqMDGAA6mVoNNmOakYAd0bwq1a9eaUAOmNTc0srLTAtTYxtveoTMwtrLQIz3kv926OtYCeLxmUrm8P7ukvkA\" rel=\"nofollow noreferrer\">Playground here</a></p>\n\n<pre><code>class MyClass {\n  public a: number = 0;\n  public b: number = 0;\n  public c: string = \"\";\n\n  public increment(\n     key: {\n      [K in keyof MyClass]-?: number extends MyClass[K] ? K : never\n    }[keyof MyClass]\n  ) {\n    this[key]++;\n  }\n}\n\nconst test = new MyClass();\n\ntest.increment(\"a\");\ntest.increment(\"b\");\ntest.increment(\"c\"); // fail\ntest.increment(\"d\"); // fail\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "edited": false, "score": 0, "creation_date": 1570088793, "post_id": 58209531, "comment_id": 102805458, "body": "Thanks, this works fine, if I make all my properties public. I don&#39;t want to make them public, so I&#39;ll resort to writing the union type manually."}], "tags": [], "owner": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "is_accepted": false, "score": 1, "last_activity_date": 1570051295, "creation_date": 1570051295, "answer_id": 58209531, "question_id": 58209234, "link": "https://stackoverflow.com/questions/58209234/typescript-pass-property-by-reference/58209531#58209531", "title": "Typescript pass property by reference", "body": "<p>A solution would be to type p with <code>keyof MyClass</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>     increment(p: keyof MyClass): void {\n       this[p]++;\n     }\n</code></pre>\n\n<p>But it wont work. Because your number fields are <code>private</code>, and because in keys of MyClass you have the function <code>increment</code> itself.</p>\n\n<p>A solution would be to extract only fields that are numbers:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type OnlyNumberKeys&lt;O&gt; = {\n  [K in keyof O]: O[K] extends number ? K : never;\n}[keyof O];\n</code></pre>\n\n<p>Then use this type in <code>increment</code> function:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>class MyClass {\n     x: number;\n     y: number;\n     z: number;\n     w: number;\n\n     increment(p: OnlyNumberKeys&lt;MyClass&gt;): void {\n       this[p]++;\n     }\n}\n</code></pre>\n\n<p>Now <code>p</code> accepts only <code>'x' | 'y' | 'z' | 'x'</code>.</p>\n\n<p>Note that I had to remove all <code>private</code> keywords. I don't know if there is a solution for that.</p>\n"}], "owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 58209527, "answer_count": 2, "score": 1, "last_activity_date": 1570051295, "creation_date": 1570049768, "last_edit_date": 1570050782, "question_id": 58209234, "link": "https://stackoverflow.com/questions/58209234/typescript-pass-property-by-reference", "title": "Typescript pass property by reference", "body": "<p>I have a Typescript class with 4 different properties, like this:</p>\n\n<pre><code>class MyClass {\n     private x: number;\n     private y: number;\n     private z: number;\n     private w: number;\n}\n</code></pre>\n\n<p>I want to create four functions that increment these properties:</p>\n\n<pre><code>   incrementX() { this.x++; }\n   incrementY() { this.y++; )\n   ...\n</code></pre>\n\n<p>However, I don't want the increment logic (<code>++</code>) to be duplicated, I want to place it in one function. If Typescript had ref parameters like C#, I would do something like:</p>\n\n<pre><code>   incrementX() { this.increment(ref this.x); }\n   increment(p: ref number) { p++; }\n</code></pre>\n\n<p>Typescript does not support passing by reference. The non type-safe way of implementing this is:</p>\n\n<pre><code>   incrementX() { this.increment(\"x\"); }\n   increment(p: string) {\n       const self = this as any;\n       self[p]++;\n   }\n</code></pre>\n\n<p>It's not type-safe. I can easily call <code>increment('not-a-property')</code> without getting an error from the compiler. I've added a runtime check to make sure self[p] is indeed a number, but I still want something the compiler can catch.</p>\n\n<p>Is there a type-safe way of implementing this?</p>\n\n<p>Note: obviously my actual code doesn't increment numbers, but rather does something quite elaborate - not on numbers but on another class type.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570049740, "post_id": 58209215, "comment_id": 102796256, "body": "You seem to have declared <code>someArray</code> twice"}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 1, "creation_date": 1570050247, "post_id": 58209215, "comment_id": 102796432, "body": "Share you code in <code>app.component.ts</code> as that is where the error seems to originate from."}, {"owner": {"reputation": 49, "user_id": 10330299, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NREP9F3mTkg/AAAAAAAAAAI/AAAAAAAAABA/k0lUd9F5qPw/photo.jpg?sz=128", "display_name": "Dark Furby", "link": "https://stackoverflow.com/users/10330299/dark-furby"}, "edited": false, "score": 0, "creation_date": 1570050772, "post_id": 58209215, "comment_id": 102796592, "body": "added below ..."}], "answers": [{"tags": [], "owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "is_accepted": true, "score": 2, "last_activity_date": 1570051644, "last_edit_date": 1570051644, "creation_date": 1570051077, "answer_id": 58209500, "question_id": 58209215, "link": "https://stackoverflow.com/questions/58209215/how-to-declare-an-array-of-objects/58209500#58209500", "title": "How to declare an array of objects", "body": "<p>Your syntax is incorrect. In the direct body of the type (class) you can define containing types/fields/methods. In the body of the constructor / methods you can write procedural code you wish to execute. In an angular component it is recommended you always implement the interface <code>OnInit</code> and then write code there you wish to execute when the component loads. ngOnInit executed before the template loads.</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n\n  someArray = new Array&lt;ObjectType&gt;();\n\n  ngOnInit() {\n    this.someArray.push(new ObjectType('John',5) );\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Additionally you probably want the args in the constructor to be set on the instance being created. One way you can do that by marking these arguments as public or private depending on the scope you want to give the fields.</p>\n\n<pre><code>class ObjectType{\n    constructor(public name: string, public age: number) {\n    }\n}\n</code></pre>\n\n<p>You can also add <code>readonly</code> if you do not want the value to be changed after it has been set.</p>\n"}], "owner": {"reputation": 49, "user_id": 10330299, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NREP9F3mTkg/AAAAAAAAAAI/AAAAAAAAABA/k0lUd9F5qPw/photo.jpg?sz=128", "display_name": "Dark Furby", "link": "https://stackoverflow.com/users/10330299/dark-furby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 58209500, "answer_count": 1, "score": 0, "last_activity_date": 1570055173, "creation_date": 1570049646, "last_edit_date": 1570055173, "question_id": 58209215, "link": "https://stackoverflow.com/questions/58209215/how-to-declare-an-array-of-objects", "title": "How to declare an array of objects", "body": "<p>I'm learning Angular and Typescript, I have been doing some small coding but I reached the roof, I can't find a solution for my problem anywhere. </p>\n\n<p>I was able to successfully declare simple types and array of simple types but I'm unable to create an array of objects. </p>\n\n<pre><code>someArray = new Array&lt;ObjectType&gt;();\n</code></pre>\n\n<pre><code>class ObjectType {\n    constructor( name: string, age: number) {\n    }\n}\n</code></pre>\n\n<p>and then I try to add element to an array</p>\n\n<pre><code>someArray.push(new ObjectType('John',5) ); \n</code></pre>\n\n<p>and get an error:</p>\n\n<blockquote>\n  <p>Duplicate identifier 'someArray'.ts(2300)<br>\n  Subsequent property declarations must have the same type.  Property 'someArray' must be of type 'ObjectType[]', but here has type 'any'.ts(2717)<br>\n  app.component.ts(10, 3): 'someArray' was also declared here.</p>\n</blockquote>\n\n<p>How can this be a duplicate? Thank you in advance.</p>\n\n<hr>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n  someArray = new Array&lt;ObjectType&gt;();\n  someArray.push(new ObjectType('John',5) );\n}\n\nclass ObjectType{\n    constructor( name: string, age: number){\n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1570048643, "post_id": 58208958, "comment_id": 102795876, "body": "Maybe you want to change <code>function()</code> to a lambda <code>() =&gt;</code>, the former introduces some scoping issues."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 11956698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181ee833046456e24a678a675ef01ed?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo29", "link": "https://stackoverflow.com/users/11956698/arturo29"}, "edited": false, "score": 0, "creation_date": 1570104840, "post_id": 58209124, "comment_id": 102813625, "body": "Friend update my question because it gave me an error when using the function in my case specifically, but thank you very much."}, {"owner": {"reputation": 93, "user_id": 7054317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IgPDf.jpg?s=128&g=1", "display_name": "Adrian Sowi\u0144ski", "link": "https://stackoverflow.com/users/7054317/adrian-sowi%c5%84ski"}, "reply_to_user": {"reputation": 157, "user_id": 11956698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181ee833046456e24a678a675ef01ed?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo29", "link": "https://stackoverflow.com/users/11956698/arturo29"}, "edited": false, "score": 0, "creation_date": 1570106304, "post_id": 58209124, "comment_id": 102814437, "body": "Better ask about it in next question, and give more code info"}], "tags": [], "owner": {"reputation": 93, "user_id": 7054317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IgPDf.jpg?s=128&g=1", "display_name": "Adrian Sowi\u0144ski", "link": "https://stackoverflow.com/users/7054317/adrian-sowi%c5%84ski"}, "is_accepted": true, "score": 2, "last_activity_date": 1570049954, "last_edit_date": 1570049954, "creation_date": 1570049152, "answer_id": 58209124, "question_id": 58208958, "link": "https://stackoverflow.com/questions/58208958/how-could-i-apply-an-observable-to-a-checkbox-to-verify-if-it-is-selected-and-th/58209124#58209124", "title": "How could I apply an observable to a checkbox to verify if it is selected and thus be able to reload my application page?", "body": "<p>Probably the best way to do this:</p>\n\n<p><code>&lt;mat-checkbox [(ngModel)]=\"isChecked\" \n               (change)=\"checkCheckBoxvalue(isChecked)\"&gt;Check me!&lt;/mat-checkbox&gt;</code></p>\n\n<p>Add variable <code>timeout</code> on top</p>\n\n<p><code>timeout;</code></p>\n\n<pre><code>checkCheckBoxvalue(event: any){ \nif (event) {\n  console.log(\"The checkbox is active\");\n  this.timeout = setTimeout(function(){\n    // ... function to reload my page\n  }, 1000);\n}\nelse {\n  console.log(\"The checbox is not active\");\n  clearTimeout(this.timeout);\n}\n</code></pre>\n\n<p>And if you want to reload the page, later you will learn about Router. This is the best way to do this.</p>\n\n<p>Good luck</p>\n"}], "owner": {"reputation": 157, "user_id": 11956698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f181ee833046456e24a678a675ef01ed?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo29", "link": "https://stackoverflow.com/users/11956698/arturo29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58209124, "answer_count": 1, "score": 1, "last_activity_date": 1570106744, "creation_date": 1570048170, "last_edit_date": 1570106744, "question_id": 58208958, "link": "https://stackoverflow.com/questions/58208958/how-could-i-apply-an-observable-to-a-checkbox-to-verify-if-it-is-selected-and-th", "title": "How could I apply an observable to a checkbox to verify if it is selected and thus be able to reload my application page?", "body": "<p>Good afternoon I have a query, I want to automatically reload the page every 1 minute of my application if a checkbox is selected, so if it is not selected, the option to update the page automatically is deactivated, I try to do it through javascript capturing the event with change, but I can't make the page reload automatically, using setTimeout, so I would like to know if there is another way to do this operation through an observable one and how it would be, since I am still new in angular yet.</p>\n\n<p>Then I put the code that I have done so far:</p>\n\n<p>Code HTML</p>\n\n<pre><code>&lt;mat-checkbox (change)=\"checkCheckBoxvalue($event)\"&gt;Check me!&lt;/mat-checkbox&gt;\n</code></pre>\n\n<p>Code Typescipt</p>\n\n<pre><code>checkCheckBoxvalue(event){\n      console.log(event.checked)\n      if (event.checked){\n         this.com=true\n        }\n      else{\n        this.com=false\n      }  \n\n      if (this.com) {\n        console.log(\"The checkbox is active\")\n        setInterval(function(){\n             // ... function to reload my page\n          }, 1000);\n      }\n\n      else {\n        console.log(\"The checbox is not active\")\n      }\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The arrow function must be added to obtain the desired result</p>\n\n<pre><code>  loadpaginator(): any {\n      this.dataSource.loadData(\n          this.id_interface ? this.id_interface.toString():undefined,   \n          this.EquipoOrigenValue ? this.EquipoOrigenValue:undefined,   // esta linea represta un condicional conjugado en una sola linea. \n          this.LocalidadOrigenValue ? this.LocalidadOrigenValue:undefined,\n          this.VendedorValue ? this.VendedorValue:undefined,\n          this.id_prtg?this.id_prtg.toString():undefined,\n          this.CategoriaOrigenValue ? this.CategoriaOrigenValue:undefined,\n          this.EquipoDestinoValue?this.EquipoDestinoValue:undefined,\n          this.OspfOperValue?this.OspfOperValue:undefined,\n          this.OspfAdminValue?this.OspfAdminValue:undefined,\n          this.ServicioValue?this.ServicioValue:undefined,\n          this.TipoOrigenValue?this.TipoOrigenValue:undefined,\n          this.PuertoOrigenValue?this.PuertoOrigenValue:undefined,\n          this.paginator.pageSize,\n          (this.paginator.pageIndex + 1)\n      );\n    }\n</code></pre>\n\n<p>So now my table is updated from time to time, depending on what I specify in the function setInterval ():</p>\n\n<pre><code>.......\n      if (event) {\n        console.log(\"The checkbox is active\");\n        this.timeout = setInterval(()=&gt;{\n          this.loadpaginator()\n        }, 5000);\n      }\n.....\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "react-hooks"], "comments": [{"owner": {"reputation": 371, "user_id": 4245038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/212843da34c2b6eb1e48906ec03e8e60?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Mitchell", "link": "https://stackoverflow.com/users/4245038/brandon-mitchell"}, "edited": false, "score": 0, "creation_date": 1570049124, "post_id": 58208642, "comment_id": 102796056, "body": "It appears to me that useSelector is a regular function. It is not a <b>function component</b>. Inside the useSelector function, you are trying to call useContext and useState. useContext and useState are both hooks. You are using hooks outside of a function component, and that explains the error."}, {"owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "reply_to_user": {"reputation": 371, "user_id": 4245038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/212843da34c2b6eb1e48906ec03e8e60?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Mitchell", "link": "https://stackoverflow.com/users/4245038/brandon-mitchell"}, "edited": false, "score": 2, "creation_date": 1570050224, "post_id": 58208642, "comment_id": 102796419, "body": "Wit respect, I don&#39;t think that&#39;s accurate: <a href=\"https://reactjs.org/docs/hooks-custom.html#extracting-a-custom-hook\" rel=\"nofollow noreferrer\">reactjs.org/docs/hooks-custom.html#extracting-a-custom-hook</a>"}, {"owner": {"reputation": 371, "user_id": 4245038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/212843da34c2b6eb1e48906ec03e8e60?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Mitchell", "link": "https://stackoverflow.com/users/4245038/brandon-mitchell"}, "edited": false, "score": 0, "creation_date": 1570051057, "post_id": 58208642, "comment_id": 102796685, "body": "Good call! You&#39;re right on. I think the issue is that you&#39;re not importing React into useSelector, and maybe that&#39;s why React doesn&#39;t recognize it as a custom hook. <code>import React, { useState, useContext } from &quot;react&quot;;</code>"}, {"owner": {"reputation": 15921, "user_id": 1542723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a969ba62fc77da0a20654caffbe234?s=128&d=identicon&r=PG", "display_name": "Ferrybig", "link": "https://stackoverflow.com/users/1542723/ferrybig"}, "edited": false, "score": 0, "creation_date": 1570080250, "post_id": 58208642, "comment_id": 102802215, "body": "According to your stacktrace, it shows that your <code>useSelector</code> function is not under the same <code>src</code> directory as your other files. This could cause problems as it&#39;s easy to include multiple react versions."}, {"owner": {"reputation": 1659, "user_id": 12015722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf77efd63879ac761bb3b9b572addd4?s=128&d=identicon&r=PG&f=1", "display_name": "ckedar", "link": "https://stackoverflow.com/users/12015722/ckedar"}, "edited": false, "score": 0, "creation_date": 1570093319, "post_id": 58208642, "comment_id": 102807635, "body": "Seems to be some issue about <code>useSelector</code>. Can you setup the complete source code in sandbox?"}], "owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570046687, "creation_date": 1570046687, "question_id": 58208642, "link": "https://stackoverflow.com/questions/58208642/custom-hook-error-hooks-can-only-be-called-in-the-body-of-a-function-component", "title": "custom hook error: Hooks can only be called in the body of a function component", "body": "<p>I know there are answers to this question all over SO but I've looked through them and as near as I can tell, I'm obeying the rules but I still get the error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/EEd5O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EEd5O.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>const App: React.FC = () =&gt; {\n  const count = useSelector&lt;number&gt;(\"counter\", state =&gt; {\n    const counter = state.get(\"counter\");\n    if (counter) {\n      return counter.pipe(scan(total =&gt; total + 1)) as BehaviorSubject&lt;number&gt;;\n    }\n  });\n  const dispatch = useDispatcher();\n  return (\n    &lt;div className=\"App\"&gt;\n      &lt;header className=\"App-header\"&gt;\n        &lt;img src={logo} className=\"App-logo\" alt=\"logo\" /&gt;\n        &lt;p&gt;Counter : {count}&lt;/p&gt;\n        &lt;button\n          onClick={() =&gt; {\n            dispatch.next({ type: Increment });\n          }}\n        &gt;\n          CLICK ME\n        &lt;/button&gt;\n        &lt;a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        &gt;\n          Learn React\n        &lt;/a&gt;\n      &lt;/header&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>\n\n<p>And the useSelector function</p>\n\n<pre><code>mport { Selector, selectFromStore } from \"../rxflux\";\nimport { useState, useContext } from \"react\";\nimport {FluxContext} from \"./FluxContext\";\n\nexport function useSelector&lt;T&gt;(from: string, selector: Selector&lt;T&gt;) {\n  const context = useContext(FluxContext);\n  const [selectedState, setSelectedState] = useState();\n  if (context) {\n    const { store, storeMap } = context;\n    const selection$ = selectFromStore(store, storeMap, from, selector)\n    if(!selection$) {\n      throw \"Nothing returned from selector\";\n    }\n    selection$.subscribe(v =&gt; setSelectedState(v));\n    return selectedState;\n  }\n\n  throw \"Context not registerd. Did your forget to use a Provider?\";\n}\n</code></pre>\n\n<p>Packge.json</p>\n\n<pre><code> \"dependencies\": {\n    \"@types/jest\": \"24.0.18\",\n    \"@types/node\": \"12.7.9\",\n    \"@types/react\": \"16.9.4\",\n    \"@types/react-dom\": \"16.9.1\",\n    \"react\": \"^16.10.1\",\n    \"react-dom\": \"^16.10.1\",\n    \"react-scripts\": \"3.1.2\",\n    \"rxjs\": \"^6.5.3\",\n    \"typescript\": \"3.6.3\"\n  },\n</code></pre>\n"}, {"tags": ["arrays", "angular", "typescript"], "comments": [{"owner": {"reputation": 19244, "user_id": 1959948, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/trFNS.jpg?s=128&g=1", "display_name": "Dalorzo", "link": "https://stackoverflow.com/users/1959948/dalorzo"}, "edited": false, "score": 0, "creation_date": 1570046794, "post_id": 58208586, "comment_id": 102795231, "body": "Are you getting an error? and you will have to show how is your data set up"}, {"owner": {"reputation": 649, "user_id": 11755228, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k16QLfgBgko/AAAAAAAAAAI/AAAAAAAAABU/uJVXrsD12vo/photo.jpg?sz=128", "display_name": "David Fontes", "link": "https://stackoverflow.com/users/11755228/david-fontes"}, "edited": false, "score": 0, "creation_date": 1570047167, "post_id": 58208586, "comment_id": 102795371, "body": "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a> using <a href=\"https://stackblitz.com/\" rel=\"nofollow noreferrer\">StackBlitz</a> to give us some context."}], "answers": [{"comments": [{"owner": {"reputation": 4011, "user_id": 2295103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c383c695ee4db4f4bf3926a0546de64?s=128&d=identicon&r=PG", "display_name": "MikeOne", "link": "https://stackoverflow.com/users/2295103/mikeone"}, "edited": false, "score": 0, "creation_date": 1570048551, "post_id": 58208783, "comment_id": 102795854, "body": "&lt;component-card *ngFor=&quot;let card of cardArray&quot; [myData]=card.myData&gt;&lt;/component-card&gt;  Should also be possible.."}], "tags": [], "owner": {"reputation": 53, "user_id": 9837801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d233855d80e6fb4b08f983fa11c0b05?s=128&d=identicon&r=PG&f=1", "display_name": "Noname135", "link": "https://stackoverflow.com/users/9837801/noname135"}, "is_accepted": true, "score": 1, "last_activity_date": 1570047354, "creation_date": 1570047354, "answer_id": 58208783, "question_id": 58208586, "link": "https://stackoverflow.com/questions/58208586/how-to-display-an-array-of-objects-in-with-typescript/58208783#58208783", "title": "How to display an array of objects in with typescript?", "body": "<p>Okay, I figured it out! I was forgetting to put the selector after the whole *ngFor directive thing. So, here is how my components are displayed now in my wrapper.html:</p>\n\n<pre><code> &lt;div *ngFor=\"let card of cardArray\"&gt;\n      &lt;component-card [myData]=myData&gt;&lt;/component-card&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9837801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d233855d80e6fb4b08f983fa11c0b05?s=128&d=identicon&r=PG&f=1", "display_name": "Noname135", "link": "https://stackoverflow.com/users/9837801/noname135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 58208783, "answer_count": 1, "score": 0, "last_activity_date": 1570047354, "creation_date": 1570046476, "question_id": 58208586, "link": "https://stackoverflow.com/questions/58208586/how-to-display-an-array-of-objects-in-with-typescript", "title": "How to display an array of objects in with typescript?", "body": "<p>I'm very new to typescript.</p>\n\n<p>I've got a wrapper component, and a bunch of child components that I want to display.</p>\n\n<p>So, something like this is in my parent component html: <code>&lt;component-card [someData]=someData&gt;&lt;/component-card&gt;</code> works just fine and displays my component. But how do I display a list of them?</p>\n\n<p>Simply doing <code>&lt;li *ngFor=\"let card of componentCardArray\"&gt;&lt;/li&gt;</code> doesn't work. I tried different ways </p>\n\n<p>Most tutorials just cover simple types, I searched for hours and can't find a way to do it.</p>\n"}, {"tags": ["reactjs", "typescript", "redux", "react-redux", "reselect"], "answers": [{"tags": [], "owner": {"reputation": 746, "user_id": 4278818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d592915749e2ad10247b58a39dad976?s=128&d=identicon&r=PG&f=1", "display_name": "sutherlandahoy", "link": "https://stackoverflow.com/users/4278818/sutherlandahoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1570046576, "creation_date": 1570046576, "answer_id": 58208611, "question_id": 58208532, "link": "https://stackoverflow.com/questions/58208532/why-is-createselector-erroring-in-this-simple-example/58208611#58208611", "title": "Why is createSelector erroring in this simple example?", "body": "<p>After trying to figure this out for hours, I tried importing the library directly instead of using <code>redux-starter-kit</code>. Turns out the typings used there were completely different, and I found this in the <a href=\"https://github.com/reduxjs/redux-starter-kit/blob/master/docs/api/createSelector.md\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Note: Prior to v0.7, RSK re-exported createSelector from selectorator, which allowed using string keypaths as input selectors. This was removed, as it ultimately did not provide enough benefits, and the string keypaths made static typing for selectors difficult.</p>\n</blockquote>\n\n<p>I had been using <code>redux-starter-kit 0.6.2</code>. Problem solved.</p>\n"}], "owner": {"reputation": 746, "user_id": 4278818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d592915749e2ad10247b58a39dad976?s=128&d=identicon&r=PG&f=1", "display_name": "sutherlandahoy", "link": "https://stackoverflow.com/users/4278818/sutherlandahoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570046576, "creation_date": 1570046188, "question_id": 58208532, "link": "https://stackoverflow.com/questions/58208532/why-is-createselector-erroring-in-this-simple-example", "title": "Why is createSelector erroring in this simple example?", "body": "<pre><code>import { createSelector } from 'redux-starter-kit'\n\nconst getTodos = (state: any) =&gt; state.todos;\n\nconst blah = createSelector(getTodos, (todos: any) =&gt; {\n    return todos\n}) \n</code></pre>\n\n<p>I have created the simplest recreation of the issue I am having using the library <code>reselect</code>. This version of reselect is the one that is ported for convenience from <code>redux-starter-kit</code>. In my Typescript code I am getting a syntax highlighting error inside <code>createSelector</code> for the <code>getTodos</code> param, which says the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5C5Hb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5C5Hb.png\" alt=\"enter image description here\"></a></p>\n\n<p>Could anyone help with why this is happening? Is there a problem with the types file that is being used?</p>\n"}, {"tags": ["typescript", "jasmine", "protractor", "jasmine-node"], "comments": [{"owner": {"reputation": 4808, "user_id": 9150146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3Zq7.png?s=128&g=1", "display_name": "Sergey Pleshakov", "link": "https://stackoverflow.com/users/9150146/sergey-pleshakov"}, "edited": false, "score": 0, "creation_date": 1570046258, "post_id": 58208439, "comment_id": 102794996, "body": "it would be useful to see full spec and error stack"}, {"owner": {"reputation": 106, "user_id": 10198795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9035c0ec17f3b1cc05c4a7e0101beb?s=128&d=identicon&r=PG&f=1", "display_name": "Panee S", "link": "https://stackoverflow.com/users/10198795/panee-s"}, "reply_to_user": {"reputation": 4808, "user_id": 9150146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3Zq7.png?s=128&g=1", "display_name": "Sergey Pleshakov", "link": "https://stackoverflow.com/users/9150146/sergey-pleshakov"}, "edited": false, "score": 0, "creation_date": 1570077076, "post_id": 58208439, "comment_id": 102801545, "body": "Hi sergey, I have attached the snippet of error stack and also provided the spec file. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 10198795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9035c0ec17f3b1cc05c4a7e0101beb?s=128&d=identicon&r=PG&f=1", "display_name": "Panee S", "link": "https://stackoverflow.com/users/10198795/panee-s"}, "edited": false, "score": 1, "creation_date": 1570108465, "post_id": 58214182, "comment_id": 102815665, "body": "Thank you so much! Oleksii. I&#39;ve update the file as mentioned above. But the problem was with mismatch emaill name(emailAddress and emailAdd) which I&#39;ve  corrected. Accepting your answer as it works!"}], "tags": [], "owner": {"reputation": 1483, "user_id": 4720362, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pkvur.jpg?s=128&g=1", "display_name": "Oleksii", "link": "https://stackoverflow.com/users/4720362/oleksii"}, "is_accepted": true, "score": 0, "last_activity_date": 1570087281, "creation_date": 1570087281, "answer_id": 58214182, "question_id": 58208439, "link": "https://stackoverflow.com/questions/58208439/unable-to-resolve-failed-each-key-must-be-a-number-of-string-got-undefined-i/58214182#58214182", "title": "Unable to resolve &quot;Failed: each key must be a number of string; got undefined&quot; in protractor using Typescript", "body": "<p>Take a look at example how to use Data Provider from <code>object</code> in the <a href=\"https://www.npmjs.com/package/jasmine-data-provider\" rel=\"nofollow noreferrer\">npm description to the package</a></p>\n\n<p>You have to re-write your Data object as:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const userTestData = {\n\n    scenarios: {\n\n        'scenario1': {\n            firstName: 'John',\n            lastName: 'Doe',\n            city: 'Indianapolis',\n            password: 'MyApp@123',\n            emailAddress: 'Test1@gmail.com',\n            addressLine1: '52nd BroadRipple Street',\n            zipCode: 43464\n        },\n\n        'scenario2': {\n            firstName: 'Mark',\n            lastName: 'Baker',\n            city: 'Westfield',\n            password: 'Test@123',\n            emailAdd: 'Test1@gmail.com',\n            addressLine1: '12412 Ballantyne Street',\n            zipCode: 23053\n        }\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 10198795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9035c0ec17f3b1cc05c4a7e0101beb?s=128&d=identicon&r=PG&f=1", "display_name": "Panee S", "link": "https://stackoverflow.com/users/10198795/panee-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 58214182, "answer_count": 1, "score": 1, "last_activity_date": 1570087281, "creation_date": 1570045717, "last_edit_date": 1570077012, "question_id": 58208439, "link": "https://stackoverflow.com/questions/58208439/unable-to-resolve-failed-each-key-must-be-a-number-of-string-got-undefined-i", "title": "Unable to resolve &quot;Failed: each key must be a number of string; got undefined&quot; in protractor using Typescript", "body": "<p><a href=\"https://i.stack.imgur.com/8eAzc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8eAzc.png\" alt=\"enter image description here\"></a>\nMy data file looks like this. Only first set passes but second iteration, it fails at email address</p>\n\n<pre><code>export const userTestData = {\n\n    scenarios: {\n\n        scenario1: {\n            firstName: 'John',\n            lastName: 'Doe',\n            city: 'Indianapolis',\n            password: 'MyApp@123',\n            emailAddress: 'Test1@gmail.com',\n            addressLine1: '52nd BroadRipple Street',\n            zipCode: 43464\n        },\n\n        scenario2: {\n            firstName: 'Mark',\n            lastName: 'Baker',\n            city: 'Westfield',\n            password: 'Test@123',\n            emailAdd: 'Test1@gmail.com',\n            addressLine1: '12412 Ballantyne Street',\n            zipCode: 23053\n        }\n    }\n};\n</code></pre>\n\n<p>Any help is greatly appreciated. Not sure why it is throwing error only for 2nd iteration. Ist iteration all the values are accepted and test is passed</p>\n\n<p>My Spec File</p>\n\n<p>import {browser} from 'protractor';\n    import {LoginPageEntities} from '../pageObjects/loginLogoutWorkflow/LoginPageEntities.po';\n    import {CustomLogger} from '../../utils/logging';\n    import {after} from 'jasmine-expect/dist/asymmetricMatchersByName';\n    import {LogoutPageEntitiesPo} from '../pageObjects/loginLogoutWorkflow/LogoutPageEntities.po';\n    import {main} from '@angular/compiler-cli/src/main';\n    import {ForgotPasswordPo} from '../pageObjects/loginLogoutWorkflow/ForgotPassword.po';\n    import {NewUserRegistrationPo} from '../pageObjects/loginLogoutWorkflow/NewUserRegistration.po';\n    import { using } from 'jasmine-data-provider';\n    import {userTestData} from '../globalData/userData';</p>\n\n<pre><code>const using = require('jasmine-data-provider');\n\ndescribe('Test OnlineApp', () =&gt; {\nconst logger = new CustomLogger('LoginLogoutFunctionality');\nlet mainPage: LoginPageEntities;\nlet userRegisterPage: NewUserRegistrationPo;\nbeforeAll(async() =&gt; {\n    logger.debug('Before All');\n});\nafterAll(async () =&gt; {\n    logger.debug('After All');\n});\n\nbeforeEach(async () =&gt; {\n    mainPage = new LoginPageEntities();\n    userRegisterPage = new NewUserRegistrationPo();\n});\n\n\nafterEach(async () =&gt; logger.debug('After Each'));\n\ndescribe('example test', () =&gt; {\n    using(userTestData.scenarios, async (data) =&gt; {\n        xit('data provider tests',  async () =&gt; {\n            browser.waitForAngularEnabled(false);\n            const expectedValue = 'New User';\n            await mainPage.launchURL();\n            await mainPage.getHomePageTitle();\n            await mainPage.clickLoginMenu();\n            await mainPage.clickSelectedLink('New User?', 'New User');\n            await userRegisterPage.setFirstName(data.firstName);\n            await userRegisterPage.setLastName(data.lastName);\n            await userRegisterPage.setNewEmailAddress(data.emailAddress);\n            await userRegisterPage.setConfirmEmailAddress(data.emailAddress);\n            await userRegisterPage.setNewUserPassword(data.password);\n            await userRegisterPage.setConfirmPassword(data.password);\n            await userRegisterPage.setAddressLine1(data.addressLine1);\n            await userRegisterPage.setCity(data.city);\n            await userRegisterPage.setZipCode(data.zipCode);\n        });\n    });\n});\n</code></pre>\n\n<p>});</p>\n\n<p>sendKeys method</p>\n\n<pre><code> public async setNewEmailAddress(username: any) {\n        const expectedEmailText = 'email';\n        const emailField = await element(by.css('input[aria-label*=\\'enter an email address\\']'));\n        await browser.wait(until.presenceOf(emailField), TIMEOUT_MILLIS,\n            'New email field never appeared.');\n        await emailField.clear();\n        await emailField.sendKeys(username);\n       // const usernameText =  emailField.getAttribute('type');\n        await emailField.getAttribute('type').then( (text) =&gt; {\n            logger.info('Getting email text:' + text);\n            expect(text).toEqual(expectedEmailText);\n\n        });\n  }\n</code></pre>\n"}, {"tags": ["typescript", "firebase", "ionic4"], "answers": [{"tags": [], "owner": {"reputation": 12294, "user_id": 156388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6811db2b37e824fdf6c5c4fcdddd4146?s=128&d=identicon&r=PG", "display_name": "rtpHarry", "link": "https://stackoverflow.com/users/156388/rtpharry"}, "is_accepted": false, "score": 0, "last_activity_date": 1570191453, "creation_date": 1570191453, "answer_id": 58236275, "question_id": 58208386, "link": "https://stackoverflow.com/questions/58208386/logout-button-not-function/58236275#58236275", "title": "Logout button not function", "body": "<p>You need to put the <code>await</code> in there as well as <code>async</code>.</p>\n\n<pre><code>async logout() {\n  try { \n    // add await here:\n    await this.afAuth.auth.signOut();\n    this.router.navigate(['/loginPage']);\n  } catch (error) {\n    console.log('Error', error);\n  }\n}\n</code></pre>\n\n<p>Or alternatively you can do it with the <code>.then()</code> style of writing:</p>\n\n<pre><code>return this.afAuth.auth.signOut().then(() =&gt; {\n  this.router.navigate(['/loginPage']);\n}).error((error) =&gt; {\n  console.log('Error', error);\n});\n</code></pre>\n\n<p>Otherwise the router will redirect to the next page before the <code>signOut()</code> can finish running.</p>\n"}], "owner": {"reputation": 21, "user_id": 11410504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L2qFXtrKVNc/AAAAAAAAAAI/AAAAAAAAAIQ/XVq0hiZ3lac/photo.jpg?sz=128", "display_name": "Aiman Nazri", "link": "https://stackoverflow.com/users/11410504/aiman-nazri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570191453, "creation_date": 1570045521, "last_edit_date": 1570046883, "question_id": 58208386, "link": "https://stackoverflow.com/questions/58208386/logout-button-not-function", "title": "Logout button not function", "body": "<p>So i use logout button function on my tabs page to navigate back to login page. Unfortunately i cant click 'signout' button when user already login and register</p>\n\n<p>Ive tried auth function to navigate back to login</p>\n\n<p>tabs.page.ts</p>\n\n<pre><code>import {Component, OnInit, ViewChild} from '@angular/core';\nimport {UserService} from '../user.service';\nimport {AngularFireAuth} from '@angular/fire/auth';\nimport { Router} from '@angular/router'\nimport {AngularFirestore} from '@angular/fire/firestore'\n\n@Component({\nselector: 'app-tabs',\ntemplateUrl: 'tabs.page.html',\nstyleUrls: ['tabs.page.scss'],\n})\nexport class  TabsPage implements OnInit {\nconstructor(\npublic afAuth: AngularFireAuth,\npublic router: Router,\npublic afstore: AngularFirestore\n ) {}\n\nngOnInit()  {\n}\n async logout() {\n try { \n this.afAuth.auth.signOut();\nthis.router.navigate(['/loginPage']);\n} catch (error) {\n console.log('Error', error);\n}\n}\n}\n</code></pre>\n\n<p>tabs.page.html</p>\n\n<pre><code> &lt;ion-item&gt;\n &lt;ion-button ion-button color=\"danger\"   (click)=\"logout()\" full&gt;signOut\n&lt;/ion-button&gt;\n&lt;/ion-item&gt;\n</code></pre>\n"}, {"tags": ["html", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 7454, "user_id": 93812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/T5fjc.jpg?s=128&g=1", "display_name": "Will Jenkins", "link": "https://stackoverflow.com/users/93812/will-jenkins"}, "edited": false, "score": 0, "creation_date": 1570046301, "post_id": 58208346, "comment_id": 102795022, "body": "do you have any control over the innards of <code>predictive-input</code>?"}, {"owner": {"reputation": 21, "user_id": 6580973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9afd898d6fa2e4d5808c53c5461372?s=128&d=identicon&r=PG&f=1", "display_name": "Will Schnicke", "link": "https://stackoverflow.com/users/6580973/will-schnicke"}, "reply_to_user": {"reputation": 7454, "user_id": 93812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/T5fjc.jpg?s=128&g=1", "display_name": "Will Jenkins", "link": "https://stackoverflow.com/users/93812/will-jenkins"}, "edited": false, "score": 0, "creation_date": 1570052483, "post_id": 58208346, "comment_id": 102797098, "body": "It is a component made by another team at my company for internal consumption. In a certain sense I have control, in that I could make requests and I know it will not be changed drastically without being notified, but I can&#39;t directly access it within the React virtual DOM."}], "answers": [{"tags": [], "owner": {"reputation": 7454, "user_id": 93812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/T5fjc.jpg?s=128&g=1", "display_name": "Will Jenkins", "link": "https://stackoverflow.com/users/93812/will-jenkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1570046796, "creation_date": 1570046796, "answer_id": 58208658, "question_id": 58208346, "link": "https://stackoverflow.com/questions/58208346/how-should-i-access-generated-children-of-a-custom-html-component-in-an-idiomati/58208658#58208658", "title": "How should I access generated children of a custom HTML component in an idiomatic React way?", "body": "<p>If you don't have any control over the input then this is the best approach in my opinion.</p>\n\n<p>It's not ideal, but as you're stuck with a 3rd party component you can only choose from the methods that are available to you. In this case, your only real options are to find the element based on its class, or its position in the hierarchy. Both might change if the package is updated, but if I had to choose which would be more stable, I'd go for <code>className</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 6580973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9afd898d6fa2e4d5808c53c5461372?s=128&d=identicon&r=PG&f=1", "display_name": "Will Schnicke", "link": "https://stackoverflow.com/users/6580973/will-schnicke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570046796, "creation_date": 1570045333, "question_id": 58208346, "link": "https://stackoverflow.com/questions/58208346/how-should-i-access-generated-children-of-a-custom-html-component-in-an-idiomati", "title": "How should I access generated children of a custom HTML component in an idiomatic React way?", "body": "<p>I am attempting to create a search bar using a custom HTML component for predictive text input. The way this component is built, it generates several plain HTML children that I need to act on to get full features. Specifically, I need to execute a blur action on one of the generated  elements when the user presses escape or enter.</p>\n\n<p>I got it to work using a ref on the custom component and calling getElementsByClassName on the ref, but using getElementsByClassName does not seem like the best solution. It pierces through the virtual and has odd side effects when testing.</p>\n\n<p>This is a snippet of the component being rendered:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;predictive-input id='header-search-bar-input' type='search'\n  value={this.state.keywords}\n  ref={(ref: any) =&gt; this.predictiveInput = ref}\n  onKeyDown={(e: React.KeyboardEvent&lt;any&gt;) =&gt; this.handleKeyDown(e)}&gt;\n&lt;/predictive-input&gt;\n</code></pre>\n\n<p>and the keyDown handler:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>private handleKeyDown(e: React.KeyboardEvent&lt;any&gt;) {\n    // must access the underlying input element of the kat-predictive-input\n    let input: HTMLElement = this.predictiveInput.getElementsByClassName('header-row-text value')[0] as HTMLElement;\n    if (e.key === 'Escape') {\n        // blur the predictive input when the user presses escape\n        input.blur();\n    } else if (e.key === 'Enter') {\n        // commit the search when user presses enter\n        input.blur();\n        // handles action of making actual search, using search bar contents\n        this.commitSearch();\n    }\n}\n</code></pre>\n\n<p>The  element renders two  children, one for the bar itself and one for the predictive dropdown. The classes of the underlying  in the first  are 'header-row-text' and 'value', so the element is correctly selected, but I am worried that this is violating proper React style.</p>\n\n<p>I am using React 16.2, so only callback refs are available. I would rather avoid upgrading, but if a 16.3+ solution is compelling enough, I could consider it.</p>\n"}, {"tags": ["javascript", "arrays", "typescript", "ecmascript-6"], "comments": [{"owner": {"reputation": 37, "user_id": 6131171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkSX4IjnHCA/AAAAAAAAAAI/AAAAAAAAD3E/MKIO71FBUdk/photo.jpg?sz=128", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/6131171/gaurav"}, "edited": false, "score": 0, "creation_date": 1570043406, "post_id": 58207896, "comment_id": 102793749, "body": "var newObj:any = {};         if (allJobs &amp;&amp; allJobs.length &gt; 0 ) {         // this.rowData = this.allJobs;         // this.allJobs = this.allJobs[&#39;application_id&#39;];         //let ele:object = allJobs.application_context;             allJobs.forEach(ele =&gt; {             newObj =      {&quot;application_id&quot;:ele.application_context.application_id,                                  &quot;context_id&quot;:ele.application_context.application_context}            return newObj;   }); }"}, {"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1570043994, "post_id": 58207896, "comment_id": 102793969, "body": "What is your expected output, can you please update in question? Do we need to remove application_context property from the object and those inner properties want to be in root object?"}, {"owner": {"reputation": 37, "user_id": 6131171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkSX4IjnHCA/AAAAAAAAAAI/AAAAAAAAD3E/MKIO71FBUdk/photo.jpg?sz=128", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/6131171/gaurav"}, "reply_to_user": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1570045543, "post_id": 58207896, "comment_id": 102794667, "body": "Yes, want to keep others as same"}], "answers": [{"comments": [{"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "reply_to_user": {"reputation": 37, "user_id": 6131171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkSX4IjnHCA/AAAAAAAAAAI/AAAAAAAAD3E/MKIO71FBUdk/photo.jpg?sz=128", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/6131171/gaurav"}, "edited": false, "score": 0, "creation_date": 1570045795, "post_id": 58208088, "comment_id": 102794806, "body": "@Gaurav always happy to help :), <a href=\"https://stackoverflow.com/help/someone-answers\"><code>what should i do when someone answers my question</code></a>"}], "tags": [], "owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "is_accepted": true, "score": 2, "last_activity_date": 1570044380, "last_edit_date": 1570044380, "creation_date": 1570044075, "answer_id": 58208088, "question_id": 58207896, "link": "https://stackoverflow.com/questions/58207896/trim-js-object-to-remove-extra-params-with-curly-braces/58208088#58208088", "title": "trim JS object to remove extra params with curly braces", "body": "<p>You can use <code>map</code> and <code>destructuring</code></p>\n\n<ul>\n<li>Get the <code>collection_job_status_list</code> from result</li>\n<li>Loop over the values take out the required values from <code>application_context</code> key and merge with remaining values</li>\n<li>Build the same structure as original result</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let result = {\"collection_job_status_list\": [{\"application_context\": {\"application_id\": \"a4\",\"context_id\": \"c4\"},\"creation_time\": \"15699018476102\",\"progress\": 100,\"status\": \"READY\",\"phase\": \"ACTIVE\",\"job_error\": {}},{\"application_context\": {\"application_id\": \"a6\",\"context_id\": \"c6\"},\"creation_time\": \"15698648632523\",\"progress\": 100,\"status\": \"READY\",\"phase\": \"ACTIVE\",\"job_error\": {}}],\"result\": {\"request_result\": \"ACCEPTED\",\"error\": {}}}\r\n\r\nlet { collection_job_status_list, ...rest } = result\r\n\r\nlet modified = collection_job_status_list.map(({\r\n  application_context: {\r\n    application_id,\r\n    context_id\r\n  },\r\n  ...rest\r\n}) =&gt; ({ ...rest, context_id, application_id}))\r\n\r\nlet final = {\r\n  collection_job_status_list: modified,\r\n  ...rest\r\n}\r\n\r\nconsole.log(final)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6131171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkSX4IjnHCA/AAAAAAAAAAI/AAAAAAAAD3E/MKIO71FBUdk/photo.jpg?sz=128", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/6131171/gaurav"}, "edited": false, "score": 0, "creation_date": 1570045345, "post_id": 58208093, "comment_id": 102794578, "body": "Looks good, thanks! How do I keep the other items as it is (like other items at the same level) along with  ...application_context"}], "tags": [], "owner": {"reputation": 2977, "user_id": 4272651, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000901707272/picture?type=large", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/4272651/prasanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1570054259, "last_edit_date": 1570054259, "creation_date": 1570044096, "answer_id": 58208093, "question_id": 58207896, "link": "https://stackoverflow.com/questions/58207896/trim-js-object-to-remove-extra-params-with-curly-braces/58208093#58208093", "title": "trim JS object to remove extra params with curly braces", "body": "<p>You need to use the <code>map</code> function</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const result = {};\r\nresult.joblist = {\r\n  \"collection_job_status_list\": [\r\n    {\r\n      \"application_context\": {\r\n        \"application_id\": \"a4\",\r\n        \"context_id\": \"c4\"\r\n      },\r\n      \"creation_time\": \"15699018476102\",\r\n      \"progress\": 100,\r\n      \"status\": \"READY\",\r\n      \"phase\": \"ACTIVE\",\r\n      \"job_error\": {}\r\n    },\r\n    {\r\n      \"application_context\": {\r\n        \"application_id\": \"a6\",\r\n        \"context_id\": \"c6\"\r\n      },\r\n      \"creation_time\": \"15698648632523\",\r\n      \"progress\": 100,\r\n      \"status\": \"READY\",\r\n      \"phase\": \"ACTIVE\",\r\n      \"job_error\": {}\r\n    }\r\n  ],\r\n  \"result\": {\r\n    \"request_result\": \"ACCEPTED\",\r\n    \"error\": {}\r\n  }\r\n}\r\n\r\n\r\nresult.joblist.collection_job_status_list = result.joblist.collection_job_status_list.map(item =&gt; {\r\n  return {\r\n     \"application_id\": item.application_context.application_id,\r\n     \"context_id\": item.application_context.context_id\r\n  }\r\n})\r\n\r\nconsole.log(result)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Or you can use <code>map</code> function along with shorthand es6 syntaxes</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const result = {};\r\nresult.joblist = {\r\n  \"collection_job_status_list\": [\r\n    {\r\n      \"application_context\": {\r\n        \"application_id\": \"a4\",\r\n        \"context_id\": \"c4\"\r\n      },\r\n      \"creation_time\": \"15699018476102\",\r\n      \"progress\": 100,\r\n      \"status\": \"READY\",\r\n      \"phase\": \"ACTIVE\",\r\n      \"job_error\": {}\r\n    },\r\n    {\r\n      \"application_context\": {\r\n        \"application_id\": \"a6\",\r\n        \"context_id\": \"c6\"\r\n      },\r\n      \"creation_time\": \"15698648632523\",\r\n      \"progress\": 100,\r\n      \"status\": \"READY\",\r\n      \"phase\": \"ACTIVE\",\r\n      \"job_error\": {}\r\n    }\r\n  ],\r\n  \"result\": {\r\n    \"request_result\": \"ACCEPTED\",\r\n    \"error\": {}\r\n  }\r\n}\r\n\r\n\r\nresult.joblist.collection_job_status_list = result.joblist.collection_job_status_list.map(({application_context}) =&gt; {\r\n  return {\r\n     ...application_context\r\n  }\r\n})\r\n\r\nconsole.log(result)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>EDIT:</p>\n\n<p>The things you want to keep in your array depends on what you are returning from the <code>map</code>. You return the keys you want to keep. So if you want other items.</p>\n\n<p>If you have an array A</p>\n\n<pre><code>A = [\n  {\n    nest: {\n      x: 1,\n      y: 1,\n    },\n    key1: 5,\n    key2: 7,\n  },\n  {\n    nest: {\n      x: 1,\n      y: 1,\n    },\n    key1: 5,\n    key2: 7,\n  },\n  {\n    nest: {\n      x: 1,\n      y: 1,\n    },\n    key1: 5,\n    key2: 7,\n  }\n]\n</code></pre>\n\n<p>Let us assume you want <code>x</code> from <code>nest</code>, <code>key1</code> and <code>key2</code> in your final output. You will then do </p>\n\n<pre><code>const finalOutput = A.map(item =&gt; {\n  return {\n     x: item.nest.x, // x from nest\n     key1: item.key1, // key1\n     key2: item.key2,  // key2\n  }\n})\n</code></pre>\n\n<p>But there are shorthand forms for doing this. Let's assume that the <code>item</code> we get in our <code>map function</code> is already divided into a <code>nest</code> and a <code>rest</code> variable. The <code>nest</code> contains <code>item.nest</code> and the <code>rest</code> is <code>{key1: 5,key2:7}</code>, then you can simply return <code>x</code> from <code>nest</code> and everything else from <code>rest</code></p>\n\n<pre><code>const finalOutput = A.map(({nest, ...rest}) =&gt; {\n  return {\n     x: nest.x, // x from nest\n     ...rest, // everything else\n  }\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6131171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkSX4IjnHCA/AAAAAAAAAAI/AAAAAAAAD3E/MKIO71FBUdk/photo.jpg?sz=128", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/6131171/gaurav"}, "edited": false, "score": 0, "creation_date": 1570045170, "post_id": 58208112, "comment_id": 102794488, "body": "Hey thanks, would be good to a avoid using new variables or have the result stored in new object."}], "tags": [], "owner": {"reputation": 1089, "user_id": 6080889, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j9S1fFOR5tc/AAAAAAAAAAI/AAAAAAAARjI/ZshXXge1K5o/photo.jpg?sz=128", "display_name": "Royson", "link": "https://stackoverflow.com/users/6080889/royson"}, "is_accepted": false, "score": 0, "last_activity_date": 1570044194, "creation_date": 1570044194, "answer_id": 58208112, "question_id": 58207896, "link": "https://stackoverflow.com/questions/58207896/trim-js-object-to-remove-extra-params-with-curly-braces/58208112#58208112", "title": "trim JS object to remove extra params with curly braces", "body": "<p>What you need here is a map. Reference: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map</a></p>\n\n<p>Try modifying the code as below and you should have your expected output.</p>\n\n<pre><code>var newObj: any = {};\nvar newArray;\nif (allJobs &amp;&amp; allJobs.length &gt; 0) {\n  newArray = allJobs.map(ele =&gt; {\n    newObj = {\n      application_id: ele.application_context.application_id,\n      context_id: ele.application_context.application_context\n    };\n    return newObj;\n  });\n}\n</code></pre>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 37, "user_id": 6131171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkSX4IjnHCA/AAAAAAAAAAI/AAAAAAAAD3E/MKIO71FBUdk/photo.jpg?sz=128", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/6131171/gaurav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 58208088, "answer_count": 3, "score": 1, "last_activity_date": 1570054259, "creation_date": 1570043248, "last_edit_date": 1570043696, "question_id": 58207896, "link": "https://stackoverflow.com/questions/58207896/trim-js-object-to-remove-extra-params-with-curly-braces", "title": "trim JS object to remove extra params with curly braces", "body": "<p>I have an object response here</p>\n\n<pre><code>result.joblist = {\n  \"collection_job_status_list\": [\n    {\n      \"application_context\": {\n        \"application_id\": \"a4\",\n        \"context_id\": \"c4\"\n      },\n      \"creation_time\": \"15699018476102\",\n      \"progress\": 100,\n      \"status\": \"READY\",\n      \"phase\": \"ACTIVE\",\n      \"job_error\": {}\n    },\n    {\n      \"application_context\": {\n        \"application_id\": \"a6\",\n        \"context_id\": \"c6\"\n      },\n      \"creation_time\": \"15698648632523\",\n      \"progress\": 100,\n      \"status\": \"READY\",\n      \"phase\": \"ACTIVE\",\n      \"job_error\": {}\n    }\n  ],\n  \"result\": {\n    \"request_result\": \"ACCEPTED\",\n    \"error\": {}\n  }\n}\n</code></pre>\n\n<p>Need to get rid of <code>{\"application_context\": &amp; ending }</code> here, just need <code>application_id\":\"a4\",\"context_id\":\"c4\"</code> at the same level. </p>\n\n<p>I have tried something like this, but not able to move ahead.</p>\n\n<pre><code>var newObj: any = {};\nif (allJobs &amp;&amp; allJobs.length &gt; 0) {\n  // this.rowData = this.allJobs;\n  // this.allJobs = this.allJobs['application_id'];\n  //let ele:object = allJobs.application_context;\n  allJobs.forEach(ele =&gt; {\n    newObj = {\n      application_id: ele.application_context.application_id,\n      context_id: ele.application_context.application_context\n    };\n    return newObj;\n  });\n}\n</code></pre>\n"}, {"tags": ["typescript", "firebase", "dependency-injection"], "comments": [{"owner": {"reputation": 469147, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 1, "creation_date": 1570043197, "post_id": 58207836, "comment_id": 102793669, "body": "How are you calling the method\u2026?"}, {"owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "reply_to_user": {"reputation": 469147, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1570048334, "post_id": 58207836, "comment_id": 102795786, "body": "@deceze I added the code that is calling the method."}], "answers": [{"tags": [], "owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "is_accepted": false, "score": 0, "last_activity_date": 1570049493, "creation_date": 1570049493, "answer_id": 58209187, "question_id": 58207836, "link": "https://stackoverflow.com/questions/58207836/compiled-javascript-code-gives-undefined-when-using-property-on-this-in-a-functi/58209187#58209187", "title": "Compiled JavaScript code gives undefined when using property on this in a function which is set in a constructor", "body": "<p>After doing some more research, it seems that when passing a handler to app.get, the this in the class where the handler is implemented is not known anymore in the handler. Searching more with this knowledge, the next topic was found:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15604848/express-js-this-undefined-after-routing-with-app-get\">Express JS &#39;this&#39; undefined after routing with app.get(..)</a></p>\n\n<p>it appears that a .bind can be called to the method. The solution is to bind this to fastget:</p>\n\n<pre><code> app.get('/fastget', this.fastGet.bind(this));\n</code></pre>\n\n<p>and all works fine. </p>\n"}], "owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1570075059, "answer_count": 1, "score": 0, "last_activity_date": 1570049493, "creation_date": 1570043000, "last_edit_date": 1570048278, "question_id": 58207836, "link": "https://stackoverflow.com/questions/58207836/compiled-javascript-code-gives-undefined-when-using-property-on-this-in-a-functi", "closed_reason": "Duplicate", "title": "Compiled JavaScript code gives undefined when using property on this in a function which is set in a constructor", "body": "<p>I am working on a prototype with a goal to write a webservice with the express framework in TypeScript, compile it to TS and host it in a firebase functions environment. The code layers in the service is a Controller layer and for now, also a business logic layer for the business rules. Perhaps mostly the same layers seen in a .Net written webservice. With dependency injection using the inversifyJS framework I inject the logic class into the controller. </p>\n\n<p>Here parts of the TypeScript code so far:</p>\n\n<pre><code>@injectable()\nexport class Service1Controller extends ApiController implements IService1Controller {\n    public constructor(\n        @inject(TYPES.IService1Logic)\n        private service1Logic: IService1Logic\n    ) { super() }\n\n    private fastGet(request: Request, response: Response) {\n        const original = request.query.text;\n        const changed = this.service1Logic.UpdateFastGet(original);\n        response.status(200).send(changed);    \n    }\n}\n\n\nexport interface IService1Logic {\n    UpdateFastGet(text: string): string;\n}\n\n@injectable()\nexport class Service1Logic implements IService1Logic {\n\n    UpdateFastGet(text: string): string {\n        console.log(`[Service1Logic/UpdateFastGet]: ${text}`);\n        text = `${text} -&gt; service1[fastget]`;\n        return text;\n    }\n}\n</code></pre>\n\n<p>And this is (partly) the compile output of the Controller code</p>\n\n<pre><code>constructor(service1Logic) {\n    super();\n    this.service1Logic = service1Logic;\n}\nfastGet(request, response) {\n    const original = request.query.text;\n    const changed = this.service1Logic.UpdateFastGet(original);\n    response.status(200).send(changed);\n}\n</code></pre>\n\n<p>When testing the code locally using the firebase functions emulator I get an error that property service1Logic cannot be read from undefined. So it seems this is undefined and I cannot figure out why. </p>\n\n<p>I also tried to isolate the error and to reproduce it with the next code:</p>\n\n<pre><code>@injectable()\nexport class Class1 extends baseClass implements Interface1 {\n\n    constructor(\n        @inject(TYPES.Interface2)\n        private class2: Interface2\n     ) { super() }\n\n    PrintText(text: string): void {\n        const mutatedText: string = this.class2.MutateText(text);\n        console.log(mutatedText);\n    }\n\n    Addition(x: number, y: number): number {\n        return this.Sum(x, y);\n    }\n}\n\nexport interface Interface2 {\n    MutateText(text: string): string;\n}\n\n@injectable()\nexport class Class2 implements Interface2 {\n    MutateText(text: string): string {\n        console.log(`Received text ${text}`);\n        return `${text} mutated`;\n    }\n}\n</code></pre>\n\n<p>The controller compiled code looks almost the same (with exception of the naming ofcourse)</p>\n\n<pre><code>let Class1 = class Class1 extends baseclass_1.baseClass {\n    constructor(class2) {\n        super();\n        this.class2 = class2;\n    }\n    PrintText(text) {\n        const mutatedText = this.class2.MutateText(text);\n        console.log(mutatedText);\n    }\n    Addition(x, y) {\n        return this.Sum(x, y);\n    }\n};\n</code></pre>\n\n<p>When I run this code (not in an emulator but with node) I get no errors at all, it seems that this in PrintText does exists. I also copied the tsconfig.json content from the original project to the project where I try to isolate the error, perhaps it got to do with a setting there but that wasn't the case either as far as I can see. I am stuck on the error and I cannot figure out what is causing the error. Has anyone had this kind of issue or knows how I can solve this?</p>\n\n<p><strong>Edit: Added the calling code</strong></p>\n\n<p>For the prototype code, the methods are linked to a route.</p>\n\n<pre><code>app.get('/fastget', this.fastGet);\n</code></pre>\n\n<p>App is of type Express:</p>\n\n<pre><code>this.app = express();\n</code></pre>\n\n<p>and app is returned via a getter in the ApiController and is then added to the onRequest of firebase:</p>\n\n<pre><code>const service1Controller: IService1Controller = container.get&lt;IService1Controller&gt;(TYPES.IService1Controller);\n\nexport const service1 =  functionsEUWest1.https.onRequest(service1Controller.App); \n</code></pre>\n\n<p>And these are the Types and container objects:</p>\n\n<p>Types.ts</p>\n\n<pre><code>let TYPES = {\n    //Controllers\n    IService1Controller: Symbol(\"IService1Controller\"),\n\n    //BusinessLogics        \n    IService1Logic: Symbol(\"IService1Logic\")\n}\n\nexport default TYPES;\n</code></pre>\n\n<p>inversify.config.ts</p>\n\n<pre><code>class ContainerConfig {\n    private _container: Container = new Container;\n\n    get Container() { return this._container };\n\n    private configureControllers(container: Container) {\n        container.bind(TYPES.IService1Controller).to(Service1Controller);\n    }\n\n    private configureBusinessLogics(container: Container) {\n        container.bind(TYPES.IService1Logic).to(Service1Logic);\n    }\n\n    constructor() {\n        this.configureControllers(this._container);\n        this.configureBusinessLogics(this._container);\n    }\n}\n\nexport default new ContainerConfig().Container;\n</code></pre>\n\n<p>For the code to isolate the error, this is the calling code:</p>\n\n<pre><code>const class1: Interface1 = container.get&lt;Interface1&gt;(TYPES.Interface1);\n\nclass1.PrintText(\"This text is\");\nconst result = class1.Addition(2, 3);\n\nconsole.log(`Sum of 2 and 3 is ${result}`);\n</code></pre>\n\n<p>This is how the TYPES and the container objects and the looks like:</p>\n\n<p>Types.ts</p>\n\n<pre><code>let TYPES = {\n    Interface1: Symbol(\"Interface1\"),\n    Interface2: Symbol(\"Interface2\")\n}\n\nexport default TYPES;\n</code></pre>\n\n<p>intensify.config.ts</p>\n\n<pre><code>const container = new Container();\n\ncontainer.bind(TYPES.Interface1).to(Class1);\ncontainer.bind(TYPES.Interface2).to(Class2);\n\nexport default container;\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1570042737, "post_id": 58207537, "comment_id": 102793456, "body": "I&#39;m not sure how to answer why it fails other than a general intuition that inference of <code>T</code> from a function <code>F&lt;T&gt;</code> is less reliable the more complex <code>F</code> is.  My suggestion here would be to make the inference easier by inferring the type of <code>v</code>, like <code>mapValues3&lt;O, V extends Record&lt;keyof O, unknown&gt;&gt;(o: O, v: V): V[keyof O];</code>."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1570044256, "post_id": 58207537, "comment_id": 102794069, "body": "I&#39;d be happy to turn the above into an answer if it matches your use case."}, {"owner": {"reputation": 1174, "user_id": 355031, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9910d04d228a408f97789232030c3efa?s=128&d=identicon&r=PG", "display_name": "Stephen Haberman", "link": "https://stackoverflow.com/users/355031/stephen-haberman"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1570054179, "post_id": 58207537, "comment_id": 102797501, "body": "@jcalz wow, had to work that back to my actual/non-contrived use case, but it worked! Thanks! Yep, if you answer-ize, I&#39;ll accept!"}], "answers": [{"comments": [{"owner": {"reputation": 1174, "user_id": 355031, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9910d04d228a408f97789232030c3efa?s=128&d=identicon&r=PG", "display_name": "Stephen Haberman", "link": "https://stackoverflow.com/users/355031/stephen-haberman"}, "edited": false, "score": 0, "creation_date": 1570115654, "post_id": 58221647, "comment_id": 102819767, "body": "Thanks again! If you&#39;re interested in where I ended up using your hint, it&#39;s here: <a href=\"https://github.com/stephenh/ts-enum-mapper/blob/master/src/index.ts#L15\" rel=\"nofollow noreferrer\">github.com/stephenh/ts-enum-mapper/blob/master/src/index.ts#&zwnj;&#8203;L15</a>"}, {"owner": {"reputation": 1174, "user_id": 355031, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9910d04d228a408f97789232030c3efa?s=128&d=identicon&r=PG", "display_name": "Stephen Haberman", "link": "https://stackoverflow.com/users/355031/stephen-haberman"}, "edited": false, "score": 0, "creation_date": 1570116250, "post_id": 58221647, "comment_id": 102820079, "body": "Also really appreciate your detailed rationale/explanation of the &quot;infer U directly, then map against it&quot;. I can&#39;t apply that intuitively/adhoc yet, but I sorta get it, and will see how it sinks in. :-)"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1570114125, "creation_date": 1570114125, "answer_id": 58221647, "question_id": 58207537, "link": "https://stackoverflow.com/questions/58207537/why-is-this-mapped-type-losing-the-type-inference-of-the-object-literal/58221647#58221647", "title": "Why is this mapped type losing the type inference of the object literal?", "body": "<p>I don't have a canonical answer for why this fails.  My intuition is that you are trying to make <code>mapValue3(o, v)</code> infer both the keys and values of the <code>v</code> argument in a way that's dependent on the keys of the <code>o</code> argument, deferring the inference of <code>V</code> until it's apparently too late and the compiler gives up with its general <code>unknown</code> inference.</p>\n\n<p>Often you have a situation where you have a value <code>val</code> of type <code>U</code> and are trying to infer a related type <code>T</code> from it.  That is, you are thinking of <code>U</code> as <code>F&lt;T&gt;</code> for some type function <code>F</code>, and you want the compiler to infer <code>T</code> from <code>F&lt;T&gt;</code>.  Assuming such inference is even possible for <em>anyone</em> (a lossy function like <code>type F&lt;T&gt; = T extends object ? true : false</code> throws away information so you can't infer much about <code>T</code> from <code>F&lt;T&gt;</code>), it's not always possible for the <em>compiler</em>.  If it works, great.  </p>\n\n<p>Otherwise, my rule of thumb is this: instead of inferring <code>T</code> from a value of type <code>U</code>, infer <code>U</code> directly.  Then, represent <code>T</code> as <code>G&lt;U&gt;</code> for some type function <code>G</code>.  That is, the <code>G</code> type function should be the <em>inverse</em> of the <code>F</code> function.  (So <code>G&lt;F&lt;T&gt;&gt;</code> is <code>T</code> for all <code>T</code>).  The inverse type function <code>G</code> might be more complicated to write than <code>F</code>, but if so, a human is probably going to be better at this than the compiler.  Also note that you might need to <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html#generic-constraints\" rel=\"nofollow noreferrer\">constrain</a> your <code>U</code> types to be <code>F&lt;any&gt;</code> to make the mapping work.</p>\n\n<p>The above also works for multiple type variables (e.g., values <code>v1</code>, <code>v2</code>, <code>v3</code> of types <code>U1 = F1&lt;T1, T2, T3&gt;</code>, <code>U2 = F2&lt;T1, T2, T3&gt;</code>, <code>U3 = F3&lt;T1, T2, T3&gt;</code> and you want to infer <code>T1</code>, <code>T2</code>, and <code>T3</code> from it: instead, find <code>G1</code>, <code>G2</code>, and <code>G3</code> such that <code>T1 = G1&lt;U1, U2, U3&gt;</code>, <code>T2 = G2&lt;U1, U2, U3&gt;</code> and <code>T3 = G3&lt;U1, U2, U3&gt;</code> and calculate them directly). </p>\n\n<p>So let's do that for your function, rewritten like this:</p>\n\n<pre><code>function mapValues3&lt;O, T&gt;(o: O, v: F&lt;O, T&gt;): T {\n  return null!\n}\ntype F&lt;O, T&gt; = Record&lt;keyof O, T&gt;; // same as { [key in keyof O]: T }; \n</code></pre>\n\n<p>We want to transform it to this:</p>\n\n<pre><code>function mapValues3&lt;O, U extends F&lt;O, any&gt;&gt;(o: O, v: U): G&lt;O, U&gt; {\n  return null!\n}\ntype G&lt;O, U&gt; = ???;\n</code></pre>\n\n<p>Note that since the first parameter is already just \"infer the value of this parameter\", there's nothing we need to do for <code>O</code>.  The question is: what's <code>G</code>?  Given a value of type <code>U</code> equal to <code>Record&lt;keyof O, T&gt;</code>, how do we get <code>T</code> out?  The answer is to use a <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#keyof-and-lookup-types\" rel=\"nofollow noreferrer\">lookup type</a>:</p>\n\n<pre><code>type G&lt;O, U&gt; = U[keyof O];\n</code></pre>\n\n<p>Let's just make sure: <code>G&lt;O, Record&lt;keyof O, T&gt;</code> is <code>Record&lt;keyof O, T&gt;[keyof O]</code>, which is <code>{[K in keyof O]: T}[keyof O]</code>, which evaluates to <code>T</code>.  We can eliminate <code>F</code> and <code>G</code> now and give you this:</p>\n\n<pre><code>function mapValues3&lt;O, U extends Record&lt;keyof O, any&gt;&gt;(o: O, v: U): U[keyof O] {\n  return null!\n}\n</code></pre>\n\n<p>And let's test it out:</p>\n\n<pre><code>const v3n = mapValues3(Foo, { a: 1, b: 2 }); // number\nconst v3s = mapValues3(Foo, { a: \"1\", b: \"2\" }); // string\n</code></pre>\n\n<p>Those work the way you want.  Let's also see some possible edge cases:</p>\n\n<pre><code>const constraintViolation = mapValues3(Foo, { a: \"hey\" }); // error! \"b\" is missing\n</code></pre>\n\n<p>That looks right, since you want the second parameter to have all the keys from the first parameter.  And this:</p>\n\n<pre><code>const excessProp = mapValues3(Foo, { a: 1, b: 2, c: false }); // number, no error\n</code></pre>\n\n<p>This may or may not be fine.  It doesn't violate the constraint; it just has extra properties, which are allowed in TypeScript in general (but <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks\" rel=\"nofollow noreferrer\">forbidden in some situations</a>).  The inference is <code>number</code> and not <code>number | boolean</code> since the extra properties are not consulted when figuring out the return type.  If it's a problem there are ways to make <code>mapValues3</code> reject such things, but they're more complicated and this wasn't part of the question.</p>\n\n<hr>\n\n<p>Okay, hope that helps.  Good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#code/GYVwdgxgLglg9mABAWwIYAcBqqA2ICmAzgMwA8A8gDSICqi+AHlPmACaGIBK+EcATq1IBrfAE84wRFUSowogHzyAFHABcU6gDd1NAJQ6A2iPGTyAXUQBvAFCJEffFBB8kYEDhwBCANzWAvtbWLCDIiABicHBWtjKUMQBG-oG8YIRQiJrESAC8KBjYeETEShFw1JYy6gCM1PHqAEyIfrreiAD0bYhuyPH4fNYpaRnEHLloWLgEJCWR5ZWIAERVC7XqC-ULTS3tnWl8MGAA5skIQ4NQfKgHUJjwOKiwCIhj+ZNFM2VW8wsAFmKbzVaHXofD4-E8i3imxgHGQMMIB2O53oDAgREIAAUwehnnkJoVpqU5qhqqtEPVqBB1MBcIR8FsgZ1ur0+NQwFE+mD+kA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 1174, "user_id": 355031, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9910d04d228a408f97789232030c3efa?s=128&d=identicon&r=PG", "display_name": "Stephen Haberman", "link": "https://stackoverflow.com/users/355031/stephen-haberman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 58221647, "answer_count": 1, "score": 1, "last_activity_date": 1570114125, "creation_date": 1570041772, "last_edit_date": 1570041961, "question_id": 58207537, "link": "https://stackoverflow.com/questions/58207537/why-is-this-mapped-type-losing-the-type-inference-of-the-object-literal", "title": "Why is this mapped type losing the type inference of the object literal?", "body": "<p>This is a contrived, but normally I can pass an object literal to a function and capture the values of the literal in a generic, i.e.:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Values&lt;V&gt; = {\n  a: V;\n  b: V;\n};\n\nfunction mapValues&lt;V&gt;(v: Values&lt;V&gt;): V {\n  return v as any; // ignore\n}\nconst vn = mapValues({ a: 1, b: 2 }); // inferred number\nconst vs = mapValues({ a: '1', b: '2' }); // inferred string\n</code></pre>\n\n<p>Both <code>vn</code> and <code>vs</code> are correctly inferred to <code>number</code> or <code>string</code> depending on what I passed to <code>mapValues</code>.</p>\n\n<p>This even works for indexed types:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function mapValues2&lt;V&gt;(v: { [key: string]: V }): V {\n  return v as any;\n}\nconst v2n = mapValues2({ a: 1, b: 2 }); // inferred number\nconst v2s = mapValues2({ a: '1', b: '2' }); // inferred string\n</code></pre>\n\n<p>The <code>v</code> object literal knows it's values are <code>string</code>/<code>number</code> (respectively), and I'm able to capture that inferred <code>V</code> and use it in the return type.</p>\n\n<p>However, once I use a mapped type, i.e.:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>enum Foo {\n  a,\n  b,\n}\nfunction mapValues3&lt;K, V&gt;(o: K, v: { [key in keyof K]: V }): V {\n  return v as any;\n}\nconst v3n = mapValues3(Foo, { a: 1, b: 2 }); // inferred unknown\nconst v3s = mapValues3(Foo, { a: '1', b: '2' }); // inferred unknown\n</code></pre>\n\n<p>It is like <code>V</code> has forgotten whether it was <code>string</code>/<code>number</code> (respectively), and I get <code>unknown</code> inferred.</p>\n\n<p>Note that if I explicitly type <code>const v3n: number</code> then it works, but I want to rely on type inference to figure <code>V</code> out for me.</p>\n\n<p>I'm confused why change the <code>[key: string]</code> from the 2nd snippet to <code>[key in keyof K]</code> in the 3rd would affect the inference of the <code>: V</code> side of the object literal's type inference.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["typescript", ".net-core", "swagger", "openapi", "nswag"], "answers": [{"comments": [{"owner": {"reputation": 3286, "user_id": 1978840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3NIjN.jpg?s=128&g=1", "display_name": "John Pankowicz", "link": "https://stackoverflow.com/users/1978840/john-pankowicz"}, "edited": false, "score": 0, "creation_date": 1614376057, "post_id": 61990463, "comment_id": 117376413, "body": "That works. One minor annoyance to doing this is that the letter &quot;I&quot; is no longer prefixed to interface names. All my other interfaces start with &quot;I&quot; and now this adds a bit of confusion to the code. Do you know of a solution?"}], "tags": [], "owner": {"reputation": 96, "user_id": 5826104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbPj7.jpg?s=128&g=1", "display_name": "0x3ff", "link": "https://stackoverflow.com/users/5826104/0x3ff"}, "is_accepted": true, "score": 6, "last_activity_date": 1591349746, "last_edit_date": 1591349746, "creation_date": 1590344706, "answer_id": 61990463, "question_id": 58207451, "link": "https://stackoverflow.com/questions/58207451/how-can-i-disable-handle-init-tojson/61990463#61990463", "title": "How can i disable / handle init, toJSON", "body": "<p><code>init</code> and <code>toJSON</code> methods are generated when you create the TypeScript file setting DTO style as Class. If you set that option to Interface style you should not have implemented methods but only properties.\nSee the following cropped image: \n<a href=\"https://i.stack.imgur.com/8ocRT.png\" rel=\"noreferrer\">DTO settings</a></p>\n"}], "owner": {"reputation": 343, "user_id": 10387735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3434a579647f30baf8a36c50380189?s=128&d=identicon&r=PG", "display_name": "RMCS", "link": "https://stackoverflow.com/users/10387735/rmcs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 61990463, "answer_count": 1, "score": 6, "last_activity_date": 1618024874, "creation_date": 1570041403, "last_edit_date": 1618024874, "question_id": 58207451, "link": "https://stackoverflow.com/questions/58207451/how-can-i-disable-handle-init-tojson", "title": "How can i disable / handle init, toJSON", "body": "<p>I've created a .NET core 2.2 webapi, and using swagger / nswag to generate the API for my React / typescript application. When I try to set up a new object I get a <code>ts(2739)</code> message:</p>\n<blockquote>\n<p>Type '{ firstName: string; lastName: string; }' is missing the following properties from type 'User': init, toJSON</p>\n</blockquote>\n<p>Is there any way to disable / handle this globally? it works like it should but I would like to get rid of the error (maybe a ts-ignore?)</p>\n<p>I've tried multiple solutions like so;</p>\n<p>Error but read the data:</p>\n<pre><code>const newUser: User = {\n                firstName,\n                lastName,\n            };\n</code></pre>\n<p>No error but doesn't read the data:</p>\n<pre><code>const newUser = new User ({\n                firstName,\n                lastName,\n            });\n</code></pre>\n<p>I could also remove all the <code>nswag</code> created <code>init</code> and <code>toJSON</code> but that would be to time consuming.</p>\n<p>.NETCore Model (<code>Baseclass</code> is just the Id and createdAtDate)</p>\n<pre><code>    public class User : BaseModel\n    {\n        public string FirstName { get; set; }\n        public string LastName { get; set; }\n        public string Image { get; set; }\n    }\n}\n</code></pre>\n<p>generated Typescript Nswag Code</p>\n<pre><code>export interface IBaseModel {\n    id?: string | null;\n    creationDate?: Date | null;\n    updateDate?: Date | null;\n}\n\nexport class User extends BaseModel implements IUser {\n    firstName?: string | null;\n    lastName?: string | null;\n    image?: string | null;\n\n    constructor(data?: IUser) {\n        super(data);\n    }\n\n    init(data?: any) {\n        super.init(data);\n        if (data) {\n            this.firstName = data[&quot;firstName&quot;] !== undefined ? data[&quot;firstName&quot;] : &lt;any&gt;null;\n            this.lastName = data[&quot;lastName&quot;] !== undefined ? data[&quot;lastName&quot;] : &lt;any&gt;null;\n            this.image = data[&quot;image&quot;] !== undefined ? data[&quot;image&quot;] : &lt;any&gt;null;\n        }\n    }\n\n    static fromJS(data: any): User {\n        data = typeof data === 'object' ? data : {};\n        let result = new User();\n        result.init(data);\n        return result;\n    }\n\n    toJSON(data?: any) {\n        data = typeof data === 'object' ? data : {};\n        data[&quot;firstName&quot;] = this.firstName !== undefined ? this.firstName : &lt;any&gt;null;\n        data[&quot;lastName&quot;] = this.lastName !== undefined ? this.lastName : &lt;any&gt;null;\n        data[&quot;image&quot;] = this.image !== undefined ? this.image : &lt;any&gt;null;\n        super.toJSON(data);\n        return data;\n    }\n}\n\nexport interface IUser extends IBaseModel {\n    firstName?: string | null;\n    lastName?: string | null;\n    image?: string | null;\n}\n</code></pre>\n<p>Typescript use class as type</p>\n<pre><code>const newUser: User = {\n                firstName,\n                lastName,\n            };\n</code></pre>\n<p>I would like to disable <code>init</code> &amp; <code>toJSON</code> that causes the error, and I don't need to declare them to function.</p>\n<p>error:</p>\n<blockquote>\n<p>Type '{ firstName: string; lastName: string; }' is missing the following properties from type 'User': init, toJSON</p>\n</blockquote>\n<p>I would like to get rid of the errors without having to manually rewrite the whole NSWAG generated API client. Maybe I'm using the classes wrong, when using the interfaces I get the same error message.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12154633, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAsILypckUiCuIO3ozopcKQFxgHEZFVN3TF8-kQZQ=k-s128", "display_name": "Vitor Menezello", "link": "https://stackoverflow.com/users/12154633/vitor-menezello"}, "edited": false, "score": 0, "creation_date": 1570042354, "post_id": 58207472, "comment_id": 102793267, "body": "It worked, thanks. Every time I&#39;ve seen <code>setTimeout</code> as a workaround, rather than a solution, but I&#39;ll just take it.  Also, I&#39;ve tried implementing it in other manners but they didn&#39;t work, but this one did work."}], "tags": [], "owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "is_accepted": true, "score": 0, "last_activity_date": 1570041474, "creation_date": 1570041474, "answer_id": 58207472, "question_id": 58207324, "link": "https://stackoverflow.com/questions/58207324/contentchildren-with-ng-template-generates-expressionchangedafterithasbeenchecke/58207472#58207472", "title": "ContentChildren with ng-template generates ExpressionChangedAfterItHasBeenCheckedError inside component", "body": "<p>You can fix that error by wrapping your headers item inside setTimeOut</p>\n\n<blockquote>\n  <p><a href=\"https://indepth.dev/everything-you-need-to-know-about-the-expressionchangedafterithasbeencheckederror-error/\" rel=\"nofollow noreferrer\">For More Info About Check this:</a></p>\n</blockquote>\n\n<pre><code>ngAfterContentInit(): void {\n    setTimeout(()=&gt;{\n         this.headerItems = this.inputHeaderItems.toArray();\n        this.inputHeaderItems.changes.subscribe((value: QueryList&lt;HeaderItemComponent&gt;) =&gt; {\n          this.headerItems = value.toArray();\n          this.cdr.detectChanges();\n        });\n      })\n\n      }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12154633, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAsILypckUiCuIO3ozopcKQFxgHEZFVN3TF8-kQZQ=k-s128", "display_name": "Vitor Menezello", "link": "https://stackoverflow.com/users/12154633/vitor-menezello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 58207472, "answer_count": 1, "score": 0, "last_activity_date": 1570043465, "creation_date": 1570040825, "question_id": 58207324, "link": "https://stackoverflow.com/questions/58207324/contentchildren-with-ng-template-generates-expressionchangedafterithasbeenchecke", "title": "ContentChildren with ng-template generates ExpressionChangedAfterItHasBeenCheckedError inside component", "body": "<p>I am working on an Angular application, and I've faced this <code>ExpressionChangedAfterItHasBeenCheckedError</code> a few times, but this time I don't know what to do to solve it.</p>\n\n<p>I have a component that has a few child components using <code>@ContentChild</code> and <code>@ContentChildren</code>. Inside the child component, there is a list of children, all of which I'm rendering using <code>*ngTemplateOutlet</code>.</p>\n\n<p>I've recreated the situation with an example based on a <code>TableComponent</code> that has a <code>HeaderComponent</code>, which can have multiple <code>HeaderItemComponent</code> inside, and a <code>QueryList</code> of <code>RowItem</code>.</p>\n\n<p>I've made a StackBlitz with the full code to reproduce the error at:</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-6ieqh7\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-6ieqh7</a></p>\n\n<p>The weird thing to me is that, if I remove the header when rendering the table, no errors occur, even though the header items are rendered the exact same way as the rows.</p>\n\n<p>Error occurs:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;table-header&gt;\n    &lt;table-header-item&gt;Id&lt;/table-header-item&gt;\n    &lt;table-header-item&gt;Name&lt;/table-header-item&gt;\n    &lt;table-header-item&gt;Status&lt;/table-header-item&gt;\n  &lt;/table-header&gt;\n\n  &lt;table-row *ngFor=\"let row of tableData\"&gt;\n    &lt;table-row-item&gt;{{ row.id }}&lt;/table-row-item&gt;\n    &lt;table-row-item&gt;{{ row.name }}&lt;/table-row-item&gt;\n    &lt;table-row-item&gt;{{ row.status }}&lt;/table-row-item&gt;\n  &lt;/table-row&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>No errors:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;table-row *ngFor=\"let row of tableData\"&gt;\n    &lt;table-row-item&gt;{{ row.id }}&lt;/table-row-item&gt;\n    &lt;table-row-item&gt;{{ row.name }}&lt;/table-row-item&gt;\n    &lt;table-row-item&gt;{{ row.status }}&lt;/table-row-item&gt;\n  &lt;/table-row&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Finally, the error, accused in line 2 of <code>header.component.html</code>:</p>\n\n<pre><code>ERROR Error: ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: 'ngTemplateOutlet: undefined'. Current value: 'ngTemplateOutlet: [object Object]'.\n</code></pre>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "comments": [{"owner": {"reputation": 126, "user_id": 12087868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBpB04bhjS5C34Fea8YGw1HOmH1MJLHXwNDEXIOBQ=k-s128", "display_name": "Abhishek Bag", "link": "https://stackoverflow.com/users/12087868/abhishek-bag"}, "edited": false, "score": 1, "creation_date": 1570038654, "post_id": 58206577, "comment_id": 102791586, "body": "This has already been addressed here <a href=\"https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://stackoverflow.com/questions/46150788/inject-style-declarations-using-hostbinding-in-angular&amp;ved=2ahUKEwiA97Ckkf7kAhVc7HMBHVnWAWMQjjgwAHoECAIQAQ&amp;usg=AOvVaw3GeQNFQD6KaUPtncGqoCt3\" rel=\"nofollow noreferrer\" title=\"inject style declarations using hostbinding in angular%26amp%3bved%3d2ahUKEwiA97Ckkf7kAhVc7HMBHVnWAWMQjjgwAHoECAIQAQ%26amp%3busg%3dAOvVaw3GeQNFQD6KaUPtncGqoCt3\">google.com/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://&hellip;</a>"}, {"owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "reply_to_user": {"reputation": 126, "user_id": 12087868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBpB04bhjS5C34Fea8YGw1HOmH1MJLHXwNDEXIOBQ=k-s128", "display_name": "Abhishek Bag", "link": "https://stackoverflow.com/users/12087868/abhishek-bag"}, "edited": false, "score": 0, "creation_date": 1570040044, "post_id": 58206577, "comment_id": 102792202, "body": "Ah - So we need to use the Sanitizer - Good tip - Thanks!"}], "owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570037948, "creation_date": 1570037948, "question_id": 58206577, "link": "https://stackoverflow.com/questions/58206577/setting-multiple-inline-style-properties-with-hostbinding", "title": "Setting multiple inline style properties with @HostBinding", "body": "<p>This works:</p>\n\n<pre><code>  @HostBinding('style.width') get w() {\n    return this.width ? this.width : '';\n  }\n  @HostBinding('style.height') get h() {\n    return this.height ? this.height : '';\n  }\n\n</code></pre>\n\n<p>Is there a way to do this with a single <code>@HostBinding</code>?</p>\n"}, {"tags": ["html", "typescript"], "comments": [{"owner": {"reputation": 9109, "user_id": 541404, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/599c7e31296da6999371bd6718b61ef5?s=128&d=identicon&r=PG", "display_name": "Cameron Tinker", "link": "https://stackoverflow.com/users/541404/cameron-tinker"}, "edited": false, "score": 2, "creation_date": 1570037887, "post_id": 58206535, "comment_id": 102791267, "body": "Are you using any framework like Angular, Vue, Aurelia, or React? If not, I recommend that you research which one fits best for your needs."}, {"owner": {"reputation": 25, "user_id": 12154914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a66c6ffbd9cee1971cab03799319fb7?s=128&d=identicon&r=PG&f=1", "display_name": "WishIWasSmart", "link": "https://stackoverflow.com/users/12154914/wishiwassmart"}, "reply_to_user": {"reputation": 9109, "user_id": 541404, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/599c7e31296da6999371bd6718b61ef5?s=128&d=identicon&r=PG", "display_name": "Cameron Tinker", "link": "https://stackoverflow.com/users/541404/cameron-tinker"}, "edited": false, "score": 0, "creation_date": 1570037975, "post_id": 58206535, "comment_id": 102791298, "body": "I am using React @CameronTinker"}, {"owner": {"reputation": 2502, "user_id": 3311001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/011dc5bf6a350b0334887a89ce06038f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Faltesek", "link": "https://stackoverflow.com/users/3311001/tom-faltesek"}, "edited": false, "score": 2, "creation_date": 1570038048, "post_id": 58206535, "comment_id": 102791334, "body": "Are you using webpack or something to transpile your TypeScript into JavaScript? Do you have a build process?"}], "answers": [{"tags": [], "owner": {"reputation": 9109, "user_id": 541404, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/599c7e31296da6999371bd6718b61ef5?s=128&d=identicon&r=PG", "display_name": "Cameron Tinker", "link": "https://stackoverflow.com/users/541404/cameron-tinker"}, "is_accepted": false, "score": 0, "last_activity_date": 1570038616, "creation_date": 1570038616, "answer_id": 58206764, "question_id": 58206535, "link": "https://stackoverflow.com/questions/58206535/how-do-i-call-a-typescript-function-from-a-html/58206764#58206764", "title": "How do I call a typescript function from a html", "body": "<p>I recommend taking a look at <a href=\"https://reactjs.org/docs/react-component.html#componentdidmount\" rel=\"nofollow noreferrer\">React.Component.componentDidMount()</a>. You will be able to set your component's state and update the DOM after fetching your JSON data. The <a href=\"https://reactjs.org/docs/react-component.html#render\" rel=\"nofollow noreferrer\">render()</a> function takes care of rendering your DOM and will update as your state changes.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8094098"}, "is_accepted": false, "score": 0, "last_activity_date": 1570044447, "creation_date": 1570044447, "answer_id": 58208171, "question_id": 58206535, "link": "https://stackoverflow.com/questions/58206535/how-do-i-call-a-typescript-function-from-a-html/58208171#58208171", "title": "How do I call a typescript function from a html", "body": "<p>You can't. The browser can't understand TypeScript. You will need to transpile it into js. However, you can use a bundler to help you out. But that can be pretty easy.  Checkout <a href=\"https://parceljs.org/\" rel=\"nofollow noreferrer\">https://parceljs.org/</a> </p>\n"}], "owner": {"reputation": 25, "user_id": 12154914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a66c6ffbd9cee1971cab03799319fb7?s=128&d=identicon&r=PG&f=1", "display_name": "WishIWasSmart", "link": "https://stackoverflow.com/users/12154914/wishiwassmart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570044447, "creation_date": 1570037739, "last_edit_date": 1570038058, "question_id": 58206535, "link": "https://stackoverflow.com/questions/58206535/how-do-i-call-a-typescript-function-from-a-html", "title": "How do I call a typescript function from a html", "body": "<p>How do I import a typescript function into a html file and call it. I am honestly not sure how to do it.</p>\n\n<p>This is my index.html where I try to call getJSON()</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n\n  &lt;body&gt;\n    &lt;section id=\"root\"&gt;&lt;/section&gt;\n\n    &lt;script\n      crossorigin\n      src=\"https://unpkg.com/react@16/umd/react.production.min.js\"\n    &gt;&lt;/script&gt;\n    &lt;script\n      crossorigin\n      src=\"https://unpkg.com/react-dom@16/umd/react-dom.production.min.js\"\n    &gt;&lt;/script&gt;\n\n    &lt;script&gt;\n        window.addEventListener(\"load\", () =&gt; {\n          navigator.serviceWorker.register(\"/sw.js\").then(reg =&gt; {\n            console.log(\"Service worker registered.\", reg);\n          });\n        });\n      }\n    &lt;/script&gt;\n    &lt;script&gt;\n      const ipc = require(\"electron\").ipcRenderer;\n      document.addEventListener(\"DOMContentLoaded\", () =&gt; {\n        ipc.send(\"mainWindowLoaded\");\n        ipc.on(\"resultSent\", (event, arg) =&gt; {\n          {\n            {\n              getJSON(JSON.stringify(arg));\n            }\n          }\n          console.log(JSON.stringify(arg));\n        });\n      });\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This is my actions.ts</p>\n\n<pre><code>export function getJSON(probes: JSON) {\n  console.log(probes);\n}\n</code></pre>\n"}, {"tags": ["typescript", "webpack", "jestjs"], "comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570040042, "post_id": 58206476, "comment_id": 102792201, "body": "Code for some reason has a non-top-level export statement, which is illegal. If you wrote it that way, you&#39;ll need to change it. If it&#39;s the output of a tool or process, you&#39;ll need to debug that process."}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570040464, "post_id": 58206476, "comment_id": 102792391, "body": "which code you are talking about, jest.config.js? Also just so you know, the code is running fine, it&#39;s just jest throwing this issue."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570040601, "post_id": 58206476, "comment_id": 102792447, "body": "I&#39;m talking about the error you yourself posted: <code>function(module,exports,require,__dirname,__filename,global,&zwnj;&#8203;jest){export * from &#39;.&#47;Acc&#39;</code>. You cannot have an export statement inside a function body. Imports/exports have to be statically resolvable. There is a proposal for an <code>import</code> function that returns a Promise, but that export statement is flat out illegal any way you slice it. The error message points you right to it."}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570040644, "post_id": 58206476, "comment_id": 102792475, "body": "no, my code does not contain this function it is like: <code>export * from &#39;.&#47;Async&#39;</code> Plain and simple series of export statements."}, {"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1570040783, "post_id": 58206476, "comment_id": 102792548, "body": "This is come from node_modules currently node.js doesn&#39;t esm support so we have to add babel-jest package"}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570040839, "post_id": 58206476, "comment_id": 102792580, "body": "Do you have module set to commonjs or es2015 in your tsconfig?"}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570042552, "post_id": 58206476, "comment_id": 102793374, "body": "@JaredSmith if that makes sense then can you pls remove -1 vote of the question?"}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570042658, "post_id": 58206476, "comment_id": 102793424, "body": "@JaredSmith, I have added full tsconfig.js"}], "answers": [{"comments": [{"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "edited": false, "score": 0, "creation_date": 1570039528, "post_id": 58206831, "comment_id": 102791993, "body": "We have this in jest.config.js. The problem is that as I am using module resolution, Jest is not able to resolve non node-module imports."}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "edited": false, "score": 0, "creation_date": 1570039951, "post_id": 58206831, "comment_id": 102792164, "body": "Added at the end of the question."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1570040004, "post_id": 58206831, "comment_id": 102792186, "body": "Code for some reason has a non-top-level export statement. No amount of transforming is going to fix that."}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "edited": false, "score": 0, "creation_date": 1570042725, "post_id": 58206831, "comment_id": 102793449, "body": "does it mean I have to install babel-jest? Currently I do not have it."}, {"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1570042888, "post_id": 58206831, "comment_id": 102793530, "body": "Yes you have to install &quot;npm install babel-jest --save-dev&quot;"}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "edited": false, "score": 0, "creation_date": 1570043116, "post_id": 58206831, "comment_id": 102793633, "body": "didn&#39;t fix, as babel-jest is for jsx, I am typescript guy :("}, {"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1570044098, "post_id": 58206831, "comment_id": 102794007, "body": "Can you try like this  &#39;^.+\\\\.jsx?$&#39;: &#39;babel-jest&#39;"}, {"owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "edited": false, "score": 0, "creation_date": 1570047374, "post_id": 58206831, "comment_id": 102795433, "body": "@RajaJaganathan, could it be that <code>&quot;Common&#47;$&quot;: &quot;&lt;rootDir&gt;&#47;src&#47;Common&quot;,</code> is not considering deep path like <code>Common&#47;js&#47;util&#47;</code>? if so, how can we update it to consider all the detailed path?"}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1570040551, "last_edit_date": 1570040551, "creation_date": 1570038895, "answer_id": 58206831, "question_id": 58206476, "link": "https://stackoverflow.com/questions/58206476/jest-setup-for-typescript-with-module-resolution/58206831#58206831", "title": "Jest setup for typescript with module resolution", "body": "<p>Looks like babel by default can't parse typescript test file, so do install <code>npm install ts-jest babel-jest --save-dev</code> Then add below config in jest.config.js file.</p>\n\n<pre><code>  transform: {\n    '^.+\\\\.jsx?$': require.resolve('babel-jest'),\n    '^.+\\\\.tsx?$': 'ts-jest',\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "is_accepted": true, "score": 2, "last_activity_date": 1570050112, "creation_date": 1570050112, "answer_id": 58209313, "question_id": 58206476, "link": "https://stackoverflow.com/questions/58206476/jest-setup-for-typescript-with-module-resolution/58209313#58209313", "title": "Jest setup for typescript with module resolution", "body": "<p>Ok, so I was able to fix module resolution by adding this line to jest.config.js</p>\n\n<p><code>moduleDirectories: [\"node_modules\", \"src\"],</code></p>\n"}], "owner": {"reputation": 1307, "user_id": 867125, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3d1d54eb01212ee0d212dc0b9b4de0a2?s=128&d=identicon&r=PG&f=1", "display_name": "TechTurtle", "link": "https://stackoverflow.com/users/867125/techturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2852, "favorite_count": 1, "accepted_answer_id": 58209313, "answer_count": 2, "score": 2, "last_activity_date": 1570050112, "creation_date": 1570037479, "last_edit_date": 1570042631, "question_id": 58206476, "link": "https://stackoverflow.com/questions/58206476/jest-setup-for-typescript-with-module-resolution", "title": "Jest setup for typescript with module resolution", "body": "<p>The project is using ReactJS, Typescript, Webpack and Jest.\nTo achieve module resolution (to minimize import), we made following changes:</p>\n\n<p><code>TSConfig.js:</code></p>\n\n<p><code>\"compilerOptions\": { \"baseUrl\": \"src\",}</code></p>\n\n<p><code>Webpack.config.js</code></p>\n\n<pre><code>alias: {\n  Common: path.resolve(__dirname, 'src/Common/'),\n},\n</code></pre>\n\n<p>The code works fine, however Jest tests started failing with error:</p>\n\n<p><code>Cannot find module 'Common/js/utils' from 'MyContact.ts'</code></p>\n\n<p>This is because, Jest is not yet aware of how to resolve Common to Src/common and not to look in node_module. To fix this, following change were made:</p>\n\n<p><code>jestConfig.js</code></p>\n\n<p><code>moduleNameMapper: {\"Common\": \"&lt;rootDir&gt;/src/Common\"}</code></p>\n\n<p>That seems fixed, but then I have another issue [which is why I am here :)]</p>\n\n<p>Jest encountered an unexpected token</p>\n\n<pre><code>This usually means that you are trying to import a file which Jest cannot parse, e.g. it's not plain JavaScript.\n\nBy default, if Jest sees a Babel config, it will use that to transform your files, ignoring \"node_modules\".\n\nHere's what you can do:\n \u2022 To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n \u2022 If you need a custom transformation specify a \"transform\" option in your config.\n \u2022 If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\nYou'll find more details and examples of these config options in the docs:\nhttps://jestjs.io/docs/en/configuration.html\n\nDetails:\n\nC:\\Users\\ua\\Project\\develop\\src\\Common\\index.ts:1\n({\"Object.&lt;anonymous&gt;\":function(module,exports,require,__dirname,__filename,global,jest){export * from './Acc'\n                                                                                         ^^^^^^\n\nSyntaxError: Unexpected token export\n\n  at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:537:17)\n  at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:579:25)\n</code></pre>\n\n<p>Here is full jest.config.js file:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>module.exports = {\r\n  verbose: false,\r\n  roots: [\"&lt;rootDir&gt;/src\"],\r\n  transform: {\r\n    \"^.+\\\\.tsx?$\": \"ts-jest\",\r\n  },\r\n  globals: {\r\n    'ts-jest': {\r\n      diagnostics: false\r\n    }\r\n  },\r\n  moduleNameMapper: {\r\n    \"\\\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$\":\r\n      \"&lt;rootDir&gt;/__mocks__/fileMock.js\",\r\n    \"\\\\.(css|less|pcss)$\": \"&lt;rootDir&gt;/__mocks__/styleMock.js\",\r\n    \"Common\": \"&lt;rootDir&gt;/src/Common\",\r\n  },\r\n  snapshotSerializers: [\"enzyme-to-json/serializer\"],\r\n  setupFilesAfterEnv: [\"&lt;rootDir&gt;/setupEnzyme.ts\"],\r\n  testMatch: [ \"**/__tests__/**/*.test.[jt]s?(x)\", \"**/?(*.)+(spec|test).[jt]s?(x)\"],\r\n  collectCoverageFrom: [\"**/*.{ts,tsx}\", \"!**/node_modules/**\", \"!**/vendor/**\"]\r\n};</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>tsconfig.js:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"compileOnSave\": false,\r\n  \"compilerOptions\": {\r\n    \"baseUrl\": \"src\",\r\n    \"typeRoots\": [\r\n      \"./node_modules/@types\",\r\n      \"./custom_typings\"\r\n    ],\r\n    \"outDir\": \"build\",\r\n    \"module\": \"commonjs\",\r\n    \"skipLibCheck\": true,\r\n    \"moduleResolution\": \"node\",\r\n    \"removeComments\": true,\r\n    \"target\": \"es5\",\r\n    \"sourceMap\": true,\r\n    \"lib\": [ \"dom\", \"es2015\", \"es2017\", \"esnext\" ],\r\n    \"noEmit\": false,\r\n    \"emitDecoratorMetadata\": true,\r\n    \"experimentalDecorators\": true,\r\n    \"noImplicitAny\": false,\r\n    \"allowUnusedLabels\": false,\r\n    \"jsx\": \"react\",\r\n    \"allowJs\": true,\r\n    \"isolatedModules\": false,\r\n    \"strictNullChecks\": false,\r\n    \"noEmitHelpers\": false,\r\n    \"allowSyntheticDefaultImports\": true\r\n  },\r\n  \"typeRoots\": [\r\n    \"./node_modules/@types\",\r\n    \"./custom_typings\"\r\n  ],\r\n  \"exclude\":[\r\n    \"./node_modules\"\r\n  ],\r\n  \"include\": [\r\n    \"src/*\",\r\n    \"custom_typings\"\r\n  ]\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["angular", "typescript", "ag-grid", "ag-grid-angular"], "answers": [{"tags": [], "owner": {"reputation": 52, "user_id": 12158308, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sR5cGFVA-Lk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCviBJR6Gkuv78YNAoCcFdfKelgA/photo.jpg?sz=128", "display_name": "SAS DEV", "link": "https://stackoverflow.com/users/12158308/sas-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1570095255, "creation_date": 1570095255, "answer_id": 58216260, "question_id": 58206380, "link": "https://stackoverflow.com/questions/58206380/how-to-use-rowdoubleclick-in-angular-if-same-ag-grid-is-used-accross-multiple-co/58216260#58216260", "title": "How to use rowDoubleClick in Angular if same ag-grid is used accross multiple components?", "body": "<p>Define the gridOptions in your component and pass it to the template.\nSomething like this,</p>\n\n<p>Inside template:</p>\n\n<pre><code>[gridOptions]=\"gridOptions\"\n</code></pre>\n\n<p>In component:</p>\n\n<pre><code>export class YourComp {\n   gridOptions: GridOptions; //Declare gridoptions\n   constructor(){\n        this.gridOptions = {\n        onRowDoubleClick: yourMethod()\n      }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10911135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07bc17f1effdcefb63af13f86e83fed1?s=128&d=identicon&r=PG&f=1", "display_name": "Parol Mehta", "link": "https://stackoverflow.com/users/10911135/parol-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570095255, "creation_date": 1570037029, "last_edit_date": 1570051960, "question_id": 58206380, "link": "https://stackoverflow.com/questions/58206380/how-to-use-rowdoubleclick-in-angular-if-same-ag-grid-is-used-accross-multiple-co", "title": "How to use rowDoubleClick in Angular if same ag-grid is used accross multiple components?", "body": "<p>I have an <code>ag-grid</code> which is used in 4 different <code>Angular</code> Components. I want to enable <code>rowDoubleClicked</code> only for one component. But when I give it in the grid it is getting enabled for all the component. </p>\n\n<p>How do I make it enable only one specific method that is being emitted for that particular component? </p>\n\n<p>I read that we can use <code>this.gridOptions.onRowDoubleClicked</code> in the component.ts file, but not sure how do I use it exactly for a particular method.</p>\n\n<p>template :-</p>\n\n<pre><code>&lt;ag-grid-angular\n      [columnDefs]=\"columnDefs\"\n      [rowData]=\"rowData\"\n      [rowSelection]=\"rowSelection\"\n      (gridReady)=\"onGridReady($event)\"\n      (rowDoubleClicked) = \"onRowDoubleClick()\"\n      gridOptions=\"{{ gridOptions }}\"\n    &gt;\n    &lt;/ag-grid-angular&gt;\n</code></pre>\n\n<p>component.ts :-</p>\n\n<pre><code>onRowDoubleClick(){\n     console.log(\"Double Click works for a particular component\");\n     }\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "promise"], "comments": [{"owner": {"reputation": 35803, "user_id": 3858469, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Lf9q4.png?s=128&g=1", "display_name": "Aravind", "link": "https://stackoverflow.com/users/3858469/aravind"}, "edited": false, "score": 1, "creation_date": 1570036143, "post_id": 58206148, "comment_id": 102790481, "body": "in general terms <code>yes</code> you can resolve a resolved promise, but in this I case I don&#39;t think as you are converting an <code>Observable</code> to <code>Promise</code> but Hang on I&#39;ll try it out"}, {"owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "edited": false, "score": 0, "creation_date": 1570036315, "post_id": 58206148, "comment_id": 102790559, "body": "No, you can&#39;t resolve a resolved promise. Doing so won&#39;t throw exceptions, but it will also not have any observable effect."}], "answers": [{"tags": [], "owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": false, "score": 0, "last_activity_date": 1570036682, "creation_date": 1570036682, "answer_id": 58206291, "question_id": 58206148, "link": "https://stackoverflow.com/questions/58206148/calling-promise-resolve-multiple-times-returning-same-old-results/58206291#58206291", "title": "Calling promise resolve multiple times, returning same old results", "body": "<p>A promise is a one-way state machine so once it is resolved, it will stay that way forever.  You cannot change that.  Only when it is in the <code>pending</code> state can you resolve it with a value.  Trying to call <code>resolve()</code> again on a promise that is not in the <code>pending</code> state just ignores the call (does nothing).</p>\n\n<blockquote>\n  <p>How can i call the updated data in my backend using this same promise? That is possible?</p>\n</blockquote>\n\n<p>You will need to call your original asynchronous operation again:</p>\n\n<pre><code>this.httpClient.get&lt;any&gt;('http://localhost').toPromise()\n</code></pre>\n\n<p>to get a new promise that is tied to the new asynchronous action to get the new data.  This new promise will resolve with the new data.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 5554653, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208151868504948/picture?type=large", "display_name": "Danilo Santos", "link": "https://stackoverflow.com/users/5554653/danilo-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1570037345, "creation_date": 1570037345, "answer_id": 58206452, "question_id": 58206148, "link": "https://stackoverflow.com/questions/58206148/calling-promise-resolve-multiple-times-returning-same-old-results/58206452#58206452", "title": "Calling promise resolve multiple times, returning same old results", "body": "<p>You always get the same result because you don't call de server again.</p>\n\n<p>For your code work as you expect you need to implement more lines of code  like that:</p>\n\n<p><strong>parent.component.ts</strong></p>\n\n<pre><code>public mypromise;\n    ngOnInit() {\n     mypromise = this.getSomethig();\n    }\n\n    public function getSomething() {\n     return this.httpClient.get&lt;any&gt;('http://localhost').toPromise();\n    }\n</code></pre>\n\n<p><strong>child.component.ts</strong></p>\n\n<pre><code>@Input() promise: Promise&lt;any&gt;\n@Output() getSomething = new EventEmitter&lt;any&gt;();\n\nngOnInit(){\n this.promise\n .then(data=&gt;console.log(data)) //here i log my results in console\n .catch(e=&gt;console.log(e))\n\n //results:\n //[{id: 1, text: 'abc'}, {id: 2, text: 'abcd'}]  \n}\n\nupdate(){\n     this.getSomething.emit();\n}\n</code></pre>\n\n<p>See more about event emitter in <a href=\"https://dzone.com/articles/understanding-output-and-eventemitter-in-angular\" rel=\"nofollow noreferrer\">https://dzone.com/articles/understanding-output-and-eventemitter-in-angular</a></p>\n"}], "owner": {"reputation": 176, "user_id": 7127626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/247730375585197/picture?type=large", "display_name": "outrowender", "link": "https://stackoverflow.com/users/7127626/outrowender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570037345, "creation_date": 1570036045, "last_edit_date": 1570036602, "question_id": 58206148, "link": "https://stackoverflow.com/questions/58206148/calling-promise-resolve-multiple-times-returning-same-old-results", "title": "Calling promise resolve multiple times, returning same old results", "body": "<p>In my angular project, I have two separate components.</p>\n\n<p><strong>parent.component.ts</strong></p>\n\n<pre><code>mypromise = this.httpClient.get&lt;any&gt;('http://localhost').toPromise()\n</code></pre>\n\n<p><strong>parent.component.html</strong></p>\n\n<pre><code>&lt;app-children #child [promise]=\"mypromise\"&gt;&lt;/app-children&gt;\n\n&lt;button (click)=\"child.update()\"&gt;Update now!&lt;/button&gt;\n</code></pre>\n\n<p><strong>child.component.ts</strong></p>\n\n<pre><code>@Input promise: Promise&lt;any&gt;\n\nngOnInit(){\n  this.getMyPromise()\n\n  //results:\n  //[{id: 1, text: 'abc'}, {id: 2, text: 'abcd'}]  \n}\n\nupdate(){\n  this.getMyPromise()\n  //expected:\n  //[{id: 1, text: 'abc'}, {id: 2, text: 'abcd'}, {id: 3, text: 'new data'}]  \n\n  //results:\n  //[{id: 1, text: 'abc'}, {id: 2, text: 'abcd'}]\n  //same outdated results of first call\n}\n\ngetMyPromise(){\n this.promise\n .then(data=&gt;console.log(data)) //here i log my results in console\n .catch(e=&gt;console.log(e))\n}\n</code></pre>\n\n<p>When my component start, the promise is resolved normally with my content, but if I call my promise again using the <code>update</code> function in <code>Update now!</code> button, after my data in backend has updated, the promise return same results of first call in <code>ngOnInit()</code></p>\n\n<p>How can I call the updated data in my backend using this same promise? That is possible?</p>\n"}, {"tags": ["html", "angular", "typescript", "components", "angular8"], "comments": [{"owner": {"reputation": 15657, "user_id": 1164465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qtP66.jpg?s=128&g=1", "display_name": "Christopher Peisert", "link": "https://stackoverflow.com/users/1164465/christopher-peisert"}, "edited": false, "score": 1, "creation_date": 1570050250, "post_id": 58205862, "comment_id": 102796433, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/53646015/angular-component-in-a-browsers-child-window\">Angular component in a Browser&#39;s child window</a>"}, {"owner": {"reputation": 83, "user_id": 9338792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bjymF.jpg?s=128&g=1", "display_name": "Leandro here&#241;u", "link": "https://stackoverflow.com/users/9338792/leandro-here%c3%b1u"}, "reply_to_user": {"reputation": 15657, "user_id": 1164465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qtP66.jpg?s=128&g=1", "display_name": "Christopher Peisert", "link": "https://stackoverflow.com/users/1164465/christopher-peisert"}, "edited": false, "score": 0, "creation_date": 1570052021, "post_id": 58205862, "comment_id": 102796970, "body": "@ChristopherPeisert I&#39;m looking at the answers there. Tomorrow I&#39;ll let you know if those worked for me. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 9338792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bjymF.jpg?s=128&g=1", "display_name": "Leandro here&#241;u", "link": "https://stackoverflow.com/users/9338792/leandro-here%c3%b1u"}, "is_accepted": false, "score": 2, "last_activity_date": 1570192242, "creation_date": 1570192242, "answer_id": 58236472, "question_id": 58205862, "link": "https://stackoverflow.com/questions/58205862/angular-rendering-and-getting-the-html-of-a-component-dynamically/58236472#58236472", "title": "Angular: Rendering and Getting the HTML of a Component Dynamically", "body": "<p>It may help other people so I post here what I did and which problems I found. After looking to some solutions, <a href=\"https://stackoverflow.com/a/54578796/9338792\">this one</a> worked for me. The problem was then I realize that Angular sanitizes your HTML removing all possible <code>&lt;script&gt;</code> tags. Unfortunately I had like 3 of them. In addition, if you don't want them to be sanitized, you have to use a service called <code>DomSanitizer</code>and use the method <code>bypassSecurityTrustScript</code> (<a href=\"https://angular.io/api/platform-browser/DomSanitizer#bypassSecurityTrustScript\" rel=\"nofollow noreferrer\">doc</a>) passing the script as a parameter. So the idea of don't 'stringify' the code was gone. Saying that, I used the original approach, where the HTML is stored in a variable then passed as a parameter to <code>window.open</code></p>\n"}], "owner": {"reputation": 83, "user_id": 9338792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bjymF.jpg?s=128&g=1", "display_name": "Leandro here&#241;u", "link": "https://stackoverflow.com/users/9338792/leandro-here%c3%b1u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570192242, "creation_date": 1570034750, "last_edit_date": 1570037922, "question_id": 58205862, "link": "https://stackoverflow.com/questions/58205862/angular-rendering-and-getting-the-html-of-a-component-dynamically", "title": "Angular: Rendering and Getting the HTML of a Component Dynamically", "body": "<p>Render the HTML of a component so that it could be used to open a new tab of the type about:blank (a blank new html page that nothing has to do with the application itself).</p>\n\n<p><strong>Why?</strong> \nTo avoid creating the HTML using a string variable as, for example:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var html = '&lt;div&gt;\n              &lt;h3&gt;My Template&lt;/h3&gt;\n              ' + myProperty + ' \n            &lt;/div&gt;';\n</code></pre>\n\n<p>I saw that you can render a component dynamically using <code>ViewContainerRef.createComponent</code> and <code>ComponentFactoryResolver</code>. The problem with this is that the component is rendered inside the view container, in the application. What I would like to do is generate the HTML of that component so that then I can use that HTML to put it wherever I want. (in this case, in the document property of the object given by the <code>window.open()</code> method)</p>\n\n<p><strong>Example:</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Component({\n  selector: 'app-component',\n  template: `\n            &lt;div&gt;\n              &lt;h3&gt;My Template&lt;/h3&gt;\n              {{ myProperty }}\n            &lt;/div&gt;\n          `,\n  styleUrls: ['./my.component.less']\n})\nexport class MyComponent{\n  myProperty: string;\n}\n</code></pre>\n\n<p><strong>I expect to use it in this way:</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>//get new window tab\nvar newTab = window.open('about:blank', '_blank');\n\n//get the HTML of the component\n\n//use it to open the new tab\nnewTab.document.write(html);\n</code></pre>\n"}, {"tags": ["node.js", "mongodb", "typescript", "mongoose"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 6765084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ac05c03d68fdb615280cc394e486318?s=128&d=identicon&r=PG&f=1", "display_name": "M. Schr&#246;der", "link": "https://stackoverflow.com/users/6765084/m-schr%c3%b6der"}, "edited": false, "score": 0, "creation_date": 1570090098, "post_id": 58213841, "comment_id": 102806017, "body": "Hey, sound like a good start. But I think it is not enough to find intersections, is it? For example if there are 2 existing bookings which each have an intersection with the new booking (one at the start date one at the end date) the above code would return 2. If we know say that we can only have 2 bookings at a time the booking would not be possible. But the truth is that the booking would be possible since there are never more then 2 bookings at any time."}, {"owner": {"reputation": 10069, "user_id": 10770370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--BJzgsUzEAU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jRHebrD-MZX2COPwzspP78-RP34w/mo/photo.jpg?sz=128", "display_name": "Tom Slabbaert", "link": "https://stackoverflow.com/users/10770370/tom-slabbaert"}, "reply_to_user": {"reputation": 127, "user_id": 6765084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ac05c03d68fdb615280cc394e486318?s=128&d=identicon&r=PG&f=1", "display_name": "M. Schr&#246;der", "link": "https://stackoverflow.com/users/6765084/m-schr%c3%b6der"}, "edited": false, "score": 0, "creation_date": 1570091086, "post_id": 58213841, "comment_id": 102806484, "body": "you are correct, i edited my answer to be correct accordingly"}], "tags": [], "owner": {"reputation": 10069, "user_id": 10770370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--BJzgsUzEAU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jRHebrD-MZX2COPwzspP78-RP34w/mo/photo.jpg?sz=128", "display_name": "Tom Slabbaert", "link": "https://stackoverflow.com/users/10770370/tom-slabbaert"}, "is_accepted": false, "score": 0, "last_activity_date": 1570091067, "last_edit_date": 1570091067, "creation_date": 1570085927, "answer_id": 58213841, "question_id": 58205853, "link": "https://stackoverflow.com/questions/58205853/check-whether-or-not-a-booking-is-possible/58213841#58213841", "title": "Check whether or not a booking is possible", "body": "<p>We will start by finding all intersections with the newDocument i'm only going to make one assumption which is that the \"<code>newBooking</code>\" <code>endDate</code> is typed <code>date</code> (if its null then we make it a very far futuristic date)</p>\n\n<pre><code>let newBookingStartDate = newBooking.startDate;\nlet newBookingEndDate = newBooking.endDate ? newBooking.endDate : new Date().setYear(3000);\n</code></pre>\n\n<p>Now for the query:</p>\n\n<pre><code>let results = await db.collection.aggregate([\n    {\n        $addFields: {\n            tmpEndDate: {\n                $cond: [\n                    {$ne: [\"$endDate\", null]},\n                    \"$endDate\",\n                    newBookingEndDate\n                ]\n            }\n        }\n    },\n    {\n        $match: {\n            $or: [\n                  {\n                    $and: [\n                        {\n                            startDate: {$lt: newBookingStartDate},\n                        },\n                        {\n                            tmpEndDate: {$gt: newBookingStartDate}\n                        },\n                    ]\n                },\n\n                {\n                    $and: [\n                        {\n                            startDate: {$gte: newBookingStartDate},\n                        },\n                        {\n                            startDate: {$lt: newBookingEndDate}\n                        },\n                    ]\n                },\n            ],\n        }\n    },\n])\n</code></pre>\n\n<p>We match documents by diving into two cases:</p>\n\n<ol>\n<li><p><code>document.startDate</code> is lower than <code>newDocument.startDate</code> - in this case all we need to check if the <code>document.endDate</code> is greater then the <code>newDocument.startDate</code>, if it is then we have an intersection</p></li>\n<li><p><code>document.startDate</code> is greater or equal to <code>newDocument.startDate</code> - in this case we just need to check the <code>document.startDate</code> is less than the <code>newDocument.endDate</code> and again we'll get an intersection </p></li>\n</ol>\n\n<p>Now we need to iterate over the documents we found and calculate intersections between them by running the same query:</p>\n\n<pre><code>    for (let i = 0; i &lt; results.length; i++) {\n        let doc = results[i];\n        let otherIds = results.map(val =&gt; val._id);\n\n        let docStartDate = doc.startDate;\n        let docEndDate = doc.endDate ? doc.endDate : new Date().setYear(3000);\n        let count = await db.collection.aggregate([\n            {\n                $match: {\n                    _id: {$in: otherIds}\n                }\n            },\n            {\n                $addFields: {\n                    tmpEndDate: {\n                        $cond: [\n                            {$ne: [\"$endDate\", null]},\n                            \"$endDate\",\n                            docEndDate\n                        ]\n                    }\n                }\n            },\n            {\n                $match: {\n                    $or: [\n                        {\n                            $and: [\n                                {\n                                    startDate: {$lt: docStartDate},\n                                },\n                                {\n                                    tmpEndDate: {$gt: docStartDate}\n                                },\n                            ]\n                        },\n\n                        {\n                            $and: [\n                                {\n                                    startDate: {$gte: docStartDate},\n                                },\n                                {\n                                    startDate: {$lt: docEndDate}\n                                },\n                            ]\n                        },\n                    ],\n\n                }\n            },\n            {\n                $count: \"count\"\n            }\n        ])\n      if (count[0].count &gt;= 3){\n            return false;\n      }\n    }\n</code></pre>\n\n<p>If any of the count results is 3 or greater (3 because i didn't remove the curr document ID from the array and it will always intersect with itself) return false as inserting a new document will set you over the threshold.</p>\n"}], "owner": {"reputation": 127, "user_id": 6765084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ac05c03d68fdb615280cc394e486318?s=128&d=identicon&r=PG&f=1", "display_name": "M. Schr&#246;der", "link": "https://stackoverflow.com/users/6765084/m-schr%c3%b6der"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570091067, "creation_date": 1570034714, "question_id": 58205853, "link": "https://stackoverflow.com/questions/58205853/check-whether-or-not-a-booking-is-possible", "title": "Check whether or not a booking is possible", "body": "<p>I'm currently implementing a booking system. The seller can specify how many items of the given type are available. The rule is simple: There can never be more bookings then available items.</p>\n\n<p>Now I would like to find out with how many existing bookings a new booking is in conflict in order to check if the limit is reached.</p>\n\n<p>The following diagram should give you a little insight on what I'm trying to do.</p>\n\n<p><a href=\"https://ibb.co/4pJk8XV\" rel=\"nofollow noreferrer\">https://ibb.co/4pJk8XV</a></p>\n\n<p>In this example the maximum amount of concurrent bookings is 2. As you can see there are already 3 bookings. One of which has no end date specified.\nOnly viewing the existing bookings there are never more than 2 bookings at the time.</p>\n\n<p>Now I would like to check whether a new booking is possible. I know the start date for every booking. For bookings with no specified end date, the end date will be null.</p>\n\n<p>I'm trying to achieve this using Mongoose.</p>\n\n<p>There is no existing code regarding this problem.</p>\n\n<p>Looking at each example separately: The first one with no end date should fail, since between the 07th and 09th there would be 3 bookings at a time. The second one should be fine as there is only one existing booking on the 06th.</p>\n"}, {"tags": ["javascript", "algorithm", "typescript"], "comments": [{"owner": {"reputation": 28630, "user_id": 1291492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f914cd02166793195d9d950503f8f739?s=128&d=identicon&r=PG", "display_name": "ControlAltDel", "link": "https://stackoverflow.com/users/1291492/controlaltdel"}, "edited": false, "score": 2, "creation_date": 1570034620, "post_id": 58205798, "comment_id": 102789759, "body": "are you looking for setInterval?"}], "answers": [{"tags": [], "owner": {"reputation": 20, "user_id": 12081616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c635cafc258d2f52a5480bd883d1e1?s=128&d=identicon&r=PG&f=1", "display_name": "CoGaMa64", "link": "https://stackoverflow.com/users/12081616/cogama64"}, "is_accepted": false, "score": -1, "last_activity_date": 1570034746, "creation_date": 1570034746, "answer_id": 58205861, "question_id": 58205798, "link": "https://stackoverflow.com/questions/58205798/how-to-get-date-data-every-ten-minutes/58205861#58205861", "title": "How to get date data every ten minutes", "body": "<p>Why don't you use <a href=\"https://www.w3schools.com/jsref/met_win_setinterval.asp\" rel=\"nofollow noreferrer\">setInterval</a>? It seems to me you could make it cleaner by using a native method...</p>\n"}, {"tags": [], "owner": {"reputation": 714, "user_id": 1735037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B8ZZO.jpg?s=128&g=1", "display_name": "Donald Powell", "link": "https://stackoverflow.com/users/1735037/donald-powell"}, "is_accepted": false, "score": 0, "last_activity_date": 1570035868, "last_edit_date": 1570035868, "creation_date": 1570035405, "answer_id": 58206022, "question_id": 58205798, "link": "https://stackoverflow.com/questions/58205798/how-to-get-date-data-every-ten-minutes/58206022#58206022", "title": "How to get date data every ten minutes", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    var origDateObj = new Date();\r\n    var updatedDateObj = new Date();\r\n\r\n    //The 10 in the line below will determine the amount of time added.\r\n    updatedDateObj.setTime(origDateObj.getTime() + (10 * 60 * 1000));\r\n\r\n    console.log(updatedDateObj);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1570036328, "last_edit_date": 1570036328, "creation_date": 1570035834, "answer_id": 58206107, "question_id": 58205798, "link": "https://stackoverflow.com/questions/58205798/how-to-get-date-data-every-ten-minutes/58206107#58206107", "title": "How to get date data every ten minutes", "body": "<p>You have the right idea. The trick is to do this in a loop, and to create a new instance of Date in each iteration of the loop:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const startDate = new Date('2019-05-03T06:00:00');\r\nconst numberOfItems = 12;\r\n\r\nconst dates = Array.from({ length: numberOfItems }, (_, i) =&gt; {\r\n  const nextDate = new Date(startDate);\r\n  nextDate.setMinutes(startDate.getMinutes() + i * 10);\r\n  return nextDate;\r\n});\r\n\r\nconsole.log(dates.map(String));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>You may of course want to wrap this in a function to suit your needs:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function dateIncrements(startDate, incrementMinutes, numberOfItems) {\r\n  return Array.from({ length: numberOfItems }, (_, i) =&gt; {\r\n    const nextDate = new Date(startDate);\r\n    nextDate.setMinutes(startDate.getMinutes() + i * incrementMinutes);\r\n    return nextDate;\r\n  });\r\n}\r\n\r\nconst dates = dateIncrements(new Date('2019-05-03T06:00:00'), 10, 6);\r\nconsole.log(dates.map(String));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 49, "user_id": 11752774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qNj9Y.jpg?s=128&g=1", "display_name": "ponta", "link": "https://stackoverflow.com/users/11752774/ponta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1570036328, "creation_date": 1570034493, "question_id": 58205798, "link": "https://stackoverflow.com/questions/58205798/how-to-get-date-data-every-ten-minutes", "title": "How to get date data every ten minutes", "body": "<p>Do you know a good way to generate date data that advances each 10 minutes and put an array?</p>\n\n<pre><code>\nlet dts:Dates = new array();\n\nlet dt: Date = new Date('2019-05-03T06:00:00');\nlet dt2: Date = new Date('2019-05-03T06:00:00');\nlet dt3: Date = new Date('2019-05-03T06:00:00');\n\ndt.setMinutes(dt.getMinutes() + 10);\nconsole.log(dt);\ndt2.setMinutes(dt.getMinutes() + 10);\nconsole.log(dt2);\ndt3.setMinutes(dt2.getMinutes() + 10);\nconsole.log(dt3);\n\n\nwhile(dt.getTime()&lt;= 6 ){ // I would like from 6:00 , 6:20 ... (7:00) Is it impossible to add 7:00?\ndt.setMinutes(dt.getMinutes() + 10);\nconsole.log(dt);\n}\n</code></pre>\n"}, {"tags": ["arrays", "typescript"], "comments": [{"owner": {"reputation": 349, "user_id": 8914439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bNte.jpg?s=128&g=1", "display_name": "chautelly", "link": "https://stackoverflow.com/users/8914439/chautelly"}, "edited": false, "score": 0, "creation_date": 1570034079, "post_id": 58205582, "comment_id": 102789518, "body": "If you can turn the type of an object into a tuple of it&#39;s keys you might be able to achieve this? But since object keys are not indexed I don&#39;t think you can."}, {"owner": {"reputation": 4919, "user_id": 3399890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/171944b3f88fd2fa4bc824b4b298de4e?s=128&d=identicon&r=PG&f=1", "display_name": "robsiemb", "link": "https://stackoverflow.com/users/3399890/robsiemb"}, "edited": false, "score": 0, "creation_date": 1570034079, "post_id": 58205582, "comment_id": 102789519, "body": "There isn&#39;t a way to do this automatically, but if enforcing this constraint is critical to you, you might be better off encapsulating the entire behavior into a class (and force modifications through getters and setters instead of directly accessing the array).  This, of course, depends on how else you are using this array."}], "answers": [{"tags": [], "owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "is_accepted": false, "score": 3, "last_activity_date": 1570040142, "creation_date": 1570040142, "answer_id": 58207126, "question_id": 58205582, "link": "https://stackoverflow.com/questions/58205582/typescript-detecting-missing-ids-or-keys-in-arrays-of-objects/58207126#58207126", "title": "Typescript: detecting missing ids or keys in arrays of objects", "body": "<p>I think you cannot convert a union type to a tuple type, because tuples are ordered and unions are not. You can convert a tuple to another one though (<a href=\"https://github.com/microsoft/TypeScript/pull/26063\" rel=\"nofollow noreferrer\">mapped tuples</a>):</p>\n\n<pre><code>type ThingKeyValues = [\"a\", \"b\", \"c\"];\n\ninterface Thing&lt;K&gt; {\n    key: K\n    stuff: string\n    moreStuff: number\n  }\n\ntype Thingify&lt;T&gt; = { [P in keyof T]:  Thing&lt;T[P]&gt; }\n\ntype Things = Thingify&lt;ThingKeyValues&gt; &amp; {length: ThingKeyValues['length']}\n</code></pre>\n\n<p>Tuples support is still quite wobbly in TS, so we have to use a superfluous generic and the silly <code>length</code> union. Still, this type seems to work well:</p>\n\n<pre><code>// checks\n\nconst goodThings: Things =  [\n  {key: \"a\", stuff: \"AAA\", moreStuff: 42,},\n  {key: \"b\", stuff: \"BBB\", moreStuff: 43,},\n  {key: \"c\", stuff: \"CCC\", moreStuff: 44,},\n]\n\n// doesn't check\n\nconst badThings1: Things =  [\n  {key: \"a\", stuff: \"AAA\", moreStuff: 42,},\n  {key: \"X\", stuff: \"BBB\", moreStuff: 43,},\n  {key: \"c\", stuff: \"CCC\", moreStuff: 44,},\n]\n\n// doesn't check\n\nconst badThings2: Things =  [\n  {key: \"a\", stuff: \"AAA\", moreStuff: 42,},\n  {key: \"b\", stuff: \"BBB\", moreStuff: 43,},\n  {key: \"c\", stuff: \"CCC\", moreStuff: 44,},\n  {key: \"MORE\", stuff: \"CCC\", moreStuff: 44,},\n]\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/index.html#code/C4TwDgpgBAKgFgSwHYHMDSEQDUCGAbAVwgGcoBeKAbQCIdqAaKagIwaYGNqBdAbgCg+yYBABOAMxzto8ZCgA8aAHxQA3nygaoAa0wAuKGnWbiwAmLH6TI2UY0BbAPYiIAZVPn9SAneaijAX3U+UEhYRFQEMRA5GGUKFSoABShkbUwHMVgufTDZGMpErmVA4PBpcJRSChkIqJiKjGx8ImJlADJVPAhUYDh9GvRMXEISSgByLp64Ma4SvgB6eah2OAh2LWIBdgckEygUBwcAEwHifoqqjUojFR0QfVo2EzMLJgBBD7ZHZzcX-QAWABM9H89BudwerEYzw8TAAQgivk5XO5Xv8AMwgsEaW56DhPVEPADCJKRP0JUH+-yxfC4AkWUCODhISDGwGWq3WWx2e2YOBOFwAjOdZJcqOC8Y9oRTqB83mSUX9KcDQRL7kwABoEpXUBFwhW-WEYmk4iH46U6klEg0Uqk0ukLJZMllsjlrLTc3bsvkC0WAkWoMXXU2SugW2Gyz6Mb6Ko0q7GqM0sbURvU2pXG1Uh9XUTjh17UK3po3UrOJyUAWQA8gAlACiKYLRejyMNaNLYLpQA\" rel=\"nofollow noreferrer\">PG</a></p>\n"}, {"tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": false, "score": 1, "last_activity_date": 1570040182, "creation_date": 1570040182, "answer_id": 58207139, "question_id": 58205582, "link": "https://stackoverflow.com/questions/58205582/typescript-detecting-missing-ids-or-keys-in-arrays-of-objects/58207139#58207139", "title": "Typescript: detecting missing ids or keys in arrays of objects", "body": "<p>There is no way to enforce that all constituents of a union string literal type are set other than with your mentioned <code>Record&lt;ThingKey, Thing&gt;</code> solution unfortunately.</p>\n\n<p>However, if you can change <code>ThingKey</code> slightly to a tuple type, <code>Things</code> can be written as a <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-1.html#mapped-types-on-tuples-and-arrays\" rel=\"nofollow noreferrer\">mapped tuple type over <code>ThingKey</code></a> like this:</p>\n\n<pre><code>type ThingKey = [\"a\", \"b\", \"c\"];\n\ninterface Thing&lt;K&gt; {\n  key: K;\n  stuff: string;\n  moreStuff: number;\n}\n\n// generic type parameter needed for mapped tuple type to work\ntype Things&lt;T extends any[]&gt; = { [K in keyof T]: Thing&lt;T[K]&gt; };\n\nconst t: Things&lt;ThingKey&gt; = [\n  {\n    key: \"a\",\n    stuff: \"AAA\",\n    moreStuff: 42\n  },\n  {\n    key: \"b\",\n    stuff: \"BBB\",\n    moreStuff: 43\n  },\n  {\n    key: \"c\",\n    stuff: \"CCC\",\n    moreStuff: 44\n  }\n];\n</code></pre>\n\n<p>This solution is even more strict in that the order of items in <code>ThingKey</code> has to be preserved in the mapped type.</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAKgFgSwHYHMDSERQLxQNoBEAhgQDRQEBGZFAxgQLoDcAUC8sBAE4BmRt0eMhQAeNAD4oAbxZQoAa0wAuKGlZyAzsACuPHiq1dh6qAFsA9lwgBlHXpVJtpyt1YBfNgHpPUFBCTcCLRQoJBQYERcRKYQnFxQARAAJslQPJZmRGCQSSHaYAA20KEQLCWwiKgaIjBQEAAenEhJGlBESCB4DJK4UvhoUMgKmOY8sAwqQqg1eGjdUG6sLLTmSFohk5Uo1VPomD34stJHcoogKsRkJ1BauvoUAIJPV3JyFla2dyoALABMR25SEcZK9hucKNQgaDbvYKAAhBEvV7vGx2e7fADMAKhx1BZwu9BxmjRFwAwuSkW9LKivlBvt8ASxmCwgA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 741, "user_id": 1818285, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d502247c0e46d890571c37a5f62ced63?s=128&d=identicon&r=PG", "display_name": "Alexander Kachkaev", "link": "https://stackoverflow.com/users/1818285/alexander-kachkaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570040182, "creation_date": 1570033600, "question_id": 58205582, "link": "https://stackoverflow.com/questions/58205582/typescript-detecting-missing-ids-or-keys-in-arrays-of-objects", "title": "Typescript: detecting missing ids or keys in arrays of objects", "body": "<p>Say I have a simple type, which represents a key of a <code>Thing</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type ThingKey = \"a\" | \"b\" | \"c\"\n</code></pre>\n\n<p>I'd like to create an entry with some metadata for each value to later iterate over it or to use it as a map:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Thing {\n  key: ThingKey\n  stuff: string\n  moreStuff: number\n}\n\nconst things: Thing[] = [\n  {\n    key: \"a\",\n    stuff: \"AAA\",\n    moreStuff: 42,\n  },\n  {\n    key: \"b\",\n    stuff: \"BBB\",\n    moreStuff: 43,\n  },\n  {\n    key: \"c\",\n    stuff: \"CCC\",\n    moreStuff: 44,\n  },\n]\n\nconst thingByKey = _.keyBy(things, thing =&gt; thing.key);\n</code></pre>\n\n<p>All good so far, except that TypeScript does not care if my array has all three items or some are missing. My goal is to make sure that for every possible value in <code>ThingKey</code> there exists a single entry in <code>thigns</code>. How can I achieve this?</p>\n\n<hr>\n\n<p>I know that instead of defining an array I can go for defining a map like below and then turn it into an array. However, that requires mentioning the same key twice. This is not ideal, because it causes data repetition and also allows me to accidentally create a mismatch between the key in the object key and the key in the Thing.</p>\n\n<pre><code>export const alternativeThingByKey: Record&lt;ThingKey, Thing&gt; = {\n  a: {\n    key: \"a\",\n    stuff: \"AAA\",\n    moreStuff: 42,\n  },\n  b: {\n    key: \"b\",\n    stuff: \"BBB\",\n    moreStuff: 43,\n  },\n  c: {\n    key: \"b\", // &lt;-- oops\n    stuff: \"CCC\",\n    moreStuff: 44,\n  },\n}\n\nexport const alternativeThings = Object.values(alternativeThingByKey)\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 35803, "user_id": 3858469, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Lf9q4.png?s=128&g=1", "display_name": "Aravind", "link": "https://stackoverflow.com/users/3858469/aravind"}, "edited": false, "score": 0, "creation_date": 1570033047, "post_id": 58205420, "comment_id": 102788997, "body": "can you create a stackblitz to reproduce this"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1570034130, "post_id": 58205420, "comment_id": 102789534, "body": "Note that your HTML is invalid; a <code>&lt;tr&gt;</code> cannot be the child of a <code>&lt;div&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8070, "user_id": 2078685, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SD5yb.jpg?s=128&g=1", "display_name": "Saksham", "link": "https://stackoverflow.com/users/2078685/saksham"}, "is_accepted": false, "score": 0, "last_activity_date": 1570038724, "creation_date": 1570038724, "answer_id": 58206783, "question_id": 58205420, "link": "https://stackoverflow.com/questions/58205420/i-need-for-all-my-radio-buttons-with-ngmodel/58206783#58206783", "title": "I need for all my radio buttons with [(ngModel)]", "body": "<p>There are a lot of mistakes in your code. To point out a few</p>\n\n<p>You cannot have a <code>tr</code> inside a <code>div</code> tag\nYou have quotes missing in many of your properties\n<code>input</code> tags do not need a closing tag\nand so on</p>\n\n<p>Assuming that you have categories as</p>\n\n<pre><code>categories: any[] = [\n{\n  id: 1,\n  name: \"Category 1\"\n},\n{\n  id: 2,\n  name: \"Category 2\"\n},\n{\n  id: 3,\n  name: \"Category 3\"\n},\n{\n  id: 4,\n  name: \"Category 4\"\n}\n];\n</code></pre>\n\n<p>your template should look like</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr class=\"categories\" *ngFor=\"let category of categories\"&gt;\n        &lt;td&gt;\n            &lt;input type=\"radio\" id=\"{{category.id}}\" name=\"category\" value=\"{{category.id}}\" (click)=\"SelectCategory(category)\"&gt;\n          &lt;label for ={{category.id}}&gt;{{category.name}}&lt;/label&gt;\n      &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>and you can access the selected category in your component class as</p>\n\n<pre><code>this.SelectCategory = category;\n</code></pre>\n\n<p>Stackblitz at <a href=\"https://stackblitz.com/edit/angular-k7fp7v\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-k7fp7v</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570038724, "creation_date": 1570032939, "last_edit_date": 1570033178, "question_id": 58205420, "link": "https://stackoverflow.com/questions/58205420/i-need-for-all-my-radio-buttons-with-ngmodel", "title": "I need for all my radio buttons with [(ngModel)]", "body": "<p>I am getting only one of my buttons selected when I only need one. When I click on any button only the last button gets selected.</p>\n\n<pre><code>component.html\n&lt;input type=\"button\" (click)=\"someFunction(categoryInput.value)\" value=\"click me too\" /&gt;\n      &lt;div id=\"categorybox\"&gt;\n      &lt;tr  class=\"categories\" *ngFor=\"let category of categories\"&gt;\n        &lt;td&gt;\n            &lt;input type=\"radio\"  id={{category.categoryName}} [(ngModel)]=selectedCategory name=\"category\" value=\"{{category}}\" (click)=selectCategory(category)/&gt;\n\n\n          &lt;label for ={{category.category}} &gt;{{category.categoryName}}&lt;/label&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n</code></pre>\n\n<pre><code>component.ts\nexport class HomeComponent implements OnInit {\n  page= 0;\n  home: Home[];\n  categories: Category[];\n  selectedCategory: Category;\n  selectCategory (category) {\n    console.log(category.category);\n    // do something here\n    // this.selectedCategory will be the selected value\n    // the category will be the value that was just selected\n }\n</code></pre>\n"}, {"tags": ["typescript", "vue.js", "vue-component", "nuxt.js", "asyncdata"], "answers": [{"tags": [], "owner": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "is_accepted": true, "score": 2, "last_activity_date": 1570272904, "creation_date": 1570272904, "answer_id": 58247641, "question_id": 58205391, "link": "https://stackoverflow.com/questions/58205391/nuxtjs-use-asyncdata-method-in-layout-or-component/58247641#58247641", "title": "NuxtJS - Use asyncData method in layout or component", "body": "<p>fetch and asyncData works only for pages, as it stated in <a href=\"https://nuxtjs.org/api/pages-fetch/\" rel=\"nofollow noreferrer\">documentation</a>. If you need something to get data on each page, use <a href=\"https://nuxtjs.org/guide/vuex-store/#the-nuxtserverinit-action\" rel=\"nofollow noreferrer\">nuxtServerInit</a></p>\n\n<pre><code>actions: {\n  async nuxtServerInit({ dispatch }) {\n    await dispatch('core/load')\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 1580234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gRxP.jpg?s=128&g=1", "display_name": "King Holly", "link": "https://stackoverflow.com/users/1580234/king-holly"}, "edited": false, "score": 0, "creation_date": 1603951535, "post_id": 62965947, "comment_id": 114199673, "body": "I am also noticing issues with <code>async fetch()</code> when combined with <code>target: &quot;static&quot;</code> in my Nuxt config. <code>fetchOnServer: false</code> fixes my issue for some components, but when applied to others, it breaks my build...Still troubleshooting."}, {"owner": {"reputation": 720, "user_id": 4134062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a866ed97b151451c2f9f7ed31593b6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Sonn", "link": "https://stackoverflow.com/users/4134062/mark-sonn"}, "reply_to_user": {"reputation": 306, "user_id": 1580234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gRxP.jpg?s=128&g=1", "display_name": "King Holly", "link": "https://stackoverflow.com/users/1580234/king-holly"}, "edited": false, "score": 0, "creation_date": 1604281898, "post_id": 62965947, "comment_id": 114291352, "body": "Make another Stack Overflow question and tag me, I&#39;ll see if I can see something obvious. If not, you might need to make a Github issue."}, {"owner": {"reputation": 306, "user_id": 1580234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gRxP.jpg?s=128&g=1", "display_name": "King Holly", "link": "https://stackoverflow.com/users/1580234/king-holly"}, "edited": false, "score": 0, "creation_date": 1604365963, "post_id": 62965947, "comment_id": 114320499, "body": "Our current solution which my coworker found is to do <code>created() { this.$fetch(); }</code> I asked him about it and his theory is that in the server <code>mounted()</code> won&#39;t run until <code>created()</code> is done. Since we call the fetch API in the created lifecycle method, the data will be available when the mounted lifecycle method runs. The QA passed, so I am assuming this method works for our use case of fetching yaml translation files on build."}, {"owner": {"reputation": 720, "user_id": 4134062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a866ed97b151451c2f9f7ed31593b6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Sonn", "link": "https://stackoverflow.com/users/4134062/mark-sonn"}, "reply_to_user": {"reputation": 306, "user_id": 1580234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gRxP.jpg?s=128&g=1", "display_name": "King Holly", "link": "https://stackoverflow.com/users/1580234/king-holly"}, "edited": false, "score": 1, "creation_date": 1604646365, "post_id": 62965947, "comment_id": 114415686, "body": "Glad you got it working, still worth making a Github issue so they they can either fix this or add it to the docs. Good luck with the rest of your project :)"}], "tags": [], "owner": {"reputation": 720, "user_id": 4134062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a866ed97b151451c2f9f7ed31593b6?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Sonn", "link": "https://stackoverflow.com/users/4134062/mark-sonn"}, "is_accepted": false, "score": 2, "last_activity_date": 1595057899, "creation_date": 1595057899, "answer_id": 62965947, "question_id": 58205391, "link": "https://stackoverflow.com/questions/58205391/nuxtjs-use-asyncdata-method-in-layout-or-component/62965947#62965947", "title": "NuxtJS - Use asyncData method in layout or component", "body": "<p>The new <code>fetch</code> on <code>Nuxt &gt;= 2.12</code> now supports fetching on the <code>layout</code> and <code>component</code> level.</p>\n<p>Right now it's slightly broken for me on the <code>layout</code> level for my statically generated site so I use <code>fetchOnServer: false</code>. By the time future people read this it'll hopefully be fixed, so feel free to edit this out.</p>\n<p>Here's some useful reading material :)</p>\n<p><a href=\"https://nuxtjs.org/api/pages-fetch/\" rel=\"nofollow noreferrer\">Docs</a></p>\n<p><a href=\"https://nuxtjs.org/blog/understanding-how-fetch-works-in-nuxt-2-12\" rel=\"nofollow noreferrer\">General guide</a></p>\n<p><a href=\"https://nuxtjs.org/blog/going-full-static/\" rel=\"nofollow noreferrer\">Guide for static sites</a></p>\n"}], "owner": {"reputation": 1628, "user_id": 8118350, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iZCsU.jpg?s=128&g=1", "display_name": "pirmax", "link": "https://stackoverflow.com/users/8118350/pirmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5863, "favorite_count": 1, "accepted_answer_id": 58247641, "answer_count": 2, "score": 2, "last_activity_date": 1595057899, "creation_date": 1570032826, "last_edit_date": 1591022637, "question_id": 58205391, "link": "https://stackoverflow.com/questions/58205391/nuxtjs-use-asyncdata-method-in-layout-or-component", "title": "NuxtJS - Use asyncData method in layout or component", "body": "<p>How I can use <code>asyncData</code> in layout or component (<em>forbidden apparently</em>) ?</p>\n\n<p>Because my sidebar component is used in default layout, and I need to use <code>asyncData</code> to display data from backend.\nAnd if I use Vuex to fetch data... I don't know how I can fetch this with global on every page.</p>\n\n<h1>My layout component annotation:</h1>\n\n<pre><code>  @Component({\n    components: {\n      LeftDrawer\n    },\n    async asyncData({ app }) {\n      const latestPosts = await app.$axios.get(`/posts/latest`);\n\n      return {\n        latestPosts: latestPosts.data,\n      };\n    }\n  })\n</code></pre>\n"}, {"tags": ["typescript", "google-docs-api"], "answers": [{"comments": [{"owner": {"reputation": 1313, "user_id": 557552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a98bd2469136870336881976f5787a6e?s=128&d=identicon&r=PG", "display_name": "Raven", "link": "https://stackoverflow.com/users/557552/raven"}, "edited": false, "score": 0, "creation_date": 1570035913, "post_id": 58205208, "comment_id": 102790372, "body": "Thank you for your answer! The <code>in</code> typeguard will work for my case. The second example won&#39;t be as interesting as I&#39;m trying to enforce exclusivity. Ideally I&#39;d like an operator that accepts only one single option out of a list (OnlyOneOf&lt;A,B,C..&gt;)"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 1, "last_activity_date": 1570032070, "creation_date": 1570032070, "answer_id": 58205208, "question_id": 58204946, "link": "https://stackoverflow.com/questions/58204946/typescript-function-overloading-with-type-literals/58205208#58205208", "title": "Typescript function overloading with type literals", "body": "<p>I think you example would work better with a single overload and a union. The only thing you need to do if yo have a union is to discriminate the values somehow.</p>\n\n<p>One option would be to use and <code>in</code> typeguard:</p>\n\n<pre><code>export function insertText(init: { text: string, index: number } | { text: string, segmentId?: string }): docs_v1.Schema$Request {\n  return {\n    insertText: {\n      text: init.text,\n      ...('index' in init &amp;&amp; { location: { index: init.index } }),\n      ...(!('index' in init) &amp;&amp; { endOfSegmentLocation: { segmentId: init.segmentId } }),\n    }\n  }\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBAOwIYFtgGcxIMbDgEwm3QH0A3ARjgG85RJY4BLBGYKAMxzwGVsALYCiQASAErAAjgFcM8agF8A3HGUAoNQHpNcAApQIZJvmD46IVGAA2wNfWjwO0hNhhMICZgnTsYAFVAYAAoWJhgALho4NhAIuHQYKBYAcwAaLxMQSIRpFAAjdlU4AB8omLiEpIQ0+OBktFYASXwAfkjKlNUASkjCYnIKADo+QWFxKVkEmjU4OChgGGkoT2oZ2a8fWADYyNX19fLI0JhB8tS1-cGroIByFkybry8wuAAyV6irIiQ3D12M0BHBBhQb3UBFBRdc77WZXQZBACEtzBIEeLGeMC6bw+tGACHwAHkODw6g0YAAZb6-BD-Hz1PEwZpAkF0snNCFQi6qNYKNQKIA\" rel=\"nofollow noreferrer\">Play</a></p>\n\n<p>Or if you add <code>index</code> to both options in the union, but with the extra <code>index</code> definition having type <code>null | undefined</code> you can also use <code>== null</code>:</p>\n\n<pre><code>export namespace docs_v1 { export interface Schema$Request {}; };\n\n// Provided example\nexport function insertText(init: { text: string, index: number } | { text: string, index?: undefined | null; segmentId?: string }): docs_v1.Schema$Request {\n  return {\n    insertText: {\n      text: init.text,\n      ...(init.index != null &amp;&amp; { location: { index: init.index } }),\n      ...(init.index == null &amp;&amp; { endOfSegmentLocation: { segmentId: init.segmentId } }),\n    }\n  }\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBAOwIYFtgGcxIMbDgEwm3QH0A3ARjgG85RJY4BLBGYKAMxzwGVsALYCiQASAErAAjgFcM8agF8A3HGUAoNQHpNcAApQIZJvmD46IVGAA2wNfWjwO0hNhhMICZgnTsYAFVAYAAoWJhgALho4NhAIuHQYKBYAcwAaLxMQSIRpFAAjdlU4AB8omLiEpIQ0jNAAfkjnEw4WUxLEaSsrFR9ktFYASXwG+MSU1QBKSMJicgoAOj5BYXEpWQSaNTg4KGAYaShPai3trx9YANjI49PT8sjQmHny1JPb+Y+QhDD5lky4ACEAF4Ol04AAycFRKxEJBuDzXWpZLw-P6gIoKCavW7bD7zL6ohD-IEgnJgyFRYBEgDyHB4wD6VJgABlYfCEIjev0YEMHt8nlymUMMVi3qoTgo1AogA\" rel=\"nofollow noreferrer\">Play</a></p>\n"}], "owner": {"reputation": 1313, "user_id": 557552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a98bd2469136870336881976f5787a6e?s=128&d=identicon&r=PG", "display_name": "Raven", "link": "https://stackoverflow.com/users/557552/raven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570032070, "creation_date": 1570031063, "question_id": 58204946, "link": "https://stackoverflow.com/questions/58204946/typescript-function-overloading-with-type-literals", "title": "Typescript function overloading with type literals", "body": "<p>I would like to define an overloaded function with named parameters in typescript. The following code executes but will give me warnings on <code>init.index</code> not existing on one of the function signatures.</p>\n\n<p>The reason I want to overload is to provide mutually exclusive properties on the object as defined in the <a href=\"https://developers.google.com/docs/api/reference/rest/v1/documents/request#inserttextrequest\" rel=\"nofollow noreferrer\">docs</a> but which are not as such defined in the official <a href=\"https://github.com/googleapis/google-api-nodejs-client/blob/master/src/apis/docs/v1.ts#L1132\" rel=\"nofollow noreferrer\">library</a>.</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>export function insertText(init: { text: string, index: number }): docs_v1.Schema$Request;\nexport function insertText(init: { text: string, segmentId?: string }): docs_v1.Schema$Request {\n  return {\n    insertText: {\n      text: init.text,\n      ...(init.index &amp;&amp; { location: { index: init.index } }),\n      ...(!init.index &amp;&amp; { endOfSegmentLocation: { segmentId: init.segmentId } }),\n    }\n  }\n}\n</code></pre>\n\n<p>I've provided a <a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBAOwIYFtgGcxIMbDgEwm3QH0A3ARjgG85RJY4BLBGYKAMxzwGVsALYCiQASAErAAjgFcM8agF8A3HGUAoNQHpNcAApQIZJvmD46IVGAA2wNfWjwO0hNhhMICZgnTsYAFVAYAAoWJhgALho4NhAIuHQYKBYAcwAaLxMQSIRpFAAjdlUASkjCYnIKADo+QWFxKVkEpTtwBzgnFzcPLx9YANiQhDDI2hi4hKSENPjgZLRWAEl8AH5IiZTi0qJSSmqBIVEJGTkaNTg4KGAYaShPajPznt9+uPvHx7HI0JhKsdSH96VIGDMKVFiZOAAMkhUSsRCQXQQIwyoC+Qx+4NAqmK-3e5yBlSCAEJvmCEBDoVFgOSAPIcHizeYwAAy8MRyJ8c2pMCWaNBnKZS2xCiKuMeCgeEolWh0ABEmBwOOwruZLDY4BAOHB+BAAO5wBZwXUQaRWMxWJgAazwMAgcCQYGsAE92s5XO5PIZ2HCkPgUi0GI43Yi4NhLgjgAA5VCmMRIKbAEERB60ZBoNaJFLpBJIWDZXIFKDpan4fP5QoKOAAHyiaeAGcm0xzecQBfY6RsUxg-DLhdUahKBG2FT2tUODRObwuVxudwBofDbGjaHwcYTI3n5zrfJ+dbF7yg8eS9dOeMezZ55NRXn5MFzMH3eJLCyvWRvPxL1ZrpIvcAA1O+lSdsk3abv27wSucUoaNoBomEgVgEHIUDSK4NymKGEAmAGbQdO63QsL0-iBLKyGodclz4EEoyBA2WYom+OTllAmxDuUuw1Ac9THE0OGMHhIaEc8JFkWhlHUdEtHxJmUzZoy3JLKs0mNqxZQ7FUnF1EcjTyA8lwUXO7xCX0UlTu8fxgQSgwUjCtBwtgCIesimIgMKoqWcCJKvlCtl0LS9LyawrIOeyUQCgpZiViKj6Qf2EpAA\" rel=\"nofollow noreferrer\">typescript playground</a> with examples of the code and errors I'm seeing.</p>\n\n<p>Additionally I would like to destructure the object parameter as described <a href=\"https://simonsmith.io/destructuring-objects-as-function-parameters-in-es6\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570031001, "post_id": 58204759, "comment_id": 102788007, "body": "You should share a bit more code, specifically the parts where <code>climbs</code> is created."}, {"owner": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570031171, "post_id": 58204759, "comment_id": 102788089, "body": "Updated my question"}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570031285, "post_id": 58204759, "comment_id": 102788159, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14220321/how-do-i-return-the-response-from-an-asynchronous-call\">How do I return the response from an asynchronous call?</a>"}, {"owner": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570031975, "post_id": 58204759, "comment_id": 102788507, "body": "@Evert How/why are you considering this to be a duplicate.  I don&#39;t see anywhere on that linked question about TypeScript or the .map array method, which is specific to my question."}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570034703, "post_id": 58204759, "comment_id": 102789798, "body": "Sorry, it was still only a partial sample, so I jumped to the conclusion that you were using a variable before it was available. Sorry if that was a wrong assumption"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 8914439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bNte.jpg?s=128&g=1", "display_name": "chautelly", "link": "https://stackoverflow.com/users/8914439/chautelly"}, "edited": false, "score": 0, "creation_date": 1570033216, "post_id": 58205474, "comment_id": 102789071, "body": "Or <code>React.useState([] as Props[])</code>"}, {"owner": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "edited": false, "score": 0, "creation_date": 1570033345, "post_id": 58205474, "comment_id": 102789152, "body": "Thank you, that worked.  Now I just need to learn why that is."}, {"owner": {"reputation": 349, "user_id": 8914439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bNte.jpg?s=128&g=1", "display_name": "chautelly", "link": "https://stackoverflow.com/users/8914439/chautelly"}, "reply_to_user": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "edited": false, "score": 0, "creation_date": 1570033706, "post_id": 58205474, "comment_id": 102789338, "body": "Are familiar with type generics?"}, {"owner": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "edited": false, "score": 0, "creation_date": 1570036939, "post_id": 58205474, "comment_id": 102790819, "body": "I&#39;m not, but just read up on it.  It sounds like you are making a generic start so that you can use any kind of type for later.  Does that not go against the point of TypeScript?"}, {"owner": {"reputation": 349, "user_id": 8914439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bNte.jpg?s=128&g=1", "display_name": "chautelly", "link": "https://stackoverflow.com/users/8914439/chautelly"}, "reply_to_user": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "edited": false, "score": 1, "creation_date": 1570039139, "post_id": 58205474, "comment_id": 102791807, "body": "The compiler can&#39;t infer the type of your empty array just by looking in other locations how you might be using . You have to let TypeScript know what they type of your empty array is so that it can properly infer the usage of <code>useState</code>"}], "tags": [], "owner": {"reputation": 349, "user_id": 8914439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bNte.jpg?s=128&g=1", "display_name": "chautelly", "link": "https://stackoverflow.com/users/8914439/chautelly"}, "is_accepted": true, "score": 1, "last_activity_date": 1570033167, "creation_date": 1570033167, "answer_id": 58205474, "question_id": 58204759, "link": "https://stackoverflow.com/questions/58204759/confused-on-how-to-write-map-method-with-typescript/58205474#58205474", "title": "Confused on how to write .map method with TypeScript", "body": "<p>It is because you are calling <code>useState</code> with an empty array which defaults to type <code>never[]</code>. Change it to:</p>\n\n<pre><code>React.useState&lt;Props[]&gt;([])\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 1013518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/69f9d8b840ea19486772c69892e24b13?s=128&d=identicon&r=PG", "display_name": "pingeyeg", "link": "https://stackoverflow.com/users/1013518/pingeyeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58205474, "answer_count": 1, "score": 0, "last_activity_date": 1570033167, "creation_date": 1570030417, "last_edit_date": 1570033125, "question_id": 58204759, "link": "https://stackoverflow.com/questions/58204759/confused-on-how-to-write-map-method-with-typescript", "title": "Confused on how to write .map method with TypeScript", "body": "<p>I'm trying to understand how to add TypeScript to my .map method, but at the moment, I'm getting the following error message.  I'm not really sure what the 'never' keyword signifies either.</p>\n\n<pre><code>TS2339: Property 'fname' does not exist on type 'never'\n</code></pre>\n\n<p>The code I'm using is:</p>\n\n<pre><code>const [climbs, setClimbs] = useState([]);\n...\nuseEffect(() =&gt; {\n  async function data() {\n    try {\n      const getClimbs = await axios.get(\"http://localhost:4000/climbs\");\n      setClimbs(getClimbs.data);\n    } catch (err) {}\n  }\n  data();\n}, []);\n...\n&lt;div className=\"list\"&gt;\n  {climbs.map(climb =&gt; {\n    return (\n      &lt;&gt;\n        &lt;div className=\"list-name\"&gt;{climb.fname}&lt;/div&gt;\n        &lt;div className=\"list-recent-climb\"&gt;\n          {climb.climb} - {climb.grade} - {climb.location}\n        &lt;/div&gt;\n        &lt;div className=\"list-date\"&gt;{climb.date}&lt;/div&gt;\n      &lt;/&gt;\n    );\n  })}\n&lt;/div&gt;\n...\n</code></pre>\n\n<p>I also tried adding a type object at the top to see if that would clear things up.  I'm new to TypeScript so trying to get my bearings.</p>\n\n<pre><code>type Props = {\n  fname: String,\n  climb: String,\n  grade: String,\n  location: String,\n  date: Date\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "variables", "tags", "icons"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12154580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6OGWH.png?s=128&g=1", "display_name": "redrest", "link": "https://stackoverflow.com/users/12154580/redrest"}, "edited": false, "score": 1, "creation_date": 1570032746, "post_id": 58204703, "comment_id": 102788858, "body": "The <code>[class]=&quot;your_variable&quot;</code> worked well. I found out I was referencing the variable to the wrong class as well. Thanks!"}], "tags": [], "owner": {"reputation": 366, "user_id": 5945004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5c8de523641e5745a12995c3489823?s=128&d=identicon&r=PG&f=1", "display_name": "RandomCode", "link": "https://stackoverflow.com/users/5945004/randomcode"}, "is_accepted": true, "score": 0, "last_activity_date": 1570030199, "creation_date": 1570030199, "answer_id": 58204703, "question_id": 58204601, "link": "https://stackoverflow.com/questions/58204601/how-to-place-a-variable-inside-of-an-icon-class-on-angular-7/58204703#58204703", "title": "How to place a variable inside of an icon class on angular 7", "body": "<p>Class can be inputted with <code>class=\"{{ your_variable }}\"</code> or you can do <code>[class]=\"your_variable\"</code>, you can also use <code>ngClass</code></p>\n"}], "owner": {"reputation": 11, "user_id": 12154580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6OGWH.png?s=128&g=1", "display_name": "redrest", "link": "https://stackoverflow.com/users/12154580/redrest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 58204703, "answer_count": 1, "score": -2, "last_activity_date": 1570030199, "creation_date": 1570029919, "question_id": 58204601, "link": "https://stackoverflow.com/questions/58204601/how-to-place-a-variable-inside-of-an-icon-class-on-angular-7", "title": "How to place a variable inside of an icon class on angular 7", "body": "<p>I want to put an icon on my page (which is inside of an <code>*ngfor</code>), f.i:</p>\n\n<p><code>&lt;i class=\"var\"&gt;&lt;/i&gt;</code></p>\n\n<p>and I want to place a variable (which is given by my service class) where it is written 'var' in order to place different icons.</p>\n"}, {"tags": ["reactjs", "typescript", "styled-components"], "answers": [{"tags": [], "owner": {"reputation": 1338, "user_id": 8120827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0646c9ea234df80d26c35e88b97d730?s=128&d=identicon&r=PG&f=1", "display_name": "Ga&#235;l S", "link": "https://stackoverflow.com/users/8120827/ga%c3%abl-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1570029692, "creation_date": 1570029692, "answer_id": 58204552, "question_id": 58204499, "link": "https://stackoverflow.com/questions/58204499/control-styling-attribute-of-component-via-props/58204552#58204552", "title": "Control styling attribute of component via props", "body": "<p>I guess it should be:</p>\n\n<p><code>font-weight: ${ props =&gt; isCurrent(props)};</code></p>\n\n<p>instead of </p>\n\n<p><code>font-weight: ${ props =&gt; isCurrent(isCurrent)};</code></p>\n"}, {"tags": [], "owner": {"reputation": 273, "user_id": 7179418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7Ecj.jpg?s=128&g=1", "display_name": "Maria", "link": "https://stackoverflow.com/users/7179418/maria"}, "is_accepted": false, "score": 3, "last_activity_date": 1570029975, "creation_date": 1570029975, "answer_id": 58204625, "question_id": 58204499, "link": "https://stackoverflow.com/questions/58204499/control-styling-attribute-of-component-via-props/58204625#58204625", "title": "Control styling attribute of component via props", "body": "<p>You don't need a function, you should just be able to do the logic inline like so:</p>\n\n<pre><code>export type BreadcrumbItemProps = {\n  isCurrent?: boolean;\n};\n\nexport const Item = styled.span&lt;BreadcrumbItemProps&gt;`\n    display: inline;\n    padding: 10px;\n    cursor: default;\n    font-weight: ${ props.isCurrent ? 'normal' : 'bold'};\n`;\n</code></pre>\n"}], "owner": {"reputation": 1530, "user_id": 2856360, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Zh14f.png?s=128&g=1", "display_name": "Tomasz Waszczyk", "link": "https://stackoverflow.com/users/2856360/tomasz-waszczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58204552, "answer_count": 2, "score": 0, "last_activity_date": 1570029975, "creation_date": 1570029484, "question_id": 58204499, "link": "https://stackoverflow.com/questions/58204499/control-styling-attribute-of-component-via-props", "title": "Control styling attribute of component via props", "body": "<p>Having following code:</p>\n\n<pre><code>export type BreadcrumbItemProps = {\n  isCurrent?: boolean;\n};\n\nconst isCurrent = (props: { isCurrent?: boolean }) =&gt; props.isCurrent ? 'normal' : 'bold';\n\nexport const Item = styled.span&lt;BreadcrumbItemProps&gt;`\n  display: inline;\n  padding: 10px;\n  cursor: default;\n  font-weight: ${ props =&gt; isCurrent(isCurrent)};\n`;\n</code></pre>\n\n<p>Depending on <code>isCurrent</code> props I want to control font, either normal or bold, trying to do it I got following error:</p>\n\n<blockquote>\n  <p>const isCurrent: (props: {\n      isCurrent?: boolean | undefined; }) => \"normal\" | \"bold\" Type '(props: { isCurrent?: boolean | undefined; }) => \"normal\" | \"bold\"'\n  has no properties in common with type '{ isCurrent?: boolean |\n  undefined; }'.ts(2559)</p>\n</blockquote>\n"}, {"tags": ["typescript", "dynamic", "tostring", "typeof", "keyof"], "comments": [{"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1575875603, "post_id": 58204359, "comment_id": 104698505, "body": "This is very Heavy <a href=\"https://meta.stackexchange.com/a/66378/171858\">XY Problem you&#39;ve given us</a>.  You have a problem <b>X</b> and instead of asking us, &quot;I have this problem&quot;.  You instead have provided <b>Y</b> which is your attempted solution that doesn&#39;t work and want us to fix that.  Instead you should say I have problem <b>X</b> I&#39;m attempting to solve it using <b>Y</b> but it&#39;s not working, how do I solve for X (maybe using Y maybe not)."}], "owner": {"reputation": 89, "user_id": 11365026, "user_type": "registered", "profile_image": "https://graph.facebook.com/2379053755647335/picture?type=large", "display_name": "Herman Jansson", "link": "https://stackoverflow.com/users/11365026/herman-jansson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1575875157, "creation_date": 1570029084, "last_edit_date": 1575875157, "question_id": 58204359, "link": "https://stackoverflow.com/questions/58204359/get-the-key-of-a-specific-variable-inside-a-object-to-string-in-typecript-javasc", "title": "Get the key of a specific variable inside a Object to string in typecript/javascript", "body": "<p>I want to access an object dynamically like object[variableName] and not object[\"actual name of variable\"].</p>\n\n<p>Okay. lets say I have an object that looks like this:</p>\n\n<pre><code>export class Object {\n  \"key\": string;\n  \"name\": string;\n  \"address\": string;\n}\n</code></pre>\n\n<p>I would like to access this object dynamically with it's properties. I need to get the string of a specific name inside object like \"key\"/ \"name\" or \"address\". I do not want to get them all with typeof Object, not what I'm looking for. </p>\n\n<p>I'm looking for a dynamic way to access these keys, like below:</p>\n\n<pre><code>export function (item: Object, key: string): keyof Object | string{\n\n}\n\n</code></pre>\n\n<p>in order to then access the objects variable like following:</p>\n\n<pre><code>const object: Object;\nconst variableName = getVariableName(object, object.test); // i want it to return \"test\". \n\nobject[variableName] = null;\n</code></pre>\n\n<p>I don't want to access it like object[\"test\"]. because it has to be dynamic.</p>\n\n<p>I know how to do this for a simple variable and not a object: </p>\n\n<pre><code>let myVar = 'something';\nlet nameObject = {myVar};\nlet getVarNameFromObject = (nameObject) =&gt; {\n  for(let varName in nameObject) {\n    return varName;\n  }\n}\nlet varName = getVarNameFromObject(nameObject);\n</code></pre>\n\n<p>but this only works for {myVar} not for {object.test} </p>\n\n<p>help me out :)</p>\n\n<p>I tried different keyof typeof in methods but I can't figure it out.</p>\n\n<h2>UPDATE</h2>\n\n<p>This is what I found, I am not very satisfied with this solution though:</p>\n\n<pre><code>\n\nconst key = getKey&lt;TextboxQuestion&gt;(({key}) =&gt; null);\n\nexport var getKey = &lt;T&gt;(fn: (object: T) =&gt; null): string =&gt; fn.toString().match(/{([^;]*)}/)[1].replace(' ', '');\n\n</code></pre>\n\n<p>why this kindof works is because key it promises that key exists in Textboxquestion and it does, if I write something that doesn't exist in textboxquestion it throws compile error. but I don't want to say its a textboxquestion either :D I want that to be discovered somehow.</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 3, "creation_date": 1570028629, "post_id": 58204184, "comment_id": 102786608, "body": "<code>filter does not exist on type &#39;NodeType&#39;</code> that makes it sound like <code>list</code> is a <code>NodeType</code>, not an array. How was <code>list</code> created?"}, {"owner": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "reply_to_user": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1570039681, "post_id": 58204184, "comment_id": 102792049, "body": "yes list is of NodeType returned by some API and I want to cast it into an array only for applying filter. In pure javascript I don&#39;t need to, it works in chrome console."}], "answers": [{"comments": [{"owner": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "edited": false, "score": 0, "creation_date": 1570039321, "post_id": 58204304, "comment_id": 102791891, "body": "list must be an array for filter method."}, {"owner": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "edited": false, "score": 0, "creation_date": 1570040293, "post_id": 58204304, "comment_id": 102792309, "body": "but thanks, It makes me realize I call the right method when I tested in console and a wrong one in my code editor."}], "tags": [], "owner": {"reputation": 346, "user_id": 11498738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebfafa09bbae02329137769c747bbdf?s=128&d=identicon&r=PG", "display_name": "gekkedev", "link": "https://stackoverflow.com/users/11498738/gekkedev"}, "is_accepted": false, "score": -1, "last_activity_date": 1570028917, "creation_date": 1570028917, "answer_id": 58204304, "question_id": 58204184, "link": "https://stackoverflow.com/questions/58204184/cast-array-with-filter-method/58204304#58204304", "title": "Cast array with filter method", "body": "<p>Your error message complains about the <code>filter</code> method not being available on a <code>NodeType</code>\nIn your example you specified a <code>NodeType</code> <strong>Array</strong>.</p>\n\n<p>Try this:</p>\n\n<pre><code>&lt;NodeType&gt;list\n</code></pre>\n\n<p>It's still not an array though.</p>\n"}, {"comments": [{"owner": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "edited": false, "score": 0, "creation_date": 1570039465, "post_id": 58204321, "comment_id": 102791967, "body": "of course it works in pure javascript: it&#39;s just an array of objects."}, {"owner": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "reply_to_user": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "edited": false, "score": 0, "creation_date": 1570039953, "post_id": 58204321, "comment_id": 102792165, "body": "@user310291, my point is that &quot;just an array&quot; isn&#39;t always what it seems. The DOM contains arrays that aren&#39;t true JavaScript arrays. These arrays do have a <code>length</code> property, and they can be accessed by numeric indices, but they <i>don&#39;t</i> have methods like <code>filter</code>, <code>map</code>, <code>forEach</code>, etc. Casting doesn&#39;t, and can&#39;t, add methods that aren&#39;t there in the first place."}, {"owner": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "edited": false, "score": 0, "creation_date": 1570040134, "post_id": 58204321, "comment_id": 102792245, "body": "ok thanks, I realized I call the right method when I tested in console and a wrong one in my code editor."}], "tags": [], "owner": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "is_accepted": true, "score": 1, "last_activity_date": 1570028964, "creation_date": 1570028964, "answer_id": 58204321, "question_id": 58204184, "link": "https://stackoverflow.com/questions/58204184/cast-array-with-filter-method/58204321#58204321", "title": "Cast array with filter method", "body": "<p>Are you sure this <em>exact same thing</em> works in pure JavaScript, not just something sort of like it? If <code>list</code> is an array which comes from the browser DOM, it's likely that really, truly it doesn't have a <code>filter</code> method. Those DOM arrays are only \"<code>ArrayLike</code>\", not true JavaScript arrays.</p>\n\n<p>Try <code>Array.from(list)</code> or <code>Array.from(list as NodeType[])</code> and see if that helps.</p>\n"}], "owner": {"reputation": 32972, "user_id": 310291, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&d=identicon&r=PG", "display_name": "user310291", "link": "https://stackoverflow.com/users/310291/user310291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58204321, "answer_count": 2, "score": -1, "last_activity_date": 1570040226, "creation_date": 1570028468, "last_edit_date": 1570040226, "question_id": 58204184, "link": "https://stackoverflow.com/questions/58204184/cast-array-with-filter-method", "title": "Cast array with filter method", "body": "<p>I have to cast this:</p>\n\n<pre><code>let selections = list.filter(obj =&gt; obj.type === \"myType\");\n</code></pre>\n\n<p>I get an error with a filter which says </p>\n\n<blockquote>\n  <p>filter does not exist on type 'NodeType'</p>\n</blockquote>\n\n<p>I tried to follow these suggestions\n<a href=\"https://stackoverflow.com/questions/12792695/typescript-casting-arrays\">TypeScript casting arrays</a></p>\n\n<pre><code>let selections = &lt;NodeType[]&gt;list.filter(obj =&gt; obj.type === \"myType\");\n</code></pre>\n\n<p>but I still get the same error, I can't see how to fix this. \nIn pure javascript, it works.</p>\n\n<p>Update: thanks to answers below which makes me realize I call the right method when I tested in console and a wrong one in my code editor.</p>\n"}, {"tags": ["typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "edited": false, "score": 0, "creation_date": 1570028625, "post_id": 58204180, "comment_id": 102786603, "body": "What do you mind by &quot;export Property&quot; ?"}, {"owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "reply_to_user": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "edited": false, "score": 0, "creation_date": 1570028897, "post_id": 58204180, "comment_id": 102786771, "body": "Change the example to: <code>export interface Product { ... }</code> and then import the <code>Product</code> interface directly"}, {"owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "reply_to_user": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "edited": false, "score": 0, "creation_date": 1570034270, "post_id": 58204180, "comment_id": 102789602, "body": "I realized I had a typo in the original question and I fixed it"}], "answers": [{"tags": [], "owner": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "is_accepted": false, "score": 1, "last_activity_date": 1570029619, "creation_date": 1570029619, "answer_id": 58204532, "question_id": 58204180, "link": "https://stackoverflow.com/questions/58204180/nested-traversals-vs-separate-interfaces/58204532#58204532", "title": "Nested traversals vs Separate Interfaces", "body": "<p>First, note that it may be safer to replace <code>Factory['product'][0]</code> by <code>Factory['product'][number]</code>. In your case it changes nothing, but if someday you use an array with specific type for indexes you can have type errors.</p>\n\n<p>--</p>\n\n<p>Nested traversal is quite usefull when you want to say to devs that field type is <strong>from this type</strong> (Factory in your case).</p>\n\n<ul>\n<li>Good: declarative, create a symbolic link between the two types (Product and Factory).</li>\n<li>Bad: when I see <code>Factory['product'][0]</code> I have to go to Factory type to see what is the real type behind.</li>\n</ul>\n\n<p>There is not a \"best way to do\", just keep in mind your type declaration must be understable, don't use nested traversal if it doesn't follow this rule.</p>\n"}], "owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570034232, "creation_date": 1570028451, "last_edit_date": 1570034232, "question_id": 58204180, "link": "https://stackoverflow.com/questions/58204180/nested-traversals-vs-separate-interfaces", "title": "Nested traversals vs Separate Interfaces", "body": "<p>For typescript we are having a conversation as to which is better and I was wondering if there was any consensus or insight into the variations.</p>\n\n<p>Taking this as an example:</p>\n\n<pre><code>interface Product {\n  ...\n}\n\nexport interface Factory {\n  product: Product[];\n}\n\n</code></pre>\n\n<p>If we wanted to access the <code>Product</code> type elsewhere in the code is it better to use: </p>\n\n<p>1) <strong>Nested Traversal</strong></p>\n\n<pre><code>Factory['product'][0]\n</code></pre>\n\n<p>to make it clear that the product is a child of the Factory.</p>\n\n<p>or </p>\n\n<p>2) <strong>Separate interfaces</strong></p>\n\n<p>export <code>Product</code> from the example above and use it independently</p>\n\n<pre><code>Product\n</code></pre>\n\n<p>to make the code cleaner.</p>\n\n<p>Thanks for any insight!</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570029248, "post_id": 58204152, "comment_id": 102786999, "body": "Where is you submit button?"}, {"owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "reply_to_user": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570029432, "post_id": 58204152, "comment_id": 102787104, "body": "my bad, please check again"}, {"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570029665, "post_id": 58204152, "comment_id": 102787246, "body": "I have tried to create this in stackblitz. It&#39;s working, <a href=\"https://stackblitz.com/edit/angular-tempalte-driven-subkit-stack\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-tempalte-driven-subkit-stack</a>"}, {"owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "reply_to_user": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570029771, "post_id": 58204152, "comment_id": 102787297, "body": "here closing register is an array of register object   closingRegister = new Register();"}, {"owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "reply_to_user": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570029787, "post_id": 58204152, "comment_id": 102787306, "body": "how can I debug this?"}, {"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570030054, "post_id": 58204152, "comment_id": 102787481, "body": "If it&#39;s array you should use ngFor to loop the data to bind the value to model"}, {"owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "reply_to_user": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570030790, "post_id": 58204152, "comment_id": 102787891, "body": "closingRegister = &lt;Register&gt;{} ;"}, {"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570030829, "post_id": 58204152, "comment_id": 102787915, "body": "Can you add some more code"}, {"owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "reply_to_user": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570031362, "post_id": 58204152, "comment_id": 102788202, "body": "please check again"}, {"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570032527, "post_id": 58204152, "comment_id": 102788754, "body": "does console inside close method is getting printed or not?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "edited": false, "score": 0, "creation_date": 1570029136, "post_id": 58204300, "comment_id": 102786934, "body": "how can I call this?"}, {"owner": {"reputation": 99, "user_id": 11344169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022f7327c477f69c121f03b36414ae71?s=128&d=identicon&r=PG&f=1", "display_name": "Armin", "link": "https://stackoverflow.com/users/11344169/armin"}, "reply_to_user": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "edited": false, "score": 0, "creation_date": 1570030768, "post_id": 58204300, "comment_id": 102787881, "body": "in close function."}], "tags": [], "owner": {"reputation": 99, "user_id": 11344169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022f7327c477f69c121f03b36414ae71?s=128&d=identicon&r=PG&f=1", "display_name": "Armin", "link": "https://stackoverflow.com/users/11344169/armin"}, "is_accepted": false, "score": 0, "last_activity_date": 1570030093, "last_edit_date": 1570030093, "creation_date": 1570028906, "answer_id": 58204300, "question_id": 58204152, "link": "https://stackoverflow.com/questions/58204152/template-driven-form-resetting/58204300#58204300", "title": "template driven form resetting", "body": "<p>You are resetting the wrong form. Try</p>\n\n<p><code>ngForm.reset();</code></p>\n"}], "owner": {"reputation": 51, "user_id": 11426223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d4bc505a3f8e16290ebf652dd310d6?s=128&d=identicon&r=PG&f=1", "display_name": "Random", "link": "https://stackoverflow.com/users/11426223/random"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570031341, "creation_date": 1570028371, "last_edit_date": 1570031341, "question_id": 58204152, "link": "https://stackoverflow.com/questions/58204152/template-driven-form-resetting", "title": "template driven form resetting", "body": "<p>I am using template driven form in my project and I want to reset the form values after form submission. both reset and resetForm methods are not working here is the code</p>\n\n<p><strong><em>Component.html</em></strong></p>\n\n<pre><code>&lt;form #form=\"ngForm\" (ngSubmit)=\"close(form)\"&gt;\n  &lt;input type=\"number\" ngModel name =\"RevenueSale\" \n  [(ngModel)]=\"closingRegister.RevenueSale\" class=\" theme-input\" \n  placeholder=\"0.00\"&gt;\n\n  &lt;input type=\"number\" ngModel name =\"TaxCollected\" \n  [(ngModel)]=\"closingRegister.TaxCollected\" class=\" theme-input\" \n  placeholder=\"0.00\"&gt;\n\n  &lt;div class=\"col-lg-12 text-center\"&gt;\n    &lt;button (click) = \"modal.close()\" type=\"button\" class=\"btn btn-outline- \n     secondary mr-4\"&gt;CANCEL&lt;/button&gt; \n    &lt;button type=\"submit\"class=\"btn theme-btn\"&gt;CLOSE&lt;/button&gt;\n  &lt;/div&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p><strong><em>Component.ts</em></strong></p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\n\nimport { Register } from '@app/core/models/register/register';\n\nimport { NgForm } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\n@Component({\ntemplateUrl: './compoment.component.html', \n})\n export class myComponent implements OnInit, {\n closingRegister = &lt;Register&gt;{};\n constructor(private router: Router,\n private registerSerive: RegisterService,\n private toastr: ToastrService,\n )  {}\n\n ngOnInit(){\n\n  }\n\n close(form: NgForm){\n\n  //this.registerSerive.closeRegister(this.closingRegister).subscribe( \n    closedRegister =&gt; {\n    this.toastr.success('Register closed');\n    this.modalService.dismissAll();\n    console.log(form.value);\n    form.reset();  \n   //}\n   }  \n}\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 135892, "user_id": 546730, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c35af79e54306caedad37141f13de30c?s=128&d=identicon&r=PG", "display_name": "H.B.", "link": "https://stackoverflow.com/users/546730/h-b"}, "edited": false, "score": 0, "creation_date": 1570576128, "post_id": 58203873, "comment_id": 102953804, "body": "What exactly do you mean by <code>keeping type checking in place</code>? What do you intend to do when you know that the constructor has a specific type?"}], "answers": [{"comments": [{"owner": {"reputation": 278, "user_id": 8157383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mqEIG.jpg?s=128&g=1", "display_name": "Komninos", "link": "https://stackoverflow.com/users/8157383/komninos"}, "edited": false, "score": 0, "creation_date": 1570050135, "post_id": 58204120, "comment_id": 102796393, "body": "Hello! Your solution does work but involves creating an instance of <code>c</code>. We do not know what constructor arguments <code>c</code> take and thus this answer is invalid. I am looking for a way to do this without creating an instance of the class."}], "tags": [], "owner": {"reputation": 87, "user_id": 11112632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6qMiHNtON1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reZtJmOjcCAqfbLg5fWMeExRbr31Q/mo/photo.jpg?sz=128", "display_name": "Marcel", "link": "https://stackoverflow.com/users/11112632/marcel"}, "is_accepted": false, "score": 1, "last_activity_date": 1570028584, "last_edit_date": 1570028584, "creation_date": 1570028252, "answer_id": 58204120, "question_id": 58203873, "link": "https://stackoverflow.com/questions/58203873/typescript-generic-argument-comparison/58204120#58204120", "title": "Typescript generic argument comparison", "body": "<p>You can check this with <code>if(c === instanceof Lion)</code></p>\n\n<p>Example:</p>\n\n<pre><code>class BeeKeeper {\n    hasMask: boolean = true;\n}\n\nclass ZooKeeper {\n    nametag: string = 'abc';\n}\n\nclass Animal {\n    numLegs: number = 123;\n}\n\nclass Bee extends Animal {\n    keeper: BeeKeeper = new BeeKeeper();\n}\n\nclass Lion extends Animal {\n    keeper: ZooKeeper = new ZooKeeper();\n}\n\nfunction createInstance&lt;A extends Animal&gt;(c: new () =&gt; A): A {\n    const newInstance = new c();\n    if(newInstance instanceof Lion) {\n        console.log('Im a Lion');\n    }\n    return newInstance;\n}\n\ncreateInstance(Lion).keeper.nametag;  // typechecks!\ncreateInstance(Bee).keeper.hasMask;   // typechecks!\n</code></pre>\n\n<p>Hope this works and have a nice day :)</p>\n"}, {"comments": [{"owner": {"reputation": 278, "user_id": 8157383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mqEIG.jpg?s=128&g=1", "display_name": "Komninos", "link": "https://stackoverflow.com/users/8157383/komninos"}, "edited": false, "score": 0, "creation_date": 1570050047, "post_id": 58204177, "comment_id": 102796366, "body": "This does not work. <code>c</code> is not an instance of <code>Lion</code>, but <code>Lion</code> itself."}], "tags": [], "owner": {"reputation": 54, "user_id": 10109610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CaCyHb6xUkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oJtvaotdwK5mZ3UGLbjlKFfcGdsw/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/10109610/paula"}, "is_accepted": false, "score": 1, "last_activity_date": 1570028446, "creation_date": 1570028446, "answer_id": 58204177, "question_id": 58203873, "link": "https://stackoverflow.com/questions/58203873/typescript-generic-argument-comparison/58204177#58204177", "title": "Typescript generic argument comparison", "body": "<p>have you tried the following? <br> <code>if(c instanceof Lion) {</code> <br> <br>\nHope i understand your questions correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 4573, "user_id": 1832330, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/tX0As.jpg?s=128&g=1", "display_name": "zhuber", "link": "https://stackoverflow.com/users/1832330/zhuber"}, "is_accepted": true, "score": 2, "last_activity_date": 1570271478, "last_edit_date": 1570271478, "creation_date": 1570268479, "answer_id": 58247093, "question_id": 58203873, "link": "https://stackoverflow.com/questions/58203873/typescript-generic-argument-comparison/58247093#58247093", "title": "Typescript generic argument comparison", "body": "<p>You can make use of <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types\" rel=\"nofollow noreferrer\">type guards</a>.</p>\n\n<p>It would look something like this:</p>\n\n<pre><code>type Constructor&lt;T extends {} = {}&gt; = new (...args: any[]) =&gt; T;\n\nfunction typeGuard&lt;T&gt;(o: any, className: Constructor&lt;T&gt;): o is T {\n  return o === className;\n}\n\nfunction createInstance&lt;A extends Animal&gt;(c: Constructor&lt;A&gt;): A {\n    if (typeGuard(c, Lion)) {\n        return new c('Lion initialized')\n    }\n    return new c();\n}\n</code></pre>\n\n<p>Also please note the usage of <code>Constructor&lt;A&gt;</code> - you've mention that your constructors would receive parameters based on type - this can't be achieved by your implementation because your constructor definition doesn't receive any parameters and therefore you should use <code>Constructor&lt;A&gt;</code> to pass any number of parameters to constructor (it's up to you to pass correct arguments to correct type constructors).</p>\n\n<p>Taking all that into account, I'd suggest a much cleaner and simpler approach. First define map of keys and corresponding types that can be created:</p>\n\n<pre><code>type TypeMap = {\n    \"lion\": Lion,\n    \"bee\": Bee\n}\n</code></pre>\n\n<p>Then just create factory function which would suggest possible arguments (\"lion\" | \"bee\") on invoke, show error if unknown argument is entered and resolve correct return type.</p>\n\n<pre><code>function createSimpleInstance&lt;T extends keyof TypeMap&gt;(c: T): TypeMap[T] {\n    let instance: Animal;\n    switch (c) {\n        case \"lion\":\n            instance = new Lion(\"Lion initialized\");\n            break;\n        case \"bee\":\n            instance = new Bee();\n            break;\n        default:\n            throw new Error(\"Unknown type\");\n    }\n    return instance as TypeMap[T];\n}\n</code></pre>\n\n<p>Great benefit of this is that within <code>createSimpleInstance</code> you are creating exact instances of <code>Lion</code> and <code>Bee</code> which helps you with autocomplete of exact arguments thats needed for each constructor function.</p>\n\n<p>Please see <a href=\"https://www.typescriptlang.org/play/index.html#code/MYGwhgzhAEBCCm8DSiAO8BO0DeAoaB0AFpALKQDWAXNAEYD29I8YAdtALzQAuGArvADcuAL65coSDABajFPHRY8haKzABbeNzABzGhF4BLVjs7QA5GFrBzwsRPBRoAQVaH1YEDnyFWfdQAy8DoQNH7qtJhmAIwATADMduKSTgjw0PAAHtzwrAAmMK7unt4qwPSsBvzA3PQYABQAlKUqhBB8ik3CrYTllUzwAHQg9Dr15pHpxobchp6GAF7weeaN3YRiKhRomDRp8opmrPAA7nCIB5hdosmOMAGGFRnZuQUubh5eyr0VVXw1dXqADdPPojCZmt8eu1OmsfD0+hABsNRsDPHCVJtCNsFLtoLJ6JcsFxjmcCUTrvZuABPdDQADCv14-1qGAAPAAVZ45fIwbAiMz8gB8R1O0Hqg0lYAwIRobGpAG0ALrNDgijnCXAAMz4rBqj3YNPQAHE+NK8pyhfV6HLWNSADTQFIQAByGngNEZlWZAPZHKFjRo9GghhgXO+GC0fAw7GDHHjTrubs0SW1uv1T2AkbAOQAkt62MB4GznNzXoUPp4rcBPUzqqySwGaKWoSGteKjfBTeb6sBHQ8Ko1IfDWpHuNH2KSneMB+xprN5ksVo0R1iCGOJ6oxcBKeJO9AObT4ORUIKRwAiEAG880Wf2i+TG-neA3NN62aZ7M5ADK7lQzHzAxC2LLksh5N5tmpeh20PdAT2rGgOUDA8jxPBUOSVFoCGYbgQwLPUPXeYoQHWAgIBOGZgCIcVgGHHoCGASB0kva8qBHei8KAgjRTOWd6nPWc8JmOYryXc8MQ4whaGzChSNaRiIGYx82MkwhjC4oseOfa5VIIaSWFk9jCDyeAtTAPgQG4FTdO4IgMHoM4pwAUQweyGnPABVVgKFYBzDSPcS5LXaANxjTjtG4yAULgsBUHQpVUyzFg83wot6lnRpBhxRRBjUTRtB0QQCAAemKngjyo+BgAoCAAEIJC-eBAIitK0ky7LMEGEgIHICBZMIUryvQSrqrq5JGt-dR-ya1L4H4q8KnErKdgwXL3QKoroEGzsRpq+qkpzeBJum5rgP4x92pWrqyEoTatrKnaiCqvbxuSo6-wA2b+KRfKiGMHQlo61but6-qSrK4wQSvPJaqAA\" rel=\"nofollow noreferrer\">playground</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1741, "user_id": 12005425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NfIi.png?s=128&g=1", "display_name": "winwiz1", "link": "https://stackoverflow.com/users/12005425/winwiz1"}, "is_accepted": false, "score": 0, "last_activity_date": 1570279359, "last_edit_date": 1570279359, "creation_date": 1570274201, "answer_id": 58247798, "question_id": 58203873, "link": "https://stackoverflow.com/questions/58203873/typescript-generic-argument-comparison/58247798#58247798", "title": "Typescript generic argument comparison", "body": "<blockquote>\n  <p>I am looking for a way to do this without creating an instance of the class.</p>\n</blockquote>\n\n<p>Simple and works:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function createInstance&lt;A extends Animal&gt;(c: new () =&gt; A): A {\n    const lion: typeof Lion = Lion;\n    if (lion.toString() === c.toString()) {\n        console.log(\"Lion detected\")\n    }\n    return new c();\n}\n</code></pre>\n"}], "owner": {"reputation": 278, "user_id": 8157383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mqEIG.jpg?s=128&g=1", "display_name": "Komninos", "link": "https://stackoverflow.com/users/8157383/komninos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 1, "accepted_answer_id": 58247093, "answer_count": 4, "score": 6, "last_activity_date": 1570279359, "creation_date": 1570027377, "last_edit_date": 1570279108, "question_id": 58203873, "link": "https://stackoverflow.com/questions/58203873/typescript-generic-argument-comparison", "title": "Typescript generic argument comparison", "body": "<p>So there's this piece of code at the end of Typescript's <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html\" rel=\"nofollow noreferrer\">generics guide</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>class BeeKeeper {\n    hasMask: boolean = true;\n}\n\nclass ZooKeeper {\n    nametag: string = 'abc';\n}\n\nclass Animal {\n    numLegs: number = 123;\n}\n\nclass Bee extends Animal {\n    keeper: BeeKeeper = new BeeKeeper();\n}\n\nclass Lion extends Animal {\n    keeper: ZooKeeper = new ZooKeeper();\n}\n\nfunction createInstance&lt;A extends Animal&gt;(c: new () =&gt; A): A {\n    return new c();\n}\n\ncreateInstance(Lion).keeper.nametag;  // typechecks!\ncreateInstance(Bee).keeper.hasMask;   // typechecks!\n</code></pre>\n\n<p>This program just creates some classes and then defines a method that creates an instance of a given class. A problem arises when we try to do comparisons with variable <code>c</code> though. For example, if we want to check whether <code>c == Lion</code> then Typescript throws an error(<a href=\"https://www.typescriptlang.org/play/index.html#code/MYGwhgzhAEBCCm8DSiAO8BO0DeAoaB0AFpALKQDWAXNAEYD29I8YAdtALzQAuGArvADcuAL65coSDABajFPHRY8haKzABbeNzABzGhF4BLVjs7QA5GFrBzwsRPBRoAQVaH1YEDnyFWfdQAy8DoQNH7qtJhmAIwATADMduKSTgjw0PAAHtzwrAAmMK7unt4qFGiYNGnyimas8ADucIg1mAAUAJRJDlLQAYb07Fk5+YVuHl7KhOUKldCy9K1YXPVNC0ud3QBmfKzA3APswBgsOQCSrAZswPAAPM4Z2bkFLuOeAHxtwGGN0J2c7xcHRoDymBEMWy+nC4-UGHVKKkIAHokdA8vRoBB6JpuERjDofAQxCoTtw+Bh2KtoMBNqJkicwOdLto9vA2rDWB0AHQzRRctQ43SCAgongAT3QwCI8GAFAgAEIJAymVdWW00tzeZguSQIOQIBRhSLUdwJTLpbKFUA\" rel=\"nofollow noreferrer\">playground link</a>). Anyone know a way to do such comparisons while still keeping type checking in place?</p>\n"}, {"tags": ["angular", "typescript", "enums", "string-interpolation"], "comments": [{"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 1, "creation_date": 1570026543, "post_id": 58203544, "comment_id": 102785336, "body": "Maybe this can help you <a href=\"https://stackoverflow.com/questions/44230998/how-to-get-a-random-enum-in-typescript\" title=\"how to get a random enum in typescript\">stackoverflow.com/questions/44230998/&hellip;</a>"}, {"owner": {"reputation": 12486, "user_id": 5640649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab190da855988ffae29d287c7d55ebbe?s=128&d=identicon&r=PG", "display_name": "lealceldeiro", "link": "https://stackoverflow.com/users/5640649/lealceldeiro"}, "edited": false, "score": 0, "creation_date": 1570026601, "post_id": 58203544, "comment_id": 102785369, "body": "Could you post the code where you are generating the random offer? It doesn&#39;t matter it is failing in generating the random enum, that&#39;s what we need to check and help you with"}, {"owner": {"reputation": 51, "user_id": 12154272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98d52412cdc12cda5125fac87cab9c10?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie Bushchak", "link": "https://stackoverflow.com/users/12154272/sophie-bushchak"}, "edited": false, "score": 0, "creation_date": 1570026982, "post_id": 58203544, "comment_id": 102785612, "body": "I have added some extra information in the post."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 0, "last_activity_date": 1570026644, "creation_date": 1570026644, "answer_id": 58203671, "question_id": 58203544, "link": "https://stackoverflow.com/questions/58203544/how-to-use-string-interpolation-and-receive-a-random-value-from-an-enum/58203671#58203671", "title": "How to use string interpolation and receive a random value from an enum?", "body": "<p>A shortened version : </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Offer {\r\n  constructor() {\r\n    this.auctionStatus = Math.trunc(Math.random() * 8 + 1);\r\n  }\r\n\r\n}\r\n\r\nconst offer = new Offer();\r\nconsole.log(offer.auctionStatus);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Easy as that. </p>\n\n<p>Although, since you asked it, I strongly advise to use enums. They don't have their place in JS. So just use an object instead. </p>\n\n<p>(But that's personal preference). </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 1, "creation_date": 1570026892, "post_id": 58203673, "comment_id": 102785556, "body": "I would use <code>trunc</code> instead of <code>floor</code>, and you have to add 1 (it starts at 1, not 0). For the second peice of code, wouldn&#39;t that return 4 everytime ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1570026999, "post_id": 58203673, "comment_id": 102785627, "body": "Oooooooh, keys are actually values too ! well, needlessly complicated, but you taught me something here, so thank you !"}, {"owner": {"reputation": 8070, "user_id": 2078685, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SD5yb.jpg?s=128&g=1", "display_name": "Saksham", "link": "https://stackoverflow.com/users/2078685/saksham"}, "edited": false, "score": 0, "creation_date": 1570027071, "post_id": 58203673, "comment_id": 102785672, "body": "@Maryannah Even you taught me <code>trunc</code> Thanks a lot!"}], "tags": [], "owner": {"reputation": 8070, "user_id": 2078685, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SD5yb.jpg?s=128&g=1", "display_name": "Saksham", "link": "https://stackoverflow.com/users/2078685/saksham"}, "is_accepted": false, "score": 0, "last_activity_date": 1570027021, "last_edit_date": 1570027021, "creation_date": 1570026652, "answer_id": 58203673, "question_id": 58203544, "link": "https://stackoverflow.com/questions/58203544/how-to-use-string-interpolation-and-receive-a-random-value-from-an-enum/58203673#58203673", "title": "How to use string interpolation and receive a random value from an enum?", "body": "<p>You can access a random enum value by index accessor as</p>\n\n<pre><code>AuctionStatus[Math.trunc(Math.random() * 8 + 1)]\n</code></pre>\n\n<p>You can use a neat trick to access the number of values in enum as </p>\n\n<pre><code>Object.keys(AuctionStatus).length / 2\n</code></pre>\n\n<p>Stackblitz at: <a href=\"https://stackblitz.com/edit/angular-get-random-enum-value\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-get-random-enum-value</a></p>\n"}], "owner": {"reputation": 51, "user_id": 12154272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98d52412cdc12cda5125fac87cab9c10?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie Bushchak", "link": "https://stackoverflow.com/users/12154272/sophie-bushchak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1570027021, "creation_date": 1570026320, "last_edit_date": 1570026922, "question_id": 58203544, "link": "https://stackoverflow.com/questions/58203544/how-to-use-string-interpolation-and-receive-a-random-value-from-an-enum", "title": "How to use string interpolation and receive a random value from an enum?", "body": "<p>What I have to do is as follows:\nI have a component with an array of offers. An offer consists of several things, but one of them has to be a status which has to be a string-based enum.\nOffers with random values for several attributes have to be created, one of them is the status of the offer as an enum. This can be \u201cNEW\u201d, \u201cFOR_SALE\u201d, \u201cSOLD\u201d, \u201cPAID\u201d, \u201cDELIVERED\u201d, \u201cCLOSED\u201d, \u201cEXPIRED\u201d, and \u201cWITHDRAWN\u201d. A random offer must be generated with a method that creates this offer with randomized attributes for everything as well as a random status from the enum.</p>\n\n<p>Now I have tried lots of things and I just cannot figure out how to use the enum in this scenario. String interpolation on the enum does not seem to do anything or put out any value from the enum and I can't see how to apply randomization on the enum as you don't seem to be able to apply anything to the enum itself. </p>\n\n<pre><code>export class Overview1Component implements OnInit {\n  private offers: Offer[];\n\n</code></pre>\n\n<pre><code>export class Offer {\n  public title: string;\n  public sellDate: Date;\n  public description: string;\n  public auctionStatus: AuctionStatus;\n  public numberOfBids: number;\n  public valueHighestBid: number;\n}\n\nexport enum AuctionStatus {\n  NEW = 1,\n  FOR_SALE = 2,\n  SOLD = 3,\n  PAID = 4,\n  DELIVERED = 5,\n  CLOSED = 6,\n  EXPIRED = 7,\n  WITHDRAWN = 8\n}\n</code></pre>\n\n<p>Is there a flaw in my approach itself for the enumerator? How would I pick out a random value from the enum and use string interpolation to display this in my HTML?</p>\n\n<hr>\n\n<p>Some further information:</p>\n\n<p>Random offers are made with the following method:</p>\n\n<pre><code> public addRandomOffer(): void {\n    const newOffer = new Offer();\n    newOffer.title = 'This great article offer-' + (this.offers.length);\n    const fromDate = new Date(2005, 0, 1);\n    const toDate = new Date(2020, 0, 1);\n    newOffer.sellDate = this.getRandomDate(fromDate, toDate, 0, 23);\n    newOffer.numberOfBids = Math.floor(Math.random() * 30 + 1);\n    if (newOffer.numberOfBids === 0) {\n      newOffer.valueHighestBid = 0;\n    } else {\n      newOffer.valueHighestBid = Math.floor(Math.random() * 200 + 1);\n    }\n    this.offers.push(newOffer);\n  }\n</code></pre>\n\n<p>As you can see there is currently nothing in here for setting or randomizing the status, as I can't figure out how to do anything with it.</p>\n\n<p>This is done so that random offers can be displayed on a component of overview of offers.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5wLvF.png\" rel=\"nofollow noreferrer\">Image of the view</a></p>\n\n<p>In the HTML for printing the offers I currently have the following:</p>\n\n<pre><code>  &lt;tr *ngFor=\"let offer of offers\"&gt;\n    &lt;td&gt;{{offer.title}}&lt;/td&gt;\n    &lt;td&gt;{{offer.sellDate}}&lt;/td&gt;\n    &lt;td&gt;{{offer.auctionStatus}}&lt;/td&gt;\n    &lt;td&gt;{{offer.numberOfBids}}&lt;/td&gt;\n    &lt;td&gt;\u20ac{{offer.valueHighestBid}}&lt;/td&gt;\n  &lt;/tr&gt;\n</code></pre>\n"}, {"tags": ["regex", "string", "typescript", "split"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570025602, "post_id": 58203293, "comment_id": 102784735, "body": "You split by <code>;</code> (semi-column) first, instead of <code>; </code> (semi-column space)."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1570025617, "post_id": 58203293, "comment_id": 102784741, "body": "Try <code>split(&#47;[;,]\\s*|\\s+&#47;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1570026020, "creation_date": 1570026020, "answer_id": 58203448, "question_id": 58203293, "link": "https://stackoverflow.com/questions/58203293/typescript-string-split-with-regex-with-char-followed-by-space-and-space-only/58203448#58203448", "title": "Typescript string.split with regex with char followed by space and space only", "body": "<p>You may use</p>\n\n<pre><code>string.split(/[;,]\\s*|\\s+/)\n</code></pre>\n\n<p>The regex matches</p>\n\n<ul>\n<li><code>[;,]\\s*</code> - a <code>;</code> or <code>,</code> and then 0+ whitespaces </li>\n<li><code>|</code>  - or</li>\n<li><code>\\s+</code> - 1+ whitespaces.</li>\n</ul>\n\n<p>JS demo:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>string = \"test1; test2, test3 test4;test5\";\r\nconsole.log(string.split(/[;,]\\s*|\\s+/));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 58203448, "answer_count": 1, "score": 1, "last_activity_date": 1570026020, "creation_date": 1570025511, "last_edit_date": 1570025657, "question_id": 58203293, "link": "https://stackoverflow.com/questions/58203293/typescript-string-split-with-regex-with-char-followed-by-space-and-space-only", "title": "Typescript string.split with regex with char followed by space and space only", "body": "<p>I have a string of this type:</p>\n\n<pre><code>string = \"test1; test2, test3 test4;test5\"\n</code></pre>\n\n<p>I need to split it and get an array with the 5 words. I do this:</p>\n\n<pre><code>let arrayTo:string[] = string.split(/;|,|, |; | /);\n</code></pre>\n\n<p>but what I get is an array of 7 elements, two of them are empty strings:</p>\n\n<pre><code>[\"test1\",\"\",\"test2\",\"\",\"test3\",\"test4\",\"test5\"]\n</code></pre>\n\n<p>I would like to consider , and ; followed by whitespace as one entity and split on them, but with this regex it splits also on the whitespace that follows these characters. But I need also to split by whitespace alone (in this case, it correctly splits <code>test3</code> and <code>test4</code> in two entities).<br>\nWhat is the correct way to do this? </p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 5518, "user_id": 923340, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NZPwv.jpg?s=128&g=1", "display_name": "Lukasz &#39;Severiaan&#39; Grela", "link": "https://stackoverflow.com/users/923340/lukasz-severiaan-grela"}, "edited": false, "score": 0, "creation_date": 1570026008, "post_id": 58203160, "comment_id": 102784988, "body": "You are saying your component props is of type <code>propsInterface</code> but then you type it as <code>RouteComponentProps</code>. surely your component should look like: <code>const Home: React.FC&lt;propsInterface&gt; = (props:propsInterface)</code>"}, {"owner": {"reputation": 5518, "user_id": 923340, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NZPwv.jpg?s=128&g=1", "display_name": "Lukasz &#39;Severiaan&#39; Grela", "link": "https://stackoverflow.com/users/923340/lukasz-severiaan-grela"}, "edited": false, "score": 0, "creation_date": 1570026110, "post_id": 58203160, "comment_id": 102785044, "body": "if your component wants to accept some more props you can either define them in your <code>propsInterface</code> or if you are sure you will implement entire interface you can extend some other interface e.g. <code>interface propsInterface extends RouteComponentProps</code>."}, {"owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "reply_to_user": {"reputation": 5518, "user_id": 923340, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NZPwv.jpg?s=128&g=1", "display_name": "Lukasz &#39;Severiaan&#39; Grela", "link": "https://stackoverflow.com/users/923340/lukasz-severiaan-grela"}, "edited": false, "score": 0, "creation_date": 1570026313, "post_id": 58203160, "comment_id": 102785190, "body": "yes I want to be able to access props.location and props.history, how do I define this in interface?"}], "answers": [{"tags": [], "owner": {"reputation": 5518, "user_id": 923340, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NZPwv.jpg?s=128&g=1", "display_name": "Lukasz &#39;Severiaan&#39; Grela", "link": "https://stackoverflow.com/users/923340/lukasz-severiaan-grela"}, "is_accepted": false, "score": 0, "last_activity_date": 1570027012, "creation_date": 1570027012, "answer_id": 58203772, "question_id": 58203160, "link": "https://stackoverflow.com/questions/58203160/changing-route-programmatically-with-two-different-props-types/58203772#58203772", "title": "Changing route programmatically with two different props types", "body": "<p>This is how you can prepare your props in a component to accept the <code>RouteChildrenProps</code> props.</p>\n\n<pre><code>import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { RouteChildrenProps } from 'react-router';\n\nexport interface IProps extends RouteChildrenProps {}\n\nconst Results: React.FC&lt;IProps&gt; = (props: IProps): JSX.Element =&gt; (\n   &lt;&gt;\n    &lt;p&gt;{props.history.length}&lt;/p&gt;\n    &lt;p&gt;{props.location.search}&lt;/p&gt;\n    &lt;p&gt;{props.match &amp;&amp; props.match.url}&lt;/p&gt;\n  &lt;/&gt;\n);\n\nexport default Results;\n</code></pre>\n\n<p>Then in your Router you can pass those values:</p>\n\n<pre><code>\n    &lt;ConnectedRouter history={props.history} context={props.context}&gt;\n\n          &lt;Route key={`${path}`} exact={exact} path={path}&gt;\n            {({ match, location, history }): JSX.Element =&gt; (\n\n                  &lt;Results\n                    match={match}\n                    history={history}\n                    location={location}\n                  /&gt;\n            )}\n          &lt;/Route&gt;\n    &lt;/ConnectedRouter&gt;\n\n</code></pre>\n"}], "owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570027535, "creation_date": 1570025011, "last_edit_date": 1570027535, "question_id": 58203160, "link": "https://stackoverflow.com/questions/58203160/changing-route-programmatically-with-two-different-props-types", "title": "Changing route programmatically with two different props types", "body": "<p>Im already passing in props to this component, the interface works well with location: any. But now I want to also want to pass in <code>props:RouteComponentProps</code> so I can programmatically change views. the error I get is..</p>\n\n<p><code>Type '(props: RouteComponentProps&lt;{}, StaticContext, any&gt;) =&gt; Element' is not assignable to type 'FunctionComponent&lt;propsInterface&gt;'.\n  Types of parameters 'props' and 'props' are incompatible.\n    Type 'PropsWithChildren&lt;propsInterface&gt;' is missing the following properties from type 'RouteComponentProps&lt;{}, StaticContext, any&gt;': history, matchts(2322\n</code></p>\n\n<pre><code>import React, { useContext } from 'react';\nimport { RouteComponentProps } from 'react-router';\n\ninterface propsInterface {\n  location: any; \n}\n\nconst Home: React.FC&lt;propsInterface&gt; = (props:RouteComponentProps) =&gt; {\n     props.history.push('/myOtherPage')\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "typescript-typings"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 298713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15b3e581142807855fb0df7d79c3b88b?s=128&d=identicon&r=PG", "display_name": "SergioP", "link": "https://stackoverflow.com/users/298713/sergiop"}, "edited": false, "score": 0, "creation_date": 1570089676, "post_id": 58207543, "comment_id": 102805833, "body": "Thanks, <code>esModuleInterop</code> is already <code>true</code>. <code>MyComponent.module.css.d.ts</code> is generated by <code>css-modules-typescript-loader</code>. If I could edit it adding an export directly on the interface instead of the default export I probably could solve importing the interface in this way: <code>import styles, { cssExports } from &#39;.&#47;MyComponent.module.css&#39;</code> But I can&#39;t.. :-("}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1570041788, "creation_date": 1570041788, "answer_id": 58207543, "question_id": 58203153, "link": "https://stackoverflow.com/questions/58203153/how-to-import-and-use-typescript-interface-stored-in-a-auto-generated-d-ts-fil/58207543#58207543", "title": "How to import and use typescript interface stored in a auto generated *.d.ts file?", "body": "<p>Looks like you are using commonjs module syntax, Can you enable this flag in tsconfig.json and try again</p>\n\n<pre><code>\"esModuleInterop\": true \n</code></pre>\n\n<p>Also export interface as well like below</p>\n\n<p><em>// MyComponent.module.css</em></p>\n\n<pre><code>export interface CssExports {\n  'myCssClass01': string;\n  'myCssClass02': string;\n}\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 298713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15b3e581142807855fb0df7d79c3b88b?s=128&d=identicon&r=PG", "display_name": "SergioP", "link": "https://stackoverflow.com/users/298713/sergiop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570041788, "creation_date": 1570024968, "last_edit_date": 1570025989, "question_id": 58203153, "link": "https://stackoverflow.com/questions/58203153/how-to-import-and-use-typescript-interface-stored-in-a-auto-generated-d-ts-fil", "title": "How to import and use typescript interface stored in a auto generated *.d.ts file?", "body": "<p>In a React Application, I have got this structure:</p>\n\n<pre><code>src/Components/MyComponent\n\n\u251c\u2500\u2500 MyComponent.module.css // Css modules styles\n\u251c\u2500\u2500 MyComponent.module.css.d.ts // Autogenerated style type definition\n\u2514\u2500\u2500 MyComponent.tsx // The React component\n\n</code></pre>\n\n<p><code>Component.module.css.d.ts</code> contains this:</p>\n\n<pre><code>interface CssExports {\n  'myCssClass01': string;\n  'myCssClass02': string;\n}\ndeclare const cssExports: CssExports;\nexport = cssExports;\n</code></pre>\n\n<p>In <code>MyComponent.tsx</code> I want to import the <code>interface</code> and use it in a function, like this:</p>\n\n<pre><code>import styles from './MyComponent.module.css'\nimport { cssExports } from './MyComponent.module.css.d'\n\nconst myFunc = (style: cssExports): string =&gt; {...}\n</code></pre>\n\n<p>I am receiving error:</p>\n\n<blockquote>\n  <p>Module '\"/src/components/MyComponent/MyComponent.module.css\"' has no exported member 'cssExports'.ts(2305)</p>\n</blockquote>\n\n<p>Where am I doing wrong?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 1580, "user_id": 8106018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-novQgV5suIw/AAAAAAAAAAI/AAAAAAAAAKU/V-y-f6aAzFI/photo.jpg?sz=128", "display_name": "Ricardo Gonzalez", "link": "https://stackoverflow.com/users/8106018/ricardo-gonzalez"}, "edited": false, "score": 0, "creation_date": 1570024238, "post_id": 58202924, "comment_id": 102783910, "body": "Have you used <a href=\"https://momentjs.com/\" rel=\"nofollow noreferrer\">moment.js</a> ? This is a great tool to convert dates and time"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 9470, "user_id": 925478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/51c385b62e5fca7e554d61641fc2b15b?s=128&d=identicon&r=PG", "display_name": "Myk Willis", "link": "https://stackoverflow.com/users/925478/myk-willis"}, "edited": false, "score": 0, "creation_date": 1570024963, "post_id": 58202924, "comment_id": 102784364, "body": "@MykWillis I closed the question when the Angular tag was present. I thought it was related to Angular. I&#39;m re-opening it !"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1570025000, "post_id": 58202924, "comment_id": 102784394, "body": "Well I can&#39;t re-open it, i can just vote to re-open it ... Either you guys vote too, or simply create a new question (And <b>DO NOT</b> use the Angular tag)"}, {"owner": {"reputation": 8858, "user_id": 995800, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4EWf5.jpg?s=128&g=1", "display_name": "Constantin Gro&#223;", "link": "https://stackoverflow.com/users/995800/constantin-gro%c3%9f"}, "edited": false, "score": 0, "creation_date": 1570025085, "post_id": 58202924, "comment_id": 102784444, "body": "Someone&#39;s got a trigger-happy finger! ;-) I had an answer in the making and I voted to reopen."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 8858, "user_id": 995800, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4EWf5.jpg?s=128&g=1", "display_name": "Constantin Gro&#223;", "link": "https://stackoverflow.com/users/995800/constantin-gro%c3%9f"}, "edited": false, "score": 1, "creation_date": 1570025129, "post_id": 58202924, "comment_id": 102784468, "body": "@ConstantinGro&#223; you don&#39;t say ! I&#39;m the gate-keeper of the Angular board and trust me, there&#39;s a lot to do ... But hey, maybe that answered him !"}, {"owner": {"reputation": 9470, "user_id": 925478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/51c385b62e5fca7e554d61641fc2b15b?s=128&d=identicon&r=PG", "display_name": "Myk Willis", "link": "https://stackoverflow.com/users/925478/myk-willis"}, "edited": false, "score": 0, "creation_date": 1570025251, "post_id": 58202924, "comment_id": 102784539, "body": "As with most things date and time related, the &quot;simple&quot; way is almost certainly going to end up being (1) not so simple, and (2) wrong in some situations of time and place.  Use moment.js:  &gt; var moment = require(&#39;moment&#39;); &gt; moment.parseZone(<code>Sat Oct 05 2019 00:00:00 GMT+0200</code>).format(&quot;YYYY-MM-DDZ&quot;) &#39;2019-10-05+02:00&#39;"}, {"owner": {"reputation": 2044, "user_id": 6790744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ika8-LBDpT8/AAAAAAAAAAI/AAAAAAAAANk/OXjEetrtAWc/photo.jpg?sz=128", "display_name": "Akshay Bande", "link": "https://stackoverflow.com/users/6790744/akshay-bande"}, "edited": false, "score": 0, "creation_date": 1570025367, "post_id": 58202924, "comment_id": 102784603, "body": "<code>https:&#47;&#47;github.com&#47;akshaybande81&#47;date-conversion-javascript&#47;&zwnj;&#8203;wiki</code> use this link"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 11488464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5633797ee6a14c8b8ed2c86e2456056b?s=128&d=identicon&r=PG&f=1", "display_name": "travis_911", "link": "https://stackoverflow.com/users/11488464/travis-911"}, "edited": false, "score": 0, "creation_date": 1570024810, "post_id": 58202996, "comment_id": 102784260, "body": "no it&#39;s not correct.. it return this <code>2019-10-05-120</code> and no <code>2019-10-05+2:00</code>"}, {"owner": {"reputation": 2044, "user_id": 6790744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ika8-LBDpT8/AAAAAAAAAAI/AAAAAAAAANk/OXjEetrtAWc/photo.jpg?sz=128", "display_name": "Akshay Bande", "link": "https://stackoverflow.com/users/6790744/akshay-bande"}, "edited": false, "score": 0, "creation_date": 1570025547, "post_id": 58202996, "comment_id": 102784697, "body": "You have to handle <code>TimezoneOffset</code> convert offset to hours. It&#39;s giving wrong answer."}], "tags": [], "owner": {"reputation": 1802, "user_id": 11823079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQoIH.png?s=128&g=1", "display_name": "Norbert Bartko", "link": "https://stackoverflow.com/users/11823079/norbert-bartko"}, "is_accepted": false, "score": 0, "last_activity_date": 1570024399, "creation_date": 1570024399, "answer_id": 58202996, "question_id": 58202924, "link": "https://stackoverflow.com/questions/58202924/convert-date-to-format-yyyy-mm-ddtimezone/58202996#58202996", "title": "Convert date to format yyyy-MM-dd+timezone", "body": "<p>You can do this with simple <code>Date</code> functions.</p>\n\n<pre><code>public transform(date: Date): string {\n    return `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate() &gt;= 10 ? date.getDate() : '0'+date.getDate()}${date.getTimezoneOffset()}`;\n}\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 11488464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5633797ee6a14c8b8ed2c86e2456056b?s=128&d=identicon&r=PG&f=1", "display_name": "travis_911", "link": "https://stackoverflow.com/users/11488464/travis-911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "closed_date": 1570024492, "answer_count": 1, "score": -1, "last_activity_date": 1570024626, "creation_date": 1570024121, "last_edit_date": 1570024626, "question_id": 58202924, "link": "https://stackoverflow.com/questions/58202924/convert-date-to-format-yyyy-mm-ddtimezone", "closed_reason": "Duplicate", "title": "Convert date to format yyyy-MM-dd+timezone", "body": "<p>I wanna change the input date with time and time zone to this format yyyy-MM-dd+timezone</p>\n\n<p>Example:\nI have this input </p>\n\n<pre><code>Sat Oct 05 2019 00:00:00 GMT+0200 (Ora legale dell\u2019Europa centrale)\n</code></pre>\n\n<p>I want an output like this</p>\n\n<pre><code>2019-10-05+2:00\n</code></pre>\n\n<p>Is there a simple way to convert this?</p>\n"}, {"tags": ["android", "typescript", "codehighlighter"], "comments": [{"owner": {"reputation": 4330, "user_id": 6271180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEiRn.png?s=128&g=1", "display_name": "Benoit", "link": "https://stackoverflow.com/users/6271180/benoit"}, "edited": false, "score": 0, "creation_date": 1570028955, "post_id": 58202889, "comment_id": 102786808, "body": "Did you try to simply uninstall the plugin ?"}, {"owner": {"reputation": 55, "user_id": 4664543, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152817558819053/picture?type=large", "display_name": "Nicky", "link": "https://stackoverflow.com/users/4664543/nicky"}, "reply_to_user": {"reputation": 4330, "user_id": 6271180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEiRn.png?s=128&g=1", "display_name": "Benoit", "link": "https://stackoverflow.com/users/6271180/benoit"}, "edited": false, "score": 0, "creation_date": 1570102177, "post_id": 58202889, "comment_id": 102812320, "body": "yes offcourse, sorry should have put that in. With the plugin installed, it gave some color but far from what it should be. After uninstalling, no color at all. Just one color text on background. The colors like it is here in the code preview. That is what I had before, now nothing."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 4664543, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152817558819053/picture?type=large", "display_name": "Nicky", "link": "https://stackoverflow.com/users/4664543/nicky"}, "is_accepted": true, "score": 0, "last_activity_date": 1593515319, "creation_date": 1593515319, "answer_id": 62656089, "question_id": 58202889, "link": "https://stackoverflow.com/questions/58202889/typescript-syntax-highlighting-not-working/62656089#62656089", "title": "Typescript syntax highlighting not working", "body": "<p>Eventualy reinstalling everything solved my issues.</p>\n"}], "owner": {"reputation": 55, "user_id": 4664543, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152817558819053/picture?type=large", "display_name": "Nicky", "link": "https://stackoverflow.com/users/4664543/nicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 62656089, "answer_count": 1, "score": 1, "last_activity_date": 1593515319, "creation_date": 1570024022, "last_edit_date": 1570028574, "question_id": 58202889, "link": "https://stackoverflow.com/questions/58202889/typescript-syntax-highlighting-not-working", "title": "Typescript syntax highlighting not working", "body": "<p>After enabling the Typoscript plugin like suggested by the IDE none of my .ts files show syntax highlighting any more.</p>\n\n<p>I've tried reinstalling android studio after removing all settings folder in appdata, userprofile, program files folder. I've tried with new project and existing ones. I am not able to get the syntax highlighting back.</p>\n\n<p>I'm running:\n- windows 10\n- Android Studio 3.5</p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  constructor() {}\n\n}\n\n</code></pre>\n\n<p>How do I get syntax highlighting working again asif a clean installation.</p>\n"}, {"tags": ["node.js", "typescript", "koa", "koa-router"], "comments": [{"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570059203, "post_id": 58202861, "comment_id": 102798523, "body": "Can you show the code that extracts the &#39;authorId&#39; part? Probably the <code>controller.getAuthorBooks</code> function."}, {"owner": {"reputation": 6143, "user_id": 1316000, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f84222b8993c77ecfa9e98979ac51917?s=128&d=identicon&r=PG", "display_name": "Rodrigo Sasaki", "link": "https://stackoverflow.com/users/1316000/rodrigo-sasaki"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570059485, "post_id": 58202861, "comment_id": 102798576, "body": "Sure, I&#39;ll add a snippet, but keep in mind that <code>getAuthorBooks</code> never gets invoked, that&#39;s actually the behavior that I want to reach"}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1570060216, "post_id": 58202861, "comment_id": 102798699, "body": "I misunderstood then. In that case, it&#39;s pretty strange. I don&#39;t see the same behavior. The reason I asked for getAuthorBooks is that I thought perhaps something went wrong there instead, which may have lead you to the wrong conclusion. But if you&#39;re sure getAuthorId gets called, then I don&#39;t know."}, {"owner": {"reputation": 128, "user_id": 1165921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728f003b43270028ae07103be35cf92?s=128&d=identicon&r=PG", "display_name": "shobeurself", "link": "https://stackoverflow.com/users/1165921/shobeurself"}, "edited": false, "score": 0, "creation_date": 1574279514, "post_id": 58202861, "comment_id": 104179777, "body": "I don&#39;t see the same behavior either.  I am able get to the correct routes."}], "owner": {"reputation": 6143, "user_id": 1316000, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f84222b8993c77ecfa9e98979ac51917?s=128&d=identicon&r=PG", "display_name": "Rodrigo Sasaki", "link": "https://stackoverflow.com/users/1316000/rodrigo-sasaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570059665, "creation_date": 1570023934, "last_edit_date": 1570059665, "question_id": 58202861, "link": "https://stackoverflow.com/questions/58202861/how-do-i-get-koa-router-to-match-the-routes-correctly", "title": "How do I get koa-router to match the routes correctly", "body": "<p>So I'm working with <a href=\"https://www.npmjs.com/package/koa\" rel=\"nofollow noreferrer\"><code>koa</code></a> and <a href=\"https://www.npmjs.com/package/koa-router\" rel=\"nofollow noreferrer\"><code>koa-router</code></a></p>\n\n<p>I have an api that uses mongo as database, and I have a few endpoints setup like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const router = new Router({ sensitive: false });\n\nrouter.get(`/author`, controller.getAuthors);\nrouter.get(`/author/:authorId`, controller.getAuthorById);\nrouter.get(`/author/:authorId/books`, controller.getAuthorBooks);\n</code></pre>\n\n<p>However when I run a <code>GET</code> on <code>/author/:authorId/books</code> I see this error in my logs:</p>\n\n<pre><code>Error: Argument passed in must be a single String of 12 bytes or a string of 24 hex characters \n</code></pre>\n\n<p>and the string that is being passed on to Mongo to search for the author is this:</p>\n\n<pre><code>oTKGdrJXo4aUVj9ZC22MMLeA7Z03/books\n</code></pre>\n\n<p>So <code>koa-router</code> is routing to <code>/author/:authorId</code> with the full path including the <code>/books</code>.</p>\n\n<p>How do I prevent this?</p>\n\n<p>I know that if I register the more specifics endpoints first it works, but I don't want to have to worry about the order in which I register my endpoints, it makes for a very fragile solution</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Adding implementation of <code>getAuthorById</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>public async getAuthorById(ctx: Context): Promise&lt;void&gt; {\n  if (ctx.params.authorId) {\n    const author = await this.authorService.findById(ctx.params.authorId);\n    ctx.status = 200;\n    ctx.body = author;\n  } else {\n    ctx.status = 404;\n  }\n}\n</code></pre>\n"}, {"tags": ["c#", "typescript", "servicestack"], "comments": [{"owner": {"reputation": 134328, "user_id": 85785, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1257196ff88132651f94ac85f662c038?s=128&d=identicon&r=PG", "display_name": "mythz", "link": "https://stackoverflow.com/users/85785/mythz"}, "edited": false, "score": 0, "creation_date": 1570024036, "post_id": 58202564, "comment_id": 102783779, "body": "It sounds like you have something else either in your App (or external network if you&#39;re going through any middleware) buffering responses in your App. If this also happens locally can you publish a small/stand-alone App on GitHub I can download and run locally to repro the issue."}, {"owner": {"reputation": 3150, "user_id": 508681, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d488250c04c3a26e79f5c57e1423919b?s=128&d=identicon&r=PG", "display_name": "jklemmack", "link": "https://stackoverflow.com/users/508681/jklemmack"}, "edited": false, "score": 0, "creation_date": 1570045964, "post_id": 58202564, "comment_id": 102794876, "body": "I don&#39;t have the code with me, but at one point to avoid the IIS buffering I used the <code>OnPublish</code> event to shove down 1024 bytes of spaces.  Bandwidth wasn&#39;t an issue for us (all local intranet), and this was circa SS 4.5.  I&#39;m not sure how that&#39;d work with async world though, but its <i>something</i> to try."}, {"owner": {"reputation": 185, "user_id": 10640013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ikcOC.png?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/10640013/barry"}, "reply_to_user": {"reputation": 134328, "user_id": 85785, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1257196ff88132651f94ac85f662c038?s=128&d=identicon&r=PG", "display_name": "mythz", "link": "https://stackoverflow.com/users/85785/mythz"}, "edited": false, "score": 0, "creation_date": 1570112675, "post_id": 58202564, "comment_id": 102818179, "body": "@mythz Created a stripped down version of our workflow and works locally and introduces lag only when it hits azure servers. Will update when discover the solution."}], "owner": {"reputation": 185, "user_id": 10640013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ikcOC.png?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/10640013/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570022939, "creation_date": 1570022939, "question_id": 58202564, "link": "https://stackoverflow.com/questions/58202564/serverevents-last-message-not-being-recieved-until-heartbeat", "title": "ServerEvents - Last message not being recieved until heartbeat", "body": "<p>Extension on : <a href=\"https://stackoverflow.com/questions/58165887/final-message-in-server-events-not-being-pushed-until-heartbeat?noredirect=1#comment102721383_58165887\">Original post</a></p>\n\n<p>We are having an issue where the last message sent over server events is not being revieved until the next heartbeat. The client in question is using the Service Stack <a href=\"https://docs.servicestack.net/typescript-add-servicestack-reference\" rel=\"nofollow noreferrer\">Typscript Client</a></p>\n\n<p>Here is a stripped down implimentation of the <a href=\"https://dotnetfiddle.net/BzMdWt\" rel=\"nofollow noreferrer\">server setup / calls</a></p>\n\n<p>As suggested in the original post, we have upgraded to 5.7 <em>AND</em> switched over the the async api and it still waits for the next heartbeat.</p>\n\n<p>The c# implimentation for a this works without the delay against the same server. Below is the relevant code from that : </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class Events\n{\n    public async Task Setup(string channel)\n    {\n       _client = new ServerEventsClient(_baseUri.ToString(), channel);\n       _client.OnJoin += OnJoin;\n       _client.OnConnect += OnConnect;\n       _client.OnCommand += OnCommand;\n       _client.OnMessage += OnMessage;\n       _client.OnException += OnException;\n       _client.Start();\n       _ = _client.Connect();\n       //\n       _log.Text = $\"{DateTime.Now} : [Connected] : {channel.ToString()} \\n {_log.Text}\";\n       // Wait to receive onJoin command event\n       var joinMsg = await _client.WaitForNextCommand();\n    }\n\n    private void OnMessage(ServerEventMessage e)\n    {\n        AddToLog($\"[Message Received] {e.Data}\");\n    }\n }\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "ref"], "comments": [{"owner": {"reputation": 78861, "user_id": 561309, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d833d9f0ffa2265a01359ccecd26d54?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/561309/laurent"}, "edited": false, "score": 0, "creation_date": 1570019724, "post_id": 58201621, "comment_id": 102781137, "body": "Why not make the color a prop and update your component that way?"}, {"owner": {"reputation": 78861, "user_id": 561309, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d833d9f0ffa2265a01359ccecd26d54?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/561309/laurent"}, "edited": false, "score": 0, "creation_date": 1570019759, "post_id": 58201621, "comment_id": 102781161, "body": "Otherwise you can indeed do <code>youcomponent.current.changeColor()</code> to call the method directly."}, {"owner": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "reply_to_user": {"reputation": 78861, "user_id": 561309, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d833d9f0ffa2265a01359ccecd26d54?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/561309/laurent"}, "edited": false, "score": 0, "creation_date": 1570019792, "post_id": 58201621, "comment_id": 102781184, "body": "I don&#39;t want to use props in this case - I&#39;m specifically trying to find a way of accessing methods from outside their classes :)"}, {"owner": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570019831, "post_id": 58201621, "comment_id": 102781204, "body": "You can use <code>static</code>, and use it like so, <code>ComponentClass.functionName()</code>"}, {"owner": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "reply_to_user": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570019904, "post_id": 58201621, "comment_id": 102781235, "body": "thanks @Miller, so I would use <code>static changeColor</code> in this case?"}, {"owner": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570019993, "post_id": 58201621, "comment_id": 102781297, "body": "Indeed, then you make it callable without using the <code>new</code> keyword"}, {"owner": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570020287, "post_id": 58201621, "comment_id": 102781476, "body": "like this, <a href=\"https://codesandbox.io/s/new-haze-tcng3\" rel=\"nofollow noreferrer\">codesandbox.io/s/new-haze-tcng3</a>"}, {"owner": {"reputation": 78861, "user_id": 561309, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d833d9f0ffa2265a01359ccecd26d54?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/561309/laurent"}, "reply_to_user": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570020715, "post_id": 58201621, "comment_id": 102781726, "body": "@Miller, static wouldn&#39;t work because <code>this</code> would not refer to the component instance but to the class. So he would be setting the state on basically nothing."}, {"owner": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570021015, "post_id": 58201621, "comment_id": 102781885, "body": "My bad, i was totally not checking the content of changeColor, only the <code>call from outside aspect</code>. But you are right, because its called from outside the Component. I think that your idea will not be the solution to achieve your goal tbh."}, {"owner": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "reply_to_user": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 0, "creation_date": 1570021029, "post_id": 58201621, "comment_id": 102781896, "body": "Thanks @Miller I can now access the method outside of the class but I cannot use &#39;this&#39;, so I cannot <code>this.setState</code> as the above comment suggests. How can I call the method and <code>setState</code> from it?"}, {"owner": {"reputation": 271, "user_id": 7189236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900f49a2997d713abae363c366023445?s=128&d=identicon&r=PG&f=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/7189236/miller"}, "edited": false, "score": 1, "creation_date": 1570021466, "post_id": 58201621, "comment_id": 102782126, "body": "If you really need this, a quit nasty solution could be like so, <a href=\"https://codesandbox.io/s/new-haze-tcng3\" rel=\"nofollow noreferrer\">codesandbox.io/s/new-haze-tcng3</a>  Basically, on mount you set the function to a global variable."}], "answers": [{"comments": [{"owner": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "edited": false, "score": 0, "creation_date": 1570084465, "post_id": 58205390, "comment_id": 102803534, "body": "Thanks @ford04, that&#39;s a great explanation and example. So let&#39;s say I use the ref approach and have a umd as you say and have the component in the global scope / window object. How do I then call a method inside the class component using <code>refs</code>? In the playground you created only exposes a child&#39;s method to it&#39;s parent react component. Many thanks!"}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "reply_to_user": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "edited": false, "score": 1, "creation_date": 1570115994, "post_id": 58205390, "comment_id": 102819954, "body": "As said, parent to child comp communication is the only use case applicable for <code>ref</code>, as <code>ref</code>s do only exist inside <code>React</code> environment. I wanted to focus on showing you the instance method invocation of class components with <code>ref</code>s in the answer. From &quot;outside&quot;, you won&#39;t be able to call a component method directly, unless you share this method reference in the module or global scope with the client. That been said, it is hard to give a solution for latter case, as it would require more information about your project to weigh pros and cons. Have a look the example list for some inspiration."}, {"owner": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "edited": false, "score": 0, "creation_date": 1570116740, "post_id": 58205390, "comment_id": 102820362, "body": "Thank you very much"}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "reply_to_user": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "edited": false, "score": 0, "creation_date": 1570116868, "post_id": 58205390, "comment_id": 102820430, "body": "No worries, hope it has helped a bit nonetheless."}], "tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 1, "last_activity_date": 1570032825, "creation_date": 1570032825, "answer_id": 58205390, "question_id": 58201621, "link": "https://stackoverflow.com/questions/58201621/how-do-i-make-a-class-component-method-accessible-outside-of-the-component-in-re/58205390#58205390", "title": "How do I make a class component method accessible outside of the component in React and Typescript?", "body": "<p>In a component library, almost always one or multiple components like <code>Dashboard</code> are exported as a module (in your case with UMD also on the global scope) and the package consumer provides the React runtime. That also means, you can rely on the React environment in the library - just pass in props to your root component from the client.</p>\n\n<p>If you really wanted to call a public method on a class component imperatively from another component, you could do that with <a href=\"https://reactjs.org/docs/refs-and-the-dom.html#accessing-refs\" rel=\"nofollow noreferrer\">refs</a>, as you said.</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html?jsx=2#code/JYWwDg9gTgLgBAKjgQwM5wEoFNkGN4BmUEIcARFDvmQNwBQokscA3nJQHYAmWUcAvnCIlylPDAC0XErToNw0eGQB0AelQwAngBssqZblSpZdLWCxwAyjGQwLAXlZ04cXBG3QAKhADmP3VwAXHAARhDuOBz0-PR0uNpo6AAiaAAWYchQXC5YAB523OjY4soAwiSQHFgcMAA8LPwANFY2dgB8Ti4atg6dLq7uXr7+WEFCyNqoWM4CsS6cPFAAFACUffNYMACuUBxwSzP9cLVcwABurglGAHLIIFj2ZACCYGBkbYdHx6kAjG3lHj4MGGAWCLGsUGAHB8SxgqWA+m6dgMgyg3j8ARW-Fqql+Hy+x1UpzO+P6K3oLn4chcuFSyGhWAB0DgjlWwTOEGA2XsHRYnzhCOUUxg1h6SzAlDOorsLI6Sz5BLcgPRIzGAEIJVgpa0sCjlSDRp9+CtyTMYnQqXEIBwNHAXmAWfs1jy+rp4G5wNgCI7ivgDGI7F7ailUOkIJkuG1VhT2JsdnsDkcTudSUmQlsYMC9tbStpgLgANb2FirWUDT1YAgGHacGBqgx0hlM5ZY1NfFW6AaAz4uHHpzPWtu9kNhiOxgjFj1gL2CVRtGgsVRIWoAcQ8IQm5XAcDniFUVKTRJTM1N5roC14S1q9p3bWa0lwW3uNWUPk2AFFdM+YAAhTQASS4JYKHCGAyBNeggA\" rel=\"nofollow noreferrer\">Playground</a></p>\n\n<p>Dashboard with public <code>changeColor</code> method:</p>\n\n<pre><code>class Dashboard extends React.Component&lt;{}, State&gt; {\n  ...\n  changeColor = (): void =&gt; {\n    this.setState(prevState =&gt; ({\n      colorToggled: !prevState.colorToggled\n    }));\n  };\n}\n</code></pre>\n\n<p>(for function components there is <a href=\"https://reactjs.org/docs/hooks-reference.html#useimperativehandle\" rel=\"nofollow noreferrer\">useImperativeHandle</a>)</p>\n\n<p>Add a ref to Dashboard and invoke <code>changeColor</code>:</p>\n\n<pre><code>const App = () =&gt; {\n  let compRef = React.createRef&lt;ColorComp&gt;();\n  return (\n    &lt;div&gt;\n      &lt;button onClick={() =&gt; compRef.current!.changeColor()}&gt;\n        Toggle color\n      &lt;/button&gt;\n      &lt;ColorComp ref={compRef} /&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>\n\n<p>There are possibly much more alternatives, to name only a few: </p>\n\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events\" rel=\"nofollow noreferrer\">Custom DOM events</a> (compare <a href=\"https://martinfowler.com/articles/micro-frontends.html\" rel=\"nofollow noreferrer\">Microfrontends</a>),</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage\" rel=\"nofollow noreferrer\">window.postMessage</a> communication between window objects, </li>\n<li>Register a method callback on <code>window</code> in <code>componentDidMount</code></li>\n</ul>\n\n<p>These have to be justified somehow, as they add complexity and coupling to the architecture. So I would stick to the first section (via props and/or refs), unless you really have special requirements.</p>\n\n<p>Hope, that helps.</p>\n"}], "owner": {"reputation": 828, "user_id": 11584105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca483fc805e5996f52c4f8565be7f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Robot", "link": "https://stackoverflow.com/users/11584105/mr-robot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 58205390, "answer_count": 1, "score": 0, "last_activity_date": 1570048281, "creation_date": 1570019619, "last_edit_date": 1570048281, "question_id": 58201621, "link": "https://stackoverflow.com/questions/58201621/how-do-i-make-a-class-component-method-accessible-outside-of-the-component-in-re", "title": "How do I make a class component method accessible outside of the component in React and Typescript?", "body": "<p>I need to be able to call a class component's methods outside of the class as I am building a component library that compiles to <code>umd</code> and then is available via the <code>window</code> object.</p>\n\n<p>At the moment the methods in my classes are private but I want to make them 'callable' from outside. I have seen that it can be done using React <code>refs</code>, but I can only find specific examples where <code>ref</code> is used to make a classes methods available to other components. </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React, { Component, ReactElement } from 'react';\n\n\ninterface DashboardProps {\n  props?: Function;\n}\n\ninterface DashboardState {\n  ColorToggled: boolean;\n  myRef?: Function;\n  current?: Function;\n}\n\nclass Dashboard extends Component&lt;DashboardProps, DashboardState&gt; {\n  private myRef: React.RefObject&lt;HTMLInputElement&gt;;\n\n  constructor(props: DashboardProps) {\n    super(props);\n    this.myRef = React.createRef();\n    this.state = {\n      colorToggled: false,\n    };\n  }\n\n\n  public changeColor = (): void =&gt; { // I want to make this method accessible outside of the component\n    this.setState((prevState) =&gt; ({\n      colorToggled: !prevState.colorToggled,\n    }));\n  };\n\n  render(): ReactElement {\n    // console.log(this.current.myRef();\n    return (\n      &lt;&gt;\n        &lt;div\n          role=\"textbox\"\n          tabIndex={0}\n          style={{\n            padding: '20px',\n            backgroundColor: this.state.colorToggled === true ? '#f00' : '#00f',\n          }}\n        &gt;\n          &lt;br /&gt;\n        &lt;/div&gt;\n        &lt;input type=\"text\" ref={this.myRef} /&gt;\n      &lt;/&gt;\n    );\n  }\n}\n\nexport default Dashboard;  \n</code></pre>\n\n<p>I have only just starting putting the above together so it is not functional at all but not quite sure how to progress. Thanks in advance.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 567, "user_id": 4424421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33bc1c2936173f58989ec28349f8f799?s=128&d=identicon&r=PG&f=1", "display_name": "Rafal Lesniak", "link": "https://stackoverflow.com/users/4424421/rafal-lesniak"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1570020088, "post_id": 58201537, "comment_id": 102781357, "body": "I posted playground"}], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1570022110, "creation_date": 1570022110, "answer_id": 58202330, "question_id": 58201537, "link": "https://stackoverflow.com/questions/58201537/merge-or-operator-in-object-typescript/58202330#58202330", "title": "Merge or operator in object Typescript", "body": "<p>The usual way to deal with union types is to use type guards to narrow the union down to one of the members. In this case the <code>in</code> type guard works best:</p>\n\n<pre><code>type Context = {\n  EventApplication: {\n    applicationPhase: string;\n  };\n  SignInRef: {\n    signInMethod: 'google' | 'facebook' | 'yahoo' | 'username';\n  };\n  ExpressCheckout: {\n    paymentMethodPresent: boolean;\n    shippingAddressPresent: boolean;\n    receivePartnerEmails: boolean;\n    promoCode: string;\n  }\n}\n\nconst getContext = (payload: Context[keyof Context]) =&gt; {\n  if('signInMethod' in payload) {\n    payload.signInMethod; \n  } else if('applicationPhase' in payload) {\n    payload.applicationPhase\n  } else{\n    payload.promoCode\n  }\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAwg9gO2BAHsKBeKBvAUFKAUQDcIkBBMMAGwEsBjAQ2FsQC4d8CpGq6mWiAAoALRgGcIHccABOtBAHMA3FwC+qggGVaihAEkEAJQgAzDnm5RxugwgCyEYCLgATDgHJFcOIuoQPKAAfKA9TRnoIACMfAGtAkI8QRhc4BNCAV0lZBEYAWwDNKA0uQhQwWQhxcRgRCHpYuAzgCy4CMEYQAqRHZzchSskkDhi4f0YEIoJxEVoqBUVyV1dB8QGqshaoUfHJtqhKyNpSIUZZYAQIWUI8xlpqcRGfXamoCrg8uHhXKWs5BaKalwQNw9EQMigiic8CQqHQWAAFB0QNQ4Ix3LBEMg0ABtWIQEBwUyY2FoAC6AEpMAA+TgEWimBEeGx6Qy9FyuQIKN6dVHoqmWbjIvmuAB0LLs7LcyigAHpZVAABJwADuUGAcEhTgOtFcUCJ6tm4igV1kcFk6hND2gDKZvBoDGYrAQogkASg3OFaNcAv2XvRovt-CdwjEkktEGtgvavO9oven2+EHUwKAA\" rel=\"nofollow noreferrer\">Play</a></p>\n\n<p>Now if you really want to have access to all members directly on <code>payload</code>, some <code>| undefined</code> will by necessity have to creep into the property types (since a property might be <code>undefined</code> on a specific union member). We can adapt <code>StrictUnion</code> from <a href=\"https://stackoverflow.com/questions/52677576/typescript-discriminated-union-allows-invalid-state/52678379#52678379\">here</a> to get the types to work the way you want:</p>\n\n<pre><code>type UnionKeys&lt;T&gt; = T extends any ? keyof T : never;\ntype StrictUnionHelper&lt;T, TAll&gt; = T extends any ? T &amp; Partial&lt;Record&lt;Exclude&lt;UnionKeys&lt;TAll&gt;, keyof T&gt;, undefined&gt;&gt; : never;\ntype StrictUnion&lt;T&gt; = StrictUnionHelper&lt;T, T&gt;\n\ntype Context = {\n  EventApplication: {\n    applicationPhase: string;\n  };\n  SignInRef: {\n    signInMethod: 'google' | 'facebook' | 'yahoo' | 'username';\n  };\n  ExpressCheckout: {\n    paymentMethodPresent: boolean;\n    shippingAddressPresent: boolean;\n    receivePartnerEmails: boolean;\n    promoCode: string;\n  }\n}\n\nconst getContext = (payload: StrictUnion&lt;Context[keyof Context]&gt;) =&gt; {\n  payload.applicationPhase // string | undefined \n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAqgdgSwPZwNIRAZwDwBUB8UAvFLlBAB7ARwAmmUAhnCFAPxQDWGSAZqVABcUOBABuEAE4BuAFChIUAMrBJCAMbB4yOAAkIAG0iS8AGlIBBAwcIkylanQbNWHMgDIoABUaTgCRgNsACUIdSRJWmwAUQp1AwBXWghsbRR0LDwrG3NuED5SfHMEugheBFFafEJhUQkZeXBoFTVNNLg8W2VVDS1EFH0jKTNC2UbFAGEUaipiKABvWSgoaIk4YAswMAMNRn8UYUXl5cYtnfU9nS8AC0ZMCGFMHrgAczllgF935QQXuABJOChXiHJbHTC-AFwACyEGA1yQtGEAHIXkgkC8DBBkVAAD5QZG8RjqCAAI3RnBx+ORIEYCKQVIJCXukjgjAAttjvl8wbEwJIIJhMBNrmFOEgEsBQccoGBGCBOetYfDEV4Bfd1sJyUgscxvstMNcEFsKi8LLRaOrMGrBTQpVBtbq4PqoAKSQgJD4-KJJNF2YwEAZMFr0U6XfykOykFNko9nm8wR9ZEnZOE4E8oC84VN1g45gAKOUgAxIRhI7qtPo6bA5mbAADaeQKtYcAF18ABKYiEI6y+UlssAOlO212+zgNzu0AA9NOoE81K88VASslypUoMmgA\" rel=\"nofollow noreferrer\">Play</a></p>\n"}], "owner": {"reputation": 567, "user_id": 4424421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33bc1c2936173f58989ec28349f8f799?s=128&d=identicon&r=PG&f=1", "display_name": "Rafal Lesniak", "link": "https://stackoverflow.com/users/4424421/rafal-lesniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58202330, "answer_count": 1, "score": 0, "last_activity_date": 1570022110, "creation_date": 1570019339, "last_edit_date": 1570020079, "question_id": 58201537, "link": "https://stackoverflow.com/questions/58201537/merge-or-operator-in-object-typescript", "title": "Merge or operator in object Typescript", "body": "<p>How to get rid of or operator (<code>|</code>) and merge all object properties to be all accessible?</p>\n\n<p>Because now, typing <code>payload.signInMethod</code> TS complaints that this method does not exist in none \"or group\" but this one. How to write type to merge all object keys?</p>\n\n<p><a href=\"https://i.stack.imgur.com/lfbHo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lfbHo.png\" alt=\"remove ors\"></a></p>\n\n<p>Desired object:\n<a href=\"https://i.stack.imgur.com/7mevH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7mevH.png\" alt=\"enter image description here\"></a></p>\n\n<p>Playground to reproduce my problem: <a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAwg9gO2BAHsKBeKBvAUFKAUQDcIkBBMMAGwEsBjAQ2FsQC4d8CpGq6mWiAAoALRgGcIHccABOtBAHMA3FwC+qggGVaihAEkEAJQgAzDnm5RxugwgCyEYCLgATDgHJFcOIuoQPKAAfKA9TRnoIACMfAGtAkI8QRhc4BNCAV0lZBEYAWwDNKA0uQhQwWQhxcRgRCHpYuAzgCy4CMEYQAqRHZzchSskkDhi4f0YEIoJxEVoqBUVyV1dB8QGqshaoUfHJtqhKyNpSIUZZYAQIWUI8xlpqcRGfXamoCrg8uHhXKWs5BaKalwQNw9EQMigiic8CQqHQWAAFB0QNQ4Ix3LBEMg0ABtWIQEBwUyY2FoAC6AEpMAA+TjtTqo9EAOhsekMvRcrmUUAA9DyoAAJOAAdygwDgkKcB1origRLFs3EUCusjgsmBQA\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/play/#code/C4TwDgpgBAwg9gO2BAHsKBeKBvAUFKAUQDcIkBBMMAGwEsBjAQ2FsQC4d8CpGq6mWiAAoALRgGcIHccABOtBAHMA3FwC+qggGVaihAEkEAJQgAzDnm5RxugwgCyEYCLgATDgHJFcOIuoQPKAAfKA9TRnoIACMfAGtAkI8QRhc4BNCAV0lZBEYAWwDNKA0uQhQwWQhxcRgRCHpYuAzgCy4CMEYQAqRHZzchSskkDhi4f0YEIoJxEVoqBUVyV1dB8QGqshaoUfHJtqhKyNpSIUZZYAQIWUI8xlpqcRGfXamoCrg8uHhXKWs5BaKalwQNw9EQMigiic8CQqHQWAAFB0QNQ4Ix3LBEMg0ABtWIQEBwUyY2FoAC6AEpMAA+TjtTqo9EAOhsekMvRcrmUUAA9DyoAAJOAAdygwDgkKcB1origRLFs3EUCusjgsmBQA</a></p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "edited": false, "score": 0, "creation_date": 1570019550, "post_id": 58201493, "comment_id": 102781057, "body": "You should be using <code>ngModel</code> in Angular to get the value of a selected radio button. Take a look at the example in the first answer here: <a href=\"https://stackoverflow.com/questions/42443903/after-adding-ngmodel-to-a-radio-button-group-the-default-checked-no-longe\" title=\"after adding ngmodel to a radio button group the default checked no longe\">stackoverflow.com/questions/42443903/&hellip;</a>"}, {"owner": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 0, "creation_date": 1570026909, "post_id": 58201493, "comment_id": 102785565, "body": "There&#39;s too much code here and it&#39;s not clear to me what it is you wish to do. It&#39;s not good to just dump a bunch of code here - you need to try to reproduce the problem first in a minimal example, so irrelevant code doesn&#39;t clutter the question."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "edited": false, "score": 0, "creation_date": 1570022446, "post_id": 58201796, "comment_id": 102782756, "body": "I tried this but I am not getting the value I am getting: Value is :   Event {isTrusted: true, type: &quot;change&quot;, target: input.ng-untouched.ng-pristine.ng-valid..}"}, {"owner": {"reputation": 39, "user_id": 8171124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3cd1a45b6c443012b89b1e510c0f5c9?s=128&d=identicon&r=PG&f=1", "display_name": "Anjula Karunarathne", "link": "https://stackoverflow.com/users/8171124/anjula-karunarathne"}, "edited": false, "score": 0, "creation_date": 1570023225, "post_id": 58201796, "comment_id": 102783266, "body": "It seems you need to access the <code>target</code> member of the event object. In the printed event object, is there a member called <code>target</code> ?    Can you try this method instead: <code>Category($event) {      console.log($event.target.value); }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "edited": false, "score": 0, "creation_date": 1570023410, "post_id": 58201796, "comment_id": 102783401, "body": "I am getting ERROR TypeError: Cannot read property &#39;value&#39; of undefined in my console"}, {"owner": {"reputation": 39, "user_id": 8171124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3cd1a45b6c443012b89b1e510c0f5c9?s=128&d=identicon&r=PG&f=1", "display_name": "Anjula Karunarathne", "link": "https://stackoverflow.com/users/8171124/anjula-karunarathne"}, "edited": false, "score": 0, "creation_date": 1570023618, "post_id": 58201796, "comment_id": 102783514, "body": "What was the complete output you got previously?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "edited": false, "score": 0, "creation_date": 1570024131, "post_id": 58201796, "comment_id": 102783834, "body": "Event {isTrusted: true, type: &quot;change&quot;, target: input.ng-untouched.ng-pristine.ng-valid, currentTarget: input.ng-untouched.ng-pristine.ng-valid, eventPhase: 2, \u2026} bubbles: true cancelBubble: false cancelable: false composed: false currentTarget: null defaultPrevented: false eventPhase: 0 isTrusted: true path: (14) [input.ng-valid.ng-dirty.ng-touched, td, tr.categories, div#categorybox, div#category.collapse.show, div.col-sm.main, div.row, div.container-fluid, app-home, app-root, body, html, document, Window] returnValue: true srcElement: input.ng-valid.ng-dirty.ng-touched"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "edited": false, "score": 0, "creation_date": 1570024150, "post_id": 58201796, "comment_id": 102783851, "body": "target: input.ng-valid.ng-dirty.ng-touched timeStamp: 6075.5700001027435 type: &quot;change&quot; <b>proto</b>: Event"}], "tags": [], "owner": {"reputation": 39, "user_id": 8171124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3cd1a45b6c443012b89b1e510c0f5c9?s=128&d=identicon&r=PG&f=1", "display_name": "Anjula Karunarathne", "link": "https://stackoverflow.com/users/8171124/anjula-karunarathne"}, "is_accepted": false, "score": 0, "last_activity_date": 1570020708, "last_edit_date": 1570020708, "creation_date": 1570020352, "answer_id": 58201796, "question_id": 58201493, "link": "https://stackoverflow.com/questions/58201493/i-want-to-get-the-value-of-a-radio-button-with-angular/58201796#58201796", "title": "I want to get the value of a radio button with Angular", "body": "<p>You can bind the data of radio button.</p>\n\n<pre><code>&lt;input type=\"radio\" [(ngModel)]=\"selectedCategory\" name=\"category\" value=\"{{category.category}}\"\n(change)=\"Category($event)\"/&gt;\n</code></pre>\n\n<p>Then capture the event in your TypeScript file; or you can use the model <code>selectedCategory</code>.</p>\n\n<pre><code>Category(value) {\n    console.log(\" Value is : \", value );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "edited": false, "score": 0, "creation_date": 1570031121, "post_id": 58204206, "comment_id": 102788061, "body": "It works but it&#39;s selecting All of my buttons I don&#39;t want that. Is there away that it only selects one button?It selects all the categories when I click one radio button. I only want to select 1 category. Category is unique because there is  only one category no duplicates. Right now with your answer it&#39;s selecting all my radio buttons."}, {"owner": {"reputation": 23, "user_id": 9398980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d70e15b7d25227c38cc33a689f8487c?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/9398980/chris"}, "edited": false, "score": 0, "creation_date": 1570474838, "post_id": 58204206, "comment_id": 102917780, "body": "It means you have something wrong with the model. I would probably use ids to save my value. So bind would become {{selectedCategoryId}} and value would be {{category.id}}"}], "tags": [], "owner": {"reputation": 23, "user_id": 9398980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d70e15b7d25227c38cc33a689f8487c?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/9398980/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1570028550, "creation_date": 1570028550, "answer_id": 58204206, "question_id": 58201493, "link": "https://stackoverflow.com/questions/58201493/i-want-to-get-the-value-of-a-radio-button-with-angular/58204206#58204206", "title": "I want to get the value of a radio button with Angular", "body": "<p>You should bind your radio and add a click event. Also, I think your name is not unique for your inputs.</p>\n\n<p>In the TS :</p>\n\n<pre><code>&lt;input type=\"radio\"  id={{category.category}} [(ngModel)]=selectedCategory name=\"{{category.categoryName}}\" value=\"{{category}}\" (click)=selectCategory(category)/&gt;\n</code></pre>\n\n<p>In the HTML :</p>\n\n<pre><code>export class HomeComponent implements OnInit {\n   public selectedCategory: Category\n\n   public selectCategory (category) {\n      // do something here\n      // this.selectedCategory will be the selected value\n      // the category will be the value that was just selected\n   }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10102331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570028550, "creation_date": 1570019192, "last_edit_date": 1570022746, "question_id": 58201493, "link": "https://stackoverflow.com/questions/58201493/i-want-to-get-the-value-of-a-radio-button-with-angular", "title": "I want to get the value of a radio button with Angular", "body": "<p>I want to get the value my radio buttons specifically the one that has been selected. I did try to do it through the following code:\nmy home.component.html</p>\n\n<pre><code>&lt;span&gt;Categories&lt;/span&gt;\n        &lt;input type=\"button\" onclick=\"alert($('input[name=category]:checked').attr('id'))\" value=\"click me too\" /&gt;\n      &lt;div id=\"categorybox\"&gt;\n      &lt;tr  class=\"categories\" *ngFor=\"let category of categories\"&gt;\n        &lt;td&gt;\n          &lt;input type=\"radio\"  id={{category.category}} name=\"category\" value=\"{{category}}\"/&gt;\n          &lt;label for ={{category.category}} &gt;{{category.categoryName}}&lt;/label&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n\n    &lt;/div&gt;\n</code></pre>\n\n<p>I am getting undefined  in the pop up and I am not sure why. I want to use the id to pass information to a http request so that I can get my products to display by category. I wanted it to be linked to my categories list from my api so that when I add a category it will already be displayed as a radio button . I just need to get that value through my function. The code is in the html for better readability.<strong>I want to get the value of the button the one button whenever it's clicked.</strong></p>\n\n<p>my home.component.ts</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport {Home} from '../model/Home';\nimport {HomeService} from '../service/Home.service';\nimport {Category} from '../model/Category';\nimport {CategoryService} from '../service/Category.service';\ndeclare var $: any;\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  page= 0;\n  home: Home[];\n  categories: Category[];\n\n  constructor(private homeService: HomeService,private categoryService: CategoryService) { }\n\n    Category($event){\n\n\n    }\n\n\n  SortPrice($event:any){\n    let icon = document.getElementById(\"asc-desc1\");\n    if(icon.className === \"fas fa-angle-down\"){\n      icon.className =\"fas fa-angle-up\";\n      this.homeService.getByPriceAsc().subscribe(data =&gt; {\n      this.home = data;\n    });\n    }else{\n      icon.className =\"fas fa-angle-down\"\n      this.homeService.getByPriceDesc().subscribe(data =&gt; {\n        this.home = data;\n      });\n    };\n\n  }\n\n  SortSale($event:any){\n    let icon = document.getElementById(\"asc-desc2\");\n    if(icon.className === \"fas fa-angle-down\"){\n      icon.className =\"fas fa-angle-up\";\n      this.homeService.getBySaleAsc().subscribe(data =&gt; {\n      this.home = data;\n    });\n    }else{\n      icon.className =\"fas fa-angle-down\"\n      this.homeService.getBySaleDesc().subscribe(data =&gt; {\n        this.home = data;\n      });\n    };\n\n  }\n  SortDiscount($event:any){\n    let icon = document.getElementById(\"asc-desc3\");\n    if(icon.className === \"fas fa-angle-down\"){\n      icon.className =\"fas fa-angle-up\";\n      this.homeService.getByDiscountAsc().subscribe(data =&gt; {\n      this.home = data;\n    });\n    }else{\n      icon.className =\"fas fa-angle-down\"\n      this.homeService.getByDiscountDesc().subscribe(data =&gt; {\n        this.home = data;\n      });\n    };\n\n  }\n\n  ngOnInit() {\n\n      this.homeService.getAll().subscribe(data =&gt; {\n      this.home = data;\n    });\n    this.categoryService.getAll().subscribe(data =&gt; {\n      this.categories = data;\n    });\n\n  }\n\n}\n</code></pre>\n"}, {"tags": ["mysql", "node.js", "angular", "typescript", "express"], "comments": [{"owner": {"reputation": 430, "user_id": 10509886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jztmg.png?s=128&g=1", "display_name": "JDunken", "link": "https://stackoverflow.com/users/10509886/jdunken"}, "edited": false, "score": 0, "creation_date": 1570021137, "post_id": 58201374, "comment_id": 102781950, "body": "have you logged error/results in the users.js db query?"}, {"owner": {"reputation": 849, "user_id": 4756129, "user_type": "registered", "profile_image": "https://graph.facebook.com/926011460828896/picture?type=large", "display_name": "Luiz Fernando da Silva", "link": "https://stackoverflow.com/users/4756129/luiz-fernando-da-silva"}, "edited": false, "score": 1, "creation_date": 1570025214, "post_id": 58201374, "comment_id": 102784523, "body": "Did the request work requesting directly to the API, using, for example, postman?"}, {"owner": {"reputation": 31, "user_id": 8077991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542a6a2d220749181cc4848f42635ce?s=128&d=identicon&r=PG&f=1", "display_name": "Memphis", "link": "https://stackoverflow.com/users/8077991/memphis"}, "reply_to_user": {"reputation": 430, "user_id": 10509886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jztmg.png?s=128&g=1", "display_name": "JDunken", "link": "https://stackoverflow.com/users/10509886/jdunken"}, "edited": false, "score": 0, "creation_date": 1570026608, "post_id": 58201374, "comment_id": 102785375, "body": "@JDunken, the db query isn&#39;t logging anything, errors, results, whatsoever! I hoped if the endpoint got a request it the query would log something, but it isn&#39;t. Thanks for the suggestion though!"}, {"owner": {"reputation": 31, "user_id": 8077991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542a6a2d220749181cc4848f42635ce?s=128&d=identicon&r=PG&f=1", "display_name": "Memphis", "link": "https://stackoverflow.com/users/8077991/memphis"}, "reply_to_user": {"reputation": 849, "user_id": 4756129, "user_type": "registered", "profile_image": "https://graph.facebook.com/926011460828896/picture?type=large", "display_name": "Luiz Fernando da Silva", "link": "https://stackoverflow.com/users/4756129/luiz-fernando-da-silva"}, "edited": false, "score": 0, "creation_date": 1570026668, "post_id": 58201374, "comment_id": 102785419, "body": "@LuizFernandodaSilva, I really haven&#39;t used Postman, but I think I can try it and see what goes on. Thanks!"}, {"owner": {"reputation": 430, "user_id": 10509886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jztmg.png?s=128&g=1", "display_name": "JDunken", "link": "https://stackoverflow.com/users/10509886/jdunken"}, "reply_to_user": {"reputation": 849, "user_id": 4756129, "user_type": "registered", "profile_image": "https://graph.facebook.com/926011460828896/picture?type=large", "display_name": "Luiz Fernando da Silva", "link": "https://stackoverflow.com/users/4756129/luiz-fernando-da-silva"}, "edited": false, "score": 0, "creation_date": 1570032082, "post_id": 58201374, "comment_id": 102788559, "body": "That would suggest that you aren&#39;t addressing the endpoint you think you are. Follow @LuizFernandodaSilva &#39;s suggestion and use postman to verify your request."}, {"owner": {"reputation": 826, "user_id": 7301314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yC2wM.jpg?s=128&g=1", "display_name": "Sen Alexandru", "link": "https://stackoverflow.com/users/7301314/sen-alexandru"}, "edited": false, "score": 0, "creation_date": 1606376035, "post_id": 58201374, "comment_id": 114946462, "body": "@Memphis have you found a solution for this?"}], "answers": [{"tags": [], "owner": {"reputation": 288, "user_id": 14206650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBKMj.gif?s=128&g=1", "display_name": "Srinath Kamath", "link": "https://stackoverflow.com/users/14206650/srinath-kamath"}, "is_accepted": false, "score": 0, "last_activity_date": 1606724293, "creation_date": 1606724293, "answer_id": 65070049, "question_id": 58201374, "link": "https://stackoverflow.com/questions/58201374/angular-httpclient-http-requests-pending-forever/65070049#65070049", "title": "Angular HTTPClient (HTTP) requests pending forever", "body": "<p>I've been using MYSQL database and I would recommend using <code>mysql2</code> over <code>mysql</code></p>\n<p><code>mysql2</code> provides promise based syntaxes over conventional callback methods.\n<a href=\"https://github.com/mysqljs/mysql\" rel=\"nofollow noreferrer\">Here's the documentation for Mysql2 for nodejs</a>.</p>\n<p>Coming to the problem, I guess it might be because <strong>Nodejs</strong> is asynchronous while you're using a synchronous approach in setting up the API.\nAlso when you're working with Asynchronous programming you have to use <code>try-catch-finally</code> instead of conventional <code>if-else</code> statements to log the errors.</p>\n<p>So you can use <code>async (req, res, next)=&gt;{ //your code here }</code> rather than just using <code>(req, res, next)=&gt;{ //your code here }</code>.</p>\n<p>Also you have to <code>await</code> before calling the sql query, i.e;\n<code>await db.query</code></p>\n<p>or</p>\n<p>rather in mysql2 it is easier to use <code>const [data] = await pool.execute(query, [params])</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 8077991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542a6a2d220749181cc4848f42635ce?s=128&d=identicon&r=PG&f=1", "display_name": "Memphis", "link": "https://stackoverflow.com/users/8077991/memphis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 851, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1606724293, "creation_date": 1570018688, "question_id": 58201374, "link": "https://stackoverflow.com/questions/58201374/angular-httpclient-http-requests-pending-forever", "title": "Angular HTTPClient (HTTP) requests pending forever", "body": "<p>I have recently started working with MySQL as the database for my Angular/NodeJS project (I have been using MongoDB all along). Nonetheless, I'm encountering issues when handling HTTP Requests. I have experimented with GET and POST requests as of now, and GET is forever pending, until failure and POST doesn't post to backend and to the database, likewise. I really hadn't changed the backend configuration from the one I used with MongoDB database, except for the queries, of course.</p>\n\n<p>I have tried debugging the backend to check whether the server is actually running and everything was okay. It just came to requests reaching the specified endpoints that they're always pending. I also tried to log to console if a request gets at a certain endpoint, but nothing was being logged, unfortunately.</p>\n\n<p>server.js</p>\n\n<pre><code>const app = require(\"./backend/app\");\nconst debug = require(\"debug\")(\"node-angular\");\nconst http = require(\"http\");\n\nconst normalisePort = setPort =&gt; {\n  const port = parseInt(setPort, 10);\n  if (isNaN(port)) return setPort;\n  if (port &gt;= 0) return port;\n  return false;\n};\n\nconst port = normalisePort(process.env.PORT || \"8000\");\nconst server = http.createServer(app);\n\nconst error = error =&gt; {\n  if (error.syscall !== \"listen\") {\n    throw error;\n  }\n  const bind = typeof port === \"string\" ? \"pipe \" + port : \"port \" + port;\n  switch (error.code) {\n    case \"EACCES\":\n      console.error(bind + \" requires elevated privileges\");\n      process.exit(1);\n      break;\n    case \"EADDRINUSE\":\n      console.error(bind + \" is already in use\");\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n};\n\nconst listening = () =&gt; {\n  const address = server.address();\n  const bind = typeof port === \"string\" ? \"pipe \" + address : \"port \" + port;\n  debug.enabled = true;\n  debug(\"Listening on \" + bind);\n};\n\napp.set(\"port\", port);\nserver.on(\"error\", error);\nserver.on(\"listening\", listening);\nserver.listen(port, \"localhost\");\n</code></pre>\n\n<p>app.js</p>\n\n<pre><code>const express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst cors = require(\"cors\");\n\nconst users = require(\"./routes/users\");\n\nconst app = express();\n\napp.use(cors);\napp.use(bodyParser.json());\napp.use(\n  bodyParser.urlencoded({\n    extended: false\n  })\n);\n\napp.use((req, res, next) =&gt; {\n  res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n  res.setHeader(\n    \"Access-Control-Allow-Headers\",\n    \"Origin, X-Requested-With, Authorization, Content-Type, Accept\"\n  );\n  res.setHeader(\n    \"Access-Control-Allow-Methods\",\n    \"GET, POST, PATCH, DELETE, OPTIONS\"\n  );\n  next();\n});\n\napp.get(\"/api/users\", users);\n\nmodule.exports = app;\n\n</code></pre>\n\n<p>users.js</p>\n\n<pre><code>const express = require(\"express\");\nconst router = express.Router();\nconst db = require(\"../sql-connection\");\n\nrouter.get(\"\", (req, res, next) =&gt; {\n  db.query(\"select * from users;\", (error, results, fields) =&gt; {\n    if (results.length &gt; 0) {\n      return res.status(200).send(results);\n    } else {\n      return res.status(404).send();\n    }\n  });\n});\n\nmodule.exports = router;\n\n</code></pre>\n\n<p>sql-connection.js</p>\n\n<pre><code>const mysql = require(\"mysql\");\n\nconst sqlConnection = mysql.createConnection({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"payroll\"\n});\n\nsqlConnection.connect(error =&gt; {\n  if (error) throw error;\n  console.log(\"connected to database\");\n});\n\nmodule.exports = sqlConnection;\n</code></pre>\n\n<p>auth.service.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class AuthService {\n  private _BASE_URL: string = \"http://localhost:8000/api\";\n\n  constructor(private http: HttpClient) {}\n\n  public get users(): Observable&lt;any&gt; {\n    return this.http.get(this._BASE_URL + \"/users\");\n  }\n}\n</code></pre>\n\n<p>signup.component.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class SignUpComponent {\n\n  constructor(private _authService: AuthService) {}\n\n  public onSignUp(): void {\n      this._authService\n        .users()\n        .subscribe(data =&gt; (data ? console.log(data) : console.log(\"no data\")));\n  }\n}\n</code></pre>\n\n<p>When subscribed to the users observable data from backend should logged to console if present, otherwise, 'no data' is logged on the console. Unfortunately, this request takes forever (pending). However, if I don't subscribe to users no request is sent/seen under network tab in dev tools.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570018591, "post_id": 58201293, "comment_id": 102780531, "body": "It seems like <code>.call</code> is defined to return <code>any</code>, which is then assignable to <code>string</code>. Not sure why, but it&#39;s interesting."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1570018707, "post_id": 58201293, "comment_id": 102780607, "body": "Are you using the <code>strictBindCallApply</code> compiler option?"}], "answers": [{"comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1570018797, "post_id": 58201376, "comment_id": 102780664, "body": "<code>fn(null)</code> is not equivalent to <code>fn.call(null)</code>. The first parameter to <code>call</code> is what should be used for the <code>this</code> object."}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1570019266, "post_id": 58201376, "comment_id": 102780918, "body": "@crashmstr while true in the general case, the two would be equivalent here, since <code>fn</code> doesn&#39;t take any parameters, hence <code>fn()</code> and <code>fn(null)</code> do the same. Also, since it never uses the <code>this</code> context, it doesn&#39;t matter what it&#39;s set to <code>fn.call(null)</code> and <code>fn.call(anyValue)</code> are also equivalent."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570019735, "post_id": 58201376, "comment_id": 102781142, "body": "@VLAZ except than in Typescript, <code>fn(null)</code> is an error. Thus, <code>fn(null)</code> and <code>fn.call(null)</code> are not equivalent (Yes, it will still compile to JavaScript and the resulting code will not behave differently, but it is still a compiler error)."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1570019960, "post_id": 58201376, "comment_id": 102781277, "body": "The <i>first</i> compiler error in your <code>res1 = fn(null)</code> is not related at all to assigning to <code>res1</code>, but that <code>fn</code> does not take any parameters. Thus my statement that <code>fn(null)</code> is not equivalent to <code>fn.call(null)</code>. The equivalent would be <code>res1 = fn()</code>. That produces a Typescript error that the type returned by <code>fn()</code> cannot be assigned to <code>res1</code>."}], "tags": [], "owner": {"reputation": 863, "user_id": 6363493, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fELeo-jOWgo/AAAAAAAAAAI/AAAAAAAAAgA/EtG2e0DbcQY/photo.jpg?sz=128", "display_name": "Maddy Blacklisted", "link": "https://stackoverflow.com/users/6363493/maddy-blacklisted"}, "is_accepted": false, "score": -1, "last_activity_date": 1570021296, "last_edit_date": 1570021296, "creation_date": 1570018692, "answer_id": 58201376, "question_id": 58201293, "link": "https://stackoverflow.com/questions/58201293/call-doesnt-return-the-correct-type/58201376#58201376", "title": "call() doesn&#39;t return the correct type", "body": "<p>Quite weird. Alternatively you can directly call the function using <code>fn()</code> and it will throw compilation errors.</p>\n\n<pre><code>let fn = function (): boolean {\n    return true\n}\n\nlet res1: number\nres1 = fn() // Will definitely result in error.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4015, "user_id": 3130281, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/X0JwQ.jpg?s=128&g=1", "display_name": "dodov", "link": "https://stackoverflow.com/users/3130281/dodov"}, "edited": false, "score": 0, "creation_date": 1570019025, "post_id": 58201381, "comment_id": 102780788, "body": "Wondering why it isn&#39;t enabled by default. Backwards compatibility?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 4015, "user_id": 3130281, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/X0JwQ.jpg?s=128&g=1", "display_name": "dodov", "link": "https://stackoverflow.com/users/3130281/dodov"}, "edited": false, "score": 0, "creation_date": 1570019928, "post_id": 58201381, "comment_id": 102781251, "body": "@HristiyanDodov Yes. The &quot;fixed&quot; link you posted in your question addresses that: it could break existing code."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 4015, "user_id": 3130281, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/X0JwQ.jpg?s=128&g=1", "display_name": "dodov", "link": "https://stackoverflow.com/users/3130281/dodov"}, "edited": false, "score": 1, "creation_date": 1570019935, "post_id": 58201381, "comment_id": 102781258, "body": "@HristiyanDodov yes, this is a major breaking change so it is behind a flag. If <code>strict</code> is enabled you get <code>strictBindCallApply</code> by defualt"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1570026505, "post_id": 58201381, "comment_id": 102785315, "body": "&quot;not available in the playground&quot;  Yeah, <a href=\"https://github.com/microsoft/TypeScript-Website/issues/12\" rel=\"nofollow noreferrer\">this issue</a> persists."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 5, "last_activity_date": 1570018717, "creation_date": 1570018717, "answer_id": 58201381, "question_id": 58201293, "link": "https://stackoverflow.com/questions/58201293/call-doesnt-return-the-correct-type/58201381#58201381", "title": "call() doesn&#39;t return the correct type", "body": "<p>There is a special compiler option (which is not available in the playground) which makes <code>call</code> and <code>bind</code> and <code>apply</code> preserve correct type.</p>\n\n<p>The option is <code>strictBindCallApply</code>  and you can read about it <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>Enable stricter checking of the bind, call, and apply methods on functions.</p>\n</blockquote>\n\n<p>With this option set to true your code will error as expected.</p>\n"}], "owner": {"reputation": 4015, "user_id": 3130281, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/X0JwQ.jpg?s=128&g=1", "display_name": "dodov", "link": "https://stackoverflow.com/users/3130281/dodov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58201381, "answer_count": 2, "score": 3, "last_activity_date": 1570021296, "creation_date": 1570018425, "question_id": 58201293, "link": "https://stackoverflow.com/questions/58201293/call-doesnt-return-the-correct-type", "title": "call() doesn&#39;t return the correct type", "body": "<p>I have the following typescript:</p>\n\n<pre><code>let fn = function (): boolean {\n    return true\n}\n\nlet res1: number\n\nres1 = fn.call(null) // Should error\n</code></pre>\n\n<p>I shouldn't be allowed to assign <code>res1</code> because it's declared as <code>number</code> and the result of <code>fn.call()</code> would be <code>boolean</code>. Check in <a href=\"https://www.typescriptlang.org/play/#code/DYUwLgBAZgdhC80CuMDGYCWB7OAKAlAFwQBGWWoAhnAN4CwAUBMxAE7hKtxitIiMBfRo1CR2AZwCMxGEgC2JEK2EMJkhNBgA6VJWDBcs-fggB6UxADKACyxJgAEwhLWWVkA\" rel=\"nofollow noreferrer\">the playground</a>.</p>\n\n<p>This was an <a href=\"https://github.com/microsoft/TypeScript/issues/212\" rel=\"nofollow noreferrer\">issue</a> but it was <a href=\"https://github.com/microsoft/TypeScript/pull/27028\" rel=\"nofollow noreferrer\">fixed</a>, so am I doing something wrong?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "typescript-generics"], "answers": [{"tags": [], "owner": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "is_accepted": true, "score": 3, "last_activity_date": 1572369363, "creation_date": 1572369363, "answer_id": 58612425, "question_id": 58200824, "link": "https://stackoverflow.com/questions/58200824/generic-react-typescript-component-with-as-prop-able-to-render-any-valid-dom/58612425#58612425", "title": "Generic React TypeScript component with &#39;as&#39; prop (able to render any valid dom node)", "body": "<p>It's fairly easy to implement the second variant \u2014 the one where an explicit type argument is required:</p>\n\n<p><strong>Solution one</strong></p>\n\n<pre><code>import * as React from 'react';\n\ntype Props&lt;K extends keyof JSX.IntrinsicElements&gt; = JSX.IntrinsicElements[K];\n\ndeclare class MyComponent&lt;K extends keyof JSX.IntrinsicElements&gt; extends React.Component&lt;Props&lt;K&gt;&gt; {}\n\n&lt;MyComponent&lt;'a'&gt; href=\"https://example.com/\" id=\"myLink\" /&gt;;\n</code></pre>\n\n<p><strong>Solution two</strong></p>\n\n<p>When it comes to the first variant, it's more tricky. What you want is not a generic component, but a union of props. To illustrate why, let's consider a concrete example when <code>MyComponent</code> handles only a union of <code>a</code> and <code>button</code>.</p>\n\n<pre><code>import * as React from 'react';\n\ntype Props =\n   | ({ as: 'a' } &amp; JSX.IntrinsicElements['a'])\n   | ({ as: 'button' } &amp; JSX.IntrinsicElements['button']);\n\ndeclare class MyComponent&lt;T extends 'a' | 'button'&gt; extends React.Component&lt;Props&gt; {}\n\n&lt;MyComponent as=\"a\" href=\"https://example.com\" /&gt;; // \u2714 OK\n&lt;MyComponent as=\"button\" href=\"https://example.com\" /&gt;; // \u2718 Compile-time error\n</code></pre>\n\n<p><code>MyComponent</code> doesn't have to be generic in order to recognize which props it should receive. The <code>as</code> prop is a sufficient discriminant.</p>\n\n<p>We can generalize this example by creating a union of all tags and their respective props:</p>\n\n<pre><code>import * as React from 'react';\n\ntype Props = {\n  [K in keyof JSX.IntrinsicElements]: { as: K } &amp; JSX.IntrinsicElements[K];\n}[keyof JSX.IntrinsicElements];\n\ndeclare class MyComponent extends React.Component&lt;Props&gt; {}\n\n&lt;MyComponent as=\"a\" href=\"https://example.com\" /&gt;; // \u2714 OK\n&lt;MyComponent as=\"button\" href=\"https://example.com\" /&gt;; // \u2718 Compile-time error\n</code></pre>\n\n<hr>\n\n<p>This will get the job done, as it's the same as if we defined our union manually. However, creating such a huge union has downsides:</p>\n\n<ul>\n<li>IntelliSense becomes painfully slow</li>\n<li>Error messages become cryptic</li>\n<li>The overall complexity increases.</li>\n</ul>\n\n<p>Just something to be aware of! ;)</p>\n"}], "owner": {"reputation": 1545, "user_id": 1574676, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e123224bf984600f678ed2ef6c94a3f9?s=128&d=identicon&r=PG", "display_name": "Samuel", "link": "https://stackoverflow.com/users/1574676/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 58612425, "answer_count": 1, "score": 2, "last_activity_date": 1572369363, "creation_date": 1570016645, "question_id": 58200824, "link": "https://stackoverflow.com/questions/58200824/generic-react-typescript-component-with-as-prop-able-to-render-any-valid-dom", "title": "Generic React TypeScript component with &#39;as&#39; prop (able to render any valid dom node)", "body": "<p>I have this working as expected in the below example, my question is - is there anyway i can rewrite this so that i don't have to pass both a generic <code>T</code> and the <code>as</code> prop. I would ideally like to just pass the <code>as</code> prop and have the component's prop interface use that. </p>\n\n<p>Is this possible in TypeScript?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type Props&lt;\n  T extends keyof JSX.IntrinsicElements\n&gt; = JSX.IntrinsicElements[T] &amp; {\n  as?: keyof JSX.IntrinsicElements\n}\n\nexport const MyComponent = &lt;T extends keyof JSX.IntrinsicElements&gt;({\n  as: Component = 'div',\n}: Props&lt;T&gt;) =&gt; {\n   // Stuff\n   return &lt;Component /&gt;\n}\n\n\n// Usage\nconst Anchor = () =&gt; &lt;MyComponent&lt;'a'&gt; href='foo' as='a' id='bar' /&gt;\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "react-native", "high-order-component"], "comments": [{"owner": {"reputation": 755, "user_id": 6435499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/244d37481cf44b077f10bb90077964c6?s=128&d=identicon&r=PG&f=1", "display_name": "Nghi Nguyen", "link": "https://stackoverflow.com/users/6435499/nghi-nguyen"}, "edited": false, "score": 0, "creation_date": 1570015986, "post_id": 58200510, "comment_id": 102779162, "body": "NewAdHoc is a component that is returned from HOC NewAd. I think you should export NewAd and use NewAd instead of NewAdHoc"}], "answers": [{"tags": [], "owner": {"reputation": 15766, "user_id": 10106580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCnek.jpg?s=128&g=1", "display_name": "Dupocas", "link": "https://stackoverflow.com/users/10106580/dupocas"}, "is_accepted": true, "score": 1, "last_activity_date": 1570015817, "creation_date": 1570015817, "answer_id": 58200611, "question_id": 58200510, "link": "https://stackoverflow.com/questions/58200510/how-to-use-hoc-with-react-native/58200611#58200611", "title": "How to use HoC with React Native", "body": "<p>The main purpose of a <code>HOC</code> is to encapsulate and reuse <code>stateful</code> logic across components.  Since you are just reusing some <code>jsx</code> and injecting nothing in <code>WrappedComponent</code> you should be using a regular component here:</p>\n\n<pre><code>const NewAd = ({ contentText, children }) =&gt; {\n\n    handleBackPress = () =&gt; {\n        this.props.navigation.navigate('Home');\n        StatusBar.setBarStyle('dark-content', true);\n    }\n\n\n    return (\n        &lt;View style={styles.container}&gt;\n            &lt;Header\n                headerText={'Yeni ilan ekle'}\n                onPress={this.handleBackPress}\n            /&gt;\n            &lt;View style={styles.contentContainer}&gt;\n                &lt;Text style={styles.contentHeader}&gt;{contentText}&lt;/Text&gt;\n                {children}\n            &lt;/View&gt;\n        &lt;/View&gt;\n    );\n}\n</code></pre>\n\n<p>And use it like this</p>\n\n<pre><code>return(\n    &lt;&gt;\n         &lt;NewAd&gt;\n            &lt;Screen1 /&gt;\n         &lt;/NewAd&gt;\n         &lt;NewAd&gt;\n            &lt;Screen2 /&gt;\n         &lt;/NewAd&gt;\n         &lt;NewAd&gt;\n            &lt;Screen3 /&gt;\n         &lt;/NewAd&gt;\n    &lt;/&gt;\n)\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 6948328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0777a6d47771e90411f6be98ead5b75?s=128&d=identicon&r=PG&f=1", "display_name": "AlkanV", "link": "https://stackoverflow.com/users/6948328/alkanv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1690, "favorite_count": 0, "accepted_answer_id": 58200611, "answer_count": 1, "score": 0, "last_activity_date": 1570015817, "creation_date": 1570015476, "question_id": 58200510, "link": "https://stackoverflow.com/questions/58200510/how-to-use-hoc-with-react-native", "title": "How to use HoC with React Native", "body": "<p>I have an listing app where users can add items for multiple categories, when they want to add new record, there are 3 related screens with this particular feature. All of those screens have <code>&lt;Header/&gt;</code> component, so i thought HoC would be nice here so that i can reuse it across 3 screens.\nHowever, i could not accomplish it. </p>\n\n<p>Here is what i tried so far:</p>\n\n<p>This is my HoC class</p>\n\n<pre><code>import React, { Component } from 'react';\nimport { View, StyleSheet, Text, StatusBar } from 'react-native';\nimport Header from '../components/Header';\n\nconst NewAd = (WrappedComponent) =&gt; {\n    class NewAdHoc extends Component {\n        handleBackPress = () =&gt; {\n            this.props.navigation.navigate('Home');\n            StatusBar.setBarStyle('dark-content', true);\n        }\n        render() {\n            const {contentText, children} = this.props\n            return (\n                &lt;View style={styles.container}&gt;\n                    &lt;Header\n                        headerText={'Yeni ilan ekle'}\n                        onPress={this.handleBackPress}\n                    /&gt;\n                    &lt;View style={styles.contentContainer}&gt;\n                        &lt;Text style={styles.contentHeader}&gt;{contentText}&lt;/Text&gt;\n                        &lt;WrappedComponent/&gt;\n                    &lt;/View&gt;\n                &lt;/View&gt;\n            );\n        }\n    }\n\n\n    return NewAdHoc;\n}\n\n</code></pre>\n\n<p>this is my screen: </p>\n\n<pre><code>class NewAdScreen extends Component {\n    render() {\n        const Content = () =&gt; {\n            return (\n                &lt;View style={styles.flatListContainer}&gt;\n                    &lt;ListViewItem /&gt;\n                &lt;/View&gt;\n            );\n        }\n        return (\n            NewAdHoc(Content)\n        )\n    }\n}\n</code></pre>\n\n<p>after that i am getting error</p>\n\n<pre><code>TypeError: (0 , _NewAdHoc.NewAdHoc) is not a function(\u2026)\n</code></pre>\n\n<p>and i have no idea how can i fix it because this is my first time using hocs on a react-native app. I have looked why this error is popping and they suggest import components in this way: </p>\n\n<pre><code>import {NewAdHoc} from '../hocs/NewAdHoc';\n</code></pre>\n\n<p>but even this is not solved it. </p>\n\n<p>any help will be appreciated, thanks.</p>\n"}, {"tags": ["node.js", "typescript", "express"], "answers": [{"comments": [{"owner": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "edited": false, "score": 0, "creation_date": 1589848994, "post_id": 58201879, "comment_id": 109450804, "body": "Why doesn&#39;t it know about it? His <code>IResponse</code> extends <code>Response</code>"}, {"owner": {"reputation": 700, "user_id": 2011679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjOmj.jpg?s=128&g=1", "display_name": "theanurin", "link": "https://stackoverflow.com/users/2011679/theanurin"}, "reply_to_user": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "edited": false, "score": 1, "creation_date": 1589915431, "post_id": 58201879, "comment_id": 109481543, "body": "routes.use(...) expect Response, not IResponse. This like developers of Express Router does not know anything about IResponse. But IResponse requires to fields &quot;error&quot; and &quot;success&quot;. So, developers of Express Router should pass this field, but they are don&#39;t"}], "tags": [], "owner": {"reputation": 700, "user_id": 2011679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjOmj.jpg?s=128&g=1", "display_name": "theanurin", "link": "https://stackoverflow.com/users/2011679/theanurin"}, "is_accepted": true, "score": 6, "last_activity_date": 1570020638, "creation_date": 1570020638, "answer_id": 58201879, "question_id": 58200432, "link": "https://stackoverflow.com/questions/58200432/argument-of-type-req-request-res-iresponse-next-nextfunction-void-is/58201879#58201879", "title": "Argument of type &#39;(req: Request, res: IResponse, next: NextFunction) =&gt; void&#39; is not assignable to parameter of type &#39;PathParams&#39; with express.js", "body": "<p>Express does not know anything about your interface <code>IResponse</code>. So the method cannot match.</p>\n\n<p>To achieve your idea, use <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation\" rel=\"noreferrer\">module augmentation</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Request, Response, NextFunction } from \"express\";\n\ndeclare module 'express-serve-static-core' {\n    interface Response {\n        error: (code: number, message: string) =&gt; Response;\n        success: (code: number, message: string, result: any) =&gt; Response\n    }\n}\n\nconst routeHandler = (req: Request, res: Response, next: NextFunction) =&gt; {\n    res.error = (statusCode: number, errorMessage: string) =&gt; res.status(statusCode).json(errorMessage);\n    res.success = (statusCode: number, message: string, result: any) =&gt; res.status(statusCode).json({\n        message,\n        result\n    });\n    return next();\n};\n\nexport default routeHandler;\n</code></pre>\n"}], "owner": {"reputation": 2890, "user_id": 6548980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/caade3ef19a80055e33ce9c2ac8c41b8?s=128&d=identicon&r=PG&f=1", "display_name": "Slim", "link": "https://stackoverflow.com/users/6548980/slim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5265, "favorite_count": 0, "accepted_answer_id": 58201879, "answer_count": 1, "score": 4, "last_activity_date": 1570020638, "creation_date": 1570015177, "question_id": 58200432, "link": "https://stackoverflow.com/questions/58200432/argument-of-type-req-request-res-iresponse-next-nextfunction-void-is", "title": "Argument of type &#39;(req: Request, res: IResponse, next: NextFunction) =&gt; void&#39; is not assignable to parameter of type &#39;PathParams&#39; with express.js", "body": "<p>I'm creating a route handler and I want to add it in my routes:</p>\n\n<pre><code>import { Request, Response, NextFunction } from \"express\";\n\ninterface IResponse extends Response {\n  error: (code: number, message: string) =&gt; Response;\n  success: (code: number, message: string, result: any) =&gt; Response\n}\nconst routeHandler = (req: Request, res: IResponse, next: NextFunction) =&gt; {\n  res.error = (statusCode: number, errorMessage: string) =&gt; res.status(statusCode).json(errorMessage);\n  res.success = (statusCode: number, message: string, result: any) =&gt; res.status(statusCode).json({\n    message,\n    result\n  });\n  return next();\n};\n\nexport default routeHandler;\n</code></pre>\n\n<p>when I added this handler to the routes index file:</p>\n\n<pre><code>import { Router } from \"express\";\nimport routeHandler from \"../utils/helpers\";\n\nconst routes = Router();\nroutes.use(routeHandler);\n\nexport default routes;\n\n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code>No overload matches this call.\n  The last overload gave the following error.\n    Argument of type '(req: Request, res: IResponse, next: NextFunction) =&gt; void' is not assignable to parameter of type 'PathParams'.\n      Type '(req: Request, res: IResponse, next: NextFunction) =&gt; void' is missing the following properties from type '(string | RegExp)[]': pop, push, concat, join, and 25 more.ts(2769)\nindex.d.ts(55, 5): The last overload is declared here.\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "setstate", "use-effect"], "comments": [{"owner": {"reputation": 39336, "user_id": 1377002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oDeF7.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/1377002/andy"}, "edited": false, "score": 1, "creation_date": 1570014367, "post_id": 58200138, "comment_id": 102778370, "body": "When you call <code>getPayout</code> or <code>getTotalOdds</code> you update the state and the effect is run when the state changes which then calls those methods which update the state but the effect runs when you update the state and it calls those methods which update the state... is the reason for the infinite loop."}], "answers": [{"tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": true, "score": 3, "last_activity_date": 1570014538, "creation_date": 1570014538, "answer_id": 58200275, "question_id": 58200138, "link": "https://stackoverflow.com/questions/58200138/infinite-loop-while-using-useeffect/58200275#58200275", "title": "Infinite loop while using useEffect", "body": "<ol>\n<li>You can divide state into smaller chunks:</li>\n</ol>\n\n<pre><code>const [stake, setStake] = useState(10);\nconst [totalOdds, setTotalOdds] = useState(0);\nconst [potentialPayout, setPotentialPayout] = useState(0);\n</code></pre>\n\n<p>Easier to manage.</p>\n\n<ol start=\"2\">\n<li>If your <code>useEffect</code> is called every time <code>state</code> has changed, and on the other hand every <code>useEffect</code> returns new state object - well. Infinite loop.</li>\n</ol>\n\n<p>Just put the calculations in the <code>onChange</code> function and you won't need <code>useEffect</code> at all (or just use <code>useEffect</code> to cause side effects, like <code>console.log</code>);</p>\n"}], "owner": {"reputation": 2072, "user_id": 7317408, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-mMn0XC-_zd8/AAAAAAAAAAI/AAAAAAAACag/6sAIuewEPiY/photo.jpg?sz=128", "display_name": "A7DC", "link": "https://stackoverflow.com/users/7317408/a7dc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 58200275, "answer_count": 1, "score": 0, "last_activity_date": 1570014538, "creation_date": 1570014028, "question_id": 58200138, "link": "https://stackoverflow.com/questions/58200138/infinite-loop-while-using-useeffect", "title": "Infinite loop while using useEffect", "body": "<p>I am looping through the contents of the following array: </p>\n\n<pre><code>chosenBets: [\n    {\n        id: 2,\n        label: 2,\n        odd: 4.8,\n        team_home: \"Liverpool\",\n        team_away: \"Sheffield United\",\n    },\n    {\n        id: 2,\n        label: 2,\n        odd: 4.8,\n        team_home: \"Liverpool\",\n        team_away: \"Sheffield United\",\n    },\n],\n</code></pre>\n\n<p>To get the total odds of each bet:</p>\n\n<pre><code>const getTotalOdds = () =&gt; {\n    let totalOdds = 0\n    chosenBets.forEach(bet =&gt; {\n        totalOdds += bet.odd\n    })\n\n    let newState = Object.assign({}, state)\n    newState.totalOdds = totalOdds\n    setState({ ...newState })\n}\n</code></pre>\n\n<p>But when I call the function inside of <code>useEffect</code> it causes an infinite loop.</p>\n\n<p>Full code:</p>\n\n<pre><code>import * as React from \"react\"\nimport { Frame, Stack, addPropertyControls, ControlType } from \"framer\"\nimport { Input } from \"./Input\"\n\ninterface Bets {\n    id: number\n    label: number\n    odd: number\n    team_home: string\n    team_away: string\n}\n\ninterface IProps {\n    chosenBets: Bets[]\n}\n\nconst style = {\n    span: {\n        display: \"block\",\n    },\n}\n\nconst Row = ({ label, property }) =&gt; (\n    &lt;div style={{ display: \"flex\", width: \"100%\" }}&gt;\n        &lt;span style={{ ...style.span, marginRight: \"auto\" }}&gt;{label}&lt;/span&gt;\n        &lt;span style={{ ...style.span }}&gt;{property}&lt;/span&gt;\n    &lt;/div&gt;\n)\n\nexport const BetCalculator: React.FC&lt;IProps&gt; = props =&gt; {\n    const { chosenBets } = props\n\n    const [state, setState] = React.useState({\n        stake: 10,\n        totalOdds: 0,\n        potentialPayout: 0,\n    })\n\n    const { stake, totalOdds } = state\n\n    const onChange = e =&gt; {\n        let newState = Object.assign({}, state)\n        newState.stake = Number(e.value)\n        setState({ ...newState })\n    }\n\n    const getTotalOdds = () =&gt; {\n        let totalOdds = 0\n        chosenBets.forEach(bet =&gt; {\n            totalOdds += bet.odd\n        })\n\n        let newState = Object.assign({}, state)\n        newState.totalOdds = totalOdds\n        setState({ ...newState })\n    }\n\n    const getPayout = () =&gt; {\n        let potentialPayout = totalOdds * stake\n        console.log(potentialPayout, \"potentialPayout\")\n        // let newState = Object.assign({}, state)\n        // newState.potentialPayout = potentialPayout\n        // setState({ ...newState })\n    }\n\n    React.useEffect(() =&gt; {\n        getTotalOdds()\n        getPayout()\n    }, [state])\n\n    return (\n        &lt;Stack alignment=\"end\" backgroundColor=\"white\"&gt;\n            &lt;Row\n                label=\"stake\"\n                property={&lt;Input onChange={onChange} value={stake} /&gt;}\n            /&gt;\n            &lt;Row label=\"Odds\" property={totalOdds} /&gt;\n        &lt;/Stack&gt;\n    )\n}\n\nBetCalculator.defaultProps = {\n    chosenBets: [\n        {\n            id: 2,\n            label: 2,\n            odd: 4.8,\n            team_home: \"Liverpool\",\n            team_away: \"Sheffield United\",\n        },\n        {\n            id: 2,\n            label: 2,\n            odd: 4.8,\n            team_home: \"Liverpool\",\n            team_away: \"Sheffield United\",\n        },\n    ],\n}\n</code></pre>\n\n<p>My questions are as follows:</p>\n\n<ul>\n<li>What is causing this?</li>\n<li>How do I resolve?</li>\n</ul>\n"}, {"tags": ["javascript", "arrays", "angular", "typescript", "sorting"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 1, "creation_date": 1570013313, "post_id": 58199928, "comment_id": 102777882, "body": "You&#39;re displaying your array in a synchronous way, while you&#39;re fetching data in an asychronous way."}, {"owner": {"reputation": 89878, "user_id": 1945651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9J4D8.png?s=128&g=1", "display_name": "JLRishe", "link": "https://stackoverflow.com/users/1945651/jlrishe"}, "edited": false, "score": 1, "creation_date": 1570013472, "post_id": 58199928, "comment_id": 102777949, "body": "The sorting isn&#39;t working because you&#39;re sorting the array when it&#39;s empty."}], "answers": [{"tags": [], "owner": {"reputation": 3503, "user_id": 10036039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6525d104fc1903b759afa7a7ff40cf22?s=128&d=identicon&r=PG&f=1", "display_name": "zerocewl", "link": "https://stackoverflow.com/users/10036039/zerocewl"}, "is_accepted": false, "score": 0, "last_activity_date": 1570018108, "creation_date": 1570018108, "answer_id": 58201209, "question_id": 58199928, "link": "https://stackoverflow.com/questions/58199928/pushing-items-to-array-makes-the-array-not-sortable/58201209#58201209", "title": "Pushing items to array makes the array not sortable?", "body": "<p>You have to sort the array inside your subscribe call, otherwise your data isn't ready if you sort it.</p>\n\n<p>E.g:</p>\n\n<pre><code>let chartArr: any = [];\n\n doc.forEach(user =&gt; {\n        eventTasksRefCount = this.afs.collection('eventTask', ref =&gt; ref.where('uid', '==', user.uid));\n        eventTasksObservableCount = eventTasksRefCount.valueChanges();\n        eventTasksObservableCount.subscribe(result =&gt; {\n        this.chartArr.push({text: user.displayName, assignedTasks: result.length });\n        console.log(this.chartArr.sort((a, b) =&gt; b.assignedTasks - a.assignedTasks ));\n        });\n</code></pre>\n\n<p>But be careful now you always sort if some new result comes in, i don't know if this is intended.</p>\n\n<p>Have a look at <a href=\"https://angular.io/guide/observables#observables\" rel=\"nofollow noreferrer\">angulars observable guide</a>  for further details.</p>\n"}], "owner": {"reputation": 217, "user_id": 987353, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d97180e2e9c2e97436bc39566266a5d1?s=128&d=identicon&r=PG", "display_name": "Magnus Jonsson", "link": "https://stackoverflow.com/users/987353/magnus-jonsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1570019451, "answer_count": 1, "score": 0, "last_activity_date": 1570018108, "creation_date": 1570013086, "last_edit_date": 1570013488, "question_id": 58199928, "link": "https://stackoverflow.com/questions/58199928/pushing-items-to-array-makes-the-array-not-sortable", "closed_reason": "Duplicate", "title": "Pushing items to array makes the array not sortable?", "body": "<p>In my typescript code (angular component) I need to populate an array and then sort it. However, the array doesn't sort? If I  instead instantiate/populate the array \"manually\" it sorts as expected. What am I missing?</p>\n\n<p>This works:</p>\n\n<pre><code>let chartArr: any = [];\n\nchartArr = [\n  {text: 'AA', assignedTasks: 3},\n  {text: 'BB', assignedTasks: 7},\n  {text: 'CC', assignedTasks: 1},\n  {text: 'DD', assignedTasks: 10},\n];\n\nconsole.log(this.chartArr.sort((a, b) =&gt; b.assignedTasks - a.assignedTasks ));\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>let chartArr: any = [];\n\n doc.forEach(user =&gt; {\n        eventTasksRefCount = this.afs.collection('eventTask', ref =&gt; ref.where('uid', '==', user.uid));\n        eventTasksObservableCount = eventTasksRefCount.valueChanges();\n        eventTasksObservableCount.subscribe(result =&gt; {\n        this.chartArr.push({text: user.displayName, assignedTasks: result.length });\n\n\n        });\n\nconsole.log(this.chartArr.sort((a, b) =&gt; b.assignedTasks - a.assignedTasks ));\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 4505, "user_id": 1956072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bcd4bb9c114b7f5e3a0e8462fcded2?s=128&d=identicon&r=PG", "display_name": "kvetis", "link": "https://stackoverflow.com/users/1956072/kvetis"}, "is_accepted": true, "score": 2, "last_activity_date": 1570012618, "creation_date": 1570012618, "answer_id": 58199828, "question_id": 58199780, "link": "https://stackoverflow.com/questions/58199780/response-message-in-angular/58199828#58199828", "title": "Response Message in angular", "body": "<p>Just delete the else branch of the condition.</p>\n\n<pre><code>return this.http.post(url, userData, httpOptions).pipe(\n      map((response)=&gt;{\n        if(response['statusCode'] !== 0){\n          throw new Error(response['statusMessage']);\n        }\n      })\n    )\n</code></pre>\n"}], "owner": {"reputation": 538, "user_id": 12022853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0a5493bb8bf4c574691d6ec6a997e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravu", "link": "https://stackoverflow.com/users/12022853/pravu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58199828, "answer_count": 1, "score": -1, "last_activity_date": 1570012618, "creation_date": 1570012432, "question_id": 58199780, "link": "https://stackoverflow.com/questions/58199780/response-message-in-angular", "title": "Response Message in angular", "body": "<p>I got problem with throw error message. Event <code>statusCode == 0</code> but it still chose <code>this.snackBar.open(</code>Cannot Proses!<code>+ err, \"OK\", snackBarConfig);</code>. How to make it chose <code>this.snackBar.open(</code>Success!<code>, \"OK\", snackBarConfig);</code></p>\n\n<p><strong>Component Service</strong></p>\n\n<pre><code>return this.http.post(url, userData, httpOptions).pipe(\n      map((response)=&gt;{\n        if(response['statusCode'] !== 0){\n          throw new Error(response['statusMessage']);\n        }else{\n          throw new Error(response['statusMessage']);\n        }\n      })\n    )\n</code></pre>\n\n<p><strong>Component</strong></p>\n\n<pre><code>this.userservice.userForm(test).subscribe(\n        res =&gt; {\n          this.dialogRef.close();\n          this.snackBar.open(`Success!`, \"OK\", snackBarConfig);\n        },\n        err =&gt; {\n          this.dialogRef.close();\n          this.snackBar.open(`Cannot Proses!` + err, \"OK\", snackBarConfig);\n            console.log(\"check error:\" + err);\n\n        }\n      );\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "ngrx", "redux-devtools"], "answers": [{"tags": [], "owner": {"reputation": 9151, "user_id": 10112124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6297e8a8df7affbe897ed476212148?s=128&d=identicon&r=PG", "display_name": "timdeschryver", "link": "https://stackoverflow.com/users/10112124/timdeschryver"}, "is_accepted": true, "score": 1, "last_activity_date": 1570043369, "creation_date": 1570043369, "answer_id": 58207925, "question_id": 58199554, "link": "https://stackoverflow.com/questions/58199554/ngrx-store-devtools-actionsblocklist/58207925#58207925", "title": "ngrx/store-devtools actionsBlocklist", "body": "<p>This is because it's using a regex check under the hood.\nBecause the action name contains of <code>[</code> and <code>]</code>, the check will fail and won't block the action.</p>\n\n<p>Unfortunately the typings don't allow a regex to be passes, but as a workaround you can do:</p>\n\n<pre><code>actionsBlocklist: [/\\[ACTION\\] NAME_OF_ACTION/.source] \n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10999632, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_c0mJDtIEF0/AAAAAAAAAAI/AAAAAAAAAPY/D5pvuvyySfg/photo.jpg?sz=128", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/10999632/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 58207925, "answer_count": 1, "score": -1, "last_activity_date": 1570043369, "creation_date": 1570011326, "last_edit_date": 1570027055, "question_id": 58199554, "link": "https://stackoverflow.com/questions/58199554/ngrx-store-devtools-actionsblocklist", "title": "ngrx/store-devtools actionsBlocklist", "body": "<p>Hello I would like not display one of my actions in extension Redux DevTools. I thought I could do it with property actionBlocklist but when I wrote this: </p>\n\n<pre><code> StoreDevtoolsModule.instrument({\n      maxAge: 25,\n      logOnly: environment.production,\n      actionsBlocklist: ['[ACTION] NAME_OF_ACTION'] }),\n</code></pre>\n\n<p>nothing is change. I'm sure that name of action is same as name from redux. Maybe I misunderstanding concept of this property. </p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "is_accepted": true, "score": 0, "last_activity_date": 1575159339, "creation_date": 1575159339, "answer_id": 59121474, "question_id": 58199157, "link": "https://stackoverflow.com/questions/58199157/reactjs-typescript-properties-are-not-initialised-in-child-component-created-f/59121474#59121474", "title": "Reactjs Typescript - Properties are not initialised in child component created from parent component render method", "body": "<p>Solved this! The problem was in the code for RestDataSource.getCourses(). This was not transforming to properties model. The JSON properties returned from the Rest API included CourseID and CourseName properties. The react child component Course included properties courseID and courseName. Fixed by ensuring properties exactly matched.</p>\n"}], "owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 59121474, "answer_count": 1, "score": 0, "last_activity_date": 1575159339, "creation_date": 1570009802, "last_edit_date": 1570017035, "question_id": 58199157, "link": "https://stackoverflow.com/questions/58199157/reactjs-typescript-properties-are-not-initialised-in-child-component-created-f", "title": "Reactjs Typescript - Properties are not initialised in child component created from parent component render method", "body": "<p>Hi I am trying to learn React with Typescript. </p>\n\n<p>I have encountered a problem whereby properties are not being initialised in a child component that is created from parent component render method. </p>\n\n<p>Within the render method of the parent component the console log prints the list items. If I uncomment the constructor of the child component I can see that the properties are empty. </p>\n\n<p>What is the correct way in ReactJs to render a child component and pass properties?</p>\n\n<p><strong>Solved</strong>\nSolved this! The problem was in the code for RestDataSource.getCourses(). This was not transforming to properties model. The JSON from the Rest API returned included CourseID and CourseName properties. The react child component Course included properties courseID and courseName. Fixed by ensuring properties exactly matched.</p>\n\n<p><strong>CourseList.ts (Parent)</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as React from 'react';\n\nimport Course from './Course';\nimport { CourseProps } from './Course';\nimport { RestDataCourse } from '../data/RestDataCourse';\n\ntype CourseListProps = {};\n\ntype CourseListState = {\n  courses: Array&lt;CourseProps&gt;;\n};\n\nexport default class CourseList extends React.Component&lt;\n  CourseListProps,\n  CourseListState\n&gt; {\n  constructor(props: CourseListProps) {\n    super(props);\n    this.state = { courses: new Array&lt;CourseProps&gt;() };\n  }\n\n  async componentDidMount(): Promise&lt;void&gt; {\n    console.log('CourseList::componentDidMount');\n\n    const dataSource: RestDataCourse = new RestDataCourse();\n    const coursesList: Array&lt;CourseProps&gt; = await dataSource.getCourses();\n\n    this.setState({ courses: coursesList });\n  }\n\n  async componentWillUnmount(): Promise&lt;void&gt; {\n    console.log('CourseList::componentWillUnmout');\n  }\n\n  public render(): JSX.Element {\n    console.log('CourseList::render =&gt; ' + JSON.stringify(this.state.courses));\n    return (\n      &lt;div&gt;\n        {this.state.courses.map(c =&gt; (\n          &lt;Course\n            key={c.courseID}\n            courseID={c.courseID}\n            courseName={c.courseName}\n          /&gt;\n        ))}\n      &lt;/div&gt;\n    );\n  }\n}\n\n</code></pre>\n\n<p><strong>Course.ts (Child)</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as React from 'react';\n\nexport interface CourseProps {\n  courseID: string;\n  courseName: string;\n}\n\nexport default class Course extends React.Component&lt;CourseProps, {}&gt; {\n  // constructor(props: CourseProps) {\n  //   super(props);\n  //   console.log(`Course::constructor =&gt; ${JSON.stringify(props)}`);\n  // }\n\n  componentDidMount(): void {\n    console.log('Course::componentDidMount');\n  }\n\n  componentWillUnmount(): void {\n    console.log('Course::componentWillUnmout');\n  }\n\n  public render(): JSX.Element {\n    console.log(\n      JSON.stringify(`Course::render =&gt; ${JSON.stringify(this.props)}`),\n    );\n    return (\n      &lt;div&gt;\n        Course render\n        {this.props.courseID}\n        {this.props.courseName}\n      &lt;/div&gt;\n    );\n  }\n}\n\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "dictionary", "redux"], "comments": [{"owner": {"reputation": 554, "user_id": 3143987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf70182ea295ab466210a6f9db15dfc7?s=128&d=identicon&r=PG&f=1", "display_name": "vipul patel", "link": "https://stackoverflow.com/users/3143987/vipul-patel"}, "edited": false, "score": 2, "creation_date": 1570010774, "post_id": 58199123, "comment_id": 102776801, "body": "It clearly says map property does not exist type steam. Now in your case whats the type of stream??  If its type is array then fine. It think in your case its type is Object. In Js there is no native map function on Object. It has only on Array. So TS os throwing error."}, {"owner": {"reputation": 1001, "user_id": 9455902, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jc2xy.jpg?s=128&g=1", "display_name": "Piotr \u017bak", "link": "https://stackoverflow.com/users/9455902/piotr-%c5%bbak"}, "reply_to_user": {"reputation": 554, "user_id": 3143987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf70182ea295ab466210a6f9db15dfc7?s=128&d=identicon&r=PG&f=1", "display_name": "vipul patel", "link": "https://stackoverflow.com/users/3143987/vipul-patel"}, "edited": false, "score": 0, "creation_date": 1570011780, "post_id": 58199123, "comment_id": 102777227, "body": "ok, how can i convert Obj to Array in this case?"}, {"owner": {"reputation": 554, "user_id": 3143987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf70182ea295ab466210a6f9db15dfc7?s=128&d=identicon&r=PG&f=1", "display_name": "vipul patel", "link": "https://stackoverflow.com/users/3143987/vipul-patel"}, "edited": false, "score": 1, "creation_date": 1570017233, "post_id": 58199123, "comment_id": 102779791, "body": "Its pretty simple !!  you can use library like lodash for all utilities functions or with native Js first get the keys of stream and then map like :   Object.keys(stream).map(key =&gt; ( { id : stream[key].id })"}], "answers": [{"tags": [], "owner": {"reputation": 280, "user_id": 7938798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec6736a8129da9a5c78908c87f3dac4?s=128&d=identicon&r=PG&f=1", "display_name": "Kartal Erkoc", "link": "https://stackoverflow.com/users/7938798/kartal-erkoc"}, "is_accepted": true, "score": 1, "last_activity_date": 1570011001, "creation_date": 1570011001, "answer_id": 58199476, "question_id": 58199123, "link": "https://stackoverflow.com/questions/58199123/ts2339-cant-map-request-from-api/58199476#58199476", "title": "TS2339 - Can&#39;t map request from API", "body": "<p>You are trying to call <code>.map</code> function on an object type as declared in <code>IStreams</code>. Try to convert it to array of objects instead. You can try like below, calling the interface for object as <code>IStream</code> and expecting array of <code>IStream</code>. Also <code>InitialStreamsState</code> should be an array of objects.</p>\n\n<pre><code>interface IStream {\n  id: number;\n  category: string;\n  title: string;\n};\n\nlet Streams: React.FC&lt;IStream[]&gt; = (props) =&gt; {\n  const InitialStreamsState = [{id: 0, category: '', title: ''}];\n\n  const [loading, setLoading] = useState(false);\n  const [streams, setStreams] = useState(InitialStreamsState);\n\n  useEffect(() =&gt; {\n    fetch('http://localhost:5000/stream/getstreams')\n    .then(response =&gt; {\n      return response.json();\n    })\n    .then((responseStreams as IStream[]) =&gt; {\n      console.log(responseStreams);\n      const test = responseStreams.map(stream =&gt; ({id: stream.id, category: stream.category, title: stream.title}));\n      setLoading(true);\n      setStreams(test);\n    })\n    .catch(err =&gt;{\n      console.log(err);\n    });\n  }, []);\n\n  return (\n    &lt;div&gt;\n      {loading ?\n        &lt;Container&gt;\n          &lt;Row&gt;\n            &lt;Col xs=\"6\" sm=\"4\"&gt;\n              &lt;div className =\"home-header\"&gt;\n                &lt;h1&gt;Top Streams&lt;/h1&gt;\n                  {streams.map((id:any, category:any, title:any) =&gt; (\n                    &lt;p key={id}&gt;\n                      {title}\n                      {category}\n                    &lt;/p&gt;\n                  ))}\n                &lt;/div&gt;  \n              &lt;/Col&gt;\n            &lt;/Row&gt;\n          &lt;/Container&gt;\n        :\n          &lt;Container&gt;\n            &lt;Row&gt;\n              &lt;Col xs=\"6\" sm=\"4\"&gt;\n                &lt;div className =\"home-header\"&gt;\n                  &lt;h1&gt;Loading&lt;/h1&gt;\n                &lt;/div&gt;  \n              &lt;/Col&gt;\n            &lt;/Row&gt;\n          &lt;/Container&gt;\n        }\n      &lt;/div&gt;\n    );\n}\n\n\n</code></pre>\n"}], "owner": {"reputation": 1001, "user_id": 9455902, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jc2xy.jpg?s=128&g=1", "display_name": "Piotr \u017bak", "link": "https://stackoverflow.com/users/9455902/piotr-%c5%bbak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58199476, "answer_count": 1, "score": 0, "last_activity_date": 1570017161, "creation_date": 1570009664, "last_edit_date": 1570017161, "question_id": 58199123, "link": "https://stackoverflow.com/questions/58199123/ts2339-cant-map-request-from-api", "title": "TS2339 - Can&#39;t map request from API", "body": "<p>Good day, i have simple component, where I try to get specific data from API (This part works well - I can map data, save it to an array and save it to the 'streams' state in a hook.</p>\n\n<p>The objective is to display the id in the key, category and title.</p>\n\n<p>Error:\n<a href=\"https://i.stack.imgur.com/uII7L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uII7L.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>  interface IStreams {\n        id: number;\n        category: string;\n        title: string;\n      };\n\n     let Streams: React.FC&lt;IStreams&gt; = (props) =&gt; {\n\n        const InitialStreamsState = {id: 0, category: '', title: ''}\n\n        const [loading, setLoading] = useState(false)\n        const [streams, setStreams] = useState(InitialStreamsState)\n\n        useEffect(() =&gt; {\n            fetch('http://localhost:5000/stream/getstreams')\n            .then(response =&gt; {\n              return response.json();\n            })\n            .then(streams =&gt; {\n                console.log(streams);\n                const test = streams.map((obj:any) =&gt; ({id: obj.id, category: obj.category, title: obj.title}));\n                setLoading(true)\n                setStreams(test)\n            })\n            .catch(err =&gt;{\n                console.log(err);\n            });\n        }, []);\n\n        return (\n            &lt;div&gt;\n                {loading ?\n                    &lt;Container&gt;\n                    &lt;Row&gt;\n                        &lt;Col xs=\"6\" sm=\"4\"&gt;\n                        &lt;div className =\"home-header\"&gt;\n                        &lt;h1&gt;Top Streams&lt;/h1&gt;\n                                {streams.map((id:any, category:any, title:any) =&gt; (\n                                    &lt;p key={id}&gt;\n                                    {title}\n                                    {category}\n                                    &lt;/p&gt;\n                                ))}\n                        &lt;/div&gt;  \n                    &lt;/Col&gt;\n                    &lt;/Row&gt;\n                    &lt;/Container&gt;\n                         :\n                         &lt;Container&gt;\n                         &lt;Row&gt;\n                             &lt;Col xs=\"6\" sm=\"4\"&gt;\n                             &lt;div className =\"home-header\"&gt;\n                             &lt;h1&gt;Loading&lt;/h1&gt;\n                             &lt;/div&gt;  \n                         &lt;/Col&gt;\n                         &lt;/Row&gt;\n                         &lt;/Container&gt;\n                         }\n            &lt;/div&gt;\n        );\n      }\n</code></pre>\n\n<hr>\n\n<p>I don't know what i did but this piece of code works:</p>\n\n<pre><code>interface IStreams {\n    id: number;\n    category: string;\n    title: string;\n  };\n\nlet Streams: React.FC&lt;IStreams&gt; = (props) =&gt; {\n\n    const InitialStreamsState = {id: 0, title:'', description:''}\n\n    const [loading, setLoading] = useState(false)\n    //const [streams, setStreams] = useState([InitialStreamsState])\n    const [streams, setStreams] = useState([InitialStreamsState])\n\n    useEffect(() =&gt; {\n        fetch(API + '/stream/getstreams')\n        .then(response =&gt; {\n          return response.json();\n        })\n        .then(streams =&gt; {\n            //const result = streams.map((obj:any) =&gt; ({id: obj.id, category: obj.category, title: obj.title}));\n            const result = streams.map((obj:any) =&gt; ({id: obj.id, title: obj.title, description:obj.description}));\n            console.log(result)\n            setLoading(true)\n            setStreams(result)\n        })\n        .catch(err =&gt;{\n            console.log(err);\n        });\n    }, []);\n\n    return (\n        &lt;div&gt;\n            {loading ?\n                &lt;Container&gt;\n                &lt;Row&gt;\n                    &lt;Col xs=\"6\" sm=\"4\"&gt;\n                    &lt;div className =\"home-header\"&gt;\n                    &lt;h1&gt;Top Streams&lt;/h1&gt;\n                            {streams.map((stream) =&gt; (\n                                &lt;div key = {stream.id}&gt;\n                               &lt;h1&gt; {stream.title}&lt;/h1&gt;\n                               &lt;p&gt;{stream.description}&lt;/p&gt;\n                                &lt;Link to={{ \n                                        pathname: `/stream/${stream.id}`,\n                                        state: {id: stream.id}\n                                    }}&gt; \n                                    &lt;button className =\"primary-button\"&gt;View&lt;/button&gt;&lt;/Link&gt;\n                                &lt;/div&gt;\n                            ))}\n                    &lt;/div&gt;  \n                &lt;/Col&gt;\n                &lt;/Row&gt;\n                &lt;/Container&gt;\n                     :\n                     &lt;Container&gt;\n                     &lt;Row&gt;\n                         &lt;Col xs=\"6\" sm=\"4\"&gt;\n                         &lt;div className =\"home-header\"&gt;\n                         &lt;h1&gt;Loading&lt;/h1&gt;\n                         &lt;/div&gt;  \n                     &lt;/Col&gt;\n                     &lt;/Row&gt;\n                     &lt;/Container&gt;\n                     }\n        &lt;/div&gt;\n    );\n  }\n</code></pre>\n"}, {"tags": ["typescript", "webpack", "visual-studio-code", "breakpoints"], "comments": [{"owner": {"reputation": 727, "user_id": 11047953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38hjb.png?s=128&g=1", "display_name": "Rodrigo Gomez-Palacio", "link": "https://stackoverflow.com/users/11047953/rodrigo-gomez-palacio"}, "edited": false, "score": 0, "creation_date": 1591915003, "post_id": 58198898, "comment_id": 110244772, "body": "I&#39;m running into a similar issue. Did you ever figure it out?"}], "owner": {"reputation": 48, "user_id": 2405528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c9612cf12ecd2da5e8606005691482?s=128&d=identicon&r=PG", "display_name": "Markus Hoevermann", "link": "https://stackoverflow.com/users/2405528/markus-hoevermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1570008853, "creation_date": 1570008853, "question_id": 58198898, "link": "https://stackoverflow.com/questions/58198898/breakpoint-not-hit-in-vscode-with-webpack-and-typescript", "title": "Breakpoint not hit in vscode with webpack and typescript", "body": "<p>When starting vscode debugging with chrome extension, a breakpoint I set in vscode are not hit. When I then set a breakpoint via developer tools of chrome, and reload my page, the breakpoint is hit (in vscode, so I can debug in vscode thereafter).\nI use webpack to produce one .js-file from my typescript sources. All sources are written in typescript.\nCan anybody help me to find out what is wrong?</p>\n\n<p>In the trace log, I see the following info:</p>\n\n<pre><code>SourceMaps.getMapForGeneratedPath: Using inlined sourcemap in webpack-internal:///./src/amxcanvas.ts\nSourceMap: creating for webpack-internal:///./src/amxcanvas.ts\nSourceMap: sourceRoot:\nSourceMap: sources: [\"webpack://AmxCvs/./src/amxcanvas.ts?f516\"]\nSourceMap: no sourceRoot specified, using webRoot + script path dirname:\nSourceMaps.scriptParsed: webpack-internal:///./src/amxcanvas.ts was just loaded and has mapped sources: [\"/webpack:/AmxCvs/src/amxcanvas.ts\"]\nOnScriptParsed.resolvePendingBPs: The following pending breakpoints won't be resolved: undefined pendingBreakpointsByUrl = [[\"/Users/hoef/Documents/projekte/canvas.ts/src/amxcanvas.ts\",{\"args\":{\"source\":{\"name\":\"amxcanvas.ts\",\"path\":\"/Users/hoef/Documents/projekte/canvas.ts/src/amxcanvas.ts\"},\"lines\":[12],\"breakpoints\":[{\"line\":12}],\"sourceModified\":false},\"ids\":[1000],\"requestSeq\":4,\"setWithPath\":\"\"}]] source = /webpack:/AmxCvs/src/amxcanvas.ts\nOnScriptParsed.resolvePendingBPs: The following pending breakpoints won't be resolved: undefined pendingBreakpointsByUrl = [[\"/Users/hoef/Documents/projekte/canvas.ts/src/amxcanvas.ts\",{\"args\":{\"source\":{\"name\":\"amxcanvas.ts\",\"path\":\"/Users/hoef/Documents/projekte/canvas.ts/src/amxcanvas.ts\"},\"lines\":[12],\"breakpoints\":[{\"line\":12}],\"sourceModified\":false},\"ids\":[1000],\"requestSeq\":4,\"setWithPath\":\"\"}]] source = webpack-internal:///./src/amxcanvas.ts\n</code></pre>\n\n<p>My launch.json is:</p>\n\n<pre><code>    {\n        \"type\": \"chrome\",\n        \"request\": \"launch\",\n        \"sourceMaps\": true,\n        \"name\": \"Launch Chrome without Webserver\",\n        \"file\": \"${workspaceFolder}/dist/index.html\",\n        \"trace\": \"verbose\"\n    }\n</code></pre>\n\n<p>webpack.config.js is:</p>\n\n<pre><code>const path = require(\"path\");\n\nmodule.exports = {\n  mode: 'development',\n  devtool: 'source-map',\n  entry: path.join(__dirname, '/src', '/amxcanvas.ts'),\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        use: 'ts-loader',\n        exclude: /node_modules/\n      },\n      {\n        test:/\\.css$/,\n        use:['style-loader','css-loader']\n      },\n    ]\n  },\n  resolve: {\n    extensions: [ '.tsx', '.ts', '.js' ]\n  },\n  output: {\n    filename: 'amxcanvas.bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    libraryTarget: 'var',\n    library: 'AmxCvs'\n  }\n};\n</code></pre>\n"}, {"tags": ["angularjs", "typescript", "angular6"], "comments": [{"owner": {"reputation": 755, "user_id": 6435499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/244d37481cf44b077f10bb90077964c6?s=128&d=identicon&r=PG&f=1", "display_name": "Nghi Nguyen", "link": "https://stackoverflow.com/users/6435499/nghi-nguyen"}, "edited": false, "score": 0, "creation_date": 1570009466, "post_id": 58198838, "comment_id": 102776152, "body": "I&#39;m not sure what you means. The parent node isEmpty = true if all the child node is null right ?"}, {"owner": {"reputation": 943, "user_id": 630209, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/06b538f9096e8c37d1246fee3b724b2b?s=128&d=identicon&r=PG", "display_name": "user630209", "link": "https://stackoverflow.com/users/630209/user630209"}, "reply_to_user": {"reputation": 755, "user_id": 6435499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/244d37481cf44b077f10bb90077964c6?s=128&d=identicon&r=PG&f=1", "display_name": "Nghi Nguyen", "link": "https://stackoverflow.com/users/6435499/nghi-nguyen"}, "edited": false, "score": 0, "creation_date": 1570009846, "post_id": 58198838, "comment_id": 102776339, "body": "Object is  not empty, each element in that object is null. As I mentioned in my question."}, {"owner": {"reputation": 14180, "user_id": 2358409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RMJS4.png?s=128&g=1", "display_name": "uminder", "link": "https://stackoverflow.com/users/2358409/uminder"}, "edited": false, "score": 1, "creation_date": 1570013427, "post_id": 58198838, "comment_id": 102777926, "body": "Have a look at <a href=\"https://stackoverflow.com/a/38340374/2358409\">stackoverflow.com/a/38340374/2358409</a>. This should be easily adaptable for <code>null</code> values."}, {"owner": {"reputation": 755, "user_id": 6435499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/244d37481cf44b077f10bb90077964c6?s=128&d=identicon&r=PG&f=1", "display_name": "Nghi Nguyen", "link": "https://stackoverflow.com/users/6435499/nghi-nguyen"}, "edited": false, "score": 0, "creation_date": 1570028324, "post_id": 58198838, "comment_id": 102786388, "body": "Then your result will look like this one ? {     &quot;test&quot;: {},     &quot;specimen&quot;: {},   }"}], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 630209, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/06b538f9096e8c37d1246fee3b724b2b?s=128&d=identicon&r=PG", "display_name": "user630209", "link": "https://stackoverflow.com/users/630209/user630209"}, "edited": false, "score": 0, "creation_date": 1570035941, "post_id": 58202827, "comment_id": 102790387, "body": "This recursive logic can use. To check whether this objects all elements are null, then return false, else true this is what my question about. No find and replace."}, {"owner": {"reputation": 958, "user_id": 7404189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9181c457cf193f4dc089ff4b93ed4fa2?s=128&d=identicon&r=PG&f=1", "display_name": "hrdkisback", "link": "https://stackoverflow.com/users/7404189/hrdkisback"}, "reply_to_user": {"reputation": 943, "user_id": 630209, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/06b538f9096e8c37d1246fee3b724b2b?s=128&d=identicon&r=PG", "display_name": "user630209", "link": "https://stackoverflow.com/users/630209/user630209"}, "edited": false, "score": 0, "creation_date": 1570171471, "post_id": 58202827, "comment_id": 102836366, "body": "Ohh! my bad..Actually you have mentioned &quot;Remove null elements from an Object&quot; in question title that&#39;s why I got confused."}], "tags": [], "owner": {"reputation": 958, "user_id": 7404189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9181c457cf193f4dc089ff4b93ed4fa2?s=128&d=identicon&r=PG&f=1", "display_name": "hrdkisback", "link": "https://stackoverflow.com/users/7404189/hrdkisback"}, "is_accepted": false, "score": 0, "last_activity_date": 1570023835, "creation_date": 1570023835, "answer_id": 58202827, "question_id": 58198838, "link": "https://stackoverflow.com/questions/58198838/return-true-if-all-its-elements-are-assigned-to-null-there-will-be-another-obj/58202827#58202827", "title": "Return true, if all its elements are assigned to null. There will be another object with in that object", "body": "<p>Try this one,</p>\n\n<pre><code>this.findAndReplace(obj, null, []);    \n\nfindAndReplace(obj: any, value: any, replacevalue: any) {           \n    for (var x in obj) {\n        if (obj.hasOwnProperty(x)) {\n            if (typeof obj[x] == 'object') {\n                this.findAndReplace(obj[x], value, replacevalue);\n            }\n            if (obj[x] == value) { \n                obj[x] = replacevalue;\n                // break; // uncomment to stop after first replacement\n            }\n        }\n    }\n    console.log(JSON.stringify(obj));\n}\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 630209, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/06b538f9096e8c37d1246fee3b724b2b?s=128&d=identicon&r=PG", "display_name": "user630209", "link": "https://stackoverflow.com/users/630209/user630209"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570173114, "creation_date": 1570008645, "last_edit_date": 1570173114, "question_id": 58198838, "link": "https://stackoverflow.com/questions/58198838/return-true-if-all-its-elements-are-assigned-to-null-there-will-be-another-obj", "title": "Return true, if all its elements are assigned to null. There will be another object with in that object", "body": "<p>To remove empty rows from an object, require a generic solution.</p>\n\n<p>The object has contain a list.</p>\n\n<p>This is a sample object that i want to check</p>\n\n<pre><code>  {\n    \"test\": {\n      \"id\": null\n    },\n    \"testName\": null,\n    \"specimen\": {\n      \"id\": null\n    },\n    \"specimenName\": null,\n    \"collectionDate\": null,\n    \"resultDate\": null,\n    \"result\": null,\n    \"finding\": null,\n    \"resultValue\": null\n  }\n</code></pre>\n\n<p>I had tried this, but it will not work when there is a list inside.</p>\n\n<pre><code>purgeEmptyRows(obj: any) : boolean {\n      let isEmpty = false;\n      Object.keys(obj).forEach(key =&gt; {\n          if (!obj[key]) {\n              isEmpty = false;\n          }else {\n            return true;\n          } \n      })\n     return isEmpty;\n}\n</code></pre>\n"}, {"tags": ["typescript", "angular-material", "angular8"], "owner": {"reputation": 33, "user_id": 6365352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71a211c6010d918cf8deda8d734e94c?s=128&d=identicon&r=PG&f=1", "display_name": "ZotNet", "link": "https://stackoverflow.com/users/6365352/zotnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 599, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570008513, "creation_date": 1570008513, "question_id": 58198801, "link": "https://stackoverflow.com/questions/58198801/angular-8-content-of-router-outlet-and-or-named-router-outlet-is-not-always-di", "title": "Angular 8 - Content of router-outlet and/or named router-outlet is not always displayed", "body": "<p>Please help me fix the point 1, 4 and 5 here below.</p>\n\n<p><strong>1) Rendering at application load (dossier-sidenav is not displayed):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/eNZU0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eNZU0.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2) Rendering if I type the correct url in navigation bar (works well):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/C8eKd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C8eKd.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>3) Rendering when I click on the second menu after application load (works well):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/ncK7P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ncK7P.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>4) Rendering when I click on the second menu and then on the first menu (the url is not correct and the primary outlet-router content is not displayed):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/EGi8N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EGi8N.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>5) Rendering when I click on the second menu and then on the first menu and then again on the second menu(vacancies-sidenav is not displayed):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/JcFbH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JcFbH.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>TestLibLayout/.../shell.component.html:</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;fps-navbar [sidenav]=\"sidenav\"&gt;\r\n  &lt;ng-container fps-navbar-items&gt;\r\n    &lt;ng-content select=\"[fps-navbar-items]\"&gt;&lt;/ng-content&gt;\r\n  &lt;/ng-container&gt;\r\n  &lt;ng-container fps-navbar-auth&gt;\r\n    &lt;ng-content select=\"[fps-navbar-auth]\"&gt;&lt;/ng-content&gt;\r\n  &lt;/ng-container&gt;\r\n  &lt;ng-container fps-navbar-language&gt;\r\n    &lt;ng-content select=\"[fps-navbar-language]\"&gt;&lt;/ng-content&gt;\r\n  &lt;/ng-container&gt;\r\n&lt;/fps-navbar&gt;\r\n\r\n&lt;mat-sidenav-container class=\"sidenav-container\"&gt;\r\n  &lt;mat-sidenav\r\n    #sidenav\r\n    class=\"sidenav\"\r\n    [fixedInViewport]=\"false\"\r\n    [attr.role]=\"(isHandset$ | async) ? 'dialog' : 'navigation'\"\r\n    [mode]=\"(isHandset$ | async) ? 'over' : 'side'\"\r\n    [opened]=\"(isHandset$ | async) === false\"\r\n  &gt;\r\n    &lt;ng-container #content&gt;&lt;/ng-container&gt;\r\n\r\n    &lt;router-outlet name=\"sidenav\"&gt;&lt;/router-outlet&gt;\r\n  &lt;/mat-sidenav&gt;\r\n\r\n  &lt;main&gt;\r\n    &lt;router-outlet&gt;&lt;/router-outlet&gt;\r\n    &lt;ng-component&gt;&lt;/ng-component&gt;\r\n  &lt;/main&gt;\r\n&lt;/mat-sidenav-container&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>TestProject/.../app.component.html:</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;fps-shell&gt;\r\n  &lt;ng-container fps-navbar-items&gt;\r\n    &lt;a\r\n      mat-button\r\n      [routerLink]=\"['dossier', { outlets: { sidenav: ['dossier'] } }]\"\r\n      routerLinkActive=\"mat-accent\"\r\n    &gt;\r\n      {{ 'Employee.MyDossier.Title' | translate }}\r\n    &lt;/a&gt;\r\n    &lt;a\r\n      mat-button\r\n      [routerLink]=\"[\r\n        { outlets: { primary: ['vacancies'], sidenav: ['vacancies'] } }\r\n      ]\"\r\n      routerLinkActive=\"mat-accent\"\r\n    &gt;\r\n      {{ 'Vacancies.Title' | translate }}\r\n    &lt;/a&gt;\r\n  &lt;/ng-container&gt;\r\n&lt;/fps-shell&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>TestProject/.../dossier-sidenav.component.html:</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;mat-nav-list&gt;\r\n  &lt;a\r\n    mat-list-item\r\n    [routerLink]=\"['personal-info']\"\r\n    routerLinkActive=\"router-link-active\"\r\n  &gt;\r\n    Personal info\r\n  &lt;/a&gt;\r\n  &lt;a\r\n    mat-list-item\r\n    [routerLink]=\"['career']\"\r\n    routerLinkActive=\"router-link-active\"\r\n  &gt;\r\n    Career\r\n  &lt;/a&gt;\r\n  &lt;a\r\n    mat-list-item\r\n    [routerLink]=\"['promotion']\"\r\n    routerLinkActive=\"router-link-active\"\r\n  &gt;\r\n    Promotion\r\n  &lt;/a&gt;\r\n&lt;/mat-nav-list&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>TestProject/.../vacancies-sidenav.component.html:</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;mat-nav-list&gt;\r\n  &lt;a\r\n    mat-list-item\r\n    [routerLink]=\"['description']\"\r\n    routerLinkActive=\"router-link-active\"\r\n  &gt;\r\n    Description\r\n  &lt;/a&gt;\r\n  &lt;a\r\n    mat-list-item\r\n    [routerLink]=\"['vacancy']\"\r\n    routerLinkActive=\"router-link-active\"\r\n  &gt;\r\n    Vacancy\r\n  &lt;/a&gt;\r\n  &lt;a\r\n    mat-list-item\r\n    [routerLink]=\"['test']\"\r\n    routerLinkActive=\"router-link-active\"\r\n  &gt;\r\n    Test\r\n  &lt;/a&gt;\r\n&lt;/mat-nav-list&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>TestProject/.../app.routes.ts:</strong></p>\n\n<pre><code>export const routes: Routes = [\n{\n  path: 'dossier',\n  loadChildren: () =&gt;\n  import('./my-dossier/my-dossier.module').then(m =&gt; m.MyDossierModule)\n},\n{\n  path: 'vacancies',\n  loadChildren: () =&gt;\n  import('./my-vacancies/my-vacancies.module').then(\n    m =&gt; m.MyVacanciesModule\n  )\n},\n{\n  path: '404',\n  component: NotFoundComponent\n},\n{\n  path: '',\n  redirectTo: 'dossier',\n  pathMatch: 'full'\n},\n{ path: '**', redirectTo: '404' }\n];\n</code></pre>\n\n<p><strong>TestProject/.../my-dossier.routes.ts:</strong></p>\n\n<pre><code>export const routes: Routes = [\n{\n  path: '',\n  component: MyDossierContainerComponent,\n  children: [\n  {\n    path: 'personal-info',\n    component: PersonalInfoContainerComponent,\n    resolve: { info: PersonalInfoResolverService }\n  },\n  {\n    path: 'career',\n    component: CareerContainerComponent,\n    resolve: { careerLines: CareerLinesResolverService }\n  },\n  {\n    path: 'promotion',\n    component: PromotionContainerComponent\n  },\n  {\n    path: '',\n    redirectTo: 'personal-info',\n    pathMatch: 'full'\n  }\n]\n},\n{\n  path: 'dossier',\n  component: MyDossierSidenavComponent,\n  outlet: 'sidenav'\n}\n];\n</code></pre>\n\n<p><strong>TestProject/.../my-vacancies.routes.ts:</strong></p>\n\n<pre><code>export const routes: Routes = [\n{\n  path: '',\n  component: VacancyListContainerComponent,\n  resolve: { vacancies: VacancyListResolverService }\n},\n{\n  path: 'vacancies',\n  component: MyVacanciesSidenavComponent,\n  outlet: 'sidenav'\n},\n{\n  path: ':id',\n  component: VacancyDetailContainerComponent,\n  resolve: { vacancy: VacancyDetailResolverService }\n}\n];\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "edited": false, "score": 0, "creation_date": 1570009620, "post_id": 58198880, "comment_id": 102776231, "body": "This way I cannot access the enum values inside my component&#39;s template, because <code>componentActions</code> now is a simple value and not the entire enum object"}, {"owner": {"reputation": 80, "user_id": 12148549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50838f0c2b8dd1cefaf3c918aeae167f?s=128&d=identicon&r=PG&f=1", "display_name": "Denerator", "link": "https://stackoverflow.com/users/12148549/denerator"}, "reply_to_user": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "edited": false, "score": 0, "creation_date": 1570011820, "post_id": 58198880, "comment_id": 102777242, "body": "<code>componentActions = {...ComponentActions};</code>"}, {"owner": {"reputation": 80, "user_id": 12148549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50838f0c2b8dd1cefaf3c918aeae167f?s=128&d=identicon&r=PG&f=1", "display_name": "Denerator", "link": "https://stackoverflow.com/users/12148549/denerator"}, "reply_to_user": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "edited": false, "score": 0, "creation_date": 1570012631, "post_id": 58198880, "comment_id": 102777609, "body": "Or if you need it as an array <code>Object.keys(ComponentActions)</code>"}, {"owner": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "edited": false, "score": 0, "creation_date": 1570012713, "post_id": 58198880, "comment_id": 102777641, "body": "<code>componentActions = ComponentActions;</code> just works fine, my problem is specify the type for <code>componentActions</code>"}, {"owner": {"reputation": 80, "user_id": 12148549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50838f0c2b8dd1cefaf3c918aeae167f?s=128&d=identicon&r=PG&f=1", "display_name": "Denerator", "link": "https://stackoverflow.com/users/12148549/denerator"}, "reply_to_user": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "edited": false, "score": 0, "creation_date": 1570012941, "post_id": 58198880, "comment_id": 102777720, "body": "<code>interface IComponentActions {   [key: string]: ComponentActions; }</code>"}], "tags": [], "owner": {"reputation": 80, "user_id": 12148549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50838f0c2b8dd1cefaf3c918aeae167f?s=128&d=identicon&r=PG&f=1", "display_name": "Denerator", "link": "https://stackoverflow.com/users/12148549/denerator"}, "is_accepted": false, "score": 1, "last_activity_date": 1570008786, "creation_date": 1570008786, "answer_id": 58198880, "question_id": 58198743, "link": "https://stackoverflow.com/questions/58198743/correct-type-definition-for-a-variable-assigned-with-an-enum/58198880#58198880", "title": "Correct type definition for a variable assigned with an enum", "body": "<p>You should not assign enum to the variable. Enum is just an object. You need to pass the type and assign one of the enums values.</p>\n\n<pre><code>componentActions: ComponentActions = ComponentActions.ACTION_OK;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "edited": false, "score": 0, "creation_date": 1570010566, "post_id": 58198980, "comment_id": 102776697, "body": "As I said in the other answer, this way I cannot access the enum values inside my component&#39;s template, because componentActions now is a simple value and not the entire enum object"}], "tags": [], "owner": {"reputation": 462, "user_id": 11305266, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211610757899096/picture?type=large", "display_name": "Ronald Korze", "link": "https://stackoverflow.com/users/11305266/ronald-korze"}, "is_accepted": false, "score": 0, "last_activity_date": 1570009140, "creation_date": 1570009140, "answer_id": 58198980, "question_id": 58198743, "link": "https://stackoverflow.com/questions/58198743/correct-type-definition-for-a-variable-assigned-with-an-enum/58198980#58198980", "title": "Correct type definition for a variable assigned with an enum", "body": "<p><em>Type 'typeof ComponentActions' is not assignable to type 'ComponentActions'</em></p>\n\n<p>The error states that you tried to assign a type to a variable of a type - of course this is not possible. To assign a value to the enum variable:</p>\n\n<pre><code>componentActiosn: ComponentActions = ComponantActions.ONE_OF_YOUR_DEFINED_ENUM VALUES; (ACTION_OK, ACTION_CANCEL)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "is_accepted": true, "score": 2, "last_activity_date": 1570020253, "creation_date": 1570020253, "answer_id": 58201763, "question_id": 58198743, "link": "https://stackoverflow.com/questions/58198743/correct-type-definition-for-a-variable-assigned-with-an-enum/58201763#58201763", "title": "Correct type definition for a variable assigned with an enum", "body": "<p>So I'm going to answer my own question.</p>\n\n<p>Accordingly to typescript's definition, in the below code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>componentActions: typeof ComponentActions = ComponentActions;\n</code></pre>\n\n<p>the <code>typeof</code> is called <strong>type query</strong>.</p>\n\n<p>A type query obtains the type of an identifier or property access expression and it's the most close to achieve my goal.</p>\n"}], "owner": {"reputation": 978, "user_id": 1706250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnbKK.jpg?s=128&g=1", "display_name": "Cristiano Casciotti", "link": "https://stackoverflow.com/users/1706250/cristiano-casciotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 58201763, "answer_count": 3, "score": 1, "last_activity_date": 1570020253, "creation_date": 1570008365, "question_id": 58198743, "link": "https://stackoverflow.com/questions/58198743/correct-type-definition-for-a-variable-assigned-with-an-enum", "title": "Correct type definition for a variable assigned with an enum", "body": "<p>I'm wondering what is the correct type definition for a variable assigned with an enum inside an Angular's component.</p>\n\n<p>Consider this situation:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Component({\n    selector: 'dashboard-component',\n    templateUrl: './dashboard.component.html',\n    styleUrls: ['./dashboard.component.scss']\n})\nexport class DashboardComponent {\n    componentActions = ComponentActions;\n\n    ...\n}\n\nexport enum ComponentActions {\n    ACTION_OK,\n    ACTION_CANCEL,\n}\n</code></pre>\n\n<p>Basically, I need to use <code>ComponentActions</code> enum inside my component's template, so I assigned the <code>componentActions</code> public variable with the <code>ComponentActions</code> enum, and I want to <strong>specify the type of this public variable</strong>.</p>\n\n<p>The following code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>componentActions: ComponentActions = ComponentActions;\n</code></pre>\n\n<p>will throws an error in <code>tslint</code>:</p>\n\n<p><code>Type 'typeof ComponentActions' is not assignable to type 'ComponentActions'</code></p>\n\n<p>Otherwise, using the following code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>componentActions: typeof ComponentActions = ComponentActions;\n</code></pre>\n\n<p>there is no error from <code>tslint</code>.</p>\n\n<p>My question is: what is the correct type for the public variable? It's sufficient to use <code>typeof</code> keyword or there is a specific way?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["angular", "typescript", "ionic3"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12152755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB0IuaMTKnpKRSqtfEJ6-wvdwG8ADHI5M42_xqY=k-s128", "display_name": "Ghada Radwan", "link": "https://stackoverflow.com/users/12152755/ghada-radwan"}, "is_accepted": true, "score": 0, "last_activity_date": 1570112412, "creation_date": 1570112412, "answer_id": 58221137, "question_id": 58198584, "link": "https://stackoverflow.com/questions/58198584/how-to-customize-popover-to-be-the-same-width-of-its-ion-select/58221137#58221137", "title": "How to customize popover to be the same width of its ion-select", "body": "<p>i managed to assign popover width by using Css variables, defined it in app.scss\nand assigned them in my ts file</p>\n\n<p>in app.scss</p>\n\n<blockquote>\n  <p>:popwidth {    --width: 0px;    }</p>\n  \n  <p>[dir=\"ltr\"] .select-popover .popover-content{      width: var(--width); \n  }</p>\n</blockquote>\n\n<p>file.ts</p>\n\n<blockquote>\n  <p>onClick(event){<br>\n      this.divwidth = event.srcElement.clientWidth;\n      let popwidth = document.documentElement;\n      popwidth.style.setProperty('--width',  this.divwidth + \"px\");\n    }</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 12152755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB0IuaMTKnpKRSqtfEJ6-wvdwG8ADHI5M42_xqY=k-s128", "display_name": "Ghada Radwan", "link": "https://stackoverflow.com/users/12152755/ghada-radwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 58221137, "answer_count": 1, "score": 0, "last_activity_date": 1570112412, "creation_date": 1570007731, "last_edit_date": 1570111214, "question_id": 58198584, "link": "https://stackoverflow.com/questions/58198584/how-to-customize-popover-to-be-the-same-width-of-its-ion-select", "title": "How to customize popover to be the same width of its ion-select", "body": "<p>I have a problem with ion-select component which is the width of it's popover items. it doesn't match the size of it's parent ion-select.</p>\n\n<p>I tried to fix this issue by using onclick event as below:</p>\n\n<blockquote>\n  <p>\n              [(ngModel)]=\"value\" [id]=\"id\" class=\"ps-select\" [okText]=\"okText\"       [cancelText]=\"cancelText\" [multiple]=\"false\"\n  [interface]=\"popover\" [placeholder]=\"placeHolderTrans\">\n                  \n                      {{ item.description }}\n                  \n              </p>\n</blockquote>\n\n<p>ts file:</p>\n\n<blockquote>\n  <p>onClick(event){\n       this.divwidth = event.srcElement.clientWidth;\n       this.cssclass = document.querySelector('.popover-content') as HTMLElement;\n       console.log(\"sudfasu\",this.divwidth) ; \n       this.cssclass.style.width = this.divwidth;  }</p>\n</blockquote>\n\n<p>but when I try to catch the div with class \"popover-content\"\nI always got an error of 'Cannot read property 'style' of null'</p>\n\n<p>can anyone help me with this problem or if there's another way to set popover list items width ?</p>\n"}, {"tags": ["angular", "typescript", "ngonchanges"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "edited": false, "score": 0, "creation_date": 1570008176, "post_id": 58198639, "comment_id": 102775477, "body": "But at line1 we are changing the value of  &quot;inputfromparent&quot; from &quot;B&quot; to &quot;C&quot;. Hence change detection cycle should have also run &quot;ngOnChanges&quot; of ChildComponent.ts file at this time also. So why it doesn&#39;t get called at this time (when value of &quot;inputfromparent&quot;  is updated to &quot;C&quot;)?"}, {"owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "reply_to_user": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "edited": false, "score": 0, "creation_date": 1570008409, "post_id": 58198639, "comment_id": 102775598, "body": "The change detection doesn&#39;t run between line 1 and 2, because <i>nothing</i> runs between line 1 and 2 except for the <code>console.log</code>."}, {"owner": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "edited": false, "score": 0, "creation_date": 1570008659, "post_id": 58198639, "comment_id": 102775713, "body": "Thank you for this explanation. But could you please explain why change detection can&#39;t run between line 1 and 2, although we are changing the value of property in parent component and hence according to angular documentation, change detector should run?"}, {"owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "reply_to_user": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "edited": false, "score": 0, "creation_date": 1570008837, "post_id": 58198639, "comment_id": 102775806, "body": "Try reading this <a href=\"https://blog.thoughtram.io/angular/2016/02/22/angular-2-change-detection-explained.html\" rel=\"nofollow noreferrer\">blog.thoughtram.io/angular/2016/02/22/&hellip;</a> for starters."}], "tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": true, "score": 1, "last_activity_date": 1570007930, "creation_date": 1570007930, "answer_id": 58198639, "question_id": 58198504, "link": "https://stackoverflow.com/questions/58198504/ngonchanges-not-getting-called-twice-although-we-are-changing-the-value-of-prope/58198639#58198639", "title": "ngOnChanges not getting called twice although we are changing the value of property twice in parent component", "body": "<pre><code>  onClicking() {\n    this.inputfromparent = \"C\"; //line1\n    console.log(\"Hello\");\n    this.inputfromparent= \"D\"; //line2\n  }\n</code></pre>\n\n<p>This runs synchronously. That is, no other code is executed until <code>onClicking</code> ends its run: for the entire outside world (template engine, change detection, etc.), <code>onClicking()</code> was called, before it, the value of <code>inputfromparent</code> was \"B\", and after, it was \"D\". What's between is pretty much a black box.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "edited": false, "score": 0, "creation_date": 1570008519, "post_id": 58198752, "comment_id": 102775642, "body": "Why we need to call &quot;detectChanges()&quot; explicitly when angular calls it for us whenever it detects any changes in property in Parent Component? Please read my doubt again and try to clear it."}, {"owner": {"reputation": 1693, "user_id": 6750581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4ce77cf710ef819c66b1f37f3491e1?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/6750581/tano"}, "reply_to_user": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "edited": false, "score": 0, "creation_date": 1570008738, "post_id": 58198752, "comment_id": 102775750, "body": "If you change its value the changedetector will do its job and after that checks its value again just to be sure and if it has changed throws an exception similar to this: ERROR Error: ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: &#39;ngIf: C&#39;. Current value: &#39;ngIf: D&#39;. I assume that you can see it on your console."}], "tags": [], "owner": {"reputation": 1693, "user_id": 6750581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4ce77cf710ef819c66b1f37f3491e1?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/6750581/tano"}, "is_accepted": false, "score": 0, "last_activity_date": 1570008385, "creation_date": 1570008385, "answer_id": 58198752, "question_id": 58198504, "link": "https://stackoverflow.com/questions/58198504/ngonchanges-not-getting-called-twice-although-we-are-changing-the-value-of-prope/58198752#58198752", "title": "ngOnChanges not getting called twice although we are changing the value of property twice in parent component", "body": "<p>You should call the changedetector otherwise you'll get exception from angular. pls check console.</p>\n\n<pre><code>export class ParentcomponentComponent implements OnInit {\n\n  private inputfromparent = \"B\";\n  constructor(private cd: ChangeDetectorRef) { }\n\n  ngOnInit() {\n  }\n\n  onClicking(){\n    this.inputfromparent = \"C\"; //line1\n    this.cd.detectChanges();\n    console.log(\"Hello\");\n    this.inputfromparent= \"D\"; //line2\n    this.cd.detectChanges();\n  }\n}\n</code></pre>\n\n<p>Some thoughts:\ninputfromparent should be public to avoid production build with AOT\nThe ChildComponent should use OnPush changedetection.</p>\n"}], "owner": {"reputation": 57, "user_id": 6050954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/50f2b5c0a33ccc40e61e9ef90ee41cf2?s=128&d=identicon&r=PG&f=1", "display_name": "kushagra", "link": "https://stackoverflow.com/users/6050954/kushagra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 58198639, "answer_count": 2, "score": 0, "last_activity_date": 1570022143, "creation_date": 1570007363, "last_edit_date": 1570022143, "question_id": 58198504, "link": "https://stackoverflow.com/questions/58198504/ngonchanges-not-getting-called-twice-although-we-are-changing-the-value-of-prope", "title": "ngOnChanges not getting called twice although we are changing the value of property twice in parent component", "body": "<p>There are two components namely ParentComponent and ChildComponent. We are binding a variable from parent component to child component. As per angular documentation \"ngOnChanges\" of child component gets called whenever the value of property in parent component get changed. Now in ParentComponent we are changing the value of that variable for the two times but in ChildComponent , \"ngOnChanges\" is getting called only one time. </p>\n\n<p><strong>Parent Component is as follows:</strong> </p>\n\n<p>ParentComponent.html</p>\n\n<pre><code>&lt;p&gt;parentcomponent works!&lt;/p&gt;\n&lt;button (click)=\"onClicking()\"&gt;Click here&lt;/button&gt;\n&lt;app-childcomponent [temp]=\"inputfromparent\"&gt;&lt;/app-childcomponent&gt;\n</code></pre>\n\n<p>ParentComponent.ts</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-parentcomponent',\n  templateUrl: './parentcomponent.component.html',\n  styleUrls: ['./parentcomponent.component.css']\n})\nexport class ParentcomponentComponent implements OnInit {\n\n  private inputfromparent = \"B\"\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  onClicking(){\n    this.inputfromparent = \"C\"; //line1\n    console.log(\"Hello\");\n    this.inputfromparent= \"D\"; //line2\n  }\n}\n</code></pre>\n\n<p><strong>Child Component is as follows:</strong></p>\n\n<p>ChildComponent.ts</p>\n\n<pre><code>import { Component, OnInit, OnChanges, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-childcomponent',\n  templateUrl: './childcomponent.component.html',\n  styleUrls: ['./childcomponent.component.css']\n})\nexport class ChildcomponentComponent implements OnInit, OnChanges{\n\n  @Input() private temp = \"A\";\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(change){\n    var test = change;\n    console.log(test);\n    console.log(this.temp);\n  }\n}\n</code></pre>\n\n<p>In ParentComponent.ts file we are changing the value of \"inputfromparent \" two times whenever \"onClicking\" method gets called on clicking button defined in ParentComponent.html file (refer line1 and line2). And since we are binding this variable with variable \"temp\" of ChildComponent.ts file, so \"ngOnChanges\" of ChildComponent.ts file should get called twice as per angular documentation, which is as follows:</p>\n\n<pre><code>A lifecycle hook that is called when any data-bound property of a directive changes. Define an ngOnChanges() method to handle the changes.\n</code></pre>\n\n<p>But \"ngOnChanges\" of ChildComponent.ts file is only getting called only one time whenever \"onClicking\" is called on clicking button defined in ParentComponent.html file.</p>\n\n<p>My doubt is that, since we are changing the value of \"inputfromparent\", two times in \"onClicking\" method of ParentComponent.ts file, so \"ngOnChanges\" of ChildComponent.ts file should get called for the two times. But it is getting called only once.</p>\n"}, {"tags": ["typescript", "vue.js"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 4593359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ecdcf0041a68637d15e149fbbc619c?s=128&d=identicon&r=PG", "display_name": "Stanley Cheung", "link": "https://stackoverflow.com/users/4593359/stanley-cheung"}, "edited": false, "score": 0, "creation_date": 1570038996, "post_id": 58204007, "comment_id": 102791742, "body": "<code>--js_out=import_style=typescript:.</code>   is not supported. What you did here <code>--js_out=import_style=commonjs,binary:. --grpc-web_out=import_style=typescript,mode=grpcweb:.</code> is correct. Overall, typescript support is experimental right now. The standard <code>protoc</code> does not support <code>--js_out</code> for typescript output for now. So as an experimental feature, the <code>--grpc-web_out</code> plugin is temporarily outputing .d.ts for the protobuf messages."}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "reply_to_user": {"reputation": 261, "user_id": 4593359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ecdcf0041a68637d15e149fbbc619c?s=128&d=identicon&r=PG", "display_name": "Stanley Cheung", "link": "https://stackoverflow.com/users/4593359/stanley-cheung"}, "edited": false, "score": 0, "creation_date": 1570095318, "post_id": 58204007, "comment_id": 102808707, "body": "So surely <code>--js_out=import_style=typescript</code> should produce some kind of error if it isn&#39;t supported?Anyway I&#39;ve made <a href=\"https://github.com/grpc/grpc-web/pull/646\" rel=\"nofollow noreferrer\">a pull request to clarify things in the readme</a>."}], "tags": [], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1570027885, "creation_date": 1570027885, "answer_id": 58204007, "question_id": 58198496, "link": "https://stackoverflow.com/questions/58198496/this-relative-module-was-not-found-when-importing-typescript/58204007#58204007", "title": "This relative module was not found, when importing typescript", "body": "<p>Ok I <em>think</em> this is just a bug in <code>protoc</code>. I was running it like this:</p>\n\n<pre><code>protoc -I=../../protos/ ../../protos/foo.proto --js_out=import_style=typescript:. --grpc-web_out=import_style=typescript,mode=grpcweb:.\n</code></pre>\n\n<p>That creates <code>foo_pb.d.ts</code> but it <em>should</em> create <code>foo_pb.js</code> too. In fact it creates separate files for each message - <code>memory.js</code> and <code>empty.js</code>. I \"fixed\" it by running this command:</p>\n\n<pre><code>protoc -I=../../protos/ ../../protos/foo.proto --js_out=import_style=commonjs,binary:. --grpc-web_out=import_style=typescript,mode=grpcweb:.\n</code></pre>\n\n<p>This then generated the <code>foo_pb.js</code> file, and <em>it also generates the <code>foo_pb.d.ts</code> file</em>. I know right, WTF?</p>\n"}], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 902, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570027885, "creation_date": 1570007323, "last_edit_date": 1570016518, "question_id": 58198496, "link": "https://stackoverflow.com/questions/58198496/this-relative-module-was-not-found-when-importing-typescript", "title": "This relative module was not found, when importing typescript", "body": "<p><strong>Preemptive note:</strong> There are a ton of \"relative module was not found\" questions on Stackoverflow. I have looked through as many as I could find and they are not duplicates. Please don't mark this as a duplicate.</p>\n\n<p>I have a Vue project set up with <code>vue create</code> that uses Babel and Typescript, I then generated some gRPC-Web / Protobuf code with this command:</p>\n\n<pre><code>cd src\nprotoc -I=../../protos ../../protos/foo.proto --js_out=import_style=typescript:. --grpc-web_out=import_style=typescript,mode=grpcweb:.\n</code></pre>\n\n<p>This generated these files in the <code>src</code> directory:</p>\n\n<ul>\n<li><code>foo_pb.d.ts</code> (the Typescript definitions for the Protobuf messages)</li>\n<li><code>empty.js</code>, <code>memory.js</code> (the Protobuf messages)</li>\n<li><code>FooServiceClientPb.ts</code> (the gRPC-web code)</li>\n</ul>\n\n<p>However when I <code>npm run serve</code> or <code>npm run build</code> I get this error:</p>\n\n<pre><code>This relative module was not found:\n\n* ./foo_pb in ./src/main.ts, ./src/FooServiceClientPb.ts\n</code></pre>\n\n<p>In both <code>main.ts</code> and <code>FooServiceClientPb.ts</code> it does this:</p>\n\n<pre><code>import {Empty, Memory} from './foo_pb';\n</code></pre>\n\n<p>I can ctrl-click <code>./foo_pb</code> and it opens <code>foo_pb.d.ts</code> correctly, so VSCode at least knows how to open that file. And all the files are in the same directory! Why can't the build system find it?</p>\n\n<p>I've tried the standard delete <code>node_modules</code>, get a lawyer, hit the gym. Also <code>npm-check-updates -u</code>. Nothing works.</p>\n\n<h2>Edit 1</h2>\n\n<p>I got a bit further by adding a <code>console.log()</code> in the bit where the error is generated (apparently Vue doesn't output the actual error, yeay). I got this:</p>\n\n<pre><code>resolve './foo_pb' in '/home/me/myproject/src'\n  using description file: /home/me/myproject/package.json (relative path: ./src)\n    Field 'browser' doesn't contain a valid alias configuration\n    using description file: /home/me/myproject/package.json (relative path: ./src/foo_pb)\n      no extension\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb doesn't exist\n      .mjs\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.mjs doesn't exist\n      .js\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.js doesn't exist\n      .jsx\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.jsx doesn't exist\n      .vue\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.vue doesn't exist\n      .json\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.json doesn't exist\n      .wasm\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.wasm doesn't exist\n      .ts\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.ts doesn't exist\n      .tsx\n        Field 'browser' doesn't contain a valid alias configuration\n        /home/me/myproject/src/foo_pb.tsx doesn't exist\n      as directory\n        /home/me/myproject/src/foo_pb doesn't exist\n</code></pre>\n\n<p>If you run <code>vue ui</code> and check out the <code>Inspect</code> task (the resolved webpack config) you see:</p>\n\n<pre><code>  resolve: {\n    extensions: [\n      '.mjs',\n      '.js',\n      '.jsx',\n      '.vue',\n      '.json',\n      '.wasm',\n      '.ts',\n      '.tsx'\n    ],\n    ...\n</code></pre>\n\n<p>Note that it is missing <code>.d.ts</code>. So I tried adding it, by creating a file <code>vue.config.js</code> with this content:</p>\n\n<pre><code>module.exports = {\n  configureWebpack: {\n    resolve: {\n      extensions: [\n        \".d.ts\"\n      ]\n    }\n  }\n}\n</code></pre>\n\n<p>However this doesn't work either:</p>\n\n<pre><code> ERROR  Failed to compile with 1 errors                                                                                                                                                                                                 12:36:53\n\n error  in ./src/foo_pb.d.ts\n\nModule build failed (from ./node_modules/thread-loader/dist/cjs.js):\nThread Loader (Worker 0)\nDebug Failure. Output generation failed\n    at PoolWorker.fromErrorObj (/home/me/myproject/node_modules/thread-loader/dist/WorkerPool.js:262:12)\n    at /home/me/myproject/node_modules/thread-loader/dist/WorkerPool.js:204:29\n    at Object.transpileModule (/home/me/myproject/node_modules/typescript/lib/typescript.js:112341:29)\n    at getTranspilationEmit (/home/me/myproject/node_modules/ts-loader/dist/index.js:283:74)\n    at successLoader (/home/me/myproject/node_modules/ts-loader/dist/index.js:66:15)\n    at Object.loader (/home/me/myproject/node_modules/ts-loader/dist/index.js:22:12)\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 1116452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128725c70b231932d4103aaaca524f69?s=128&d=identicon&r=PG", "display_name": "Dirk Luijk", "link": "https://stackoverflow.com/users/1116452/dirk-luijk"}, "edited": false, "score": 0, "creation_date": 1570010520, "post_id": 58198630, "comment_id": 102776679, "body": "I was already afraid for this. Many thanks for your detailled explanation on this matter!"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1570007911, "creation_date": 1570007911, "answer_id": 58198630, "question_id": 58198453, "link": "https://stackoverflow.com/questions/58198453/typescript-make-subclass-with-writable-properties/58198630#58198630", "title": "TypeScript: make subclass with writable properties", "body": "<p>A mapped type, such as <code>Writable</code> can't map over private fields (they are not part of what  <code>keyof</code> returns). This is by design, after all a private field should not be accessible from outside.</p>\n\n<p>Also if a class has a <code>private</code> field, an object literal (even if it contains the private field) can't by definition satisfy the type of the class.</p>\n\n<pre><code>\n // Property 'handler' is private in type 'HttpClient' but not in type '{ handler: string; foo: string; get(): void; }'.\nconst httpClient: HttpClient = { // not assignable\n  handler: \"\",\n  foo: \"\",\n  get () {}\n}\n</code></pre>\n\n<p>Even another class with a private field with the same name can't satisfy the original class.</p>\n\n<pre><code>// Type '(Anonymous class)' is not assignable to type 'HttpClient'.\n//   Types have separate declarations of a private property 'handler'.\nconst httpClient2: HttpClient = new class { // not assignable\n  private handler: any\n  foo: any\n  get () {}\n} \n</code></pre>\n\n<p>The only way to make this work is if the private field is optional:</p>\n\n<pre><code>class HttpClient {\n    private handler?: any;\n\n    readonly foo: any;\n\n    get(): void {\n      // ...\n    }\n}\n\nconst httpClient: HttpClient = {\n  foo: \"\",\n  get () {}\n}\nconsole.log(httpClient instanceof HttpClient) // false \n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#code/MYGwhgzhAEASAu8AOBhEBLApgO3tA3gLABQ0Z0SATugG5jybQAWY2AJiJpQPwBc0rAJ4BuEiXLRKmMGwD22EIOgAzWbP5DRxceQDmmeAAoAlPxqz0bAjokB6W9AB0zm9AC+JD9uLB5EPEyIqBg48PwIyGhYuNAAvNakKmr8AEQpADQ6+ngmBF5evtgQspyOILK6hoGRITHoRfCswJiyynBBUaHG0PYqYCAQjEA\" rel=\"nofollow noreferrer\">Play</a></p>\n\n<p>Also since an object with writable properties is assignable to a reference with a <code>readonly</code> property there is no need for <code>Writable</code> at all.</p>\n\n<p><strong>Note</strong>: Even though you can assign an object literal to the class it will not be an instance of the class, so <code>httpClient instanceof HttpClient</code> is false.</p>\n"}], "owner": {"reputation": 358, "user_id": 1116452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128725c70b231932d4103aaaca524f69?s=128&d=identicon&r=PG", "display_name": "Dirk Luijk", "link": "https://stackoverflow.com/users/1116452/dirk-luijk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "accepted_answer_id": 58198630, "answer_count": 1, "score": 3, "last_activity_date": 1570007911, "creation_date": 1570007142, "question_id": 58198453, "link": "https://stackoverflow.com/questions/58198453/typescript-make-subclass-with-writable-properties", "title": "TypeScript: make subclass with writable properties", "body": "<p>I am trying to define a type <code>T</code> where all properties of <code>T</code> are non-readonly (writable), but still assignable to <code>T</code>. However, this does not seem to work when there are private/protected properties in <code>T</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Writable&lt;T&gt; = {\n    -readonly [P in keyof T]: T[P];\n}\n\nclass HttpClient {\n    private handler: any;\n\n    readonly foo: any;\n\n    get(): void {\n      // ...\n    }\n}\n\n // Error: property 'handler' is missing in type 'Writable&lt;HttpClient&gt;'\n // but required in 'HttpClient'\nconst httpClient: HttpClient = {} as Writable&lt;HttpClient&gt;; \n</code></pre>\n\n<p>Is there a way to get this working?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "httpclient", "angular8"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 1, "creation_date": 1570006981, "post_id": 58198375, "comment_id": 102774909, "body": "Replace <code>JSON.stringify(data)</code> with <code>data</code>."}, {"owner": {"reputation": 4052, "user_id": 4948483, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Xeqa2.jpg?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4948483/manish"}, "edited": false, "score": 3, "creation_date": 1570007094, "post_id": 58198375, "comment_id": 102774973, "body": "Cross check you payload is what is expected by the server. This clearly is a server validation error.. The server is not getting the data as it expects it to be."}, {"owner": {"reputation": 1, "user_id": 12152762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CcRpyYqQZIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfSuHNGOw5NyjAviX66JrSyGzwAhQ/photo.jpg?sz=128", "display_name": "Ankur Ishwar", "link": "https://stackoverflow.com/users/12152762/ankur-ishwar"}, "edited": false, "score": 0, "creation_date": 1570007135, "post_id": 58198375, "comment_id": 102774989, "body": "@Maryannah same response, tried replacing JSON.stringify(data) with data, not working"}, {"owner": {"reputation": 19421, "user_id": 419425, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AHXfS.jpg?s=128&g=1", "display_name": "Jeanluca Scaljeri", "link": "https://stackoverflow.com/users/419425/jeanluca-scaljeri"}, "edited": false, "score": 0, "creation_date": 1570007180, "post_id": 58198375, "comment_id": 102775007, "body": "What do you get from <code>console.log(`data = ` ,JSON.stringify(data))</code>?"}, {"owner": {"reputation": 1, "user_id": 12152762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CcRpyYqQZIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfSuHNGOw5NyjAviX66JrSyGzwAhQ/photo.jpg?sz=128", "display_name": "Ankur Ishwar", "link": "https://stackoverflow.com/users/12152762/ankur-ishwar"}, "reply_to_user": {"reputation": 19421, "user_id": 419425, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AHXfS.jpg?s=128&g=1", "display_name": "Jeanluca Scaljeri", "link": "https://stackoverflow.com/users/419425/jeanluca-scaljeri"}, "edited": false, "score": 0, "creation_date": 1570007425, "post_id": 58198375, "comment_id": 102775133, "body": "@JeanlucaScaljeri m getting  data =  {&quot;mobile_no&quot;:9673132365,&quot;ext&quot;:91}"}, {"owner": {"reputation": 19421, "user_id": 419425, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AHXfS.jpg?s=128&g=1", "display_name": "Jeanluca Scaljeri", "link": "https://stackoverflow.com/users/419425/jeanluca-scaljeri"}, "edited": false, "score": 0, "creation_date": 1570008039, "post_id": 58198375, "comment_id": 102775421, "body": "Could you also check the <code>network</code> tab in Chrome DevTools if the body of the POST contains this data?"}, {"owner": {"reputation": 1, "user_id": 12152762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CcRpyYqQZIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfSuHNGOw5NyjAviX66JrSyGzwAhQ/photo.jpg?sz=128", "display_name": "Ankur Ishwar", "link": "https://stackoverflow.com/users/12152762/ankur-ishwar"}, "reply_to_user": {"reputation": 19421, "user_id": 419425, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AHXfS.jpg?s=128&g=1", "display_name": "Jeanluca Scaljeri", "link": "https://stackoverflow.com/users/419425/jeanluca-scaljeri"}, "edited": false, "score": 0, "creation_date": 1570010622, "post_id": 58198375, "comment_id": 102776725, "body": "@JeanlucaScaljeri i think server is expecting formdata and m sending json"}], "owner": {"reputation": 1, "user_id": 12152762, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CcRpyYqQZIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfSuHNGOw5NyjAviX66JrSyGzwAhQ/photo.jpg?sz=128", "display_name": "Ankur Ishwar", "link": "https://stackoverflow.com/users/12152762/ankur-ishwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1570011416, "creation_date": 1570006860, "last_edit_date": 1570011416, "question_id": 58198375, "link": "https://stackoverflow.com/questions/58198375/post-request-with-mobile-number-not-working-message-the-mobile-number-field", "title": "POST request with mobile number not working - message: &quot;The Mobile Number field is required.\u21b5&quot;", "body": "<p>M getting response from server: <code>{status: false, message: \"The Mobile Number field is required.\u21b5\"}</code></p>\n\n<pre><code> submitForm() {\n    this.createItem(this.data).subscribe((response) =&gt; {\n        console.log(response)\n        console.log(this.data)\n    });\n }\n</code></pre>\n\n<p>this function calls a function to send mobile number </p>\n\n<pre><code>  createItem(data): Observable&lt;MobileNo&gt; {\n    console.log(`data = ` ,JSON.stringify(data))\n    return this.httpClient\n      .post&lt;MobileNo&gt;(this.base_path, JSON.stringify(data), this.httpOptions)\n      .pipe(\n        retry(2),\n        catchError(this.handleError),\n      )\n  }\n</code></pre>\n\n<p>Function to Post data</p>\n\n<pre><code> export class MobileNo {\n    ext : string;\n    mobile_no :string;\n }\n</code></pre>\n\n<p>MobileNo Class</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;h3&gt;Edit Student Data&lt;/h3&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"name\"&gt;mobile&lt;/label&gt;\n        &lt;input type=\"number\" class=\"form-control\" #todo id=\"name\" [(ngModel)]=\"data.mobile_no\" placeholder=\"Enter No\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"age\"&gt;ext&lt;/label&gt;\n        &lt;input type=\"number\" class=\"form-control\" id=\"age\" [(ngModel)]=\"data.ext\" placeholder=\"Enter 91\"&gt;\n    &lt;/div&gt;\n\n    &lt;button type=\"submit\" class=\"btn btn-success\" (click)=\"submitForm()\"&gt;Update&lt;/button&gt;\n    &lt;button type=\"submit\" class=\"btn btn-warning ml-1\" [routerLink]=\"[ '/welcome']\"&gt;Cancel&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Form to submit number</p>\n\n<p>what i am doing wrong here i have no idea </p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570007682, "post_id": 58198371, "comment_id": 102775240, "body": "I can&#39;t replicate that error, and the error doesn&#39;t make sense, which makes me wonder if something else is going wrong and wrongfooting the compiler. Please update the question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that can be copied-and-pasted into <code>App.tsx</code> of an <code>npx create-react-app --typescript</code> app to replicate the problem."}, {"owner": {"reputation": 21, "user_id": 11555962, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RdTOWyuz87g/AAAAAAAAAAI/AAAAAAAAANI/Wt5Z2pNqNtg/photo.jpg?sz=128", "display_name": "Konstantin Merrick", "link": "https://stackoverflow.com/users/11555962/konstantin-merrick"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570013076, "post_id": 58198371, "comment_id": 102777784, "body": "Now example is correct"}], "owner": {"reputation": 21, "user_id": 11555962, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RdTOWyuz87g/AAAAAAAAAAI/AAAAAAAAANI/Wt5Z2pNqNtg/photo.jpg?sz=128", "display_name": "Konstantin Merrick", "link": "https://stackoverflow.com/users/11555962/konstantin-merrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570013525, "creation_date": 1570006850, "last_edit_date": 1570013525, "question_id": 58198371, "link": "https://stackoverflow.com/questions/58198371/how-can-i-pass-generic-from-function-to-usestate", "title": "How can i pass generic from function to useState", "body": "<p>I need to pass generic which i get from function to useState, because its a part of state. How can i do this?</p>\n\n<p>Example code:</p>\n\n<pre><code>import React, { useState }  from \"react\";\n\nconst DialogContext = React.createContext&lt;TContext&gt;({});\n\ntype TStatus = 'close' | 'success' | 'cancel'\n\ntype TReturnContext&lt;V&gt; = {\n  status: TStatus,\n  values: V\n};\n\ntype TContext = {\n  open?: TOpenCallback\n};\n\ntype TInstances = {\n  instanceName: string\n};\n\n\ntype TProps = {\n  Layout: React.ElementType\n  config: {\n    [instanceName: string]: React.FC&lt;null&gt;\n  }\n};\n\ntype TOpenCallback = &lt;T, V&gt;(instanceName: string, params: T) =&gt; Promise&lt;Readonly&lt;TReturnContext&lt;V&gt;&gt;&gt;;\n\nexport const Provider: React.FC&lt;TProps&gt; = ({ children, Layout, config }) =&gt; {\n  const [instances, setInstances] = useState&lt;Array&lt;TInstances&gt;&gt;([]);\n\n  const open: TOpenCallback = (instanceName, params) =&gt;\n    new Promise(() =&gt; {\n      setInstances(prevInstances =&gt; [\n        ...prevInstances,\n        { instanceName, params }\n      ]);\n    });\n\n  const context = {\n    open\n  };\n\n\n  const component = instances.map(({ instanceName, params }) =&gt; (\n    &lt;Layout\n      key={instanceName}\n      instanceName={instanceName}\n      component={config[instanceName]}\n      // cancel={cancel}\n      // success={success}\n      // close={close}\n      params={params}\n    /&gt;\n  ));\n\n  return (\n    &lt;DialogContext.Provider value={context}&gt;\n      &lt;&gt;\n        {children}\n        {component}\n      &lt;/&gt;\n    &lt;/DialogContext.Provider&gt;\n  );\n};\n\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/TonCa.png\" rel=\"nofollow noreferrer\">error</a></p>\n\n<p>Type 'TInstances' has no property 'params' and no string index signature</p>\n\n<p>Its not full example, but when i will use open function i will know about params type, how can i pass it into useState generic?</p>\n"}, {"tags": ["angular", "typescript", "if-statement"], "comments": [{"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "edited": false, "score": 1, "creation_date": 1570006473, "post_id": 58198252, "comment_id": 102774630, "body": "Is the change detection strategy of parent component <code>OnPush</code>?"}, {"owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "reply_to_user": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "edited": false, "score": 0, "creation_date": 1570006614, "post_id": 58198252, "comment_id": 102774703, "body": "No, I&#39;ve left the default one, but how can it enter the if condition if it&#39;s false?"}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "edited": false, "score": 0, "creation_date": 1570006762, "post_id": 58198252, "comment_id": 102774782, "body": "Ok. Can you try this in child component: <code>@Input() set isEditable(val){ console.log(val)}</code>"}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 2, "creation_date": 1570006819, "post_id": 58198252, "comment_id": 102774818, "body": "Can you try <code>console.log(typeof this.isEditable)</code>? Because this make it seems like it&#39;s a string <code>&quot;false&quot;</code> which is a trurthy value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570006883, "post_id": 58198252, "comment_id": 102774855, "body": "@VLAZ is right, your console is displaying a string there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 1, "creation_date": 1570006921, "post_id": 58198252, "comment_id": 102774877, "body": "Are you sure you didn&#39;t write <code>isEditable=&quot;isEditable&quot;</code> instead of <code>[isEditable]=&quot;isEditable&quot;</code> ?"}, {"owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1570006926, "post_id": 58198252, "comment_id": 102774883, "body": "@VLAZ why is it a string if I&#39;ve declared it in both component as a boolean? What happens?"}, {"owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "edited": false, "score": 0, "creation_date": 1570006957, "post_id": 58198252, "comment_id": 102774894, "body": "@Maryannah no I&#39;ve wrote it correctly"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 3, "creation_date": 1570007021, "post_id": 58198252, "comment_id": 102774930, "body": "@Usr then please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your issue and/or your full code so that we can find the error. Because clearly, your console log displays a string, and a stated, it behaves like the variable is a string."}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 2, "creation_date": 1570007054, "post_id": 58198252, "comment_id": 102774951, "body": "@Usr you&#39;ve declared it as a boolean but the type system only exists at compile time. If you&#39;ve done something to the effect of <code>this.isEditable = userInput as boolean</code> then that forces the compiler to accept the value is a boolean <i>even when it won&#39;t be</i>. Since this passes compilation, at runtime you&#39;d get this sort of behaviour - there are no type checks at this point."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 0, "last_activity_date": 1570006852, "creation_date": 1570006852, "answer_id": 58198372, "question_id": 58198252, "link": "https://stackoverflow.com/questions/58198252/typescript-if-condition-with-boolean-not-working-properly/58198372#58198372", "title": "Typescript if condition with boolean not working properly", "body": "<p><code>ngOnChanges</code> offers a parameter that you can use of type <a href=\"https://angular.io/api/core/SimpleChanges\" rel=\"nofollow noreferrer\"><code>SimpleChanges</code></a>. </p>\n\n<pre><code>ngOnChanges(changes: SimpleChanges) {\n  console.log(changes.isEditable.currentValue);\n}\n</code></pre>\n\n<p>Try using this variable instead of your input, see what happens. </p>\n"}, {"tags": [], "owner": {"reputation": 1651, "user_id": 5869296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rhjvP.jpg?s=128&g=1", "display_name": "michelepatrassi", "link": "https://stackoverflow.com/users/5869296/michelepatrassi"}, "is_accepted": true, "score": 1, "last_activity_date": 1570017095, "creation_date": 1570017095, "answer_id": 58200946, "question_id": 58198252, "link": "https://stackoverflow.com/questions/58198252/typescript-if-condition-with-boolean-not-working-properly/58200946#58200946", "title": "Typescript if condition with boolean not working properly", "body": "<p>Use a setter on the input</p>\n\n<pre><code>  @Input() set isEditable(isEditable: boolean) {\n    console.log('isEditable', isEditable);\n  }\n</code></pre>\n\n<p>this code will run every time isEditable will change from the parent. </p>\n\n<p>Also using <code>ngOnChanges</code> is a valid approach, but you will need to filter to the property you need. You can find an example in the <a href=\"https://angular.io/guide/lifecycle-hooks#onchanges\" rel=\"nofollow noreferrer\">official docs</a>.</p>\n"}], "owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2127, "favorite_count": 0, "accepted_answer_id": 58200946, "answer_count": 2, "score": 0, "last_activity_date": 1570017095, "creation_date": 1570006367, "last_edit_date": 1570006683, "question_id": 58198252, "link": "https://stackoverflow.com/questions/58198252/typescript-if-condition-with-boolean-not-working-properly", "title": "Typescript if condition with boolean not working properly", "body": "<p>There is something strange going on and I really don't know why.<br>\nIn my angular project I have a component which has a child-component. The parent component's html is like this:</p>\n\n<pre><code>&lt;child-component [isEditable]=\"isEditable\"&gt;&lt;/child-component&gt;\n</code></pre>\n\n<p>In parent component ts I declared the property \"isEditable\" :</p>\n\n<pre><code>isEditable: boolean = true;\n</code></pre>\n\n<p>and then in ngOnInit:</p>\n\n<pre><code>this.isEditable = false;\n</code></pre>\n\n<p>Then in child component I have the correspondent input property with default value:</p>\n\n<pre><code>@Input() isEditable: boolean = true;\n</code></pre>\n\n<p>When this value changes to false from the parent, I need to implement some logic. The problem is that both in ngOnInit and ngOnChanges of the child component, if I do </p>\n\n<pre><code>if(!this.isEditable) {\n   console.log(\"DO SOMETHING\");\n} \n</code></pre>\n\n<p>It doesn't enter the condition. So I thought about some \"delay\" in receiving the new value, added a console.log before the if condition but it turned out it was correctly <em>false</em>.<br>\nI ended up doing this in ngOnInit method:</p>\n\n<pre><code>console.log(\"BEFORE IF\", this.isEditable);\nif(this.isEditable){\n   console.log(\"ENTERED IN TRUE\", this.isEditable);\n}\n</code></pre>\n\n<p>and this is the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lob8R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lob8R.png\" alt=\"enter image description here\"></a></p>\n\n<p>I really don't get what's wrong. The property is false as it should be but it enters the condition with true. I'm sure it's something stupid but I don't get it...</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 589, "user_id": 12150740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wUlEs.png?s=128&g=1", "display_name": "Amir Christian", "link": "https://stackoverflow.com/users/12150740/amir-christian"}, "edited": false, "score": 0, "creation_date": 1570008209, "post_id": 58198598, "comment_id": 102775494, "body": "You can add this <code>AuthGuard</code> in every route to block expired navigation"}, {"owner": {"reputation": 171, "user_id": 12094588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204de2c2990a4c5fdbd29b5b510c63d?s=128&d=identicon&r=PG&f=1", "display_name": "user12094588", "link": "https://stackoverflow.com/users/12094588/user12094588"}, "edited": false, "score": 0, "creation_date": 1570008753, "post_id": 58198598, "comment_id": 102775753, "body": "I did the same. Only for me, if the token has expired, the logs out after updating the page or performing any action."}], "tags": [], "owner": {"reputation": 589, "user_id": 12150740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wUlEs.png?s=128&g=1", "display_name": "Amir Christian", "link": "https://stackoverflow.com/users/12150740/amir-christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1570007775, "creation_date": 1570007775, "answer_id": 58198598, "question_id": 58197717, "link": "https://stackoverflow.com/questions/58197717/how-to-make-an-automatic-exit-from-the-system-after-a-token-expires/58198598#58198598", "title": "How to make an automatic exit from the system after a token expires?", "body": "<p>You can use Route guards for it. And this is example for it.</p>\n\n<pre><code>// src/app/auth/auth.service.ts\nimport { Injectable } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\n@Injectable()\nexport class AuthService {\n  constructor(public jwtHelper: JwtHelperService) {}\n  // ...\n  public isAuthenticated(): boolean {\n    const token = localStorage.getItem('token');\n    // Check whether the token is expired and return\n    // true or false\n    return !this.jwtHelper.isTokenExpired(token);\n  }\n}\n\n// src/app/auth/auth-guard.service.ts\nimport { Injectable } from '@angular/core';\nimport { Router, CanActivate } from '@angular/router';\nimport { AuthService } from './auth.service';\n@Injectable()\nexport class AuthGuardService implements CanActivate {\n  constructor(public auth: AuthService, public router: Router) {}\n  canActivate(): boolean {\n    if (!this.auth.isAuthenticated()) {\n      this.router.navigate(['login']);\n      return false;\n    }\n    return true;\n  }\n}\n\n// src/app/app.routes.ts\nimport { Routes, CanActivate } from '@angular/router';\nimport { ProfileComponent } from './profile/profile.component';\nimport { \n  AuthGuardService as AuthGuard \n} from './auth/auth-guard.service';\nexport const ROUTES: Routes = [\n  { path: '', component: HomeComponent },\n  { \n    path: 'profile',\n    component: ProfileComponent,\n    canActivate: [AuthGuard] \n  },\n  { path: '**', redirectTo: '' }\n];\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 12094588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204de2c2990a4c5fdbd29b5b510c63d?s=128&d=identicon&r=PG&f=1", "display_name": "user12094588", "link": "https://stackoverflow.com/users/12094588/user12094588"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571020779, "creation_date": 1570004301, "last_edit_date": 1571020779, "question_id": 58197717, "link": "https://stackoverflow.com/questions/58197717/how-to-make-an-automatic-exit-from-the-system-after-a-token-expires", "title": "How to make an automatic exit from the system after a token expires?", "body": "<p>Is it possible to somehow make an automatic logout if the token expired without refreshing the page? That is, let's say a person was on a site\u2019s page, followed it, then closed the page or simply turned it off, then returned after an hour, and there a message was displayed stating that the exit occurred because the token expired. And at the same time, to display this message,  do not need to refresh the page or perform any actions on the site.</p>\n\n<pre><code>import { Injectable } from \"@angular/core\";\nimport { AuthService } from \"../services/auth.service\";\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpErrorResponse } from \"@angular/common/http\";\nimport { Observable, throwError } from \"rxjs\";\nimport { catchError } from \"rxjs/operators\";\nimport { Router } from \"@angular/router\";\n\n@Injectable()\nexport class TokenInterceptor implements HttpInterceptor {\n  constructor(private auth: AuthService, private router: Router) { }\n  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    if (this.auth.isAuthenticated()) {\n      req = req.clone({\n        setHeaders: {\n          Authorization: this.auth.getToken()\n        }\n      });\n    }\n    return next.handle(req).pipe(catchError((error: HttpErrorResponse) =&gt; this.handleAuthError(error)));\n  }\n  private handleAuthError(error: HttpErrorResponse): Observable&lt;any&gt; {\n    if (error.status === 401) {\n      this.auth.signOut(), this.router.navigate([\"/sign-in\"]), {\n        queryParams: {\n          sessionFailed: true\n        }\n      };\n    }\n    return throwError(error);\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "html", "css", "angular", "typescript"], "comments": [{"owner": {"reputation": 5884, "user_id": 4283738, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb938f3ad5a68706c055de350612b01?s=128&d=identicon&r=PG", "display_name": "joyBlanks", "link": "https://stackoverflow.com/users/4283738/joyblanks"}, "edited": false, "score": 0, "creation_date": 1570004688, "post_id": 58197393, "comment_id": 102773764, "body": "<code>&lt;button [disabled]=&quot;!form.valid&quot;&gt;</code> and by saying so your controls need to have validators at least the required one"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 1, "creation_date": 1570003897, "post_id": 58197483, "comment_id": 102773408, "body": "Whlie I agree, there&#39;s more efficient than that, which is the <code>required</code> attribute."}, {"owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "edited": false, "score": 0, "creation_date": 1570003952, "post_id": 58197483, "comment_id": 102773442, "body": "Generally, you&#39;re right. Specifically, with <i>either of two inputs</i> required, as in this story, it gets a little more tricky."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 0, "creation_date": 1570004251, "post_id": 58197483, "comment_id": 102773560, "body": "Indeed, you would have to make a form validation instead of a control one. But it would be more flexible, since you could validate other things (min-max length, patterns ...), while this answer validates only the non-emptiness. I upvoted it though, since it does answer the question !"}], "tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": true, "score": 5, "last_activity_date": 1570004047, "last_edit_date": 1570004047, "creation_date": 1570003385, "answer_id": 58197483, "question_id": 58197393, "link": "https://stackoverflow.com/questions/58197393/form-control-pristine-attribute-is-not-being-updated/58197483#58197483", "title": "Form control: Pristine attribute is not being updated?", "body": "<p>Pristine doesn't mean \"empty\", it means \"the user hasn't changed the value since it was displayed in this form\". Use the field's <code>value</code> attribute instead, like</p>\n\n<pre><code>&lt;button [disabled]=\"!myField1.value?.length &amp;&amp; !myField2.value?.length\"&gt;\n</code></pre>\n\n<p><a href=\"https://angular.io/guide/forms\" rel=\"nofollow noreferrer\">https://angular.io/guide/forms</a></p>\n\n<p>But this is a shortcut, and if you want to make either of two inputs required (and simply disable submit when the form is invalid), look at this thread:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/41020069/require-one-from-two-fields-using-angular-2\">Require one from two fields using Angular 2</a></p>\n"}], "owner": {"reputation": 47, "user_id": 7715500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0c4119391ea30e42d09012fc78577a?s=128&d=identicon&r=PG&f=1", "display_name": "Eskimo", "link": "https://stackoverflow.com/users/7715500/eskimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 58197483, "answer_count": 1, "score": 0, "last_activity_date": 1570004047, "creation_date": 1570003061, "question_id": 58197393, "link": "https://stackoverflow.com/questions/58197393/form-control-pristine-attribute-is-not-being-updated", "title": "Form control: Pristine attribute is not being updated?", "body": "<p>I am trying to create some simple form validation around 2 input boxes and a button. When these input field boxes are empty (pristine) I want the button to be disabled. When either box has a value I want the button to be able to submit. Currently, when the input fields are first rendered the pristine attribute is true. When a change has been made in the boxes it is set to false but when the changes are deleted I want it to go back to false, however Angular does not seem to reset this validation?</p>\n"}, {"tags": ["json", "angular", "typescript", "constants"], "comments": [{"owner": {"reputation": 22246, "user_id": 4054974, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bd06d5c072d50b8fa171521eb75d6925?s=128&d=identicon&r=PG&f=1", "display_name": "Chrillewoodz", "link": "https://stackoverflow.com/users/4054974/chrillewoodz"}, "edited": false, "score": 0, "creation_date": 1570002368, "post_id": 58197183, "comment_id": 102772756, "body": "<code>.ts</code> files are easier to work with so I&#39;d go with that."}, {"owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "edited": false, "score": 0, "creation_date": 1570002408, "post_id": 58197183, "comment_id": 102772779, "body": "I&#39;d go with TS because you can put comments in TS, unlike JSON, and that can be useful in a config file."}], "answers": [{"comments": [{"owner": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 1, "creation_date": 1570002764, "post_id": 58197280, "comment_id": 102772937, "body": "Since ts will be minified it will probably even be less data to be loaded. I think an environment file is wrong for a menu config though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 0, "creation_date": 1570002785, "post_id": 58197280, "comment_id": 102772948, "body": "@chrispbacon true that"}, {"owner": {"reputation": 4193, "user_id": 6715606, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f23ee5ba6e7181aca8dc64ddbbc79a02?s=128&d=identicon&r=PG", "display_name": "Varun Sukheja", "link": "https://stackoverflow.com/users/6715606/varun-sukheja"}, "edited": false, "score": 0, "creation_date": 1570002865, "post_id": 58197280, "comment_id": 102772983, "body": "I am not talking of environment-specific constants, I am talking of constants and configs that will be same throughout the project."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 4193, "user_id": 6715606, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f23ee5ba6e7181aca8dc64ddbbc79a02?s=128&d=identicon&r=PG", "display_name": "Varun Sukheja", "link": "https://stackoverflow.com/users/6715606/varun-sukheja"}, "edited": false, "score": 0, "creation_date": 1570003024, "post_id": 58197280, "comment_id": 102773036, "body": "@VarunSukheja and it still should be done into <code>environment</code> files. They should all inherit a base evnironment, which would equate your &quot;constants&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 0, "creation_date": 1570003762, "post_id": 58197280, "comment_id": 102773336, "body": "@chrispbacon tried with a project on my own, the JSON gets minified too (see edit on my answer)"}, {"owner": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 0, "creation_date": 1570014325, "post_id": 58197280, "comment_id": 102778349, "body": "Oh wow, didn&#39;t know that. @Maryannah Thanks for mentioning, that&#39;s interesting"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 2, "last_activity_date": 1570003134, "last_edit_date": 1592644375, "creation_date": 1570002600, "answer_id": 58197280, "question_id": 58197183, "link": "https://stackoverflow.com/questions/58197183/angular-whether-to-use-constant-ts-or-constant-json-for-storing-constants-an/58197280#58197280", "title": "Angular: whether to use *.constant.ts or .constant.json for storing constants and configs", "body": "<p>Your friend is wrong.</p>\n<p>Data is data. If you use, it needs to be loaded from the server. let it be TS, JSON, plain text or binary, it <strong>will</strong> be loaded no matter what.</p>\n<p>And to answer more directly your question, you should use <code>environment</code> files, which are environment-related. Creating constant files is just duplicating a logic that already exists.</p>\n<h1>Edit</h1>\n<p>After testing on my own what you friend has said with</p>\n<pre><code>import { Component } from '@angular/core';\nimport * as data from './app.data.json';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = data.some;\n}\n\n---- JSON ----\n\n{\n  &quot;some&quot;: &quot;data&quot;\n}\n</code></pre>\n<p>And outputing a dist foled like</p>\n<p><a href=\"https://i.stack.imgur.com/hukYE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hukYE.png\" alt=\"enter image description here\" /></a></p>\n<p>i can confirm that this isn't true at all, JSON is treated like any TS. I even opened the first <code>main.XXX.js</code> file and found it :</p>\n<pre><code>function(e){e.exports=JSON.parse('{&quot;a&quot;:&quot;data&quot;}')}\n</code></pre>\n"}], "owner": {"reputation": 4193, "user_id": 6715606, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f23ee5ba6e7181aca8dc64ddbbc79a02?s=128&d=identicon&r=PG", "display_name": "Varun Sukheja", "link": "https://stackoverflow.com/users/6715606/varun-sukheja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1570003134, "creation_date": 1570002206, "question_id": 58197183, "link": "https://stackoverflow.com/questions/58197183/angular-whether-to-use-constant-ts-or-constant-json-for-storing-constants-an", "title": "Angular: whether to use *.constant.ts or .constant.json for storing constants and configs", "body": "<p>I am using angular for my project and I used to create a <code>constants</code> folder here I have different constant files to keep static data and configs, as shown below.</p>\n\n<p>File: constans/menu.constant.ts</p>\n\n<pre><code>export const menu = [\n  { name: 'Dashboard', icon: 'icon-dashboard', routerLink: '/dashboard' },\n  { name: 'Members', icon: 'icon-members', routerLink: '/member' },\n  {\n    name: 'Product',\n    icon: 'icon-product',\n    routerLink: '/product',\n    nestedMenu: [\n      { name: 'Product List', icon: 'fa-table', routerLink: '/product/list' },\n      { name: 'Category', icon: 'fa-table', routerLink: '/category' },\n      { name: 'Collection', icon: 'fa-table', routerLink: '/collection' },\n      { name: 'Brand', icon: 'fa-table', routerLink: '/brand' }\n    ]\n  },\n  { name: 'Content', icon: 'icon-content', routerLink: '/content' },\n  {\n    name: 'Store Mangement',\n    icon: 'icon-store',\n    routerLink: '/store-management'\n  },\n  {\n    name: 'Settings',\n    icon: 'icon-settings',\n    nestedMenu: [\n      { name: 'Tax Groups', icon: 'fa-table', routerLink: '/tax-groups' }\n    ]\n  }\n];\n</code></pre>\n\n<p>But one of my friends suggested me to go for .json files instead of ts files for defining constant and configs because he says the ts file will be clubbed into the final build js file, which eventually increases my build size. But using JSON file my build js file size won't be affected as JSON will not merge into js.</p>\n\n<p>This is how he said to use:</p>\n\n<p>File: constans/menu.constant.json</p>\n\n<pre><code>{\n   \"sidebarMenu\": [\n      {\n         \"name\": \"Dashboard\",\n         \"icon\": \"icon-dashboard\",\n         \"routerLink\": \"/dashboard\"\n      },\n      {\n         \"name\": \"Members\",\n         \"icon\": \"icon-members\",\n         \"routerLink\": \"/member\"\n      },\n      {\n         \"name\": \"Product\",\n         \"icon\": \"icon-product\",\n         \"routerLink\": \"/product\",\n         \"nestedMenu\": [\n            {\n               \"name\": \"Product List\",\n               \"icon\": \"fa-table\",\n               \"routerLink\": \"/product/list\"\n            },\n            {\n               \"name\": \"Category\",\n               \"icon\": \"fa-table\",\n               \"routerLink\": \"/category\"\n            },\n            {\n               \"name\": \"Collection\",\n               \"icon\": \"fa-table\",\n               \"routerLink\": \"/collection\"\n            },\n            {\n               \"name\": \"Brand\",\n               \"icon\": \"fa-table\",\n               \"routerLink\": \"/brand\"\n            }\n         ]\n      },\n      {\n         \"name\": \"Content\",\n         \"icon\": \"icon-content\",\n         \"routerLink\": \"/content\"\n      },\n      {\n         \"name\": \"Store Mangement\",\n         \"icon\": \"icon-store\",\n         \"routerLink\": \"/store-management\"\n      },\n      {\n         \"name\": \"Settings\",\n         \"icon\": \"icon-settings\",\n         \"nestedMenu\": [\n            {\n               \"name\": \"Tax Groups\",\n               \"icon\": \"fa-table\",\n               \"routerLink\": \"/tax-groups\"\n            }\n         ]\n      }\n   ]\n}\n</code></pre>\n\n<p>Can anyone put some more light on these to find the best-optimized solution?</p>\n"}, {"tags": ["angular", "typescript", "naming-conventions", "protected"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "edited": false, "score": 0, "creation_date": 1570000822, "post_id": 58196814, "comment_id": 102772044, "body": "@mbojko you might not have the same linting rules."}, {"owner": {"reputation": 283, "user_id": 10025862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaMz8.jpg?s=128&g=1", "display_name": "Mostafa Saadatnia", "link": "https://stackoverflow.com/users/10025862/mostafa-saadatnia"}, "edited": false, "score": 0, "creation_date": 1570000902, "post_id": 58196814, "comment_id": 102772085, "body": "I try to package a library for NPM and it may pass all test and linting standards and be sure it makes a linting error that makes be disable the rules .if you can help me drop some solution but no negative point :("}, {"owner": {"reputation": 9768, "user_id": 8990367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dk1Kx.jpg?s=128&g=1", "display_name": "Fateme Fazli", "link": "https://stackoverflow.com/users/8990367/fateme-fazli"}, "edited": false, "score": 0, "creation_date": 1570000927, "post_id": 58196814, "comment_id": 102772099, "body": "I think the lint is correct but it should be <code>this._id = id;</code> in constructor and setter."}, {"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1570001027, "post_id": 58196814, "comment_id": 102772143, "body": "Turn of tslint rule error by adding this line above  your code // tslint:disable-next-line: variable-name"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 10025862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaMz8.jpg?s=128&g=1", "display_name": "Mostafa Saadatnia", "link": "https://stackoverflow.com/users/10025862/mostafa-saadatnia"}, "edited": false, "score": 0, "creation_date": 1570001062, "post_id": 58196864, "comment_id": 102772159, "body": "we are working on a macro frontend product and we couldn&#39;t change the rules locally."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 283, "user_id": 10025862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaMz8.jpg?s=128&g=1", "display_name": "Mostafa Saadatnia", "link": "https://stackoverflow.com/users/10025862/mostafa-saadatnia"}, "edited": false, "score": 1, "creation_date": 1570001289, "post_id": 58196864, "comment_id": 102772253, "body": "@MostafaSaadatnia then change your linting rules wherever they are."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 0, "last_activity_date": 1570000803, "creation_date": 1570000803, "answer_id": 58196864, "question_id": 58196814, "link": "https://stackoverflow.com/questions/58196814/typescipt-class-protected-field-naming-convention/58196864#58196864", "title": "Typescipt class protected field naming convention", "body": "<p>When you hover over your error/warning, you will see the description of the error and the name of the TSLint rule. </p>\n\n<p>All you have to do is open your root <code>tslint.json</code> and change the value of that rule. </p>\n\n<p>I guess it would be <a href=\"https://palantir.github.io/tslint/rules/variable-name/\" rel=\"nofollow noreferrer\"><code>variable-name</code></a>, but see for yourself. </p>\n\n<p>PS : It isn't a bad practice to change your linter configuration : the bad practice would be for your team &amp; you not to follow it. </p>\n"}], "owner": {"reputation": 283, "user_id": 10025862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaMz8.jpg?s=128&g=1", "display_name": "Mostafa Saadatnia", "link": "https://stackoverflow.com/users/10025862/mostafa-saadatnia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1570001219, "creation_date": 1570000542, "last_edit_date": 1570000674, "question_id": 58196814, "link": "https://stackoverflow.com/questions/58196814/typescipt-class-protected-field-naming-convention", "title": "Typescipt class protected field naming convention", "body": "<p>I'm c# developer and start typescript in angular framework now, in normally I try to create a protected field and assign getter/setter to that like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class Test {\n    protected _id: number;\n    constructor(id: number) {\n        this.id = id;\n    }\n    get id(): number {\n        return this._id;\n    }\n    set id(id: number) {\n        this.id = id;\n    }\n}\n</code></pre>\n\n<p>but in the Angular, there is lint standard for naming fields, and it makes an error on _id.\nI try to change the name of the field to Id but this is contrary to programming standards.\nwhat should I do?</p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1570000123, "post_id": 58196712, "comment_id": 102771743, "body": "You forgot to give it a key"}, {"owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 0, "creation_date": 1570000675, "post_id": 58196712, "comment_id": 102771962, "body": "I get the error &#39;Parameter &#39;o&#39; implicitly has an &#39;any&#39; type.&#39; then if I change it to <code>any</code> I get the error <code>Cannot find name &#39;o&#39;.</code>"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 0, "creation_date": 1570001019, "post_id": 58196712, "comment_id": 102772139, "body": "@Bill not sure what the problem in your code is, but the stackblitz shows that the type of <code>o</code> is <code>string</code> as expected. This should be inferred based on the type of <code>myArray</code> which in this case in inferred from the initialization. If <code>myArray</code> is typed as <code>any</code>  you might get this error, but this is not realted to the question or the answer."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 0, "last_activity_date": 1570004261, "last_edit_date": 1570004261, "creation_date": 1570000107, "answer_id": 58196712, "question_id": 58196671, "link": "https://stackoverflow.com/questions/58196671/react-typescript-render-array-of-strings-to-an-unordered-list/58196712#58196712", "title": "React Typescript: render array of strings to an unordered list", "body": "<p>You can use <code>map</code> as the children:</p>\n\n<pre><code>const Drinks: React.FC = () =&gt; {\n  const myArray = ['Water', 'Orange Juice', 'Milk'];\n\n  return (    \n    &lt;ul&gt;\n     {myArray.map(o =&gt; &lt;li key={o}&gt;{o}&lt;/li&gt;)}\n    &lt;/ul&gt;\n  );\n}\n\nexport { Drinks };\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/react-ts-arwfwg\" rel=\"nofollow noreferrer\">play</a></p>\n\n<p><strong>Note</strong> <code>key = {o}</code> is necessary to help react uniquely identify an element for updates. This assumes strings are unique in the array.</p>\n"}, {"tags": [], "owner": {"reputation": 7380, "user_id": 8437099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/108936759794462/picture?type=large", "display_name": "kyun", "link": "https://stackoverflow.com/users/8437099/kyun"}, "is_accepted": false, "score": 0, "last_activity_date": 1570000462, "last_edit_date": 1570000462, "creation_date": 1570000118, "answer_id": 58196715, "question_id": 58196671, "link": "https://stackoverflow.com/questions/58196671/react-typescript-render-array-of-strings-to-an-unordered-list/58196715#58196715", "title": "React Typescript: render array of strings to an unordered list", "body": "<pre><code>import React from 'react';\n\nconst Drinks: React.FC = () =&gt; {\n   const myArray = ['Water', 'Orange Juice', 'Milk'];\n\n  return (    \n    &lt;ul&gt;\n     {myArray.map((item:string, index:number)=&gt;&lt;li key={index}&gt;{item}&lt;/li&gt;)} \n     /* using index number as key is not recommendable. \n        But in this case, it doesn't matter.*/ \n    &lt;/ul&gt;\n  );\n}\n\nexport { Drinks };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1570001261, "post_id": 58196727, "comment_id": 102772240, "body": "Sorry, but the type annotations are redundant in the code you posted, you added a type annotation for an error that is not in your code just because the OP complained about an unrelated error. This does not seem right to me."}], "tags": [], "owner": {"reputation": 1581, "user_id": 2087161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e5YGG.png?s=128&g=1", "display_name": "Felipe R. Saruhashi", "link": "https://stackoverflow.com/users/2087161/felipe-r-saruhashi"}, "is_accepted": true, "score": -1, "last_activity_date": 1576747049, "last_edit_date": 1576747049, "creation_date": 1570000171, "answer_id": 58196727, "question_id": 58196671, "link": "https://stackoverflow.com/questions/58196671/react-typescript-render-array-of-strings-to-an-unordered-list/58196727#58196727", "title": "React Typescript: render array of strings to an unordered list", "body": "<pre><code>import React from 'react';\n\nconst Drinks: React.FC = () =&gt; {\n  const myArray = ['Water', 'Orange Juice', 'Milk'];\n\n  return (    \n    &lt;ul&gt;\n      { myArray.map( (drink,index) =&gt; (&lt;li key={index} &gt;{drink}&lt;/li&gt;)) }\n    &lt;/ul&gt;\n  );\n}\n\nexport { Drinks };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 7177011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n8BW1MPyKd0/AAAAAAAAAAI/AAAAAAAACqY/EGIWtwqVC04/photo.jpg?sz=128", "display_name": "Farzam Babar", "link": "https://stackoverflow.com/users/7177011/farzam-babar"}, "is_accepted": false, "score": -1, "last_activity_date": 1570000186, "creation_date": 1570000186, "answer_id": 58196731, "question_id": 58196671, "link": "https://stackoverflow.com/questions/58196671/react-typescript-render-array-of-strings-to-an-unordered-list/58196731#58196731", "title": "React Typescript: render array of strings to an unordered list", "body": "<p>you can use map for rendering array like</p>\n\n<pre><code>&lt;ul&gt; \n    {myArray.map((arr,i) =&gt; \n     return &lt;li key={i}&gt;{arr}&lt;/li&gt;\n    ) \n&lt;/ul&gt;\n</code></pre>\n\n<ul>\n<li>if directly myArray is unable to access then try this.myArray</li>\n</ul>\n"}], "owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 58196727, "answer_count": 4, "score": 0, "last_activity_date": 1576747049, "creation_date": 1569999910, "question_id": 58196671, "link": "https://stackoverflow.com/questions/58196671/react-typescript-render-array-of-strings-to-an-unordered-list", "title": "React Typescript: render array of strings to an unordered list", "body": "<p>In a pure functional component using typescript how do we render an array of strings into an unordered list?</p>\n\n<pre><code>import React from 'react';\n\nconst Drinks: React.FC = () =&gt; {\n   const myArray = ['Water', 'Orange Juice', 'Milk'];\n\n  return (    \n    &lt;ul&gt;\n     &lt;li&gt;Water&lt;li/&gt;\n     &lt;li&gt;Orange Juice&lt;li/&gt;\n     &lt;li&gt;Milk&lt;li/&gt;\n    &lt;/ul&gt;\n  );\n}\n\nexport { Drinks };\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript", "express", "nestjs"], "answers": [{"tags": [], "owner": {"reputation": 17343, "user_id": 9576186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2beeea1d726e9c3fab3a91953895039b?s=128&d=identicon&r=PG", "display_name": "Jay McDoniel", "link": "https://stackoverflow.com/users/9576186/jay-mcdoniel"}, "is_accepted": false, "score": 5, "last_activity_date": 1570032926, "creation_date": 1570032926, "answer_id": 58205414, "question_id": 58196496, "link": "https://stackoverflow.com/questions/58196496/when-to-use-guards-and-when-to-use-middlewares-in-nestjs/58205414#58205414", "title": "When to use guards and when to use middlewares in NestJs", "body": "<p>If you want to do something similar to Passport you could always attach the user to <code>req.user</code>, which is seen as a pretty standard ting in the Node.JS world. </p>\n\n<p>Side question for you: any reason to not have two guards that function right after another? Have one guard for checking that the token is there and is indeed a valid token and one for validating the user on the token is indeed a valid on. That way you don't use a middleware (which is kind of included mostly for the sake of compatibility) and still have the separated logic.</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 4319037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c4ec8fa9868a4cc267aba97533c9c1?s=128&d=identicon&r=PG&f=1", "display_name": "kamilg", "link": "https://stackoverflow.com/users/4319037/kamilg"}, "is_accepted": false, "score": 0, "last_activity_date": 1570096968, "creation_date": 1570096968, "answer_id": 58216755, "question_id": 58196496, "link": "https://stackoverflow.com/questions/58196496/when-to-use-guards-and-when-to-use-middlewares-in-nestjs/58216755#58216755", "title": "When to use guards and when to use middlewares in NestJs", "body": "<p><code>Where can I attach the database user to the request after finishing the validation in the auth guard?</code></p>\n\n<p>I believe that Guard, as you noticed, should validate if given user has the right to use given method.</p>\n\n<p>Depending on your needs, you can go into different paths:</p>\n\n<p>1) use passport and a strategy to do what you need (<a href=\"https://stackoverflow.com/a/57929429/4319037\">https://stackoverflow.com/a/57929429/4319037</a> I wrote a few words and lines about this already). Furthermore, it will already cover most of the code you have to extract the token.</p>\n\n<pre><code>@Injectable()\nexport class HttpStrategy extends PassportStrategy(Strategy) {\n  constructor(private readonly authService: AuthService) {\n    super()\n  }\n\n  async validate(token: string) {\n    const user = await this.authService.findUserByToken(token);\n    if (!user) {\n      throw new UnauthorizedException();\n    }\n    return user;\n  }\n}\n</code></pre>\n\n<p>2) use <code>Interceptor</code> on controller/method level to attach the user to given request (and throw if token is missing); your Guard will receive the <code>user</code> already, thus you can validate if the user has correct role/rights to execute the method.</p>\n\n<p>Please let me know if I misunderstood what you want to achieve or need more details on particular way, thanks!</p>\n"}], "owner": {"reputation": 2871, "user_id": 9945420, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ft9JQ3kHBNY/AAAAAAAAAAI/AAAAAAAAAAA/vl44CYj2cng/photo.jpg?sz=128", "display_name": "hrp8sfH4xQ4", "link": "https://stackoverflow.com/users/9945420/hrp8sfh4xq4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3904, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1616836997, "creation_date": 1569999087, "question_id": 58196496, "link": "https://stackoverflow.com/questions/58196496/when-to-use-guards-and-when-to-use-middlewares-in-nestjs", "title": "When to use guards and when to use middlewares in NestJs", "body": "<p>I want to create a NestJs app and want to have a middleware validating the token in the request object and a authentication guard validating the user in the token payload.</p>\n\n<p>By splitting this I was hoping to have a clean separation. First my middleware</p>\n\n<pre><code>@Injectable()\nexport class TokenMiddleware implements NestMiddleware {\n  use(req: any, res: Response, next: NextFunction) {\n    try {\n      const headers: IncomingHttpHeaders = req.headers;\n      const authorization: string = headers.authorization;\n      const bearerToken: string[] = authorization.split(' ');\n      const token: string = bearerToken[1];\n\n      // !! Check if token was invalidated !!\n\n      req.token = token;\n      req.tokenPayload = verifyToken(token);\n      next();\n    } catch (error) {\n      throw new UnauthorizedException();\n    }\n  }\n}\n</code></pre>\n\n<p>It only validates the token and extends the request object with the encoded token and its payload. My auth guard</p>\n\n<pre><code>@Injectable()\nexport class AuthenticationGuard implements CanActivate {\n  constructor(private readonly usersService: UsersService) {}\n\n  async canActivate(context: ExecutionContext): Promise&lt;boolean&gt; {\n    const request: any = context.switchToHttp().getRequest();\n\n    try {\n      const user: any = request.tokenPayload;\n\n      if (!user) {\n        throw new Error();\n      }\n\n      const findByIdDTO: FindByIdDTO = { id: user.id };\n      const existingUser: UserRO = await this.usersService.findById(findByIdDTO);\n\n      if (!existingUser) {\n        throw new Error();\n      }\n\n      // attach the user to the request object?\n\n      return true;\n    } catch (error) {\n      throw new UnauthorizedException();\n    }\n  }\n}\n</code></pre>\n\n<p>This guard checks if the provided user in the tokenpayload is a valid one. If everything is fine, where should I attach the user to the request object? As far as I know the guard only checks if something is correct. But I don't want to keep all this logic in the token middleware. Where can I attach the database user to the request after finishing the validation in the auth guard?</p>\n"}, {"tags": ["typescript", "karma-jasmine", "aurelia", "jspm"], "comments": [{"owner": {"reputation": 1724, "user_id": 6672580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-6rBmPoEP_DQ/AAAAAAAAAAI/AAAAAAAAABU/17IsM_eOvmI/photo.jpg?sz=128", "display_name": "bigopon", "link": "https://stackoverflow.com/users/6672580/bigopon"}, "edited": false, "score": 1, "creation_date": 1570964934, "post_id": 58196438, "comment_id": 103077234, "body": "It seems you already got an answer to this somewhere in Discourse? If so, can you help link it here. For clarity, are you using the built in bundler or Webpack?"}, {"owner": {"reputation": 501, "user_id": 894679, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/91749a2e5791e64050a328e81b6069c5?s=128&d=identicon&r=PG", "display_name": "stereoscope", "link": "https://stackoverflow.com/users/894679/stereoscope"}, "reply_to_user": {"reputation": 1724, "user_id": 6672580, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-6rBmPoEP_DQ/AAAAAAAAAAI/AAAAAAAAABU/17IsM_eOvmI/photo.jpg?sz=128", "display_name": "bigopon", "link": "https://stackoverflow.com/users/6672580/bigopon"}, "edited": false, "score": 1, "creation_date": 1571055433, "post_id": 58196438, "comment_id": 103101999, "body": "no i got no feedback at all. i am not using webpack. i use this skeleton : <a href=\"https://github.com/aurelia/skeleton-navigation/tree/master/skeleton-typescript\" rel=\"nofollow noreferrer\">github.com/aurelia/skeleton-navigation/tree/master/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3668, "user_id": 1375096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef5bf3acdbc8fe78cac727eda19682a4?s=128&d=identicon&r=PG", "display_name": "huocp", "link": "https://stackoverflow.com/users/1375096/huocp"}, "is_accepted": true, "score": 1, "last_activity_date": 1571348888, "creation_date": 1571348888, "answer_id": 58441136, "question_id": 58196438, "link": "https://stackoverflow.com/questions/58196438/staging-a-component-for-testing/58441136#58441136", "title": "Staging a component for testing", "body": "<p>I never tried the jspm skeleton. It's quite outdated, I recommend you to create a new project with latest aurelia-cli, then migrate source and test over.</p>\n\n<p>Speaking about the code itself, you can switch the absolute path to relative path:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@useview('../path/to/resources/panels/data-table-panel.html')\n</code></pre>\n\n<p>This should work. Relative path bypasses karma config on those absolute module resolution.</p>\n\n<hr>\n\n<p>I don't quite understand why the karma.config has following:</p>\n\n<pre><code>paths: {\n          \"*\": \"*\",\n          \"src/*\": \"src/*\",\n</code></pre>\n\n<p>I thought it probably should be</p>\n\n<pre><code>paths: {\n          \"*\": \"src/*\",\n</code></pre>\n\n<p>Then you have to remove all <code>src/</code> prefix, like <code>.withResources('resources/...')</code>.</p>\n"}], "owner": {"reputation": 501, "user_id": 894679, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/91749a2e5791e64050a328e81b6069c5?s=128&d=identicon&r=PG", "display_name": "stereoscope", "link": "https://stackoverflow.com/users/894679/stereoscope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58441136, "answer_count": 1, "score": 1, "last_activity_date": 1571348888, "creation_date": 1569998775, "last_edit_date": 1571312899, "question_id": 58196438, "link": "https://stackoverflow.com/questions/58196438/staging-a-component-for-testing", "title": "Staging a component for testing", "body": "<p>Executing the app and loading views with <code>@useview('resources/panels/data-table-panel.html')</code> works, but running a component test fails. Caused by 404 html-file not found.</p>\n\n<p>By changing the path to <code>@useview('src/resources/panels/data-table-panel.html')</code> the component can be staged, which the leads to a 404 if the app gets started later by serving it with gulp. </p>\n\n<p><img src=\"https://i.stack.imgur.com/iCUJc.png\" alt=\"Custom Component\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/Mib9s.png\" alt=\"Staging the component\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/xcxEl.png\" alt=\"File Tree\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/7qOZK.png\" alt=\"Karma Conf\"></p>\n\n<p>Does anybody have an idea how to workaround this problem?\nthx </p>\n"}, {"tags": ["angular", "typescript", "angular-pipe"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1569998718, "post_id": 58196374, "comment_id": 102771145, "body": "Could you clarify <i>&quot;doesn&#39;t work&quot;</i>? Also note that the output of DecimalPipe#transform and therefore the input of CommaConvertPipe#transform is string, not number."}, {"owner": {"reputation": 1456, "user_id": 11258735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tSYt3.png?s=128&g=1", "display_name": "JuNe", "link": "https://stackoverflow.com/users/11258735/june"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1569998918, "post_id": 58196374, "comment_id": 102771225, "body": "You were right. The problem was that the value from the DecimalPipe was a string and not a number."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 3, "creation_date": 1569998972, "post_id": 58196374, "comment_id": 102771247, "body": "<code>value+&quot;&quot;.replace(&quot;.&quot;, &quot;,&quot;)</code> means you only replace in <code>&quot;&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 574, "user_id": 12083327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f59a665af648be2dd8c78d1118da4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Phat Huynh", "link": "https://stackoverflow.com/users/12083327/phat-huynh"}, "is_accepted": false, "score": -1, "last_activity_date": 1569998803, "creation_date": 1569998803, "answer_id": 58196444, "question_id": 58196374, "link": "https://stackoverflow.com/questions/58196374/how-to-implement-a-custom-pipe-which-replaces-a-dot-with-a-comma/58196444#58196444", "title": "How to implement a custom pipe which replaces a dot with a comma?", "body": "<p>Please, edit in transform return</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>return value.toString().replace(\".\", \",\")\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 11258735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tSYt3.png?s=128&g=1", "display_name": "JuNe", "link": "https://stackoverflow.com/users/11258735/june"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1569998803, "creation_date": 1569998526, "question_id": 58196374, "link": "https://stackoverflow.com/questions/58196374/how-to-implement-a-custom-pipe-which-replaces-a-dot-with-a-comma", "title": "How to implement a custom pipe which replaces a dot with a comma?", "body": "<p>I have a number with decimal points like --> 1.33</p>\n\n<p>I want to convert the this value that instead a dot a comma is shown.</p>\n\n<p>I tried that with a custom pipe but that didn\u00b4t work.</p>\n\n<pre><code>{{getMyValue() | number:'1.2-2' | commaConvert}}\n</code></pre>\n\n<pre><code>import { Pipe, PipeTransform } from \"@angular/core\";\n\n@Pipe({name: 'commaConvert'})\nexport class CommaConvertPipe implements PipeTransform {\n    transform(value: number) {\n        return value+\"\".replace(\".\", \",\")\n    }\n}\n</code></pre>\n\n<p>I have also tried to use only the commaConvert pipe.</p>\n"}, {"tags": ["typescript", "karma-jasmine", "node-modules", "openid-connect"], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 384342, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/6RmU0.jpg?s=128&g=1", "display_name": "Siva Senthil", "link": "https://stackoverflow.com/users/384342/siva-senthil"}, "is_accepted": true, "score": 0, "last_activity_date": 1570085256, "last_edit_date": 1570085256, "creation_date": 1570037410, "answer_id": 58206462, "question_id": 58196327, "link": "https://stackoverflow.com/questions/58196327/karmajs-fails-to-launch-when-node-openid-client-is-imported-in-typescript-specif/58206462#58206462", "title": "karmajs fails to launch when node-openid-client is imported in typescript specification file", "body": "<p>It seems I have figured out (with medium confidence levels) responses to my questions. Request the community to vote if this is plausible enough answer.</p>\n\n<p><strong>TL;DR</strong> - karma-typescript has a <a href=\"https://github.com/monounity/karma-typescript/issues/344\" rel=\"nofollow noreferrer\">known limitation</a> which is causing the error. Even without the karma-typescript plugin; node-openid-client as well is <a href=\"https://github.com/panva/node-openid-client/blob/c37130ba3aac9311b8be3aed0fd32e8ae553b3ba/README.md#how-do-i-use-it-outside-of-nodejs\" rel=\"nofollow noreferrer\">not expected to work in browser</a> as-of now (2-October-2019T16:30UT). So, yes I cannot use node-opened-client with karma (which cannot work <a href=\"https://stackoverflow.com/a/21903679/384342\">without browser</a> even <a href=\"https://stackoverflow.com/a/47830920/384342\">as-of now</a> (2-October-2019T16:30UT) ). Viable <a href=\"https://stackoverflow.com/a/16660909/384342\">alternate</a> is to use mocha instead of karma.</p>\n\n<p><strong><em>Details for the aforesaid conclusion</em></strong></p>\n\n<p>File <strong>error.js</strong> region around line 24,2 looks like this </p>\n\n<pre><code>\n    Line 16:    Object.assign(\n    Line 17:        this,\n    Line 18:        {error},\n    Line 19:        (error_description &amp;&amp; {error_description}),\n    Line 20:        (error_uri &amp;&amp; {error_uri}),\n    Line 21:        (state &amp;&amp; {state}),\n    Line 22:        (scope &amp;&amp; {scope}),\n    Line 23:        (session_state &amp;&amp; {session_state}),\n    Line 24:    );\n</code></pre>\n\n<p>Line 24,2 corresponds to the closing braces of Object.assign call. If you notice there is an extra comma the line above. I removed it to see the error goes away. May it is a transpiler used by the library node-opened-client at fault. After fixing it I got following error </p>\n\n<pre><code>\n    ERROR [source-reader.karma-typescript]: Error parsing code: Unexpected token (72:8)\n    in C:\\VSCode\\Projects\\openid-client-test\\javascript\\node_modules\\openid-client\\lib\\issuer.js\n    at line 72, column 8:\n\n    ... keystore(reload = false) {\n        assertIssuerConfigu ...\n</code></pre>\n\n<p>File <strong>issuer.js</strong> region around line 72 looks like this </p>\n\n<pre><code>\n    Line 68    /**\n    Line 69    * @name keystore\n    Line 70    * @api public\n    Line 71    */\n    Line 72    async keystore(reload=false) {\n    Line 73        assertIssuerConfiguration(this, 'jkws_uri');\n\n</code></pre>\n\n<p>Line 72 uses the async keyword and the immediate question is whether async keyword is supported in the (com/trans)pilation process?</p>\n\n<p>To test this hypothesis I removed the async keyword and noticed error location moved to the next occurrence of async.</p>\n\n<p>I could not find much of fault in the node-openid-client library. But in karma-typescript plugin while the files are being bundled there is something going wrong terribly. Search in their repository yields few hints. In which i got cognizant of the configuration which could have caused the problem. </p>\n\n<p>File <strong><a href=\"https://github.com/monounity/karma-typescript/blob/7990de822aeab3f8648384d072e161c0f0ff0e28/packages/karma-typescript/src/shared/configuration.ts#L113\" rel=\"nofollow noreferrer\">configuration.ts</a></strong> region around Line 113 looks like this - </p>\n\n<pre><code>    ...\n    Line 111    const defaultBundlerOptions: BundlerOptions = {\n    Line 112        acornOptions: {\n    Line 113            ecmaVersion : 7,\n    Line 114            sourceType : \"module\"\n    Line 115        },\n    ...\n</code></pre>\n\n<p>If I change this version of ecmaVersion 7 right here in the local copy present in the node_modules folder, I got the issue resolved but I got stuck in another error but this time with spread syntax for arrays.</p>\n\n<p>With focused search I landed on the SO question <a href=\"https://stackoverflow.com/questions/53412866/karma-typescript-import-js-file-with-async-keyword?answertab=active#tab-top\">karma-typescript: import JS file with Async keyword</a>. Apparently this is an <a href=\"https://github.com/monounity/karma-typescript/issues/344\" rel=\"nofollow noreferrer\">open issue</a> with karma-typescript which is yet in open state (2-October-2019T16:30UT). Instead of changing the js file you could set a undocumented property of karma-typescript. However, that does not get me closer to solution I had wished for !</p>\n\n<p>Responding to the individual questions </p>\n\n<p><strong>Q1 : I wonder why does karma parse the js file in node_modules folder? I am excluding it in tsconfig.json.</strong></p>\n\n<p><strong><em>A1</strong>: karma is bundling the dependent files for the test script to run in a <strong>browser</strong>. In this process the setting referred to in tsconfig.json is of no relevance.</em></p>\n\n<p><strong>Q2 : Please help me with how to determine which configuration property is at fault !</strong></p>\n\n<p><strong><em>A2</strong>: For the error quoted in this SO question it is the <code>karmaTypescriptConfig.bundlerOptions.acorOptions</code> which accepts a JSON and one could set it in karma.conf.js as</em> </p>\n\n<pre><code>    karmaTypescriptConfig: {\n        bundlerOptions: {\n            acornOptions: {\n            ecmaVersion: 8,\n        },\n        transforms: [require(\"karma-typescript-es6-transform\")()]\n    }\n</code></pre>\n\n<p><strong>Q3 : Worrying question for me - Is openid-client not comptabile with karma test runner? Is such a limitation possible? I did not see any corresponding issue in GitHub repository.</strong></p>\n\n<p><strong><em>A3</strong>: Implicitly yes ! - openid-client is not compatible with karma because it uses browser and node-openid-client is <a href=\"https://github.com/panva/node-openid-client/blob/c37130ba3aac9311b8be3aed0fd32e8ae553b3ba/README.md#how-do-i-use-it-outside-of-nodejs\" rel=\"nofollow noreferrer\">not supported</a> for such environments even if I overcome the challenge with karma-typescript by commenting it I will not be able to use it with karma which uses browser based test running.</em></p>\n\n<p><em>Alternatively I could use mocha as test runner framework instead of karma. I checked; <a href=\"https://github.com/panva/node-openid-client/blob/c37130ba3aac9311b8be3aed0fd32e8ae553b3ba/package.json#L39\" rel=\"nofollow noreferrer\">node-openid-client library themselves use mocha</a> for testing. Mocha is first class citizen to nodejs.</em></p>\n"}], "owner": {"reputation": 563, "user_id": 384342, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/6RmU0.jpg?s=128&g=1", "display_name": "Siva Senthil", "link": "https://stackoverflow.com/users/384342/siva-senthil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58206462, "answer_count": 1, "score": 0, "last_activity_date": 1570085256, "creation_date": 1569998303, "question_id": 58196327, "link": "https://stackoverflow.com/questions/58196327/karmajs-fails-to-launch-when-node-openid-client-is-imported-in-typescript-specif", "title": "karmajs fails to launch when node-openid-client is imported in typescript specification file", "body": "<p>I am using <a href=\"https://github.com/panva/node-openid-client\" rel=\"nofollow noreferrer\">node-openid-client</a> to perform OpenIDConnect based authentication with an OpenID Provider. </p>\n\n<p>I have now run into issues when I attempt to write test cases for this program. When the application is run from node CLI it functionally works. i.e. it gets the code and I can use it to get token as well ! </p>\n\n<p>The error that I am running into is </p>\n\n<pre><code>ERROR [source-reader.karma-typescript]: Error parsing code: Unexpected token (24:2)\nin C:\\VSCode\\Projects\\openid-client-test\\javascript\\node_modules\\openid-client\\lib\\errors.js \nat line 24, column 2:\n\n... );\nif (response) {\n     Object.defineProperty(th ...\n</code></pre>\n\n<p>Above this error following are the activities Karma runner is performing - </p>\n\n<pre><code>INFO [compiler.karma-typescript]: Compiled 1 files in 3029 ms.\n\nDEBUG [bundler.karma-typescript]: Project has 2 import/require statements, code will be bundled\n\nDEBUG [es6-transform.karma-typescript]: Transforming C:\\VSCode\\Projects\\openid-client-test\\javascript\\node_modules\\openid-client\\lib\\index.js\n</code></pre>\n\n<p>These are the logs generated by Karma when run with <code>LOG_DEBUG</code> configuration.</p>\n\n<p><strong>I am not using Angular or any other UI frameworks</strong>.</p>\n\n<p>I have few questions based on these errors - </p>\n\n<p><strong>Q1</strong> : <strong>I wonder why does karma parse the js file in node_modules folder? I am excluding it in tsconfig.json.</strong></p>\n\n<p>Based on the activities performed before the error, I notice that it is failing to bundle the required files of openid-client library. However, if I run browserify bundle for this library it succeeds. I guess I have done some configuration wrong in any of the file listed below. </p>\n\n<p><strong>Q2</strong> : <strong>Please help me with how to determine which configuration property is at fault !</strong>, or a solution itself will be much appreciated as well !</p>\n\n<p><strong>Q3</strong> : Worrying question for me - <strong>Is openid-client not comptabile with karma test runner?</strong> Is such a limitation possible? I did not see any corresponding <a href=\"https://github.com/panva/node-openid-client/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+karma\" rel=\"nofollow noreferrer\">issue</a> in GitHub repository.</p>\n\n<p>Following are the files of interest which I kept editing to get around this error. However, I think I have hit a wall now.</p>\n\n<p>In order to focus on the issue and see in black and white whether the openid-client is causing the issue, I had introduced a minimal test case targeting jasmine framework. The spec looks like this - </p>\n\n<p><strong>probe.spec.ts</strong> file</p>\n\n<pre><code>import { Issuer } from 'openid-client';\ndescribe('Hello', () =&gt; {\n  it('Checks', () =&gt; {\n    expect('hello').toBe('hello');\n  })\n});\n</code></pre>\n\n<p>Now while experimenting I had removed the import in first line. If that is done; karma launches and reports the test case has been successful !</p>\n\n<p>Dependencies (including dev) for the <strong>package.json</strong> file</p>\n\n<pre><code>\"dependencies\": {\n  \"@types/node\": \"^12.7.5\",\n  \"amazon-cognito-auth-js\": \"^1.3.2\",\n  \"atob\": \"^2.1.2\",\n  \"openid-client\": \"^3.7.2\",\n  \"typescript\": \"^3.6.3\",\n  \"xmlhttprequest\": \"^1.8.0\"\n},\n\"devDependencies\": {\n  \"@types/jasmine\": \"^3.4.1\",\n  \"jasmine-core\": \"^3.5.0\",\n  \"karma\": \"^4.3.0\",\n  \"karma-chrome-launcher\": \"^3.1.0\",\n  \"karma-coverage-istanbul-reporter\": \"^2.1.0\",\n  \"karma-jasmine\": \"^2.0.1\",\n  \"karma-jasmine-html-reporter\": \"^1.4.2\",\n  \"karma-spec-reporter\": \"0.0.32\",\n  \"karma-typescript\": \"^4.1.1\",\n  \"karma-typescript-es6-transform\": \"^4.1.1\"\n}\n</code></pre>\n\n<p><strong>tsconfig.json</strong> looks like this - </p>\n\n<pre><code>{\n  \"include\": [\n    \"src/**/*.ts\"\n  ],\n  \"exclude\": [\n    \"node_modules\"\n  ],\n  \"compilerOptions\": {\n  \"module\": \"commonjs\",\n  \"target\": \"es2016\",\n  \"noImplicitAny\": false,\n  \"strictNullChecks\": true,\n  \"moduleResolution\": \"node\",\n  \"sourceMap\": true,\n  \"importHelpers\": true,\n  \"outDir\": \"output\",\n  \"baseUrl\": \".\",\n  \"typeRoots\": [\n    \"node_modules/@types\"\n  ],\n  \"types\": [\n    \"@types/jasmine\",\n    \"@types/node\"\n  ],\n  \"lib\": [\n    \"es2017\",\n    \"dom\",\n    \"es2015.generator\",\n    \"es2015.iterable\",\n    \"es2015.promise\",\n    \"es2015.symbol\",\n    \"es2015.symbol.wellknown\",\n    \"esnext.asynciterable\"\n  ]}\n}\n</code></pre>\n\n<p><strong>karma.conf.js</strong> looks like this -</p>\n\n<pre><code>module.exports = (config) =&gt; {\n  config.set({\n    frameworks: ['jasmine', 'karma-typescript'],\n    plugins: [\n      'karma-jasmine',\n      'karma-typescript',\n      'karma-chrome-launcher',\n      'karma-spec-reporter',\n      'karma-typescript-es6-transform'\n    ],\n    karmaTypescriptConfig: {\n      tsconfig: \"./tsconfig.json\",\n      compilerOptions: {\n        allowJs: true\n      },\n      bundlerOptions: {\n        entrypoints: /\\.spec\\.(ts|tsx)$/,\n        addNodeGlobals: true,\n        transforms: [require(\"karma-typescript-es6-transform\")()]\n      }\n    },\n    files: [{ pattern: 'src/**/*.+(js|ts)' }],\n    preprocessors: {\n      'src/**/*.+(js|ts)': ['karma-typescript']\n    },\n    client: {\n      clearContext: false\n    },\n    reporters: ['spec', 'karma-typescript'],\n    colors: true,\n    logLevel: config.LOG_DEBUG,\n    autoWatch: true,\n    browsers: ['Chrome'],\n    singleRun: true\n  })\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "ngrx", "angular8"], "comments": [{"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 0, "creation_date": 1569998296, "post_id": 58196168, "comment_id": 102770987, "body": "Just update my answer with included link"}, {"owner": {"reputation": 267, "user_id": 4946297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85452734a67166d0841e97b32cab75e0?s=128&d=identicon&r=PG", "display_name": "Kaashan", "link": "https://stackoverflow.com/users/4946297/kaashan"}, "reply_to_user": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 1, "creation_date": 1570016472, "post_id": 58196168, "comment_id": 102779396, "body": "@TonyNgo: Thanks for taking a look at this and sharing your feedback. I added the reference of ROOT_REDUCERS and StoreRouterConnectingModule.forRoot() in app.module.ts but still the build fails. I took a look at your code as well and there the StoreModule.forFeature points directly to the reducer and not an ActionReducerMap. I am suspecting providing reference of ActionReducerMap in StoreModule.forFeature is causing problem for me. If I directly add the reference of reducer, it works. Any further pointers?"}, {"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 0, "creation_date": 1570172080, "post_id": 58196168, "comment_id": 102836615, "body": "I think you having the problem when using ActionReducerMap in your feature module. Can you share your code with me on github ?"}], "answers": [{"tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 1, "last_activity_date": 1569998004, "creation_date": 1569998004, "answer_id": 58196280, "question_id": 58196168, "link": "https://stackoverflow.com/questions/58196168/using-actionreducermap-with-storemodule-forfeature-gives-build-error/58196280#58196280", "title": "Using ActionReducerMap with StoreModule.forFeature gives build error", "body": "<p>Here is my code I think you are missing the ROOT_REDUCERS</p>\n\n<pre><code>export const ROOT_REDUCERS = new InjectionToken&lt;\n  ActionReducerMap&lt;State, Action&gt;\n&gt;(\"Root reducers token\", {\n  factory: () =&gt; ({\n    router: fromRouter.routerReducer\n  })\n});\n\nStoreModule.forRoot(ROOT_REDUCERS, {\n    metaReducers,\n    runtimeChecks: {\n    strictStateImmutability: true,\n    strictActionImmutability: true\n    }\n}),\n</code></pre>\n\n<p>Here is my full code for your <a href=\"https://github.com/ngohungphuc/Presentation/tree/master/NgRx/ngrx-demo-v2\" rel=\"nofollow noreferrer\">reference</a></p>\n"}], "owner": {"reputation": 267, "user_id": 4946297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85452734a67166d0841e97b32cab75e0?s=128&d=identicon&r=PG", "display_name": "Kaashan", "link": "https://stackoverflow.com/users/4946297/kaashan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569998429, "creation_date": 1569997306, "last_edit_date": 1569998429, "question_id": 58196168, "link": "https://stackoverflow.com/questions/58196168/using-actionreducermap-with-storemodule-forfeature-gives-build-error", "title": "Using ActionReducerMap with StoreModule.forFeature gives build error", "body": "<p>I have my angular project structure as below:</p>\n\n<pre><code>/(root or repo folder)\n |_ projects\n    |_ mylib (this is the main library that will be exported from the repo)\n    |_ sample-app (created to consume 'mylib ' project to test that things work fine when 'mylib' would be consumed in other projects)\n</code></pre>\n\n<p>To handle application state I am using ngRx (of which I have only basic knowledge). The project is setup with Angular8.2.5, ngRx 8.3.0 and RxJs 6.5.3.</p>\n\n<p>On doing <code>npm start</code> on the repo, <code>sample-app</code> project is bootstrapped and <code>mylib</code> project is lazily loaded.</p>\n\n<p>Here is how I have initialized the app store/state</p>\n\n<p>In <code>sample-app/app.module.ts</code> (inside <code>sample-app</code> project)</p>\n\n<pre><code>StoreModule.forRoot({}, {\n      runtimeChecks: {\n        strictStateImmutability: true,\n        strictActionImmutability: true,\n        strictStateSerializability: true,\n        strictActionSerializability: true,\n      },\n    }),\n!environment.production ? StoreDevtoolsModule.instrument({ name: 'My Sample App' }) : [],\n</code></pre>\n\n<p>In <code>mylib/mylib.module.ts</code> (inside <code>mylib</code> project)</p>\n\n<pre><code>import { libReducer} from './shared/store/lib.store';\nStoreModule.forFeature('libState', libReducer)\n</code></pre>\n\n<p>The <code>libReducer</code> is exported from <code>mylib/shared/store/lib.store.ts</code> file</p>\n\n<pre><code>export interface subFeatureOneState {\n    // some properties defined here\n}\n\nexport interface LibState {\n  subFeatureOneReducer: subFeatureOneState;\n}\n\nexport const libReducer: ActionReducerMap&lt;LibState&gt; = {\n  subFeatureOneReducer,\n};\n</code></pre>\n\n<p>The only issue I am getting with this setup is that I get an error when I try to build my project( using <code>ng build</code>).</p>\n\n<p>The error says</p>\n\n<p><a href=\"https://i.stack.imgur.com/1KpZL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1KpZL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Checking the logs doesn't provide much help either.</p>\n\n<p>The build issue gets resolved if I change <code>StoreModule.forFeature</code> definition in <code>mylib.module.ts</code> to below</p>\n\n<pre><code>StoreModule.forFeature('libState', subFeatureOneReducer)\n</code></pre>\n\n<p>But this is not what I desire as I intend to keep all my reducers at one place and just have one reference of <code>StoreModule.forFeature</code> inside <code>mylib</code> project.</p>\n\n<p>I couldn't find much articles online that explain usage of <code>ActionReducerMap</code> for a feature module store. I followed the approach mentioned below, but it didn't solved the build failure issue:\n<a href=\"https://stackoverflow.com/questions/47052282/ngrx-store-combine-multiple-reducers-from-feature-module\">@ngrx/store combine multiple reducers from feature module</a></p>\n\n<p>Is there something wrong with the way I have configured store/reducers to be initialized? It would be great if I can get any pointers on this to solve the build error issue.</p>\n"}, {"tags": ["php", "angular", "typescript", "wamp", "wampserver"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 11929015, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8PB3ZoqL_4o/AAAAAAAAAAI/AAAAAAAAAIo/kicuobdEaRQ/photo.jpg?sz=128", "display_name": "MrTheBarintokyo", "link": "https://stackoverflow.com/users/11929015/mrthebarintokyo"}, "edited": false, "score": 0, "creation_date": 1569996726, "post_id": 58195803, "comment_id": 102770496, "body": "how did you get that concatMap() from rxJs going?"}, {"owner": {"reputation": 97, "user_id": 11929015, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8PB3ZoqL_4o/AAAAAAAAAAI/AAAAAAAAAIo/kicuobdEaRQ/photo.jpg?sz=128", "display_name": "MrTheBarintokyo", "link": "https://stackoverflow.com/users/11929015/mrthebarintokyo"}, "edited": false, "score": 0, "creation_date": 1569998616, "post_id": 58195803, "comment_id": 102771112, "body": "what angular version did you use?"}], "tags": [], "owner": {"reputation": 178, "user_id": 11835546, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-irT9k_GJGnI/AAAAAAAAAAI/AAAAAAAAAEQ/imhRRa05IjM/photo.jpg?sz=128", "display_name": "Chandrakant Devani", "link": "https://stackoverflow.com/users/11835546/chandrakant-devani"}, "is_accepted": false, "score": 1, "last_activity_date": 1569998246, "last_edit_date": 1569998246, "creation_date": 1569994937, "answer_id": 58195803, "question_id": 58195618, "link": "https://stackoverflow.com/questions/58195618/cors-headers-not-working-for-file-upload-from-angular-to-php/58195803#58195803", "title": "CORS headers not working for File Upload from Angular to PHP", "body": "<p>try this</p>\n\n<p>Add below Code in .htaccess file PHP(Server) side</p>\n\n<pre><code>&lt;IfModule mod_headers.c&gt;\n    Header set Access-Control-Allow-Origin \"*\"\n    Header always set Access-Control-Allow-Methods \"POST, GET, PUT, DELETE, OPTIONS\"\n    Header always set Access-Control-Allow-Headers \"X-Requested-With, content-type\"\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>Angular Code</p>\n\n<p>page.html</p>\n\n<pre><code>&lt;input type=\"file\" (change)=\"fileUpload($event)\" /&gt;\n</code></pre>\n\n<p>npm install</p>\n\n<pre><code>\"rxjs\": \"~6.5.1\", //npm i rxjs@6.5.1 --save\n\"rxjs-compat\": \"^6.5.2\" // npm i rxjs-compat@6.5.2 --save\n</code></pre>\n\n<p>page.ts</p>\n\n<pre><code>import 'rxjs/add/observable/from';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/operator/concatMap';\n\nfileUpload(event){\n      let formData = new FormData();\n          formData.append('file', event.target.files[0]);\n\n      this.ImageUpload(formData).subscribe(val =&gt; {\n        //enter custom code\n      })\n}\n\n\nImageUpload(formData):Observable&lt;any&gt;{\n    var token = localStorage.getItem('keyToken');\n    const myHeaders = new HttpHeaders({ 'Authorization': token });\n    return this.http\n    .post(URL, formData,{headers:myHeaders})\n    .concatMap(data=&gt;{\n      return Observable.of(data);\n    }) \n  }\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 11929015, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8PB3ZoqL_4o/AAAAAAAAAAI/AAAAAAAAAIo/kicuobdEaRQ/photo.jpg?sz=128", "display_name": "MrTheBarintokyo", "link": "https://stackoverflow.com/users/11929015/mrthebarintokyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569998246, "creation_date": 1569993757, "last_edit_date": 1569994623, "question_id": 58195618, "link": "https://stackoverflow.com/questions/58195618/cors-headers-not-working-for-file-upload-from-angular-to-php", "title": "CORS headers not working for File Upload from Angular to PHP", "body": "<p>I am trying to upload images from my Angular 8+ frontend to my php backend and sending text data works without a problem, but wanting to send image files to a folder in my wamp directory, no cigar unfortunately...</p>\n\n<p>It worked earlier, but this morning it decided it did not want to work anymore. I tried adding to the CORS headers, but nothing seems wrong there.</p>\n\n<p>html:</p>\n\n\n        \n            \n        \n    \n\n<pre><code>&lt;input type=\"button\" value=\"Test\" (click)='Advertise($event.target.files)'&gt;\n</code></pre>\n\n<p>component:</p>\n\n<pre><code>ToUpload()\n  {\n    let images = this.carImages.nativeElement;\n    let j=10;\n    for(let i of images.files)\n    { \n      console.log(i);\n      if(i.type=='image/jpeg')\n      {\n        let frmData = new FormData();\n        frmData.append('file',i,(j+'.jpg').toString());\n        this.uploadService.UploadImages(frmData).subscribe(val=&gt;\n        {\n        })\n      }\n      if(i.type=='image/png')\n      {\n        let frmData = new FormData();\n        frmData.append('file',i,(j+'.png').toString());\n        this.uploadService.UploadImages(frmData).subscribe(val=&gt;\n        {\n        })\n      }\n      j++;\n    }\n\n  }\n  Advertise(files:FileList)\n  {\n    this.ToUpload();\n  }\n</code></pre>\n\n<p>service:</p>\n\n<pre><code>UploadImages(image:FormData):Observable&lt;any&gt;\n  {\n    return this.httpClient.post(this.apiURL+\"/api/BLL/imageUpload.php?action=upload\",image) as Observable&lt;any&gt;;\n  }\n</code></pre>\n\n<p>CORS_Headers.php</p>\n\n<pre><code>&lt;?php\n// Default Header\nheader('Access-Control-Allow-Methods: GET, PUT, POST, DELETE, OPTIONS');\nheader('Access-Control-Allow-Headers: Content-Type, Authorization,Content-Range, Content-Disposition, Content-Description');\nheader('Access-Control-Allow-Origin: *');\nheader(\"Access-Control-Allow-Credentials: true\");\nheader(\"MIME-Version: 1.0\");\nheader(\"Content-type:text/html;charset=UTF-8\");\n// Response type header\nheader('Content-Type: application/json');\n?&gt;\n</code></pre>\n\n<p>imageUpload.php</p>\n\n<pre><code>&lt;?php\nrequire_once '../BLL/CORS_Headers.php';\n\n//require '../DAL/DBHandler.php';\n\n//use DAL\\DBHandler;\n\n$action=$_GET['action'];\nif($action=='upload')\n{\n    $tempPath = $_FILES['file']['tmp_name'];\n\n    // Get File Name\n    $actualName = $_FILES['file']['name'];\n\n    // New path\n    $actualPath = '../Images/' . $actualName;\n    //$tempPath = compressImage($tempPath,$actualPath,60);\n    // Move File into new path\n    move_uploaded_file($tempPath, $actualPath)\n    // Get real path of moved file here\n    $realPath = realpath(__DIR__ . '/' . $actualPath);\n    // Delete the file\n    echo \"Uploaded\";\n}\n</code></pre>\n\n<p>Expected result: Just do the upload</p>\n\n<p>Actual result: <code>Access to XMLHttpRequest at 'http://localhost:3000/api/BLL/imageUpload.php?action=upload' from origin 'http://localhost:4200' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.</code></p>\n\n<p>and </p>\n\n<pre><code>HttpErrorResponse\u00a0{headers: HttpHeaders, status: 0, statusText: \"Unknown Error\", url: \"http://localhost:3000/api/BLL/imageUpload.php?action=upload\", ok: false,\u00a0\u2026}\n</code></pre>\n"}, {"tags": ["typescript", "definitelytyped", ".d.ts"], "answers": [{"tags": [], "owner": {"reputation": 5065, "user_id": 8289918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nN3lT.jpg?s=128&g=1", "display_name": "cherryblossom", "link": "https://stackoverflow.com/users/8289918/cherryblossom"}, "is_accepted": true, "score": 0, "last_activity_date": 1598866683, "creation_date": 1598866683, "answer_id": 63668349, "question_id": 58195532, "link": "https://stackoverflow.com/questions/58195532/how-do-you-type-a-circular-reference-in-a-namespace-in-a-declaration-file/63668349#63668349", "title": "How do you type a circular reference in a namespace in a declaration file?", "body": "<p>You can use an interface to accurately represent the recursive type:</p>\n<pre><code>export = fn1;\n\ndeclare const fn1: Fn1\n\ninterface Fn1 {\n  // The call signature of fn1\n  (): void\n  // The circular reference\n  fn1: Fn1\n  // Other functions\n  fn2: () =&gt; void\n}\n</code></pre>\n"}], "owner": {"reputation": 5065, "user_id": 8289918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nN3lT.jpg?s=128&g=1", "display_name": "cherryblossom", "link": "https://stackoverflow.com/users/8289918/cherryblossom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 63668349, "answer_count": 1, "score": 0, "last_activity_date": 1598866683, "creation_date": 1569993089, "last_edit_date": 1570064610, "question_id": 58195532, "link": "https://stackoverflow.com/questions/58195532/how-do-you-type-a-circular-reference-in-a-namespace-in-a-declaration-file", "title": "How do you type a circular reference in a namespace in a declaration file?", "body": "<p>I'm trying to type a UMD module (that I don't own so I can't change it) for the DefinitelyTyped project that has something like this (with actual functions of course):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function getModule() {\n    function fn1() {}\n    function fn2() {}\n\n    fn1.fn2 = fn2;\n    return fn1.fn1 = fn1;\n}\n\nif (typeof define === \"function\" &amp;&amp; define.amd) {\n    define(getModule());\n} else if (typeof module !== \"undefined\" &amp;&amp; module.exports) { \n    module.exports = getModule();\n} else {\n    this.moduleName = getModule();\n}\n</code></pre>\n\n<p>Using <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-files/templates/module-function-d-ts.html\" rel=\"nofollow noreferrer\">the module-function.d.ts</a> template, I have this so far:</p>\n\n<pre><code>export as namespace moduleName;\n\nexport = fn1;\n\ndeclare function fn1(): void;\n\ndeclare namespace fn1 {\n    function fn2(): void;\n}\n</code></pre>\n\n<p>I then used <a href=\"https://github.com/microsoft/dts-gen\" rel=\"nofollow noreferrer\">dts-gen</a> to generate a .d.ts file for me to try to find out how to declare the <code>fn1</code> function again in the <code>fn1</code> namespace and got this:</p>\n\n<pre><code>/** Declaration file generated by dts-gen */\n\nexport = moduleName;\n\ndeclare function moduleName(): void;\n\ndeclare namespace moduleName {\n    // Circular reference from moduleName\n    const fn1: any;\n\n    function fn2(): void;\n}\n</code></pre>\n\n<p>However, when I tried combining the two in the following code I got the error <code>'fn1' is referenced directly or indirectly in its own type annotation.</code>.</p>\n\n<pre><code>export as namespace moduleName;\n\nexport = fn1;\n\ndeclare function fn1(): void;\n\ndeclare namespace fn1 {\n    function fn2(): void;\n    const fn1: any;\n}\n</code></pre>\n\n<p>I don't want to do the following because then it wouldn't represent the fact that you can do <code>require('moduleName').fn1.fn1.fn1.fn2</code> (or any number of <code>fn1</code>s.</p>\n\n<pre><code>export = moduleName;\n\ndeclare function moduleName(): void;\n\ndeclare namespace moduleName {\n    function fn1(): void;\n    function fn2(): void;\n}\n</code></pre>\n\n<hr>\n\n<p>How would I type this module?</p>\n"}, {"tags": ["typescript", "intellij-idea", "visual-studio-code", "liskov-substitution-principle"], "comments": [{"owner": {"reputation": 6031, "user_id": 10871900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-noQwojQppnY/AAAAAAAAAAI/AAAAAAAAACs/59RU8UyHFSk/photo.jpg?sz=128", "display_name": "dan1st", "link": "https://stackoverflow.com/users/10871900/dan1st"}, "edited": false, "score": 0, "creation_date": 1569993150, "post_id": 58195521, "comment_id": 102769492, "body": "Do you mean vscode or the ts compiler?"}, {"owner": {"reputation": 27, "user_id": 9933341, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "li zixiang", "link": "https://stackoverflow.com/users/9933341/li-zixiang"}, "reply_to_user": {"reputation": 6031, "user_id": 10871900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-noQwojQppnY/AAAAAAAAAAI/AAAAAAAAACs/59RU8UyHFSk/photo.jpg?sz=128", "display_name": "dan1st", "link": "https://stackoverflow.com/users/10871900/dan1st"}, "edited": false, "score": 0, "creation_date": 1570008223, "post_id": 58195521, "comment_id": 102775502, "body": "Because vscode uses lsp to communicate with ts language service, so vscode can not do like <code>string literal rename</code> because ts do not support this feature. What I wonder is how IntelliJ can do this."}, {"owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "edited": false, "score": 0, "creation_date": 1570009201, "post_id": 58195521, "comment_id": 102776003, "body": "please provide files/code snippets plus steps to repeat the issues"}], "owner": {"reputation": 27, "user_id": 9933341, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "li zixiang", "link": "https://stackoverflow.com/users/9933341/li-zixiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570007995, "creation_date": 1569992962, "last_edit_date": 1570007995, "question_id": 58195521, "link": "https://stackoverflow.com/questions/58195521/how-can-intellij-support-some-features-which-typescript-compiler-does-not-supp", "title": ", How can IntelliJ support some features which TypeScript compiler does not support?", "body": "<p>Like <code>literal type</code> refactor and goto implementation returns different results between Vscode and IntelliJ. Do IntelliJ uses LSP to communicate with tsc or they just implements another tsc?</p>\n"}, {"tags": ["typescript", "vim"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5596121, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203987548203856/picture?type=large", "display_name": "Pedro H. Santiago", "link": "https://stackoverflow.com/users/5596121/pedro-h-santiago"}, "is_accepted": false, "score": 0, "last_activity_date": 1589034439, "creation_date": 1589034439, "answer_id": 61698312, "question_id": 58195147, "link": "https://stackoverflow.com/questions/58195147/can-vims-ales-alerename-rename-a-folder-or-file-and-update-all-project-imports/61698312#61698312", "title": "Can Vim&#39;s ALE&#39;s ALERename rename a folder or file and update all project imports?", "body": "<p>Yes, it works in ALE, just put the cursor over <code>bar</code> in <code>import { foo } from 'bar';</code> and do a <code>:ALERename foobar</code>.</p>\n\n<p>ALE will use the language server to find every place that import something from <code>bar</code> and rename to <code>foobar</code></p>\n"}], "owner": {"reputation": 2377, "user_id": 1561922, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6b1e1632e072f174d9561f3d3796da0c?s=128&d=identicon&r=PG", "display_name": "geoyws", "link": "https://stackoverflow.com/users/1561922/geoyws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1589034439, "creation_date": 1569989866, "question_id": 58195147, "link": "https://stackoverflow.com/questions/58195147/can-vims-ales-alerename-rename-a-folder-or-file-and-update-all-project-imports", "title": "Can Vim&#39;s ALE&#39;s ALERename rename a folder or file and update all project imports?", "body": "<p>VSCode does this. I figured Stack Overflow would be the best place for me to ask this. </p>\n\n<p>I'm assuming that the function of refactoring the names of files and folders and the updating of ES6 imports come under TSServer's responsibilities; hence ALE should be able to support it.</p>\n"}, {"tags": ["javascript", "typescript", "react-native", "set"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1569988737, "post_id": 58194995, "comment_id": 102768698, "body": "@Phil - would that help with <b>typescript</b>?"}, {"owner": {"reputation": 1, "user_id": 12147222, "user_type": "registered", "profile_image": "https://graph.facebook.com/525209991378644/picture?type=large", "display_name": "\uc548\ub2e4\ud76c", "link": "https://stackoverflow.com/users/12147222/%ec%95%88%eb%8b%a4%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1569988753, "post_id": 58194995, "comment_id": 102768701, "body": "I just write &#39;typeof Set&#39; into ??  am I right?"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 1, "creation_date": 1569988770, "post_id": 58194995, "comment_id": 102768703, "body": "So, where has you exhaustive research and attempts gone so far?"}, {"owner": {"reputation": 1, "user_id": 12147222, "user_type": "registered", "profile_image": "https://graph.facebook.com/525209991378644/picture?type=large", "display_name": "\uc548\ub2e4\ud76c", "link": "https://stackoverflow.com/users/12147222/%ec%95%88%eb%8b%a4%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1569988941, "post_id": 58194995, "comment_id": 102768733, "body": "I tried  1. string[]  &lt;-- that was still error 2. typeof Set &lt;-- was good"}, {"owner": {"reputation": 6047, "user_id": 845704, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EtypH.jpg?s=128&g=1", "display_name": "James Hay", "link": "https://stackoverflow.com/users/845704/james-hay"}, "edited": false, "score": 1, "creation_date": 1569989674, "post_id": 58194995, "comment_id": 102768855, "body": "@\uc548\ub2e4\ud76c I think in typescript you will need to specify the generic for the set. So it should be <code>Set&lt;number&gt;</code> or <code>Set&lt;string&gt;</code> or if you have a generic in <code>IState&lt;T&gt;</code> then it can be <code>Set&lt;T&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6047, "user_id": 845704, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EtypH.jpg?s=128&g=1", "display_name": "James Hay", "link": "https://stackoverflow.com/users/845704/james-hay"}, "reply_to_user": {"reputation": 1, "user_id": 12147222, "user_type": "registered", "profile_image": "https://graph.facebook.com/525209991378644/picture?type=large", "display_name": "\uc548\ub2e4\ud76c", "link": "https://stackoverflow.com/users/12147222/%ec%95%88%eb%8b%a4%ed%9d%ac"}, "edited": false, "score": 0, "creation_date": 1569995106, "post_id": 58195154, "comment_id": 102770005, "body": "@\uc548\ub2e4\ud76c No problem. If this solved your problem, please mark it as the answer :)"}], "tags": [], "owner": {"reputation": 6047, "user_id": 845704, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EtypH.jpg?s=128&g=1", "display_name": "James Hay", "link": "https://stackoverflow.com/users/845704/james-hay"}, "is_accepted": false, "score": 1, "last_activity_date": 1569989931, "creation_date": 1569989931, "answer_id": 58195154, "question_id": 58194995, "link": "https://stackoverflow.com/questions/58194995/what-is-type-of-set-in-typescript/58195154#58195154", "title": "what is type of Set in typescript?", "body": "<p>By looking at the definition in typescript for set, you will find this interface:</p>\n\n<pre><code>interface Set&lt;T&gt; {\n    add(value: T): this;\n    clear(): void;\n    delete(value: T): boolean;\n    forEach(callbackfn: (value: T, value2: T, set: Set&lt;T&gt;) =&gt; void, thisArg?: any): void;\n    has(value: T): boolean;\n    readonly size: number;\n}\n</code></pre>\n\n<p>The <code>&lt;T&gt;</code> means that a <code>Set</code> type will require a type parameter. You would specify this in your <code>IState</code> object like so:</p>\n\n<pre><code>interface IState {\n    mySet: Set&lt;number&gt;; // type depends on what type you want to store obviously.\n    myNum: number;\n    myStr: string;\n    myArr: number[];\n}\n</code></pre>\n\n<p>If you don't care about the types (you probably should if you're using typescript), then you can simply pass <code>any</code> as the type parameter, and the set will operate as it would in standard javascript.</p>\n"}], "owner": {"reputation": 1, "user_id": 12147222, "user_type": "registered", "profile_image": "https://graph.facebook.com/525209991378644/picture?type=large", "display_name": "\uc548\ub2e4\ud76c", "link": "https://stackoverflow.com/users/12147222/%ec%95%88%eb%8b%a4%ed%9d%ac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569989931, "creation_date": 1569988493, "question_id": 58194995, "link": "https://stackoverflow.com/questions/58194995/what-is-type-of-set-in-typescript", "title": "what is type of Set in typescript?", "body": "<p>I'm trying to change code javascript to typescript\nIn Home.tsx, </p>\n\n<pre><code>interface IState {\n    mySet: ??; // what is type of Set??\n    myNum: number;\n    myStr: string;\n    myArr: number[];\n}\nclass Home extends Component&lt;IProps, IState&gt; {\n    constructor(props: IProps) {\n        super(props)\n        this.state = {\n            mySet: new Set([]);\n        }\n\n    }\n}\n</code></pre>\n\n<p>what is type of Set??</p>\n"}, {"tags": ["angular", "typescript", "angular-components"], "comments": [{"owner": {"reputation": 574, "user_id": 12083327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f59a665af648be2dd8c78d1118da4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Phat Huynh", "link": "https://stackoverflow.com/users/12083327/phat-huynh"}, "edited": false, "score": 0, "creation_date": 1569987720, "post_id": 58194844, "comment_id": 102768524, "body": "Are they have same parent?"}, {"owner": {"reputation": 448, "user_id": 11473160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c44ac99f2a9ef94d376a03f51c6b551?s=128&d=identicon&r=PG&f=1", "display_name": "kaiilim", "link": "https://stackoverflow.com/users/11473160/kaiilim"}, "reply_to_user": {"reputation": 574, "user_id": 12083327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f59a665af648be2dd8c78d1118da4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Phat Huynh", "link": "https://stackoverflow.com/users/12083327/phat-huynh"}, "edited": false, "score": 0, "creation_date": 1569987841, "post_id": 58194844, "comment_id": 102768543, "body": "Yes, both <code>SideMenuComponent</code> and <code>AccountPayableComponent</code> have been declared in my <code>app.module.ts</code>."}, {"owner": {"reputation": 574, "user_id": 12083327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f59a665af648be2dd8c78d1118da4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Phat Huynh", "link": "https://stackoverflow.com/users/12083327/phat-huynh"}, "edited": false, "score": 0, "creation_date": 1569988060, "post_id": 58194844, "comment_id": 102768578, "body": "No no, I mean where you use them, they have same parent component or not?"}, {"owner": {"reputation": 106, "user_id": 9045615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5065cdaf558a0a79addb81f63da799f?s=128&d=identicon&r=PG&f=1", "display_name": "Bender_Rodriguez", "link": "https://stackoverflow.com/users/9045615/bender-rodriguez"}, "edited": false, "score": 0, "creation_date": 1569988107, "post_id": 58194844, "comment_id": 102768593, "body": "Yes, show the file-structure, so we can help you"}, {"owner": {"reputation": 448, "user_id": 11473160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c44ac99f2a9ef94d376a03f51c6b551?s=128&d=identicon&r=PG&f=1", "display_name": "kaiilim", "link": "https://stackoverflow.com/users/11473160/kaiilim"}, "edited": false, "score": 0, "creation_date": 1569988528, "post_id": 58194844, "comment_id": 102768667, "body": "Thanks for responding, I have updated the questions with my <code>app.component.html</code> and <code>app-routing.module.ts</code> to show where I&#39;m using <code>&lt;app-side-menu&gt;</code> and how it is being routed to <code>AccountPayableComponent</code>. Do they help?"}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 11473160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c44ac99f2a9ef94d376a03f51c6b551?s=128&d=identicon&r=PG&f=1", "display_name": "kaiilim", "link": "https://stackoverflow.com/users/11473160/kaiilim"}, "edited": false, "score": 0, "creation_date": 1569988093, "post_id": 58194932, "comment_id": 102768587, "body": "I removed <code>accountPayableService: AccountPayableService;</code> and added <code>private accountPayableService: AccountPayableService</code> to my side-menu constructor. However, I&#39;m seeing <code>ERROR NullInjectorError: StaticInjectorError(AppModule)[Boolean]:    StaticInjectorError(Platform: core)[Boolean]:      NullInjectorError: No provider for Boolean!</code>"}], "tags": [], "owner": {"reputation": 615, "user_id": 1713468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pasJ.jpg?s=128&g=1", "display_name": "Karthick Manoharan", "link": "https://stackoverflow.com/users/1713468/karthick-manoharan"}, "is_accepted": false, "score": 0, "last_activity_date": 1569991330, "last_edit_date": 1569991330, "creation_date": 1569987848, "answer_id": 58194932, "question_id": 58194844, "link": "https://stackoverflow.com/questions/58194844/how-to-set-a-boolean-flag-from-a-component-to-another-in-angular/58194932#58194932", "title": "How to set a boolean flag from a component to another in Angular?", "body": "<p>Your <code>side-menu.component.ts</code> doesn't seem to inject <code>AccountPayalableService</code> in the constructor. But defined the service as type for a class property. </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class SideMenuComponent implements OnInit {\n\n  constructor(private accountPayableService: AccountPayableService;) {}\n\n  // remaining code continues\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>You should combine the above change with the answer by @SiddAjmera to make it work.</p>\n"}, {"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": true, "score": 2, "last_activity_date": 1569988897, "creation_date": 1569988897, "answer_id": 58195046, "question_id": 58194844, "link": "https://stackoverflow.com/questions/58194844/how-to-set-a-boolean-flag-from-a-component-to-another-in-angular/58195046#58195046", "title": "How to set a boolean flag from a component to another in Angular?", "body": "<p>You're trying to inject a property instead of a dependency here:</p>\n\n<pre><code>@Injectable({ providedIn: 'root' })\nexport class AccountPayableService {\n  createAccountPayableFlag = this.createAccountPayableClick;\n  viewAccountPayableFlag = this.viewAccountPayableClick;\n\n  constructor(\n    private http: HttpClient,\n    public createAccountPayableClick: boolean = false,\n    public viewAccountPayableClick: boolean = false\n  ) {}\n\n}\n</code></pre>\n\n<p>Hence the error.</p>\n\n<p>Change that to this:</p>\n\n<pre><code>@Injectable({ providedIn: 'root' })\nexport class AccountPayableService {\n  createAccountPayableFlag: boolean;\n  viewAccountPayableFlag: boolean;\n\n  constructor(private http: HttpClient) {\n    this.createAccountPayableClick = false;\n    this.viewAccountPayableClick = false;\n  }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 11473160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c44ac99f2a9ef94d376a03f51c6b551?s=128&d=identicon&r=PG&f=1", "display_name": "kaiilim", "link": "https://stackoverflow.com/users/11473160/kaiilim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1768, "favorite_count": 0, "accepted_answer_id": 58195046, "answer_count": 2, "score": 2, "last_activity_date": 1569991330, "creation_date": 1569987068, "last_edit_date": 1569988423, "question_id": 58194844, "link": "https://stackoverflow.com/questions/58194844/how-to-set-a-boolean-flag-from-a-component-to-another-in-angular", "title": "How to set a boolean flag from a component to another in Angular?", "body": "<p>I have 2 containers within a component's html, I'm trying to set which container to show upon click from my side menu component. I have tried using a service to set the boolean flag on click in my side menu component and then retrieve it from the service on another component but it's not working.</p>\n\n<p>This is my <code>side-menu.component.html</code>:</p>\n\n<pre><code>&lt;li&gt;\n  &lt;a href=\"#accountPayableSubMenu\" data-toggle=\"collapse\" aria-expanded=\"false\" class=\"dropdown-toggle\"&gt;Account Payable&lt;/a&gt;\n  &lt;ul class=\"collapse list-unstyled\" id=\"accountPayableSubMenu\"&gt;\n\n    &lt;li&gt;\n      &lt;a [routerLink]=\"['./account-payable']\" (click)=\"onCreateAccountPayableClick()\"&gt;Create Account Payable&lt;/a&gt;\n    &lt;/li&gt;\n\n    &lt;li&gt;\n      &lt;a [routerLink]=\"['./account-payable']\" (click)=\"onViewAccountPayableClick()\"&gt;View Account Payable&lt;/a&gt;\n    &lt;/li&gt;\n\n  &lt;/ul&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>This is my <code>side-menu.component.ts</code>:</p>\n\n<pre><code>export class SideMenuComponent implements OnInit {\n  accountPayableService: AccountPayableService;\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  onCreateAccountPayableClick() {\n    this.accountPayableService.createAccountPayableClick = true;\n    this.accountPayableService.viewAccountPayableClick = false;\n  }\n\n  onViewAccountPayableClick() {\n    this.accountPayableService.createAccountPayableClick = false;\n    this.accountPayableService.viewAccountPayableClick = true;\n  }\n}\n</code></pre>\n\n<p>and my <code>account-payable.service.ts</code>:</p>\n\n<pre><code>@Injectable({ providedIn: 'root' })\nexport class AccountPayableService {\n  createAccountPayableFlag = this.createAccountPayableClick;\n  viewAccountPayableFlag = this.viewAccountPayableClick;\n\n  constructor(\n    private http: HttpClient,\n    public createAccountPayableClick: boolean = false,\n    public viewAccountPayableClick: boolean = false\n  ) {}\n\n}\n</code></pre>\n\n<p>and I have this in my <code>account-payable.component.ts</code> to retrieve the boolean values from the service:</p>\n\n<pre><code>export class AccountPayableComponent implements OnInit {\n  constructor(\n    private formBuilder: FormBuilder,\n    private accountPayableService: AccountPayableService,\n    private alertService: AlertService\n  ) {}\n\n  createFlag = this.accountPayableService.createAccountPayableFlag;\n  viewFlag = this.accountPayableService.viewAccountPayableFlag;\n\n</code></pre>\n\n<p>Lastly, I have these 2 containers in my <code>account-payable.component.html</code> that shows depending on the <code>*ngIf=\"viewFlag\"</code> and <code>*ngIf=\"createFlag</code>:</p>\n\n<pre><code>&lt;div class=\"container-fluid h-100 d-flex flex-column\" *ngIf=\"createFlag\"&gt;\n    &lt;div class=\"row flex-fill no-gutters \"&gt;\n      &lt;div class=\"col-12 mh-100\"&gt;\n      ...\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"container-fluid h-100 d-flex flex-column\" *ngIf=\"viewFlag \"&gt;\n    &lt;div class=\"row flex-fill no-gutters \"&gt;\n      &lt;div class=\"col-12 mh-100\"&gt;\n      ...\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is not working and I am seeing this error in my console when I click my menu:</p>\n\n<pre><code>ERROR Error: Uncaught (in promise): NullInjectorError: StaticInjectorError(AppModule)[Boolean]: \n  StaticInjectorError(Platform: core)[Boolean]: \n    NullInjectorError: No provider for Boolean!\nNullInjectorError: StaticInjectorError(AppModule)[Boolean]: \n  StaticInjectorError(Platform: core)[Boolean]: \n    NullInjectorError: No provider for Boolean!\n    at NullInjector.get (core.js:855)\n    at resolveToken (core.js:17513)\n    at tryResolveToken (core.js:17439)\n    at StaticInjector.get (core.js:17265)\n    at resolveToken (core.js:17513)\n    at tryResolveToken (core.js:17439)\n    at StaticInjector.get (core.js:17265)\n    at resolveNgModuleDep (core.js:30392)\n    at NgModuleRef_.get (core.js:31577)\n    at injectInjectorOnly (core.js:734)\n    at resolvePromise (zone-evergreen.js:797)\n    at resolvePromise (zone-evergreen.js:754)\n    at zone-evergreen.js:858\n    at ZoneDelegate.invokeTask (zone-evergreen.js:391)\n    at Object.onInvokeTask (core.js:39679)\n    at ZoneDelegate.invokeTask (zone-evergreen.js:390)\n    at Zone.runTask (zone-evergreen.js:168)\n    at drainMicroTaskQueue (zone-evergreen.js:559)\n</code></pre>\n\n<p>May I know what went wrong? I don't quite understand where the NullInjector is coming from. I'm using angular 8.</p>\n\n<p>This is my <code>app.component.html</code>:</p>\n\n<pre><code>  &lt;div class=\"row flex-fill no-gutters my-content\" style=\"min-height: 0;\"&gt;\n\n    &lt;!-- Side menu --&gt;\n    &lt;div class=\"col-2 mh-100\" *ngIf=\"currentUser\"&gt;\n      &lt;app-side-menu&gt;&lt;/app-side-menu&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Content --&gt;\n    &lt;div class=\"col-10 mh-100\"&gt;\n      &lt;router-outlet&gt;&lt;/router-outlet&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n</code></pre>\n\n<p>My <code>app-routing.module.ts</code>:</p>\n\n<pre><code>const appRoutes: Routes = [\n  { path: '', component: HomeComponent, canActivate: [AuthGuard] },\n  { path: 'login', component: LoginComponent },\n  { path: 'register', component: RegisterComponent },\n  { path: 'account-payable', component: AccountPayableComponent, canActivate: [AuthGuard] },\n  // otherwise redirect to home\n  { path: '**', redirectTo: '' }\n];\n</code></pre>\n"}, {"tags": ["typescript", "google-cloud-firestore", "google-cloud-functions"], "answers": [{"comments": [{"owner": {"reputation": 1194, "user_id": 7797500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72def50d8c82a705f7497d6219edb3fc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hodges", "link": "https://stackoverflow.com/users/7797500/d-hodges"}, "edited": false, "score": 0, "creation_date": 1570017364, "post_id": 58195768, "comment_id": 102779882, "body": "It&#39;s a multiple object message because i need to store the userIds as well as the message so on the screen I can filter and format the messages based on who sent them.    I typically only want a push notification when the recipient receives a new message and only the recipient of the message.   What I&#39;m assuming the fcm function will do is only fire this event when a message document is updated, then only send the push notification to the toUserId"}, {"owner": {"reputation": 1194, "user_id": 7797500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72def50d8c82a705f7497d6219edb3fc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hodges", "link": "https://stackoverflow.com/users/7797500/d-hodges"}, "edited": false, "score": 0, "creation_date": 1570020108, "post_id": 58195768, "comment_id": 102781367, "body": "No overload matches this call.   Overload 1 of 2, &#39;(o: {}): string[]&#39;, gave the following error.     Argument of type &#39;DocumentData | undefined&#39; is not assignable to parameter of type &#39;{}&#39;.       Type &#39;undefined&#39; is not assignable to type &#39;{}&#39;.   Overload 2 of 2, &#39;(o: object): string[]&#39;, gave the following error.     Argument of type &#39;DocumentData | undefined&#39; is not assignable to parameter of type &#39;object&#39;.       Type &#39;undefined&#39; is not assignable to type &#39;object&#39;.ts(2769)  I get that error on .keys(allMessages)"}, {"owner": {"reputation": 1194, "user_id": 7797500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72def50d8c82a705f7497d6219edb3fc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hodges", "link": "https://stackoverflow.com/users/7797500/d-hodges"}, "edited": false, "score": 0, "creation_date": 1570020175, "post_id": 58195768, "comment_id": 102781403, "body": "and this error now on the await devicesRef.get();  await&#39; expression is only allowed within an async function.ts(1308) index.ts(13, 42): Did you mean to mark this function as &#39;async&#39;?"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 1, "last_activity_date": 1569994739, "creation_date": 1569994739, "answer_id": 58195768, "question_id": 58194842, "link": "https://stackoverflow.com/questions/58194842/firebase-cloud-messaging-not-sending-push-notification-value-for-argument-val/58195768#58195768", "title": "firebase cloud messaging not sending push notification - Value for argument &quot;value&quot; is not a valid query constraint", "body": "<p>The document in your screenshot contains an <strong>array</strong> of objects, which your code doesn't handle. You're trying to read <code>toUserId</code> from the root of the document, where it doesn't exist. This means your <code>toUserId</code> has a value of <code>undefined</code>, which Firestore complains about.</p>\n\n<p>It's a bit unusual to see multiple objects/messages in a single document, so you will have to determine if that is really the best approach. But if it is, you will have to determine which of these objects you want to send the notification to. If you want to send to all of these objects, you can loop over them:</p>\n\n<pre><code>exports.newSubscriberNotification = functions.firestore\n.document('messages/{id}')\n.onUpdate(async event =&gt; {\n  const allMessages = event.after.data();\n  const db = admin.firestore();\n\n  Object.keys(allMessages).forEach((index) =&gt; {\n    let data = allMessages[index];\n\n    const content = data ? data.content : '';\n    const toUserId = data ? data.toUserId : '';\n\n    const payload = {\n        notification: {\n            title: 'New message',\n            body: `${content}`\n        }\n    };\n\n    const devicesRef = db.collection('devices').where('userId', '==', toUserId);\n\n    const devices = await devicesRef.get();\n\n    ...\n  })\n});\n</code></pre>\n"}], "owner": {"reputation": 1194, "user_id": 7797500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72def50d8c82a705f7497d6219edb3fc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hodges", "link": "https://stackoverflow.com/users/7797500/d-hodges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 58195768, "answer_count": 1, "score": 0, "last_activity_date": 1569994739, "creation_date": 1569987044, "last_edit_date": 1569994246, "question_id": 58194842, "link": "https://stackoverflow.com/questions/58194842/firebase-cloud-messaging-not-sending-push-notification-value-for-argument-val", "title": "firebase cloud messaging not sending push notification - Value for argument &quot;value&quot; is not a valid query constraint", "body": "<p>I pushed the following FCM push notification to firebase functions:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import * as functions from 'firebase-functions';\r\n\r\nimport * as admin from 'firebase-admin';\r\n\r\nadmin.initializeApp();\r\n\r\nexports.newSubscriberNotification = functions.firestore\r\n    .document('messages/{id}')\r\n    .onUpdate(async event =&gt; {\r\n        const data = event.after.data();\r\n        const content = data ? data.content : '';\r\n        const toUserId = data ? data.toUserId : '';\r\n\r\n        const payload = {\r\n            notification: {\r\n                title: 'New message',\r\n                body: `${content}`\r\n            }\r\n        };\r\n\r\n        const db = admin.firestore();\r\n        const devicesRef = db.collection('devices').where('userId', '==', toUserId);\r\n\r\n        const devices = await devicesRef.get();\r\n        const tokens: any = [];\r\n\r\n        devices.forEach(result =&gt; {\r\n            const token = result.data().token;\r\n            tokens.push(token);\r\n          });\r\n\r\n        return admin.messaging().sendToDevice(tokens, payload);\r\n    });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In the code I'm using .onUpdate, which I assume should trigger when one of the messages collection is updated.  This is a messaging app so when ever the messaging collection is updated I'd like to trigger a push notification to the receiving user.</p>\n\n<p>I get the tuUserId and use it to get the device token of that user from the devices collection.  I'm testing now so the toUserId is identical to the from userId because it's just using my device...so hopefully when I update the message.doc() it sends a push notification.</p>\n\n<p>Here is the message collection in firebase:</p>\n\n<p><a href=\"https://i.stack.imgur.com/joXo9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/joXo9.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the function error log:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>11:04:22.937 PM\r\nnewSubscriberNotification\r\nFunction execution started\r\n11:04:22.946 PM\r\nnewSubscriberNotification\r\nError: Value for argument \"value\" is not a valid query constraint. Cannot use \"undefined\" as a Firestore value.\r\n    at Object.validateUserInput (/srv/node_modules/@google-cloud/firestore/build/src/serializer.js:273:15)\r\n    at validateQueryValue (/srv/node_modules/@google-cloud/firestore/build/src/reference.js:1844:18)\r\n    at CollectionReference.where (/srv/node_modules/@google-cloud/firestore/build/src/reference.js:956:9)\r\n    at exports.newSubscriberNotification.functions.firestore.document.onUpdate (/srv/lib/index.js:19:49)\r\n    at cloudFunction (/srv/node_modules/firebase-functions/lib/cloud-functions.js:131:23)\r\n    at /worker/worker.js:825:24\r\n    at &lt;anonymous&gt;\r\n    at process._tickDomainCallback (internal/process/next_tick.js:229:7)\r\n11:04:22.957 PM\r\nnewSubscriberNotification\r\nFunction execution took 21 ms, finished with status: 'error'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm pretty sure it doesn't like my .where clause because of this error:\n    at CollectionReference.where (/srv/node_modules/@google-cloud/firestore/build/src/reference.js:956:9)</p>\n\n<p>I'm just not sure why</p>\n"}, {"tags": ["typescript", "cookies", "autorest"], "answers": [{"comments": [{"owner": {"reputation": 21384, "user_id": 147613, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0b04f020193f227391731b05ede7d6fc?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/147613/amit"}, "edited": false, "score": 0, "creation_date": 1570032327, "post_id": 58203627, "comment_id": 102788671, "body": "not sure if I can use OpenAPI generator as all our current build systems are tied to AutoRest. I will have a look."}], "tags": [], "owner": {"reputation": 7509, "user_id": 677735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pyjch.png?s=128&g=1", "display_name": "William Cheng", "link": "https://stackoverflow.com/users/677735/william-cheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1570026527, "creation_date": 1570026527, "answer_id": 58203627, "question_id": 58194829, "link": "https://stackoverflow.com/questions/58194829/how-to-include-cookies-while-using-autorest-generated-typescript-client/58203627#58203627", "title": "How to include cookies while using autorest generated typescript client?", "body": "<p>You may want to try <a href=\"https://github.com/OpenAPITools/openapi-generator\" rel=\"nofollow noreferrer\">OpenAPI Generator</a>, which supports both OpenAPI/Swagger v2 and v3. (Only OpenAPI specification v3 supports the cookie parameter).</p>\n\n<p>I remember we've added cookie parameters support to the TypeScript generators. Please open a <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/new\" rel=\"nofollow noreferrer\">ticket/issue</a> if you need help from the OpenAPI Generator community.</p>\n"}], "owner": {"reputation": 21384, "user_id": 147613, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0b04f020193f227391731b05ede7d6fc?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/147613/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570032684, "creation_date": 1569986880, "last_edit_date": 1570032684, "question_id": 58194829, "link": "https://stackoverflow.com/questions/58194829/how-to-include-cookies-while-using-autorest-generated-typescript-client", "title": "How to include cookies while using autorest generated typescript client?", "body": "<p>I am using <a href=\"https://github.com/Azure/autorest\" rel=\"nofollow noreferrer\">AutoRest</a> to generate Typescript client for RESTful API based on OpenAPI spec file like this:</p>\n\n<pre><code>autorest --typescript --use-internal-constructors --override-client-name=MyApiClient --input-file=API.Swagger.json --namespace=MyApi.Client --typescript.output-folder=C:\\One\\ts --add-credentials=true\n</code></pre>\n\n<p>When I make a call using generated API client over CORS it doesn't include any of the Cookies.</p>\n\n<p>JavaScript <code>fetch</code> provides this construct to include cookies:</p>\n\n<pre><code>fetch(uri, { credentials: 'include' })\n</code></pre>\n\n<p>But I could not figure a way to make it happen with the AutoRest generated API client. I did look through <code>msRest.ts</code> to see if I can use any of the available Credentials types.</p>\n\n<p>[Update]:</p>\n\n<p>After digging further I figured options parameter to the client has a property <code>withCredentials</code> which can be set to true. Eventually, <code>node_modules\\@azure\\ms-rest-js\\es\\lib\\xhrHttpClient.js</code> makes the API call. Specifically, this line makes the call:</p>\n\n<pre><code>xhr.send(request.body\u00a0===\u00a0undefined\u00a0?\u00a0null\u00a0:\u00a0request.body);\n</code></pre>\n\n<p>I debugged thorough and made sure that <code>withCredentials</code> is set to <code>true</code> but for some reason it doesn't send the cookies! If I make a call using javascript <code>fetch</code> it sends cookies and autorest generated client doesn't send cookies!</p>\n"}, {"tags": ["javascript", "typescript", "ecmascript-6", "promise"], "answers": [{"comments": [{"owner": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "edited": false, "score": 0, "creation_date": 1569986834, "post_id": 58194743, "comment_id": 102768384, "body": "Wouldn&#39;t that be wrapping several promises in one big promise?"}, {"owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "reply_to_user": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "edited": false, "score": 0, "creation_date": 1569990058, "post_id": 58194743, "comment_id": 102768909, "body": "It\u2019s either that or wrap each promise in an async function and create an array of async functions instead."}], "tags": [], "owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "is_accepted": false, "score": 4, "last_activity_date": 1569992039, "last_edit_date": 1569992039, "creation_date": 1569985855, "answer_id": 58194743, "question_id": 58194720, "link": "https://stackoverflow.com/questions/58194720/performing-a-promise-all-with-parameters/58194743#58194743", "title": "Performing a Promise.all with parameters", "body": "<p>A promise starts immediately when it is created. There is no \"start()\" method, thus all you have to do is make sure you only create promises when you need them. I would wrap the call to create your promises in an <code>async</code> function that is only called when the promises should be created, and then <code>await</code> on <code>Promise.all()</code> inside that function, as you were intending.</p>\n\n<p>You may also consider wrapping promises in async functions and creating an array of async functions instead - except you will still need to loop over the array and call each function to retrieve the created promises and wait on them. Perhaps something like:</p>\n\n<pre><code>var pending = names.map(n =&gt; async ()=&gt;await doStuff(n));  // (warning: untested; off the top of my head)\n</code></pre>\n\n<p>Then you have an array of pending promises wrapped in functions. When the time comes you can use <code>var promises = pending.map(f=&gt;f())</code> to call the functions and create an array of promises.</p>\n"}, {"comments": [{"owner": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "edited": false, "score": 0, "creation_date": 1569986759, "post_id": 58194792, "comment_id": 102768373, "body": "When I run that and comment out await Promise.all(promises) it still runs 3 times."}, {"owner": {"reputation": 1799, "user_id": 8316908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d9c88d96f120d722377bc15717e1af?s=128&d=identicon&r=PG", "display_name": "Yuan-Hao Chiang", "link": "https://stackoverflow.com/users/8316908/yuan-hao-chiang"}, "reply_to_user": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "edited": false, "score": 0, "creation_date": 1569987298, "post_id": 58194792, "comment_id": 102768456, "body": "Sorry, my bad, I edited my post to reflect the changes. If I remember correctly there is no native way to keep the promises in &quot;pending&quot; but I recall there were packages to do it, although I would prefer it this way."}, {"owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "edited": false, "score": 0, "creation_date": 1569990733, "post_id": 58194792, "comment_id": 102769016, "body": "A criteria is this <code>expecting the behaviour of the promises created in the map to remain in a drafted state</code>. You are just creating a shortcut for the same thing."}], "tags": [], "owner": {"reputation": 1799, "user_id": 8316908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d9c88d96f120d722377bc15717e1af?s=128&d=identicon&r=PG", "display_name": "Yuan-Hao Chiang", "link": "https://stackoverflow.com/users/8316908/yuan-hao-chiang"}, "is_accepted": false, "score": 0, "last_activity_date": 1569987230, "last_edit_date": 1569987230, "creation_date": 1569986327, "answer_id": 58194792, "question_id": 58194720, "link": "https://stackoverflow.com/questions/58194720/performing-a-promise-all-with-parameters/58194792#58194792", "title": "Performing a Promise.all with parameters", "body": "<p>You can create the promises inside <code>Promise.all()</code>:</p>\n\n<pre><code>const names = ['Dan', 'Mitchell', 'Josh']\n\nconst data = await Promise.all(names.map(name =&gt; doStuff(name)));\nconsole.log(data);\n</code></pre>\n"}], "owner": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569992039, "creation_date": 1569985648, "question_id": 58194720, "link": "https://stackoverflow.com/questions/58194720/performing-a-promise-all-with-parameters", "title": "Performing a Promise.all with parameters", "body": "<p>I'm trying to create an Array of Promises I'd like to fulfill however not sure how to best loop through them. </p>\n\n<p>I thought the following code was doing the trick but it appears when I create the array of promises I'm actually calling them as a side effect, which is not what I want to do until Promise.all is hit.</p>\n\n<pre><code>import wait from 'waait'\n\nconst main = async () =&gt; {\n    console.log('Start')\n    const doStuff = async (name) =&gt; {\n        console.log('Do stuff called', name)\n        await wait(500)\n        return name + ' is cool'\n    }\n\n\n    const names = ['Dan', 'Mitchell', 'Josh']\n\n    const promises = names.map(name =&gt; doStuff(name))\n\n    // const data = await Promise.all(promises)\n    // console.log(data)\n    console.log('End')\n}\n\nmain()\n</code></pre>\n\n<p>I am finding that with the last two lines getting commented out, the doStuff function appears to be getting called as the console.log is happening in my console. </p>\n\n<p>I was expecting the behaviour of the promises created in the map to remain in a drafted state and then called upon in Promise.all but this isn't the case. </p>\n\n<p>Can someone explain and offer an explanation as to how this should be done? </p>\n"}, {"tags": ["typescript", "reflection", "types", "tuples", "transpose"], "comments": [{"owner": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "edited": false, "score": 0, "creation_date": 1569986376, "post_id": 58194653, "comment_id": 102768302, "body": "Just want to get clarification, your main purpose is so that when you call <code>result = toArray(toCsv(xs))</code> you expect the type of <code>result</code> to be the same as <code>xs</code> right?"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "edited": false, "score": 0, "creation_date": 1569987584, "post_id": 58194653, "comment_id": 102768500, "body": "@WongJiaHau yes that is correct, but I am also interested in having the intermediate type of <code>toCsv(xs)</code> being the same as I requested."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 1, "creation_date": 1570005469, "post_id": 58194653, "comment_id": 102774151, "body": "I still have some understanding issue here: Why do you want to type something (<code>rows</code>) that is <code>...(string | number | boolean)[][]</code> (I think you forget that additional <code>[]</code> layer ?) to be of type <code>[string, number, boolean]</code> instead? Wouldn&#39;t that work against your implementation?"}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1570043063, "post_id": 58194653, "comment_id": 102793606, "body": "@PatrickRoberts Thanks for the update. The thing I did was just comparing your mentioned type for <code>typeof csv</code>, which you said is <code>[(&quot;key&quot; | &quot;life&quot; | &quot;goodbye&quot;)[], ...(string | number | boolean)[]]</code>  with the one the playground IDE hints by hovering over <code>const csv</code>. The latter reveals, that it has the type <code>[(&quot;key&quot; | &quot;life&quot; | &quot;goodbye&quot;)[], ...(string | number | boolean)[][]]</code> - so different from your mentioned type with one additional array layer - , which puzzled me a bit."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 1, "creation_date": 1570043127, "post_id": 58194653, "comment_id": 102793639, "body": "PS: Here is the <a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBA0hIB4AqA+KBeKBRAHsATgIYDGwCA1vAPYBmUSANFAM4ECWAdgOYoDcAUKEhQAwlQA2AVwC2HZGkwBtOIlRMAdJqTL48gLqK9egUOhips5vIxQdqlIY1a7+w4eP9+AEwjFxhfGgaSQ5SNioOKGAqEWYAN2sACgCiEAAuekMASgzzGQ4rVChvX39AqGDQ4HDI6IBBfFSk4njciXzClBzMvU9iCNYoOMIpCGYbRQBvKEp0qAByYdH5pnE2GggMgBYAJiYuKiovACMQTYqR5mgAXw9+foLgKBa4m2jYuMSlyTGsgQfBlR8GwuJwRm8qA1UokXn9+EA\" rel=\"nofollow noreferrer\">playground</a> (too long URL for one comment)"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 1, "creation_date": 1570043328, "post_id": 58194653, "comment_id": 102793724, "body": "@ford04 oh, good catch! Thank <i>you</i> for following up on your request for clarification. I&#39;ll update my question, but thankfully I already have a good solution to work with."}], "answers": [{"comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1569987937, "post_id": 58194908, "comment_id": 102768560, "body": "This doesn&#39;t use the same structure as I indicated in my question. The intermediate format is intended to be serialized, and must not be changed. Also your <code>values.map(value =&gt; Object.keys(value).map(key =&gt; value[key]))</code> might as well be <code>values.map(Object.values)</code>"}, {"owner": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1569988101, "post_id": 58194908, "comment_id": 102768591, "body": "Can you provide an example of that intermediate format? It&#39;s not mentioned anywhere in the question."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1569988142, "post_id": 58194908, "comment_id": 102768600, "body": "It&#39;s literally at the top of my question: <code>[[&quot;key&quot;, &quot;life&quot;, &quot;goodbye&quot;], [string, number, boolean]]</code>"}, {"owner": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1569988208, "post_id": 58194908, "comment_id": 102768610, "body": "That is the type of the intermediate format, I mean I want a value example."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1569988272, "post_id": 58194908, "comment_id": 102768621, "body": "<code>[[&quot;key&quot;, &quot;life&quot;, &quot;goodbye&quot;], [&quot;value&quot;, 42, false]]</code>... I thought you&#39;d be able to infer that from the type."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1569989240, "post_id": 58194908, "comment_id": 102768783, "body": "I appreciate the effort, but this still doesn&#39;t meet the requirement because your <code>toArray()</code> needs an instance of the original type in the data structure, and given the use-case I mentioned in my initial response to your answer, that&#39;s not possible."}, {"owner": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1569989573, "post_id": 58194908, "comment_id": 102768836, "body": "@PatrickRoberts <code>toArray</code> function does not need the <code>original</code> value, if the <code>original</code> value is <code>undefined</code> it will still work, if you&#39;re trying to convert CSV that has the intermediate format, you can just provide the type for the <code>toArray</code> function, for example: <code>toArray&lt;{ key: string, life: number, goodbye: boolean }&gt;([])</code>"}], "tags": [], "owner": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "is_accepted": false, "score": 1, "last_activity_date": 1569989663, "last_edit_date": 1569989663, "creation_date": 1569987618, "answer_id": 58194908, "question_id": 58194653, "link": "https://stackoverflow.com/questions/58194653/use-tuple-instead-of-array-of-union-within-type/58194908#58194908", "title": "Use Tuple instead of Array of Union within Type", "body": "<p>My solution is a little hacky, but it works. The magic lies in the fact that the type of <code>T</code> is passed into the <code>original</code> property, so that it can be retrieved back perfectly without deriving from the type of <code>keys</code> and <code>values</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type CSV&lt;T&gt; = {values: ((keyof T)[] | (T[keyof T])[])[], original: T}\n\nconst toCsv = &lt;T extends object&gt;(values: T[]): CSV&lt;T&gt; =&gt; {\n  if(values.length === 0) {\n    throw new Error('Values must have length of more than one')\n  }\n  else {\n    return {\n      values: [\n        Object.keys(values[0]) as (keyof T)[],\n        ...values.map(Object.values) as T[keyof T][][],\n      ] as ((keyof T)[] | (T[keyof T])[])[],\n      original: undefined\n    }  \n  }\n}\n\nconst toArray = &lt;T extends object&gt;(csv: CSV&lt;T&gt;): T[] =&gt; {\n  const keys = csv.values[0] as (keyof T)[]\n  const valuess = csv.values.slice(1) as ((T[keyof T])[])[]\n  return valuess.map(values =&gt; values.reduce&lt;T&gt;((result, value, index) =&gt; ({...result as any, [keys[index]]: value}), {} as T))\n}\n\nconst values = [{ key: 'value', life: 42, goodbye: false }];\nconst csv = toCsv(values);\nconst original = toArray(csv);\n\nconsole.log(csv.values) // this will be in the required intermediate format\nconsole.log(original)\n\ntype Result = typeof original extends typeof values ? true : never\n</code></pre>\n\n<p>The type of <code>original</code> will be the same as <code>values</code>. You can check yourself by hovering your cursor to <code>Result</code>.</p>\n\n<p>Besides type checking, the implementation also works in runtime.</p>\n\n<p>Note that the <code>original</code> property is not used anywhere in the <code>toArray</code> function, its only purpose is merely for passing type information around.</p>\n"}, {"comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1570043171, "post_id": 58207526, "comment_id": 102793658, "body": "Incredible TypeScript answers as always! I was anticipating a solution akin to the &quot;honest but messy&quot; approach, based on my reading of <a href=\"https://github.com/microsoft/TypeScript/issues/13298\" rel=\"nofollow noreferrer\">a particular github issue</a>, but I think your final suggestion is most pragmatic, and the best part is it doesn&#39;t require any major refactoring."}, {"owner": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1570085385, "post_id": 58207526, "comment_id": 102803878, "body": "@PatrickRoberts isn&#39;t this the same answer that I provided to you?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 1855, "user_id": 6587634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209643793277415/picture?type=large", "display_name": "Wong Jia Hau", "link": "https://stackoverflow.com/users/6587634/wong-jia-hau"}, "edited": false, "score": 2, "creation_date": 1570108616, "post_id": 58207526, "comment_id": 102815746, "body": "@WongJiaHau Your answer is great but you changed the runtime behavior of the program, which I don&#39;t think works for OP."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 4, "last_activity_date": 1606097982, "last_edit_date": 1606097982, "creation_date": 1570041719, "answer_id": 58207526, "question_id": 58194653, "link": "https://stackoverflow.com/questions/58194653/use-tuple-instead-of-array-of-union-within-type/58207526#58207526", "title": "Use Tuple instead of Array of Union within Type", "body": "<p>I wouldn't try to go the route of outputting a particular tuple ordering.  As you already noted, the actual result might not be in that order, so it would be misleading to present it as such a type.  Lying to the compiler is sometimes necessary or useful, but in this case I don't see a major benefit.</p>\n<p>Furthermore, even if I wanted to do this, it's actually not easy to get the compiler to turn a union like <code>keyof T</code> into an ordered tuple.  The type <code>&quot;a&quot;|&quot;b&quot;</code> is the same exact type as <code>&quot;b&quot;|&quot;a&quot;</code>; the compiler may very well use one or the other or both without letting you know, and so anything you do that produces <code>[&quot;a&quot;, &quot;b&quot;]</code> vs <code>[&quot;b&quot;, &quot;a&quot;]</code> from that is likely to switch around when you don't expect it.  You can <a href=\"https://stackoverflow.com/questions/53503813/get-dictionary-object-keys-as-tuple-in-typescript\">abuse the type system</a> to make this happen, but it's really messy and fragile and I recommend against it.</p>\n<hr />\n<p>If you really want to use tuples, you could avoid the ordering issue by turning a union like <code>&quot;a&quot;|&quot;b&quot;</code> into a union of all possible tuples like <code>[&quot;a&quot;, &quot;b&quot;] | [&quot;b&quot;, &quot;a&quot;]</code>.  That is actually a bit easier to represent in the type system because it's symmetric over the union members, but is still messy because  once you have a decent number of properties the number of elements in the union becomes unmanageable (yay factorial).  The upside here is that you are really and truly as honest as possible about the output type.  Here's one way to implement it:</p>\n<pre><code>type UnionToAllPossibleTuples&lt;T, U = T&gt; = [T] extends [never]\n    ? []\n    : T extends unknown ? [T, ...UnionToAllPossibleTuples&lt;Exclude&lt;U, T&gt;&gt;] : never;\n\ntype MergedColumns&lt;T&gt; = UnionToAllPossibleTuples&lt;\n  { [K in keyof T]: { key: K; val: T[K] } }[keyof T]\n&gt;;\n\ntype Lookup&lt;T, K&gt; = K extends keyof T ? T[K] : never;\n\ntype UnmergeColumns&lt;T&gt; = T extends any\n  ? [\n      { [K in keyof T]: Lookup&lt;T[K], &quot;key&quot;&gt; },\n      ...{ [K in keyof T]: Lookup&lt;T[K], &quot;val&quot;&gt; }[]\n    ]\n  : never;\n\ntype Columns&lt;T&gt; = UnmergeColumns&lt;MergedColumns&lt;T&gt;&gt;;\n</code></pre>\n<p>And you can verify this works:</p>\n<pre><code>interface TestType {\n  key: string;\n  life: number;\n  goodbye: boolean;\n}\n\ntype ColumnsTestType = Columns&lt;TestType&gt;;\n// type ColumnsTestType =\n// | [[&quot;key&quot;, &quot;life&quot;, &quot;goodbye&quot;], ...[string, number, boolean][]]\n// | [[&quot;key&quot;, &quot;goodbye&quot;, &quot;life&quot;], ...[string, boolean, number][]]\n// | [[&quot;life&quot;, &quot;key&quot;, &quot;goodbye&quot;], ...[number, string, boolean][]]\n// | [[&quot;life&quot;, &quot;goodbye&quot;, &quot;key&quot;], ...[number, boolean, string][]]\n// | [[&quot;goodbye&quot;, &quot;key&quot;, &quot;life&quot;], ...[boolean, string, number][]]\n// | [[&quot;goodbye&quot;, &quot;life&quot;, &quot;key&quot;], ...[boolean, number, string][]]\n</code></pre>\n<p>That's fun, but probably still too fragile and messy to be something I'd recommend.</p>\n<hr />\n<p>Backing up, it seems like the thing you really care about is preserving the type <code>T</code> across <code>toCsv()</code> and <code>toArray()</code>, and that the original array type, while accurate, was lossy.  In that case, how about this minor change to your original code?</p>\n<pre><code>type Columns&lt;T&gt; = [Key&lt;T&gt;[], ...T[Key&lt;T&gt;][][]] &amp; { __original?: T };\n</code></pre>\n<p>Here, <code>Columns&lt;T&gt;</code> is essentially the same type as before but has an optional extra property named <code>original</code> with the type <code>T</code>.  This property will never actually be present or used at runtime.  Yes, you are possibly deceiving the compiler here but not actually lying; the stuff coming out of <code>toCsv()</code> will have no <code>__original</code> property, which does match <code>{__original?: T}</code>.  The deception is useful though, since it gives the compiler enough information to understand what happens on the round trip. Observe:</p>\n<pre><code>const values = [{ key: &quot;value&quot;, life: 42, goodbye: false }];\nconst csv = toCsv(values);\n// const csv: Columns&lt;{ key: string; life: number; goodbye: boolean; }&gt;\nconst original = toArray(csv); \n// const original: { key: string; life: number; goodbye: boolean; }[]\n</code></pre>\n<p>That looks good to me and what I'd recommend.</p>\n<hr />\n<p>RECAP: If you want to lie to the compiler, don't lie about tuple order.  Telling the truth about tuple order is too messy.  Instead, tell a small lie about an optional property.</p>\n<p>Okay, hope that helps.  Good luck!</p>\n<p><a href=\"https://www.typescriptlang.org/play?ts=4.2.0-dev.20201122#code/HYQwtgpgzgDiDGEAEAJA9saAXAQgVywFlooBPJAbwFgAoJJLUmZAVWAEsMAVNAQQBt+ABTRQo7AEb8IXPDGlQAPFwA0SFkgC8SLgD4tSANpcAukggAPLBGAATKEcwA3CACcTtevQD8Rj3S8ALh1zKxt7JDxgAGtgNAB3YCRfYzUAOgy2TmAeAWFRcSkZOQVFAFELeH48WwhFFjU9XTNg5zcAblpPBiZkYlcAcwhbAGE0arBgJT0DLO4+QRExSWlZeWhFbvoKIwBpJHYk6IhSNAAzHRNgnePSYN32pCcQfmCuQ12zAF8kL8Nb86Xbq6To0bqMZhIAAyaDQ0TkyjUu302n2lmsdgcAIuXGSOg+LSQbVcoPBvXUwEggwgYwmU2UKJC6PCDhAwFIWzxhk5XkoewORxOgNMwRhcIR70+agARLdpfovioeV4Mmkdh8BUhsZdRbD4TBlASZc9+PLfoZ-Lz6JagkSIC4SV0AhDkLS8JNpoy2FShm6PYp+kNRuN3fSmqSAodrK4zghkFxsFxydQAvRbsEoFhXIcBqDefx2GcIK13RIOpyBrDbBJSMWkBJYdI2Xnfk76C6kH6pgnM0nIdou9NE70Qd0APRjnqQwc9rB95CaceTgA+RkMspO0plBaLW6Q0sraGrtelJnSGUMmezwAGamApbcagb4wgbJMFptE6Qq8M67lMsPY8ID3aUd2As8kFVS8sxzJ9G1fYA7wfdwPyXb811AwtgJlf990AmtwPPNJDHvMAy1cNQr1g+t4LfVCAi-H91zAkD8JPHDNwgqDSPIuCXzZSiYJvd8TE-FcMLY7D91wzDdy4i9nybRCkCom8kLItwRLE9DfwPKsCJAliONIU8iMMRSEPU3iVKEgYtNoL4nVASBYDjJAAGUCwGAALLB+FIAARCBEBgLB2BcfAsHc9gwHWSgyUhXYTgZAwKizBAsEUbVVBs68BlHZ1yS7FLtA+ZK9CIyVyuaD8Ww7QcSr2aqLUqsrSAZESPyQAAyPkAH0+rQbMBkOF5vDeX4I3oM4ongMKMAYNARigJwGQAChAVxXBAO58RMABKYIGpmFNeXgDBMyQc66SgI6Q0mBkLQMC0pq8M4hqQNbzqmLAtROTVNu20hDAABgO+LUy8a7QygNIYDwKBvLW-4TiIwGdrSMAQBgNaTTwBd9DxiAUdIA6DpbehHLBSHvsu25bqQJL2r0J7SpMCmrou37XASBmquZmqRIMdHSEx7G1rW-atH0C19te6aPq+rmjFuIiiagMxAWhj0pdOq16bhhGkduOW2ytd7XE+2nfsMQ5agsNQefiTWLid2GbBg6BJd15V6Cdw3Edxl58agW27EscnlSp3kqc5VwICwPBXCSEmoCIt32e6WOAhm4A5uyRbeC2nb1vgFa7puhlDr2iGzuV1P095sxtDLpx5aQePE+TjvebFnHlSd6Xfb+0hYfj2w8EQNbh-oNa0DUVWBXtqXNH0AB5CQACtgqwNIQGWAZgDntR1VuK4e-iMP7e+falUhq1KB+fekCETawpeBlh6l5+uE5U2AmzvQa2Txg7QGejcE4wRpREz3GBYIAAWAATGoSSwRYz8CgMgL4mcAjANbgYLAS0VpB2qNAf+9Avx4PLp2e69IIG7VUrmJAcCiTIUeKgmi-FgCPC+LobowChrsBGqAfgBC+DF1IF9Fa5CkCUOVoI4RLxrgjwzLZR4LCeIdCQBwiyzZzT+CpkAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 58207526, "answer_count": 2, "score": 1, "last_activity_date": 1606097982, "creation_date": 1569984840, "last_edit_date": 1570043359, "question_id": 58194653, "link": "https://stackoverflow.com/questions/58194653/use-tuple-instead-of-array-of-union-within-type", "title": "Use Tuple instead of Array of Union within Type", "body": "<p>Is there a way to more strictly type the following two functions <code>toCsv()</code> and <code>toArray()</code> such that <code>typeof csv</code> is</p>\n\n<pre><code>[[\"key\", \"life\", \"goodbye\"], ...[string, number, boolean][]]\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>[(\"key\" | \"life\" | \"goodbye\")[], ...(string | number | boolean)[][]]\n</code></pre>\n\n<p>and <code>typeof original</code> is the same as <code>typeof values</code>, that is</p>\n\n<pre><code>{ key: string, life: number, goodbye: boolean }[]\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>{ key: any, life: any, goodbye: any }[]\n</code></pre>\n\n<p>I realize that iteration order of <code>{ key: 'value', life: 42, goodbye: false }</code> using <code>for...in</code> is not guaranteed and I'm fine with that. Any consistent order that aligns keys with respective values for each row is acceptable, even if the TypeScript compiler doesn't produce the same order as runtime, since the usage doesn't rely on any particular ordering.</p>\n\n<pre><code>type Key&lt;T&gt; = Extract&lt;keyof T, string&gt;;\ntype Column&lt;T&gt; = [Key&lt;T&gt;, ...T[Key&lt;T&gt;][]];\ntype Columns&lt;T&gt; = [Key&lt;T&gt;[], ...T[Key&lt;T&gt;][][]];\n\nfunction toCsv&lt;T&gt; (array: T[]): Columns&lt;T&gt; {\n    const columns: Column&lt;T&gt;[] = [];\n\n    for (const key in array[0]) {\n        columns.push([key, ...array.map(value =&gt; value[key])]);\n    }\n\n    const keys: Key&lt;T&gt;[] = [];\n    const rows: T[Key&lt;T&gt;][][] = array.map(() =&gt; []);\n\n    for (const [key, ...values] of columns) {\n        keys.push(key);\n\n        for (const [index, row] of rows.entries()) {\n            row.push(values[index]);\n        }\n    }\n\n    return [keys, ...rows];\n}\n\nfunction toArray&lt;T&gt; (csv: Columns&lt;T&gt;): T[] {\n    const [keys, ...rows] = csv;\n\n    return rows.map(\n        row =&gt; keys.reduce(\n            (o, key, index) =&gt; Object.assign(o, { [key]: row[index] }),\n            {} as Partial&lt;T&gt;\n        ) as T\n    );\n}\n\nconst values = [{ key: 'value', life: 42, goodbye: false }];\nconst csv = toCsv(values);\nconst original = toArray(csv);\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "firebase", "google-cloud-functions"], "answers": [{"tags": [], "owner": {"reputation": 1040, "user_id": 11672166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be83fb6d2f6554cc268dd0466d6fdf66?s=128&d=identicon&r=PG", "display_name": "JKleinne", "link": "https://stackoverflow.com/users/11672166/jkleinne"}, "is_accepted": true, "score": 0, "last_activity_date": 1570019023, "creation_date": 1570019023, "answer_id": 58201462, "question_id": 58194454, "link": "https://stackoverflow.com/questions/58194454/why-do-i-get-an-error-when-deploying-firebase-functions/58201462#58201462", "title": "Why do I get an error when deploying firebase functions?", "body": "<p>Firebase does not expect named exports ( <code>export const ...</code>) and instead expects an <code>exports</code> object containing the function to run. Change it to this: <code>exports.helloWorld = ...</code>. Furthermore, this had been <a href=\"https://github.com/firebase/firebase-tools/issues/1317\" rel=\"nofollow noreferrer\">a recurrent issue</a> in the past by attempting to use older versions of the Firebase CLI. Try updating it by running <code>npm i -g firebase-tools@latest</code>.</p>\n"}], "owner": {"reputation": 217, "user_id": 7906592, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/95a8069ae6ceda9424cc0581f45ee4de?s=128&d=identicon&r=PG&f=1", "display_name": "Kauna Mohammed", "link": "https://stackoverflow.com/users/7906592/kauna-mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58201462, "answer_count": 1, "score": 0, "last_activity_date": 1570019023, "creation_date": 1569983179, "question_id": 58194454, "link": "https://stackoverflow.com/questions/58194454/why-do-i-get-an-error-when-deploying-firebase-functions", "title": "Why do I get an error when deploying firebase functions?", "body": "<p>When trying to deploy the template function after initialising firebase functions, I keep getting: HTTP Error: 400, The request has errors. Any ideas on what's going on?</p>\n\n<p>Here's the relevant code.</p>\n\n<pre><code>export const helloWorld = functions.https.onRequest((request, response) =&gt; {\n    response.send(\"Hello from Firebase!\");\n});\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "react-hooks"], "comments": [{"owner": {"reputation": 4647, "user_id": 5566355, "user_type": "registered", "profile_image": "https://graph.facebook.com/135238653504461/picture?type=large", "display_name": "Arman Charan", "link": "https://stackoverflow.com/users/5566355/arman-charan"}, "edited": false, "score": 0, "creation_date": 1569972379, "post_id": 58193424, "comment_id": 102766031, "body": "Try <code>value={{state, setState}}</code>"}, {"owner": {"reputation": 105, "user_id": 4958980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb09cb6baa7abc16be87b7ebb4b3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "noob", "link": "https://stackoverflow.com/users/4958980/noob"}, "reply_to_user": {"reputation": 4647, "user_id": 5566355, "user_type": "registered", "profile_image": "https://graph.facebook.com/135238653504461/picture?type=large", "display_name": "Arman Charan", "link": "https://stackoverflow.com/users/5566355/arman-charan"}, "edited": false, "score": 0, "creation_date": 1569972433, "post_id": 58193424, "comment_id": 102766044, "body": "No joy. <code>AppContext.tsx(8, 3): The expected type comes from property &#39;state&#39; which is declared here on type &#39;{ state: ObjectConstructor; setState: () =&gt; void; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4958980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb09cb6baa7abc16be87b7ebb4b3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "noob", "link": "https://stackoverflow.com/users/4958980/noob"}, "edited": false, "score": 1, "creation_date": 1570019558, "post_id": 58199140, "comment_id": 102781065, "body": "Thanks so much! This really helped. I used the first example, the second may come in handy when I get to grips with Dispatch."}, {"owner": {"reputation": 175, "user_id": 5524234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfefc852474badbfb69c472dda3fe884?s=128&d=identicon&r=PG&f=1", "display_name": "g00golplex", "link": "https://stackoverflow.com/users/5524234/g00golplex"}, "edited": false, "score": 0, "creation_date": 1597869565, "post_id": 58199140, "comment_id": 112277430, "body": "Hi, I am also suffering from this error. but In your reply it is not clear to me how to use the AppProvider. Because there are not values given here. How can the components the state and setState values from the AppProvider? any help would be greatly appreciated."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "reply_to_user": {"reputation": 175, "user_id": 5524234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfefc852474badbfb69c472dda3fe884?s=128&d=identicon&r=PG&f=1", "display_name": "g00golplex", "link": "https://stackoverflow.com/users/5524234/g00golplex"}, "edited": false, "score": 0, "creation_date": 1597871806, "post_id": 58199140, "comment_id": 112278211, "body": "@g00golplex <code>AppProvider</code> can be used like this with <code>MyComp</code> (continuation of first example):  <code>const MyComp = () =&gt; { const {state,setState} = useContext(AppContext); ... } const App = () =&gt; &lt;AppProvider&gt; &lt;MyComp &#47;&gt; &lt;&#47;AppProvider&gt;</code>"}, {"owner": {"reputation": 175, "user_id": 5524234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfefc852474badbfb69c472dda3fe884?s=128&d=identicon&r=PG&f=1", "display_name": "g00golplex", "link": "https://stackoverflow.com/users/5524234/g00golplex"}, "edited": false, "score": 0, "creation_date": 1598217217, "post_id": 58199140, "comment_id": 112378647, "body": "Hi Ford04! Thank you very much for your feedback! I really needed time to get it implemented ( yes I am a n00b in React and TypeScript) I finally got it to work!"}, {"owner": {"reputation": 360, "user_id": 469870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a9eaa093577916a85610434fd9ee40?s=128&d=identicon&r=PG", "display_name": "Douglas Schmidt", "link": "https://stackoverflow.com/users/469870/douglas-schmidt"}, "edited": false, "score": 0, "creation_date": 1612314904, "post_id": 58199140, "comment_id": 116726742, "body": "You&#39;re a god man, your explanation was on point!"}], "tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 16, "last_activity_date": 1589282536, "last_edit_date": 1592644375, "creation_date": 1570009749, "answer_id": 58199140, "question_id": 58193424, "link": "https://stackoverflow.com/questions/58193424/passing-state-with-usecontext-in-typescript/58199140#58199140", "title": "Passing state with useContext in Typescript", "body": "<p>TypeScript infers the <code>AppContext</code> type from <code>initialState</code> given to <code>createContext</code>.</p>\n<p><code>AppContext.Provider</code> expects a <code>value</code> prop, that matches above type. So the type instantiated by <code>createContext</code> determines the context shape, consuming components can use.</p>\n<h2>What went wrong?</h2>\n<p><code>initialState</code> gets following inferred type:</p>\n<pre><code>{ state: ObjectConstructor; setState: () =&gt; void; }\n</code></pre>\n<p>Passing <code>Object</code> to <code>state</code> means, you expect  an <code>ObjectConstructor</code> - not really what you want. With <code>setState: () =&gt; {}</code>, components are not able to invoke this function with a <code>state</code> argument. Also note, <code>useState</code> initial value is currently wrapped in an additional array <code>[{...}]</code>.</p>\n<p>In summary, <code>[state, setState]</code> argument  is incompatible to <code>AppContext.Provider</code> value prop.</p>\n<hr />\n<h2>Solution</h2>\nLet's assume, your desired state shape looks like:\n<pre><code>type AppContextState = { isMenuOpen: boolean; isSideOpen: boolean }\n// omitting additional array wrapped around context value\n</code></pre>\nThen an initial state with proper types is (<a href=\"https://www.typescriptlang.org/play/?jsx=2#code/JYWwDg9gTgLgBAJQKYEMDGMA0cDecCuAzkgMowoxJwC%20cAZlBCHAERSoYsCwAUL0gA9IsOMAB2lKHXRUAkgAVGAN2AATJFEUQwhXLzgG4aABbAANqvZiA-AC44KMQE8A3L2q9eMJ2CoBBMDAAYQgJQRgyCioAXlxRQgBZJDF8AHlfMXsAIwgIM1QxF3iSNSR05Ozc-McaXgB6OrgmYBgYcQBzB1VVFuBQlDMHKCgUJzgAdxHApFUhiHwxWbRQygF4JQH8JE8eBrgrFBAZuAADcV6ByMoTuBgIU5RAoJgBABEkaXwzGAA1TaQbnc4FkqChgS04CBoFRlmI0MBiLxYYR4I9gi93p9vn8zFs4LEcPpDCiovY8Aikilypl6ANiNgESV1NT7NIzMQaJgiQZiBFyJR7AAKEkCuABYIrcJXJAASnxAD44rQ9mJcmA4OosfA0AMzFl0ABrdxuPg8QTCbWhFFip6Stb4xAcGAAOjQ7CiITCa0FaOebw%20KC%20v3%20MpN-CE0EtYmt4q0KnUUAdgrAjB09gUylKmlThDl0UVhJ4hiMVvgAG0RUhsLzpQBdB1EUj8pA%20p4YgNBnFbZ2V0M7YvsGD4KBiOCC7nFuAAHnFntWLrjWbgG1xSGiODwlerSD5URo1HlE8nhhwKe0hFdpgsVg8ReP07qs7tC8zCcPd4MfZ41BcQA\" rel=\"noreferrer\">playground</a>):\n<pre><code>// renamed `initialState` to `appCtxDefaultValue` to be a bit more concise\nconst appCtxDefaultValue = {\n  state: { isMenuOpen: false, isSideOpen: false },\n  setState: (state: AppContextState) =&gt; {} // noop default callback\n};\n\nexport const AppContext = createContext(appCtxDefaultValue);\n\nexport const AppProvider = (props: IProviderProps) =&gt; {\n  const [state, setState] = useState(appCtxDefaultValue.state);\n\n  return (\n    // memoize `value` to optimize performance, if AppProvider is re-rendered often \n    &lt;AppContext.Provider value={{ state, setState }}&gt;\n      {props.children}\n    &lt;/AppContext.Provider&gt;\n  );\n};\n</code></pre>\nA more explicit variant with own context value type (<a href=\"https://www.typescriptlang.org/play/?jsx=2#code/JYWwDg9gTgLgBAJQKYEMDGMA0cDecAiwAzmCjGgBbYDKSM1MZSAghsBAHbYCuRSDTOAF84AMygQQcAERRUGaQFgAUCqQAPSLDjAOMJFFHokcAJIAFCQDdgAEwOWIYIrhVx3cSsAA2tuRwB%20AC44FA4ATwBuFSEVFRhwsBNmMDAAYU59dXpGfTgAXlwdIgBZJA5uAHkkjhCAIwgIb1QOSOLqOyRq8vrG5rDhFQB6IbhJYBgYXQBzUNtbCfYOFG9QqCgUcLgAdw3UpFs1iG4OQ7RMjXgrFe4kOOUEpLgU9IvsgDUbk0KcNw8iXJIEIvDJ6S4CfTRZQeOAjOCPJDYcLHODTOg7CjlOAUCBWAwzMZ4qBwAAGfByTBJYgkUhJvH4gJJf3c5IhQIIxFI5AoAB5aBT9KwppweSC3gKkAA%20SVQoRQlTnDgA0KpNIwdT4JBGbjeGCfby3YGq8X624FVzQ-6AkJ4YhlCrdWpiFZ8bDEDr2R0hIzePjCTDMuCs61BwEFSVFERwjiNMBweza3WeFbeOroADWMXlyg0WngiuVYrB2XNyHQMAAdGg5ExQVkYAAKFCq9WaxN6r4ASmzueg%20c4hdSjhs9mJhQbYAkzhCFmsnSgjmcnfDFphBfgAG0AUxsMGmABdc30tlNlsarUoHUdg1ICvb-Td%204wuQwbhQDhwBuBmGi43FyvDvOcDXDe%20Q4Hg96IkGdBssIQiSt%20MIeDgk5OEQVYUD4fjlLElpIXAPJDEW9YVoBo4IXhcCPsocpAA\" rel=\"noreferrer\">playground</a>):\n<pre><code>import { Dispatch, SetStateAction, /* and others */ } from &quot;react&quot;;\n\ntype AppContextValue = {\n  state: AppContextState;\n  // type, you get when hovering over `setState` from `useState`\n  setState: Dispatch&lt;SetStateAction&lt;AppContextValue&gt;&gt;;\n};\n\nconst appCtxDefaultValue: AppContextValue = {/* ... */};\n</code></pre>\n<hr />\n<h2>Discussing alternatives</h2>\n<h3>Drop context default value completely (<a href=\"https://www.typescriptlang.org/play/?jsx=2&amp;ssl=36&amp;ssc=2&amp;pln=26&amp;pc=1#code/JYWwDg9gTgLgBAJQKYEMDGMA0cDecAiwAzmCjGgBbYDKSM1MZSAghsBAHbYCuRSDTHnwDCnGEgAe8AL5wAZlAgg4AIiioMKgLAAoXZMiw4wDuKhz0SOAEkACooBuwACZIo9iGCK5dcP3EpgABtndQ4AfgAuOBQOAE8Abl1pXV0YOLArZjAwUVNJekZxOABeXGMiAFkkDm4AeUyOaIAjCAgg1A4EiuoXJAaalraO2LgUvR10zLhs3LECgDUUIO4rMpxffyIipGjZvPEpAXEknX84PkKmaMISMkoAHlor8VYYdg4H-fmjnYA%20P6naSnfQSQzwNCcbYzHIHAqlRAaGAAOjQ6iYcKkX1hPxgSxWVgAPnBuBxXHITEhnH8ABSk8mU5wAShBOgM0AhUPgsw8TlcUARNLAii80Tsjj67hFRCZpT%20PjO-khHGhAG1toILnRjkgALoI3j8HY0vDEaq1AZNeTLPjYYi9VyW6IWIJ8MYs1KKvzqGDcKAcOA0zbnPzYub5KTI3mSuAOZarEo4PAa8TYS46sbSP7BkPnHDCzxEVEUYKhGrjXOhgD03wjKOj-OzXrgHp0wM9clJbE4JL4tcOMBpso2zeV0IwEnxqwNIlxNP7BSZOeAckDE6naxKZXpSApHCpspgFEUAHc4PuzwBRKCKKBB5vnFSXsFIDBUmIBnkS-kXJRIE8UG4VgmHAR5WOiGCgeoVgwBAWqcnWsbxkgKhLs2Pp%20gG67IXAVZVueEBnhQKDeFMWQ4nWG45nhcDQHASAODUcAFnyVjOEoKAgSAdAUBAzjeHIdHNHQZj0RwaAoF43BBGQHzJJ6Y7wMIQTADU8BlEOcoKucikBDAk7LDOLAUQOmk0dhQQVHADL7s42AcHBlCvgA1uer5IEQRAoFAcQAITJEAA\" rel=\"noreferrer\">playground</a>)</h3>\n<pre><code>export const AppContext = React.createContext&lt;AppContextValue | undefined&gt;(undefined);\n\nexport const AppProvider = (props: IProviderProps) =&gt; {\n    const [state, setState] = useState({ isMenuOpen: false, isSideOpen: false });\n    // ... other render logic\n};\n</code></pre>\nTo prevent, that a client now has to check for <code>undefined</code>, provide a custom Hook:\n<pre><code>function useAppContext() {\n    const ctxValue = useContext(AppContext)\n    if (ctxValue === undefined) throw new Error(&quot;Expected context value to be set&quot;)\n    return ctxValue // now type AppContextValue\n    // or provide domain methods instead of whole context for better encapsulation\n}\n\nconst Client = () =&gt; {\n    const ctxVal = useAppContext() // ctxVal is defined, no check necessary!\n}\n</code></pre>\n<h3>Switch to <code>useReducer</code> and/or custom <code>useAppContext</code> Hook</h3>\n<p>Consider to replace <code>useState</code> by <code>useReducer</code> and pass the <code>dispatch</code> function down to components. This will provide better encapsulation, as the state manipulation logic is now centralized in a pure reducer and child components <em>cannot</em> manipulate it directly anymore via <code>setState</code>.</p>\n<p>Another very good alternative to separate UI Logic from domain logic is to provide a custom <code>useAppContext</code> Hook instead of using <code>useContext(AppContext)</code> - see previous example. Now <code>useAppContext</code> can provide a more narrow API without publishing your whole context.</p>\n"}], "owner": {"reputation": 105, "user_id": 4958980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb09cb6baa7abc16be87b7ebb4b3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "noob", "link": "https://stackoverflow.com/users/4958980/noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5813, "favorite_count": 2, "accepted_answer_id": 58199140, "answer_count": 1, "score": 4, "last_activity_date": 1589282536, "creation_date": 1569971827, "question_id": 58193424, "link": "https://stackoverflow.com/questions/58193424/passing-state-with-usecontext-in-typescript", "title": "Passing state with useContext in Typescript", "body": "<p>I'm trying to use the useContext hook to pass state and setState to a child component but I'm getting a ts error when I try and pass [state, setState] in the value argument of the provider. My code is as follows:</p>\n\n<pre><code>\nexport interface IProviderProps {\n  children?: any;\n}\n\nconst initialState = {\n  state: Object,\n  setState: () =&gt; {},\n};\n\nexport const AppContext = createContext(initialState);\n\nexport const AppProvider = (props: IProviderProps) =&gt; {\n  const [state, setState] = useState([{ isMenuOpen: false, isSideOpen: false }]);\n\n  return &lt;AppContext.Provider value={[state, setState]}&gt;{props.children}&lt;/AppContext.Provider&gt;;\n};\n\n</code></pre>\n\n<p>I'm getting an error on the value variable about the <code>initialState</code> I'm setting. </p>\n\n<p><code>index.d.ts(290, 9): The expected type comes from property 'value' which is declared here on type 'IntrinsicAttributes &amp; ProviderProps&lt;{ state: ObjectConstructor; setState: () =&gt; void; }&gt;'</code></p>\n\n<p>What do I set the initial state as to allow me to pass the state and useState variables?</p>\n"}, {"tags": ["javascript", "typescript", "azure", "azure-active-directory", "sharepoint-online"], "comments": [{"owner": {"reputation": 14687, "user_id": 10505040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643c7cd13b4cd09ce56bb9ee71914516?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Xu", "link": "https://stackoverflow.com/users/10505040/jim-xu"}, "edited": false, "score": 0, "creation_date": 1569981147, "post_id": 58192789, "comment_id": 102767462, "body": "If you want to call the service protected by Azure AD, the resource url must be Azure AD application&#39;s app id url. For more details, please refer to <a href=\"https://stackoverflow.com/questions/36059051/the-application-named-https-test113-onmicrosoft-com-ftp-was-not-found-in-the-t\" title=\"the application named https test113 onmicrosoft com ftp was not found in the t\">stackoverflow.com/questions/36059051/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 11346534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGVQ33cvZJY/AAAAAAAAAAI/AAAAAAAABsY/5MrYH1N49UI/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/11346534/dan"}, "reply_to_user": {"reputation": 14687, "user_id": 10505040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643c7cd13b4cd09ce56bb9ee71914516?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Xu", "link": "https://stackoverflow.com/users/10505040/jim-xu"}, "edited": false, "score": 0, "creation_date": 1570033507, "post_id": 58192789, "comment_id": 102789233, "body": "@JimXu I tried this and it unfortunately didn&#39;t work. Thank you for the suggestion."}, {"owner": {"reputation": 14687, "user_id": 10505040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643c7cd13b4cd09ce56bb9ee71914516?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Xu", "link": "https://stackoverflow.com/users/10505040/jim-xu"}, "edited": false, "score": 0, "creation_date": 1570410077, "post_id": 58192789, "comment_id": 102893157, "body": "Could you tell me if you can call the api from other tools such as postman?"}, {"owner": {"reputation": 21, "user_id": 11346534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGVQ33cvZJY/AAAAAAAAAAI/AAAAAAAABsY/5MrYH1N49UI/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/11346534/dan"}, "reply_to_user": {"reputation": 14687, "user_id": 10505040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643c7cd13b4cd09ce56bb9ee71914516?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Xu", "link": "https://stackoverflow.com/users/10505040/jim-xu"}, "edited": false, "score": 0, "creation_date": 1570454223, "post_id": 58192789, "comment_id": 102907679, "body": "Yes we can with postman. My co worker created a new application with a different way of getting what we need but we still haven&#39;t resolved this issue unfortunately."}, {"owner": {"reputation": 14687, "user_id": 10505040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643c7cd13b4cd09ce56bb9ee71914516?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Xu", "link": "https://stackoverflow.com/users/10505040/jim-xu"}, "edited": false, "score": 0, "creation_date": 1570517223, "post_id": 58192789, "comment_id": 102928218, "body": "Is that you protect your api by Azure AD? If so, could you tell me if the tenant of AD application you use to protect API and the SharePoint&#39;s tenant is the same?"}, {"owner": {"reputation": 21, "user_id": 11346534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGVQ33cvZJY/AAAAAAAAAAI/AAAAAAAABsY/5MrYH1N49UI/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/11346534/dan"}, "reply_to_user": {"reputation": 14687, "user_id": 10505040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643c7cd13b4cd09ce56bb9ee71914516?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Xu", "link": "https://stackoverflow.com/users/10505040/jim-xu"}, "edited": false, "score": 0, "creation_date": 1570551013, "post_id": 58192789, "comment_id": 102944742, "body": "Yes they should be on the same tenant. We do protect our API by Azure AD yes."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11346534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGVQ33cvZJY/AAAAAAAAAAI/AAAAAAAABsY/5MrYH1N49UI/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/11346534/dan"}, "edited": false, "score": 0, "creation_date": 1570023988, "post_id": 58195729, "comment_id": 102783748, "body": "Thanks for the quick response Juunas. I tried to put my client id / application id and I received a different error. &quot;TypeError: Failed to fetch&quot;. I don&#39;t believe this is any closer but I appreciate the suggestion!"}, {"owner": {"reputation": 4191, "user_id": 1271303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/568b384f0fd749875db9fa53614cabc9?s=128&d=identicon&r=PG", "display_name": "Koen Zomers", "link": "https://stackoverflow.com/users/1271303/koen-zomers"}, "edited": false, "score": 0, "creation_date": 1571398272, "post_id": 58195729, "comment_id": 103237623, "body": "Entering the Application/Client ID of the application registered in Azure containing the custom permission scopes fixed it for me. So i.e. .getClient(&#39;application id guid&#39;)"}, {"owner": {"reputation": 21, "user_id": 11346534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGVQ33cvZJY/AAAAAAAAAAI/AAAAAAAABsY/5MrYH1N49UI/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/11346534/dan"}, "edited": false, "score": 0, "creation_date": 1572461539, "post_id": 58195729, "comment_id": 103570999, "body": "Tried to use the application/client ID and unfortunately didn&#39;t work. Still stuck."}], "tags": [], "owner": {"reputation": 40761, "user_id": 1658906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4748ed2fb97e8a8d4dd6d439625135?s=128&d=identicon&r=PG", "display_name": "juunas", "link": "https://stackoverflow.com/users/1658906/juunas"}, "is_accepted": false, "score": 1, "last_activity_date": 1569994545, "creation_date": 1569994545, "answer_id": 58195729, "question_id": 58192789, "link": "https://stackoverflow.com/questions/58192789/error-aadsts500011-the-resource-principal-named-url-was-not-found-in-the-ten/58195729#58195729", "title": "Error: AADSTS500011: The resource principal named &quot;URL&quot; was not found in the tenant", "body": "<p>Never used this API, but if I had to guess you need to change the value here:</p>\n\n<pre><code>      .getClient('https://driverdisplayexternal.azurewebsites.net')\n</code></pre>\n\n<p>You can use either the client id / application id, or the application ID URI. </p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 6420892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31877440edafb50893707c6d97cec953?s=128&d=identicon&r=PG&f=1", "display_name": "Verona Chen", "link": "https://stackoverflow.com/users/6420892/verona-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1589354628, "creation_date": 1589354628, "answer_id": 61768630, "question_id": 58192789, "link": "https://stackoverflow.com/questions/58192789/error-aadsts500011-the-resource-principal-named-url-was-not-found-in-the-ten/61768630#61768630", "title": "Error: AADSTS500011: The resource principal named &quot;URL&quot; was not found in the tenant", "body": "<p>Not sure if you figured the answer or not. When you used SPFx to request your own custom web api end point. there are couple steps:</p>\n\n<ul>\n<li>request the permission so that you can go to SPO admin to approve the permission you request. for this case, the webApiPermissionRequests->resources needs to your AAD Application's Service Principal DisplayName. once you had AAD App create, you can run Get-AzureADServicePrincipal to get all your ServicePrincipal. </li>\n<li>once you request the permission, from your code, you need to call AadHttpClient.getClient() to get aadHttpClient object based on the api resourceEndpoint you want, for this case, you need to pass your web api's Application ID URI which can be found from your AAD App's manifest->\"identifierUris\". General speaking, this should be something like api://[clientid] format. but you can change it to any unique value. \nI hope it helps. </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 569784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyp54.png?s=128&g=1", "display_name": "Dimos Dennis", "link": "https://stackoverflow.com/users/569784/dimos-dennis"}, "is_accepted": false, "score": 0, "last_activity_date": 1605707389, "creation_date": 1605707389, "answer_id": 64894393, "question_id": 58192789, "link": "https://stackoverflow.com/questions/58192789/error-aadsts500011-the-resource-principal-named-url-was-not-found-in-the-ten/64894393#64894393", "title": "Error: AADSTS500011: The resource principal named &quot;URL&quot; was not found in the tenant", "body": "<p>In my case i had to use the App Id when i was consuming a <strong>multi tenant API</strong>.</p>\n"}], "owner": {"reputation": 21, "user_id": 11346534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGVQ33cvZJY/AAAAAAAAAAI/AAAAAAAABsY/5MrYH1N49UI/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/11346534/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8087, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1605707389, "creation_date": 1569967105, "question_id": 58192789, "link": "https://stackoverflow.com/questions/58192789/error-aadsts500011-the-resource-principal-named-url-was-not-found-in-the-ten", "title": "Error: AADSTS500011: The resource principal named &quot;URL&quot; was not found in the tenant", "body": "<p>I am trying to add an app to our SharePoint Online site using the template from <a href=\"https://docs.microsoft.com/en-us/sharepoint/dev/spfx/web-parts/get-started/build-a-hello-world-web-part\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/sharepoint/dev/spfx/web-parts/get-started/build-a-hello-world-web-part</a> and we get the error below when we deploy to SharePoint and add the app/Web part to a test SharePoint site. We are using TypeScript as the template uses.</p>\n\n<p>Has anyone else encountered this issue or know where to look for the issue?</p>\n\n<p><strong>Found [object Object]Driver Display External Error: Error: AADSTS500011: The resource principal named <a href=\"https://driverdisplayexternal.azurewebsites.net\" rel=\"nofollow noreferrer\">https://driverdisplayexternal.azurewebsites.net</a> was not found in the tenant named 7018324c-9efd-4880-809d-b2e6bb1606b6. This can happen if the application has not been installed by the administrator of the tenant or consented to by any user in the tenant. You might have sent your authentication request to the wrong tenant. Trace ID: 358b22eb-cd2c-4091-b592-5a57cbc21d00 Correlation ID: ec96d656-1a36-42e2-a2b9-3ff78efc1e2e Timestamp: 2019-10-01 16:26:06Z</strong></p>\n\n<p>We have added a call to our own client as shown below. We are not sure why the resource principal was not found. The Tenant ID's match and things seem to be set up properly for authentication. </p>\n\n<p><strong>HelloWorldWebPart.ts</strong></p>\n\n<pre><code>...\n   this.context.aadHttpClientFactory\n      .getClient('https://driverdisplayexternal.azurewebsites.net')\n      .then((client: AadHttpClient): void =&gt; {\n\n        client\n          .get('https://driverdisplayexternal.azurewebsites.net/api/values', AadHttpClient.configurations.v1)\n          .then((response: HttpClientResponse): Promise &lt; Order[] &gt; =&gt; {\n            this.domElement.innerHTML += 'Received a response from Driver Display External: ' + response;\n            return response.json();\n          })\n\n          .catch(error =&gt; {\n\n            this.domElement.innerHTML += 'Driver Display External Error:  ' + error;\n            console.error(error);\n          });\n      });\n...\n</code></pre>\n\n<p><strong>package-solution.json</strong></p>\n\n<pre><code>{\n  \"$schema\": \"https://developer.microsoft.com/json-schemas/spfx-build/package-solution.schema.json\",\n  \"solution\": {\n    \"name\": \"helloworld-webpart-client-side-solution\",\n    \"id\": \"**ID**\",\n    \"version\": \"4.1.0.0\",\n    \"includeClientSideAssets\": true,\n    \"isDomainIsolated\": false,\n    \"webApiPermissionRequests\": [\n      {\n        \"resource\": \"DriverDisplayExternal\",\n       \"scope\": \"User.Read.All\"\n      }\n     ]\n  },\n  \"paths\": {\n    \"zippedPackage\": \"solution/helloworld-webpart.sppkg\"\n  }\n}\n\n</code></pre>\n\n<p>Any help or direction to where the issue may be would be very appreciated. Thanks in advance!</p>\n"}]