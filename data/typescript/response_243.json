[{"tags": ["javascript", "reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2862320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8594e11cf21b740da26d834a7388a25d?s=128&d=identicon&r=PG&f=1", "display_name": "user2862320", "link": "https://stackoverflow.com/users/2862320/user2862320"}, "edited": false, "score": 0, "creation_date": 1567648868, "post_id": 57796451, "comment_id": 102027877, "body": "Hi Baboo_ , thanks for the reply. I have already tried changing the function definition to async and added await but render method still doesn&#39;t get the updated value of includeDocReqSig"}, {"owner": {"reputation": 2172, "user_id": 6325822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggMPi.jpg?s=128&g=1", "display_name": "Baboo_", "link": "https://stackoverflow.com/users/6325822/baboo"}, "reply_to_user": {"reputation": 21, "user_id": 2862320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8594e11cf21b740da26d834a7388a25d?s=128&d=identicon&r=PG&f=1", "display_name": "user2862320", "link": "https://stackoverflow.com/users/2862320/user2862320"}, "edited": false, "score": 0, "creation_date": 1567651786, "post_id": 57796451, "comment_id": 102028339, "body": "You issue is that React has not clue about the update of <code>includeDocReqSig</code>. Move the variable to the state of the component so you can trigger a rerender with <code>setState</code>"}], "tags": [], "owner": {"reputation": 2172, "user_id": 6325822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggMPi.jpg?s=128&g=1", "display_name": "Baboo_", "link": "https://stackoverflow.com/users/6325822/baboo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567637431, "creation_date": 1567637431, "answer_id": 57796451, "question_id": 57796387, "link": "https://stackoverflow.com/questions/57796387/class-level-variable-updated-inside-a-componentwillmount-function-not-accessible/57796451#57796451", "title": "class level variable updated inside a componentWillMount function not accessible in render method after a function call", "body": "<p>You forgot to wait for the fetch to end:</p>\n\n<pre><code>// Mark the function as async\npublic async componentWillMount(): Promise&lt;void&gt; {\n  this.eRequestService = new ERequestService(\n    this.props.context.pageContext.web.absoluteUrl,\n    this.props.context.spHttpClient\n  );\n  this.appSettings = new AppSettings();\n  this.serviceCalls = new NwhERequestFormRest(this.eRequestService, this.appSettings);\n\n  // Wait for the fetch   \u2193\u2193\u2193\u2193\u2193\n  this.includeDocReqSig = await this.serviceCalls._getFieldChoice(\"Signature_x0020_Required\", true);\n  console.log(this.includeDocReqSig);\n\n  // return Promise.resolve(); \u2190 This line is optional since the function is marked as async\n}\n</code></pre>\n\n<p>But I suggest to use a state manager instead of a class attribute.</p>\n\n<p>For example with Redux you will be able to detect a change in the choices of the dropdown. As it is now, changes can't be detected as the attribute is out of the React loop.</p>\n"}], "owner": {"reputation": 21, "user_id": 2862320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8594e11cf21b740da26d834a7388a25d?s=128&d=identicon&r=PG&f=1", "display_name": "user2862320", "link": "https://stackoverflow.com/users/2862320/user2862320"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567637431, "creation_date": 1567636738, "question_id": 57796387, "link": "https://stackoverflow.com/questions/57796387/class-level-variable-updated-inside-a-componentwillmount-function-not-accessible", "title": "class level variable updated inside a componentWillMount function not accessible in render method after a function call", "body": "<p>I have created following react class in my code base and trying to use the variable <strong>includeDocReqSig</strong> in the render method. </p>\n\n<p>Refer to following lines of code in the code below -</p>\n\n<p><strong>console.log(this.includeDocReqSig); //This print the objects pretty fine in the logs but not get assigned in render function</strong></p>\n\n<p>It does not work with following code -</p>\n\n<pre><code>export class NwhERequestForm extends React.Component&lt;INwhERequestFormProps, {}&gt; {\n  // Dropdown Variables\n  private includeDocReqSig: IControlDynamicProp = {}; // Dropdown value for Does this include documents that requires signature or legal review?\n\n  private eRequestService: ERequestService;\n  private appSettings: AppSettings;\n  private serviceCalls: NwhERequestFormRest;\n\n  //\n\n  public componentWillMount(): Promise&lt;void&gt; {\n\n\n    this.eRequestService = new ERequestService(\n      this.props.context.pageContext.web.absoluteUrl,\n      this.props.context.spHttpClient\n    );\n    this.appSettings = new AppSettings();\n    this.serviceCalls = new NwhERequestFormRest(this.eRequestService, this.appSettings);\n\n    this.serviceCalls._getFieldChoice(\"Signature_x0020_Required\", true).then(\n      (val: IControlDynamicProp) =&gt; {\n        this.includeDocReqSig = { options: val.options, disabled: val.disabled };\n       console.log(this.includeDocReqSig); //This print the objects pretty fine in the logs but not get assigned in render function\n      });\n    return Promise.resolve();\n  }\n\n  public render(): React.ReactElement&lt;INwhERequestFormProps&gt; {\n    return (\n      &lt;div className={styles.nwhERequestForm} &gt;\n        &lt;div className={styles.container}&gt;\n          &lt;div className={styles.title}&gt; {this.props.description} &lt;/div&gt;\n          &lt;div className={styles.subtitle}&gt; If you need assistance, please click here &lt;/div&gt;\n          &lt;form&gt;\n            &lt;div className={styles.mainformdiv}&gt;\n              &lt;fieldset className={styles.fieldset}&gt;\n                &lt;legend className={styles.legend}&gt;Basic Information&lt;/legend&gt;\n                &lt;div className={styles.row}&gt;\n                  &lt;DropdownControl\n                    staticProp={{ labelTitle: 'Does this include a Vendor document that requires signature or requires legal review?', required: true }}\n                    dynamicProp={this.includeDocReqSig} /&gt;\n                  &lt;DropdownControl\n                    staticProp={{ labelTitle: 'Is this related to an OCIO Project?', required: true }}\n                    dynamicProp={{ options: signatureRequiredLegal }} /&gt;\n                &lt;/div&gt;               \n              &lt;/fieldset&gt;            \n            &lt;/div&gt;\n          &lt;/form&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n</code></pre>\n\n<p>The function _getFieldChoice is defined in another ts file:</p>\n\n<pre><code> public _getFieldChoice = async (columnName: string, isDisabled: boolean, ) =&gt; {\n        let controlProp: IControlDynamicProp = {};\n        let dropdownValue: IDropdownOption[] = [];\n        const fieldChoices: IDropdownValues[] = await this.eRequestService.getFieldDDValue(this.appSettings.eRequestListName, columnName);\n        fieldChoices[0].Choices.forEach(element =&gt; {\n            dropdownValue.push({ key: element, text: element });\n        });\n        controlProp = { options: dropdownValue, disabled: isDisabled };        \n        return controlProp;\n    }\n</code></pre>\n\n<p>The dropdown does not get any values. What could be the reason?</p>\n\n<p>When I try to do the assignment outside the function, it works fine. So there is something happening with the scope, maybe??</p>\n\n<pre><code>export class NwhERequestForm extends React.Component&lt;INwhERequestFormProps, {}&gt; {\n  // Dropdown Variables\n  private includeDocReqSig: IControlDynamicProp = {}; // Dropdown value for Does this include documents that requires signature or legal review?\n\n  private eRequestService: ERequestService;\n  private appSettings: AppSettings;\n  private serviceCalls: NwhERequestFormRest;\n\n  //\n\n  const fundedBy: IDropdownOption[] = [\n    { key: 'ocio', text: 'OCIO' },\n    { key: 'nonocio', text: 'Non-OCIO' },\n    { key: 'split', text: 'Split' },\n  ];\n\n  public componentWillMount(): Promise&lt;void&gt; {\n\n\n    this.eRequestService = new ERequestService(\n      this.props.context.pageContext.web.absoluteUrl,\n      this.props.context.spHttpClient\n    );\n    this.appSettings = new AppSettings();\n    this.serviceCalls = new NwhERequestFormRest(this.eRequestService, this.appSettings);\n\n    this.includeDocReqSig = { options: fundedBy, disabled: false };\n\n    return Promise.resolve();\n  }\n\n  public render(): React.ReactElement&lt;INwhERequestFormProps&gt; {\n    return (\n      &lt;div className={styles.nwhERequestForm} &gt;\n        &lt;div className={styles.container}&gt;\n          &lt;div className={styles.title}&gt; {this.props.description} &lt;/div&gt;\n          &lt;div className={styles.subtitle}&gt; If you need assistance, please click here &lt;/div&gt;\n          &lt;form&gt;\n            &lt;div className={styles.mainformdiv}&gt;\n              &lt;fieldset className={styles.fieldset}&gt;\n                &lt;legend className={styles.legend}&gt;Basic Information&lt;/legend&gt;\n                &lt;div className={styles.row}&gt;\n                  &lt;DropdownControl\n                    staticProp={{ labelTitle: 'Does this include a Vendor document that requires signature or requires legal review?', required: true }}\n                    dynamicProp={**this.includeDocReqSig**} /&gt;\n                  &lt;DropdownControl\n                    staticProp={{ labelTitle: 'Is this related to an OCIO Project?', required: true }}\n                    dynamicProp={{ options: signatureRequiredLegal }} /&gt;\n                &lt;/div&gt;               \n              &lt;/fieldset&gt;            \n            &lt;/div&gt;\n          &lt;/form&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 1818, "user_id": 5801753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXtbq.jpg?s=128&g=1", "display_name": "Johnny Zabala", "link": "https://stackoverflow.com/users/5801753/johnny-zabala"}, "edited": false, "score": 2, "creation_date": 1567635873, "post_id": 57796139, "comment_id": 102025611, "body": "Based on what you have posted I don&#39;t see any problem. Can you include how are you exporting/importing the <code>Item</code> type. And maybe a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1567637664, "post_id": 57796139, "comment_id": 102025997, "body": "I pasted your code into a <code>.tsx</code> file and no errors were raised. I think you bug may be somewhere else. Also you may be able to save yourself some keystrokes and define your function more simply: <code>function TwoColumnLinkBlock(props: TCLBProps) { ... }</code>"}, {"owner": {"reputation": 23, "user_id": 12022175, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bZjBJEXrnUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiQlCKP7uoQtMqIoMz1G4GvP9FmQ/photo.jpg?sz=128", "display_name": "mlrichmond", "link": "https://stackoverflow.com/users/12022175/mlrichmond"}, "reply_to_user": {"reputation": 1818, "user_id": 5801753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXtbq.jpg?s=128&g=1", "display_name": "Johnny Zabala", "link": "https://stackoverflow.com/users/5801753/johnny-zabala"}, "edited": false, "score": 0, "creation_date": 1567643158, "post_id": 57796139, "comment_id": 102026959, "body": "@JohnnyZabala - Added code sandbox sample that shows the code structure I&#39;m using. The error sandbox produces isn&#39;t identical but its the same line oddly enough."}, {"owner": {"reputation": 23, "user_id": 12022175, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bZjBJEXrnUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiQlCKP7uoQtMqIoMz1G4GvP9FmQ/photo.jpg?sz=128", "display_name": "mlrichmond", "link": "https://stackoverflow.com/users/12022175/mlrichmond"}, "reply_to_user": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1567643174, "post_id": 57796139, "comment_id": 102026961, "body": "@AlexWayne Thanks for the tip! I was wondering if there was a more expedient way to do that."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12022175, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bZjBJEXrnUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiQlCKP7uoQtMqIoMz1G4GvP9FmQ/photo.jpg?sz=128", "display_name": "mlrichmond", "link": "https://stackoverflow.com/users/12022175/mlrichmond"}, "edited": false, "score": 0, "creation_date": 1567651521, "post_id": 57797661, "comment_id": 102028283, "body": "Thanks! That helped a lot. Your explanation of what the import does without the  { } is something I did not know and makes total sense now. Unfortunately for me, I now get a &quot;Cannot re-export a type when the &#39;--isolatedModules&#39; flag is provded.&quot; error in my actual project - but I assume that has to do with the secondary index.ts I&#39;m using. This leads me to question the nested index structure I&#39;m using. I found it in an example project at one point, but I wonder if there&#39;s a better way to structure child components like this?"}, {"owner": {"reputation": 4430, "user_id": 2690790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/810ebc2ef00faac83286d2bb892f38cd?s=128&d=identicon&r=PG", "display_name": "skovy", "link": "https://stackoverflow.com/users/2690790/skovy"}, "reply_to_user": {"reputation": 23, "user_id": 12022175, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bZjBJEXrnUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiQlCKP7uoQtMqIoMz1G4GvP9FmQ/photo.jpg?sz=128", "display_name": "mlrichmond", "link": "https://stackoverflow.com/users/12022175/mlrichmond"}, "edited": false, "score": 0, "creation_date": 1567651583, "post_id": 57797661, "comment_id": 102028294, "body": "I would suggest researching that flag and determine if you want to/need to have that enabled. It might not make sense for your use case."}], "tags": [], "owner": {"reputation": 4430, "user_id": 2690790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/810ebc2ef00faac83286d2bb892f38cd?s=128&d=identicon&r=PG", "display_name": "skovy", "link": "https://stackoverflow.com/users/2690790/skovy"}, "is_accepted": true, "score": 0, "last_activity_date": 1567650080, "creation_date": 1567650080, "answer_id": 57797661, "question_id": 57796139, "link": "https://stackoverflow.com/questions/57796139/typescript-and-react-with-complex-prop-type-interface/57797661#57797661", "title": "Typescript and React with complex prop type interface", "body": "<p>Based on the code provided in your Codesandbox you have the <code>src/components/Widget/index.tsx</code> file with:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import Widget from \"./widget\";\nimport WidgetItem from \"./widget\";\n\nexport { Widget };\nexport { WidgetItem };\n\nexport default Widget;\n</code></pre>\n\n<p>And the <code>src/components/Widget/widget.tsx</code> file with:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface WidgetItem {\n  Text: JSX.Element;\n  Link: string;\n}\n\n// Other contents\n\nexport default widget;\n</code></pre>\n\n<p>The component (<code>widget</code>) is the default export so it is imported with <code>import AnyNameYoudLike from \"./widget\"</code>. But the <code>interface WidgetItem</code> is a named export and can only be imported with the exact name as <code>import { WidgetItem } from \"./widget\"</code>.</p>\n\n<p>Note these top two imports in the first <code>index.tsx</code> file. These are both different names but they are <strong>both importing the same default component.</strong> The <code>WidgetItem</code> is a named import so musted be imported as <code>import { WidgetItem } from \"./widget\";</code>.</p>\n\n<p>So the <code>WidgetItem</code> being exported is actually the component as well (and not the interface).</p>\n\n<p><a href=\"https://codesandbox.io/s/kind-khorana-udrj1\" rel=\"nofollow noreferrer\">Here is the Codesandbox with the fix</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 12022175, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bZjBJEXrnUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiQlCKP7uoQtMqIoMz1G4GvP9FmQ/photo.jpg?sz=128", "display_name": "mlrichmond", "link": "https://stackoverflow.com/users/12022175/mlrichmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 57797661, "answer_count": 1, "score": 2, "last_activity_date": 1567650080, "creation_date": 1567634488, "last_edit_date": 1567643027, "question_id": 57796139, "link": "https://stackoverflow.com/questions/57796139/typescript-and-react-with-complex-prop-type-interface", "title": "Typescript and React with complex prop type interface", "body": "<p>I am new to both React and Typescript and have been working on a project so far with React only. I am now in the process of adding/converting the project to Typescript and am coming up against a wall in my conversion and despite several attempts at googling have been unable to find an answer. I have the following props defined for a component:</p>\n\n<pre><code>interface Item {\n    Text: JSX.Element,\n    Link: string\n}\n\ninterface TCLBProps {\n    Icon: JSX.Element,\n    Header: string,\n    Items: Item[]\n}\n\nconst TwoColumnLinkBlock: React.FC&lt;TCLBProps&gt; = (props) =&gt; {\n</code></pre>\n\n<p>I then have another component (in another file) that is attempting to invoke the TwoColumnLinkBlock component defined above.</p>\n\n<pre><code>&lt;TwoColumnLinkBlock\n    Icon={&lt;Resources color=\"brand\" size=\"medium\" /&gt;}\n    Header=\"Inputs &amp; Incoming Data\"\n    Items={linkSet1}\n/&gt;\n</code></pre>\n\n<p>linkSet1 is defined as:</p>\n\n<pre><code>let linkSet1 : Item[] = [\n       {Text: &lt;span&gt;&lt;b&gt;Test&lt;/b&gt;&lt;/span&gt;, Link: \"/TestPage\"},\n       {Text: &lt;span&gt;&lt;b&gt;Test2&lt;/b&gt;&lt;/span&gt;, Link: \"/TestPage2\"},\n    ];\n</code></pre>\n\n<p>Typescript tells me that it cannot find Item. If I export the item and import it here, I am told that \"Item refers to a value but is being used as a type here.\"</p>\n\n<p>What am I misunderstanding about this process? Is my interface declared incorrectly?</p>\n\n<p>Edit: Example <a href=\"https://codesandbox.io/s/youthful-mirzakhani-0ggwn\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/youthful-mirzakhani-0ggwn</a></p>\n\n<p>This follows the same structure I've been using. You can see, although it compiles and runs, Typescript is balking on WidgetItem when it's used in index.tsx. In my Visual Studio copy, I get the error described above at this same line.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 13, "user_id": 7973496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zZXM-gK8EAk/AAAAAAAAAAI/AAAAAAAAAac/AmlldC3heZI/photo.jpg?sz=128", "display_name": "alparius", "link": "https://stackoverflow.com/users/7973496/alparius"}, "edited": false, "score": 0, "creation_date": 1567634079, "post_id": 57795969, "comment_id": 102025235, "body": "I don&#39;t have the rep to comment, but this is what I&#39;ve found: <a href=\"https://stackoverflow.com/questions/53958028/how-to-use-generics-in-props-in-react-in-a-functional-component\">How to use generics in props in React in a functional component?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4430, "user_id": 2690790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/810ebc2ef00faac83286d2bb892f38cd?s=128&d=identicon&r=PG", "display_name": "skovy", "link": "https://stackoverflow.com/users/2690790/skovy"}, "is_accepted": false, "score": 3, "last_activity_date": 1567634576, "creation_date": 1567634576, "answer_id": 57796153, "question_id": 57795969, "link": "https://stackoverflow.com/questions/57795969/define-props-with-generic-type-in-react/57796153#57796153", "title": "Define props with generic type in React", "body": "<p>You could try something like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as React from \"react\";\nimport { render } from \"react-dom\";\n\nimport \"./styles.css\";\n\ninterface Props&lt;T&gt; {\n  a: T;\n}\n\nconst Component = &lt;T extends {}&gt;(props: Props&lt;T&gt;) =&gt; {\n  return &lt;div&gt;{props.a}&lt;/div&gt;;\n};\n\nfunction App() {\n  return &lt;Component a=\"testing\" /&gt;;\n}\n\nconst rootElement = document.getElementById(\"root\");\nrender(&lt;App /&gt;, rootElement);\n</code></pre>\n\n<p>You can <a href=\"https://codesandbox.io/s/typescript-react-prop-generic-j082n\" rel=\"nofollow noreferrer\">view the example here</a>.</p>\n\n<p>Note the <code>extends {}</code> is necessary in a <code>tsx</code> file. See: <a href=\"https://stackoverflow.com/questions/32308370/what-is-the-syntax-for-typescript-arrow-functions-with-generics\">What is the syntax for Typescript arrow functions with generics?</a></p>\n"}, {"tags": [], "owner": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "is_accepted": true, "score": -1, "last_activity_date": 1567693596, "creation_date": 1567693596, "answer_id": 57807666, "question_id": 57795969, "link": "https://stackoverflow.com/questions/57795969/define-props-with-generic-type-in-react/57807666#57807666", "title": "Define props with generic type in React", "body": "<p>Try this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const MyComponent2 = &lt;T&gt;(props: SomeProps): FunctionComponent&lt;MyComponent2Props&lt;T&gt;&gt; =&gt; {}\n</code></pre>\n"}], "owner": {"reputation": 21308, "user_id": 289246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6559194055071e71f24d8f890d4a4f1b?s=128&d=identicon&r=PG", "display_name": "Naor", "link": "https://stackoverflow.com/users/289246/naor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1414, "favorite_count": 0, "accepted_answer_id": 57807666, "answer_count": 2, "score": 1, "last_activity_date": 1567693596, "creation_date": 1567633504, "question_id": 57795969, "link": "https://stackoverflow.com/questions/57795969/define-props-with-generic-type-in-react", "title": "Define props with generic type in React", "body": "<p>I am using React with TypeScript in the following way:</p>\n\n<pre><code>interface MyComponentProps {\n    ...\n    ...\n}\n\nconst MyComponent:FunctionComponent&lt;MyComponentProps&gt; = props =&gt; {\n    ...\n    ...\n    ...\n}\n</code></pre>\n\n<p>Now I need to define the following props type:</p>\n\n<pre><code>interface MyComponent2Props&lt;T&gt; {\n    prop1: T,\n    ...\n}\n</code></pre>\n\n<p>I tried to define the component:</p>\n\n<pre><code>const MyComponent2&lt;T&gt;:FunctionComponent&lt;MyComponent2Props&lt;T&gt;&gt; = props =&gt; {\n    ...\n    ...\n    ...\n}\n</code></pre>\n\n<p>But this is incorrect syntax.   </p>\n\n<p>What is the correct way to define such component?</p>\n"}, {"tags": ["angular", "typescript", "tomcat8", "angular8"], "comments": [{"owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "edited": false, "score": 0, "creation_date": 1567633489, "post_id": 57795955, "comment_id": 102025113, "body": "I removed some code to try to only include code relevant to the question. Also, I am able to successfully post data to the database using Postman."}, {"owner": {"reputation": 275, "user_id": 9518388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DanGo", "link": "https://stackoverflow.com/users/9518388/dango"}, "edited": false, "score": 0, "creation_date": 1567633947, "post_id": 57795955, "comment_id": 102025202, "body": "What does the call look like that Angular ends up sending to the API that is causing the 500 error?"}, {"owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "reply_to_user": {"reputation": 275, "user_id": 9518388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DanGo", "link": "https://stackoverflow.com/users/9518388/dango"}, "edited": false, "score": 0, "creation_date": 1567634251, "post_id": 57795955, "comment_id": 102025277, "body": "@DanGorman If I understand your question correctly, this is the call Angular ends up sending to the API that causes the 500 error."}, {"owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "reply_to_user": {"reputation": 275, "user_id": 9518388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DanGo", "link": "https://stackoverflow.com/users/9518388/dango"}, "edited": false, "score": 0, "creation_date": 1567634792, "post_id": 57795955, "comment_id": 102025391, "body": "Do you mean what does the post method look like or what is the error message?"}, {"owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "reply_to_user": {"reputation": 275, "user_id": 9518388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DanGo", "link": "https://stackoverflow.com/users/9518388/dango"}, "edited": false, "score": 0, "creation_date": 1567635068, "post_id": 57795955, "comment_id": 102025438, "body": "submitForm() {     this.httpService.createNewDumpster(this.newDumpsterForm.valu&zwnj;&#8203;e).subscribe(res =&gt; {       console.log(&#39;A New Dumpster Was Added!&#39;)       this.ngZone.run(() =&gt; this.router.navigateByUrl(&#39;/dumpsterList&#39;))      });   }"}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1567665270, "post_id": 57795955, "comment_id": 102031634, "body": "@Dominic, a error 500 is an error that indicate the API <b>in server</b> has an error, e.g. can update the dbs because not found, you has a divided by 0, you throw an exception..."}, {"owner": {"reputation": 275, "user_id": 9518388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DanGo", "link": "https://stackoverflow.com/users/9518388/dango"}, "edited": false, "score": 0, "creation_date": 1567693582, "post_id": 57795955, "comment_id": 102046912, "body": "No I had meant that Angular will interpret your post call into a web request to the API i.e. www.yourapi.com/new?id=12345&amp;count=321 this should be viewable in the console of your browser as well as other details of the request. My thought is that the request may be malformed. Eliseo is correct this may need to be troubleshot on the API side because the API is receiving it, though it cannot pocess the request for whatever reason."}, {"owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "reply_to_user": {"reputation": 275, "user_id": 9518388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DanGo", "link": "https://stackoverflow.com/users/9518388/dango"}, "edited": false, "score": 0, "creation_date": 1567806847, "post_id": 57795955, "comment_id": 102087852, "body": "I just want to say your advice was really helpful and I figured it out, the request was malformed. The property name I declared in Angular did not match the instance variable I declared in Java. It seems to always be the little things! Thank you guys! @Dan Gorman"}, {"owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "reply_to_user": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1567806860, "post_id": 57795955, "comment_id": 102087854, "body": "@Eliseo Thank you"}], "owner": {"reputation": 1, "user_id": 11236381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EWPt2oLDXiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdstg8p317dHwpqwUVmqgOMLAZSdg/mo/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/11236381/dominic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567633409, "creation_date": 1567633409, "question_id": 57795955, "link": "https://stackoverflow.com/questions/57795955/how-to-post-data-to-an-external-api-with-user-inputradio-button-dropdown-menu", "title": "How to Post data to an external API with user input(radio button &amp; dropdown menu) using Angular 7/8", "body": "<p>I used this site (<a href=\"https://www.positronx.io/angular-8-httpclient-http-tutorial-build-consume-restful-api/\" rel=\"nofollow noreferrer\">https://www.positronx.io/angular-8-httpclient-http-tutorial-build-consume-restful-api/</a>) to follow \na HTTP Post Tutorial to help with my own side project \nbut the result is that I am receiving a 500 error. \nUltimately, I want submit user input to Post to my API.</p>\n\n<p>I am relatively new to Angular so any guidance as to how set this up would be greatly appreciated.</p>\n\n<pre><code>http service file:-------------------------------\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { catchError, retry } from 'rxjs/operators';\n\nimport { Dumpsters } from 'src/app/dumpsterFolder/dumpsterObjects/dumpster';\nimport { Observable, throwError } from 'rxjs';\n\nhttpOptions = {\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n  };\n\n  //CREATE: /** POST: add a new dumpster to the server */ \n  createNewDumpster(data):Observable&lt;Dumpsters&gt;{\n    return this.http.post&lt;Dumpsters&gt;(this.addNewDumpsterUrl, \n    JSON.stringify(data), this.httpOptions)\n    .pipe(\n      retry(1),\n      catchError(this.errorHandl)\n    )\n  }\n-------------------------------------------------------\ncomponent file: ---------------------------------------\nimport { Component, OnInit, NgZone } from '@angular/core';\nimport { HttpService } from '../../http.service';\nimport { FormBuilder, FormGroup} from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { Dumpsters } from 'src/app/dumpsterFolder/dumpsterObjects/dumpster';\n\nexport class AddNewDumpsterComponent implements OnInit {\n\n  newDumpsterForm: FormGroup;\n  newDumpster: Dumpsters[];\n\n\n  ngOnInit() {\n   this.addNewDumpster();\n  }\n\n  constructor(\n    public fb: FormBuilder,\n    private ngZone: NgZone,\n    private router: Router,\n    public httpService: HttpService\n  ){ }\n\n  addNewDumpster() {\n    this.newDumpsterForm = this.fb.group({\n      dumpsterSize:Number [''],\n      dumpsterHealth:Number ['']\n    })\n  }\n\n  submitForm() {\n    this.httpService.createNewDumpster(this.newDumpsterForm.value).subscribe(res =&gt; {\n      console.log('A New Dumpster Was Added!')\n      this.ngZone.run(() =&gt; this.router.navigateByUrl('/dumpsterList')) \n    });\n  }\n}\n----------------------------------------------------------------------\ncomponent HTML file:--------------------------------------------------\n&lt;div class=\"container\"&gt;\n\n  &lt;h3&gt;Add New Dumpster&lt;/h3&gt;\n\n&lt;!-- My code based on the online example.  --&gt;\n&lt;form [formGroup]=\"newDumpsterForm\" (ngSubmit)=\"submitForm()\" novalidate&gt;\n  &lt;fieldset class=\"form-group\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;legend class=\"col-form-label col-sm-2 pt-0\"&gt;Dumpster Sizes&lt;/legend&gt;\n      &lt;div class=\"col-sm-10\"&gt;\n        &lt;div class=\"form-check\"&gt;\n\n          &lt;input type=\"radio\" formControlName=\"dumpsterSize\" value=\"1\"&gt;\n\n          &lt;label class=\"form-check-label\" &gt;\n            10 yd\n          &lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-check \"&gt;\n\n          &lt;input type=\"radio\" formControlName=\"dumpsterSize\" value=\"2\"&gt;\n\n          &lt;label class=\"form-check-label\" &gt;\n            15 yd\n          &lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-check\"&gt;\n          &lt;input type=\"radio\" formControlName=\"dumpsterSize\" value=\"3\"&gt;\n          &lt;label class=\"form-check-label\" &gt;\n            20 yd\n          &lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-check \"&gt;\n          &lt;input type=\"radio\" formControlName=\"dumpsterSize\" value=\"4\"&gt;\n          &lt;label class=\"form-check-label\" &gt;\n            30 yd\n          &lt;/label&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/fieldset&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-3 \"&gt;\n      &lt;span&gt;Rank Dumpster's Condition&lt;/span&gt;\n      &lt;select class=\"form-control healthRankDropDown\" formControlName=\"dumpsterHealth\"&gt;\n        &lt;option value=\"1\"&gt;1&lt;/option&gt;\n        &lt;option value=\"2\"&gt;2&lt;/option&gt;\n        &lt;option value=\"3\"&gt;3&lt;/option&gt;\n        &lt;option value=\"4\"&gt;4&lt;/option&gt;\n        &lt;option value=\"5\"&gt;5&lt;/option&gt;\n        &lt;option value=\"6\"&gt;6&lt;/option&gt;\n        &lt;option value=\"7\"&gt;7 and Greater Needs Attention!&lt;/option&gt;\n        &lt;option value=\"8\"&gt;8 Needs Attention!&lt;/option&gt;\n        &lt;option value=\"9\"&gt;9 Needs Attention!&lt;/option&gt;\n        &lt;option value=\"10\"&gt;10 Needs Attention!&lt;/option&gt;\n      &lt;/select&gt;\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;br&gt;\n  &lt;div class=\"form-field\"&gt;\n    &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;\n      Add New Dumpster\n    &lt;/button&gt;\n  &lt;/div&gt;\n\n&lt;/form&gt;\n\n&lt;/div&gt;\n\nI am expecting to pass two values to the post method to post to the API.\n</code></pre>\n"}, {"tags": ["typescript", "firebase", "firebase-authentication", "firebase-admin"], "comments": [{"owner": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567633100, "post_id": 57795848, "comment_id": 102025015, "body": "Seems like you know a way to do it. What&#39;s the problem?"}, {"owner": {"reputation": 495, "user_id": 2806103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb149fac891d4376825869b7eaea15b9?s=128&d=identicon&r=PG&f=1", "display_name": "Itang Sanjana", "link": "https://stackoverflow.com/users/2806103/itang-sanjana"}, "edited": false, "score": 0, "creation_date": 1575307948, "post_id": 57795848, "comment_id": 104514090, "body": "You have to delete it like delteing a property of an object. See below."}], "answers": [{"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 1, "last_activity_date": 1567634148, "creation_date": 1567634148, "answer_id": 57796088, "question_id": 57795848, "link": "https://stackoverflow.com/questions/57795848/how-can-i-remove-a-custom-claim/57796088#57796088", "title": "How can I remove a custom claim", "body": "<ol>\n<li>Get the UserRecord for the user's UID with <a href=\"https://firebase.google.com/docs/reference/admin/node/admin.auth.Auth.html#get-user\" rel=\"nofollow noreferrer\">getUser()</a>.</li>\n<li>Get their existing custom claims from <a href=\"https://firebase.google.com/docs/reference/admin/node/admin.auth.UserRecord.html#optional-custom-claims\" rel=\"nofollow noreferrer\">customClaims</a> property.</li>\n<li>Make changes to it as needed.</li>\n<li>Update the modified claims with <a href=\"https://firebase.google.com/docs/reference/admin/node/admin.auth.Auth#setCustomUserClaims\" rel=\"nofollow noreferrer\">setCustomUserClaims()</a>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 2806103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb149fac891d4376825869b7eaea15b9?s=128&d=identicon&r=PG&f=1", "display_name": "Itang Sanjana", "link": "https://stackoverflow.com/users/2806103/itang-sanjana"}, "is_accepted": false, "score": 0, "last_activity_date": 1575308871, "creation_date": 1575308871, "answer_id": 59144192, "question_id": 57795848, "link": "https://stackoverflow.com/questions/57795848/how-can-i-remove-a-custom-claim/59144192#59144192", "title": "How can I remove a custom claim", "body": "<p>Delete the claim in question.</p>\n\n<pre><code>admin.auth().getUser(uid).then((user) =&gt; {\n\n    const userCustomClaims = user.customClaims;\n\n    if (userCustomClaims[\"claim1\"]) {\n\n        delete userCustomClaims[\"claim1\"];\n        return admin.auth().setCustomUserClaims(user.uid, userCustomClaims);\n\n    }\n}).catch((error) =&gt; {\n\n    console.error(error);\n\n});\n</code></pre>\n\n<p>CMIIW</p>\n"}], "owner": {"reputation": 19, "user_id": 11784120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F8lH6-0Ex60/AAAAAAAAAAI/AAAAAAAAAAk/qkW1vwDrKQo/photo.jpg?sz=128", "display_name": "Basketball ICO", "link": "https://stackoverflow.com/users/11784120/basketball-ico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575308871, "creation_date": 1567632572, "last_edit_date": 1567650647, "question_id": 57795848, "link": "https://stackoverflow.com/questions/57795848/how-can-i-remove-a-custom-claim", "title": "How can I remove a custom claim", "body": "<p>I have some custom claims like</p>\n\n<pre><code>{\n  claim1: true,\n  claim2: true,\n}\n</code></pre>\n\n<p>I want to remove one claim</p>\n\n<pre><code>{\n  claim2: true,\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/48175477/in-firebase-authentication-is-there-a-way-to-remove-a-custom-claim\">In firebase authentication, is there a way to remove a custom claim?</a> Here use </p>\n\n<pre><code>admin.auth().updateUser(uid, {claim: null});\n</code></pre>\n\n<p>but update user not have claim property.</p>\n\n<p>if I use this, this remove the previous claims and also set null, not removed</p>\n\n<pre><code>admin.auth().setCustomUserClaims(context.auth.uid, {claim1: null});\n</code></pre>\n\n<pre><code>{\n  claim1: null,\n}\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "angular", "typescript", "firebase"], "comments": [{"owner": {"reputation": 475, "user_id": 11714668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059c16fa2447ef8d1b968658d866c70c?s=128&d=identicon&r=PG&f=1", "display_name": "Jbluehdorn", "link": "https://stackoverflow.com/users/11714668/jbluehdorn"}, "edited": false, "score": 0, "creation_date": 1567630386, "post_id": 57795459, "comment_id": 102024126, "body": "If you&#39;re copying the array already, why not just use <code>const temp = this.userData.operationList.map(...)</code> for your map?"}, {"owner": {"reputation": 106594, "user_id": 575527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1120319639f8c7ea84d66d4334bdfa9?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/575527/joseph"}, "edited": false, "score": 0, "creation_date": 1567630637, "post_id": 57795459, "comment_id": 102024203, "body": "Not a direct duplicate, but has the same idea. <a href=\"https://stackoverflow.com/q/52085758/575527\">stackoverflow.com/q/52085758/575527</a> . <code>Object.assign()</code> only does a &quot;shallow clone&quot;."}, {"owner": {"reputation": 13, "user_id": 9600231, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215028454561489/picture?type=large", "display_name": "Leandro Cardenas", "link": "https://stackoverflow.com/users/9600231/leandro-cardenas"}, "reply_to_user": {"reputation": 475, "user_id": 11714668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059c16fa2447ef8d1b968658d866c70c?s=128&d=identicon&r=PG&f=1", "display_name": "Jbluehdorn", "link": "https://stackoverflow.com/users/11714668/jbluehdorn"}, "edited": false, "score": 0, "creation_date": 1567630743, "post_id": 57795459, "comment_id": 102024242, "body": "@Jbluehdorn I already tried it that way, and the result is the same."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9600231, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215028454561489/picture?type=large", "display_name": "Leandro Cardenas", "link": "https://stackoverflow.com/users/9600231/leandro-cardenas"}, "edited": false, "score": 0, "creation_date": 1567633736, "post_id": 57795524, "comment_id": 102025162, "body": "It did not work, still maintaining the reference to the original array."}], "tags": [], "owner": {"reputation": 475, "user_id": 11714668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059c16fa2447ef8d1b968658d866c70c?s=128&d=identicon&r=PG&f=1", "display_name": "Jbluehdorn", "link": "https://stackoverflow.com/users/11714668/jbluehdorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1567630494, "creation_date": 1567630494, "answer_id": 57795524, "question_id": 57795459, "link": "https://stackoverflow.com/questions/57795459/angular-8-array-map-slice-no-funcionan/57795524#57795524", "title": "Angular 8: Array .map() .slice() No funcionan", "body": "<p>You're modifying a direct reference to the underlying data directly within your map. Change it to something like:</p>\n\n<pre><code>let tempX = Object.assign({}, x);\ntempX.bank = 'Popular';\nreturn tempX;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9600231, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215028454561489/picture?type=large", "display_name": "Leandro Cardenas", "link": "https://stackoverflow.com/users/9600231/leandro-cardenas"}, "edited": false, "score": 0, "creation_date": 1567631990, "post_id": 57795531, "comment_id": 102024651, "body": "Thanks, it worked for me. What I don&#39;t understand is why in javascritp the .map () function works fine, but using angular and firebase the reference to the original array is maintained."}, {"owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "reply_to_user": {"reputation": 13, "user_id": 9600231, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215028454561489/picture?type=large", "display_name": "Leandro Cardenas", "link": "https://stackoverflow.com/users/9600231/leandro-cardenas"}, "edited": false, "score": 0, "creation_date": 1567632660, "post_id": 57795531, "comment_id": 102024863, "body": "Angular has nothing to do with it. If you <code>map</code> or <code>slice</code> an array of primitives (like numbers, strings or Booleans), you&#39;re fine, you&#39;re creating a legit, independent copy. With an array of objects you need to be a little more careful."}, {"owner": {"reputation": 2575, "user_id": 6445732, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A67qWKs4iIk/AAAAAAAAAAI/AAAAAAAABr4/X9tmHVYIKzs/photo.jpg?sz=128", "display_name": "Deepak swain", "link": "https://stackoverflow.com/users/6445732/deepak-swain"}, "edited": false, "score": 0, "creation_date": 1575900255, "post_id": 57795531, "comment_id": 104710694, "body": "Wr8.  Still, if you want to assign value to array, then try using Spread Operator"}], "tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": true, "score": 2, "last_activity_date": 1567630528, "creation_date": 1567630528, "answer_id": 57795531, "question_id": 57795459, "link": "https://stackoverflow.com/questions/57795459/angular-8-array-map-slice-no-funcionan/57795531#57795531", "title": "Angular 8: Array .map() .slice() No funcionan", "body": "<p>By copying an array, you're still keeping references to the same objects. So you need to go one level deeper:</p>\n\n<pre><code>const temp = data.operationsList.map((x) =&gt; Object.assign({}, x, { bank: 'Popular' }));\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9600231, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215028454561489/picture?type=large", "display_name": "Leandro Cardenas", "link": "https://stackoverflow.com/users/9600231/leandro-cardenas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 0, "accepted_answer_id": 57795531, "answer_count": 2, "score": 1, "last_activity_date": 1567630528, "creation_date": 1567630135, "question_id": 57795459, "link": "https://stackoverflow.com/questions/57795459/angular-8-array-map-slice-no-funcionan", "title": "Angular 8: Array .map() .slice() No funcionan", "body": "<p>Angular 8 with Firebase: Array .map () .slice () Do not work.\nHi.\nI have been trying to make a copy of an array using .map () and .slice () in Angular 8, but using these methods I find that the copied array still has the reference to the original array.</p>\n\n<p>I don't know if I'm doing it wrong, or these methods don't work in Angular 8.</p>\n\n<pre><code> // Iniciamos la escucha de los cambios de la data del usuario\n    if (!this.$userData) {\n      this.$userData = this.userService.user().valueChanges().subscribe(data =&gt; {\n        if (data) {\n          this.userData = Object.assign({}, data);\n          const temp = data.operationsList.map((x) =&gt; {\n            x.bank = 'Popular';\n            return x;\n          });\n          console.log(this.userData.operationsList, temp);\n          if (!this.userData.validated) {\n            this.router.navigate(['register/pendingValidation']);\n          }\n        }\n      });\n    }\n</code></pre>\n\n<p>console.log:</p>\n\n<pre><code>(2) [{\u2026}, {\u2026}]\n0: {bank: \"Popular\", commission: 0, country: \"ve\", countryAllowed: \"all\", maximum: 0, \u2026}\n1: {bank: \"Popular\", commission: 0, country: \"ve\", countryAllowed: \"all\", maximum: 0, \u2026}\n\n(2) [{\u2026}, {\u2026}]\n0: {bank: \"Popular\", commission: 0, country: \"ve\", countryAllowed: \"all\", maximum: 0, \u2026}\n1: {bank: \"Popular\", commission: 0, country: \"ve\", countryAllowed: \"all\", maximum: 0, \u2026}\n</code></pre>\n\n<p>When modifying the copied array, the changes are also reflected in the original array.</p>\n"}, {"tags": ["node.js", "typescript", "firebase", "google-cloud-functions"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1567626281, "post_id": 57794916, "comment_id": 102022911, "body": "What exactly are you doing and observing that&#39;s different than what you expect?  Please edit the question and be specific, so that anyone can reproduce your experience."}, {"owner": {"reputation": 79, "user_id": 6383811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36a53779699b719678301f5f825e4d0?s=128&d=identicon&r=PG&f=1", "display_name": "shaebi", "link": "https://stackoverflow.com/users/6383811/shaebi"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1567640154, "post_id": 57794916, "comment_id": 102026430, "body": "Sure, I put some more info. Thanks for the suggestion."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1567727111, "post_id": 57794916, "comment_id": 102059424, "body": "The error message says &quot;This error originated either by throwing inside of an async function without a catch block&quot;.  Do you need a try/catch to find out if the database operation had some failure?"}, {"owner": {"reputation": 79, "user_id": 6383811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36a53779699b719678301f5f825e4d0?s=128&d=identicon&r=PG&f=1", "display_name": "shaebi", "link": "https://stackoverflow.com/users/6383811/shaebi"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1567737604, "post_id": 57794916, "comment_id": 102061226, "body": "I have tried with  try/catch without any result. Is there another way to do try/catch?"}], "answers": [{"comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1567727051, "post_id": 57806282, "comment_id": 102059414, "body": "The default service account that&#39;s provided by Cloud Functions (used when initializeApp is called with no parameters) should be sufficient for reading and writing Cloud Firestore, unless something strange has been done to that account that would revoke its access."}, {"owner": {"reputation": 932, "user_id": 2147069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286ab50e910623385ab5401a0b4b78cb?s=128&d=identicon&r=PG", "display_name": "ajorquera", "link": "https://stackoverflow.com/users/2147069/ajorquera"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1567760809, "post_id": 57806282, "comment_id": 102068257, "body": "@DougStevenson but I though you need to set your own credentials when you are working locally"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1567786616, "post_id": 57806282, "comment_id": 102081123, "body": "When using the local emulator, it should also have access to the default service account.  If you are just writing code to run outside the emulator, then you need to provide a service account."}], "tags": [], "owner": {"reputation": 932, "user_id": 2147069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286ab50e910623385ab5401a0b4b78cb?s=128&d=identicon&r=PG", "display_name": "ajorquera", "link": "https://stackoverflow.com/users/2147069/ajorquera"}, "is_accepted": false, "score": 0, "last_activity_date": 1567689083, "creation_date": 1567689083, "answer_id": 57806282, "question_id": 57794916, "link": "https://stackoverflow.com/questions/57794916/firebase-functions-work-in-firebase-deployment-but-not-locally/57806282#57806282", "title": "Firebase Functions work in firebase deployment, but not locally", "body": "<p>You need to provide the rights credentials. It works on google cloud because there are environment variables that make this automatically. </p>\n\n<hr>\n\n<p>You need to set locally this environment variable with the path to your credentials file. Try this in your terminal:</p>\n\n<pre><code>export FIREBASE_CONFIG=\"/user/path/to/credential.json\"\n</code></pre>\n\n<p><a href=\"https://firebase.google.com/docs/admin/setup#initialize_without_parameters\" rel=\"nofollow noreferrer\">More info</a></p>\n\n<hr>\n\n<p>Try following the <a href=\"https://firebase.google.com/docs/admin/setup\" rel=\"nofollow noreferrer\">documentation</a>. It gives good examples on how to do this. </p>\n"}], "owner": {"reputation": 79, "user_id": 6383811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36a53779699b719678301f5f825e4d0?s=128&d=identicon&r=PG&f=1", "display_name": "shaebi", "link": "https://stackoverflow.com/users/6383811/shaebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 806, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567737276, "creation_date": 1567626188, "last_edit_date": 1567737276, "question_id": 57794916, "link": "https://stackoverflow.com/questions/57794916/firebase-functions-work-in-firebase-deployment-but-not-locally", "title": "Firebase Functions work in firebase deployment, but not locally", "body": "<p>This code does not return any data in localhost, but works well when deployed in firebase. Any suggestions? (tried with both 'firebase emulators:start' &amp; 'npm run serve'). \nI should get a json object containing courses.<br>\nI tried with try/catch without any result:</p>\n\n<ul>\n<li>'npm run server' (\"npm run build &amp;&amp; firebase serve --only functions\")</li>\n</ul>\n\n<blockquote>\n  <p>Error: Could not load the default credentials.  Error: Unhandled\n  promise rejections are deprecated. In the future, promise \n      rejections that are not handled will terminate the Node.js process with a \n      non-zero exit code. UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error \n      originated either by throwing inside of an async function without a catch \n      block, or by rejecting a promise which was not handled with .catch()</p>\n</blockquote>\n\n<ul>\n<li>'firebase emulators:start' -> no error, but an empty json: {\"courses\":[]}</li>\n</ul>\n\n<p>Link to code: <a href=\"https://github.com/angular-university/firebase-course/blob/1-firebase-finished/functions/src/index.ts\" rel=\"nofollow noreferrer\">https://github.com/angular-university/firebase-course/blob/1-firebase-finished/functions/src/index.ts</a></p>\n\n<pre><code>  import * as functions from 'firebase-functions';\n    import {db} from './init';\n    import * as express from \"express\";\n    const cors = require('cors');\n    const app = express();\n    app.use(cors({origin:true}));\n\n    app.get('/courses', async (request, response) =&gt; {\n        const snaps = await db.collection('courses').get();\n        const courses:any[] = [];\n        snaps.forEach(snap =&gt; courses.push(snap.data()));\n        response.status(200).json({courses});\n    });\n\n    export const getCourses = functions.https.onRequest(app);\n\n_____________________________________________________________________________\n\n    init.ts\n\n    const admin = require('firebase-admin');\n    admin.initializeApp();\n    export const db = admin.firestore();\n</code></pre>\n\n<hr>\n\n<pre><code>app.get('/courses', async (request, response) =&gt; {\n    try {\n        const snaps = await db.collection('courses').get();\n        const courses:any[] = [];\n        snaps.forEach((snap: any) =&gt; courses.push(snap.data()));\n        response.status(200).json({courses});\n    } \n    catch(err) {\n        console.error(err) \n    }\n});\nexport const getCourses = functions.https.onRequest(app);\n</code></pre>\n\n<hr>\n"}, {"tags": ["typescript", "type-inference", "typescript-generics"], "comments": [{"owner": {"reputation": 5551, "user_id": 1201488, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cce2b982a2acdfb40f3c376489403f1e?s=128&d=identicon&r=PG", "display_name": "Ivan Velichko", "link": "https://stackoverflow.com/users/1201488/ivan-velichko"}, "edited": false, "score": 0, "creation_date": 1567624090, "post_id": 57794453, "comment_id": 102022053, "body": "So, you mean just <code>type T = FooData | SpamData; function renderTemplate(data: T): string { return te.render(&#39;...&#39;, data); }</code>?"}, {"owner": {"reputation": 2091, "user_id": 884080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/5eBUg.jpg?s=128&g=1", "display_name": "Jon Lauridsen", "link": "https://stackoverflow.com/users/884080/jon-lauridsen"}, "reply_to_user": {"reputation": 5551, "user_id": 1201488, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cce2b982a2acdfb40f3c376489403f1e?s=128&d=identicon&r=PG", "display_name": "Ivan Velichko", "link": "https://stackoverflow.com/users/1201488/ivan-velichko"}, "edited": false, "score": 0, "creation_date": 1567666946, "post_id": 57794453, "comment_id": 102032344, "body": "Hmmm.. in this case how would <code>renderTemplate</code> know which path to render?"}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 3, "last_activity_date": 1567625022, "creation_date": 1567625022, "answer_id": 57794665, "question_id": 57794453, "link": "https://stackoverflow.com/questions/57794453/use-an-argument-or-generic-to-constrain-type-of-another-argument/57794665#57794665", "title": "Use an argument or generic to constrain type of another argument?", "body": "<p>You should either turn <code>FooData | SpamData</code> into a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" rel=\"nofollow noreferrer\">discriminated union</a> with a <code>kind</code> or <code>template</code> discriminant property, <em>or</em> you should pass in two arguments to <code>renderTemplate</code>, the first one being something like a <code>kind</code> or <code>template</code> string.  In either case you should choose some string literals to distinguish the data types.  I will use <code>\"foo\"</code> and <code>\"spam\"</code> here.  First, a discriminated union:</p>\n\n<pre><code>  interface FooData {\n    kind: \"foo\";\n    foo: string;\n  }\n\n  interface SpamData {\n    kind: \"spam\";\n    spam: number;\n  }\n\n  type Data = FooData | SpamData;\n\n  function render(data: Data): string {\n    return templateEngine.render(\"./\" + data.kind + \".template\", data);\n  }\n\n  render({ kind: \"foo\", foo: \"hey\" }); // okay\n  render({ kind: \"spam\", spam: 123 }); // okay\n  render({ kind: \"foo\", spam: 999 }); // error!\n</code></pre>\n\n<p>You can see that <code>Data</code> is a union of <code>FooData</code> and <code>SpamData</code>, each of which has a <code>kind</code> property you can use to discriminate which type it is.  It is fortuitous that you can build the template path with string manipulation, but if that doesn't work for you, you could set up a lookup table.</p>\n\n<p>The two-argument approach would look like this:</p>\n\n<pre><code>  interface FooData {\n    foo: string;\n  }\n\n  interface SpamData {\n    spam: number;\n  }\n\n  interface DataMap {\n    foo: FooData;\n    spam: SpamData;\n  }\n\n  function render&lt;K extends keyof DataMap&gt;(kind: K, data: DataMap[K]): string {\n    return templateEngine.render(\"./\" + kind + \".template\", data);\n  }\n\n  render(\"foo\", { foo: \"hey\" }); // okay\n  render(\"spam\", { spam: 123 }); // okay\n  render(\"foo\", { spam: 999 }); // error!\n</code></pre>\n\n<p>Here we have come up with a mapping interface called <code>DataMap</code> which represents the relationship between the <code>kind</code> string and the data type.  It's similar to the discriminated union, although I used a <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html\" rel=\"nofollow noreferrer\">generic</a> function to capture the constraint between arguments to <code>render()</code>.  The same point about string-manipulation-vs-lookup for actually calling <code>templateEngine.render()</code> stands here too.</p>\n\n<hr>\n\n<p>Hope that gives you some ideas.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/CYUwxgNghgTiAEA7KBbEBnADlMCAuIKm0BAoogOYCWiCA3gLABQ88IAHpgPYx7wBmAV0Rg8VLonhxEoGAApseABYAueOjwwaFADTxgUPFDVREATwCUajVsoBuZgF9mzZGiw4EAESrowWlBpDEGAAVURxSUYWeBoCGH5PeAAxLi4vQyh4aNZWAGsaYDUAIn404ocY1jKua01tStZnJmZWOJAEpIBlbBQMo2zW3IKZEo8UCqHWcbVEQRQAIw7G+GahvDNMb0z4AF4UtP6sgB94HtQjyqGhETEJKRAZDrkDIzUjq3V6ykGqh7xBDBJAQiCQQORqLQAHTSWRyYpQgD0xXgAGp9JkoSNgGj4AiQcRgsU9K8oBYVmsYrDnnR4NiSjViQI0iUlCAzCjHOT4IjEfAuHkoGYhtT5LT6XjxkyZvAAIwAJgAzKtubz+YLhVTHnDxYUGeU9DKAJwmlV2Hl8jowHgAQicLiYbgw2Fw8AAKgB3LgAQRgFHmjzw6F+bUQ8USrtS6R2OVyNTqtgoFIdofD3V6RxDuRlc0WyyGlNTHQj2yMAFkoJgs9UWQdo0YVtNempzn1MsmWjEbqJIg8njAADwAaTY7AIMmDeXZXH48COFcwAD45BKhyTMu9MguANpDgC6nxs2mr-0BwMIhLIlBoIBh2ueCORuOxuPxF7BTNJ5ILKb7cNKBrZMytR4myHJmha6pCiK97yMUUp6LSMoKsqXLmmqArQVq-bwoyiHqM28AmkaEFqlatr2kwQA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}, {"tags": [], "owner": {"reputation": 123501, "user_id": 1903366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkUeD.png?s=128&g=1", "display_name": "lukasgeiter", "link": "https://stackoverflow.com/users/1903366/lukasgeiter"}, "is_accepted": false, "score": 1, "last_activity_date": 1567625206, "creation_date": 1567625206, "answer_id": 57794709, "question_id": 57794453, "link": "https://stackoverflow.com/questions/57794453/use-an-argument-or-generic-to-constrain-type-of-another-argument/57794709#57794709", "title": "Use an argument or generic to constrain type of another argument?", "body": "<p>First of all, let me say I'm not sure it makes sense to refactor this. Especially as the template is a file path. For TypeScript <code>./foo.template</code> and <code>foo.template</code> are different, while for the template engine they might be the same thing. However, I'll leave it for you to decide whether you want to refactor or keep it as is.</p>\n\n<p>Here are my two solutions for this problem:</p>\n\n<h3>Function Overloads</h3>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">Function overloads</a> allow you to specify alternative method signatures in which we can specify the combinations of template and data interface:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function renderTemplate(template: './foo.template', data: FooData): string;\nfunction renderTemplate(template: './spam.template', data: SpamData): string;\nfunction renderTemplate(template: string, data: any): string {\n  return templateEngine.render(template, data);\n}\n\nrenderTemplate(\"./unknown.template\", {}); // error\nrenderTemplate(\"./foo.template\", { spam: 42 }); // error\nrenderTemplate(\"./foo.template\", { foo: 'bar' }); // no error\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgGIHt0BE5jsgbwChlkZMAuZAZzClAHMBuIgXyKNElkRQGUADnAC2OPIRI0hwqiACuwgEbQW7IjDkgEYYOhDIoEEABNoAFQjCBAG1wQAFJCu3IVAOQA6APTl0HpzZ2bgA0yMa4cFQY2BEAlFS09CDM6prauvqGJuaWgZCOuS4Q7t7U0v6FQaHheFSCImJw8TR0jCwaWjp6BkamUBbOdgWDri1JDNURVHAgAJ7NiYwSpIZgclD6AUUAosmgEB5ZfcN5EJN4saocRzkjDgBE3poA1iDoAO4gFXf3oQSsl2QXi8yGgUHQUCIN36lXyjx8mG+p1+hCkIioABYAEzIAFMIEgsEQqG9W6nezw3xIoooghkSjINyKOBQNy4wHA5BvUFQcFQIA\" rel=\"nofollow noreferrer\">Playground</a></p>\n\n<h3>Generics</h3>\n\n<p>Alternatively we can leverage generics and <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-1.html#keyof-and-lookup-types\" rel=\"nofollow noreferrer\">lookup types</a> to accomplish the same. It's a bit harder to read but less verbose than the function overloads.</p>\n\n<p>First we need some kind of mapping between the template names and data interfaces. For this we'll use a new interface: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface TemplateMap {\n  \"./foo.template\": FooData,\n  \"./spam.template\": SpamData\n}\n</code></pre>\n\n<p>Now for the function we add a generic parameter <code>T</code> for the <code>template</code> parameter which is constrained to be property name from <code>TemplateMap</code>. We do this by specifying <code>T extends keyof TemplateMap</code>. Lastly the <code>data</code> argument needs to match the corresponding type from <code>TemplateMap</code>. We'll retrieve this type with <code>TemplateMap[T]</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function renderTemplate&lt;T extends keyof TemplateMap&gt;(template: T, data: TemplateMap[T]): string {\n  return templateEngine.render(template, data);\n}\n\nrenderTemplate(\"./unknown.template\", {}); // error\nrenderTemplate(\"./foo.template\", { spam: 42 }); // error\nrenderTemplate(\"./foo.template\", { foo: 'bar' }); // no error\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgGIHt0BE5jsgbwChlkZMAuZAZzClAHMBuIgXyKNElkRQGUADnAC2OPIRI0hwqiACuwgEbQW7TuGjwkyACoRhAgDa4IAWTgCJpAEQA6APTl0tyAeORrVDNlxwANJJ29tTSLvpGJp7IgiJicGwcMHIgCGDA6CDIUBAgACbQem4mADw6yBAAHpB51MgA1hAAnugwuuHuZhYAfAAUrhGQVDp+yLm+Q+0m5gIA2joAugCUVLT0IAxWWRBgclCZ-R0AouugELbZedB9k5AjY3iLqhwX+VCFAxA9Qcl1IOgA7iAwkUPCMCKxHsh7PZylAoOgoEQXgUbp8gk5gR9rGCpCIqAAWABMyAhTChMOg8MRyLeqK+DgxB0iOKcVAA5Io4FA2STIdDkH9YVSgA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}, {"comments": [{"owner": {"reputation": 2091, "user_id": 884080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/5eBUg.jpg?s=128&g=1", "display_name": "Jon Lauridsen", "link": "https://stackoverflow.com/users/884080/jon-lauridsen"}, "edited": false, "score": 0, "creation_date": 1567710510, "post_id": 57794920, "comment_id": 102054607, "body": "I learned a lot from all the answers here, thank you all! This solution in particular appeals because <code>templateKindMap</code> allows for an option I didn&#39;t know I wanted: It&#39;s easy to create a new <code>kind</code> that maps to existing data but points to a different template path, allowing easy layout experiments."}], "tags": [], "owner": {"reputation": 734, "user_id": 7558480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7dcedfb2beba94fcc93370f644783?s=128&d=identicon&r=PG", "display_name": "Richard Haddad", "link": "https://stackoverflow.com/users/7558480/richard-haddad"}, "is_accepted": true, "score": 1, "last_activity_date": 1567626881, "last_edit_date": 1567626881, "creation_date": 1567626221, "answer_id": 57794920, "question_id": 57794453, "link": "https://stackoverflow.com/questions/57794453/use-an-argument-or-generic-to-constrain-type-of-another-argument/57794920#57794920", "title": "Use an argument or generic to constrain type of another argument?", "body": "<p>The difficulty in your case is that we have to pass the path of the template in the function, what is not really convenient (as showed @lukasgeiter).</p>\n\n<p>@jcalz proposed two good solutions, but be careful to some points:</p>\n\n<ul>\n<li><p>discriminated union is a sexy pattern, but not always usable. In this case it's in a data type, but imagine this data come from a server, the <code>kind</code> discrimate property may not be able to exist;</p></li>\n<li><p>string manipulations are not safe, I suggest to use a map <code>{ [K in Kind]: TemplatePath; }</code>. String concatenation are by definition type unsafe, you may have an error when you use a not ordinary path, and the debug may be longer. By using a map you centralize the possible bug sources to an only one constant, what is far more maintanable.</p></li>\n</ul>\n\n<p>My code suggestion:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface FooData {\n    foo: string;\n}\n\ninterface SpamData {\n    spam: number;\n}\n\ninterface TemplateMap {\n    foo: FooData;\n    spam: SpamData;\n}\n\ntype Kind = keyof TemplateMap;\n\nconst templateKindMap: Readonly&lt;{ [K in Kind]: string }&gt; = {\n    foo: './foo.template',\n    spam: './spam.template'\n};\n\nfunction render&lt;K extends Kind&gt;(kind: K, data: TemplateMap[K]): string {\n    return templateEngine.render(templateKindMap[kind], data);\n}\n\nrender('foo', {foo: ''});\nrender('spam', {spam: 0});\n</code></pre>\n\n<p>Hope it helps a little.</p>\n"}], "owner": {"reputation": 2091, "user_id": 884080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/5eBUg.jpg?s=128&g=1", "display_name": "Jon Lauridsen", "link": "https://stackoverflow.com/users/884080/jon-lauridsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57794920, "answer_count": 3, "score": 3, "last_activity_date": 1567626881, "creation_date": 1567623909, "question_id": 57794453, "link": "https://stackoverflow.com/questions/57794453/use-an-argument-or-generic-to-constrain-type-of-another-argument", "title": "Use an argument or generic to constrain type of another argument?", "body": "<p>I'd like to learn how to use generics more effectively, and so wanted to try to refactor a piece of code that is currently verbose and duplicated.</p>\n\n<p>Currently I have this:</p>\n\n<pre><code>interface FooData {\n  foo: string;\n}\n\nfunction renderFoo (data: FooData): string {\n  return templateEngine.render(\"./foo.template\", data)\n}\n\ninterface SpamData {\n  spam: number;\n}\n\nfunction renderSpam (data: SpamData): string {\n  return templateEngine.render(\"./spam.template\", data)\n}\n\n</code></pre>\n\n<p>The call to <code>templateEngine.render</code> naively combines template-path and data without type-checking, I'm looking to build type-safety on top of that.</p>\n\n<p>The above code works and does ensure that e.g. <code>spam.template</code> is only rendered with data of type <code>SpamData</code>, but the structure is verbose and duplicated. </p>\n\n<p>I think there might be a solution that offers a single function to call (e.g. <code>renderTemplate</code>) that has a signature that (somehow?) enforces the shape of <code>data</code> based on the chosen template. But I'm too new to types to understand what I'm asking or indeed how to do it.</p>\n\n<p>My question is: How might this be refactored? I'm also open for broad feedback if it sounds like I'm fundamentally barking up the wrong tree, your thoughts are appreciated.</p>\n"}, {"tags": ["typescript", "unit-testing", "jasmine"], "answers": [{"tags": [], "owner": {"reputation": 7080, "user_id": 796446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2keeB.jpg?s=128&g=1", "display_name": "E. Maggini", "link": "https://stackoverflow.com/users/796446/e-maggini"}, "is_accepted": true, "score": 0, "last_activity_date": 1567792686, "last_edit_date": 1567792686, "creation_date": 1567624047, "answer_id": 57794489, "question_id": 57794398, "link": "https://stackoverflow.com/questions/57794398/how-to-solve-suppress-intellij-warning-that-mock-class-is-not-declared-in-any-an/57794489#57794489", "title": "How to solve/suppress IntelliJ warning that mock class is not declared in any Angular module?", "body": "<p>Of course, once I spent all the time typing out this question, I then figure it out :)</p>\n\n<p>If anyone else hits this go to</p>\n\n<p>preferences > editor > inspections > Missing or invalid component, directive, or pipe.</p>\n\n<p>UPDATE: While the above is technically correct it still felt hacky as these inspections are put there for a reason.</p>\n\n<p><a href=\"https://stackblitz.com/edit/test-ngrx-store?file=src%2Ftest-helper%2Fmock-store.module.ts\" rel=\"nofollow noreferrer\">A better way to implement a testing library for re-use can be found here.</a></p>\n"}, {"tags": [], "owner": {"reputation": 12095, "user_id": 881250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8cbab33dc806c9305fef0664627b2d?s=128&d=identicon&r=PG", "display_name": "u\u0265\u0183n\u0250\u028cuop", "link": "https://stackoverflow.com/users/881250/u%c9%a5%c6%83n%c9%90%ca%8cuop"}, "is_accepted": false, "score": 1, "last_activity_date": 1612735388, "creation_date": 1612735388, "answer_id": 66093565, "question_id": 57794398, "link": "https://stackoverflow.com/questions/57794398/how-to-solve-suppress-intellij-warning-that-mock-class-is-not-declared-in-any-an/66093565#66093565", "title": "How to solve/suppress IntelliJ warning that mock class is not declared in any Angular module?", "body": "<p>While you are correct that you should not, as you mention in your answer, disable all inspections of this type for angular projects, it's definitely a valid use case to disable an inspection for a test mock.</p>\n<p>These warnings come from IDEA inspections (both IntelliJ and Webstorm).</p>\n<p><strong>To disable any inspection (for any type of project)</strong>:</p>\n<ol>\n<li>place cursor in the offending code (underlined)</li>\n<li>Alt-Enter</li>\n<li>select the inspection</li>\n<li>&quot;Suppress for class&quot;</li>\n</ol>\n<p>This will, in this case, add the annotation:</p>\n<pre><code>// noinspection AngularMissingOrInvalidDeclarationInModule\n</code></pre>\n"}], "owner": {"reputation": 7080, "user_id": 796446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2keeB.jpg?s=128&g=1", "display_name": "E. Maggini", "link": "https://stackoverflow.com/users/796446/e-maggini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 57794489, "answer_count": 2, "score": 2, "last_activity_date": 1612735388, "creation_date": 1567623653, "question_id": 57794398, "link": "https://stackoverflow.com/questions/57794398/how-to-solve-suppress-intellij-warning-that-mock-class-is-not-declared-in-any-an", "title": "How to solve/suppress IntelliJ warning that mock class is not declared in any Angular module?", "body": "<p>I have an angular 8 app where I am trying to mock some sub components.</p>\n\n<p>The mocking itself is fine. However for the sake of organization and re-usability, I want to move the mocks out of the .spec file and into its own mock directory as shown below</p>\n\n<pre><code>myApp\n|-- src\n    |-- app\n        |-- app.component.spec.ts\n    |-- mocks\n        |-- material\n            |-- mat-drawer-container.ts\n</code></pre>\n\n<p>The mock for MaterialDrawerContainer looks like this:</p>\n\n<pre><code>import {Component, Input} from '@angular/core';\n\n@Component({\n   selector: 'mat-drawer-container',\n   template: ''\n})\n\nexport class MockMatDrawerContainer {\n@Input() mode;\n}\n</code></pre>\n\n<p>The test itself still works as expected. But annoyingly, there's a big old red line underneath MockMatDrawerContainer complaining that \"MockMatDrawerContainer is not declared in any angular module\" even though it is used in the testbed configure test module like so: </p>\n\n<pre><code>TestBed.configureTestingModule(\n            {declarations: [MockMatDrawerContainer]}).compileComponents;\n</code></pre>\n\n<p>I have found the stackoverflow suggestions for \"Compile on changes\" and related changes to tsconfig.app.json for compileOnSave but nothing helps except to create a bogus ngModule in mock directory, which seems silly.</p>\n\n<p>Any words of wisdom?</p>\n"}, {"tags": ["typescript", "amazon-web-services", "aws-cdk"], "answers": [{"tags": [], "owner": {"reputation": 589, "user_id": 10918007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qtD8g.png?s=128&g=1", "display_name": "0x32e0edfb", "link": "https://stackoverflow.com/users/10918007/0x32e0edfb"}, "is_accepted": false, "score": 14, "last_activity_date": 1567885028, "creation_date": 1567885028, "answer_id": 57836921, "question_id": 57794267, "link": "https://stackoverflow.com/questions/57794267/is-it-possible-to-run-cdk-commands-from-an-iam-role/57836921#57836921", "title": "Is it possible to run cdk commands from an IAM role?", "body": "<p>It is possible. You just need to assume the role. Here's how you can do it:</p>\n\n<pre><code>#!/usr/bin/env bash\n\nexport ACCOUNT_ID=\"154438573167\"\nrole_arn=\"arn:aws:iam::${ACCOUNT_ID}:role/jenkins-deploy-role\"\n\nexport AWS_DEFAULT_REGION=\"us-east-2\"\nKST=($(aws sts assume-role --role-arn \"${role_arn}\" --role-session-name jenkins --query '[Credentials.AccessKeyId,Credentials.SecretAccessKey,Credentials.SessionToken]' --output text))\nunset AWS_SECURITY_TOKEN\nexport AWS_ACCESS_KEY_ID=${KST[0]}\nexport AWS_SECRET_ACCESS_KEY=${KST[1]}\nexport AWS_SESSION_TOKEN=${KST[2]}\nexport AWS_SECURITY_TOKEN=${KST[2]}\n\n# Now you have assumed the role and obtained temporary credentials.\ncdk bootstrap\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12021530, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R7MQVc6SxPU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaornpSAf_OoL4W-czH-Gwnh4mMg/photo.jpg?sz=128", "display_name": "Guillaume Bibeau-Laviolette", "link": "https://stackoverflow.com/users/12021530/guillaume-bibeau-laviolette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2882, "favorite_count": 4, "answer_count": 1, "score": 5, "last_activity_date": 1567885028, "creation_date": 1567622986, "question_id": 57794267, "link": "https://stackoverflow.com/questions/57794267/is-it-possible-to-run-cdk-commands-from-an-iam-role", "title": "Is it possible to run cdk commands from an IAM role?", "body": "<p>I am trying to deploy aws-cdk infrastructure as code from a jenkins pipeline but it requires aws credentials stored in <code>~/.aws/credentials</code>. </p>\n\n<p>The server running jenkins was provided with an IAM role with enough permissions to deploy any type of ressource. I have also tried passing env variables to provide it with the correct regions and account: <code>CDK_DEFAULT_ACCOUNT=XXX</code> <code>CDK_DEFAULT_REGION=us-east-2</code>. </p>\n\n<p>This is my current stage</p>\n\n<pre><code>        stage('Deploy test infrastructure') {\n          container(cdkDeployContainer.getName()) {\n            sh(\"npm install -g aws-cdk aws-cli\")\n            sh(\"cd test-infrastructure &amp;&amp; npm install &amp;&amp; CDK_DEFAULT_ACCOUNT=154438573167 CDK_DEFAULT_REGION=us-east-2 cdk bootstrap\")\n          }\n        }\n</code></pre>\n\n<p>I am receiving this error <code>Unable to determine default account and/or region</code> Is it possible to use a role IAM while using the CDK? what are the other alternatives to providing an IAM programatic access key?</p>\n"}, {"tags": ["typescript", "office-ui-fabric", "react-tsx"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567643653, "post_id": 57796245, "comment_id": 102027041, "body": "Thank you for your suggestion! I tried implementing it and ran into an error on the line const onItemChanged = React.useEffect(e =&gt; setOption(e.text), [setOption]); The error being argument of type (e:any)=&gt;void is not assignable to parameter of type &#39;EffectCallback&#39; . Does this mean i should be using the React.useCallback instead?"}, {"owner": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567706468, "post_id": 57796245, "comment_id": 102052990, "body": "thank you! This fixed the issue i was had but when i used React.useCallback i can also see a log of the current as well as the previous option selected from the dropdown. Does useCallback just store the previous value or should i be concerned if the right value is being passed ?"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567707221, "post_id": 57796245, "comment_id": 102053294, "body": "React hooks are a little funny in that they create closures over previous values; any value you need to reference inside the hook needs to be in the list passed as the second argument. Otherwise, you&#39;ll get a stale value from an older version of the hook. I recommend adding eslint-plugin-react-hooks to your eslint setup, which will help you catch referenced values that need to be added to the watch values list."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 0, "last_activity_date": 1567702738, "last_edit_date": 1567702738, "creation_date": 1567635192, "answer_id": 57796245, "question_id": 57794205, "link": "https://stackoverflow.com/questions/57794205/how-do-i-add-a-dropdown-to-useeffects/57796245#57796245", "title": "How do i add a dropdown to useEffects?", "body": "<p>Your <code>test</code> function isn't firing because you're not calling it; you have the bare token <code>test</code>, rather than the function invocation <code>test()</code>.</p>\n\n<p>Rather than wiring up your side effect handlers inside the event handler directly, though, use <code>useEffect</code> (which might better be called <code>useSideEffect</code>) and specify that you want it to fire when you alter your <code>selectedItem</code>:</p>\n\n<pre><code>// Whenever the value of selectedItem changes, fire this callback\n// selectedItem will change as a consequence of setOption() being called\nReact.useEffect(() =&gt; {\n    vscode.postMessage({\n        command: \"setOption\",\n        text: selectedItem\n    });\n}, [selectedItem])\n\n// Define a callback with a hook, so we don't generate a new\n// anonymous function every render\nconst onItemChanged = React.useCallback(e =&gt; setOption(e.text), [setOption]);\n\n&lt;Dropdown ... onChanged={onItemChanged} /&gt;\n</code></pre>\n\n<p>The second parameter to useEffect is a list of values to monitor. When this component re-renders, and the value of any of the listed items has changed, the defined function is invoked.</p>\n\n<p>By defining your callback function with useCallback, rather than as an anonymous function to be redefined every time your component is re-rendered, you'll avoid extra garbage generation and can easily keep your logical list of \"things to do when this changes\" together.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 7973496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zZXM-gK8EAk/AAAAAAAAAAI/AAAAAAAAAac/AmlldC3heZI/photo.jpg?sz=128", "display_name": "alparius", "link": "https://stackoverflow.com/users/7973496/alparius"}, "is_accepted": false, "score": 0, "last_activity_date": 1567635582, "creation_date": 1567635582, "answer_id": 57796282, "question_id": 57794205, "link": "https://stackoverflow.com/questions/57794205/how-do-i-add-a-dropdown-to-useeffects/57796282#57796282", "title": "How do i add a dropdown to useEffects?", "body": "<p>At the end of the useEffect declaration, there is that empty brackets you put there. That is where you need to put all the dependencies (=triggers) of the effect, like <code>selectedItem</code> in this case.</p>\n\n<p>Currently, the empty array tells it that it will never be triggered again.</p>\n"}], "owner": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 57796245, "answer_count": 2, "score": 0, "last_activity_date": 1567702738, "creation_date": 1567622758, "last_edit_date": 1567634657, "question_id": 57794205, "link": "https://stackoverflow.com/questions/57794205/how-do-i-add-a-dropdown-to-useeffects", "title": "How do i add a dropdown to useEffects?", "body": "<p>I am new to react and office-ui-fabric and have been having issues understanding how to add a dropdown to useEffect. The user selects options from the dropdown and i need useEffects to monitor the value selected to another user so that i can send the value selected to another function.</p>\n\n<pre><code>const options: IDropdownOption[] = [\n  { key: \"A\", text: \"A\", itemType: DropdownMenuItemType.Header },\n  { key: \"B\", text: \"B\" },\n  { key: \"C\", text: \"C\" }\n];\n\nconst [selectedItem, setOption] = React.useState(\"\");\n\nReact.useEffect(() =&gt; {\n  window.addEventListener(\"message\", ev =&gt; {\n    switch (ev.data.command) {\n      case \"selectedItem\": {\n        console.log(`Got message`);\n        setOption(ev.data.payload);\n        break;\n      }\n    }\n  });\n}, []);\n\nlet test = () =&gt; {\n  console.log(\"Test\");\n  vscode.postMessage({\n    command: \"setOption\",\n    text: \"select option\"\n  });\n  window.console.log(`Sent message.`);\n};\n\nreturn (\n  &lt;div&gt;\n    &lt;Stack&gt;\n      &lt;Stack.Item grow&gt;\n        &lt;Label style={{ color: \"white\" }}&gt;Select Option&lt;/Label&gt;\n        &lt;Dropdown\n          placeholder=\"Select option\"\n          options={options}\n          styles={dropdownStyles}\n          selectedKey={selectedItem}\n          onChanged={selectedOption =&gt; {\n            setOption(selectedOption.text);\n            console.log(selectedOption.text);\n            test;\n          }}\n        /&gt;\n      &lt;/Stack.Item&gt;\n    &lt;/Stack&gt;\n    `enter code here`\n  &lt;/div&gt;\n);\n</code></pre>\n\n<p>Currently i don't see the log \"Test\" inside test() or any of the logs \"Got message\" etc which means test is not getting triggered. Is this the right way ?or should i have an onClick like functionality for test ?</p>\n"}, {"tags": ["javascript", "typescript", "converters"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1567621604, "post_id": 57793927, "comment_id": 102021075, "body": "<a href=\"https://webpack.js.org/\" rel=\"nofollow noreferrer\">webpack</a>? Also, I would not really call the JavaScript module system &quot;new-ish&quot;, as ES6 is 4 years old."}, {"owner": {"reputation": 4813, "user_id": 1771994, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/92bb8a32559190ac0aa783c02c3c0299?s=128&d=identicon&r=PG&f=1", "display_name": "Tom O.", "link": "https://stackoverflow.com/users/1771994/tom-o"}, "edited": false, "score": 0, "creation_date": 1567621776, "post_id": 57793927, "comment_id": 102021155, "body": "Sounds like youre looking for a module bundler - webpack is a popular one: <a href=\"https://webpack.js.org/\" rel=\"nofollow noreferrer\">webpack.js.org</a>  - Given some entry point, it will create a dependency graph and bundle up all the modules you need."}, {"owner": {"reputation": 371, "user_id": 9916057, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v0ueoRc9sUo/AAAAAAAAAAI/AAAAAAAAIAI/O9m-riagmB4/photo.jpg?sz=128", "display_name": "Kris10an", "link": "https://stackoverflow.com/users/9916057/kris10an"}, "edited": false, "score": 0, "creation_date": 1567621926, "post_id": 57793927, "comment_id": 102021220, "body": "Thanks guys, i had completely forgotten about webpack."}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 9916057, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v0ueoRc9sUo/AAAAAAAAAAI/AAAAAAAAIAI/O9m-riagmB4/photo.jpg?sz=128", "display_name": "Kris10an", "link": "https://stackoverflow.com/users/9916057/kris10an"}, "is_accepted": false, "score": 0, "last_activity_date": 1567621983, "creation_date": 1567621983, "answer_id": 57794045, "question_id": 57793927, "link": "https://stackoverflow.com/questions/57793927/compiling-compressing-into-one-js-file/57794045#57794045", "title": "Compiling/compressing into one js file", "body": "<p>I can just use the module bundler <a href=\"https://webpack.js.org/\" rel=\"nofollow noreferrer\">webpack</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 9916057, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v0ueoRc9sUo/AAAAAAAAAAI/AAAAAAAAIAI/O9m-riagmB4/photo.jpg?sz=128", "display_name": "Kris10an", "link": "https://stackoverflow.com/users/9916057/kris10an"}, "edited": false, "score": 0, "creation_date": 1567622216, "post_id": 57794084, "comment_id": 102021350, "body": "Yeah, but then id have to use system"}, {"owner": {"reputation": 54, "user_id": 11102521, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xM5p1ZEopqY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxREIEudsJ0eq6bkW7sj4-Ys9xIw/mo/photo.jpg?sz=128", "display_name": "w41t3ra661t", "link": "https://stackoverflow.com/users/11102521/w41t3ra661t"}, "reply_to_user": {"reputation": 371, "user_id": 9916057, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v0ueoRc9sUo/AAAAAAAAAAI/AAAAAAAAIAI/O9m-riagmB4/photo.jpg?sz=128", "display_name": "Kris10an", "link": "https://stackoverflow.com/users/9916057/kris10an"}, "edited": false, "score": 0, "creation_date": 1567622277, "post_id": 57794084, "comment_id": 102021376, "body": "I see, sorry! I think the bundler is what you want."}], "tags": [], "owner": {"reputation": 54, "user_id": 11102521, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xM5p1ZEopqY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxREIEudsJ0eq6bkW7sj4-Ys9xIw/mo/photo.jpg?sz=128", "display_name": "w41t3ra661t", "link": "https://stackoverflow.com/users/11102521/w41t3ra661t"}, "is_accepted": false, "score": 1, "last_activity_date": 1567622155, "creation_date": 1567622155, "answer_id": 57794084, "question_id": 57793927, "link": "https://stackoverflow.com/questions/57793927/compiling-compressing-into-one-js-file/57794084#57794084", "title": "Compiling/compressing into one js file", "body": "<p>outFile will concatenate the output. </p>\n\n<pre><code>{\n  \"compilerOptions\": {\n      \"module\": \"System\"\n      \"outFile\": \"&lt;file/location&gt;\",\n      ...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 9916057, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v0ueoRc9sUo/AAAAAAAAAAI/AAAAAAAAIAI/O9m-riagmB4/photo.jpg?sz=128", "display_name": "Kris10an", "link": "https://stackoverflow.com/users/9916057/kris10an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567622155, "creation_date": 1567621391, "question_id": 57793927, "link": "https://stackoverflow.com/questions/57793927/compiling-compressing-into-one-js-file", "title": "Compiling/compressing into one js file", "body": "<p>I have a typescript project that compiles into javascript and runs in the browser. It utilizes the new-ish module system in javascript, and the files are in a hierarchy split into different folders. Are there any ways to convert my typescript files into just one javascript file (i would prefer not to use amd or system), or compress my converted javascript files into a single file? I cant just paste everything into a file as the code is split into modules, files and folders.</p>\n"}, {"tags": ["node.js", "typescript", "azure", "azure-functions", "azureservicebus"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 6905597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61d160f7448c27be3641e21e2736fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin McCann", "link": "https://stackoverflow.com/users/6905597/kevin-mccann"}, "edited": false, "score": 0, "creation_date": 1567686965, "post_id": 57800290, "comment_id": 102042904, "body": "could you expand on &quot;set the client static&quot; with respect to azure functions?"}], "tags": [], "owner": {"reputation": 10991, "user_id": 11099213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd445ec11abfc3894b44be6b8d6dfaee?s=128&d=identicon&r=PG&f=1", "display_name": "Hury Shen", "link": "https://stackoverflow.com/users/11099213/hury-shen"}, "is_accepted": false, "score": 0, "last_activity_date": 1567668367, "last_edit_date": 1567668367, "creation_date": 1567667916, "answer_id": 57800290, "question_id": 57793795, "link": "https://stackoverflow.com/questions/57793795/how-should-one-properly-handle-opening-and-closing-of-azure-service-bus-topic-cl/57800290#57800290", "title": "How should one properly handle opening and closing of Azure Service Bus/Topic Clients in an Azure Function?", "body": "<p>In my opinion, we'd better use Azure binding or set the client static but not create the client every time. If use Azure binding, we will not consider the problem about close the sender, if set the client static, it's ok too. Both of the solutions have good performance and there is no difference in cost (you can refer to this tutorial for servicebus price: <a href=\"https://azure.microsoft.com/en-us/pricing/details/service-bus/\" rel=\"nofollow noreferrer\">https://azure.microsoft.com/en-us/pricing/details/service-bus/</a>) between these twos. Hope it would be helpful to your question.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4137356, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006229608740/picture?type=large", "display_name": "Harsha Nalluru", "link": "https://stackoverflow.com/users/4137356/harsha-nalluru"}, "is_accepted": false, "score": 0, "last_activity_date": 1607942475, "creation_date": 1607942475, "answer_id": 65287528, "question_id": 57793795, "link": "https://stackoverflow.com/questions/57793795/how-should-one-properly-handle-opening-and-closing-of-azure-service-bus-topic-cl/65287528#65287528", "title": "How should one properly handle opening and closing of Azure Service Bus/Topic Clients in an Azure Function?", "body": "<p>I know this is a late reply, but I'll try to explain the concepts behind the clients below in case someone lands here looking for answers.</p>\n<h3>Version 1</h3>\n<pre><code>_ ServiceBusClient (maintains the connection)\n  |_ TopicClient\n     |_ Sender (sender link)\n</code></pre>\n<h3>Version 7</h3>\n<pre><code>_ ServiceBusClient (maintains the connection)\n  |_ ServiceBusSender (sender link)\n</code></pre>\n<p>In both version 1 and version 7 of <code>@azure/service-bus</code> SDK, when you use the <code>sendMessages</code> method or the equivalent <code>send</code> method for the first time, a connection is created on the <code>ServiceBusClient</code> if there was none and the new sender link is created.</p>\n<p>The sender link remains active for a while and is cleared on its own(by the SDK) if there is no activity. Even if it is closed by inactivity, the subsequent send call even after waiting for a long duration would work just fine since it creates a new sender link.</p>\n<p>Once you're done using the <code>ServiceBusClient</code>, you can close the client and all the internal senders, receivers are also closed with this if they are not already closed individually.</p>\n<p>The latest version 7.0.0 of <code>@azure/service-bus</code> has been released recently.</p>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/@azure/service-bus\" rel=\"nofollow noreferrer\">@azure/service-bus - 7.0.0</a></li>\n<li><a href=\"https://github.com/Azure/azure-sdk-for-js/tree/master/sdk/servicebus/service-bus/samples\" rel=\"nofollow noreferrer\">Samples for 7.0.0</a></li>\n<li><a href=\"https://github.com/Azure/azure-sdk-for-js/blob/master/sdk/servicebus/service-bus/migrationguide.md\" rel=\"nofollow noreferrer\">Guide to migrate from @azure/service-bus v1 to v7</a></li>\n</ul>\n"}], "owner": {"reputation": 387, "user_id": 6905597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61d160f7448c27be3641e21e2736fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin McCann", "link": "https://stackoverflow.com/users/6905597/kevin-mccann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1607942475, "creation_date": 1567620757, "last_edit_date": 1567686909, "question_id": 57793795, "link": "https://stackoverflow.com/questions/57793795/how-should-one-properly-handle-opening-and-closing-of-azure-service-bus-topic-cl", "title": "How should one properly handle opening and closing of Azure Service Bus/Topic Clients in an Azure Function?", "body": "<p>I'm not sure of the proper way to manage the lifespans of the various clients necessary to interact with the Azure Service Bus. From my understanding there are three different but similar clients to manage: ServiceBusClient, a Topic/Queue/Subscription Service, and then a Sender of some sort. In my case, its TopicService and a Sender. Should I close the sender after every message? After a certain amount of downtime? And same with all the others? I feel like I should keep the ServiceBusClient open until the function is entirely complete, so that probably carries over to the Topic Client as well. There's just so many ways to skin this one, I'm not sure where to start to draw the line. I'm pretty sure it's not this extreme: </p>\n\n<pre><code>function sendMessage(message: SendableMessageInfo) {\n    let client=createServiceBusClientFromConnectionString(connectionString)\n    let tClient = createTopicClient(client);\n    const sender = tClient.createSender();\n    sender.send(message);\n    sender.close();\n    tClient.close();\n    client.close();\n}\n</code></pre>\n\n<p>But leaving everything open all the time seems like a memory leak waiting to happen. Should I handle this all through error handling? Try-catch, then close everything in a finally block?</p>\n\n<p>I could also just use the Azure Function binding, correct me if I'm wrong:</p>\n\n<pre><code>const productChanges: AzureFunction = async function (context: Context, products: product[]): Promise&lt;void&gt; {\n    context.bindings.product_changes = []\n    for (let product of product) {\n        if(product.updated) {\n            let message = this.createMessage(product)\n            context.bindings.product_changes.push(message)\n        }\n    }\n    context.done();\n}\n</code></pre>\n\n<p>I can't work out from the docs or source which would be better (both in terms of performance and finances) for an extremely high throughput Topic (at surge, ~100,000 requests/sec).</p>\n\n<p>Any advice would be appreciated!</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "angular-changedetection"], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567673465, "post_id": 57793604, "comment_id": 102035444, "body": "Ok, but how can I understand if the button clicked is coming from the first or the second or the third <code>app-simple-selection</code>? For every one of them, the subscription has to do different actions..."}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "reply_to_user": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567679138, "post_id": 57793604, "comment_id": 102038492, "body": "@Ferie - Pass what you need in <code>selectedItemChanged$.next(item);</code>. You could extend the argument as <code>{ item: any, sender: any}</code> and then do <code>selectedItemChanged$.next({item: item, sender: someIdentifier });</code>"}, {"owner": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567696055, "post_id": 57793604, "comment_id": 102048300, "body": "For some reason I am not able to make it work: <a href=\"https://stackblitz.com/edit/angular-tbqgpo\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-tbqgpo</a> @Igor"}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "reply_to_user": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567696675, "post_id": 57793604, "comment_id": 102048652, "body": "@Ferie - What do you mean by not work? I checked your stackblitz, only thing I can see wrong is that the first emit is a <code>null</code> value but you can check for that in the subscribe (or you can catch it at the emit). after that i see the sender information along with the item when clicking on a product."}, {"owner": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567697243, "post_id": 57793604, "comment_id": 102048979, "body": "The subscriber is not working: it is not working in the parent component (Product). I am expecting to see the data from  <code>console.log(&#39;this.data indide Product&#39;, this.data);</code> so when the value changes, I can start another function to do stuff, but it is not working. @Igor"}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "reply_to_user": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567697482, "post_id": 57793604, "comment_id": 102049108, "body": "@Ferie - I am not seeing what you are I guess because your stackblitz works the way I expect it to. See image with the console output, is this not correct? <a href=\"https://i.stack.imgur.com/TjqY6.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/TjqY6.png</a>"}, {"owner": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "reply_to_user": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1567697592, "post_id": 57793604, "comment_id": 102049159, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/199027/discussion-between-ferie-and-igor\">continue this discussion in chat</a>."}, {"owner": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567698165, "post_id": 57793604, "comment_id": 102049453, "body": "Please open the Product component, there is another console log. In there, I am expecting another console log every time there is a change in the value, so another one after the one that you are quoting. @Igor"}], "tags": [], "owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "is_accepted": false, "score": 0, "last_activity_date": 1567623015, "last_edit_date": 1567623015, "creation_date": 1567619743, "answer_id": 57793604, "question_id": 57793502, "link": "https://stackoverflow.com/questions/57793502/how-to-inject-the-same-service-multiple-time-in-an-angular-application-and-keep/57793604#57793604", "title": "How to inject the same service multiple time in an Angular application and keep track of it in the parent component?", "body": "<p>If you want to track the changes in the parent component just inject the service 1x and subscribe to the <a href=\"https://rxjs-dev.firebaseapp.com/api/index/class/Subject\" rel=\"nofollow noreferrer\">Subject</a> using <a href=\"https://rxjs-dev.firebaseapp.com/api/index/class/Subject\" rel=\"nofollow noreferrer\"><code>asObservable</code></a></p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { SimpleSelectionService } from './simple-selection.service';\n\n@Component({\n    selector: 'app-parent-selection',\n    providers: [SimpleSelectionService],\n})\nexport class ParentComponent implements OnInit {\n    constructor(private readonly simpleSelectionService: SimpleSelectionService) { }\n\n    ngOnInit() {\n        this.simpleSelectionService.selectedItemChanged$\n            .asObservable()\n            .subcribe(item =&gt; {/* do something */});\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Note that because you are already decorating the service with <code>@Injectable({ providedIn: 'root' })</code> the service is already a <a href=\"https://angular.io/guide/singleton-services#using-providedin\" rel=\"nofollow noreferrer\">singleton</a> in your application and there will only ever be one instance created by the angular dependency injection framework.</p>\n"}, {"comments": [{"owner": {"reputation": 54, "user_id": 11102521, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xM5p1ZEopqY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxREIEudsJ0eq6bkW7sj4-Ys9xIw/mo/photo.jpg?sz=128", "display_name": "w41t3ra661t", "link": "https://stackoverflow.com/users/11102521/w41t3ra661t"}, "reply_to_user": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "edited": false, "score": 0, "creation_date": 1567704102, "post_id": 57794178, "comment_id": 102052050, "body": "@Ferie I see now. Your children probably shouldn&#39;t be instantiating services at all. A more familiar pattern is to pass state from parent to child, which would solve your problem. Or have all objects share the same instance of your state."}], "tags": [], "owner": {"reputation": 54, "user_id": 11102521, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xM5p1ZEopqY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxREIEudsJ0eq6bkW7sj4-Ys9xIw/mo/photo.jpg?sz=128", "display_name": "w41t3ra661t", "link": "https://stackoverflow.com/users/11102521/w41t3ra661t"}, "is_accepted": false, "score": 0, "last_activity_date": 1567622665, "last_edit_date": 1592644375, "creation_date": 1567622665, "answer_id": 57794178, "question_id": 57793502, "link": "https://stackoverflow.com/questions/57793502/how-to-inject-the-same-service-multiple-time-in-an-angular-application-and-keep/57794178#57794178", "title": "How to inject the same service multiple time in an Angular application and keep track of it in the parent component?", "body": "<p>I think you want a singleton.</p>\n<blockquote>\n<p>Singleton services</p>\n<p>A singleton service is a service for which only one instance exists in an app.</p>\n<p>For a sample app using the app-wide singleton service that this page describes, see the live example / download example showcasing all the documented features of NgModules.\nProviding a singleton service</p>\n<p>There are two ways to make a service a singleton in Angular:</p>\n<ol>\n<li><p>Declare root for the value of the @Injectable() providedIn property</p>\n</li>\n<li><p>Include the service in the AppModule or in a module that is only imported by the AppModule</p>\n</li>\n</ol>\n</blockquote>\n<p><a href=\"https://angular.io/guide/singleton-services\" rel=\"nofollow noreferrer\">https://angular.io/guide/singleton-services</a></p>\n"}], "owner": {"reputation": 934, "user_id": 2275011, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/QrAL6.jpg?s=128&g=1", "display_name": "Ferie", "link": "https://stackoverflow.com/users/2275011/ferie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567696208, "creation_date": 1567619322, "last_edit_date": 1567696208, "question_id": 57793502, "link": "https://stackoverflow.com/questions/57793502/how-to-inject-the-same-service-multiple-time-in-an-angular-application-and-keep", "title": "How to inject the same service multiple time in an Angular application and keep track of it in the parent component?", "body": "<p>I have a situation where there are multiple selections created by this component (they are sort of radio buttons, but they are not)</p>\n\n<p>Here the <strong>component</strong>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { SimpleSelectionService } from './simple-selection.service';\n\n@Component({\n    selector: 'app-simple-selection',\n    templateUrl: './simple-selection.component.html',\n    styleUrls: ['./simple-selection.component.scss'],\n    providers: [SimpleSelectionService],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SimpleSelectionComponent {\n    @Input() public items: Array&lt;any&gt; = [];\n    @Input() public selectedItem: any;\n    @Input() public key: string = 'value';\n    @Input() public disabled: boolean = false;\n    @Input() public noWrap: boolean = false;\n\n    constructor(public simpleSelectionService: SimpleSelectionService) { }\n\n    public selectItem(item: any) {\n        if (!this.disabled) {\n            this.selectedItem = item[this.key];\n            this.simpleSelectionService.selectedItemChanged$.next(item);\n        }\n    }\n}\n</code></pre>\n\n<p>And here the <strong>template</strong>:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div [ngClass]=\"{ 'is-disabled': disabled }\"&gt;\n    &lt;div class=\"button-group\" [ngClass]=\"{ 'no-wrap': noWrap }\"&gt;\n        &lt;ng-container *ngFor=\"let item of items; let i = index\"&gt;\n            &lt;span\n                class=\"button button__select-group\"\n                [innerHtml]=\"item[key]\"\n                [ngClass]=\"{ 'is-selected': item[key] === selectedItem }\"\n                (click)=\"selectItem(item)\"\n            &gt;&lt;/span&gt;\n        &lt;/ng-container&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The <strong>service</strong> provided in the component is this very simple one:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({ providedIn: 'root' })\nexport class SimpleSelectionService {\n    public get selectedItemChanged$() {\n        return this._selectedItemChanged;\n    }\n    private _selectedItemChanged = new Subject();\n}\n</code></pre>\n\n<p>Now the parent component has many instances of <code>app-simple-selection</code> and every time one of those selection is clicked, the other selections can change the availability and or the the values passed in as inputs.</p>\n\n<p><strong>Parent component</strong>:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;app-simple-selection\n    id=\"analytics-capacity\"\n    [selectedItem]=\"selectedCapacity\"\n    [items]=\"availableCapacities\"\n    [disabled]=\"capacitySelectionDisabled\"\n    [noWrap]=\"true\"\n&gt;&lt;/app-simple-selection&gt;\n\n&lt;app-simple-selection\n    id=\"analytics-colors\"\n    [selectedItem]=\"selectedColors\"\n    [items]=\"availableColors\"\n    [noWrap]=\"true\"\n&gt;&lt;/app-simple-selection&gt;\n\n&lt;app-simple-selection\n    id=\"analytics-upfront-cost\"\n    [selectedItem]=\"selectedUpfrontCost\"\n    [items]=\"availableUpfrontCosts\"\n    [disabled]=\"upFrontCostSelectionDisabled\"\n    [noWrap]=\"true\"\n&gt;&lt;/app-simple-selection&gt;\n</code></pre>\n\n<p>Now in my mind is the parent component that needs to subscribe for each one of those selection to the service, so the service needs to be injected in 3 different instances.</p>\n\n<p>And here the question: how to do that?</p>\n\n<p>And by the way is this the correct way on how to implement something like that?</p>\n\n<hr>\n\n<p>EDIT: added <a href=\"https://stackblitz.com/edit/angular-tbqgpo\" rel=\"nofollow noreferrer\">Stackblitz example</a></p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-reactive-forms"], "comments": [{"owner": {"reputation": 1547, "user_id": 4321097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ec5b7a910b8bc9589ecae6cce4f6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Taleck", "link": "https://stackoverflow.com/users/4321097/christopher-taleck"}, "edited": false, "score": 0, "creation_date": 1567618619, "post_id": 57793278, "comment_id": 102019878, "body": "Can you explain &quot;But now I got a problem with an element (&lt;span id=&quot;locationUpdated&quot;&gt;) that the value inside of it is being changed by the result of some other javascript functions.&quot; in more detail?"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 1, "creation_date": 1567620864, "post_id": 57793278, "comment_id": 102020769, "body": "I suggest you take a thorough read of the documentation, since first of all you shouldn&#39;t use ngModel with reactive forms, secondly do not use <code>value</code> with reactive forms. DOCS: <a href=\"https://angular.io/guide/reactive-forms\" rel=\"nofollow noreferrer\">angular.io/guide/reactive-forms</a>"}, {"owner": {"reputation": 632, "user_id": 4252577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b87ab68bbd900df8fadd1e62d3772b45?s=128&d=identicon&r=PG&f=1", "display_name": "seBaka28", "link": "https://stackoverflow.com/users/4252577/sebaka28"}, "edited": false, "score": 3, "creation_date": 1567622575, "post_id": 57793278, "comment_id": 102021496, "body": "To get input value changes in reactive forms you can just subscribe to <code>FormControl.valueChanges</code>"}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 3, "creation_date": 1567632778, "post_id": 57793278, "comment_id": 102024906, "body": "NEVER,NEVER,NEVER use [(ngModel)] together formControlName."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 1579468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984cf6ae2f03c3900a14d42941197d62?s=128&d=identicon&r=PG", "display_name": "Adithya Prabhu", "link": "https://stackoverflow.com/users/1579468/adithya-prabhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1567658171, "creation_date": 1567658171, "answer_id": 57798505, "question_id": 57793278, "link": "https://stackoverflow.com/questions/57793278/angular7-detect-change-of-input-value-in-reactive-forms/57798505#57798505", "title": "Angular7 Detect change of input value in reactive forms", "body": "<blockquote>\n  <p>What am I missing?</p>\n</blockquote>\n\n<p>The dirty flag is not set to true when the data is changed programatically. \nIt is set to true only if the user blurs the control component, or changes the value (through the UI)</p>\n\n<p>Please ref official docs - <a href=\"https://angular.io/guide/form-validation#why-check-dirty-and-touched\" rel=\"nofollow noreferrer\">https://angular.io/guide/form-validation#why-check-dirty-and-touched</a></p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3804307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0a4c2ea9f0cd4fd6306512019d6b87?s=128&d=identicon&r=PG&f=1", "display_name": "bl2b", "link": "https://stackoverflow.com/users/3804307/bl2b"}, "is_accepted": false, "score": 0, "last_activity_date": 1572356568, "creation_date": 1572356568, "answer_id": 58608631, "question_id": 57793278, "link": "https://stackoverflow.com/questions/57793278/angular7-detect-change-of-input-value-in-reactive-forms/58608631#58608631", "title": "Angular7 Detect change of input value in reactive forms", "body": "<p>you can explicit marks the control as dirty by doing this after your logic\nthis.model.form.markAsDirty();</p>\n"}], "owner": {"reputation": 668, "user_id": 794035, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e340e9bba614f92b51de6044540e4eb2?s=128&d=identicon&r=PG", "display_name": "saomi", "link": "https://stackoverflow.com/users/794035/saomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3158, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572356568, "creation_date": 1567618227, "question_id": 57793278, "link": "https://stackoverflow.com/questions/57793278/angular7-detect-change-of-input-value-in-reactive-forms", "title": "Angular7 Detect change of input value in reactive forms", "body": "<p>I am working for the first time with reactive forms in Angular(v7)</p>\n\n<p>I want to make my submit button enabled if any of the fields has changed. So I am working with the <code>dirty</code> value of the form.\nFor a simple scenarios its working. I change a input type text and the button became enable.</p>\n\n<p>But now I got a problem with an element (<code>&lt;span id=\"locationUpdated\"&gt;</code>) that the value inside of it is being changed by the result of some other javascript functions. </p>\n\n<p>So I decided to listening the change of an <code>hidden</code> input that get the value the same way as the <code>span</code> element</p>\n\n<pre><code>    &lt;form [formGroup]=\"model.form\" &gt;\n        ....\n        &lt;input id=\"nameInput\" type=\"text\"\n            [(ngModel)]=\"model.user.name\"\n            formControlName=\"name\" /&gt;           \n        ...\n        &lt;span [textContent]=\"model.user.location.label\" id=\"locationUpdated\"&gt;&lt;/span&gt;    \n\n        &lt;input type=\"hidden\" [value]=\"model.user.location.label\" formControlName=\"location\" /&gt;\n        ....        \n        &lt;button [ngClass]=\"{'disabled': !model.form.dirty}&gt;&lt;/button&gt;\n\n    &lt;/form&gt;\n</code></pre>\n\n<p>--- Component --- </p>\n\n<pre><code>private buildFormUpdated() {\n    this.model.form = this.formBuilder.group({\n        name: [this.model.user.name,  [Validators.required]],\n        location: [this.model.user.location.label]\n    });\n}\n</code></pre>\n\n<p>I replace the <code>hidden</code> to <code>text</code> so I can see the value change and it is working fine.</p>\n\n<p>However the property <code>dirty</code> continues <code>false</code>. If I change manually I get the <code>dirty:true</code></p>\n\n<p>What am I missing?\nThanks </p>\n"}, {"tags": ["angular", "typescript", "types", "complex-data-types"], "comments": [{"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 0, "creation_date": 1567617050, "post_id": 57792840, "comment_id": 102019251, "body": "<code>[key: string]: ButtonConfig | TxtBoxConfig | FolderConfig ;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4430, "user_id": 2690790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/810ebc2ef00faac83286d2bb892f38cd?s=128&d=identicon&r=PG", "display_name": "skovy", "link": "https://stackoverflow.com/users/2690790/skovy"}, "is_accepted": true, "score": 2, "last_activity_date": 1567616303, "creation_date": 1567616303, "answer_id": 57792870, "question_id": 57792840, "link": "https://stackoverflow.com/questions/57792840/interface-whose-properties-are-of-types-a-and-b-only-in-typescript/57792870#57792870", "title": "Interface whose properties are of types A and B only in TypeScript?", "body": "<p>Have you tried to use a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types\" rel=\"nofollow noreferrer\">union type</a>?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface ButtonConfig {\n  a: string;\n}\ninterface FolderConfigs {\n  b: number;\n}\ninterface TxtBoxConfigs {\n  c: boolean;\n}\n\nexport interface Configs {\n  [key: string]: ButtonConfig | FolderConfigs | TxtBoxConfigs;\n}\n\nconst config: Configs = {\n  buttonConfig: {\n    a: \"testing\"\n  },\n  folderConfig: {\n    b: 1 \n  },\n  textConfig: {\n    c: true \n  },\n  anotherConfig: { // error: Type 'number' is not assignable to type 'string'.\n    a: 1\n  },\n  moreConfig: {\n    d: \"test\" // error: Object literal may only specify known properties, and 'd' does not exist in type 'ButtonConfig | FolderConfigs | TxtBoxConfigs'.\n  }\n}\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgEIFcxgPYgMK4zADmyA3gFDLJwBcyAzmFKMQNwUC+FoksiKAGLYANgBNoBEEWINyVZACN6IdAFtF0Dt17R4SZABUAHmFTZjUmXMrUE9RdlEQ4IbRQoRjAB2xQwyLr8BlYkNgoA2gDWEACe9EwsIMQAuvQYWLihpAA+yMLikoRhyHkmZhbZDO4UCLhMyHXSJPRVyAC88tSKmDj4xcT0ttQ09ABEkEysYwqcADQKMKISUNlDCt30AIzIswvUkKZrXSP2yMzoKHsKrthgABZFzYPkyAD0b8jQUH70hrHeFAAclUGmgQMCchAdxoDAYJBAcEUIhQOHOAOBiVYQIAdBtRsgttdqGo-BBjsNqGJxpMwGN3p9vr9kAB5RQAKwgCACImAfDgImQajgsWQuBEooYgIQwBgoqi0IA7iBkN4foD-MAIAw5jQQGJkECxBCxNhtchoQEvMAGqB0YDDRk+tlSvllk9rK7yuZLAMGLjZlwgA\" rel=\"nofollow noreferrer\">Here is the playground example</a></p>\n"}], "owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 57792870, "answer_count": 1, "score": 0, "last_activity_date": 1567616303, "creation_date": 1567616162, "question_id": 57792840, "link": "https://stackoverflow.com/questions/57792840/interface-whose-properties-are-of-types-a-and-b-only-in-typescript", "title": "Interface whose properties are of types A and B only in TypeScript?", "body": "<p>I've created a holder for my configs with type <code>ButtonConfigs</code> like this (as suggested <a href=\"https://stackoverflow.com/a/57787976/8744999\">in this answer</a>).</p>\n\n<pre><code>export interface ButtonConfigs {\n  [key: string]: ButtonConfig;\n}\n</code></pre>\n\n<p>The I continued with other components' configs as well so that every type has its own config property in the component.</p>\n\n<pre><code>...\nbuttonConfigs: ButtonConfigs = {};\nfolderConfigs: FolderConfigs = {};\ntxtBoxConfigs: TxtBoxConfigs = {};\n...\n</code></pre>\n\n<p>Then it hit me that I should be able to aggregate all the configs to a common property. It really makes sense in my case, too.</p>\n\n<p>However, I'm not sure if I can change the interface in such a way that it allows for different types, still restricting the contents of the <code>configs</code> not to be <code>any</code>. My current approach is poorly designed.</p>\n\n<pre><code>export interface Configs {\n  [key: string]: any;\n}\n</code></pre>\n\n<p>How can I tell TypeScript that the type of the field should be <code>TextBoxConfig</code>, <code>ButtonConfig</code> or <code>FolderConfig</code> but nothing else?</p>\n"}, {"tags": ["javascript", "typescript", "lodash"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 1, "creation_date": 1567617297, "post_id": 57792434, "comment_id": 102019364, "body": "I would use <a href=\"https://www.npmjs.com/package/JSONPath\" rel=\"nofollow noreferrer\">JsonPath</a> to access the nodes I need, then a plain <code>.filter</code> + <code>.map</code> to update them in-place."}, {"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1567618926, "post_id": 57792434, "comment_id": 102019986, "body": "ok will check this. had never heard of this."}], "answers": [{"comments": [{"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 0, "creation_date": 1567615642, "post_id": 57792695, "comment_id": 102018672, "body": "it is more than one level. how do I deal with that?"}, {"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 1, "creation_date": 1567615984, "post_id": 57792695, "comment_id": 102018818, "body": "this solution will only replace of first level. it will not replace data of children even if id matches. I haven&#39;t voted negative. :)"}, {"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 0, "creation_date": 1567619067, "post_id": 57792695, "comment_id": 102020051, "body": "is this copy pasted from some place. i m not able to understand what it is"}, {"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 0, "creation_date": 1567699534, "post_id": 57792695, "comment_id": 102050162, "body": "ya, I got it. but i am still not getting what is filed1:  filed2Updated,           filed2:  filed2Updated,        ....  but, no worries buddy. I got the answer."}], "tags": [], "owner": {"reputation": 925, "user_id": 5330655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emJfl.png?s=128&g=1", "display_name": "Rebai Ahmed", "link": "https://stackoverflow.com/users/5330655/rebai-ahmed"}, "is_accepted": false, "score": -1, "last_activity_date": 1567672019, "last_edit_date": 1567672019, "creation_date": 1567615481, "answer_id": 57792695, "question_id": 57792434, "link": "https://stackoverflow.com/questions/57792434/update-value-of-nested-objects-using-lodash/57792695#57792695", "title": "Update value of nested objects using lodash", "body": "<p>You can try with native API javascript   </p>\n\n<pre><code>/*yourList.filter(elem =&gt; elem.id == yourId)\n            .map(elem.text = \"your new text\" )*/\n\n//---New Soluition for many fileds \nnewList = yourList.filter(function(obj) {\n\n    return obj.id ='yourid'; \n\n}).map(function(doctor) {\n\n    return { // return what new object will look like\n\n        filed1:  filed2Updated,\n\n         filed2:  filed2Updated,\n\n      ....\n\n    };\n\n}); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 0, "creation_date": 1567619980, "post_id": 57793530, "comment_id": 102020390, "body": "awesome. i also didnt want to use lodash. but i didnt know this great way. writing update in a foreach is a sort of new thing for me to know. nice stuff."}, {"owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 0, "creation_date": 1567620584, "post_id": 57793530, "comment_id": 102020659, "body": "wow. double arrow functions they are called (or multi arrow). learnt great thing today. totally new to me."}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "reply_to_user": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "edited": false, "score": 1, "creation_date": 1567623064, "post_id": 57793530, "comment_id": 102021663, "body": "@AnonymousCreator: this is a &quot;higher order function&quot;, very handy to avoid writing <code>.map(x =&gt; func(x, ....))</code> each time."}], "tags": [], "owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "is_accepted": true, "score": 4, "last_activity_date": 1567622998, "last_edit_date": 1567622998, "creation_date": 1567619448, "answer_id": 57793530, "question_id": 57792434, "link": "https://stackoverflow.com/questions/57792434/update-value-of-nested-objects-using-lodash/57793530#57793530", "title": "Update value of nested objects using lodash", "body": "<p>I'm personally a big fan of lodash, but there's really no need for it here:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>data = [{\r\n    id: 1,\r\n    text: 'one',\r\n    children: [{\r\n        id: 1.1,\r\n        text: 'one point one',\r\n        children: [\r\n            {id: 123, text: 'blah'}\r\n        ]\r\n    }]\r\n}, {\r\n    id: 66,\r\n    children: [\r\n        {id: 123, text: 'blah'}\r\n    ]\r\n}];\r\n\r\n\r\nlet update = (id, text) =&gt; obj =&gt; {\r\n    if (obj.id === id)\r\n        obj.text = text;\r\n    else if (obj.children)\r\n        obj.children.forEach(update(id, text));\r\n};\r\n\r\ndata.forEach(update(123, 'hello'));\r\n\r\nconsole.log(data);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>As pointed out in another answer, this iterates the whole tree and replaces all found ids. If you'd like to exit early and replace only the first id, the function can be adapted like this:</p>\n\n<pre><code>let update = (id, text) =&gt; obj =&gt; {\n    if (obj.id === id) {\n        obj.text = text;\n        return true;\n    }\n    else if (obj.children)\n        return obj.children.some(update(id, text));\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 6837070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL8Kt.png?s=128&g=1", "display_name": "Niko Chaffin", "link": "https://stackoverflow.com/users/6837070/niko-chaffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1567622439, "creation_date": 1567622439, "answer_id": 57794135, "question_id": 57792434, "link": "https://stackoverflow.com/questions/57792434/update-value-of-nested-objects-using-lodash/57794135#57794135", "title": "Update value of nested objects using lodash", "body": "<p><strong>TL;DR</strong> Lodash has a helper for drilling down into nested objects and arrays, but only using keys and indexes, not properties of items in arrays. You'd need to make your own function for this.</p>\n\n<p>Assuming that your id pattern holds and each id contains the ancestor ids (where <code>'1.3.1'</code> is a child of <code>'1.3'</code>, which is a child of <code>'1'</code>, etc.), then you'll want to split that id by your chosen delineator (<code>.</code> in this case) to create a path to search along. I'm also assuming that you would be using <em>strings</em> for the <code>id</code> properties, since a <em>number</em> type isn't going to permit multiple <code>.</code> characters.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const idToFind = '1.1';\nconst path = idToFind.split('.');\n&gt;&gt; ['1', '1']\n</code></pre>\n\n<p>After that, you'll need to incrementally use more items from the list to create matching ids. If you keep track of the depth, you can slice the array to include the desired ids. Additionally, you'll want to abort the iteration if a matching id isn't found. This can be accomplished using a <code>while</code> loop to iterate over your <code>path</code> array while you haven't reached the max \"depth\" (the length of the path).</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>let children = data;\nlet depth = 1;\nlet obj = null;  // keeps track of matching objects\nwhile (depth &lt;= path.length) {\n    const id = path.slice(0, depth).join('.');\n    obj = _.find(children, (elem) =&gt; elem.id === id);\n    if (!obj) return false;\n    children = obj.children;\n    depth += 1;\n}\n</code></pre>\n\n<p>By the end of this iteration, you will have either returned <code>false</code> because we hit a non-matching id at some point, or we'll have our desired element as <code>obj</code>. From there, you can set the text value.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function updateText(data, idToFind, value) {\n    const path = idToFind.split('.');\n    let children = data;\n    let depth = 1;\n    let obj = null;  // keeps track of matching objects\n\n    while (depth &lt;= path.length) {\n        const id = path.slice(0, depth).join('.');\n        obj = _.find(children, (elem) =&gt; elem.id === id);\n        if (!obj) return false;\n        children = obj.children;\n        depth += 1;\n    }\n\n    obj.text = value;\n    return true;\n}\n</code></pre>\n\n<p>This approach has the advantage of aborting the loop as soon as any unmatched id is found <em>at each level</em>. It also makes more use of the id pattern you have by looking for a matching id <em>at each leve</em>. The solution posted by <code>georg</code> will work, but it's going to loop through every element and nested child element until it finds the one you're looking for, so it's going to take longer with more complex data structures.</p>\n"}], "owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3254, "favorite_count": 0, "accepted_answer_id": 57793530, "answer_count": 3, "score": 0, "last_activity_date": 1567672019, "creation_date": 1567614250, "last_edit_date": 1567614697, "question_id": 57792434, "link": "https://stackoverflow.com/questions/57792434/update-value-of-nested-objects-using-lodash", "title": "Update value of nested objects using lodash", "body": "<p>I have following nested objects (only 2 level example I have added to keep it simple, but it can be of any level deep).</p>\n\n<pre><code>[{\n id: 1,\n text: 'one',\n children: [{\n    id: 1.1, \n    text: 'one point one', \n    children: []  \n }]\n}]\n</code></pre>\n\n<p>let's say I have a id to find and text to replace if id matches. </p>\n\n<p>How do I achieve this using lodash?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1567615728, "post_id": 57792370, "comment_id": 102018708, "body": "If you&#39;ll read the full error message you&#39;ll see exactly why. TLDR <code>type Greeting = { name: &quot;Hello&quot; | &quot;Hi!&quot; }</code> is not equivalent to above definition."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 1045992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6db0315161b85117f8281955563c9c?s=128&d=identicon&r=PG", "display_name": "No&#233; Rubinstein", "link": "https://stackoverflow.com/users/1045992/no%c3%a9-rubinstein"}, "edited": false, "score": 0, "creation_date": 1567671694, "post_id": 57792742, "comment_id": 102034551, "body": "Thanks for this answer! It indeed explains the error message, but it does not explain why the non-generic function does work."}], "tags": [], "owner": {"reputation": 61, "user_id": 11672963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ttK8eZWc3XY/AAAAAAAAAAI/AAAAAAAAAEE/BnYDXlQeibg/photo.jpg?sz=128", "display_name": "kschaer", "link": "https://stackoverflow.com/users/11672963/kschaer"}, "is_accepted": false, "score": 0, "last_activity_date": 1567615669, "creation_date": 1567615669, "answer_id": 57792742, "question_id": 57792370, "link": "https://stackoverflow.com/questions/57792370/typescript-why-does-this-trivial-generic-function-does-not-behave-like-its-non/57792742#57792742", "title": "Typescript: why does this trivial generic function does not behave like its non-generic equivalent?", "body": "<p>Take a look at what the compiler shows when you hover over <code>N</code> - In your generic function, when you write <code>N extends Greeting[\"name\"]</code> you're really saying <code>N extends \"Hello\" | \"Hi!\"</code>. </p>\n\n<p>This means that the return value of <code>bar</code> is in fact of type <code>{ name: \"Hello\" | \"Hi!\" }</code>, and not <code>Greeting</code>. </p>\n\n<p>Though this is similar to the type you've declared for Greeting, these are not in fact equivalent; hence the type error you're encountering. </p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 4, "last_activity_date": 1567615719, "creation_date": 1567615719, "answer_id": 57792750, "question_id": 57792370, "link": "https://stackoverflow.com/questions/57792370/typescript-why-does-this-trivial-generic-function-does-not-behave-like-its-non/57792750#57792750", "title": "Typescript: why does this trivial generic function does not behave like its non-generic equivalent?", "body": "<p>The TypeScript compiler does not <em>in general</em> break object types with union-typed properties into unions of object types with non-union properties.  Before TypeScript 3.5 this was not done <em>at all</em> (<a href=\"http://www.typescriptlang.org/play/?ts=3.3.3#code/C4TwDgpgBA4gThCwCWA7A5lAvFA3lVAQwFsIAuKAIgAkIAbOge0qgF8oAfPAk8q65AEIWrANwBYAFBSIADzCM4wKADMArqgDGKRqlWNGACiKkA+oxWn0CJGnQV4iFBgDalExEoBdAJQObzpi4UlBQCMBqcHr4HhQe5pbWTnZsEpKsUjLyisrqWjp6AEaEcAA8AHJQcsAQqAAmAM6wAXZuHt4AfMa8CVYtGBTlfs3JGHghYUiR0TykcT0WfaOYYlIZ0pJAA\" rel=\"nofollow noreferrer\">both functions fail in TS3.3</a>).  TypeScript 3.5 introduced <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#smarter-union-type-checking\" rel=\"nofollow noreferrer\">\"smarter\" union type checking</a> in which some <em>concrete</em> unions of properties are sometimes checked this way... and your <code>foo()</code> function compiles successfully.</p>\n\n<p>Theoretically one could always break objects-of-unions into unions-of-objects: for example, <code>{a: string|number; b: boolean; c: object | null}</code> could be exploded into <code>{a: string, b: true, c: object} | {a: string, b: true, c: null} | {a: string, b: false, c: object} | {a: string, b: false, c: null} | {a: number, b: true, c: object} | {a: number, b: true, c: null} | {a: number, b: false, c: object} | {a: number, b: false, c: null}</code>).  But, this would likely be a huge performance penalty and would only be beneficial in some use cases.</p>\n\n<p>I assume it would be even more difficult/expensive to manipulate union-typed properties when the type is generic, where <code>{a: T}</code> where <code>T extends 0 | 1</code> would be some generic type <code>U extends {a: never} | {a: 0} | {a: 1}</code>.  So the language hasn't done it.  This could be considered either \n<a href=\"https://github.com/microsoft/TypeScript/issues/12052\" rel=\"nofollow noreferrer\">intentional</a> or a <a href=\"https://github.com/microsoft/TypeScript/issues/8289#issuecomment-214554425\" rel=\"nofollow noreferrer\">design limitation</a> of TypeScript. </p>\n\n<hr>\n\n<p>Anyway, my workaround here would be to widen the returned value in <code>bar()</code> to a concrete type that the compiler <em>will</em> correctly check, like this:</p>\n\n<pre><code>export function bar&lt;N extends Greeting[\"name\"]&gt;(name_of_greeting: N): Greeting {\n  const concreteGreeting: { name: \"Hello\" | \"Hi!\" } = {\n    name: name_of_greeting\n  };\n  return concreteGreeting;\n}\n</code></pre>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/C4TwDgpgBA4gThCwCWA7A5lAvFA3lVAQwFsIAuKAIgAkIAbOge0qgF8oAfPAk8q65AEIWrANwBYAFBSIADzCM4wKADMArqgDGKRqlWNGACiKkA+oxWn0CJGnQV4iFBgDalExEoBdAJQObzpi4UlBQCMBqcHr4HhQe5pbWTnZsEpKsUjLyisrqWjp6AEaEcAA8AHJQcsAQqAAmAM6wAXZuHt4AfMa8CVYtGBTlfs3JGHghUJq6DcpTWuEQjrYD3LH89EwsXDRCItjjkqGha-EWfaPoE2IT4ZF6c5oLS4FpGZJAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 551, "user_id": 1045992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6db0315161b85117f8281955563c9c?s=128&d=identicon&r=PG", "display_name": "No&#233; Rubinstein", "link": "https://stackoverflow.com/users/1045992/no%c3%a9-rubinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57792750, "answer_count": 2, "score": 2, "last_activity_date": 1567615719, "creation_date": 1567613973, "question_id": 57792370, "link": "https://stackoverflow.com/questions/57792370/typescript-why-does-this-trivial-generic-function-does-not-behave-like-its-non", "title": "Typescript: why does this trivial generic function does not behave like its non-generic equivalent?", "body": "<pre><code>type Greeting = { name: \"Hello\" } | { name: \"Hi!\" };\n\nexport function foo(name_of_greeting: Greeting[\"name\"]): Greeting {\n  return { name: name_of_greeting };\n}\n\nexport function bar&lt;N extends Greeting[\"name\"]&gt;(name_of_greeting: N): Greeting {\n  return { name: name_of_greeting };\n}\n</code></pre>\n\n<p><code>foo</code> typechecks fine, but <code>bar</code> produces the following error:</p>\n\n<blockquote>\n  <p>Type '{ name: N; }' is not assignable to type 'Greeting'.</p>\n</blockquote>\n\n<p>Naively, I would expect <code>bar</code> to be completely equivalent to <code>foo</code>. Why does TypeScript disagree?</p>\n"}, {"tags": ["html", "angular", "typescript", "angular-ui-router"], "comments": [{"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 1, "creation_date": 1567614226, "post_id": 57792320, "comment_id": 102018085, "body": "<code>users: Observable&lt;User[]&gt;;</code> seems like wrong type as you are setting <code>this.users</code> inside the <code>subscribe()</code>, which almost always would be the resolved data, in this case just type <code>User[]</code>. Also, navigating the same component will not trigger <code>ngOnInit</code> to re-trigger. <a href=\"https://stackoverflow.com/questions/40983055/how-to-reload-the-current-route-with-the-angular-2-router\" title=\"how to reload the current route with the angular 2 router\">stackoverflow.com/questions/40983055/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 10229308, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/10229308/nick"}, "edited": false, "score": 0, "creation_date": 1567636599, "post_id": 57792694, "comment_id": 102025779, "body": "I tried your solution, the issue still remains, I need to refresh the page to get the updates."}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 369, "user_id": 10229308, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/10229308/nick"}, "edited": false, "score": 1, "creation_date": 1567637086, "post_id": 57792694, "comment_id": 102025885, "body": "Do you see your GET API being called in the network tab once you add a user? I also made a mistake in my answer previously, you need to actually emit the event on success of your POST api. See my updated answer."}], "tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": true, "score": 1, "last_activity_date": 1567636902, "last_edit_date": 1567636902, "creation_date": 1567615472, "answer_id": 57792694, "question_id": 57792320, "link": "https://stackoverflow.com/questions/57792320/i-cant-update-the-table-after-adding-new-values/57792694#57792694", "title": "I can&#39;t update the table after adding new values", "body": "<p>As mentioned in the comments, <code>users</code> should be of type <code>User[]</code> since you are assigning the subscribed value to it and navigating to the same component will not cause the component to rerender.</p>\n\n<p>Instead you can use <code>@Output</code> to achieve this. Once you add the <code>newUser</code>, you refresh the data in your parent component(<code>user-list.component.ts</code>).</p>\n\n<p><strong>user-form-component.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Output() submitted = new EventEmitter&lt;void&gt;();\n</code></pre>\n\n<p>Then on success of your POST API, emit the event</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.userService.postResource('/users', newUser).subscribe(\n    data =&gt; {\n        console.log(data);\n        this.submitted.emit();\n    },\n    error =&gt; {\n        console.log(error);\n    } \n);\n</code></pre>\n\n<p>In your parent component's template, you need to add this event to your custom component.</p>\n\n<p><strong>user-list.component.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;app-user-form (submitted)=\"onSubmit($event)\"&gt;&lt;/app-user-form&gt;\n</code></pre>\n\n<p>Then in your parent component.</p>\n\n<p><strong>user-list.component.html</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>onSubmit() {\n    this.reloadData();\n}\n</code></pre>\n\n<p>For more information on how to use <code>@Output</code>, see the <a href=\"https://angular.io/guide/template-syntax#how-to-use-output\" rel=\"nofollow noreferrer\">docs</a>.</p>\n"}], "owner": {"reputation": 369, "user_id": 10229308, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/10229308/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 57792694, "answer_count": 1, "score": 1, "last_activity_date": 1567636902, "creation_date": 1567613701, "last_edit_date": 1567613897, "question_id": 57792320, "link": "https://stackoverflow.com/questions/57792320/i-cant-update-the-table-after-adding-new-values", "title": "I can&#39;t update the table after adding new values", "body": "<p>I'm new to angular, and I'm trying to insert new values and display them in a table. Thus, I have three components, one for listing the information of a user <code>user-list</code>, one for creating the information raws <code>user-form</code> and one for the presentation of these information <code>single-user</code>.</p>\n\n<p>My issue is when I try to insert a new information raw, the table liste doesn't update or refresh it self even I did the redirection to it, and I don't know the raison why.\nMay someone gives me any indication. thanks in advance.</p>\n\n<p>User-list.component.ts:</p>\n\n<pre><code>import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UserService } from '../services/user.service';\nimport { Subscription, Observable } from 'rxjs';\nimport { User} from '../model/user.model';\n\n@Component({\n  selector: 'app-user-list',\n  templateUrl: './user-list.component.html',\n  styleUrls: ['./user-list.component.css']\n})\nexport class UserListComponent implements OnInit, OnDestroy {\n\n  constructor(private router: Router, private userService : UserService ) { }\n\n  userSubscription: Subscription;\n  users: Observable&lt;User[]&gt;;\n\n  ngOnInit() {\n    this.reloadData();\n  }\n\n  reloadData(){\n   this.userSubscription = this.userService.getResource(\"/users\").subscribe(\n      data =&gt;{\n        this.users= data;\n        console.log(this.users);\n      },\n      error =&gt; { console.log(error);\n      }\n   ); \n  }\n\n  ngOnDestroy() { this.userSubscription.unsubscribe(); }\n\n}\n</code></pre>\n\n<p>User-list.component.html:</p>\n\n<pre><code>&lt;div id=\"page-wrapper\"&gt;\n  &lt;div class=\"main-page\"&gt;\n    &lt;div class=\"tables\"&gt;\n        &lt;app-user-form&gt;&lt;/app-user-form&gt;\n        &lt;div class=\"table-responsive bs-example widget-shadow\" data-example- \n           id=\"contextual-table\"&gt; \n             &lt;table class=\"table table-hover \"&gt; \n          &lt;thead&gt; \n                &lt;tr&gt; \n                    &lt;th&gt;#&lt;/th&gt; \n                    &lt;th&gt;Name&lt;/th&gt;\n                    &lt;th&gt;Age&lt;/th&gt;\n                    &lt;th&gt;Action&lt;/th&gt; \n                &lt;/tr&gt; \n           &lt;/thead&gt;\n              &lt;tbody class=\"body\"&gt;\n              &lt;ng-container *ngFor=\"let u of users\"&gt; \n                  &lt;tr class=\"active\" \n                    app-single-user\n                    [IdUser] =  \"u.idUser\"\n                    [NameUser] = \"u.nameUser\"\n                    [AgeUser] = \"u.ageUser\"\n                  &gt; \n                  &lt;/tr&gt;\n            &lt;/ng-container&gt;\n          &lt;/tbody&gt; \n        &lt;/table&gt; \n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>User-form-component.ts</p>\n\n<pre><code>@Component({\n  selector: 'app-user-form',\n  templateUrl: './user-form.component.html',\n  styleUrls: ['./user-form.component.css']\n})\nexport class UserFormComponent implements OnInit {\n\n  userForm: FormGroup;\n\n  constructor(private formBuilder: FormBuilder,\n              private router: Router, \n              private userService: UserService\n              ) { }\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  initForm() {\n    this.userForm = this.formBuilder.group({\n      nameUser: ['', Validators.required],\n      ageUser: ['', Validators.required]\n    });\n  }\n\n  reInitForm() {\n    this.userForm = this.formBuilder.group({\n      nameUser: '',\n      ageUser: ''\n    });\n  }\n\n  onSubmit(){\n    const formValue = this.userForm.value;\n    const newuser = new User(\n      formValue['nameUser'],\n      formValue['ageUser']\n    );\n    this.userService.postResource('/users', newUser).subscribe(\n      data =&gt;{\n        console.log(data)\n      },\n      error=&gt;{\n        console.log(error)\n      } \n    );\n    this.reInitForm();\n    this.router.navigate(['/users']);\n  }\n\n}\n\n</code></pre>\n\n<p>user-form-component.html:</p>\n\n<pre><code>&lt;div class=\"table-responsive bs-example widget-shadow\" data-example-id=\"contextual-table\"&gt;\n\n    &lt;div class=\"main-page\"&gt;\n    &lt;form [formGroup]=\"userForm\" (ngSubmit)=\"onSubmit()\" class=\"form-inline\"&gt;\n        &lt;div class=\"form-group\"&gt;\n\n            &amp;nbsp;\n            &lt;input type=\"text\" class=\"form-control\" id=\"name\"\n                   formControlName=\"nameUser\" name=\"name\" required&gt;\n\n          &lt;input type=\"text\" class=\"form-control\" id=\"age\" \n                   formControlName=\"ageUser\" name=\"age\" required&gt;\n\n        &lt;/div&gt;\n        &amp;nbsp; &amp;nbsp;\n\n        &lt;button type=\"submit\" class=\"btn btn-success\"\n            [disabled]=\"userForm.invalid\"&gt;Submit&lt;/button&gt;\n    &lt;/form&gt;\n    &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>I tried the redirect to the same component <code>this.router.navigate(['/users']);</code> in oder to refresh the content of the table but it doesn't work.\nI appreciate it if someone can give me some hints or indications to solve it. thanks</p>\n"}, {"tags": ["typescript", "typescript-generics"], "comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 2, "creation_date": 1567612922, "post_id": 57791980, "comment_id": 102017454, "body": "Ok here&#39;s where this is problematic. you need to have T always be a single string. Not only that it has to be a specific single string. For example <code>MyInterface&lt;string&gt;</code> would not be allowed. <code>MyInterface&lt;&#39;example1&#39;|&#39;example2&#39;&gt;</code> would also not be allowed. This is so insanely specific it really screams <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a> to me"}, {"owner": {"reputation": 8795, "user_id": 6852937, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/211bc0d1a4dd35c36879f21e33511f68?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Elrico", "link": "https://stackoverflow.com/users/6852937/andre-elrico"}, "reply_to_user": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1567613030, "post_id": 57791980, "comment_id": 102017513, "body": "Im happy to have a workaround. This preudocode just explains what im after."}, {"owner": {"reputation": 123501, "user_id": 1903366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkUeD.png?s=128&g=1", "display_name": "lukasgeiter", "link": "https://stackoverflow.com/users/1903366/lukasgeiter"}, "edited": false, "score": 4, "creation_date": 1567613156, "post_id": 57791980, "comment_id": 102017581, "body": "Until <a href=\"https://github.com/microsoft/TypeScript/issues/12754\" rel=\"nofollow noreferrer\">this feature</a> is implemented in TypeScript I don&#39;t think that&#39;s possible."}], "owner": {"reputation": 8795, "user_id": 6852937, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/211bc0d1a4dd35c36879f21e33511f68?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Elrico", "link": "https://stackoverflow.com/users/6852937/andre-elrico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567612341, "creation_date": 1567612341, "last_edit_date": 1592644375, "question_id": 57791980, "link": "https://stackoverflow.com/questions/57791980/typescript-generic-interface-with-dynamic-keys", "title": "Typescript generic interface with dynamic keys", "body": "<p>Hey there is the following somehow possible in TS?</p>\n<h3>warning: extreme pseudocode incoming!</h3>\n<pre><code>interface MyInterface&lt;T&gt; {\n    ${T}_function: (a: number): void;\n    ${T}_prop: number;\n}\n\nMyClass implements MyInterface&lt;'Example'&gt; {\n    // TSLINT-GOD says:\n    // You need to implement: \n    // -&gt; Example_prop of type number and\n    // -&gt; Example_function with signature (a: number): void;\n}\n</code></pre>\n<p>if possible a use case would look like:</p>\n<pre><code>MyClass implements MyInterface&lt;'cat'&gt;, MyInterface&lt;'dog'&gt; {\n   I know I have to implement 4 function with specific name.\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 2316, "user_id": 797531, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/de1e1a4cd097890e6c5c7f4ba4891f27?s=128&d=identicon&r=PG", "display_name": "francadaval", "link": "https://stackoverflow.com/users/797531/francadaval"}, "edited": false, "score": 1, "creation_date": 1567612355, "post_id": 57791911, "comment_id": 102017147, "body": "How do you call &#39;post&#39;? It seems that you are using the function outside of its scope so &#39;this&#39; is not defined."}, {"owner": {"reputation": 13, "user_id": 6519388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a376a5a6db141795a6bdd44486542041?s=128&d=identicon&r=PG", "display_name": "Gabriel Alves", "link": "https://stackoverflow.com/users/6519388/gabriel-alves"}, "reply_to_user": {"reputation": 2316, "user_id": 797531, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/de1e1a4cd097890e6c5c7f4ba4891f27?s=128&d=identicon&r=PG", "display_name": "francadaval", "link": "https://stackoverflow.com/users/797531/francadaval"}, "edited": false, "score": 0, "creation_date": 1567613230, "post_id": 57791911, "comment_id": 102017613, "body": "@francadaval I import it in another service with dependency injection (storing it at <code>service</code> attribute) and call post as <code>this.service.post(...)</code>"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1567613367, "post_id": 57791911, "comment_id": 102017689, "body": "can you share the code where you call this service from the component ?"}, {"owner": {"reputation": 13, "user_id": 6519388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a376a5a6db141795a6bdd44486542041?s=128&d=identicon&r=PG", "display_name": "Gabriel Alves", "link": "https://stackoverflow.com/users/6519388/gabriel-alves"}, "edited": false, "score": 0, "creation_date": 1567613509, "post_id": 57791911, "comment_id": 102017754, "body": "Sure, I&#39;ll edit the question to insert this."}, {"owner": {"reputation": 10913, "user_id": 3676586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KbN7G.jpg?s=128&g=1", "display_name": "Tiep Phan", "link": "https://stackoverflow.com/users/3676586/tiep-phan"}, "edited": false, "score": 0, "creation_date": 1567614593, "post_id": 57791911, "comment_id": 102018250, "body": "consider to use http interceptor and toPromise instead"}, {"owner": {"reputation": 1283, "user_id": 7275319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rhr5z.jpg?s=128&g=1", "display_name": "Michael Sorensen", "link": "https://stackoverflow.com/users/7275319/michael-sorensen"}, "edited": false, "score": 0, "creation_date": 1567615324, "post_id": 57791911, "comment_id": 102018538, "body": "does <code>service.get(&#39;&#47;api&#47;users&#47;current&#39;).bind(service).then(user =&gt; this.user = user).catch(service.unsetToken);</code> work?"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 1283, "user_id": 7275319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rhr5z.jpg?s=128&g=1", "display_name": "Michael Sorensen", "link": "https://stackoverflow.com/users/7275319/michael-sorensen"}, "edited": false, "score": 0, "creation_date": 1567615738, "post_id": 57791911, "comment_id": 102018710, "body": "@MichaelSorensen you can use the demo that I have created inmy answer \ud83e\udd14"}], "answers": [{"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 13, "user_id": 6519388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a376a5a6db141795a6bdd44486542041?s=128&d=identicon&r=PG", "display_name": "Gabriel Alves", "link": "https://stackoverflow.com/users/6519388/gabriel-alves"}, "edited": false, "score": 0, "creation_date": 1567617733, "post_id": 57792473, "comment_id": 102019533, "body": "@GabrielAlves happy to help \ud83d\ude42 , another option is to use http interceptor it is easier to use and highly recommend \ud83d\udc4d"}, {"owner": {"reputation": 13, "user_id": 6519388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a376a5a6db141795a6bdd44486542041?s=128&d=identicon&r=PG", "display_name": "Gabriel Alves", "link": "https://stackoverflow.com/users/6519388/gabriel-alves"}, "edited": false, "score": 0, "creation_date": 1567623454, "post_id": 57792473, "comment_id": 102021797, "body": "Nice, I&#39;ll take a look. Thanks!"}], "tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": true, "score": 0, "last_activity_date": 1567616030, "last_edit_date": 1567616030, "creation_date": 1567614460, "answer_id": 57792473, "question_id": 57791911, "link": "https://stackoverflow.com/questions/57791911/cannot-read-property-request-of-undefined/57792473#57792473", "title": "Cannot read property &#39;request&#39; of undefined", "body": "<blockquote>\n  <p>the value of <strong><em>this</em></strong> is determined by how a function is called (runtime\n  binding).</p>\n</blockquote>\n\n<p>internally the http post method call 'request' method on the http object but when you got the post reference and invoke it <strong><em>this</em></strong> reference become undefined in strict mode</p>\n\n<p>you can use http object directly</p>\n\n<pre><code>  private request(route: string, method: string, requestOptions?: any): Promise&lt;void&gt; {\n      return new Promise((resolve, reject) =&gt; {\n          const url = new URL(route, this.host);\n          const { payload, headers, options }: Options = requestOptions || {};\n          const defaultHeaders = { 'Content-Type': 'application/json' };\n          const token = localStorage.getItem('Token');\n          if(token) { defaultHeaders['Authorization'] = token; }\n\n          const optionsDefinition = {\n                  ...options,\n                  withCredentials: true,\n                  headers: new HttpHeaders({...defaultHeaders, ...headers})\n          };\n\n          this.http[method.toLowerCase()](url.toString(), payload, optionsDefinition)\n              .subscribe(() =&gt; {console.log('resolve'); resolve();},\n                  () =&gt; {console.log('reject');reject(); });\n      });\n  }\n</code></pre>\n\n<p>another way is to fix the this object with bind method</p>\n\n<pre><code>   const fn = this.http[method.toLowerCase()].bind(this.http);\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-qofyyg\" rel=\"nofollow noreferrer\"><strong>demo \ud83d\ude80\ud83d\ude80</strong></a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this\" rel=\"nofollow noreferrer\"><strong>this \ud83e\uddd9\u200d\u2642\ufe0f</strong></a></p>\n"}], "owner": {"reputation": 13, "user_id": 6519388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a376a5a6db141795a6bdd44486542041?s=128&d=identicon&r=PG", "display_name": "Gabriel Alves", "link": "https://stackoverflow.com/users/6519388/gabriel-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 57792473, "answer_count": 1, "score": 1, "last_activity_date": 1567616030, "creation_date": 1567612059, "last_edit_date": 1567613628, "question_id": 57791911, "link": "https://stackoverflow.com/questions/57791911/cannot-read-property-request-of-undefined", "title": "Cannot read property &#39;request&#39; of undefined", "body": "<p>I'm currently implementing a base service to an angular application. This should provide methods to other services in order to compose a request with default headers and default options. The problem occurs when I try to call either get or post methods. These methods just call <code>this.request</code>, but I get a ZoneAwarePromise with this error.</p>\n\n<pre><code>ERROR Error: Uncaught (in promise): Cannot read property 'request' of undefined\n    at resolvePromise (zone.js:831)\n    at zone.js:896\n    at ZoneDelegate.push../node_modules/zone.js/dist/zone.js.ZoneDelegate.invokeTask (zone.js:423)\n    at Object.onInvokeTask (core.js:17280)\n    at ZoneDelegate.push../node_modules/zone.js/dist/zone.js.ZoneDelegate.invokeTask (zone.js:422)\n    at Zone.push../node_modules/zone.js/dist/zone.js.Zone.runTask (zone.js:195)\n    at drainMicroTaskQueue (zone.js:601)\n    at ZoneTask.push../node_modules/zone.js/dist/zone.js.ZoneTask.invokeTask [as invoke] (zone.js:502)\n    at invokeTask (zone.js:1744)\n    at HTMLButtonElement.globalZoneAwareCallback (zone.js:1770)\ndefaultErrorLogger  @   core.js:15714\npush../node_modules/@angular/core/fesm5/core.js.ErrorHandler.handleError    @   core.js:15762\nnext    @   core.js:17761\nschedulerFn @   core.js:13505\npush../node_modules/rxjs/_esm5/internal/Subscriber.js.SafeSubscriber.__tryOrUnsub   @   Subscriber.js:192\npush../node_modules/rxjs/_esm5/internal/Subscriber.js.SafeSubscriber.next   @   Subscriber.js:130\npush../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber._next  @   Subscriber.js:76\npush../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next   @   Subscriber.js:53\npush../node_modules/rxjs/_esm5/internal/Subject.js.Subject.next @   Subject.js:47\npush../node_modules/@angular/core/fesm5/core.js.EventEmitter.emit   @   core.js:13489\n(anonymous) @   core.js:17311\npush../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke    @   zone.js:391\npush../node_modules/zone.js/dist/zone.js.Zone.run   @   zone.js:150\npush../node_modules/@angular/core/fesm5/core.js.NgZone.runOutsideAngular    @   core.js:17248\nonHandleError   @   core.js:17311\npush../node_modules/zone.js/dist/zone.js.ZoneDelegate.handleError   @   zone.js:395\npush../node_modules/zone.js/dist/zone.js.Zone.runGuarded    @   zone.js:164\n_loop_1 @   zone.js:694\napi.microtaskDrainDone  @   zone.js:703\ndrainMicroTaskQueue @   zone.js:608\npush../node_modules/zone.js/dist/zone.js.ZoneTask.invokeTask    @   zone.js:502\ninvokeTask  @   zone.js:1744\nglobalZoneAwareCallback\n</code></pre>\n\n<p>It clearly doesn't make sense, because I tried to log the value of <code>this.request</code> before calling it inside post method and the browser shows that <code>this.request</code> exists.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Options {\n  payload?: any,\n  headers?: any,\n  options?: any\n}\n\n@Injectable()\nexport class ApiService {\n    private host: string = `${environment.apiUrl}`;\n\n    constructor(private http: HttpClient) {}\n\n    public get(route: string, options?: any) {\n        return this.request(route, 'GET', options);\n    }\n\n    public post(route: string, options?: any) {\n        return this.request(route, 'POST', options); // &lt;- this line here\n    }\n\n    public setToken(token: string) {\n        localStorage.setItem('Token', token);\n    }\n\n    public unsetToken() {\n        localStorage.removeItem('Token');\n    }\n\n    private request(route: string, method: string, requestOptions?: any): Promise&lt;void&gt; {\n        return new Promise((resolve, reject) =&gt; {\n            const url = new URL(route, this.host);\n            const fn = this.http[method.toLowerCase()];\n            const { payload, headers, options }: Options = requestOptions || {};\n            const defaultHeaders = { 'Content-Type': 'application/json' };\n            const token = localStorage.getItem('Token');\n            if(token) defaultHeaders['Authorization'] = token;\n\n            const optionsDefinition = {\n                    ...options,\n                    withCredentials: true,\n                    headers: new HttpHeaders({...defaultHeaders, ...headers})\n            };\n\n            fn(url.toString(), payload, optionsDefinition)\n                .subscribe(() =&gt; {console.log('resolve'); resolve()},\n                    () =&gt; {console.log('reject');reject() });\n        });\n    }\n}\n</code></pre>\n\n<p>I expect to call the request method without getting this error. Can someone help me?</p>\n\n<p>EDIT</p>\n\n<p>I'm calling the post method inside the following <code>login</code> method:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Injectable()\nexport class AuthService {\n    private user: any = null;\n\n    constructor(private service: ApiService) {\n      console.log(service);\n        service.get('/api/users/current')\n            .then(user =&gt; this.user = user)\n            .catch(service.unsetToken);\n    }\n\n    login(username: string, password: string): Promise&lt;void&gt; {\n        const options: any = {\n            options: { responseType: 'text' },\n            payload: { username, password },\n        };\n\n        return new Promise((resolve, reject) =&gt; {\n            const onSuccess = response =&gt; {\n                this.service.setToken(response);\n                resolve();\n            };\n\n            const onFailure = error =&gt; {\n                reject(error.message);\n            };\n\n            this.service.post('/api/auth', options)\n                .then(onSuccess)\n                .catch(onFailure);\n\n        });\n    }\n\n    logout(): Promise&lt;void&gt; {\n        return new Promise((resolve, reject) =&gt; {\n            this.service.unsetToken();\n            resolve();\n        });\n    }\n\n    checkTokenValidity(): Promise&lt;boolean&gt; {\n        return new Promise((resolve, reject) =&gt; {\n            this.service.get('/api/auth/validity')\n                .then(() =&gt; resolve(true))\n                .catch(() =&gt; resolve(false));\n        });\n    }\n\n    public getUser() {\n        return { ...this.user };\n    }\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "graphql-js", "typescript-decorator"], "answers": [{"comments": [{"owner": {"reputation": 33403, "user_id": 239879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9e2d7ef70e61ce1c509e556c453626d?s=128&d=identicon&r=PG", "display_name": "Shamoon", "link": "https://stackoverflow.com/users/239879/shamoon"}, "edited": false, "score": 0, "creation_date": 1591805825, "post_id": 57905398, "comment_id": 110198305, "body": "Is there any solution?"}], "tags": [], "owner": {"reputation": 588, "user_id": 10553879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nbTIa.jpg?s=128&g=1", "display_name": "BURGERFLIPPER101", "link": "https://stackoverflow.com/users/10553879/burgerflipper101"}, "is_accepted": false, "score": 0, "last_activity_date": 1568286524, "creation_date": 1568286524, "answer_id": 57905398, "question_id": 57791707, "link": "https://stackoverflow.com/questions/57791707/decorators-legacy-isnt-currently-enabled/57905398#57905398", "title": "&quot;Decorators-legacy&quot; isn&#39;t currently enabled", "body": "<p>Issue was that these configurations cannot be run on the client and are not compatible with React. </p>\n"}], "owner": {"reputation": 588, "user_id": 10553879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nbTIa.jpg?s=128&g=1", "display_name": "BURGERFLIPPER101", "link": "https://stackoverflow.com/users/10553879/burgerflipper101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568286524, "creation_date": 1567611387, "question_id": 57791707, "link": "https://stackoverflow.com/questions/57791707/decorators-legacy-isnt-currently-enabled", "title": "&quot;Decorators-legacy&quot; isn&#39;t currently enabled", "body": "<p>I am sharing an object type between backend and frontend. I use it as a validator and when Graphql exchanges data between client and server it only sends the data in these object types.</p>\n\n<p>This is an AuthenticationInput object:</p>\n\n<pre><code>    import { Field, InputType } from \"type-graphql\";\n    @InputType()\nexport class AuthenticationInput {\n\n    @Field({nullable: false})\n    email: string;\n\n    @Field({nullable: false})\n    password: string\n}\n</code></pre>\n\n<p>This exists both on the backend and frontend. On the backend which is an apollo server running on graphQL there's no issue. However, on the client side I get this error:</p>\n\n<pre><code>Support for the experimental syntax 'decorators-legacy' isn't currently enabled\n</code></pre>\n\n<p>I do have \"experimentalDecorators\": true in my tsconfig.json. I'm not sure what to do. I get the error for both Field and InputType.</p>\n\n<p>Running with webpack, next.js, react, typescript.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "node.js", "typescript", "express", "cookies"], "answers": [{"comments": [{"owner": {"reputation": 1228, "user_id": 937681, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/olrCF.jpg?s=128&g=1", "display_name": "Jason G", "link": "https://stackoverflow.com/users/937681/jason-g"}, "edited": false, "score": 0, "creation_date": 1614188700, "post_id": 57791488, "comment_id": 117311890, "body": "i&#39;ve got bot domain and path but still not deleteing"}], "tags": [], "owner": {"reputation": 2860, "user_id": 2016353, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d7b22e8ea693b36a249f7f626df6439?s=128&d=identicon&r=PG", "display_name": "Daniel Bank", "link": "https://stackoverflow.com/users/2016353/daniel-bank"}, "is_accepted": true, "score": 5, "last_activity_date": 1567650341, "last_edit_date": 1567650341, "creation_date": 1567610564, "answer_id": 57791488, "question_id": 57791209, "link": "https://stackoverflow.com/questions/57791209/res-clearcookie-function-doesnt-delete-cookies/57791488#57791488", "title": "res.clearCookie function doesn&#39;t delete cookies", "body": "<p>I believe your issue is that you are not passing the <code>options</code> parameter into <code>clearCookie()</code> and the client is not clearing the cookie as it is not identical.  Per the <a href=\"https://expressjs.com/en/api.html#res.clearCookie\" rel=\"noreferrer\">Express documentation</a>:</p>\n\n<blockquote>\n  <p>Web browsers and other compliant clients will only clear the cookie if the given options is identical to those given to res.cookie(), excluding expires and maxAge.</p>\n</blockquote>\n\n<p>Also found a <a href=\"https://github.com/expressjs/express/issues/691#issuecomment-385054381\" rel=\"noreferrer\">GitHub issue on the express repo</a> which states the same and shows an example of passing the domain and path:</p>\n\n<pre><code>res.clearCookie('my_cookie', {domain: COOKIE_DOMAIN, path: COOKIE_PATH});\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11784550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-spdMRDDCKOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQa9XVIwx5dRlTR0ftC2d60EvyMg/photo.jpg?sz=128", "display_name": "Amirali Amirifar", "link": "https://stackoverflow.com/users/11784550/amirali-amirifar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1791, "favorite_count": 0, "accepted_answer_id": 57791488, "answer_count": 1, "score": 5, "last_activity_date": 1567650341, "creation_date": 1567609545, "last_edit_date": 1567615426, "question_id": 57791209, "link": "https://stackoverflow.com/questions/57791209/res-clearcookie-function-doesnt-delete-cookies", "title": "res.clearCookie function doesn&#39;t delete cookies", "body": "<p>I am creating an authorization system for my express (with typescript) application and I use JWT and save them into cookies to keep the user logged in. I have a problem with the logout part and res.clearCookie() doesn't delete cookies.</p>\n\n<p>I have used cookie-parser in the index file and I have tried resetting the cookie with an empty value or expiration date of now but it doesn't work for me. As I stated above res.clearCookie(\"jwt\") doesnt work either. All dependencies are up-to-date.</p>\n\n<p>Login and Login Verification works fine and I can set and read [and decode] the JWT properly.</p>\n\n<p><strong>Main Part of Login Code</strong> </p>\n\n<pre><code>res.cookie(\"jwt\", token, {\n   httpOnly: true,\n   expires: new Date(\n       Date.now() + 1000 * 86400 * stayLoggedInDays\n   )\n}).send(\"Message: Login successful\");\n</code></pre>\n\n<p><strong>Logout Code</strong></p>\n\n<pre><code>router.post(\n  \"/logout\",\n  (req, res, next) =&gt; {\n    res.clearCookie(\"jwt\");\n    next();\n  },\n  (req, res) =&gt; {\n    console.log(req.cookies);\n    res.end(\"finish\");  \n  }\n);\n</code></pre>\n\n<p>After Logout I still can see the user profile but if I delete the cookie manually from postman the profile page won't show any information so my conclusion is that express cannot clear cookies.</p>\n"}, {"tags": ["angular", "typescript", "uml"], "comments": [{"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 0, "creation_date": 1567612478, "post_id": 57791189, "comment_id": 102017222, "body": "He didn&#39;t ask for a UML modeling program."}, {"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 1, "creation_date": 1567612657, "post_id": 57791189, "comment_id": 102017305, "body": "this may be of interest - <a href=\"http://www.agilemodeling.com/style/classDiagram.htm#Interfaces\" rel=\"nofollow noreferrer\">agilemodeling.com/style/classDiagram.htm#Interfaces</a>"}, {"owner": {"reputation": 30989, "user_id": 3379653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/f97JZ.png?s=128&g=1", "display_name": "qwerty_so", "link": "https://stackoverflow.com/users/3379653/qwerty-so"}, "edited": false, "score": 0, "creation_date": 1567614905, "post_id": 57791189, "comment_id": 102018372, "body": "Dunno typescript, so what actually does <code>myCube: ICube</code> mean? If it were a variable declaration it would be a dependency."}], "answers": [{"tags": [], "owner": {"reputation": 4165, "user_id": 5483079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RI0se.jpg?s=128&g=1", "display_name": "www.admiraalit.nl", "link": "https://stackoverflow.com/users/5483079/www-admiraalit-nl"}, "is_accepted": true, "score": 1, "last_activity_date": 1567668314, "creation_date": 1567668314, "answer_id": 57800395, "question_id": 57791189, "link": "https://stackoverflow.com/questions/57791189/how-to-model-an-instance-of-a-typescript-interface-in-uml/57800395#57800395", "title": "How to model an instance of a typescript interface in UML", "body": "<p>If a class C has a property P of type T, then class C automatically depends on type T. So, the most simple way of modeling your case is as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SEB8G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SEB8G.png\" alt=\"simple\"></a></p>\n\n<p>If you want to show the dependency explicitly using a relationship, you may draw a dashed arrow from the class to the interface, as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YPF1O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YPF1O.png\" alt=\"simple-with-dependency\"></a></p>\n\n<p>This dependency relationship is redundant, but allowed.</p>\n\n<p>Side note: <code>number</code> is not a pre-defined UML type. You may either define <code>number</code> as a data type in UML, or use the pre-defined UML type <code>Real</code>.</p>\n"}], "owner": {"reputation": 1592, "user_id": 10754437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQ20TT_LpsQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hAKkgUh4-8Hy8fUoI1tRFx-xHxVA/mo/photo.jpg?sz=128", "display_name": "Ruud Verhoef", "link": "https://stackoverflow.com/users/10754437/ruud-verhoef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 57800395, "answer_count": 1, "score": 0, "last_activity_date": 1567668314, "creation_date": 1567609462, "question_id": 57791189, "link": "https://stackoverflow.com/questions/57791189/how-to-model-an-instance-of-a-typescript-interface-in-uml", "title": "How to model an instance of a typescript interface in UML", "body": "<p>I am designing a class diagram for a Angular application. Angular apps are written in TypeScript. </p>\n\n<p>In TypeSCript it is possible to have an instance of an interface. For example an interface exists called cube:</p>\n\n<pre><code>interface ICube {\n  sideLength: number\n}\n</code></pre>\n\n<p>In the class Shapes this interface is used to define the type of an attribute (the class does not implement it) called myCube (as myCube is not a class it would make no sense to model it as such even know this is what implements the interface).</p>\n\n<pre><code>class Shape {\n  myCube: ICube\n}\n</code></pre>\n\n<p>I would think of this as a dependency the class has on the ICube interface but I have no idea how I would model a dependency in a design class diagram. Is there any official way of modelling this in UML?</p>\n"}, {"tags": ["typescript", "react-native", "react-navigation"], "answers": [{"comments": [{"owner": {"reputation": 1007, "user_id": 4374441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebeda86583aaad5669487b21341da626?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Paul", "link": "https://stackoverflow.com/users/4374441/jean-paul"}, "edited": false, "score": 0, "creation_date": 1602160986, "post_id": 57807374, "comment_id": 113636484, "body": "So instead of improving your code you have made it less readable and robust to future update. In the absence of a better solution, maybe the best solution in this case is to disable the rule for this line: <code>&#47;* eslint-disable-next-line react&#47;jsx-props-no-spreading *&#47;</code>"}, {"owner": {"reputation": 209, "user_id": 5039994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73194217bcd5452a988ef02ef358045?s=128&d=identicon&r=PG&f=1", "display_name": "Lotusin", "link": "https://stackoverflow.com/users/5039994/lotusin"}, "reply_to_user": {"reputation": 1007, "user_id": 4374441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebeda86583aaad5669487b21341da626?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Paul", "link": "https://stackoverflow.com/users/4374441/jean-paul"}, "edited": false, "score": 0, "creation_date": 1603107789, "post_id": 57807374, "comment_id": 113922481, "body": "Well as stated in the original question i have set it to strict because of learning purposes. I assumed the linter rules were the truth because i was still a beginner in react-native. Readability and robustness were not the goal of this project, it was to understand react-native. And by figuring out this prop spreading question i learned a lot about it. The linter rule helped me here."}], "tags": [], "owner": {"reputation": 209, "user_id": 5039994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73194217bcd5452a988ef02ef358045?s=128&d=identicon&r=PG&f=1", "display_name": "Lotusin", "link": "https://stackoverflow.com/users/5039994/lotusin"}, "is_accepted": true, "score": 0, "last_activity_date": 1567692614, "creation_date": 1567692614, "answer_id": 57807374, "question_id": 57791090, "link": "https://stackoverflow.com/questions/57791090/prop-spreading-in-react-navigation-draweritems/57807374#57807374", "title": "Prop spreading in react navigation &lt;drawerItems&gt;", "body": "<p>I figured this out. I debugged the props and put all the childs in the  seperately.\nThe finished code looks like this:</p>\n\n<pre><code>            &lt;DrawerNavigatorItems\n              items={items}\n              itemStyle={styles.drawerItem}\n              labelStyle={material.body1Object}\n              activeBackgroundColor=\"transparent\"\n              drawerPosition=\"left\"\n              renderIcon={renderIcon}\n              getLabel={getLabel}\n              onItemPress={onItemPress}\n            /&gt;\n</code></pre>\n\n<p>Please note that i also updated my packages in the meantime so the original childs of ...props could have been different</p>\n"}], "owner": {"reputation": 209, "user_id": 5039994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73194217bcd5452a988ef02ef358045?s=128&d=identicon&r=PG&f=1", "display_name": "Lotusin", "link": "https://stackoverflow.com/users/5039994/lotusin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 57807374, "answer_count": 1, "score": 1, "last_activity_date": 1567692614, "creation_date": 1567609095, "question_id": 57791090, "link": "https://stackoverflow.com/questions/57791090/prop-spreading-in-react-navigation-draweritems", "title": "Prop spreading in react navigation &lt;drawerItems&gt;", "body": "<p>I building a react native app in typescript. I am using a drawerItems component from react navigation. </p>\n\n<pre><code>&lt;DrawerItems\n  {...this.props}\n  items={items}\n  itemStyle={styles.drawerItem}\n  labelStyle={material.body1}\n  activeBackgroundColor=\"transparent\"\n/&gt;\n</code></pre>\n\n<p>I have set my lint on very strict for learning purposes. And now i have the following error message:</p>\n\n<blockquote>\n  <p>Prop spreading is forbiddeneslint(react/jsx-props-no-spreading)</p>\n</blockquote>\n\n<p>I have tried to pass the props seperated but it needs other props that i do not know where to get from. Can anyone show me how to rewrite this without prop spreading?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "webpack"], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 1914092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Suuu.png?s=128&g=1", "display_name": "Dicekey", "link": "https://stackoverflow.com/users/1914092/dicekey"}, "is_accepted": false, "score": 0, "last_activity_date": 1571146412, "creation_date": 1571146412, "answer_id": 58396008, "question_id": 57790970, "link": "https://stackoverflow.com/questions/57790970/lazy-loaded-module-not-loaded-in-ie11/58396008#58396008", "title": "Lazy Loaded Module not loaded in IE11", "body": "<p>This might help:\nmy problem only when i open certain routes, the problem rises and I've figured out that the the routes i am using CKEditor in is responsible for that exception when i replace it with text area the exception gone and life is happy  i was using the CK editor in </p>\n\n<p>check <a href=\"https://github.com/ckeditor/ckeditor5/issues/330\" rel=\"nofollow noreferrer\">github ticket</a></p>\n"}], "owner": {"reputation": 153, "user_id": 8584025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cd86e1daddd5f110924eefe7940b2a?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/8584025/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1561, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1571146412, "creation_date": 1567608648, "last_edit_date": 1567609109, "question_id": 57790970, "link": "https://stackoverflow.com/questions/57790970/lazy-loaded-module-not-loaded-in-ie11", "title": "Lazy Loaded Module not loaded in IE11", "body": "<p>My angular 7 application has two modules txxxxx module and configuration module. Both the modules are lazy loaded from the App Routing Module. The problem is that when i try to navigate to configuration module, it is throwing an error saying \"Loading chunk components-configuration-configuration-module failed.\". This error occurs only in Internet Explorer, its working fine in Edge,Chrome,Safari and Firefox.</p>\n\n<p>These are the things i have already tried :</p>\n\n<ol>\n<li>I added these files in polyfills and it doesn't \nsolve my error.</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import 'core-js/es6/symbol';\r\nimport 'core-js/es6/object';\r\nimport 'core-js/es6/function';\r\nimport 'core-js/es6/parse-int';\r\nimport 'core-js/es6/parse-float';\r\nimport 'core-js/es6/number';\r\nimport 'core-js/es6/math';\r\nimport 'core-js/es6/string';\r\nimport 'core-js/es6/date';\r\nimport 'core-js/es6/array';\r\nimport 'core-js/es6/regexp';\r\nimport 'core-js/es6/map';\r\nimport 'core-js/es6/set';</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ol start=\"2\">\n<li>I added the following line to index.ts and i doesn't solve my error:</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My App Routing Module is this : </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const routes: Routes = [{\r\n    path: '',\r\n    pathMatch: 'full',\r\n    redirectTo: 'trends'\r\n  },\r\n  {\r\n    path: 'txxxxx',\r\n    canActivate: [AuthGuardService],\r\n    loadChildren: './components/txxxxxx/txxxxx-ixxxxxx.module#Txxxxxxxxxxxxxxxxxx'\r\n  },\r\n  {\r\n    path: 'configuration',\r\n    canActivate: [AuthGuardService],\r\n    loadChildren: './components/configuration/configuration.module#ConfigurationModule'\r\n  }\r\n];</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The error that is thrown on IE is :</p>\n\n<p><a href=\"https://i.stack.imgur.com/lSSMp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lSSMp.png\" alt=\"\"></a></p>\n"}, {"tags": ["angular", "typescript", "powerbi", "embed"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 5687307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7a0ce2b46c87745b65bb2c3ab8dd0e?s=128&d=identicon&r=PG&f=1", "display_name": "Leah", "link": "https://stackoverflow.com/users/5687307/leah"}, "is_accepted": false, "score": 0, "last_activity_date": 1567608348, "creation_date": 1567608348, "answer_id": 57790874, "question_id": 57790806, "link": "https://stackoverflow.com/questions/57790806/how-i-can-change-styles-of-power-bi-embed/57790874#57790874", "title": "How I can change styles of power bi embed?", "body": "<p>you can make a mobile friendly version in PowerBI itself and it will detect when it is in mobile state.</p>\n\n<p>1) In Report View in Power BI Desktop, on the View tab, select Phone Layout. ...\n2) To add a visual to the phone layout, drag it from the Visualizations pane to the phone canvas.</p>\n\n<p>you can add a white visual...</p>\n"}], "owner": {"reputation": 1, "user_id": 12020437, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kki0GmN-sq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd0uWQCrExbuyLsys6JjzaeJAlGwQ/photo.jpg?sz=128", "display_name": "Filipe Santiago", "link": "https://stackoverflow.com/users/12020437/filipe-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567608348, "creation_date": 1567608093, "question_id": 57790806, "link": "https://stackoverflow.com/questions/57790806/how-i-can-change-styles-of-power-bi-embed", "title": "How I can change styles of power bi embed?", "body": "<pre><code>I made a site that includes powerbi embedded. \n</code></pre>\n\n<p>In mobile version, i want to make a margin-left to center reports.</p>\n\n<pre><code> Here's my config parameters\n\nsettings: this.isMobile ? {\n                filterPaneEnabled: this.reportConfig.filterPaneEnabled,\n                navContentPaneEnabled: this.reportConfig.navContentPaneEnabled,\n                layoutType: 0,\n                customLayout: {\n                    displayOption: 1\n                }\n            } :\n                {\n                    filterPaneEnabled: this.reportConfig.filterPaneEnabled,\n                    navContentPaneEnabled: this.reportConfig.navContentPaneEnabled\n                }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1567607638, "post_id": 57790519, "comment_id": 102014470, "body": "How do you intend for this function to be used? Do you want someone to be able to call <code>createRequest&lt;number&gt;(&#47;*some arguments*&#47;)</code> and have your function return a promise that resolves to a number?"}, {"owner": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "edited": false, "score": 0, "creation_date": 1567608213, "post_id": 57790519, "comment_id": 102014867, "body": "Did you try to use &#39;await fetch&lt;P&gt;(url.toStrin(), paramters)&#39;"}, {"owner": {"reputation": 2316, "user_id": 797531, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/de1e1a4cd097890e6c5c7f4ba4891f27?s=128&d=identicon&r=PG", "display_name": "francadaval", "link": "https://stackoverflow.com/users/797531/francadaval"}, "edited": false, "score": 0, "creation_date": 1567610163, "post_id": 57790519, "comment_id": 102015961, "body": "The error is because, if you define R as another thing that is not a string, this function could return a promise of string instead of a promise of R (if as==&#39;text&#39;) so the function doesn&#39;t fulfill the definition."}, {"owner": {"reputation": 685, "user_id": 5226538, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e83057d5e2be6e2728245dfad9a90db2?s=128&d=identicon&r=PG&f=1", "display_name": "Altaula", "link": "https://stackoverflow.com/users/5226538/altaula"}, "reply_to_user": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1567629740, "post_id": 57790519, "comment_id": 102023881, "body": "@NicholasTower yes"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 5226538, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e83057d5e2be6e2728245dfad9a90db2?s=128&d=identicon&r=PG&f=1", "display_name": "Altaula", "link": "https://stackoverflow.com/users/5226538/altaula"}, "edited": false, "score": 0, "creation_date": 1567670860, "post_id": 57791220, "comment_id": 102034129, "body": "Your solution works like charm but I have another issue. Can you please help me? I&#39;m using your solution for createRequest function, but It does not work in another place. <a href=\"https://stackoverflow.com/questions/57800985/typescript-class-using-function-with-many-shapes-overloads-generics\" title=\"typescript class using function with many shapes overloads generics\">stackoverflow.com/questions/57800985/&hellip;</a>"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1567609611, "creation_date": 1567609611, "answer_id": 57791220, "question_id": 57790519, "link": "https://stackoverflow.com/questions/57790519/typescript-generic-function-return-type-issue/57791220#57791220", "title": "TypeScript Generic function return type issue", "body": "<p>I'd probably use <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">overloads</a> to represent this distinction from the caller's side... if the caller specifies <code>\"text\"</code> then the return type is definitely <code>Promise&lt;string&gt;</code> and the function is not generic in <code>R</code> anymore.</p>\n\n<p>Aside: TypeScript naming conventions usually reserve single-character uppercase names for generic type parameters (especially <code>T</code>, <code>U</code>, <code>K</code>, and <code>P</code>), so I will expand your <code>P</code> to <code>Params</code>.  Also, the identifier <code>as</code> is problematic because it is a reserved word in TypeScript and might confuse the IDE or compiler; I will replace <code>as</code> with <code>az</code> in what follows.  Okay, so your interface is </p>\n\n<pre><code>interface Params {\n  az?: \"json\" | \"text\";\n  body?: FormData | URLSearchParams | null | string;\n  headers?: Array&lt;Array&lt;string&gt;&gt; | Headers | { [name: string]: string };\n  method?: string;\n  queries?: { [name: string]: string };\n}\n</code></pre>\n\n<p>Here are the overloads I'd use.  One non-generic call signature which only accepts an <code>az</code> of <code>\"text\"</code>, and the other is generic in <code>R</code> and only accepts an <code>az</code> of <code>\"json\"</code> or <code>undefined</code>/missing. The <em>implementation</em> signature can involve <code>R | string</code> or <code>any</code> or whatever you want, since it is invisible from the caller's side.</p>\n\n<pre><code>async function createRequest(\n  url: URL | string,\n  { az, queries, ...parameters }: Params &amp; { az: \"text\" }\n): Promise&lt;string&gt;;\nasync function createRequest&lt;R&gt;(\n  url: URL | string,\n  { az, queries, ...parameters }: Params &amp; { az?: \"json\" }\n): Promise&lt;R&gt;;\nasync function createRequest&lt;R&gt;(\n  url: URL | string,\n  { az, queries, ...parameters }: Params\n): Promise&lt;R | string&gt; {\n  if (isString(url)) {\n    url = new URL(url);\n  }\n\n  if (queries) {\n    for (const name in queries) {\n      url.searchParams.set(name, queries[name]);\n    }\n  }\n\n  const response = await fetch(url.toString(), parameters);\n\n  if (response.ok) {\n    switch (az) {\n      case \"json\":\n        return response.json();\n      case \"text\":\n        return response.text(); // &lt;- okay now\n      default:\n        return response.json();\n    }\n  }\n\n  throw new Error(\"!\");\n}\n</code></pre>\n\n<p>And here's how we'd use it to get text:</p>\n\n<pre><code>const promiseString = createRequest(\"str\", { az: \"text\" }); // Promise&lt;string&gt;\n</code></pre>\n\n<p>And here's how we'd use it to get some other type (which requires that the caller specify <code>R</code> because it can't be inferred):</p>\n\n<pre><code>interface Dog {\n  name: string;\n  age: number;\n  breed: string;\n  fleas: boolean;\n}\n\nconst promiseDog = createRequest&lt;Dog&gt;(\"dog\", {}); // Promise&lt;Dog&gt;\n</code></pre>\n\n<p>And note that you can't ask for <code>\"text\"</code> if you've specified <code>R</code>:</p>\n\n<pre><code>const notGeneric = createRequest&lt;Dog&gt;(\"dog\", {az: \"text\"}); // error!\n//                                     -----&gt; ~~\n// \"text\" is not assignable to \"json\" or undefined\n</code></pre>\n\n<p>Okay, I hope this helps you.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgApynAtgZ2QbwFgAoZZOALwH4AuZAIgCscB7Ee5AHwcgA8x6AbhJkARiwAmAT1rIAYiyhYAInDBwuyAKoAlADIBlCBgQALdJlyaQAVwA2dzTjBRQAc2Glkp4xOg5ZAEEoTCkAHmDQsOdXEDcAPnjNAAlff018ZABtEGwIOhj3AF0Cl3dkAF9PMiwIMFNJWUK46uQARxtoYAgAukycvNLYtxLkZrdKzwqSEj8EOwwUGBsQBDBgNmRgHAMyuIAKXjo4ECkASjpeLbxxzxI4HClV5GXV9c2EKGNIHQgOnrA+xEyBsUDsdF0eicezcABpgZlKLD2p1XD1kQA6LEABwweUgUDwFToFmweAAZARyBQ6PQ+AJKiQLmgoCwsNsINEYfFPA8nggXis1hsQMhPt8IL9-s4wjp4kCvKDwdp9NDhvCvIiKMj-micJicXjagSiSSjRSqZRZExWOxGcRmahWeycJy5bzHs9XsKPl81JK-p0ZXKFWQlRDVdxxhqyFqdajuvrkFiMbjLHV0sS0OamSTnRzZWr3EkiF5gDBkPttrthvslWczgRgWGwcgALzIEAQADuKr0dbBZ1a02IwPLld1icbpbIZBgikrCDYzk7eS2osnPWnzdnSoxrpM5nN+7q+1ytXjXR6A1qRSHO5HZBHwKXIBXXxw2OXKA7cG7cGAMAXjqMwBzsDEwBYGt3H2M5kTTfF-HvUcywrfYPy-N8IAxFgAGtty8MgcG7QCzErSgCNnWcEAeFAbTYegaB3KivjAUFRQw78MWYNhYNaKiaNdHgIH4RjmNnVj2OQTisIgkTASHZAAHolOQMIAFpkDwuApE7Fhu3Evx4HsMAmMIqjpLqKSZNdbjbT4h9gWfLx6lZXsu17ABREJFH2egAEJ6GQ5zXxXbF81daC4nbMU-R+QMAT8mJ6GRLVaXpDgKkUlSWTZAtxniGZiFAAl4CQZBlBYCYZ1XWohncVo4DcfJOxsLBRGgVpRC+CAJHqlpgRgOxjBwOhxBYYaTimIrQqA8K8tdSqJg7cV-SlIMwDCJb5XoCQqpSggssEZTVKdBbOW2mblyAkAWDAABxCAu1cAUVrigNpU27a-L2twDvwSh0vk+gjpO5BoFZKB-JIHKLLh+GEcR5B1JRlGkgAP3RmHVLpYHrj0oCHhwYA3FyURhuQSCGB4u0FxWIzQF6oqSCAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 685, "user_id": 5226538, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e83057d5e2be6e2728245dfad9a90db2?s=128&d=identicon&r=PG&f=1", "display_name": "Altaula", "link": "https://stackoverflow.com/users/5226538/altaula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 0, "accepted_answer_id": 57791220, "answer_count": 1, "score": 1, "last_activity_date": 1567609611, "creation_date": 1567607061, "question_id": 57790519, "link": "https://stackoverflow.com/questions/57790519/typescript-generic-function-return-type-issue", "title": "TypeScript Generic function return type issue", "body": "<h1>I want to define the function return type via TypeScript Generics. So the <code>R</code> can be anything what I will define.</h1>\n\n<p><code>... Promise&lt;R | string&gt;</code> is not solution for me</p>\n\n<h2>Error</h2>\n\n<p>Error:(29, 9) TS2322: Type 'string' is not assignable to type 'R'.\n  'string' is assignable to the constraint of type 'R', but 'R' could be instantiated with a different subtype of constraint '{}'.</p>\n\n<pre><code>import { isString, } from '@redred/helpers';\n\ninterface P {\n  as?: 'json' | 'text';\n  body?: FormData | URLSearchParams | null | string;\n  headers?: Array&lt;Array&lt;string&gt;&gt; | Headers | { [name: string]: string };\n  method?: string;\n  queries?: { [name: string]: string };\n}\n\nasync function createRequest&lt;R&gt; (url: URL | string, { as, queries, ...parameters }: P): Promise&lt;R&gt; {\n  if (isString(url)) {\n    url = new URL(url);\n  }\n\n  if (queries) {\n    for (const name in queries) {\n      url.searchParams.set(name, queries[name]);\n    }\n  }\n\n  const response = await fetch(url.toString(), parameters);\n\n  if (response.ok) {\n    switch (as) {\n      case 'json':\n        return response.json();\n      case 'text':\n        return response.text(); // &lt;- Error\n      default:\n        return response.json();\n    }\n  }\n\n  throw new Error('!');\n}\n\nexport default createRequest;\n</code></pre>\n"}, {"tags": ["typescript", "promise", "typescript-generics"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1567607466, "post_id": 57790423, "comment_id": 102014364, "body": "Just FWIW, I wouldn&#39;t wrap promises that way if you can possibly avoid it. I&#39;ve always been able to avoid it."}, {"owner": {"reputation": 13, "user_id": 7903281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aeaff413d76740e7e41dc796d4d559f?s=128&d=identicon&r=PG&f=1", "display_name": "Abid Rahim", "link": "https://stackoverflow.com/users/7903281/abid-rahim"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1567611421, "post_id": 57790423, "comment_id": 102016634, "body": "I acknowledge that"}], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 6129793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXYqC.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6129793/peter"}, "edited": false, "score": 0, "creation_date": 1567607622, "post_id": 57790600, "comment_id": 102014459, "body": "why on earth would you ever write code that way? Serious question."}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "reply_to_user": {"reputation": 1984, "user_id": 6129793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXYqC.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6129793/peter"}, "edited": false, "score": 0, "creation_date": 1567607762, "post_id": 57790600, "comment_id": 102014552, "body": "@Peter - With promises, TypeScript only helps a little bit, mostly with intelligently handling <code>async</code> function return types. The plumbing for a <b>really</b> general-purpose thing like <code>Promise</code> is very non-trivial. (And I would not try to wrap them like this.) I&#39;m probably missing a couple of things above. :-)"}], "tags": [], "owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": true, "score": 0, "last_activity_date": 1567608480, "last_edit_date": 1567608480, "creation_date": 1567607368, "answer_id": 57790600, "question_id": 57790423, "link": "https://stackoverflow.com/questions/57790423/how-to-add-typescript-interface-for-js-promises/57790600#57790600", "title": "How to add Typescript interface for Js promises?", "body": "<blockquote>\n  <p>does use of generics make sense here</p>\n</blockquote>\n\n<p>Yes, but you'll also need an interface type for your wrapped promise. (Well, you don't <strong>need</strong> it, but it'll make life much simpler). Let's start with that:</p>\n\n<pre><code>interface WrappedPromise&lt;T&gt; extends Promise&lt;T&gt; {\n    resolve(v: T): void;\n    reject(e: Error): void;\n    promise: Promise&lt;T&gt;;\n}\n</code></pre>\n\n<p>You may want to tweak some things here or there, but for instance since you don't know what a <code>then</code> handler might convert the fulfillment passing through it into, <code>Promise&lt;any&gt;</code> makes sense for <code>then</code>'s return type.</p>\n\n<p>Then it's a matter of assigning type arguments to your function and probably using a <code>Partial</code> wrapper on <code>wrappedPromise</code> since it initially doesn't have all the properties <code>WrappedPromise</code> requires (and that means we'll need to use a type assertion at the end once we know it has all the parts):</p>\n\n<pre><code>const wrappedPromise = function&lt;T&gt;(): WrappedPromise&lt;T&gt; {\n  var wrappedPromise: Partial&lt;WrappedPromise&lt;T&gt;&gt; = {},\n    promise = new Promise&lt;T&gt;(function(resolve, reject) {\n      wrappedPromise.resolve = resolve;\n      wrappedPromise.reject = reject;\n    });\n  wrappedPromise.then = promise.then.bind(promise);\n  wrappedPromise.catch = promise.catch.bind(promise);\n  wrappedPromise.promise = promise;\n  return wrappedPromise as WrappedPromise&lt;T&gt;;\n};\n</code></pre>\n\n<p>Again, you may need to tweak that some, but you get the idea.</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#code/JYOwLgpgTgZghgYwgAgOpTgB0xAJgBSgHsBbYAZwgB4AVAPmQgA9IRdzlDSLr7kBvAFDIRyKBHJEANgDcIAChkAuZDQCUKmUWC4A3MNHiAVhARh5EFQFEoxKBuRad+0ckzEylFV0+86+gF9BBCIQcjBkAHcMbDwfHmQAXmQYAFcQM2BQ2jp5B3QsHAIPHhyBAxk4KCiYovivTiqwYDgpKgLY4u5KHIZk-gCAGgMRd26UZJAISM4Snvp5NIzm0PlxSVkIQbEIEzM1ctcRaMK4uYgAOnXpOSSdjbkXI5PO+svjUwjkj7MnkQC1E8XnVzhcwAALCAgO5jXxgyEgC4AI1AuHksJ4gIMwLO4wuCDgYAQ4JhoIJRPByNR6POWOOtVxcIxlFJ4ye4jAqSg0JxXV8yDgHA6IPGOUCuiAA\" rel=\"nofollow noreferrer\">Live on the playground</a></p>\n\n<p>You'll want to take a close look at TypeScript's definition of <code>Promise</code> to see whether there's more you want to do there...</p>\n"}], "owner": {"reputation": 13, "user_id": 7903281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aeaff413d76740e7e41dc796d4d559f?s=128&d=identicon&r=PG&f=1", "display_name": "Abid Rahim", "link": "https://stackoverflow.com/users/7903281/abid-rahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 57790600, "answer_count": 1, "score": 0, "last_activity_date": 1567608480, "creation_date": 1567606704, "question_id": 57790423, "link": "https://stackoverflow.com/questions/57790423/how-to-add-typescript-interface-for-js-promises", "title": "How to add Typescript interface for Js promises?", "body": "<p>I'm new to TypeScript and trying to set types of Promises to the following code</p>\n\n<p>Giving type of <code>Promise&lt;any&gt;</code> to <strong>promise</strong> variable is still giving squiggly red for <strong>.resolve</strong> , <strong>.reject</strong> and <strong>.promise</strong></p>\n\n<pre><code>const wrappedPromise = function() {\n  var wrappedPromise = {},\n    promise = new Promise(function(resolve, reject) {\n      wrappedPromise.resolve = resolve;\n      wrappedPromise.reject = reject;\n    });\n  wrappedPromise.then = promise.then.bind(promise);\n  wrappedPromise.catch = promise.catch.bind(promise);\n  wrappedPromise.promise = promise;\n  return wrappedPromise;\n};\n</code></pre>\n\n<p>Also, does use of <em>generics</em> make sense here? If yes, then how?</p>\n"}, {"tags": ["typescript", "npm", "package.json"], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 678532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810d1f21b587003cea2fcc001db5cb35?s=128&d=identicon&r=PG", "display_name": "adamfsk", "link": "https://stackoverflow.com/users/678532/adamfsk"}, "is_accepted": false, "score": 1, "last_activity_date": 1601897137, "last_edit_date": 1601897137, "creation_date": 1586612385, "answer_id": 61157675, "question_id": 57790306, "link": "https://stackoverflow.com/questions/57790306/how-to-construct-package-dependencies-with-typescript-bundled-projects/61157675#61157675", "title": "How to construct package dependencies with typescript bundled projects?", "body": "<p>The command everyone normally uses is simply <code>npm install</code>. The additional parameter <code>\u2014only=dev</code> that you're using is telling NPM to only download the packages inside the devDependencies section.</p>\n<p>It's not a switch to be used for dev vs production builds! This is why you're seeing errors.</p>\n<p>As you're creating a TypeScript library, there's no need for definitions in @types as you\u2019ve found out. We can instead include our definitions in the package itself:</p>\n<p>Ensure that TypeScript is also creating definitions files in your output - check your output folder (usually the dist or lib folder) if you see files with the extension .d.ts alongside the .js files then great, otherwise look up how to set up tsconfig.json to emit definitions until it does.</p>\n<p>Once you\u2019ve got the types, in package.json there is the property \u201cmain\u201d where you declare the entry point to your compiled .js package in the output folder. There's also a property \u201ctypes\u201d which you'll need to add and point at the .d.ts file with the same name as your main entry point.</p>\n<p>That should be all you need to do to get things up and running if you haven't already.</p>\n"}], "owner": {"reputation": 153, "user_id": 10368852, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qcxftk6BXZI/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNXU7btVrqUP9nGLRY4KSPcIeA-mA/mo/photo.jpg?sz=128", "display_name": "Ilia", "link": "https://stackoverflow.com/users/10368852/ilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1601897137, "creation_date": 1567606275, "question_id": 57790306, "link": "https://stackoverflow.com/questions/57790306/how-to-construct-package-dependencies-with-typescript-bundled-projects", "title": "How to construct package dependencies with typescript bundled projects?", "body": "<p>I'm writing a typescript module that uses a typescript based project (<code>winston</code>).</p>\n\n<p>This project has <a href=\"https://github.com/winstonjs/winston/blob/master/index.d.ts\" rel=\"nofollow noreferrer\">bundled its types in a <code>index.d.ts</code></a> file and has no <code>@types/winston</code> package that can be used as a \"devDependency\".</p>\n\n<p>As I understand it, the <code>typescript</code> dependency should reside in the <code>devDependencies</code> section as it's not a runtime needed dependency.\nThe <code>winston</code> dependency should of course reside in the <code>dependencies</code> section as it will be used in runtime.</p>\n\n<p>Thing is, if I run <code>npm install --only=dev</code>, the <code>winston</code> package will not be downloaded, and my <code>tsc</code> execution will fail since I don't have the <code>winston</code> types at hand during compilation (<code>error TS2307: Cannot find module 'winston'</code>).</p>\n\n<p>Even if I somehow workaround this error, it's clear that I won't be able to use the package's typings during typescript compilation as they were not downloaded.</p>\n\n<p>So what should be the approach here?\nDo every typescript bundled package that provides its own types should reside in the <code>devDependencies</code> section of the <code>package.json</code>?\nBut then what about <code>npm install --production</code> that will miss the dependency and will fail in runtime?</p>\n\n<p>I tried adding <code>winston</code> to both <code>devDependencies</code> and the <code>dependencies</code> section of the <code>package.json</code>, but running <code>npm install --only=dev</code> will not download packages that reside in the <code>dependencies</code> section as well (not sure if 'by design' or bug in npm logic).</p>\n\n<p><strong>package.json</strong></p>\n\n<pre><code>{\n  \"name\": \"tst\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"@types/node\": \"^12.7.4\",\n    \"typescript\": \"^3.6.2\"\n  },\n  \"dependencies\": {\n    \"winston\": \"^3.2.1\"\n  }\n}\n</code></pre>\n\n<p><strong>test.ts</strong></p>\n\n<pre><code>import * as winston from \"winston\";\n\nconst logger = winston.someMethod();\n</code></pre>\n"}, {"tags": ["angular", "typescript", "sorting", "angular-material", "collation"], "comments": [{"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 1, "creation_date": 1567605780, "post_id": 57790056, "comment_id": 102013404, "body": "You will need to utilize matSortChange event to implement a custom sort algorithm. The official documentation example shows how to utilize matSortChange <a href=\"https://beta-angular-material-io.firebaseapp.com/components/sort/examples\" rel=\"nofollow noreferrer\">beta-angular-material-io.firebaseapp.com/components/sort/&hellip;</a>"}, {"owner": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "edited": false, "score": 0, "creation_date": 1567606800, "post_id": 57790056, "comment_id": 102013948, "body": "I just checked the JavaScript support for localized sorting for these languages, and language code &#39;da&#39; gives you the sorting you want, but &#39;no&#39; doesn&#39;t - with &#39;no&#39;, the sorting is <code>[&quot;&#198;Gamma&quot;, &quot;&#197;Indigo&quot;, &quot;&#216;Hotel&quot;]</code>."}, {"owner": {"reputation": 9, "user_id": 7335211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f41b893f91167633196d4fedf936ab3?s=128&d=identicon&r=PG", "display_name": "Turbolego", "link": "https://stackoverflow.com/users/7335211/turbolego"}, "reply_to_user": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "edited": false, "score": 0, "creation_date": 1567607084, "post_id": 57790056, "comment_id": 102014114, "body": "@kshetline is it possible to use localized sorting with MatSort?"}, {"owner": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1567607461, "post_id": 57790056, "comment_id": 102014354, "body": "As far as I can tell, only @Alexander Staroselsky&#39;s suggestion would help you do that."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7335211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f41b893f91167633196d4fedf936ab3?s=128&d=identicon&r=PG", "display_name": "Turbolego", "link": "https://stackoverflow.com/users/7335211/turbolego"}, "edited": false, "score": 0, "creation_date": 1567673940, "post_id": 57791045, "comment_id": 102035752, "body": "Fantastic! I also asked about this in the Angular GitHub, and they did not know, so I&#39;d repost your example here so more people can see this! ;) <a href=\"https://github.com/angular/components/issues/16923\" rel=\"nofollow noreferrer\">github.com/angular/components/issues/16923</a>"}], "tags": [], "owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1567610322, "last_edit_date": 1567610322, "creation_date": 1567608900, "answer_id": 57791045, "question_id": 57790056, "link": "https://stackoverflow.com/questions/57790056/collation-for-matsort-with-languages-where-alphabetical-order-is-different-from/57791045#57791045", "title": "Collation for MatSort with languages where alphabetical order is different from Unicode order?", "body": "<p>You would need to use <a href=\"https://material.angular.io/components/sort/api\" rel=\"nofollow noreferrer\">matSortChange</a> to implement a custom sort, in this case a localized sort. This can be done using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare\" rel=\"nofollow noreferrer\">String.prototype.localCompare</a> with language identifier <code>da-DK</code>:</p>\n\n<p>Template:</p>\n\n<pre><code>&lt;table\n  mat-table [dataSource]=\"sortedData\"\n  matSort (matSortChange)=\"sortData($event)\"\n  class=\"mat-elevation-z8\"&gt;\n</code></pre>\n\n<p>Component:</p>\n\n<pre><code>sortData(sort: Sort) {\n  const data = ELEMENT_DATA.slice();\n  if (!sort.active || sort.direction === '') {\n    this.sortedData = data;\n    return;\n  }\n\n  this.sortedData = data.sort((a, b) =&gt; {\n    const isAsc = sort.direction === 'asc';\n    switch (sort.active) {\n      case 'position': return compareNumber(a.position, b.position, isAsc);\n      case 'name': return compareString(a.name, b.name, isAsc);\n      case 'description': return compareString(a.description, b.description, isAsc);\n      default: return 0;\n    }\n  });\n}\n\n// ...\n\nfunction compareNumber(a: number, b: number, isAsc: boolean) {\n  return (a &lt; b ? -1 : 1) * (isAsc ? 1 : -1);\n}\n\nfunction compareString(a: string, b: string, isAsc: boolean) {\n  return a.localeCompare(b, 'da-DK') * (isAsc ? 1 : -1);\n}\n</code></pre>\n\n<p>Here is an <a href=\"https://stackblitz.com/edit/angular-an1uqc-jv1s6z\" rel=\"nofollow noreferrer\">example</a> in action.</p>\n\n<p>The sorted results are as follows:</p>\n\n<pre><code>1 Alpha\n// ...\n6 Foxtrot\n7 \u00c6Gamma\n8 \u00d8Hotel\n9 \u00c5Indigo\n</code></pre>\n\n<p>Then in reverse:</p>\n\n<pre><code>9 \u00c5Indigo\n8 \u00d8Hotel\n7 \u00c6Gamma\n6 Foxtrot\n// ...\n1 Alpha\n</code></pre>\n\n<p>Hopefully that helps!</p>\n"}], "owner": {"reputation": 9, "user_id": 7335211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f41b893f91167633196d4fedf936ab3?s=128&d=identicon&r=PG", "display_name": "Turbolego", "link": "https://stackoverflow.com/users/7335211/turbolego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 57791045, "answer_count": 1, "score": 0, "last_activity_date": 1567610322, "creation_date": 1567605488, "question_id": 57790056, "link": "https://stackoverflow.com/questions/57790056/collation-for-matsort-with-languages-where-alphabetical-order-is-different-from", "title": "Collation for MatSort with languages where alphabetical order is different from Unicode order?", "body": "<p>In Norwegian and Danish Alphabets, the correct order of the Norwegian/Danish characters are:</p>\n\n<ol>\n<li>\u00c6</li>\n<li>\u00d8</li>\n<li>\u00c5</li>\n</ol>\n\n<p>However, MatSort uses the Unicode order for these characters:</p>\n\n<ol>\n<li>\u00c5 (197)</li>\n<li>\u00c6 (198)</li>\n<li>\u00d8 (216)</li>\n</ol>\n\n<p>Could collation be implemented somehow to solve this?</p>\n\n<p>Here is a stackblitz with a table that can be sorted by \"No.\" and \"Name\":</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-an1uqc-8mdqns\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-an1uqc-8mdqns</a></p>\n\n<p>Here's the data in the table:</p>\n\n<pre><code> {position: 1, name: 'Alpha', description: 'Test123'},\n  {position: 2, name: 'Bravo',  description: '0'},\n  {position: 3, name: 'Charlie', description: 'aaa'},\n  {position: 4, name: 'Delta',  description: ''},\n  {position: 5, name: 'Echo',  description: '1'},\n  {position: 6, name: 'Foxtrot',  description: '2'},\n  {position: 7, name: '\u00c6Gamma',  description: ''},\n  {position: 8, name: '\u00d8Hotel',  description: '3'},\n  {position: 9, name: '\u00c5Indigo',  description: '1000'},\n\n];\n</code></pre>\n\n<p>The correct way to sort the last three items (\u00c6Gamma, \u00d8Hotel and \u00c5Indigo) according to the Norwegian/Danish alphabet would be:</p>\n\n<ol>\n<li>\u00c6Gamma</li>\n<li>\u00d8Hotel</li>\n<li>\u00c5Indigo</li>\n</ol>\n\n<p>But MatSort uses the Unicode numbers for these characters and sorts like this instead:</p>\n\n<ol>\n<li>\u00c5Indigo (197)</li>\n<li>\u00c6Gamma (198)</li>\n<li>\u00d8Hotel (216)</li>\n</ol>\n\n<p>Thanks for reading! :]</p>\n"}, {"tags": ["typescript", "vue.js", "lodash", "watch"], "comments": [{"owner": {"reputation": 4430, "user_id": 2690790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/810ebc2ef00faac83286d2bb892f38cd?s=128&d=identicon&r=PG", "display_name": "skovy", "link": "https://stackoverflow.com/users/2690790/skovy"}, "edited": false, "score": 0, "creation_date": 1567605591, "post_id": 57789768, "comment_id": 102013294, "body": "From an initial glance, this appears to be correct. Did you restart your build tool (TypeScript or webpack or something else) and try restarting your editor (or the TypeScript server in your editor)?"}, {"owner": {"reputation": 43, "user_id": 7121990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1216434575084490/picture?type=large", "display_name": "Vadim Rulev", "link": "https://stackoverflow.com/users/7121990/vadim-rulev"}, "reply_to_user": {"reputation": 4430, "user_id": 2690790, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/810ebc2ef00faac83286d2bb892f38cd?s=128&d=identicon&r=PG", "display_name": "skovy", "link": "https://stackoverflow.com/users/2690790/skovy"}, "edited": false, "score": 0, "creation_date": 1567606300, "post_id": 57789768, "comment_id": 102013674, "body": "I use VScode and Vue-CLI with TypeScript, and yes i restart but result the same :-( I think the problem in &#39;@Watch&#39; and how it works, unfortunately i don&#39;t have deep knowledge about TypeScript and it&#39;s decorators."}, {"owner": {"reputation": 3151, "user_id": 1346367, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/efc695256efbe2e850ee509a951efb97?s=128&d=identicon&r=PG", "display_name": "Flame", "link": "https://stackoverflow.com/users/1346367/flame"}, "edited": false, "score": 0, "creation_date": 1567608621, "post_id": 57789768, "comment_id": 102015101, "body": "&quot;How to make life harder with TypeScript&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 147776, "user_id": 3731501, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1", "display_name": "Estus Flask", "link": "https://stackoverflow.com/users/3731501/estus-flask"}, "is_accepted": true, "score": 9, "last_activity_date": 1567612007, "creation_date": 1567612007, "answer_id": 57791893, "question_id": 57789768, "link": "https://stackoverflow.com/questions/57789768/how-to-use-lodash-debounce-in-vuejs-watch-with-typescript/57791893#57791893", "title": "How to use Lodash debounce in VueJs watch with Typescript", "body": "<pre><code>@Watch(\"variable\")\ndebounce(function() {\n  console.log('wow');\n}, 500)\n</code></pre>\n\n<p>isn't a correct syntax. A decorator is supposed to be applied to class member but no name was specified.</p>\n\n<p>There's no straightforward way to use Lodash <code>debounce</code> with <code>Watch</code> decorator because the latter is supposed to be used with prototype method.</p>\n\n<p>It's possible to make it a decorator and chain them but this will likely result in undesirable behaviour because debounce interval will be shared through prototype method between all component instances:</p>\n\n<pre><code>function Debounce(delay: number) {\n  return (target: any, prop: string) =&gt; {\n    return {\n        configurable: true,\n        enumerable: false,\n        value: debounce(target[prop], delay)\n    };\n  }\n}\n\n...\n@Watch('variable')\n@Debounce(500)\nonVariable() { ... }\n...\n</code></pre>\n\n<p>This likely should be achieved by debouncing instance method, similarly to how <a href=\"https://vuejs.org/v2/guide/computed.html#Watchers\" rel=\"noreferrer\">the documentation</a> suggests:</p>\n\n<pre><code>...\ncreated() {\n  this.onDebouncedVariable = debounce(this.onDebouncedVariable, 1000);\n}\n\n@Watch('count')\nonVariable() {\n    this.onDebouncedVariable();\n}\n\nonDebouncedVariable() { ... }\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 8679162, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0jY66p_2hag/AAAAAAAAAAI/AAAAAAAABlQ/FmThMwELZQU/photo.jpg?sz=128", "display_name": "S&#233;verin Beauvais", "link": "https://stackoverflow.com/users/8679162/s%c3%a9verin-beauvais"}, "is_accepted": false, "score": 0, "last_activity_date": 1581720476, "creation_date": 1581720476, "answer_id": 60234422, "question_id": 57789768, "link": "https://stackoverflow.com/questions/57789768/how-to-use-lodash-debounce-in-vuejs-watch-with-typescript/60234422#60234422", "title": "How to use Lodash debounce in VueJs watch with Typescript", "body": "<p>You can use this: <a href=\"https://www.npmjs.com/package/vue-debounce-decorator\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/vue-debounce-decorator</a></p>\n\n<p>And then do this:</p>\n\n<pre><code>  @Watch('value')\n  @Debounce(300)\n  private onValueChanged (val: string): void {\n    // do your thing here\n  }\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7121990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1216434575084490/picture?type=large", "display_name": "Vadim Rulev", "link": "https://stackoverflow.com/users/7121990/vadim-rulev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4408, "favorite_count": 3, "accepted_answer_id": 57791893, "answer_count": 2, "score": 4, "last_activity_date": 1581720476, "creation_date": 1567604638, "question_id": 57789768, "link": "https://stackoverflow.com/questions/57789768/how-to-use-lodash-debounce-in-vuejs-watch-with-typescript", "title": "How to use Lodash debounce in VueJs watch with Typescript", "body": "<p><strong>In VueJS (Javascript) I can do this:</strong></p>\n\n<pre><code>import debounce from \"lodash/debounce\";\n\n...\n\nwatch: {\n  variable: debounce(function() {\n    console.log('wow');\n  }, 500)\n}\n</code></pre>\n\n<p><strong>In VueJS (Typescript) I try:</strong></p>\n\n<pre><code>npm i lodash-es\nnpm i @types/lodash-es -D\n</code></pre>\n\n<p>In component:</p>\n\n<pre><code>import { Component, Vue, Watch } from \"vue-property-decorator\";\nimport debounce from \"lodash-es/debounce\";\n\n...\n\n@Watch(\"variable\")\ndebounce(function() {\n  console.log('wow');\n}, 500)\n</code></pre>\n\n<p>But I get errors:</p>\n\n<ul>\n<li><em>'debounce', which lacks return-type annotation, implicitly has an 'any' return type.</em></li>\n<li><em>Member '500' implicitly has an 'any' type.</em></li>\n</ul>\n\n<p>P.S. This works fine:</p>\n\n<pre><code>func = debounce(() =&gt; {\n    console.log('wow');\n}, 500)\n</code></pre>\n"}, {"tags": ["typescript", "angular7"], "comments": [{"owner": {"reputation": 9809, "user_id": 2308005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/I8e1z.jpg?s=128&g=1", "display_name": "Medet Tleukabiluly", "link": "https://stackoverflow.com/users/2308005/medet-tleukabiluly"}, "edited": false, "score": 0, "creation_date": 1567604143, "post_id": 57789491, "comment_id": 102012370, "body": "you have to bind result to scope, then use it inside your kendo grid"}, {"owner": {"reputation": 69, "user_id": 4178344, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/572a54197b40a016f92f475260bd460f?s=128&d=identicon&r=PG&f=1", "display_name": "Radiohead", "link": "https://stackoverflow.com/users/4178344/radiohead"}, "reply_to_user": {"reputation": 9809, "user_id": 2308005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/I8e1z.jpg?s=128&g=1", "display_name": "Medet Tleukabiluly", "link": "https://stackoverflow.com/users/2308005/medet-tleukabiluly"}, "edited": false, "score": 0, "creation_date": 1567604525, "post_id": 57789491, "comment_id": 102012629, "body": "I don&#39;t think scope exists in Angular 7."}], "owner": {"reputation": 69, "user_id": 4178344, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/572a54197b40a016f92f475260bd460f?s=128&d=identicon&r=PG&f=1", "display_name": "Radiohead", "link": "https://stackoverflow.com/users/4178344/radiohead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567603809, "creation_date": 1567603809, "question_id": 57789491, "link": "https://stackoverflow.com/questions/57789491/how-to-return-promise-to-ui", "title": "How to return Promise to UI", "body": "<p>I am calling a function from a Kendo-grid-column.  That function calls a service to retrieve data from within a Promise.  How do I get the data once resolved, back to the UI?</p>\n\n<p><strong>Typescript code:</strong></p>\n\n<pre><code>get_AgreementNumber(contactFunc: ContactFunction) {\n    var result = new Promise(async (resolve, reject) =&gt; {\n      if (contactFunc.AgreementId != null) {\n         this.agreementService.getBy(contactFunc.AgreementId)\n          .toPromise()\n          .then(function (result) {\n            var res = result.data;\n            return resolve(res[0].agreementNumber);\n          },\n            error =&gt; {\n              return resolve(null);\n            });\n      }\n    });\n    return result;    \n  }\n</code></pre>\n\n<p><strong>Kendo grid cell in ui:</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;kendo-grid-column field=\"ContactFunctions\" title=\"Agreement/Function\" width=\"200\" editor=\"numeric\" [headerStyle]=\"{'color': 'black','font-weight':'bold'}\"&gt;\r\n          &lt;ng-template kendoGridCellTemplate let-dataItem let-rowIndex=\"rowIndex\"&gt;\r\n            &lt;span *ngFor=\"let item of dataItem.ContactFunctions;let i = index\"&gt;\r\n              {{get_AgreementNumber(item)}}\r\n              &lt;label *ngIf=\"item.AgreementId\"&gt;&lt;br/&gt;&lt;/label&gt;\r\n              {{getContactFunction(item)}}\r\n              &lt;label *ngIf=\"(dataItem.ContactFunctions.length-1)&gt;i\"&gt;&lt;br/&gt;&lt;br/&gt;&lt;/label&gt;\r\n            &lt;/span&gt;\r\n          \r\n          &lt;/ng-template&gt;\r\n        &lt;/kendo-grid-column&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>This is what I see in grid</strong></p>\n\n<p>[object Promise] </p>\n"}, {"tags": ["typescript", "graphql"], "answers": [{"tags": [], "owner": {"reputation": 57003, "user_id": 6024220, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6s3nUiQ9-fI/AAAAAAAAAAI/AAAAAAAAA0E/3zpg3zXHu4I/photo.jpg?sz=128", "display_name": "Daniel Rearden", "link": "https://stackoverflow.com/users/6024220/daniel-rearden"}, "is_accepted": false, "score": 0, "last_activity_date": 1567605812, "creation_date": 1567605812, "answer_id": 57790164, "question_id": 57789077, "link": "https://stackoverflow.com/questions/57789077/graphql-just-return-raw-data/57790164#57790164", "title": "GraphQl just return raw data", "body": "<p>The response you are seeing is in the expected format as outlined in the <a href=\"https://graphql.github.io/graphql-spec/June2018/#sec-Response-Format\" rel=\"nofollow noreferrer\">spec</a>. The actual data is wrapped inside a <code>data</code> property because any errors will be returned separately from the data:</p>\n\n<pre><code>{\n  \"data\": null,\n  \"errors\" [\n    {\n      \"message\": \"Oh no! Something went wrong!\"\n    }\n  ]\n}\n</code></pre>\n\n<p>GraphQL supports partial responses, so it's possible to have some data returned along with an array of errors.</p>\n\n<p><code>GetPing</code> is also a necessary part of the response. <code>GetPing</code> is a field on your <code>Query</code> type. You could request any number of other fields as well:</p>\n\n<pre><code>query {\n  getPing {\n    ping\n  }\n  getFoo {\n    foo\n  }\n}\n</code></pre>\n\n<p>If multiple fields were requested, it wouldn't make sense to somehow flatten the data structure to just the child fields -- you'd want to know which child field belonged to which root field.</p>\n"}], "owner": {"reputation": 31, "user_id": 10037495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a16bedc6e057be63cfa53e59ce713e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ezerzez", "link": "https://stackoverflow.com/users/10037495/ezerzez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1567605812, "creation_date": 1567602357, "last_edit_date": 1567604144, "question_id": 57789077, "link": "https://stackoverflow.com/questions/57789077/graphql-just-return-raw-data", "title": "GraphQl just return raw data", "body": "<p>I use GraphQL.\nThat's query, that I use:</p>\n\n<pre><code>query Query {\n  GetPing {\n    ping\n  }\n}\n</code></pre>\n\n<p>I except get something like this:</p>\n\n<pre><code>{\n    ping: pong\n}\n</code></pre>\n\n<p>But I get that:</p>\n\n<pre><code>{\n  \"data\": {\n    \"GetPing\": {\n      \"ping\": \"pong\"\n    }\n  }\n}\n</code></pre>\n\n<p>Graphgl just return raw data without any processing. How to fix it?</p>\n"}, {"tags": ["angular", "typescript", "ng-bootstrap"], "comments": [{"owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "edited": false, "score": 0, "creation_date": 1567602678, "post_id": 57788971, "comment_id": 102011497, "body": "Welcome to SO. Please include the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code to the post. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "edited": false, "score": 0, "creation_date": 1567604742, "post_id": 57788971, "comment_id": 102012760, "body": "Have you tried the solution?"}], "answers": [{"tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1567604573, "last_edit_date": 1567604573, "creation_date": 1567602933, "answer_id": 57789243, "question_id": 57788971, "link": "https://stackoverflow.com/questions/57788971/angular-7-select-method-dont-work-on-dynamically-created-ngb-tabs/57789243#57789243", "title": "Angular 7 select method don&#39;t work on dynamically created ngb-tabs", "body": "<p>You need to select the tab once people is loaded completely.</p>\n\n<p>Modify <code>ngOnInit()</code> like this:</p>\n\n<pre><code> ngOnInit() {\n    this.dataService.get().subscribe(people =&gt; {\n      this.people = people;\n      setTimeout(() =&gt; {\n        this.tabSet.select('Samantha')\n      }, 0);\n    },\n      error =&gt; console.log(error));\n  }\n</code></pre>\n\n<p>See <a href=\"https://stackblitz.com/edit/ng-bootstrap-tabs-qk34yd?file=app%2Ftabset-config.ts\" rel=\"nofollow noreferrer\">Working Demo</a></p>\n"}], "owner": {"reputation": 19, "user_id": 12019697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c949b1d1df5df649baf2565631f04ffd?s=128&d=identicon&r=PG&f=1", "display_name": "annon667", "link": "https://stackoverflow.com/users/12019697/annon667"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567604573, "creation_date": 1567601996, "question_id": 57788971, "link": "https://stackoverflow.com/questions/57788971/angular-7-select-method-dont-work-on-dynamically-created-ngb-tabs", "title": "Angular 7 select method don&#39;t work on dynamically created ngb-tabs", "body": "<p>I am using Angular 7 with ng-bootstrap. I am calling API to get data from database. At page load I dynamically create tabs. That all works, but when I want to select default tab on load It does't work.</p>\n\n<p>I tried .select method, id and attr.id setting, tried to set active.Id on ngb-tabset,... Nothing works. Someone know where the problem is?</p>\n\n<p>Code:</p>\n\n<p><a href=\"https://stackblitz.com/edit/ng-bootstrap-tabs-3cavxt\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/ng-bootstrap-tabs-3cavxt</a></p>\n\n<p>Thanks for answers!</p>\n"}, {"tags": ["typescript", "http2", "fastify"], "answers": [{"tags": [], "owner": {"reputation": 5245, "user_id": 1376627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/HLKGd.jpg?s=128&g=1", "display_name": "david_adler", "link": "https://stackoverflow.com/users/1376627/david-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1567674741, "creation_date": 1567674741, "answer_id": 57802137, "question_id": 57788548, "link": "https://stackoverflow.com/questions/57788548/typescript-fastify-http2-types-not-being-passed/57802137#57802137", "title": "Typescript fastify http2 types not being passed", "body": "<p>Using </p>\n\n<pre><code>const opts: fastify.RouteShorthandOptions&lt;\n    http2.Http2SecureServer,\n    http2.Http2ServerRequest,\n    http2.Http2ServerResponse\n&gt;\n</code></pre>\n\n<p>Works. Should be fixed in v3</p>\n"}], "owner": {"reputation": 5245, "user_id": 1376627, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/HLKGd.jpg?s=128&g=1", "display_name": "david_adler", "link": "https://stackoverflow.com/users/1376627/david-adler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 57802137, "answer_count": 1, "score": 0, "last_activity_date": 1567674741, "creation_date": 1567600607, "question_id": 57788548, "link": "https://stackoverflow.com/questions/57788548/typescript-fastify-http2-types-not-being-passed", "title": "Typescript fastify http2 types not being passed", "body": "<p>I have followed the docs for a <a href=\"https://github.com/fastify/fastify/blob/master/docs/TypeScript.md\" rel=\"nofollow noreferrer\">simple typescript setup</a></p>\n\n<pre><code>import fastify from 'fastify'\nimport { Server, IncomingMessage, ServerResponse } from 'http'\nimport http2 from 'http2'\nimport fs from 'fs'\nimport path from 'path'\n\nfunction createRoutes(server: ServerInstance) {\n  interface Query {\n    foo?: number\n  }\n\n  interface Params {\n    bar?: string\n  }\n\n  interface Body {\n    baz?: string\n  }\n\n  interface Headers {\n    a?: string\n  }\n\n  const opts: fastify.RouteShorthandOptions = {\n    schema: {\n      querystring: {\n        type: 'object',\n        properties: {\n          foo: {\n            type: 'number',\n          },\n        },\n      },\n      params: {\n        type: 'object',\n        properties: {\n          bar: {\n            type: 'string',\n          },\n        },\n      },\n      body: {\n        type: 'object',\n        properties: {\n          baz: {\n            type: 'string',\n          },\n        },\n      },\n      headers: {\n        type: 'object',\n        properties: {\n          a: {\n            type: 'string',\n          },\n        },\n      },\n    },\n  }\n\n  server.get&lt;Query, Params, Headers, Body&gt;(\n    '/ping/:bar',\n    opts,\n    (request, reply) =&gt; {\n      console.log(request.query) // this is of type Query!\n      console.log(request.params) // this is of type Params!\n      console.log(request.body) // this is of type Body!\n      console.log(request.headers) // this is of type Headers!\n      reply.code(200).send({ pong: 'it worked!' })\n    },\n  )\n  return server\n}\n\ntype ServerInstance = fastify.FastifyInstance&lt;\n  http2.Http2SecureServer,\n  http2.Http2ServerRequest,\n  http2.Http2ServerResponse\n&gt;\n\nexport async function createServer() {\n  const server: ServerInstance = fastify({\n    logger: true,\n    http2: true,\n    https: {\n      allowHTTP1: true, // fallback support for HTTP1\n      key: fs.readFileSync(path.join(__dirname, '..', 'https', 'fastify.key')),\n      cert: fs.readFileSync(\n        path.join(__dirname, '..', 'https', 'fastify.cert'),\n      ),\n    },\n  })\n  createRoutes(server)\n  return server\n}\n</code></pre>\n\n<p>However types are not being passed when http2 types are used</p>\n\n<p><a href=\"https://i.stack.imgur.com/rnK5W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rnK5W.png\" alt=\"enter image description here\"></a></p>\n\n<p>Using HTTP1 types like so </p>\n\n<pre><code>type ServerInstance = fastify.FastifyInstance&lt;\n  Server,\n  IncomingMessage,\n  ServerResponse\n&gt;\n</code></pre>\n\n<p>are passed and work correctly</p>\n"}, {"tags": ["typescript", "unit-testing", "mocking", "jestjs", "ts-jest"], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 7659015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210265350104599/picture?type=large", "display_name": "Putxe", "link": "https://stackoverflow.com/users/7659015/putxe"}, "edited": false, "score": 0, "creation_date": 1567694530, "post_id": 57792771, "comment_id": 102047468, "body": "Thank you Brian it works perfectly ! I have noted that it works also just with :  <code>jest.mock(&#39;uuid&#47;v4&#39;);  const uuidv4 = require(&#39;uuid&#47;v4&#39;); </code>  and without need of type assertion."}, {"owner": {"reputation": 28635, "user_id": 10149510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVO7k.jpg?s=128&g=1", "display_name": "Brian Adams", "link": "https://stackoverflow.com/users/10149510/brian-adams"}, "reply_to_user": {"reputation": 756, "user_id": 7659015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210265350104599/picture?type=large", "display_name": "Putxe", "link": "https://stackoverflow.com/users/7659015/putxe"}, "edited": false, "score": 1, "creation_date": 1567695835, "post_id": 57792771, "comment_id": 102048195, "body": "Awesome, good to hear!  Yeah, using <code>jest.Mocked</code> is ideal since it maintains type safety, but since the typing doesn&#39;t work right in this case either the type assertion (some type safety) or <code>const uuidv4 = require(&#39;uuid&#47;v4&#39;);</code> (<code>uuidv4</code> is type <code>any</code>) work fine as workarounds."}], "tags": [], "owner": {"reputation": 28635, "user_id": 10149510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVO7k.jpg?s=128&g=1", "display_name": "Brian Adams", "link": "https://stackoverflow.com/users/10149510/brian-adams"}, "is_accepted": true, "score": 5, "last_activity_date": 1567615829, "creation_date": 1567615829, "answer_id": 57792771, "question_id": 57788291, "link": "https://stackoverflow.com/questions/57788291/jest-mock-node-module-not-working-with-typescript/57792771#57792771", "title": "Jest mock node module not working with typescript", "body": "<p>A common way to handle a situation like this is to auto-mock the module in the test, then tell TypeScript the module is auto-mocked by using <code>jest.Mocked</code> like this:</p>\n\n<pre><code>jest.mock('uuid/v4');  // &lt;= auto-mock uuid/v4\n\nimport uuidv4 from 'uuid/v4';\nconst mocked = uuidv4 as jest.Mocked&lt;typeof uuidv4&gt;;  // &lt;= tell TypeScript it's an auto-mock\n\ntest('hi', () =&gt; {\n  mocked.mockReturnValue('mocked result');  // &lt;= use the properly typed mock\n  expect(uuidv4()).toBe('mocked result');  // Success!\n})\n</code></pre>\n\n<p>Unfortunately the typing for <code>uuid/v4</code> doesn't seem to work right with this approach.</p>\n\n<p>As a workaround you can use a type assertion:</p>\n\n<pre><code>jest.mock('uuid/v4');  // &lt;= auto-mock uuid/v4\n\nimport uuidv4 from 'uuid/v4';\n\ntest('hi', () =&gt; {\n  (uuidv4 as jest.Mock).mockReturnValue('mocked result');  // &lt;= use a type assertion\n  expect(uuidv4()).toBe('mocked result');  // Success!\n})\n</code></pre>\n"}], "owner": {"reputation": 756, "user_id": 7659015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10210265350104599/picture?type=large", "display_name": "Putxe", "link": "https://stackoverflow.com/users/7659015/putxe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2579, "favorite_count": 1, "accepted_answer_id": 57792771, "answer_count": 1, "score": 3, "last_activity_date": 1567615829, "creation_date": 1567599607, "question_id": 57788291, "link": "https://stackoverflow.com/questions/57788291/jest-mock-node-module-not-working-with-typescript", "title": "Jest mock node module not working with typescript", "body": "<p>I try to mock the module <code>uuid/v4</code> coming from npm. \nTo do that, I have created a mock folder as suggested by jest : <a href=\"https://jestjs.io/docs/en/manual-mocks\" rel=\"nofollow noreferrer\">https://jestjs.io/docs/en/manual-mocks</a></p>\n\n<p>My folder structure : </p>\n\n<pre><code>\u251c\u2500\u2500__mocks__ \n|  \u2514\u2500\u2500uuid\n|       \u2514\u2500\u2500v4.ts\n\u251c\u2500\u2500src\n\u2502   \u2514\u2500\u2500__tests__\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500node_modules\n</code></pre>\n\n<p>The mock node module file <strong>v4.ts</strong> : </p>\n\n<pre><code>module.exports = jest.fn();\n</code></pre>\n\n<p>When I try to import uuid/v4 in my test file, jest should normally import the mock and I should be able to play with it. </p>\n\n<p>Here my test file : </p>\n\n<pre><code>import uuidv4 from 'uuid/v4';\n\nit('should create a job', () =&gt; {\n    const jobId = 'fake-job-id';\n    uuidv4.mockReturnValue(jobId); \n    ...\n}\n</code></pre>\n\n<p>Unfortunately, the mock import seems not working because I can't add the <code>mockReturnValue</code> provided by jest and I have the following typescript error : \n<code>property 'mockReturnValue' does not exist on type v4. ts(2339)</code></p>\n\n<p>Do you have any idea how I can fix that please ? Thanks by advance.</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 0, "creation_date": 1567599762, "post_id": 57788199, "comment_id": 102009913, "body": "that function is not exported.. there is e.g. <code>type MemoExoticComponent</code> in <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts#L771\" rel=\"nofollow noreferrer\">@types/react/index.d.ts</a>..."}, {"owner": {"reputation": 693, "user_id": 2263119, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ae4947bfb96b51046ac11d89621152f1?s=128&d=identicon&r=PG", "display_name": "Strobe_", "link": "https://stackoverflow.com/users/2263119/strobe"}, "reply_to_user": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 0, "creation_date": 1567599938, "post_id": 57788199, "comment_id": 102010026, "body": "People are using it though, for example: <a href=\"https://medium.com/memebox-tech/be-more-functional-with-react-memo-typescript-2a0e4f4833ad\" rel=\"nofollow noreferrer\">medium.com/memebox-tech/&hellip;</a>"}, {"owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 1, "creation_date": 1567600294, "post_id": 57788199, "comment_id": 102010231, "body": "they use <code>React.memo&lt;Type&gt;(...)</code> as a function call, not as a type"}], "answers": [{"tags": [], "owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "is_accepted": true, "score": 5, "last_activity_date": 1567633283, "creation_date": 1567633283, "answer_id": 57795934, "question_id": 57788199, "link": "https://stackoverflow.com/questions/57788199/react-memo-is-not-available-when-working-with-typescript/57795934#57795934", "title": "React.memo is not available when working with Typescript?", "body": "<p>As mentioned in the comments, <code>memo</code> is not a type declaration. You have your syntax messed up a little bit</p>\n\n<pre><code>const Node: React.FC&lt;Props&gt; = React.memo(props =&gt; {\n  return(\n      &lt;div&gt;\n        memoized\n      &lt;/div&gt;\n  )\n})\n</code></pre>\n\n<p>Note that <code>React.FC</code> is a declaration of a functional component. Since you're wrapping it in a <code>memo</code>, you <em>might</em> need to change the type. But personally, I have not needed to.</p>\n"}], "owner": {"reputation": 693, "user_id": 2263119, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ae4947bfb96b51046ac11d89621152f1?s=128&d=identicon&r=PG", "display_name": "Strobe_", "link": "https://stackoverflow.com/users/2263119/strobe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2261, "favorite_count": 0, "accepted_answer_id": 57795934, "answer_count": 1, "score": 1, "last_activity_date": 1567633283, "creation_date": 1567599260, "question_id": 57788199, "link": "https://stackoverflow.com/questions/57788199/react-memo-is-not-available-when-working-with-typescript", "title": "React.memo is not available when working with Typescript?", "body": "<p>I'm trying to use React.memo like so: </p>\n\n<p><code>const Node: React.memo&lt;Props&gt; = props =&gt; {</code></p>\n\n<p>But i'm getting an error saying: </p>\n\n<p><code>Namespace '../ui/node_modules/@types/react/index.d.ts\"' has no exported member 'memo'.</code></p>\n\n<p>But I can see the Memo function within index.d.ts:</p>\n\n<pre><code>function memo&lt;P extends object&gt;(\n    Component: SFC&lt;P&gt;,\n    propsAreEqual?: (prevProps: Readonly&lt;PropsWithChildren&lt;P&gt;&gt;, nextProps: Readonly&lt;PropsWithChildren&lt;P&gt;&gt;) =&gt; boolean\n): NamedExoticComponent&lt;P&gt;;\n\nfunction memo&lt;T extends ComponentType&lt;any&gt;&gt;(\n    Component: T,\n    propsAreEqual?: (prevProps: Readonly&lt;ComponentProps&lt;T&gt;&gt;, nextProps: Readonly&lt;ComponentProps&lt;T&gt;&gt;) =&gt; boolean\n): MemoExoticComponent&lt;T&gt;;\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["angular", "typescript", "types"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 10299454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rSJzsYllVk4/AAAAAAAAAAI/AAAAAAAAAI4/DzSeWb4fx2s/photo.jpg?sz=128", "display_name": "STih07", "link": "https://stackoverflow.com/users/10299454/stih07"}, "is_accepted": false, "score": 0, "last_activity_date": 1567598416, "creation_date": 1567598416, "answer_id": 57787962, "question_id": 57787876, "link": "https://stackoverflow.com/questions/57787876/how-to-declare-an-object-whose-properties-are-of-type-string-only-using-typescri/57787962#57787962", "title": "How to declare an object whose properties are of type string only using TypeScript?", "body": "<pre><code>const btn: {[keys: string]: string} = {\n    key: 'value',\n    anotherKey: 'anotherValue'\n}\n</code></pre>\n\n<p>This example should help you.</p>\n"}, {"tags": [], "owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1567598427, "creation_date": 1567598427, "answer_id": 57787967, "question_id": 57787876, "link": "https://stackoverflow.com/questions/57787876/how-to-declare-an-object-whose-properties-are-of-type-string-only-using-typescri/57787967#57787967", "title": "How to declare an object whose properties are of type string only using TypeScript?", "body": "<p>You can do it like following:</p>\n\n<pre><code>config: { [key:string]: ButtonConfig } = {};\n\n...\nthis.config.submitButton = new ButtonConfig(...);\n...\n</code></pre>\n\n<p>Here's a working stackblitz project: <a href=\"https://stackblitz.com/edit/angular-opc8yg\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-opc8yg</a></p>\n"}, {"comments": [{"owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "edited": false, "score": 0, "creation_date": 1567599290, "post_id": 57787976, "comment_id": 102009692, "body": "Perfect reply. Accepted as the correct answer. And +1 for the totally unsolicited extra info that actually resolved another issue I was going to have soon. Good sniper skills, mate."}, {"owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "edited": false, "score": 0, "creation_date": 1567599441, "post_id": 57787976, "comment_id": 102009757, "body": "Would you say that your approach is to be preferred before using interfaces?"}, {"owner": {"reputation": 7439, "user_id": 224751, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3bf59e6fc195123f8f07126e71d89fe4?s=128&d=identicon&r=PG", "display_name": "Thor Jacobsen", "link": "https://stackoverflow.com/users/224751/thor-jacobsen"}, "reply_to_user": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "edited": false, "score": 0, "creation_date": 1567664400, "post_id": 57787976, "comment_id": 102031335, "body": "You mean using <code>type</code> over <code>interface</code>? I think that&#39;s a personal preference. My team has agreed to use <code>type</code> over <code>interface</code> merely beacuse of the semantics on the words."}, {"owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "edited": false, "score": 0, "creation_date": 1567757269, "post_id": 57787976, "comment_id": 102066722, "body": "@Got ya, thanks. I got curious and <a href=\"https://stackoverflow.com/questions/57818032/why-would-interface-or-type-be-preferred-if-anything-in-typescript-under-speci\">couldn&#39;t resist</a> nerding it down in a separate thread. Just letting you know that I&#39;m not criticizing your semantics based choice. I&#39;m just curious on the broader plane."}], "tags": [], "owner": {"reputation": 7439, "user_id": 224751, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3bf59e6fc195123f8f07126e71d89fe4?s=128&d=identicon&r=PG", "display_name": "Thor Jacobsen", "link": "https://stackoverflow.com/users/224751/thor-jacobsen"}, "is_accepted": true, "score": 2, "last_activity_date": 1567598446, "creation_date": 1567598446, "answer_id": 57787976, "question_id": 57787876, "link": "https://stackoverflow.com/questions/57787876/how-to-declare-an-object-whose-properties-are-of-type-string-only-using-typescri/57787976#57787976", "title": "How to declare an object whose properties are of type string only using TypeScript?", "body": "<p>The most simple answer is this:</p>\n\n<pre><code>export type ButtonConfigs = {\n  [key: string]: ButtonConfig;\n}\n</code></pre>\n\n<p>This works very well, if you want a high level of dynamics.</p>\n\n<p>If you want to lock it down a little, you could define an enum that contains the possible keys you want to allow:</p>\n\n<pre><code>export enum ButtonConfigKeys {\n  'submitConfig',\n  'someOtherKey',\n  '...'\n}\n\nexport type ButtonConfigs = {\n  [key: ButtonConfigKeys]: ButtonConfig;\n}\n</code></pre>\n"}], "owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 57787976, "answer_count": 3, "score": 0, "last_activity_date": 1567598446, "creation_date": 1567598080, "question_id": 57787876, "link": "https://stackoverflow.com/questions/57787876/how-to-declare-an-object-whose-properties-are-of-type-string-only-using-typescri", "title": "How to declare an object whose properties are of type string only using TypeScript?", "body": "<p>I have a configuration array in my component like this.</p>\n\n<pre><code>...\nconfig: ButtonConfig[];\n...\nthis.config.push(new ButtonConfig(...));\n...\n</code></pre>\n\n<p>Today, I realized that it makes more sense to have the array behave like a dictionary so I can access the particular elements not by a numeric index but rather canonically by a name. I want to be able to do <code>config.submitButton</code> and not <code>config[3]</code> (even if I have an enum declared that maps <em>submitButton</em> to the requested index).</p>\n\n<pre><code>...\nconfig = { };\n...\nthis.config.submitButton = new ButtonConfig(...);\n...\n</code></pre>\n\n<p>This works but I'm now allowing a bunch of <code>any</code>'s to spoof my code base, which is bad. I want the object to be aware that only things of type <code>ButtonConfig</code> can be put into it.</p>\n\n<p>I can declare a class with the fields because I want the number of them to be dynamically addable in the future, so the following won't do.</p>\n\n<pre><code>export class ButtonConfigs {\n  submitConfig: ButtonConfig, ...\n}\n</code></pre>\n\n<p>I've check <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">the docs</a> and <a href=\"https://stackoverflow.com/questions/12787781/type-definition-in-object-literal-in-typescript\">some examples</a> not really recognizing what I'm looking for. Is it possible at all or an I confusing myself?</p>\n"}, {"tags": ["typescript", "return-type"], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1567608614, "post_id": 57790755, "comment_id": 102015095, "body": "Note that given the enum <code>EntityPropIds</code> you can define something like <code>type EntityIdMapping = typeof EntityPropIds</code> so you don&#39;t have to specify it twice."}], "tags": [], "owner": {"reputation": 123501, "user_id": 1903366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkUeD.png?s=128&g=1", "display_name": "lukasgeiter", "link": "https://stackoverflow.com/users/1903366/lukasgeiter"}, "is_accepted": false, "score": 2, "last_activity_date": 1567608733, "last_edit_date": 1567608733, "creation_date": 1567607862, "answer_id": 57790755, "question_id": 57787831, "link": "https://stackoverflow.com/questions/57787831/return-type-is-object-where-key-is-computed-from-argument/57790755#57790755", "title": "Return type is object where key is computed from argument", "body": "<p>Dynamic property names on a type-level are not yet possible in TypeScript (although there is an <a href=\"https://github.com/microsoft/TypeScript/issues/12754\" rel=\"nofollow noreferrer\">open issue in discussion on Github</a>)</p>\n\n<p>However, as you've suggested, if you create a type to map entity to entityId, it is possible:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface EntityIdMapping {\n  thing: 'thingId';\n}\n\nexport const getEntityPropId = &lt;T extends keyof EntityIdMapping&gt;(value: any, entity: T): {[P in EntityIdMapping[T]]: number} | null =&gt; {\n  const id = getEntityId(value, entity)\n  if (id !== null) return { [`${entity}Id`]: id }\n  return id\n}\n</code></pre>\n\n<p>Instead of an enum I'm using a interface, because those are a little easier to deal with and don't introduce any runtime code.</p>\n\n<p>Next I've added a generic type for the <code>entity</code> argument, which must be a key of the mapping interface.</p>\n\n<p>For the return value we're using a mapped type which loops over all types in <code>EntityIdMapping[T]</code>. In case of <code>T = 'thing'</code>, this only returns one entry for the matching property in the interface.</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgKLmGAngSQCYCycADsaAObIDeAUMsjAPaMBcyA5E4-uwNx3IARnCht2wqD34BfGjVCRYiFACUIYAK5QQANTgAbDRAA8AFWQQAHpBB4AzsjtgoFAHzUBptiA0BbQdA0sjRWxIxQYMgIjCBOyOTq6GCYWAAKUIzE+MgAvMhmFtYQtg4A1hBYjDBoGNj4RKRuABQAbgZGbHAgWAA0FrVYbKYAlGxUANqpyKA1yXWEJGQg5OOmALpr3n4BUNLIAD7IPvr6ue609NGxkcB4ucgALABMAsDVTbfIAIQ5ecf6w2QUHUWhA1GQ4wABgASKjFOZYaT4SGbaZ3PZwBxdLACYGabRooJyfTqIEQOwafSRPIJMBJFLpTL4JpUaR9TjMdjDfjAilUr4AOi4+CAA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1567608733, "creation_date": 1567597924, "question_id": 57787831, "link": "https://stackoverflow.com/questions/57787831/return-type-is-object-where-key-is-computed-from-argument", "title": "Return type is object where key is computed from argument", "body": "<p>Below I have a function <code>getEntityPropId</code> and it returns a object with one prop, like <code>{ 'thingId': 1 }</code> the string <code>thing</code> is passed into the function. </p>\n\n<p>I am curious as to how I can have the function return type include the key <code>thingId</code> and not just any string, because I am passing in everything needed to know the return.</p>\n\n<p>However I get this:</p>\n\n<blockquote>\n  <p>A computed property name in a type literal must refer to an expression whose type is a literal type or a 'unique symbol' type.ts(1170)</p>\n</blockquote>\n\n<pre><code>export const getEntityPropId = (value: any, entity: string): { [`${entity}Id`]: number } | null =&gt; {\n  const id = getEntityId(value, entity)\n  if (id !== null) return { [`${entity}Id`]: id }\n  return id\n}\n</code></pre>\n\n<p>I'd be ok having to setup an <code>enum</code> if necessary.</p>\n\n<pre><code>enum EntityPropIds {\n  thing = 'thingId',\n}\n\nexport const getEntityPropId = (value: any, entity: EntityPropIds): { [EntityPropIds[entity]]: number } | null =&gt; {\n  const id = getEntityId(value, entity)\n  if (id !== null) return { [EntityPropIds[entity]]: id }\n  return id\n}\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["typescript", "visual-studio-code", "vscode-extensions", "language-server-protocol"], "comments": [{"owner": {"reputation": 2907, "user_id": 122762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f141b182dcb2714a5da65e1697cbcbd4?s=128&d=identicon&r=PG", "display_name": "John Wiseman", "link": "https://stackoverflow.com/users/122762/john-wiseman"}, "edited": false, "score": 0, "creation_date": 1606940277, "post_id": 57787621, "comment_id": 115118967, "body": "Checking a year later\u2014were you ever able to figure this out, @profocum?"}, {"owner": {"reputation": 21, "user_id": 12019355, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJ_ay7CTMVU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdpT-BY9tp2wRxkeKx-k93aL4x-GA/photo.jpg?sz=128", "display_name": "profocum", "link": "https://stackoverflow.com/users/12019355/profocum"}, "reply_to_user": {"reputation": 2907, "user_id": 122762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f141b182dcb2714a5da65e1697cbcbd4?s=128&d=identicon&r=PG", "display_name": "John Wiseman", "link": "https://stackoverflow.com/users/122762/john-wiseman"}, "edited": false, "score": 0, "creation_date": 1607033628, "post_id": 57787621, "comment_id": 115153443, "body": "@JohnWiseman Thanks for the kick, yes I got this working some time later. see below"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12019355, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJ_ay7CTMVU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdpT-BY9tp2wRxkeKx-k93aL4x-GA/photo.jpg?sz=128", "display_name": "profocum", "link": "https://stackoverflow.com/users/12019355/profocum"}, "is_accepted": true, "score": 0, "last_activity_date": 1607033216, "creation_date": 1607033216, "answer_id": 65134879, "question_id": 57787621, "link": "https://stackoverflow.com/questions/57787621/how-to-create-and-edit-a-new-file-in-the-workspace-via-language-server-extension/65134879#65134879", "title": "How to create and edit a new file in the workspace via Language Server Extension", "body": "<p>Thanks for the kick, yes I got this working some time later</p>\n<p>It is implemented here:\n<a href=\"https://github.com/proclaimforum/vscode-proclaimscript-language/blob/master/server/src/server.ts\" rel=\"nofollow noreferrer\">https://github.com/proclaimforum/vscode-proclaimscript-language/blob/master/server/src/server.ts</a></p>\n<p>Lines 476 onwards are of note, where:</p>\n<ol>\n<li>a CreateFile variable is constructed, holding the path (uri) of the file to create, and formed into an array of CreateFiles (lines 476-482)</li>\n<li>a WorkspaceEdit variable is created, specifying our above CreateFile array for the documentChanges property (485)</li>\n<li>we pass this to the client to apply via workspace.applyEdit (488). This actually creates the file.</li>\n<li>Text to be added to the new document is first formed into an array of TextEdit objects, consisting of a range (range:) and content (newText:) (491-498)</li>\n<li>an array of TextDocumentEdit  is constructed, containing our TextEdit (500-503)</li>\n<li>we update our workspaceEdit variable property to reference to this array of TextDocumentEdits (506)</li>\n<li>and finally ask our connected client to apply the edits (510)</li>\n</ol>\n<p>I copy the relevant code section below for reference, but have a look at the github link for full implementation, including setting up the client connection etc, setting capabilities etc.</p>\n<pre><code>//uri of new file\nlet currentPath :string = (thisdoc.uri).substr(0,thisdoc.uri.lastIndexOf('/'));\n\nlet newuri = currentPath+'/syntaxcheck.txt';\n\n//construct a CreateFile variable\nlet createFile: CreateFile = { kind: 'create', uri: newuri };\n//and make into array\nlet createFiles: CreateFile[] = [];\ncreateFiles.push(createFile);\n\n//make a new workspaceEdit variable, specifying a createFile document change\nvar workspaceEdit: WorkspaceEdit = { documentChanges: createFiles };\n\n//pass to client to apply this edit\nawait connection.workspace.applyEdit(workspaceEdit);\n\n\n//To insert the text (and pop up the window), create array of TextEdit\nlet textEdit: TextEdit[] = [];\n//let document = documents.get(newuri);\nlet documentRange: Range = Range.create(0, 0, Number.MAX_VALUE, Number.MAX_VALUE);\n//populate with the text, and where to insert (surely this is what workspaceChange.insert is for?)\nlet textEdits: TextEdit = { range: documentRange, newText: syntaxmessage };\n\ntextEdit.push(textEdits);\n\n//make a new array of textDocumentEdits, containing our TextEdit (range and text)\nlet textDocumentEdit = TextDocumentEdit.create({ uri: newuri, version: 1 }, textEdit);\nlet textDocumentEdits: TextDocumentEdit[] = [];\ntextDocumentEdits.push(textDocumentEdit);\n\n//set  our workspaceEdit variable to this new TextDocumentEdit\nworkspaceEdit = { documentChanges: textDocumentEdits };\n\n//and finally apply this to our workspace.\n// we can probably do this some more elegant way \nconnection.workspace.applyEdit(workspaceEdit);\n\n\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12019355, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJ_ay7CTMVU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdpT-BY9tp2wRxkeKx-k93aL4x-GA/photo.jpg?sz=128", "display_name": "profocum", "link": "https://stackoverflow.com/users/12019355/profocum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 65134879, "answer_count": 1, "score": 2, "last_activity_date": 1607039049, "creation_date": 1567597191, "last_edit_date": 1607039049, "question_id": 57787621, "link": "https://stackoverflow.com/questions/57787621/how-to-create-and-edit-a-new-file-in-the-workspace-via-language-server-extension", "title": "How to create and edit a new file in the workspace via Language Server Extension", "body": "<p>How do I get a Language Server Extension to trigger the creation of a new file , edit it, and display it in the attached client's workspace?</p>\n<p>I have a LSP extension written with vscode-languageserver in node.js that executes a Command <strong>on the server</strong> via onExecuteCommand. I want this server-side command to trigger the client to create a new text file, populate it with some text, so it appears on the client's workspace list of open files.</p>\n<p>Looking at <a href=\"https://github.com/microsoft/vscode-languageserver-node/blob/master/client-tests/src/helpers.test.ts\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-languageserver-node/blob/master/client-tests/src/helpers.test.ts</a> I believe what I need to do is create a WorkspaceChange object, run createFile(), apply some changes (.insert) then tell the client to apply the edits via connection.workspace.applyEdit() but this does not work  - no file is created and no errors are thrown in debugger.</p>\n<p>Here is my code inside my server's onExecuteCommand:</p>\n<pre><code>//add some text\nconst textToAdd: string = &quot;test string&quot;;\n\n//create new WorkspaceChange obj\nlet workspaceChange = new WorkspaceChange();\n\n//uri of the file we want to create\nlet newuri = 'file:///c:/temp/create.txt';\n\n//make a TextEditChange obj. Fails if you do not supply version\nlet change = workspaceChange.getTextEditChange({ uri: newuri, version: 10 });\n\n// give it some text \nchange.insert(Position.create(0, 1), textToAdd);\n\n// add a createFile documentChange to the workspaceChange\nworkspaceChange.createFile(newuri);\n\n// pass these edits to the client to apply:\nlet reply = connection.workspace.applyEdit(workspaceChange.edit);\nconsole.log(reply); //always &lt;Pending&gt;\n</code></pre>\n<p>If I supply a non-existent file name, then the process fails - no file is created or opened in the workspace.</p>\n<p>However if I supply an existing filename, the edits are applied and the file is opened in the workspace as expected.</p>\n<p>I thought it was because I was supplying an edit prior to a createFile, but if I run <em>getTextEditChange()</em> before <em>createFile()</em> then the process fails with error &quot;Workspace edit is not configured for document changes&quot;</p>\n"}, {"tags": ["typescript", "function"], "answers": [{"tags": [], "owner": {"reputation": 2897, "user_id": 2037841, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/04f06e605ef5a9d0a2871d4f610a78b8?s=128&d=identicon&r=PG", "display_name": "Johannes Reuter", "link": "https://stackoverflow.com/users/2037841/johannes-reuter"}, "is_accepted": false, "score": 0, "last_activity_date": 1567627817, "creation_date": 1567627817, "answer_id": 57795122, "question_id": 57787398, "link": "https://stackoverflow.com/questions/57787398/wrap-function-and-still-have-the-same-type-information-for-input-and-output/57795122#57795122", "title": "Wrap function and still have the same type information for input and output", "body": "<p>You could overload the function with versions with different numbers of parameters:</p>\n\n<pre><code>function getOrFail&lt;A1, R&gt;(fn: (a1: A1) =&gt; R, message: string): (a1: A1) =&gt; Exclude&lt;R, null&gt;;\nfunction getOrFail&lt;A1, A2, R&gt;(fn: (a1: A1, a2: A2) =&gt; R, message: string): (a1: A1, a2: A2) =&gt; Exclude&lt;R, null&gt;;\nfunction getOrFail&lt;A1, A2, A3, R&gt;(fn: (a1: A1, a2: A2, a3: A3) =&gt; R, message: string): (a1: A1, a2: A2, a3: A3) =&gt; Exclude&lt;R, null&gt;;\nfunction getOrFail(fn: any, message: string) {\n    return ((...args: any[]) =&gt; {\n  const value = fn(...args)\n  if (value) return value\n  throw new Error(message);\n});\n}\n\n// getEntityIdOrFail is of type (a1: any, a2: string) =&gt; number\nexport const getEntityIdOrFail = getOrFail(getEntityId, 'failed getting entity id')\n</code></pre>\n"}], "owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567627817, "creation_date": 1567596341, "last_edit_date": 1567597076, "question_id": 57787398, "link": "https://stackoverflow.com/questions/57787398/wrap-function-and-still-have-the-same-type-information-for-input-and-output", "title": "Wrap function and still have the same type information for input and output", "body": "<p>Below I have <code>getEntityId</code> and I'd like to create a wrap function that can be use across many functions <code>getOrFail</code> that takes a function and returns a function that calls the passed in function, and asserts that it is true before returning or throwing.</p>\n\n<pre><code>import * as _ from 'lodash'\n\nexport const getEntityId = (value: any, entity: string): number | null =&gt; {\n  if (typeof value === 'number') return value\n  if (_.get(value, 'id')) return value.id\n  if (_.get(value, `${entity}Id`)) return value.id\n  return null\n}\n\nexport const getOrFail = &lt;A, T&gt; (fn: (...a: T[]) =&gt; A, message) =&gt; (...args: T[]) =&gt; {\n  const value = fn(...args)\n  if (value) return value\n  throw new Error(message);\n}\n\nexport const getEntityIdOrFail = getOrFail(getEntityId, 'failed getting entity id')\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>export const getOrFail = (fn, message) =&gt; (...args: ArgumentTypes&lt;typeof fn&gt;): ReturnType&lt;typeof fn&gt; =&gt; {\n  const value = fn(...args)\n  if (value) return value\n  throw new Error(message);\n}\n</code></pre>\n\n<p>I am looking for a way using generics to make it so that <code>getEntityIdOrFail</code> has the correct type information. How is this possible?</p>\n\n<p>So I need to understand three thing:</p>\n\n<ol>\n<li>How to pass along <code>fn</code> type parameters's to <code>(...args)</code></li>\n<li>How to pass along <code>fn</code> return type</li>\n<li>How to remove <code>null</code> from the return value</li>\n</ol>\n"}, {"tags": ["typescript", "vue.js", "sharepoint", "spfx"], "answers": [{"tags": [], "owner": {"reputation": 4884, "user_id": 8867311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211a7f414a3441006d1dd418596447a9?s=128&d=identicon&r=PG&f=1", "display_name": "Lee_MSFT", "link": "https://stackoverflow.com/users/8867311/lee-msft"}, "is_accepted": true, "score": 1, "last_activity_date": 1567655789, "creation_date": 1567655789, "answer_id": 57798227, "question_id": 57787202, "link": "https://stackoverflow.com/questions/57787202/how-to-get-the-managed-metadata-typeshare-point-values-via-rest-api-on-spfx-vu/57798227#57798227", "title": "How to get the managed metadata type(share point) values via rest api on spfx vue js", "body": "<p>Expand the hidden field TaxCatchAll for this secenario,</p>\n\n<p>My test demo.</p>\n\n<pre><code>_api/web/lists/getbytitle('testlist')/items?$select=ID,Title,MetaField,TaxCatchAll/ID,TaxCatchAll/Term&amp;$expand=TaxCatchAll\n</code></pre>\n\n<p>Here is the referenced thread.</p>\n\n<p><a href=\"https://sympmarc.com/2017/06/19/retrieving-multiple-sharepoint-managed-metadata-columns-via-rest/\" rel=\"nofollow noreferrer\">https://sympmarc.com/2017/06/19/retrieving-multiple-sharepoint-managed-metadata-columns-via-rest/</a></p>\n"}], "owner": {"reputation": 305, "user_id": 11565500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4cd4450689d2fdb5da0846b2db0355?s=128&d=identicon&r=PG&f=1", "display_name": "Mariya", "link": "https://stackoverflow.com/users/11565500/mariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 57798227, "answer_count": 1, "score": 1, "last_activity_date": 1567655789, "creation_date": 1567595606, "question_id": 57787202, "link": "https://stackoverflow.com/questions/57787202/how-to-get-the-managed-metadata-typeshare-point-values-via-rest-api-on-spfx-vu", "title": "How to get the managed metadata type(share point) values via rest api on spfx vue js", "body": "<p>How to fetch the Managed metadata types values using API's in spfx on Vue js? \nHow can I get the actual values using API on </p>\n\n<p>listUrl = context.pageContext.web.absoluteUrl + \n   \"/_api/web/lists/getbytitle('\" + list +\"')/items?$select*\";  </p>\n\n<pre><code>return context.spHttpClient.get(listUrl, SPHttpClient.configurations.v1,h)\n.then((response: SPHttpClientResponse) =&gt; {\n    return response.json();\n});\n</code></pre>\n\n<p>Result is:<br>\nCountry: Object<br>\nLabel: \"2\"<br>\nTermGuid: \"250b31ef-1d2d-482b-99a2-5743ddad9f85\"<br>\nWssId: 2</p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": false, "score": 0, "last_activity_date": 1567598562, "creation_date": 1567598562, "answer_id": 57788002, "question_id": 57786519, "link": "https://stackoverflow.com/questions/57786519/generic-typing-a-function-that-is-a-prop-to-a-component/57788002#57788002", "title": "Generic typing a function that is a prop to a component", "body": "<p>If you just want the function argument <code>a</code> of <code>onChange</code> callback to be one of the values in <code>Props</code>, there is no need to use Generics. <code>onChange</code> does not return anything, <code>Component</code> invokes it with one of the possible prop values.</p>\n\n<pre><code>type Props = {\n  children?: JSX.Element;\n  myProp: SomeType[];\n  onChange?: (\n    // exclude here the prop value of children and the callback itself\n    // effectively being a: SomeType[]\n    a: Props[Exclude&lt;keyof Props, \"children\" | \"onChange\"&gt;],\n    b: number\n  ) =&gt; void;\n};\n\nconst Component = (props: Props) =&gt; &lt;div&gt;Hello{props.children}&lt;/div&gt;;\n\n// declare concrete prop value as example\ndeclare let myProp: SomeType[];\n\nconst App = () =&gt; {\n  const handleChange: Props[\"onChange\"] = (a, b) =&gt; {\n    return 1;\n  };\n\n  return (\n    &lt;Component myProp={myProp} onChange={handleChange} /&gt;\n  );\n};\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?jsx=2#code/JYWwDg9gTgLgBAKjgQwM5wEoFNkGN4BmUEIcARFDvmQNwBQokscA3nJQHYAmWUcAvnCIlylPDAC0XErTp0YATzBY4AZRJYAKkpUBeVkIgQAXHFQwowDgHMB9eTrgAFYmHT6WdOHFwALYAA2XJwA-KYAUqoAGgB0AKIBWCBYHDD03iAKLhBgpurJ2soA2gC66XAQHADCvsg2WGFwABRe3iim2W5FcQAeuAEArjwAPADWWAoQBM6uqAA05H6BwSlkcAA+5JU1ddZYZAB8JXOt3gBGphwDIGe8rQCUcLoHcABuEMBc9Pz2uJXmcCqJEgHBS8H0TTAsw6s0ezzgwy4wFeBwAElgAgEICwoTlUDElkFOPxhgB6JEo+yk0lwHj9ZCUOC4sBvZCDLDoGAQJlodBWOh0gIMlSJeCZTp5DSFLClX7-eAAQTALIhcJenm8fw4ANq3ESO3qT2ap3aMzx3T6gxG40m00680W-iJqw2W2qur2h2OJoucCuNzu3jVrBNlBgAygHDgAEZyj85N4wxGoy02gigeBKmC4OLXLoWLmcoJth6sPndVx9aXBKSDg9vvQgA\" rel=\"nofollow noreferrer\">Playground</a></p>\n\n<p>If <code>Component</code>/<code>Props</code> them selves were generic and receive a type parameter from an outside component (not the case in your example), you could do it <a href=\"http://www.typescriptlang.org/play/?jsx=2#code/JYWwDg9gTgLgBAKjgQwM5wEoFNkGN4BmUEIcARFDvmQNwBQokscA3nJQHYAmWUcAvnCIlylPDAC0XErTp0YATzBY4AZRJYAKkpUBeVkIgQAXHFQwowDgHMB9eTrgAFYmFQAeTQD44+lnTg4XAALYAAbLk4AflMAKVUADQA6AFEwrBAsDhh6QJAFFwgwU00AbQBdXLgIDgBhYOQbLBi4AAoAwJRTQrdPL1KUgA9cMIBXHncAaywFCAJnVw9vABpyEPDIrLI4AB9yGvrG6ywyL3LljsCAI1MOUZAr3g6ASl8fADcIYC56fntcGrmOC1EiQDhZeD6TxwLCDGBZLjoFj8LytMCLbqLPqvXQ+dqBdxcYDvLyXOAACSwYTCEDJLHRRVQSXWEU4-A67gA9ESSXRnvZFMo4ABBMBgHpLHx+DoEIwlCq-f6A+CisC+ODQ2Hw7hIlFojEisUS7FvVgdAEcIENbjpQ5NdX4zrITGMvoDYZjCbTWbzY0rNahVlbXb7OrW46nc5km5wO4PJ6BHE+fyddhYGCjKAcOAARiqfzkgUoGazGpB4BqELg+R6unpiySsogggO4awdetXFtbcEnK8iroQA\" rel=\"nofollow noreferrer\">like this</a>.</p>\n\n<p>Cheers, hope it helps</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7527262"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567598562, "creation_date": 1567592919, "question_id": 57786519, "link": "https://stackoverflow.com/questions/57786519/generic-typing-a-function-that-is-a-prop-to-a-component", "title": "Generic typing a function that is a prop to a component", "body": "<p>What could be the correct way to pass a generic type in a function argument which is one of the prop of the Componenet.</p>\n\n<p>I have tried something like this: </p>\n\n<pre><code>type Props = {\n   children?: JSX.Element;\n   onChange?: &lt;T&gt;(a: T, b: number) =&gt; void;\n}\n</code></pre>\n\n<p>and using it like (which is giving ts error):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>...\nhandleChange = (a: SomeType[], b: number) =&gt; {\n   return 1;\n}\n...\n&lt;Component onChange={this.handleChange} /&gt;\n</code></pre>\n"}, {"tags": ["javascript", "css", "angular", "typescript", "dom"], "answers": [{"comments": [{"owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "edited": false, "score": 0, "creation_date": 1567648815, "post_id": 57789373, "comment_id": 102027864, "body": "Thank you for your solution, but the select width seem to have an addition width at the end that scale up depend on the length of the text which not equal to 30px you added to it. Can you share how that behavior happened ?"}, {"owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "edited": false, "score": 0, "creation_date": 1567648980, "post_id": 57789373, "comment_id": 102027890, "body": "Oh I figured it out, it because of the font-size of the span is bigger than the font-size of the select-element"}, {"owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "edited": false, "score": 0, "creation_date": 1567649647, "post_id": 57789373, "comment_id": 102028000, "body": "Thank you very much. Additionally, I think you can add <code>document.body.removeChild(dummy);</code> before setting width for <code>dummy</code> removal"}, {"owner": {"reputation": 36810, "user_id": 2764255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e380233bb342064d9786323c314ddd8a?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Paraskevopoulos", "link": "https://stackoverflow.com/users/2764255/nikos-paraskevopoulos"}, "reply_to_user": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "edited": false, "score": 0, "creation_date": 1567668932, "post_id": 57789373, "comment_id": 102033206, "body": "Ho! I was cleaning up the code and removed the <code>removeChilde(dummy)</code> call! Thanks for noticing, will amend the answer+Stackblitz!"}], "tags": [], "owner": {"reputation": 36810, "user_id": 2764255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e380233bb342064d9786323c314ddd8a?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Paraskevopoulos", "link": "https://stackoverflow.com/users/2764255/nikos-paraskevopoulos"}, "is_accepted": true, "score": 3, "last_activity_date": 1567669139, "last_edit_date": 1567669139, "creation_date": 1567603403, "answer_id": 57789373, "question_id": 57786475, "link": "https://stackoverflow.com/questions/57786475/set-select-element-width-equal-to-its-options-content-width-dynamically/57789373#57789373", "title": "Set select element width equal to it&#39;s option&#39;s content width dynamically", "body": "<p>There is a way to measure text width. I think it is sufficiently reliable, but might be a bit expensive in terms of performance, depending on your app of course. (The simplistic example in Stackblitz has no performance problem.)</p>\n\n<p>The method is to actually append a hidden element to the document containing the text you want to measure, read the <code>clientWidth</code>, and remove the element immediately.</p>\n\n<p>Modify <code>adjustSelectWidth()</code> as follows:</p>\n\n<pre><code>adjustSelectWidth(e: HTMLSelectElement){\n  // assuming something is always selected, please test!\n  const displayedText = e.options[e.selectedIndex].innerText;\n  const dummy = document.createElement('div');\n  dummy.innerText = displayedText;\n  dummy.style.position = 'absolute';\n  dummy.style.visibility = 'hidden';\n  document.body.insertBefore(dummy, document.body.firstChild);\n  const measuredWidth = dummy.clientWidth;\n  document.body.removeChild(dummy);\n  e.style.width = (measuredWidth + 30) + 'px'\n}\n</code></pre>\n\n<p>Modified Stackblitz: <a href=\"https://stackblitz.com/edit/angular-mpjxbd?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-mpjxbd?file=src/app/app.component.ts</a> - tested in latest Firefox, Chrome, Edge</p>\n"}], "owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 57789373, "answer_count": 1, "score": 2, "last_activity_date": 1567669139, "creation_date": 1567592758, "last_edit_date": 1567602319, "question_id": 57786475, "link": "https://stackoverflow.com/questions/57786475/set-select-element-width-equal-to-its-options-content-width-dynamically", "title": "Set select element width equal to it&#39;s option&#39;s content width dynamically", "body": "<p>Im trying to make select element width equal to it's option text width in angular.</p>\n\n<p>My HTML component simply look like this:</p>\n\n<pre><code>&lt;form [formGroup]=\"profileForm\"&gt;\n  ...\n  &lt;select (change)=\"adjustSelectWidth($event.target)\" formControlName=\"members\"&gt;\n    &lt;option value=\"1\"&gt;Me&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Me, my spouse&lt;/option&gt;\n    &lt;option value=\"3\"&gt;Me, my spouse and my kids&lt;/option&gt;\n  &lt;/select&gt;\n  ...\n&lt;/form&gt;\n</code></pre>\n\n<p>What I have tried:</p>\n\n<ul>\n<li>Get the option element width using <code>clientWidth</code> then apply that to select element but that width is 0. </li>\n</ul>\n\n<pre><code>export class AppComponent  {\n  profileForm = new FormGroup({\n    members : new FormControl(''),\n  })\n\n  adjustSelectWidth(e){\n    const optionValue = this.profileForm.get('members').value;\n    const optionWidth = document.querySelector(`option[value=\"${optionValue}\"]`).clientWidth;\n    e.style.width= optionWidth + \"px\"\n  }\n}\n</code></pre>\n\n<ul>\n<li>Get the option's <code>innerHTML</code> length then mutiply it with a fixed pixel but it not a dynamic option</li>\n</ul>\n\n<pre><code>export class AppComponent  {\n  profileForm = new FormGroup({\n    members : new FormControl(''),\n  })\n\n  adjustSelectWidth(e){\n    const optionValue = this.profileForm.get('members').value;\n    const optionTextLength = document.querySelector(`option[value=\"${optionValue}\"]`).innerHTML.length;\n    e.style.width= optionTextLength*8 + \"px\";\n  }\n}\n</code></pre>\n\n<ul>\n<li>Append the options's <code>innerHTML</code> to a span element for measuring width, but then that span <code>clientWidth</code> does not accurate when I apply it's to the select element  </li>\n</ul>\n\n<pre><code>export class AppComponent  {\n  //This temp is bind to a span via string interpolation {{...}}\n  temp:string;\n\n  profileForm = new FormGroup({\n    members : new FormControl(''),\n  })\n\n  adjustSelectWidth(e){\n    const optionValue = this.profileForm.get('members').value;\n    const optionText = document.querySelector(`option[value=\"${optionValue}\"]`).innerHTML;\n    this.temp = optionText;\n    const spanWidth = document.querySelector(`.temp`).clientWidth;\n    e.style.width = spanWidth + \"px\";\n  }\n}\n</code></pre>\n\n<p>Since im using angular, i prefer not to use JQuery. Additionally, why the <code>clientWidth</code> seem to not solve my problem here</p>\n\n<p>I created a stackbliz example: <a href=\"https://stackblitz.com/edit/angular-bbimkz\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-bbimkz</a></p>\n"}, {"tags": ["node.js", "typescript", "npm", "webpack", "office-ui-fabric"], "comments": [{"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1567603168, "post_id": 57786415, "comment_id": 102011833, "body": "If your <code>mocha</code> tests are in <code>commonPackage</code> and you need React for test purposes in common, you could it as <code>devDependency</code>."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 8076690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32306259804efb163971191a36d56d60?s=128&d=identicon&r=PG&f=1", "display_name": "matprzybyla", "link": "https://stackoverflow.com/users/8076690/matprzybyla"}, "is_accepted": true, "score": 1, "last_activity_date": 1567680820, "creation_date": 1567680820, "answer_id": 57803902, "question_id": 57786415, "link": "https://stackoverflow.com/questions/57786415/cannot-find-module-when-running-unit-tests-on-node-js-with-react-as-peer-depen/57803902#57803902", "title": "&quot;Cannot find module&quot; when running unit tests on node.js with react as peer dependency in common package", "body": "<p>In the case above we finally came to a solution which was</p>\n\n<ul>\n<li>adding back react as devDependency to <code>Common package</code></li>\n<li>using <code>esm</code> package to help our test runs understand es6 module export/import that came with <code>fabric</code> package. Just using <code>mocha --require esm ...</code></li>\n<li><p>ejecting and adding alias to <code>webpack.config.js</code> in <code>Application</code></p>\n\n<pre><code>    alias: {\n        'react': path.resolve('./node_modules/react')\n    }\n</code></pre></li>\n</ul>\n\n<p>Application A, B and hooks work now.</p>\n"}], "owner": {"reputation": 4396, "user_id": 4316374, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-8D0h5D5n1LQ/AAAAAAAAAAI/AAAAAAAAA3s/mLhsmffyuS8/photo.jpg?sz=128", "display_name": "alek kowalczyk", "link": "https://stackoverflow.com/users/4316374/alek-kowalczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 57803902, "answer_count": 1, "score": 1, "last_activity_date": 1567680820, "creation_date": 1567592516, "question_id": 57786415, "link": "https://stackoverflow.com/questions/57786415/cannot-find-module-when-running-unit-tests-on-node-js-with-react-as-peer-depen", "title": "&quot;Cannot find module&quot; when running unit tests on node.js with react as peer dependency in common package", "body": "<p>I have following app structure:</p>\n\n<ul>\n<li><code>Application A</code></li>\n<li><code>Application B</code></li>\n<li><code>Common package</code></li>\n</ul>\n\n<p>Now <code>Application A</code> and <code>B</code> have in <code>package.json</code> the common package added:</p>\n\n<pre><code>{\n  dependencies: {\n      \"commonPackage\": \"file:../../../commonPackage\"\n  }\n}\n</code></pre>\n\n<p>both apps use React, as well as the common package, all had React added with <code>npm</code>, and it worked, before we started to use react hooks.</p>\n\n<p>Because when we started, we got an <a href=\"https://reactjs.org/warnings/invalid-hook-call-warning.html\" rel=\"nofollow noreferrer\">Invalid Hook Call Warning</a> due to having \"more than one copy of React\", so to avoid that, in the common package, the react dependency was moved to <code>peerDependencies</code> so that the react instance from the app is used and not from the package.</p>\n\n<p>It works great in the browser when we run both apps <code>A</code> and <code>B</code>, but when I run my <code>mocha</code> tests in the console, I get:</p>\n\n<pre><code>ERROR in ../commonPackage/~/@uifabric/utilities/lib/customizations/Customizer.js\n   Module not found: Error: Can't resolve 'react' in 'D:\\myProject\\commonPackage\\node_modules\\@uifabric\\utilities\\lib\\customizations'\n</code></pre>\n\n<p>this is from the <code>office-ui-fabric-react</code> package we use, but it seems like a more general issue with dependency resolution.</p>\n\n<p>Project is in TypeScript, we use <code>webpack</code> for the compilation of the app for the browser, and <code>tsc</code> to compile for the unit tests.</p>\n\n<p>I found some answers, suggesting to <code>npm link</code> react in the common package to the react package in the application <code>node_modules</code>, but it seems wrong, since the common package is used by two applications, it would solve the issue only for one.</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1751, "user_id": 3302004, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/HVQgu.png?s=128&g=1", "display_name": "Jens Alenius", "link": "https://stackoverflow.com/users/3302004/jens-alenius"}, "is_accepted": false, "score": 0, "last_activity_date": 1567592745, "creation_date": 1567592745, "answer_id": 57786472, "question_id": 57786336, "link": "https://stackoverflow.com/questions/57786336/reactive-form-consisting-of-multiple-components/57786472#57786472", "title": "Reactive Form consisting of multiple components", "body": "<ol>\n<li>For the first part: use FormArray. <a href=\"https://angular.io/api/forms/FormArray\" rel=\"nofollow noreferrer\">https://angular.io/api/forms/FormArray</a>. You can also find a lot of good tutorials on this</li>\n<li>For the RadioButtonComponent part. To do custom form components in Angular you will need to implement ControlValueAccessor. Check out this <a href=\"https://blog.thoughtram.io/angular/2016/07/27/custom-form-controls-in-angular-2.html#understanding-controlvalueaccessor\" rel=\"nofollow noreferrer\">https://blog.thoughtram.io/angular/2016/07/27/custom-form-controls-in-angular-2.html#understanding-controlvalueaccessor</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 763, "user_id": 10656609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67a018f0678dafb31664d25e08c716d?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/10656609/alan"}, "is_accepted": true, "score": 0, "last_activity_date": 1567759218, "creation_date": 1567759218, "answer_id": 57818569, "question_id": 57786336, "link": "https://stackoverflow.com/questions/57786336/reactive-form-consisting-of-multiple-components/57818569#57818569", "title": "Reactive Form consisting of multiple components", "body": "<p>So i did some further experimenting and it turns out that you can pass formcontrols as strings to your child components. And the main form group needs to be passed aswell:</p>\n\n<p>In the parent component </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"form-group row\"&gt;\n    &lt;label class=\"col-sm-3 col-form-label\"&gt;\n        &lt;strong&gt;My Title One&lt;/strong&gt;\n    &lt;/label&gt;\n    &lt;div class=\"col-sm-9\"&gt;\n        &lt;input type=\"text\" class=\"form-control\" id=\"titleone\"\n            formControlName=\"titleone\" #titleone placeholder=\"no input yet\" (input)=\"titleoneChanged = true\"&gt;\n        &lt;app-radiobutton-component [inputName]=\"'titleoneConfirm'\" [inputControl]=\"'titleoneConfirm'\" [form]=\"'form'\"&gt;&lt;/app-radiobutton-component&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and in the child component:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class RadioButtonComponent implements OnInit{\n    @Input() inputName: string;\n    @Input() inputControl: string;\n    @Input() form: string;\n    //...\n}\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>        &lt;div [formGroup]=\"{{form}}\"&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"{{inputName}}\" value=\"Val 1\" formControlName=\"{{inputControl}}\"&gt;\n                Option 1\n            &lt;/label&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"{{inputName}}\" value=\"Val 2\" formControlName=\"{{inputControl}}\"&gt;\n                Option 2\n            &lt;/label&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"{{inputName}}\" value=\"Val 3\" formControlName=\"{{inputControl}}\"&gt;\n                Option 3\n            &lt;/label&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>this worked out perfectly in my case. no idea if this is the REAL angular way or not, but it works</p>\n"}], "owner": {"reputation": 763, "user_id": 10656609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67a018f0678dafb31664d25e08c716d?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/10656609/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 57818569, "answer_count": 2, "score": 1, "last_activity_date": 1567759218, "creation_date": 1567592230, "question_id": 57786336, "link": "https://stackoverflow.com/questions/57786336/reactive-form-consisting-of-multiple-components", "title": "Reactive Form consisting of multiple components", "body": "<p>Doesnt seem to be any info on this out there so i guess i'll ask here:</p>\n\n<p>I am creating a form in angular, where every input field is followed by radio buttons, which only appear after the user makes any change to the corresponding input field.\nMy template for a single of such input field to radio combo looks something like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"form-group row\"&gt;\n    &lt;label class=\"col-sm-3 col-form-label\"&gt;\n        &lt;strong&gt;My Title One&lt;/strong&gt;\n    &lt;/label&gt;\n    &lt;div class=\"col-sm-9\"&gt;\n        &lt;input type=\"text\" class=\"form-control\" id=\"titleone\"\n            formControlName=\"titleone\" #titleone placeholder=\"no input yet\" (input)=\"titleoneChanged = true\"&gt;\n        &lt;div *ngIf=\"titleoneChanged\"&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"titleoneConfirm\" value=\"Val 1\" formControlName=\"titleoneConfirm\"&gt;\n                Option 1\n            &lt;/label&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"titleoneConfirm\" value=\"Val 2\" formControlName=\"titleoneConfirm\"&gt;\n                Option 2\n            &lt;/label&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"titleoneConfirm\" value=\"Val 3\" formControlName=\"titleoneConfirm\"&gt;\n                Option 3\n            &lt;/label&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>this block is repeated about 20 times in my form.</p>\n\n<p>Form TS looks something like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class GiantForm implements OnInit {\n    form: FormGroup;\n    //some more variables, which i can not show\n\n    initForm(){\n        if(this.someApiSource === null || this.someApiSource === undefined){\n            return;\n        }\n        this.form = this.formBuilder.group({\n            Subform1:this.formBuilder.group({\n                firstName:[this.someApiSource.getFirstName()],\n                lastName:[this.someApiSource.getLastName()],\n            }),\n            //some more subforms...\n            subFormWithInputAndRadios:this.formBuilder.group({\n                titleone:[this.someApiSource.getInfo('titleone')],\n                titletwo:[this.someApiSource.getInfo('titletwo')],\n                titlethree:[this.someApiSource.getInfo('titlethree')],\n                titlefour:[this.someApiSource.getInfo('titlefour')],\n                //20 titles...\n\n                titleoneConfrim:[this.someApiSource.getInfo('titleoneConfirm')],\n                titletwoConfrim:[this.someApiSource.getInfo('titletwoConfirm')],\n                titlethreeConfrim:[this.someApiSource.getInfo('titlethreeConfirm')],\n                //20 title confirms...\n            })\n            }\n        );\n    }\n}\n</code></pre>\n\n<p>I am not too fond with this kind of approach. it doesnt look clean to me at all.</p>\n\n<p>If anyone has a much better solution to this please let me know. for now i need to know, how to change the template to something like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"form-group row\"&gt;\n    &lt;label class=\"col-sm-3 col-form-label\"&gt;\n        &lt;strong&gt;My Title One&lt;/strong&gt;\n    &lt;/label&gt;\n    &lt;div class=\"col-sm-9\"&gt;\n        &lt;input type=\"text\" class=\"form-control\" id=\"titleone\"\n            formControlName=\"titleone\" #titleone placeholder=\"no input yet\" (input)=\"titleoneChanged = true\"&gt;\n        &lt;app-radiobutton-component&gt;&lt;/app-radiobutton-component&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and have the inputs within that new component still apply to the correct formcontrol.</p>\n\n<p>i tried using @Input to pass the form control but it always resulted in some kind of error. for instance:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>        &lt;div&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"inputName\" value=\"Val 1\" formControlName=\"inputControl\"&gt;\n                Option 1\n            &lt;/label&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"inputName\" value=\"Val 2\" formControlName=\"inputControl\"&gt;\n                Option 2\n            &lt;/label&gt;\n            &lt;label&gt;\n                &lt;input type=\"radio\" name=\"inputName\" value=\"Val 3\" formControlName=\"inputControl\"&gt;\n                Option 3\n            &lt;/label&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>inside radiobutton.component.html</p>\n\n<p>and in radiobutton.component.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class RadioButtonComponent implements OnInit{\n    @Input() inputName: string;\n    @Input() inputControl: FormControl;\n    //...\n}\n</code></pre>\n\n<p>resulted in some error like formcontrol not found</p>\n\n<p>I appreciate any help i can get. If anyone knows a much better overall solution to the entire form, not just the template part then please let me know</p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "reply_to_user": {"reputation": 87, "user_id": 4031671, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4031671/daniel"}, "edited": false, "score": 0, "creation_date": 1567601935, "post_id": 57785542, "comment_id": 102011081, "body": "Your welcome. Works for many purposes :) But sometimes it has a problem with some nested and more complex structures. Although I always solved what I needed"}], "tags": [], "owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "is_accepted": true, "score": 1, "last_activity_date": 1567590755, "last_edit_date": 1567590755, "creation_date": 1567589663, "answer_id": 57785542, "question_id": 57785182, "link": "https://stackoverflow.com/questions/57785182/how-to-convert-a-2-dimensional-map-from-firestore-into-typescripts-interface-typ/57785542#57785542", "title": "How to convert a 2-dimensional map from Firestore into Typescripts interface type", "body": "<p>Basically you cannot without additional package and <a href=\"https://github.com/typestack/class-transformer\" rel=\"nofollow noreferrer\">Class transformer</a> is great for it. Check specially <a href=\"https://github.com/typestack/class-transformer#enforcing-type-safe-instance\" rel=\"nofollow noreferrer\">plainToClass documentation</a></p>\n\n<p>Here is sample code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import 'reflect-metadata';\nimport { plainToClass, Type } from 'class-transformer';\nimport { stringify } from 'querystring';\n\nexport class Watchlist {\n  @Type(() =&gt; Map)\n  movies: Map&lt;string, WatchlistMovie&gt;;\n\n  name: string;\n\n  @Type(() =&gt; Map)\n  users: Map&lt;string, WatchlistUser&gt;;\n}\n\nexport class WatchlistMovie {\n  watchedBy: string[];\n}\n\nexport class WatchlistUser {\n  alias: string;\n  notify: boolean;\n}\n\nconst data = {\n  movies: {\n    Shrek: {\n      watchedBy: ['Me', 'You']\n    }\n  },\n  name: 'watchlist #1',\n  users: {\n    userId: {\n      alias: 'user',\n      notify: false\n    }\n  }\n};\n\nconst converted = plainToClass(Watchlist, data);\n\nconst movieWatchList = new WatchlistMovie();\nmovieWatchList.watchedBy.push('abc');\nconverted.movies.set('Avatar', movieWatchList);\nconsole.log(converted);\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4031671, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4031671/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 57785542, "answer_count": 1, "score": 1, "last_activity_date": 1567590755, "creation_date": 1567588357, "last_edit_date": 1567589024, "question_id": 57785182, "link": "https://stackoverflow.com/questions/57785182/how-to-convert-a-2-dimensional-map-from-firestore-into-typescripts-interface-typ", "title": "How to convert a 2-dimensional map from Firestore into Typescripts interface type", "body": "<p>I'm trying to get the field value from Firebase's Firestore, the type of the value is basically a <code>Map&lt;string, Map&lt;string, dynamic&gt;&gt;</code>. How do I define and deserialize that kind of an object in TypeScript?</p>\n\n<p>The Firestore document data, the users field is causing issues</p>\n\n<pre><code>{\n  \"movies\": {\n\n  },\n  \"name\": \"watchlist #1\",\n  \"users\": {\n    \"userId\": {\n      \"alias\": \"user\",\n      \"notify\": false,\n    }\n  }\n}\n</code></pre>\n\n<pre><code>export interface Watchlist {\n    movies: Map&lt;string, WatchlistMovie&gt;,\n    name: string\n    users: Map&lt;string, WatchlistUser&gt;\n}\n\nexport interface WatchlistMovie {\n    watchedBy: string[]\n}\n\nexport interface WatchlistUser {\n    alias: string\n    notify: boolean\n}\n\nexport function toWatchlist(snapshot: admin.firestore.DocumentSnapshot): Watchlist {\n    const data = snapshot.data()!!;\n    return {\n        movies: data.movies,\n        name: data.name,\n        users: data.users\n    };\n}\n\n</code></pre>\n\n<p>When I try to update the users field at the moment I get the following error. </p>\n\n<p><code>TypeError: watchlist.users.set is not a function</code></p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 9844873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abf3af5143a2837fb964a0cadcca7eee?s=128&d=identicon&r=PG&f=1", "display_name": "Sijil Sasidharan", "link": "https://stackoverflow.com/users/9844873/sijil-sasidharan"}, "is_accepted": false, "score": 1, "last_activity_date": 1567588824, "creation_date": 1567588824, "answer_id": 57785312, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57785312#57785312", "title": "Check if string contains only digits and dots (.)", "body": "<p>It will be good if you use Regular Expression to check this.\nPlease try below RegEx.</p>\n\n<pre><code>(?!0+$)^[0-9].*$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567589650, "post_id": 57785440, "comment_id": 102004573, "body": "it can&#39;t start with. , should be at least one digit before using. Can you try this please"}, {"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567591008, "post_id": 57785440, "comment_id": 102005351, "body": "hey I test it and there is one small problem, can fix it that will not allow double .. <code>reg.test(1..2) &#47;&#47;false</code> and i will accept your answer"}, {"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "reply_to_user": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567591408, "post_id": 57785440, "comment_id": 102005618, "body": "Not so easy... There can be only 1 dot? Or more dots, but not in a row? And it can ends with dot? Or must end with a number? What is minimum length and maximum length? Give me more what I can handle. Some examples.. Update your original question and put what is correct and what not. Don&#39;t forget to include edge cases"}, {"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567591542, "post_id": 57785440, "comment_id": 102005688, "body": "ok so I can have more that one (.) but not in a row, it can&#39;t start or end with (.) , for the number the only thing is that can be smaller than zero, so <code>min=</code>."}, {"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "reply_to_user": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567592010, "post_id": 57785440, "comment_id": 102005905, "body": "Check now. No dots in a row. Basically regular says there must be at least some digits. If there is a dot, after dot must be at least one digit. The last part can repeat multiple times"}, {"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "reply_to_user": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "edited": false, "score": 0, "creation_date": 1567592405, "post_id": 57785440, "comment_id": 102006113, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198932/discussion-between-ilia-tapia-and-arxeiss\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "is_accepted": false, "score": 1, "last_activity_date": 1567591943, "last_edit_date": 1567591943, "creation_date": 1567589331, "answer_id": 57785440, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57785440#57785440", "title": "Check if string contains only digits and dots (.)", "body": "<p>Not sure what exactly is valid and what not. So my example test when there are only dots, only digits, it can starts with zeros etc.</p>\n\n<p>However regular expressions can do that job.</p>\n\n<p>// Edit: more specific regex according to comments</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var reg = new RegExp('^[0-9]+(\\.[0-9]+)*$')\nreg.test(\"0\") // true\nreg.test(\"0.\") // false\nreg.test(\"0.1\") // true\nreg.test(\"0...1.2\") // false\nreg.test(\"00.0.888.6\") // true\nreg.test(\".0.8.6\") // false\nreg.test(\"01.2.a3\") // false - there is \"a\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481, "user_id": 10060358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29116f93c9cc925a806f9b3e9a60155?s=128&d=identicon&r=PG", "display_name": "Dinuka Wanasinghe", "link": "https://stackoverflow.com/users/10060358/dinuka-wanasinghe"}, "is_accepted": false, "score": 1, "last_activity_date": 1567589515, "creation_date": 1567589515, "answer_id": 57785486, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57785486#57785486", "title": "Check if string contains only digits and dots (.)", "body": "<p>First create directive for decimal places in typescript like this:</p>\n\n<pre><code>import { Directive, ElementRef, HostListener } from '@angular/core';\n@Directive({\n  selector: '[appDecimalNumber]'\n})\nexport class DecimalNumberDirective {\n  private regex: RegExp = new RegExp(/^\\d*\\.?\\d*$/g);\n  private specialKeys: Array&lt;string&gt; = ['Backspace', 'Tab', 'End', 'Home', '-', 'ArrowLeft', 'ArrowRight', 'Del', 'Delete'];\n  constructor(private el: ElementRef) {\n  }\n  @HostListener('keydown', ['$event'])\n  onKeyDown(event: KeyboardEvent) {\n    console.log(this.el.nativeElement.value);\n    // Allow Backspace, tab, end, and home keys\n    if (this.specialKeys.indexOf(event.key) !== -1) {\n      return;\n    }\n    let current: string = this.el.nativeElement.value;\n    const position = this.el.nativeElement.selectionStart;\n    const next: string = [current.slice(0, position), event.key == 'Decimal' ? '.' : event.key, current.slice(position)].join('');\n    if (next &amp;&amp; !String(next).match(this.regex)) {\n      event.preventDefault();\n    }\n  }\n}\n</code></pre>\n\n<p>Inject Directive in your app.module.ts. In your html use that directive like this:</p>\n\n<pre><code>&lt;input type=\"textbox\" [(ngModel)]=\"InputValue\" appDecimalNumber&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3796, "user_id": 8612835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sPwm6.jpg?s=128&g=1", "display_name": "Sachin Shah", "link": "https://stackoverflow.com/users/8612835/sachin-shah"}, "is_accepted": false, "score": 1, "last_activity_date": 1567590089, "creation_date": 1567590089, "answer_id": 57785670, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57785670#57785670", "title": "Check if string contains only digits and dots (.)", "body": "<p>Call this function in keypress event and pass the event. I'm using this function in my project also and it works fine. </p>\n\n<pre><code>numberOnlyWithFloat(event): boolean {\n  const charCode = (event.which) ? event.which : event.keyCode;\n  console.log(\"charCode ::: \", charCode);\n  if (charCode == 46) {\n    console.log(\"true...\");\n    return true;\n  }\n  if (charCode &gt; 31 &amp;&amp; (charCode &lt; 48 || charCode &gt; 57)) {\n    return false;\n  }\n  return true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 4390590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5469e02866420ab5a4090b1e889482e5?s=128&d=identicon&r=PG&f=1", "display_name": "supriya suresh g", "link": "https://stackoverflow.com/users/4390590/supriya-suresh-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1567590153, "creation_date": 1567590153, "answer_id": 57785691, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57785691#57785691", "title": "Check if string contains only digits and dots (.)", "body": "<pre><code>In Angular2 below code may help u out.\nHtml\n&lt;input name=\"username\" [ngModel]=\"user.username\" [pattern]=\"unamePattern\" #uname=\"ngModel\"&gt; Now display validation error message.\n    &lt;div *ngIf=\"uname.errors?.pattern\"&gt; \n       User name not valid.\n    &lt;/div&gt; \n\nTypescript\nunamePattern = \"[0-9]*\\.?[0-9]*\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 7377614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63701543a364f19b35bb18ff5db71db2?s=128&d=identicon&r=PG", "display_name": "Venkata Sai Katepalli", "link": "https://stackoverflow.com/users/7377614/venkata-sai-katepalli"}, "is_accepted": false, "score": 2, "last_activity_date": 1567590154, "creation_date": 1567590154, "answer_id": 57785692, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57785692#57785692", "title": "Check if string contains only digits and dots (.)", "body": "<p>I can suggest you to use <code>regex</code> to validate the string. The below regex will allow only digits and .</p>\n\n<pre><code>/[^.0-9]+/g\n</code></pre>\n\n<p>I you want to validate only digits, then you can use below expression.</p>\n\n<pre><code>/[^0-9]+/g\n</code></pre>\n\n<p>Feel free to ask queries...</p>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567610263, "post_id": 57786130, "comment_id": 102016011, "body": "this is an amazing solution but, when I put a wrong like it gets clean all the output, I see it stack it isn&#39;t happening, and I check all the steps but still I get the form clean ."}, {"owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "reply_to_user": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567620593, "post_id": 57786130, "comment_id": 102020661, "body": "That&#39;s strange... Could you please provide more details on what you are putting there that it cleans the output?"}, {"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567665929, "post_id": 57786130, "comment_id": 102031899, "body": "I fixed, in fact, was my mistake, but I have a question, if I create a new component so I can use it other places how can I used it in this case, can you give me a hint please, cause I am not so good, I tried something but didn&#39;t work , and  i don &#39;t know what was wrong cause I didn&#39;t get any error"}, {"owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "reply_to_user": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567669212, "post_id": 57786130, "comment_id": 102033340, "body": "I guess you have forgotten to add the component to the module where it&#39;s used. P.S. In the stackblitz code sample you might notice that I&#39;ve imported &quot;NumericInputComponent&quot; to &quot;app.module.ts&quot; and added to the &quot;declarations&quot; section there."}, {"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567669524, "post_id": 57786130, "comment_id": 102033504, "body": "Yeah I see, but I did that also, but the problem is at HTML file at the input fields, how do I used it there can you provide me an example, and also i accept your answer is an amazing work mate"}, {"owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "reply_to_user": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "edited": false, "score": 0, "creation_date": 1567670018, "post_id": 57786130, "comment_id": 102033753, "body": "I&#39;ve just updated the stackblitz sample and put the usage of that component inside the &quot;test.component.html&quot;. Please let me know if that helped."}, {"owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "reply_to_user": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "edited": false, "score": 0, "creation_date": 1567670503, "post_id": 57786130, "comment_id": 102033973, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198990/discussion-between-ilia-tapia-and-just-shadow\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "is_accepted": true, "score": 1, "last_activity_date": 1567672079, "last_edit_date": 1567672079, "creation_date": 1567591566, "answer_id": 57786130, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots/57786130#57786130", "title": "Check if string contains only digits and dots (.)", "body": "<p>Note: All the solutions which simply use patterns, still <strong>allow</strong> the user to type restricted symbols, and then mark them as invalid.</p>\n\n<p>If you'd like to <strong>prevent</strong> typing invalid characters, then you can use the solution below.</p>\n\n<p>It's a component that doesn't even allow to type any other character than digits and dots,<br>\nand always makes sure that the input is a number before inserting the character into the input.  </p>\n\n<p>Also, it doesn't allow to type invalid numbers like \"45..3\" \"3.4..4\" using those characters.<br>\nBonus Feature 1: It works fine with mobile (since doesn't look for Keydown/Keyup events).<br>\nBonus Feature 2: It doesn't allow to copy paste invalid text as well. </p>\n\n<pre><code>import { Component, Input, forwardRef } from '@angular/core';\n\nimport {\n  NG_VALUE_ACCESSOR,\n  NG_VALIDATORS,\n  Validator,\n  FormControl,\n  ValidationErrors,\n  ControlValueAccessor\n} from '@angular/forms';\n\n@Component({\n  selector: 'numeric-input',\n  template: '&lt;input type=\"text\" inputmode=\"numeric\" [placeholder]=\"placeHolderText\" [ngModel]=\"inputValue\" (input)=\"onInputChange($event)\"&gt;',\n  providers: [\n  {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() =&gt; NumericInputComponent),\n    multi: true\n  },\n  {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() =&gt; NumericInputComponent),\n    multi: true\n  }]\n})\nexport class NumericInputComponent implements ControlValueAccessor, Validator {\n  @Input() public placeHolderText = '';\n  @Input() public isRequired = false;\n\n  public inputValue: string;\n\n  public onInputChange(event: any): void {\n    const newValue = event.target.value;\n    if (!this.isValidInput(newValue)) {\n      // Invalid input detected. Resetting to previous value\n      event.target.value = this.inputValue;\n    } else if (newValue !== this.inputValue) {\n      // New valid input detected.\n      this.inputValue = newValue;\n      this.propagateChange(this.inputValue);\n    }\n  }\n\n  //#region Custom validation\n\n  // Note: Used the mechanism described in the link below\n  // https://medium.com/@tarik.nzl/angular-2-custom-form-control-with-validation-json-input-2b4cf9bc2d73\n\n  // Called for setting the initial value\n  public writeValue(value: string): void {\n    if (this.isValidInput(value) &amp;&amp; this.inputValue !== value) {\n      this.inputValue = value;\n    }\n  }\n\n  // Validates the form, returns null when valid else the validation object\n  public validate(formControl: FormControl): ValidationErrors {\n    return (this.isRequired &amp;&amp; !this.inputValue) ? { required: true } : null;\n  }\n\n  // Registers function that will be fired when changes are made.\n  public registerOnChange(callbackFunction: (newValue: string) =&gt; void): void {\n    this.propagateChange = callbackFunction;\n  }\n\n  // Non-implemented method which are required by the validator interface\n  public registerOnTouched(callbackFunction: () =&gt; void): void { }\n\n  // The method set in registerOnChange to emit changes back to the form\n  private propagateChange = (newValue: string) =&gt; { };\n\n  private isValidInput(value: string): boolean {\n    // Note: ParseInt is not recommended as it will convert \"222aa\" -&gt; \"222\" and assume as valid\n    return !isNaN(Number(value));\n  }\n\n  //#endregion Custom validation\n}\n</code></pre>\n\n<p>Usage:  </p>\n\n<pre><code>&lt;numeric-input [(ngModel)]=\"ModelNameHere\"&gt;\n&lt;/numeric-input&gt;\n</code></pre>\n\n<p>Note: You might consider moving out the html template of the component outside the component.ts file to separate html file and use templateUrl instead (like it's done in the samples below).</p>\n\n<p>Here is a quick <a href=\"https://stackblitz.com/edit/angular-9tfzhq\" rel=\"nofollow noreferrer\">code sample</a> and <a href=\"https://angular-9tfzhq.stackblitz.io\" rel=\"nofollow noreferrer\">demo</a> on stackblitz just in case it's needed.<br>\nAnd here is a <a href=\"https://stackblitz.com/edit/angular-material-rnnxqm\" rel=\"nofollow noreferrer\">sample</a> for angular material.</p>\n"}], "owner": {"reputation": 519, "user_id": 7964871, "user_type": "registered", "profile_image": "https://graph.facebook.com/240282476453477/picture?type=large", "display_name": "Ilia Tapia", "link": "https://stackoverflow.com/users/7964871/ilia-tapia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2030, "favorite_count": 0, "accepted_answer_id": 57786130, "answer_count": 7, "score": 4, "last_activity_date": 1567672079, "creation_date": 1567588319, "question_id": 57785170, "link": "https://stackoverflow.com/questions/57785170/check-if-string-contains-only-digits-and-dots", "title": "Check if string contains only digits and dots (.)", "body": "<p>I need to use a fields as a String and I want that the user should be able to add only digits and dots. and I am looking on the net and is hard to find something, can anyone give me a hand I would really appreciate that. Thanks in advance !!</p>\n"}, {"tags": ["typescript", "abstract-class"], "answers": [{"comments": [{"owner": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "edited": false, "score": 0, "creation_date": 1567593122, "post_id": 57785449, "comment_id": 102006472, "body": "Ya, this is what I was afraid of. At the moment I think my solution of making <code>Adapter</code> non-abstract is the better work around (for my use case), as it also allows for use of <code>InstanceType</code> which can&#39;t normally be used on abstract classes. I&#39;ll leave this question open for the time being, but if a better response doesn&#39;t come in I&#39;ll mark your answer as correct.  Thanks for the information!"}], "tags": [], "owner": {"reputation": 204677, "user_id": 75525, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/IYU63.png?s=128&g=1", "display_name": "Fenton", "link": "https://stackoverflow.com/users/75525/fenton"}, "is_accepted": false, "score": 1, "last_activity_date": 1567589370, "creation_date": 1567589370, "answer_id": 57785449, "question_id": 57784998, "link": "https://stackoverflow.com/questions/57784998/how-to-cast-abstract-class-to-non-abstract-class/57785449#57785449", "title": "How to cast abstract class to non-abstract class?", "body": "<p>You could go dynamic, but at the risk of allowing <code>Adapter</code> itself to be passed in, which kinda defeats the purpose of an abstract class...</p>\n\n<pre><code>export abstract class Adapter {}\n\nexport function change(adapterConstructor: typeof Adapter): Adapter {\n    const constr: any = adapterConstructor;\n    return new constr() as Adapter;\n}\n</code></pre>\n\n<p>Otherwise, you'd need to introduce a concrete base class to use in place of Adapter... or change Adapter to be an interface that the each class would have to implement rather than using the abstract class.</p>\n"}, {"comments": [{"owner": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "edited": false, "score": 0, "creation_date": 1567676970, "post_id": 57791735, "comment_id": 102037367, "body": "Thank you! I had actually previously tried <code>typeof Adapter &amp; (new () =&gt; Adapter)</code> and had received a &quot;&#39;DateAdapter&#39; is assignable to the constraint of type &#39;T&#39;, but &#39;T&#39; could be instantiated with a different subtype of constraint &#39;DateAdapter&#39;&quot; error which I couldn&#39;t shake. Your response made me try things over again. Turns out the <i>real</i> problem was the type should be <code>typeof Adapter &amp; (new (...args: any[]) =&gt; Adapter)</code>, which works as expected."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "edited": false, "score": 0, "creation_date": 1567687617, "post_id": 57791735, "comment_id": 102043269, "body": "Sure, as long as you don&#39;t call <code>new ctor()</code> with no arguments in the implementation."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1567611470, "creation_date": 1567611470, "answer_id": 57791735, "question_id": 57784998, "link": "https://stackoverflow.com/questions/57784998/how-to-cast-abstract-class-to-non-abstract-class/57791735#57791735", "title": "How to cast abstract class to non-abstract class?", "body": "<p>Yes, you can require the <code>change()</code> method to take an intersection of <code>typeof Adapter</code> (which is not known to be newable) with a constructor signature.  </p>\n\n<p>First, I'm going to give <code>Adapter</code> some structure, since <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#why-do-these-empty-classes-behave-strangely\" rel=\"nofollow noreferrer\">empty classes behave strangely in TypeScript</a> and we don't want that to trip us up.  Also I want to add a static method to <code>Adapter</code> so that you can convince yourself that <code>change()</code> will be able to call it:</p>\n\n<pre><code>export abstract class Adapter {\n  prop = \"adapterProp\";\n  static staticMethod() {\n    console.log(\"HI THERE\");\n  }\n}\n</code></pre>\n\n<p>So here's the <code>change()</code> signature:</p>\n\n<pre><code>export function change(\n  adapterConstructor: typeof Adapter &amp; (new () =&gt; Adapter)\n) {\n  adapterConstructor.staticMethod();\n  return new adapterConstructor();\n}\n</code></pre>\n\n<p>You can see that <code>adapterConstructor</code> is both newable and has <code>Adapter</code>'s static method.  Do note that the constructor signature is <code>new () =&gt; Adapter</code>, meaning it needs no arguments and produces an <code>Adapter</code>.  </p>\n\n<p>Let's make sure this behaves as you want:</p>\n\n<pre><code>const cannotConstructAbstract = new Adapter(); // error!\nchange(Adapter); // error! cannot assign abstract to non-abstract\n</code></pre>\n\n<p>You can't <code>new</code> the <code>Adapter</code> class, and you can't call <code>change(Adapter)</code>, as desired.</p>\n\n<p>Now let's make a concrete subclass:</p>\n\n<pre><code>class ChickenAdapter extends Adapter {\n  cluck() {\n    console.log(\"B'KAW!\");\n  }\n}\n\nconst canConstruct = new ChickenAdapter(); // okay\nconst chickenAdapter = change(ChickenAdapter); // okay\n</code></pre>\n\n<p>You <em>can</em> <code>new</code> the <code>ChickenAdapter</code> class, and so you can call <code>change(ChickenAdapter)</code>, which returns an <code>Adapter</code>:</p>\n\n<pre><code>chickenAdapter.prop // okay\nchickenAdapter.cluck(); // error! it only returns an Adapter, not a ChickenAdapter\n</code></pre>\n\n<p>Note that <code>chickenAdapter</code> is not known to be an <code>ChickenAdapter</code> instance, since <code>change()</code> returns an <code>Adapter</code>.  If you want <code>change()</code> to keep track of this, you can make it generic in the return type:</p>\n\n<pre><code>export function change&lt;T extends Adapter&gt;(\n  adapterConstructor: typeof Adapter &amp; (new () =&gt; T)\n) {\n  adapterConstructor.staticMethod();\n  return new adapterConstructor();\n}\n</code></pre>\n\n<p>And then <code>chickenAdapter.cluck()</code> works:</p>\n\n<pre><code>chickenAdapter.cluck(); // okay\n</code></pre>\n\n<p>Let's move on to some edge cases:</p>\n\n<pre><code>class CowAdapter extends Adapter {\n  constructor(public color: string) {\n    super();\n  }\n\n  moo() {\n    console.log(\"MRRROOOORM!\");\n  }\n}\n\nconst howNow = new CowAdapter(\"brown\");\nconst butNeedsAnArgument = new CowAdapter(); // error! expected 1 argument\nchange(CowAdapter); // error!  CowAdapter needs arguments\n</code></pre>\n\n<p>Here, <code>change()</code> does not accept <code>CowAdapter</code> because that class requires a constructor argument, which the body of <code>change()</code> does not pass in.  That's probably the right thing to do.</p>\n\n<p>And also, let's make sure that you can't pass in something whose static side looks okay but doesn't produce an <code>Adapter</code>:</p>\n\n<pre><code>class NotAnAdapter {\n  static staticMethod() {}\n  notAnAdapter = true;\n}\n\nchange(NotAnAdapter); // error!\n//Property 'prop' is missing in type 'NotAnAdapter' but required in type 'Adapter'.\n</code></pre>\n\n<p>Also looks good.</p>\n\n<hr>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBAQwEYGcZQQY3pgNglFOAQQBMEwZgo4BvAWACg44B6VuACxhjBQC52AcwCWMTgFckAOkwQAtqwCyIzFAgoIAMxisAKgE8wwAMpqRlVgHcRAaxGsAYsQCKAYiucDAWlIRv4sAowN7A8pQ+eATBKN5IwJwIAG4haBgAdkLAuAZMLGDqYHAAvHAARGERcFGEQXDyCLbAcHomcKTASUSVMAZwQvi1RIB8G4DCu2UA3HlwaAgwqjMwc6pKwOIQpAAUAJR00yxy6Zq4wNK4EEKbZQASAJIt1wCiAEqPZdtTzHAAvky-jExQJBYHAtBJ0tgRBB0tVEplgAAePRwUBUdKkIhkChUKAAPk20wQ5Eo1AAwtC0hJsNB+HBesZtCRiTi4AAyOCbdLAKwc3bFXEtbZMXYML5E7FkinoKkwaDSWbzTCrdZbD7TKBrCRQGFcnniklQclHaXUqA7T7-JiHNDVBDpdIQGBGynYYiodBYeClXVMiVmj5sDjUdRQACEVrhWU2WINAfYKKgIdDtvtjsQhBEQhhyDSnrpEDgDvS3hzHuwTCtgyIpM4qia6RjLNRwHRmOZ1D2XzwVNsO07LAOFIgJzOFyuACEAOQAaWIAHVQ+9Pix-v9rTg7c6TV7C9y4DW6y3G9RzYG4BBbAhcox17DDw32zRSphI8BNgfMPXj1A4xwL1eI3vb9pAKCAwAmM9-2vF8gMfWRcB7U94ygisbyrfcICsb8URANEMV9A1+2qKUoBlaBNjAKRcAWORzigWk0hETIRX2GYJGMf1lx+VCWHkCAID7UUB2Io5h1Oc5LjKJRnhkgB5eTZOeJRFzVL5V1Q29OEwgA5TCSl3HlySwx8riQdQrHSJcrSlOAkAkGBtOAYAMWIBsoCECR5BbHcfSM78kKDRNoGTIFgGwZy4AARkQdzPO8iM7SjPzH1-BMkxYZK-V3ZyiAQWKvPSGAUA09DdJgVzsKExZlkwarFWVLTVTof4WAdcqHyy0ppWAC0NNfTYyoqlKIPjYNgqYdgAAVCmoXo4EnUCwEnOARCIeRVpQJihBWmF6WaSdBo6g1lrs+ANQARwkEQNVIHa6SMfbv0naQmCAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 57791735, "answer_count": 2, "score": 0, "last_activity_date": 1567611470, "creation_date": 1567587692, "question_id": 57784998, "link": "https://stackoverflow.com/questions/57784998/how-to-cast-abstract-class-to-non-abstract-class", "title": "How to cast abstract class to non-abstract class?", "body": "<p>If I have an <code>abstract class Adapter {}</code>, I'd like to create a function which accepts a non-abstract constructor extending this class and returns a new instance of the class.</p>\n\n<p>e.g.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export abstract class Adapter {}\n\nexport function change(adapterConstructor: typeof Adapter) {\n  return new adapterConstructor();\n}\n</code></pre>\n\n<p>Unfortunately, this example doesn't work because the typescript compiler correctly complains that an abstract class cannot be instantiated.</p>\n\n<p>Is it possible to limit the <code>adapterConstructor</code> argument to only non-abstract implementations of <code>typeof Adapter</code>?</p>\n\n<p>i.e. something like</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export abstract class Adapter {}\n\nexport function change(adapterConstructor: NonAbstract&lt;typeof Adapter&gt;) {\n  return new adapterConstructor();\n}\n</code></pre>\n\n<p>At the moment, my solution is to simply make the <code>Adapter</code> class non-abstract and have all of the methods which <em>should</em> be abstract throw errors.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1567587629, "post_id": 57784918, "comment_id": 102003433, "body": "Why are you typing label as <code>any</code>? It&#39;s a string."}], "answers": [{"tags": [], "owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "is_accepted": true, "score": 0, "last_activity_date": 1567588267, "creation_date": 1567588267, "answer_id": 57785154, "question_id": 57784918, "link": "https://stackoverflow.com/questions/57784918/the-left-hand-side-of-an-arithmetic-operation-must-be-of-type-any-number/57785154#57785154", "title": "The left-hand side of an arithmetic operation must be of type &#39;any&#39;, &#39;number&#39;, &#39;bigint&#39; or an enum type", "body": "<p>When I copy the code I have no such error, are you sure it is this part of the code? Also please try to avoid native java functions in typescript, use arrow functions instead. Which data type is sentimentChartMag? Where does it come from, since it has no this Which data type is yLabel? Could it be, that it is a string?</p>\n\n<p>After all it likely should look like this</p>\n\n<pre><code> label: tooltipItem =&gt; {\n          let label: string  = 'Score : ' + Math.round(Number(tooltipItem.yLabel) * 100) / 100;\n          label += ' | Magnitude : ' + this.sentimentChartMag[tooltipItem.index] || '';\n          return label;\n        }\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8959292, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TCw7YXcxqSs/AAAAAAAAAAI/AAAAAAAAAAc/JezWtTxWkCU/photo.jpg?sz=128", "display_name": "Paradox", "link": "https://stackoverflow.com/users/8959292/paradox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 57785154, "answer_count": 1, "score": -1, "last_activity_date": 1567588267, "creation_date": 1567587424, "last_edit_date": 1567587618, "question_id": 57784918, "link": "https://stackoverflow.com/questions/57784918/the-left-hand-side-of-an-arithmetic-operation-must-be-of-type-any-number", "title": "The left-hand side of an arithmetic operation must be of type &#39;any&#39;, &#39;number&#39;, &#39;bigint&#39; or an enum type", "body": "<p>I can't get rid of this problem in my code, it says <code>The left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type</code></p>\n\n<p>This is an Angular frontend</p>\n\n<pre><code>tooltips: {\n  callbacks: {\n    label: function (tooltipItem) {\n      var label:any = 'Score : ' + Math.round(tooltipItem.yLabel * 100) / 100;\n      label += ' | Magnitude : ' + sentimentChartMag[tooltipItem.index] || '';\n      return label;\n    }\n  }\n},\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript", "ecmascript-6"], "comments": [{"owner": {"reputation": 176, "user_id": 4027193, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/enLXR.jpg?s=128&g=1", "display_name": "Ramkumar P", "link": "https://stackoverflow.com/users/4027193/ramkumar-p"}, "edited": false, "score": 0, "creation_date": 1567590127, "post_id": 57784757, "comment_id": 102004829, "body": "you have to export in source file ie  /src/components/index.tsx and import in /src/index.tsx ."}, {"owner": {"reputation": 67, "user_id": 1518019, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a1452e335f66b60aa0df1d1bbded461a?s=128&d=identicon&r=PG", "display_name": "kmt", "link": "https://stackoverflow.com/users/1518019/kmt"}, "reply_to_user": {"reputation": 176, "user_id": 4027193, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/enLXR.jpg?s=128&g=1", "display_name": "Ramkumar P", "link": "https://stackoverflow.com/users/4027193/ramkumar-p"}, "edited": false, "score": 0, "creation_date": 1567607287, "post_id": 57784757, "comment_id": 102014249, "body": "Hi Ramkumar P, Thanks for your reply. As I have written in the post, I already exported all my components dynamically in /src/components/index.tsx. Typescript does not understand dynamic export patterns right now according to github issue posted in here <a href=\"https://github.com/microsoft/TypeScript/issues/32046#issuecomment-506051884\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/&hellip;</a>"}], "owner": {"reputation": 67, "user_id": 1518019, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a1452e335f66b60aa0df1d1bbded461a?s=128&d=identicon&r=PG", "display_name": "kmt", "link": "https://stackoverflow.com/users/1518019/kmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 617, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567586858, "creation_date": 1567586858, "question_id": 57784757, "link": "https://stackoverflow.com/questions/57784757/after-dynamically-export-files-typescript-cannot-find-module-file-index-tsx", "title": "After dynamically export files, typescript cannot find module [ File &#39;/index.tsx&#39; is not a module. ts(2306) ]", "body": "<p>I tried to dynamically export all my components in my project. But tsl does not allow me to pass and throw the error message <code>File '/src/components/index.tsx' is not a module. ts(2306)</code></p>\n\n<p>How can I prevent this error and make it understand that these are the dynamic export modules?</p>\n\n<p>This is my <b>folder structure</b></p>\n\n<pre><code>src\n|_ components\n|  |\n|  |_ index.tsx\n|  \n|_ index.tsx\n</code></pre>\n\n<p>In <b>/src/components/index.tsx</b>, I tried to <b>dynamically export</b> all the components</p>\n\n<pre><code>const cache: any = {};\nfunction getAllComponents() {\n  req.keys().forEach((key) =&gt; {\n    if (!(/^\\.\\/index.tsx$/.test(key))) {\n      const regex = /^\\.\\/([^\\/]+)[\\/].+/;\n      const found = key.match(regex)[1];\n      const newKey = found.split('-')\n                        .map(name =&gt; name.charAt(0).toUpperCase() + name.slice(1).toLowerCase())\n                        .join('');\n      cache[newKey] = req(key).default;\n    }\n  });\n  return { ...cache, __esModule: true };\n}\n\nmodule.exports = getAllComponents();\n</code></pre>\n\n<p><br/>\nIn <b>/src/index.tsx</b>, I tried to export all from components folder.</p>\n\n<pre><code>export * from './components/index';\n</code></pre>\n\n<p><br/></p>\n\n<p>It throws an error on this line <code>export * from './components/index</code> in <b>/src/index.tsx</b>.<br/>\n<b>Error message:</b> File '/src/components/index.tsx' is not a module. ts(2306)</p>\n"}, {"tags": ["typescript", "typescript-generics", "generic-type-argument", "union-types"], "comments": [{"owner": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "edited": false, "score": 0, "creation_date": 1567590833, "post_id": 57784613, "comment_id": 102005233, "body": "You are hitting the limit here. You need to generate code now. use node code as CLI to generate the interfaces you need for your project based on some existing code"}, {"owner": {"reputation": 123501, "user_id": 1903366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkUeD.png?s=128&g=1", "display_name": "lukasgeiter", "link": "https://stackoverflow.com/users/1903366/lukasgeiter"}, "reply_to_user": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "edited": false, "score": 2, "creation_date": 1567611370, "post_id": 57784613, "comment_id": 102016608, "body": "@AliHabibzadeh OP hasn&#39;t quite hit the limit yet. TypeScript&#39;s conditional and mapped types are very powerful. See my answer ;)"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10215587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65d8b6edbfd15c40fba8ef0a63d2ea0?s=128&d=identicon&r=PG&f=1", "display_name": "JForster", "link": "https://stackoverflow.com/users/10215587/jforster"}, "edited": false, "score": 0, "creation_date": 1567942987, "post_id": 57791670, "comment_id": 102110867, "body": "Thank you so much! This is perfect! Really clear and helpful explanation."}, {"owner": {"reputation": 123501, "user_id": 1903366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkUeD.png?s=128&g=1", "display_name": "lukasgeiter", "link": "https://stackoverflow.com/users/1903366/lukasgeiter"}, "reply_to_user": {"reputation": 33, "user_id": 10215587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65d8b6edbfd15c40fba8ef0a63d2ea0?s=128&d=identicon&r=PG&f=1", "display_name": "JForster", "link": "https://stackoverflow.com/users/10215587/jforster"}, "edited": false, "score": 0, "creation_date": 1567953771, "post_id": 57791670, "comment_id": 102113229, "body": "You&#39;re welcome. Consider marking the answer as accepted so it&#39;s clear for others that your problem has been solved."}], "tags": [], "owner": {"reputation": 123501, "user_id": 1903366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkUeD.png?s=128&g=1", "display_name": "lukasgeiter", "link": "https://stackoverflow.com/users/1903366/lukasgeiter"}, "is_accepted": true, "score": 6, "last_activity_date": 1567611252, "creation_date": 1567611252, "answer_id": 57791670, "question_id": 57784613, "link": "https://stackoverflow.com/questions/57784613/how-to-specify-union-types-as-object-keys-typescript/57791670#57791670", "title": "How to specify union types as object keys Typescript", "body": "<p>What we essentially need is a way to look up the type of the whole event by providing the event name. This can be accomplished using a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types\" rel=\"noreferrer\">conditional helper type</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type EventByName&lt;E extends WSEvent['event'], T = WSEvent&gt; = T extends {event: E} ? T : never;\n</code></pre>\n\n<p>The first generic argument <code>E</code> must be one of the event names. The second one is the union type we're trying to narrow down. It defaults to <code>WSEvent</code> so there's no need to specify it. The conditional expression then only returns those events in the union type which extend <code>{event: E}</code> (where <code>E</code> is the event name).</p>\n\n<p>Once we have the helper type it's pretty easy to adjust your existing mapped type for the callbacks accordingly:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Callbacks = {\n  [E in WSEvent['event']]: ((data: EventByName&lt;E&gt;['data']) =&gt; void)[];\n};\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/PTAEElQCwQwNwKagC5QJYGcUE8AOSNkAnAVwGNkSiEAaUAdygWpSdAUQDtlRNQYANvRjYsMUISJpOAczoAjEj1RIAJjGTiyMTqHlId2VNJmgAFIp58yAe06SY0hKr3ZWSDgm4BKAFC-pZGYAMxgyJABRLmQAFQQAW1wBDSQAb19QdmiALgliEwBuDNB1TVzDIoBffwQAD1wbIituELCkAGFqFKivHjqgzlUsHu44xOSg0HTMz25cgHIyLqCAfRkYeIR5oszSmFzpzIYEeQwbMgBrBGRwABEFyRNt4sqqmvrG5qCiUPDQACkbNIRn1agMhqAQWMkikpsVZsgFgArIGcNYbLY7EoafZwo6gdabO4PfKyZ6ZV6+aq+OoNJq8Fo-NqgACyCAwGBgMgQIPYYK8EKhCRhk0OCIWmw5XMxxT2uUesjeNI+9OQeCQAHUAMq8gC8oE6CG60VAAB8Aajeea2VLuSCir41fhIdEAELYAByGIAPBE+eCsNqQQBteYI+YAXToMVA+qD0QAfLHQDH+gKsKlxZDKqAAPwp0C5TieIgOp0dQQCeRhC5YfWHYN+6SgeO9UPhiMR3JmMxyl29d1eza+hOhvaR7yxpNwIGqbzBiNVB22ew8bQCKs1jC5dqV6uXOt40AgUBamysPgYKA2EgCFz6UBwQRoVTZYqSznc3LB3s43I2z8eWiMccQnXIZxfKcpkqOhfzKVl2UAkN5nHCNvHA2coNSSoo38TIT1dJQLywK8bzvUBOBsHgHyfAQXzoGAsENY1ehKGx2U4eYeFgRB3CyVj5hRaR0U2eZiiEtFCQQb84NxZigmQ1D0MfTDdSTbDcNeIA\" rel=\"noreferrer\">Playground</a></p>\n\n<hr>\n\n<p>Sidenote regarding the name of <code>callbacks</code>. It's recommended to use PascalCase for types. It makes it easier to distinguish from variables. I've changed it in my example to <code>Callbacks</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 10215587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65d8b6edbfd15c40fba8ef0a63d2ea0?s=128&d=identicon&r=PG&f=1", "display_name": "JForster", "link": "https://stackoverflow.com/users/10215587/jforster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4698, "favorite_count": 0, "accepted_answer_id": 57791670, "answer_count": 1, "score": 2, "last_activity_date": 1602664042, "creation_date": 1567586304, "last_edit_date": 1602664042, "question_id": 57784613, "link": "https://stackoverflow.com/questions/57784613/how-to-specify-union-types-as-object-keys-typescript", "title": "How to specify union types as object keys Typescript", "body": "<p>I need a way to type an object, where the key is the value of the 'event' field of a specific type, and the value is an array of callbacks that takes an object of the <em>same</em> type's data subtype.</p>\n<p>I have tried using mapped types, but I am a beginner with typescript and really struggling with this.</p>\n<pre class=\"lang-js prettyprint-override\"><code>// I have this type structure, where the event is always a string, but the data can be anything (but is constrained by the event)\n\ninterface EventTemplate {\n  event: string;\n  data: any;\n}\n\nexport interface CreateEvent extends EventTemplate {\n  event: 'create_game';\n  data: {\n    websocketID: 'string';\n  };\n}\n\nexport interface JoinEvent extends EventTemplate {\n  event: 'join_game';\n  data: {\n    gameID: 'string';\n  };\n}\n\nexport interface MessageEvent extends EventTemplate {\n  event: 'message';\n  data: string;\n}\n\nexport type WSEvent = CreateEvent | JoinEvent | MessageEvent;\n\n// I want an object like this\n\ntype callbacks = {\n  [key in WSEvent['event']]: ((data: WSEvent['data']) =&gt; void)[];\n};\n\n// Except that it forces the data structure to match with the key used. IE using a specific WSEvent rather than a generic one\n\n// Something along the lines of:\n\ntype callbacks = {\n  [key in (T extends WSEvent)['event']]: ((data: T['data']) =&gt; void)[];\n};\n// ...only valid..\n\nconst callbacks: callbacks = {\n  // So this should be valid:\n  message: [(data: MessageEvent['data']): void =&gt; {}, (data: MessageEvent['data']): void =&gt; {}],\n\n  // But this should not be valid, as CreateEvent doesn't have the event 'join_game'\n  join_game: [(data: CreateEvent['data']): void =&gt; {}],\n};\n</code></pre>\n<p>I am happy to restructure any of the above if it helps.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "is_accepted": false, "score": 0, "last_activity_date": 1567588310, "last_edit_date": 1567588310, "creation_date": 1567587772, "answer_id": 57785018, "question_id": 57784610, "link": "https://stackoverflow.com/questions/57784610/is-there-a-way-to-restrict-method-variable-access-to-the-component-and-its-temp/57785018#57785018", "title": "Is there a way to restrict method/variable access to the component and it&#39;s template?", "body": "<p>In your specific example you can use the <code>asObservable()</code>. This makes sure that anything outside the component cannot call <code>next()</code>. Although this will also make it so that you can't call that from the template.</p>\n\n<p>Unfortunately there is no way to make it just available in the template, and not available for any other piece of code that might have access to the instance. I remember 2 years ago when they added the check in the angular compiler, I had all my properties which were used in the template set as <code>private</code>. Was a big job to make them all public.</p>\n\n<p>For a more descriptive code, you can make the things that are used in the template not have an access identifier, and what should be part of the public API you can add the <code>public</code> property. This will not prevent access, but makes it more clear.</p>\n\n<p>You can also have a look at the <code>readonly</code> access identifier. This prevents anything from reassigning said property:</p>\n\n<pre><code>@Component({\n  selector: 'app-aanvraag',\n  template: `\n    &lt;div *ngIf=\"showMessage$ | async as message\"&gt;\n      {{message}}\n    &lt;/div&gt;`,\n  styleUrls: ['./aanvraag.component.scss']\n})\nexport class TestComponent {\n  private readonly showMessage = new BehaviorSubject('Some message');\n\n  readonly showMessage$ = this.showMessage.asObservable();\n\n  constructor() {\n  }\n\n  newMessage(message: string): void {\n    this.showMessage.next(message);\n  } \n}\n</code></pre>\n\n<p>If you want to have a property from a component just to have read access to the outside (including the template), you can use a getter:</p>\n\n<pre><code>export class TestComponent {\n  get message(): string {\n    return this._message;\n  }\n\n  private message: string = '';\n}\n</code></pre>\n\n<p><sub>\nfor code quality reasons, a small suggestion, use english naming with components and templates\n</sub></p>\n"}], "owner": {"reputation": 41, "user_id": 9635137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r2Me0.jpg?s=128&g=1", "display_name": "TomRaaff", "link": "https://stackoverflow.com/users/9635137/tomraaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1567588310, "creation_date": 1567586287, "last_edit_date": 1567587862, "question_id": 57784610, "link": "https://stackoverflow.com/questions/57784610/is-there-a-way-to-restrict-method-variable-access-to-the-component-and-its-temp", "title": "Is there a way to restrict method/variable access to the component and it&#39;s template?", "body": "<p>When I access a childcomponent using @ViewChild, I get access to all it's public methods. However, some of those methods are specifically written for template interaction and shouldn't be accessible for another (parent) component. You need to set variables/methods to public in order for your template to be able to use them, but doing so also breaks encapsulation. </p>\n\n<p>Does anyone know of a way to restrict variable/method access to only the component, it's template and it's test? For example like the package-private modifier in Java?</p>\n\n<p>In the following code, a parent-component is able to access the component via @ViewChild(TestComponent) and then call <code>testComponent.showMessage$.next('something totally unrelated')</code>. How can I define that this is functionality that I don't want to expose?</p>\n\n<pre><code>@Component({\n  selector: 'app-aanvraag',\n  template: `\n    &lt;div *ngIf=\"showMessage$ | async as message\"&gt;\n      {{message}}\n    &lt;/div&gt;`,\n  styleUrls: ['./aanvraag.component.scss']\n})\nexport class TestComponent {\n  showMessage$ = new BehaviorSubject('Some message');\n\n  constructor() {\n  }\n}\n\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 2342, "user_id": 8325761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x3NZk.jpg?s=128&g=1", "display_name": "bubbles", "link": "https://stackoverflow.com/users/8325761/bubbles"}, "edited": false, "score": 0, "creation_date": 1567590016, "post_id": 57784571, "comment_id": 102004768, "body": "you can bring only visible informations, all AutomationChecklist fieds are visible ?"}, {"owner": {"reputation": 313, "user_id": 10977489, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VYgSiO1T7FU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNag-6LuBk0iE0BtJ-AR9T76XQS0A/mo/photo.jpg?sz=128", "display_name": "Muhammad Ali", "link": "https://stackoverflow.com/users/10977489/muhammad-ali"}, "reply_to_user": {"reputation": 2342, "user_id": 8325761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x3NZk.jpg?s=128&g=1", "display_name": "bubbles", "link": "https://stackoverflow.com/users/8325761/bubbles"}, "edited": false, "score": 0, "creation_date": 1567591791, "post_id": 57784571, "comment_id": 102005808, "body": "I am not sure what you meant here?.. I need to store all the data, but installation checklist data becomes quite big and I want to have multiple request or someway to store the data properly without causing too much load on the server"}, {"owner": {"reputation": 2342, "user_id": 8325761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x3NZk.jpg?s=128&g=1", "display_name": "bubbles", "link": "https://stackoverflow.com/users/8325761/bubbles"}, "edited": false, "score": 0, "creation_date": 1567600109, "post_id": 57784571, "comment_id": 102010126, "body": "sorry i thought it&#39;s a read request, that&#39;s why i&#39;m talking about visualisation"}], "answers": [{"tags": [], "owner": {"reputation": 8097, "user_id": 8618350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f100e1a27815164cb9a9bf00487858?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Cheung", "link": "https://stackoverflow.com/users/8618350/fan-cheung"}, "is_accepted": false, "score": 0, "last_activity_date": 1567599032, "creation_date": 1567599032, "answer_id": 57788125, "question_id": 57784571, "link": "https://stackoverflow.com/questions/57784571/angular-7-handling-large-post-http-request/57788125#57788125", "title": "Angular 7 Handling large post http request", "body": "<p>lets say you have an array of data, below code will post to api with a concurrency of 3</p>\n\n<pre><code>array=[data,data,data]\nconst concurrency=3\nfrom(array).pipe(mergeMap(request=&gt;this.http\n    .post(this.url + this.saveRequestUrl, request, this.options),null,concurrency)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2342, "user_id": 8325761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x3NZk.jpg?s=128&g=1", "display_name": "bubbles", "link": "https://stackoverflow.com/users/8325761/bubbles"}, "is_accepted": true, "score": 1, "last_activity_date": 1567601188, "creation_date": 1567601188, "answer_id": 57788720, "question_id": 57784571, "link": "https://stackoverflow.com/questions/57784571/angular-7-handling-large-post-http-request/57788720#57788720", "title": "Angular 7 Handling large post http request", "body": "<p>If you want to separate <code>installations</code> you can do it using the <code>concatMapTo</code> operator :</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>saveRequest(automations: AutomationChecklist, installations: Installation[]) {\n  return this.http\n    .post(this.url + this.saveRequestUrl, automations, this.options)\n    .pipe(concatMapTo(this.http.post(this.url + /*installations save url*/, installations, this.options)))\n    .map((response: Response) =&gt; {\n      return response.json();\n    });\n}\n</code></pre>\n\n<p>Drawbacks of this solution:</p>\n\n<ol>\n<li>Two separate requests for the same requirement (create a new backend endpoint)</li>\n<li>Not atomic : the installations request may fail but the first one is succeeded (may lead to inconsist result)</li>\n<li>Installations request waits the first one to terminate</li>\n</ol>\n\n<p>It depends on what you want to do, if you accept inconcistency, it could be a good solution to lighten your request.</p>\n"}], "owner": {"reputation": 313, "user_id": 10977489, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VYgSiO1T7FU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNag-6LuBk0iE0BtJ-AR9T76XQS0A/mo/photo.jpg?sz=128", "display_name": "Muhammad Ali", "link": "https://stackoverflow.com/users/10977489/muhammad-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1557, "favorite_count": 0, "accepted_answer_id": 57788720, "answer_count": 2, "score": 2, "last_activity_date": 1567601188, "creation_date": 1567586163, "last_edit_date": 1567591698, "question_id": 57784571, "link": "https://stackoverflow.com/questions/57784571/angular-7-handling-large-post-http-request", "title": "Angular 7 Handling large post http request", "body": "<p>I have post http request which sends large amount of data, and contains array which can be quite large. I am trying to split the request so instead sending one request which contains all of the data, I would like to send it in chunks.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// service.ts\nsaveRequest(request: AutomationChecklist) {\n  return this.http\n    .post(this.url + this.saveRequestUrl, request, this.options)\n    .map((response: Response) =&gt; {\n      return response.json();\n    });\n}\n\n// automationChecklist.ts\nexport class AutomationChecklist {\n  siteInformation: siteInformation;\n  orderInformation: OrderInformation;\n  requestInformation: RequestInformation;\n  contactInformation: ContactInformation;\n  installations: Installation[]; // save this separately, this one can be quite large\n  completedAutomation: number;\n  progress: number;\n}\n</code></pre>\n\n<p>what can be the possible solution to handle this request? I have read about forkjoin rxjs but not sure if it will be suitable for this situation?</p>\n"}, {"tags": ["javascript", "typescript", "knockout.js"], "comments": [{"owner": {"reputation": 569, "user_id": 6069178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b79a42b43b7eba076c3f673e1ef2a10?s=128&d=identicon&r=PG", "display_name": "Budhead2004", "link": "https://stackoverflow.com/users/6069178/budhead2004"}, "edited": false, "score": 0, "creation_date": 1567778193, "post_id": 57784489, "comment_id": 102076962, "body": "By default knockout wants to &quot;set&quot; the select field value. So it acts like it&#39;s been touched and triggers the validation. Try adding the valueAllowUnset: true property to your select field. <a href=\"https://knockoutjs.com/documentation/value-binding.html#using-valueallowunset-with-select-elements\" rel=\"nofollow noreferrer\">knockoutjs.com/documentation/&hellip;</a>"}], "owner": {"reputation": 311, "user_id": 7230747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c04578be49bfdc81452c5df303a374?s=128&d=identicon&r=PG&f=1", "display_name": "xcelm", "link": "https://stackoverflow.com/users/7230747/xcelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567587623, "creation_date": 1567585911, "last_edit_date": 1567587623, "question_id": 57784489, "link": "https://stackoverflow.com/questions/57784489/field-validation-using-knockout", "title": "Field validation using knockout", "body": "<p>I need to create a validation for field using Knockout with typescript. </p>\n\n<p>I need my field to by required AND it also has to be greated than 0, but only if user picks specific value from a dropdown list.</p>\n\n<p>When using my code below, the message </p>\n\n<blockquote>\n  <p>'This field is required and must be greater than 0'</p>\n</blockquote>\n\n<p>Pops up everytime, even with default value of the form field which is null.</p>\n\n<p>Can anybody help me here? Thanks a lot</p>\n\n<p>What I got so far is: </p>\n\n<pre><code>        self.FormData.Income.sum_others.extend({\n            required: {\n                onlyif: () =&gt; { return thisFormData.Income.SourceOfIncome() == 4 },\n                params: true,\n                message: 'this field is required'\n            },\n            min: {\n                onlyif: () =&gt; { return this.FormData.Income.SourceOfIncome() == 4 },\n                params: 1,\n                message: 'This field is required and must be greater than 0'\n            }\n        });\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "filter", "emit"], "answers": [{"tags": [], "owner": {"reputation": 4314, "user_id": 4718434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868f43305a3a4e7deeb4abf55ff3a88d?s=128&d=identicon&r=PG&f=1", "display_name": "yaya", "link": "https://stackoverflow.com/users/4718434/yaya"}, "is_accepted": true, "score": 1, "last_activity_date": 1567586664, "creation_date": 1567586664, "answer_id": 57784694, "question_id": 57784337, "link": "https://stackoverflow.com/questions/57784337/filter-data-from-table-work-but-after-search-again-not-found-nothing-angular-pa/57784694#57784694", "title": "Filter Data from table work but after search again not found nothing [Angular,Pagination,Table]", "body": "<p>You're using just one variable (<code>taxList</code>) for data. when you get actual data from service, you set it. and when you filter it, you set it again. so actual data will be lost.</p>\n\n<p>You can instead introduce another variable (<code>filteredTaxList</code>) for filtered data.</p>\n\n<p>Now at first, when you get the actual data from service, you should store it on <code>taxList</code> , and set <code>filteredTaxList</code> to it.</p>\n\n<p>then when you change the filter, you set <code>filteredTaxList</code> from <code>taxList</code>.</p>\n\n<p>then you should use the new variable (<code>filteredTaxList</code>) in whole code, like for pagination and etc. </p>\n\n<pre><code>export class TaxreportsComponent implements OnInit {\n\n  public taxList: Array&lt;Tax&gt;;\n  public filteredList: Array&lt;Tax&gt;;\n  public page: number;\n  public currentPage: Array&lt;Tax&gt;;\n  public totalItems: number;\n\n  constructor(private service: CompanyService) {\n    this.totalItems = 0;\n    this.currentPage = [];\n    this.taxList = [];\n    this.filteredList= [];\n    this.page = 1;\n  }\n  ngOnInit() {\n    this.service.getTaxList((data) =&gt; this.onGetTaxList(data, true));\n  }\n  onGetTaxList(data, isOriginal) {\n    if(isOriginal) this.taxList = data;\n    this.filteredtaxList = data;\n    this.currentPage = this.filteredtaxList.slice(0, 10);\n    this.totalItems = this.filteredtaxList.length;\n  }\n  pageChanged(event) {\n    const startItem = (event.page - 1) * event.itemsPerPage;\n    const endItem = event.page * event.itemsPerPage;\n    this.currentPage = this.filteredTaxList.slice(startItem, endItem);\n  }\n\n// Sort the data and change the table\n  sort(searchWord) {\n    const data = this.taxList.filter(item =&gt; {\n      return item.type === searchWord;\n    });\n    this.onGetTaxList(data, false);\n  }\n</code></pre>\n"}], "owner": {"reputation": 662, "user_id": 10994570, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pgyxqsrbzSU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPQJagQnff-c62qB53aoUEvnv7fRg/mo/photo.jpg?sz=128", "display_name": "Baruch Mashasha", "link": "https://stackoverflow.com/users/10994570/baruch-mashasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57784694, "answer_count": 1, "score": 0, "last_activity_date": 1567586664, "creation_date": 1567585385, "last_edit_date": 1567586037, "question_id": 57784337, "link": "https://stackoverflow.com/questions/57784337/filter-data-from-table-work-but-after-search-again-not-found-nothing-angular-pa", "title": "Filter Data from table work but after search again not found nothing [Angular,Pagination,Table]", "body": "<p>I have table with pagination. I build a function that take the object and filter it and then show in table the result.</p>\n\n<p>The problem is when I search again the old data from the object was removed in the first search and when I search again is not found me.</p>\n\n<p>this is my code and my sort function:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class TaxreportsComponent implements OnInit {\n\n  public taxList: Array&lt;Tax&gt;;\n  public page: number;\n  public currentPage: Array&lt;Tax&gt;;\n  public totalItems: number;\n\n  constructor(private service: CompanyService) {\n    this.totalItems = 0;\n    this.currentPage = [];\n    this.taxList = [];\n    this.page = 1;\n  }\n  ngOnInit() {\n    this.service.getTaxList((data) =&gt; this.onGetTaxList(data));\n  }\n  onGetTaxList(data) {\n    this.taxList = data;\n    this.currentPage = this.taxList.slice(0, 10);\n    this.totalItems = this.taxList.length;\n  }\n  pageChanged(event) {\n    const startItem = (event.page - 1) * event.itemsPerPage;\n    const endItem = event.page * event.itemsPerPage;\n    this.currentPage = this.taxList.slice(startItem, endItem);\n  }\n\n// Sort the data and change the table\n  sort(searchWord) {\n    const data = this.taxList.filter(item =&gt; {\n      return item.type === searchWord;\n    });\n    this.onGetTaxList(data);\n  }\n</code></pre>\n\n\n\n<p>And this is my html:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>&lt;app-home-menu (filteEvent)=\"sort($event)\" &gt;&lt;/app-home-menu&gt;\n&lt;div class=\"table-container\"&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;thead&gt;\n      &lt;tr class=\"table-nav\"&gt;\n        &lt;th scope=\"col\"&gt;Year&lt;/th&gt;\n        &lt;th scope=\"col\"&gt;Type&lt;/th&gt;\n        &lt;th scope=\"col\"&gt;HP&lt;/th&gt;\n        &lt;th scope=\"col\"&gt;CompanyName&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;ng-container *ngFor=\"let tax of currentPage\"&gt;\n        &lt;tr&gt;\n          &lt;td&gt;{{tax.year}}&lt;/td&gt;\n          &lt;td&gt;{{tax.type}}&lt;/td&gt;\n          &lt;td&gt;{{tax.cid}}&lt;/td&gt;\n          &lt;td&gt;{{tax.company}}&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/ng-container&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;div class=\"table-footer\"&gt;\n  &lt;pagination class=\"pagination\" nextText=\"&gt;\" previousText=\"&lt;\"  [totalItems]=\"totalItems\" (pageChanged)=\"pageChanged($event)\"&gt; &lt;/pagination&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n\n\n<p>I need to find a way for each search that the original object initialization first then search again</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1567613067, "post_id": 57784174, "comment_id": 102017533, "body": "I don&#39;t see any conditional types in your question (am I just missing them)?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1567613215, "post_id": 57784174, "comment_id": 102017608, "body": "Your main issue is a combination of a longstanding issue (<a href=\"https://github.com/microsoft/TypeScript/issues/13995\" rel=\"nofollow noreferrer\">microsoft/TypeScript#13995</a>: can&#39;t narrow <code>T</code> when you type guard on <code>t</code>) and a recent improvement to soundness (<a href=\"https://github.com/microsoft/TypeScript/pull/30769:\" rel=\"nofollow noreferrer\">microsoft/TypeScript#30769</a> synthesize intersections when writing to properties via a union of keys)."}, {"owner": {"reputation": 43, "user_id": 4131307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82baf6273ec724f660eec112608d24b6?s=128&d=identicon&r=PG&f=1", "display_name": "FAhmed", "link": "https://stackoverflow.com/users/4131307/fahmed"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567619496, "post_id": 57784174, "comment_id": 102020197, "body": "@jcalz - edited for clarity. Thanks  a lot for your links. You seem to be absolutely right here, it seems to be a current limitation of the typescript compiler."}], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1567613298, "post_id": 57784492, "comment_id": 102017655, "body": "Note that <code>Pick&lt;Basket, T&gt;[T]</code> can be replaced with just <code>Basket[T]</code>."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1567613429, "post_id": 57784492, "comment_id": 102017717, "body": "Also note that while the question <i>mentions</i> conditional types, the code does not seem to use them and so your explanation here about deferred conditional type resolution doesn&#39;t seem to apply.  The specific issue with intersections is due to how <a href=\"https://github.com/microsoft/TypeScript/pull/30769\" rel=\"nofollow noreferrer\">microsoft/TypeScript#30769</a> interacts with <a href=\"https://github.com/microsoft/TypeScript/issues/13995\" rel=\"nofollow noreferrer\">microsoft/TypeScript#13995</a>."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1567613470, "post_id": 57784492, "comment_id": 102017733, "body": "\ud83d\udc4d for the overload solution, though!"}, {"owner": {"reputation": 43, "user_id": 4131307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82baf6273ec724f660eec112608d24b6?s=128&d=identicon&r=PG&f=1", "display_name": "FAhmed", "link": "https://stackoverflow.com/users/4131307/fahmed"}, "edited": false, "score": 0, "creation_date": 1567620376, "post_id": 57784492, "comment_id": 102020557, "body": "Edited the code example in the question to use conditional types as the title implies. Looks like overloading is the way to go here. Thank you both!"}], "tags": [], "owner": {"reputation": 178, "user_id": 7123913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zSs4.jpg?s=128&g=1", "display_name": "Pierre-Louis Lacorte", "link": "https://stackoverflow.com/users/7123913/pierre-louis-lacorte"}, "is_accepted": true, "score": 2, "last_activity_date": 1567667789, "last_edit_date": 1567667789, "creation_date": 1567585933, "answer_id": 57784492, "question_id": 57784174, "link": "https://stackoverflow.com/questions/57784174/why-does-using-a-conditional-operator-result-in-an-intersection-type/57784492#57784492", "title": "Why does using a conditional operator result in an intersection type?", "body": "<p>Regarding your issue it comes from conditional types that are deferred. Look at the typescript documentation: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types</a>. (<em>search for conditional types are deferred to get to the right place in the page</em>).</p>\n\n<p>The simplest solution is to use a separate implementation signature that is more permissive, while keeping the public signature with conditional types that is better for the caller:</p>\n\n<pre><code>type Basket = {\n    Fruit: 'banana',\n    Veggie: 'tomato'\n}\n\nfunction f3 &lt;T extends keyof Basket&gt;(t: T): Basket[T]; \nfunction f3 &lt;T extends keyof Basket&gt;(t: string): Basket[keyof Basket] {\n    if (t == 'Fruit') {\n        return  'banana'\n    } else {\n        return  'tomato'\n    }\n}\n\nconst complies2 = f3('Fruit'); // complies2 is \"banana\"\n</code></pre>\n\n<p>Note: arrow functions don't work with function overload.</p>\n"}], "owner": {"reputation": 43, "user_id": 4131307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82baf6273ec724f660eec112608d24b6?s=128&d=identicon&r=PG&f=1", "display_name": "FAhmed", "link": "https://stackoverflow.com/users/4131307/fahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 2, "accepted_answer_id": 57784492, "answer_count": 1, "score": 4, "last_activity_date": 1567667789, "creation_date": 1567584822, "last_edit_date": 1567619369, "question_id": 57784174, "link": "https://stackoverflow.com/questions/57784174/why-does-using-a-conditional-operator-result-in-an-intersection-type", "title": "Why does using a conditional operator result in an intersection type?", "body": "<p>I'm trying to create a generic function that conditionally returns values based on the type of its argument, but I'm stuck trying to implement the return type.</p>\n\n<p>Assuming there's a type <code>Basket</code></p>\n\n<pre><code>type Basket = {\n    Fruit: 'banana',\n    Veggie: 'tomato'\n}\n</code></pre>\n\n<p>Now if I want to conditionally return either 'banana' or 'tomato' based on the argument passed to a function, I am unable to get it to compile: </p>\n\n<pre><code>const f1 = &lt;T extends keyof Basket&gt;(t: T): T extends 'Fruit'? 'banana': 'tomato' =&gt; {\n    if (t == 'Fruit') {\n        return 'banana' //Error on this line - doesn't compile -- Type '\"banana\"' is not assignable to type '\"banana\" &amp; \"tomato\"\n    } else {\n        return  'tomato' //Error on this line - doesn't compile -- Type '\"tomato\"' is not assignable to type '\"banana\" &amp; \"tomato\"\n    }\n}\n</code></pre>\n\n<p>Now when I instantiate this after passing the right generic parameter, I get the type I expect, but it doesn't compile</p>\n\n<pre><code>const doesntCompile: 'banana' = f1&lt;'Fruit'&gt;('') //type: 'banana', which is what I want ... but this doesn't compile due to the error above.\n</code></pre>\n\n<p>However, if I don't use generics I get a sum type like so</p>\n\n<pre><code>//This compiles\nconst f2 = &lt;T extends keyof Basket&gt;(t: string): Basket[keyof Basket] =&gt; { //return type is 'banana' | 'tomato'\n    if (t == 'yellow') {\n        return  'banana'\n    } else {\n        return  'tomato'\n    }\n}\nconst complies: 'banana' | 'tomato' = f2&lt;'Fruit'&gt;('') //type: 'banana' | 'tomato', but I want the type here to be 'banana'\n</code></pre>\n\n<p>Now it compiles just fine, but I lose the benefit of type safety.</p>\n\n<p>How would I get this example to work while retaining generics? Any help is deeply appreciated.</p>\n"}, {"tags": ["typescript", "permissions", "typing"], "owner": {"reputation": 1767, "user_id": 1116408, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc08b21d674ee3339d2a2fd8e914c2d5?s=128&d=identicon&r=PG", "display_name": "mc.suchecki", "link": "https://stackoverflow.com/users/1116408/mc-suchecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567584116, "creation_date": 1567584116, "question_id": 57783979, "link": "https://stackoverflow.com/questions/57783979/modeling-a-permission-tree-in-typescript", "title": "Modeling a permission tree in TypeScript", "body": "<p>I am trying to model a permission tree, which looks like this (JSON):</p>\n\n<pre><code>{\n  DOMAIN_1: {CREATE: true, EDIT: true, DELETE: true, READ: true},\n  DOMAIN_2: {CREATE: true, EDIT: true, DELETE: true, READ: true}\n  DOMAIN_3: {CREATE: true, EDIT: true, DELETE: true, READ: true}\n  ...\n}\n</code></pre>\n\n<p>(of course DOMAIN_1, and the others are representing actual business domains, like CUSTOMERS etc.)</p>\n\n<p>I could just type this object like so: <code>const permissionTree: {[domain: string]: {[type: string]: boolean};</code>. However, I tried to do something more strict and came up with the following code:</p>\n\n<pre><code>enum PermissionArea {\n    DOMAIN_1 = 'DOMAIN_1',\n    DOMAIN_2 = 'DOMAIN_2',\n    ...\n}\n\nenum PermissionType {\n    CREATE = 'CREATE',\n    READ = 'READ',\n    EDIT = 'EDIT',\n    DELETE = 'DELETE'\n}\n\ntype PermissionsTree = {\n    [key in PermissionArea]: { [type in PermissionType]: boolean };\n};\n\nexport class Permission {\n    public static create(area: PermissionArea, type: PermissionType): string {\n        return `${area}.${type}`;\n    }\n}\n\nconst isPermission = (x: any): x is Permission =&gt; {\n    if (typeof x !== 'string') {\n        return false;\n    }\n\n    const keys = x.split('.');\n\n    if (keys.length !== 2) {\n        return false;\n    }\n\n    return keys[0] in PermissionArea &amp;&amp; keys[1] in PermissionType;\n};\n</code></pre>\n\n<p>Whereas this seems to be a better approach than the first one, it is not ideal. First of all, my <code>Permission</code> is actually a <code>string</code>, and whenever I want to use methods, like <code>split</code>, I need to specify the type as string or cast it. This defies the purpose of typing it, like in the example below (error will be in runtime, not in compilation time):</p>\n\n<pre><code>const isAuthorized = (\n    permission: string,\n    userPermissions: PermissionsTree\n): boolean | undefined =&gt; {\n    if (!isPermission(permission)) {\n        throw new Error(`${permission} is not an allowed permission!`);\n    } else {\n        return userPermissions[getPermissionArea(permission)][getPermissionType(permission)];\n    }\n};\n\n</code></pre>\n\n<p>Also, creating a permission is a bit verbose, this is a usage example:</p>\n\n<pre><code>const AUTH_ROUTES: AuthenticatedRoute[] = [\n    ...\n    {\n        path: '/users',\n        component: &lt;Users/&gt;,\n        permissions: [Permission.create(PermissionArea.USER, PermissionType.READ)]\n    },\n    ...\n\n</code></pre>\n\n<p>Do you have any suggestions how to improve those typings leaving the permissions tree in JSON unchanged?</p>\n"}, {"tags": ["reactjs", "typescript", "react-router"], "comments": [{"owner": {"reputation": 1401, "user_id": 8810941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIKlt.jpg?s=128&g=1", "display_name": "Pavindu", "link": "https://stackoverflow.com/users/8810941/pavindu"}, "edited": false, "score": 0, "creation_date": 1567583949, "post_id": 57783763, "comment_id": 102001489, "body": "You can define a function in the parent component and pass it as a prop to child component. See <a href=\"https://stackoverflow.com/questions/54264486/pass-props-to-another-component-onclick-of-a-button\" title=\"pass props to another component onclick of a button\">stackoverflow.com/questions/54264486/&hellip;</a>"}, {"owner": {"reputation": 97, "user_id": 9891089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb865323e3c247065a9e21f45b343083?s=128&d=identicon&r=PG&f=1", "display_name": "xander cage", "link": "https://stackoverflow.com/users/9891089/xander-cage"}, "reply_to_user": {"reputation": 1401, "user_id": 8810941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIKlt.jpg?s=128&g=1", "display_name": "Pavindu", "link": "https://stackoverflow.com/users/8810941/pavindu"}, "edited": false, "score": 0, "creation_date": 1567586989, "post_id": 57783763, "comment_id": 102003065, "body": "Lets suppose i have a function from parent called getContactId which i sent to this chid component. Tell me how to send the data back to parent when i click that specific div."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 9891089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb865323e3c247065a9e21f45b343083?s=128&d=identicon&r=PG&f=1", "display_name": "xander cage", "link": "https://stackoverflow.com/users/9891089/xander-cage"}, "edited": false, "score": 0, "creation_date": 1567600446, "post_id": 57785155, "comment_id": 102010309, "body": "hello prakash! i&#39;ve tried this method but facing an issue with this keyword. It says this implicitly has type any because it does not have a type annotation"}, {"owner": {"reputation": 1, "user_id": 11158772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-prURQfUd01o/AAAAAAAAAAI/AAAAAAAABDo/OtMofzLxyzU/photo.jpg?sz=128", "display_name": "PRAKASH UDAGATTI", "link": "https://stackoverflow.com/users/11158772/prakash-udagatti"}, "reply_to_user": {"reputation": 97, "user_id": 9891089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb865323e3c247065a9e21f45b343083?s=128&d=identicon&r=PG&f=1", "display_name": "xander cage", "link": "https://stackoverflow.com/users/9891089/xander-cage"}, "edited": false, "score": 0, "creation_date": 1567660775, "post_id": 57785155, "comment_id": 102030205, "body": "@xandercage can you please add your complete class component code, so that i can tell you whats wrong."}], "tags": [], "owner": {"reputation": 1, "user_id": 11158772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-prURQfUd01o/AAAAAAAAAAI/AAAAAAAABDo/OtMofzLxyzU/photo.jpg?sz=128", "display_name": "PRAKASH UDAGATTI", "link": "https://stackoverflow.com/users/11158772/prakash-udagatti"}, "is_accepted": false, "score": 0, "last_activity_date": 1567588807, "last_edit_date": 1567588807, "creation_date": 1567588267, "answer_id": 57785155, "question_id": 57783763, "link": "https://stackoverflow.com/questions/57783763/sending-data-to-parent-component-when-a-random-div-is-clicked-in-react/57785155#57785155", "title": "sending data to parent component when a random div is clicked in react", "body": "<pre><code>displayEachContact() {\n    addressBookUIFunctionality.prototype.hideAddPopup();\n    return (\n        this.props.AllContacts.map(function (eachContact) {\n            return (\n                &lt;Link to={'/'+eachContact.ID} style={{textDecoration:'none'}} &gt;\n                { onClick={() =&gt;  this.props.displayContact(eachContact.ID)}}\n                &lt;div id={eachContact.ID} className=\"each_contact inactive_contact\"&gt;\n                    &lt;span className=\"contact_summary contact_summary_first_field\"&gt; \n                      {eachContact.Name}&lt;/span&gt;\n                    &lt;span className=\"contact_summary\"&gt;{eachContact.Email}&lt;/span&gt;\n                    &lt;span className=\"contact_summary\"&gt;{eachContact.Mobile}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;/Link&gt;\n            );\n\n        })\n        )\n    }\n    render() {\n        return (\n            &lt;Route exact path='/allContacts'&gt;\n                &lt;div className=\"contacts\"&gt;\n                    {this.displayEachContact()}\n                &lt;/div&gt;\n            &lt;/Route&gt;\n        );\n</code></pre>\n\n<p>On click of div call one function like <code>this.props.displayContact(eachContact.ID)</code> from parent component and pass ID or whatever you want as parameter.</p>\n"}], "owner": {"reputation": 97, "user_id": 9891089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb865323e3c247065a9e21f45b343083?s=128&d=identicon&r=PG&f=1", "display_name": "xander cage", "link": "https://stackoverflow.com/users/9891089/xander-cage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567588807, "creation_date": 1567583347, "last_edit_date": 1567586241, "question_id": 57783763, "link": "https://stackoverflow.com/questions/57783763/sending-data-to-parent-component-when-a-random-div-is-clicked-in-react", "title": "sending data to parent component when a random div is clicked in react", "body": "<p>I'm creating an N number of <code>div</code>s using an array of objects named 'allContacts' and map function. When one of these <code>div</code>s is clicked, I want to send the respective div id to the parent component. How can I do that? Each div has different id and here id refers to <code>eachContact.ID</code>. </p>\n\n<p>I'm not able to use props to send the data as it is showing 'undefined'.  Can I use <code>Link</code> in react-router to send data (I'm using React Router)? </p>\n\n<pre><code>displayEachContact() {\n        addressBookUIFunctionality.prototype.hideAddPopup();\n        return (\n            this.props.AllContacts.map(function (eachContact) {\n                return (\n                    &lt;Link to={'/'+eachContact.ID} style={{textDecoration:         'none'}} &gt;\n                    {/* onClick={() =&gt;     AllContacts.prototype.displayContact(eachContact)} */}\n                    &lt;div id={eachContact.ID} className=\"each_contact inactive_contact\"&gt;\n                        &lt;span className=\"contact_summary contact_summary_first_field\"&gt;{eachContact.Name}&lt;/span&gt;\n                        &lt;span className=\"contact_summary\"&gt;{eachContact.Email}&lt;/span&gt;\n                        &lt;span className=\"contact_summary\"&gt;{eachContact.Mobile}&lt;/span&gt;\n                    &lt;/div&gt;\n                    &lt;/Link&gt;\n                );\n\n            })\n            )\n    }\n    render() {\n        return (\n            &lt;Route exact path='/allContacts'&gt;\n                &lt;div className=\"contacts\"&gt;\n                    {this.displayEachContact()}\n                &lt;/div&gt;\n            &lt;/Route&gt;\n        );\n    }\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "jestjs", "enzyme"], "answers": [{"tags": [], "owner": {"reputation": 7400, "user_id": 1045081, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22d02fc94bcf013df83d76d773b60443?s=128&d=identicon&r=PG", "display_name": "cubbuk", "link": "https://stackoverflow.com/users/1045081/cubbuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1567584767, "last_edit_date": 1567584767, "creation_date": 1567583509, "answer_id": 57783808, "question_id": 57783688, "link": "https://stackoverflow.com/questions/57783688/if-i-should-import-like-as-foo-func-it-is-foo-func-is-not-a-function-error-in/57783808#57783808", "title": "if i should import like * as foo-func, it is foo-func is not a function error in jest", "body": "<pre><code>import * as fooModule from 'foo'\n</code></pre>\n\n<p>would import all named exports from module <code>foo</code> and assign them to <code>fooModule</code> variable. So to give an example if <code>foo.js</code> is defined as the following:</p>\n\n<pre><code>export const someVariable = 'someVariable';\nexport function someFunction(){..}\nexport default defaultFunctionToExport(){\n  console.log('This function can be imported by import default syntax');\n}\n</code></pre>\n\n<p>Then <code>fooModule</code> imported as following <code>import * as fooModule from 'foo'</code> will equal to this object:</p>\n\n<pre><code>fooModule = {\n  someVariable: 'someVariable', \n  someFunction(){...},\n  defaultFunctionToExport(){...}\n};\n</code></pre>\n\n<p>Therefore when you import moment as <code>import * as moment from 'moment'</code> <code>moment</code> variable in your code will be containing all the named exports which is an object not a function. Therefore when you call smtg like <code>moment()</code> it would throw an exception. If you just need the moment function you can try importing moment module with <code>default</code> import syntax i.e.</p>\n\n<pre><code>import moment from 'moment' // this would import the default function exported from moment method\n\nor\n\nimport fooFunction from 'foo'// fooFunction will be defaultFunctionToExport which is exported by foo module with default keyword \n</code></pre>\n\n<p>Moment documentation is using the syntax you are using for typescript <a href=\"https://momentjs.com/docs/#/use-it/typescript/\" rel=\"nofollow noreferrer\">https://momentjs.com/docs/#/use-it/typescript/</a> but I tried with typescript 3.5 with <code>moment 2.24</code> and I can confirm using default import would be the correct way of importing here.</p>\n"}], "owner": {"reputation": 177, "user_id": 9167505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47db12385d2bb2d27693909aeb088b6c?s=128&d=identicon&r=PG&f=1", "display_name": "\uacfd\ub300\uc6a9", "link": "https://stackoverflow.com/users/9167505/%ea%b3%bd%eb%8c%80%ec%9a%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57783808, "answer_count": 1, "score": 0, "last_activity_date": 1567584767, "creation_date": 1567583062, "question_id": 57783688, "link": "https://stackoverflow.com/questions/57783688/if-i-should-import-like-as-foo-func-it-is-foo-func-is-not-a-function-error-in", "title": "if i should import like * as foo-func, it is foo-func is not a function error in jest", "body": "<p>i has a problem that use jest &amp; library.</p>\n\n<p>in typescript, it sometimes is required that coding like 'import * as ~' when use external library.</p>\n\n<p>but it is make an error on jest.</p>\n\n<p>use code</p>\n\n<pre><code>import * as moment from 'moment';\n\n...\nmoment(...)\n\n</code></pre>\n\n<p>error in test code</p>\n\n<pre><code>TypeError: moment is not a function\n</code></pre>\n\n<p>is it good solution for resolve the problem?</p>\n"}, {"tags": ["typescript", "npm", "bundle", "rollup"], "answers": [{"tags": [], "owner": {"reputation": 9279, "user_id": 2964675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dp6kh.jpg?s=128&g=1", "display_name": "MarcoL", "link": "https://stackoverflow.com/users/2964675/marcol"}, "is_accepted": false, "score": 2, "last_activity_date": 1570807205, "creation_date": 1570807205, "answer_id": 58344250, "question_id": 57783368, "link": "https://stackoverflow.com/questions/57783368/rollup-watch-failed-to-resolve-transform-dependency/58344250#58344250", "title": "rollup watch failed to resolve transform dependency", "body": "<p>I had a similar issue when using the <code>rollup-plugin-typescript2</code> library.</p>\n\n<p>At first I did check the file existed and then add the file requested in the <code>include</code> file within the <code>tsconfig.json</code> to check if it worked.\nIt did work but the solution wasn't great.</p>\n\n<p>Then I removed the <code>rpt2_cache</code> folder in the project workspace and tried again, all ok now.</p>\n"}], "owner": {"reputation": 147, "user_id": 1552181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed11cd34142cf8fa7196783958e4c005?s=128&d=identicon&r=PG", "display_name": "HostMAX", "link": "https://stackoverflow.com/users/1552181/hostmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570807205, "creation_date": 1567581674, "question_id": 57783368, "link": "https://stackoverflow.com/questions/57783368/rollup-watch-failed-to-resolve-transform-dependency", "title": "rollup watch failed to resolve transform dependency", "body": "<p>I have a node project (namely A) that has the following dependencies:</p>\n\n<pre><code>A requires B (^1.2.0)\nA requires C (^1.0.0)\nC requires B (^1.0.0)\n</code></pre>\n\n<p>And the problem comes from that B dependency. For some reason, if I use rollup without using watch (<code>-w</code>), then everything is rolled up nicely. However, when I added watch (<code>-w</code>), then rollup starts to misbehave and throws this:</p>\n\n<pre><code>Error: Transform dependency node_modules/B/node_modules/C/index.ts does not exist.\n</code></pre>\n\n<p>Did I miss something here ? :( Thanks!</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 2933, "user_id": 11204469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b1be34bb82f28e14b12665d4b5df53?s=128&d=identicon&r=PG&f=1", "display_name": "Estradiaz", "link": "https://stackoverflow.com/users/11204469/estradiaz"}, "edited": false, "score": 0, "creation_date": 1567578977, "post_id": 57782693, "comment_id": 101999276, "body": "There is no <code>.map</code>. did you mean <code>&lt;DataModel[]&gt;</code>?"}, {"owner": {"reputation": 3344, "user_id": 7085070, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bMjQO.jpg?s=128&g=1", "display_name": "OlegI", "link": "https://stackoverflow.com/users/7085070/olegi"}, "edited": false, "score": 0, "creation_date": 1567579241, "post_id": 57782693, "comment_id": 101999379, "body": "<code>.map</code> is applicable only to collections"}], "answers": [{"tags": [], "owner": {"reputation": 6137, "user_id": 3870547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b3e98f2a1ec4b92a87aa6c76e095d8?s=128&d=identicon&r=PG&f=1", "display_name": "zmag", "link": "https://stackoverflow.com/users/3870547/zmag"}, "is_accepted": true, "score": 1, "last_activity_date": 1567578902, "creation_date": 1567578902, "answer_id": 57782735, "question_id": 57782693, "link": "https://stackoverflow.com/questions/57782693/prototype-functions-like-map-does-not-work-in-a-typescript-model/57782735#57782735", "title": "prototype functions like .map does not work in a typescript model", "body": "<p>I think the type of <code>data</code> property in <code>ResponseModel</code> should be an array type.</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>export class ResponseModel&lt;Model&gt;{\n    status: number\n    message: string\n    data: Model[]\n}\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 10929367, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cX8fhQ_Ynxo/AAAAAAAAAAI/AAAAAAAAAJo/gJAU8PQxlqE/photo.jpg?sz=128", "display_name": "Meisam Nazari", "link": "https://stackoverflow.com/users/10929367/meisam-nazari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57782735, "answer_count": 1, "score": -1, "last_activity_date": 1567579409, "creation_date": 1567578720, "question_id": 57782693, "link": "https://stackoverflow.com/questions/57782693/prototype-functions-like-map-does-not-work-in-a-typescript-model", "title": "prototype functions like .map does not work in a typescript model", "body": "<p>I fetch data from a server and I defined a typescript model for data which comes from server like this: </p>\n\n<pre><code>export class DataModel{\n    public PageNo: number\n    public showFromDate: string\n    public showToDate: string\n    public gradeFieldId: number\n}\n\nexport class ResponseModel&lt;Model&gt;{\n    status: number\n    message: string\n    data: Model\n}\n</code></pre>\n\n<p>But in <code>.then</code> of <code>axios</code> when I want to do some manipulation on my data I got the error <code>map does not exist on type DataModel</code>. This error is same for other prototype functions like <code>.length</code>.</p>\n\n<pre><code>.then(data:ResponseModel&lt;DataModel&gt;)=&gt;{\n   data.map(item:any=&gt;{\n    ...// some functions\n   })\n}\n</code></pre>\n\n<p>Now how can I use my model and prototype functions like .map at the same time for this data.</p>\n"}, {"tags": ["reactjs", "typescript", "react-router", "axios", "api-design"], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 10543406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R_udKVmw9XI/AAAAAAAAAAI/AAAAAAAAAQQ/4PPfPdkoZTQ/photo.jpg?sz=128", "display_name": "Akusas", "link": "https://stackoverflow.com/users/10543406/akusas"}, "edited": false, "score": 0, "creation_date": 1567580544, "post_id": 57782767, "comment_id": 101999895, "body": "That worked perfectly, just had to change out <code>this.props.match.params.yearId</code> with <code>this.props.location.search</code> since this is the parameter that the API worjs out from. Thank you so much, been scratching my head a while now. Haven&#39;t heard of the ComponentDidUpdate"}, {"owner": {"reputation": 790, "user_id": 10441261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3f77668fb5c527ecd07dd2f44407c2?s=128&d=identicon&r=PG&f=1", "display_name": "Hemanath", "link": "https://stackoverflow.com/users/10441261/hemanath"}, "reply_to_user": {"reputation": 348, "user_id": 10543406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R_udKVmw9XI/AAAAAAAAAAI/AAAAAAAAAQQ/4PPfPdkoZTQ/photo.jpg?sz=128", "display_name": "Akusas", "link": "https://stackoverflow.com/users/10543406/akusas"}, "edited": false, "score": 2, "creation_date": 1567580873, "post_id": 57782767, "comment_id": 102000027, "body": "No problem, componentDidUpdate lifecycle method will be called every time either props or state of the particular component changes. You can read about it more here. <a href=\"https://reactjs.org/docs/react-component.html#componentdidupdate\" rel=\"nofollow noreferrer\">reactjs.org/docs/react-component.html#componentdidupdate</a>"}], "tags": [], "owner": {"reputation": 790, "user_id": 10441261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3f77668fb5c527ecd07dd2f44407c2?s=128&d=identicon&r=PG&f=1", "display_name": "Hemanath", "link": "https://stackoverflow.com/users/10441261/hemanath"}, "is_accepted": true, "score": 2, "last_activity_date": 1567580975, "last_edit_date": 1567580975, "creation_date": 1567579017, "answer_id": 57782767, "question_id": 57782680, "link": "https://stackoverflow.com/questions/57782680/how-to-dynamically-update-content-based-on-route/57782767#57782767", "title": "How to dynamically update content based on route?", "body": "<p>use componentDidUpdate lifecycle method </p>\n\n<pre><code>componentDidUpdate(prevProps, prevState) {\n    if (prevProps.location.search != this.props.location.search &amp;&amp; this.state.isLoading != true) {\n        this.setState({ isLoading: true });\n        axios.get(\n            `http://localhost/YearlyTable/${this.props.match.params.yearId}${this.props.location.search}`,\n            { withCredentials: true }\n        ).then(res =&gt; {\n            const yearlyTable = res.data;\n            this.setState({ yearlyTable, isLoading: false });\n        }).catch((error) =&gt; {\n            console.log(error);\n        });\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 10543406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R_udKVmw9XI/AAAAAAAAAAI/AAAAAAAAAQQ/4PPfPdkoZTQ/photo.jpg?sz=128", "display_name": "Akusas", "link": "https://stackoverflow.com/users/10543406/akusas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57782767, "answer_count": 1, "score": 0, "last_activity_date": 1567580975, "creation_date": 1567578680, "question_id": 57782680, "link": "https://stackoverflow.com/questions/57782680/how-to-dynamically-update-content-based-on-route", "title": "How to dynamically update content based on route?", "body": "<p>I asked a question not too long ago and got an answer that helped me greatly, but now i'm stumped again. I'm kinda new to React, so still learning a few tips and tricks. I've got a page with a table full of contents fetched from an API based on the year. In the sidebar i've got a list of the possible years. I was stuck originally based on that i only used ComponentDidMount, but got help that I needed an update function when a link was clicked. The problem i'm now having is that I need to press the link twice for the content to update. I can see in the browser that the route has changed, but not the content.</p>\n\n<p>I've tried searching Google, but couldn't find anything. Also tried to use React Router's <code>this.props.history.push()</code> since the API bases itself on the <code>this.props.match.params.yearId</code> and <code>this.props.location.search</code> which equals Year?year=2019(or the clicked year).</p>\n\n<pre><code>class YearlyTable extends React.Component {\n    state = {\n        yearlyTable: [],\n        isLoading: false,\n    }\n\n    componentDidMount() {\n        this.setState({ isLoading: true });\n        axios.get(\n            `http://localhost/YearlyTable/${this.props.match.params.yearId}${this.props.location.search}`,\n            { withCredentials: true }\n        ).then(res =&gt; {\n            const yearlyTable = res.data;\n            this.setState({ yearlyTable, isLoading: false });\n        }).catch((error) =&gt; {\n            console.log(error);\n        });\n    }\n\n    updateData(){\n        this.setState({ isLoading: true });\n        axios.get(\n           `http://localhost/YearlyTable/${this.props.match.params.yearId}${this.props.location.search}`,\n           { withCredentials: true }\n       ).then(res =&gt; {\n           const yearlyTable = res.data;\n           this.setState({ yearlyTable, isLoading: false });\n       }).catch((error) =&gt; {\n           console.log(error);\n       });\n    }\n\n    render() {\n        if (this.state.isLoading) {\n            return (\n                &lt;Box style={{textAlign: 'center'}}&gt;\n                    &lt;CircularProgress color=\"primary\" /&gt;\n                &lt;/Box&gt;\n            );\n        }\n\n        // Check what API returns\n        console.log(this.state.yearlyTable);\n\n        return (\n            // Removed for simplicity\n            {this.state.yearlyTable &amp;&amp; &lt;ListTable title={this.state.yearlyTable.Title} data={this.state.yearlyTable} /&gt;}\n\n            // Removed for simplicity (Sidebar)\n            // Example of link(MaterialUI, with RouterLink as React-Router-Dom's Link)\n            &lt;Link component={RouterLink} to={'/YearlyTable/Year?year=2018'} onClick={this.updateData.bind(this)}&gt;2018&lt;/Link&gt;\n        );\n    }\n}\nexport default withRouter(YearlyTable);\n</code></pre>\n\n<p>The desired outcome would be for the information to update dynamically without having to press the button twice, since this is a horrible user-experience.</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 2939, "user_id": 4711754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c25453f6a114ebb66aefcc27b0ab44d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Allen", "link": "https://stackoverflow.com/users/4711754/andrew-allen"}, "edited": false, "score": 0, "creation_date": 1567581314, "post_id": 57782531, "comment_id": 102000250, "body": "<code>mapTo</code> is used more when you want to emit the same value for every event"}], "answers": [{"comments": [{"owner": {"reputation": 9918, "user_id": 5695162, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZCKFs.jpg?s=128&g=1", "display_name": "Vikas", "link": "https://stackoverflow.com/users/5695162/vikas"}, "edited": false, "score": 1, "creation_date": 1567581520, "post_id": 57782713, "comment_id": 102000366, "body": "prefixing interfaces with I is discouraged <a href=\"https://v7.angular.io/guide/styleguide#interfaces\" rel=\"nofollow noreferrer\">v7.angular.io/guide/styleguide#interfaces</a>"}, {"owner": {"reputation": 65, "user_id": 9882966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John Rousseau", "link": "https://stackoverflow.com/users/9882966/john-rousseau"}, "edited": false, "score": 0, "creation_date": 1567647752, "post_id": 57782713, "comment_id": 102027696, "body": "This solution worked as well, but I would&#39;ve had to change my interfaces to classes.  Thank you!"}], "tags": [], "owner": {"reputation": 9768, "user_id": 8990367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dk1Kx.jpg?s=128&g=1", "display_name": "Fateme Fazli", "link": "https://stackoverflow.com/users/8990367/fateme-fazli"}, "is_accepted": false, "score": 3, "last_activity_date": 1567586025, "last_edit_date": 1567586025, "creation_date": 1567578800, "answer_id": 57782713, "question_id": 57782531, "link": "https://stackoverflow.com/questions/57782531/using-rxjs-to-change-member-name/57782713#57782713", "title": "Using rxjs to change member name", "body": "<p><strong>You can try:</strong></p>\n\n<pre><code>arr = [\n  {\n    \"entryDate\": \"01/01/2019\",\n    \"categoryName\": \"Meeting\"\n  },\n  {\n    \"entryDate\": \"01/02/2019\",\n    \"categoryName\": \"Meeting\"\n  }\n]\n\nngOnInit() {\n  let source2$ = Observable.from(this.arr)\n  .map(({ entryDate, categoryName }) =&gt; new ICalendarEntry(entryDate, categoryName))\n  .subscribe(\n    data =&gt; { console.log('each item:' ,data);\n  })\n}  \n\nclass ICalendarEntry {\n  \"date\": string;\n  \"title\": string;\n\n  constructor(date: string, title:string) {\n    this.date = date;\n    this.title = title;\n  }\n}\n</code></pre>\n\n<p>or if you are getting the whole array from response not item by item you should try:</p>\n\n<pre><code>let sub = new ReplaySubject(2);\nsub.next(this.arr);\nsub.pipe(map((items: any[]) =&gt; items.map((item) =&gt; new ICalendarEntry(item.entryDate, item.categoryName))))\n  .subscribe(value =&gt; {\n    console.log('whole array:' , value);\n  });\n\nclass ICalendarEntry {\n  \"date\": string;\n  \"title\": string\n\n  constructor(date: string, title: string) {\n    this.date = date;\n    this.title = title;\n  }\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/example-rxjs-observable-operator-map-an9gfg\" rel=\"nofollow noreferrer\"><strong>demo \ud83d\ude80\ud83d\ude80</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 2651, "user_id": 6324775, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/J3NiV.jpg?s=128&g=1", "display_name": "Jonathan Stellwag", "link": "https://stackoverflow.com/users/6324775/jonathan-stellwag"}, "is_accepted": true, "score": 4, "last_activity_date": 1567579913, "last_edit_date": 1567579913, "creation_date": 1567579585, "answer_id": 57782881, "question_id": 57782531, "link": "https://stackoverflow.com/questions/57782531/using-rxjs-to-change-member-name/57782881#57782881", "title": "Using rxjs to change member name", "body": "<p><strong>You can write a function that solves the converting for you:</strong></p>\n\n<pre><code>// This is a converter function for your {entryDate, categoryName} to {date, title}\nfunction converter(input) {\n  return {date: input.entryDate, title: input.categoryName}\n}\n</code></pre>\n\n<p><strong>Then use it in your pipe:</strong></p>\n\n<pre><code>// This is your converted Observable Stream with the updated Objects: {date, title}[]\nconst convertedSource$ = source$.pipe(\n  map(items =&gt; items.map(converter))\n)\n</code></pre>\n\n<p><strong>Working example:</strong></p>\n\n<p><a href=\"https://stackblitz.com/edit/rxjs-array-convert-pipe\" rel=\"nofollow noreferrer\">RxJS-array-convert-pipe</a></p>\n\n<p><em>Open the console to see the Output</em></p>\n"}], "owner": {"reputation": 65, "user_id": 9882966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John Rousseau", "link": "https://stackoverflow.com/users/9882966/john-rousseau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57782881, "answer_count": 2, "score": 1, "last_activity_date": 1567586025, "creation_date": 1567578045, "last_edit_date": 1567582294, "question_id": 57782531, "link": "https://stackoverflow.com/questions/57782531/using-rxjs-to-change-member-name", "title": "Using rxjs to change member name", "body": "<p>I'm learning rxjs.  I am getting JSON data back from an API.</p>\n\n<p><strong>The data looks like:</strong></p>\n\n<pre><code>[\n  {\n   \"entryDate\":\"01/01/2019\",\n   \"categoryName\":\"Meeting\"\n   },\n   {\n   \"entryDate\":\"01/02/2019\",\n   \"categoryName\":\"Meeting\"\n   }\n]\n</code></pre>\n\n<p><strong>I need to change the JSON in typescript to look like this:</strong></p>\n\n<pre><code>[\n   {\n    \"date\":\"01/01/2019\",\n    \"title\":\"Meeting\"\n    },\n    {\n    \"date\":\"01/02/2019\",\n    \"title\":\"Meeting\"\n   }\n]\n</code></pre>\n\n<p>I have been researching map and mapTo.  I think mapTo might be my answer, but I don't want to change the value, only the member name.</p>\n\n<p>In the end, I need to map (or something) entryDate --> date and categoryName --> title.  I think I have to chain that in the subscribe.</p>\n\n<p><strong>My typescript that gets the data from the API is:</strong></p>\n\n<pre><code>calendarEntries: ICalendarEntry[] = [];\n\nthis._dashboardService.getCalendar().subscribe(\n  calendarEntries =&gt; {\n    this.calendarEntries = calendarEntries;\n  }\n);\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "material-ui"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 9174589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e4532ecb01e50025cb82c6c15d0d13?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Page", "link": "https://stackoverflow.com/users/9174589/nathan-page"}, "is_accepted": false, "score": 0, "last_activity_date": 1567617032, "last_edit_date": 1567617032, "creation_date": 1567616074, "answer_id": 57792820, "question_id": 57782508, "link": "https://stackoverflow.com/questions/57782508/why-i-keep-on-getting-property-undefined-when-it-is-declared-already/57792820#57792820", "title": "Why I keep on getting property undefined when it is declared already?", "body": "<p>It cant recognize any string to a PaletteType:</p>\n\n<pre><code>import { PaletteType } from '@material-ui/core';\n\nconst updatedTheme = {\n  ...theme,\n  palette: {\n    ...theme.palette,\n    type: (type === \"light\" ? \"dark\" : \"light\") as PaletteType\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 9822118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447d18c44c9266404761702ad6a327a1?s=128&d=identicon&r=PG&f=1", "display_name": "isemaj", "link": "https://stackoverflow.com/users/9822118/isemaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 649, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567617032, "creation_date": 1567577935, "last_edit_date": 1567579082, "question_id": 57782508, "link": "https://stackoverflow.com/questions/57782508/why-i-keep-on-getting-property-undefined-when-it-is-declared-already", "title": "Why I keep on getting property undefined when it is declared already?", "body": "<p>My problem is about the theme where I need to toggle it but I'm getting trouble with the types. I'm not sure if it something with my typescript configuration or with my code. </p>\n\n<p>I tried to reproduce the problem <a href=\"https://codesandbox.io/s/wonderful-river-7qyk8\" rel=\"nofollow noreferrer\">in codesandbox</a> but there's no error showing up. But I will explain how it appears on my local machine. </p>\n\n<p>In my <code>hooks.ts</code> file <code>line 12</code> I'm getting an error saying <code>type</code> does not exist even though there is.</p>\n\n<pre><code> TS2339: Property 'type' does not exist on type 'PaletteOptions | undefined'.\n</code></pre>\n\n<p>And on <code>line 24</code> I'm getting error saying </p>\n\n<pre><code>[0]       TS2345: Argument of type '{ palette: { type: string; } | { type: string; primary?: SimplePaletteColorOptions | Partial&lt;Color&gt; | undefined; secondary?: SimplePaletteColorOptions | Partial&lt;Color&gt; | undefined; ... 9 more ...; getContrastText?: ((background: string) =&gt; string) | undefined; }; ... 10 more ...; zIndex?: Partial&lt;...&gt; | undefined; }' is not assignable to parameter of type 'SetStateAction&lt;ThemeOptions&gt;'.\n[0]   Type '{ palette: { type: string; } | { type: string; primary?: SimplePaletteColorOptions | Partial&lt;Color&gt; | undefined; secondary?: SimplePaletteColorOptions | Partial&lt;Color&gt; | undefined; ... 9 more ...; getContrastText?: ((background: string) =&gt; string) | undefined; }; ... 10 more ...; zIndex?: Partial&lt;...&gt; | undefined; }' is not assignable to type 'ThemeOptions'.\n[0]     Types of property 'palette' are incompatible.\n[0]       Type '{ type: string; } | { type: string; primary?: SimplePaletteColorOptions | Partial&lt;Color&gt; | undefined; secondary?: SimplePaletteColorOptions | Partial&lt;Color&gt; | undefined; error?: SimplePaletteColorOptions | ... 1 more ... | undefined; ... 8 more ...; getContrastText?: ((background: string) =&gt; string) | undefined; }' is not assignable to type 'PaletteOptions | undefined'.\n[0]         Type '{ type: string; }' is not assignable to type 'PaletteOptions'.\n[0]           Types of property 'type' are incompatible.\n[0]             Type 'string' is not assignable to type '\"light\" | \"dark\" | undefined'.\n</code></pre>\n\n<p>I'm not sure if it is because I use <code>ThemeOptions</code> as the type of my custom type in <code>theme.ts</code> though I'm not getting error on that file. But setting it to <code>Theme</code> type doesn't remove the error. </p>\n"}, {"tags": ["typescript", "enums", "iterator"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1567577465, "post_id": 57782389, "comment_id": 101998676, "body": "As with every other object - <code>Values[item]</code> ?"}, {"owner": {"reputation": 2133, "user_id": 920504, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a943236432e5080a1167ac6f12c0cc39?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/920504/jay"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1567577820, "post_id": 57782389, "comment_id": 101998829, "body": "when I console.log(item) I am getting &#39;name&#39; as a string so not sure how to refer its value"}], "answers": [{"tags": [], "owner": {"reputation": 18501, "user_id": 186822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/EZ6R7.jpg?s=128&g=1", "display_name": "Nenad", "link": "https://stackoverflow.com/users/186822/nenad"}, "is_accepted": true, "score": 0, "last_activity_date": 1567578081, "creation_date": 1567578081, "answer_id": 57782543, "question_id": 57782389, "link": "https://stackoverflow.com/questions/57782389/typescript-enum-iterator/57782543#57782543", "title": "Typescript Enum Iterator", "body": "<p>You have to do this:</p>\n\n<pre><code>enum Values {\n     name = 'true',\n     fullName = 'true',\n     lastName = 'true',\n}\n\nfor (let item in Values) {\n  console.log(Values[item]);\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>true\ntrue\ntrue\n</code></pre>\n"}], "owner": {"reputation": 2133, "user_id": 920504, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a943236432e5080a1167ac6f12c0cc39?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/920504/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57782543, "answer_count": 1, "score": 1, "last_activity_date": 1567602483, "creation_date": 1567577261, "last_edit_date": 1567602483, "question_id": 57782389, "link": "https://stackoverflow.com/questions/57782389/typescript-enum-iterator", "title": "Typescript Enum Iterator", "body": "<p>I have the following enum and try to iterate over it:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export enum Values {\n    name = 'true',\n    fullName = 'true',\n    lastName = true,\n}\n\n// This is how I am trying to iterate over it \nfor (let item in Values) {\n    // Here, if I use console.log(item), I get name as string,\n    // so how should I access its value in enum?\n}\n</code></pre>\n"}, {"tags": ["html", "css", "angular", "typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 6270427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ba07f7651601212930d9d17bd9b15680?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/6270427/learner"}, "edited": false, "score": 0, "creation_date": 1567577902, "post_id": 57782430, "comment_id": 101998853, "body": "I&#39;m using only for the button and the main thing I want to do is the size."}, {"owner": {"reputation": 120, "user_id": 3719277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c222edde72ee95836272455f4c59107?s=128&d=identicon&r=PG&f=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/3719277/chimera"}, "reply_to_user": {"reputation": 340, "user_id": 6270427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ba07f7651601212930d9d17bd9b15680?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/6270427/learner"}, "edited": false, "score": 0, "creation_date": 1567596733, "post_id": 57782430, "comment_id": 102008254, "body": "If you have Bootstrap, there is still a print breakpoint, that does this. I will update my original answer."}], "tags": [], "owner": {"reputation": 120, "user_id": 3719277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c222edde72ee95836272455f4c59107?s=128&d=identicon&r=PG&f=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/3719277/chimera"}, "is_accepted": false, "score": 1, "last_activity_date": 1567597084, "last_edit_date": 1567597084, "creation_date": 1567577506, "answer_id": 57782430, "question_id": 57782346, "link": "https://stackoverflow.com/questions/57782346/unable-to-render-data-with-css-on-print-preview-page-using-angular-6-type-script/57782430#57782430", "title": "Unable to render data with CSS on print preview page using Angular 6 Type script", "body": "<p>If you are using Bootstrap, that will remove any background color from print. If you are using another framework, that might do the same.</p>\n\n<p>In bootstrap.css this is what you will be looking for:</p>\n\n<pre><code>@media print {\n    * {\n        color: #000 !important;\n        text-shadow: none !important;\n        background: transparent !important;\n        box-shadow: none !important;\n    }\n}\n</code></pre>\n\n<p>You could just delete the background property</p>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "is_accepted": true, "score": 1, "last_activity_date": 1567584104, "creation_date": 1567584104, "answer_id": 57783974, "question_id": 57782346, "link": "https://stackoverflow.com/questions/57782346/unable-to-render-data-with-css-on-print-preview-page-using-angular-6-type-script/57783974#57783974", "title": "Unable to render data with CSS on print preview page using Angular 6 Type script", "body": "<p>You have to write css on ts file .</p>\n\n<pre><code>printTicket(print_template) {\n\n    let innerContents = document.getElementById(print_template).innerHTML;\n\n    const popupWinindow = window.open();\n    popupWinindow.document.open();\n    popupWinindow.document.write('&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body onload=\"window.print()\"&gt;' + innerContents + '&lt;/html&gt;');\n    popupWinindow.document.write(`&lt;style&gt;\n    .div{\n        margin: 0 auto;\n        margin-top: 20px;\n        background-color: rgb(243, 245, 245);\n        margin-left: 10px;\n        text-align: center;\n    }\n\n    .divBox{\n        margin: 0 auto;\n        margin-top: 20px;\n        background-color: rgb(243, 245, 245);\n    }\n\n    .divBoxin{\n        background-color: rgb(203, 230, 227) !important;\n        border:5px solid black; \n        height: 100px;\n        width: 400px;\n    }\n\n    .h2{\n        margin:\"center\";\n        margin-top: 25px;\n    }\n    &lt;/style&gt;\n  `);\n    popupWinindow.document.close();\n\n }\n}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 6270427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ba07f7651601212930d9d17bd9b15680?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/6270427/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 57783974, "answer_count": 2, "score": 0, "last_activity_date": 1567597084, "creation_date": 1567577045, "question_id": 57782346, "link": "https://stackoverflow.com/questions/57782346/unable-to-render-data-with-css-on-print-preview-page-using-angular-6-type-script", "title": "Unable to render data with CSS on print preview page using Angular 6 Type script", "body": "<p>I want to print user tickets.\nfor this, my print ticket size will be width: 2.1 and Length: 3.9.\nI'm able to render the data on print preview page but I have an issue to apply CSS to the print preview page.\nCode :</p>\n\n<p><strong>Input :</strong></p>\n\n<pre><code>\u2022   0: Array(2)\n\u2022     0: {First_name: \"Amy\", Last_name: \"Jenkins\"}\n\u2022     1: {First_name: \"asd\", Last_name: \"Jenkins\"}\n</code></pre>\n\n<p><strong>HTML :</strong></p>\n\n<pre><code>&lt;form&gt;\n&lt;div class=\"container\"&gt;\n    &lt;div class=\"divBox page\" id=\"print_box\"&gt;\n        &lt;tr *ngFor=\"let user of printDataArray\"&gt;\n            &lt;div class=\"divBoxin\" &gt;\n                &lt;p align=center&gt;&lt;b&gt;{{ user.First_name}} {{user.Last_name}}&lt;/b&gt;&lt;/p&gt;  \n                &lt;br&gt;\n            &lt;/div&gt;\n            &lt;br&gt;\n            &lt;br&gt;\n        &lt;/tr&gt;\n    &lt;/div&gt;\n    &lt;div class=\"buttonHolder\"&gt;\n        &lt;button class=\"btn btn-primary button\" type=\"Submit\" (click)=\"printTicket('print_template_box')\"&gt;&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>CSS :</p>\n\n<pre><code>.button{\n    background: url(\"../../../assets/print.PNG\") top right no-repeat;\n    height:80px;\n    width: 80px;\n    //margin-top: 0px;\n    margin-right: 150px;\n\n    background-color: #F4F6F6;\n    }\n\n\n\n.buttonHolder{\n    text-align: center;\n    padding-left: -100px;\n}\n\n.div{\n    margin: 0 auto;\n    margin-top: 20px;\n    background-color: rgb(243, 245, 245);\n    margin-left: 10px;\n    text-align: center;\n}\n\n.divBox{\n    margin: 0 auto;\n    margin-top: 20px;\n    background-color: rgb(243, 245, 245);[![expected output][1]][1]\n}\n\n.divBoxin{\n    background-color: rgb(203, 230, 227) !important;\n    border:5px solid black; \n    height: 100px;\n    width: 400px;\n    //size: 2.1in 5.9in;\n}\n\n.h2{\n    margin:\"center\";\n    margin-top: 25px;\n}\n\n.page {\n    size: 2.1in200 3.9in;\n    background-color: rgb(129, 36, 36) !important;\n    -webkit-print-color-adjust: exact !important; \n}\n</code></pre>\n\n<p>print function :</p>\n\n<pre><code>    printTicket(print_template) {\n\n\n      let innerContents = document.getElementById(print_template).innerHTML;\n      //'', '_blank', 'width=600,height=700,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no'\n      popupWinindow = window.open();\n      popupWinindow.document.open();\n      popupWinindow.document.write('&lt;html&gt;&lt;head&gt;&lt;link rel=\"stylesheet\" href=\"./print-ticket.component.scss\" type=\"text/css\" media=\"print\" &gt;&lt;/head&gt;&lt;body onload=\"window.print()\"&gt;' + innerContents + '&lt;/html&gt;');\n      //popupWinindow.document.write(innerContents);\n      popupWinindow.document.close();\n\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iA8Ng.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iA8Ng.png\" alt=\"current output\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/HYGOY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HYGOY.png\" alt=\"Expected\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/W7t43.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W7t43.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li><p>The first Image is current output, I'm expecting output like 2nd and 3rd image.</p></li>\n<li><p>when I call the print function I want to show ticket preview and print with 2.1 in, 3.9 in size.</p></li>\n<li>if have more than one ticket add the print page in the queue(here we have two ticket want to print one after one).</li>\n</ul>\n\n<p>Printer Name: Brother Label Printer QL-810w (use for sticker printing)</p>\n"}, {"tags": ["angular", "typescript", "angular-services", "angular4-forms"], "comments": [{"owner": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "edited": false, "score": 0, "creation_date": 1567577181, "post_id": 57782284, "comment_id": 101998566, "body": "What is the error your are getting?"}, {"owner": {"reputation": 196, "user_id": 10131261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq3Cq.jpg?s=128&g=1", "display_name": "Brock James", "link": "https://stackoverflow.com/users/10131261/brock-james"}, "reply_to_user": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "edited": false, "score": 0, "creation_date": 1567577307, "post_id": 57782284, "comment_id": 101998610, "body": "@Sudhakar errors.ts:42 ERROR TypeError: value.forEach is not a function"}, {"owner": {"reputation": 196, "user_id": 10131261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq3Cq.jpg?s=128&g=1", "display_name": "Brock James", "link": "https://stackoverflow.com/users/10131261/brock-james"}, "reply_to_user": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "edited": false, "score": 0, "creation_date": 1567577344, "post_id": 57782284, "comment_id": 101998622, "body": "@Sudhakar when i checking API with postman i got the value."}, {"owner": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "edited": false, "score": 0, "creation_date": 1567577509, "post_id": 57782284, "comment_id": 101998693, "body": "Can you show the sample response?"}, {"owner": {"reputation": 196, "user_id": 10131261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq3Cq.jpg?s=128&g=1", "display_name": "Brock James", "link": "https://stackoverflow.com/users/10131261/brock-james"}, "reply_to_user": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "edited": false, "score": 0, "creation_date": 1567577561, "post_id": 57782284, "comment_id": 101998713, "body": "@Sudhakar {  &quot;data&quot;: 123 }"}, {"owner": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "edited": false, "score": 0, "creation_date": 1567577849, "post_id": 57782284, "comment_id": 101998839, "body": "Change the code as below \treturn this._http.post(&#39;<a href=\"http://localhost:3041/api/Stockcountheader/\" rel=\"nofollow noreferrer\">localhost:3041/api/Stockcountheader</a>&#39; + &#39;Stock&#39;, stockheaderdetail, options) \t\t.map((response: Response) =&gt; { \t\treturn response.data; \t\t}) \t\t.catch(this.handleError);    this._enqService.CatchHeaderDetail(this.headeritems)         .subscribe(value =&gt; {             if (value) {                 //use the value  for further process. Here value is integer value not an array.             }         }, \t\terror =&gt; { \t\t\tconsole.error(error); \t\t\tthis.statusMessage = &quot;Problem with the service.Please try again after sometime&quot;; \t\t});"}, {"owner": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "reply_to_user": {"reputation": 196, "user_id": 10131261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq3Cq.jpg?s=128&g=1", "display_name": "Brock James", "link": "https://stackoverflow.com/users/10131261/brock-james"}, "edited": false, "score": 0, "creation_date": 1567578305, "post_id": 57782284, "comment_id": 101998989, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198915/discussion-between-sudhakar-and-brock-james\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 10131261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq3Cq.jpg?s=128&g=1", "display_name": "Brock James", "link": "https://stackoverflow.com/users/10131261/brock-james"}, "edited": false, "score": 0, "creation_date": 1567578279, "post_id": 57782555, "comment_id": 101998977, "body": "what is the meaning of .....if (value) { //use the value for further process. Here value is integer value not an array. } }, ???"}], "tags": [], "owner": {"reputation": 2698, "user_id": 2935802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxOY9.jpg?s=128&g=1", "display_name": "Sudhakar", "link": "https://stackoverflow.com/users/2935802/sudhakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567578452, "last_edit_date": 1567578452, "creation_date": 1567578146, "answer_id": 57782555, "question_id": 57782284, "link": "https://stackoverflow.com/questions/57782284/get-return-values-from-http-post-method-in-angular4-is-not-working-fine/57782555#57782555", "title": "Get return values from http post method in Angular4 is not working Fine", "body": "<p>Change the code as shown below: map operator should map the data. Actual data is not a array. It is just value.</p>\n\n<pre><code>CatchHeaderDetail(stock: any): Observable&lt;any&gt; {\n        let stockheaderdetail = stock;\n        console.log(stockheaderdetail)\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers });\n        return this._http.post('http://localhost:3041/api/Stockcountheader/' + 'Stock', stockheaderdetail, options)\n            .map((response: Response) =&gt; {\n            return response.data;\n            })\n            .catch(this.handleError);\n\n    }\n\n\nOnclick(){\n        this.header = new IHeaderstock(this.userid, this.created, this.CompanyID, this.modified, this.modifieduserid, this.confirm, this.shopid);\n    this.headeritems.push(this.header);\n\n\n    this._enqService.CatchHeaderDetail(this.headeritems)\n        .subscribe(value =&gt; {\n        if (value) {\n            //use the value  for further process. Here value is integer value not an array.\n        }\n    },error =&gt; {\n                console.error(error);\n                this.statusMessage = \"Problem with the service.Please try again after sometime\";\n            });\n\n}\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 10131261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq3Cq.jpg?s=128&g=1", "display_name": "Brock James", "link": "https://stackoverflow.com/users/10131261/brock-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567578452, "creation_date": 1567576683, "question_id": 57782284, "link": "https://stackoverflow.com/questions/57782284/get-return-values-from-http-post-method-in-angular4-is-not-working-fine", "title": "Get return values from http post method in Angular4 is not working Fine", "body": "<p>I have a requirement where I need to make a http post method request to a Web API that is save some data entered by the user. The Web API would return some values (TransationId) as a result and this result would be used for some other logic (For other function parameter etc...) Actually i saw several questions like this but they are not helping me.Because i am new in angular.\nplease help me for resolving this its a big task for me</p>\n\n<p>Http post method call is as follows:-</p>\n\n<pre><code>    CatchHeaderDetail(stock: any)\n    : Observable&lt;IHeaderstock[]&gt; {\n    let stockheaderdetail = stock;\n    console.log(stockheaderdetail)\n    let headers = new Headers({ 'Content-Type': 'application/json' });\n    let options = new RequestOptions({ headers: headers });\n    return this._http.post('http://localhost:3041/api/Stockcountheader/' + 'Stock', stockheaderdetail, options)\n        .map((response: Response) =&gt; &lt;IHeaderstock[]&gt;response.json())\n        .catch(this.handleError);\n\n}\n</code></pre>\n\n<p>Angular4 component calls this service to save the data:</p>\n\n<pre><code>Onclick(){\n\n        this.header = new IHeaderstock(this.userid, this.created, this.CompanyID, this.modified, this.modifieduserid, this.confirm, this.shopid);\n    this.headeritems.push(this.header);\n\n\n    this._enqService.CatchHeaderDetail(this.headeritems)\n        .subscribe(value =&gt; {\n            if (typeof value !== 'undefined' &amp;&amp; value != null) {\n                value.forEach(header =&gt; {\n                    this.headeritems.push(this.header)\n                });\n\n            }\n        },\n\n            error =&gt; {\n                console.error(error);\n                this.statusMessage = \"Problem with the service.Please try again after sometime\";\n            });\n</code></pre>\n\n<p>And MY API is</p>\n\n<pre><code>        [HttpPost]\n    public IHttpActionResult Stock([FromBody] List&lt;spGetNewStockCountHeader_Result&gt; jsonvalues)\n    {\n\n        ObjectParameter TransactionId = new ObjectParameter(\"TransactionId\", typeof(Int32));\n        foreach (spGetNewStockCountHeader_Result Datastock in jsonvalues)\n        {\n\n            spGetNewStockCountHeader_Result Stockobject = new\n            spGetNewStockCountHeader_Result();\n            Stockobject.UserID = Datastock.UserID;\n            Stockobject.created = Datastock.created;\n            Stockobject.CompanyID = Datastock.CompanyID;\n            Stockobject.modified = Datastock.modified;\n            Stockobject.modifieduserid = Datastock.modifieduserid;\n            Stockobject.confirm = Datastock.confirm;\n            Stockobject.ShopId = Datastock.ShopId;\n\n            enqentities.spGetNewStockCountHeader(Datastock.UserID,  Datastock.created, Datastock.CompanyID, Datastock.modified,\n                Datastock.modifieduserid, Datastock.confirm,\n            Datastock.ShopId, TransactionId).First();\n\n        }\n\n        return Ok(new { data = TransactionId.Value }); // i want this value to get in the angular4\n    }\n</code></pre>\n"}, {"tags": ["html", "angular", "typescript"], "comments": [{"owner": {"reputation": 5958, "user_id": 6022243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YUkDj.jpg?s=128&g=1", "display_name": "Roy", "link": "https://stackoverflow.com/users/6022243/roy"}, "edited": false, "score": 0, "creation_date": 1567576701, "post_id": 57782243, "comment_id": 101998392, "body": "Hi and welcome to SO. You need to <code>return</code> a value to get the pipe working. See <a href=\"https://angular.io/guide/pipes#custom-pipes\" rel=\"nofollow noreferrer\">angular.io/guide/pipes#custom-pipes</a> for more information."}, {"owner": {"reputation": 31, "user_id": 9718318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tpcpRtQbS_Q/AAAAAAAAAAI/AAAAAAAAAIo/sZSZAoRvEUc/photo.jpg?sz=128", "display_name": "Ashad peal", "link": "https://stackoverflow.com/users/9718318/ashad-peal"}, "reply_to_user": {"reputation": 5958, "user_id": 6022243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YUkDj.jpg?s=128&g=1", "display_name": "Roy", "link": "https://stackoverflow.com/users/6022243/roy"}, "edited": false, "score": 0, "creation_date": 1567577365, "post_id": 57782243, "comment_id": 101998633, "body": "thnx,how can I return years,months and days after calculation? @Roy"}], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 5516547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a00aa6c069098017560a442ef44848?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavin Hirpara", "link": "https://stackoverflow.com/users/5516547/bhavin-hirpara"}, "is_accepted": false, "score": 5, "last_activity_date": 1567582787, "creation_date": 1567582787, "answer_id": 57783630, "question_id": 57782243, "link": "https://stackoverflow.com/questions/57782243/how-to-convert-and-show-seconds-into-years-months-days-using-custom-pipe-in-angu/57783630#57783630", "title": "How to convert and show Seconds into Years,Months,Days using custom pipe in Angular?", "body": "<p>You can use moment and moment-duration-format library.\ninstall both library by following command</p>\n\n<pre><code>npm install moment --save\nnpm install moment-duration-format --save\n</code></pre>\n\n<p>also add types to use it in angular</p>\n\n<pre><code>npm i @types/moment-duration-format --save\n</code></pre>\n\n<p>After installation, create pipe like below,</p>\n\n<pre><code>import { Pipe, PipeTransform } from '@angular/core';\nimport * as moment from 'moment';\nimport 'moment-duration-format';\n\n@Pipe({\n  name: 'secondToYearMonthDays'\n})\nexport class SecondToYearMonthDaysPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    return moment.duration(value, 'seconds').format('Y [years]: M [months]: D [days]');\n  }\n\n}\n</code></pre>\n\n<p>and use this pipe in html</p>\n\n<pre><code>&lt;label&gt;{{72650000| secondToYearMonthDays}}&lt;/label&gt;\n Output : 2 years: 3 months: 19 days\n</code></pre>\n\n<p>You can also make this pipe more generic for different time units and display format by passing arguments with pipe name.</p>\n\n<p>You can checkout supported format here : <a href=\"https://github.com/jsmreese/moment-duration-format\" rel=\"noreferrer\">https://github.com/jsmreese/moment-duration-format</a></p>\n"}], "owner": {"reputation": 31, "user_id": 9718318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tpcpRtQbS_Q/AAAAAAAAAAI/AAAAAAAAAIo/sZSZAoRvEUc/photo.jpg?sz=128", "display_name": "Ashad peal", "link": "https://stackoverflow.com/users/9718318/ashad-peal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1568709686, "creation_date": 1567576402, "last_edit_date": 1568709686, "question_id": 57782243, "link": "https://stackoverflow.com/questions/57782243/how-to-convert-and-show-seconds-into-years-months-days-using-custom-pipe-in-angu", "title": "How to convert and show Seconds into Years,Months,Days using custom pipe in Angular?", "body": "<p>I am getting seconds (validity) by API calling and I need to show it in terms of Years,Months,Days in frontEnd...\nHow can I show it using custom Pipe or other way?</p>\n\n<p>I have created a custom pipe, but how can I return the values?</p>\n\n<pre><code> export class SecondsToDaysPipe implements PipeTransform {\n    transform(val: number): number {\n       let totalSeconds = val;\n      }\n  }\n</code></pre>\n\n<p>Expected: Validity: 01 year 03 months 03 days</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 18501, "user_id": 186822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/EZ6R7.jpg?s=128&g=1", "display_name": "Nenad", "link": "https://stackoverflow.com/users/186822/nenad"}, "is_accepted": false, "score": 1, "last_activity_date": 1567582959, "creation_date": 1567582959, "answer_id": 57783665, "question_id": 57781871, "link": "https://stackoverflow.com/questions/57781871/distinguish-if-function-argument-optional/57783665#57783665", "title": "distinguish if function argument optional", "body": "<p>You can make distinction by checking against <code>() =&gt; object</code> when parameter is not present.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type A1 = {\n  (p?: string): object; // optional input parameter\n}\ntype A2 = {\n  (p: string): object; // required input parameter\n}\ntype B&lt;T extends (p: string) =&gt; object&gt; =\n  T extends () =&gt; object ?\n    number\n    : T extends (p: string) =&gt; object\n    ? string\n    : never;\n\ntype C1 = B&lt;A1&gt;; // number\ntype C2 = B&lt;A2&gt;; // string\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 158, "user_id": 10694819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3bB3vwQP7Zg/AAAAAAAAAAI/AAAAAAAAAAc/XUOgenSh31U/photo.jpg?sz=128", "display_name": "Ma Tianqi", "link": "https://stackoverflow.com/users/10694819/ma-tianqi"}, "edited": false, "score": 0, "creation_date": 1568615268, "post_id": 57783698, "comment_id": 102315052, "body": "It&#39;s a great way to solve this problem. But when I do some thing like this with VS Code. Both value will be the <code>true</code>. The version I used is 3.6.2."}, {"owner": {"reputation": 22049, "user_id": 6293409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f518a7b20445607bcf0b09f4c26ce1?s=128&d=identicon&r=PG&f=1", "display_name": "CRice", "link": "https://stackoverflow.com/users/6293409/crice"}, "reply_to_user": {"reputation": 158, "user_id": 10694819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3bB3vwQP7Zg/AAAAAAAAAAI/AAAAAAAAAAc/XUOgenSh31U/photo.jpg?sz=128", "display_name": "Ma Tianqi", "link": "https://stackoverflow.com/users/10694819/ma-tianqi"}, "edited": false, "score": 1, "creation_date": 1568676423, "post_id": 57783698, "comment_id": 102341836, "body": "@MaTianqi This approach requires the <code>strictNullChecks</code> compiler option to be on."}], "tags": [], "owner": {"reputation": 22049, "user_id": 6293409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f518a7b20445607bcf0b09f4c26ce1?s=128&d=identicon&r=PG&f=1", "display_name": "CRice", "link": "https://stackoverflow.com/users/6293409/crice"}, "is_accepted": true, "score": 2, "last_activity_date": 1567583113, "creation_date": 1567583113, "answer_id": 57783698, "question_id": 57781871, "link": "https://stackoverflow.com/questions/57781871/distinguish-if-function-argument-optional/57783698#57783698", "title": "distinguish if function argument optional", "body": "<p>You can do this by using a conditional type to test if your function is assignable to another that has an optional first argument. So something like:</p>\n\n<pre><code>type A = {\n  (p?: string): object\n}\n\ntype B = {\n    (p: string): object\n}\n\ntype OptionalFirstArg = (a?: never) =&gt; unknown;\n\ntype IsOpt&lt;F&gt; = F extends OptionalFirstArg ? true : false;\n\ntype testA = IsOpt&lt;A&gt;; // testA is true\ntype testB = IsOpt&lt;B&gt;; // testB is false\n</code></pre>\n\n<p>Here's a <a href=\"http://www.typescriptlang.org/play/?target=6#code/C4TwDgpgBAglC8UDeAoK6oAowH4BcUAzsAE4CWAdgOYCUBA9gEYBWEAxsCgL4oqiRQAQgmRoM2AsXLU6UJqw7de-aAHkwwMvQoBDADYAxMiWIwSVEZh34oFCADcIJGggB8UAK4UA1hXoB3CgBuZXBoAElCdWAAHgN3RAMoCAAPYAgKABNCKGitXUNjU3MoHChSD2gCADN9QggQvjDyiFMRSOiYmFcgqAB6Ppa2shyKiCaBdOJhRA6NGMEe-sGp4GERqFq9eqA\" rel=\"nofollow noreferrer\">playground link</a> for the above code.</p>\n"}], "owner": {"reputation": 158, "user_id": 10694819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3bB3vwQP7Zg/AAAAAAAAAAI/AAAAAAAAAAc/XUOgenSh31U/photo.jpg?sz=128", "display_name": "Ma Tianqi", "link": "https://stackoverflow.com/users/10694819/ma-tianqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57783698, "answer_count": 2, "score": 1, "last_activity_date": 1567583113, "creation_date": 1567574076, "question_id": 57781871, "link": "https://stackoverflow.com/questions/57781871/distinguish-if-function-argument-optional", "title": "distinguish if function argument optional", "body": "<p>How to distinguish if function argument optional?</p>\n\n<p>How to distinguish</p>\n\n<pre><code>(p?: string): object\n</code></pre>\n\n<p>and</p>\n\n<pre><code>(p: string): object\n</code></pre>\n\n<p>I tried this</p>\n\n<pre><code>type A = {\n  (p?: string): object\n}\ntype B&lt;A&gt; = A extends (p: string | undefined) =&gt; object ? string : number\ntype C = B&lt;A&gt;\n</code></pre>\n\n<p>but it doesn't work</p>\n\n<p>Is there some way to  distinguish them?\nThanks.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "tensorflow.js"], "answers": [{"tags": [], "owner": {"reputation": 14633, "user_id": 5069957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/597577c2765adaa190e4524d3a3860fe?s=128&d=identicon&r=PG&f=1", "display_name": "edkeveked", "link": "https://stackoverflow.com/users/5069957/edkeveked"}, "is_accepted": true, "score": 0, "last_activity_date": 1567680736, "last_edit_date": 1567680736, "creation_date": 1567590114, "answer_id": 57785682, "question_id": 57781769, "link": "https://stackoverflow.com/questions/57781769/problem-error-property-xs-does-not-exist-on-type-tensorcontainer-in-angula/57785682#57785682", "title": "Problem/error &#39;Property &#39;&#39;xs&#39; does not exist on type &#39;TensorContainer&#39; in angular project with tensorflow.js", "body": "<p>The typings error can be avoided by settings the map argument to <code>any</code> </p>\n\n<p>Then you would need to cast <code>xs</code> and <code>ys</code> to allow type completion. Here <code>xs</code> and <code>ys</code> are simply object of key value elements.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>.map((val: any) =&gt; {\n    const {xs, ys} = val // can cast xs and ys to appropriate type\n    // for instance it can be const {xs, ys} = val as {xs: Object, ys: Object}\n     return {xs:Object.keys(xs), ys:Object.keys(ys)};\n})\n</code></pre>\n\n<p>Or it can also be avoided by casting the type - parameter of <code>map</code></p>\n\n<pre><code>.map((val: {xs: Object, ys: Object}) =&gt; {\n     return {xs:Object.keys(xs), ys:Object.keys(ys)};\n})\n</code></pre>\n\n<p>To be thorough <code>xs</code> and <code>ys</code> should respectively have the type of the feature and label of the dataset.</p>\n\n<p>Given the data of boston-housing.csv, the type Features can be as follow</p>\n\n<pre><code>interface Features {\n  crim: number;\n  zn: number;\n  inus: number\n  ...\n}\n</code></pre>\n\n<p>And the type Labels</p>\n\n<pre><code>interface Features {\n  medv: number\n}\n</code></pre>\n\n<p>Casting With these types, the previous code will have auto-completion for the property on xs and ys if necessary</p>\n\n<pre><code>.map((val: any) =&gt; {\n        const {xs, ys} = val as {xs: Features, ys: Labels}\n         return {xs:Object.keys(xs), ys:Object.keys(ys)};\n })\n // or \n.map(((val: {xs: Features, ys: Labels }) =&gt; {\n        const {xs, ys} = val as {xs: Features, ys: Labels}\n         return {xs:Object.keys(xs), ys:Object.keys(ys)};\n })\n</code></pre>\n\n<p>Granted, it is not really useful in these scenario to type exactly the Features or labels, since one is only interested in returning the values of the dataset. If this method is to be used as a generic way of converting csv dataset to tensor batches, leaving <code>xs</code> and <code>ys</code> with type <code>Object</code> should rather be the way to go.</p>\n\n<p>To go a step further, if the dataset created is to have a type that matches exactly the field of the csv, one might create a <code>dataType</code> for the dataset</p>\n\n<pre><code>interface DataType {\n    xs: Features;\n    ys: Labels;\n}    \n\nconst csvDataset = tf.data.csv(/* ... */) as unknown as Dataset&lt;DataType&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15319, "user_id": 5627599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/27jw3.jpg?s=128&g=1", "display_name": "Thomas Dondorf", "link": "https://stackoverflow.com/users/5627599/thomas-dondorf"}, "is_accepted": false, "score": 0, "last_activity_date": 1567620148, "creation_date": 1567620148, "answer_id": 57793680, "question_id": 57781769, "link": "https://stackoverflow.com/questions/57781769/problem-error-property-xs-does-not-exist-on-type-tensorcontainer-in-angula/57793680#57793680", "title": "Problem/error &#39;Property &#39;&#39;xs&#39; does not exist on type &#39;TensorContainer&#39; in angular project with tensorflow.js", "body": "<h2>Problem</h2>\n\n<p>The problem is that the <a href=\"https://js.tensorflow.org/api/latest/#class:data.Dataset\" rel=\"nofollow noreferrer\">Datasets</a> in Tensorflow.js are by default of type <code>tf.data.Dataset&lt;TensorContainer&gt;</code>, which means that TypeScript assumes an object of <a href=\"https://github.com/tensorflow/tfjs/blob/81225adc2fcf6fcf633b4119e4b89a3bf55be824/tfjs-core/src/tensor_types.ts#L41\" rel=\"nofollow noreferrer\"><code>TensorContainer</code></a> for your DataSet.</p>\n\n<h2>Solution</h2>\n\n<p>To help TypeScript, you can give your DataSet a specific type when creating it. As you are reading an object with multiple attributes inside, you can extend the interface <a href=\"https://github.com/tensorflow/tfjs/blob/81225adc2fcf6fcf633b4119e4b89a3bf55be824/tfjs-core/src/tensor_types.ts#L44\" rel=\"nofollow noreferrer\"><code>TensorContainerObject</code></a>.</p>\n\n<p><strong>Code Sample</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { TensorContainerObject } from '@tensorflow/tfjs';\nimport { Dataset } from '@tensorflow/tfjs-data';\n\ninterface DataType extends TensorContainerObject {\n    xs: tf.Tensor;\n    ys: tf.Tensor;\n}\n\nconst csvDataset = tf.data.csv(/* ... */) as any as Dataset&lt;DataType&gt;;\ncsvDataset.map(({xs, ys}) =&gt; {\n    // ...\n});\n</code></pre>\n\n<p>Unfortunately, as Tensorflow.js is very opinionated about its Dataset types (because an union is used for the default <a href=\"https://github.com/tensorflow/tfjs/blob/81225adc2fcf6fcf633b4119e4b89a3bf55be824/tfjs-core/src/tensor_types.ts#L41\" rel=\"nofollow noreferrer\"><code>TensorContainer</code></a>), you have to use an <code>any</code> cast before you can cast it to the actual <code>Dataset&lt;DataType&gt;</code> interface.</p>\n\n<p>But after that cast, all functions working on the <code>DataSet</code> like <code>map</code> automatically know the correct type. Instead of using <code>tf.Tensor</code> above, you could even use a type like <code>tf.Tensor1D</code> to be even more specific.</p>\n\n<h2>Alternative solution: <em>Just make the error go away</em></h2>\n\n<p>As already addressed in the other answer: If you do not care about types and TypeScript and you just want to make the error disappear, you can cast any problematic variables into <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#any\" rel=\"nofollow noreferrer\"><code>any</code></a>.</p>\n\n<p><strong>Code Sample</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>csvDataset.map(({xs, ys}: any) =&gt; {\n    // ...\n});\n</code></pre>\n\n<p>Keep in mind, that this disables any type checking for the variable.</p>\n"}], "owner": {"reputation": 95, "user_id": 11377766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730cd9884a328f10ad707c99cd055f4b?s=128&d=identicon&r=PG&f=1", "display_name": "DarkIudeX", "link": "https://stackoverflow.com/users/11377766/darkiudex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 57785682, "answer_count": 2, "score": 2, "last_activity_date": 1567680736, "creation_date": 1567573314, "last_edit_date": 1567620240, "question_id": 57781769, "link": "https://stackoverflow.com/questions/57781769/problem-error-property-xs-does-not-exist-on-type-tensorcontainer-in-angula", "title": "Problem/error &#39;Property &#39;&#39;xs&#39; does not exist on type &#39;TensorContainer&#39; in angular project with tensorflow.js", "body": "<p>I'm trying to get the tensorflow.js example from the tensorflow.js-website running within my existing angular project. I basically copied the code from the website and integrated it into my component, but I'm receiving an error message.</p>\n\n<p>Since I'm pretty new to angular I don't have any idea on how to fix the error.</p>\n\n<pre><code>export class MotionAnalysisComponent implements OnInit{\nasync run() { \n// We want to predict the column \"medv\", which represents a median value of \n// a home (in $1000s), so we mark it as a label.\nconst csvUrl = 'https://storage.googleapis.com/tfjs-examples/multivariate-linear-regression/data/boston-housing-train.csv';\nconst csvDataset = tf.data.csv(\ncsvUrl, {\n  columnConfigs: {\n    medv: {\n      isLabel: true\n    }\n  }\n});\n\n// Number of features is the number of column names minus one for the label column.\n\nconst numOfFeatures = (await csvDataset.columnNames()).length - 1;\n\n// Prepare the Dataset for training.\nconst flattenedDataset =\n  csvDataset\n   .map(({xs, ys}) =&gt;\n    {\n    // Convert xs(features) and ys(labels) from object form (keyed by\n    // column name) to array form.\n    return {xs:Object.keys(xs), ys:Object.keys(ys)};\n  })\n.batch(10);\n\n// Define the model.\nconst model = tf.sequential();\nmodel.add(tf.layers.dense({\n  inputShape: [numOfFeatures],\n  units: 1\n}));\nmodel.compile({\n  optimizer: tf.train.sgd(0.000001),\n  loss: 'meanSquaredError'\n});\n\n// Fit the model using the prepared Dataset\nreturn model.fitDataset(flattenedDataset, {\n  epochs: 10,\n  callbacks: {\n    onEpochEnd: async (epoch, logs) =&gt; {\n      console.log(epoch + ':' + logs.loss);\n    }\n  }\n});\n}\n}\n</code></pre>\n\n<p>I'm receiving the following two error messages:</p>\n\n<ul>\n<li><code>Property 'xs' does not exist on type 'TensorContainer'</code></li>\n<li><code>Property 'ys' does not exist on type 'TensorContainer'</code></li>\n</ul>\n"}, {"tags": ["node.js", "typescript", "request", "protractor"], "comments": [{"owner": {"reputation": 2140, "user_id": 6089515, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/50AG2.jpg?s=128&g=1", "display_name": "Lunin Roman", "link": "https://stackoverflow.com/users/6089515/lunin-roman"}, "edited": false, "score": 0, "creation_date": 1567574794, "post_id": 57781646, "comment_id": 101997852, "body": "I do believe <code>it</code> blocks is only for actual tests, so you should move the auth process into <code>beforeAll</code> block, otherwise protractor may launch <code>it</code> blocks in parallel, it is not a stable solution"}, {"owner": {"reputation": 4808, "user_id": 9150146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3Zq7.png?s=128&g=1", "display_name": "Sergey Pleshakov", "link": "https://stackoverflow.com/users/9150146/sergey-pleshakov"}, "edited": false, "score": 0, "creation_date": 1567609467, "post_id": 57781646, "comment_id": 102015584, "body": "to previous comment - <code>it</code> blocks never run in parallel. It&#39;s a matter of personal choice"}, {"owner": {"reputation": 4808, "user_id": 9150146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3Zq7.png?s=128&g=1", "display_name": "Sergey Pleshakov", "link": "https://stackoverflow.com/users/9150146/sergey-pleshakov"}, "edited": false, "score": 0, "creation_date": 1567609700, "post_id": 57781646, "comment_id": 102015727, "body": "When you say &#39;if I run once again&#39;, do you mean you run again the whole spec file?"}, {"owner": {"reputation": 79, "user_id": 2250641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/694fd6267eafe8a10c0ad1e87cc02154?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/2250641/rocky"}, "reply_to_user": {"reputation": 4808, "user_id": 9150146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3Zq7.png?s=128&g=1", "display_name": "Sergey Pleshakov", "link": "https://stackoverflow.com/users/9150146/sergey-pleshakov"}, "edited": false, "score": 0, "creation_date": 1567666504, "post_id": 57781646, "comment_id": 102032154, "body": "@Sergey - Yes, I need to re-run the whole script for creating the resource"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 2250641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/694fd6267eafe8a10c0ad1e87cc02154?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/2250641/rocky"}, "edited": false, "score": 0, "creation_date": 1568033123, "post_id": 57792049, "comment_id": 102134833, "body": "dearly3 - have tried request-promise in this for the second API it throws a un-authenticated error. Had checked the values of the cookie it was getting set to previous APIs return."}], "tags": [], "owner": {"reputation": 1, "user_id": 10613771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bd3679ab8465d7fedbf58910132126?s=128&d=identicon&r=PG&f=1", "display_name": "dearly3", "link": "https://stackoverflow.com/users/10613771/dearly3"}, "is_accepted": false, "score": 0, "last_activity_date": 1567612563, "creation_date": 1567612563, "answer_id": 57792049, "question_id": 57781646, "link": "https://stackoverflow.com/questions/57781646/how-to-fix-the-dependent-rest-api-call-in-protractor/57792049#57792049", "title": "How to fix the dependent REST API call in protractor", "body": "<p>As specified in the docs for request (found here)\n<a href=\"https://www.npmjs.com/package/request#promises--asyncawait\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/request#promises--asyncawait</a></p>\n\n<p>If you'd like request to return a Promise instead, you can use an alternative interface for request. I have experienced some unpredictable behavior involving API responses when trying to make API calls using request with promises and async/await. I used request-promise instead (<a href=\"https://github.com/request/request-promise\" rel=\"nofollow noreferrer\">https://github.com/request/request-promise</a>), which is built upon request.</p>\n"}], "owner": {"reputation": 79, "user_id": 2250641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/694fd6267eafe8a10c0ad1e87cc02154?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/2250641/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567612563, "creation_date": 1567572383, "question_id": 57781646, "link": "https://stackoverflow.com/questions/57781646/how-to-fix-the-dependent-rest-api-call-in-protractor", "title": "How to fix the dependent REST API call in protractor", "body": "<p>Have written a protractor spec file in typescript. containing two it blocks. Each IT block calls one POST REST API. First one is calling authentication API which returns cookies values if successfully authenticated. The second API need this authenticated cookie to be set in request header along with JSON payload. </p>\n\n<p>The issue is with first-run only authentication API works and it returns the cookie but it does not create the resource. The resource is getting created if I run once again. </p>\n\n<p>Below is my spec file:</p>\n\n<pre><code>import { Utility } from \"../../../commonLibraries/utility\";\ndescribe(\"Test API calls\", ()=&gt;{\n    let utility = new Utility();\n    let request = require('request');\n    let cookiesValue: any;\n    let cookie_value: any;\n    let uniqueID = utility.getUniqueUserName();\n\n    it(\"Login using API\", ()=&gt;{\n        cookie_value = new Promise((resolve, reject)=&gt;{\n            request.post('https://www.myserver.com/web/json/login',{\n                form: {\n                username: 'xxxxxxx',\n                password: 'xxxxxxx'\n                },\n                rejectUnauthorized:false,\n                headers:{\n                'Content-Type': 'application/json'\n                }\n            }, (error, httpResopnse, body)=&gt;{\n                if(error){\n                    console.log(\"Error: \", error);\n                    reject(error);\n                }\n                cookiesValue = httpResopnse.headers['set-cookie'][1];\n                resolve(cookiesValue);\n            });\n        });\n    });\n\n    it(\"Create Resource\", ()=&gt;{\n        console.log(accessioningID)\n        cookie_value.then((data1)=&gt;{\n\n            const json_data = {\n                \"Resource\": {\n                    \"Id\": null,\n                    \"accId\": accessioningID,\n                    \"someData\": \"Some Data here\"\n                }\n            };\n            console.log(data1);\n            request.post( {uri: 'https://www.myserver.com/web/json/resource', \n                            body: JSON.stringify(json_data),\n                            rejectUnauthorized:false,\n                            headers:{\n                                'Content-Type': 'application/json',\n                                'Cookie': data1\n                            },\n                }, (error, httpResopnse, body)=&gt;{\n                if(error){\n                    console.log(\"Error: \", error);\n                }\n                //console.log(\"Response: \", httpResopnse.statusCode);\n                console.log(\"Response: \", httpResopnse);\n                console.log(\"Body \", body)\n            });\n       });\n    });\n});\n</code></pre>\n\n<p>It's should execute both APIs and resource should be created.</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 10913, "user_id": 3676586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KbN7G.jpg?s=128&g=1", "display_name": "Tiep Phan", "link": "https://stackoverflow.com/users/3676586/tiep-phan"}, "edited": false, "score": 1, "creation_date": 1567571481, "post_id": 57781431, "comment_id": 101997120, "body": "maybe this one <a href=\"https://stackoverflow.com/questions/10797377/in-objective-c-what-utility-uses-brief-tag-in-comments\" title=\"in objective c what utility uses brief tag in comments\">stackoverflow.com/questions/10797377/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1547, "user_id": 4321097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ec5b7a910b8bc9589ecae6cce4f6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Taleck", "link": "https://stackoverflow.com/users/4321097/christopher-taleck"}, "is_accepted": false, "score": 1, "last_activity_date": 1567573926, "creation_date": 1567573926, "answer_id": 57781853, "question_id": 57781431, "link": "https://stackoverflow.com/questions/57781431/in-an-angular-6-project-what-does-brief-mean/57781853#57781853", "title": "In an Angular 6 project, what does @brief mean?", "body": "<p>This is <strong><a href=\"https://jsdoc.app/\" rel=\"nofollow noreferrer\">JSDoc</a></strong> documentation syntax in JavaScript comment blocks. </p>\n\n<p>However, the <code>@brief</code> tag is not a standard tag and seems to be borrowed from <strong>doxygen</strong>. </p>\n\n<p>The closest JSDoc tag would be the <a href=\"https://jsdoc.app/tags-summary.html\" rel=\"nofollow noreferrer\"><code>@summary</code> tag</a> meaning \"a shorter version of the full description\".</p>\n"}, {"tags": [], "owner": {"reputation": 675, "user_id": 8490514, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/411d2498778720f4ee58fda0a8f9d51a?s=128&d=identicon&r=PG&f=1", "display_name": "Amey", "link": "https://stackoverflow.com/users/8490514/amey"}, "is_accepted": true, "score": 1, "last_activity_date": 1567574354, "creation_date": 1567574354, "answer_id": 57781906, "question_id": 57781431, "link": "https://stackoverflow.com/questions/57781431/in-an-angular-6-project-what-does-brief-mean/57781906#57781906", "title": "In an Angular 6 project, what does @brief mean?", "body": "<p>@brief Would help in documentation . Whatever code you write using  @brief will be used to generate a document .You can use any tool for document generation .  </p>\n"}], "owner": {"reputation": 133, "user_id": 8056544, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d521f741463c1cc9079904d63bfc5a62?s=128&d=identicon&r=PG&f=1", "display_name": "M. Gamie", "link": "https://stackoverflow.com/users/8056544/m-gamie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 57781906, "answer_count": 2, "score": 0, "last_activity_date": 1567574354, "creation_date": 1567570902, "question_id": 57781431, "link": "https://stackoverflow.com/questions/57781431/in-an-angular-6-project-what-does-brief-mean", "title": "In an Angular 6 project, what does @brief mean?", "body": "<p>I have a new Angular 6 project and I noticed that there are some few hashed comments that seems like this:</p>\n\n<pre><code>/** @brief the displayed list of vehicles */\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>/** @brief dummy database of vehicles */\n</code></pre>\n\n<p>and this '@brief' thing has a blue color, so what is this '@brief' mean?</p>\n"}, {"tags": ["javascript", "typescript", "class", "interface"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1567570470, "post_id": 57781371, "comment_id": 101996943, "body": "It complains because your type does not implement the interface."}, {"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 0, "creation_date": 1567570611, "post_id": 57781371, "comment_id": 101996965, "body": "Why would you define a private property in an interface? It&#39;s not part of the public API."}, {"owner": {"reputation": 825, "user_id": 9764412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wK67e.jpg?s=128&g=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/9764412/damon"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1567570770, "post_id": 57781371, "comment_id": 101996995, "body": "@zerkms What do you mean by that?"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1567570996, "post_id": 57781371, "comment_id": 101997021, "body": "@Sanjay your type does not implement the interface -&gt; you don&#39;t get a type check exception. It&#39;s not obvious what exactly your problem is. You declared <code>name: string</code> field in the interface, your class does not implement it."}], "answers": [{"tags": [], "owner": {"reputation": 5705, "user_id": 3783818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36a0426f1c4977ee377a4de46bd25333?s=128&d=identicon&r=PG", "display_name": "Yozi", "link": "https://stackoverflow.com/users/3783818/yozi"}, "is_accepted": false, "score": 1, "last_activity_date": 1567576531, "creation_date": 1567576531, "answer_id": 57782268, "question_id": 57781371, "link": "https://stackoverflow.com/questions/57781371/typescript-complains-that-private-property-is-not-present-in-the-interface/57782268#57782268", "title": "Typescript complains that private property is not present in the interface", "body": "<p>An interface is a public agreement. The statement \"Class A implements interface B\" means: \"any instance of class A <strong>publish</strong> all properties and methods from the interface B, so they are available for anyone using instance\".</p>\n\n<p>So, in your case typescript behavior is correct</p>\n"}], "owner": {"reputation": 825, "user_id": 9764412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wK67e.jpg?s=128&g=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/9764412/damon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567576531, "creation_date": 1567570301, "last_edit_date": 1567570497, "question_id": 57781371, "link": "https://stackoverflow.com/questions/57781371/typescript-complains-that-private-property-is-not-present-in-the-interface", "title": "Typescript complains that private property is not present in the interface", "body": "<p>I have a following very basic code:</p>\n\n<pre><code>interface EmployeeSalaryInterface {\n    name: string\n    hoursWorked: number\n    readonly perHourRate: number\n    calculateSalary(): string\n}\n\nclass EmployeeSalary implements EmployeeSalaryInterface {\n    private readonly perHourRate: number = 20\n\n    constructor(private name: string, private hoursWorked: number) {}\n\n    public calculateSalary(): string {\n        return `Employee ${this.name} has a base salary of $${this.hoursWorked * this.hoursWorked} for working ${this.hoursWorked} a day`\n    }\n}\n</code></pre>\n\n<p>Now, typescript doesn't allow me to create private property in the interface. However, for some reason, if I implement that interface in a class with the private property, it throws <code>Class 'EmployeeSalary' incorrectly implements interface 'EmployeeSalaryInterface'. Property 'name' is private in type 'EmployeeSalary' but not in type 'EmployeeSalaryInterface'.ts(2420)</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/T6WQ8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T6WQ8.png\" alt=\"enter image description here\"></a></p>\n\n<p>If typescript doesn't allow to include access modifiers in interface then why does it complain?</p>\n"}, {"tags": ["typescript", "enums", "switch-statement"], "comments": [{"owner": {"reputation": 10647, "user_id": 1226744, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/VEcWG.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/1226744/leon"}, "edited": false, "score": 0, "creation_date": 1567568696, "post_id": 57781176, "comment_id": 101996653, "body": "but it works on my machine :P <a href=\"http://www.typescriptlang.org/play/#code/KYOwrgtgBACg9gZwC4BUCeAHYUDeAoKKAJQFEBhAeQFkqSA5AEQBoCpKaBVOgSRQE08AXzx4AZmBABjJAEs4INvIBuwAE6o4KAIYAjADbA6WiMAAUSLaoDmwJEZMAuWIlSZgASifJVMkFdysBkhQFvqGxtgAvFAARDEA3KwIAO4ySJIAFlDmljZ2Ee4BhISSWgjY8MjoWAB07FRcvHwOrMUhugb2UVAA5DH1jfwA+jAUAMooQ-X0KDE9iW2EOqrAWgDWC8Wl5c5VbjWk04wti+1hXVDRfYfUtIwj45NHs-OtxcurG6zCJfIIcAYano4FYctZbF13JtJH8AcAgSCcucCpsVkgwKoFKFOhFEsI8GRlGoNNpkSZTJVXLUBjx+FCgA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a>"}, {"owner": {"reputation": 10647, "user_id": 1226744, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/VEcWG.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/1226744/leon"}, "edited": false, "score": 0, "creation_date": 1567568769, "post_id": 57781176, "comment_id": 101996666, "body": "Also, <code>console.log(targetName)</code> should be printing 1 or 0. To print the enum name you would use: <code>console.log(PostType[targetName]);</code>"}, {"owner": {"reputation": 665, "user_id": 6216378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f33c5095b5c4a7718e0ce310f2f09b9d?s=128&d=identicon&r=PG&f=1", "display_name": "J.S.C", "link": "https://stackoverflow.com/users/6216378/j-s-c"}, "reply_to_user": {"reputation": 10647, "user_id": 1226744, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/VEcWG.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/1226744/leon"}, "edited": false, "score": 0, "creation_date": 1567574462, "post_id": 57781176, "comment_id": 101997763, "body": "my argument <code>targetName</code> comes from GraphQL&#39;s query&#39;s enum and I guess that has to do with the reason why switch doesn&#39;t work + <code>console.log(targetName)</code> prints <code>RECOMMEND</code> instead of 0 or 1"}], "answers": [{"tags": [], "owner": {"reputation": 665, "user_id": 6216378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f33c5095b5c4a7718e0ce310f2f09b9d?s=128&d=identicon&r=PG&f=1", "display_name": "J.S.C", "link": "https://stackoverflow.com/users/6216378/j-s-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1567576327, "creation_date": 1567576327, "answer_id": 57782230, "question_id": 57781176, "link": "https://stackoverflow.com/questions/57781176/typescript-enum-switch-does-not-go-into-any-case/57782230#57782230", "title": "Typescript enum switch does not go into any case", "body": "<p>My problem was GraphQL's ENUM type sending ENUM as literal instead of number</p>\n"}], "owner": {"reputation": 665, "user_id": 6216378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f33c5095b5c4a7718e0ce310f2f09b9d?s=128&d=identicon&r=PG&f=1", "display_name": "J.S.C", "link": "https://stackoverflow.com/users/6216378/j-s-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567576327, "creation_date": 1567568333, "question_id": 57781176, "link": "https://stackoverflow.com/questions/57781176/typescript-enum-switch-does-not-go-into-any-case", "title": "Typescript enum switch does not go into any case", "body": "<p>I am trying to use switch with ENUM and it doesn't seem to work</p>\n\n<pre><code>function ConvertToTableName(targetName: PostType): string {\n  let tableName = \"\"\n  switch (targetName) {\n    case PostType.COMMUNITY:\n      tableName = '\"COMMUNITY_POST_COMMENT\"'\n      break\n    case PostType.RECOMMEND:\n      tableName = '\"RECOMMEND_POST_COMMENT\"'\n      break\n  }\n  console.log(targetName)\n  console.log(tableName)\n  return tableName\n}\n</code></pre>\n\n<p>Here's my function.</p>\n\n<pre><code>console.log(targetName) //PRINTS RECOMMEND\nconsole.log(tableName) //PRINTS NOTHING\n</code></pre>\n\n<p>even though targetName is PostType type and has value RECOMMEND,\ntargetName doesn't go into any of the cases thus tableName is not set to anything.</p>\n\n<p>here's my enum:</p>\n\n<pre><code>export enum PostType {\n  RECOMMEND,\n  COMMUNITY\n}\n</code></pre>\n\n<p>enum and the function are placed in different files but properly imported</p>\n\n<p>How can I fix so that switch clause work as expected?</p>\n"}, {"tags": ["typescript", "chai"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1567567329, "post_id": 57781010, "comment_id": 101996418, "body": "Can you show the <code>response</code> object?"}, {"owner": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1567567988, "post_id": 57781010, "comment_id": 101996531, "body": "@ggorlen The <code>response</code> definitely has a <code>text</code> element. Anyway, I found the problem (see my new answer below)."}], "answers": [{"tags": [], "owner": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "is_accepted": true, "score": 0, "last_activity_date": 1567567910, "creation_date": 1567567910, "answer_id": 57781134, "question_id": 57781010, "link": "https://stackoverflow.com/questions/57781010/how-to-access-reponse-text-in-typescript-chai/57781134#57781134", "title": "How to access Reponse text in TypeScript Chai?", "body": "<p>In my case, I had <code>@types/chai-http</code> installed (from an old tutorial), but <a href=\"https://www.npmjs.com/package/@types/chai-http\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/@types/chai-http</a> says it was deprecated. I'm assuming that in TypeScript it was a very limited API, as the version was 0.0.23 (or something).</p>\n\n<p><code>npm uninstall @types/chai-http</code> opened up the autocompletion for all the properties, including <code>.text</code>. This solved my problem.</p>\n"}], "owner": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57781134, "answer_count": 1, "score": 0, "last_activity_date": 1567567910, "creation_date": 1567566820, "question_id": 57781010, "link": "https://stackoverflow.com/questions/57781010/how-to-access-reponse-text-in-typescript-chai", "title": "How to access Reponse text in TypeScript Chai?", "body": "<p>In the following <code>helloWorld.test.ts</code> I can't get access to <code>res.text</code> to test the HTML result:</p>\n\n<pre><code>import * as chai from 'chai';\nimport chaiHttp = require('chai-http');\n\nimport app from '../src/App';\n\nchai.use(chaiHttp);\nconst expect = chai.expect;\n\ndescribe('baseRoute', () =&gt; {\n\n  it('should be html', async () =&gt; {\n    const res = await chai.request(app).get('/');\n    expect(res.type).to.eql('text/html');\n  });\n\n  it('should have the message in body', async () =&gt; {\n    const res = await chai.request(app).get('/');\n    //console.log(\"Result:\", res);\n    expect(res.text).to.eql('&lt;html&gt;&lt;head&gt;&lt;title&gt;Hey&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello world!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;');\n  });\n\n});\n</code></pre>\n\n<p>When I try to build my project in VSCode, I get a <code>Property 'text' does not exist on type 'Response'.</code> error, which is consistent with the autocompletion that only shows three properties for a <code>Response</code>: <code>body</code>, <code>status</code>, and <code>type</code>. </p>\n\n<p>The <code>res.body</code> is always <code>{}</code> so, according to the answer to the following question, one should use <code>res.text</code> (in JavaScript): <a href=\"https://stackoverflow.com/questions/43320699/chai-response-body-is-always-empty\">Chai response.body is always empty {}</a></p>\n\n<p>How to get access in TypeScript to <code>res.text</code>?</p>\n"}, {"tags": ["angular", "typescript", ".net-core"], "comments": [{"owner": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567567538, "post_id": 57780922, "comment_id": 101996453, "body": "Not sure if that is the problem, but did you tried without your pipe in your getAction method?"}, {"owner": {"reputation": 85, "user_id": 5091483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47941a4750bb6e438805a672ba15ce05?s=128&d=identicon&r=PG&f=1", "display_name": "kjamp", "link": "https://stackoverflow.com/users/5091483/kjamp"}, "reply_to_user": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567567735, "post_id": 57780922, "comment_id": 101996493, "body": "eh tried that, but i&#39;m sure thats not it. this is the error it gives back. Cannot read property &#39;subscribe&#39; of undefined     at new ActionViewComponent (actionview.component.ts:68), which line 68 is the this.actionMenuSubscription"}, {"owner": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567568084, "post_id": 57780922, "comment_id": 101996547, "body": "Could you provide the code of your MenuService? Looks like there is the problem."}, {"owner": {"reputation": 85, "user_id": 5091483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47941a4750bb6e438805a672ba15ce05?s=128&d=identicon&r=PG&f=1", "display_name": "kjamp", "link": "https://stackoverflow.com/users/5091483/kjamp"}, "reply_to_user": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567568176, "post_id": 57780922, "comment_id": 101996566, "body": "just added the menu service in the code"}, {"owner": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567568411, "post_id": 57780922, "comment_id": 101996607, "body": "Do you use tslint?"}, {"owner": {"reputation": 85, "user_id": 5091483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47941a4750bb6e438805a672ba15ce05?s=128&d=identicon&r=PG&f=1", "display_name": "kjamp", "link": "https://stackoverflow.com/users/5091483/kjamp"}, "reply_to_user": {"reputation": 3119, "user_id": 9696675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1o1G.jpg?s=128&g=1", "display_name": "Constantin Beer", "link": "https://stackoverflow.com/users/9696675/constantin-beer"}, "edited": false, "score": 0, "creation_date": 1567568446, "post_id": 57780922, "comment_id": 101996611, "body": "yes I do but i&#39;m not getting any errors from the linter, the code still compiles"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5091483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47941a4750bb6e438805a672ba15ce05?s=128&d=identicon&r=PG&f=1", "display_name": "kjamp", "link": "https://stackoverflow.com/users/5091483/kjamp"}, "edited": false, "score": 0, "creation_date": 1567569019, "post_id": 57781211, "comment_id": 101996708, "body": "tried that, but I think the issue happens in the component. this code is returning as undefined.   this.actionMenuSubscription = this.menuService.currentActionMenuLine.subscribe(actionmenul&zwnj;&#8203;ine =&gt; {           this.currentActionMenuLine = actionmenuline;         });"}], "tags": [], "owner": {"reputation": 1894, "user_id": 6850994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/41c03a52caf073aacaeb3f5a371f05d5?s=128&d=identicon&r=PG&f=1", "display_name": "Poldo", "link": "https://stackoverflow.com/users/6850994/poldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567568662, "creation_date": 1567568662, "answer_id": 57781211, "question_id": 57780922, "link": "https://stackoverflow.com/questions/57780922/cannot-read-property-subscribe-of-undefined-angular-7/57781211#57781211", "title": "Cannot Read Property &#39;Subscribe&#39; of Undefined Angular 7", "body": "<p>Modify your service to </p>\n\n<pre><code>getAction( user: User, actionmenuline: ActionMenuLine): Observable&lt;any&gt; {\n      return this.http.post&lt;User[]&gt;(this.apiURL,\n        {\n            SessionID:  user.userEnv.sessionId,\n            ActionTag: actionmenuline.targetActionTag\n       })\n  }\n</code></pre>\n\n<p>instead of adding pipe to service use it in your component, and in your component</p>\n\n<pre><code>public getActions() {\n  this.actionService.getAction(this.currentUser, this.currentActionMenuLine)\n    .pipe(retry(1))\n    .subscribe((data: any) =&gt; {\n         this.dataSource = data;\n   });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1567574527, "creation_date": 1567574527, "answer_id": 57781925, "question_id": 57780922, "link": "https://stackoverflow.com/questions/57780922/cannot-read-property-subscribe-of-undefined-angular-7/57781925#57781925", "title": "Cannot Read Property &#39;Subscribe&#39; of Undefined Angular 7", "body": "<p>There's no code to initialize the <code>currentActionMenuLine</code> in the <code>menuService</code>. You have typed it as an <code>Observable</code> but it won't have any effect at runtime as the value is still <code>undefined</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3974, "user_id": 9764133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qcf47.jpg?s=128&g=1", "display_name": "ganesh045", "link": "https://stackoverflow.com/users/9764133/ganesh045"}, "is_accepted": false, "score": 2, "last_activity_date": 1567575324, "last_edit_date": 1567575324, "creation_date": 1567574672, "answer_id": 57781958, "question_id": 57780922, "link": "https://stackoverflow.com/questions/57780922/cannot-read-property-subscribe-of-undefined-angular-7/57781958#57781958", "title": "Cannot Read Property &#39;Subscribe&#39; of Undefined Angular 7", "body": "<p><code>currentActionMenuLine</code> is defined in <strong><code>MenuService</code></strong> but with <em>no value assigned in entire class</em>.</p>\n\n<p><strong>MenuService.ts</strong> </p>\n\n<pre><code>public currentActionMenuLine$: Observable&lt;ActionMenuLine&gt;;\n</code></pre>\n\n<blockquote>\n  <p>The service is passing in the correct code for the first value but not the second value.</p>\n</blockquote>\n\n<p>That's because maybe you are assigning a value to it in <strong><code>AuthenticationService</code></strong>, which not presented in your question. </p>\n\n<p>check your <strong>AuthenticationService</strong> class and do the same here for <code>currentActionMenuLine</code>(add the initial value).</p>\n\n<p><strong>P.S:</strong></p>\n\n<blockquote>\n  <p>Generaly we use  <strong><code>$</code></strong> symbol  at the end of variable name for Observables.</p>\n</blockquote>\n"}], "owner": {"reputation": 85, "user_id": 5091483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47941a4750bb6e438805a672ba15ce05?s=128&d=identicon&r=PG&f=1", "display_name": "kjamp", "link": "https://stackoverflow.com/users/5091483/kjamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1567575324, "creation_date": 1567565922, "last_edit_date": 1567568164, "question_id": 57780922, "link": "https://stackoverflow.com/questions/57780922/cannot-read-property-subscribe-of-undefined-angular-7", "title": "Cannot Read Property &#39;Subscribe&#39; of Undefined Angular 7", "body": "<p>I'm having an issue passing in the values for my actionmenuline. The actionmenuline value is passing in undefined and i'm unsure of what's going on.</p>\n\n<p>The service is passing in the correct code for the first value but not the second value. I'm wondering if I'm doing something wrong in the getAction call that's not getting the correct object.</p>\n\n<p>This is the error i'm getting: --></p>\n\n<p>Cannot read property 'subscribe' of undefined\n    at new ActionViewComponent (actionview.component.ts:68) which line 68 is pointing to this.actionMenuSubscription</p>\n\n<p><strong>Action View Component</strong></p>\n\n<pre><code>export class ActionViewComponent implements OnInit, OnDestroy {\n\n    // User Fields\n    currentUser: User;\n    users: User[] = [];\n    currentUserSubscription: Subscription;\n\n\n    // Menu Lines\n    currentActionMenuLine: ActionMenuLine;\n    actionMenuLines: ActionMenuLine[] = [];\n    actionMenuSubscription: Subscription;\n\n    dataSource: any = new MatTableDataSource(ACTION_DATA);\n\n    constructor(\n        private authenticationService: AuthenticationService,\n        private actionService: ActionService,\n        private menuService: MenuService,\n    ) {\n        this.currentUserSubscription = this.authenticationService.currentUser.subscribe(user =&gt; {\n          this.currentUser = user;\n        });\n\n        this.actionMenuSubscription = this.menuService.currentActionMenuLine.subscribe(actionmenuline =&gt; {\n          this.currentActionMenuLine = actionmenuline;\n        });\n    }\n\n   public getActions() {\n      this.actionService.getAction(this.currentUser, this.currentActionMenuLine).\n      subscribe((data: any) =&gt; {\n          this.dataSource = data;\n        });\n    }\n\n}\n</code></pre>\n\n<p><strong>Action Service</strong></p>\n\n<pre><code>export class ActionService {\n\n  public apiURL = 'http://localhost:15217/api/actions/launchaction';\n  public currentUser: Observable&lt;User&gt;;\n  public currentAction: Observable&lt;Action&gt;;\n  private currentActionSubject: BehaviorSubject&lt;Action&gt;;\n  public ActionMenuLine: Observable&lt;ActionMenuLine&gt;;\n\n\n    constructor(private http: HttpClient) {\n      this.currentActionSubject = new BehaviorSubject&lt;Action&gt;(JSON.parse(localStorage.getItem('currentAction')));\n      this.currentAction = this.currentActionSubject.asObservable();\n    }\n      // Http Options\n  httpOptions = {\n    headers: new HttpHeaders({\n      'Content-Type': 'application/json'\n    })\n  };\n\n  getAction( user: User, actionmenuline: ActionMenuLine) {\n      return this.http.post&lt;User[]&gt;(this.apiURL,\n        {\n            SessionID:  user.userEnv.sessionId,\n            ActionTag: actionmenuline.targetActionTag\n       })\n        .pipe(\n          retry(1),\n          catchError(this.handleError)\n        );\n  }\n</code></pre>\n\n<p><strong>Menu Service</strong></p>\n\n<pre><code>export class MenuService {\n\npublic currentUser: Observable&lt;User&gt;;\nprivate currentActionMenuLineSubject: BehaviorSubject&lt;ActionMenuLine&gt;;\npublic currentActionMenuLine: Observable&lt;ActionMenuLine&gt;;\nActionMenuSubscription: any;\n\nconstructor(private http: HttpClient) { }\n\nloadActionMenu(user: User): Observable&lt;ActionMenuLine[]&gt; {\n    return this.http.get&lt;ActionMenuLine[]&gt;(`/menu/getlines/`, {\n        params : {\n            userId: user.id,\n            sessionId: user.userEnv.sessionId\n        }\n    }).pipe(map( MenuLines =&gt; {\n        return this.debugLines(MenuLines) as ActionMenuLine[];\n    }));\n}\n\ndebugLines(lines: ActionMenuLine[]){\n\n    let i:number = 0;\n    let kids:ActionMenuLine[];\n\n    for( let i:number = 0; i&lt; lines.length; i++ ){\n        let j:ActionMenuLine = lines[i];\n        kids = j.children;\n    }\n\n    return lines;\n}\n\nloadAboutSyntelic():Observable&lt;string[]&gt; {\n    return this.http.get&lt;string[]&gt;('usersettings/aboutsyntelic/').pipe(map( AboutSyntelic =&gt; {\n        return AboutSyntelic as string[];\n    }));\n}\n\nloadMimic(sessionId: string):Observable&lt;string[]&gt; {\n    return this.http.get&lt;string[]&gt;(\"usersettings/mimicdata/\",{\n        params: {\n            sessionId: sessionId\n        }\n    }).pipe(map(ids =&gt; ids as string[]));\n}\n\nmimic(userId: string, sessionId: string){\n    return this.http.get&lt;any&gt;(\"usersettings/mimic/\",{\n        params : {\n            userId: userId,\n            sessionId: sessionId\n        }\n    }).pipe(map( res =&gt; {\n        return res as User\n    }));\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 8533, "user_id": 9423231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54730771ababc9c107cf6dac3087b23?s=128&d=identicon&r=PG&f=1", "display_name": "frido", "link": "https://stackoverflow.com/users/9423231/frido"}, "edited": false, "score": 0, "creation_date": 1567587288, "post_id": 57780900, "comment_id": 102003238, "body": "What does <code>this.thirdPartyService.query</code> return? Can you post a link to the documentation."}], "answers": [{"comments": [{"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "reply_to_user": {"reputation": 87, "user_id": 9969157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b24173484735f5dbe958a110634843b?s=128&d=identicon&r=PG&f=1", "display_name": "user9969157", "link": "https://stackoverflow.com/users/9969157/user9969157"}, "edited": false, "score": 0, "creation_date": 1567568710, "post_id": 57781129, "comment_id": 101996656, "body": "What is your angular and rxjs version ?"}, {"owner": {"reputation": 87, "user_id": 9969157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b24173484735f5dbe958a110634843b?s=128&d=identicon&r=PG&f=1", "display_name": "user9969157", "link": "https://stackoverflow.com/users/9969157/user9969157"}, "edited": false, "score": 0, "creation_date": 1567568777, "post_id": 57781129, "comment_id": 101996669, "body": "rxjs version -6.5.2"}], "tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": true, "score": 0, "last_activity_date": 1567567874, "creation_date": 1567567874, "answer_id": 57781129, "question_id": 57780900, "link": "https://stackoverflow.com/questions/57780900/pipe-is-not-a-function-when-returning-from-inside-return-function/57781129#57781129", "title": "pipe is not a function when returning from inside return function", "body": "<p>Just a blind guest maybe you need to return of an observable in else statement but not \nthrow error</p>\n\n<pre><code>querySomthing(request) : Observable&lt;any&gt; {\n      // rpc call.\n      return this.thirdPartyService.query(request, {}, (error, response) =&gt; {\n            if (!error) {\n                try {\n                    console.log(response)\n                    return of(response); &lt;-- returning observable.\n                }\n                catch (err) {\n                    console.log(error);\n                    throw error;\n                }\n            }\n            else {\n                console.log(error);\n                return of();&lt;-- returning observable here also\n            }\n         }); \n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 4142839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2KYQ.jpg?s=128&g=1", "display_name": "Dmitriy T", "link": "https://stackoverflow.com/users/4142839/dmitriy-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1567652748, "creation_date": 1567652748, "answer_id": 57797908, "question_id": 57780900, "link": "https://stackoverflow.com/questions/57780900/pipe-is-not-a-function-when-returning-from-inside-return-function/57797908#57797908", "title": "pipe is not a function when returning from inside return function", "body": "<p><code>this.thirdPartyService.query</code> is not returning an observable. It might be returning undefined or some other object. If you have the source code for the thirdPartyService, you can try stepping into it; otherwise, there's not enough information here to tell you what this service returns or why it does that.</p>\n"}], "owner": {"reputation": 87, "user_id": 9969157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b24173484735f5dbe958a110634843b?s=128&d=identicon&r=PG&f=1", "display_name": "user9969157", "link": "https://stackoverflow.com/users/9969157/user9969157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 57781129, "answer_count": 2, "score": 1, "last_activity_date": 1567652748, "creation_date": 1567565619, "last_edit_date": 1567567888, "question_id": 57780900, "link": "https://stackoverflow.com/questions/57780900/pipe-is-not-a-function-when-returning-from-inside-return-function", "title": "pipe is not a function when returning from inside return function", "body": "<p>I am returning an observable back to my calling method, but I see this -'pipe is not a function' error.</p>\n\n<p>This is my DB layer</p>\n\n<pre><code>   querySomthing(request) : Observable&lt;any&gt; {\n      // rpc call.\n      return this.thirdPartyService.query(request, {}, (error, response) =&gt; {\n            if (!error) {\n                try {\n                    console.log(response)\n                    return of(response); &lt;-- returning observable.\n                }\n                catch (err) {\n                    console.log(error);\n                    throw error;\n                }\n            }\n            else {\n                console.log(error);\n                throw error;\n            }\n         }); \n   }\n</code></pre>\n\n<p>Service layer (Error here- Pipe is not a function)</p>\n\n<pre><code>  getinitialData(): Observable&lt;any&gt; {\n     //Build request here.\n     return this.dbLayer.querySomthing(req).pipe(map((data:any)=&gt;{\n       //Process the data here\n        return DataObject;\n     }));\n   }\n</code></pre>\n\n<p>UI component Layer</p>\n\n<pre><code>    ngOnInit() {\n       this.service.getinitialData().subscribe((d) =&gt; {\n          UIComponent.datasource = d;\n       },\n       (error)=&gt;{\n          toast(error);\n       });\n    }\n</code></pre>\n\n<p>When I try with this at the DB layer, it works -</p>\n\n<pre><code>   querySomthing(request) : Observable&lt;any&gt; {\n      of(someDummyData);\n   }\n</code></pre>\n\n<p>In the above use case, I also want to bubble up the exception to the UI toastr.</p>\n"}, {"tags": ["angular", "typescript", "angular7", "ngrx", "ngrx-effects"], "comments": [{"owner": {"reputation": 1894, "user_id": 6850994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/41c03a52caf073aacaeb3f5a371f05d5?s=128&d=identicon&r=PG&f=1", "display_name": "Poldo", "link": "https://stackoverflow.com/users/6850994/poldo"}, "edited": false, "score": 0, "creation_date": 1567565775, "post_id": 57780619, "comment_id": 101996189, "body": "can you post your reducer file?"}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "reply_to_user": {"reputation": 1894, "user_id": 6850994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/41c03a52caf073aacaeb3f5a371f05d5?s=128&d=identicon&r=PG&f=1", "display_name": "Poldo", "link": "https://stackoverflow.com/users/6850994/poldo"}, "edited": false, "score": 0, "creation_date": 1567572415, "post_id": 57780619, "comment_id": 101997331, "body": "How do I get to the reducer is the problem? Once I have the actions back from the effect I will send it to the reducer"}, {"owner": {"reputation": 494, "user_id": 2928827, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c21540b0e989a0ec466a8fdc6b779dc?s=128&d=identicon&r=PG&f=1", "display_name": "m.akbari", "link": "https://stackoverflow.com/users/2928827/m-akbari"}, "edited": false, "score": 0, "creation_date": 1568192808, "post_id": 57780619, "comment_id": 102193693, "body": "(if I understand your question well) You need to use exhaustMap after your effect. then dispatch new action based on success or failure or anything else you want to do after file is uploaded. Handle new action in new effect with dispatch false."}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1568238141, "post_id": 57780619, "comment_id": 102215310, "body": "@m.akari do you have an example of this? thanks."}], "answers": [{"comments": [{"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1567836506, "post_id": 57831059, "comment_id": 102091768, "body": "I need it not to be just angular but NgRx! It needs to have the side effects and reducer. The mock you provided doesn&#39;t."}, {"owner": {"reputation": 371, "user_id": 4302685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hlTI9.png?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4302685/pankaj"}, "reply_to_user": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1567850024, "post_id": 57831059, "comment_id": 102094248, "body": "It has everything. <code>app.state.ts</code> has the reducer, <code>app.effects.ts</code> has the effects and <code>app.component.ts</code> has the NGRX bindings"}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1567917170, "post_id": 57831059, "comment_id": 102106526, "body": "For the sake of this existing project, I want/need to have the ofChange, uploadData(?), and uploadFile in the effect. Can that be done? That is what I am looking for. So the FileReader I want in the effect. This is the way the project implemented things (not me). Actions just take in inputs and pass outputs."}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1567919103, "post_id": 57831059, "comment_id": 102106793, "body": "See my downloadState updates above on how we need the pattern done with this project."}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1568004963, "post_id": 57831059, "comment_id": 102122979, "body": "Thanks. getting closer. I uplated my question above with another detail about the inputFile payload. Learning a lot. Thanks."}, {"owner": {"reputation": 371, "user_id": 4302685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hlTI9.png?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4302685/pankaj"}, "reply_to_user": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1568011157, "post_id": 57831059, "comment_id": 102124650, "body": "If you have only 1 layer, then simply <code>dispatch</code> the store action instead of raising another event. Meaning to say, remove the <code>OnChange</code> eventemitter and modify <code>_onChange</code> function to  - function _onChange(event) { this.store.dispatch({       type: &#39;BEGIN_FILE_READ&#39;,       payload: {         inputFile: event.target.files[0]       }     }) };"}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1568050278, "post_id": 57831059, "comment_id": 102143533, "body": "is there anyone to dispatch like above without doing this.store.dispatch to the effect with the payload? just curious for learning this"}, {"owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1568051044, "post_id": 57831059, "comment_id": 102143849, "body": "I want to get the app.component.ts emit code to pass stuff without a store to the effect and then get the uploaded data into the store"}, {"owner": {"reputation": 371, "user_id": 4302685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hlTI9.png?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4302685/pankaj"}, "reply_to_user": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "edited": false, "score": 0, "creation_date": 1568098631, "post_id": 57831059, "comment_id": 102156280, "body": "@cdub -  Check out the latest edits. Essentially, you&#39;ll have to introduce another service in between."}], "tags": [], "owner": {"reputation": 371, "user_id": 4302685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hlTI9.png?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4302685/pankaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1568098570, "last_edit_date": 1568098570, "creation_date": 1567835382, "answer_id": 57831059, "question_id": 57780619, "link": "https://stackoverflow.com/questions/57780619/getting-json-data-from-a-file-in-ngrx-angular-7-app/57831059#57831059", "title": "Getting JSON data from a file in NGRX / Angular 7 app", "body": "<p>Below is one way to organize the code fulfilling the above requirement.</p>\n\n<ul>\n<li>Separating <code>file-upload</code> capability to an independent component. Essentially <code>FileUploader</code> component would be a dumb component which only communicates via <code>EventEmitter</code>.</li>\n<li>Parent component hooks into <code>upload</code> event and dispatches appropriate action passing the data received from <code>FileUploader</code> as a payload.</li>\n<li><code>store</code> reducer sets appropriate state based on business logic. Simultaneously, <code>effect</code> can be hooked into the same (which simulates an 'API call')</li>\n</ul>\n\n<p>Check out <a href=\"https://stackblitz.com/edit/angular-qdhmxg\" rel=\"nofollow noreferrer\">this</a> mock implementation for the same.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Based on the new requirements to use <code>FileReader</code> in effects, mock implementation has been modified to accommodate this change.</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Based on the new requirements to use not use <code>store</code> and simply utilize the effects, another <code>Injectable</code> can be introduced which is backed by <code>Subject</code> which then provides a way to communicate across <code>component</code> and <code>effects</code>. Sample code is updated in mock implementation.</p>\n"}], "owner": {"reputation": 20958, "user_id": 665557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/10b31574b457051a4f033e149a10da81?s=128&d=identicon&r=PG", "display_name": "cdub", "link": "https://stackoverflow.com/users/665557/cdub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1049, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1568098570, "creation_date": 1567562899, "last_edit_date": 1568004902, "question_id": 57780619, "link": "https://stackoverflow.com/questions/57780619/getting-json-data-from-a-file-in-ngrx-angular-7-app", "title": "Getting JSON data from a file in NGRX / Angular 7 app", "body": "<p>I am working off of an existing NgRx/Redux app and new to it (1st app).  I have used a previous answer on SO and having trouble adding it to NgRx effects.</p>\n\n<p>I have the following HTML/Angular in my component:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"block\"&gt;\n  &lt;label id=\"lbl\"&gt;File &lt;/label&gt;\n  &lt;input #fileInput type='file' (change)=\"_onChange($event)\"/&gt;\n  &lt;button class=\"btn btn-sm\"  (click)=\"_uploadFile()\"&gt;Upload The JSON File&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The TS file for the component has:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Output() uploadFile = new EventEmitter();\n    _uploadFile() {\n    this.uploadFile.emit();\n}\n</code></pre>\n\n<p>The module TS file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    uploadFile() {\n        this.store.dispatch(new PageActions.UploadFile());\n    }\n</code></pre>\n\n<p>The action file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class UploadFile implements Action {\n    readonly type = PageActionTypes.UploadFile;\n    constructor(public payload: File) { }\n}\n</code></pre>\n\n<p>The effects file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Effect()\nuploadFile$: Observable&lt;Action&gt; = this.actions$.pipe(\n    ofType(PACtions.PageActionTypes.UploadFile),\n    map( action =&gt; action.payload ),\n    // ...\n);\n</code></pre>\n\n<p>From a previous SO answer I see this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class AppComponent  {\n  uploadedData: any;\n\n  onChange(event) {\n    const reader = new FileReader();\n    reader.onload = e =&gt; {\n      const raw = (&lt;FileReader&gt;e.target).result as string;\n      const res = JSON.parse(raw);\n      this.uploadedData = res;\n    }\n    reader.readAsText(event.target.files[0]);\n  }\n\n  uploadFile() {\n    console.log(this.uploadedData);\n    // this.store.dispatch(new PageActions.UploadFile(this.uploadedData));\n  }\n\n}\n</code></pre>\n\n<p>How do I get the onChange($event) and uploadedData to fit into my components, effects, and actions files? My component only has @Output ... stuff and the work happens in the effects file.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I have a downloadStateFile like so.</p>\n\n<p>In the component.ts file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Output() downloadStateFile = new EventEmitter();\n    _downloadStateFile() {\n        this.downloadStateFile.emit();\n    }\n</code></pre>\n\n<p>This works fine and is passed to the effects file to do the work:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Effect({ dispatch: false })\n    downloadStateFile$ = this.actions$.pipe(\n       ofType(TheActionTypes.DownloadState),\n       withLatestFrom(this.store.select(fromSpace.getTheState)),\n       tap(([empty, wspace]) =&gt; {\n            console.log(JSON.stringify(wspace));\n\n            // This code below was suggested from the following link:\n            // https://stackoverflow.com/questions/42360665/angular2-to-export-download-json-file\n            var jsonState = JSON.stringify(wspace);\n            const clickElement = document.createElement('a');\n            clickElement.setAttribute('href', \"data:text/json;charset=UTF-8,\" + encodeURIComponent(jsonState));\n            clickElement.setAttribute('download', \"state-file.json\");\n            clickElement.style.display = 'none';\n            document.body.appendChild(clickElement);\n            clickElement.click(); // simulate click\n            document.body.removeChild(clickElement);\n       })\n   );\n</code></pre>\n\n<p>I need the uploadState to do something similar but to take the state in the file and upload the state to the reducer. But first it needs to do all the FileReader in the effect as per the project.</p>\n\n<p><strong>Update #2</strong></p>\n\n<p>I only have one component as the FileUploader component created in your mock doesn't exist in mine so I only have:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"block\"&gt;\n  &lt;label id=\"lbl\"&gt;File &lt;/label&gt;\n  &lt;input #fileInput type='file' (change)=\"_onChange($event)\"/&gt;\n  &lt;button class=\"btn btn-sm\"  (click)=\"_uploadFile()\"&gt;Upload The JSON File&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have this in that .ts file of the html above based on what you provided:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Output() onChange = new EventEmitter();\n    _onChange(event) {\n        this.onChange.emit(event.target.files[0]);\n    }\n</code></pre>\n\n<p>In your code there is a second layer that is in readFile that passes in the inputFile payload. How do I add that to my above update? Thanks for your help.</p>\n"}, {"tags": ["typescript", "union-types"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 3736239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9c083a66a74c166d019192bc85cc78d8?s=128&d=identicon&r=PG&f=1", "display_name": "stuffy", "link": "https://stackoverflow.com/users/3736239/stuffy"}, "edited": false, "score": 0, "creation_date": 1567628358, "post_id": 57780278, "comment_id": 102023387, "body": "Your workaround works, thanks! AFAICT this is a new compiler bug, so I&#39;ve filed <a href=\"https://github.com/microsoft/TypeScript/issues/33243\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/33243</a> and referenced this answer."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1567559772, "last_edit_date": 1567559772, "creation_date": 1567559241, "answer_id": 57780278, "question_id": 57780109, "link": "https://stackoverflow.com/questions/57780109/union-of-partial-types-in-typescript-cant-be-type-narrowed/57780278#57780278", "title": "Union of partial types in Typescript can&#39;t be type-narrowed", "body": "<p>I don't have a great insight into why the compiler doesn't understand your <code>PartialEither</code> type; it's not unprecedented that there be gaps like this involving intersections and mapped types, like <a href=\"https://github.com/microsoft/TypeScript/issues/18538\" rel=\"nofollow noreferrer\">microsoft/TypeScript#18538</a>... not that this is exactly that issue.  Anyway my intuition here is that whatever the problem is more like a bug/design limitation in TypeScript and less like a problem with your code.  Not sure if there's an existing issue covering this or if you'd like to open one.</p>\n\n<hr>\n\n<p>Still, if I wanted to proceed here, I'd try to turn <code>PartialEither</code> into the simplest type I could... a union of object types with no intersections.  One way to do this is with a utility type I call <code>Expand</code>:</p>\n\n<pre><code>type Expand&lt;T&gt; = T extends infer O ? { [K in keyof O]: O[K] } : never;\n</code></pre>\n\n<p>This will turn intersections of concrete object types into single object types (so <code>{a: string} &amp; {b: number}</code> will become <code>{a: string; b: number}</code>) and also works on unions.  It doesn't recurse down into the object properties; one can write an <code>ExpandRecursive</code> that does that, but we don't need it.</p>\n\n<p>Then we can do this:</p>\n\n<pre><code>export type PartialEither = Expand&lt;PartialKey | PartialKeyValue&gt;;\n</code></pre>\n\n<p>and see that the observed type of <code>PartialEither</code> in IntelliSense is now:</p>\n\n<pre><code>type PartialEither = {\n    type: \"key\";\n    key: string;\n} | {\n    type: \"key-value\";\n    key: string;\n    value?: string | undefined;\n}\n</code></pre>\n\n<p>And when you do that your errors go away.  That would be my suggestion.</p>\n\n<hr>\n\n<p>Back to the \"this seems like a bug or design limitation in TypeScript\" topic:</p>\n\n<p>Note that the compiler <em>does</em> think that <code>PartialKey | PartialKeyValue</code> and <code>Expand&lt;PartialKey | PartialKeyValue&gt;</code> are mutually assignable types, or the following would be an error:</p>\n\n<pre><code>type MutuallyAssignable&lt;T extends U, U extends V, V = T&gt; = true;\ntype Okay = MutuallyAssignable&lt;PartialKey | PartialKeyValue, PartialEither&gt;; // no error\n</code></pre>\n\n<p>But when it comes to assigning values of type <code>Common</code> to them, the compiler is happy with one and upset with the other:</p>\n\n<pre><code>function hmm(common: Common) {\n  let nope: PartialKey | PartialKeyValue = common; // error\n  let yep: PartialEither = common; // okay\n  yep = nope; // okay also \ud83e\udd14\n}\n</code></pre>\n\n<p>So there's definitely something a bit screwy in the compiler's type analysis here.  If I find out more (like an existing issue about this) I'll update; otherwise... good luck!</p>\n\n<p>UPDATE: This <em>may</em> be related to <a href=\"https://github.com/microsoft/TypeScript/issues/19927\" rel=\"nofollow noreferrer\">microsoft/TypeScript#19927</a>, not sure.  I do see that your <code>PartialEither</code> has <code>Pick&lt;Key, never&gt;</code> in there, but I can't tell if it's the same issue or not  \ud83e\udd37</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgaWAE84BvAWACg44YixgAuOAIgGtiWBuKmjo5gGcYUZAHMelAL5UqoSLEQo0WXAWIA1TABsArngrVa9Jq34BaAG4793XnH5CR4yTWt7Tw0UglUZlOXBoeDoGOABRBBgACzQ4AF51EgAfJK0PSUCFEJM4AGEIAFtCiCQEuAAFBGw2AB5ImLQAGlZQ4BY4VPZOAD5Myja4AH0KzFgEHQbYqFqAFThQVCQAE0EIqOme8qqauZaWNo6u-hYtgDJ7UfGdWoB5Qqi91pMjs16+2Up5YOMwq5gJtpCCREiMxgDJhs0LVgR8vkFFIN-oDgel9OUwddtFNoaibMA4VRBuFwJgVnMtol5otgCs1sh0HFbnAAPxkOAAbXwSgcxAg6DgtwAusxblyhXApHBmEhgJY0JJvojcsjIY0oOUSWAyctaqqgcROpVwSjNPjCQNcgBZXQwXQ6bREACCgkECDESEwACNtMA5gsQEtVnAAKotEMBoNrDQtDTlWaU2hQfSSQa3NiYEFwG12h3O13uz0+v364FG0tmjwtfU4qAW9C6JDYAGlODRYoACmwRRKSGYBWKpQAlGR7L74EgIAxmBWUsasXiPOVu4OkFw4AB6DcLKBQaBj4DwIjAMAzk1q6bLnulddbuAQDNEezHsDlScMW-bh+ZuA6QQQOBAD4NwAUXb8T4lXgbskGEfJrzKRJDBoGAIAAZWcHxmA7UhfmAFp+Elfs4KHJxvDEBItiQXRtG0X81jJIgmnsdA90KNDSMwwQSPEYjYNXci4Eo6jaN-JAn2kfooJg7AHS9HA2EwywzyxWsR3iLZLAgBBljfKiaMwOjRMkaTqNkmoOwHXsADpmKKNjxA7FgWCHIcJNKGDgChKAlIhbFPJ0oT9JEohJAQAUOw89VLMGeIYreIgrHxJzRyMCLpks9wUzAyggA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 303, "user_id": 3736239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9c083a66a74c166d019192bc85cc78d8?s=128&d=identicon&r=PG&f=1", "display_name": "stuffy", "link": "https://stackoverflow.com/users/3736239/stuffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "accepted_answer_id": 57780278, "answer_count": 1, "score": 0, "last_activity_date": 1567559772, "creation_date": 1567557118, "question_id": 57780109, "link": "https://stackoverflow.com/questions/57780109/union-of-partial-types-in-typescript-cant-be-type-narrowed", "title": "Union of partial types in Typescript can&#39;t be type-narrowed", "body": "<p>I have a union type that represents a piece of data that a user can construct using form fields. The basic flow is that the user picks the kind of thing they want to make, then I present the proper UI, and as they edit form fields I update the stored object. The in-progress object is represented as a Partial-ized version of the union type, depending on the type of thing the user chose to make. There are two ways that I'd like to refer to the Partial-ized type, but both have problems.</p>\n\n<p>The code snippet can explain more, but basically, the signature of the callback and the type guard are two ways I'd like to refer to the in-progress value. In both schemes I've come up with to define a Partial-ized union type, one of the two use-cases fails to compile.</p>\n\n<p>It seems like variant one is more correct and precise, so I'm surprised that it fails to compile properly. I'd like to avoid casting if at all possible, in order to make this code as robust as possible to adding more members to the union type.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface Key {\n  type: \"key\";\n  key: string;\n}\n\nexport interface KeyValue {\n  type: \"key-value\";\n  key: string;\n  value: string;\n}\n\nexport type Either = Key | KeyValue;\n\nexport type Common = Pick&lt;Either, \"type\" | \"key\"&gt;;\nexport const Common = {\n  toString: ({ type, key }: Common): string =&gt; null as any,\n  fromString: (s: string): Common =&gt; null as any,\n};\n\n// USE CASE 1: This does not work when using variant one, below.\n\nconst callback: (v: PartialEither) =&gt; void = null as any;\ncallback(Common.fromString(\"\"));\n\n// USE CASE 2: This does not work when using variant two, below.\n// This makes sense, since variant two's definition drops the relationship between `type` \n// and the corresponding object shape, so type narrowing can't work.\n\nconst either: PartialEither = null as any;\nif (either.type === \"key-value\") {\n  either.value;\n}\n\n// VARIANT ONE\n// Comment this out and replace it with variant two to see the errors change, above.\n\n// Using this intermediate type so I can still rely on 'type' as the discriminant property of\n// the PartialEither type.\ntype _PartialEither&lt;T extends Either&gt; = Pick&lt;T, \"type\" | \"key\"&gt; &amp; Partial&lt;Omit&lt;T, \"type\" | \"key\"&gt;&gt;;\n\nexport type PartialKey = _PartialEither&lt;Key&gt;;\nexport type PartialKeyValue = _PartialEither&lt;KeyValue&gt;;\n\nexport type PartialEither = PartialKey | PartialKeyValue;\n\n// VARIANT TWO\n// Uncomment this out replace variant one with it to see the errors change, above.\n\n// type PartialEither = Pick&lt;Either, \"type\" | \"key\"&gt; &amp; Partial&lt;Omit&lt;Either, \"type\" | \"key\"&gt;&gt;\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgaWAE84BvAWACg44YixgAuOAIgGtiWBuKmjo5gGcYUZAHMelAL5UqoSLEQo0WXAWIA1TABsArngrVa9Jq34BaAG4793XnH5CR4yTWt7Tw0UglUZlOXBoeDoGOABRBBgACzQ4AF51EgAfJK0PSUCFEJM4AGEIAFtCiCQEuAAFBGw2AB5ImLQAGlZQ4BY4VPZOAD5JeWC4bFLhfKKSssTDGhgIAGVnH2YAClJjBhb+OClmAuLSgEonbzEEnrgkXW1tOExBW6QiJvt0KCKFk5XBY-Ejsf3JudLtdbvdMI9ntJMpQAPQwuAAVTm4XyAEFkXAAIzMAAq0QQ9wAJhBgPckBB4AB3aBsOCU2JlXSCcRwayicHwUrAFoAI2A2gglIAdLJKMMkKNsDptDycGwVpZmBVMLAEDoGrEoAczqyIAhCeVgTc7g8iJIpddZTVlnsJkLXu9FmJliwWAcDtC4YiMXl0SiAEy4-FEklkil0ml0hlwJkstlqlC0am8-mCkWw+F4glwQqYDj3QTACXcuDMpBqeMcpMQADkROA6GQUQQpTghLeYHujTgUH5mBgLYl+LAcD5MEpwCLcAABm1p3AqF7wQbu8MoL3BJAkISWRAeQArYDYeCCaKYDaliDrPBIFVvSksqVIGtUmnpqji0bAKKapUqgfqj+cSJEaoKmpICDoHAyzfo0UBCm0CTxIk3REFYNjtNq0xwLBmpCu4+iSP4i7whoqIAEoAJKogAcjicAAPI0eEJH-IURYhMGcAQLo8DLj2wBgNoOB4FEdI-qyKoJiE1K0FehZ4N2aBvFA9zYGePglpgPIQJYwDvhmiJlqcMTZsgqBQOxO79opuSCFelFDOCpYDiCvbaCQrYviYNZgd2O6CNgoiFMgVZgB2aB0Nx6Csd2yqqoBcHXumiEAPrxQB2gamgtT0aAqDbvc2VQOciRVDUuUtCwbQdF0-AsOcABklT-mq2i1AxIUwJVrQmLVZi9H0ooDIoiEZW1hAkIk6WtYlmq1JNQ2UCNORhONOiTek+jlDNCVZUBUALZoGFLVkgxjbN+1JWVl2TZ0LV7ZtGGeqRFHUXRcA4gA6gxrEIuW4wcbQXE8fAvZCSJknsomXLiTEiAhPJk7A3gynQGpGliFpOl6QZXoXXtxXlOVdTFVVNX3ahDVwM163tZ1UT1Ad5N9ZT9U9D0QA\" rel=\"nofollow noreferrer\">(playground link)</a></p>\n"}, {"tags": ["angular", "typescript", "angular-material", "hammer.js"], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 12272930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6O8Qr.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/12272930/valentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1572268146, "last_edit_date": 1572268146, "creation_date": 1571994064, "answer_id": 58555357, "question_id": 57779933, "link": "https://stackoverflow.com/questions/57779933/performing-a-fast-swipe-causes-button-to-not-react-to-first-click/58555357#58555357", "title": "Performing a fast swipe causes button to not react to first click", "body": "<p>I encountered a similar problem. The solution might be also fitting for you.\nIf you swipe, this swipe performs also a click event forcing to focus the view on the right side.\nIf you click on 'Musik' in your example, the click is performing some sort of 'leave focus' from the right view to focuse the 'Musik'-button.\nYou could try preventing the click due to the swiping movement.\nI know it's from AngularJs but it should work similiar.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div ng-swipe-left=\"swipeFunc(); swiping=true;\" ng-click=\"swiping ? ( swiping = false ) : clickFunc();\"&gt;\n  ...\n&lt;/div&gt;\n</code></pre>\n\n\n\n<p><a href=\"https://stackoverflow.com/a/26678062/12272930\">See the this answer on stackoverflow</a><br>\nLet me know if that helped in your case.</p>\n"}], "owner": {"reputation": 376, "user_id": 8004636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qG49A.jpg?s=128&g=1", "display_name": "lorenzw", "link": "https://stackoverflow.com/users/8004636/lorenzw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 58555357, "answer_count": 1, "score": 2, "last_activity_date": 1572268146, "creation_date": 1567555157, "question_id": 57779933, "link": "https://stackoverflow.com/questions/57779933/performing-a-fast-swipe-causes-button-to-not-react-to-first-click", "title": "Performing a fast swipe causes button to not react to first click", "body": "<p>I am building an angular application, with a responsive navigation using the angular navbar. To let the navigation feel really smooth i use hammer to enable swiping right to show, and swiping left to hide the menu. </p>\n\n<p>However, when the swiping to the right is performed fast (not super fast, but normal speed on a smartphone), the navigation buttons don't react to the first click on them, but only to the second. </p>\n\n<p>If the swipe is executed slowly the buttons work as intended. If toggled by the menu toggle button it also works as intended.</p>\n\n<p>Example gif (first slow, then fast):\n<a href=\"https://i.stack.imgur.com/c2bYe.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c2bYe.gif\" alt=\"\"></a></p>\n\n<p>This bug does NOT occure if you just resize the browser windows. Only if you use \"toggle device toolbar\" in chrome and select a device\" and on my android 9 device with chrome for android.</p>\n\n<p>the app.component.html:</p>\n\n<pre><code>&lt;mat-sidenav-container&gt;\n  &lt;mat-sidenav #sidenav fxLayout=\"column\" mode=\"side\" opened=\"false\" class=\"hidelarge sidenav\"&gt;\n    &lt;mat-nav-list fxLayout=\"column\"&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/home', 'link': true}\"\n        [routerLink]=\"['/home']\"&gt;Home&lt;/a&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/maturanten', 'link': true}\"\n        [routerLink]=\"['/maturanten']\"&gt;Maturanten&lt;/a&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/fotos', 'link': true}\"\n        [routerLink]=\"['/fotos']\"&gt;Fotos&lt;/a&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/musik', 'link': true}\"\n        [routerLink]=\"['/musik']\"&gt;Musik&lt;/a&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/raumaufteilung', 'link': true}\"\n        [routerLink]=\"['/raumaufteilung']\"&gt;Raumaufteilung&lt;/a&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/ballordnung', 'link': true}\"\n        [routerLink]=\"['/ballordnung']\"&gt;Ballordnung&lt;/a&gt;\n      &lt;a href=\"#\" mat-button (click)=\"sidenav.toggle()\" class=\"navtext\" [ngClass]=\"{'linkactive': router.url=='/kontakt', 'link': true}\"\n        [routerLink]=\"['/kontakt']\"&gt;Kontakt&lt;/a&gt;\n    &lt;/mat-nav-list&gt;\n  &lt;/mat-sidenav&gt;\n  &lt;mat-sidenav-content fxFlexFill  (swiperight)=\"sidenav.open()\" (swipeleft)=\"sidenav.close()\" &gt;\n    &lt;app-header (navToggle)=\"sidenav.toggle()\"&gt;\n\n    &lt;/app-header&gt;\n    &lt;main class=\"minheight\"&gt;\n      &lt;router-outlet&gt;&lt;/router-outlet&gt;\n    &lt;/main&gt;\n    &lt;app-footer&gt;\n\n    &lt;/app-footer&gt;\n\n  &lt;/mat-sidenav-content&gt;\n&lt;/mat-sidenav-container&gt;\n</code></pre>\n\n<p>And in my app.module.ts:</p>\n\n<pre><code>...\nexport class MyHammerConfig extends HammerGestureConfig {\n  overrides = &lt;any&gt;{\n    // override hammerjs default configuration\n    'swipe': { direction: Hammer.DIRECTION_HORIZONTAL },\n    'pinch': { enable: false },\n    'rotate': { enable: false },\n    'pan': { enable: false },\n    'tap': { enable: false },\n    'press':{enable:false},\n    'doubletap':{enable:false},\n  };\n}\n...\nproviders: [\n    { provide: HAMMER_GESTURE_CONFIG, useClass: MyHammerConfig }\n  ],\n...\n</code></pre>\n\n<p>I importet hammer in my main.ts file like this:</p>\n\n<pre><code>import 'hammerjs';\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "firebase", "google-cloud-functions", "stripe-payments"], "comments": [{"owner": {"reputation": 3422, "user_id": 1737658, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcUX4.jpg?s=128&g=1", "display_name": "Paul Asjes", "link": "https://stackoverflow.com/users/1737658/paul-asjes"}, "edited": false, "score": 0, "creation_date": 1567564682, "post_id": 57779826, "comment_id": 101996018, "body": "Are you getting an error back from Stripe or from your <code>getidFile</code> function?"}, {"owner": {"reputation": 1333, "user_id": 11641073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9327fce3468b76c66ffa95eb1c9eb39?s=128&d=identicon&r=PG&f=1", "display_name": "bhito", "link": "https://stackoverflow.com/users/11641073/bhito"}, "edited": false, "score": 0, "creation_date": 1567582517, "post_id": 57779826, "comment_id": 102000822, "body": "According to the <a href=\"https://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options\" rel=\"nofollow noreferrer\">docs</a>: <code>Modifying a file rather than replacing it may require a flags mode of r+ rather than the default mode w</code>. This could be the root of the issue if you are getting the error in here <code>fs.createWriteStream(&quot;test.jpg&quot;);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 11510697, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zoU4vyQIjoM/AAAAAAAAAAI/AAAAAAAAAMA/mHKCkOYrzvw/photo.jpg?sz=128", "display_name": "mario francois", "link": "https://stackoverflow.com/users/11510697/mario-francois"}, "is_accepted": false, "score": 0, "last_activity_date": 1602234710, "creation_date": 1602234710, "answer_id": 64277054, "question_id": 57779826, "link": "https://stackoverflow.com/questions/57779826/download-file-from-firebase-and-upload-to-stripe-for-id-verification/64277054#64277054", "title": "Download file from firebase and upload to stripe for id verification", "body": "<p>I don't use URL. Use admin.storage() to access your file.</p>\n<pre><code>\nexport const uploadFileToStripe = functions.https.onCall(async(data,context)=&gt;{\n\n  const bucket = admin.storage().bucket('xyz.appspot.com');\n  const path = require('path');\n  const os = require('os');\n  const fs = require('fs');\n  const fileName = data['fileName'];\n  const tempFilePath = path.join(os.tmpdir(), fileName);\n  await bucket.file(fileName).download({destination:tempFilePath});\n\n  console.log('File created at', tempFilePath);\n\n  return await stripe.files.create({\n    purpose: 'identity_document',\n    file: {\n      data: fs.readFileSync(tempFilePath),\n      name: 'fileUploadDoc.png',\n      type: 'application/octet-stream',\n    },\n  });\n});\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 7452258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccb00d3dae7a02241e7d0d4ea7f0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Thomas", "link": "https://stackoverflow.com/users/7452258/evan-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1602234710, "creation_date": 1567553915, "question_id": 57779826, "link": "https://stackoverflow.com/questions/57779826/download-file-from-firebase-and-upload-to-stripe-for-id-verification", "title": "Download file from firebase and upload to stripe for id verification", "body": "<p>Im trying to get a id jpeg that i have stored in firebase storage and upload it to stripe in order to allow my customers to verify their identity. However i get several errors and the function stops</p>\n\n<pre><code>import * as https from 'https'\n    import * as fs from 'fs'\n    const stripe = Stripe('sk_test');\n\n    function getidFile(url: string):Promise&lt;any&gt;{\n        return new Promise((resolve,reject) =&gt; {\n            const file = fs.createWriteStream(\"test.jpg\");\n            https.get(\n                url,\n                function(response: IncomingMessage){\n                    console.log('Response ', response);\n                    response.pipe(file);\n                    file.on('finish', function() {\n                        file.close();\n                        resolve(file);\n                    });\n                }\n            ).on('error', function(err) { // Handle errors\n                reject(err);\n            });\n        });\n    }\n\n    function uploadFileToStripe(fileUrl:string,fileType:string,fileName:string):Promise&lt;any&gt;{\n        return getidFile(\n            fileUrl\n        ).then(\n            (data:any) =&gt; {\n                console.log('File as blob ', data);\n                const upload: Promise&lt;any&gt; = \n                stripe.files.create(\n                    {\n                        file: {\n                            data: data,\n                            name: fileName,\n                            type: 'image/jpeg',\n                        },\n                        purpose: 'identity_document',\n                    }\n                );\n                return upload.then(\n                    (document: any) =&gt; {\n                        console.log('Document upload ', document);\n                        return document;\n                    }   \n                ).catch(\n                    (_error: any) =&gt; {\n                        console.log('Error uploading document ', _error);\n                        return _error;\n                    }\n                )\n            }\n        ).catch(\n            (_error:any) =&gt; {\n                console.log('Error with response ', _error);\n                return _error;\n            }\n        );\n    }\n</code></pre>\n\n<p>Error: EROFS: read-only file system, open 'test.jpg'\nand then my function stops.</p>\n"}, {"tags": ["angular", "typescript", "google-maps"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 0, "creation_date": 1567567382, "post_id": 57779760, "comment_id": 101996428, "body": "Hi @malbarmawi ! implement ngAfterViewInit but it also doesn&#39;t work and shows the same error.."}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 0, "creation_date": 1567576811, "post_id": 57779760, "comment_id": 101998429, "body": "The other problem is this <code>*ngIf=&quot;mapVisibility === &#39;visible&#39;&quot;</code> when this will be true"}, {"owner": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 0, "creation_date": 1567602167, "post_id": 57779760, "comment_id": 102011194, "body": "What alternative do you propose?"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 0, "creation_date": 1567602877, "post_id": 57779760, "comment_id": 102011647, "body": "you can just hide the elment *ngIf remove it  try this <code>[ngStyle]={display : mapVisibility !== &#39;visible&#39; ? &#39;none&#39; : &#39;initial &#39; }</code>"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 1, "creation_date": 1567603040, "post_id": 57779760, "comment_id": 102011752, "body": "or you can use <code>hidden</code> \ud83d\udc49 <a href=\"https://stackoverflow.com/questions/35578083/what-is-the-equivalent-of-ngshow-and-nghide-in-angular-2\" title=\"what is the equivalent of ngshow and nghide in angular 2\">stackoverflow.com/questions/35578083/&hellip;</a>"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "reply_to_user": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 0, "creation_date": 1567606412, "post_id": 57779760, "comment_id": 102013736, "body": "@AguFortini I have update the answer , and check this <a href=\"https://stackblitz.com/edit/angular-viewchild-hidden\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-viewchild-hidden</a>"}, {"owner": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "edited": false, "score": 0, "creation_date": 1567619890, "post_id": 57779760, "comment_id": 102020356, "body": "It worked as implemented in the link [hidden] . It was not necessary to add the ngAfterViewInit, only with the OnInit it works fine!"}], "tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": true, "score": 0, "last_activity_date": 1567606350, "last_edit_date": 1567606350, "creation_date": 1567553267, "answer_id": 57779760, "question_id": 57779699, "link": "https://stackoverflow.com/questions/57779699/error-error-uncaught-in-promise-typeerror-cannot-read-property-nativeeleme/57779760#57779760", "title": "ERROR Error: Uncaught (in promise): TypeError: Cannot read property &#39;nativeElement&#39; of undefined", "body": "<p>use ngAfterViewInit instead of ngOnInit </p>\n\n<pre><code>ngAfterViewInit () {\n    this.getPlacesAutocomplete();\n}\n</code></pre>\n\n<blockquote>\n  <p>View queries are set before the ngAfterViewInit callback is called.</p>\n</blockquote>\n\n<p>you need the change the <code>*ngIf</code> to <code>hidden</code> this way the elemnt will be avilable otherwise the <code>searchElementRef</code> will be null until the condition is true </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div [hidden]=\"mapVisibility === 'visible'\"&gt;\n ...\n&lt;/div&gt;\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1567607671, "post_id": 57790459, "comment_id": 102014493, "body": "but in both case the searchElementRef  will be null untill the condtion is true , check the template   <code>&lt;div *ngIf=&quot;mapVisibility === &#39;visible&#39;&quot;&gt;</code> \ud83e\udd14"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1567607813, "post_id": 57790459, "comment_id": 102014590, "body": "I think if he use hidden will solve the problem , I have already tested \ud83d\ude00"}], "tags": [], "owner": {"reputation": 4141, "user_id": 3151567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w2uaa.jpg?s=128&g=1", "display_name": "Abderrahim Soubai-Elidrisi", "link": "https://stackoverflow.com/users/3151567/abderrahim-soubai-elidrisi"}, "is_accepted": false, "score": 0, "last_activity_date": 1567606798, "creation_date": 1567606798, "answer_id": 57790459, "question_id": 57779699, "link": "https://stackoverflow.com/questions/57779699/error-error-uncaught-in-promise-typeerror-cannot-read-property-nativeeleme/57790459#57790459", "title": "ERROR Error: Uncaught (in promise): TypeError: Cannot read property &#39;nativeElement&#39; of undefined", "body": "<p>Call your function after the Component is initialized (DOM Loaded) on <code>ngAfterViewInit</code></p>\n\n<pre><code>ngAfterViewInit() {\n    this.getPlacesAutocomplete();\n}\n</code></pre>\n\n<p>Or surround your code on setTimeout (Bad idea) : </p>\n\n<pre><code>ngOnInit() {\n\nsetTimeout( _ =&gt;   this.getPlacesAutocomplete() , 1000)\n\n}\n</code></pre>\n\n<p>if you are using <code>ngAfterViewInit</code> don't forget <code>class MyComponent implements AfterViewInit</code></p>\n"}], "owner": {"reputation": 83, "user_id": 9947858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4c51de5fedf344eac4cb4266840830?s=128&d=identicon&r=PG&f=1", "display_name": "Agu Fortini", "link": "https://stackoverflow.com/users/9947858/agu-fortini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 0, "accepted_answer_id": 57779760, "answer_count": 2, "score": 1, "last_activity_date": 1567606798, "creation_date": 1567552539, "question_id": 57779699, "link": "https://stackoverflow.com/questions/57779699/error-error-uncaught-in-promise-typeerror-cannot-read-property-nativeeleme", "title": "ERROR Error: Uncaught (in promise): TypeError: Cannot read property &#39;nativeElement&#39; of undefined", "body": "<p>I am getting the following error: ERROR Error: Uncaught (in promise): TypeError: Cannot read property 'nativeElement' of undefined.</p>\n\n<p>This occurs when I try to add a div with an ngIf and inside a google map:</p>\n\n<p>HTML:</p>\n\n<pre><code>                &lt;div class=\"form-group\"&gt;\n                &lt;label&gt;Location by map?&lt;/label&gt;\n                &lt;mat-select formControlName=\"ubication\" [(ngModel)]=\"mapVisibility\" class=\"form-control\" placeholder=\"Select option\"&gt;\n                    &lt;mat-option disabled&gt;Select option&lt;/mat-option&gt;\n                    &lt;mat-option value=\"visible\"&gt;Yes&lt;/mat-option&gt;\n                    &lt;mat-option value=\"hidden\"&gt;No&lt;/mat-option&gt;\n                &lt;/mat-select&gt;\n            &lt;/div&gt;\n\n            &lt;div *ngIf=\"mapVisibility === 'visible'\"&gt;\n                &lt;div class=\"example-form\"&gt;\n                    &lt;mat-form-field class=\"example-full-width\"&gt;\n                        &lt;input matInput type=\"text\" (keydown.enter)=\"$event.preventDefault()\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"off\" #agmSearch placeholder=\"Enter address\"&gt;\n                    &lt;/mat-form-field&gt;\n                &lt;/div&gt;\n\n                &lt;agm-map id=\"googleMap\" [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\"&gt;\n                    &lt;agm-marker [latitude]=\"lat\" [longitude]=\"lng\" [markerDraggable]=\"true\" (dragEnd)=\"markerDragEnd($event)\"&gt;&lt;/agm-marker&gt;\n                &lt;/agm-map&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>TS:</p>\n\n<pre><code>mapVisibility: string;\n\nngOnInit() {\n    this.getPlacesAutocomplete();\n}\n\ngetPlacesAutocomplete() {\n// load Places Autocomplete\nthis.mapsAPILoader.load().then(() =&gt; {\nthis.setCurrentLocation();\nthis.geoCoder = new google.maps.Geocoder;\n\nlet autocomplete = new google.maps.places.Autocomplete(this.searchElementRef.nativeElement, {\n  types: ['address']\n});\nautocomplete.addListener('place_changed', () =&gt; {\n  this.ngZone.run(() =&gt; {\n  // get the place result\n  let place: google.maps.places.PlaceResult = autocomplete.getPlace();\n\n  // verify result\n  if (place.geometry === undefined || place.geometry === null) {\n    return;\n  }\n\n  // set latitude, longitude and zoom\n  this.lat = place.geometry.location.lat();\n  this.lng = place.geometry.location.lng();\n  this.zoom = 12;\n  });\n });\n});\n}\n\nprivate setCurrentLocation() {\nif ('geolocation' in navigator) {\n  navigator.geolocation.getCurrentPosition((position) =&gt; {\n    this.lat = position.coords.latitude;\n    this.lng = position.coords.longitude;\n    this.zoom = 15;\n    this.getAddress(this.lat, this.lng);\n  });\n}\n}\n\n  getAddress(latitude, longitude) {\nthis.geoCoder = new google.maps.Geocoder();\nthis.geoCoder.geocode({ 'location': { lat: latitude, lng: longitude } }, (results, status) =&gt; {\n  console.log(results);\n  if (status === 'OK') {\n    if (results[0]) {\n      this.zoom = 12;\n      this.address = results[0].address_components[1].long_name + ' ' + results[0].address_components[0].long_name;\n    } else {\n      window.alert('No results found');\n    }\n  } else {\n    window.alert('Geocoder failed due to: ' + status);\n  }\n});\n}\n</code></pre>\n\n<p>I extracted the code from here: <a href=\"https://www.freakyjolly.com/angular-7-6-add-google-maps-in-angular-2-plus-applications-using-angular-google-maps-module-agm-core-easily/\" rel=\"nofollow noreferrer\">Angular 8/7 | Add Google Maps with Location Search in Angular 2 plus Applications using Angular Google Maps Module (@agm/core) Easily</a></p>\n\n<p>ERROR:\n<a href=\"https://i.stack.imgur.com/Jwr3l.png\" rel=\"nofollow noreferrer\">Image error</a></p>\n\n<p>Although I get this error, the map works fine, but I cannot implement the search for places by entering an address in an input, which does work if I remove the div that contains the ngIf. what is this about?\nAny ideas?</p>\n"}, {"tags": ["reactjs", "typescript", "react-hooks", "office-ui-fabric"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567552894, "post_id": 57779340, "comment_id": 101994187, "body": "Thanks for the reply! changing onChange to onChanged and revising the events handler displays [object Object ] in the console log and not one of the option &#39;A&#39; or &#39;B;&#39; ."}, {"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "reply_to_user": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567552952, "post_id": 57779340, "comment_id": 101994195, "body": "You&#39;re welcome :) - just updated answer. Does that help?"}, {"owner": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567554525, "post_id": 57779340, "comment_id": 101994426, "body": "Thanks ! This worked. Can you help me understand what this line does selectedOption =&gt;{               setOption(selectedOption.text);?"}, {"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "reply_to_user": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "edited": false, "score": 0, "creation_date": 1567555185, "post_id": 57779340, "comment_id": 101994529, "body": "@novice_coder you&#39;re welcome, just expanded the answer - hope that helps :)"}], "tags": [], "owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "is_accepted": true, "score": 0, "last_activity_date": 1567555166, "last_edit_date": 1567555166, "creation_date": 1567548918, "answer_id": 57779340, "question_id": 57779298, "link": "https://stackoverflow.com/questions/57779298/how-do-i-get-the-option-selected-by-a-user-using-the-dropdown-button-to-operate/57779340#57779340", "title": "How do i get the option selected by a user using the Dropdown button to operate on?", "body": "<p>The <code>office-ui-fabric</code> <code>Dropdown</code> component triggers change events via the <a href=\"https://unpkg.com/office-ui-fabric-react@0.22.1/index.html#/examples/dropdown\" rel=\"nofollow noreferrer\"><code>onChanged</code></a> prop which when invoked, passes the actual option object underlying the drop down item that has been selected by the user.</p>\n\n<p>By changing <code>onChange</code> to <code>onChanged</code>, and then revising this events handler to read the <code>text</code> of the selected option (rather than <code>value</code> of the <code>event.target</code>) that should produce the required result:</p>\n\n<pre><code>&lt;Dropdown placeholder=\"Select option\" \n          options={Options} \n          styles={dropdownStyles} \n          selectedKey={selectedItem} \n          onChanged={ selectedOption =&gt;{\n              setOption(selectedOption.text);\n              console.log(\"Selected\", selectedOption.text);\n          }}/&gt;   \n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>This: <code>setOption(selectedOption.text);</code> calls the <code>setOption()</code> function, and passes the display value of the option selected by the user to it. When calling <code>setOption()</code>, this updates the stat <code>selectedItem</code> state of the component with the value that is passed (ie the display value of the selected option). Note that a side effect of calling <code>setOption()</code> is that a re-render of the component will occour, meaning that parts of your component displaying/relying on <code>selectedItem</code> will be automatically updated, etc.</p>\n"}], "owner": {"reputation": 89, "user_id": 9366727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3396e2be06f7cc2110cc96612b105a?s=128&d=identicon&r=PG&f=1", "display_name": "novice_coder", "link": "https://stackoverflow.com/users/9366727/novice-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1390, "favorite_count": 0, "accepted_answer_id": 57779340, "answer_count": 1, "score": 1, "last_activity_date": 1567555166, "creation_date": 1567548576, "question_id": 57779298, "link": "https://stackoverflow.com/questions/57779298/how-do-i-get-the-option-selected-by-a-user-using-the-dropdown-button-to-operate", "title": "How do i get the option selected by a user using the Dropdown button to operate on?", "body": "<p>I am new to react and office-ui-fabric and I am trying to create a VSCode Extension takes certain input parameters and based on the input the user selects, I should be operating on the option selected. I take the user input in the form of options under dropdown button. Currently once the user selects one of the options from the dropdown i do not see the option selected in the dropdown.I see only undefined being displayed in the console.</p>\n\n<p>I have tried different ways of getting this input parameters from the user but i still end up with undefined being show in the console.</p>\n\n<pre><code>const Options: IDropdownOption[] = [\n        { key: 'A', text: 'A', itemType: DropdownMenuItemType.Header },\n        { key: 'B', text: 'B' },\n        { key: 'C', text: 'C' },\n        ];\n\nconst [selectedItem, setOption] = React.useState&lt;string | undefined&gt;(undefined);\n\nreturn (\n        &lt;div&gt;\n      &lt;Dropdown placeholder=\"Select option\" options={Options} styles={dropdownStyles} selectedKey={selectedItem} onChange={event =&gt;{\n                              setOption((event.target as HTMLInputElement).value);console.log(selectedItem)}}  /&gt;   \n )                          \n</code></pre>\n\n<p>windows.console should show me the input the user selects whereas currently i see undefined</p>\n"}, {"tags": ["node.js", "typescript", "eslint"], "answers": [{"comments": [{"owner": {"reputation": 1069, "user_id": 3478726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PhuQS.jpg?s=128&g=1", "display_name": "Kannan T", "link": "https://stackoverflow.com/users/3478726/kannan-t"}, "edited": false, "score": 0, "creation_date": 1594967558, "post_id": 58406349, "comment_id": 111316885, "body": "&quot;lint-staged&quot;: {     &quot;src/**/*.{js,jsx}&quot;: [       &quot;eslint . --fix&quot;,       &quot;prettier --write&quot;,       &quot;git add&quot;     ]   }                                                                                                                                                                 I have this but still not working why"}], "tags": [], "owner": {"reputation": 415, "user_id": 3305924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a776c4bb2ce7d9f8d0877cd9aae4b5?s=128&d=identicon&r=PG", "display_name": "Perttu Haliseva", "link": "https://stackoverflow.com/users/3305924/perttu-haliseva"}, "is_accepted": true, "score": 3, "last_activity_date": 1571204059, "creation_date": 1571204059, "answer_id": 58406349, "question_id": 57779069, "link": "https://stackoverflow.com/questions/57779069/lint-staged-cant-find-staged-files-matching-glob/58406349#58406349", "title": "Lint-staged can&#39;t find staged files matching glob", "body": "<p>Spaces after commas can break the globs - try removing them:</p>\n\n<pre><code>\"*.{js,jsx,ts,tsx,md,html}\"\n</code></pre>\n"}], "owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2205, "favorite_count": 1, "accepted_answer_id": 58406349, "answer_count": 1, "score": 1, "last_activity_date": 1571204059, "creation_date": 1567546853, "question_id": 57779069, "link": "https://stackoverflow.com/questions/57779069/lint-staged-cant-find-staged-files-matching-glob", "title": "Lint-staged can&#39;t find staged files matching glob", "body": "<p>I'm working with NodeJS Typescript and I wanted to set <code>lint-staged</code> to validate my files before commit but it is not working. I added from a guide as following:</p>\n\n<pre><code>\"husky\": {\n    \"hooks\": {\n      \"pre-commit\": \"lint-staged\"\n    }\n  },\n  \"lint-staged\": {\n    \"*.{js, jsx, ts, tsx, md, html}\": [\n      \"eslint --fix\",\n      \"prettier --write\",\n      \"git add\"\n    ]\n  }\n</code></pre>\n\n<p>The error I'm getting:</p>\n\n<pre><code>No staged files match any of provided globs.\n</code></pre>\n\n<p>What is the right config for my <code>package.json</code>?</p>\n"}, {"tags": ["html", "typescript", "angular8"], "owner": {"reputation": 23, "user_id": 12016466, "user_type": "registered", "profile_image": "https://graph.facebook.com/2448240568740436/picture?type=large", "display_name": "Camila Campos Tellez", "link": "https://stackoverflow.com/users/12016466/camila-campos-tellez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567545775, "creation_date": 1567545775, "question_id": 57778902, "link": "https://stackoverflow.com/questions/57778902/how-to-insert-html-code-in-a-component-angular-8", "title": "How to insert HTML code in a component Angular 8", "body": "<p>I need to insert HTML5 code inside my component.ts, I'm trying to reflect that code in my component.html, how can I insert it including the CSS and the Angular's directives? I have to do it like that because the web site needs to change depending on the current hour.\nI'm using angular 8. Thanks</p>\n\n<p>I've used in the component.html the function [innerHtml]=\"htmlToAdd\" inside a div label, and in the component.ts have created a var type any called \"htmlToAdd\" in which one I put all the HTML code, it worked but it doesn't detect the Angular's directives, and just a few styles of the CSS. I have CSS styles in the own component folder and in the folder styles.css, but the browser only detects some of the styles in the styles.css folder. The trigger doesn't work neither.</p>\n\n<pre><code>htmlToAdd : any;\nthis.htmlToAdd = '&lt;p&gt;&lt;button class=\"btn-sec app-btn-years\" (click)=\"toggleDetails2019()\" (click)=\"toggle2019()\"&gt;&lt;div *ngIf=\"text2019;then yearClose else yearDetails\"&gt;&lt;/div&gt;&lt;div [@showMonths]=\"status2019\"&gt;&lt;/div&gt;'+\n             '&lt;/button&gt;&lt;/p&gt;';\n</code></pre>\n\n<p>I expect each time the browser is refreshed the web site show the code inserted in the component.ts with the CSS, the trigger and the angular's directives working, not only the html structure as it does right now.</p>\n"}, {"tags": ["angular", "typescript", "angular6", "constants"], "answers": [{"comments": [{"owner": {"reputation": 9503, "user_id": 4987197, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205789938965948/picture?type=large", "display_name": "mhodges", "link": "https://stackoverflow.com/users/4987197/mhodges"}, "reply_to_user": {"reputation": 29, "user_id": 8604564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3216b2167590c45b6ffbb22cb5d4f46f?s=128&d=identicon&r=PG&f=1", "display_name": "dracarons", "link": "https://stackoverflow.com/users/8604564/dracarons"}, "edited": false, "score": 0, "creation_date": 1567546157, "post_id": 57778754, "comment_id": 101992777, "body": "@dracarons Glad I could help. I&#39;ve been bitten by this more than once as well!"}], "tags": [], "owner": {"reputation": 9503, "user_id": 4987197, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205789938965948/picture?type=large", "display_name": "mhodges", "link": "https://stackoverflow.com/users/4987197/mhodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1567545199, "last_edit_date": 1567545199, "creation_date": 1567544886, "answer_id": 57778754, "question_id": 57778717, "link": "https://stackoverflow.com/questions/57778717/why-is-my-const-variable-output-not-empty/57778754#57778754", "title": "Why is my const variable output, not empty", "body": "<p>This is because of the way that the Chrome console handles objects these days. It will essentially print a pointer to the contents of that object - if the contents change, the output in the console will, too. In order to get an accurate view of what an object or array looks like at a given point in time in the console, be sure to use <code>JSON.stringify()</code> or <code>.toString()</code> in your <code>console.log()</code> statement to convert it to a string that will not change. </p>\n\n<p><code>console.log(JSON.stringify(myArray))</code></p>\n\n<p><code>console.log(myArray.toString())</code></p>\n\n<p><a href=\"https://code-maven.com/logging-javascript-objects\" rel=\"nofollow noreferrer\">Here's an article explaining this</a> if you're interested.</p>\n\n<p>That being said, your code is working as intended, Chrome is just being deceptive. </p>\n"}], "owner": {"reputation": 29, "user_id": 8604564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3216b2167590c45b6ffbb22cb5d4f46f?s=128&d=identicon&r=PG&f=1", "display_name": "dracarons", "link": "https://stackoverflow.com/users/8604564/dracarons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 2, "accepted_answer_id": 57778754, "answer_count": 1, "score": 0, "last_activity_date": 1568008131, "creation_date": 1567544671, "last_edit_date": 1568008131, "question_id": 57778717, "link": "https://stackoverflow.com/questions/57778717/why-is-my-const-variable-output-not-empty", "title": "Why is my const variable output, not empty", "body": "<p>This is probably very silly but I have been reading the code too long and can't seem t find why is my variable not printing empty in the console if it hasn't reached the function where is actually pushing values into it. It works fine, I just want to understand why.</p>\n\n<p>I've printed many console.log to track any line of code where I'm filling the variable (it's an array), I've also tried different things in other parts of the code but it is a const variable, so it can be assigned a different value from outside the function.</p>\n\n<pre><code>function ABC() {\n\n  console.log('FUNCTION BEGINS...');\n  const tempDates: Array&lt;Moment&gt; = [];\n  console.log(tempDates);\n  console.log('After creating the variable...');\n\n  console.log('Before log tempdates');\n  console.log(tempDates);\n\n  const start_date = this.date;\n\n  let dateToAdd = start_date;\n  tempDates.push(dateToAdd);\n\n  console.log(dateToAdd);\n  console.log(tempDates);\n}\n</code></pre>\n\n<p>Maybe I'm wrong and over analyzing but I would expect the first time I print the const 'tempDates' to print an empty array. but actually outputs the array with 3 dates inside, which are actually filled if a condition is true, many lines of code after.</p>\n\n<p>This is how the console looks like:\n<a href=\"https://i.stack.imgur.com/skbZ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/skbZ9.png\" alt=\"Each log printed is as the code shows. (same order)\"></a></p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 8367, "user_id": 381708, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee6de571b1290a66e9e7fa12f4cbfa84?s=128&d=identicon&r=PG", "display_name": "Chris Hutchinson", "link": "https://stackoverflow.com/users/381708/chris-hutchinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1567544378, "creation_date": 1567544378, "answer_id": 57778669, "question_id": 57778597, "link": "https://stackoverflow.com/questions/57778597/how-to-keep-typescript-from-prefering-global-types-over-imports/57778669#57778669", "title": "How to keep Typescript from prefering global types over imports", "body": "<p>This may be an issue with your IDE due to caching behavior. You should be able to clear the cache in your IDE by restarting the TypeScript language server.</p>\n\n<h2>Visual Studio Code</h2>\n\n<ul>\n<li>Open the command palette (Ctrl+Shift+P)</li>\n<li>Run command <strong>TypeScript: Restart TS server</strong></li>\n</ul>\n\n<h2>TSConfig</h2>\n\n<p>You could also try modifying your TypeScript configuration to exclude type definitions for certain packages:</p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#types-typeroots-and-types\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#types-typeroots-and-types</a></p>\n\n<h3>Only use types from the specified paths</h3>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n   \"compilerOptions\": {\n       \"typeRoots\" : [\"./typings\"]\n   }\n}\n</code></pre>\n\n<h3>Only use types from the specified packages</h3>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n   \"compilerOptions\": {\n       \"types\" : [\"node\", \"lodash\", \"express\"]\n   }\n}\n</code></pre>\n\n<h3>Exclude all external packages</h3>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n    \"compilerOptions\": { /* ... */ },\n    \"exclude\": [\n        \"node_modules\"\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567544378, "creation_date": 1567543947, "question_id": 57778597, "link": "https://stackoverflow.com/questions/57778597/how-to-keep-typescript-from-prefering-global-types-over-imports", "title": "How to keep Typescript from prefering global types over imports", "body": "<p>So, for my Typescript code I wanted to introduce an interface called <code>Account</code> which contains account-related info, obviously.</p>\n\n<p>So far, this has resided in \"Account.d.ts\" and it has worked quite fine, but I just recently found out that the .d.ts is not the way to go exactly when it comes to typescript, and I wanted to change it to an exported interface in a proper \"Account.ts\" class.</p>\n\n<p>So, this is what it looks like now:</p>\n\n<pre><code>export default interface Account {\n    userName: string;\n    email: string;\n    profilePicturePath: string;\n    lastAccessedAt: Date;\n    id: string;\n}\n</code></pre>\n\n<p>So far so good. Previously, I also had the problem that there is another type called \"Account\", defined in a file called <code>lib.dom.d.ts</code>, which was constantly picked up by Typescript and via declaration merging messed with my type.</p>\n\n<p>Now, with my new new Account.ts, this is what I did:</p>\n\n<pre><code>import Account from \"Definitions/Account\";\n\ninterface IProps {\n    account: Account;\n}\n</code></pre>\n\n<p>But this does not work. Typescript still picks up the <code>Account</code> in <code>lib.dom.d.ts</code> as the proper Account type here, and I can't figure out how I can make Typescript recognize which one is the proper one. If possible, I would just like to ignore this external definition which does not have anything to do with my code at all.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 1593, "user_id": 1929006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPkjb.jpg?s=128&g=1", "display_name": "Milind Agrawal", "link": "https://stackoverflow.com/users/1929006/milind-agrawal"}, "edited": false, "score": 0, "creation_date": 1567544030, "post_id": 57778576, "comment_id": 101992122, "body": "1. It uses setState the update the current state variable <code>object1</code> 2. Three dots also called as spread operator in es6, extracts everything from object2 here and put it in new object"}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 4518472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rYu5.jpg?s=128&g=1", "display_name": "Tarun Khosla", "link": "https://stackoverflow.com/users/4518472/tarun-khosla"}, "is_accepted": false, "score": 0, "last_activity_date": 1567544137, "creation_date": 1567544137, "answer_id": 57778626, "question_id": 57778576, "link": "https://stackoverflow.com/questions/57778576/what-does-this-piece-of-code-mean-when-setting-state/57778626#57778626", "title": "What does this piece of code mean when setting state?", "body": "<p>This is spread operator and you can read more about it here</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals</a><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n\n<p>The setState in your code is updating the current state variable object1 with the values from object2</p>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 3445035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7652bb56f9653a1a36492383a8ddd6?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence Chang", "link": "https://stackoverflow.com/users/3445035/lawrence-chang"}, "is_accepted": false, "score": 1, "last_activity_date": 1567544256, "creation_date": 1567544256, "answer_id": 57778642, "question_id": 57778576, "link": "https://stackoverflow.com/questions/57778576/what-does-this-piece-of-code-mean-when-setting-state/57778642#57778642", "title": "What does this piece of code mean when setting state?", "body": "<p>You are essentially setting <code>object1</code> to be the same as <code>object2</code> via <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Syntax\" rel=\"nofollow noreferrer\">spread syntax</a>. For example:</p>\n\n<pre><code>this.state = { object1: { hello: 'world' } };\n\nconst object2 = { foo: 'bar' };\n\nthis.setState({ object1: { ...object2 } });\n</code></pre>\n\n<p>this would result in the state to be:</p>\n\n<pre><code>{ object1: { foo: 'bar' };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12016641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9N70xIAMGCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfJyf3sOETAUbVWs10f25RcG1Gqzw/photo.jpg?sz=128", "display_name": "Soham Aggarwal", "link": "https://stackoverflow.com/users/12016641/soham-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567544256, "creation_date": 1567543824, "question_id": 57778576, "link": "https://stackoverflow.com/questions/57778576/what-does-this-piece-of-code-mean-when-setting-state", "title": "What does this piece of code mean when setting state?", "body": "<pre><code>this.setState({\n      object1: { ...object2 },\n});\n\n</code></pre>\n\n<p>I know it does something to the state. but I'm not able to understand what it means? Is this a technique in JS/React?</p>\n"}, {"tags": ["c#", "typescript", "types"], "comments": [{"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 2, "creation_date": 1567543961, "post_id": 57778549, "comment_id": 101992100, "body": "TypeScript is one word, no space."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1567544188, "post_id": 57778549, "comment_id": 101992174, "body": "I don&#39;t think there&#39;s any way to get a compile-time error if someone changes the enum or specifies a valid enum value that you don&#39;t want to allow."}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 1, "creation_date": 1567544189, "post_id": 57778549, "comment_id": 101992176, "body": "No there&#39;s no empty type in C#."}, {"owner": {"reputation": 1556, "user_id": 6126033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183fcfeb21349bea904dfe711bd2c177?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6126033/peter"}, "reply_to_user": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1567547824, "post_id": 57778549, "comment_id": 101993242, "body": "@RufusL Thank you! that&#39;s would be my question. I have the same assumption. Anyway I hope maybe someone knows some way to do it."}], "answers": [{"tags": [], "owner": {"reputation": 32, "user_id": 3482529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a02cdeabc49afdbc060463bf394b36d?s=128&d=identicon&r=PG&f=1", "display_name": "tnorth", "link": "https://stackoverflow.com/users/3482529/tnorth"}, "is_accepted": true, "score": 0, "last_activity_date": 1567618357, "creation_date": 1567618357, "answer_id": 57793296, "question_id": 57778549, "link": "https://stackoverflow.com/questions/57778549/typescript-never-type-in-c/57793296#57793296", "title": "TypeScript Never type in C#?", "body": "<p>Unfortunately, I don't think the C# compiler is smart enough to do that. Even if you throw a new exception in the default case in the switch statement on <code>action.Type</code>, no compile-time error will appear regarding the missing <code>ActionTypes.Remove</code> case.</p>\n\n<p>I found <a href=\"https://blogs.msdn.microsoft.com/ericlippert/2011/02/21/never-say-never-part-one/\" rel=\"nofollow noreferrer\">this MSDN blog post</a> that says about the <code>never</code> type that it's \"unlikely that it will become a feature of mainstream CLR languages.\"</p>\n"}], "owner": {"reputation": 1556, "user_id": 6126033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183fcfeb21349bea904dfe711bd2c177?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6126033/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 57793296, "answer_count": 1, "score": 5, "last_activity_date": 1567618357, "creation_date": 1567543692, "last_edit_date": 1567543977, "question_id": 57778549, "link": "https://stackoverflow.com/questions/57778549/typescript-never-type-in-c", "title": "TypeScript Never type in C#?", "body": "<p>I am wondering is there anyt c# equivalent for TypeScript's <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#never\" rel=\"noreferrer\">never type</a></p>\n\n<p>example I write this code in TS I will have a build time error.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>enum ActionTypes {\n    Add,\n    Remove\n}\n\ntype IAdd = {type: ActionTypes.Add};\ntype IRemove = {type: ActionTypes.Remove};\n\ntype IAction = IAdd | IRemove;\n\nconst ensureNever = (action: never) =&gt; action;\n\nfunction test(action: IAction) {\n    switch (action.type) {\n        case ActionTypes.Add:\n            break;\n        default:\n            ensureNever(action);\n            break;\n    }\n}\n</code></pre>\n\n<p>error is: <code>Argument of type 'IRemove' is not assignable to parameter of type 'never'.</code></p>\n\n<p>This is very useful when someone change the logic in one file and I want to be sure this new case is handled everywhere.</p>\n\n<p>Is there any way to do this in c#? (I googled around but I did not find anything)</p>\n\n<p>This is what I have so far...</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System;\nclass Program\n{\n    private enum ActionTypes\n    {\n        Add,\n        Remove\n    }\n\n    interface IAction {\n        ActionTypes Type { get; }\n    }\n\n    class AddAction : IAction\n    {\n        public ActionTypes Type\n        {\n            get {\n                return ActionTypes.Add;\n            }\n        }\n    }\n\n    class RemoveAction : IAction\n    {\n        public ActionTypes Type\n        {\n            get\n            {\n                return ActionTypes.Remove;\n            }\n        }\n    }\n\n    static void Test(IAction action)\n    {\n        switch (action.Type)\n        {\n            case ActionTypes.Add:\n                Console.WriteLine(\"ActionTypes.Add\");\n                break;\n            default:\n                // what should I put here to be sure its never reached?\n                Console.WriteLine(\"default\");\n                break;\n        }\n    }\n\n    static void Main(string[] args)\n    {\n        var action = new RemoveAction();\n        Program.Test(action);\n    }\n}\n</code></pre>\n\n<p>I want to be sure I have an error at build time not run time.</p>\n"}, {"tags": ["angular", "typescript", "decorator"], "comments": [{"owner": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567542284, "post_id": 57778246, "comment_id": 101991513, "body": "What happens if you make the pause function return type to  <code>any</code> ?"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567542446, "post_id": 57778246, "comment_id": 101991585, "body": "@callback instead of it not being defined?  Pause will say: <code>The return type of an async function or method must be the global Promise&lt;T&gt; type.</code>"}, {"owner": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567542973, "post_id": 57778246, "comment_id": 101991774, "body": "What happens when you serve with the following params <code>--target ES5 --emitDecoratorMetadata --experimentalDecorators</code> ? (assuming youre using the cli)"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567543439, "post_id": 57778246, "comment_id": 101991926, "body": "Those commands are not valid for <i>ng serve</i>"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567543549, "post_id": 57778246, "comment_id": 101991969, "body": "@callback It gives the errors: &#39;unknown option &#39;--target&#39;, etc for each of your params."}, {"owner": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567543691, "post_id": 57778246, "comment_id": 101992009, "body": "How about adding <code>&quot;target&quot;: &quot;ES5&quot;</code> in the tsconfig.json, under <code>compilerOptions</code>"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "reply_to_user": {"reputation": 3104, "user_id": 1350162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Px86A.jpg?s=128&g=1", "display_name": "callback", "link": "https://stackoverflow.com/users/1350162/callback"}, "edited": false, "score": 0, "creation_date": 1567544212, "post_id": 57778246, "comment_id": 101992180, "body": "I already had those flags set in the tsconfig.json file.  Target was es2015, not es5, but everything else was already in place."}], "answers": [{"comments": [{"owner": {"reputation": 7701, "user_id": 4242590, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9d63ce25a0e288a36cd7df62d0d54a19?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertK", "link": "https://stackoverflow.com/users/4242590/albertk"}, "edited": false, "score": 0, "creation_date": 1567549599, "post_id": 57779027, "comment_id": 101993610, "body": "By decorating non-async function with async function you are changing method signature from <code>() =&gt; Observable&lt;any[]&gt;</code> to <code>() =&gt; Promise&lt;Observable&lt;any[]&gt;&gt;</code> at runtime. The calling code will receive unexpected object"}], "tags": [], "owner": {"reputation": 320, "user_id": 8517372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f72bdd7b4e406fd40de2ff9949f3146?s=128&d=identicon&r=PG", "display_name": "Jonathan Turnock", "link": "https://stackoverflow.com/users/8517372/jonathan-turnock"}, "is_accepted": false, "score": 1, "last_activity_date": 1567546609, "creation_date": 1567546609, "answer_id": 57779027, "question_id": 57778246, "link": "https://stackoverflow.com/questions/57778246/was-trying-to-implement-a-pause-decorator-for-my-app-but-i-have-issues-following/57779027#57779027", "title": "Was trying to implement a pause decorator for my app but i have issues following another question", "body": "<p>This will give you your wait, but I think you might have additional issues with the observable response.</p>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class MockDataService {\n\n  data: [] = [];\n\n  @delay()\n  downloadData() {\n    return this.data;\n  }\n\n  getAll(): Observable&lt;any[]&gt; {\n    return of(this.downloadData());\n  }\n\n  constructor() {\n  }\n}\n\nexport function delay(): MethodDecorator {\n  return function(target: Function, key: string, descriptor: any) {\n\n    const originalMethod = descriptor.value;\n\n    descriptor.value =  async function(...args: any[]) {\n      console.log('Entering Wait!');\n      await new Promise(res =&gt; setTimeout(res, 1500));\n      console.log('Completed Wait!');\n      return originalMethod.apply(this, args);\n    };\n\n    return descriptor;\n  };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7701, "user_id": 4242590, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9d63ce25a0e288a36cd7df62d0d54a19?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertK", "link": "https://stackoverflow.com/users/4242590/albertk"}, "is_accepted": true, "score": 1, "last_activity_date": 1567547378, "creation_date": 1567547378, "answer_id": 57779136, "question_id": 57778246, "link": "https://stackoverflow.com/questions/57778246/was-trying-to-implement-a-pause-decorator-for-my-app-but-i-have-issues-following/57779136#57779136", "title": "Was trying to implement a pause decorator for my app but i have issues following another question", "body": "<p>You are getting the error because Method decorator must have the following signature:</p>\n\n<pre><code>declare type MethodDecorator = &lt;T&gt;(target: Object, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor&lt;T&gt;) =&gt; TypedPropertyDescriptor&lt;T&gt; | void;\n</code></pre>\n\n<p>It can't return <code>Promise&lt;void&gt;</code>. It must return <code>TypedPropertyDescriptor&lt;T&gt;</code> or must be void. Since you are dealing with <code>Observable&lt;&gt;</code> you need to use <code>delay</code> operator from <code>rxjs/operators</code>:</p>\n\n<pre><code>export function observablePause(\n  target: Object,\n  propertyName: string,\n  propertyDesciptor: PropertyDescriptor): PropertyDescriptor {\n  const method = propertyDesciptor.value;\n\n  propertyDesciptor.value = function (...args: any[]) {\n\n      // invoke decorated method and get its return value\n      let result = &lt;Observable&lt;any&gt;&gt;method.apply(this, args);\n      // adding delay\n      result = result.pipe(delay(1500));\n      // return the result of invoking the method\n      return result;\n  }\n  return propertyDesciptor;\n};\n...\n@observablePause\ngetAll(): Observable&lt;any[]&gt; { return of(this.data); }\n</code></pre>\n"}], "owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 57779136, "answer_count": 2, "score": 2, "last_activity_date": 1567547378, "creation_date": 1567541970, "question_id": 57778246, "link": "https://stackoverflow.com/questions/57778246/was-trying-to-implement-a-pause-decorator-for-my-app-but-i-have-issues-following", "title": "Was trying to implement a pause decorator for my app but i have issues following another question", "body": "<p>I have a service file:</p>\n\n<pre><code>export class MockDataService {\n   data:[] = [];\n\n   getAll(): Observable&lt;any[]&gt; { return of(this.data); }\n}\n</code></pre>\n\n<p>I wanted to essentially create a delay for my mocks, so i wanted to wrap a <code>@pause()</code> decorator around all the functions:</p>\n\n<pre><code>export async function pause() {\n    await new Promise( res =&gt; setTimeout(res, 1500) );\n}\n</code></pre>\n\n<p>So essentially, all endpoints will have a 1.5 second pause.  I add it to getAll:</p>\n\n<pre><code>@pause()\ngetAll() {}\n</code></pre>\n\n<p>but it gives me an error from my intellisense. <code>Unable to resolve signature of method decorator when called as an expression.\n  Cannot invoke an expression whose type lacks a call signature. Type 'Promise&lt;void&gt;' has no compatible call signatures.</code></p>\n\n<p>I was trying to figure out how I would accomplish this.  Are my function signatures wrong?  I will eventually be leveraging Http calls in the functions, so I thought I had the correct function defi</p>\n"}, {"tags": ["typescript", "typescript-generics"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567537523, "post_id": 57777340, "comment_id": 101989837, "body": "The first is generic and the second is concrete.  <code>InvoiceEntity1&lt;T&gt;</code> refers to a <i>family</i> of constructor types, of which <code>InvoiceEntity2</code> is just one member (it is equivalent to <code>InvoiceEntity1&lt;InvoiceModel&gt;</code>).  An <code>InvoiceEntity1&lt;InvoiceModel &amp; {foo: string}&gt;</code> is a constructor that produces <code>InvoiceModel</code> objects with an additional <code>string</code>-valued <code>foo</code> property.  If you have a use case or an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you&#39;re trying to do, someone can explain more clearly."}, {"owner": {"reputation": 45675, "user_id": 220180, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/708eed1b644bddaa3b636c9348af2610?s=128&d=identicon&r=PG", "display_name": "gremo", "link": "https://stackoverflow.com/users/220180/gremo"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567538549, "post_id": 57777340, "comment_id": 101990190, "body": "@jcalz thanks for the explanation. What do you mean with &quot;InvoiceEntity2 is concreter&quot;? Im&#39;m working on a simple example."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567539340, "post_id": 57777340, "comment_id": 101990464, "body": "A concrete type is one which is not generic (or maybe one in which any generic type parameters have been resolved with other concrete types).  So <code>Array&lt;T&gt;</code> is generic if <code>T</code> is a generic type parameter, but <code>Array&lt;string&gt;</code> is a concrete type."}], "owner": {"reputation": 45675, "user_id": 220180, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/708eed1b644bddaa3b636c9348af2610?s=128&d=identicon&r=PG", "display_name": "gremo", "link": "https://stackoverflow.com/users/220180/gremo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567537059, "creation_date": 1567537059, "question_id": 57777340, "link": "https://stackoverflow.com/questions/57777340/is-there-any-difference-between-these-two-typescript-type-declarations", "title": "Is there any difference between these two TypeScript type declarations?", "body": "<p>Is there any difference between these two declarations?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// Use the &lt;&gt; notation\nexport type InvoiceEntity1&lt;T extends InvoiceModel&gt; = new(...args: any[]) =&gt; T;\n// Do not use the &lt;&gt; notation\nexport type InvoiceEntity2 = new(...args: any[]) =&gt; InvoiceModel;\n</code></pre>\n\n<p>I'm just learing typescript and I'm trying to figure out how to work with generics. </p>\n\n<p>Here, what I'm trying to do is to create a custom type where argument a type (a class) subclassing the <code>InvoiceModel</code>, for example:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>public foo({ entity: InvoiceEntity2 }): void {}\n</code></pre>\n\n<p>(Bonus question: I can't figure out how to make <code>foo</code> work with <code>InvoiceEntity1</code>).</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "dom"], "comments": [{"owner": {"reputation": 1096, "user_id": 5308388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gh3X8.png?s=128&g=1", "display_name": "Riddell", "link": "https://stackoverflow.com/users/5308388/riddell"}, "edited": false, "score": 2, "creation_date": 1567536649, "post_id": 57777213, "comment_id": 101989520, "body": "Can you not listen to the <code>onChange</code> event and check <code>EmitType&lt;ChangedEventArgs&gt;</code> == <code>MouseEvent</code> and then <code>event.preventDefault()</code>? <a href=\"https://ej2.syncfusion.com/angular/documentation/api/calendar/changedEventArgs/\" rel=\"nofollow noreferrer\">ej2.syncfusion.com/angular/documentation/api/calendar/&hellip;</a>"}, {"owner": {"reputation": 1254, "user_id": 9500453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Y2PoDK0My9o/AAAAAAAAAAI/AAAAAAAAAqQ/yld7pwS0oPc/photo.jpg?sz=128", "display_name": "Luiz Ricardo Cardoso", "link": "https://stackoverflow.com/users/9500453/luiz-ricardo-cardoso"}, "reply_to_user": {"reputation": 1096, "user_id": 5308388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gh3X8.png?s=128&g=1", "display_name": "Riddell", "link": "https://stackoverflow.com/users/5308388/riddell"}, "edited": false, "score": 0, "creation_date": 1567537875, "post_id": 57777213, "comment_id": 101989966, "body": "What exactly is the <code>preventDefault()</code> function for? This allows you to select the date anyway."}, {"owner": {"reputation": 1096, "user_id": 5308388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gh3X8.png?s=128&g=1", "display_name": "Riddell", "link": "https://stackoverflow.com/users/5308388/riddell"}, "edited": false, "score": 0, "creation_date": 1567537969, "post_id": 57777213, "comment_id": 101990001, "body": "You can read more about it on MDN. I&#39;d try that as a solution. <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/API/Event/preventDefaul&zwnj;&#8203;t</a>"}, {"owner": {"reputation": 982, "user_id": 7511690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/932d47d0df3e363c5439fd6d4d799bae?s=128&d=identicon&r=PG&f=1", "display_name": "Gilsdav", "link": "https://stackoverflow.com/users/7511690/gilsdav"}, "edited": false, "score": 0, "creation_date": 1567542815, "post_id": 57777213, "comment_id": 101991712, "body": "If you want to disable click in gray dates (that already have a specific css classe), you can probably do it by css too. <code>pointer-events: none</code>;"}], "answers": [{"tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 1, "last_activity_date": 1567568553, "creation_date": 1567568553, "answer_id": 57781203, "question_id": 57777213, "link": "https://stackoverflow.com/questions/57777213/disable-event-click-from-component-angular/57781203#57781203", "title": "Disable event click from component angular", "body": "<p>You can disable click event by using css somehing like this</p>\n\n<pre><code>/deep/.calendar {\n   pointer-events: none;\n}\n</code></pre>\n\n<p>You need to add correct class or id of the element you want to disable click event</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 6102378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746e1bf44733f04b11ec63d7ec00b5b6?s=128&d=identicon&r=PG&f=1", "display_name": "SVB Ashok", "link": "https://stackoverflow.com/users/6102378/svb-ashok"}, "is_accepted": true, "score": 0, "last_activity_date": 1569929101, "creation_date": 1569929101, "answer_id": 58183823, "question_id": 57777213, "link": "https://stackoverflow.com/questions/57777213/disable-event-click-from-component-angular/58183823#58183823", "title": "Disable event click from component angular", "body": "<p>You can use renderDayCell method to disable the required dates in syncfusion date picker component. Please check the below code block.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-syz8gx?file=app.component.html\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-syz8gx?file=app.component.html</a></p>\n\n<p>Here, we have disabled the week ends in the DatePicker popup. So, we could not select or click the dates.</p>\n"}], "owner": {"reputation": 1254, "user_id": 9500453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Y2PoDK0My9o/AAAAAAAAAAI/AAAAAAAAAqQ/yld7pwS0oPc/photo.jpg?sz=128", "display_name": "Luiz Ricardo Cardoso", "link": "https://stackoverflow.com/users/9500453/luiz-ricardo-cardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 58183823, "answer_count": 2, "score": 1, "last_activity_date": 1569929101, "creation_date": 1567536346, "last_edit_date": 1567686609, "question_id": 57777213, "link": "https://stackoverflow.com/questions/57777213/disable-event-click-from-component-angular", "title": "Disable event click from component angular", "body": "<p>I am working with the component on the link: <a href=\"https://ej2.syncfusion.com/angular/documentation/api/calendar/\" rel=\"nofollow noreferrer\">https://ej2.syncfusion.com/angular/documentation/api/calendar/</a></p>\n\n<p>I couldn't find any function or property that disables component state so I can't select dates on the calendar. </p>\n\n<p>For this reason I would like to know if it is possible to remove the click event so that it cannot select dates in a given situation.</p>\n\n<p>I can only disable the dates that he can't select, only that I can't display the selected dates that I manually entered in the schedule.</p>\n\n<p><strong>Is it possible to remove the event from the DOM so that it cannot perform any action on the component? How can I do this?</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/dzR0m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dzR0m.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 1741622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5x7GJ.jpg?s=128&g=1", "display_name": "Jeremie-Segu", "link": "https://stackoverflow.com/users/1741622/jeremie-segu"}, "is_accepted": false, "score": 2, "last_activity_date": 1567543622, "creation_date": 1567543622, "answer_id": 57778544, "question_id": 57777171, "link": "https://stackoverflow.com/questions/57777171/take-out-a-value-event-data-out-of-a-window-addeventlistener-messageevent-to-e/57778544#57778544", "title": "Take out a value event.data out of a window.addEventListener (MessageEvent) to execute a new function", "body": "<p>i found the answer, thanks to this article found on StackOverflow:\n<a href=\"https://ultimatecourses.com/blog/avoiding-anonymous-javascript-functions\" rel=\"nofollow noreferrer\">https://ultimatecourses.com/blog/avoiding-anonymous-javascript-functions</a>\nThe answer is to execute a function outside of the addeventlistener (avoiding anonymous function)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\n  //Linkedin  ---------------------- \n    linkedinSignin(){\n        window.open(this.urlLinkedin, this.windowTarget, this.windowAttributes);\n        window.addEventListener('message', this.linkedinGetToken, false);\n      }\n\n    linkedinGetToken (event){\n      if (event.origin !== \"http://localhost:4200\")\n      return;\n      console.log(event.data);\n    }\n     //End Linkedin ----------------------\n\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 1741622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5x7GJ.jpg?s=128&g=1", "display_name": "Jeremie-Segu", "link": "https://stackoverflow.com/users/1741622/jeremie-segu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567543622, "creation_date": 1567536124, "last_edit_date": 1567536445, "question_id": 57777171, "link": "https://stackoverflow.com/questions/57777171/take-out-a-value-event-data-out-of-a-window-addeventlistener-messageevent-to-e", "title": "Take out a value event.data out of a window.addEventListener (MessageEvent) to execute a new function", "body": "<p>i am working with angular, and i want to create a linkedin Login API. For that i am opening a new window with window.open to permit to the user to accept or not, and when i have the URI getting back from the success of accepting from Linkedin login, i get back a code with a window.addEventListener - event.data., to the parent window with window.opener.postMessage. The problem is that i dont now how to take this value out of the addeventlistener function, to trigger an other function with this value.</p>\n\n<p><strong>The component who is initiating on the window popup where we will accept or not the linkedin login autorisation</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, OnInit } from '@angular/core';\nimport { AuthService } from \"../../services/auth.service\";\nimport { ActivatedRoute }  from \"@angular/router\";\n\n@Component({\n  selector: 'app-sign-in',\n  templateUrl: './sign-in.component.html',\n  styleUrls: ['./sign-in.component.scss']\n})\nexport class SignInComponent implements OnInit {\n  private code:string;\n  private state:string;\n\n  constructor(\n    public auth: AuthService,\n    public route:ActivatedRoute\n    ) { }\n\n\n //on initialisation we get the params and send the message to the addeventlistener of the parent\n  ngOnInit() {\n    //get param of the uri linkedin specified URL\n    this.code = this.route.snapshot.queryParamMap.get(\"code\");\n    this.state = this.route.snapshot.queryParamMap.get(\"state\");\n    if (this.code !== null){\n      const params = window.location.search;\n      if (window.opener) {\n      //if the params exists then we send the code to the parent window\n        if (this.state === this.auth.state)\n        // send them to the opener window\n        {\n          window.opener.postMessage(this.code);\n        }//end if\n\n      }//end if\n\n    } else if (window.opener){\n      window.opener.postMessage('Autorisation annul\u00e9');\n    }\n    window.close();\n  }//end onInit\n\n}//end Class\n</code></pre>\n\n<p>The service where window.open code executed to get back the value from child window to parent window</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\n    import { Injectable } from '@angular/core';\n    import { Router } from '@angular/router';\n    import {  HttpClient } from '@angular/common/http';\n\n    //INTERFACE UTILISATEUR\n    import { User } from './user.model';\n\n    import { auth } from 'firebase/app';\n    import { AngularFireAuth } from '@angular/fire/auth';\n    import { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\n\n    import { Observable, of, interval, Subscription } from 'rxjs';\n    import { switchMap, take } from 'rxjs/operators';\n\n    @Injectable({ providedIn: 'root' })\n\n    export class AuthService {\n\n    //PROPERTIES --------------\n      user$: Observable&lt;User&gt;;\n      state:string = '';\n      clientID: String = '';\n      keyID: String = '';\n      urlLinkedin = `https://www.linkedin.com/oauth/v2/authorization?response_type=code&amp;client_id=${this.clientID}&amp;redirect_uri=http://localhost:4200/authentification/sign-in&amp;scope=r_liteprofile%20r_emailaddress%20w_member_social&amp;state=${this.state}`;\n      windowAttributes:string = \"toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=520,height=700\";\n      windowTarget:string = \"_blank\";\n      codeRecup:string;\n    //END PROPERTIES --------------\n\n    //CONSTRUCTEUR\n      constructor(\n        private afAuth: AngularFireAuth,\n        private afs: AngularFirestore,\n        private router: Router,\n        private http:HttpClient\n      ) {\n\n    //METHODS -------------------------------\n     //Linkedin  ---------------------- \n    linkedinSignin(){\n        window.open(this.urlLinkedin, this.windowTarget, this.windowAttributes);\n        window.addEventListener('message',function(event) {\n          if (event.origin !== \"http://localhost:4200\")\n          return;\n          console.log(event.data);\n        },false);\n      }\n\n</code></pre>\n\n<p>I want to get event.data and use it in an other function that will be executed after the  window.addEventListener</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\n    linkedinGetToken (){\n//I need to get event.data on a new function who will trigger after the addeventlistener      \nthis.codeRecup = event.data;\n    }\n     //End Linkedin ----------------------\n\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1567534896, "post_id": 57776891, "comment_id": 101988817, "body": "<a href=\"https://www.typescriptlang.org/docs/handbook/decorators.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/decorators.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4314, "user_id": 4718434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868f43305a3a4e7deeb4abf55ff3a88d?s=128&d=identicon&r=PG&f=1", "display_name": "yaya", "link": "https://stackoverflow.com/users/4718434/yaya"}, "edited": false, "score": 0, "creation_date": 1567535562, "post_id": 57776933, "comment_id": 101989100, "body": "Is usage of decorators common in typescript (i mean, does other typescript based frameworks use decorators mostly)?"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "reply_to_user": {"reputation": 4314, "user_id": 4718434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868f43305a3a4e7deeb4abf55ff3a88d?s=128&d=identicon&r=PG&f=1", "display_name": "yaya", "link": "https://stackoverflow.com/users/4718434/yaya"}, "edited": false, "score": 2, "creation_date": 1567535885, "post_id": 57776933, "comment_id": 101989218, "body": "@yaya the use of <code>@</code> symbol to add annotations is common in multiple programming languages. Java is most notable for their usage. They are useful when <i>convention</i> is preferred over <i>configuration</i>. They help reduce boilerplate source code and writing code just to configure things."}], "tags": [], "owner": {"reputation": 15657, "user_id": 1164465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qtP66.jpg?s=128&g=1", "display_name": "Christopher Peisert", "link": "https://stackoverflow.com/users/1164465/christopher-peisert"}, "is_accepted": true, "score": 2, "last_activity_date": 1567535007, "last_edit_date": 1592644375, "creation_date": 1567535007, "answer_id": 57776933, "question_id": 57776891, "link": "https://stackoverflow.com/questions/57776891/what-is-the-syntax-used-in-angular-such-as-ngmodule-and-component-and-inject/57776933#57776933", "title": "What is the syntax used in Angular such as: @NgModule and @Component and @Injectable? (using @ sign for declaring)", "body": "<p>Typescript has a language feature called <a href=\"https://www.typescriptlang.org/docs/handbook/decorators.html\" rel=\"nofollow noreferrer\"><code>decorators</code></a>. Angular leverages this feature to add custom framework features, such as <code>@Component</code>, services marked with <code>@Injectable</code>, and modules marked <code>@NgModule</code>.</p>\n<blockquote>\n<p>With the introduction of Classes in TypeScript and ES6, there now exist certain scenarios that require additional features to support annotating or modifying classes and class members. Decorators provide a way to add both annotations and a meta-programming syntax for class declarations and members. Decorators are a stage 2 proposal for JavaScript and are available as an experimental feature of TypeScript.</p>\n</blockquote>\n<p>For example, the Angular documentation for <a href=\"https://angular.io/api/core/Component\" rel=\"nofollow noreferrer\"><code>Component</code></a> states:</p>\n<blockquote>\n<p>Decorator that marks a class as an Angular component and provides configuration metadata that determines how the component should be processed, instantiated, and used at runtime.</p>\n</blockquote>\n<h1>Additional Information</h1>\n<ul>\n<li><a href=\"https://www.typescriptlang.org/docs/handbook/decorators.html\" rel=\"nofollow noreferrer\"><strong>Typescript Decorators</strong></a></li>\n<li><a href=\"https://ultimatecourses.com/blog/angular-decorators\" rel=\"nofollow noreferrer\"><strong>A deep dive on Angular decorators</strong></a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 12008351, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrirk0vHl39xfLatbazF-bOCsq5l2UgON6WRQ9Zg=k-s128", "display_name": "Arunakar Prakash", "link": "https://stackoverflow.com/users/12008351/arunakar-prakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1567535119, "creation_date": 1567535119, "answer_id": 57776958, "question_id": 57776891, "link": "https://stackoverflow.com/questions/57776891/what-is-the-syntax-used-in-angular-such-as-ngmodule-and-component-and-inject/57776958#57776958", "title": "What is the syntax used in Angular such as: @NgModule and @Component and @Injectable? (using @ sign for declaring)", "body": "<p>These are decorators and related to typeScript</p>\n\n<blockquote>\n  <p>A Decorator is a special kind of declaration that can be attached to a\n  class declaration, method, accessor, property, or parameter.\n  Decorators use the form @expression, where expression must evaluate to\n  a function that will be called at runtime with information about the\n  decorated declaration.</p>\n</blockquote>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators</a></p>\n"}], "owner": {"reputation": 4314, "user_id": 4718434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868f43305a3a4e7deeb4abf55ff3a88d?s=128&d=identicon&r=PG&f=1", "display_name": "yaya", "link": "https://stackoverflow.com/users/4718434/yaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57776933, "answer_count": 2, "score": 1, "last_activity_date": 1567535609, "creation_date": 1567534783, "last_edit_date": 1567535609, "question_id": 57776891, "link": "https://stackoverflow.com/questions/57776891/what-is-the-syntax-used-in-angular-such-as-ngmodule-and-component-and-inject", "title": "What is the syntax used in Angular such as: @NgModule and @Component and @Injectable? (using @ sign for declaring)", "body": "<p>For declaring modules and components and services, Angular uses syntax such as:</p>\n\n<pre><code>@Component({\n  ...\n})\nexport class AppComponent\n</code></pre>\n\n<p>But what is it? I have never seen this syntax used in JavaScript.</p>\n\n<p>Was it invented for Angular, or is it part of es7 or another specification?</p>\n"}, {"tags": ["javascript", "typescript", "react-native"], "comments": [{"owner": {"reputation": 4477, "user_id": 1283345, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/SXWus.jpg?s=128&g=1", "display_name": "Nooruddin Lakhani", "link": "https://stackoverflow.com/users/1283345/nooruddin-lakhani"}, "edited": false, "score": 0, "creation_date": 1567534797, "post_id": 57776847, "comment_id": 101988779, "body": "There is a great knowledge about it please <a href=\"https://stackoverflow.com/questions/54806512/best-way-to-store-global-data-in-asyncstorage-or-redux\">visit</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1603987590, "post_id": 57776908, "comment_id": 114215738, "body": "Am new to react native, how do you import or add the library dependency in a react native project"}], "tags": [], "owner": {"reputation": 3058, "user_id": 2685226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UtwsQW9djPo/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZZ4S0EMZ6M5D7xgBEtOM0xaldWFA/mo/photo.jpg?sz=128", "display_name": "Mehran Khan", "link": "https://stackoverflow.com/users/2685226/mehran-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1567534882, "creation_date": 1567534882, "answer_id": 57776908, "question_id": 57776847, "link": "https://stackoverflow.com/questions/57776847/how-to-manage-user-session-in-react-native/57776908#57776908", "title": "How to manage user session in React Native?", "body": "<p>You can save user session(data) using AsyncStorage . Please try this library <a href=\"https://github.com/react-native-community/async-storage\" rel=\"nofollow noreferrer\">async-storage</a> as recommended By React Native <a href=\"https://facebook.github.io/react-native/docs/asyncstorage\" rel=\"nofollow noreferrer\">Website</a></p>\n\n<p><strong>Store data</strong></p>\n\n<pre><code>storeData = async () =&gt; {\n  try {\n    await AsyncStorage.setItem('@storage_Key', 'stored value')\n  } catch (e) {\n    // saving error\n  }\n}\n</code></pre>\n\n<p><strong>Read data</strong></p>\n\n<pre><code>getData = async () =&gt; {\n  try {\n    const value = await AsyncStorage.getItem('@storage_Key')\n    if(value !== null) {\n      // value previously stored\n    }\n  } catch(e) {\n    // error reading value\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 4592051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9ec2bd29313e7bf54da4f2fc2bdacf43?s=128&d=identicon&r=PG", "display_name": "Majid lotfinia", "link": "https://stackoverflow.com/users/4592051/majid-lotfinia"}, "is_accepted": false, "score": 0, "last_activity_date": 1567572964, "creation_date": 1567572964, "answer_id": 57781720, "question_id": 57776847, "link": "https://stackoverflow.com/questions/57776847/how-to-manage-user-session-in-react-native/57781720#57781720", "title": "How to manage user session in React Native?", "body": "<p>you can add user session in redux and persist your redux data with redux-persist. </p>\n\n<p>so add user session info to api call header each time when you call remote endpoint</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 3683546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ilVSS.png?s=128&g=1", "display_name": "JItendra Rana", "link": "https://stackoverflow.com/users/3683546/jitendra-rana"}, "edited": false, "score": 1, "creation_date": 1567578328, "post_id": 57781963, "comment_id": 101998999, "body": "Since <a href=\"https://facebook.github.io/react-native/docs/asyncstorage\" rel=\"nofollow noreferrer\">AsyncStortage</a> is removed from core React-Native. This approach would be better in security concerned apps."}, {"owner": {"reputation": 993, "user_id": 10583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9c542545ed0c80df4efa010364d38?s=128&d=identicon&r=PG&f=1", "display_name": "Rario", "link": "https://stackoverflow.com/users/10583765/rario"}, "edited": false, "score": 0, "creation_date": 1569423446, "post_id": 57781963, "comment_id": 102594155, "body": "Would you also recommend it for <code>JWT</code>?"}, {"owner": {"reputation": 2704, "user_id": 1419872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XcZcI.jpg?s=128&g=1", "display_name": "I Putu Yoga Permana", "link": "https://stackoverflow.com/users/1419872/i-putu-yoga-permana"}, "reply_to_user": {"reputation": 993, "user_id": 10583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9c542545ed0c80df4efa010364d38?s=128&d=identicon&r=PG&f=1", "display_name": "Rario", "link": "https://stackoverflow.com/users/10583765/rario"}, "edited": false, "score": 0, "creation_date": 1569430287, "post_id": 57781963, "comment_id": 102597576, "body": "@Rario yes, I store my JWT token with above method."}], "tags": [], "owner": {"reputation": 2704, "user_id": 1419872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XcZcI.jpg?s=128&g=1", "display_name": "I Putu Yoga Permana", "link": "https://stackoverflow.com/users/1419872/i-putu-yoga-permana"}, "is_accepted": false, "score": 3, "last_activity_date": 1567574724, "creation_date": 1567574724, "answer_id": 57781963, "question_id": 57776847, "link": "https://stackoverflow.com/questions/57776847/how-to-manage-user-session-in-react-native/57781963#57781963", "title": "How to manage user session in React Native?", "body": "<p>Because session usually contains sensitive info, I would advise avoiding using <code>AsyncStorage</code> or similar solution. </p>\n\n<p>Use <strong>more secure approach</strong> with <a href=\"https://github.com/oblador/react-native-keychain\" rel=\"nofollow noreferrer\">react-native-keychain</a>. It will store the session on secure storage. </p>\n\n<p>Sample Code</p>\n\n<pre><code>import * as Keychain from 'react-native-keychain';\n\n// When you want to store the session\nconst rawValue = JSON.stringify(session);\nawait Keychain.setGenericPassword('session', rawValue);\n\n// When you want to retrieve the session\nconst credential = await Keychain.getGenericPassword();\nconst session = JSON.parse(credential.password)\n</code></pre>\n"}], "owner": {"reputation": 993, "user_id": 10583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9c542545ed0c80df4efa010364d38?s=128&d=identicon&r=PG&f=1", "display_name": "Rario", "link": "https://stackoverflow.com/users/10583765/rario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3586, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1567574724, "creation_date": 1567534530, "question_id": 57776847, "link": "https://stackoverflow.com/questions/57776847/how-to-manage-user-session-in-react-native", "title": "How to manage user session in React Native?", "body": "<p>I'm learning React Native with React Navigation and GraphQL written in TypeScript. I will use Facebook Login for users to register (with Passport.js or Auth0)</p>\n\n<p>How do I manage user session in React Native? Do I need to use Redux? </p>\n\n<p>Please enlighten me.</p>\n"}, {"tags": ["javascript", "typescript", "vue.js", "webpack"], "comments": [{"owner": {"reputation": 4470, "user_id": 1037355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/zGrNE.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/1037355/john"}, "edited": false, "score": 0, "creation_date": 1567536019, "post_id": 57776839, "comment_id": 101989276, "body": "<a href=\"https://github.com/maoberlehner/lazy-load-vue-components-when-they-become-visible/blob/master/src/App.vue#L103\" rel=\"nofollow noreferrer\">github.com/maoberlehner/&hellip;</a>"}, {"owner": {"reputation": 4470, "user_id": 1037355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/zGrNE.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/1037355/john"}, "edited": false, "score": 0, "creation_date": 1567536028, "post_id": 57776839, "comment_id": 101989283, "body": "someone built something already :D"}], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 8411093, "user_type": "registered", "profile_image": "https://graph.facebook.com/2008793866017288/picture?type=large", "display_name": "Mustafa Omar", "link": "https://stackoverflow.com/users/8411093/mustafa-omar"}, "is_accepted": false, "score": 2, "last_activity_date": 1580861266, "creation_date": 1580861266, "answer_id": 60067294, "question_id": 57776839, "link": "https://stackoverflow.com/questions/57776839/vuejs-lazy-loading-components-without-the-router/60067294#60067294", "title": "vuejs lazy loading components without the router", "body": "<p>If someone needs an answer here it is.<br>\nThe lazy loading is already shipped with Vue without any plugins, that what I figured out recently.</p>\n\n<p>Of course, this will work without Vue router.</p>\n\n<pre><code>const Component1 = () =&gt; import(\n  /* webpackChunkName: \"/js/component-name\" */ './components/Component1'\n)\n\nconst Component2 = () =&gt; import(\n  /* webpackChunkName: \"/js/component-name2\" */ './components/Component2'\n)\n\n const app = new Vue({\n  el: '#app',\n  components: {\n    Component1,\n    Component2\n  }\n})\n</code></pre>\n"}], "owner": {"reputation": 4470, "user_id": 1037355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/zGrNE.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/1037355/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1580861266, "creation_date": 1567534495, "question_id": 57776839, "link": "https://stackoverflow.com/questions/57776839/vuejs-lazy-loading-components-without-the-router", "title": "vuejs lazy loading components without the router", "body": "<p>Lazy loading components in vue is not difficult with webpack: <a href=\"https://alligator.io/vuejs/lazy-loading-vue-cli-3-webpack/\" rel=\"nofollow noreferrer\">https://alligator.io/vuejs/lazy-loading-vue-cli-3-webpack/</a></p>\n\n<p>I am trying to strip the initial load of an app to the absolute bare bones.. but i want to be able to trigger the import of components without the router.</p>\n\n<p>For example, the initial load of this app will load:</p>\n\n<ul>\n<li>a header</li>\n<li>a burger menu</li>\n<li>a dashboard\n\n<ul>\n<li>a form \n\n<ul>\n<li>a simple form</li>\n<li>upon user action, an image uploader is called into play</li>\n</ul></li>\n<li>a dashboard filter control</li>\n<li>a list view</li>\n</ul></li>\n</ul>\n\n<p>On initial load, the user must see all the above except the form and filter control box.</p>\n\n<p>Based on the docs, to lazy load these components I must include them into the router.. but i don't want the url to change just to open the form for example.</p>\n\n<p>How can I lazy load in components to the view without the router?</p>\n"}, {"tags": ["html", "typescript", "phaser-framework", "spine"], "comments": [{"owner": {"reputation": 7386, "user_id": 11912, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f43dfd72c066838b02985e4c6e7f4270?s=128&d=identicon&r=PG", "display_name": "James Skemp", "link": "https://stackoverflow.com/users/11912/james-skemp"}, "edited": false, "score": 0, "creation_date": 1567700677, "post_id": 57776815, "comment_id": 102050657, "body": "Based on your third edit, it sounds like you resolved this?"}, {"owner": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "reply_to_user": {"reputation": 7386, "user_id": 11912, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f43dfd72c066838b02985e4c6e7f4270?s=128&d=identicon&r=PG", "display_name": "James Skemp", "link": "https://stackoverflow.com/users/11912/james-skemp"}, "edited": false, "score": 0, "creation_date": 1567715671, "post_id": 57776815, "comment_id": 102056626, "body": "Yes, I&#39;m unable to answer my question yet. But I will add it as an answer. I&#39;m leaving open in case someone else encounters this."}], "answers": [{"tags": [], "owner": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "is_accepted": true, "score": 0, "last_activity_date": 1569019510, "creation_date": 1569019510, "answer_id": 58035876, "question_id": 57776815, "link": "https://stackoverflow.com/questions/57776815/loading-a-spine-atlas-png-and-json-from-base64-in-phaser/58035876#58035876", "title": "Loading a Spine .atlas .png and .json from base64 in phaser", "body": "<pre><code>protected onSpineAnimationLoaded( data: SpineAnimationData, image: HTMLImageElement, onLoadingComplete: Function ): void {\n    let texture = new Spine.webgl.GLTexture( this.game.context as any, image )\n    this.cache.custom.spineTextures.add( data.name, texture );\n\n    let splitAtlasBase64 = data.atlas.split( ',' );\n    let atlasBase64 = splitAtlasBase64[ splitAtlasBase64.length - 1 ];\n\n    this.cache.custom.spine.add( data.name, { data: atob( atlasBase64 ) } );\n    this.cache.json.add( data.name, data.src );\n\n    ( this.load as any ).spine( data.name, undefined, undefined );\n    this.filesLoaded++;\n\n    if ( this.filesLoaded &gt;= this.filesToLoad ) {\n        onLoadingComplete();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 58035876, "answer_count": 1, "score": 0, "last_activity_date": 1569019510, "creation_date": 1567534358, "last_edit_date": 1567700553, "question_id": 57776815, "link": "https://stackoverflow.com/questions/57776815/loading-a-spine-atlas-png-and-json-from-base64-in-phaser", "title": "Loading a Spine .atlas .png and .json from base64 in phaser", "body": "<p>js from phaser. I am trying to embed my spine animation files into the bundle and load them but I am having trouble as SpinePlugin is looking for a url not a base64 string.</p>\n\n<p>I have this working with audio and spritesheets can someone help point me in the correct direction</p>\n\n<p>My spritesheet loading  code</p>\n\n<pre><code>  spritesheets.forEach( ( data: SpriteSheetData ) =&gt; {\n            let image = new Image();\n            image.src = data.image;\n            image.onload = this.onSpriteSheetLoaded.bind( this, data, image, onLoadingComplete );\n        } );\n</code></pre>\n\n<pre><code> protected onSpriteSheetLoaded( data: SpriteSheetData, image: HTMLImageElement, onLoadingComplete: Function ): void {\n        this.textures.addAtlasJSONArray( data.name, image, data.src );\n        this.filesLoaded++;\n        if ( this.filesLoaded &gt;= this.filesToLoad ) {\n            onLoadingComplete();\n        }\n    }\n</code></pre>\n\n<p>Here is my attempt at loading the spine files</p>\n\n<pre><code>        spineAnimations.forEach( ( data: SpineAnimationData ) =&gt; {\n            let image = new Image();\n            image.src = data.image;\n            image.onload = this.onSpineAnimationLoaded.bind( this, data, image, onLoadingComplete );\n        } );\n</code></pre>\n\n<pre><code>    protected onSpineAnimationLoaded( data: SpineAnimationData, image: HTMLImageElement, onLoadingComplete: Function ): void {\n        this.textures.addImage( data.name, image );\n        ( this.load as any ).spine( data.name, data.src, data.atlas );\n        this.filesLoaded++;\n        if ( this.filesLoaded &gt;= this.filesToLoad ) {\n            onLoadingComplete();\n        }\n    }\n</code></pre>\n\n<p>image and atlas are in base64 but the json file is not, when I pass it in here its the actual json object. How can I pass a url to this instead of the actual object?</p>\n\n<p><em>Edit</em></p>\n\n<p>Okay so the files are loading and into the correct cache now, but It seems it doesn't like the .atlas as a base64.</p>\n\n<pre><code>    protected onSpineAnimationLoaded( data: SpineAnimationData, image: HTMLImageElement, onLoadingComplete: Function ): void {\n        let texture = this.textures.addImage( data.name, image );\n        this.cache.custom.spineTextures.add( data.name, texture );\n        this.cache.custom.spine.add( data.name, data.atlas );\n        this.cache.json.add( data.name, data.src );\n        ( this.load as any ).spine( data.name, undefined, undefined );\n        this.filesLoaded++;\n        if ( this.filesLoaded &gt;= this.filesToLoad ) {\n            onLoadingComplete();\n        }\n    }\n</code></pre>\n\n<p>How to convert back?</p>\n\n<p><em>EDIT #2</em></p>\n\n<p>Okay so its converting properly now but im stuck on how to create a spine.webgl.GLTexture as that is undefined.</p>\n\n<pre><code> protected onSpineAnimationLoaded( data: SpineAnimationData, image: HTMLImageElement, onLoadingComplete: Function ): void {\n        let texture = new Spine.webgl.GLTexture( this.game.context as any, image )\n        this.cache.custom.spineTextures.add( data.name, texture );\n        let splitAtlasBase64 = data.atlas.split( ',' );\n        let atlasBase64 = splitAtlasBase64[ splitAtlasBase64.length - 1 ];\n        this.cache.custom.spine.add( data.name, { data: atob( atlasBase64 ) } );\n        this.cache.json.add( data.name, data.src );\n        ( this.load as any ).spine( data.name, undefined, undefined );\n        this.filesLoaded++;\n        if ( this.filesLoaded &gt;= this.filesToLoad ) {\n            onLoadingComplete();\n        }\n    }\n</code></pre>\n\n<p><em>Edit 3</em></p>\n\n<p>Found my solution, needed to also import Spine</p>\n\n<pre><code>import Spine from '../../node_modules/phaser/plugins/spine/src/runtimes/spine-both.js';\n</code></pre>\n\n<p>Final Loading code</p>\n\n<pre><code>   protected onSpineAnimationLoaded( data: SpineAnimationData, image: HTMLImageElement, onLoadingComplete: Function ): void {\n        let texture = new Spine.webgl.GLTexture( this.game.context as any, image )\n        this.cache.custom.spineTextures.add( data.name, texture );\n        let splitAtlasBase64 = data.atlas.split( ',' );\n        let atlasBase64 = splitAtlasBase64[ splitAtlasBase64.length - 1 ];\n        this.cache.custom.spine.add( data.name, { data: atob( atlasBase64 ) } );\n        this.cache.json.add( data.name, data.src );\n        ( this.load as any ).spine( data.name, undefined, undefined );\n        this.filesLoaded++;\n        if ( this.filesLoaded &gt;= this.filesToLoad ) {\n            onLoadingComplete();\n        }\n    }\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "typescript", "class"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 3, "creation_date": 1567532245, "post_id": 57776382, "comment_id": 101987854, "body": "You&#39;ll have to either push directly onto <code>_foo</code> or provide a function to do that. The <code>.filter()</code> method returns a new array."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1567532827, "post_id": 57776382, "comment_id": 101988088, "body": "You would have to do quite a bit of coding to make a &quot;live&quot; filtered array where updates would propagate back to the backing array (probably using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\" rel=\"nofollow noreferrer\"><code>Proxy</code></a>), and there&#39;d be lots of edge cases to deal with.  Do you really need to support this instead of just adding a <code>pushFoo()</code> method onto <code>Test</code>?"}, {"owner": {"reputation": 475, "user_id": 11714668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059c16fa2447ef8d1b968658d866c70c?s=128&d=identicon&r=PG&f=1", "display_name": "Jbluehdorn", "link": "https://stackoverflow.com/users/11714668/jbluehdorn"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567532944, "post_id": 57776382, "comment_id": 101988126, "body": "@jcalz Not terribly. I just wanted to see if there was a reasonable way to do it simply but I&#39;m gathering that its not. My current solution is what Pointy suggested but it requires a bit of rewriting of existing code and reduces my class&#39; extensibility just a bit so I wanted to make sure there wasn&#39;t another way. Thanks all."}], "answers": [{"tags": [], "owner": {"reputation": 6328, "user_id": 515774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HEi63.jpg?s=128&g=1", "display_name": "Muthukumar", "link": "https://stackoverflow.com/users/515774/muthukumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1567532406, "creation_date": 1567532406, "answer_id": 57776459, "question_id": 57776382, "link": "https://stackoverflow.com/questions/57776382/how-do-i-add-the-capability-to-push-onto-a-getter-that-returns-a-filtered-array/57776459#57776459", "title": "How do I add the capability to push onto a getter that returns a filtered array?", "body": "<p>You could just have a public method, to do that?\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Test {\r\n\t_foo: number[];\r\n  \r\n  constructor() {\r\n  \tthis._foo = [1,2,3,4,5];\r\n  }\r\n  \r\n  get foo(): number[] {\r\n  \treturn this._foo.filter(x =&gt; {\r\n    \treturn x &gt; 2;\r\n    });\r\n  }\r\n\r\n  push(x: number) {\r\n  \tthis._foo.push(x);\r\n  }\r\n}\r\n\r\nlet obj = new Test();\r\nobj.push(6);\r\n\r\nconsole.log(obj);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 15224, "user_id": 7328218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d338eadf83deb112f919f4c8a6052a?s=128&d=identicon&r=PG&f=1", "display_name": "Taki", "link": "https://stackoverflow.com/users/7328218/taki"}, "is_accepted": false, "score": 0, "last_activity_date": 1567532641, "creation_date": 1567532641, "answer_id": 57776507, "question_id": 57776382, "link": "https://stackoverflow.com/questions/57776382/how-do-i-add-the-capability-to-push-onto-a-getter-that-returns-a-filtered-array/57776507#57776507", "title": "How do I add the capability to push onto a getter that returns a filtered array?", "body": "<p>You can use a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set\" rel=\"nofollow noreferrer\">Setter</a> to push into <code>foo</code></p>\n\n<pre><code>set foo(x) {\n  this._foo.push(x);\n}\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Test {\r\n  constructor() {\r\n    this._foo = [1, 2, 3, 4, 5];\r\n  }\r\n\r\n  set foo(x) {\r\n    this._foo.push(x);\r\n  }\r\n\r\n  get foo() {\r\n    return this._foo.filter(x =&gt; {\r\n      return x &gt; 2;\r\n    });\r\n  }\r\n}\r\n\r\nlet obj = new Test();\r\nobj.foo = 6;\r\n\r\nconsole.log(obj.foo);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 11714668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059c16fa2447ef8d1b968658d866c70c?s=128&d=identicon&r=PG&f=1", "display_name": "Jbluehdorn", "link": "https://stackoverflow.com/users/11714668/jbluehdorn"}, "edited": false, "score": 0, "creation_date": 1567537824, "post_id": 57777453, "comment_id": 101989951, "body": "Exactly what I was looking for. Thanks!"}], "tags": [], "owner": {"reputation": 2697, "user_id": 2800218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tQV04.jpg?s=128&g=1", "display_name": "Andrea Giammarchi", "link": "https://stackoverflow.com/users/2800218/andrea-giammarchi"}, "is_accepted": true, "score": 1, "last_activity_date": 1567537631, "creation_date": 1567537631, "answer_id": 57777453, "question_id": 57776382, "link": "https://stackoverflow.com/questions/57776382/how-do-i-add-the-capability-to-push-onto-a-getter-that-returns-a-filtered-array/57777453#57777453", "title": "How do I add the capability to push onto a getter that returns a filtered array?", "body": "<p>alternative via override:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const {create} = Object;\n\nclass Test {\n  _foo: number[];\n  _push: Object;\n\n  constructor() {\n    this._foo = [1,2,3,4,5];\n    this._push = {push: {value: this._foo.push.bind(this._foo)}};\n  }\n\n  get foo(): number[] {\n    return create(this._foo.filter(x =&gt; x &gt; 2), this._push);\n  }\n}\n\nlet obj = new Test();\nobj.foo.push(6);\n\nconsole.log(obj.foo.slice()); // 3,4,5,6\n</code></pre>\n\n<p>You could also use directly:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  get foo(): number[] {\n    const filtered = this._foo.filter(x =&gt; x &gt; 2);\n    filtered.push = this._foo.push.bind(this._foo);\n    return filtered;\n  }\n</code></pre>\n\n<p>or assign <code>this._push</code> once in the constructor as function and do the same, however this might de-optimize in some JS engine (i.e. v8)</p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 1, "last_activity_date": 1567537773, "creation_date": 1567537773, "answer_id": 57777478, "question_id": 57776382, "link": "https://stackoverflow.com/questions/57776382/how-do-i-add-the-capability-to-push-onto-a-getter-that-returns-a-filtered-array/57777478#57777478", "title": "How do I add the capability to push onto a getter that returns a filtered array?", "body": "<p>I wouldn't recommend doing this, but if you <em>just</em> need to support <code>push()</code> in a way that updates the backing array (as well as the, uh, \"fronting\" array), and you don't need to modify things with any other method (such as indexed access), you can do something like this:</p>\n\n<pre><code>class Test {\n  _foo: number[];\n\n  constructor() {\n    this._foo = [1, 2, 3, 4, 5];\n  }\n\n  get foo(): number[] {\n    const _foo = this._foo;\n    const filt: number[] = [];\n    filt.push = (...args: number[]) =&gt; {\n      _foo.push(...args); // push onto original array\n      filt.splice(0, filt.length, ..._foo.filter(x =&gt; x &gt; 2)); // re-filter\n      return filt.length;\n    };\n    filt.push(); // initialize\n    return filt;\n  }\n}\n</code></pre>\n\n<p>Here we are returning a filtered array with a custom <code>push()</code> method that updates itself and the backing array.  Here's how it acts:</p>\n\n<pre><code>let obj = new Test();\n\nconsole.log(obj.foo); // [3, 4, 5]\nconsole.log(obj._foo); // [1, 2, 3, 4, 5]\n\nobj.foo.push(6);\nconsole.log(obj.foo); // [3, 4, 5, 6]\nconsole.log(obj._foo); // [1, 2, 3, 4, 5, 6]\n\nobj.foo.push(9, 10, 11); \nconsole.log(obj.foo); // [3, 4, 5, 6, 9, 10, 11]\nconsole.log(obj._foo); // [1, 2, 3, 4, 5, 6, 9, 10, 11]\n\nobj.foo.push(1, 1000, 0, 2000); \nconsole.log(obj.foo); // [3, 4, 5, 6, 9, 10, 11, 1000, 2000]\nconsole.log(obj._foo); // [1, 2, 3, 4, 5, 6, 9, 10, 11, 1000, 0, 2000]\n</code></pre>\n\n<p>I... <em>think</em> that's what you want?  But really I'd recommend against things with unusual side effects like this.  Giving <code>Test</code> a public <code>pushFoo()</code> method seems to be the most conventional approach.</p>\n\n<p>Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/MYGwhgzhAEAqCmEAu0DeBYAUNaB9AZgPaEBc0AdgK4C2ARvAE4DaAugNxZY7CHnIOVgSQgwAUASjRcc0JAAsAlhAB0BYtAC80JgEYANNABMBgMwGALAYCs7aQF9O2aAHN4KIoQlkqdRqylO3LzIeB6asooqaoQcgdA8fO4KIEjeNPTMLOGssTLQ+MlIygAOlBBy4aLK1WAMzhBpvpmSGgB8AXk40SVlclU1dRDibNAA9KPQpeXQvMIzDArOCuRgINC1DGAAntJ5BSnKEMUgCsDwogAMBvtFIPDkzvIG1aoeyjeMogAemu0-7YZxMMxhMGPAALQfBi7GRgpCUBjkfKFZR3B7yXIyOyYnA3HrlCQjcbQZYKJAKVYKABe8BhcIRSJumIcmBZjjuKEItAAVuFyPAAO5wRBIQmOBIQQh3VGEZyiLnc97EYHEphmaCWaA2LASqXwGVyhWvZVEia6AzGaDqzXazBYI1vKZ9ABswx1wT1BvlPKVhBVZut1gMzpY7r4npAsu9iui-u0+iMpgsQegIccDuI+L6AE4DDortAdDpgWHJdLI4afR442rk1rgwZc4WC0XQ5hdeWo0bY6b4xakxqU87G3mWzo2-aq5mnaIE-mLgWC4YFxcS+2PZ3K4rq73a4P66mR8283OVxaV22O-qK9HjX7dwnLYGD8PoE38yfRwuDEuL44gA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 475, "user_id": 11714668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059c16fa2447ef8d1b968658d866c70c?s=128&d=identicon&r=PG&f=1", "display_name": "Jbluehdorn", "link": "https://stackoverflow.com/users/11714668/jbluehdorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57777453, "answer_count": 4, "score": 0, "last_activity_date": 1567537773, "creation_date": 1567532112, "question_id": 57776382, "link": "https://stackoverflow.com/questions/57776382/how-do-i-add-the-capability-to-push-onto-a-getter-that-returns-a-filtered-array", "title": "How do I add the capability to push onto a getter that returns a filtered array?", "body": "<p>I have class that has a private array and a getter that returns a filtered version of said array. I would like to be able to simply call a push onto the filtered array which would update the underlying array without having to directly call the underlying array. I've tried accessing the array prototype but couldn't quite figure out how to do so. </p>\n\n<p>Here's a code snippet to emulate what I'm trying to do:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Test {\r\n\t_foo: number[];\r\n  \r\n  constructor() {\r\n  \tthis._foo = [1,2,3,4,5];\r\n  }\r\n  \r\n  get foo(): number[] {\r\n  \treturn this._foo.filter(x =&gt; {\r\n    \treturn x &gt; 2;\r\n    });\r\n  }\r\n}\r\n\r\nlet obj = new Test();\r\nobj.foo.push(6);\r\n\r\nconsole.log(obj);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Any advice is appreciated.</p>\n"}]