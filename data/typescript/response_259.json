[{"tags": ["reactjs", "typescript", "redux", "react-redux", "state"], "answers": [{"comments": [{"owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "edited": false, "score": 0, "creation_date": 1577319672, "post_id": 59482723, "comment_id": 105141779, "body": "Yup, that&#39;s my bad for overlooking. Was actually half way through editing my question. Either way, sadly even with your solution i still get a similar type-error as mentioned in my original question"}, {"owner": {"reputation": 676, "user_id": 12581397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lxz0A.png?s=128&g=1", "display_name": "Jose Felix", "link": "https://stackoverflow.com/users/12581397/jose-felix"}, "reply_to_user": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "edited": false, "score": 0, "creation_date": 1577320366, "post_id": 59482723, "comment_id": 105141851, "body": "Yes, I now know the problem! Give me a sec rewriting the solution :)"}, {"owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "edited": false, "score": 0, "creation_date": 1577361379, "post_id": 59482723, "comment_id": 105150799, "body": "This should return the modified state. Instead of only <code>state</code> I&#39;m guessing easiest way would be to splice the array until <code>optionId</code> and spread <code>...until splice, new item, ...after splice</code>?"}, {"owner": {"reputation": 676, "user_id": 12581397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lxz0A.png?s=128&g=1", "display_name": "Jose Felix", "link": "https://stackoverflow.com/users/12581397/jose-felix"}, "reply_to_user": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "edited": false, "score": 0, "creation_date": 1577387905, "post_id": 59482723, "comment_id": 105159356, "body": "It is returning the modified state. Thanks to Immer  we can do this and will get an immutable result regardless. Check out their <a href=\"https://redux-toolkit.js.org/api/createReducer\" rel=\"nofollow noreferrer\">docs</a> for more info."}], "tags": [], "owner": {"reputation": 676, "user_id": 12581397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lxz0A.png?s=128&g=1", "display_name": "Jose Felix", "link": "https://stackoverflow.com/users/12581397/jose-felix"}, "is_accepted": false, "score": 1, "last_activity_date": 1577321385, "last_edit_date": 1577321385, "creation_date": 1577319163, "answer_id": 59482723, "question_id": 59482664, "link": "https://stackoverflow.com/questions/59482664/modifying-state-for-specific-item-in-array-in-redux-reducer/59482723#59482723", "title": "Modifying state for specific item in array in redux reducer", "body": "<p>the <code>push</code> method of <code>Array</code> returns the new length of the array not the array itself. What you can do is just <code>concat</code> the new object to the array which in turn will return the new array with the new question option.  </p>\n\n<pre><code>[...state.quizEditor][action.payload.questionId].questionOptions.concat({\n        id: action.payload.id,\n        optionText: action.payload.optionText,\n        isValid: action.payload.isValid,\n     })\n</code></pre>\n\n<p>Furthermore, we have to modify only that property in the state with our new array:</p>\n\n<pre><code>const reducer = createReducer({\n  //...}, {\n  [actionAddQuestionOption.type]: (state, action) =&gt; {\n    const quizEditor = [...state.quizEditor];\n    quizEditor[action.payload.questionId].questionOptions = quizEditor[\n      action.payload.questionId\n    ].questionOptions.concat({\n      id: action.payload.id,\n      optionText: action.payload.optionText,\n      isValid: action.payload.isValid\n    });\n\n    return {\n      ...state,\n      quizEditor\n    };\n  }\n});\n</code></pre>\n\n<p>Thanks to immer in redux toolkit we can make it more readable: </p>\n\n<pre><code>const reducer = createReducer({\n  //...}, {\n  [actionAddQuestionOption.type]: (state, action) =&gt; {\n    const question = state.quizEditor[action.payload.questionId];\n    question.questionOptions = [\n      ...question.questionOptions,\n      {\n        id: action.payload.id,\n        optionText: action.payload.optionText,\n        isValid: action.payload.isValid\n      }\n    ];\n\n    return state;\n  }\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "edited": false, "score": 0, "creation_date": 1577368174, "post_id": 59484536, "comment_id": 105153080, "body": "Hey everyone, I&#39;ve solved the question thanks to AsafAviv&#39;s help, either way, just leaving this here as a <b>working example</b> in case anyone might find it useful: <a href=\"https://codesandbox.io/s/great-bardeen-98ggl?fontsize=14&amp;hidenavigation=1&amp;theme=dark\" rel=\"nofollow noreferrer\">codesandbox.io/s/&hellip;</a>"}], "tags": [], "owner": {"reputation": 8132, "user_id": 8605960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/manal.jpg?s=128&g=1", "display_name": "Asaf Aviv", "link": "https://stackoverflow.com/users/8605960/asaf-aviv"}, "is_accepted": true, "score": 1, "last_activity_date": 1577368185, "last_edit_date": 1577368185, "creation_date": 1577341058, "answer_id": 59484536, "question_id": 59482664, "link": "https://stackoverflow.com/questions/59482664/modifying-state-for-specific-item-in-array-in-redux-reducer/59484536#59484536", "title": "Modifying state for specific item in array in redux reducer", "body": "<p>Since you are using <a href=\"https://redux-toolkit.js.org/\" rel=\"nofollow noreferrer\">redux-toolkit</a> which has <a href=\"https://github.com/immerjs/immer\" rel=\"nofollow noreferrer\">immer</a> built in you can just mutate the state directly and it will transform it into an immutable update internally</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const reducer = createReducer({\n  [actionAddQuestionOption.type]: (state, { payload: { questionId, ...option }}) =&gt; {\n    const question = state.questionquizEditor(question =&gt; question.id === questionId)\n    question.questionOptions.push(option)\n  }\n})\n</code></pre>\n\n<p>The way to make it an immuable update is like this</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const reducer = createReducer({\n  [actionAddQuestionOption.type]: (state, { payload: { questionId, ...option } }) =&gt; ({\n    ...state,\n    quizEditor: state.quizEditor.map(question =&gt;\n      (question.id === questionId\n        ? {\n          ...question,\n          questionOptions: [...question.questionOptions, option],\n        }\n        : question)),\n  }),\n})\n</code></pre>\n"}], "owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 59484536, "answer_count": 2, "score": 0, "last_activity_date": 1577368185, "creation_date": 1577318184, "last_edit_date": 1577318813, "question_id": 59482664, "link": "https://stackoverflow.com/questions/59482664/modifying-state-for-specific-item-in-array-in-redux-reducer", "title": "Modifying state for specific item in array in redux reducer", "body": "<p>I can't quite wrap my head around the boilerplate of <a href=\"/questions/tagged/redux\" class=\"post-tag\" title=\"show questions tagged &#39;redux&#39;\" rel=\"tag\">redux</a>. I looked up common patterns for <a href=\"https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/\" rel=\"nofollow noreferrer\">immutable modifying of state</a> but issue is, all these patterns simply push towards the end and not for a specific index.</p>\n\n<p>Before I'll go into actual code, here's what the <strong>structure of the state</strong> looks like for better imagination <em>(pseudo-code)</em>:</p>\n\n<pre><code>state = {\n   quizMenu: {...},\n   quizEditor: Array&lt;Question&gt;,\n\n    &gt; type Question = {\n        id: number,\n        question: string,\n        questionOptions: Array&lt;QuestionOption&gt;,\n      }\n\n        &gt; type QuestionOption = {\n           id: number,\n           optionText: string,\n           isValid: boolean,\n          }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UlhHU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UlhHU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Hopefully it makes sense. I have created an action for adding questions, which works fine. Now I'm <strong>trying to create an action for adding option to an already existing question</strong>, but I can't wrap my head around how to in the nested arrays of objects.</p>\n\n<p>Here's how my action in question is defined:</p>\n\n<pre><code>const AQO = 'ADD_QUESTION_OPTION';\n\n/*\n * @param questionId - ID of the question we're accesssing in quizEditor array\n * @param id - id of the option we're adding (handled in component)\n*/\nconst actionAddQuestionOption = createAction(\n  AQO, \n  (questionId: number, id: number) =&gt; ({ \n    payload: {\n      id,\n      optionText: 'New option',\n      isValid: false,\n      questionId,\n    },\n  })\n);\n</code></pre>\n\n<p>Now my reducer is the following way:</p>\n\n<pre><code>const reducer = createReducer({//...}, {\n   [actionAddQuestionOption.type]: (state, action) =&gt; ({\n     ...state,\n     quizEditor: [...state.quizEditor][action.payload.questionId].questionOptions.push({\n        id: action.payload.id,\n        optionText: action.payload.optionText,\n        isValid: action.payload.isValid,\n     })\n   })\n}\n</code></pre>\n\n<p>This just ends up in this monster type-error: <a href=\"https://pastebin.com/raw/pBbnxcQp\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/pBbnxcQp</a></p>\n\n<p>But I'm pretty sure I'm accessing the Array inside the array of objects incorrectly.</p>\n\n<pre><code>quizEditor: [...state.quizEditor][action.payload.questionId].questionOptions\n</code></pre>\n\n<p>Does anyone know what would be the proper way of going about accessing it? Much appreciated!</p>\n"}, {"tags": ["javascript", "typescript", "visual-studio-code", "jsdoc"], "answers": [{"comments": [{"owner": {"reputation": 2557, "user_id": 8340889, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/75A4R.jpg?s=128&g=1", "display_name": "i.brod", "link": "https://stackoverflow.com/users/8340889/i-brod"}, "edited": false, "score": 0, "creation_date": 1577362034, "post_id": 59484679, "comment_id": 105151004, "body": "Yes but i wasn&#39;t sure how to actually import that type(seems it&#39;s impossible to import TS types when you&#39;re using JS). What worked eventually is importing directly the Model from &#39;sequelize/lib/model&#39;"}], "tags": [], "owner": {"reputation": 59, "user_id": 12124406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08e214ff3091d8ae0da9aae62b775fc7?s=128&d=identicon&r=PG&f=1", "display_name": "aelesia", "link": "https://stackoverflow.com/users/12124406/aelesia"}, "is_accepted": false, "score": 0, "last_activity_date": 1577341963, "creation_date": 1577341963, "answer_id": 59484679, "question_id": 59482229, "link": "https://stackoverflow.com/questions/59482229/how-to-manually-import-a-type-from-an-index-d-ts-file-and-tell-vs-code-intellis/59484679#59484679", "title": "How to manually import a type from an index.d.ts file, and tell VS Code intellisense that a variable is of that type?", "body": "<p>If you're using Typescript, set the Type in the constructor like so</p>\n\n<pre><code>constructor(model: Sequelize){\n    this.model = model\n}\n</code></pre>\n\n<p>If you're using Javascript, write the JSDocs like so:</p>\n\n<pre><code>/**\n * @param {Sequelize} model\n */\nconstructor(model){\n    this.model = model\n}\n</code></pre>\n"}], "owner": {"reputation": 2557, "user_id": 8340889, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/75A4R.jpg?s=128&g=1", "display_name": "i.brod", "link": "https://stackoverflow.com/users/8340889/i-brod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577341963, "creation_date": 1577312345, "question_id": 59482229, "link": "https://stackoverflow.com/questions/59482229/how-to-manually-import-a-type-from-an-index-d-ts-file-and-tell-vs-code-intellis", "title": "How to manually import a type from an index.d.ts file, and tell VS Code intellisense that a variable is of that type?", "body": "<p>I have the following problem: I'm building some program based on Express.js(using plain JS, not TS).\nI'm using Sequelize as an ORM.</p>\n\n<p>I have \"repository\" classes, which inherit functionality from a BaseRepository class. This is an example UserRepo:</p>\n\n<pre><code>   class UserRepo extends BaseRepo{\n        constructor(model){\n            super(model);\n        }    \n    }\n</code></pre>\n\n<p>The parent class, BaseRepo:</p>\n\n<pre><code>class BaseRepo{\n\n    constructor(model){//VSCODE HAS NO CLUE WHAT TYPE THAT IS\n        this.model = model\n    }\n    async index(){\n        const records = await this.model.findAll();\n        return records;\n    }\n\n    ...\n\n}   \n</code></pre>\n\n<p>The problem is that VSCode doesn't know that this.model is a <strong>Sequelize model</strong>, being that it gets injected elsewhere. Therefore, intellisense doesn't work.</p>\n\n<p>Is there any way to manually import the model type declaration, and tell VSCode to use it, perhaps using JSDoc?</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 310, "user_id": 9674146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dda8420960adb555dc8ba9cd02c1602?s=128&d=identicon&r=PG&f=1", "display_name": "ic_paty", "link": "https://stackoverflow.com/users/9674146/ic-paty"}, "edited": false, "score": 0, "creation_date": 1577305021, "post_id": 59481456, "comment_id": 105139655, "body": "could you please share the above code and reproduce the error in a stackblitz link ?"}, {"owner": {"reputation": 164, "user_id": 6692230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dpjhy.jpg?s=128&g=1", "display_name": "ChechoCZ", "link": "https://stackoverflow.com/users/6692230/chechocz"}, "edited": false, "score": 0, "creation_date": 1577305266, "post_id": 59481456, "comment_id": 105139697, "body": "I&#39;m not sure if it makes any difference, but &#39;Authorization&#39; has an &#39;A&#39; in uppercase. And, why you don&#39;t just return the token directly from localstorage? Like this:  <code>getToken() {    return localStorage.getItem(&#39;token&#39;);  }</code>  Hope it helps!"}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577306084, "post_id": 59481456, "comment_id": 105139834, "body": "Where is the code that sets the token initially?"}, {"owner": {"reputation": 77, "user_id": 11672851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6JjU34iegJU/AAAAAAAAAAI/AAAAAAAAA6Y/kIkSKhf4pzg/photo.jpg?sz=128", "display_name": "ardoYep", "link": "https://stackoverflow.com/users/11672851/ardoyep"}, "edited": false, "score": 0, "creation_date": 1577307386, "post_id": 59481456, "comment_id": 105140034, "body": "Really i dont set initially token in any constructor"}, {"owner": {"reputation": 77, "user_id": 11672851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6JjU34iegJU/AAAAAAAAAAI/AAAAAAAAA6Y/kIkSKhf4pzg/photo.jpg?sz=128", "display_name": "ardoYep", "link": "https://stackoverflow.com/users/11672851/ardoyep"}, "edited": false, "score": 0, "creation_date": 1577307490, "post_id": 59481456, "comment_id": 105140048, "body": "<a href=\"http://i.imgur.com/Usj6O69.png\" rel=\"nofollow noreferrer\">i.imgur.com/Usj6O69.png</a> here set token value"}], "answers": [{"tags": [], "owner": {"reputation": 1054, "user_id": 10508250, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KjjYVoCOwmg/AAAAAAAAAAI/AAAAAAAAAKU/5OoE4lwEnYw/photo.jpg?sz=128", "display_name": "Tharindu Vindula", "link": "https://stackoverflow.com/users/10508250/tharindu-vindula"}, "is_accepted": false, "score": 1, "last_activity_date": 1577313760, "last_edit_date": 1577313760, "creation_date": 1577305884, "answer_id": 59481658, "question_id": 59481456, "link": "https://stackoverflow.com/questions/59481456/localstorage-getitemtoken-returns-null/59481658#59481658", "title": "LocalStorage.getItem(&#39;token) returns null", "body": "<p>i think it get some time to set token as a local variable pls use await and async function to generate and set token</p>\n\n<p>eg:-</p>\n\n<pre><code>async setToken(token){\n  await localStorage.setItem('token', token);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 11672851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6JjU34iegJU/AAAAAAAAAAI/AAAAAAAAA6Y/kIkSKhf4pzg/photo.jpg?sz=128", "display_name": "ardoYep", "link": "https://stackoverflow.com/users/11672851/ardoyep"}, "edited": false, "score": 0, "creation_date": 1577307760, "post_id": 59481671, "comment_id": 105140101, "body": "returns undefined"}], "tags": [], "owner": {"reputation": 310, "user_id": 9674146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dda8420960adb555dc8ba9cd02c1602?s=128&d=identicon&r=PG&f=1", "display_name": "ic_paty", "link": "https://stackoverflow.com/users/9674146/ic-paty"}, "is_accepted": false, "score": 0, "last_activity_date": 1577306413, "last_edit_date": 1577306413, "creation_date": 1577306054, "answer_id": 59481671, "question_id": 59481456, "link": "https://stackoverflow.com/questions/59481456/localstorage-getitemtoken-returns-null/59481671#59481671", "title": "LocalStorage.getItem(&#39;token) returns null", "body": "<p>Could you please try this: </p>\n\n<pre><code>setTimeout(function() {\n    let token = localStorage.getItem('token');\n}, 50);\n</code></pre>\n\n<p>if you are trying to fetch the token value just after setting it, it will not works and you will get null, try to call <code>localStorage.getItem</code> after the call <code>setItem</code> be finished.</p>\n"}], "owner": {"reputation": 77, "user_id": 11672851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6JjU34iegJU/AAAAAAAAAAI/AAAAAAAAA6Y/kIkSKhf4pzg/photo.jpg?sz=128", "display_name": "ardoYep", "link": "https://stackoverflow.com/users/11672851/ardoyep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1577313760, "creation_date": 1577303826, "last_edit_date": 1577305342, "question_id": 59481456, "link": "https://stackoverflow.com/questions/59481456/localstorage-getitemtoken-returns-null", "title": "LocalStorage.getItem(&#39;token) returns null", "body": "<p>In my code, I need to set the header authorization (Bearer + token), but when I print it, the bearer is null but there is a variable token exist in my localstorage</p>\n\n<p>code auth.services.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>getToken() {\n    const token = localStorage.getItem('token');\n    console.log(token);\n    return token;\n  }\n</code></pre>\n\n<p>token-interceptor.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>constructor(private authService: AuthService) { }\n\nintercept(req, next) {\n\n  const tokenizeReq = req.clone({\n    setHeaders: {\n      authorization: `Bearer ${this.authService.getToken()}`\n    }\n  });\n  return next.handle(tokenizeReq);\n}\n\n</code></pre>\n\n<p><strong>Outputs in console</strong></p>\n\n<p><a href=\"https://i.imgur.com/nxs7PTt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/nxs7PTt.png\" alt=\"Outputs in console\"></a></p>\n\n<p><strong>Network variables</strong></p>\n\n<p><img src=\"https://i.imgur.com/ryhtqQ8.png\" alt=\"Network variables\"></p>\n\n<p><strong>LocalStorage</strong>\n<img src=\"https://i.imgur.com/meKUewK.png\" alt=\"LocalStorage\"></p>\n\n<p>I don't know how to set null. Why is this happening</p>\n"}, {"tags": ["angular", "typescript", "angular-ng-if"], "answers": [{"comments": [{"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577297705, "post_id": 59480849, "comment_id": 105138372, "body": "Oh. But what if we want it with *ngIf. I dont know. I just asking."}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 1, "creation_date": 1577297764, "post_id": 59480849, "comment_id": 105138389, "body": "<code>ngIf</code> is a structural directive, used to conditionally render elements in the dom, which is different to your use case"}, {"owner": {"reputation": 3991, "user_id": 6351733, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-7rlHnLUn8UY/AAAAAAAAAAI/AAAAAAAAAAA/muEcVvpCdcM/photo.jpg?sz=128", "display_name": "Maurice", "link": "https://stackoverflow.com/users/6351733/maurice"}, "reply_to_user": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577298082, "post_id": 59480849, "comment_id": 105138453, "body": "@Tanzeel try again only this time with <code>[]</code> around pTooltip`"}, {"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577298201, "post_id": 59480849, "comment_id": 105138475, "body": "Tried. But now I&#39;m getting this. <code>Template parse errors: Parser Error: Got interpolation ({{}}) where expression was expected at column 0 </code>"}, {"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577298224, "post_id": 59480849, "comment_id": 105138478, "body": "This <code>[pTooltip] = &quot;allowUpvote ? msg1 : msg2&quot;</code> is working. AlleXys answered."}, {"owner": {"reputation": 3991, "user_id": 6351733, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-7rlHnLUn8UY/AAAAAAAAAAI/AAAAAAAAAAA/muEcVvpCdcM/photo.jpg?sz=128", "display_name": "Maurice", "link": "https://stackoverflow.com/users/6351733/maurice"}, "edited": false, "score": 0, "creation_date": 1577298298, "post_id": 59480849, "comment_id": 105138498, "body": "ok accept AlleXys&#39;s answer as the accepted answer then, i&#39;ll adjust my own answer"}], "tags": [], "owner": {"reputation": 3991, "user_id": 6351733, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-7rlHnLUn8UY/AAAAAAAAAAI/AAAAAAAAAAA/muEcVvpCdcM/photo.jpg?sz=128", "display_name": "Maurice", "link": "https://stackoverflow.com/users/6351733/maurice"}, "is_accepted": false, "score": 3, "last_activity_date": 1577298315, "last_edit_date": 1577298315, "creation_date": 1577297604, "answer_id": 59480849, "question_id": 59480831, "link": "https://stackoverflow.com/questions/59480831/how-to-assign-values-in-ngif/59480849#59480849", "title": "How to assign values in ngIf", "body": "<p>it should be</p>\n\n<p><code>[pTooltip]=\"(allowUpvote) ? msg1 : msg2\"</code></p>\n\n<p>Edit: So that means you should ditch the *ngIf, you don't need it in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577298418, "post_id": 59480862, "comment_id": 105138531, "body": "Can you please explain this a bit more."}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 1, "creation_date": 1577298648, "post_id": 59480862, "comment_id": 105138582, "body": "When you say <code>pTooltip=&quot;value&quot;</code> that means use value provided in <code>&quot;&quot;</code> as parameter for <code>pTooltip</code>. Here you have not binded the value from component, you have just given the constant. To have databinding you need <code>[]</code>. Now after <code>[]</code>, it means that bind whatever written in <code>&quot;&quot;</code> with the <code>pTooltip</code> and hence it will execute the code inside <code>&quot;&quot;</code> and the output for that statement then will be treated as input for <code>pTooltip</code>."}], "tags": [], "owner": {"reputation": 1868, "user_id": 9275568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cikAE.jpg?s=128&g=1", "display_name": "AlleXyS", "link": "https://stackoverflow.com/users/9275568/allexys"}, "is_accepted": true, "score": 4, "last_activity_date": 1577303365, "last_edit_date": 1577303365, "creation_date": 1577297760, "answer_id": 59480862, "question_id": 59480831, "link": "https://stackoverflow.com/questions/59480831/how-to-assign-values-in-ngif/59480862#59480862", "title": "How to assign values in ngIf", "body": "<p>Try this</p>\n\n<pre><code>[pTooltip] = \"allowUpvote ? msg1 : msg2\"\n</code></pre>\n\n<p>Using [], the interpretor know to read and execute code between \"\" </p>\n\n<p><strong>Updated</strong>, better explained by <a href=\"https://stackoverflow.com/users/7203873/plochie\">Plochie</a></p>\n\n<blockquote>\n  <p>When you say pTooltip=\"value\" that means use value provided in \"\" as parameter for pTooltip. Here you have not binded the value from component, you have just given the constant. To have databinding you need []. Now after [], it means that bind whatever written in \"\" with the pTooltip and hence it will execute the code inside \"\" and the output for that statement then will be treated as input for pTooltip</p>\n</blockquote>\n"}], "owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1526, "favorite_count": 0, "accepted_answer_id": 59480862, "answer_count": 2, "score": 0, "last_activity_date": 1578084585, "creation_date": 1577297490, "last_edit_date": 1578084585, "question_id": 59480831, "link": "https://stackoverflow.com/questions/59480831/how-to-assign-values-in-ngif", "title": "How to assign values in ngIf", "body": "<p>I'm new to Angular. I'm learning directives. I'm using <code>pTooltip</code> from <code>primeng</code>. But I want to display text in pTooltip according to a condition.</p>\n\n<p>Let's take example of Stack Overflow itself. You cannot upvote an answer twice. User should get msg1 if he has not upvoted that particular article otherwise he should get msg2. Where:</p>\n\n<pre><code>msg1=\"I found this article very useffeul.\";\nmsg2=\"You've already upvoted this article\";\n</code></pre>\n\n<p>Here is my code:</p>\n\n<p><strong>article.component.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;button \n  class=\"btn btn-success\"\n  *ngIf=\"allowUpvote ? pTooltip={{msg1}} : pTooltip={{msg2}}\n  [disabled]=\"!allowUpvote\"&gt;\n  UPVOTE\n&lt;/button&gt;\n</code></pre>\n\n<p><strong>article.component.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>...\nallowUpvote=true;\nmsg1=\"I found this article very useffeul.\";\nmsg2=\"You've already upvoted this article\";\n...\n\nngOnInit() {\n  for(var i=0;i&lt;5;i++) {\n    if(this.currentLoggedInUserId==this.articleDetails.upvotersList[i]) {\n      this.allowUpvote=false; //It will be set false if the user is there in the upvoters list\n    }\n  }\n});\n</code></pre>\n\n<p>But I'm getting this error:</p>\n\n<blockquote>\n  <p>Parser Error: Bindings cannot contain assignments at column 24 in [allowUpvote ? pTooltip={{msg1}} : pTooltip={{msg2}}]</p>\n</blockquote>\n\n<p>Please give me some directions.</p>\n"}, {"tags": ["angular", "typescript", "animation", "highlight"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5927389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b65bcd2619f109927dcca993d1757228?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm Whild", "link": "https://stackoverflow.com/users/5927389/malcolm-whild"}, "edited": false, "score": 0, "creation_date": 1577328462, "post_id": 59481179, "comment_id": 105142734, "body": "Ah I see - thank you so much. I&#39;ve updated the stackBlitz."}, {"owner": {"reputation": 55, "user_id": 5927389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b65bcd2619f109927dcca993d1757228?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm Whild", "link": "https://stackoverflow.com/users/5927389/malcolm-whild"}, "edited": false, "score": 0, "creation_date": 1577328937, "post_id": 59481179, "comment_id": 105142791, "body": "Ah I see - thank you so much. I like this approach better and I&#39;ve updated the stackBlitz to make it a bit clearer what I want to do.  Because I want the colour to fade slower than it appears, I&#39;ve used offset to control the length of each animation.  Why do you need three keyframes though? Is it because of what you were saying about not caring what state the element is in when the animation is called?"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "reply_to_user": {"reputation": 55, "user_id": 5927389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b65bcd2619f109927dcca993d1757228?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm Whild", "link": "https://stackoverflow.com/users/5927389/malcolm-whild"}, "edited": false, "score": 0, "creation_date": 1577329450, "post_id": 59481179, "comment_id": 105142847, "body": "Yes. It means that dont care the element current condition. Just start from fff goto ff00ff and then come back to fff in 500ms. Last fff is needed as you want to make background fff again. Hope this makes sense. :)"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 2, "last_activity_date": 1577300959, "creation_date": 1577300959, "answer_id": 59481179, "question_id": 59480809, "link": "https://stackoverflow.com/questions/59480809/angular-animation-changing-the-state-without-user-interaction/59481179#59481179", "title": "angular animation - changing the state without user interaction", "body": "<p>I prefer to use keyframe animations. I think you missed that the animation should appear if element is in any state. For that <code>*</code> is used.</p>\n\n<p>Here, <code>* &lt;=&gt; *</code> indicates that I don't care in what state element is, just perform animation.</p>\n\n<p><a href=\"https://stackblitz.com/edit/basic-highlight-animation-g9v864?file=src%2Fapp%2Fanimations%2Fhighlight.ts\" rel=\"nofollow noreferrer\">DEMO</a></p>\n\n<p><strong>highlight.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const highlight = trigger('highlight', [transition('* &lt;=&gt; *', useAnimation(\n  animation(\n    animate(\n      '500ms 0s',\n      keyframes([\n        style({ background: '#FFFFFF' }),\n        style({ background: '#ff0000' }),\n        style({ background: '#FFFFFF' })\n      ])\n    )\n  )\n))]);\n\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5927389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b65bcd2619f109927dcca993d1757228?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm Whild", "link": "https://stackoverflow.com/users/5927389/malcolm-whild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 59481179, "answer_count": 1, "score": 1, "last_activity_date": 1577305342, "creation_date": 1577297249, "last_edit_date": 1577305342, "question_id": 59480809, "link": "https://stackoverflow.com/questions/59480809/angular-animation-changing-the-state-without-user-interaction", "title": "angular animation - changing the state without user interaction", "body": "<p>Hope someone can help me please - see this <a href=\"https://stackblitz.com/edit/basic-highlight-animation\" rel=\"nofollow noreferrer\">StackBlitz</a> </p>\n\n<p>What I want to achieve is a simple highlight effect where an element's background flashes a colour briefly and then fades back to FFF.</p>\n\n<p>There are two buttons there just to show the different transitions, but what I want is to join them together in one method to make it flash and fade.</p>\n\n<p>I also want keep the animation separate from the component because I'll want to re-use it.</p>\n\n<p>So to change the states I thought I could just set the value of highlightState in form.component.ts to true, and then immediately set it back to false. Even though the two statements would execute almost immediately, I thought the longer transition from true to false would give the effect that I wanted. What actually happens is that I can't see anything</p>\n\n<p>I tried using <code>setTimeout()</code>, and keeping the transitions the same in highlight.ts (just using &lt;=> to toggle the states), but all that happens then is the highlight stays on.</p>\n\n<p>I know that it's basic and I'm disappointed that I can't get it to work, but if you can help I'd really appreciate it.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 12180, "user_id": 10188661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3suZ.png?s=128&g=1", "display_name": "ZiiMakc", "link": "https://stackoverflow.com/users/10188661/ziimakc"}, "edited": false, "score": 1, "creation_date": 1577299883, "post_id": 59480160, "comment_id": 105138816, "body": "As i found in this issue, there seems no easy way as of now :( <a href=\"https://github.com/microsoft/TypeScript/issues/3628\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/3628</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2687, "user_id": 11769164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cascCTYxkPQ/AAAAAAAAAAI/AAAAAAAAAkQ/KzEi1WfT8Ks/photo.jpg?sz=128", "display_name": "Ashot Aleqsanyan", "link": "https://stackoverflow.com/users/11769164/ashot-aleqsanyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1577305987, "last_edit_date": 1577305987, "creation_date": 1577304086, "answer_id": 59481477, "question_id": 59480160, "link": "https://stackoverflow.com/questions/59480160/typescript-check-object-by-type-or-interface-at-runtime-with-typeguards-in-2020/59481477#59481477", "title": "Typescript check object by type or interface at runtime with typeguards in 2020+", "body": "<p>You can have the classes instead of types and check the <code>instanceOf</code></p>\n\n<p>Please check the example</p>\n\n<p><a href=\"https://stackblitz.com/edit/types-in-runtime\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/types-in-runtime</a></p>\n\n<p>I hope this can help you</p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 10, "last_activity_date": 1577327767, "creation_date": 1577327767, "answer_id": 59483318, "question_id": 59480160, "link": "https://stackoverflow.com/questions/59480160/typescript-check-object-by-type-or-interface-at-runtime-with-typeguards-in-2020/59483318#59483318", "title": "Typescript check object by type or interface at runtime with typeguards in 2020+", "body": "<p>TypeScript's type system is <a href=\"https://github.com/microsoft/TypeScript/wiki/FAQ#what-is-type-erasure\" rel=\"noreferrer\">erased</a> when compiled to JavaScript.  That implies any effort to use the standard <code>tsc</code> compiler by itself to generate runtime type guards from <code>type</code> or <code>interface</code> definitions will not succeed; there's nothing of these definitions left at runtime for you to use. So <code>ofType&lt;T&gt;()</code> cannot be implemented. </p>\n\n<p>So what <em>can</em> you do?</p>\n\n<hr>\n\n<p>If you're willing to use some other compilation step in your build system, you can write or use a transformer that makes type guards for you from these definitions before they are erased.  For example, <a href=\"https://www.npmjs.com/package/typescript-is\" rel=\"noreferrer\"><code>typescript-is</code></a> will do this.  </p>\n\n<hr>\n\n<p>Or you could use <code>class</code> definitions instead; this makes checking easy at runtime (just use <code>instanceof</code>) but the hard part is deserializing JSON into a class instance and catching errors upon deserialization without writing this yourself manually.   All this does is move your problem from implementing <code>ofType&lt;Book&gt;(someObj)</code> to implementing <code>myDeserializerFunction(Book, someObj)</code> where <code>Book</code> is a class constructor.  </p>\n\n<p>Here at least you can use <a href=\"http://www.typescriptlang.org/docs/handbook/decorators.html#decorators\" rel=\"noreferrer\">decorators</a> and <a href=\"http://www.typescriptlang.org/docs/handbook/decorators.html#metadata\" rel=\"noreferrer\">class metadata</a> to generate the code needed for programmatic deserialization.  You can write this yourself, or use an existing library such as <a href=\"https://www.npmjs.com/package/json2typescript\" rel=\"noreferrer\"><code>json2typescript</code></a>.  </p>\n\n<hr>\n\n<p>Finally, you might decide to start with the type guards and let TypeScript <em>infer</em> your <code>type</code> definitions from them.  That is, instead of defining <code>Book</code> and hoping to get a type guard <code>bookGuard()</code> from it, you write the type guard <code>bookGuard()</code> and define <code>Book</code> in terms of <code>typeof bookGuard</code>.  </p>\n\n<p>This type guard could be built by composing existing simpler type guards together, so it looks more like a declarative type definition than a data-checking function.  You can write this yourself, or use an existing library such as <a href=\"https://www.npmjs.com/package/io-ts\" rel=\"noreferrer\"><code>io-ts</code></a>.</p>\n\n<p>For this approach, it's instructive to look at how one might write such a library.  Here's one possible implementation:</p>\n\n<pre><code>export type Guard&lt;T&gt; = (x: any) =&gt; x is T;\nexport type Guarded&lt;T extends Guard&lt;any&gt;&gt; = T extends Guard&lt;infer V&gt; ? V : never;\nconst primitiveGuard = &lt;T&gt;(typeOf: string) =&gt; (x: any): x is T =&gt; typeof x === typeOf;\nexport const gString = primitiveGuard&lt;string&gt;(\"string\");\nexport const gNumber = primitiveGuard&lt;number&gt;(\"number\");\nexport const gBoolean = primitiveGuard&lt;boolean&gt;(\"boolean\");\nexport const gNull = (x: any): x is null =&gt; x === null;\nexport const gObject =\n    &lt;T extends object&gt;(propGuardObj: { [K in keyof T]: Guard&lt;T[K]&gt; }) =&gt;\n        (x: any): x is T =&gt; typeof x === \"object\" &amp;&amp; x !== null &amp;&amp;\n            (Object.keys(propGuardObj) as Array&lt;keyof T&gt;).\n                every(k =&gt; (k in x) &amp;&amp; propGuardObj[k](x[k]));\nexport const gArray =\n    &lt;T&gt;(elemGuard: Guard&lt;T&gt;) =&gt; (x: any): x is Array&lt;T&gt; =&gt; Array.isArray(x) &amp;&amp;\n        x.every(el =&gt; elemGuard(el));\nexport const gUnion = &lt;T, U&gt;(tGuard: Guard&lt;T&gt;, uGuard: Guard&lt;U&gt;) =&gt;\n    (x: any): x is T | U =&gt; tGuard(x) || uGuard(x);\n</code></pre>\n\n<p>Here we are exporting a few type guards and functions which compose existing type guards.  The <code>gString()</code>, <code>gNumber()</code>, <code>gBoolean()</code>, and <code>gNull()</code> functions are just type guards, while <code>gObject()</code>, <code>gArray()</code>, and <code>gUnion()</code> take existing type guards to make new type guards out of them.  You can see how <code>gObject()</code> takes an object full of type guard properties and makes a new type guard where each property is checked against the corresponding guard.  You could add other composition functions like <code>gIntersection()</code> or <code>gPartial()</code>, but the ones here are enough for your example.</p>\n\n<p>Now your <code>Book</code> and <code>Writer</code> definitions look like this (assume the above has been imported as namespace <code>G</code>):</p>\n\n<pre><code>const _gWriter = G.gObject({\n    name: G.gString,\n    age: G.gNumber,\n});\ninterface Writer extends G.Guarded&lt;typeof _gWriter&gt; { }\nconst gWriter: G.Guard&lt;Writer&gt; = _gWriter;\n\nconst _gBook = G.gObject({\n    id: G.gNumber,\n    name: G.gString,\n    tags: G.gUnion(G.gArray(G.gString), G.gNull),\n    writers: G.gArray(gWriter)\n})\ninterface Book extends G.Guarded&lt;typeof _gBook&gt; { }\nconst gBook: G.Guard&lt;Book&gt; = _gBook;\n</code></pre>\n\n<p>If you squint at that you'll see that it's analogous to your example <code>Writer</code> and <code>Book</code> definitions.  But in our case the fundamental objects are type guards <code>gWriter</code> and <code>gBook</code> and the types <code>Writer</code> and <code>Book</code> are derived from them.  And then you can use <code>gBook</code> directly instead of the non-existent <code>ofType&lt;Book&gt;()</code>:</p>\n\n<pre><code>const book = JSON.parse('{\"id\":1,\"name\":\"Avangers\",\"tags\":[\"marvel\",\"fun\"],' +\n    '\"writers\":[{\"name\":\"Max\",\"age\":25},{\"name\":\"Max\",\"age\":25}]}');\n\nif (gBook(book)) {\n    console.log(book.name.toUpperCase() + \"!\"); // AVANGERS!\n}\n</code></pre>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/HYQwtgpgzgDiDGEAEBxJBvAsAKCXpEAHjAPYBOALkhQJ4zIoCuIZAJgDwAqAfEgLxIAFIQBcSEMBoBKfr0JIAllCScA3DnwFi5KrXqpmbCB05aKEYK2VMWHCTW68BpoucvXDHBcABmEMkgAarwA-EFIYsAQAG7+6rj48CTAUFQwZApgChQKsTZs-Ehc3IJ6EADyPmKpGcAA5jJ8vMJi9lJi8koqstR0ECQ+SPJ8I730lfGaRKSUSEkpVHUAyhS1dYXpmdm5EPkcNd51JQBEB-XHUqpIGvjTOnPJqUh1AHKMYABG-hsZWTl5nnYwHeXzIJ2Bn38F0mt20s3mTzqACESCQADYQCQ-Lb-XaAj6ojESE4E9GY4DQm54O7wx6LN5otGFFriSTtIaKZTAxk9YajblomHUuFUBGLcofABWEHgVD4VM0RRchDcViQJClMooJXSJBgewlkrE6CQAG0ANKKYBIADWEBoAxUAF0xHsuBanbwAL6NbgKxX4FltDqc7pNMb9QZ8gTHDXS2XHJAAMiTHIAhPzGDyU-6A4rBIatQA6O00KCCXX6zyGmQgZQAQTIZBANHYpcdPCkRdzebzMX8NEENp6Q6tQxkKaQlYNUtNNqdwjnTqklwVNNFdOejebNH4PaVJQgGLAe1dgM7I9ErOkIa625bxR695oRaUz+EE6T+80hCL-bIg5Hj0R4QCeniCEeK5CloMwbgszwAKrAAoySFFwAA0SAISUFCngYtjFJhjB4W62G+vuQZsreyimAAPlhPS4eBhAyLR9HEcxq7YF6OC8dgYpIAA+nUADqGTmAEAgoEWdSFrKghYAkeCgJAroySsazoQqIB1BAamvCC-hadxXHeBJPgIMgYnZN8rgWGq0l7MY7BlI6wnWRJvAmjx-GbqJ4n+Gpboef4ThCf5NlkPEOACcJKIkMOUkyXJFAKQqCisPpbyQmQxmaCpemoOpqyHHl+AUDpUD6UhKHAII0l1O+DUaYcUiYQ1DJom1CoAO4BWQVVFY1TYtoIEUSVIOA+jgZn+BZiBIPFw52e4RVORwrmDHFqI2l5SA+QJyI7UFgJLWF20JdF2B8QA9Dd-AjI9T3PaMjBQMYrKsEgrAQD43gfd4DxgKQUTABQygvZDT04D4jDALKtWcktghxq0VHqlKoZLRg6WDIIaZHQlKNSiuSBkBAFCMGQ1oWWi71IHd8AABYyjahxID45BIFATMgPoEhfVAmQwBiEZQHxmh3XMLNs-UHNc7AMoKH98BINEIBoow0CfWTEi6eLSmKHjcavl97BIAAjDI5OU9THMa+9uNCCbfWRcok4u-1UBFlAJCQIICniLp+2+kHyDmwArEgbFh0gvAWxHAAMpM21TNMOxAEv4KndurFrU18QJpKJUgABSSzlC8RZwANECCAA5OgxwZccIgW+hxwFa3xz1ur9T+FAxwdxVdSDyIprHGALCxGiQ-HLDFJOuh9dIAA1Aq9fHK7Elj6aTddyIxwALIgIQc86RArcAEwR166H7+Al+HyfZ8dxf1+306Xr11xM144TNpBDF1JopTQCIyRFjRCQOoQCdpFgKkWCgJAEIwHoGQAAwnWOuMhV5IGOGmaEDN7r1kCPWF4KAACiAAlJYaYC7XQYeAjEkDoGCCUMjYBMgpZ52QFzWmjsGE4AAYIAUk1BHYCAA\" rel=\"noreferrer\">Playground link to code</a></p>\n"}, {"tags": [], "owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577383856, "creation_date": 1577383856, "answer_id": 59491933, "question_id": 59480160, "link": "https://stackoverflow.com/questions/59480160/typescript-check-object-by-type-or-interface-at-runtime-with-typeguards-in-2020/59491933#59491933", "title": "Typescript check object by type or interface at runtime with typeguards in 2020+", "body": "<h1>Here is how to do with TypeOnly</h1>\n\n<p>Install <code>typeonly</code> and <code>@typeonly/checker</code>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Used at build time\nnpm i -D typeonly\n\n# Used at runtime\nnpm i @typeonly/checker\n</code></pre>\n\n<p>In the file <code>package.json</code>, add a command for <code>typeonly</code>. For example, assuming TypeScript is configured to output in a <code>dist/</code> directory:</p>\n\n<pre><code>    \"build\": \"npm run typeonly &amp;&amp; npm run tsc\",\n    \"typeonly\": \"typeonly --bundle dist/book.to.json src/book.d.ts\",\n    \"tsc\": \"tsc\"\n</code></pre>\n\n<p>In your code, put the types in a separate definition file:</p>\n\n<pre><code>// src/book.d.ts\n\ntype Writer = {\n  name: string\n  age: number\n}\n\ntype Book = {\n  id: number\n  name: string\n  tags: string[] | null\n  writers: Writer[]\n}\n</code></pre>\n\n<p>Then, import your types and the checker in your code:</p>\n\n<pre><code>import { createChecker } from \"@typeonly/checker\";\nimport { Book } from \"./book\";\n\nconst checker = createChecker({\n  bundle: require(\"./book.to.json\")\n});\n\nfunction ofType(obj: any, typeName: \"Book\"): obj is Book\nfunction ofType(obj: any, typeName: string): boolean {\n  if (!obj) return false;\n  return checker.check(\"./book\", typeName, obj).valid\n}\n\nfunction isBook(obj: any): obj is Book {\n  if (!ofType(obj, \"Book\")) return false //checking for shape and simple types\n\n  // cheking for specific values and ranges\n  if (obj.id &lt; 1) return false \n  if (obj.writers &amp;&amp; obj.writers.some(( { age } )=&gt; age &lt; 5 || age &gt; 150)) return false \n\n  return true\n}\n\nconst book = {\n  id: 1,\n  name: 'Avangers',\n  tags: ['marvel', 'fun'],\n  writers: [ {name: 'Max', age: 25}, {name: 'Max', age: 25}]\n}\n\nconsole.log(isBook(book)) // true\n</code></pre>\n\n<p>Build with <code>npm run build</code>, then it should works.</p>\n\n<p>See also: <a href=\"https://github.com/tomko-team/typeonly\" rel=\"nofollow noreferrer\">https://github.com/tomko-team/typeonly</a></p>\n"}, {"tags": [], "owner": {"reputation": 1996, "user_id": 8634147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-36eQ4qJ6F9o/AAAAAAAAAAI/AAAAAAAADZg/coKQfu-5HzM/photo.jpg?sz=128", "display_name": "Romain Deneau", "link": "https://stackoverflow.com/users/8634147/romain-deneau"}, "is_accepted": false, "score": 1, "last_activity_date": 1580289931, "creation_date": 1580289931, "answer_id": 59963995, "question_id": 59480160, "link": "https://stackoverflow.com/questions/59480160/typescript-check-object-by-type-or-interface-at-runtime-with-typeguards-in-2020/59963995#59963995", "title": "Typescript check object by type or interface at runtime with typeguards in 2020+", "body": "<p>To complete the almost exhaustive <a href=\"https://stackoverflow.com/a/59483318/8634147\">jcalz' answer</a>, in case of communicating with an external API, we may use generated TypeScript client: strongly typed, with ou without typeguard, depending of the generator / technology, for instance:</p>\n\n<ul>\n<li><a href=\"https://github.com/Azure/autorest\" rel=\"nofollow noreferrer\">autorest</a> with REST API using the OpenAPI Specification format</li>\n<li><a href=\"https://grpc.io\" rel=\"nofollow noreferrer\">gRPC</a> and its experimental TypeScript support <a href=\"https://github.com/grpc/grpc-web#typescript-support\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8594, "user_id": 2441655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0a2ff948b6678c5e0054a4c8392b67?s=128&d=identicon&r=PG", "display_name": "Venryx", "link": "https://stackoverflow.com/users/2441655/venryx"}, "is_accepted": false, "score": 12, "last_activity_date": 1601482933, "last_edit_date": 1601482933, "creation_date": 1601464050, "answer_id": 64136285, "question_id": 59480160, "link": "https://stackoverflow.com/questions/59480160/typescript-check-object-by-type-or-interface-at-runtime-with-typeguards-in-2020/64136285#64136285", "title": "Typescript check object by type or interface at runtime with typeguards in 2020+", "body": "<p>There are actually a number of modules which attempt to translate TypeScript type information into runtime information that can be used to validate data structures.</p>\n<p>I'll attempt to list and compare the various solutions here. (ordered roughly by how effective/general-purpose I estimate them to be; yes, this is somewhat subjective!)</p>\n<p><strong>Core features</strong>: (marked with \u2714\ufe0fyes, \u274cno, \u2699\ufe0fpartial, \u2754unknown)</p>\n<blockquote>\n<p><strong><kbd>ts-base</kbd> TS base:</strong> Standard TypeScript types are used as the basis for the generated type-guards. (rather than vice-versa)<br />\n<strong><kbd>class</kbd> Classes:</strong> Can generate type-guards for classes (based on shape, <em>not</em> instanceof), rather than just interfaces. (possible workaround: <code>interface ClassX_I extends ClassX {}</code>)<br />\n<strong><kbd>func</kbd> Functions:</strong> Can generate runtime information of the type-definitions of functions.<br />\n<strong><kbd>auto</kbd> Auto-check:</strong> Can automatically generate invocations of the generated type-guards.</p>\n</blockquote>\n<h2>Solutions</h2>\n<h3><a href=\"https://github.com/woutervh-/typescript-is\" rel=\"noreferrer\">typescript-is</a></h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/woutervh-/typescript-is\" rel=\"noreferrer\">GitHub</a>: 500</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/typescript-is\" rel=\"noreferrer\">NPM</a>: 2,555</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd><a href=\"https://github.com/woutervh-/typescript-is/issues/20\" rel=\"noreferrer\">class</a>: \u274c</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u2699\ufe0f</kbd><br />\n<strong>Note:</strong> Auto-check marked as partial, since you can add decorators to class-methods (but not standalone functions) to have their argument types checked.</p>\n</blockquote>\n<h3><a href=\"https://github.com/fabiandev/ts-runtime\" rel=\"noreferrer\">ts-runtime</a></h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/fabiandev/ts-runtime\" rel=\"noreferrer\">GitHub</a>: 313</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/ts-runtime\" rel=\"noreferrer\">NPM</a>: 96</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd>class: \u2714\ufe0f</kbd>\n<kbd>func: \u2714\ufe0f</kbd>\n<kbd>auto: \u2714\ufe0f</kbd><br />\n<strong>Con:</strong> Cannot currently be applied to only specific files or functions; it adds type-guard invocations throughout the project. (but <a href=\"https://github.com/fabiandev/ts-runtime/issues/24\" rel=\"noreferrer\">PRs appear welcomed</a>)<br />\n<strong>Con:</strong> Contains the note: &quot;This package is still experimental and resulting code is not intended to be used in production. It is a proof of concept...&quot;</p>\n</blockquote>\n<h3><a href=\"https://github.com/YousefED/typescript-json-schema\" rel=\"noreferrer\">typescript-json-schema</a> (+ a <a href=\"https://json-schema.org/implementations.html#validators\" rel=\"noreferrer\">schema validator</a>, eg. <a href=\"https://github.com/ajv-validator/ajv\" rel=\"noreferrer\">ajv</a>)</h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/YousefED/typescript-json-schema\" rel=\"noreferrer\">GitHub</a>: 1,400</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/typescript-json-schema\" rel=\"noreferrer\">NPM</a>: 51,664</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd>class: \u2714\ufe0f</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u274c</kbd><br />\n<strong>Pro:</strong> Generates valid json-schemas, which have additional uses. (eg. can be used for data validation in <a href=\"https://json-schema.org/implementations.html#validators\" rel=\"noreferrer\">other languages</a>)<br />\n<strong>Con:</strong> Requires some manual work to write generated schemas to disk, package them to be available at runtime, and feed them to your selected JSON-schema validator.</p>\n</blockquote>\n<h3><a href=\"https://github.com/gcanti/io-ts\" rel=\"noreferrer\">io-ts</a> (alone)</h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/gcanti/io-ts\" rel=\"noreferrer\">GitHub</a>: 3,600</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/io-ts\" rel=\"noreferrer\">NPM</a>: 296,577</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u274c</kbd>\n<kbd>class: \u274c</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u274c</kbd><br />\n<strong>Pro:</strong> Doesn't require any typescript transformers, webpack plugins, or CLI commands to operate. (it uses &quot;tricks&quot; to infer the TS types from its custom type-definition structure)</p>\n</blockquote>\n<h3><a href=\"https://github.com/awerlogus/io-ts-transformer\" rel=\"noreferrer\">io-ts-transformer</a> (extension for <a href=\"https://github.com/gcanti/io-ts\" rel=\"noreferrer\">io-ts</a>)</h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/awerlogus/io-ts-transformer\" rel=\"noreferrer\">GitHub</a>: 16</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/io-ts-transformer\" rel=\"noreferrer\">NPM</a>: 7</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd><a href=\"https://github.com/awerlogus/io-ts-transformer#io-ts-transformer-cant-do\" rel=\"noreferrer\">class</a>: \u274c</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u274c</kbd></p>\n</blockquote>\n<h3><a href=\"https://github.com/rhys-vdw/ts-auto-guard\" rel=\"noreferrer\">ts-auto-guard</a></h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/rhys-vdw/ts-auto-guard\" rel=\"noreferrer\">GitHub</a>: 134</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/ts-auto-guard\" rel=\"noreferrer\">NPM</a>: 46</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd>class: \u2754</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u274c</kbd><br />\n<strong>Con:</strong> You must add a specific js-doc tag to each interface you want a type-guard generated for. (a hassle, and error prone)</p>\n</blockquote>\n<h3><a href=\"https://github.com/paroi-tech/typeonly\" rel=\"noreferrer\">typeonly</a></h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/paroi-tech/typeonly\" rel=\"noreferrer\">GitHub</a>: 25</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/typeonly\" rel=\"noreferrer\">NPM</a>: 101</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd>class: \u2754</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u274c</kbd><br />\n<strong>Con:</strong> Cannot generate type-guards for generic types. (see <a href=\"https://github.com/paroi-tech/typeonly/tree/master/typeonly#known-limitations\" rel=\"noreferrer\">here</a>)</p>\n</blockquote>\n<h3><a href=\"https://github.com/janjakubnanista/ts-type-checked\" rel=\"noreferrer\">ts-type-checked</a></h3>\n<blockquote>\n<p><kbd><strong><a href=\"https://github.com/janjakubnanista/ts-type-checked\" rel=\"noreferrer\">GitHub</a>: 13</strong></kbd>\n<kbd><strong><a href=\"https://www.npmjs.com/package/ts-type-checked\" rel=\"noreferrer\">NPM</a>: 3</strong></kbd>\n(2020-09-30)</p>\n<p><strong>Core features:</strong>\n<kbd>ts-base: \u2714\ufe0f</kbd>\n<kbd>class: \u2754</kbd>\n<kbd>func: \u274c</kbd>\n<kbd>auto: \u274c</kbd></p>\n</blockquote>\n<p><strong>Not yet evaluated</strong>: <a href=\"https://github.com/vega/ts-json-schema-generator\" rel=\"noreferrer\">ts-json-schema-generator</a>, <a href=\"https://github.com/xiag-ag/typescript-to-json-schema\" rel=\"noreferrer\">typescript-to-json-schema</a><br />\n<strong>Excluded</strong> (no public repo): <a href=\"https://www.npmjs.com/package/typescript-runtime-types\" rel=\"noreferrer\">typescript-runtime-types</a></p>\n<h3>Disclaimer</h3>\n<p>I am not the creator or maintainer of any of the solutions listed. I created the list to help developers compare the various solutions, on a consistent set of criteria, while adding helpful information such as GitHub stars and NPM weekly downloads. (edits are welcome to periodically keep these values up-to-date -- though remember to change the last-update-time labels!)</p>\n<p>For those with enough reputation, feel free to add additional solutions that you come across. (though please try to keep the text for your new entries consistent with the existing ones)</p>\n"}], "owner": {"reputation": 12180, "user_id": 10188661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3suZ.png?s=128&g=1", "display_name": "ZiiMakc", "link": "https://stackoverflow.com/users/10188661/ziimakc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4477, "favorite_count": 6, "accepted_answer_id": 59483318, "answer_count": 5, "score": 10, "last_activity_date": 1601482933, "creation_date": 1577291520, "last_edit_date": 1577299909, "question_id": 59480160, "link": "https://stackoverflow.com/questions/59480160/typescript-check-object-by-type-or-interface-at-runtime-with-typeguards-in-2020", "title": "Typescript check object by type or interface at runtime with typeguards in 2020+", "body": "<p>Most of the time for me, dynamic check is needed for verification of fetch response. And i was thinking, can this be done with user defined typeguard in a generic way for any type of object with multiple props and additional checks, so it can be used something like:</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html?ssl=1&amp;ssc=1&amp;pln=41&amp;pc=43#code/PTAEF5K6c0GcAWBDATgUwCanQDwA4D2qALlhLJVAFAkCe%206oA6qgJZmoSgDe1ooAHbIAtugBcCEu0EBzfqGSyJQgK4iARulTUAvtVoMmAIUKEA1tz4C2mSYPVadA4WMnxpbOQpJL47zzkAbQBdUAAfNQAbKIUAd3ZOfxZE7VC9AxBQADNVQQBjEjZCQVASQlB8xHR8y0INACsaklA4jkRQEVUoovwopnxUQnx4UGVBbWQohBRGABoyisFCFswKjlANOlAUQUxqXIKiktBCbIAVIwAec4A%20AAp6hslkQToASkkn0DZR894FGxsqB7gBCJ7vUAYEiqVClbJTeDoADcCgUoCyiEIcUWAH50dDYaVpKomFliDlEUwMtQslR6aBVEjsK9sJh0NkvOQvJVCCIiBNBCRRvSqAc8oViqVfqYLI9Gi83p9To0fqNZZZrD9gWCzpdGFcNQ8IZDCXDKVEkRjgFUauYvLIchSkMhGIo9gg2Pz%20mUjPADAIsrb7XInVx4Ix8kC2PlQAA3Kak0asqGvZT%20mw6p4AOlsoCuoAAjKb0DDzQjLdTMyCcwkONpRgAyRsqhrZutJbPwPnoe73XiKZSgXSgd7gW6DpgFgCsEUiSiYE8L04ADO8S2X4VTQAGoaWiWVUKSaQJqPkSh5NmZLOAATY7EW5gpXCoAOQAQQTcgbr6fAl8sjJEEr4iGgcboFEv6gK%20hyviEf6tKkqBAbwL6SK%20ACyyC4FBC6SAATNOugLDwaHQVhOELHhoCEboIQ0uegjdv02ZRIQsj3DK173Bo17rtah6kqcXAVkiQA\" rel=\"noreferrer\">Typescript playground</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/48442746/check-if-object-correctly-implements-interface\">Here is an example with sample object, but i want a function without it.</a></p>\n\n<pre><code>// ================= shared exported =================\ntype Writer = {\n  name: string\n  age: number\n}\n\ntype Book = {\n  id: number\n  name: string\n  tags: string[] | null\n  writers: Writer[]\n}\n\n// function to check object with multiple props general shape, to not do it by hand\nfunction ofType&lt;T&gt;(obj: any): obj is T {\n  if (!obj) return false;\n\n   // how to?\n   return true // or false \n}\n\n// ================= used and defined in components =================\nfunction isBook(obj: any): obj is Book {\n  if (!ofType&lt;Book&gt;(obj)) return false //checking for shape and simple types\n\n  // cheking for specific values and ranges\n  if (obj.id &lt; 1) return false \n  if (obj.writers &amp;&amp; obj.writers.some(( { age } )=&gt; age &lt; 5 || age &gt; 150)) return false \n\n  return true\n}\n\n\nconst book = {\n  id: 1,\n  name: 'Avangers',\n  tags: ['marvel', 'fun'],\n  writers: [ {name: 'Max', age: 25}, {name: 'Max', age: 25}]\n}\n\nconsole.log(isBook(book)) // true or false\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 2078, "user_id": 554021, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Gef5G.jpg?s=128&g=1", "display_name": "Baruch", "link": "https://stackoverflow.com/users/554021/baruch"}, "edited": false, "score": 0, "creation_date": 1577291170, "post_id": 59480096, "comment_id": 105137027, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/6134039/format-number-to-always-show-2-decimal-places\">Format number to always show 2 decimal places</a>"}, {"owner": {"reputation": 1051, "user_id": 8678978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFZS4.gif?s=128&g=1", "display_name": "chrisbyte", "link": "https://stackoverflow.com/users/8678978/chrisbyte"}, "edited": false, "score": 1, "creation_date": 1577291261, "post_id": 59480096, "comment_id": 105137043, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/11832914/round-to-at-most-2-decimal-places-only-if-necessary\">Round to at most 2 decimal places (only if necessary)</a>"}, {"owner": {"reputation": 47740, "user_id": 395910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59c1bcdff2510bdb021b3afe1eb69677?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/395910/terry"}, "edited": false, "score": 0, "creation_date": 1577291381, "post_id": 59480096, "comment_id": 105137064, "body": "How does rounding produce 123.46 from 123.45?"}], "answers": [{"comments": [{"owner": {"reputation": 7643, "user_id": 347484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H60ZG.jpg?s=128&g=1", "display_name": "Boppity Bop", "link": "https://stackoverflow.com/users/347484/boppity-bop"}, "edited": false, "score": 0, "creation_date": 1614006599, "post_id": 59480148, "comment_id": 117245028, "body": "this does not compile - &quot;string is not assignable to number&quot;.. also try <code>Math.round(1.005 * 100) &#47; 100</code>"}], "tags": [], "owner": {"reputation": 69, "user_id": 10848266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a2970fe79dd0be58f6297051ef3794?s=128&d=identicon&r=PG&f=1", "display_name": "Chamika", "link": "https://stackoverflow.com/users/10848266/chamika"}, "is_accepted": false, "score": -1, "last_activity_date": 1577291381, "creation_date": 1577291381, "answer_id": 59480148, "question_id": 59480096, "link": "https://stackoverflow.com/questions/59480096/how-to-round-to-2-decimal-places-with-typescript/59480148#59480148", "title": "how to round to 2 decimal places with typescript?", "body": "<p>I have used following code to round to 2 decimal places</p>\n\n<pre><code>(Math.round(val * 100) / 100).toFixed(2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7643, "user_id": 347484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H60ZG.jpg?s=128&g=1", "display_name": "Boppity Bop", "link": "https://stackoverflow.com/users/347484/boppity-bop"}, "edited": false, "score": 0, "creation_date": 1614006782, "post_id": 59480614, "comment_id": 117245110, "body": "this doesnt work. read the blogs. <code>Math.round(1.005 * 100) &#47; 100</code>"}], "tags": [], "owner": {"reputation": 882, "user_id": 8410290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e554bf25de3a2958c88db0908c186b22?s=128&d=identicon&r=PG", "display_name": "zemil", "link": "https://stackoverflow.com/users/8410290/zemil"}, "is_accepted": false, "score": -1, "last_activity_date": 1577295365, "creation_date": 1577295365, "answer_id": 59480614, "question_id": 59480096, "link": "https://stackoverflow.com/questions/59480096/how-to-round-to-2-decimal-places-with-typescript/59480614#59480614", "title": "how to round to 2 decimal places with typescript?", "body": "<p>It's just js fn with types:</p>\n\n<pre><code>function round(num: number): number {\n  return Math.round(num * 100) / 100;\n}\n</code></pre>\n\n<p>Read <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html\" rel=\"nofollow noreferrer\">docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 7643, "user_id": 347484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H60ZG.jpg?s=128&g=1", "display_name": "Boppity Bop", "link": "https://stackoverflow.com/users/347484/boppity-bop"}, "is_accepted": false, "score": 0, "last_activity_date": 1614007301, "creation_date": 1614007301, "answer_id": 66318481, "question_id": 59480096, "link": "https://stackoverflow.com/questions/59480096/how-to-round-to-2-decimal-places-with-typescript/66318481#66318481", "title": "how to round to 2 decimal places with typescript?", "body": "<p>Idk why everything in web-world turns to circus but it seems there is no out-of-the-box solution. I found this blog and it works as far as i could test it:<a href=\"https://expertcodeblog.wordpress.com/2018/02/12/typescript-javascript-round-number-by-decimal-pecision/\" rel=\"nofollow noreferrer\">https://expertcodeblog.wordpress.com/2018/02/12/typescript-javascript-round-number-by-decimal-pecision/</a></p>\n<pre><code>  public round(number: number, precision: number) {\n    if (precision &lt; 0) {\n      let factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    }\n    else\n      return +(Math.round(Number(number + &quot;e+&quot; + precision)) +\n        &quot;e-&quot; + precision);\n  }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12534492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb96657cf62245f7c78cbc1d88c71b1?s=128&d=identicon&r=PG&f=1", "display_name": "coder-guy-2020", "link": "https://stackoverflow.com/users/12534492/coder-guy-2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1614007301, "creation_date": 1577290995, "last_edit_date": 1577293311, "question_id": 59480096, "link": "https://stackoverflow.com/questions/59480096/how-to-round-to-2-decimal-places-with-typescript", "title": "how to round to 2 decimal places with typescript?", "body": "<p>I need to write a function in TypeScript which can round a number to 2 decimal places. For example:</p>\n\n<p>123.456 => should return 123.46</p>\n\n<p>123.3210 => should return 123.32</p>\n\n<p>Can you identify the TypeScript function that I can use to accomplish this?  Alternatively, is there is a commonly used third party library used for this, then what library and function should I use?</p>\n"}, {"tags": ["javascript", "arrays", "angular", "typescript", "ngmodel"], "comments": [{"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 2, "creation_date": 1577290462, "post_id": 59480018, "comment_id": 105136885, "body": "can you please explain why such requirement?"}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577291301, "post_id": 59480018, "comment_id": 105137051, "body": "I&#39;m not sure i understand your ask, but this looks like a case for <code>ngTemplate</code>: <a href=\"https://angular.io/api/common/NgTemplateOutlet\" rel=\"nofollow noreferrer\">angular.io/api/common/NgTemplateOutlet</a>"}, {"owner": {"reputation": 1, "user_id": 11202514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZRtIeaupWiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIa6gvJM3-6Mc0osfrkjuh0FJpQg/mo/photo.jpg?sz=128", "display_name": "Ritika Agarwal", "link": "https://stackoverflow.com/users/11202514/ritika-agarwal"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577291569, "post_id": 59480018, "comment_id": 105137111, "body": "@Plochie <a href=\"https://www.google.co.in/maps/dir///@12.9697259,77.7178782,13z/data=!5m1!1e2\" rel=\"nofollow noreferrer\">google.co.in/maps/dir///@12.9697259,77.7178782,13z/&hellip;</a>  Just like this where I can add stops in between"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577291678, "post_id": 59480018, "comment_id": 105137132, "body": "I dont understant the google maps links. Also you cant just clone the template. The most you can do is clone the dom generated by template ref. But in that case you will not be getting any angular features anyway."}, {"owner": {"reputation": 1, "user_id": 11202514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZRtIeaupWiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIa6gvJM3-6Mc0osfrkjuh0FJpQg/mo/photo.jpg?sz=128", "display_name": "Ritika Agarwal", "link": "https://stackoverflow.com/users/11202514/ritika-agarwal"}, "edited": false, "score": 0, "creation_date": 1577291759, "post_id": 59480018, "comment_id": 105137150, "body": "I want to add waypoints which is nothing but a textbox along with auto complete address"}], "owner": {"reputation": 1, "user_id": 11202514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZRtIeaupWiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIa6gvJM3-6Mc0osfrkjuh0FJpQg/mo/photo.jpg?sz=128", "display_name": "Ritika Agarwal", "link": "https://stackoverflow.com/users/11202514/ritika-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577354190, "creation_date": 1577290207, "last_edit_date": 1577354190, "question_id": 59480018, "link": "https://stackoverflow.com/questions/59480018/how-to-dynamically-add-waypoints-in-angular-along-with-auto-complete-address", "title": "How to dynamically add waypoints in Angular along with auto complete address?", "body": "<pre><code>&lt;div [hidden]=\"!showWaypoint\" #waypoint&gt;\n                &lt;div class=\"form-group label-floating\"&gt;\n                  &lt;label class=\"control-label\"&gt;Waypoint&lt;/label&gt;\n                  &lt;input type=\"text\" class=\"form-control search-address\" name = \"waypoint\" placeholder=\" \" [(ngModel)]=\"wayPointInput\" #stop&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n</code></pre>\n\n<p>I want to clone this entire portion, just like appending when i am clicking on add waypoint. I Dont want to use structural directives like *ngFor.\nI have also consoled this </p>\n\n<pre><code> @ViewChild('waypoint') wp;\n    console.log(this.wp.nativeElement);\n</code></pre>\n\n<p>but I dont know how to append it along with the change in ngModel name so that after submitting I get a set of data in an array.</p>\n"}, {"tags": ["typescript", "object"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577328419, "post_id": 59479771, "comment_id": 105142730, "body": "Please consider editing the code here to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as described in <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>.  Right now it looks like an object with some string properties, and code with undefined variables <code>vars</code> and <code>args</code>. I&#39;m quite worried that it looks like you&#39;re planning to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Never_use_eval!\" rel=\"nofollow noreferrer\"><code>eval()</code></a> these strings; unless your question is about how best to evaluate strings as code (and the answer would probably be to discourage such a practice), you should edit the code to be actual code to get a good answer.  Good luck!"}, {"owner": {"reputation": 16, "user_id": 11707518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945ad6d2ea9e758dd98651a107dd34d4?s=128&d=identicon&r=PG&f=1", "display_name": "Dapper Sin", "link": "https://stackoverflow.com/users/11707518/dapper-sin"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1577328845, "post_id": 59479771, "comment_id": 105142782, "body": "Before I move onto my code, I want to say thank you for replying, I appreciate it.  I&#39;ve managed to fix my old code and improve it by using functions and doing <code>mess[newVar]</code> instead of <code>Object.values(...)</code> which was in my earlier stages of the code.  Now it works like a charm. :)"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 11707518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945ad6d2ea9e758dd98651a107dd34d4?s=128&d=identicon&r=PG&f=1", "display_name": "Dapper Sin", "link": "https://stackoverflow.com/users/11707518/dapper-sin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577329192, "creation_date": 1577329192, "answer_id": 59483426, "question_id": 59479771, "link": "https://stackoverflow.com/questions/59479771/typescript-getting-a-value-by-its-key/59483426#59483426", "title": "Typescript; getting a value by it&#39;s key", "body": "<p>What was wrong with my code, which was a lot from a logical perspective, was the following:</p>\n\n<ul>\n<li>I tried using <code>Object.values()</code> instead of simply doing it the \"<code>obj[key]</code>\" way.</li>\n<li>I wanted to use <code>eval()</code> alongside code inside of strings in order to execute the code depending on which argument was provided, which I fixed and improved by simply using functions.</li>\n<li>I was trying to get the value by it's key by using <code>Object.values()</code>, which is totally incorrect.</li>\n</ul>\n\n<p>The updated code looks better, more effective and way simpler.</p>\n"}], "owner": {"reputation": 16, "user_id": 11707518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945ad6d2ea9e758dd98651a107dd34d4?s=128&d=identicon&r=PG&f=1", "display_name": "Dapper Sin", "link": "https://stackoverflow.com/users/11707518/dapper-sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577329192, "creation_date": 1577288059, "last_edit_date": 1577328758, "question_id": 59479771, "link": "https://stackoverflow.com/questions/59479771/typescript-getting-a-value-by-its-key", "title": "Typescript; getting a value by it&#39;s key", "body": "<p>I'm trying to get a value from my object through it's key, e.g.:</p>\n\n<pre><code>// File where I store my values\n\nexport let mess = {\n\n    rpc: `if (args[1].toLowerCase() === 'true' || args[1].toLowerCase() === 'on') {\n        conf_vars.rpc = true;\n    } else if (args[1].toLowerCase() === 'false' || args[1].toLowerCase() === 'off') {\n        conf_vars.rpc = false;\n    }`,\n\n    prefix: `Guild.findOne({\n        guildID: message.guild.id\n    }, async (err, g) =&gt; { \n        if (err) throw err;\n\n        if (!g) await new Guild({\n            guildID: message.guild.id,\n            prefix: args[2].toLowerCase()\n        }).save().then(() =&gt; message.channel.send(\\`Successfully changed the guild's prefix to \\${g.prefix}\\`));\n\n        else {\n            g.prefix = args[2].toLowerCase();\n            await g.save().then(() =&gt; message.channel.send(\\`Successfully changed the guild's prefix to \\${g.prefix}\\`));\n        }\n    })`\n}\n</code></pre>\n\n<p>and now I want to get those values through it's key;</p>\n\n<pre><code>if (Object.keys(vars).some(v =&gt; args[0].toLowerCase() === v.toLowerCase())) {\n\n    let newVar = Object.keys(vars).find(v =&gt; args[0].toLowerCase() === v.toLowerCase());\n\n    let confVar = mess[newVar];\n\n    confVar(Server, message, args, (await ConfVars.findOne({ guild: message.guild })));\n}\n</code></pre>\n\n<p>But I can't seem to get the logic of it right, I've been stumped on this for about an hour now.</p>\n\n<p>[EDIT]: I have fixed my issue, I used functions instead of strings and <code>eval()</code>.\nAlso, the issue with my <code>confVar</code> was that I didn't use <code>mess[newVar]</code>, which is now edited. </p>\n\n<p>The new code looks like this:</p>\n\n<pre><code>// File where I store the functions (values)\n\nexport let mess = {\n\n    rpc: function rpc(Server, message: Message, args: string[], conf_vars) {\n        if (args[1].toLowerCase() === 'true' || args[1].toLowerCase() === 'on') {\n            conf_vars.rpc = true;\n            message.channel.send(`Successfully turned the **rpc** option __on__`);\n        } else if (args[1].toLowerCase() === 'false' || args[1].toLowerCase() === 'off') {\n            conf_vars.rpc = false;\n            message.channel.send(`Successfully turned the **rpc** option __off__`)\n        } else {\n            message.channel.send(`Please look at the proper usage of the command!`);\n        }\n    },\n\n    prefix: function prefix(Server, message: Message, args: string[], conf_vars) {\n        Server.findOne({\n            guildID: message.guild.id\n        }, async (err, g) =&gt; {\n            if (err) throw err;\n\n            if (!g) await new Server({\n                guildID: message.guild.id,\n                prefix: args[2].toLowerCase()\n            }).save().then(() =&gt; { message.channel.send(`Successfully changed the guild's prefix to ${g.prefix}`) });\n\n            else {\n                g.prefix = args[2].toLowerCase();\n                await g.save().then(() =&gt; { message.channel.send(`Successfully changed the guild's prefix to ${g.prefix}`) });\n            }\n        })\n    }\n}\n</code></pre>\n\n<pre><code>// The file where I use them\n\nif (Object.keys(vars).some(v =&gt; args[0].toLowerCase() === v.toLowerCase())) {\n\n    let newVar = Object.keys(vars).find(v =&gt; args[0].toLowerCase() === v.toLowerCase());\n\n    let confVar = mess[newVar];\n\n    confVar(Server, message, args, (await ConfVars.findOne({ guild: message.guild })));\n}```\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 972, "user_id": 11580166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uu1GPqHQ0z0/AAAAAAAAAAI/AAAAAAAAB90/r7qqNEWN-4w/photo.jpg?sz=128", "display_name": "Yousername", "link": "https://stackoverflow.com/users/11580166/yousername"}, "edited": false, "score": 3, "creation_date": 1577285736, "post_id": 59479489, "comment_id": 105135884, "body": "1.32 is closer to 1.3 than 1.35."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2560539"}, "edited": false, "score": 0, "creation_date": 1577292261, "post_id": 59479489, "comment_id": 105137256, "body": "@Drasko your question is not exactly the same try this fiddle for exact answer <a href=\"https://jsfiddle.net/fn3tso4k/1/\" rel=\"nofollow noreferrer\">jsfiddle.net/fn3tso4k/1</a>"}, {"owner": {"reputation": 17, "user_id": 12596046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dde52831cfef26451f1882b58a74a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Drasko", "link": "https://stackoverflow.com/users/12596046/drasko"}, "edited": false, "score": 0, "creation_date": 1577298487, "post_id": 59479489, "comment_id": 105138543, "body": "Yeah my mistake, that should be round to 1.30, sry :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2560539"}, "edited": false, "score": 0, "creation_date": 1577287462, "post_id": 59479521, "comment_id": 105136230, "body": "Please edit your answer. According to the question&#39;s description it is wrong. In the question it is written that <code>1.32 -&gt; 1.35</code> but in your answer it is <code>1.3</code>. You have created a function that rounds numbers to 0.05, in order to have the logic that the question wants you should use <code>Math.ceil</code> instead of <code>Math.round</code>."}, {"owner": {"reputation": 972, "user_id": 11580166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uu1GPqHQ0z0/AAAAAAAAAAI/AAAAAAAAB90/r7qqNEWN-4w/photo.jpg?sz=128", "display_name": "Yousername", "link": "https://stackoverflow.com/users/11580166/yousername"}, "edited": false, "score": 0, "creation_date": 1577287606, "post_id": 59479521, "comment_id": 105136266, "body": "<code>Math.ceil</code> would not work because then inputting 1.08 would give 1.1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2560539"}, "edited": false, "score": 0, "creation_date": 1577287948, "post_id": 59479521, "comment_id": 105136328, "body": "Still for 1.32 you should provide 1.35 so the answer is not accurate. In the question is asked that numbers from .01 to .05 should point to .05 and numbers from .06 to .09 should point to .05 also."}, {"owner": {"reputation": 972, "user_id": 11580166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uu1GPqHQ0z0/AAAAAAAAAAI/AAAAAAAAB90/r7qqNEWN-4w/photo.jpg?sz=128", "display_name": "Yousername", "link": "https://stackoverflow.com/users/11580166/yousername"}, "edited": false, "score": 0, "creation_date": 1577288731, "post_id": 59479521, "comment_id": 105136499, "body": "I&#39;ve created a separate function that outputs only numbers ending in 5."}, {"owner": {"reputation": 17, "user_id": 12596046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dde52831cfef26451f1882b58a74a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Drasko", "link": "https://stackoverflow.com/users/12596046/drasko"}, "edited": false, "score": 0, "creation_date": 1577298452, "post_id": 59479521, "comment_id": 105138541, "body": "It was my mistake... 1.32 should be round to 1.30 sry :D"}], "tags": [], "owner": {"reputation": 972, "user_id": 11580166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uu1GPqHQ0z0/AAAAAAAAAAI/AAAAAAAAB90/r7qqNEWN-4w/photo.jpg?sz=128", "display_name": "Yousername", "link": "https://stackoverflow.com/users/11580166/yousername"}, "is_accepted": false, "score": 1, "last_activity_date": 1577288697, "last_edit_date": 1577288697, "creation_date": 1577285864, "answer_id": 59479521, "question_id": 59479489, "link": "https://stackoverflow.com/questions/59479489/formatting-number-in-javascripttypescript/59479521#59479521", "title": "Formatting number in javascript(typescript)", "body": "<p>This function uses <code>Math.round</code> and multiplies and divides by 0.05 because it is to the nearest 0.05.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function tN(n) {\r\n    return Math.round(n / 0.05) * 0.05;\r\n}\r\n\r\nconsole.log(tN(1.33));\r\n\r\nconsole.log(tN(1.32));\r\n\r\nconsole.log(tN(0.05));\r\n\r\nconsole.log(tN(-1.08));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If all outputs have to end in a 5:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function tN(n) {\r\n    return n % 0.1 &gt; 0.05 ? Math.floor(n / 0.05) * 0.05 : Math.ceil(n / 0.05) * 0.05;\r\n}\r\n\r\nconsole.log(tN(1.33));\r\n\r\nconsole.log(tN(1.32));\r\n\r\nconsole.log(tN(0.05));\r\n\r\nconsole.log(tN(-1.08));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 17, "user_id": 12596046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dde52831cfef26451f1882b58a74a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Drasko", "link": "https://stackoverflow.com/users/12596046/drasko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1577289178, "answer_count": 1, "score": 0, "last_activity_date": 1577290843, "creation_date": 1577285670, "last_edit_date": 1577290843, "question_id": 59479489, "link": "https://stackoverflow.com/questions/59479489/formatting-number-in-javascripttypescript", "closed_reason": "Duplicate", "title": "Formatting number in javascript(typescript)", "body": "<p>Is there a way in javascript or Typescript to format decimal?</p>\n\n<p>For example:</p>\n\n<ul>\n<li><p>1.33 => 1.35</p></li>\n<li><p>1.32 => 1.35</p></li>\n</ul>\n\n<p>All i found was formatting to 2 decimals, but i need it to format to nearest .05</p>\n"}, {"tags": ["typescript", "asp.net-core", "asp.net-web-api", "httpresponse", "middleware"], "comments": [{"owner": {"reputation": 3109, "user_id": 6086968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o38dO.png?s=128&g=1", "display_name": "Hameed Syed", "link": "https://stackoverflow.com/users/6086968/hameed-syed"}, "edited": false, "score": 0, "creation_date": 1577283919, "post_id": 59479254, "comment_id": 105135472, "body": "what is the next line after the context.response?Is the control returned from here or is it going to the next middleware in the pipeline?"}, {"owner": {"reputation": 775, "user_id": 3820266, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1kUer.jpg?s=128&g=1", "display_name": "captainblack", "link": "https://stackoverflow.com/users/3820266/captainblack"}, "reply_to_user": {"reputation": 3109, "user_id": 6086968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o38dO.png?s=128&g=1", "display_name": "Hameed Syed", "link": "https://stackoverflow.com/users/6086968/hameed-syed"}, "edited": false, "score": 0, "creation_date": 1577284526, "post_id": 59479254, "comment_id": 105135628, "body": "Actually there is no return statement this context.response is last line in middleware. And there is only one middleware."}, {"owner": {"reputation": 3109, "user_id": 6086968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o38dO.png?s=128&g=1", "display_name": "Hameed Syed", "link": "https://stackoverflow.com/users/6086968/hameed-syed"}, "edited": false, "score": 0, "creation_date": 1577284688, "post_id": 59479254, "comment_id": 105135663, "body": "I think this is an exception which you should handle globally like this <a href=\"https://chrissainty.com/global-error-handling-aspnet-core-mvc/\" rel=\"nofollow noreferrer\">chrissainty.com/global-error-handling-aspnet-core-mvc</a>"}, {"owner": {"reputation": 13628, "user_id": 11398810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCTFx.jpg?s=128&g=1", "display_name": "Rena", "link": "https://stackoverflow.com/users/11398810/rena"}, "edited": false, "score": 0, "creation_date": 1577339140, "post_id": 59479254, "comment_id": 105144227, "body": "What do you mean that you want to get the error message in typescript?Did you use typescript in asp.net core web api?Where did you want to show the message?"}], "owner": {"reputation": 775, "user_id": 3820266, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1kUer.jpg?s=128&g=1", "display_name": "captainblack", "link": "https://stackoverflow.com/users/3820266/captainblack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577283672, "creation_date": 1577283672, "question_id": 59479254, "link": "https://stackoverflow.com/questions/59479254/how-can-i-get-middleware-context-from-response", "title": "How can I get middleware context from response?", "body": "<p>I writing error message details and some spesific areas via middleware like this, \nwhen exists an exception inside of contoller.</p>\n\n<p>await context.Response.WriteAsync(errorDetails.ToString());</p>\n\n<p>Then , I'm trying to get this errordetails from response in TypeScripte' side. When I controlled response which retrun form MVC , I'm not finding the error detail in response object. But I see the error details in Application tab and network tab in Chrome Browser. How can I get errordetails which writing in middleware in side of Controller? I need to get this infos in TypeScript.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZaMIj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZaMIj.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/20F9t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/20F9t.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 741, "user_id": 3706723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w17DE.jpg?s=128&g=1", "display_name": "prhmma", "link": "https://stackoverflow.com/users/3706723/prhmma"}, "edited": false, "score": 0, "creation_date": 1577284353, "post_id": 59479171, "comment_id": 105135578, "body": "this works fine. if you look for <code>ID4</code>, you will get <code>undefined</code>, which means it does not exist and you have to handle this in the output. but if you search for something that exists, like <code>ID3</code>, you will get the results back"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 4684928, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/df341abbbceb880f77b4652825126e7d?s=128&d=identicon&r=PG&f=1", "display_name": "Aeterna", "link": "https://stackoverflow.com/users/4684928/aeterna"}, "edited": false, "score": 0, "creation_date": 1577290101, "post_id": 59479555, "comment_id": 105136819, "body": "I was not aware of that. Thank you for clarifying"}, {"owner": {"reputation": 1679, "user_id": 267874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007a9c64b82a001443ff463ef326366b?s=128&d=identicon&r=PG", "display_name": "Paul-Sebastian Manole", "link": "https://stackoverflow.com/users/267874/paul-sebastian-manole"}, "edited": false, "score": 0, "creation_date": 1589676063, "post_id": 59479555, "comment_id": 109388122, "body": "A zillion thanks man! Could have gone a really deep rabbit hole with this one if it wasn&#39;t for your answer!"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 3, "last_activity_date": 1577286124, "creation_date": 1577286124, "answer_id": 59479555, "question_id": 59479171, "link": "https://stackoverflow.com/questions/59479171/typescript-does-not-infer-undefined-as-a-return-type-from-array-prototype-find/59479555#59479555", "title": "Typescript does not infer undefined as a return type from array.prototype.find", "body": "<p><code>undefined</code> and <code>null</code> are absorbed by other types in unions unless the <code>strictNullChecks</code> option is specified in <code>tsconfig</code>. See <a href=\"http://www.typescriptlang.org/docs/handbook/compileroptions.html\" rel=\"nofollow noreferrer\">docs</a> for all options.</p>\n\n<p>If you add the option <code>undefined</code> will be present in the return type. </p>\n"}], "owner": {"reputation": 327, "user_id": 4684928, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/df341abbbceb880f77b4652825126e7d?s=128&d=identicon&r=PG&f=1", "display_name": "Aeterna", "link": "https://stackoverflow.com/users/4684928/aeterna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 59479555, "answer_count": 1, "score": 1, "last_activity_date": 1577286124, "creation_date": 1577282871, "question_id": 59479171, "link": "https://stackoverflow.com/questions/59479171/typescript-does-not-infer-undefined-as-a-return-type-from-array-prototype-find", "title": "Typescript does not infer undefined as a return type from array.prototype.find", "body": "<p>I have a project using typescript 3.7.2 and every time i use the \"find\" method on arrays vs code does not show \"undefined\" as a possible return type.</p>\n\n<pre><code>interface Repository&lt;T, TID&gt; {\n  get: (id: TID) =&gt; T | undefined;\n}\n\nclass CustomerRepository implements Repository&lt;Customer, string&gt; {\n  private customers: Customer[];\n\n  constructor() {\n    this.customers = [\n    {\n      id: \"ID1\",\n      name: \"Generic Customer 1\",\n      age: 30\n    },\n    {\n      id: \"ID2\",\n      name: \"Generic Customer 2\",\n      age: 40\n    },\n    {\n      id: \"ID3\",\n      name: \"Generic Customer 3\",\n      age: 50\n    }\n  ]\n  }\n\n  get(id: string): Customer | undefined {\n    return this.customers.find(customer =&gt; customer.id === id);\n  }\n}\n</code></pre>\n\n<p>It does not matter if i call the \"get\" method on the repository or call \"this.customers.find\" inside the repository, it still won't show \"undefined\" as a possible return type.\nThis code will compile and then chrash immediately after running:</p>\n\n<pre><code>const customer = customerRepo.get(\"ID4\");\nconsole.log(customer.id);\n</code></pre>\n\n<p>This is my tsconfig.json file:</p>\n\n<pre><code>{\n\"compilerOptions\": {\n    \"target\": \"es5\",\n    \"module\": \"es6\",\n    \"allowJs\": true,\n    \"sourceMap\": true,\n    \"outDir\": \"./dist\",\n    \"lib\": [\"dom\", \"es6\", \"dom.iterable\", \"scripthost\"],\n    \"noImplicitAny\": true\n},\n\"exclude\": [\n    \"./node_modules/**/*\",\n    \"definitions\"\n]\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ionic-framework"], "answers": [{"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": true, "score": 2, "last_activity_date": 1577283524, "last_edit_date": 1577283524, "creation_date": 1577282643, "answer_id": 59479133, "question_id": 59479065, "link": "https://stackoverflow.com/questions/59479065/how-to-catch-http-fails-on-post-requests/59479133#59479133", "title": "how to catch http fails on post requests", "body": "<p>Wrap this inside a <code>try</code>/<code>catch</code> block. You'd probably get errors in the <code>catch</code> block in that case:</p>\n\n<pre><code>try {\n  const check_cpf = await this.cnhService.check_initial_cpf(this.form_cpf);\n  if (check_cpf['error'] == true) {\n    presentAlertError();\n  } else {\n    console.log('it worked');\n  }\n} catch(error) {\n  presentAlertError();\n}\n</code></pre>\n\n<h2>UPDATE</h2>\n\n<p>Since you're using <code>HttpClient</code> to make the API Call, it doesn't make sense to first convert the <code>Observable</code> into a promise and then catch the error in the <code>catch</code> block.</p>\n\n<p>You could catch the error using <a href=\"https://www.learnrxjs.io/operators/error_handling/catch.html\" rel=\"nofollow noreferrer\"><strong><code>catchError</code></strong></a> and then throw it back to the caller using <a href=\"https://www.learnrxjs.io/operators/creation/throw.html\" rel=\"nofollow noreferrer\"><strong><code>throwError</code></strong></a>. That way, you would be able to catch it in the second callback that you supply to the <code>subscribe</code> method.</p>\n\n<p>Something like this:</p>\n\n<pre><code>check_initial_cpfObservable(something) {\n  return this.http\n    .get(\"your-url-here\")\n    .pipe(catchError(error =&gt; throwError(error)));\n}\n</code></pre>\n\n<p>And then in the component:</p>\n\n<pre><code>this.cnhService.check_initial_cpfObservable(this.form_cpf)\n  .subscribe(\n    response =&gt; console.log('It Worked in Observable!'),\n    error =&gt; this.presentAlertError()\n  )\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Here's a <a href=\"https://stackblitz.com/edit/angular-error-handling-using-catch-error-and-throw-error\" rel=\"nofollow noreferrer\"><strong>Working Code Sample Example</strong></a> for your ref with both the approaches.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577282952, "creation_date": 1577282952, "answer_id": 59479177, "question_id": 59479065, "link": "https://stackoverflow.com/questions/59479065/how-to-catch-http-fails-on-post-requests/59479177#59479177", "title": "how to catch http fails on post requests", "body": "<p>I personally will handle the error in the observable using the <a href=\"https://rxjs-dev.firebaseapp.com/api/operators/catchError\" rel=\"nofollow noreferrer\">catchError</a> operator:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  async check_initial_cpf(cpf: string) {\n    return this.http\n      .post(environment.api_url + \"/check_initial_cpf\", {}, { cpf: cpf })\n      .pipe(catchError(this.handleError()))\n      .toPromise();\n  }\n\n  private handleError&lt;T&gt;() {\n    return (error: any): Observable&lt;T&gt; =&gt; {\n      console.error(error); // log to console or do something with you error\n\n      // Let the app keep running by returning an empty result.\n      // Or you can return a custom error observable\n      return EMPTY;\n    };\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 5905525, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eBIU_t-axbo/AAAAAAAAAAI/AAAAAAAABXk/q-W3gpwf-dU/photo.jpg?sz=128", "display_name": "Manuel Patrone", "link": "https://stackoverflow.com/users/5905525/manuel-patrone"}, "is_accepted": false, "score": 1, "last_activity_date": 1577283260, "creation_date": 1577283260, "answer_id": 59479213, "question_id": 59479065, "link": "https://stackoverflow.com/questions/59479065/how-to-catch-http-fails-on-post-requests/59479213#59479213", "title": "how to catch http fails on post requests", "body": "<p>So if you want to catch en error in the request one example could be:</p>\n\n<pre><code>this.http.post(environment.api_url+'/check_initial_cpf', {}, {cpf:cpf}).toPromise().catch(err=&gt;{\n  console.error(err)\n});\n</code></pre>\n\n<p>In the catch method you can handle the different errors.\nMore information: <a href=\"https://angular.io/guide/http#error-handling\" rel=\"nofollow noreferrer\">https://angular.io/guide/http#error-handling</a> or <a href=\"https://www.learnrxjs.io/operators/error_handling/catch.html\" rel=\"nofollow noreferrer\">https://www.learnrxjs.io/operators/error_handling/catch.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1868, "user_id": 9275568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cikAE.jpg?s=128&g=1", "display_name": "AlleXyS", "link": "https://stackoverflow.com/users/9275568/allexys"}, "is_accepted": false, "score": 1, "last_activity_date": 1577283429, "creation_date": 1577283429, "answer_id": 59479234, "question_id": 59479065, "link": "https://stackoverflow.com/questions/59479065/how-to-catch-http-fails-on-post-requests/59479234#59479234", "title": "how to catch http fails on post requests", "body": "<p>Your service return an observable (or must do this). And \u00een your component you can handle the error so:</p>\n\n<pre><code>await this.cnhService.check_initial_cpf(this.form_cpf).subscribe(result =&gt; {\n// do something with your result (status Code 2xx)\n}, err =&gt; {\n// handle error,\n// example: console.log(err.message);\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 1106835, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8c5953dfe6a51c4a23d92ad9d739acc?s=128&d=identicon&r=PG", "display_name": "millenion", "link": "https://stackoverflow.com/users/1106835/millenion"}, "is_accepted": false, "score": 1, "last_activity_date": 1577284704, "creation_date": 1577284704, "answer_id": 59479370, "question_id": 59479065, "link": "https://stackoverflow.com/questions/59479065/how-to-catch-http-fails-on-post-requests/59479370#59479370", "title": "how to catch http fails on post requests", "body": "<p>First, I need to say that it's a shame not to take advantage of reactive Observables, but that's your choice.</p>\n\n<p>Now concerning your probl\u00e8me: when you use await for synchronous behavior, you need to wrap your call with a classic try catch bloc, in order to handle promise rejections.</p>\n\n<p>I Hope it helped you a bit.</p>\n"}], "owner": {"reputation": 1156, "user_id": 4515940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd806537ed7b51dd73ea37fcfbcc0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "anderlaini", "link": "https://stackoverflow.com/users/4515940/anderlaini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 59479133, "answer_count": 5, "score": 2, "last_activity_date": 1577284704, "creation_date": 1577282129, "last_edit_date": 1577283338, "question_id": 59479065, "link": "https://stackoverflow.com/questions/59479065/how-to-catch-http-fails-on-post-requests", "title": "how to catch http fails on post requests", "body": "<p>In my service i'm calling API this way:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>async check_initial_cpf(cpf:string){\n    return this.http.post(environment.api_url+'/check_initial_cpf', {}, {cpf:cpf}).toPromise();\n}\n</code></pre>\n\n<p>So in my page I'm calling the service this way:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const check_cpf = await this.cnhService.check_initial_cpf(this.form_cpf);\n\nif(check_cpf['error'] == true){\n    presentAlertError();\n} else {\n    console.log('it worked');\n}\n</code></pre>\n\n<p>This is working to catch <code>HTTP 200</code> with content <code>{'error':'api error message'}</code></p>\n\n<p>But nothing happens when HTTP request fails for other reasons (like 404, 500, etc).</p>\n\n<p>How can I do this in a clean way?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "datatables"], "comments": [{"owner": {"reputation": 1562, "user_id": 10218688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9xM7c7fOonQ/AAAAAAAAAAI/AAAAAAAAD_E/b21v5-5cXCw/photo.jpg?sz=128", "display_name": "PALLAMOLLA SAI", "link": "https://stackoverflow.com/users/10218688/pallamolla-sai"}, "edited": false, "score": 0, "creation_date": 1577295327, "post_id": 59479005, "comment_id": 105137881, "body": "I went through this link &quot; <a href=\"http://l-lin.github.io/angular-datatables/#/basic/with-options\" rel=\"nofollow noreferrer\">l-lin.github.io/angular-datatables/#/basic/with-options</a> &quot;                  &amp; in search field I just entered names &amp; corresponding records automatically came. So in your case it&#39;s not happening like that? Could you please tell why you are adding custom code?"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 1562, "user_id": 10218688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9xM7c7fOonQ/AAAAAAAAAAI/AAAAAAAAD_E/b21v5-5cXCw/photo.jpg?sz=128", "display_name": "PALLAMOLLA SAI", "link": "https://stackoverflow.com/users/10218688/pallamolla-sai"}, "edited": false, "score": 0, "creation_date": 1577296541, "post_id": 59479005, "comment_id": 105138123, "body": "Yes, that&#39;s the link that I used when building the datatable, however the problem is with the behavior of the table when filtering"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 1562, "user_id": 10218688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9xM7c7fOonQ/AAAAAAAAAAI/AAAAAAAAD_E/b21v5-5cXCw/photo.jpg?sz=128", "display_name": "PALLAMOLLA SAI", "link": "https://stackoverflow.com/users/10218688/pallamolla-sai"}, "edited": false, "score": 0, "creation_date": 1577297454, "post_id": 59479005, "comment_id": 105138318, "body": "I&#39;m adding custom code because I have a more complex design that just adding a footer, also when I tried the code in your link it came up with an error next is not a function"}, {"owner": {"reputation": 1562, "user_id": 10218688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9xM7c7fOonQ/AAAAAAAAAAI/AAAAAAAAD_E/b21v5-5cXCw/photo.jpg?sz=128", "display_name": "PALLAMOLLA SAI", "link": "https://stackoverflow.com/users/10218688/pallamolla-sai"}, "edited": false, "score": 0, "creation_date": 1577336577, "post_id": 59479005, "comment_id": 105143772, "body": "In your html you are calling filterbyname(on click)? But you mentioned search method code. From where you are calling search method? Could you please provide any stackblitz with sample data?"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 1562, "user_id": 10218688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9xM7c7fOonQ/AAAAAAAAAAI/AAAAAAAAD_E/b21v5-5cXCw/photo.jpg?sz=128", "display_name": "PALLAMOLLA SAI", "link": "https://stackoverflow.com/users/10218688/pallamolla-sai"}, "edited": false, "score": 0, "creation_date": 1577344470, "post_id": 59479005, "comment_id": 105145509, "body": "@PALLAMOLLASAI I have updated my code now it should be more clear, thanks in advance."}], "owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577344434, "creation_date": 1577281733, "last_edit_date": 1577344434, "question_id": 59479005, "link": "https://stackoverflow.com/questions/59479005/searching-in-a-column-in-datatable", "title": "Searching in a column in datatable", "body": "<p>I'm new to Angular, I have a datatable that displays employee data, everything is working fine except that whenever I search in the name field, no data is displaying while searching unless I hit the space key then backspace, otherwise the table just shows that there is no data displayed, although in the console it shows that data exists from the input that I typed.\nSo in order to display data from searching, I have to type the name then space then backspace, hope I've made it clear, Your assistance is much appreciated.</p>\n\n<p>employees.component.html</p>\n\n<pre><code>&lt;table id=\"myTable\" datatable [dtOptions]=\"dtOptions\" \n [dtTrigger]=\"dtTrigger\" class=\"row-border \n  hover stripe\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th class=\"border-left\" translate&gt;employees.name&lt;i class=\"fas fa- \n       search\"\n       10px 0px 10px;\" (click)=\"filterByName()\"&gt;&lt;/i&gt;&lt;input type=\"text\" \n       [formControl]=\"employeeFilterCtrl\" id=\"myId\" style=\"z-index: 9999; \n       display: none;\"/&gt;&lt;/th&gt;\n      &lt;th class=\"border-center\" translate&gt;employees.status&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;ng-container *ngFor=\"let item of filteredEmployees | async\"&gt;\n    &lt;tr *ngFor=\"let employeeStatus of item.employeeJobStatuses\"&gt;\n      &lt;td&gt;{{ item.firstName_FL + ' ' + item.secondName_FL + ' ' + \n         item.lastName_FL + ' ' + \n       item.familyName_FL }}&lt;/td&gt;\n      &lt;td&gt;{{ employeeStatus.status | translate }}&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/ng-container&gt;\n  &lt;/tbody&gt;\n</code></pre>\n\n<p>employees.component.ts</p>\n\n<pre><code>filterByName(){\ndocument.querySelector('#myId').setAttribute('style', 'display: unset);\n}\nsearch() {\n    if (!this.employees) {\n        return\n    }\n    let search = this.employeeFilterCtrl.value;\n    if (!search) {\n        this.filteredEmployees.next(this.employees.slice());\n        console.log(this.filteredEmployees.next(this.employees.slice()))\n        return;\n    } else {\n        search = search.toLowerCase();\n    }\n    this.filteredEmployees.next(\n        this.employees.filter(employee =&gt; \n       employee.firstName_FL.toLowerCase().indexOf(search) &gt; -1)\n    );\n    console.log(this.employees.filter(department =&gt;\n        department.firstName_FL.toLowerCase().indexOf(search) &gt; -1))\n}\n\ngetActiveEmployees(){\nthis.loading = true;\nthis.restService.GetActiveEmployees().subscribe((res: any) =&gt; {\n  this.employees = res.data.employees;\n  console.log(this.employees)\n  const maw = JSON.stringify(this.employees)\n  this.jsonObj = JSON.parse(maw);\n  this.Employee.setValue(this.employees[5]);\n  this.filteredEmployees.next(this.employees.slice());\n  this.employeeFilterCtrl.valueChanges\n  .pipe(takeUntil(this._onDestroy))\n  .subscribe(() =&gt; {\n    this.search();\n  });\n  if (this.isDtInitialized) {\n    this.dtElement.dtInstance.then((dtInstance: DataTables.Api) =&gt; {\n      dtInstance.destroy();\n      this.dtTrigger.next();\n    });\n  } else {\n    this.isDtInitialized = true\n    this.dtTrigger.next();\n  }\n  this.loading = false;\n })\n }\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "ionic-framework", "axios"], "comments": [{"owner": {"reputation": 572, "user_id": 4489305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-F7SZw6BywKs/AAAAAAAAAAI/AAAAAAAABa8/9FF0bU3jjFw/photo.jpg?sz=128", "display_name": "Rami Loiferman", "link": "https://stackoverflow.com/users/4489305/rami-loiferman"}, "edited": false, "score": 0, "creation_date": 1577278619, "post_id": 59478486, "comment_id": 105134155, "body": "Where does the change happens ? Can&#39;t you set the value throw state ?                      <code>this.state = {   warningColor: true, alerVal:0 }</code> and change the state on change ?"}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1577278724, "post_id": 59478486, "comment_id": 105134184, "body": "When is the number of alerts going to change? You have a static <code>0</code> in there; is some other part of the app going to do <code>alert.textContent = &quot;X&quot;</code>? and calling <code>onChange</code>? That&#39;s seems very inelegant; the number of alerts should get passed to the Component as prop."}, {"owner": {"reputation": 645, "user_id": 7692076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz3oP.jpg?s=128&g=1", "display_name": "Akshit Mehra", "link": "https://stackoverflow.com/users/7692076/akshit-mehra"}, "edited": false, "score": 0, "creation_date": 1577281265, "post_id": 59478486, "comment_id": 105134842, "body": "The static value <code>0</code>, can&#39;t you manage that in the application state?"}], "answers": [{"tags": [], "owner": {"reputation": 7527, "user_id": 7899477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184243d536359af116e7e48cdba6feb9?s=128&d=identicon&r=PG&f=1", "display_name": "Siva K V", "link": "https://stackoverflow.com/users/7899477/siva-k-v"}, "is_accepted": true, "score": 1, "last_activity_date": 1577291713, "creation_date": 1577291713, "answer_id": 59480176, "question_id": 59478486, "link": "https://stackoverflow.com/questions/59478486/check-a-div-value-and-update-a-class-in-react/59480176#59480176", "title": "Check a div value and update a class in React", "body": "<p>In React way, 1) avoid using querySelector and fetch values and 2) have your conditions in render method. How about some this like this. Hope this helps.</p>\n\n<pre><code>this.state = {\n    aletText: 0\n}\n\ncomponentDidMount() {\n// change state (alertText or other delayedText) if required\n}\n\nhandleAlerts() {\n// change state (alertText or other delayedText) if required\n}\n\nrender() {\n    const { alertText } = this.state;\n    // if required with delayedText, store in state and add condition here\n    var alertClass = \"number \" + (alertText !== 0 ? \"text-warning\" : \"text-success\") ;\n    return (&lt;div id=\"alert\" className={alertClass} onChange={this.handleAlerts}&gt;{alertText}&lt;/div&gt;)\n}\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 3811602, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8841b485967578937c8e56b4f0223acf?s=128&d=identicon&r=PG&f=1", "display_name": "solracid", "link": "https://stackoverflow.com/users/3811602/solracid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 59480176, "answer_count": 1, "score": 0, "last_activity_date": 1577299009, "creation_date": 1577277682, "last_edit_date": 1577299009, "question_id": 59478486, "link": "https://stackoverflow.com/questions/59478486/check-a-div-value-and-update-a-class-in-react", "title": "Check a div value and update a class in React", "body": "<p>It will be part of the app Dashboard. It will receive a number as a string from the API, this part is still to be implemented. Probably an <code>axios</code>call at the <code>onComponentDidMount</code>.</p>\n\n<p>I want to set some number text in a specific color depending on its value. I am reading the number value at page load and <code>onChange</code>, then setting a bootstrap class. Im developing in Ionic with <code>React</code>.</p>\n\n<pre><code>this.state = {\n    warningColor: true\n}\n\ncomponentDidMount() {\n    var delayed: HTMLElement | null = document.querySelector(\"#delayed\");\n    if (delayed != null &amp;&amp; delayed.textContent === \"0\") {\n        this.setState({ warningColor: false })\n    }\n}\n\nhandleAlerts() {\n    var delayed: HTMLElement | null = document.querySelector(\"#alert\");\n    if (delayed != null &amp;&amp; delayed.textContent == \"0\") {\n        this.setState({ warningColor: false })\n    } else {\n        this.setState({ warningColor: true })\n    }\n}\n\n&lt;div id=\"alert\" className={\"number \" + (this.state.warningColor ? \"text-warning\" : \"text-success\")} onChange={this.handleAlerts}&gt;0&lt;/div&gt;\n</code></pre>\n\n<p>Is there a better/cleaner way to check the value and set the class in the <code>div</code>?</p>\n"}, {"tags": ["typescript", "visual-studio-code", "vscode-settings"], "owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1578305685, "creation_date": 1577276185, "last_edit_date": 1578305685, "question_id": 59478311, "link": "https://stackoverflow.com/questions/59478311/is-there-any-option-to-change-auto-implementation-typescript-language-in-vscode", "title": "Is there any option to change auto-implementation TypeScript language in VSCode?", "body": "<p>I'm woring with VSCode and TypeScript and using many interfaces that refer to eachother. So the VSCode's <code>Implement interface</code> hotfix function is very useful, but the end result is not perfect.</p>\n\n<p>Here is what I get now:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { CertificationOutgoingInvoiceUIFieldsInterface } from './certification-outgoing-invoice.interface';\n\nexport class CertificationOutgoingInvoice implements CertificationOutgoingInvoiceUIFieldsInterface {\n  deviza_id: import(\"../../../base-model/base-data-type.model\").ID;\n  deviza_exchange_type_id: import(\"../../../base-model/base-data-type.model\").ID;\n  payment_type_id: import(\"../../../base-model/base-data-type.model\").ID;\n  foreign_invoice_id: string;\n  foreign_api_status: import(\"../../../base-model/base-data-type.model\").ForeignAPIStatus;\n  foreign_api_messages: string[];\n  is_installment_enabled: boolean;\n  installments: import(\"../../../invoice/installment/invoice-installment.interface\").InvoiceInstallmentInterface[];\n  files: import(\"../../../file/file-model.interface\").FileModelInterface[];\n}\n</code></pre>\n\n<p>Actually two problems are here.</p>\n\n<ol>\n<li><p>I set it up earlier in tslint to use apostrophe instead of double quotes. It's working fine if I use the <kbd>Ctrl</kbd> + <kbd>space</kbd> combination to include an import line.</p></li>\n<li><p>This end result would be much more handy:</p></li>\n</ol>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { CertificationOutgoingInvoiceUIFieldsInterface } from './certification-outgoing-invoice.interface';\nimport { ID, ForeignAPIStatus } from 'src/app/models/base-model/base-data-type.model';\nimport { InvoiceInstallmentInterface } from 'src/app/models/invoice/installment/invoice-installment.interface';\nimport { FileModelInterface } from 'src/app/models/file/file-model.interface';\n\nexport class CertificationOutgoingInvoice implements CertificationOutgoingInvoiceUIFieldsInterface {\n  deviza_id: ID;\n  deviza_exchange_type_id: ID;\n  payment_type_id: ID;\n  foreign_invoice_id: string;\n  foreign_api_status: ForeignAPIStatus;\n  foreign_api_messages: string[];\n  is_installment_enabled: boolean;\n  installments: InvoiceInstallmentInterface[];\n  files: FileModelInterface[];\n}\n</code></pre>\n\n<p>This is much more cleaner. Now I need to spend time to fix the auto-implement's result to this.</p>\n\n<p>Is there any option to get this end result in VSCode?</p>\n"}, {"tags": ["reactjs", "mongodb", "typescript", "mongoose", "redux"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9829859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dagbi Akerson", "link": "https://stackoverflow.com/users/9829859/dagbi-akerson"}, "edited": false, "score": 0, "creation_date": 1577277273, "post_id": 59478427, "comment_id": 105133889, "body": "Yes, I&#39;ve also found this problem, thank you very much, but It&#39;s still not showing in View, just a blank row"}, {"owner": {"reputation": 3, "user_id": 9829859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dagbi Akerson", "link": "https://stackoverflow.com/users/9829859/dagbi-akerson"}, "edited": false, "score": 1, "creation_date": 1577277912, "post_id": 59478427, "comment_id": 105134004, "body": "I will mark it as right answer, bacause it did solve the problem, thank you again!"}, {"owner": {"reputation": 910, "user_id": 11591930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NU6Oj.png?s=128&g=1", "display_name": "sudo97", "link": "https://stackoverflow.com/users/11591930/sudo97"}, "reply_to_user": {"reputation": 3, "user_id": 9829859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dagbi Akerson", "link": "https://stackoverflow.com/users/9829859/dagbi-akerson"}, "edited": false, "score": 0, "creation_date": 1577277927, "post_id": 59478427, "comment_id": 105134007, "body": "You should try to add a lifecycle method like <code>componentWillReceiveProps</code> to change the props you recieve from the redux store."}], "tags": [], "owner": {"reputation": 910, "user_id": 11591930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NU6Oj.png?s=128&g=1", "display_name": "sudo97", "link": "https://stackoverflow.com/users/11591930/sudo97"}, "is_accepted": true, "score": 0, "last_activity_date": 1577277040, "creation_date": 1577277040, "answer_id": 59478427, "question_id": 59478253, "link": "https://stackoverflow.com/questions/59478253/view-is-not-updating-after-adding-element-to-mongodb/59478427#59478427", "title": "View is not updating after adding element to MongoDB", "body": "<p>You should return the updated <code>team</code> from your back-end API. You can modify your API like this. </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>router.route('/add').post(async (req, res) =&gt; {\n    const name = req.body.name;\n    const count = 0;\n    const newTeam = new Team({name, count,});\n    await newTeam.save()\n        .then(team =&gt; res.json(team))\n        .catch(err =&gt; res.status(400).json('Error: ' + err));\n\n});\n</code></pre>\n\n<p>Drop a comment if the problem still persists.</p>\n"}], "owner": {"reputation": 3, "user_id": 9829859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dagbi Akerson", "link": "https://stackoverflow.com/users/9829859/dagbi-akerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 59478427, "answer_count": 1, "score": 0, "last_activity_date": 1577277874, "creation_date": 1577275671, "last_edit_date": 1577277874, "question_id": 59478253, "link": "https://stackoverflow.com/questions/59478253/view-is-not-updating-after-adding-element-to-mongodb", "title": "View is not updating after adding element to MongoDB", "body": "<p>[SOLVED]\nI'm trying to make a small application with Redux/React/Mongo/Typescript and faced a problem, that when I'm adding element to database, I can see new added row in a table but without values in it. But after refreshing the page, values are there.\nI think that this is because the array with records immediately refreshes, while new element is not in database yet. I used await/async but it didn't solve this problem. Can anyone help me with this?</p>\n\n<p>Action.ts</p>\n\n<pre><code>export const getAllTeams: ActionCreator&lt;ThunkAction&lt;Promise&lt;any&gt;, \n    ITeam[],                 \n    null,                       \n    ITeamGetAllAction          \n    &gt;&gt; = () =&gt; {\n    return async (dispatch: Dispatch) =&gt; {\n        await axios.get('http://localhost:5000/teams/')\n            .then(res =&gt; {\n                    dispatch({\n                        teams: res.data,\n                        type: TeamActionsTypes.GET_ALL,\n                    })\n                }\n            );\n    };\n};\nexport const addTeam: ActionCreator&lt;ThunkAction&lt;Promise&lt;any&gt;,\n    ITeamAddTeamAction,\n    ITeam,\n    ITeamAddTeamAction         \n    &gt;&gt; = (team: ITeam) =&gt; {\n    return async (dispatch: Dispatch) =&gt; {\n        await axios.post('http://localhost:5000/teams/add', team)\n            .then(res =&gt; {\n                dispatch({\n                    type: TeamActionsTypes.ADD_TEAM,\n                    result: res,\n                });\n            })\n    };\n};\n</code></pre>\n\n<p>Reducer.ts:</p>\n\n<pre><code>export const teamReducer: Reducer&lt;ITeamState, TeamActions&gt; = (\n    state = initialTeamState,\n    action,\n) =&gt; {\n    switch (action.type) {\n        case TeamActionsTypes.GET_ALL: {\n            return {\n                ...state,\n                teams: action.teams,\n            };\n        }\n        case TeamActionsTypes.ADD_TEAM: {\n            return{\n                ...state,\n                teams: [action.result,...state.teams]\n            }\n        }\n        case TeamActionsTypes.GET_ONE: {\n            return{\n                ...state,\n            }\n        }\n        default:\n            return state;\n    }\n};\n</code></pre>\n\n<p>Component.tsx</p>\n\n<pre><code>interface RatingTableProps {\n    getTeams: () =&gt; Promise&lt;TeamActionsTypes.GET_ALL&gt;;\n    teams: ITeam[];\n}\n\nconst RatingTable: React.FC&lt;RatingTableProps&gt; = ({\n    getTeams,\n    teams\n}) =&gt; {\n    useEffect(()=&gt;{\n        getTeams();\n    },[]);\n\n    return (\n        &lt;table className=\"striped\"&gt;\n            &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Team&lt;/th&gt;\n                &lt;th className=\"right-align\"&gt;Clicks&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n            {teams &amp;&amp; teams.map(team =&gt; {\n                return &lt;&gt;\n                    &lt;tr key={team.name}&gt;\n                        &lt;td&gt;{team.name}&lt;/td&gt;\n                        &lt;td className=\"right-align\"&gt;{team.count}&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/&gt;\n            })}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    )\n};\n\nconst mapStateToProps = (store: IAppState) =&gt; {\n    return {\n        teams: store.teamState.teams,\n    };\n};\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch&lt;any, any, AnyAction&gt;) =&gt; {\n    return {\n        getTeams: () =&gt; dispatch(getAllTeams()),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RatingTable);\n</code></pre>\n\n<p>ComponentAdd.tsx</p>\n\n<pre><code>interface RatingFormProps{\n    addTeam: (team: ITeam) =&gt; Promise&lt;TeamActionsTypes.ADD_TEAM&gt;;\n}\n\nconst RatingForm: React.FC&lt;RatingFormProps&gt; = ({\n    addTeam\n})=&gt; {\n    const [teamName, setTeamName] = useState&lt;string&gt;('');\n\n    const changeHandle = (event: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {\n        setTeamName(event.target.value);\n    };\n\n    const handleSubmit = (event: React.FormEvent) =&gt;{\n        event.preventDefault();\n        addTeam({\n            name: teamName,\n            count: 0,\n        });\n        setTeamName('')\n    };\n\n    return (\n        &lt;div className=\"row\"&gt;\n            &lt;form onSubmit={handleSubmit}&gt;\n                &lt;div className=\"inputField col s6\"&gt;\n                    &lt;label htmlFor=\"teamName\" className=\"active\"&gt;\n                        Name your team:\n                    &lt;/label&gt;\n                    &lt;input\n                        onChange={changeHandle}\n                        value={teamName}\n                        type=\"text\"\n                        id=\"teamName\"\n                        placeholder=\"Best team name ever\"\n                    /&gt;\n                &lt;/div&gt;\n                &lt;div className=\"col s6\"&gt;\n                    &lt;button className=\"btn-large waves-effect waves-light\" type=\"submit\" name=\"action\"&gt;Submit\n                    &lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    )\n\n};\nconst mapDispatchToProps = (dispatch: ThunkDispatch&lt;any, any, AnyAction&gt;) =&gt; {\n    return {\n        addTeam: (team: ITeam) =&gt; dispatch(addTeam(team)),\n    };\n};\n\nexport default connect(\n    null,\n    mapDispatchToProps,\n)(RatingForm);\n</code></pre>\n\n<p>teams.js(Routes)</p>\n\n<pre><code>router.route('/').get(async (req, res) =&gt; {\n    await Team.find()\n        .then(teams =&gt; res.json(teams))\n        .catch(err =&gt; res.status(400).json('Error: ' + err));\n});\n\nrouter.route('/add').post(async (req, res) =&gt; {\n    const name = req.body.name;\n    const count = 0;\n    const newTeam = new Team({name, count,});\n    await newTeam.save()\n        .then(() =&gt; res.json('Team added to database!'))\n        .catch(err =&gt; res.status(400).json('Error: ' + err));\n\n});\n</code></pre>\n\n<p>How it looks in UI:\n<a href=\"https://i.stack.imgur.com/lcAZy.png\" rel=\"nofollow noreferrer\">before adding new element</a>\n<a href=\"https://i.stack.imgur.com/1Z1rA.png\" rel=\"nofollow noreferrer\">after adding new element</a></p>\n\n<p>If you need any additional information or code, please let me know. Thank you!</p>\n\n<p>UPDATE 1:\nThank to the comment, of course one big error is to return actual object after posting, not a string(Shame on me)</p>\n\n<pre><code>router.route('/add').post(async (req, res) =&gt; {\n    const name = req.body.name;\n    const count = 0;\n    const newTeam = new Team({name, count,});\n    await newTeam.save()\n        .then((team) =&gt; res.json(team))\n        .catch(err =&gt; res.status(400).json('Error: ' + err));\n\n});\n</code></pre>\n\n<p>UPDATE 2:\nOMG this was such a stupid error\nThe previous update solved an issue, but after I've recieved undefiened value from dipatch and this was because I was returning Promis, but not value.</p>\n\n<pre><code>export const addTeam: ActionCreator&lt;ThunkAction&lt;Promise&lt;any&gt;,\n    ITeamAddTeamAction,\n    ITeam,\n    ITeamAddTeamAction         \n    &gt;&gt; = (team: ITeam) =&gt; {\n    return async (dispatch: Dispatch) =&gt; {\n        await axios.post('http://localhost:5000/teams/add', team)\n            .then(res =&gt; {\n                dispatch({\n                    type: TeamActionsTypes.ADD_TEAM,\n                    result: res.data, //&lt;- Instead of just res\n                });\n            })\n    };\n};\n</code></pre>\n\n<p>Thanks to everyone, who spent some time on it, stupid errors as always.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 321, "user_id": 9939431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57486826a1e54673b28ec6d8138f68cd?s=128&d=identicon&r=PG", "display_name": "saravana", "link": "https://stackoverflow.com/users/9939431/saravana"}, "edited": false, "score": 0, "creation_date": 1577275729, "post_id": 59478198, "comment_id": 105133545, "body": "Can you elaborate , are you asking like when click over an element you want to change it&#39;s color."}, {"owner": {"reputation": 437, "user_id": 11337114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bn96c.jpg?s=128&g=1", "display_name": "Akif Hussain", "link": "https://stackoverflow.com/users/11337114/akif-hussain"}, "edited": false, "score": 0, "creation_date": 1577275824, "post_id": 59478198, "comment_id": 105133567, "body": "What do you mean by activating the timeline?"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 10848266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a2970fe79dd0be58f6297051ef3794?s=128&d=identicon&r=PG&f=1", "display_name": "Chamika", "link": "https://stackoverflow.com/users/10848266/chamika"}, "is_accepted": false, "score": 0, "last_activity_date": 1577276134, "creation_date": 1577276134, "answer_id": 59478303, "question_id": 59478198, "link": "https://stackoverflow.com/questions/59478198/enable-variable-value-in-timeline/59478303#59478303", "title": "Enable variable value in Timeline", "body": "<p>If I got the problem correctly, you want to activate the timeline with a value (Ex:1,2,3,4) at the beginning.</p>\n\n<p>You can do this by calling the onClick(i) in the constructor.</p>\n\n<pre><code>constructor(){\n  this.onClick(1);\n}\n</code></pre>\n\n<p>If you call onClick(4) it will deactivate the timeline.</p>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577278554, "post_id": 59478377, "comment_id": 105134143, "body": "It works ! But there is another way to accomplish this without having to use ngOnInit, because there are cases that don&#39;t work because ngOnInit runs only once. But thank you so much for helping me!"}], "tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": true, "score": 1, "last_activity_date": 1577276651, "creation_date": 1577276651, "answer_id": 59478377, "question_id": 59478198, "link": "https://stackoverflow.com/questions/59478198/enable-variable-value-in-timeline/59478377#59478377", "title": "Enable variable value in Timeline", "body": "<p>Just add methods for that:</p>\n\n<pre><code>ngOnInit() {\n  this.setInitialStateOfProgress(4);\n}\n\nsetInitialStateOfProgress(initialState) {\n  this.priorities.forEach(priority =&gt; {\n    priority.isComplete = priority.id === initialState\n  })\n}\n</code></pre>\n\n<p>You can then call <code>setInitialStateOfProgress</code> with an initial state value and that would be set as the initial state of the timeline.</p>\n\n<hr>\n\n<blockquote>\n  <p>Here's a <a href=\"https://stackblitz.com/edit/angular-progress-with-custom-initial-state?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\"><strong>Working Sample Code Demo</strong></a> for your ref.</p>\n</blockquote>\n"}], "owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59478377, "answer_count": 2, "score": 2, "last_activity_date": 1577276651, "creation_date": 1577275228, "question_id": 59478198, "link": "https://stackoverflow.com/questions/59478198/enable-variable-value-in-timeline", "title": "Enable variable value in Timeline", "body": "<p>I developed a timeline that activates according to clicks and changes colors.</p>\n\n<p>My problem is that I can't activate the timeline with the value of the variable value.</p>\n\n<p>Example: My variable value = 4, would enable timeline with number 4, if value = 3 enabled timeline number 3 ....</p>\n\n<p>Does anyone know how I can apply this?</p>\n\n<p>Thanks</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-lqmcds?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">Stackblitz</a></p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;div&gt;\n  &lt;div id=\"connection\" [class]=\"classOfConnection()\" &gt;&lt;/div&gt;   \n  &lt;ul&gt;\n    &lt;li *ngFor=\"let priority of priorities\" [class]=\"classOfPriority(priority.id)\" \n      (click)=\"onClick(priority.id)\"&gt;{{ priority.id }}&lt;/li&gt;    \n  &lt;/ul&gt;  \n&lt;/div&gt;  \n</code></pre>\n\n<p><strong>Component.ts</strong></p>\n\n<pre><code>value = 4;\n\n  priorities = [\n    { id: 4, text: 'Low', isComplete: true},\n    { id: 3, text: 'Mid Low', isComplete: false},\n    { id: 2, text: 'Mid', isComplete: false},\n    { id: 1, text: 'High', isComplete: false},\n  ];\n\n\n  onClick(id: number) {\n    const priority = this.priorities.find(p =&gt; p.id === id);\n    priority.isComplete = !priority.isComplete;\n    if (priority.isComplete) {\n      this.priorities.filter(p =&gt; p !== priority).forEach(p =&gt; p.isComplete = false);\n    }\n</code></pre>\n"}, {"tags": ["html", "css", "angular", "typescript"], "comments": [{"owner": {"reputation": 1634, "user_id": 11796003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yysPJ.jpg?s=128&g=1", "display_name": "Adam Strauss", "link": "https://stackoverflow.com/users/11796003/adam-strauss"}, "edited": false, "score": 0, "creation_date": 1577275420, "post_id": 59478137, "comment_id": 105133468, "body": "make div position relative to image"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577278966, "post_id": 59478397, "comment_id": 105134231, "body": "Thanks for trying to help me! I tested using both images and the div is not in the same position on both images :("}, {"owner": {"reputation": 6933, "user_id": 8583669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iGwt.jpg?s=128&g=1", "display_name": "johannchopin", "link": "https://stackoverflow.com/users/8583669/johannchopin"}, "reply_to_user": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577281829, "post_id": 59478397, "comment_id": 105134960, "body": "The div is aligned to the image with a relative size using <code>%</code> so if the images have different sizes it&#39;s a normal behaviour."}, {"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577283302, "post_id": 59478397, "comment_id": 105135294, "body": "I tested with px and it still didn&#39;t work, but it&#39;s &quot;responsive&quot;"}], "tags": [], "owner": {"reputation": 6933, "user_id": 8583669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iGwt.jpg?s=128&g=1", "display_name": "johannchopin", "link": "https://stackoverflow.com/users/8583669/johannchopin"}, "is_accepted": false, "score": 1, "last_activity_date": 1577276846, "creation_date": 1577276846, "answer_id": 59478397, "question_id": 59478137, "link": "https://stackoverflow.com/questions/59478137/place-div-inside-images-with-different-widths/59478397#59478397", "title": "Place div inside images with different widths", "body": "<p>You can simple achieve this using a simple <code>container</code> like a <code>div</code> that as a <code>position: relative</code> just like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.img-box-ctn {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n\r\n.boxImage {\r\n    display: flex;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    bottom: 9%;\r\n    left: 43%;\r\n    background-color: white;\r\n    background-position: 13px 13px;\r\n    background-repeat: no-repeat;\r\n    height: 50px;\r\n    width: 44%;\r\n    border-radius: 8px;\r\n    opacity: 1;\r\n    \r\n    max-width: 250px;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"drop\" &gt;\r\n    &lt;div class=\"abc\"&gt;\r\n      &lt;div class=\"img-box-ctn\"&gt;\r\n      \r\n      &lt;img class=\"img-fluid Images\" src=\"https://i.ibb.co/mqnwwKB/Screenshot-72.jpg\"&gt;\r\n      &lt;!-- &lt;img class=\"img-fluid Images\" src=\"https://i.ibb.co/3p3D4h6/dmitry-bayer-276d-F1-RG67-Q-unsplash.jpg\"&gt; --&gt;\r\n      &lt;div class=\"boxImage\"&gt;\r\n          &lt;div class=\"row divBtn\"&gt;\r\n              &lt;a class=\"toggle-one\"&gt;\r\n                  &lt;span class=\"nav-link btnZ\"&gt;&lt;/span&gt;\r\n                &lt;/a&gt;\r\n              &lt;a class=\"toggle-two\"&gt;\r\n                &lt;span class=\"nav-link btnT\"&gt;&lt;/span&gt;\r\n              &lt;/a&gt;\r\n              &lt;a class=\"toggle-three\"&gt;\r\n                &lt;span class=\"nav-link btnR\"&gt;&lt;/span&gt;\r\n              &lt;/a&gt;\r\n              &lt;a class=\"toggle-four\"&gt;\r\n                &lt;span class=\"nav-link btnP\"&gt;&lt;/span&gt;\r\n              &lt;/a&gt;\r\n           &lt;/div&gt;\r\n        &lt;ul class=\"list-inline rating-list\" style=\"display: inline-block\"&gt;\r\n          &lt;li&gt;\r\n            &lt;i class=\"fa fa-star\"&gt;&lt;/i&gt;\r\n          &lt;/li&gt;\r\n        &lt;/ul&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;      \r\n    &lt;/div&gt;\r\n\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Check <a href=\"https://jsfiddle.net/nka15oes/9/\" rel=\"nofollow noreferrer\">here</a> the JsFiddle</p>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577282476, "post_id": 59478785, "comment_id": 105135111, "body": "Your link must be incorrect, this is the same as the post :)"}, {"owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "reply_to_user": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577282526, "post_id": 59478785, "comment_id": 105135125, "body": "@Paulsk let me check"}, {"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577283169, "post_id": 59478785, "comment_id": 105135271, "body": "@ Himanshu Singh   In this solution there is only one problem ... in the image with smaller width, the div comes out of the image :("}, {"owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "reply_to_user": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577286192, "post_id": 59478785, "comment_id": 105135977, "body": "@Paulsk answer edited, just add above mentioned code in your css file."}], "tags": [], "owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1577286688, "last_edit_date": 1577286688, "creation_date": 1577280002, "answer_id": 59478785, "question_id": 59478137, "link": "https://stackoverflow.com/questions/59478137/place-div-inside-images-with-different-widths/59478785#59478785", "title": "Place div inside images with different widths", "body": "<p>Add the following classes in your css file. This will make your white box's position relative to the image.     </p>\n\n<pre><code>.abc{\n    position: relative;\n    display: inline-block;\n}\n.abc .boxImage{\n    position: absolute;\n    right: 5px;\n    bottom: 5px;\n}\n</code></pre>\n\n<p><strong>Working Demo</strong>: <a href=\"https://stackblitz.com/edit/angular-z2n2p3\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 59478785, "answer_count": 2, "score": 2, "last_activity_date": 1577305900, "creation_date": 1577274658, "last_edit_date": 1577305900, "question_id": 59478137, "link": "https://stackoverflow.com/questions/59478137/place-div-inside-images-with-different-widths", "title": "Place div inside images with different widths", "body": "<p>I am trying to put a div that is always in the same position (bottom right) on all images.</p>\n\n<p>My problem is that if an image occupies 100% width the div goes to the center :(</p>\n\n<p>How can I put this div on the images, always in the lower right corner, even if I have images with different widths?</p>\n\n<pre><code>.boxImage {\n    flex: 1 1 100%;\n    cursor: pointer;\n    position: absolute;\n    background-color: white;\n    background-position: 13px 13px;\n    background-repeat: no-repeat;\n    height: 50px;\n    width: 44%;\n    border-radius: 8px;\n    opacity: 1;\n    top: 91%;\n    left: 43%;\n    max-width: 250px;\n}\n\n\n&lt;div class=\"d\"&gt;\n    &lt;div class=\"a\"&gt;\n      &lt;img class=\"img-fluid\" src=\"https://i.ibb.co/mqnwwKB/Screenshot-72.jpg\"&gt;\n      &lt;!-- &lt;img class=\"img-fluid Images\" src=\"https://i.ibb.co/3p3D4h6/dmitry-bayer-276d-F1-RG67-Q-unsplash.jpg\"&gt; --&gt;\n  &lt;div class=\"row b\"&gt;       \n    &lt;ul class=\"list-inline rating-list\" *ngFor=\"let star of stars\" style=\"display: inline-block\"&gt;\n      &lt;li (click)=\"countStar(star)\" [ngClass]=\"{'selected': (star &lt;= selectedValue)}\"&gt;\n        &lt;i class=\"fa fa-star\"&gt;&lt;/i&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "redux", "react-redux", "react-props"], "comments": [{"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577274967, "post_id": 59478117, "comment_id": 105133371, "body": "Here&#39;s how <a href=\"https://react-redux.js.org/using-react-redux/static-typing#inferring-the-connected-props-automatically\" rel=\"nofollow noreferrer\">react-redux.js.org/using-react-redux/&hellip;</a>"}, {"owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "reply_to_user": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577289872, "post_id": 59478117, "comment_id": 105136761, "body": "@AlekseyL. that just makes it so you don&#39;t have to type out your props explicitly, but  the props will still throw an error as they will be missing i nthe object declaration"}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577339812, "post_id": 59478117, "comment_id": 105144386, "body": "have you installed <code>@types&#47;react-redux</code>? <code>connect</code> produces component which doesn&#39;t require props provided by &quot;connector&quot; (<code>InferableComponentEnhancerWithProps</code> <i>Injects props and removes them from the prop requirements.</i>)"}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577340366, "post_id": 59478117, "comment_id": 105144493, "body": "Here&#39;s quick demo <a href=\"https://codesandbox.io/s/gifted-sea-pnf3g?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=editor\" rel=\"nofollow noreferrer\">codesandbox.io/s/&hellip;</a>"}, {"owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "reply_to_user": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577361611, "post_id": 59478117, "comment_id": 105150864, "body": "@AlekseyL. Actually that&#39;s my bad, I noticed a way on a second re-read, this should be provided in <code>connect&lt;StateProps, DispatchProps, {}&gt;</code>with <code>{}</code> being <code>OwnProps</code> which are absent. I&#39;m not sure why the ConnectedProps didn&#39;t go through though"}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577364066, "post_id": 59478117, "comment_id": 105151679, "body": "Have a look at above codesandbox - works even without typing the <code>connect</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "is_accepted": true, "score": 0, "last_activity_date": 1577362622, "creation_date": 1577362622, "answer_id": 59488364, "question_id": 59478117, "link": "https://stackoverflow.com/questions/59478117/is-there-a-way-to-avoid-optional-properties-in-react-redux/59488364#59488364", "title": "Is there a way to avoid optional properties in React + Redux?", "body": "<p>The <code>{ connect }</code> function needs to be provided a strong-typed argument. Otherwise it presums for the provided argument to be the props of the Component itself, instead of only the <code>redux</code> props.</p>\n\n<p>Both examples presume the same header: </p>\n\n<pre><code>import React from 'react';\nimport { connect } from 'react-redux';\nimport { someAction  } from '../actions';\n</code></pre>\n\n<hr>\n\n<p>Here's an example of a solution for component with everything.</p>\n\n<pre><code>// could type it explicitly, but this would take forever with every action\ntype StateType = { //... }\ntype DispatchProps = typeof someAction;\ntype StateProps = { someStateProp1: boolean; someStateProp2: number; };\ntype OwnProps = { disabled: boolean; };\n\ntype Props = StateProps &amp; DispatchProps &amp; OwnProps\n\nconst Example: React.FC&lt;Props&gt; = (props: Props) =&gt; (\n   &lt;button disabled={props.disabled} crazyCustomProp={props.someStateProp1} /&gt;\n);\n\nconst mapStateToProps = (state: StateType): StateProps =&gt; ({\n   someStateProp1: state.someStateProp1,\n   someStateProp2: state.someStateProp2,\n});\n\nconst mapDispatchToProps = {\n  someAction,\n};\n\nexport default connect&lt;StateProps, DispatchProps, OwnProps&gt;(\n    mapStateToProps,\n    mapDispatchToProps,\n)(Example);\n</code></pre>\n\n<p>In case of omitting own Props, you would simply pass an empty object <code>{ }</code> in its place instead.</p>\n\n<pre><code>type Props = StateProps &amp; DispatchProps\n// ...\nconnect&lt;StateProps, DispatchProps, {}&gt;(// ...)\n</code></pre>\n"}], "owner": {"reputation": 5229, "user_id": 5512705, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/OoYN6.png?s=128&g=1", "display_name": "Samuel Hulla", "link": "https://stackoverflow.com/users/5512705/samuel-hulla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 1, "accepted_answer_id": 59488364, "answer_count": 1, "score": 0, "last_activity_date": 1577362622, "creation_date": 1577274472, "last_edit_date": 1577290275, "question_id": 59478117, "link": "https://stackoverflow.com/questions/59478117/is-there-a-way-to-avoid-optional-properties-in-react-redux", "title": "Is there a way to avoid optional properties in React + Redux?", "body": "<p>Is there a way to avoid having optional <code>props</code> in <a href=\"/questions/tagged/react\" class=\"post-tag\" title=\"show questions tagged &#39;react&#39;\" rel=\"tag\">react</a> in combination with <a href=\"/questions/tagged/redux\" class=\"post-tag\" title=\"show questions tagged &#39;redux&#39;\" rel=\"tag\">redux</a>? </p>\n\n<p>Let's say I have the following structure:</p>\n\n<p><strong>HOC that invokes the component:</strong></p>\n\n<pre><code>import React from 'react';\nimport QuizEditor from './QuizEditor';\n\nconst Quiz: React.FC = () =&gt; (\n &lt;div&gt;\n   // &lt;QuizMenu /&gt; not necessary for this example\n   &lt;QuizEditor /&gt;\n &lt;/div&gt;\n)\n\nexport default Quiz;\n</code></pre>\n\n<p><strong>My component with <a href=\"/questions/tagged/redux\" class=\"post-tag\" title=\"show questions tagged &#39;redux&#39;\" rel=\"tag\">redux</a>:</strong></p>\n\n<pre><code>import React from 'react';\nimport { connect } from 'react-redux';\nimport { StoreState, QuizType } from 'quiz/types';\nimport { actionAddQuiz } from 'quiz/actions';\n\ntype Props = {\n  quizEditor: QuizType;\n  actionAddQuiz: () =&gt; object;\n}\n\nconst QuizEditor: React.FC&lt;Props&gt; = (props:Props) =&gt; (\n  // further code here...\n)\n\nconst mapStateToProps = (state: StoreState): object =&gt; ({\n  quizEditor: state.quizEditor,\n})\n\nconst mapDispatchToProps = { actionAddQuiz };\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(QuizEditor);\n</code></pre>\n\n<p>Now this obviously errors, as the props provided to <code>&lt;QuizEditor /&gt;</code> are missing. Thing is, I know those props will be provided because I'm explicitly assigning them via <a href=\"/questions/tagged/redux\" class=\"post-tag\" title=\"show questions tagged &#39;redux&#39;\" rel=\"tag\">redux</a>.</p>\n\n<p>Leaving them as optional arguments works, but issue is, then I have to do further unnecessary checks when working with them.</p>\n\n<p>eg. </p>\n\n<pre><code>const { quizEditor } = props;\nreturn (\n  {quizEditor.map( //... ) }\n)\n</code></pre>\n\n<p>errors, because <code>quizEditor</code> could possibly be <code>undefined</code> as an optional prop, so I'd have to do </p>\n\n<pre><code>{ quizEditor &amp;&amp; quizEditor.map( //... ) }\n</code></pre>\n\n<p>Now technically this is only minor annoyance, but an annoyance nonetheless and it feels like there should be some way I'm missing where you can have the best of both worlds.</p>\n\n<p><strong>Is there a way to combine <a href=\"/questions/tagged/react\" class=\"post-tag\" title=\"show questions tagged &#39;react&#39;\" rel=\"tag\">react</a> with <a href=\"/questions/tagged/redux\" class=\"post-tag\" title=\"show questions tagged &#39;redux&#39;\" rel=\"tag\">redux</a> without having to use optional <code>props</code>?</strong></p>\n"}, {"tags": ["javascript", "typescript", "firebase", "es6-modules"], "comments": [{"owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "reply_to_user": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1577274512, "post_id": 59478073, "comment_id": 105133257, "body": "@CertainPerformance I don&#39;t know. I am really new to typescript. BTW how will be define that type Firebase?"}], "answers": [{"tags": [], "owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": true, "score": 1, "last_activity_date": 1577275356, "creation_date": 1577275356, "answer_id": 59478214, "question_id": 59478073, "link": "https://stackoverflow.com/questions/59478073/how-to-use-firebase-in-front-end-as-a-module/59478214#59478214", "title": "How to use firebase in front end as a module?", "body": "<p>You can install Firebase as a dependency so that it appears in <code>node_modules</code>. You won't actually be using anything in it except for its definition file, though. With <code>typeof import(...)</code> syntax, you can import the type of a module, so import it and declare the Firebase type onto the window:</p>\n\n<pre><code>declare global {\n    interface Window {\n        firebase: typeof import('firebase');\n    }\n}\n</code></pre>\n\n<p>Then, you'll be able to reference <code>window.firebase</code> and use its types:</p>\n\n<pre><code>const { firebase } = window;\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport default {\n    fs: firebase.database(),\n    db: firebase.database().ref(),\n    auth: firebase.auth()\n}\n</code></pre>\n"}], "owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 59478214, "answer_count": 1, "score": 1, "last_activity_date": 1577275356, "creation_date": 1577274042, "question_id": 59478073, "link": "https://stackoverflow.com/questions/59478073/how-to-use-firebase-in-front-end-as-a-module", "title": "How to use firebase in front end as a module?", "body": "<p>I am making a project in which I am using typescript and also using the module system(<code>type=\"module\"</code>). I put the following inside my <code>main.html</code> file.</p>\n\n<pre><code>&lt;script src=\"https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have another file <code>firebase.ts</code> which contains </p>\n\n<p>// @ts-nocheck;</p>\n\n<pre><code>var firebaseConfig = {\n    apiKey: \"AIzaSyAePVmVNzKbvbLnAGP1VVQwyEaE7pJ3a_M\",\n    authDomain: \"chess-3ea12.firebaseapp.com\",\n    databaseURL: \"https://chess-3ea12.firebaseio.com\",\n    projectId: \"chess-3ea12\",\n    storageBucket: \"chess-3ea12.appspot.com\",\n    messagingSenderId: \"454944098464\",\n    appId: \"1:454944098464:web:9d10fe0a1808233f5ca1c5\"\n  };\n  // Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport default {\n    fs: firebase.database(),\n    db: firebase.database().ref(),\n    auth: firebase.auth()\n}\n</code></pre>\n\n<p>Typescript will obviously show error</p>\n\n<blockquote>\n  <p>Cannot find name <code>'firebase'</code></p>\n</blockquote>\n\n<p>How I can fix this means that I could get firebase a module so I could import it inside any file.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic-framework"], "comments": [{"owner": {"reputation": 6992, "user_id": 495157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UFMPn.png?s=128&g=1", "display_name": "JGFMK", "link": "https://stackoverflow.com/users/495157/jgfmk"}, "edited": false, "score": 0, "creation_date": 1577277708, "post_id": 59478036, "comment_id": 105133968, "body": "You should be more specific about version of ionic/angular etc you are using."}, {"owner": {"reputation": 1, "user_id": 12566840, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZfeR2OI_GE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3renTa1cTEsBFNAO_-bu7g_Kv86IUw/photo.jpg?sz=128", "display_name": "Leonardo Rifa", "link": "https://stackoverflow.com/users/12566840/leonardo-rifa"}, "reply_to_user": {"reputation": 6992, "user_id": 495157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UFMPn.png?s=128&g=1", "display_name": "JGFMK", "link": "https://stackoverflow.com/users/495157/jgfmk"}, "edited": false, "score": 0, "creation_date": 1577278391, "post_id": 59478036, "comment_id": 105134106, "body": "okay i updated it"}, {"owner": {"reputation": 360, "user_id": 4640909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jxY4.jpg?s=128&g=1", "display_name": "smtaha512", "link": "https://stackoverflow.com/users/4640909/smtaha512"}, "edited": false, "score": 0, "creation_date": 1577279268, "post_id": 59478036, "comment_id": 105134307, "body": "Can you make a stackblitz and share?"}], "owner": {"reputation": 1, "user_id": 12566840, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZfeR2OI_GE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3renTa1cTEsBFNAO_-bu7g_Kv86IUw/photo.jpg?sz=128", "display_name": "Leonardo Rifa", "link": "https://stackoverflow.com/users/12566840/leonardo-rifa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577278590, "creation_date": 1577273813, "last_edit_date": 1577278590, "question_id": 59478036, "link": "https://stackoverflow.com/questions/59478036/isn%c2%b4t-a-known-property-when-i-try-to-build-with-ionic-build-android-prod", "title": "isn&#180;t a known property when i try to build with **Ionic build android --prod**", "body": "<p>i tried to build my project with <strong>Ionic build android --prod</strong> but i got always the following error: \n<a href=\"https://i.stack.imgur.com/x7fHu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x7fHu.png\" alt=\"\"></a></p>\n\n<p>The <code>&lt;events-list&gt;</code>component is declared in EventslistModule:</p>\n\n<pre><code>   declarations: [\n       EventsListComponent,\n       NewestEventsComponent\n   ],\n   imports: [IonicModule, LoaderModule],\n   exports: [\n       EventsListComponent,\n       NewestEventsComponent,\n   ],\n   schemas: [CUSTOM_ELEMENTS_SCHEMA, NO_ERRORS_SCHEMA]\n})\nexport class EventsListModule {}\n</code></pre>\n\n<p>and here are the properties in events-list.ts : </p>\n\n<pre><code>@Input() set eventChange(filteredEvents){\n    this.filteredEvents = filteredEvents;\n\n    if(this.initial == true){\n        this.loadData();\n    }\n  };\n\n  @Input() created:boolean = false;\n  @Input() search:boolean = false;\n  @Input() id:string;\n  @Input() answered:boolean = false;\n  @Input() fromCalender:boolean = true;\n  @Input() status:number = 4;\n  @Input() showMessages = true;\n</code></pre>\n\n<hr>\n\n<pre><code>Ionic:\n\n   Ionic CLI          : 5.4.4 (/usr/local/lib/node_modules/ionic)\n   Ionic Framework    : ionic-angular 3.9.9\n   @ionic/app-scripts : 3.2.4\n\nCordova:\n\n   Cordova CLI       : 8.1.2 (cordova-lib@8.1.1)\n   Cordova Platforms : android 8.1.0, browser 5.0.3, ios 5.0.1\n   Cordova Plugins   : cordova-plugin-ionic-keyboard 2.1.3, cordova-plugin-ionic-webview 1.2.1, (and 30 other plugins)\n\nUtility:\n\n   cordova-res : not installed\n   native-run  : 0.2.8 (update available: 0.3.0)\n\nSystem:\n\n   Android SDK Tools : 26.1.1 (/Users/leonardoprivat/Library/Android/sdk)\n   ios-sim           : 8.0.2\n   NodeJS            : v10.16.3 (/usr/local/bin/node)\n   npm               : 6.9.0\n   OS                : macOS Mojave\n   Xcode             : Xcode 11.0 Build version 11A420a\n</code></pre>\n\n<p>When i build the project without <strong>--prod</strong> then it works fine.</p>\n\n<p>Any Idea how i can solve this problem? </p>\n"}, {"tags": ["typescript", "angular-cli"], "comments": [{"owner": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 3, "creation_date": 1577274169, "post_id": 59478027, "comment_id": 105133170, "body": "Try uninstalling typescript <code>npm uninstall typescript</code> and install a versioned version <code>npm i typescript@3.5.3</code>"}, {"owner": {"reputation": 4901, "user_id": 1520700, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4WHtz.jpg?s=128&g=1", "display_name": "Web Develop Wolf", "link": "https://stackoverflow.com/users/1520700/web-develop-wolf"}, "reply_to_user": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 0, "creation_date": 1577274407, "post_id": 59478027, "comment_id": 105133230, "body": "Thanks - that works - If you want to pop that in as the answer I&#39;ll mark it as a fix :)"}, {"owner": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 1, "creation_date": 1577274586, "post_id": 59478027, "comment_id": 105133274, "body": "Its ok if it helped."}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "edited": false, "score": 0, "creation_date": 1584588444, "post_id": 59478027, "comment_id": 107484445, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/57216110/the-angular-compiler-requires-typescript-3-4-0-and-3-5-0-but-3-5-3-was-found\">The Angular Compiler requires TypeScript &gt;=3.4.0 and &lt;3.5.0 but 3.5.3 was found instead</a>"}], "answers": [{"tags": [], "owner": {"reputation": 850, "user_id": 3934994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LceMD.jpg?s=128&g=1", "display_name": "Rich&#225;rd Baldauf", "link": "https://stackoverflow.com/users/3934994/rich%c3%a1rd-baldauf"}, "is_accepted": true, "score": 1, "last_activity_date": 1615910478, "creation_date": 1615910478, "answer_id": 66658881, "question_id": 59478027, "link": "https://stackoverflow.com/questions/59478027/no-matching-version-found-for-typescript3-4-0/66658881#66658881", "title": "No matching version found for typescript@3.4.0", "body": "<p>Just found this question here because I had the same problem. The answer already mentioned in the comments and yep it was working.</p>\n<p><strong>Solution</strong></p>\n<blockquote>\n<p>npm uninstall typescript</p>\n<p>npm install typescript@3.5.3</p>\n</blockquote>\n<p>I was doing a training course and I had to downgrade for the example.</p>\n"}], "owner": {"reputation": 4901, "user_id": 1520700, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4WHtz.jpg?s=128&g=1", "display_name": "Web Develop Wolf", "link": "https://stackoverflow.com/users/1520700/web-develop-wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 0, "accepted_answer_id": 66658881, "answer_count": 1, "score": 0, "last_activity_date": 1615910478, "creation_date": 1577273707, "question_id": 59478027, "link": "https://stackoverflow.com/questions/59478027/no-matching-version-found-for-typescript3-4-0", "title": "No matching version found for typescript@3.4.0", "body": "<p>I'm trying to serve an angular application, but when attempting to downgrade the typescript I get the following error:</p>\n\n<blockquote>\n  <p>No matching version found for typescript@3.4.0.</p>\n</blockquote>\n\n<p>If the package isn't present does anyone know how I can get this version typescript installed?</p>\n\n<p>The error when I attempt to serve is the following:</p>\n\n<blockquote>\n  <p>The Angular Compiler requires TypeScript >=3.4.0 and &lt;3.6.0 but 3.7.4\n  was found instead</p>\n</blockquote>\n"}, {"tags": ["typescript", "typescript2.0"], "comments": [{"owner": {"reputation": 883, "user_id": 10138657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00773177db161c613ed94bda398a6f23?s=128&d=identicon&r=PG&f=1", "display_name": "Palak Jadav", "link": "https://stackoverflow.com/users/10138657/palak-jadav"}, "edited": false, "score": 0, "creation_date": 1577273101, "post_id": 59477706, "comment_id": 105132899, "body": "You can make get and set method to access that property and using instance of class you can access method"}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "edited": false, "score": 0, "creation_date": 1577273470, "post_id": 59477706, "comment_id": 105132985, "body": "why you&#39;re not declaring <code>Map</code> in class like <code>reonMap</code>?"}, {"owner": {"reputation": 40169, "user_id": 457268, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/404bbb83c4aecfce65c2c882dc0cd94e?s=128&d=identicon&r=PG", "display_name": "k0pernikus", "link": "https://stackoverflow.com/users/457268/k0pernikus"}, "edited": false, "score": 0, "creation_date": 1577279700, "post_id": 59477706, "comment_id": 105134423, "body": "Why did you wrap <code>reonMap</code> in brackets in the property defintion? What do you intend by assigning <code>this[Map]</code> in the constructor?"}], "answers": [{"comments": [{"owner": {"reputation": 40169, "user_id": 457268, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/404bbb83c4aecfce65c2c882dc0cd94e?s=128&d=identicon&r=PG", "display_name": "k0pernikus", "link": "https://stackoverflow.com/users/457268/k0pernikus"}, "edited": false, "score": 0, "creation_date": 1577279820, "post_id": 59478664, "comment_id": 105134452, "body": "Sidenote: Having all your properties accessible and mutable via setters and getters makes them mute and you could almost just as well make the property public. In OOP, one should avoid having outside access to properties as much as possible."}], "tags": [], "owner": {"reputation": 14180, "user_id": 2358409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RMJS4.png?s=128&g=1", "display_name": "uminder", "link": "https://stackoverflow.com/users/2358409/uminder"}, "is_accepted": true, "score": 1, "last_activity_date": 1577279065, "creation_date": 1577279065, "answer_id": 59478664, "question_id": 59477706, "link": "https://stackoverflow.com/questions/59477706/how-to-get-property-outside-of-class/59478664#59478664", "title": "How to get property outside of class?", "body": "<p>TypeScript supports <a href=\"https://www.typescriptlang.org/docs/handbook/classes.html#accessors\" rel=\"nofollow noreferrer\"><code>getters/setters</code></a> as a way of intercepting accesses to a member of an object. In your class, this can be implemented as follows:</p>\n\n<pre><code>export class MapApi {\n    private _reonMap: Map;\n\n    constructor(container: HTMLElement, props: nMapProps = {}) {\n        this._reonMap = new Map(container, libraryUrl, props);\n    }\n\n    get reonMap(): Map {\n      return this._reonMap;\n    }\n}\n</code></pre>\n\n<p>To access it outside of the <code>class</code>, do the following:</p>\n\n<pre><code>const mapApi = new MapApi(...);\nconst reonMap = mapApi.reonMap; \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8291684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjzJH.png?s=128&g=1", "display_name": "OPV", "link": "https://stackoverflow.com/users/8291684/opv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 59478664, "answer_count": 1, "score": 0, "last_activity_date": 1577279065, "creation_date": 1577271674, "last_edit_date": 1577272700, "question_id": 59477706, "link": "https://stackoverflow.com/questions/59477706/how-to-get-property-outside-of-class", "title": "How to get property outside of class?", "body": "<p>I have a class:</p>\n\n<pre><code>export class MapApi {\n  [reonMap]: Map;\n\nconstructor(container: HTMLElement, props: nMapProps = {}) {\n    this[Map] = new Map(container, libraryUrl, props);\n  }\n\n}\n</code></pre>\n\n<p>How to get instance <code>this[Map]</code> of <code>new Map</code> outside class?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 476, "user_id": 11933144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c73d2794639264064d47a0393040ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Insacco", "link": "https://stackoverflow.com/users/11933144/mauro-insacco"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577292492, "post_id": 59477494, "comment_id": 105137299, "body": "I saw you posted an answer, I haven&#39;t been at the pc all day tho, I will check it and test it as soon as I can, thanks by the way"}], "answers": [{"comments": [{"owner": {"reputation": 476, "user_id": 11933144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c73d2794639264064d47a0393040ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Insacco", "link": "https://stackoverflow.com/users/11933144/mauro-insacco"}, "edited": false, "score": 0, "creation_date": 1577292693, "post_id": 59477608, "comment_id": 105137342, "body": "So the code per se is good, even if typescript says there&#39;s an error, I just need to typecast it ?"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "reply_to_user": {"reputation": 476, "user_id": 11933144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c73d2794639264064d47a0393040ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Insacco", "link": "https://stackoverflow.com/users/11933144/mauro-insacco"}, "edited": false, "score": 0, "creation_date": 1577292936, "post_id": 59477608, "comment_id": 105137405, "body": "IMO the problem is caused by <code>throwError(error);</code> this. So just typecasting with solve the problem."}, {"owner": {"reputation": 476, "user_id": 11933144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c73d2794639264064d47a0393040ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Insacco", "link": "https://stackoverflow.com/users/11933144/mauro-insacco"}, "edited": false, "score": 0, "creation_date": 1577293023, "post_id": 59477608, "comment_id": 105137415, "body": "So, at the end of the day, it gave me a type error but it fixed itself as soon as i added finalize to the imports... kinda annoying that I received a completely different error when it was just this stupid, whatever. Thanks a lot :D"}, {"owner": {"reputation": 116, "user_id": 11761689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2-0uT3t0BdI/AAAAAAAAAAI/AAAAAAAAAAs/08QWf-f6r_s/photo.jpg?sz=128", "display_name": "Travis L. Riffle", "link": "https://stackoverflow.com/users/11761689/travis-l-riffle"}, "edited": false, "score": 0, "creation_date": 1597113928, "post_id": 59477608, "comment_id": 112021215, "body": "This fixed my issue!"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 9, "last_activity_date": 1577270873, "creation_date": 1577270873, "answer_id": 59477608, "question_id": 59477494, "link": "https://stackoverflow.com/questions/59477494/angular-interceptor-type-observableunknown-is-not-assignable-to-type-obse/59477608#59477608", "title": "Angular interceptor - Type &#39;Observable&lt;unknown&gt;&#39; is not assignable to type &#39;Observable&lt;HttpEvent&lt;any&gt;&gt;&#39;", "body": "<p>There are two problems here, you need to typecast return to your output, also <code>finalize</code> is missing from <code>imports</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Injectable } from \"@angular/core\";\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n  HttpErrorResponse\n} from \"@angular/common/http\";\nimport { throwError, Observable, BehaviorSubject, of, finalize } from \"rxjs\";\nimport { catchError, filter, take, switchMap } from \"rxjs/operators\";\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  private AUTH_HEADER = \"Authorization\";\n  private token = \"secrettoken\";\n  private refreshTokenInProgress = false;\n  private refreshTokenSubject: BehaviorSubject&lt;any&gt; = new BehaviorSubject&lt;any&gt;(\n    null\n  );\n\n  intercept(\n    req: HttpRequest&lt;any&gt;,\n    next: HttpHandler\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    if (!req.headers.has(\"Content-Type\")) {\n      req = req.clone({\n        headers: req.headers.set(\"Content-Type\", \"application/json\")\n      });\n    }\n\n    req = this.addAuthenticationToken(req);\n\n    return next.handle(req).pipe(\n      catchError((error: HttpErrorResponse) =&gt; {\n        if (error &amp;&amp; error.status === 401) {\n          // 401 errors are most likely going to be because we have an expired token that we need to refresh.\n          if (this.refreshTokenInProgress) {\n            // If refreshTokenInProgress is true, we will wait until refreshTokenSubject has a non-null value\n            // which means the new token is ready and we can retry the request again\n            return this.refreshTokenSubject.pipe(\n              filter(result =&gt; result !== null),\n              take(1),\n              switchMap(() =&gt; next.handle(this.addAuthenticationToken(req)))\n            );\n          } else {\n            this.refreshTokenInProgress = true;\n\n            // Set the refreshTokenSubject to null so that subsequent API calls will wait until the new token has been retrieved\n            this.refreshTokenSubject.next(null);\n\n            return this.refreshAccessToken().pipe(\n              switchMap((success: boolean) =&gt; {\n                this.refreshTokenSubject.next(success);\n                return next.handle(this.addAuthenticationToken(req));\n              }),\n              // When the call to refreshToken completes we reset the refreshTokenInProgress to false\n              // for the next time the token needs to be refreshed\n              finalize(() =&gt; (this.refreshTokenInProgress = false))\n            );\n          }\n        } else {\n          return throwError(error);\n        }\n      })\n    ) as Observable&lt;HttpEvent&lt;any&gt;&gt;;\n  }\n\n  private refreshAccessToken(): Observable&lt;any&gt; {\n    return of(\"secret token\");\n  }\n\n  private addAuthenticationToken(request: HttpRequest&lt;any&gt;): HttpRequest&lt;any&gt; {\n    // If we do not have a token yet then we should not set the header.\n    // Here we could first retrieve the token from where we store it.\n    if (!this.token) {\n      return request;\n    }\n    // If you are calling an outside domain then do not add the token.\n    if (!request.url.match(/www.mydomain.com\\//)) {\n      return request;\n    }\n    return request.clone({\n      headers: request.headers.set(this.AUTH_HEADER, \"Bearer \" + this.token)\n    });\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 476, "user_id": 11933144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c73d2794639264064d47a0393040ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Insacco", "link": "https://stackoverflow.com/users/11933144/mauro-insacco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3134, "favorite_count": 0, "accepted_answer_id": 59477608, "answer_count": 1, "score": 5, "last_activity_date": 1577270873, "creation_date": 1577269911, "question_id": 59477494, "link": "https://stackoverflow.com/questions/59477494/angular-interceptor-type-observableunknown-is-not-assignable-to-type-obse", "title": "Angular interceptor - Type &#39;Observable&lt;unknown&gt;&#39; is not assignable to type &#39;Observable&lt;HttpEvent&lt;any&gt;&gt;&#39;", "body": "<p>I just copied this code from an article</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Injectable } from \"@angular/core\";\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n  HttpErrorResponse\n} from \"@angular/common/http\";\nimport { throwError, Observable, BehaviorSubject, of } from \"rxjs\";\nimport { catchError, filter, take, switchMap } from \"rxjs/operators\";\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  private AUTH_HEADER = \"Authorization\";\n  private token = \"secrettoken\";\n  private refreshTokenInProgress = false;\n  private refreshTokenSubject: BehaviorSubject&lt;any&gt; = new BehaviorSubject&lt;any&gt;(\n    null\n  );\n\n  intercept(\n    req: HttpRequest&lt;any&gt;,\n    next: HttpHandler\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    if (!req.headers.has(\"Content-Type\")) {\n      req = req.clone({\n        headers: req.headers.set(\"Content-Type\", \"application/json\")\n      });\n    }\n\n    req = this.addAuthenticationToken(req);\n\n    return next.handle(req).pipe(\n      catchError((error: HttpErrorResponse) =&gt; {\n        if (error &amp;&amp; error.status === 401) {\n          // 401 errors are most likely going to be because we have an expired token that we need to refresh.\n          if (this.refreshTokenInProgress) {\n            // If refreshTokenInProgress is true, we will wait until refreshTokenSubject has a non-null value\n            // which means the new token is ready and we can retry the request again\n            return this.refreshTokenSubject.pipe(\n              filter(result =&gt; result !== null),\n              take(1),\n              switchMap(() =&gt; next.handle(this.addAuthenticationToken(req)))\n            );\n          } else {\n            this.refreshTokenInProgress = true;\n\n            // Set the refreshTokenSubject to null so that subsequent API calls will wait until the new token has been retrieved\n            this.refreshTokenSubject.next(null);\n\n            return this.refreshAccessToken().pipe(\n              switchMap((success: boolean) =&gt; {\n                this.refreshTokenSubject.next(success);\n                return next.handle(this.addAuthenticationToken(req));\n              }),\n              // When the call to refreshToken completes we reset the refreshTokenInProgress to false\n              // for the next time the token needs to be refreshed\n              finalize(() =&gt; (this.refreshTokenInProgress = false))\n            );\n          }\n        } else {\n          return throwError(error);\n        }\n      })\n    );\n  }\n\n  private refreshAccessToken(): Observable&lt;any&gt; {\n    return of(\"secret token\");\n  }\n\n  private addAuthenticationToken(request: HttpRequest&lt;any&gt;): HttpRequest&lt;any&gt; {\n    // If we do not have a token yet then we should not set the header.\n    // Here we could first retrieve the token from where we store it.\n    if (!this.token) {\n      return request;\n    }\n    // If you are calling an outside domain then do not add the token.\n    if (!request.url.match(/www.mydomain.com\\//)) {\n      return request;\n    }\n    return request.clone({\n      headers: request.headers.set(this.AUTH_HEADER, \"Bearer \" + this.token)\n    });\n  }\n}\n</code></pre>\n\n<p>I'm receiving this error</p>\n\n<pre><code>Type 'Observable&lt;unknown&gt;' is not assignable to type 'Observable&lt;HttpEvent&lt;any&gt;&gt;'.\n  Type 'unknown' is not assignable to type 'HttpEvent&lt;any&gt;'.\n    Property 'type' is missing in type '{}' but required in type 'HttpUserEvent&lt;any&gt;'.ts(2322)\n\n</code></pre>\n\n<p>If I understood correctly (at least from trying to remove parts of the code, the error is caused here</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>return this.refreshAccessToken().pipe(\n              switchMap((success: boolean) =&gt; {\n                this.refreshTokenSubject.next(success);\n                return next.handle(this.addAuthenticationToken(req));\n              }),\n</code></pre>\n\n<p>What should I change to make it work ? And/or why is it not working in the first place if I just straight up used another guy example</p>\n\n<p>(this is the article btw, Mar 2019 <a href=\"https://medium.com/angular-in-depth/top-10-ways-to-use-interceptors-in-angular-db450f8a62d6\" rel=\"noreferrer\">https://medium.com/angular-in-depth/top-10-ways-to-use-interceptors-in-angular-db450f8a62d6</a>, n1)</p>\n"}, {"tags": ["typescript", "typescript-compiler-api"], "answers": [{"comments": [{"owner": {"reputation": 16155, "user_id": 925151, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/b6b0762574ecd4f3a5ea50b737aa08e9?s=128&d=identicon&r=PG&f=1", "display_name": "pleerock", "link": "https://stackoverflow.com/users/925151/pleerock"}, "edited": false, "score": 0, "creation_date": 1577266249, "post_id": 59476961, "comment_id": 105131408, "body": "nope, sorry, I&#39;m talking about TypeScript compiler api: <a href=\"https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API</a>"}], "tags": [], "owner": {"reputation": 81, "user_id": 11277479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc1718ef3fe972bd3f86f5769df47ae?s=128&d=identicon&r=PG&f=1", "display_name": "kodak", "link": "https://stackoverflow.com/users/11277479/kodak"}, "is_accepted": false, "score": -4, "last_activity_date": 1577266105, "creation_date": 1577266105, "answer_id": 59476961, "question_id": 59476836, "link": "https://stackoverflow.com/questions/59476836/difference-between-symbol-and-node-in-typescript-compiler-api/59476961#59476961", "title": "Difference between Symbol and Node in TypeScript Compiler API", "body": "<p>First of all when you say Node in TypeScript i think you are refering to <a href=\"https://nodejs.org/en/\" rel=\"nofollow noreferrer\">nodeJS</a>. NodeJS is a JavaScript runtime, which basically means it executes JavaScript code outside the browser (in the server).</p>\n\n<p>In the other hand <a href=\"https://www.typescriptlang.org/docs/handbook/symbols.html\" rel=\"nofollow noreferrer\">Symbol</a> is a new primitive data type just like String and number and just like strings, symbols can be used as keys for object properties. For more info you can go to the link i provided up and read about it.</p>\n"}, {"comments": [{"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "edited": false, "score": 0, "creation_date": 1616924759, "post_id": 65587470, "comment_id": 118150129, "body": "Thank you for explanation, it clears a lot! Could you also please elaborate on what are <code>Type</code>s? I&#39;m currently trying to recursively print function argument types to json with <code>ts.Type.properties</code>, <code>ts.TypeChecker.getDeclaredTypeOfSymbol</code> and <code>ts.TypeChecker.typeToString</code>, but object <code>{ value : number, str : string }</code> gets printed as <code>{value : any, str : any}</code>. What&#39;s the proper way to recursively iterate over types (not nodes)?"}, {"owner": {"reputation": 801, "user_id": 170815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62b2ed5db42c5ac28685da73893464f?s=128&d=identicon&r=PG", "display_name": "Royston Shufflebotham", "link": "https://stackoverflow.com/users/170815/royston-shufflebotham"}, "reply_to_user": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "edited": false, "score": 1, "creation_date": 1616937479, "post_id": 65587470, "comment_id": 118153166, "body": "It <i>can</i> get a bit funky in there. If you just want to print a type you could use the TS compiler printer:  <code>ts.createPrinter();  printer.printNode(ts.EmitHint.Unspecified, parameterNode.type!, sourceFile)</code>.  That&#39;ll output the type perfectly, as you described it."}], "tags": [], "owner": {"reputation": 801, "user_id": 170815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62b2ed5db42c5ac28685da73893464f?s=128&d=identicon&r=PG", "display_name": "Royston Shufflebotham", "link": "https://stackoverflow.com/users/170815/royston-shufflebotham"}, "is_accepted": false, "score": 1, "last_activity_date": 1609885594, "creation_date": 1609885594, "answer_id": 65587470, "question_id": 59476836, "link": "https://stackoverflow.com/questions/59476836/difference-between-symbol-and-node-in-typescript-compiler-api/65587470#65587470", "title": "Difference between Symbol and Node in TypeScript Compiler API", "body": "<p><code>Node</code>s are part of the Abstract Syntax Tree; these are purely <em>syntactic</em> constructs based on the text in compiled files without any attempt to layer type information on top.</p>\n<p><code>Symbol</code>s are where the TS compiler has started to lay some more <em>semantic</em> constructs on top and you're starting to get type information.</p>\n<p>If you have a <code>TypeChecker</code> in your hand you can jump from the AST world to the types/symbols world via <code>checker.getTypeAtLocation(node)</code>.</p>\n<p>There's some more helpful information on the 'TypeScript Deep Dive' web site about this: <a href=\"https://basarat.gitbook.io/typescript/overview\" rel=\"nofollow noreferrer\">https://basarat.gitbook.io/typescript/overview</a></p>\n"}], "owner": {"reputation": 16155, "user_id": 925151, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/b6b0762574ecd4f3a5ea50b737aa08e9?s=128&d=identicon&r=PG&f=1", "display_name": "pleerock", "link": "https://stackoverflow.com/users/925151/pleerock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1609885594, "creation_date": 1577265084, "last_edit_date": 1577295645, "question_id": 59476836, "link": "https://stackoverflow.com/questions/59476836/difference-between-symbol-and-node-in-typescript-compiler-api", "title": "Difference between Symbol and Node in TypeScript Compiler API", "body": "<p>Can somebody provide a clear definition of what are Symbol and Node in TypeScript compiler API, when and how they are used by compiler and common usage examples by API users.</p>\n\n<p>Also good to know when object contains <code>.symbol</code> and when <code>.aliasSymbol</code> why and what's difference. (The reason I ask is because sometimes I find what I need in <code>.aliasSymbol</code> and sometimes just in <code>.symbol</code>. I would like to understand when compiler decides to use which in a short examples if possible.)</p>\n"}, {"tags": ["typescript", "protractor", "cucumberjs"], "comments": [{"owner": {"reputation": 1092, "user_id": 5878294, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-_9Bl16MYpGs/AAAAAAAAAAI/AAAAAAAAAKs/4q2Ip658H8w/photo.jpg?sz=128", "display_name": "Sanja Paskova", "link": "https://stackoverflow.com/users/5878294/sanja-paskova"}, "edited": false, "score": 0, "creation_date": 1577347571, "post_id": 59476686, "comment_id": 105146283, "body": "Try   require: [&#39;../StepDefs/*.ts&#39;],"}, {"owner": {"reputation": 1, "user_id": 10545131, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NnZJ7zIIeRM/AAAAAAAAAAI/AAAAAAAABNM/yJeapJKVwlo/photo.jpg?sz=128", "display_name": "ankit tripathi", "link": "https://stackoverflow.com/users/10545131/ankit-tripathi"}, "reply_to_user": {"reputation": 1092, "user_id": 5878294, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-_9Bl16MYpGs/AAAAAAAAAAI/AAAAAAAAAKs/4q2Ip658H8w/photo.jpg?sz=128", "display_name": "Sanja Paskova", "link": "https://stackoverflow.com/users/5878294/sanja-paskova"}, "edited": false, "score": 0, "creation_date": 1577348804, "post_id": 59476686, "comment_id": 105146621, "body": "Hi, Thanks for your comment. I tried but no luck. I am getting: (function (exports, require, module, __filename, __dirname) { import {browser, by, element} from &quot;protractor&quot;;                                                                      ^ SyntaxError: Unexpected token {"}], "answers": [{"tags": [], "owner": {"reputation": 589, "user_id": 12373410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBxwrdlQXNP8MTfNiZopHixhWyg3kI6fstWMqu-=k-s128", "display_name": "Sankalan Parajuli", "link": "https://stackoverflow.com/users/12373410/sankalan-parajuli"}, "is_accepted": false, "score": 0, "last_activity_date": 1577687145, "creation_date": 1577687145, "answer_id": 59526596, "question_id": 59476686, "link": "https://stackoverflow.com/questions/59476686/protractor-typescript-cucumber-undefined-step-definition-error/59526596#59526596", "title": "Protractor + TypeScript + Cucumber: Undefined step definition error", "body": "<p>This is a typescript error. You are either trying to run a typescript file or one of your typescript types definition is missing. </p>\n\n<p>In your configuration file, I see that you are pointing to <code>specs: [\"../../FeatureFiles/*.feature\"]</code>, if you are not specifying an extension at the end of the file name, typescript files will be picked up for execution this the syntax '{' error. Try adding .js after <code>specs: [\"../../FeatureFiles/*.feature.js\"]</code>. </p>\n\n<p>Also make sure you are running the protractor js file when executing the tests and not the ts file. </p>\n\n<p>If this does not work, try checking for some missing type definitions for protractor or cucumber in your package.json. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10545131, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NnZJ7zIIeRM/AAAAAAAAAAI/AAAAAAAABNM/yJeapJKVwlo/photo.jpg?sz=128", "display_name": "ankit tripathi", "link": "https://stackoverflow.com/users/10545131/ankit-tripathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1578556857, "creation_date": 1578556857, "answer_id": 59659503, "question_id": 59476686, "link": "https://stackoverflow.com/questions/59476686/protractor-typescript-cucumber-undefined-step-definition-error/59659503#59659503", "title": "Protractor + TypeScript + Cucumber: Undefined step definition error", "body": "<p>I found the solution -\nCreating step def like below resolved the issue- </p>\n\n<p>Given('I am on first page', function () {</p>\n\n<p>Earlier it was - </p>\n\n<p>Given(/^I am on first page$/, async function(callback) {</p>\n"}], "owner": {"reputation": 1, "user_id": 10545131, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NnZJ7zIIeRM/AAAAAAAAAAI/AAAAAAAABNM/yJeapJKVwlo/photo.jpg?sz=128", "display_name": "ankit tripathi", "link": "https://stackoverflow.com/users/10545131/ankit-tripathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1578556857, "creation_date": 1577263688, "last_edit_date": 1577278070, "question_id": 59476686, "link": "https://stackoverflow.com/questions/59476686/protractor-typescript-cucumber-undefined-step-definition-error", "title": "Protractor + TypeScript + Cucumber: Undefined step definition error", "body": "<p>I am learning Protractor/TypeScript/Cucumber and below is my first script. While trying to execute it I am getting an error (also mentioned below) and stuck with it. Can someone please let me know what I am missing. </p>\n\n<p>I have defined step of feature but still getting step not defined error.\nHere is the screenshot of the current state:\n<img src=\"https://i.stack.imgur.com/1VD5F.png\" alt=\"Project Screenshot\"></p>\n\n<p>What all i have tried:</p>\n\n<p>1) I have tried toggling the location of Step defs, even pointing it to step_def.js instead of ste_def.ts.</p>\n\n<p>I also get the following error when I update the path in 'require':</p>\n\n<blockquote>\n  <p><a href=\"https://i.stack.imgur.com/pDb0n.png\" rel=\"nofollow noreferrer\">require: '../../StepDefs/*.ts',</a></p>\n  \n  <p>\"C:\\Program Files\\nodejs\\node.exe\"\n  C:\\Users***\\WebstormProjects\\CucumberProject\\node_modules\\protractor\\bin\\protractor\n  \"C:\\Program Files\\JetBrains\\WebStorm\n  2018.3.1\\plugins\\JavaScriptLanguage\\helpers\\protractor-intellij\\lib\\protractor-intellij-config.js\"\n  --intellijOriginalConfigFile=C:\\Users***\\WebstormProjects\\CucumberProject\\config\\config\\CucumberConfiguration.js\n  --disableChecks [13:56:40] I/launcher - Running 1 instances of WebDriver [13:56:40] I/direct - Using ChromeDriver directly...\n  [13:56:43] E/launcher - Error: </p>\n  \n  <blockquote>\n    <p>C:\\Users***\\WebstormProjects\\CucumberProject\\StepDefs\\my_steps.ts:1\n    (function (exports, require, module, __filename, __dirname) { import\n    {browser, by, element} from \"protractor\";</p>\n  </blockquote>\n</blockquote>\n\n<p>SyntaxError:</p>\n\n<blockquote>\n  <p>Unexpected token { at new Script (vm.js:74:7)</p>\n</blockquote>\n\n<p>2) Deleting and reinstalling it all</p>\n\n<p>Here is the snippet of code:</p>\n\n<p><strong>CucumberConfiguration.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>exports.config = {\n  useAllAngular2AppRoots: true,\n  capabilities: {\n    browserName: \"chrome\"\n  },\n  specs: [\"../../FeatureFiles/*.feature\"],\n\n  framework: \"custom\",\n  frameworkPath: require.resolve(\"protractor-cucumber-framework\"),\n\n  directConnect: true,\n  noGlobals: true,\n\n  cucumberOpts: {\n    compiler: [],\n    strict: true,\n    require: \"../StepDefs/*.js\",\n    // require: '../StepDefs/*.js',\n    // require: '../StepDefs/my_steps.ts',\n\n    tags: false,\n    // format: ['pretty'],\n    profile: false,\n    \"no-source\": true\n  }\n};\n</code></pre>\n\n<p><strong>my_steps.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { browser, by, element } from \"protractor\";\n\nvar myStepDefinitionsWrapper = function() {\n  this.Given(/^I am on first page$/, async function(callback) {\n    browser\n      .get(\n        \"http://www.way2automation.com/angularjs-protractor/registeration/#/login\"\n      )\n      .then(function() {\n        browser.sleep(1000);\n      });\n    await element(browser.model(\"Auth.user.name\")).sendKeys(\"angular\");\n    await element(by.id(\"password\")).sendKeys(\"password\");\n    await element(by.id(\"formly_1_input_username_0\")).sendKeys(\"angular\");\n    await element(by.className(\"btn btn-danger\")).click();\n    await element\n      .all(by.css(\"[href*='#/login']\"))\n      .first()\n      .click()\n      .then(function() {\n        console.log(element(by.id(\"formly_1_input_username_0\")));\n      });\n  });\n};\nmodule.exports = myStepDefinitionsWrapper;  \n</code></pre>\n\n<p><strong>package.json</strong></p>\n\n<pre><code>{\n  \"name\": \"CucumberProject\",\n  \"version\": \"1.0.0\",\n  \"description\": \"First Framework of Protractor with Type Script and cucumber\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"protractor tmp/config/configuration.js\",\n    \"pretest\": \"tsc\",\n    \"cucumbertest\": \"protractor config/config/CucumberConfiguration.js\",\n    \"protractor\": \"./node_modules/protractor/built/cli.js\",\n    \"webdriver-update\": \"./node_modules/.bin/webdriver-manager update\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"@types/cucumber\": \"^6.0.0\",\n    \"@types/jasmine\": \"^3.5.0\",\n    \"@types/jasminewd2\": \"^2.0.8\",\n    \"@types/node\": \"^12.12.21\",\n    \"cucumber\": \"~6.0.5\",\n    \"jasmine\": \"^3.5.0\",\n    \"package.json\": \"^2.0.1\",\n    \"protractor-cucumber-framework\": \"^6.2.0\",\n    \"ts-node\": \"^8.5.4\",\n    \"protractor\": \"^5.4.2\",\n    \"typescript\": \"3.6.4\"\n  }\n} \n</code></pre>\n\n<p><strong>tsconfig.json</strong></p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"module\": \"commonjs\",\n    \"moduleResolution\": \"node\",\n    \"inlineSourceMap\": true,\n    \"declaration\": false,\n    \"noImplicitAny\": false,\n    \"outDir\": \"config\",\n    \"skipLibCheck\": true\n  },\n  \"exclude\": [\n    \"node_modules\",\n    \"asyncAwait\",\n    \"plugins.ts\"\n  ]\n} \n</code></pre>\n"}, {"tags": ["javascript", "json", "angular", "typescript"], "comments": [{"owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "edited": false, "score": 1, "creation_date": 1577263813, "post_id": 59476681, "comment_id": 105130908, "body": "element[&#39;employeeJobStatuses&#39;][&#39;status&#39;]) this should be something like element[&#39;employeeJobStatuses&#39;][i].status])"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "edited": false, "score": 0, "creation_date": 1577263911, "post_id": 59476681, "comment_id": 105130925, "body": "@EugeneSunic I&#39;ve tried it but it came up with an error Cannot read property &#39;status&#39; of undefined"}, {"owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "edited": false, "score": 0, "creation_date": 1577264156, "post_id": 59476681, "comment_id": 105130974, "body": "your json in incorrect (input json), you are missing the array endings and commas"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "edited": false, "score": 0, "creation_date": 1577264190, "post_id": 59476681, "comment_id": 105130984, "body": "Yes, I&#39;ve edited my question and corrected it"}, {"owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "edited": false, "score": 0, "creation_date": 1577264218, "post_id": 59476681, "comment_id": 105130989, "body": "but still they persist..."}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "edited": false, "score": 0, "creation_date": 1577264625, "post_id": 59476681, "comment_id": 105131075, "body": "@EugeneSunic I have corrected it now, please check again"}, {"owner": {"reputation": 576, "user_id": 8771359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJXs1.jpg?s=128&g=1", "display_name": "kushal shah", "link": "https://stackoverflow.com/users/8771359/kushal-shah"}, "edited": false, "score": 0, "creation_date": 1577264659, "post_id": 59476681, "comment_id": 105131083, "body": "please replace employees to employee"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "reply_to_user": {"reputation": 576, "user_id": 8771359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJXs1.jpg?s=128&g=1", "display_name": "kushal shah", "link": "https://stackoverflow.com/users/8771359/kushal-shah"}, "edited": false, "score": 0, "creation_date": 1577264865, "post_id": 59476681, "comment_id": 105131131, "body": "@kushalshah I put the json data wrong but now I have corrected it totally, the 5 elements that I&#39;m trying to parse are working fine except the last one which is JSON.parse(element[&#39;employeeJobStatuses&#39;][&#39;status&#39;])"}], "answers": [{"comments": [{"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "edited": false, "score": 0, "creation_date": 1577266136, "post_id": 59476833, "comment_id": 105131392, "body": "I&#39;ve tried this approach but came up with same exact error"}, {"owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "reply_to_user": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "edited": false, "score": 0, "creation_date": 1577266324, "post_id": 59476833, "comment_id": 105131422, "body": "Could you somehow start from this example, because you cannot get the error out of it. I&#39;m not even sure why do you need to parse twice ` JSON.parse(element[&#39;employeeJobStatuses&#39;][&#39;status&#39;])` if you already have a valid js object (data)"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "edited": false, "score": 0, "creation_date": 1577266774, "post_id": 59476833, "comment_id": 105131514, "body": "Okay since that I don&#39;t need to pass it twice, why is it coming up with this error though"}, {"owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "reply_to_user": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "edited": false, "score": 0, "creation_date": 1577267012, "post_id": 59476833, "comment_id": 105131573, "body": "I believe because of the first thing which we said <code>element[&#39;employeeJobStatuses&#39;][&#39;status&#39;]</code>, you need to do it like I did, map through your  element[&#39;employeeJobStatuses&#39;] because it is an array you cannot just pull t status out of it"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "edited": false, "score": 0, "creation_date": 1577267960, "post_id": 59476833, "comment_id": 105131745, "body": "I have updated my code, all is working fine and getting the data except for employeeJobStatuses"}, {"owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "edited": false, "score": 1, "creation_date": 1577268565, "post_id": 59476833, "comment_id": 105131898, "body": "It is working great now when I put it in an array element.employeeJobStatuses.map((x, j) =&gt; []  Thank you so much for your help, I would have never done it without you"}], "tags": [], "owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "is_accepted": true, "score": 1, "last_activity_date": 1577286720, "last_edit_date": 1577286720, "creation_date": 1577265030, "answer_id": 59476833, "question_id": 59476681, "link": "https://stackoverflow.com/questions/59476681/parse-json-array-inside-array-and-bind-with-pdfmake/59476833#59476833", "title": "Parse JSON array inside array and bind with pdfmake", "body": "<p>Parse your input to a valid JS object, afterwards do with it whatever needs to be done.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// your input\r\nconst jsonString = JSON.stringify({\r\n  \"data\": {\r\n    \"employee\": [{\r\n      \"id\": \"f790cb86-4d41-401c-2a45-08d745b83164\",\r\n      \"firstName_FL\": \"Employee Name\",\r\n      \"employeeJobStatuses\": [{\r\n        \"id\": \"bd58a1a3-6dd7-4cd5-6c79-08d76cf25ba3\",\r\n        \"status\": \"STATUS_ACTIVE\"\r\n      }]\r\n    }]\r\n  }\r\n})\r\n// parse your input to js valid object\r\nconst jsonObj = JSON.parse(jsonString);\r\n\r\n// do wathever you need to do\r\nconst newObj = jsonObj.data.employee.map((element, i) =&gt; ({\r\n  ...element,\r\n  employeeJobStatuses: element.employeeJobStatuses.map((x, j) =&gt; ({ ...x,\r\n    status: x.status\r\n  }))\r\n}))\r\n\r\nconsole.log(newObj);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 214, "user_id": 12246377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff62d8e0357db90636488ed8efdb7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/12246377/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 1, "accepted_answer_id": 59476833, "answer_count": 1, "score": 3, "last_activity_date": 1577286720, "creation_date": 1577263635, "last_edit_date": 1577267924, "question_id": 59476681, "link": "https://stackoverflow.com/questions/59476681/parse-json-array-inside-array-and-bind-with-pdfmake", "title": "Parse JSON array inside array and bind with pdfmake", "body": "<p>I'm new to Angular, I'm trying to parse an array inside my array, I am not able to parse this array as using my code it comes up with an error Unexpected token u in JSON at position 0, I've searched all over the internet and there are many examples but non is working in my case, I don't understand what is wrong with my code, you assistance is much appreciated.</p>\n\n<p>data</p>\n\n<pre><code>{ \n\"employees\":[ \n  { \n     \"id\":\"f790cb86-4d41-401c-2a45-08d745b83164\",\n     \"firstName_FL\":\"Employee Name\",\n     \"employeeJobStatuses\":[ \n        { \n           \"id\":\"bd58a1a3-6dd7-4cd5-6c79-08d76cf25ba3\",\n           \"status\":\"STATUS_ACTIVE\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n\n<p>employees.component.ts</p>\n\n<pre><code>   table: {\n        headerRows: 1,\n        widths: [ '*', '*', '*', '*', '*', '*' ],\n        alignment: 'center',\n        body: [[\n        {text: 'Name', style: 'header'}, \n        {text: 'Position', style: 'header'},\n        {text: 'Department', style: 'header'},\n        {text: 'Hiring Date', style: 'header'}, \n        {text: 'First Contracting Salary', style: 'header'},\n        {text: 'Status', style: 'header'},\n      ]]\n            .concat(this.jsonObj.map((element, i) =&gt; \n            [\n             element['firstName_FL'],\n             element['position']['name_FL'],\n             element['department']['name_FL'],\n             element['hiringDate'].slice(0, 10),\n             element['firstContractingSalary'],\n             element.employeeJobStatuses.map((x, j) =&gt; ({ ...x,\n              Status: x\n            }))\n            ]\n            ))\n\n      }\n</code></pre>\n\n<p>All is coming up with the result I need except this line JSON.parse(element['employeeJobStatuses']['status'])</p>\n"}, {"tags": ["html", "angular", "typescript", "button"], "comments": [{"owner": {"reputation": 790, "user_id": 11299754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9e979b65d27fe4b5423cd5dee5ec436?s=128&d=identicon&r=PG&f=1", "display_name": "Indragith", "link": "https://stackoverflow.com/users/11299754/indragith"}, "edited": false, "score": 1, "creation_date": 1577263841, "post_id": 59476680, "comment_id": 105130913, "body": "Replace ng-click with (click). Like (click)=&quot;onClick(item)&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": true, "score": 2, "last_activity_date": 1577264194, "creation_date": 1577264194, "answer_id": 59476747, "question_id": 59476680, "link": "https://stackoverflow.com/questions/59476680/why-ng-click-with-arguments-not-firing/59476747#59476747", "title": "Why ng-click with arguments not firing?", "body": "<p>You're using AngularJS syntax inside Angular.</p>\n\n<p><code>ng-click</code> was replaced with <code>(click)</code>.</p>\n\n<p>You also don't need to interpolate the <code>item</code> as you've done while calling the <code>onClick</code> method with the argument.</p>\n\n<p>Give this a try:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md\"&gt;\n    &lt;ng-container&gt;\n      &lt;mat-sidenav-container class=\"sidebar-container\"&gt;\n        &lt;mat-sidenav&gt;Sidenav content&lt;/mat-sidenav&gt;\n        &lt;mat-sidenav-content class=\"radius\"&gt;\n          Applications\n          &lt;cdk-virtual-scroll-viewport \n            itemSize=\"50\" \n            style=\"height: 500px; width: 200px;\"&gt;\n            &lt;ng-container \n              *cdkVirtualFor=\"let item of appItems\"&gt;\n              &lt;button \n                mat-raised-button \n                color=\"accent\" \n                class=\"radius\" \n                (click)=\"onClick(item)\"&gt;\n                {{item}}\n              &lt;/button&gt;\n            &lt;/ng-container&gt;\n          &lt;/cdk-virtual-scroll-viewport&gt;\n        &lt;/mat-sidenav-content&gt;\n      &lt;/mat-sidenav-container&gt;\n    &lt;/ng-container&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 1912, "user_id": 1405423, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/359a2a40e04a55f478ea16d01d27e1a1?s=128&d=identicon&r=PG", "display_name": "Admiral Land", "link": "https://stackoverflow.com/users/1405423/admiral-land"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1577274598, "accepted_answer_id": 59476747, "answer_count": 1, "score": 1, "last_activity_date": 1577274634, "creation_date": 1577263622, "last_edit_date": 1577274634, "question_id": 59476680, "link": "https://stackoverflow.com/questions/59476680/why-ng-click-with-arguments-not-firing", "closed_reason": "Not suitable for this site", "title": "Why ng-click with arguments not firing?", "body": "<p>I try to set parameter at button ng-click and catch it on component.ts method.\nBut it not work.</p>\n\n<p><code>log-view.component.html</code>:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n&lt;div class=\"col-md\"&gt;\n    &lt;ng-container&gt;\n    &lt;mat-sidenav-container class=\"sidebar-container\"&gt;\n        &lt;mat-sidenav&gt;Sidenav content&lt;/mat-sidenav&gt;\n        &lt;mat-sidenav-content class=\".radius\"&gt;Applications\n                  &lt;cdk-virtual-scroll-viewport itemSize=\"50\" style=\"height: 500px; width: 200px;\"&gt;\n                  &lt;ng-container *cdkVirtualFor=\"let item of appItems\"&gt;\n                    &lt;button mat-raised-button color=\"accent\" class=\".radius\" ng-click=\"onClick({{item}})\"&gt;\n                      {{item}}&lt;/button&gt;\n                  &lt;/ng-container&gt;\n\n              &lt;/cdk-virtual-scroll-viewport&gt;\n        &lt;/mat-sidenav-content&gt;\n    &lt;/mat-sidenav-container&gt;\n  &lt;/ng-container&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And log-view.component.ts:</p>\n\n<pre><code>import { Component, ChangeDetectorRef } from '@angular/core';\nimport {ChangeDetectionStrategy, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-log-view',\n  templateUrl: './log-view.component.html',\n  styleUrls: ['./log-view.component.sass'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LogViewComponent implements OnInit {\n  items = Array.from({\n    length: 100000\n  }).map((_, i) =&gt; `Item #${i}`);\n  appItems: string[]; //Array.from({length: 10}).map((_, i) =&gt; `App #${i}`);\n\n  constructor(private http: HttpClient, private cdRef: ChangeDetectorRef) {}\n\n  ngOnInit() {\n    let data = this.http.get('server/app');\n    let allApps: AllApp;\n    data.subscribe((l: AllApp) =&gt; {\n      console.log('apps:' + l.count);\n      console.log('values:' + l.value);\n      allApps = l;\n      this.appItems = allApps.value;\n      this.cdRef.detectChanges();\n    });\n  }\n\n  showLastLog(item: string) {\n    console.log(item);\n  }\n\n  public onClick(item: string) //not firing!\n  {\n    console.log('alert!' + item);\n  }\n}\n\nclass AllApp {\n  count: number;\n  value: string[];\n}\n</code></pre>\n\n<p>How to make button click and set argument to method? Thank you!</p>\n"}, {"tags": ["javascript", "typescript", "puppeteer"], "comments": [{"owner": {"reputation": 6405, "user_id": 4862133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1d18aecd6078b3e1d84e529285f32b3e?s=128&d=identicon&r=PG&f=1", "display_name": "random", "link": "https://stackoverflow.com/users/4862133/random"}, "edited": false, "score": 0, "creation_date": 1577263209, "post_id": 59476444, "comment_id": 105130781, "body": "Did you tried consoling <code>selector</code> before <code>return selector;</code>? <code>e.text</code>? I believe it should be <code>e.textContent</code>."}, {"owner": {"reputation": 57, "user_id": 4397021, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/62a03a0bfac7ccceba315350941d0e03?s=128&d=identicon&r=PG", "display_name": "Josh Martin", "link": "https://stackoverflow.com/users/4397021/josh-martin"}, "reply_to_user": {"reputation": 6405, "user_id": 4862133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1d18aecd6078b3e1d84e529285f32b3e?s=128&d=identicon&r=PG&f=1", "display_name": "random", "link": "https://stackoverflow.com/users/4862133/random"}, "edited": false, "score": 0, "creation_date": 1577266331, "post_id": 59476444, "comment_id": 105131425, "body": "yeah it somehow becoming a object without the click method"}], "owner": {"reputation": 57, "user_id": 4397021, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/62a03a0bfac7ccceba315350941d0e03?s=128&d=identicon&r=PG", "display_name": "Josh Martin", "link": "https://stackoverflow.com/users/4397021/josh-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577261521, "creation_date": 1577261521, "question_id": 59476444, "link": "https://stackoverflow.com/questions/59476444/typescript-and-puppeteer-not-allowing-me-to-click-an-element-from-a-document-qu", "title": "Typescript and Puppeteer not allowing me to click an element from a `document.querySelectorAll`", "body": "<p>I am having a problem being able to call the <code>click</code> method on <code>selectedSelector</code>. I think this might be a types issue between what typescript's querySelectorAll return and what Puppeteer's querySelectorAll returns.</p>\n\n<p><code>await this.getSelectorFromArrayAndClick('.left-nav .open a', 'By Merchant');</code></p>\n\n<pre class=\"lang-js prettyprint-override\"><code> async getSelectorFromArrayAndClick(selectors: string, searchValue: string) {\n\n    const selectedSelector: HTMLAnchorElement = await this.page.evaluate((selectors, searchValue) =&gt;  {\n      const queryList = document.querySelectorAll&lt;HTMLAnchorElement&gt;(selectors) as any;\n      const listOfSelectors = Array.from(queryList) as any;\n      const selector = listOfSelectors.find(e =&gt; e.text === searchValue) as any;\n      return selector;\n\n    }, selectors, searchValue);\n\n    selectedSelector.click(); // does not exist\n  }\n\n</code></pre>\n\n<p>I am unsure how I can get at the right type so I could call the click method on the selectedSelector.</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable", "angular8"], "comments": [{"owner": {"reputation": 1880, "user_id": 6583134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7ER7.jpg?s=128&g=1", "display_name": "Lemmy", "link": "https://stackoverflow.com/users/6583134/lemmy"}, "edited": false, "score": 0, "creation_date": 1577261396, "post_id": 59476091, "comment_id": 105130403, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/52388927/cannot-find-module-rxjs-compat-observable\">Cannot find module &#39;rxjs-compat/Observable&#39;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": false, "score": 7, "last_activity_date": 1577258462, "creation_date": 1577258462, "answer_id": 59476115, "question_id": 59476091, "link": "https://stackoverflow.com/questions/59476091/import-of-observable-rxjs-observable-is-not-working/59476115#59476115", "title": "Import of Observable rxjs/Observable is not working", "body": "<p>You need to import as follows,</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Observable } from 'rxjs';\n</code></pre>\n\n<p>This is most possibly because, you might have upgraded you angular project or <code>rxjs</code> library.</p>\n"}, {"comments": [{"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577266735, "post_id": 59476182, "comment_id": 105131506, "body": "I think OP already has the module installed <code>src&#47;app&#47;home&#47;home.component.ts(2,10): error TS2305: Module &#39;&quot;..&#47;..&#47;..&#47;node_modules&#47;rxjs&#47;Observable&quot;&#39; has no exported member &#39;Observable&#39;</code>. Its saying that there is no member in <code>rxjs&#47;Observable</code>. For this to occur the dependency should already have been installed."}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577267015, "post_id": 59476182, "comment_id": 105131575, "body": "Also installing <code>rxjs-compat</code> is just a workaround for removing the error, you already have <code>Observable</code> in <code>rxjs</code>, so i dont think there is any need to install <code>rxjs-compat</code> dependency. Please share your views if this does not make any sense."}, {"owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577268433, "post_id": 59476182, "comment_id": 105131859, "body": "If OP already the has module why is it saying <code>Cannot find module &#39;rxjs-compat&#47;Observable&#39;.</code> ?"}, {"owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "reply_to_user": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577268831, "post_id": 59476182, "comment_id": 105131947, "body": "Also according to this link <a href=\"https://stackoverflow.com/questions/52388927/cannot-find-module-rxjs-compat-observable\">here</a> your suggestion is the workaround."}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577269541, "post_id": 59476182, "comment_id": 105132105, "body": "I think you misread, please read answer from Jandro. Also read the documentation  <a href=\"https://github.com/ReactiveX/rxjs/blob/master/docs_app/content/guide/v6/migration.md#dropping-the-compatibility-layer\" rel=\"nofollow noreferrer\">github.com/ReactiveX/rxjs/blob/master/docs_app/content/guide&zwnj;&#8203;/v6/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "is_accepted": true, "score": 6, "last_activity_date": 1577261213, "last_edit_date": 1577261213, "creation_date": 1577259061, "answer_id": 59476182, "question_id": 59476091, "link": "https://stackoverflow.com/questions/59476091/import-of-observable-rxjs-observable-is-not-working/59476182#59476182", "title": "Import of Observable rxjs/Observable is not working", "body": "<p>According to the error it says clearly that it  <code>Cannot find module 'rxjs-compat/Observable'</code> In order use <code>rxjs-compat/Observable</code> you need to install it inside the your project. In order to install </p>\n\n<p><strong>Try running below command:-</strong></p>\n\n<p><code>npm install --save rxjs-compat</code></p>\n"}, {"tags": [], "owner": {"reputation": 244, "user_id": 5304723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X0GVU.jpg?s=128&g=1", "display_name": "Bence Uszkai", "link": "https://stackoverflow.com/users/5304723/bence-uszkai"}, "is_accepted": false, "score": 0, "last_activity_date": 1577266601, "last_edit_date": 1577266601, "creation_date": 1577259299, "answer_id": 59476208, "question_id": 59476091, "link": "https://stackoverflow.com/questions/59476091/import-of-observable-rxjs-observable-is-not-working/59476208#59476208", "title": "Import of Observable rxjs/Observable is not working", "body": "<p>You can try this:</p>\n\n<pre><code>npm i rxjs\n\nimport { Observable } from 'rxjs'\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6679053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69bb098f50440d4dffb83c2863c0d8bf?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav Bansal", "link": "https://stackoverflow.com/users/6679053/gourav-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2821, "favorite_count": 0, "closed_date": 1577269089, "accepted_answer_id": 59476182, "answer_count": 3, "score": 1, "last_activity_date": 1577266601, "creation_date": 1577258231, "last_edit_date": 1577261274, "question_id": 59476091, "link": "https://stackoverflow.com/questions/59476091/import-of-observable-rxjs-observable-is-not-working", "closed_reason": "Duplicate", "title": "Import of Observable rxjs/Observable is not working", "body": "<p>In my angular app I am not able to import Observables using below command - </p>\n\n<p><code>import { Observable } from 'rxjs/Observable';</code></p>\n\n<p><strong>Facing below error -</strong> </p>\n\n<pre><code>ERROR in node_modules/rxjs/Observable.d.ts(1,15): error TS2307: Cannot find module 'rxjs-compat/Observable'.\nnode_modules/rxjs/Rx.d.ts(1,15): error TS2307: Cannot find module 'rxjs-compat'.\nsrc/app/home/home.component.ts(2,10): error TS2305: Module '\"../../../node_modules/rxjs/Observable\"' has no exported member 'Observable'\n</code></pre>\n\n<p>Can anyone suggest some answer ?</p>\n"}, {"tags": ["typescript", "aws-cdk"], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 4882428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bY8t7.png?s=128&g=1", "display_name": "Min", "link": "https://stackoverflow.com/users/4882428/min"}, "edited": false, "score": 0, "creation_date": 1578009480, "post_id": 59569815, "comment_id": 105310675, "body": "It can be added to a role with no problem using method attachToRole. At least it implies it should work for the attachToUser."}], "tags": [], "owner": {"reputation": 121, "user_id": 12572837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f0dacf3809424a5c3a126b7a00c849?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin", "link": "https://stackoverflow.com/users/12572837/calvin"}, "is_accepted": false, "score": 1, "last_activity_date": 1577998126, "creation_date": 1577998126, "answer_id": 59569815, "question_id": 59476055, "link": "https://stackoverflow.com/questions/59476055/can-not-attach-policy-for-existing-user-with-cdk/59569815#59569815", "title": "Can not attach policy for existing user with CDK", "body": "<p>Looking at the aws-cdk source code <a href=\"https://github.com/aws/aws-cdk/blob/957f04790524cedf2cea2de08988e24783a2eca6/packages/%40aws-cdk/aws-iam/lib/user.ts\" rel=\"nofollow noreferrer\">here</a>, it looks like you can't add any policies to imported users, and there isn't any good documentation as to why.</p>\n\n<p>I don't have a workaround, but I'd recommend creating a feature request on the AWS Github page, the devs may be able to give you more insight as to why.</p>\n"}, {"comments": [{"owner": {"reputation": 185, "user_id": 4882428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bY8t7.png?s=128&g=1", "display_name": "Min", "link": "https://stackoverflow.com/users/4882428/min"}, "edited": false, "score": 1, "creation_date": 1587490595, "post_id": 61349537, "comment_id": 108530551, "body": "It is true managed policies is the recommended way, however, in case there is a need for inline policy there should be a way which I believe found. When I get a chance I will double check and if I have it in code I will post it."}], "tags": [], "owner": {"reputation": 41, "user_id": 12314241, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDQLUALy9pIVgIpJCArPor7dH3P4A-0E8-NrtkRgEc=k-s128", "display_name": "Yang Xiao", "link": "https://stackoverflow.com/users/12314241/yang-xiao"}, "is_accepted": false, "score": 0, "last_activity_date": 1587490270, "creation_date": 1587490270, "answer_id": 61349537, "question_id": 59476055, "link": "https://stackoverflow.com/questions/59476055/can-not-attach-policy-for-existing-user-with-cdk/61349537#61349537", "title": "Can not attach policy for existing user with CDK", "body": "<p>source code here: <a href=\"https://github.com/aws/aws-cdk/blob/d5918c330b6770b84efc5417ce1109a68c22119b/packages/%40aws-cdk/aws-iam/lib/user.ts#L161\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-cdk/blob/d5918c330b6770b84efc5417ce1109a68c22119b/packages/%40aws-cdk/aws-iam/lib/user.ts#L161</a></p>\n\n<p>I think the reason is because it's generally considered a bad practice to attach inline policies to a user.</p>\n"}], "owner": {"reputation": 185, "user_id": 4882428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bY8t7.png?s=128&g=1", "display_name": "Min", "link": "https://stackoverflow.com/users/4882428/min"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1587490270, "creation_date": 1577257821, "question_id": 59476055, "link": "https://stackoverflow.com/questions/59476055/can-not-attach-policy-for-existing-user-with-cdk", "title": "Can not attach policy for existing user with CDK", "body": "<p>I can not figure it out why I am getting error \"Cannot add inline policy to imported User\"</p>\n\n<p>Background: I have an existing user that I get from:</p>\n\n<p><code>const testUser = iam.User.fromUserName(this,'test','alarm_test')</code></p>\n\n<p>Then I create policy with statement and attach policy to the user:</p>\n\n<pre><code>\n    policy.addStatements( new iam.PolicyStatement({   \n        effect: iam.Effect.ALLOW,\n        resources: [\n          '*'\n        ],\n        actions: [\n          \"ec2:DescribeInstances\"\n        ]            \n      }));\n\n    policy.attachToUser(testUser);\n</code></pre>\n"}, {"tags": ["angular", "typescript", "firebase", "google-cloud-functions"], "comments": [{"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1577255683, "post_id": 59475811, "comment_id": 105129422, "body": "And where exactly are you stuck? What have you tried so far? Please also share your sample stackblitz to work with."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 1, "creation_date": 1577255929, "post_id": 59475811, "comment_id": 105129453, "body": "my mouse sort of spazzed out on me I have written the remainder of my question, also if I am not mistaken you were the one who helped me on my prior angular question"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1577256843, "post_id": 59475811, "comment_id": 105129586, "body": "@SiddAjmera i went ahead and linked the stackblitz into the question as well"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577257325, "post_id": 59475811, "comment_id": 105129677, "body": "The database will store your data. But it won&#39;t do computations. You need something other than a database to implement computation on the backend."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577257364, "post_id": 59475811, "comment_id": 105129683, "body": "right I will have to create a firebase function of some sort for that im guessing my main issue is getting the inputs into the database"}, {"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577257516, "post_id": 59475811, "comment_id": 105129708, "body": "send those  <code>firstNumber</code> and <code>secondNumber</code> to the firebase database."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577257776, "post_id": 59475811, "comment_id": 105129747, "body": "@GaurangDhorda this is mostly where I am having my trouble at the moment, I tried searching elsewhere on stackOverflow and the only other question I found like this also went unanswered"}, {"owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577257940, "post_id": 59475811, "comment_id": 105129781, "body": "exactly what you have to do? with those two input values? and to those results of two input values"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "edited": false, "score": 0, "creation_date": 1577258043, "post_id": 59475811, "comment_id": 105129799, "body": "@GaurangDhorda For the moment i guess im mostly concerned with getting those numbers to the database, then after this the plan is to have some firebase function which will add the two numbers together and then I will display this result back to the user."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577259112, "post_id": 59475811, "comment_id": 105130008, "body": "Again; what have you tried? Here&#39;s the documentation about how to insert a document in a collection: <a href=\"https://github.com/angular/angularfire/blob/master/docs/firestore/collections.md#adding-documents-to-a-collection\" rel=\"nofollow noreferrer\">github.com/angular/angularfire/blob/master/docs/firestore/&hellip;</a>. But really, you need to read all of it. <a href=\"https://github.com/angular/angularfire\" rel=\"nofollow noreferrer\">github.com/angular/angularfire</a>"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577312934, "post_id": 59475811, "comment_id": 105140933, "body": "@JBNizet I have edited the question to show the most recent attempt at what I have done but I am not seeing any evidence that anything was written to a database so I scrapped it but it is now edited in above"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 0, "creation_date": 1577314093, "post_id": 59475811, "comment_id": 105141113, "body": "@Banani720 If you want make some calculations out of angular application use Firebase Functions and onCall functions."}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 0, "creation_date": 1577314263, "post_id": 59475811, "comment_id": 105141141, "body": "@Banani720 If you using angular 6+ use @angular/fire library it&#39;s newest version of angularfire2 library."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577397633, "post_id": 59475811, "comment_id": 105161732, "body": "@JBNizet I read the docs that you have provided but still find myself a little stuck on the final steps of the process, I have edited the question almost entirely hopefully this makes it a little more valid."}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 0, "creation_date": 1577403181, "post_id": 59475811, "comment_id": 105162918, "body": "@Banani720 Did you work with Observables ? Or Promises ?"}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 0, "creation_date": 1577403236, "post_id": 59475811, "comment_id": 105162928, "body": "@Mises observables"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 0, "creation_date": 1577403432, "post_id": 59475811, "comment_id": 105162960, "body": "@Banani720 Yeah Observable&lt;any&gt; you know what it does ?"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577403653, "post_id": 59475811, "comment_id": 105163006, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204910/discussion-between-mises-and-banani720\">continue this discussion in chat</a>."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "reply_to_user": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 0, "creation_date": 1577403658, "post_id": 59475811, "comment_id": 105163008, "body": "@Mises, in general, if I understand correctly observables are objects which are observed by subscribers and then the subscribers act on the observables"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577399603, "post_id": 59476469, "comment_id": 105162213, "body": "so this helped a little bit I edited the question a bit maybe the way I&#39;ve laid it out will be more helpful in finding a solution?"}], "tags": [], "owner": {"reputation": 2346, "user_id": 993328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3012905df3539f948994f218db07423?s=128&d=identicon&r=PG", "display_name": "GaurangDhorda", "link": "https://stackoverflow.com/users/993328/gaurangdhorda"}, "is_accepted": false, "score": 0, "last_activity_date": 1577261812, "creation_date": 1577261812, "answer_id": 59476469, "question_id": 59475811, "link": "https://stackoverflow.com/questions/59475811/submit-user-inputted-numbers-to-be-run-through-a-firebase-function-which-adds-th/59476469#59476469", "title": "Submit User Inputted Numbers to be Run through a firebase function which adds the numbers and displays the result to the user", "body": "<pre><code>saveInput (value1,value2){\n     return this.db.collection('numbers').add({\n         firstValue: value1,\n         secondNumber: value2,\n      });\n }  // called form calculator.component.ts\n</code></pre>\n\n<p>This will save records of numbers to collection of numbers in firebase. You have to call this method from <code>calculate.component</code> from angular. </p>\n\n<p>This is you <code>template driven form</code> in angular...</p>\n\n<pre><code>&lt;h1 align=\"center\"&gt;Calculator App in Angular TypeScript&lt;/h1&gt;\n&lt;body&gt;\n      &lt;form id= \"numbers_form\" #myform = \"ngForm\" (ngSubmit) = \"onSubmit(myform)\" &gt;\n           &lt;div id=\"first_number\"&gt; &lt;!--First Number Field and Label--&gt;\n             &lt;p&gt;Number 1:\n                &lt;input ngModel  name = \"value1\" type=\"text\"&gt;\n             &lt;/p&gt;\n           &lt;/div&gt;\n\n           &lt;p align='center'&gt;  +  &lt;/p&gt;\n\n           &lt;div id=\"second_number\"&gt; &lt;!--Second Number Field and Label--&gt;\n                &lt;p&gt; Number 2:&gt;\n                     &lt;input ngModel name = \"value2\" type=\"text\"&gt;\n                &lt;/p&gt;\n           &lt;/div&gt;  \n           &lt;input type = \"submit\" value = \"Calculate\"&gt;\n     &lt;/form&gt;\n        &lt;div id=\"solution\"&gt; \n            &lt;h3&gt; Solution: &lt;/h3&gt;\n        &lt;calculator \n            [firstNumber]=\"value1\"\n            [secondNumber]=\"value2\"&gt;\n        &lt;/calculator&gt;\n</code></pre>\n\n<p>app.ts is...</p>\n\n<pre><code>value1;\nvalue2;\n  onSubmit(form: NgForm) {\n    this.value1 = Number(form.value['value1']);\n    this.value2 = Number(form.value['value2']);\n  }\n</code></pre>\n\n<p>in your calulator.component.ts..</p>\n\n<pre><code>firstNum;\nsecondNum;\n@Input('firstNumber') set first(number1 : Number) {\n  this.firstNum = number1;\n}\n@Input('secondNumber') set second  (number2: number){\n  this.secondNum = number2;\n}\n\n constructor() {}\n\n ngOnInit() {}\n ngOnChanges() {\n    this.saveInput(this.firstNum,this.secondNum);\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577399568, "post_id": 59482456, "comment_id": 105162202, "body": "this answer has me close and led me most of the way there I am still a little confused on implementing this in the html and getting the result back in angular, i have edited my question accordingly"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577400170, "post_id": 59482456, "comment_id": 105162346, "body": "To return data to angular application just return in onCall function any object you want."}, {"owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577400471, "post_id": 59482456, "comment_id": 105162407, "body": "I think I did this in my firebase function I am mostly stuck on getting the return to display within the webapp itself"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577400512, "post_id": 59482456, "comment_id": 105162417, "body": "@Banani720 I edited an answear so i wrote a really simple onCall function."}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577401306, "post_id": 59482456, "comment_id": 105162598, "body": "@Banani720 You need to learn more about Firebase functions it&#39;s not an big deal by the way. XD"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "reply_to_user": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "edited": false, "score": 0, "creation_date": 1577401799, "post_id": 59482456, "comment_id": 105162702, "body": "@Banani720 I dont know if you know what is Angular SSR or Universal. You can do it using Firebase Functions. So you can link your application in a facebook and get a nice looking cards with an picture insted of just link to page."}], "tags": [], "owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "is_accepted": true, "score": 1, "last_activity_date": 1577401573, "last_edit_date": 1577401573, "creation_date": 1577315504, "answer_id": 59482456, "question_id": 59475811, "link": "https://stackoverflow.com/questions/59475811/submit-user-inputted-numbers-to-be-run-through-a-firebase-function-which-adds-th/59482456#59482456", "title": "Submit User Inputted Numbers to be Run through a firebase function which adds the numbers and displays the result to the user", "body": "<p>This is not an exactly correct answer but at least a good path to make an calculations out of Angular application. Im using Angular 7+ in this example. In Angular 4+ or 6+ do not use <code>angularfire2</code> library it's an old version of <code>@angular/fire</code> library.</p>\n\n<p>Firebase have a nice tool named Firebase Functions you can use them to make calculations out of your application. More about them: <a href=\"https://firebase.google.com/docs/functions/\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/functions/</a>.</p>\n\n<p><strong>index.ts example of Firebase functions</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as functions from 'firebase-functions';\nimport * as admin from 'firebase-admin';\n\n// This is example of how to make an simple callable function.\nexport const getUsers = functions.https.onCall((data, context) =&gt; {\n    return caseAdmin(data, context, getUsersList)\n})\n// this function will return users list if a user who call a function is an admin.\nasync function getUsersList() {\n    try {\n        const usersList = await admin.auth().listUsers()\n        return usersList.users\n    } catch (err) {\n        console.log(err)\n        return { code: 'admin/get-users-list', message: \"Some thing goes wrong.\" }\n    }\n}\n// This function check are user have an isAdmin field in his token. To assign that kind of field to user token read about custom claims.\nexport function caseAdmin(data: any, context: functions.https.CallableContext, callback: any){\n    switch (isAuth(context)) {\n        case 'isAdmin':\n            return callback(data)\n        case 'isEditor':\n            return { code: 'admin/set-admin-error', message: 'Access denied! Only admin can add admin.' }\n        case 'user':\n            return { code: 'admin/set-admin-error', message: 'Access denied!' }\n        case 'unknown':\n            return { code: 'admin/set-admin-error', message: \"Access denied!\" }\n        default:\n            return { code: 'admin/set-admin-error', message: 'Unknown problem.' }\n    }\n}\n// this function check are user is authenticated and what role he have.\nexport function isAuth(context: functions.https.CallableContext) {\n    if (context &amp;&amp; context.auth &amp;&amp; context.auth.token.isAdmin) {\n        return 'isAdmin'\n    } else if (context &amp;&amp; context.auth &amp;&amp; context.auth.token.isEditor) {\n        return 'isEditor'\n    } else if (context &amp;&amp; context.auth) {\n        return 'user'\n    } else {\n        return 'unknown'\n    }\n}\n</code></pre>\n\n<p>Service in Angular application:</p>\n\n<p><strong>admin.service.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class AdminService {\n\n  constructor(private fc: AngularFireFunctions) {\n     // bellow line only for local texting so you can run functions localy\n    // this.fc.functions.useFunctionsEmulator('http://localhost:5000') \n  }\n\n  // Asignning what function you want to use.\n  getUsersList() {\n    const usersList = this.fc.httpsCallable('getUsers')\n// empty object but function no need any. Context is sended automatically you can decide are user need to be authenticated or not are he have to be an admin or not. Best way to assign users role is by functions using custom claims.\n    return usersList({})\n  }\n}\n</code></pre>\n\n<p><strong>Example of working really simple onCall function</strong></p>\n\n<p><strong>onCall function index.ts:</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as functions from 'firebase-functions';\n\nexport const getUsers = functions.https.onCall((data, context) =&gt; {\n    return { message: \"Hello message from onCall function\"}\n})\n</code></pre>\n\n<p><strong>component.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>users$: Observable&lt;any&gt;\n\nconstructor(private fc: AngularFireFunctions) {\n    // this.fc.functions.useFunctionsEmulator('http://localhost:5000')\n  }\n\n  onButtonClickGetUsers() {\n    const usersList = this.fc.httpsCallable('getUsers')\n    this.users$ = usersList({}) // here observable are making https requests to onCall functions so you get response Observable&lt;{ message: \"...\"}&gt;\n  }\n</code></pre>\n\n<p><strong>compoonent.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div *ngIf=\"users$ | async as user\"&gt; {{ user.message }} &lt;/div&gt;\n&lt;button (click)=\"onButtonClickGetUsers()\"&gt;Get Users&lt;/button&gt;\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 12191192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfW3z.jpg?s=128&g=1", "display_name": "Banani720", "link": "https://stackoverflow.com/users/12191192/banani720"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 59482456, "answer_count": 2, "score": 1, "last_activity_date": 1577403452, "creation_date": 1577255570, "last_edit_date": 1577403452, "question_id": 59475811, "link": "https://stackoverflow.com/questions/59475811/submit-user-inputted-numbers-to-be-run-through-a-firebase-function-which-adds-th", "title": "Submit User Inputted Numbers to be Run through a firebase function which adds the numbers and displays the result to the user", "body": "<p>Editing this whole post because I have done a lot of reading the last few days and modified quite a few things to reflect what I have learned, and have edited the title accordingly to make this a more coherent question</p>\n\n<p>I have made a Firebase function and successfully deployed it, here it is below.</p>\n\n<p><strong>Index.js</strong></p>\n\n<pre><code>const functions = require('firebase-functions');\n\n// // Create and Deploy Your First Cloud Functions\n// // https://firebase.google.com/docs/functions/write-firebase-functions\n\nexports.addNumbers = functions.https.onCall((data) =&gt; {\n      const firstNumber = data.firstNumber;\n      const secondNumber = data.secondNumber;\n\n      if (!Number.isFinite(firstNumber) || !Number.isFinite(secondNumber)) {\n        // Throwing an HttpsError so that the client gets the error details.\n        throw new functions.https.HttpsError('invalid-argument', 'The function must be called with ' +\n            'two arguments \"firstNumber\" and \"secondNumber\" which must both be numbers.');\n      }\n\n      return {\n        firstNumber: firstNumber,\n        secondNumber: secondNumber,\n        operator: '+',\n        operationResult: firstNumber + secondNumber,\n      };\n\n    });\n</code></pre>\n\n<p>This was taken almost completely from an example script from the docs but I was able to get a general understanding of how to set up the firebase functions from it. I deployed this function and it successfully showed up in my firebase console.</p>\n\n<p>Where I am at right now is I have the following HTML as a set up for the calculator itself:</p>\n\n<p><strong>app.component.html</strong></p>\n\n<pre><code>&lt;h1 align=\"center\"&gt;Calculator App with Firebase&lt;/h1&gt;\n&lt;div *ngIf=\"result | async as resu\"&gt;{{resu.operationResult}}&lt;/div&gt;\n&lt;div&gt;\n  &lt;form id=\"numbersForm\"&gt;\n    &lt;label for=\"firstNumber\"&gt;Number 1:\n      &lt;input [(ngModel)]=\"firstNumber\" type=\"text\"/&gt;\n    &lt;/label&gt;\n      &lt;br&gt;&lt;br&gt;\n    &lt;label for=\"secondNumber\"&gt;Number 2:\n      &lt;input [(ngModel)]=\"secondNumber\" type=\"text\"/&gt;\n    &lt;/label&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n&lt;br&gt;\n&lt;button type=\"submit\" (click)=\"onClick()\"&gt;Calculate&lt;/button&gt; &lt;!--this is where things need to tie in together--&gt;\n</code></pre>\n\n<p>in the <code>calculator.component.ts</code> I have imported the <code>AngularFire</code> library and have done the following:</p>\n\n<p><strong>calculator.component.ts</strong></p>\n\n<pre><code>import { Component, Input } from '@angular/core';\nimport { AngularFireFunctions } from '@angular/fire/functions';\n\n\n@Component({\n  selector: 'calculator',\n  template: ` `,\n  styles: [`h1 { font-family: Lato; }`]\n})\nexport class CalculatorComponent  {\n  firstNumber: Number\n  secondNumber: Number\n\nresult: Observable&lt;any&gt;\n\nconstructor(private fns: AngularFireFunctions) { \n\n    //Next Step Here That I Am Missing?\n// do not setup any thing in a constructor!\n  }\n\nonClick() {\nconst callable = fns.httpsCallable('addNumber'); // this is some thing like init reference\nthis.result = callable({ firstNumber: this.firstNumber, secondNumber: this.secondNumber}) // Here you sending request and response land in this.result\n}\n\n}\n</code></pre>\n\n<p>And finally, I have created a folder in my project called <code>environments</code> with the file <code>environments/environment.ts</code> containing all of the relevant keys provided by google for me to use. </p>\n"}, {"tags": ["typescript", "react-native", "expo", "package.json", "ts-node"], "owner": {"reputation": 198, "user_id": 10007919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b4c649aa66c645737f9c2bb66bfb0?s=128&d=identicon&r=PG&f=1", "display_name": "Lpaydat", "link": "https://stackoverflow.com/users/10007919/lpaydat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577442561, "creation_date": 1577254634, "last_edit_date": 1577442561, "question_id": 59475728, "link": "https://stackoverflow.com/questions/59475728/cannot-use-ts-node-to-run-script-on-expo-react-native", "title": "Cannot use `ts-node` to run script on expo (react-native)", "body": "<p>noob here.</p>\n\n<p>I have some ReactJs project which is run perfectly on every aspect.\nBut recently I want to make it monorepo and I chose Expo for this job.</p>\n\n<p>I can make most of code works except some custom scripts.\nIt say <code>SyntaxError: Cannot use import statement outside a module</code> and the line of code that lead to this error was <code>node_modules/expo/AppEntry.js</code> which is in the <code>main</code> parameter in <code>package.json</code>.</p>\n\n<p>This is the full log:</p>\n\n<pre><code>$ ts-node -r tsconfig-paths/register --project scripts/helpers/tsconfig.json scripts/customScript.ts\n/home/username/Workspace/project/node_modules/expo/AppEntry.js:1\nimport 'expo/build/Expo.fx';\n^^^^^^\n\nSyntaxError: Cannot use import statement outside a module\n    at wrapSafe (internal/modules/cjs/loader.js:1050:16)\n    at Module._compile (internal/modules/cjs/loader.js:1098:27)\n    at Module._extensions..js (internal/modules/cjs/loader.js:1167:10)\n    at Object.require.extensions.&lt;computed&gt; [as .js] (/home/username/Workspace/project/node_modules/ts-node/src/index.ts:529:44)\n    at Module.load (internal/modules/cjs/loader.js:983:32)\n    at Function.Module._load (internal/modules/cjs/loader.js:891:14)\n    at Module.require (internal/modules/cjs/loader.js:1023:19)\n    at require (internal/modules/cjs/helpers.js:72:18)\n    at Object.&lt;anonymous&gt; (/home/username/Workspace/project/scripts/helpers/customScript.ts:2:1)\n    at Module._compile (internal/modules/cjs/loader.js:1128:30)\nerror Command failed with exit code 1.\n</code></pre>\n\n<p>and this is the content of <code>scripts/helpers/tsconfig.json</code>:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"allowSyntheticDefaultImports\": true,\n    \"jsx\": \"preserve\",\n    \"lib\": [\"dom\", \"esnext\"],\n    \"moduleResolution\": \"node\",\n    \"noEmit\": true,\n    \"skipLibCheck\": true,\n    \"resolveJsonModule\": true,\n    \"target\": \"es5\",\n    \"allowJs\": true,\n    \"strict\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"esModuleInterop\": true,\n    \"module\": \"commonjs\",\n    \"isolatedModules\": true,\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    \"noImplicitThis\": false\n  },\n  \"exclude\": [\"node_modules\"],\n  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\"]\n}\n</code></pre>\n\n<p>This error not occur on every scripts, just some custom script commands.</p>\n\n<p>I tried to search for solution for hours and tried a bunch of methods with no results. T__T</p>\n\n<p>Note: all error disappear if I remove <code>main</code> field from <code>package.json</code>.</p>\n\n<hr>\n\n<p><strong>Edit:</strong> I have created an example to reproduce this error here, <a href=\"https://github.com/Lpaydat/ts-node-next-expo\" rel=\"nofollow noreferrer\">ts-node-next-expo</a></p>\n"}, {"tags": ["typescript", "webpack", "nestjs"], "comments": [{"owner": {"reputation": 4738, "user_id": 125032, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ac8f77ca0c9d7fb16d5315a8f238d4eb?s=128&d=identicon&r=PG", "display_name": "hazimdikenli", "link": "https://stackoverflow.com/users/125032/hazimdikenli"}, "edited": false, "score": 0, "creation_date": 1577259607, "post_id": 59475068, "comment_id": 105130092, "body": "I think it starts tsc in watch mode, and you can configure what is going to be ignored in tsc configuration, I think in that case those files are not going to be transpiled to js. So looks like; no there is no way."}, {"owner": {"reputation": 1341, "user_id": 6383583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ed176e1913319cacc8250261995ae2?s=128&d=identicon&r=PG&f=1", "display_name": "A. Maitre", "link": "https://stackoverflow.com/users/6383583/a-maitre"}, "edited": false, "score": 0, "creation_date": 1577444353, "post_id": 59475068, "comment_id": 105172036, "body": "Imo, I&#39;d take a look at what the nest cli does, how it is linked to wepback&#39;s config (hot reload feature from it notably I guess). Don&#39;t have time to investigate further as of now, will take a look later if you&#39;re still stuck"}, {"owner": {"reputation": 330, "user_id": 3945350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/743c9d1f9042dec9b87b1122b05dec0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nechar Joshi", "link": "https://stackoverflow.com/users/3945350/nechar-joshi"}, "reply_to_user": {"reputation": 1341, "user_id": 6383583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ed176e1913319cacc8250261995ae2?s=128&d=identicon&r=PG&f=1", "display_name": "A. Maitre", "link": "https://stackoverflow.com/users/6383583/a-maitre"}, "edited": false, "score": 0, "creation_date": 1577523448, "post_id": 59475068, "comment_id": 105191036, "body": "Hi @A.Maitre, have you had a chance to investigate on this issue yet? My name is Nechar. I am stuck in the same issue as Nik. The solution provided by WRAD did not work for me."}], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 352177, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/725a62fb824fa9644b607bfc22d22450?s=128&d=identicon&r=PG", "display_name": "NiK", "link": "https://stackoverflow.com/users/352177/nik"}, "edited": false, "score": 0, "creation_date": 1577299172, "post_id": 59480910, "comment_id": 105138674, "body": "I still would like TypeScript to transpile my .ts files to .js files. I just need to prevent the server from a re-start on few directories."}, {"owner": {"reputation": 330, "user_id": 3945350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/743c9d1f9042dec9b87b1122b05dec0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nechar Joshi", "link": "https://stackoverflow.com/users/3945350/nechar-joshi"}, "edited": false, "score": 4, "creation_date": 1577523603, "post_id": 59480910, "comment_id": 105191080, "body": "The solution that you provided would only help prevent the TS file from being compiled to JS. But it wouldn&#39;t stop the server from being restart."}], "tags": [], "owner": {"reputation": 23, "user_id": 9431185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1948164851877903/picture?type=large", "display_name": "WRAD", "link": "https://stackoverflow.com/users/9431185/wrad"}, "is_accepted": false, "score": -4, "last_activity_date": 1577298316, "creation_date": 1577298316, "answer_id": 59480910, "question_id": 59475068, "link": "https://stackoverflow.com/questions/59475068/prevent-restart-of-nestjs-server-when-making-changes-in-certain-directories/59480910#59480910", "title": "Prevent restart of NestJS Server when making changes in certain directories", "body": "<p>You should edit these files:</p>\n\n<ul>\n<li><code>tsconfig.json</code></li>\n<li><code>tsconfig.build.json</code></li>\n</ul>\n\n<p>Add the folder/s that you want to ignore in the \"exclude\" array:</p>\n\n<p><code>\"exclude\": [..., \"your-folder\"]</code></p>\n"}, {"comments": [{"owner": {"reputation": 1680, "user_id": 3977276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FOy3S.png?s=128&g=1", "display_name": "benbotto", "link": "https://stackoverflow.com/users/3977276/benbotto"}, "edited": false, "score": 1, "creation_date": 1587500212, "post_id": 59517108, "comment_id": 108535609, "body": "How about for newer versions of NestJS where nodemon is no longer used?"}, {"owner": {"reputation": 192, "user_id": 5435130, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fnt477E6hPg/AAAAAAAAAAI/AAAAAAAAADc/g6nTkXk08eY/photo.jpg?sz=128", "display_name": "mscottnelson", "link": "https://stackoverflow.com/users/5435130/mscottnelson"}, "reply_to_user": {"reputation": 1680, "user_id": 3977276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FOy3S.png?s=128&g=1", "display_name": "benbotto", "link": "https://stackoverflow.com/users/3977276/benbotto"}, "edited": false, "score": 0, "creation_date": 1589751758, "post_id": 59517108, "comment_id": 109411551, "body": "@avejidah even if nest does not use nodemon, you can still tsc --watch and use nodemon in development."}], "tags": [], "owner": {"reputation": 1805, "user_id": 352177, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/725a62fb824fa9644b607bfc22d22450?s=128&d=identicon&r=PG", "display_name": "NiK", "link": "https://stackoverflow.com/users/352177/nik"}, "is_accepted": true, "score": 5, "last_activity_date": 1577597866, "creation_date": 1577597866, "answer_id": 59517108, "question_id": 59475068, "link": "https://stackoverflow.com/questions/59475068/prevent-restart-of-nestjs-server-when-making-changes-in-certain-directories/59517108#59517108", "title": "Prevent restart of NestJS Server when making changes in certain directories", "body": "<p>I was able to find a workaround. That is updated nodemon.json file to include the directories that I want to ignore from restart. Then to start the app I am just running <strong>nodemon</strong> command.</p>\n\n<pre><code>{\n    \"watch\": [\"src\"],\n    \"ext\": \"ts\",  \n    \"ignore\": [\"public\"],\n    \"exec\": \"ts-node ./src/main\"\n  }\n</code></pre>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 1805, "user_id": 352177, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/725a62fb824fa9644b607bfc22d22450?s=128&d=identicon&r=PG", "display_name": "NiK", "link": "https://stackoverflow.com/users/352177/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2411, "favorite_count": 1, "accepted_answer_id": 59517108, "answer_count": 2, "score": 5, "last_activity_date": 1577597866, "creation_date": 1577245750, "last_edit_date": 1577565141, "question_id": 59475068, "link": "https://stackoverflow.com/questions/59475068/prevent-restart-of-nestjs-server-when-making-changes-in-certain-directories", "title": "Prevent restart of NestJS Server when making changes in certain directories", "body": "<p>I am using the default <code>nest start --watch</code> command to run the application in watch mode.</p>\n\n<p>The server restarts upon the change of any source file, which is as expected.</p>\n\n<p>However, I need to ignore some directories or files from restarting the server when a change occurs.</p>\n\n<p>Is there a way to achieve this in NestJS?</p>\n"}, {"tags": ["typescript", "vue.js", "webpack"], "answers": [{"comments": [{"owner": {"reputation": 4958, "user_id": 2442714, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/55b12c04062943aa0642157c28531d69?s=128&d=identicon&r=PG", "display_name": "ux.engineer", "link": "https://stackoverflow.com/users/2442714/ux-engineer"}, "edited": false, "score": 1, "creation_date": 1577362255, "post_id": 59476196, "comment_id": 105151078, "body": "You should also use <code>--save-exact</code> flag or otherwise <code>package.json</code> gets this line: <code>&quot;@types&#47;node&quot;: &quot;^12.12.22&quot;</code> instead of the exact version <code>&quot;12.12.22&quot;</code>"}, {"owner": {"reputation": 308, "user_id": 1625313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5214fd3e36556ce954058078cebe2a?s=128&d=identicon&r=PG", "display_name": "kyane", "link": "https://stackoverflow.com/users/1625313/kyane"}, "reply_to_user": {"reputation": 4958, "user_id": 2442714, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/55b12c04062943aa0642157c28531d69?s=128&d=identicon&r=PG", "display_name": "ux.engineer", "link": "https://stackoverflow.com/users/2442714/ux-engineer"}, "edited": false, "score": 1, "creation_date": 1577433937, "post_id": 59476196, "comment_id": 105168566, "body": "follow this issue. <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/issues/41224\" rel=\"nofollow noreferrer\">github.com/DefinitelyTyped/DefinitelyTyped/issues/41224</a>"}], "tags": [], "owner": {"reputation": 308, "user_id": 1625313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5214fd3e36556ce954058078cebe2a?s=128&d=identicon&r=PG", "display_name": "kyane", "link": "https://stackoverflow.com/users/1625313/kyane"}, "is_accepted": false, "score": 22, "last_activity_date": 1577434801, "last_edit_date": 1577434801, "creation_date": 1577259197, "answer_id": 59476196, "question_id": 59474983, "link": "https://stackoverflow.com/questions/59474983/when-i-npm-runbuild-in-vue-js-get-the-error-interface-noderequire-cannot-simul/59476196#59476196", "title": "When I npm runbuild in vue.js get the error Interface &#39;NodeRequire&#39; cannot simultaneously extend types &#39;Require&#39;", "body": "<p>I had same problem.</p>\n\n<p>the version of @types/node was 13.1.0\nreleased at Mon, 23 Dec 2019 16:40:55 GMT</p>\n\n<p>in my case, it's working when I use former version 12.12.22</p>\n\n<p><code>npm install --save-dev @types/node@12.12.22</code></p>\n"}, {"tags": [], "owner": {"reputation": 2034, "user_id": 1704895, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/SvOnC.jpg?s=128&g=1", "display_name": "Cequiel", "link": "https://stackoverflow.com/users/1704895/cequiel"}, "is_accepted": false, "score": 1, "last_activity_date": 1579452848, "creation_date": 1579452848, "answer_id": 59812284, "question_id": 59474983, "link": "https://stackoverflow.com/questions/59474983/when-i-npm-runbuild-in-vue-js-get-the-error-interface-noderequire-cannot-simul/59812284#59812284", "title": "When I npm runbuild in vue.js get the error Interface &#39;NodeRequire&#39; cannot simultaneously extend types &#39;Require&#39;", "body": "<p>I think it's better to exclude the <code>@types</code> definitions from the compilation:\n<a href=\"https://stackoverflow.com/a/57113847/1704895\">https://stackoverflow.com/a/57113847/1704895</a></p>\n\n<p>It's amazing simple ( tsconfig.json ):</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    ...,\n    \"types\": []\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 7093861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36902e225c982da61a7023ce57d92259?s=128&d=identicon&r=PG&f=1", "display_name": "LiJing", "link": "https://stackoverflow.com/users/7093861/lijing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3159, "favorite_count": 2, "answer_count": 2, "score": 12, "last_activity_date": 1596533787, "creation_date": 1577244514, "question_id": 59474983, "link": "https://stackoverflow.com/questions/59474983/when-i-npm-runbuild-in-vue-js-get-the-error-interface-noderequire-cannot-simul", "title": "When I npm runbuild in vue.js get the error Interface &#39;NodeRequire&#39; cannot simultaneously extend types &#39;Require&#39;", "body": "<pre><code>ERROR in C:/phpStudy2018/PHPTutorial/WWW/Tms.Web/node_modules/@types/node/globals.d.ts(139,11):\n139:11 Interface 'NodeRequire' cannot simultaneously extend types 'Require' and 'RequireFunction'.\n  Named property 'cache' of types 'Require' and 'RequireFunction' are not identical.\n    137 |\n    138 | // For backwards compability\n  &gt; 139 | interface NodeRequire extends NodeJS.Require {}\n        |           ^\n    140 | interface RequireResolve extends NodeJS.RequireResolve {}\n    141 | interface NodeModule extends NodeJS.Module {}\n    142 |\n\n error  in C:/phpStudy2018/PHPTutorial/WWW/Tms.Web/node_modules/@types/node/globals.d.ts\n\nERROR in C:/phpStudy2018/PHPTutorial/WWW/Tms.Web/node_modules/@types/node/globals.d.ts(139,11):\n\n</code></pre>\n\n<p>My environment is vue.js + typescript. I don't know if I have any problems with my configuration or with the third-party package\nCan you give me some useful advice\nThank you</p>\n"}, {"tags": ["javascript", "typescript", "validation", "visual-studio-code"], "comments": [{"owner": {"reputation": 1388, "user_id": 5178406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2eOqY.jpg?s=128&g=1", "display_name": "Matthew Moran", "link": "https://stackoverflow.com/users/5178406/matthew-moran"}, "edited": false, "score": 1, "creation_date": 1577245236, "post_id": 59474967, "comment_id": 105128210, "body": "What line throws the error in ts?"}, {"owner": {"reputation": 23, "user_id": 10906217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OEBWv8RQ2qM/AAAAAAAAAAI/AAAAAAAAAC4/dQCmee-4jIQ/photo.jpg?sz=128", "display_name": "Giancarlo Sanz", "link": "https://stackoverflow.com/users/10906217/giancarlo-sanz"}, "reply_to_user": {"reputation": 1388, "user_id": 5178406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2eOqY.jpg?s=128&g=1", "display_name": "Matthew Moran", "link": "https://stackoverflow.com/users/5178406/matthew-moran"}, "edited": false, "score": 0, "creation_date": 1577301301, "post_id": 59474967, "comment_id": 105139074, "body": "this.notEmpty(email);"}], "answers": [{"comments": [{"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 1, "creation_date": 1577246067, "post_id": 59475085, "comment_id": 105128299, "body": "His goal was to skip checking undefined in <code>notEmpty</code> because he already called the <code>defined</code> method previously.  This fixes the compilation but doesn&#39;t solve <code>thinks it could still receive an undefined value</code>."}, {"owner": {"reputation": 75, "user_id": 3740767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561e4df151e9933118574e22001f574?s=128&d=identicon&r=PG&f=1", "display_name": "RamKris", "link": "https://stackoverflow.com/users/3740767/ramkris"}, "reply_to_user": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1577246932, "post_id": 59475085, "comment_id": 105128384, "body": "@ErikPhilips It is best to create one method that does both the checks; undefined and not empty checks. I don&#39;t think tools are smart enough (as yet) to detect that the methods are called in a sequence and  notEmpty can&#39;t receive an undefined value. What if at a different spot in the code, notEmpty() is used without a preceding call to defined()?"}], "tags": [], "owner": {"reputation": 75, "user_id": 3740767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561e4df151e9933118574e22001f574?s=128&d=identicon&r=PG&f=1", "display_name": "RamKris", "link": "https://stackoverflow.com/users/3740767/ramkris"}, "is_accepted": false, "score": 0, "last_activity_date": 1577245952, "creation_date": 1577245952, "answer_id": 59475085, "question_id": 59474967, "link": "https://stackoverflow.com/questions/59474967/can-typescript-infer-that-an-argument-has-been-validated/59475085#59475085", "title": "Can typescript infer that an argument has been validated?", "body": "<p>The reason why your code is not compiling is because notEmpty needs to accept a nullable string. That is because at the call site you are passing a nullable string as an argument.The following code fixes the problems with your code.</p>\n\n<pre><code>export default class Validate {\n    static validateEmail(email?: string) {\n        // TODO: Test this regex properly.\n        const emailRegex = new RegExp('^(([^&lt;&gt;()\\[\\]\\\\.,;:\\s@\"]+(\\.[^&lt;&gt;()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$')\n\n        this.defined(email);\n        this.notEmpty(email);\n\n        if (email &amp;&amp; !emailRegex.test(email)) {\n            throw new SyntaxError(\"The email entered is not valid\");\n        }\n    }\n\n    static defined(text?: string) {\n        if (!text) {\n            throw new SyntaxError(\"The text recieved was not defined.\");\n        }\n    }\n\n    static notEmpty(text?: string) {\n        if (text &amp;&amp; text.length &lt; 1) {\n            throw new SyntaxError(\"The text entered is empty.\");\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 1, "creation_date": 1577246311, "post_id": 59475108, "comment_id": 105128324, "body": "Beat me to the punch :)"}, {"owner": {"reputation": 26597, "user_id": 172363, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb96a4dcb7314d7c9993cbc824123be0?s=128&d=identicon&r=PG", "display_name": "Andrew Eisenberg", "link": "https://stackoverflow.com/users/172363/andrew-eisenberg"}, "reply_to_user": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1577246392, "post_id": 59475108, "comment_id": 105128331, "body": "Sometimes it&#39;s about typing fast. :)"}, {"owner": {"reputation": 23, "user_id": 10906217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OEBWv8RQ2qM/AAAAAAAAAAI/AAAAAAAAAC4/dQCmee-4jIQ/photo.jpg?sz=128", "display_name": "Giancarlo Sanz", "link": "https://stackoverflow.com/users/10906217/giancarlo-sanz"}, "edited": false, "score": 0, "creation_date": 1577301629, "post_id": 59475108, "comment_id": 105139127, "body": "The second answer seems to fit my needs in this specific instance. I appreciate the help!"}], "tags": [], "owner": {"reputation": 26597, "user_id": 172363, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb96a4dcb7314d7c9993cbc824123be0?s=128&d=identicon&r=PG", "display_name": "Andrew Eisenberg", "link": "https://stackoverflow.com/users/172363/andrew-eisenberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1577246371, "last_edit_date": 1577246371, "creation_date": 1577246267, "answer_id": 59475108, "question_id": 59474967, "link": "https://stackoverflow.com/questions/59474967/can-typescript-infer-that-an-argument-has-been-validated/59475108#59475108", "title": "Can typescript infer that an argument has been validated?", "body": "<p>You can use a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\" rel=\"nofollow noreferrer\">type guard</a>. The type guard asserts the type of a particular variable like this:</p>\n\n<pre><code>export default class Validate {\n  public static validateEmail(email?: string) {\n    const emailRegex = new RegExp(\n      '^(([^&lt;&gt;()[]\\\\.,;:s@\"]+(.[^&lt;&gt;()[]\\\\.,;:s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$'\n    );\n\n    if (!Validate.defined(email)) {\n      throw new SyntaxError('The text recieved was not defined.');\n    }\n\n    if (!emailRegex.test(email)) {\n      throw new SyntaxError('The email entered is not valid');\n    }\n  }\n\n  public static defined(text?: string): text is string {\n    return !!text;\n  }\n\n  public static notEmpty(text: string) {\n    if (text.length &lt; 1) {\n      throw new SyntaxError('The text entered is empty.');\n    }\n  }\n}\n</code></pre>\n\n<p>The downside is that you still need an if statement and the throw expression is outside of the function.</p>\n\n<p>Or you can do something like this, which avoids those problems, but requires you to reassign <code>email</code> to the result of the function.</p>\n\n<pre><code>export default class Validate {\n  public static validateEmail(email?: string) {\n    const emailRegex = new RegExp(\n      '^(([^&lt;&gt;()[]\\\\.,;:s@\"]+(.[^&lt;&gt;()[]\\\\.,;:s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$'\n    );\n\n    email = Validate.defined(email);\n\n    if (!emailRegex.test(email)) {\n      throw new SyntaxError('The email entered is not valid');\n    }\n  }\n\n  public static defined(text?: string): string {\n    if (!text) {\n      throw new SyntaxError('The text recieved was not defined.');\n    }\n    return text;\n  }\n\n  public static notEmpty(text: string) {\n    if (text.length &lt; 1) {\n      throw new SyntaxError('The text entered is empty.');\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 1, "last_activity_date": 1577246870, "creation_date": 1577246870, "answer_id": 59475154, "question_id": 59474967, "link": "https://stackoverflow.com/questions/59474967/can-typescript-infer-that-an-argument-has-been-validated/59475154#59475154", "title": "Can typescript infer that an argument has been validated?", "body": "<p>The compiler can sometimes recognize that a variable is of a type narrower than its annotated or inferred type at certain points in the code, by <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#control-flow-based-type-analysis\" rel=\"nofollow noreferrer\">analyzing the control flow</a>.  In the following code block, the compiler understands that <code>email</code> cannot be <code>undefined</code> if the flow of control reaches the <code>this.notEmpty()</code> call, and thus there is no error:</p>\n\n<pre><code>if (!email) {\n    throw new SyntaxError(\"The text received was not defined.\");\n}\n\nthis.notEmpty(email); // okay\n</code></pre>\n\n<hr>\n\n<p>As you've discovered, though, simply refactoring the code to make the check happen in a different function does not work.  The compiler generally does not follow control flow into functions and methods when performing control flow analysis.  This is a <a href=\"https://github.com/microsoft/TypeScript/issues/9998\" rel=\"nofollow noreferrer\">tradeoff (see Microsoft/TypeScript#9998 in GitHub for more info)</a>: it's not feasible for the compiler to simulate the program running on all possible inputs, by analyzing the possible control flow paths through all possible function calls, so it has to use a heuristic somewhere; in this case, the heuristic is generally \"assume function calls have no impact on variable types\".  Therefore the call to <code>this.defined(email)</code> has no impact on the type of <code>email</code> as seen by the compiler, and thus it complains about <code>this.notEmpty(email)</code>.</p>\n\n<hr>\n\n<p>Luckily, <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions\" rel=\"nofollow noreferrer\">TypeScript 3.7 introduced \"assertion functions\"</a>; you can give a function a special <em>return type</em> that tells the compiler that a variable passed to the function will be narrowed by the function, and it will use this as part of its control flow analysis.  While the compiler doesn't infer such function signatures itself, at least now you can manually annotate that <code>defined()</code> asserts something about its argument:</p>\n\n<pre><code>static defined(text?: string): asserts text {\n    if (!text) {\n        throw new SyntaxError(\"The text recieved was not defined.\");\n    }\n}\n</code></pre>\n\n<p>The return type of <code>defined()</code> is <code>asserts text</code>, which means that <code>text</code> will be verified as truthy if <code>defined()</code> returns.  And this fixes your original example:</p>\n\n<pre><code>this.defined(email);\nthis.notEmpty(email); // okay now!\n</code></pre>\n\n<p>Looks good.  Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBAE2AMwIYFcA28DGnUDOBcAaqpgJYKozBwDeAsAFBxtwEw0U5wBu5KjWABRALaoKmABTAJUgPwAuDjCgUAdgHMAlAxbtDcAPTG4AFQDyAEUsrzwTnBgALCsSjAtoOGCgQwYChMAE8AOjgDIzYcCA0nOUlMACUvHwBeOA1gAHc4VK0RcGkAcgA9aWkAbTKAHgA+aR0AHSrmgF1m5rCAGgBuJWaCAAEAInaAamlumoam1o6u3oGhscmdACodAB9pUbCJ0Z0dYcrWqoAGAFoATnb6AEYegGYAXxnru8eX97DL2-uTzeHwB3ze7R2lSqqCuAC8AIJXABazSun0m3R0E2hcMRSPuACYeq9jgASEo6FhU1jRZxuAhhJDITTABCyeSYHR9KLRVzuMIaCAwcRgGAhdlJLkmMwQADWqBCWQgOQAhNTaXAKMg4NIVYkpAVQGFaJwJVJjvoaRq2K5-HlsnkAMohDRcEAiKD+KB7cwuOj6zBwYCuoKszXEQXwASUBBHblWoyvHlwJPMZOcbi8Jkstm0EAwZSqdTaHQqQgEIIwYh5+BMBOGLU6lU1vR163sW3KrK5ODO12od2e6A+v3OUDwTw4CjAPhhnKEJXwbPZBBhOPJwypzfq9gZmA8RcisXSGsqTjF3SWjWNk-jsKYYNaVxwWpwB6tje0zv2nt9t0er0RzoGsgxDTwEHDIMxFFcJ13rdgtwQlhXiAA\" rel=\"nofollow noreferrer\">Playground link to code</a></p>\n"}], "owner": {"reputation": 23, "user_id": 10906217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OEBWv8RQ2qM/AAAAAAAAAAI/AAAAAAAAAC4/dQCmee-4jIQ/photo.jpg?sz=128", "display_name": "Giancarlo Sanz", "link": "https://stackoverflow.com/users/10906217/giancarlo-sanz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1577246870, "creation_date": 1577244291, "last_edit_date": 1592644375, "question_id": 59474967, "link": "https://stackoverflow.com/questions/59474967/can-typescript-infer-that-an-argument-has-been-validated", "title": "Can typescript infer that an argument has been validated?", "body": "<p>I'm still learning Typescript and Javascript so please excuse me if I am missing something.</p>\n<p>The problem is as follows:</p>\n<p>Currently VSCode does not infer that I throw an error if email is undefined when calling <strong>this.defined(email)</strong>. This is due to <em>validateEmail()</em> accepting a <em>string?</em> and will not compile because it thinks it could still receive an undefined value (is my deduction at least). Is there a way to tell the compiler this is ok? or am I missing something?</p>\n<p>I would like to call Validate.validateEmail() from other classes and the problem arises in those classes as well.</p>\n<h3>Validate.ts</h3>\n<pre><code>export default class Validate {\n    static validateEmail(email?: string) {\n        // TODO: Test this regex properly.\n        const emailRegex = new RegExp('^(([^&lt;&gt;()\\[\\]\\\\.,;:\\s@&quot;]+(\\.[^&lt;&gt;()\\[\\]\\\\.,;:\\s@&quot;]+)*)|(&quot;.+&quot;))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$')\n\n        this.defined(email);\n        this.notEmpty(email);\n\n        if (!emailRegex.test(email)) {\n            throw new SyntaxError(&quot;The email entered is not valid&quot;);\n        }\n    }\n\n    static defined(text?: string) {\n        if (!text) {\n            throw new SyntaxError(&quot;The text recieved was not defined.&quot;);\n        }\n    }\n\n    static notEmpty(text: string) {\n        if (text.length &lt; 1) {\n            throw new SyntaxError(&quot;The text entered is empty.&quot;);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "firebase", "ionic-framework"], "comments": [{"owner": {"reputation": 6367, "user_id": 9386929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9bac9557ecb2df1aa89cd5dc5442d0?s=128&d=identicon&r=PG", "display_name": "nircraft", "link": "https://stackoverflow.com/users/9386929/nircraft"}, "edited": false, "score": 0, "creation_date": 1577241378, "post_id": 59474577, "comment_id": 105127830, "body": "i would try cleaning node_modules and it&#39;s cache and reinstall it fresh.."}, {"owner": {"reputation": 61, "user_id": 9666987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Vacit A.", "link": "https://stackoverflow.com/users/9666987/vacit-a"}, "reply_to_user": {"reputation": 6367, "user_id": 9386929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9bac9557ecb2df1aa89cd5dc5442d0?s=128&d=identicon&r=PG", "display_name": "nircraft", "link": "https://stackoverflow.com/users/9386929/nircraft"}, "edited": false, "score": 0, "creation_date": 1577292192, "post_id": 59474577, "comment_id": 105137243, "body": "@nircraft I did that many times and even tried it on a new setup PC: <code>git clone</code>&#39;ed it  then did <code>npm install</code>. every thing works fine until I start implementing firebase feature.. this problem is really weird"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9666987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Vacit A.", "link": "https://stackoverflow.com/users/9666987/vacit-a"}, "edited": false, "score": 0, "creation_date": 1577293085, "post_id": 59475282, "comment_id": 105137428, "body": "But if you looked at this <a href=\"https://i.stack.imgur.com/Czi2e.png\" rel=\"nofollow noreferrer\">error screenshot</a> the error is pointing to the same line of that file in <code>node-modules</code> folder, which I didn&#39;t modify it. also, I did clean the <code>node-moduels</code> and it&#39;s <code>cache</code> multiple times with the same result."}], "tags": [], "owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "is_accepted": false, "score": 0, "last_activity_date": 1577248893, "creation_date": 1577248893, "answer_id": 59475282, "question_id": 59474577, "link": "https://stackoverflow.com/questions/59474577/typescript-error-expected-eventnamestring-only-refers-to-a-type-but-is-b/59475282#59475282", "title": "Typescript Error &#39;;&#39; expected. &#39;EventNameString&#39; only refers to a type, but is being used as a value here", "body": "<p>The main thing is you must have being you are using <code>=</code> instead of <code>:</code> with <code>EventNameString</code> when attempting to set the type to <code>EventNameString</code>. Thats why you are getting the error 'EventNameString' only refers to a type, but is being used as a value here.</p>\n\n<p>For other please those are mainly syntax errors as I see. As @nircraft suggested you should try cleaning <code>node_modules</code> and it's <code>cache</code> and reinstall it fresh.</p>\n"}], "owner": {"reputation": 61, "user_id": 9666987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Vacit A.", "link": "https://stackoverflow.com/users/9666987/vacit-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1578630533, "creation_date": 1577237895, "last_edit_date": 1577359085, "question_id": 59474577, "link": "https://stackoverflow.com/questions/59474577/typescript-error-expected-eventnamestring-only-refers-to-a-type-but-is-b", "title": "Typescript Error &#39;;&#39; expected. &#39;EventNameString&#39; only refers to a type, but is being used as a value here", "body": "<p>I'm trying to add firebase phone authentication to an old ionic project, followed several tutorials. I manged to implement it, but every time I do <code>ionic serve -l</code> this error appears: </p>\n\n<p><img src=\"https://i.stack.imgur.com/Czi2e.png\" alt=\"errors screenshot\"></p>\n\n<p>However I noticed that the errors disappear if I commented one of those lines in <code>app.modules.ts</code> after I do <code>ionic serve -l</code> :</p>\n\n<pre><code>import { AngularFireModule } from \"@angular/fire\";\nimport { AngularFireAuth } from \"@angular/fire/auth\";\n</code></pre>\n\n<p>since the errors is in the node-modules folder, I tried removing it multiple times and even tried it on other PC, followed some answers here and there but I couldn't solve it.</p>\n\n<p>Errors text:</p>\n\n<pre><code>Typescript Error\n';' expected.\ngtagName?: string;\n/** Sets custom name for `dataLayer` array used by gtag. */\ndataLayerName?: string;\n\nTypescript Error\n'EventNameString' only refers to a type, but is being used as a value here.\n/** Sets custom name for `dataLayer` array used by gtag. */\ndataLayerName?: string;\n\nTypescript Error\n'never' only refers to a type, but is being used as a value here.\n/** Sets custom name for `dataLayer` array used by gtag. */\ndataLayerName?: string;\n\nTypescript Error\nCannot find name 'T'.\n/** Sets custom name for `dataLayer` array used by gtag. */\ndataLayerName?: string;\n\n</code></pre>\n\n<p>ionic info :</p>\n\n<pre><code>Ionic Framework: ^3.9.8\nIonic App Scripts: 3.2.4\nAngular Core: ^5.2.7\nAngular Compiler CLI: ^5.2.7\nNode: 12.13.1\nOS Platform: Windows 10\nNavigator Platform: Win32\nUser Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36\n</code></pre>\n\n<p><code>app.modules.ts</code> imported dependencies:</p>\n\n<pre><code>import { ErrorHandler, Injectable, Injector, NgModule } from \"@angular/core\";\nimport { IonicApp, IonicErrorHandler, IonicModule } from \"ionic-angular\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { HttpModule } from \"@angular/http\";\nimport { HttpClient, HttpClientModule } from \"@angular/common/http\";\n\nimport { Geolocation } from \"@ionic-native/geolocation\";\nimport { NativeGeocoder } from \"@ionic-native/native-geocoder\";\n\nimport { MyApp } from \"./app.component\";\nimport { TabsPage } from \"../pages/tabs/tabs\";\nimport { Loading } from \"../pages/loading/loading\";\nimport { Welcome } from \"../pages/welcome/welcome\";\nimport { GeoPage } from \"../pages/geo/geo\";\n\nimport { IonicStorageModule } from \"@ionic/storage\";\nimport { StatusBar } from \"@ionic-native/status-bar\";\nimport { SplashScreen } from \"@ionic-native/splash-screen\";\n\nimport { APIService } from \"../services/api_service\";\nimport { CartService } from \"../services/cart_service\";\nimport { PushService } from \"../services/push_service\";\nimport { UtilService } from \"../services/util_service\";\nimport { OrderHistoryService } from \"../services/order_history_service\";\n\nimport { TranslateLoader, TranslateModule } from \"@ngx-translate/core\";\nimport { TranslateHttpLoader } from \"@ngx-translate/http-loader\";\nimport { RestaurantsPageModule } from \"../pages/catalog/restaurants/restaurants.module\";\nimport { GeoPageModule } from \"../pages/geo/geo.module\";\nimport { AngularFireModule } from \"@angular/fire\";\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport { firebaseConfig } from \"../config\";\nimport { LoginPage } from \"../pages/personal/login/login\";\nimport { AuthService } from \"../services/auth.service\";\nimport { NgxErrorsModule } from '@ultimate/ngxerrors';\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "redux"], "comments": [{"owner": {"reputation": 8957, "user_id": 1073868, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/397bb6e2c9cc191a20143ca8566385c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1073868/dan"}, "edited": false, "score": 0, "creation_date": 1577236101, "post_id": 59474471, "comment_id": 105127256, "body": "Use a class and store the class instances in Redux? Alternatively, you have a public API that utilises classes and (de)serialize to plain old objects when interacting with the redux store"}], "answers": [{"tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": false, "score": 0, "last_activity_date": 1577261836, "creation_date": 1577261836, "answer_id": 59476472, "question_id": 59474471, "link": "https://stackoverflow.com/questions/59474471/how-do-i-attach-readonly-methods-to-objects-from-redux/59476472#59476472", "title": "How do I attach readonly-methods to objects from redux?", "body": "<p>Member functions in JS objects treated the same as other properties. So you can define member function <code>getFullName()</code> on <code>User</code> interface and define it in <code>initalUserState</code>. <code>getFullName()</code> will stay after redux process action.</p>\n\n<pre><code>interface User {\n    firstName: string; lastName: string;\n    getFullName: () =&gt; string;\n}\n\nconst initalUserState: User = {\n    firstName: '',\n    lastName: '',\n    getFullName () {\n        return `${this.firstName} ${this.lastName}`;\n    },\n}\n\nconst reducer: Reducer&lt;User, Action&gt; = (state = initalUserState, action): User =&gt; {\n    // action processing logic\n    return state;\n}\n</code></pre>\n\n<p>Spread syntax <code>{ ...state, firstName: action.firstName }</code> will still work and will not overwrite <code>getFullName()</code> method.</p>\n\n<p>In component you can use <code>getFullName()</code>  like below</p>\n\n<pre><code>const Cmp1: FC&lt;User&gt; = (user) =&gt; &lt;div&gt;{user.getFullName()}&lt;/div&gt;\n\nexport default connect&lt;User, {}, {}, ApplicationState&gt;\n    (state =&gt; state.user, null)(Cmp1)\n</code></pre>\n"}], "owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577261836, "creation_date": 1577236026, "question_id": 59474471, "link": "https://stackoverflow.com/questions/59474471/how-do-i-attach-readonly-methods-to-objects-from-redux", "title": "How do I attach readonly-methods to objects from redux?", "body": "<p>Say I am storing a \"user\" object with a first name and last name field in redux ( <code>interface User { firstName : string, lastName : string}</code> if we are using typescript). Once I retrieve a user from redux, say I want to get the full name of the user, calculated as <code>${user.firstName} ${user.lastName}</code>. Right now, I have a function:</p>\n\n<pre><code>function getFullName(user: User) : string { \n  return `${user.firstName} ${user.lastName}`\n}\n</code></pre>\n\n<p>However, in my actual app I have a lot of such read-only functions like this, and would really rather have a method that I can call as <code>user.getFullName()</code> or even <code>user.fullName</code>. This way, I wouldn't have to remember to import every function, I wouldn't have to remember which things are properties and which are functions, etc.</p>\n\n<p>I suppose I can do this by instantiating classed objects whenever I get anything from redux, and remembering to do <code>{...user}</code> when saving to redux to convert to a plain-old-js-object. That would, however, add even more boilerplate to redux, especially with typescript. </p>\n\n<p>This seems like it should be a solved problem, is there an easy, streamlined solution?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 12180, "user_id": 10188661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3suZ.png?s=128&g=1", "display_name": "ZiiMakc", "link": "https://stackoverflow.com/users/10188661/ziimakc"}, "edited": false, "score": 0, "creation_date": 1577229174, "post_id": 59474029, "comment_id": 105126372, "body": "@sinanspd i don&#39;t think so as it&#39;s a generic type, and as i know types can&#39;t be generics by themselfs."}, {"owner": {"reputation": 1990, "user_id": 3628806, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LIWvd.jpg?s=128&g=1", "display_name": "sinanspd", "link": "https://stackoverflow.com/users/3628806/sinanspd"}, "edited": false, "score": 1, "creation_date": 1577229516, "post_id": 59474029, "comment_id": 105126429, "body": "deleted the comment after realizing that. My bad. It is not clean but it looks like you either need to do some type assertion -&gt; <a href=\"https://stackoverflow.com/questions/43496154/accessing-different-properties-in-a-typescript-union-type\" title=\"accessing different properties in a typescript union type\">stackoverflow.com/questions/43496154/&hellip;</a>  or go undefined (it is actually recommend you use msg?: never rather then undef but yeah... not any better"}], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577241059, "post_id": 59474355, "comment_id": 105127795, "body": "This answer is simple and makes the example code&#39;s error go away: \ud83d\udc4d!"}], "tags": [], "owner": {"reputation": 4030, "user_id": 2075944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CGDE9.png?s=128&g=1", "display_name": "phry", "link": "https://stackoverflow.com/users/2075944/phry"}, "is_accepted": true, "score": 4, "last_activity_date": 1577233745, "creation_date": 1577233745, "answer_id": 59474355, "question_id": 59474029, "link": "https://stackoverflow.com/questions/59474029/typescript-one-type-or-another-only/59474355#59474355", "title": "Typescript one type or another only", "body": "<p>Instead of </p>\n\n<pre><code>if (prop.mes) return\n</code></pre>\n\n<p>just try</p>\n\n<pre><code>if ('mes' in prop) return\n</code></pre>\n\n<p>one tries to <em>access</em> the property (which might not be there), the other <em>checks for it's existence</em></p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 2, "last_activity_date": 1577240943, "creation_date": 1577240943, "answer_id": 59474749, "question_id": 59474029, "link": "https://stackoverflow.com/questions/59474029/typescript-one-type-or-another-only/59474749#59474749", "title": "Typescript one type or another only", "body": "<p>The \"right\" type for TypeScript to use is </p>\n\n<pre><code>type MyRes = { data: Data, mes?: undefined} | { mes: ErrMessage, data?: undefined}\n</code></pre>\n\n<p>where the irrelevant properties in each member of the union are optional and have an <code>undefined</code> value, as opposed to a <code>false</code> value.  (Or you could use <code>never</code> instead of <code>undefined</code>, since optional properties always get <code>| undefined</code> added to them, and <code>never | undefined</code> is just <code>undefined</code>.)  That corresponds to what will actually happen if you check an irrelevant property: it will be missing.  <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/overview.html#non-unit-types-as-union-discriminants\" rel=\"nofollow noreferrer\">As of TypeScript 3.2</a>, the compiler treat the above type as a <a href=\"http://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" rel=\"nofollow noreferrer\">discriminated union</a> and your errors will go away:</p>\n\n<pre><code>const componentThatGetProp = (prop: MyRes) =&gt; {\n  // error handler\n  if (prop.mes) return // okay\n  // do something\n  prop.data // okay\n}\n</code></pre>\n\n<hr>\n\n<p>I agree that it would be a pain to manually turn a union type your existing <code>MyRes</code> into one where each union member contains all the keys from all the other union members.  Luckily you don't need to do this manually.  TypeScript's <a href=\"http://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types\" rel=\"nofollow noreferrer\">conditional types</a> let you programmatically manipulate a \"regular\" union into the discriminated form above.  Here's one way to do it, using a type alias called I'll call <code>ExclusifyUnion&lt;T&gt;</code> to indicate that it takes a union type <code>T</code> and turns it into a new union type where the compiler can tell that any value of that type must match one member of the union <em>exclusively</em>:</p>\n\n<pre><code>type AllKeys&lt;T&gt; = T extends any ? keyof T : never;\n\ntype ExclusifyUnion&lt;T, K extends AllKeys&lt;T&gt; = AllKeys&lt;T&gt;&gt; =\n  T extends any ?\n  (T &amp; { [P in Exclude&lt;K, keyof T&gt;]?: never }) extends infer U ?\n  { [Q in keyof U]: U[Q] } :\n  never : never;\n</code></pre>\n\n<p>I can explain that if you want, but the sketch is this: <code>AllKeys&lt;T&gt;</code> returns all keys from a union <code>T</code>, so <code>AllKeys&lt;{a: string} | {b: number}&gt;</code> is <code>\"a\" | \"b\"</code>.  And <code>ExclusifyUnion&lt;T&gt;</code> takes each member of the union and intersects it with a type containing all the rest of the keys as optional properties of type <code>never</code>.  So <code>ExclusifyUnion&lt;{a: string} | {b: number} | {c: boolean}&gt;</code> will end up looking like <code>{a: string, b?: never, c?: never} | {b: number, a?: never, c?: never} | {c: boolean, a?: never, b?: never}</code>.  Here's what it does to <code>MyRes</code>:</p>\n\n<pre><code>type MyRes = ExclusifyUnion&lt;{ data: Data } | { mes: ErrMessage }&gt;\n/*type MyRes = {\n    data: string;\n    mes?: undefined;\n} | {\n    mes: string;\n    data?: undefined;\n}*/\n</code></pre>\n\n<p>And this should scale up easily even if <code>MyRes</code> has more union members with more properties.</p>\n\n<hr>\n\n<p>Okay, hope that gives you a path forward.  Good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAggNnA0hEBnAPAFQHxQLxSZQQAewEAdgCapQCGFIUA-FANYoD2AZoVAFxQKEAG4QATgG4AUNNCQoAURIBjOAFdUAS24gAqhS2cKWADRRExMpRqwEyNFlwF4SFBhzPpUPqXLVaBiZmbygACiIAMigAbygAbQAFKC0KJVUNKgh0RHMOEB5CbABdZkFhMXEoAF8ASit-W1TuCSg9FlC4+IBFFLT8wr1iwT0e4pqBUIrW8tEJGWkAemWV1bX11dl5aEVxcQBZCFRUOgBzaAJUYHFU06hlqFROAFtoFRewOFJH6-UVYHU4ggsneFCuUBawBUAAsYIkAJL4KDoABCnCoTAIQXMABE6MA6EigtgwnBUmxBFcbhRTuYAEbokCCNEY2qCRLiF5aVDZOJUfF0QR4gkTAA+sSgr1Qgl2ByOJ3ONWcuBioSBAPEaWEAHcoByuTywmEgU84GJ6ngVaEfJCYaTyeY4gyMYIAFIAZQA8gA5AB0VNuOhAYWdIHqdWtPigvuA0MoRvEdG1Ftwie1voAVk8KGFarVIz4Y3Gc8ajinYgWoybOGaIKXUL6JFVWHEpYITY29hNBHyBe2jjV81GoxHh4WVPi7WEm+XVWOq0ca2Iwq2joIAOTkMjrweV0e76pQLbgaDCwmXa63e6LR4vN4fL4kH7iP4a4HbKD7EAAJQgAEckQDGlr1vV4oHeZ5Pm+KlX0BYFjwUL9f1oAhlDUTQgwMIwTF7AkhQFMUJTbJQ9kOY4zmgapsCWAAqD8kIHAg5yjfk8OfW4ZGHKUyigdRqAgbhUggKgZEPcVmJ8YigNOTiWIFHi+KyQThBE6RqhoxYQWMcEnleAAZTg6CyKosVQEAKBUcJZ1CUFwRNIltToLRgAhCAoVhBF0AYv9zAY1ASXXIEjIkddzHXUN1yHKB1UBNI4ns6o1K0sEXIgsBjEoYBMGhfEAHE3P1MAkTCMBOTAQQ-OsnwHibTgqhy6gvnEUIdHCUrODAX0pXqGLNRAzg2DoEBQgeKhOFAtzoVuUJ2s61jCQeAahrUoA\" rel=\"nofollow noreferrer\">Playground link to code</a></p>\n"}], "owner": {"reputation": 12180, "user_id": 10188661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3suZ.png?s=128&g=1", "display_name": "ZiiMakc", "link": "https://stackoverflow.com/users/10188661/ziimakc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59474355, "answer_count": 2, "score": 0, "last_activity_date": 1577240943, "creation_date": 1577228789, "last_edit_date": 1577229307, "question_id": 59474029, "link": "https://stackoverflow.com/questions/59474029/typescript-one-type-or-another-only", "title": "Typescript one type or another only", "body": "<p>I want to return an object as fetch response that can have one of the property (data or mes): </p>\n\n<pre><code>{ data: Data } | { mes: ErrMessage }\n</code></pre>\n\n<p>Problem is that typescript complains about this object, let's say props:</p>\n\n<pre><code>if (prop.mes) return // Property 'mes' does not exist on type '{ data: string; }'.\nprop.data // Property 'data' does not exist on type '{ mes: string; }'.\n</code></pre>\n\n<p>Is there any alternative except (it's not convenient to define this big type in component every time):</p>\n\n<pre><code>{ data: Data, mes: false } | { mes: ErrMessage, data: false}\n</code></pre>\n\n<p>Typescript playground <a href=\"https://www.typescriptlang.org/play/?ssl=1&amp;ssc=1&amp;pln=5&amp;pc=30#code/C4TwDgpgBAogTnAshAzighgc2gXii4OASwDtMoB6C-AewFtoBjesAGwgA99CBXR4HnAgAoYcxIEoAMwjBGACwCCABQCSUPAB4AQjQAmIDVHQkQAGigARdMHRGTIAHwAKVqQDWALm7EyFgEb6IN66BgCU3spw9EQoEJoA3lB6Nuje1rZQAL5QAD5QSQwo3vBIqBjY2Y4a1QnCUFBCAnAkUCQQAO5QUTFxzs5CKDSsAG4QYTUF9Q0zMnLyrh4WSYEG3gBSAMoA8gByAHQEvphEUiDOqyATWWHTM1D7wPIQJP1w6B0TONXvHfsAVkNXmFbvcGo9nq8BqgvrU7mDBsMxtCUPsIAgoAB+ApQIreQZojE5bxJFK2fGobKgsE3eHgxg2BT9dFwWFTMEzRGjCDOQqobwAcmAnGAAqpdPFDVpWVEoEgVlSRiOpHIVFoDCgzDobE4Pj4zREcugiBAACUIABHJWEFWUahDDVanVcI76wSG8DGs2UvAJMlpBWZHL5BJ42AIZBoLAQGViGgSYDqiAAGRo6D06PsKBAJEYUGcbLq93EkkG9g66CIibmChUqk0JvNFosjdQLgFQnT6IFFgFlwF1IaTUErQSgxlsZLiad8ZewAAKvIbABxWQ9MBGZxgaJgbytlBQQvwtUsmhwKBLkh6dhweGnfPbmhgfZFCbDlp27o79GgKACopinoNCUiQNCJpwsSJvGUBGn+pKpN4ypkAA3NkAr7KI9xqkBSZPCq8KPs+-qfuuP6GAK-qAcBB6geBHCQVA0GwQKfLFD4KqoVk6FQMIWRAA\" rel=\"nofollow noreferrer\">example</a>.</p>\n\n<pre><code>type ErrMessage = string // some complex structure\n\nconst fetchAPI = &lt;Body = any, Data = any&gt;(link: string, body: Body): Promise&lt;{ data: Data } | { mes: ErrMessage }&gt; =&gt; {\n  return new Promise((resolve) =&gt; {\n      fetch(link, { body: JSON.stringify(body) })\n      .then((raw) =&gt; raw.json())\n      .then((res) =&gt; {\n        resolve(res.err ? { mes: res.err } : { data: res })\n      })\n      .catch((err) =&gt; {\n        resolve({ mes: 'text' })\n      })\n  })\n}\n\ntype Data = string // some complex structure\ntype MyReq = string // some complex structure\ntype MyRes = {data: Data } | {mes: ErrMessage}\n\nconst someLoader = async () =&gt; {\n    const res = await fetchAPI&lt;MyReq, MyRes&gt;('reader', 'body')\n    return {res}\n}\n\nconst componentThatGetProp = (prop: MyRes ) =&gt; {\n    // error handler\n    if (prop.mes) return // Property 'mes' does not exist on type '{ data: string; }'.\n\n    // do something\n    prop.data // Property 'data' does not exist on type '{ mes: string; }'. \n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "typescript-typings", "package.json"], "answers": [{"tags": [], "owner": {"reputation": 6427, "user_id": 1486742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85d265e07bece5f7f82cce58514ec66?s=128&d=identicon&r=PG", "display_name": "LeOn - Han Li", "link": "https://stackoverflow.com/users/1486742/leon-han-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1604441252, "creation_date": 1604441252, "answer_id": 64671404, "question_id": 59474023, "link": "https://stackoverflow.com/questions/59474023/what-values-should-i-use-in-package-json-for-the-types-field/64671404#64671404", "title": "What values should I use in package.json for the &#39;types&#39; field?", "body": "<p>One option is to <code>export</code> all the useful types again in the index.ts so that they can be included in the <code>index.d.ts</code> eventually. I believe the <code>AWS SDK</code> did it this way.</p>\n<p>For example, in <code>index.ts</code>:</p>\n<blockquote>\n<p>export { MyType, MyService, MyOption } from './other-file.ts';</p>\n</blockquote>\n<p>So you can just put below in <code>package.json</code></p>\n<blockquote>\n<p>&quot;types&quot;: &quot;dist/index.d.ts&quot;</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11883339"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1604441252, "creation_date": 1577228715, "question_id": 59474023, "link": "https://stackoverflow.com/questions/59474023/what-values-should-i-use-in-package-json-for-the-types-field", "title": "What values should I use in package.json for the &#39;types&#39; field?", "body": "<p>I am a noobie in the field of JS/TS and for learning purposes, I am creating an NPM package in TypeScript. Before building and pushing the artefacts to the registry, I compile the TS files to JS files using the <code>tsc</code> command.  Following is my <code>tsconfig.json</code>:</p>\n\n<pre><code>{\n    \"compilerOptions\": {\n        \"target\": \"es6\",\n        \"module\": \"commonjs\",\n        \"declaration\": true,\n        \"outDir\": \"./dist\",\n        \"strict\": true\n    },\n    \"include\": [\"src/\"],\n    \"exclude\": [ \"node_modules/\", \"tests/\" ]\n}\n</code></pre>\n\n<p>After compiling, the <code>dist</code> folder has the same directory structure as my <code>src</code> directory but it has all the <code>js</code> files and <code>.d.ts</code> files instead of <code>ts</code> files which is expected. My question is how do I include the <code>type definitions</code> files? </p>\n\n<p>Googling this, I found that <code>package.json</code> file,  has a <code>types</code> field and to it, we assign the path to the <code>index.d.ts</code>, which in my case would be <code>dist/index.d.ts</code>. But it is not the only file that has type definions. There are many others in in many directories in the <code>dist</code> directory. </p>\n\n<p>How do I include all those type definitions in the final artefact? I also tried assigning <code>dist/**/*.d.ts</code> to the <code>types</code> field in <code>package.json</code> but it didn't work. </p>\n\n<p>I also want to know what is the right way of adding types to a TypeScript package. </p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577228381, "post_id": 59473979, "comment_id": 105126275, "body": "You don&#39;t subscribe. You return an observable created from the original http one, by applying operators (like map), on it. <a href=\"https://angular.io/guide/rx-library\" rel=\"nofollow noreferrer\">angular.io/guide/rx-library</a>"}, {"owner": {"reputation": 27684, "user_id": 1525840, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e1d7083d88bd7d8eedea825a941dae57?s=128&d=identicon&r=PG", "display_name": "Konrad Viltersten", "link": "https://stackoverflow.com/users/1525840/konrad-viltersten"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577228786, "post_id": 59473979, "comment_id": 105126327, "body": "@JBNizet I fail to see how I&#39;m supposed to use pipe and map to return a new observable of type boolean. I have used pipe and map before but get stuck on the specifics here. Care to post a short sample?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577229141, "post_id": 59473979, "comment_id": 105126370, "body": "<code>pipe(tap(suc =&gt; environment.validations = suc), map(() =&gt; true), catchError(() =&gt; of(false)))</code>"}, {"owner": {"reputation": 27684, "user_id": 1525840, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e1d7083d88bd7d8eedea825a941dae57?s=128&d=identicon&r=PG", "display_name": "Konrad Viltersten", "link": "https://stackoverflow.com/users/1525840/konrad-viltersten"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577230477, "post_id": 59473979, "comment_id": 105126561, "body": "This was interesting. Undeniably, it works. I have two follow-ups though. (1) Why <i>tap</i> instead of using <i>map</i> with a body and store the stuff, then returning <i>true</i>? Is it for lowering the complexity of each line? (2) It confuses me why we return a fixed value in <i>map</i> but return an observable value in <i>catchError</i>. It seems inconsistent that the former gets observable&#39;ized somehow while the latter doesn&#39;t."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1577256896, "post_id": 59473979, "comment_id": 105129595, "body": "map vs catchError: see the reference documentation. tap + map vs map only: because tap is for side effects, and map is for transforming events, so I find it clearer to be explicit about having a side-effect by using tap instead of hiding the side-effect in map."}], "answers": [{"comments": [{"owner": {"reputation": 27684, "user_id": 1525840, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e1d7083d88bd7d8eedea825a941dae57?s=128&d=identicon&r=PG", "display_name": "Konrad Viltersten", "link": "https://stackoverflow.com/users/1525840/konrad-viltersten"}, "edited": false, "score": 0, "creation_date": 1577229450, "post_id": 59474017, "comment_id": 105126417, "body": "Thanks for the hint. I updated the question with the code altered according to your suggestion. Is that what you meant? Why do I get the warning?"}, {"owner": {"reputation": 2976, "user_id": 7493840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/227486944377608/picture?type=large", "display_name": "Sereja Bogolubov", "link": "https://stackoverflow.com/users/7493840/sereja-bogolubov"}, "reply_to_user": {"reputation": 27684, "user_id": 1525840, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e1d7083d88bd7d8eedea825a941dae57?s=128&d=identicon&r=PG", "display_name": "Konrad Viltersten", "link": "https://stackoverflow.com/users/1525840/konrad-viltersten"}, "edited": false, "score": 0, "creation_date": 1577230671, "post_id": 59474017, "comment_id": 105126586, "body": "@KonradViltersten except that you don&#39;t have to <code>map</code> to <code>of(false)</code>. Take some time to walk through the docs, otherwise <code>rxjs</code> will resist you all day long."}, {"owner": {"reputation": 27684, "user_id": 1525840, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e1d7083d88bd7d8eedea825a941dae57?s=128&d=identicon&r=PG", "display_name": "Konrad Viltersten", "link": "https://stackoverflow.com/users/1525840/konrad-viltersten"}, "edited": false, "score": 0, "creation_date": 1577231515, "post_id": 59474017, "comment_id": 105126697, "body": "I took the liberty to update your answer for future, lazy visitors. It raises a question, though. It confuses me why I&#39;m supposed to return a simple, boolean <i>true</i> in <i>map</i> while I have to create an observable for *false. Seems so inconsequential."}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577251468, "post_id": 59474017, "comment_id": 105128884, "body": "Catch error needs to returns an observable. So instead of returning the error observable, you are returning the boolean <code>false</code> value instead"}], "tags": [], "owner": {"reputation": 2976, "user_id": 7493840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/227486944377608/picture?type=large", "display_name": "Sereja Bogolubov", "link": "https://stackoverflow.com/users/7493840/sereja-bogolubov"}, "is_accepted": true, "score": 0, "last_activity_date": 1577231344, "last_edit_date": 1577231344, "creation_date": 1577228685, "answer_id": 59474017, "question_id": 59473979, "link": "https://stackoverflow.com/questions/59473979/cant-return-boolean-using-return-offalse/59474017#59474017", "title": "Can&#39;t return boolean using &quot;return of(false)&quot;", "body": "<p>The <code>error</code> is a <code>void</code> callback; you can't return from there, no chance. Semantically, at the very moment you've gotten there, you're screwed; by definition, <code>rxjs</code> is <code>next*(complete|error)</code>-like stream of events, so as soon as first (actually, <strong>single</strong>) error seen, it kind of breaks down. To handle possible error and keep your intance alive, you have to <code>pipe</code> your original <code>Observer</code> through the <code>catchError</code> operator (<a href=\"https://www.learnrxjs.io/operators/error_handling/catch.html\" rel=\"nofollow noreferrer\">docs &amp; examples are here</a>).</p>\n\n<pre><code>setValidations(): Observable&lt;boolean&gt; {\n  ...\n  return this.http.get&lt;Validation[]&gt;(url)\n    .pipe(\n      tap(suc =&gt; environment.validations = suc),\n      map(() =&gt; true),\n      catchError(() =&gt; of(false))\n    );\n}\n</code></pre>\n"}], "owner": {"reputation": 27684, "user_id": 1525840, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e1d7083d88bd7d8eedea825a941dae57?s=128&d=identicon&r=PG", "display_name": "Konrad Viltersten", "link": "https://stackoverflow.com/users/1525840/konrad-viltersten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 59474017, "answer_count": 1, "score": 0, "last_activity_date": 1577231344, "creation_date": 1577228165, "last_edit_date": 1577229388, "question_id": 59473979, "link": "https://stackoverflow.com/questions/59473979/cant-return-boolean-using-return-offalse", "title": "Can&#39;t return boolean using &quot;return of(false)&quot;", "body": "<p>My aim is to load in some data, store it and return <em>true</em> or <em>false</em> to the requesting method. My idea was to perform the operation and then go <em>return of(true)</em> creating an observable. I have the following method.</p>\n\n<pre><code>setValidations(): Observable&lt;boolean&gt; {\n  ...\n  this.http.get&lt;Validation[]&gt;(url)\n    .subscribe(\n      suc =&gt; {\n        environment.validations = suc;\n        return of(true);\n      },\n      err =&gt; of(false)\n    );\n}\n</code></pre>\n\n<p>The computer complains that I need to return something of type <em>Observable</em>, so I'm concluding that I failed on the syntax. How do I fix it?</p>\n\n<p><strong>edit according to answers/comments</strong></p>\n\n<pre><code>setValidations(): Observable&lt;boolean&gt; {\n  ...\n  return this.http.get&lt;Validation[]&gt;(url)\n    .pipe(\n      map(_ =&gt; { console.log(\"success\"); return of(true); }),\n      catchError =&gt; { console.log(\"success\"); return of(false); }\n    );\n}\n</code></pre>\n\n<p>I changed the method as shown above. It seems to work but produces a warning about a shadowed variable called <em>catchError</em>. Bit worried that I'm doing something less good here.</p>\n"}, {"tags": ["javascript", "typescript", "ecmascript-6", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 12585637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCC1xtiXv--RNomDjrhV5-awMWg8yc7UzSjLeFn=k-s128", "display_name": "HARI CHARAN K", "link": "https://stackoverflow.com/users/12585637/hari-charan-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1577251240, "last_edit_date": 1577251240, "creation_date": 1577237117, "answer_id": 59474535, "question_id": 59473962, "link": "https://stackoverflow.com/questions/59473962/how-do-you-modify-object-in-array-with-response-from-observable-rxjs/59474535#59474535", "title": "How do you modify object in array with response from observable RxJs", "body": "<p>You cant call the async call in the <code>Array.map</code> as it is a synchronous method. It will not wait for async call to complete and moves further which is why you are getting undefined for <code>modifiedPeople</code> and moreover <code>pipe</code> operator returns an <code>Observable</code> which needs to be subscribed for the result.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>forkJoin(\n  people.map(person =&gt;\n    this.getNewAge(person)\n      .pipe(map(newAge =&gt; ({ ...person, age: newAge })))\n  )\n)\n.subscribe(result =&gt; console.log(result));\n</code></pre>\n\n<p>the result will be your <code>modifiedPeople</code> </p>\n"}], "owner": {"reputation": 12431, "user_id": 1754020, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/M1jSY.png?s=128&g=1", "display_name": "Eduardo Dennis", "link": "https://stackoverflow.com/users/1754020/eduardo-dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 59474535, "answer_count": 1, "score": 0, "last_activity_date": 1577251240, "creation_date": 1577227821, "question_id": 59473962, "link": "https://stackoverflow.com/questions/59473962/how-do-you-modify-object-in-array-with-response-from-observable-rxjs", "title": "How do you modify object in array with response from observable RxJs", "body": "<p>I am trying to iterate over an array of people and call an api which returns a new age which I will override the age and then merge with dogs array. The code looks like this:</p>\n\n<pre><code>const dogs = [{name:'Chichi', age:2}, {name:'Yayo', age:4}];\nconst people = [{name:'Mike', age:23}, {name:'John', age:45}];\n\nconst modifiedPeople = people.map(person =&gt; {        \n    getNewAge(person).pipe(map(newAge=&gt; {return person.age = newAge}));\n\nreturn [...dogs, modifiedPeople];\n\n})\n</code></pre>\n\n<p>This always returns an empty <code>modifiedPeople</code>. How can I perform this operation with RxJs in ES6</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-material"], "comments": [{"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 1, "creation_date": 1577246940, "post_id": 59473878, "comment_id": 105128386, "body": "It means that somewhere in your code, you are calling a function which in turn calls another function and so forth until you hit the call stack limit. OR <code>You can sometimes get this if you accidentally import&#47;embed the same JavaScript file twice, worth checking in your resources tab of the inspector.</code>"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1577247023, "post_id": 59473878, "comment_id": 105128393, "body": "Please provide a demo where I/we can reproduce an issue!"}, {"owner": {"reputation": 41, "user_id": 2507188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ec71262af05ff0d9bde4c198440596?s=128&d=identicon&r=PG", "display_name": "a.oubela", "link": "https://stackoverflow.com/users/2507188/a-oubela"}, "reply_to_user": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1577262885, "post_id": 59473878, "comment_id": 105130715, "body": "When using a nested tree and  the data of the tree is so  large,it throws RangeError: Maximum call stack size exceeded error and some nodes are rendered with no content, So the solution i found to overcome this is to use a flat tree. it appears that the Tree with flat nodes can handle large data."}, {"owner": {"reputation": 1721, "user_id": 7561063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e85f88d7948998c821283bc67082c9?s=128&d=identicon&r=PG&f=1", "display_name": "Allabakash", "link": "https://stackoverflow.com/users/7561063/allabakash"}, "edited": false, "score": 0, "creation_date": 1577273650, "post_id": 59473878, "comment_id": 105133028, "body": "@a.oubela can you create a stackblitz demo to reproduce the issue ?"}], "owner": {"reputation": 41, "user_id": 2507188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ec71262af05ff0d9bde4c198440596?s=128&d=identicon&r=PG", "display_name": "a.oubela", "link": "https://stackoverflow.com/users/2507188/a-oubela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577259635, "creation_date": 1577226811, "last_edit_date": 1577259635, "question_id": 59473878, "link": "https://stackoverflow.com/questions/59473878/error-in-angular-material-tree-when-displaying-big-data", "title": "Error in Angular Material Tree when displaying big Data", "body": "<p>I constructed an angular material Tree data that contains children depth > 6 and important length like :</p>\n\n<pre><code>const TREE_DATA: FoodNode[] = [\n  {\n    name: 'Fruit',\n    children: [\n      {name: 'Apple'},\n      {name: 'Banana'},\n      {name: 'Fruit loops'},\n    ]\n  }, {\n    name: 'Vegetables',\n    children: [\n      {\n        name: 'Green',\n        children: [\n          {name: 'Broccoli'},\n          {name: 'Brussel sprouts'},\n        ]\n      }, {\n        name: 'Orange',\n        children: [\n          {name: 'Pumpkins'},\n          {name: 'Carrots'},\n        ]\n      },\n    ]\n  },\n....\n];\n</code></pre>\n\n<p>when trying to display the tree :</p>\n\n<pre><code>&lt;mat-tree [dataSource]=\"dataSource\" [treeControl]=\"treeControl\" class=\"example-tree\"&gt;\n  &lt;!-- This is the tree node template for leaf nodes --&gt;\n  &lt;mat-tree-node *matTreeNodeDef=\"let node\" matTreeNodeToggle&gt;\n    &lt;li class=\"mat-tree-node\"&gt;\n      &lt;!-- use a disabled button to provide padding for tree leaf --&gt;\n      &lt;button mat-icon-button disabled&gt;&lt;/button&gt;\n      {{node.name}}\n    &lt;/li&gt;\n  &lt;/mat-tree-node&gt;\n  &lt;!-- This is the tree node template for expandable nodes --&gt;\n  &lt;mat-nested-tree-node *matTreeNodeDef=\"let node; when: hasChild\"&gt;\n    &lt;li&gt;\n      &lt;div class=\"mat-tree-node\"&gt;\n        &lt;button mat-icon-button matTreeNodeToggle\n                [attr.aria-label]=\"'toggle ' + node.name\"&gt;\n          &lt;mat-icon class=\"mat-icon-rtl-mirror\"&gt;\n            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}\n          &lt;/mat-icon&gt;\n        &lt;/button&gt;\n        {{node.name}}\n      &lt;/div&gt;\n      &lt;ul [class.example-tree-invisible]=\"!treeControl.isExpanded(node)\"&gt;\n        &lt;ng-container matTreeNodeOutlet&gt;&lt;/ng-container&gt;\n      &lt;/ul&gt;\n    &lt;/li&gt;\n  &lt;/mat-nested-tree-node&gt;\n&lt;/mat-tree&gt;\n</code></pre>\n\n<p>I get an error of Maximum call stack size exceeded :\n<a href=\"https://i.stack.imgur.com/HBlCX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HBlCX.png\" alt=\"enter image description here\"></a></p>\n\n<p>i couldn't fix this bug, if any one can help ?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "redux", "react-redux"], "comments": [{"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 1, "creation_date": 1577278046, "post_id": 59473706, "comment_id": 105134030, "body": "Why not just import the <code>NetworkManager</code> whenever you need it and instantiate it there? No need to pass it down the component tree with props..."}, {"owner": {"reputation": 333, "user_id": 4119678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yUW6p.jpg?s=128&g=1", "display_name": "afryingpan", "link": "https://stackoverflow.com/users/4119678/afryingpan"}, "reply_to_user": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1577291779, "post_id": 59473706, "comment_id": 105137155, "body": "@goto1 just wanted to know best practice, importing is definitely nicer than passing down, and the way I had originally planned on going"}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1577292586, "post_id": 59473706, "comment_id": 105137318, "body": "Not sure what this <code>NetworkManager</code> is supposed to do, but if it&#39;s something that relates to API calls then I&#39;d just simply import it whenever I need it - passing it as a <code>prop</code> the way you have it is probably not the best way and not a good use of <code>props</code> - keep it simple. That&#39;d be the better approach here in my opinion."}, {"owner": {"reputation": 333, "user_id": 4119678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yUW6p.jpg?s=128&g=1", "display_name": "afryingpan", "link": "https://stackoverflow.com/users/4119678/afryingpan"}, "reply_to_user": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1577294100, "post_id": 59473706, "comment_id": 105137668, "body": "@goto1 Yes, I agree that if it was just API calls the best and simplest way is indeed just importing. But it&#39;s a little more than that, a wrapper class for opening and maintaining a connection with a server via <code>WebSockets</code>, where every new instance of the class would be a new connection over a new socket."}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1577294938, "post_id": 59473706, "comment_id": 105137819, "body": "But it&#39;s a singleton, so this wouldn&#39;t be the case, even if you import it into multiple files and try to instantiate it multiple times, like in this example - <a href=\"https://codesandbox.io/s/kind-oskar-hvnlm?fontsize=14&amp;hidenavigation=1&amp;theme=dark\" rel=\"nofollow noreferrer\">codesandbox.io/s/&hellip;</a>."}, {"owner": {"reputation": 333, "user_id": 4119678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yUW6p.jpg?s=128&g=1", "display_name": "afryingpan", "link": "https://stackoverflow.com/users/4119678/afryingpan"}, "reply_to_user": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1577297586, "post_id": 59473706, "comment_id": 105138345, "body": "@goto1 Yes, I implemented the Singleton pattern after the fact, because I found passing down through props cumbersome. Coming from a C# background it felt better this way, but I wanted to know if there was a \u201cReact\u201d way of doing it"}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 1, "creation_date": 1577298746, "post_id": 59473706, "comment_id": 105138599, "body": "Unfortunately (or fortunately) <code>React</code> is not opinionated as <code>Angular</code>or <code>Vue</code> are for example, and <code>React</code> is really &quot;just&quot; a UI library, so this type of business logic wouldn&#39;t even fall in the &quot;React&quot; category. Use <code>props</code> for passing data, event handlers, and occasionally <code>React</code> components, from parent to child. The rest is really up to you."}, {"owner": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "edited": false, "score": 0, "creation_date": 1577373560, "post_id": 59473706, "comment_id": 105154822, "body": "Dislcaimer: I&#39;m not a senior architect or anything, but I would probably opt for passing as props as this follows a more &quot;Dependency Injection&quot; principle. If you directly import it you&#39;re coupling yourself more to that implementation of a <code>NetworkManager</code>, whereas if you pass it is a prop it feels more like programming towards the interface."}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "reply_to_user": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "edited": false, "score": 0, "creation_date": 1578058822, "post_id": 59473706, "comment_id": 105325397, "body": "@ehutchllew I am curious where you&#39;ve seen the pattern of using <code>prop</code>s as a dependency injection"}, {"owner": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "reply_to_user": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1578066483, "post_id": 59473706, "comment_id": 105329053, "body": "@goto1 by the fact that you can literally inject functions, classes, w/e that the component depends on via props. The component doesn&#39;t have to necessarily know about the specific implementation of this dependency, it just &quot;uses&quot; something on its interface."}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "reply_to_user": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "edited": false, "score": 0, "creation_date": 1578069564, "post_id": 59473706, "comment_id": 105330550, "body": "@ehutchllew what if you need the <code>api</code> module somewhere else down your tree? do you just keep passing it via <code>props</code> through every component?"}, {"owner": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "reply_to_user": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1578072217, "post_id": 59473706, "comment_id": 105331766, "body": "@goto1 there are options for doing that. Prop drilling to a certain extent isn&#39;t bad, but if it starts getting hairy, app state management tools can be used."}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "reply_to_user": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "edited": false, "score": 0, "creation_date": 1578093905, "post_id": 59473706, "comment_id": 105339356, "body": "@ehutchllew prop drilling or using a state management tool for sharing an API module just to gain &quot;dependency injection&quot; is a tough sell for me... state management tools aren&#39;t event meant to be used in this type of way; using import statements is less problematic as you keep it as an implementation detail and there are less assumptions about how it rerenders the component"}, {"owner": {"reputation": 775, "user_id": 5487267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfaa496fb0bd458808f2b7ca38fe0340?s=128&d=identicon&r=PG&f=1", "display_name": "ehutchllew", "link": "https://stackoverflow.com/users/5487267/ehutchllew"}, "reply_to_user": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1578261162, "post_id": 59473706, "comment_id": 105372902, "body": "@goto1 If you know you&#39;re always going to use that same implementation, then that&#39;s fine -- it couples your code to it though. It&#39;s not a bad practice to program to an interface over an implementation.  Also, using the API module doesn&#39;t grant you dependency injection, it&#39;s your pattern that does. The API module (state management in this case) facilitates the scenario you painted above about drilling this dependency into child components."}, {"owner": {"reputation": 3552, "user_id": 5862900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MA2G.jpg?s=128&g=1", "display_name": "goto1", "link": "https://stackoverflow.com/users/5862900/goto1"}, "edited": false, "score": 0, "creation_date": 1578261619, "post_id": 59473706, "comment_id": 105373006, "body": "There are pros and cons to both approaches, but at the end of the day you have to pick what will work best in the long term... My only issue with state management tools is that they&#39;re for <b>managing state</b>. You could technically share your reusable <code>React</code> components with a state management tool to prevent prop drilling, but is that a good idea?"}, {"owner": {"reputation": 1126, "user_id": 1481644, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/D8KJh.png?s=128&g=1", "display_name": "Anchor", "link": "https://stackoverflow.com/users/1481644/anchor"}, "edited": false, "score": 0, "creation_date": 1598466340, "post_id": 59473706, "comment_id": 112471509, "body": "@afryingpan I&#39;m facing this issue now - out of curiosity, what did you end up going with?"}], "owner": {"reputation": 333, "user_id": 4119678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yUW6p.jpg?s=128&g=1", "display_name": "afryingpan", "link": "https://stackoverflow.com/users/4119678/afryingpan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1776, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1577270185, "creation_date": 1577224892, "last_edit_date": 1577270185, "question_id": 59473706, "link": "https://stackoverflow.com/questions/59473706/sharing-a-class-instance-object-between-react-components", "title": "Sharing a Class Instance Object Between React Components", "body": "<p>If I have, say, a network manager class that I have implemented with a singleton pattern.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export default class Manager {\n   private static _Instance: Manager;\n   public static get Instance(): Manager {\n      if (Manager._Instance) {\n         return Manager._Instance;\n      } else {\n         return new Manager();\n      }\n   }\n\n   constructor() {\n      if (Manager._Instance) {\n         return Manager._Instance;\n      }\n      Manager._Instance = this;\n   }\n\n   // Network management methods, etc.\n}\n</code></pre>\n\n<p>And I instantiate it at the very top of my React app component tree, the beginning of the app's life cycle: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Manager from './Manager';\nimport Foo from './Foo';\nimport Bar from './Bar';\n\nclass App extends React.Component&lt;{}, State&gt; {\n   private networkManager = new Manager();\n\n   constructor(props: any) {\n       super(props);\n       this.state = {\n           connected: false,\n           id: '',\n       };\n   }\n\n   componentDidMount = (): void =&gt; {\n       this.initNetwork();\n   };\n\n   initNetwork = async (): Promise&lt;void&gt; =&gt; {\n      try {\n         // network management init and config\n      } catch(err) {\n         // handle network init errors \n      }\n   }\n\n   render = (): JSX.Element =&gt; {\n        return (\n            &lt;div className=\"App\"&gt;\n                &lt;Router&gt;\n                    &lt;Switch&gt;\n                        &lt;Route\n                            path=\"/foo\"\n                            render={(props): JSX.Element =&gt; (\n                                &lt;Foo {...props} NetworkManager={this.networkManager} /&gt;\n                            )}\n                        /&gt;\n                        &lt;Route\n                            path=\"/\"\n                            render={(props): JSX.Element =&gt; &lt;Bar {...props}/&gt;}\n                        /&gt;\n                    &lt;/Switch&gt;\n                &lt;/Router&gt;\n            &lt;/div&gt;\n        );\n    };\n}\n</code></pre>\n\n<p>And I then want to use that instance in a child component, I obviously have several ways to do this, but what is the best way? I could pass it down to components as a prop, or import it and use the instance property to get the instance. Benefits and disadvantages of both approaches?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React from 'react';\n\ntype Props = {\n    networkManager: Manager;\n};\nclass Foo extends React.Component&lt;Props&gt; {\n   private manager: Manager;\n   constructor(props) {\n      super(props);\n      this.manager = props.networkManager;\n   }\n}\n\n// alternatively in ./Bar.tsx\nimport React from 'react';\nimport Manager from './Manager';\n\nclass Bar extends React.Component {\n   private manager: Manager\n   constructor(props) {\n      super(props);\n      this.manager = Manager.Instance; // new Manager() should also return the same instance\n   }\n}\n</code></pre>\n\n<p>Is there another, better way to do it I'm not aware of? Something like Redux would be nice, but my experience with it is storing plain, object literals rather than class instances, and placing something like this in the store does not seem right. Does it really matter how I share the instance? Both passing down through props and importing work and are roughly equivalent in terms of amount of typing needed. Performance wise I don't think there's much of a difference either, the instance should never change and therefore the prop will never update and trigger a component re-render, but that might be something to consider. Am I overthinking it? </p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 23854, "user_id": 70345, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/aV45a.jpg?s=128&g=1", "display_name": "Ian Kemp", "link": "https://stackoverflow.com/users/70345/ian-kemp"}, "edited": false, "score": 0, "creation_date": 1577223789, "post_id": 59473560, "comment_id": 105125571, "body": "TypeScript objects do not implicitly allow you to index into them the same way that plain JS objects do. Refer to <a href=\"https://basarat.gitbooks.io/typescript/docs/types/index-signatures.html#declaring-an-index-signature\" rel=\"nofollow noreferrer\">this</a> for an example of how you can achieve what you want to accomplish."}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1577224600, "creation_date": 1577224600, "answer_id": 59473676, "question_id": 59473560, "link": "https://stackoverflow.com/questions/59473560/how-can-one-use-typescript-to-make-an-interface-for-a-fixed-simple-object/59473676#59473676", "title": "How can one use Typescript to make an interface for a fixed, simple object?", "body": "<p>If all the properties in <code>IAdminFormState</code> have type <code>string</code>, then you should be able to make the compiler happy as long as <code>action</code> has type <code>{field: keyof IAdminFormState, value: string}</code>:</p>\n\n<pre><code>declare const state: { formState: IAdminFormState };\ndeclare const action: { field: keyof IAdminFormState, value: string };\n\nconst newState: IAdminFormState = state.formState;\nnewState[action.field] = action.value; // no error\n</code></pre>\n\n<p>The compiler knows that <code>action.field</code> is one of the keys, and since all properties are <code>string</code> it's safe to index into <code>newState</code> with it, and assign a <code>string</code> value to it.</p>\n\n<p>Okay, hope that helps.  Good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/LAKApgHgDg9gTgFwAQEsB2CxwGYEMDGYSAkgIIAmAtugGLyUDKCumSA3qEl0gERwC0AZwCM-TLko8AXEkEI46AOYBuTtz5DRg-DACuCabPlLVIbkgD0FgHS21XHgCMhAZjFgJhuQrQr7vZ0E3bT0DGW8TUABfUFByMHwAG1w4Ih00OSMWMBk2JGx6JmyZMipaQuZWKNN4pJS0mAzkAgQURtz8lDBE8hkAazAATxhsEgpqNDo4RkqwABokADdcRN0cox9FJGrYkHTMtDAAdyLMEvHy6dOiAF4szGsCq9nTQ5PZgG0WtrRHrp6ALpIO7fRrWZarMCmIA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 83, "user_id": 9303079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdc7dac48c9b0e928056a8f9ea854c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9303079/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 59473676, "answer_count": 1, "score": 1, "last_activity_date": 1577224600, "creation_date": 1577223240, "question_id": 59473560, "link": "https://stackoverflow.com/questions/59473560/how-can-one-use-typescript-to-make-an-interface-for-a-fixed-simple-object", "title": "How can one use Typescript to make an interface for a fixed, simple object?", "body": "<p>I have a form with 12 fields and the resulting object will always have 12 string keys following the format {r | b}-s{1 | 2 | 3}-{team | scout} with string values. I've tried creating an interface as follows:</p>\n\n<pre><code>export interface IAdminFormState {\n  \"r-s1-team\": string;\n  \"r-s1-scout\": string;\n  ...\n  \"b-s3-team\": string;\n  \"b-s3-scout\": string;\n}\n</code></pre>\n\n<p>However, when I try do to the following to update a single field in the store (React-Redux)</p>\n\n<pre><code>const newState: IAdminFormState = state.formState;\nnewState[action.field] = action.value;\n</code></pre>\n\n<p>The second line gives me the error: <strong>Element implicitly has an <em>'any'</em> type because expression of type <em>'string'</em> can't be used to index type <em>'IAdminFormState'</em></strong>, followed by  <strong>No index signature with a parameter of type <em>'string'</em> was found on type <em>'IAdminFormState'</em>.</strong></p>\n\n<p>What would be a better approach to fix this issue?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 2687, "user_id": 11769164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cascCTYxkPQ/AAAAAAAAAAI/AAAAAAAAAkQ/KzEi1WfT8Ks/photo.jpg?sz=128", "display_name": "Ashot Aleqsanyan", "link": "https://stackoverflow.com/users/11769164/ashot-aleqsanyan"}, "is_accepted": true, "score": 0, "last_activity_date": 1577236547, "last_edit_date": 1577236547, "creation_date": 1577223242, "answer_id": 59473562, "question_id": 59473370, "link": "https://stackoverflow.com/questions/59473370/i-try-to-add-elements-in-my-object-with-ngmodel-and-add-two-statics-that-are-not/59473562#59473562", "title": "I try to add elements in my object with ngModel and add two statics that are not in the form", "body": "<p>I think you have async problem.\nYou can resolve it by <code>forkJoin</code> or with <code>Promise.all</code> or make it synchronous.</p>\n\n<ol>\n<li><p>example with <code>forkJoin</code></p>\n\n<pre><code>import { forkJoin } from 'rxjs';\n\nregistro() {\n  forkJoin({\n    persona: this.http.post(this.URL + \"/persona\", this.persona),\n    telefonos: this.http.post(this.URL + '/telefono', this.telefonos)\n  }).subscribe(response =&gt; {\n    this.alumnos.Persona_idPersona = response.persona[0].idPersona ; \n    this.alumnos.Telefonos_idTelefonos = response.telefonos[0].idTelefonos;\n    // Hacemos post a un alumnos\n    console.log(this.alumnos);\n    this.http.post(this.URL , this.alumnos).toPromise()\n      .then( ( data: any) =&gt;{\n        console.log(data);\n      });\n})\n\n}\n</code></pre></li>\n<li><p>example with <code>Promise.all</code></p>\n\n<pre><code>async registro() {\n  const response = await Promise.all([\n    this.http.post(this.URL + \"/persona\", this.persona).toPromise(),\n    this.http.post(this.URL + '/telefono', this.telefonos).toPromise()\n  ]);\n\n  this.alumnos.Persona_idPersona = response[0][0].idPersona ; \n  this.alumnos.Telefonos_idTelefonos = response[1][0].idTelefonos;\n\n  // Hacemos post a un alumnos\n  console.log(this.alumnos);\n  this.http.post(this.URL , this.alumnos).toPromise()\n    .then( ( data: any) =&gt;{\n      console.log(data);\n    });\n}\n</code></pre></li>\n<li><p>make it synchronous</p>\n\n<pre><code>async registro() {\n  const persona = await this.http.post(this.URL + \"/persona\", this.persona).toPromise();\n  this.alumnos.Persona_idPersona = persona[0].idPersona ; \n\n  const telefonos = await this.http.post(this.URL + '/telefono', this.telefonos).toPromise();\n\n  this.alumnos.Telefonos_idTelefonos = telefonos[0].idTelefonos;\n\n  // Hacemos post a un alumnos\n  console.log(this.alumnos);\n  this.http.post(this.URL , this.alumnos).toPromise()\n    .then( ( data: any) =&gt;{\n      console.log(data);\n    });\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 77, "user_id": 11672851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6JjU34iegJU/AAAAAAAAAAI/AAAAAAAAA6Y/kIkSKhf4pzg/photo.jpg?sz=128", "display_name": "ardoYep", "link": "https://stackoverflow.com/users/11672851/ardoyep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 59473562, "answer_count": 1, "score": 0, "last_activity_date": 1577236547, "creation_date": 1577221181, "question_id": 59473370, "link": "https://stackoverflow.com/questions/59473370/i-try-to-add-elements-in-my-object-with-ngmodel-and-add-two-statics-that-are-not", "title": "I try to add elements in my object with ngModel and add two statics that are not in the form", "body": "<p>In my form has every column [(ngModel)]=\"alumno.data\" but i need include two more because  are ID created for database </p>\n\n<p>my object in component.ts</p>\n\n<pre><code>alumnos = {\n    \"Persona_idPersona\": \"\",\n    \"Telefonos_idTelefonos\": \"\"\n  };\n</code></pre>\n\n<p>When the server responds to me it gives me to id the these data (Persona_idPersona, Telefonos_idTelefonos) </p>\n\n<p>in console output show the number correct but when i use http.post show  \" \" that initial condition</p>\n\n<pre><code>registro()\n  {\n    this.http.post(this.URL + \"/persona\", this.persona).toPromise().then( (data: any ) =&gt; {\n      console.log(data[0].idPersona);\n      this.alumnos.Persona_idPersona = data[0].idPersona ; \n    });\n\n    this.http.post(this.URL + '/telefono', this.telefonos).toPromise().then( (data: any ) =&gt; {\n      console.log(data);\n      this.alumnos.Telefonos_idTelefonos = data[0].idTelefonos;\n    });\n\n    // Hacemos post a un alumnos\n    console.log(this.alumnos);\n    this.http.post(this.URL , this.alumnos).toPromise().then( ( data: any) =&gt;{\n      console.log(data);\n    });\n\n\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6C3i6.png\" rel=\"nofollow noreferrer\">Image console output</a></p>\n\n<p>The problem is that it sends \"\" and the assigned numbers are not saved.\nHow I do it so that the data is saved and sent.</p>\n"}, {"tags": ["typescript", "ts-mockito"], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 10419716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DggF7.png?s=128&g=1", "display_name": "bugbear", "link": "https://stackoverflow.com/users/10419716/bugbear"}, "is_accepted": true, "score": 3, "last_activity_date": 1599997633, "creation_date": 1599997633, "answer_id": 63870379, "question_id": 59473278, "link": "https://stackoverflow.com/questions/59473278/ts-mockito-mocked-promise-never-resolves/63870379#63870379", "title": "ts-mockito mocked promise never resolves", "body": "<p>That is a bug in the <code>ts-mockito</code> library itself (<a href=\"https://github.com/NagRock/ts-mockito/issues/191\" rel=\"nofollow noreferrer\">issue #191</a>).<br />\nA <a href=\"https://github.com/NagRock/ts-mockito/pull/194\" rel=\"nofollow noreferrer\">pull request</a> is on it's way, so hopefully it will be fixed soon.<br />\nCurrently, at version 2.6.1, it is still there.</p>\n"}], "owner": {"reputation": 13771, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 63870379, "answer_count": 1, "score": 1, "last_activity_date": 1599997633, "creation_date": 1577220456, "last_edit_date": 1577221739, "question_id": 59473278, "link": "https://stackoverflow.com/questions/59473278/ts-mockito-mocked-promise-never-resolves", "title": "ts-mockito mocked promise never resolves", "body": "<p>given this</p>\n\n<pre><code>beforeAll(() =&gt; {\n  testContainer.register(Beans.CEC_LOCATION, {\n    useFactory: (c) =&gt; {\n      const contextMock = mock&lt;ContentfulEntryContext&lt;ContentfulLocationFields&gt;&gt;();\n      const entryMock = mock&lt;Entry&lt;ContentfulLocationFields&gt;&gt;();\n      when(entryMock.fields).thenReturn({\n        id: '42',\n        name: 'Deep Mind',\n      });\n      when(contextMock.get()).thenResolve(instance(entryMock));\n      const location = (id: string) =&gt; {\n        return instance(contextMock);\n      };\n      location('42').get().then((v) =&gt; console.log(v));\n      return location;\n    },\n  });\n});\n</code></pre>\n\n<p>when <code>location.get()</code> is called, <code>then</code> never resolves, even on a 60s timeout, reject seems to work. What am I doing wrong?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 39638, "user_id": 8690857, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-47_HcdolAr0/AAAAAAAAAAI/AAAAAAAAB30/lD6xAXOWlu4/photo.jpg?sz=128", "display_name": "Drew Reese", "link": "https://stackoverflow.com/users/8690857/drew-reese"}, "edited": false, "score": 0, "creation_date": 1577220655, "post_id": 59473213, "comment_id": 105124981, "body": "Don&#39;t mutate the variable you are currently doing comparisons on. Are you ultimately trying to store an array of actual time intervals? String literals? What is your expected/desired result object shape?"}, {"owner": {"reputation": 173, "user_id": 9716086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d51a335b52d8879042b80762ab5ff56?s=128&d=identicon&r=PG&f=1", "display_name": "danibrum", "link": "https://stackoverflow.com/users/9716086/danibrum"}, "reply_to_user": {"reputation": 39638, "user_id": 8690857, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-47_HcdolAr0/AAAAAAAAAAI/AAAAAAAAB30/lD6xAXOWlu4/photo.jpg?sz=128", "display_name": "Drew Reese", "link": "https://stackoverflow.com/users/8690857/drew-reese"}, "edited": false, "score": 0, "creation_date": 1577221202, "post_id": 59473213, "comment_id": 105125102, "body": "Yes, string literals, I expect something like periods[0] = &quot;8:00-10:00&quot; or something like that. But I still have to guarantee that the hours are correct somehow. Sorry If I wasn&#39;t very clear."}, {"owner": {"reputation": 39638, "user_id": 8690857, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-47_HcdolAr0/AAAAAAAAAAI/AAAAAAAAB30/lD6xAXOWlu4/photo.jpg?sz=128", "display_name": "Drew Reese", "link": "https://stackoverflow.com/users/8690857/drew-reese"}, "edited": false, "score": 0, "creation_date": 1577221381, "post_id": 59473213, "comment_id": 105125142, "body": "Is there anything wrong with simply hardcoding the 4 string literals in the array then? Or are you looking for a dynamic solution? Something where the start &amp; duration of each interval is specified and stringified? I think you should update your question with your requirements and/or restrictions, etc."}, {"owner": {"reputation": 173, "user_id": 9716086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d51a335b52d8879042b80762ab5ff56?s=128&d=identicon&r=PG&f=1", "display_name": "danibrum", "link": "https://stackoverflow.com/users/9716086/danibrum"}, "reply_to_user": {"reputation": 39638, "user_id": 8690857, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-47_HcdolAr0/AAAAAAAAAAI/AAAAAAAAB30/lD6xAXOWlu4/photo.jpg?sz=128", "display_name": "Drew Reese", "link": "https://stackoverflow.com/users/8690857/drew-reese"}, "edited": false, "score": 0, "creation_date": 1577221511, "post_id": 59473213, "comment_id": 105125166, "body": "Yeah, I need the start and end of the interval specified and stringified. The hours intervals won&#39;t change. I&#39;ll edit my question."}, {"owner": {"reputation": 39638, "user_id": 8690857, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-47_HcdolAr0/AAAAAAAAAAI/AAAAAAAAB30/lD6xAXOWlu4/photo.jpg?sz=128", "display_name": "Drew Reese", "link": "https://stackoverflow.com/users/8690857/drew-reese"}, "edited": false, "score": 0, "creation_date": 1577221908, "post_id": 59473213, "comment_id": 105125240, "body": "I guess it still isn&#39;t clear why you can&#39;t simply return <code>[&quot;8:00-10:00&quot;, &quot;10:30-12:30&quot;, &quot;13:30-15:30&quot;, &quot;15:30-18:00&quot;]</code> as you say the intervals won&#39;t change and will always be the same ones."}, {"owner": {"reputation": 173, "user_id": 9716086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d51a335b52d8879042b80762ab5ff56?s=128&d=identicon&r=PG&f=1", "display_name": "danibrum", "link": "https://stackoverflow.com/users/9716086/danibrum"}, "reply_to_user": {"reputation": 39638, "user_id": 8690857, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-47_HcdolAr0/AAAAAAAAAAI/AAAAAAAAB30/lD6xAXOWlu4/photo.jpg?sz=128", "display_name": "Drew Reese", "link": "https://stackoverflow.com/users/8690857/drew-reese"}, "edited": false, "score": 0, "creation_date": 1577222066, "post_id": 59473213, "comment_id": 105125283, "body": "Yeah, I guess you are right since I&#39;m not receiving any parameters on my function and the hours won&#39;t change dynamically. I&#39;ll think a little bit more about it, but thanks for your help!"}], "owner": {"reputation": 173, "user_id": 9716086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d51a335b52d8879042b80762ab5ff56?s=128&d=identicon&r=PG&f=1", "display_name": "danibrum", "link": "https://stackoverflow.com/users/9716086/danibrum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577221674, "creation_date": 1577220041, "last_edit_date": 1577221674, "question_id": 59473213, "link": "https://stackoverflow.com/questions/59473213/returning-an-array-with-time-intervals-between-hours", "title": "Returning an array with time intervals between hours", "body": "<p>I need to return an array with time intervals between 4 periods:</p>\n\n<p>Like, index 0 would be the interval between 8am and 10am, index 1 between 10:30 and 12:00 and so on.</p>\n\n<p>I tried doing something like this using setHours method but it didn't work:</p>\n\n<pre><code>getPeriod() {\n    let time = new Date();\n    const periods = [];\n    periods[0] = time &gt;= time.setHours(8) &amp;&amp; time &lt;= time.setHours(10);\n}\n</code></pre>\n\n<p>It seems that I cannot use >= and &lt;= operators with Date, so I'm getting a little bit confused on how to do it.</p>\n\n<p>I need the hours interval specified and stringified, but they won't change. </p>\n\n<p>The time intervals will be always these ones: 8 to 10, 10:30 to 12:00, 13:30 to 15:30 and 15:30 to 18:00</p>\n\n<p>Hope that someone can help me, thanks in advance!</p>\n"}, {"tags": ["javascript", "angular", "typescript", "promise"], "comments": [{"owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 0, "creation_date": 1577217052, "post_id": 59472903, "comment_id": 105124284, "body": "Have you tried the logic without the <code>async</code> and <code>await</code> in your <code>RequesterService</code>?  I haven&#39;t ever used those with an Observable, so those would be my first thought as to what might be fubaring the attempted usage of pipe and subscribe."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1577220339, "post_id": 59472903, "comment_id": 105124921, "body": "How is <code>Requester.get(url, ...)</code> any easier than <code>http.get(url, ...)</code>?"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577280761, "post_id": 59472903, "comment_id": 105134707, "body": "there is no wrong of using async/await you jest have to convert an observable to promise and observable has a method for this , check m answer ifit work for \ud83e\udd14\ud83e\udd14"}], "answers": [{"tags": [], "owner": {"reputation": 1408, "user_id": 5743530, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/v6B42.jpg?s=128&g=1", "display_name": "canmustu", "link": "https://stackoverflow.com/users/5743530/canmustu"}, "is_accepted": true, "score": 2, "last_activity_date": 1577217187, "creation_date": 1577217187, "answer_id": 59472950, "question_id": 59472903, "link": "https://stackoverflow.com/questions/59472903/how-to-make-a-generic-request-service-in-angular8/59472950#59472950", "title": "How to make a generic request service in Angular8", "body": "<p>You are trying to return an non-async function with await.</p>\n\n<pre><code>  request(method, url, headers, body, params) {\n    return this.http.request(method, url, {\n      body: body || {},\n      headers: headers || {},\n      params: params || {}\n    })\n  }\n\n  async get(url, params?, headers?, data?) {\n    return await this.request('get', url, params, headers, data)\n  }\n</code></pre>\n\n<p>You shouldn't use async-await system here.</p>\n\n<p>Try this:</p>\n\n<pre><code>  get(url, params?, headers?, data?) {\n    return this.request('get', url, params, headers, data)\n  }\n</code></pre>\n\n<p>And subscribe this method in your component.ts file.</p>\n\n<p>Like this:</p>\n\n<pre><code>Requester.get.subscribe(....)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 12585637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCC1xtiXv--RNomDjrhV5-awMWg8yc7UzSjLeFn=k-s128", "display_name": "HARI CHARAN K", "link": "https://stackoverflow.com/users/12585637/hari-charan-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1577219239, "last_edit_date": 1577219239, "creation_date": 1577218805, "answer_id": 59473105, "question_id": 59472903, "link": "https://stackoverflow.com/questions/59472903/how-to-make-a-generic-request-service-in-angular8/59473105#59473105", "title": "How to make a generic request service in Angular8", "body": "<p>Actually, you can create an abstract base service class that can be extended in any service. This will automatically handle the error by calling another service that has a generic error handling code. If you pass <code>customError</code> flag the error will be returned into the component for handing custom error. This method is using <code>RxJs</code> <code>Observables</code> which can be subscribed in component.ts and catch the response and error.</p>\n\n<pre><code>import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Observable } from \"rxjs\";\nimport { tap } from \"rxjs/operators\";\n\nimport { HttpOptionsService } from \"../../services/httpoptions.service\";\n\nexport abstract class ServiceBase {\n  constructor(\n    private http: HttpClient,\n    private httpOptionService: HttpOptionsService\n  ) {}\n\n  httpOptions = {\n    headers: new HttpHeaders({\n      \"Content-Type\": \"application/json\"\n    })\n  };\n\n  getFormattedPostRequest(\n    url: string,\n    body: any,\n    customError: boolean = false): Observable&lt;any&gt; {\n    return this.pipeTapObservable(\n      this.http.post(url, body, this.httpOptions),\n      customError\n    );\n  }\n\n  getFormattedPutRequest(\n    url: string,\n    body: any,\n    customError: boolean = false\n  ): Observable&lt;any&gt; {\n    return this.pipeTapObservable(\n      this.http.put(url, body, this.httpOptions),\n      customError\n    );\n  }\n\n  getFormattedGetRequest(\n    url: string,\n    customError: boolean = false\n  ): Observable&lt;any&gt; {\n    return this.pipeTapObservable(\n      this.http.get(url, this.httpOptions),\n      customError\n    );\n  }\n\n  getFormattedDeleteRequest(\n    url: string,\n    customError: boolean = false\n  ): Observable&lt;any&gt; {\n    return this.pipeTapObservable(\n      this.http.delete(url, this.httpOptions),\n      customError\n    );\n  }\n\n  private pipeTapObservable(\n    request: Observable&lt;any&gt;,\n    customError: boolean = false\n  ): Observable&lt;any&gt; {\n    return request.pipe(\n      tap(\n        response =&gt; response,\n        error =&gt; {\n          !customError &amp;&amp;\n            this.httpOptionService.handleError(error);\n          return error;\n        }\n      )\n    );\n  }\n}\n</code></pre>\n\n<p>If you have some common headers to be added you can create an interceptor to add them. You can use it in any service like below.</p>\n\n<pre><code> @Injectable()\n    export class MyService extends ServiceBase {\n      constructor(\n        http: HttpClient,\n        httpOptionService: HttpOptionsService\n    ) {\n        super(http, httpOptionService);\n      }\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1577276361, "last_edit_date": 1577276361, "creation_date": 1577229463, "answer_id": 59474083, "question_id": 59472903, "link": "https://stackoverflow.com/questions/59472903/how-to-make-a-generic-request-service-in-angular8/59474083#59474083", "title": "How to make a generic request service in Angular8", "body": "<p>you can use async/await but this syntax work on promise type and request method return an observable so you just need to return a promise from request method or you can do it on the return statement on the get,post,put,delete method</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RequesterService {\n\n  constructor(private http: HttpClient) { }\n\n  request(method, url, headers, body, params) {\n    return this.http.request(method, url, {\n      body: body || {},\n      headers: headers || {},\n      params: params || {}\n    }).toPromise();\n  }\n\n   get(url, params?, headers?, data?) {\n    return this.request('get', url, params, headers, data);\n  }\n\n   post(url, params, headers, data) {\n    return this.request('post', url, params, headers, data);\n  }\n\n   put(url, params, headers, data) {\n    return this.request('put', url, params, headers, data);\n  }\n\n   delete(url, params, headers, data) {\n    return this.request('delete', url, params, headers, data);\n  }\n}\n</code></pre>\n\n<p><em>component</em></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, OnInit } from '@angular/core';\nimport { RequesterService } from 'src/app/core/Requester/requester.service';\n\n@Component({\n  selector: 'app-gym-list',\n  templateUrl: './gym-list.component.html',\n  styleUrls: ['./gym-list.component.css']\n})\nexport class GymListComponent implements OnInit {\n\n  constructor(private Requester: RequesterService) { }\n\n  ngOnInit() {\n    console.log(this.teste())\n  }\n\n  async teste() {\n    const result = await this.Requester.get('https://searchs.glitch.me/proposalcontent');\n\n    console.log(result); \ud83d\udc48\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 1162409, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YSzYR.jpg?s=128&g=1", "display_name": "San Jaisy", "link": "https://stackoverflow.com/users/1162409/san-jaisy"}, "is_accepted": false, "score": 2, "last_activity_date": 1588925468, "creation_date": 1588925468, "answer_id": 61674804, "question_id": 59472903, "link": "https://stackoverflow.com/questions/59472903/how-to-make-a-generic-request-service-in-angular8/61674804#61674804", "title": "How to make a generic request service in Angular8", "body": "<pre><code>import { HttpClient, HttpHeaders, HttpRequest, HttpEventType, HttpEvent, HttpResponse, HttpErrorResponse } from \"@angular/common/http\";\nimport { Observable, from } from 'rxjs';\nimport { IGenericHttpClient } from './igeneric-http-client';\nimport { Injectable } from '@angular/core';\nimport { HttpMethod } from '../view-models/component-type.enum'\nimport { IRequestOptions } from '../view-models/interface';\nimport { EnvironmentViewModel } from '../view-models/environment-view-model';\nimport { retry } from 'rxjs/operators';\n@Injectable()\nexport class GenericHttpClient&lt;T&gt; implements IGenericHttpClient&lt;T&gt;{\n\n  constructor(private httpClient: HttpClient, private environment: EnvironmentViewModel) { }\n\n  public Post(destinationUrl: string, options?: IRequestOptions): Observable&lt;T&gt; {\n    return this.request&lt;T&gt;(HttpMethod.Post, destinationUrl, options);\n  }\n\n  public Put(destinationUrl: string, options?: IRequestOptions): Observable&lt;T&gt; {\n    return this.request&lt;T&gt;(HttpMethod.Put, destinationUrl, options);\n  }\n\n  public Get(destinationUrl: string, options?: IRequestOptions): Observable&lt;T&gt; {\n    return this.request&lt;T&gt;(HttpMethod.Get, destinationUrl, options);\n  }\n\n  public Delete(destinationUrl: string, options?: IRequestOptions): Observable&lt;T&gt; {\n    return this.request&lt;T&gt;(HttpMethod.Delete, destinationUrl, options);\n  }\n\n  private request&lt;T&gt;(method: string, url: string, options?: IRequestOptions): Observable&lt;T&gt; {\n    return Observable.create((observer: any) =&gt; {\n      this.httpClient.request&lt;T&gt;(new HttpRequest(method, this.environment.baseUrl + url, options)).subscribe(\n        (response: any) =&gt; {\n          const responsTye = response as HttpEvent&lt;any&gt;\n          switch (responsTye.type) {\n            case HttpEventType.Sent:\n              console.log('Request sent!');\n              break;\n            case HttpEventType.ResponseHeader:\n              console.log('Response header received!');\n              break;\n            case HttpEventType.DownloadProgress:\n              const kbLoaded = Math.round(responsTye.loaded / 1024);\n              console.log(`Download in progress! ${kbLoaded}Kb loaded`);\n              break;\n            case HttpEventType.Response:\n              observer.next(response.body);\n              console.log('\ud83d\ude3a Done!', responsTye.body);\n          }\n        },\n        (error) =&gt; {\n          switch (error.status) {\n            case 403:\n              observer.complete();\n              break;\n            default:\n              observer.error(error);\n              break;\n          }\n        }\n      );\n    });\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 10029461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kd30A8xUJmw/AAAAAAAAAAI/AAAAAAAAHag/ooRNYpj61QY/photo.jpg?sz=128", "display_name": "Felipe Santos", "link": "https://stackoverflow.com/users/10029461/felipe-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 1, "accepted_answer_id": 59472950, "answer_count": 4, "score": 3, "last_activity_date": 1588925468, "creation_date": 1577216635, "last_edit_date": 1577216846, "question_id": 59472903, "link": "https://stackoverflow.com/questions/59472903/how-to-make-a-generic-request-service-in-angular8", "title": "How to make a generic request service in Angular8", "body": "<p>i've created an generic request service but it keeps returning 'ZoneAwarePromise'. I've tried to use .pipe() and .subscribe() to try to retrive the content of the request, but it's not working.</p>\n\n<p>requester.service.ts</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RequesterService {\n\n  constructor(private http: HttpClient) { }\n\n  request(method, url, headers, body, params) {\n    return this.http.request(method, url, {\n      body: body || {},\n      headers: headers || {},\n      params: params || {}\n    })\n  }\n\n  async get(url, params?, headers?, data?) {\n    return await this.request('get', url, params, headers, data)\n  }\n\n  async post(url, params, headers, data) {\n    return await this.request('post', url, params, headers, data);\n  }\n\n  async put(url, params, headers, data) {\n    return await this.request('put', url, params, headers, data);\n  }\n\n  async delete(url, params, headers, data) {\n    return await this.request('delete', url, params, headers, data);\n  }\n}\n</code></pre>\n\n<p>gym-list.component.ts</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { RequesterService } from 'src/app/core/Requester/requester.service';\n\n@Component({\n  selector: 'app-gym-list',\n  templateUrl: './gym-list.component.html',\n  styleUrls: ['./gym-list.component.css']\n})\nexport class GymListComponent implements OnInit {\n\n  constructor(private Requester: RequesterService) { }\n\n  ngOnInit() {\n    console.log(this.teste())\n  }\n\n  async teste() {\n    await this.Requester.get('https://searchs.glitch.me/proposalcontent')\n  }\n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 987, "user_id": 4796491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d636cdebb342360df3bc9350a7be11?s=128&d=identicon&r=PG&f=1", "display_name": "sceee", "link": "https://stackoverflow.com/users/4796491/sceee"}, "edited": false, "score": 2, "creation_date": 1577437017, "post_id": 59472179, "comment_id": 105169415, "body": "Experiencing the same issue when using <code>sanitize-html</code> as its dependency tree is <code>sanitize-html</code> -&gt; <code>htmlparser2</code> -&gt; <code>domutils</code> -&gt; <code>domhandler</code>. The configuration (with typescript 3.6.4) worked in node 8 before upgrading to node 12."}, {"owner": {"reputation": 987, "user_id": 4796491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d636cdebb342360df3bc9350a7be11?s=128&d=identicon&r=PG&f=1", "display_name": "sceee", "link": "https://stackoverflow.com/users/4796491/sceee"}, "edited": false, "score": 1, "creation_date": 1577444025, "post_id": 59472179, "comment_id": 105171883, "body": "Could you please check in your <code>npm-shrinkwrap.json</code> or <code>package-lock.json</code> if there are multiple versions of <code>domutils</code> in there? And also, which dependencies are pulling in <code>domutils</code> in which versions?"}], "answers": [{"tags": [], "owner": {"reputation": 882, "user_id": 1250626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ec7575aa5505018faa44c0ffafa360?s=128&d=identicon&r=PG", "display_name": "Sielu", "link": "https://stackoverflow.com/users/1250626/sielu"}, "is_accepted": false, "score": 2, "last_activity_date": 1582810713, "last_edit_date": 1582810713, "creation_date": 1582796357, "answer_id": 60430160, "question_id": 59472179, "link": "https://stackoverflow.com/questions/59472179/typescript-compilation-error-importing-non-default-interface-with-curly-braces/60430160#60430160", "title": "TypeScript compilation error, importing non default interface with curly braces", "body": "<p>Based on info from <a href=\"https://github.com/Microsoft/TypeScript/issues/21344#issuecomment-361495894\" rel=\"nofollow noreferrer\">aluanhaddad at GitHub</a> I managed to get it compiling (and working), though I don't like the solution (because it's actually turning any checking for that module off).</p>\n\n<p>I have removed typings to sanitize-html (and related domhandler etc.). TSC cries that it doesn't know \"sanitize-html\" module, so I've added a dummy module declaration inside my src folder.</p>\n\n<p>src/sanitize-html.d.ts</p>\n\n<pre><code>declare module 'sanitize-html';\n</code></pre>\n\n<p>tsconfig.json</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"module\": \"commonjs\",\n    \"noImplicitAny\": true,\n    \"removeComments\": true,\n    \"preserveConstEnums\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"esModuleInterop\": true,\n    \"allowSyntheticDefaultImports\": true\n  },\n  \"lib\": [\n    \"es6\",\n    \"dom\"\n  ],\n  \"include\": [\n    \"src/**/*\",\n    \"index.ts\"\n  ],\n  \"exclude\": [\n    \"**/*.spec.ts\"\n  ]\n}\n</code></pre>\n\n<p>build command:</p>\n\n<pre><code>tsc\n</code></pre>\n"}], "owner": {"reputation": 1528, "user_id": 7739392, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-LY4ZfEoLtf0/AAAAAAAAAAI/AAAAAAAAD2A/kXJq6SRDsS8/photo.jpg?sz=128", "display_name": "joshua miller", "link": "https://stackoverflow.com/users/7739392/joshua-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1485, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1582810713, "creation_date": 1577210915, "last_edit_date": 1577214482, "question_id": 59472179, "link": "https://stackoverflow.com/questions/59472179/typescript-compilation-error-importing-non-default-interface-with-curly-braces", "title": "TypeScript compilation error, importing non default interface with curly braces", "body": "<p>When compiling my TypeScript project, the compiler is throwing the following error:</p>\n\n<pre><code>node_modules/@types/domutils/index.d.ts:6:10 - error TS2614: Module '\"../../domhandler/lib\"' has no exported member 'DomElement'. Did you mean to use 'import DomElement from \"../../domhandler/lib\"' instead?\n</code></pre>\n\n<p>The offending line is:</p>\n\n<pre><code>import { DomElement } from \"domhandler\";\n</code></pre>\n\n<p>The problem is, in the typing file it is trying to import from, the DomElement interface is a non default exported interface as follows:</p>\n\n<pre><code>export interface DomElement {\n    attribs?: {[s: string]: string};\n    children?: DomElement[];\n    data?: any;\n    name?: string;\n    next?: DomElement;\n    parent?: DomElement;\n    prev?: DomElement;\n    type?: string;\n}\n</code></pre>\n\n<p>If I remove the curly braces it does in fact work, but that seems problematic to me:</p>\n\n<ol>\n<li>I was under the impression that only default exports can be imported without curly braces. Why is this import <strong>required</strong> without curly braces?</li>\n<li>This issue is occurring in type definitions in the <code>node-modules</code> folder as provided by <em>DefinitelyTyped</em>. I do not want to change a dependency file. There are no related open issues in Github, so I assume it does work. In fact it works for a colleague with an older version of Node (v8) but that doesn't seem like it should make a difference.</li>\n</ol>\n\n<p>Versions:</p>\n\n<ul>\n<li>Node.js - 12.14.0</li>\n<li>List item</li>\n<li>TypeScript 3.7.2 (also tested not working on 3.7.4)</li>\n<li>Type definitions for domhandler 2.4 (<a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/domhandler\" rel=\"noreferrer\">https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/domhandler</a>)</li>\n<li>Type definitions for domutils 1.7 (<a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/domutils\" rel=\"noreferrer\">https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/domutils</a>)</li>\n</ul>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is my tsconfig.json:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"esModuleInterop\": true,\n    \"target\": \"es6\",\n    \"noImplicitAny\": true,\n    \"moduleResolution\": \"node\",\n    \"sourceMap\": true,\n    \"outDir\": \"dist\",\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"*\": [\n        \"node_modules/*\"\n      ]\n    }\n  },\n  \"include\": [\n    \"src/**/*\"\n  ]\n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "docker", "hyperledger-fabric"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10382340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R3ntInq175Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW9NJiGLs9XDkk6bt9QK1EeEcqzKg/mo/photo.jpg?sz=128", "display_name": "Ashish Chandra", "link": "https://stackoverflow.com/users/10382340/ashish-chandra"}, "edited": false, "score": 0, "creation_date": 1577464213, "post_id": 59498055, "comment_id": 105179330, "body": "Hi Shubham, thanks for the response. I had gone through these examples but wanted to know if I could execute all the steps by just using the Fabric Node SDK instead of having to use command line tools. For example, there is an Organization object and an MSP object in the SDK. I wanted to know if they can used to 1) Add a new org to an existing network and 2) Have it join an existing channel."}, {"owner": {"reputation": 59, "user_id": 10382340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R3ntInq175Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW9NJiGLs9XDkk6bt9QK1EeEcqzKg/mo/photo.jpg?sz=128", "display_name": "Ashish Chandra", "link": "https://stackoverflow.com/users/10382340/ashish-chandra"}, "edited": false, "score": 0, "creation_date": 1577465404, "post_id": 59498055, "comment_id": 105179807, "body": "Also, I wanted to add that I have no issues using command line tools <i>if I have to</i> but I just wanted to know authoritatively whether everything could be done using the SDK APIs (could not find any examples on the internet for the same so I have asked in Fabric forums on hyperledger.org, posted a question on Hyperledger JIRA and asked here)"}, {"owner": {"reputation": 1257, "user_id": 9790416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e4d4944386ae38d1b229977ac4b3e4?s=128&d=identicon&r=PG", "display_name": "Shubham Chadokar", "link": "https://stackoverflow.com/users/9790416/shubham-chadokar"}, "reply_to_user": {"reputation": 59, "user_id": 10382340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R3ntInq175Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW9NJiGLs9XDkk6bt9QK1EeEcqzKg/mo/photo.jpg?sz=128", "display_name": "Ashish Chandra", "link": "https://stackoverflow.com/users/10382340/ashish-chandra"}, "edited": false, "score": 0, "creation_date": 1577517839, "post_id": 59498055, "comment_id": 105190175, "body": "I also search for this a few months back and found no answer. All we require is binaries endpoint but, as per my knowledge, other than <code>configtxlator</code> no binaries expose APIs. By the time no APIs or any alternative introduce, we have to stick with the cli."}, {"owner": {"reputation": 187, "user_id": 6168555, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e562072904dd62411e53a536ffb423c?s=128&d=identicon&r=PG&f=1", "display_name": "Paradox", "link": "https://stackoverflow.com/users/6168555/paradox"}, "edited": false, "score": 0, "creation_date": 1577610951, "post_id": 59498055, "comment_id": 105207392, "body": "Hey, I tried searching for the source for configtxlator but was unable to find it. If we have source then we might be able to the same thing in the API. As far as I know, that is the only tool to build the channel config"}, {"owner": {"reputation": 1211, "user_id": 11264208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIG6Y.jpg?s=128&g=1", "display_name": "sabhari karthik", "link": "https://stackoverflow.com/users/11264208/sabhari-karthik"}, "edited": false, "score": 0, "creation_date": 1577713446, "post_id": 59498055, "comment_id": 105233196, "body": "For now, we need to rely on &quot;child_process&quot; library of node to execute configtxlator commands and as you know we have already covered every other steps with node sdk."}, {"owner": {"reputation": 59, "user_id": 10382340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R3ntInq175Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW9NJiGLs9XDkk6bt9QK1EeEcqzKg/mo/photo.jpg?sz=128", "display_name": "Ashish Chandra", "link": "https://stackoverflow.com/users/10382340/ashish-chandra"}, "edited": false, "score": 0, "creation_date": 1577719632, "post_id": 59498055, "comment_id": 105235857, "body": "I am curious about the Organization object and the MSP object in Fabric Node SDK.  Can we not do something like &quot;new Organization&quot;, then set its attributes (certs, private keys, name etc) and then add this using the Channel object? The assumption is that an existing admin is adding this new Org. For configtxlator type functions, can we not use getGenesisBlock and getChannelConfigFromOrderer? If this isn&#39;t possible, can someone explain why we cannot purely add a new organization using the Fabric Node SDK? I have not tried these methods yet and was really hoping someone had, but now I am curious"}, {"owner": {"reputation": 1257, "user_id": 9790416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e4d4944386ae38d1b229977ac4b3e4?s=128&d=identicon&r=PG", "display_name": "Shubham Chadokar", "link": "https://stackoverflow.com/users/9790416/shubham-chadokar"}, "edited": false, "score": 0, "creation_date": 1577723576, "post_id": 59498055, "comment_id": 105237585, "body": "First, you have to understand, when we say a new org in the network, that means you have to add the org in the <code>genesis.block</code> which was created in the beginning. To get this block you have to access system channel, in the byfn it is <code>byfn-sys-channel</code>. From SDK we can access only custom channel which we create using SDK. There are no such methods which will return the <code>system-channel</code>. If you have to add a new org in the network then you have to use fabric-tools cli."}, {"owner": {"reputation": 59, "user_id": 10382340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R3ntInq175Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW9NJiGLs9XDkk6bt9QK1EeEcqzKg/mo/photo.jpg?sz=128", "display_name": "Ashish Chandra", "link": "https://stackoverflow.com/users/10382340/ashish-chandra"}, "edited": false, "score": 0, "creation_date": 1577726159, "post_id": 59498055, "comment_id": 105238600, "body": "@ShubhamChadokar are you on Telegram? I would like to chat with you in regards to this. Please let me know. I am ashishchandr70 on Telegram."}], "tags": [], "owner": {"reputation": 1257, "user_id": 9790416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e4d4944386ae38d1b229977ac4b3e4?s=128&d=identicon&r=PG", "display_name": "Shubham Chadokar", "link": "https://stackoverflow.com/users/9790416/shubham-chadokar"}, "is_accepted": true, "score": 0, "last_activity_date": 1577435837, "creation_date": 1577435837, "answer_id": 59498055, "question_id": 59472023, "link": "https://stackoverflow.com/questions/59472023/adding-a-new-org-to-an-existing-hyperledger-fabric-network-using-the-fabric-node/59498055#59498055", "title": "Adding a new Org to an existing Hyperledger Fabric network using the Fabric Node SDK", "body": "<p>Actually, the title of the article is misleading. In the article, you are adding a new org in the existing channel not in the network.   </p>\n\n<p>Please take a look at the official documentation. The same tutorial.<br>\n<a href=\"https://hyperledger-fabric.readthedocs.io/en/release-1.4/channel_update_tutorial.html\" rel=\"nofollow noreferrer\">Adding an Org to a Channel</a>   </p>\n\n<p>For your requirement, yes we can do the same using the node sdk.   </p>\n\n<p>Check out this tutorial. <a href=\"https://hyperledger.github.io/fabric-sdk-node/release-1.4/tutorial-channel-create.html\" rel=\"nofollow noreferrer\">update channel config</a>   </p>\n\n<p>In the tutorial, they are updating the channel id to create a new channel with that id.  </p>\n\n<p>You can use the same steps to update the organizations.   </p>\n\n<p>You have to run <code>shell</code> command using either by <code>shell.js</code> or <code>child-process</code>.    </p>\n\n<p>Hope it will clear your doubts.</p>\n"}], "owner": {"reputation": 59, "user_id": 10382340, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R3ntInq175Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW9NJiGLs9XDkk6bt9QK1EeEcqzKg/mo/photo.jpg?sz=128", "display_name": "Ashish Chandra", "link": "https://stackoverflow.com/users/10382340/ashish-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 59498055, "answer_count": 1, "score": 2, "last_activity_date": 1577435837, "creation_date": 1577209731, "question_id": 59472023, "link": "https://stackoverflow.com/questions/59472023/adding-a-new-org-to-an-existing-hyperledger-fabric-network-using-the-fabric-node", "title": "Adding a new Org to an existing Hyperledger Fabric network using the Fabric Node SDK", "body": "<p>Here is where I am at the moment:</p>\n\n<p>Fabric version 1.4.1\nUsing byfn.sh to create Org1, Org2, Orderer etc and bring the channel mychannel up\nLanguage: Node using Typescript</p>\n\n<p>I have followed the instructions in this tutorial to add a third org Org3 <a href=\"https://medium.com/@kctheservant/add-a-new-organization-on-existing-hyperledger-fabric-network-2c9e303955b2\" rel=\"nofollow noreferrer\">https://medium.com/@kctheservant/add-a-new-organization-on-existing-hyperledger-fabric-network-2c9e303955b2</a></p>\n\n<p>This works great.</p>\n\n<p>Now, I would like to add another Org but using the Fabric Node SDK. Is that possible?</p>\n\n<p>Scenario is this:</p>\n\n<ol>\n<li>A network admin logs into a custom UI being developed to manage a Fabric network.</li>\n<li>The admin inputs details such as new Org name, MSP ID, peers info into the UI</li>\n<li><p>The UI invokes a service layer which will </p>\n\n<ol>\n<li>Invoke a Fabric Node SDK API to create crypto materials for the new\nOrg b. </li>\n<li>Invoke Fabric Node SDK API to create the new Org and have it\njoin the channel mychannel </li>\n<li>Install chaincode to the new Org's peers d. </li>\n<li>Run some tests of invoke and query chaincode to ensure that the new Org can query and submit transactions</li>\n</ol></li>\n</ol>\n\n<p>In the last step, I will save the new channel configuration and the new Org configuration to yaml or json files.</p>\n\n<p>I have looked at the Node SDK and have seen the <a href=\"https://hyperledger.github.io/fabric-sdk-node/release-1.4/Organization.html\" rel=\"nofollow noreferrer\">Organization</a> and <a href=\"https://hyperledger.github.io/fabric-sdk-node/release-1.4/Channel.html\" rel=\"nofollow noreferrer\">Channel</a> methods. However, it seems like the Organization class is not exposed as a type for Typescript, so I am not sure how to use it.</p>\n\n<p>It would help if someone could explain the methods I need to use to get to what I am trying to do.</p>\n\n<p>I would appreciate any help.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["typescript", "relational-operators", "strictnullchecks"], "answers": [{"comments": [{"owner": {"reputation": 44608, "user_id": 1127114, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb1b2345f4c7b696d7c0376d273d01b2?s=128&d=identicon&r=PG", "display_name": "Michael Liu", "link": "https://stackoverflow.com/users/1127114/michael-liu"}, "edited": false, "score": 0, "creation_date": 1577217725, "post_id": 59472295, "comment_id": 105124432, "body": "Sounds reasonable. I also considered the more concise<code>(f() || 0) &lt; 0</code>, but the null check isn&#39;t as obvious."}, {"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "reply_to_user": {"reputation": 44608, "user_id": 1127114, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb1b2345f4c7b696d7c0376d273d01b2?s=128&d=identicon&r=PG", "display_name": "Michael Liu", "link": "https://stackoverflow.com/users/1127114/michael-liu"}, "edited": false, "score": 0, "creation_date": 1577217866, "post_id": 59472295, "comment_id": 105124455, "body": "Use the <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing\" rel=\"nofollow noreferrer\">new <code>??</code> operator</a> to make this more obvious it&#39;s checking for null then <code>(f() ?? 0) &lt; 0</code>"}], "tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": true, "score": 2, "last_activity_date": 1577402895, "last_edit_date": 1577402895, "creation_date": 1577212005, "answer_id": 59472295, "question_id": 59472015, "link": "https://stackoverflow.com/questions/59472015/allow-nullable-operands-in-less-or-greater-than-comparisons-in-typescript/59472295#59472295", "title": "Allow nullable operands in less- or greater-than comparisons in TypeScript", "body": "<p><code>nonNumber &lt; number</code> replies on javascript type coercion to work (converts <code>null</code> to a <code>number</code> when compared to a number). And type coercion is which is widely regarded as something to avoid in all javascript programs due to non obvious ways that values are transformed.</p>\n\n<p>Typescript is assuming that more often than not, a nullable number used in a comparison is probably a potential bug. It's likely the programmer just forgot that the variable could be <code>null</code> when writing that comparison.</p>\n\n<p>So what typescript wants is for you to explicitly handle the <code>null</code> case. This tells readers of your code exactly what happens if that value is <code>null</code> and that the original programmer intended <code>null</code> to be handled precisely that way.</p>\n\n<p>Something like this perhaps?</p>\n\n<pre><code>const val = f()\nlet b = val !== null &amp;&amp; val &lt; 0\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>let b = (f() ?? 0) &lt; 0\n</code></pre>\n\n<p>You could use <code>f()!</code> as you note, and that should work to silence the error. However, the <code>!</code> is intended to say \"the programmer is asserting that this value is not <code>null</code> here, even if the compiler thinks it might be\". Which isn't quite accurate, as you already noted.</p>\n"}], "owner": {"reputation": 44608, "user_id": 1127114, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bb1b2345f4c7b696d7c0376d273d01b2?s=128&d=identicon&r=PG", "display_name": "Michael Liu", "link": "https://stackoverflow.com/users/1127114/michael-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 59472295, "answer_count": 1, "score": 1, "last_activity_date": 1577402895, "creation_date": 1577209685, "question_id": 59472015, "link": "https://stackoverflow.com/questions/59472015/allow-nullable-operands-in-less-or-greater-than-comparisons-in-typescript", "title": "Allow nullable operands in less- or greater-than comparisons in TypeScript", "body": "<p>In JavaScript, <a href=\"https://www.ecma-international.org/ecma-262/10.0/index.html#sec-abstract-relational-comparison\" rel=\"nofollow noreferrer\">null operands in a relational expression are treated as 0</a>:</p>\n\n<pre><code>function f() { return /* either a number or null */; }\n\nlet b = f() &lt; 0; // false if f() returns null\n</code></pre>\n\n<p>But in TypeScript, if I provide a type annotation for <code>f</code> and turn on strict null checking, then I get the compiler error <code>Object is possibly 'null'</code>:</p>\n\n<pre><code>function f(): number | null { return /* either a number or null */; }\n\nlet b = f() &lt; 0; // &lt;-- error TS2531\n</code></pre>\n\n<p>Is there a way to tell the compiler that nullable operands are acceptable here?</p>\n\n<p>I can shut the compiler up with a non-null assertion on <code>f()</code>, but I worry that <code>f()!</code> could mislead code reviewers because <code>f()</code> <em>can</em> return null here.</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 2779533, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79185f7299489ac6b12e5e53134d2b2d?s=128&d=identicon&r=PG", "display_name": "Ari", "link": "https://stackoverflow.com/users/2779533/ari"}, "edited": false, "score": 0, "creation_date": 1577214731, "post_id": 59472130, "comment_id": 105123792, "body": "Yeah, that&#39;s what I figured. I want to type a function argument that&#39;s passed to a  query param... Thank you for confirming."}], "tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": true, "score": 2, "last_activity_date": 1577210554, "creation_date": 1577210554, "answer_id": 59472130, "question_id": 59471947, "link": "https://stackoverflow.com/questions/59471947/define-a-typescript-string-type-of-comma-separated-union-types/59472130#59472130", "title": "Define a Typescript string type of comma separated union types?", "body": "<p>You can't.</p>\n\n<p>Typescript can type <code>string</code>s which can have any content, or can it can type exact strings like <code>\"cool\"</code> or <code>\"wow\"</code>. But typescript will never know about if a string contains certain characters.</p>\n\n<p>The only way to make this work would be to store these as an array instead:</p>\n\n<pre><code>type AmazeArray = AcceptableVal[];\nconst dabes: AmazeArray = ['cool', 'wow'];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6992, "user_id": 495157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UFMPn.png?s=128&g=1", "display_name": "JGFMK", "link": "https://stackoverflow.com/users/495157/jgfmk"}, "is_accepted": false, "score": 0, "last_activity_date": 1577213005, "last_edit_date": 1577213005, "creation_date": 1577212545, "answer_id": 59472387, "question_id": 59471947, "link": "https://stackoverflow.com/questions/59471947/define-a-typescript-string-type-of-comma-separated-union-types/59472387#59472387", "title": "Define a Typescript string type of comma separated union types?", "body": "<p>It sound more like you want to see if a value is in an Array.</p>\n\n<pre><code>const l: string[] = ['cool', 'wow', 'biz', 'sweet', 'yowza', 'fantastic'];\nlet r: string[] = l.filter(s  =&gt; s === 'cool');\nif (r.length &gt; 0) { console.log('Got one')}\n</code></pre>\n\n<p>You can also have <a href=\"https://www.typescriptlang.org/docs/handbook/enums.html\" rel=\"nofollow noreferrer\">Enums</a></p>\n"}, {"comments": [{"owner": {"reputation": 9271, "user_id": 227622, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bdea66420888d70b8e2f864c04b43fd9?s=128&d=identicon&r=PG", "display_name": "elwyn", "link": "https://stackoverflow.com/users/227622/elwyn"}, "edited": false, "score": 1, "creation_date": 1618373490, "post_id": 65157132, "comment_id": 118579052, "body": "Could you show how this is used with the example from the OP please?"}], "tags": [], "owner": {"reputation": 155, "user_id": 7784151, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-ip3yag1zU0M/AAAAAAAAAAI/AAAAAAAAABU/gr8Hp8OSYXA/photo.jpg?sz=128", "display_name": "MHA15", "link": "https://stackoverflow.com/users/7784151/mha15"}, "is_accepted": false, "score": 0, "last_activity_date": 1607172811, "creation_date": 1607172811, "answer_id": 65157132, "question_id": 59471947, "link": "https://stackoverflow.com/questions/59471947/define-a-typescript-string-type-of-comma-separated-union-types/65157132#65157132", "title": "Define a Typescript string type of comma separated union types?", "body": "<p>with new template string feature of ts4.1 you can do this using following utils</p>\n<pre class=\"lang-js prettyprint-override\"><code>type UnionToIntersection&lt;U&gt; = (U extends any ? (k: U) =&gt; void : never) extends (k: infer I) =&gt; void\n    ? I\n    : never;\ntype UnionToOvlds&lt;U&gt; = UnionToIntersection&lt;U extends any ? (f: U) =&gt; void : never&gt;;\n\ntype PopUnion&lt;U&gt; = UnionToOvlds&lt;U&gt; extends (a: infer A) =&gt; void ? A : never;\n\ntype UnionConcat&lt;U extends string, Sep extends string&gt; = PopUnion&lt;U&gt; extends infer SELF\n    ? SELF extends string\n        ? Exclude&lt;U, SELF&gt; extends never\n            ? SELF\n            :\n                  | `${UnionConcat&lt;Exclude&lt;U, SELF&gt;, Sep&gt;}${Sep}${SELF}`\n                  | UnionConcat&lt;Exclude&lt;U, SELF&gt;, Sep&gt;\n                  | SELF\n        : never\n    : never;\n</code></pre>\n"}], "owner": {"reputation": 1335, "user_id": 2779533, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79185f7299489ac6b12e5e53134d2b2d?s=128&d=identicon&r=PG", "display_name": "Ari", "link": "https://stackoverflow.com/users/2779533/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 59472130, "answer_count": 3, "score": 1, "last_activity_date": 1607172811, "creation_date": 1577209218, "last_edit_date": 1577214542, "question_id": 59471947, "link": "https://stackoverflow.com/questions/59471947/define-a-typescript-string-type-of-comma-separated-union-types", "title": "Define a Typescript string type of comma separated union types?", "body": "<p>How do you create a Typescript string type, which includes values from a union type <strong><em>AND</em></strong> is separated by commas?</p>\n\n<p>I think this doesn't exist, but I'm asking anyway...</p>\n\n<pre><code>type AcceptableVal = 'cool' | 'wow' | 'biz' | 'sweet' | 'yowza' | 'fantastic';\ntype Amaze = // how do you define this?;\n\nconst dabes: Amaze = 'cool,wow';\nconst fancy: Amaze = 'biz,wow,fantastic';\nconst hachiMachi: Amaze = 'yowza,biz,sweet';\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "jestjs", "webstorm", "ts-jest"], "comments": [{"owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "edited": false, "score": 0, "creation_date": 1577213677, "post_id": 59471866, "comment_id": 105123500, "body": "just tried this in Webstorm 2019.3.1 - hitting a breakpoints takes about a second... I&#39;m using <b>Jest</b> run configuration with <b>All Tests</b> scope. What Webstorm build is it, what Node.js version is used, what OS are you on?"}, {"owner": {"reputation": 1949, "user_id": 8467909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4O0CDuIKrcY/AAAAAAAAAAI/AAAAAAAAAAk/zVf2aTbzfnw/photo.jpg?sz=128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/8467909/john-smith"}, "reply_to_user": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "edited": false, "score": 0, "creation_date": 1577214283, "post_id": 59471866, "comment_id": 105123686, "body": "@lena <code>node --version</code> reports <code>v13.2.0</code>. The system is <code>Microsoft Windows 10 Pro Version 10.0.18363 Build 18363</code>. WebStorm version is <code>2019.3.1</code>, build <code>#WS-193.5662.54</code>. An all-tests Jest configuration has the same issue for me."}, {"owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "edited": false, "score": 0, "creation_date": 1577215956, "post_id": 59471866, "comment_id": 105124080, "body": "can&#39;t reproduce using the same OS, Node.js and IDE build. must be smth specific to your setup. Do you have exception breakpoints enabled in <b>Run | View Breakpoints</b>?"}, {"owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "edited": false, "score": 0, "creation_date": 1577216039, "post_id": 59471866, "comment_id": 105124098, "body": "please enable <code>js.debugger.wip.log</code> in <i>Registry</i> (<b>Help | Find action</b>, type <code>Registry...</code> to locate it) by setting it to path to some temporary file like <code>C:&#47;tmp&#47;wip.json</code>, recreate the issue and create a support ticket, providing this log along with your log folder zipped (<b>Help &gt; Compress Logs and Show in Explorer</b>). Note that the debug log will be re-written on each debugger start, so it&#39;s important to copy the log right after reproducing the issue"}, {"owner": {"reputation": 1949, "user_id": 8467909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4O0CDuIKrcY/AAAAAAAAAAI/AAAAAAAAAAk/zVf2aTbzfnw/photo.jpg?sz=128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/8467909/john-smith"}, "reply_to_user": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "edited": false, "score": 0, "creation_date": 1577872770, "post_id": 59471866, "comment_id": 105271673, "body": "@lena For future reference - the prolonged wait happens only if &quot;Toggle Break on Exception&quot; is enabled. I will post the log later as well."}], "answers": [{"tags": [], "owner": {"reputation": 72406, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "is_accepted": true, "score": 1, "last_activity_date": 1577881383, "creation_date": 1577881383, "answer_id": 59552471, "question_id": 59471866, "link": "https://stackoverflow.com/questions/59471866/webstorm-debugging-a-jest-test-abnormal-amount-of-time-before-the-breakpoint/59552471#59552471", "title": "WebStorm - debugging a Jest test - abnormal amount of time before the breakpoint is hit", "body": "<p>It's a known issue with <em>JavaScript Exception Breakpoints</em> enabled, please follow <a href=\"https://youtrack.jetbrains.com/issue/WEB-28989\" rel=\"nofollow noreferrer\">WEB-28989</a> for updates</p>\n"}], "owner": {"reputation": 1949, "user_id": 8467909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4O0CDuIKrcY/AAAAAAAAAAI/AAAAAAAAAAk/zVf2aTbzfnw/photo.jpg?sz=128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/8467909/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 59552471, "answer_count": 1, "score": 0, "last_activity_date": 1577881383, "creation_date": 1577208643, "last_edit_date": 1577215329, "question_id": 59471866, "link": "https://stackoverflow.com/questions/59471866/webstorm-debugging-a-jest-test-abnormal-amount-of-time-before-the-breakpoint", "title": "WebStorm - debugging a Jest test - abnormal amount of time before the breakpoint is hit", "body": "<p>I've got a typescript + jest (with ts-loader) set up.</p>\n\n<p>Hitting the breakpoint in this sample test (the only test present in the project) takes a couple of minutes. This happens only in WebStorm. In VSCode with this configuration</p>\n\n<pre><code> \"configurations\": [\n        {\n            \"name\": \"Debug Jest Tests\",\n            \"type\": \"node\",\n            \"request\": \"launch\",\n            \"args\": [\n                \"${workspaceRoot}/node_modules/jest/bin/jest.js\",\n                \"--runInBand\"\n            ],\n            \"console\": \"integratedTerminal\",\n            \"internalConsoleOptions\": \"neverOpen\"\n        }\n    ]\n</code></pre>\n\n<p>it was almost instant.</p>\n\n<p>Debugging Jest tests in the CRA environment works just fine, even in WebStorm.</p>\n\n<p>The test:</p>\n\n<pre><code>describe('Stuff', function () {\n    it('should', function () {\n        expect(true).toBe(true); // breakpoint\n    });\n});\n</code></pre>\n\n<p>The repo:\n<a href=\"https://github.com/vlopp/jest-webstorm-testing\" rel=\"nofollow noreferrer\">https://github.com/vlopp/jest-webstorm-testing</a></p>\n\n<p>Please tell me what's wrong, and how I can minimize the abnormal time that WebStorm takes to debug tests.</p>\n\n<h1>UPDATE</h1>\n\n<p>Throwing out ts-jest doesn't seem to fix the issue.</p>\n"}, {"tags": ["node.js", "postgresql", "typescript", "sequelize.js", "nestjs"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8721438, "user_type": "registered", "profile_image": "https://graph.facebook.com/904284183014138/picture?type=large", "display_name": "Andres Esquivel", "link": "https://stackoverflow.com/users/8721438/andres-esquivel"}, "edited": false, "score": 0, "creation_date": 1577381912, "post_id": 59471628, "comment_id": 105157586, "body": "Greetings. I put you in context so that you understand me better. I am using the findAll to obtain all the data of my model but I require them in descending order, for this I use the order as you can see in the query that I place. Now to prove that everything is working correctly, create a seeder that records 100 records, since the next step is to paginate the results."}, {"owner": {"reputation": 1, "user_id": 8721438, "user_type": "registered", "profile_image": "https://graph.facebook.com/904284183014138/picture?type=large", "display_name": "Andres Esquivel", "link": "https://stackoverflow.com/users/8721438/andres-esquivel"}, "edited": false, "score": 0, "creation_date": 1577381932, "post_id": 59471628, "comment_id": 105157592, "body": "But the problem is that it always brings me a different order and when I configure it to show me the query that sequelize generates me and I use this in postgresql it brings me the data correctly. The image that I place shows the result of the query that generates sequelize but at the moment that the json returns it always brings me messy, the funny thing is that if I order it for another attribute that does not happen."}], "tags": [], "owner": {"reputation": 59, "user_id": 11700909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3795f0bf3f91c617d48512c31f6aa2c?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik Ashokkumar", "link": "https://stackoverflow.com/users/11700909/karthik-ashokkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577206747, "creation_date": 1577206747, "answer_id": 59471628, "question_id": 59471358, "link": "https://stackoverflow.com/questions/59471358/how-sorting-according-to-created-at-in-sequelize/59471628#59471628", "title": "How Sorting according to created_at in sequelize?", "body": "<p>The image which you linked returns the data in descending order with respect to date and time right? If not can you describe a bit more about your issue?</p>\n\n<p><a href=\"https://i.stack.imgur.com/pjqq3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pjqq3.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 8721438, "user_type": "registered", "profile_image": "https://graph.facebook.com/904284183014138/picture?type=large", "display_name": "Andres Esquivel", "link": "https://stackoverflow.com/users/8721438/andres-esquivel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577238606, "creation_date": 1577204754, "last_edit_date": 1577238606, "question_id": 59471358, "link": "https://stackoverflow.com/questions/59471358/how-sorting-according-to-created-at-in-sequelize", "title": "How Sorting according to created_at in sequelize?", "body": "<p>I am trying to make an order based on the creation date to use the created_in my model but every time I make a query with the FindAll this brings me the messy data. I made a seeder to fill my database and perform the respect tests and since they have all been created the same date always brings me the messy data even though I am placing the order with descending value. I can notice that he orders me based on the date but does not take the time of the field, so he always brings me in a different order. The funny thing is that I printed the query that generates copy and paste in pgadmin 4 and I always get the same result so I intuited that the mess is not postgres but in dry itself.</p>\n\n<p>Query: </p>\n\n<pre><code>const result = await this.contratoPignoraticio.findAll({\n    include: [{\n        model: Persona,\n        include: [{\n            model: PersonaTieneDocumentos,\n            include: [{\n                model: Documentos,\n            }]\n        }, {\n            model: PersonaTieneRol,\n            include: [{\n                model: Oficina,\n            }, {\n                model: Rol,\n                where: {\n                    nombre: 'cliente',\n                },\n            }]\n        }]\n    }, {\n        model: TipoPago,\n    }, {\n        model: Pagos,\n    }],\n    order: [\n        ['created_at', 'DESC'],\n    ]\n});\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qHiA1.png\" rel=\"nofollow noreferrer\">the result of a select * from the table;</a></p>\n\n<p>Stack:</p>\n\n<ol>\n<li>NestJS - 6.10.12</li>\n<li>Sequelize Typescript - 0.6.11</li>\n<li>Postgresql 11</li>\n<li>pg - 7.12.1</li>\n</ol>\n"}, {"tags": ["html", "css", "angular", "typescript"], "comments": [{"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577219636, "post_id": 59471229, "comment_id": 105124788, "body": "Is the stackblitz supposed to show the problematic case? When I run it, the div does not shift out of the image."}, {"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "reply_to_user": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1577234886, "post_id": 59471229, "comment_id": 105127099, "body": "@ConnorsFan  I already managed to solve this problem. The main problem is that I can&#39;t fix the div in the lower right corner on all images having these different widths. Example if uncomment in html and test with this image, the div goes to the center of the image, I want this div to be in the lower right corner, in all images"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577206255, "post_id": 59471492, "comment_id": 105121618, "body": "It worked, but is there a way to position the div in the lower right corner on all images, even though they have different widths? If you uncomment the other image in html, you can see that the div is in the center. Is there a way to always position it in the same place? (bottom right corner)"}, {"owner": {"reputation": 1721, "user_id": 7561063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e85f88d7948998c821283bc67082c9?s=128&d=identicon&r=PG&f=1", "display_name": "Allabakash", "link": "https://stackoverflow.com/users/7561063/allabakash"}, "reply_to_user": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "edited": false, "score": 0, "creation_date": 1577207228, "post_id": 59471492, "comment_id": 105121848, "body": "may be you need to make of use responsive frameworks like boostrap or material css. otherwise you need to write media queries to handle it. you can check this - <a href=\"https://www.w3schools.com/css/css_rwd_mediaqueries.asp\" rel=\"nofollow noreferrer\">w3schools.com/css/css_rwd_mediaqueries.asp</a>.  But handling this with different image widths is kind of hacky.  try to have images with same width."}], "tags": [], "owner": {"reputation": 1721, "user_id": 7561063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e85f88d7948998c821283bc67082c9?s=128&d=identicon&r=PG&f=1", "display_name": "Allabakash", "link": "https://stackoverflow.com/users/7561063/allabakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1577205734, "creation_date": 1577205734, "answer_id": 59471492, "question_id": 59471229, "link": "https://stackoverflow.com/questions/59471229/position-div-in-the-same-location-on-images-with-different-widths/59471492#59471492", "title": "Position Div in the same location on images with different widths", "body": "<p>you can make of <strong>flex</strong> and <strong>max-width</strong> for making it responsive.</p>\n\n<pre><code>  .boxImage {\n        flex: 1 1 100%;\n        cursor: pointer;\n        position: absolute;\n        background-color: white;\n        background-position: 13px 13px;\n        background-repeat: no-repeat;\n        height: 50px;\n        width: 44%;\n        border-radius: 8px;\n        opacity: 1;\n        top: 91%;\n        left: 43%;\n        max-width: 250px;\n      }\n</code></pre>\n\n<p>Demo - <a href=\"https://stackblitz.com/edit/angular-rkz7zh\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-rkz7zh</a></p>\n"}], "owner": {"reputation": 283, "user_id": 12488115, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_-nFYKUSqxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcE43qfXETMxRrDUmLUqfqvEyLREA/photo.jpg?sz=128", "display_name": "Paul sk", "link": "https://stackoverflow.com/users/12488115/paul-sk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577205734, "creation_date": 1577203861, "question_id": 59471229, "link": "https://stackoverflow.com/questions/59471229/position-div-in-the-same-location-on-images-with-different-widths", "title": "Position Div in the same location on images with different widths", "body": "<p>There is a class where I want to place images. Within this class I introduce an image and within the image I intend to introduce a div.</p>\n\n<p>When the image occupies the whole class, the div is well positioned, but when the image does not occupy the full width, the div shifts and does not behave responsively :(</p>\n\n<p>Does anyone know how I can solve this?</p>\n\n<p><strong>Image Problem</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/qOQC4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qOQC4.png\" alt=\"Image\"></a></p>\n\n<p>Image not occupying width ... div shifts out of image.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-qaeato?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">My code ---> Stackblitz</a></p>\n\n<p>You can see the code used and test with different width image.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code> &lt;div class=\"drop\" &gt;\n          &lt;div class=\"abc\"&gt;\n            &lt;!-- &lt;img class=\"img-fluid Images\" src=\"https://i.ibb.co/mqnwwKB/Screenshot-72.jpg\"&gt; --&gt;\n            &lt;img class=\"img-fluid Images\" src=\"https://i.ibb.co/3p3D4h6/dmitry-bayer-276d-F1-RG67-Q-unsplash.jpg\"&gt;\n        &lt;div class=\"row boxImage\"&gt;\n            &lt;div class=\"row divBtn\"&gt;\n                &lt;a class=\"toggle-one\"&gt;\n                    &lt;span class=\"nav-link btnZ\"&gt;&lt;/span&gt;\n                  &lt;/a&gt;\n                &lt;a class=\"toggle-two\"&gt;\n                  &lt;span class=\"nav-link btnT\"&gt;&lt;/span&gt;\n                &lt;/a&gt;\n                &lt;a class=\"toggle-three\"&gt;\n                  &lt;span class=\"nav-link btnR\"&gt;&lt;/span&gt;\n                &lt;/a&gt;\n                &lt;a class=\"toggle-four\"&gt;\n                  &lt;span class=\"nav-link btnP\"&gt;&lt;/span&gt;\n                &lt;/a&gt;\n             &lt;/div&gt;\n          &lt;ul class=\"list-inline rating-list\" *ngFor=\"let star of stars\" style=\"display: inline-block\"&gt;\n            &lt;li (click)=\"countStar(star)\" [ngClass]=\"{'selected': (star &lt;= selectedValue)}\"&gt;\n              &lt;i class=\"fa fa-star\"&gt;&lt;/i&gt;\n            &lt;/li&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p><strong>CSS</strong></p>\n\n<pre><code>.drop {\n    margin-left: 25px;\n    width: 90%;\n  height: 696px;\n    /* border: 3px dashed #DADFE3; */\n    border-radius: 15px;\n    overflow: hidden;\n    text-align: center;\n    background: white;\n    /* margin: auto; */\n    position: relative;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n}\n\n      .boxImage{\n        cursor: pointer;\n        position: absolute;\n        background-color: white;\n        background-position: 13px 13px;\n        background-repeat: no-repeat;\n        height: 50px;\n        width: 44%;\n        border-radius: 8px;\n        opacity: 1;\n        top: 91%;\n        left: 43%;\n      }\n\n   .abc {\n   /* width: 100% !important; */\n    height: 100%;\n}\n\n\n\n.abc img {\n    height: 100%;\n    max-width: 100%;\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 1, "creation_date": 1577213704, "post_id": 59471154, "comment_id": 105123510, "body": "Since you already accepted an answer i should mention that there  a workaround exists. Which includes creating a pipe. That way you can use enums in views without polluting your component. See <a href=\"https://stackoverflow.com/a/59447550/12354911\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": false, "score": 2, "last_activity_date": 1577203958, "creation_date": 1577203958, "answer_id": 59471246, "question_id": 59471154, "link": "https://stackoverflow.com/questions/59471154/angular-string-enum-as-param-how-to-call-in-the-view/59471246#59471246", "title": "Angular string enum as param how to call in the view", "body": "<p>Just create a property in your Component Class:</p>\n\n<pre><code>import { Language } from './path-to-enum-file';\n\n...\n\nlanguageEnum = Language\n\nsetLang(lang: Language.en | Language.de) {\n  const curent = Language[lang]\n}\n</code></pre>\n\n<p>And then in the template try doing this:</p>\n\n<pre><code>&lt;button (click)=\"setLang(languageEnum.en)\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": false, "score": 1, "last_activity_date": 1577203994, "creation_date": 1577203994, "answer_id": 59471252, "question_id": 59471154, "link": "https://stackoverflow.com/questions/59471154/angular-string-enum-as-param-how-to-call-in-the-view/59471252#59471252", "title": "Angular string enum as param how to call in the view", "body": "<p>Expose the enum as a property of your component:</p>\n\n<pre><code>current: Language;\nLanguage = Language;\n\nsetLang(language: Language) {\n  this.current = language;\n}\n</code></pre>\n\n<p>and in the view:</p>\n\n<pre><code>(click)=\"setLang(Language.en)\"\n</code></pre>\n\n<p>Alternative: use a union type rather than en enum:</p>\n\n<pre><code>type Language = 'en' | 'de';\n[...]\ncurrent: Language;\n\nsetLang(language: Language) {\n  this.current = language;\n}\n</code></pre>\n\n<p>and in the view:</p>\n\n<pre><code>(click)=\"setLang('en')\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310, "user_id": 9674146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dda8420960adb555dc8ba9cd02c1602?s=128&d=identicon&r=PG&f=1", "display_name": "ic_paty", "link": "https://stackoverflow.com/users/9674146/ic-paty"}, "is_accepted": true, "score": 1, "last_activity_date": 1577204048, "creation_date": 1577204048, "answer_id": 59471262, "question_id": 59471154, "link": "https://stackoverflow.com/questions/59471154/angular-string-enum-as-param-how-to-call-in-the-view/59471262#59471262", "title": "Angular string enum as param how to call in the view", "body": "<p>You can do something like that: </p>\n\n<p><strong>Comonent TS</strong></p>\n\n<pre><code>import { Component } from '@angular/core';\n\nexport enum Language {\n  de = 'de',\n  en = 'en'\n}\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n  // Store a reference to the enum\n  language = Language;\n\n  setLang(lang: Language) {\n    const current = Language[lang];\n    console.log(current);\n  }\n\n}\n</code></pre>\n\n<p><strong>HTML file</strong></p>\n\n<pre><code>&lt;button (click)=\"setLang(language.en)\"&gt;click&lt;/button&gt;\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 730, "user_id": 3887366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181fa0fa7071b01b4910565eb5ffc0ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3887366", "link": "https://stackoverflow.com/users/3887366/user3887366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 59471262, "answer_count": 3, "score": 1, "last_activity_date": 1577213112, "creation_date": 1577203376, "last_edit_date": 1577213112, "question_id": 59471154, "link": "https://stackoverflow.com/questions/59471154/angular-string-enum-as-param-how-to-call-in-the-view", "title": "Angular string enum as param how to call in the view", "body": "<p>I've got a string enum and a method in my component:</p>\n\n<pre><code>export enum Language {\n    de = 'de',\n    en = 'en'\n}\n\nsetLang(lang: Language.en | Language.de) {\n    const curent = Language[lang]\n}\n</code></pre>\n\n<p>Than I want to call it in the view:</p>\n\n<pre><code>&lt;button (click)=\"setLang('en')\"&gt;\n</code></pre>\n\n<p>but when I run ng build --prod I've got this error</p>\n\n<p><strong>Argument of type '\"en\"' is not assignable to parameter of type 'Language'.</strong></p>\n\n<p>I know if I should call in the component it should be</p>\n\n<p>setLang( Language.en) but</p>\n\n<p>how can I call setLang in the view?</p>\n\n<h2>UPDATE</h2>\n\n<p>All in all I don't like very much passing\na reference of my enum to a property class\nso may be this could be a better approach</p>\n\n<pre><code>type LangKeys = keyof typeof  Language;\n\nfunction foo(lang:LangKeys) {\n    const curent = Language[lang]\n}\n\nfoo('en')\n</code></pre>\n"}, {"tags": ["html", "css", "angular", "typescript", "masonry"], "answers": [{"tags": [], "owner": {"reputation": 5958, "user_id": 6022243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YUkDj.jpg?s=128&g=1", "display_name": "Roy", "link": "https://stackoverflow.com/users/6022243/roy"}, "is_accepted": true, "score": 4, "last_activity_date": 1577202533, "creation_date": 1577202533, "answer_id": 59471025, "question_id": 59470880, "link": "https://stackoverflow.com/questions/59470880/responsive-div-buttons-inside-image/59471025#59471025", "title": "Responsive div buttons inside Image", "body": "<p>The main problem to solve here is to align the icons next to each other, <em>without</em> using <code>margin-left</code> or <code>float: left;</code>. You can do this with <code>display: flex;</code> and <code>justify-content: space-between;</code> to the parent class (<code>.mdc-image-list__label</code>). This makes sure that each item gets displayed next to each other <strong>and</strong> the <code>space-between</code> ensures that there is equal space between each element. Read more about flexbox at <a href=\"https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox\" rel=\"nofollow noreferrer\">MDN</a>. </p>\n\n<p>Updated <a href=\"https://stackblitz.com/edit/angular-ng9ixj?file=src%2Fapp%2Fapp.component.scss\" rel=\"nofollow noreferrer\">StackBlitz</a> for the adjustments.</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.Pin{\n  margin-top: 8px;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n}\n\n.Inbox{\n  width: 30px;\n  height: 30px;\n  margin-top: 8px;\n  cursor: pointer;\n}\n\n.Chat{\n  width: 30px;\n  margin-top: 10px;\n  height: 27px;\n  cursor: pointer;\n}\n\n.Task{\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  margin-top: 8px;\n}\n\n// Adjusting this class\n.mdc-image-list__label {\n  display: flex;\n  justify-content: space-between;\n  padding: 0 10px;\n  box-sizing: border-box; // To make sure it encapsulates the padding styling\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4708162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yOmyR.jpg?s=128&g=1", "display_name": "Govind Sah", "link": "https://stackoverflow.com/users/4708162/govind-sah"}, "is_accepted": false, "score": 1, "last_activity_date": 1577202739, "creation_date": 1577202739, "answer_id": 59471058, "question_id": 59470880, "link": "https://stackoverflow.com/questions/59470880/responsive-div-buttons-inside-image/59471058#59471058", "title": "Responsive div buttons inside Image", "body": "<p>Individual class to each image is unwarranted, so you can remove it and it's related css as well. The below css will fix your issue, it's more generic and better.</p>\n\n<pre><code>.mdc-image-list__supporting a {\n  width: 25%;\n  display: inline-block;\n  text-align: center;\n}\n\n.mdc-image-list__supporting a img {\n   width: 25px;\n   height: 25px;\n   cursor: pointer;\n   margin: 10px 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 12382961, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvhQVhMOLPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYZ7kEDZZaXaSDnUupiqwox6dwVA/photo.jpg?sz=128", "display_name": "Mike Landers", "link": "https://stackoverflow.com/users/12382961/mike-landers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59471025, "answer_count": 2, "score": 2, "last_activity_date": 1577235027, "creation_date": 1577201729, "last_edit_date": 1577235027, "question_id": 59470880, "link": "https://stackoverflow.com/questions/59470880/responsive-div-buttons-inside-image", "title": "Responsive div buttons inside Image", "body": "<p>I have a gallery of masonry images and I want to place on each image a div with buttons.</p>\n\n<p>My problem is that the div is not responsive and when I reduce the screen some buttons disappear rather than slow down and follow the movement of the screen.</p>\n\n<p>I intend that by decreasing the screen the buttons will decrease and still appear all within the div.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code> &lt;ul class=\"mdc-image-list mdc-image-list--masonry masonry-image-list second\"&gt;\n      &lt;li class=\"mdc-image-list__item\" *ngFor=\"let image of list; let  i = index;\"&gt;\n          &lt;img [src]=\"image\" class=\"mdc-image-list__image\"&gt;\n        &lt;div class=\"mdc-image-list--with-text-protection\"&gt;\n          &lt;div class=\"mdc-image-list__supporting\"&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["javascript", "json", "typescript", "object", "stringify"], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 10106073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZcsP.jpg?s=128&g=1", "display_name": "jocoders", "link": "https://stackoverflow.com/users/10106073/jocoders"}, "edited": false, "score": 0, "creation_date": 1577207797, "post_id": 59470613, "comment_id": 105122015, "body": "But i can not override like this: JSON.stringify(decycle(yourJson), because i don&#39;t know yourJson argument, only if like this: JSON.stringify = function(value) {   return JSON.stringify(decycle(value)); }, but i get the error again: RangeError: Maximum call stack size exceeded"}], "tags": [], "owner": {"reputation": 788, "user_id": 3642410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zvDmw.jpg?s=128&g=1", "display_name": "Karim", "link": "https://stackoverflow.com/users/3642410/karim"}, "is_accepted": false, "score": 1, "last_activity_date": 1577204380, "last_edit_date": 1577204380, "creation_date": 1577200079, "answer_id": 59470613, "question_id": 59470461, "link": "https://stackoverflow.com/questions/59470461/how-to-override-json-stringify-method-not-in-the-custom-call-in-the-json-class/59470613#59470613", "title": "How to override JSON.stringify method, NOT IN THE CUSTOM CALL, in the JSON class of the TypeScript project?", "body": "<p>Your method will not only delete cyclic references but also any seen objects, try using this:</p>\n\n<pre><code>function decycle(obj, stack = []) {\n    if (!obj || typeof obj !== 'object')\n        return obj;\n\n    if (stack.includes(obj))\n        return null;\n\n    let s = stack.concat([obj]);\n\n    return Array.isArray(obj)\n        ? obj.map(x =&gt; decycle(x, s))\n        : Object.fromEntries(\n            Object.entries(obj)\n                .map(([k, v]) =&gt; [k, decycle(v, s)]));\n}\n</code></pre>\n\n<p>And you just call it like this <code>JSON.stringify(decycle(yourJson))</code>.</p>\n\n<p>As for this:</p>\n\n<blockquote>\n  <p>Maximum call stack size exceeded</p>\n</blockquote>\n\n<p>You have a recursive function that calls itself with no exit condition.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14716727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1b967d3f829d0700ecf2aca74c88213?s=128&d=identicon&r=PG", "display_name": "Simax77", "link": "https://stackoverflow.com/users/14716727/simax77"}, "is_accepted": false, "score": 1, "last_activity_date": 1606448692, "last_edit_date": 1606448692, "creation_date": 1606447648, "answer_id": 65031729, "question_id": 59470461, "link": "https://stackoverflow.com/questions/59470461/how-to-override-json-stringify-method-not-in-the-custom-call-in-the-json-class/65031729#65031729", "title": "How to override JSON.stringify method, NOT IN THE CUSTOM CALL, in the JSON class of the TypeScript project?", "body": "<p>Consider using json-stringify-safe</p>\n<pre><code>const {getSerialize} = require('json-stringify-safe');\n\nconst stringifyCore = JSON.stringify;\nJSON.stringify = function (obj, replacer, spaces, cycleReplacer) {\n    return stringifyCore(obj, getSerialize(replacer, cycleReplacer), spaces);\n};\n</code></pre>\n<p>this should fix your Maximum call stask exceeded error.</p>\n"}], "owner": {"reputation": 743, "user_id": 10106073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZcsP.jpg?s=128&g=1", "display_name": "jocoders", "link": "https://stackoverflow.com/users/10106073/jocoders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1606448692, "creation_date": 1577199191, "last_edit_date": 1577199536, "question_id": 59470461, "link": "https://stackoverflow.com/questions/59470461/how-to-override-json-stringify-method-not-in-the-custom-call-in-the-json-class", "title": "How to override JSON.stringify method, NOT IN THE CUSTOM CALL, in the JSON class of the TypeScript project?", "body": "<p>I have React Native and TypeScript app. Every week get the error from Fabric: JSON.stringify cannot serialize cyclic structures. There is no scenario of the error. And i have a lot of third part libraries that uses JSON.stringify. It means it is not possible put every where a custom method. Therefore i can not catch this error. There is a boot file in the root of my project where i can override all classes. I made a helper that catchs serialize cyclic structures:</p>\n\n<pre><code>const getCircularReplacer = () =&gt; {\n  const seen = new WeakSet();\n\n  return (key: any, value: any) =&gt; {\n    if (typeof value === 'object' &amp;&amp; value !== null) {\n      if (seen.has(value)) {\n        return jsonStringify.circularReferenceReplacement;\n      }\n      seen.add(value);\n    }\n\n    return value;\n  };\n};\n\ninterface IJsonStringify {\n  (value: any, replacer?: (this: any, key: string, value: any) =&gt; any, space?: string | number): string;\n  circularReferenceReplacement?: any;\n}\n\nexport const jsonStringify: IJsonStringify = (value: any, replacer?: (this: any, key: string, value: any) =&gt; any, space?: string | number): string =&gt; {\n  return JSON.stringify(value, replacer || getCircularReplacer(), space);\n};\n</code></pre>\n\n<p>When i try to override my JSON.stringify in my boot file like this:</p>\n\n<pre><code>JSON.stringify = (value: any) =&gt; {\n  return jsonStringify(value);\n};\n</code></pre>\n\n<p>I get this error: Maximum call stack size exceeded. Please can somebody write what I'm doing wrong or recommend how can i override my JSON class according my helper.</p>\n"}, {"tags": ["angular", "typescript", "unit-testing", "karma-jasmine", "tslint"], "comments": [{"owner": {"reputation": 154, "user_id": 8913730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_NXGvFAfMyw/AAAAAAAAAAI/AAAAAAAAABs/v5O4IggSXX8/photo.jpg?sz=128", "display_name": "Mattstir", "link": "https://stackoverflow.com/users/8913730/mattstir"}, "edited": false, "score": 0, "creation_date": 1580108294, "post_id": 59470300, "comment_id": 105974969, "body": "Does it  behave the same if you run it with <code>karma start</code>?"}, {"owner": {"reputation": 3492, "user_id": 1077003, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/029647b8a3ce683fada0f1e6a0106936?s=128&d=identicon&r=PG", "display_name": "Ian Jamieson", "link": "https://stackoverflow.com/users/1077003/ian-jamieson"}, "reply_to_user": {"reputation": 154, "user_id": 8913730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_NXGvFAfMyw/AAAAAAAAAAI/AAAAAAAAABs/v5O4IggSXX8/photo.jpg?sz=128", "display_name": "Mattstir", "link": "https://stackoverflow.com/users/8913730/mattstir"}, "edited": false, "score": 0, "creation_date": 1580227053, "post_id": 59470300, "comment_id": 106024435, "body": "I get <code>28 01 2020 08:56:56.615:ERROR [karma-server]: Server start failed on port 9876: Error: The &#39;@angular-devkit&#47;build-angular&#47;plugins&#47;karma&#39; karma plugin is meant to be used from within Angular CLI and will not work correctly outside of it.</code> when trying to run with <code>karma start</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3492, "user_id": 1077003, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/029647b8a3ce683fada0f1e6a0106936?s=128&d=identicon&r=PG", "display_name": "Ian Jamieson", "link": "https://stackoverflow.com/users/1077003/ian-jamieson"}, "edited": false, "score": 0, "creation_date": 1582063669, "post_id": 60290081, "comment_id": 106646176, "body": "Sorry, this is occurring on any linting errors. I want to ignore any linting errors and allow tests to still run but then still notify me of the linting errors. So effectively I would want <code>noUnusedLocals</code> to be set to something like <code>warn</code> rather than <code>false</code>. Setting to <code>false</code> would allow me to run tests but then I wouldn&#39;t see that error"}, {"owner": {"reputation": 12611, "user_id": 491265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AJGd6.jpg?s=128&g=1", "display_name": "kemsky", "link": "https://stackoverflow.com/users/491265/kemsky"}, "reply_to_user": {"reputation": 3492, "user_id": 1077003, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/029647b8a3ce683fada0f1e6a0106936?s=128&d=identicon&r=PG", "display_name": "Ian Jamieson", "link": "https://stackoverflow.com/users/1077003/ian-jamieson"}, "edited": false, "score": 2, "creation_date": 1582064692, "post_id": 60290081, "comment_id": 106646523, "body": "It&#39;s compiler error and you will have to turn off all of them. Your IDE will most probably pick <code>tsconfig.json</code> for its language server so you will still see all errors in editor."}], "tags": [], "owner": {"reputation": 12611, "user_id": 491265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AJGd6.jpg?s=128&g=1", "display_name": "kemsky", "link": "https://stackoverflow.com/users/491265/kemsky"}, "is_accepted": true, "score": 3, "last_activity_date": 1582063388, "creation_date": 1582063388, "answer_id": 60290081, "question_id": 59470300, "link": "https://stackoverflow.com/questions/59470300/ng-test-requires-me-to-fix-all-linting-before-running-any-unit-tests/60290081#60290081", "title": "ng test requires me to fix all linting before running any unit tests", "body": "<p>This is TypeScript error, it means that <code>noUnusedLocals</code> is set to <code>true</code> in <code>tsconfig.spec.json</code>.</p>\n\n<p>I think you can create inherited config i.e. <code>tsconfig.spec.dev.json</code> (use \"extends\": \"./tsconfig.spec.json\") and override <code>noUnusedLocals</code> value with <code>false</code>. Then you need to add <code>configurations</code> section:</p>\n\n<pre><code>    \"test\": {\n      \"builder\": \"@angular-devkit/build-angular:karma\",\n      \"options\": {\n        \"main\": \"src/test.ts\",\n        \"polyfills\": \"src/polyfills.ts\",\n        \"tsConfig\": \"tsconfig.spec.dev.json\",\n        \"karmaConfig\": \"karma.conf.js\",\n        \"assets\": [\n          \"src/favicon.ico\",\n          \"src/assets\"\n        ],\n        \"styles\": [\n          \"src/styles.css\"\n        ],\n        \"scripts\": []\n      },\n      \"configurations\": {\n        \"production\": {\n          \"tsConfig\": \"tsconfig.spec.json\"\n        }\n      }\n    }\n</code></pre>\n\n<p>Now you can run dev as <code>ng test</code> or prod as <code>ng test --prod</code>.</p>\n"}], "owner": {"reputation": 3492, "user_id": 1077003, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/029647b8a3ce683fada0f1e6a0106936?s=128&d=identicon&r=PG", "display_name": "Ian Jamieson", "link": "https://stackoverflow.com/users/1077003/ian-jamieson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 60290081, "answer_count": 1, "score": 5, "last_activity_date": 1582063388, "creation_date": 1577198301, "question_id": 59470300, "link": "https://stackoverflow.com/questions/59470300/ng-test-requires-me-to-fix-all-linting-before-running-any-unit-tests", "title": "ng test requires me to fix all linting before running any unit tests", "body": "<p>The output of my <code>ng test</code> is as follows:</p>\n\n<pre><code>&gt; ng test\n\n24 12 2019 14:20:07.854:WARN [karma]: No captured browser, open http://localhost:9876/\n24 12 2019 14:20:07.860:INFO [karma-server]: Karma v4.4.1 server started at http://0.0.0.0:9876/\n24 12 2019 14:20:07.860:INFO [launcher]: Launching browsers ChromeNoSandbox with concurrency unlimited\n24 12 2019 14:20:07.865:INFO [launcher]: Starting browser ChromeHeadless\n\napp/shared/forms/templates/templates.component.ts:11:1 - error TS6133: 'MatDialog' is declared but its value is never read.\n\n11 import { MatDialog } from '@angular/material';\n   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n24 12 2019 14:20:11.633:INFO [HeadlessChrome 79.0.3945 (Mac OS X 10.15.2)]: Connected on socket 9OfTSV7nahQakrDOAAAA with id 85821004\nHeadlessChrome 79.0.3945 (Mac OS X 10.15.2): Executed 0 of 0 SUCCESS (0 secs / 0 secs)\nHeadlessChrome 79.0.3945 (Mac OS X 10.15.2): Executed 0 of 0 SUCCESS (0.002 secs / 0 secs)\nTOTAL: 0 SUCCESS\nTOTAL: 0 SUCCESS\n</code></pre>\n\n<p>The issue I am having is that if I have <strong>any</strong> linting errors in my src code, then unit tests will not run, which is extremely inconvenient when I just want to try things here and there for test-driven development. I would much rather just get the warnings for these linting errors and I can fix them all at once.</p>\n\n<p>I am on Angular version, <code>\"@angular/core\": \"8.1.2\"</code> and Karma versions:</p>\n\n<pre><code>\"karma\": \"4.4.1\",\n\"karma-chrome-launcher\": \"3.1.0\",\n\"karma-cli\": \"2.0.0\",\n\"karma-coverage-istanbul-reporter\": \"2.1.1\",\n\"karma-jasmine\": \"2.0.1\",\n\"karma-jasmine-html-reporter\": \"1.4.2\",\n\"karma-junit-reporter\": \"2.0.1\",\n\"karma-verbose-reporter\": \"0.0.6\",\n</code></pre>\n\n<p>On Angular 7 I did not have a problem with this, my unit tests would execute regardless of linting errors. I am not sure what has changed or which configuration I should be checking to stop this from occurring.</p>\n\n<p>The end goal is for unit tests to be able to run regardless of any frequency of linting errors.</p>\n\n<p><code>angular.json</code> contains the configuration for tests:</p>\n\n<pre><code>    \"test\": {\n      \"builder\": \"@angular-devkit/build-angular:karma\",\n      \"options\": {\n        \"main\": \"src/test.ts\",\n        \"karmaConfig\": \"./karma.conf.js\",\n        \"polyfills\": \"src/polyfills.ts\",\n        \"tsConfig\": \"src/tsconfig.spec.json\",\n    ...etc...\n</code></pre>\n\n<p><strong><code>karma.conf</code></strong></p>\n\n<pre><code>// Karma configuration file, see link for more information\n// https://karma-runner.github.io/1.0/config/configuration-file.html\n\nmodule.exports = function (config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', '@angular-devkit/build-angular'],\n    plugins: [\n      require('karma-jasmine'),\n      require('karma-chrome-launcher'),\n      require('karma-jasmine-html-reporter'),\n      require('karma-junit-reporter'),\n      require('karma-coverage-istanbul-reporter'),\n      require('@angular-devkit/build-angular/plugins/karma'),\n      require('karma-verbose-reporter')\n    ],\n    client:{\n      clearContext: false // leave Jasmine Spec Runner output visible in browser\n    },\n    coverageIstanbulReporter: {\n      dir: require('path').join(__dirname, 'coverage'), reports: [ 'html', 'lcovonly' ],\n      fixWebpackSourcePaths: true\n    },\n\n    reporters: config.angularCli &amp;&amp; config.angularCli.codeCoverage ? ['progress', 'coverage-istanbul', 'junit'] : ['progress', 'kjhtml'],\n    port: 9876,\n    colors: true,\n    logLevel: config.LOG_INFO,\n    autoWatch: true,\n    browsers: ['ChromeNoSandbox'],\n    singleRun: false,\n    junitReporter: {\n      outputDir: process.env.JUNIT_REPORT_PATH,\n      outputFile: process.env.JUNIT_REPORT_NAME,\n      useBrowserName: false\n    },\n    customLaunchers: {\n      ChromeNoSandbox: {\n        base: 'ChromeHeadless',\n        flags: ['--no-sandbox']\n      }\n    }\n  });\n};\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1577197154, "post_id": 59469909, "comment_id": 105118957, "body": "Not possible with interfaces, no. Actual classes, yes. Already built in"}, {"owner": {"reputation": 135, "user_id": 12392302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmlcX.png?s=128&g=1", "display_name": "witacur", "link": "https://stackoverflow.com/users/12392302/witacur"}, "reply_to_user": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1577198359, "post_id": 59469909, "comment_id": 105119312, "body": "Annoyingly this is for JSONs so classes aren&#39;t really appropriate :/"}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1577201945, "post_id": 59469909, "comment_id": 105120424, "body": "Often ends up being the case. And Sometimes typescript can require a lot of boilerplate. But I\u2019d say your more appropriate question here is Probably why do you need all these type guards and why don\u2019t you already know what interface you\u2019re dealing with so much. Could the application architecture or data model be improved to not require this?"}, {"owner": {"reputation": 8361, "user_id": 439026, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb050c54b891309ffdd14a0e1fdd5e66?s=128&d=identicon&r=PG", "display_name": "zeh", "link": "https://stackoverflow.com/users/439026/zeh"}, "edited": false, "score": 0, "creation_date": 1577206947, "post_id": 59469909, "comment_id": 105121793, "body": "You have to assume TypeScript types are removed during compilation. So you can&#39;t do that unless it&#39;s indeed an instance of a Class. Instead, you have to check for fields and such (e.g. <code>field in obj</code>) so you can check the actual object."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1577229421, "post_id": 59469909, "comment_id": 105126409, "body": "There are many libraries out there dealing with run-time types/validation/narrowing and this question would quickly become very opinionated. So better narrow down your question to a specific library. Regarding TS, a type guard generator remains out of scope, as said <a href=\"https://github.com/Microsoft/TypeScript/issues/15265\" rel=\"nofollow noreferrer\">here</a>. You can also have a look at the two mentioned alternatives in the issue as starting point."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1577229435, "post_id": 59469909, "comment_id": 105126412, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/33800497/check-if-an-object-implements-an-interface-at-runtime-with-typescript\">Check if an object implements an interface at runtime with TypeScript</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3593, "user_id": 7282573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da183c76c0a1f20d6414b809edd9e455?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas", "link": "https://stackoverflow.com/users/7282573/nicholas"}, "is_accepted": true, "score": 2, "last_activity_date": 1577229694, "creation_date": 1577229694, "answer_id": 59474100, "question_id": 59469909, "link": "https://stackoverflow.com/questions/59469909/type-check-an-object-without-using-type-guarding/59474100#59474100", "title": "Type check an object without using type guarding?", "body": "<p>There's no nice built-in functionality to do this, as was mentioned in the comments. There are a few approaches, but none of them are great.</p>\n\n<hr>\n\n<h2>Write the checks manually</h2>\n\n<p>As you mentioned in your question, you can just write everything manually. I'd do this if you don't have very many interfaces, but it quickly becomes impractical.</p>\n\n<h2>Automatically generate boilerplate</h2>\n\n<p>One approach is automatically generating the boilerplate. This is less boring than writing it yourself, but still has a lot of problems (do you check in the boilerplate? do you include it in some build step?)</p>\n\n<p>This would take a while to write yourself, but there are npm libraries to do this for you. I haven't used any so I won't make recommendations, but I'm sure you could find some.</p>\n\n<h2>Write the interfaces some other way</h2>\n\n<p>Instead of using regular typescript interfaces, you could define them some other way to facilitate automatic checking. There are also many libraries that do this, though again I'll make no recommendations.</p>\n\n<p>It's also practical to do this yourself, if your use case isn't too complicated.</p>\n\n<p>I've put together a simple example that will check one level deep for simple types in an object. It won't work for every case, so if you decide to take this approach yourself make sure to design it to work for the cases you care about.</p>\n\n<pre><code>class Checker&lt;T extends {}&gt; {\n  constructor(public readonly example: T) {}\n  public check(other: {}): other is T {\n    const exampleKeys = new Set(Object.keys(this.example));\n    const otherKeys = new Set(Object.keys(other));\n    if (exampleKeys.size !== otherKeys.size) { return false; }\n    for (const key of exampleKeys) {\n      if (!otherKeys.has(key)) { return false; }\n      if (typeof (other as any)[key] !== typeof (this.example as any)[key]) { return false; }\n    }\n    return true;\n  }\n}\n\nconst bChecker = new Checker({\n  cat: true,\n  name: \"\",\n})\ntype B = typeof bChecker.example;\n\nconst something: {} = {\n  cat: false,\n  name: \"Spot\",\n}\n\nif (bChecker.check(something)) {\n  const b: B = something;\n}\n</code></pre>\n\n<hr>\n\n<p>Overall, there's no perfect approach. However, there are alternatives to writing a bunch of boilerplate yourself.</p>\n"}], "owner": {"reputation": 135, "user_id": 12392302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmlcX.png?s=128&g=1", "display_name": "witacur", "link": "https://stackoverflow.com/users/12392302/witacur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59474100, "answer_count": 1, "score": 1, "last_activity_date": 1577229694, "creation_date": 1577196068, "last_edit_date": 1577196893, "question_id": 59469909, "link": "https://stackoverflow.com/questions/59469909/type-check-an-object-without-using-type-guarding", "title": "Type check an object without using type guarding?", "body": "<p>So I have ( and loads of other types )</p>\n\n<pre><code>export interface A {\n  links: number\n  name: string\n}\n\nexport interface B {\n cat: boolean\n name: string\n}\n</code></pre>\n\n<p>I thought to use</p>\n\n<pre><code>const IsTypeB = (obj: any): obj is B =&gt; {\n  if ((obj as B).cat) {\n    return true\n  }\n  return false\n}\n</code></pre>\n\n<p>which will work but ... (Motivation: I want it to be scalable as I am planning to write type checking functions for each interface. With the above when I add another interface which has a field <code>cat</code> I'll need to add additional checks to IsTypeWhatever functions, which is going to get messy very quickly.)   </p>\n\n<p>So ideally I want something like:</p>\n\n<pre><code>const IsTypeB = (obj: any): obj is B =&gt; {\n  if (obj is type B (sudo code)) {\n    return true\n  }\n  return false\n}\n</code></pre>\n\n<p>where I don't have to query a specific field. Is this possible?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1045, "user_id": 7276310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0df3ffaf6d17b0949900b08c90be1dc?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Shinde", "link": "https://stackoverflow.com/users/7276310/santosh-shinde"}, "edited": false, "score": 0, "creation_date": 1577195625, "post_id": 59469780, "comment_id": 105118470, "body": "Try like this  <code>this.myForm.patchValue({companies:this.product.companies});</code>"}, {"owner": {"reputation": 883, "user_id": 10138657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00773177db161c613ed94bda398a6f23?s=128&d=identicon&r=PG&f=1", "display_name": "Palak Jadav", "link": "https://stackoverflow.com/users/10138657/palak-jadav"}, "edited": false, "score": 0, "creation_date": 1577196081, "post_id": 59469780, "comment_id": 105118628, "body": "try set value inside ngOnChanges() method instead of ngOnInit method"}, {"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1577196800, "post_id": 59469780, "comment_id": 105118834, "body": "I don&#39;t really think whatever you&#39;re trying to do here is going to be scalable enough. That reminds me. What exactly are you trying to do here? Why are you sending the product as a <code>@input</code> property to the child component? Can the child component get the <code>product</code> via a service instead?"}, {"owner": {"reputation": 243, "user_id": 9981417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc628ddfb0f450b693248d373e0fcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Yasha  Gasparyan", "link": "https://stackoverflow.com/users/9981417/yasha-gasparyan"}, "edited": false, "score": 0, "creation_date": 1577197124, "post_id": 59469780, "comment_id": 105118947, "body": "You are getting this error because you haven&#39;t assigned any value to the product field. Assuming this is the root component you don&#39;t need @Input decorator here also."}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577197183, "post_id": 59469780, "comment_id": 105118964, "body": "check this demo base of my answer <a href=\"https://stackblitz.com/edit/angular-ccjffb\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-ccjffb</a>"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577197241, "post_id": 59469780, "comment_id": 105118980, "body": "before you assaing a value to the formArray you have to have an  control base of the values just run a for or will do the job"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577197294, "post_id": 59469780, "comment_id": 105119000, "body": "in case you are using a child component I have create answer base of that you can check it also , hope this will solve your problem"}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577270029, "post_id": 59469780, "comment_id": 105132211, "body": "hi , have you check any of the answers?? \ud83e\udd14\ud83e\udd14"}], "answers": [{"tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": true, "score": 0, "last_activity_date": 1577198709, "last_edit_date": 1592644375, "creation_date": 1577196320, "answer_id": 59469960, "question_id": 59469780, "link": "https://stackoverflow.com/questions/59469780/angular-setvalue-formarrayname/59469960#59469960", "title": "angular - setValue formArrayName", "body": "<p>if you try to set the <code>companies</code> from control the value must be an array and make sure you add new form control base of the array value</p>\n<pre><code>product = {\ncompanies:['company 01' , 'company 02']\n} \n</code></pre>\n<pre class=\"lang-js prettyprint-override\"><code>ngOnInit() {\n  // make sure you have set a default value to product like {companies:[]}\n  for (let p of this.product.companies) {\n    this.addNewCompany();\n  }\n\n  this.myForm.controls['companies'].setValue(this.product.companies);\n}\n</code></pre>\n<blockquote>\n<p>if you use <strong>setValue</strong> method you have to provide a value base of the controls length otherwise will throw an error in case of the array controls length are less or more the array value must be same length as controls length.</p>\n<p><strong>patchValue</strong> don't have this <strong>constraine</strong> about controls length but this mean if you set companies of 10 and you have just one control you only will get the first company and the other will gone so in that case make sure you use setValue or patchValue but make sure you have a controls of length same as the value</p>\n</blockquote>\n<p><a href=\"https://stackblitz.com/edit/angular-ahjfgs\" rel=\"nofollow noreferrer\">demo \ud83d\ude80\ud83d\ude80</a></p>\n"}, {"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577198303, "post_id": 59470266, "comment_id": 105119297, "body": "good answer but still don&#39;t look different from my answer \ud83d\ude05 , the main problem he must has a controls base of the value of the data we need to clarify this \ud83e\udd14\ud83e\udd14"}, {"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "reply_to_user": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1577198726, "post_id": 59470266, "comment_id": 105119402, "body": "I updated my StackBlitz Code to take the <code>product</code> from a <code>DataService</code> instead of using the <code>@Input</code> property. Like I mentioned in <b><a href=\"https://stackoverflow.com/questions/59469780/angular-setvalue-formarrayname/59470266?noredirect=1#comment105118834_59469780\">my comment here</a></b>, there&#39;s no gurantee that the <code>product</code> would be initialized at the time <code>ngOnInit</code> is called on the component. And it could be expensive to write this logic in <code>ngOnChanges</code> as it gets called every time an <code>@Input</code> property changes. Hence the suggestion to get it from the service instead. I&#39;ll update my answer shortly."}], "tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": false, "score": 0, "last_activity_date": 1577198919, "last_edit_date": 1577198919, "creation_date": 1577198045, "answer_id": 59470266, "question_id": 59469780, "link": "https://stackoverflow.com/questions/59469780/angular-setvalue-formarrayname/59470266#59470266", "title": "angular - setValue formArrayName", "body": "<p>You could move the logic of creating the <code>form</code> inside <code>ngOnInit</code>. Something like this:</p>\n\n<pre><code>@Input()\npublic product: Product;\n\nmyForm: FormGroup;\n\nconstructor(private fb: FormBuilder) {}\n\nngOnInit() {\n  this.myForm = this.fb.group({\n    companies: this.fb.array(this.product ? this.product.companies.map(company =&gt; new FormControl(company)) : [])\n  });\n}\n\naddNewCompany() {\n  this.companies.push(new FormControl());\n}\n\ndeleteCompany(i) {\n  this.companies.removeAt(i);\n}\n\nget companies() {\n  return ( &lt; FormArray &gt; this.myForm.get('companies'));\n}\n</code></pre>\n\n<hr>\n\n<p>But there's probably no guarantee that the <code>product</code> <code>@Input</code> property would be set by the time.</p>\n\n<p>So in order to make sure that it is set before you've created the <code>form</code> with <code>companies</code> <code>FormArray</code>, you might want to initialize the <code>product</code> property in it via a service instead.</p>\n\n<p>You'll have to create a <code>DataService</code> that does it for you:</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { Product } from './product.model';\n\n@Injectable()\nexport class DataService {\n\n  product: Product;\n\n  constructor() { }\n\n  setProduct(product) {\n    this.product = product;\n  }\n\n}\n</code></pre>\n\n<p>You could then inject it in the Parent Component to set the <code>product</code> and in the child component to get the product in the <code>ngOnInit</code> lifecycle hook method. Something like this:</p>\n\n<pre><code>myForm: FormGroup;\n\nconstructor(\n  private fb: FormBuilder,\n  private dataService: DataService\n) {}\n\nngOnInit() {\n  this.myForm = this.fb.group({\n    companies: this.fb.array(this.dataService.product ? this.dataService.product.companies.map(company =&gt; new FormControl(company)) : [])\n  });\n}\n\naddNewCompany() {\n  this.companies.push(new FormControl());\n}\n\ndeleteCompany(i) {\n  this.companies.removeAt(i);\n}\n\nget companies() {\n  return ( &lt; FormArray &gt; this.myForm.get('companies'));\n}\n</code></pre>\n\n<blockquote>\n  <p>Here's a <a href=\"https://stackblitz.com/edit/angular-form-array-with-initialized-form-controls?file=src/app/hello.component.ts\" rel=\"nofollow noreferrer\"><strong>Working Sample Demo</strong></a> for your ref.</p>\n</blockquote>\n"}], "owner": {"reputation": 77, "user_id": 3469948, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fce0e82d778e6391e83499f52a51542?s=128&d=identicon&r=PG&f=1", "display_name": "akanzari", "link": "https://stackoverflow.com/users/3469948/akanzari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 59469960, "answer_count": 2, "score": 1, "last_activity_date": 1577198919, "creation_date": 1577195350, "last_edit_date": 1577196618, "question_id": 59469780, "link": "https://stackoverflow.com/questions/59469780/angular-setvalue-formarrayname", "title": "angular - setValue formArrayName", "body": "<p>I have a form that has an array of string, every time i add an element to the list, the problem is that when i use setValue to set values in the array, it displays the below error</p>\n\n<pre><code>&lt;button (click)=\"addNewCompany()\"&gt;Add new Company&lt;/button&gt;&lt;br&gt;&lt;br&gt;\n&lt;form [formGroup]=\"myForm\"&gt;\n    &lt;div formArrayName=\"companies\"&gt;\n        &lt;div *ngFor=\"let comp of getForm(); let i=index&gt;\n            &lt;fieldset&gt;\n                &lt;legend&gt;\n                    &lt;h3&gt;COMPANY {{i+1}}: &lt;/h3&gt;\n                &lt;/legend&gt;\n                &lt;label&gt;Company Name: &lt;/label&gt;\n                &lt;input [formControlName]=\"i\" /&gt;&lt;span&gt;&lt;button (click)=\"deleteCompany(i)\"&gt;Delete Company&lt;/button&gt;&lt;/span&gt;\n            &lt;/fieldset&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;&lt;br&gt;\n  &lt;/form&gt;\n\n\nexport class AppComponent implements OnInit {\n\n  @Input()\n  public product: Product; \n\n  myForm: FormGroup;\n\n  constructor(private fb: FormBuilder) {\n    this.myForm = this.fb.group({\n      companies: this.fb.array([])\n    });\n  }\n\n  ngOnInit() {\n     this.addNewCompany();\n     this.myForm.controls['companies'].setValue(this.product.companies); // error\n  }\n\n  getForm(): any {\n    return this.myForm.get(\"companies\")[\"controls\"];\n  }\n\n  addNewCompany() {\n    const control = &lt;FormArray&gt;this.myForm.get(\"companies\");\n    control.push(this.fb.control(''));\n  }\n\n  deleteCompany(index) {\n    let control = &lt;FormArray&gt;this.myForm.controls.companies;\n    control.removeAt(index);\n  }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>ERROR Error:    There are no form controls registered with this array\n  yet.  If you're using ngModel,   you may want to check next tick (e.g.\n  use setTimeout).</p>\n</blockquote>\n\n<p><a href=\"https://stackblitz.com/edit/angular-gr8ghs\" rel=\"nofollow noreferrer\"><strong>stackblitz</strong></a></p>\n"}, {"tags": ["angular", "typescript", "inheritance", "karma-runner"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1577194835, "post_id": 59469491, "comment_id": 105118203, "body": "try changing <code>isRequired(): IValidationBuilder</code> to <code>isRequired(): this</code>. don&#39;t change the return type in derived classes. Keep using <code>:this</code>. I honestly can&#39;t remember if this is a TypeScript thing or if I&#39;m confusing this with another language."}], "answers": [{"comments": [{"owner": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 1, "creation_date": 1577196022, "post_id": 59469773, "comment_id": 105118605, "body": "I think OP&#39;s intention is to create an api with fluent interface. So he wants to chain validation rules like this : <code>validator.isRequired().maxLength(6).pattern(&#39;Regex&#39;);...</code>"}, {"owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "reply_to_user": {"reputation": 6381, "user_id": 12354911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Sz0V.jpg?s=128&g=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/12354911/eldar"}, "edited": false, "score": 0, "creation_date": 1577196143, "post_id": 59469773, "comment_id": 105118644, "body": "@Eldar right, I figured something like that. The brevity of the code doesn&#39;t make that clear. But for that, he still does not need to pass along a separate builder in the constructor, right?"}, {"owner": {"reputation": 590, "user_id": 1335789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/20ce603ab853be76377b179f66047a62?s=128&d=identicon&r=PG", "display_name": "Johan Aspeling", "link": "https://stackoverflow.com/users/1335789/johan-aspeling"}, "edited": false, "score": 0, "creation_date": 1577196326, "post_id": 59469773, "comment_id": 105118696, "body": "I do see the problem, @PierreDuc you are right. I am trying to create a fluentApi as Eldar said, but I am not returning the correct types.   I also think you are right, I should also extend the base, but in the mean time I did the edited section which results in me doing what I needed."}, {"owner": {"reputation": 590, "user_id": 1335789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/20ce603ab853be76377b179f66047a62?s=128&d=identicon&r=PG", "display_name": "Johan Aspeling", "link": "https://stackoverflow.com/users/1335789/johan-aspeling"}, "edited": false, "score": 0, "creation_date": 1577196826, "post_id": 59469773, "comment_id": 105118844, "body": "There are reasons I cannot extend the ValidatorBase, which I&#39;ll not delve into here. That is why I have to create an instance of the builder with a base builder, that is passed around and doesn&#39;t lose reference. I use it like <code>const validator = new ValidationBuilder(formControl).string.range(lowerRange, upperRange);</code>, where the <code>.string</code> is the correct builder to be used (<code>StringValidationBuilder</code>). We have a bunch of other validators, &#39;string&#39; was just the easiest to use here. broken up to make the builders responsible for their own validations."}], "tags": [], "owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "is_accepted": false, "score": 2, "last_activity_date": 1577195307, "creation_date": 1577195307, "answer_id": 59469773, "question_id": 59469491, "link": "https://stackoverflow.com/questions/59469491/type-delegation-in-typescript/59469773#59469773", "title": "Type delegation in Typescript", "body": "<p>How can it ever be <code>StringValidationBuilder</code>, you are returning a <code>ValidationBuilderBase</code>, because that's what the builder is. And the StringValidationBuilder is not extending it</p>\n\n<p>I believe what you are trying to do, is to to make the <code>StringValidationBuilder</code> extend the <code>ValidationBuilderBase</code>. You can make your life a lot easier by just using the <code>super</code> call:</p>\n\n<pre><code>export class ValidationBuilderBase implements IValidationBuilder {\n    constructor(private controls: any) {}\n\n    public isRequired(): ValidationBuilderBase {\n        return this;\n    }\n}\n\nexport interface IValidationBuilder {\n    isRequired(): IValidationBuilder;\n}\n\nexport class StringValidationBuilder extends ValidationBuilderBase {\n    constructor(controls: any) {\n        super(controls);\n    }\n\n    isRequired(): StringValidationBuilder {\n      return super.isRequired();\n    }\n}\n\nconst validator = new StringValidationBuilder(this.formGroup.controls['test']);\nconst result = validator.isRequired();\n\n// result is now a StringValidationBuilder\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=24&amp;ssc=39&amp;pln=1&amp;pc=1#code/KYDwDg9gTgLgBAYwDYEMDOa4DUVIJYAmKMeEAdgEICueSBwUF6wceAtmEsG8GTJgEkc+IiXLVa9KHADeAKDiLE5NDChUEMaAAowUPADdiLBOTUQkaAFxwUZAJ4BKWQF85CpWCoAjfAlZoAErAAI40UMAE2o42woTEpJQ0dAxMaCzySllwETBUUGRwMAAWeGgA3B6Kbm5yoJCwrHwMAGYoCCxCuPFiSZIMslUBwWF4EVExcF0iCeLJUpW19dDwyOiYAMpqeGQA5nGiiRIp0qAwvASYB7N9J2kZQ6ZkquqaOk-mljZ2ToPZSmgqGAGNoPlALGhHJUsrUsmURuFItEbFt9Htrr1jlI-tlcvlCoDgVAAHTw0KIibQpQ1dxceBGGZaaQAXjgZGAAHc4Kidvtuoc5v0oNoSmViS1oGwAOLgoHEsEQgDaAHJzqplQBdKFyJ6qHLAQFIeCshk9aCkoLksZIqFAA\" rel=\"nofollow noreferrer\">playground</a></p>\n"}], "owner": {"reputation": 590, "user_id": 1335789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/20ce603ab853be76377b179f66047a62?s=128&d=identicon&r=PG", "display_name": "Johan Aspeling", "link": "https://stackoverflow.com/users/1335789/johan-aspeling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577196587, "creation_date": 1577193822, "last_edit_date": 1577196587, "question_id": 59469491, "link": "https://stackoverflow.com/questions/59469491/type-delegation-in-typescript", "title": "Type delegation in Typescript", "body": "<p>I have the following scenario (code snippets, some code left out for brevity):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class ValidationBuilderBase implements IValidationBuilder {\n    public isRequired(): IValidationBuilder {\n        const validationResult = Validators.required(this.baseControl);\n\n        if ((!isNullOrUndefined(validationResult) &amp;&amp; !isNullOrUndefined(validationResult.required))) {\n            this.baseErrors['required'] = 'This input is required.'; // a ValdationErrors instance\n        }\n\n        return this;\n    }\n}\n\nexport interface IValidationBuilder {\n    isRequired(): IValidationBuilder;\n}\n\nexport class StringValidationBuilder implements IValidationBuilder {\n    constructor(private readonly builder: Validationbuilderbase) {}\n\n    isRequired(): StringValidationBuilder {\n        return this.builder.isRequired() as StringValidationBuilder;\n    }\n}\n\n// other code, this is in the function\nlet builder = new ValidationBuilder(this.formGroup.controls['test']);\nlet validator: StringValidationBuilder = new StringValidationBuilder(builder);\nconst result = validator.isRequired(); // what should this type be? StringValidationBuilder or IValidationBuilder?\n</code></pre>\n\n<p>Where I am using the builder pattern to execute some code, and return an instance of itself. However, while running the code (through karma jasmine test) in the developer tools, <code>validator.isRequired()</code> resolves in a type <code>IValidationBuilder</code>.</p>\n\n<p>I am expecting it to result in <code>StringValidationBuilder</code>, as <code>StringValidationBuilder</code> is implementing the interface, but overriding the return type with <code>StringValidationBuilder</code>, which should be valid?</p>\n\n<p>I am confused. In the IDE (VsCode) the code completion states that the return type should be <code>StringValidationBuilder</code></p>\n\n<p><strong>Edit</strong></p>\n\n<p>I am trying to achieve the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>describe(`String validation chaining`, () =&gt; {\n    it(`should return no errors from the (valid) chain`, () =&gt; {\n        control().setValidators(Validators.required);\n        control().setValue('This is some test string......');\n        const result = validator\n            .string\n            .ifTrue((val) =&gt; false, 'error', 'should not reach here')\n            .ifFalse((val) =&gt; true, 'error', 'should not reach here')\n            .isRequired()\n            .maxLengthAllowed(100)\n            .minLengthAllowed(0)\n            .range(25, 35)\n            .build();\n\n        expect(result).toEqual(null);\n    });\n});\n</code></pre>\n\n<p>I got it working by modifying the code to </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class StringValidationBuilder implements IValidationBuilder {\n    isRequired(): StringValidationBuilder {\n        this.builder.isRequired();\n\n        return this;\n    }\n}\n\n</code></pre>\n\n<p>I'm still not convinced this is the ideal solution.</p>\n"}, {"tags": ["angular", "typescript", "mousewheel"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "edited": false, "score": 0, "creation_date": 1577192400, "post_id": 59469103, "comment_id": 105117461, "body": "thank you for your input. Unfortunately the horizontal scrolling doesn&#39;t work yet and I get this strange error: <code>_co.onWheel is not a function     at Object.eval [as handleEvent]</code>"}, {"owner": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "edited": false, "score": 0, "creation_date": 1577192782, "post_id": 59469103, "comment_id": 105117578, "body": "<b>Update:</b> I got an error because I called the <code>move()</code> method instead of the <code>onWheel()</code> so that I just renamed.  Now I don&#39;t get any error but just the scrollbar doesn&#39;t move on mouse event."}, {"owner": {"reputation": 14180, "user_id": 2358409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RMJS4.png?s=128&g=1", "display_name": "uminder", "link": "https://stackoverflow.com/users/2358409/uminder"}, "reply_to_user": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "edited": false, "score": 0, "creation_date": 1577192886, "post_id": 59469103, "comment_id": 105117619, "body": "Try to use event.deltaY"}, {"owner": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "edited": false, "score": 0, "creation_date": 1577193561, "post_id": 59469103, "comment_id": 105117808, "body": "It doesn&#39;t work with deltaY. I wonder if the <code>.parentElement.scrollLeft</code> since I use the <code>(wheel)=onWheel($event)</code> method on the parent, on the element where the scroll is defined. When we say <code>parentElement.scrollLeft</code> doesn&#39;t this scroll the parentElement of the current element where the method is defined?"}, {"owner": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "edited": false, "score": 0, "creation_date": 1577194244, "post_id": 59469103, "comment_id": 105118034, "body": "I did this too, but It unfortunately doesn&#39;t move the scroll horizontally...I don&#39;t know if trying to do this with css would be a good idea!?"}, {"owner": {"reputation": 14180, "user_id": 2358409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RMJS4.png?s=128&g=1", "display_name": "uminder", "link": "https://stackoverflow.com/users/2358409/uminder"}, "reply_to_user": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "edited": false, "score": 0, "creation_date": 1577201876, "post_id": 59469103, "comment_id": 105120411, "body": "I updated my answer with a StackBlitz that illustrates how it should work."}], "tags": [], "owner": {"reputation": 14180, "user_id": 2358409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RMJS4.png?s=128&g=1", "display_name": "uminder", "link": "https://stackoverflow.com/users/2358409/uminder"}, "is_accepted": false, "score": 0, "last_activity_date": 1577201805, "last_edit_date": 1577201805, "creation_date": 1577191822, "answer_id": 59469103, "question_id": 59468926, "link": "https://stackoverflow.com/questions/59468926/horizontal-scroll-in-typescript/59469103#59469103", "title": "Horizontal scroll in typescript", "body": "<p>With <code>(wheel)</code> inside the <code>div</code>, you declare a <code>wheel</code> event handler, there's no need to explicitly add another listener using <code>addEventListener</code>.</p>\n\n<pre><code>&lt;div ... (wheel)=\"onWheel($event)\" ... &gt;&lt;div&gt;\n\nonWheel(event: WheelEvent): void {\n   (&lt;Element&gt;event.target).parentElement.scrollLeft += event.deltaY;\n   event.preventDefault();\n} \n</code></pre>\n\n<p>Please have a look at this <a href=\"https://stackblitz.com/edit/angular-jmfua2?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\"><strong>StackBlitz</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 640, "user_id": 14194418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDIGU.jpg?s=128&g=1", "display_name": "thenoobslayer", "link": "https://stackoverflow.com/users/14194418/thenoobslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1615662994, "creation_date": 1615662994, "answer_id": 66617582, "question_id": 59468926, "link": "https://stackoverflow.com/questions/59468926/horizontal-scroll-in-typescript/66617582#66617582", "title": "Horizontal scroll in typescript", "body": "<p>To scroll on both ways...</p>\n<pre><code>  onWheel(event: WheelEvent): void {\n    if (event.deltaY &gt; 0) document.getElementById('container')!.scrollLeft += 40;\n    else document.getElementById('container')!.scrollLeft -= 40;\n  }\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 11751603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce4589a6ba3e31e34d711ac3c89ffad?s=128&d=identicon&r=PG&f=1", "display_name": "dernor00", "link": "https://stackoverflow.com/users/11751603/dernor00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3284, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1615662994, "creation_date": 1577190845, "last_edit_date": 1577197077, "question_id": 59468926, "link": "https://stackoverflow.com/questions/59468926/horizontal-scroll-in-typescript", "title": "Horizontal scroll in typescript", "body": "<p>I have this SVG element with a scroll bar. I want to make it horizontally scrollable on mouse wheel. \n<a href=\"https://i.stack.imgur.com/h2m9J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h2m9J.png\" alt=\"scrollable svg\"></a></p>\n\n<p>I use the <code>(wheel)</code> event to trigger the method <code>move()</code> </p>\n\n<pre><code>&lt;div id=\"tab-primary-wrapper\" class=\"inner-wrapper\" (wheel)=\"move()\" #scrollable style=\"overflow: auto\" &gt;\n   &lt;div&gt;\n</code></pre>\n\n<p>which does this: </p>\n\n<pre><code> move(){\n    var el = document.querySelector('#tab-primary-wrapper .inner-wrapper')\n    if(el){\n     el.addEventListener('mousewheel', function(e: WheelEvent) {\n       this.scrollLeft += e.deltaX;\n       e.preventDefault();\n     });\n    }\n  } \n</code></pre>\n\n<p>I'm not getting any movement of the scrollbar!</p>\n\n<p>Is there any method which I can use that triggers the movement automatically?</p>\n\n<p>Or, should I implement the scrolling using css?</p>\n\n<p>I would very much appreciate any suggestion, of how would the best way be to proceed further. </p>\n\n<p><strong>Update:</strong></p>\n\n<p>In the .html I added an <code>id=\"container\"</code> which I accessed in the .ts file: </p>\n\n<pre><code>&lt;div id=\"container\" #scrollable style=\"overflow-x: scroll\" (wheel)=\"onWheel($event)\"&gt;\n    &lt;div&gt;\n</code></pre>\n\n<p>In the typescript I defined: </p>\n\n<pre><code>onWheel(event: WheelEvent): void {\n    console.log(\"move...\");\n      document.getElementById('container').scrollLeft += 40;\n  }\n</code></pre>\n\n<p>where I move from left to right but I cannot move then from right to left. </p>\n"}, {"tags": ["typescript", "cordova", "ionic4", "howler.js"], "comments": [{"owner": {"reputation": 2690, "user_id": 2247541, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9450466b9aa6b686a7c1d502799f391?s=128&d=identicon&r=PG", "display_name": "yogen darji", "link": "https://stackoverflow.com/users/2247541/yogen-darji"}, "edited": false, "score": 0, "creation_date": 1577363375, "post_id": 59468679, "comment_id": 105151430, "body": "Can you create a demo with <code>https:&#47;&#47;stackblitz.com&#47;</code> otherwise code looks fine"}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 6808152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-hd86HLB-xPM/AAAAAAAAAAI/AAAAAAAABzQ/Dgqn0Oec_DM/photo.jpg?sz=128", "display_name": "karan brahmaxatriya", "link": "https://stackoverflow.com/users/6808152/karan-brahmaxatriya"}, "edited": false, "score": 0, "creation_date": 1582206882, "post_id": 60053529, "comment_id": 106703623, "body": "on backpress songs are not stop can you please help me @JefreMassingue"}], "tags": [], "owner": {"reputation": 1, "user_id": 12837690, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDZUywtAnrwNLVpiO3FridmI4xL9VPmrz7AjHnhUQ=k-s128", "display_name": "Jefre Massingue", "link": "https://stackoverflow.com/users/12837690/jefre-massingue"}, "is_accepted": false, "score": 0, "last_activity_date": 1580814483, "last_edit_date": 1580814483, "creation_date": 1580805699, "answer_id": 60053529, "question_id": 59468679, "link": "https://stackoverflow.com/questions/59468679/ionic-4-play-single-audio-with-howler-with-one-click-event/60053529#60053529", "title": "Ionic 4 play single audio with howler with one click event", "body": "<p>Put <code>this.player.unload();</code> for destroy </p>\n\n<pre><code>start(track: Track) {\n    console.log(\"isPlaying\", this.isPlaying);\u200b\n    if (this.player) {\n        this.player.unload();\n        this.player.stop();\n    }\u200b\n    this.player = new Howl({\n        src: [this.BASE_AUDIO_API + track.varSongURI],\n        html5: true,\n        onplay: () =&gt; {\n            this.activeTrack = track;\n            this.isPlaying = true;\n            // this.activeTrack = null;\n            this.updateProgress();\n        },\n        onload: () =&gt; {},\n        onend: () =&gt; {\n            this.isPlaying = false;\n            this.next();\n        }\n    });\n    this.player.play();\n}\u200b\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8904155, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-I_UjCwY7Sj4/AAAAAAAAAAI/AAAAAAAAAb8/VvT1nHYl94I/photo.jpg?sz=128", "display_name": "Gautham M", "link": "https://stackoverflow.com/users/8904155/gautham-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580814483, "creation_date": 1577189587, "last_edit_date": 1577363181, "question_id": 59468679, "link": "https://stackoverflow.com/questions/59468679/ionic-4-play-single-audio-with-howler-with-one-click-event", "title": "Ionic 4 play single audio with howler with one click event", "body": "<p>Here I click two or more audio files it plays all the files at same time\nHere's my code</p>\n\n<p>In audio-player.page.ts</p>\n\n<pre><code>import {\n  Component,\n  OnInit,\n  ViewChild\n} from \"@angular/core\";\nimport {\n  Howl\n} from \"howler\";\nimport {\n  IonRange\n} from \"@ionic/angular\";\nimport {\n  Storage\n} from \"@ionic/storage\";\nimport {\n  HttpClient\n} from \"@angular/common/http\";\nimport {\n  ApiService\n} from \"src/app/Service/api.service\";\nimport {\n  LikeService\n} from \"src/app/Service/like.service\";\nimport {\n  AudioHelper\n} from \"src/app/Helper/AudioHelper\";\nimport {\n  ActivatedRoute\n} from \"@angular/router\";\nimport {\n  FileTransfer,\n  FileUploadOptions,\n  FileTransferObject\n} from \"@ionic-native/file-transfer/ngx\";\nimport {\n  File\n} from \"@ionic-native/file/ngx\";\nimport {\n  FilePath\n} from \"@ionic-native/file-path/ngx\";\u200b\nexport interface Track {\n  intId: string;\n  varPackageName: string;\n  varSongURI: string;\n  varThumbImage: string;\n  isFav: string;\n}\u200b\n@Component({\n  selector: \"app-audio-player\",\n  templateUrl: \"./audio-player.page.html\",\n  styleUrls: [\"./audio-player.page.scss\"]\n})\nexport class AudioPlayerPage implements OnInit {\n  playlist: Track[] = [];\u200b\n  playNewList: Track[] = [];\u200b\n  STORAGE_KEY = \"AK_INFINITY_\";\n  userAKID: any = null;\n  isPlaying = false;\n  player: Howl;\n  activeTrack: Track = null;\n  progress = 0;\n  title: any = null;\u200b\n  downloadImageArray: Array &lt; any &gt; = [];\n  arrayObject: any = null;\u200b\n  BASE_AUDIO_API = \"https://www.ksmps.com/akfc/music/movie_songs/\";\u200b\n  @ViewChild(\"range\", {\n    static: false\n  }) range: IonRange;\u200b\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    public storage: Storage,\n    private http: HttpClient,\n    private apiService: ApiService,\n    private likeservice: LikeService,\n    private audioHelper: AudioHelper,\n    private transfer: FileTransfer,\n    private file: File,\n    public filePath: FilePath\n  ) {\n    this.storage.get(this.STORAGE_KEY + \"DL_SONG_DATA\").then(val =&gt; {\n      if (val == null || val == undefined) {\n        this.downloadImageArray = [];\n      } else {\n        this.downloadImageArray = JSON.parse(val);\n      }\n      console.log(\"download array\", this.downloadImageArray);\n    });\u200b\n    this.getLocalStorageData();\n  }\u200b\n  ngOnInit() {\n    this.activeTrack = this.audioHelper.track();\n    if (this.activeTrack != null) {\n      this.updateProgress();\n      this.isPlaying = this.audioHelper.getPlayerState();\n    }\n    console.log(\"ng activ track\", this.activeTrack);\n    this.title = this.activatedRoute.snapshot.paramMap.get(\"keyword\");\n    this.getLocalStorageData();\n  }\u200b\n  ionViewWillEnter() {\n    this.storage.get(this.STORAGE_KEY + \"userAKId\").then(userAKId =&gt; {\n      this.userAKID = userAKId;\n      this.GetMusic(true);\n    });\n    this.getLocalStorageData();\n  }\u200b\n  setCurrentTrack(track) {\n    this.activeTrack = track;\n  }\u200b\n  getLocalStorageData() {\n    this.storage.get(this.STORAGE_KEY + \"userAKId\").then(userAKId =&gt; {\n      this.userAKID = userAKId;\n    });\n  }\u200b\n  GetMusic(refresh = false, refresher ? ) {\n    this.apiService\n      .getMusicList(refresh, this.userAKID, this.title)\n      .subscribe(res =&gt; {\n        console.log(res);\u200b\n        this.playlist = res.result;\n        this.activeTrack = this.audioHelper.track();\n        console.log(\"active track\", this.activeTrack);\n        if (refresher) {\n          refresher.target.complete();\n        }\n      });\n  }\u200b\n  start(track: Track) {\n    this.isPlaying = true;\n    this.audioHelper.setPlayList(this.playlist);\n    this.activeTrack = track;\n    this.audioHelper.start(track);\n    this.updateProgress();\n  }\u200b\n  updateProgress() {\n    this.progress = this.audioHelper.updateProgress();\n    setTimeout(() =&gt; {\n      this.updateProgress();\n    }, 500);\n  }\u200b\n  togglePlayer(isPause) {\n    this.audioHelper.togglePlayer(this.isPlaying);\n    this.isPlaying = !this.isPlaying;\n    console.log(this.isPlaying);\n  }\u200b\n  seek() {\n    let newVal = +this.range.value;\n    console.log(newVal);\n    this.audioHelper.seek(newVal);\n  }\u200b\n  prev() {\n    this.audioHelper.prev();\n    this.activeTrack = this.audioHelper.changeActiveTrack();\n  }\u200b\n  next() {\n    this.audioHelper.next();\n    this.activeTrack = this.audioHelper.changeActiveTrack();\n  }\u200b\n  fav(item: any) {\n    if (item.isFav) {\n      item.isFav = false;\n    } else {\n      item.isFav = true;\n    }\n    console.log(\"akid\", this.userAKID);\n    console.log(\"id\", item.intId);\n    this.likeservice\n      .modifyFeedLike(this.userAKID, \"music\", item.intId, null)\n      .subscribe(res =&gt; {\n        console.log(res);\n      });\n  }\u200b\n  shufflePlayList() {\n    this.playNewList = this.shuffle(this.playlist);\n    this.playlist = this.playNewList;\n    this.audioHelper.setPlayList(this.playlist);\n  }\u200b\n  shuffle(array) {\n    let currentIndex = array.length,\n      temporaryValue,\n      randomIndex;\n    while (0 !== currentIndex) {\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n    return array;\n  }\u200b\n  download(activeTrack: any) {\n    console.log(\"SONG URI \", this.BASE_AUDIO_API + activeTrack.varSongURI);\n    alert(\"Download Started\");\n    this.file\n      .checkDir(this.file.dataDirectory, \"AKFC/MUSIC\")\n      .then(_ =&gt; console.log(\"Directory exists\"))\n      .catch(err =&gt;\n        this.file\n        .createDir(this.file.dataDirectory, \"AKFC/MUSIC\", true)\n        .then(response =&gt; {})\n        .catch(err =&gt; {\n          console.log('Could not create directory \"AKFC\" ', err);\n        })\n      );\n    console.log(\"download started\");\u200b\n    const fileTransfer: FileTransferObject = this.transfer.create();\u200b\n    fileTransfer\n      .download(\n        this.BASE_AUDIO_API + activeTrack.varSongURI,\n        this.file.dataDirectory + \"AKFC/MUSIC/\" + activeTrack.varSongURI\n      )\n      .then(\n        entry =&gt; {\n          console.log(\"download complete: \" + entry.toURL());\n          this.arrayObject = {\n            file: activeTrack.varSongURI,\n            fileType: \"Image\",\n            extension: \".mp3\",\n            path: this.file.dataDirectory + \"AKFC/MUSIC/\"\n          };\n          this.downloadImageArray.push(this.arrayObject);\n          console.log(this.downloadImageArray);\n          this.storage.set(\n            this.STORAGE_KEY + \"DL_SONG_DATA\",\n            JSON.stringify(this.downloadImageArray)\n          );\n          //  alert(this.file.dataDirectory + \"AKFC/MUSIC/\");\n          alert(activeTrack.varSongURI + \"Download Completed\");\n        },\n        error =&gt; {}\n      );\n  }\n}\n</code></pre>\n\n<p>In AudioHelper.ts file</p>\n\n<pre><code>import {\n  Injectable\n} from \"@angular/core\";\nimport {\n  Howl\n} from \"howler\";\nimport {\n  AudioPlayerPage\n} from \"../Page/audio-player/audio-player.page\";\u200b\nexport interface Track {\n  intId: string;\n  varPackageName: string;\n  varSongURI: string;\n  varThumbImage: string;\n  isFav: string;\n}\u200b\n@Injectable({\n  providedIn: \"root\"\n})\nexport class AudioHelper {\n  BASE_AUDIO_API = \"https://www.ksmps.com/akfc/music/movie_songs/\";\u200b\n  playlist: Track[] = [];\u200b\n  isPlaying = false;\n  player: Howl;\n  activeTrack: Track = null;\n  progress: number = 0;\u200b\n  userAKID: any = null;\n  title: any = null;\u200b\n  constructor() {}\u200b\n  track() {\n    console.log(\"servicetrack\", this.activeTrack);\n    return this.activeTrack;\n  }\u200b\n  start(track: Track) {\n    console.log(\"isPlaying\", this.isPlaying);\u200b\n    if (this.isPlaying) {\n      this.player.stop();\n      this.isPlaying = false;\n      this.player = null;\n      this.player = Howl({\n        onload: () =&gt; {\n          this.player.stop();\n        },\n        onloaderror: () =&gt; {\n          this.player.stop();\n        },\n        onplayerror: () =&gt; {\n          this.player.stop();\n        },\n        onplay: () =&gt; {\n          this.player.stop();\n        }\n      });\n    }\u200b\n    this.player = new Howl({\n      src: [this.BASE_AUDIO_API + track.varSongURI],\n      html5: true,\n      onplay: () =&gt; {\n        this.activeTrack = track;\n        this.isPlaying = true;\n        // this.activeTrack = null;\n        this.updateProgress();\n      },\n      onload: () =&gt; {},\n      onend: () =&gt; {\n        this.isPlaying = false;\n        this.next();\n      }\n    });\n    this.player.play();\n  }\u200b\n  setPlayList(playList) {\n    this.playlist = playList;\n  }\u200b\n  updateProgress() {\n    let seek: any = this.player.seek();\n    return (seek / this.player.duration()) * 100 || 0;\n  }\u200b\n  togglePlayer(pause) {\n    console.log(\"pause\", pause);\n    this.isPlaying = !pause;\n    if (pause) {\n      this.player.pause();\n    } else {\n      this.player.play();\n    }\n    return !pause;\n  }\u200b\n  seek(range) {\n    let duration = this.player.duration();\n    this.player.seek(duration * (range / 100));\n  }\u200b\n  prev() {\n    let index = this.playlist.indexOf(this.activeTrack);\n    if (index &gt; 0) {\n      this.activeTrack = this.playlist[index - 1];\n      this.start(this.playlist[index - 1]);\n    } else {\n      this.activeTrack = this.playlist[this.playlist.length - 1];\n      this.start(this.playlist[this.playlist.length - 1]);\n    }\n    console.log(\"preAT\", this.activeTrack);\n    // this.changeActiveTrack();\n  }\u200b\n  stopPlayer() {\n    if (this.isPlaying) {\n      this.player.stop();\n    } else {\n      this.player.start();\n    }\n  }\u200b\n  next() {\n    let index = this.playlist.indexOf(this.activeTrack);\n    if (index != this.playlist.length - 1) {\n      this.activeTrack = this.playlist[index + 1];\n      this.start(this.playlist[index + 1]);\n    } else {\n      this.activeTrack = this.playlist[0];\n      this.start(this.playlist[0]);\n    }\n    console.log(\"nextAT\", this.activeTrack);\n    //  this.changeActiveTrack();\n  }\u200b\n  getPlayerState() {\n    return this.isPlaying;\n  }\u200b\n  changeActiveTrack() {\n    return this.activeTrack;\n  }\n}\n</code></pre>\n\n<p>I am looking for audio player with click the file it plays the file.\nBut i click multiple files it plays all the files at the time.\nI want to play what i'm clicked last.</p>\n\n<p>Kindly help me to fix this...</p>\n"}, {"tags": ["javascript", "jquery", "arrays", "angular", "typescript"], "comments": [{"owner": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577209288, "post_id": 59468510, "comment_id": 105122374, "body": "Can you share sample of <code>AllValuesArray</code> values?"}, {"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "reply_to_user": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 1, "creation_date": 1577371352, "post_id": 59468510, "comment_id": 105154062, "body": "sure @NimittShah its similar to JSON Array of objects some what like this                  <code>{&quot;employees&quot;:[         {&quot;name&quot;:&quot;Ram&quot;, &quot;email&quot;:&quot;ram@gmail.com&quot;, &quot;age&quot;:23},         {&quot;name&quot;:&quot;Shyam&quot;, &quot;email&quot;:&quot;shyam23@gmail.com&quot;, &quot;age&quot;:28},       {&quot;name&quot;:&quot;John&quot;, &quot;email&quot;:&quot;john@gmail.com&quot;, &quot;age&quot;:33},         {&quot;name&quot;:&quot;Bob&quot;, &quot;email&quot;:&quot;bob32@gmail.com&quot;, &quot;age&quot;:41}    ]}  </code>"}, {"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "reply_to_user": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577371543, "post_id": 59468510, "comment_id": 105154129, "body": "@NimittShah- is the row index of table creating problem?? like while editing TopToBottom it may be stroring data based on rowIndex, similarly reverse when editing BottomToTop/random order.."}, {"owner": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577374091, "post_id": 59468510, "comment_id": 105155001, "body": "Why do you need <code>storeArray</code>? You can use <code>AllValuesArray</code> directly instead! ordering will not matter"}, {"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "reply_to_user": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577374997, "post_id": 59468510, "comment_id": 105155340, "body": "AllValuesArray are having original data received from server but i need to store data after edit, hence AllValuesArray will not have data after edit @NimittShah..."}, {"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "reply_to_user": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577375051, "post_id": 59468510, "comment_id": 105155360, "body": "Actually what I need is to compare the row edited with value just below that row.."}, {"owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1577375077, "post_id": 59468510, "comment_id": 105155369, "body": "See <a href=\"https://meta.stackoverflow.com/questions/326569/under-what-circumstances-may-i-add-urgent-or-other-similar-phrases-to-my-quest\">Under what circumstances may I add \u201curgent\u201d or other similar phrases to my question, in order to obtain faster answers?</a>"}, {"owner": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577376398, "post_id": 59468510, "comment_id": 105155808, "body": "@AEmilia What will be the <code>StoreArray</code> object after you edit first row? Can you please share! I mean are you adding new row or just editing the same one?"}, {"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "reply_to_user": {"reputation": 3511, "user_id": 8440598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4iy9.png?s=128&g=1", "display_name": "Nimitt Shah", "link": "https://stackoverflow.com/users/8440598/nimitt-shah"}, "edited": false, "score": 0, "creation_date": 1577377486, "post_id": 59468510, "comment_id": 105156138, "body": "Not adding new row, after editing say 1st row.. That object array will store the row with new data at 1st index. Now after editing 2nd row it will store another row with new values at 2nd index. @NimittShah Now when I am editing in random order this order just gets changed"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "edited": false, "score": 0, "creation_date": 1577196769, "post_id": 59469102, "comment_id": 105118822, "body": "Ok i can but how will i differentiate that this time row has been edited BottomToTop Or TopToBottom or random order?"}, {"owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "edited": false, "score": 0, "creation_date": 1577371651, "post_id": 59469102, "comment_id": 105154155, "body": "Ur idea is correct is there any way i can check if its edited in BottomToTop Or TopToBottom or random order?"}], "tags": [], "owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "is_accepted": false, "score": 1, "last_activity_date": 1577192712, "last_edit_date": 1577192712, "creation_date": 1577191815, "answer_id": 59469102, "question_id": 59468510, "link": "https://stackoverflow.com/questions/59468510/angular-edit-row-store-values-in-array/59469102#59469102", "title": "Angular edit row &amp; store values in array", "body": "<p>You can try <strong>reverse</strong> method in the end to reverse the order of the elements in your array , something like:</p>\n\n<pre><code>storeArray.reverse();\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 12590864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KRi3BqygmtU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6uGtgUKXuYvauhZXxKuH6Z3QJLA/photo.jpg?sz=128", "display_name": "A Emilia", "link": "https://stackoverflow.com/users/12590864/a-emilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 1, "closed_date": 1577379558, "answer_count": 1, "score": 4, "last_activity_date": 1577377276, "creation_date": 1577188743, "last_edit_date": 1577377276, "question_id": 59468510, "link": "https://stackoverflow.com/questions/59468510/angular-edit-row-store-values-in-array", "closed_reason": "Not suitable for this site", "title": "Angular edit row &amp; store values in array", "body": "<p>I need to compare edited row data with the row just below edited row.</p>\n\n<p>A table with 5 rows. When i am editing records from <strong>top to bottom</strong> in that order using below code i am able to store values that are edited in an array. Here latest edited value is stored at the last index of <strong>storeArray</strong>.</p>\n\n<p>When i am editing records from <strong>bottom to top</strong>, the last edited record is now saved at 1st index but i want that there. It should also save the data like above i.e <strong>last edited value should be present at last index in the array</strong></p>\n\n<p>Similarly when it is edited in random order then also last edited value should be at last index of array. </p>\n\n<p>Below is the code used to fetch and save edited values</p>\n\n<pre><code> const storeArray = _.reduce(this.allValuesArray, function(storeArray, value, key) {\n  return _.isEqual(value, this.allValuesArray[key]) ?\n  storeArray : storeArray.concat(allValuesArray[key]);      \n }, []);\n</code></pre>\n\n<p>Above method is called after editing few rows when the button Save is clicked. </p>\n\n<ul>\n<li><p>allValuesArray = JSON having all row records fetched during ngOnInit</p></li>\n<li><p>storeArray = The array in which i am storing the data that are being edited</p></li>\n</ul>\n\n<p>Everything is done on Angular 5</p>\n"}, {"tags": ["angular", "typescript", "angular8"], "comments": [{"owner": {"reputation": 21436, "user_id": 1021703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g09TV.jpg?s=128&g=1", "display_name": "Jeremy Thille", "link": "https://stackoverflow.com/users/1021703/jeremy-thille"}, "edited": false, "score": 0, "creation_date": 1577194980, "post_id": 59468507, "comment_id": 105118247, "body": "I don&#39;t understand <code>I want ngModel object in some variable</code>. What is <code>ngModel object</code> supposed to be?"}, {"owner": {"reputation": 543, "user_id": 2245159, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/1sW6D.jpg?s=128&g=1", "display_name": "parth.hirpara", "link": "https://stackoverflow.com/users/2245159/parth-hirpara"}, "reply_to_user": {"reputation": 21436, "user_id": 1021703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g09TV.jpg?s=128&g=1", "display_name": "Jeremy Thille", "link": "https://stackoverflow.com/users/1021703/jeremy-thille"}, "edited": false, "score": 0, "creation_date": 1577250833, "post_id": 59468507, "comment_id": 105128804, "body": "@Jeremy - NgModel --&gt; { NgModel } from &quot;@angular/forms&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "reply_to_user": {"reputation": 543, "user_id": 2245159, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/1sW6D.jpg?s=128&g=1", "display_name": "parth.hirpara", "link": "https://stackoverflow.com/users/2245159/parth-hirpara"}, "edited": false, "score": 0, "creation_date": 1577288075, "post_id": 59469469, "comment_id": 105136358, "body": "im sure there&#39;s other ways .. but this is a documented use of ViewChild"}], "tags": [], "owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577194070, "last_edit_date": 1577194070, "creation_date": 1577193735, "answer_id": 59469469, "question_id": 59468507, "link": "https://stackoverflow.com/questions/59468507/access-ngmodel-object-not-value-in-component-file-typescript/59469469#59469469", "title": "Access NgModel Object (not value) in component file (typescript)", "body": "<p>You could use <a href=\"https://angular.io/api/core/ViewChild\" rel=\"nofollow noreferrer\">ViewChild</a> for that.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, ViewChild } from \"@angular/core\";\nimport { NgModel } from \"@angular/forms\";\n\n@Component({\n  //...\n})\nexport class SomeComponent {\n  @ViewChild('toemail', {static: true}) toemail: NgModel;\n\n  ngOnInit() {\n    console.log(this.toemail) // ngModel\n  }\n}\n</code></pre>\n\n<p>This will give you access to the <code>ngModel</code></p>\n"}], "owner": {"reputation": 543, "user_id": 2245159, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/1sW6D.jpg?s=128&g=1", "display_name": "parth.hirpara", "link": "https://stackoverflow.com/users/2245159/parth-hirpara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577194070, "creation_date": 1577188722, "last_edit_date": 1577193832, "question_id": 59468507, "link": "https://stackoverflow.com/questions/59468507/access-ngmodel-object-not-value-in-component-file-typescript", "title": "Access NgModel Object (not value) in component file (typescript)", "body": "<p>I am working with <code>[(ngModel)]</code> - Two way binding.</p>\n\n<p>HTML - </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;input\n  type=\"text\" \n  [(ngModel)]=\"emailInput\" \n  #toemail=\"ngModel\" \n  [email]=\"true\" \n  [style.color]=\"toemail.invalid &amp;&amp; toemail.touched ? 'red' : ''\"\n/&gt;\n</code></pre>\n\n<p>TS - </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>public emailInput: string;\n</code></pre>\n\n<p>In component file I can get input value as string in variable <strong><code>emailInput</code></strong>.</p>\n\n<p>But I want <a href=\"https://angular.io/api/forms/NgModel\" rel=\"nofollow noreferrer\">ngModel</a> object in some variable in component typescript file. Although I can access it in html file with reference variable <strong><code>toemail</code></strong>, but wants it in component file.</p>\n\n<p>Is there any way to achieve that?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 2842717, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/8e813bfc1df831a2b8c7fad10387894c?s=128&d=identicon&r=PG&f=1", "display_name": "Harsha Mullangi", "link": "https://stackoverflow.com/users/2842717/harsha-mullangi"}, "edited": false, "score": 0, "creation_date": 1577189585, "post_id": 59468523, "comment_id": 105116465, "body": "i dont want to edit the main code. I want to edit the testing code"}], "tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": false, "score": 0, "last_activity_date": 1577188808, "creation_date": 1577188808, "answer_id": 59468523, "question_id": 59468346, "link": "https://stackoverflow.com/questions/59468346/how-to-return-array-without-type/59468523#59468523", "title": "how to return array without type", "body": "<p>If you want to create array without Type, you can use <code>Array.from()</code>:</p>\n\n<pre><code>let arrayWithoutType =  Array.from(console.info(this.portfolioCompany.portfolioCompanyLink)\n                                      .filter(link =&gt; link.link.name.toLowerCase()));\n</code></pre>\n\n<p>An example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>console.log(typeof Array.from([1, 2, 3]));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 196, "user_id": 2842717, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/8e813bfc1df831a2b8c7fad10387894c?s=128&d=identicon&r=PG&f=1", "display_name": "Harsha Mullangi", "link": "https://stackoverflow.com/users/2842717/harsha-mullangi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577188808, "creation_date": 1577187986, "last_edit_date": 1577188276, "question_id": 59468346, "link": "https://stackoverflow.com/questions/59468346/how-to-return-array-without-type", "title": "how to return array without type", "body": "<p>I have unit test and i want to return the values like below :</p>\n\n<pre><code>(13) [{\u2026}]\n0:\nid: 154\nportfolioCompanyId: 916\nurl: \"https://sharepoint.warburgpincus.com/docs/enterprise/Historical Valuations Documents/Mercator\"\ndealCode: null\nmodifiedOn: \"2018-09-21T14:55:49.173\"\nmodifiedBy: \"setup\"\ncreatedOn: \"2018-09-21T14:55:49.173\"\ncreatedBy: \"setup\"\nlinkId: 1\nlink:\nid: 1\nname: \"Historical Reports\"\n</code></pre>\n\n<p>I have written the code which is returning the value like this : </p>\n\n<pre><code>[PortfolioCompanyLink]\n0: PortfolioCompanyLink\nurl: \"http://google.com\"\nlink: Link\nname: \"test\"\n</code></pre>\n\n<p>I have written the below code </p>\n\n<pre><code>fixture = TestBed.createComponent(PortfolioCompanyLinkDropdownComponent);\n        component = fixture.componentInstance;\n        component.portfolioCompany = new PortfolioCompany();\n        component.portfolioCompany.name = \"Test Company\";\n        let testLinks = new Array&lt;PortfolioCompanyLink&gt;();\n        let testFirstLink = new PortfolioCompanyLink();\n        testFirstLink.url = \"http://google.com\";\n        //testFirstLink.linkName=\"test\";\n        testFirstLink.link = new Link();\n        testFirstLink.link.name = \"test\";\n        testLinks.push(testFirstLink);\n        component.portfolioCompany.portfolioCompanyLink = testLinks;\n\n        fixture.detectChanges();\n</code></pre>\n\n<p>when i add </p>\n\n<pre><code>console.info(this.portfolioCompany.portfolioCompanyLink)\n    .filter(link =&gt; link.link.name.toLowerCase()); // it throws an error\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577241865, "post_id": 59468255, "comment_id": 105127873, "body": "There are multiple things going on here, each of which could be its own question.  First: you seem to want to specify the <code>T</code> generic  type parameter while having the compiler infer the <code>K</code> generic type parameter when you call <code>new Foo&lt;myG&gt;(....)</code>.  But TypeScript doesn&#39;t support this sort of partial inference for type parameters, so <a href=\"https://stackoverflow.com/a/55754981/2887218\">you&#39;d need to use a workaround for it</a>.  Continued:"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577241927, "post_id": 59468255, "comment_id": 105127879, "body": "The other issue is that you have a value of type <code>string | &quot;d&quot; | &quot;e&quot;</code> and you want the compiler to autocomplete <code>&quot;d&quot;</code> and <code>&quot;e&quot;</code>... but of course <code>string | &quot;d&quot; | &quot;e&quot;</code> is just <code>string</code> and the compiler forgets all about <code>&quot;d&quot;</code> and <code>&quot;e&quot;</code> when suggesting completions.  This is <a href=\"https://github.com/microsoft/TypeScript/issues/33471\" rel=\"nofollow noreferrer\">an open issue</a> and there are workarounds for that too.  Which of the two issues are you asking about in the question?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 12415891, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdt7vpnKRWbgk68a3A5l-cbmxXzG-NCL_Mt4n3=k-s128", "display_name": "user12415891", "link": "https://stackoverflow.com/users/12415891/user12415891"}, "edited": false, "score": 0, "creation_date": 1577195730, "post_id": 59469481, "comment_id": 105118515, "body": "thanks for your answer, im not marking it as  the answer because i feel like there has to be a way to do this, i just don&#39;t know how."}], "tags": [], "owner": {"reputation": 2004, "user_id": 1692147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/91a43615f1180f46e249358d07987ee1?s=128&d=identicon&r=PG", "display_name": "dege", "link": "https://stackoverflow.com/users/1692147/dege"}, "is_accepted": false, "score": 1, "last_activity_date": 1577193780, "creation_date": 1577193780, "answer_id": 59469481, "question_id": 59468255, "link": "https://stackoverflow.com/questions/59468255/get-completions-for-complex-types/59469481#59469481", "title": "Get completions for complex types", "body": "<p>I don't think typescript has a way to know that at compile time.</p>\n\n<p>You basically are saying that <code>G</code> can have the properties of any <code>string</code>, so  <code>myG</code> extends that and has 2 required properties <code>d</code> and <code>e</code>, but it's still possible to add any new property, with any name, from type <code>string</code>. So at compile time Typescript is unable to know all the assigned properties from type <code>string</code>.</p>\n\n<p>The only way to get a completion is if you define a small set of strings on the <code>G</code> interface.</p>\n\n<pre><code>interface G {\n a ?: string;\n b ?: string;\n c ?: string;\n d ?: string;\n e ?: string;\n}\n</code></pre>\n\n<p>This way the <code>get</code> can only expect arguments from  <code>\"a\" | \"b\" | \"c\" | \"d\" | \"e\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1577414369, "last_edit_date": 1577414369, "creation_date": 1577242408, "answer_id": 59474846, "question_id": 59468255, "link": "https://stackoverflow.com/questions/59468255/get-completions-for-complex-types/59474846#59474846", "title": "Get completions for complex types", "body": "<p>I will assume that you're okay with constructing <code>Foo</code> instances by manually specifying both the <code>T</code> and <code>K</code> generic type parameters:</p>\n\n<pre><code>const foo = new Foo&lt;myG, { a: myG, c: myG }&gt;(\n    {\n        a: { d: \"\", e: \"\" },\n        c: { d: \"\", e: \"\" }\n    }, \"c\"\n);\n</code></pre>\n\n<p>So your question is: how can we get autocompletion in our IDE for the known literal keys <code>\"d\"</code> and <code>\"e\"</code> of <code>myG</code>, when the <code>string</code> index signature absorbs <code>\"d\"</code> and <code>\"e\"</code> into it?  That is, since <code>\"d\" | \"e\" | string</code> evaluates to just <code>string</code>, how do we get the IDE to \"remember\" the <code>\"d\"</code> and <code>\"e\"</code>?</p>\n\n<p>There is an <a href=\"https://github.com/microsoft/TypeScript/issues/33471\" rel=\"nofollow noreferrer\">open issue (Microsoft/TypeScript#33471)</a> about this, so there's no easy and obvious answer yet.  What complex and/or non-obvious answers are there?  Here's one.</p>\n\n<p>First, use an <a href=\"https://stackoverflow.com/questions/51954558/how-can-i-remove-a-wider-type-from-a-union-type-without-removing-its-subtypes-in/51955852#51955852\">existing solution</a> to get the known literal keys from a type with an index signature:</p>\n\n<pre><code>type KnownKeys&lt;T&gt; = {\n  [K in keyof T]: string extends K ? never : number extends K ? never : K\n} extends { [_ in keyof T]: infer U } ? U : never;\n</code></pre>\n\n<p>Let's verify that it does the right thing with <code>myG</code>:</p>\n\n<pre><code>type KnownKeysOfMyG = KnownKeys&lt;myG&gt;\n// type KnownKeysOfMyG = \"d\" | \"e\"\n</code></pre>\n\n<p>Looks good.  Now, we can  change the <code>get()</code> signature of <code>Foo</code> to accept <code>KnownKeys&lt;T&gt;</code>:</p>\n\n<pre><code>get(keyOfG: Extract&lt;KnownKeys&lt;T&gt;, string&gt;): void;\n</code></pre>\n\n<p>If we still want to accept arbitrary <code>string</code> values in <code>get()</code>, the workaround here is to add a second <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">overload signature</a> for <code>get()</code> that accepts <code>string</code>:</p>\n\n<pre><code>  get(keyOfG: Extract&lt;KnownKeys&lt;T&gt;, string&gt;): void;\n  get(keyOfG: string): void;\n  get(keyofG: string) {\n     // impl\n  }\n</code></pre>\n\n<p>It still accepts all <code>string</code> values:</p>\n\n<pre><code>foo.get(\"\"); // okay\nfoo.get(\"d\"); // okay\nfoo.get(\"e\"); // okay\nfoo.get(\"fkjksjfksjfkds\"); // okay\n</code></pre>\n\n<p>But the autocomplete hinting now works:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0DAtW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0DAtW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBA0gdgewO5xhEBnAPAFQHxQC8UA3gLABQU1UA2jFAJZxQDW6CAZlDgLoBcUDMABOzAOZQIAD2AQ4AEwywoAfihwIANwgioguAFcAtgCNdU2fKUr1mnXsExKAX0tzFyknQD6TFuwgXDwC-pwWAKpQbupRBtq6ANyUKRTMciKcAIYAxtAA4qSUNHSBgsJicOKhFRLJFC6U6brZeVD5AKK47tbK+QTkVDS0ZUKiEqE49Y0UlDkANlkYygBiCAjdMh42+QA0Klu97V34A8U0OQhwFYY5wAgiABQIpgBWTvuBAPKcX2+CgWCMAAlKRoudqOIIMBHt9OPlBB1ZCJcsAsPBkKh0Nh8PtalU8MDBFoEIwFPUSlCYXCEWNKuIiVASWSKTQqbCOPDyuMqqDBhDwQ1Us1MrloMYQIVDp52kUhtQFNz6azqBAlXUoK5UqBILBECg0JgfgBZSVEPWYw3YCX9SgAejtUB10AxBuxJrNxAARAovVAAD5QL0QL2pS7XYBQTjrc2aJBQNYbG37bxZQTJqA5dNmlx4R4CwYlEppsGKoNe-Zq8vRXYCkpZ0uCL0VqRNv0zEoufZenKhijA+qpaMIAB07ObA6gDqgCFYWRAlGHY+hjx9Xsn09n88X62XMOD68SU8dW4XFCX484rFerAwryvd6vSkPx5nc7PqSAA\" rel=\"nofollow noreferrer\">Playground link to code</a></p>\n"}], "owner": {"reputation": 57, "user_id": 12415891, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdt7vpnKRWbgk68a3A5l-cbmxXzG-NCL_Mt4n3=k-s128", "display_name": "user12415891", "link": "https://stackoverflow.com/users/12415891/user12415891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59474846, "answer_count": 2, "score": 2, "last_activity_date": 1577414369, "creation_date": 1577187463, "last_edit_date": 1577263526, "question_id": 59468255, "link": "https://stackoverflow.com/questions/59468255/get-completions-for-complex-types", "title": "Get completions for complex types", "body": "<p>I want to a way pass <code>myG</code> to <code>Foo</code> and get completions(in vscode) for <code>Foo.get</code> and for the  <code>OBJ</code>/<code>KEY_OF_OBJ</code> constructor arg, i can get it to work so that i get completions for <code>Foo.get</code> or for <code>OBJ</code>/<code>KEY_OF_OBJ</code>, but not all at the same time.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface G {\n  [key: string]: string;\n}\ninterface GE&lt;T extends G&gt; {\n  [key: string]: T;\n}\n\nclass Foo&lt;T extends G, K extends GE&lt;T&gt;&gt; {\n  constructor(OBJ: K, KEY_OF_OBJ: keyof K) {}\n  get(keyOfG: keyof T) {}\n}\n\ninterface myG extends G {\n  d: string;\n  e: string;\n}\n\nconst foo = new Foo&lt;myG&gt;(\n  {\n    a: {\n      d: '',\n      e: ''\n    },\n    c: {\n      d: '',\n      e: ''\n    }\n  },\n  'c'\n);\nfoo.get('');\n</code></pre>\n\n<p>edit:\nhaving to declare <code>Foo</code> like this <code>new Foo&lt;myG, {a: myG, c: myG}&gt;</code> is also acceptable, my only issue with declaring it like this is, that <code>Foo.get</code> doesn't get autocompletion which is because of the ts thinks its a string thing, if i remove <code>G</code>, it works, but i want <code>T</code> to have <code>key: stringValue</code> pairs, i guess my problem is kind of solved, unless there is a way to constrain <code>T</code> to only have string values.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "edited": false, "score": 0, "creation_date": 1577195613, "post_id": 59468243, "comment_id": 105118460, "body": "You can try to avoid writing new <code>LoggedGuard </code> by using <code>!</code> operator. But give a try. <code>canActivate: [ !AuthGuard],</code>"}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 11834561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db261ed9283a5fa403bfca7891b954e?s=128&d=identicon&r=PG&f=1", "display_name": "Timu&#231;in &#199;i&#231;ek", "link": "https://stackoverflow.com/users/11834561/timu%c3%a7in-%c3%87i%c3%a7ek"}, "edited": false, "score": 0, "creation_date": 1577187773, "post_id": 59468289, "comment_id": 105115837, "body": "I edited and added my authGuard class.Its responsible for protecting whether user logged in or not already."}, {"owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "reply_to_user": {"reputation": 946, "user_id": 11834561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db261ed9283a5fa403bfca7891b954e?s=128&d=identicon&r=PG&f=1", "display_name": "Timu&#231;in &#199;i&#231;ek", "link": "https://stackoverflow.com/users/11834561/timu%c3%a7in-%c3%87i%c3%a7ek"}, "edited": false, "score": 0, "creation_date": 1577187949, "post_id": 59468289, "comment_id": 105115896, "body": "@Timu&#231;in&#199;i&#231;ek  when this condition : <code>if(this.authService.loggedIn())</code> is true you should return false."}], "tags": [], "owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1577187657, "creation_date": 1577187657, "answer_id": 59468289, "question_id": 59468243, "link": "https://stackoverflow.com/questions/59468243/how-to-protect-login-and-register-components-if-user-loggedin/59468289#59468289", "title": "How to protect Login and Register components if user loggedin?", "body": "<p>As i can see you have written <code>AuthGuard</code> then you just have to check in <code>AuthGuard</code> if the user has already logged in or not. If user is logged in return <code>false</code> otherwise return <code>true</code>.  </p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 9006792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2488dbde2b73b975a316a3fd997fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco Di Stefano", "link": "https://stackoverflow.com/users/9006792/francesco-di-stefano"}, "is_accepted": false, "score": 1, "last_activity_date": 1577187835, "creation_date": 1577187835, "answer_id": 59468312, "question_id": 59468243, "link": "https://stackoverflow.com/questions/59468243/how-to-protect-login-and-register-components-if-user-loggedin/59468312#59468312", "title": "How to protect Login and Register components if user loggedin?", "body": "<p>I have created an Angular template that deals with most navigation cases. Look at AuthGuard in my project to have an example on how to implement this: <a href=\"https://github.com/francescodist/matFortyTwo/blob/master/src/app/auth/auth.guard.ts\" rel=\"nofollow noreferrer\">https://github.com/francescodist/matFortyTwo/blob/master/src/app/auth/auth.guard.ts</a></p>\n"}, {"tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": false, "score": 1, "last_activity_date": 1577188052, "creation_date": 1577188052, "answer_id": 59468356, "question_id": 59468243, "link": "https://stackoverflow.com/questions/59468243/how-to-protect-login-and-register-components-if-user-loggedin/59468356#59468356", "title": "How to protect Login and Register components if user loggedin?", "body": "<p>You can create new LoggedGuardService where you are checking whether user is logged in:</p>\n\n<pre><code>export class LoggedGuard implements CanActivate {\n    constructor(private authService:AuthService,private router:Router){\n\n    }\n    canActivate(): boolean{\n       if (!this.authService.loggedIn()){\n         return true;\n       }\n       else{\n         this.router.navigate(['']);\n       }\n    }\n}\n</code></pre>\n\n<p>and use it:</p>\n\n<pre><code>RouterModule.forChild([\n    { path: 'login',\n        component: LoginComponent,\n        canActivate: [LoggedGuard]\n    },\n</code></pre>\n"}], "owner": {"reputation": 946, "user_id": 11834561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db261ed9283a5fa403bfca7891b954e?s=128&d=identicon&r=PG&f=1", "display_name": "Timu&#231;in &#199;i&#231;ek", "link": "https://stackoverflow.com/users/11834561/timu%c3%a7in-%c3%87i%c3%a7ek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577256520, "creation_date": 1577187408, "last_edit_date": 1577256520, "question_id": 59468243, "link": "https://stackoverflow.com/questions/59468243/how-to-protect-login-and-register-components-if-user-loggedin", "title": "How to protect Login and Register components if user loggedin?", "body": "<p>I have login register and some other routes releated with their components.I can protect other routes under the loginComponent but I don't want user to see login component by changing url by hand if user loggedIn and register.</p>\n\n<p>user is able to go to login component by texting \"/\" on URL and I want to prevent this if user LoggedIn</p>\n\n<p><strong>Here my route config below</strong></p>\n\n<pre><code>export const appRoutes: Routes = [\n\n    {path:'',component:LoginComponent},\n    {\n        path:'',\n        canActivate:[AuthGuard],\n        children:[\n            {path: 'home', component: HomeComponent},\n            {path: 'appointments', component: AppointmentsComponent},\n            {path: 'appointmentPicker', component: AppointmentPickerComponent},\n        ]\n    },\n    {path:'register',component:RegisterComponent},\n    {path:'**',redirectTo:'home',pathMatch:'full'},\n  ];\n</code></pre>\n\n<p><strong>AuthGuard</strong></p>\n\n<pre><code>  export class AuthGuard implements CanActivate {\n    constructor(private authService:AuthService,private router:Router){\n\n    }\n    canActivate(): boolean{\n       if(this.authService.loggedIn()){\n         return true;\n       }\n       else{\n         this.router.navigate(['']);\n       }\n    }\n  }\n</code></pre>\n\n<p><strong>SOLUTION(UPDATED)</strong>\nHere what I tried and worked exactly I wanted.Thank you all</p>\n\n<pre><code>export class LoginComponent implements OnInit {\n\n  model:any={};\n  tokenExist:boolean=false;\n  logInWorked:boolean=false;\n  constructor(private authService:AuthService,private router:Router) {\n\n   }\n  login()\n  {\n    console.log(this.model);\n    this.authService.login(this.model).subscribe(value=&gt;{\n      this.router.navigate(['/home']);\n      this.logInWorked=true;\n      }\n    )\n  }\n\n  ngOnInit() {\n    if(this.logInWorked!=true &amp;&amp; this.authService.loggedIn()){\n      this.router.navigate(['/home']);\n    }\n  }\n\n  }\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "package.json", "npm-scripts"], "comments": [{"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 1, "creation_date": 1577186667, "post_id": 59468082, "comment_id": 105115471, "body": "Install Typescript and compile it first?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1577186788, "post_id": 59468082, "comment_id": 105115517, "body": "Or use <a href=\"https://www.npmjs.com/package/ts-node\" rel=\"nofollow noreferrer\">npmjs.com/package/ts-node</a>. Or just rename the file to .js, as there are no types in there."}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577186887, "post_id": 59468082, "comment_id": 105115550, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/31749952/how-to-run-typescript-compiler-as-a-package-json-script-without-grunt-or-gulp\">How to run typescript compiler as a package.json script without grunt or gulp</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12479221"}, "edited": false, "score": 0, "creation_date": 1577186898, "post_id": 59468082, "comment_id": 105115558, "body": "thank you. But that is not the problem. Because I can just run ANgular projects. I already have node.js installed"}, {"owner": {"reputation": 4800, "user_id": 8879527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uWfcF.jpg?s=128&g=1", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/8879527/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1577201382, "post_id": 59468082, "comment_id": 105120254, "body": "check typescript setup video <a href=\"https://www.youtube.com/watch?v=_zhTKGk2Kf8&amp;list=PLAAFB8z-Xn4Eh6EiE7ihg-pCko-wty845\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 462, "user_id": 935099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390b949db33d06e2d2bdf235161c39d6?s=128&d=identicon&r=PG", "display_name": "Andrey Vetlugin", "link": "https://stackoverflow.com/users/935099/andrey-vetlugin"}, "edited": false, "score": 1, "creation_date": 1592074166, "post_id": 59468919, "comment_id": 110296637, "body": "<code>ts-node</code> is an npm package that needs to be installed: <code>npm install --save-dev ts-node</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 2621276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gj38L.png?s=128&g=1", "display_name": "Honsemiro", "link": "https://stackoverflow.com/users/2621276/honsemiro"}, "is_accepted": false, "score": 2, "last_activity_date": 1577190791, "creation_date": 1577190791, "answer_id": 59468919, "question_id": 59468082, "link": "https://stackoverflow.com/questions/59468082/how-to-run-ts-script-with-package-json/59468919#59468919", "title": "How to run ts script with package.json?", "body": "<p>Try typing in the terminal as follows:</p>\n\n<pre><code>ts-node ./src/index.ts\n</code></pre>\n\n<p>Or, try the following modifications to the \"start\" script:</p>\n\n<pre><code>\"start\": \"ts-node ./src/index.ts\"\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12479221"}, "is_accepted": false, "score": 0, "last_activity_date": 1577196818, "creation_date": 1577196818, "answer_id": 59470047, "question_id": 59468082, "link": "https://stackoverflow.com/questions/59468082/how-to-run-ts-script-with-package-json/59470047#59470047", "title": "How to run ts script with package.json?", "body": "<p>Thank you all!!</p>\n\n<p>the trick was this in the package.json:</p>\n\n<pre><code>\"start\": \"tsc-watch --onsuccess \\\"node dist/index.js\\\"\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12479221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3718, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1577196818, "creation_date": 1577186611, "last_edit_date": 1577192730, "question_id": 59468082, "link": "https://stackoverflow.com/questions/59468082/how-to-run-ts-script-with-package-json", "title": "How to run ts script with package.json?", "body": "<p>I try to run typescript files with just a package.json file. So a minimum setup for running typescript files.</p>\n\n<p>I just have a singel file: index.ts:</p>\n\n<pre><code>console.clear();\nconsole.log(\"nic to see you!!\");\n</code></pre>\n\n<p>and package.json file:</p>\n\n<pre><code>\n{\n  \"name\": \"Todo\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\",\n    \"start\": \"node index.js\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n\n\n</code></pre>\n\n<p>But if I try to do :</p>\n\n<p>npm start, I will get this error:</p>\n\n<pre><code>Error: Cannot find module 'D:\\Mijn Documents\\UDEMY\\TypeScript\\Todo\\index.js'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n    at Function.Module.runMain (internal/modules/cjs/loader.js:831:12)\n    at startup (internal/bootstrap/node.js:283:19)\n    at bootstrapNodeJSCore (internal/bootstrap/node.js:622:3)\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! Todo@1.0.0 start: `node index.js`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the Todo@1.0.0 start script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\nnpm WARN Local package.json exists, but node_modules missing, did you mean to install?\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\User.USER-PC\\AppData\\Roaming\\npm-cache\\_logs\\2019-12-24T11_22_12_024Z-debug.log\nPS D:\\Mijn Documents\\UDEMY\\TypeScript\\Todo&gt;\n</code></pre>\n\n<p>So my question is: what I have to change that it will compile?</p>\n\n<p>Thank you</p>\n\n<p>oke, I have it now like this:</p>\n\n<p>packagege.json:</p>\n\n<pre><code>{\n  \"name\": \"Todo\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\",\n    \"build\":\"tsc -p ./src\", \n    \"start\": \"npm run build -- -w\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"ts-node\": \"^8.5.4\",\n    \"typescript\": \"^3.7.4\"\n  }\n}\n</code></pre>\n\n<p>And I installed typescript</p>\n\n<p>and I do: npm start. I still get this error:</p>\n\n<pre><code> npm run build -- -w\n\n\n&gt; Todo@1.0.0 build D:\\Mijn Documents\\UDEMY\\TypeScript\\Todo\n&gt; tsc -p ./src \"-w\"\n\nerror TS5057: Cannot find a tsconfig.json file at the specified directory: './src'.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! Todo@1.0.0 build: `tsc -p ./src \"-w\"`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the Todo@1.0.0 build script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\User.USER-PC\\AppData\\Roaming\\npm-cache\\_logs\\2019-12-24T11_33_38_340Z-debug.log\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! Todo@1.0.0 start: `npm run build -- -w`\nnpm ERR! Exit status 1\n</code></pre>\n\n<p>oke, I have it now like this:</p>\n\n<pre><code>{\n  \"name\": \"Todo\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\",\n    \"build\": \"tsc main.ts dist/\",\n    \"start\": \"npm run build -- -w\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"ts-node\": \"^8.5.4\",\n    \"typescript\": \"^3.7.4\"\n  }\n}\n</code></pre>\n\n<p>and if I do this: npm run. I see this output:</p>\n\n<pre><code>\n&gt; Todo@1.0.0 build D:\\Mijn Documents\\UDEMY\\TypeScript\\Todo\n&gt; tsc main.ts dist/ \"-w\"\n\n[1:46:58 PM] Starting compilation in watch mode...\n\nerror TS6053: File 'dist/.ts' not found.\n\n[1:46:59 PM] Found 1 error. Watching for file changes.\n\n</code></pre>\n\n<p>oke, I see now this:</p>\n\n<pre><code>&gt; Todo@1.0.0 build D:\\Mijn Documents\\UDEMY\\TypeScript\\Todo\n&gt; tsc -p ./ \"-w\"\n\n[2:00:31 PM] Starting compilation in watch mode...\n\n[2:00:34 PM] Found 0 errors. Watching for file changes.\n</code></pre>\n\n<p>But where I can see the results then? Will be nice to go to some port, like: localhost:4200 in the browser, but how to do that?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 276, "user_id": 3021580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4a81353b0447d86c2916a4a480bc14?s=128&d=identicon&r=PG&f=1", "display_name": "FunkeyFlo", "link": "https://stackoverflow.com/users/3021580/funkeyflo"}, "edited": false, "score": 0, "creation_date": 1577186199, "post_id": 59467806, "comment_id": 105115302, "body": "I think this is the same issue:  <a href=\"https://stackoverflow.com/questions/51659420/consider-using-a-mapped-object-type-instead-whats-a-mapped-object-type-and\" title=\"consider using a mapped object type instead whats a mapped object type and\">stackoverflow.com/questions/51659420/&hellip;</a>"}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577186667, "post_id": 59467806, "comment_id": 105115470, "body": "Can you add more context? This looks like XY problem. You could define <code>const Obj = { &quot;A&quot;: &quot;A&quot; } as const</code> and it should be fine. If you need  you can extract <code>SomeKey</code> from this object as well"}, {"owner": {"reputation": 357, "user_id": 2533548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dwaTQ.png?s=128&g=1", "display_name": "walkthroughthecode", "link": "https://stackoverflow.com/users/2533548/walkthroughthecode"}, "reply_to_user": {"reputation": 276, "user_id": 3021580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4a81353b0447d86c2916a4a480bc14?s=128&d=identicon&r=PG&f=1", "display_name": "FunkeyFlo", "link": "https://stackoverflow.com/users/3021580/funkeyflo"}, "edited": false, "score": 0, "creation_date": 1577189758, "post_id": 59467806, "comment_id": 105116516, "body": "@FunkeyFlo, no not really"}, {"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1577189805, "post_id": 59467806, "comment_id": 105116530, "body": "If you want the value to be the same as a key, the typing should be: <code>const Obj = { &quot;A&quot;: &quot;A&quot; } as { [Key in SomeKey]: Key }</code>"}, {"owner": {"reputation": 357, "user_id": 2533548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dwaTQ.png?s=128&g=1", "display_name": "walkthroughthecode", "link": "https://stackoverflow.com/users/2533548/walkthroughthecode"}, "edited": false, "score": 0, "creation_date": 1577189998, "post_id": 59467806, "comment_id": 105116598, "body": "Thanks, this is interesting idea. (doesn&#39;t seem to solve problem) I just wonder how it all works under the hood."}, {"owner": {"reputation": 357, "user_id": 2533548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dwaTQ.png?s=128&g=1", "display_name": "walkthroughthecode", "link": "https://stackoverflow.com/users/2533548/walkthroughthecode"}, "edited": false, "score": 0, "creation_date": 1577190209, "post_id": 59467806, "comment_id": 105116661, "body": "I should clarify: works in sandbox, but doesn&#39;t work in project. Thanks for your help, Aleksey!"}, {"owner": {"reputation": 357, "user_id": 2533548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dwaTQ.png?s=128&g=1", "display_name": "walkthroughthecode", "link": "https://stackoverflow.com/users/2533548/walkthroughthecode"}, "edited": false, "score": 0, "creation_date": 1577190344, "post_id": 59467806, "comment_id": 105116710, "body": "Yep, fixed. I&#39;m ready to accept your answer."}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 2533548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dwaTQ.png?s=128&g=1", "display_name": "walkthroughthecode", "link": "https://stackoverflow.com/users/2533548/walkthroughthecode"}, "edited": false, "score": 0, "creation_date": 1577266644, "post_id": 59471318, "comment_id": 105131488, "body": "Not sure I understood what you mean. The trick is indeed was in <code>{ [k in someKey]: k }</code> instead of  <code>{ [k in SomeKey]: SomeKey }</code> and it was pointed out earlier. Anyway thanks for answer!"}], "tags": [], "owner": {"reputation": 1106, "user_id": 4208022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8PLXt.jpg?s=128&g=1", "display_name": "Brandon Dyer", "link": "https://stackoverflow.com/users/4208022/brandon-dyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1577204467, "creation_date": 1577204467, "answer_id": 59471318, "question_id": 59467806, "link": "https://stackoverflow.com/questions/59467806/typescript-looses-type-when-accessing-via-key/59471318#59471318", "title": "TypeScript looses type when accessing via key", "body": "<p>In order for TypeScript to recognize your <code>TargetObj</code> as a <code>{ [k in SomeKey]: SomeKey }</code> it must satisfy <code>[k in SomeKey]</code>. To do this, you must exhaust all possible values of <code>SomeKey</code>. This can only be done manually as <code>[Obj.A]: \"A\"</code> on its own cannot satisfy this. Additionally, <code>[Obj.A]: \"A\", [Obj.B]: \"B\"</code> won't do it either, as it cannot guarantee that they are the correct values. I tried <code>[Obj.A as A]: \"A\", ...</code> as well, but it doesn't work because, although it can guarantee the type, cannot guarantee the value.</p>\n\n<p>If all you need is for the value to be the same as the key, this gets a whole lot easier as TypeScript gives you the ability to assert that they are the same.</p>\n\n<pre><code>type SomeKey = \"A\" | \"B\";\n\ntype ObjType = { [k in SomeKey]: k };\n\nconst Obj: ObjType = {\n    A: \"A\",\n    B: \"B\",\n};\n\ntype A = typeof Obj.A;\ntype B = typeof Obj.B;\n\nconst TargetObj: ObjType = {\n    [Obj.A]: \"A\",\n    [Obj.B]: \"B\",\n};\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 2533548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dwaTQ.png?s=128&g=1", "display_name": "walkthroughthecode", "link": "https://stackoverflow.com/users/2533548/walkthroughthecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577268877, "creation_date": 1577185335, "last_edit_date": 1577268877, "question_id": 59467806, "link": "https://stackoverflow.com/questions/59467806/typescript-looses-type-when-accessing-via-key", "title": "TypeScript looses type when accessing via key", "body": "<p>I'm trying to use typed object value as key for another object, but TS seems to loose its type and evaluate it as string. </p>\n\n<p>Is it by design? \nAre there any way to get <code>targetObj</code> with keys' of type <code>SomeKey</code>?</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=11&amp;ssc=2&amp;pln=1&amp;pc=1#code/C4TwDgpgBAyg9gWwgaQiKBeKAiAgtqAHxwCFsAocgYzgDsBnYKAeQCMArTKAb3Kn5z4AXIIoBfKAEN6PKAG0A1lACWtWIhRoAuiPhJU6MZVCQouLiYhwAZiw4A6XJQD0zqABVJAJwDmEYGycALQhAHyycgAeIoxeqj4xwHG0PlASqowQkgAmUDYR1HSMHt5%20ARxcvALygY46OLHiQA\" rel=\"nofollow noreferrer\">Link to playground</a></p>\n\n<pre><code>type SomeKey = \"A\" | \"B\"\n\nconst Obj = {\n    \"A\": \"A\"\n} as { [k in SomeKey]: SomeKey }\n\ntype A = typeof Obj.A\n\n// TargetObj ---&gt; { [x: string]: string } instead of { [k in SomeKey]: SomeKey }\nconst TargetObj = {\n    [Obj.A]: \"str\"\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>As Alexey L. correctly pointed out out the problem lies in difference between <code>{[k in SomeKey]: SomeKey}</code> and <code>{[k in SomeKey]: k}</code></p>\n\n<p>But can anybody explain how it works?</p>\n"}, {"tags": ["node.js", "typescript", "profiling", "ts-node"], "answers": [{"comments": [{"owner": {"reputation": 5325, "user_id": 701869, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/23528beff77eca0f655bcf7c58db096e?s=128&d=identicon&r=PG", "display_name": "Pavel Kovalev", "link": "https://stackoverflow.com/users/701869/pavel-kovalev"}, "edited": false, "score": 0, "creation_date": 1586159575, "post_id": 59627324, "comment_id": 108014331, "body": "at least <code>--log-internal-timer-events</code> still working"}], "tags": [], "owner": {"reputation": 405, "user_id": 1044198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9319264a4bf0800afa0c428ed30a4620?s=128&d=identicon&r=PG", "display_name": "miloshavlicek", "link": "https://stackoverflow.com/users/1044198/miloshavlicek"}, "is_accepted": false, "score": 3, "last_activity_date": 1578395675, "creation_date": 1578395675, "answer_id": 59627324, "question_id": 59467747, "link": "https://stackoverflow.com/questions/59467747/profiling-of-a-typescript-node-js-application/59627324#59627324", "title": "Profiling of a TypeScript Node.js application", "body": "<p><strong>You can use <a href=\"https://www.jetbrains.com/webstorm/\" rel=\"nofollow noreferrer\">WebStorm IDE</a> for V8 CPU and Memory Profiling.</strong> Here is a guide: <a href=\"https://www.jetbrains.com/help/webstorm/v8-cpu-and-memory-profiling.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/webstorm/v8-cpu-and-memory-profiling.html</a>.</p>\n\n<p>There is no need to change any part of your code. You can run <strong>V8 Profiling</strong>, take <strong>Heap Snapshots</strong> and view useful <strong>snapshot diffs</strong>.</p>\n\n<p>You can use the default Webstorm guide, however, for Node 12 there is <a href=\"https://youtrack.jetbrains.com/issue/WEB-41341\" rel=\"nofollow noreferrer\">a bug</a> and you will get an error in CLI: <code>bad option: --log-timer-events</code>.</p>\n\n<p>For Typescript project with Express and Socket.io server, I use it with <a href=\"https://www.npmjs.com/package/ts-node-dev\" rel=\"nofollow noreferrer\">ts-node-dev</a> tool which simply passes all unknown params to <code>ts-node</code> and then to <code>node</code>. So, you can apply the same approach when using <code>ts-node</code>. <strong>Set <code>--prof</code> and <code>--logfile=logfile-profiling.log</code> arguments manually</strong>. Here is my example configuration:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cQHLL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cQHLL.png\" alt=\"Run configuration\"></a></p>\n\n<p><strong>Disable Record CPU profiling info</strong> to avoid the bug (we set --prof and --logfile manually) and enable <strong>Allow taking heap snapshots</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6S3oy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6S3oy.png\" alt=\"V8 Profiling configuration\"></a></p>\n\n<p>Then <strong>run Debug for this configuration</strong>. To take a new heap snapshot click to a bottom icon of a left side panel while debugging your app:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vYc3R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vYc3R.png\" alt=\"Heap snapshot icon in the bottom\"></a></p>\n\n<p>Heap Snapshots and CPU profiling logs will be stored in your project folder and you can analyze them from menu <strong>Tools > V8 Profiling > Analyze V8 Heap Snapshot</strong> as well as for CPU logs: <strong>Analyze V8 Profiling logs</strong>. CPU profiling logs are created in intervals, so you can run your app and open new logs at the same time.</p>\n"}], "owner": {"reputation": 365, "user_id": 2437499, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d964cb107e2417269a1a1ee0033f9428?s=128&d=identicon&r=PG", "display_name": "abderrahim_05", "link": "https://stackoverflow.com/users/2437499/abderrahim-05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1578398322, "creation_date": 1577185044, "last_edit_date": 1578398322, "question_id": 59467747, "link": "https://stackoverflow.com/questions/59467747/profiling-of-a-typescript-node-js-application", "title": "Profiling of a TypeScript Node.js application", "body": "<p>I am looking for a tool to make the profiling of a TypeScript Node.js application, and this without modifying the whole code source.</p>\n\n<p>I mean by profiling: launching the application using some specific tool, which outputs the result like this:</p>\n\n<p>Method        | consumed memory     | consumed time</p>\n\n<p>a()           | 1024                | 20ms\n\u2026.</p>\n\n<p>I did some internet research and I have found this one: <a href=\"https://github.com/screepers/screeps-typescript-profiler\" rel=\"nofollow noreferrer\">https://github.com/screepers/screeps-typescript-profiler</a></p>\n\n<p>But using it, I'm obliged to edit the whole code (by adding the @Profiler decorator), I'm looking for something to detect the methods automatically.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["typescript", "mvvm", "devexpress", "frontend", "devextreme"], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 12234701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a400ed8f001b54f56040ae6f4e7187d6?s=128&d=identicon&r=PG&f=1", "display_name": "Nemavhidi", "link": "https://stackoverflow.com/users/12234701/nemavhidi"}, "is_accepted": true, "score": 0, "last_activity_date": 1577559835, "creation_date": 1577559835, "answer_id": 59514033, "question_id": 59467480, "link": "https://stackoverflow.com/questions/59467480/when-i-change-dxgrid-lookup-datasource-the-lookup-stops-expanding/59514033#59514033", "title": "When I change dxGrid lookup dataSource the lookup stops expanding", "body": "<p>I believe that the dataSource was being populated before the data was ready so I placed that function within  a JQuery delay for 2500 ms to ensure that the data is ready</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>setTimeout(\r\nfunction () {\r\n$(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"GenderID\", \"lookup.dataSource\", distinctGenders);\r\n$(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"SizeID\", \"lookup.dataSource\", distinctSizes);\r\n$(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"StyleID\", \"lookup.dataSource\", distinctStyles);\r\n$(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"ColourID\", \"lookup.dataSource\", distinctColours);\r\n}, 2500);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 60, "user_id": 12234701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a400ed8f001b54f56040ae6f4e7187d6?s=128&d=identicon&r=PG&f=1", "display_name": "Nemavhidi", "link": "https://stackoverflow.com/users/12234701/nemavhidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 59514033, "answer_count": 1, "score": 0, "last_activity_date": 1577559835, "creation_date": 1577183836, "last_edit_date": 1577262723, "question_id": 59467480, "link": "https://stackoverflow.com/questions/59467480/when-i-change-dxgrid-lookup-datasource-the-lookup-stops-expanding", "title": "When I change dxGrid lookup dataSource the lookup stops expanding", "body": "<p>So my function seems to process my data alright but the lookup stops working thereafter.\nAs in when I click on the column it stops working this is the code which breaks it:\n(The line between the console logs)                    </p>\n\n<pre><code>console.log(\"Gender Updating:\", $(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"GenderID\", \"lookup\"));\n$(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"GenderID\", \"lookup.dataSource\", distinctGenders);\nconsole.log(\"Gender Updated:\", $(\"#EntitlementRules\").dxDataGrid(\"instance\").columnOption(\"GenderID\", \"lookup\"));\n</code></pre>\n\n<p>and this is where I define the actual column for my lookup:</p>\n\n<pre><code>                   {\n                        dataField: \"GenderID\",\n                        caption: \"Gender\",\n                        allowEditing: true,\n                        allowFixing: true,\n                        lookup: {\n                            dataSource(options) {\n                                return {\n                                    store: new DevExpress.data.ArrayStore({\n                                        data: self.Cache.AllProducts,\n                                        key: \"ID\"\n                                    }),\n                                }\n                            },\n                            valueExpr: \"GenderTypeCode\",\n                            displayExpr: \"Gender\"\n\n                        },\n                    },\n</code></pre>\n\n<p>This is where I call my function:</p>\n\n<pre><code>onCellClick: function (e) {self.refreshProductsInRangeGenderandSize(e.data)},\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577183425, "post_id": 59467338, "comment_id": 105114233, "body": "do you get any errors in the console?"}, {"owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "edited": false, "score": 0, "creation_date": 1577183510, "post_id": 59467338, "comment_id": 105114271, "body": "a stackblitz example is always welcome to show us your problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "is_accepted": false, "score": 1, "last_activity_date": 1577183411, "creation_date": 1577183411, "answer_id": 59467397, "question_id": 59467338, "link": "https://stackoverflow.com/questions/59467338/router-cannot-route-when-click-an-item/59467397#59467397", "title": "Router cannot route when click an item", "body": "<p>I believe you don't use router link as it should be</p>\n\n<p>try something like this :</p>\n\n<pre><code>&lt;h1&gt;Product List Component&lt;/h1&gt;\n&lt;ul class=\"products\"&gt;\n   &lt;li *ngFor=\"let product of products\"&gt;\n      &lt;a [routerLink]=\"['/detail/',product.id]\"&gt;\n         &lt;span class=\"badge\"&gt;{{product.id}}&lt;/span&gt; {{product.name}}\n      &lt;/a&gt;\n   &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>It's because you don't use correctly the routerLink directive </p>\n"}, {"comments": [{"owner": {"reputation": 542, "user_id": 3859828, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef2420c652121e723f76c05181cb638c?s=128&d=identicon&r=PG&f=1", "display_name": "Alann", "link": "https://stackoverflow.com/users/3859828/alann"}, "edited": false, "score": 0, "creation_date": 1577184298, "post_id": 59467483, "comment_id": 105114588, "body": "Well it was mostly for routeLink :) you&#39;re welcome  @SelakaN !"}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577184610, "post_id": 59467483, "comment_id": 105114737, "body": "Router link doesnt have to be inside square brackets: <a href=\"https://angular.io/guide/router#router-links\" rel=\"nofollow noreferrer\">angular.io/guide/router#router-links</a>"}, {"owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "edited": false, "score": 0, "creation_date": 1577184711, "post_id": 59467483, "comment_id": 105114779, "body": "Yes but in this case he is passing value to the controller right? Then it should be in property binding state right?"}], "tags": [], "owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "is_accepted": false, "score": 0, "last_activity_date": 1577184061, "last_edit_date": 1577184061, "creation_date": 1577183841, "answer_id": 59467483, "question_id": 59467338, "link": "https://stackoverflow.com/questions/59467338/router-cannot-route-when-click-an-item/59467483#59467483", "title": "Router cannot route when click an item", "body": "<p>What you are doing here is wrong</p>\n\n<pre><code>&lt;h1&gt;Product List Component&lt;/h1&gt;\n&lt;ul class=\"products\"&gt;\n   &lt;li *ngFor=\"let product of products\"&gt;\n      &lt;a routerLink=\"/detail/{{product.id}}\"&gt;\n         &lt;span class=\"badge\"&gt;{{product.id}}&lt;/span&gt; {{product.name}}\n      &lt;/a&gt;\n   &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Change\n <code>&lt;a routerLink=\"/detail/{{product.id}}\"&gt;</code> \nto </p>\n\n<p><code>&lt;a [routerLink]=\"['/detail/',product.id]\"&gt;</code> </p>\n\n<p>then it will invoke the route correctly. The <code>routerlink</code> has to be inside square brackets. like this :- <code>[routerLink]=\"['YOUR ROUTE HERE']\"</code> Also I assume you have added the routing module to the relevent app.module.ts too.</p>\n"}], "owner": {"reputation": 11, "user_id": 12590310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAduTZWeu7h57UTY-RNc8RJjvsG7WgOEtFXTPNnPA=k-s128", "display_name": "Than Rosberg", "link": "https://stackoverflow.com/users/12590310/than-rosberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577185492, "creation_date": 1577183112, "last_edit_date": 1577184585, "question_id": 59467338, "link": "https://stackoverflow.com/questions/59467338/router-cannot-route-when-click-an-item", "title": "Router cannot route when click an item", "body": "<p>I have an issue with Routing when I click an item in list-item component, it can not route to detail-component. Below is my source:</p>\n\n<p><strong>product-list.component.html:</strong></p>\n\n<pre><code>&lt;h1&gt;Product List Component&lt;/h1&gt;\n&lt;ul class=\"products\"&gt;\n   &lt;li *ngFor=\"let product of products\"&gt;\n      &lt;a routerLink=\"/detail/{{product.id}}\"&gt;\n         &lt;span class=\"badge\"&gt;{{product.id}}&lt;/span&gt; {{product.name}}\n      &lt;/a&gt;\n   &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p><strong>product-detail.component.ts</strong></p>\n\n<pre><code>export class ProductDetailComponent implements OnInit {\n\n   constructor(\n      private route: ActivatedRoute,\n      private productService: ProductService\n   ) { }\n\n   ngOnInit() {\n      this.getProduct();\n   }\n\n   private getProduct(): void {\n      const id = +this.route.snapshot.paramMap.get('id');\n      this.productService.getProductById(id);\n   }\n\n}\n</code></pre>\n\n<p><strong>product-detail.component.html:</strong></p>\n\n<pre><code>&lt;p&gt;Just one line to test routing to this component&lt;/p&gt; \n</code></pre>\n\n<p><strong>ProductService.ts</strong></p>\n\n<pre><code>@Injectable({\n   providedIn: 'root'\n})\nexport class ProductService {\n\n   constructor() { }\n\n   getAllProduct(): Product[] {\n      return arrayProduct;\n   }\n\n   getProductById(id: number): Product {\n      const product = arrayProduct.find(product =&gt; product.id === id);\n      return product;\n   }\n\n}\n</code></pre>\n\n<p><strong>Router</strong></p>\n\n<pre><code>const routes: Routes = [\n   { path: 'detail/:id', component: ProductDetailComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n</code></pre>\n\n<p><strong>Below is the image view of the list-item component</strong>\n<a href=\"https://i.stack.imgur.com/f3xAj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f3xAj.png\" alt=\"View of list-item component\"></a></p>\n\n<p>Anyone can help me, please! Thank you so much.</p>\n"}, {"tags": ["javascript", "typescript", "typescript-generics"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1577183373, "post_id": 59467311, "comment_id": 105114213, "body": "We probably can&#39;t help you based on just the information above, we need more details. But you <b>may</b> want <code>const array = record.serviceElements;</code>. There&#39;s no need for brackets notation, and TypeScript will infer the type of <code>array</code> from the type of <code>record.serviceElements</code>."}, {"owner": {"reputation": 2544, "user_id": 1816781, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2c68768ff6fbc28274686b12cddb9584?s=128&d=identicon&r=PG", "display_name": "Korki Korkig", "link": "https://stackoverflow.com/users/1816781/korki-korkig"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1577192866, "post_id": 59467311, "comment_id": 105117606, "body": "@T.J.Crowder I&#39;ve just edited the question. Sorry, I just didn&#39;t want to make it more complex by sending all the unnecessary code. I think this would be enough?"}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1577206907, "post_id": 59467311, "comment_id": 105121784, "body": "What&#39;s the definition of <code>Type</code>? Your code is expecting <code>Type</code> to have string index access and/or a <code>serviceElements</code> property. If just <code>record.serviceElements</code> isn&#39;t working, then <code>Type</code> doesn&#39;t have that type."}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1577206968, "post_id": 59467311, "comment_id": 105121797, "body": "I notice you&#39;re doing a lot of explicit typing of things, for instance the <code>data</code> parameter on the <code>then</code> handler on the promise that <code>service.list()</code> returns. If <code>service.list</code> is property defined, you shouldn&#39;t need to do that, and doing it makes maintenance more difficult."}, {"owner": {"reputation": 2544, "user_id": 1816781, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2c68768ff6fbc28274686b12cddb9584?s=128&d=identicon&r=PG", "display_name": "Korki Korkig", "link": "https://stackoverflow.com/users/1816781/korki-korkig"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1577257243, "post_id": 59467311, "comment_id": 105129657, "body": "@T.J.Crowder The defenition of the <code>Type</code> is in this case <code>MyObject</code> becuase I call it <code>&lt;GenericComponent&lt;MyObject&gt;..&#47;&gt;</code>. And I&#39;m very sure that <code>MyObject</code> has the <code>serviceElements</code> as you see above. I think typescript compiler just doesn&#39;t allow <code>any</code> type. I&#39;ve also changed <code>service.list().then((data: Type[])</code> to <code>service.list().then(data</code> and indeed, doesn&#39;t need for that;)"}, {"owner": {"reputation": 2544, "user_id": 1816781, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2c68768ff6fbc28274686b12cddb9584?s=128&d=identicon&r=PG", "display_name": "Korki Korkig", "link": "https://stackoverflow.com/users/1816781/korki-korkig"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1577261673, "post_id": 59467311, "comment_id": 105130471, "body": "@T.J.Crowder I&#39;ve just added codesandbox as you can find the link above. And I&#39;ve realise that the <code>strict</code> option in the <code>tsconfig.json</code> can make these errors gone but this is something I am not allowed to remove. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 2544, "user_id": 1816781, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2c68768ff6fbc28274686b12cddb9584?s=128&d=identicon&r=PG", "display_name": "Korki Korkig", "link": "https://stackoverflow.com/users/1816781/korki-korkig"}, "edited": false, "score": 0, "creation_date": 1577190497, "post_id": 59467414, "comment_id": 105116769, "body": "<code>m.serviceElements</code> gives the error: <code>TS2339: Property &#39;serviceElements&#39; does not exist on type &#39;Type&#39;.</code>"}], "tags": [], "owner": {"reputation": 659, "user_id": 1634585, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bcb05899523359d84c35efc664d556fa?s=128&d=identicon&r=PG", "display_name": "lambidu", "link": "https://stackoverflow.com/users/1634585/lambidu"}, "is_accepted": false, "score": -1, "last_activity_date": 1577183460, "creation_date": 1577183460, "answer_id": 59467414, "question_id": 59467311, "link": "https://stackoverflow.com/questions/59467311/getting-generic-object-field-as-array/59467414#59467414", "title": "Getting generic object field as array", "body": "<p>you probably need <code>.map()</code></p>\n\n<pre><code>data.map(m =&gt; m.serviceElements)\n    .forEach(se =&gt; {\n        // TODO: THINGS\n    });\n</code></pre>\n"}], "owner": {"reputation": 2544, "user_id": 1816781, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2c68768ff6fbc28274686b12cddb9584?s=128&d=identicon&r=PG", "display_name": "Korki Korkig", "link": "https://stackoverflow.com/users/1816781/korki-korkig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577261589, "creation_date": 1577182976, "last_edit_date": 1577261589, "question_id": 59467311, "link": "https://stackoverflow.com/questions/59467311/getting-generic-object-field-as-array", "title": "Getting generic object field as array", "body": "<p>I have an object which I want to use its array property called <code>serviceElements</code> inside the <code>GenericComponent</code>.</p>\n\n<p><strong>Objects</strong></p>\n\n<pre><code>interface MyObject {\n    id: number;\n    serviceElements: ServiceElement[];\n}\n\ninterface ServiceElement {\n    id: number;\n}\n</code></pre>\n\n<p><strong>GenericComponent</strong></p>\n\n<pre><code>interface Props&lt;Type&gt; {\n    service: GenericService&lt;Type&gt;;\n}\n\nexport default class GenericComponent&lt;Type&gt; extends React.Component&lt;Props, {}&gt; {\n    ....\n\n    private fillDataTable = (): void =&gt; {\n\n        service.list().then((data: Type[]) =&gt; {\n\n            data.forEach(record =&gt; {\n\n                // 1st attempt\n                const array: ServiceElement[] = record['serviceElements'];\n\n                // record['serviceElements'] gives the error:\n                /* TS7053: Element implicitly has an 'any' type because expression of type '\"serviceElements\"' can't be used to index type 'unknown'.\n                    Property 'serviceElements' does not exist on type 'unknown'.\n                */\n\n                //////////////\n\n                // 2th attempt\n                const array: ServiceElement[] = record['serviceElements' as keyof Type];\n\n                // const array gives the error:\n                /* TS2322: Type 'Type[keyof Type]' is not assignable to type 'ServiceElement[]'.\n                \u00a0\u00a0   Type 'Type[string] | Type[number] | Type[symbol]' is not assignable to type 'ServiceElement[]'.\n                \u00a0\u00a0\u00a0\u00a0   Type 'Type[string]' is not assignable to type 'ServiceElement[]'.\n                */\n            }\n\n        }\n\n    }\n\n    ....\n\n}\n</code></pre>\n\n<p>Inside in a page the <code>GenericComponent</code> will be used like this:</p>\n\n<pre><code>&lt;GenericComponent&lt;MyObject&gt; service={new MyObjectService()}/&gt;\n</code></pre>\n\n<p>So, how can I get inside <code>GenericComponent</code> the <code>record</code>'s field <code>serviceElements</code> as array to loop on it?</p>\n\n<p>I've added the <a href=\"https://codesandbox.io/s/silly-ritchie-kfvs0?fontsize=14&amp;hidenavigation=1&amp;theme=dark\" rel=\"nofollow noreferrer\">codesandbox</a></p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": true, "score": 2, "last_activity_date": 1577184107, "last_edit_date": 1577184107, "creation_date": 1577183727, "answer_id": 59467454, "question_id": 59467029, "link": "https://stackoverflow.com/questions/59467029/is-it-possible-to-have-an-intersection-type-with-different-value-types/59467454#59467454", "title": "Is it possible to have an intersection type with different value types?", "body": "<p>There is a good explanation on index types <a href=\"https://basarat.gitbooks.io/typescript/docs/types/index-signatures.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Declaring an index signature basically means that all explicit properties need to conform to the index signature as well. Using an intersection type to workaround this does work when declaring the type - but you will not be able to create the object. There are some discussions about this on <a href=\"https://github.com/Microsoft/TypeScript/issues/10042\" rel=\"nofollow noreferrer\">github</a> as well.</p>\n\n<p><strong>Using a Subtype</strong></p>\n\n<p>It is considered a best practice to move the index signatures to a subtype like this:</p>\n\n<pre><code>type InitObjType = { \n  customKey?: Observable&lt;boolean&gt;,\n  additionalProperties: { [key: string]: string }\n};\n\nfunction initializator(obj: InitObjType) {...}\n\nconst subject = new Subject&lt;boolean&gt;;\n\ninitializator({\n  customKey: subject,\n  additionalProperties: {\n    a: 'a',\n    b: 'b',\n    c: 'c',\n  }\n});\n</code></pre>\n\n<p><strong>Using less type-safe options</strong></p>\n\n<p>If you absolutely have to keep the additonal properties on the same level, you have to use a less type safe way. Either by changing the index signature:</p>\n\n<pre><code>type InitObjType = { \n  customKey?: Observable&lt;boolean&gt;,\n  [key: string]: string | Observable&lt;boolean&gt;\n};\n\n// Or even less type-safe with any\n\ntype InitObjType = { \n  customKey?: Observable&lt;boolean&gt;,\n  [key: string]: any\n};\n</code></pre>\n\n<p>Or by typecasting when creating the object:</p>\n\n<pre><code>const subject = new Subject&lt;boolean&gt;;\n\ninitializator({\n  a: 'a',\n  b: 'b',\n  c: 'c',\n  customKey: subject,\n} as any);\n</code></pre>\n\n<p>This last example has an interesting sideeffect. Since TypeScript only hinders you from creating an object of this type (thus you have to cast it to any), you can still cast that object back to get type safety again (the tradeoff being that you have to type it out each time).</p>\n\n<pre><code>const subject = new Subject&lt;boolean&gt;;\n\ninitializator({\n  a: 'a',\n  b: 'b',\n  c: 'c',\n  customKey: subject,\n} as any as InitObjType);\n</code></pre>\n"}], "owner": {"reputation": 522, "user_id": 5118992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b123079aaeabb268e7d55640cbba0c62?s=128&d=identicon&r=PG", "display_name": "Maxim Palenov", "link": "https://stackoverflow.com/users/5118992/maxim-palenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59467454, "answer_count": 1, "score": 0, "last_activity_date": 1577184107, "creation_date": 1577181667, "question_id": 59467029, "link": "https://stackoverflow.com/questions/59467029/is-it-possible-to-have-an-intersection-type-with-different-value-types", "title": "Is it possible to have an intersection type with different value types?", "body": "<p>I'm trying to compose initialization object type which I can use to initialize mock objects. I don't want to define all fields because I'd like to reuse this type. I defined the custom type like this:</p>\n\n<pre><code>type InitObjType = { [key: string]: string } &amp; { customKey?: Observable&lt;boolean&gt; };\n\nfunction initializator(obj: InitObjType) {...}\n</code></pre>\n\n<p>if I try to pass the init object into <code>initializator</code> function like that:</p>\n\n<pre><code>const subject = new Subject&lt;boolean&gt;;\n\ninitializator({\n  a: 'a',\n  b: 'b',\n  c: 'c',\n  customKey: subject,\n});\n</code></pre>\n\n<p>I receive the error:</p>\n\n<pre><code>error TS2345: Argument of type '{ a: string; b: string; c: string; customKey: Observable&lt;boolean&gt;; }' is not assignable to parameter of type 'InitObjType'.\n  Type '{ a: string; b: string; c: string; customKey: Observable&lt;boolean&gt;; }' is not assignable to type '{ [key: string]: string; }'.\n    Property 'customKey' is incompatible with index signature.\n      Type 'Observable&lt;boolean&gt;' is not assignable to type 'string'.\n</code></pre>\n\n<p>I use TypeScript 3.5.3.</p>\n\n<p>Are there any ideas why intersection of types doesn't work?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["typescript", "tsc"], "comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1577182385, "post_id": 59466745, "comment_id": 105113848, "body": "Check the <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"nofollow noreferrer\">compiler options</a> I think <code>-p</code> is the one you need"}, {"owner": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "reply_to_user": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1577182762, "post_id": 59466745, "comment_id": 105113981, "body": "That does compile the entire serve project but it will still not output it in the correct outDir, any idea why that&#39;s happening?"}, {"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1577213583, "post_id": 59466745, "comment_id": 105123480, "body": "Where does it output?"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "edited": false, "score": 0, "creation_date": 1577182050, "post_id": 59466963, "comment_id": 105113723, "body": "It works but it&#39;s ignoring the out dir from the tsconfig in the server folder that extends the tsconig in the root. &quot;outDir&quot;: &quot;../../builds/development/private&quot; it just puts the js file in the server folder why is thin happening? I added the configs to the question"}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "reply_to_user": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "edited": false, "score": 0, "creation_date": 1577182570, "post_id": 59466963, "comment_id": 105113906, "body": "This is strange. I updated my answer with an example of a tsconfig. This works for me (difference being the include section and no &quot;noEmit&quot;). Also, full filename on extends."}], "tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": false, "score": 0, "last_activity_date": 1577182499, "last_edit_date": 1577182499, "creation_date": 1577181335, "answer_id": 59466963, "question_id": 59466745, "link": "https://stackoverflow.com/questions/59466745/is-it-possible-to-run-he-typescript-compiler-in-a-child-folder/59466963#59466963", "title": "Is it possible to run he typescript compiler in a child folder?", "body": "<p>Create a tsconfig that extends your root tsconfig and place it in the folder you want to build. In that tsconfig include the files inside that folder. Then specify that tsconfig in your script.</p>\n\n<p>The specific <code>tsconfig.json</code> should look something like this:</p>\n\n<pre><code>{\n  \"extends\": \"../../tsconfig.json\",\n  \"compilerOptions\": {\n    \"outDir\": \"../../builds/development/private\",\n    \"noEmit\": false\n  },\n  \"include\": [\n    \"./**/*.ts\"\n  ],\n  \"exclude\": [\n    \"./**/*.spec.ts\"\n  ]\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "is_accepted": true, "score": 1, "last_activity_date": 1577787198, "creation_date": 1577787198, "answer_id": 59542665, "question_id": 59466745, "link": "https://stackoverflow.com/questions/59466745/is-it-possible-to-run-he-typescript-compiler-in-a-child-folder/59542665#59542665", "title": "Is it possible to run he typescript compiler in a child folder?", "body": "<p>I ended up doing them bot with Parcel and the running them concurrently </p>\n\n<pre><code>\"dev\": \"concurrently --kill-others \\\"npm run watch-client\\\" \\\"npm run watch-server\\\" \\\"npm run serve\\\"\",\n\"watch-client\": \"parcel ./src/client/index.html --open --out-dir ./builds/development/public\",\n\"watch-server\": \"parcel ./src/server/index.ts --out-dir ./builds/development/private --target node\",\n\"serve\": \"nodemon ./builds/development/private/index.js\",\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 12560680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf00a8afe015ed854666f5f3f94e34c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/12560680/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 59542665, "answer_count": 2, "score": 1, "last_activity_date": 1577787198, "creation_date": 1577180364, "last_edit_date": 1577182152, "question_id": 59466745, "link": "https://stackoverflow.com/questions/59466745/is-it-possible-to-run-he-typescript-compiler-in-a-child-folder", "title": "Is it possible to run he typescript compiler in a child folder?", "body": "<p>I have a project with the following file structure</p>\n\n<pre><code>builds\n-dev\n--public\n--private\n-production\n--public\n--private\n\nsrc\n-server\n-client\n\ntsconfig\npackage.json \n</code></pre>\n\n<p>I'm using the parcel-bundler to compile and bundle the client folder. And I want to use the typescript compiler or tsc to compile the node js server folder. Is it possible to run the tsc from a specific directory? </p>\n\n<pre><code>  \"scripts\": {\n    \"dev\": \"tsc (directory name goes here so the server directory) &amp;&amp; parcel ./src/client/index.html --open --out-dir ./builds/development/public\"\n  }\n</code></pre>\n\n<p><strong>Root tsconfig</strong></p>\n\n<pre><code> {\n      \"compilerOptions\": {\n        /* Basic Options */\n        \"target\": \"ES5\",                          /* Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2018', 'ES2019' or 'ESNEXT'. */\n        \"module\": \"commonjs\",                     /* Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'. */\n        \"lib\": [\"DOM\", \"ES2018\"],                             /* Specify library files to be included in the compilation. */\n        \"allowJs\": false,                       /* Allow javascript files to be compiled. */\n        \"checkJs\": false,                       /* Report errors in .js files. */\n        \"sourceMap\": true,                     /* Generates corresponding '.map' file. */\n        \"removeComments\": true,                /* Do not emit comments to output. */\n        \"noEmit\": true,                        /* Do not emit outputs. */\n        \"declaration\": true,\n\n        /* Strict Type-Checking Options */\n        \"strict\": true,                           /* Enable all strict type-checking options. */\n        \"noImplicitAny\": true,                 /* Raise error on expressions and declarations with an implied 'any' type. */\n        \"strictNullChecks\": true,              /* Enable strict null checks. */\n        \"strictFunctionTypes\": true,           /* Enable strict checking of function types. */\n        \"strictBindCallApply\": true,           /* Enable strict 'bind', 'call', and 'apply' methods on functions. */\n        \"strictPropertyInitialization\": true,  /* Enable strict checking of property initialization in classes. */\n        \"noImplicitThis\": true,                /* Raise error on 'this' expressions with an implied 'any' type. */\n        \"alwaysStrict\": true,                  /* Parse in strict mode and emit \"use strict\" for each source file. */\n\n        /* Additional Checks */\n        \"noUnusedLocals\": true,                /* Report errors on unused locals. */\n        \"noUnusedParameters\": true,            /* Report errors on unused parameters. */\n        \"noImplicitReturns\": true,             /* Report error when not all code paths in function return a value. */\n        \"noFallthroughCasesInSwitch\": true,    /* Report errors for fallthrough cases in switch statement. */\n\n        /* Module Resolution Options */\n        \"moduleResolution\": \"node\",            /* Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6). */\n        // \"paths\": {\n        //   \"~*\": [\"./*\"]\n        // },\n        \"typeRoots\": [\"node_modules/@types\"],                       /* List of folders to include type definitions from. */\n        \"esModuleInterop\": true,                  /* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies 'allowSyntheticDefaultImports'. */\n        \"forceConsistentCasingInFileNames\": true,  /* Disallow inconsistently-cased references to the same file. */\n        \"experimentalDecorators\": true\n      }\n    }\n</code></pre>\n\n<p><strong>Server tsconfig</strong></p>\n\n<pre><code>{\n    \"extends\": \"../../tsconfig\",\n    \"compilerOptions\": {\n        \"outDir\": \"../../builds/development/private\",\n        \"rootDir\": \".\"\n    }\n}\n</code></pre>\n"}, {"tags": ["typescript", "neo4j", "cypher"], "answers": [{"tags": [], "owner": {"reputation": 479, "user_id": 6892466, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47e1040da114ac4f2336475ac969bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "mneumann", "link": "https://stackoverflow.com/users/6892466/mneumann"}, "is_accepted": true, "score": 0, "last_activity_date": 1577185769, "last_edit_date": 1592644375, "creation_date": 1577185769, "answer_id": 59467898, "question_id": 59466631, "link": "https://stackoverflow.com/questions/59466631/neo4j-js-driver-cypher-where-clause-not-working-with-parameters/59467898#59467898", "title": "Neo4j JS driver cypher &quot;WHERE&quot; clause not working with parameters", "body": "<p>Turns out you can't parametrize <a href=\"https://neo4j.com/docs/cypher-manual/current/syntax/parameters/\" rel=\"nofollow noreferrer\">for these kinds of constructs.</a></p>\n<blockquote>\n<p>Parameters cannot be used for the following constructs, as these form part of the query structure that is compiled into a query plan:</p>\n<ul>\n<li>property keys; so, MATCH (n) WHERE n.$param = 'something' is invalid</li>\n<li>relationship types</li>\n<li>labels</li>\n</ul>\n</blockquote>\n<p>I built the string myself like so:</p>\n<pre><code>'WHERE a.id = ' + userId + ' AND b.id = ' + todoId +\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 6892466, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47e1040da114ac4f2336475ac969bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "mneumann", "link": "https://stackoverflow.com/users/6892466/mneumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 59467898, "answer_count": 1, "score": 1, "last_activity_date": 1577185769, "creation_date": 1577179891, "question_id": 59466631, "link": "https://stackoverflow.com/questions/59466631/neo4j-js-driver-cypher-where-clause-not-working-with-parameters", "title": "Neo4j JS driver cypher &quot;WHERE&quot; clause not working with parameters", "body": "<p>I have a simple function that matches a User to an Id and should create a relationship like this.</p>\n\n<pre><code>const createRelation = (userId: string, todoId: string, relationship: string) =&gt; {\n    return session.run(\n        'MATCH (a:User),(b:Todo)' +\n        'WHERE a.id = $userId AND b.id = $todoId' +\n        'CREATE (b)-[r:$relationship]-&gt;(a)' +\n        'RETURN r',\n        {\n            userId: userId,\n            todoId: todoId,\n            relationship: relationship,\n        }\n    );\n}\n</code></pre>\n\n<p>This code does not throw any errors, but it also does not create a relationship. If I set the values for <code>userId</code> and <code>todoId</code>manually, e.g. to <code>\"1\"</code>, it works fine! Am I using the parameters wrong? If so, how? (I also already tried setting the relationship type manually, no relationship gets created if I use the parameters.)</p>\n"}, {"tags": ["javascript", "typescript", "eslint"], "comments": [{"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 2, "creation_date": 1577179668, "post_id": 59466591, "comment_id": 105112840, "body": "On browsers, <code>window.name</code> is defined, so that (unfortunately) will compile and run. Change it to most anything else and <code>no-undef</code> should throw, I think. Wonder why it&#39;s typed as <code>never</code> though (I can reproduce that too), I&#39;d have thought it&#39;d be a string... <code>declare const name: never;</code> on 19558 of <code>lib.dom.d.ts</code>, weird"}, {"owner": {"reputation": 19681, "user_id": 402037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc3b3667c918504550fd656ac50b87f?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/402037/andreas"}, "reply_to_user": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 1, "creation_date": 1577180113, "post_id": 59466591, "comment_id": 105112998, "body": "@CertainPerformance Why <code>never</code>? -&gt; <a href=\"https://github.com/microsoft/TypeScript/issues/15424\" rel=\"nofollow noreferrer\">Improve type safety of <code>name</code> global variable #15424</a>"}, {"owner": {"reputation": 21, "user_id": 11450994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22aca2c6e87f3b0590f73d25c160eba2?s=128&d=identicon&r=PG&f=1", "display_name": "Climber22", "link": "https://stackoverflow.com/users/11450994/climber22"}, "reply_to_user": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1577268320, "post_id": 59466591, "comment_id": 105131831, "body": "@CertainPerformance thanks your replay. I didn&#39;t know that, interesting. So this is special problem the variable named &#39;name&#39;."}], "owner": {"reputation": 21, "user_id": 11450994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22aca2c6e87f3b0590f73d25c160eba2?s=128&d=identicon&r=PG&f=1", "display_name": "Climber22", "link": "https://stackoverflow.com/users/11450994/climber22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1611945020, "answer_count": 0, "score": 1, "last_activity_date": 1577179631, "creation_date": 1577179631, "question_id": 59466591, "link": "https://stackoverflow.com/questions/59466591/is-there-any-way-to-check-if-never-type-and-raise-error-or-warning-for-it", "closed_reason": "Duplicate", "title": "Is there any way to check if &quot;never type&quot; and raise error or warning for it?", "body": "<p>If a variable is never without intension, in my opinion, it'd better to raise error by linter.</p>\n\n<p>In the case like below.</p>\n\n<pre><code>const nameVariable = \"Bob\";\n\nconst result = `Mr. ${name}` // &gt;&gt; I wanna get error for this line.\n\n\n</code></pre>\n"}, {"tags": ["typescript", "class", "types"], "comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 1, "creation_date": 1577179255, "post_id": 59466470, "comment_id": 105112683, "body": "Since <code>Bike</code> and <code>Car</code> are both vehicles why not just do <code>const vehicleArray: Vehicle[]</code> ?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1577179306, "post_id": 59466470, "comment_id": 105112700, "body": "As @apokryfos suggests, and then narrow using <code>instanceof</code>: <a href=\"https://www.typescriptlang.org/play/#code/MYGwhgzhAEBqCmALAlqe0DeBYAUNaADgK4BGIq0Y0AvNAIwDcuAvrrqJDAMJgBO08AB4AXeADsAJjAQo0mXPmJkKJGtABMTHKxztwUaACFkAa3RDRk6UlQh02PIVLlg0V7QDMWnewD2YiGFoADcbNABBXl4wAE8ALjgwuwBtAF01ZLF4AHdoHl4ACgBKABpoLNzjM2LUrVxQ2TtI6JiAOgBbMAICgobbeCKaAD55R3xgfwhfO1aQXwBzXqT4VrBBgHp16DiihXxoZAAzaCXG9GQA4TAxYHhfY-zBh32Xt0nplbnFvrRWkg2tjs9vgdC8jicfnYDpdrrd7kZTANRq99hMAh9ZgtTv1WsAAdtdmNoDpmEUGEA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 10603408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A3-m3c2xtVg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDcl3DyjAl5q9kLp4ahSmDIfgdj_A/mo/photo.jpg?sz=128", "display_name": "Zeswen", "link": "https://stackoverflow.com/users/10603408/zeswen"}, "edited": false, "score": 0, "creation_date": 1577179419, "post_id": 59466470, "comment_id": 105112754, "body": "Let&#39;s say I want to use property <code>b</code> and <code>c</code> that are only in <code>Car</code> and <code>Bike</code>. Is there any way to use them without abstractly declaring these properties in <code>Vehicle</code>?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1577180117, "post_id": 59466470, "comment_id": 105112999, "body": "@Zeswen only by checking for derived type instances with <code>instnceof</code>  as in my code"}, {"owner": {"reputation": 43, "user_id": 10603408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A3-m3c2xtVg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDcl3DyjAl5q9kLp4ahSmDIfgdj_A/mo/photo.jpg?sz=128", "display_name": "Zeswen", "link": "https://stackoverflow.com/users/10603408/zeswen"}, "edited": false, "score": 0, "creation_date": 1577180389, "post_id": 59466470, "comment_id": 105113095, "body": "Got it, not entirely happy about it but I guess thats it! Thank you both!"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577242720, "post_id": 59466470, "comment_id": 105127954, "body": "What about <a href=\"https://www.typescriptlang.org/play/#code/MYGwhgzhAEBqCmALAlqe0DeBYAUNaADgK4BGIq0Y0AvNAIwDcuAvrrqJDAMJgBO08AB4AXeADsAJjAQo0mXPmJkKJGtABMTHKxztwUaACFkAa3RDRk6UlQh02PIVLlg0V7QDMWnewD2YiGFoADcbNABBXl4wAE81AG0xeAB3aB5eABpoJNTjMwBdLQB6IuhkADNoGN8iaEQwUOhhX2gAc2RG5CCqYRiCeCz2zqCAA0jomIAedOgAHyNTeAA+EbYcUNk7cdiAOgBbMAIACiON23gAShol+UdgfwhfOx2QX1bTsOewK5LoAC4LgoypUjgAiEigspiEKfS63fD4e4BJ7wF5vD6bVEkC5afDMAQgCD2IGIh4otHvM5oHbAHFAnTMHFAA\" rel=\"nofollow noreferrer\">this</a>?  Does that work for you?"}], "owner": {"reputation": 43, "user_id": 10603408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A3-m3c2xtVg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDcl3DyjAl5q9kLp4ahSmDIfgdj_A/mo/photo.jpg?sz=128", "display_name": "Zeswen", "link": "https://stackoverflow.com/users/10603408/zeswen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577179592, "creation_date": 1577179077, "last_edit_date": 1577179592, "question_id": 59466470, "link": "https://stackoverflow.com/questions/59466470/typescript-declaring-an-array-of-extended-types", "title": "TypeScript: Declaring an array of extended types", "body": "<p>I am facing this situation now where i dynamically import every model of my application into an array. Each model has shared properties from Model and its own, however, I don't know how to type my \"model extended\" array.</p>\n\n<blockquote>\n  <p>EDIT:  I am using <code>sequelize</code> for Models in my server. I need my <code>User</code> model that extends from <code>Model</code> and is dynamically imported into my App to have its properties (let's say email and password).\n  However, if this is a Model array I can't access the properties I am talking about in the User model.</p>\n</blockquote>\n\n<pre><code>class Vehicle {\n  public a = 1;\n}\n\nclass Car extends Vehicle {\n  public b = 2;\n}\n\nclass Bike extends Vehicle {\n  public c = 3;\n}\n\nconst vehicleArray: any extends Vehicle[] = [Car, Bike];\n\nvehicleArray.map((vehicle) =&gt; {\n  console.log(vehicle.a) // :)\n  console.log(vehicle.b) // :(\n  console.log(vehicle.c) // :(\n});\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=1&amp;ssc=1&amp;pln=20&amp;pc=1#\" rel=\"nofollow noreferrer\">Playground Link</a></p>\n"}, {"tags": ["typescript", "jestjs"], "answers": [{"tags": [], "owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "is_accepted": true, "score": 1, "last_activity_date": 1577180006, "creation_date": 1577180006, "answer_id": 59466657, "question_id": 59466379, "link": "https://stackoverflow.com/questions/59466379/how-to-check-method-tohavebeencalled-or-not-using-jest/59466657#59466657", "title": "How to check method tohavebeencalled or not using jest?", "body": "<p>You can use <code>jest.spyOn</code> to do this.</p>\n\n<p>E.g.</p>\n\n<p><code>sample.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class Sample {\n  update(): void {\n    this.update1();\n    this.update2();\n  }\n\n  protected update1(): void {\n    console.log('hai');\n  }\n\n  protected update2(): void {\n    console.log('hello');\n  }\n}\n</code></pre>\n\n<p><code>sample.test.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Sample } from './sample';\n\ndescribe('59466379', () =&gt; {\n  it('should pass', () =&gt; {\n    // @ts-ignore\n    const update1 = jest.spyOn(Sample.prototype, 'update1');\n    // @ts-ignore\n    const update2 = jest.spyOn(Sample.prototype, 'update2');\n    const instance = new Sample();\n    instance.update();\n    expect(update1).toBeCalledTimes(1);\n    expect(update2).toBeCalledTimes(1);\n    update1.mockRestore();\n    update2.mockRestore();\n  });\n});\n</code></pre>\n\n<p>Unit test result with 100% coverage:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code> PASS  src/stackoverflow/59466379/sample.test.ts (10.71s)\n  59466379\n    \u2713 should pass (16ms)\n\n  console.log src/stackoverflow/59466379/sample.ts:317\n    hai\n\n  console.log src/stackoverflow/59466379/sample.ts:327\n    hello\n\n-----------|----------|----------|----------|----------|-------------------|\nFile       |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n-----------|----------|----------|----------|----------|-------------------|\nAll files  |      100 |      100 |      100 |      100 |                   |\n sample.ts |      100 |      100 |      100 |      100 |                   |\n-----------|----------|----------|----------|----------|-------------------|\nTest Suites: 1 passed, 1 total\nTests:       1 passed, 1 total\nSnapshots:   0 total\nTime:        12.231s\n</code></pre>\n\n<p>Source code: <a href=\"https://github.com/mrdulin/jest-codelab/tree/master/src/stackoverflow/59466379\" rel=\"nofollow noreferrer\">https://github.com/mrdulin/jest-codelab/tree/master/src/stackoverflow/59466379</a></p>\n"}], "owner": {"reputation": 516, "user_id": 9614586, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VJS31giU8OA/AAAAAAAAAAI/AAAAAAAAAEo/_T-FdC7lwDo/photo.jpg?sz=128", "display_name": "hari prasanth", "link": "https://stackoverflow.com/users/9614586/hari-prasanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 59466657, "answer_count": 1, "score": 0, "last_activity_date": 1577181203, "creation_date": 1577178540, "last_edit_date": 1577181203, "question_id": 59466379, "link": "https://stackoverflow.com/questions/59466379/how-to-check-method-tohavebeencalled-or-not-using-jest", "title": "How to check method tohavebeencalled or not using jest?", "body": "<p>I have a function inside functions. I tried to check the inner function called or not using jest. but all test case is failed.  </p>\n\n<p><strong>Sample.ts</strong>  </p>\n\n<pre><code>export class Sample\n{\n    update():void\n     {\n      this.update1()\n      this.update2()\n     }\n\n     protected update1():void\n     {\n       console.log('hai');\n     }\n\n      protected update2():void\n     {\n       console.log('hello');\n     }\n}\n</code></pre>\n\n<p>How to check update() inner function is called or not usinfg jest</p>\n"}, {"tags": ["reactjs", "typescript", "react-native"], "comments": [{"owner": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577178147, "post_id": 59466257, "comment_id": 105112289, "body": "It will be better if you create controls on the response of second API."}, {"owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "reply_to_user": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577178648, "post_id": 59466257, "comment_id": 105112454, "body": "i cannot change the api... i can only create some temp schema"}, {"owner": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577178745, "post_id": 59466257, "comment_id": 105112494, "body": "But you can definitely change the formation of form controls."}, {"owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "reply_to_user": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577178964, "post_id": 59466257, "comment_id": 105112582, "body": "Please suggest how to add new key to fields array?"}, {"owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "reply_to_user": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577179000, "post_id": 59466257, "comment_id": 105112595, "body": "fields = [{ id: 1, input: &#39;TextBox&#39;},  { id: 2, input: &#39;TextArea&#39;}]"}, {"owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "reply_to_user": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577179016, "post_id": 59466257, "comment_id": 105112600, "body": "should be, fields = [{ id: 1, input: &#39;TextBox&#39;, value: &#39;testTextBox&#39;},      { id: 2, input: &#39;TextArea&#39;, value: &#39;testTextArea&#39;}]"}, {"owner": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577179332, "post_id": 59466257, "comment_id": 105112714, "body": "Will the length of the response in both the APIs will remain same??"}, {"owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "reply_to_user": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "edited": false, "score": 0, "creation_date": 1577179435, "post_id": 59466257, "comment_id": 105112763, "body": "no it will not be same, i have to match id field and update the control"}, {"owner": {"reputation": 935, "user_id": 8403694, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8a8bc05b6e5e71ad20f74bb726c9c57?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Bansal", "link": "https://stackoverflow.com/users/8403694/mayank-bansal"}, "reply_to_user": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "edited": false, "score": 0, "creation_date": 1577179812, "post_id": 59466257, "comment_id": 105112902, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204778/discussion-between-mayank-bansal-and-apps\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "edited": false, "score": 0, "creation_date": 1577181238, "post_id": 59466671, "comment_id": 105113429, "body": "i cannot use setState({id: value}) since controls are dynamic , i will generate 10 input fields dynamically and it will bind same value to all input fields because  value={this.state.id} is same for all 10 input fields"}], "tags": [], "owner": {"reputation": 1, "user_id": 12590153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b95326428a59404bc08e47ce0899d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Alkaf", "link": "https://stackoverflow.com/users/12590153/ahmed-alkaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1577180074, "creation_date": 1577180074, "answer_id": 59466671, "question_id": 59466257, "link": "https://stackoverflow.com/questions/59466257/how-to-bind-values-to-dynamic-controls-in-react/59466671#59466671", "title": "How to bind values to dynamic controls in react", "body": "<p>use:\n    setState({})</p>\n\n<p>create the controls binded to state as:</p>\n\n<pre><code>(&lt;input type=\"text\" id={type.id}&gt; value={this.state.id}/&gt;)\n</code></pre>\n\n<p>upon receiving the values set it in the state as:</p>\n\n<pre><code>this.setState({id: value});\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 6113911, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/8d40f1c36acf264dd4a851dfa3592e0f?s=128&d=identicon&r=PG&f=1", "display_name": "apps", "link": "https://stackoverflow.com/users/6113911/apps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577182852, "creation_date": 1577177893, "last_edit_date": 1577182852, "question_id": 59466257, "link": "https://stackoverflow.com/questions/59466257/how-to-bind-values-to-dynamic-controls-in-react", "title": "How to bind values to dynamic controls in react", "body": "<p>I am loading form controls dynamically by making 2 api calls. First api to get form control's list and second api to get data for the controls loaded previously.\nFirst half works fine and i am able to load controls dynamically,</p>\n\n<p>schema:</p>\n\n<pre><code>[{ id: 1, input: 'TextBox'},\n { id: 2, input: 'TextArea'}]\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>fields.map((type: any, i: any) =&gt; {\n  switch (type.input) {\n   case 'TextBox':\n   return (&lt;input type=\"text\" id={type.id}&gt; /&gt;)\n   case 'TextArea':\n   return (&lt;textarea itemType=\"text\" id={type.id}&gt; /&gt;)}});\n</code></pre>\n\n<p>Above code works fine and I am able to create form controls.</p>\n\n<p>Next part is binding value to the dynamic controls, I make another API call to get data and I should map id field and bind data</p>\n\n<p>schema:</p>\n\n<pre><code>[{ id: 1, value: 'testTextBox'},\n { id: 2, value: 'testTextArea'}]\n</code></pre>\n\n<p>How can I bind data to the controls now?\nI have tried using state, but not able to achieve that. \nor i can update first schema and add value key to it after i get second api response\nsomething like below,</p>\n\n<pre><code> fields = [{ id: 1, input: 'TextBox', value: 'testTextBox'},\n     { id: 2, input: 'TextArea', value: 'testTextArea'}]\n</code></pre>\n\n<p>Please suggest how to loop and add value key to fields array?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 1250, "user_id": 5706900, "user_type": "registered", "profile_image": "https://graph.facebook.com/987906877914619/picture?type=large", "display_name": "Siddharth Pal", "link": "https://stackoverflow.com/users/5706900/siddharth-pal"}, "edited": false, "score": 1, "creation_date": 1577177792, "post_id": 59466212, "comment_id": 105112154, "body": "can you please provide more details on the component?"}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1577180908, "post_id": 59466212, "comment_id": 105113308, "body": "whats the error when it fails?"}], "answers": [{"tags": [], "owner": {"reputation": 4481, "user_id": 5939058, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/m438e.jpg?s=128&g=1", "display_name": "Surjeet Bhadauriya", "link": "https://stackoverflow.com/users/5939058/surjeet-bhadauriya"}, "is_accepted": true, "score": 1, "last_activity_date": 1577177911, "creation_date": 1577177911, "answer_id": 59466260, "question_id": 59466212, "link": "https://stackoverflow.com/questions/59466212/string-into-a-function-call-in-angular/59466260#59466260", "title": "String into a function call in Angular", "body": "<p>It's pretty easy. For an example <strong><code>getData</code></strong> is your function name.</p>\n\n<pre><code>getData() {\n  // your code goes here...\n}\n\nfunctionName = 'getData'; // function name as a string\n</code></pre>\n\n<p><strong>Now you can call this function like below:</strong></p>\n\n<pre><code>this[functionName]();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 5089072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34157045715e621c4a07b627e8665cc2?s=128&d=identicon&r=PG&f=1", "display_name": "raj240", "link": "https://stackoverflow.com/users/5089072/raj240"}, "is_accepted": false, "score": 0, "last_activity_date": 1577178085, "creation_date": 1577178085, "answer_id": 59466295, "question_id": 59466212, "link": "https://stackoverflow.com/questions/59466212/string-into-a-function-call-in-angular/59466295#59466295", "title": "String into a function call in Angular", "body": "<p>If your function is defined in a seperate class or service import it via the constructor and invoke the function. Like this</p>\n\n<pre><code>constructor(private serv: FunctionService){\n   serv.your_function();\n}\n</code></pre>\n\n<p>Call it inside the constructor or where ever it is appropriate depending on the context.\nHope this sounds meaningful.</p>\n"}], "owner": {"reputation": 1228, "user_id": 5594008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05617707e2d7092fc6e202cdcf38c629?s=128&d=identicon&r=PG&f=1", "display_name": "Headmaster", "link": "https://stackoverflow.com/users/5594008/headmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 59466260, "answer_count": 2, "score": 1, "last_activity_date": 1577200053, "creation_date": 1577177597, "question_id": 59466212, "link": "https://stackoverflow.com/questions/59466212/string-into-a-function-call-in-angular", "title": "String into a function call in Angular", "body": "<p>I got a function name and want to call it inside Angular class (.ts file). <code>eval()</code> is not an option.</p>\n\n<p>I have tried using <code>window[functionName]</code> , but it fails, guess because window context is outside the class</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["reactjs", "typescript", "webpack", "babeljs", "css-modules"], "comments": [{"owner": {"reputation": 327, "user_id": 6374595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URVQ7.jpg?s=128&g=1", "display_name": "Karlan", "link": "https://stackoverflow.com/users/6374595/karlan"}, "edited": false, "score": 0, "creation_date": 1577174501, "post_id": 59465510, "comment_id": 105111146, "body": "I find your webpack config somewhat complicated but I know that the cssMiniExtractPlugin and the style-loader don&#39;t work together. Also the order of the loaders is important"}], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 6374595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URVQ7.jpg?s=128&g=1", "display_name": "Karlan", "link": "https://stackoverflow.com/users/6374595/karlan"}, "is_accepted": false, "score": 0, "last_activity_date": 1577174734, "creation_date": 1577174734, "answer_id": 59465705, "question_id": 59465510, "link": "https://stackoverflow.com/questions/59465510/whats-best-way-to-config-react-components-library-with-webpack-typescript-css/59465705#59465705", "title": "What&#39;s best way to config React components library with Webpack, typescript, css modules and SASS", "body": "<p>This is my webpack config for the styles part:</p>\n\n<pre><code>{\n            test: /\\.s?css$/,\n            use: [\n                {\n                    loader: MiniCssExtractPlugin.loader\n                },\n                {\n                    loader: 'css-loader'\n                },\n                {\n                    loader: 'postcss-loader',\n                    options: {\n                        config: {\n                            path: 'postcss.config.js'\n                        }\n                    }\n                },\n                {\n                    loader: 'sass-loader'\n                },\n            ]\n        }\n</code></pre>\n\n<p>and in my postcss.config.js:</p>\n\n<pre><code>module.exports = {\n    plugins: [\n      require('autoprefixer')\n    ]\n  }\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 10232249, "user_type": "registered", "profile_image": "https://graph.facebook.com/1984180098538941/picture?type=large", "display_name": "Enesy", "link": "https://stackoverflow.com/users/10232249/enesy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577174734, "creation_date": 1577173463, "question_id": 59465510, "link": "https://stackoverflow.com/questions/59465510/whats-best-way-to-config-react-components-library-with-webpack-typescript-css", "title": "What&#39;s best way to config React components library with Webpack, typescript, css modules and SASS", "body": "<p>I'm config a React components library for reuses in other our projects. I want to use these:</p>\n\n<ul>\n<li>Typescript for components</li>\n<li>Css modules</li>\n<li>Sass</li>\n<li>Webpack for bundle</li>\n</ul>\n\n<p>So this is my webpack config:</p>\n\n<pre><code>    const childProcess = require('child_process');\n\nconst path = require('path');\nconst url = require('url');\n\nconst webpack = require('webpack');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nconst loadersConf = require('./webpack.loaders');\n\nconst NPM_TARGET = process.env.npm_lifecycle_event; //eslint-disable-line no-process-env\n\nconst targetIsRun = NPM_TARGET === 'run';\nconst targetIsTest = NPM_TARGET === 'test';\nconst targetIsStats = NPM_TARGET === 'stats';\nconst targetIsDevServer = NPM_TARGET === 'dev-server';\n\nconst DEV = targetIsRun || targetIsStats || targetIsDevServer;\n\nconst STANDARD_EXCLUDE = [\n    path.join(__dirname, 'node_modules'),\n];\n\n// These files will be imported in every sass file\nconst sassResourcesPaths = [\n    path.resolve(__dirname, 'src/styles/abstracts/_variables.sass'),\n    path.resolve(__dirname, 'src/styles/abstracts/_mixins.sass'),\n];\n\nconst config = {\n    module: {\n        rules: loadersConf,\n    },\n    resolve: {\n        modules: [\n            'node_modules',\n            path.resolve(__dirname),\n        ],\n        extensions: ['.js', '.jsx', '.ts', '.tsx', '.css', '.scss'],\n    },\n    performance: {\n        hints: 'warning',\n    },\n    target: 'web',\n    plugins: [\n        new webpack.DefinePlugin({\n            COMMIT_HASH: JSON.stringify(childProcess.execSync('git rev-parse HEAD || echo dev').toString()),\n        }),\n        new MiniCssExtractPlugin({\n            filename: '[name].[contentHash].css',\n            chunkFilename: '[name].[contentHash].css',\n        }),\n    ],\n};\n\nif (DEV) {\n    config.mode = 'development';\n    config.devtool = 'source-map';\n}\n\n\nconst env = {};\nif (DEV) {\n} else {\n    env.NODE_ENV = JSON.stringify('production');\n}\n\nconfig.plugins.push(new webpack.DefinePlugin({\n    'process.env': env,\n}));\n\nmodule.exports = config;\n</code></pre>\n\n<p>And this is loaders for webpack:</p>\n\n<pre><code>const path = require('path');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nconst STANDARD_EXCLUDE = [\n    path.join(__dirname, 'node_modules'),\n];\n\nconst NPM_TARGET = process.env.npm_lifecycle_event; //eslint-disable-line no-process-env\nconst targetIsRun = NPM_TARGET === 'run';\nconst targetIsTest = NPM_TARGET === 'test';\nconst targetIsStats = NPM_TARGET === 'stats';\nconst targetIsDevServer = NPM_TARGET === 'dev-server';\n\nconst DEV = targetIsRun || targetIsStats || targetIsDevServer;\n\n// noinspection WebpackConfigHighlighting\nmodule.exports = [\n    {\n        test: /\\.(js|jsx|ts|tsx)?$/,\n        exclude: STANDARD_EXCLUDE,\n        use: {\n            loader: 'babel-loader',\n            options: {\n                cacheDirectory: true,\n\n                // Babel configuration is in .babelrc because jest requires it to be there.\n            },\n        },\n    },\n    {\n        type: 'javascript/auto',\n        test: /\\.json$/,\n        include: [\n            path.resolve(__dirname, 'i18n'),\n        ],\n        exclude: [/en\\.json$/],\n        use: [\n            {\n                loader: 'file-loader?name=i18n/[name].[hash].[ext]',\n            },\n        ],\n    },\n    // ==========\n    // = Styles =\n    // ==========\n    // Global CSS (from node_modules)\n    // ==============================\n    {\n        test: /\\.css/,\n        include: path.resolve(__dirname, \"node_modules\"),\n        use: [\n            MiniCssExtractPlugin.loader,\n            {\n                loader: \"style-loader\"\n            },\n            {\n                loader: 'css-loader'\n            }\n        ]\n    },\n    {\n        test: /\\.(sc|sa|c)ss$/,\n        exclude: /\\.st.css$/, //This must appear before the \"oneOf\" property\n        use: [\n            MiniCssExtractPlugin.loader,\n            'style-loader',\n            'css-modules-typescript-loader',\n            {\n                loader: 'css-loader',\n                options: {\n                    importLoaders: 2,\n                    modules: true,\n                    camelCase: \"dashes\",\n                    localIdentName: DEV\n                        ? '[name]__[local]___[hash:base64:5]'\n                        : '_[hash:base64:5]',\n                },\n            },\n            {\n                loader: \"postcss-loader\",\n                options: {\n                    sourceMap: \"inline\",\n                    extract: true,\n                }\n            },\n            \"sass-loader\",\n        ],\n    },\n    {\n        test: /\\.(png|eot|tiff|svg|woff2|woff|ttf|gif|mp3|jpg)$/,\n        use: [\n            {\n                loader: 'file-loader',\n                options: {\n                    name: 'files/[hash].[ext]',\n                },\n            },\n            {\n                loader: 'image-webpack-loader',\n                options: {},\n            },\n        ],\n    },\n];\n</code></pre>\n\n<p>Babel config:</p>\n\n<pre><code>const config = {\n    presets: [\n        ['@babel/preset-env', {\n            targets: {\n                chrome: 66,\n                firefox: 60,\n                edge: 42,\n                safari: 12,\n            },\n            modules: false,\n            corejs: 3,\n            useBuiltIns: 'usage',\n            shippedProposals: true,\n        }],\n        ['@babel/preset-react', {\n            useBuiltIns: true,\n        }],\n        ['@babel/typescript', {\n            allExtensions: true,\n            isTSX: true,\n        }],\n    ],\n    plugins: [\n        '@babel/plugin-transform-runtime',\n        '@babel/plugin-syntax-dynamic-import',\n        '@babel/proposal-class-properties',\n        '@babel/proposal-object-rest-spread',\n        '@babel/plugin-proposal-optional-chaining',\n        ['module-resolver', {\n            root: ['./src', './test'],\n        }],\n    ],\n};\n\n// Jest needs module transformation\nconfig.env = {\n    test: {\n        presets: config.presets,\n        plugins: config.plugins,\n    },\n};\nconfig.env.test.presets[0][1].modules = 'auto';\n\nmodule.exports = config;\n</code></pre>\n\n<p>This is a demo component of this library:</p>\n\n<pre><code>import React from 'react';\n\nconst styles = require('./style.scss');\n\ntype Props = {\n    children?: React.ReactNode;\n    openLeft?: boolean;\n    openUp?: boolean;\n    id?: string;\n    ariaLabel: string;\n    customStyles?: object;\n}\n\nexport default class Button extends React.PureComponent&lt;Props&gt; {\n    public render() {\n        return (\n            &lt;button className={styles.test}&gt;\n                {this.props.children}\n            &lt;/button&gt;\n        );\n    }\n}\n</code></pre>\n\n<p>So, this is develop build command:</p>\n\n<pre><code>\"build\": \"cross-env NODE_ENV=production webpack --display-error-details --verbose\",\n    \"run\": \"webpack --progress --watch\",\n</code></pre>\n\n<p>when I using this library:</p>\n\n<pre><code>import ExampleComponent from 'mylibrary';\n</code></pre>\n\n<p>When I run BUILD or RUN command, the javascript is built, but not SCSS. So in my other project, the build throw an error:</p>\n\n<pre><code>can not find module './style.scss'\n</code></pre>\n\n<p>This error occur in ExampleComponent</p>\n\n<p>Please tell me how to resolve it. Thanks you very much!</p>\n"}, {"tags": ["typescript", "npm", "package.json", "tsconfig"], "comments": [{"owner": {"reputation": 300, "user_id": 10251458, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F_8IunvlSek/AAAAAAAAAAI/AAAAAAAAADg/dWnmdqugNUg/photo.jpg?sz=128", "display_name": "mozpider", "link": "https://stackoverflow.com/users/10251458/mozpider"}, "edited": false, "score": 0, "creation_date": 1577212361, "post_id": 59465498, "comment_id": 105123166, "body": "I found one issue here that script <code>&quot;build&quot;: &quot;tsc -w&quot;</code> should not be run sequentially. <code>tsc -w</code> (watch mode) will not exit. A better way will be to use <code>concurrently</code>,  like the following  <code>&quot;start:build&quot;: &quot;tsc -w&quot;,     &quot;start:run&quot;: &quot;nodemon build&#47;index.js&quot;,     &quot;start&quot;: &quot;concurrently npm:start:*&quot;</code>"}, {"owner": {"reputation": 300, "user_id": 10251458, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F_8IunvlSek/AAAAAAAAAAI/AAAAAAAAADg/dWnmdqugNUg/photo.jpg?sz=128", "display_name": "mozpider", "link": "https://stackoverflow.com/users/10251458/mozpider"}, "edited": false, "score": 0, "creation_date": 1577246262, "post_id": 59465498, "comment_id": 105128320, "body": "Depends on how the nodemon restarts the server. I restarted my computer and things started working again. No clue what was going on."}], "owner": {"reputation": 300, "user_id": 10251458, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F_8IunvlSek/AAAAAAAAAAI/AAAAAAAAADg/dWnmdqugNUg/photo.jpg?sz=128", "display_name": "mozpider", "link": "https://stackoverflow.com/users/10251458/mozpider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577173394, "creation_date": 1577173394, "question_id": 59465498, "link": "https://stackoverflow.com/questions/59465498/typescript-compilation-with-copyfiles-in-npm-scripts", "title": "Typescript compilation with copyfiles in NPM scripts", "body": "<p>I am trying to convert a code from JS into TS. I repeatedly get:\nError: listen EADDRINUSE: address already in use :::3004</p>\n\n<p>I have to change ports and kill ports <code>sudo fuser -k 3004/tcp</code> quite often.</p>\n\n<p>My package.json file has following:</p>\n\n<pre><code> \"scripts\": {\n    \"copy:templates\": \"cp -r ./templates ./build/\",\n    \"copy:data\": \"cp -r ./dev-data ./build/\",\n    \"copy\": \"npm run copy:templates; npm run  copy:data\",\n    \"build\": \"tsc -w\",\n    \"runNode\": \"nodemon build/index.js\",\n    \"start\": \"npm run copy; npm run build ; npm run runNode\"\n  }\n</code></pre>\n\n<p>My tsconfig.json has </p>\n\n<pre><code>    \"outDir\": \"./build\", \n    \"rootDir\": \"./src\" ,\n</code></pre>\n\n<p>Finally executing as <code>npm start</code></p>\n\n<p><strong>I believe there is something wrong with my NPM run scripts</strong>. I am not even running scripts in parallel to avoid this problem. I have also used <a href=\"https://www.npmjs.com/package/copyfiles\" rel=\"nofollow noreferrer\">copyfiles</a> to replace <code>cp -r</code>. However I am not successful so far. </p>\n\n<p>Should I use Gulp? I don't want to, if I don't have to.\n <strong>Is there something obvious that someone can point out?</strong> </p>\n"}, {"tags": ["angular", "typescript", "angular-reactive-forms", "angular8"], "comments": [{"owner": {"reputation": 730, "user_id": 10636628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2cc5a31034c216ec5c582293980414?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/10636628/anonymous"}, "edited": false, "score": 0, "creation_date": 1577174160, "post_id": 59465475, "comment_id": 105111044, "body": "You can use <a href=\"https://www.npmjs.com/package/@rxweb/reactive-form-validators\" rel=\"nofollow noreferrer\">this</a> library"}], "answers": [{"comments": [{"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577179770, "post_id": 59465505, "comment_id": 105112883, "body": "you need to use spread operator <code>...</code>, do it like this <code>&#39;latitude&#39;: [null, [...LatitudeLongitudeValidator]],</code>"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 2, "last_activity_date": 1577180843, "last_edit_date": 1577180843, "creation_date": 1577173450, "answer_id": 59465505, "question_id": 59465475, "link": "https://stackoverflow.com/questions/59465475/store-multiple-validators-into-a-constant-in-angular-8-reactive-formbuilders/59465505#59465505", "title": "Store Multiple Validators into a Constant in Angular 8 Reactive FormBuilders", "body": "<p>You can have array of all these validations and then using spread operator use that array inside validator,</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const CustomValidation = [\n    Validators.maxLength(32),\n    Validators.min(-90),\n    Validators.max(90),\n    Validators.pattern(/^\\d*\\.?\\d*$/)\n]\n</code></pre>\n\n<p>Use this array in formgroup,</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>'formField': ['', [ ...CustomValidation ]],\n</code></pre>\n\n<p>Spread operator is 3 periods dots <code>...</code> just before array variable.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12555362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 59465505, "answer_count": 1, "score": 0, "last_activity_date": 1577180843, "creation_date": 1577173269, "last_edit_date": 1577179485, "question_id": 59465475, "link": "https://stackoverflow.com/questions/59465475/store-multiple-validators-into-a-constant-in-angular-8-reactive-formbuilders", "title": "Store Multiple Validators into a Constant in Angular 8 Reactive FormBuilders", "body": "<p>How do I store Multiple Validators into a Constant and use in Reactive FormBuilder?\nThe following will apply 1 validator.\n<a href=\"https://stackoverflow.com/questions/59464574/store-and-use-regex-const-validator-in-angular-8-reactive-formbuilder/59464727?noredirect=1#comment105110359_59464727\">Store and Use Regex Const Validator in Angular 8 Reactive Formbuilder</a></p>\n\n<pre><code>export const ZipValidation = Validators.pattern(/^\\d{1,5}$/);\n\n'ZipCode': [null, [Validators.maxLength(16), ZipValidation]],\n</code></pre>\n\n<p>We need to store a whole multiple array into a constant.\nThis is multiple validators for latitude and longitude.</p>\n\n<pre><code>Validators.maxLength(32),\nValidators.min(-90),\nValidators.max(90),\nValidators.pattern(/^\\d*\\.?\\d*$/)\n</code></pre>\n\n<p>I tried doing the following, it is not working</p>\n\n<pre><code>export const LatitudeLongitudeValidator = [Validators.maxLength(32),Validators.min(-90),Validators.max(90),Validators.pattern(/^\\d*\\.?\\d*$/)];\n\n'latitude': [null, [LatitudeLongitudeValidator]],\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "edited": false, "score": 0, "creation_date": 1577172667, "post_id": 59465361, "comment_id": 105110635, "body": "What is your expected output"}, {"owner": {"reputation": 1, "user_id": 7845161, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-70ejBRe9lBg/AAAAAAAAAAI/AAAAAAAAABk/LjZTxYgrFZ8/photo.jpg?sz=128", "display_name": "\u0e40\u0e2a\u0e21\u0e47\u0e14\u0e43\u0e08\u0e22\u0e31\u0e01\u0e29\u0e4c SamedJaiYak", "link": "https://stackoverflow.com/users/7845161/%e0%b9%80%e0%b8%aa%e0%b8%a1%e0%b9%87%e0%b8%94%e0%b9%83%e0%b8%88%e0%b8%a2%e0%b8%b1%e0%b8%81%e0%b8%a9%e0%b9%8c-samedjaiyak"}, "reply_to_user": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "edited": false, "score": 0, "creation_date": 1577172805, "post_id": 59465361, "comment_id": 105110679, "body": "I want to use for select option value in html"}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "edited": false, "score": 0, "creation_date": 1577173068, "post_id": 59465361, "comment_id": 105110757, "body": "<a href=\"https://stackblitz.com/edit/angular-ff2aja?embed=1&amp;file=src/app/app.component.html\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-ff2aja?embed=1&amp;file=src/app/&hellip;</a>"}, {"owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "edited": false, "score": 0, "creation_date": 1577173251, "post_id": 59465361, "comment_id": 105110813, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/52640538/how-to-add-array-in-array-element\">How to add Array in Array element</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1125, "user_id": 12130501, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UKDZ5pOqWow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaXx5P-3Kgn-EBgT2_TibEvDndQA/photo.jpg?sz=128", "display_name": "Mridul", "link": "https://stackoverflow.com/users/12130501/mridul"}, "is_accepted": false, "score": 0, "last_activity_date": 1577172785, "creation_date": 1577172785, "answer_id": 59465393, "question_id": 59465361, "link": "https://stackoverflow.com/questions/59465361/loop-add-new-record-to-array-in-typescript/59465393#59465393", "title": "Loop add new record to array in typescript", "body": "<p>you need to push the value into <code>opt[]</code></p>\n\n<blockquote>\n  <p>Example:</p>\n</blockquote>\n\n<pre><code>for(i=0; i&lt;=5; i++) {\n    opt.push( { i } );\n}\n</code></pre>\n\n<p>Please make changes as per your requirement for what you want to push into the array.</p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "is_accepted": false, "score": 0, "last_activity_date": 1577173125, "creation_date": 1577173125, "answer_id": 59465455, "question_id": 59465361, "link": "https://stackoverflow.com/questions/59465361/loop-add-new-record-to-array-in-typescript/59465455#59465455", "title": "Loop add new record to array in typescript", "body": "<p>Try using this</p>\n\n<p>compomnet.html</p>\n\n<pre><code>&lt;select&gt;\n  &lt;option *ngFor=\"let opt of options\" [value]=\"opt.value\"&gt;{{opt.name}}&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>component.ts</p>\n\n<pre><code>options = [\n    { name: \"option1\", value: 1 },\n    { name: \"option2\", value: 2 }\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1625, "user_id": 4520453, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/NZqqG.jpg?s=128&g=1", "display_name": "Nimish David Mathew", "link": "https://stackoverflow.com/users/4520453/nimish-david-mathew"}, "is_accepted": false, "score": 1, "last_activity_date": 1577173182, "creation_date": 1577173182, "answer_id": 59465461, "question_id": 59465361, "link": "https://stackoverflow.com/questions/59465361/loop-add-new-record-to-array-in-typescript/59465461#59465461", "title": "Loop add new record to array in typescript", "body": "<p>If you want to add each item in <code>options</code> to <code>opt</code>, then:</p>\n\n<pre><code>let opt = [];\n\nlet options = [\n    { name: \"option1\", value: 1 },\n    { name: \"option2\", value: 2 }\n]\n\noptions.forEach(x =&gt; opt.push(x));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577174077, "post_id": 59465462, "comment_id": 105111025, "body": "Don&#39;t need to loop anything? I can see the loop in html."}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "reply_to_user": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577174468, "post_id": 59465462, "comment_id": 105111131, "body": "@AliWahab I mean no loop in .ts file, the standard syntax of Angular template using directive <code>*ngFor</code> will do."}, {"owner": {"reputation": 442, "user_id": 12175891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b71c0e58668f88e44037e97c7d407a9?s=128&d=identicon&r=PG", "display_name": "Ali Wahab", "link": "https://stackoverflow.com/users/12175891/ali-wahab"}, "edited": false, "score": 0, "creation_date": 1577174968, "post_id": 59465462, "comment_id": 105111304, "body": "Yeah just wanted to correct you if somebody visit this page in future. Well I think the question is not straight. He need to loop through options through .ts, like legacy jQuery style."}], "tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1577174511, "last_edit_date": 1577174511, "creation_date": 1577173186, "answer_id": 59465462, "question_id": 59465361, "link": "https://stackoverflow.com/questions/59465361/loop-add-new-record-to-array-in-typescript/59465462#59465462", "title": "Loop add new record to array in typescript", "body": "<p>If you need to use in select option, you don't need to loop anything in .ts, you can use <code>*ngFor</code> directive in template to display the options.</p>\n\n<p>Try like this:</p>\n\n<p>.html</p>\n\n<pre><code>&lt;select [(ngModel)]=\"selected\"&gt;\n  &lt;option [value]=\"null\"&gt;Select&lt;/option&gt;\n  &lt;option *ngFor=\"let opt of options\" [value]=\"opt.value\"&gt;{{opt.name}}&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;p&gt;selected : {{selected}} &lt;/p&gt;\n</code></pre>\n\n<p>.ts</p>\n\n<pre><code>options = [{ name: \"option1\", value: 1 }, { name: \"option2\", value: 2 }];\nselected = null;\n</code></pre>\n\n<p><strong><a href=\"https://stackblitz.com/edit/angular-ff2aja?embed=1&amp;file=src/app/app.component.html\" rel=\"nofollow noreferrer\">Working Demo</a></strong></p>\n"}], "owner": {"reputation": 1, "user_id": 7845161, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-70ejBRe9lBg/AAAAAAAAAAI/AAAAAAAAABk/LjZTxYgrFZ8/photo.jpg?sz=128", "display_name": "\u0e40\u0e2a\u0e21\u0e47\u0e14\u0e43\u0e08\u0e22\u0e31\u0e01\u0e29\u0e4c SamedJaiYak", "link": "https://stackoverflow.com/users/7845161/%e0%b9%80%e0%b8%aa%e0%b8%a1%e0%b9%87%e0%b8%94%e0%b9%83%e0%b8%88%e0%b8%a2%e0%b8%b1%e0%b8%81%e0%b8%a9%e0%b9%8c-samedjaiyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "closed_date": 1577176026, "answer_count": 4, "score": -5, "last_activity_date": 1577174511, "creation_date": 1577172597, "question_id": 59465361, "link": "https://stackoverflow.com/questions/59465361/loop-add-new-record-to-array-in-typescript", "closed_reason": "Needs details or clarity", "title": "Loop add new record to array in typescript", "body": "<p>I have a opt variable in Typescript</p>\n\n<pre><code>let opt = [{}];\n</code></pre>\n\n<p>if I want to add multiple children to opt variable to below exsample with for loop</p>\n\n<pre><code>options = [\n    { name: \"option1\", value: 1 },\n    { name: \"option2\", value: 2 }\n]\n</code></pre>\n\n<p>how can I coding</p>\n\n<pre><code>for(i=0; i&lt;=5; i++) {\n    ...\n}\n</code></pre>\n"}, {"tags": ["html", "css", "angular", "typescript", "ionic4"], "comments": [{"owner": {"reputation": 692, "user_id": 11241667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9901803963e61cb4e185ee93b63f59?s=128&d=identicon&r=PG&f=1", "display_name": "Komal Sakhiya", "link": "https://stackoverflow.com/users/11241667/komal-sakhiya"}, "edited": false, "score": 0, "creation_date": 1577171978, "post_id": 59465104, "comment_id": 105110430, "body": "Can you please create stackblitz demo."}, {"owner": {"reputation": 3134, "user_id": 6285600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a0cVQ.jpg?s=128&g=1", "display_name": "nikhil sugandh", "link": "https://stackoverflow.com/users/6285600/nikhil-sugandh"}, "edited": false, "score": 0, "creation_date": 1577171993, "post_id": 59465104, "comment_id": 105110441, "body": "<a href=\"https://tutorialzine.com/2013/06/digital-clock\" rel=\"nofollow noreferrer\">tutorialzine.com/2013/06/digital-clock</a>"}, {"owner": {"reputation": 734, "user_id": 6910748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5fHbkOcN4Ls/AAAAAAAAAAI/AAAAAAAAAEU/7dfQUZ-FG_U/photo.jpg?sz=128", "display_name": "Sunny Parekh", "link": "https://stackoverflow.com/users/6910748/sunny-parekh"}, "edited": false, "score": 0, "creation_date": 1577178984, "post_id": 59465104, "comment_id": 105112590, "body": "The problem is not with the code logic. The startTime() function is not getting executed at all."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10196907"}, "is_accepted": false, "score": 0, "last_activity_date": 1577182556, "creation_date": 1577182556, "answer_id": 59467216, "question_id": 59465104, "link": "https://stackoverflow.com/questions/59465104/i-want-to-add-a-digital-clock-in-my-ionic-app-but-it-doesnt-work/59467216#59467216", "title": "I want to add a digital clock in my ionic app. But it doesn&#39;t work", "body": "<p>AngularJS : digital clock directive version</p>\n\n<p>Visite <a href=\"https://embed.plnkr.co/UHyar4/\" rel=\"nofollow noreferrer\">https://embed.plnkr.co/UHyar4/</a></p>\n"}], "owner": {"reputation": 63, "user_id": 11341617, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rQyfX1fbhfs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd_GyqPAaj5AXybO5OwQcv-uhQlzQ/mo/photo.jpg?sz=128", "display_name": "Mahak Garg", "link": "https://stackoverflow.com/users/11341617/mahak-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 567, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577182556, "creation_date": 1577171221, "last_edit_date": 1577181584, "question_id": 59465104, "link": "https://stackoverflow.com/questions/59465104/i-want-to-add-a-digital-clock-in-my-ionic-app-but-it-doesnt-work", "title": "I want to add a digital clock in my ionic app. But it doesn&#39;t work", "body": "<p>I need help to show digital clock in my app will you please help with refining my code. Or suggest me another code with <code>ionic4</code> and <code>typescript</code>. Thank you for your help.</p>\n\n<p>page.html</p>\n\n<pre><code>&lt;ion-content onload=\"startTime()\" &gt;\n\n    &lt;div id=\"txt\"&gt;&lt;/div&gt;\n\n&lt;/ion-content&gt;\n</code></pre>\n\n<p>page.ts</p>\n\n<pre><code>startTime() {\n\n    var today = new Date();\n\n    var h = today.getHours();\n\n    var m = today.getMinutes();\n\n    var s = today.getSeconds();\n\n    m = this.checkTime(m);\n\n    s = this.checkTime(s);\n\n    document.getElementById('txt').innerHTML = h + \":\" + m + \":\" + s;\n\n    var t = setTimeout(this.startTime, 500);\n\n    }\n\ncheckTime(i) {\n\n    if (i &lt; 10) {i = \"0\" + i};  // add zero in front of numbers &lt; 10\n\n    return i;\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1125, "user_id": 12130501, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UKDZ5pOqWow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaXx5P-3Kgn-EBgT2_TibEvDndQA/photo.jpg?sz=128", "display_name": "Mridul", "link": "https://stackoverflow.com/users/12130501/mridul"}, "edited": false, "score": 2, "creation_date": 1577171091, "post_id": 59465060, "comment_id": 105110163, "body": "It means it is optional to send parameter to this function. it won&#39;t throw error"}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1577187851, "post_id": 59465060, "comment_id": 105115858, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/37632760/what-is-the-question-mark-for-in-a-typescript-parameter-name\">What is the question mark for in a Typescript parameter name</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4481, "user_id": 5939058, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/m438e.jpg?s=128&g=1", "display_name": "Surjeet Bhadauriya", "link": "https://stackoverflow.com/users/5939058/surjeet-bhadauriya"}, "is_accepted": true, "score": 4, "last_activity_date": 1577171461, "last_edit_date": 1577171461, "creation_date": 1577171150, "answer_id": 59465086, "question_id": 59465060, "link": "https://stackoverflow.com/questions/59465060/what-does-mean-in-angular-function-arguments/59465086#59465086", "title": "What does ? mean in Angular function arguments?", "body": "<p><code>?</code> sign denotes <code>optional</code>. Meaning that if you don't pass the value to function, it won't throw an <code>error</code>. </p>\n\n<blockquote>\n  <p><strong>For example:</strong></p>\n</blockquote>\n\n<p>This is your function</p>\n\n<pre><code>onValueChange(data?: any) {\n  console.log(data);\n}\nonValueChange('somedata'); // will print 'somedata' in the console\nonValueChange(); // will print undefined but it won't throw an error\n</code></pre>\n\n<p><strong>Summary:</strong> You can call this function without passing the value as it is optional.</p>\n"}, {"tags": [], "owner": {"reputation": 692, "user_id": 11241667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9901803963e61cb4e185ee93b63f59?s=128&d=identicon&r=PG&f=1", "display_name": "Komal Sakhiya", "link": "https://stackoverflow.com/users/11241667/komal-sakhiya"}, "is_accepted": false, "score": 1, "last_activity_date": 1577171363, "creation_date": 1577171363, "answer_id": 59465126, "question_id": 59465060, "link": "https://stackoverflow.com/questions/59465060/what-does-mean-in-angular-function-arguments/59465126#59465126", "title": "What does ? mean in Angular function arguments?", "body": "<p>It is an optional parameter.we can pass this parameter or if we don't pass this parameter then it will not give error.We can call function like this:</p>\n\n<pre><code>onValueChange('somedata');\nonValueChange();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "reply_to_user": {"reputation": 562, "user_id": 4439221, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af987483d1aed0b6589bc66adb23e1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Rakhi Prajapati", "link": "https://stackoverflow.com/users/4439221/rakhi-prajapati"}, "edited": false, "score": 0, "creation_date": 1577171879, "post_id": 59465193, "comment_id": 105110397, "body": "No problem happy to help :-)"}], "tags": [], "owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "is_accepted": false, "score": 1, "last_activity_date": 1577172007, "last_edit_date": 1577172007, "creation_date": 1577171746, "answer_id": 59465193, "question_id": 59465060, "link": "https://stackoverflow.com/questions/59465060/what-does-mean-in-angular-function-arguments/59465193#59465193", "title": "What does ? mean in Angular function arguments?", "body": "<p>It defines <strong>optional</strong>. Once you define a <code>fucntion/method</code> like that. You can either pass a <strong>value</strong> Or <strong>Not</strong>.</p>\n\n<p><code>onValueChange(data?: any) {}</code> can be used as like <code>onValueChange() {}</code> too. when you have function definition defined like this <code>onValueChange(data?: any) {}</code>.</p>\n\n<p>Similarly when you can create models In the same manner you can use it too.</p>\n\n<p><strong>For example :</strong></p>\n\n<pre><code> export class YOURCLASS{\n        ids?: number[];\n        name :string\n   }\n</code></pre>\n\n<p>In this case too you can either have ids array or not but definietly have to have name parameter instead.</p>\n"}, {"tags": [], "owner": {"reputation": 152, "user_id": 11031924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/26Jyk.jpg?s=128&g=1", "display_name": "i_sapumal", "link": "https://stackoverflow.com/users/11031924/i-sapumal"}, "is_accepted": false, "score": 1, "last_activity_date": 1577171841, "creation_date": 1577171841, "answer_id": 59465216, "question_id": 59465060, "link": "https://stackoverflow.com/questions/59465060/what-does-mean-in-angular-function-arguments/59465216#59465216", "title": "What does ? mean in Angular function arguments?", "body": "<p>In JavaScript, every parameter is optional, and users may leave them off as they see fit. When they do, their value is undefined. We can get this functionality in TypeScript by adding a ? to the end of parameters we want to be optional. </p>\n\n<p>So in here, it says you can either pass some values on bound value change event for you van just call the function on event occurrence.</p>\n"}], "owner": {"reputation": 562, "user_id": 4439221, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af987483d1aed0b6589bc66adb23e1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Rakhi Prajapati", "link": "https://stackoverflow.com/users/4439221/rakhi-prajapati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 59465086, "answer_count": 4, "score": 1, "last_activity_date": 1577184465, "creation_date": 1577170985, "last_edit_date": 1577184465, "question_id": 59465060, "link": "https://stackoverflow.com/questions/59465060/what-does-mean-in-angular-function-arguments", "title": "What does ? mean in Angular function arguments?", "body": "<p>While going through an Angular 4 tutorial I found a new way of getting/setting parameter in function.</p>\n\n<pre><code>onValueChange(data?: any)\n</code></pre>\n\n<p>What does the <code>?</code> do?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577243160, "post_id": 59464772, "comment_id": 105128003, "body": "It&#39;s technically impossible; if I call <code>foo((s: string) =&gt; s.toUpperCase())</code>, then <code>S</code> can be either <code>string</code> or <code>(s: string)=&gt;string</code>, since the type <code>(s: string)=&gt;string</code> matches both <code>string | ((s: string)=&gt;string)</code> and the bizarre-but-possible <code>((s: string) =&gt; string) | ((p: (s: string) =&gt; string) =&gt; ((s: string) =&gt; string))</code>.  You&#39;ll have to pick some heuristic, like &quot;<code>S</code> won&#39;t be a function&quot; to proceed."}, {"owner": {"reputation": 1301, "user_id": 1675615, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bfec4932bd0fcbbc24be6ffbbbed3968?s=128&d=identicon&r=PG", "display_name": "Krever", "link": "https://stackoverflow.com/users/1675615/krever"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1577261356, "post_id": 59464772, "comment_id": 105130392, "body": "@jcalz thank you, I expected such answer but hoped it&#39;s not true. I would be glad to accept it as an answer. This also means React.useState is inherently incorrect as such restriction is not present there yet the signature is the same."}], "answers": [{"comments": [{"owner": {"reputation": 1301, "user_id": 1675615, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bfec4932bd0fcbbc24be6ffbbbed3968?s=128&d=identicon&r=PG", "display_name": "Krever", "link": "https://stackoverflow.com/users/1675615/krever"}, "edited": false, "score": 0, "creation_date": 1577169923, "post_id": 59464860, "comment_id": 105109830, "body": "yes, but what if my <code>S</code> is also a function? So effectively I can have <code>function X</code> or <code>a function that takes function X and produces new function X</code>. This check won&#39;t help there, right?"}, {"owner": {"reputation": 2316, "user_id": 6157848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pc1nw.jpg?s=128&g=1", "display_name": "nimeresam", "link": "https://stackoverflow.com/users/6157848/nimeresam"}, "reply_to_user": {"reputation": 1301, "user_id": 1675615, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bfec4932bd0fcbbc24be6ffbbbed3968?s=128&d=identicon&r=PG", "display_name": "Krever", "link": "https://stackoverflow.com/users/1675615/krever"}, "edited": false, "score": 0, "creation_date": 1577170109, "post_id": 59464860, "comment_id": 105109879, "body": "How could that happen? Isn&#39;t S a class or an interface?"}, {"owner": {"reputation": 1301, "user_id": 1675615, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bfec4932bd0fcbbc24be6ffbbbed3968?s=128&d=identicon&r=PG", "display_name": "Krever", "link": "https://stackoverflow.com/users/1675615/krever"}, "edited": false, "score": 0, "creation_date": 1577170397, "post_id": 59464860, "comment_id": 105109949, "body": "Why would it be? <code>S</code> can be anything. <a href=\"https://www.typescriptlang.org/play/?ssl=5&amp;ssc=17&amp;pln=1&amp;pc=1#code/MYewdgzgLgBAZiEMC8MA8BlAfACgB4BcMGAlCljAN4BQMMokIANgKYB0TIA5jlAJ4AHFiDgw8JagF9q1BCBw4yyCgCIAEiz4qSQA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2316, "user_id": 6157848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pc1nw.jpg?s=128&g=1", "display_name": "nimeresam", "link": "https://stackoverflow.com/users/6157848/nimeresam"}, "is_accepted": false, "score": 0, "last_activity_date": 1577169789, "creation_date": 1577169789, "answer_id": 59464860, "question_id": 59464772, "link": "https://stackoverflow.com/questions/59464772/differentiate-parts-of-generic-union-in-typescript/59464860#59464860", "title": "Differentiate parts of generic union in typescript", "body": "<p>As you mentioned, you can use <code>typeof</code> to solve your problem, like:</p>\n\n<pre><code>if(typeof newState === 'function') {\n    newState();\n} else {\n    // do whatever you want\n}\n</code></pre>\n"}], "owner": {"reputation": 1301, "user_id": 1675615, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bfec4932bd0fcbbc24be6ffbbbed3968?s=128&d=identicon&r=PG", "display_name": "Krever", "link": "https://stackoverflow.com/users/1675615/krever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577169789, "creation_date": 1577169332, "question_id": 59464772, "link": "https://stackoverflow.com/questions/59464772/differentiate-parts-of-generic-union-in-typescript", "title": "Differentiate parts of generic union in typescript", "body": "<p>I would like to implement following function</p>\n\n<pre><code>const foo = &lt;S&gt;(newState: S | ((prevState: S) =&gt; S)) =&gt; {...}\n</code></pre>\n\n<p>so it takes either new state of type <code>S</code> or a function producing new state from the old state. </p>\n\n<p>How can I differentiate between those options in the implementation? I assume <code>typeof newState === 'function'</code> won't work as <code>S</code> can be a function just as well. </p>\n\n<p>I'm using typescript but probably the solution would have more to do with JS then TS.</p>\n"}, {"tags": ["angular", "typescript", "observable", "angular8", "angular-http-interceptors"], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 4675154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sRg1v.jpg?s=128&g=1", "display_name": "Vahid Rahmani", "link": "https://stackoverflow.com/users/4675154/vahid-rahmani"}, "edited": false, "score": 0, "creation_date": 1577173594, "post_id": 59465055, "comment_id": 105110918, "body": "This is probably because your web service output is not return  observable value"}, {"owner": {"reputation": 57, "user_id": 8397934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DLjuo6mUDjk/AAAAAAAAAAI/AAAAAAAAAEQ/hYDuS6VfKbU/photo.jpg?sz=128", "display_name": "Rishabh Tailor", "link": "https://stackoverflow.com/users/8397934/rishabh-tailor"}, "edited": false, "score": 0, "creation_date": 1577351827, "post_id": 59465055, "comment_id": 105147558, "body": "Mukund your answer removed the error but it is not intercepting the requests."}], "tags": [], "owner": {"reputation": 451, "user_id": 4786262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VUimV4mqnQo/AAAAAAAAAAI/AAAAAAAAAGk/kcHO40TFfDM/photo.jpg?sz=128", "display_name": "Mukund Sonaiya", "link": "https://stackoverflow.com/users/4786262/mukund-sonaiya"}, "is_accepted": true, "score": 2, "last_activity_date": 1577170946, "creation_date": 1577170946, "answer_id": 59465055, "question_id": 59464682, "link": "https://stackoverflow.com/questions/59464682/error-you-provided-undefined-where-a-stream-was-expected-you-can-provide-an/59465055#59465055", "title": "Error: &quot;You provided &#39;undefined&#39; where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.&quot; in my Auth Interceptor", "body": "<p>In the else block you are missing the return statement. \nAdd \n<code>return next.handle(req.clone());</code> in else block when <code>localStorage.getItem('currentUser')</code> is null</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 507458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/b1D1t.jpg?s=128&g=1", "display_name": "KWHJ", "link": "https://stackoverflow.com/users/507458/kwhj"}, "is_accepted": false, "score": 0, "last_activity_date": 1582664533, "creation_date": 1582664533, "answer_id": 60403086, "question_id": 59464682, "link": "https://stackoverflow.com/questions/59464682/error-you-provided-undefined-where-a-stream-was-expected-you-can-provide-an/60403086#60403086", "title": "Error: &quot;You provided &#39;undefined&#39; where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.&quot; in my Auth Interceptor", "body": "<p>Rishabh, others do link this error with the existence of 'interceptors', this could very well be the case. However, today I got the exact same TypeError. My app, currently still in development, does not make use of 'interceptors' (may be in the future who knows). It's an Angular app currently up-to-data (version 9.0.2) connection to an API (functions firebase). I was implementing a new components (crud) 'contractors' on which I decided to make use of 'angular-in-memory-web-api' prior storing data at the backend</p>\n\n<p>As soon as I had implemented the module 'InMemoryWebApiModule.forRoot(ContractorData)' in the 'imports' section of the App.Module, I noticed while retrieving another entity I suddenly could not reach anymore the API noticing in the browser console: </p>\n\n<p>ERROR TypeError: You provided 'undefined' where a stream was expected. * You can provide an Observable, Promise, Array, or Iterable.</p>\n\n<p>So, my hypothesis is: implementing the ImMemoryWebApiModule interfers (in my case) the HttpClient process in such a way, it removes or deletes information on the request sending to the api. </p>\n\n<p>See screenshot<a href=\"https://i.stack.imgur.com/1082z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1082z.png\" alt=\"enter image description here\"></a></p>\n\n<p>Hopefully, this a little help you to investigate you problem!</p>\n"}], "owner": {"reputation": 57, "user_id": 8397934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DLjuo6mUDjk/AAAAAAAAAAI/AAAAAAAAAEQ/hYDuS6VfKbU/photo.jpg?sz=128", "display_name": "Rishabh Tailor", "link": "https://stackoverflow.com/users/8397934/rishabh-tailor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1455, "favorite_count": 0, "accepted_answer_id": 59465055, "answer_count": 2, "score": 1, "last_activity_date": 1582664533, "creation_date": 1577168772, "question_id": 59464682, "link": "https://stackoverflow.com/questions/59464682/error-you-provided-undefined-where-a-stream-was-expected-you-can-provide-an", "title": "Error: &quot;You provided &#39;undefined&#39; where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.&quot; in my Auth Interceptor", "body": "<p>I want to intercept every request to api and check the status code so that it can display a message or redirect to a specific component, but it is giving the following error:</p>\n\n<blockquote>\n  <p>main.js:1580 TypeError: You provided 'undefined' where a stream was expected. You can provide an >Observable, Promise, Array, or Iterable.at subscribeTo (vendor.js:179688)at subscribeToResult(vendor.js:179824) at MergeMapSubscriber._innerSub (vendor.js:175271) at mergeMapSubscriber._tryNext (vendor.js:175265) at MergeMapSubscriber._next (vendor.js:175248)\n  at MergeMapSubscriber.next (vendor.js:170316) at Observable._subscribe (vendor.js:172287)\n  at Observable._trySubscribe (vendor.js:169772) at Observable.subscribe (vendor.js:169758)\n  at MergeMapOperator.call (vendor.js:175233)</p>\n</blockquote>\n\n<p>This is my <strong>AuthInterceptor:</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { tap } from 'rxjs/operators'; \nimport { CommonService } from '../common.service';\nimport { Router } from '@angular/router';\nimport { AuthenticationService } from './authentication.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthInterceptorService implements HttpInterceptor {\n\n  constructor(\n    private common: CommonService,\n    private router: Router,\n    private auth: AuthenticationService\n  ) { }\n\n  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    if (req.headers.get('No-Auth') === 'True') {\n      return next.handle(req.clone());\n    }\n    // To attach header on every request\n    if (localStorage.getItem('currentUser') != null) {\n      const clonedreq = req.clone({\n        headers: req.headers.set('Authorization', 'Bearer ' + localStorage.getItem('currentUser'))\n      });\n      return next.handle(clonedreq).pipe(tap(\n        succ =&gt; { },\n        err =&gt; {\n          if (err.status === 401) {\n            this.router.navigateByUrl('/login');\n          } else if (err.status === 403) {\n            this.router.navigateByUrl('/Forbidden');\n          } else if (err.status === 400) {\n            this.router.navigateByUrl('/error404');\n          }\n        }\n      ));\n    } else {\n      this.router.navigateByUrl('/login');\n    }\n  }\n}\n\n</code></pre>\n\n<p>I can't figure out the line or block which is causing it, as it is not written any where in the error. The project is compiled just fine.\nthis error is shown in almost every page of the project where a request is sent to WEB Api.</p>\n"}, {"tags": ["angular", "typescript", "angular-reactive-forms", "angular8"], "comments": [{"owner": {"reputation": 2687, "user_id": 11769164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cascCTYxkPQ/AAAAAAAAAAI/AAAAAAAAAkQ/KzEi1WfT8Ks/photo.jpg?sz=128", "display_name": "Ashot Aleqsanyan", "link": "https://stackoverflow.com/users/11769164/ashot-aleqsanyan"}, "edited": false, "score": 0, "creation_date": 1577168664, "post_id": 59464574, "comment_id": 105109509, "body": "I think your pattern is not working try <code>&#39;^\\d{1,5}$&#39;</code> instead of <code>&#47;^\\d{1,5}$&#47;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12555362"}, "reply_to_user": {"reputation": 2687, "user_id": 11769164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cascCTYxkPQ/AAAAAAAAAAI/AAAAAAAAAkQ/KzEi1WfT8Ks/photo.jpg?sz=128", "display_name": "Ashot Aleqsanyan", "link": "https://stackoverflow.com/users/11769164/ashot-aleqsanyan"}, "edited": false, "score": 0, "creation_date": 1577168979, "post_id": 59464574, "comment_id": 105109587, "body": "yeah, its working on my end, just more curious about saving a regex pattern in variable, and using for later, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577171764, "post_id": 59464727, "comment_id": 105110359, "body": "Create array like <code>const temp = [Validators.min(-90), Validators.max(90)]</code> and use that array using spread operator in validators. e.g. <code>[...temp]</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12555362"}, "edited": false, "score": 0, "creation_date": 1577173279, "post_id": 59464727, "comment_id": 105110816, "body": "here is the question <a href=\"https://stackoverflow.com/questions/59465475/store-multiple-validators-into-a-constant-in-angular-8\" title=\"store multiple validators into a constant in angular 8\">stackoverflow.com/questions/59465475/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 0, "last_activity_date": 1577169947, "last_edit_date": 1577169947, "creation_date": 1577169105, "answer_id": 59464727, "question_id": 59464574, "link": "https://stackoverflow.com/questions/59464574/store-and-use-regex-const-validator-in-angular-8-reactive-formbuilder/59464727#59464727", "title": "Store and Use Regex Const Validator in Angular 8 Reactive Formbuilder", "body": "<p>You can store your validations in some <code>.ts</code> files, suppose <code>validations.ts</code>.</p>\n\n<p>Then use these validations wherever required. You can also have parameter Validators.</p>\n\n<p><strong>validation.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const ZipValidation = Validators.pattern(/^\\d{1,5}$/);\nexport const EmailValidation = Validators.pattern(/*some regex*/);\nexport const UsernameValidation = Validators.pattern(/*some regex*/);\nexport const ValidWithParam = (param: number) =&gt; {\n  return Validators.pattern('/\\d' + param + '/g');\n}\n</code></pre>\n\n<p><strong>In Component</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { ZipValidation, EmailValidation, UsernameValidation } from './validation';\n'ZipCode': [null, [Validators.maxLength(16), ZipValidation]],\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "edited": false, "score": 0, "creation_date": 1577169896, "post_id": 59464776, "comment_id": 105109822, "body": "This is fairly straight forward. I see some correct answers on top. So that i shared my view. One thing is important. All the above mentioned answers will do. But if you configure it in endpoint you will not have to go through build processes all over again. For example what if on fly company wants add another Validator. Those will be catered via using configurable endpoint. Otherwise you will have to go to the Front end, add Validator build and deploy."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12555362"}, "edited": false, "score": 0, "creation_date": 1577170591, "post_id": 59464776, "comment_id": 105110013, "body": "yeah, we already using shared service, this can be placed in comments below answer, thanks"}], "tags": [], "owner": {"reputation": 2198, "user_id": 4672460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/18CI8.jpg?s=128&g=1", "display_name": "Selaka Nanayakkara", "link": "https://stackoverflow.com/users/4672460/selaka-nanayakkara"}, "is_accepted": false, "score": 0, "last_activity_date": 1577185728, "last_edit_date": 1577185728, "creation_date": 1577169357, "answer_id": 59464776, "question_id": 59464574, "link": "https://stackoverflow.com/questions/59464574/store-and-use-regex-const-validator-in-angular-8-reactive-formbuilder/59464776#59464776", "title": "Store and Use Regex Const Validator in Angular 8 Reactive Formbuilder", "body": "<p>Best thing is to have a main root-level shared service and store all the patterns inside it. </p>\n\n<p>Whenever you need it - you can use it by referring to the shared service. And via that particular service if you can implement a endpoint(if possible) so that it will be possible to configure the Validators via your application backend. </p>\n\n<p>Otherwise you can hardcode the Validators patterns in the service itself.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12555362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 59464727, "answer_count": 2, "score": 1, "last_activity_date": 1577185728, "creation_date": 1577168049, "last_edit_date": 1577170980, "question_id": 59464574, "link": "https://stackoverflow.com/questions/59464574/store-and-use-regex-const-validator-in-angular-8-reactive-formbuilder", "title": "Store and Use Regex Const Validator in Angular 8 Reactive Formbuilder", "body": "<p>How do I store a Regex Validator pattern for reuse and Dry principal in Angular?\nHave a reactive formbuilder with Regex validator pattern below for ZipCode.</p>\n\n<p>Need to apply to multiple address forms, curious how to save <code>/^\\d{1,5}$/</code></p>\n\n<p>So we can write <code>Validators.pattern(zipcode)</code>,  or any syntax utilized in Angular?\nCompany has more complicated long patterns for phone numbers, customer number, etc.</p>\n\n<pre><code>'ZipCode': [null, [Validators.maxLength(16), Validators.pattern(/^\\d{1,5}$/)]],\n</code></pre>\n\n<p>Looking for a way to store and utilize maybe in constants.</p>\n\n<p>This is for Angular 2:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36725828/ng-pattern-to-use-regex-from-angular-constants\">ng-pattern to use regex from angular constants</a></p>\n"}, {"tags": ["javascript", "angular", "typescript", "primeng"], "answers": [{"comments": [{"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577165711, "post_id": 59464242, "comment_id": 105108846, "body": "Error: Cannot assign to a reference or variable!"}, {"owner": {"reputation": 164, "user_id": 6692230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dpjhy.jpg?s=128&g=1", "display_name": "ChechoCZ", "link": "https://stackoverflow.com/users/6692230/chechocz"}, "reply_to_user": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 1, "creation_date": 1577165948, "post_id": 59464242, "comment_id": 105108891, "body": "So, I think you could do it a bit different. So, instead of having a variable in the view to show/hide your month picker, you could have a variable in the ts file. So, on (click) you toggle the state of the variable, and on (change) you set it to false! It could be easier for you. Let me know if you want to try with this approach and want some help. Then I can edit the answer to show You how to do that!"}, {"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577166164, "post_id": 59464242, "comment_id": 105108939, "body": "Yes sure I can try this. But <code>(click)=&quot;openMonthpicker.toggle($event)&quot;</code> is provided by <code>primeng</code> itself and thers nothing you&#39;ve to do in your own typescript. Anyway, Lets try what you said. :-)"}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "edited": false, "score": 0, "creation_date": 1577166256, "post_id": 59464242, "comment_id": 105108958, "body": "There is already hide method in overlay, which will not required any variable."}, {"owner": {"reputation": 164, "user_id": 6692230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dpjhy.jpg?s=128&g=1", "display_name": "ChechoCZ", "link": "https://stackoverflow.com/users/6692230/chechocz"}, "edited": false, "score": 0, "creation_date": 1577166333, "post_id": 59464242, "comment_id": 105108975, "body": "Oh, great, so I hope it helps!"}], "tags": [], "owner": {"reputation": 164, "user_id": 6692230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dpjhy.jpg?s=128&g=1", "display_name": "ChechoCZ", "link": "https://stackoverflow.com/users/6692230/chechocz"}, "is_accepted": false, "score": 1, "last_activity_date": 1577165616, "creation_date": 1577165616, "answer_id": 59464242, "question_id": 59464148, "link": "https://stackoverflow.com/questions/59464148/how-to-remove-toggle-event-in-angular/59464242#59464242", "title": "How to remove toggle event in Angular", "body": "<p>You could use <em>(change)</em> and bind it to an event to toggle the picker.</p>\n\n<p>Something like this:</p>\n\n<pre><code>&lt;textbox \n  ...\n  (change)=\"openMonthpicker = false\"&gt;\n&lt;/textbox&gt;\n</code></pre>\n\n<p>Hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577166284, "post_id": 59464309, "comment_id": 105108965, "body": "I&#39;m sure this will work. But is it a good thing to call <code>hide</code> method on each and every keystroke. I&#39;m afraid it will ever pass unit tests. I dont know. I&#39;m just asking."}, {"owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "reply_to_user": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577166371, "post_id": 59464309, "comment_id": 105108986, "body": "In that case keep one flag variable and then check whether to call hide or not."}, {"owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "edited": false, "score": 0, "creation_date": 1577167330, "post_id": 59464309, "comment_id": 105109198, "body": "Yes Plochie, this worked. :-) I&#39;m accepting this answer. I hope this will pass all linting and unit tests. If not, then I&#39;ll re-open this discussion. ;-)"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": true, "score": 2, "last_activity_date": 1577166944, "last_edit_date": 1577166944, "creation_date": 1577166086, "answer_id": 59464309, "question_id": 59464148, "link": "https://stackoverflow.com/questions/59464148/how-to-remove-toggle-event-in-angular/59464309#59464309", "title": "How to remove toggle event in Angular", "body": "<p>There is a <code>hide</code> method to hide the overlay, As per comments, as keydown will be called multiple times, maintain a flag to track the state of overlay.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular6-primeng-9ctegx?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p><strong>Component</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class AppComponent {\n\n  datePickerOpen = false;\n\nopenDatePicker(event, element) {\n    element.toggle(event);\n    this.datePickerOpen = true;\n  }\n\n  closeDatePicker(event, element) {\n    if (this.datePickerOpen) {\n      element.hide(event);\n      this.datePickerOpen = false;\n    }\n  }\n}\n\n</code></pre>\n\n<p><strong>Template</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;textarea\n  (click)=\"openDatePicker($event, openMonthpicker)\"\n  (keydown)=\"closeDatePicker($event, openMonthpicker)\"&gt;\n&lt;/textarea&gt;\n\n&lt;p-overlayPanel class=\"dropdown\" #openMonthpicker&gt;\n    HTML CODE FOR DISPLAYING MONTHS\n&lt;/p-overlayPanel&gt;\n</code></pre>\n\n<p>You can call hide method on overlay reference, when there is <code>keydown</code> event.</p>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 2828219, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/t79VH.jpg?s=128&g=1", "display_name": "UniCoder", "link": "https://stackoverflow.com/users/2828219/unicoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1577167725, "creation_date": 1577167725, "answer_id": 59464525, "question_id": 59464148, "link": "https://stackoverflow.com/questions/59464148/how-to-remove-toggle-event-in-angular/59464525#59464525", "title": "How to remove toggle event in Angular", "body": "<p>This should work for you.</p>\n\n<pre><code>&lt;p-overlayPanel class=\"dropdown\" #openMonthpicker&gt;\n    HTML CODE FOR DISPLAYING MONTHS\n&lt;/p-overlayPanel&gt;\n</code></pre>\n\n<p>in you code you have given <code>#openMonthpicker</code> as ref.\nso while implementing months just call <code>openMonthpicker.hide()</code> on click of month.\nas hide method is available to toggle it off and that what you are looking.</p>\n"}], "owner": {"reputation": 1747, "user_id": 11163977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3a68a5b36f8dfba944423900d74a23?s=128&d=identicon&r=PG&f=1", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/11163977/tanzeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 59464309, "answer_count": 3, "score": 1, "last_activity_date": 1577167725, "creation_date": 1577164893, "question_id": 59464148, "link": "https://stackoverflow.com/questions/59464148/how-to-remove-toggle-event-in-angular", "title": "How to remove toggle event in Angular", "body": "<p>I've searched a lot on the internet but all the answers are using <code>jquery</code>. I'm new to Angular and Typescript. <a href=\"https://stackoverflow.com/questions/12997227/how-to-remove-toggle-event\">This</a> and <a href=\"https://stackoverflow.com/questions/44535515/angular-ngclass-and-click-event-for-toggling-class\">this</a> were not very helpful. I have created a monthpicker from the scratch. The mechanism is pretty simple and straightforward. When I click on <code>input</code> field, a popup opens with all the months. I mean this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qgZui.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qgZui.png\" alt=\"enter image description here\"></a></p>\n\n<p>That pop-up is actually <code>p-overlay</code> from <code>primeng</code>. Here is my code.</p>\n\n<p><strong>monthpicker.component.html</strong></p>\n\n<pre><code>&lt;textbox \n  (click)=\"openMonthpicker.toggle($event)\"&gt;\n&lt;/textbox&gt;\n\n&lt;p-overlayPanel class=\"dropdown\" #openMonthpicker&gt;\n    HTML CODE FOR DISPLAYING MONTHS\n&lt;/p-overlayPanel&gt;\n</code></pre>\n\n<p>My monthpicker component is editable, that means you can enter dates through keyboard also. But while entering dates i want that pop-up to collapse back.\nI added this line of code in <code>textbox</code>:</p>\n\n<pre><code>&lt;textbox \n  ...\n  (keydown)=\"openMonthpicker.off($event)\"&gt;\n&lt;/textbox&gt;\n</code></pre>\n\n<p>Apparently, <code>off</code> is not  function. I tried <code>remove</code> also. But I dont know is there any function to close the event. Can someone please help me?</p>\n\n<p>PS: I also read <a href=\"https://rjzaworski.com/2018/10/typescript-event-handlers\" rel=\"nofollow noreferrer\">TypeScript Event Handlers</a>.</p>\n"}, {"tags": ["javascript", "node.js", "typescript", "jestjs"], "answers": [{"tags": [], "owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "is_accepted": true, "score": 2, "last_activity_date": 1577169867, "creation_date": 1577169867, "answer_id": 59464875, "question_id": 59463875, "link": "https://stackoverflow.com/questions/59463875/how-to-mock-mailgun-messages-send-using-jest/59464875#59464875", "title": "How to mock mailgun.messages().send() using Jest?", "body": "<p>You need to use <code>jest.mock()</code> to mock <code>mailgun-js</code> module.</p>\n\n<p>E.g.</p>\n\n<p><code>mailgun.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import mg from 'mailgun-js';\n\n// Get database name from configuration file\nconst mailgunConfig: mg.ConstructorParams = {\n  apiKey: '123',\n  domain: 'example.com',\n};\n\n// Setup Mailgun Service\nconst mailgun = mg(mailgunConfig);\n\n// Mailgun Service class\nexport class Mailgun {\n  /**\n   * Static function to send an email.\n   * @param {mg.messages.SendData} emailParams - parameters to sent an email.\n   * @returns {Promise&lt;mg.messages.SendResponse&gt;} - maligun response with message and id.\n   */\n  static sendEmail = (emailParams: mg.messages.SendData): Promise&lt;mg.messages.SendResponse&gt; =&gt; {\n    return mailgun.messages().send(emailParams);\n  };\n}\n</code></pre>\n\n<p><code>mailgun.test.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Mailgun } from './mailgun';\nimport mg from 'mailgun-js';\n\njest.mock('mailgun-js', () =&gt; {\n  const mMailgun = {\n    messages: jest.fn().mockReturnThis(),\n    send: jest.fn(),\n  };\n  return jest.fn(() =&gt; mMailgun);\n});\n\n// sendEmail Test Suite\ndescribe('Send Email', () =&gt; {\n  it('returns the promise of queued object with id and message keys when valid email is passed', async () =&gt; {\n    // Preparing\n    const emailParam = {\n      from: 'noreply@shop.techardors.com',\n      to: 'ecomm@api.com',\n      subject: 'TechArdors Shopping: One-time passcode to reset the password',\n      html:\n        '&lt;p&gt;Please enter the passcode &lt;strong&gt;5124&lt;/strong&gt; to reset the password. It expires in 5 minutes from the time it is requested.&lt;/p&gt;',\n    };\n    const mailgun = mg({} as any);\n    (mailgun.messages().send as jest.MockedFunction&lt;any&gt;).mockResolvedValueOnce({\n      id: '222',\n      message: 'Queued. Thank you.',\n    });\n    // Executing\n    const result = await Mailgun.sendEmail(emailParam);\n    // Verifying\n    expect(result.message).toBe('Queued. Thank you.');\n    expect(result).toHaveProperty('id');\n    expect(result).toHaveProperty('message');\n    expect(mailgun.messages).toBeCalled();\n    expect(mailgun.messages().send).toBeCalledWith(emailParam);\n  });\n});\n</code></pre>\n\n<p>Unit test result with coverage report:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code> PASS  src/stackoverflow/59463875/mailgun.test.ts (7.587s)\n  Send Email\n    \u2713 returns the promise of queued object with id and message keys when valid email is passed (7ms)\n\n------------|----------|----------|----------|----------|-------------------|\nFile        |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n------------|----------|----------|----------|----------|-------------------|\nAll files   |      100 |      100 |      100 |      100 |                   |\n mailgun.ts |      100 |      100 |      100 |      100 |                   |\n------------|----------|----------|----------|----------|-------------------|\nTest Suites: 1 passed, 1 total\nTests:       1 passed, 1 total\nSnapshots:   0 total\nTime:        8.723s\n</code></pre>\n\n<p>Source code: <a href=\"https://github.com/mrdulin/jest-codelab/tree/master/src/stackoverflow/59463875\" rel=\"nofollow noreferrer\">https://github.com/mrdulin/jest-codelab/tree/master/src/stackoverflow/59463875</a></p>\n"}], "owner": {"reputation": 511, "user_id": 11912038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b37bc952a96cd1ad5a1c313a159855?s=128&d=identicon&r=PG&f=1", "display_name": "muthu", "link": "https://stackoverflow.com/users/11912038/muthu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "accepted_answer_id": 59464875, "answer_count": 1, "score": 0, "last_activity_date": 1610770740, "creation_date": 1577162177, "last_edit_date": 1610770740, "question_id": 59463875, "link": "https://stackoverflow.com/questions/59463875/how-to-mock-mailgun-messages-send-using-jest", "title": "How to mock mailgun.messages().send() using Jest?", "body": "<p>I am using <code>mailgun-js Api</code> to send mail. I've written an integration test instead of unit test. Now i need to write unit test case for <code>sendEmail</code> method wrapped inside <code>Mailgun</code> class. I don't know to how to mock <code>mailgun.messages().send()</code>. can anyone help me with this?</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 3836, "user_id": 3003401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2de9e3bd27825488f4cf0a1dd86ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Cerberus", "link": "https://stackoverflow.com/users/3003401/cerberus"}, "is_accepted": true, "score": 7, "last_activity_date": 1577163788, "creation_date": 1577163788, "answer_id": 59464042, "question_id": 59463751, "link": "https://stackoverflow.com/questions/59463751/what-is-the-difference-between-ts-syntaxkind-variablestatement-and-ts-syntaxk/59464042#59464042", "title": "What is the difference between `ts.SyntaxKind.VariableStatement` and `ts.SyntaxKind.FirstStatement`", "body": "<p>In the <code>SyntaxKind</code> enum, there are some entries which are used to denote not the concrete syntax kind, but a <em>class</em> of them. For statements, it is defined as following:</p>\n\n<pre><code>enum SyntaxKind {\n    // snip\n    FirstStatement = VariableStatement,\n    LastStatement = DebuggerStatement,\n    // snip\n}\n</code></pre>\n\n<p>Then, to check if some syntax kind is one of the \"statement\" kinds, one can simply write <code>kind &gt;= SyntaxKind.FirstStatement &amp;&amp; kind &lt;= SyntaxKind.LastStatement</code>. And, if the set of statement kinds will ever change, only the definition of <code>FirstStatement</code> or <code>LastStatement</code> should be changed, not these \"range checks\".</p>\n"}], "owner": {"reputation": 204459, "user_id": 390330, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1400be56ff17549b926dd3260da4a494?s=128&d=identicon&r=PG", "display_name": "basarat", "link": "https://stackoverflow.com/users/390330/basarat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 59464042, "answer_count": 1, "score": 4, "last_activity_date": 1577163788, "creation_date": 1577160901, "question_id": 59463751, "link": "https://stackoverflow.com/questions/59463751/what-is-the-difference-between-ts-syntaxkind-variablestatement-and-ts-syntaxk", "title": "What is the difference between `ts.SyntaxKind.VariableStatement` and `ts.SyntaxKind.FirstStatement`", "body": "<p>They both share the same enum value e.g. from TypeScript 3.7.2: </p>\n\n<pre><code>VariableStatement = 224,\nFirstStatement = 224,\n</code></pre>\n\n<p>Why are there two names for the same syntax kind?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 1461, "user_id": 5482640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584dde0d41010ae0616e2666964d1af4?s=128&d=identicon&r=PG", "display_name": "Chenna", "link": "https://stackoverflow.com/users/5482640/chenna"}, "edited": false, "score": 0, "creation_date": 1577161151, "post_id": 59463735, "comment_id": 105108022, "body": "Try removing <code>readonly</code> for <code>lastReport</code> and in constructor of <code>AccountingDepartment</code> add empty array check <code>this.lastReport = reports[0]; &#47;&#47;empty array</code>"}, {"owner": {"reputation": 43, "user_id": 11572478, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214483279619093/picture?type=large", "display_name": "Ali Maher", "link": "https://stackoverflow.com/users/11572478/ali-maher"}, "reply_to_user": {"reputation": 1461, "user_id": 5482640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584dde0d41010ae0616e2666964d1af4?s=128&d=identicon&r=PG", "display_name": "Chenna", "link": "https://stackoverflow.com/users/5482640/chenna"}, "edited": false, "score": 0, "creation_date": 1577161605, "post_id": 59463735, "comment_id": 105108106, "body": "I tried both ,, if i use empty array i got error on compile."}], "answers": [{"tags": [], "owner": {"reputation": 1291, "user_id": 7528829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1e137419309e96af93328844ce2eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Bozhko", "link": "https://stackoverflow.com/users/7528829/artem-bozhko"}, "is_accepted": true, "score": 1, "last_activity_date": 1577179803, "creation_date": 1577179803, "answer_id": 59466621, "question_id": 59463735, "link": "https://stackoverflow.com/questions/59463735/getter-in-type-script-not-working-it-always-throwgh-the-error-or-return-unde/59466621#59466621", "title": "getter in type script not working !!! it always throwgh the error or return undefined", "body": "<p>you never assign <code>lastReport</code> value after it is initialized in the constructor<br>\nUpdate the addReport method as follows</p>\n\n<pre><code>    ...\n    private lastReport: string;\n    ...\n    addReport(text: string) {\n        this.reports.push(text);\n        this.lastReport = text;\n    }\n    ...\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11572478, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214483279619093/picture?type=large", "display_name": "Ali Maher", "link": "https://stackoverflow.com/users/11572478/ali-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 59466621, "answer_count": 1, "score": 0, "last_activity_date": 1577179803, "creation_date": 1577160762, "question_id": 59463735, "link": "https://stackoverflow.com/questions/59463735/getter-in-type-script-not-working-it-always-throwgh-the-error-or-return-unde", "title": "getter in type script not working !!! it always throwgh the error or return undefined", "body": "<pre><code>class Department {\n    protected employees: string[] = [];\n\n    constructor(private readonly id: string, public name: string) {\n    }\n\n    describe(this: Department) {\n        console.log(`Department (${this.id}): ${this.name}`);\n    }\n\n\n    }\n}\n</code></pre>\n\n<p>I craeted a class then extends it with another </p>\n\n<pre><code>class AccountingDepartment extends Department{\n    private readonly lastReport: string;\n\n    get mostRecentReport() {\n        if (this.lastReport) {\n            return this.lastReport;\n        }\n        throw new Error('no report found.');\n    }\n\n    set mostRecentReport(value: string) {\n        if (!value) {\n            throw new Error('enter valid value')\n        }\n        this.addReport(value);\n    }\n\n    constructor(id: string, private reports: string[]) {\n        super(id, 'Accounting');\n        this.lastReport = reports[0];\n    }\n\n\n\n    addReport(text: string) {\n        this.reports.push(text);\n    }\n\n    PrintReport() {\n        console.log(this.reports);\n    }\n}\n</code></pre>\n\n<p>to use getter and setter as above </p>\n\n<pre><code>const Accounting = new AccountingDepartment('D2', []);\n\nAccounting.addReport('every thing is ok...');\nAccounting.mostRecentReport = 'welecome';\nAccounting.PrintReport();\nconsole.log(Accounting.mostRecentReport);\n\n</code></pre>\n\n<p>what i`m doning wrong\nmy code return the error (throw new Error('no report found.');) after adding it, !!\nif i comment the error it returns undefined !!</p>\n"}, {"tags": ["sql", "node.js", "typescript", "file"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1577158831, "post_id": 59463529, "comment_id": 105107680, "body": "what error do you get on your <code>readFileSync</code>?  Guessing it doesn&#39;t know the directory to find that file?"}, {"owner": {"reputation": 6094, "user_id": 3164889, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/4NXwj.png?s=128&g=1", "display_name": "Socrates", "link": "https://stackoverflow.com/users/3164889/socrates"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1577159481, "post_id": 59463529, "comment_id": 105107786, "body": "@Joe Added error in <b>EDIT 1</b>."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1577159574, "post_id": 59463529, "comment_id": 105107799, "body": "Yeah, you just need to figure out the path OR do something like <code>const sql: string = readFileSync(__dirname + &#39;database_initialization.sql&#39;).toString();</code>"}, {"owner": {"reputation": 6094, "user_id": 3164889, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/4NXwj.png?s=128&g=1", "display_name": "Socrates", "link": "https://stackoverflow.com/users/3164889/socrates"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1577159881, "post_id": 59463529, "comment_id": 105107837, "body": "@Joe That did it. The <code>__dirname</code> + <code>&#47;</code> + <code>database_initialization.sql</code>. Thanks a lot!"}], "owner": {"reputation": 6094, "user_id": 3164889, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/4NXwj.png?s=128&g=1", "display_name": "Socrates", "link": "https://stackoverflow.com/users/3164889/socrates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577159453, "creation_date": 1577158325, "last_edit_date": 1577159453, "question_id": 59463529, "link": "https://stackoverflow.com/questions/59463529/access-sql-files-inside-node-project", "title": "Access SQL files inside Node project", "body": "<p>Is there a way to access SQL files created during development of a Node project?</p>\n\n<p>I have a file <code>database_initialization.sql</code> holding a number of commands. Its purpose is to create the basic structure of the database. I want it to start when the database name within a MySQL database could not be found. Currently, the content of this SQL file is copied into the updating TypeScript file as a <code>const sql: string = 'CREATE DATABASE myDatabase; USE myDatabase; CREATE TABLE ...';</code>. I would like to have the variable <code>sql</code> filled by the SQL file rather than having a copy of its content in another file.</p>\n\n<p>The file <code>database_initialization.sql</code> is in the same directory as the TypeScript file, during development. My current attempt does not work:</p>\n\n<p><code>const sql: string = readFileSync('database_initialization.sql').toString();</code></p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>The error given when trying to <code>readFileSync</code>:</p>\n\n<pre><code>Error: ENOENT: no such file or directory, open 'database_initialization.sql'\n    at Object.openSync (fs.js:436:3)\n    at Object.readFileSync (fs.js:341:35)\n    at Function.initializeDatabase (/Users/myuser/Documents/myproject/src/Data/Update/UpdateQuery.ts:7:29)\n    at Handshake.ApiServer.db.connect (/Users/myuser/Documents/myproject/src/ApiServer.ts:45:25)\n    at Handshake.&lt;anonymous&gt; (/Users/myuser/Documents/myproject/node_modules/mysql/lib/Connection.js:525:10)\n    at Handshake._callback (/Users/myuser/Documents/myproject/node_modules/mysql/lib/Connection.js:491:16)\n    at Handshake.Sequence.end (/Users/myuser/Documents/myproject/node_modules/mysql/lib/protocol/sequences/Sequence.js:83:24)\n    at Handshake.Sequence.OkPacket (/Users/myuser/Documents/myproject/node_modules/mysql/lib/protocol/sequences/Sequence.js:92:8)\n    at Protocol._parsePacket (/Users/myuser/Documents/myproject/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/myuser/Documents/myproject/node_modules/mysql/lib/protocol/Parser.js:433:10)\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "unit-testing", "mocking", "jestjs"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1577157967, "post_id": 59463491, "comment_id": 105107543, "body": "does <code>jest.fn().mockResolvedValueOnce(&#39;Ready&#39;)</code> return a function? if not, that&#39;s your problem"}, {"owner": {"reputation": 71, "user_id": 12527480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8046d2e301c49c625a1eaf346be5b95f?s=128&d=identicon&r=PG&f=1", "display_name": "fly.bird", "link": "https://stackoverflow.com/users/12527480/fly-bird"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1577158148, "post_id": 59463491, "comment_id": 105107566, "body": "How do I check that it returns function? New to jest. It should return function though."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1577164687, "post_id": 59463491, "comment_id": 105108673, "body": "ok, was just trying to point you in a direction, I don&#39;t use any of those testing things so have no more to add"}, {"owner": {"reputation": 71, "user_id": 12527480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8046d2e301c49c625a1eaf346be5b95f?s=128&d=identicon&r=PG&f=1", "display_name": "fly.bird", "link": "https://stackoverflow.com/users/12527480/fly-bird"}, "reply_to_user": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "edited": false, "score": 0, "creation_date": 1577187839, "post_id": 59463491, "comment_id": 105115853, "body": "@slideshowp2 Thanks for edit.  Can you please guide me what is that I am missing in my test case?"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 12527480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8046d2e301c49c625a1eaf346be5b95f?s=128&d=identicon&r=PG&f=1", "display_name": "fly.bird", "link": "https://stackoverflow.com/users/12527480/fly-bird"}, "edited": false, "score": 0, "creation_date": 1577293917, "post_id": 59475239, "comment_id": 105137617, "body": "Thanks. I know what I was doing wrong. I was resetting all mocks and I never thought that would be a problem as it did work with my other tests. I had 5 tests and I pasted code related to only 1 test that was failing. Your answer gave me confidence that I was mocking it right. Now, after I remove ` jest.resetAllMocks(); &#39;, my all 5 tests are passing. I always thought issue is the way I am mocking. Your answer helped me to see where potential issue could be. Thanks again."}], "tags": [], "owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "is_accepted": true, "score": 0, "last_activity_date": 1577248226, "creation_date": 1577248226, "answer_id": 59475239, "question_id": 59463491, "link": "https://stackoverflow.com/questions/59463491/typeerror-xxxxxxx-is-not-a-function-while-jest-mocking/59475239#59475239", "title": "TypeError: XXXXXXX is not a function (While jest mocking)", "body": "<p>Here is the unit test solution:</p>\n\n<p><code>index.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Lambda } from 'aws-sdk';\nimport fsReadFilePromise from 'fs-readfile-promise';\n\nexport class AWSLambdaDeployer {\n  private readonly mylambda: Lambda;\n  constructor(lambda: Lambda) {\n    this.mylambda = lambda;\n  }\n\n  public async deploy(zipPath: string, fName: string) {\n    const fileData = await fsReadFilePromise(zipPath);\n\n    const params: Lambda.Types.UpdateFunctionCodeRequest = {\n      FunctionName: fName,\n      ZipFile: fileData,\n      Publish: true,\n    };\n\n    return this.mylambda.updateFunctionCode(params).promise();\n  }\n}\n</code></pre>\n\n<p><code>index.spec.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { AWSLambdaDeployer } from './';\nimport fsReadFilePromise from 'fs-readfile-promise';\nimport AWS from 'aws-sdk';\n\njest.mock('aws-sdk', () =&gt; {\n  const mLambda = {\n    updateFunctionCode: jest.fn().mockReturnThis(),\n    promise: jest.fn(),\n  };\n  return {\n    Lambda: jest.fn(() =&gt; mLambda),\n  };\n});\n\njest.mock('fs-readfile-promise', () =&gt; jest.fn());\n\ndescribe('59463491', () =&gt; {\n  afterEach(() =&gt; {\n    jest.resetAllMocks();\n    jest.restoreAllMocks();\n  });\n  it(' functionality under test', async () =&gt; {\n    (fsReadFilePromise as any).mockResolvedValueOnce('get it done');\n\n    const lambda = new AWS.Lambda();\n    const awslambdaDeployer = new AWSLambdaDeployer(lambda);\n\n    await awslambdaDeployer.deploy('filePath', 'workingFunction');\n\n    expect(fsReadFilePromise).toBeCalledWith('filePath');\n    expect(lambda.updateFunctionCode).toBeCalledWith({\n      FunctionName: 'workingFunction',\n      ZipFile: 'get it done',\n      Publish: true,\n    });\n    expect(lambda.updateFunctionCode().promise).toBeCalledTimes(1);\n  });\n});\n</code></pre>\n\n<p>Unit test result with 100% coverage:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code> PASS  src/stackoverflow/59463491/index.spec.ts (10.592s)\n  59463491\n    \u2713  functionality under test (9ms)\n\n----------|----------|----------|----------|----------|-------------------|\nFile      |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n----------|----------|----------|----------|----------|-------------------|\nAll files |      100 |      100 |      100 |      100 |                   |\n index.ts |      100 |      100 |      100 |      100 |                   |\n----------|----------|----------|----------|----------|-------------------|\nTest Suites: 1 passed, 1 total\nTests:       1 passed, 1 total\nSnapshots:   0 total\nTime:        12.578s, estimated 13s\n</code></pre>\n\n<p>Source code: <a href=\"https://github.com/mrdulin/jest-codelab/tree/master/src/stackoverflow/59463491\" rel=\"nofollow noreferrer\">https://github.com/mrdulin/jest-codelab/tree/master/src/stackoverflow/59463491</a></p>\n"}], "owner": {"reputation": 71, "user_id": 12527480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8046d2e301c49c625a1eaf346be5b95f?s=128&d=identicon&r=PG&f=1", "display_name": "fly.bird", "link": "https://stackoverflow.com/users/12527480/fly-bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "accepted_answer_id": 59475239, "answer_count": 1, "score": 1, "last_activity_date": 1577248226, "creation_date": 1577157853, "last_edit_date": 1577170017, "question_id": 59463491, "link": "https://stackoverflow.com/questions/59463491/typeerror-xxxxxxx-is-not-a-function-while-jest-mocking", "title": "TypeError: XXXXXXX is not a function (While jest mocking)", "body": "<p>I am struggling to jest mock the below method. Not able to mock. Please see my test case below it. Test case fails with error </p>\n\n<blockquote>\n  <p>TypeError: XXXXXXX is not a function.  </p>\n</blockquote>\n\n<p>When I run coverage report, it says all lines are covered. What is that I am missing?  </p>\n\n<pre><code>import { Lambda } from \"aws-sdk\";\nimport fsReadFilePromise = require(\"fs-readfile-promise\");\n\nexport class AWSLambdaDeployer {\n\n    readonly mylambda: Lambda;\n\n     public async deploy(zipPath: string, fName: string) {\n\n        const fileData = await fsReadFilePromise(zipPath);\n\n        const params: Lambda.Types.UpdateFunctionCodeRequest = {\n            FunctionName: fName,\n            ZipFile: fileData,\n            Publish: true\n        };\n\n        return this.mylambda.updateFunctionCode(params).promise();\n    }\n}\n</code></pre>\n\n<p>Below is my jest test case </p>\n\n<pre><code>\nconst mockUpdateFunctionCode = jest.fn().mockResolvedValueOnce('Ready');\n\njest.mock(\"../node_modules/aws-sdk/clients/lambda\", () =&gt;{\n    return{\n        updateFunctionCode: mockUpdateFunctionCode,     \n    }\n});\n\njest.mock(\"fs-readfile-promise\", () =&gt; {\n    return jest.fn();\n});\n\nimport { Lambda } from \"aws-sdk\";\nimport fsReadFilePromise = require(\"fs-readfile-promise\");\nimport { AWSLambdaDeployer } from \"../src/index\";\n\ndescribe('LambdaDeployer class', () =&gt; {\n\n    afterEach(() =&gt; {\n     jest.resetAllMocks();\n     jest.restoreAllMocks();\n    });\n           it(' functionality under test', async () =&gt;{\n\n             (fsReadFilePromise as any).mockResolvedValueOnce('get it done');\n\n             const awslambdaDeployer = new AWSLambdaDeployer();\n\n            const actual = await awslambdaDeployer.deploy('filePath', 'workingFunction');\n\n             expect(fsReadFilePromise).toBeCalledWith('filePath');      \n           })\n});\n</code></pre>\n\n<p>This gives me error as below. The test case fails. The coverage report shows all lines covered. </p>\n\n<blockquote>\n  <p>TypeError: this.mylambda.updateFunctionCode is not a function</p>\n</blockquote>\n"}]