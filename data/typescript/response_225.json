[{"tags": ["typescript", "puppeteer"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8424504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459923870741667/picture?type=large", "display_name": "tsunomur", "link": "https://stackoverflow.com/users/8424504/tsunomur"}, "edited": false, "score": 0, "creation_date": 1556775355, "post_id": 55944081, "comment_id": 98545027, "body": "Thank you! I understood that in $$eval is browser context."}], "tags": [], "owner": {"reputation": 870, "user_id": 1942494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cadbe3214e490ffa6e164e65e5817f9?s=128&d=identicon&r=PG", "display_name": "ahz", "link": "https://stackoverflow.com/users/1942494/ahz"}, "is_accepted": true, "score": 2, "last_activity_date": 1556754958, "creation_date": 1556754958, "answer_id": 55944081, "question_id": 55943883, "link": "https://stackoverflow.com/questions/55943883/how-to-call-outer-function-in-anonymous-callback-function/55944081#55944081", "title": "How to call outer function in anonymous &amp; callback function", "body": "<p>Looks like <code>elm.$$eval('p, li', func)</code> evaluates <code>func</code> in browser context. Therefore there is no easy way to call outer function. Easy solution would be to make <code>translateText</code> inner function of <code>func</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8424504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459923870741667/picture?type=large", "display_name": "tsunomur", "link": "https://stackoverflow.com/users/8424504/tsunomur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 55944081, "answer_count": 1, "score": 0, "last_activity_date": 1556775207, "creation_date": 1556753002, "last_edit_date": 1556775207, "question_id": 55943883, "link": "https://stackoverflow.com/questions/55943883/how-to-call-outer-function-in-anonymous-callback-function", "title": "How to call outer function in anonymous &amp; callback function", "body": "<p>I'm trying to call map function with callback.\nBut I couldn't call my callback function with following error messages.</p>\n\n<pre><code>&gt; tsc &amp;&amp; node index.js\n\n(node:17460) UnhandledPromiseRejectionWarning: Error: Evaluation failed: ReferenceError: translateText is not defined\n    at mapFunc (__puppeteer_evaluation_script__:3:13)\n    at Array.map (&lt;anonymous&gt;)\n    at __puppeteer_evaluation_script__:13:22\n    at ExecutionContext.evaluateHandle (C:\\github\\dojo-tools\\node_modules\\puppeteer\\lib\\ExecutionContext.js:121:13)\n    at process._tickCallback (internal/process/next_tick.js:68:7)\n  -- ASYNC --\n    at ExecutionContext.&lt;anonymous&gt; (C:\\github\\dojo-tools\\node_modules\\puppeteer\\lib\\helper.js:110:27)\n    at ExecutionContext.evaluate (C:\\github\\dojo-tools\\node_modules\\puppeteer\\lib\\ExecutionContext.js:48:31)\n    at ExecutionContext.&lt;anonymous&gt; (C:\\github\\dojo-tools\\node_modules\\puppeteer\\lib\\helper.js:111:23)\n    at ElementHandle.$$eval (C:\\github\\dojo-tools\\node_modules\\puppeteer\\lib\\JSHandle.js:453:50)\n    at process._tickCallback (internal/process/next_tick.js:68:7)\n  -- ASYNC --\n    at ElementHandle.&lt;anonymous&gt; (C:\\github\\dojo-tools\\node_modules\\puppeteer\\lib\\helper.js:110:27)\n    at getHTML (C:\\github\\dojo-tools\\index.js:77:32)\n    at process._tickCallback (internal/process/next_tick.js:68:7)\n(node:17460) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\n(node:17460) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n</code></pre>\n\n<p>I would like to call outer function in callback function.\nBecause I would like to process each array item.</p>\n\n<p>Below is my current code.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function translateText() {...}\n\nasync function getHTML() {\n    const browser = await puppeteer.launch({\n        headless: false\n    });\n\n    const func = (nodes: Array&lt;Element&gt;) =&gt; {\n        const mapFunc = (n: Element) =&gt; {\n            translateText(n.textContent || \"NO STRING\"); // &lt;-------- ERROR\n            switch (n.tagName) {\n                case 'P':\n                    return `  * ${n.textContent}`;\n                case 'LI':\n                    return `    * ${n.textContent}`;\n                default:\n                    return `    * COULDNOT ANALYZE - ${n.textContent}`;\n            }\n        }\n        return nodes.map(mapFunc);\n    }\n\n    const page = await browser.newPage();\n    await page.goto('https://azure.microsoft.com/en-us/updates/the-azure-us-gov-iowa-region-is-being-retired-april-30-2020/'); // \u8868\u793a\u3057\u305f\u3044URL\n    const elm = await page.$('#main &gt; div &gt; div:nth-child(3) &gt; div &gt; div:nth-child(1)');\n    if (elm !== null) {\n        const data = await elm.$$eval('p, li', func);\n        console.log(data);\n    }\n    browser.close();\n}\n</code></pre>\n\n<p>Could you let me know how to access outer function in map callback function?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "edited": false, "score": 0, "creation_date": 1556752958, "post_id": 55943837, "comment_id": 98540750, "body": "why not a click event listener containing document.getElementById(&#39;submitForm&#39;).disabled = &#39;disabled&#39;;     },"}, {"owner": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "edited": false, "score": 0, "creation_date": 1556752990, "post_id": 55943837, "comment_id": 98540754, "body": "Also you have an extra &quot;}&quot; in your script."}, {"owner": {"reputation": 1249, "user_id": 1259768, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b32328e467aa3309a94aa26804a8257b?s=128&d=identicon&r=PG", "display_name": "Marium Malik", "link": "https://stackoverflow.com/users/1259768/marium-malik"}, "reply_to_user": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "edited": false, "score": 0, "creation_date": 1556753147, "post_id": 55943837, "comment_id": 98540790, "body": "@shadoe2020 I don&#39;t get &#39;.disabled&#39;, as an option in document.getElementbyId"}, {"owner": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "edited": false, "score": 1, "creation_date": 1556753360, "post_id": 55943837, "comment_id": 98540817, "body": "how about .setAttribute(&#39;disabled&#39;)"}, {"owner": {"reputation": 1249, "user_id": 1259768, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b32328e467aa3309a94aa26804a8257b?s=128&d=identicon&r=PG", "display_name": "Marium Malik", "link": "https://stackoverflow.com/users/1259768/marium-malik"}, "reply_to_user": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "edited": false, "score": 1, "creation_date": 1556753543, "post_id": 55943837, "comment_id": 98540857, "body": "It works! Thanks. You can submit it as an answer, if you want me to accept it."}, {"owner": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "edited": false, "score": 0, "creation_date": 1556753768, "post_id": 55943837, "comment_id": 98540899, "body": "my pleasure, I&#39;ve added it and good luck to you."}], "answers": [{"tags": [], "owner": {"reputation": 1113, "user_id": 11059320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWZp.jpg?s=128&g=1", "display_name": "shadow2020", "link": "https://stackoverflow.com/users/11059320/shadow2020"}, "is_accepted": true, "score": 1, "last_activity_date": 1556811105, "last_edit_date": 1556811105, "creation_date": 1556753701, "answer_id": 55943948, "question_id": 55943837, "link": "https://stackoverflow.com/questions/55943837/disable-a-button-after-submitting-form-when-form-already-has-form-valid-field-se/55943948#55943948", "title": "Disable a button after submitting form when form already has form.valid field set for [disabled] field", "body": "<pre><code>document.yourQuerySelector('submitForm').setAttribute('disabled');\n</code></pre>\n\n<p>This will add an attribute of your choice to any element. \"Disabled\" will work in this case.</p>\n"}], "owner": {"reputation": 1249, "user_id": 1259768, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b32328e467aa3309a94aa26804a8257b?s=128&d=identicon&r=PG", "display_name": "Marium Malik", "link": "https://stackoverflow.com/users/1259768/marium-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55943948, "answer_count": 1, "score": 1, "last_activity_date": 1556811105, "creation_date": 1556752490, "last_edit_date": 1556753020, "question_id": 55943837, "link": "https://stackoverflow.com/questions/55943837/disable-a-button-after-submitting-form-when-form-already-has-form-valid-field-se", "title": "Disable a button after submitting form when form already has form.valid field set for [disabled] field", "body": "<p>I have a reactive form, which consists of a button and two other fields.</p>\n\n<p>I have set a validator. If validator is true, I am enabling the button via 'FormName.valid' and similarly if it's false, the button is disabled</p>\n\n<p><strong>What I want?</strong></p>\n\n<p>I want to disable button, after clicking on Submit button as well</p>\n\n<p><strong>What I tried?</strong></p>\n\n<p>I tried <code>FormName.reset()</code>, which does disable the button, but then it shows errors in the background for empty two fields, while my spinner is running. (So, I don't want to do like this)</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;form [formGroup]=\"FormName\" (ngSubmit)=sendData()&gt;\n       // Two other fields here\n        &lt;div id=\"frame-send-button\" text-center&gt;\n            &lt;button [disabled]=\"!FormName.valid\" type=\"submit\"&gt;\n                Submit\n            &lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>Typescript</strong></p>\n\n<p>Form Initialization    </p>\n\n<pre><code>this.FormName= new FormGroup({\n        field1: new FormControl(this.field1value, Validators.required),\n        field2: new FormControl(this.field2value)\n    }, IsFutureValidator('somevalidator'));\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["css", "angular", "typescript", "angular-directive", "ng-template"], "comments": [{"owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "edited": false, "score": 0, "creation_date": 1557483905, "post_id": 55943639, "comment_id": 98789557, "body": "hi, does the solution below work for you ?"}], "answers": [{"comments": [{"owner": {"reputation": 1064, "user_id": 1417671, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/lIWQJ.jpg?s=128&g=1", "display_name": "MizAkita", "link": "https://stackoverflow.com/users/1417671/mizakita"}, "edited": false, "score": 1, "creation_date": 1557968491, "post_id": 55947803, "comment_id": 98947301, "body": "This works... made some adjustments to match my data but it displays perfectly."}, {"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1557977587, "post_id": 55947803, "comment_id": 98948853, "body": "<a href=\"https://meta.stackexchange.com/a/8259/171858\">When someone goes on Stack Exchange, the question &quot;answer&quot; should actually contain an answer. Not just a bunch of directions/links towards the answer.</a>."}, {"owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "reply_to_user": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1557978153, "post_id": 55947803, "comment_id": 98948957, "body": "@ErikPhilips, i gave a description of all changes i did to solve the issue; How could i have given a better answer... by including all the code ?"}, {"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 1, "creation_date": 1557978237, "post_id": 55947803, "comment_id": 98948969, "body": "Yes by including all the code.  That&#39;s the point of the website.  If your link goes down, your answer is just about useless to everyone who reads it."}, {"owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "reply_to_user": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1557978622, "post_id": 55947803, "comment_id": 98949060, "body": "@ErikPhilips updated the answer... I&#39;ll know you approved when i see an up vote :)"}], "tags": [], "owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "is_accepted": true, "score": 2, "last_activity_date": 1557978550, "last_edit_date": 1557978550, "creation_date": 1556783127, "answer_id": 55947803, "question_id": 55943639, "link": "https://stackoverflow.com/questions/55943639/ngfor-how-to-override-value-in-a-template-loop-if-found/55947803#55947803", "title": "*ngFor - How to Override Value in a Template Loop if found", "body": "<p>Very good question - doing it without TS function made it more challenging... You can check a <a href=\"https://stackblitz.com/edit/angular-aep11t?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">working demo here</a>  </p>\n\n<ul>\n<li>I changed the structure of the array (function sortArraybyID) so that we can separate sections for product lines ('HewlettPackard', 'EpsonCenter5000', 'another report').</li>\n<li>Next, since we must have a row for each report ID, so we put that in an array also and simply print these out</li>\n<li>We print a green cirlce by default against all reports - so all rows go green (by default)</li>\n<li>next, we just overwrite the circle if we find a match - the key is to have a greater z-index :)</li>\n</ul>\n\n<p>updated <strong>app.component.ts</strong>:</p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  name = 'Angular';\n  newItems = [];\n  newArray: any[] = [];\n  mustHaveArray: any[] = [];\n\n  constructor() {\n    this.mustHaveArray = [\n      { reportId: 1, descr: 'Polaris South' }, \n      { reportId: 2, descr: 'Dandride' },\n      { reportId: 3.1, descr: 'Opmanual Internal' }, \n      { reportId: 3.2, descr: 'Zetaphi Remarks' }\n    ];\n    this.newItems = [\n      { id: '8997', yellow: 'Y', red: 'N', reportId: 1 }, //HewlettPackard \n      { id: '8997', yellow: 'N', red: 'Y', reportId: 2 }, //HewlettPackard \n      { id: '8997', yellow: 'N', red: 'N', reportId: 3.1 }, //HewlettPackard \n      { id: '8997', yellow: 'Y', red: 'N', reportId: 3.2 }, //HewlettPackard \n\n      { id: '6300', yellow: 'N', red: 'Y', reportId: 1 }, //EpsonCenter5000\n      { id: '6300', yellow: 'Y', red: 'N', reportId: 2 }, //EpsonCenter5000\n\n      { id: '0019', yellow: 'Y', red: 'N', reportId: 1 }, //another report\n      { id: '0019', yellow: 'N', red: 'Y', reportId: 2 }, //another report\n    ];\n    this.sortArraybyID();\n  }\n\n  sortArraybyID() {\n\n    for (var i = 0; i &lt; this.newItems.length; i++) {\n      //console.log(i+\" off\" + this.newItems.length +\" for:\"+this.newItems[i].id);\n\n      let checkForID: boolean = false;\n      for (var j = 0; j &lt; this.newArray.length; j++) {\n        if (this.newArray[j].id === this.newItems[i].id) { checkForID = true; break; }\n      }\n      if (checkForID == false) {\n        this.newArray.push({ id: this.newItems[i].id, details: [{ yellow: this.newItems[i].yellow, red: this.newItems[i].red, reportId: this.newItems[i].reportId }] });\n      } else {\n        this.newArray[j].details.push({ yellow: this.newItems[i].yellow, red: this.newItems[i].red, reportId: this.newItems[i].reportId });\n      }\n    }\n    //console.log(this.newArray);\n  }\n}\n</code></pre>\n\n<p>updated <strong>app.component.html</strong>:</p>\n\n<pre><code>&lt;div class='tableDiv2' *ngFor=\"let outer of newArray, let i = index\"&gt;\n    &lt;table&gt;\n        &lt;thead&gt;\n            &lt;th&gt;\n                &lt;tr&gt; Category [{{i}}] &lt;br/&gt; ID:{{outer.id}} &lt;/tr&gt;\n            &lt;/th&gt;\n        &lt;/thead&gt;\n        &lt;ng-container&gt;\n\n            &lt;tbody&gt;\n                &lt;tr *ngFor=\"let category of mustHaveArray\"&gt;\n                    &lt;td&gt;\n                        &lt;ng-container *ngFor=\"let loop of outer.details; let idx2 = index\"&gt;\n                            &lt;div class='defaultClass'&gt;\n                            &lt;/div&gt;\n                            &lt;div *ngIf=\"category.reportId == loop.reportId\" [ngClass]=\"(loop.yellow == 'Y' &amp;&amp; loop.red == 'N') ? 'yellow' : (loop.yellow == 'N' &amp;&amp; loop.red == 'Y') ? 'red' : 'green'  \"&gt;\n                            &lt;/div&gt;\n                        &lt;/ng-container&gt;\n                        &lt;span class='descrClass'&gt;\n           {{category.descr}}\n           &lt;/span&gt;\n\n          &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/tbody&gt;\n\n        &lt;/ng-container&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>updated <strong>app.component.css</strong>:</p>\n\n<pre><code>.yellow , .red , .green\n{ border-radius: 50%; height:20px; width: 20px; position: absolute; text-align: center !important; \nz-index:2;\n}\n\n.defaultClass { background:lightgreen; border-radius: 50%; height:20px; width: 20px; position: absolute; text-align: center !important; z-index:1; }\n\n\n.yellow { background:yellow;   }\n.red { background:lightpink;  }\n.green { background:lightgreen; }\n\n.tableDiv2{float:left; width:24%;}\n.tableDiv{float:left; width:12%;}\n.oldData{ width:100%;  height:10px; float:left;}\n\n.oldData .tableDiv{ background:lightgrey;}\n.descrClass{ margin-left:25px; text-align: left !important;}\n</code></pre>\n"}], "owner": {"reputation": 1064, "user_id": 1417671, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/lIWQJ.jpg?s=128&g=1", "display_name": "MizAkita", "link": "https://stackoverflow.com/users/1417671/mizakita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 1, "accepted_answer_id": 55947803, "answer_count": 1, "score": 1, "last_activity_date": 1557978550, "creation_date": 1556750827, "last_edit_date": 1557977106, "question_id": 55943639, "link": "https://stackoverflow.com/questions/55943639/ngfor-how-to-override-value-in-a-template-loop-if-found", "title": "*ngFor - How to Override Value in a Template Loop if found", "body": "<p>I have an array of objects that look like this:</p>\n\n<pre><code>newItems = [\n  { id: 8997, yellow: 'Y', red: 'N', reportId: 1 }, //HewlettPackard \n  { id: 8997, yellow: 'N', red: 'N', reportId: 2 }, //HewlettPackard \n  { id: 6300, yellow: 'N', red: 'Y', reportId: 2 }, //EpsonCenter5000\n  { id: 0019, yellow: 'Y', red: 'N', reportId: 1 }  //another report\n]\n</code></pre>\n\n<p>I am looping through the objects using ngFor and it works fine. Basically, if in an object, yellow or red is set to \"Y\", display the corresponding color circle.</p>\n\n<p><strong>There is approximately 4 reports (reportID's) that can appear for one category id (id).</strong></p>\n\n<pre><code>&lt;div *ngFor=\"let loop of newItems\"&gt;\n&lt;table&gt;\n   &lt;ng-template *ngIf=\"loop.yellow = 'Y' &amp;&amp; loop.red == 'N' &amp;&amp; loop.reportId == 1\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"yellow\"&gt;Polaris South&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.red = 'Y' &amp;&amp; loop.yellow == 'N' &amp;&amp; loop.reportId == 1\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"red\"&gt;Polaris South&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.reportId !== 1\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"green\"&gt;Polaris South&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   ***********************\n   &lt;ng-template *ngIf=\"loop.yellow = 'Y' &amp;&amp; loop.red == 'N' &amp;&amp; loop.reportId == 2\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"yellow\"&gt;Dandride&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.red = 'Y' &amp;&amp; loop.yellow == 'N' &amp;&amp; loop.reportId == 2\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"red\"&gt;Dandride&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.reportId !== 2\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"green\"&gt;Dandride&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n\n  ********************\n   &lt;ng-template *ngIf=\"loop.yellow = 'Y' &amp;&amp; loop.red == 'N' &amp;&amp; loop.reportId == 3.1\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"yellow\"&gt;Opmanual Internal&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.red = 'Y' &amp;&amp; loop.yellow == 'N' &amp;&amp; loop.reportId == 3.1\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"red\"&gt;Opmanual Internal&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.reportId !== 3.1\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"green\"&gt;Opmanual Internal&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n\n   **************************\n   &lt;ng-template *ngIf=\"loop.yellow = 'Y' &amp;&amp; loop.red == 'N' &amp;&amp; loop.reportId == 3.2\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"yellow\"&gt;Zetaphi Remarks&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.red = 'Y' &amp;&amp; loop.yellow == 'N' &amp;&amp; loop.reportId == 3.2\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"red\"&gt;Zetaphi Remarks&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n   &lt;ng-template *ngIf=\"loop.reportId !== 3.2\"&gt;\n      &lt;tr&gt;\n         &lt;td class=\"green\"&gt;Zetaphi Remarks&lt;/td&gt;\n      &lt;/tr&gt;\n   &lt;/ng-template&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The issue is, is for each box where the category (i.e. Hewlett Packard, Epson Center 5000), if there are yellow and red values found for different ReportId's, because the for loop loops through the iterations of objects you get duplicated results if there is more than one report (reportID for a single id). See screenshot.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wpr0E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wpr0E.png\" alt=\"enter image description here\"></a></p>\n\n<p>My goal is that if a yellow is set to \"Y\" display it on any iteration where the id matches, same thing for red but do not duplicate, instead, overwrite the green default value if a \"Y\" is found.</p>\n"}, {"tags": ["javascript", "typescript", "webpack", "babeljs"], "owner": {"reputation": 1718, "user_id": 1989999, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/FHot3.jpg?s=128&g=1", "display_name": "Foxhoundn", "link": "https://stackoverflow.com/users/1989999/foxhoundn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1556749550, "creation_date": 1556749550, "question_id": 55943476, "link": "https://stackoverflow.com/questions/55943476/point-babel-loader-to-different-tsconfig-json-file", "title": "Point babel-loader to different tsconfig.json file", "body": "<p>Is there a way to point babel-loader to a specific <code>tsconfig.json</code> file? We have a project that uses multiple ones (one is used by tsc, other one by Webpack) and I have found no way to tell babel-loader to use a specific one.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["typescript", "aws-lambda", "tsconfig"], "comments": [{"owner": {"reputation": 9320, "user_id": 5196394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52GqN.jpg?s=128&g=1", "display_name": "hoangdv", "link": "https://stackoverflow.com/users/5196394/hoangdv"}, "edited": false, "score": 0, "creation_date": 1556769045, "post_id": 55943272, "comment_id": 98543523, "body": "You can copy your layer folder to your <code>&#47;opt</code> folder in your local computer, or create a script to do that."}, {"owner": {"reputation": 11693, "user_id": 1252647, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7cXay.jpg?s=128&g=1", "display_name": "Noel Llevares", "link": "https://stackoverflow.com/users/1252647/noel-llevares"}, "edited": false, "score": 0, "creation_date": 1556771714, "post_id": 55943272, "comment_id": 98544000, "body": "Try experimenting with your tsconfig settings. Mainly <code>baseUrl</code> and <code>paths</code>."}, {"owner": {"reputation": 63, "user_id": 11076656, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JPnhvi1zt3M/AAAAAAAAAAI/AAAAAAAAAAc/eP5mcMRGdGc/photo.jpg?sz=128", "display_name": "Haoyuan Tang", "link": "https://stackoverflow.com/users/11076656/haoyuan-tang"}, "edited": false, "score": 0, "creation_date": 1599402671, "post_id": 55943272, "comment_id": 112758037, "body": "Hi, I have the same issue, any updates?"}], "answers": [{"tags": [], "owner": {"reputation": 3470, "user_id": 604218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06nDS.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/604218/roberto"}, "is_accepted": false, "score": 1, "last_activity_date": 1605831682, "creation_date": 1605831682, "answer_id": 64921982, "question_id": 55943272, "link": "https://stackoverflow.com/questions/55943272/how-to-tell-typescript-compiler-that-this-module-is-defined-here/64921982#64921982", "title": "How to tell TypeScript compiler that this module is defined here?", "body": "<p>You can add a <code>paths</code> mapping to your <code>tsconfig.json</code> file to map the import path <code>/opt/*</code> to the real path <code>layers/websocketapi/*</code></p>\n<pre><code>{\n  &quot;compilerOptions&quot;: {\n    ...\n    &quot;baseUrl&quot;: &quot;.&quot;,\n    &quot;paths&quot;: {\n        &quot;/opt/*&quot;: [&quot;layers/websocketapi/*&quot;]\n    }\n  }\n  ...\n}\n</code></pre>\n<p>Paths are resolved relative to <code>baseUrl</code>, more information about the path mapping can be found on the typescript documentation <a href=\"https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping</a></p>\n"}], "owner": {"reputation": 445, "user_id": 2419560, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/76sGm.jpg?s=128&g=1", "display_name": "Turner Houghton", "link": "https://stackoverflow.com/users/2419560/turner-houghton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1605831682, "creation_date": 1556748340, "question_id": 55943272, "link": "https://stackoverflow.com/questions/55943272/how-to-tell-typescript-compiler-that-this-module-is-defined-here", "title": "How to tell TypeScript compiler that this module is defined here?", "body": "<p>I have this local TypeScript file, that when deployed, ends up in the <code>/opt</code> directory of my server. So if the file is located at <code>layers/websocketapi/DataSender.ts</code> locally, it gets deployed to <code>opt/DataSender.js</code>.\nHowever, as I am developing this project locally, it's not in my opt directory so Typescript complains that it can't find this module. However, if I change it to reference the local version, then my deployments break since it's no longer referencing the <code>/opt</code> directory where it is actually located on the server.</p>\n\n<p>If I use a <code>// @ts-ignore</code> comment, the error goes away, but then I don't get the type support and it assumes a type of <code>any</code>.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import { APIGatewayEvent } from 'aws-lambda';\n// @ts-ignore\nimport DataSender from '/opt/DataSender';\n\nexport async function handler(event: APIGatewayEvent) {\n  const dataSender = new DataSender();\n  await dataSender.sendData(event.requestContext.connectionId!, { message: 'hi!' })\n  return {\n    statusCode: 200,\n    body: 'Game created'\n  }\n}\n</code></pre>\n\n<p>How can I tell the Typescript compiler that this file I'm importing from the opt directory is actually located at <code>layers/websocketapi/DataSender.js</code>, but don't change the import statement?</p>\n"}, {"tags": ["typescript", "methods", "return"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556747474, "post_id": 55942985, "comment_id": 98539472, "body": "If it&#39;s not called, it means that <code>this.possuiPermissao({role: permissoes.ACESSO_TODOS_PROCESSOS})</code> is truthy, and the rest of the condition doesn&#39;t need to be evaluated, since <code>true || whatever</code> will always be true."}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556749205, "post_id": 55942985, "comment_id": 98539962, "body": "See MDN: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Short-circuit_evaluation\" rel=\"nofollow noreferrer\">Logical Operators / Short-circuit evaluation Section</a>."}], "owner": {"reputation": 1, "user_id": 10093989, "user_type": "registered", "profile_image": "https://graph.facebook.com/1129742080542328/picture?type=large", "display_name": "Amanda Pesarini", "link": "https://stackoverflow.com/users/10093989/amanda-pesarini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556746420, "creation_date": 1556746420, "question_id": 55942985, "link": "https://stackoverflow.com/questions/55942985/method-with-parameter-doesnt-work-in-return", "title": "Method with parameter doesn&#39;t work in return", "body": "<p>I'm verifying some conditions to return a boolean result, but I see that the method \"usuarioRelacionado\" is not being called.\nIf I don't put a parameter in it, it works. </p>\n\n<pre><code>private possuiPermissaoVisualizarProcesso(processo: ProcessoPorNumeroEOrgaoConsultaResultadoWs): boolean {\n    return this.possuiPermissao({role: permissoes.ACESSO_TODOS_PROCESSOS}) || (this.usuarioRelacionado(processo) &amp;&amp; this.possuiPermissao({role: permissoes.PROCESSO_VISUALIZAR}));\n  }\n\n  private usuarioRelacionado(processo: ProcessoPorNumeroEOrgaoConsultaResultadoWs): boolean {\n    const codigoUsuario = PermissaoService.getUsuarioLogado().codigoUsuario;\n    return (processo.responsaveis\n      &amp;&amp; processo.responsaveis.some((responsavel: ResponsavelEntidadeWs) =&gt; responsavel.codigoUsuario === codigoUsuario))\n      || (processo.gruposUsuarios\n        &amp;&amp; processo.gruposUsuarios.some((grupo: GrupoUsuarioWs) =&gt;\n          grupo.responsaveis\n          &amp;&amp; grupo.responsaveis.some((responsavel: ResponsavelEntidadeWs) =&gt; responsavel.codigoUsuario === codigoUsuario)\n        ));\n  }\n\n</code></pre>\n"}, {"tags": ["node.js", "angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11438971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uRjmI3V7czw/AAAAAAAAAAI/AAAAAAAAAAc/2Vli4YJKW_Q/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/11438971/brian"}, "edited": false, "score": 0, "creation_date": 1556746750, "post_id": 55942879, "comment_id": 98539288, "body": "BOOM! Thank you this is exactly what I was looking for"}], "tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": true, "score": 1, "last_activity_date": 1556745823, "creation_date": 1556745823, "answer_id": 55942879, "question_id": 55942817, "link": "https://stackoverflow.com/questions/55942817/how-to-pass-object-to-child-component-via-inputs-but-never-update-input-when-i/55942879#55942879", "title": "How to pass object to child component via Inputs() but never update input when it changes in parent", "body": "<p>You need to have two properties that you use. One that you modify and a second that is passed to the child component but is a clone of the original.</p>\n\n<pre><code> @Component({..})\n export class MyComponent implements OnInit {\n     // the original object value\n     public value: any;\n     // a value used by child components\n     public forChild: any;\n\n     public OnInit() {\n         // use deconstruction to make a copy\n         this.forChild = {...this.value};\n         // use assign to make a copy\n         this.forChild = Object.assign({}, this.value);\n         // use JSON to make a deep copy\n         this.forChild = JSON.parse(JSON.stringify(this.value));\n     }\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 8041124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6147283bdbada26f617653de7cfaa44?s=128&d=identicon&r=PG&f=1", "display_name": "Max Hesari", "link": "https://stackoverflow.com/users/8041124/max-hesari"}, "is_accepted": false, "score": 0, "last_activity_date": 1556747267, "creation_date": 1556747267, "answer_id": 55943109, "question_id": 55942817, "link": "https://stackoverflow.com/questions/55942817/how-to-pass-object-to-child-component-via-inputs-but-never-update-input-when-i/55943109#55943109", "title": "How to pass object to child component via Inputs() but never update input when it changes in parent", "body": "<p>As you mentioned: \nWhen we pass objects using @Input(), it would be passed as a reference,\nand  When we pass primitive types, it would be passed as a value.</p>\n\n<p>So i think one solution is to convert your object to string, and then pass it using @Input(). Later you can decode this stringifyed object to a object if you need.  </p>\n"}], "owner": {"reputation": 25, "user_id": 11438971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uRjmI3V7czw/AAAAAAAAAAI/AAAAAAAAAAc/2Vli4YJKW_Q/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/11438971/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 55942879, "answer_count": 2, "score": 0, "last_activity_date": 1556747267, "creation_date": 1556745487, "question_id": 55942817, "link": "https://stackoverflow.com/questions/55942817/how-to-pass-object-to-child-component-via-inputs-but-never-update-input-when-i", "title": "How to pass object to child component via Inputs() but never update input when it changes in parent", "body": "<p>I'm passing an object from a parent component to a child component via Inputs(). I know because I'm passing an object and not a primitive type it's passing a reference to the object. Thus when the object changes in the parent I see it being reflected in the child. </p>\n\n<p>What is the optimal way to pass an object via Inputs() that does NOT update the child component when it changes in the parent?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 799, "user_id": 5151703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1000466316640697/picture?type=large", "display_name": "crystalthinker", "link": "https://stackoverflow.com/users/5151703/crystalthinker"}, "edited": false, "score": 0, "creation_date": 1556744328, "post_id": 55942586, "comment_id": 98538450, "body": "push this.x[i].push(class1) or this.x[i].push({value:class1.value}) then"}, {"owner": {"reputation": 77, "user_id": 9402716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jeremiah Mora", "link": "https://stackoverflow.com/users/9402716/jeremiah-mora"}, "reply_to_user": {"reputation": 799, "user_id": 5151703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1000466316640697/picture?type=large", "display_name": "crystalthinker", "link": "https://stackoverflow.com/users/5151703/crystalthinker"}, "edited": false, "score": 0, "creation_date": 1556793182, "post_id": 55942586, "comment_id": 98553255, "body": "I get the error this.x[i].push is not a function."}], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 5151703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1000466316640697/picture?type=large", "display_name": "crystalthinker", "link": "https://stackoverflow.com/users/5151703/crystalthinker"}, "is_accepted": true, "score": 1, "last_activity_date": 1556745400, "last_edit_date": 1556745400, "creation_date": 1556744921, "answer_id": 55942733, "question_id": 55942586, "link": "https://stackoverflow.com/questions/55942586/pushing-new-field-into-nested-array/55942733#55942733", "title": "Pushing new field into nested array", "body": "<p>It should be <code>x[i]</code> instead of <code>x.push</code>. You  Do need to add <code>class1</code> or <code>{value:5}</code> to an object of an array like <code>[{a:1, value:5}, {b:1, value:5}]</code>. Use spread operator as below for that. \nAlso you can assign <code>class1.value = 5</code> outside of the loop . as its the same.</p>\n\n<pre><code>let class1 = new Class1();\n\nx: any[] = [];\nclass1.value = 5;\nfor (var i = 0; i &lt; result[\"nestedArray\"].length; i++) {                  \n    this.x[i] = {...result[\"nestedArray\"][i], ...class1};\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9402716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jeremiah Mora", "link": "https://stackoverflow.com/users/9402716/jeremiah-mora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 55942733, "answer_count": 1, "score": 0, "last_activity_date": 1556745400, "creation_date": 1556743979, "last_edit_date": 1556744539, "question_id": 55942586, "link": "https://stackoverflow.com/questions/55942586/pushing-new-field-into-nested-array", "title": "Pushing new field into nested array", "body": "<p>Im trying to push a new value into each array field. Any help would be appreciated?</p>\n\n<pre><code>export class class1 {\n    value: number;\n}\n\nlet class1 = new class1();\n\nx: any[] = [];\n\nfor (var i = 0; i &lt; result[nestedArray].length; i++) {                  \n    this.x[i] = result[\"nestedArray\"][i];\n    class1.value = 5;\n    this.x.push(class1.value)                   \n}\n</code></pre>\n\n<p>I get <code>[{...}, {...}, {...}, 5]</code></p>\n\n<p>Im trying to add the <code>value</code> field from <code>class1</code> one into each nested array. But it seems to add just the 5 instead at the very end of the array.</p>\n"}, {"tags": ["javascript", "html", "asp.net-mvc", "angular", "typescript"], "comments": [{"owner": {"reputation": 1313, "user_id": 8167494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE1Ek.jpg?s=128&g=1", "display_name": "Isaac Vidrine", "link": "https://stackoverflow.com/users/8167494/isaac-vidrine"}, "edited": false, "score": 3, "creation_date": 1556743295, "post_id": 55942447, "comment_id": 98538128, "body": "<code>this.comments.push(myNewComment)</code> or <code>this.records.push(myNewComment)</code>... wala"}, {"owner": {"reputation": 1, "user_id": 836018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JwOcN.png?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/836018/jack"}, "reply_to_user": {"reputation": 1313, "user_id": 8167494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE1Ek.jpg?s=128&g=1", "display_name": "Isaac Vidrine", "link": "https://stackoverflow.com/users/8167494/isaac-vidrine"}, "edited": false, "score": 0, "creation_date": 1556746452, "post_id": 55942447, "comment_id": 98539207, "body": "@IsaacVidrine Thanks a lot, it seems to be OK but I just need some modification out of the scope. Regards..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 836018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JwOcN.png?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/836018/jack"}, "edited": false, "score": 0, "creation_date": 1556746513, "post_id": 55942677, "comment_id": 98539228, "body": "Thanks a lot, but <b>push</b> method seems to be easier to apply. Voted up ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4851087"}, "reply_to_user": {"reputation": 1, "user_id": 836018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JwOcN.png?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/836018/jack"}, "edited": false, "score": 0, "creation_date": 1556769114, "post_id": 55942677, "comment_id": 98543535, "body": "@Willys I wouldnt recommend using push method. Using spread operator is safe than push and basically you create new array of comment without modify the old one"}, {"owner": {"reputation": 1313, "user_id": 8167494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tE1Ek.jpg?s=128&g=1", "display_name": "Isaac Vidrine", "link": "https://stackoverflow.com/users/8167494/isaac-vidrine"}, "edited": false, "score": 0, "creation_date": 1556812478, "post_id": 55942677, "comment_id": 98564065, "body": "@Ng&#244;H&#249;ngPh&#250;c this could easily be done with <code>unshift</code> as well, you don&#39;t need spread operator"}], "tags": [], "owner": {"reputation": 361, "user_id": 6645088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f855d95699eb62c7dbaa9cef312d4c53?s=128&d=identicon&r=PG&f=1", "display_name": "Eiman", "link": "https://stackoverflow.com/users/6645088/eiman"}, "is_accepted": false, "score": 1, "last_activity_date": 1556744544, "creation_date": 1556744544, "answer_id": 55942677, "question_id": 55942447, "link": "https://stackoverflow.com/questions/55942447/append-html-after-adding-record-in-angular/55942677#55942677", "title": "Append HTML after adding record in Angular", "body": "<p>You can use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" rel=\"nofollow noreferrer\">Spread operator </a> to do that. Suppose you have defined the <code>newComment</code> object. To update the list in the view, just:</p>\n\n<pre><code>this.comments = [newComment, ...this.comments];\n</code></pre>\n\n<p>It will insert the <code>newComment</code> object at the first place of the list.</p>\n"}], "owner": {"reputation": 1, "user_id": 836018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JwOcN.png?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/836018/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556745192, "creation_date": 1556743129, "last_edit_date": 1556745192, "question_id": 55942447, "link": "https://stackoverflow.com/questions/55942447/append-html-after-adding-record-in-angular", "title": "Append HTML after adding record in Angular", "body": "<p>I have an Angular (v7) project and there is a comment list on a component as shown below. I list comments in an *ngFor loop and add new ones to the list. However I reload the list after adding a new comment and I think there is a better way i.e. appending the newly added comment by combining it with HTML that I have used with JavaScript before. But unfortunately I have not managed to define it (maybe due to the loop). Is it possible in Angular? </p>\n\n<p><strong><em>#comment-list.html:</em></strong></p>\n\n<pre><code>&lt;div *ngFor=\"let comment of comments\"&gt;\n    &lt;div class=\"p-col\"&gt; {{ comment.UserName }} &lt;/div&gt;\n    &lt;div class=\"p-col-12\" [innerHTML]=\"comment.Body\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I call the method below after adding a new comment:</p>\n\n<p><strong><em>#comment-list.ts:</em></strong></p>\n\n<pre><code>listComments() {\n    this.loading = true;\n    service.listComments(this)\n        .subscribe(data =&gt; {\n            this.records = data.Data;\n            this.loading = false;\n        });\n}\n</code></pre>\n\n<p>I think I should re-create an HTML list using newly added comment's data and append it to the list but how? </p>\n"}, {"tags": ["reactjs", "typescript", "typescript3.0"], "comments": [{"owner": {"reputation": 56921, "user_id": 194940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/A0xby.png?s=128&g=1", "display_name": "Matt Greer", "link": "https://stackoverflow.com/users/194940/matt-greer"}, "edited": false, "score": 0, "creation_date": 1556742942, "post_id": 55942402, "comment_id": 98537981, "body": "I am getting errors compiling with ts 3.2+ in react-apollo, which I believe are the same issue. It seems like quite a bad change, so I am surprised to not find too many people hitting this."}], "answers": [{"comments": [{"owner": {"reputation": 56921, "user_id": 194940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/A0xby.png?s=128&g=1", "display_name": "Matt Greer", "link": "https://stackoverflow.com/users/194940/matt-greer"}, "edited": false, "score": 1, "creation_date": 1556744691, "post_id": 55942546, "comment_id": 98538571, "body": "That does make sense, seems TS 3.2 basically fixed a bug here. Thanks!"}], "tags": [], "owner": {"reputation": 158222, "user_id": 871050, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/A9cyT.png?s=128&g=1", "display_name": "Madara&#39;s Ghost", "link": "https://stackoverflow.com/users/871050/madaras-ghost"}, "is_accepted": true, "score": 1, "last_activity_date": 1556743777, "creation_date": 1556743777, "answer_id": 55942546, "question_id": 55942402, "link": "https://stackoverflow.com/questions/55942402/when-using-generic-react-components-get-error-in-ts-3-2/55942546#55942546", "title": "When using generic React components, get error in TS 3.2+", "body": "<p>TypeScript is correct. Consider the following:</p>\n\n<pre><code>foo&lt;{error: string, whatever: number}&gt;(obj =&gt; `${obj.error} (${obj.whatever})`);\n</code></pre>\n\n<p>This is valid under the constraints of your generic, as <code>{error: string, whatever: number}</code> extends <code>{error: string}</code>.</p>\n\n<p>But you are calling it with only the <code>error</code> key. It is almost guaranteed to be invalid.</p>\n"}], "owner": {"reputation": 56921, "user_id": 194940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/A0xby.png?s=128&g=1", "display_name": "Matt Greer", "link": "https://stackoverflow.com/users/194940/matt-greer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55942546, "answer_count": 1, "score": 1, "last_activity_date": 1556743777, "creation_date": 1556742854, "question_id": 55942402, "link": "https://stackoverflow.com/questions/55942402/when-using-generic-react-components-get-error-in-ts-3-2", "title": "When using generic React components, get error in TS 3.2+", "body": "<p>This code compiles just fine with TypeScript 3.1.x</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React from 'react';\n\ninterface IErrorProps {\n    error: string;\n}\n\nexport default function foo&lt;TErrorProps extends IErrorProps&gt;(\n    ErrorCmp: React.ComponentType&lt;TErrorProps&gt;\n) {\n    return () =&gt; {\n        return &lt;ErrorCmp error=\"test error\" /&gt;;\n    }\n}\n</code></pre>\n\n<p>But if I compile it with TypeScript 3.2 or newer, I get</p>\n\n<pre><code> error TS2322: Type '{ error: string; }' is not assignable to type 'TErrorProps'.\n</code></pre>\n\n<p>Is this a regression in TS 3.2 or did 3.2 fix a loophole my code was taking advantage of?</p>\n\n<p>Interestingly, this code fails to compile in 3.1 as well</p>\n\n<pre><code>interface IErrorProps {\n    error: string;\n}\n\nexport default function foo&lt;TErrorProps extends IErrorProps&gt;(\n    ErrorCmp: (props: TErrorProps) =&gt; string\n) {\n    return () =&gt; {\n        return ErrorCmp({ error: 'test error' });\n    }\n}\n</code></pre>\n\n<p>with the error</p>\n\n<pre><code>Argument of type '{ error: string; }' is not assignable to parameter of type 'TErrorProps'\n</code></pre>\n"}, {"tags": ["typescript", "loops", "dialogflow-es", "array-push"], "comments": [{"owner": {"reputation": 632, "user_id": 7447765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3DisC.jpg?s=128&g=1", "display_name": "Muizz Mahdy", "link": "https://stackoverflow.com/users/7447765/muizz-mahdy"}, "edited": false, "score": 0, "creation_date": 1556743042, "post_id": 55942220, "comment_id": 98538021, "body": "Are you pushing a &#39;payload&#39; object in the &#39;messages&#39; array for each time the audio needs to be replayed?"}, {"owner": {"reputation": 2361, "user_id": 10736243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iYzRZ.jpg?s=128&g=1", "display_name": "Zobia Kanwal", "link": "https://stackoverflow.com/users/10736243/zobia-kanwal"}, "reply_to_user": {"reputation": 632, "user_id": 7447765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3DisC.jpg?s=128&g=1", "display_name": "Muizz Mahdy", "link": "https://stackoverflow.com/users/7447765/muizz-mahdy"}, "edited": false, "score": 0, "creation_date": 1556746901, "post_id": 55942220, "comment_id": 98539322, "body": "I&#39;m pushing the object containing &quot;url&quot;, &quot;title&quot; and &quot;type&quot; into &#39;messages&#39; array. It should be pushed the no. of times I specify using &#39;times&#39; variable"}], "answers": [{"tags": [], "owner": {"reputation": 632, "user_id": 7447765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3DisC.jpg?s=128&g=1", "display_name": "Muizz Mahdy", "link": "https://stackoverflow.com/users/7447765/muizz-mahdy"}, "is_accepted": true, "score": 1, "last_activity_date": 1556751665, "last_edit_date": 1556751665, "creation_date": 1556751273, "answer_id": 55943696, "question_id": 55942220, "link": "https://stackoverflow.com/questions/55942220/how-to-store-same-data-in-array-multiple-times/55943696#55943696", "title": "How to store same data in array multiple times?", "body": "<p>The variable <code>ayahs</code> is an array that contains two objects, and only the first object contains the audio url (try to open <a href=\"http://api.alquran.cloud/v1/ayah/2:286/editions/ar.alafasy,en.asad\" rel=\"nofollow noreferrer\">http://api.alquran.cloud/v1/ayah/2:286/editions/ar.alafasy,en.asad</a> in the browser to check a response). You are currently looping through both of these objects, and attaching the audio url of both objects to the url property of the array objects, the reason why it only worked once is because the audio url exists on the first object only.You need to eliminate the first <code>forEach</code> loop and access the audio through the first element of <code>ayahs</code> array.</p>\n\n<pre><code>static readAyahOfSurahMultipleTimes = async (agent: any) =&gt; {\n\n     const params = agent.parameters\n\n     let surahApi: any = await http.get(`http://api.alquran.cloud/v1/ayah/${params.surahName}:${params.ayahNumber}/editions/ar.alafasy,en.asad`);\n\n     var ayahs: any = surahApi[\"data\"];  \n\n\n     let payload = {\n        \"web\": {     \n            \"messages\": []\n        }\n     }\n\n     try {\n        let ayah: any = ayahs[0];\n        let audio:string = ayah.audio;\n\n        for(var i=0; i&lt;params.times; i++){\n           payload.web.messages.push({                              \n              \"url\": audio,\n              \"title\": surahApi[\"data\"][0][\"text\"],\n              \"type\": \"audio\",\n           }) \n        }          \n\n        raw.response.send({\n           \"fulfillmentText\": `Ayah number ${params.ayahNumber} of surah number ${params.surahName} is being played`,   \n           \"payload\": payload\n        })\n\n        return;\n     } \n     catch (e) {\n       raw.response.send({\n          \"fulfillmentText\": `response from catch`\n        })\n     }\n  }\n</code></pre>\n\n<p>Now I think that what you're doing by replicating the data on the message array is pointless, you could simply add a property for the number of times the audio needs to be repeated in the payload object, and then configure it on the client to be repeated multiple times using this variable.</p>\n\n<pre><code>payload.web.messages.push({                              \n   \"url\": audio,\n   \"title\": surahApi[\"data\"][0][\"text\"],\n   \"repititionTimes\": params.times\n   \"type\": \"audio\"\n})\n</code></pre>\n\n<p>This way you won't have to use a loop and you won't send unnecessary payload.</p>\n"}], "owner": {"reputation": 2361, "user_id": 10736243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iYzRZ.jpg?s=128&g=1", "display_name": "Zobia Kanwal", "link": "https://stackoverflow.com/users/10736243/zobia-kanwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 55943696, "answer_count": 1, "score": 0, "last_activity_date": 1556751665, "creation_date": 1556741920, "last_edit_date": 1592644375, "question_id": 55942220, "link": "https://stackoverflow.com/questions/55942220/how-to-store-same-data-in-array-multiple-times", "title": "How to store same data in array multiple times?", "body": "<p>I am getting an audio URL and some text from <a href=\"http://api.alquran.cloud/v1/ayah/2:1/editions/ar.alafasy,en.asad\" rel=\"nofollow noreferrer\">this</a> api. Till now I am able to get this response on dialogflow using webhook.</p>\n<p>Now I need to get the same data multiple times. For example till now if I ask to <strong>play the audio</strong> it <strong>provides url 1 time</strong>. Now I want it to <strong>return the URL multiple times</strong> such as when I ask it to play the audio 2 times or 100 times it should give the url accordingly.</p>\n<p>The URLs must be stored in an array in the same way I am doing it.</p>\n<p>I'm pushing the object containing &quot;url&quot;, &quot;title&quot; and &quot;type&quot; into an array named 'messages'. It should be pushed the particular no. of times I specify using 'times' variable.</p>\n<p>This is what I have tried yet. Please check the loop if it is placed the right way? This function is fine without loop and returns data once. Let me know if any other detail is required.</p>\n<p><strong>Code</strong></p>\n<pre><code>static readAyahOfSurahMultipleTimes = async (agent: any) =&gt; {\n      \n\n           const params = agent.parameters\n           console.log(&quot;params: &quot;, params)\n  \n           let surahApi: any = await http.get(`http://api.alquran.cloud/v1/ayah/${params.surahName}:${params.ayahNumber}/editions/ar.alafasy,en.asad`);\n           \n           var ayahs: any = surahApi[&quot;data&quot;];  \n           console.log(&quot;ayahs&quot;, ayahs);\n      \n           let payload = {\n               &quot;web&quot;: {     \n                   &quot;messages&quot;: []\n               }\n           }\n           try {\n               ayahs.forEach(function (item) {\n                   for(var i=0;i&lt;params.times;i++){\n                   payload.web.messages.push({                              \n                       &quot;url&quot;: item.audio,\n                      // &quot;title&quot;: item.text,\n                      &quot;title&quot;: surahApi[&quot;data&quot;][0][&quot;text&quot;],\n                       &quot;type&quot;: &quot;audio&quot;,\n                   }) \n                }\n               });\n               console.log(&quot;payload&quot;, payload);\n               console.log(&quot;payload.web.messages&quot;,payload.web.messages);\n      \n      \n               raw.response.send({\n      \n                   &quot;fulfillmentText&quot;: `Ayah number ${params.ayahNumber} of surah number ${params.surahName} is being played`,   \n                   &quot;payload&quot;: payload\n               })\n               return;\n           } catch (e) {\n               console.log(&quot;error in catch block&quot;, e);\n               raw.response.send({\n                   &quot;fulfillmentText&quot;: `response from catch`\n               })\n           }\n       }\n</code></pre>\n<p><strong>FULFILLMENT RESPONSE</strong>\n<a href=\"https://i.stack.imgur.com/dh0KN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dh0KN.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["angular", "typescript", "angular-material", "angular-material2"], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 8061731, "user_type": "registered", "profile_image": "https://graph.facebook.com/1980186498881052/picture?type=large", "display_name": "Valentin Garcia", "link": "https://stackoverflow.com/users/8061731/valentin-garcia"}, "edited": false, "score": 0, "creation_date": 1556840087, "post_id": 55943238, "comment_id": 98574403, "body": "Thank you! it&#39;s exactly what I needed"}, {"owner": {"reputation": 109, "user_id": 2318353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YY5ZL.jpg?s=128&g=1", "display_name": "Morilla Thaisa", "link": "https://stackoverflow.com/users/2318353/morilla-thaisa"}, "edited": false, "score": 1, "creation_date": 1594627442, "post_id": 55943238, "comment_id": 111180093, "body": "Do you think angular need a feature like : instead of using <code>@Optional() private dialogRef: &lt;..&gt;</code>, use <code>private dialogRef?: &lt;..&gt;</code> with the same behaviour?"}], "tags": [], "owner": {"reputation": 361, "user_id": 6645088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f855d95699eb62c7dbaa9cef312d4c53?s=128&d=identicon&r=PG&f=1", "display_name": "Eiman", "link": "https://stackoverflow.com/users/6645088/eiman"}, "is_accepted": true, "score": 6, "last_activity_date": 1556748123, "creation_date": 1556748123, "answer_id": 55943238, "question_id": 55942202, "link": "https://stackoverflow.com/questions/55942202/use-component-without-matdialog-matdialogrefsomecomponent/55943238#55943238", "title": "use component without MatDialog, MatDialogRef&lt;SomeComponent&gt;", "body": "<p>Use the <code>@Optional()</code> decorator when injecting the MatDialogRef in constructor (<a href=\"https://angular.io/api/core/Optional\" rel=\"noreferrer\">Reference</a>):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>constructor(\n    ...\n    @Optional() private dialogRef: MatDialogRef&lt;NoteFormComponent&gt;,\n    ...\n) { ... }\n</code></pre>\n\n<p>By doing this, you can consume the <code>NoteFormComponent</code> in the normal way, without using MatDialog.</p>\n"}], "owner": {"reputation": 417, "user_id": 8061731, "user_type": "registered", "profile_image": "https://graph.facebook.com/1980186498881052/picture?type=large", "display_name": "Valentin Garcia", "link": "https://stackoverflow.com/users/8061731/valentin-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 55943238, "answer_count": 1, "score": 2, "last_activity_date": 1556748123, "creation_date": 1556741828, "question_id": 55942202, "link": "https://stackoverflow.com/questions/55942202/use-component-without-matdialog-matdialogrefsomecomponent", "title": "use component without MatDialog, MatDialogRef&lt;SomeComponent&gt;", "body": "<p>I have a function that opens a MatDialog with a component called 'NoteFormComponent' it looks like this</p>\n\n<pre><code>  openForm() {\n    let dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = \"95%\";\n    dialogConfig.panelClass = \"form-dialog\";\n    dialogConfig.scrollStrategy = new NoopScrollStrategy();\n\n    this.dialog.open(NoteFormComponent, dialogConfig).beforeClose().subscribe(() =&gt; this.getNotes());\n  }\n</code></pre>\n\n<p>I pops up a modal containing the 'NoteFormComponent'.\n<strong>So WHAT is the problem?</strong></p>\n\n<p>The problem is that I want to <strong>use 'NoteFormComponent' without a MatDialog</strong>, but in order to use it with the MatDialog I had to inject a reference in the component's constructor like this</p>\n\n<pre><code>  constructor(\n    private noteService : NoteService, \n    private productService : ProductService,\n    private categoryService : CategoryService,\n    private clientService : ClientService,\n    private notification : NotificationService,\n    private dialogRef : MatDialogRef&lt;NoteFormComponent&gt;, /*This Reference*/\n    private loader : LoaderService,\n    private sessionService : SessionService,\n    private securityBlockerService : SecurityBlockerService,\n    private dialog : MatDialog,\n    private dialogService : DialogService\n  ) { }\n</code></pre>\n\n<p>And if I try to use the component with the template selector '' it throws an error that <strong>there is no provider for MatDialogRef</strong>, the only thing that comes to my mind is create a copy of the 'NoteFormComponent' but without the MatDialogRef injector in the constructor.</p>\n\n<p>Is there anyway to solve or work around this problem?</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 11959, "user_id": 850749, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/gZ0iu.jpg?s=128&g=1", "display_name": "Yatrix", "link": "https://stackoverflow.com/users/850749/yatrix"}, "edited": false, "score": 7, "creation_date": 1575378243, "post_id": 55942106, "comment_id": 104539616, "body": "&quot;TypeScript trusted you and you betrayed it&quot; -- why do I feel so guilty? :D"}, {"owner": {"reputation": 158222, "user_id": 871050, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/A9cyT.png?s=128&g=1", "display_name": "Madara&#39;s Ghost", "link": "https://stackoverflow.com/users/871050/madaras-ghost"}, "reply_to_user": {"reputation": 11959, "user_id": 850749, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/gZ0iu.jpg?s=128&g=1", "display_name": "Yatrix", "link": "https://stackoverflow.com/users/850749/yatrix"}, "edited": false, "score": 1, "creation_date": 1575380956, "post_id": 55942106, "comment_id": 104541340, "body": "@Yatrix Because you probably are. <a href=\"https://imgur.com/r/HighQualityGifs/60AGXrZ\" rel=\"nofollow noreferrer\">\u0ca0_\u0ca0</a>"}], "tags": [], "owner": {"reputation": 158222, "user_id": 871050, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/A9cyT.png?s=128&g=1", "display_name": "Madara&#39;s Ghost", "link": "https://stackoverflow.com/users/871050/madaras-ghost"}, "is_accepted": true, "score": 9, "last_activity_date": 1556742475, "last_edit_date": 1556742475, "creation_date": 1556741367, "answer_id": 55942106, "question_id": 55941975, "link": "https://stackoverflow.com/questions/55941975/callable-typescript-interface-is-not-callable/55942106#55942106", "title": "Callable typescript interface is not callable?", "body": "<p>The reason this happens is because only Proxies around functions may be called (and set the <code>apply</code> trap). Your cast of <code>{} as TSOSCType&lt;R, V&gt;</code> masks the fact that what you're doing is impossible in runtime, and instructs TypeScript to trust you (wrongly).</p>\n\n<p>Changing that statement to <code>function(){} as unknown as TSOSCType&lt;R, V&gt;</code> makes it work as expected.</p>\n\n<p><a href=\"https://typescript-play.js.org/#code/PTAEFpM0BUE8AOBTAzhK4BQJQHEkB2SATgJYDGoALokqAEQBK9EAfLABZ3FJUCuxIgBNQxAPZiqoMQCMAVknJSayUAHcuBUCl5VSBAOagAhqABuxgDZ8k2MPiJlKKuvRgtw7GF2q1QAMzFiah8EcQAPOGl5RSpMfSoSf2NyOhgAZQB5dIBhABFjKmN03RIAHkYAGlh2AG9MUFAACgtrJAAuUEYkYyExAks4MphWAEpO7t7+wYrWAG5MAF9MTBdYLNzMmKUAdWJjBGRiCuqR0ABeUFrQAG0AaVB9UABrJDgxf1gAXXAAfk6MtkcvBkCdYPcvuxFgt4gREsRkql1kCAILEfZwPYHI5gs71RqWQgGKgcAEbYG0MEEPgAWxkJHmK0a9061LpJC+ZKBIKQuMZy1h8MRaXJKIIQ0Y7CQ4USBCEaEBuQKRRKVHhYOM4rqDVud06KCoZEMnORuTFEvmoBwAFECMYZITQEIkEgENR9mYSCgrNJPsZiDJSIb-VEwmIECglis1or8oVjFjDuUqjULjqAAygaWy+XNACMoAAZLBRlawABJBUmcW-ZocNUR9ogA0pZ5iT0IyxiNQAOnIYhpwAAjjYDaR+ihgAAWACcM4ATAB2ACs84AzMAhKRvZYu2pwOQrJZwGogxxwJq4NO5-OABxrgBs6YAxLOF-en6MdY1a7HzbNv1AAEsxlQhc0vG4vjLUBK1gEx0WMOBwEsUhXl+QDf1FBDMX2JNjhTGAbjZeliEhQDgOzMC0FkBQlGg2CYGiWiqGQ1CkHQxpONATCgS2ZjExxAjWEAxouSVeNVXVISYRjckeT5C5TTjFVSnw052GLWNlQTXDBPUmEcAwcBQAACSQSwjgCPgCCUccCDQIzMH8azbP6bRVLKB5KLlNBXneT4ADVqgC1gmiCUgDH0KxOiaUtznYJpJj6AYhhC0AAB9QGs51-H0JAhFGao-M6O5qlaGwJh6ZKZgCiExkqqYUrKNL8Wg9IOCPbtQH7BBSFQEJt1ASxEJIdQzxCOgUAQFDUhEJ5ysm5ByFIXL8p7UAdiCZ40FPElQBkSQOCdCg9H6f0+rQTURBQg0UB7HUeH4QRQD42Ie2MFAUAiggmhcD4XjeC5zkuegDSNAwWFrWpFiA24vmqcLIrtSxYuqa4bj8k0FtARZRgWAVnJs06tAMDyvNAnyAf80Agpp0KaNiBrqtS9hMuypBcuEIq3hK8Yuiq6ZUrqjKsrlDm8pEVqcBRT7tyoNAnnDYmjyifxeHIDh9CMPo1C0Ux+zhfQ+DEPg0B4cgBC+z1uo6xXPn0Z1wgvB06AZpQ0CaLdXLtMh+uLG75a-RpHoELQ3akYHLnZzn8u4pjYlh8OMbeL58ZWQyMBguESGR0RFEt0hraVuyfR0KQNeMJ5Ce99AoCclzidAAB9MQUHIMFyZzXy3n+2mQqacRJCZwXZhF6OJeqUmqCbiv9BiuKEqSke0rZsWY4K6oy5n22CBisxh6akKF-5xqZklPnY3klMWp1HAAANB6oO-HjQBAPp0Oa9cuvXiAMWlCCkFdUARAOxZQ-utbwg1BpyFNsoMQoAaSVzhEgiavheqGACEEUAsx7qNHvlPbeSDn6DX1hOQ0fAlCx3NgXa21dG4kkKGNXcecnpaA0IwkkdBsb-RJINcOL8TDKE1mgAgYhnS4OgnfLes8CDEMut1MhxAKGJBENQ4gVs6B0LsiERhp5mHvzlo8LQMg+CkEsFuDBQCpozS1kY1BU1FArT6iIBa90Hq8FDsApAahQAAAUIhwCaIBLR-RYpXBhh9UWzxRG6xMAqOSlJr6sGqDgAAQsNAgzx45KHWuWJ0-QADkUhTZ0DvkUX+vA74SMaK1LiU9OghK0L9f0U9uZwF5mJCkoJr7C1qVxBR9kpBEDUE3AhMjFKxRikvQ+wtV45QlsfKe8ImhjJ3qjKmeMRKcQNgaLxIzpE7wmfvE+zNmp1T5tMs+7B4ruWnjIpoZdlmrKQW0sqoxNn9M4iHZ6Lc24DwkFQaowzRm8EIfoIF3im4HKQR8-pixKhbOxIMBpDdtHNIqYCgaKA0QGGqC0lAnQbiXJZl8C5AsmqSiuFs4OHjnrQv0E0fFNx0ykoWJ85YXEOWgE2QKDOUBQDWnCAgVusdi5nUsLcm2KDGm10gA0GVrd24pk7lRKm-1JT-KHickelK5ni2EBfBJ3TqiUtajsqQ9KtCXBaFYCq2qKX1XtVci47AFpspYZ4355BNWYrCTcx+m9QUyJ5SsTA5qQLGBpNNOglxrjGE6NcGQCburJqEJ0ZcONM0w2hGGsh0g+AR2kH86Ukbo2jHej2GQfYexCCaA+TZub7JiEJD2LsBgwoFobaG7tPbe19v7aGoAA\" rel=\"noreferrer\"><strong>See this in the Playground</strong></a>.</p>\n\n<p>As a general rule of thumb, whenever you get a runtime TypeError when using TypeScript, it means that TypeScript trusted you and you betrayed it. That almost always means a cast. When you get such errors, your casts should be the immediate suspects.</p>\n"}], "owner": {"reputation": 2074, "user_id": 1279231, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbfc951121f17d11ad96275a87fe5df1?s=128&d=identicon&r=PG", "display_name": "jakebird451", "link": "https://stackoverflow.com/users/1279231/jakebird451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17759, "favorite_count": 1, "accepted_answer_id": 55942106, "answer_count": 1, "score": 7, "last_activity_date": 1556742475, "creation_date": 1556740701, "question_id": 55941975, "link": "https://stackoverflow.com/questions/55941975/callable-typescript-interface-is-not-callable", "title": "Callable typescript interface is not callable?", "body": "<p>I am trying to write a set version of <a href=\"https://www.npmjs.com/package/ts-optchain\" rel=\"noreferrer\"><code>ts-optchain</code></a>. Where the functionality would attempt to return a copy of the root object with the spliced in change. Such that the original is not changed or modified in any way. Yet, for areas of the object that have not not been modified, they copied over into the shallow copy operation as references (via <code>Object.assign(...)</code>).</p>\n\n<p>My test that I am trying to validate for is as follows:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const example = { a: { b: { c: { d: 5 } } } };\nconst out = osc(example).a.b.c.d(6);\nexpect(out).to.be.deep.eq({ a: { b: { c: { d: 6 } } } });\n</code></pre>\n\n<p>... where <code>osc</code> (optional set chain) is the function I made to mimmic <code>opt-chain</code>'s <code>oc</code> function.</p>\n\n<p>I am expecting the result be somewhat similar to <code>Object.assign({}, example, {a: Object.assign({}, example.a, {b: Object.assign({}, example.a.b, {c: Object.assign({}, example.a.b.c, {d: 6})})})});</code></p>\n\n<p>The approach above is a pain to write, read and maintain. Hence the reasoning to make this function.</p>\n\n<h1>The implementation</h1>\n\n<p>My attempt to make this is as follows:</p>\n\n<pre><code>// ----- Types -----\n// Generic type \"R\" -&gt; The returned root object type when setting a value\n// Generic type \"T\" -&gt; The type for the proxy object\ninterface TSOSCDataSetter&lt;R, T&gt; {\n  (value: Readonly&lt;T&gt;): Readonly&lt;R&gt;;\n}\n\ntype TSOSCObjectWrapper&lt;R, T&gt; = { [K in keyof T]-?: TSOSCType&lt;R, T[K]&gt; };\n\ninterface TSOSCArrayWrapper&lt;R, T&gt; {\n  length: TSOSCType&lt;R, number&gt;;\n\n  [K: number]: TSOSCType&lt;R, T&gt;;\n}\n\ninterface TSOSCAny&lt;R&gt; extends TSOSCDataSetter&lt;R, any&gt; {\n  [K: string]: TSOSCAny&lt;R&gt;; // Enable deep traversal of arbitrary props\n}\n\ntype TSOSCDataWrapper&lt;R, T&gt; =\n  0 extends (1 &amp; T) // Is T any? (https://stackoverflow.com/questions/49927523/disallow-call-with-any/49928360#49928360)\n    ? TSOSCAny&lt;R&gt;\n    : T extends any[] // Is T array-like?\n    ? TSOSCArrayWrapper&lt;R, T[number]&gt;\n    : T extends object // Is T object-like?\n      ? TSOSCObjectWrapper&lt;R, T&gt;\n      : TSOSCDataSetter&lt;R, T&gt;;\n\nexport type TSOSCType&lt;R, T&gt; = TSOSCDataSetter&lt;R, T&gt; &amp; TSOSCDataWrapper&lt;R, T&gt;;\n\n// ----- Helper functions -----\nfunction setter&lt;K extends keyof V, V&gt;(original: () =&gt; (Readonly&lt;V&gt; | undefined), key: K, value: Readonly&lt;V[K]&gt;): Readonly&lt;V&gt; {\n  // Shallow copies this layer with the spliced in value specified. Works with both dictionaries and lists.\n  return Object.assign(typeof key === \"string\" ? {} : [], original(), { [key]: value });\n}\n\nfunction getter&lt;K extends keyof V, V&gt;(object: Readonly&lt;V&gt; | undefined, key: K): Readonly&lt;V[K]&gt; | undefined {\n  // Assists in optionally fetching down a continuous recursive chain of index-able objects (dictionaries &amp; lists)\n  return object === undefined ? object : object[key];\n}\n\n// ----- Internal recursive optional set chain function -----\nfunction _osc&lt;R, K extends keyof V, V&gt;(root: Readonly&lt;R&gt; | undefined, get_chain: () =&gt; (Readonly&lt;V&gt; | undefined), set_chain: (v: Readonly&lt;V&gt;) =&gt; Readonly&lt;R&gt;): TSOSCType&lt;R, V&gt; {\n  // `root` is passed in as an argument and never used. This is just to maintain the typing for &lt;R&gt;.\n  // `get_chain` is a constructed recursive function that will return what the value of this object is at this node.\n  // `set_chain` is a constructed recursive function that will assist in building and splicing in the specified value.\n\n  return new Proxy(\n    {} as TSOSCType&lt;R, V&gt;, // Blank object. I don't use `target`.\n    {\n      get: function (target, key: K): TSOSCType&lt;R, V[K]&gt; {\n        const new_get_chain = (): (Readonly&lt;V[K]&gt; | undefined) =&gt; getter(get_chain(), key);\n        const new_set_chain = (v: Readonly&lt;V[K]&gt;): Readonly&lt;R&gt; =&gt; set_chain(setter(get_chain, key, v));\n        return _osc(root, new_get_chain, new_set_chain);\n      },\n      apply: function (target, thisArg, args: [Readonly&lt;V&gt;]): Readonly&lt;R&gt; {\n        return set_chain(args[0]);\n      }\n    }\n  );\n}\n\n// ----- Exposed optional set chain function -----\nexport function osc&lt;R, K extends keyof R&gt;(root: Readonly&lt;R&gt; | undefined): TSOSCType&lt;R, R&gt; {\n  const set_chain = (value: Readonly&lt;R&gt;): Readonly&lt;R&gt; =&gt; value;\n  return _osc(root, () =&gt; root, set_chain);\n}\n</code></pre>\n\n<h1>The problem</h1>\n\n<p>Unfortunately, I get the error: <code>osc(...).a.b.c.d is not a function</code>. This is where my confusion begins. Returning from the <code>osc</code> (and <code>_osc</code>) functions is type <code>TSOSCType</code>, which extends the interface <code>TSOSCDataSetter</code>. The interface <code>TSOSCDataSetter</code> specifies that the object inheriting the interface is, itself, callable:</p>\n\n<pre><code>interface TSOSCDataSetter&lt;R, T&gt; {\n  (value: Readonly&lt;T&gt;): Readonly&lt;R&gt;;\n}\n</code></pre>\n\n<p>Retuned from both <code>osc</code> and <code>_osc</code> is a <code>Proxy</code> for the type <code>TSOSCType</code> (much like <code>ts-optchain</code> does). This Proxy object assists in building the chain and type completing the object chain. But more importantly for this question, implements the <code>apply</code> method:</p>\n\n<pre><code>apply: function (target, thisArg, args: [Readonly&lt;V&gt;]): Readonly&lt;R&gt; {\n  return set_chain(args[0]);\n}\n</code></pre>\n\n<p>So why is the type <code>TSOSCType</code> not callable?</p>\n"}, {"tags": ["javascript", "json", "typescript"], "comments": [{"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 2, "creation_date": 1556740575, "post_id": 55941869, "comment_id": 98537125, "body": "Please show what you&#39;ve tried so far and explain what what went wrong with your current attempt (errors, unexpected results, etc.)."}, {"owner": {"reputation": 1608, "user_id": 4186830, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/XzkSz.png?s=128&g=1", "display_name": "CSharper", "link": "https://stackoverflow.com/users/4186830/csharper"}, "reply_to_user": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556741702, "post_id": 55941869, "comment_id": 98537543, "body": "@p.s.w.g, I have updated question with my attempts."}], "answers": [{"comments": [{"owner": {"reputation": 1608, "user_id": 4186830, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/XzkSz.png?s=128&g=1", "display_name": "CSharper", "link": "https://stackoverflow.com/users/4186830/csharper"}, "edited": false, "score": 0, "creation_date": 1556744094, "post_id": 55942519, "comment_id": 98538375, "body": "I am getting <code>TypeError: Object.fromEntries is not a function</code> error. Do I need to install any <code>npm</code> for this?"}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "reply_to_user": {"reputation": 1608, "user_id": 4186830, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/XzkSz.png?s=128&g=1", "display_name": "CSharper", "link": "https://stackoverflow.com/users/4186830/csharper"}, "edited": false, "score": 1, "creation_date": 1556744618, "post_id": 55942519, "comment_id": 98538545, "body": "@CSharper Hmm, it appears NodeJS doesn&#39;t support <code>Object.fromEntries</code> yet. You could use a <a href=\"https://www.npmjs.com/package/object.fromentries\" rel=\"nofollow noreferrer\">polyfill like this</a>. Otherwise, you could use a library like <a href=\"http://lodash.com/\" rel=\"nofollow noreferrer\">lodash</a>, see my updated answer."}, {"owner": {"reputation": 1608, "user_id": 4186830, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/XzkSz.png?s=128&g=1", "display_name": "CSharper", "link": "https://stackoverflow.com/users/4186830/csharper"}, "edited": false, "score": 0, "creation_date": 1556745163, "post_id": 55942519, "comment_id": 98538734, "body": "<code>lodash</code> option worked for me. I just had to install <code>https:&#47;&#47;www.npmjs.com&#47;package&#47;lodash</code> and this worked like a charm. Thank you."}], "tags": [], "owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "is_accepted": true, "score": 3, "last_activity_date": 1556744573, "last_edit_date": 1556744573, "creation_date": 1556743582, "answer_id": 55942519, "question_id": 55941869, "link": "https://stackoverflow.com/questions/55941869/how-to-transform-json-object-to-another-in-typescript/55942519#55942519", "title": "How to transform JSON object to another in TypeScript", "body": "<p>Assuming you already have the JSON parsed into an object, you can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" rel=\"nofollow noreferrer\"><code>Array.prototype.map</code></a> along with <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries\" rel=\"nofollow noreferrer\"><code>Object.fromEntries</code></a> to convert the result back to an object:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const input = {\r\n  \"elements\": [{\r\n    \"type\": \"element\",\r\n    \"name\": \"root\",\r\n    \"elements\": [{\r\n        \"type\": \"element\",\r\n        \"name\": \"Amount\",\r\n        \"elements\": [{\r\n          \"type\": \"text\",\r\n          \"text\": \"1.00\"\r\n        }]\r\n      },\r\n      {\r\n        \"type\": \"element\",\r\n        \"name\": \"Discount\",\r\n        \"elements\": [{\r\n          \"type\": \"text\",\r\n          \"text\": \"0.00\"\r\n        }]\r\n      }\r\n    ]\r\n  }]\r\n};\r\nconst output = Object.fromEntries(input\r\n  .elements.map(x =&gt; [x.name, Object.fromEntries(x\r\n    .elements.map(y =&gt; [y.name, y.elements[0].text]))]));\r\nconsole.log(output);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Alternatively, you could do this <a href=\"https://lodash.com\" rel=\"nofollow noreferrer\">lodash's</a> <code>map</code> and <code>fromPairs</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// import _ from 'lodash'; \r\n\r\nconst input = {\r\n  \"elements\": [{\r\n    \"type\": \"element\",\r\n    \"name\": \"root\",\r\n    \"elements\": [{\r\n        \"type\": \"element\",\r\n        \"name\": \"Amount\",\r\n        \"elements\": [{\r\n          \"type\": \"text\",\r\n          \"text\": \"1.00\"\r\n        }]\r\n      },\r\n      {\r\n        \"type\": \"element\",\r\n        \"name\": \"Discount\",\r\n        \"elements\": [{\r\n          \"type\": \"text\",\r\n          \"text\": \"0.00\"\r\n        }]\r\n      }\r\n    ]\r\n  }]\r\n};\r\nconst output = _.fromPairs(\r\n  _.map(input.elements, x =&gt; [x.name, _.fromPairs(\r\n    _.map(x.elements, y =&gt; [y.name, y.elements[0].text]))]));\r\nconsole.log(output);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1608, "user_id": 4186830, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/XzkSz.png?s=128&g=1", "display_name": "CSharper", "link": "https://stackoverflow.com/users/4186830/csharper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 55942519, "answer_count": 1, "score": 0, "last_activity_date": 1556744573, "creation_date": 1556740206, "last_edit_date": 1556743841, "question_id": 55941869, "link": "https://stackoverflow.com/questions/55941869/how-to-transform-json-object-to-another-in-typescript", "title": "How to transform JSON object to another in TypeScript", "body": "<p>I want to convert my <code>JSON</code> to a specific format but not sure what is the best way. I want to make a generic function which I can use commonly. I do not want some code which has hard coded value such as <code>root</code>, <code>Amount</code>, etc. </p>\n\n<p>I am using <code>typeScript</code> and <code>node</code>.</p>\n\n<p><strong>Current:</strong></p>\n\n<pre><code>{\n    \"elements\": [\n        {\n            \"type\": \"element\",\n            \"name\": \"root\",\n            \"elements\": [\n                {\n                    \"type\": \"element\",\n                    \"name\": \"Amount\",\n                    \"elements\": [\n                        {\n                            \"type\": \"text\",\n                            \"text\": \"1.00\"\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"element\",\n                    \"name\": \"Discount\",\n                    \"elements\": [\n                        {\n                            \"type\": \"text\",\n                            \"text\": \"0.00\"\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p><strong>Expected:</strong></p>\n\n<pre><code>{\n  \"root\": {\n    \"Amount\": \"1.00\",\n    \"Discount\": \"0.00\"\n  }\n}\n</code></pre>\n\n<p><strong>Attempt-1:</strong> .  This is not neat approach. So I do not like it.</p>\n\n<pre><code>var newJsonData = convertedXml2json\n  .replace(/\"elements\": /g, \"\")\n  .replace(/\"type\": \"element\",/g, \"\")\n  .replace(/\"name\":/g, \"\")\n  .replace(/\"type\": \"text\",/g, \"\")\n  .replace(/\"text\":/g, \"\")\n  .replace(\"[\", \"\")\n  .replace(\"{\", \"\");\nconsole.log(newJsonData);\n</code></pre>\n\n<p><strong>Attempt-2:</strong> This comes as <code>null</code></p>\n\n<pre><code>var len = convertedXml2json.elements,\n    newData = {updatedJson:[]},\n    i;\n\nfor ( i=0; i &lt; len; i+=1 ) {\n    newData.updatedJson.push(  [ convertedXml2json.elements[ i ].name, convertedXml2json.elements[ i ].elements[i].text] );\n}\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1556757160, "creation_date": 1556757160, "answer_id": 55944284, "question_id": 55941427, "link": "https://stackoverflow.com/questions/55941427/why-cant-this-conditional-with-generic-keyof-be-eagerly-resolved/55944284#55944284", "title": "Why can&#39;t this conditional with generic keyof be eagerly resolved?", "body": "<p>The answer to the question probably involves <a href=\"https://github.com/Microsoft/TypeScript/pull/29338\" rel=\"nofollow noreferrer\">a bug fix</a> introduced in TypeScript 3.3.  The description of the new way of evaluating conditional types is:</p>\n\n<blockquote>\n  <p>For a conditional type <code>T extends U ? X : Y</code>, the algorithm we use to determine whether to defer resolution of a conditional type is:</p>\n  \n  <ul>\n  <li>we resolve to <code>Y</code> when <code>T</code> is not assignable to <code>U</code> <em>considering all type parameters referenced in <code>T</code> and <code>U</code> related</em> (i.e. <code>T</code> is definitely not assignable to <code>U</code>),</li>\n  <li>otherwise we resolve to <code>X</code> when <code>T</code> is assignable to <code>U</code> <em>considering all type parameters referenced in <code>T</code> and <code>U</code> unrelated</em> (i.e. <code>T</code> is definitely assignable to <code>U</code>),</li>\n  <li>otherwise we defer resolution.</li>\n  </ul>\n</blockquote>\n\n<p>So it looks like <code>keyof T extends keyof T ? 1 : 0</code> is deferred, because <code>keyof T1</code> is not assignable to <code>keyof T2</code> when <code>T1</code> and <code>T2</code> are unrelated types.  This deferral isn't exactly <em>wrong</em>, but it does seem like a limitation.  </p>\n\n<p>Indeed if I <a href=\"https://typescript-play.js.org/?ts=3.2.1#code/GYVwdgxgLglg9mABAIwE5wNYFMwB4AqAfABQBuAhgDYhYBci+AlIgN4BQiiUAngA5YMsAZyiIAvImzc4wBoiwAPKDgAmQyVmmz8iAPyIAjInoAGNgF82VoA\" rel=\"nofollow noreferrer\">try your code in TS 3.2.1</a> it is eagerly resolved, so this was a change introduced for TS3.3.</p>\n\n<p>Curiously my reading of that bug fix's algorithm description looks like it should apply to your workaround also.  I'm not sure why <code>[keyof T] extends [keyof T]</code> would change things, since <code>[keyof T1]</code> isn't definitely assignable to <code>[keyof T2]</code>, if <code>T1</code> and <code>T2</code> are unrelated.  So some mystery still remains here.  Haven't been able to crack it yet, so I'll probably just give up now.  Oh well!</p>\n\n<hr>\n\n<p>It also looks like someone <a href=\"https://github.com/Microsoft/TypeScript/issues/29505\" rel=\"nofollow noreferrer\">reported this exact issue</a> where <code>X extends X ? 1 : 0</code> is not eagerly resolved (and they also noticed that wrapping in a one-tuple \"fixes\" it), and the issue was tagged as a bug, so maybe it will be addressed?</p>\n\n<hr>\n\n<p>Okay, hope that helps; good luck!</p>\n"}], "owner": {"reputation": 15711, "user_id": 2228559, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4946f89f32fdc530cbd46167d581f7f7?s=128&d=identicon&r=PG", "display_name": "aleclarson", "link": "https://stackoverflow.com/users/2228559/aleclarson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 55944284, "answer_count": 1, "score": 3, "last_activity_date": 1556757160, "creation_date": 1556738048, "last_edit_date": 1556739801, "question_id": 55941427, "link": "https://stackoverflow.com/questions/55941427/why-cant-this-conditional-with-generic-keyof-be-eagerly-resolved", "title": "Why can&#39;t this conditional with generic keyof be eagerly resolved?", "body": "<pre><code>function broken&lt;T&gt;(value: T) {\n  type Test = keyof T extends keyof T ? 1 : 0\n}\n</code></pre>\n\n<p>Why can't <code>Test</code> in the example above be eagerly resolved to <code>1</code>? There's something I don't understand about the compiler that should answer this question for me.</p>\n\n<p>Interestingly enough, there is a workaround:</p>\n\n<pre><code>function workaround&lt;T&gt;(value: T) {\n  type Test = [keyof T] extends [keyof T] ? 1 : 0\n}\n</code></pre>\n\n<p>Playground <a href=\"https://typescript-play.js.org/#code/GYVwdgxgLglg9mABAIwE5wNYFMwB4AqAfABQBuAhgDYhYBci+AlIgN4BQiiUAngA5YMsAZyiIAvImzc4wBoiwAPKDgAmQyVmmz8iAPyIAjInoAGNgF82oSLASIA7nFQZy6cCoIkK1Og2btOHn5BEXFEAG0pGQYAXXklVXVIzWj8OP0jUwsgA\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["typescript", "visual-studio-code", "vscode-extensions"], "answers": [{"comments": [{"owner": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "edited": false, "score": 0, "creation_date": 1556762339, "post_id": 55943265, "comment_id": 98542304, "body": "I also needed to upgrade the compiler version, <code>npm -i typescript -g</code> and remove the TypeScript SDK path from my system Path variable. Because... Windows"}], "tags": [], "owner": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "is_accepted": false, "score": 0, "last_activity_date": 1556748298, "creation_date": 1556748298, "answer_id": 55943265, "question_id": 55940939, "link": "https://stackoverflow.com/questions/55940939/vscode-compiled-extension-doesnt-recognize-extension-commands/55943265#55943265", "title": "VSCode Compiled Extension Doesn&#39;t Recognize Extension Commands", "body": "<p>Turns out I needed to remove <code>node_modules</code> from the <code>exclude: []</code> section of my .tsconfig\nEverything worked fine after that.</p>\n\n<p>Run an <code>npm install</code> in your extension project directory first, then <code>vsce package</code>\nTo check what gets packaged, run <code>vsce ls</code></p>\n"}], "owner": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556748298, "creation_date": 1556735574, "last_edit_date": 1556745524, "question_id": 55940939, "link": "https://stackoverflow.com/questions/55940939/vscode-compiled-extension-doesnt-recognize-extension-commands", "title": "VSCode Compiled Extension Doesn&#39;t Recognize Extension Commands", "body": "<p>I'm working on a VS Code extension. What it generally does is read data from some JSON files and presents that data in a custom viewsContainer.</p>\n\n<p>My extension doesn't seem to run into any issues when compiled to VSIX, however, all of the commands I've defined in the package.json are not recognized once the extension is installed.</p>\n\n<p>However, once I've installed my extension and restarted VS Code, click the icon for my view container, and try clicking any of the buttons I've mapped to commands in my source code, every item returns <code>command &lt;commandname&gt; not found</code></p>\n\n<p>I keep getting a warning saying that I should use webpack, and that several hundreds of files are included.</p>\n\n<p>In my source, and resources folders, I have a grand total of 32 files, and in the remaining root I have 8 other files (.gitignore, etc defaults)</p>\n\n<p>I'm excluding <code>node_modules</code> in my tsconfig.json, so not sure where the rest of the files are coming from or if its just dev dependencies.</p>\n\n<p>Any pointers?</p>\n"}, {"tags": ["reactjs", "typescript", "react-router", "connected-react-router"], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 364978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebe0ce2207be46201b156629e88e9?s=128&d=identicon&r=PG", "display_name": "Bess", "link": "https://stackoverflow.com/users/364978/bess"}, "edited": false, "score": 0, "creation_date": 1557182902, "post_id": 55980399, "comment_id": 98671454, "body": "These are great suggestions! I ended up making an interface as I commented about here, and passing those into the component: <a href=\"https://github.com/supasate/connected-react-router/issues/305\" rel=\"nofollow noreferrer\">github.com/supasate/connected-react-router/issues/305</a>. Very similar to your first suggestion! So will mark this as correct. Thanks!"}], "tags": [], "owner": {"reputation": 1509, "user_id": 7127524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b64eba63403aa8cde4e40a36ff8e11?s=128&d=identicon&r=PG", "display_name": "teimurjan", "link": "https://stackoverflow.com/users/7127524/teimurjan"}, "is_accepted": true, "score": 8, "last_activity_date": 1556954162, "creation_date": 1556954162, "answer_id": 55980399, "question_id": 55940906, "link": "https://stackoverflow.com/questions/55940906/connected-react-router-and-typescript-for-match/55980399#55980399", "title": "Connected React Router and TypeScript for `match`", "body": "<p>You have 2 ways to do it.</p>\n\n<ol>\n<li>You can use <code>createMatchSelector</code> function inside <code>mapStateToProps</code> to extract <code>match</code> from your state. <a href=\"https://codesandbox.io/s/o48l0l7x25\" rel=\"noreferrer\">DEMO</a></li>\n</ol>\n\n<pre><code>import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { createMatchSelector } from \"connected-react-router\";\nimport { match } from \"react-router\";\nimport { State } from \"./reducers\";\n\ninterface StateProps {\n  match: match&lt;{ name?: string }&gt;;\n}\n\nconst Hello = (props: StateProps) =&gt; (\n  &lt;div&gt;Hello {props.match.params.name}!&lt;/div&gt;\n);\n\nconst mapStateToProps = (state: State) =&gt; {\n  const matchSelector = createMatchSelector(\"/hello/:name\");\n  return {\n    match: matchSelector(state)\n  };\n};\n\nexport default connect&lt;StateProps&gt;(\n  mapStateToProps,\n  null\n)(Hello);\n</code></pre>\n\n<ol start=\"2\">\n<li>You can get <code>match</code> directly from router, not from the state. <a href=\"https://codesandbox.io/s/l71nqj4ml9\" rel=\"noreferrer\">DEMO</a></li>\n</ol>\n\n<pre><code>import * as React from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router\";\n\nconst Hello = (props: RouteComponentProps&lt;{ name?: string }&gt;) =&gt; (\n  &lt;div&gt;Hello {props.match.params.name}!&lt;/div&gt;\n);\n\nexport default withRouter(Hello);\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 364978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebe0ce2207be46201b156629e88e9?s=128&d=identicon&r=PG", "display_name": "Bess", "link": "https://stackoverflow.com/users/364978/bess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3714, "favorite_count": 0, "accepted_answer_id": 55980399, "answer_count": 1, "score": 4, "last_activity_date": 1556954162, "creation_date": 1556735420, "question_id": 55940906, "link": "https://stackoverflow.com/questions/55940906/connected-react-router-and-typescript-for-match", "title": "Connected React Router and TypeScript for `match`", "body": "<p>Connected React Router exports types for <code>RouterState</code> which is great! However I don't see typings for <code>match</code>. Would assume those could also be imported and added to reducer such as <code>RouterState</code> is used below and in reducer: </p>\n\n<p><a href=\"https://github.com/supasate/connected-react-router/blob/master/examples/typescript/src/reducers/index.ts#L13\" rel=\"nofollow noreferrer\">https://github.com/supasate/connected-react-router/blob/master/examples/typescript/src/reducers/index.ts#L13</a></p>\n\n<pre><code>const rootReducer = (history: History) =&gt; combineReducers({\n  count: counterReducer,\n  router: connectRouter(history)\n\n})\n\nexport interface State {\n  count: number\n  router: RouterState\n}\n</code></pre>\n\n<p>Without which you can't really use <code>this.props.match</code> in connected components and such to match params, etc. Is there a workaround here for those using TypeScript who also need to add to reducer? Or am I missing a key part here? Thanks so much!</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556735664, "post_id": 55940899, "comment_id": 98535159, "body": "Can&#39;t reproduce: <a href=\"https://stackblitz.com/edit/angular-16btuo?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a>. Post a complete minimal example as a stackblitz that reproduces the problem."}, {"owner": {"reputation": 533, "user_id": 1027445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxAEv.jpg?s=128&g=1", "display_name": "Praveen Kumar", "link": "https://stackoverflow.com/users/1027445/praveen-kumar"}, "edited": false, "score": 1, "creation_date": 1556735831, "post_id": 55940899, "comment_id": 98535229, "body": "I tired the same code snippet and it works fine: <a href=\"https://stackblitz.com/edit/angular-tlm2np\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-tlm2np</a>. Do you have a customized number pipe?"}, {"owner": {"reputation": 2049, "user_id": 987795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7e61fc13e7f552fbc35b7afb952f016c?s=128&d=identicon&r=PG&f=1", "display_name": "haydnD", "link": "https://stackoverflow.com/users/987795/haydnd"}, "edited": false, "score": 0, "creation_date": 1556737169, "post_id": 55940899, "comment_id": 98535789, "body": "okay. weird. I closed everything down and reopened (vscode, chrome) and it&#39;s working. should this be closed? sorry."}, {"owner": {"reputation": 23126, "user_id": 64279, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5xdjT.png?s=128&g=1", "display_name": "adam0101", "link": "https://stackoverflow.com/users/64279/adam0101"}, "edited": false, "score": 0, "creation_date": 1556746385, "post_id": 55940899, "comment_id": 98539180, "body": "@ironman, yes, I think it&#39;s best to delete this question unless you can reproduce it."}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 5500680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5468da40d04535a667c3b8f9067466?s=128&d=identicon&r=PG&f=1", "display_name": "Prasanth", "link": "https://stackoverflow.com/users/5500680/prasanth"}, "is_accepted": true, "score": 0, "last_activity_date": 1556744384, "last_edit_date": 1556744384, "creation_date": 1556735915, "answer_id": 55941010, "question_id": 55940899, "link": "https://stackoverflow.com/questions/55940899/why-is-angular-number-pipe-not-displaying-if-number-has-a-leading-zero/55941010#55941010", "title": "why is angular number pipe not displaying if number has a leading zero?", "body": "<p>Try this:</p>\n\n<pre><code>{{numbVal | number:'1.1-5' }}\n</code></pre>\n\n<p>It will get it to display 0.35.</p>\n"}, {"tags": [], "owner": {"reputation": 20818, "user_id": 4964569, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153480747890827/picture?type=large", "display_name": "Hien Nguyen", "link": "https://stackoverflow.com/users/4964569/hien-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1556770685, "creation_date": 1556770685, "answer_id": 55945607, "question_id": 55940899, "link": "https://stackoverflow.com/questions/55940899/why-is-angular-number-pipe-not-displaying-if-number-has-a-leading-zero/55945607#55945607", "title": "why is angular number pipe not displaying if number has a leading zero?", "body": "<p>The parameter of number pipe:</p>\n\n<pre><code>{minIntegerDigits}.{minFractionDigits}-{maxFractionDigits}\n</code></pre>\n\n<p>So your example of <code>'3.1-5'</code> means:</p>\n\n<p>A minimum of 3 digit will be shown before decimal point\nIt will show at least 1 digits after decimal point\nBut not more than 5 digits</p>\n\n<p>Sample</p>\n\n<pre><code>{{0.351255 | number:'3.1-5' }}  //000.35126\n\n {{10 | number:'3.1-5' }}  //010.0\n\n {{0.35 | number:'1.1-2' }} //0.35\n</code></pre>\n\n<p>With your requirement, you can use <code>{{ 0.35 | number:'1.1-2' }}</code></p>\n\n<p>More at <a href=\"https://angular.io/api/common/DecimalPipe\" rel=\"nofollow noreferrer\">https://angular.io/api/common/DecimalPipe</a></p>\n"}], "owner": {"reputation": 2049, "user_id": 987795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7e61fc13e7f552fbc35b7afb952f016c?s=128&d=identicon&r=PG&f=1", "display_name": "haydnD", "link": "https://stackoverflow.com/users/987795/haydnd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 55941010, "answer_count": 2, "score": -1, "last_activity_date": 1617315161, "creation_date": 1556735384, "last_edit_date": 1617315161, "question_id": 55940899, "link": "https://stackoverflow.com/questions/55940899/why-is-angular-number-pipe-not-displaying-if-number-has-a-leading-zero", "title": "why is angular number pipe not displaying if number has a leading zero?", "body": "<p>Why does <code>number pipe</code> not display when the value has a leading zero when I use it like below?</p>\n<p>0.35 won't display in UI.\n3.5 will display.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!-- numbVal = 0.35 --&gt;\n\n&lt;!-- output '' --&gt;\n&lt;div&gt;\n {{numbVal | number }}\n&lt;/div&gt;\n\n&lt;!-- output '' --&gt;\n&lt;div&gt;\n {{numbVal | number:'3.1-5' }}\n&lt;/div&gt;\n\n\n\n&lt;!-- numbVal = 3.5 --&gt;\n\n&lt;!-- output '3.5' --&gt;\n&lt;div&gt;\n {{numbVal | number }}\n&lt;/div&gt;\n\n&lt;!-- output '003.5' --&gt;\n&lt;div&gt;\n {{numbVal | number:'3.1-5' }}\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ecmascript-6"], "comments": [{"owner": {"reputation": 699354, "user_id": 218196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4P5DY.jpg?s=128&g=1", "display_name": "Felix Kling", "link": "https://stackoverflow.com/users/218196/felix-kling"}, "edited": false, "score": 0, "creation_date": 1556735556, "post_id": 55940844, "comment_id": 98535121, "body": "I don&#39;t know how angular works but maybe it only allows element spread on actual arrays? The ECMAScript spec certainly allows any iterable."}], "answers": [{"tags": [], "owner": {"reputation": 1321, "user_id": 4207704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53e79394425104692f74b4df6677509f?s=128&d=identicon&r=PG&f=1", "display_name": "Leibale Eidelman", "link": "https://stackoverflow.com/users/4207704/leibale-eidelman"}, "is_accepted": true, "score": 1, "last_activity_date": 1556735703, "creation_date": 1556735703, "answer_id": 55940966, "question_id": 55940844, "link": "https://stackoverflow.com/questions/55940844/why-does-es6-generator-functions-are-giving-me-different-results-on-angular-6-an/55940966#55940966", "title": "Why does ES6 generator functions are giving me different results on Angular 6 and chrome developer tools", "body": "<p>As you can read <a href=\"https://github.com/Microsoft/TypeScript/issues/8856\" rel=\"nofollow noreferrer\">here</a>, it's a typescript problem.</p>\n\n<p>To solve it you can use <code>--downlevelIteration</code> argument or instead of using the spread operator you can use <code>Array.from</code> function.</p>\n\n<pre><code>function* foo() {\n    yield 'a';\n    yield 'b';\n    yield 'c';\n}\n\nconst values = Array.from(foo());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": false, "score": 0, "last_activity_date": 1556735747, "creation_date": 1556735747, "answer_id": 55940979, "question_id": 55940844, "link": "https://stackoverflow.com/questions/55940844/why-does-es6-generator-functions-are-giving-me-different-results-on-angular-6-an/55940979#55940979", "title": "Why does ES6 generator functions are giving me different results on Angular 6 and chrome developer tools", "body": "<p>For one thing, in browser's console you're writing JavaScript. Here, you get a TypeScript error. One solution would be to check the <code>downlevelIteration</code> option in the compiler settings.</p>\n"}, {"tags": [], "owner": {"reputation": 14375, "user_id": 3888766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eClVG.jpg?s=128&g=1", "display_name": "Fullstack Guy", "link": "https://stackoverflow.com/users/3888766/fullstack-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1556735777, "creation_date": 1556735777, "answer_id": 55940988, "question_id": 55940844, "link": "https://stackoverflow.com/questions/55940844/why-does-es6-generator-functions-are-giving-me-different-results-on-angular-6-an/55940988#55940988", "title": "Why does ES6 generator functions are giving me different results on Angular 6 and chrome developer tools", "body": "<p>To fix this go to your <strong><em>tsconfig.json</em></strong> and mention the <strong><em>target</em></strong> as <strong><em>es6</em></strong>:</p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"target\": \"es6\"\n  }\n}\n</code></pre>\n\n<p>This is an <a href=\"https://github.com/Microsoft/TypeScript/issues/16022\" rel=\"nofollow noreferrer\">open issue</a> for TypeScript: </p>\n"}], "owner": {"reputation": 1196, "user_id": 5801928, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/wUeIt.jpg?s=128&g=1", "display_name": "Sreehari", "link": "https://stackoverflow.com/users/5801928/sreehari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 55940966, "answer_count": 3, "score": 0, "last_activity_date": 1556735927, "creation_date": 1556735116, "last_edit_date": 1556735927, "question_id": 55940844, "link": "https://stackoverflow.com/questions/55940844/why-does-es6-generator-functions-are-giving-me-different-results-on-angular-6-an", "title": "Why does ES6 generator functions are giving me different results on Angular 6 and chrome developer tools", "body": "<p>Functioning of generators in Angular 6/7 is very confusing. My task is just to print a simple array from a generator function. I am successful by doing it in chrome developer tools as below.</p>\n\n<pre><code>function* foo() {\n   yield 'a';\n   yield 'b';\n   yield 'c';\n}\n\nconst values = [...foo()];\n</code></pre>\n\n<p>But the same thing, I am unable do it in Angular 6/7. I am getting a compilation error as</p>\n\n<pre><code>[ts] Type 'IterableIterator&lt;\"a\" | \"b\" | \"c\"&gt;' is not an array type.\n</code></pre>\n\n<p>From the error, I can understand the issue. As the function foo() returns only one value a|b|c at each time we cannot use array operator on it. </p>\n\n<p>But why is the same working on chrome developer tools? How can we make it work on Angular same as on chrome developer tools?</p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"comments": [{"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 0, "creation_date": 1556735366, "post_id": 55940697, "comment_id": 98535051, "body": "This is fantastic. Are the Observables always logged in the order that they were added into the array?"}, {"owner": {"reputation": 533, "user_id": 1027445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxAEv.jpg?s=128&g=1", "display_name": "Praveen Kumar", "link": "https://stackoverflow.com/users/1027445/praveen-kumar"}, "reply_to_user": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 1, "creation_date": 1556735544, "post_id": 55940697, "comment_id": 98535117, "body": "Yes, they are. The order remains intact"}], "tags": [], "owner": {"reputation": 533, "user_id": 1027445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxAEv.jpg?s=128&g=1", "display_name": "Praveen Kumar", "link": "https://stackoverflow.com/users/1027445/praveen-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1556734444, "creation_date": 1556734444, "answer_id": 55940697, "question_id": 55940484, "link": "https://stackoverflow.com/questions/55940484/angular-rxjs-get-errors-from-observables-array-via-forkjoin-after-execution/55940697#55940697", "title": "Angular Rxjs get errors from observables array via forkJoin after execution", "body": "<p>You can put a catch block on the observable that you are pushing in an array. This way you can decide what the output has to be when it fails. Try the below code snippet and verify your console log:</p>\n\n<pre><code>let observables: Observable&lt;any&gt;[] = [];\nthis.selection.selected.forEach((person) =&gt; {\n  // API CALL.\n  observables.push(this._personService.deletePerson(person.ID).catch(() =&gt; Observable.of(false)));\n});\n\nforkJoin(observables)\n  .pipe(take(1))\n  .subscribe(dataArray =&gt; { console.log(JSON.stringify(dataArray)); })\n  .add(() =&gt; {\n    this._snackbars.openSnackbarShowResults(\"Mass Delete Completed.\");\n    this.refresh();\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8070, "user_id": 2078685, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SD5yb.jpg?s=128&g=1", "display_name": "Saksham", "link": "https://stackoverflow.com/users/2078685/saksham"}, "is_accepted": false, "score": 1, "last_activity_date": 1569613885, "creation_date": 1569613885, "answer_id": 58140628, "question_id": 55940484, "link": "https://stackoverflow.com/questions/55940484/angular-rxjs-get-errors-from-observables-array-via-forkjoin-after-execution/58140628#58140628", "title": "Angular Rxjs get errors from observables array via forkJoin after execution", "body": "<p>A better approach using <code>rxjs</code> would be to pipe a <code>catchError</code> operator which would store the error message in an object which you can use later. Once you have handled the error, you may pass an observable of null</p>\n\n<pre><code>.pipe(\n    catchError(err =&gt; {\n        this.errors[\"errorForObservable1\"] = \"error\";\n        return of(null);\n    })\n)\n</code></pre>\n\n<p>Stackblitz at <a href=\"https://stackblitz.com/edit/angular-forkjoin-handle-errors\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-forkjoin-handle-errors</a></p>\n"}], "owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 55940697, "answer_count": 2, "score": 1, "last_activity_date": 1569613885, "creation_date": 1556733234, "last_edit_date": 1556733589, "question_id": 55940484, "link": "https://stackoverflow.com/questions/55940484/angular-rxjs-get-errors-from-observables-array-via-forkjoin-after-execution", "title": "Angular Rxjs get errors from observables array via forkJoin after execution", "body": "<p>I built an array of observables via a forloop. I then use forkjoin to execute them in order and refresh the view after they all complete via .add().</p>\n\n<pre><code>    let observables: Observable&lt;any&gt;[] = [];\n    this.selection.selected.forEach((person) =&gt; {\n      // API CALL.\n      observables.push(this._personService.deletePerson(person.ID));\n    });\n\n    forkJoin(observables)\n      .pipe(take(1))\n      .subscribe(dataArray =&gt; {})\n      .add(() =&gt; {\n        this._snackbars.openSnackbarShowResults(\"Mass Delete Completed.\");\n        this.refresh();\n    });\n</code></pre>\n\n<p>I need a way to keep track of which observables failed and returned an error. I use these errors to inform the user which objects could not be deleted and which ones could. Is there an easy way to get which observables had an error after the forkJoin is completed?</p>\n\n<p>Essentially a list of <strong>failed</strong> and <strong>completed</strong> observables from the forkJoin.</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1556732694, "post_id": 55940132, "comment_id": 98533887, "body": "<code>typescript-typings</code> tag is for questions related pulling in type definitions for third-party libraries. It is not clear, but it seems like that tag is not needed for this question."}, {"owner": {"reputation": 138, "user_id": 1768520, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001049586203/picture?type=large", "display_name": "David Costa", "link": "https://stackoverflow.com/users/1768520/david-costa"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1556733136, "post_id": 55940132, "comment_id": 98534122, "body": "Oh, thanks for said that, I will remove it."}, {"owner": {"reputation": 1996, "user_id": 8634147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-36eQ4qJ6F9o/AAAAAAAAAAI/AAAAAAAADZg/coKQfu-5HzM/photo.jpg?sz=128", "display_name": "Romain Deneau", "link": "https://stackoverflow.com/users/8634147/romain-deneau"}, "edited": false, "score": 0, "creation_date": 1556800485, "post_id": 55940132, "comment_id": 98557031, "body": "Can you provide one or more use case examples plz? <code>const result = selector({ tbd }, { tbd }); expect(result).toEqual(tbd);</code>. Hence, it will be possible to have an appropriate type for the input parameters <code>definitions</code> and <code>query</code> and the output. Then Nicholas&#39; answer can fit or another solution more generic (not just for string)."}, {"owner": {"reputation": 1996, "user_id": 8634147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-36eQ4qJ6F9o/AAAAAAAAAAI/AAAAAAAADZg/coKQfu-5HzM/photo.jpg?sz=128", "display_name": "Romain Deneau", "link": "https://stackoverflow.com/users/8634147/romain-deneau"}, "edited": false, "score": 0, "creation_date": 1556893565, "post_id": 55940132, "comment_id": 98594342, "body": "Based on this, I added my own response, not totally accurate but still interesting I think. <a href=\"https://stackoverflow.com/a/55969899/8634147\">stackoverflow.com/a/55969899/8634147</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3836, "user_id": 3003401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2de9e3bd27825488f4cf0a1dd86ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Cerberus", "link": "https://stackoverflow.com/users/3003401/cerberus"}, "edited": false, "score": 2, "creation_date": 1556732748, "post_id": 55940309, "comment_id": 98533925, "body": "Type <code>(any) =&gt; boolean</code> will also generate the <code>implicit &#39;any&#39;</code> error, it should rather be <code>(arg: any) =&gt; boolean</code> (or even better is to give the argument meaningful name instead of <code>arg</code>)."}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 3836, "user_id": 3003401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2de9e3bd27825488f4cf0a1dd86ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Cerberus", "link": "https://stackoverflow.com/users/3003401/cerberus"}, "edited": false, "score": 0, "creation_date": 1556735809, "post_id": 55940309, "comment_id": 98535219, "body": "Thanks for the correction. I&#39;ve updated it to <code>(arg: any)</code>, though i agree they should give it more meaningful names and types (i just don&#39;t know what those names and types are)"}, {"owner": {"reputation": 138, "user_id": 1768520, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001049586203/picture?type=large", "display_name": "David Costa", "link": "https://stackoverflow.com/users/1768520/david-costa"}, "edited": false, "score": 0, "creation_date": 1556803318, "post_id": 55940309, "comment_id": 98558753, "body": "I&#39;m having another problem, please check this example <a href=\"https://repl.it/repls/FrigidDownrightCone\" rel=\"nofollow noreferrer\">repl.it/repls/FrigidDownrightCone</a> @NicholasTower"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 138, "user_id": 1768520, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001049586203/picture?type=large", "display_name": "David Costa", "link": "https://stackoverflow.com/users/1768520/david-costa"}, "edited": false, "score": 0, "creation_date": 1556805335, "post_id": 55940309, "comment_id": 98559977, "body": "@DavidCosta My answer was given before you added in examples of the data. So i had to guess some of the types, and i guessed wrong. I&#39;ve updated the answer to make default a number, and to make all of the properties optional."}], "tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": false, "score": 1, "last_activity_date": 1556806105, "last_edit_date": 1556806105, "creation_date": 1556732416, "answer_id": 55940309, "question_id": 55940132, "link": "https://stackoverflow.com/questions/55940132/convert-the-function-to-use-typescript-types/55940309#55940309", "title": "Convert the function to use typescript types", "body": "<p>An index signature is when you specify that the various keys of an object will correspond to a certain type, even though you don't know ahead of time exactly which keys those will be (or don't want to enumerate them).</p>\n\n<p>For example, your definitions parameter might be defined something like this:</p>\n\n<pre><code>interface definition {\n  validation?: (arg: any) =&gt; boolean;\n  convert?: (arg0: any, arg1: any) =&gt; any;\n  default?: number;\n}\n\ninterface definitionsCollection {\n  [key: string]: definition; // &lt;--- this is an index signature\n}\n\nconst selector = (definitions: definitionsCollection, query = {}) =&gt; {\n  // ... etc\n}\n\n</code></pre>\n\n<p>Be aware that your code has another problem: You're calling <code>definitions[key].validation(query[key])</code> without making sure that <code>definitions[key].validation</code> is defined first. You describe it as being required, but then your own example shows that it may not exist, since <code>limit</code> has no validation function. If you need to support the case where validation doesn't exist, you'll need to add that check in:</p>\n\n<pre><code>  Object.keys(definitions).forEach((key) =&gt; {\n    const def = definitions[key];\n    if (typeof query[key] !== 'undefined') {\n      if (typeof def.validation !== 'undefined' &amp;&amp; def.validation(query[key])) {\n        if (typeof def.convert !== 'undefined') {\n          select[key] = def.convert(query[key], key);\n        } else {\n          select[key] = query[key];\n        }\n      } else if (typeof def.default !== 'undefined') {\n        select[key] = def.default;\n      }\n    } else if (typeof def.default !== 'undefined') {\n      select[key] = def.default;\n    }\n  });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1996, "user_id": 8634147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-36eQ4qJ6F9o/AAAAAAAAAAI/AAAAAAAADZg/coKQfu-5HzM/photo.jpg?sz=128", "display_name": "Romain Deneau", "link": "https://stackoverflow.com/users/8634147/romain-deneau"}, "is_accepted": false, "score": 0, "last_activity_date": 1557058190, "last_edit_date": 1557058190, "creation_date": 1556886722, "answer_id": 55969899, "question_id": 55940132, "link": "https://stackoverflow.com/questions/55940132/convert-the-function-to-use-typescript-types/55969899#55969899", "title": "Convert the function to use typescript types", "body": "<p><a href=\"https://stackoverflow.com/users/3794812/nicholas-tower\">nicholas</a> provided a good solution for the <code>definition</code> argument. We can enhance it a bit to be generic and more explicit, and give a type for the <code>query</code> argument:</p>\n\n<pre><code>type QueryValue = any;\ntype Query = { [key: string]: QueryValue };\n\ntype Definition&lt;T1, T2=T1&gt; = {\n  validation?: (value: QueryValue) =&gt; boolean;\n  convert   ?: (value: QueryValue, key: string) =&gt; T1;\n  default   ?: T2;\n};\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>The type alias <code>QueryValue</code> helps clarifying where a value from the <code>query</code> is used in a <code>definition</code>.</li>\n<li><code>definitions</code> type will not have the type <code>definitionsCollection</code> <a href=\"https://stackoverflow.com/a/55940309/8634147\">suggested by nicholas</a> but a generic type <code>D</code>. It's less user-friendly when calling the <code>selector()</code> function the but it's the only way to infer the value type for each keys.</li>\n</ul>\n\n<p>For the <strong>return type</strong> (currently <code>{}</code>!), it's a real challenge. We need to select only some keys in both the <code>definitions</code> and the <code>query</code>, some of these keys being optional, depending of the result of <code>validation()</code> method of the definition.</p>\n\n<p>The basic idea is to create a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\" rel=\"nofollow noreferrer\">mapped type</a> like <code>Partial</code>, combined with some <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types\" rel=\"nofollow noreferrer\">conditional types criteria</a> with type inference.</p>\n\n<p>To select the keys, we cannot play with the <code>never</code> type for the value: the type <code>{ a: never }</code> is not reduced to <code>{}</code>. We have to filter the keys \"inline\", recompose the object with the filtered keys and extract these keys! I took this idea from the <code>FunctionPropertyNames&lt;T&gt;</code> found amongst <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\" rel=\"nofollow noreferrer\">distributive conditional types</a>.</p>\n\n<p>To differentiate keys that are optional, we have no choice but splitting the definition in 2 and recombining them in an intersection type: <code>type T = { K: V } &amp; { K?: V }</code>. Indeed, <code>{ K: V|undefined }</code> is not equivalent to <code>{ K?: V }</code>.</p>\n\n<p>With some helper types and handling different cases, the result is:</p>\n\n<pre><code>type WithValidation = { validation: (value: QueryValue) =&gt; boolean; }\ntype WithConvert&lt;T&gt; = { convert   : (value: QueryValue, key: string) =&gt; T; }\ntype WithDefault&lt;T&gt; = { default   : T; }\n\ntype SelectorResult&lt;D&gt; = {\n  [P in {\n    [K in keyof D]:\n      D[K] extends WithDefault&lt;any&gt; ? K : never\n  }[keyof D]]:\n    D[P] extends WithDefault&lt;infer T&gt; ? T : never;\n} &amp; {\n  [P in {\n    [K in keyof D]:\n      D[K] extends WithDefault&lt;any&gt; ? never :\n      D[K] extends WithConvert&lt;any&gt; ?\n      D[K] extends WithValidation   ? K : never :\n      D[K] extends Definition&lt;any&gt;  ? K : never\n  }[keyof D]]?:\n    D[P] extends WithValidation &amp; WithConvert&lt;infer T&gt; ? T :\n    D[P] extends Definition&lt;any&gt; ? unknown : never;\n};\n</code></pre>\n\n<p>We can use some \"test types\" that can be evaluated in the editor to validate the <code>SelectorResult</code> type. The results are good, but it would have been better if the intersection types have been merged:</p>\n\n<pre><code>type Test1 = SelectorResult&lt;{ a: 'invalid' }&gt;;\n// Not a `Definition&lt;T&gt;`\n// =&gt; Expected `{}`\n// &gt;&gt; Received `{} &amp; {}` : OK\n\ntype Test2 = SelectorResult&lt;{ a: any }&gt;;\n// ~`Definition&lt;unknown&gt;`\n// =&gt; Expected `{ a?: unknown }`\n// &gt;&gt; Received `{ a: {} } &amp; { a?: unknown }` : ~OK\n\ntype Test3 = SelectorResult&lt;{ a: WithConvert&lt;any&gt; }&gt;;\n// `convert` alone is ignored.\n// =&gt; Expected `{}`\n// &gt;&gt; Received `{} &amp; {}` : OK\n\ntype Test4 = SelectorResult&lt;{ a: WithDefault&lt;number&gt; }&gt;;\n// `default` ensures the key is kept and provides the value type: `number`.\n// =&gt; Expected `{ a: number }`\n// &gt;&gt; Received `{ a: number } &amp; {}` : OK\n\ntype Test5 = SelectorResult&lt;{ a: WithDefault&lt;number&gt; &amp; WithConvert&lt;any&gt; }&gt;;\n// Idem Test 4: `convert()` still ignored, only `default` matters.\n// =&gt; Expected `{ a: number }`\n// &gt;&gt; Received `{ a: number } &amp; {}` : OK\n\ntype Test6 = SelectorResult&lt;{ a: WithValidation }&gt;;\n// `validation()` alone makes the key optional and the value type `unknown`.\n// =&gt; Expected `{ a?: unknown }`\n// &gt;&gt; Received `{} &amp; { a?: unknown }` : OK\n\ntype Test7 = SelectorResult&lt;{ a: WithValidation &amp; WithConvert&lt;string&gt; }&gt;;\n// Idem Test6 + `convert()` providing the value type: `string`\n// =&gt; Expected `{ a?: string }`\n// &gt;&gt; Received `{} &amp; { a?: string | undefined }` : OK\n\ntype Test8 = SelectorResult&lt;{ a: WithDefault&lt;number&gt;; b: 'invalid'; c: WithValidation }&gt;;;\n// Combining several keys from different cases: a (Test4), b (Test1), c (Test6)\n// =&gt; Expected `{ a: number; c?: unknown }`\n// &gt;&gt; Received `{ a: number } &amp; { c?: unknown }` : OK\n</code></pre>\n\n<p>The type usage can be found in the following code, with a little refactoring to be a bit more functional:</p>\n\n<pre><code>const keySelector = &lt;D, Q&gt;(definitions: D, query: Q, key: string) =&gt; {\n  const val = query[key as keyof Q];\n  const def = definitions[key as keyof D] as Definition&lt;D[keyof D]&gt;;\n\n  if (typeof val !== 'undefined' &amp;&amp;\n      typeof def.validation !== 'undefined' &amp;&amp;\n      def.validation(val)) {\n    return typeof def.convert !== 'undefined'\n        ? { [key]: def.convert(val, key) }\n        : { [key]: val };\n  }\n\n  return typeof def.default !== 'undefined'\n      ? { [key]: def.default }\n      : {};\n};\n\nconst safeSelector = &lt;D&gt;(definitions: D, query: Query) =&gt;\n  Object.keys(definitions).reduce(\n    (result, key) =&gt; Object.assign(result, keySelector(definitions, query, key)),\n    {} as SelectorResult&lt;D&gt;);\n\nconst selector = &lt;D&gt;(definitions: D, query: Query = {}) =&gt;\n  safeSelector(definitions, query || {});\n</code></pre>\n\n<p>These are the unit tests used to avoid regressions:</p>\n\n<pre><code>// Tests (with colors for Chrome/Firefox JavaScript Console)\ntest('Skip key not defined', {}, { a: 1 }, {});\ntest('Empty definition', { a: {} }, { a: 1 }, {});\ntest('Use default when key is missing', { a: { default: 10 } }, {}, { a: 10 });\ntest('Keep key with valid definitions', { a: { default: 10 }, b: { ko: 'def' } }, {}, { a: 10 });\n\ntest('Use default when value is not valid ', { a: { default: 10, validation: () =&gt; false } }, { a: 1 }, { a: 10 });\ntest('Use value when it is valid          ', { a: { default: 10, validation: () =&gt; true  } }, { a: 1 }, { a: 1 });\ntest('Use converted value when it is valid', { a: { convert: (a: number, k: string) =&gt; `${k}=${a * 2}`, validation: () =&gt; true } }, { a: 1 }, { a: 'a=2' });\n\nfunction test&lt;D&gt;(message: string, definitions: D, query: Query, expected: SelectorResult&lt;D&gt;) {\n  const actual = selector(definitions, query);\n  const args = [expected, actual].map(x =&gt; JSON.stringify(x));\n  if (args[0] === args[1]) {\n    console.log(`%c \u2714\ufe0f ${message}`, 'color: Green; background: #EFE;');\n  } else {\n    console.log(`%c \u274c ${message} KO : Expected ${args[0]}, Received ${args[1]}`, 'color: Red; background: #FEE;');\n  }\n}\n</code></pre>\n\n<p>The code can be evaluated and executed in the TypeScript Playground <a href=\"https://www.typescriptlang.org/play/index.html#src=%2F%2F%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F55940132%2Fconvert-the-function-to-use-typescript-types%2F55969899%2355969899%0D%0A%2F%2F%20Better%20results%20with%20compiler%20option%20--strictNullChecks%0D%0A%0D%0A%2F%2F%20Types%0D%0Atype%20QueryValue%20%3D%20any%3B%0D%0Atype%20Query%20%3D%20%7B%20%5Bkey%3A%20string%5D%3A%20QueryValue%20%7D%3B%0D%0A%0D%0Atype%20Definition%3CT1%2C%20T2%3DT1%3E%20%3D%20%7B%0D%0A%20%20validation%3F%3A%20(value%3A%20QueryValue)%20%3D%3E%20boolean%3B%0D%0A%20%20convert%20%20%20%3F%3A%20(value%3A%20QueryValue%2C%20key%3A%20string)%20%3D%3E%20T1%3B%0D%0A%20%20default%20%20%20%3F%3A%20T2%3B%0D%0A%7D%3B%0D%0A%0D%0Atype%20WithValidation%20%3D%20%7B%20validation%3A%20(value%3A%20QueryValue)%20%3D%3E%20boolean%3B%20%7D%0D%0Atype%20WithConvert%3CT%3E%20%3D%20%7B%20convert%20%20%20%3A%20(value%3A%20QueryValue%2C%20key%3A%20string)%20%3D%3E%20T%3B%20%7D%0D%0Atype%20WithDefault%3CT%3E%20%3D%20%7B%20default%20%20%20%3A%20T%3B%20%7D%0D%0A%0D%0Atype%20SelectorResult%3CD%3E%20%3D%20%7B%0D%0A%20%20%5BP%20in%20%7B%0D%0A%20%20%20%20%5BK%20in%20keyof%20D%5D%3A%0D%0A%20%20%20%20%20%20D%5BK%5D%20extends%20WithDefault%3Cany%3E%20%3F%20K%20%3A%20never%0D%0A%20%20%7D%5Bkeyof%20D%5D%5D%3A%0D%0A%20%20%20%20D%5BP%5D%20extends%20WithDefault%3Cinfer%20T%3E%20%3F%20T%20%3A%20never%3B%0D%0A%7D%20%26%20%7B%0D%0A%20%20%5BP%20in%20%7B%0D%0A%20%20%20%20%5BK%20in%20keyof%20D%5D%3A%0D%0A%20%20%20%20%20%20D%5BK%5D%20extends%20WithDefault%3Cany%3E%20%3F%20never%20%3A%0D%0A%20%20%20%20%20%20D%5BK%5D%20extends%20WithConvert%3Cany%3E%20%3F%0D%0A%20%20%20%20%20%20D%5BK%5D%20extends%20WithValidation%20%20%20%3F%20K%20%3A%20never%20%3A%0D%0A%20%20%20%20%20%20D%5BK%5D%20extends%20Definition%3Cany%3E%20%20%3F%20K%20%3A%20never%0D%0A%20%20%7D%5Bkeyof%20D%5D%5D%3F%3A%0D%0A%20%20%20%20D%5BP%5D%20extends%20WithValidation%20%26%20WithConvert%3Cinfer%20T%3E%20%3F%20T%20%3A%0D%0A%20%20%20%20D%5BP%5D%20extends%20Definition%3Cany%3E%20%3F%20unknown%20%3A%20never%3B%0D%0A%7D%3B%0D%0A%0D%0A%2F%2F%20--%20Test%20Types%20--%0D%0A%0D%0Atype%20Test1%20%3D%20SelectorResult%3C%7B%20a%3A%20&#39;invalid&#39;%20%7D%3E%3B%0D%0A%2F%2F%20Not%20a%20%60Definition%3CT%3E%60%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%7D%20%26%20%7B%7D%60%20%3A%20OK%0D%0A%0D%0Atype%20Test2%20%3D%20SelectorResult%3C%7B%20a%3A%20any%20%7D%3E%3B%0D%0A%2F%2F%20~%60Definition%3Cunknown%3E%60%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%20a%3F%3A%20unknown%20%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%20a%3A%20%7B%7D%20%7D%20%26%20%7B%20a%3F%3A%20unknown%20%7D%60%20%3A%20~OK%0D%0A%0D%0Atype%20Test3%20%3D%20SelectorResult%3C%7B%20a%3A%20WithConvert%3Cany%3E%20%7D%3E%3B%0D%0A%2F%2F%20%60convert%60%20alone%20is%20ignored.%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%7D%20%26%20%7B%7D%60%20%3A%20OK%0D%0A%0D%0Atype%20Test4%20%3D%20SelectorResult%3C%7B%20a%3A%20WithDefault%3Cnumber%3E%20%7D%3E%3B%0D%0A%2F%2F%20%60default%60%20ensures%20the%20key%20is%20kept%20and%20provides%20the%20value%20type%3A%20%60number%60.%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%20a%3A%20number%20%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%20a%3A%20number%20%7D%20%26%20%7B%7D%60%20%3A%20OK%0D%0A%0D%0Atype%20Test5%20%3D%20SelectorResult%3C%7B%20a%3A%20WithDefault%3Cnumber%3E%20%26%20WithConvert%3Cany%3E%20%7D%3E%3B%0D%0A%2F%2F%20Idem%20Test%204%3A%20%60convert()%60%20still%20ignored%2C%20only%20%60default%60%20matters.%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%20a%3A%20number%20%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%20a%3A%20number%20%7D%20%26%20%7B%7D%60%20%3A%20OK%0D%0A%0D%0Atype%20Test6%20%3D%20SelectorResult%3C%7B%20a%3A%20WithValidation%20%7D%3E%3B%0D%0A%2F%2F%20%60validation()%60%20alone%20makes%20the%20key%20optional%20and%20the%20value%20type%20%60unknown%60.%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%20a%3F%3A%20unknown%20%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%7D%20%26%20%7B%20a%3F%3A%20unknown%20%7D%60%20%3A%20OK%0D%0A%0D%0Atype%20Test7%20%3D%20SelectorResult%3C%7B%20a%3A%20WithValidation%20%26%20WithConvert%3Cstring%3E%20%7D%3E%3B%0D%0A%2F%2F%20Idem%20Test6%20%2B%20%60convert()%60%20providing%20the%20value%20type%3A%20%60string%60%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%20a%3F%3A%20string%20%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%7D%20%26%20%7B%20a%3F%3A%20string%20%7C%20undefined%20%7D%60%20%3A%20OK%0D%0A%0D%0Atype%20Test8%20%3D%20SelectorResult%3C%7B%20a%3A%20WithDefault%3Cnumber%3E%3B%20b%3A%20&#39;invalid&#39;%3B%20c%3A%20WithValidation%20%7D%3E%3B%3B%0D%0A%2F%2F%20Combining%20several%20keys%20from%20different%20cases%3A%20a%20(Test4)%2C%20b%20(Test1)%2C%20c%20(Test6)%0D%0A%2F%2F%20%3D%3E%20Expected%20%60%7B%20a%3A%20number%3B%20c%3F%3A%20unknown%20%7D%60%0D%0A%2F%2F%20%3E%3E%20Received%20%60%7B%20a%3A%20number%20%7D%20%26%20%7B%20c%3F%3A%20unknown%20%7D%60%20%3A%20OK%0D%0A%0D%0A%2F%2F%20Implementation%0D%0Aconst%20keySelector%20%3D%20%3CD%2C%20Q%3E(definitions%3A%20D%2C%20query%3A%20Q%2C%20key%3A%20string)%20%3D%3E%20%7B%0D%0A%20%20const%20val%20%3D%20query%5Bkey%20as%20keyof%20Q%5D%3B%0D%0A%20%20const%20def%20%3D%20definitions%5Bkey%20as%20keyof%20D%5D%20as%20Definition%3CD%5Bkeyof%20D%5D%3E%3B%0D%0A%0D%0A%20%20if%20(typeof%20val%20!%3D%3D%20&#39;undefined&#39;%20%26%26%0D%0A%20%20%20%20%20%20typeof%20def.validation%20!%3D%3D%20&#39;undefined&#39;%20%26%26%0D%0A%20%20%20%20%20%20def.validation(val))%20%7B%0D%0A%20%20%20%20return%20typeof%20def.convert%20!%3D%3D%20&#39;undefined&#39;%0D%0A%20%20%20%20%20%20%20%20%3F%20%7B%20%5Bkey%5D%3A%20def.convert(val%2C%20key)%20%7D%0D%0A%20%20%20%20%20%20%20%20%3A%20%7B%20%5Bkey%5D%3A%20val%20%7D%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20return%20typeof%20def.default%20!%3D%3D%20&#39;undefined&#39;%0D%0A%20%20%20%20%20%20%3F%20%7B%20%5Bkey%5D%3A%20def.default%20%7D%0D%0A%20%20%20%20%20%20%3A%20%7B%7D%3B%0D%0A%7D%3B%0D%0A%0D%0Aconst%20safeSelector%20%3D%20%3CD%3E(definitions%3A%20D%2C%20query%3A%20Query)%20%3D%3E%0D%0A%20%20Object.keys(definitions).reduce(%0D%0A%20%20%20%20(result%2C%20key)%20%3D%3E%20Object.assign(result%2C%20keySelector(definitions%2C%20query%2C%20key))%2C%0D%0A%20%20%20%20%7B%7D%20as%20SelectorResult%3CD%3E)%3B%0D%0A%0D%0Aconst%20selector%20%3D%20%3CD%3E(definitions%3A%20D%2C%20query%3A%20Query%20%3D%20%7B%7D)%20%3D%3E%20safeSelector(definitions%2C%20query%20%7C%7C%20%7B%7D)%3B%0D%0A%0D%0A%2F%2F%20Tests%20(with%20colors%20for%20Chrome%2FFirefox%20JavaScript%20Console)%0D%0Atest(&#39;Skip%20key%20not%20defined&#39;%2C%20%7B%7D%2C%20%7B%20a%3A%201%20%7D%2C%20%7B%7D)%3B%0D%0Atest(&#39;Empty%20definition&#39;%2C%20%7B%20a%3A%20%7B%7D%20%7D%2C%20%7B%20a%3A%201%20%7D%2C%20%7B%7D)%3B%0D%0Atest(&#39;Use%20default%20when%20key%20is%20missing&#39;%2C%20%7B%20a%3A%20%7B%20default%3A%2010%20%7D%20%7D%2C%20%7B%7D%2C%20%7B%20a%3A%2010%20%7D)%3B%0D%0Atest(&#39;Keep%20key%20with%20valid%20definitions&#39;%2C%20%7B%20a%3A%20%7B%20default%3A%2010%20%7D%2C%20b%3A%20%7B%20ko%3A%20&#39;def&#39;%20%7D%20%7D%2C%20%7B%7D%2C%20%7B%20a%3A%2010%20%7D)%3B%0D%0A%0D%0Atest(&#39;Use%20default%20when%20value%20is%20not%20valid%20&#39;%2C%20%7B%20a%3A%20%7B%20default%3A%2010%2C%20validation%3A%20()%20%3D%3E%20false%20%7D%20%7D%2C%20%7B%20a%3A%201%20%7D%2C%20%7B%20a%3A%2010%20%7D)%3B%0D%0Atest(&#39;Use%20value%20when%20it%20is%20valid%20%20%20%20%20%20%20%20%20%20&#39;%2C%20%7B%20a%3A%20%7B%20default%3A%2010%2C%20validation%3A%20()%20%3D%3E%20true%20%20%7D%20%7D%2C%20%7B%20a%3A%201%20%7D%2C%20%7B%20a%3A%201%20%7D)%3B%0D%0Atest(&#39;Use%20converted%20value%20when%20it%20is%20valid&#39;%2C%20%7B%20a%3A%20%7B%20convert%3A%20(a%3A%20number%2C%20k%3A%20string)%20%3D%3E%20%60%24%7Bk%7D%3D%24%7Ba%20*%202%7D%60%2C%20validation%3A%20()%20%3D%3E%20true%20%7D%20%7D%2C%20%7B%20a%3A%201%20%7D%2C%20%7B%20a%3A%20&#39;a%3D2&#39;%20%7D)%3B%0D%0A%0D%0Afunction%20test%3CD%3E(message%3A%20string%2C%20definitions%3A%20D%2C%20query%3A%20Query%2C%20expected%3A%20SelectorResult%3CD%3E)%20%7B%0D%0A%20%20const%20actual%20%3D%20selector(definitions%2C%20query)%3B%0D%0A%20%20const%20args%20%3D%20%5Bexpected%2C%20actual%5D.map(x%20%3D%3E%20JSON.stringify(x))%3B%0D%0A%20%20if%20(args%5B0%5D%20%3D%3D%3D%20args%5B1%5D)%20%7B%0D%0A%20%20%20%20console.log(%60%25c%20%E2%9C%94%EF%B8%8F%20%24%7Bmessage%7D%60%2C%20&#39;color%3A%20Green%3B%20background%3A%20%23EFE%3B&#39;)%3B%0D%0A%20%20%7D%20else%20%7B%0D%0A%20%20%20%20console.log(%60%25c%20%E2%9D%8C%20%24%7Bmessage%7D%20KO%20%3A%20Expected%20%24%7Bargs%5B0%5D%7D%2C%20Received%20%24%7Bargs%5B1%5D%7D%60%2C%20&#39;color%3A%20Red%3B%20background%3A%20%23FEE%3B&#39;)%3B%0D%0A%20%20%7D%0D%0A%7D%0D%0A\" rel=\"nofollow noreferrer\">here</a> with every \"strict\" compiler options like <code>--strictNullChecks</code>.</p>\n"}], "owner": {"reputation": 138, "user_id": 1768520, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001049586203/picture?type=large", "display_name": "David Costa", "link": "https://stackoverflow.com/users/1768520/david-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1557058190, "creation_date": 1556731660, "last_edit_date": 1556803271, "question_id": 55940132, "link": "https://stackoverflow.com/questions/55940132/convert-the-function-to-use-typescript-types", "title": "Convert the function to use typescript types", "body": "<p>I have of following function:</p>\n\n<pre><code>const selector = (definitions, query = {}) =&gt; {\n  const select = {};\n\n  Object.keys(definitions).forEach((key) =&gt; {\n    if (typeof query[key] !== 'undefined') {\n      if (definitions[key].validation(query[key])) {\n        if (typeof definitions[key].convert !== 'undefined') {\n          select[key] = definitions[key].convert(query[key], key);\n        } else {\n          select[key] = query[key];\n        }\n      } else if (typeof definitions[key].default !== 'undefined') {\n        select[key] = definitions[key].default;\n      }\n    } else if (typeof definitions[key].default !== 'undefined') {\n      select[key] = definitions[key].default;\n    }\n  });\n\n  return select;\n};\n</code></pre>\n\n<p>This typescript is report me that a need to type correcty <code>definitions</code> and <code>query</code> but i really don't know how.</p>\n\n<p>Error Message.\n<code>Element implicitly has an 'any' type because type '{}' has no index signature.</code></p>\n\n<p>How can I do it?</p>\n\n<hr>\n\n<p>Usage:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const config = {\n  name: {\n    validation: val =&gt; val.length &gt;= 3\n  },\n  page: {\n    validation: val =&gt; Number.isInteger(parseInt(val, 10)),\n    default: 1,\n  },\n  limit: {\n    default: 10,\n  }\n}\n\nconst myQuery = {\n  name: 'da',\n  page: 'no-unber',\n  another: '1',\n}\nselect(config, myQuery)\n</code></pre>\n\n<p>Test</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const expected = JSON.stringify({\n  page: 1,\n  limit: 10,\n})\nconst output = JSON.stringify(selector(config, myQuery))\n\nif (expected !== output) {\n  throw new Error(`The output is wrong.\\nExpected: ${expected}\\nOutput: ${output}`)\n}\n</code></pre>\n\n<p>Case of usage: <a href=\"https://jsbin.com/gatojir/edit?js,console\" rel=\"nofollow noreferrer\">https://jsbin.com/gatojir/edit?js,console</a></p>\n\n<p>Note: <code>validation</code> is required, but <code>convert</code>, and <code>default</code> are optional parameters.</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 5, "creation_date": 1556732326, "post_id": 55940063, "comment_id": 98533711, "body": "Because CommonJS (Node&#39;s <code>require()</code> and <code>exports</code>) is not compatible with ES6 default exports. The solution to down-compile but still allow ES6 spec compliant module loaders to work is to emit <code>__esModule</code> on the exported value. <a href=\"https://babeljs.io/docs/en/babel-plugin-transform-runtime#useesmodules\" rel=\"nofollow noreferrer\">Babel does the same thing</a>. IMO just avoid default exports, they aren&#39;t very useful and create problems."}], "answers": [{"tags": [], "owner": {"reputation": 663, "user_id": 1179747, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bbd295433394919e8dda89456a6bc983?s=128&d=identicon&r=PG", "display_name": "Simon Chan", "link": "https://stackoverflow.com/users/1179747/simon-chan"}, "is_accepted": true, "score": 8, "last_activity_date": 1556767233, "creation_date": 1556767233, "answer_id": 55945250, "question_id": 55940063, "link": "https://stackoverflow.com/questions/55940063/why-does-using-typescript-class-in-javascript-require-default/55945250#55945250", "title": "Why does using TypeScript class in JavaScript require `.default`?", "body": "<h3>Background:</h3>\n\n<p>The ECMAScript Language Specification <a href=\"https://www.ecma-international.org/ecma-262/9.0/index.html#sec-exports-static-semantics-exportednames\" rel=\"noreferrer\">specified</a> that the exported name of <code>export default</code> is just <code>\"default\"</code>. So you can think about it as an ordinary export named <code>\"default\"</code>.</p>\n\n<p>Compiling a ES6 module to CommonJS only has a <em>de facto</em> standard, as the ECMAScript Language Specification never mentioned about it. Currently transpilers (TypeScript and Babel) just put all exports to <code>module.exports</code>, where default export becomes not special anymore.</p>\n\n<p>Only when the consumers also understand the above \"standard\" (e.g. TypeScript, Babel and Webpack), they will transform <code>import ChildClass from 'my-package</code> statements to <code>const ChildClass = require('my-package').default</code> for you. Of course, Node.js deals with CommonJS and ES6 modules separately, and not doing this.</p>\n\n<p>(Actually it's more complicated because Babel mixed <code>import DefaultExport from 'some-package'</code> and <code>import * as AllExports from 'some-package</code>, modern module consumers has to try both)</p>\n\n<hr>\n\n<h3>Solutions:</h3>\n\n<p>TypeScript has a <a href=\"https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require\" rel=\"noreferrer\">special syntax</a> <code>export =</code> to work with tranditional CommonJS consumers (It's not in JavaScript). If you change your <code>export default class ChildClass...</code> to <code>export = class ChildClass...</code>, it should work as you expected.</p>\n"}], "owner": {"reputation": 7796, "user_id": 633267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2039c76871a343a2acd51950fe4c36d6?s=128&d=identicon&r=PG", "display_name": "Tod", "link": "https://stackoverflow.com/users/633267/tod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1625, "favorite_count": 2, "accepted_answer_id": 55945250, "answer_count": 1, "score": 9, "last_activity_date": 1556767233, "creation_date": 1556731355, "question_id": 55940063, "link": "https://stackoverflow.com/questions/55940063/why-does-using-typescript-class-in-javascript-require-default", "title": "Why does using TypeScript class in JavaScript require `.default`?", "body": "<p>I have a TypeScript class that's part of an npm package. For maintenance, I broke up the class into multiple classes, and I built up the ultimate exported class through inheritance. I don't think this matters to my question, but I figure it's better to disclose this bit of information. I defined the class in <code>ChildClass.ts</code> like this:  </p>\n\n<pre><code>export default ChildClass extends ParentClass{\u2026}\n</code></pre>\n\n<p>Tsc has an <code>outDir</code> of \"build.\"<br>\nThe <code>package.json</code> file has a property <code>\"main\": \"build/ChildClass.js\"</code></p>\n\n<p>Using both <code>npm link</code> and <code>npm pack</code> and I can deploy the package and consume it with no problem in a TypeScript demo package. However, if I try to use the package in a JavaScript demo,  </p>\n\n<pre><code>const ChildClass = require('my-package')\nconst childClass = new ChildClass()\n</code></pre>\n\n<p>I get the error<br>\n <code>Cannot use 'new' with an expression whose type lacks a call or construct signature.ts(2351)</code></p>\n\n<p>If I change the <code>new</code> statement by adding <code>.default</code> like so:  </p>\n\n<p><code>const childClass = new ChildClass.default()</code>  </p>\n\n<p>It works. I figured this out by looking at the compiled Javascript. Having to use <code>.default</code>  struck me as an unreasonable thing to expect (the hypothetical) JavaScript consumers of my package to know. I also discovered that if I avoided <code>export default</code>  and just used <code>export</code> then the package works more predictably, so that's what I did. Now I can use  </p>\n\n<pre><code>const {ChildClass} = require('my-package')\nconst childClass = new ChildClass()\n</code></pre>\n\n<p>and the similar syntax </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import {ChildClass} from 'my-package'\nconst childClass = new ChildClass()\n</code></pre>\n\n<p>in typescript. </p>\n\n<p>Still, I would like to know what this magic <code>.default</code> property is and why I need it. </p>\n\n<p>Also, all other references I found to this error didn't seem relevant to what I was seeing; I thought documenting this might help someone else that runs across a similar error. </p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 571, "user_id": 9053225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e02cf834b2d31955b0824a3eb33db2?s=128&d=identicon&r=PG", "display_name": "RWRkeSBZ", "link": "https://stackoverflow.com/users/9053225/rwrkesbz"}, "edited": false, "score": 0, "creation_date": 1556731253, "post_id": 55939886, "comment_id": 98533188, "body": "<a href=\"https://angular.io/api/core/HostListener\" rel=\"nofollow noreferrer\">Use the <code>@HostListener</code> decorator</a>."}, {"owner": {"reputation": 25, "user_id": 8230387, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QAMM1KLrWxY/AAAAAAAAAAI/AAAAAAAAATI/CWFP1STzsPY/photo.jpg?sz=128", "display_name": "Amritraj", "link": "https://stackoverflow.com/users/8230387/amritraj"}, "reply_to_user": {"reputation": 571, "user_id": 9053225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e02cf834b2d31955b0824a3eb33db2?s=128&d=identicon&r=PG", "display_name": "RWRkeSBZ", "link": "https://stackoverflow.com/users/9053225/rwrkesbz"}, "edited": false, "score": 0, "creation_date": 1556732072, "post_id": 55939886, "comment_id": 98533584, "body": "Thanks for you response, what if I want this event to be handled outside of angular? How would I get access to the ``$event` object?"}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1556732777, "post_id": 55939886, "comment_id": 98533936, "body": "You should provide 2 concrete examples as you have 2 questions. 1. Provide a concrete example of the data provider of this array of <code>T[]</code>. Where is coming from? Another .js library? An API? How are you interfacing with this API or library? 2) What is subscribing to your application? An API, something that listens to a windows event? Be more specific."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1556732809, "post_id": 55939886, "comment_id": 98533959, "body": "You use custom events. <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/Guide/Events/&hellip;</a>"}, {"owner": {"reputation": 25, "user_id": 8230387, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QAMM1KLrWxY/AAAAAAAAAAI/AAAAAAAAATI/CWFP1STzsPY/photo.jpg?sz=128", "display_name": "Amritraj", "link": "https://stackoverflow.com/users/8230387/amritraj"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1556820904, "post_id": 55939886, "comment_id": 98567780, "body": "Thanks @cgTag that was helpful. I knew about this but I just wanted to see if there was an angular way of bubbling events outside angular components. But, I guess not."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1556822120, "post_id": 55939886, "comment_id": 98568306, "body": "If you&#39;re looking for the Angular way, then you should read up on Angular Elements which fellows the web component standards. <a href=\"https://angular.io/guide/elements\" rel=\"nofollow noreferrer\">angular.io/guide/elements</a>"}], "answers": [{"tags": [], "owner": {"reputation": 310, "user_id": 2193681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8442431dcd8327c80439d432a3a8e8dc?s=128&d=identicon&r=PG", "display_name": "Ricardo Fornes", "link": "https://stackoverflow.com/users/2193681/ricardo-fornes"}, "is_accepted": false, "score": 0, "last_activity_date": 1556733979, "creation_date": 1556733979, "answer_id": 55940618, "question_id": 55939886, "link": "https://stackoverflow.com/questions/55939886/how-do-i-get-inputs-and-raise-events-for-the-outside-world-in-angular/55940618#55940618", "title": "How do I get inputs and raise events for the outside world in Angular?", "body": "<p>Your question requires an explanation of a couple of concepts from Angular: Component Interaction and content projection.</p>\n\n<p>I've put together an example that combines both to meet what you described in your question:</p>\n\n<pre><code>@Component({\n  selector: 'app-child',\n  template: `\n  &lt;ul&gt;\n      &lt;li *ngFor=\"let obj of arrayOfObjects\"&gt; {{ obj.id }} &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;ng-content&gt;&lt;/ng-content&gt;\n  `,\n})\nclass AppChildComponent {\n    @Input() arrayOfObjects: object[];\n}\n\n@Component({\n  selector: 'app-grandchild',\n  template: `Am the grandchild!`,\n})\nclass AppGrandChildComponent implements OnInit {\n    @Output() somethingHappened = new EventEmitter&lt;string&gt;();\n\n  ngOnInit(){\n    this.somethingHappened.emit('yellow');\n  }\n}\n\n\n@Component({\n  selector: 'app-root',\n  template: `\n    &lt;app-child [arrayOfObjects]=\"[\n      {id: '123'},\n      {id: '456'}\n    ]\"&gt;\n        &lt;app-grandchild \n          (somethingHappened)=\"handleSomething($event)\"&gt;\n        &lt;/app-grandchild&gt;\n    &lt;/app-child&gt;\n  `,\n})\nclass AppComponent {\n    handleSomething(event){\n    document.body.style.backgroundColor = event;\n  }\n}\n\n</code></pre>\n\n<p>Full example here: <a href=\"https://jsfiddle.net/c945j08v/1/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/c945j08v/1/</a></p>\n\n<p>I strongly recommend you reading more on Angular Docs &amp; Blog.</p>\n\n<ul>\n<li><a href=\"https://angular.io/guide/component-interaction\" rel=\"nofollow noreferrer\">https://angular.io/guide/component-interaction</a></li>\n<li><a href=\"https://blog.angular-university.io/angular-ng-content/\" rel=\"nofollow noreferrer\">https://blog.angular-university.io/angular-ng-content/</a></li>\n</ul>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 25, "user_id": 8230387, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QAMM1KLrWxY/AAAAAAAAAAI/AAAAAAAAATI/CWFP1STzsPY/photo.jpg?sz=128", "display_name": "Amritraj", "link": "https://stackoverflow.com/users/8230387/amritraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556733979, "creation_date": 1556730471, "last_edit_date": 1556732684, "question_id": 55939886, "link": "https://stackoverflow.com/questions/55939886/how-do-i-get-inputs-and-raise-events-for-the-outside-world-in-angular", "title": "How do I get inputs and raise events for the outside world in Angular?", "body": "<p>I would like to know how can one get inputs from the outside world and raise custom events that bubbles up to the outside world (i.e. outside of angular components). I understand I cannot get <code>@Input()</code> in the root component. Then how can I do the following:</p>\n\n<ol>\n<li>Pass an array of object (say <code>T[]</code>) to my Angular components <code>&lt;app-root&gt;</code> from outside of angular.</li>\n<li>raise an event from <code>&lt;app-grandchild&gt;</code> such that the event bubbles out of angular components and hits the DOM tree root or <code>&lt;body&gt;</code>. </li>\n</ol>\n\n<p>Assume the following DOM hierarchy:</p>\n\n<pre><code>&lt;body&gt;\n  &lt;app-root&gt;\n    &lt;app-child&gt;\n      &lt;app-grandchild&gt;&lt;/app-grandchild&gt;\n    &lt;/app-child&gt;\n  &lt;/app-root&gt;\n&lt;/body&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular7", "ng-bootstrap", "ng-template"], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 1126833, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/60e1389743f31eee471d711d37ce53a1?s=128&d=identicon&r=PG", "display_name": "Sourav", "link": "https://stackoverflow.com/users/1126833/sourav"}, "edited": false, "score": 0, "creation_date": 1556739701, "post_id": 55939978, "comment_id": 98536746, "body": "m1 is a template, ModalComponent is a generic component which has ng-content in its body to hold that template. I need to load the modal with the HTML content inside the template. Hence what you suggest , wont give me the HTML content."}], "tags": [], "owner": {"reputation": 1818, "user_id": 1035797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2f9e8840a1ad93e9738e45b15fbe056d?s=128&d=identicon&r=PG&f=1", "display_name": "Kylos", "link": "https://stackoverflow.com/users/1035797/kylos"}, "is_accepted": false, "score": 0, "last_activity_date": 1556730956, "creation_date": 1556730956, "answer_id": 55939978, "question_id": 55939830, "link": "https://stackoverflow.com/questions/55939830/in-angular-ng-bootstrap-modal-with-template-close-and-dismiss-buttons-not-worki/55939978#55939978", "title": "In Angular ng-bootstrap modal with template, close and dismiss buttons not working", "body": "<p>Replace <code>this.m1</code> with <code>ModalComponent</code> in your call to <code>openModal</code>.</p>\n\n<p>According to the <a href=\"https://ng-bootstrap.github.io/#/components/modal/api\" rel=\"nofollow noreferrer\">API documentation</a>, NgbActiveModal only works when you pass in a component instead of the template.</p>\n\n<blockquote>\n  <p>If you pass a component type as content, then instances of those components can be injected with an instance of the NgbActiveModal class. You can then use NgbActiveModal methods to close / dismiss modals from \"inside\" of your component.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 10176648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7b8c8b985fe21b2abceea91cb0224e?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan Jangid", "link": "https://stackoverflow.com/users/10176648/pawan-jangid"}, "edited": false, "score": 0, "creation_date": 1556733915, "post_id": 55940546, "comment_id": 98534480, "body": "@Sourav: I have created global configuration with let-c and let-d, can you check the solution"}, {"owner": {"reputation": 339, "user_id": 1126833, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/60e1389743f31eee471d711d37ce53a1?s=128&d=identicon&r=PG", "display_name": "Sourav", "link": "https://stackoverflow.com/users/1126833/sourav"}, "edited": false, "score": 1, "creation_date": 1556739815, "post_id": 55940546, "comment_id": 98536799, "body": "For anyone interested , here is an example with @Pawan&#39;s solution :  <a href=\"https://stackblitz.com/edit/angular-6xzhq8\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-6xzhq8</a>"}], "tags": [], "owner": {"reputation": 145, "user_id": 10176648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7b8c8b985fe21b2abceea91cb0224e?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan Jangid", "link": "https://stackoverflow.com/users/10176648/pawan-jangid"}, "is_accepted": true, "score": 3, "last_activity_date": 1556733650, "creation_date": 1556733650, "answer_id": 55940546, "question_id": 55939830, "link": "https://stackoverflow.com/questions/55939830/in-angular-ng-bootstrap-modal-with-template-close-and-dismiss-buttons-not-worki/55940546#55940546", "title": "In Angular ng-bootstrap modal with template, close and dismiss buttons not working", "body": "<p>Try this</p>\n\n<p>I have created Global configuration of modals with let-c=\"close\" and let-d=\"dismiss\"</p>\n\n\n\n<p>app.component.html</p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n&lt;p&gt;Welcome to {{ name }}&lt;/p&gt;\n&lt;button type=\"button\" (click)=\"openModal()\"&gt;Click to open Modal&lt;/button&gt;\n\n&lt;!-- Example 1: Passing TemplateRef as custom component --&gt;\n  &lt;ng-template #modal1 let-c=\"close\" let-d=\"dismiss\"&gt;\n    &lt;app-modal [title]=\"'Title'\" [c]=\"c\" [d]=\"d\"&gt;\n      &lt;img src=\"https://angular.io/assets/images/logos/angular/angular.png\" height=\"100px\" width=\"100px\"&gt;\n    &lt;/app-modal&gt;\n  &lt;/ng-template&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>modal.component.html</p>\n\n<pre><code>&lt;div class=\"modal-header\"&gt;\n    &lt;h4 class=\"modal-title\"&gt;{{title}}&lt;/h4&gt;\n    &lt;button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\"&gt;\n        &lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;\n    &lt;/button&gt;\n&lt;/div&gt;\n&lt;div class=\"modal-body\"&gt;\n    &lt;ng-content&gt;&lt;/ng-content&gt;\n&lt;/div&gt;\n&lt;div class=\"modal-footer\"&gt;\n    &lt;button type=\"button\" class=\"btn btn-secondary\" (click)=\"c('Close click')\"&gt;Cancel&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>modal.component.ts</p>\n\n<pre><code>import { Component, Input, OnInit } from '@angular/core';\n\nimport {NgbModal, NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\n\n\n@Component({\n  selector: 'app-modal',\n  templateUrl: './modal.component.html',\n  styleUrls: ['./modal.component.css']\n})\nexport class ModalComponent implements OnInit {\n\n  @Input() title = `Information`;\n  @Input() c;\n  @Input() d;\n\n  constructor(\n    public activeModal: NgbActiveModal\n  ) {}\n\n  ngOnInit() {\n  }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 1126833, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/60e1389743f31eee471d711d37ce53a1?s=128&d=identicon&r=PG", "display_name": "Sourav", "link": "https://stackoverflow.com/users/1126833/sourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1987, "favorite_count": 0, "accepted_answer_id": 55940546, "answer_count": 2, "score": 3, "last_activity_date": 1556733650, "creation_date": 1556730134, "last_edit_date": 1556731534, "question_id": 55939830, "link": "https://stackoverflow.com/questions/55939830/in-angular-ng-bootstrap-modal-with-template-close-and-dismiss-buttons-not-worki", "title": "In Angular ng-bootstrap modal with template, close and dismiss buttons not working", "body": "<p>I am new to angular and I am learning by building.</p>\n\n<p>I have a requirement to open a modal programmatically with varying HTML Content.</p>\n\n<p>I have referred the first stackblitz <a href=\"https://stackblitz.com/edit/angular-v6amvy-pttrng?file=app/app.component.html\" rel=\"nofollow noreferrer\">example</a> illustrated in this <a href=\"https://github.com/ng-bootstrap/ng-bootstrap/issues/2476\" rel=\"nofollow noreferrer\">issue</a> and created a ModalComponent (with selector called <code>&lt;app-modal&gt;</code>), so that I can create modals anywhere in my app.</p>\n\n<p>Now, I use this component  with varying html content in a <code>&lt;ng-template&gt;</code> in my page. </p>\n\n<p>The modal opens fine on clicking the button in the main page, but the close and dismiss buttons in the modal do not work. </p>\n\n<p>I have tried to make a minimal example here : <a href=\"https://stackblitz.com/edit/angular-j1u4fo\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-j1u4fo</a></p>\n\n<p>Any help will be appreciated. Thanks.</p>\n"}, {"tags": ["angular", "typescript", "asp.net-core", "rxjs", "observable"], "comments": [{"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1556729294, "post_id": 55939574, "comment_id": 98532418, "body": "The main issue with <code>const result = this.service.fireAndForget(junk);</code> is that it&#39;s async. <code>if(result &gt; 0) doStuff(); else doOtherStuff();</code> will effectively always execute before the previous line is complete. This is usually why the caller (component usually) would <code>subscribe()</code> to indicate the Observable&lt;T&gt; from the service has <code>emitted&#47;failed&#47;completed</code>. Also returning from within <code>subscribe()</code> will not actually return anything, instead you&#39;d use RxJS operators such as <code>map()</code> to project the result to whatever type/value you&#39;d need."}, {"owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1556736414, "post_id": 55939574, "comment_id": 98535454, "body": "@AlexanderStaroselsky I might be confused/confusing so let me reiterate what I was going for. In the service, the async operation that I subscribe will be completed when <i>yey</i> is passed to the handler. That <i>yey</i> will be whatever I put in <i>return Ok()</i> on the backend, e.g. the number 1337. I notice that <i>yey</i> is equal to 1337, after its realization and then, I want to handle it by emitting it up to the component. Do I need to return type <i>Observable&lt;number&gt;</i> from <i>fireAndForget</i>? Can I then use <i>fireAndForget(junk).map(...)</i> in the component?"}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1556737080, "post_id": 55939574, "comment_id": 98535745, "body": "I&#39;d say it&#39;s common practice to yes return a type of <code>Observable&lt;whatever&gt;</code> from the service using pipeable operators such as <code>map()</code>. I&#39;d say you more rarely see <code>subscribe()</code> used in the service method. This gives the control to the caller, such as a component. This is a matter of opinion though."}], "answers": [{"comments": [{"owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "edited": false, "score": 0, "creation_date": 1556745117, "post_id": 55941296, "comment_id": 98538717, "body": "I don&#39;t see where the number is issued to the subscriber in the second example. Please elaborate."}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1556762604, "post_id": 55941296, "comment_id": 98542347, "body": "The return type for the service method in both option 1 and option 2 would be Observable&lt;number&gt;, not just number."}, {"owner": {"reputation": 533, "user_id": 1027445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxAEv.jpg?s=128&g=1", "display_name": "Praveen Kumar", "link": "https://stackoverflow.com/users/1027445/praveen-kumar"}, "reply_to_user": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "edited": false, "score": 0, "creation_date": 1556810547, "post_id": 55941296, "comment_id": 98562981, "body": "@DonkeyBanana, as per the code sample provided, you are trying to returning -1 if there is an exception. And then check if it is -1, the run something. Rather, you can put the method execution in the catch block itself. In Option 2, doStuff() will be executed when the http method does not return any exception and doOtherStuff() will be executed if the http method threw an exception."}], "tags": [], "owner": {"reputation": 533, "user_id": 1027445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxAEv.jpg?s=128&g=1", "display_name": "Praveen Kumar", "link": "https://stackoverflow.com/users/1027445/praveen-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1556737416, "creation_date": 1556737416, "answer_id": 55941296, "question_id": 55939574, "link": "https://stackoverflow.com/questions/55939574/suitable-pattern-and-type-of-the-object-returned-in-observablet-after-a-post-o/55941296#55941296", "title": "Suitable pattern and type of the object returned in Observable&lt;T&gt; after a post operation", "body": "<p><strong>Option 1:</strong></p>\n\n<p>If you are not interested in the return type of the post method, then you can return a number to ensure the return type is same:</p>\n\n<pre><code>fireAndForget(junk: Junk) : number {\n  ...\n  this.http.post&lt;number&gt;(url, body)\n    .pipe(catchError(this.handleError))\n    .map(yey =&gt; return 1);\n}\n</code></pre>\n\n<p>And in the component you can subscribe to the method call, like this:</p>\n\n<pre><code>const junk: Junk = { ... };\nconst result = this.service.fireAndForget(junk)\n               .subscribe(yeh=&gt;doStuff(),neh=&gt;doOtherStuff());\n</code></pre>\n\n<p><strong>Option 2:</strong></p>\n\n<p>If you do not care about the return type and want to differentiate if the request was processed successfully or not. The this following approach will work:</p>\n\n<pre><code>fireAndForget(junk: Junk) : number {\n  ...\n  this.http.post&lt;number&gt;(url, body)\n    .pipe(catchError(this.handleError))\n}\n</code></pre>\n\n<p>in your component:</p>\n\n<pre><code>const junk: Junk = { ... };\nconst result = this.service.fireAndForget(junk)\n               .subscribe(yeh=&gt;doStuff(),neh=&gt;doOtherStuff());\n</code></pre>\n"}], "owner": {"reputation": 2204, "user_id": 8744999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5a358087b8a9e7f9ace69d7af8b74700?s=128&d=identicon&r=PG", "display_name": "DonkeyBanana", "link": "https://stackoverflow.com/users/8744999/donkeybanana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 55941296, "answer_count": 1, "score": 1, "last_activity_date": 1556737416, "creation_date": 1556728952, "question_id": 55939574, "link": "https://stackoverflow.com/questions/55939574/suitable-pattern-and-type-of-the-object-returned-in-observablet-after-a-post-o", "title": "Suitable pattern and type of the object returned in Observable&lt;T&gt; after a post operation", "body": "<p>According to the <a href=\"https://angular.io/guide/http#making-a-post-request\" rel=\"nofollow noreferrer\">Angular guide</a>, I'm supposed to returned the posted object. It makes sense in the example because we want to work with the entity that has been saved to the DB.</p>\n\n<p>In my particular case, I'm not interested in the objected that I post. In fact, the object is a wrapper consisting of a bunch of unrelated junk. At the backend, there's a series of <em>void</em> invocations starting up by the post. At the moment, I do subscribe in the service and it's a fire-and-forget based logic.</p>\n\n<p>In an attempt to improve the quality, I'd like to tell the component that the requested operation went well by a code, like this. I control the endpoint of the API so I can produce a number or an object there.</p>\n\n<pre><code>fireAndForget(junk: Junk) : number {\n  ...\n  this.http.post&lt;number&gt;(url, body)\n    .pipe(catchError(this.handleError))\n    .subscribe(yey =&gt; return yey, neh =&gt; return -1);\n}\n</code></pre>\n\n<p>In the component, I hope to be able to get the result and react to it accordingly like so.</p>\n\n<pre><code>const junk: Junk = { ... };\nconst result = this.service.fireAndForget(junk);\nif(result &gt; 0) doStuff(); else doOtherStuff();\n</code></pre>\n\n<p>However, I can't shake the sensation that I'm breaking a pattern or tamper with best-practice here. I have a hunch that I should return an observable (still of type <em>number</em> not <em>Junk</em> corresponding to <em>Hero[]</em> in the guide). The component needs not know the stored object. Just a tiny bit of info on how it went.</p>\n\n<p>Provided the above, is there a recommended, widely applied, type for passing the outcome that I'm not familiar with?</p>\n"}, {"tags": ["typescript", "transpiler", "typescript3.0"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1556728981, "post_id": 55939524, "comment_id": 98532287, "body": "No there isn&#39;t, unless you are willing to modify the compiler.. Is there a reason you want to change this?"}, {"owner": {"reputation": 181, "user_id": 6288002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409bf59e627fc204cdbc4d22d4bf3b7e?s=128&d=identicon&r=PG", "display_name": "Mashaal", "link": "https://stackoverflow.com/users/6288002/mashaal"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1556729160, "post_id": 55939524, "comment_id": 98532360, "body": "I added my use case in the body. But ultimately: I want to be able to load a copy of a script with potentially the same files, but an upgraded version, of the script in the same browser window. The old script would essentially shut itself down, but the new script wouldn&#39;t have any variable or namespace collisions."}, {"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1556729251, "post_id": 55939524, "comment_id": 98532398, "body": "Isn&#39;t this the problem that <a href=\"https://webpack.js.org/concepts/hot-module-replacement/\" rel=\"nofollow noreferrer\">hot module replacement</a> solved?"}, {"owner": {"reputation": 181, "user_id": 6288002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409bf59e627fc204cdbc4d22d4bf3b7e?s=128&d=identicon&r=PG", "display_name": "Mashaal", "link": "https://stackoverflow.com/users/6288002/mashaal"}, "reply_to_user": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1556729596, "post_id": 55939524, "comment_id": 98532537, "body": "@spender for a dev environment, yes. I&#39;m looking to do this in a production environment to push updates to software without any special web servers etc., and without reloading the page. May look under the hood of HMR to see if something from the approach can be used in my case. I&#39;ve established that dynamic unloading of javascript scripts is not possible, so need to be able to add a script without collision and hopefully not make my dev environment/setup extremely complicated."}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1556731470, "post_id": 55939524, "comment_id": 98533299, "body": "But <code>Core_1</code> is just a local variable... this seems like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}], "owner": {"reputation": 181, "user_id": 6288002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409bf59e627fc204cdbc4d22d4bf3b7e?s=128&d=identicon&r=PG", "display_name": "Mashaal", "link": "https://stackoverflow.com/users/6288002/mashaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556729128, "creation_date": 1556728705, "last_edit_date": 1556729128, "question_id": 55939524, "link": "https://stackoverflow.com/questions/55939524/can-i-force-the-suffix-used-by-the-typescript-compiler-for-a-class-import", "title": "Can I force the suffix used by the Typescript Compiler for a class import", "body": "<p>If we have a typescript import like so:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import {Core} from \"./libs/Core\";\n</code></pre>\n\n\n\n<p>which transpiles to this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Core_1 = require(\"./libs/Core\");\n</code></pre>\n\n\n\n<p>is there a way I can force the compiler to use a different suffix than \"_1\" for the \"Core_1\" variable?</p>\n\n<p>What I'd like to be able to do is have the compiler use a random number instead of 1 (which could be 7) like so:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Core_7 = require(\"./libs/Core\");\n</code></pre>\n\n\n\n<p>In my use case I want to be able to load a copy of a script with potentially the same files, but an upgraded version, of the script in the same browser window. The old script would essentially shut itself down, but the new script wouldn't have any variable or namespace collisions.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 7665, "user_id": 894532, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/epFXH.jpg?s=128&g=1", "display_name": "Maihan Nijat", "link": "https://stackoverflow.com/users/894532/maihan-nijat"}, "edited": false, "score": 0, "creation_date": 1556727814, "post_id": 55939278, "comment_id": 98531778, "body": "Have spinner in place to show the page is keep loading but does not display until the call returns."}, {"owner": {"reputation": 461, "user_id": 3117136, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e83c5ae591c3ab4c41b94834eb5776c1?s=128&d=identicon&r=PG&f=1", "display_name": "RajGan", "link": "https://stackoverflow.com/users/3117136/rajgan"}, "reply_to_user": {"reputation": 7665, "user_id": 894532, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/epFXH.jpg?s=128&g=1", "display_name": "Maihan Nijat", "link": "https://stackoverflow.com/users/894532/maihan-nijat"}, "edited": false, "score": 0, "creation_date": 1556788932, "post_id": 55939278, "comment_id": 98551113, "body": "will try cheers"}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 3117136, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e83c5ae591c3ab4c41b94834eb5776c1?s=128&d=identicon&r=PG&f=1", "display_name": "RajGan", "link": "https://stackoverflow.com/users/3117136/rajgan"}, "edited": false, "score": 1, "creation_date": 1556789059, "post_id": 55939350, "comment_id": 98551178, "body": "good option. @Maihan Nijat said I will try to add spinner and see. I am also going try using async observable. Not sure if it will work.."}], "tags": [], "owner": {"reputation": 1573, "user_id": 6038796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tUBN.png?s=128&g=1", "display_name": "DaggeJ", "link": "https://stackoverflow.com/users/6038796/daggej"}, "is_accepted": false, "score": 0, "last_activity_date": 1556727819, "creation_date": 1556727819, "answer_id": 55939350, "question_id": 55939278, "link": "https://stackoverflow.com/questions/55939278/angular-7-populate-site-style-based-on-service-call/55939350#55939350", "title": "Angular 7 populate site style based on service call", "body": "<p>I would either provide a default <code>brand</code> in <code>app.component.ts</code>or use a ngIf;else template in the html template;</p>\n\n<pre><code>&lt;div *ngIf=\"brand?.brandStyle;else not_loaded\"&gt;\n    content here ...\n&lt;/div&gt;\n\n&lt;ng-template #not_loaded&gt;Something to display when brand is not loaded...&lt;/ng-template&gt;\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 3117136, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e83c5ae591c3ab4c41b94834eb5776c1?s=128&d=identicon&r=PG&f=1", "display_name": "RajGan", "link": "https://stackoverflow.com/users/3117136/rajgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556732264, "creation_date": 1556727396, "last_edit_date": 1556732264, "question_id": 55939278, "link": "https://stackoverflow.com/questions/55939278/angular-7-populate-site-style-based-on-service-call", "title": "Angular 7 populate site style based on service call", "body": "<p>Would like to know the best approach to handle </p>\n\n<p>I have a requirement where my site style like color, font are fetched from Config [Service call]</p>\n\n<p>What I have done is in app.component.ts in OnngInt method I am doing a service call and passing the result as an input field to child module.</p>\n\n<pre><code>app.component.ts\n\n brand: Brand;\n\nngOnInit(): void {\n\n    this.service.getBrandData().subscribe((response) =&gt; this.brand = response);\n\n\n  }\n\nexport class Brand {\n  brandId: number;\n  brandName: string;\n  brandCode: string = null;\n  brandStyle: BrandStyles;\n}\n\nexport class BrandStyles {\n  brandMainColor: string;\n  brandFont: string;\n}\n</code></pre>\n\n<p>And in appcomponent.html, I am passing brand info as input field</p>\n\n<pre><code>&lt;header [brand]=\"brand\"&gt;&lt;/header&gt;\n</code></pre>\n\n<p>And in Header.component.html</p>\n\n<pre><code>&lt;div [style.backgroundColor]=\"brand.brandStyle.brandMainColor\"\n  style=\"margin-bottom: 30px\"&gt;\nTest site\n&lt;/div&gt;\n</code></pre>\n\n<p>Issue: I see if there is a delay in getting my brand info via service how do we handle.</p>\n\n<p>Any advice on how to handle these scenarios </p>\n"}, {"tags": ["typescript", "typescript2.0"], "comments": [{"owner": {"reputation": 5830, "user_id": 3776927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cb2cca9626c6d445bd05297be86251?s=128&d=identicon&r=PG&f=1", "display_name": "derpirscher", "link": "https://stackoverflow.com/users/3776927/derpirscher"}, "edited": false, "score": 1, "creation_date": 1556729287, "post_id": 55939224, "comment_id": 98532414, "body": "Typescript itself does nothing like that. Most likely it&#39;s your ide or some editor plugin. Or you (or your ide) started tsc with the watch parameter"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8291684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjzJH.png?s=128&g=1", "display_name": "OPV", "link": "https://stackoverflow.com/users/8291684/opv"}, "edited": false, "score": 0, "creation_date": 1556729268, "post_id": 55939623, "comment_id": 98532402, "body": "It is another option <code>compileOnSave</code>. In another project  I have <code>&quot;compileOnSave&quot;: true</code>, but it does not create js files in direcrtories, that I need"}, {"owner": {"reputation": 422, "user_id": 6037139, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155968228550094/picture?type=large", "display_name": "Harris Lummis", "link": "https://stackoverflow.com/users/6037139/harris-lummis"}, "reply_to_user": {"reputation": 1, "user_id": 8291684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjzJH.png?s=128&g=1", "display_name": "OPV", "link": "https://stackoverflow.com/users/8291684/opv"}, "edited": false, "score": 0, "creation_date": 1556729539, "post_id": 55939623, "comment_id": 98532515, "body": "Which editor are you using? I know the option is supported in Visual Studio and VSCode, but not sure about any other editors. I&#39;m also not quite sure what your exact goals are as far as where code should be generated. If you post a separate question and provide more information then maybe I can help."}, {"owner": {"reputation": 1, "user_id": 8291684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjzJH.png?s=128&g=1", "display_name": "OPV", "link": "https://stackoverflow.com/users/8291684/opv"}, "edited": false, "score": 0, "creation_date": 1556734786, "post_id": 55939623, "comment_id": 98534828, "body": "I use Visual Code"}], "tags": [], "owner": {"reputation": 422, "user_id": 6037139, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155968228550094/picture?type=large", "display_name": "Harris Lummis", "link": "https://stackoverflow.com/users/6037139/harris-lummis"}, "is_accepted": true, "score": 1, "last_activity_date": 1556729178, "creation_date": 1556729178, "answer_id": 55939623, "question_id": 55939224, "link": "https://stackoverflow.com/questions/55939224/how-turn-off-automatically-generation-js-after-save/55939623#55939623", "title": "How turn off automatically generation js after save?", "body": "<p>I suggest you <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" rel=\"nofollow noreferrer\">check out the docs</a> for tsconfig, specifically the <code>compileOnSave</code> option. If you want generated js to live in a separate directory, you can specify that with the <code>outDir</code> compiler option.</p>\n"}], "owner": {"reputation": 1, "user_id": 8291684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjzJH.png?s=128&g=1", "display_name": "OPV", "link": "https://stackoverflow.com/users/8291684/opv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 1, "accepted_answer_id": 55939623, "answer_count": 1, "score": -1, "last_activity_date": 1556729178, "creation_date": 1556727146, "last_edit_date": 1556728565, "question_id": 55939224, "link": "https://stackoverflow.com/questions/55939224/how-turn-off-automatically-generation-js-after-save", "title": "How turn off automatically generation js after save?", "body": "<p>After each saving files <code>.ts</code> typescript generates js in the same directory.</p>\n\n<p>How to turn off this option in tsconfig?</p>\n"}, {"tags": ["typescript", "svg", "angular7", "svgpanzoom"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 8502991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27f18858577be993b0554ab6b154182e?s=128&d=identicon&r=PG&f=1", "display_name": "Rama Mohan", "link": "https://stackoverflow.com/users/8502991/rama-mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1558459205, "creation_date": 1558459205, "answer_id": 56243433, "question_id": 55939184, "link": "https://stackoverflow.com/questions/55939184/download-the-svg-file-from-dom-or-from-object-element/56243433#56243433", "title": "download the svg file from DOM or from Object element", "body": "<p>I have done myself, but not sure whether this is correct approach. Below code works fine.\nI have installed file saver package from npm</p>\n\n<pre><code>npm install file-saver ngx-filesaver --save\n</code></pre>\n\n<p>In app.module.ts we have to import and add it in imports array</p>\n\n<pre><code>import { FileSaverModule } from 'ngx-filesaver';\nimports: [  \n    FileSaverModule\n  ]\n</code></pre>\n\n<p>and then in typescript we have to import filesaver like below</p>\n\n<pre><code>import { FileSaverService } from \"ngx-filesaver\";\n</code></pre>\n\n<p>from constructor we have to initialize the service</p>\n\n<pre><code> constructor(private fileSaverService: FileSaverService){}\n</code></pre>\n\n<p>and then download function</p>\n\n<pre><code>downloadSvg(){    \n    let obj:any=document.getElementById('svg1');\n    let svgBody:any=obj.contentDocument.querySelector(\"svg\").innerHTML;\n    let svgContent=\"\ufeff&lt;svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"4239.54 906.94 3137 1984\\\"&gt;\"+svgBody+\"&lt;/svg&gt;\";\n    let blob=new Blob([svgContent]);    \n    this.fileSaverService.save(this.blob,'filename.svg');\n\n  }\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 8502991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27f18858577be993b0554ab6b154182e?s=128&d=identicon&r=PG&f=1", "display_name": "Rama Mohan", "link": "https://stackoverflow.com/users/8502991/rama-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 479, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558459205, "creation_date": 1556726868, "question_id": 55939184, "link": "https://stackoverflow.com/questions/55939184/download-the-svg-file-from-dom-or-from-object-element", "title": "download the svg file from DOM or from Object element", "body": "<p>I want to download/save .svg from the DOM. I have embedded my svg file in Object element and updating dynamically some of the elements inside SVG and styling it in my Angular 7 application. </p>\n\n<pre><code>&lt;object id=\"svg1\" data=\"assets/10026_019.svg\" type=\"image/svg+xml\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"&gt;&lt;/object&gt;\n     &lt;button (click)=\"downloadSVG()\"&gt;Download SVG file&lt;/button&gt;\n</code></pre>\n\n<p>After updating SVG I need to download/save the entire svg contnet in .svg file. or any other alternate options availble for to download updated svg file?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556727049, "post_id": 55939175, "comment_id": 98531465, "body": "What are you doing? What do you expect to happen? What happens instead? It would be much easier for us to explain the problem if we knew what the problem is in the first place."}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "edited": false, "score": 0, "creation_date": 1556727236, "post_id": 55939175, "comment_id": 98531543, "body": "What is the error that you are getting?"}, {"owner": {"reputation": 121, "user_id": 11437829, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Bv0UAvE-EZc/AAAAAAAAAAI/AAAAAAAAAb4/GiZWwGI-d4o/photo.jpg?sz=128", "display_name": "Oleg Pavlyukov", "link": "https://stackoverflow.com/users/11437829/oleg-pavlyukov"}, "edited": false, "score": 0, "creation_date": 1556727559, "post_id": 55939175, "comment_id": 98531669, "body": "It have to change data on java rest service. At first it get data from a server with data for current Note object. Then I change the object fields in the form and try to send the changed Note to rest server, but it don&#39;t send it. I think it can happen because of currentNote change own type somewhere, but can&#39;t understand where it happens and how cast Object to Note. Sorry for my excellent English)"}, {"owner": {"reputation": 121, "user_id": 11437829, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Bv0UAvE-EZc/AAAAAAAAAAI/AAAAAAAAAb4/GiZWwGI-d4o/photo.jpg?sz=128", "display_name": "Oleg Pavlyukov", "link": "https://stackoverflow.com/users/11437829/oleg-pavlyukov"}, "reply_to_user": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "edited": false, "score": 0, "creation_date": 1556727805, "post_id": 55939175, "comment_id": 98531776, "body": "@Adrita Sharma, UpdateNoteComponent.html:5 ERROR TypeError: Cannot read property &#39;title&#39; of undefined     at Object.eval [as updateDirectives] (UpdateNoteComponent.html:6)    ... UpdateNoteComponent.html:5 ERROR CONTEXT DebugContext_ {view: {\u2026}, nodeIndex: 11, nodeDef: {\u2026}, elDef: {\u2026}, elView: {\u2026}}"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556727883, "post_id": 55939175, "comment_id": 98531811, "body": "The request is never sent because you never subscribe() to the observable returned by updateNote()."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556727959, "post_id": 55939175, "comment_id": 98531851, "body": "And you get that error because you&#39;re trying to access the note of the component from the view before the note has been received from the server (and the currentNode is thus <code>undefined</code>, as the error tells). Surround your view by a <code>&lt;div *ngIf=&quot;currentNote&quot;&gt;</code>"}, {"owner": {"reputation": 121, "user_id": 11437829, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Bv0UAvE-EZc/AAAAAAAAAAI/AAAAAAAAAb4/GiZWwGI-d4o/photo.jpg?sz=128", "display_name": "Oleg Pavlyukov", "link": "https://stackoverflow.com/users/11437829/oleg-pavlyukov"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556728391, "post_id": 55939175, "comment_id": 98532017, "body": "@JB Nizet, It start works!=) I so long time spend to find this mistake... Thank you so much for your help!)"}], "owner": {"reputation": 121, "user_id": 11437829, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Bv0UAvE-EZc/AAAAAAAAAAI/AAAAAAAAAb4/GiZWwGI-d4o/photo.jpg?sz=128", "display_name": "Oleg Pavlyukov", "link": "https://stackoverflow.com/users/11437829/oleg-pavlyukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556726830, "creation_date": 1556726830, "question_id": 55939175, "link": "https://stackoverflow.com/questions/55939175/how-works-a-type-conversion-in-angular", "title": "How works a type conversion in angular?", "body": "<p>I have some trouble with types in my test angular app. I wrote rest service with follow method:</p>\n\n<pre><code>@PutMapping(\"/notes\")\n    public Note updateNote(@RequestBody Note note) {\n        System.out.println(\"It works\");\n        return service.updateNote(note);\n    }\n</code></pre>\n\n<p>I wrote angular service:</p>\n\n<pre><code>updateNote(note: Note): Observable&lt;any&gt; {\n    console.log(\"Service Updatenote \" + typeof note);\n    return this.http.put(this.serverURL, note, httpOptions);\n  }\n</code></pre>\n\n<p>I wrote angular component:</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport {NotesDataService} from '../../services/notes-data.service';\nimport {ActivatedRoute} from '@angular/router';\nimport {Note} from '../../models/note';\n\n@Component({\n  selector: 'app-update-note',\n  templateUrl: './update-note.component.html',\n  styleUrls: ['./update-note.component.css']\n})\nexport class UpdateNoteComponent implements OnInit {\n\n  // notedata: FormGroup;\n  // noteId;\n  currentNote: Note;\n  submited: boolean = false;\n\n  constructor(private dataservise: NotesDataService, private activatedRoute: ActivatedRoute) {\n  }\n\n  ngOnInit() {\n    const noteId = +this.activatedRoute.snapshot.params['id'];\n    this.dataservise.getNoteById(noteId).subscribe(data =&gt; {\n      console.log(\"Data ng init \" + data);\n      this.currentNote = data });\n  }\n\n  onClickSubmit() {\n    console.log(this.currentNote);\n    this.dataservise.updateNote(this.currentNote);\n  }\n}\n\n</code></pre>\n\n<p>And wrote the form: </p>\n\n<pre><code>&lt;div [hidden]=\"submited\"&gt;\n&lt;form #noteUpdateForm (ngSubmit)=\"onClickSubmit()\"&gt;\n  &lt;div class=\"formGroup\"&gt;\n    &lt;label for=\"title\"&gt;Title&lt;/label&gt;\n    &lt;input type=\"text\" class=\"form-control\" id=\"title\" required\n           [(ngModel)]=\"currentNote.title\" name=\"title\" #title=\"ngModel\"&gt;\n    &lt;div [hidden]=\"title.valid || title.pristine\"\n         class=\"alert alert-danger\"&gt;\n      Title is required\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;label for=\"body\"&gt;Body&lt;/label&gt;\n  &lt;input type=\"text\" class=\"form-control\" id=\"body\" required\n         [(ngModel)]=\"currentNote.body\" name=\"body\" #body=\"ngModel\"&gt;\n  &lt;div [hidden]=\"body.valid || body.pristine\"\n       class=\"alert alert-danger\"&gt;\n    Body is required\n  &lt;/div&gt;\n  &lt;button type=\"submit\"&gt;Update&lt;/button&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Please, tell me why it does not works? Where type of \"currentNote\" changes to Object or where I am doing wrong?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "promise", "observable"], "comments": [{"owner": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "edited": false, "score": 0, "creation_date": 1556727251, "post_id": 55939120, "comment_id": 98531554, "body": "what&#39;s with <code>this.result</code> and <code>this.dependentKey</code>? Do you need them anywhere else in the class, outside of this computation?"}, {"owner": {"reputation": 603, "user_id": 9619265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jyqf.png?s=128&g=1", "display_name": "sudo_kaizen", "link": "https://stackoverflow.com/users/9619265/sudo-kaizen"}, "edited": false, "score": 0, "creation_date": 1556727279, "post_id": 55939120, "comment_id": 98531569, "body": "You could use operators from RxJS to achieve this. I can&#39;t determine the type of operation that you are performing in your &#39;pyramid of doom&#39; so I cannot prescribe any RxJS operator for you, but there are operators that do mapping, filtering etc and you can use them on the initial <code>result</code>"}, {"owner": {"reputation": 603, "user_id": 9619265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jyqf.png?s=128&g=1", "display_name": "sudo_kaizen", "link": "https://stackoverflow.com/users/9619265/sudo-kaizen"}, "edited": false, "score": 0, "creation_date": 1556727342, "post_id": 55939120, "comment_id": 98531597, "body": "Secondly, you should use a service for this operation. Seems to me that you are accessing the HttpClient from a component"}], "answers": [{"tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": true, "score": 4, "last_activity_date": 1556731360, "last_edit_date": 1556731360, "creation_date": 1556729355, "answer_id": 55939658, "question_id": 55939120, "link": "https://stackoverflow.com/questions/55939120/avoid-callback-hell-with-angular-httpclient-and-observables/55939658#55939658", "title": "Avoid callback hell with angular, HttpClient and Observables", "body": "<p>When working with observables, you won't call subscribe very often. Instead, you'll use the various operators to combine observables together, forming a pipeline of operations.</p>\n\n<p>To take the output of one observable and turn it into another, the basic operator is <code>map</code>. This is similar to how you can <code>.map</code> an array to produce another array. For a simple example, here's doubling all the values of an observable:</p>\n\n<pre><code>const myObservable = of(1, 2, 3).pipe(\n  map(val =&gt; val * 2)\n);\n// myObservable is an observable which will emit 2, 4, 6\n</code></pre>\n\n<p>Mapping is also what you do to take an observable for one http request, and then make another http request. However, we will need one additional piece, so the following code is not quite right:</p>\n\n<pre><code>const myObservable = http.get('someUrl').pipe(\n  map(result =&gt; http.get('someOtherUrl?id=' + result.id)\n)\n</code></pre>\n\n<p>The problem with this code is that it creates an observable that spits out other observables. A 2-dimensional observable if you like. We need to flatten this down so that we have an observable that spits out the results of the second http.get. There are a few different ways to do the flattening, depending on what order we want the results to be in if multiple observables are emitting multiple values. This is not much of an issue in your case since each of these http observables will only emit one item. But for reference, here are the options:</p>\n\n<ul>\n<li>mergeMap will let all the observables run in whatever order, and outputs in whatever order the values arrive. This has its uses, but can also result in race conditions</li>\n<li>switchMap will switch to the latest observable, and cancel old ones that may be in progress. This can eliminate race conditions and ensure you have only the latest data.</li>\n<li>concatMap will finish the entirety of the first observable before moving on to the second. This can also eliminate race conditions, but won't cancel old work.</li>\n</ul>\n\n<p>Like i said, it doesn't matter much in your case, but i'd recommend using switchMap. So my little example above would become:</p>\n\n<pre><code>const myObservable = http.get('someUrl').pipe(\n  switchMap(result =&gt; http.get('someOtherUrl?id=' + result.id)\n)\n</code></pre>\n\n<hr>\n\n<p>Now here's how i can use those tools with your code. In this code example, i'm not saving all the this.result, this.dependentKey, etc:</p>\n\n<pre><code>  getDataFromRemoteServer() {\n    return this.http.get(`/api/point/id`).pipe(\n      map(result =&gt; someComplexSyncTransformation(result)),\n      switchMap(dependentKey =&gt; this.http.get(`/api/point/id/dependent/keys/${dependentKey}`)),\n      switchMap(dependantResult =&gt; this.http.get(`/api/point/id/dependent/keys/${dependentResult.someValue}`)\n    });\n  }\n\n// to be used like:\n\n   getDataFromRemoteServer()\n     .subscribe(deeplyNestedResult =&gt; {\n       // do whatever with deeplyNestedResult\n     });\n</code></pre>\n\n<p>If its important to you to save those values, then i'd recommend using the tap operator to highlight the fact that you're generating side effects. tap will run some code whenever the observable emits a value, but will not mess with the value:</p>\n\n<pre><code>  getDataFromRemoteServer() {\n    return this.http.get(`/api/point/id`).pipe(\n      tap(result =&gt; this.result = result),\n      map(result =&gt; someComplexSyncTransformation(result)),\n      tap(dependentKey =&gt; this.dependentKey = dependentKey),\n      // ... etc\n    });\n  }\n</code></pre>\n"}], "owner": {"reputation": 576, "user_id": 1092608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60d5607f3c0f837ef436c112637f0b14?s=128&d=identicon&r=PG", "display_name": "cecemel", "link": "https://stackoverflow.com/users/1092608/cecemel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 1, "accepted_answer_id": 55939658, "answer_count": 1, "score": 2, "last_activity_date": 1556731360, "creation_date": 1556726555, "question_id": 55939120, "link": "https://stackoverflow.com/questions/55939120/avoid-callback-hell-with-angular-httpclient-and-observables", "title": "Avoid callback hell with angular, HttpClient and Observables", "body": "<p>I am currently struggling to wrap my head around angular (2+), the HttpClient and Observables.</p>\n\n<p>I come from a promise async/await background, and what I would like to achieve in angular, is the equivalent of:</p>\n\n<pre><code>//(...) Some boilerplate to showcase how to avoid callback hell with promises and async/await\n  async function getDataFromRemoteServer() {\n    this.result = await httpGet(`/api/point/id`);\n    this.dependentKey = someComplexSyncTransformation(this.result);\n    this.dependentResult = await httpGet(`/api/point/id/dependent/keys/${this.dependentKey}`);\n    this.deeplyNestedResult = await httpGet(`/api/point/id/dependen/keys/${this.dependentResult.someValue}`);\n  }\n</code></pre>\n\n<p>The best I could come op with in angular is:</p>\n\n<pre><code>import { HttpClient } from `@angular/common/http`;\n\n//(...) boilerplate to set component up.\n\n  constructor(private http: HttpClient) {}\n\n// somewhere in a component.\n\n  getDataFromRemoteServer() {\n    this.http.get(`/api/point/id`).subscribe( result =&gt; {\n       this.result = result;\n       this.dependentKey = someComplexSyncTransformation(this.result);\n       this.http.get(`/api/point/id/dependent/keys/${this.dependentKey}`).subscribe( dependentResult =&gt; {\n         this.dependentResult = dependentResult;\n         this.http.get(`/api/point/id/dependen/keys/${this.dependentResult.someValue}`).subscribe( deeplyNestedResult =&gt; {\n            this.deeplyNestedResult = deeplyNestedResult;\n         });\n       })\n    });\n  }\n\n//...\n</code></pre>\n\n<p>As you might have noticed, I am entering the Pyramid of Doom with this approach, which I would like to avoid.\nSo how could I write the angular snippet in a way as to avoid this?</p>\n\n<p>Thx!</p>\n\n<p>Ps: I am aware of the fact that you can call .toPromise on the result of the .get call.\nBut let's just assume I want to go the total Observable way, for now.</p>\n"}, {"tags": ["reactjs", "typescript", "jestjs", "material-ui", "react-testing-library"], "comments": [{"owner": {"reputation": 15385, "user_id": 9276329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpGhl.jpg?s=128&g=1", "display_name": "Munim Munna", "link": "https://stackoverflow.com/users/9276329/munim-munna"}, "edited": false, "score": 1, "creation_date": 1561571695, "post_id": 55939084, "comment_id": 100112256, "body": "Can you post a codesandbox demo of the issue?"}], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "edited": false, "score": 1, "creation_date": 1561543145, "post_id": 56766757, "comment_id": 100095685, "body": "I wish to use <code>react-testing-library</code> by @kentcdodds as it is a non-bloated library which works in a way my user intends to use the application. I suppose I could switch to <code>enzyme</code> if there is no other option, but I don&#39;t see any reason why it just shouldn&#39;t be possible to test <code>Material-UI</code> with <code>react-testing-library</code>."}, {"owner": {"reputation": 469, "user_id": 7036397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAF5h.png?s=128&g=1", "display_name": "Orkhan Huseynli", "link": "https://stackoverflow.com/users/7036397/orkhan-huseynli"}, "reply_to_user": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "edited": false, "score": 0, "creation_date": 1561560596, "post_id": 56766757, "comment_id": 100106661, "body": "Can that error happen because <code>handleSubmit</code> method is <code>async</code>? Have you tried it without <code>async&#47;await</code>?"}, {"owner": {"reputation": 1520, "user_id": 11500664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1xAgW.jpg?s=128&g=1", "display_name": "Jake Luby", "link": "https://stackoverflow.com/users/11500664/jake-luby"}, "edited": false, "score": 0, "creation_date": 1562101766, "post_id": 56766757, "comment_id": 100270060, "body": "When testing with a component library I look at the recommendations from that library: <a href=\"https://github.com/mui-org/material-ui/tree/master/test#writing-tests\" rel=\"nofollow noreferrer\">github.com/mui-org/material-ui/tree/master/test#writing-test&zwnj;&#8203;s</a> <code>For all unit tests, please use the shallow renderer from enzyme unless the Component being tested requires a DOM. Here&#39;s a small shallow rendered test to get you started.</code>"}], "tags": [], "owner": {"reputation": 469, "user_id": 7036397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAF5h.png?s=128&g=1", "display_name": "Orkhan Huseynli", "link": "https://stackoverflow.com/users/7036397/orkhan-huseynli"}, "is_accepted": false, "score": 1, "last_activity_date": 1561531697, "creation_date": 1561531697, "answer_id": 56766757, "question_id": 55939084, "link": "https://stackoverflow.com/questions/55939084/how-to-test-styled-material-ui-components-wrapped-in-withstyles-using-react-test/56766757#56766757", "title": "How to test styled Material-UI components wrapped in withStyles using react-testing-library?", "body": "<p>Why don't you use <code>enzyme</code> with <a href=\"https://airbnb.io/enzyme/docs/api/mount.html\" rel=\"nofollow noreferrer\">Full DOM Rendering</a>?\nYou can use <code>simulate</code> method to simulate events on mounted components.</p>\n\n<pre><code>class Foo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { count: 0 };\n  }\n\n  render() {\n    const { count } = this.state;\n    return (\n      &lt;div&gt;\n        &lt;div className={`clicks-${count}`}&gt;\n          {count} clicks\n        &lt;/div&gt;\n        &lt;a href=\"url\" onClick={() =&gt; { this.setState({ count: count + 1 }); }}&gt;\n          Increment\n        &lt;/a&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nconst wrapper = mount(&lt;Foo /&gt;);\n\nexpect(wrapper.find('.clicks-0').length).to.equal(1);\nwrapper.find('a').simulate('click');\nexpect(wrapper.find('.clicks-1').length).to.equal(1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3259, "user_id": 2666042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1374514750/picture?type=large", "display_name": "Arnold Gandarillas", "link": "https://stackoverflow.com/users/2666042/arnold-gandarillas"}, "is_accepted": false, "score": 6, "last_activity_date": 1562121679, "last_edit_date": 1562121679, "creation_date": 1562036330, "answer_id": 56844739, "question_id": 55939084, "link": "https://stackoverflow.com/questions/55939084/how-to-test-styled-material-ui-components-wrapped-in-withstyles-using-react-test/56844739#56844739", "title": "How to test styled Material-UI components wrapped in withStyles using react-testing-library?", "body": "<p>First of all when you use <code>render</code> method of <a href=\"https://github.com/testing-library/react-testing-library\" rel=\"nofollow noreferrer\">react-testing-library</a> you don't need to worry about using <code>withStyles</code> or any wrapper because at the end it renders the component as it could be in the real dom so you can write your tests normally.</p>\n\n<p>Then as far as I can see you are doing the same thing I did when I was starting with <em>tests</em> (it means you are going to become good at it ;). You are trying to mock an internal method and that is not the best approach to follow because what you need to do is to test the real method.</p>\n\n<p>So let's image that we have a <code>Register</code> users component.</p>\n\n<p><em>src/Register.tsx</em></p>\n\n<pre><code>import ... more cool things\nimport * as api from './api';\n\nconst Register = () =&gt; {\n  const [name, setName] = useState('');\n  const handleNameChange = (event) =&gt; {\n    setName(event.target.value);\n  };\n\n  const handleSubmit = (event) =&gt; {\n    event.preventDefault();\n    if (name) {\n      api.registerUser({ name });\n    }\n  };\n\n  return (\n    &lt;form onSubmit={handleSubmit}&gt;\n      &lt;TextField\n        id='name'\n        name='name'\n        label='Name'\n        fullWidth\n        value={name}\n        onChange={handleNameChange}\n      /&gt;\n      &lt;Button data-testid='button' fullWidth type='submit' variant='contained'&gt;\n        Save\n      &lt;/Button&gt;\n    &lt;/form&gt;\n  );\n}\n</code></pre>\n\n<p>The component is pretty simple, its a form with an input and a button. We are using <code>react hooks</code> to change the input value and based on that we call or not <code>api.registerUser</code> when <code>handleSubmit</code> event is fired.</p>\n\n<p>To test the component the first thing we need to do is to <em>mock</em> <code>api.registerUser</code> method.</p>\n\n<p><em>src/__tests__/Register.tsx</em></p>\n\n<pre><code>import * as api from '../api'\n\njest.mock('../api')\n\napi.registerUser = jest.fn()\n</code></pre>\n\n<p>This will allow us to see if that method is called or not.</p>\n\n<p>The next thing to do is ... write the tests, in this scenario we can test two things to see if <code>handleSubmit</code> is working correctly.</p>\n\n<ol>\n<li>Not to call <code>api.registerUser</code> if name <strong>is</strong> empty.</li>\n</ol>\n\n<pre><code>it('should not call api registerUser method', () =&gt; {\n  const { getByTestId } = render(&lt;Register /&gt;)\n  fireEvent.click(getByTestId('button'))\n  expect(api.registerUser).toHaveBeenCalledTimes(0)\n})\n</code></pre>\n\n<ol start=\"2\">\n<li>Call <code>api.registerUser</code> if name <strong>is not</strong> empty.</li>\n</ol>\n\n<pre><code>it('should call api registerUser method', () =&gt; {\n  const { getByLabelText, getByTestId } = render(&lt;Register /&gt;)\n\n  fireEvent.change(getByLabelText('Name'), { target: { value: 'Steve Jobs' }})\n\n  fireEvent.click(getByTestId('button'))\n  expect(api.registerUser).toHaveBeenCalledTimes(1)\n})\n</code></pre>\n\n<p>In this last test implicitly we are testing <code>handleNameChange</code> too because we are changing the name :) so <code>name</code> is not going to be empty and <code>registerUser</code> is going to be called.</p>\n\n<p>The example with <strong>withStyles</strong> and <strong>typescript</strong> is in this <a href=\"https://github.com/arkgast/testing-react-form\" rel=\"nofollow noreferrer\">repo</a>. <br />\nThe demo is <a href=\"https://codesandbox.io/s/testing-react-form-f4msn\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 6325192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ErF09X3bZcM/AAAAAAAAAAI/AAAAAAAAAAg/Q-xQNZ0_jtM/photo.jpg?sz=128", "display_name": "dushansilva", "link": "https://stackoverflow.com/users/6325192/dushansilva"}, "is_accepted": false, "score": 1, "last_activity_date": 1562073487, "creation_date": 1562073487, "answer_id": 56853416, "question_id": 55939084, "link": "https://stackoverflow.com/questions/55939084/how-to-test-styled-material-ui-components-wrapped-in-withstyles-using-react-test/56853416#56853416", "title": "How to test styled Material-UI components wrapped in withStyles using react-testing-library?", "body": "<p>You can use unwrap to unwrap the wrapped styled component then test it</p>\n\n<pre><code>import { unwrap } from '@material-ui/core/test-utils';\nimport {ExampleForm, styles} from './Form';\n\nit('alerts on submit click', async () =&gt; {\n  ...\nconst unwrapped = unwrap(ExampleForm);\n    ...\n}\n</code></pre>\n\n<p>Then you can do he required testing on the unwrapped object</p>\n"}], "owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6107, "favorite_count": 1, "answer_count": 3, "score": 16, "last_activity_date": 1562121679, "creation_date": 1556726362, "question_id": 55939084, "link": "https://stackoverflow.com/questions/55939084/how-to-test-styled-material-ui-components-wrapped-in-withstyles-using-react-test", "title": "How to test styled Material-UI components wrapped in withStyles using react-testing-library?", "body": "<p>I am trying to create a test with a styled Material-UI component using react-testing-library in typescript. I'm finding it difficult to access the internal functions of the component to mock and assert. </p>\n\n<p>Form.tsx</p>\n\n<pre><code>export const styles = ({ palette, spacing }: Theme) =&gt; createStyles({\n    root: {\n        flexGrow: 1,\n    },\n    paper: {\n        padding: spacing.unit * 2,\n        margin: spacing.unit * 2,\n        textAlign: 'center',\n        color: palette.text.secondary,\n    },\n    button: {\n        margin: spacing.unit * 2,\n    }\n});\n\ninterface Props extends WithStyles&lt;typeof styles&gt; { };\n\nexport class ExampleForm extends Component&lt;Props, State&gt; {\n  async handleSubmit(event: React.FormEvent&lt;HTMLFormElement&gt;) {\n    // Handle form Submit\n    ...\n    if (errors) {\n            window.alert('Some Error occurred');\n            return;\n        }\n  }\n  // render the form\n}\nexport default withStyles(styles)(ExampleForm);\n</code></pre>\n\n<p>Test.tsx</p>\n\n<pre><code>import FormWithStyles from './Form';\n\nit('alerts on submit click', async () =&gt; {\n  jest.spyOn(window,'alert').mockImplementation(()=&gt;{});\n  const spy = jest.spyOn(ActivityCreateStyles,'handleSubmit');\n  const { getByText, getByTestId } = render(&lt;FormWithStyles /&gt;)\n  fireEvent.click(getByText('Submit'));\n\n  expect(spy).toHaveBeenCalledTimes(1);\n  expect(window.alert).toHaveBeenCalledTimes(1);\n})\n</code></pre>\n\n<p><code>jest.spyOn</code> throws the following error <code>Argument of type '\"handleSubmit\"' is not assignable to parameter of type 'never'.ts(2345)</code> probably because ExampleForm in wrapped in withStyles. </p>\n\n<p>I also tried directly importing the <code>ExampleForm</code> component and manually assigning the styles, was couldn't do so:</p>\n\n<pre><code>import {ExampleForm, styles} from './Form';\n\nit('alerts on submit click', async () =&gt; {\n  ...\n\n  const { getByText, getByTestId } = render(&lt;ActivityCreateForm classes={styles({palette,spacing})} /&gt;)\n\n  ...\n}\n</code></pre>\n\n<p>Got the  following error: <code>Type '{ palette: any; spacing: any; }' is missing the following properties from type 'Theme': shape, breakpoints, direction, mixins, and 4 more.ts(2345)</code></p>\n\n<p>I'm finding it difficult to write basic tests in Typescript for <code>Material-UI</code> components with <code>react-testing-library</code> &amp; <code>Jest</code> due to strong typings and wrapped components. Please Guide.</p>\n"}, {"tags": ["html", "angular", "typescript", "ngfor"], "comments": [{"owner": {"reputation": 111, "user_id": 1747604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43900a76437621ac488505864efef8dc?s=128&d=identicon&r=PG", "display_name": "mnj11", "link": "https://stackoverflow.com/users/1747604/mnj11"}, "edited": false, "score": 0, "creation_date": 1556723603, "post_id": 55938431, "comment_id": 98529798, "body": "Where is your code ?"}, {"owner": {"reputation": 168, "user_id": 8866564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384b15d3dc9ed99b4d5ec3a9a84ea42d?s=128&d=identicon&r=PG&f=1", "display_name": "Michal S", "link": "https://stackoverflow.com/users/8866564/michal-s"}, "edited": false, "score": 0, "creation_date": 1556723695, "post_id": 55938431, "comment_id": 98529842, "body": "Do you want to add to the variable the number of elements in your collection?"}, {"owner": {"reputation": 55, "user_id": 8929367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b4802c94ce54e9d8c1ddff132a0696?s=128&d=identicon&r=PG&f=1", "display_name": "P.W94", "link": "https://stackoverflow.com/users/8929367/p-w94"}, "edited": false, "score": 0, "creation_date": 1556724118, "post_id": 55938431, "comment_id": 98530072, "body": "I want add some value from all elements in my collection"}, {"owner": {"reputation": 2485, "user_id": 3812888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/blosZ.jpg?s=128&g=1", "display_name": "The Head Rush", "link": "https://stackoverflow.com/users/3812888/the-head-rush"}, "edited": false, "score": 0, "creation_date": 1556724270, "post_id": 55938431, "comment_id": 98530154, "body": "It&#39;s probably better to handle that in the <code>subscribe</code> callback for the <code>invoiceItems</code> API request."}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 5500680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5468da40d04535a667c3b8f9067466?s=128&d=identicon&r=PG&f=1", "display_name": "Prasanth", "link": "https://stackoverflow.com/users/5500680/prasanth"}, "is_accepted": true, "score": 1, "last_activity_date": 1556726933, "creation_date": 1556726933, "answer_id": 55939193, "question_id": 55938431, "link": "https://stackoverflow.com/questions/55938431/add-value-to-variable-declared-in-typescript-by-ngfor-in-html/55939193#55939193", "title": "Add value to variable declared in TypeScript by ngfor in html", "body": "<p>Change your html like below</p>\n\n<pre><code>    &lt;div *ngFor =\"let item of invoiceItems; let i = index\"&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemNetPrice}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemAmount}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemVATRate}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    {{getTotal(i)}}\n     &lt;/div&gt;\n</code></pre>\n\n<p>and create getTotal method in your typescript file as below</p>\n\n<pre><code>getTotal(i) {\nreturn this.invoiceItems.slice(0,i +1).map(rec =&gt; rec. ItemNetPrice).reduce((prev, curr) =&gt; prev + curr, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 8929367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b4802c94ce54e9d8c1ddff132a0696?s=128&d=identicon&r=PG&f=1", "display_name": "P.W94", "link": "https://stackoverflow.com/users/8929367/p-w94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 55939193, "answer_count": 1, "score": -1, "last_activity_date": 1556726933, "creation_date": 1556723476, "last_edit_date": 1556724043, "question_id": 55938431, "link": "https://stackoverflow.com/questions/55938431/add-value-to-variable-declared-in-typescript-by-ngfor-in-html", "title": "Add value to variable declared in TypeScript by ngfor in html", "body": "<p>I declared variable in my ts file and in html file I'm using ngfor and I need to increase variable declared in ts by each element from ngfor is it possible?</p>\n\n<pre><code>&lt;tbody&gt;\n  &lt;tr *ngFor=\"let item of invoiceItems\"&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemNetPrice}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemAmount}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemVATRate}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    &lt;td&gt;{{item.ItemName}}&lt;/td&gt;\n    {{netto += item.ItemNetPrice}}\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>netto is my variable</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "jestjs", "create-react-app"], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 7366631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mv1Nq.jpg?s=128&g=1", "display_name": "sidecus", "link": "https://stackoverflow.com/users/7366631/sidecus"}, "edited": false, "score": 0, "creation_date": 1594674291, "post_id": 55938807, "comment_id": 111202837, "body": "This has been bothering me for a day and if this is true it&#39;s a bummer - especially for people who write libraries. Does anybody know why type checking is not done in test?"}, {"owner": {"reputation": 581, "user_id": 7366631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mv1Nq.jpg?s=128&g=1", "display_name": "sidecus", "link": "https://stackoverflow.com/users/7366631/sidecus"}, "edited": false, "score": 2, "creation_date": 1594674424, "post_id": 55938807, "comment_id": 111202885, "body": "never mind, found <a href=\"https://github.com/facebook/create-react-app/issues/5626\" rel=\"nofollow noreferrer\">this</a>"}], "tags": [], "owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "is_accepted": true, "score": 5, "last_activity_date": 1556725045, "creation_date": 1556725045, "answer_id": 55938807, "question_id": 55938211, "link": "https://stackoverflow.com/questions/55938211/typescript-errors-doesnt-show-when-running-tests-through-jest-with-create-react/55938807#55938807", "title": "TypeScript errors doesn&#39;t show when running tests through JEST with create-react-app", "body": "<p>Testing does not do type checking. The tests also don't need to compile properly, although I'm not sure why this is, so type errors in the tests don't manifest.</p>\n\n<p>If you want to do type checking on the tests, use <code>yarn tsc</code> with the default config. This will perform type checking, and it has <code>noEmit</code> set so it will not build anything. The test files are included in the config by default.</p>\n\n<p>If you like, you can also update the test script to: <code>tsc &amp;&amp; react-scripts test</code>.</p>\n\n<p>Note that this will only do type checking. You can also use eslint for linting, e.g.</p>\n\n<pre><code>tsc &amp;&amp; eslint --ext ts,tsx,js src &amp;&amp; react-scripts test\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 1112281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a07adef59420347acfbce3d6874eb29?s=128&d=identicon&r=PG", "display_name": "Christian.H", "link": "https://stackoverflow.com/users/1112281/christian-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 2, "accepted_answer_id": 55938807, "answer_count": 1, "score": 8, "last_activity_date": 1556731555, "creation_date": 1556722524, "last_edit_date": 1556731555, "question_id": 55938211, "link": "https://stackoverflow.com/questions/55938211/typescript-errors-doesnt-show-when-running-tests-through-jest-with-create-react", "title": "TypeScript errors doesn&#39;t show when running tests through JEST with create-react-app", "body": "<p>As the title says, when writing <strong>incorrect TypeScript-code</strong> in a project set up with <strong>create-react-app</strong>, I don't get any errors in the terminal when running the tests through <code>npm test</code>. Maybe this is expected behaviour? Would however be nice to get the errors to prevent one from writing incorrect TypeScript in tests as well</p>\n\n<h2>Sample of incorrect code:</h2>\n\n<pre><code>// App.test.tsx\nit('Test of incorrect TypeScript', () =&gt; {\n  let aSimpleString: string = 'hello';\n  aSimpleString = 5;\n});\n</code></pre>\n\n<p>P.S. In case you were wondering I am using the TypeScript-version of create-react-app through: <code>npx create-react-app my-app --typescript</code>. Everything else works fine, and if I write incorrect TypeScript in component files the terminal let's me know</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 1150, "user_id": 5444853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8685acb178b327a3a55b0a238995d817?s=128&d=identicon&r=PG", "display_name": "Rannie Aguilar Peralta", "link": "https://stackoverflow.com/users/5444853/rannie-aguilar-peralta"}, "edited": false, "score": 0, "creation_date": 1556720661, "post_id": 55937528, "comment_id": 98528247, "body": "Can you also include in your post the error that you get?"}, {"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1556721933, "post_id": 55937528, "comment_id": 98528908, "body": "What does your <code>tsconfig.json</code> look like?"}], "owner": {"reputation": 4613, "user_id": 1572526, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/425d70affe3cc8d12b2311ed9d7935ec?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1572526/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556719381, "creation_date": 1556719381, "question_id": 55937528, "link": "https://stackoverflow.com/questions/55937528/typescript-is-converting-files-above-tsconfig-folder", "title": "Typescript is converting files &quot;above&quot; tsconfig folder", "body": "<p>Crazy problem. Have not touched tsconfig file in a long time and suddenly I have this problem</p>\n\n<p>Folder structure:</p>\n\n<ul>\n<li>backend </li>\n<li>frontend\n\n<ul>\n<li>tsconfig.json</li>\n</ul></li>\n</ul>\n\n<p>My tsconfig.json</p>\n\n<pre><code>  \"exclude\": [\n    \"node_modules\"\n  ]\n</code></pre>\n\n<p>Positioned in <code>frontend</code>. I run <code>tsc</code>. Now I get errors from the <code>backend</code> folder.</p>\n\n<p>It only happens in production. Not in development node.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["arrays", "node.js", "json", "typescript", "post"], "comments": [{"owner": {"reputation": 20729, "user_id": 1470607, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/6CA0X.png?s=128&g=1", "display_name": "Etheryte", "link": "https://stackoverflow.com/users/1470607/etheryte"}, "edited": false, "score": 0, "creation_date": 1556719345, "post_id": 55937458, "comment_id": 98527647, "body": "Why have you specified <code>array: object</code>? Surely you&#39;re expecting it to be something else here?"}, {"owner": {"reputation": 130, "user_id": 10343053, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pwtFpAU4Hkc/AAAAAAAAAAI/AAAAAAAAABU/myouWQORXL8/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Gachon", "link": "https://stackoverflow.com/users/10343053/j%c3%a9r%c3%a9my-gachon"}, "reply_to_user": {"reputation": 20729, "user_id": 1470607, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/6CA0X.png?s=128&g=1", "display_name": "Etheryte", "link": "https://stackoverflow.com/users/1470607/etheryte"}, "edited": false, "score": 0, "creation_date": 1556719627, "post_id": 55937458, "comment_id": 98527768, "body": "I&#39;ve test with Array&lt;string&gt; and Map&lt;string, any&gt; but with that I cant access to my values event with ts_ignore. And i&#39;ve add that to my code :                 console.log(typeof req.body.user); and that print object."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 10343053, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pwtFpAU4Hkc/AAAAAAAAAAI/AAAAAAAAABU/myouWQORXL8/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Gachon", "link": "https://stackoverflow.com/users/10343053/j%c3%a9r%c3%a9my-gachon"}, "edited": false, "score": 1, "creation_date": 1556720229, "post_id": 55937659, "comment_id": 98528042, "body": "Thank&#39;s, I now this soluce, but I&#39;ve to put functions in my class user like : user.toMap(); and for that, I&#39;ve to have a class :"}, {"owner": {"reputation": 542, "user_id": 759939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f13ab0f04ce9edda6a89548c499ef3?s=128&d=identicon&r=PG", "display_name": "ontek", "link": "https://stackoverflow.com/users/759939/ontek"}, "edited": false, "score": 1, "creation_date": 1575316778, "post_id": 55937659, "comment_id": 104517695, "body": "On the type assertion in the first part of your reply, it is worth pointing out that this only tells the compiler that the input is a User.  It doesn&#39;t enforce anything about the input, you are still wide open to runtime errors in the event that your payload does not conform to a User type.  In other words, you still need to validate that the input actually is of type User."}, {"owner": {"reputation": 349, "user_id": 8207637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63507b9a40cad7effd9bcc8b8eba396?s=128&d=identicon&r=PG&f=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/8207637/trevor"}, "edited": false, "score": 0, "creation_date": 1599017557, "post_id": 55937659, "comment_id": 112639609, "body": "Is there a way to do this where it only selects the fields that match the interface/class? I like how concise it is, but don&#39;t want it to grab other fields from the request body. Just the ones that match properties on the class."}, {"owner": {"reputation": 1095, "user_id": 2532763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/865a68dc2779e4134aeee10ff5e7967f?s=128&d=identicon&r=PG", "display_name": "lordvcs", "link": "https://stackoverflow.com/users/2532763/lordvcs"}, "reply_to_user": {"reputation": 542, "user_id": 759939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f13ab0f04ce9edda6a89548c499ef3?s=128&d=identicon&r=PG", "display_name": "ontek", "link": "https://stackoverflow.com/users/759939/ontek"}, "edited": false, "score": 0, "creation_date": 1603207097, "post_id": 55937659, "comment_id": 113960428, "body": "@ontek Is there any way to fix this so that it will throw an error if req.body doesnt confirm to the type?"}, {"owner": {"reputation": 542, "user_id": 759939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f13ab0f04ce9edda6a89548c499ef3?s=128&d=identicon&r=PG", "display_name": "ontek", "link": "https://stackoverflow.com/users/759939/ontek"}, "reply_to_user": {"reputation": 1095, "user_id": 2532763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/865a68dc2779e4134aeee10ff5e7967f?s=128&d=identicon&r=PG", "display_name": "lordvcs", "link": "https://stackoverflow.com/users/2532763/lordvcs"}, "edited": false, "score": 0, "creation_date": 1603405111, "post_id": 55937659, "comment_id": 114035779, "body": "@lordvcs not really. To conceptualize why this is, you have to consider that anything that isn&#39;t JavaScript doesn&#39;t make it into the compiled output. In other words, interfaces are for the compiler, not the runtime. As far as reusing the interface for validation, you&#39;d need to use something like this <a href=\"https://github.com/gristlabs/ts-interface-checker\" rel=\"nofollow noreferrer\">github.com/gristlabs/ts-interface-checker</a> (haven&#39;t used it YMMV). Something that does seem promising is this <a href=\"https://github.com/joiful-ts/joiful\" rel=\"nofollow noreferrer\">github.com/joiful-ts/joiful</a>, but that&#39;s using TS generators to annotate a class and put all of your validations in one place."}, {"owner": {"reputation": 542, "user_id": 759939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f13ab0f04ce9edda6a89548c499ef3?s=128&d=identicon&r=PG", "display_name": "ontek", "link": "https://stackoverflow.com/users/759939/ontek"}, "reply_to_user": {"reputation": 1095, "user_id": 2532763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/865a68dc2779e4134aeee10ff5e7967f?s=128&d=identicon&r=PG", "display_name": "lordvcs", "link": "https://stackoverflow.com/users/2532763/lordvcs"}, "edited": false, "score": 0, "creation_date": 1603405272, "post_id": 55937659, "comment_id": 114035828, "body": "@lordvcs (cont) For me, usually I just write a method called <code>createUser</code> that accepts a POJO, validates and returns an object that conforms to the interface. This keeps the compiler happy, but it does leave a lot of boilerplate."}], "tags": [], "owner": {"reputation": 27804, "user_id": 716092, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kcc7I.png?s=128&g=1", "display_name": "Dan Dinu", "link": "https://stackoverflow.com/users/716092/dan-dinu"}, "is_accepted": true, "score": 9, "last_activity_date": 1556721099, "last_edit_date": 1556721099, "creation_date": 1556720045, "answer_id": 55937659, "question_id": 55937458, "link": "https://stackoverflow.com/questions/55937458/typescript-convert-post-request-body-to-map/55937659#55937659", "title": "Typescript : convert post request body to map", "body": "<p>I have a different suggestion which I find nice in typescript and started using intensively. Instead of creating a class for your user you can define it as an interface.</p>\n\n<pre><code>export interface User { \n email: string, \n password: string, \n firstName: string,\n lastName: string, \n // etc \n}\n</code></pre>\n\n<p>and then simply do: </p>\n\n<pre><code>const user = req.body.user as User; \n</code></pre>\n\n<p>It's faster and cleaner to type as long as you use these just for creating domain model objects with no business logic. </p>\n\n<p>EDIT: </p>\n\n<p>IF you need to stick with class then try using <strong>any</strong>\n type.</p>\n\n<pre><code> export class user { \n constructor(userDto: any) { \n   // your logic\n   } \n }\n\n\n new User(req.body.user); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110, "user_id": 11400166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tUdUgcfwN_M/AAAAAAAAAAI/AAAAAAAAAAA/rBLpaFLbZ0E/photo.jpg?sz=128", "display_name": "Agustin Eloy Barrios", "link": "https://stackoverflow.com/users/11400166/agustin-eloy-barrios"}, "is_accepted": false, "score": 1, "last_activity_date": 1556720763, "creation_date": 1556720763, "answer_id": 55937810, "question_id": 55937458, "link": "https://stackoverflow.com/questions/55937458/typescript-convert-post-request-body-to-map/55937810#55937810", "title": "Typescript : convert post request body to map", "body": "<p>I'm particularly likes Dan's solution, is clean and also is fast. But if he ToMap function is need it, you can consider use <a href=\"https://lodash.com/\" rel=\"nofollow noreferrer\">https://lodash.com/</a> is a very handy library, helps with arrays, object mappings, deep cloning .</p>\n\n<p>Regards</p>\n\n<p>PD: you also can use indexer <code>secondaryDarkColor =array.['secondaryDarkColor']</code></p>\n"}, {"tags": [], "owner": {"reputation": 542, "user_id": 759939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f13ab0f04ce9edda6a89548c499ef3?s=128&d=identicon&r=PG", "display_name": "ontek", "link": "https://stackoverflow.com/users/759939/ontek"}, "is_accepted": false, "score": 0, "last_activity_date": 1603409729, "creation_date": 1603409729, "answer_id": 64491928, "question_id": 55937458, "link": "https://stackoverflow.com/questions/55937458/typescript-convert-post-request-body-to-map/64491928#64491928", "title": "Typescript : convert post request body to map", "body": "<p>There are a few things that might be worth clearing up that are clouding the solution to this one.</p>\n<p>First thing is that your <code>toMap</code> method is somewhat unnecessary, as an ES6 class <em>is</em> a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes\" rel=\"nofollow noreferrer\">template for creating an object</a>, so creating an instance of your class with the <code>new</code> keyword gives you back an object, and the <code>toMap</code> method doesn't actually return a <code>User</code> object even though it conforms to the type. If you want to return a <code>User</code>, you'd need to modify your signature to read:</p>\n<pre class=\"lang-js prettyprint-override\"><code>toMap(): User { ... }\n</code></pre>\n<p>This notifies the compiler that you are intending to return a <code>User</code>, otherwise, the compiler just sees the object and infers it to be a concrete object with the properties you've defined.</p>\n<p>Additionally, your constructor has the following signature:</p>\n<pre><code>constructor(array: object) { ... }\n</code></pre>\n<p>For one, calling your variable <code>array</code> is bound to cause confusion down the road, as to someone reading your code, they'll assume that they're working with an array, but you've typed it as <code>object</code>.</p>\n<p>As far as the type errors go, you're getting them because TypeScript's <code>object</code> is because it is represents the <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#object\" rel=\"nofollow noreferrer\">non-primitive type</a>, and actually has no properties at all so when you attempt to access one, the compiler can't access it.</p>\n<p>With your current code, you could replace <code>object</code> with <code>any</code> and it would most likely compile, but I don't think you'd want that.</p>\n<p>There is a much more concise method to accomplish what you're after, you can actually define your attributes and their types by setting them in the constructor, like so:</p>\n<pre class=\"lang-js prettyprint-override\"><code>class User {\n  constructor(\n    public id?: string, // or private\n    public email?: string\n  ) {}\n}\n\nconst user = new User(&quot;abc123&quot;, &quot;this@example.com&quot;)\n\nconsole.log(user)\n\n# &gt;&gt;&gt; User: { &quot;id&quot;: &quot;abc123&quot;, &quot;email&quot;: &quot;this@example.com&quot; }\n</code></pre>\n<p>Also note that you can use a question mark to indicate that an input is optional.</p>\n<p>If you want to accept a json object as an input instead of putting everything in your constructor, you can always define a static method on the class that accepts an <code>any</code> as an input and returns an instance of the class.</p>\n<p>See <a href=\"https://www.typescriptlang.org/play?#code/MYGwhgzhAECqEFMBO0DeAoa1gHsB2EALkgK7CE5IAUmW0ADiQEYgCWw0rAJgPwBc0IklZ4A5gBpoAeinRKDYQDcwhBLSyMW7aAgC2YViH6DiI0bQCUaAL7paRFduBIEKhFRGNCAsHgCeFgLwyGjqdC6EJEh40HgIAO5wiNSeJIQAdNySqRl6BiAWtLa26LgEhNAkydAAvLEJSchUAERgTMAAjABMAMzNks2EABasEAACCAAeYLr0IAjpuLrNhaX4EDjz6SA4olRVyKtlRNBMJIYVdcFIiy5uVBh0nFwCzZN+AF4A7AAcAJz9MJ5QyvYYqCbTWZbJbNdDWI7rTYLHZ7M4XCxAA\" rel=\"nofollow noreferrer\">fiddle</a> for example.</p>\n"}], "owner": {"reputation": 130, "user_id": 10343053, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pwtFpAU4Hkc/AAAAAAAAAAI/AAAAAAAAABU/myouWQORXL8/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Gachon", "link": "https://stackoverflow.com/users/10343053/j%c3%a9r%c3%a9my-gachon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7315, "favorite_count": 1, "accepted_answer_id": 55937659, "answer_count": 3, "score": 2, "last_activity_date": 1603409729, "creation_date": 1556719184, "last_edit_date": 1556720276, "question_id": 55937458, "link": "https://stackoverflow.com/questions/55937458/typescript-convert-post-request-body-to-map", "title": "Typescript : convert post request body to map", "body": "<p>I'm programming an rest api with node js and typescript and for create user, my api recieve a json post :</p>\n\n<pre><code>import {Request, Response, Router} from \"express\";\nimport {User} from '../../../models/user.model';\nimport {createUser} from '../../../factories/user.factory';\n\nexport default [\n        {\n            path: \"/api/v1/user/create\",\n            method: \"post\",\n            handler: [\n                async (req: Request, res: Response) =&gt; {\n                    createUser(new User(req.body.user));\n                    res.status(200).send(req.body);\n                }\n            ]\n        }\n    ];\n</code></pre>\n\n<p>For exemple, I send that : </p>\n\n<pre><code>{\n    \"user\": {\n        \"email\": \"test@gmail.com\",\n        \"password\": \"12345678\",\n        \"firstName\": \"J\u00e9r\u00e9my\"\n        }\n    }\n</code></pre>\n\n<p>I would like create an object \"User\" with the object req.body.user :</p>\n\n<pre><code>import {Timestamp} from './timestamp.model';\n\nexport class User {\n    id: bigint | undefined;\n    email: string | undefined;\n    password: string | undefined;\n    firstName: string | undefined;\n    lastName: string | undefined;\n    pseudo: string | undefined;\n    birthDate: Timestamp | undefined;\n    lastEditDate: Timestamp | undefined;\n    creationDate: Timestamp | undefined;\n    googleAuthToken: string | undefined;\n    language: string | undefined;\n    profileAvatarUrl: string | undefined;\n    profileBannerUrl: string | undefined;\n    primaryLightColor: string | undefined;\n    secondaryLightColor: string | undefined;\n    primaryDarkColor: string | undefined;\n    secondaryDarkColor: string | undefined;\n\n    constructor(array: object) {\n        console.log(array);\n        // @ts-ignore\n        console.log(array.gg);\n        // @ts-ignore\n        this.id = array.id;\n        // @ts-ignore\n        this.email = array.email;\n        // @ts-ignore\n        this.password = array.password;\n        // @ts-ignore\n        this.firstName = array.firstName;\n        // @ts-ignore\n        this.lastName = array.lastName;\n        // @ts-ignore\n        this.pseudo = array.pseudo;\n        // @ts-ignore\n        this.birthDate = array.birthDate;\n        // @ts-ignore\n        this.lastEditDate = array.lastEditDate;\n        // @ts-ignore\n        this.creationDate = array.creationDate;\n        // @ts-ignore\n        this.googleAuthToken = array.googleAuthToken;\n        // @ts-ignore\n        this.language = array.language;\n        // @ts-ignore\n        this.profileAvatarUrl = array.profileAvatarUrl;\n        // @ts-ignore\n        this.profileBannerUrl = array.profileBannerUrl;\n        // @ts-ignore\n        this.primaryLightColor = array.primaryLightColor;\n        // @ts-ignore\n        this.secondaryLightColor = array.secondaryLightColor;\n        // @ts-ignore\n        this.primaryDarkColor = array.primaryDarkColor;\n        // @ts-ignore\n        this.secondaryDarkColor = array.secondaryDarkColor;\n        // @ts-ignore\n    }\n\n     toMap() {\n        return {\n            \"id\": this.id,\n            \"email\": this.email,\n            \"firstName\": this.firstName,\n            \"lastName\": this.lastName,\n            \"pseudo\": this.pseudo,\n            \"profileAvatarUrl\": this.profileAvatarUrl,\n            \"birthDate\": this.birthDate,\n            \"lastEditDate\": this.lastEditDate,\n            \"creationDate\": this.creationDate,\n            \"language\": this.language,\n            \"googleAuthToken\": this.googleAuthToken,\n            \"profileBannerUrl\": this.profileBannerUrl,\n            \"primaryLightColor\": this.primaryLightColor,\n            \"secondaryLightColor\": this.secondaryLightColor,\n            \"primaryDarkColor\": this.primaryDarkColor,\n            \"secondaryDarkColor\": this.secondaryDarkColor,\n        }\n    }\n\n}\n</code></pre>\n\n<p>I have put all this \"// @ts-ignore\" because if not , I've this error : </p>\n\n<blockquote>\n  <p>src/models/user.model.ts(27,25): error TS2339: Property 'id' does not\n  exist on type 'object'. src/models/user.model.ts(28,32): error TS2339:\n  Property 'email' does not exist on type 'object'.\n  src/models/user.model.ts(29,35): error TS2339: Property 'password'\n  does not exist on type 'object'. src/models/user.model.ts(30,36):\n  error TS2339: Property 'firstName' does not exist on type 'object'.\n  src/models/user.model.ts(31,35): error TS2339: Property 'lastName'\n  does not exist on type 'object'.</p>\n</blockquote>\n\n<p>My question is : How correctly make my class user for not have to put all this \"// @ts-ignore\" ?</p>\n\n<p>Thank's in advance.\nJ\u00e9r\u00e9my.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "asynchronous", "async-await"], "comments": [{"owner": {"reputation": 77, "user_id": 4337507, "user_type": "registered", "profile_image": "https://graph.facebook.com/676135878/picture?type=large", "display_name": "Shahar \u30c9\u30fc\u30f3 Levi", "link": "https://stackoverflow.com/users/4337507/shahar-%e3%83%89%e3%83%bc%e3%83%b3-levi"}, "edited": false, "score": 0, "creation_date": 1556719583, "post_id": 55937428, "comment_id": 98527742, "body": "Subject handling streams...  that&#39;s means whenever the subject will receive a new stream it will invoke your subscribe... therefore it can be that your subject will fire  &lt;pre&gt;fnc1()&lt;/pre&gt; multi times. you should harness the power of rxjs. Try to use rxjs compositions (SwitchMap,MergeMap)"}, {"owner": {"reputation": 1, "user_id": 11369333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9495a127c12fbcd6fa6570d013081e?s=128&d=identicon&r=PG&f=1", "display_name": "wepuxo", "link": "https://stackoverflow.com/users/11369333/wepuxo"}, "reply_to_user": {"reputation": 77, "user_id": 4337507, "user_type": "registered", "profile_image": "https://graph.facebook.com/676135878/picture?type=large", "display_name": "Shahar \u30c9\u30fc\u30f3 Levi", "link": "https://stackoverflow.com/users/4337507/shahar-%e3%83%89%e3%83%bc%e3%83%b3-levi"}, "edited": false, "score": 0, "creation_date": 1556744349, "post_id": 55937428, "comment_id": 98538459, "body": "@Shahar\u30c9\u30fc\u30f3Levi Do you recommend &#39;concatMap&#39; ?"}, {"owner": {"reputation": 77, "user_id": 4337507, "user_type": "registered", "profile_image": "https://graph.facebook.com/676135878/picture?type=large", "display_name": "Shahar \u30c9\u30fc\u30f3 Levi", "link": "https://stackoverflow.com/users/4337507/shahar-%e3%83%89%e3%83%bc%e3%83%b3-levi"}, "edited": false, "score": 0, "creation_date": 1556781374, "post_id": 55937428, "comment_id": 98547353, "body": "pay attention that &#39;concatMap&#39; will not fire till the previous observable will complete. So it can be a good solution. You are using async await in angular, what is your demand that you choose this pattern?"}], "owner": {"reputation": 1, "user_id": 11369333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9495a127c12fbcd6fa6570d013081e?s=128&d=identicon&r=PG&f=1", "display_name": "wepuxo", "link": "https://stackoverflow.com/users/11369333/wepuxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556719081, "creation_date": 1556719081, "question_id": 55937428, "link": "https://stackoverflow.com/questions/55937428/use-async-in-subscribe-in-angular", "title": "Use async in subscribe in Angular", "body": "<p>I have a Subject, which used to be fire async chain.</p>\n\n<p>Its sometimes looks like working correctly, sometimes looks like the subscribe doesn't wait for the resolve.</p>\n\n<pre><code>behavior.subscribe(async (result)=&gt; {\n await fnc1(result);\n});\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>fnc1(in) {\n return new Promise(async (resolve,reject) =&gt; {\n  for(let w of in.split(',')) {\n   await fnc2(w);\n  }\n  //if for finished, go to next subscribed value\n  resolve();\n });\n}\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>fnc2(w) {\n return new Promise((resolve,reject) =&gt; {\n  let i = 0;\n  setInterval( () =&gt; {\n   i = i + 1;\n   if(i == 10) {\n    //go next value in for loop\n    resolve();\n   }\n  },100);\n });\n}\n\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1556722465, "post_id": 55937387, "comment_id": 98529212, "body": "Why can&#39;t the frontend import the database library types?"}, {"owner": {"reputation": 11287, "user_id": 327572, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/tSPHs.jpg?s=128&g=1", "display_name": "Rob N", "link": "https://stackoverflow.com/users/327572/rob-n"}, "reply_to_user": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1556723751, "post_id": 55937387, "comment_id": 98529874, "body": "I assumed that trying to import the Cassandra database driver (in my case) in the browser would not go well, because none of the physical reality behind the module exists in that environment. If it didn&#39;t crash, I&#39;d also worry about downloading unnecessary code to the browser."}, {"owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 1, "creation_date": 1556723884, "post_id": 55937387, "comment_id": 98529937, "body": "The frontend can import the types without having to use any of the code itself. As for downloading ... when you build all of the types should be erased so none of the type definitions should ship with the built code."}, {"owner": {"reputation": 663, "user_id": 1179747, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bbd295433394919e8dda89456a6bc983?s=128&d=identicon&r=PG", "display_name": "Simon Chan", "link": "https://stackoverflow.com/users/1179747/simon-chan"}, "reply_to_user": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 1, "creation_date": 1556768156, "post_id": 55937387, "comment_id": 98543360, "body": "@ExplosionPills is correct if your <code>Uuid</code> is an interface, that will not exist in built code. Otherwise, no, see <a href=\"https://github.com/Microsoft/TypeScript/issues/3538\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/3538</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1108, "user_id": 9910298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b3a1cb73b2ca18070868fc0f587b528?s=128&d=identicon&r=PG", "display_name": "Mike Hardy", "link": "https://stackoverflow.com/users/9910298/mike-hardy"}, "is_accepted": false, "score": 0, "last_activity_date": 1572388567, "creation_date": 1572388567, "answer_id": 58616315, "question_id": 55937387, "link": "https://stackoverflow.com/questions/55937387/typescript-compile-time-conditional-for-browser-vs-server-code/58616315#58616315", "title": "Typescript compile-time conditional for browser vs server code", "body": "<p>It appears that this is the most popular library implementing conditional compilation <a href=\"https://github.com/nippur72/ifdef-loader\" rel=\"nofollow noreferrer\">https://github.com/nippur72/ifdef-loader</a></p>\n\n<p>The TypeScript team has not implemented it and doesn't seem to be moving quickly to do so, for my use (same use case, basically) I'm going to try some of the webpack conditional compilation items so I can build easily for web and react-native</p>\n"}], "owner": {"reputation": 11287, "user_id": 327572, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/tSPHs.jpg?s=128&g=1", "display_name": "Rob N", "link": "https://stackoverflow.com/users/327572/rob-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572388567, "creation_date": 1556718905, "question_id": 55937387, "link": "https://stackoverflow.com/questions/55937387/typescript-compile-time-conditional-for-browser-vs-server-code", "title": "Typescript compile-time conditional for browser vs server code", "body": "<p>I'm trying to share code between browser and server parts of a web app. It might be useful to have something like an <code>#if</code> conditional. Is there anything like that in Typescript?</p>\n\n<p>For example:</p>\n\n<pre><code>interface Card {\n    id: Uuid\n    text: string\n    created_dt: Date\n}\n</code></pre>\n\n<p>One the server, <code>Uuid</code> is a type from a database library. On the browser I'll need to use something else.</p>\n\n<p>Hypothetical code:</p>\n\n<pre><code>#if compiling_for_browser\ntype Uuid = somelib.Uuid\n#else\ntype Uuid = database_lib.types.Uuid\n#endif\n\ninterface Card ...\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "styled-components"], "owner": {"reputation": 63, "user_id": 8254921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lSAkQ.png?s=128&g=1", "display_name": "DEMORALIZ3D", "link": "https://stackoverflow.com/users/8254921/demoraliz3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556718810, "creation_date": 1556718810, "question_id": 55937362, "link": "https://stackoverflow.com/questions/55937362/is-adding-comments-hints-to-a-interface-on-a-styled-component-possible-and-if-so", "title": "Is adding comments/hints to a interface on a styled component possible and if so, how?", "body": "<p>I have an interface on my styled component which contains the type hints for each attribute. As shown below:</p>\n\n<pre><code>interface PBProps {\n    color: Colours;\n    bgColor: Colours;\n    /** for example: 10px or 10% */\n    height: string; \n    paddingLR: string;\n    fontSize: string;\n    width: string;\n    margin: string;\n    fontWeight: string;\n}\n</code></pre>\n\n<p>The idea is so when you hover over height on the actual element. I have a the comment show. </p>\n\n<p>so it shows \"for example: 10px or 10%\" in the same box that has <code>(JSX attribute) height: string</code></p>\n\n<p><img src=\"https://i.ibb.co/7nkWyBp/test.png\" alt=\"Image Example\"></p>\n\n<p>I understand you can do:</p>\n\n<pre><code>/**\n * @param {string} height // comment\n */\n</code></pre>\n\n<p>but this does not give the effect i wish to achieve. Is this even possible. 2 days searching has gone far enough! my google FU is not strong enough!</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1556718208, "post_id": 55937175, "comment_id": 98527064, "body": "so the array in the object is named <code>array</code>, right? gotta ask, since you haven&#39;t provided how your data looks like... you should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20818, "user_id": 4964569, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153480747890827/picture?type=large", "display_name": "Hien Nguyen", "link": "https://stackoverflow.com/users/4964569/hien-nguyen"}, "is_accepted": true, "score": 2, "last_activity_date": 1556718540, "creation_date": 1556718540, "answer_id": 55937299, "question_id": 55937175, "link": "https://stackoverflow.com/questions/55937175/angular-typescript-on-array-map-is-returning-this-array-map-is-not-a-function/55937299#55937299", "title": "Angular Typescript On Array.map is returning &quot;&quot;this.array.map is not a function&quot;", "body": "<p>You need check the returned object from your webservice is array or not.</p>\n\n<p>I tried to reproduce your code still worked.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-array-map2\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-array-map2</a></p>\n"}], "owner": {"reputation": 705, "user_id": 10354765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/362807c43e0c20377a2da88da2aee4e7?s=128&d=identicon&r=PG&f=1", "display_name": "c0micrage", "link": "https://stackoverflow.com/users/10354765/c0micrage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 55937299, "answer_count": 1, "score": -1, "last_activity_date": 1556718540, "creation_date": 1556717971, "last_edit_date": 1556718062, "question_id": 55937175, "link": "https://stackoverflow.com/questions/55937175/angular-typescript-on-array-map-is-returning-this-array-map-is-not-a-function", "title": "Angular Typescript On Array.map is returning &quot;&quot;this.array.map is not a function&quot;", "body": "<p>I am using Angular 6 and previous got this following to work get all the values associated with an array property</p>\n\n<pre><code>this.object.array.map(item =&gt; item.month).filter((value, index, self) =&gt; self.indexOf(value) === index);\n</code></pre>\n\n<p>In another component, the webservice is returning an array and not an object with an embedded array. The following is throwing map() is not a function which is confusing.</p>\n\n<pre><code>this.array.map(item =&gt; item.month).filter((value, index, self) =&gt; self.indexOf(value) === index);\n</code></pre>\n\n<p>Here is the model definition of the array</p>\n\n<p>In my ts code, I declared as following</p>\n\n<pre><code> myArrays: ArrayType[];\n</code></pre>\n\n<p>in my model.ts</p>\n\n<pre><code>export class ArrayType {\n\n  constructor () {\n\n\n  }\n  public id: string;\n  public name: string;\n  public month: string;\n\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["css", "angular", "typescript"], "comments": [{"owner": {"reputation": 168, "user_id": 8866564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384b15d3dc9ed99b4d5ec3a9a84ea42d?s=128&d=identicon&r=PG&f=1", "display_name": "Michal S", "link": "https://stackoverflow.com/users/8866564/michal-s"}, "edited": false, "score": 0, "creation_date": 1556718165, "post_id": 55937155, "comment_id": 98527044, "body": "Hi, I want to help but there are some errors in stackblitz. Could you improve it?"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "reply_to_user": {"reputation": 168, "user_id": 8866564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384b15d3dc9ed99b4d5ec3a9a84ea42d?s=128&d=identicon&r=PG&f=1", "display_name": "Michal S", "link": "https://stackoverflow.com/users/8866564/michal-s"}, "edited": false, "score": 0, "creation_date": 1556718267, "post_id": 55937155, "comment_id": 98527091, "body": "Yes! Thank you! The error is because I put the style in querySelector. I will comment that line."}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "reply_to_user": {"reputation": 168, "user_id": 8866564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384b15d3dc9ed99b4d5ec3a9a84ea42d?s=128&d=identicon&r=PG&f=1", "display_name": "Michal S", "link": "https://stackoverflow.com/users/8866564/michal-s"}, "edited": false, "score": 0, "creation_date": 1556718534, "post_id": 55937155, "comment_id": 98527234, "body": "I edited! Can you please see it?"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "reply_to_user": {"reputation": 168, "user_id": 8866564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384b15d3dc9ed99b4d5ec3a9a84ea42d?s=128&d=identicon&r=PG&f=1", "display_name": "Michal S", "link": "https://stackoverflow.com/users/8866564/michal-s"}, "edited": false, "score": 0, "creation_date": 1556718581, "post_id": 55937155, "comment_id": 98527265, "body": "The selector is .mat-step:nth-child(2) .mat-step-header .mat-step-icon-selected"}], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556719130, "post_id": 55937331, "comment_id": 98527533, "body": "Thank you! One thing. How can I use this selector(.mat-step:nth-child(2) .mat-step-header .mat-step-icon-selected)  instead of one class?"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556720688, "post_id": 55937331, "comment_id": 98528258, "body": "Can you please show me how to use it with the above selector?"}, {"owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "reply_to_user": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556721295, "post_id": 55937331, "comment_id": 98528574, "body": "made an edit if you want to take a look should be able to get what you want from there :-)"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722082, "post_id": 55937331, "comment_id": 98528989, "body": "i would like to have these selectors together not separate to have the second icon background"}, {"owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "reply_to_user": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722199, "post_id": 55937331, "comment_id": 98529057, "body": "I dont understand what you mean, the above will turn the background to red for each of the selectors"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722316, "post_id": 55937331, "comment_id": 98529130, "body": "there is only one selector not 3"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722388, "post_id": 55937331, "comment_id": 98529164, "body": "something like this  public ngAfterViewInit(): void {     document.querySelector&lt;HTMLInputElement&gt;(&quot;.mat-step:nth-chil&zwnj;&#8203;d(2) .mat-step-header .mat-step-icon-selected&quot;).style.backgroundColor = &#39;red&#39;;    }"}, {"owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "reply_to_user": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722622, "post_id": 55937331, "comment_id": 98529289, "body": "So, the three selectors are in the array, and for each item in the array, it is setting the colour. querySelector only works how you intend with one item at a time. The above will apply it to all 3"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722755, "post_id": 55937331, "comment_id": 98529359, "body": "there are 3 classes that refers to one element not 3 elements"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556722777, "post_id": 55937331, "comment_id": 98529369, "body": "they are written without comma in css"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556723038, "post_id": 55937331, "comment_id": 98529506, "body": "so i want to change the background color only for the icon 2 that has selector (.mat-step:nth-child(2) .mat-step-header .mat-step-icon-selected). Now it changed for these 3 individual classes so it has 3 background colors(for mat-step, mat-step-header and mat-step-icon-selected)"}, {"owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "reply_to_user": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556723192, "post_id": 55937331, "comment_id": 98529577, "body": "so just do document.querySelector&lt;HTMLInputElement&gt;(.mat-step:nth-child&zwnj;&#8203;(2)).style.backgroun&zwnj;&#8203;dColor = &#39;red&#39;; in the afterviewInit"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556723304, "post_id": 55937331, "comment_id": 98529629, "body": "but for this it has background for all step 2. i would like for the icon 2 selected thats why i put other 2 classes."}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556723867, "post_id": 55937331, "comment_id": 98529929, "body": "i put all three classes because i would like to have the icon in the step 2. You put the last class there. the css is .mat-step:nth-child(2) .mat-step-header .mat-step-icon-selected{   background-color: red; }"}, {"owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "reply_to_user": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556724237, "post_id": 55937331, "comment_id": 98530135, "body": "<a href=\"https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_document_queryselectorall_multiple\" rel=\"nofollow noreferrer\">w3schools.com/jsref/&hellip;</a>"}, {"owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556724355, "post_id": 55937331, "comment_id": 98530197, "body": "i used document.querySelectorAll&lt;HTMLInputElement&gt;(&quot;.mat-step:nth-c&zwnj;&#8203;hild(2) .mat-step-header .mat-step-icon-selected&quot;).style.backgroundColor = &#39;red&#39;; and it gave me TS2339: Property &#39;style&#39; does not exist on type &#39;NodeListOf&lt;HTMLInputElement&gt;&#39;."}, {"owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "reply_to_user": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "edited": false, "score": 0, "creation_date": 1556724497, "post_id": 55937331, "comment_id": 98530276, "body": "document.querySelectorAll&lt;HTMLInputElement&gt;(&quot;.mat-step:nth-c&zwnj;&#8203;hild(2) .mat-step-header .mat-step-icon-selected&quot;).forEach(d =&gt; d.style.backgroundColor = red);"}], "tags": [], "owner": {"reputation": 4698, "user_id": 10270798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5FUH.png?s=128&g=1", "display_name": "Dince12", "link": "https://stackoverflow.com/users/10270798/dince12"}, "is_accepted": false, "score": 4, "last_activity_date": 1556723595, "last_edit_date": 1556723595, "creation_date": 1556718684, "answer_id": 55937331, "question_id": 55937155, "link": "https://stackoverflow.com/questions/55937155/how-to-set-style-for-an-element-in-typescriptangular/55937331#55937331", "title": "How to set style for an element in typescript?(Angular)", "body": "<p>The stackblitz example can be helpful but there is a lot in there to summarise what you are askign for, this answer is a generic way of doing so, meaning you can apply it to your code as and where you see fit.</p>\n\n<p>Declare you boolean.</p>\n\n<pre><code>public value = true;\n</code></pre>\n\n<p>Now declare the CSS class you would like to use.</p>\n\n<pre><code>.exmaple-class {\n    background: red;\n}\n</code></pre>\n\n<p>Then on the selected HTML element you want to apply the class.</p>\n\n<pre><code>&lt;div [class.example-class]=\"value === true\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>or just </p>\n\n<pre><code>&lt;div [class.example-class]=\"value\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>As this still equates to true. If <code>value</code> were set to <code>false</code> then the class would not be applied.</p>\n\n<p>If you want to start building more classes and options for a specific element you can look into <a href=\"https://angular.io/api/common/NgStyle\" rel=\"nofollow noreferrer\">Angular's ngStyle</a>.</p>\n\n<p>Add in this, think this is what you are also asking for, little different. It only runs after the view is loaded, not working in you example because the HTML has not yet been drawn.</p>\n\n<pre><code>  public ngAfterViewInit(): void\n  {\n      this.changeColour();\n  }\n\n  public changeColour() {\n      document.querySelector&lt;HTMLInputElement&gt;(\".mat-step-icon-selected\").style.backgroundColor = 'red';\n  }\n}\n</code></pre>\n\n<p>Then add a click event to ensure that each time you select something the selector is updated.</p>\n\n<pre><code>&lt;div class=\"center-contrainer\" (click)=changeColour()&gt;\n</code></pre>\n"}], "owner": {"reputation": 756, "user_id": 7762963, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aeb476e41b99bed6632d1e1696fe5a5a?s=128&d=identicon&r=PG&f=1", "display_name": "ryy77", "link": "https://stackoverflow.com/users/7762963/ryy77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556723595, "creation_date": 1556717883, "last_edit_date": 1556718897, "question_id": 55937155, "link": "https://stackoverflow.com/questions/55937155/how-to-set-style-for-an-element-in-typescriptangular", "title": "How to set style for an element in typescript?(Angular)", "body": "<p>How can I set the background colour for an item within an if statement in typescript? I used <code>querySelector</code> but the answer can use anything to achieve the result.</p>\n\n<p>The selector is <code>(.mat-step:nth-child(2) .mat-step-header .mat-step-icon-selected)</code>.</p>\n\n<p>Here is the code in a <a href=\"https://stackblitz.com/edit/angular-pujfgf?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">stackblitz</a>. </p>\n\n<p>I would appreciate any help!</p>\n"}, {"tags": ["typescript", "tslint"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1556715539, "post_id": 55936597, "comment_id": 98525911, "body": "This seems like a very special case where a deprecation has a one-to-one replacement."}, {"owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 1, "creation_date": 1556715711, "post_id": 55936597, "comment_id": 98525995, "body": "@AluanHaddad it&#39;s not though, there are <i>many</i> newly deprecated functions like this from the utils lib. <a href=\"https://stackoverflow.com/questions/32515413/why-have-many-util-is-functions-been-deprecated-in-node-js-v4-0-0\">See here</a>"}, {"owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1556715765, "post_id": 55936597, "comment_id": 98526024, "body": "<code>isNull</code>, <code>isNullOrUndefined</code>, <code>isString</code>, <code>isObject</code> for example"}], "answers": [{"tags": [], "owner": {"reputation": 36705, "user_id": 306149, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/99b44e3cb23b76ce97baac83f20c6c86?s=128&d=identicon&r=PG", "display_name": "Matt Bierner", "link": "https://stackoverflow.com/users/306149/matt-bierner"}, "is_accepted": true, "score": 1, "last_activity_date": 1556734828, "creation_date": 1556734828, "answer_id": 55940778, "question_id": 55936597, "link": "https://stackoverflow.com/questions/55936597/tslint-autofix-deprecations-from-util/55940778#55940778", "title": "TSLint autofix deprecations from util", "body": "<p>No. The autofixes you see in VS Code come from TSLint. Auto fixing deprecated apis is not supported currently and would require a fix in TSLint itself.</p>\n\n<p>The complete list of auto-fixable tslint rules is <a href=\"https://palantir.github.io/tslint/rules/\" rel=\"nofollow noreferrer\">here</a> (auto fixable ones are indicated by <code>has-fixer</code>)</p>\n\n<hr>\n\n<p>To replace these node apis, the safest change would be to write your own <code>isNullOrUndefined</code> function (or find one from npm) and switch all callers to use it instead of the node version</p>\n"}], "owner": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55940778, "answer_count": 1, "score": 0, "last_activity_date": 1556734828, "creation_date": 1556715157, "question_id": 55936597, "link": "https://stackoverflow.com/questions/55936597/tslint-autofix-deprecations-from-util", "title": "TSLint autofix deprecations from util", "body": "<p>I'm wondering if there's a way in VSCode to autofix deprecations from the <code>util</code> library.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>if (isNullOrUndefined(this.api)) {\n</code></pre>\n\n<p>Should be:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>if (this.api === null || this.api === undefined) {\n</code></pre>\n\n<p>There is no autofix option, only a rule disablement option... but the hovertext shows the fix! </p>\n"}, {"tags": ["node.js", "typescript", "express", "socket.io"], "comments": [{"owner": {"reputation": 1198, "user_id": 8264275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zRnQ.jpg?s=128&g=1", "display_name": "mehta-rohan", "link": "https://stackoverflow.com/users/8264275/mehta-rohan"}, "edited": false, "score": 0, "creation_date": 1556715535, "post_id": 55936583, "comment_id": 98525909, "body": "share client code"}, {"owner": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "reply_to_user": {"reputation": 1198, "user_id": 8264275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zRnQ.jpg?s=128&g=1", "display_name": "mehta-rohan", "link": "https://stackoverflow.com/users/8264275/mehta-rohan"}, "edited": false, "score": 0, "creation_date": 1556716025, "post_id": 55936583, "comment_id": 98526120, "body": "&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;<a href=\"https://code.jquery.com/jquery-1.11.1.js&quot;&gt;&lt;/script\" rel=\"nofollow noreferrer\">code.jquery.com/jquery-1.11.1.js&quot;&gt;&lt;/script</a>&gt; &lt;script&gt;   $(function () {     var socket = io.connect(&#39;<a href=\"http://localhost&#39;\" rel=\"nofollow noreferrer\">localhost&#39;</a>);     $(&#39;form&#39;).submit(function (e) {       e.preventDefault(); // prevents page reloading       socket.emit(&#39;chatmessage&#39;, $(&#39;#m&#39;).val());       $(&#39;#m&#39;).val(&#39;&#39;);       return false;     });     socket.on(&#39;chatmessage&#39;, function (msg) {       $(&#39;#messages&#39;).append($(&#39;&lt;li&gt;&#39;).text(msg));       window.scrollTo(0, document.body.scrollHeight);     });   }); &lt;/script&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 1198, "user_id": 8264275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zRnQ.jpg?s=128&g=1", "display_name": "mehta-rohan", "link": "https://stackoverflow.com/users/8264275/mehta-rohan"}, "edited": false, "score": 0, "creation_date": 1556716445, "post_id": 55936832, "comment_id": 98526285, "body": "replace port on which you are running node server"}, {"owner": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "edited": false, "score": 0, "creation_date": 1556716648, "post_id": 55936832, "comment_id": 98526390, "body": "Yes, I tried and it is also working without giving port. But, now I am continuously getting a connection logs"}, {"owner": {"reputation": 1198, "user_id": 8264275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zRnQ.jpg?s=128&g=1", "display_name": "mehta-rohan", "link": "https://stackoverflow.com/users/8264275/mehta-rohan"}, "reply_to_user": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "edited": false, "score": 0, "creation_date": 1556716699, "post_id": 55936832, "comment_id": 98526421, "body": "what is your port ?"}, {"owner": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "edited": false, "score": 0, "creation_date": 1556717029, "post_id": 55936832, "comment_id": 98526566, "body": "My Port is 4000"}, {"owner": {"reputation": 1198, "user_id": 8264275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zRnQ.jpg?s=128&g=1", "display_name": "mehta-rohan", "link": "https://stackoverflow.com/users/8264275/mehta-rohan"}, "reply_to_user": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "edited": false, "score": 0, "creation_date": 1556717105, "post_id": 55936832, "comment_id": 98526614, "body": "so now your connection is reseting?"}, {"owner": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "edited": false, "score": 0, "creation_date": 1556717260, "post_id": 55936832, "comment_id": 98526684, "body": "Yes, on both side the port is same"}], "tags": [], "owner": {"reputation": 1198, "user_id": 8264275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zRnQ.jpg?s=128&g=1", "display_name": "mehta-rohan", "link": "https://stackoverflow.com/users/8264275/mehta-rohan"}, "is_accepted": true, "score": 1, "last_activity_date": 1556716402, "creation_date": 1556716402, "answer_id": 55936832, "question_id": 55936583, "link": "https://stackoverflow.com/questions/55936583/socket-io-connection-is-not-establishing/55936832#55936832", "title": "Socket.IO connection is not establishing", "body": "<p>try to change your code:\n<code>var socket = io.connect('localhost');</code></p>\n\n<p>to</p>\n\n<p><code>var socket = io.connect('http://localhost:port');</code> </p>\n"}], "owner": {"reputation": 141, "user_id": 6348924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12f6c2a5a814dabe0d1f07dc09b2ff7?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/6348924/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 55936832, "answer_count": 1, "score": 1, "last_activity_date": 1556716402, "creation_date": 1556715062, "question_id": 55936583, "link": "https://stackoverflow.com/questions/55936583/socket-io-connection-is-not-establishing", "title": "Socket.IO connection is not establishing", "body": "<p>I am not able to establish the connection to Socket.IO in node server. My server is successfully started with Socket.IO but during the connection to Socket, I am not getting the console logs.</p>\n\n<pre><code> this.server.listen(this.port, () =&gt; {\n        console.log(`Server is running on ${this.port} with process id ${process.pid}`)\n    });\n\n this.io.on('connection', (socket: any) =&gt; {\n        console.log(`Connected client on port ${this.port}`);\n\n        socket.on('messsage', (msg: Message) =&gt; {\n            console.log(`Data: ${msg}`);\n            socket.emit('message', msg);\n        });\n\n        socket.on('disconnect', () =&gt; {\n            console.log(`Client Disconnected`);\n        });\n    });\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular-animations"], "answers": [{"comments": [{"owner": {"reputation": 2651, "user_id": 6324775, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/J3NiV.jpg?s=128&g=1", "display_name": "Jonathan Stellwag", "link": "https://stackoverflow.com/users/6324775/jonathan-stellwag"}, "reply_to_user": {"reputation": 55, "user_id": 9177409, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174999532664559/picture?type=large", "display_name": "Harsh kumar", "link": "https://stackoverflow.com/users/9177409/harsh-kumar"}, "edited": false, "score": 0, "creation_date": 1561191573, "post_id": 55950825, "comment_id": 99990034, "body": "Glad that i could help :)"}], "tags": [], "owner": {"reputation": 2651, "user_id": 6324775, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/J3NiV.jpg?s=128&g=1", "display_name": "Jonathan Stellwag", "link": "https://stackoverflow.com/users/6324775/jonathan-stellwag"}, "is_accepted": true, "score": 2, "last_activity_date": 1556794319, "creation_date": 1556794319, "answer_id": 55950825, "question_id": 55936395, "link": "https://stackoverflow.com/questions/55936395/how-to-add-animation-when-data-is-changes-in-angulari-want-to-add-animation-on/55950825#55950825", "title": "How to add animation when data is changes in angular?I want to add animation on left and right button", "body": "<p>I created a running simple example for you here:</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-vyqzfd\" rel=\"nofollow noreferrer\">Angular Animation Left | Right Example</a></p>\n\n<p>Click onto the <strong>Animate Left</strong> | <strong>Animate Right</strong> | <strong>Animate Neutral</strong> <code>div</code> to move the blue box</p>\n"}], "owner": {"reputation": 55, "user_id": 9177409, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174999532664559/picture?type=large", "display_name": "Harsh kumar", "link": "https://stackoverflow.com/users/9177409/harsh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55950825, "answer_count": 1, "score": 0, "last_activity_date": 1556794319, "creation_date": 1556714187, "last_edit_date": 1556737062, "question_id": 55936395, "link": "https://stackoverflow.com/questions/55936395/how-to-add-animation-when-data-is-changes-in-angulari-want-to-add-animation-on", "title": "How to add animation when data is changes in angular?I want to add animation on left and right button", "body": "<p>when I click on right and left button then data should come with animation but it didn't work for me</p>\n\n<p>I added some void animation in angular and put a trigger on my HTML element animation did work when the page is refresh but it didn't work when I click on right or left button </p>\n\n<pre><code>animations:[\ntrigger('divstate',[\n  state('in',style({\n    opacity:1,\n    transform:'translateX(0)'\n  })),\n  transition('void =&gt; *',[\n    style({\n      opacity:0,\n      transform:'translateX(-100px)'\n    }),\n    animate(300)\n  ]),\n]),\n</code></pre>\n\n<p>]</p>\n\n<pre><code>&lt;div class=\"box-2\" [@divstate]&gt;\n  &lt;div class=\"left-arrow\"&gt;\n    &lt;a class=\"cursor_pointer\" (click)=\"previousData()\"&gt;\n      &lt;img src=\"assets/left_arrow.png\" alt=\"\"&gt;\n    &lt;/a&gt;\n  &lt;/div&gt;\n  &lt;div class=\"container-1\"&gt;\n    &lt;div class=\"grid-1\" [@divstate]&gt;\n      &lt;div class=\"item-1 font_p\"&gt;\n        &lt;h3 class=\"color_saffron\" [@divstate]&gt;{{cardData[currentPosition].section1}}&lt;/h3&gt;\n        &lt;br&gt;\n        &lt;p [@divstate]&gt;{{cardData[currentPosition].section1Text}}\n        &lt;/p&gt;\n        &lt;br&gt;\n        &lt;h3 class=\"color_saffron\" [@divstate]&gt;{{cardData[currentPosition].section2}}&lt;/h3&gt;&lt;br&gt;\n        &lt;p [@divstate]&gt;{{cardData[currentPosition].section2Text}}&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;div class=\"item-2\" [@divstate]&gt;\n        &lt;img src=\"{{cardData[currentPosition].image1}}\" alt=\"\"&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;br&gt;&lt;br&gt;\n    &lt;div class=\"grid-2\" [@divstate]&gt;\n      &lt;div class=\"item-2\"&gt;\n        &lt;img src=\"{{cardData[currentPosition].image2}}\" alt=\"\"&gt;\n      &lt;/div&gt;\n      &lt;div class=\"item-1 font_p\" [@divstate]&gt;\n        &lt;h3 class=\"color_saffron\"&gt;{{cardData[currentPosition].section3}}&lt;/h3&gt;\n        &lt;br&gt;\n        &lt;p&gt;{{cardData[currentPosition].section3Text}}&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"right-arrow\"&gt;\n    &lt;a class=\"cursor_pointer\" (click)=\"onAnimate()\" (click)=\"nextData()\"&gt;\n      &lt;img src=\"assets/right_arrow.png\" alt=\"\"&gt;\n    &lt;/a&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>whenever I click on the left or right button then data should come with animation, animation did work when the page is refresh</p>\n"}, {"tags": ["typescript", "ionic2", "dayofmonth"], "comments": [{"owner": {"reputation": 1008, "user_id": 9088454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kegYJCFMCro/AAAAAAAAAAI/AAAAAAAAATU/LZizxkFtrXY/photo.jpg?sz=128", "display_name": "user9088454", "link": "https://stackoverflow.com/users/9088454/user9088454"}, "edited": false, "score": 0, "creation_date": 1556715612, "post_id": 55936380, "comment_id": 98525944, "body": "Convert from days to milliseconds?"}, {"owner": {"reputation": 99, "user_id": 11382283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtXlIfHA_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3N-pLA2EZhtYk4JXnG3BQ0snYEg/mo/photo.jpg?sz=128", "display_name": "Nayan Dubey", "link": "https://stackoverflow.com/users/11382283/nayan-dubey"}, "reply_to_user": {"reputation": 1008, "user_id": 9088454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kegYJCFMCro/AAAAAAAAAAI/AAAAAAAAATU/LZizxkFtrXY/photo.jpg?sz=128", "display_name": "user9088454", "link": "https://stackoverflow.com/users/9088454/user9088454"}, "edited": false, "score": 0, "creation_date": 1556716103, "post_id": 55936380, "comment_id": 98526147, "body": "@user9088454 yes I need to convert into days from milliseconds but I need milliseconds of last 30days or last month"}, {"owner": {"reputation": 99, "user_id": 11382283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtXlIfHA_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3N-pLA2EZhtYk4JXnG3BQ0snYEg/mo/photo.jpg?sz=128", "display_name": "Nayan Dubey", "link": "https://stackoverflow.com/users/11382283/nayan-dubey"}, "reply_to_user": {"reputation": 11828, "user_id": 4420967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=128&g=1", "display_name": "James Z", "link": "https://stackoverflow.com/users/4420967/james-z"}, "edited": false, "score": 0, "creation_date": 1556722105, "post_id": 55936380, "comment_id": 98529004, "body": "@JamesZ I need to show last 30days data from my current date"}, {"owner": {"reputation": 11828, "user_id": 4420967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=128&g=1", "display_name": "James Z", "link": "https://stackoverflow.com/users/4420967/james-z"}, "edited": false, "score": 0, "creation_date": 1556726753, "post_id": 55936380, "comment_id": 98531325, "body": "That sounds like a normal requirement, but how are milliseconds related to it. Does it have to be exactly 30 days to the millisecond accuracy?"}, {"owner": {"reputation": 99, "user_id": 11382283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtXlIfHA_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3N-pLA2EZhtYk4JXnG3BQ0snYEg/mo/photo.jpg?sz=128", "display_name": "Nayan Dubey", "link": "https://stackoverflow.com/users/11382283/nayan-dubey"}, "reply_to_user": {"reputation": 11828, "user_id": 4420967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=128&g=1", "display_name": "James Z", "link": "https://stackoverflow.com/users/4420967/james-z"}, "edited": false, "score": 0, "creation_date": 1556778327, "post_id": 55936380, "comment_id": 98546071, "body": "@JamesZ I need past 30days from the current date please can you help me in that?"}], "owner": {"reputation": 99, "user_id": 11382283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtXlIfHA_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3N-pLA2EZhtYk4JXnG3BQ0snYEg/mo/photo.jpg?sz=128", "display_name": "Nayan Dubey", "link": "https://stackoverflow.com/users/11382283/nayan-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556720300, "creation_date": 1556714136, "last_edit_date": 1556720300, "question_id": 55936380, "link": "https://stackoverflow.com/questions/55936380/i-need-atleast-last-30days-milliseconds-or-last-month-milliseconds-in-ionic-2", "title": "I need atleast last 30days milliseconds or last month milliseconds in ionic 2", "body": "<p>I am stuck in functionality which required last month milliseconds or last 30days milliseconds record</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556713171, "post_id": 55936129, "comment_id": 98524835, "body": "Your code seems correct to me, would be able to give the data for <code>allAnimals </code> and <code>domesticAnimals</code>?"}, {"owner": {"reputation": 8580, "user_id": 1377826, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f0b6e6e3ea80d80ea4f6c4955c10031c?s=128&d=identicon&r=PG", "display_name": "sharon Hwk", "link": "https://stackoverflow.com/users/1377826/sharon-hwk"}, "reply_to_user": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556713263, "post_id": 55936129, "comment_id": 98524876, "body": "@xyz I have added the model for Animal"}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556713318, "post_id": 55936129, "comment_id": 98524907, "body": "No, I meant the list your looping, not the type"}, {"owner": {"reputation": 717, "user_id": 8002725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f99f66213ee4e48b61f7f57f7b1bb1?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Gon&#231;alves Marques", "link": "https://stackoverflow.com/users/8002725/felipe-gon%c3%a7alves-marques"}, "edited": false, "score": 1, "creation_date": 1556713372, "post_id": 55936129, "comment_id": 98524930, "body": "If you could give the <code>console.log</code> of <code>allAnimals</code> and <code>domesticAnimals</code>, would be great."}, {"owner": {"reputation": 717, "user_id": 8002725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f99f66213ee4e48b61f7f57f7b1bb1?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Gon&#231;alves Marques", "link": "https://stackoverflow.com/users/8002725/felipe-gon%c3%a7alves-marques"}, "edited": false, "score": 0, "creation_date": 1556713956, "post_id": 55936129, "comment_id": 98525190, "body": "For your example, the codes works, it returns an array with one element."}], "answers": [{"tags": [], "owner": {"reputation": 2055, "user_id": 4362829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jJxtb.png?s=128&g=1", "display_name": "Tim Klein", "link": "https://stackoverflow.com/users/4362829/tim-klein"}, "is_accepted": true, "score": 2, "last_activity_date": 1556714572, "last_edit_date": 1556714572, "creation_date": 1556713425, "answer_id": 55936232, "question_id": 55936129, "link": "https://stackoverflow.com/questions/55936129/filter-list-logic-issue/55936232#55936232", "title": "Filter list - logic issue", "body": "<p>Your logic is sound. See below:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const myAnimals = ['Donkey', 'Moose', 'Cat', 'Dog'];\r\nconst domesticAnimals = ['Cat', 'Dog', 'Bunny', 'Lizard', 'Goldfish'];\r\n\r\nconst myDomesticAnimals = myAnimals.filter(\r\n  myAnimal =&gt; domesticAnimals.find(\r\n    domesticAnimal =&gt; domesticAnimal === myAnimal\r\n  )\r\n);\r\n\r\nconsole.log(myDomesticAnimals);\r\n\r\n/*  Expected Output (the intersection of the two lists):\r\n\r\n  [\r\n    \"Cat\",\r\n    \"Dog\"\r\n  ]\r\n\r\n*/</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>It may be that your two arrays contain the same elements, therefore the filter is not reducing by any.</p>\n\n<h2>Edit</h2>\n\n<p>Given your provided data:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const allAnimals = [\r\n  {\r\n    \"animalId\": 1,\r\n    \"animalName\": \"elephnat\"\r\n  },\r\n  {\r\n    \"animalId\": 2,\r\n    \"animalName\": \"elephnat1\"\r\n  },\r\n  {\r\n    \"animalId\": 3,\r\n    \"animalName\": \"ant\"\r\n  }\r\n];\r\n\r\nconst domesticAnimals = [{\r\n  \"animalId\": 2,\r\n  \"animalName\": \"elephnat1\"\r\n}];\r\n\r\nconst allDomesticAnimals = allAnimals.filter(\r\n  animal =&gt; domesticAnimals.find(\r\n    domesticAnimal =&gt; domesticAnimal.animalId === animal.animalId\r\n  )\r\n);\r\n\r\nconsole.log(allDomesticAnimals);\r\n\r\n/*  Expected Output (the intersection of the two lists):\r\n\r\n  [\r\n    {\r\n      \"animalId\": 2,\r\n      \"animalName\": \"elephnat1\"\r\n    }\r\n  ]\r\n\r\n*/</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 6613, "user_id": 6433166, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-a-2vAH16fII/AAAAAAAAAAI/AAAAAAAAILw/RY3o0Eie6eo/photo.jpg?sz=128", "display_name": "julianobrasil", "link": "https://stackoverflow.com/users/6433166/julianobrasil"}, "edited": false, "score": 0, "creation_date": 1556715460, "post_id": 55936575, "comment_id": 98525867, "body": "Didn&#39;t you mean <code>filter(item =&gt; domesticAnimals.some(entry =&gt; entry.animalId == item.animalId))</code>?"}], "tags": [], "owner": {"reputation": 1578, "user_id": 7948152, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yYoyW.png?s=128&g=1", "display_name": "Kunvar Singh", "link": "https://stackoverflow.com/users/7948152/kunvar-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1556767469, "last_edit_date": 1556767469, "creation_date": 1556715023, "answer_id": 55936575, "question_id": 55936129, "link": "https://stackoverflow.com/questions/55936129/filter-list-logic-issue/55936575#55936575", "title": "Filter list - logic issue", "body": "<p><strong>Try below:</strong> \n*Single line of code, Hopefully, You like this.!</p>\n\n<pre><code> const result = allAnimals.filter(item =&gt; domesticAnimals.some(entry =&gt; entry.animalId == item.animalId));\n</code></pre>\n"}], "owner": {"reputation": 8580, "user_id": 1377826, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f0b6e6e3ea80d80ea4f6c4955c10031c?s=128&d=identicon&r=PG", "display_name": "sharon Hwk", "link": "https://stackoverflow.com/users/1377826/sharon-hwk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55936232, "answer_count": 2, "score": 1, "last_activity_date": 1556767469, "creation_date": 1556712956, "last_edit_date": 1556736364, "question_id": 55936129, "link": "https://stackoverflow.com/questions/55936129/filter-list-logic-issue", "title": "Filter list - logic issue", "body": "<p>I need to find the matching records of the following 2 List.</p>\n\n<p>I have List called <code>allAnimals</code> : <code>Animal</code> and another List called <code>domesticAnimals</code> : <code>Animal</code>.</p>\n\n<p>Now, I need to do a comparison between the 2 list and return a list where the <code>animalId</code> is equal.</p>\n\n<pre><code>    const commonList = this.allAnimals.filter(item1 =&gt; \n      this.domesticAnimals.find(item2 =&gt; item1.animalId=== item2.animalId)); \n\n      console.log(\"common anumal count is \"+ commonList.length);\n</code></pre>\n\n<p>When I print the count, it gives me the count of the <code>allAnimals</code> and not the <code>commonList</code> . How can I solve this ?</p>\n\n<pre><code>**Animal Model**\n\nanimalId\nanimalName\nanimalAge\n</code></pre>\n\n<p>allAnimals </p>\n\n<pre><code>[{\"animalId\":1 , \"animalName\":\"elephant\"},\n{\"animalId\":2 , \"animalName\":\"elephant1\"},\n{\"animalId\":3 , \"animalName\":\"ant\"}]\n</code></pre>\n\n<p>domesticAnimals </p>\n\n<pre><code>[{\"animalId\":2 , \"animalName\":\"elephant1\"}]\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 2939, "user_id": 4711754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c25453f6a114ebb66aefcc27b0ab44d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Allen", "link": "https://stackoverflow.com/users/4711754/andrew-allen"}, "edited": false, "score": 1, "creation_date": 1556713154, "post_id": 55936101, "comment_id": 98524826, "body": "and you can create method <code>deleteElem(elem:any)</code> with body <code>this.arr.splice(this.arr.findIndex(e =&gt; e == elem), 1);</code> if you want to also delete by element"}], "tags": [], "owner": {"reputation": 9228, "user_id": 1199731, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/81e8221369186e3dee93f8defd475c38?s=128&d=identicon&r=PG", "display_name": "d0x", "link": "https://stackoverflow.com/users/1199731/d0x"}, "is_accepted": false, "score": 1, "last_activity_date": 1556712807, "creation_date": 1556712807, "answer_id": 55936101, "question_id": 55935990, "link": "https://stackoverflow.com/questions/55935990/imutable-delete-filter-remove-array-item-by-index-in-typescript/55936101#55936101", "title": "Imutable delete/filter/remove Array Item by Index in Typescript", "body": "<h3>Imutable way with <code>.filter()</code></h3>\n\n<p>You can use the <code>.filter()</code> method to filter out the item at a given index. </p>\n\n<pre><code>const myArray = ['a', 'b', 'c', 'd']\nconst indexToDelete = 2\n\nconsole.log( myArray.filter( (elem, i) =&gt; i !== indexToDelete) )\n// Logs 'a', 'b', 'd'\n</code></pre>\n\n<p>This won't modify the original array.</p>\n\n<h3>Mutable way with <code>.splice()</code></h3>\n\n<p>If you don't care that the original <code>myArray</code> is modified, you can to it like this:</p>\n\n<pre><code>const myArray = ['a', 'b', 'c', 'd']\nconst indexToDelete = 2\n\nmyArray.splice(indexToDelete, 1)\nconsole.log(myArray)\n// Logs 'a', 'b', 'd'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11709, "user_id": 9325419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBsmO.jpg?s=128&g=1", "display_name": "jo_va", "link": "https://stackoverflow.com/users/9325419/jo-va"}, "is_accepted": false, "score": 3, "last_activity_date": 1556714771, "last_edit_date": 1556714771, "creation_date": 1556714351, "answer_id": 55936435, "question_id": 55935990, "link": "https://stackoverflow.com/questions/55935990/imutable-delete-filter-remove-array-item-by-index-in-typescript/55936435#55936435", "title": "Imutable delete/filter/remove Array Item by Index in Typescript", "body": "<p>You could use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\" rel=\"nofollow noreferrer\">Array.prototype.slice()</a> which is immutable and takes indices as arguments:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const arr = ['a', 'b', 'c', 'd'];\r\n\r\nfunction removeAt(arr, i) {\r\n  return [...arr.slice(0, i), ...arr.slice(i+1)];\r\n}\r\n\r\nconsole.log(...removeAt(arr, 0));\r\nconsole.log(...removeAt(arr, 1));\r\nconsole.log(...removeAt(arr, 2));\r\nconsole.log(...removeAt(arr, 3));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 9228, "user_id": 1199731, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/81e8221369186e3dee93f8defd475c38?s=128&d=identicon&r=PG", "display_name": "d0x", "link": "https://stackoverflow.com/users/1199731/d0x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556715642, "creation_date": 1556712201, "last_edit_date": 1556715642, "question_id": 55935990, "link": "https://stackoverflow.com/questions/55935990/imutable-delete-filter-remove-array-item-by-index-in-typescript", "title": "Imutable delete/filter/remove Array Item by Index in Typescript", "body": "<p>How to delete an item by index in Typescript?</p>\n\n<p>Like:</p>\n\n<pre><code>const myArray = ['a', 'b', 'c', 'd']\n\n// how to remove index 2?\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556711473, "post_id": 55935796, "comment_id": 98524131, "body": "<i>Wrapping map with pipe does not help.</i>? Did you import <code>map()</code> like: <code>import { map } from &#39;rxjs&#47;operators&#39;</code>"}, {"owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "reply_to_user": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556711960, "post_id": 55935796, "comment_id": 98524339, "body": "Yes I have imported map and switchmap from rxjs as you can see in the screenshots. But may be my syntax is wrong. I have now edited my question. Added code for pipe around map"}, {"owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "reply_to_user": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556712192, "post_id": 55935796, "comment_id": 98524438, "body": "Oh. Thanks for the info. Much appreciated."}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556712359, "post_id": 55935796, "comment_id": 98524498, "body": "I am sorry about the comment saying <code>pipe()</code> doesn&#39;t return an Observable. In fact they do, that is why we can subscribe to it. I had not chained pipe before this in the way you describe. I will have a look but yeah the correct way would be the ones sugested in the answers."}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556714698, "post_id": 55935796, "comment_id": 98525518, "body": "What was the error you were getting when you wrapped the <code>map()</code> in the second <code>pipe()</code>?"}, {"owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "reply_to_user": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556715041, "post_id": 55935796, "comment_id": 98525694, "body": "@xyz The same error: Property &#39;pipe&#39; does not exist on type &#39;OperatorFunction&#39;."}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 1, "creation_date": 1556715277, "post_id": 55935796, "comment_id": 98525787, "body": "Okay so you were having the pipe inside another but not chaining it, had you done: <code>pipe(switchMap((user: firebase.User) =&gt; this.userService.fetch(user.uid))) .pipe(map((user) =&gt; user.isSeller));</code> It should had been fine. Even though it is not required to be done this way. You can try and have a look"}, {"owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "reply_to_user": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556961638, "post_id": 55935796, "comment_id": 98611717, "body": "@xyz. I did try chaining the pipes. But it was throwing the same error. May be because of the type of data returned from first pipe"}], "answers": [{"tags": [], "owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "is_accepted": true, "score": 4, "last_activity_date": 1556712279, "last_edit_date": 1556712279, "creation_date": 1556711932, "answer_id": 55935912, "question_id": 55935796, "link": "https://stackoverflow.com/questions/55935796/angular-canactivate-property-map-does-not-exist-on-type-operatorfunction/55935912#55935912", "title": "Angular: canActivate : Property &#39;map&#39; does not exist on type &#39;OperatorFunction&#39;", "body": "<p>That line of code with <a href=\"https://www.learnrxjs.io/operators/transformation/map.html\" rel=\"nofollow noreferrer\">RxJS's map operator</a> should be nested within your <code>pipe()</code>.</p>\n\n<pre><code>canActivate(): Observable&lt;boolean&gt; {\n    return this.auth.userObservable\n      .pipe(\n        switchMap((user: firebase.User) =&gt; this.userService.fetch(user.uid)),\n        map((user) =&gt; user.isSeller)\n     )\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "edited": false, "score": 0, "creation_date": 1556712369, "post_id": 55935941, "comment_id": 98524506, "body": "Thanks for the answer. Much appreciated."}], "tags": [], "owner": {"reputation": 12368, "user_id": 5924562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCWoZ.jpg?s=128&g=1", "display_name": "Naren Murali", "link": "https://stackoverflow.com/users/5924562/naren-murali"}, "is_accepted": false, "score": 3, "last_activity_date": 1556712351, "last_edit_date": 1556712351, "creation_date": 1556712062, "answer_id": 55935941, "question_id": 55935796, "link": "https://stackoverflow.com/questions/55935796/angular-canactivate-property-map-does-not-exist-on-type-operatorfunction/55935941#55935941", "title": "Angular: canActivate : Property &#39;map&#39; does not exist on type &#39;OperatorFunction&#39;", "body": "<p>When using pipe please add all operators inside as separated with commas.</p>\n\n<pre><code> canActivate(): Observable&lt;boolean&gt; {\n    return this.auth.userObservable\n      .pipe(switchMap((user: firebase.User) =&gt; this.userService.fetch(user.uid))\n      , map((user) =&gt; user.isSeller));\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "edited": false, "score": 0, "creation_date": 1556712778, "post_id": 55936035, "comment_id": 98524673, "body": "Thanks a lot for the detailed explanation."}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556713998, "post_id": 55936035, "comment_id": 98525207, "body": "I didn&#39;t quite get the explanation, woudn&#39;t switchMap be returning an Observable? I tried chaining pipes and they work fine. Would you have a look? <a href=\"https://stackblitz.com/edit/angular-qfmxzb\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-qfmxzb</a>"}, {"owner": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556715326, "post_id": 55936035, "comment_id": 98525807, "body": "Okay, I see now. The user had a <code>pipe()</code> within another <code>pipe()</code>"}, {"owner": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "reply_to_user": {"reputation": 11173, "user_id": 4976422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xf3k5.jpg?s=128&g=1", "display_name": "Ashish Ranjan", "link": "https://stackoverflow.com/users/4976422/ashish-ranjan"}, "edited": false, "score": 0, "creation_date": 1556716810, "post_id": 55936035, "comment_id": 98526469, "body": "@xyz Rxjs operators are <i>high order functions</i>: they return functions when invoked. When using <code>pipe</code>, those functions are collected and invoked sequentially."}], "tags": [], "owner": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "is_accepted": false, "score": 2, "last_activity_date": 1556712438, "creation_date": 1556712438, "answer_id": 55936035, "question_id": 55935796, "link": "https://stackoverflow.com/questions/55935796/angular-canactivate-property-map-does-not-exist-on-type-operatorfunction/55936035#55936035", "title": "Angular: canActivate : Property &#39;map&#39; does not exist on type &#39;OperatorFunction&#39;", "body": "<p>You are getting that error because you are invoking <code>map</code> on the function returned by <code>switchMap</code> (which does not have a member called <code>map</code>), as you are incorrectly closing the parenthesis.</p>\n\n<p>To use pipeable operators, one would normally concatenate invocations of them as arguments of <code>pipe</code>:</p>\n\n<pre><code>obs$.pipe(op1(...),op2(...),...,opN(...));\n</code></pre>\n\n<p>Applied to your code, you need to refactor into:</p>\n\n<pre><code>canActivate(): Observable&lt;boolean&gt; {\n    return this.auth.userObservable\n      .pipe(\n         switchMap((user: firebase.User) =&gt; this.userService.fetch(user.uid)),\n         map(user =&gt; user.isSeller)\n      );\n}\n</code></pre>\n"}], "owner": {"reputation": 4221, "user_id": 5010106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iEZeR.jpg?s=128&g=1", "display_name": "Kiran Dash", "link": "https://stackoverflow.com/users/5010106/kiran-dash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 55935912, "answer_count": 3, "score": 0, "last_activity_date": 1556716867, "creation_date": 1556711355, "last_edit_date": 1556716867, "question_id": 55935796, "link": "https://stackoverflow.com/questions/55935796/angular-canactivate-property-map-does-not-exist-on-type-operatorfunction", "title": "Angular: canActivate : Property &#39;map&#39; does not exist on type &#39;OperatorFunction&#39;", "body": "<p><strong>Code:</strong></p>\n\n<p>Imported map and switchMap</p>\n\n<pre><code> import { map, switchMap } from 'rxjs/operators';\n</code></pre>\n\n<p>canActivate code for route guard:</p>\n\n<pre><code>  canActivate(): Observable&lt;boolean&gt; {\n    return this.auth.userObservable\n      .pipe(switchMap((user: firebase.User) =&gt; this.userService.fetch(user.uid))\n      .map((user) =&gt; user.isSeller));\n  }\n</code></pre>\n\n<p>I am getting an error Property 'map' does not exist on type 'OperatorFunction'. Please see screenshots below.</p>\n\n<p><strong>Screenshots:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/o0siw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o0siw.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/uQVnZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uQVnZ.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>My attempt:</strong> Wrapping map with pipe does not help.</p>\n\n<pre><code>canActivate(): Observable&lt;boolean&gt; {\n    return this.auth.userObservable\n      .pipe(switchMap((user: firebase.User) =&gt; this.userService.fetch(user.uid))\n      .pipe(map((user) =&gt; user.isSeller)));\n  }\n</code></pre>\n\n<p>I am not sure if this is correct syntax or not but the above one also throws error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Mu55t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mu55t.png\" alt=\"enter image description here\"></a></p>\n\n<p>May I know what is causing this error. Thanks in Advance</p>\n"}, {"tags": ["typescript", "generics", "void", "conditional-types"], "answers": [{"comments": [{"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1556711370, "post_id": 55935764, "comment_id": 98524081, "body": "Thank you! It works. But I don&#39;t understand the syntax. What is the <i>distribution behavior</i>?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 1, "creation_date": 1556723112, "post_id": 55935764, "comment_id": 98529537, "body": "@Paleo sorry for the late reply, you can read about it here: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/&hellip;</a>"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1556711183, "creation_date": 1556711183, "answer_id": 55935764, "question_id": 55935674, "link": "https://stackoverflow.com/questions/55935674/how-to-remove-a-parameter-when-the-t-generic-type-is-void/55935764#55935764", "title": "How to remove a parameter when the &#39;T&#39; generic type is &#39;void&#39;?", "body": "<p>Your conditional type solution is good, you just need to disable the distribution behavior of conditional types</p>\n\n<pre><code>export interface PromiseToHandle&lt;T&gt; {\n  resolve: [T] extends [void] ? () =&gt; void : (result: T) =&gt; void\n  reject: (error: any) =&gt; void\n  promise: Promise&lt;T&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 55935764, "answer_count": 1, "score": 1, "last_activity_date": 1556711183, "creation_date": 1556710749, "last_edit_date": 1556711082, "question_id": 55935674, "link": "https://stackoverflow.com/questions/55935674/how-to-remove-a-parameter-when-the-t-generic-type-is-void", "title": "How to remove a parameter when the &#39;T&#39; generic type is &#39;void&#39;?", "body": "<p>I try to define the type of the <code>resolve</code> callback in the code below.</p>\n\n<h1>First try: Just the generic</h1>\n\n<pre><code>export interface PromiseToHandle&lt;T&gt; {\n  resolve: (result: T) =&gt; void  // &lt;----- The question is about that line\n  reject: (error: any) =&gt; void\n  promise: Promise&lt;T&gt;\n}\n\nexport function promiseToHandle&lt;T = any&gt;(): PromiseToHandle&lt;T&gt; {\n  let resolve!: any;\n  let reject!: (error: any) =&gt; void;\n  const promise = new Promise&lt;T&gt;((resolveCb, rejectCb) =&gt; {\n    resolve = resolveCb;\n    reject = rejectCb;\n  });\n  return { promise, resolve, reject };\n}\n\nconst pth1 = promiseToHandle&lt;boolean&gt;();\npth1.resolve(true); // OK\n\nconst pth2 = promiseToHandle&lt;void&gt;();\npth2.resolve(); // OK\n</code></pre>\n\n<p>It works the way I need, however the type is incorrect:</p>\n\n<pre><code>const pth3 = promiseToHandle&lt;void&gt;();\nconst voidResolve: () =&gt; void = pth3.resolve // Error: Type '(result: void) =&gt; void' is not assignable to type '() =&gt; void'.\n</code></pre>\n\n<h1>Second try: With a conditional type</h1>\n\n<pre><code>export interface PromiseToHandle&lt;T&gt; {\n  resolve: T extends void ? () =&gt; void : (result: T) =&gt; void\n  reject: (error: any) =&gt; void\n  promise: Promise&lt;T&gt;\n}\n\nconst pth4 = promiseToHandle&lt;void&gt;();\nconst voidResolve2: () =&gt; void = pth4.resolve // OK\n</code></pre>\n\n<p>The previous issue is solved. But now the main case doesn't work:</p>\n\n<pre><code>const pth5 = promiseToHandle&lt;boolean&gt;();\npth5.resolve(true); // Error: Argument of type 'true' is not assignable to parameter of type 'false &amp; true'.\n</code></pre>\n\n<p>I don't know why but when a conditional type is used, then a union (<code>boolean</code> is <code>false | true</code>) is converted to an intersection (<code>false &amp; true</code>)!</p>\n"}, {"tags": ["angular", "typescript", "angular7", "ionic4"], "comments": [{"owner": {"reputation": 1663, "user_id": 1958480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/03cf8097a46ba2b0f9889fb4a6ffe31e?s=128&d=identicon&r=PG&f=1", "display_name": "jcuypers", "link": "https://stackoverflow.com/users/1958480/jcuypers"}, "edited": false, "score": 0, "creation_date": 1556709846, "post_id": 55935381, "comment_id": 98523505, "body": "and where is the definition for tabs / landing?"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 1663, "user_id": 1958480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/03cf8097a46ba2b0f9889fb4a6ffe31e?s=128&d=identicon&r=PG&f=1", "display_name": "jcuypers", "link": "https://stackoverflow.com/users/1958480/jcuypers"}, "edited": false, "score": 0, "creation_date": 1556709997, "post_id": 55935381, "comment_id": 98523558, "body": "@jcuypers Updated. Please see it."}, {"owner": {"reputation": 1663, "user_id": 1958480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/03cf8097a46ba2b0f9889fb4a6ffe31e?s=128&d=identicon&r=PG&f=1", "display_name": "jcuypers", "link": "https://stackoverflow.com/users/1958480/jcuypers"}, "edited": false, "score": 0, "creation_date": 1556710043, "post_id": 55935381, "comment_id": 98523583, "body": "you would need to add / prefix to the url in your getLandingpage"}, {"owner": {"reputation": 1663, "user_id": 1958480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/03cf8097a46ba2b0f9889fb4a6ffe31e?s=128&d=identicon&r=PG&f=1", "display_name": "jcuypers", "link": "https://stackoverflow.com/users/1958480/jcuypers"}, "edited": false, "score": 0, "creation_date": 1556710874, "post_id": 55935381, "comment_id": 98523908, "body": "can you also copy and paste the definition for &quot;/pages/&quot; ?  Can you confirm the goal is to lazy load?"}, {"owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "reply_to_user": {"reputation": 1663, "user_id": 1958480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/03cf8097a46ba2b0f9889fb4a6ffe31e?s=128&d=identicon&r=PG&f=1", "display_name": "jcuypers", "link": "https://stackoverflow.com/users/1958480/jcuypers"}, "edited": false, "score": 0, "creation_date": 1556711067, "post_id": 55935381, "comment_id": 98523981, "body": "@jcuypers Yes, this is lazy loaded pages."}, {"owner": {"reputation": 1663, "user_id": 1958480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/03cf8097a46ba2b0f9889fb4a6ffe31e?s=128&d=identicon&r=PG&f=1", "display_name": "jcuypers", "link": "https://stackoverflow.com/users/1958480/jcuypers"}, "edited": false, "score": 0, "creation_date": 1556711525, "post_id": 55935381, "comment_id": 98524156, "body": "Is it possible to just make a simple stackblitz bcs its difficult to see if all parts are there.  just the basic features for lazy loading will do"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 11431678, "user_type": "registered", "profile_image": "https://graph.facebook.com/317050871981712/picture?type=large", "display_name": "Yejiel Wahnich", "link": "https://stackoverflow.com/users/11431678/yejiel-wahnich"}, "is_accepted": false, "score": 1, "last_activity_date": 1556713077, "creation_date": 1556713077, "answer_id": 55936155, "question_id": 55935381, "link": "https://stackoverflow.com/questions/55935381/error-in-cannot-read-property-loadchildren-of-undefined-when-tried-to-set-the/55936155#55936155", "title": "ERROR in Cannot read property &#39;loadChildren&#39; of undefined when tried to set the path", "body": "<p>If you are using Route Guards, why not just use a guard in the full match, and do the redirect from there? use conditionals where needed</p>\n\n<p>Example: </p>\n\n<pre><code>const routes: Routes = [\n  {\n    path: \"\",\n    canActivate: [RouteGuard]\n },\n  {\n   path: \"tabs\",\n   loadChildren: \"./pages/tabs/tabs.module#TabsPageModule\",\n  },\n  {\n   path: 'landing',\n  loadChildren: './pages/landing/landing.module#LandingPageModule'\n },\n];\n</code></pre>\n\n<p>RouteGuard:</p>\n\n<pre><code> canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise&lt;boolean&gt; {\n    return new Promise(async resolve =&gt; {\n        this.router.navigate([environment.hotelName]);\n        resolve(true)\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4686, "user_id": 6736888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f70e865bb04192d8afa5fb27e88c3d?s=128&d=identicon&r=PG&f=1", "display_name": "penleychan", "link": "https://stackoverflow.com/users/6736888/penleychan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556731615, "creation_date": 1556731615, "answer_id": 55940118, "question_id": 55935381, "link": "https://stackoverflow.com/questions/55935381/error-in-cannot-read-property-loadchildren-of-undefined-when-tried-to-set-the/55940118#55940118", "title": "ERROR in Cannot read property &#39;loadChildren&#39; of undefined when tried to set the path", "body": "<p>You should be defining <code>getLandingPage()</code> outside of your <code>AppRoutingModule</code>:</p>\n\n<pre><code>const getLandingPage = (): string =&gt; {\n    let url = \"\";\n    switch (hotelName) {\n      case \"h1\":\n        url = \"tabs\";\n        break;\n      case \"h2\":\n        url = \"landing\";\n        break;\n      default:\n    }\n    return url;\n  };\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: getLandingPage(),\n    pathMatch: \"full\",\n  },\n  {\n    path: \"tabs\",\n    loadChildren: \"./pages/tabs/tabs.module#TabsPageModule\",\n  },\n  {\n    path: 'landing',\n    loadChildren: './pages/landing/landing.module#LandingPageModule'\n  },\n];\n</code></pre>\n\n<p>Stackblitz example (<a href=\"https://stackblitz.com/edit/angular6-lazy-loading-hroo3l?file=src%2Fapp%2Fapp-routing.module.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular6-lazy-loading-hroo3l?file=src%2Fapp%2Fapp-routing.module.ts</a>) Uses const <code>hotelName</code> instead of environment, since stackblitz doesn't have environment variable defined.</p>\n\n<p>Also not sure how nicely it will play with AOT. </p>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 4800587, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rTotR.jpg?s=128&g=1", "display_name": "Guy Park", "link": "https://stackoverflow.com/users/4800587/guy-park"}, "is_accepted": false, "score": 0, "last_activity_date": 1560150832, "creation_date": 1560150832, "answer_id": 56522043, "question_id": 55935381, "link": "https://stackoverflow.com/questions/55935381/error-in-cannot-read-property-loadchildren-of-undefined-when-tried-to-set-the/56522043#56522043", "title": "ERROR in Cannot read property &#39;loadChildren&#39; of undefined when tried to set the path", "body": "<p>This is similar to what a lot of other people have experienced with rouge commas.  Remove the last comma at the end of your route list, since the router thinks that there are 4 items, the last being a <code>void 0</code>/<code>undefined</code> item, and thus missing the <code>loadChildren</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: getLandingPage(),\n    pathMatch: \"full\",\n  },\n  {\n    path: \"tabs\",\n    loadChildren: \"./pages/tabs/tabs.module#TabsPageModule\",\n  },\n  {\n    path: 'landing',\n    loadChildren: './pages/landing/landing.module#LandingPageModule'\n  }\n];\n</code></pre>\n\n<p><em>(notice the missing comma after your 'landing' route entry)</em></p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 5361500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQTSh.png?s=128&g=1", "display_name": "olivejp", "link": "https://stackoverflow.com/users/5361500/olivejp"}, "is_accepted": false, "score": 0, "last_activity_date": 1600369318, "creation_date": 1600369318, "answer_id": 63944653, "question_id": 55935381, "link": "https://stackoverflow.com/questions/55935381/error-in-cannot-read-property-loadchildren-of-undefined-when-tried-to-set-the/63944653#63944653", "title": "ERROR in Cannot read property &#39;loadChildren&#39; of undefined when tried to set the path", "body": "<p>I get this same error today '<strong>ERROR in Cannot read property 'loadChildren' of undefined</strong>'.</p>\n<p>I think this error could occurs in many ways. But for me, it was just a missing 'export' on a CanActivate class.</p>\n<p>I had :</p>\n<pre><code>@Injectable({providedIn: 'root'})\nclass MyActivator implements CanActivate\n</code></pre>\n<p>In fact I should have :</p>\n<pre><code>@Injectable({providedIn: 'root'})\nexport class MyActivator implements CanActivate\n</code></pre>\n<p>This error was a little bit tricky to find ! So I just want to mention it here.</p>\n"}, {"tags": [], "owner": {"reputation": 32718, "user_id": 1697459, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bzP9B.png?s=128&g=1", "display_name": "Wilt", "link": "https://stackoverflow.com/users/1697459/wilt"}, "is_accepted": false, "score": 1, "last_activity_date": 1600689367, "creation_date": 1600689367, "answer_id": 63991781, "question_id": 55935381, "link": "https://stackoverflow.com/questions/55935381/error-in-cannot-read-property-loadchildren-of-undefined-when-tried-to-set-the/63991781#63991781", "title": "ERROR in Cannot read property &#39;loadChildren&#39; of undefined when tried to set the path", "body": "<h2>Check for any programmatic logic in your router config</h2>\n<p><em>This problem might occur when you use something else then a simple object with string keys and string values inside your router configuration.</em></p>\n<hr />\n<p>In my case it occurred when setting a regular expression inside the data object of a certain route:</p>\n<pre><code>{\n  path: 'path', \n  component: MyComponent,\n  data: {\n    regEx: /^[a-f\\d]{24}$/i,\n  },\n},\n</code></pre>\n<p>The compiler choked on this and simply reported the non-descriptive error:</p>\n<blockquote>\n<p>ERROR in Cannot read property 'loadChildren' of undefined</p>\n</blockquote>\n<hr />\n<p>Other examples I found on people running into this issue are related. For example <a href=\"https://github.com/angular/angular-cli/issues/4686#issuecomment-400572965\" rel=\"nofollow noreferrer\">this one on GitHub</a> where someone uses a constant for a key of a resolver:</p>\n<pre><code>const SOME_CONSTANT = 'someResolver',\n\n{\n  path: 'path',\n  component: MyComponent,\n  resolve: {\n    [SOME_CONSTANT]: SomeResolver, // &lt;-- you can't do this\n  },\n},\n</code></pre>\n<p>In other words, when running into this issue check if you have some keys, values or other parts of your router config defined programmatically.</p>\n"}], "owner": {"reputation": 50111, "user_id": 1077309, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yghA4.jpg?s=128&g=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/1077309/sampath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4272, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1600689367, "creation_date": 1556709374, "last_edit_date": 1556711189, "question_id": 55935381, "link": "https://stackoverflow.com/questions/55935381/error-in-cannot-read-property-loadchildren-of-undefined-when-tried-to-set-the", "title": "ERROR in Cannot read property &#39;loadChildren&#39; of undefined when tried to set the path", "body": "<p>I need to conditionally load the route path. I have tried below. But it gives this error. Can you tell me how to do this kind of task?</p>\n\n<blockquote>\n  <p>[ng] ERROR in Cannot read property 'loadChildren' of undefined [ng] i\n  \uff62wdm\uff63: Failed to compile.</p>\n</blockquote>\n\n<p>And:</p>\n\n<blockquote>\n  <p>app-routing.module.ts:21 Uncaught TypeError: Cannot read property\n  'getLandingPage' of undefined\n      at Module../src/app/app-routing.module.ts (app-routing.module.ts:21)\n      at <strong>webpack_require</strong> (bootstrap:83)\n      at Module../src/app/app.module.ts (app.component.ts:21)\n      at <strong>webpack_require</strong> (bootstrap:83)\n      at Module../src/main.ts (main.ts:1)\n      at <strong>webpack_require</strong> (bootstrap:83)\n      at Object.0 (main.ts:13)\n      at <strong>webpack_require</strong> (bootstrap:83)\n      at checkDeferredModules (bootstrap:45)\n      at Array.webpackJsonpCallback [as push] (bootstrap:32)</p>\n</blockquote>\n\n<p><em>app.routing.module.ts</em></p>\n\n<pre><code>const routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: this.getLandingPage(), // here is the issue\n    pathMatch: \"full\",\n  },\n  {\n   path: \"tabs\",\n   loadChildren: \"./pages/tabs/tabs.module#TabsPageModule\",\n  },\n  {\n   path: 'landing',\n  loadChildren: './pages/landing/landing.module#LandingPageModule'\n },\n];\n\nexport class AppRoutingModule {\n\n  getLandingPage(): string {\n    let url = \"\";\n    switch (environment.hotelName) {\n      case \"h1\":\n        url = \"tabs\";\n        break;\n      case \"h2\":\n        url = \"landing\";\n        break;\n      default:\n    }\n    return url;\n  }\n\n\n}\n</code></pre>\n\n<p>I have <code>auth.gurad.ts</code> as shown below. I don't think where I can use it for this. </p>\n\n<pre><code>export class AuthGuard implements CanActivate {\n  constructor(private router: Router,\n    private user: UserService,\n    private localStorageService: LocalStorageService) { }\n  canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise&lt;boolean&gt; {\n    return new Promise(async resolve =&gt; {\n      const userInfo: UserInfo = await this.localStorageService.get(LocalStorage.USER_INFO);\n      if (userInfo &amp;&amp; (moment() &lt; moment(userInfo.expireDate))) {\n        this.user.guest = false;\n        return resolve(true);\n      }\n      this.user.guest = true;\n      this.router.navigate([\"/sign-in\"]);\n      return resolve(false);\n    });\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1556709411, "post_id": 55935361, "comment_id": 98523340, "body": "You don&#39;t. You put the code that you want to run later inside the callback (in your case, after the <code>clearInterval()</code>)."}, {"owner": {"reputation": 319, "user_id": 11384062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0469a2d1cf62968669986aa6a2163e?s=128&d=identicon&r=PG&f=1", "display_name": "zuyi", "link": "https://stackoverflow.com/users/11384062/zuyi"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1556709764, "post_id": 55935361, "comment_id": 98523478, "body": "corrected.........."}], "answers": [{"tags": [], "owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "is_accepted": false, "score": -1, "last_activity_date": 1556712361, "creation_date": 1556712361, "answer_id": 55936018, "question_id": 55935361, "link": "https://stackoverflow.com/questions/55935361/how-to-ensure-that-the-code-below-call-back-always-runs-after-call-back-finishes/55936018#55936018", "title": "How to ensure that the code below call back always runs after call back finishes", "body": "<blockquote>\n  <p>I want to run it regardless if res or err</p>\n</blockquote>\n\n<p>Put the code into a function, call that function in both cases.</p>\n"}], "owner": {"reputation": 319, "user_id": 11384062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0469a2d1cf62968669986aa6a2163e?s=128&d=identicon&r=PG&f=1", "display_name": "zuyi", "link": "https://stackoverflow.com/users/11384062/zuyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556712496, "creation_date": 1556709287, "last_edit_date": 1556712496, "question_id": 55935361, "link": "https://stackoverflow.com/questions/55935361/how-to-ensure-that-the-code-below-call-back-always-runs-after-call-back-finishes", "title": "How to ensure that the code below call back always runs after call back finishes", "body": "<p>The set interval runs the code again and again. The <code>console.log(\"2\")</code> is printed before <code>console.log(\"1\")</code>, I want to run it sequentially</p>\n\n<pre><code>let repeat = setInterval(() =&gt; {\n    let index = 0\n    let file = { Id: this.g[index].id }\n    this.auth.verifyProgress(file).subscribe(\n        (res: any) =&gt; {\n            running = ....;\n            if (!running) {\n                clearInterval(repeat)\n            }\n            console.log('1')\n        },\n        (err) =&gt; {\n            console.log(err)\n        }\n    )\n    index = index + 1\n    if (index &gt;= numberOfFiles) {\n        index = 0\n    }\n    console.log('2')\n}, 4000)\n</code></pre>\n\n<p>I don't want to put the code outside, inside the success callback because I want to run it regardless if res or err. What should I do.</p>\n\n<p>Can it be done using promise or await ?</p>\n"}, {"tags": ["javascript", "typescript", "ecmascript-6", "ecmascript-5"], "answers": [{"tags": [], "owner": {"reputation": 21436, "user_id": 1021703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g09TV.jpg?s=128&g=1", "display_name": "Jeremy Thille", "link": "https://stackoverflow.com/users/1021703/jeremy-thille"}, "is_accepted": false, "score": 2, "last_activity_date": 1556709069, "creation_date": 1556709069, "answer_id": 55935327, "question_id": 55935287, "link": "https://stackoverflow.com/questions/55935287/javascript-outer-method-calling-from-nested-functions/55935327#55935327", "title": "Javascript: outer method calling from nested functions", "body": "<p>Use ES6 double arrow notation to conserve the <code>this</code> scope.</p>\n\n<pre><code>export class DetailsComponent implements OnInit, OnDestroy\n{\nupdateTodoPromise.then( fulfilled =&gt; { // &lt;--- here\n            // yay, you got a new phone\n            this.openSnackBar('Task saved successfully!', 'CLOSE');\n        })\n        .catch( error =&gt; {  // &lt;--- and here\n            // ops, mom don't buy it\n            console.log(error.message);\n            this.openSnackBar('Task saved successfully!','CLOSE');\n        });\n\n    }\n\n    public openSnackBar(full: string, full2: string) {\n        this.snackBar.open(full, full2, {\n            duration: 5000,\n        });\n    }\n</code></pre>\n"}], "owner": {"reputation": 228, "user_id": 1780480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9551b88e13db67c83ae4424a6f005d86?s=128&d=identicon&r=PG&f=1", "display_name": "matio", "link": "https://stackoverflow.com/users/1780480/matio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "closed_date": 1556709356, "answer_count": 1, "score": 0, "last_activity_date": 1556709069, "creation_date": 1556708905, "question_id": 55935287, "link": "https://stackoverflow.com/questions/55935287/javascript-outer-method-calling-from-nested-functions", "closed_reason": "Duplicate", "title": "Javascript: outer method calling from nested functions", "body": "<p>I want to call <code>openSnackBar</code> but I get exception. Anyone could please help me how to deal with outer method calling from nested functions?</p>\n\n<pre><code>export class DetailsComponent implements OnInit, OnDestroy\n{\nupdateTodoPromise.then(function (fulfilled) {\n            // yay, you got a new phone\n            this.openSnackBar('Task saved successfully!', 'CLOSE');\n        })\n        .catch(function (error) {\n            // ops, mom don't buy it\n            console.log(error.message);\n            this.openSnackBar('Task saved successfully!','CLOSE');\n        });\n\n    }\n\n    public openSnackBar(full: string, full2: string) {\n        this.snackBar.open(full, full2, {\n            duration: 5000,\n        });\n    }\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 10154, "user_id": 2482570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1U8oq.jpg?s=128&g=1", "display_name": "Max Heiber", "link": "https://stackoverflow.com/users/2482570/max-heiber"}, "edited": false, "score": 0, "creation_date": 1556707954, "post_id": 55934697, "comment_id": 98522802, "body": "Note: this is not the same issue as <a href=\"https://stackoverflow.com/questions/50593774/cannot-find-typescript-module-even-though-tsc-successfully-manages-to-resolve-it\" title=\"cannot find typescript module even though tsc successfully manages to resolve it\">stackoverflow.com/questions/50593774/&hellip;</a>, which was about a runtime failure."}], "answers": [{"comments": [{"owner": {"reputation": 10154, "user_id": 2482570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1U8oq.jpg?s=128&g=1", "display_name": "Max Heiber", "link": "https://stackoverflow.com/users/2482570/max-heiber"}, "edited": false, "score": 1, "creation_date": 1556724341, "post_id": 55936224, "comment_id": 98530188, "body": "Thanks for this answer, but it doesn&#39;t seem to be correct or fully answer what I was asking. The path resolution is correct: you may have missed the part of my question where I said where I&#39;m running &#39;tsc&#39; (edited the question to make this clearer). Also, this answer doesn&#39;t address &#39;Question 1&#39; or &#39;Question 2&#39;, which were what I wanted to know."}, {"owner": {"reputation": 709, "user_id": 8113590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe0427f22b194e9e23db74f5e1a6f04?s=128&d=identicon&r=PG&f=1", "display_name": "J. Koutsoumpas", "link": "https://stackoverflow.com/users/8113590/j-koutsoumpas"}, "reply_to_user": {"reputation": 10154, "user_id": 2482570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1U8oq.jpg?s=128&g=1", "display_name": "Max Heiber", "link": "https://stackoverflow.com/users/2482570/max-heiber"}, "edited": false, "score": 0, "creation_date": 1608579940, "post_id": 55936224, "comment_id": 115622246, "body": "It is correct for your question, before you edited it and changed it. Also why did you edit my answer?"}, {"owner": {"reputation": 10154, "user_id": 2482570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1U8oq.jpg?s=128&g=1", "display_name": "Max Heiber", "link": "https://stackoverflow.com/users/2482570/max-heiber"}, "edited": false, "score": 1, "creation_date": 1608587410, "post_id": 55936224, "comment_id": 115625001, "body": "I&#39;m sorry, I have no memory of this and am not working on this stuff anymore. I&#39;ll vote your answer up"}], "tags": [], "owner": {"reputation": 709, "user_id": 8113590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe0427f22b194e9e23db74f5e1a6f04?s=128&d=identicon&r=PG&f=1", "display_name": "J. Koutsoumpas", "link": "https://stackoverflow.com/users/8113590/j-koutsoumpas"}, "is_accepted": false, "score": 0, "last_activity_date": 1556724176, "last_edit_date": 1556724176, "creation_date": 1556713399, "answer_id": 55936224, "question_id": 55934697, "link": "https://stackoverflow.com/questions/55934697/typescript-how-can-a-module-be-found-but-not-resolved-what-does-this-have-to/55936224#55936224", "title": "TypeScript: How can a module be &#39;found&#39; but not resolved? What does this have to do with &#39;noResolution&#39;?", "body": "<p>The cause of this issue is an incorrect named path in the <code>paths</code> option in <code>tsconfig.json</code>. You are defining a path named <code>foo</code> to point to \"../typings/foo\" relative to the project's root, but that is not correct because as it translates to a non-existent path:</p>\n\n<p>Assuming the <code>proj</code> directory is this:</p>\n\n<p><code>C:/dev/ts-options</code> </p>\n\n<p>then combined with the defined <code>foo</code> path it expands to:</p>\n\n<p><code>C:/dev/ts-options/../typings/foo</code></p>\n\n<p>which results in the non-existent path:</p>\n\n<p><code>C:/dev/rp-build/node/rp-cli/test/fixtures/src/typescript/typings/foo</code>.</p>\n\n<p>The resolving does find it eventually by going down all the directories but the <code>import</code> uses the <code>foo</code> named path that gets translated to the above wrong full path.</p>\n\n<p>So there are two solutions, either you correct the <code>foo</code> path definition in the tsconfig.json, or use a relative path to the main.ts of foo/index.d.ts in the <code>import</code> statement like this:</p>\n\n<pre><code>import foo from \"../../../whatever/typings/foo\"\n</code></pre>\n"}], "owner": {"reputation": 10154, "user_id": 2482570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1U8oq.jpg?s=128&g=1", "display_name": "Max Heiber", "link": "https://stackoverflow.com/users/2482570/max-heiber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556964223, "creation_date": 1556705759, "last_edit_date": 1556964223, "question_id": 55934697, "link": "https://stackoverflow.com/questions/55934697/typescript-how-can-a-module-be-found-but-not-resolved-what-does-this-have-to", "title": "TypeScript: How can a module be &#39;found&#39; but not resolved? What does this have to do with &#39;noResolution&#39;?", "body": "<p>When I run tsc in the 'proj' directory with --traceResolution, I see the module 'foo' is \"successfully resolved\" but not \"found\":</p>\n\n<pre><code>======== Module name 'foo' was successfully resolved to 'C:/dev/ts-options/typings/foo/index.d.ts'. ========\n\nmain.ts(1,18): error TS2307: Cannot find module 'foo'.\n</code></pre>\n\n<p>Setting <code>\"noResolve\": true</code> in tsconfig.compilerOptions makes the error go away. But I'm supr-confused!</p>\n\n<p>Question 1: What is the difference between \"resolution\" and \"finding\"? I thought these were synonyms</p>\n\n<p>Question 2: Why does 'noResolve' affect this behavior? What does noResolve actually do? TS <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"nofollow noreferrer\">compiler options docs</a> say \"Do not add triple-slash references or module import targets to the list of compiled files.\" but I don't know what that means.</p>\n\n<p>With this directory structure</p>\n\n<ul>\n<li>/c/dev/ts-options/\n\n<ul>\n<li>typings/\n\n<ul>\n<li>foo\n\n<ul>\n<li>index.d.ts</li>\n</ul></li>\n</ul></li>\n<li>proj <strong>this is where I'm running tsc</strong>\n\n<ul>\n<li>tsconfig.json</li>\n<li>main.ts</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>proj/tsconfig.json (problem is fixed if I change noResolve to false):</p>\n\n<pre><code>{\n    \"compilerOptions\": {\n        \"baseUrl\": \".\",\n        \"types\": [],\n        \"outDir\": \"../out\",\n        \"paths\": {\n            \"foo\": [\n                \"../typings/foo\"\n            ],\n        },\n        \"noResolve\": true\n    },\n    \"include\": [\n        \"**/*.ts\",\n    ],\n    \"exclude\": [\n        \"node_modules\"\n    ]\n}\n</code></pre>\n\n<p>proj/main.ts:</p>\n\n<p><code>import foo  from \"foo\"</code></p>\n\n<p>typings/foo/index.d.ts:</p>\n\n<pre><code>declare function foo(num: number): number;\nexport default foo;\n</code></pre>\n\n<h2>Update</h2>\n\n<p>Two solutions:</p>\n\n<ul>\n<li>Set noResolve: false</li>\n<li>OR add \"../typings\" to the \"include\" section in the tsconfig</li>\n</ul>\n\n<p>My guess is that there is a concept of a \"compilation unit\" such that:</p>\n\n<ul>\n<li><p>with <code>noResolve: false</code> then the compilation unit can grow dynamically as TS follows <code>import</code>s.</p></li>\n<li><p>With <code>noResolve: true</code>, then the compilation unit is fixed to\nsomething like <code>tsconfig.baseUrl/** + (tsconfig.include -    tsconfi.exclude)</code> .</p></li>\n<li><p>When a file is outside the compilation unit then TS can 'resolve' an import (find out the path to a .d.ts/.ts/.tsx file) but won't 'find' it (actually read the file).</p></li>\n</ul>\n\n<p>This still doesn't really make sense to me,  though. What's the point of 'resolving' to a location one knows one won't be able to 'find'?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1556706848, "post_id": 55934290, "comment_id": 98522396, "body": "It would be helpful if you showed the code where this error occurs... please review what constitutes a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more information.  My guess right now is that you are doing something weird with a <code>Date</code> object."}, {"owner": {"reputation": 956, "user_id": 10628282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7db2c233d0763739b14dd33e3ee39b?s=128&d=identicon&r=PG&f=1", "display_name": "user9847788", "link": "https://stackoverflow.com/users/10628282/user9847788"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1556707008, "post_id": 55934290, "comment_id": 98522451, "body": "@jcalz  <code>JSON.stringify(this.listBase)</code> is where the first error is occurring because it&#39;s trying to serialise a cyclic object. <code>console.log(JSON.stringify(this.listBase, getCircularReplacer()));</code> is where the new error occurs"}, {"owner": {"reputation": 1616, "user_id": 6801926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ab0V.png?s=128&g=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/6801926/marcus"}, "edited": false, "score": 1, "creation_date": 1556710972, "post_id": 55934290, "comment_id": 98523945, "body": "I&#39;m not sure the error you are getting is <i>directly</i> related to your replacer function, but may have something to do with what is in your list. Could you perhaps post an example of what this.demoList looks like?"}], "answers": [{"tags": [], "owner": {"reputation": 709, "user_id": 8113590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe0427f22b194e9e23db74f5e1a6f04?s=128&d=identicon&r=PG&f=1", "display_name": "J. Koutsoumpas", "link": "https://stackoverflow.com/users/8113590/j-koutsoumpas"}, "is_accepted": false, "score": 1, "last_activity_date": 1556711753, "creation_date": 1556711753, "answer_id": 55935872, "question_id": 55934290, "link": "https://stackoverflow.com/questions/55934290/how-to-stringify-a-cyclic-object-in-typescript/55935872#55935872", "title": "How to Stringify a Cyclic Object in Typescript?", "body": "<p>The error that you are getting:</p>\n\n<blockquote>\n  <p>TypeError: toISOString property is not callable</p>\n</blockquote>\n\n<p>Means that somewhere a <strong>property</strong> named <code>toISOString</code> of some object has been called as if it was a method. e.g.:</p>\n\n<pre><code>someObj.toISOString();\n</code></pre>\n\n<p>The only method known in Javascript to be built-in and named <code>toISOString</code> is the <code>Date.prototype.toISOString</code>. </p>\n\n<p>JSON.stringify() knows about some standard value types and how to convert (serialize) them to a string. It usually accomplishes that by calling the expected-to-exist <code>toString()</code> method on them. It also knows that the <code>Date</code> object has a <code>toISOString()</code> method and calls that instead whenever it finds one. Therefore in this case I assume that <code>JSON.stringify()</code> encounters an object inside the <code>this.demoList</code> that although is of type <code>Date</code>, yet it has a defined <strong>property</strong> named <code>toISOString</code> (instead of a method), which overrides the existing <code>Date.prototype.toISOString()</code>, and at that point it tries to call it as a method and you get this error.</p>\n\n<p>I am unable to guess which is this object in your particular case, so I suggest that you should examine all the objects that are inside the <code>this.demoList</code> one by one (and their children) using the developer tools of your browser and find out which one is the \"offending\" object.</p>\n"}], "owner": {"reputation": 956, "user_id": 10628282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7db2c233d0763739b14dd33e3ee39b?s=128&d=identicon&r=PG&f=1", "display_name": "user9847788", "link": "https://stackoverflow.com/users/10628282/user9847788"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556711753, "creation_date": 1556703516, "last_edit_date": 1556707364, "question_id": 55934290, "link": "https://stackoverflow.com/questions/55934290/how-to-stringify-a-cyclic-object-in-typescript", "title": "How to Stringify a Cyclic Object in Typescript?", "body": "<p>I am trying to stringify a cyclic object in my typescript. Here is my original code &amp; error:</p>\n\n<p><strong>app.component.ts:</strong></p>\n\n<pre><code>updateList(list: any) {\n    this.demolist = Array.apply(this, list);\n    console.log('List - ' + JSON.stringify(this.demolist));\n}\n</code></pre>\n\n<blockquote>\n  <p>TypeError: cyclic object value</p>\n</blockquote>\n\n<p>I then tried the following code inside my <em>updateList()</em> method:</p>\n\n<pre><code>const getCircularReplacer = () =&gt; {\n      const seen = new WeakSet();\n      return (key, value) =&gt; {\n        if (typeof value === \"object\" &amp;&amp; value !== null) {\n          if (seen.has(value)) {\n            return;\n          }\n          seen.add(value);\n        }\n        return value;\n      };\n    };\n      console.log(JSON.stringify(this.demolist, getCircularReplacer()));\n}\n</code></pre>\n\n<p>But now I'm getting this error:</p>\n\n<blockquote>\n  <p>TypeError: toISOString property is not callable</p>\n</blockquote>\n\n<p>Can someone please show me what changes I need to make to display the contents of my <strong><em>this.listBase</em></strong>?</p>\n\n<p>Here is my HTML:</p>\n\n<pre><code>&lt;upload #fileUpload (listChange)=\"updateList($event)\" data-kind=\"primary\" restrictFiles=\".pdf,.doc,.docx\"&gt;\n&lt;/upload&gt;\n\n&lt;list #listBase [IncludeComponent]=\"inputComponent\" [list]=\"demolist\"&gt;    \n&lt;/list&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "api", "service", "query-parameters"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 0, "creation_date": 1556706564, "post_id": 55934789, "comment_id": 98522284, "body": "i tried in both the methods....the parameters are getting passed into &quot;Request payload&quot; rather as &quot;query parameters&quot;:("}, {"owner": {"reputation": 401, "user_id": 6179400, "user_type": "registered", "profile_image": "https://graph.facebook.com/802378919906852/picture?type=large", "display_name": "Kenana Reda", "link": "https://stackoverflow.com/users/6179400/kenana-reda"}, "reply_to_user": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 0, "creation_date": 1556706873, "post_id": 55934789, "comment_id": 98522408, "body": "I&#39;ve update he answer, check plz and add a screenshot for request to be able to have more detials"}, {"owner": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 0, "creation_date": 1556709444, "post_id": 55934789, "comment_id": 98523351, "body": "I&#39;ve tried with your approach and i have edited the question...added screen shot how parameters are getting passed in request payload.rather,in headers and query parameters"}], "tags": [], "owner": {"reputation": 401, "user_id": 6179400, "user_type": "registered", "profile_image": "https://graph.facebook.com/802378919906852/picture?type=large", "display_name": "Kenana Reda", "link": "https://stackoverflow.com/users/6179400/kenana-reda"}, "is_accepted": false, "score": 0, "last_activity_date": 1556706837, "last_edit_date": 1556706837, "creation_date": 1556706304, "answer_id": 55934789, "question_id": 55934132, "link": "https://stackoverflow.com/questions/55934132/how-will-i-pass-query-parameters-to-rest-api-inside-a-service-in-an-angular-appl/55934789#55934789", "title": "How will i pass query parameters to REST API inside a service in an angular application?", "body": "<p>you can either send them as Params </p>\n\n<pre><code>const headers: HttpHeaders = new HttpHeaders({\n            \"_id\" : countId, \n            \"content-type\" : \"application/json\"\n        });\nlet params = new HttpParams().set('type',fruits).set('fields',_all);\nreturn this.http.put ( \"http://localhost:2000/world/123456789/avengers\",{ params: params, headers: headers})\n</code></pre>\n\n<p>OR you can send Options </p>\n\n<pre><code>let options: HttpOptions;\noptions.headers = headers;\noptions.params = params;\nreturn this.http.put ( \"http://localhost:2000/world/123456789/avengers\", options )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 0, "creation_date": 1556709933, "post_id": 55935400, "comment_id": 98523533, "body": "<a href=\"http://localhost:2000/world/123456789/avengerstype=fruits&amp;fields=_all....tried\" rel=\"nofollow noreferrer\">localhost:2000/world/123456789/&hellip;</a> will pass like this rather as query parameters....you meant i should add &#39;?&#39; by myself"}, {"owner": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 0, "creation_date": 1556710370, "post_id": 55935400, "comment_id": 98523709, "body": "yes!!!..they are getting as query parameters.but, in both query parameters and request payload :|"}, {"owner": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 0, "creation_date": 1556710426, "post_id": 55935400, "comment_id": 98523729, "body": "if  i  remove params from options again same behavior!!"}, {"owner": {"reputation": 20818, "user_id": 4964569, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153480747890827/picture?type=large", "display_name": "Hien Nguyen", "link": "https://stackoverflow.com/users/4964569/hien-nguyen"}, "reply_to_user": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "edited": false, "score": 1, "creation_date": 1556710825, "post_id": 55935400, "comment_id": 98523890, "body": "I found that PUT can not append body in query string, you need append to it manual"}], "tags": [], "owner": {"reputation": 20818, "user_id": 4964569, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153480747890827/picture?type=large", "display_name": "Hien Nguyen", "link": "https://stackoverflow.com/users/4964569/hien-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1556710792, "last_edit_date": 1556710792, "creation_date": 1556709418, "answer_id": 55935400, "question_id": 55934132, "link": "https://stackoverflow.com/questions/55934132/how-will-i-pass-query-parameters-to-rest-api-inside-a-service-in-an-angular-appl/55935400#55935400", "title": "How will i pass query parameters to REST API inside a service in an angular application?", "body": "<p>Because HTTP <code>PUT/POST</code> send body without append query string in URL (you can use some library to build query string) so that you need build your URL and option</p>\n\n<pre><code> * @param url The endpoint URL.\n     * @param body The resources to add/update.\n     * @param options HTTP options\n     *\n     * @return An `Observable` of the response, with the response body as a JSON object.\n     */\n    put(url: string, body: any | null, options?: {}\n\n\nall(countId) {\n        const headers: HttpHeaders = new HttpHeaders({\n            \"_id\" : countId, \n            \"content-type\" : \"application/json\"\n        });\n\n        const options = {\n            headers: headers,\n            params: params\n        };\n        return this.http.put ( \"http://localhost:2000/world/123456789/avengers??type=fruits&amp;fields=_all\", options)\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "is_accepted": true, "score": 1, "last_activity_date": 1556721165, "creation_date": 1556721165, "answer_id": 55937890, "question_id": 55934132, "link": "https://stackoverflow.com/questions/55934132/how-will-i-pass-query-parameters-to-rest-api-inside-a-service-in-an-angular-appl/55937890#55937890", "title": "How will i pass query parameters to REST API inside a service in an angular application?", "body": "<p>You are currently sending your options as the request payload, like you have discovered. If you do not have a payload, you can pass <code>null</code>:</p>\n\n<pre><code>all(countId) {\n  // ....\n  return this.http.put(\"...\", null, options)\n                              ^^^^\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 9907295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b6b22d887ceb42615457856003bc5c?s=128&d=identicon&r=PG&f=1", "display_name": "Amarat", "link": "https://stackoverflow.com/users/9907295/amarat"}, "is_accepted": false, "score": 0, "last_activity_date": 1556776783, "last_edit_date": 1556776783, "creation_date": 1556775605, "answer_id": 55946228, "question_id": 55934132, "link": "https://stackoverflow.com/questions/55934132/how-will-i-pass-query-parameters-to-rest-api-inside-a-service-in-an-angular-appl/55946228#55946228", "title": "How will i pass query parameters to REST API inside a service in an angular application?", "body": "<p>/********** This is my component file ***********/  </p>\n\n<pre><code>page: any;\nerror: {};\norderObj: {};\n\nngOnInit(){\n  const type: string = this.route.snapshot.queryParamMap.get('type');\n  const fields: string = this.route.snapshot.queryParamMap.get('fields');\n  this.orderObj = {'type' : type, 'fields' : fields}\n\n  this.route.paramMap.pipe(\n  switchMap((params: ParamMap) =&gt;\n    this.cmspageService.getPage(params.get('slug'), this.orderObj)\n  )\n  ).subscribe(\n  (data: any) =&gt; this.page = data,\n  error =&gt; this.error = error\n  );\n}\n</code></pre>\n\n<p>/********** this is my service file ***********/</p>\n\n<pre><code>public queryStringUrl : string\n\ngetPage(slug: string, data:object){\n   if(data){\n      this.queryStringUrl = '?';\n      let i = 0; \n      for (var p in data) {\n       if (data.hasOwnProperty(p)){\n        if(i != 0)\n        this.queryStringUrl += '&amp;';\n        this.queryStringUrl +=  p + '=' + data[p];\n      }\n      i++;\n    }\n    //return this.queryStringUrl;\n    // alert(this.queryStringUrl);\n}\n\nreturn this.http.get&lt;Page&gt;('http://localhost/dev/blogger/api/page/' + slug + this.queryStringUrl,)\n.pipe(\n  catchError(this.handleError)\n);\n}\n</code></pre>\n\n<p>Referecne link : <a href=\"https://alligator.io/angular/query-parameters/\" rel=\"nofollow noreferrer\">https://alligator.io/angular/query-parameters/</a></p>\n"}], "owner": {"reputation": 149, "user_id": 7203857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07043c0c6f1e3a6ac1ba8e4e0506c22b?s=128&d=identicon&r=PG&f=1", "display_name": "HK123", "link": "https://stackoverflow.com/users/7203857/hk123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4690, "favorite_count": 0, "accepted_answer_id": 55937890, "answer_count": 4, "score": 2, "last_activity_date": 1556776783, "creation_date": 1556702729, "last_edit_date": 1556709158, "question_id": 55934132, "link": "https://stackoverflow.com/questions/55934132/how-will-i-pass-query-parameters-to-rest-api-inside-a-service-in-an-angular-appl", "title": "How will i pass query parameters to REST API inside a service in an angular application?", "body": "<p>I'm trying to pass query parameters inside a service to a REST API.</p>\n\n<p>Example of how i should pass to API.(EXPECTED)</p>\n\n<pre><code>http://localhost:2000/world/123456789/avengers?type=fruits&amp;fields=_all\n</code></pre>\n\n<p>Have tried as below:</p>\n\n<pre><code>     all(countId) {\n        const headers: HttpHeaders = new HttpHeaders({\n            \"_id\" : countId, \n            \"content-type\" : \"application/json\"\n        });\n        let params = new HttpParams();\n        params = params.append(\"type\", \"fruits\");\n        params = params.append(\"fields\", \"_all\");\n        const options = {\n            headers: headers,\n            params: params\n        };\n        return this.http.put ( \"http://localhost:2000/world/123456789/avengers\", options )\n    }\n</code></pre>\n\n<p>But i am not able to pass them has query parameters.how will i do that?</p>\n\n<p><a href=\"https://i.stack.imgur.com/LCzuG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LCzuG.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7098616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YCUZhvolHL0/AAAAAAAAAAI/AAAAAAAAAKQ/Q9pTlXgp2js/photo.jpg?sz=128", "display_name": "mohsen shabanian", "link": "https://stackoverflow.com/users/7098616/mohsen-shabanian"}, "edited": false, "score": 0, "creation_date": 1556703245, "post_id": 55934098, "comment_id": 98521072, "body": "this made new error: <code>Cannot invoke an object which is possibly &#39;null&#39; or &#39;undefined&#39;.</code>"}, {"owner": {"reputation": 773, "user_id": 729234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/226bc5aa92a7a4eea8ad0071030a37cb?s=128&d=identicon&r=PG", "display_name": "Esben Andersen", "link": "https://stackoverflow.com/users/729234/esben-andersen"}, "reply_to_user": {"reputation": 23, "user_id": 7098616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YCUZhvolHL0/AAAAAAAAAAI/AAAAAAAAAKQ/Q9pTlXgp2js/photo.jpg?sz=128", "display_name": "mohsen shabanian", "link": "https://stackoverflow.com/users/7098616/mohsen-shabanian"}, "edited": false, "score": 0, "creation_date": 1556703877, "post_id": 55934098, "comment_id": 98521324, "body": "Can you provide a stacktrace ?"}, {"owner": {"reputation": 23, "user_id": 7098616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YCUZhvolHL0/AAAAAAAAAAI/AAAAAAAAAKQ/Q9pTlXgp2js/photo.jpg?sz=128", "display_name": "mohsen shabanian", "link": "https://stackoverflow.com/users/7098616/mohsen-shabanian"}, "edited": false, "score": 0, "creation_date": 1556704367, "post_id": 55934098, "comment_id": 98521500, "body": "<code>Cannot invoke an expression whose type lacks a call signature. Type &#39;string | number | boolean | {} | ReactElement&lt;any, string | ((props: any) =&gt; ReactElement&lt;any, string | ... | (new (props: any) =&gt; Component&lt;any, any, any&gt;)&gt; | null) | (new (props: any) =&gt; Component&lt;any, any, any&gt;)&gt; | ReactNodeArray | ReactPortal&#39; has no compatible call signatures.  TS2349</code>"}, {"owner": {"reputation": 773, "user_id": 729234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/226bc5aa92a7a4eea8ad0071030a37cb?s=128&d=identicon&r=PG", "display_name": "Esben Andersen", "link": "https://stackoverflow.com/users/729234/esben-andersen"}, "reply_to_user": {"reputation": 23, "user_id": 7098616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YCUZhvolHL0/AAAAAAAAAAI/AAAAAAAAAKQ/Q9pTlXgp2js/photo.jpg?sz=128", "display_name": "mohsen shabanian", "link": "https://stackoverflow.com/users/7098616/mohsen-shabanian"}, "edited": false, "score": 1, "creation_date": 1556704602, "post_id": 55934098, "comment_id": 98521599, "body": "That must be an error in another part of your code. Maybe where you use the App component, or in one of the child components."}, {"owner": {"reputation": 23, "user_id": 7098616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YCUZhvolHL0/AAAAAAAAAAI/AAAAAAAAAKQ/Q9pTlXgp2js/photo.jpg?sz=128", "display_name": "mohsen shabanian", "link": "https://stackoverflow.com/users/7098616/mohsen-shabanian"}, "edited": false, "score": 0, "creation_date": 1556800696, "post_id": 55934098, "comment_id": 98557153, "body": "you said true. make project again and problem solved. thanks"}], "tags": [], "owner": {"reputation": 773, "user_id": 729234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/226bc5aa92a7a4eea8ad0071030a37cb?s=128&d=identicon&r=PG", "display_name": "Esben Andersen", "link": "https://stackoverflow.com/users/729234/esben-andersen"}, "is_accepted": true, "score": 2, "last_activity_date": 1556706792, "last_edit_date": 1556706792, "creation_date": 1556702540, "answer_id": 55934098, "question_id": 55934024, "link": "https://stackoverflow.com/questions/55934024/define-function-with-html-output-in-react-with-typescript/55934098#55934098", "title": "define function with html output in React with Typescript", "body": "<p>if you have @types/react in your package.json you should be able to do </p>\n\n<pre><code>pageContent = (page:string): ReactNode | null =&gt; { \n  ... \n}\n</code></pre>\n\n<p>You probable want to return null instead of breaking. Typescript doesn't like types with optional return.</p>\n"}], "owner": {"reputation": 23, "user_id": 7098616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YCUZhvolHL0/AAAAAAAAAAI/AAAAAAAAAKQ/Q9pTlXgp2js/photo.jpg?sz=128", "display_name": "mohsen shabanian", "link": "https://stackoverflow.com/users/7098616/mohsen-shabanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 55934098, "answer_count": 1, "score": 2, "last_activity_date": 1556715519, "creation_date": 1556702188, "last_edit_date": 1556715519, "question_id": 55934024, "link": "https://stackoverflow.com/questions/55934024/define-function-with-html-output-in-react-with-typescript", "title": "define function with html output in React with Typescript", "body": "<p>I want to define class in <code>React</code> with <code>Typescript</code> which has a method with html output. but get error about output type of function.</p>\n\n<pre><code>interface StateProps {\n  page: string,\n}\nclass App extends React.Component&lt;StateProps,any&gt; {\nrender() {\n    return (\n      &lt;div className=\"App\"&gt;\n        {this.pageContent(this.props.page)}\n      &lt;/div&gt;\n    );\n}\npageContent = (page:string) =&gt; {\n    switch (page) {\n      case \"newPage\":\n         return &lt;NewPage /&gt;;\n\n      case \"otherPage\":\n         return &lt;OtherPage /&gt;;\n\n      default:\n        break;\n    }\n  }\n}\n</code></pre>\n\n<p>error was:\n<code>Type 'void' is not assignable to type 'ReactNode'.</code></p>\n\n<p>eslint suggest use <code>DetailedHTMLProps&lt;HtmlAttributes&lt;HTMLDivElement&gt;,HTMLDivElement&gt;</code> but it didnt work.</p>\n"}, {"tags": ["node.js", "typescript", "nestjs", "typescript-decorator", "reflect-metadata"], "comments": [{"owner": {"reputation": 26597, "user_id": 172363, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb96a4dcb7314d7c9993cbc824123be0?s=128&d=identicon&r=PG", "display_name": "Andrew Eisenberg", "link": "https://stackoverflow.com/users/172363/andrew-eisenberg"}, "edited": false, "score": 0, "creation_date": 1558312784, "post_id": 55933892, "comment_id": 99047281, "body": "Not clear how <code>myDecoratedFunction</code> is going to be invoked and how that relates to <code>AppService</code>. Can you give a little more context? A more concrete and complete example would help."}, {"owner": {"reputation": 395, "user_id": 1598183, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e73b2f0ce8df7ea186cffcaa4f0b0641?s=128&d=identicon&r=PG", "display_name": "fwoelffel", "link": "https://stackoverflow.com/users/1598183/fwoelffel"}, "reply_to_user": {"reputation": 26597, "user_id": 172363, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb96a4dcb7314d7c9993cbc824123be0?s=128&d=identicon&r=PG", "display_name": "Andrew Eisenberg", "link": "https://stackoverflow.com/users/172363/andrew-eisenberg"}, "edited": false, "score": 0, "creation_date": 1558344629, "post_id": 55933892, "comment_id": 99056544, "body": "Thanks @AndrewEisenberg for commenting on this question. I&#39;ve found a solution but I haven&#39;t answered yet. The point was to perform something like <code>myAppServiceInstance.on(&#39;event&#39;, myClassInstance.myDecoratedFunction)</code> You can see how I implemented this here <a href=\"https://github.com/fwoelffel/nest-bull/blob/dev/lib/bull.explorer.ts\" rel=\"nofollow noreferrer\">github.com/fwoelffel/nest-bull/blob/dev/lib/bull.explorer.ts</a>"}], "owner": {"reputation": 395, "user_id": 1598183, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e73b2f0ce8df7ea186cffcaa4f0b0641?s=128&d=identicon&r=PG", "display_name": "fwoelffel", "link": "https://stackoverflow.com/users/1598183/fwoelffel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1613698459, "creation_date": 1556701451, "question_id": 55933892, "link": "https://stackoverflow.com/questions/55933892/use-a-custom-classdecorator-to-inject-a-dependency-in-class-instance", "title": "Use a custom ClassDecorator to inject a dependency in class instance", "body": "<p>I'm writing a module for NestJS where I'd like to have a custom <code>ClassDecorator</code> that:</p>\n\n<ul>\n<li>Makes a class <code>@Injectable</code></li>\n<li>Injects a dependency in the class instance</li>\n</ul>\n\n<p>Here is a few lines of code that illustrate what I expect:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// app.module.ts\n\n@Module({\n  providers: [AppService, MyClass]\n})\nexport class AppModule {}\n\n// my-class.ts\n\n@MyClassDecorator(AppService)\nexport class MyClass {}\n\n// Somewhere else where MyClass is injected as `myclass`\nconsole.log(myclass)\n// MyClass { injectedThroughDecorator: AppService {} }\n</code></pre>\n\n<p>I've googled for a lot of reference on how to implement custom decorators and I think I'm good with this. I've also started to read some documentations about <code>reflect-metadata</code> as I think reflection could help me achieve this.</p>\n\n<p>The next step is to define a method decorator that would have access to the <code>AppService</code> instance injected with <code>MyClassDecorator</code>.</p>\n\n<p>For example, let's say that <code>AppService</code> is implemented as an <code>EventEmitter</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@MyClassDecorator(AppService)\nexport class MyClass {\n\n    @MyMethodDecorator('event')\n    myDecoratedFunction(eventName: string, data: any) {\n        console.log(`Hi there! I've been triggered by the AppService's ${eventName} event with ${data}`);\n    }\n\n}\n</code></pre>\n\n<p>Do you have any advice on how I should implement such a decorator? Any help/example/reference would be greatly appreciated. Lastly, don't hesitate to ask for more details or explanation on what I'm trying to achieve.</p>\n\n<p>Thanks for reading me,\nHave a nice day!</p>\n"}, {"tags": ["typescript", "axios"], "answers": [{"comments": [{"owner": {"reputation": 12204, "user_id": 881894, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-PoAJXbkM7UQ/AAAAAAAAAAI/AAAAAAAAAAs/Xi6TKFY8WWw/photo.jpg?sz=128", "display_name": "Alexander Kim", "link": "https://stackoverflow.com/users/881894/alexander-kim"}, "edited": false, "score": 0, "creation_date": 1556712360, "post_id": 55933983, "comment_id": 98524500, "body": "While it removes the error, it actually won&#39;t pick headers value from interceptor."}], "tags": [], "owner": {"reputation": 21, "user_id": 4655657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe8b6a0792439e6c23d1c170d25576b?s=128&d=identicon&r=PG&f=1", "display_name": "miguelcg", "link": "https://stackoverflow.com/users/4655657/miguelcg"}, "is_accepted": false, "score": 0, "last_activity_date": 1556701981, "creation_date": 1556701981, "answer_id": 55933983, "question_id": 55933869, "link": "https://stackoverflow.com/questions/55933869/axios-interceptors-with-typescript/55933983#55933983", "title": "Axios interceptors with Typescript", "body": "<p>From the error that you mention you are missing a return.\nThis should work:</p>\n\n<pre><code>HTTP.interceptors.request.use((config: AxiosRequestConfig) =&gt;({\n  headers: {\n    'x-projectkey': 1234\n  }\n}))\n</code></pre>\n\n<p>Or using the <code>return</code> keyword:</p>\n\n<pre><code>HTTP.interceptors.request.use((config: AxiosRequestConfig) =&gt;{\n  return {\n    headers: {\n      'x-projectkey': 1234\n    }\n  }\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 2788542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlXid.jpg?s=128&g=1", "display_name": "Chris Nguyen", "link": "https://stackoverflow.com/users/2788542/chris-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1561954395, "creation_date": 1561954395, "answer_id": 56829930, "question_id": 55933869, "link": "https://stackoverflow.com/questions/55933869/axios-interceptors-with-typescript/56829930#56829930", "title": "Axios interceptors with Typescript", "body": "<p>You should return config like below:</p>\n\n<pre><code>HTTP.interceptors.request.use((config: AxiosRequestConfig) =&gt; {\n  config.headers['x-projectkey'] = 1234\n\n  return config\n})\n</code></pre>\n\n<p>Have fun.</p>\n"}], "owner": {"reputation": 12204, "user_id": 881894, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-PoAJXbkM7UQ/AAAAAAAAAAI/AAAAAAAAAAs/Xi6TKFY8WWw/photo.jpg?sz=128", "display_name": "Alexander Kim", "link": "https://stackoverflow.com/users/881894/alexander-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8236, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1561954395, "creation_date": 1556701332, "question_id": 55933869, "link": "https://stackoverflow.com/questions/55933869/axios-interceptors-with-typescript", "title": "Axios interceptors with Typescript", "body": "<p>How to correctly use axios's inteceptors with typescript:</p>\n\n<pre><code>import axios, { AxiosRequestConfig, AxiosInstance } from 'axios'\n\nHTTP.interceptors.request.use((config: AxiosRequestConfig) =&gt; config)\n</code></pre>\n\n<p>For example, when i create axios instance, i set up default config:</p>\n\n<pre><code>const conf: AxiosRequestConfig = {\n  baseURL: process.env.VUE_APP_API_URL\n}\n\nconst HTTP: AxiosInstance = axios.create(conf)\n</code></pre>\n\n<p>But when i try to use interceptor with custom headers:</p>\n\n<pre><code>HTTP.interceptors.request.use((config: AxiosRequestConfig) =&gt;{\n  headers: {\n    'x-projectkey': 1234\n  }\n})\n</code></pre>\n\n<p>It doesn't work:</p>\n\n<pre><code>Argument of type '(config: AxiosRequestConfig) =&gt; void' is not assignable to parameter of type '(value: AxiosRequestConfig) =&gt; AxiosRequestConfig | Promise&lt;AxiosRequestConfig&gt;'\n</code></pre>\n\n<p>I'm still new to TS, can't figure this out.</p>\n"}, {"tags": ["node.js", "typescript", "express", "jestjs", "nock"], "comments": [{"owner": {"reputation": 1067, "user_id": 7386278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a524d72f3ef3a842d6393fe029053a3b?s=128&d=identicon&r=PG&f=1", "display_name": "tagyoureit", "link": "https://stackoverflow.com/users/7386278/tagyoureit"}, "edited": false, "score": 0, "creation_date": 1556724946, "post_id": 55933851, "comment_id": 98530499, "body": "have you tried <code>.post(&#39;&#47;api&#47;analyst&#47;create-analyst-user&#39;)</code> (add a prepending /)?"}, {"owner": {"reputation": 25, "user_id": 2693824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663dc62dbfc3f534db1a58f783eb23cf?s=128&d=identicon&r=PG&f=1", "display_name": "Niek", "link": "https://stackoverflow.com/users/2693824/niek"}, "reply_to_user": {"reputation": 1067, "user_id": 7386278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a524d72f3ef3a842d6393fe029053a3b?s=128&d=identicon&r=PG&f=1", "display_name": "tagyoureit", "link": "https://stackoverflow.com/users/7386278/tagyoureit"}, "edited": false, "score": 0, "creation_date": 1556785935, "post_id": 55933851, "comment_id": 98549586, "body": "@tagyoureit , yep, tried that. It didn&#39;t work. I also tried <code>.post(\\.*\\)</code> , which should intercept all paths, this also doesn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 1067, "user_id": 7386278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a524d72f3ef3a842d6393fe029053a3b?s=128&d=identicon&r=PG&f=1", "display_name": "tagyoureit", "link": "https://stackoverflow.com/users/7386278/tagyoureit"}, "is_accepted": false, "score": 0, "last_activity_date": 1556804540, "creation_date": 1556804540, "answer_id": 55953816, "question_id": 55933851, "link": "https://stackoverflow.com/questions/55933851/nock-does-not-intercept-requests-error-getaddrinfo-enotfound/55953816#55953816", "title": "Nock does not intercept requests - Error: getaddrinfo ENOTFOUND", "body": "<p>This is a really good time to use <a href=\"https://github.com/nock/nock#recording\" rel=\"nofollow noreferrer\">Nock Recorder</a>.  It will record you HTTP calls and let you see exactly why Nock is not matching to the request.</p>\n\n<p>Try this in your <code>teams.controller.ts</code>:</p>\n\n<pre><code>import { Request, Response } from 'express';\nimport * as jwt from 'jsonwebtoken';\nimport * as rp from 'request-promise';\nimport { config } from 'src/config';\nimport { Brackets } from 'typeorm/query-builder/Brackets';\nimport { isUUID } from 'validator';\nimport { withConnection, withTransaction } from '../../db/connection';\nimport { Team } from '../../models/team';\nconst nock = require('nock')  // add Nock\nnock.recorder.rec({\n    output_objects: true,\n  })  // Setup Nock to Record\n\n/**\n * Create a new user\n */\nexport async function create(req: Request, res: Response) {\n  const result = await withTransaction(async em =&gt; {\n    const teamRepository = em.getRepository(Team)\n\n\n    ... (irrelevant code)\n\n\n    console.log('AMA URL ' + process.env.AMA_API)\n\n    const response = await rp({\n      uri: `${process.env.AMA_API}/api/analyst/create-analyst-user`,\n      method: 'POST',\n      json: true,\n      headers: {\n        'accept': 'application/json',\n        'content-type': 'application/json',\n        'authorization': 'Bearer ' + jwt.sign({\n          id: -1,\n          role: 'admin',\n          team: '*',\n        },\n        config.secrets.session,\n        {\n          expiresIn: 60 * 60\n        })\n      },\n      body: {username: newTeam.name, id: newTeam.id}\n    });\n\n    nock.restore()  // stop nock recording\n    const nockCalls = nock.recorder.play() // \"play\" the recording into a variable\n    console.log(`Nock Captured Calls: \\n${JSON.stringify(nockCalls,null,2)}`) // inspect calls that Nock recorder\n\n    return response\n  })\n\n  if (result) {\n    return res.status(201).send(result)\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 2693824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663dc62dbfc3f534db1a58f783eb23cf?s=128&d=identicon&r=PG&f=1", "display_name": "Niek", "link": "https://stackoverflow.com/users/2693824/niek"}, "is_accepted": true, "score": 2, "last_activity_date": 1557145703, "creation_date": 1557145703, "answer_id": 56005258, "question_id": 55933851, "link": "https://stackoverflow.com/questions/55933851/nock-does-not-intercept-requests-error-getaddrinfo-enotfound/56005258#56005258", "title": "Nock does not intercept requests - Error: getaddrinfo ENOTFOUND", "body": "<p>In case anyone has the same problem. Moving the nock initialization to beforeall fixed it for me.</p>\n"}], "owner": {"reputation": 25, "user_id": 2693824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663dc62dbfc3f534db1a58f783eb23cf?s=128&d=identicon&r=PG&f=1", "display_name": "Niek", "link": "https://stackoverflow.com/users/2693824/niek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1614, "favorite_count": 0, "accepted_answer_id": 56005258, "answer_count": 2, "score": 0, "last_activity_date": 1557145703, "creation_date": 1556701232, "question_id": 55933851, "link": "https://stackoverflow.com/questions/55933851/nock-does-not-intercept-requests-error-getaddrinfo-enotfound", "title": "Nock does not intercept requests - Error: getaddrinfo ENOTFOUND", "body": "<p>Let me first explain how everything is set up.</p>\n\n<ul>\n<li>The tests are run using Jest.</li>\n<li>I have a jest.config.json with the following line:\n\n<ul>\n<li><code>\"globalSetup\": \"&lt;rootDir&gt;/__tests__/setup.js\",</code></li>\n</ul></li>\n<li>In <code>setup.js</code> I have the following content:</li>\n</ul>\n\n<p>As you can see, I put the fake URL in the environment variable <code>AMA_API</code>.\nAfter that, I require <code>./nock.ts</code> and log the line <code>Nock init done</code>. The rest of the content of this file seems irrelevant to me.</p>\n\n<pre><code>module.exports = async function() {\n    console.log('[JEST SETUP] setting env var')\n    process.env.AMA_API = 'http://fake.local'\n\n    require('tsconfig-paths').register()\n    require('ts-node').register({\n        lazy: true,\n        fast: true,\n        project: 'tsconfig.json'\n    })\n\n    require('./nock.ts')\n    console.log('Nock init done.')\n    const connections = await require('src/db/connection.ts').initConnection()\n    await require('./clearDb.ts').clearDB()\n    await require('./initDb.ts').initializeDB()\n    await Promise.all(connections.map(con =&gt; con.close()))\n    console.log(`Connection setup complete [${connections.length} Connection${connections.length &gt; 1 ? 's' : ''}]`)\n    return true\n};\n</code></pre>\n\n<ul>\n<li>In <code>nock.ts</code>, I have the following content:</li>\n</ul>\n\n<pre><code>import * as nock from 'nock';\n\nconst FAKE_ANALYST_USER_CREATED = {\n   ... (some large object)\n}\n\nconsole.log('NOCK URL ' + process.env.AMA_API);\n\nnock(process.env.AMA_API)\n  .persist()\n  .log(console.log)\n  .post('api/analyst/create-analyst-user')\n  .reply(200, FAKE_ANALYST_USER_CREATED)\n\n</code></pre>\n\n<ul>\n<li>That is all the setup for nock I have. Then in the <code>teams.controller.spec.ts</code>, I have the following test:</li>\n</ul>\n\n<pre><code>describe('Team Endpoint', () =&gt; {\n    let connections: Connection[];\n\n    beforeAll(async () =&gt; {\n        connections = await initConnection();\n    });\n\n    afterAll(async () =&gt; {\n        await Promise.all(connections.map(con =&gt; con.close()));\n        console.log('connection closed');\n        return true;\n    });\n\n    describe('Team', () =&gt; {\n        test.only('POST / should return [200 - OK] and create a new team', async () =&gt; {\n            const newTeam = {\n                ...\n            };\n\n            let response = await request(app)\n                .post('/')\n                .set('Authorization', adminUserToken())\n                .send(newTeam);\n\n            expect(response.status).toBe(201);\n            expect(response.body).toHaveProperty('name', newTeam.name);\n            expect(response.body).toHaveProperty('slug', newTeam.slug);\n            expect(response.body).toHaveProperty('apiKey');\n            expect(response.body.apiKey).toBeDefined();\n\n            response = await request(app)\n                .delete(`/${response.body.id}`)\n                .set('Authorization', adminUserToken())\n            expect(response.status).toBe(200);\n        });\n    });\n});\n</code></pre>\n\n<ul>\n<li>Then finally, this test triggers a function in <code>teams.controller.ts</code> with the following content:</li>\n</ul>\n\n<pre><code>import { Request, Response } from 'express';\nimport * as jwt from 'jsonwebtoken';\nimport * as rp from 'request-promise';\nimport { config } from 'src/config';\nimport { Brackets } from 'typeorm/query-builder/Brackets';\nimport { isUUID } from 'validator';\nimport { withConnection, withTransaction } from '../../db/connection';\nimport { Team } from '../../models/team';\n\n/**\n * Create a new user\n */\nexport async function create(req: Request, res: Response) {\n  const result = await withTransaction(async em =&gt; {\n    const teamRepository = em.getRepository(Team)\n\n\n    ... (irrelevant code)\n\n\n    console.log('AMA URL ' + process.env.AMA_API)\n\n    const response = await rp({\n      uri: `${process.env.AMA_API}/api/analyst/create-analyst-user`,\n      method: 'POST',\n      json: true,\n      headers: {\n        'accept': 'application/json',\n        'content-type': 'application/json',\n        'authorization': 'Bearer ' + jwt.sign({\n          id: -1,\n          role: 'admin',\n          team: '*',\n        },\n        config.secrets.session,\n        {\n          expiresIn: 60 * 60\n        })\n      },\n      body: {username: newTeam.name, id: newTeam.id}\n    });\n\n    return response\n\n  })\n\n  if (result) {\n    return res.status(201).send(result)\n  }\n}\n</code></pre>\n\n<p>So with that all out of the way..\nAll the setup code is reached when running the tests (based on the console output that I see).\nHowever, when I run the tests, the request in the last code block is not intercepted, I get the following output:</p>\n\n<pre><code>Determining test suites to run...[JEST SETUP] setting env var\nNOCK URL http://fake.local\nNock init done.\nStarting server for profile test...\n[Team] Adding initial teams\nConnection setup complete [1 Connection]\n\n RUNS  src/api/teams/teams.controller.spec.ts\n RUNS  __tests__/server.spec.ts\n\nTest Suites: 0 of 2 total\nTests:       0 total\nSnapshots:   0 total\n PASS  __tests__/server.spec.ts\n  \u25cf Console    console.log __tests__/jest.js:1      [JEST SETUP] setting timeout to 10s\n FAIL  src/api/teams/teams.controller.spec.ts (6.488s)  \u25cf Console\n\n    console.log __tests__/jest.js:1\n      [JEST SETUP] setting timeout to 10s    console.log src/config/index.ts:8\n      Starting server for profile test...    console.log src/api/teams/teams.controller.ts:90\n      AMA URL http://fake.local    console.log src/api/teams/teams.controller.spec.ts:16\n      connection closed\n  \u25cf Team Endpoint \u203a Team \u203a POST / should return [200 - OK] and create a new \nteam\n\n    RequestError: Error: getaddrinfo ENOTFOUND fake.local fake.local:80\n\n      at new RequestError (node_modules/request-promise/node_modules/request\n-promise-core/lib/errors.js:14:15)\n      at Request.plumbing.callback (node_modules/request-promise/node_module\ns/request-promise-core/lib/plumbing.js:87:29)\n      at Request.RP$callback [as _callback] (node_modules/request-promise/no\nde_modules/request-promise-core/lib/plumbing.js:46:31)\n      at self.callback (node_modules/request/request.js:185:22)\n      at Request.Object.&lt;anonymous&gt;.Request.onRequestError (node_modules/req\nuest/request.js:881:8)\n\n</code></pre>\n\n<p>I have already spent hours trying to find what is going wrong here.. with no success. Any help would be very much appreciated.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 2025, "user_id": 465164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e3c6e14581f31fec3b9b75ae860dc8f1?s=128&d=identicon&r=PG", "display_name": "Devin", "link": "https://stackoverflow.com/users/465164/devin"}, "edited": false, "score": 0, "creation_date": 1556700982, "post_id": 55933800, "comment_id": 98520317, "body": "I looked at this question for a potential answer, however I was unable to get it to work: <a href=\"https://stackoverflow.com/questions/54714232/typescript-mysterious-intersection\" title=\"typescript mysterious intersection\">stackoverflow.com/questions/54714232/&hellip;</a>"}, {"owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1556715143, "post_id": 55933800, "comment_id": 98525736, "body": "How is <code>makeModel</code> supposed to be called?"}, {"owner": {"reputation": 2025, "user_id": 465164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e3c6e14581f31fec3b9b75ae860dc8f1?s=128&d=identicon&r=PG", "display_name": "Devin", "link": "https://stackoverflow.com/users/465164/devin"}, "reply_to_user": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1556728349, "post_id": 55933800, "comment_id": 98531992, "body": "<code>makeModel</code> is really just an artifact of my real code, you can ignore its naming. In practice, I have external data streaming in, and I transform that data based on the <code>__type</code> property. I fetch data from an endpoint, convert it to a schema (using <code>io-ts</code>), and then convert it to a &quot;model&quot; (it gains certain methods depending on <code>__type</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 2025, "user_id": 465164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e3c6e14581f31fec3b9b75ae860dc8f1?s=128&d=identicon&r=PG", "display_name": "Devin", "link": "https://stackoverflow.com/users/465164/devin"}, "edited": false, "score": 0, "creation_date": 1556734702, "post_id": 55937131, "comment_id": 98534795, "body": "Really appreciate the insight, and links to the TypeScript documentation and GitHub issues for your answers."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1556734758, "last_edit_date": 1556734758, "creation_date": 1556717783, "answer_id": 55937131, "question_id": 55933800, "link": "https://stackoverflow.com/questions/55933800/typescript-unexpected-intersection/55937131#55937131", "title": "TypeScript unexpected intersection", "body": "<p>I think the problem here is that the compiler doesn't know how to (or chooses not to) interpret the generic <code>ModelRegistry[N][\"getName\"]</code> as correlated to the type <code>N</code> when you try to call it, and instead widens <code>N</code> to the full union type <code>keyof ModelRegistry</code>.  Therefore it sees <code>model.getName</code> as a union of function types of different parameter types.  Before TypeScript 3.3 such a union was just <a href=\"https://github.com/Microsoft/TypeScript/issues/7294\" rel=\"nofollow noreferrer\">not callable at all</a>.  In TypeScript 3.3 support was added to allow such functions to be <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#improved-behavior-for-calling-union-types\" rel=\"nofollow noreferrer\">called with an intersection of the parameters for each function in the union</a>.  That's better than \"not callable\", but it still leaves a lot to be desired, especially in the case you have here where there are <a href=\"https://github.com/Microsoft/TypeScript/issues/30581\" rel=\"nofollow noreferrer\">correlated types</a> involved.</p>\n\n<p>In cases like these the easiest way to address it is to accept that you are smarter than the compiler and <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">assert</a> the types you expect to see.  To demonstrate I'll just use <code>as any</code> to silence the compiler:</p>\n\n<pre><code>export const makeModel = &lt;N extends keyof ModelRegistry&gt;(name: N) =&gt; (\n  options: Parameters&lt;ModelRegistry[N][\"getName\"]&gt;[0],\n): ReturnType&lt;ModelRegistry[N][\"getName\"]&gt; =&gt; {\n  const model = modelRegistry[name];\n  return model.getName(options as any) as any; // I'm smarter than the compiler \ud83e\udd13\n};\n</code></pre>\n\n<p>This should work for you... you could tighten the <code>any</code> assertions up to more applicable types, if you desire.  Note that I've manually annotated the return type of the curried <code>makeModel</code> call to be <code>ReturnType&lt;ModelRegistry[N][\"getName\"]</code>, since the compiler is unlikely to be able to figure that out.</p>\n\n<p>Anyway, hope that helps.  Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "is_accepted": false, "score": 0, "last_activity_date": 1556721830, "creation_date": 1556721830, "answer_id": 55938032, "question_id": 55933800, "link": "https://stackoverflow.com/questions/55933800/typescript-unexpected-intersection/55938032#55938032", "title": "TypeScript unexpected intersection", "body": "<p>Another way to get around this error is to define generic version of <code>makeModel</code> which can work on arbitrary registry, then define specific version for one instance of registry:</p>\n\n<pre><code>export const makeAnyModel = &lt;Registry extends { [N in string]: Model&lt;N&gt; }&gt;\n(registry: Registry, name: keyof Registry) =&gt; (\n  options: Parameters&lt;Registry[keyof Registry][\"getName\"]&gt;[0],\n) =&gt; {\n    const model = registry[name];\n    return model.getName(options);\n};\n\nexport const makeModel = &lt;N extends keyof ModelRegistry&gt;(name: N) =&gt; \n    makeAnyModel(modelRegistry, name);\n</code></pre>\n\n<p>There are no errors in <code>makeAnyModel</code> because <code>N</code> is assumed to be <code>string</code> when typechecking the implementation - inferred type for <code>getName</code> is </p>\n\n<pre><code>Model&lt;string&gt;.getName: (options: { __type: string; }) =&gt; string\n</code></pre>\n"}], "owner": {"reputation": 2025, "user_id": 465164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e3c6e14581f31fec3b9b75ae860dc8f1?s=128&d=identicon&r=PG", "display_name": "Devin", "link": "https://stackoverflow.com/users/465164/devin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 55937131, "answer_count": 2, "score": 1, "last_activity_date": 1556734758, "creation_date": 1556700934, "question_id": 55933800, "link": "https://stackoverflow.com/questions/55933800/typescript-unexpected-intersection", "title": "TypeScript unexpected intersection", "body": "<p>I have a registry of \"models\" and when I select a model from the registry, and call a method on it, TypeScript expects an intersection of the parameters across all registered models.</p>\n\n<p>For brevity, I've reproduced this bug with a dummy method \"getName\".</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>export class Model&lt;N extends string&gt; {\n  public name: N;\n\n  constructor(name: N) {\n    this.name = name;\n  }\n\n  public getName = (options: { __type: N }) =&gt; options.__type;\n}\n\nexport const Book = new Model(\"Book\");\nexport const User = new Model(\"User\");\n\nexport const modelRegistry = { Book, User };\n\nexport type ModelRegistry = typeof modelRegistry;\n\nexport const makeModel = &lt;N extends keyof ModelRegistry&gt;(name: N) =&gt; (\n  options: Parameters&lt;ModelRegistry[N][\"getName\"]&gt;[0],\n) =&gt; {\n  const model = modelRegistry[name];\n  return model.getName(options); // &lt;-- bug: TS expects this to be { __type: User } &amp; { __type: Book }\n};\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZGwcg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZGwcg.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#src=export%20class%20Model%3CN%20extends%20string%3E%20%7B%0D%0A%20%20public%20name%3A%20N%3B%0D%0A%0D%0A%20%20constructor(name%3A%20N)%20%7B%0D%0A%20%20%20%20this.name%20%3D%20name%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20public%20getName%20%3D%20(options%3A%20%7B%20__type%3A%20N%20%7D)%20%3D%3E%20options.__type%3B%0D%0A%7D%0D%0A%0D%0Aexport%20const%20Book%20%3D%20new%20Model(%22Book%22)%3B%0D%0Aexport%20const%20User%20%3D%20new%20Model(%22User%22)%3B%0D%0A%0D%0Aexport%20const%20modelRegistry%20%3D%20%7B%20Book%2C%20User%20%7D%3B%0D%0A%0D%0Aexport%20type%20ModelRegistry%20%3D%20typeof%20modelRegistry%3B%0D%0A%0D%0Aexport%20const%20makeModel%20%3D%20%3CN%20extends%20keyof%20ModelRegistry%3E(name%3A%20N)%20%3D%3E%20(%0D%0A%20%20options%3A%20Parameters%3CModelRegistry%5BN%5D%5B%22getName%22%5D%3E%5B0%5D%2C%0D%0A)%20%3D%3E%20%7B%0D%0A%20%20const%20model%20%3D%20modelRegistry%5Bname%5D%3B%0D%0A%20%20return%20model.getName(options)%3B%20%2F%2F%20%3C--%20bug%3A%20TS%20expects%20this%20to%20be%20%7B%20__type%3A%20User%20%7D%20%26%20%7B%20__type%3A%20Book%20%7D%0D%0A%7D%3B\" rel=\"nofollow noreferrer\">Playground Link</a></p>\n"}, {"tags": ["angular", "typescript", "firebase"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 11436220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f779d5d25bb6db349b6119b4d28f64?s=128&d=identicon&r=PG&f=1", "display_name": "martinkus", "link": "https://stackoverflow.com/users/11436220/martinkus"}, "is_accepted": false, "score": 2, "last_activity_date": 1556703336, "creation_date": 1556703336, "answer_id": 55934256, "question_id": 55933656, "link": "https://stackoverflow.com/questions/55933656/property-performance-is-missing-in-type-firebaseapp-but-required-in-type-ap/55934256#55934256", "title": "Property &#39;performance&#39; is missing in type &#39;FirebaseApp&#39; but required in type &#39;App&#39;", "body": "<p>Managed to resolve the issue by specifying firebase's version to be \"5.0.4\", not \"^5.0.4\".</p>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 3649873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450568070dca39ea70065d5385cb8787?s=128&d=identicon&r=PG&f=1", "display_name": "gkoromia", "link": "https://stackoverflow.com/users/3649873/gkoromia"}, "edited": false, "score": 0, "creation_date": 1556825691, "post_id": 55937658, "comment_id": 98569947, "body": "I had the same problem on an Ionic 4 app with &quot;@angular/fire&quot;: &quot;^5.1.3&quot;   AND   &quot;firebase&quot;: &quot;5.11.0&quot;  Solved the problem with the above solution. Changed firebase declaration in package.json to: &quot;firebase&quot;: &quot;5.11.0&quot; Then execute: Delete node_modules, npm cache verify, npm install.  Everything is compiling correctly now."}, {"owner": {"reputation": 1593, "user_id": 754015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/24a1e7309fbf154ffae1ea924e279377?s=128&d=identicon&r=PG", "display_name": "Romko", "link": "https://stackoverflow.com/users/754015/romko"}, "reply_to_user": {"reputation": 151, "user_id": 3649873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450568070dca39ea70065d5385cb8787?s=128&d=identicon&r=PG&f=1", "display_name": "gkoromia", "link": "https://stackoverflow.com/users/3649873/gkoromia"}, "edited": false, "score": 1, "creation_date": 1557093437, "post_id": 55937658, "comment_id": 98640487, "body": "@gkoromia the firebase team fixed bug in v<code>5.11.1</code>. just tried"}], "tags": [], "owner": {"reputation": 1593, "user_id": 754015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/24a1e7309fbf154ffae1ea924e279377?s=128&d=identicon&r=PG", "display_name": "Romko", "link": "https://stackoverflow.com/users/754015/romko"}, "is_accepted": false, "score": 7, "last_activity_date": 1556720037, "creation_date": 1556720037, "answer_id": 55937658, "question_id": 55933656, "link": "https://stackoverflow.com/questions/55933656/property-performance-is-missing-in-type-firebaseapp-but-required-in-type-ap/55937658#55937658", "title": "Property &#39;performance&#39; is missing in type &#39;FirebaseApp&#39; but required in type &#39;App&#39;", "body": "<p>I'm also getting this error.\nSeems latest ver. of <code>firebase</code> which is <code>5.11.0</code> is broken.</p>\n\n<p>Changing my dependencies to <strong><code>5.10.0</code></strong> solved this issue.</p>\n\n<p>Important: do <strong>NOT</strong> use any <code>~</code> or <code>^</code> ver. prefix</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11438448, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X1fDsd82_Fk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reZCAyFjTN1BvNjt_q4VCBDQrrPOQ/mo/photo.jpg?sz=128", "display_name": "Simran kaur", "link": "https://stackoverflow.com/users/11438448/simran-kaur"}, "is_accepted": false, "score": 1, "last_activity_date": 1556735557, "creation_date": 1556735557, "answer_id": 55940937, "question_id": 55933656, "link": "https://stackoverflow.com/questions/55933656/property-performance-is-missing-in-type-firebaseapp-but-required-in-type-ap/55940937#55940937", "title": "Property &#39;performance&#39; is missing in type &#39;FirebaseApp&#39; but required in type &#39;App&#39;", "body": "<p>change version of firebase to the 5.10.1 by the command </p>\n\n<p><strong>npm install --save firebase@5.10.1</strong></p>\n\n<p>it works for me.</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 12892563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/koGYP.jpg?s=128&g=1", "display_name": "Soft Dev Ahmad yar khan", "link": "https://stackoverflow.com/users/12892563/soft-dev-ahmad-yar-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1586336019, "last_edit_date": 1586336019, "creation_date": 1586333183, "answer_id": 61096053, "question_id": 55933656, "link": "https://stackoverflow.com/questions/55933656/property-performance-is-missing-in-type-firebaseapp-but-required-in-type-ap/61096053#61096053", "title": "Property &#39;performance&#39; is missing in type &#39;FirebaseApp&#39; but required in type &#39;App&#39;", "body": "<p><strong>Issue:</strong></p>\n\n<blockquote>\n  <p>ERROR in node_modules/@angular/fire/firebase.app.module.d.ts:17:22 - error\n  TS2420: Class 'FirebaseApp' incorrectly implements interface 'App'.<br>\n  <strong>Property 'performance' is missing in type 'FirebaseApp' but required in type 'App'.</strong></p>\n  \n  <p>17 export declare class FirebaseApp implements app.App {</p>\n  \n  <p>node_modules/firebase/index.d.ts:1217:5\n      1217     performance(): firebase.performance.Performance;\n              'performance' is declared here.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/ML5fS.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ML5fS.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Solution:</strong></p>\n\n<p>Change version of firebase to the 5.10.1 by the command:</p>\n\n<pre><code>npm install --save firebase@5.10.1\n</code></pre>\n\n<p>It works definitely.</p>\n"}], "owner": {"reputation": 61, "user_id": 11436220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f779d5d25bb6db349b6119b4d28f64?s=128&d=identicon&r=PG&f=1", "display_name": "martinkus", "link": "https://stackoverflow.com/users/11436220/martinkus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1823, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1586336019, "creation_date": 1556700113, "question_id": 55933656, "link": "https://stackoverflow.com/questions/55933656/property-performance-is-missing-in-type-firebaseapp-but-required-in-type-ap", "title": "Property &#39;performance&#39; is missing in type &#39;FirebaseApp&#39; but required in type &#39;App&#39;", "body": "<p>I seem to be getting this error when I try to run a fresh install of Angular 7.2 and Firebase: </p>\n\n<pre><code>ERROR in node_modules/@angular/fire/firebase.app.module.d.ts(17,22): error TS2420: Class 'FirebaseApp' incorrectly implements interface 'App'.\n  Property 'performance' is missing in type 'FirebaseApp' but required in type 'App'.\n</code></pre>\n\n<p>Tried switching between different versions of @angular/fire and firebase, but didn't manage to find a working combination.</p>\n\n<p>Current package.json :</p>\n\n<pre><code>{\n  \"name\": \"my-app\",\n  \"version\": \"0.0.0\",\n  \"scripts\": {\n    \"ng\": \"ng\",\n    \"start\": \"ng serve\",\n    \"build\": \"ng build\",\n    \"test\": \"ng test\",\n    \"lint\": \"ng lint\",\n    \"e2e\": \"ng e2e\",\n    \"compile:server\": \"webpack --config webpack.server.config.js --progress --colors\",\n    \"serve:ssr\": \"node dist/server\",\n    \"build:ssr\": \"npm run build:client-and-server-bundles &amp;&amp; npm run compile:server\",\n    \"build:client-and-server-bundles\": \"ng build --prod &amp;&amp; ng run supynes-full:server:production\"\n  },\n  \"private\": true,\n  \"dependencies\": {\n    \"@angular/animations\": \"~7.2.0\",\n    \"@angular/common\": \"~7.2.0\",\n    \"@angular/compiler\": \"~7.2.0\",\n    \"@angular/core\": \"~7.2.0\",\n    \"@angular/forms\": \"~7.2.0\",\n    \"@angular/http\": \"~7.2.0\",\n    \"@angular/platform-browser\": \"~7.2.0\",\n    \"@angular/platform-browser-dynamic\": \"~7.2.0\",\n    \"@angular/platform-server\": \"~7.2.0\",\n    \"@angular/router\": \"~7.2.0\",\n    \"@nguniversal/express-engine\": \"^7.1.1\",\n    \"@nguniversal/module-map-ngfactory-loader\": \"^7.0.2\",\n    \"core-js\": \"^2.5.7\",\n    \"dynamic-import-ponyfill\": \"^0.1.0\",\n    \"firebase\": \"^5.3.1\",\n    \"flamelink\": \"^0.19.6\",\n    \"node-fetch\": \"^2.2.0\",\n    \"rxjs\": \"^6.2.2\",\n    \"tslib\": \"^1.9.0\"\n  },\n  \"devDependencies\": {\n    \"@angular-devkit/build-angular\": \"~0.13.0\",\n    \"@angular/cli\": \"~7.3.5\",\n    \"@angular/compiler-cli\": \"~7.2.0\",\n    \"@angular/language-service\": \"~7.2.0\",\n    \"@types/jasmine\": \"~2.8.8\",\n    \"@types/jasminewd2\": \"~2.0.3\",\n    \"@types/node\": \"~8.9.4\",\n    \"codelyzer\": \"~4.5.0\",\n    \"jasmine-core\": \"~2.99.1\",\n    \"jasmine-spec-reporter\": \"~4.2.1\",\n    \"karma\": \"~4.0.0\",\n    \"karma-chrome-launcher\": \"~2.2.0\",\n    \"karma-coverage-istanbul-reporter\": \"~2.0.1\",\n    \"karma-jasmine\": \"~1.1.2\",\n    \"karma-jasmine-html-reporter\": \"^0.2.2\",\n    \"protractor\": \"~5.4.0\",\n    \"ts-loader\": \"^5.2.0\",\n    \"ts-node\": \"~7.0.0\",\n    \"tslint\": \"~5.11.0\",\n    \"typescript\": \"~3.2.2\",\n    \"webpack-cli\": \"^3.1.0\"\n  }\n}\n</code></pre>\n\n<p>Has anyone encountered this error? Google doesn't seem to find anything related to the performance property, there are only similar errors, but not the same ones. Any ideas?</p>\n"}, {"tags": ["angular", "typescript", "angular-material"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4445903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698cdd2da062887b7b446edd29a7f68e?s=128&d=identicon&r=PG&f=1", "display_name": "Sangy_36", "link": "https://stackoverflow.com/users/4445903/sangy-36"}, "edited": false, "score": 0, "creation_date": 1556700370, "post_id": 55933671, "comment_id": 98520081, "body": "so does it mean i have to add <code>mat-error</code> across all the files manually? Does it mean i don&#39;t even need the directive anymore? because if i am going to add <code>mat-error</code> everywhere i can add <code>maxlength</code> attribute directly instead of using the directive."}, {"owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "reply_to_user": {"reputation": 73, "user_id": 4445903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698cdd2da062887b7b446edd29a7f68e?s=128&d=identicon&r=PG&f=1", "display_name": "Sangy_36", "link": "https://stackoverflow.com/users/4445903/sangy-36"}, "edited": false, "score": 0, "creation_date": 1556700426, "post_id": 55933671, "comment_id": 98520093, "body": "<code>mat-error</code> is just a container for error message. Put it along fields you want to show error validation errors. It will become visible if bound intput (in the same mat-form-field tag) will become invalid."}, {"owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "reply_to_user": {"reputation": 73, "user_id": 4445903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698cdd2da062887b7b446edd29a7f68e?s=128&d=identicon&r=PG&f=1", "display_name": "Sangy_36", "link": "https://stackoverflow.com/users/4445903/sangy-36"}, "edited": false, "score": 0, "creation_date": 1556700537, "post_id": 55933671, "comment_id": 98520140, "body": "There are plenty of explanation in angular material docs. Moreover, every snippet can be ran on Stackblitz by clicking proper icon in snippet bar. Try it out and draw proper conclusions."}, {"owner": {"reputation": 577, "user_id": 6886328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a8c13c80c5b81190ccfd382081873?s=128&d=identicon&r=PG&f=1", "display_name": "vladernn", "link": "https://stackoverflow.com/users/6886328/vladernn"}, "edited": false, "score": 0, "creation_date": 1579104823, "post_id": 55933671, "comment_id": 105656895, "body": "The question is to add it dinamicly, If I have a huge aplication with hundreds of inputs I don&#39;t want to add it manualy."}], "tags": [], "owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "is_accepted": false, "score": 0, "last_activity_date": 1556700155, "creation_date": 1556700155, "answer_id": 55933671, "question_id": 55933635, "link": "https://stackoverflow.com/questions/55933635/how-to-dynamically-add-a-mat-error-to-a-mat-input-field/55933671#55933671", "title": "How to dynamically add a mat-error to a mat-input-field?", "body": "<p>You don't add <code>mat-error</code> dynamicly, you just put it there. It cooperates strictly with <code>mat-form-field</code> and will become visible if <code>matInput</code> will be in <code>invalid</code> state. </p>\n\n<p>Threat it as a container for error message. All you have to do is to adjust message (in case you can have multiple validation rules and want custom messages for all of them).</p>\n\n<p>Code from Angular Material docs</p>\n\n<pre><code>&lt;div class=\"example-container\"&gt;\n  &lt;mat-form-field&gt;\n    &lt;input matInput placeholder=\"Enter your email\" [formControl]=\"email\" required&gt;\n    &lt;mat-error *ngIf=\"email.invalid\"&gt;{{getErrorMessage()}}&lt;/mat-error&gt;\n  &lt;/mat-form-field&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "reply_to_user": {"reputation": 73, "user_id": 4445903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698cdd2da062887b7b446edd29a7f68e?s=128&d=identicon&r=PG&f=1", "display_name": "Sangy_36", "link": "https://stackoverflow.com/users/4445903/sangy-36"}, "edited": false, "score": 0, "creation_date": 1556715190, "post_id": 55936475, "comment_id": 98525755, "body": "Well, really is a &quot;simulation&quot;, if you look more deeper, you see that the <code>&lt;custom error&gt;</code> is outside of <code>&lt;form-field&gt;</code>"}, {"owner": {"reputation": 73, "user_id": 4445903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698cdd2da062887b7b446edd29a7f68e?s=128&d=identicon&r=PG&f=1", "display_name": "Sangy_36", "link": "https://stackoverflow.com/users/4445903/sangy-36"}, "edited": false, "score": 0, "creation_date": 1556715554, "post_id": 55936475, "comment_id": 98525922, "body": "Hmm but I guess this could do."}, {"owner": {"reputation": 12957, "user_id": 1148107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c724f1d2dea09057869e1c3cb87a02bc?s=128&d=identicon&r=PG", "display_name": "mtpultz", "link": "https://stackoverflow.com/users/1148107/mtpultz"}, "edited": false, "score": 3, "creation_date": 1571728012, "post_id": 55936475, "comment_id": 103326546, "body": "This doesn&#39;t use <code>&lt;mat-error&gt;</code>, but a custom self-maintained error component, which doesn&#39;t automatically apply the accessibility provided by Angular Material.  You would be better off inlining <code>&lt;mat-error&gt;</code> within your template for each form control, and dynamically generating the message from a similar injector provided in the article by Netanel Basal, which is a bit more work for you, but better usability for the user."}, {"owner": {"reputation": 1817, "user_id": 1180492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46b66b62f2d4438e8f3a8c94ef29b6b1?s=128&d=identicon&r=PG", "display_name": "WannaCSharp", "link": "https://stackoverflow.com/users/1180492/wannacsharp"}, "edited": false, "score": 0, "creation_date": 1576312155, "post_id": 55936475, "comment_id": 104865452, "body": "Is there a way so that the custom-error is inside the mat-form-field?"}], "tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": true, "score": 6, "last_activity_date": 1572518941, "last_edit_date": 1572518941, "creation_date": 1556714555, "answer_id": 55936475, "question_id": 55933635, "link": "https://stackoverflow.com/questions/55933635/how-to-dynamically-add-a-mat-error-to-a-mat-input-field/55936475#55936475", "title": "How to dynamically add a mat-error to a mat-input-field?", "body": "<p>Of course you can add dinamically a mat-error. There are an <a href=\"https://netbasal.com/make-your-angular-forms-error-messages-magically-appear-1e32350b7fa5\" rel=\"nofollow noreferrer\">amazing article</a> in NetBasal about this.</p>\n\n<p>A simple versi\u00f3n that I make is in <a href=\"https://stackblitz.com/edit/angular-qrluoz?file=app%2Ferror-directive.ts\" rel=\"nofollow noreferrer\">stackblitz</a>. In this stackblitz I attach the directive to the mat-form-field and make a work-around to attach a new component mat-error-component. This allow me use css and animations.</p>\n\n<p>The key is use ViewContainerRef to add dinamically a component using ComponentFactoryResolver</p>\n\n<p>Well, the code of the directive:</p>\n\n<pre><code>export class MongoIndexLimitDirective implements AfterViewInit {\n  ref: ComponentRef&lt;MatErrorComponent&gt;;\n  constructor(\n    private vcr: ViewContainerRef,\n    private resolver: ComponentFactoryResolver,\n    private formField:MatFormField\n  ) { }\n\n  public ngAfterViewInit()\n  {\n    this.formField._control.ngControl.statusChanges.subscribe(res=&gt;this.onChange(res))\n\n  }\n\n  public onChange(res) {\n    if (this.formField._control.ngControl.invalid)\n    {\n      this.setError('error')\n    }      \n    else\n      this.setError('')\n  }\n  setError(text: string) {\n    if (!this.ref) {\n     const factory = this.resolver.resolveComponentFactory(MatErrorComponent);\n     this.formField._elementRef\n     this.ref = this.vcr.createComponent(factory);\n   }\n   this.ref.instance.error=text;\n}\n</code></pre>\n\n<p>The MatErrorComponent (I called as it for my convenience. Be carafully you need put in the entryComponents of the main module) looks like more complex than real it is because the \"animations\", but essencially is a <code>&lt;mat-error&gt;{{message}}&lt;/mat-error&gt;</code></p>\n\n<pre><code>@Component({\n  selector: 'custom-error',\n  template:`\n  &lt;div [@animation]=\"_state\" style=\"margin-top:-1rem;font-size:.75rem\"&gt;\n      &lt;mat-error &gt;\n      {{message}}\n    &lt;/mat-error&gt;\n    &lt;/div&gt;\n  `,\n  animations: [\n    trigger('animation', [\n      state('show', style({\n        opacity: 1,\n      })),\n      state('hide',   style({\n        opacity: 0,\n        transform: 'translateY(-1rem)'\n      })),\n      transition('show =&gt; hide', animate('200ms ease-out')),\n      transition('* =&gt; show', animate('200ms ease-in'))\n\n    ]),\n  ]\n\n})\nexport class MatErrorComponent{\n  _error:any\n  _state:any\n  message;\n\n  @Input() \n  set error(value)\n  {\n    if (value &amp;&amp; !this.message)\n    {\n      this.message=value;\n      this._state='hide'\n      setTimeout(()=&gt;\n      {\n        this._state='show'\n      })\n    }\n    else{\n    this._error=value;\n    this._state=value?'show':'hide'\n    }\n  }\n</code></pre>\n\n<p><strong>Updated</strong> a better aproach of the mat-error-component.</p>\n\n<p>We can take account the differents errors and improve the transition like</p>\n\n<pre><code>@Component({\n  selector: '[custom-error]',\n  template: `\n  &lt;div [@animation]=\"increment\" *ngIf=\"show\" style=\"margin-top:-1rem;font-size:.75rem\"&gt;\n      &lt;mat-error &gt;\n      {{message}}\n    &lt;/mat-error&gt;\n    &lt;/div&gt;\n  `,\n  animations: [\n    trigger('animation', [\n      transition(':increment', [\n        style({ opacity: 0}),\n        animate('200ms ease-in', style({ opacity: 1 })),\n      ]),\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateY(-1rem)' }),\n        animate('200ms ease-in', style({ opacity: 1, transform: 'translateY(0)' })),\n      ]),\n      transition(':leave', [\n        animate('200ms ease-out', style({ opacity: 0, transform: 'translateY(-1rem)' }))\n      ])])\n  ]\n\n})\nexport class MatErrorComponent {\n  show: boolean\n  message: string;\n  increment:number=0;\n\n  @Input()\n  set error(value) {\n    if (value)\n    {\n      if (this.message!=value)\n        this.increment++;\n\n      this.message = value;\n    }\n\n    this.show = value ? true : false;\n  }\n} \n</code></pre>\n\n<p>This allow as that when the message error change, a new animation happens -in this case change opacity from 0 to 1 if, e.g. in our directive change the function onChange to</p>\n\n<pre><code>  public onChange(res) {\n    if (this.control.invalid)\n    {\n      if (this.control.errors.required)\n        this.setError(this.formField._control.placeholder+' required')\n      else\n        this.setError(this.formField._control.placeholder+' incorrect')\n    }      \n    else\n      this.setError('')\n  }\n</code></pre>\n\n<p>See the <a href=\"https://stackblitz.com/edit/angular-qrluoz-mtctty?file=app%2Ferror-directive.ts\" rel=\"nofollow noreferrer\">improve stackblitz</a></p>\n\n<p><strong>Update 2</strong>\nThere was a problem with blur. If at first the control is invalid, the status not change, so we need add blur event. For this we use renderer2 and ViewContent to get the input</p>\n\n<pre><code>@ContentChild(MatInput,{read:ElementRef}) controlElementRef:ElementRef\n</code></pre>\n\n<p>And change the ngAfterViewInit</p>\n\n<pre><code>public ngAfterViewInit()\n  {\n    this.control=this.formField._control.ngControl;\n    this.renderer.listen(this.controlElementRef.nativeElement,'blur',()=&gt;this.onChange(null))\n    this.control.statusChanges.subscribe(res=&gt;this.onChange(res))\n\n  }\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-qrluoz-yfsabk?file=app/error-directive.ts\" rel=\"nofollow noreferrer\">stackblitz take account \"blur\"</a></p>\n\n<p>If we can we can has a predefined errors, add at last a \"error\" to custom Errors, so if our custom error return some like <code>{error:'error text'}</code> we can show the errors. </p>\n\n<p>The important part is </p>\n\n<pre><code>export const defaultErrors = {\n  minlength: ({ requiredLength, actualLength }) =&gt;\n    `Expect ${requiredLength} but got ${actualLength}`,\n  email: error=&gt;'The email is incorrect',\n  error:error=&gt;error,\n  required: error =&gt; `This field is required`\n\n};\n</code></pre>\n\n<p>And OnChnage becomes like</p>\n\n<pre><code>public onChange(res) {\n    if (this.control.invalid &amp;&amp; this.control.touched) {\n      let error: string = this.formField._control.placeholder + \" incorrect\";\n      Object.keys(defaultErrors).forEach(k =&gt; {\n        console.log(k,this.control.hasError(k),this.control.errors[k])\n        if (this.control.hasError(k)) error = defaultErrors[k](this.control.errors[k]);\n      });\n      this.setError(error);\n    } else this.setError(\"\");\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 510, "user_id": 5714639, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205449245416755/picture?type=large", "display_name": "Luk&#225;\u0161 K\u0159&#237;\u017e", "link": "https://stackoverflow.com/users/5714639/luk%c3%a1%c5%a1-k%c5%99%c3%ad%c5%be"}, "is_accepted": false, "score": 1, "last_activity_date": 1565351716, "creation_date": 1565351716, "answer_id": 57429560, "question_id": 55933635, "link": "https://stackoverflow.com/questions/55933635/how-to-dynamically-add-a-mat-error-to-a-mat-input-field/57429560#57429560", "title": "How to dynamically add a mat-error to a mat-input-field?", "body": "<p>Yes, you can insert dynamically mat-error for matInput</p>\n\n<pre><code>&lt;mat-form-field&gt;\n    &lt;mat-label&gt;{{item.label}}&lt;/mat-label&gt;\n    &lt;input type=\"text\" matInput [formControlName]=\"item.name\"&gt;\n    &lt;mat-error *ngIf=\"form.get(item.name).invalid\"&gt;{{getErrorMessage(form.get(item.name))}}&lt;/mat-error&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4445903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698cdd2da062887b7b446edd29a7f68e?s=128&d=identicon&r=PG&f=1", "display_name": "Sangy_36", "link": "https://stackoverflow.com/users/4445903/sangy-36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7848, "favorite_count": 0, "accepted_answer_id": 55936475, "answer_count": 3, "score": 5, "last_activity_date": 1572518941, "creation_date": 1556699966, "last_edit_date": 1556700162, "question_id": 55933635, "link": "https://stackoverflow.com/questions/55933635/how-to-dynamically-add-a-mat-error-to-a-mat-input-field", "title": "How to dynamically add a mat-error to a mat-input-field?", "body": "<p>I want to show an error when user exceeds maxLength by adding &lt; mat-error > dynamically to the DOM. </p>\n\n<p>I already have a <strong>attribute directive</strong> in place to limit the max length of an input field. I have it as a directive, since this gets applied to a lot of input fields across different files in the project. But now the problem is, I have to show a <strong>mat-error</strong> when the user exceeds the limit. I don't want to add &lt; mat-error > under every input fields across all files by myself , i want a <strong>modular</strong> solution. Can this be done by using the existing directive itself? </p>\n\n<pre><code>&lt;mat-form-field floatLabel=\"auto\"&gt;\n      &lt;input [formControl]=\"displayNameControl\"\n        mongoIndexLimit\n        [charLength]=\"charLength\"\n        matInput\n        name=\"displayName\"\n        placeholder=\"Stack Name\"\n        autocomplete=\"off\"\n        required /&gt;\n    &lt;/mat-form-field&gt;\n</code></pre>\n\n<p>And this is my directive</p>\n\n<pre><code>import { Directive, OnInit, NgModule, ElementRef, OnChanges, Input, SimpleChanges, Renderer2 } from '@angular/core';\n\n@Directive({\n  selector: '[mongoIndexLimit]'\n})\nexport class MongoIndexLimitDirective implements OnInit, OnChanges {\n  @Input() public charLength?: number;\n  private maxLength = 5;\n  constructor(\n    private el: ElementRef&lt;HTMLElement&gt;,\n    private renderer: Renderer2\n  ) { }\n\n  public ngOnInit() {\n    this.el.nativeElement.setAttribute('maxLength', this.maxLength.toString());\n  }\n\n  public ngOnChanges(changes: SimpleChanges) {\n    if (changes.charLength.currentValue &gt;= 5) {\n      const child = document.createElement('mat-error');\n      this.renderer.appendChild(this.el.nativeElement.parentElement.parentElement.parentElement, child);\n    }\n  }\n\n}\n</code></pre>\n\n<p>When i try the above i was able to append a &lt; mat-error > element to the DOM, but angular doesn't treat it as a compiler &lt; mat-error > angular material. it is just a dummy &lt; mat-error > and not a material component.</p>\n\n<p>I desire the result to be an input component with maxLength set and a dynamically generated mat-error which shows when the limit exceeds, just like how it is in the example below.</p>\n\n<p><a href=\"https://material.angular.io/components/input/examples\" rel=\"noreferrer\">https://material.angular.io/components/input/examples</a> \n(titled Input with custom Error state matcher)</p>\n\n<p>Sorry for my bad English .</p>\n"}, {"tags": ["typescript", "inheritance", "strong-typing", "typescript3.0"], "comments": [{"owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "edited": false, "score": 0, "creation_date": 1556699028, "post_id": 55933364, "comment_id": 98519600, "body": "Something like: <code>function foo(ctor: new (...args) =&gt; Page) {}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 1, "last_activity_date": 1556699390, "creation_date": 1556699390, "answer_id": 55933548, "question_id": 55933364, "link": "https://stackoverflow.com/questions/55933364/how-to-define-typescript-function-that-takes-a-type-as-a-strongly-typed-argument/55933548#55933548", "title": "How to define Typescript function that takes a type as a strongly typed argument", "body": "<p>You just need to use a constructor signature: </p>\n\n<pre><code>class Page {\n    private p!: string;\n}\nclass DerivedPage extends Page { }\nclass OtherPage extends Page { \n    constructor(param: number){\n        super();\n    }\n}\nclass NotPage { private np!: string; }\n\nfunction createPage(ctor: new (...a: any[])=&gt; Page, ...a: any[]) {\n    new ctor(...a);\n}\n</code></pre>\n\n<p>Depending on need you can also create a more generic version that preserves parameter and class type:</p>\n\n<pre><code>//Preserves argument and class type\nfunction genericCreatePage&lt;T extends Page, A extends any[]&gt;(ctor: new (...a: A)=&gt; T, ...a:A){\n    return new ctor(...a);\n}\n\ngenericCreatePage(DerivedPage)\ngenericCreatePage(OtherPage, 0)\ngenericCreatePage(OtherPage, \"0\") //err\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28915, "user_id": 811405, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVcPB.jpg?s=128&g=1", "display_name": "Can Poyrazo\u011flu", "link": "https://stackoverflow.com/users/811405/can-poyrazo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1556731019, "post_id": 55933600, "comment_id": 98533094, "body": "<code>T extends Page</code> is exactly what I need. However, I was wondering if there&#39;s any way to apply it to an unnamed function? I&#39;ve tried <code>function&lt;T extends Page&gt;(a: T){ ... }</code> but that didn&#39;t work."}, {"owner": {"reputation": 28915, "user_id": 811405, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVcPB.jpg?s=128&g=1", "display_name": "Can Poyrazo\u011flu", "link": "https://stackoverflow.com/users/811405/can-poyrazo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1556783443, "post_id": 55933600, "comment_id": 98548356, "body": "Actually I&#39;ve just tried the named example too, it doesn&#39;t work. It says <code>&#39;&gt;&#39; expected</code> after I open <code>&lt;</code>"}, {"owner": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "reply_to_user": {"reputation": 28915, "user_id": 811405, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVcPB.jpg?s=128&g=1", "display_name": "Can Poyrazo\u011flu", "link": "https://stackoverflow.com/users/811405/can-poyrazo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1556785288, "post_id": 55933600, "comment_id": 98549279, "body": "Named example should work just fine. I just tried as well. Can you make sure there are no types? And I also edited my answer to show the type with arrow function. It might be useful for you depending in your actual case"}, {"owner": {"reputation": 28915, "user_id": 811405, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVcPB.jpg?s=128&g=1", "display_name": "Can Poyrazo\u011flu", "link": "https://stackoverflow.com/users/811405/can-poyrazo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1556789408, "post_id": 55933600, "comment_id": 98551332, "body": "Sorry, it was Vscode&#39;s bug. I&#39;ve restarted Vscode and the syntax errors are gone."}], "tags": [], "owner": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "is_accepted": true, "score": 2, "last_activity_date": 1556785222, "last_edit_date": 1556785222, "creation_date": 1556699726, "answer_id": 55933600, "question_id": 55933364, "link": "https://stackoverflow.com/questions/55933364/how-to-define-typescript-function-that-takes-a-type-as-a-strongly-typed-argument/55933600#55933600", "title": "How to define Typescript function that takes a type as a strongly typed argument", "body": "<p>If you want only the classes Page, DerivedPage, AnotherDerivedPage; you can use something as follows:</p>\n\n<pre><code>function foo (foo: Page | DerivedPage | AnotherDerivedPage)\n</code></pre>\n\n<p>If you want an argument which extends Page, probably below is the way to go:</p>\n\n<pre><code>function foo&lt;T extends Page&gt; (a: T) { ... }\n</code></pre>\n\n<p><strong>EDIT:</strong><br>\nAdding an example of such type to use with arrow functions</p>\n\n<pre><code>type foo&lt;T extends Page&gt; = (v: T) =&gt; void\nconst fn: foo&lt;DeribedPage&gt; = (v) =&gt; { /* ... */ }\n</code></pre>\n"}], "owner": {"reputation": 28915, "user_id": 811405, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVcPB.jpg?s=128&g=1", "display_name": "Can Poyrazo\u011flu", "link": "https://stackoverflow.com/users/811405/can-poyrazo%c4%9flu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 55933600, "answer_count": 2, "score": 0, "last_activity_date": 1556785222, "creation_date": 1556698587, "question_id": 55933364, "link": "https://stackoverflow.com/questions/55933364/how-to-define-typescript-function-that-takes-a-type-as-a-strongly-typed-argument", "title": "How to define Typescript function that takes a type as a strongly typed argument", "body": "<p>I want to create a function that takes in a type (created with <code>export class</code> and imported normally) that extends a specific type. I have a <code>Page</code> class and many derived classes. In plain English, I'd like to have a function accept <code>Page</code>, <code>DerivedPage</code>, <code>AnotherDerivedPage</code> <em>classes</em> (not instances), obviously, trying to avoid <code>any</code> and keep strong typing.</p>\n\n<p>How do I do it?</p>\n"}, {"tags": ["javascript", "typescript", "es6-promise", "ionic4"], "comments": [{"owner": {"reputation": 3951, "user_id": 11126534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0edb5159d7bad3d2fe37a313b340684?s=128&d=identicon&r=PG&f=1", "display_name": "mgarcia", "link": "https://stackoverflow.com/users/11126534/mgarcia"}, "edited": false, "score": 0, "creation_date": 1556711651, "post_id": 55933325, "comment_id": 98524210, "body": "It seems that the handler you have on <i>click</i> event is asynchronous, so your callback should be indeed being executed on the first click only it does not resolve until later. Also, what are <code>toDataURL</code> and  <code>returnData</code>?"}, {"owner": {"reputation": 11, "user_id": 6575255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6a5ff7659c909ba19d79b901b09cd5?s=128&d=identicon&r=PG&f=1", "display_name": "carversmind", "link": "https://stackoverflow.com/users/6575255/carversmind"}, "reply_to_user": {"reputation": 3951, "user_id": 11126534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0edb5159d7bad3d2fe37a313b340684?s=128&d=identicon&r=PG&f=1", "display_name": "mgarcia", "link": "https://stackoverflow.com/users/11126534/mgarcia"}, "edited": false, "score": 0, "creation_date": 1556728260, "post_id": 55933325, "comment_id": 98531968, "body": "@mgarcia I added some more info as u requested I hope it help you to understand."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6575255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6a5ff7659c909ba19d79b901b09cd5?s=128&d=identicon&r=PG&f=1", "display_name": "carversmind", "link": "https://stackoverflow.com/users/6575255/carversmind"}, "edited": false, "score": 0, "creation_date": 1556708868, "post_id": 55933420, "comment_id": 98523142, "body": "No sorry that didn&#39;t work, it created the very same issue. :/"}], "tags": [], "owner": {"reputation": 781, "user_id": 605460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c49cb1fccbcbbb3cd6d66c2ef6be32b?s=128&d=identicon&r=PG", "display_name": "Romain", "link": "https://stackoverflow.com/users/605460/romain"}, "is_accepted": false, "score": 0, "last_activity_date": 1556699182, "last_edit_date": 1556699182, "creation_date": 1556698876, "answer_id": 55933420, "question_id": 55933325, "link": "https://stackoverflow.com/questions/55933325/first-click-doesnt-log-all-info-but-second-click-does/55933420#55933420", "title": "First click doesn&#39;t log all info but second click does", "body": "<p>refactoring may help:</p>\n\n<pre><code>const btn = document.querySelector(\"button\");\nbtn.disabled = false;\nasync function getData() {\n   Object.keys(await returnData).forEach(function(item) {\n      console.log(item); // key\n      console.log(typeof item);\n      console.log(item);\n\n      console.log(returnData[item]); // value\n   });\n   console.log(await returnData);\n};\n\nbtn.onclick = function(e) {\n   takeASnap()\n      .then(toDataURL)\n      .then(() =&gt; await getData());\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6575255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6a5ff7659c909ba19d79b901b09cd5?s=128&d=identicon&r=PG&f=1", "display_name": "carversmind", "link": "https://stackoverflow.com/users/6575255/carversmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556728204, "creation_date": 1556698398, "last_edit_date": 1556728204, "question_id": 55933325, "link": "https://stackoverflow.com/questions/55933325/first-click-doesnt-log-all-info-but-second-click-does", "title": "First click doesn&#39;t log all info but second click does", "body": "<p>Button wont log everything on first click but does on second click. \nPretty much it skips the function that iterate through the object. </p>\n\n<p>Well I've tried putting promises and async await on most function thinking this was the problem, but to no avail. </p>\n\n<p>// button code</p>\n\n<pre><code>const btn = document.querySelector(\"button\");\n        btn.disabled = false;\n        btn.onclick = function(e) {\n\n          takeASnap()\n            .then(toDataURL)\n            .then(async function() {\n              Object.keys(await returnData).forEach(function(item) {\n                console.log(item); // key\n                console.log(typeof item);\n                console.log(item);\n\n                console.log(returnData[item]); // value\n              });\n              console.log(await returnData);\n            });\n\n        };\n      });\n</code></pre>\n\n<h2>HTML</h2>\n\n<pre><code> &lt;div class=\"window\"&gt;\n &lt;video&gt;&lt;/video&gt;\n  &lt;button class=\"snapshot\"&gt;take a snapshot&lt;/button&gt;\n &lt;/div&gt;\n</code></pre>\n\n<h2>toDataUrl</h2>\n\n<pre><code>async function toDataURL(blob) {\n      let reader = new FileReader();\n      let b64;\n      reader.readAsDataURL(blob);\n      reader.onloadend = function() {\n        let base64data = reader.result;\n        let count = 0;\n        let data;\n\n// ChunkSubstr takes thousand character and put into array that is \n// returned\n        b64 = chunkSubstr(base64data, 1000);\n        console.log(\"Hllo\");\n        webSocket(b64);\n      };\n    }\n</code></pre>\n\n<h2>webSocket function</h2>\n\n<p>This is the function that assign the returndata it's value which comes from a server. </p>\n\n<pre><code>async function webSocket(b64) {\n      const ws = new WebSocket(\"ws://192.168.1.70:3000\");\n\n      ws.onopen = await function() {\n        console.log(\"Connected\");\n\n        b64.forEach(element =&gt; {\n          ws.send(m_imageNr + \" \" + element);\n          // console.log(element);\n        });\n\n        m_imageNr++;\n\n        ws.onmessage = function(event) {\n          console.log(typeof returnData);\n\n          returnData.push(event.data);\n        };\n      };\n\n      return await returnData;\n    }\n</code></pre>\n\n<p>Expected result is that it should iterate through the object on first click but it does only do that on the second click.</p>\n\n<p>EDITTED added some code that was asked for. </p>\n"}, {"tags": ["reactjs", "typescript", "redux", "react-hooks"], "comments": [{"owner": {"reputation": 90, "user_id": 3872192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6j6l.png?s=128&g=1", "display_name": "Ankit Aneja", "link": "https://stackoverflow.com/users/3872192/ankit-aneja"}, "edited": false, "score": 0, "creation_date": 1556698236, "post_id": 55933243, "comment_id": 98519373, "body": "Have you checked that you are getting data in the <code>content</code> variable before calling the getFirstOrderId function?"}, {"owner": {"reputation": 31, "user_id": 11264995, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DOW7DlH84kg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPRGoeBXc2Dx0ToXRhUqKxuFt8Ww/mo/photo.jpg?sz=128", "display_name": "Lior Ehrlich", "link": "https://stackoverflow.com/users/11264995/lior-ehrlich"}, "reply_to_user": {"reputation": 90, "user_id": 3872192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6j6l.png?s=128&g=1", "display_name": "Ankit Aneja", "link": "https://stackoverflow.com/users/3872192/ankit-aneja"}, "edited": false, "score": 0, "creation_date": 1556698428, "post_id": 55933243, "comment_id": 98519430, "body": "Yes. I console logged the function&#39;s return value right before the &#39;useState&#39; line, and it returned an Id."}, {"owner": {"reputation": 3951, "user_id": 11126534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0edb5159d7bad3d2fe37a313b340684?s=128&d=identicon&r=PG&f=1", "display_name": "mgarcia", "link": "https://stackoverflow.com/users/11126534/mgarcia"}, "edited": false, "score": 0, "creation_date": 1556707866, "post_id": 55933243, "comment_id": 98522772, "body": "@LiorEhrlich, could you provide a fiddle with the behaviour you are describing? It really seems to be a problem with the data in your <code>content</code> prop."}, {"owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1556717381, "post_id": 55933243, "comment_id": 98526735, "body": "I can&#39;t seem to reproduce this: <a href=\"https://stackblitz.com/edit/react-ts-tfam2h?file=index.tsx\" rel=\"nofollow noreferrer\">stackblitz.com/edit/react-ts-tfam2h?file=index.tsx</a> -- what is"}], "answers": [{"tags": [], "owner": {"reputation": 13410, "user_id": 10128619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bdc22c54f0db808af642c22b4308f22?s=128&d=identicon&r=PG&f=1", "display_name": "cbdeveloper", "link": "https://stackoverflow.com/users/10128619/cbdeveloper"}, "is_accepted": false, "score": 0, "last_activity_date": 1556780798, "creation_date": 1556780798, "answer_id": 55947258, "question_id": 55933243, "link": "https://stackoverflow.com/questions/55933243/how-to-set-initial-state-in-usestate-using-a-function/55947258#55947258", "title": "How to set initial state in &#39;useState&#39; using a function?", "body": "<p>This might work:</p>\n\n<pre><code>const [currentRecord, setCurrentRecord] = useState(null);\n\nuseEffect(()=&gt;{ // This will run after 1st render\n\n  setCurrentRecord(getFirstOrderId(content)); // OPTION 1\n  setCurrentRecord(()=&gt;{                      // OPTION 2\n    return getFirstOrderId(content);\n  });\n\n},[]);\n</code></pre>\n\n<p>You can set up a <code>loading</code> state to wait for the <code>useEffect()</code> to take place.</p>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 7621960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780f25196ad35917b570c30678cb953b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Slutsky", "link": "https://stackoverflow.com/users/7621960/tom-slutsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1587210408, "creation_date": 1587210408, "answer_id": 61288564, "question_id": 55933243, "link": "https://stackoverflow.com/questions/55933243/how-to-set-initial-state-in-usestate-using-a-function/61288564#61288564", "title": "How to set initial state in &#39;useState&#39; using a function?", "body": "<p>You can actually do lazy initialisation to state with a function. how ever you called the function and not passed in as a parameter, meaning you passed the returned value of the function as the initial value to use state.\nYou can check out the official explanation:\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all</a></p>\n"}, {"tags": [], "owner": {"reputation": 164, "user_id": 7707738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3ca97f8715577d77b3d45bd600f91?s=128&d=identicon&r=PG&f=1", "display_name": "Rehan", "link": "https://stackoverflow.com/users/7707738/rehan"}, "is_accepted": false, "score": -1, "last_activity_date": 1589426537, "creation_date": 1589426537, "answer_id": 61788737, "question_id": 55933243, "link": "https://stackoverflow.com/questions/55933243/how-to-set-initial-state-in-usestate-using-a-function/61788737#61788737", "title": "How to set initial state in &#39;useState&#39; using a function?", "body": "<p>Put a function inside the useState hook and return the value.</p>\n\n<pre><code>const [value, setValue] = useState(() =&gt; ({key: \"Param\"}));\nconsole.log(value) // output &gt;&gt; {key: \"Param\"}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11264995, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DOW7DlH84kg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPRGoeBXc2Dx0ToXRhUqKxuFt8Ww/mo/photo.jpg?sz=128", "display_name": "Lior Ehrlich", "link": "https://stackoverflow.com/users/11264995/lior-ehrlich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3152, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1589426537, "creation_date": 1556697882, "question_id": 55933243, "link": "https://stackoverflow.com/questions/55933243/how-to-set-initial-state-in-usestate-using-a-function", "title": "How to set initial state in &#39;useState&#39; using a function?", "body": "<p>I am building a table component. It gets as a prop an object called content which holds records that are displayed as the table's content. The component has a state called 'currentRecord' which holds the id of the selected row (changes in onClick event on each row).\nI want to set the first record's id to be the initial state using the 'useState'. \nAs an initial state argument for the 'useState' it has a function which return the key(which is the id) of the first record in the content prop. But it returns undefined.  When console logging the return value of that function, it return an id. \nWhy does it return undefined when setting the initial state using a function?</p>\n\n<p>I have tried setting the initial state using a string instead of a function, and it worked.</p>\n\n<pre><code>function getFirstOrderId(content:object): string {\n    return Object.keys(content)[0];\n}\n\nconst Table: FunctionComponent&lt;Props&gt; = props =&gt; {\n  const { columnTitles, content, onRowClick } = props;\n  const [currentRecord, setCurrentRecord] = useState(getFirstOrderId(content));\n  useEffect(() =&gt; {\n    onRowClick(currentRecord);\n  }, [currentRecord]);\n  return (\n    &lt;StyledTable&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          {Object.values(columnTitles).map(fieldName =&gt; {\n            return &lt;th&gt;{fieldName}&lt;/th&gt;;\n          })}\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;StyledTBody&gt;\n        {mapWithKeys((order: any, id: string) =&gt; {\n          return (\n            &lt;StyledRow\n              key={id}\n              isSelected={id === currentRecord}\n              onClick={() =&gt; setCurrentRecord(id)}\n              onDoubleClick={() =&gt; window.open(\"/\" + order)}\n            &gt;\n              {Object.keys(columnTitles).map(fieldContent =&gt; {\n                return &lt;td&gt;{order[fieldContent]}&lt;/td&gt;;\n              })}\n            &lt;/StyledRow&gt;\n          );\n        }, content)}\n      &lt;/StyledTBody&gt;\n    &lt;/StyledTable&gt;\n  );\n};\n\nexport default Table;\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "jestjs", "react-testing-library"], "comments": [{"owner": {"reputation": 11904, "user_id": 1047903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OJQvW.jpg?s=128&g=1", "display_name": "Giorgio Polvara - Gpx", "link": "https://stackoverflow.com/users/1047903/giorgio-polvara-gpx"}, "edited": false, "score": 1, "creation_date": 1557269107, "post_id": 55933105, "comment_id": 98706163, "body": "I see <code>handleSubmit</code> is async. Are you doing any <code>await</code> before calling <code>alert</code>?"}, {"owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "reply_to_user": {"reputation": 11904, "user_id": 1047903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OJQvW.jpg?s=128&g=1", "display_name": "Giorgio Polvara - Gpx", "link": "https://stackoverflow.com/users/1047903/giorgio-polvara-gpx"}, "edited": false, "score": 0, "creation_date": 1557309341, "post_id": 55933105, "comment_id": 98718310, "body": "Yes, I call await <code>await saveImagetoStorage()</code> which saves an image to FirebaseStorage, as well as call <code>await activityObject.createActivity();</code> which saves a document to Firebase-Firestore. Is that an issue?"}, {"owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "reply_to_user": {"reputation": 11904, "user_id": 1047903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OJQvW.jpg?s=128&g=1", "display_name": "Giorgio Polvara - Gpx", "link": "https://stackoverflow.com/users/1047903/giorgio-polvara-gpx"}, "edited": false, "score": 0, "creation_date": 1557309467, "post_id": 55933105, "comment_id": 98718387, "body": "Oh, do I need to <a href=\"https://www.leighhalliday.com/async-axios-react-testing-library\" rel=\"nofollow noreferrer\">use</a> <code>await waitForElement(() =&gt; getByText(&#47;_______&#47;i));</code> before expecting <code>alertMock</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "edited": false, "score": 0, "creation_date": 1556697800, "post_id": 55933182, "comment_id": 98519240, "body": "I get the following error on using <code>global.alert</code>. <code>Property &#39;alert&#39; does not exist on type &#39;Global&#39;.ts(2339) </code>. Still, <code>npm test</code> runs, but the expect statement fails."}, {"owner": {"reputation": 91, "user_id": 6033812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YTJWQFbRftc/AAAAAAAAAAI/AAAAAAAAADk/Otz0hx5iEzk/photo.jpg?sz=128", "display_name": "Raffaele Abramini", "link": "https://stackoverflow.com/users/6033812/raffaele-abramini"}, "reply_to_user": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "edited": false, "score": 0, "creation_date": 1556698261, "post_id": 55933182, "comment_id": 98519384, "body": "What about <code>Object.assign</code> on the window object?"}, {"owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "edited": false, "score": 0, "creation_date": 1556700253, "post_id": 55933182, "comment_id": 98520040, "body": "Do you mean like this: <code>Object.assign(window.alert,jest.fn());</code> And then later checking with:  <code>expect(window.alert).toHaveBeenCalledTimes(1)</code> Expect fails here too."}], "tags": [], "owner": {"reputation": 91, "user_id": 6033812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YTJWQFbRftc/AAAAAAAAAAI/AAAAAAAAADk/Otz0hx5iEzk/photo.jpg?sz=128", "display_name": "Raffaele Abramini", "link": "https://stackoverflow.com/users/6033812/raffaele-abramini"}, "is_accepted": false, "score": 1, "last_activity_date": 1556697438, "creation_date": 1556697438, "answer_id": 55933182, "question_id": 55933105, "link": "https://stackoverflow.com/questions/55933105/how-to-mock-or-assert-whether-window-alert-has-fired-in-react-jest-with-typesc/55933182#55933182", "title": "How to mock or assert whether window.alert has fired in React &amp; Jest with typescript?", "body": "<p>You could try to use <code>global</code> instead of <code>window</code>:</p>\n\n<pre><code>global.alert = jest.fn();\nexpect(global.alert).toHaveBeenCalledTimes(1);\n</code></pre>\n\n<p>Alternatively, try to <code>Object.assign</code></p>\n\n<pre><code>const alert = jest.fn()\nObject.defineProperty(window, 'alert', alert);\n</code></pre>\n"}], "owner": {"reputation": 756, "user_id": 4353782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwmsI.jpg?s=128&g=1", "display_name": "Mayur Dhurpate", "link": "https://stackoverflow.com/users/4353782/mayur-dhurpate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3438, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556698000, "creation_date": 1556696888, "last_edit_date": 1556698000, "question_id": 55933105, "link": "https://stackoverflow.com/questions/55933105/how-to-mock-or-assert-whether-window-alert-has-fired-in-react-jest-with-typesc", "title": "How to mock or assert whether window.alert has fired in React &amp; Jest with typescript?", "body": "<p>I am using jest tests to test my React project written in #typescript created with Create React App. I'm using <code>react-testing-library</code>. I have a form component which shows an <code>alert</code> if the form is submitted empty. I wanted to test this feature (maybe) by spying/mocking the <code>window.alert</code> but it doesn't work.</p>\n\n<p>I tried using <code>jest.fn()</code> as suggested in many SO answers but that's not working too.</p>\n\n<pre><code>window.alert = jest.fn();\nexpect(window.alert).toHaveBeenCalledTimes(1);\n</code></pre>\n\n<p>Here's how I implemented it: Form.tsx</p>\n\n<pre><code>async handleSubmit(event: React.FormEvent&lt;HTMLFormElement&gt;) {\n   // check for errors\n    if (errors) {\n        window.alert('Some Error occurred');\n        return;\n    }\n}\n</code></pre>\n\n<p>Here's how I built the React+Jest+react-testing-library test: Form.test.tsx</p>\n\n<pre><code>it('alerts on submit click', async () =&gt; {\n  const alertMock = jest.spyOn(window,'alert'); \n  const { getByText, getByTestId } = render(&lt;Form /&gt;)\n  fireEvent.click(getByText('Submit'))\n  expect(alertMock).toHaveBeenCalledTimes(1)\n})\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "angular2-directives"], "comments": [{"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556691830, "post_id": 55932377, "comment_id": 98517660, "body": "<a href=\"https://stackoverflow.com/a/12476131/7124761\">This</a> regex?"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556691866, "post_id": 55932377, "comment_id": 98517667, "body": "Can you provide stacblitz?"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556694543, "post_id": 55932377, "comment_id": 98518323, "body": "are you replacing <code>0-9</code> numbers with empty string?"}, {"owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "reply_to_user": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556694727, "post_id": 55932377, "comment_id": 98518361, "body": "Now I replacing all symbols by empty string and writing only numbers @PrashantPimpale"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556694768, "post_id": 55932377, "comment_id": 98518371, "body": "please provide related html and Ts code"}, {"owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "reply_to_user": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556694839, "post_id": 55932377, "comment_id": 98518387, "body": "Updated my code @PrashantPimpale"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556694967, "post_id": 55932377, "comment_id": 98518415, "body": "Post the TS code?"}, {"owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "reply_to_user": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556695199, "post_id": 55932377, "comment_id": 98518484, "body": "It&#39;s already posted @PrashantPimpale"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556695462, "post_id": 55932377, "comment_id": 98518574, "body": "Do you want to allow user to type only decimal numbers?"}, {"owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "reply_to_user": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556695497, "post_id": 55932377, "comment_id": 98518585, "body": "yes. like 99.5, etc. @PrashantPimpale"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556695562, "post_id": 55932377, "comment_id": 98518601, "body": "Then use Regular expression in FormControl? Why do you want that to be done with Directive? Or may be pattern?"}, {"owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "reply_to_user": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556695700, "post_id": 55932377, "comment_id": 98518640, "body": "Because I think it&#39;s better. Anyway, how to write Regexp for this in directive? @PrashantPimpale"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1556697590, "post_id": 55932377, "comment_id": 98519178, "body": "Check here: <a href=\"https://stackblitz.com/edit/angular-dtuvhw\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-dtuvhw</a> Do you want this?"}], "answers": [{"comments": [{"owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "edited": false, "score": 0, "creation_date": 1556698021, "post_id": 55933219, "comment_id": 98519307, "body": "It helps. Thank&#39;s Also little question, how I can limit number after <code>.</code> to 2 digits?"}], "tags": [], "owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "is_accepted": true, "score": 4, "last_activity_date": 1556697664, "creation_date": 1556697664, "answer_id": 55933219, "question_id": 55932377, "link": "https://stackoverflow.com/questions/55932377/number-directive-to-support-decimal-numbers/55933219#55933219", "title": "Number directive to support decimal numbers", "body": "<p>Try this:</p>\n\n<pre><code>@HostListener('input', ['$event.target.value'])\nonInput(value: string) {\n  // Use NgControl patchValue to prevent the issue on validation\n  this.el.control.patchValue(value.replace(/[^0-9].[^0-9]/g, ''));\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-dtuvhw\" rel=\"nofollow noreferrer\"><code>Working_Demo</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 202, "user_id": 3917767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c2b30d0c35cfc1a39f07628ff56cdd?s=128&d=identicon&r=PG&f=1", "display_name": "raffaeleambrosio", "link": "https://stackoverflow.com/users/3917767/raffaeleambrosio"}, "is_accepted": false, "score": 0, "last_activity_date": 1559828518, "creation_date": 1559828518, "answer_id": 56478882, "question_id": 55932377, "link": "https://stackoverflow.com/questions/55932377/number-directive-to-support-decimal-numbers/56478882#56478882", "title": "Number directive to support decimal numbers", "body": "<p>In my case I have need to considerate two consegutive point too and replace caracter. Maybe is writable with regex but this work for me.\nExample if you type or paste 45.456.6 it will be repaced with 45.4566</p>\n\n<pre><code> @HostListener('input', ['$event']) onInputChange(event) {\n    let initalValue: string = this.el.nativeElement.value;\n    initalValue = initalValue.replace(/[^\\.|0-9]/g, '');\n    // elimina le seconde occorrenze del punto\n    const count = (initalValue.match(/\\./g) || []).length;\n    for (let i = 1; i &lt; count; i++) {\n      initalValue = this.repaceSecondDotOccurrence(initalValue);\n    }\n    this.el.nativeElement.value = initalValue;\n  }\n\n\n  repaceSecondDotOccurrence(inputString): string {\n    let t = 0;\n    return inputString.replace(/\\./g, function (match) {\n      t++;\n      return (t === 2) ? '' : match;\n    });\n  }\n</code></pre>\n"}], "owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 55933219, "answer_count": 2, "score": 1, "last_activity_date": 1559828518, "creation_date": 1556691666, "last_edit_date": 1556694826, "question_id": 55932377, "link": "https://stackoverflow.com/questions/55932377/number-directive-to-support-decimal-numbers", "title": "Number directive to support decimal numbers", "body": "<p>I have written a directive for text input, to support int values.</p>\n\n<p>Here is it </p>\n\n<pre><code>import { NgControl } from '@angular/forms';\nimport { HostListener, Directive } from '@angular/core';\n\n@Directive({\n  exportAs: 'number-directive',\n  selector: 'number-directive, [number-directive]'\n})\nexport class NumberDirective {\n  private el: NgControl;\n  constructor(ngControl: NgControl) {\n    this.el = ngControl;\n  }\n  // Listen for the input event to also handle copy and paste.\n  @HostListener('input', ['$event.target.value'])\n  onInput(value: string) {\n    // Use NgControl patchValue to prevent the issue on validation\n    this.el.control.patchValue(value.replace(/[^0-9]/g, ''));\n  }\n}\n</code></pre>\n\n<p>And HTML </p>\n\n<pre><code> &lt;div class=\"form-group\"&gt;\n                    &lt;label&gt;{{ l(\"RoomWidth\") }}&lt;/label&gt;\n                    &lt;input\n                        decimal-number-directive\n                        #roomWidthInput=\"ngModel\"\n                        class=\"form-control nospinner-input\"\n                        type=\"text\"\n                        name=\"roomWidth\"\n                        [(ngModel)]=\"room.roomWidth\"\n                        maxlength=\"32\"\n                    /&gt;\n                &lt;/div&gt;\n</code></pre>\n\n<p>But I need it to support decimal values. For example 99.5</p>\n\n<p>How do I need to modify it?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1556693107, "post_id": 55932271, "comment_id": 98517960, "body": "I think you should take a huge step back and wonder if it&#39;s a good idea to manipulate lists of 600K elements in a web frontend application. That logic should be in your backend. But anyway, your code is O(n^2). Make it O(n) by storing the selected car owner in a Map where the key is the var ID. A map lookup if O(1)."}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556695722, "post_id": 55932271, "comment_id": 98518645, "body": "Adding on to @JBNizet &#39;s point, I would recommend you to do some kind of server side pagination/filtering so that only a certain number of rows is being fetched at any one time. On top of that, you should consider virtual scrolling to minimise the negative performance on your DOM."}, {"owner": {"reputation": 21416, "user_id": 274500, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1rCh2.jpg?s=128&g=1", "display_name": "Stepan Suvorov", "link": "https://stackoverflow.com/users/274500/stepan-suvorov"}, "edited": false, "score": 0, "creation_date": 1556702369, "post_id": 55932271, "comment_id": 98520756, "body": "adding to first comment. also you can try to use WebWorkers for this operation"}], "owner": {"reputation": 14120, "user_id": 844872, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15cf8e9490ec58e8449f3f05d1c87667?s=128&d=identicon&r=PG", "display_name": "Illep", "link": "https://stackoverflow.com/users/844872/illep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1556693756, "creation_date": 1556690751, "question_id": 55932271, "link": "https://stackoverflow.com/questions/55932271/optimizing-code-traversing-2-list-objects", "title": "Optimizing code - traversing 2 list objects", "body": "<p>I have 2 List <code>allCarOwners: CarOwner[] = [];</code> and <code>selectedCarOwners: CarOwner[] = [];</code></p>\n\n<p><strong>CarOwner Model</strong></p>\n\n<pre><code>carId\nownerName\ncarType\ncarYear\n</code></pre>\n\n<p>The <code>allCarOwners</code> list will contain around 600k+ records, and the <code>selectedCarOwners</code> will contain around 500K+ records in it. I need to compare the 2 <code>carId</code> 's from the 2 list and update the <code>ownerName</code> field in the <code>allCarOwners</code> list. I will ulso be updating the UI.</p>\n\n<pre><code>        this.allCarOwners.map((allCarOwner: CarOwner , index) =&gt; {\n          this.selectedCarOwners.map((selectedCarOwner: CarOwner ) =&gt; {\n            if (allCarOwner.carId=== selectedCarOwner.carId) {\n                 // Update\n            }\n         });\n        });\n</code></pre>\n\n<p>The problem I am facing is that the browser stops responding for awhile, since there's 600K and 500K records when looping the 2 list. Is there a way I could write this logic in a better way ? Can I run this is Multiple threads (using <code>ParalelForeach</code>).</p>\n\n<p>Please help me out ?</p>\n"}, {"tags": ["typescript", "types"], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 4818123, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c7f6fefe7743c80b89b8af7d4ebacc2?s=128&d=identicon&r=PG&f=1", "display_name": "Takesi Tokugawa YD", "link": "https://stackoverflow.com/users/4818123/takesi-tokugawa-yd"}, "edited": false, "score": 0, "creation_date": 1556688518, "post_id": 55931940, "comment_id": 98516951, "body": "Thank you for the answer! Please tell me which type has <code>private self</code>. I suppose, not &#39;SuperHyperMegaExtraVeryPrettyLongClassName&#39;;"}, {"owner": {"reputation": 26, "user_id": 4818123, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c7f6fefe7743c80b89b8af7d4ebacc2?s=128&d=identicon&r=PG&f=1", "display_name": "Takesi Tokugawa YD", "link": "https://stackoverflow.com/users/4818123/takesi-tokugawa-yd"}, "edited": false, "score": 0, "creation_date": 1556692281, "post_id": 55931940, "comment_id": 98517746, "body": "@MarkQ., afraid not... I got <code>TS2322: Type &#39;typeof CollapsableAdvantagesDescription&#39; is not assignable to type &#39;{ DETAILS_TEXT_SUBCELL_CSS_CLASS_SELECTOR: string; EXPAND_ANIMATION_DURATION_MILLISECONDS: number; }&#39;.</code> error."}, {"owner": {"reputation": 516, "user_id": 1598139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ilAMS.jpg?s=128&g=1", "display_name": "Marc Q.", "link": "https://stackoverflow.com/users/1598139/marc-q"}, "reply_to_user": {"reputation": 26, "user_id": 4818123, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c7f6fefe7743c80b89b8af7d4ebacc2?s=128&d=identicon&r=PG&f=1", "display_name": "Takesi Tokugawa YD", "link": "https://stackoverflow.com/users/4818123/takesi-tokugawa-yd"}, "edited": false, "score": 0, "creation_date": 1556695251, "post_id": 55931940, "comment_id": 98518501, "body": "Your answer may be in the error message. What about <code>const self: typeof SuperHyperMegaExtraVeryPrettyLongClassName = SuperHyperMegaExtraVeryPrettyLongClassName;</code>?"}], "tags": [], "owner": {"reputation": 516, "user_id": 1598139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ilAMS.jpg?s=128&g=1", "display_name": "Marc Q.", "link": "https://stackoverflow.com/users/1598139/marc-q"}, "is_accepted": false, "score": 1, "last_activity_date": 1556695274, "last_edit_date": 1556695274, "creation_date": 1556688135, "answer_id": 55931940, "question_id": 55931813, "link": "https://stackoverflow.com/questions/55931813/how-to-annotate-class-alias-in-typescript-for-static-properties-and-methods-call/55931940#55931940", "title": "How to annotate class alias in TypeScript for static properties and methods calling?", "body": "<p>The Typescript type system is <strong>duck-typing</strong>, which means that the right type for your <code>self</code> variable is probably to indicate how you intend to use it. In this case it must have the two properties you refer to.</p>\n\n<pre><code>class SuperHyperMegaExtraVeryPrettyLongClassName {\n\n  static exampleProperty1: number = 1;\n  static exampleProperty2: string = 'asdf';\n\n  private someMethod(): void {\n    const self: {exampleProperty1: number,exampleProperty2: string} = SuperHyperMegaExtraVeryPrettyLongClassName;\n    console.log(self.exampleProperty1, self.exampleProperty2);\n  }\n}\n</code></pre>\n\n<p>Let me know whether this works for you!</p>\n"}, {"tags": [], "owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "is_accepted": true, "score": 1, "last_activity_date": 1556692690, "creation_date": 1556692690, "answer_id": 55932495, "question_id": 55931813, "link": "https://stackoverflow.com/questions/55931813/how-to-annotate-class-alias-in-typescript-for-static-properties-and-methods-call/55932495#55932495", "title": "How to annotate class alias in TypeScript for static properties and methods calling?", "body": "<p>When you want the type of the <em>class</em> rather than of the <em>instance</em> you use <code>typeof</code> as a type-query:</p>\n\n<pre><code>class X {\n  static y: number = 1;\n  static z: string = 'hi';\n  private someMethod(): void {\n    const Class: typeof X = X;\n    console.log(Class.y, Class.z);\n  }\n}\n</code></pre>\n\n<p>You cannot do this in a generic way safely right now (see <a href=\"https://github.com/Microsoft/TypeScript/issues/3841\" rel=\"nofollow noreferrer\">Microsoft/TypeScript#3841</a> for the details), but you can work around the need for <code>typeof Y</code> at all <em>consumers</em> of <code>Y</code> if the class has an instance property that is of the type of the class:</p>\n\n<pre><code>type Class&lt;T&gt; = T extends Object ? T['constructor'] : never;\n\nclass Y {\n  'constructor': typeof Y;  // Quotes are important\n}\ntype XClass = Class&lt;X&gt;; // Function\ntype YClass = Class&lt;Y&gt;; // typeof Y;\n</code></pre>\n"}], "owner": {"reputation": 26, "user_id": 4818123, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c7f6fefe7743c80b89b8af7d4ebacc2?s=128&d=identicon&r=PG&f=1", "display_name": "Takesi Tokugawa YD", "link": "https://stackoverflow.com/users/4818123/takesi-tokugawa-yd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 55932495, "answer_count": 2, "score": 0, "last_activity_date": 1556698860, "creation_date": 1556686820, "last_edit_date": 1556692172, "question_id": 55931813, "link": "https://stackoverflow.com/questions/55931813/how-to-annotate-class-alias-in-typescript-for-static-properties-and-methods-call", "title": "How to annotate class alias in TypeScript for static properties and methods calling?", "body": "<p>Which type will be correct for <code>self</code> local variable in the code below?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>class SuperHyperMegaExtraVeryPrettyLongClassName {\n\n  static exampleProperty1: number = 1;\n  static exampleProperty2: string = 'asdf';\n\n  private someMethod(): void {\n    // invalid type\n    const self: SuperHyperMegaExtraVeryPrettyLongClassName = SuperHyperMegaExtraVeryPrettyLongClassName;\n    console.log(self.exampleProperty1, self.exampleProperty2);\n  }\n}\n</code></pre>\n"}, {"tags": ["typescript", "typescript-generics"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 3, "creation_date": 1556691539, "post_id": 55931791, "comment_id": 98517573, "body": "Are you actually having this issue ? Could you share your full code ? My tests show that <code>object is Schedule&lt;any, any&gt;;</code> will preserver type arguments:<a href=\"https://typescript-play.js.org/#code/CYUwxgNghgTiAEkoGdnwMpgBYmAVwhAB4BBAGngCEA+eAbwCh5n4oAueEgbiZYCMOlHi3jIALlDEBLMPCnJMOfIQAUAez4ArcGI54AdgGt9agO76AlBw3awYuWkW4CxKPoCeFN++o8AvgwMoEhwiGr64vAAblAQeCAc4jBS+gDm8AA+8Pp4ALZ8IDCZGNjOhERJKakUOfmFvoFSAGbwKk7KIAB08u0uKjFxIBYW9LzMA-GdUJ18UqnCLBNdfJ1iagCiAB4ADuEg+tKx-kA\" rel=\"nofollow noreferrer\">typescript-play.js.org/#code/&hellip;</a>"}, {"owner": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1556732481, "post_id": 55931791, "comment_id": 98533790, "body": "@TitianCernicova-Dragomir interesting, thanks. I am actually experiencing this problem--I&#39;ve updated the question to include two screenshots--but I cannot seem to create a simple reproduction using <code>stackblitz</code> or <code>typescript-play</code>. Maybe I&#39;m running into a problem elsewhere in my code or some kind of bug. This question came from an open source project, so you can <a href=\"https://gitlab.com/john.carroll.p/rschedule/blob/4be52bb3d82c7f92acf21b315fd04ccbd542c512/packages/rschedule/src/lib/schedule/schedule.ts#L18-32\" rel=\"nofollow noreferrer\">see the real code here</a>. But I think there are too many pieces to include in S.O."}], "owner": {"reputation": 6968, "user_id": 5490505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-6-yKyG1ZZUI/AAAAAAAAAAI/AAAAAAAAABA/5a7UfitqO5Y/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/5490505/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556732126, "creation_date": 1556686614, "last_edit_date": 1556732126, "question_id": 55931791, "link": "https://stackoverflow.com/questions/55931791/how-to-create-a-type-guard-which-doesnt-lose-generic-type-params", "title": "How to create a type guard which doesn&#39;t lose generic type params", "body": "<p>I have a generic class <code>Schedule&lt;T, D&gt;</code> which contains a static type guard <code>isSchedule()</code>. The first version of the type guard looked like:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>static isSchedule(object: unknown): object is Schedule&lt;any, any&gt;;\n</code></pre>\n\n<p>While this works, it isn't ideal because if you pass a union type which contains, for example, a <code>Schedule&lt;string, number&gt;</code> type, the <code>string</code> and <code>number</code> type parameters are lost when the type guard narrows the type to <code>Schedule&lt;any, any&gt;</code>.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>declare const value: string | number | Schedule&lt;string, number&gt;;\n\nif (Schedule.isSchedule(value)) {\n  // value: Schedule&lt;any, any&gt;\n\n  // ideally value would be narrowed to Schedule&lt;string, number&gt; in this case\n}\n</code></pre>\n\n<p>Is there a way to construct the type guard such that any type parameters, if present, are not discarded when the type guard narrows a union type?</p>\n\n<p>I've tried the following, which causes the typescript compiler to throw an error (but which seems to work, if you ignore the error--obviously I'd like to find a solution which doesn't throw an error):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Include&lt;T, U&gt; = Exclude&lt;T, Exclude&lt;T, U&gt;&gt;;\n\ntype GetScheduleType&lt;T&gt; = Include&lt;T, Schedule&lt;any, any&gt;&gt; extends never\n  ? Schedule&lt;any, any&gt;\n  : Include&lt;T, Schedule&lt;any, any&gt;&gt;;\n\nstatic isSchedule&lt;T&gt;(object: T): object is GetScheduleType&lt;T&gt;;\n</code></pre>\n\n<h3>Update</h3>\n\n<p>Two screenshots showing problem:</p>\n\n<ol>\n<li><p><a href=\"https://i.stack.imgur.com/i7rLf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i7rLf.png\" alt=\"Screenshot\"></a> using <code>fn(object: unknown): object is Schedule&lt;any, any&gt;</code> which does not work as intended.</p></li>\n<li><p><a href=\"https://i.stack.imgur.com/cJScm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cJScm.png\" alt=\"Screenshot\"></a> using hacky work around which does seem to work as intended, but which throws a typescript error.</p></li>\n</ol>\n"}, {"tags": ["reactjs", "typescript", "react-big-calendar"], "answers": [{"tags": [], "owner": {"reputation": 760, "user_id": 3676410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc00b70493dffecfc99c309ed28d4d80?s=128&d=identicon&r=PG&f=1", "display_name": "edlouth", "link": "https://stackoverflow.com/users/3676410/edlouth"}, "is_accepted": false, "score": 0, "last_activity_date": 1559009309, "creation_date": 1559009309, "answer_id": 56334203, "question_id": 55931766, "link": "https://stackoverflow.com/questions/55931766/customize-react-big-calendar-colors/56334203#56334203", "title": "Customize React Big Calendar colors", "body": "<p>If you use sass you can change a range of variables which should give you what you require.</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>@import 'react-big-calendar/lib/sass/styles';\n\n$out-of-range-color: lighten(#333, 40%);\n$out-of-range-bg-color: lighten(#333, 70%);\n\n$calendar-border: #DDD;\n$cell-border: #DDD;\n\n$border-color: #CCC;\n\n$segment-width: percentage(1 / 7);\n\n$time-selection-color: white;\n$time-selection-bg-color: rgba(0,0,0, .50);\n$date-selection-bg-color: rgba(0,0,0, .10);\n\n\n$event-bg: #3174ad;\n$event-border: darken(#3174ad, 10%);\n$event-outline: #3b99fc;\n$event-color: #fff;\n$event-border-radius: 5px;\n$event-padding: 2px 5px;\n$event-zindex: 4;\n\n$btn-color: #373a3c;\n$btn-bg: #fff;\n$btn-border: #ccc;\n\n$current-time-color: #74ad31;\n\n$rbc-css-prefix: rbc-i;\n\n$today-highlight-bg: #eaf6ff;\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 1184205, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e6b2beef26cb5ee7d5287fa8d804a7b4?s=128&d=identicon&r=PG", "display_name": "user1184205", "link": "https://stackoverflow.com/users/1184205/user1184205"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1417, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1559009309, "creation_date": 1556686395, "question_id": 55931766, "link": "https://stackoverflow.com/questions/55931766/customize-react-big-calendar-colors", "title": "Customize React Big Calendar colors", "body": "<p>I am new to React Big Calendar and it seems very useful but I'm stuck. I am creating a dark mode web site the default buttons work for what I want but the text is black and doesn't show up well on a dark background. Is there a way to not create a custom toolbar but to only change the text color (active button, hover button, and non active button text colors) ?  I have seen custom toolbars but that seems like over kill to just change the text color of the default buttons.</p>\n\n<p>thanks for the help. </p>\n\n<p>I am using \nReact \nTypescript \nof course React Big Calendar</p>\n"}, {"tags": ["node.js", "typescript", "mongoose"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5411551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194aebfe1ba38844e0fb0e58b3d1311b?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwin Reddy", "link": "https://stackoverflow.com/users/5411551/ashwin-reddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1556691329, "creation_date": 1556691329, "answer_id": 55932336, "question_id": 55931678, "link": "https://stackoverflow.com/questions/55931678/type-objectid-does-not-satisfy-the-constraint-mongoosedocument/55932336#55932336", "title": "Type &#39;ObjectId&#39; does not satisfy the constraint &#39;MongooseDocument&#39;", "body": "<p>Found the problem. I'm stupid, it's a silly mistake I was using wrong Type in type definition. Should be using <code>mongoose.Types.Array</code> instead of <code>mongoose.Types.DocumentArray</code></p>\n"}], "owner": {"reputation": 11, "user_id": 5411551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194aebfe1ba38844e0fb0e58b3d1311b?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwin Reddy", "link": "https://stackoverflow.com/users/5411551/ashwin-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 55932336, "answer_count": 1, "score": 0, "last_activity_date": 1556691329, "creation_date": 1556685588, "question_id": 55931678, "link": "https://stackoverflow.com/questions/55931678/type-objectid-does-not-satisfy-the-constraint-mongoosedocument", "title": "Type &#39;ObjectId&#39; does not satisfy the constraint &#39;MongooseDocument&#39;", "body": "<p>I 'm trying to bind my Model with a mongoose schema using Typescript. Everything looks good except when I use ObjectId inside mongoose.Types.DocumentArray&lt;>.</p>\n\n<pre><code>export interface TestModel extends mongoose.Document {\n  name: string;\n  sort: mongoose.Types.DocumentArray&lt;mongoose.Schema.Types.ObjectId&gt;;\n}\n\nconst TestSchema = new mongoose.Schema({\n  name: String,\n  sort: [mongoose.Schema.Types.ObjectId]\n});\n\nexport default mongoose.model&lt;TestModel&gt;('Test', TestSchema);\n</code></pre>\n\n<p>Following is the error I see</p>\n\n<blockquote>\n  <p>Type 'ObjectId' does not satisfy the constraint 'MongooseDocument'.<br>\n  Type 'ObjectId' is missing the following properties from type\n  'MongooseDocument': $isDefault, $session, depopulate, equals, and 24\n  more.ts(2344)</p>\n</blockquote>\n\n<p>If I use </p>\n\n<pre><code>sort: [mongoose.Schema.Types.ObjectId];\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>sort: mongoose.Types.DocumentArray&lt;mongoose.Schema.Types.ObjectId&gt;;\n</code></pre>\n\n<p>Everything looks good on schema side but I see mongoose type errors with methods like .pull() when doing operations on the modal results (TS is not picking it up as mongoose array type.)</p>\n\n<p>Scratching my head with this for hours, any help will be really appreciated.</p>\n"}, {"tags": ["jquery", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "is_accepted": true, "score": 5, "last_activity_date": 1556682597, "creation_date": 1556682597, "answer_id": 55931403, "question_id": 55931254, "link": "https://stackoverflow.com/questions/55931254/typescript-jquery-event-in-handler-has-not-properties-target-and-current/55931403#55931403", "title": "TypeScript &amp; JQuery: event in handler &quot;has not&quot; properties &#39;target&#39; and &#39;currentTarget&#39;", "body": "<p>This is because the <code>@types/jquery</code> type for the event that is provided to a callback (as opposed to the <code>$.Event</code> function) is called <code>TriggeredEvent</code>, not <code>Event</code>:</p>\n\n<pre><code>this.$Element.on('click', SELECTOR, (event: JQuery.TriggeredEvent) =&gt; {\n  const $ClickedLink: JQuery&lt;HTMLElement&gt; = JQuery(event.target);\n  // ... snip ...\n}\n</code></pre>\n"}], "owner": {"reputation": 26, "user_id": 4818123, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c7f6fefe7743c80b89b8af7d4ebacc2?s=128&d=identicon&r=PG&f=1", "display_name": "Takesi Tokugawa YD", "link": "https://stackoverflow.com/users/4818123/takesi-tokugawa-yd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 55931403, "answer_count": 1, "score": 0, "last_activity_date": 1556682597, "creation_date": 1556681275, "last_edit_date": 1556681986, "question_id": 55931254, "link": "https://stackoverflow.com/questions/55931254/typescript-jquery-event-in-handler-has-not-properties-target-and-current", "title": "TypeScript &amp; JQuery: event in handler &quot;has not&quot; properties &#39;target&#39; and &#39;currentTarget&#39;", "body": "<p>I got <code>TS2339: Property 'target' does not exist on type 'Event'.</code> in below code:</p>\n\n<pre><code>this.$Element.on('click', SELECTOR, (event: JQuery.Event) =&gt; {\n    const $ClickedLink: JQuery&lt;HTMLElement&gt; = JQuery(event.target);\n    //\n}\n</code></pre>\n\n<p><code>event.currentTarget</code> is also does not exist, as ... defined in JQuery types?</p>\n\n<p>Of course, there are no errors in compiled JavaScript.</p>\n\n<p><strong>This code is not the Angular!</strong> I just combine JQuery and class-based OOP.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 175871, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 1, "creation_date": 1556680675, "post_id": 55931194, "comment_id": 98515497, "body": "I don&#39;t see a problem for creating your own type for this. That I know of, there isn&#39;t a type for this, but it would be cool if you found one!"}], "answers": [{"tags": [], "owner": {"reputation": 4173, "user_id": 7428434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1348497625208827/picture?type=large", "display_name": "Shanon Jackson", "link": "https://stackoverflow.com/users/7428434/shanon-jackson"}, "is_accepted": true, "score": 2, "last_activity_date": 1556685850, "creation_date": 1556685850, "answer_id": 55931708, "question_id": 55931194, "link": "https://stackoverflow.com/questions/55931194/typescript-is-there-a-type-for-event-mouseeventhtmlbuttonelement-void/55931708#55931708", "title": "Typescript - is there a type for &quot;(event: MouseEvent&lt;HTMLButtonElement&gt;) =&gt; void&quot;?", "body": "<p>Judging by your previous post, you're using React in which case yes. React has a type called <code>MouseEventHandler</code> which usage looks like this.</p>\n\n<pre><code>const handleOnClick: MouseEventHandler&lt;HTMLDivElement&gt; = (e) =&gt; // do something with e.\n</code></pre>\n"}], "owner": {"reputation": 1886, "user_id": 7040366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbDPC.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7040366/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 55931708, "answer_count": 1, "score": 1, "last_activity_date": 1556685850, "creation_date": 1556680482, "question_id": 55931194, "link": "https://stackoverflow.com/questions/55931194/typescript-is-there-a-type-for-event-mouseeventhtmlbuttonelement-void", "title": "Typescript - is there a type for &quot;(event: MouseEvent&lt;HTMLButtonElement&gt;) =&gt; void&quot;?", "body": "<p>I find I'm repeating the same type <code>(event: MouseEvent&lt;HTMLButtonElement&gt;) =&gt; void</code> over and over again in just about every component that has a click event (all buttons in my case). It seems like there should be a simpler <code>ButtonClick</code> type or similar for something as common as this.</p>\n\n<p>Does anything like this exist or should I just export my own global interface/type for this so I don't keep repeating myself? Something like:</p>\n\n<pre><code>export interface I_ButtonClick {\n  (event: MouseEvent&lt;HTMLButtonElement&gt;): void;\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>export type T_ButtonClick = (event: MouseEvent&lt;HTMLButtonElement&gt;) =&gt; void;\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 4173, "user_id": 7428434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1348497625208827/picture?type=large", "display_name": "Shanon Jackson", "link": "https://stackoverflow.com/users/7428434/shanon-jackson"}, "edited": false, "score": 1, "creation_date": 1556685679, "post_id": 55930680, "comment_id": 98516361, "body": "Yes all props inside React should always be considered read-only. The good news is that all algorithms that can be implemented mutably can be implemented immutably."}], "answers": [{"comments": [{"owner": {"reputation": 1886, "user_id": 7040366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbDPC.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7040366/jake"}, "edited": false, "score": 0, "creation_date": 1556679632, "post_id": 55930872, "comment_id": 98515315, "body": "Yes I mentioned that in my post: &quot;It seems like they should be since props should never be changed within the component&quot;. My question is, should every prop have the readonly modifier on it? I&#39;m 99% sure they should but just confirming as this question hasn&#39;t been asked before and there are no answers on Google."}], "tags": [], "owner": {"reputation": 31, "user_id": 7997308, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vOIrOHatgZw/AAAAAAAAAAI/AAAAAAAABBY/ih2IEujc0XE/photo.jpg?sz=128", "display_name": "Guillaume LEROY", "link": "https://stackoverflow.com/users/7997308/guillaume-leroy"}, "is_accepted": false, "score": 3, "last_activity_date": 1556676957, "creation_date": 1556676957, "answer_id": 55930872, "question_id": 55930680, "link": "https://stackoverflow.com/questions/55930680/should-all-react-component-props-always-be-readonly-in-typescript/55930872#55930872", "title": "Should all React component props always be readonly in Typescript?", "body": "<p>It's not a Typescript specificity but a React one.</p>\n\n<p>React is design to render component according a set of props. If you want to change the way a component is render the parent need to generate new props and give it to the children. </p>\n\n<p>The React data flow is a one-way flow from parents to children. You can't and you don't want to mutate a props coming from a parents. Because if props can be mutated it should produce UI issues with React component life cycle. A component re-render only if the reference of one of his props change. Mutate a props will not re-render component and your UI will be different from your data.</p>\n"}], "owner": {"reputation": 1886, "user_id": 7040366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbDPC.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7040366/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556676957, "creation_date": 1556674829, "question_id": 55930680, "link": "https://stackoverflow.com/questions/55930680/should-all-react-component-props-always-be-readonly-in-typescript", "title": "Should all React component props always be readonly in Typescript?", "body": "<p>It seems like they should be since props should never be changed within the component. I can't find any answers on Google or Stack Overflow so asking here just to be sure.</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "is_accepted": true, "score": 4, "last_activity_date": 1556672506, "creation_date": 1556672506, "answer_id": 55930473, "question_id": 55930198, "link": "https://stackoverflow.com/questions/55930198/type-is-not-assignable-to-type-t/55930473#55930473", "title": "Type is not assignable to type T", "body": "<pre><code>export function getBlank&lt;T extends { results: any[] }&gt;(): Observable&lt;T&gt; {\n  const response: T = { results: [] };\n  return of(response);\n}\n</code></pre>\n\n<p>The code in this function must pass type-checking for any user-provided type <code>T</code> which extends <code>{ results: any[] }</code>, for example this one:</p>\n\n<pre><code>const o = getBlank&lt;{result: any[]; moreResults: any[]}&gt;();\n</code></pre>\n\n<p>But with this <code>T</code>, this assignment is not valid because <code>moreResults</code> is missing:</p>\n\n<pre><code>const response: T = { results: [] };\n</code></pre>\n\n<p>In general, you can't use generic parameter <code>T</code> for any variables created in the body of the generic function, unless you use constructor or some other function, usually provided as a parameter, which is declared to return appropriately initialized value for any possible <code>T</code>.</p>\n"}], "owner": {"reputation": 706, "user_id": 1861140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2005411c58fe721e37068c7cae3653c0?s=128&d=identicon&r=PG", "display_name": "Suresh Nagar", "link": "https://stackoverflow.com/users/1861140/suresh-nagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 55930473, "answer_count": 1, "score": 1, "last_activity_date": 1556672506, "creation_date": 1556669868, "question_id": 55930198, "link": "https://stackoverflow.com/questions/55930198/type-is-not-assignable-to-type-t", "title": "Type is not assignable to type T", "body": "<pre><code>export function getBlank&lt;T extends { results: any[] }&gt;(): Observable&lt;T&gt; {\n  const response: T = { results: [] };\n  return of(response);\n}\n</code></pre>\n\n<p>is failing to compile with error </p>\n\n<pre><code>Type '{ results: undefined[]; }' is not assignable to type 'T'.ts(2322)\n</code></pre>\n\n<p>Please help, whats wrong here?</p>\n"}, {"tags": ["angular", "typescript", "angular6", "observable", "reactive-extensions-js"], "answers": [{"comments": [{"owner": {"reputation": 1633, "user_id": 4660416, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/q0lFk.png?s=128&g=1", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/4660416/behrooz"}, "edited": false, "score": 0, "creation_date": 1556729684, "post_id": 55932311, "comment_id": 98532569, "body": "Thanks, but this doesn&#39;t work either, it is giving me the error: &quot;cannot find map. Did you mean Map? &quot;"}, {"owner": {"reputation": 1633, "user_id": 4660416, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/q0lFk.png?s=128&g=1", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/4660416/behrooz"}, "edited": false, "score": 0, "creation_date": 1556729760, "post_id": 55932311, "comment_id": 98532620, "body": "Plus, in my current version of code, the other lines inside that block are executing so it is not like they are done run. It is only that <code>next</code> method that is apparently not functioning properly."}, {"owner": {"reputation": 226, "user_id": 7318339, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FjvAC4ExbNo/AAAAAAAAAAI/AAAAAAAADVo/t1PyiBBLz1g/photo.jpg?sz=128", "display_name": "Christopher Kiessling", "link": "https://stackoverflow.com/users/7318339/christopher-kiessling"}, "reply_to_user": {"reputation": 1633, "user_id": 4660416, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/q0lFk.png?s=128&g=1", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/4660416/behrooz"}, "edited": false, "score": 0, "creation_date": 1556751742, "post_id": 55932311, "comment_id": 98540534, "body": "Ups I&#39;ll update my answer, import rxjs map operator like that: import { map } from &#39;rxjs/operators&#39;;"}, {"owner": {"reputation": 1633, "user_id": 4660416, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/q0lFk.png?s=128&g=1", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/4660416/behrooz"}, "edited": false, "score": 0, "creation_date": 1556833618, "post_id": 55932311, "comment_id": 98572856, "body": "Nope. It is not that unfortunately. What you say is right, however, it is not related to solving my problem."}], "tags": [], "owner": {"reputation": 226, "user_id": 7318339, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FjvAC4ExbNo/AAAAAAAAAAI/AAAAAAAADVo/t1PyiBBLz1g/photo.jpg?sz=128", "display_name": "Christopher Kiessling", "link": "https://stackoverflow.com/users/7318339/christopher-kiessling"}, "is_accepted": false, "score": 1, "last_activity_date": 1556751865, "last_edit_date": 1556751865, "creation_date": 1556691123, "answer_id": 55932311, "question_id": 55930181, "link": "https://stackoverflow.com/questions/55930181/angular-behaviorsubject-the-next-method-doesnt-work/55932311#55932311", "title": "Angular BehaviorSubject; the &quot;next&quot; method doesn&#39;t work", "body": "<p>Your code doesn't work beause of rxjs 6 breaking change, version 5.5 introduced pipeable operators</p>\n\n<p>Before:</p>\n\n<pre><code>source.map(x =&gt; x * 2).catch(() =&gt; of('ups'))\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>source.pipe(map(x =&gt; x * 2), catchError(() =&gt; of('ups')))\n</code></pre>\n\n<p>also they moved catch() to catchError(), do() to tap(), switch() to switchAll() and finally() to finalize()</p>\n\n<p>[Edit]\ndon't forget to import your rxjs operators like that:\nimport { map } from 'rxjs/operators';</p>\n"}], "owner": {"reputation": 1633, "user_id": 4660416, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/q0lFk.png?s=128&g=1", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/4660416/behrooz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556751865, "creation_date": 1556669754, "question_id": 55930181, "link": "https://stackoverflow.com/questions/55930181/angular-behaviorsubject-the-next-method-doesnt-work", "title": "Angular BehaviorSubject; the &quot;next&quot; method doesn&#39;t work", "body": "<p>I have a code that I wrote back in Angular 4 and it worked perfectly, now part of it is broken in Angular 6 and I appreciate some help.</p>\n\n<p>I have an <code>AuthService</code> class:</p>\n\n<pre><code>export class AuthService {\n\n    private loggedIn = new BehaviorSubject&lt;boolean&gt;(false);\n\n    isUserLoggedIn(): Observable&lt;boolean&gt; {\n        return this.loggedIn.asObservable();\n    }\n\n    isUserLoggedIn(): Observable&lt;boolean&gt; {\n        return this.loggedIn.asObservable();\n    }\n\n    login(username: string, password: string) {\n        let body =\n        {\n            username: username,\n            password: password\n        };\n\n        return this._http.post(Settings.apiEndpoint + \"users/authenticate\", body)\n            .map(res =&gt; {\n                localStorage.setItem('token', res[\"token\"]);\n                localStorage.setItem('username', res[\"username\"]);\n                this.isLoggedIn = true;\n                this.loggedIn.next(true);\n                return res;\n            })\n            .catch(error =&gt; {\n                this.clearAuthData();\n                return Observable.throw(error)\n            });\n    }\n\n    logout() {\n        localStorage.clear();\n        this.isLoggedIn = false;\n        this.loggedIn.next(this.isLoggedIn);\n    }\n}\n</code></pre>\n\n<p>and in my <code>AppComponent</code>, I subscribe to this subject like this in the ngOnInit:</p>\n\n<pre><code>this._auth.isUserLoggedIn()\n            .subscribe(\n                d =&gt; {\n                    console.log(\"d here\", d);\n                    if (d)\n                    {\n                        this.isLoggedIn = true;\n                        this.username = this._auth.getUsername();\n                    }\n                    else {\n                        this.isLoggedIn = false;\n                    }\n                },\n                d =&gt; {\n                    console.log(\"error.\");\n                },\n                () =&gt; {\n                  console.log(\"bull.\");\n                }\n            );\n</code></pre>\n\n<p>The issue is when I logout, the AppComponent does react to the observable, but when I login it doesn't. The code is untouched as far as I can tell from what it was in Angular 4, so I cannot figure out why it is not firing.</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 1150, "user_id": 5444853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8685acb178b327a3a55b0a238995d817?s=128&d=identicon&r=PG", "display_name": "Rannie Aguilar Peralta", "link": "https://stackoverflow.com/users/5444853/rannie-aguilar-peralta"}, "edited": false, "score": 0, "creation_date": 1556686683, "post_id": 55929984, "comment_id": 98516577, "body": "Did you import the <code>ServiceLocator</code> in <code>AuthController.ts</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2940, "user_id": 2876310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8444f15b861a110d9bd1b99cc3c4b499?s=128&d=identicon&r=PG&f=1", "display_name": "neustart47", "link": "https://stackoverflow.com/users/2876310/neustart47"}, "edited": false, "score": 0, "creation_date": 1556741002, "post_id": 55931334, "comment_id": 98537304, "body": "Thanks, this solution works fine but then I need to create repository reference in each method. This will provide a lot of code duplication as far as I have a few such references. Do you have any ideas on how to avoid this?"}, {"owner": {"reputation": 2940, "user_id": 2876310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8444f15b861a110d9bd1b99cc3c4b499?s=128&d=identicon&r=PG&f=1", "display_name": "neustart47", "link": "https://stackoverflow.com/users/2876310/neustart47"}, "edited": false, "score": 0, "creation_date": 1556741338, "post_id": 55931334, "comment_id": 98537418, "body": "This is how I trying to do that without method integration. But obviously, it looks not pretty good for me. What do you think? <a href=\"https://codeshare.io/5zk7r4\" rel=\"nofollow noreferrer\">codeshare.io/5zk7r4</a>"}, {"owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "reply_to_user": {"reputation": 2940, "user_id": 2876310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8444f15b861a110d9bd1b99cc3c4b499?s=128&d=identicon&r=PG&f=1", "display_name": "neustart47", "link": "https://stackoverflow.com/users/2876310/neustart47"}, "edited": false, "score": 0, "creation_date": 1556762306, "post_id": 55931334, "comment_id": 98542297, "body": "Using a side effect to set the binding asynchronously is a recipe for random null pointer exceptions (when <code>findByUsername</code> gets executed before <code>.then({ xValue }) =&gt; xBinding = xValue)</code>).  You can make it a little better by keeping the promise around and using it as a latch (but that&#39;s almost as fragile without a lint rule)."}], "tags": [], "owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "is_accepted": true, "score": 1, "last_activity_date": 1556682003, "creation_date": 1556682003, "answer_id": 55931334, "question_id": 55929984, "link": "https://stackoverflow.com/questions/55929984/typescript-undefined-static-variable-issue/55931334#55931334", "title": "Typescript: undefined static variable issue", "body": "<p>You have a circular reference here.  In order to construct the <code>AuthService</code> <em>module</em> you need a fully constructed <code>ServiceLocator</code> class.  However, JavaScript needs a fully constructed <code>AuthService</code> module in order to construct the <code>ServiceLocator</code> class.  Switching the order of instantiation would simply result in an error from <code>ServiceModule &lt;cint&gt;</code> (to coin a Java-ism) along the lines of \"Uncaught TypeError: undefined is not a constructor\".</p>\n\n<p>The solution is to simply make the dependency lazy:</p>\n\n<pre><code>//AuthService.ts\nconst dataRepositoryReference: IDataRepository = import('./ServiceLocator')\n  .then(({ ServiceLocator }) =&gt; ServiceLocator.dataRepository);\nexport class AuthService implements IAuthService {\n  public async findUserByUsername(username: UserName) {\n    const dataRepository = await dataRepositoryReference;\n    // ... snip ...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2940, "user_id": 2876310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8444f15b861a110d9bd1b99cc3c4b499?s=128&d=identicon&r=PG&f=1", "display_name": "neustart47", "link": "https://stackoverflow.com/users/2876310/neustart47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 55931334, "answer_count": 1, "score": 3, "last_activity_date": 1611779138, "creation_date": 1556667739, "last_edit_date": 1611779138, "question_id": 55929984, "link": "https://stackoverflow.com/questions/55929984/typescript-undefined-static-variable-issue", "title": "Typescript: undefined static variable issue", "body": "<p>I can't understand why the next issue happens. Code with the same structure works fine in any other object-oriented languages like C# or Java.\nI am writing Node.Js app using Typescript.</p>\n<p>So I have a class <code>ServiceLocator</code> with two static variables:</p>\n<pre><code>//ServiceLocator.ts\nexport class ServiceLocator {\n    public static dataRepository: IDataRepository = new DataRepository();\n    public static authService: IAuthService = new AuthService();\n}\n</code></pre>\n<p>Class from the second one variable using the first one static variable. This how it looks:</p>\n<pre><code>//AuthService.ts\nconst dataRepository: IDataRepository = ServiceLocator.dataRepository;\nexport class AuthService implements IAuthService {\n...\n}\n</code></pre>\n<p>But once I am trying to get <code>authService</code> link like this:</p>\n<pre><code>//AuthController.ts\nconst authService: IAuthService = ServiceLocator.authService;\nexport class AuthController {\n\n    public async signIn(request: Request, response: Response) {\n        ..\n    }\n..\n}\n</code></pre>\n<p>I got an error:</p>\n<pre><code> TypeError: Cannot read property 'dataRepository' of undefined\n</code></pre>\n<p>What am I do wrong?</p>\n"}, {"tags": ["javascript", "typescript", "hashmap", "iteration"], "comments": [{"owner": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "edited": false, "score": 2, "creation_date": 1556666878, "post_id": 55929866, "comment_id": 98513169, "body": "I can&#39;t seem to reproduce this, I feel like there&#39;s something else in your code that&#39;s interfering with this"}, {"owner": {"reputation": 2023, "user_id": 7448536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/--Yrr18KVHdU/AAAAAAAAAAI/AAAAAAAABMw/wlxMIzKkAck/photo.jpg?sz=128", "display_name": "Wendelin", "link": "https://stackoverflow.com/users/7448536/wendelin"}, "reply_to_user": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "edited": false, "score": 1, "creation_date": 1556667246, "post_id": 55929866, "comment_id": 98513234, "body": "I have to agree with @Aplet123"}, {"owner": {"reputation": 83, "user_id": 8651170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01dcec35582612e89bb7791704997850?s=128&d=identicon&r=PG&f=1", "display_name": "GeoffWillis", "link": "https://stackoverflow.com/users/8651170/geoffwillis"}, "edited": false, "score": 0, "creation_date": 1556668819, "post_id": 55929866, "comment_id": 98513517, "body": "Ok, that&#39;s good to know. I&#39;ll look into my hashMap some more. I populate the hashmap with csv data from FileReader.readAsText() so maybe somewhere upstream (Perhaps a hidden \\n). Thank you both for looking."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 8651170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01dcec35582612e89bb7791704997850?s=128&d=identicon&r=PG&f=1", "display_name": "GeoffWillis", "link": "https://stackoverflow.com/users/8651170/geoffwillis"}, "is_accepted": false, "score": 1, "last_activity_date": 1568184909, "last_edit_date": 1568184909, "creation_date": 1556670329, "answer_id": 55930259, "question_id": 55929866, "link": "https://stackoverflow.com/questions/55929866/iterating-the-keys-from-a-javascript-hashmap-gives-empty-string-for-last-element/55930259#55930259", "title": "Iterating the keys from a javascript hashmap gives empty string for last element", "body": "<p>Looks like it IS an <code>cr/lf</code> issue. Did a <code>hexdump</code> of the source file and there is an extra <code>0a0d</code> at the end. Found a previous stack post that explained it. Thanks for pointing in the right direction.\n<a href=\"https://stackoverflow.com/questions/6998506/text-file-with-0d-0d-0a-line-breaks\">Link</a></p>\n"}], "owner": {"reputation": 83, "user_id": 8651170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01dcec35582612e89bb7791704997850?s=128&d=identicon&r=PG&f=1", "display_name": "GeoffWillis", "link": "https://stackoverflow.com/users/8651170/geoffwillis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568184909, "creation_date": 1556666736, "question_id": 55929866, "link": "https://stackoverflow.com/questions/55929866/iterating-the-keys-from-a-javascript-hashmap-gives-empty-string-for-last-element", "title": "Iterating the keys from a javascript hashmap gives empty string for last element", "body": "<p>I need the keys from a javascript/typescript hash map in an array. I use the Map.Keys() method, and iterate the keys to populate the an array called:searchTerms. For some reason, the last value in the array is always an empty string. </p>\n\n<p>When I view the hashMap in the debugger, I see exactly what I expect; keys of type string, and values of an array of strings, with no empty keys. </p>\n\n<pre><code>public setSearchTerms(searchMap: Map&lt;string, Array&lt;string&gt;&gt;) {\n        if(searchMap &amp;&amp; searchMap.size) {\n            let myKeys = myMap.keys();\n            this.searchTerms = [...myKeys];\n\n           /*\n            for(let k of myKeys) {\n                if(k.length &gt; 0) {\n                    this.searchTerms.push(k);\n                }\n            }\n            */\n        }\n    }\n</code></pre>\n\n<p>When I run the code as is, the searchTerms Array has all the keys from the map, plus an empty string. Using the for-of loop (Currently comment out) also puts in the empty string, but I put in the length check which resolve the issue. I just want to understand where the empty string comes from. I can make it work, but it's bugging me that I can't figure out where the empty string comes from.</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 0, "last_activity_date": 1556662363, "creation_date": 1556662363, "answer_id": 55929304, "question_id": 55929284, "link": "https://stackoverflow.com/questions/55929284/cast-a-variable-from-one-type-to-another-extended-type/55929304#55929304", "title": "Cast a variable from one Type to another extended Type", "body": "<p>The safest way is to use spread:</p>\n\n<pre><code>interface Type1 {\nid: number;\n}\n\ninterface Type2 extends Type1 {\nname: string;\n}\n\nconst type1: Type1 = {id: 123};\nconst type2: Type2 = { ...type1, name: \"bob\"};\n</code></pre>\n\n<p>You can also use <code>Object.assign</code>, but you loose excess property checks. On the other hand you can use the same object instance if you want:</p>\n\n<pre><code>const type2: Type2 = Object.assign(type1, { name: \"bob\"}); // we assign to the object in  type1, so we are adding to that object.\n\nconst type2: Type2 = Object.assign({}, type1,{ name: \"bob\"}); // or we assign to a new object.\n</code></pre>\n\n<p>You can also use a type assertion, but the object will be in an invalid type  state until you assign <code>name</code>:</p>\n\n<pre><code>const type2: Type2 = type1 as Type2; // type2 is in an invalid state as name is not assigned\ntype2.name = \"bob\"\n</code></pre>\n"}], "owner": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556662363, "creation_date": 1556662233, "question_id": 55929284, "link": "https://stackoverflow.com/questions/55929284/cast-a-variable-from-one-type-to-another-extended-type", "title": "Cast a variable from one Type to another extended Type", "body": "<p>Let's say I have</p>\n\n<pre><code>interface Type1 {\n   id: number;\n}\n\ninterface Type2 extends Type1 {\n   name: string;\n}\n\nconst type1: Type1 = {id: 123};\n</code></pre>\n\n<p>Now I want to create <code>type2</code> from <code>type1</code> and add the <code>name</code> to it. What's the best way to do this?</p>\n"}, {"tags": ["javascript", "typescript", "marker"], "comments": [{"owner": {"reputation": 11681, "user_id": 3617380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b845bcd82ba802f57e2c8256fcba97?s=128&d=identicon&r=PG&f=1", "display_name": "hackape", "link": "https://stackoverflow.com/users/3617380/hackape"}, "edited": false, "score": 1, "creation_date": 1556685402, "post_id": 55929249, "comment_id": 98516294, "body": "If you want a quick work around you can just do <code>if ((a.marker as any)._tooltip....)</code>"}, {"owner": {"reputation": 11681, "user_id": 3617380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b845bcd82ba802f57e2c8256fcba97?s=128&d=identicon&r=PG&f=1", "display_name": "hackape", "link": "https://stackoverflow.com/users/3617380/hackape"}, "edited": false, "score": 0, "creation_date": 1556685467, "post_id": 55929249, "comment_id": 98516316, "body": "If you want proper fix then tell us more about <code>marker</code>&#39;s type. Your description is inadequate."}, {"owner": {"reputation": 145, "user_id": 7228093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/937b1e24c6d74a60fb482e57dcc7ec38?s=128&d=identicon&r=PG&f=1", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/7228093/efra%c3%adn"}, "reply_to_user": {"reputation": 11681, "user_id": 3617380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b845bcd82ba802f57e2c8256fcba97?s=128&d=identicon&r=PG&f=1", "display_name": "hackape", "link": "https://stackoverflow.com/users/3617380/hackape"}, "edited": false, "score": 1, "creation_date": 1556809071, "post_id": 55929249, "comment_id": 98562145, "body": "Sorry for the late reply, has been rough days, the quick answer was enough, problem is that i don&#39;t know any of TS, so i couldn&#39;t give something very detailed, but still thanks since you solved the problem!"}], "owner": {"reputation": 145, "user_id": 7228093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/937b1e24c6d74a60fb482e57dcc7ec38?s=128&d=identicon&r=PG&f=1", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/7228093/efra%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556662028, "creation_date": 1556662028, "question_id": 55929249, "link": "https://stackoverflow.com/questions/55929249/how-to-get-content-from-a-tooltip-of-a-marker", "title": "How to get content from a tooltip of a marker?", "body": "<p>I was added to a project that uses TS to generate de JS of a webpage. The page use markers to signal positions of some cars, and those markers have a popup that shows the name of the person driving. I was asked to add a searcher to filter between those names and leave visible only the markers that match. I've solved it in JS, but since i need to pass this to the TS. Everything was fine until i got to this line:</p>\n\n<pre><code>if (a.marker._tooltip._content.toLowerCase().indexOf(sea.toLowerCase()) !== -1)\n</code></pre>\n\n<p>What basically does is take the name in the popup and compare it with what i was searching, and this works on JS, but in TS it gives me an error since _tooltip does not exist on Marker. How could i translate that line to make it work on TS?</p>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "ionic3"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 6, "last_activity_date": 1556661843, "creation_date": 1556661843, "answer_id": 55929215, "question_id": 55929130, "link": "https://stackoverflow.com/questions/55929130/calling-constructor-of-generic-type-in-typescript/55929215#55929215", "title": "Calling constructor of generic type in TypeScript", "body": "<p><code>T</code> is just a type, types are erased at runtime, so types can never appear in expressions. </p>\n\n<p>What you need to do is pass in the constructor of <code>T</code> instead. </p>\n\n<pre><code>  public getProducts&lt;T&gt;(ctor: new (p: Partial&lt;T&gt;) =&gt; T): Observable&lt;T[]&gt; {\n    return this.httpClient\n      .get&lt;T[]&gt;(this.baseUrl + '/users')\n      .pipe(\n        map((entities) =&gt; {\n          return entities.map((entity) =&gt; {\n            return new ctor(entity);\n          })\n        }),\n        catchError((err) =&gt; Observable.throw(err))\n      );\n  }\n</code></pre>\n\n<p>This implies you have a class defined for <code>T</code>. If there is no class then don't bother with <code>new T</code>. If <code>T</code> is an interface then the objects returned by the server will presumably satisfy the interface and nothing more needs to be done/</p>\n"}], "owner": {"reputation": 1194, "user_id": 5221139, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b72e2204f13d40fc251e31765d568699?s=128&d=identicon&r=PG&f=1", "display_name": "Drago", "link": "https://stackoverflow.com/users/5221139/drago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 55929215, "answer_count": 1, "score": 3, "last_activity_date": 1556661843, "creation_date": 1556661266, "last_edit_date": 1556661701, "question_id": 55929130, "link": "https://stackoverflow.com/questions/55929130/calling-constructor-of-generic-type-in-typescript", "title": "Calling constructor of generic type in TypeScript", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>  public getProducts&lt;T&gt;(): Observable&lt;T[]&gt; {\n    return this.httpClient\n      .get&lt;T[]&gt;(this.baseUrl + '/users')\n      .pipe(\n        map((entities) =&gt; {\n          return entities.map((entity) =&gt; {\n            return new T(entity);\n          })\n        }),\n        catchError((err) =&gt; Observable.throw(err))\n      );\n  }\n</code></pre>\n\n<p>This line gives me an error: <code>return new T(entity)</code>;</p>\n\n<p>How can I call the constructor of a generic type in TypeScript?</p>\n"}, {"tags": ["typescript", "strongloop", "loopback"], "answers": [{"tags": [], "owner": {"reputation": 1496, "user_id": 1380783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23c8f6e25edcc39fd224c0223bd8aba?s=128&d=identicon&r=PG", "display_name": "Raymond Feng", "link": "https://stackoverflow.com/users/1380783/raymond-feng"}, "is_accepted": false, "score": 2, "last_activity_date": 1557738924, "last_edit_date": 1557738924, "creation_date": 1557501213, "answer_id": 56080416, "question_id": 55929084, "link": "https://stackoverflow.com/questions/55929084/proper-implementation-of-providers-in-loopback-4/56080416#56080416", "title": "Proper implementation of providers in Loopback 4", "body": "<ol>\n<li><p>In LoopBack 4, Provider solves the following problem for dependency injection:</p>\n\n<ul>\n<li>The bound value is dynamically created/calculated (not a constant, cannot use <code>binding.to()</code>)</li>\n<li>The bound value has dependencies on other bindings (cannot use <code>binding.toDynamicValue()</code>)</li>\n<li>The bound value is not an instance from a class (cannot use <code>binding.toClass()</code>)</li>\n</ul></li>\n</ol>\n\n<p>For example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class GreetingProvider implements Provider&lt;string&gt; {\r\n\r\n  // Inject the current language\r\n  private constructor(@inject('language') private lang: string) {\r\n  }\r\n  \r\n  // Produce resolved value for the binding\r\n  value() {\r\n    if (this.lang === 'zh') return '\u4f60\u597d';\r\n    else return 'Hello';\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ol start=\"2\">\n<li><p>It can be used in LB4 applications to back any kind of bindings, not limited to actions.</p></li>\n<li><p>You can find examples in loopback-next repo</p></li>\n<li><p>Provider has to be a class so that decorators can be applied for dependency injection. Constructor parameters and properties can be decorated.</p></li>\n</ol>\n"}], "owner": {"reputation": 37, "user_id": 11013212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eca2d31338cc51bcd8ac9c3642f8642?s=128&d=identicon&r=PG&f=1", "display_name": "Navos", "link": "https://stackoverflow.com/users/11013212/navos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557738924, "creation_date": 1556660922, "question_id": 55929084, "link": "https://stackoverflow.com/questions/55929084/proper-implementation-of-providers-in-loopback-4", "title": "Proper implementation of providers in Loopback 4", "body": "<p>I've been trying to wrap my head around providers and decorators in loopback 4 and I have a tough time getting to understand it. </p>\n\n<ol>\n<li>What is the main purpose of the provider? </li>\n<li>Is it only for the sequence or can it be used elsewhere?</li>\n<li>Is there template to follow?</li>\n<li>Whats the best way to use it with a decorator?</li>\n</ol>\n\n<p>My current implementations look like the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface MyProviderFn {\n  (args: any[]): Promise&lt;void&gt;;\n}\n\nexport class MyActionProvider implements Provider&lt;MyProviderFn&gt; {\n  public constructor(\n    @inject(CoreBindings.APPLICATION_INSTANCE)\n    public app: RestApplication,\n    @inject.getter(CoreBindings.CONTROLLER_CLASS, { optional: true })\n    private readonly getController: Getter&lt;Constructor&lt;{}&gt;&gt;,\n    @inject.getter(CoreBindings.CONTROLLER_METHOD_NAME, { optional: true })\n    private readonly getMethod: Getter&lt;string&gt;,\n  ) {}\n\n  public value(): MyProviderFn {\n    return args =&gt; this.action(args);\n  }\n\n  public async action(args: any[]): Promise&lt;void&gt; {\n    const controllerClass = await this.getController();\n    const methodName = await this.getMethod();\n    if (!controllerClass || !methodName) return;\n\n    const metadata = getDecoratorMetadata(controllerClass, methodName);\n    if (!metadata) {\n      return;\n    }\n\n    // Provider specific code here\n  }\n}\n</code></pre>\n\n<p>Is this an accurate way of doing it? Can it be cleaner?</p>\n"}, {"tags": ["node.js", "angular", "typescript", "multer"], "comments": [{"owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1556668382, "post_id": 55929074, "comment_id": 98513430, "body": "How does the image picker work? If it uses <code>&lt;input type=&quot;file&quot;</code>, it is better to send the selected file directly. Sending a base64 data URL adds a needless 33% extra overhead."}, {"owner": {"reputation": 95, "user_id": 1785888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8094aebb12da3c93d7970cac9e13907?s=128&d=identicon&r=PG", "display_name": "Eddy", "link": "https://stackoverflow.com/users/1785888/eddy"}, "reply_to_user": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1556681718, "post_id": 55929074, "comment_id": 98515668, "body": "I have also tried to sent the file directly. For the life of me, I cannot figure out why the image data is coming on the server side into the request.body vs request.file.  I have even referenced multiple tutorials with no luck.  I can always get this to work with postman, but never with Angular 2+ . Please let me know if any other information could help."}, {"owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1556685347, "post_id": 55929074, "comment_id": 98516281, "body": "List the ways you transmit the data on the client side and number them. Then list the ways you receive them on the server side and number them. Get a pair of dice, roll them. Use the number on one die to change the server side. Use the number on the other die to change the client side. Keep rolling and changing. With luck some combination will work."}], "answers": [{"comments": [{"owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1556685589, "post_id": 55931653, "comment_id": 98516344, "body": "The FormData API uses base64 encoding to send files. Base64 encoding adds 33% extra overhead. It is better to send files directly."}, {"owner": {"reputation": 3209, "user_id": 7022485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d655744453cf7afdc6eef71c52470c?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Gupta", "link": "https://stackoverflow.com/users/7022485/rajesh-gupta"}, "reply_to_user": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1556685683, "post_id": 55931653, "comment_id": 98516362, "body": "thanks. did not know that. just wanted to provide fully working example to OP."}, {"owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1556685964, "post_id": 55931653, "comment_id": 98516421, "body": "It seems crazy to base64 encode it on the client then base64 decode it on the server side when files can be sent and received in binary directly. It might work but it needlessly complicates things. Also it doesn&#39;t work well with really large files."}, {"owner": {"reputation": 95, "user_id": 1785888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8094aebb12da3c93d7970cac9e13907?s=128&d=identicon&r=PG", "display_name": "Eddy", "link": "https://stackoverflow.com/users/1785888/eddy"}, "edited": false, "score": 1, "creation_date": 1556717228, "post_id": 55931653, "comment_id": 98526669, "body": "I updated the code to send the file in binary instead of the base64 encoded string.  Everything else worked with Multer once that change was done.  Thanks for taking the time to help plus providing a clear example."}, {"owner": {"reputation": 95, "user_id": 1785888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8094aebb12da3c93d7970cac9e13907?s=128&d=identicon&r=PG", "display_name": "Eddy", "link": "https://stackoverflow.com/users/1785888/eddy"}, "edited": false, "score": 0, "creation_date": 1556732738, "post_id": 55931653, "comment_id": 98533917, "body": "The reason why I was using base64encode in the first place was for mobile devices to upload a picture from the Camera.  I am using Ionic with Capacitor, which I cannot see how to upload a jpeg."}], "tags": [], "owner": {"reputation": 3209, "user_id": 7022485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d655744453cf7afdc6eef71c52470c?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Gupta", "link": "https://stackoverflow.com/users/7022485/rajesh-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1556685348, "last_edit_date": 1592644375, "creation_date": 1556685348, "answer_id": 55931653, "question_id": 55929074, "link": "https://stackoverflow.com/questions/55929074/uploading-file-in-angular-shows-in-req-body-instead-of-req-files-for-nodejs-se/55931653#55931653", "title": "Uploading File in Angular - Shows in req.body instead of req.files for nodejs Server", "body": "<p>May i suggest an alternative to Multer?</p>\n<p>See below the weekly npm downloads:</p>\n<blockquote>\n<p>multer: 466,964</p>\n<p>formidable: 2,116,997</p>\n</blockquote>\n<p>nodejs server:</p>\n<pre><code>app.post('/upload', (req, res) =&gt; {\n\n    var form = new formidable.IncomingForm()\n    form.parse(req)\n\n    form.on('fileBegin', function (name, file) {\n        var path = __dirname + '/uploads'\n        if (!fs.existsSync(path)) {\n            fs.mkdirSync(path)\n        }\n        file.path = __dirname + '/uploads/' + file.name;\n    });\n\n    form.on('file', function (name, file) {\n        console.log('Uploaded ' + file.name);\n        res.send({ message: 'uploaded' })\n    });\n})\n</code></pre>\n<p>angular template:</p>\n<pre><code>&lt;input type=&quot;file&quot; (change)=&quot;onFileInput($event)&quot; placeholder=&quot;Upload file&quot; accept=&quot;.JPG,.pdf,.doc,.docx&quot;&gt;\n</code></pre>\n<p>angular component:</p>\n<pre><code>onFileInput(event) {\n    let fileList: FileList = event.target.files;\n    let file = fileList[0]\n    console.log(file);\n    let formData: FormData = new FormData();\n    formData.append('uploadFile', file, file.name);\n    this.http.post('http://localhost:3001/upload', formData).subscribe(\n      res =&gt; console.log(res)\n    )\n\n  }\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1785888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8094aebb12da3c93d7970cac9e13907?s=128&d=identicon&r=PG", "display_name": "Eddy", "link": "https://stackoverflow.com/users/1785888/eddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 55931653, "answer_count": 1, "score": 1, "last_activity_date": 1556685348, "creation_date": 1556660875, "last_edit_date": 1556681959, "question_id": 55929074, "link": "https://stackoverflow.com/questions/55929074/uploading-file-in-angular-shows-in-req-body-instead-of-req-files-for-nodejs-se", "title": "Uploading File in Angular - Shows in req.body instead of req.files for nodejs Server", "body": "<p>In my nodejs api using multer as my middleware, I can see the postman post file requests in the request.file property, which of course then gets saved on my server. The request is send with the content type form-data. As soon as Save is hit on my controller, the file is already uploaded. All the details of the file(s) are in the request.files property</p>\n\n<p>In Angular, the attached file is added to the body of the request, and my nodejs application cannot save the file as the middleware cannot see it. The imagedata is coming as base64 encoded string </p>\n\n<p>I have tried setting the headers in angular to multipart/form-data, but I get a 500 error \"Multipart: Boundary not found\". </p>\n\n<p>In Postman, if I remove form-data and set to none, it also does not work</p>\n\n<h3>Angular Component</h3>\n\n<pre><code>  imageFile:any;\n\n  onImagePicked(imageData: string | File) {\n    if (typeof imageData === 'string') {\n      try {\n        /*this.imageFile = this.sharedService.base64toBlob(\n          imageData.replace('data:image/jpeg;base64,', ''),\n          'image/jpeg'\n        );*/\n        this.imageFile = imageData;\n      } catch (error) {\n        console.log('Err' + error);\n        return;\n      }\n    } else {\n      this.imageFile = imageData;\n    }\n  }\n\n  savePhoto() {\n    console.log ('Save');\n    this.sharedService.uploadPhoto(this.imageFile).subscribe(val =&gt; {\n      console.log(val);\n    });\n  }\n</code></pre>\n\n<h3>Angular Service</h3>\n\n<pre><code>  public uploadPhoto(image: File) {\n      //let headers = new HttpHeaders();\n      //headers = headers.append('Content-Type', 'multipart/form-data');\n      const imageData = new FormData();\n      imageData.append('image', image);\n      return this.httpClient.post(environment.apiURL + this.path, imageData);\n      //return this.httpClient.post(environment.apiURL + this.path, imageData, {headers: headers});\n  }\n</code></pre>\n\n<h3>Nodejs Setup</h3>\n\n<pre><code> public express: express.Application;\n\n  constructor() {\n    this.express = express();\n\n    this.setMiddlewares();\n    this.setRoutes();\n    this.catchErrors();\n    this.setSocketServer();\n  }\n\n  private setMiddlewares(): void {\n    this.express.options('*', cors());\n    this.express.use(cors());\n    this.express.use((reg, res, next) =&gt; {\n      res.setHeader('Access-Control-Allow-Origin', '*');\n      res.setHeader('Access-Control-Allow-Methods', 'OPTIONS, GET, POST, PUT, PATCH, DELETE');\n      res.setHeader('Access-Control-Allow-Headers', '*');\n      res.setHeader('Access-Control-Max-Age', 10000);\n      next();\n    });\n    this.express.use(morgan('dev'));\n    this.express.use(bodyParser.json());\n    this.express.use(bodyParser.urlencoded({ extended: false }));\n    this.express.use(helmet());\n\n    const storageConfig = multer.diskStorage({\n      destination: (req, file, callback) =&gt; callback(null, './files'),\n      filename: (req, file, callback) =&gt; callback(null, Date.now() + \"-\"  + file.originalname),\n    });\n    this.express.use(multer({storage: storageConfig}).any());\n\n  }\n\n  private setRoutes(): void {\n    this.express.use('/api', api);\n  }\n</code></pre>\n\n<h3>Router for photos</h3>\n\n<pre><code>import { Router } from \"express\";\nimport DfrPhotoController from \"./dfrphoto.controller\";\n\nconst dfrPhoto: Router = Router();\nconst controller = new DfrPhotoController();\n\n\ndfrPhoto.post('/', controller.save);\n\nexport default dfrPhoto;\n</code></pre>\n\n<h3>Controller to save</h3>\n\n<pre><code>export default class DfrPhotoController {\n\n    // TODO: link to the dfr\n    public save = async (req:Request, res:Response): Promise&lt;any&gt; =&gt; {\n\n        // Need to see files in request. File is already saved in \n        let files = req.files; \n        console.log (files);\n        if (files === null || files === undefined ) {\n            res.status(404).send({\n                success: false,\n                message:'No Files Found'\n              });\n        }\n\n        console.log(\"The file was saved!\");\n        res.status(200).send({\n            success: true,\n            message:'Photo saved',\n            data: files\n          });\n    }\n\n}\n</code></pre>\n\n<p>I would like the angular file upload to work the exact same way as the postman example.  I do not mind the file writing as soon as I call save in the controller as I can add validation to the middleware.  If anyone has any ideas on this, I would be grateful</p>\n\n<p>Sample Angular Send Request\n<a href=\"https://i.stack.imgur.com/XYOmB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XYOmB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks </p>\n\n<pre><code>//Added Component using the image picker (html and ts)\n//HTML\n  &lt;ion-grid&gt;\n    &lt;form [formGroup]=\"form\" &gt;  \n        &lt;ion-row size=\"12\"&gt;\n            &lt;ion-col  size-lg=\"6\" size-xl=\"6\" size=\"12\"   size-md=\"12\"&gt;\n                &lt;app-camera  (imagePick)=\"onImagePicked($event)\"&gt;&lt;/app-camera&gt;\n                &lt;!-- &lt;ion-thumbnail&gt;\n                  &lt;ion-img  width=\"200\" height=\"200\"  [src]=\"imageFile\" &gt;&lt;/ion-img&gt;\n\n                &lt;/ion-thumbnail&gt;--&gt;\n                &lt;img  [src]=\"imageFile\"  &gt;\n            &lt;/ion-col&gt;\n            &lt;ion-col  size-lg=\"6\" size-xl=\"6\" size=\"12\"   size-md=\"12\"&gt;\n                &lt;ion-label  position=\"floating\"&gt;Photo Comments&lt;/ion-label&gt;\n                &lt;!-- &lt;ion-textarea rows=\"3\" formControlName=\"rigComments\"&gt;&lt;/ion-textarea&gt;--&gt;\n                &lt;ion-textarea rows=\"3\" formControlName=\"photoComments\"&gt;&lt;/ion-textarea&gt;\n            &lt;/ion-col&gt;\n        &lt;/ion-row&gt;\n        &lt;ion-row&gt;\n            &lt;ion-button (click)=\"savePhoto()\"&gt;Save Photo&lt;/ion-button&gt;\n        &lt;/ion-row&gt;\n    &lt;/form&gt;  \n  &lt;/ion-grid&gt;\n\n//TS\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, FormGroup } from '@angular/forms';\nimport { SharedService } from 'src/app/shared/shared.service';\n\n@Component({\n  selector: 'app-dfr-photo',\n  templateUrl: './dfr-photo.component.html',\n  styleUrls: ['./dfr-photo.component.scss'],\n})\nexport class DfrPhotoComponent implements OnInit {\n\n  form: FormGroup;\n  sharedService: SharedService;\n\n  constructor(sharedService: SharedService) {\n      this.sharedService = sharedService;\n   }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      _id: new FormControl(null, {\n        updateOn: 'blur',\n      }),\n      dfrId: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      photoComments: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      image: new FormControl(null, {\n        updateOn: 'blur'\n      })\n    });\n  }\n\n  imageFile:any;\n\n  onImagePicked(imageData: string | File) {\n    if (typeof imageData === 'string') {\n      try {\n        /*this.imageFile = this.sharedService.base64toBlob(\n          imageData.replace('data:image/jpeg;base64,', ''),\n          'image/jpeg'\n        );*/\n        this.imageFile = imageData;\n      } catch (error) {\n        console.log('Err' + error);\n        return;\n      }\n    } else {\n      this.imageFile = imageData;\n    }\n    this.form.patchValue({ image: imageData });\n    this.form.get('image').updateValueAndValidity();\n  }\n\n  savePhoto() {\n    console.log ('Save');\n    console.log(this.form.value.image);\n    this.sharedService.uploadPhoto(this.form.value.image).subscribe(val =&gt; {\n      console.log(val);\n    });\n  }\n\n}\n\n\n// Image Picker Code - JS\nimport { Component, OnInit, ElementRef, EventEmitter, ViewChild, Output, Input } from '@angular/core';\nimport { Plugins, CameraResultType, CameraSource, Capacitor} from '@capacitor/core';\nimport { SafeResourceUrl, DomSanitizer } from '@angular/platform-browser';\nimport { Platform } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-camera',\n  templateUrl: './camera.component.html',\n  styleUrls: ['./camera.component.scss'],\n})\nexport class CameraComponent implements OnInit {\n\n  @ViewChild('filePicker') filePickerRef: ElementRef&lt;HTMLInputElement&gt;;\n  @Output() imagePick = new EventEmitter&lt;string | File&gt;();\n  @Input() showPreview = false;\n  selectedImage: string;\n  usePicker = false;\n\n\n  constructor( private sanitizer: DomSanitizer, private platform: Platform) { }\n\n  image2: SafeResourceUrl;\n\n  ngOnInit() {\n    if ( this.platform.is('desktop')) {\n      this.usePicker = true;\n    }\n  }\n\n  onPickImage() {\n    if (!Capacitor.isPluginAvailable('Camera')) {\n      this.filePickerRef.nativeElement.click();\n      return;\n    }\n    Plugins.Camera.getPhoto({\n      quality: 50,\n      source: CameraSource.Prompt,\n      correctOrientation: true,\n      width: 300,\n      resultType: CameraResultType.Base64\n    })\n      .then(image =&gt; {\n        const image2: any = image; // to fix access to base64 data\n        this.selectedImage = image2.base64Data;\n        this.imagePick.emit(image2.base64Data);\n\n      })\n      .catch(error =&gt; {\n        console.log('ERROR ' + error);\n        if (this.usePicker) {\n          this.filePickerRef.nativeElement.click();\n        }\n        return false;\n      });\n  }\n\n  onFileChosen(event: Event) {\n    const pickedFile = (event.target as HTMLInputElement).files[0];\n    if (!pickedFile) {\n      return;\n    }\n    const fr = new FileReader();\n    fr.onload = () =&gt; {\n      const dataUrl = fr.result.toString();\n      this.selectedImage = dataUrl;\n      this.imagePick.emit(dataUrl);// (pickedFile);\n    };\n    fr.readAsDataURL(pickedFile);\n  }\n\n}\n\n\n\n// Image Picker Code - HTML\n  &lt;div class=\"picker\"&gt;\n\n    &lt;ion-button color=\"primary\" (click)=\"onPickImage()\" *ngIf=\"!usePicker\"&gt;\n      &lt;ion-icon name=\"camera\" slot=\"start\"&gt;&lt;/ion-icon&gt;\n      &lt;ion-label&gt;Take Picture&lt;/ion-label&gt;\n    &lt;/ion-button&gt;\n  &lt;/div&gt;\n  &lt;input\n    type=\"file\"\n    accept=\"image/jpeg\"\n    *ngIf=\"usePicker\"\n    #filePicker\n    (change)=\"onFileChosen($event)\"\n  /&gt;\n\n\n\n\n// Sidenote - Example of sending directly from the form control (renamed to image)\nonImagePicked(imageData: string | File) {\n    if (typeof imageData === 'string') {\n      try {\n        /*this.imageFile = this.sharedService.base64toBlob(\n          imageData.replace('data:image/jpeg;base64,', ''),\n          'image/jpeg'\n        );*/\n        this.imageFile = imageData;\n      } catch (error) {\n        console.log('Err' + error);\n        return;\n      }\n    } else {\n      this.imageFile = imageData;\n    }\n    this.form.patchValue({ image: imageData });\n    this.form.get('image').updateValueAndValidity();\n  }\n\n  savePhoto() {\n    this.sharedService.uploadPhoto(this.form.value.image).subscribe(val =&gt; {\n      console.log(val);\n    });\n  }\n</code></pre>\n"}, {"tags": ["typescript", "angular6", "typeof"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 756513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/429fe845fe9923cf40d37e322d7eb4e1?s=128&d=identicon&r=PG", "display_name": "Alaa&#39;", "link": "https://stackoverflow.com/users/756513/alaa"}, "edited": false, "score": 1, "creation_date": 1556691461, "post_id": 55929427, "comment_id": 98517555, "body": "thank you. I got the idea, and I gave all my properties a default value in the class and I used typeof of the defaultValue and it worked   if (t<b>ypeof</b> defaultValues[prop] === &quot;number&quot; &amp;&amp; obj[prop] === null)          obj[prop] = -99;"}], "tags": [], "owner": {"reputation": 11709, "user_id": 9325419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBsmO.jpg?s=128&g=1", "display_name": "jo_va", "link": "https://stackoverflow.com/users/9325419/jo-va"}, "is_accepted": true, "score": 2, "last_activity_date": 1556665320, "last_edit_date": 1556665320, "creation_date": 1556663101, "answer_id": 55929427, "question_id": 55929016, "link": "https://stackoverflow.com/questions/55929016/get-the-type-of-property-of-object-in-angular/55929427#55929427", "title": "Get the type of property of object in Angular", "body": "<p>TypeScript is compiled down to JavaScript and JavaScript is a dynamically typed language. This means that the type of a variable can change during the runtime as visible here:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let a = null;\r\nconsole.log(typeof a);\r\n\r\na = 5;\r\nconsole.log(typeof a);\r\n\r\na = 'hello';\r\nconsole.log(typeof a);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In your case, your condition will never evaluate to true, since if <code>obj[key]</code> is <code>null</code>, then its type can't be <code>number</code>:</p>\n\n<pre><code>if ((obj[key] == null) &amp;&amp; (typeof obj[key] === \"number\"))\n</code></pre>\n\n<p>Here is a way to do what you want using property initializers to provide default values to your class fields and a function that compare those fields to the default value assigned when constructing an object of your class:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function setDefaultValues(obj, defaultValues, valueToCheck) {\r\n  for (const prop in obj) {\r\n    if (defaultValues[prop] === valueToCheck &amp;&amp; obj[prop] === null) {\r\n      obj[prop] = valueToCheck;\r\n    }\r\n  }\r\n}\r\n\r\nclass A {\r\n  x = -1; // default value\r\n  y = -1; // default value\r\n  z = 'hello';\r\n}\r\n\r\nconst a = new A();\r\na.y = null; // a.y will be replaced by -1 later\r\nconsole.log(a);\r\n\r\nsetDefaultValues(a, new A(), -1); // check all -1 fields on `new A()`, if null on `a`, then set to -1\r\nconsole.log(a);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 439, "user_id": 756513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/429fe845fe9923cf40d37e322d7eb4e1?s=128&d=identicon&r=PG", "display_name": "Alaa&#39;", "link": "https://stackoverflow.com/users/756513/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4748, "favorite_count": 0, "accepted_answer_id": 55929427, "answer_count": 1, "score": 1, "last_activity_date": 1556665320, "creation_date": 1556660485, "question_id": 55929016, "link": "https://stackoverflow.com/questions/55929016/get-the-type-of-property-of-object-in-angular", "title": "Get the type of property of object in Angular", "body": "<p>I have class in Angular 6 </p>\n\n<pre><code>export class classXY{\n  xValue: number;\n  yValue: number;\n  xDate: Date;\n  yDate: Date;\n  xName?: string;\n  yName?: string;\n}\n</code></pre>\n\n<p>in my code, I need to check the properties that have type number.</p>\n\n<pre><code>let obj: ClassXY;\nobj.xValue=1;\nobj.yValue=null;\nobj.xDate= new Date();\nobj.yDate= null;\nobj.xName= \"test\";\nobj.yName= null;\n\n    for (var key in obj) {\n      if ((obj[key] == null) &amp;&amp; (typeof obj[key] === \"number\"))\n        obj[key] = -1;\n}\n</code></pre>\n\n<p><strong>typeof obj[\"yValue\"]</strong> value is null and <strong>typeof \"yValue\"</strong> is string, while I need to return the type of property number. Same for <strong>instanceof</strong></p>\n\n<p>How I check the primitive type of property of an object?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 444, "user_id": 9115319, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4e2d89c784b2c575c1ba83f8c2a1d5e7?s=128&d=identicon&r=PG&f=1", "display_name": "Dot Net Dev", "link": "https://stackoverflow.com/users/9115319/dot-net-dev"}, "edited": false, "score": 0, "creation_date": 1556658160, "post_id": 55928553, "comment_id": 98510824, "body": "you can call the service from your component and use *ngIf=&quot;!isTablet&quot; to remove the element from DOM."}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 9115319, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4e2d89c784b2c575c1ba83f8c2a1d5e7?s=128&d=identicon&r=PG&f=1", "display_name": "Dot Net Dev", "link": "https://stackoverflow.com/users/9115319/dot-net-dev"}, "reply_to_user": {"reputation": 103, "user_id": 6718297, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/919a90a0e8e2bc9e36a6b57e30feb4fd?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/6718297/james"}, "edited": false, "score": 0, "creation_date": 1556730127, "post_id": 55928710, "comment_id": 98532764, "body": "can you add your component code? and is there any other error you are getting"}], "tags": [], "owner": {"reputation": 444, "user_id": 9115319, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4e2d89c784b2c575c1ba83f8c2a1d5e7?s=128&d=identicon&r=PG&f=1", "display_name": "Dot Net Dev", "link": "https://stackoverflow.com/users/9115319/dot-net-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1556658770, "creation_date": 1556658770, "answer_id": 55928710, "question_id": 55928553, "link": "https://stackoverflow.com/questions/55928553/hide-button-for-tablet-using-angular-device-detector-service/55928710#55928710", "title": "Hide button for tablet using angular device detector service", "body": "<p>Inject the service into your component </p>\n\n<p>sample.component.ts</p>\n\n<pre><code>constructor(private exampleDeviceDetectorService: ExampleDeviceDetectorService) {}\n</code></pre>\n\n<p>Use *ngIf to remove the element from DOM</p>\n\n<p>sample.component.html</p>\n\n<pre><code>&lt;div id=\"hide-download\" *ngIf=\"!exampleDeviceDetectorService.isTablet\"&gt;\n    &lt;app-button name=\"download\" classAttr=\"btn-primary\" \n    (click)=\"downloadFile()\" [disabled]=\"!allOrders || allOrders.length === 0\"&gt;\n        &lt;i class=\"fas fa-download button-icon-padding\"&gt;&lt;/i&gt;\n            Download\n    &lt;/app-button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Use [hidden] to hide the element from DOM</p>\n\n<p>sample.component.html</p>\n\n<pre><code>&lt;div id=\"hide-download\" [hidden]=\"!exampleDeviceDetectorService.isTablet\"&gt;\n    &lt;app-button name=\"download\" classAttr=\"btn-primary\" \n    (click)=\"downloadFile()\" [disabled]=\"!allOrders || allOrders.length === 0\"&gt;\n        &lt;i class=\"fas fa-download button-icon-padding\"&gt;&lt;/i&gt;\n            Download\n    &lt;/app-button&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6718297, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/919a90a0e8e2bc9e36a6b57e30feb4fd?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/6718297/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 55928710, "answer_count": 1, "score": 0, "last_activity_date": 1556658770, "creation_date": 1556657751, "question_id": 55928553, "link": "https://stackoverflow.com/questions/55928553/hide-button-for-tablet-using-angular-device-detector-service", "title": "Hide button for tablet using angular device detector service", "body": "<p>I'm trying to hide a element on tablet only using angular ngx device detector service. </p>\n\n<p>I've done this using css media queries.However, I wanna see if I can get the same result using ngx device detector. </p>\n\n<p>Html</p>\n\n<pre><code>&lt;div id=\"hide-download\"&gt;\n          &lt;app-button name=\"download\" classAttr=\"btn-primary\" (click)=\"downloadFile()\" [disabled]=\"!allOrders || allOrders.length === 0\"&gt;\n              &lt;i class=\"fas fa-download button-icon-padding\"&gt;&lt;/i&gt;\n              Download\n          &lt;/app-button&gt;\n</code></pre>\n\n<p>Angular service ts </p>\n\n<pre><code>@Injectable()\nexport class ExampleDeviceDetectorService {\n\n  public deviceInfo: any;\n  public isMobile: any;\n  public isTablet: any;\n  public isDesktop: any;\n\n  constructor(\n    public deviceService: DeviceDetectorService\n  ) {\n    this.getDeviceInfo();\n  }\n\n  getDeviceInfo() {\n    this.deviceInfo = this.deviceService.getDeviceInfo();\n    this.isMobile = this.deviceService.isMobile();\n    this.isTablet = this.deviceService.isTablet();\n    this.isDesktop = this.deviceService.isDesktop();\n  }\n\n}\n</code></pre>\n\n<p>I expected for the button to not be shown on tablet devices.</p>\n"}, {"tags": ["angular", "typescript", "vega-lite"], "comments": [{"owner": {"reputation": 1990, "user_id": 3628806, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LIWvd.jpg?s=128&g=1", "display_name": "sinanspd", "link": "https://stackoverflow.com/users/3628806/sinanspd"}, "edited": false, "score": 0, "creation_date": 1556656362, "post_id": 55928053, "comment_id": 98510190, "body": "Well if they are not compatible, you have to either downgrade Vega or upgrade typescript. I would recommend upgrading TS to be up to date with the latest version. You will run into a lot of compatibility issues in the future if you insist on remaining on older versions"}], "answers": [{"tags": [], "owner": {"reputation": 37317, "user_id": 1205871, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/eDE58.gif?s=128&g=1", "display_name": "danday74", "link": "https://stackoverflow.com/users/1205871/danday74"}, "is_accepted": true, "score": 0, "last_activity_date": 1560673574, "last_edit_date": 1560673574, "creation_date": 1556664611, "answer_id": 55929604, "question_id": 55928053, "link": "https://stackoverflow.com/questions/55928053/how-to-fix-issue-of-incompatibility-between-angular-project-and-a-vega-charts-l/55929604#55929604", "title": "How to fix issue of incompatibility between angular project and a vega (charts library)?", "body": "<p>Angular 7 currently uses TypeScript 3.2.2 so your Angular TypeScript version is as expected.</p>\n\n<p>You could manually try changing the version of TypeScript in <code>package.json</code> then do an <code>npm install</code> and see what happens. If it errors out then it's going to be a problem for you.</p>\n\n<p>Another suggestion is you could switch to the release candidate for Angular 8.</p>\n\n<p>Run this ...</p>\n\n<pre><code>npm view @angular/cli versions --json\n</code></pre>\n\n<p>Currently it shows there is a version 8 release candidate available called 8.0.0-rc.2</p>\n\n<p>So you could do</p>\n\n<pre><code>npm i -g @angular/cli@8.0.0-rc.2\n</code></pre>\n\n<p>and then create a new project and see if Angular 8 is using a newer version of TypeScript. If so you could copy your code to the new Angular 8 project or you could wait for the release of Angular 8 which is expected very soon (May 2019) and then just use </p>\n\n<pre><code>ng update \n</code></pre>\n\n<p>to upgrade to 8.</p>\n\n<p>Alternatively, downgrade vega or look for a different library.</p>\n"}], "owner": {"reputation": 13, "user_id": 10827038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c645dd4bc9806943a26736eae718eaf2?s=128&d=identicon&r=PG&f=1", "display_name": "SomeUser", "link": "https://stackoverflow.com/users/10827038/someuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 55929604, "answer_count": 1, "score": 1, "last_activity_date": 1560673574, "creation_date": 1556655065, "question_id": 55928053, "link": "https://stackoverflow.com/questions/55928053/how-to-fix-issue-of-incompatibility-between-angular-project-and-a-vega-charts-l", "title": "How to fix issue of incompatibility between angular project and a vega (charts library)?", "body": "<p>I'm currently working on a angular 7 project, and i want to add vega library for charts.\nthe issue i think is the fact that vega requires a higher version of typescript (3.4.4) and inside my project its only (3.2.2).</p>\n\n<p>So when i try to run the project, i'm having an error like this :</p>\n\n<p><strong>ERROR in node_modules/vega-lite/build/src/util.d.ts(1,10): error TS2305: Module '\"P:/projects/ui/project/node_modules/@types/clone\"' has no exported member 'default'.\nnode_modules/vega-lite/build/src/util.d.ts(2,8): error TS1192: Module '\"P:/projects/ui/project/node_modules/@types/fast-json-stable-stringify/index\"' has no default export.</strong></p>\n\n<p>so could be please give me an idea , how to solve this kind of issues , if you have lower version of typescript in your application and a higher one in another library.</p>\n\n<p>thank you</p>\n"}, {"tags": ["javascript", "typescript", "monaco-editor"], "answers": [{"comments": [{"owner": {"reputation": 8716, "user_id": 2938364, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vNRRo.jpg?s=128&g=1", "display_name": "Markus Weninger", "link": "https://stackoverflow.com/users/2938364/markus-weninger"}, "edited": false, "score": 1, "creation_date": 1600436109, "post_id": 57794033, "comment_id": 113096232, "body": "This inserts <code>&quot;hello world\\n&quot;</code> at the given position, but does not move the curser there, at least on my machine."}], "tags": [], "owner": {"reputation": 5660, "user_id": 1399567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GUWem.jpg?s=128&g=1", "display_name": "Matthew Steven Monkan", "link": "https://stackoverflow.com/users/1399567/matthew-steven-monkan"}, "is_accepted": false, "score": -1, "last_activity_date": 1567621884, "creation_date": 1567621884, "answer_id": 57794033, "question_id": 55928045, "link": "https://stackoverflow.com/questions/55928045/monaco-editor-update-cursor-position-on-text-inserted/57794033#57794033", "title": "Monaco Editor: Update Cursor position on text inserted", "body": "<p>Try this:</p>\n\n<pre><code>editor.executeEdits(\"\", [{\n    range: {\n        startLineNumber: editor.getPosition().lineNumber, \n        startColumn: editor.getPosition().column,\n        endLineNumber: editor.getPosition().lineNumber, \n        endColumn: editor.getPosition().column\n    },\n    text: \"hello world\\n\",\n    forceMoveMarkers: true\n}]);\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 2979805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/727449413/picture?type=large", "display_name": "Oscar_sgc", "link": "https://stackoverflow.com/users/2979805/oscar-sgc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1880, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1567621884, "creation_date": 1556655006, "question_id": 55928045, "link": "https://stackoverflow.com/questions/55928045/monaco-editor-update-cursor-position-on-text-inserted", "title": "Monaco Editor: Update Cursor position on text inserted", "body": "<p>I'm adding some text to the Monaco editor using a button outside it (i.e. \"hello world\") and then I'm trying to set the cursor position to the next line.  </p>\n\n<p>I tried using the \"setPosition({column:x, lineNumber:y})\" function from the editor, but it doesn't work.</p>\n\n<p>This is how I'm implementing it:</p>\n\n<pre><code>insertInPosition(textToInsert:string, cursorPosition:any){\n    this.editorInstance.setPosition(cursorPosition);\n    var allInstructions = this.instructionSet.split(\"\\n\")\n    allInstructions.splice(cursorPosition.lineNumber - 1, 0, textToInsert);\n    allInstructions.splice(cursorPosition.lineNumber, 1);\n    allInstructions = allInstructions.join(\"\\n\");\n    this.editorInstance.setPosition(cursorPosition);\n}\n</code></pre>\n\n<p>I expect to see the cursor in the line and column defined by cursorPosition, but I actually see that the cursor points to line 1 and column 1 (At the top of the editor).</p>\n\n<p>I also tried to use the same api <code>editor.setPosition()</code> inside the <code>onDidChangeModelContent()</code> method, but it doesn't works. And when I print in console the <code>editor.getPosition()</code> I receive the correct positions.</p>\n\n<p>Any idea on what could be wrong?</p>\n"}, {"tags": ["javascript", "angular", "html", "typescript", "html5-video"], "comments": [{"owner": {"reputation": 620, "user_id": 9901630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqjE7.jpg?s=128&g=1", "display_name": "nullptr.t", "link": "https://stackoverflow.com/users/9901630/nullptr-t"}, "edited": false, "score": 0, "creation_date": 1556655551, "post_id": 55927995, "comment_id": 98509888, "body": "This isn&#39;t a code solution - but one alternative could be to use some kind of streaming/video capture software and by&quot;simulating&quot; a webcam through a plugin, that way you&#39;ll deal with less code overhead. <a href=\"https://obsproject.com/forum/resources/obs-virtualcam.539/\" rel=\"nofollow noreferrer\">obsproject.com/forum/resources/obs-virtualcam.539</a>"}, {"owner": {"reputation": 48, "user_id": 5600314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jRdqbgmssXU/AAAAAAAAAAI/AAAAAAAAAyo/5uAp6GCr1Ig/photo.jpg?sz=128", "display_name": "Jorgu", "link": "https://stackoverflow.com/users/5600314/jorgu"}, "reply_to_user": {"reputation": 620, "user_id": 9901630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqjE7.jpg?s=128&g=1", "display_name": "nullptr.t", "link": "https://stackoverflow.com/users/9901630/nullptr-t"}, "edited": false, "score": 0, "creation_date": 1556656049, "post_id": 55927995, "comment_id": 98510067, "body": "I undestand the idea and advantages, but providing a full intrinsic solution would allows for unit tests, and beside would be independent of the OS."}, {"owner": {"reputation": 48, "user_id": 5600314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jRdqbgmssXU/AAAAAAAAAAI/AAAAAAAAAyo/5uAp6GCr1Ig/photo.jpg?sz=128", "display_name": "Jorgu", "link": "https://stackoverflow.com/users/5600314/jorgu"}, "reply_to_user": {"reputation": 620, "user_id": 9901630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqjE7.jpg?s=128&g=1", "display_name": "nullptr.t", "link": "https://stackoverflow.com/users/9901630/nullptr-t"}, "edited": false, "score": 0, "creation_date": 1556707989, "post_id": 55927995, "comment_id": 98522814, "body": "For the moment, and in the same idea of @nullptr.t, I&#39;m using <a href=\"https://github.com/jremmons/pyfakewebcam\" rel=\"nofollow noreferrer\">github.com/jremmons/pyfakewebcam</a> based on video4linux2. It allows to generates arbitrary cameras (/dev/video0, /dev/video1, ...) with python generated streams."}], "owner": {"reputation": 48, "user_id": 5600314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jRdqbgmssXU/AAAAAAAAAAI/AAAAAAAAAyo/5uAp6GCr1Ig/photo.jpg?sz=128", "display_name": "Jorgu", "link": "https://stackoverflow.com/users/5600314/jorgu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556656386, "creation_date": 1556654710, "last_edit_date": 1556656386, "question_id": 55927995, "link": "https://stackoverflow.com/questions/55927995/how-to-simulate-presence-of-webcam-in-html5", "title": "How to simulate presence of webcam in HTML5?", "body": "<p>I am developing an angular 7 app which takes photos from phone cameras or webcam on a computer. But one of my working machines does not have a webcam. \nThus, I would like to simulate the presence of a camera. </p>\n\n<p>Ideally, I would like to simulate it from a video file, or a list of image files, or a single image, or an empty fake image in last resort.</p>\n\n<p>I am already using WebcamModule from 'ngx-webcam' but it is not mandatory.</p>\n\n<p>The actual HTML code looks like this :</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!-- in component.html --&gt;\n  &lt;webcam [height]=\"500\" [width]=\"500\" [trigger]=\"triggerObservable\" (imageCapture)=\"handleImage($event)\"\n    *ngIf=\"showWebcam\" [allowCameraSwitch]=\"allowCameraSwitch\" [switchCamera]=\"nextWebcamObservable\"\n    [videoOptions]=\"videoOptions\" (cameraSwitched)=\"cameraWasSwitched($event)\" (initError)=\"handleInitError($event)\"&gt;\n  &lt;/webcam&gt;\n  &lt;br /&gt;\n\n  &lt;button mat-icon-button (click)=\"triggerSnapshot();\"&gt;\n    &lt;mat-icon&gt;camera&lt;/mat-icon&gt;\n  &lt;/button&gt;\n  &lt;button mat-icon-button (click)=\"showNextWebcam(true);\"&gt;\n    &lt;mat-icon&gt;switch_camera&lt;/mat-icon&gt;\n  &lt;/button&gt;\n</code></pre>\n\n<p>and is based on <a href=\"https://stackblitz.com/edit/ngx-webcam-demo\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/ngx-webcam-demo</a></p>\n\n<p>:)</p>\n"}, {"tags": ["typescript", "google-cloud-functions", "geofirex"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3121348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcdc52de60b9f50d39150c4e0776856?s=128&d=identicon&r=PG&f=1", "display_name": "user3121348", "link": "https://stackoverflow.com/users/3121348/user3121348"}, "edited": false, "score": 0, "creation_date": 1556671197, "post_id": 55929771, "comment_id": 98513929, "body": "Thanks @Frank for your help. i tried <code>const geoFire = geofirex.init(admin.app());</code> not work but i do that by an other way, first <code>const geofirex = require(&#39;geofirex&#39;);</code> then <code>const geoFire = geofirex.init(admin.app());</code> and i think it&#39;s work but now i faced other problem when call function i get <code>TypeError: this.app.firestore.GeoPoint is not a constructor     at GeoFirePoint.get [as geoPoint] (&#47;user_code&#47;node_modules&#47;geofirex&#47;dist&#47;index.cjs.js:1390:20)     at GeoFirePoint.get [as data] (&#47;user_code&#47;node_modules&#47;geofirex&#47;dist&#47;index.cjs.js:1411:31)     at GeoFireCollectionRef.setPoint (&#47;u....</code>"}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 73, "user_id": 3121348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcdc52de60b9f50d39150c4e0776856?s=128&d=identicon&r=PG&f=1", "display_name": "user3121348", "link": "https://stackoverflow.com/users/3121348/user3121348"}, "edited": false, "score": 0, "creation_date": 1556675777, "post_id": 55929771, "comment_id": 98514692, "body": "Yeah... while GeoFireX may be able to be used in your context, it seems more focused on web. You&#39;re going to have to dig into the GeoFireX source code for that stack trace to learn what caused it. That&#39;s what I did to get to my revised answer above, which apparently solved your first problem. It&#39;s a matter of seeing what the stack trace points at, and working backwards from there."}, {"owner": {"reputation": 73, "user_id": 3121348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcdc52de60b9f50d39150c4e0776856?s=128&d=identicon&r=PG&f=1", "display_name": "user3121348", "link": "https://stackoverflow.com/users/3121348/user3121348"}, "edited": false, "score": 0, "creation_date": 1556712816, "post_id": 55929771, "comment_id": 98524688, "body": "i traced GeoFireX source code but I could not determine the cause of the problem :( the line at <code>node_modules&#47;geofirex&#47;dist&#47;index.cjs.js:1390</code> is: <code>return new this.app.firestore.GeoPoint(this.latitude, this.longitude);</code>"}, {"owner": {"reputation": 104, "user_id": 3973889, "user_type": "registered", "profile_image": "https://graph.facebook.com/679956904/picture?type=large", "display_name": "Rich EBee", "link": "https://stackoverflow.com/users/3973889/rich-ebee"}, "edited": false, "score": 0, "creation_date": 1559786842, "post_id": 55929771, "comment_id": 99531352, "body": "TypeError: this.app.firestore.GeoPoint is not a constructor at GeoFirePoint.get can be resolved by calling .data at the end"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": false, "score": 1, "last_activity_date": 1556665938, "creation_date": 1556665938, "answer_id": 55929771, "question_id": 55927734, "link": "https://stackoverflow.com/questions/55927734/how-to-use-geofirex-inside-google-cloud-functions/55929771#55929771", "title": "How to use geofirex inside google cloud functions", "body": "<p>On second inspection, it seems that the <a href=\"https://firebase.google.com/docs/reference/admin/node/admin.html#.app\" rel=\"nofollow noreferrer\">Firebase Admin SDK for Node.js <em>does</em> have the concept of a FirebaseApp</a>. You might want to try passing <code>admin.app()</code> into GeofireX to initialize it.</p>\n\n<p><strike>\nWithin Cloud Functions you're using the <a href=\"https://firebase.google.com/docs/reference/admin/node\" rel=\"nofollow noreferrer\">Firebase Admin SDK for Node.js</a>, which doesn't have the concept of a <code>FirebaseApp</code>.</p>\n\n<p>From a quick scan it looks like GeofireX was only made to be used with the client-side JavaScript SDK of Firebase. You might want to <a href=\"https://github.com/codediodeio/geofirex/issues\" rel=\"nofollow noreferrer\">file a feature request on its repo</a>, or even better a PR. :)</strike></p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 3121348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcdc52de60b9f50d39150c4e0776856?s=128&d=identicon&r=PG&f=1", "display_name": "user3121348", "link": "https://stackoverflow.com/users/3121348/user3121348"}, "is_accepted": true, "score": 1, "last_activity_date": 1556800458, "creation_date": 1556800458, "answer_id": 55952576, "question_id": 55927734, "link": "https://stackoverflow.com/questions/55927734/how-to-use-geofirex-inside-google-cloud-functions/55952576#55952576", "title": "How to use geofirex inside google cloud functions", "body": "<p><strong>the problem solved as following:</strong></p>\n\n<pre><code>const functions = require('firebase-functions');\nconst admin = require('firebase-admin');\nadmin.initializeApp();\nadmin.firestore().settings({timestampsInSnapshots: true});\n\n// Init GeoFireX\nconst geofirex = require('geofirex');// &lt;-- Use require Instead of import geofirex\nimport { get } from 'geofirex';\nconst geoFire = geofirex.init(admin); // &lt;-- admin not admin.app()\n</code></pre>\n\n<p><strong>Then</strong></p>\n\n<pre><code>exports.geofenceUserNotifications = functions.https.onRequest(async (req, res) =&gt; {\n\n  //setPoint (id, field, lat, lng)\n  geoFire.collection('users').setPoint(uid, field, latitude, longitude).then(result =&gt; {\n    res.end('User geo point is updated!');\n  }).catch( err =&gt; {\n      res.end('error when update user geo point');\n      return;\n  });\n});\n</code></pre>\n\n<p><strong>And geoFireX works fine.</strong></p>\n\n<p>but now I faced other problem with geoFireX query.\nI tried get nearby items but geoFireX returns <code>Observable&lt;object[]&gt;</code> and it's not work within cloud functions.</p>\n\n<p><strong>I tried use <a href=\"https://github.com/codediodeio/geofirex#promises-with-get\" rel=\"nofollow noreferrer\">get()</a> by geoFireX:</strong></p>\n\n<pre><code>const query = geoFire.collection('places', queryRef).within(center, radius, field);\nconst nearbyPlaces = await get(query); // await query.pipe(operators.first()).toPromise();\n</code></pre>\n\n<p>but unfortunately it does not work. and I get the following error:</p>\n\n<blockquote>\n  <p>Error: Argument \"onNext\" is not a valid function.\n      at Validator.(anonymous function).values [as isFunction] (/srv/node_modules/@google-cloud/firestore/build/src/validate.js:99:27)\n      at Query.onSnapshot (/srv/node_modules/@google-cloud/firestore/build/src/reference.js:1524:25)\n      at Observable._subscribe (/srv/node_modules/geofirex/dist/index.cjs.js:1597:33)\n      at Observable._trySubscribe (/srv/node_modules/rxjs/internal/Observable.js:44:25)\n      at Observable.subscribe (/srv/node_modules/rxjs/internal/Observable.js:30:22)\n      at MapOperator.call (/srv/node_modules/rxjs/internal/operators/map.js:32:23)\n      at Observable.subscribe (/srv/node_modules/rxjs/internal/Observable.js:25:31)\n      at Object.subscribeToResult (/srv/node_modules/rxjs/internal/util/subscribeToResult.js:12:23)\n      at CombineLatestSubscriber._complete (/srv/node_modules/rxjs/internal/observable/combineLatest.js:76:46)\n      at CombineLatestSubscriber.Subscriber.complete (/srv/node_modules/rxjs/internal/Subscriber.js:78:18)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1202, "user_id": 9316174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06c7acc8ef62f602e20c7dd1765df1d?s=128&d=identicon&r=PG", "display_name": "mubin986", "link": "https://stackoverflow.com/users/9316174/mubin986"}, "reply_to_user": {"reputation": 73, "user_id": 3121348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcdc52de60b9f50d39150c4e0776856?s=128&d=identicon&r=PG&f=1", "display_name": "user3121348", "link": "https://stackoverflow.com/users/3121348/user3121348"}, "edited": false, "score": 0, "creation_date": 1571323704, "post_id": 58120701, "comment_id": 103210937, "body": "One more thing! If you face any issue with the &quot;subscribe&quot; method of geofirex, then you ca use this for querying:  <code>const promise = geo.collection(&#39;ex-pending&#39;).within(geo.point(lat, lng), radius, field)     const snap = await get(promise)</code>   this is the async await method instead of RxJs."}, {"owner": {"reputation": 149, "user_id": 3984444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938ef9726aedc00a67c199fe4b2f0298?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/3984444/jason"}, "edited": false, "score": 0, "creation_date": 1609656294, "post_id": 58120701, "comment_id": 115887138, "body": "this shows an example for a node js backend not cloud functions. Theyre very similar but in my case i am using the https.onCall method and this doesnt work for me."}], "tags": [], "owner": {"reputation": 1202, "user_id": 9316174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06c7acc8ef62f602e20c7dd1765df1d?s=128&d=identicon&r=PG", "display_name": "mubin986", "link": "https://stackoverflow.com/users/9316174/mubin986"}, "is_accepted": false, "score": 2, "last_activity_date": 1569513719, "creation_date": 1569513719, "answer_id": 58120701, "question_id": 55927734, "link": "https://stackoverflow.com/questions/55927734/how-to-use-geofirex-inside-google-cloud-functions/58120701#58120701", "title": "How to use geofirex inside google cloud functions", "body": "<p><strong>-- Maybe this is the complete solution --</strong></p>\n\n<p><strong>Two Steps:-</strong></p>\n\n<blockquote>\n  <ol>\n  <li>Adding Geopoint and Geohashes into firestore</li>\n  <li>Query with geopoint data</li>\n  </ol>\n</blockquote>\n\n<p><strong>Step-1 Solution:</strong>\nFor this, you've to add firebase-admin sdk and configure the geofirex with geofirex.init(admin). \nEx: </p>\n\n<pre><code>const geofirex = require('geofirex');// &lt;-- Use require Instead of import geofirex\nimport { get } from 'geofirex';\nconst geo = geofirex.init(admin); // &lt;-- admin not admin.app()\n</code></pre>\n\n<p>now you can store your Geopoint and Geohashes like this:-</p>\n\n<pre><code>const point = geo.point(40.1, -119.1);\n</code></pre>\n\n<p>Store this into database by using firestore.</p>\n\n<p><strong>Step-2 Solution:</strong>\nFor this, you've to use firebase web sdk to configure the geofirex. Otherwise, you cannot be able to query from your firestore database! \nEx:</p>\n\n<pre><code>import * as firebase from 'firebase';\nvar firebaseConfig = {\n    apiKey: API_KEY_HERE,\n    authDomain: DOMAIN_HERE,\n    databaseURL: FIREBASE_REALTIME_DATABASE_URL,\n    projectId: PROJECT_ID,\n    storageBucket: STORAGE_BUCKET,\n    messagingSenderId: MESSAGING_SENDER_ID,\n    appId: FIREBASE_APP_ID,\n    measurementId: MEASUREMENT_ID\n  };\nfirebase.initializeApp(firebaseConfig);\n\nimport geofirex = require('geofirex');// &lt;-- Now, use import Instead of require('geofirex')\nconst geo = geofirex.init(firebase.app()); // &lt;-- firebase or, firebase.app()\n</code></pre>\n\n<p>You can get <strong>firebaseConfig</strong> from your firebase console web sdk setup. Just copy and paste that! ;)\nNow you can query your firestore geopoint like this:-</p>\n\n<pre><code>router.get('/expert', (req, res, next) =&gt; {\n    const radius = req.query.radius\n    const lat = req.query.lat\n    const lng = req.query.lng\n    const field = 'position'\n\n    geo.collection('ex-pending').within(geo.point(lat, lng), radius, field).subscribe(snap =&gt; {\n        res.status(200).send(snap)\n    })\n\n})\n</code></pre>\n\n<p>That's it! :D</p>\n"}], "owner": {"reputation": 73, "user_id": 3121348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcdc52de60b9f50d39150c4e0776856?s=128&d=identicon&r=PG&f=1", "display_name": "user3121348", "link": "https://stackoverflow.com/users/3121348/user3121348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 0, "accepted_answer_id": 55952576, "answer_count": 3, "score": 1, "last_activity_date": 1569513719, "creation_date": 1556653350, "question_id": 55927734, "link": "https://stackoverflow.com/questions/55927734/how-to-use-geofirex-inside-google-cloud-functions", "title": "How to use geofirex inside google cloud functions", "body": "<p>I have a use case where I need to use <a href=\"https://github.com/codediodeio/geofirex\" rel=\"nofollow noreferrer\">geofirex</a> library inside Google Cloud Functions. The init function of the library expects FirebaseApp instance. Is it possible to initialise it inside cloud functions in order to query firestore database using firebase-admin?</p>\n\n<p>What i tried..</p>\n\n<p>functions > src > index.ts</p>\n\n<pre><code>import * as functions from 'firebase-functions';\nimport * as admin from 'firebase-admin';\nadmin.initializeApp();\nadmin.firestore().settings({timestampsInSnapshots: true});\n\n\n// Init GeoFireX\nimport * as firebase from 'firebase/app';\nimport * as geofirex from 'geofirex';\nconst geoFire = geofirex.init(firebase);\n\nexports.geofenceUserNotifications = functions.https.onRequest((req, res) =&gt; {\n  if(!req || !req.body || !req.body.length || !req.body[0].latitude || !req.body[0].longitude || !req.body[0].uid || !req.body[0].userFcmToken){\n    // end function with 401 status\n    res.status(401).send('Authentication required.');\n  }\n\n  const uid = req.body[0].uid;\n  const userFcmToken = req.body[0].userFcmToken;\n  const latitude = req.body[0].latitude;\n  const longitude = req.body[0].longitude;\n  const field = 'position';\n\n  geoFire.collection('users').setPoint(uid, field, latitude, longitude).then(result =&gt; {\n    res.end('User geoPoint updated!');\n  }).catch( err =&gt; {\n      console.log(err);\n      res.end('error when update user geo point!');\n  });\n\n});\n</code></pre>\n\n<p>functions > package.json</p>\n\n<pre><code>{\n  \"name\": \"functions\",\n  \"scripts\": {\n    \"lint\": \"tslint --project tsconfig.json\",\n    \"build\": \"tsc\",\n    \"serve\": \"npm run build &amp;&amp; firebase serve --only functions\",\n    \"shell\": \"npm run build &amp;&amp; firebase functions:shell\",\n    \"start\": \"npm run shell\",\n    \"deploy\": \"firebase deploy --only functions\",\n    \"logs\": \"firebase functions:log\"\n  },\n  \"main\": \"lib/index.js\",\n  \"dependencies\": {\n    \"firebase-admin\": \"~6.0.0\",\n    \"firebase-functions\": \"^2.1.0\",\n    \"moment\": \"^2.23.0\",\n    \"firebase\": \"^5.10.1\",\n    \"geofirex\": \"0.0.6\",\n    \"rxjs\": \"^6.3.3\",\n    \"rxjs-compat\": \"^6.5.1\"\n  },\n  \"devDependencies\": {\n    \"tslint\": \"~5.8.0\",\n    \"typescript\": \"~2.8.3\"\n  },\n  \"private\": true\n}\n</code></pre>\n\n<p>No error when deploy but when call geofenceUserNotifications function i get this error:</p>\n\n<pre><code>TypeError: app.firestore is not a function\n    at new GeoFireCollectionRef (/user_code/node_modules/geofirex/dist/index.cjs.js:1465:24)\n    at GeoFireClient.collection (/user_code/node_modules/geofirex/dist/index.cjs.js:1639:16)\n    at exports.geofenceUserNotifications.functions.https.onRequest (/user_code/lib/index.js:2197:13)\n    at cloudFunction (/user_code/node_modules/firebase-functions/lib/providers/https.js:57:9)\n    at /var/tmp/worker/worker.js:783:7\n    at /var/tmp/worker/worker.js:766:11\n    at _combinedTickCallback (internal/process/next_tick.js:73:7)\n    at process._tickDomainCallback (internal/process/next_tick.js:128:9)\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["reactjs", "typescript", "types", "static"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1556651217, "post_id": 55927259, "comment_id": 98508166, "body": "Shouldn&#39;t it be <code>const variable = {message: &#39;test&#39;}</code> instead?  That&#39;s what the error message implies, anyway."}], "answers": [{"tags": [], "owner": {"reputation": 537, "user_id": 11370939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xfbPig8G68U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3recO4YpXT2Xh9cIEfRrbxg246rfOw/mo/photo.jpg?sz=128", "display_name": "German", "link": "https://stackoverflow.com/users/11370939/german"}, "is_accepted": true, "score": 2, "last_activity_date": 1556651379, "creation_date": 1556651379, "answer_id": 55927325, "question_id": 55927259, "link": "https://stackoverflow.com/questions/55927259/error-when-passing-correct-type-to-function-in-react-typescript/55927325#55927325", "title": "Error, when passing correct type to function in React/Typescript", "body": "<p>Your function is expecting an object like:</p>\n\n<pre><code>const mssg = {\n  message: 'MyMessage'\n}\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>interface MyMessageProps {\n  message: string;\n}\n\nfunction MyMessage({ message }: MyMessageProps) {\n  return &lt;div&gt;i shall speak! my message is: {message}&lt;/div&gt;;\n}\n\nclass App extends Component {\n\n  render() {\n\n    const variable = {\n        message: 'my test'\n     };\n\n    return (\n      &lt;div&gt;\n            &lt;button onClick = {() =&gt; MyMessage(variable)}&gt;&lt;/button&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n"}], "owner": {"reputation": 1001, "user_id": 9455902, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jc2xy.jpg?s=128&g=1", "display_name": "Piotr \u017bak", "link": "https://stackoverflow.com/users/9455902/piotr-%c5%bbak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 55927325, "answer_count": 1, "score": 0, "last_activity_date": 1556651379, "creation_date": 1556651066, "question_id": 55927259, "link": "https://stackoverflow.com/questions/55927259/error-when-passing-correct-type-to-function-in-react-typescript", "title": "Error, when passing correct type to function in React/Typescript", "body": "<p>I have problem, when i passing string variable to function.</p>\n\n<p>I created interface MyMessageProps, which declare message on string,</p>\n\n<p>later function MyMessage use this interface and return  with this message.</p>\n\n<p>When i adding React Component and trying add this function to button onClick error appear.</p>\n\n<pre><code>interface MyMessageProps {\n  message: string;\n}\n\nfunction MyMessage({ message }: MyMessageProps) {\n  return &lt;div&gt;i shall speak! my message is: {message}&lt;/div&gt;;\n}\n\nclass App extends Component {\n\n  render() {\n\n    const variable = 'test';\n\n    return (\n      &lt;div&gt;\n            &lt;button onClick = {() =&gt; MyMessage(variable)}&gt;&lt;/button&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/h03j8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h03j8.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "angular", "typescript", "observable", "angular-event-emitter"], "comments": [{"owner": {"reputation": 817, "user_id": 3459011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561a4ac06c6502c6d8e7907fd55510e4?s=128&d=identicon&r=PG", "display_name": "rmjoia", "link": "https://stackoverflow.com/users/3459011/rmjoia"}, "edited": false, "score": 1, "creation_date": 1556650299, "post_id": 55927093, "comment_id": 98507773, "body": "so the typo on <code>this.change.subsribe(state =&gt; console.log(state)); </code> has nothing to do with it, right? Also, output is <code>@Output()</code>"}, {"owner": {"reputation": 80, "user_id": 8664756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55jVY.jpg?s=128&g=1", "display_name": "Libby Lebyane", "link": "https://stackoverflow.com/users/8664756/libby-lebyane"}, "reply_to_user": {"reputation": 817, "user_id": 3459011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561a4ac06c6502c6d8e7907fd55510e4?s=128&d=identicon&r=PG", "display_name": "rmjoia", "link": "https://stackoverflow.com/users/3459011/rmjoia"}, "edited": false, "score": 0, "creation_date": 1556650514, "post_id": 55927093, "comment_id": 98507872, "body": "Sorry, typed it wrong but in the file it&#39;s okay"}, {"owner": {"reputation": 817, "user_id": 3459011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561a4ac06c6502c6d8e7907fd55510e4?s=128&d=identicon&r=PG", "display_name": "rmjoia", "link": "https://stackoverflow.com/users/3459011/rmjoia"}, "edited": false, "score": 0, "creation_date": 1556650633, "post_id": 55927093, "comment_id": 98507930, "body": "t&#39;s really good in this situations to setup some sort of example.. working example.. you can easily do something at <a href=\"https://stackblitz.com\" rel=\"nofollow noreferrer\">Stackblitz</a>"}, {"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 1, "creation_date": 1556650711, "post_id": 55927093, "comment_id": 98507970, "body": "1. Don&#39;t use event emitters or outputs in a service context, use rxjs subjects or behaviorsubjects, Outputs and EventEmitters are specifically for component events and template bindings 2. how/where is this service being provided? check this link for more on point 1: <a href=\"https://stackoverflow.com/questions/36076700/what-is-the-proper-use-of-an-eventemitter#answer-36076701\" title=\"what is the proper use of an eventemitter%23answer 36076701\">stackoverflow.com/questions/36076700/&hellip;</a>"}, {"owner": {"reputation": 817, "user_id": 3459011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561a4ac06c6502c6d8e7907fd55510e4?s=128&d=identicon&r=PG", "display_name": "rmjoia", "link": "https://stackoverflow.com/users/3459011/rmjoia"}, "edited": false, "score": 0, "creation_date": 1556651236, "post_id": 55927093, "comment_id": 98508170, "body": "@LibbyLebyane I would consider <i>bryan60</i> remark.. but.. I don&#39;t see any issues here <a href=\"https://stackblitz.com/edit/angular-so-gd7tqp\" rel=\"nofollow noreferrer\">stackblitz example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 8664756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55jVY.jpg?s=128&g=1", "display_name": "Libby Lebyane", "link": "https://stackoverflow.com/users/8664756/libby-lebyane"}, "edited": false, "score": 0, "creation_date": 1556652179, "post_id": 55927309, "comment_id": 98508556, "body": "thanks a lot I removed the <code>Output</code> and for <code>EventEmitter</code> I used Subject I instead like you insisted"}, {"owner": {"reputation": 80, "user_id": 8664756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55jVY.jpg?s=128&g=1", "display_name": "Libby Lebyane", "link": "https://stackoverflow.com/users/8664756/libby-lebyane"}, "edited": false, "score": 0, "creation_date": 1556652282, "post_id": 55927309, "comment_id": 98508597, "body": "And also removed duplicates of the LoaderService in providers of child components"}], "tags": [], "owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "is_accepted": false, "score": 1, "last_activity_date": 1556652345, "last_edit_date": 1556652345, "creation_date": 1556651324, "answer_id": 55927309, "question_id": 55927093, "link": "https://stackoverflow.com/questions/55927093/emit-method-of-eventemitter-not-emitting-values-to-subscribers/55927309#55927309", "title": "Emit method of EventEmitter not emitting values to subscribers", "body": "<p>First thing, <a href=\"https://stackoverflow.com/questions/36076700/what-is-the-proper-use-of-an-eventemitter#answer-36076701\">EventEmitters and Outputs don't belong in a service.</a></p>\n\n<p>I will refactor to use subjects and also protect your subject by making it private and exposing a public observable, this limits how your subject state can be modified, this is not required but is generally considered good practice:</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport {Subject} from 'rxjs/Subject';\nimport {Observable} from 'rxjs/Observable';\n\n@Injectable()\n\nclass LoaderService {\n  private change: Subject&lt;number&gt; = new Subject&lt;number&gt;();\n  change$: Observable&lt;number&gt; = this.change.asObservable();\n  private state: number = 0;\n\n  constructor() { \n     this.change$.subscribe(state =&gt; console.log(state)); \n     this.setState(1) \n  }\n\n  setState(state: number) {\n     this.state = state;\n     this.change.next(this.state);\n  }\n}\n</code></pre>\n\n<p>Second, this is likely an issue with how you provide your service.  If you have an app component template like:</p>\n\n<pre><code>&lt;loader-component&gt;&lt;/loader-component&gt;\n&lt;loader-component&gt;&lt;/loader-component&gt;\n</code></pre>\n\n<p>with 2 loader components side by side, and the loader component has a providers array like:</p>\n\n<pre><code>providers: [LoaderService]\n</code></pre>\n\n<p>then these 2 loaders are receiving different copies of the same service as they each provide and inject their own, so they will not see each other's events. </p>\n\n<p>To remedy this, you provide instead in the app component (and not in the loader component) so they have the same copy of the service, because then the parent is providing the service that each of them inject. If you were to provide in both app component and loader component, they would all receive a different copy. </p>\n\n<p>If you provide at root (module level) then every component that injects the service (and doesn't provide it's own) will receive the same copy of that service.  </p>\n\n<p>The appropriate place to provide a service is dependent on your app's needs and the function of the particular service.</p>\n"}, {"comments": [{"owner": {"reputation": 80, "user_id": 8664756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55jVY.jpg?s=128&g=1", "display_name": "Libby Lebyane", "link": "https://stackoverflow.com/users/8664756/libby-lebyane"}, "edited": false, "score": 0, "creation_date": 1556652425, "post_id": 55927400, "comment_id": 98508652, "body": "Thank you, I didn&#39;t know services don&#39;t use Output"}], "tags": [], "owner": {"reputation": 104, "user_id": 10415073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c5c31e506fbc98f410fc668a913806?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik", "link": "https://stackoverflow.com/users/10415073/kaushik"}, "is_accepted": true, "score": 1, "last_activity_date": 1556663571, "last_edit_date": 1556663571, "creation_date": 1556651766, "answer_id": 55927400, "question_id": 55927093, "link": "https://stackoverflow.com/questions/55927093/emit-method-of-eventemitter-not-emitting-values-to-subscribers/55927400#55927400", "title": "Emit method of EventEmitter not emitting values to subscribers", "body": "<p>You need to use <code>LoaderService</code> in some component for angular to create it, if we do not use the service any where angular will automatically discard it. Inject <code>LoaderService</code> in app component like below:</p>\n\n<p><code>constructor(private _loadService: LoaderService) {}</code> and then you will see the <code>console.log()</code>.</p>\n\n<p>Also, it is recommended to use either Subject or Behavior Subject from Rxjs instead of Output in a service.</p>\n"}], "owner": {"reputation": 80, "user_id": 8664756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55jVY.jpg?s=128&g=1", "display_name": "Libby Lebyane", "link": "https://stackoverflow.com/users/8664756/libby-lebyane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 1, "accepted_answer_id": 55927400, "answer_count": 2, "score": 0, "last_activity_date": 1556663571, "creation_date": 1556650236, "last_edit_date": 1556650544, "question_id": 55927093, "link": "https://stackoverflow.com/questions/55927093/emit-method-of-eventemitter-not-emitting-values-to-subscribers", "title": "Emit method of EventEmitter not emitting values to subscribers", "body": "<p>So I am trying to connect two components through a service, <code>LoaderComponent</code> and <code>AppComponent</code> with <code>LoaderService</code>, so that when app fetches data a loader shows up. But when I try to use an <code>EventEmitter</code> to emit changes to the components they don't get the changes but when the service subscribes \nto itself, it can get the changes</p>\n\n<p>LoaderService.ts</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { EventEmitter, Injectable } from '@angular/core';\n\n@Injectable()\n\nclass LoaderService {\n  @Output change: EventEmitter&lt;number&gt; = new EventEmitter&lt;number&gt;();\n  private state: number = 0;\n\n  constructor() { \n     this.change.subscribe(state =&gt; console.log(state)); \n     this.setState(1) \n  }\n\n  setState(state: number) {\n     this.state = state;\n     this.change.emit(this.state);\n  }\n}\n// Shows state when  but outside of the service event is not detected, also tried EventEmitter from from events\n</code></pre>\n\n<p>I expect to get events from the <code>LoaderService</code> to subscribers</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 106878, "user_id": 12579, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/969b153010f69ec07458fa1d9e8a413b?s=128&d=identicon&r=PG", "display_name": "Diodeus - James MacFarlane", "link": "https://stackoverflow.com/users/12579/diodeus-james-macfarlane"}, "edited": false, "score": 0, "creation_date": 1556649757, "post_id": 55926909, "comment_id": 98507555, "body": "This: <a href=\"https://stackoverflow.com/questions/44840735/change-vs-ngmodelchange-in-angular\" title=\"change vs ngmodelchange in angular\">stackoverflow.com/questions/44840735/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "edited": false, "score": 0, "creation_date": 1556656561, "post_id": 55926967, "comment_id": 98510272, "body": "This doesn&#39;t fire for me. Also if I manually select from the dropdownlist the event.target.value looks like this &#39;12: 12&#39;. When it should just be 12"}], "tags": [], "owner": {"reputation": 33, "user_id": 4576783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc9ac41557b7b1334e8af25396ddae0?s=128&d=identicon&r=PG&f=1", "display_name": "FragEden", "link": "https://stackoverflow.com/users/4576783/frageden"}, "is_accepted": false, "score": 0, "last_activity_date": 1556650022, "last_edit_date": 1556650022, "creation_date": 1556649665, "answer_id": 55926967, "question_id": 55926909, "link": "https://stackoverflow.com/questions/55926909/how-can-i-fire-select-dropdown-onchange-event-programatically/55926967#55926967", "title": "How can I fire select dropdown onchange event programatically?", "body": "<p>You need to change from <code>(ngModelChange)='TabNameChanged($event)'</code> to <code>(change)=\"TabNameChanged($event)\"</code> in your HTML for the dropdown.</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;div class=\"col\"&gt;             \n                  &lt;label for=\"dropdown2\"&gt;Tab Name&lt;/label&gt;\n                  &lt;select #tab class=\"custom-select custom-select-lg mb-3\" id=\"dropdown2\" [disabled]='DisableTab' (change)='TabNameChanged($event)' [(ngModel)]=\"selectedTabId\"&gt;                  \n                        &lt;option *ngFor=\"let tab of tabNameList let i=index\" [(ngValue)]=\"tab.TabId\" &gt;{{tab.TabName}}&lt;/option&gt;                \n                  &lt;/select&gt;                 \n&lt;/div&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "edited": false, "score": 0, "creation_date": 1556656482, "post_id": 55927096, "comment_id": 98510234, "body": "This does work however when done this way event.target.value is &quot; &quot;. I need the value to be the value that I just set via code this.selectedTabId = data[0][&quot;ScreenId&quot;]"}], "tags": [], "owner": {"reputation": 26, "user_id": 3059487, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001189344597/picture?type=large", "display_name": "user3059487", "link": "https://stackoverflow.com/users/3059487/user3059487"}, "is_accepted": true, "score": 1, "last_activity_date": 1556650246, "creation_date": 1556650246, "answer_id": 55927096, "question_id": 55926909, "link": "https://stackoverflow.com/questions/55926909/how-can-i-fire-select-dropdown-onchange-event-programatically/55927096#55927096", "title": "How can I fire select dropdown onchange event programatically?", "body": "<p>You can fire an element's event at any time using the following code:</p>\n\n<pre><code>let element = document.getElementById(id);\nelement.dispatchEvent(new Event(\"change\"));\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 5224564, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fadd7fa279dca6645a98e6e03c23dd6c?s=128&d=identicon&r=PG&f=1", "display_name": "Terrance Jackson", "link": "https://stackoverflow.com/users/5224564/terrance-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 55927096, "answer_count": 2, "score": 1, "last_activity_date": 1556650246, "creation_date": 1556649357, "question_id": 55926909, "link": "https://stackoverflow.com/questions/55926909/how-can-i-fire-select-dropdown-onchange-event-programatically", "title": "How can I fire select dropdown onchange event programatically?", "body": "<p>I am assigning the below datasource 'tabNameList' on page load. After it loads the select list I then assign it the default value of lets say 12. This should trigger the  below code to fire however it never fires. How can I get the code to fire the second the tablist is loaded and the selectedTabId is set to 12?</p>\n\n<p>The setup code </p>\n\n<pre><code> LoadTabNames(){\n    this._userProfileService.loadTabNames(this.screenId).subscribe(data =&gt; { \n      this.DisableTab= false;             \n      this.tabNameList = data[0];\n      this.selectedTabId = data[0][\"ScreenId\"]  &lt;----- TabNameChanged event should fire right here since the ngModel has changed        \n      this.cdr.detectChanges();      \n    })\n  }\n\nTabNameChanged(event){\n      this.selectedColumns = [];\n      this.availableColumns = [];     \n\n      // When the tab select changes load the new headers into the First ListBox\n      const detailList = filterBy(this.UserProfileTabData, {\n        logic: 'and',\n        filters: [\n          { field: 'ScreenId', operator: 'eq', value: this.screenId, ignoreCase: true },\n          { field: 'TabId', operator: 'eq', value: event, ignoreCase: true }\n        ]\n      });\n       detailList.forEach(element =&gt; {\n        this.selectedColumns.push(element[\"ColumnName\"]);        \n      });\n\n    }\n</code></pre>\n\n<p>My html</p>\n\n<pre><code>&lt;div class=\"col\"&gt;             \n                  &lt;label for=\"dropdown2\"&gt;Tab Name&lt;/label&gt;\n                  &lt;select #tab class=\"custom-select custom-select-lg mb-3\" id=\"dropdown2\" [disabled]='DisableTab' (ngModelChange)='TabNameChanged($event)' [(ngModel)]=\"selectedTabId\"&gt;                  \n                        &lt;option *ngFor=\"let tab of tabNameList let i=index\" [(ngValue)]=\"tab.TabId\" &gt;{{tab.TabName}}&lt;/option&gt;                \n                      &lt;/select&gt;                 \n       &lt;/div&gt; \n</code></pre>\n"}, {"tags": ["angular", "typescript", "google-chrome", "angular6"], "answers": [{"tags": [], "owner": {"reputation": 1712, "user_id": 11420760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432eb295e1d61c5ae03aa621b9e3e74b?s=128&d=identicon&r=PG", "display_name": "talhature", "link": "https://stackoverflow.com/users/11420760/talhature"}, "is_accepted": false, "score": 4, "last_activity_date": 1556653527, "creation_date": 1556653527, "answer_id": 55927761, "question_id": 55926674, "link": "https://stackoverflow.com/questions/55926674/angular-6-typescript-listen-event-when-window-print-is-cancelled-click-on-cance/55927761#55927761", "title": "Angular 6 typescript listen event when window print is cancelled (click on cancel print)", "body": "<p>You can make use of afterprint event. The event is fired both when the user prints or canceles the print dialog.</p>\n\n<pre><code>  @HostListener('window:afterprint')\n  onafterprint() {\n    this.router.navigate(\"other_page\");\n  }\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1571920803, "creation_date": 1556648305, "last_edit_date": 1571920803, "question_id": 55926674, "link": "https://stackoverflow.com/questions/55926674/angular-6-typescript-listen-event-when-window-print-is-cancelled-click-on-cance", "title": "Angular 6 typescript listen event when window print is cancelled (click on cancel print)", "body": "<p>I am trying to redirect after window.print is open, when the user clicks on cancel.</p>\n\n<p>this opens the window print</p>\n\n<pre><code>printHc(){\n  window.print();\n}\n</code></pre>\n\n<p>now if the user cancel print I want to redirect to another route. e.g.</p>\n\n<pre><code>this.router.navigate(\"other_page\");\n</code></pre>\n\n<p>How can I listen to this event on typescript in Angular 6 (using chrome)?</p>\n"}, {"tags": ["angular", "typescript", "redux", "ngrx"], "comments": [{"owner": {"reputation": 9858, "user_id": 343159, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/621bd528bae8952ea5f9391b2a727ee6?s=128&d=identicon&r=PG", "display_name": "serlingpa", "link": "https://stackoverflow.com/users/343159/serlingpa"}, "reply_to_user": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1556649656, "post_id": 55926661, "comment_id": 98507526, "body": "Thanks @Igor, but I don&#39;t know how to do that. Could you please post some code or a link that describes this? It&#39;s a service, so I&#39;m guessing it would have to be at module level."}, {"owner": {"reputation": 533, "user_id": 6059800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UfOiS.jpg?s=128&g=1", "display_name": "kklimczak", "link": "https://stackoverflow.com/users/6059800/kklimczak"}, "edited": false, "score": 0, "creation_date": 1556650591, "post_id": 55926661, "comment_id": 98507917, "body": "<a href=\"https://ngrx.io/guide/store/reducers#registering-root-state\" rel=\"nofollow noreferrer\">ngrx.io/guide/store/reducers#registering-root-state</a>"}, {"owner": {"reputation": 9858, "user_id": 343159, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/621bd528bae8952ea5f9391b2a727ee6?s=128&d=identicon&r=PG", "display_name": "serlingpa", "link": "https://stackoverflow.com/users/343159/serlingpa"}, "edited": false, "score": 0, "creation_date": 1556652825, "post_id": 55926661, "comment_id": 98508798, "body": "Oh. I&#39;m already importing the store using <code>StoreModule.forRoot(fromStore.reducers, {metaReducers})</code>. Any other ideas what I might be missing?"}, {"owner": {"reputation": 456, "user_id": 10424104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IO_3nYZv-xk/AAAAAAAAAAI/AAAAAAAAWOA/0zt-w_jRUp0/photo.jpg?sz=128", "display_name": "Lloyd Nicholson", "link": "https://stackoverflow.com/users/10424104/lloyd-nicholson"}, "edited": false, "score": 0, "creation_date": 1556696257, "post_id": 55926661, "comment_id": 98518782, "body": "Have you tried just this.authUser$ = this.store.select(\u2018auth\u2019). Does that return a value for authUser$?"}, {"owner": {"reputation": 9858, "user_id": 343159, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/621bd528bae8952ea5f9391b2a727ee6?s=128&d=identicon&r=PG", "display_name": "serlingpa", "link": "https://stackoverflow.com/users/343159/serlingpa"}, "edited": false, "score": 0, "creation_date": 1556700964, "post_id": 55926661, "comment_id": 98520311, "body": "It&#39;s the <code>store</code> that is undefined. So <code>this.store.select()</code> fails, no matter what the format of the selector."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 2536454, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e55385f5f96975520596e92dc45eb252?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2536454/michael"}, "edited": false, "score": 0, "creation_date": 1562020647, "post_id": 55934104, "comment_id": 100238162, "body": "I have a factory on the app module that I inject the Store into by adding the dependency in the provider: <code>deps: [[new Inject(Store)]],</code>"}], "tags": [], "owner": {"reputation": 9858, "user_id": 343159, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/621bd528bae8952ea5f9391b2a727ee6?s=128&d=identicon&r=PG", "display_name": "serlingpa", "link": "https://stackoverflow.com/users/343159/serlingpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1556702570, "creation_date": 1556702570, "answer_id": 55934104, "question_id": 55926661, "link": "https://stackoverflow.com/questions/55926661/angular-cant-inject-store-into-service/55934104#55934104", "title": "Angular: Can&#39;t inject store into service", "body": "<p>Ok, so it turns out I was being an idiot.</p>\n\n<p>The service that had the store in its constructor was not being created by DI, it was being created in a factory. Now I need to work out how to inject the store into a factory!</p>\n"}], "owner": {"reputation": 9858, "user_id": 343159, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/621bd528bae8952ea5f9391b2a727ee6?s=128&d=identicon&r=PG", "display_name": "serlingpa", "link": "https://stackoverflow.com/users/343159/serlingpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556702570, "creation_date": 1556648225, "last_edit_date": 1556656608, "question_id": 55926661, "link": "https://stackoverflow.com/questions/55926661/angular-cant-inject-store-into-service", "title": "Angular: Can&#39;t inject store into service", "body": "<p>I am trying to inject a store into a service, but I am receiving the following error:</p>\n\n<blockquote>\n  <p>Cannot read property 'select' of undefined</p>\n</blockquote>\n\n<p>This is being raised on this line:</p>\n\n<pre><code>this.authUser$ = this.store.select(GetAuthUser);\n</code></pre>\n\n<p>For some reason, the framework is having difficulty creating the store. The whole constructor of the service looks like this:</p>\n\n<pre><code>constructor(private store: Store&lt;State&gt;) {\n  super();\n\n  this.authUser$ = this.store.select(GetAuthUser);\n}\n</code></pre>\n\n<p>The <code>State</code> looks like this:</p>\n\n<pre><code>export interface State {\n  navigation: fromNavigation.State;\n  router: RouterReducerState;\n  auth: fromAuth.State;\n}\n</code></pre>\n\n<p>I have tried being more specific with the <code>State</code> and using just the <code>authState.State</code>, but this doesn't work.</p>\n\n<p>I have used the same code in a component, using the same state <code>Store&lt;State&gt;</code> in the constructor, and it works fine. It's just using it in a service is the problem.</p>\n\n<p>I'm sure it's something pretty simple, but I can't figure it out. What could be wrong? Do you need any more information?</p>\n"}, {"tags": ["typescript", "vue.js", "visual-studio-code", "jsdoc"], "answers": [{"tags": [], "owner": {"reputation": 1369, "user_id": 908677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c371a91c7dabd2d082e0819be578ce?s=128&d=identicon&r=PG&f=1", "display_name": "Elijah Lofgren", "link": "https://stackoverflow.com/users/908677/elijah-lofgren"}, "is_accepted": true, "score": 3, "last_activity_date": 1558578871, "last_edit_date": 1558578871, "creation_date": 1556648309, "answer_id": 55926677, "question_id": 55926550, "link": "https://stackoverflow.com/questions/55926550/vue-array-prop-jsdoc-typescript-error-in-vs-code-type-arrayconstructor-is-mis/55926677#55926677", "title": "Vue Array Prop JSDoc TypeScript error in VS Code: Type &#39;ArrayConstructor&#39; is missing the following properties from type &#39;MyCustomType[]&#39;", "body": "<p>Searched some more and this time I found the answer here: <a href=\"https://blog.usejournal.com/type-vue-without-typescript-b2b49210f0b\" rel=\"nofollow noreferrer\">https://blog.usejournal.com/type-vue-without-typescript-b2b49210f0b</a></p>\n\n<p>I needed to change my snippet above to:</p>\n\n<pre><code>export default {\n  props: {\n    /** @type {{ new (): MyCustomType[] }} */\n    resultCards: Array\n  }\n};\n</code></pre>\n\n<p>Another syntax that also works (which I like better) is:</p>\n\n<pre><code>export default {\n  props: {\n    /** @type {{ new (): Array&lt;MyCustomType&gt; }} */\n    resultCards: Array\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 1369, "user_id": 908677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c371a91c7dabd2d082e0819be578ce?s=128&d=identicon&r=PG&f=1", "display_name": "Elijah Lofgren", "link": "https://stackoverflow.com/users/908677/elijah-lofgren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 1, "accepted_answer_id": 55926677, "answer_count": 1, "score": 3, "last_activity_date": 1558578871, "creation_date": 1556647674, "last_edit_date": 1556648086, "question_id": 55926550, "link": "https://stackoverflow.com/questions/55926550/vue-array-prop-jsdoc-typescript-error-in-vs-code-type-arrayconstructor-is-mis", "title": "Vue Array Prop JSDoc TypeScript error in VS Code: Type &#39;ArrayConstructor&#39; is missing the following properties from type &#39;MyCustomType[]&#39;", "body": "<p>Inspired by the \"Type checking with JSDoc\" section on \"<a href=\"https://hackernoon.com/why-i-no-longer-use-typescript-with-react-and-why-you-shouldnt-either-e744d27452b4#7fa9\" rel=\"nofollow noreferrer\">Why I no longer use TypeScript with React and why you might want to switch too</a>\", I'm using a Vue CLI created project with ES6 but no TypeScript compilation or TypeScript code. </p>\n\n<p>I turned on the \"<strong>Check JS</strong>\" setting in Visual Studio Code which allows you to type check your JS files as if they were TypeScript. Type checking is \"enabled\" for Visual Studio Code via JSDoc / @type comments.  I use the following to put my JS code in a separate file from my Vue code:</p>\n\n<pre><code>&lt;script src=\"./MyComponent.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>If I try to set the type for an Array prop on a component like this:\nMyComponent.js</p>\n\n<pre><code> /**\n * @typedef {object} MyCustomType\n * @property {number} myNumberField\n */\n\nexport default {\n  props: {\n    /** @type {Array&lt;MyCustomType&gt;} */\n    resultCards: Array\n  }\n};\n</code></pre>\n\n<p>I am getting the following Problem (red underlines) in Visual Studio Code:</p>\n\n<pre><code>Type 'ArrayConstructor' is missing the following properties \nfrom type 'MyCustomType[]': pop, push, concat, join, and 25 more.ts(2740)\n</code></pre>\n\n<p>Does anyone know of a solution for this? I would like to keep my code as JavaScript so I don't have to convert the project to TypeScript to gain type checking. If there's no solution, I may just ignore trying to actually set types for Vue props members.</p>\n\n<p>See also: <a href=\"https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript\" rel=\"nofollow noreferrer\">Microsoft/TypeScript: JSDoc support in JavaScript</a></p>\n\n<p>Edit: If was using TypeScript with Vue, I think the following link would have the answer: but I'm trying to use plain JavaScript and JSDoc and then use type checks from VSCode.</p>\n\n<p>from <a href=\"https://frontendsociety.com/using-a-typescript-interfaces-and-types-as-a-prop-type-in-vuejs-508ab3f83480\" rel=\"nofollow noreferrer\">https://frontendsociety.com/using-a-typescript-interfaces-and-types-as-a-prop-type-in-vuejs-508ab3f83480</a> </p>\n\n<blockquote>\n  <p>cast the Object as a function that returns the interface, like this:</p>\n</blockquote>\n\n<pre><code>props: {   testProp: Object as () =&gt; { test: boolean } }\n</code></pre>\n"}, {"tags": ["regex", "angular", "typescript"], "comments": [{"owner": {"reputation": 3015, "user_id": 6588498, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/436db6e50eb979e7d232f3c98f874502?s=128&d=identicon&r=PG", "display_name": "Rohit Sharma", "link": "https://stackoverflow.com/users/6588498/rohit-sharma"}, "edited": false, "score": 1, "creation_date": 1556647275, "post_id": 55926420, "comment_id": 98506508, "body": "You can check it with custom validation also instead of regex..!"}, {"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "reply_to_user": {"reputation": 3015, "user_id": 6588498, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/436db6e50eb979e7d232f3c98f874502?s=128&d=identicon&r=PG", "display_name": "Rohit Sharma", "link": "https://stackoverflow.com/users/6588498/rohit-sharma"}, "edited": false, "score": 0, "creation_date": 1556647634, "post_id": 55926420, "comment_id": 98506664, "body": "@RohitSharma I am using a dynamic form package and building a regex string is much easier from what I can tell."}, {"owner": {"reputation": 4655, "user_id": 3001856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4dc6ee03387f59dedf4531be1eff7cab?s=128&d=identicon&r=PG&f=1", "display_name": "Akxe", "link": "https://stackoverflow.com/users/3001856/akxe"}, "edited": false, "score": 1, "creation_date": 1556651307, "post_id": 55926420, "comment_id": 98508200, "body": "@CAlex Creating validator would enable for easy reusability of it, it would also create more readable code and finally split it, thus easier testing. I too love regexp but they are for matching patterns, not whole words. Just take it into consideration"}, {"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "reply_to_user": {"reputation": 4655, "user_id": 3001856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4dc6ee03387f59dedf4531be1eff7cab?s=128&d=identicon&r=PG&f=1", "display_name": "Akxe", "link": "https://stackoverflow.com/users/3001856/akxe"}, "edited": false, "score": 0, "creation_date": 1556654099, "post_id": 55926420, "comment_id": 98509288, "body": "@Akxe that is a great point. Your solution is definitely the way it should be done. It doesn&#39;t exactly answer this particular question, but I think anyone viewing this thread with a similar question should go with a custom validator."}], "answers": [{"tags": [], "owner": {"reputation": 4655, "user_id": 3001856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4dc6ee03387f59dedf4531be1eff7cab?s=128&d=identicon&r=PG&f=1", "display_name": "Akxe", "link": "https://stackoverflow.com/users/3001856/akxe"}, "is_accepted": false, "score": 1, "last_activity_date": 1556647887, "creation_date": 1556647887, "answer_id": 55926589, "question_id": 55926420, "link": "https://stackoverflow.com/questions/55926420/regex-for-not-matching-multiple-exact-strings/55926589#55926589", "title": "RegEx for not matching multiple exact strings", "body": "<p>You should not use regexp as it is quite an overkill, use <a href=\"https://angular.io/guide/form-validation#custom-validators\" rel=\"nofollow noreferrer\">custom validator</a> </p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>export function usedNames(validNames: string[]): ValidatorFn {\n  return (control: AbstractControl): {[key: string]: any} | null =&gt; {\n    if (validNames.includes(control.value)) {\n      return null;\n    } else {\n      return { usedNames: {value: control.value} };\n    }\n  };\n}\n</code></pre>\n\n<p>Usage (reactive form):</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>new FormGroup({\n  'language': new FormControl(this.hero.name, [\n    Validators.required,\n    usedNames(['typescript', 'C#', 'python']) // &lt;-- Here's how you pass in the custom validator.\n  ]),\n  // ... (other inputs)\n});\n</code></pre>\n\n<p>Usage (template form):</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>@Directive({\n  selector: '[appUsedNames]',\n  providers: [{provide: NG_VALIDATORS, useExisting: UsedNamesDirective, multi: true}]\n})\nexport class UsedNamesDirective implements Validator {\n  @Input('appUsedNames') usedNames: string;\n\n  validate(control: AbstractControl): {[key: string]: any} | null {\n    return this.usedNames ? usedNames(this.usedNames)(control) : null;\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Also, you should think about making it <code>select</code> instead of <code>input</code> or add <code>list</code> &amp; <code>&lt;datalist&gt;</code> to the input so that the user knows what he can type...</p>\n"}, {"comments": [{"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 1, "creation_date": 1556650664, "post_id": 55926675, "comment_id": 98507947, "body": "This is what I was looking for. Having a simple regex string is preferable to creating an entire custom validator in my case."}, {"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 0, "creation_date": 1556653913, "post_id": 55926675, "comment_id": 98509226, "body": "Is there a way to make this case-insensitive? I want any version of the word to fail as I am dealing with an insensitive database."}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "reply_to_user": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 1, "creation_date": 1556654141, "post_id": 55926675, "comment_id": 98509312, "body": "Yup. Just have this <code>(?i)</code> inline modifier before the regex and use this regex <code>(?i)^(?!(?:typescript|C#|python)$).+$</code> Or if you are using like this <code>&#47;^(?!(?:typescript|C#|python)$).+&#47;</code> then put <code>i</code> after last slash like this <code>&#47;^(?!(?:typescript|C#|python)$).+&#47;i</code>"}, {"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 0, "creation_date": 1556654798, "post_id": 55926675, "comment_id": 98509567, "body": "I tried setting the i flag and it does not work, that was what I tried before I commented. It fails for any entry. I also tried the (?i) method and that throws an error. in the regex page you linked, it says &quot;? The preceding token is not quantifiable&quot;"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "reply_to_user": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 1, "creation_date": 1556655054, "post_id": 55926675, "comment_id": 98509682, "body": "It should&#39;ve work though but seems like some syntax issue. Can you show some code you have by putting it in your post?"}, {"owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "edited": false, "score": 1, "creation_date": 1556656023, "post_id": 55926675, "comment_id": 98510061, "body": "I see what is happening. The property of the form builder takes in a string for the pattern, and then transforms it. So <code>(?i)^(?!(?:Blue|Gold|White)$).+$</code> in turned into <code>&#47;^(?i)^(?!(?:Blue|Gold|White)$).+$&#47;</code> which will throw a syntax error. Nothing I can do about that. Thank you for your help!"}], "tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": true, "score": 2, "last_activity_date": 1556648305, "creation_date": 1556648305, "answer_id": 55926675, "question_id": 55926420, "link": "https://stackoverflow.com/questions/55926420/regex-for-not-matching-multiple-exact-strings/55926675#55926675", "title": "RegEx for not matching multiple exact strings", "body": "<p>As you are preferring to look for a regex solution, you can use this regex to reject matches when it is exactly any one of these,</p>\n\n<pre><code>typescript\nC#\npython\n</code></pre>\n\n<p>The negative look ahead you wanted to use needs to be written like this,</p>\n\n<pre><code>^(?!(?:typescript|C#|python)$).+$\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/IxeA6r/1\" rel=\"nofollow noreferrer\">Regex Demo</a></strong></p>\n"}], "owner": {"reputation": 786, "user_id": 8384588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5rIP.png?s=128&g=1", "display_name": "CAlex", "link": "https://stackoverflow.com/users/8384588/calex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 55926675, "answer_count": 2, "score": 1, "last_activity_date": 1556686286, "creation_date": 1556647092, "last_edit_date": 1556686286, "question_id": 55926420, "link": "https://stackoverflow.com/questions/55926420/regex-for-not-matching-multiple-exact-strings", "title": "RegEx for not matching multiple exact strings", "body": "<p>I am looking to limit what a user can input into a field based on previous entries that already exist.</p>\n\n<p>For example, a user has entered these values into the database already:</p>\n\n<pre><code>[\"typescript\", \"C#\", \"python\"]\n</code></pre>\n\n<p>When they type one of these already existing values into the input field EXACTLY, I want the validator message to appear.</p>\n\n<p>I have this negative look ahead Regex from another answer I found:</p>\n\n<pre><code>^(?!.*(typescript|C#|python)).*$\n</code></pre>\n\n<p>but it will fail validation if one of those words appears anywhere in the input string (for example: \"pythons\" would fail). I just want it to fail if one of those words appear exactly in the input.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I ended up using the custom validator solution provided below. The regex solution below did also work. As discussed, validators are the correct solution for this particular issue.</p>\n"}, {"tags": ["node.js", "typescript", "swagger", "nestjs", "openapi"], "answers": [{"tags": [], "owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "is_accepted": true, "score": 2, "last_activity_date": 1556703773, "creation_date": 1556703773, "answer_id": 55934351, "question_id": 55926367, "link": "https://stackoverflow.com/questions/55926367/reusable-parameters-nestjs-openapi/55934351#55934351", "title": "Reusable parameters NestJS OpenAPI", "body": "<p>You could just create your own reusable decorator:</p>\n\n<pre><code>const ApiRoleQuery = ApiImplicitQuery({\n  name: 'role',\n  enum: ['Admin', 'Moderator', 'User'],\n});\n</code></pre>\n\n<p>and then use it in your controller:</p>\n\n<pre><code>@ApiRoleQuery\n@Get()\nasync filterByRole(@Query('role') role) {\n  // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 3198, "user_id": 122309, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7c4a502869d7e826f2cc42b5d0e52138?s=128&d=identicon&r=PG", "display_name": "nurikabe", "link": "https://stackoverflow.com/users/122309/nurikabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 55934351, "answer_count": 1, "score": 0, "last_activity_date": 1556745064, "creation_date": 1556646860, "last_edit_date": 1556745064, "question_id": 55926367, "link": "https://stackoverflow.com/questions/55926367/reusable-parameters-nestjs-openapi", "title": "Reusable parameters NestJS OpenAPI", "body": "<p>Does the <a href=\"https://docs.nestjs.com/recipes/swagger\" rel=\"nofollow noreferrer\">NestJS OpenAPI/Swagger</a> implementation support reuse of common parameters?</p>\n\n<p>This would save me from having to litter my endpoint with identical <code>@ApiImplicitQuery</code> decorators.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 1, "creation_date": 1556645060, "post_id": 55925879, "comment_id": 98505512, "body": "What version of TypeScript are you using? On 3.3.3, I don&#39;t see that error. In fact, even on 2.4.1, I don&#39;t see that error. In any case, you can always assert that the value is not null, e.g. <code>Date.now() - this.start!</code>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1556647193, "post_id": 55925879, "comment_id": 98506466, "body": "Consider editing your code to constitute a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so others can help you.  As it stands, <a href=\"https://typescript-play.js.org/#code/MYGwhgzhAEAqCmEAu0DeAoaXrLAJyQC5oA7AVwFsAjePaAH1LJBGgF4mWBudTbACzAkAJiFoAKeMQCiAN3gkkASjR9s2AJYAzaOKT8NEAHS4C7Nh3IsVGdXez7DJpPhQcAImCTwjJAPYA7uJKPPZYAL68YdBiKEgaFPDs0J7evoHB0AC00I7GpkihYdq68YnQADzQAIwADPU2atG5BvkuZpbMIEX2kdEA9P3QRiNNkeFAA\" rel=\"nofollow noreferrer\">the code in your question</a> does not show any such error."}], "answers": [{"comments": [{"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556645658, "post_id": 55926016, "comment_id": 98505758, "body": "This doesn&#39;t actually answer the question. The type declaration is fine; OP wants to know how to avoid the &quot;<i>is possibly null</i>&quot; warnings. Also <code>start?: number</code> actually means <code>start: number | undefined</code>, not <code>start: number | null</code>, which is an important distinction. (Not my downvote, BTW)"}, {"owner": {"reputation": 688, "user_id": 10802369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCJuI.jpg?s=128&g=1", "display_name": "TheBatman", "link": "https://stackoverflow.com/users/10802369/thebatman"}, "reply_to_user": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556646089, "post_id": 55926016, "comment_id": 98505955, "body": "Yes, and this is how you avoid the warnings. Either this or by suppressing them. But if you&#39;re surpressing warnings, why are you even using TS to begin with? If you want Typescript without the benefits of typescript, that already exists and its called Javascript."}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556646389, "post_id": 55926016, "comment_id": 98506100, "body": "The warning OP&#39;s talking about would be on the line <code>Date.now() - this.start</code> (you&#39;d have to remove the <code>if (this.start === null)</code> above it though to reproduce the warning because OP&#39;s code sample is likely incomplete). This answer does not address that warning at all, and would actually introduce a new warning on the line <code>this.start = null</code> because of what I mentioned in my previous comment."}], "tags": [], "owner": {"reputation": 688, "user_id": 10802369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCJuI.jpg?s=128&g=1", "display_name": "TheBatman", "link": "https://stackoverflow.com/users/10802369/thebatman"}, "is_accepted": false, "score": -1, "last_activity_date": 1556645270, "creation_date": 1556645270, "answer_id": 55926016, "question_id": 55925879, "link": "https://stackoverflow.com/questions/55925879/forcing-the-use-of-null-value/55926016#55926016", "title": "Forcing the use of null value", "body": "<p>Change <code>start: number | null</code> to <code>start?: number</code> to let the compiler know you are aware that it may sometimes be null and that you will handle it. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7475082"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556645270, "creation_date": 1556644594, "question_id": 55925879, "link": "https://stackoverflow.com/questions/55925879/forcing-the-use-of-null-value", "title": "Forcing the use of null value", "body": "<p>I want to have a variable that can be a number or null. The point of this is to reset the variable some times (by setting it null). The problem is that if I declare the variable with type <code>number | null</code>, I can't use it like a number where I know it is a number.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>class Test {\n    start: number | null = null;\n\n    handler(e: Event) {\n        if (this.start === null) {\n            this.start = Date.now();\n        }\n\n        let time = Date.now() - this.start;\n        if (time &lt; 1000) {\n            this.start = null;\n        }\n        // ...\n    }\n}\n</code></pre>\n\n<p>The compiler says that <code>this.start</code> \"is possibly null\". How can I can tell it that it's right? Otherwise, is my pattern the problem? Should I use instead a boolean property <code>hasStarted</code> so <code>start</code> is always a number (or undefined btw)?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556641762, "post_id": 55925192, "comment_id": 98503996, "body": "The <code>pipe</code> function would do that, e.g. <code>x.pipe(y)</code> is roughly equivalent to <code>y(x)</code>."}, {"owner": {"reputation": 181, "user_id": 828548, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/fd7b62f594ef48b1993f444fd016e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "snso", "link": "https://stackoverflow.com/users/828548/snso"}, "reply_to_user": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1556642272, "post_id": 55925192, "comment_id": 98504214, "body": "What the keyword for a good reading about this topic? It takes me long time to understand this"}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 1, "creation_date": 1556642891, "post_id": 55925192, "comment_id": 98504508, "body": "See <a href=\"https://github.com/ReactiveX/rxjs/blob/master/doc/pipeable-operators.md\" rel=\"nofollow noreferrer\">Pipeable operators</a>. Note that the name <code>pipe</code> itself is a reference to similar operators in a variety of functional languages, e.g. <a href=\"https://elixirschool.com/en/lessons/basics/pipe-operator/\" rel=\"nofollow noreferrer\">elixir</a>, <a href=\"https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/functions/index#function-composition-and-pipelining\" rel=\"nofollow noreferrer\">f#</a>, and as a proposed addition to <a href=\"https://github.com/tc39/proposal-pipeline-operator\" rel=\"nofollow noreferrer\">js</a>"}, {"owner": {"reputation": 109, "user_id": 6155892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a43fe6d388335f93785d54aff08f0a0?s=128&d=identicon&r=PG&f=1", "display_name": "gunjit", "link": "https://stackoverflow.com/users/6155892/gunjit"}, "edited": false, "score": 0, "creation_date": 1556643045, "post_id": 55925192, "comment_id": 98504595, "body": "Are you talking about Rxjs ? If yes then here are few sites <a href=\"https://www.learnrxjs.io/\" rel=\"nofollow noreferrer\">Learn Rxjs</a> and <a href=\"https://rxjs.dev/\" rel=\"nofollow noreferrer\">Rxjs Docs</a>"}, {"owner": {"reputation": 181, "user_id": 828548, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/fd7b62f594ef48b1993f444fd016e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "snso", "link": "https://stackoverflow.com/users/828548/snso"}, "edited": false, "score": 0, "creation_date": 1556643695, "post_id": 55925192, "comment_id": 98504910, "body": "Perhaps I am not clear how higher order function works in the first place"}], "owner": {"reputation": 181, "user_id": 828548, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/fd7b62f594ef48b1993f444fd016e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "snso", "link": "https://stackoverflow.com/users/828548/snso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1556641643, "creation_date": 1556641643, "question_id": 55925192, "link": "https://stackoverflow.com/questions/55925192/how-does-the-inner-function-parameter-is-being-passed", "title": "How does the inner function parameter is being passed?", "body": "<p>I am reading article about angular form. One of the snippet show higher order function. I am really confuse when there are parameters inside the inner function, but the argument is never passed to the function. How does the valuechanges parameter being passed actually? The article is here \nHere's <a href=\"https://netbasal.com/detect-unsaved-changes-in-angular-forms-75fd8f5f1fa6\" rel=\"nofollow noreferrer\">the link</a>!</p>\n\n<pre><code>  ngOnInit() {\n    this.isDirty$ = this.settings.valueChanges.pipe(\n      dirtyCheck(store$),\n    );\n\n  }\n</code></pre>\n\n<pre><code>export function dirtyCheck&lt;U&gt;(source: Observable&lt;U&gt;) {\n  return function&lt;T&gt;(valueChanges: Observable&lt;T&gt;): Observable&lt;boolean&gt; {\n\n    const isDirty$ = combineLatest(\n      source,\n      valueChanges,\n    ).pipe(\n      debounceTime(300),\n      map(([a, b]) =&gt; isEqual(a, b) === false),\n      startWith(false),\n    );\n\n    return isDirty$;\n  };\n}\n</code></pre>\n"}]