[{"tags": ["node.js", "typescript", "server", "jwt", "okta"], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 2530397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954d7d38c785ee15a38b58f7510031de?s=128&d=identicon&r=PG", "display_name": "Juan Castano", "link": "https://stackoverflow.com/users/2530397/juan-castano"}, "edited": false, "score": 0, "creation_date": 1605137894, "post_id": 58613434, "comment_id": 114563149, "body": "I am not sure why, perhaps the way I am handling default imports, but I had to do: new OktaJwtVerifier.default({...}); inestad of new OktaJwVerifier({...}); That is in addition to your answer."}], "tags": [], "owner": {"reputation": 31, "user_id": 4551879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715915323a78218860b41a4c8e487b26?s=128&d=identicon&r=PG", "display_name": "Nathan Stewart", "link": "https://stackoverflow.com/users/4551879/nathan-stewart"}, "is_accepted": false, "score": 3, "last_activity_date": 1572373784, "creation_date": 1572373784, "answer_id": 58613434, "question_id": 56979943, "link": "https://stackoverflow.com/questions/56979943/okta-jwt-verifier-not-working-jwt-verifier-1-oktajwtverifier-is-not-a-constru/58613434#58613434", "title": "Okta Jwt-Verifier not working - &quot;jwt_verifier_1.OktaJwtVerifier is not a constructor&quot;", "body": "<p>The correct way to import this is to use: </p>\n\n<pre><code>import * as OktaJwtVerifier from '@okta/jwt-verifier';\n</code></pre>\n\n<p>Also, the types are not properly declared for TypeScript, yet.  You will need to create a global.d.ts at the root of the project, if you have not already done so, that contains:</p>\n\n<pre><code>declare module \"@okta/jwt-verifier\";\n</code></pre>\n\n<p>The same method can be used for @okta/okta-sdk-node-js.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14608678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcbad5ecfb48f7f957325a394e549859?s=128&d=identicon&r=PG&f=1", "display_name": "GrimKo", "link": "https://stackoverflow.com/users/14608678/grimko"}, "is_accepted": false, "score": 0, "last_activity_date": 1606860920, "creation_date": 1606860920, "answer_id": 65099356, "question_id": 56979943, "link": "https://stackoverflow.com/questions/56979943/okta-jwt-verifier-not-working-jwt-verifier-1-oktajwtverifier-is-not-a-constru/65099356#65099356", "title": "Okta Jwt-Verifier not working - &quot;jwt_verifier_1.OktaJwtVerifier is not a constructor&quot;", "body": "<p>Better yet, try this import instead of the wildcard:</p>\n<pre class=\"lang-js prettyprint-override\"><code>import OktaJwtVerifier from '@okta/jwt-verifier';\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10408223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o5GIxcoLEuM/AAAAAAAAAAI/AAAAAAAAAEU/5b0kHOpoLNU/photo.jpg?sz=128", "display_name": "James Matthias How", "link": "https://stackoverflow.com/users/10408223/james-matthias-how"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1606860920, "creation_date": 1562802366, "last_edit_date": 1562855135, "question_id": 56979943, "link": "https://stackoverflow.com/questions/56979943/okta-jwt-verifier-not-working-jwt-verifier-1-oktajwtverifier-is-not-a-constru", "title": "Okta Jwt-Verifier not working - &quot;jwt_verifier_1.OktaJwtVerifier is not a constructor&quot;", "body": "<p>In my SPA, after compiling my TypeScript, then starting the server, I get:<br>\n\"TypeError: jwt_verifier_1.OktaJwtVerifier is not a constructor\"</p>\n\n<p>I've installed the module for @okta/jwt-verifier and npm installed to make sure the module is there.</p>\n\n<p>This is my auth.ts file with the import statement commented out (as I don't think this is the correct way to get around the module issue):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\nimport { Request, Response, NextFunction } from 'express';\n// import { OktaJwtVerifier } from '@okta/jwt-verifier';\n\nconst OktaJwtVerifier = require('okta/jwt-verifier');\n\nconst oktaJwtVerifier = new OktaJwtVerifier({\n    clientId: '{{clientID}}',\n    issuer: '{{OktaURL}}'\n});\n\nexport async function oktaAuth(req:Request, res:Response, next:NextFunction) {\n    try {\n        const token = (req as any).token;\n        if (!token) {\n            return res.status(401).send('Not Authorised');\n        }\n        const jwt = await oktaJwtVerifier.verifyAccessToken(token);\n        req.user = {\n            uid: jwt.claims.uid,\n            email: jwt.claims.sub\n        };\n        next();\n    }\n    catch (err) {\n        return res.status(401).send(err.message);\n    }\n}\n\n</code></pre>\n\n<p>And this is the JS file after it compiles:</p>\n\n<pre><code>\n\"use strict\";\nvar __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst jwt_verifier_1 = require(\"@okta/jwt-verifier\");\n// const OktaJwtVerifier = require('okta/jwt-verifier');\nconst oktaJwtVerifier = new jwt_verifier_1.OktaJwtVerifier({\n    clientId: '0oavj2s8pN39hTh0v356',\n    issuer: 'https://dev-214594.okta.com/oauth2/default'\n});\nfunction oktaAuth(req, res, next) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const token = req.token;\n            if (!token) {\n                return res.status(401).send('Not Authorised');\n            }\n            const jwt = yield oktaJwtVerifier.verifyAccessToken(token);\n            req.user = {\n                uid: jwt.claims.uid,\n                email: jwt.claims.sub\n            };\n            next();\n        }\n        catch (err) {\n            return res.status(401).send(err.message);\n        }\n    });\n}\nexports.oktaAuth = oktaAuth;\n\n</code></pre>\n\n<p>The server should start without any errors.</p>\n"}, {"tags": ["javascript", "node.js", "angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562804513, "post_id": 56979928, "comment_id": 100496053, "body": "<code>return this.functionOne().then(this.functionTwo)</code> or <code>return this.functionOne().then(this.functionTwo())</code>? Do we need add <code>()</code> at the end of <code>functionTwo</code>?"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562805382, "post_id": 56979928, "comment_id": 100496218, "body": "@Bigeyes you have two choices: <code>return this.functionOne().then(this.functionTwo.bind(this))</code> or <code>return this.functionOne().then(() =&gt; this.functionTwo())</code>. Your version won&#39;t work as you expect"}, {"owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562805988, "post_id": 56979928, "comment_id": 100496316, "body": "But I guess something wrong...in <code>private asyncServiceCall()</code>, <code>this.functionOne().then(()=&gt;this.functionTwo());    }</code> is grayed. The compiler complains Unreachable code detected."}, {"owner": {"reputation": 162935, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "reply_to_user": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562806359, "post_id": 56979928, "comment_id": 100496383, "body": "@Bigeyes must be unreachable somewhere down in those other functions"}, {"owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562849619, "post_id": 56979928, "comment_id": 100513961, "body": "Still not working. The third function is always running before the others. Perhaps I need to change it as promise as well"}], "tags": [], "owner": {"reputation": 162935, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "is_accepted": true, "score": 1, "last_activity_date": 1562805725, "last_edit_date": 1562805725, "creation_date": 1562802306, "answer_id": 56979928, "question_id": 56979868, "link": "https://stackoverflow.com/questions/56979868/mix-synchronous-and-asynchronous-by-promise-then-is-not-working/56979928#56979928", "title": "Mix synchronous and asynchronous by Promise.then is not working", "body": "<p>You are missing an important part of calling promises inside <code>then()</code> ... you need to <code>return</code> those promises or the <code>then()</code> will resolve immediately and go to the next then() in the chain. That's why functionThree is firing before the asynchronous promise functions resolve</p>\n\n<pre><code>private loadingData() {\n   var promise = new Promise&lt;any&gt;((resolve) =&gt; \n   {\n       resolve();\n   });\n   promise.then(() =&gt; {\n      // return the promise this function returns\n      return this.asyncServiceCall();\n     // ^^^^\n   })\n    // this then() won't fire until asyncServiceCall resolves in previous then()\n   .then((resultFromPriorThen) =&gt; this.syncFunctionThree())\n}\n</code></pre>\n\n<hr>\n\n<p>Now you don't really need this first promise in <code>loadingData()</code> because you already have a promise to work with returned by <code>asyncServiceCall()</code> and can simplify it to:</p>\n\n<pre><code>private loadingData(): Promise&lt;any&gt; {      \n   return this.asyncServiceCall().then(()=&gt;this.syncFunctionThree());\n}\n</code></pre>\n\n<p>Now to fix <code>asyncServiceCall()</code> the same way:</p>\n\n<pre><code>private asyncServiceCall(): Promise&lt;any&gt; {   \n   return this.functionOne().then(()=&gt;this.functionTwo());   \n}\n</code></pre>\n\n<hr>\n\n<p>Final note: Need to add  a <code>catch()</code> in <code>loadingData()</code> in case one of the asynchronous operations has a problem</p>\n"}, {"tags": [], "owner": {"reputation": 821, "user_id": 1150810, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34878798aa5ee197ea4ea680dbfbf38e?s=128&d=identicon&r=PG", "display_name": "udnisap", "link": "https://stackoverflow.com/users/1150810/udnisap"}, "is_accepted": false, "score": 1, "last_activity_date": 1562804058, "creation_date": 1562804058, "answer_id": 56980122, "question_id": 56979868, "link": "https://stackoverflow.com/questions/56979868/mix-synchronous-and-asynchronous-by-promise-then-is-not-working/56980122#56980122", "title": "Mix synchronous and asynchronous by Promise.then is not working", "body": "<pre><code>private functionOne() {\n   return new Promise((resolve) =&gt; {\n    this.service['user'].get().subscribe(resolve);\n  });\n}\n\nprivate functionTwo() {\n   return new Promise((resolve) =&gt; {\n    this.service['name'].get().subscribe(resolve);\n  });\n}\n\nprivate loadingData() {\n   Promise.all([functionOne(), functionTwo()]).then(([user, name]) =&gt; {\n      this.user['d'] = user;\n      this.name['d'] = name;\n   }).then(() =&gt; this.syncFunctionThree())\n};\n</code></pre>\n\n<p>By looking at the method signature if the <code>this.service['user'].get()</code> is an rx observable. you can use <code>this.service['user'].get().toPromise()</code> to get the promise directly. if the <code>this.service['user'].get()</code> has multiple values try <code>this.service['user'].get().pipe(first())</code> instead</p>\n"}], "owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56979928, "answer_count": 2, "score": 0, "last_activity_date": 1562806766, "creation_date": 1562801706, "last_edit_date": 1562806766, "question_id": 56979868, "link": "https://stackoverflow.com/questions/56979868/mix-synchronous-and-asynchronous-by-promise-then-is-not-working", "title": "Mix synchronous and asynchronous by Promise.then is not working", "body": "<p>Here is my code:</p>\n\n<pre><code>private loadingData() {\n   var promise = new Promise&lt;any&gt;((resolve) =&gt; \n   {\n       resolve();\n   });\n   promise.then(() =&gt; {\n       this.asyncServiceCall();\n   })\n   .then(() =&gt; this.syncFunctionThree())\n};\n</code></pre>\n\n<p>The asynchronous method <code>asyncServiceCall</code> actually returns a Promise.</p>\n\n<pre><code>private asyncServiceCall(): Promise&lt;any&gt; {\n    return new Promise((resolve) = &gt; {\n        resolve();\n    }).then(() =&gt; {\n       this.functionOne()\n       })\n      .then(() =&gt; {\n       this.functionTwo();\n    });\n}\n</code></pre>\n\n<p>Okay, let's look at <code>functionOne</code> and <code>functionTwo</code>. They are both returning Promise.</p>\n\n<pre><code>private functionOne() {\n   return new Promise((resolve) =&gt; {\n    this.user['load'] = true;\n    this.service['user'].get().subscribe(d =&gt; \n  {\n     this.user['d'] = d;\n  },\n  error =&gt; console.error(error),\n  () =&gt; {\n     this.role['load']=false;\n   });\n  resolve();\n});\n}\n\nprivate functionTwo() {\n   return new Promise((resolve) =&gt; {\n    this.service['name'].get().subscribe(d =&gt; \n  {\n     this.name['d'] = d;\n  },\n  resolve();\n});\n}\n</code></pre>\n\n<p>The third method <code>syncFunctionThree</code> will use the data <code>this.user['d']</code> and <code>this.name['d']</code> to have some business logic. So I want to call <code>functionOne</code> and <code>functionTwo</code> first then call <code>syncFunctionThree</code>.</p>\n\n<p>By <a href=\"https://stackoverflow.com/questions/38796828/should-synchronous-code-called-by-promise-then-create-a-new-promise\">the accepted answer without creating new Promise</a>, I don't get lucky. I found that the \n<code>syncFunctionThree</code> was called before the asynchronous methods.</p>\n\n<p>So help me.</p>\n"}, {"tags": ["typescript", "babeljs", "transpiler", "babel-node"], "answers": [{"tags": [], "owner": {"reputation": 2256, "user_id": 1406616, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a3dba266598bcbd35be8c84a760f3908?s=128&d=identicon&r=PG", "display_name": "JoelParke", "link": "https://stackoverflow.com/users/1406616/joelparke"}, "is_accepted": false, "score": 0, "last_activity_date": 1562992050, "creation_date": 1562992050, "answer_id": 57016134, "question_id": 56979699, "link": "https://stackoverflow.com/questions/56979699/load-node-babel-problem-that-appeared-with-very-small-changes-in-my-typescript-c/57016134#57016134", "title": "Load/node-babel problem that appeared with VERY small changes in my typescript code?", "body": "<p>I discovered after much head scratching and frustration, that I had to remove any  indirection in the export of classes.  For example for list, I had a list/index.ts:</p>\n\n<pre><code>-export * from './list.model';\n-export * from './list.listData';\n</code></pre>\n\n<p>And then would use imports such as:</p>\n\n<pre><code>import { List, ListData } from '../list';\n</code></pre>\n\n<p>But this type of indirection would in translation using babel, to create modules that would crash on load!! with strange errors.  </p>\n\n<p>When I changed the import above to:</p>\n\n<pre><code>import { List } from '.../list/list.model';\nimport { ListData } from '.../list/listData';\n</code></pre>\n\n<p>All would compile and run without and problems. </p>\n\n<p>I hope this helps others!!!</p>\n"}], "owner": {"reputation": 2256, "user_id": 1406616, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a3dba266598bcbd35be8c84a760f3908?s=128&d=identicon&r=PG", "display_name": "JoelParke", "link": "https://stackoverflow.com/users/1406616/joelparke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562992224, "creation_date": 1562800217, "last_edit_date": 1562992224, "question_id": 56979699, "link": "https://stackoverflow.com/questions/56979699/load-node-babel-problem-that-appeared-with-very-small-changes-in-my-typescript-c", "title": "Load/node-babel problem that appeared with VERY small changes in my typescript code?", "body": "<p>I have a large project that works fine.\nToday I realized that I needed to make a change in one method in one class.\nSo I changed one method in Task.destroy() by adding just one line:</p>\n\n<pre><code>public destroy(clientId: string, userData: UserData, taskData: TaskData): Promise&lt;boolean&gt; {\n    const tasks = Task.getTasks();\n  new --&gt; const lists = List.getLists();\n\n    assert(Model.isDataOnly(taskData));\n    // remove this task from all the lists....\n  }\n</code></pre>\n\n<p>Before this change I my server runs as expected.\nAfter the breaking change, when I run my server I see:</p>\n\n<pre><code>NODE_ENV: ====================[ development: laptop.dynazu.com ]====================\nDOMAIN:https://laptop.dynazu.com\nDebugger listening on ws://127.0.0.1:9229/cb0c2453-7991-4e7e-8cc1-c81afa519198\nFor help, see: https://nodejs.org/en/docs/inspector\n/home/joel/workspace/Tracker/server/api/user/user.controller.js:75\nvar users = _user2.User.getUsers();\n                        ^\n\nTypeError: Cannot read property 'getUsers' of undefined\n    at Object.&lt;anonymous&gt; (user.controller.ts:34:20)\n    at Module._compile (internal/modules/cjs/loader.js:759:30)\n    at Module._compile (/home/joel/workspace/Tracker/node_modules/pirates/lib/index.js:99:24)\n    at Module._extensions..js (internal/modules/cjs/loader.js:770:10)\n    at Object.newLoader [as .js] (/home/joel/workspace/Tracker/node_modules/pirates/lib/index.js:104:7)\n    at Module.load (internal/modules/cjs/loader.js:628:32)\n    at Function.Module._load (internal/modules/cjs/loader.js:555:12)\n    at Module.require (internal/modules/cjs/loader.js:666:19)\n    at require (internal/modules/cjs/helpers.js:16:16)\n    at Object.&lt;anonymous&gt; (index.ts:3:1)\n    at Module._compile (internal/modules/cjs/loader.js:759:30)\n    at Module._compile (/home/joel/workspace/Tracker/node_modules/pirates/lib/index.js:99:24)\n    at Module._extensions..js (internal/modules/cjs/loader.js:770:10)\n    at Object.newLoader [as .js] (/home/joel/workspace/Tracker/node_modules/pirates/lib/index.js:104:7)\n    at Module.load (internal/modules/cjs/loader.js:628:32)\n    at Function.Module._load (internal/modules/cjs/loader.js:555:12)\n</code></pre>\n\n<p>At first I thought perhaps there was an issue with ng or a build tool. However when I did a comparison to the generated code (js, etc.) there were no changes except the tiny expected ones.</p>\n\n<p>And looking at the error and stack trace, it seems like this may be a load problem???  Has anyone seen anything like this?</p>\n\n<p>user.controller.ts:34 is: </p>\n\n<pre><code>const users = User.getUsers();\n</code></pre>\n\n<p>and User.getUsers is very simple: </p>\n\n<pre><code>  public static getUsers(): monk.ICollection&lt;UserData&gt; {\n    log('getUsers()...', db);\n    return db.get('users');\n  }\n</code></pre>\n\n<p>which clearly is never reached. Hence it seems to be a load problem? perhaps node-babel??  </p>\n\n<p>Is there a way to test this without node-babel?</p>\n\n<hr>\n\n<p>In a sense I answered how to use babel instead of node-babel.<br>\nI did this by duplicating the relevant part of my code that was already converted to E6 code with typescript. I then did </p>\n\n<pre><code> node_modules/.bin/bower src -d output\n</code></pre>\n\n<p>And then did </p>\n\n<pre><code>node output/app.js \n</code></pre>\n\n<p>hoping that I would find success.  Instead I saw:</p>\n\n<pre><code>    NODE_ENV: ====================[ development: laptop.dynazu.com ]====================\n    DOMAIN:https://laptop.dynazu.com\n    /home/joel/workspace/Tracker/server/output/api/user/user.controller.js:75\n    var users = _user2.User.getUsers();\n                            ^\n\n    TypeError: Cannot read property 'getUsers' of undefined\n        at Object.&lt;anonymous&gt; (/home/joel/workspace/Tracker/server/output/api/user/user.controller.js:75:25)\n        at Module._compile (internal/modules/cjs/loader.js:759:30)\n        at Object.Module._extensions..js (internal/modules/cjs/loader.js:770:10)\n        at Module.load (internal/modules/cjs/loader.js:628:32)\n        at Function.Module._load (internal/modules/cjs/loader.js:555:12)\n        at Module.require (internal/modules/cjs/loader.js:666:19)\n        at require (internal/modules/cjs/helpers.js:16:16)\n        at Object.&lt;anonymous&gt; (/home/joel/workspace/Tracker/server/output/api/user/index.js:9:42)\n        at Module._compile (internal/modules/cjs/loader.js:759:30)\n        at Object.Module._extensions..js (internal/modules/cjs/loader.js:770:10)\n        at Module.load (internal/modules/cjs/loader.js:628:32)\n        at Function.Module._load (internal/modules/cjs/loader.js:555:12)\n        at Module.require (internal/modules/cjs/loader.js:666:19)\n        at require (internal/modules/cjs/helpers.js:16:16)\n        at Object.&lt;anonymous&gt; (/home/joel/workspace/Tracker/server/output/auth/auth.service.js:18:14)\n        at Module._compile (internal/modules/cjs/loader.js:759:30)\n</code></pre>\n\n<p>exactly as before!.  </p>\n\n<p>At least now I have the fully translated js and will be able to determine what is seeming to break in the babel translation! (I hope :-).</p>\n\n<p>THE PROBLEM is worse than expected.  Looking at the generated code, there don't seem to be ANY issues.  It seems the load itself is breaking, as I am now using babel directly and running 'node app.js'...\nWe will see....</p>\n\n<p>The load itself throws an error and deletes the module, hence I see this error that means nothing about 'TypeError: Cannot read property 'getUsers' of undefined' which is a red herring...  I am digging deeper... but a bit clueless at this point.</p>\n"}, {"tags": ["javascript", "typescript", "google-maps", "google-maps-api-3"], "answers": [{"comments": [{"owner": {"reputation": 19805, "user_id": 1238965, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9tqVh.jpg?s=128&g=1", "display_name": "MrUpsidown", "link": "https://stackoverflow.com/users/1238965/mrupsidown"}, "edited": false, "score": 1, "creation_date": 1562833677, "post_id": 56979690, "comment_id": 100504514, "body": "You should check the issue tracker for an existing bug or file your own if you don&#39;t find one: <a href=\"https://issuetracker.google.com/issues?q=componentid:188853\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues?q=componentid:188853</a>"}], "tags": [], "owner": {"reputation": 2050, "user_id": 319066, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b9159532a572c80a3be9e85d75c9af1f?s=128&d=identicon&r=PG", "display_name": "phsource", "link": "https://stackoverflow.com/users/319066/phsource"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800105, "creation_date": 1562800105, "answer_id": 56979690, "question_id": 56979689, "link": "https://stackoverflow.com/questions/56979689/infinite-loop-with-google-maps-js-api-place-details-call-open-now/56979690#56979690", "title": "Infinite loop with Google Maps JS API place details call &quot;open_now&quot;", "body": "<p>This seems to be an issue with the <code>util.js</code> included in version 37. You can fix this by changing your Google Maps API version string to <code>v=quarterly</code> or 36.</p>\n\n<p><a href=\"https://maps.googleapis.com/maps/api/js?v=quarterly&amp;key=...&amp;libraries=geometry,drawing,places\" rel=\"nofollow noreferrer\">https://maps.googleapis.com/maps/api/js?v=quarterly&amp;key=...&amp;libraries=geometry,drawing,places</a></p>\n\n<p>(replace those libraries with your own)</p>\n\n<p>For more details, see: <a href=\"https://developers.google.com/maps/documentation/javascript/versions\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/documentation/javascript/versions</a></p>\n"}, {"tags": [], "owner": {"reputation": 649, "user_id": 11732708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5ABT.jpg?s=128&g=1", "display_name": "Angelica", "link": "https://stackoverflow.com/users/11732708/angelica"}, "is_accepted": true, "score": 1, "last_activity_date": 1563320877, "creation_date": 1563320877, "answer_id": 57066798, "question_id": 56979689, "link": "https://stackoverflow.com/questions/56979689/infinite-loop-with-google-maps-js-api-place-details-call-open-now/57066798#57066798", "title": "Infinite loop with Google Maps JS API place details call &quot;open_now&quot;", "body": "<p>This issue has recently been fixed. This was also reported in Google's Public issue tracker here: <a href=\"https://issuetracker.google.com/issues/137213536\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/137213536</a></p>\n\n<p>The issue was due to the recent Maps JavaScript API version 3.37 rollover which was already fixed by Google engineers as per the public bug. </p>\n\n<p>Please note that switching to the older versions is a temporary workaround, and will no longer work once the older versions are fully deprecated. If the error with the new version is still reproducible on your end, you can comment on the issue link above for the engineers to further investigate.</p>\n"}], "owner": {"reputation": 2050, "user_id": 319066, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b9159532a572c80a3be9e85d75c9af1f?s=128&d=identicon&r=PG", "display_name": "phsource", "link": "https://stackoverflow.com/users/319066/phsource"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 57066798, "answer_count": 2, "score": -1, "last_activity_date": 1563320877, "creation_date": 1562800105, "question_id": 56979689, "link": "https://stackoverflow.com/questions/56979689/infinite-loop-with-google-maps-js-api-place-details-call-open-now", "title": "Infinite loop with Google Maps JS API place details call &quot;open_now&quot;", "body": "<p>I'm using the Google Maps Javascript API to get Place Details. As of yesterday, I've been getting this error:</p>\n\n<pre><code>RangeError: Maximum call stack size exceeded\n    at Object._.Xm (common.js:1)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n</code></pre>\n\n<p>My code (in Typescript) is:</p>\n\n<pre><code>async function getGooglePlaceDetails(placeId: string, sessionToken?: string) {\n  const googleMapsClient = createClient({\n    key: config.googleMapsServerAPIKey,\n    Promise,\n  });\n\n  const response = await googleMapsClient\n    .place({ placeid: placeId, sessiontoken: sessionToken })\n    .asPromise();\n\n  return response;\n}\n</code></pre>\n\n<p>This fails for certain places like <code>ChIJ71yZMAvSCl8RY1u0MpwXJXA</code> (\"Houheikyou hot springs\").</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["node.js", "typescript", "botframework", "facebook-messenger-bot", "ngrok"], "comments": [{"owner": {"reputation": 5186, "user_id": 3962636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c30d90a87f337bdfe5d28e3212ff087?s=128&d=identicon&r=PG", "display_name": "Steven Kanberg", "link": "https://stackoverflow.com/users/3962636/steven-kanberg"}, "edited": false, "score": 0, "creation_date": 1563265628, "post_id": 56979665, "comment_id": 100632374, "body": "Three questions: 1) What is the ngrok command you are using to start up ngrok? 2) Have you replaced the messaging endpoint in your Azure bot settings with the ngrok endpoint (e.g. <a href=\"https://8823f95d.ngrok.io/api/messages\" rel=\"nofollow noreferrer\">8823f95d.ngrok.io/api/messages</a>)? 3) Have you included the appId and appPassword from your Azure bot in your local bot and in Emulator?"}, {"owner": {"reputation": 1862, "user_id": 783364, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/cjW8m.jpg?s=128&g=1", "display_name": "Thiago C. S Ventura", "link": "https://stackoverflow.com/users/783364/thiago-c-s-ventura"}, "reply_to_user": {"reputation": 5186, "user_id": 3962636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c30d90a87f337bdfe5d28e3212ff087?s=128&d=identicon&r=PG", "display_name": "Steven Kanberg", "link": "https://stackoverflow.com/users/3962636/steven-kanberg"}, "edited": false, "score": 0, "creation_date": 1565197414, "post_id": 56979665, "comment_id": 101280005, "body": "Hi, sorry for my late reply. 1) ./ngrok http 3978 -host-header=&quot;localhost:3978&quot; 2) yes (im using HTTPS) 3) yes, I have a app.bot file where I have an appId and appPassword"}, {"owner": {"reputation": 5186, "user_id": 3962636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c30d90a87f337bdfe5d28e3212ff087?s=128&d=identicon&r=PG", "display_name": "Steven Kanberg", "link": "https://stackoverflow.com/users/3962636/steven-kanberg"}, "edited": false, "score": 0, "creation_date": 1565304553, "post_id": 56979665, "comment_id": 101322258, "body": "Side note: I would suggest you migrate away from the .bot file as it is deprecated due to difficulties with its management and integration. Instructions on how to do so can be found <a href=\"https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-deploy-az-cli?view=azure-bot-service-4.0&amp;tabs=newrg\" rel=\"nofollow noreferrer\">here</a>. It&#39;s unlikely, but something in there <i>could</i> be blocking."}, {"owner": {"reputation": 5186, "user_id": 3962636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c30d90a87f337bdfe5d28e3212ff087?s=128&d=identicon&r=PG", "display_name": "Steven Kanberg", "link": "https://stackoverflow.com/users/3962636/steven-kanberg"}, "edited": false, "score": 0, "creation_date": 1565304676, "post_id": 56979665, "comment_id": 101322282, "body": "Are you able to post complete code for your index and your mainBot.js files (hiding any keys/passwords)?"}, {"owner": {"reputation": 1862, "user_id": 783364, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/cjW8m.jpg?s=128&g=1", "display_name": "Thiago C. S Ventura", "link": "https://stackoverflow.com/users/783364/thiago-c-s-ventura"}, "reply_to_user": {"reputation": 5186, "user_id": 3962636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c30d90a87f337bdfe5d28e3212ff087?s=128&d=identicon&r=PG", "display_name": "Steven Kanberg", "link": "https://stackoverflow.com/users/3962636/steven-kanberg"}, "edited": false, "score": 1, "creation_date": 1565348447, "post_id": 56979665, "comment_id": 101335210, "body": "I think I found the issue. It&#39;s working now, the only thing i&#39;ve changed was the facebook app callback link. Before I was using the ngrok link as a callback after changing to the azure callback link everything is working fine. Does it make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 1862, "user_id": 783364, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/cjW8m.jpg?s=128&g=1", "display_name": "Thiago C. S Ventura", "link": "https://stackoverflow.com/users/783364/thiago-c-s-ventura"}, "is_accepted": true, "score": 1, "last_activity_date": 1565434364, "creation_date": 1565434364, "answer_id": 57441470, "question_id": 56979665, "link": "https://stackoverflow.com/questions/56979665/botframeworkadapter-missing-activity-type-debug-messenger-locally/57441470#57441470", "title": "BotFrameworkAdapter missing activity type - Debug Messenger locally", "body": "<p>Ok. The problem was the callback link on Facebook's App.</p>\n\n<p>Since I have a verification token on my code, as you can see below, I was pointing the facebook callback URL to my ngrok link and the verification was working fine. But it looks like to debug on azure configurations you must use the callback link that azure provides to you. Something like \"<a href=\"https://facebook.botframework.com/api\" rel=\"nofollow noreferrer\">https://facebook.botframework.com/api</a>...\" that you can find under channels / facebook.</p>\n\n<p>Once I set the facebook APP to use azure callback link everything is working fine.</p>\n\n<pre><code>server.post('/api/messages', (req, res) =&gt; {\n  adapter.processActivity(req, res, async turnContext =&gt; {\n    await bot.run(turnContext);\n  });\n});\n\nserver.get('/api/messages', (req, res) =&gt; {\n  const mode = req.query['hub.mode'];\n  const token = req.query['hub.verify_token'];\n  const challenge = req.query['hub.challenge'];\n\n  if (mode &amp;&amp; token) {\n    if (mode === 'subscribe' &amp;&amp; token === VERIFY_TOKEN) {\n      // Responds with the challenge token from the request\n      console.log('WEBHOOK_VERIFIED', challenge);\n      res.status(200);\n      res.end(challenge);\n    } else {\n      res.send(403);\n    }\n  }\n});\n</code></pre>\n"}], "owner": {"reputation": 1862, "user_id": 783364, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/cjW8m.jpg?s=128&g=1", "display_name": "Thiago C. S Ventura", "link": "https://stackoverflow.com/users/783364/thiago-c-s-ventura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 1, "accepted_answer_id": 57441470, "answer_count": 1, "score": 1, "last_activity_date": 1565434364, "creation_date": 1562799839, "question_id": 56979665, "link": "https://stackoverflow.com/questions/56979665/botframeworkadapter-missing-activity-type-debug-messenger-locally", "title": "BotFrameworkAdapter missing activity type - Debug Messenger locally", "body": "<p>I've been working in my bot locally, using bot emulator. All seems to work fine. Now is time to integrate with Messenger and I'm trying to run it locally too.</p>\n\n<p>From Messenger to my local bot through ngrok.</p>\n\n<p>I'm basically trying to follow this link <a href=\"https://blog.botframework.com/2017/10/19/debug-channel-locally-using-ngrok/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>When I send a message from my messenger it seems to take a while to reach my endpoint (and breakpoint) but when it does I'm getting the following error:</p>\n\n<pre><code>/api/messages - POST\nindex.ts:72\nBotFrameworkAdapter.processActivity(): 400 ERROR - Error: BotFrameworkAdapter.parseRequest(): missing activity type.\n\n UnhandledPromiseRejectionWarning: Error: Error: BotFrameworkAdapter.parseRequest(): missing activity type.\n    at BotFrameworkAdapter.processActivity (.../node_modules/botbuilder/src/botFrameworkAdapter.ts:608:19)\n</code></pre>\n\n<p>On my ngrok console I can see a 400 request and sometimes 502 the same on facebook APP log errors.</p>\n\n<p>Here is the point where this is going:</p>\n\n<pre><code>// using restify\nserver.post('/api/messages', (req, res) =&gt; {\n  console.log('/api/messages - POST');\n  adapter.processActivity(req, res, async turnContext =&gt; {\n    await bot.run(turnContext);\n  });\n});\n</code></pre>\n\n<p>Basically the bot does not work at all but I did a test using botkit adapter to connect to facebook messenger and it seems to almost work in most cases apart from special messages like Prompt Choice, Carousel and HeroCards. Basically it only works with simple text.</p>\n\n<p>BotFrameworkAdapter is supposed to translate fine. Any idea on what's going on?\nNot sure if I'm missing something.</p>\n"}, {"tags": ["typescript", "generics"], "comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1562795834, "post_id": 56979144, "comment_id": 100494198, "body": "use <code>&lt;T extends ExtraModels&gt;</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11767245"}, "edited": false, "score": 0, "creation_date": 1562796104, "post_id": 56979174, "comment_id": 100494276, "body": "Oh I see! I was understanding this in the wrong way. thank you, it&#39;s working now :D."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 3, "last_activity_date": 1562795847, "creation_date": 1562795847, "answer_id": 56979174, "question_id": 56979144, "link": "https://stackoverflow.com/questions/56979144/trying-to-understand-typescript-generics/56979174#56979174", "title": "Trying to understand Typescript generics", "body": "<p>It is valid but it does not do what you expect it to. <code>= ExtraModels</code> means <code>T</code> will be <code>ExtraModels</code> if it is not possible to infer <code>T</code> from arguments. But <code>T</code> can be any type, including one that does not extend <code>ExtraModels</code> (this is why the compiler doesn't let you access properties of <code>ExtraModels</code>)</p>\n\n<p>You want to constrain <code>T</code> to be a type that extends <code>ExtraModels</code>. The syntax for that is <code>T extends ExtraModels</code>. Since <code>T</code> must extend <code>ExtraModels</code> typescript will let you access properties of <code>ExtraModels</code>.</p>\n\n<pre><code>const write = async &lt;T extends  ExtraModels&gt;(data: T[]) =&gt; {\n  console.log(data[0].unknown)\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11767245"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562795847, "creation_date": 1562795644, "question_id": 56979144, "link": "https://stackoverflow.com/questions/56979144/trying-to-understand-typescript-generics", "title": "Trying to understand Typescript generics", "body": "<p>I'm have the following function:</p>\n\n<pre><code>interface ExtraModels extends Model {\n  unknown: string\n}\n\nconst write = async (data: ExtraModels[]) =&gt; {\n  console.log(data[0].unknown)\n}\n</code></pre>\n\n<p>Which is working. Now I want to change with:</p>\n\n<pre><code>const write = async &lt;T = ExtraModels&gt;(data: T[]) =&gt; {\n  console.log(data[0].unknown)\n}\n</code></pre>\n\n<p>But it doesn't compile with the error:</p>\n\n<p>Property 'unknown' does not exist on type 'T'.ts(2339)</p>\n\n<p>I don't understand what I'm doing it wrong here. From what I've studied this is valid.</p>\n"}, {"tags": ["javascript", "laravel", "typescript", "vue.js", "laravel-blade"], "comments": [{"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 3, "creation_date": 1562797499, "post_id": 56979123, "comment_id": 100494618, "body": "You seem to have a prop and a data property with the same name (<code>files</code>) on the same component."}, {"owner": {"reputation": 13599, "user_id": 1739852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f706bb09511d498a29b2c2264dc37f9f?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1739852/james"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562800539, "post_id": 56979123, "comment_id": 100495347, "body": "Surely Vue throws an error when this is rendered, due to the point @skirtle raises?"}], "owner": {"reputation": 11, "user_id": 5374244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca92cab14552db1e7afb548a4383089c?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Pablo Pastene", "link": "https://stackoverflow.com/users/5374244/pedro-pablo-pastene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562818718, "creation_date": 1562795546, "question_id": 56979123, "link": "https://stackoverflow.com/questions/56979123/have-2-lists-in-vuejs-with-delete-properties-one-list-works-the-other-doesnt", "title": "Have 2 lists in VUEJS with delete properties, one list works, the other doesnt", "body": "<p>I've made a component in VueJS that render two lists, one which is empty and the user can press a button to add an item, the other is generated from an array via props in laravel. Both lists have a delete button to delete the desired item. The problem is that the list where is populated from the array it's items can not be deleted</p>\n\n<pre><code>import './bootstrap'\nimport Vue from 'vue'\n\nVue.component('admin-cms-document',{\n  template:\n  `&lt;div&gt;\n    &lt;div v-if=\"files\"&gt;\n    &lt;ul class=\"list-unstyled\"&gt;\n      &lt;li v-for=\"(file, index) in files\"&gt;\n        &lt;p&gt;{{file.id}}&lt;/p&gt;\n        &lt;button type=\"button\" @click=\"deleteFile(index)\"&gt;Delete&lt;/button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div v-else&gt;\n      &lt;ul class=\"list-unstyled\"&gt;\n        &lt;li v-for=\"(input, index) in inputs\"&gt;\n          &lt;input type=\"file\" name=\"docs[]\" @change=\"input.one\"&gt;\n          &lt;button type=\"button\" @click=\"deleteNewFile(index)\"&gt;Delete&lt;/button&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;button type=\"button\" @click=\"addRow\"&gt;Add&lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;`,\n\n  props: {\n    files: Array\n  },\n\n  data: function() {\n    return {\n      inputs: [],\n      files: []\n    }\n  },\n\n  methods: {\n    addRow() {\n      this.inputs.push({\n        one: '',\n      })\n    },\n    deleteNewFile(index) {\n      this.inputs.splice(index,1)\n    },\n    deleteFile(index) {\n      this.files.splice(index, 1)\n    }\n  }\n\n});\n\nvar app = new Vue({\n  el: '#app',\n\n  data: {\n    inputs: [],\n  },\n\n  methods: {\n    addRow() {\n      this.inputs.push({\n        one: '',\n      })\n    },\n    deleteNewFile(index) {\n      this.inputs.splice(index,1);\n    },\n    deleteFile(index) {\n      this.files.splice(index, 1)\n    }\n  }\n})\n</code></pre>\n"}, {"tags": ["typescript", "react-router", "react-router-dom"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 10372185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4790b7a9684cd88ebffac101697b700?s=128&d=identicon&r=PG&f=1", "display_name": "P.Gracia", "link": "https://stackoverflow.com/users/10372185/p-gracia"}, "edited": false, "score": 1, "creation_date": 1562826616, "post_id": 56980445, "comment_id": 100501040, "body": "Wow @Fyodor, that is the best answer I could be expecting, thank you a lot!"}, {"owner": {"reputation": 1422, "user_id": 728013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cze8m.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/728013/cameron"}, "edited": false, "score": 0, "creation_date": 1570744097, "post_id": 56980445, "comment_id": 103020813, "body": "You wouldn&#39;t believe how many convoluted answers exist for this very question, and this one is the most concise and well formatted, @Fyodor is the winner"}], "tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": true, "score": 33, "last_activity_date": 1562807593, "creation_date": 1562807593, "answer_id": 56980445, "question_id": 56979012, "link": "https://stackoverflow.com/questions/56979012/issue-with-types-when-using-withrouter-and-typescript/56980445#56980445", "title": "issue with types when using &quot;withRouter&quot; and Typescript", "body": "<p>As of <a href=\"https://github.com/ReactTraining/react-router/blob/e634f0bad7796d128a4c4e2c4678487dd7256be2/packages/react-router/docs/api/withRouter.md\" rel=\"noreferrer\">documentation</a>, <code>withRouter</code> will pass updated <code>match</code>, <code>location</code>, and <code>history</code> props to the wrapped component whenever it renders. </p>\n\n<p>So <code>MenuItem</code> component should have props to receive them. For now, <code>MenuItem</code> component has props of type <code>ISection</code> which does not include router props.</p>\n\n<p>The easiest way to add router props is to intersect <code>ISection</code> with <code>RouteComponentProps</code>.</p>\n\n<pre><code>import { withRouter, RouteComponentProps } from \"react-router-dom\";\n\n// ...\nclass MenuItem extends React.Component&lt;ISection &amp; RouteComponentProps&gt; {\n</code></pre>\n\n<p>Full code is</p>\n\n<pre><code>import * as React from 'react';\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\n\ninterface ISection {\n    id: number;\n    title: string;\n    imageUrl: string;\n    size: string;\n}\n\nclass MenuItem extends React.Component&lt;ISection &amp; RouteComponentProps&gt; {\n    render() {\n        return (\n            &lt;div className={`${this.props.size} menu-item`}&gt;\n                &lt;div\n                    className=\"background-image\"\n                    style={{ backgroundImage: `url(${this.props.imageUrl})` }}\n                /&gt;\n                &lt;div className=\"content\"&gt;\n                    &lt;h1 className=\"title\"&gt;{this.props.title}&lt;/h1&gt;\n                    &lt;span className=\"subtitle\"&gt;some subtitle&lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        );\n    }\n}\n\nexport default withRouter(MenuItem);\n</code></pre>\n\n<p>And answers to your questions</p>\n\n<ol>\n<li><p>Why does it say \"type 'typeof MenuItem'\"? Shouldn't it just say the type of 'MenuItem' instead of the function to obtain the type?</p>\n\n<p>Error arisen from types incompatibility. <code>MenuItem</code> is class, not type. To get type of <code>MenuItem</code> you should use <code>typeof MenuItem</code>. So <code>typeof MenuItem</code> is type. And compiler says correctly, \"type <code>typeof MenuItem</code>\".</p></li>\n<li><p>Is it necessary for withRouter to work with class components, or does it also work on functional components?</p>\n\n<p>It is allowed to work with class component and with functional component.</p>\n\n<p>This is how your component will look like if implemented as functional</p>\n\n<pre><code>const Cmp1: React.FunctionComponent&lt;ISection &amp; RouteComponentProps&gt; = (props) =&gt; {\n    return (\n        &lt;div className={`${props.size} menu-item`}&gt;\n            &lt;div\n                className=\"background-image\"\n                style={{ backgroundImage: `url(${props.imageUrl})` }}\n            /&gt;\n            &lt;div className=\"content\"&gt;\n                &lt;h1 className=\"title\"&gt;{props.title}&lt;/h1&gt;\n                &lt;span className=\"subtitle\"&gt;some subtitle&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    );\n}\n\nconst WrappedCmp = withRouter(Cmp1);\n</code></pre></li>\n<li><p>Do I need to <code>connect()</code> something, or map Props onto State? If so, why?</p>\n\n<p>No, this is not strict requirement. <code>connect</code> is part of Redux, so if you use Redux you may connect. Here is <a href=\"https://github.com/ReactTraining/react-router/blob/e634f0bad7796d128a4c4e2c4678487dd7256be2/packages/react-router/docs/api/withRouter.md#important-note\" rel=\"noreferrer\">documentation</a> of how to use <code>withRouter</code> with <code>connect</code>. But again, it is not required.</p></li>\n<li><p>And lastly, how can I fix this?</p>\n\n<p>Already answered. See above :-)</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 349, "user_id": 12954021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h058L.jpg?s=128&g=1", "display_name": "A Webb", "link": "https://stackoverflow.com/users/12954021/a-webb"}, "is_accepted": false, "score": 0, "last_activity_date": 1609258494, "creation_date": 1609258494, "answer_id": 65495217, "question_id": 56979012, "link": "https://stackoverflow.com/questions/56979012/issue-with-types-when-using-withrouter-and-typescript/65495217#65495217", "title": "issue with types when using &quot;withRouter&quot; and Typescript", "body": "<p>For anyone coming here for <strong>Next.js</strong> intersect your props interface alongside WithRouterProps like so..</p>\n<p><code>import { WithRouterProps } from &quot;next/dist/client/with-router&quot;;</code></p>\n<p><code>class MenuItem extends React.Component&lt;IProps &amp; WithRouterProps&gt;</code></p>\n"}], "owner": {"reputation": 119, "user_id": 10372185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4790b7a9684cd88ebffac101697b700?s=128&d=identicon&r=PG&f=1", "display_name": "P.Gracia", "link": "https://stackoverflow.com/users/10372185/p-gracia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5324, "favorite_count": 1, "accepted_answer_id": 56980445, "answer_count": 2, "score": 10, "last_activity_date": 1610520785, "creation_date": 1562794799, "last_edit_date": 1562794999, "question_id": 56979012, "link": "https://stackoverflow.com/questions/56979012/issue-with-types-when-using-withrouter-and-typescript", "title": "issue with types when using &quot;withRouter&quot; and Typescript", "body": "<p>I'm trying to get some more deep knowledge and practice into React+Typescript, and I've come across this typing error when using <code>withRouter</code> from <code>react-router-dom</code>. </p>\n\n<p>My code snippet is very simple, and I've tried finding out people with the same issue, and some of the answers pointed to an error with an upgrade (but they were from 2016, so...) and some of them were using a <code>connect()</code> statement which I am not making use of (which lead to the question, \"Am I doing this wrong because of not using it?\"). I see that some of those suggestions also involved mapping Props to State, which I haven't done (nor seen) until now. I hope someone has some suggestions on what am I missing and what else I should be looking at.</p>\n\n<p>The code is:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\ninterface ISection {\n  id: number;\n  title: string;\n  imageUrl: string;\n  size: string;\n}\n\nclass MenuItem extends React.Component&lt;ISection&gt; {\n  render() {\n    return (\n      &lt;div className={`${this.props.size} menu-item`}&gt;\n        &lt;div\n          className=\"background-image\"\n          style={{ backgroundImage: `url(${this.props.imageUrl})` }}\n        /&gt;\n        &lt;div className=\"content\"&gt;\n          &lt;h1 className=\"title\"&gt;{this.props.title}&lt;/h1&gt;\n          &lt;span className=\"subtitle\"&gt;some subtitle&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default withRouter(MenuItem);\n</code></pre>\n\n<p>What I would be expecting from here is to work smoothly (I have to say that I tried first with a functional component since I don't have any state, but all the solutions I saw involved a class component, so I moved it into it), but instead I'm getting the following error on the <code>MenuItem</code> in the last line:</p>\n\n<pre><code>Argument of type 'typeof MenuItem' is not assignable to parameter of type 'ComponentClass&lt;RouteComponentProps&lt;any, StaticContext, any&gt;, any&gt; | FunctionComponent&lt;RouteComponentProps&lt;any, StaticContext, any&gt;&gt; | (FunctionComponent&lt;RouteComponentProps&lt;any, StaticContext, any&gt;&gt; &amp; ComponentClass&lt;...&gt;) | (ComponentClass&lt;...&gt; &amp; FunctionComponent&lt;...&gt;)'.\n  Type 'typeof MenuItem' is not assignable to type 'ComponentClass&lt;RouteComponentProps&lt;any, StaticContext, any&gt;, any&gt;'.\n    Types of parameters 'props' and 'props' are incompatible.\n      Type 'RouteComponentProps&lt;any, StaticContext, any&gt;' is missing the following properties from type 'Readonly&lt;ISection&gt;': id, title, imageUrl, sizets(2345)\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li><p>Why does it say \"type 'typeof MenuItem'\"? Shouldn't it just say the type of 'MenuItem' instead of the function to obtain the type?</p></li>\n<li><p>Is it necessary for withRouter to work with class components, or does it also work on functional components?</p></li>\n<li><p>Do I need to <code>connect()</code> something, or map Props onto State? If so, why?</p></li>\n<li><p>And lastly, how can I fix this?</p></li>\n</ol>\n"}, {"tags": ["php", "angular", "typescript"], "comments": [{"owner": {"reputation": 100, "user_id": 8901518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecc57d31bdae60cae40d2fcd3fa0fad1?s=128&d=identicon&r=PG", "display_name": "G1N", "link": "https://stackoverflow.com/users/8901518/g1n"}, "edited": false, "score": 0, "creation_date": 1562797070, "post_id": 56978908, "comment_id": 100494515, "body": "Does your browser console show any errors after you submit the form? What exactly flashes, is it the the data that&#39;s supposed to appear in your <code>ngFor</code> loop? Could you also provide sample <code>console.log</code> output for both the <code>createuser()</code> and <code>getUserDetail()</code> functions (add a <code>console.log</code> in the subscribe function for each call in your login component file)"}, {"owner": {"reputation": 39, "user_id": 8104791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8737d47d4f01b78411ecddf97c0bb1b0?s=128&d=identicon&r=PG&f=1", "display_name": "omarhabeh", "link": "https://stackoverflow.com/users/8104791/omarhabeh"}, "reply_to_user": {"reputation": 100, "user_id": 8901518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecc57d31bdae60cae40d2fcd3fa0fad1?s=128&d=identicon&r=PG", "display_name": "G1N", "link": "https://stackoverflow.com/users/8901518/g1n"}, "edited": false, "score": 0, "creation_date": 1562797943, "post_id": 56978908, "comment_id": 100494747, "body": "yes the data must appear in ngFor disappeared and flashes on re-submitting  .and i did an console.log in the subscribe function and for createuser() it prints null ."}, {"owner": {"reputation": 39, "user_id": 8104791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8737d47d4f01b78411ecddf97c0bb1b0?s=128&d=identicon&r=PG&f=1", "display_name": "omarhabeh", "link": "https://stackoverflow.com/users/8104791/omarhabeh"}, "reply_to_user": {"reputation": 100, "user_id": 8901518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecc57d31bdae60cae40d2fcd3fa0fad1?s=128&d=identicon&r=PG", "display_name": "G1N", "link": "https://stackoverflow.com/users/8901518/g1n"}, "edited": false, "score": 0, "creation_date": 1562798358, "post_id": 56978908, "comment_id": 100494857, "body": "thanks for pointing this out , i took the condition out of subscribe function for createuser() and now it works fine ."}], "owner": {"reputation": 39, "user_id": 8104791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8737d47d4f01b78411ecddf97c0bb1b0?s=128&d=identicon&r=PG&f=1", "display_name": "omarhabeh", "link": "https://stackoverflow.com/users/8104791/omarhabeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562794236, "creation_date": 1562794236, "question_id": 56978908, "link": "https://stackoverflow.com/questions/56978908/angular-8-elements-disappearing-after-post-request", "title": "angular 8 elements disappearing after post request", "body": "<p>I'm a beginner in angular , i was trying to establish a connection with database using php as backend programming language , it was working fine and the elements were showing from database but when i inserted them to the database , it does work and they are inserted to the database but my elements disappear when the form is submitted and when the form is submitted again they flash for seconds .</p>\n\n<p><strong>MY HTML CODE</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form (submit)=\"loginUser($event)\"&gt;\n    &lt;input type=\"text\" placeholder=\"User name\" id=\"name\" &gt;\n    &lt;input type=\"password\" placeholder=\"password\" id=\"pass\"&gt;\n    &lt;button type=\"submit\" &gt;Log in&lt;/button&gt;\n    {{name}}\n    &lt;/form&gt;\n    &lt;ul *ngFor=\"let item of datas \"&gt;\n        &lt;li&gt;{{item.name}} {{item.pass}}&lt;/li&gt;\n    &lt;/ul&gt;\n</code></pre>\n\n<p><strong>MY LOGIN.COMPONENT FILE</strong></p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { iEmployee } from '../../empolyee';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor( private Auth:AuthService) { }\n  public datas;\n\n  ngOnInit() {\n    this.Auth.getUserDetail().subscribe(data=&gt; this.datas=data);\n  }\n\n  loginUser(event: { preventDefault: () =&gt; void; target: any; }){\n      event.preventDefault();\n    const target = event.target;\n    const name=target.querySelector('#name').value;\n    const pass=target.querySelector('#pass').value;\n    this.Auth.createuser(name,pass).subscribe(data=&gt;this.datas=data);\n    this.Auth.getUserDetail().subscribe(data=&gt; this.datas=data);\n\n  }\n}\n\n</code></pre>\n\n<p><strong>MY AUTH.SERVICE FILE</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { iEmployee } from '../empolyee';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class AuthService {\n\nconstructor(private http:HttpClient) { }\nprivate url : string='http://localhost:81/example/Angular/php/display.php';\nprivate url2:string='http://localhost:81/example/Angular/php/addNew.php';\ngetUserDetail() {\nreturn this.http.get(this.url)          \n}\ncreateuser(name , pass) {\n  return this.http.post(this.url2,{name,pass},{\n    headers : {\n        'Content-Type' : 'application/x-www-form-urlencoded; charset=UTF-8'\n    }\n});\n}\n}\n\n</code></pre>\n\n<p><strong>MY ADDNEW.PHP FILE</strong></p>\n\n<pre><code>&lt;?php \nheader('Access-Control-Allow-Origin: *'); \n\ninclude 'connection.php';\n$data = json_decode(file_get_contents(\"php://input\"),true);\n$name= $data['name'];\n$pass= $data['pass'];\n$sql=\"insert into test(name,pass) values ('$name','$pass')\";\n$result = mysqli_query($con, $sql);  \n\n\n?&gt; \n</code></pre>\n"}, {"tags": ["node.js", "mongodb", "typescript", "docker", "alpine"], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562805226, "post_id": 56978992, "comment_id": 100496191, "body": "So the reason I do another install in the final container, is that I am not sure if the install in the test container is compatible with the final container (I am not sure if some library installs dependencies specific to that architecture).  The first image is just Node, the second is Node Alpine.  I am not sure if there is some difference that will hurt me later on if I were to copy the modules and transpiled code from the <code>test</code> container instead of installing them and transpiling them on the final Alpine container.  That is my root question here."}, {"owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "reply_to_user": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562805939, "post_id": 56978992, "comment_id": 100496308, "body": "I see!  You can build on alpine node copy the node modules, copy to a regular node with mongo and then copy to alpine node again as the final image. If anything fails it will fail on your test. But your build and prod would be fine.  As for differences in alpine-node  The main caveat to note is that it does use musl libc instead of glibc and friends, so certain software might run into issues depending on the depth of their libc requirements. However, most software doesn&#39;t have an issue with this."}, {"owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "reply_to_user": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562805980, "post_id": 56978992, "comment_id": 100496315, "body": "tl;dr; unless you use very specific os things, alpine should be perfectly fine to use."}, {"owner": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562806343, "post_id": 56978992, "comment_id": 100496379, "body": "one final thought, would this be valid as well (pseudo docker) --&gt;   in Node container install, build, run tests --&gt;   in Node Alpine container install, build --&gt;    in Final Node Alpine container copy transpiled js files as well as modules from previous alpine --&gt;  --&gt; done or is there a specific reason you build on alpine then test that in node (not alpine)?"}, {"owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "reply_to_user": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562806435, "post_id": 56978992, "comment_id": 100496397, "body": "I thought you said you needed some mongodb requirement that was not available in alpine. if you can test everything on alpine, you most definitely should test it in alpine."}, {"owner": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562806668, "post_id": 56978992, "comment_id": 100496441, "body": "I can&#39;t test everything in alpine, in the above, only the first container (the non-alpine one) runs the tests"}, {"owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "reply_to_user": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "edited": false, "score": 0, "creation_date": 1562806919, "post_id": 56978992, "comment_id": 100496494, "body": "You can use node for testing and building and alpine for running if you want to.  If your code is not using any OS Specific modules that node and alpine node has a difference in, there is no reason this should not work. You can also see the differences in musl and glibc here <a href=\"https://www.etalabs.net/compare_libcs.html\" rel=\"nofollow noreferrer\">etalabs.net/compare_libcs.html</a>"}], "tags": [], "owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "is_accepted": true, "score": 2, "last_activity_date": 1562794679, "creation_date": 1562794679, "answer_id": 56978992, "question_id": 56978851, "link": "https://stackoverflow.com/questions/56978851/node-docker-build-and-production-container-best-practices/56978992#56978992", "title": "Node Docker Build and Production Container Best Practices", "body": "<p>Few points</p>\n\n<ol>\n<li>If you are building twice, what is the point of the multistage build. I don't do much <code>node</code> stuff. But the reason you would want a multistage build is that you build you application with <code>npm build</code> that take those artifacts and copy them to the image and serve/run that in some way. In <code>go</code> world it would be something like building in a builder stage then just running the binary. </li>\n<li>You always want to have the most changing things on the top of the union file system. What it means is that instead of copying the entire application code and running <code>npm install</code>, you should copy just <code>package.json</code> and run <code>npm install</code> on it. That way docker can cache the result of npm install and save on downloading the node files if nothing has changed on top. You application code changes way more than the <code>package.json</code></li>\n<li>On the second stage same idea. If you have to - copy <code>package.json</code> first and run <code>npm install</code> then copy the rest of the stuff. </li>\n<li>You can have more stages if you want. The name of the game is to get the leanest and cleanest final stage image. Thats the one that goes on registry. Everything else can be and should be removed.</li>\n</ol>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 56978992, "answer_count": 1, "score": 0, "last_activity_date": 1562794679, "creation_date": 1562793847, "question_id": 56978851, "link": "https://stackoverflow.com/questions/56978851/node-docker-build-and-production-container-best-practices", "title": "Node Docker Build and Production Container Best Practices", "body": "<p>I have a Node project that uses MongoDB.  To for automated testing, we use <a href=\"https://github.com/nodkz/mongodb-memory-server\" rel=\"nofollow noreferrer\">Mongo Memory Server</a></p>\n\n<p>For Mongo Memory Server, Alpine is not supported my Mongo, so it can't run on Alpine images</p>\n\n<p>From the docs:</p>\n\n<blockquote>\n  <p>There isn't currently an official MongoDB release for alpine linux. This means that we can't pull binaries for Alpine (or any other platform that isn't officially supported by MongoDB), but you can use a Docker image that already has mongod built in and then set the MONGOMS_SYSTEM_BINARY variable to point at that binary. This should allow you to use mongodb-memory-server on any system on which you can install mongod.</p>\n</blockquote>\n\n<p>I can run all of my tests in a Docker container using a Node base image, but for production I want to use an Alpine image to save on memory.</p>\n\n<p>so my Dockerfile looks something like this.</p>\n\n<pre><code>FROM node:x.x.x as test\n\nWORKDIR /app\n\nCOPY . /app\n\nnpm install\nnpm run build # we use Typescript, this runs the transpilation\nnpm test # runs our automated tests\n\nFROM node:x.x.x-alpine\n\nWORKDIR /app\n\nCOPY --from=test /app/src /app/src\nCOPY --from=test /app/package.json /app/package.json\nCOPY --from=test /app/package-lock.json /app/package-lock.json\nCOPY --from=test /app/config /app/config\nCOPY --from=test /app/scripts /app/scripts\n\nRUN npm install --production\n\nRUN npm run build\n\n</code></pre>\n\n<p>Doing smoke testing, the resulting Alpine image seems to work okay.  I assume it is safe because I install the modules in the alpine image itself.</p>\n\n<p>I am wondering, is this the best practice?  Is there a better way to do something like this?  That is, for Node specifically, have a larger test container and a small production container safely.</p>\n"}, {"tags": ["node.js", "typescript", "express", "deployment"], "answers": [{"comments": [{"owner": {"reputation": 26660, "user_id": 2454790, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7mPA5.png?s=128&g=1", "display_name": "BENARD Patrick", "link": "https://stackoverflow.com/users/2454790/benard-patrick"}, "reply_to_user": {"reputation": 5834, "user_id": 3451964, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e694631237d8a033bdaf67847dc37b82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/3451964/david"}, "edited": false, "score": 0, "creation_date": 1562794682, "post_id": 56978894, "comment_id": 100493886, "body": "@David Ok, so can you try with updating your code with this one please."}], "tags": [], "owner": {"reputation": 26660, "user_id": 2454790, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7mPA5.png?s=128&g=1", "display_name": "BENARD Patrick", "link": "https://stackoverflow.com/users/2454790/benard-patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1562794657, "last_edit_date": 1562794657, "creation_date": 1562794152, "answer_id": 56978894, "question_id": 56978809, "link": "https://stackoverflow.com/questions/56978809/nodejs-deploy-deploying-express-code-get-class-module-not-found/56978894#56978894", "title": "Nodejs deploy: Deploying express code get class module not found", "body": "<pre><code>// datacontroller file\nclass DataController {\n\n}\n\nmodule.exports = DataController;\n</code></pre>\n\n<hr>\n\n<pre><code>// app.js file\nconst DataController = require(\"./public/ap\u00ec/controllers/data-controller\");\n\nlet dataController = new DataController();\ndataController = dataController.bootstrap();\n</code></pre>\n"}], "owner": {"reputation": 5834, "user_id": 3451964, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e694631237d8a033bdaf67847dc37b82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/3451964/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562794657, "creation_date": 1562793636, "last_edit_date": 1562794372, "question_id": 56978809, "link": "https://stackoverflow.com/questions/56978809/nodejs-deploy-deploying-express-code-get-class-module-not-found", "title": "Nodejs deploy: Deploying express code get class module not found", "body": "<p>after compiling typescripts files, I get js files in the next estructure:</p>\n\n<pre><code>main directory\n    public\n        api\n            controllers\n                data-controller.js\n\n    app.js\n    package.json\n    ...\n</code></pre>\n\n<p>app.json code is: </p>\n\n<pre><code>Object.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nconst express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst data_controller_1 = require(\"./public/ap\u00ec/controllers/data-controller\");\nconst cors = require(\"cors\");\n\nlet dataController = data_controller_1.DataController.bootstrap();\nconst options = {\n    allowedHeaders: [\"Origin\", \"X-Requested-With\", \"Content-Type\", \"Accept\", \"X-Access-Token\"],\n    credentials: true,\n    methods: \"GET,HEAD,OPTIONS,PUT,PATCH,POST,DELETE\",\n    origin: \"http://127.0.0.1:3000\",\n    preflightContinue: false\n};\n\nconst main = express();\nmain.get('/', function (req, res) {\n    res.send('hello world11');\n});\nmain.use(cors());\nmain.options(\"*\", cors(options));\nmain.use('/data', dataController.GetRouter());\nmain.use('/', function (req, res) {\n    res.send('hello world11');\n});\nmain.use(bodyParser.json());\nmain.use(bodyParser.urlencoded({ extended: false }));\n//main.listen(5000);\nmain.listen(process.env.PORT || 3000, function () {\n    console.log(\"SUCCESSFULLY\");\n});\n</code></pre>\n\n<p>package.json is: </p>\n\n<pre><code>{\n  \"name\": \"sb-admin-bs4-angular-8\",\n  \"version\": \"7.0.0\",\n  \"license\": \"Apache\",\n  \"scripts\": {\n    \"ng\": \"ng\",\n    \"start\": \"node --harmony dist/src/server.js\",\n    \"build\": \"ng build --configuration=production\",\n    \"test\": \"ng test\",\n    \"test-ci\": \"TEST_CI=true ng test\",\n    \"e2e\": \"ng e2e\",\n    \"web\": \"npm run server &amp;&amp; npm run css &amp;&amp; npm run html &amp;&amp; npm run scss &amp;&amp; npm run ico\",\n    \"ico\": \"copyfiles src/**/*.ico dist\",\n    \"html\": \"copyfiles src/**/*.html dist\",\n    \"css\": \"copyfiles src/**/*.css dist\",\n    \"server\": \"copyfiles src/**/server.js dist\",\n    \"scss\": \"copyfiles src/**/*.scss dist\",\n    \"clean\": \"npm cache clean --force\",\n    \"lint\": \"ng lint\"\n  },\n  \"main\": \"./dist/server.js\",\n  \"private\": true,\n  \"dependencies\": {\n    \"@types/cors\": \"^2.8.5\",\n    \"body-parser\": \"^1.19.0\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^8.0.0\",\n    \"express\": \"^4.17.1\",\n    \"mongoose\": \"^5.6.4\"\n  },\n  \"devDependencies\": {\n    \"@angular-devkit/build-angular\": \"~0.800.0\",\n    \"@angular/language-service\": \"8.0.0\",\n    \"@types/jasmine\": \"2.8.9\",\n    \"@types/jasminewd2\": \"2.0.5\",\n    \"@types/node\": \"10.12.2\",\n    \"codelyzer\": \"^5.0.1\",\n    \"jasmine-core\": \"3.3.0\",\n    \"jasmine-spec-reporter\": \"4.2.1\",\n    \"karma\": \"^4.1.0\",\n    \"karma-chrome-launcher\": \"2.2.0\",\n    \"karma-cli\": \"1.0.1\",\n    \"karma-coverage-istanbul-reporter\": \"2.0.4\",\n    \"karma-jasmine\": \"1.1.2\",\n    \"karma-jasmine-html-reporter\": \"1.4.0\",\n    \"protractor\": \"5.4.1\",\n    \"ts-node\": \"7.0.1\",\n    \"tslint\": \"5.11.0\"\n  },\n  \"engines\": {\n    \"node\": \"~10.16.0\",\n    \"npm\": \"~6.4.1\"\n  }\n}\n</code></pre>\n\n<p>data-controller code is:</p>\n\n<pre><code>class DataController {\n\n}\nexports.DataController = DataController;\n</code></pre>\n\n<p>I get the error when I execute node app.js => <strong>Error: Cannot find module './public/ap\u00ec/controllers/data-controller'</strong> </p>\n\n<p>Why Do I get it? which solution do I have?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 2, "creation_date": 1562793639, "post_id": 56978782, "comment_id": 100493563, "body": "<code>getFirstColumnName</code> method does not have a return. <code>query</code> method does not have a return either."}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 0, "creation_date": 1562793760, "post_id": 56978782, "comment_id": 100493604, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14220321/how-do-i-return-the-response-from-an-asynchronous-call\">How do I return the response from an asynchronous call?</a>"}], "owner": {"reputation": 301, "user_id": 10335960, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kQNDEVXzT4c/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOxjefWJAVlY0YTYQnh9nx1NFU1vw/mo/photo.jpg?sz=128", "display_name": "Michael Mitch", "link": "https://stackoverflow.com/users/10335960/michael-mitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562804462, "creation_date": 1562793517, "last_edit_date": 1562804462, "question_id": 56978782, "link": "https://stackoverflow.com/questions/56978782/typescript-return-inner-class-does-not-work", "title": "TypeScript: return inner class does not work", "body": "<p>The return in the query method does not work. The console.log(result) shows me the right value. \nThe console.log() in the getFirstColumnName() should get the result from the query.</p>\n\n<p>What is wrong?</p>\n\n<pre><code>var mysql = require('mysql');\n\nvar con = mysql.createConnection({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"spacerowa44\",\n  database: \"m3pilot\"\n});\n\nexport class mySQL{\n    connect(){\n        con.connect(function(err) {\n            if (err) throw err;\n            console.log(\"database connected...\");\n        });\n    }\n\n    private getFirstColumnName(table) : any{\n        var sql = \"SELECT COLUMN_NAME FROM information_schema.COLUMNS WHERE TABLE_NAME = '\"+table+\"' AND ORDINAL_POSITION = 1;\";\n        var result = this.query(sql);\n        console.log();\n        setTimeout(() =&gt; {\n            console.log(\"1\");\n            console.log(this.query(sql) );\n            return \"conditionId\";//result[0].COLUMN_NAME;\n        },200);\n    }\n\n    private query(sql) : any{\n        con.query(sql, function (err, result, fields) {\n            if (err) throw err;\n            console.log(result);\n            return result;\n        });\n    }\n}\n\n</code></pre>\n"}, {"tags": ["typescript", "unit-testing", "mocking", "repository", "typeorm"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11551568, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157286282874176/picture?type=large", "display_name": "Romain Lenzotti", "link": "https://stackoverflow.com/users/11551568/romain-lenzotti"}, "is_accepted": false, "score": 0, "last_activity_date": 1565542921, "creation_date": 1565542921, "answer_id": 57451970, "question_id": 56978318, "link": "https://stackoverflow.com/questions/56978318/how-to-mock-typeorm-repository/57451970#57451970", "title": "How to mock typeORM repository", "body": "<p>I don't if your problem is solved but here a solution:</p>\n\n<pre><code>import {TestContext} from \"@tsed/testing\";\nimport {TypeORMService} from \"@tsed/typeorm\";\nimport {expect} from \"chai\";\nimport * as Sinon from \"sinon\";\nimport {AccountService} from \"./AccountService\";\nimport {DbAccount} from \"./DbAccount\";\nimport {DbAddress} from \"./DbAddress\";\n\ndescribe(\"AccountService\", () =&gt; {\n  before(() =&gt; TestContext.create());\n  after(() =&gt; TestContext.reset());\n  describe(\"afterRoutesInit()\", () =&gt; {\n    it(\"should initialise repository when afterRoutesInit event is emitted\", () =&gt; {\n      // GIVEN\n      const connection = {\n        getRepository: Sinon.stub()\n      };\n      const typeORMService = {\n        get: Sinon.stub().returns(connection)\n      };\n      const dbAccountRepository = {name: \"dbAccountRepository\"};\n      const dbAddressRepository = {name: \"dbAddressRepository\"};\n\n      connection.getRepository\n        .withArgs(DbAccount).returns(dbAccountRepository);\n      connection.getRepository\n        .withArgs(DbAddress).returns(dbAddressRepository);\n\n      const service = TestContext.invoke&lt;AccountService&gt;(AccountService, [\n        {\n          provide: TypeORMService,\n          use: typeORMService\n        }\n      ]);\n\n      // WHEN\n      service.$afterRoutesInit();\n\n      // THEN\n      expect(typeORMService.get).to.have.been.calledWithExactly(\"default\");\n      expect(service.repository).to.deep.eq(dbAccountRepository);\n      expect(service.addressRepository).to.deep.eq(dbAddressRepository);\n    });\n  });\n});\n</code></pre>\n\n<p>Note: I use chai and sinon to write unit test :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7958734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3BeQH.jpg?s=128&g=1", "display_name": "k1ch", "link": "https://stackoverflow.com/users/7958734/k1ch"}, "is_accepted": false, "score": 0, "last_activity_date": 1597812210, "creation_date": 1597812210, "answer_id": 63480106, "question_id": 56978318, "link": "https://stackoverflow.com/questions/56978318/how-to-mock-typeorm-repository/63480106#63480106", "title": "How to mock typeORM repository", "body": "<p>This is how I do it.</p>\n<pre><code>import sinon from 'sinon';\nimport {ConnectionManager, Repository, Connection} from 'typeorm';\n\ndescribe('Auth service Unit tests:', () =&gt; {\n   const sandbox = sinon.createSandbox()\n   beforeEach(() =&gt; {\n    sandbox.stub(ConnectionManager.prototype, 'get').returns({\n      getRepository: sandbox.stub().returns(sinon.createStubInstance(Repository))\n    } as unknown as Connection)\n   })\n\n   afterEach(() =&gt; {\n     sandbox.restore();\n   })\n\n   it('login() with valid username and password', (done) =&gt; {\n      // Test here \n   }) \n})\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11765382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qgsnB7MmWKo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfzicXEOlkRoFHNzHPOu6jrajbM-A/photo.jpg?sz=128", "display_name": "user11765382", "link": "https://stackoverflow.com/users/11765382/user11765382"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3318, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1597812210, "creation_date": 1562791202, "last_edit_date": 1562942400, "question_id": 56978318, "link": "https://stackoverflow.com/questions/56978318/how-to-mock-typeorm-repository", "title": "How to mock typeORM repository", "body": "<p>I would like to write some tests and mock the typeORM repository.\n Tried few things but coudn't resolve it... (like the .. @InjectRepository)... Any thoughts?</p>\n\n<pre><code>import { AfterRoutesInit, Service } from '@tsed/common';\nimport { TypeORMService } from '@tsed/typeorm';\nimport { Connection, Repository } from 'typeorm';\nimport { DbAccount } from '../entity/DbAccount';\nimport { DbAddress } from '../entity/DbAddress';\nimport { Account } from '../models/Account';\nimport { Address } from '../models/address';\nimport { Pageable } from '../models/api_common/Pageable';\n\n@Service()\nexport default class AccountService implements AfterRoutesInit {\n    private repository: Repository&lt;DbAccount&gt;;\n    private addressRepository: Repository&lt;DbAddress&gt;;\n\n    constructor(private typeORMService: TypeORMService) { }\n\n    $afterRoutesInit(): void | Promise&lt;any&gt; {\n        const connection: Connection = this.typeORMService.get('default');\n        this.repository = connection.getRepository(DbAccount);\n        this.addressRepository = connection.getRepository(DbAddress);\n    }\n\n    async delete(accountId: string): Promise&lt;void&gt; {\n        await this.repository.delete(accountId);\n\n        return;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 750, "user_id": 9562368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4509dc630f70e51ccfdfde9a846fbc?s=128&d=identicon&r=PG&f=1", "display_name": "jank", "link": "https://stackoverflow.com/users/9562368/jank"}, "edited": false, "score": 0, "creation_date": 1562828297, "post_id": 56978296, "comment_id": 100501889, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12709074/how-do-you-explicitly-set-a-new-property-on-window-in-typescript\">custom window property</a>"}], "owner": {"reputation": 3801, "user_id": 2670121, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Pi4yD.jpg?s=128&g=1", "display_name": "Alendorff", "link": "https://stackoverflow.com/users/2670121/alendorff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562827822, "creation_date": 1562791133, "last_edit_date": 1562827822, "question_id": 56978296, "link": "https://stackoverflow.com/questions/56978296/how-to-describe-custom-property-in-window-object-with-imported-type-in-typescrip", "title": "How to describe custom property in window object with imported type in typescript 3.x", "body": "<p>How can I declare (\"typescript\": \"3.x.x\" ) that inside window object, I have some variable with some type?</p>\n\n<p>E.g. I have <code>window.foo = { bar: 'baz' }</code>, how can I declare it? Old way of doing that was:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>declare global {\n  interface Window {\n    foo: { bar: string }\n  }\n}\n</code></pre>\n\n<p>And it produces this error</p>\n\n<blockquote>\n  <p>TS2669: Augmentations for the global scope can only be directly nested in external modules or ambient module declarations.</p>\n</blockquote>\n\n<p>It looks like just adding a record in some d.ts file is ok. Like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Window {\n  foo: { bar: string }\n}\n</code></pre>\n\n<p>But as I understood in such case I can't import some types in that file and use them in declaration, instead of <code>string</code> for example. </p>\n\n<p>So what if I want to do something like that:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { MyTypeFromSomewhere } from './somewhere'\ninterface Window {\n  foo: { bar: MyTypeFromSomewhere }\n}\n</code></pre>\n\n<p>How can I extended Window interface with new property and specify type for it?</p>\n"}, {"tags": ["typescript", "mocking", "jestjs", "axios"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 13731976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6898a0d4f36840111060d5b8a186b1?s=128&d=identicon&r=PG&f=1", "display_name": "Adri&#225;n Toscano", "link": "https://stackoverflow.com/users/13731976/adri%c3%a1n-toscano"}, "is_accepted": false, "score": 0, "last_activity_date": 1592617473, "creation_date": 1592617473, "answer_id": 62480718, "question_id": 56977919, "link": "https://stackoverflow.com/questions/56977919/how-to-mock-axios-when-passed-a-config-w-typescript/62480718#62480718", "title": "How to: mock axios when passed a config w/ typescript", "body": "<p>This has been here for a year, and I stumbled onto this thread while trying to solve the same problem.</p>\n\n<p>I was scratching my head for a while, but eventually I managed to crack it. </p>\n\n<p>A bit of context to better understand how I solved it: </p>\n\n<p>I mocked <code>axios</code> for usage with <code>jest</code>, and in a project using <code>Typescript</code>.</p>\n\n<p>That said, this is what I ended up doing:</p>\n\n<p><strong>__mocks__/axios.ts:</strong></p>\n\n<pre><code>import { AxiosResponse } from 'axios';\n\nconst axiosResponse: AxiosResponse = {\n  data: { falseProp: 'value' },\n  status: 200,\n  statusText: 'OK',\n  config: {},\n  headers: {},\n};\n\nexport default {\n  create: jest.fn((config) =&gt; {\n     const wrapFunction = (param: any) =&gt; {\n      return Promise.resolve(axiosResponse)\n     }\n\n     return wrapFunction\n  })\n};\n</code></pre>\n\n<p>This an example of the way I was using <code>axios</code> in the code I was trying to test:</p>\n\n<p><strong>src/MyRequestClass.ts:</strong></p>\n\n<pre><code>import axios, { AxiosInstance, AxiosError } from 'axios'\n\nconst axiosInstance = axios.create({\n  baseURL: 'https://fake-api-url',\n  headers: {\n      common: {\n          Authorization: authToken\n      }\n  }\n})\n\nconst request = {\n  method: 'GET',\n  url: 'https://fake-api-url/endpoint',\n  params: {},\n  data: {},\n  headers: {}\n}\n\nconst response = await axiosInstance(request)\n</code></pre>\n\n<p>Essentially, what I did was make it so the <code>create</code> method returns a <code>function</code> that receives the <code>config</code> object you mentioned (in my case the <code>request</code> object) and always resolves the <code>Promise</code>.</p>\n\n<p>Of course, you can also make it so the <code>Promise</code> fails depending on your test cases.</p>\n\n<p>Hope this helps anyone else!</p>\n"}], "owner": {"reputation": 127, "user_id": 9958411, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kC0mC4o3VE8/AAAAAAAAAAI/AAAAAAAABbk/rhDnx9oG0Yk/photo.jpg?sz=128", "display_name": "Chang Yea Moon", "link": "https://stackoverflow.com/users/9958411/chang-yea-moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 839, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1592617473, "creation_date": 1562789281, "last_edit_date": 1567927191, "question_id": 56977919, "link": "https://stackoverflow.com/questions/56977919/how-to-mock-axios-when-passed-a-config-w-typescript", "title": "How to: mock axios when passed a config w/ typescript", "body": "<p>I can't mock axios when it is uses the config convention  <code>axios(passAConfigObj)</code>. I have no problem mocking when it is <code>axios.get</code> or <code>axios.post</code>. Not trying to introduce a library, because I feel like this can be done. </p>\n\n<p>I have tried mocking the request method that is going to be used <code>axios.post</code>. I tried mocking axios and giving it a return value but wants an <code>AxiosPromise&lt;any&gt;</code>. </p>\n\n<p><code>const mockedAxios = mocked(axios)</code></p>\n\n<p><code>mockedAxios.mockImplementationOnce(() =&gt; Promise.resolve(2))</code></p>\n\n<p><code>error: TS2322: Type 'Promise&lt;number&gt;' is not assignable to type AxiosPromise&lt;any&gt;</code></p>\n\n<pre><code>// auth.spec.ts\nimport { getAuthToken } from '../auth'\n\nimport axios from 'axios'\nimport { mocked } from 'ts-jest/utils'\n\njest.mock('axios')\n\ndescribe('getAuthToken', () =&gt; {\n  const mockedAxiosPost = mocked(axios)\n\n  it('should return ', () =&gt; {\n    mockedAxiosPost.mockImplementationOnce(() =&gt;\n      Promise.resolve({ data: 'response.data' })\n    )\n\n    const authToken = getAuthToken()\n\n    expect(authToken).toEqual()\n    expect(mockedAxiosPost).toHaveBeenCalledTimes(1)\n    expect(mockedAxiosPost).toHaveBeenCalledWith()\n\n  })\n})\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>// auth.ts\nimport axios from 'axios'\n\nexport const getAuthToken = () =&gt; {\n\n  const options = {\n    url: `url`,\n    method: 'POST',\n    headers: {\n      Authorization: ''\n      'Content-Type': '',\n    },\n    data: {},\n  }\n\n  return axios(options)\n    .then(response =&gt; {\n      return response\n    })\n    .catch(error =&gt; {\n      console.log(error.response)\n    })\n}\n\n</code></pre>\n\n<p>I expect axios that gets passed a config to internally call <code>axios.post</code> thus working/passing my test. </p>\n\n<p>I have other implementations of axios.post and axios.get that works with this testing style, so that is not the problem. Obviously I can just change my code to use <code>axios.post</code>, but at this point, I am curious more than anything. Thanks in advance :)</p>\n"}, {"tags": ["c#", "asp.net-mvc", "typescript", "kendo-contextmenu"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9778083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bnF1UrcVXi8/AAAAAAAAAAI/AAAAAAAAAAc/hh9TDTin0_k/photo.jpg?sz=128", "display_name": "Khushbu Patel", "link": "https://stackoverflow.com/users/9778083/khushbu-patel"}, "edited": false, "score": 0, "creation_date": 1562856200, "post_id": 56983317, "comment_id": 100518164, "body": "How can I add dynamic options here"}, {"owner": {"reputation": 1559, "user_id": 4944034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZuhDy.jpg?s=128&g=1", "display_name": "Carsten Franke", "link": "https://stackoverflow.com/users/4944034/carsten-franke"}, "reply_to_user": {"reputation": 1, "user_id": 9778083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bnF1UrcVXi8/AAAAAAAAAAI/AAAAAAAAAAc/hh9TDTin0_k/photo.jpg?sz=128", "display_name": "Khushbu Patel", "link": "https://stackoverflow.com/users/9778083/khushbu-patel"}, "edited": false, "score": 0, "creation_date": 1562867484, "post_id": 56983317, "comment_id": 100523891, "body": "The <code>datasource</code> is a simple JavaScript array with objects in it. All you have to do, is to add or omit some entries depending on your conditions."}], "tags": [], "owner": {"reputation": 1559, "user_id": 4944034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZuhDy.jpg?s=128&g=1", "display_name": "Carsten Franke", "link": "https://stackoverflow.com/users/4944034/carsten-franke"}, "is_accepted": false, "score": 0, "last_activity_date": 1562828189, "creation_date": 1562828189, "answer_id": 56983317, "question_id": 56977832, "link": "https://stackoverflow.com/questions/56977832/how-can-i-configure-dynamic-sub-menu-options-for-a-static-menu/56983317#56983317", "title": "How can I configure dynamic sub menu options for a static menu", "body": "<p>I've solved it by creating the datasource of the context menu completely dynamically. Whenever the <code>open</code>-event occurs (<a href=\"https://docs.telerik.com/kendo-ui/api/javascript/ui/menu/events/open\" rel=\"nofollow noreferrer\">https://docs.telerik.com/kendo-ui/api/javascript/ui/menu/events/open</a>), I set the datasource.</p>\n\n\n\n<pre><code>function contextMenuOpen(e) {\n    // Ugly check to test if the context menu has been opened - not sure if it is still required\n    if (e.item.length) {\n        this.setOptions({\n            dataSource: [\n                { text: \"@Html.Raw(Resources.BtnEdit)\", enabled: !someVar },\n                { text: \"@Html.Raw(Resources.BtnDownload)\" },\n                { text: \"@Html.Raw(Resources.BtnRename)\", enabled: !someVar },\n                { text: \"@Html.Raw(Resources.BtnDelete)\" },\n            ]\n        });\n    }\n}\n</code></pre>\n\n<p>This way you can combine your static content with the dynamic one.</p>\n"}], "owner": {"reputation": 1, "user_id": 9778083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bnF1UrcVXi8/AAAAAAAAAAI/AAAAAAAAAAc/hh9TDTin0_k/photo.jpg?sz=128", "display_name": "Khushbu Patel", "link": "https://stackoverflow.com/users/9778083/khushbu-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562828189, "creation_date": 1562788835, "last_edit_date": 1562789058, "question_id": 56977832, "link": "https://stackoverflow.com/questions/56977832/how-can-i-configure-dynamic-sub-menu-options-for-a-static-menu", "title": "How can I configure dynamic sub menu options for a static menu", "body": "<p>I have a kendo context menu that is configured to be displayed whenever a right-click occurs on the items in the kendo listview. Within the context menu, I want some of the options to have submenu options which have to be loaded dynamically as they differ based on which item of the listview is clicked on. I have configured the ajax call that returns the required data.\nThe issue is, I am not able to figure out, how can I assign these options to the submenu, so that when the submenu is expanded the dynamic options are loaded.</p>\n\n<p>I have the kendo context menu created in the typescript file associated with the cshtml file. I tried adding the open event to the kendo context menu, inside which I created the datasoure, when the ajax call is completed and then I created the kendo context menu. Drawback- it replaces the old menu and does not serve the requirement of loading the submenu options.\nOther thing I tried was, adding the logic in the select event of the context menu that does something similar, but that did not do much</p>\n\n<p>Context menu code:</p>\n\n<pre><code>&lt;ul id=\"ContextMenu\" style=\"display:none\"&gt;\n  &lt;li&gt;&lt;i class=\"far fa-trash-alt fa-fw\"&gt;&lt;/i&gt; Delete&lt;/li&gt;\n  &lt;li&gt;&lt;i class=\"fas fa-minus fa-fw\"&gt;&lt;/i&gt;Stop&lt;/li&gt;\n  &lt;li class=\"inc\"&gt;\n    &lt;i class=\"fas fa-arrow-up fa-fw\"&gt;&lt;/i&gt;Increase\n    &lt;ul&gt;&lt;/ul&gt;\n  &lt;/li&gt;\n  &lt;li class=\"dec\"&gt;\n    &lt;i class=\"fas fa-arrow-down fa-fw\"&gt;&lt;/i&gt;Decrease\n    &lt;ul&gt;&lt;/ul&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Typescript file, kendo context menu creation:</p>\n\n<pre><code>$('#listView').on('mousedown', '.product', null, (e: JQueryEventObject) =&gt; {\n\n    $(\"#ContextMenu\").kendoContextMenu({\n        target: \"#listView\",\n        filter: \".item\",\n        select: (e: kendo.ui.ContextMenuSelectEvent) =&gt; {\n\n            if (e.item.textContent.trim() == \"Increase\") {\n                //Ajax call here \n                //If the ajax call succeeds \n                //I created the dynamic datasoure\n                var ds = [{\n                    text: \"Increase\",\n                    items: [{\n                        text: name\n                    }]\n                }];\n\n\n                $(\"#lvPrescribedContextMenu\").kendoContextMenu({\n                    target: \"#listView\",\n                    filter: \".item\",\n                    dataSource: ds\n                });\n</code></pre>\n\n<p>I will expect the context menu to load the static options when it opens and then when the option with submenu options is either hovered over or clicked \non, it should show the dynamic options.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 6613, "user_id": 6433166, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-a-2vAH16fII/AAAAAAAAAAI/AAAAAAAAILw/RY3o0Eie6eo/photo.jpg?sz=128", "display_name": "julianobrasil", "link": "https://stackoverflow.com/users/6433166/julianobrasil"}, "edited": false, "score": 0, "creation_date": 1562798460, "post_id": 56977683, "comment_id": 100494886, "body": "I&#39;m not sure whether I got what you want to do. Is <code>currencyMask</code> a directive? Like a 3rd party library? Or a directive you are building?"}, {"owner": {"reputation": 21, "user_id": 7566014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7cf3c0cc15fb89da2553befa1887f9?s=128&d=identicon&r=PG&f=1", "display_name": "darren zou", "link": "https://stackoverflow.com/users/7566014/darren-zou"}, "reply_to_user": {"reputation": 6613, "user_id": 6433166, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-a-2vAH16fII/AAAAAAAAAAI/AAAAAAAAILw/RY3o0Eie6eo/photo.jpg?sz=128", "display_name": "julianobrasil", "link": "https://stackoverflow.com/users/6433166/julianobrasil"}, "edited": false, "score": 0, "creation_date": 1562856237, "post_id": 56977683, "comment_id": 100518188, "body": "@jpavel no. I don&#39;t know how to build a custom directive so if that&#39;s a solution you&#39;re gonna suggest then I would need extra steps. The currencyMask is a built in angular thing.."}, {"owner": {"reputation": 6613, "user_id": 6433166, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-a-2vAH16fII/AAAAAAAAAAI/AAAAAAAAILw/RY3o0Eie6eo/photo.jpg?sz=128", "display_name": "julianobrasil", "link": "https://stackoverflow.com/users/6433166/julianobrasil"}, "edited": false, "score": 0, "creation_date": 1562866145, "post_id": 56977683, "comment_id": 100523240, "body": "Oh, I&#39;m afraid, there&#39;s no such a thing like a <code>currencyMask</code> for <code>&lt;input&gt;</code> in angular. As a suggestion (since you don&#39;t wanna build your own directive): take a look at <a href=\"https://github.com/text-mask/text-mask/tree/master/angular2\" rel=\"nofollow noreferrer\">github.com/text-mask/text-mask/tree/master/angular2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 1477959, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hIWU7.jpg?s=128&g=1", "display_name": "Dijo", "link": "https://stackoverflow.com/users/1477959/dijo"}, "is_accepted": false, "score": 0, "last_activity_date": 1596648714, "creation_date": 1596648714, "answer_id": 63270543, "question_id": 56977683, "link": "https://stackoverflow.com/questions/56977683/how-to-remove-currencymasks-0-00-format-and-just-let-users-input-any-number/63270543#63270543", "title": "How to remove currencyMask&#39;s &quot;0.00&quot; format and just let users input any number?", "body": "<p>If we set default value as null. Then $0.00 default value won't get defaulted.</p>\n<pre><code> myPrice: new FormControl(null, [Validators.required]),\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7566014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7cf3c0cc15fb89da2553befa1887f9?s=128&d=identicon&r=PG&f=1", "display_name": "darren zou", "link": "https://stackoverflow.com/users/7566014/darren-zou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1596648714, "creation_date": 1562788160, "last_edit_date": 1562788217, "question_id": 56977683, "link": "https://stackoverflow.com/questions/56977683/how-to-remove-currencymasks-0-00-format-and-just-let-users-input-any-number", "title": "How to remove currencyMask&#39;s &quot;0.00&quot; format and just let users input any number?", "body": "<p>In angular, currencyMask helps me format my input payment in commas etc.. compared to using type=number. But the problem I am encountering is that currencyMask gives me a default value of $0.00. When entering 1, it'll become $0.01 rather than just 1. I hope I'm making sense so far. So rather than making it $0.01 I want the users to be able to enter whatever amount they wish and continue to have the comma formater and number only filter that currencyMask provides.</p>\n\n<p>I have tried making type = \"number\". It works and my POST seems to be unaffected by the warning it gives when a decimal is entered: \"value must be between whole number\". But comma formatter is gone.  Below is the code that works but doesn't have comma formatter. </p>\n\n<pre><code>&lt;input matInput type = \"number\" placeholder = \"00000.00\"\n       [ngModel]= \"paymentUpdate\" \n       (ngModelChange) = \"element.Payment = $event\" \n       (keydown.Enter)=\"submitClick(element)\"&gt;\n</code></pre>\n\n<p>I wish to have users enter a payment and include a decimal if they wish. CurrencyMask forces user to start from cents. I have never used a custom directive so if that's the only solution please show me extra steps.. </p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 791, "user_id": 2806421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c596a539ebafc5258d34b59c52086d3?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Sharkey", "link": "https://stackoverflow.com/users/2806421/josh-sharkey"}, "edited": false, "score": 1, "creation_date": 1562787496, "post_id": 56977500, "comment_id": 100491175, "body": "When you pass an empty string is should return false."}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1562787542, "post_id": 56977500, "comment_id": 100491202, "body": "<a href=\"https://basarat.gitbooks.io/typescript/docs/javascript/truthy.html\" rel=\"nofollow noreferrer\">basarat.gitbooks.io/typescript/docs/javascript/truthy.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 1157201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a7e59a0c8e55437ca16f167560c208?s=128&d=identicon&r=PG", "display_name": "Linker", "link": "https://stackoverflow.com/users/1157201/linker"}, "is_accepted": true, "score": 3, "last_activity_date": 1562787583, "creation_date": 1562787583, "answer_id": 56977576, "question_id": 56977500, "link": "https://stackoverflow.com/questions/56977500/booleanfalse-returns-true/56977576#56977576", "title": "Boolean(&#39;false&#39;) returns true", "body": "<p>Would you accept an empty string?</p>\n\n<pre><code>console.log(Boolean('')); // false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1235, "user_id": 4470895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac18a4e724071d9e029e921786264b97?s=128&d=identicon&r=PG&f=1", "display_name": "HenryTK", "link": "https://stackoverflow.com/users/4470895/henrytk"}, "is_accepted": false, "score": 0, "last_activity_date": 1562787911, "creation_date": 1562787911, "answer_id": 56977642, "question_id": 56977500, "link": "https://stackoverflow.com/questions/56977500/booleanfalse-returns-true/56977642#56977642", "title": "Boolean(&#39;false&#39;) returns true", "body": "<p>I believe the <code>Boolean()</code> function call returns an object with a <code>valueOf()</code> method, which you can use to get the real value.</p>\n\n<p>Try:</p>\n\n<pre><code>Boolean('false').valueOf()\n</code></pre>\n\n<p>(I can't try it because I am typing this on my phone)</p>\n\n<p>Useful article: <a href=\"http://adripofjavascript.com/blog/drips/the-difference-between-boolean-objects-and-boolean-primitives-in-javascript.html\" rel=\"nofollow noreferrer\">http://adripofjavascript.com/blog/drips/the-difference-between-boolean-objects-and-boolean-primitives-in-javascript.html</a></p>\n"}], "owner": {"reputation": 8143, "user_id": 90800, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/027d54c100a58268c4ccee4cd4d5ce0e?s=128&d=identicon&r=PG", "display_name": "Alexander Zeitler", "link": "https://stackoverflow.com/users/90800/alexander-zeitler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56977576, "answer_count": 2, "score": 1, "last_activity_date": 1562787911, "creation_date": 1562787257, "question_id": 56977500, "link": "https://stackoverflow.com/questions/56977500/booleanfalse-returns-true", "title": "Boolean(&#39;false&#39;) returns true", "body": "<p>Is there a way to pass a <code>string</code> value to the TypeScript <code>Boolean</code> constructor and ever get back anything else than <code>true</code>?</p>\n\n<p>These both calls always return <code>true</code> where I would expect <code>false</code>:</p>\n\n<pre><code>const trueOrFalse = Boolean('false')\nconsole.log(trueOrFalse) // true\n\nconst trueOrFalse2 = Boolean('0')\nconsole.log(trueOrFalse2) // true\n</code></pre>\n\n<p><a href=\"https://typescript-play.js.org/#code/MYewdgzgLgBFBOBXApgeXgMQIYBsLJgF4YAhEEHZLMACgHIAzXfOgSgChRILkA6HEAHMaCFOmx5kHTuGhwkaTM2QAmIqXKVq9AAxsZ3SvyEiF45StZA\" rel=\"nofollow noreferrer\">TS Playground</a></p>\n"}, {"tags": ["javascript", "typescript", "babeljs"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 2, "creation_date": 1562792666, "post_id": 56977443, "comment_id": 100493223, "body": "The real question is &quot;which browsers do you <i>really</i> want to target&quot;? Because almost all of them support modern JS and don&#39;t need ES5 transpilation at all. If you want to still support IE11, then it&#39;s probably worth making a special ES5 bundle only for that one platform instead of serving ES5 to everyone."}, {"owner": {"reputation": 350, "user_id": 5078905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f217782217ed8124bfdc0ce578e0db57?s=128&d=identicon&r=PG", "display_name": "Spencer Pollock", "link": "https://stackoverflow.com/users/5078905/spencer-pollock"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562793760, "post_id": 56977443, "comment_id": 100493603, "body": "I don&#39;t have any browsers in specific to target. That said, as things are moving to es5 in general, it would be best to target that version as most will be updated. I&#39;m simply trying to get this working for Electron, of which I&#39;m also going to have the builds require version updates before usage"}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562793899, "post_id": 56977443, "comment_id": 100493644, "body": "I think you&#39;re misunderstanding what es5 is - es5 is the <i>old</i> version of JS, ecmascript 262 revision 5. It&#39;s the one you used to have to convert things to because lots of newer JS features weren&#39;t supported yet. Years ago. The current version of JS has too many names used by different people, and so is usually marked as &quot;esnext&quot; even though it&#39;s really  &quot;es-right-now&quot;. The current version of JS is ecmascript 262 revision 9. If your target is electron, there is literally no reason to ever compile to legacy es5. It supports modern JS just fine."}, {"owner": {"reputation": 350, "user_id": 5078905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f217782217ed8124bfdc0ce578e0db57?s=128&d=identicon&r=PG", "display_name": "Spencer Pollock", "link": "https://stackoverflow.com/users/5078905/spencer-pollock"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 1, "creation_date": 1562832041, "post_id": 56977443, "comment_id": 100503719, "body": "Thank you Mike, this helps me narrow my focus and gives me some more to jump on. I appreciate the assistance! I&#39;ll update with some more information and post my findings here later on."}], "owner": {"reputation": 350, "user_id": 5078905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f217782217ed8124bfdc0ce578e0db57?s=128&d=identicon&r=PG", "display_name": "Spencer Pollock", "link": "https://stackoverflow.com/users/5078905/spencer-pollock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2542, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1562792088, "creation_date": 1562786986, "last_edit_date": 1562792088, "question_id": 56977443, "link": "https://stackoverflow.com/questions/56977443/tsc-vs-babel-a-better-transpilation-compiler-workflow", "title": "tsc vs babel: a better transpilation/compiler workflow", "body": "<p>I\u2019m working on an ESNext TypeScript project. Currently I\u2019m having some difficulty running my bundler (Rollup) and unit tests (Mocha/Chai). I\u2019ve been quite confused by using <code>tsc</code> or <code>babel</code> for my compilation process, and I just can\u2019t seem to wrap my head around how all of it\u2019s going to work.</p>\n\n<p>So far, I have the following configs:</p>\n\n<p>tsconfig.json (main config for the project; used in rollup.config.json)</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"esnext\",\n    \"module\": \"es2015\",\n    \"lib\": [\"esnext\", \"dom\"],\n    \"declaration\": true,\n    \"outDir\": \"./lib\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"moduleResolution\": \"node\",\n    \"baseUrl\": \"./\",\n    \"types\": [\n      \"node\",\n      \"three\"\n    ], \n    \"esModuleInterop\": true,\n    \"inlineSourceMap\": true,\n    \"pretty\": true,\n    \"skipLibCheck\": true\n  },\n  \"include\": [\n    \"src/**/*\"\n  ],\n  \"exclude\": [\n    \"node_modules\",\n  ]\n}\n</code></pre>\n\n<p>rollup.config.js (rollup file for main project module bundling)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import typescript from 'rollup-plugin-typescript2';\nimport babel from 'rollup-plugin-babel';\nimport globals from 'rollup-plugin-node-globals';\nimport builtins from '@joseph184/rollup-plugin-node-builtins';\nimport resolve from 'rollup-plugin-node-resolve';\nimport commonjs from 'rollup-plugin-commonjs';\nimport pkg from \"./package.json\";\n\nexport default [\n    {\n        input: './src/index.ts',\n        plugins: [\n            typescript(),\n        ],\n        external: [\n            \"three\"\n        ],\n        output: [\n            {\n                file: pkg.module,\n                format: 'es'\n            }\n        ]\n    },\n    {\n        input: './src/index.ts',\n        plugins: [\n            resolve({\n                preferBuiltins: true,\n                mainFields: ['module', 'main'],\n            }),\n            globals({\n                process: true,\n                global: true,\n                dirname: true,\n                filename: true\n            }),\n            builtins(),\n            commonjs(),\n            typescript(),\n            babel({\n                babelrc: true\n            }),\n        ],\n        external: [\n            \"three\"\n        ],\n        output: [ // Required; Array = multiple outputs\n            {\n                file: pkg.main,\n                format: 'umd',\n                name: 'Divine'\n            },\n            {\n                file: \"lib/divine.cjs.js\",\n                format: 'cjs'\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>.babelrc (babel options for the main project\u2019s module bundling)</p>\n\n<pre><code>{\n    \"presets\": [\n        [\"@babel/preset-env\", {\n            \"useBuiltIns\": \"entry\",\n            \"debug\": \"true\"\n        }],\n        \"@babel/preset-typescript\"\n    ],\n    \"plugins\": [\n        \"@babel/plugin-proposal-class-properties\",\n        \"@babel/plugin-transform-runtime\",\n        \"@babel/plugin-transform-arrow-functions\",\n        \"@babel/plugin-syntax-dynamic-import\"\n    ],\n    \"compact\": \"auto\",\n    \"exclude\": [\n        \"./src/**/test/**/*.spec.ts\",\n        \"./node_modules/*\"\n    ]\n}\n</code></pre>\n\n<p>tsconfig.test.json (<code>tsc</code> config used for <code>mocha</code> with <code>ts-node</code> as the compiler)</p>\n\n<pre><code>{\n    \"compililerOptions\": {\n        \"target\": \"esnext\",\n        \"module\": \"commonjs\",\n        \"lib\": [\"esnext\", \"dom\"],\n        \"moduleResolution\": \"node\",\n        \"esModuleInterop\": true,\n        \"types\": [\n            \"chai\",\n            \"mocha\",\n        ],\n        \"exclude\": [\n            \"src/core/loggingsystem/test\",\n            \"src/core/messagesystem/test\"\n        ]\n    }\n}\n</code></pre>\n\n<p>My main question is: which should I use for esnext to es5 (for most browser support)? I want to work in ESNext code, but I want to have my build steps with the least friction possible. Is it better to use <code>tsc</code> natively, or should I have Babel mixed in/fully used? I\u2019ve been having a very difficult time with my builds as I\u2019m still quite unsure of how it should all fit together. </p>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562804228, "post_id": 56977439, "comment_id": 100496004, "body": "It&#39;s probably <a href=\"https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#stricter-variance-in-callback-parameters\" rel=\"nofollow noreferrer\">this change</a>, since <code>Promise&lt;T&gt;</code> and <code>Promise&lt;U&gt;</code> have different callback types in <code>then()</code> when <code>T</code> is not the same as <code>U</code>.  You haven&#39;t necessarily given enough code to verify that though.  Ideally you&#39;d provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> someone can drop into something like <a href=\"https://www.typescriptlang.org/play/\" rel=\"nofollow noreferrer\">The Playground</a> and see what you&#39;re seeing.  I&#39;m also confused why you are upgrading to TS2.4 now when TS3.5 is out."}, {"owner": {"reputation": 750, "user_id": 3295036, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dac54d0fcecfa25e0e771f1b20e9eb23?s=128&d=identicon&r=PG&f=1", "display_name": "maudev", "link": "https://stackoverflow.com/users/3295036/maudev"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562855832, "post_id": 56977439, "comment_id": 100517913, "body": "Hi, thanks for reply, yes I was worndering why 2.4 but we don&#180;t know why too, it&#180;s about customer requirements.. and thanks for the suggestion about how to ask here, we already solved this issue I will answer this question myself and hope this help someone"}], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 3295036, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dac54d0fcecfa25e0e771f1b20e9eb23?s=128&d=identicon&r=PG&f=1", "display_name": "maudev", "link": "https://stackoverflow.com/users/3295036/maudev"}, "is_accepted": false, "score": 0, "last_activity_date": 1562856350, "creation_date": 1562856350, "answer_id": 56991899, "question_id": 56977439, "link": "https://stackoverflow.com/questions/56977439/typescript-2-4-class-localizationservice-incorrectly-implements-interface-iloc/56991899#56991899", "title": "TypeScript 2.4: &#39;Class LocalizationService incorrectly implements interface ILocalizationService&lt;LocalizedStrings&gt;&#39;", "body": "<p>It seems that the <strong>strict generics type checkings</strong> (introduced on TS 2.4) is affecting this code block since we are specifying that the ILocalizationService interface and its function load() must be the same type, so we are putting two diferent types on them, a class as the interface type and a interface as the load() function type, so both aren't same type and the check fails.</p>\n\n<p>So the workaround that fixes it was putting the <strong>LocalizedStrings</strong> class as the same type for both since this class already implements the interface that load() function was using before, and both are the same type now and the check is success.</p>\n\n<pre><code>module DemoSample.Localization {\n    export class LocalizationService implements someNamespace.Localization.ILocalizationService&lt;LocalizedStrings&gt; {\n        constructor(private _localizationService: someNamespace.Services.ILocalizationService) {}\n        load(): JQueryPromise&lt;LocalizedStrings&gt; {\n            var result = $.Deferred&lt;LocalizedStrings&gt;();//the same class as the type\n            ...some dummy logic\n            return result.promise();\n            }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 750, "user_id": 3295036, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dac54d0fcecfa25e0e771f1b20e9eb23?s=128&d=identicon&r=PG&f=1", "display_name": "maudev", "link": "https://stackoverflow.com/users/3295036/maudev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562856350, "creation_date": 1562786980, "last_edit_date": 1562803961, "question_id": 56977439, "link": "https://stackoverflow.com/questions/56977439/typescript-2-4-class-localizationservice-incorrectly-implements-interface-iloc", "title": "TypeScript 2.4: &#39;Class LocalizationService incorrectly implements interface ILocalizationService&lt;LocalizedStrings&gt;&#39;", "body": "<p>I'm facing some issues due to upgrading my TS version.\nBefore upgrade I had TS 2.3.3 and it worked without any problems, so by requirements I upgraded to TS 2.4 and this version gave me several issues.</p>\n\n<p>I have the following class:</p>\n\n<pre><code>module DemoSample.Localization {\n    export class LocalizationService implements someNamespace.Localization.ILocalizationService&lt;LocalizedStrings&gt; {\n        constructor(private _localizationService: someNamespace.Services.ILocalizationService) {\n        }\n        load(): JQueryPromise&lt;ILocalizedStrings&gt; {\n            var result = $.Deferred&lt;ILocalizedStrings&gt;();\n            ...some dummy logic\n            return result.promise();\n        }\n    }\n}\n</code></pre>\n\n<p>Implements an interface that has a generic type</p>\n\n<pre><code>declare module someNamespace.Localization {\n    interface ILocalizationService&lt;T&gt; {\n        load(): JQueryPromise&lt;T&gt;;\n    }\n}\n</code></pre>\n\n<p>And the type specified:</p>\n\n<pre><code>module DemoSample.Localization {\n    export class LocalizedStrings extends someNamespace.Localization.LocalizedStringsBase implements ILocalizedStrings {\n        constructor() {\n            super(\"Test Application\");\n        }\n        ...another dummy logic\n    }\n}\n</code></pre>\n\n<p>So I'm getting the following errors:</p>\n\n<ul>\n<li><code>Class LocalizationService incorrectly implements interface ILocalizationService&lt;LocalizedStrings&gt;</code></li>\n<li><code>Types of property load are incompatible.</code></li>\n<li><code>Type '() =&gt; JQueryPromise&lt;ILocalizedStrings&gt; is not assignable to type () =&gt; JQueryPromise&lt;LocalizedStrings&gt;'.</code></li>\n<li><code>Type 'ILocalizedStrings' is not assignable to type 'LocalizedStrings'</code></li>\n</ul>\n\n<p>So I was researching about breaking changes from version 2.4 but I'm not found some information about interfaces with generic types.</p>\n\n<p>The breaking changes has a mention about <strong>Stricter checking for generic functions</strong> <a href=\"https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#stricter-checking-for-generic-functions\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#stricter-checking-for-generic-functions</a></p>\n\n<p>Do I must assume that new \"feature\" is strict on generic interfaces or classes too?</p>\n\n<p>I'm new on TypeScript so I will be very grateful with your help.</p>\n\n<p>Regards  </p>\n"}, {"tags": ["javascript", "angular", "typescript", "testing", "protractor"], "comments": [{"owner": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "edited": false, "score": 0, "creation_date": 1562832960, "post_id": 56977418, "comment_id": 100504179, "body": "Are you intending to do visual validation of the screens to ensure they look correct or do you simply need to capture the screenshot for some other purpose?"}, {"owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "reply_to_user": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "edited": false, "score": 0, "creation_date": 1562837906, "post_id": 56977418, "comment_id": 100506911, "body": "@DublinDev So first I am goig to take all the screen shots visually validate them and then saving them as the Golden image in our database. There will also be tests to take screenshot and test them aginst Golden images in future if we make changes in our website. I will be using Pixelmatch to check  difference between this current and Golden image (created before)"}, {"owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "reply_to_user": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "edited": false, "score": 0, "creation_date": 1562839592, "post_id": 56977418, "comment_id": 100507949, "body": "@DublinDev What do you suggest ?"}], "answers": [{"comments": [{"owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "edited": false, "score": 0, "creation_date": 1562838239, "post_id": 56984837, "comment_id": 100507143, "body": "But after every test it will take screenshot and save it as heroes.png this way there will only be one image named heroes.png not different images for different tests"}, {"owner": {"reputation": 3766, "user_id": 11597494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8Zlm.jpg?s=128&g=1", "display_name": "Yevhen", "link": "https://stackoverflow.com/users/11597494/yevhen"}, "reply_to_user": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "edited": false, "score": 1, "creation_date": 1562849499, "post_id": 56984837, "comment_id": 100513864, "body": "as I said it will be better to take a reporter and it will do it for, or you can get spec name and name it as your spec&#39;s name or route&#39;s name"}], "tags": [], "owner": {"reputation": 3766, "user_id": 11597494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8Zlm.jpg?s=128&g=1", "display_name": "Yevhen", "link": "https://stackoverflow.com/users/11597494/yevhen"}, "is_accepted": false, "score": 1, "last_activity_date": 1562834840, "last_edit_date": 1562834840, "creation_date": 1562833817, "answer_id": 56984837, "question_id": 56977418, "link": "https://stackoverflow.com/questions/56977418/taking-screenshot-in-different-route-in-angular-using-protractor/56984837#56984837", "title": "Taking screenshot in different route in angular using protractor", "body": "<p>I think the better solution for you is to add some reporter that will do everything for you, like taking screenshots after each test or after each failed tests and e.t.c. </p>\n\n<p>Take a look at some reporters:</p>\n\n<p><a href=\"https://github.com/allure-framework/allure-jasmine\" rel=\"nofollow noreferrer\">allure-jasmine</a> - Highly recommended.</p>\n\n<p><a href=\"https://github.com/mlison/protractor-jasmine2-screenshot-reporter\" rel=\"nofollow noreferrer\">protractor-jasmine2-screenshot-reporter</a></p>\n\n<p><a href=\"https://github.com/Kenzitron/protractor-jasmine2-html-reporter\" rel=\"nofollow noreferrer\">protractor-jasmine2-html-reporter</a></p>\n\n<p><a href=\"https://github.com/abhishekkyd/protractor-html-reporter-2\" rel=\"nofollow noreferrer\">protractor-html-reporter-2</a></p>\n\n<p><a href=\"https://github.com/jintoppy/protractor-html-screenshot-reporter\" rel=\"nofollow noreferrer\">protractor-html-screenshot-reporter</a></p>\n\n<p><a href=\"https://github.com/Evilweed/protractor-beautiful-reporter\" rel=\"nofollow noreferrer\">protractor-beautiful-reporter</a></p>\n\n<p>But If you don't want to add any extra libraries to your project you can just put the <code>browser.takeScreenshot()</code> function to the <code>afterEach</code> function to take a screenshot after each test (<code>it</code>).</p>\n\n<p>For instance:</p>\n\n<pre><code>describe('blank App', () =&gt; {\n  let page: BlankPage;\n\n  beforeEach(() =&gt; {\n    page = new BlankPage();\n  });\n  afterEach(() =&gt; \n    browser.takeScreenshot().then((png) =&gt;{\n      var stream = createWriteStream(\"heroes.png\"); /** change the png file name  */\n    stream.write(new Buffer(png, 'base64'));\n    stream.end; \n    });\n  });\n\n  it('should display message saying app works', () =&gt; {\n    page.navigateTo();\n    expect(page.getParagraphText()).toEqual('My Heroes');\n\n  });\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "is_accepted": false, "score": 1, "last_activity_date": 1562841080, "last_edit_date": 1562841080, "creation_date": 1562840317, "answer_id": 56986971, "question_id": 56977418, "link": "https://stackoverflow.com/questions/56977418/taking-screenshot-in-different-route-in-angular-using-protractor/56986971#56986971", "title": "Taking screenshot in different route in angular using protractor", "body": "<p>I think the best approach for you would be the have a list of all the routes in your application and create a datadriven test to iterate over each one.</p>\n\n<p>You would need a generic navigation function which could get to each page e.g navigateTo(routeName). That code would look something like this.</p>\n\n<pre><code>var routes = [\n    'homepage',\n    'myheroes',\n    'mainpage',\n    'heroprofile'\n]\n\ndescribe('blank App', () =&gt; {\n    for (let i = 0; i &lt; routes.length; i++) {\n        it('should display message saying app works', () =&gt; {\n            navigateTo(routes[i]);\n            browser.takeScreenshot().then((png) =&gt; {\n                var stream = createWriteStream(routes[i] + \".png\"); /** change the png file name  */\n                stream.write(new Buffer(png, 'base64'));\n                stream.end;\n            });\n        });\n    }\n});\n</code></pre>\n\n<p><strong>protractor-image-compare</strong></p>\n\n<p>Really though I would recommend you use the npm package <a href=\"https://www.npmjs.com/package/protractor-image-comparison\" rel=\"nofollow noreferrer\">protractor-image-comparison</a>. I've worked with this package and it does make visual validation very straightforward. It allows you to save new baseline images (golden images as you call them) if they are absent and compares them if they are present. The comparison are very sensitive to change but you can set how much of a difference you want to allow.</p>\n\n<p>There would be no database required with this approach.</p>\n\n<p><strong>Note</strong></p>\n\n<p>Be aware also that different browsers take screenshots differently based. Chrome considers the \"viewport\" to be the visible portion of the browser but I believe in firefox you can screenshot the entire webpage at once.</p>\n"}], "owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562841080, "creation_date": 1562786843, "last_edit_date": 1562787958, "question_id": 56977418, "link": "https://stackoverflow.com/questions/56977418/taking-screenshot-in-different-route-in-angular-using-protractor", "title": "Taking screenshot in different route in angular using protractor", "body": "<p>I am new to testing using protractor so for testing I have to take screenshots in an angular application for all the different routes in my app. I tried to do it on a small dummy angular app, so I cloned the  <a href=\"https://github.com/johnpapa/angular-tour-of-heroes\" rel=\"nofollow noreferrer\"><code>Tour of heroes</code></a> repo it has dashboard and Heroes route. I wrote the following code in app.po.ts :</p>\n\n<pre><code>import { browser, element, by } from 'protractor';\n\nexport class BlankPage {\n  navigateTo() {\n    return browser.get('/heroes');\n  }\n\n  getParagraphText() {\n    return element(by.tagName('h2')).getText();\n  }\n}\n</code></pre>\n\n<p>and in app.e2e-spec.ts</p>\n\n<pre><code>import { BlankPage } from './app.po';\nimport {browser,by,element} from 'protractor';\nimport { protractor } from 'protractor';\nimport {createWriteStream} from 'fs' ;\n\ndescribe('blank App', () =&gt; {\n  let page: BlankPage;\n\n  beforeEach(() =&gt; {\n    page = new BlankPage();\n  });\n\n  it('should display message saying app works', () =&gt; {\n    page.navigateTo();\n    expect(page.getParagraphText()).toEqual('My Heroes');\n    browser.takeScreenshot().then((png) =&gt;{\n      var stream = createWriteStream(\"heroes.png\"); /** change the png file name  */\n      stream.write(new Buffer(png, 'base64'));\n      stream.end; \n  });\n});\n});\n</code></pre>\n\n<p>The idea was to navigate to heroes route and capture the screenshot. I got the screenshot but<br>\nIs there a way I can automate the task of going to all the routes and take screenshots ? In my actual website there are a lot of routes  </p>\n"}, {"tags": ["angular", "typescript", "angular-httpclient"], "comments": [{"owner": {"reputation": 3335, "user_id": 4812515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-fxpyA0DpmoE/AAAAAAAAAAI/AAAAAAAAABY/XTBU5YBFdW8/photo.jpg?sz=128", "display_name": "alphapilgrim", "link": "https://stackoverflow.com/users/4812515/alphapilgrim"}, "edited": false, "score": 0, "creation_date": 1562787510, "post_id": 56977325, "comment_id": 100491184, "body": "which version of angular are you on/coming from?"}, {"owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "reply_to_user": {"reputation": 3335, "user_id": 4812515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-fxpyA0DpmoE/AAAAAAAAAAI/AAAAAAAAABY/XTBU5YBFdW8/photo.jpg?sz=128", "display_name": "alphapilgrim", "link": "https://stackoverflow.com/users/4812515/alphapilgrim"}, "edited": false, "score": 0, "creation_date": 1562787761, "post_id": 56977325, "comment_id": 100491300, "body": "Going from 7 to 8. I think this could apply to anyone updating from 4 or so iirc. We just never fully applied <code>HttpClient</code> across the board."}], "answers": [{"comments": [{"owner": {"reputation": 492, "user_id": 10408246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PPBqm.jpg?s=128&g=1", "display_name": "Vash72", "link": "https://stackoverflow.com/users/10408246/vash72"}, "edited": false, "score": 1, "creation_date": 1562793118, "post_id": 56977662, "comment_id": 100493378, "body": "ok, this is just one of the multiple type definition for RequestOptions, if you read the http.d.ts (@angular/common/http), and i don&#39;t think you are using the one with a responseType arraybuffer (only JSON in 2019 XD) , an idea may be to just craft your &quot;partial&quot; RequestOption for your use cases"}], "tags": [], "owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "is_accepted": false, "score": 0, "last_activity_date": 1563200470, "last_edit_date": 1563200470, "creation_date": 1562788052, "answer_id": 56977662, "question_id": 56977325, "link": "https://stackoverflow.com/questions/56977325/angular-httpclient-replacement-for-requestoptions/56977662#56977662", "title": "Angular HttpClient replacement for RequestOptions?", "body": "<p>For now, I just defined \"my own\" <code>RequestOptions</code> interface in a new file in my app called <code>request-options.ts</code>. The interface definition is below, the properties were lifted straight out of the Angular Library's <code>client.d.ts</code> file to match what <code>HttpClient</code> expects from the <code>options</code> param for REST calls:</p>\n\n<pre><code>import { HttpHeaders, HttpParams } from '@angular/common/http';\n\nexport interface RequestOptions {\n  headers?: HttpHeaders;\n  params?: HttpParams;\n}\n</code></pre>\n\n<p>Now I can statically type <code>RequestOptions</code> again, e.g.:</p>\n\n<pre><code>const requestOptions: RequestOptions = {\n  params: new HttpParams()\n};\n</code></pre>\n\n<p>(Above example code lifted from here: <a href=\"https://stackoverflow.com/questions/45797513/angular4-http-httpclient-requestoptions\">Angular4: Http -&gt; HttpClient - requestOptions</a>)</p>\n\n<p>I am not sure if I am completely missing something or I should go make a PR against the angular repo. This seems like a rather obvious omission if there isn't a reason for it. </p>\n"}, {"tags": [], "owner": {"reputation": 3335, "user_id": 4812515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-fxpyA0DpmoE/AAAAAAAAAAI/AAAAAAAAABY/XTBU5YBFdW8/photo.jpg?sz=128", "display_name": "alphapilgrim", "link": "https://stackoverflow.com/users/4812515/alphapilgrim"}, "is_accepted": false, "score": 0, "last_activity_date": 1562789767, "creation_date": 1562789767, "answer_id": 56978013, "question_id": 56977325, "link": "https://stackoverflow.com/questions/56977325/angular-httpclient-replacement-for-requestoptions/56978013#56978013", "title": "Angular HttpClient replacement for RequestOptions?", "body": "<p>Here's a little something I had written as a helper service. I'm sure you could extend to pass along any explicit headers.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class ParamBuilderService {\n  buildParams(queryParams: Params, excludedValues ? : Array &lt; string &gt; ): HttpParams {\n    let params = new HttpParams();\n    for (const key in queryParams) {\n      if (queryParams.hasOwnProperty(key)) {\n        const value = queryParams[key];\n        if (excludedValues) {\n          const containExcludedValue = excludedValues.indexOf(value) !== -1;\n          if (!!value &amp;&amp; !containExcludedValue) {\n            params = params.append(key, value);\n          }\n        } else if (!!value || value === 0) {\n          params = params.append(key, value);\n        }\n      }\n    }\n    return params;\n  }\n}\n</code></pre>\n\n\n"}], "owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1360, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563200470, "creation_date": 1562786382, "last_edit_date": 1562787103, "question_id": 56977325, "link": "https://stackoverflow.com/questions/56977325/angular-httpclient-replacement-for-requestoptions", "title": "Angular HttpClient replacement for RequestOptions?", "body": "<p>Angular's <code>Http</code> module used to have a <code>RequestOptions</code> object which could be passed to its <code>get</code> method (e.g. <code>this.http.get(fooUrl, barOptions)</code>. The <code>RequestOptions</code> contained any headers. This was <a href=\"https://angular.io/guide/deprecations\" rel=\"nofollow noreferrer\">deprecated</a>. The \"closest replacement\" for the deprecated <code>RequestOptions</code> is <a href=\"https://angular.io/api/common/http/HttpRequest\" rel=\"nofollow noreferrer\">HttpRequest</a>.</p>\n\n<p>There's two problems with this:<br>\n 1. <code>HttpRequest</code> has a <code>url</code> param, so it is NOT an equivalent of <code>RequestOptions</code>. In fact, it seems to encapsulate the entire request, yet I don't see it used anywhere, so I am guessing it's just an internal class..<br>\n 2. <code>HttpClient</code>'s <code>get</code> method does NOT take <code>HttpRequest</code> as an argument.</p>\n\n<p>The source code for <code>HttpClient</code>'s <code>get</code> method looks like this:</p>\n\n<pre><code>/**\n * Constructs a `GET` request that interprets the body as an `ArrayBuffer` and returns the response in\n *  an `ArrayBuffer`.\n *\n * @param url     The endpoint URL.\n * @param options The HTTP options to send with the request.\n *\n * @return An `Observable` of the response, with the response body as an `ArrayBuffer`.\n */\nget(url: string, options: {\n    headers?: HttpHeaders | {\n        [header: string]: string | string[];\n    };\n    observe?: 'body';\n    params?: HttpParams | {\n        [param: string]: string | string[];\n    };\n    reportProgress?: boolean;\n    responseType: 'arraybuffer';\n    withCredentials?: boolean;\n}): Observable&lt;ArrayBuffer&gt;;\n</code></pre>\n\n<p>Is s there some type I can use for the <code>options</code> param now? Should I just define an interface that has <a href=\"https://angular.io/guide/http#adding-headers\" rel=\"nofollow noreferrer\">HttpHeaders</a> on it? If there isn't a type for it, why not?</p>\n\n<p>My old code looks like this:</p>\n\n<pre><code>reqOptions.headers.set('Authorization', user.token);\nreqOptions.headers.set('RefreshToken', user.refreshToken);\n</code></pre>\n\n<p><code>RequestOptions</code> from the old <code>Http</code> module had a headers property and was statically typed.</p>\n\n<p>P.S. I read the answer here, but it doesn't use a type:\n<a href=\"https://stackoverflow.com/questions/45797513/angular4-http-httpclient-requestoptions\">Angular4: Http -&gt; HttpClient - requestOptions</a></p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 1, "creation_date": 1562785349, "post_id": 56977024, "comment_id": 100490336, "body": "Basically this is just a limitation of TypeScript&#39;s control flow analysis, it does not understand that after checking <code>has(key)</code> the call to <code>get(key)</code> definitely won&#39;t return <code>undefined</code>. You could use a non-null assertion: <code>results.get(key)! + 1</code>"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1562785366, "post_id": 56977024, "comment_id": 100490341, "body": "There is no type guarding for <code>Map.has()</code> <a href=\"https://github.com/Microsoft/TypeScript/issues/18781\" rel=\"nofollow noreferrer\">See this issue</a>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1562785450, "post_id": 56977024, "comment_id": 100490375, "body": "@GetOffMyLawn rereading that issue reminds me that you mean <a href=\"https://github.com/microsoft/TypeScript/issues/13086\" rel=\"nofollow noreferrer\">this one</a> instead."}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562785777, "post_id": 56977024, "comment_id": 100490497, "body": "@jcalz I even see that you link to it in the issue :) However Google says the one I posted was better :) since Google is always right ;)"}, {"owner": {"reputation": 691, "user_id": 1167472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdKvb.jpg?s=128&g=1", "display_name": "NickHTTPS", "link": "https://stackoverflow.com/users/1167472/nickhttps"}, "reply_to_user": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1562792623, "post_id": 56977024, "comment_id": 100493202, "body": "@AaronBeall oh I see! Reading comments/answers makes it clear now. I thought I was missing something that&#39;s why my confusion. <code>results.get(key)! + 1</code> this actually works but I do really like the Custom Type guard in the below answer."}], "answers": [{"comments": [{"owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "edited": false, "score": 0, "creation_date": 1562785622, "post_id": 56977097, "comment_id": 100490437, "body": "OP&#39;s point is that <code>has(key)</code> should protect against your first statement. The problem is TypeScript doesn&#39;t understand this."}], "tags": [], "owner": {"reputation": 17145, "user_id": 5093961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3736a281ed5cdc18e41f6d3100d76dcc?s=128&d=identicon&r=PG", "display_name": "Steven Spungin", "link": "https://stackoverflow.com/users/5093961/steven-spungin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562785315, "creation_date": 1562785315, "answer_id": 56977097, "question_id": 56977024, "link": "https://stackoverflow.com/questions/56977024/typescript-reporting-object-is-possibly-undefined-when-it-shouldnt/56977097#56977097", "title": "TypeScript reporting Object is possibly &#39;undefined&#39; when it shouldn&#39;t", "body": "<p>If you query for a key not in the map, you will get undefined. Not because the map holds an undefined value, but because it does not hold a value at all. </p>\n\n<p>Try</p>\n\n<p>results.get(key)!</p>\n\n<p>Or</p>\n\n<p>results.get(key) as number</p>\n"}, {"comments": [{"owner": {"reputation": 706, "user_id": 353485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f7e0e5a7d77f72c5ac050eb377d55?s=128&d=identicon&r=PG", "display_name": "Nail Achmedzhanov", "link": "https://stackoverflow.com/users/353485/nail-achmedzhanov"}, "edited": false, "score": 0, "creation_date": 1563268802, "post_id": 56977161, "comment_id": 100634129, "body": "This is interesting solution. It works well for literals but not for variables.  (key1: string, key2: string) .... if (x.has(key1)) {   const a: string = x.get(key2); // No error, but should be! }"}], "tags": [], "owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "is_accepted": true, "score": 5, "last_activity_date": 1562790829, "last_edit_date": 1562790829, "creation_date": 1562785620, "answer_id": 56977161, "question_id": 56977024, "link": "https://stackoverflow.com/questions/56977024/typescript-reporting-object-is-possibly-undefined-when-it-shouldnt/56977161#56977161", "title": "TypeScript reporting Object is possibly &#39;undefined&#39; when it shouldn&#39;t", "body": "<p>There is no type guarding for <code>Map.has()</code> <a href=\"https://github.com/Microsoft/TypeScript/issues/18781\" rel=\"nofollow noreferrer\">See this issue</a> or <a href=\"https://github.com/microsoft/TypeScript/issues/13086\" rel=\"nofollow noreferrer\">this issue</a>.</p>\n\n<p>You can fix the issue by having a fallback of <code>0</code>, <code>-1</code> or whatever you think would be best for your code.</p>\n\n<pre><code>const mergedDepsObj: { [key: string]: string } = {}\nconst results: Map&lt;string, number&gt; = new Map();\nObject.keys(mergedDepsObj).forEach((key: string) =&gt; {\n  results.has(key) ? results.set(key, (results.get(key) || 0) + 1) : results.set(key, 0);\n})\n</code></pre>\n\n<h2>Custom Type Guard</h2>\n\n<p>However, above being said, we make our own type guard with help from <a href=\"https://github.com/Microsoft/TypeScript/issues/13086#issuecomment-269695308\" rel=\"nofollow noreferrer\">this comment</a>.</p>\n\n<pre><code>interface Map&lt;K, V&gt; {\n    // Works if there are other known strings.\n    has&lt;KnownKeys extends K, CheckedString extends K&gt;(this: MapWith&lt;string, V, any&gt;, key: CheckedString): this is MapWith&lt;K, V, CheckedString | KnownKeys&gt;\n\n    has&lt;CheckedString extends K&gt;(this: Map&lt;string, V&gt;, key: CheckedString): this is MapWith&lt;K, V, CheckedString&gt;\n}\n\ninterface MapWith&lt;K, V, DefiniteKey extends K&gt; extends Map&lt;K, V&gt; {\n    get(k: DefiniteKey): V;\n}\n\nconst mergedDepsObj: { [key: string]: string } = {}\nconst results: Map&lt;string, number&gt; = new Map();\n\nObject.keys(mergedDepsObj).forEach((key: string) =&gt; {\n    results.has(key) ? results.set(key, results.get(key) + 1) : results.set(key, 0);\n})\n</code></pre>\n\n<p>We can see it in action <a href=\"https://www.typescriptlang.org/play/index.html#code/JYOwLgpgTgZghgYwgAgLJwA4B4DSAaZANQD5kBvAKGWuQHpbkB1AeygGsBnZYGZMAC2go4UFMwHRkbEMwDuIZBzBRQAcw4A6KjX5wOuGfJwQAnlwgAPSCAAmXfMgDCghGwg2AysrXJL1u8g4xAAUAsAcAFxomIzAAlhKKiCqBIQEcCAmxARuJlHOEK7uXkmqAJRRYVzh0Rix8Q5pTi5unt7JyAA+gYYgxmbEFNrUuvoFRW2lvlYQtvYhVVHo2IlqqdlSpvktxe3llfw1Ncv1-LipBOOtJWqDAL5DoJCwiCgncWeNBAAiEDCgcQg-Wm-nmINmAWW5yIpEoNGQqggYGCbCiv3+IEB-QqRAA3BQHhQEMwQEpkABbaCImy-DAcADyACMAFZRMjIADauSiq2SAF0eXtkHdkABecgPYmksDIUQcACuABswJFagk9gQQPLyYzoKRxSAILJasEyviKEzmYUwBpchxgpSoNTaQyWWUNDBWABRRD8YIoraKPZlMWw4ayiAK5WaUbBADkNmYqjjIYA-BGoyqNBwkQGTAQ5Uqs4jkXGEHAwCnkABqZAARhDUUL0ezudyBAADGbw82s7GE0mq+ne5oc8j2xmi5oS-HE8mQ7WG8gm5Gp63x6ZO934SONLHcmnJy2x3mC6uWzODzX642j1mTxOu-i7mUgA\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 706, "user_id": 353485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f7e0e5a7d77f72c5ac050eb377d55?s=128&d=identicon&r=PG", "display_name": "Nail Achmedzhanov", "link": "https://stackoverflow.com/users/353485/nail-achmedzhanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1562785629, "creation_date": 1562785629, "answer_id": 56977162, "question_id": 56977024, "link": "https://stackoverflow.com/questions/56977024/typescript-reporting-object-is-possibly-undefined-when-it-shouldnt/56977162#56977162", "title": "TypeScript reporting Object is possibly &#39;undefined&#39; when it shouldn&#39;t", "body": "<p>Becouse the compiler is not so smart to take into account behavior of Map.</p>\n"}], "owner": {"reputation": 691, "user_id": 1167472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdKvb.jpg?s=128&g=1", "display_name": "NickHTTPS", "link": "https://stackoverflow.com/users/1167472/nickhttps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 56977161, "answer_count": 3, "score": 3, "last_activity_date": 1562790829, "creation_date": 1562784955, "question_id": 56977024, "link": "https://stackoverflow.com/questions/56977024/typescript-reporting-object-is-possibly-undefined-when-it-shouldnt", "title": "TypeScript reporting Object is possibly &#39;undefined&#39; when it shouldn&#39;t", "body": "<p>I'm trying to understand why TypeScript is giving me the following error: <code>Object is possibly 'undefined'</code></p>\n\n<p>Here's the code snippet:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    const mergedDepsObj: { [key: string]: string } // Implementation here is not important\n\n    const results: Map&lt;string, number&gt; = new Map();\n\n    Object.keys(mergedDepsObj).forEach((key: string) =&gt; {\n      results.has(key) ? results.set(key, results.get(key) + 1) : results.set(key, 0);\n    })\n</code></pre>\n\n<p>Basically when I try to increment a value in the <code>Map</code> (results) I get that error on this line <code>results.set(key, results.get(key) + 1)</code></p>\n\n<p>It should not yelling at me since I'm checking if the value exist first.\nMaybe I miss something?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 706, "user_id": 353485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f7e0e5a7d77f72c5ac050eb377d55?s=128&d=identicon&r=PG", "display_name": "Nail Achmedzhanov", "link": "https://stackoverflow.com/users/353485/nail-achmedzhanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1562785009, "creation_date": 1562785009, "answer_id": 56977034, "question_id": 56976993, "link": "https://stackoverflow.com/questions/56976993/typescript-how-do-you-specify-an-inlined-objects-type/56977034#56977034", "title": "TypeScript: How do you specify an inlined object&#39;s type?", "body": "<p>Cast to any</p>\n\n<pre><code>pdfCreateMock.returns(&lt;any&gt;{\n        toBuffer: (func: any) =&gt; {\n            return func();\n        }\n    });\n</code></pre>\n"}], "owner": {"reputation": 54004, "user_id": 61624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e011d13433f12be7dc754180cb38ca8?s=128&d=identicon&r=PG", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/61624/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 56977034, "answer_count": 1, "score": 0, "last_activity_date": 1562785009, "creation_date": 1562784817, "question_id": 56976993, "link": "https://stackoverflow.com/questions/56976993/typescript-how-do-you-specify-an-inlined-objects-type", "title": "TypeScript: How do you specify an inlined object&#39;s type?", "body": "<p>I've got some code that compiles when I do this:</p>\n\n<pre><code>    const createCallback: any = {\n        toBuffer: (func: any) =&gt; {\n            return func();\n        }\n    };\n    pdfCreateMock.returns(createCallback);\n</code></pre>\n\n<p>How do I get it to compile like this?</p>\n\n<pre><code>    pdfCreateMock.returns({\n        toBuffer: (func: any) =&gt; {\n            return func();\n        }\n    });\n</code></pre>\n\n<p>I don't know how to say that the inlined object is of type <code>any</code>.  This is the error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kXsRq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kXsRq.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["html", "typescript", "cordova"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11766607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf529d225e8f89b0746c6c8c26d845d?s=128&d=identicon&r=PG&f=1", "display_name": "player156432", "link": "https://stackoverflow.com/users/11766607/player156432"}, "edited": false, "score": 0, "creation_date": 1562788487, "post_id": 56977292, "comment_id": 100491608, "body": "Would this answer give the same result if you touched the dead center of the image when it&#39;s running on a tv screen and when it&#39;s running on a cell phone? I mean, is the pixel coordinate based on the number of pixels in the screen, or does the image file determine the coordinate of each spot on the image"}, {"owner": {"reputation": 717, "user_id": 9184970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zlYFm.png?s=128&g=1", "display_name": "Hoargarth", "link": "https://stackoverflow.com/users/9184970/hoargarth"}, "reply_to_user": {"reputation": 1, "user_id": 11766607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf529d225e8f89b0746c6c8c26d845d?s=128&d=identicon&r=PG&f=1", "display_name": "player156432", "link": "https://stackoverflow.com/users/11766607/player156432"}, "edited": false, "score": 0, "creation_date": 1562792022, "post_id": 56977292, "comment_id": 100492996, "body": "I have no real devices with other resolutions, so I can&#39;t test it. But I think it depends on how you style the image. Fixed width: Should always output the same result. - Percentage width: Output is different on all resolutions. So basically it depends on the width/height of the image. But as an example if your image is 500px * 500px on all resolutions (media queries), the result should be the same."}], "tags": [], "owner": {"reputation": 717, "user_id": 9184970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zlYFm.png?s=128&g=1", "display_name": "Hoargarth", "link": "https://stackoverflow.com/users/9184970/hoargarth"}, "is_accepted": false, "score": 1, "last_activity_date": 1562860466, "last_edit_date": 1562860466, "creation_date": 1562786231, "answer_id": 56977292, "question_id": 56976984, "link": "https://stackoverflow.com/questions/56976984/pixel-coordinates-of-image-based-on-image-not-screen-of-finger-touch/56977292#56977292", "title": "Pixel coordinates of image based on image, not screen, of finger touch", "body": "<p>So if I understand you right, you want to get the \"tapped\" (clicked) coordinates inside your Image, where e.g. your left upper image corner is your 0:0 coordinate?</p>\n\n<p>Also I hope jQuery is ok, if not I'm sorry but at least should give you some direction.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n\r\n  //I've added click event so you can see it here, but touchstart should work as well\r\n  $('img').on('touchstart click', function(e) {\r\n    var offset = $(this).offset();\r\n    var X = (e.pageX - offset.left);\r\n    var Y = (e.pageY - offset.top);\r\n    $('#coord').text('X: ' + X + ', Y: ' + Y);\r\n  });\r\n});\r\n\r\n//$(this).offset() gets the clicked elements (image) coordinates relative to the document\r\n//e.pageX gets the cursor/finger click position relative from left edge of document\r\n//e.pageY gets the cursor/finger click position relativ efrom top edge of document</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.wrapper {\r\n  background: white;\r\n}\r\n\r\n.image-container {\r\n  padding: 100px;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div class=\"wrapper\"&gt;\r\n  &lt;div class=\"image-container\"&gt;&lt;img src=\"https://via.placeholder.com/150C/O%20https://placeholder.com/\" /&gt;&lt;/div&gt;\r\n  &lt;div&gt;\r\n    &lt;div id=\"coord\"&gt;&lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>So basically you are just substracting the image coordinates (top left corner from image relative to document) from the clicked coordinates.</p>\n"}], "owner": {"reputation": 1, "user_id": 11766607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf529d225e8f89b0746c6c8c26d845d?s=128&d=identicon&r=PG&f=1", "display_name": "player156432", "link": "https://stackoverflow.com/users/11766607/player156432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1562860466, "creation_date": 1562784782, "question_id": 56976984, "link": "https://stackoverflow.com/questions/56976984/pixel-coordinates-of-image-based-on-image-not-screen-of-finger-touch", "title": "Pixel coordinates of image based on image, not screen, of finger touch", "body": "<p>I am creating an app on the android platform and I need to print out the pixel coordinate of where a finger touches the image. The image is in a scrollable  tag, and right now, with a touchstart event listener, if I touch one spot on the screen and then scroll and touch the same spot (different part of the image but located on the same spot as the first touch) returns the same coordinates. So the calculations are done based on the screen, not the image. I've been told to do offsets based on where it is in the screen and the scroll, but when I run the app on a phone instead of a tablet, this will give me a different coordinate on each device. I do not know the size of the image as the user uploads any image they would like. I cannot show code, so I hope my description is enough to understand what I need.</p>\n"}, {"tags": ["typescript", "actions-on-google", "auth0", "google-home"], "comments": [{"owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "edited": false, "score": 0, "creation_date": 1562785463, "post_id": 56976938, "comment_id": 100490379, "body": "What issues exactly are you running into?"}, {"owner": {"reputation": 21, "user_id": 11628334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o6lU_ijcX-w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOBQx7WRqnfjJQKaUbJ848VreadQ/mo/photo.jpg?sz=128", "display_name": "Marcelo Arnaldi", "link": "https://stackoverflow.com/users/11628334/marcelo-arnaldi"}, "reply_to_user": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "edited": false, "score": 0, "creation_date": 1562787563, "post_id": 56976938, "comment_id": 100491210, "body": "Hi Nick, I found your <a href=\"https://medium.com/google-developers/authenticating-smart-home-actions-for-the-google-assistant-with-auth0-b6fda3d2ee3d\" rel=\"nofollow noreferrer\">tutorial</a> and could not make it work, on the line <code>const app = smarthome</code> says <b>smarthome</b> is not a function, so I tried another way to use the Auth0-spa-js library but I have no idea how to do this, there is no TypeScript sample in the Auth0 site. I know there are a lot of concepts missing for me, but after a lot of fighting, I managed to make the Google Home sample work perfectly and now I have to implement the OAuth2 server."}, {"owner": {"reputation": 609, "user_id": 11267925, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W7gVkK5pC4w/AAAAAAAAAAI/AAAAAAAAAA4/wFNTQGoZPRM/photo.jpg?sz=128", "display_name": "Dan Woda", "link": "https://stackoverflow.com/users/11267925/dan-woda"}, "edited": false, "score": 0, "creation_date": 1562795190, "post_id": 56976938, "comment_id": 100494023, "body": "What is the problem with this: <a href=\"https://github.com/auth0/auth0-spa-js#getting-started\" rel=\"nofollow noreferrer\">github.com/auth0/auth0-spa-js#getting-started</a>"}, {"owner": {"reputation": 21, "user_id": 11628334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o6lU_ijcX-w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOBQx7WRqnfjJQKaUbJ848VreadQ/mo/photo.jpg?sz=128", "display_name": "Marcelo Arnaldi", "link": "https://stackoverflow.com/users/11628334/marcelo-arnaldi"}, "edited": false, "score": 0, "creation_date": 1562797925, "post_id": 56976938, "comment_id": 100494744, "body": "Hi Dan, I&#39;ve seen this documentation, in the sample I&#39;m running from Google Home: When I enter the Google Assistant App -&gt; Home Automation -&gt; &quot;+&quot; -&gt; I select my Application -&gt; The Auth0 screen appears -&gt; I log in, after that I should receive the token, but I&#39;m lost as adapt the code, for example how to register the &quot;Endpoints&quot;. Certainly I lack concepts for me ..."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11628334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o6lU_ijcX-w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOBQx7WRqnfjJQKaUbJ848VreadQ/mo/photo.jpg?sz=128", "display_name": "Marcelo Arnaldi", "link": "https://stackoverflow.com/users/11628334/marcelo-arnaldi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562933955, "creation_date": 1562933955, "answer_id": 57006895, "question_id": 56976938, "link": "https://stackoverflow.com/questions/56976938/auth0-integration-with-google-home-typescript/57006895#57006895", "title": "Auth0 integration with Google Home - TypeScript", "body": "<p>Resolved, after much fighting I was able to use the Auth0 library in TypeScript:</p>\n\n<pre><code>import { AuthenticationClient } from 'auth0'\n\nconst auth0 = new AuthenticationClient({\n   domain: '&lt;my-domin-auth0&gt;.auth0.com',\n   clientId: '&lt;clientId&gt;',\n   clientSecret: '&lt;clientSecret&gt;'\n});\n\nexport async function getUser(headers: Headers): Promise&lt;string&gt; {       \n   const authorization = headers.authorization\n   const accessToken = (authorization as string).substr(7)\n   const {email} = await auth0.getProfile(accessToken)\n   console.log(email)\n   return await Firestore.getUserId(accessToken)\n}\n</code></pre>\n\n<p>I strongly recommend reading @nick-felker article.</p>\n"}], "owner": {"reputation": 21, "user_id": 11628334, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o6lU_ijcX-w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOBQx7WRqnfjJQKaUbJ848VreadQ/mo/photo.jpg?sz=128", "display_name": "Marcelo Arnaldi", "link": "https://stackoverflow.com/users/11628334/marcelo-arnaldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562933955, "creation_date": 1562784600, "question_id": 56976938, "link": "https://stackoverflow.com/questions/56976938/auth0-integration-with-google-home-typescript", "title": "Auth0 integration with Google Home - TypeScript", "body": "<p>I have the sample (<a href=\"https://github.com/actions-on-google/smart-home-nodejs/blob/master/src/auth-provider.ts\" rel=\"nofollow noreferrer\">https://github.com/actions-on-google/smart-home-nodejs/blob/master/src/auth-provider.ts</a>) of GoogleHome running 100% on GCP, only lacking 0Auth2 authentication and the Auth0 offered service seemed like a good solution, but there is no example in TypeScript.</p>\n\n<p>Actions on Google is configured correctly and I can log in through Auth0, but I can not integrate into the example.</p>\n\n<p>After much research, I keep walking in circles.\nAt least importing from the library does not fail.</p>\n\n<pre><code>import * as express from 'express'\nimport * as util from 'util'\nimport { Headers } from 'actions-on-google'\nimport createAuth0Client from '@auth0/auth0-spa-js';\n\nimport * as Firestore from './firestore'\n\n/**\n * A function that gets the user id from an access token.\n * Replace this functionality with your own OAuth provider.\n *\n * @param headers HTTP request headers\n * @return The user id\n */\nexport async function getUser(headers: Headers): Promise&lt;string&gt; {\n  const authorization = headers.authorization\n  const accessToken = (authorization as string).substr(7)\n  return await Firestore.getUserId(accessToken)\n} ...\n</code></pre>\n"}, {"tags": ["typescript", "jestjs", "sinon"], "comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1562784166, "post_id": 56976827, "comment_id": 100489848, "body": "You could make it an <code>any</code> type: <code>const mockSnapshot:any = {};</code>"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1562784225, "post_id": 56976827, "comment_id": 100489885, "body": "Another thing is to make an interface for it <code>interface MyInterface {&#47;*Interface properties&#47;functions*&#47;}</code> then <code>const mockSnapshot: MyInterface = {};</code>"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1562784454, "post_id": 56976827, "comment_id": 100489967, "body": "A third thing is to install the <a href=\"https://www.npmjs.com/package/@types/sinon\" rel=\"nofollow noreferrer\">types</a>, and use the type that relates to <code>mockSnapshot</code>"}, {"owner": {"reputation": 54004, "user_id": 61624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e011d13433f12be7dc754180cb38ca8?s=128&d=identicon&r=PG", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/61624/daniel-kaplan"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1562784534, "post_id": 56976827, "comment_id": 100489996, "body": "@GetOffMyLawn I&#39;m trying to <i>not</i> do that 3rd suggestion because the type requires so many fields that it&#39;ll obscure the point of the test."}], "owner": {"reputation": 54004, "user_id": 61624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e011d13433f12be7dc754180cb38ca8?s=128&d=identicon&r=PG", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/61624/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562828783, "creation_date": 1562784063, "last_edit_date": 1562828783, "question_id": 56976827, "link": "https://stackoverflow.com/questions/56976827/strict-typescript-while-using-sinon-in-a-convenient-way", "title": "Strict Typescript while using sinon in a convenient way", "body": "<p>I want <code>\"strict\": true,</code> to be on in my ts config file, but this is causing me some inconveniences for my tests.  Specifically, if I have code like this:</p>\n\n<pre><code>    const mockSnapshot = {};\n    sinon.stub(loadData, 'loadData').returns(mockSnapshot);\n</code></pre>\n\n<p>I get a TS error on the second line that says:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NiorZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NiorZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>In this test, the structure of mockSnapshot is irrelevant.</p>\n\n<p>I want type checking elsewhere in my tests, but when it comes to sinon, I think I'd prefer it to allow anything.  I noticed I can add <code>// @ts-ignore</code> before the line with the error and the error will go away, but I don't want to have to litter this before every line that uses sinon.  </p>\n\n<p>Is there a best of both worlds situation, where I can say I want sinon to be lax, but I want everywhere else to be strict (without littering my code with ts-ignores)?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "observable"], "answers": [{"comments": [{"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562787750, "post_id": 56976918, "comment_id": 100491295, "body": "Dear God. RxJs could be so intimidating for beginners. I thought of() is just a convenient way of creating observable. Forget twice I don&#39;t think of() has executed even once the way i had expected. I mean even when i have <code>of(&quot;serVer cAlled:&quot; + this.i++)</code> I get <code>SERVER CALLED:0</code> and not 1. Its like it has totally ignored ++"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 1, "creation_date": 1562787960, "post_id": 56976918, "comment_id": 100491384, "body": "The reason you&#39;re getting 0 and not 1 is because of the way ++ works. If ++ is in postfix position (ie, <code>this.i++</code>) that means &quot;return this.i, then increment this.i&quot;. You need to put it into prefix position (ie, <code>++this.i</code>) if you want the increment to happen first. Confusing behavior to be sure, but unrelated to RxJS."}, {"owner": {"reputation": 1880, "user_id": 2748984, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e6b6116bcf3a08b16e952b5f6660b06a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2748984/robert"}, "edited": false, "score": 0, "creation_date": 1562788593, "post_id": 56976918, "comment_id": 100491653, "body": "of is a way to generate a sync observable, so it make a bit sense why it doesn&#39;t execute the body twice, on the other hand new Observable is a way to make complex observable which can return more than one value, or to return error, so of is very limited compared to new Observable"}], "tags": [], "owner": {"reputation": 1880, "user_id": 2748984, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e6b6116bcf3a08b16e952b5f6660b06a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2748984/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1562786335, "last_edit_date": 1562786335, "creation_date": 1562784533, "answer_id": 56976918, "question_id": 56976806, "link": "https://stackoverflow.com/questions/56976806/why-wont-two-subscriptions-to-an-observable-without-sharereplay-execute-code/56976918#56976918", "title": "Why won&#39;t two subscriptions to an observable without shareReplay() execute code twice?", "body": "<p>it seems that of return observable of it's own, so it's body doesn't get executed twice, so i recreate the example to show the difference between normal observable and of</p>\n\n<pre><code>export class AppComponent implements OnInit {\n  constructor(\n  ) {\n  }\n\n  i = 0;\n\n  ngOnInit() {\n    console.clear();\n    const ob = this.httpCall1();\n    const ob1$ = ob.pipe(map(d =&gt; d.toUpperCase()));\n    const ob2$ = ob.pipe(map(d =&gt; d.toLowerCase()));\n\n    ob1$.subscribe(d =&gt; {\n      console.log(d);\n    });\n    ob2$.subscribe(d =&gt; {\n      console.log(d);\n    });\n\n    this.i = 0;\n\n    const ob2 = this.httpCall2();\n    const ob3$ = ob2.pipe(map(d =&gt; d.toUpperCase()));\n    const ob4$ = ob2.pipe(map(d =&gt; d.toLowerCase()));\n\n    ob3$.subscribe(d =&gt; {\n      console.log(d);\n    });\n    ob4$.subscribe(d =&gt; {\n      console.log(d);\n    });\n  }\n\n  httpCall1() {\n    return of('server1 called:' + ++this.i).pipe(\n      tap(d =&gt; console.log('tap1', d)),\n    );\n  }\n\n  httpCall2() {\n    return new Observable&lt;string&gt;((observer) =&gt; {\n      this.i++;\n      observer.next('server2 called: ' + this.i);\n      observer.complete();\n    }).pipe(\n      tap(d =&gt; console.log('tap2', d)),\n    );\n  }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562784850, "post_id": 56976944, "comment_id": 100490120, "body": "You say <code>since you subscribed twice, of will do its thing twice,</code> then how come counter did not turn 2?"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562784899, "post_id": 56976944, "comment_id": 100490141, "body": "Because you called <code>of(&quot;server cAlled: 1&quot;);</code>. When the second subscribe happens, <code>of</code> emits &quot;server cAlled: 1&quot;, since that&#39;s what it was asked to do. <code>of</code> has no idea how you created that string, and since you&#39;re not calling httpcall again, no new string will get created."}, {"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562785294, "post_id": 56976944, "comment_id": 100490322, "body": "So you are saying its because i++ is not a part of observable and therefore it wont be executed twice? So in a way if I say <code>ob1$.subscribe()</code> twice I am not calling httpcall() not even a single time,  I am just calling/executing <code>of(&quot;serVer cAlled:&quot; + this.i)</code> twice ?"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562785406, "post_id": 56976944, "comment_id": 100490356, "body": "Correct. <code>i++</code> is part of <code>httpcall</code>. Subscribing will do everything that&#39;s defined by the chain of observables, but nothing in the observable chain is even aware that <code>httpcall</code> or <code>i</code> exist. So httpcall is not run, this.i is not incremented, and no new string is created."}, {"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562785930, "post_id": 56976944, "comment_id": 100490569, "body": "OK, I think I am getting it now.. but I am still not sure what difference would <code>shareReplay</code> make in this example. Because as of now I see no difference in the result (with or without shareReplay)"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562786142, "post_id": 56976944, "comment_id": 100490648, "body": "In your example, it makes very little difference, since there are no side effects in the observable. If you added a <code>tap</code> with a log statement, you&#39;d see that the tap is not being rerun when shareReplay is used. This indirectly points out that the <code>map</code> and <code>of</code> are not being rerun either. If instead the observable does have side effects -- such as my modified example with i++ in <code>Observable.create</code>, or in <code>http.get</code> -- then the difference is more important, because you (probably) don&#39;t want those side effects to happen multiple times."}, {"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562786655, "post_id": 56976944, "comment_id": 100490863, "body": "Just when I thought I have understood it, I have gotten more confused. You said that in my example <code>of()</code> will do its thing twice if I subscribe twice. So I changed my code to <code>return of(&quot;serVer cAlled:&quot; + this.i++);</code> and subscribed to <code>ob1$</code> twice and the counter is <code>0 both the times??</code> Should it not be 1 the first time and 2 the second time ?"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562787267, "post_id": 56976944, "comment_id": 100491094, "body": "All that <code>of</code> knows is that it was passed a string. Whatever that string is, it will emit that string, forever. If you pass in &quot;foo&quot;, then on every subscription, it will emit &quot;foo&quot;. If you pass in &quot;semVer cAlled: 0&quot;  (which you did), then on every subscription it will emit &quot;semVer cAlled: 0&quot;. It has no idea how that string was constructed."}, {"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562787535, "post_id": 56976944, "comment_id": 100491199, "body": "Not even when the evaluation of i is happening within the of()? <code>of()</code> is a weird observable. <code>return of( this.i++)</code>"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562787704, "post_id": 56976944, "comment_id": 100491272, "body": "When you do <code>console.log(&#39;hello &#39; + 0)</code>, javascript starts by evaluating <code>&#39;hello &#39; + 0</code>, and produces the string <code>&#39;hello 0&#39;</code>. Now that it knows that value, it can call console.log, passing in <code>&#39;hello 0&#39;</code>. When you do <code>of(&#39;semVer cAlled: &#39; + 0)</code>, it&#39;s the same thing. Javascript first concatenates the strings, then passes a string in. Changing the <code>0</code> to a <code>this.i++</code> just adds one more step to the calculation, but this calculation is still done <i>before</i> <code>of</code> is called. <code>of</code> only gets passed in a string. This isn&#39;t something special about <code>of</code>, it&#39;s about order of operations in javascript."}, {"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562788266, "post_id": 56976944, "comment_id": 100491526, "body": "Got it! it&#39;s because its i++ and not ++i.  The only thing that I have still not be able to wrap by head around is <code>shareReplay</code> part. You are not obliged to make me understand this. I am a beginner in javascript. I appreciate the help. Really. +1."}, {"owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "edited": false, "score": 0, "creation_date": 1562788610, "post_id": 56976944, "comment_id": 100491661, "body": "May be I should post a separate question for shareReplay?"}], "tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": false, "score": 2, "last_activity_date": 1562784856, "last_edit_date": 1562784856, "creation_date": 1562784628, "answer_id": 56976944, "question_id": 56976806, "link": "https://stackoverflow.com/questions/56976806/why-wont-two-subscriptions-to-an-observable-without-sharereplay-execute-code/56976944#56976944", "title": "Why won&#39;t two subscriptions to an observable without shareReplay() execute code twice?", "body": "<p>When you call subscribe, that will cause the observable to do everything it was defined to do. It was defined using <code>of(\"server cAlled: 1\");</code>, which is then passed into a map operator. So since you subscribed twice, <code>of</code> will do its thing twice, and <code>map</code> will do its thing twice.</p>\n\n<p>You happened to create the observable inside a function named httpcall, but the observable doesn't know anything about httpcall. httpcall will not be invoked an additional time.</p>\n\n<p>If you want the incrementing of this.i to be part of what happens when subscribing, then you may need to use Observable.create. For example:</p>\n\n<pre><code>httpcall() {\n  return Observable.create((observer) =&gt; {\n    this.i++;\n    observer.next(\"server called: \" + this.i);\n    observer.complete();\n  })\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2207, "user_id": 8578281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/384fd.jpg?s=128&g=1", "display_name": "Goga Koreli", "link": "https://stackoverflow.com/users/8578281/goga-koreli"}, "is_accepted": false, "score": 0, "last_activity_date": 1562931540, "creation_date": 1562931540, "answer_id": 57006269, "question_id": 56976806, "link": "https://stackoverflow.com/questions/56976806/why-wont-two-subscriptions-to-an-observable-without-sharereplay-execute-code/57006269#57006269", "title": "Why won&#39;t two subscriptions to an observable without shareReplay() execute code twice?", "body": "<p>That is because <code>httpcall()</code> is called only once via following line <code>let ob = this.httpcall().pipe(map(d =&gt; d));</code>. So it means that <code>Observable</code> that is returned by <code>httpcall()</code> will be reused thereafter.</p>\n\n<p>If thats clear, now think about <code>ob</code>, which is source Observable. If you subscribe to this Observable you are going to get <code>of(\"server cAlled:\" + this.i);</code> where <code>this.i = 1</code>. <code>this.i</code> is only going to increase if method <code>httpcall()</code> is executed once more, but it is not. <strong>Instead you are subscribing to the cold Observable <code>ob</code> which will just print what was used to create it.</strong> The value of <code>this.i</code> (which equals to 1) is already stored inside Observable <code>ob</code> and it is not going to be changed until new instance is created, no matter how many times you subscribe to <code>ob</code>.</p>\n\n<hr>\n\n<p><strong>Now lets look at the following code which is different:</strong></p>\n\n<pre><code>    let ob1$ = this.httpcall().pipe(map(d =&gt; d)).pipe(map(d =&gt; d.toUpperCase()));\n    let ob2$ = this.httpcall().pipe(map(d =&gt; d)).pipe(map(d =&gt; d.toLowerCase()));\n</code></pre>\n\n<p>In this situation <code>httpcall()</code> is called twice, thus <code>this.i++;</code> would happen twice and you would get what you were thinking to get.</p>\n"}], "owner": {"reputation": 4116, "user_id": 2064292, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/vyPBn.png?s=128&g=1", "display_name": "SamuraiJack", "link": "https://stackoverflow.com/users/2064292/samuraijack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1562931540, "creation_date": 1562783991, "question_id": 56976806, "link": "https://stackoverflow.com/questions/56976806/why-wont-two-subscriptions-to-an-observable-without-sharereplay-execute-code", "title": "Why won&#39;t two subscriptions to an observable without shareReplay() execute code twice?", "body": "<p>I was trying to figure out RxJs. ShareReplay operator in particular. As per my understanding if there are two subscriptions to an observable then the observable should be executed twice. Unless there is a shareReplay involved. Obviously my understanding is incorrect because that is not what I is happening here. Could someone please help me understand this?  </p>\n\n<pre><code>export class TestComponent implements OnInit {\n      constructor() {}\n      i = 0;\n      ngOnInit() {\n        console.clear();\n        let ob = this.httpcall().pipe(map(d =&gt; d));\n        let ob1$ = ob.pipe(map(d =&gt; d.toUpperCase()));\n        let ob2$ = ob.pipe(map(d =&gt; d.toLowerCase()));\n\n        ob1$.subscribe(d =&gt; {\n          console.log(d);\n        });\n        ob2$.subscribe(d =&gt; {\n          console.log(d);\n        });\n      }\n\n      httpcall() {\n        console.log(\"called\");\n        this.i++;\n        return of(\"server cAlled:\" + this.i);\n      }\n    }\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>called\n SERVER CALLED:1\n server called:1\n</code></pre>\n\n<p>The counter i did not get incremented to two even though there are two subscriptions and no shareReplay involved. </p>\n\n<p><strong>I was expecting(without shareReplay):</strong></p>\n\n<pre><code> called\n SERVER CALLED:1\n called\n server called:2\n</code></pre>\n\n<p><strong>And with <code>let ob = this.httpcall().pipe(map(d=&gt;d),shareReplay());</code> I was expecting:</strong></p>\n\n<pre><code> called\n SERVER CALLED:1\n server called:1\n</code></pre>\n"}, {"tags": ["typescript", "ionic4"], "comments": [{"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 1, "creation_date": 1562783799, "post_id": 56976750, "comment_id": 100489668, "body": "InitializeItems doesn&#39;t return a promise, so the <code>await</code> in <code>await this.initializeItems()</code> doesn&#39;t really do anything. What&#39;s do you want to be the indicator that initializeItems is &quot;done&quot;? when the subscribe callback runs to completion?"}, {"owner": {"reputation": 25, "user_id": 11319085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0gtWhjqxqQ4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree5MMn1Pg9OlBEAz7ry1r-X_g4TA/mo/photo.jpg?sz=128", "display_name": "geeth chowdary", "link": "https://stackoverflow.com/users/11319085/geeth-chowdary"}, "reply_to_user": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1562783966, "post_id": 56976750, "comment_id": 100489751, "body": "May know how to rewrite my code. I have been stuck here since 4 hours."}], "answers": [{"tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": true, "score": 1, "last_activity_date": 1562784123, "creation_date": 1562784123, "answer_id": 56976838, "question_id": 56976750, "link": "https://stackoverflow.com/questions/56976750/issue-with-sequential-function-calls-using-async-await/56976838#56976838", "title": "Issue with Sequential function calls using async await", "body": "<p><code>await</code> is meant for use with promises. Since initializeItems doesn't return a promise, await doesn't actually wait for anything. You need to modify initializeItems to return a promise. My guess is that you expect the subscribe callback to be invoked exactly once, and at that point the promise should resolve, so you'd want to do this:</p>\n\n<pre><code>initializeItems() {\n  return new Promise((resolve) =&gt; { // &lt;---- creating a promise\n    this.dataService.readLocalData().subscribe( data =&gt; {\n      console.log('Local Data');\n      this.items = data;\n      // console.log(this.items);\n      this.tempItems = [];\n      for (const i of this.items.material ){\n        console.log(i['material-name']);\n        this.tempItems.push( i['material-name'] );\n      }\n      console.log('***********************************************');\n      console.log(this.tempItems);\n      resolve(); // &lt;-- resolving the promise\n    });\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11319085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0gtWhjqxqQ4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ree5MMn1Pg9OlBEAz7ry1r-X_g4TA/mo/photo.jpg?sz=128", "display_name": "geeth chowdary", "link": "https://stackoverflow.com/users/11319085/geeth-chowdary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56976838, "answer_count": 1, "score": 0, "last_activity_date": 1562784123, "creation_date": 1562783743, "question_id": 56976750, "link": "https://stackoverflow.com/questions/56976750/issue-with-sequential-function-calls-using-async-await", "title": "Issue with Sequential function calls using async await", "body": "<p>I found that when I tried to call functions initializeItems() need to be called first. but checkList() is getting called before initializeItems()</p>\n\n<pre><code>  initializeItems() {\n\n    this.dataService.readLocalData().subscribe( data =&gt; {\n      console.log('Local Data');\n      this.items = data;\n      // console.log(this.items);\n      this.tempItems = [];\n      for (const i of this.items.material ){\n        console.log(i['material-name']);\n        this.tempItems.push( i['material-name'] );\n      }\n      console.log('***********************************************');\n      console.log(this.tempItems);\n    });\n  }\n\n  checkList(ev: any){\n    // set val to the value of the searchbar\n    const val = ev.target.value;\n    console.log(val);\n    console.log(this.tempItems);\n    // if the value is an empty string don't filter the items\n    if (val &amp;&amp; val.trim() !== '') {\n      this.tempItems = this.tempItems.filter((item) =&gt; {\n        return (item.toLowerCase().indexOf(val.toLowerCase()) &gt; -1);\n      });\n    }\n  }\n\n  async getItems(ev: any) {\n    // Reset items back to all of the items\n    await this.initializeItems(); //This need to execute first\n    await this.checkList(ev); //But this getting executed\n  }\n</code></pre>\n\n<p>If the function calls sequentially. My result will be</p>\n\n<p>initializeItems()</p>\n\n<p>variable tempItems will be//full list</p>\n\n<p>then</p>\n\n<p>checkList()</p>\n\n<p>variable tempItems will be //filtered list from a searchable drop-down</p>\n"}, {"tags": ["angular", "typescript", "npm", "rxjs", "angular8"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10747134"}, "edited": false, "score": 0, "creation_date": 1562783958, "post_id": 56976691, "comment_id": 100489747, "body": "As a side note, be sure to read the Angular upgrade guides. rxjs-compat is no longer suggested. As well, you don&#39;t need to install rxjs globally.  If you have a modern IDE, a simpler solution to find a missing import is to delete the import line and use the auto import feature if it has it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562784338, "post_id": 56976757, "comment_id": 100489923, "body": "in which file do i have to add this statement?"}, {"owner": {"reputation": 191, "user_id": 11735900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bde4155f143d2bbcc32e3a1f58c0c65?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Ray", "link": "https://stackoverflow.com/users/11735900/josh-ray"}, "reply_to_user": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562785292, "post_id": 56976757, "comment_id": 100490321, "body": "You would add it wherever you are trying to use Observables. So all of your files that have the &#39;rxjs/Observable&#39; import should be changed to &#39;rxjs&#39;."}, {"owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562785631, "post_id": 56976757, "comment_id": 100490439, "body": "I haven&#39;t used any observables so far. All I did was create a new component."}, {"owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562785934, "post_id": 56976757, "comment_id": 100490570, "body": "I did include FormsModule and HttpModule whilst following a tutorial. I removed them and then it compiled successfully. Did I get the error because of the inclusion?"}, {"owner": {"reputation": 191, "user_id": 11735900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bde4155f143d2bbcc32e3a1f58c0c65?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Ray", "link": "https://stackoverflow.com/users/11735900/josh-ray"}, "reply_to_user": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562786329, "post_id": 56976757, "comment_id": 100490731, "body": "It sounds like you&#39;re dependencies aren&#39;t all correct. In your package.json, see if your dependencies are using at least version 7 of angular forms and http:  <code>&quot;@angular&#47;forms&quot;: &quot;~7.0.0&quot;</code>, <code>&quot;@angular&#47;http&quot;: &quot;~7.0.0&quot;</code>.   If not, you&#39;ll want to run <code>npm update &quot;@angular&#47;forms&quot;</code> and <code>npm update &quot;@angular&#47;http&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562787012, "post_id": 56976757, "comment_id": 100490997, "body": "Seems like there is no @angular/http in my dependencies. @angular/forms is of version 8.1.0 What should be done?"}, {"owner": {"reputation": 191, "user_id": 11735900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bde4155f143d2bbcc32e3a1f58c0c65?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Ray", "link": "https://stackoverflow.com/users/11735900/josh-ray"}, "reply_to_user": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "edited": false, "score": 0, "creation_date": 1562787358, "post_id": 56976757, "comment_id": 100491127, "body": "If you are using angular CLI, simply run <code>ng update</code>. If not, run <code>npm install -g @angular&#47;cli</code> followed by <code>ng update --all</code> to update all dependencies to the latest version."}], "tags": [], "owner": {"reputation": 191, "user_id": 11735900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bde4155f143d2bbcc32e3a1f58c0c65?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Ray", "link": "https://stackoverflow.com/users/11735900/josh-ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1562783759, "creation_date": 1562783759, "answer_id": 56976757, "question_id": 56976691, "link": "https://stackoverflow.com/questions/56976691/how-do-i-resolve-the-following-error-in-angular-8/56976757#56976757", "title": "How do I resolve the following error in Angular 8?", "body": "<p>The rxjs/Observable import was supposed to be deprecated in place of just 'rxjs', so you should just have to change your import from:</p>\n\n<pre><code>import { Observable } from 'rxjs/Observable';\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>import { Observable } from 'rxjs';\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11480257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-99KKNvLgHUo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTN0xQMbKo9ECT75y_BkNsdF1jrQ/mo/photo.jpg?sz=128", "display_name": "Archita Vasuki", "link": "https://stackoverflow.com/users/11480257/archita-vasuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1947, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562784337, "creation_date": 1562783526, "last_edit_date": 1562784337, "question_id": 56976691, "link": "https://stackoverflow.com/questions/56976691/how-do-i-resolve-the-following-error-in-angular-8", "title": "How do I resolve the following error in Angular 8?", "body": "<blockquote>\n  <p>ERROR in\n  ../node_modules/@angular/http/src/backends/jsonp_backend.d.ts:1:28 -\n  error TS2307: Cannot find module 'rxjs/Observable'.</p>\n  \n  <p>1 import { Observable } from 'rxjs/Observable';\n                               ~~~~~~~~~~~~~~~~~ ../node_modules/@angular/http/src/backends/xhr_backend.d.ts:1:28 -\n  error TS2307: Cannot find module 'rxjs/Observable'.</p>\n  \n  <p>1 import { Observable } from 'rxjs/Observable';\n                               ~~~~~~~~~~~~~~~~~ ../node_modules/@angular/http/src/http.d.ts:1:28 - error TS2307:\n  Cannot find module 'rxjs/Observable'.</p>\n  \n  <p>1 import { Observable } from 'rxjs/Observable';\n                               ~~~~~~~~~~~~~~~~~</p>\n  \n  <p>** Angular Live Development Server is listening on localhost:4200, open your browser on <a href=\"http://localhost:4200/\" rel=\"nofollow noreferrer\">http://localhost:4200/</a> ** i \uff62wdm\uff63: Failed to\n  compile.</p>\n</blockquote>\n\n<p>I've tried all of these options and none of them worked.</p>\n\n<pre><code>npm install rxjs -g\nnpm cache clean\n</code></pre>\n\n<p>and</p>\n\n<p><code>npm install --save rxjs-compat</code></p>\n\n<p>and</p>\n\n<p><code>npm install -g --unsafe-perm --verbose @angular/cli</code></p>\n\n<p>After <code>ng serve --open</code>, the server says: Cannot Get</p>\n"}, {"tags": ["javascript", "node.js", "angular", "typescript", "npm"], "comments": [{"owner": {"reputation": 1962, "user_id": 2789884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264d7bb52024efe30d12845515de13ce?s=128&d=identicon&r=PG", "display_name": "Xesenix", "link": "https://stackoverflow.com/users/2789884/xesenix"}, "edited": false, "score": 1, "creation_date": 1562786261, "post_id": 56976559, "comment_id": 100490700, "body": "hmm the content of package.json in that dist folder may be important especially <code>main</code> property value as it tell npm what file to use as entry point to use. Also try <code>npm i file:..&#47;the-other-project-dependency&#47;dist</code>"}, {"owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "reply_to_user": {"reputation": 1962, "user_id": 2789884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264d7bb52024efe30d12845515de13ce?s=128&d=identicon&r=PG", "display_name": "Xesenix", "link": "https://stackoverflow.com/users/2789884/xesenix"}, "edited": false, "score": 0, "creation_date": 1562787042, "post_id": 56976559, "comment_id": 100491007, "body": "@Xesenix I think you are onto something.  I did not set up the <code>main</code> property  right.  I&#39;m fixing it now, but running into some other compile errors so I&quot;ll let you know if it works ASAP."}, {"owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "reply_to_user": {"reputation": 1962, "user_id": 2789884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264d7bb52024efe30d12845515de13ce?s=128&d=identicon&r=PG", "display_name": "Xesenix", "link": "https://stackoverflow.com/users/2789884/xesenix"}, "edited": false, "score": 0, "creation_date": 1562787644, "post_id": 56976559, "comment_id": 100491244, "body": "Hmm I fixed the <code>main</code> attribute,  but I still get the <code>package.json</code> not found message.  I don&#39;t get this if for example I install <a href=\"https://github.com/fireflysemantics/validator\" rel=\"nofollow noreferrer\">github.com/fireflysemantics/validator</a> locally from the <code>dist</code> folder."}, {"owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "reply_to_user": {"reputation": 1962, "user_id": 2789884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264d7bb52024efe30d12845515de13ce?s=128&d=identicon&r=PG", "display_name": "Xesenix", "link": "https://stackoverflow.com/users/2789884/xesenix"}, "edited": false, "score": 0, "creation_date": 1562791302, "post_id": 56976559, "comment_id": 100492691, "body": "OK - It has something to do with me including other private dependencies.  I stripped down the project to be dependency free, and it install fine.  I&#39;ll start with a brand new bare project and build it up with the other project dependencies, until I start hitting this error."}, {"owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "reply_to_user": {"reputation": 1962, "user_id": 2789884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264d7bb52024efe30d12845515de13ce?s=128&d=identicon&r=PG", "display_name": "Xesenix", "link": "https://stackoverflow.com/users/2789884/xesenix"}, "edited": false, "score": 1, "creation_date": 1562792902, "post_id": 56976559, "comment_id": 100493300, "body": "It looks like it has to do with private transitive dependencies.  For example if we have package <code>privateA</code> that depends on <code>privateB</code> and we install private A in the Angular project, it works as long as <code>privateA</code> does not depend on <code>privateB</code>.  When <code>privateB</code> is installed in <code>privateA</code> and an attempt is made to install <code>privateA</code> in the Angular project npm will complain that it cannot install <code>privateB</code> ..."}, {"owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "reply_to_user": {"reputation": 1962, "user_id": 2789884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264d7bb52024efe30d12845515de13ce?s=128&d=identicon&r=PG", "display_name": "Xesenix", "link": "https://stackoverflow.com/users/2789884/xesenix"}, "edited": false, "score": 1, "creation_date": 1562799406, "post_id": 56976559, "comment_id": 100495094, "body": "I think its an NPM Bug: <a href=\"https://npm.community/t/npm-is-generating-the-wrong-path-for-transitive-private-local-file-system-deps/8763\" rel=\"nofollow noreferrer\">npm.community/t/&hellip;</a>"}], "owner": {"reputation": 29171, "user_id": 1684269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5adbf1d60d27b9ee3aeee069591ba88b?s=128&d=identicon&r=PG", "display_name": "Ole", "link": "https://stackoverflow.com/users/1684269/ole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562822981, "creation_date": 1562782925, "last_edit_date": 1562822981, "question_id": 56976559, "link": "https://stackoverflow.com/questions/56976559/installing-a-private-package-in-an-angular-8-project", "title": "Installing a private package in an Angular 8 project", "body": "<p>I have a private package on the file system that I'm trying to install in an Angular 8 project. So far with non-angular projects, this has worked fine. From the root of the Angular project I do:</p>\n\n<pre><code>npm i -S ../the-other-project-dependency/dist\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>npm ERR! Could not install from \"../the-other-project-dependency/the-other-project-dependency\" as it does not contain a package.json file.\n</code></pre>\n\n<p>The part of this that is true is that <code>the-other-project-dependency</code> does not contain a <code>package.json</code> file.  </p>\n\n<p>The <code>package.json</code> file is in <code>../the-other-project-dependency/dist</code>.  Specifically, it is in the <code>dist</code> directory. </p>\n\n<p>So I'm not sure if NPM is saying that the <code>dist</code> directory should be named <code>the-other-project-dependency</code>?</p>\n\n<p>I tried renaming <code>dist</code> to <code>the-other-project-dependency</code> and now it gets passed that error, but it gives an error for another private project dependency:</p>\n\n<p>Specifically it says:</p>\n\n<pre><code>`the-other-project-dependency/yet-another-private-dependency` could not be installed as it does not contain a `package.json` file.  \n</code></pre>\n\n<p>So it looks as if NPM does not understand how to work with locally installed packages.  In this last case it seems as if it's saying the <code>yet-another-private-package-dependency</code> should be laid out as a sibling of <code>the-other-project-dependency</code> and it's not reading the file system path to that dependency.</p>\n\n<p>I assumed <a href=\"https://stackoverflow.com/questions/14381898/local-dependency-in-package-json\">per this post</a> that using local file deps should just work.</p>\n\n<h2>Update</h2>\n\n<p>I think it's a bug in NPM.  <a href=\"https://npm.community/t/npm-is-generating-the-wrong-path-for-transitive-private-local-file-system-deps/8763\" rel=\"nofollow noreferrer\">I filed a report here</a></p>\n\n<h2>Resolution</h2>\n\n<p>Was able to get it working using yarn, but I had to remove the local private packages and reinstall them with yarn, as yarn uses a slightly different path string for local dependencies.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562782758, "post_id": 56976487, "comment_id": 100489225, "body": "What values do you want <code>config.copies</code> and <code>config.name</code> to have inside the implementation if someone just calls <code>print()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "reply_to_user": {"reputation": 9809, "user_id": 2308005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/I8e1z.jpg?s=128&g=1", "display_name": "Medet Tleukabiluly", "link": "https://stackoverflow.com/users/2308005/medet-tleukabiluly"}, "edited": false, "score": 0, "creation_date": 1562782826, "post_id": 56976498, "comment_id": 100489263, "body": "Yeah, you wouldn&#39;t assign a default value."}], "tags": [], "owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1562783826, "last_edit_date": 1562783826, "creation_date": 1562782656, "answer_id": 56976498, "question_id": 56976487, "link": "https://stackoverflow.com/questions/56976487/typescript-default-value-of-function-parameter-missing-required-properties/56976498#56976498", "title": "Typescript: default value of function parameter missing required properties", "body": "<h2>Option 1</h2>\n\n<p>Make your interface values optional using a <code>?</code>:</p>\n\n<pre><code>interface IPrintConfig {\n    name?: string;\n    copies?: number;\n}\n\nfunction print(config: IPrintConfig = {}) {\n    console.log(`Print ${config.copies} on printer ${config.name}`);\n}\n</code></pre>\n\n<h2>Option 2</h2>\n\n<p>Make the parameter optional instead of predefined:</p>\n\n<pre><code>function print(config?: IPrintConfig) {\n  if(config)\n    console.log(`Print ${config.copies} on printer ${config.name}`);\n  else\n    console.log(`No value passed`);\n}\n</code></pre>\n\n<h2>Option 3</h2>\n\n<p>Set the default values:</p>\n\n<pre><code>function print(config: IPrintConfig = {name: '', copies: -1}) {\n    console.log(`Print ${config.copies} on printer ${config.name}`);\n}\n</code></pre>\n\n<h2>Option 4</h2>\n\n<p>Require that the parameter be passed to the function:</p>\n\n<pre><code>function print(config: IPrintConfig) {\n    console.log(`Print ${config.copies} on printer ${config.name}`);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562782935, "post_id": 56976544, "comment_id": 100489307, "body": "What do you intend <code>config?.properties</code> to mean?  That&#39;s not valid TypeScript or JavaScript syntax, as far as I know"}, {"owner": {"reputation": 9809, "user_id": 2308005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/I8e1z.jpg?s=128&g=1", "display_name": "Medet Tleukabiluly", "link": "https://stackoverflow.com/users/2308005/medet-tleukabiluly"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562782955, "post_id": 56976544, "comment_id": 100489316, "body": "Indeed it is a valid operator in TypeScript, and called optional chaining"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562783042, "post_id": 56976544, "comment_id": 100489354, "body": "<a href=\"http://www.typescriptlang.org/play//#code/JYOwLgpgTgZghgYwgAgJIAUqjAYQPYgzADmyA3gFDLXIhwC2EAXMgM5hYjEDcVNCeAA7AIrFiACu9AEbReAXwoUYEkAjDACyQZzAAKAYRIB+Fhl34jxAJTk+1Q6zwAbCADpneYnoAGmbMgAJGSGRMTGbgLCovLIWjrY0EEhBGERdIzyPta8NMgA9Pl5xXkAogBK5QDy5cgAtA0NAHzIAH4lNBXVtY29vS2tFIoUCeB6OUA\" rel=\"nofollow noreferrer\">I don&#39;t think so</a>"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1562783350, "post_id": 56976544, "comment_id": 100489491, "body": "The exclamation point is valid though <code>config!.properties</code> might mean something different though"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562783402, "post_id": 56976544, "comment_id": 100489511, "body": "<code>config!.properties</code> will throw a runtime exception if <code>config</code> is not defined, so you don&#39;t want to do that."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562783477, "post_id": 56976544, "comment_id": 100489536, "body": "<code>config?.properties</code> just <a href=\"https://github.com/microsoft/TypeScript/issues/16\" rel=\"nofollow noreferrer\">isn&#39;t valid TypeScript</a> because it <a href=\"https://github.com/tc39/proposal-optional-chaining\" rel=\"nofollow noreferrer\">isn&#39;t yet valid JavaScript</a>; it&#39;s a stage 2 proposal.  One day, yes, maybe.  Now, no."}, {"owner": {"reputation": 9809, "user_id": 2308005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/I8e1z.jpg?s=128&g=1", "display_name": "Medet Tleukabiluly", "link": "https://stackoverflow.com/users/2308005/medet-tleukabiluly"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562783493, "post_id": 56976544, "comment_id": 100489542, "body": "@jcalz my bad, mixed up with <code>!</code>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562783572, "post_id": 56976544, "comment_id": 100489574, "body": "@MedetTleukabiluly that&#39;s a <a href=\"http://www.typescriptlang.org/play//#code/JYOwLgpgTgZghgYwgAgJIAUqjAYQPYgzADmyA3gFDLXIhwC2EAXMgM5hYjEDcVNCeAA7AIrFiACu9AEbReAXwoUYEkAjDACyQZzAAKAYRIB+Fhl34jxAJTk+1Q6zwAbCADpneYnoAGmbMgAJGSGRMQAhG4CwqLyyFo62NBBIQRhkXSM8j7WCkqJ4Hq5yAD0JcgASgCqAHIAKqgAsgCiyM0VFQDyFch1AJ6CEM1QUHhQLKEkyMCsyKoAJhBEIBDzQA\" rel=\"nofollow noreferrer\">runtime error</a> so you don&#39;t want to suggest that either."}], "tags": [], "owner": {"reputation": 9809, "user_id": 2308005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/I8e1z.jpg?s=128&g=1", "display_name": "Medet Tleukabiluly", "link": "https://stackoverflow.com/users/2308005/medet-tleukabiluly"}, "is_accepted": false, "score": 0, "last_activity_date": 1562783723, "last_edit_date": 1562783723, "creation_date": 1562782873, "answer_id": 56976544, "question_id": 56976487, "link": "https://stackoverflow.com/questions/56976487/typescript-default-value-of-function-parameter-missing-required-properties/56976544#56976544", "title": "Typescript: default value of function parameter missing required properties", "body": "<p>What if you make param optional?</p>\n\n<pre><code>interface IPrintConfig {\n    name: string;\n    copies: number;\n}\n\nfunction print(config?: IPrintConfig) {\n    config  &amp;&amp; console.log(`Print ${config.copies} on printer ${config.name}`);\n}\n\nprint();\n</code></pre>\n"}], "owner": {"reputation": 3073, "user_id": 4127542, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6a49e7f884f0e5abe66ec87101956457?s=128&d=identicon&r=PG&f=1", "display_name": "phani", "link": "https://stackoverflow.com/users/4127542/phani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 56976498, "answer_count": 2, "score": 0, "last_activity_date": 1562783826, "creation_date": 1562782594, "question_id": 56976487, "link": "https://stackoverflow.com/questions/56976487/typescript-default-value-of-function-parameter-missing-required-properties", "title": "Typescript: default value of function parameter missing required properties", "body": "<pre><code>interface IPrintConfig {\n    name: string;\n    copies: number;\n}\n\nfunction print(config: IPrintConfig = {}) {\n    console.log(`Print ${config.copies} on printer ${config.name}`);\n}\n\nprint();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/g5VNw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g5VNw.png\" alt=\"enter image description here\"></a></p>\n\n<p>when nothing it passed to <code>print()</code> i made the default value as <code>{}</code>. But <code>print()</code> is expecting a value of type <code>IPrintConfig</code> which comntains <code>name</code> and <code>copies</code> properties. I can solve this issue by making both of those properties as optional. Is there another way to solve this issue without making them optional</p>\n"}, {"tags": ["typescript", "asynchronous", "async-await", "ionic4"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3869696, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4a7afcf2279ee610479e50672244ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Barry the Beginner", "link": "https://stackoverflow.com/users/3869696/barry-the-beginner"}, "edited": false, "score": 0, "creation_date": 1562855279, "post_id": 56988293, "comment_id": 100517557, "body": "makes sense but any syntax pointers for the changes in addClosestToTodayFlag()? Apologies I&#39;m relatively new to this stuff!"}, {"owner": {"reputation": 795, "user_id": 5254957, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WgxtF.jpg?s=128&g=1", "display_name": "Janis Jansen", "link": "https://stackoverflow.com/users/5254957/janis-jansen"}, "reply_to_user": {"reputation": 31, "user_id": 3869696, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4a7afcf2279ee610479e50672244ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Barry the Beginner", "link": "https://stackoverflow.com/users/3869696/barry-the-beginner"}, "edited": false, "score": 0, "creation_date": 1563342884, "post_id": 56988293, "comment_id": 100662604, "body": "@BarrytheBeginner sorry, did not see your answer there. I updated the answer with a little code example, hope it works."}, {"owner": {"reputation": 31, "user_id": 3869696, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4a7afcf2279ee610479e50672244ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Barry the Beginner", "link": "https://stackoverflow.com/users/3869696/barry-the-beginner"}, "edited": false, "score": 0, "creation_date": 1563543886, "post_id": 56988293, "comment_id": 100746330, "body": "Exactly what I was looking for @carnageous. Thank you for your help."}], "tags": [], "owner": {"reputation": 795, "user_id": 5254957, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WgxtF.jpg?s=128&g=1", "display_name": "Janis Jansen", "link": "https://stackoverflow.com/users/5254957/janis-jansen"}, "is_accepted": true, "score": 1, "last_activity_date": 1563342855, "last_edit_date": 1563342855, "creation_date": 1562845014, "answer_id": 56988293, "question_id": 56975639, "link": "https://stackoverflow.com/questions/56975639/html-on-my-ionic-4-app-is-displaying-before-my-function-is-called/56988293#56988293", "title": "html on my ionic 4 app is displaying before my function is called", "body": "<p>When you push the matches to the <code>this.matches</code> attribute, the view gets updated immediately. So in order to only show the matches when your <code>addClosestToTodayFlag</code> function finished you should call it, wait for it and then update the <code>matches</code> array.</p>\n\n<p>The way I would do it is to create a variable to store the \"raw\" matches and then call addClosestToTodayFlag with this, pushing the result to this.matches once it finished.</p>\n\n<p>Insdead of <code>this.matches = [];</code> at the beginning of the function, create a temporary variable like <code>recievedMatches</code>, push to this variable and pass it to addClosestToTodayFlag.</p>\n\n<p>inside addClosestToTodayFlag, return a promise containing the result data and \nthen push the result data to this.matches.</p>\n\n<p><strong>Update</strong>\nHere you have a code-example (not tested but I think this should work). I would say you don't even need to make addClosestToTodayFlag async or return a promise, as it does not seem to perform any asyncronous tasks anyways.</p>\n\n<pre><code>export class FixturesPage implements OnInit {\n    public matches: Array&lt;any&gt;;\n    constructor(private matchService : MatchService) {}\n\n    ngOnInit() {\n        this.matchService.getMatches().get().then(matchSnapshot =&gt; {\n            let matches = [];\n            matchSnapshot.forEach(snap =&gt; {\n                matches.push({\n                    id: snap.id,\n                    date: snap.data().date,\n                    team: snap.data().team,\n                    home: snap.data().home,\n                    away: snap.data().away,\n                    homeScore: snap.data().homeScore,\n                    awayScore: snap.data().awayScore,\n                    closestToToday: \"N\"\n                });\n                return false;\n            });\n            this.matches = this.addClosestToTodayFlag(matches);\n        });\n    }\n\n    private addClosestToTodayFlag(fixtures : Array&lt;any&gt;): Array&lt;any&gt; {\n        var today = Math.floor(Date.now() / 1000);\n        var fixtureClosestToToday = Math.abs(today - fixtures[0].date.seconds);\n\n        fixtures[0].closetToToday = \"Y\";\n        for (var i = 1; i &lt; fixtures.length; i++) {\n            var currentFixtureTimeToToday = Math.abs(today - fixtures[i].date.seconds);\n            /*\n             * If the difference in time between today and the\n               current fixture we are looping on is less than the\n             * difference in time of the current shortest gap then we\n               have a new fixture closest to Today\n            */\n            if (currentFixtureTimeToToday &lt; fixtureClosestToToday) {\n                fixtureClosestToToday = currentFixtureTimeToToday;\n                fixtures[i].closetToToday = \"Y\";\n                fixtures[i - 1].closetToToday = \"N\";\n            } else {\n                fixtures[i].closetToToday = \"N\";\n            }\n        }\n\n        return fixtures\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3869696, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4a7afcf2279ee610479e50672244ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Barry the Beginner", "link": "https://stackoverflow.com/users/3869696/barry-the-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 56988293, "answer_count": 1, "score": 1, "last_activity_date": 1563342855, "creation_date": 1562778934, "last_edit_date": 1562829125, "question_id": 56975639, "link": "https://stackoverflow.com/questions/56975639/html-on-my-ionic-4-app-is-displaying-before-my-function-is-called", "title": "html on my ionic 4 app is displaying before my function is called", "body": "<p>I think I have a problem around synchronicity. I have a an array of matches(i.e. sports fixtures) that I read from firebase and display on screen. Before I want to display these I want to do some manipulation with the values by calling a function.</p>\n\n<p>This function adds a 'Y' value to closestToToday field on the value that is as the name expects closest to today's date.  </p>\n\n<p>I'm confident my function addClosestToTodayFlag works correct based on console logs however my screen is displayed before the function is completed. </p>\n\n<p>How do I explicitly make the displaying of the data on screen wait for my function to complete. </p>\n\n<pre><code>export class FixturesPage implements OnInit {\n\n    public matches: Array&lt;any&gt;;\n    constructor(private matchService: MatchService) {}\n\n    ngOnInit(){\n        this.matchService.getMatches().get().then(matchSnapshot =&gt; {\n            this.matches = [];\n            matchSnapshot.forEach(snap =&gt; {\n                this.matches.push({\n                    id: snap.id,\n                    date: snap.data().date,\n                    team: snap.data().team,\n                    home: snap.data().home,\n                    away: snap.data().away,\n                    homeScore: snap.data().homeScore,\n                    awayScore: snap.data().awayScore,\n                    closestToToday: \"N\",\n                });\n                return false;\n            });                \n            this.addClosestToTodayFlag(this.matches);\n         });        \n    }\n</code></pre>\n\n\n\n<pre><code>    private async addClosestToTodayFlag(fixtures: Array&lt;any&gt;)\n    {   \n        var today = Math.floor(Date.now()/1000);\n        var fixtureClosestToToday = Math.abs(today - \n                 fixtures[0].date.seconds);\n\n        fixtures[0].closetToToday = \"Y\";\n        for (var i = 1; i &lt; fixtures.length; i++)\n        {\n             var currentFixtureTimeToToday = Math.abs(today - \n                 fixtures[i].date.seconds);           \n             /* \n              * If the difference in time between today and the \n                current fixture we are looping on is less than the \n              * difference in time of the current shortest gap then we \n                have a new fixture closest to Today\n             */\n             if (currentFixtureTimeToToday &lt; fixtureClosestToToday)\n                {\n                    fixtureClosestToToday = currentFixtureTimeToToday;\n                    fixtures[i].closetToToday=\"Y\";\n                    fixtures[i-1].closetToToday=\"N\";    \n                }\n            else{\n                fixtures[i].closetToToday=\"N\";\n              }            \n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 3723, "user_id": 1209097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dkgb.jpg?s=128&g=1", "display_name": "ysf", "link": "https://stackoverflow.com/users/1209097/ysf"}, "edited": false, "score": 0, "creation_date": 1562777130, "post_id": 56975113, "comment_id": 100486687, "body": "how do you initiate the API Call? From which component?"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "edited": false, "score": 0, "creation_date": 1562779593, "post_id": 56975113, "comment_id": 100487855, "body": "The easiest way to go in that direction would be to use an EventEmitter. Trying to access data in a component from a service is a little wonky though."}, {"owner": {"reputation": 79, "user_id": 8398997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed6e5ebb7d3660c0c42491a11d311a?s=128&d=identicon&r=PG&f=1", "display_name": "ANaik", "link": "https://stackoverflow.com/users/8398997/anaik"}, "edited": false, "score": 0, "creation_date": 1562783922, "post_id": 56975113, "comment_id": 100489729, "body": "can you please put code where you are importing PromptListComponent. I think you can check Ethan Vu answer. you should create instance of PromptListComponent class then user QueryString()."}, {"owner": {"reputation": 79, "user_id": 8398997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed6e5ebb7d3660c0c42491a11d311a?s=128&d=identicon&r=PG&f=1", "display_name": "ANaik", "link": "https://stackoverflow.com/users/8398997/anaik"}, "edited": false, "score": 0, "creation_date": 1562784418, "post_id": 56975113, "comment_id": 100489958, "body": "You can also use &#39;let&#39; keyword to create instance. Check <a href=\"https://www.typescriptlang.org/docs/handbook/modules.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/modules.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1562786547, "post_id": 56975272, "comment_id": 100490821, "body": "I don&#39;t understand how this could ever work.... your component function shows that the component is using formControls that could only possibly be populated by a user, the instance injected here would be a &quot;blank&quot; instance that couldn&#39;t possibly be touched by a user...."}], "tags": [], "owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "is_accepted": true, "score": 3, "last_activity_date": 1562778062, "last_edit_date": 1562778062, "creation_date": 1562777341, "answer_id": 56975272, "question_id": 56975113, "link": "https://stackoverflow.com/questions/56975113/access-component-data-from-a-service/56975272#56975272", "title": "Access component data from a service", "body": "<p>You can import the component to the service and define it in your constructor, it generate an instance of that component, then you can access methods and properties from that component's instance:</p>\n\n<p>In your service file:</p>\n\n<pre><code>import { PromptListComponent } from './path-to-your-component';\nimport { Injectable } from '@angular/core';\n\n@Injectable({providedIn:'root'}) //Or import to providers\nexport class PromptService {\n //Define it in your service constructor\n constructor( private promptListComponent: PromptListComponent){}\n\n //You now have generated an instance of that component\n getQueryFromPromtListComponent() {\n   console.log(this.promptListComponent.QueryString())\n }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 7776896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da91e04e59cb7bc7be583749d3f215ef?s=128&d=identicon&r=PG&f=1", "display_name": "Wayward Entity", "link": "https://stackoverflow.com/users/7776896/wayward-entity"}, "edited": false, "score": 0, "creation_date": 1562786346, "post_id": 56975737, "comment_id": 100490738, "body": "You&#39;re right. It turns out I needed to make the API call from the component anyways so I will keep this in mind for the future. Thanks"}], "tags": [], "owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "is_accepted": false, "score": 2, "last_activity_date": 1562779365, "creation_date": 1562779365, "answer_id": 56975737, "question_id": 56975113, "link": "https://stackoverflow.com/questions/56975113/access-component-data-from-a-service/56975737#56975737", "title": "Access component data from a service", "body": "<p>The reason everything you see is about accessing data from a service in a component is because you've inverted control.  Your logic should be that the component is PUSHING this data to the service, not that the service is PULLING this data from your component.</p>\n\n<p>your theoretical service should have a sort of <code>setQueryString(queryString: string)</code> method that accepts the query string as an argument, and your component, whenever the query string changes, calls that services method. since your already using reactive forms, this is quite simple!</p>\n\n<pre><code>this.searchForm.valueChanges.subscribe(value =&gt; this.myService.setQueryString(this.QueryString));\n</code></pre>\n\n<p>there are MANY alternative ways to do this, but the principle should be the same, data is always being pushed, never pulled.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 7776896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da91e04e59cb7bc7be583749d3f215ef?s=128&d=identicon&r=PG&f=1", "display_name": "Wayward Entity", "link": "https://stackoverflow.com/users/7776896/wayward-entity"}, "edited": false, "score": 0, "creation_date": 1562786466, "post_id": 56975850, "comment_id": 100490788, "body": "Really helpful. The potential fix #1 was the route that I went and I got the result I was looking for. Thanks"}], "tags": [], "owner": {"reputation": 786, "user_id": 8133866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef94f23bef0fc51c79b769d90534e589?s=128&d=identicon&r=PG&f=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/8133866/luis"}, "is_accepted": false, "score": 2, "last_activity_date": 1562780925, "last_edit_date": 1562780925, "creation_date": 1562779932, "answer_id": 56975850, "question_id": 56975113, "link": "https://stackoverflow.com/questions/56975113/access-component-data-from-a-service/56975850#56975850", "title": "Access component data from a service", "body": "<p>Assuming that you are not listening from an event from the UI, but executing an action in the service that need to get the component property.</p>\n\n<p>I am leveraging the <em>Visitor</em> pattern for this solution.</p>\n\n<p>There are a couple of things that you appear to be missing, based on provided sample code.</p>\n\n<ol>\n<li>Properties are not accessible through the class type, it only can be done with static members.</li>\n<li>To access a property (non static) you need to get the component instance. It needs to be passed to the service.</li>\n</ol>\n\n<p>Ok, now that we have some context to work from, lets see <em>a potential way</em> to achieve what you are looking for:</p>\n\n<ol>\n<li>Add the service (PromptService) as a dependency to the component via the constructor. This will help your service(s) from having direct references to your UI components.</li>\n<li>Create an interface that your component will implement which will define a function receiving the property name which value must be returned.</li>\n</ol>\n\n<pre><code>public interface IPropertyReader {\n   readProperty&lt;T&gt;(prop: string): T\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>That function will be used to return the specified property value to the calling service.</li>\n</ol>\n\n<pre><code>@Component({\n  selector: 'pm-prompts',\n  templateUrl: './prompt-list.component.html',\n  styleUrls: ['./prompt-list.component.css']\n})\n\nexport class PromptListComponent implements OnInit, IPropertyReader\n{\n   constructor(private promptService: PromptService) {\n      promptService.registerComponent(this)\n   }\n   public readProperty&lt;T&gt;(prop: string):T {\n      if (!this.hasOwnProperty(prop)) {\n         throw Error(`Property \"${prop}\" does not exists`);\n      }\n      return this[prop];\n   }   \n}\n</code></pre>\n\n<ol start=\"4\">\n<li>Modify your service by adding a function receiving an instance of the component, but the parameter type must be the interface from point 2 above.</li>\n</ol>\n\n<pre><code>@Injectable({ providedIn: 'root' }) \nexport class PromptService {\n  component: IPropertyReader\n  public registerComponent(comp: IPropertyReader) {\n     this.component = comp;\n     console.log(this.component.readProperty&lt;string&gt;(\"QueryString\"));\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7776896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da91e04e59cb7bc7be583749d3f215ef?s=128&d=identicon&r=PG&f=1", "display_name": "Wayward Entity", "link": "https://stackoverflow.com/users/7776896/wayward-entity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 56975272, "answer_count": 3, "score": 1, "last_activity_date": 1562780925, "creation_date": 1562776642, "question_id": 56975113, "link": "https://stackoverflow.com/questions/56975113/access-component-data-from-a-service", "title": "Access component data from a service", "body": "<p>I have a service in Angular 7 that calls an API and I want to use some data gathered by a component in the API call. Here is the relevant portion of the component:</p>\n\n<pre><code>import { Component, OnInit } from \"@angular/core\";\nimport { IPrompt } from './prompt';\nimport { PromptService } from './prompt.service';\nimport { DropdownService } from '../dropdown.service'\nimport { FormGroup, FormControl, ReactiveFormsModule } from '@angular/forms';\nimport { IQuery } from './prompt'\nimport { NgxSpinnerService } from 'ngx-spinner';\n\nimport { Query } from '../dropdown.service';\n\n\n@Component({\n  selector: 'pm-prompts',\n  templateUrl: './prompt-list.component.html',\n  styleUrls: ['./prompt-list.component.css']\n})\n\nexport class PromptListComponent implements OnInit \n{\n\n  public get searchArray(): string[] \n  {\n  return [ this.searchForm.controls['searchQuery'].value, this.searchForm.controls['region'].value, \n  this.searchForm.controls['status'].value, this.searchForm.controls['language'].value, \n  this.searchForm.controls['inputMode'].value ];\n  }\n\n  public get QueryString(): string\n  { \n    var query = new Query(this.searchForm.controls['searchQuery'].value, this.searchForm.controls['region'].value, \n    this.searchForm.controls['status'].value, this.searchForm.controls['language'].value, \n    this.searchForm.controls['inputMode'].value, this.searchArray);\n    return query.getQuery;\n  }\n}\n</code></pre>\n\n<p>I removed all the unnecessary fields from the above sample. Basically, I want to access the <code>get QueryString()</code> method that is in this component from my service called PromptService. I can include the code for the service as well if needed. I've researched this but all of the questions I see has asked how to use data from a service in a component, not the other way around. </p>\n\n<p>I tried importing the component to the service then using:</p>\n\n<pre><code>queryString = PromptListComponent.QueryString()\n</code></pre>\n\n<p>But I get an error saying that \"Property 'QueryString' does not exist on type 'typeof PromptListComponent'\". I feel that there is a simple fix for this but I have had no luck finding it or figuring it out.</p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1623, "user_id": 7988304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OjXpM.png?s=128&g=1", "display_name": "zilijonas", "link": "https://stackoverflow.com/users/7988304/zilijonas"}, "is_accepted": true, "score": 1, "last_activity_date": 1562776340, "creation_date": 1562776340, "answer_id": 56975040, "question_id": 56974966, "link": "https://stackoverflow.com/questions/56974966/adding-onchange-script-to-input-box-in-react/56975040#56975040", "title": "Adding onChange script to input box in React", "body": "<p>You are trying to access this scope when there does not exist any. It's not a class, it's a function, <code>this</code> is not required here. </p>\n\n<p>Your code should look like this (though, you could move <code>value</code> state to your parent component and pass it through props):</p>\n\n<pre><code>export function Input(props: InputProps) {\n  const [value, setValue] = React.useState('');  \n\n  const {\n    className,\n    ...restProps\n  } = props;\n\n  const onChangeHandler = (e: React.ChangeEvent) =&gt; {\n    setValue(e.target.value.replace(/(?![0-9])./gmi,''));\n  }\n\n  return (\n    &lt;input\n      {...restProps}\n      className={cx([inputStyles])}\n      type={inputType}\n      value={value}\n      onChange={onChangeHandler}\n    /&gt;\n  );\n}\n</code></pre>\n"}], "owner": {"reputation": 1241, "user_id": 710954, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f6ab997142e043460dbef0e37ad9170e?s=128&d=identicon&r=PG", "display_name": "Jon Tan", "link": "https://stackoverflow.com/users/710954/jon-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 56975040, "answer_count": 1, "score": 0, "last_activity_date": 1562776340, "creation_date": 1562775972, "question_id": 56974966, "link": "https://stackoverflow.com/questions/56974966/adding-onchange-script-to-input-box-in-react", "title": "Adding onChange script to input box in React", "body": "<p>I currently have an input box component and I'd like to add a script to prevent all input except for numbers. </p>\n\n<pre><code>function onChangeHandler(e: React.ChangeEvent) {\n  this.value.replace(/(?![0-9])./gmi,'');\n}\n\nexport function Input(props: InputProps) {\n  const {\n    className,\n    ...restProps\n  } = props;\n\n  return (\n    &lt;input\n      {...restProps}\n      className={cx([inputStyles])}\n      type={inputType}\n      onChange={e =&gt; onChangeHandler(e)}\n    /&gt;\n  );\n}\n</code></pre>\n\n<p>Currently this setup doesn't work because I get the following error from <code>onChangeHandler</code>: <code>'this' implicitly has type 'any' because it does not have a type annotation.</code></p>\n\n<p>How can I make this work?</p>\n\n<p>Note: I don't want to use <code>type=number</code></p>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "ionic3", "ionic4"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8706852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3957b5133f7fc29382bd0a073777e402?s=128&d=identicon&r=PG", "display_name": "user8706852", "link": "https://stackoverflow.com/users/8706852/user8706852"}, "edited": false, "score": 0, "creation_date": 1562777111, "post_id": 56974997, "comment_id": 100486676, "body": "Thanks for the answer but I&#39;m using <b>ionic 4</b> and would like to use <code>routerLink=&quot;&quot;</code> instead <b>navCtrl</b> or any way disable it globally"}], "tags": [], "owner": {"reputation": 576, "user_id": 1734342, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c47f6d95913693f0990e8fda2dd914f7?s=128&d=identicon&r=PG", "display_name": "RobrechtVM", "link": "https://stackoverflow.com/users/1734342/robrechtvm"}, "is_accepted": false, "score": 0, "last_activity_date": 1562776134, "creation_date": 1562776134, "answer_id": 56974997, "question_id": 56974887, "link": "https://stackoverflow.com/questions/56974887/how-to-disable-the-animation-only-in-pages-transition-in-ionic-4/56974997#56974997", "title": "How to disable the animation only in pages transition in ionic 4", "body": "<p>Have a look at this <a href=\"https://stackoverflow.com/questions/45827903/ionic-default-push-pop-transitions\">post</a>\nIt explains 2 ways by achieving this; with a native plugin or by setting an extra option in the navCtrl (which I use in my app)</p>\n\n<pre><code>this.navCtrl.push(pushPage, {\n    animation: false, direction: 'forward'\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 3, "creation_date": 1573064914, "post_id": 58731124, "comment_id": 103762999, "body": "Please don&#39;t post only code as an answer, but include an explanation what your code does and how it solves the problem of the question. Answers with an explanation are generally of higher quality, and are more likely to attract upvotes."}], "tags": [], "owner": {"reputation": 119, "user_id": 5945825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aK3O7.png?s=128&g=1", "display_name": "Kathrecha Krishna", "link": "https://stackoverflow.com/users/5945825/kathrecha-krishna"}, "is_accepted": false, "score": -1, "last_activity_date": 1573113177, "last_edit_date": 1573113177, "creation_date": 1573046324, "answer_id": 58731124, "question_id": 56974887, "link": "https://stackoverflow.com/questions/56974887/how-to-disable-the-animation-only-in-pages-transition-in-ionic-4/58731124#58731124", "title": "How to disable the animation only in pages transition in ionic 4", "body": "<p>You can try this:</p>\n\n<pre><code>this.navCtrl.push(AccountPage, {\n  animated : false, \n  animationDirection : 'forward'\n});\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8706852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3957b5133f7fc29382bd0a073777e402?s=128&d=identicon&r=PG", "display_name": "user8706852", "link": "https://stackoverflow.com/users/8706852/user8706852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573113177, "creation_date": 1562775648, "question_id": 56974887, "link": "https://stackoverflow.com/questions/56974887/how-to-disable-the-animation-only-in-pages-transition-in-ionic-4", "title": "How to disable the animation only in pages transition in ionic 4", "body": "<p>i would like to disable page transition animation in Ionic 4, i dont want to use  <code>IonicModule.forRoot({animated: false});</code> becouse it disable all the animations of the app such as <strong>skeletons and toasts</strong> i want disablle only for pages</p>\n\n<p>Could someone help me?</p>\n"}, {"tags": ["typescript", "types"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562775523, "post_id": 56974761, "comment_id": 100485912, "body": "How about just <code>return ab</code>?  \ud83d\ude1c"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 3, "creation_date": 1562775630, "post_id": 56974761, "comment_id": 100485979, "body": "The better way to do this is <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#smarter-union-type-checking\" rel=\"nofollow noreferrer\">upgrade to TS3.5</a> and use your original code... does that answer suffice or do you need something for a specific version of TypeScript?"}, {"owner": {"reputation": 858, "user_id": 4868685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e38912c8e8117d480b2279068fecdbd1?s=128&d=identicon&r=PG", "display_name": "Alan Thomas", "link": "https://stackoverflow.com/users/4868685/alan-thomas"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562776968, "post_id": 56974761, "comment_id": 100486606, "body": "@jcalz hah! I promise the real-world problem I&#39;m having isn&#39;t this contrived. thanks for that link, it seems like they&#39;ve addressed this issue in TS3.5 -- I&#39;m currently on 3.4. It&#39;s unfortunate that I&#39;ll have to upgrade to get this working, but at the same time, it&#39;s good to know the language is constantly improving!"}], "owner": {"reputation": 858, "user_id": 4868685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e38912c8e8117d480b2279068fecdbd1?s=128&d=identicon&r=PG", "display_name": "Alan Thomas", "link": "https://stackoverflow.com/users/4868685/alan-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562775159, "creation_date": 1562775159, "question_id": 56974761, "link": "https://stackoverflow.com/questions/56974761/creating-a-value-of-a-type-union-with-discriminator-field", "title": "Creating a value of a type union with discriminator field", "body": "<p>My problem is best illustrated with an example:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface A { tpe: 'a' }\ninterface B { tpe: 'b' }\ntype AB = A | B\n\nconst abMaker = (ab: AB): AB =&gt; {\n  return { tpe: ab.tpe }\n}\n</code></pre>\n\n<p>The return statement here has the following error:</p>\n\n<pre><code>  Type '{ tpe: \"a\" | \"b\"; }' is not assignable to type 'B'.\n    Types of property 'tpe' are incompatible.\n      Type '\"a\" | \"b\"' is not assignable to type '\"b\"'.\n        Type '\"a\"' is not assignable to type '\"b\"'.\n</code></pre>\n\n<p>The compiler is not able to infer that the value returned is a valid <code>AB</code> because the value of type <code>\"a\" | \"b\"</code> is not valid for <em>either</em> <code>A</code> or <code>B</code> individually.</p>\n\n<p>I'm able to get this to work by \"type-checking\" the value of <code>tpe</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const abMaker = (ab: AB): AB =&gt; {\n  switch (ab.tpe) {\n    case 'a': return { tpe: ab.tpe }\n    case 'b': return { tpe: ab.tpe }\n  }\n}\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["javascript", "typescript", "visual-studio-code", "ide"], "answers": [{"tags": [], "owner": {"reputation": 36598, "user_id": 5590193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEj5A.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5590193/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1562775647, "creation_date": 1562775647, "answer_id": 56974886, "question_id": 56974581, "link": "https://stackoverflow.com/questions/56974581/how-to-quickfix-all-in-vs-code-typescript/56974886#56974886", "title": "How to quickFix all in VS code (typescript)", "body": "<p>Using tslint plugin:</p>\n\n<p>In <a href=\"https://code.visualstudio.com/docs/getstarted/keybindings#_advanced-customization\" rel=\"nofollow noreferrer\"><code>keybindings.json</code></a></p>\n\n<pre><code>{\n    \"key\": \"\",\n    \"command\": \"editor.action.codeAction\",\n    \"args\": {\n        \"kind\": \"source.fixAll.tslint\",\n        \"apply\": \"first\"\n    }\n},\n</code></pre>\n"}], "owner": {"reputation": 712, "user_id": 8358868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b157a7430001a7d36eccab8c8fe35b8?s=128&d=identicon&r=PG&f=1", "display_name": "Zack", "link": "https://stackoverflow.com/users/8358868/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 56974886, "answer_count": 1, "score": 0, "last_activity_date": 1562775647, "creation_date": 1562774459, "question_id": 56974581, "link": "https://stackoverflow.com/questions/56974581/how-to-quickfix-all-in-vs-code-typescript", "title": "How to quickFix all in VS code (typescript)", "body": "<p>I have searched in VS code for a quick fix all solution and can't find anything on the docs or plugins. Does this feature simply not exist or is there a keybinding I'm missing out on? (currently using typescript support)</p>\n\n<p>Edit:</p>\n\n<p>just clarifying use case: </p>\n\n<p>quick fix all like fix all whitespace / \"\" instead of '' and no semicolon warnings. </p>\n\n<p>thanks. </p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562781697, "post_id": 56974569, "comment_id": 100488697, "body": "Problem 1: <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-functions-with-fewer-parameters-assignable-to-functions-that-take-more-parameters\" rel=\"nofollow noreferrer\">See FAQ</a>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562781712, "post_id": 56974569, "comment_id": 100488702, "body": "Problem 2: <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-functions-returning-non-void-assignable-to-function-returning-void\" rel=\"nofollow noreferrer\">See FAQ</a>"}], "owner": {"reputation": 1, "user_id": 7748700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc53905e7632ae2c32511d67b8068db?s=128&d=identicon&r=PG&f=1", "display_name": "MrThreepwood", "link": "https://stackoverflow.com/users/7748700/mrthreepwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1563213180, "answer_count": 0, "score": 0, "last_activity_date": 1563213323, "creation_date": 1562774393, "question_id": 56974569, "link": "https://stackoverflow.com/questions/56974569/mandatory-arguments-for-function-type-alias", "closed_reason": "Duplicate", "title": "Mandatory arguments for function type alias", "body": "<p>I have problems to understand the extent of type checking in TypeScript.</p>\n\n<p>What is the correct way to dictate function signatures in TypeScript?</p>\n\n<p>See the following code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type MyFunctionTypeVoid = (param1:string) =&gt; void;\ntype MyFunctionTypeBool = (param1:string) =&gt; boolean;\n\nconst f1:MyFunctionTypeVoid = ()=&gt;{\n    return true;\n}\n\nconst f2:MyFunctionTypeBool = ()=&gt;{\n\n}\n</code></pre>\n\n<p>Problem 1:\nWhen I declare a type alias for a function, TypeScript does not check if arguments are provided or not when the type alias is being used. (Example: f1 and f2)</p>\n\n<p>Problem 2:\nIf the type alias has void as return value, the function that uses the type alias can return anything. (Example: f1)</p>\n\n<p>Expected Behavior:</p>\n\n<p>I expect intellisense/compliler to inform that f1 has missing arguments and wrong return value as well as f2 has missing arguments and wrong return value.</p>\n\n<p>Actual behaviour:</p>\n\n<p>f1 has no intellisense/compiler errors.</p>\n\n<p>f2 has only wrong return value (Type 'void' is not assignable to type 'boolean').</p>\n"}, {"tags": ["typescript", "visual-studio-code", "ocaml", "vscode-extensions", "language-server-protocol"], "comments": [{"owner": {"reputation": 52302, "user_id": 11182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfpsb.jpg?s=128&g=1", "display_name": "Lex Li", "link": "https://stackoverflow.com/users/11182/lex-li"}, "edited": false, "score": 0, "creation_date": 1562812820, "post_id": 56974529, "comment_id": 100497485, "body": "Nope. That example loads JavaScript <a href=\"https://github.com/microsoft/vscode-extension-samples/blob/master/lsp-sample/client/src/extension.ts#L21\" rel=\"nofollow noreferrer\">github.com/microsoft/vscode-extension-samples/blob/master/&hellip;</a>, while your OCaml code may require extra code. I have an example to initialize a C# language server, <a href=\"https://github.com/vscode-restructuredtext/vscode-restructuredtext/blob/master/src/rstLsp/extension.ts\" rel=\"nofollow noreferrer\">github.com/vscode-restructuredtext/vscode-restructuredtext/b&zwnj;&#8203;lob/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 11758730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OfsovW8Diuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckhgtPJFlL6Su5KYFu-xjnXySQAQ/photo.jpg?sz=128", "display_name": "Houda Mouzoun", "link": "https://stackoverflow.com/users/11758730/houda-mouzoun"}, "reply_to_user": {"reputation": 52302, "user_id": 11182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfpsb.jpg?s=128&g=1", "display_name": "Lex Li", "link": "https://stackoverflow.com/users/11182/lex-li"}, "edited": false, "score": 0, "creation_date": 1562843691, "post_id": 56974529, "comment_id": 100510338, "body": "thank you for your reply, i see that. What is the idea behind the serverModule so that  i can add this extra code because the sample does not help me a lot."}, {"owner": {"reputation": 52302, "user_id": 11182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfpsb.jpg?s=128&g=1", "display_name": "Lex Li", "link": "https://stackoverflow.com/users/11182/lex-li"}, "edited": false, "score": 0, "creation_date": 1562855305, "post_id": 56974529, "comment_id": 100517569, "body": "You just need to make sure that correct <code>command</code> values are passed to <code>ServerOptions</code>, so that your language server can be launched by VSCode."}], "owner": {"reputation": 11, "user_id": 11758730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OfsovW8Diuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckhgtPJFlL6Su5KYFu-xjnXySQAQ/photo.jpg?sz=128", "display_name": "Houda Mouzoun", "link": "https://stackoverflow.com/users/11758730/houda-mouzoun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562817827, "creation_date": 1562774247, "last_edit_date": 1562817827, "question_id": 56974529, "link": "https://stackoverflow.com/questions/56974529/language-server-protocol-vscode-adaptation-of-lsp-sample-to-my-own-case", "title": "Language Server Protocol /VSCODE : Adaptation of lsp-sample to my own case", "body": "<p>I'm creating a vscode extension (client language) which communicates with my own language server (LP) which is written by OCaml using the Language server protocol. Based on the lsp sample provided by vscode documentation, which I wasn't able to adapt to my case (server written in OCaml 'lsp-base.ml') what should I have for those lines of code:</p>\n\n<pre><code>let serverModule = context.asAbsolutePath(path.join('server', 'out', 'server.js'));\n</code></pre>\n\n<p>is it?</p>\n\n<pre><code>let serverModule = context.asAbsolutePath(path.join('XXX', 'XXXX', 'lsp-base.ml'));\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript", "exception", "error-handling"], "comments": [{"owner": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 0, "creation_date": 1562773684, "post_id": 56974293, "comment_id": 100484918, "body": "What does the implementation of <code>Logger().info</code> look like?"}, {"owner": {"reputation": 109, "user_id": 2118828, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f00db7592aaf01f0175f7eb81bca1913?s=128&d=identicon&r=PG", "display_name": "Alexandr Lyumitskij", "link": "https://stackoverflow.com/users/2118828/alexandr-lyumitskij"}, "reply_to_user": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 0, "creation_date": 1562773957, "post_id": 56974293, "comment_id": 100485081, "body": "Its just simple wrapper around of winston logger"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1562774139, "post_id": 56974293, "comment_id": 100485178, "body": "This might be related: <a href=\"https://github.com/winstonjs/winston/issues/1338\" rel=\"nofollow noreferrer\">github.com/winstonjs/winston/issues/1338</a>"}, {"owner": {"reputation": 109, "user_id": 2118828, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f00db7592aaf01f0175f7eb81bca1913?s=128&d=identicon&r=PG", "display_name": "Alexandr Lyumitskij", "link": "https://stackoverflow.com/users/2118828/alexandr-lyumitskij"}, "edited": false, "score": 0, "creation_date": 1562774201, "post_id": 56974293, "comment_id": 100485208, "body": "Ha! Just replaced with console.log gets the trick! Thanks! Hmmmm..."}, {"owner": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 1, "creation_date": 1562774247, "post_id": 56974293, "comment_id": 100485234, "body": "@AlexandrLyumitskij well you&#39;ll need to have a look at your Winston configuration and how it handles deserializing error objects / functions."}], "answers": [{"tags": [], "owner": {"reputation": 820, "user_id": 3484580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qlmsc.png?s=128&g=1", "display_name": "iKoala", "link": "https://stackoverflow.com/users/3484580/ikoala"}, "is_accepted": false, "score": 0, "last_activity_date": 1562777628, "creation_date": 1562777628, "answer_id": 56975348, "question_id": 56974293, "link": "https://stackoverflow.com/questions/56974293/why-javascript-catched-exception-is-empty-object/56975348#56975348", "title": "Why javascript catched exception is empty object", "body": "<p>Print the error stack:</p>\n\n<pre><code>try {\n  let tmp = null;\n  tmp.split(',');\n}\ncatch (e) {\n  Logger().info('catched error: ', e, e.stack);\n  //catched error:  TypeError: Cannot read property 'split' of null ...\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 2118828, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f00db7592aaf01f0175f7eb81bca1913?s=128&d=identicon&r=PG", "display_name": "Alexandr Lyumitskij", "link": "https://stackoverflow.com/users/2118828/alexandr-lyumitskij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562777628, "creation_date": 1562773435, "question_id": 56974293, "link": "https://stackoverflow.com/questions/56974293/why-javascript-catched-exception-is-empty-object", "title": "Why javascript catched exception is empty object", "body": "<pre><code>try {\n    let tmp = null;\n    tmp.split(',');\n}\ncatch (e) {\n    Logger().info('catched error: ', e, e.constructor);\n}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>catched error:  {} undefined\n</code></pre>\n\n<p>I was trying to use JSON.stringify with the same result.<br>\nWhy I didn't get any message of error reason?</p>\n"}, {"tags": ["javascript", "typescript", "vue.js", "bootstrap-vue"], "answers": [{"comments": [{"owner": {"reputation": 1247, "user_id": 4361749, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/935b65e71944f1995cefd496ec9ed335?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4361749/joel"}, "edited": false, "score": 0, "creation_date": 1562773663, "post_id": 56974339, "comment_id": 100484901, "body": "removing the <code>.prevent</code> still does not trigger the <code>save</code>-method"}, {"owner": {"reputation": 1247, "user_id": 4361749, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/935b65e71944f1995cefd496ec9ed335?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4361749/joel"}, "edited": false, "score": 0, "creation_date": 1562773777, "post_id": 56974339, "comment_id": 100484968, "body": "Looking at <a href=\"https://github.com/bootstrap-vue/bootstrap-vue/blob/dev/src/components/modal/modal.js#L595\" rel=\"nofollow noreferrer\">github.com/bootstrap-vue/bootstrap-vue/blob/dev/src/componen&zwnj;&#8203;ts/&hellip;</a> , I think the <code>@ok</code> event is in this case specific to vue-bootstrap."}, {"owner": {"reputation": 4174, "user_id": 2744776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i2htF.jpg?s=128&g=1", "display_name": "Troy Morehouse", "link": "https://stackoverflow.com/users/2744776/troy-morehouse"}, "reply_to_user": {"reputation": 1247, "user_id": 4361749, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/935b65e71944f1995cefd496ec9ed335?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4361749/joel"}, "edited": false, "score": 1, "creation_date": 1562790363, "post_id": 56974339, "comment_id": 100492322, "body": "Yeah it is a custom Vue component event for BootstrapVue (I wrote the code)"}, {"owner": {"reputation": 1247, "user_id": 4361749, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/935b65e71944f1995cefd496ec9ed335?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4361749/joel"}, "edited": false, "score": 0, "creation_date": 1562790682, "post_id": 56974339, "comment_id": 100492449, "body": "So how can I test wether a modal.vm.$emit(&quot;ok&quot;) actually called the associated method?"}, {"owner": {"reputation": 4174, "user_id": 2744776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i2htF.jpg?s=128&g=1", "display_name": "Troy Morehouse", "link": "https://stackoverflow.com/users/2744776/troy-morehouse"}, "reply_to_user": {"reputation": 1247, "user_id": 4361749, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/935b65e71944f1995cefd496ec9ed335?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4361749/joel"}, "edited": false, "score": 1, "creation_date": 1562801879, "post_id": 56974339, "comment_id": 100495563, "body": "If using JEST, then set up a mock save function using <code>jest.fn()</code>, and you can still use Vue test utils to find the OK button and click it.  Note modal uses transitions, so you will need to <code>await</code> for a <code>requestAnimationFrame</code> to complete after the modal is mounted before searching for the button and clicking it. You can see how we test modals at <a href=\"https://github.com/bootstrap-vue/bootstrap-vue/blob/dev/src/components/modal/modal.spec.js\" rel=\"nofollow noreferrer\">github.com/bootstrap-vue/bootstrap-vue/blob/dev/src/componen&zwnj;&#8203;ts/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4174, "user_id": 2744776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i2htF.jpg?s=128&g=1", "display_name": "Troy Morehouse", "link": "https://stackoverflow.com/users/2744776/troy-morehouse"}, "is_accepted": false, "score": 0, "last_activity_date": 1562773602, "creation_date": 1562773602, "answer_id": 56974339, "question_id": 56974269, "link": "https://stackoverflow.com/questions/56974269/ok-listener-is-not-triggered-on-b-modal-with-jest-test-utils-vue-bootstrap/56974339#56974339", "title": "@ok listener is not triggered on b-modal with jest-test-utils (vue-bootstrap)", "body": "<p><code>@ok</code> is a custom Vue event, not a native browser DOM event. The <code>.prevent</code> modifier will not work on custom Vue events.</p>\n"}], "owner": {"reputation": 1247, "user_id": 4361749, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/935b65e71944f1995cefd496ec9ed335?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4361749/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1584359634, "creation_date": 1562773321, "last_edit_date": 1584359634, "question_id": 56974269, "link": "https://stackoverflow.com/questions/56974269/ok-listener-is-not-triggered-on-b-modal-with-jest-test-utils-vue-bootstrap", "title": "@ok listener is not triggered on b-modal with jest-test-utils (vue-bootstrap)", "body": "<p>I am using the vue-bootstrap b-modal with the <code>@ok=\"save\"</code> hook</p>\n\n<p>The mycomponent.vue looks like this: </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;b-button @click=\"add\"&gt;open modal&lt;/b-button&gt;\n    &lt;b-modal static lazy id=\"modal-detail\" @ok=\"save\"&gt;\n      &lt;b-form-input v-model=\"fooName\"&gt;&lt;/b-form-input&gt;\n    &lt;/b-modal&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script lang=\"ts\"&gt;\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { RestClient } from \"./RestClient\";\n\n@Component({ name: \"fooController\" })\nexport default class FooController extends Vue {\n  public fooName = \"\";\n  public add(): void {\n    this.$root.$emit(\"bv::show::modal\", \"modal-detail\");\n  }\n  public save(): void {\n    console.log(\"in save method\");\n    RestClient.create(this.fooName);\n  }\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>The RestClient.ts looks like this: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class RestClient {\n  static create(payload: string) {\n    return payload;\n  }\n}\n</code></pre>\n\n<p>The test looks like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { createLocalVue, mount } from \"@vue/test-utils\";\nimport BootstrapVue from \"bootstrap-vue\";\nimport MyComponent from \"./mycomponent.vue\";\nimport { RestClient } from \"./RestClient\";\n\njest.mock(\"./RestClient.ts\", () =&gt; ({\n  RestClient: {\n    create: jest.fn(() =&gt; {\n      return {};\n      //   return Promise.resolve({});\n    })\n  }\n}));\n\ndescribe(\"component test\", () =&gt; {\n  const localVue = createLocalVue();\n  localVue.use(BootstrapVue);\n\n  it(\"should call the create method on the REST client when ok-ing the modal\", (done) =&gt; {\n    const wrapper = mount(MyComponent, {\n      attachToDocument: true,\n      localVue\n    });\n    expect(wrapper.isVueInstance()).toBe(true);\n\n    // there is just one button: the open modal button\n    wrapper.find(\"button\").trigger(\"click\");\n    const modal = wrapper.find(\"#modal-detail\");\n\n    modal.vm.$emit(\"ok\");\n\n    return wrapper.vm.$nextTick().then(() =&gt; {\n      expect(RestClient.create).toBeCalled();\n      return wrapper.vm.$nextTick().then(done);\n    });\n });\n});\n</code></pre>\n\n<p>I am emitting the <code>ok</code> event on the modal directly.\nThen I am watching for the console.log statement in the save-method to be executed, which i cannot see in the terminal, when executing the test.</p>\n\n<p>Thus, the <code>RestClient.create</code>-method is not being called. \nWhy?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 1311, "user_id": 5591211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dq1iO.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5591211/rich"}, "edited": false, "score": 0, "creation_date": 1562774118, "post_id": 56974417, "comment_id": 100485168, "body": "Also, @TotenKopf just a suggestion, if you are manually showing a spinner, it might be a good idea to look up HTTP interceptors. You can automatically show a spinner on HTTP calls."}, {"owner": {"reputation": 147, "user_id": 9726907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ac78363b9c16c83fbe1c983986b3f8?s=128&d=identicon&r=PG&f=1", "display_name": "TotenKopf", "link": "https://stackoverflow.com/users/9726907/totenkopf"}, "edited": false, "score": 0, "creation_date": 1562775152, "post_id": 56974417, "comment_id": 100485710, "body": "I do have http interceptors but theyre mainly for server errors. Im just too fog brained to figure this out. Good suggestion might look into that avenue"}, {"owner": {"reputation": 1311, "user_id": 5591211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dq1iO.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5591211/rich"}, "reply_to_user": {"reputation": 147, "user_id": 9726907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ac78363b9c16c83fbe1c983986b3f8?s=128&d=identicon&r=PG&f=1", "display_name": "TotenKopf", "link": "https://stackoverflow.com/users/9726907/totenkopf"}, "edited": false, "score": 0, "creation_date": 1562778865, "post_id": 56974417, "comment_id": 100487485, "body": "<a href=\"https://medium.com/@zeljkoradic/loader-bar-on-every-http-request-in-angular-6-60d8572a21a9\" rel=\"nofollow noreferrer\">This</a> is the guide I used recently. It can be improved on some (should have a counter), but it works."}], "tags": [], "owner": {"reputation": 1311, "user_id": 5591211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dq1iO.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5591211/rich"}, "is_accepted": false, "score": 0, "last_activity_date": 1562773870, "creation_date": 1562773870, "answer_id": 56974417, "question_id": 56974209, "link": "https://stackoverflow.com/questions/56974209/subscribe-to-service-function-twice-in-angular-for-login/56974417#56974417", "title": "Subscribe to service function twice in angular for login", "body": "<p>You could just return the observable from the auth service, and subscribe to it in the component. If you have a bunch of stuff that you want the service to do with it, you could write a function in the auth service that you call in the subscription from the component.</p>\n\n<p>It's probably a bad idea to try to subscribe to an http call in multiple places (assuming that's possible).</p>\n\n<p>auth service</p>\n\n<pre><code>signin(email: string, password: string) {\n   const signinData = {email: email, password: password};\n   return this.http.post&lt;{userEmail: string, userId: string, token: string, refreshToken: string, expiresIn: number, userType: string }&gt;(URL + 'signin', signinData);\n} \n\ndoStuff(){/*do stuff*/}\n</code></pre>\n\n<p>component</p>\n\n<pre><code>onSignIn() {\n   if (this.signinForm.invalid) {\n      return;\n   } \n   this.failedSignIn = null;\n   this.isLoading = true;\n   this.authService.signin(this.signinForm.value.email, this.signinForm.value.password)\n      .subscribe(res =&gt; {\n          //do stuff if you want\n          this.authService.doStuff();\n          this.isLoading = false;\n          this.isAuth = res.isAuth;\n      });\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9726907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ac78363b9c16c83fbe1c983986b3f8?s=128&d=identicon&r=PG&f=1", "display_name": "TotenKopf", "link": "https://stackoverflow.com/users/9726907/totenkopf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562773870, "creation_date": 1562773136, "question_id": 56974209, "link": "https://stackoverflow.com/questions/56974209/subscribe-to-service-function-twice-in-angular-for-login", "title": "Subscribe to service function twice in angular for login", "body": "<p>In my angular 7 app, I have a sign in component that calls the sign in function from the auth service. The sign in function does a http post request and then it subscribes to the response. I would like to subscribe to it in both the auth service function and component function so if the user doesn't enter the right credentials the component can tell the user + a loading spinner while it waits for the request to finish.</p>\n\n<p>Sign in component:</p>\n\n<pre><code> onSignIn() {\n    if (this.signinForm.invalid) {\n      return;\n    }\n    this.failedSignIn = null;\n    this.isLoading = true;\n    this.authService.signin(this.signinForm.value.email, this.signinForm.value.password);\n    this.isLoading = false;\n\n  }\n</code></pre>\n\n<p>Sign in function in Auth service:</p>\n\n<pre><code> signin(email: string, password: string) {\n    const signinData = {email: email, password: password};\n       this.http.post&lt;{userEmail: string, userId: string, token: string, refreshToken: string, expiresIn: number, userType: string }&gt;(URL + 'signin', signinData).subscribe(response =&gt; {\n        // I do stuff in here\n      });\n  }\n</code></pre>\n\n<p>what Id like to do essentially</p>\n\n<pre><code>  onSignIn() {\n    if (this.signinForm.invalid) {\n      return;\n    }\n    this.failedSignIn = null;\n    this.isLoading = true;\n    this.authService.signin(this.signinForm.value.email, this.signinForm.value.password).subscribe(res =&gt; {\n    this.isLoading = false;\n    this.isAuth = res.isAuth;\n});\n  }\n</code></pre>\n"}, {"tags": ["typescript", "asp.net-core", "visual-studio-2017"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4742658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840500284b6312c2d49f46a883427ae6?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Descheneaux", "link": "https://stackoverflow.com/users/4742658/karl-descheneaux"}, "edited": false, "score": 0, "creation_date": 1562773763, "post_id": 56973950, "comment_id": 100484959, "body": "I don&#39;t have a tsconfig.json file. The compiler options are directly in the .csproj (&lt;TypeScriptModuleKind&gt;)."}], "tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562772185, "creation_date": 1562772185, "answer_id": 56973950, "question_id": 56973914, "link": "https://stackoverflow.com/questions/56973914/how-can-i-select-esnext-in-the-menu-of-typescript-in-visual-studio-2017/56973950#56973950", "title": "How can I select esNext in the menu of typescript in visual studio 2017", "body": "<p>I think your typescript project will have 1 file name <code>tsconfig.json</code> so you can change the module type to esNext like this</p>\n\n<pre><code>{\n    \"compilerOptions\": {\n        \"module\": \"esNext\",\n        // other prop\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4742658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840500284b6312c2d49f46a883427ae6?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Descheneaux", "link": "https://stackoverflow.com/users/4742658/karl-descheneaux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562772185, "creation_date": 1562772091, "question_id": 56973914, "link": "https://stackoverflow.com/questions/56973914/how-can-i-select-esnext-in-the-menu-of-typescript-in-visual-studio-2017", "title": "How can I select esNext in the menu of typescript in visual studio 2017", "body": "<p>I have the following error when I used dynamic import with typescript in my visual studio 2017: TS1323(TS) L'importation dynamique est prise en charge uniquement quand l'indicateur '--module' a la valeur 'commonjs' ou 'esNext'.</p>\n\n<p>So, I try to change my setting of my project, but there is not esNext in the list of module. I try to modify the project manually but the error still stay there. And I don't want use a .config file for typescript.</p>\n\n<p><img src=\"https://i.imgur.com/RAsgwEU.png\" alt=\"a config\"></p>\n\n<p>Any solution on how I can suppress this error or add the option of esNext in vs2017?</p>\n"}, {"tags": ["node.js", "angular", "typescript", "ecmascript-6", "single-page-application"], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 6893983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb8b49fe7d11d8a8d188091d34d04e0?s=128&d=identicon&r=PG&f=1", "display_name": "sevic", "link": "https://stackoverflow.com/users/6893983/sevic"}, "is_accepted": false, "score": 1, "last_activity_date": 1562771803, "creation_date": 1562771803, "answer_id": 56973835, "question_id": 56973704, "link": "https://stackoverflow.com/questions/56973704/angular-form-group-patchvalue-wrapping-braces-around-values/56973835#56973835", "title": "Angular form group patchValue wrapping braces around values", "body": "<p>This is not exactly the solution to your problem, but a different approach to your task :)</p>\n\n<p>Instead of patching all the values you could use the <code>.reset()</code> method: <code>this.formGroup.reset(this.testData)</code>.</p>\n\n<p>Further information is in the <a href=\"https://angular.io/api/forms/FormControl#reset\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "is_accepted": true, "score": 1, "last_activity_date": 1562771895, "creation_date": 1562771895, "answer_id": 56973871, "question_id": 56973704, "link": "https://stackoverflow.com/questions/56973704/angular-form-group-patchvalue-wrapping-braces-around-values/56973871#56973871", "title": "Angular form group patchValue wrapping braces around values", "body": "<p>You should change your <code>patchMultipleValues</code> like this (Notice no [] around <code>valueToPatch</code>):</p>\n\n<pre><code>/**\n   *\n   * @param {object} formGroup form group to update\n   * @param {object} formValues the form control name as the key and the value to patch\n   */\n  public patchMultipleValues(formGroup, formValues) {\n    for (let key in formValues) {\n      let keyToPatch = key;\n      let valueToPatch = formValues[key];\n\n      // Patch value\n      formGroup.patchValue({ [keyToPatch]: valueToPatch });\n    }\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 1, "last_activity_date": 1562771986, "creation_date": 1562771986, "answer_id": 56973886, "question_id": 56973704, "link": "https://stackoverflow.com/questions/56973704/angular-form-group-patchvalue-wrapping-braces-around-values/56973886#56973886", "title": "Angular form group patchValue wrapping braces around values", "body": "<p>You should remove [] sign like this</p>\n\n<pre><code> public patchMultipleValues(formGroup, formValues) {\n    for (let key in formValues) {\n      let keyToPatch = key;\n      let valueToPatch = formValues[key];\n\n      // Patch value\n      formGroup.patchValue({ [keyToPatch]: valueToPatch });\n    }\n  }\n</code></pre>\n\n<p>Then it's should be good</p>\n"}], "owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56973871, "answer_count": 3, "score": 1, "last_activity_date": 1576223339, "creation_date": 1562771333, "last_edit_date": 1576223339, "question_id": 56973704, "link": "https://stackoverflow.com/questions/56973704/angular-form-group-patchvalue-wrapping-braces-around-values", "title": "Angular form group patchValue wrapping braces around values", "body": "<p>I am building a reactive form using form builder. The form data will need to be updated dynamically. To achieve this, I created a function that iterates the keys in an object and patches the form values with the matching key names. This works for the most part, however, the resulting form values have extra braces <code>[]</code> around the values. I am probably missing something obvious here. </p>\n\n<p>Here is the function that iterates an object keys and patches each value where the key name matches the form control name:</p>\n\n<pre><code>  /**\n   *\n   * @param {object} formGroup form group to update\n   * @param {object} formValues the form control name as the key and the value to patch\n   */\n  public patchMultipleValues(formGroup, formValues) {\n    for (let key in formValues) {\n      let keyToPatch = key;\n      let valueToPatch = formValues[key];\n\n      // Patch value\n      formGroup.patchValue({ [keyToPatch]: [valueToPatch] });\n    }\n  }\n</code></pre>\n\n<p>Here is example test data and a test form group:</p>\n\n<pre><code>  testData = {\n    'Title': 'Example title',\n    'Description': 'This is an example description for testing',\n    'Items': ['A', 'B', 'C', 1, 2, 3]\n  }\n\n  this.testForm = this.fb.group({\n    Title: [null],\n    Description: [null],\n    Items: [null]\n  });\n</code></pre>\n\n<p>Here is the call to the function:</p>\n\n<pre><code>this.patchMultipleValues(this.testForm, this.testData);\n</code></pre>\n\n<p>Here is the resulting form value with the extra braces wrapped around each value. The Title and Description should just be strings and Items should just be a single array.</p>\n\n<pre><code>formGroup.value {\"Title\":[\"Example title\"],\"Description\":[\"This is an example description for testing\"],\"Items\":[[\"A\",\"B\",\"C\",1,2,3]]}\n</code></pre>\n\n<p>Question: How can I update the code such that the correct values are patched? I tried removing the braces from the this.fb.group definition but that does not work correctly.</p>\n"}, {"tags": ["reactjs", "typescript", "react-i18next", "react-helmet"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8767679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea9debe29f2f86dbed8e37a2d62f32e3?s=128&d=identicon&r=PG", "display_name": "ayhandoslu", "link": "https://stackoverflow.com/users/8767679/ayhandoslu"}, "is_accepted": false, "score": 0, "last_activity_date": 1568406839, "creation_date": 1568406839, "answer_id": 57930034, "question_id": 56973591, "link": "https://stackoverflow.com/questions/56973591/how-to-use-uppercase-depending-on-html-lang-dynamically-changed-by-react-helmet/57930034#57930034", "title": "How to use uppercase depending on html lang dynamically changed by react-helmet", "body": "<p>I had a similar problem. Setting <a href=\"https://github.com/nfl/react-helmet\" rel=\"nofollow noreferrer\">React Helmet</a>'s <code>htmlAttributes</code> with current lang (as in your statement),</p>\n\n<pre><code>&lt;Helmet htmlAttributes={{ lang: currentlySelectedLanguage }} /&gt;\n</code></pre>\n\n<p>does not affect the elements in the DOM (button, headings, ... etc.) which have <code>text-transform: uppercase;</code> CSS declaration.</p>\n\n<p>I solved it by setting <code>document.documentElement.lang</code> immediately at the beginning of the triggered set language action:</p>\n\n<pre><code>    setLanguage(currentlySelectedLanguage) {\n        if (document.documentElement) {\n            document.documentElement.lang = currentlySelectedLanguage\n        }\n\n        // do other stuff ...\n    }\n</code></pre>\n\n<p>Setting <code>&lt;html lang=\"??\"&gt;</code> this way to solve the problem does not discourage me of using React Helmet, I continue managing all of the changes to the document head with React Helmet.</p>\n"}], "owner": {"reputation": 37, "user_id": 10052028, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nCtat6eNXPA/AAAAAAAAAAI/AAAAAAAANic/MTOtpB_Le3w/photo.jpg?sz=128", "display_name": "Bilge Y&#252;cel", "link": "https://stackoverflow.com/users/10052028/bilge-y%c3%bccel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568406839, "creation_date": 1562770985, "question_id": 56973591, "link": "https://stackoverflow.com/questions/56973591/how-to-use-uppercase-depending-on-html-lang-dynamically-changed-by-react-helmet", "title": "How to use uppercase depending on html lang dynamically changed by react-helmet", "body": "<p>In my application, I change the language by clicking buttons. Now I want to change and make some words uppercase depending on that language's uppercase rules. I tried to do this by changing the <code>&lt;html/&gt;</code> lang attribute dynamically. My language options are turkish and english</p>\n\n<p>To change the html tag, I use <a href=\"https://github.com/nfl/react-helmet\" rel=\"nofollow noreferrer\">react-helmet</a> and to translate the words I use <a href=\"https://react.i18next.com/\" rel=\"nofollow noreferrer\">react-i18next</a> . It seems like working for some codes, but for some words, uppercase rules apply depending on the previous language.  </p>\n\n<pre><code>&lt;Helmet htmlAttributes={{lang: currentlySelectedLanguage}} /&gt; \n</code></pre>\n\n<pre><code>function getHeader(){\n   return[\n     { id: headerOne, label: t(\"kit\")}\n   ]\n\n}\n</code></pre>\n\n<p>t is a translator function from <code>react-i18n</code>. This function checks the translation json file of currentlySelectedLanguage and writes its value as the label.</p>\n\n<p>Header item has <code>text-transform:uppercase</code> in its css class.</p>\n\n<p>In turkish, there are two types of letters: i -> \u0130 and \u0131 -> I.</p>\n\n<p>When I select <code>english</code>,  happens but instead of writing <code>KIT</code>, I get <code>K\u0130T</code>. Which is uppercase rule for turkish,  not english.</p>\n\n<p>When I select <code>turkish</code>,  happens but then I get <code>KIT</code>, but it should be <code>K\u0130T</code>, which is also uppercase rule for english</p>\n"}, {"tags": ["javascript", "typescript", "static-analysis", "lint"], "comments": [{"owner": {"reputation": 9754, "user_id": 3077941, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/2T1A4.jpg?s=128&g=1", "display_name": "amorenew", "link": "https://stackoverflow.com/users/3077941/amorenew"}, "reply_to_user": {"reputation": 22589, "user_id": 542251, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c6a0ac3e18f1cd8d0f1be4c2e3a4cfbd?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/542251/liam"}, "edited": false, "score": 0, "creation_date": 1562823896, "post_id": 56973583, "comment_id": 100499947, "body": "@Liam I don&#39;t ask for alternatives or recommendations..what I want 1 option to an existing feature in dart language."}], "answers": [{"comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1562796018, "post_id": 56975364, "comment_id": 100494248, "body": "Can you please detail how to enable JSDoc enforcement?"}, {"owner": {"reputation": 9754, "user_id": 3077941, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/2T1A4.jpg?s=128&g=1", "display_name": "amorenew", "link": "https://stackoverflow.com/users/3077941/amorenew"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1562823775, "post_id": 56975364, "comment_id": 100499903, "body": "@Bergi I updated the answer to the required rule You can add static analysis to your git push command in this path .git/hooks/pre-push"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1562829023, "post_id": 56975364, "comment_id": 100502235, "body": "Uh, jslint is not the same as eslint?"}, {"owner": {"reputation": 9754, "user_id": 3077941, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/2T1A4.jpg?s=128&g=1", "display_name": "amorenew", "link": "https://stackoverflow.com/users/3077941/amorenew"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562845735, "post_id": 56975364, "comment_id": 100511521, "body": "@Bergi oops I updated the answer with wrong tool name anyway es is ECMAScript which is js."}], "tags": [], "owner": {"reputation": 135, "user_id": 4212729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d15b30fc05c4cbdced4e3239aa6c8484?s=128&d=identicon&r=PG&f=1", "display_name": "Dakota Raymond", "link": "https://stackoverflow.com/users/4212729/dakota-raymond"}, "is_accepted": true, "score": 0, "last_activity_date": 1562845769, "last_edit_date": 1562845769, "creation_date": 1562777696, "answer_id": 56975364, "question_id": 56973583, "link": "https://stackoverflow.com/questions/56973583/documentation-lint-to-javascript/56975364#56975364", "title": "Documentation lint to Javascript", "body": "<p><a href=\"https://www.jslint.com/help.html\" rel=\"nofollow noreferrer\">JSLint</a> for javascript or <a href=\"https://palantir.github.io/tslint/\" rel=\"nofollow noreferrer\">TSLint</a> for typescript can force JSDoc style documentation.</p>\n\n<p>Or In ESLint, the doc rule name is  \"require-jsdoc\"\n<a href=\"https://eslint.org/docs/rules/require-jsdoc\" rel=\"nofollow noreferrer\">https://eslint.org/docs/rules/require-jsdoc</a></p>\n\n<p>and \"valid-jsdoc\" <a href=\"https://eslint.org/docs/rules/valid-jsdoc\" rel=\"nofollow noreferrer\">https://eslint.org/docs/rules/valid-jsdoc</a></p>\n\n<p>But these rules are deprecated in ESLint v3.0\nSo the alternative which is recommended by ESLint team is <a href=\"https://github.com/gajus/eslint-plugin-jsdoc\" rel=\"nofollow noreferrer\">https://github.com/gajus/eslint-plugin-jsdoc</a></p>\n"}], "owner": {"reputation": 9754, "user_id": 3077941, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/2T1A4.jpg?s=128&g=1", "display_name": "amorenew", "link": "https://stackoverflow.com/users/3077941/amorenew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "closed_date": 1562797387, "accepted_answer_id": 56975364, "answer_count": 1, "score": 1, "last_activity_date": 1562845769, "creation_date": 1562770967, "question_id": 56973583, "link": "https://stackoverflow.com/questions/56973583/documentation-lint-to-javascript", "closed_reason": "Not suitable for this site", "title": "Documentation lint to Javascript", "body": "<p>I have a lint for forcing documentation to class, function or a member class in dart language</p>\n\n<p>Link to the documentation lint: <a href=\"https://dart-lang.github.io/linter/lints/public_member_api_docs.html\" rel=\"nofollow noreferrer\">https://dart-lang.github.io/linter/lints/public_member_api_docs.html</a></p>\n\n<p>I wonder if there is a similar linter or tool to Javascript?</p>\n"}, {"tags": ["angular", "typescript", "cordova", "ionic-framework", "ionic3"], "comments": [{"owner": {"reputation": 345, "user_id": 9247032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d476f0f522914d1cfff4ccb26b49a6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Mhanna", "link": "https://stackoverflow.com/users/9247032/ali-mhanna"}, "edited": false, "score": 0, "creation_date": 1562783507, "post_id": 56973527, "comment_id": 100489546, "body": "Did you try to set targetSDK to 29?"}, {"owner": {"reputation": 8603, "user_id": 3289660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGFex.jpg?s=128&g=1", "display_name": "Nidhin Joseph", "link": "https://stackoverflow.com/users/3289660/nidhin-joseph"}, "edited": false, "score": 0, "creation_date": 1562799958, "post_id": 56973527, "comment_id": 100495197, "body": "did you check your logcat for errors?"}, {"owner": {"reputation": 11, "user_id": 10916527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ld3E5NJwncQ/AAAAAAAAAAI/AAAAAAAAdfc/R9TjZFuS1tA/photo.jpg?sz=128", "display_name": "Aviral Rajput", "link": "https://stackoverflow.com/users/10916527/aviral-rajput"}, "edited": false, "score": 0, "creation_date": 1563546164, "post_id": 56973527, "comment_id": 100747560, "body": "okay i got it fixed. doing  cordova remove platform android  cordova add platform android@8.0.0"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 12973138, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNKcUe9GBP8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftG8yr6Zb01IN_pQuCNdVckjAGlA/photo.jpg?sz=128", "display_name": "Harikrishnan S", "link": "https://stackoverflow.com/users/12973138/harikrishnan-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1590052288, "creation_date": 1590052288, "answer_id": 61931068, "question_id": 56973527, "link": "https://stackoverflow.com/questions/56973527/ionic-cordova-application-not-working-on-android-9-devices/61931068#61931068", "title": "Ionic Cordova application not working on android 9 devices", "body": "<p>Add network_security_config.xml in platforms\\android\\app\\src\\main\\res\\xml. The file contains </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n  &lt;network-security-config&gt;\n &lt;base-config cleartextTrafficPermitted=\"true\"&gt;\n &lt;trust-anchors&gt;\n  &lt;certificates src=\"system\" /&gt;\n  &lt;/trust-anchors&gt;\n  &lt;/base-config&gt;\n&lt;/network-security-config&gt;\n</code></pre>\n\n<p>Add the above file in  AndroidManifest.xml like</p>\n\n<pre><code> &lt;application android:hardwareAccelerated=\"true\" android:icon=\"@mipmap/ic_launcher\" \n  android:label=\"@string/app_name\" \n  android:networkSecurityConfig=\"@xml/network_security_config\" \n  android:supportsRtl=\"true\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10916527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ld3E5NJwncQ/AAAAAAAAAAI/AAAAAAAAdfc/R9TjZFuS1tA/photo.jpg?sz=128", "display_name": "Aviral Rajput", "link": "https://stackoverflow.com/users/10916527/aviral-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2325, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1590052288, "creation_date": 1562770806, "question_id": 56973527, "link": "https://stackoverflow.com/questions/56973527/ionic-cordova-application-not-working-on-android-9-devices", "title": "Ionic Cordova application not working on android 9 devices", "body": "<p>I am getting a problem to run my ionic cordova app on android 9 its working fine on android version less than 9\nApplication is not hitting the backend in android 9\nthis is my environment</p>\n\n<p>I tried on samung and onePlus devices bot on android verion 9 and less than 9</p>\n\n<p>Ionic:</p>\n\n<p>ionic (Ionic CLI)  : 4.0.0 (/usr/local/lib/node_modules/ionic)\n Ionic Framework    : ionic-angular 3.9.6\n @Ionic/app-scripts : 3.2.4</p>\n\n<p>Cordova:</p>\n\n<p>cordova (Cordova CLI) : 8.0.0\n Cordova Platforms     : android 8.0.0</p>\n\n<p>System:</p>\n\n<p>Android SDK Tools : 26.1.1\n NodeJS            : v8.10.0 (/usr/bin/node)\n npm               : 6.9.0\n OS                : Linux 4.15</p>\n\n<p>Environment:</p>\n\n<p>ANDROID_HOME : /home/aviral/Android/Sdk</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "grafana"], "comments": [{"owner": {"reputation": 5860, "user_id": 548997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JJ1gz.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/548997/lex"}, "edited": false, "score": 3, "creation_date": 1562769541, "post_id": 56973079, "comment_id": 100482504, "body": "TypeScript is transpiled to javascript - you shouldn&#39;t ever try to reference the .ts file directly. You likely should be including a script reference to <code>clock_ctrl.js</code>."}, {"owner": {"reputation": 11, "user_id": 11529119, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-51vs1LqhoEE/AAAAAAAAAAI/AAAAAAAAACg/pGp3F5QCvtM/photo.jpg?sz=128", "display_name": "Rania", "link": "https://stackoverflow.com/users/11529119/rania"}, "reply_to_user": {"reputation": 5860, "user_id": 548997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JJ1gz.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/548997/lex"}, "edited": false, "score": 0, "creation_date": 1562769872, "post_id": 56973079, "comment_id": 100482708, "body": "thank u for your answer but do u mean I should write &lt;script src=&quot;../clock_ctrl.js&quot;&gt;&lt;/script&gt;? because I did it and I got the same error"}, {"owner": {"reputation": 5860, "user_id": 548997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JJ1gz.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/548997/lex"}, "edited": false, "score": 0, "creation_date": 1562769982, "post_id": 56973079, "comment_id": 100482761, "body": "I&#39;m not familiar with Grafana nor how you have your solution structured so I&#39;m not sure of the exact method you need to use to reference the javascript file, but it most definitely is not the .ts file that you want to reference."}, {"owner": {"reputation": 11, "user_id": 11529119, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-51vs1LqhoEE/AAAAAAAAAAI/AAAAAAAAACg/pGp3F5QCvtM/photo.jpg?sz=128", "display_name": "Rania", "link": "https://stackoverflow.com/users/11529119/rania"}, "reply_to_user": {"reputation": 5860, "user_id": 548997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JJ1gz.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/548997/lex"}, "edited": false, "score": 0, "creation_date": 1562771750, "post_id": 56973079, "comment_id": 100483791, "body": "what do you mean by how my solution is structured?"}, {"owner": {"reputation": 325, "user_id": 8174439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdb8ecf0918a322fd3ae67aa33c773a?s=128&d=identicon&r=PG&f=1", "display_name": "Rod", "link": "https://stackoverflow.com/users/8174439/rod"}, "edited": false, "score": 0, "creation_date": 1562771758, "post_id": 56973079, "comment_id": 100483799, "body": "You may find this post helpful - <a href=\"https://stackoverflow.com/questions/47346559/how-to-call-external-javascript-function-in-angular-5\" title=\"how to call external javascript function in angular 5\">stackoverflow.com/questions/47346559/&hellip;</a>"}, {"owner": {"reputation": 5860, "user_id": 548997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JJ1gz.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/548997/lex"}, "edited": false, "score": 0, "creation_date": 1562772051, "post_id": 56973079, "comment_id": 100483966, "body": "@Rania I mean that I don&#39;t know the folder structure of your solution nor your build/deploy process. If you are getting a 404 when using <code>&lt;script src=&quot;..&#47;clock_ctrl.js&quot;&gt;&lt;&#47;script&gt;</code> it either means your javascript file is located somewhere else or your build process is not transpiling your TypeScript to javascript."}, {"owner": {"reputation": 11, "user_id": 11529119, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-51vs1LqhoEE/AAAAAAAAAAI/AAAAAAAAACg/pGp3F5QCvtM/photo.jpg?sz=128", "display_name": "Rania", "link": "https://stackoverflow.com/users/11529119/rania"}, "edited": false, "score": 0, "creation_date": 1562772483, "post_id": 56973079, "comment_id": 100484222, "body": "and how can I know if my build process is not transpiling my TypeScript to javascript ?"}], "owner": {"reputation": 11, "user_id": 11529119, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-51vs1LqhoEE/AAAAAAAAAAI/AAAAAAAAACg/pGp3F5QCvtM/photo.jpg?sz=128", "display_name": "Rania", "link": "https://stackoverflow.com/users/11529119/rania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562770347, "creation_date": 1562769422, "last_edit_date": 1562770347, "question_id": 56973079, "link": "https://stackoverflow.com/questions/56973079/how-do-we-call-a-typescript-function-in-a-html-code-not-in-the-same-file", "title": "how do we call a typescript function in a html code (not in the same file )", "body": "<p>I'm trying to do a plugin for Grafana, so I took the clock-panel (given by Grafana) as an example.</p>\n\n<p>So my problem is that I'm trying to call a TypeScript function from the file clock_ctrl.ts in the html file options.html.</p>\n\n<p>I have tried many ways:</p>\n\n<ol>\n<li><pre><code>&lt;form [ngFormModel]=\"companyForm\" (submit)=\"namefunction()\"&gt;\n  &lt;button type=\"submit\"&gt;Save&lt;/button&gt;\n&lt;/form&gt;\n</code></pre></li>\n</ol>\n\n<p>but it doesn't work </p>\n\n<ol start=\"2\">\n<li><pre><code>&lt;script src=\"../clock_ctrl.ts\"&gt;&lt;/script&gt;\n&lt;body onload =\"namefunction();\"&gt;  &lt;/body&gt;\n    &lt;button type=\"submit\"&gt;Save&lt;/button&gt;\n</code></pre></li>\n</ol>\n\n<p>but I obtain the error </p>\n\n<blockquote>\n  <p>GET <a href=\"http://localhost:3000/clock_ctrl.ts\" rel=\"nofollow noreferrer\">http://localhost:3000/clock_ctrl.ts</a> 404 (Not Found)</p>\n</blockquote>\n\n<p>and I can't find a solution to my problem. </p>\n"}, {"tags": ["javascript", "typescript", "eslint"], "comments": [{"owner": {"reputation": 374, "user_id": 6442354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e4e0c22ec01b3b19c4ce385e9f6ab0?s=128&d=identicon&r=PG&f=1", "display_name": "adr5240", "link": "https://stackoverflow.com/users/6442354/adr5240"}, "edited": false, "score": 0, "creation_date": 1562769488, "post_id": 56973045, "comment_id": 100482467, "body": "I would say that <code>public write</code> is the one that doesn&#39;t have the explicit <code>return</code>. Every function returns <i>something</i> but if not explicitly written by you, you&#39;re likely to get that error."}, {"owner": {"reputation": 25, "user_id": 10254586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypTzA.png?s=128&g=1", "display_name": "Dadinho", "link": "https://stackoverflow.com/users/10254586/dadinho"}, "reply_to_user": {"reputation": 374, "user_id": 6442354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e4e0c22ec01b3b19c4ce385e9f6ab0?s=128&d=identicon&r=PG&f=1", "display_name": "adr5240", "link": "https://stackoverflow.com/users/6442354/adr5240"}, "edited": false, "score": 0, "creation_date": 1562769520, "post_id": 56973045, "comment_id": 100482491, "body": "<code>public get (key) {</code> This one.    Yes, you are right it has a return.   But I have already declared the return type in the interface, so why do I need to set it again?"}, {"owner": {"reputation": 374, "user_id": 6442354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e4e0c22ec01b3b19c4ce385e9f6ab0?s=128&d=identicon&r=PG&f=1", "display_name": "adr5240", "link": "https://stackoverflow.com/users/6442354/adr5240"}, "edited": false, "score": 1, "creation_date": 1562769650, "post_id": 56973045, "comment_id": 100482569, "body": "I&#39;m not 100% sure, but I&#39;m guessing it has to do with how your ESLINT works. It&#39;s likely looking for the <code>return</code> keyword in every function you write since that&#39;s easier than checking the return type and &#39;skipping over&#39; your <code>void</code> return. However an ESLINT warning won&#39;t break the code, it&#39;s simply a warning."}, {"owner": {"reputation": 274, "user_id": 11575449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548dc4491edaae5cf982a369685adc8e?s=128&d=identicon&r=PG&f=1", "display_name": "Santi", "link": "https://stackoverflow.com/users/11575449/santi"}, "edited": false, "score": 0, "creation_date": 1562770152, "post_id": 56973045, "comment_id": 100482861, "body": "In general, you&#39;re saying <i>&quot;Every implementation of <code>CacheSolution</code> <b>must</b> have a method <code>check</code> that returns a <code>boolean</code>.&quot;</i> If your implementation doesn&#39;t specify that its <code>check</code> method returns a <code>boolean</code>, then we cannot know if the interface has been completely/properly implemented. Your implementation could have a <code>check</code> method that returns a <code>string</code> instead, and this would be <i>wrong</i>. The duck typing of TypeScript might allow this but you would have an implementation that doesn&#39;t implement all methods of the interface."}, {"owner": {"reputation": 274, "user_id": 11575449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548dc4491edaae5cf982a369685adc8e?s=128&d=identicon&r=PG&f=1", "display_name": "Santi", "link": "https://stackoverflow.com/users/11575449/santi"}, "edited": false, "score": 1, "creation_date": 1562770641, "post_id": 56973045, "comment_id": 100483150, "body": "Long story short, the purpose of an interface is not to <i>pass</i> information or definitions. Interfaces provide a strict set of instructions. If your interface says <code>check</code> returns a <code>boolean</code>, and your implementation doesn&#39;t say the same thing, then that implementation is <i>wrong</i>."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 8332495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740997600fd8bfecb4391f9c958524d3?s=128&d=identicon&r=PG&f=1", "display_name": "Alekhine", "link": "https://stackoverflow.com/users/8332495/alekhine"}, "is_accepted": true, "score": 1, "last_activity_date": 1562774598, "last_edit_date": 1562774598, "creation_date": 1562772975, "answer_id": 56974160, "question_id": 56973045, "link": "https://stackoverflow.com/questions/56973045/why-do-i-need-to-declare-the-return-type-twice/56974160#56974160", "title": "Why do I need to declare the return type twice?", "body": "<p>Change this</p>\n\n<p><code>public write (key: string, value: string) {</code></p>\n\n<p>to this</p>\n\n<p><code>public write (key: string, value: string):void {</code></p>\n\n<p>The reason you are getting this error probably has to do with you lint rules having a rule requiring method return types, see <a href=\"https://stackoverflow.com/questions/42793701/is-there-a-way-to-enforce-method-return-types-on-typescript-classes-via-a-tslint\">this answer</a> for more details on that.</p>\n"}], "owner": {"reputation": 25, "user_id": 10254586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypTzA.png?s=128&g=1", "display_name": "Dadinho", "link": "https://stackoverflow.com/users/10254586/dadinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 56974160, "answer_count": 1, "score": 0, "last_activity_date": 1562774598, "creation_date": 1562769314, "last_edit_date": 1562769400, "question_id": 56973045, "link": "https://stackoverflow.com/questions/56973045/why-do-i-need-to-declare-the-return-type-twice", "title": "Why do I need to declare the return type twice?", "body": "<p>I am building an api just for practice.\nIn my solution I would like to provide some kind of cache functionality. Its type can be set in configuration file like writing into file or into database.</p>\n\n<p>My question is rather related to the 'eslint', because during the development I am using typescript and I want to linting my source code before the commit.</p>\n\n<p>I cannot understand the point of this warning message during the linting: </p>\n\n<blockquote>\n  <p>9:14  warning  Missing return type on function    @typescript-eslint/explicit-function-return-type</p>\n</blockquote>\n\n<p>I would like to avoid the duplication and use everything in the right place.</p>\n\n<p>If I set again the return type like as at the check method then the message is gone. But in that case I cannot see the point to set it in the interface.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface CacheSolution {\n  get(key: string): string;\n  write(key: string, value: string): void;\n  check(key: string): boolean;\n}\n\nclass CacheIntoDatabase implements CacheSolution {\n\n  public get (key) {\n    return 'something';\n  }\n\n  public write (key: string, value: string) {\n\n  }\n\n  public check (key: string): boolean {\n    return true;\n  }\n\n}\n</code></pre>\n\n<p>ESLINT configuration</p>\n\n<pre><code>module.exports = {\n  'env': {\n    'es6': true,\n    'node': true\n  },\n  'extends': [\n      'plugin:@typescript-eslint/recommended'\n  ],\n  'globals': {\n    'Atomics': 'readonly',\n    'SharedArrayBuffer': 'readonly'\n  },\n  'parser':  '@typescript-eslint/parser',\n  'parserOptions': {\n    'ecmaVersion': 2018,\n    'sourceType': 'module'\n  },\n  'rules': {\n    'indent': 'off',\n    '@typescript-eslint/indent': ['error', 2]\n  }\n};\n</code></pre>\n\n<p>Can I solve the warning somehow or I need to try live together with the duplication? :) </p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": true, "score": 5, "last_activity_date": 1562942254, "last_edit_date": 1562942254, "creation_date": 1562777927, "answer_id": 56975414, "question_id": 56972898, "link": "https://stackoverflow.com/questions/56972898/could-i-skip-all-subsequent-operators-chain-if-condition-is-truthy-in-rxjs/56975414#56975414", "title": "Could I skip all subsequent operators chain if condition is truthy in RxJS", "body": "<p>I suppose you always can play with <code>switchMap</code></p>\n\n<pre><code>  return this.http.get('someUrl').pipe(\n    switchMap(response =&gt; {\n      if (!response.length) {\n        return of(null);\n      } else {\n        return of(result).pipe(\n          map((response: ProjectDriver[]) =&gt; response.filter((projectDriver: ProjectDriver) =&gt; projectDriver.streamName !== \"AllRevenueStreamTotals\")),\n          map((response: ProjectDriver[]) =&gt; command =&gt; ({}))\n        )\n      }\n    }\n  )\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 6140719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9f3aef2a2c72f8c70cda974851655d8?s=128&d=identicon&r=PG&f=1", "display_name": "a_zatula", "link": "https://stackoverflow.com/users/6140719/a-zatula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 56975414, "answer_count": 1, "score": 4, "last_activity_date": 1563215911, "creation_date": 1562768841, "last_edit_date": 1563215911, "question_id": 56972898, "link": "https://stackoverflow.com/questions/56972898/could-i-skip-all-subsequent-operators-chain-if-condition-is-truthy-in-rxjs", "title": "Could I skip all subsequent operators chain if condition is truthy in RxJS", "body": "<p>Is it possible in RxJS 5.5 to implement condition using some operator to skip all subsequent operators and emit some value (<code>false</code>)? For instance in this ng service method I would bypass bunch of this <code>.map</code> chain and provide <code>false</code> value immediately if <code>response.length === 0</code>:</p>\n\n<pre><code>getProjectDrivers(projectId): Observable&lt;any&gt; {\n  return this.http.get('someUrl').pipe(\n    // if (response.length === 0) { return false; and skip whole operator chain bellow}\n    map((response: ProjectDriver[]) =&gt; response.filter((projectDriver: ProjectDriver) =&gt; projectDriver.streamName !== \"AllRevenueStreamTotals\")),\n    map((response: ProjectDriver[]) =&gt; command =&gt; ({})\n  )\n)\n.catch(this.handleError);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["angular", "typescript", "internet-explorer-11", "polyfills"], "answers": [{"tags": [], "owner": {"reputation": 10400, "user_id": 7062291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ca0ff9016cfdb9352adaf4435737d6?s=128&d=identicon&r=PG&f=1", "display_name": "Zhi Lv", "link": "https://stackoverflow.com/users/7062291/zhi-lv"}, "is_accepted": true, "score": 1, "last_activity_date": 1562823094, "creation_date": 1562823094, "answer_id": 56982175, "question_id": 56972692, "link": "https://stackoverflow.com/questions/56972692/angular-7-need-polyfill-for-class-in-npm-package/56982175#56982175", "title": "Angular 7: need polyfill for &#39;Class&#39; in npm package", "body": "<p>The JavaScript classes not supported the IE browser, you could check the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Browser_compatibility\" rel=\"nofollow noreferrer\">JavaScript Classes Browser compatibility</a>.</p>\n\n<p>In the angular 7 application, if we want to define a class, we could create a class using typescript.</p>\n\n<p>For example, create a Hero class in the src/app folder, named hero.ts.</p>\n\n<p>Code in src/app/hero.ts</p>\n\n<pre><code>export class Hero {\n  id: number;\n  name: string;\n}\n</code></pre>\n\n<p>Then in the component class, we could import the Hero class, and use the Hero class using the following code:</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { Hero } from '../hero';\n\n@Component({\n  selector: 'app-heroes',\n  templateUrl: './heroes.component.html',\n  styleUrls: ['./heroes.component.css']\n})\nexport class HeroesComponent implements OnInit {\n  hero: Hero = {\n    id: 1,\n    name: 'Windstorm'\n  };\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n</code></pre>\n\n<p>More detail information about angular application, please check the <a href=\"https://v7.angular.io/tutorial/toh-pt1\" rel=\"nofollow noreferrer\">angular document</a>.</p>\n\n<p>Besides, there is another method, you could use <a href=\"https://babeljs.io/\" rel=\"nofollow noreferrer\">babel</a> to transpile your code to ES5\ufeff</p>\n"}], "owner": {"reputation": 1022, "user_id": 3584920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d56b8202a02b09693c3ce309f263da9d?s=128&d=identicon&r=PG&f=1", "display_name": "hofshteyn", "link": "https://stackoverflow.com/users/3584920/hofshteyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 56982175, "answer_count": 1, "score": 1, "last_activity_date": 1562823094, "creation_date": 1562768152, "question_id": 56972692, "link": "https://stackoverflow.com/questions/56972692/angular-7-need-polyfill-for-class-in-npm-package", "title": "Angular 7: need polyfill for &#39;Class&#39; in npm package", "body": "<p>I faced with problem that my app based on Angular 7 doesn't working in IE 11. </p>\n\n<p>I'm using npm package which starts in <code>index.js</code> from </p>\n\n<pre><code>class PackageClass { \n   // code\n}\n</code></pre>\n\n<p>And at all browsers it works fine, it do what it should do. But in IE11 browser even can't open an app, it fails with an error: <code>Syntax error. File: vendor.js line ...</code>. And error leads to the class definition.</p>\n\n<p>Polyfills that I have already in app:</p>\n\n<pre><code>/** IE9, IE10 and IE11 requires all of the following polyfills. **/\nimport 'core-js/es6/symbol';\nimport 'core-js/es6/object';\nimport 'core-js/es6/function';\nimport 'core-js/es6/parse-int';\nimport 'core-js/es6/parse-float';\nimport 'core-js/es6/number';\nimport 'core-js/es6/math';\nimport 'core-js/es6/string';\nimport 'core-js/es6/date';\nimport 'core-js/es6/array';\nimport 'core-js/es6/regexp';\nimport 'core-js/es6/map';\nimport 'core-js/es6/weak-map';\nimport 'core-js/es6/set';\n\n\n/**\n * Required to support Web Animations `@angular/platform-browser/animations`.\n * Needed for: All but Chrome, Firefox and Opera. http://caniuse.com/#feat=web-animation\n **/\n// import 'web-animations-js';  // Run `npm install --save web-animations-js`.\n\n\n\n/***************************************************************************************************\n * Zone JS is required by default for Angular itself.\n */\nimport 'zone.js/dist/zone';  // Included with Angular CLI.\n\n\n\n/***************************************************************************************************\n * APPLICATION IMPORTS\n */\nimport 'core-js/es7/object';\nimport 'core-js/es7/array';\n</code></pre>\n\n<p>How can I solve it (run my app in IE11)? I think that polyfills should do this work. </p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 881, "user_id": 9628950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "skolldev", "link": "https://stackoverflow.com/users/9628950/skolldev"}, "edited": false, "score": 1, "creation_date": 1562767904, "post_id": 56972571, "comment_id": 100481488, "body": "What is not working?"}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 2, "creation_date": 1562767919, "post_id": 56972571, "comment_id": 100481494, "body": "What exactly does &quot;not working&quot; mean? Does <i>anything</i> happen? Have you done any debugging?"}, {"owner": {"reputation": 595, "user_id": 2921861, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/706880107/picture?type=large", "display_name": "Tolga Tamer", "link": "https://stackoverflow.com/users/2921861/tolga-tamer"}, "edited": false, "score": 0, "creation_date": 1562768474, "post_id": 56972571, "comment_id": 100481853, "body": "when i look at the this.model array, the patient object doesnt have the property lastActivity"}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1562768540, "post_id": 56972571, "comment_id": 100481887, "body": "Is the code you posted inside some sort of callback function?"}, {"owner": {"reputation": 365, "user_id": 7945055, "user_type": "registered", "profile_image": "https://graph.facebook.com/1439573996107245/picture?type=large", "display_name": "Patryk Panek", "link": "https://stackoverflow.com/users/7945055/patryk-panek"}, "edited": false, "score": 0, "creation_date": 1562768549, "post_id": 56972571, "comment_id": 100481895, "body": "Probably lastActivity property doesn&#39;t exist on your object. Try to use Object.assign instead  <code>patient = Object.assign(patient, { lastActivity: item.lastUploadData });</code>"}, {"owner": {"reputation": 727, "user_id": 2318876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TyHyT.png?s=128&g=1", "display_name": "jspassov", "link": "https://stackoverflow.com/users/2318876/jspassov"}, "edited": false, "score": 0, "creation_date": 1562768582, "post_id": 56972571, "comment_id": 100481914, "body": "From where your &#39;this.model&#39; does? Could you please post some more code."}, {"owner": {"reputation": 365, "user_id": 7945055, "user_type": "registered", "profile_image": "https://graph.facebook.com/1439573996107245/picture?type=large", "display_name": "Patryk Panek", "link": "https://stackoverflow.com/users/7945055/patryk-panek"}, "edited": false, "score": 0, "creation_date": 1562768632, "post_id": 56972571, "comment_id": 100481943, "body": "Edited answer :)"}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "reply_to_user": {"reputation": 365, "user_id": 7945055, "user_type": "registered", "profile_image": "https://graph.facebook.com/1439573996107245/picture?type=large", "display_name": "Patryk Panek", "link": "https://stackoverflow.com/users/7945055/patryk-panek"}, "edited": false, "score": 0, "creation_date": 1562768921, "post_id": 56972571, "comment_id": 100482120, "body": "@PatrykPanek that would make no difference; the assignment as posted is fine"}, {"owner": {"reputation": 595, "user_id": 2921861, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/706880107/picture?type=large", "display_name": "Tolga Tamer", "link": "https://stackoverflow.com/users/2921861/tolga-tamer"}, "edited": false, "score": 0, "creation_date": 1562769119, "post_id": 56972571, "comment_id": 100482258, "body": "Afterthat i m just saving the this.modal array. the problem is patient has the properties, but inside of the array the patient doesnt have those values.. Do i need to replace it ?"}, {"owner": {"reputation": 500, "user_id": 7960846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18417628446471d2a88630f538094a2a?s=128&d=identicon&r=PG&f=1", "display_name": "indrajeet", "link": "https://stackoverflow.com/users/7960846/indrajeet"}, "edited": false, "score": 0, "creation_date": 1562769859, "post_id": 56972571, "comment_id": 100482699, "body": "debug the code you will know .....you might wanna break the loop once <code>patient</code> gets last activity."}], "answers": [{"tags": [], "owner": {"reputation": 821, "user_id": 8080853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667eb0910b0633764ca2160e42209ced?s=128&d=identicon&r=PG&f=1", "display_name": "Teun", "link": "https://stackoverflow.com/users/8080853/teun"}, "is_accepted": false, "score": 0, "last_activity_date": 1562769768, "creation_date": 1562769768, "answer_id": 56973190, "question_id": 56972571, "link": "https://stackoverflow.com/questions/56972571/how-can-i-manipulate-an-object-while-inside-of-a-loop/56973190#56973190", "title": "How can i manipulate an object while inside of a loop", "body": "<p>The <code>patient</code> in the array itself is not updated, to make sure you are not updating a separate <code>patient</code> you can use a <code>for-loop</code> so that you definitely update the <code>patient</code> in the array. </p>\n\n<pre><code>for (const item of data) {\n    for (let i = 0; i &lt; this.model.length; i++) {\n        if (this.model[i].linkedUserId === item.userId) {\n            this.model[i].lastActivity = item.lastUploadDate;\n            break;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 11765559, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-frP434rb9hc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfkKlCnXQ2ulWzQR0uC3JjW0z4Hdg/photo.jpg?sz=128", "display_name": "Arun Devarajan", "link": "https://stackoverflow.com/users/11765559/arun-devarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1562773127, "creation_date": 1562773127, "answer_id": 56974206, "question_id": 56972571, "link": "https://stackoverflow.com/questions/56972571/how-can-i-manipulate-an-object-while-inside-of-a-loop/56974206#56974206", "title": "How can i manipulate an object while inside of a loop", "body": "<p>If you can store data in <code>this.model</code> as an object you can update it easily. Consider the following model data.</p>\n\n<pre><code>{ \n    \"abcd\": { linkedUserId: \"abcd\", name: \"user1\" },\n    \"efgh\": { linkedUserId: \"efgh\", name: \"user2\" },\n}\n</code></pre>\n\n<p>Now you can update the model by doing the following.</p>\n\n<pre><code>for (const item of data) {\n    this.model[item.userId].lastActivity = item.lastUploadDate;\n}\n</code></pre>\n\n<p>To get model in the form of an array you can do <code>const model = Object.values(this.model);</code>.</p>\n"}], "owner": {"reputation": 595, "user_id": 2921861, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/706880107/picture?type=large", "display_name": "Tolga Tamer", "link": "https://stackoverflow.com/users/2921861/tolga-tamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562942125, "creation_date": 1562767819, "last_edit_date": 1562942125, "question_id": 56972571, "link": "https://stackoverflow.com/questions/56972571/how-can-i-manipulate-an-object-while-inside-of-a-loop", "title": "How can i manipulate an object while inside of a loop", "body": "<p>So i m trying to manipulate the object while going through the loop.\nWell, its not working.. How can i make it work so the const <code>patient</code> has the property <code>lastActivity</code> inside of the <code>this.model</code> array?  </p>\n\n<p>javascript:</p>\n\n<pre><code>for (const item of data) {\n  const patient = this.model.find(\n     x =&gt; x.linkedUserId === item.userId\n  );\n  if (patient) {\n    patient.lastActivity = item.lastUploadDate;\n  }\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 0, "creation_date": 1562768548, "post_id": 56972459, "comment_id": 100481892, "body": "Other than the TS definition, all 3 of these are completely equivalent, I don&#39;t see how debugging would be any worse / better in either one."}, {"owner": {"reputation": 23802, "user_id": 161457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06b5ef5d36cde401c3f415946506c2ef?s=128&d=identicon&r=PG", "display_name": "TrueWill", "link": "https://stackoverflow.com/users/161457/truewill"}, "reply_to_user": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 0, "creation_date": 1562777372, "post_id": 56972459, "comment_id": 100486815, "body": "@James I thought <code>function</code> set the display name on React components but anonymous arrow functions did not."}, {"owner": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 1, "creation_date": 1562778007, "post_id": 56972459, "comment_id": 100487087, "body": "ah ok, in that respect of naming then yeah you&#39;d get that for free with other components - but you can assign names to anonymous func components e.g. <code>MyFunc.displayName = &#39;MyFunc&#39;</code> so I still don&#39;t see it as a huge issue."}], "owner": {"reputation": 23802, "user_id": 161457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06b5ef5d36cde401c3f415946506c2ef?s=128&d=identicon&r=PG", "display_name": "TrueWill", "link": "https://stackoverflow.com/users/161457/truewill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562767429, "creation_date": 1562767429, "question_id": 56972459, "link": "https://stackoverflow.com/questions/56972459/typing-function-components-with-names", "title": "Typing function components with names", "body": "<p>The new way of declaring React function components with TypeScript appears to be (option 1):</p>\n\n<pre><code>interface IProps {\n  bar: string;\n}\n\nconst Foo: React.FC&lt;IProps&gt; = ({ bar }) =&gt; &lt;div&gt;{bar}&lt;/div&gt;;\n\nexport default Foo;\n</code></pre>\n\n<p>However that uses an anonymous arrow function, which some people believe makes debugging more difficult.</p>\n\n<p>Option 2 would be:</p>\n\n<pre><code>export default function Foo({ bar }: IProps): JSX.Element {\n  return &lt;div&gt;{bar}&lt;/div&gt;;\n}\n</code></pre>\n\n<p>Option 3 is very verbose, but does include the \"official\" type:</p>\n\n<pre><code>function InternalFoo({ bar }: IProps): JSX.Element {\n  return &lt;div&gt;{bar}&lt;/div&gt;;\n}\n\nconst Foo: React.FC&lt;IProps&gt; = InternalFoo;\n\nexport default Foo;\n</code></pre>\n\n<p>There may be other options as well.</p>\n\n<p>What is the idiomatic / preferred option and why?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 4655, "user_id": 5018962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/06ffe0d43026300cc8e4d55cd4f1db73?s=128&d=identicon&r=PG&f=1", "display_name": "eddyP23", "link": "https://stackoverflow.com/users/5018962/eddyp23"}, "edited": false, "score": 0, "creation_date": 1562766499, "post_id": 56972106, "comment_id": 100480619, "body": "I am curious, what is your use case?"}, {"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "reply_to_user": {"reputation": 4655, "user_id": 5018962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/06ffe0d43026300cc8e4d55cd4f1db73?s=128&d=identicon&r=PG&f=1", "display_name": "eddyP23", "link": "https://stackoverflow.com/users/5018962/eddyp23"}, "edited": false, "score": 0, "creation_date": 1562766671, "post_id": 56972106, "comment_id": 100480724, "body": "I have a <code>serialize</code> function from object to string and <code>deserialize</code> that does the opposite. the <code>deserialize</code> may fail so I return an empty object. so the <code>deserialize</code> function&#39;s return type is <code>{ aaa : number ; bbb : string ; ... } | empty-object</code>"}, {"owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "edited": false, "score": 1, "creation_date": 1562766843, "post_id": 56972106, "comment_id": 100480820, "body": "Why not return undefined or null?"}, {"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 0, "creation_date": 1562768419, "post_id": 56972106, "comment_id": 100481822, "body": "i guess I will."}], "answers": [{"tags": [], "owner": {"reputation": 4291, "user_id": 5122581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lx09Q.png?s=128&g=1", "display_name": "Phillip", "link": "https://stackoverflow.com/users/5122581/phillip"}, "is_accepted": true, "score": 3, "last_activity_date": 1562766860, "creation_date": 1562766860, "answer_id": 56972270, "question_id": 56972106, "link": "https://stackoverflow.com/questions/56972106/how-to-accept-only-an-empty-object/56972270#56972270", "title": "How to accept only an empty object?", "body": "<p>You can user <code>never</code> to force an object to be empty:</p>\n\n<pre><code>type Empty = { [key: string]: never }\n</code></pre>\n\n<p>See a Typescript Playground: <a href=\"http://www.typescriptlang.org/play/#code/C4TwDgpgBAogtmUUC8UDeUDaBrCIBcUAzsAE4CWAdgOYC6hlEAbhKVAL4DcAUNwMYB7SiSgAPQvEQgU6LvyEiCsBElQZxUAIwdOQA\" rel=\"nofollow noreferrer\">http://www.typescriptlang.org/play/#code/C4TwDgpgBAogtmUUC8UDeUDaBrCIBcUAzsAE4CWAdgOYC6hlEAbhKVAL4DcAUNwMYB7SiSgAPQvEQgU6LvyEiCsBElQZxUAIwdOQA</a></p>\n"}, {"comments": [{"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 1, "creation_date": 1562767448, "post_id": 56972327, "comment_id": 100481202, "body": "thanks for the great info. i think you are right. optional is not an option in the project im working on (sadly) and i pretty much hate to return null/undefined. i think that i will return undefined. (+ i must accept Phillip answer but i will probably go with you)"}], "tags": [], "owner": {"reputation": 4655, "user_id": 5018962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/06ffe0d43026300cc8e4d55cd4f1db73?s=128&d=identicon&r=PG&f=1", "display_name": "eddyP23", "link": "https://stackoverflow.com/users/5018962/eddyp23"}, "is_accepted": false, "score": 1, "last_activity_date": 1562767611, "last_edit_date": 1562767611, "creation_date": 1562767058, "answer_id": 56972327, "question_id": 56972106, "link": "https://stackoverflow.com/questions/56972106/how-to-accept-only-an-empty-object/56972327#56972327", "title": "How to accept only an empty object?", "body": "<p>And I would argue that this is impossible because even in strongly typed languages, you cannot restrict from accepting a more derived type.</p>\n\n<p>And what you have here is basically (under the hood) saying that <code>x</code> should be at least of type <code>{}</code>. </p>\n\n<p>Therefore I see a few options here:</p>\n\n<ul>\n<li>return <code>null</code> or <code>undefined</code></li>\n<li>throw an exception if it fails (which is very standard in such scenarios)</li>\n<li>Have some <code>Option</code> type that either has a value or doesn't, which is a more functional way of solving the problem of either returning a value or a failure. <a href=\"https://tech.evojam.com/2016/03/21/practical-intro-to-monads-in-javascript-either/\" rel=\"nofollow noreferrer\">This has more info on the topic.</a></li>\n</ul>\n\n<p>EDIT: Phillip provided how to achieve it, so my guess was wrong. But I still wouldn't recommend using it if possible.</p>\n"}], "owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56972270, "answer_count": 2, "score": 1, "last_activity_date": 1562767611, "creation_date": 1562766343, "question_id": 56972106, "link": "https://stackoverflow.com/questions/56972106/how-to-accept-only-an-empty-object", "title": "How to accept only an empty object?", "body": "<pre><code>const x: {} = {a:1} \n</code></pre>\n\n<p>The above code compiles. How can I accept only an empty object: <code>{}</code>?</p>\n\n<hr>\n\n<ul>\n<li>I know that <code>{}</code> accepts any object containing multiple <code>key</code>. I'm looking for a way to declare a type that accept only an object without any keys.</li>\n</ul>\n"}, {"tags": ["javascript", "typescript", "karma-typescript"], "comments": [{"owner": {"reputation": 1349, "user_id": 11702000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8b88ecd35b05ea2f7fb273752bc62b?s=128&d=identicon&r=PG&f=1", "display_name": "Software Person", "link": "https://stackoverflow.com/users/11702000/software-person"}, "edited": false, "score": 0, "creation_date": 1562770512, "post_id": 56971943, "comment_id": 100483074, "body": "Maybe start with showing your code code in /home/sample/sampleproj/test/base.spec.ts, before you get downvoted"}], "owner": {"reputation": 21, "user_id": 11149847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tNrIv.jpg?s=128&g=1", "display_name": "KiraDave", "link": "https://stackoverflow.com/users/11149847/kiradave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562770694, "creation_date": 1562765782, "last_edit_date": 1562770694, "question_id": 56971943, "link": "https://stackoverflow.com/questions/56971943/is-there-solution-for-this-error-message-karma-typescript", "title": "Is there solution for this error message (karma-typescript)?", "body": "<p>When I run <code>karma start</code> I get this message:</p>\n\n<blockquote>\n  <p>Uncaught Error: Can't find entrypoint\n  [/home/sample/sampleproj/test/base.spec.ts] (required by commonjs.js) \n  at node_modules/karma-typescript/dist/client/commonjs.js:13:17</p>\n</blockquote>\n\n<p>How to solve this?</p>\n\n<pre><code>import 'zone.js/dist/zone';\nimport 'zone.js/dist/long-stack-trace-zone';\nimport 'zone.js/dist/proxy';\nimport 'zone.js/dist/sync-test';\nimport 'zone.js/dist/jasmine-patch';\nimport 'zone.js/dist/async-test';\nimport 'zone.js/dist/fake-async-test';\nimport { TestBed } from '@angular/core/testing';\nimport { BrowserDynamicTestingModule, platformBrowserDynamicTesting } from '@angular/platform-browser-dynamic/testing';\n\nTestBed.initTestEnvironment(BrowserDynamicTestingModule, platformBrowserDynamicTesting());\n</code></pre>\n"}, {"tags": ["javascript", "html", "css", "reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 14632014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBWVl.png?s=128&g=1", "display_name": "Ryu", "link": "https://stackoverflow.com/users/14632014/ryu"}, "is_accepted": false, "score": 1, "last_activity_date": 1605357470, "creation_date": 1605357470, "answer_id": 64833976, "question_id": 56971636, "link": "https://stackoverflow.com/questions/56971636/how-to-randomize-element-positions-and-size-within-a-css-grid-in-a-react-app/64833976#64833976", "title": "How to: randomize element positions and size within a css &quot;grid&quot; in a React app", "body": "<p>For randomizing array you can use <a href=\"https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\">How to randomize (shuffle) a JavaScript array?</a></p>\n<p>You can set the size of your grids as maxSize of right and left sizes + 1/3 of total size like this</p>\n<pre><code>let gridSize = Math.max(...itemContents.map((item) =&gt; parseInt(item)));\ngridSize = Math.ceil(gridSize + gridSize / 3);\n\n</code></pre>\n<p>There is my variant of code</p>\n<pre><code>  const itemContents = [&quot;5&quot;, &quot;7&quot;];\n  const leftSideCards = [];\n  const rightSideCards = [];\n\n  let gridSize = Math.max(...itemContents.map((item) =&gt; parseInt(item)));\n  gridSize = Math.ceil(gridSize + gridSize / 3);\n\n  const addInitialSet = (cardsList) =&gt; {\n    for (let index = 0; index &lt; gridSize; index++) {\n      cardsList.push(&lt;li id=&quot;left-side-items&quot; /&gt;);\n    }\n  };\n\n  const addCards = (cardsList, itemNumber) =&gt; {\n    for (let index = 0; index &lt; itemNumber; index++) {\n      cardsList[index] = &lt;li id=&quot;left-side-items&quot;&gt; &amp;#9608; &lt;/li&gt;;\n    }\n  };\n\n  const shuffle = (array) =&gt; {\n    let currentIndex = array.length,\n      temporaryValue,\n      randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return array;\n  };\n\n  addInitialSet(leftSideCards);\n  addInitialSet(rightSideCards);\n  addCards(leftSideCards, parseInt(itemContents[0]));\n  addCards(rightSideCards, parseInt(itemContents[1]));\n  shuffle(leftSideCards);\n  shuffle(rightSideCards);\n\n  const choiceArea = (\n    &lt;div className=&quot;card-compare-choiceArea&quot;&gt;\n      &lt;div id=&quot;card-first-choice&quot;&gt;{leftSideCards}&lt;/div&gt;\n      &lt;span id=&quot;space&quot; /&gt;\n      &lt;div id=&quot;card-second-choice&quot;&gt;{rightSideCards}&lt;/div&gt;\n      &lt;label id=&quot;saku&quot;&gt;Text!&lt;/label&gt;\n      &lt;span id=&quot;space2&quot; key=&quot;space2&quot;&gt;\n        &quot;feedback&quot;\n      &lt;/span&gt;\n      &lt;label id=&quot;late&quot;&gt;Grid size {gridSize}&lt;/label&gt;\n    &lt;/div&gt;\n  );\n\n  return &lt;div className=&quot;neure-number-compare&quot;&gt;{choiceArea}&lt;/div&gt;;\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1605357470, "creation_date": 1562764773, "last_edit_date": 1562765170, "question_id": 56971636, "link": "https://stackoverflow.com/questions/56971636/how-to-randomize-element-positions-and-size-within-a-css-grid-in-a-react-app", "title": "How to: randomize element positions and size within a css &quot;grid&quot; in a React app", "body": "<p>I need help with the concept of randomizing html-element positions and sizes within a grid I've defined. I'm working on my first project using React and I've been tasked to create an app where I display two set of black \"cards\" (rectangles) to the user of which he/she has to choose one. </p>\n\n<p>In the design description I've been given I've been told to randomize the position and size of these rectangle sets, but the amount on each side is always set.</p>\n\n<p>In other words I'm rendering say 3 rectangles on the left side of the screen and then 4 on the right side and then the user tries to answer which side has more rectangles in it.</p>\n\n<p>Below I have a snippet of the relevant code (I hope it shows up reasonably, quite new to this). The itemContents-array just pulls from my server values regarding the item being processed, so in this case it will just return a single digit number as a string, which is used to determine the correct amount of rectangles to render.</p>\n\n<pre><code>for (let index = 0; index &lt; parseInt(itemContents[0]); index++) { \nleftSideCards.push(&lt;li id=\"left-side-items\"&gt; &amp;#9608; &lt;/li&gt;)\n}\n\nfor (let index = 0; index &lt; parseInt(itemContents[1]); index++) {\nrightSideCards.push(&lt;li id=\"left-side-items\"&gt; &amp;#9608; &lt;/li&gt;)\n}\n\nchoiceArea = (\n                &lt;div className=\"card-compare-choiceArea\"&gt;\n                    &lt;div id=\"card-first-choice\"&gt;{leftSideCards}&lt;/div&gt;\n                    &lt;span id=\"space\"&gt;&lt;/span&gt;\n                    &lt;div id=\"card-second-choice\"&gt;{rightSideCards}&lt;/div&gt;\n                    &lt;label id=\"saku\"&gt;Text!&lt;/label&gt;\n                    &lt;span id=\"space2\" key=\"space2\"&gt;{feedback}&lt;/span&gt;\n                    &lt;label id=\"late\"&gt;Text!&lt;/label&gt;\n                &lt;/div&gt;\n            );\n        }\n\nreturn (\n        &lt;div className=\"neure-number-compare\"&gt;\n             {choiceArea}\n        &lt;/div&gt;\n       );\n    }\n</code></pre>\n\n<p>As for my CSS:</p>\n\n<pre><code>#card-first-choice {\n    display: grid;\n    list-style-type: none;\n    grid-template-columns: 30% 30% 30%;\n    grid-gap: 5px;\n    width: 30vw;\n    height: 60vh;\n    border: 2px solid black;\n    margin-top: 1em;\n}\n\n#card-second-choice {\n    display: grid;\n    list-style-type: none;\n    grid-template-columns: 30% 30% 30%;\n    grid-gap: 10px;\n    width: 30vw;\n    height: 60vh;\n    border: 2px solid black;\n    margin-top: 10px;\n}\n</code></pre>\n\n<p>So my logic was to create two grids, one for each side (\"card-first-choice &amp; card-second-choice\") and then have a set amount of columns (3) and then set the array of rectangles as its contents. And so we are at my issues of randomizing to which grid part does a rectangle go and randomizing the size of said rectangle. </p>\n\n<p>Right now my code works fine otherwise but it obviously just renders the squares in order filling the columns one by one and adding rows accordingly.</p>\n\n<p>I'm not sure either if using the UTF-8 geometric shapes to create the black rectangles is a good approach in regards to randomizing it's properties or if I should be using something else to create rectangles (it was just the easiest way I found to do it). Please suggest others if you have a working solution for my problem with it!</p>\n\n<p>Obviously if there's a simpler and better way to go about doing this (I can only assume that's a given), I'm willing to learn/listen to alternatives!</p>\n\n<p>As I'm a a junior dev in my first real project dealing with React for the first time and not being that versed in CSS either, I wholly assume that there are a bunch of things that are redundant or could be done more optimally (be gentle).</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 881, "user_id": 9628950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "skolldev", "link": "https://stackoverflow.com/users/9628950/skolldev"}, "is_accepted": false, "score": 0, "last_activity_date": 1562766093, "last_edit_date": 1562766093, "creation_date": 1562765463, "answer_id": 56971843, "question_id": 56971589, "link": "https://stackoverflow.com/questions/56971589/remove-whitespace-from-the-field-form/56971843#56971843", "title": "Remove whitespace from the field form", "body": "<p>you could subscribe to the valueChange event:</p>\n\n<pre><code>this.formGroup.controls.str.valueChanges.subscribe(val =&gt; {\n    // emitEvent: false will prevent this change from triggering the value change event again\n    this.formGroup.controls.str.setValue(val.trim(), { emitEvent: false };\n})\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9721494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93c7cc8e75a76e05785672caf4ec47e?s=128&d=identicon&r=PG&f=1", "display_name": "new_user503", "link": "https://stackoverflow.com/users/9721494/new-user503"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562766093, "creation_date": 1562764588, "question_id": 56971589, "link": "https://stackoverflow.com/questions/56971589/remove-whitespace-from-the-field-form", "title": "Remove whitespace from the field form", "body": "<p>I need to remove the whitespace from both sides of the string. \nThe string is entered in the field, which is valid: <code>'str': ['', [Validators.required, Validators.pattern(/^(?![- ])(?!.*[- ]{2})(?!.*[- ]$)[A-z\u0410-\u044f\u0451\u0401() -]+$/)]]</code>. \nI want to use method <code>trim()</code> to remove the whitespaces. How to apply it correctly to the form field?</p>\n"}, {"tags": ["node.js", "angular", "typescript", "rxjs", "ngrx"], "comments": [{"owner": {"reputation": 4672, "user_id": 7404235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e0a64e8ce79b73f996e4cfe6b16cb3?s=128&d=identicon&r=PG", "display_name": "enno.void", "link": "https://stackoverflow.com/users/7404235/enno-void"}, "edited": false, "score": 0, "creation_date": 1562764413, "post_id": 56971457, "comment_id": 100479484, "body": "I dont know rxjs/store, is ngrx/store what u looking for?. Anyway, if there is a constantly refresh of the data you should think about to talk to your api via websockets"}, {"owner": {"reputation": 1776, "user_id": 9011723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20385cc990720ff64499b9de3b52fc70?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Ghignatti", "link": "https://stackoverflow.com/users/9011723/jo%c3%a3o-ghignatti"}, "edited": false, "score": 0, "creation_date": 1562764605, "post_id": 56971457, "comment_id": 100479621, "body": "I think you&#39;re talking about NgRx/Store. If that&#39;s the case, consider reading some articles on where to use NgRx and what can you benefit from. If your app is getting busy by requesting information each X time, NgRx will centralize it for you and provide a better way to your components to query info, but maybe won&#39;t fix your &quot;a lot of request in parallel&quot;. Maybe what you really need is a websocket. Good thing is there&#39;s a good part of the community that thinks websocket is really good to work with NgRx."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11763718"}, "edited": false, "score": 0, "creation_date": 1562764658, "post_id": 56971457, "comment_id": 100479650, "body": "I apologize...I rean&#39;t ngrx /store .."}, {"owner": {"reputation": 3921, "user_id": 2050306, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/38d3c3d6d1dcea96cbe01afbba90c6d3?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/2050306/robert"}, "edited": false, "score": 0, "creation_date": 1562765454, "post_id": 56971457, "comment_id": 100480083, "body": "Use ngrx/store if your components has complex interactions with each other. Data is modified in multiple places etc. Check <a href=\"https://medium.com/default-to-open/understanding-a-large-scale-angular-app-with-ngrx-80f9fc5660cc\" rel=\"nofollow noreferrer\">this</a> article."}], "answers": [{"tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": true, "score": 1, "last_activity_date": 1562771569, "creation_date": 1562771569, "answer_id": 56973773, "question_id": 56971457, "link": "https://stackoverflow.com/questions/56971457/integrating-ngrx-store-to-an-existing-angular-project/56973773#56973773", "title": "Integrating ngrx/Store to an existing Angular project", "body": "<p>To make it's easy for you. I would say yes because ngrx provide API to break the application into smaller peice. </p>\n\n<p>If you have multiple feature you will have 1 main store and for every feature you will have feature store connect to main store. So you can easy manage everything into feature seperation concern.</p>\n\n<p>Another thing is ngrx provide effect middleware allow user to working with side effect like API call so you will have completely seprate code when working with API</p>\n\n<p>I would recommend you read there small demo <a href=\"https://github.com/ngrx/platform/tree/master/projects/example-app/src/app\" rel=\"nofollow noreferrer\">here</a> for every feature they create <code>effects, actions, reducers, selector, services.</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11763718"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 56973773, "answer_count": 1, "score": 2, "last_activity_date": 1570774818, "creation_date": 1562764224, "last_edit_date": 1570774818, "question_id": 56971457, "link": "https://stackoverflow.com/questions/56971457/integrating-ngrx-store-to-an-existing-angular-project", "title": "Integrating ngrx/Store to an existing Angular project", "body": "<p>I have an Angular 7 project that is currently and has lots of components that talk to an API and updates data from it.\nThe is constantly refreshed using setTimeout so it's getting very busy with all the components refreshing data from the API.</p>\n\n<p>I am therefore thinking of adding ngrx/Store to the project.</p>\n\n<p>Is ngrx/Store a solution for this kind of issue or should I look for other solutions?</p>\n"}, {"tags": ["javascript", "typescript", "underscore.js", "lodash"], "comments": [{"owner": {"reputation": 31092, "user_id": 1715121, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nEEr.jpg?s=128&g=1", "display_name": "Ele", "link": "https://stackoverflow.com/users/1715121/ele"}, "edited": false, "score": 1, "creation_date": 1562763490, "post_id": 56971179, "comment_id": 100478944, "body": "<code>let result = objList.filter(({id}) =&gt; keyList.includes(id))</code>"}, {"owner": {"reputation": 162935, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 2, "creation_date": 1562763597, "post_id": 56971179, "comment_id": 100478998, "body": "Question displays no effort to solve the problem. Always show us what you have tried and what you have researched"}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 6169436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aci3r.png?s=128&g=1", "display_name": "Micha\u0142 Tkaczyk", "link": "https://stackoverflow.com/users/6169436/micha%c5%82-tkaczyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1562763486, "creation_date": 1562763486, "answer_id": 56971246, "question_id": 56971179, "link": "https://stackoverflow.com/questions/56971179/find-array-of-objects-from-keys-array/56971246#56971246", "title": "Find array of objects from keys array", "body": "<p>You can use filter:</p>\n\n<pre><code>objList = objList.filter(element =&gt; keyList.indexOf(element.id) &gt; -1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": false, "score": 1, "last_activity_date": 1562763919, "creation_date": 1562763919, "answer_id": 56971362, "question_id": 56971179, "link": "https://stackoverflow.com/questions/56971179/find-array-of-objects-from-keys-array/56971362#56971362", "title": "Find array of objects from keys array", "body": "<p>You did not get the desired result as you did not get <code>id</code> field from your array.\nSo try to use <code>includes</code> method and get <code>id</code> property:</p>\n\n<pre><code>const filteredArray = objList.filter(o =&gt; keyList.includes(o.id));\nconsole.log(filteredArray);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143310, "user_id": 5157454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPadFFLbBGA/AAAAAAAAAAI/AAAAAAAADB8/FkNCMP_vkAc/photo.jpg?sz=128", "display_name": "Ori Drori", "link": "https://stackoverflow.com/users/5157454/ori-drori"}, "is_accepted": false, "score": 1, "last_activity_date": 1562764503, "creation_date": 1562764503, "answer_id": 56971557, "question_id": 56971179, "link": "https://stackoverflow.com/questions/56971179/find-array-of-objects-from-keys-array/56971557#56971557", "title": "Find array of objects from keys array", "body": "<p>Use <code>_.differenceWith()</code> to compare the <code>id</code> with the <code>key</code>, and remove items that exist in both arrays:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const objList = [{ id: 10 }, { id: 12 }, { id: 13 }];\r\nconst keyList = [10, 13];\r\n\r\nconst result = _.differenceWith(objList, keyList, ({ id }, key) =&gt; id === key);\r\n\r\nconsole.log(result);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.13/lodash.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 225, "user_id": 2959821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f8fAu.jpg?s=128&g=1", "display_name": "Prakash M.", "link": "https://stackoverflow.com/users/2959821/prakash-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 56971246, "answer_count": 3, "score": -3, "last_activity_date": 1562764503, "creation_date": 1562763295, "last_edit_date": 1562763820, "question_id": 56971179, "link": "https://stackoverflow.com/questions/56971179/find-array-of-objects-from-keys-array", "title": "Find array of objects from keys array", "body": "<p>I have an array of object</p>\n\n<pre><code>let objList = [\n {\n  id:10,\n  ...\n },\n\n {\n  id: 12,\n  ...\n },\n\n {\n  id: 13,\n  ...\n },\n\n ...\n];\n</code></pre>\n\n<p>and I wanted to filter out all the objects whose IDs are in another array</p>\n\n<pre><code>let keyList = [10, 13];\n\nExpected output:\n\n[\n {\n  id: 10,\n  ...\n  },\n\n {\n  id: 13,\n  ...\n }\n]\n</code></pre>\n\n<p><strong>Note</strong>: </p>\n\n<blockquote>\n  <p>The req.  is in an Angular 7 application and I use Lodash library as well.</p>\n</blockquote>\n\n<p>I tried:</p>\n\n<pre><code>objList.filter(eachObj =&gt; keysList.forEach(\n          eachID =&gt; {\n            eachID == eachObj['id']\n          }\n        ))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>find(ObjList, eachObj =&gt; {\n\n          return eachObj['id'] === keysList.map(eachID =&gt; {\n            return eachID;\n          })\n        })\n</code></pre>\n"}, {"tags": ["typescript", "visual-studio-code"], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 3690683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abc4e68c4cc8db5eeaa742c521e0e102?s=128&d=identicon&r=PG&f=1", "display_name": "Ellix4u", "link": "https://stackoverflow.com/users/3690683/ellix4u"}, "is_accepted": false, "score": 1, "last_activity_date": 1567071203, "creation_date": 1567071203, "answer_id": 57707212, "question_id": 56971139, "link": "https://stackoverflow.com/questions/56971139/intellisense-stuck-on-loading-with-typescript/57707212#57707212", "title": "Intellisense stuck on loading with typescript", "body": "<p>Try uninstalling \"debugger-for-chrome\" extension if installed.</p>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 9206470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aae3ea44329ed4718d713f773adaa01?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian Coulon", "link": "https://stackoverflow.com/users/9206470/dorian-coulon"}, "is_accepted": false, "score": 2, "last_activity_date": 1567177180, "creation_date": 1567177180, "answer_id": 57729140, "question_id": 56971139, "link": "https://stackoverflow.com/questions/56971139/intellisense-stuck-on-loading-with-typescript/57729140#57729140", "title": "Intellisense stuck on loading with typescript", "body": "<p>I fixed it by uninstalling visual studio code, and installing webstorm.</p>\n"}], "owner": {"reputation": 188, "user_id": 9206470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aae3ea44329ed4718d713f773adaa01?s=128&d=identicon&r=PG&f=1", "display_name": "Dorian Coulon", "link": "https://stackoverflow.com/users/9206470/dorian-coulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1567177180, "creation_date": 1562763181, "question_id": 56971139, "link": "https://stackoverflow.com/questions/56971139/intellisense-stuck-on-loading-with-typescript", "title": "Intellisense stuck on loading with typescript", "body": "<p>Got an issue with intellisense of visual studio code while i'm using typeScript.\nWhen i type 'myobject.', i don't have autocomplete. And when i force it with ctrl + space i got a loading...\nIf i wait like 5 minutes on the code, i finaly manage to have the autocomplete, but i have to wait like 5 min everytime i want to use the intelisense.</p>\n\n<p>I've tried to use npm install -g typescript.</p>\n\n<p>I've also to check if \"TypeScript and JavaScript Language Features\" was enable. </p>\n\n<p>Here is my tsconfig.json</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"noImplicitAny\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"resolveJsonModule\": true,\n    \"baseUrl\": \"./\",\n    \"outDir\": \"./dist/out-tsc\",\n    \"sourceMap\": true,\n    \"declaration\": false,\n    \"module\": \"es2015\",\n    \"moduleResolution\": \"node\",\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"importHelpers\": true,\n    \"target\": \"es5\",\n    \"typeRoots\": [\n      \"node_modules/@types\"\n    ],\n    \"lib\": [\n      \"es2018\",\n      \"dom\"\n    ],\n    \"paths\": {\n      \"@angular/*\": [\"node_modules/@angular/*\"]\n    }\n  },\n  \"typeRoots\": [\n    \"node_modules/@types\"\n  ],\n  \"exclude\": [\n    \"node_modules\",\n    \"out\",\n    \"src/**/*.spec.ts\",\n    \"src/test.ts\",\n    \"../node_modules\"\n  ],\n  \"include\": [\n    \"src/**/*.ts\",\n      \"plugins/cordova-plugin-file/types/index.d.ts\"\n  ],\n  \"compileOnSave\": false,\n  \"atom\": {\n    \"rewriteTsconfig\": false\n  }\n}\n\n</code></pre>\n\n<p>Can you please help me to make intellisense work properly ?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "edited": false, "score": 0, "creation_date": 1562843852, "post_id": 56971899, "comment_id": 100510435, "body": "Firstly, thanks for your comment. Surely I&#39;m wrong but, if class Hmm extends Entity, shouldn&#39;t Hmm inherit the &#39;id&#39; property?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "edited": false, "score": 0, "creation_date": 1562845006, "post_id": 56971899, "comment_id": 100511082, "body": "Yes, it does; the problem with <code>Hmm</code> isn&#39;t the <code>id</code> property.  It has an additional <code>hmm</code> property that <code>Entity</code> isn&#39;t known to have. And since the value <code>{id: 1}</code> is missing the <code>hmm</code> property, it is not a valid <code>Hmm</code>. <code>T</code> is possibly <i>narrower</i> than <code>Entity</code> (that&#39;s what <code>T extends Entity</code> means) so while you can safely assign a <code>T</code> value to an <code>Entity</code> variable, you cannot safely assign an <code>Entity</code> value to a <code>T</code> variable. <code>Hmm</code> is just one possible case which shows how this can fail. Another is <code>interface IdIsTwo {id: 2}</code> in which the <code>id</code> property must be <code>2</code>, and <code>{id: 1}</code> doesn&#39;t fit."}, {"owner": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "edited": false, "score": 0, "creation_date": 1562847450, "post_id": 56971899, "comment_id": 100512561, "body": "Right, I got it. Maybe it&#39;ll be more easy if I try to explain what I&#39;m trying to do: I want a generic service, wich will always return an array of object wich always have an &#39;id&#39; property."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "edited": false, "score": 0, "creation_date": 1562848103, "post_id": 56971899, "comment_id": 100512987, "body": "When you say you want it to be &quot;generic&quot;, I&#39;m not sure what you mean.  But if all you know about the output is that it will be an <code>{id: number}</code> and you are assigning a concrete value like <code>{id: 1}</code> to it, then you need to return/assign-to the concrete type <code>Entity</code> and not the generic type <code>T</code>."}, {"owner": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "edited": false, "score": 0, "creation_date": 1562849465, "post_id": 56971899, "comment_id": 100513840, "body": "I have two entities Customers and Companies. I want to use the same service to get a list of both (In the future could be another entity). Both entites only have in common the &#39;id&#39; property so, if in the future I wanted to create another method that could filter by id I had the job done thank to extends Entity class. Maybe my mistake is trying to return {id: 1} specifically for testing"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "edited": false, "score": 0, "creation_date": 1562851234, "post_id": 56971899, "comment_id": 100515054, "body": "Yes, that&#39;s why the compiler is unhappy.  If you just want to do it for testing you can use a <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertion</a> to claim that <code>{id: 1}</code> is a <code>T</code> like <code>{id: 1} as T</code> (or perhaps <code>{id: 1} as any as T</code> depending on how resistant the compiler is to the first assertion)... of course you&#39;d want to remember to go back and fix it once you actually have objects of type <code>T</code>"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1562765655, "creation_date": 1562765655, "answer_id": 56971899, "question_id": 56971126, "link": "https://stackoverflow.com/questions/56971126/array-of-generic-type-not-showing-property/56971899#56971899", "title": "Array of Generic Type not showing property", "body": "<p>You don't know that <code>{id: 1}</code> is a valid value of type <code>T</code>.  The constraint <code>T extends Entity</code> means <code>T</code> can be any subtype of <code>Entity</code> chosen by the code that calls the constructor of <code>SearchServiceBase</code>.  Inside the implementation of <code>GetAll()</code> you don't know exactly what <code>T</code> will be.  </p>\n\n<p>For example, changing your code to the following <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum reproducible example</a> (I removed dependencies on angular since that's presumably not your issue):</p>\n\n<pre><code>class Entity {\n  id: number = 0;\n}\n\nclass SearchServiceBase&lt;T extends Entity&gt; {\n  public GetAll() {\n    const values: T[] = [\n      { id: 1 } //&lt;-- ERROR Can't assign to type T\n    ];\n  }\n}\n</code></pre>\n\n<p>Consider what happens with the following code:</p>\n\n<pre><code>class Hmm extends Entity {\n  readonly hmm = \"hmmmmmm\";\n}\n\nconst hmmSearch = new SearchServiceBase&lt;Hmm&gt;();\nhmmSearch.GetAll(); // \ud83e\udd14\n</code></pre>\n\n<p>What happens when you run <code>hmmSearch.GetAll()</code>?  Well, it's the equivalent of:</p>\n\n<pre><code>class HmmSearchServiceBase {\n  public GetAll() {\n    const values: Hmm[] = [\n      { id: 1 } //&lt;-- ERROR Property 'hmm' is missing\n    ];\n  }\n}\n</code></pre>\n\n<p>And as you can see, <code>{id: 1}</code> is not a valid <code>Hmm</code>.  So the compiler is right to issue the error in your original code.</p>\n\n<p>Now, I'm not sure how to fix this code to make it work, since I'm not familiar enough with angular or rxjs to figure out what you're trying to do.  It is often not possible to assign a value of a concrete type to a variable of a generic type, since guaranteeing that the concrete type is assignable to every possible instantiation of the generic type is difficult.  If you want a value of generic type <code>T</code>, you probably have to have one passed in to the function or class constructor somewhere.  </p>\n\n<p>Oh well, hope that helps.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/MYGwhgzhAECiB2AXAlogntA3gKGtZAJgFzTwCuAtgEYCmATtALzQAMA3NgL7baiQwBlGmDrAAFkLoA3ZMBoAhSDQA8AFWg0AHohrwCMBCnQA+LLmgAHMlRCzoAcRqIAgiBAAKAJRm8eYAHt4CERoKTAQMhoIElUAbQBdJmhY818sfGJoAEZoTmgAenzlAFpiuAAlcoB5cugAYTB4AHIQ-mQAc3hoRH9utAsaaFVU6HiOPG5uXnAoaAAJCgoNbV19OCRUDBw8OmECQJAMMUWkgCJjxcvTjimAoJCLoRFxJPgaAHdoJ9EJehk5RQQFQLCjGLwcR7CH4AOkcLjc4IK+WggD4NwAouzxChoAI5kZBhEC6EI9ab8eaLb7iST-BRKHyWay2YAOJyuDzeba+O7BULhSLRckUBJJFJpPCYDIkHJ5QolMqwSo1aAABTo-gGdHQ0CaFya+BgFGQUGQ8HaIzG5km2CAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 387, "user_id": 1587968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/593083c73940a85dc65b20b152152902?s=128&d=identicon&r=PG", "display_name": "Rafael Osuna Dominguez", "link": "https://stackoverflow.com/users/1587968/rafael-osuna-dominguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 56971899, "answer_count": 1, "score": 0, "last_activity_date": 1562765655, "creation_date": 1562763150, "question_id": 56971126, "link": "https://stackoverflow.com/questions/56971126/array-of-generic-type-not-showing-property", "title": "Array of Generic Type not showing property", "body": "<p>I'm missing something. This is too simple to be giving me problems.</p>\n\n<p><strong>Entity.ts</strong></p>\n\n<pre><code>    export class Entity {\n    id: number;\n}\n</code></pre>\n\n<p><strong>search-bar.ts</strong></p>\n\n<pre><code>import { Entity } from './../resources/entity';\nimport { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\n@Injectable()\nexport abstract class SearchServiceBase&lt;T extends Entity&gt; {\n    public GetAll(): Observable&lt;T[]&gt; {\n        const values: T[] = [\n            { id : 1 } &lt;-- ERROR Can't assign to type T\n        ];\n\n        return of(values);\n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 1338, "user_id": 8120827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0646c9ea234df80d26c35e88b97d730?s=128&d=identicon&r=PG&f=1", "display_name": "Ga&#235;l S", "link": "https://stackoverflow.com/users/8120827/ga%c3%abl-s"}, "edited": false, "score": 0, "creation_date": 1562763606, "post_id": 56971123, "comment_id": 100479007, "body": "You might have a scope issue since you&#39;re checking <code>user</code> in <code>renderSpan</code> while it is not an explicit argument. Depending on where your function is declared, <code>user</code> might be indeed <code>undefined</code> inside <code>renderSpan</code>. Hence giving you empty <code>div</code>s"}, {"owner": {"reputation": 1690, "user_id": 10104341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7326ce0b47203cf7bf776da128e5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Efst", "link": "https://stackoverflow.com/users/10104341/dimitris-efst"}, "reply_to_user": {"reputation": 1338, "user_id": 8120827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0646c9ea234df80d26c35e88b97d730?s=128&d=identicon&r=PG&f=1", "display_name": "Ga&#235;l S", "link": "https://stackoverflow.com/users/8120827/ga%c3%abl-s"}, "edited": false, "score": 0, "creation_date": 1562763832, "post_id": 56971123, "comment_id": 100479117, "body": "But I have security checks. If <code>user</code> and if <code>user.auth</code>. How can it be undefined.."}, {"owner": {"reputation": 1690, "user_id": 10104341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7326ce0b47203cf7bf776da128e5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Efst", "link": "https://stackoverflow.com/users/10104341/dimitris-efst"}, "reply_to_user": {"reputation": 1338, "user_id": 8120827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0646c9ea234df80d26c35e88b97d730?s=128&d=identicon&r=PG&f=1", "display_name": "Ga&#235;l S", "link": "https://stackoverflow.com/users/8120827/ga%c3%abl-s"}, "edited": false, "score": 0, "creation_date": 1562763928, "post_id": 56971123, "comment_id": 100479168, "body": "Stupid me. Sorry for the bother guys. I was rendering the boolean values and expecting to render strings. Thanks for your time."}], "answers": [{"comments": [{"owner": {"reputation": 1690, "user_id": 10104341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7326ce0b47203cf7bf776da128e5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Efst", "link": "https://stackoverflow.com/users/10104341/dimitris-efst"}, "edited": false, "score": 0, "creation_date": 1562763783, "post_id": 56971268, "comment_id": 100479097, "body": "It is the same with it as well, my mistake it, leaving it there. I <code>console.log(user.auth[securityKey])</code>, and I get the boolean values, of those keys. I thought I should have gotten the keys themselves. I mean, I want the values as well, but not in the span."}], "tags": [], "owner": {"reputation": 15766, "user_id": 10106580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCnek.jpg?s=128&g=1", "display_name": "Dupocas", "link": "https://stackoverflow.com/users/10106580/dupocas"}, "is_accepted": false, "score": 3, "last_activity_date": 1562763962, "last_edit_date": 1562763962, "creation_date": 1562763550, "answer_id": 56971268, "question_id": 56971123, "link": "https://stackoverflow.com/questions/56971123/reactjs-map-through-nested-objects/56971268#56971268", "title": "ReactJS | Map through nested objects", "body": "<pre><code> {user.auth.[securityKey]}&lt;/span&gt;}\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code> {user.auth[securityKey]}&lt;/span&gt;}\n</code></pre>\n\n<p>Besides that everything works fine. The problem is that you are just rendering a <code>span</code> tag with a boolean inside, so the content will be empty... Try something like this:</p>\n\n<pre><code>&lt;span&gt; {user.auth[securityKey] ? 'true' :'false'}&lt;/span&gt;\n</code></pre>\n"}], "owner": {"reputation": 1690, "user_id": 10104341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7326ce0b47203cf7bf776da128e5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Efst", "link": "https://stackoverflow.com/users/10104341/dimitris-efst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562763962, "creation_date": 1562763133, "last_edit_date": 1562763793, "question_id": 56971123, "link": "https://stackoverflow.com/questions/56971123/reactjs-map-through-nested-objects", "title": "ReactJS | Map through nested objects", "body": "<p>I have the following object coming from the BE. I load it through redux, onto a property inside my Component called <code>user</code>. This is the schema:</p>\n\n<pre><code>{\n    user: 'root',\n    perm: [\n      \"admin\",\n      \"write\",\n      \"read\",\n      \"nodata\"\n    ],\n    \"auth\": {\n      \"mode1\": true,\n      \"mode2\": true,\n      \"mode3\": false\n    }\n}\n</code></pre>\n\n<p>What I want to do, is actually, map through the <code>auth</code> field, and for every mode, print in a <code>span</code> the name of each mode(THE KEY OF THE OBJECT).</p>\n\n<p>So, I created a little renderSpan method to create the necessary boilerplate to map through:</p>\n\n<pre><code>  renderSpan = (authKey: string): JSX.Element =&gt; {\n    const { user } = this.props;\n    return (\n      &lt;div key={authKey}&gt;\n        {user &amp;&amp; user.auth &amp;&amp; &lt;span&gt; {user.auth[securityKey]}&lt;/span&gt;}\n      &lt;/div&gt;\n    );\n  };\n</code></pre>\n\n<p>Then I mapped through it on my main render block:</p>\n\n<pre><code>  renderAuthModes = () =&gt; {\n    const { user } = this.props;\n    return (\n      &lt;Fragment&gt;\n        {user &amp;&amp; user.auth &amp;&amp; (\n          &lt;div className=\"container-fluid\"&gt;\n            {JSON.stringify(user.auth, null, 2)} // This prints the 3 modes\n              &lt;div&gt;\n                {Object.keys(user.auth).map(authKey =&gt; this.renderSpan(authKey))}\n              &lt;/div&gt;\n          &lt;/div&gt;\n        )}\n      &lt;/Fragment&gt;\n    );\n  };\n</code></pre>\n\n<p>What I get in return, is 3 div with empty spans. The divs are rendered on to the DOM, but nothing is printed on the display. <strong>What am I doing wrong?</strong></p>\n\n<p>The Application is in React-Redux and Typescript.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562764895, "post_id": 56971097, "comment_id": 100479792, "body": "I was about to say you didn&#39;t show us the code that actually moves properties around, but then I had a horrible thought: maybe you think <code>as Store&lt;typeof options&gt;</code> somehow does that for you? But <code>as</code> is a purely compile-time <a href=\"http://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertion</a>, not any sort of <a href=\"http://github.com/Microsoft/TypeScript/wiki/FAQ#why-doesnt-this-incorrect-cast-throw-a-runtime-error\" rel=\"nofollow noreferrer\">runtime casting</a>. The type system, including any type assertions, is <a href=\"http://github.com/Microsoft/TypeScript/wiki/FAQ#what-is-type-erasure\" rel=\"nofollow noreferrer\">erased</a> by runtime."}, {"owner": {"reputation": 13, "user_id": 11022833, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VYrGJSzwjao/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC6BIVfk8RNUy0caloVYNqhU83lQ/mo/photo.jpg?sz=128", "display_name": "amaya-loves-tea", "link": "https://stackoverflow.com/users/11022833/amaya-loves-tea"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1562766280, "post_id": 56971097, "comment_id": 100480479, "body": "The createStore function actually does quite a lot of work so I excluded it for the sake of simplicity. I am not having trouble getting the expected output but I am having trouble getting typescript to recognize that the object has changed. I will update the function to provide more context around why this is happening."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562766398, "post_id": 56971097, "comment_id": 100480557, "body": "Oh, okay... so the <code>console.log()</code> was showing the right output but you are not happy about the type coming out of the function."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562766511, "post_id": 56971097, "comment_id": 100480629, "body": "You don&#39;t have to edit anything; I misunderstood the question."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11022833, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VYrGJSzwjao/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC6BIVfk8RNUy0caloVYNqhU83lQ/mo/photo.jpg?sz=128", "display_name": "amaya-loves-tea", "link": "https://stackoverflow.com/users/11022833/amaya-loves-tea"}, "edited": false, "score": 0, "creation_date": 1562767491, "post_id": 56972350, "comment_id": 100481229, "body": "Thanks this is exactly what I was after."}, {"owner": {"reputation": 13, "user_id": 11022833, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VYrGJSzwjao/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC6BIVfk8RNUy0caloVYNqhU83lQ/mo/photo.jpg?sz=128", "display_name": "amaya-loves-tea", "link": "https://stackoverflow.com/users/11022833/amaya-loves-tea"}, "edited": false, "score": 0, "creation_date": 1562770428, "post_id": 56972350, "comment_id": 100483026, "body": "+1 for the concise explanation. I have moved the type conversion into the createStore method since I don&#39;t want users to write casts each time."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 13, "user_id": 11022833, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VYrGJSzwjao/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC6BIVfk8RNUy0caloVYNqhU83lQ/mo/photo.jpg?sz=128", "display_name": "amaya-loves-tea", "link": "https://stackoverflow.com/users/11022833/amaya-loves-tea"}, "edited": false, "score": 0, "creation_date": 1562770998, "post_id": 56972350, "comment_id": 100483344, "body": "Yeah, the signature for <code>createStore</code> should be something like <code>createStore&lt;T&gt;(options: T): Store&lt;T&gt;</code> although you will likely have to do some type assertions inside your implementation"}, {"owner": {"reputation": 1996, "user_id": 8634147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-36eQ4qJ6F9o/AAAAAAAAAAI/AAAAAAAADZg/coKQfu-5HzM/photo.jpg?sz=128", "display_name": "Romain Deneau", "link": "https://stackoverflow.com/users/8634147/romain-deneau"}, "edited": false, "score": 0, "creation_date": 1562916778, "post_id": 56972350, "comment_id": 100537455, "body": "Nice tips \ud83d\udc4d. What about a specific type <code>type Prettify&lt;T&gt; = T extends infer Tbis ? { [K in keyof Tbis]: Tbis[K] } : never;</code>, making <code>type Store&lt;T&gt;</code> code easier to read: ` T extends { modules: infer A } ? Prettify&lt;StoreMap&lt;Omit&lt;T, &quot;modules&quot;&gt; &amp; A&gt;&gt; : T` ?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1562956348, "post_id": 56972350, "comment_id": 100557166, "body": "Yes, you can break <code>Prettify&lt;&gt;</code> out into its own type alias, with the possible caveat that sometimes the compiler might display the name <code>Prettify&lt;&gt;</code> when you inspect the type."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1562767603, "last_edit_date": 1562767603, "creation_date": 1562767131, "answer_id": 56972350, "question_id": 56971097, "link": "https://stackoverflow.com/questions/56971097/get-correct-type-information-after-changing-the-position-of-properties-on-an-obj/56972350#56972350", "title": "Get correct type information after changing the position of properties on an object", "body": "<p>Okay, one problem with your original <code>Store&lt;T&gt;</code> is that a mapped type like <code>{[K in keyof T]: XXX}</code> is going to have the same keys as <code>T</code>.  So if <code>T</code> has a <code>modules</code> property, then so does <code>Store&lt;T&gt;</code>.  Another problem is that it isn't recursive... <code>ObjectInfer&lt;T&gt;</code> extracts the <code>modules</code> property of <code>T</code> if it has one, but it doesn't go down into those properties to do the same.  </p>\n\n<p>The actual implementation is going to have to be recursive and actually omit the <code>modules</code> key from what it outputs.  Here's a possible way to do it:</p>\n\n<pre><code>type Store&lt;T&gt; = T extends { modules: infer A }\n  ? (StoreMap&lt;Omit&lt;T, \"modules\"&gt; &amp; A&gt; extends infer S\n      ? { [K in keyof S]: S[K] }\n      : never)\n  : T;\ntype StoreMap&lt;T&gt; = { [K in keyof T]: Store&lt;T[K]&gt; };\n</code></pre>\n\n<p>Before I explain this, let me explain a type which is equivalent, but produces much uglier output types:</p>\n\n<pre><code>type StoreUgly&lt;T&gt; = T extends { modules: infer A }\n  ? StoreUglyMap&lt;Omit&lt;T, \"modules\"&gt; &amp; A&gt;\n  : T;\ntype StoreUglyMap&lt;T&gt; = { [K in keyof T]: StoreUgly&lt;T[K]&gt; };\n</code></pre>\n\n<p>Here you see that what <code>StoreUgly</code> does is check if <code>T</code> has a <code>modules</code> property.  If not, it returns <code>T</code>.  Otherwise, it evalues <code>Omit&lt;T, \"modules\"&gt; &amp; A</code> where <code>A</code> is the <code>modules</code> property.  <code>Omit&lt;T, K&gt;</code> is <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.5.3/lib/lib.es5.d.ts#L1466-L1469\" rel=\"nofollow noreferrer\">defined</a> in the standard library as a mapped type which removes <code>K</code> from the known keys of <code>T</code>.  So <code>Omit&lt;{modules: 1, nodules: 2}, \"modules\"&gt;</code> is <code>{nodules: 2}</code>.  The intersection of <code>Omit&lt;T, \"modules\"&gt; &amp; A</code> is the basic \"pull the <code>modules</code> property up by one level\" thing you were trying to do.</p>\n\n<p>But of course we need to do it recursively, so we do <code>StoreUglyMap&lt;&gt;</code> on it, which just maps <code>StoreUgly</code> to each property.  </p>\n\n<p>The wrinkle is that the output is absolutely terrible... if you do <code>StoreUgly&lt;typeof options&gt;</code> you get a big mess.  Hence the <code>Store</code> version.  If you have an ugly object type <code>O</code> you can sometimes clean it up by writing <code>O extends infer X ? {[K in keyof X]: X[K]} : never</code>.  This just maps all the properties of <code>O</code> to themselves, but has the effect of more eagerly evaluating the properties instead of leaving them as bundles of intersections.</p>\n\n<p>Let's make sure the output type is what you want:</p>\n\n<pre><code>type OutputType = Store&lt;typeof options&gt;;\n/* \ntype OutputType = {\n    state: {};\n    buildings: {\n        state: {};\n        school: {\n            state: {};\n        };\n        cafe: {\n            state: {};\n        };\n    };\n} \n*/\n</code></pre>\n\n<p>Looks good to me!  Hope that helps.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play//#code/PTAEHMEsDcFMDsBQBjA9vAzgF1KgDlpOhqALygDeioo2AhlrAFyUC+ANNaALaoAmAVwA2sDCyo0aAIwGQhfSPHBjKXSbSwNmbTupq9BIlRL00MyABapUQ8WtMat41vfUdXk5HQBm2kw8dGZw8aF1MwyQiXVgBuREQsAE88WFAAZSxUACdYAB4AFQA+MlB80FgAD0Z4PhIKHn5hURZFXyzQAEFQCIB+UAAKDOzYAFk6PFyAeW5ILAL2UAAiAyaMReKAMk7iyura0FbYdrSPPvqAbQBpA-hQAGtYRNRvdIBdFjSr1+6PFnhYOBZACUXBY+TiSRS6UyOTGEyKJQu10U90ez1K72hwwKX2KsXikNSkwEWDwJPyyVS5CGOVyhPR+EIxEKcWAACpQAlKaBiaTydzyP5An58eoZHIFEpjCFhc44gFzFYbHYAup6EE2PKHKKHF5fCrVWZNBqKDrwlrQnFWJy2cACdyabAAKrgISJArFchlXYIfb1FZGFrwNqdH40PqOl1uuFTGZzfILZaNIzrUBbDqFUGlCEOmHO12JGMIwWgK43VFPF75TGRgs4y6vPE5qG8slYCkpKOJEq1t10ykMghETAsxDszmEnkktsd-NuxH2dUii2gcXyRTKD55rsxgAKkGQd1yQrVxuXMoDzVUhrMlmstmvN9PTk1MrcK4Cer8b4cS7lP8tGUzW6RMl1TLYT0kRV7wNQ0-1fAJgPUL9YNVeDTQ-SIV1YUcXFtRAgA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 13, "user_id": 11022833, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VYrGJSzwjao/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC6BIVfk8RNUy0caloVYNqhU83lQ/mo/photo.jpg?sz=128", "display_name": "amaya-loves-tea", "link": "https://stackoverflow.com/users/11022833/amaya-loves-tea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 56972350, "answer_count": 1, "score": 1, "last_activity_date": 1562767603, "creation_date": 1562763044, "question_id": 56971097, "link": "https://stackoverflow.com/questions/56971097/get-correct-type-information-after-changing-the-position-of-properties-on-an-obj", "title": "Get correct type information after changing the position of properties on an object", "body": "<p>I have a nested options object that gets modified by some code and shifts certain properties up one level. </p>\n\n<p>I am struggling to get proper typescript support on this scenario.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function createStore(options) {\n  // do stuff\n}\n\n// given\nconst options = {\n  state: {},\n  modules: {\n    buildings: {\n      state: {},\n      modules: {\n        school: {\n          state: {}\n        },\n        cafe: {\n          state: {}\n        }\n      }\n    }\n  }\n};\n\n// type definitions that aren't working\ntype ObjectInfer&lt;T&gt; = T extends { modules: infer A } ? A : T;\ntype Store&lt;T&gt; = { [P in keyof T]: ObjectInfer&lt;T[P]&gt; };\n\n// process the options object recursively and move the module definitions up one level\nconst store = (createStore(options) as unknown) as Store&lt;typeof options&gt;;\n\nconsole.log(store);\n\n// output:\n/* \n{\n  state: {},\n  buildings: {\n    state: {},\n    school: {\n      state: {}\n    },\n    cafe: {\n      state: {}\n    }\n  }\n}\n*/\n</code></pre>\n\n<p>I expected the store to be correctly typed as seen above however the type cast is not working as intended and still has the same structure as the options object.</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 2384, "user_id": 1934484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJ2rs.jpg?s=128&g=1", "display_name": "Tomas Vancoillie", "link": "https://stackoverflow.com/users/1934484/tomas-vancoillie"}, "edited": false, "score": 1, "creation_date": 1562762828, "post_id": 56971001, "comment_id": 100478567, "body": "Can we see the code please?"}, {"owner": {"reputation": 881, "user_id": 9628950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "skolldev", "link": "https://stackoverflow.com/users/9628950/skolldev"}, "edited": false, "score": 0, "creation_date": 1562762847, "post_id": 56971001, "comment_id": 100478573, "body": "So you&#39;re saying that you save your condition as a string?"}, {"owner": {"reputation": 184, "user_id": 7390508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af18f3e03d13a5f61393e3306af13fb?s=128&d=identicon&r=PG&f=1", "display_name": "ilyas shabi", "link": "https://stackoverflow.com/users/7390508/ilyas-shabi"}, "edited": false, "score": 0, "creation_date": 1562764111, "post_id": 56971001, "comment_id": 100479295, "body": "You can use <b>!!Condition</b>, this means your code ll looks like this =&gt; !!((r.id == null) || (r.name == &#39;&#39;))"}, {"owner": {"reputation": 15073, "user_id": 2279488, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/c41VI.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/2279488/reza"}, "edited": false, "score": 0, "creation_date": 1562768548, "post_id": 56971001, "comment_id": 100481893, "body": "the error is in line 23"}, {"owner": {"reputation": 51, "user_id": 10964215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CiyvXrMtIAQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcabNrobCFdSpgJTUPCNXuoB-8wWyg/mo/photo.jpg?sz=128", "display_name": "hido", "link": "https://stackoverflow.com/users/10964215/hido"}, "reply_to_user": {"reputation": 2384, "user_id": 1934484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJ2rs.jpg?s=128&g=1", "display_name": "Tomas Vancoillie", "link": "https://stackoverflow.com/users/1934484/tomas-vancoillie"}, "edited": false, "score": 0, "creation_date": 1562784411, "post_id": 56971001, "comment_id": 100489953, "body": "@TomasVancoillie i added the code."}, {"owner": {"reputation": 1285, "user_id": 1454656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561bed0472fea7af0e48404f8a548ac0?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Nojek", "link": "https://stackoverflow.com/users/1454656/%c5%81ukasz-nojek"}, "edited": false, "score": 0, "creation_date": 1562789550, "post_id": 56971001, "comment_id": 100491994, "body": "I&#39;m not sure it will work - the condition is a string. <code>!!condition</code> will convert string to boolean (non-empty string will be <code>true</code>). I&#39;m not sure if you can use a concatenated condition in data binding."}], "owner": {"reputation": 51, "user_id": 10964215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CiyvXrMtIAQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcabNrobCFdSpgJTUPCNXuoB-8wWyg/mo/photo.jpg?sz=128", "display_name": "hido", "link": "https://stackoverflow.com/users/10964215/hido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562784360, "creation_date": 1562762705, "last_edit_date": 1562784360, "question_id": 56971001, "link": "https://stackoverflow.com/questions/56971001/making-dynamic-condition-in-typescript", "title": "making dynamic condition in typescript", "body": "<p>I have a dynamic array that represents columns in a table, and I have an array of rows in the table. I get the arrays as input in my angular 4 components and I don't know anything in the columns before I get them (should work on multiple types of variables).</p>\n\n<p>Each column has a variable that says if it is mandatory or not and according to this I build a condition string that I want to run before I insert a new row to the array of rows or change an existing one.</p>\n\n<p>I'm creating the condition in the ngInit, and after the creation it looks something like this:<br>\n<code>\"(r.id == null) || (r.name == '')\"</code> and so on (there could be &amp;&amp; too)</p>\n\n<p>I'm trying to bind the condition to the disabled attribute of a button, but I can't seem to convert it to a real.</p>\n\n<p>How can I convert it to a condition so I could execute it and return true/ false accordingly?</p>\n\n<p>I've already tried doing <code>[disabled]=\"[conditionVar]\"</code>, and also tried using. \n<code>${condition}</code>, \nbut those didn't work</p>\n\n<p>my code looks something like this:\nmyComponent.ts:</p>\n\n<pre><code>export class Column {\ntitle: string;\nfieldName:string;\nmandatory: boolean;\n}\n\n   @Component({\n   selector: 'myComponent',\n   templateUrl: './myComponent.component.html', \n   styleUrls: ['./myComponent.component.css']\n})\n\nexport class MyComponentimplements OnInit {\n   @Input() columns:Column[];\n   @Input() rows;\n\n   conditionString = \"\";\n\n   constructor() { }\n   ngOnInit() {\n     for (let c of columns.filter(d=&gt;d.mandatory)) {\n       this.conditionString += \"(r.\" + c['fieldName'] + \" == null) || \"; // 'r' is the name of the variable that i want to run the condition on\n     }\n     this.conditionString = this.conditionString.substr(0, this.conditionString.length - 4); // to remove the last ||\n   }\n}\n</code></pre>\n\n<p>myComponent.html:</p>\n\n<pre><code>&lt;table&gt;\n...\n  &lt;tbody&gt;\n    &lt;tr *ngFor=\"let r of rows\"&gt;\n      &lt;td *ngFor=\"let c of columns\"&gt;\n        &lt;input [(ngModel)]=\"r.[c.fieldName]\"&gt;\n      &lt;/td&gt;\n      &lt;td *ngFor=\"let c of columns\"&gt;\n        &lt;button [disabled]=\"here I want to bind my condition\"&gt;save this row&lt;/button&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>(the user should edit the rows and if he want he can save the changes)\nevery thing works but the binding of the condition</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ace-editor"], "comments": [{"owner": {"reputation": 806, "user_id": 3560140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/00b491695bc46987c5b5d4a0b86bb3ea?s=128&d=identicon&r=PG&f=1", "display_name": "NeverGiveUp161", "link": "https://stackoverflow.com/users/3560140/nevergiveup161"}, "edited": false, "score": 0, "creation_date": 1582544762, "post_id": 56970253, "comment_id": 106801776, "body": "how did you get code editor instance? is it in typescript? if yes can you please comment how?"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 8048877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56e0591161516569ca70f95b1ea2859?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlors", "link": "https://stackoverflow.com/users/8048877/ironlors"}, "edited": false, "score": 0, "creation_date": 1562760309, "post_id": 56970294, "comment_id": 100477179, "body": "So in the original version it would look like a method of <code>getValue()</code> inside the new function? Since <code>this</code> refers to the new function. An an arrow function does not create it&#39;s own scope. Wow thanks. Can&#39;t accept now. But I will as soon as possible."}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 163, "user_id": 8048877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56e0591161516569ca70f95b1ea2859?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlors", "link": "https://stackoverflow.com/users/8048877/ironlors"}, "edited": false, "score": 0, "creation_date": 1562760378, "post_id": 56970294, "comment_id": 100477217, "body": "You&#39;re welcome. If this answer helped you kindly mark it as the correct answer :)"}, {"owner": {"reputation": 163, "user_id": 8048877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56e0591161516569ca70f95b1ea2859?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlors", "link": "https://stackoverflow.com/users/8048877/ironlors"}, "edited": false, "score": 0, "creation_date": 1562760423, "post_id": 56970294, "comment_id": 100477237, "body": "The question is too new. I will as soon as possible."}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 163, "user_id": 8048877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56e0591161516569ca70f95b1ea2859?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlors", "link": "https://stackoverflow.com/users/8048877/ironlors"}, "edited": false, "score": 0, "creation_date": 1562760543, "post_id": 56970294, "comment_id": 100477297, "body": "Thanks. glad I could be of help :)"}], "tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": true, "score": 3, "last_activity_date": 1562760613, "last_edit_date": 1562760613, "creation_date": 1562760116, "answer_id": 56970294, "question_id": 56970253, "link": "https://stackoverflow.com/questions/56970253/ace-editor-cannot-read-property-getvalue-of-undefined/56970294#56970294", "title": "ACE editor &quot;Cannot read property &#39;getValue&#39; of undefined&quot;", "body": "<p>Every new function defines its own <code>this</code> scope. Try using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" rel=\"nofollow noreferrer\">arrow functions</a> instead. Arrow Functions lexically bind their context so <code>this</code> actually refers to the originating context.</p>\n\n<pre><code>this.codeEditor.on(\"change\", (e) =&gt; {\n    const code = this.codeEditor.getValue();\n    console.log(code);\n});\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 8048877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56e0591161516569ca70f95b1ea2859?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlors", "link": "https://stackoverflow.com/users/8048877/ironlors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 56970294, "answer_count": 1, "score": 1, "last_activity_date": 1569675539, "creation_date": 1562759941, "last_edit_date": 1569675539, "question_id": 56970253, "link": "https://stackoverflow.com/questions/56970253/ace-editor-cannot-read-property-getvalue-of-undefined", "title": "ACE editor &quot;Cannot read property &#39;getValue&#39; of undefined&quot;", "body": "<p>I am currently building a markdown editor in Angular. </p>\n\n<ul>\n<li><a href=\"https://ace.c9.io/\" rel=\"nofollow noreferrer\">ACE editor</a> is used as a code editor.  </li>\n<li>the npm package is <a href=\"https://www.npmjs.com/package/ace-builds\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/ace-builds</a></li>\n</ul>\n\n<p>A codesandbox can be found here: <a href=\"https://codesandbox.io/embed/angular-91d27\" rel=\"nofollow noreferrer\">https://codesandbox.io/embed/angular-91d27</a></p>\n\n<hr>\n\n<p>The problem is that I am trying to get the current value in order to further work with it.\nThe concept is that whenever the code will change (<code>onChange()</code>) the content is put into an Angular Service.</p>\n\n<p>For testing purposes I want to print the current content onChange.</p>\n\n<pre><code>this.codeEditor.on(\"change\", function(e) {\n    const code = this.codeEditor.getValue();\n    console.log(code);\n});\n</code></pre>\n\n<p>Now whenever I am typing something I get the following error:</p>\n\n<p><code>ERROR TypeError: Cannot read property 'getValue' of undefined</code></p>\n\n<p>If anybody encountered this before I would be glad for some help.<br>\nAlso I am wondering if this is \"the right way\" to handle this, or if there are better options.</p>\n"}, {"tags": ["typescript", "volatile", "bbc-microbit"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 8, "creation_date": 1562759547, "post_id": 56970140, "comment_id": 100476748, "body": "javascript has no <code>volatile</code> because javascript runtimes are single threaded so there is nothing to interrupt this code"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 2, "creation_date": 1578237344, "post_id": 56970140, "comment_id": 105366538, "body": "@Titian Cernicova-Dragomir: That ought to be an answer."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 1, "creation_date": 1578237924, "post_id": 56970140, "comment_id": 105366708, "body": "@PeterMortensen Wish granted :)"}], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 4, "last_activity_date": 1578237896, "creation_date": 1578237896, "answer_id": 59601318, "question_id": 56970140, "link": "https://stackoverflow.com/questions/56970140/how-do-i-declare-a-typescript-variable-as-volatile/59601318#59601318", "title": "How do I declare a TypeScript variable as volatile?", "body": "<p>Javascript has no <code>volatile</code> because JavaScript run-times are single threaded. This means that there is is nothing to interrupt this code and no other code can change the state while the code runs. </p>\n\n<p>Generally if an event occurs during the execution of a piece of code, that event will be put in a queue and code associated with the event will only be executed once the current code stack is done running.</p>\n\n<p>Even things like <code>WebWorkers</code> which allow running multiple JS threads do not break this assumption. They instead rely on message passing between the two threads without allowing for shared variables. </p>\n"}], "owner": {"reputation": 113, "user_id": 6372846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0a79f7109a6d7b770f7023eba5c3d595?s=128&d=identicon&r=PG&f=1", "display_name": "Trevor Shaw", "link": "https://stackoverflow.com/users/6372846/trevor-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578237896, "creation_date": 1562759457, "last_edit_date": 1578237295, "question_id": 56970140, "link": "https://stackoverflow.com/questions/56970140/how-do-i-declare-a-typescript-variable-as-volatile", "title": "How do I declare a TypeScript variable as volatile?", "body": "<p>I am working with the <a href=\"https://en.wikipedia.org/wiki/Micro_Bit\" rel=\"nofollow noreferrer\">BBC Micro Bit</a> and am creating an extension for Make Code in TypeScript.</p>\n\n<p>I have the following event that gets triggered by a wheel encoder on my robot. Inside the event, I increment a couple of variables. In the Arduino language, I would declare such variables as \"volatile\" indicating that the variable could be changed by an interrupt, thus ensuring that I was working with the most recent value in the variable.</p>\n\n<pre><code>control.onEvent(EventBusSource.MICROBIT_ID_IO_P0, EventBusValue.MICROBIT_PIN_EVT_RISE, function () {\n    _lTicks += 1;\n    _lerrTicks += 1;\n    if (_lTicks % _partialTurn == 0) {\n        _lTicks = 0;\n        _lTurns += .0625;\n    }\n})\n</code></pre>\n\n<p>Does TypeScript have an equivalent \"volatile\" keyword when declaring a variable? If so, how is it implemented?</p>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 1, "creation_date": 1562760267, "post_id": 56970127, "comment_id": 100477157, "body": "typo alert, is it really <code>&#39;__dirname&#39;+&#39;&#47;env&#39;</code> or did you meant <code>__dirname+&#39;&#47;env&#39;</code>?"}, {"owner": {"reputation": 591, "user_id": 8635165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbea5b39c84b0233d3f4b383461ad08f?s=128&d=identicon&r=PG", "display_name": "Ctfrancia", "link": "https://stackoverflow.com/users/8635165/ctfrancia"}, "reply_to_user": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1562760553, "post_id": 56970127, "comment_id": 100477301, "body": "@NinoFiliu yea it&#39;s a typo I want <code>__dirname + &#39;&#47;env&#39;</code> without quotes on dirname but I&#39;ve been changing a lot of stuff around so it might be with quotes. I&#39;ll wait once I start up my server and it complains haha"}], "answers": [{"tags": [], "owner": {"reputation": 634, "user_id": 9440874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MQvz.png?s=128&g=1", "display_name": "tscpp", "link": "https://stackoverflow.com/users/9440874/tscpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1562760369, "creation_date": 1562760369, "answer_id": 56970352, "question_id": 56970127, "link": "https://stackoverflow.com/questions/56970127/value-of-type-express-has-no-properties-in-common-with-type-serveroptions/56970352#56970352", "title": "Value of type &#39;Express&#39; has no properties in common with type &#39;ServerOptions&#39;", "body": "<p>Try using AMD modules, <a href=\"https://www.npmjs.com/package/amd-loader\" rel=\"nofollow noreferrer\">here</a>'s an AMD loader for NodeJS. <code>npm i amd-loader -D</code></p>\n"}], "owner": {"reputation": 591, "user_id": 8635165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbea5b39c84b0233d3f4b383461ad08f?s=128&d=identicon&r=PG", "display_name": "Ctfrancia", "link": "https://stackoverflow.com/users/8635165/ctfrancia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562760369, "creation_date": 1562759421, "question_id": 56970127, "link": "https://stackoverflow.com/questions/56970127/value-of-type-express-has-no-properties-in-common-with-type-serveroptions", "title": "Value of type &#39;Express&#39; has no properties in common with type &#39;ServerOptions&#39;", "body": "<p>I am using typescript in my server and while I am familiar with typescript as I use it a lot I am not too used to it in the back end.\nI am creating a socket I am also trying using es6 imports for because it helps with consistency. I am trying to change this:</p>\n\n<pre><code>require('dotenv').config({path: __dirname + '/.env'});\nconst app = require('express')();\nconst cors = require('cors');\nconst PORT = process.env.CHAT_PORT || 3000;\nconst ENV = process.env.NODE_ENV || 'development';\nconst server = require('http').createServer(app, {origins: 'http://192.168.x.xx/'}); \n</code></pre>\n\n<p>to this: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import dotenv from 'dotenv';\nimport * as express from 'express';\nimport cors from 'cors';\ndotenv.config({path:'__dirname' + '/env'});\nconst app = express();\nimport http from 'http';\nconst server = http.createServer(app, {origins: 'http://192.168.x.xx:8100/'})\n</code></pre>\n\n<p>but with the second one where i have <code>const server = http.create(...)</code>\nI get various errors like:</p>\n\n<blockquote>\n  <p>Value of type 'Express' has no properties in common with type 'ServerOptions'.</p>\n</blockquote>\n\n<p>as well as using types such as <code>const app: Express = express()</code> causes an import of Express from 'net'. \nwhile I love typescript it feel like a complete wrestle in the backend.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 12496, "user_id": 1283776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/abb815001c365007d50d2bdb3226e70a?s=128&d=identicon&r=PG", "display_name": "user1283776", "link": "https://stackoverflow.com/users/1283776/user1283776"}, "reply_to_user": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1562759189, "post_id": 56969950, "comment_id": 100476534, "body": "@NinoFiliu: Np, go ahead"}], "answers": [{"comments": [{"owner": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1562760039, "post_id": 56970194, "comment_id": 100477027, "body": "Exactly. Note that it is still possible to write a <code>foo</code> implementation that can be called as <code>foo()</code> or as <code>foo({bar: &lt;boolean&gt;})</code> using typeguards - <a href=\"http://www.typescriptlang.org/play/#code/C4TwDgpgBAYg9nAggJwOZQLxQN4CMCGyAXFLggDYT4B2AvgNwBQoksCmUAFAGYIqoB+EvCRoAlJgB8UGiCYBjONQDOwKLzjD2WHn3FScjKMagB6U+r2oto9AB8oAV2oATCNwCW1CC6MmP3Fwa-BLYfiYm5pa2NvzhEVCKKmp4hLQcwWhMCZEWAHQF8bSMDIwanKnEUMDIjhC0YkzljYxAA\" rel=\"nofollow noreferrer\">playground link</a>"}], "tags": [], "owner": {"reputation": 5723, "user_id": 3861083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lt392.jpg?s=128&g=1", "display_name": "Fabian Lauer", "link": "https://stackoverflow.com/users/3861083/fabian-lauer"}, "is_accepted": false, "score": 3, "last_activity_date": 1562759674, "creation_date": 1562759674, "answer_id": 56970194, "question_id": 56969950, "link": "https://stackoverflow.com/questions/56969950/optional-typed-immediately-destructured-parameters/56970194#56970194", "title": "Optional typed immediately destructured parameters?", "body": "<p>This is not possible, simply because it does not work in JavaScript either. For example, take this piece of JS:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const foo = ({bar}) =&gt; {\n  ...\n};\n\nfoo({ bar: 123 }); // works\nfoo(); // error\n</code></pre>\n\n<p>Calling <code>foo</code> without an object parameter will result in this exception:</p>\n\n<pre><code>Uncaught TypeError: Cannot destructure property `bar` of 'undefined' or 'null'.\n</code></pre>\n\n<p>This happens because the function implementation above is almost the same as writing:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const foo = (arg1) =&gt; {\n  let bar = arg1.bar;\n};\n\nfoo();\n</code></pre>\n\n<p>The exception would be almost the same here, because <code>arg1.bar</code> attempts to access a property on an object that is <code>undefined</code>.</p>\n\n<p>Long story short, JavaScript does not know \"optional\" parameters at runtime, therefore TypeScript doesn't allow them either.</p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 9, "last_activity_date": 1562759966, "creation_date": 1562759966, "answer_id": 56970256, "question_id": 56969950, "link": "https://stackoverflow.com/questions/56969950/optional-typed-immediately-destructured-parameters/56970256#56970256", "title": "Optional typed immediately destructured parameters?", "body": "<p>Presumably you're unhappy about the following error:</p>\n\n<pre><code>const fooBad = ({ bar }?: { bar?: boolean }) =&gt; {}; // error!\n// \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500&gt; ~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n// A binding pattern parameter cannot be optional in an implementation signature.\n</code></pre>\n\n<p>Which makes sense, because you can't destructure <code>undefined</code>.  What you <em>can</em> do, in TypeScript, is to use a <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#optional-and-default-parameters\" rel=\"noreferrer\">default function parameter</a>.  This is treated like an optional parameter from the calling side of the function (so you can leave it out), and on the implementation side it sets a value of the parameter if it is <code>undefined</code>.</p>\n\n<p>So, what do you want to destructure if someone calls <code>foo()</code>?  I'm guessing you want <code>bar</code> to be <code>undefined</code>, right?  So that would mean you either pass in something like <code>{bar: undefined}</code>, or (since <code>bar</code> is optional), the empty object <code>{}</code>:</p>\n\n<pre><code>const foo = ({ bar }: { bar?: boolean } = {}) =&gt; {\n  console.log(bar);\n};\n</code></pre>\n\n<p>I've added <code>console.log(bar)</code> so you can see what it becomes when you call it:</p>\n\n<pre><code>foo(); // undefined\nfoo({}); // undefined\nfoo({bar: true}); // true\n</code></pre>\n\n<p>Looks good to me.  Hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/MYewdgzgLgBAZiEAhAhgExgXhgCgN4wBGKATjAL4D8AXDAcSTUYgDYCmKYFAlFgHx1yAbhgB6UTDYkSIEgEIAUOJiAYUkAApBs1aBAPz36Dho0ZhKJAQSIBLMGhsBzGAAcUUKFK4uSKALZt3ZMCcYCCwhGwwIE5QVuAoLDA2MJyJPk7sfmBQrrFcEFb2YK4AriRsAHQKCqCQsAggWLj0pBS0zYy0hKwcXOSNeOS8mAJ4CjAwNRAg7OUsIPY4DNxCCsJV9TjLYhLFtmxwNmxoChsDW8q7aPuHx6cMtFAkxWyDIsqPz1UKQA\" rel=\"noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 12496, "user_id": 1283776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/abb815001c365007d50d2bdb3226e70a?s=128&d=identicon&r=PG", "display_name": "user1283776", "link": "https://stackoverflow.com/users/1283776/user1283776"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1188, "favorite_count": 0, "accepted_answer_id": 56970256, "answer_count": 2, "score": 3, "last_activity_date": 1562759966, "creation_date": 1562758782, "last_edit_date": 1562759277, "question_id": 56969950, "link": "https://stackoverflow.com/questions/56969950/optional-typed-immediately-destructured-parameters", "title": "Optional typed immediately destructured parameters?", "body": "<p>How do I write optional typed immediately destructured parameters?</p>\n\n<p>To give an example I want the following function to be callable without providing any parameter.</p>\n\n<pre><code>const foo = ({bar}: {bar?: boolean}) =&gt; {};\n</code></pre>\n\n<p>As it is now, TypeScript complains that a parameter is missing.</p>\n"}, {"tags": ["javascript", "typescript", "express"], "comments": [{"owner": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1562758801, "post_id": 56969811, "comment_id": 100476314, "body": "Questions about working code can be interesting, but they are a better fit at <a href=\"https://codereview.stackexchange.com/help/on-topic\">Code Review</a> rather than Stack Overflow"}, {"owner": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562759039, "post_id": 56969811, "comment_id": 100476457, "body": "Hmm, you are immediatelly throwing an instance away after creation. <code>getById</code> would return a promise that would be resolved to <code>undefined</code> (or get rejected). Making newly created instance inaccessible. How do you plan to use <code>getById</code>?"}, {"owner": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562759153, "post_id": 56969811, "comment_id": 100476518, "body": "Well, not immediatelly but until the promise got settled :) but hope you got the idea. The instance is not accessible :)"}, {"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "reply_to_user": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 0, "creation_date": 1562759717, "post_id": 56969811, "comment_id": 100476848, "body": "@NinoFiliu, ohhh, thanks! sure i&#39;ll ask it there"}, {"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "reply_to_user": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562759744, "post_id": 56969811, "comment_id": 100476863, "body": "@YuryTarabanko, sorry I forgot to put async/await"}, {"owner": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562759815, "post_id": 56969811, "comment_id": 100476912, "body": "@Reyn You&#39;d still need to have something like this <code>static async getById(id: string) {   const instance = new this(id: string); await instance.get(); return instance;  }</code> or make get method to follow fluent interface by adding <code>return this</code> in the end."}, {"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "reply_to_user": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562759859, "post_id": 56969811, "comment_id": 100476938, "body": "also @YuryTarabanko, what site can you suggest as to where can I improve or make some best practices in regards to this?"}, {"owner": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562759966, "post_id": 56969811, "comment_id": 100476989, "body": "I&#39;d suggest to rename method to <code>createById</code> since it (eventually) creates a new instance on every call. Other than that it looks ok."}, {"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "edited": false, "score": 0, "creation_date": 1562760095, "post_id": 56969811, "comment_id": 100477061, "body": "yeah,  aside from that, is my updated code an anti pattern of some sort?  or does it look horrible?  what are some best practices in going OOP via javascript?"}, {"owner": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "edited": false, "score": 1, "creation_date": 1562760340, "post_id": 56969811, "comment_id": 100477197, "body": "What is the point of this class? To me this looks like a function."}, {"owner": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 1, "creation_date": 1562761499, "post_id": 56969811, "comment_id": 100477796, "body": "@Reyn Speaking of OOP. As Thomas I don&#39;t see the point of this class. This looks like a single function to me."}, {"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "reply_to_user": {"reputation": 39499, "user_id": 351705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5vFwo.jpg?s=128&g=1", "display_name": "Yury Tarabanko", "link": "https://stackoverflow.com/users/351705/yury-tarabanko"}, "edited": false, "score": 0, "creation_date": 1562806386, "post_id": 56969811, "comment_id": 100496387, "body": "@YuryTarabanko ahh yes, I used it as a class I am sure that it would get bloated soon enough enough once, I implement the full CRUD of it."}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "edited": false, "score": 0, "creation_date": 1563162680, "post_id": 56970853, "comment_id": 100594706, "body": "I did it as I am using <code>firebase-admin</code>. it fetches from a collection from a database. so thats why data is there also, after fetching it will be populated from its initial result"}], "tags": [], "owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562762166, "creation_date": 1562762166, "answer_id": 56970853, "question_id": 56969811, "link": "https://stackoverflow.com/questions/56969811/self-instantiate-inside-static-javascript-class-method-a-bad-practice/56970853#56970853", "title": "Self instantiate inside static javascript class method a bad practice?", "body": "<blockquote>\n  <p>Is self-instantiation inside static class method a bad practice?</p>\n</blockquote>\n\n<p>No, not at all. It's totally fine to use a static method as a factory.</p>\n\n<p>The weird thing in your code is that you are initialising <code>data</code> asynchronously. That might be on purpose, but from my perspective the class is pretty useless without the data, so I would suggest to do that up front, inside the static method:</p>\n\n<pre><code>class KYC {\n  constructor(\n    public reference,\n    public data,\n  ) {}\n\n  static async getFromReference(reference) {\n    const result = await reference.get();\n    if (!result.exist) throw new Error('not found');\n    return result.data;\n  }\n  static async getById(id: string) {\n    const reference = firestoreAdmin.collection('kyc').doc(id);\n    return new this(reference, await this.getFromReference(reference));\n  }\n\n  \u2026 // further methods operating on this.data\n}\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562768621, "creation_date": 1562758271, "last_edit_date": 1562768621, "question_id": 56969811, "link": "https://stackoverflow.com/questions/56969811/self-instantiate-inside-static-javascript-class-method-a-bad-practice", "title": "Self instantiate inside static javascript class method a bad practice?", "body": "<p>Is this a bad code using OOP JS(this is TS)?</p>\n\n<pre><code>class KYC {\n public reference;\n public data = null;\n\n constructor(id: string) {\n   this.reference = id? firestoreAdmin.collection('kyc').doc(id) :\n           firestoreAdmin.collection('kyc').doc() :\n }\n\n async get() {\n  const result = await this.reference.get();\n\n  if(!result.exist) throw new Error('not found');\n\n  this.data = result.data;\n\n  return this;\n }\n\n static async getById(id: string) {\n  return await new this(id: string).get();\n }\n}\n</code></pre>\n\n<p>I wrote it like that because I find using <strong>new Kyc(id).get();</strong> to be somewhat unreadable inside an express.</p>\n\n<p>also a question is this a bad practice in some way? anti - pattern?</p>\n\n<p>any opinions would be great!</p>\n"}, {"tags": ["javascript", "typescript", "webpack", "cypress"], "comments": [{"owner": {"reputation": 750, "user_id": 1244114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9f4becc8192e76ae1b1b375a241953?s=128&d=identicon&r=PG", "display_name": "tamarabyte", "link": "https://stackoverflow.com/users/1244114/tamarabyte"}, "edited": false, "score": 0, "creation_date": 1568063237, "post_id": 56969803, "comment_id": 102148616, "body": "Any solution to this? We&#39;re running into the same error."}, {"owner": {"reputation": 356, "user_id": 2302835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8v8kh.jpg?s=128&g=1", "display_name": "Sajad Torkamani", "link": "https://stackoverflow.com/users/2302835/sajad-torkamani"}, "reply_to_user": {"reputation": 750, "user_id": 1244114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9f4becc8192e76ae1b1b375a241953?s=128&d=identicon&r=PG", "display_name": "tamarabyte", "link": "https://stackoverflow.com/users/1244114/tamarabyte"}, "edited": false, "score": 0, "creation_date": 1568107837, "post_id": 56969803, "comment_id": 102160737, "body": "@tamarabyte I&#39;m afraid not... Maybe open an issue on the <a href=\"https://github.com/cypress-io/cypress\" rel=\"nofollow noreferrer\">cypress repo</a>?"}, {"owner": {"reputation": 970, "user_id": 958007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZFRzw.jpg?s=128&g=1", "display_name": "tjklemz", "link": "https://stackoverflow.com/users/958007/tjklemz"}, "edited": false, "score": 0, "creation_date": 1568919851, "post_id": 56969803, "comment_id": 102438542, "body": "Also getting this issue..."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 2302835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8v8kh.jpg?s=128&g=1", "display_name": "Sajad Torkamani", "link": "https://stackoverflow.com/users/2302835/sajad-torkamani"}, "edited": false, "score": 0, "creation_date": 1579938190, "post_id": 58091085, "comment_id": 105940650, "body": "Thanks, that pointed me in the right direction! They should really show a user-friendly error message by default but this will suffice for now!"}], "tags": [], "owner": {"reputation": 150, "user_id": 4880022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8493b9bc9111ca38a4c0c30df1c0bb?s=128&d=identicon&r=PG&f=1", "display_name": "dcchuck", "link": "https://stackoverflow.com/users/4880022/dcchuck"}, "is_accepted": true, "score": 7, "last_activity_date": 1569385095, "creation_date": 1569385095, "answer_id": 58091085, "question_id": 56969803, "link": "https://stackoverflow.com/questions/56969803/how-to-get-more-detail-than-webpack-compilation-error-with-cypress/58091085#58091085", "title": "How to get more detail than &#39;Webpack Compilation Error&#39; with Cypress?", "body": "<p>You can see your webpack logs by running cypress in debug mode <a href=\"https://docs.cypress.io/guides/guides/debugging.html#Print-DEBUG-logs\" rel=\"noreferrer\">documentation</a></p>\n\n<p>Mac/Linux</p>\n\n<pre><code>DEBUG=cypress:* cypress run\n</code></pre>\n\n<p>Windows</p>\n\n<pre><code>set DEBUG=cypress:*\ncypress run\n</code></pre>\n\n<p>It is quite a bit of output, as there's logging from everything cypress does - one of which is <code>cypress:webpack</code>, which can give you the full message.</p>\n"}], "owner": {"reputation": 356, "user_id": 2302835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8v8kh.jpg?s=128&g=1", "display_name": "Sajad Torkamani", "link": "https://stackoverflow.com/users/2302835/sajad-torkamani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3672, "favorite_count": 1, "accepted_answer_id": 58091085, "answer_count": 1, "score": 3, "last_activity_date": 1608830195, "creation_date": 1562758235, "last_edit_date": 1608830195, "question_id": 56969803, "link": "https://stackoverflow.com/questions/56969803/how-to-get-more-detail-than-webpack-compilation-error-with-cypress", "title": "How to get more detail than &#39;Webpack Compilation Error&#39; with Cypress?", "body": "<p>Whenever there is an error inside one of my imported modules, all I get from Cypress is the message <code>Error: Webpack Compilation Error</code>. There doesn't seem to be a useful error stack anywhere so it is incredibly frustrating to have to hunt down the source of the error. I was wondering if there is a way of getting more details on the error?</p>\n<p>I'm writing the tests in TypeScript and using <a href=\"https://github.com/cypress-io/cypress-webpack-preprocessor\" rel=\"nofollow noreferrer\">cypress-webpack-preprocessor</a> to compile the test code.</p>\n<p>Here is the <code>webpack.config.js</code> that I'm passing to cypress-webpack-preprocessor:</p>\n<pre class=\"lang-js prettyprint-override\"><code>module.exports = {\n  mode: 'development',\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        exclude: [/node_modules/],\n        use: [\n          {\n            loader: 'ts-loader'\n          }\n        ]\n      }\n    ]\n  },\n  resolve: {\n    extensions: ['.ts', '.tsx', '.js']\n  }\n};\n</code></pre>\n<p>Here is the screenshot of the lovely error message:</p>\n<p><a href=\"https://i.stack.imgur.com/R5upz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R5upz.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["typescript", "vue.js", "webpack", "jestjs", "ts-jest"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8112965, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209071678778408/picture?type=large", "display_name": "Silva Kirsim&#228;e", "link": "https://stackoverflow.com/users/8112965/silva-kirsim%c3%a4e"}, "is_accepted": false, "score": 1, "last_activity_date": 1563184680, "creation_date": 1563184680, "answer_id": 57037358, "question_id": 56969625, "link": "https://stackoverflow.com/questions/56969625/how-to-fix-warning-when-running-tests-with-jest-failed-to-mount-component-temp/57037358#57037358", "title": "How to fix warning when running tests with jest: Failed to mount component: template or render function not defined", "body": "<p>I resolved the warning by modifying the order of the extensions in <code>moduleFileExtensions</code> to:</p>\n\n<pre><code>moduleFileExtensions: [\"js\", \"jsx\", \"json\", \"vue\", \"ts\", \"tsx\", \"node\"],\n\n</code></pre>\n\n<p>I also needed to use <code>shallowMount</code> instead of <code>mount</code> as I have <code>Image</code> child component that is committing to the Vuex store which I don't want to be executed.</p>\n"}], "owner": {"reputation": 61, "user_id": 8112965, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209071678778408/picture?type=large", "display_name": "Silva Kirsim&#228;e", "link": "https://stackoverflow.com/users/8112965/silva-kirsim%c3%a4e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563184680, "creation_date": 1562757646, "last_edit_date": 1562761548, "question_id": 56969625, "link": "https://stackoverflow.com/questions/56969625/how-to-fix-warning-when-running-tests-with-jest-failed-to-mount-component-temp", "title": "How to fix warning when running tests with jest: Failed to mount component: template or render function not defined", "body": "<p>I've seen loads of posts about the same error but I'm only getting the it when running tests with Jest:</p>\n\n<pre><code>    console.error node_modules/vue/dist/vue.runtime.common.dev.js:621\n      [Vue warn]: Failed to mount component: template or render function not defined.\n\n      found in\n\n      ---&gt; &lt;Navbar&gt;\n             &lt;Root&gt;\n</code></pre>\n\n<p>Navbar.vue</p>\n\n<pre><code>&lt;template&gt;\n...\n  &lt;div&gt;\n    &lt;Image\n      v-if=\"email\"\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\nmodule.exports = require(\"./Navbar.ts\");\n&lt;/script&gt;\n</code></pre>\n\n<p>Navbar.ts</p>\n\n<pre><code>import Vue from \"vue\";\nimport Image from \"@/components/Image/Image\";\n\nexport default Vue.extend({\n  name: \"Navbar\",\n  components: {\n    Image,\n  },\n  computed: {\n    email() {\n      return this.$store.getters.email;\n    }\n  }\n});\n\n</code></pre>\n\n<p>Navbar.spec.ts example test</p>\n\n<pre><code>import { mount, createLocalVue } from \"@vue/test-utils\";\nimport Navbar from \"../Navbar\";\nimport Vuex from \"vuex\";\n\nconst localVue = createLocalVue();\nlocalVue.use(Vuex);\nlet wrapper;\nconst state = {\n  email: \"name@gmail.com\"\n};\nconst getters = {\n  email: state =&gt; state.email\n};\nconst store = new Vuex.Store({ state, getters });\n\ndescribe(\"Navbar\", () =&gt; {\n  beforeEach(() =&gt; {\n    wrapper = mount(Navbar, {\n      store,\n      localVue\n    });\n  });\n\n  it(\"returns correct email from the store\", () =&gt; {\n    expect(wrapper.vm.email).toBe(\"name@gmail.com\");\n  });\n});\n\n</code></pre>\n\n<p>Tests itself pass. I assume I'm missing/set wrong some configuration but not sure exactly what. I'm also using Typescript.  </p>\n\n<p>Jest configuration:</p>\n\n<pre><code>module.exports = {\n  displayName: \"test\",\n  roots: [\"&lt;rootDir&gt;/src\"],\n  moduleFileExtensions: [\"ts\", \"tsx\", \"js\", \"jsx\", \"json\", \"node\", \"vue\"],\n  transform: {\n    \".*\\\\.(vue)$\": \"vue-jest\",\n    \"^.+\\\\.tsx?$\": \"ts-jest\"\n  },\n  testURL: \"http://localhost/\",\n  snapshotSerializers: [\"&lt;rootDir&gt;/node_modules/jest-serializer-vue\"],\n  testRegex: \"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.tsx?$\",\n  moduleNameMapper: {\n    \"^@/(.*)$\": \"&lt;rootDir&gt;/src/$1\"\n  }\n};\n</code></pre>\n\n<p>I expect tests to still pass without the console error.</p>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 4450, "user_id": 11270840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2Zv.jpg?s=128&g=1", "display_name": "Ghoul Ahmed", "link": "https://stackoverflow.com/users/11270840/ghoul-ahmed"}, "is_accepted": true, "score": 0, "last_activity_date": 1562757721, "creation_date": 1562757721, "answer_id": 56969645, "question_id": 56969594, "link": "https://stackoverflow.com/questions/56969594/im-trying-to-fetch-a-json-file-from-an-api/56969645#56969645", "title": "I&#39;m trying to fetch a JSON file from an API", "body": "<p>add <strong>https</strong> in API url like this:</p>\n\n<pre><code> fetch(\"https://api.openweathermap.org/data/2.5/weather?lat=\"+position.coords.latitude+\"+&amp;lon=\"+position.coords.longitude) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 9440874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MQvz.png?s=128&g=1", "display_name": "tscpp", "link": "https://stackoverflow.com/users/9440874/tscpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1562760756, "creation_date": 1562760756, "answer_id": 56970451, "question_id": 56969594, "link": "https://stackoverflow.com/questions/56969594/im-trying-to-fetch-a-json-file-from-an-api/56970451#56970451", "title": "I&#39;m trying to fetch a JSON file from an API", "body": "<p>Fetch is a Promise that returns a response.</p>\n\n<pre><code>fetch(url).then(res =&gt; res.json()).then(json=&gt; {});\n// or\nfetch(url).then(function (res) {\n   return res.json();\n}).then(function (json) {});\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11735699, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6MLfyND-qwQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5amgSusL1LBL9WGC8wwrXLKK98g/photo.jpg?sz=128", "display_name": "Hugo Persson", "link": "https://stackoverflow.com/users/11735699/hugo-persson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 56969645, "answer_count": 2, "score": 0, "last_activity_date": 1562760756, "creation_date": 1562757540, "question_id": 56969594, "link": "https://stackoverflow.com/questions/56969594/im-trying-to-fetch-a-json-file-from-an-api", "title": "I&#39;m trying to fetch a JSON file from an API", "body": "<p>So I'm creating a new tab extension for chrome and I want to display the weather for the user. To do this I am using the geolocation API for the location and then openweather API for the weather data. The problem I have is when I use the fetch method it look for the file locally, this url :</p>\n\n<p>chrome-extension://kgimldinjffdncnfpgflgjeaiafjdflp/api.openweathermap.org/data/2.5/weather?lat=56.692819099999994+&amp;lon=12.8946167.</p>\n\n<p>But I want it to look for the file on the internet, how do I solve this?</p>\n\n<p>This is the code I am currently using.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var OpenWeather;\nif(\"geolocation\" in navigator){\n      // check if geolocation is supported/enabled on current browser\n      navigator.geolocation.getCurrentPosition(function(position:Position){\n        fetch(\"api.openweathermap.org/data/2.5/weather?lat=\"+position.coords.latitude+\"+&amp;lon=\"+position.coords.longitude).then(function(response){\n            response.json().then(function(data){\n                OpenWeather=data;\n                alert(OpenWeather);\n            });\n        });\n\n\n      });\n}\n</code></pre>\n"}, {"tags": ["typescript", "gulp", "aurelia"], "comments": [{"owner": {"reputation": 23, "user_id": 10933242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec23a8c496d8ca9704a3ff88e7685de5?s=128&d=identicon&r=PG&f=1", "display_name": "RasmusPedersen", "link": "https://stackoverflow.com/users/10933242/rasmuspedersen"}, "edited": false, "score": 0, "creation_date": 1563172860, "post_id": 56969204, "comment_id": 100597218, "body": "I kinda fixed this, by commenting out sourceMaps from my Gulp src pipe in the transpile.js file in the Aurelia Project folder."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 10933242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec23a8c496d8ca9704a3ff88e7685de5?s=128&d=identicon&r=PG&f=1", "display_name": "RasmusPedersen", "link": "https://stackoverflow.com/users/10933242/rasmuspedersen"}, "is_accepted": true, "score": 0, "last_activity_date": 1564406518, "creation_date": 1564406518, "answer_id": 57254820, "question_id": 56969204, "link": "https://stackoverflow.com/questions/56969204/aurelia-cli-project-build-error-depending-on-environment/57254820#57254820", "title": "Aurelia CLI project build error depending on environment", "body": "<p>This was all due to a faulty upgrade of the Aurelia CLI.</p>\n\n<p>I npm installed the new version, but failed to replace the Aurelia Project properly.</p>\n\n<p>If you follow Aurelia's own guide to upgrading, they ask you to create a new project with the command: </p>\n\n<pre><code>au new\n</code></pre>\n\n<p>And here it is of vital importance that you consider all the design choices of the project you wish to upgrade. My error was creating a default project, and thus not using the existing concepts and techniques. </p>\n\n<p>After you have done that, you just delete your old Aurelia Project folder, and replace it with the new Aurelia Project, from the newly created project, you generated with the command 'au new'.</p>\n"}], "owner": {"reputation": 23, "user_id": 10933242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec23a8c496d8ca9704a3ff88e7685de5?s=128&d=identicon&r=PG&f=1", "display_name": "RasmusPedersen", "link": "https://stackoverflow.com/users/10933242/rasmuspedersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 57254820, "answer_count": 1, "score": 1, "last_activity_date": 1564406518, "creation_date": 1562756170, "question_id": 56969204, "link": "https://stackoverflow.com/questions/56969204/aurelia-cli-project-build-error-depending-on-environment", "title": "Aurelia CLI project build error depending on environment", "body": "<p>I want to build my Aurelia CLI project, recently upgraded to v 1.0.2</p>\n\n<p>when i build with command:</p>\n\n<blockquote>\n  <p>au build -env prod</p>\n</blockquote>\n\n<p>Everything builds smoothly, but when i use dev</p>\n\n<blockquote>\n  <p>au build -env dev</p>\n</blockquote>\n\n<p>I am met by an unintelligible stacktrace, finding an index error at module 'async-done'.</p>\n\n<pre><code>ERROR [Bundle] Failed to write the bundle\nINFO [Bundle] Error: No element indexed by 0\nC:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\async-done\\index.js:18\n    throw err;\n    ^\nError [ERR_UNHANDLED_ERROR]: Unhandled error. ([object Object])\n    at Gulp.emit (events.js:171:17)\n    at Gulp.EventEmitter.emit (domain.js:441:20)\n    at Object.error (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\undertaker\\lib\\helpers\\createExtensions.js:61:10)\n    at handler (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\now-and-later\\lib\\mapSeries.js:43:14)\n    at f (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\once\\once.js:25:25)\n    at f (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\once\\once.js:25:25)\n    at tryCatch (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\async-done\\index.js:24:15)\n    at done (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\async-done\\index.js:40:12)\n    at onError (C:\\Users\\401623\\Documents\\Repositories\\TrackAndTrace\\TrackTrace.Client\\node_modules\\async-done\\index.js:51:5)\n    at process._tickCallback (internal/process/next_tick.js:68:7)\n</code></pre>\n\n<p>What do you guys think?</p>\n"}, {"tags": ["typescript", "knockout.js", "requirejs", "ecmascript-5"], "answers": [{"tags": [], "owner": {"reputation": 634, "user_id": 9440874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MQvz.png?s=128&g=1", "display_name": "tscpp", "link": "https://stackoverflow.com/users/9440874/tscpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1562761215, "creation_date": 1562761215, "answer_id": 56970572, "question_id": 56968872, "link": "https://stackoverflow.com/questions/56968872/using-knockout-type-with-typescript-and-requirejs-for-es5/56970572#56970572", "title": "Using Knockout type with TypeScript and RequireJs for ES5", "body": "<p>I'm not entirely sure it is going to work but try using <code>import * as ko from 'knockout</code> instead and removing <code>lib</code> and <code>typeRoots</code>. If that doesn't work, try using this tsconfig file and renaming the file to <code>tsconfig.json</code>:</p>\n\n<pre><code>{\n    \"compilerOptions\": {\n        \"module\": \"amd\",\n        \"target\": \"es6\",\n        \"moduleResolution\": \"node\"\n    },\n    \"exclude\": [\n        \"node_modules\",\n        \"wwwroot\"\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 1954, "user_id": 6276704, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/587d0480487de975a4b5f296f40701ae?s=128&d=identicon&r=PG&f=1", "display_name": "BluE", "link": "https://stackoverflow.com/users/6276704/blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562763216, "creation_date": 1562754888, "last_edit_date": 1562763216, "question_id": 56968872, "link": "https://stackoverflow.com/questions/56968872/using-knockout-type-with-typescript-and-requirejs-for-es5", "title": "Using Knockout type with TypeScript and RequireJs for ES5", "body": "<p>I am learning TypeScript and struggle with the knockout type right now.</p>\n\n<p>Right now I import the dependencies and then use them in my <code>showPdf.ts</code> file like this:</p>\n\n<pre><code>import $ = require(\"jquery\");\nimport ko = require(\"knockout\");\nimport pdfjsLib = require(\"pdfjs-dist/build/pdf\");\n\nexport class PdfViewModel {\n    pdfUrl: any;\n\n    constructor(initUrl: string) {\n        this.pdfUrl = ko.observable(initUrl);\n    }\n\n    var loadingTask = pdfjsLib.getDocument(url);\n    loadingTask.promise.then((pdf: any) =&gt; {\n        pdf.getPage(1).then((page: any) =&gt; {\n            ...\n        }\n    }\n    ...\n}\n</code></pre>\n\n<h2>1. KnockoutObservable</h2>\n\n<p>Now I would like to set the type of <code>pdfUrl</code> to <code>KnockoutObservable&lt;string&gt;</code>. Without changing anything else, I now get a transpile error:</p>\n\n<pre><code>Error TS2403: Build:Subsequent variable declarations must have the same type.  Variable 'ko' must be of type 'typeof import(\"C:/Users/BluE/Source/Repos/ShowPdfTest/node_modules/knockout/build/types/knockout\")', but here has type 'KnockoutStatic'. (1060, 13)\n</code></pre>\n\n<p>I got this fixed by changing the knockout import to this:</p>\n\n<pre><code>/// &lt;reference path=\"../TypeScript/@types/knockout/index.d.ts\" /&gt;\nimport $ = require(\"jquery\");\nimport pdfjsLib = require(\"pdfjs-dist/build/pdf\n</code></pre>\n\n<p>Now I have read, that using the reference like that is actually bad practice. So what would be the correct way of doing this?</p>\n\n<h2>2. PdfJS</h2>\n\n<p>Visual Studio also highlights 2 issues, those compile and work fine though.</p>\n\n<pre><code>Import 'pdfjsLib' is never used\nSymbol 'pdfjsLib' cannot be properly resolved, probably it is located in inaccessible module\n</code></pre>\n\n<p>If I remove the import, the other line won't transpile anymore.</p>\n\n<pre><code>Error TS2304: Build:Cannot find name 'pdfjsLib'.\n</code></pre>\n\n<p>Am I doing something wrong here? If so, what is the correct way of doing it?</p>\n\n<h2>Additional config info:</h2>\n\n<p><code>tsconfig.json</code>:</p>\n\n<pre><code>{\n  \"compileOnSave\": true,\n  \"compilerOptions\": {\n    \"strict\": false,\n    \"noEmitOnError\": true,\n    \"sourceMap\": true,\n    \"removeComments\": false,\n    \"target\": \"es5\",\n    \"outDir\": \"wwwroot/js/\",\n    \"module\": \"amd\",\n    \"moduleResolution\": \"node\",\n    \"lib\": [\n      \"es5\",\n      \"dom\"\n    ],\n    \"typeRoots\": []\n  },\n  \"exclude\": [\n    \"node_modules\",\n    \"wwwroot\"\n  ]\n}\n</code></pre>\n\n<p><code>package.json</code>:</p>\n\n<pre><code>{\n  \"version\": \"0.5.0\",\n  \"name\": \"showpdf.test\",\n  \"private\": true,\n  \"devDependencies\": {\n    \"@types/jquery\": \"3.3.30\",\n    \"@types/knockout\": \"3.4.66\",\n    \"@types/pdfjs-dist\": \"2.0.0\"\n  },\n  \"dependencies\": {\n    \"requirejs\": \"2.3.6\",\n    \"jquery\": \"3.4.1\",\n    \"knockout\": \"3.5.0\",\n    \"pdfjs-dist\": \"2.0.943\"\n  }\n}\n</code></pre>\n\n<p>The effective html parts of my <code>*.cshtml</code>: (I am using ASP.Net Core 2.2, in case it is relevant.)</p>\n\n<pre><code>&lt;script src=\"~/lib/requirejs/dist/require.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n    require.config({\n        baseUrl: \"/\",\n        paths: {\n            \"jquery\": \"lib/jquery/dist/jquery-3.4.1\",\n            \"knockout\": \"lib/knockout/dist/knockout-3.5.0\",\n            \"pdfjs-dist/build/pdf\": \"lib/pdfjs/dist/build/pdf\",\n            'pdfjs-dist/build/pdf.worker': \"lib/pdfjs/dist/build/pdf.worker\",\n            \"showpdf-test\": \"js/showpdf\"\n        },\n        waitSeconds: 15\n    });\n    require(\n        [\"knockout\", \"showpdf-test\"],\n        function (ko, showpdf) {\n            var viewModel = new showpdf.PdfViewModel(\"\");\n            ko.applyBindings(viewModel);\n        }\n    );\n&lt;/script&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/o7H7q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o7H7q.png\" alt=\"File structure in my solution\"></a></p>\n\n<p>I just noticed I am using the Nuget package knockoutjs. I doubt, that I actually need it. Are there any known issues having this nuget package though?</p>\n"}, {"tags": ["angular", "spring", "typescript"], "comments": [{"owner": {"reputation": 591, "user_id": 6169436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aci3r.png?s=128&g=1", "display_name": "Micha\u0142 Tkaczyk", "link": "https://stackoverflow.com/users/6169436/micha%c5%82-tkaczyk"}, "edited": false, "score": 0, "creation_date": 1562756622, "post_id": 56968846, "comment_id": 100475193, "body": "What do you get in this.listeFamilles ?"}, {"owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "reply_to_user": {"reputation": 591, "user_id": 6169436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aci3r.png?s=128&g=1", "display_name": "Micha\u0142 Tkaczyk", "link": "https://stackoverflow.com/users/6169436/micha%c5%82-tkaczyk"}, "edited": false, "score": 0, "creation_date": 1562759499, "post_id": 56968846, "comment_id": 100476723, "body": "@Micha\u0142Tkaczyk I have edited my post with the content of this.listeFamilles"}], "owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562759469, "creation_date": 1562754829, "last_edit_date": 1562759469, "question_id": 56968846, "link": "https://stackoverflow.com/questions/56968846/function-which-work-when-i-get-data-statically-but-when-i-get-data-from-an-api", "title": "Function which work when I get data statically, but when I get data from an API, the function works but at the end, everything is erased", "body": "<p>I try to draw some lines with a function called Draw. The function works well, and when I create an array with some data, the lines are drawn perfectly.\nWhen I get data from a REST API, when I execute step by step, I can see that the lines are well drawn, but, after the last iteration, everything is erased.</p>\n\n<p>Here is my HTML : </p>\n\n<pre><code>&lt;table *ngIf=\"listeFamilles\"&gt;\n  &lt;tbody&gt;\n    &lt;tr *ngFor=\"let f of listeFamilles\"&gt;\n      &lt;th style=\"vertical-align: middle; padding-left: 10px;\"&gt;{{ f.nom }}&lt;/th&gt;\n      &lt;td  id=\"{{f.nom}}\"  style=\"vertical-align: top;\"&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Here is where I call my function, in the component :\n(listeFamilles is declared at the top of the component, and his type is any)</p>\n\n<pre><code>export class EncoursComponent implements AfterViewInit{\n\n  //Variables du controleur\n\nconstructor(private serviceFam: FamillesService) {\n    this.getFamilles();\n}\n\nngAfterViewInit(): void {\n    this.serviceFam.getAllFamilles()\n      .subscribe(data =&gt; {\n        this.listeFamilles = data;\n        console.log(this.listeFamilles);\n        for (let f of this.listeFamilles) {\n          //console.log(this.listeAffaires._embedded.affaires[0]);\n          console.log(f.nom);\n          this.draw(\"#\" + f.nom, this.arriel1, {dateDimension: false, color: \"teal\", labelFormat: \"%Y\"})\n          alert('test');\n        }\n      }, err =&gt; {\n        console.log(err);\n      });\n  }\n\n}\n</code></pre>\n\n<p>This is my function in my service :</p>\n\n<pre><code>public getAllFamilles(){\n    return this.httpClient.get(this.host+\"/listFamilles\")\n  }\n</code></pre>\n\n<p>And this is what I get in this.listeFamilles :</p>\n\n<pre><code>(12) [{\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}]\n0: {id: 1, nom: \"ARRIEL1\", couleur: \"32cd32\"}\n1: {id: 2, nom: \"ARRIEL2\", couleur: \"2b78e4\"}\n2: {id: 3, nom: \"TURMO\", couleur: \"ffffff\"}\n3: {id: 4, nom: \"MAKILA1\", couleur: \"999999\"}\n4: {id: 5, nom: \"ARRIUS2F\", couleur: \"ffff00\"}\n5: {id: 6, nom: \"ARRIUS1\", couleur: \"ff00ff\"}\n6: {id: 7, nom: \"ARRIUS2\", couleur: \"ff9900\"}\n7: {id: 8, nom: \"ASTAZOU3\", couleur: \"ffff00\"}\n8: {id: 9, nom: \"RTM322\", couleur: \"351c75\"}\n9: {id: 11, nom: \"MAKILA2\", couleur: \"999999\"}\n10: {id: 12, nom: \"ASTAZOU4\", couleur: \"ffff00\"}\n11: {id: 13, nom: \"ASTAZOU14\", couleur: \"ffff00\"}\nlength: 12\n__proto__: Array(0)\n</code></pre>\n"}, {"tags": ["arrays", "typescript", "interface"], "comments": [{"owner": {"reputation": 3224, "user_id": 540453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3oYkm.png?s=128&g=1", "display_name": "Aston", "link": "https://stackoverflow.com/users/540453/aston"}, "edited": false, "score": 0, "creation_date": 1562755103, "post_id": 56968761, "comment_id": 100474401, "body": "Please paste here all log messages. Isn&#39;t this.moldHistory undefined? What is the exact error?"}, {"owner": {"reputation": 305, "user_id": 1307832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b8618cce3a0425965da5a8c438f203?s=128&d=identicon&r=PG", "display_name": "slacky82", "link": "https://stackoverflow.com/users/1307832/slacky82"}, "reply_to_user": {"reputation": 3224, "user_id": 540453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3oYkm.png?s=128&g=1", "display_name": "Aston", "link": "https://stackoverflow.com/users/540453/aston"}, "edited": false, "score": 0, "creation_date": 1562760083, "post_id": 56968761, "comment_id": 100477056, "body": "If I change moldHistory: IPevMoldMapPayload[] = [] with  moldHistory: any[] = []; the error disappear!!!"}, {"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1562762221, "post_id": 56968761, "comment_id": 100478183, "body": "If I change moldHistory: IPevMoldMapPayload[] = [] with moldHistory: any[] = []; the error disappear!!! .... this is bad solution, if you are doing such things you dont need typescript... check what type is this.moldHistory. if it is for ex. string it will pass the length condition but will have no filter option. Use any if there is no other solution"}], "owner": {"reputation": 305, "user_id": 1307832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b8618cce3a0425965da5a8c438f203?s=128&d=identicon&r=PG", "display_name": "slacky82", "link": "https://stackoverflow.com/users/1307832/slacky82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562754552, "creation_date": 1562754552, "question_id": 56968761, "link": "https://stackoverflow.com/questions/56968761/error-filter-is-not-a-function-when-i-use-an-interface", "title": "error filter is not a function when I use an interface []", "body": "<p>I have this interface:</p>\n\n<pre><code>export interface IPevMoldMapPayload {\n  mold: IMold;\n  updateCurrentMold?: boolean;\n  datetime?: number;\n  username?: string;\n }\n</code></pre>\n\n<p>In another class I use this:</p>\n\n<pre><code>...\nmoldHistory: IPevMoldMapPayload[] = [];\n...\n</code></pre>\n\n<p>fill moldHistory with some data and filter that</p>\n\n<pre><code>...\nif (this.moldHistory.length &gt; 0) {\n  let filteredHistory = this.moldHistory.filter((item) =&gt; \n    item.datetime&gt;=Date.now() - hourSelected);\n}\n...\n</code></pre>\n\n<p>here I have this error: \"filter is not a function\"</p>\n\n<p>Any Idea??</p>\n\n<p>Thank ;)</p>\n"}, {"tags": ["arrays", "typescript", "sorting", "lodash"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 1, "creation_date": 1562754796, "post_id": 56968706, "comment_id": 100474244, "body": "But <code>sortBy</code> does not take a comparator like what you&#39;d use in a JS <code>.sort</code>. It takes an iteratee which expects a single argument. What you want to do can even be done by either passing <code>x =&gt; x.accountId</code> or the shorthand <code>&quot;accountId&quot;</code> (the string)."}, {"owner": {"reputation": 160, "user_id": 4988674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KhPQx.jpg?s=128&g=1", "display_name": "Max Donchenko", "link": "https://stackoverflow.com/users/4988674/max-donchenko"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1562850167, "post_id": 56968706, "comment_id": 100514342, "body": "@VLAZ thanks a lot, you&#39;re right!"}], "owner": {"reputation": 160, "user_id": 4988674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KhPQx.jpg?s=128&g=1", "display_name": "Max Donchenko", "link": "https://stackoverflow.com/users/4988674/max-donchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562754306, "creation_date": 1562754306, "question_id": 56968706, "link": "https://stackoverflow.com/questions/56968706/wrong-type-detection-in-lodash-sortby-with-typescript", "title": "Wrong type detection in lodash/sortBy with TypeScript", "body": "<p>It seems that <code>lodash/sortBy</code> detects the type of 2nd argument of iteratee function (comparator) incorrectly. It relates to both named and default lodash imports.\nAt the same time, <code>stable</code> sorting helper detects it properly.</p>\n\n<p>(sandbox: <a href=\"https://codesandbox.io/embed/priceless-haslett-be2h6\" rel=\"nofollow noreferrer\">https://codesandbox.io/embed/priceless-haslett-be2h6</a>)</p>\n\n<p>Question: May I doing smth wrong or there is a problem with _.sortBy with TS?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import _ from \"lodash\";\nimport sortBy from \"lodash/sortBy\";\nimport stable from \"stable\";\n\nexport interface ITableRow {\n  accountId: number;\n  companyName: string;\n}\n\nconst rows: ITableRow[] = [];\n\n// TS error\nconst sortedList1 = sortBy&lt;ITableRow&gt;(\n  rows,\n  (a, b) =&gt; a.accountId - b.accountId\n);\n\n// TS error\nconst sortedList2 = _.sortBy&lt;ITableRow&gt;(\n  rows,\n  (a, b) =&gt; a.accountId - b.accountId\n);\n\n// ok\nconst sortedList3 = stable&lt;ITableRow&gt;(\n  rows,\n  (a, b) =&gt; a.accountId - b.accountId\n);\n\n</code></pre>\n"}, {"tags": ["javascript", "html", "angular", "typescript", "routing"], "comments": [{"owner": {"reputation": 1669, "user_id": 5955138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee000cb86f66861a3b7b4690715b42a?s=128&d=identicon&r=PG", "display_name": "shadowman_93", "link": "https://stackoverflow.com/users/5955138/shadowman-93"}, "edited": false, "score": 0, "creation_date": 1562754557, "post_id": 56968652, "comment_id": 100474119, "body": "What did you get when console.log  <code>this.car</code> variable in CardetailsComponent?"}, {"owner": {"reputation": 1047, "user_id": 3359635, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/192e55003fc22967398264e8f4c21e0e?s=128&d=identicon&r=PG", "display_name": "dallows", "link": "https://stackoverflow.com/users/3359635/dallows"}, "edited": false, "score": 0, "creation_date": 1562754604, "post_id": 56968652, "comment_id": 100474138, "body": "Is <code>carId</code> equal to <code>index</code>? If not, try this: <code>&lt;td [routerLink]=&quot;[&#39;&#47;cars&#39;, car.carId]&quot;&gt;{{car.carId}}&lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "reply_to_user": {"reputation": 1669, "user_id": 5955138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee000cb86f66861a3b7b4690715b42a?s=128&d=identicon&r=PG", "display_name": "shadowman_93", "link": "https://stackoverflow.com/users/5955138/shadowman-93"}, "edited": false, "score": 0, "creation_date": 1562754773, "post_id": 56968652, "comment_id": 100474233, "body": "@shadowman_93 I get <b>undefined</b>"}, {"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "reply_to_user": {"reputation": 1047, "user_id": 3359635, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/192e55003fc22967398264e8f4c21e0e?s=128&d=identicon&r=PG", "display_name": "dallows", "link": "https://stackoverflow.com/users/3359635/dallows"}, "edited": false, "score": 0, "creation_date": 1562754778, "post_id": 56968652, "comment_id": 100474236, "body": "@dallows When I use your solution I get the right carId like this: <b><a href=\"http://localhost:4200/cars/445\" rel=\"nofollow noreferrer\">localhost:4200/cars/445</a></b> I still don&#39;t get the <b>brand, model, color</b>"}, {"owner": {"reputation": 1047, "user_id": 3359635, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/192e55003fc22967398264e8f4c21e0e?s=128&d=identicon&r=PG", "display_name": "dallows", "link": "https://stackoverflow.com/users/3359635/dallows"}, "edited": false, "score": 0, "creation_date": 1562755309, "post_id": 56968652, "comment_id": 100474526, "body": "In your code you are trying to access the property <code>445</code> of <code>CarVM</code> class witch does not exist. If <code>CarVM</code> is really an array then you should use <code>this.car = CarVM.find(car =&gt; car.carId === params.get(&#39;carId&#39;))</code>"}, {"owner": {"reputation": 1669, "user_id": 5955138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee000cb86f66861a3b7b4690715b42a?s=128&d=identicon&r=PG", "display_name": "shadowman_93", "link": "https://stackoverflow.com/users/5955138/shadowman-93"}, "edited": false, "score": 0, "creation_date": 1562755544, "post_id": 56968652, "comment_id": 100474658, "body": "@Fearcoder if you get <b>undefined</b> it means that you can&#39;t get <b>params.get</b> variable properly. Can you please create stackblitz for us?"}], "answers": [{"comments": [{"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "edited": false, "score": 0, "creation_date": 1562754892, "post_id": 56968833, "comment_id": 100474295, "body": "you mean something like this? <b>CarVM car: any;</b>"}, {"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "edited": false, "score": 0, "creation_date": 1562755710, "post_id": 56968833, "comment_id": 100474724, "body": "I have use your solution. I get the carId in the url but not the rest. I gonna make a stackblitz"}, {"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "edited": false, "score": 0, "creation_date": 1562757390, "post_id": 56968833, "comment_id": 100475610, "body": "I have change it I also use a backend for the data"}, {"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "edited": false, "score": 0, "creation_date": 1562757691, "post_id": 56968833, "comment_id": 100475761, "body": "I have filled the variable"}], "tags": [], "owner": {"reputation": 1669, "user_id": 5955138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee000cb86f66861a3b7b4690715b42a?s=128&d=identicon&r=PG", "display_name": "shadowman_93", "link": "https://stackoverflow.com/users/5955138/shadowman-93"}, "is_accepted": false, "score": 0, "last_activity_date": 1562755460, "last_edit_date": 1562755460, "creation_date": 1562754786, "answer_id": 56968833, "question_id": 56968652, "link": "https://stackoverflow.com/questions/56968652/data-not-passing-through-with-route-in-angular-6/56968833#56968833", "title": "Data not passing through with route in Angular 6", "body": "<p>The problem is, you don't have CarVM object properly on CardetailsComponent. You are only getting carId into CarVM here: <code>this.car = CarVM[+params.get('carId')];</code></p>\n\n<p>First you need to create CarVM properly with your class variables. And the you can call your index.</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CarVM } from '../viewmodels/car-vm';\n\n@Component({\n  selector: 'app-cardetails',\n  templateUrl: './cardetails.component.html',\n  styleUrls: ['./cardetails.component.css']\n})\n\nexport class CardetailsComponent implements OnInit {\n\n  car: any;\n  carList: any;\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.route.paramMap.subscribe(params =&gt; {\n          this.car = params.get('carId');\n        });\n      }\n   getCarList(){\n   this.carList = new CarVM();\n   //call your service here to fill your carList variable and once you get car list, you will be able to access variable using with your index (this.car).\n  }\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "edited": false, "score": 0, "creation_date": 1562760250, "post_id": 56970260, "comment_id": 100477139, "body": "Thank you so much! This is working have a great day."}], "tags": [], "owner": {"reputation": 1047, "user_id": 3359635, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/192e55003fc22967398264e8f4c21e0e?s=128&d=identicon&r=PG", "display_name": "dallows", "link": "https://stackoverflow.com/users/3359635/dallows"}, "is_accepted": true, "score": 1, "last_activity_date": 1562759986, "creation_date": 1562759986, "answer_id": 56970260, "question_id": 56968652, "link": "https://stackoverflow.com/questions/56968652/data-not-passing-through-with-route-in-angular-6/56970260#56970260", "title": "Data not passing through with route in Angular 6", "body": "<p>Ok, you seem to be bit confused. In <code>cardetails</code> component you want to process <code>carId</code> from route parameters and use it to get car details. You can either get them from server, or have the service return already loaded details of all cars.</p>\n\n<p>Let's say we are trying to make it happen getting the first way, it might look like this:</p>\n\n<pre><code>import { map, switchMap } from 'rxjs/operators';\n\nngOnInit() {\n  this.getCar();\n}\n\nprivate getCar(): void {\n  this.route.paramMap.pipe(\n    map(params =&gt; params.get('carId')),\n    switchMap(carId =&gt; {\n      return this.carservice.getCarById(carId);\n    })\n  ).subscribe(\n    res =&gt; {\n      this.car = res;\n      console.log('@My car:', this.car);\n    }\n  );\n}\n</code></pre>\n\n<p>First, you'll get the <code>carId</code> from <code>route.paramMap</code>, map it using rxjs <code>map</code>, then use <code>switchMap</code> to call you <code>carservice.getCarById(carId)</code> and have it return Observable to which you can subscribe. This should do the trick. Don't forget to properly map it/create CarVM object from it.</p>\n"}], "owner": {"reputation": 876, "user_id": 6280280, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60a8daec5bd303e757a4c5757b07dfe5?s=128&d=identicon&r=PG&f=1", "display_name": "Fearcoder", "link": "https://stackoverflow.com/users/6280280/fearcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56970260, "answer_count": 2, "score": 0, "last_activity_date": 1562759986, "creation_date": 1562754110, "last_edit_date": 1562757658, "question_id": 56968652, "link": "https://stackoverflow.com/questions/56968652/data-not-passing-through-with-route-in-angular-6", "title": "Data not passing through with route in Angular 6", "body": "<p>I have a application with a table of cars: </p>\n\n<p>This is my code:</p>\n\n<p><strong>Carcomponent.html</strong></p>\n\n<pre><code>&lt;tbody&gt;\n        &lt;tr *ngFor=\"let car of allCars; index as carId\" \\&gt;\n          &lt;td [routerLink]=\"['/cars', carId]\"&gt;{{car.carId}}&lt;/td&gt;\n          &lt;td&gt;{{car.brand}}&lt;/td&gt;\n          &lt;td&gt;{{car.model}}&lt;/td&gt;\n          &lt;td&gt;{{car.color}}&lt;/td&gt;\n          &lt;td&gt;{{car.topSpeed }}&lt;/td&gt;\n        &lt;/tr&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>I have register the route like this:</p>\n\n<pre><code>{ path: 'cars/:carId', component: CardetailsComponent }\n</code></pre>\n\n<p>And this is my <strong>CarDetails.ts</strong> file:</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CarVM } from '../viewmodels/car-vm';\nimport { CarService } from '../services/car.service';\n\n@Component({\n  selector: 'app-cardetails',\n  templateUrl: './cardetails.component.html',\n  styleUrls: ['./cardetails.component.css']\n})\n\nexport class CardetailsComponent implements OnInit {\n\n  car: any;\n  carList: any;\n\n  constructor(private route: ActivatedRoute, private carservice: CarService) { }\n\n  ngOnInit() {\n    this.route.paramMap.subscribe(params =&gt; {\n      this.car = params.get('carId');\n    });\n  }\n  getCarList() {\n    this.carList = new CarVM();\n    this.carservice.getCarById(this.carList.carId).subscribe((res: any) =&gt; {\n      this.carList = res.data;\n      console.log(this.carList)\n    })\n  }\n}   \n</code></pre>\n\n<p>And on my <strong>Cardetails.html</strong> I want to show the selected car like this:</p>\n\n<pre><code>&lt;h2&gt;Car Details&lt;/h2&gt;\n&lt;div *ngIf=\"car\"&gt;\n  &lt;h3&gt;{{ car.brand }}&lt;/h3&gt;\n  &lt;h4&gt;{{ car.model }}&lt;/h4&gt;\n  &lt;p&gt;{{ car.color }}&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The routing is working fine and fetching the cars is working. Now I want to select one car and see the <strong>brand, model, color</strong> on the next page. I use a viewmodel for this:</p>\n\n<pre><code>export class CarVM {\n  CarId: number;\n  Brand: string;\n  Model: string;\n  Color: string;\n  TopSpeed: number;\n}\n</code></pre>\n\n<p>How can I see the selected car on the next page?</p>\n\n<p>I have followed this tutorial:</p>\n\n<p><a href=\"https://angular.io/start/routing\" rel=\"nofollow noreferrer\">https://angular.io/start/routing</a></p>\n"}, {"tags": ["angular", "typescript", "angular-material"], "comments": [{"owner": {"reputation": 13080, "user_id": 9226213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d9b1e59fd7fb8bc106b44b337ce5d83?s=128&d=identicon&r=PG&f=1", "display_name": "G. Tranter", "link": "https://stackoverflow.com/users/9226213/g-tranter"}, "edited": false, "score": 0, "creation_date": 1562765935, "post_id": 56968630, "comment_id": 100480317, "body": "The stackblitz is appreciated, but can you simplify it or at least explain how to use it to see the problem you are describing?"}, {"owner": {"reputation": 1681, "user_id": 5510314, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e5Uxf.png?s=128&g=1", "display_name": "Carlos E", "link": "https://stackoverflow.com/users/5510314/carlos-e"}, "edited": false, "score": 0, "creation_date": 1562770046, "post_id": 56968630, "comment_id": 100482794, "body": "use changeDetection: ChangeDetectionStrategy.OnPush on your @Component"}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1562777000, "post_id": 56968630, "comment_id": 100486622, "body": "just load a json object like navItems and, in subscribe equal this.navItems to the response"}], "answers": [{"tags": [], "owner": {"reputation": 1712, "user_id": 11420760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432eb295e1d61c5ae03aa621b9e3e74b?s=128&d=identicon&r=PG", "display_name": "talhature", "link": "https://stackoverflow.com/users/11420760/talhature"}, "is_accepted": false, "score": 1, "last_activity_date": 1562769537, "creation_date": 1562769537, "answer_id": 56973105, "question_id": 56968630, "link": "https://stackoverflow.com/questions/56968630/dynamically-inject-item-to-mat-menu-on-runtime/56973105#56973105", "title": "Dynamically inject item to Mat Menu on runtime", "body": "<p>Arrays' content change does not trigger Angular's change detection mechanism.</p>\n\n<p>You can either do it by calling detectChanges manually after adding the new item.</p>\n\n<pre><code>this.changeDetector.detectChanges();\n</code></pre>\n\n<p>Check this answer for the details:\n<a href=\"https://stackoverflow.com/a/41298329/11420760\">https://stackoverflow.com/a/41298329/11420760</a></p>\n\n<p>Or you can just reassign your array this will trigger it</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4965180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb1f07d94c3a0038b1261d4c6c5e674?s=128&d=identicon&r=PG&f=1", "display_name": "Sruthish", "link": "https://stackoverflow.com/users/4965180/sruthish"}, "is_accepted": true, "score": 0, "last_activity_date": 1563270851, "creation_date": 1563270851, "answer_id": 57054592, "question_id": 56968630, "link": "https://stackoverflow.com/questions/56968630/dynamically-inject-item-to-mat-menu-on-runtime/57054592#57054592", "title": "Dynamically inject item to Mat Menu on runtime", "body": "<p>Thank you for your response.</p>\n\n<p>My problem is solved. I removed the Child component and I've added it within the parent component and my dynamic data is loaded now.</p>\n\n<p>as in the example I Removed the menu-item component and binded it with in the app component.</p>\n\n<p>Thank you for your time and interest.</p>\n"}], "owner": {"reputation": 43, "user_id": 4965180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb1f07d94c3a0038b1261d4c6c5e674?s=128&d=identicon&r=PG&f=1", "display_name": "Sruthish", "link": "https://stackoverflow.com/users/4965180/sruthish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 57054592, "answer_count": 2, "score": 1, "last_activity_date": 1563270851, "creation_date": 1562754019, "last_edit_date": 1562755467, "question_id": 56968630, "link": "https://stackoverflow.com/questions/56968630/dynamically-inject-item-to-mat-menu-on-runtime", "title": "Dynamically inject item to Mat Menu on runtime", "body": "<p>I'm using the mat menu to display the available options in my project as the breadcrumb. when I'm trying to add a new item, it adds to DB and the array object gets it properly, but the angular mat-menu doesn't update.</p>\n\n<p>This is my reference I'm using:\n<a href=\"https://stackblitz.com/edit/dynamic-nested-topnav-menu-vq6jmd?file=app%2Fapp.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/dynamic-nested-topnav-menu-vq6jmd?file=app%2Fapp.component.ts</a></p>\n\n<p>Can you tell me how to make mat-menu to load data on runtime?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1562754192, "post_id": 56968627, "comment_id": 100473947, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/979256/sorting-an-array-of-javascript-objects-by-property\">Sorting an array of JavaScript objects by property</a>"}], "answers": [{"tags": [], "owner": {"reputation": 795, "user_id": 5096383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtWs1.jpg?s=128&g=1", "display_name": "ghostbbbmt - MSP", "link": "https://stackoverflow.com/users/5096383/ghostbbbmt-msp"}, "is_accepted": true, "score": 3, "last_activity_date": 1562754240, "creation_date": 1562754240, "answer_id": 56968683, "question_id": 56968627, "link": "https://stackoverflow.com/questions/56968627/sort-object-array-by-number-value/56968683#56968683", "title": "Sort object array by number value", "body": "<p>You can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\" rel=\"nofollow noreferrer\">Array.prototype.sort()</a> </p>\n\n<pre><code>tasks.sort((currentValue: Task, nextValue: Task) =&gt; currentValue.priority - nextValue.priority);\n</code></pre>\n"}], "owner": {"reputation": 2143, "user_id": 11397070, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZvsX6QPbv40/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTpb79ZM_-uLtDAEQM-Fq8R-Xokw/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/11397070/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 56968683, "answer_count": 1, "score": 1, "last_activity_date": 1562754240, "creation_date": 1562754011, "question_id": 56968627, "link": "https://stackoverflow.com/questions/56968627/sort-object-array-by-number-value", "title": "Sort object array by number value", "body": "<p>I have an array with this mock:</p>\n\n<pre><code>export class Task {\n  id: number;\n  title: string;\n  state: number;\n  priority: number;\n  describtion: string;\n}\n</code></pre>\n\n<p>This array is filled with multiple entries and each has a priority from 1-5. </p>\n\n<p><strong>How can I sort this array by its priority (asc)?</strong> </p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1562753577, "post_id": 56968487, "comment_id": 100473642, "body": "I&#39;d recommend reading a basic TypeScript tutorial; that&#39;s a typed property declaration. Start with e.g. <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/basic-types.html</a>; your specific question will be answered in the classes section."}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562754359, "post_id": 56968487, "comment_id": 100474019, "body": "An analogous line would be: <code>public someWord : String = &quot;example&quot;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4493, "user_id": 10433835, "user_type": "registered", "profile_image": "https://graph.facebook.com/584735072160572/picture?type=large", "display_name": "anny123", "link": "https://stackoverflow.com/users/10433835/anny123"}, "edited": false, "score": 0, "creation_date": 1562763012, "post_id": 56968612, "comment_id": 100478678, "body": "Thanks for answering,  Can you please also explain why the routes are in private whereas the configuration is in public?"}, {"owner": {"reputation": 1170, "user_id": 3635925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1581427979/picture?type=large", "display_name": "Mykybo", "link": "https://stackoverflow.com/users/3635925/mykybo"}, "reply_to_user": {"reputation": 4493, "user_id": 10433835, "user_type": "registered", "profile_image": "https://graph.facebook.com/584735072160572/picture?type=large", "display_name": "anny123", "link": "https://stackoverflow.com/users/10433835/anny123"}, "edited": false, "score": 1, "creation_date": 1562843790, "post_id": 56968612, "comment_id": 100510389, "body": "You access app here: <code>const app = new App().app;</code> hence it must be public. <code>routes</code> you do not access externally, so it&#39;s a good practice to make them private."}, {"owner": {"reputation": 1170, "user_id": 3635925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1581427979/picture?type=large", "display_name": "Mykybo", "link": "https://stackoverflow.com/users/3635925/mykybo"}, "reply_to_user": {"reputation": 4493, "user_id": 10433835, "user_type": "registered", "profile_image": "https://graph.facebook.com/584735072160572/picture?type=large", "display_name": "anny123", "link": "https://stackoverflow.com/users/10433835/anny123"}, "edited": false, "score": 1, "creation_date": 1562844077, "post_id": 56968612, "comment_id": 100510553, "body": "btw, all class properties are public by default - writing out the public keyword is just being explicit but is in no way required."}], "tags": [], "owner": {"reputation": 1170, "user_id": 3635925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1581427979/picture?type=large", "display_name": "Mykybo", "link": "https://stackoverflow.com/users/3635925/mykybo"}, "is_accepted": true, "score": 1, "last_activity_date": 1562753957, "creation_date": 1562753957, "answer_id": 56968612, "question_id": 56968487, "link": "https://stackoverflow.com/questions/56968487/what-are-public-app-and-express-application/56968612#56968612", "title": "What are public app and express.Application", "body": "<p>First of all, <code>public</code> is not a typescript keyword but js class syntax.</p>\n\n<p>Typescript syntax starts with the <code>:</code> after which follows a type - which can be one of several: typescript interface, typescript data type, object; in this case in attribute called <code>Application</code> in import called <code>express</code>.</p>\n"}], "owner": {"reputation": 4493, "user_id": 10433835, "user_type": "registered", "profile_image": "https://graph.facebook.com/584735072160572/picture?type=large", "display_name": "anny123", "link": "https://stackoverflow.com/users/10433835/anny123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56968612, "answer_count": 1, "score": 1, "last_activity_date": 1562753957, "creation_date": 1562753549, "last_edit_date": 1562753632, "question_id": 56968487, "link": "https://stackoverflow.com/questions/56968487/what-are-public-app-and-express-application", "title": "What are public app and express.Application", "body": "<p>I was learning TypeScript with Node and in that, someone wrote a line that looks like this </p>\n\n<pre><code>  public app: express.Application;\n</code></pre>\n\n<p>In the following context </p>\n\n<pre><code>import express, { Request, Response }  from \"express\";\nimport bodyParser from \"body-parser\";\n\nclass App {\n\n  constructor() {\n    this.app = express();\n    this.config();\n    this.routes();\n  }\n\n  //TODO: What is public app: express.Application\n  public app: express.Application;\n\n  private config(): void {\n    this.app.use(bodyParser.json());\n    this.app.use(bodyParser.urlencoded({ extended: false }));\n  }\n\n  private routes(): void {\n    const router = express.Router();\n    router.get('/', (req: Request, res: Response) =&gt; {\n      res.status(200).send({\n        message: 'Hello World!'\n      })\n    });\n    router.post('/', (req: Request, res: Response) =&gt; {\n      const data = req.body;\n      // query a database and save data\n      res.status(200).send(data);\n    });\n    this.app.use('/', router)\n  }\n}\n\nconst app = new App().app;\nconst port = 4040;\n\napp.listen(port, function() {\n  console.log('Express server listening on port ' + port);\n});\n</code></pre>\n\n<p>I am unable to comprehend what they are doing here and why. Can someone help me in comprehending it?</p>\n"}, {"tags": ["typescript", "firebase-realtime-database", "google-cloud-functions"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1562769149, "post_id": 56968392, "comment_id": 100482275, "body": "How do you trigger this function right now?"}, {"owner": {"reputation": 47, "user_id": 8073870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tJQa5fNk2vU/AAAAAAAAAAI/AAAAAAAAABc/66gsa_Y2TGQ/photo.jpg?sz=128", "display_name": "Philip Teng", "link": "https://stackoverflow.com/users/8073870/philip-teng"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1562770353, "post_id": 56968392, "comment_id": 100482988, "body": "running firebase deploy in the terminal"}, {"owner": {"reputation": 47, "user_id": 8073870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tJQa5fNk2vU/AAAAAAAAAAI/AAAAAAAAABc/66gsa_Y2TGQ/photo.jpg?sz=128", "display_name": "Philip Teng", "link": "https://stackoverflow.com/users/8073870/philip-teng"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1562770445, "post_id": 56968392, "comment_id": 100483039, "body": "i think its triggered when i change the database, is there a way for me to change it directly without making any changes in the database? As i want it to be updated automatically daily."}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1562776161, "post_id": 56968392, "comment_id": 100486232, "body": "Running <code>firebase deploy</code> doesn&#39;t trigger a function. The function you declared is triggered by a change in the value at <code>&#47;Users&#47;{userId}&#47;points</code>. If you instead want to run this periodically have a look at <a href=\"https://firebase.google.com/docs/functions/schedule-functions\" rel=\"nofollow noreferrer\">firebase.google.com/docs/functions/schedule-functions</a>. If you want to call it directly, have a look at <a href=\"https://firebase.google.com/docs/functions/callable\" rel=\"nofollow noreferrer\">firebase.google.com/docs/functions/callable</a> and <a href=\"https://firebase.google.com/docs/functions/http-events\" rel=\"nofollow noreferrer\">firebase.google.com/docs/functions/http-events</a>"}], "owner": {"reputation": 47, "user_id": 8073870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tJQa5fNk2vU/AAAAAAAAAAI/AAAAAAAAABc/66gsa_Y2TGQ/photo.jpg?sz=128", "display_name": "Philip Teng", "link": "https://stackoverflow.com/users/8073870/philip-teng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562769084, "creation_date": 1562753234, "last_edit_date": 1562769084, "question_id": 56968392, "link": "https://stackoverflow.com/questions/56968392/updating-data-from-realtime-database-through-firebase-functions", "title": "Updating data from realtime database through Firebase Functions", "body": "<p>I'm making a user point system for my app using Firebase and I'm currently handling the back end part of my project. I want to update the user points on a daily/monthly basis through firebase functions and right now I'm figuring out how to update the points.</p>\n\n<p>I've tried using the code below but nothing really changes in my database. </p>\n\n<p><img src=\"https://i.stack.imgur.com/srIaM.png\" alt=\"Realtime Database Image\"></p>\n\n<pre><code>import * as functions from 'firebase-functions';\nimport * as admin from 'firebase-admin';\n\nadmin.initializeApp;\n\nexport const onPointsEdit = functions.database\n.ref('/Users/{userId}/points')\n.onWrite((change, context)=&gt;{\n    // Only edit data when it is first created.\n    if (change.before.exists()) {\n        return null;\n    }\n    // Exit when the data is deleted.\n    if (!change.after.exists()) {\n        return null;\n    }\n    // Grab the current value of what was written to the Realtime Database.\n    const original = change.after.val();\n    console.log('PointsChanging', context.params.pushId, original)\n    const newPoints = parseInt(original)/100*10 + parseInt(original)\n    const newPoint = newPoints.toString\n\n    return change.after.ref.set(newPoint);\n})\n</code></pre>\n"}, {"tags": ["typescript", "automated-tests", "e2e-testing", "web-testing", "testcafe"], "comments": [{"owner": {"reputation": 850, "user_id": 7177204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFCDo.jpg?s=128&g=1", "display_name": "Arseniy Rubtsov", "link": "https://stackoverflow.com/users/7177204/arseniy-rubtsov"}, "edited": false, "score": 0, "creation_date": 1562767865, "post_id": 56968195, "comment_id": 100481465, "body": "Could you please provide the text of the error thrown on your side?"}], "answers": [{"tags": [], "owner": {"reputation": 850, "user_id": 7177204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFCDo.jpg?s=128&g=1", "display_name": "Arseniy Rubtsov", "link": "https://stackoverflow.com/users/7177204/arseniy-rubtsov"}, "is_accepted": false, "score": 2, "last_activity_date": 1562768425, "creation_date": 1562768425, "answer_id": 56972774, "question_id": 56968195, "link": "https://stackoverflow.com/questions/56968195/failing-at-logging-http-requests-for-testing-file-download/56972774#56972774", "title": "Failing at Logging HTTP Requests for testing file download", "body": "<p>I noticed that in the provided example, you did not specify the start page for the fixture or test. This might be the cause of the error.</p>\n\n<p>The TestCafe example you mentioned does the following:</p>\n\n<ol>\n<li>Creates a <code>RequestLogger</code> instance, which monitors requests (headers and body) to the same page on which the test starts.</li>\n<li>Clicks the button to initiate the file download.</li>\n<li>Waits for the server's success response.</li>\n<li>Saves the response body to a file.</li>\n</ol>\n\n<p>The <code>url</code> parameter in the filter object corresponds to the page to which the request is sent (<a href=\"https://devexpress.github.io/testcafe/documentation/test-api/intercepting-http-requests/select-requests-to-be-handled-by-the-hook.html#filter-by-parameters\" rel=\"nofollow noreferrer\">documentation</a>) and doesn't have to match the tested page's URL.</p>\n\n<p>You can modify an element on the page using <a href=\"https://devexpress.github.io/testcafe/documentation/test-api/obtaining-data-from-the-client/\" rel=\"nofollow noreferrer\">ClientFunction</a> with the standard Web API. You can take the following code to get started:</p>\n\n<pre><code>import { Selector, ClientFunction } from 'testcafe'\n\nconst link = Selector('a');\n\nconst removeTarget = ClientFunction(() =&gt; {\n    link().removeAttribute('target');\n}, { dependencies: { link } })\n\nfixture`Fixture name`\n    .page`https://your_page.com/`;\n\ntest('Remove target', async t =&gt; {\n    await removeTarget();\n});\n</code></pre>\n"}], "owner": {"reputation": 126, "user_id": 2254131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5OkTr.jpg?s=128&g=1", "display_name": "SimoneB", "link": "https://stackoverflow.com/users/2254131/simoneb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563282061, "creation_date": 1562752633, "last_edit_date": 1563282061, "question_id": 56968195, "link": "https://stackoverflow.com/questions/56968195/failing-at-logging-http-requests-for-testing-file-download", "title": "Failing at Logging HTTP Requests for testing file download", "body": "<p>I am trying to replicate this:</p>\n\n<p><a href=\"https://devexpress.github.io/testcafe/documentation/test-api/intercepting-http-requests/\" rel=\"nofollow noreferrer\">https://devexpress.github.io/testcafe/documentation/test-api/intercepting-http-requests/</a></p>\n\n<p>My target page has <code>target=\"_blank\"</code> is there a way how to change the attribute removing this <code>target</code>?</p>\n\n<p>So the test fails.</p>\n\n<p>It is not very clear what the code in the example does. Does URL have to be of the page where the download link is present?</p>\n\n<pre><code>import { ClientFunction, t, Selector, RequestLogger } from 'testcafe'\nimport * as fs from 'fs';\nimport * as path from 'path';\n...\nconst forInvoice = new ForInvoice()\nconst client = 'STRV s.r.o.'\n\nconst url = urlFor('?/timers/unbilledOverview')\nconst logger = RequestLogger({ url, method: 'post' }, {\nlogResponseHeaders: true,\nlogResponseBody:    true\n});\n\nfixture.only `For Invoicing`\n   .requestHooks(logger);\n\ntest('Verify download of .xls and .pdf', async t =&gt; {\n    await t.useRole(ADMIN_INVOICE)\n    await forInvoice.navigateToForInvoicing()\n    await forInvoice.filterClient(client)\n    await t\n        .click(Selector('a').filter('.sc-mini-icon-file.excel-file'))\n        .expect(logger.contains(r =&gt; r.response.statusCode === 200)).ok();\n\n    const filePath = path.join(__dirname, 'STRV-s-r-o-Attachment');\n\n    console.log(filePath);\n    console.log(logger.requests[0].response.headers);\n\n    fs.writeFileSync(filePath, logger.requests[0].response.body);\n\n})\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "typescript", "promise"], "comments": [{"owner": {"reputation": 717, "user_id": 6237870, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xGWnr.jpg?s=128&g=1", "display_name": "Kryptur", "link": "https://stackoverflow.com/users/6237870/kryptur"}, "edited": false, "score": 1, "creation_date": 1562752736, "post_id": 56968089, "comment_id": 100473148, "body": "When you manually print the <code>languages</code> and <code>bytesOfCode</code> from your Browser Development Console, you should see the values. Because of the asynchronous behavior, the last two lines are executed before the arrays are filled."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1562753381, "post_id": 56968089, "comment_id": 100473562, "body": "Yes, try using <code>async</code>/<code>await</code>, but make sure to <a href=\"https://stackoverflow.com/q/37576685/1048572\">drop the <code>forEach</code></a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11068505"}, "edited": false, "score": 0, "creation_date": 1562762305, "post_id": 56968089, "comment_id": 100478239, "body": "Wow, it actually worked after I ditched the <code>forEach</code> and went with <code>for...of</code>. Incredible, thank you both so much for your time!"}], "owner": {"user_type": "does_not_exist", "display_name": "user11068505"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "closed_date": 1562753269, "answer_count": 0, "score": 0, "last_activity_date": 1562970433, "creation_date": 1562752396, "last_edit_date": 1562970433, "question_id": 56968089, "link": "https://stackoverflow.com/questions/56968089/typescript-array-is-populated-inside-then-but-this-change-is-not-globally-vis", "closed_reason": "Duplicate", "title": "TypeScript array is populated inside then(), but this change is not globally visible", "body": "<p>I am building a segment of application that fetches repository data (languages and bytes of code) from my personal GitHub account. I am defining three arrays for this task:</p>\n\n<ul>\n<li><code>repos</code>: stores names of the repositories</li>\n<li><code>languages</code>: stores languages</li>\n<li><code>bytesOfCode</code>: stores bytes of code written in a given language</li>\n</ul>\n\n<p>Problem is that the last two arrays are populated locally inside <code>then()</code>, but this change is not visible globally. I am relatively new to JavaScript development, so any sort of help is much appreciated.</p>\n\n<p>I have tried declaring a temporary array inside <code>then()</code> and assigning it to global arrays, but to no avail. I was also experimenting with <code>async/await</code> (making <code>await this.octokit.repos.listlanguages</code> inside <code>async (repoName: string)</code>, but I was getting errors about unhandled promises when trying to access <code>data</code>.</p>\n\n<p>This is the code in question:</p>\n\n<pre><code>repos.forEach((repoName: string) =&gt; {\n    this.octokit.repos.listLanguages({\n        repo: repoName,\n        owner: 'PeroAlex'\n    }).then((repoInformation: any) =&gt; {\n        for (let language in repoInformation.data) {\n            if (!lodash.isNil(language)) {\n                if (languages.indexOf(language) &lt; 0) {\n                    languages.push(language);\n                    bytesOfCode.push(repoInformation.data[language]);\n                } else {\n                    bytesOfCode[languages.indexOf(language)] += repoInformation.data[language];\n                }\n            }\n        }\n        console.log(languages);\n        console.log(bytesOfCode);\n    }).catch((err: Error) =&gt; console.log(err.name));\n});\n\nconsole.log(languages);\nconsole.log(bytesOfCode);\n</code></pre>\n\n<p>I can confirm that the inner instances of <code>languages</code> and <code>bytesOfCode</code> arrays get updated correctly, but the outer instances remain empty.</p>\n\n<p>Again, I am not expecting anyone to code instead of me, but I will appreciate if someone can point what I'm missing here. Thank you!</p>\n\n<p><strong>Edit</strong>: the question was erroneously marked duplicate so I cannot provide a proper answer, but will provide the solution as an edit here if anyone else experiences the same issue. The solution is to refrain from using <code>forEach()</code> and instead use a plain <code>for...of</code> type of a loop</p>\n\n<pre><code>for (let repoName of repos) {\n    try {\n        const repoInformation: any = await octokit.repos.listLanguages({\n            repo: repoName,\n            owner: username\n        });\n\n        const languageValues: Array&lt;string&gt; = Object.keys(repoInformation.data);\n\n        languageValues.forEach((language: string) =&gt; {\n        if (!lodash.isNil(language)) {\n            if (languages.indexOf(language) &lt; 0) {\n                languages.push(language);\n                bytesOfCode.push(repoInformation.data[language]);\n            } else\n            bytesOfCode[languages.indexOf(language)] += repoInformation.data[language];\n            }\n        });\n    } catch (e) {\n        console.error(e.message);\n    }\n}\n</code></pre>\n\n<p>Thanks to kind people who were actually helpful and managed to point out my mistake.</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "comments": [{"owner": {"reputation": 15130, "user_id": 1679126, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/82c8608808b8c4c719e9d0c71fb5c366?s=128&d=identicon&r=PG", "display_name": "Adrian Brand", "link": "https://stackoverflow.com/users/1679126/adrian-brand"}, "edited": false, "score": 0, "creation_date": 1562752487, "post_id": 56968015, "comment_id": 100472980, "body": "Use the Angular material modal, it takes care of it for you."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10303250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FDio7Qib8o0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPtRy-mQ2hca-_m3QNv7TfC4UbLfg/mo/photo.jpg?sz=128", "display_name": "Hector Rivas", "link": "https://stackoverflow.com/users/10303250/hector-rivas"}, "edited": false, "score": 0, "creation_date": 1562762349, "post_id": 56968145, "comment_id": 100478268, "body": "Thanks, this is what I was looking for"}], "tags": [], "owner": {"reputation": 5942, "user_id": 757391, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e9ceced45a5080f99c783ef93a8229f?s=128&d=identicon&r=PG", "display_name": "Ludevik", "link": "https://stackoverflow.com/users/757391/ludevik"}, "is_accepted": true, "score": 2, "last_activity_date": 1562752532, "creation_date": 1562752532, "answer_id": 56968145, "question_id": 56968015, "link": "https://stackoverflow.com/questions/56968015/what-is-the-best-practice-to-block-focus-inside-modal-component/56968145#56968145", "title": "What is the best practice to block focus inside Modal Component?", "body": "<p>I suggest to use <a href=\"https://material.angular.io/\" rel=\"nofollow noreferrer\">angular material CDK</a> for this. Specifically <a href=\"https://material.angular.io/cdk/a11y/overview\" rel=\"nofollow noreferrer\"><code>cdkFocusTrap</code></a> which traps focus inside some element.</p>\n\n<p>Example from the docs:</p>\n\n<pre><code>&lt;div class=\"my-inner-dialog-content\" cdkTrapFocus&gt;\n  &lt;!-- Tab and Shift + Tab will not leave this element. --&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10303250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FDio7Qib8o0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPtRy-mQ2hca-_m3QNv7TfC4UbLfg/mo/photo.jpg?sz=128", "display_name": "Hector Rivas", "link": "https://stackoverflow.com/users/10303250/hector-rivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "accepted_answer_id": 56968145, "answer_count": 1, "score": -1, "last_activity_date": 1562752532, "creation_date": 1562752141, "question_id": 56968015, "link": "https://stackoverflow.com/questions/56968015/what-is-the-best-practice-to-block-focus-inside-modal-component", "title": "What is the best practice to block focus inside Modal Component?", "body": "<p>I'm creating an library of components in Angular 8. Right now, I'm creating a modal component that display a window dialog. I want to block focus outside of modal to user only can focus buttons inside of modal with the Tab button. What is the best practice to do this?</p>\n\n<p>The content of this control could be generic. I mean, the user can set a custom content. So one solution could be set <code>tabindex = -1</code> to elements outside modal to block its focus.</p>\n"}, {"tags": ["reactjs", "typescript", "redux-thunk"], "comments": [{"owner": {"reputation": 1069, "user_id": 11702825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5c1d10b63308d00ead17320d48efc8?s=128&d=identicon&r=PG&f=1", "display_name": "octobus", "link": "https://stackoverflow.com/users/11702825/octobus"}, "edited": false, "score": 0, "creation_date": 1562752633, "post_id": 56968010, "comment_id": 100473076, "body": "Hello, when do you want to call the second api, do you want to call it in the componentDidMount or do you want something similar to infinite scrolling."}, {"owner": {"reputation": 1, "user_id": 8487556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496efa42f5560fff05b5de2570f36e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Mehta", "link": "https://stackoverflow.com/users/8487556/kshitij-mehta"}, "reply_to_user": {"reputation": 1069, "user_id": 11702825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5c1d10b63308d00ead17320d48efc8?s=128&d=identicon&r=PG&f=1", "display_name": "octobus", "link": "https://stackoverflow.com/users/11702825/octobus"}, "edited": false, "score": 0, "creation_date": 1562752986, "post_id": 56968010, "comment_id": 100473320, "body": "We have a table to be shown with all the records and we cannot do server pagination due some restrictions. The api responds back with max of 1000 records so, if we have a scenario that total records are more than 1000 we need to make another call and want to load the table only after getting all the records. @octobus"}, {"owner": {"reputation": 1069, "user_id": 11702825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5c1d10b63308d00ead17320d48efc8?s=128&d=identicon&r=PG&f=1", "display_name": "octobus", "link": "https://stackoverflow.com/users/11702825/octobus"}, "edited": false, "score": 0, "creation_date": 1562753248, "post_id": 56968010, "comment_id": 100473475, "body": "How will you understand if there are more than 1000 records? Is it when you get the response from the api or do you know it before you call the api?"}, {"owner": {"reputation": 1, "user_id": 8487556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496efa42f5560fff05b5de2570f36e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Mehta", "link": "https://stackoverflow.com/users/8487556/kshitij-mehta"}, "reply_to_user": {"reputation": 1069, "user_id": 11702825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5c1d10b63308d00ead17320d48efc8?s=128&d=identicon&r=PG&f=1", "display_name": "octobus", "link": "https://stackoverflow.com/users/11702825/octobus"}, "edited": false, "score": 0, "creation_date": 1562753654, "post_id": 56968010, "comment_id": 100473682, "body": "Yes there is a total record field in the response. We&#39;ll check it with that."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8487556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496efa42f5560fff05b5de2570f36e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Mehta", "link": "https://stackoverflow.com/users/8487556/kshitij-mehta"}, "edited": false, "score": 0, "creation_date": 1562754634, "post_id": 56968592, "comment_id": 100474153, "body": "Okay, i&#39;ll try it further and will wait for further discussion."}, {"owner": {"reputation": 1069, "user_id": 11702825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5c1d10b63308d00ead17320d48efc8?s=128&d=identicon&r=PG&f=1", "display_name": "octobus", "link": "https://stackoverflow.com/users/11702825/octobus"}, "reply_to_user": {"reputation": 1, "user_id": 8487556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496efa42f5560fff05b5de2570f36e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Mehta", "link": "https://stackoverflow.com/users/8487556/kshitij-mehta"}, "edited": false, "score": 0, "creation_date": 1562756662, "post_id": 56968592, "comment_id": 100475208, "body": "Also if you fear that this method will cause multiple renders, it won&#39;t be. Because you should dispatch you data to your reducer after calling you last api. So your reducer will be change only once and it won&#39;t re-render multiple times."}], "tags": [], "owner": {"reputation": 1069, "user_id": 11702825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5c1d10b63308d00ead17320d48efc8?s=128&d=identicon&r=PG&f=1", "display_name": "octobus", "link": "https://stackoverflow.com/users/11702825/octobus"}, "is_accepted": false, "score": 0, "last_activity_date": 1562753871, "creation_date": 1562753871, "answer_id": 56968592, "question_id": 56968010, "link": "https://stackoverflow.com/questions/56968010/correct-pattern-for-recursive-api-call-in-react-redux-thunk/56968592#56968592", "title": "Correct pattern for recursive api call in react redux-thunk", "body": "<p>OK, so based on on your comments I would suggest to just call one function in your componentDidMount and call your api inside this function. After getting response you can check if there is more data and call your api again for the other datas. Like you said using <code>.then()</code> will do the work. \nI hope I explained myself clearly, if not please say it so I can describe it with more detail.</p>\n"}], "owner": {"reputation": 1, "user_id": 8487556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496efa42f5560fff05b5de2570f36e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kshitij Mehta", "link": "https://stackoverflow.com/users/8487556/kshitij-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562754545, "creation_date": 1562752118, "last_edit_date": 1562754545, "question_id": 56968010, "link": "https://stackoverflow.com/questions/56968010/correct-pattern-for-recursive-api-call-in-react-redux-thunk", "title": "Correct pattern for recursive api call in react redux-thunk", "body": "<p>We want to make a recursive API call based on the number of records received in the response.\nFor example, if the number of records we get is 10 and the total records are 20, we need to call to the same API again with an updated marker (i.e., we are making calls to next 10 records).</p>\n\n<p>So, what should be the correct pattern to call the API again? Should I do a <code>.then()</code> to the first dispatch(it is inside componentDidMount method) or should I call the API again instead of dispatching the first response.</p>\n\n<p>Though the first option works but it would cause the render method to be called multiple times and I am not sure if that is the correct pattern or not. </p>\n\n<pre><code>componentDidMount() {\n    store.dispatch(getCustomerData('1234',1,10)).then((res) =&gt; {\n     //do some login and call store.dispatch(getCustomerData('1234',2,10)) again\n   })\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "base64", "resize"], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 5108158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xWEI8.jpg?s=128&g=1", "display_name": "Maximillion Bartango", "link": "https://stackoverflow.com/users/5108158/maximillion-bartango"}, "is_accepted": true, "score": 11, "last_activity_date": 1562753938, "last_edit_date": 1562753938, "creation_date": 1562753592, "answer_id": 56968503, "question_id": 56967991, "link": "https://stackoverflow.com/questions/56967991/how-to-resize-base64-image-in-angular/56968503#56968503", "title": "how to resize base64 image in angular", "body": "<p>Add this helper function outside of the given component:</p>\n\n<pre><code>function compressImage(src, newX, newY) {\n  return new Promise((res, rej) =&gt; {\n    const img = new Image();\n    img.src = src;\n    img.onload = () =&gt; {\n      const elem = document.createElement('canvas');\n      elem.width = newX;\n      elem.height = newY;\n      const ctx = elem.getContext('2d');\n      ctx.drawImage(img, 0, 0, newX, newY);\n      const data = ctx.canvas.toDataURL();\n      res(data);\n    }\n    img.onerror = error =&gt; rej(error);\n  })\n}\n</code></pre>\n\n<p>Then call like so:</p>\n\n<pre><code>compressImage(base64, 100, 100).then(compressed =&gt; {\n  this.resizedBase64 = compressed;\n})\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 11499176, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LmTW0HRhs6Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcF2acLpfTXPUx9AqBLmVaXs9AzuA/mo/photo.jpg?sz=128", "display_name": "mahdi aghasi", "link": "https://stackoverflow.com/users/11499176/mahdi-aghasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6592, "favorite_count": 2, "accepted_answer_id": 56968503, "answer_count": 1, "score": 5, "last_activity_date": 1562753938, "creation_date": 1562752074, "question_id": 56967991, "link": "https://stackoverflow.com/questions/56967991/how-to-resize-base64-image-in-angular", "title": "how to resize base64 image in angular", "body": "<p>i try to resize base64 image But I did not find an answer. I tried canvas but did not answer. I do not know why ...\nThis was the code</p>\n\n<pre><code>const canvas = document.createElement('canvas'),\n             ctx = &lt;CanvasRenderingContext2D&gt;canvas.getContext('2d');\n        canvas.width = 100;\n        canvas.height = 100;\n        const img = new Image();\n        img.src = this.SelectedFile.src;\n        ctx.drawImage(img , 0, 0, 100, 100);\n        this.SelectedFile.src = ctx.canvas.toDataURL();\n</code></pre>\n\n<p>Does anyone know any other way or knows what the problem is?</p>\n"}, {"tags": ["typescript", "types", "typescript-typings"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1562755796, "post_id": 56967820, "comment_id": 100474779, "body": "As an aside, the line <code>const ids: string[] = [45, 56];</code> is in error; <code>45</code> and <code>56</code> are not <code>string</code>s."}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 5320409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397710b1e3ccee7252798301d54a5fbe?s=128&d=identicon&r=PG", "display_name": "ScreamZ", "link": "https://stackoverflow.com/users/5320409/screamz"}, "edited": false, "score": 0, "creation_date": 1562761049, "post_id": 56967865, "comment_id": 100477579, "body": "Wow! Wonderful, I didn&#39;t known that as const existed but it worked, it&#39;s used to say that this array is immutable ?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 270, "user_id": 5320409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397710b1e3ccee7252798301d54a5fbe?s=128&d=identicon&r=PG", "display_name": "ScreamZ", "link": "https://stackoverflow.com/users/5320409/screamz"}, "edited": false, "score": 1, "creation_date": 1562761185, "post_id": 56967865, "comment_id": 100477635, "body": "@ScreamZ yes it makes the array readonly, and as a side effect of this tuples and literal types are preserved (you get <code>ids</code> types as <code>[45, 56]</code> instead of <code>number[]</code>)"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 5, "last_activity_date": 1562751724, "creation_date": 1562751724, "answer_id": 56967865, "question_id": 56967820, "link": "https://stackoverflow.com/questions/56967820/typescript-restrict-keys-to-array-elements/56967865#56967865", "title": "Typescript, restrict keys to array elements", "body": "<p>You can use the <code>Record</code> mapped type. You also need to use a <code>const</code> assertion to capture the literal types of the array elements:</p>\n\n<pre><code>const ids = [45, 56] as const;\n\nconst obj: Record&lt;typeof ids[number], string&gt; = {\n    45: \"HELLO\",\n    56: \"WORLD\",\n};\nconst obj2: Record&lt;typeof ids[number], string&gt; = {\n    45: \"HELLO\",\n    56: \"WORLD\",\n    57: \"WORLD\",  // error\n};\n</code></pre>\n"}], "owner": {"reputation": 270, "user_id": 5320409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397710b1e3ccee7252798301d54a5fbe?s=128&d=identicon&r=PG", "display_name": "ScreamZ", "link": "https://stackoverflow.com/users/5320409/screamz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 1, "accepted_answer_id": 56967865, "answer_count": 1, "score": 3, "last_activity_date": 1562760898, "creation_date": 1562751539, "last_edit_date": 1562760898, "question_id": 56967820, "link": "https://stackoverflow.com/questions/56967820/typescript-restrict-keys-to-array-elements", "title": "Typescript, restrict keys to array elements", "body": "<p><strong>Edited</strong>: Change ids type</p>\n\n<p>I have an array with the following values </p>\n\n<pre><code>const ids: number[] = [45, 56];\n\nconst obj: any = {\n  45: \"HELLO\",\n  56: \"WORLD\",\n};\n</code></pre>\n\n<p>I would like to type the current <code>any</code> type of my object to restrict it to my <code>ids</code> array values.</p>\n\n<p>I tried with lookup type but I didn't succeed\u2026</p>\n\n<p>Any idea ?</p>\n\n<p>Regards</p>\n"}, {"tags": ["typescript", "typescript-typings", "type-declaration"], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1562751192, "post_id": 56967678, "comment_id": 100472283, "body": "That gives me the error &quot;A &#39;declare&#39; modifier cannot be used in an already ambient context&quot; on the second declare."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1562751605, "post_id": 56967678, "comment_id": 100472508, "body": "@Fly wops forgot to delete the extra <code>declare</code>. Fixed"}, {"owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1562751792, "post_id": 56967678, "comment_id": 100472607, "body": "Ah, I see. The compiler now complains about my declaration of user, &quot;All declarations of &#39;user&#39; must have identical modifiers.&quot;. I don&#39;t see where else I would have declared user so that I could have varying modifiers, though. Any idea why this is?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1562751858, "post_id": 56967678, "comment_id": 100472639, "body": "That should work, unless <code>user</code> is also defined in the <code>express</code> version"}, {"owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1562751908, "post_id": 56967678, "comment_id": 100472664, "body": "Ah, it&#39;s also defined by the passport library. However, it should be defined as &quot;any&quot; (which is why I want to add my own type on top of it)"}, {"owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1562751983, "post_id": 56967678, "comment_id": 100472705, "body": "Ah, got it, I was missing an optional parameter (user?: MyUser). It seems to work now, thank you!"}, {"owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "edited": false, "score": 0, "creation_date": 1563284582, "post_id": 56967678, "comment_id": 100642930, "body": "Nevermind, it actually still complains that it was defined differently in express..."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1562751591, "last_edit_date": 1562751591, "creation_date": 1562751085, "answer_id": 56967678, "question_id": 56967484, "link": "https://stackoverflow.com/questions/56967484/type-properties-of-merged-interface-declaration/56967678#56967678", "title": "Type properties of merged interface declaration", "body": "<p>If you add an import, your file is a module and thus any definition is local (without imports the file is a legacy script file and everything in it is global).</p>\n\n<p>To put the interface in the global scope and use imports use <code>declare global</code></p>\n\n<pre><code>import MyUser from \"../../src/types/MyUser\";\ndeclare global {\n    namespace Express {\n        interface Request {\n           user: MyUser;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 2595546, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3f1ce15f8f7a099a8af69a2a97f58137?s=128&d=identicon&r=PG", "display_name": "Fly", "link": "https://stackoverflow.com/users/2595546/fly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56967678, "answer_count": 1, "score": 0, "last_activity_date": 1562751591, "creation_date": 1562750500, "question_id": 56967484, "link": "https://stackoverflow.com/questions/56967484/type-properties-of-merged-interface-declaration", "title": "Type properties of merged interface declaration", "body": "<p>I'm having trouble extending the interfaces of third-party libraries globally, as importing other files in a root-level will cause the declaration file to not be global anymore.</p>\n\n<p>Here's an example:</p>\n\n<p>I'd like to add a property \"user\" of type \"MyUser\" on Express's Request object.\nIf it was of type MyUser, I could simply do the following:</p>\n\n<pre><code>declare namespace Express {\n  interface Request {\n    user: string;\n  }\n}\n</code></pre>\n\n<p>and then somewhere else:</p>\n\n<pre><code>...\nfunction(..., req: Request, ...) {\n  ...\n  req.user; //its a string\n  ...\n}\n</code></pre>\n\n<p>and everything would work perfectly. However, doing the following does not work:</p>\n\n<pre><code>import MyUser from \"../../src/types/MyUser\";\ndeclare namespace Express {\n  interface Request {\n    user: MyUser;\n  }\n}\n</code></pre>\n\n<p>because I now have a top-level import. Is there no way to avoid it? What's the point of being able to merge declarations, if you can't even use your own types within them?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 1, "creation_date": 1562750582, "post_id": 56967483, "comment_id": 100471865, "body": "Your current code is not doing anything at all in the <code>if</code>s - you only have orphaned expressions there, not assignments"}, {"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "reply_to_user": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1562750633, "post_id": 56967483, "comment_id": 100471910, "body": "Is that the official term @CertainPerformance? I&#39;ve heard that used before, but didn&#39;t really know what it meant."}, {"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "reply_to_user": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 1, "creation_date": 1562750702, "post_id": 56967483, "comment_id": 100471966, "body": "@JackBashford No (at least I don&#39;t think so), it&#39;s just the phrase I always use for it that gets the point across concisely, there may be a more official / better one"}, {"owner": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "edited": false, "score": 0, "creation_date": 1562750761, "post_id": 56967483, "comment_id": 100471992, "body": "I use this func for converttime, and my co-worker comment that I should use Object.keys(arr) instead, but I dont know how to use this func (Object.keys(arr))"}, {"owner": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "edited": false, "score": 0, "creation_date": 1562751075, "post_id": 56967483, "comment_id": 100472188, "body": "is there any different way that can I write to remove that hard code using object.keys(arr)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "edited": false, "score": 0, "creation_date": 1562751720, "post_id": 56967706, "comment_id": 100472570, "body": "padStart does not exist on type string"}, {"owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "reply_to_user": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "edited": false, "score": 0, "creation_date": 1562751773, "post_id": 56967706, "comment_id": 100472595, "body": "Internet Explorer, by any chance?"}], "tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": false, "score": 1, "last_activity_date": 1562751162, "creation_date": 1562751162, "answer_id": 56967706, "question_id": 56967483, "link": "https://stackoverflow.com/questions/56967483/how-can-i-optimize-this-func-and-remove-code-line/56967706#56967706", "title": "How can I optimize this func and remove code line?", "body": "<p>There's a function for padding strings to required length: String.prototype.padStart. Just do</p>\n\n<pre><code>    return {\n      days: Math.floor(diffTime / (1000 * 60 * 60 * 24)).toString().padStart(2, '0'),\n      hours: Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0'),\n      minutes: Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0'),\n      second: Math.floor((diffTime % (1000 *60) /(1000))).toString().padStart(2, '0'),\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "edited": false, "score": 0, "creation_date": 1562753069, "post_id": 56967785, "comment_id": 100473365, "body": "timer[key] = &#39;0${timer[key]}&#39;; I use that one instead  timer[key].toString() === &#39;0&#39; + timer[key];  no need toString ?? both are work!"}, {"owner": {"reputation": 522, "user_id": 8785227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRBjU.jpg?s=128&g=1", "display_name": "Gilsido", "link": "https://stackoverflow.com/users/8785227/gilsido"}, "reply_to_user": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "edited": false, "score": 0, "creation_date": 1562754694, "post_id": 56967785, "comment_id": 100474182, "body": "The fact that the second option works confuses me, <code>timer[key] = &#39;0${timer[key]}&#39;;</code> works but it makes the value associated to that key a string, and <code>Math.floor()</code> returns a number, so you may have an array with both numbers and string in it which is not advisable, I would go with only string (<code>Object.keys(timer).forEach(key =&gt; timer[key] = timer[key] &gt; 9 ? &#39;${timer[key]}&#39; : &#39;0${timer[key]}&#39;);</code>)"}], "tags": [], "owner": {"reputation": 522, "user_id": 8785227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRBjU.jpg?s=128&g=1", "display_name": "Gilsido", "link": "https://stackoverflow.com/users/8785227/gilsido"}, "is_accepted": true, "score": 0, "last_activity_date": 1562751893, "last_edit_date": 1562751893, "creation_date": 1562751421, "answer_id": 56967785, "question_id": 56967483, "link": "https://stackoverflow.com/questions/56967483/how-can-i-optimize-this-func-and-remove-code-line/56967785#56967785", "title": "How can I optimize this func and remove code line?", "body": "<p>I think the use of <code>Object.keys()</code> her would be:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>convertTime(diffTime): object {\n    let timer = {\n      days: Math.floor(diffTime / (1000 * 60 * 60 * 24)),\n      hours: Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\n      minutes: Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60)),\n      second: Math.floor((diffTime % (1000 *60) /(1000))),\n    }\n    Object.keys(timer).forEach(key =&gt; {\n        if (timer[key] &lt;= 9) {\n            timer[key].toString() === '0' + timer[key];\n        }\n    });\n    return timer;\n}\n</code></pre>\n\n<p>(assuming these <code>if</code>s do anything, which I doubt as @CertainPerformance commented, and I don't think that's the best solution here, @mbojko's answer is better, but it's what your colleague is looking for)</p>\n"}], "owner": {"reputation": 39, "user_id": 10948085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-avTNCl0dPGA/AAAAAAAAAAI/AAAAAAAAAAA/c4pApeepCsM/photo.jpg?sz=128", "display_name": "Phu Tran V 2", "link": "https://stackoverflow.com/users/10948085/phu-tran-v-2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56967785, "answer_count": 2, "score": 0, "last_activity_date": 1562751893, "creation_date": 1562750494, "last_edit_date": 1562750589, "question_id": 56967483, "link": "https://stackoverflow.com/questions/56967483/how-can-i-optimize-this-func-and-remove-code-line", "title": "How can I optimize this func and remove code line?", "body": "<p>I have this func and how can I optimize this func using Object.keys(arr) to remove code line or get an optimization?</p>\n\n<pre><code>convertTime(diffTime): object {\n    let timer = {\n      days: Math.floor(diffTime / (1000 * 60 * 60 * 24)),\n      hours: Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\n      minutes: Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60)),\n      second: Math.floor((diffTime % (1000 *60) /(1000))),\n    }\n    if (timer.days &lt;= 9) {\n      timer.days.toString() === '0' + timer.days;\n    }\n    if (timer.hours &lt;= 9) {\n      timer.hours.toString() === '0' + timer.hours;\n    }\n    if (timer.minutes &lt;= 9) {\n      timer.minutes.toString() === '0' + timer.minutes;\n    }\n    if (timer.second &lt;= 9) {\n      timer.second.toString() === '0' + timer.second;\n    }\n    return timer;\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "npm"], "comments": [{"owner": {"reputation": 4672, "user_id": 7404235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e0a64e8ce79b73f996e4cfe6b16cb3?s=128&d=identicon&r=PG", "display_name": "enno.void", "link": "https://stackoverflow.com/users/7404235/enno-void"}, "edited": false, "score": 0, "creation_date": 1562750670, "post_id": 56967439, "comment_id": 100471943, "body": "can u show the html? maybe a missing closing tag or something"}, {"owner": {"reputation": 43, "user_id": 9253572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8531d45d2ff96205d855872a1c143eca?s=128&d=identicon&r=PG&f=1", "display_name": "chubbseN", "link": "https://stackoverflow.com/users/9253572/chubbsen"}, "reply_to_user": {"reputation": 4672, "user_id": 7404235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e0a64e8ce79b73f996e4cfe6b16cb3?s=128&d=identicon&r=PG", "display_name": "enno.void", "link": "https://stackoverflow.com/users/7404235/enno-void"}, "edited": false, "score": 0, "creation_date": 1562750803, "post_id": 56967439, "comment_id": 100472020, "body": "It&#39;s quite a long file and I checked it multiple times, it is correct. Also, wouldn&#39;t that produce an error while compiling without production? It did until now at least..."}, {"owner": {"reputation": 3975, "user_id": 6183113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248564385154034/picture?type=large", "display_name": "Chanaka Weerasinghe", "link": "https://stackoverflow.com/users/6183113/chanaka-weerasinghe"}, "edited": false, "score": 0, "creation_date": 1562752273, "post_id": 56967439, "comment_id": 100472865, "body": "can you send all errors"}, {"owner": {"reputation": 43, "user_id": 9253572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8531d45d2ff96205d855872a1c143eca?s=128&d=identicon&r=PG&f=1", "display_name": "chubbseN", "link": "https://stackoverflow.com/users/9253572/chubbsen"}, "edited": false, "score": 0, "creation_date": 1562752427, "post_id": 56967439, "comment_id": 100472951, "body": "What more errors do you mean? Thats all the errors I get, even if I run in --verbose mode"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 9253572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8531d45d2ff96205d855872a1c143eca?s=128&d=identicon&r=PG&f=1", "display_name": "chubbseN", "link": "https://stackoverflow.com/users/9253572/chubbsen"}, "is_accepted": true, "score": 0, "last_activity_date": 1562758710, "creation_date": 1562758710, "answer_id": 56969927, "question_id": 56967439, "link": "https://stackoverflow.com/questions/56967439/ionic-build-fails-with-subprocess-error-only-when-using-prod-flag/56969927#56969927", "title": "Ionic build fails with &quot;Subprocess Error&quot; only when using --prod flag", "body": "<p>So, as it stands, a simple restart fixed the error. I don't know how or why, but its gone</p>\n"}], "owner": {"reputation": 43, "user_id": 9253572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8531d45d2ff96205d855872a1c143eca?s=128&d=identicon&r=PG&f=1", "display_name": "chubbseN", "link": "https://stackoverflow.com/users/9253572/chubbsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 56969927, "answer_count": 1, "score": 1, "last_activity_date": 1562758710, "creation_date": 1562750372, "question_id": 56967439, "link": "https://stackoverflow.com/questions/56967439/ionic-build-fails-with-subprocess-error-only-when-using-prod-flag", "title": "Ionic build fails with &quot;Subprocess Error&quot; only when using --prod flag", "body": "<p>Trying to build my ionic 4 app for production. It worked fine until now, suddenly a commit that only changed some html around made our builds fail.</p>\n\n<p>Error msg:</p>\n\n<pre><code>  ionic Error\n  ionic     at new SubprocessError (/var/lib/jenkins/workspace/myProjectPath/@ionic/utils-subprocess/dist/index.js:40:23)\n  ionic     at ChildProcess.p.on (/var/lib/jenkins/workspace/myProjectPath/@ionic/utils-subprocess/dist/index.js:128:27)\n  ionic     at ChildProcess.emit (events.js:198:13)\n  ionic     at maybeClose (internal/child_process.js:982:16)\n  ionic     at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5) +1m\n</code></pre>\n\n<p>ionic info</p>\n\n<pre><code>Ionic:\n\n   ionic (Ionic CLI)             : 4.12.0 (/var/lib/jenkins/workspace/myProjectPath/ionic)\n   Ionic Framework               : @ionic/angular 4.6.1\n   @angular-devkit/build-angular : 0.13.9\n   @angular-devkit/schematics    : 7.3.9\n   @angular/cli                  : 7.3.9\n   @ionic/angular-toolkit        : 1.5.1\n\nCordova:\n\n   cordova (Cordova CLI) : 9.0.0 (cordova-lib@9.0.1)\n   Cordova Platforms     : not available\n   Cordova Plugins       : not available\n\nSystem:\n\n   NodeJS : v10.16.0 (/usr/bin/node)\n   npm    : 6.9.0\n   OS     : Linux 3.10\n</code></pre>\n\n<p>Command that doesnt work:</p>\n\n<pre><code>ionic build --prod\n</code></pre>\n\n<p>Commands that do work and build fine:</p>\n\n<pre><code>ionic build\nionic build --aot --minifyjs --minifycss\n</code></pre>\n\n<p>npm update/npm doctor didn't resolve my problem. I heard that removing cordova helps sometimes, didn't work for me.\nLet me know if you need more information.</p>\n"}, {"tags": ["javascript", "typescript", "vue.js"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9981164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tsTEHsU_rio/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3uQh_bKtmA4UpYgjGiy9VpOiWY4g/mo/photo.jpg?sz=128", "display_name": "zx L", "link": "https://stackoverflow.com/users/9981164/zx-l"}, "edited": false, "score": 0, "creation_date": 1562815749, "post_id": 56968581, "comment_id": 100498010, "body": "But I only want to use <code>refreh</code> in the component which be mixed, this way will pollute the whole Vue instance."}, {"owner": {"reputation": 7977, "user_id": 1030527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/goMfp.jpg?s=128&g=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/1030527/bernie"}, "reply_to_user": {"reputation": 21, "user_id": 9981164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tsTEHsU_rio/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3uQh_bKtmA4UpYgjGiy9VpOiWY4g/mo/photo.jpg?sz=128", "display_name": "zx L", "link": "https://stackoverflow.com/users/9981164/zx-l"}, "edited": false, "score": 0, "creation_date": 1562828426, "post_id": 56968581, "comment_id": 100501948, "body": "I see. Unfortunately I don&#39;t know about declaration files for single components."}], "tags": [], "owner": {"reputation": 7977, "user_id": 1030527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/goMfp.jpg?s=128&g=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/1030527/bernie"}, "is_accepted": false, "score": 0, "last_activity_date": 1562753826, "creation_date": 1562753826, "answer_id": 56968581, "question_id": 56967336, "link": "https://stackoverflow.com/questions/56967336/how-to-declare-a-js-mixin-for-vue/56968581#56968581", "title": "How to declare a JS mixin for vue?", "body": "<p>This is documented in <a href=\"https://vuejs.org/v2/guide/typescript.html#Augmenting-Types-for-Use-with-Plugins\" rel=\"nofollow noreferrer\">\"Augmenting Types for Use with Plugins\"</a>.</p>\n\n<p>Put this in a <code>.d.ts</code> file in your project to add a <code>refresh()</code> mixin method to components:</p>\n\n<pre><code>// 1. Make sure to import 'vue' before declaring augmented types\nimport Vue from 'vue'\n\n// 2. Specify a file with the types you want to augment\n//    Vue has the constructor type in types/vue.d.ts\ndeclare module 'vue/types/vue' {\n  // 3. Declare augmentation for Vue\n  interface Vue {\n    refresh():  void;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6244, "user_id": 2373138, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e6b4a3f09d0d8c0fb07cbe755f8a230?s=128&d=identicon&r=PG", "display_name": "kelunik", "link": "https://stackoverflow.com/users/2373138/kelunik"}, "is_accepted": false, "score": 2, "last_activity_date": 1584122403, "creation_date": 1584122403, "answer_id": 60675250, "question_id": 56967336, "link": "https://stackoverflow.com/questions/56967336/how-to-declare-a-js-mixin-for-vue/60675250#60675250", "title": "How to declare a JS mixin for vue?", "body": "<p>You can augment a third party mixin with creating a file like <code>vuelidate-error-extractor.d.ts</code>:</p>\n\n<pre><code>declare module 'vuelidate-error-extractor' {\n   import { ValidationRule } from 'vuelidate/lib/validators';\n\n   // eslint-disable-next-line @typescript-eslint/class-name-casing\n   export class singleErrorExtractorMixin extends Vue {\n      readonly events: any;\n\n      readonly name: string;\n\n      readonly isValid: boolean;\n\n      readonly hasErrors: boolean;\n\n      readonly preferredValidator: ValidationRule;\n   }\n}\n</code></pre>\n\n<p>This augments <a href=\"https://github.com/dobromir-hristov/vuelidate-error-extractor/blob/9590f9b8c7ba28338276a68a2545c5e798666113/src/single-error-extractor-mixin.js\" rel=\"nofollow noreferrer\">this JS file</a>, but in an incomplete manner.</p>\n"}], "owner": {"reputation": 21, "user_id": 9981164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tsTEHsU_rio/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3uQh_bKtmA4UpYgjGiy9VpOiWY4g/mo/photo.jpg?sz=128", "display_name": "zx L", "link": "https://stackoverflow.com/users/9981164/zx-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1584122403, "creation_date": 1562749977, "question_id": 56967336, "link": "https://stackoverflow.com/questions/56967336/how-to-declare-a-js-mixin-for-vue", "title": "How to declare a JS mixin for vue?", "body": "<p>I'm writting a vue project with typescript and I want to use a mixin from thrid-part library which write by javascript, how to write a <code>.d.ts</code> to make ts can find function define in the mixin?</p>\n\n<p>I tried this way and it not working:</p>\n\n<pre><code>// common.d.ts\ndeclare module 'thrid-part-lib' {\n    import { VueClass } from 'vue-class-component/lib/declarations';\n\n    export interface SomeMixin&lt;T&gt; extends VueClass&lt;T&gt; {\n        refresh(): Promise&lt;void&gt;;\n    }\n}\n</code></pre>\n\n<pre><code>// index.ts\nimport { Component, Mixins } from 'vue-property-decorator';\nimport { SomeMixin } from 'thrid-part-lib';\n\n@Component\nexport default class Index extends Mixins(SomeMixin) {\n    public foo() {\n        this.refresh(); // 'refresh' is not define.\n    }\n}\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 8852310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebfdb8a9b82ca96edc12b9e379e29c?s=128&d=identicon&r=PG&f=1", "display_name": "not a Programmer", "link": "https://stackoverflow.com/users/8852310/not-a-programmer"}, "edited": false, "score": 0, "creation_date": 1562751034, "post_id": 56967453, "comment_id": 100472168, "body": "So <code>rootDir</code> is the directory with typescript files and <code>outDir</code> is the directory with output javascript files, right? And, one more question, you are using relative path for the <code>rootDir</code> and <code>outDir</code>. This will be relative to the tsconfig.json file? And the last one ;) What means <code>--project</code>?"}, {"owner": {"reputation": 155, "user_id": 8852310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebfdb8a9b82ca96edc12b9e379e29c?s=128&d=identicon&r=PG&f=1", "display_name": "not a Programmer", "link": "https://stackoverflow.com/users/8852310/not-a-programmer"}, "edited": false, "score": 0, "creation_date": 1562751117, "post_id": 56967453, "comment_id": 100472220, "body": "Why we need to use both <code>&quot;rootDir&quot;: &quot;ts&quot;</code> and <code>&quot;include&quot;: [&quot;ts&#47;**&#47;*.ts&quot;]</code>?"}, {"owner": {"reputation": 642, "user_id": 1401876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b024613447b5c4d7df9cd977a3f17b47?s=128&d=identicon&r=PG", "display_name": "Marcus Cemes", "link": "https://stackoverflow.com/users/1401876/marcus-cemes"}, "reply_to_user": {"reputation": 155, "user_id": 8852310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebfdb8a9b82ca96edc12b9e379e29c?s=128&d=identicon&r=PG&f=1", "display_name": "not a Programmer", "link": "https://stackoverflow.com/users/8852310/not-a-programmer"}, "edited": false, "score": 0, "creation_date": 1562751419, "post_id": 56967453, "comment_id": 100472416, "body": "<code>rootDir</code> will set the relative directory structure for <code>outDir</code>, <code>include</code> lets you specify exactly what gets compiled. This is specified in the docs."}, {"owner": {"reputation": 642, "user_id": 1401876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b024613447b5c4d7df9cd977a3f17b47?s=128&d=identicon&r=PG", "display_name": "Marcus Cemes", "link": "https://stackoverflow.com/users/1401876/marcus-cemes"}, "reply_to_user": {"reputation": 155, "user_id": 8852310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebfdb8a9b82ca96edc12b9e379e29c?s=128&d=identicon&r=PG&f=1", "display_name": "not a Programmer", "link": "https://stackoverflow.com/users/8852310/not-a-programmer"}, "edited": false, "score": 0, "creation_date": 1562751497, "post_id": 56967453, "comment_id": 100472456, "body": "Yes, paths are relative to <code>tsconfig.json</code> which should be in the project route. <code>--project</code> lets you explicitly specify the <code>tsconfig.json</code> file, although it is probably not necessary when using the standard filename."}], "tags": [], "owner": {"reputation": 642, "user_id": 1401876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b024613447b5c4d7df9cd977a3f17b47?s=128&d=identicon&r=PG", "display_name": "Marcus Cemes", "link": "https://stackoverflow.com/users/1401876/marcus-cemes"}, "is_accepted": false, "score": 0, "last_activity_date": 1562750411, "creation_date": 1562750411, "answer_id": 56967453, "question_id": 56967223, "link": "https://stackoverflow.com/questions/56967223/config-typescript-compiler/56967453#56967453", "title": "Config Typescript compiler", "body": "<p>Try something like the following:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"outDir\": \"js\",\n    \"rootDir\": \"ts\"\n  },\n  \"include\": [\"ts/**/*.ts\"],\n  \"exclude\": [\"node_modules/**\"],\n  \"compileOnSave\": true\n}\n</code></pre>\n\n<p>Then run typescript in watch mode with <code>tsc --watch --project tsconfig.json</code> to compile automatically on changes</p>\n"}, {"tags": [], "owner": {"reputation": 7014, "user_id": 1501613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a917ec0fd44810a1c18dac1822198994?s=128&d=identicon&r=PG&f=1", "display_name": "cYrixmorten", "link": "https://stackoverflow.com/users/1501613/cyrixmorten"}, "is_accepted": false, "score": 0, "last_activity_date": 1562750492, "creation_date": 1562750492, "answer_id": 56967482, "question_id": 56967223, "link": "https://stackoverflow.com/questions/56967223/config-typescript-compiler/56967482#56967482", "title": "Config Typescript compiler", "body": "<p><a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/tsconfig-json.html</a></p>\n\n<p>Look for 'outDir' and 'compileOnSave'.</p>\n\n<p>This will create individual js files for each ts file. </p>\n\n<p>To merge the compiled js into a single app.js file you may want to take a look at webpack. </p>\n"}], "owner": {"reputation": 155, "user_id": 8852310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebfdb8a9b82ca96edc12b9e379e29c?s=128&d=identicon&r=PG&f=1", "display_name": "not a Programmer", "link": "https://stackoverflow.com/users/8852310/not-a-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562750492, "creation_date": 1562749581, "question_id": 56967223, "link": "https://stackoverflow.com/questions/56967223/config-typescript-compiler", "title": "Config Typescript compiler", "body": "<p>I'm pretty new to Typescript. Here is my project structure:</p>\n\n<pre><code>rootDir\n   js\n      // js files here...\n   ts\n      file1.ts\n      file2.ts\n      ...\n   tsconfig.json\n</code></pre>\n\n<p>What I want is to compile <strong>on save</strong> typescript files in the <code>ts</code> directory to the <code>app.js</code> file and put it into the <code>js</code> directory.</p>\n\n<p>P.S. I'm using Typescript 3.5.3</p>\n"}, {"tags": ["arrays", "reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 6584985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3cmVD.jpg?s=128&g=1", "display_name": "Tare", "link": "https://stackoverflow.com/users/6584985/tare"}, "edited": false, "score": 0, "creation_date": 1562750395, "post_id": 56967214, "comment_id": 100471746, "body": "It works, but I don&#39;t seem to understand why. Can you add an example where the state would have another variable, say a string? would it be something like <code>useState&lt;{myTableData: IOptions[], myString: string}&gt;({myTableData, &quot;a string&quot;});</code> ?"}, {"owner": {"reputation": 4173, "user_id": 7428434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1348497625208827/picture?type=large", "display_name": "Shanon Jackson", "link": "https://stackoverflow.com/users/7428434/shanon-jackson"}, "reply_to_user": {"reputation": 382, "user_id": 6584985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3cmVD.jpg?s=128&g=1", "display_name": "Tare", "link": "https://stackoverflow.com/users/6584985/tare"}, "edited": false, "score": 1, "creation_date": 1562755258, "post_id": 56967214, "comment_id": 100474498, "body": "<code>useState&lt;{myTableData: IOptions[], otherKey: string}&gt;({myTableData, otherKey: &quot;hello&quot;});</code>"}], "tags": [], "owner": {"reputation": 4173, "user_id": 7428434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1348497625208827/picture?type=large", "display_name": "Shanon Jackson", "link": "https://stackoverflow.com/users/7428434/shanon-jackson"}, "is_accepted": true, "score": 2, "last_activity_date": 1562755339, "last_edit_date": 1562755339, "creation_date": 1562749545, "answer_id": 56967214, "question_id": 56967158, "link": "https://stackoverflow.com/questions/56967158/why-can-an-array-not-be-used-in-usestate-where-the-generic-is-of-the-same-type-a/56967214#56967214", "title": "Why can an Array not be used in useState where the generic is of the same type as the array", "body": "<pre><code>useState&lt;{myTableData: IOptions[]}&gt;({myTableData});\n</code></pre>\n\n<p>You're telling typescript the state is an array of IOptions and then giving it an object, let me know if this helps</p>\n"}, {"tags": [], "owner": {"reputation": 207256, "user_id": 5928186, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QKbVi.jpg?s=128&g=1", "display_name": "Shubham Khatri", "link": "https://stackoverflow.com/users/5928186/shubham-khatri"}, "is_accepted": false, "score": 2, "last_activity_date": 1562749715, "creation_date": 1562749715, "answer_id": 56967268, "question_id": 56967158, "link": "https://stackoverflow.com/questions/56967158/why-can-an-array-not-be-used-in-usestate-where-the-generic-is-of-the-same-type-a/56967268#56967268", "title": "Why can an Array not be used in useState where the generic is of the same type as the array", "body": "<p>You are defining the type to be an array of IOptions, whereas you are setting the state to be an object with key as <code>myTableData</code></p>\n\n<p>You can either choose to just have array in the state like</p>\n\n<pre><code>let [state, setState] = React.useState&lt;IOptions[]&gt;(myTableData);\n</code></pre>\n\n<p>or change the type to be an object</p>\n\n<pre><code>interface DataObj = {\n    myTableData: IOptions[]\n}\nlet [state, setState] = React.useState&lt;DataObj&gt;({\n    myTableData\n});\n</code></pre>\n"}], "owner": {"reputation": 382, "user_id": 6584985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3cmVD.jpg?s=128&g=1", "display_name": "Tare", "link": "https://stackoverflow.com/users/6584985/tare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 1, "accepted_answer_id": 56967214, "answer_count": 2, "score": 0, "last_activity_date": 1562755339, "creation_date": 1562749348, "question_id": 56967158, "link": "https://stackoverflow.com/questions/56967158/why-can-an-array-not-be-used-in-usestate-where-the-generic-is-of-the-same-type-a", "title": "Why can an Array not be used in useState where the generic is of the same type as the array", "body": "<p>I have defined a data type </p>\n\n<pre><code>interface IOptions {\n  name: string\n  value: any\n  type: string\n}\n</code></pre>\n\n<p>And created an array of that type</p>\n\n<pre><code>let myTableData: IOptions[] = [\n    {name: \"A string\", value: \"string to display\", type: \"string\"},\n    {name: \"A number\", value: 42, type: \"number\"},\n    {name: \"A combobox Enum style\", value: \"1\", type: \"enum\"},\n    {name: \"A bool flag\", value: true, type: \"bool\"},\n];\n</code></pre>\n\n<p>NowI want to define a state which uses this data type and is typed</p>\n\n<pre><code>let [state, setState] = React.useState&lt;IOptions[]&gt;({\n  myTableData\n});\n</code></pre>\n\n<p>However this gives me the error message</p>\n\n<blockquote>\n  <p>Argument of type '{ myTableData: IOptions[]; }' is not assignable to parameter of type 'IOptions[] | (() => IOptions[])'.\n    Object literal may only specify known properties, and 'myTableData' does not exist in type 'IOptions[] | (() => IOptions[])'.ts(2345)</p>\n</blockquote>\n\n<p>Why is that? How can i fix this? </p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1357, "user_id": 760054, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6da3f45db120a3764b4ac09b8da991eb?s=128&d=identicon&r=PG", "display_name": "Sonu Kapoor", "link": "https://stackoverflow.com/users/760054/sonu-kapoor"}, "edited": false, "score": 0, "creation_date": 1562749159, "post_id": 56967006, "comment_id": 100470991, "body": "Can you create a stackblitz to reproduce this? Your code looks fine. It must be something else."}, {"owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "reply_to_user": {"reputation": 1357, "user_id": 760054, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6da3f45db120a3764b4ac09b8da991eb?s=128&d=identicon&r=PG", "display_name": "Sonu Kapoor", "link": "https://stackoverflow.com/users/760054/sonu-kapoor"}, "edited": false, "score": 0, "creation_date": 1562750382, "post_id": 56967006, "comment_id": 100471739, "body": "I have created a stackblitz, it works fine when I get the data from an array. I think it&#39;s when I get the data from the API where it bugs"}, {"owner": {"reputation": 1357, "user_id": 760054, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6da3f45db120a3764b4ac09b8da991eb?s=128&d=identicon&r=PG", "display_name": "Sonu Kapoor", "link": "https://stackoverflow.com/users/760054/sonu-kapoor"}, "edited": false, "score": 0, "creation_date": 1562750662, "post_id": 56967006, "comment_id": 100471935, "body": "Is your API maybe returning the data twice? The first time, it has data, and the second time it has an empty array?"}, {"owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "reply_to_user": {"reputation": 1357, "user_id": 760054, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6da3f45db120a3764b4ac09b8da991eb?s=128&d=identicon&r=PG", "display_name": "Sonu Kapoor", "link": "https://stackoverflow.com/users/760054/sonu-kapoor"}, "edited": false, "score": 0, "creation_date": 1562751121, "post_id": 56967006, "comment_id": 100472226, "body": "How can be the data returned twice if I call the function only once ?"}, {"owner": {"reputation": 685, "user_id": 5576015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ef9ab7eaa9c08f0be32bc225d20714?s=128&d=identicon&r=PG&f=1", "display_name": "labu4bd", "link": "https://stackoverflow.com/users/5576015/labu4bd"}, "edited": false, "score": 0, "creation_date": 1562773996, "post_id": 56967006, "comment_id": 100485102, "body": "can you please show us your data that come from your API? your code and sample data looks good."}], "owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1586535017, "creation_date": 1562748915, "last_edit_date": 1586535017, "question_id": 56967006, "link": "https://stackoverflow.com/questions/56967006/drawlines-function-works-but-lines-dissapear-after-the-end-of-loading", "title": "drawLines function works but lines dissapear after the end of loading", "body": "<p>I have created a function that draw lines in an array. I'm calling this function in a loop, so that every family of my array as a line.  When I execute the program step by step, I can see that the lines are well drawn but when the document has finished to load, the lines are erased.</p>\n\n<p>I call the function draw on the ngAfterViewInit.</p>\n\n<p>I don't put my function code because it's not necessary, the function works well. I think it's a problem of lifecycle but I don't know how to resolve it.</p>\n\n<p>This is my HTML. The lines are drawn in the td.</p>\n\n<pre><code>&lt;table *ngIf=\"listeFamilles\"&gt;\n  &lt;tbody&gt;\n    &lt;tr *ngFor=\"let f of listeFamilles\"&gt;\n      &lt;th style=\"vertical-align: middle; padding-left: 10px;\"&gt;{{ f.nom }}&lt;/th&gt;\n      &lt;td  id=\"{{f.nom}}\"  style=\"vertical-align: top;\"&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Here is where I call my function :</p>\n\n<pre><code>ngAfterViewInit(): void {\n      this.serviceFam.getAllFamilles()\n        .subscribe(data =&gt; {\n          this.listeFamilles = data;\n          for (let f of this.listeFamilles) {\n            //console.log(this.listeAffaires._embedded.affaires[0]);\n            console.log(f.nom);\n            this.draw(\"#\" + f.nom, this.arriel1, {dateDimension: false, color: \"teal\", labelFormat: \"%Y\"})\n          }\n        }, err =&gt; {\n          console.log(err);\n        });\n</code></pre>\n\n<p>Here is my code : <a href=\"https://stackblitz.com/edit/angular-tds4sv\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-tds4sv</a></p>\n"}, {"tags": ["typescript", "electron"], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 9746445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1NaNc.png?s=128&g=1", "display_name": "Tulshi Das", "link": "https://stackoverflow.com/users/9746445/tulshi-das"}, "edited": false, "score": 0, "creation_date": 1562769387, "post_id": 56969600, "comment_id": 100482403, "body": "Worked fine. But I have another question, why event.senderId not working? and event.sender.sendTo() is not working. what is the reason here."}, {"owner": {"reputation": 3284, "user_id": 1841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7626f7fd5a7d9ecc5f84d42c7eea4405?s=128&d=identicon&r=PG", "display_name": "Kewin Dousse", "link": "https://stackoverflow.com/users/1841827/kewin-dousse"}, "reply_to_user": {"reputation": 417, "user_id": 9746445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1NaNc.png?s=128&g=1", "display_name": "Tulshi Das", "link": "https://stackoverflow.com/users/9746445/tulshi-das"}, "edited": false, "score": 0, "creation_date": 1562786562, "post_id": 56969600, "comment_id": 100490826, "body": "Hmm, that&#39;s another problem. Did you try logging the whole <code>event</code> Object to see all the properties it has ?"}, {"owner": {"reputation": 417, "user_id": 9746445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1NaNc.png?s=128&g=1", "display_name": "Tulshi Das", "link": "https://stackoverflow.com/users/9746445/tulshi-das"}, "edited": false, "score": 0, "creation_date": 1562819066, "post_id": 56969600, "comment_id": 100498633, "body": "yes, I have looked the property, there is no property name senderId. But this property exist in electron <a href=\"https://electronjs.org/docs/api/ipc-renderer#eventsenderid\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 3284, "user_id": 1841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7626f7fd5a7d9ecc5f84d42c7eea4405?s=128&d=identicon&r=PG", "display_name": "Kewin Dousse", "link": "https://stackoverflow.com/users/1841827/kewin-dousse"}, "reply_to_user": {"reputation": 417, "user_id": 9746445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1NaNc.png?s=128&g=1", "display_name": "Tulshi Das", "link": "https://stackoverflow.com/users/9746445/tulshi-das"}, "edited": false, "score": 1, "creation_date": 1562827787, "post_id": 56969600, "comment_id": 100501649, "body": "Hm I don&#39;t know what could cause that except a different Electron version then"}], "tags": [], "owner": {"reputation": 3284, "user_id": 1841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7626f7fd5a7d9ecc5f84d42c7eea4405?s=128&d=identicon&r=PG", "display_name": "Kewin Dousse", "link": "https://stackoverflow.com/users/1841827/kewin-dousse"}, "is_accepted": true, "score": 1, "last_activity_date": 1562757998, "last_edit_date": 1562757998, "creation_date": 1562757561, "answer_id": 56969600, "question_id": 56966840, "link": "https://stackoverflow.com/questions/56966840/parameter-event-implicitly-has-an-any-type-ts7006/56969600#56969600", "title": "Parameter &#39;event&#39; implicitly has an &#39;any&#39; type.ts(7006)", "body": "<p>As the documentation shows, <a href=\"https://electronjs.org/docs/api/ipc-renderer#ipcrendereronchannel-listener\" rel=\"nofollow noreferrer\"><code>ipcRenderer.on</code></a> takes a <code>event</code> as second argument which you specified correctly. You can see the documentation on the event Object <a href=\"https://electronjs.org/docs/api/ipc-renderer#objet-event\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So if you want to type it completely, assuming you have <code>Electron</code> imported already, <code>event</code> is of type <code>Electron.Event</code> : </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>ipcRenderer.on('download-progress', function (event: Electron.Event, progressInfo: ProgressInfo) {\n    document.getElementById('pbs_' + progressInfo.id).style.width = progressInfo.percent + \"%\";\n    document.getElementById('pts_' + progressInfo.id).innerHTML = progressInfo.percent + \"%\";\n});\n</code></pre>\n\n<p>For reference, here is the generic Electron.Event's type definition :</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Event extends GlobalEvent {\n  preventDefault: () =&gt; void;\n  sender: WebContents;\n  returnValue: any;\n  ctrlKey?: boolean;\n  metaKey?: boolean;\n  shiftKey?: boolean;\n  altKey?: boolean;\n}\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 9746445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1NaNc.png?s=128&g=1", "display_name": "Tulshi Das", "link": "https://stackoverflow.com/users/9746445/tulshi-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 0, "accepted_answer_id": 56969600, "answer_count": 1, "score": 1, "last_activity_date": 1562757998, "creation_date": 1562748374, "last_edit_date": 1562757627, "question_id": 56966840, "link": "https://stackoverflow.com/questions/56966840/parameter-event-implicitly-has-an-any-type-ts7006", "title": "Parameter &#39;event&#39; implicitly has an &#39;any&#39; type.ts(7006)", "body": "<p>I am using typescript in electron application. Typescript shows</p>\n\n<blockquote>\n  <p>Parameter 'event' implicitly has an 'any' type.ts(7006)</p>\n</blockquote>\n\n<p>Here is the code. So what should I do ?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>ipcRenderer.on('download-progress', function (event, progressInfo: ProgressInfo) {\n    document.getElementById('pbs_' + progressInfo.id).style.width = progressInfo.percent + \"%\";\n    document.getElementById('pts_' + progressInfo.id).innerHTML = progressInfo.percent + \"%\";\n});\n</code></pre>\n"}, {"tags": ["typescript", "aws-lambda", "rxjs", "nestjs"], "comments": [{"owner": {"reputation": 671, "user_id": 6024754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5CZNH.jpg?s=128&g=1", "display_name": "Jason Awbrey", "link": "https://stackoverflow.com/users/6024754/jason-awbrey"}, "edited": false, "score": 0, "creation_date": 1562911612, "post_id": 56966728, "comment_id": 100535217, "body": "Can you share more code that helps your lambda operate locally vs. online? I know you mentioned in different post that this worked locally but not when deployed, and that might help me hone in on an issue."}], "answers": [{"tags": [], "owner": {"reputation": 671, "user_id": 6024754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5CZNH.jpg?s=128&g=1", "display_name": "Jason Awbrey", "link": "https://stackoverflow.com/users/6024754/jason-awbrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1562911545, "creation_date": 1562911545, "answer_id": 57001037, "question_id": 56966728, "link": "https://stackoverflow.com/questions/56966728/does-an-observable-get-handled-differently-in-lambda-than-a-promise/57001037#57001037", "title": "Does an Observable get handled differently in Lambda than a Promise?", "body": "<p>The API of an <code>Observable</code> and <code>Promise</code> are very different, and I've yet to come by any documentation that supports the return of an <code>Observable</code> in an AWS Lambda function.</p>\n\n<hr>\n\n<p>Some additional thoughts: The output of a <code>@nestjs/cqrs</code> Saga is an Observable of a command. The module subscribes to the Observable and executes the new command via the <code>CommandBus</code>.</p>\n\n<p>With my understanding of AWS Lambda functions and the <code>@nestjs/cqrs</code> module, I don't believe you'd be able to return an <code>Observable</code>, let alone a <code>Promise</code>, from a <code>@Saga</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 8835708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d_sKpgD02Ew/AAAAAAAAAAI/AAAAAAAAShY/Ko-NYLWp4Yo/photo.jpg?sz=128", "display_name": "Dries Hooghe", "link": "https://stackoverflow.com/users/8835708/dries-hooghe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562911545, "creation_date": 1562748037, "last_edit_date": 1562784175, "question_id": 56966728, "link": "https://stackoverflow.com/questions/56966728/does-an-observable-get-handled-differently-in-lambda-than-a-promise", "title": "Does an Observable get handled differently in Lambda than a Promise?", "body": "<p>We're using the NestJS CQRS package in our application. This package allows us to create 'sagas' by generating RxJS Observables that trigger various background tasks.</p>\n\n<p>We noticed however when running the application on AWS Lambda, that the function finishes before the background tasks do.</p>\n\n<p>Does an Observable get handled differently in Lambda than a Promise?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Saga()\naggregateCreated = (events$: Observable&lt;any&gt;): Observable&lt;AggregateCommand&gt; =&gt; {\n        return events$.pipe(\n            ofType(AggregateCreatedEvent),\n            map(async (event: AggregateCreatedEvent) =&gt; {\n\n                const result = this.queueService.sendMessage(\n                    \"http://XXXXXXX\", { test: \"MessageContent });\n\n                await Promise.all([result]);\n                return;\n            }),\n            flatMap(c =&gt; c)\n        );\n    }\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7064424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d933e4a8d834ff4112e555a8195bb3b?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred xu", "link": "https://stackoverflow.com/users/7064424/alfred-xu"}, "edited": false, "score": 0, "creation_date": 1562748597, "post_id": 56966702, "comment_id": 100470638, "body": "A will import different classes, B is just a example."}], "tags": [], "owner": {"reputation": 750, "user_id": 9562368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4509dc630f70e51ccfdfde9a846fbc?s=128&d=identicon&r=PG&f=1", "display_name": "jank", "link": "https://stackoverflow.com/users/9562368/jank"}, "is_accepted": true, "score": 0, "last_activity_date": 1562747952, "creation_date": 1562747952, "answer_id": 56966702, "question_id": 56966408, "link": "https://stackoverflow.com/questions/56966408/how-to-import-function-from-other-class-in-typescript/56966702#56966702", "title": "How to import function from other class in typescript", "body": "<p>I think you are looking for <code>A extends B</code>.</p>\n\n<p>The <code>extends</code> keyword is used in class declarations or class expressions to create a class which is a child of another class.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class B {\r\n  \r\n  b_func() {\r\n    console.log('b func');\r\n  }\r\n}\r\n\r\nclass A extends B {\r\n  \r\n  a_func() {\r\n    console.log('a func');\r\n  }\r\n}\r\n\r\n\r\nconst a = new A();\r\na.b_func();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 5, "user_id": 7064424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d933e4a8d834ff4112e555a8195bb3b?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred xu", "link": "https://stackoverflow.com/users/7064424/alfred-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 56966702, "answer_count": 1, "score": 0, "last_activity_date": 1562750019, "creation_date": 1562746990, "last_edit_date": 1562750019, "question_id": 56966408, "link": "https://stackoverflow.com/questions/56966408/how-to-import-function-from-other-class-in-typescript", "title": "How to import function from other class in typescript", "body": "<p>I want to import the other class(decided by name string,for example B) to the present class(named A).\nfunction in class B needs to call function in class A.\nI want to know to how to implement.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// index.ts\n\nfunction importAll(obj, src){\n    for (var key in src) obj[key] = src[key];\n    return obj;\n};\n\n class A{\n    function_a(){\n        console.log(\"A_test\");\n    }\n\n    call_function_b()\n    {\n        let classtype=\"./Bclass\";\n        // dynamicly import class B \n       let B = require(classtype);\n       let object_b= new B(); \n       // want to import all function from class B to class A\n       // like importAll(this, object_b);\n\n    }\n}\n\nexport let test =new A();\ntest.call_function_b();\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>//file Bclass.ts\nexport class B{\n    function_b() {\n        console.log(\"B_test\");\n    }\n\n    function_use_a()\n    {\n        // function in class B need to call function in class A\n        this.function_a();\n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 896, "user_id": 6468937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/G4VPe.png?s=128&g=1", "display_name": "N.J.Dawson", "link": "https://stackoverflow.com/users/6468937/n-j-dawson"}, "is_accepted": false, "score": 3, "last_activity_date": 1562747610, "creation_date": 1562747610, "answer_id": 56966595, "question_id": 56966322, "link": "https://stackoverflow.com/questions/56966322/unknown-compiler-options-include-exclude/56966595#56966595", "title": "Unknown compiler options include &amp; exclude", "body": "<p>The issue is because they do not belong in compiler options at all.</p>\n\n<p>They should exist along-side compiler options like so:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"module\": \"commonjs\", \n    \"strict\": true,\n    \"baseUrl\": \"./\",\n    \"outDir\": \"./build\",\n    \"sourceMap\": true,\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    \"importHelpers\": true,\n    \"types\": [\n      \"node\"\n    ],\n    \"typeRoots\": [\n        \"node_modules/@types\"\n    ]\n  },\n  \"include\": [\n    \"src/**/*.ts\"\n  ],\n  \"exclude\": [\n    \"node_modues\"\n  ]\n}\n</code></pre>\n\n<p>See the examples here: <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#examples\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#examples</a></p>\n"}, {"tags": [], "owner": {"reputation": 12065, "user_id": 367865, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/78bdafae5cf469e2abebad372bb4e222?s=128&d=identicon&r=PG", "display_name": "Ouroborus", "link": "https://stackoverflow.com/users/367865/ouroborus"}, "is_accepted": true, "score": 31, "last_activity_date": 1562753114, "last_edit_date": 1562753114, "creation_date": 1562747639, "answer_id": 56966602, "question_id": 56966322, "link": "https://stackoverflow.com/questions/56966322/unknown-compiler-options-include-exclude/56966602#56966602", "title": "Unknown compiler options include &amp; exclude", "body": "<p>According to <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" rel=\"noreferrer\">the handbook</a>, <code>include</code> and <code>exclude</code> are supposed to be siblings of <code>compilerOptions</code>, not children:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"module\": \"commonjs\", \n    \"strict\": true,\n    \"baseUrl\": \"./\",\n    \"outDir\": \"./build\",\n    \"sourceMap\": true,\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    \"importHelpers\": true,\n    \"types\": [\n      \"node\"\n    ],\n    \"typeRoots\": [\n        \"node_modules/@types\"\n    ]\n  },\n  \"include\": [\n    \"src/**/*.ts\"\n  ],\n  \"exclude\": [\n    \"node_modues\"\n  ]\n}\n</code></pre>\n"}], "owner": {"reputation": 4493, "user_id": 10433835, "user_type": "registered", "profile_image": "https://graph.facebook.com/584735072160572/picture?type=large", "display_name": "anny123", "link": "https://stackoverflow.com/users/10433835/anny123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5778, "favorite_count": 0, "accepted_answer_id": 56966602, "answer_count": 2, "score": 9, "last_activity_date": 1562753114, "creation_date": 1562746661, "last_edit_date": 1562747675, "question_id": 56966322, "link": "https://stackoverflow.com/questions/56966322/unknown-compiler-options-include-exclude", "title": "Unknown compiler options include &amp; exclude", "body": "<p>I was making my first typescript-node-express application. </p>\n\n<p>To start with, I created my own tsconfig file which looks like </p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"module\": \"commonjs\", \n    \"strict\": true,\n    \"baseUrl\": \"./\",\n    \"outDir\": \"./build\",\n    \"sourceMap\": true,\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    \"importHelpers\": true,\n    \"types\": [\n      \"node\"\n    ],\n    \"typeRoots\": [\n        \"node_modules/@types\"\n    ],\n    \"include\": [\n      \"src/**/*.ts\"\n    ],\n    \"exclude\": [\n      \"node_modues\"\n    ]\n  }\n}\n</code></pre>\n\n<p>And inside my src/app.ts I am initialising my express app</p>\n\n<pre><code>import * as express from \"express\";\n\nclass App {\n\n  constructor() {\n    this.app = express();\n  }\n\n  //TODO: What is public app: express.Application\n  public app: express.Application;\n\n}\n\nconst app = new App().app;\nconst port = 4040;\n\napp.listen(port, function() {\n  console.log('Express server listening on port ' + port);\n});\n</code></pre>\n\n<p>Now, When I do ts-node ./src/app.ts I am getting the following error </p>\n\n<blockquote>\n  <p>error TS5023: unknown compiler option 'include'.  </p>\n  \n  <p>error TS5023: unknown compiler option 'exclude'.</p>\n\n<pre><code>at createTSError (/Users/an/.nvm/versions/node/v10.15.3/lib/node_modules/ts-node/src/index.ts:245:12)\nat reportTSError (/Users/an/.nvm/versions/node/v10.15.3/lib/node_modules/ts-node/src/index.ts:249:19)\nat Object.register (/Users/an/.nvm/versions/node/v10.15.3/lib/node_modules/ts-node/src/index.ts:260:36)\nat Object.&lt;anonymous&gt; (/Users/an/.nvm/versions/node/v10.15.3/lib/node_modules/ts-node/src/bin.ts:120:17)\nat Module._compile (internal/modules/cjs/loader.js:701:30)\nat Object.Module._extensions..js (internal/modules/cjs/loader.js:712:10)\nat Module.load (internal/modules/cjs/loader.js:600:32)\nat tryModuleLoad (internal/modules/cjs/loader.js:539:12)\nat Function.Module._load (internal/modules/cjs/loader.js:531:3)\nat Function.Module.runMain (internal/modules/cjs/loader.js:754:12)Unknown compiler\n</code></pre>\n</blockquote>\n\n<p>Can someone help me figure out why I am getting this error?</p>\n"}]