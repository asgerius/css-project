[{"tags": ["typescript", "ecmascript-6", "types", "symbols", "new-operator"], "answers": [{"tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": false, "score": 3, "last_activity_date": 1572478943, "last_edit_date": 1572478943, "creation_date": 1572478473, "answer_id": 58635024, "question_id": 58634984, "link": "https://stackoverflow.com/questions/58634984/symbol-constructor-error-in-typescript-ts-only-a-void-function-can-be-called/58635024#58635024", "title": "Symbol Constructor error in Typescript: [ts] Only a void function can be called with the &#39;new&#39; keyword", "body": "<p>You don't use <code>new</code> with symbols, and typescript is alerting you to that fact. Your code (with or without the <code>as any</code>) throws an exception when run:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const path = 'something';\r\nconst symbol = new Symbol(path);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Instead, just drop the new. This will make the code no longer throw exceptions, and will make typescript no longer tell you there's a problem.</p>\n\n<pre><code>const symbol = Symbol(path);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2584706, "user_type": "registered", "profile_image": "https://graph.facebook.com/11705876/picture?type=large", "display_name": "Luciano Santiago Aldana II", "link": "https://stackoverflow.com/users/2584706/luciano-santiago-aldana-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572478943, "creation_date": 1572478127, "question_id": 58634984, "link": "https://stackoverflow.com/questions/58634984/symbol-constructor-error-in-typescript-ts-only-a-void-function-can-be-called", "title": "Symbol Constructor error in Typescript: [ts] Only a void function can be called with the &#39;new&#39; keyword", "body": "<p>I'm new to typescript and am trying to use ES6 Symbol constructor. How do I properly resolve this ts lint issue without using <code>any</code>?</p>\n\n<pre><code>        const symbol = new Symbol(path);\n</code></pre>\n\n<p>What I don't want to do:</p>\n\n<pre><code>        const symbol = new (Symbol as any)(path);\n</code></pre>\n"}, {"tags": ["typescript", "maps", "ionic4", "angular8"], "comments": [{"owner": {"reputation": 2569, "user_id": 356083, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/awxYs.jpg?s=128&g=1", "display_name": "f.khantsis", "link": "https://stackoverflow.com/users/356083/f-khantsis"}, "edited": false, "score": 0, "creation_date": 1572722678, "post_id": 58634966, "comment_id": 103650515, "body": "did you set height?"}], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 5251807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RrqjSaVV-aA/AAAAAAAAAAI/AAAAAAAAACk/BHm5Yi-32vU/photo.jpg?sz=128", "display_name": "H_H", "link": "https://stackoverflow.com/users/5251807/h-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1572497604, "creation_date": 1572497604, "answer_id": 58637088, "question_id": 58634966, "link": "https://stackoverflow.com/questions/58634966/google-maps-integration-with-ionic-resulting-in-blank-screen-with-no-errors/58637088#58637088", "title": "Google maps integration with ionic resulting in blank screen with no errors", "body": "<p>Please go through this URL: </p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/a/57405762/5251807\">https://stackoverflow.com/a/57405762/5251807</a></p>\n</blockquote>\n\n<p>Seems you have not set height and width of div container.</p>\n"}], "owner": {"reputation": 53, "user_id": 6942317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33f533193a600cdb1db33ffbfd6f35e3?s=128&d=identicon&r=PG&f=1", "display_name": "John Alex", "link": "https://stackoverflow.com/users/6942317/john-alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572497604, "creation_date": 1572478023, "last_edit_date": 1572478866, "question_id": 58634966, "link": "https://stackoverflow.com/questions/58634966/google-maps-integration-with-ionic-resulting-in-blank-screen-with-no-errors", "title": "Google maps integration with ionic resulting in blank screen with no errors", "body": "<p>I'm trying to add google maps to my web application but without fail I manage to just get a blank screen and to make maters worse no errors! Here is my code so far. I feel like it may be somethign to do with the mapElement but my typescript knowledge is too poor and nothing i've found online seems to work</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'app-google-maps',\n  templateUrl: './google-maps.component.html',\n  styleUrls: ['./google-maps.component.scss'],\n})\nexport class GoogleMapsComponent implements OnInit {\n  @ViewChild('map', { static: false }) mapElement: ElementRef;\n\n  text: string;\n  map: any;\n  constructor() {\n    this.text = \"hello World\"\n  }\n\n  initMap() {\n    let coords = new google.maps.LatLng(45, 100);\n    let mapOptions: google.maps.MapOptions = {\n      center: coords,\n      zoom: 20,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    }\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n  }\n\n\n  ngAfterContentInit() {\n    this.initMap();\n  }\n\n  ngOnInit() {\n\n  }\n\n\n\n}\n\n\n</code></pre>\n\n<p>Then trying to use the component in events.html</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>&lt;ion-header&gt;\n  &lt;ion-toolbar color = \"primary\"&gt;\n    &lt;ion-title&gt;Events&lt;/ion-title&gt;\n  &lt;/ion-toolbar&gt;\n&lt;/ion-header&gt;\n\n&lt;ion-content&gt;\n&lt;app-google-maps&gt;&lt;/app-google-maps&gt;\n&lt;/ion-content&gt;\n</code></pre>\n\n<p>Any help would be greatly appreciated! </p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 509, "user_id": 9185707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40bc2bc1da2f0e1cef5fd1fbd544f86?s=128&d=identicon&r=PG&f=1", "display_name": "Antediluvian", "link": "https://stackoverflow.com/users/9185707/antediluvian"}, "edited": false, "score": 4, "creation_date": 1572478493, "post_id": 58634954, "comment_id": 103576881, "body": "You don&#39;t initialise the component class yourself. Angular does that. But if you insist, I guess you can. Then my question is why would you want to initialise it yourself?"}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1572479269, "post_id": 58634954, "comment_id": 103577055, "body": "Are you trying to dynamically create an instance of a component and add it to a template/view?"}, {"owner": {"reputation": 25, "user_id": 5535944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6023883e19c4e904ae648c902c3e79de?s=128&d=identicon&r=PG&f=1", "display_name": "joseph ", "link": "https://stackoverflow.com/users/5535944/joseph"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1573056569, "post_id": 58634954, "comment_id": 103758671, "body": "@AlexanderStaroselsky exactly, im thinking about merging controller and template into a single component for better readability."}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1573056650, "post_id": 58634954, "comment_id": 103758727, "body": "Then you need to look at the dynamic component loader <a href=\"https://angular.io/guide/dynamic-component-loader\" rel=\"nofollow noreferrer\">angular.io/guide/dynamic-component-loader</a> . You still wouldn\u2019t manually instantiate a @Component() with that though."}], "owner": {"reputation": 25, "user_id": 5535944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6023883e19c4e904ae648c902c3e79de?s=128&d=identicon&r=PG&f=1", "display_name": "joseph ", "link": "https://stackoverflow.com/users/5535944/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572477954, "creation_date": 1572477954, "question_id": 58634954, "link": "https://stackoverflow.com/questions/58634954/diference-between-type-script-class-initialisation-and-angular-component-class-i", "title": "Diference between type script class initialisation and angular component class initialisation", "body": "<p>I need help understanding the difference between initializing a typescript class and a angular component class.</p>\n\n<p>Here is class A </p>\n\n<pre><code>export class A {\n    constructor(param) {\n    }\n}\n\n</code></pre>\n\n<p>And this is angular component B </p>\n\n<pre><code>@Component({\n  selector: 'B'\n})\nexport class B {\n    constructor(param) {\n    }\n}\n</code></pre>\n\n<p>Whats the main diference between initializing the 2 classes, can i use :</p>\n\n<pre><code>new A(\"foo\");\n\n</code></pre>\n\n<p>like i use:</p>\n\n<pre><code>new B(\"foo\");\n\n</code></pre>\n\n<p>Is this a good idea? \nCan the injection handle this?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "redux", "custom-data-attribute"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 2845182, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c555ff8e8ed7a8f4cb5836e6ace9b82?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Kingdon", "link": "https://stackoverflow.com/users/2845182/scott-kingdon"}, "edited": false, "score": 0, "creation_date": 1572474311, "post_id": 58634343, "comment_id": 103575808, "body": "Nope that is for using straight React. I am using React with TypeScript which uses a different way. I get this error when I try your code: Property &#39;getAttribute&#39; does not exist on type &#39;EventTarget&#39;."}, {"owner": {"reputation": 448, "user_id": 10199179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCoBS.png?s=128&g=1", "display_name": "Luis Barajas", "link": "https://stackoverflow.com/users/10199179/luis-barajas"}, "reply_to_user": {"reputation": 301, "user_id": 2845182, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c555ff8e8ed7a8f4cb5836e6ace9b82?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Kingdon", "link": "https://stackoverflow.com/users/2845182/scott-kingdon"}, "edited": false, "score": 0, "creation_date": 1572474589, "post_id": 58634343, "comment_id": 103575878, "body": "Yeah you&#39;re right, you should cast the target first, mb."}], "tags": [], "owner": {"reputation": 448, "user_id": 10199179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCoBS.png?s=128&g=1", "display_name": "Luis Barajas", "link": "https://stackoverflow.com/users/10199179/luis-barajas"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474693, "last_edit_date": 1572474693, "creation_date": 1572473582, "answer_id": 58634343, "question_id": 58634154, "link": "https://stackoverflow.com/questions/58634154/react-typescript-get-data-attribute-from-click-event/58634343#58634343", "title": "React TypeScript get Data Attribute From Click Event", "body": "<p>In your event function you have e variable, e represents an event fired by clicking the button, e has a target property so, in order to access an attribute from the element you should do:</p>\n\n<pre><code>handleAppModeClick(e: React.MouseEvent&lt;HTMLElement&gt;) {\n    const target = e.target as HTMLElement;\n    let attr = target.getAttribute(\"data-attribute-name-here\");\n    //do something\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4979, "user_id": 385132, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/224ac20c6793964efb2785a946fa70ad?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/385132/chris"}, "edited": false, "score": 0, "creation_date": 1572475102, "post_id": 58634425, "comment_id": 103576010, "body": "Coercion/as is unnecessary, see my answer."}], "tags": [], "owner": {"reputation": 1327, "user_id": 5034261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a28ce8eddb47e2010ba15e708486a74?s=128&d=identicon&r=PG", "display_name": "givehug", "link": "https://stackoverflow.com/users/5034261/givehug"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474140, "creation_date": 1572474140, "answer_id": 58634425, "question_id": 58634154, "link": "https://stackoverflow.com/questions/58634154/react-typescript-get-data-attribute-from-click-event/58634425#58634425", "title": "React TypeScript get Data Attribute From Click Event", "body": "<p>You most likely will have to use <code>as</code> syntax , depending which property you want to access on e.target.</p>\n\n<pre><code>handleAppModeClick(e: React.MouseEvent) {\n    const appMode = (e.target as HTMLButtonElement).getAttribute('data-appMode');\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4979, "user_id": 385132, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/224ac20c6793964efb2785a946fa70ad?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/385132/chris"}, "is_accepted": true, "score": 9, "last_activity_date": 1572475029, "creation_date": 1572475029, "answer_id": 58634541, "question_id": 58634154, "link": "https://stackoverflow.com/questions/58634154/react-typescript-get-data-attribute-from-click-event/58634541#58634541", "title": "React TypeScript get Data Attribute From Click Event", "body": "<p><strong>Use e.currentTarget</strong> and then use HTML standard method <code>getAttribute</code>. No coercion necessary.</p>\n\n<pre><code>const appMode = e.currentTarget.getAttribute('data-appmode');\n</code></pre>\n\n<p>(note lowercase in the attribute name to avoid warnings from react)</p>\n\n<h2><code>currentTarget</code> is already correctly typed.</h2>\n\n<p>If you read <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts#L485\" rel=\"noreferrer\">the definitions of React's event types</a> you can see that <code>MouseEvent</code> extends <code>SyntheticEvent</code>, which extends <code>BaseSyntheticEvent</code>, which includes the property <code>target</code> and <code>currentTarget</code>, among others. The <code>HTMLElement</code> type you provide gets applied to <code>currentTarget</code>, so you have access to all the right stuff. If you use <code>target</code> you'll get a compile error about <code>getAttribute</code> not being valid for type <code>EventTarget</code>.</p>\n\n<h2>What's the difference?</h2>\n\n<p>The <code>currentTarget</code> is the element where you're putting your handler, <code>onClick</code>. The <code>target</code> is where the event originally came from (<a href=\"https://stackoverflow.com/questions/5921413/difference-between-e-target-and-e-currenttarget\">more here</a>). This is not necessarily the same because events bubble up. See the <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/pull/12239\" rel=\"noreferrer\">PR referenced in the type definitions file</a> for a complete discussion on why they're typed differently.</p>\n"}, {"tags": [], "owner": {"reputation": 330, "user_id": 651787, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/166d706fb974d04c19acdb287ad124b0?s=128&d=identicon&r=PG", "display_name": "Dashu", "link": "https://stackoverflow.com/users/651787/dashu"}, "is_accepted": false, "score": 0, "last_activity_date": 1594370303, "creation_date": 1594370303, "answer_id": 62830410, "question_id": 58634154, "link": "https://stackoverflow.com/questions/58634154/react-typescript-get-data-attribute-from-click-event/62830410#62830410", "title": "React TypeScript get Data Attribute From Click Event", "body": "<p>Using typescript I've recently learnt of the following approach:</p>\n<pre><code>type TabsProps = {\n  activeTab: string,\n  items: string[],\n  setActiveTab: (i: string) =&gt; void,\n}\n\nconst Tabs = ({ items, activeTab, setActiveTab }: TabsProps) =&gt; {\n  const onClick: React.MouseEventHandler&lt;HTMLElement&gt; = (e) =&gt; {\n    setActiveTab(e.currentTarget.dataset.id)\n    //console.log(e) // &lt;a data-id=&quot;0&quot; class=&quot;active nav-link&quot;&gt;Info&lt;/a&gt;\n  }\n\n  return (\n    &lt;Nav tabs &gt;\n        {\n            items.map((x, i) =&gt; (\n                &lt;NavItem key={i}&gt;\n                    &lt;NavLink className={activeTab === i.toString() ? 'active' : ''} onClick={onClick} data-id={i}&gt;{x}&lt;/NavLink&gt;\n                &lt;/NavItem&gt;\n            ))\n        }\n    &lt;/Nav &gt;\n  );\n}\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 2845182, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c555ff8e8ed7a8f4cb5836e6ace9b82?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Kingdon", "link": "https://stackoverflow.com/users/2845182/scott-kingdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5581, "favorite_count": 0, "accepted_answer_id": 58634541, "answer_count": 4, "score": 8, "last_activity_date": 1594370303, "creation_date": 1572472432, "question_id": 58634154, "link": "https://stackoverflow.com/questions/58634154/react-typescript-get-data-attribute-from-click-event", "title": "React TypeScript get Data Attribute From Click Event", "body": "<p>So I have a React component with a button which has a click handler which uses the data-* attribute. If this was straight React then I know how to get the value from the data-* attribute. However I am learning how to use TypeScript so I have no idea how to get access to this attribute. So what is the best way to get access to the data-* attribute using TypeScript?</p>\n\n<p>This is my JSX code for the button:</p>\n\n<pre><code>&lt;button type=\"button\" className=\"NavLink\" data-appMode={ AppMode.MAIN } onClick={ this.handleAppModeClick.bind(this) }&gt;Main&lt;/button&gt;\n</code></pre>\n\n<p>This is my handler for the click event:</p>\n\n<pre><code>handleAppModeClick(e: React.MouseEvent&lt;HTMLElement&gt;) {\n    // What code should go here to access the data-appMode attribute?\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "module-alias"], "comments": [{"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572472670, "post_id": 58634070, "comment_id": 103575312, "body": "Does the error only occur if you build and run the app?"}, {"owner": {"reputation": 3166, "user_id": 1792573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b4f82b357f7b57e6a665853dcd51b91?s=128&d=identicon&r=PG", "display_name": "jamesdeath123", "link": "https://stackoverflow.com/users/1792573/jamesdeath123"}, "reply_to_user": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572475710, "post_id": 58634070, "comment_id": 103576178, "body": "@DanielHabenicht the build works fine, it only happens on run time."}, {"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572477898, "post_id": 58634070, "comment_id": 103576740, "body": "That&#39;s what I meant. You have to import the <code>module-alias&#47;register</code> only once in you <code>app&#47;index.ts</code> it should load all other imports in e.g. in <code>app&#47;logic.ts</code> without the need to import it there again. That&#39;s also what their docs say."}, {"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572478240, "post_id": 58634070, "comment_id": 103576820, "body": "That&#39;s needed because the typescript compiler does not update the paths in the generated files (with what you specified in the <code>tsconfig.ts</code>). That&#39;s why you need to load <code>module-alias&#47;register</code> and of course in order to make it work you have to at least import in once, otherwise the packages code would not be included."}, {"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572479906, "post_id": 58634070, "comment_id": 103577173, "body": "If that solved it for you I will right an answer, so please let me know."}, {"owner": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "edited": false, "score": 0, "creation_date": 1572480244, "post_id": 58634070, "comment_id": 103577255, "body": "Why don&#39;t you use the <code>paths</code> instead?"}, {"owner": {"reputation": 3166, "user_id": 1792573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b4f82b357f7b57e6a665853dcd51b91?s=128&d=identicon&r=PG", "display_name": "jamesdeath123", "link": "https://stackoverflow.com/users/1792573/jamesdeath123"}, "reply_to_user": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572538805, "post_id": 58634070, "comment_id": 103599883, "body": "@DanielHabenicht yes that&#39;s what I did - I already imported it in app/index.ts, which gives me the runtime error and to fix that error I have to import it again in app/logics.ts which is against their docs, that&#39;s why I asked this question ;)"}, {"owner": {"reputation": 3166, "user_id": 1792573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b4f82b357f7b57e6a665853dcd51b91?s=128&d=identicon&r=PG", "display_name": "jamesdeath123", "link": "https://stackoverflow.com/users/1792573/jamesdeath123"}, "reply_to_user": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "edited": false, "score": 0, "creation_date": 1572538864, "post_id": 58634070, "comment_id": 103599921, "body": "@Kousha can you be more specific? I already have <code>paths</code> in the tsconfig file"}, {"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572549432, "post_id": 58634070, "comment_id": 103604653, "body": "Have you tried the <code>require(&#39;module-alias&#47;register)</code> syntax?"}, {"owner": {"reputation": 101, "user_id": 10442501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZZoz.jpg?s=128&g=1", "display_name": "\u0410\u0432\u0433\u0443\u0441\u0442", "link": "https://stackoverflow.com/users/10442501/%d0%90%d0%b2%d0%b3%d1%83%d1%81%d1%82"}, "edited": false, "score": 0, "creation_date": 1604671532, "post_id": 58634070, "comment_id": 114425760, "body": "did someone resolve this issue?"}], "answers": [{"comments": [{"owner": {"reputation": 1350, "user_id": 3554127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BBcxD.png?s=128&g=1", "display_name": "Luke Brown", "link": "https://stackoverflow.com/users/3554127/luke-brown"}, "edited": false, "score": 1, "creation_date": 1608752022, "post_id": 64809791, "comment_id": 115677225, "body": "This is the opposite of what is recommended on their README fyi"}], "tags": [], "owner": {"reputation": 3166, "user_id": 1792573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b4f82b357f7b57e6a665853dcd51b91?s=128&d=identicon&r=PG", "display_name": "jamesdeath123", "link": "https://stackoverflow.com/users/1792573/jamesdeath123"}, "is_accepted": false, "score": 1, "last_activity_date": 1605206093, "creation_date": 1605206093, "answer_id": 64809791, "question_id": 58634070, "link": "https://stackoverflow.com/questions/58634070/typescript-path-alias-needs-module-alias-register-on-every-file/64809791#64809791", "title": "typescript path alias needs module-alias/register on every file", "body": "<p>The solution to this is quite simple:</p>\n<p>in the root file, like app/index.ts, put the <code>import 'module-alias/register';</code> to the end of all the other imports and you won't need to put it in every file. It didn't work for me because I put that import before all other imports, not after.</p>\n<p>For example:</p>\n<pre><code>import express from 'express';\nimport corsFilter from 'cors';\n...\nimport 'module-alias/register'; // This has to be after all other imports\n</code></pre>\n"}], "owner": {"reputation": 3166, "user_id": 1792573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b4f82b357f7b57e6a665853dcd51b91?s=128&d=identicon&r=PG", "display_name": "jamesdeath123", "link": "https://stackoverflow.com/users/1792573/jamesdeath123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3258, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1605206093, "creation_date": 1572471860, "question_id": 58634070, "link": "https://stackoverflow.com/questions/58634070/typescript-path-alias-needs-module-alias-register-on-every-file", "title": "typescript path alias needs module-alias/register on every file", "body": "<p>I am using typescript <code>v3.6.4</code> with the following <code>tsconfig.json</code> snippet:</p>\n\n<pre><code>\n  \"compilerOptions\": {\n    \"moduleResolution\": \"node\",\n    \"baseUrl\": \"./src\",\n    \"paths\": {\n      \"@config/*\": [\"config/*\"],\n      \"@config\": [\"config\"],\n    }\n  }\n</code></pre>\n\n<p>and module alias in package.json:</p>\n\n<pre><code>  \"_moduleAliases\": {\n    \"@config\": \"dist/config\"\n  }\n</code></pre>\n\n<p>I have the following folder structure:</p>\n\n<pre><code>src\n |-config\n     |-index.ts\n |-app\n     |index.ts\n     |logic.ts\n |-dist\n</code></pre>\n\n<p>Now in app/index.ts, if I do:</p>\n\n<pre><code>import 'module-alias/register';\nimport config from '@config';\n</code></pre>\n\n<p>and my <code>npm start</code> commands is:</p>\n\n<pre><code>\"start\": \"node -r ts-node/register ./src/app/index.ts\",\n</code></pre>\n\n<p><code>tsc</code> will compile successfully but <code>npm start</code> will give error:</p>\n\n<pre><code>Error: Cannot find module '@config' in src/app/logic.ts\n</code></pre>\n\n<p>And the only way to fix this is to also add</p>\n\n<pre><code>import 'module-alias/register';\n</code></pre>\n\n<p>in <code>src/app/logic.ts</code></p>\n\n<p>Seems I have to add the <code>import 'module-alias/register'</code> in every file that I do alias? Is it a way to configure this?</p>\n"}, {"tags": ["javascript", "css", "angular", "typescript", "ionic3"], "answers": [{"tags": [], "owner": {"reputation": 1138, "user_id": 6798006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237d47b9e57a0ddd2493ab5b400dc5dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Anlezark", "link": "https://stackoverflow.com/users/6798006/dylan-anlezark"}, "is_accepted": true, "score": 4, "last_activity_date": 1572470828, "creation_date": 1572470828, "answer_id": 58633870, "question_id": 58633846, "link": "https://stackoverflow.com/questions/58633846/highlight-rows-using-ngfor-in-angular-ionic-based-on-condition/58633870#58633870", "title": "Highlight rows using ngFor in Angular Ionic based on condition", "body": "<p>Change \n     <code>[ngClass]=\"(count-1==i)?'newMsg':'oldMsg'\"</code> to \n      <code>[ngClass]=\"(count-1&gt;=i)?'newMsg':'oldMsg'\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 12297890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z69MA.jpg?s=128&g=1", "display_name": "iCrashOne", "link": "https://stackoverflow.com/users/12297890/icrashone"}, "is_accepted": false, "score": 1, "last_activity_date": 1572471446, "creation_date": 1572471446, "answer_id": 58633997, "question_id": 58633846, "link": "https://stackoverflow.com/questions/58633846/highlight-rows-using-ngfor-in-angular-ionic-based-on-condition/58633997#58633997", "title": "Highlight rows using ngFor in Angular Ionic based on condition", "body": "<p>You can also pass a function like</p>\n\n<pre><code>[ngClass]=\"isNew(i)?'newMsg':'oldMsg'\"\n</code></pre>\n\n<p>And in the component</p>\n\n<pre><code>isNew(index) {\n      if (index &lt; this.count) {\n        return true;\n      }\n      return false;\n    }\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 6898861, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e16e11227b1c592dcbe1d0f2092ad1?s=128&d=identicon&r=PG&f=1", "display_name": "web developer", "link": "https://stackoverflow.com/users/6898861/web-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58633870, "answer_count": 2, "score": 2, "last_activity_date": 1572471446, "creation_date": 1572470667, "question_id": 58633846, "link": "https://stackoverflow.com/questions/58633846/highlight-rows-using-ngfor-in-angular-ionic-based-on-condition", "title": "Highlight rows using ngFor in Angular Ionic based on condition", "body": "<p>In my application I am in need to highlight all row's based on count value using ngfor in angular. </p>\n\n<p>I tried and I am able to highlight only the particular row based on my count.Please help</p>\n\n<p><a href=\"https://stackblitz.com/edit/ionic-ypxtr7?file=app%2Fapp.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/ionic-ypxtr7?file=app%2Fapp.component.ts</a></p>\n\n<p>If my count value is 3, I need to highlight the row's with index 0, 1 and 2.</p>\n"}, {"tags": ["angular", "typescript", "routing"], "answers": [{"tags": [], "owner": {"reputation": 1776, "user_id": 9011723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20385cc990720ff64499b9de3b52fc70?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Ghignatti", "link": "https://stackoverflow.com/users/9011723/jo%c3%a3o-ghignatti"}, "is_accepted": false, "score": 0, "last_activity_date": 1572470940, "last_edit_date": 1572470940, "creation_date": 1572469633, "answer_id": 58633667, "question_id": 58633332, "link": "https://stackoverflow.com/questions/58633332/this-router-navigate-function-doesnt-work-as-expected/58633667#58633667", "title": "this.router.navigate function doesn&#39;t work as expected", "body": "<p>As per <a href=\"https://angular.io/api/router/Router#navigate\" rel=\"nofollow noreferrer\">Angular docs</a></p>\n\n<blockquote>\n  <p>Navigate based on the provided array of commands and a starting point. If no starting route is provided, the navigation is absolute.</p>\n</blockquote>\n\n<p>as well per <a href=\"https://angular.io/guide/router#relative-navigation\" rel=\"nofollow noreferrer\">Angular docs</a>,</p>\n\n<blockquote>\n  <p>The router supports directory-like syntax in a link parameters list to\n  help guide route name lookup:</p>\n  \n  <p>./ or no leading slash is relative to the current level.</p>\n  \n  <p>../ to go up one level in the route path.</p>\n  \n  <p>You can combine relative navigation syntax with an ancestor path. If\n  you must navigate to a sibling route, you could use the ../\n  convention to go up one level, then over and down the sibling route\n  path.</p>\n</blockquote>\n\n<p>So you can work with relative routes, as per Angular example</p>\n\n<pre><code>this.router.navigate(['../', { id: crisisId, foo: 'foo' }], { relativeTo: this.route });\n</code></pre>\n\n<p>Where <code>this.route</code> is an instance of ActivatedRoute.</p>\n"}], "owner": {"reputation": 324, "user_id": 12233187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wZOGA.jpg?s=128&g=1", "display_name": "Richard Zhan", "link": "https://stackoverflow.com/users/12233187/richard-zhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2135, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1572470940, "creation_date": 1572468089, "question_id": 58633332, "link": "https://stackoverflow.com/questions/58633332/this-router-navigate-function-doesnt-work-as-expected", "title": "this.router.navigate function doesn&#39;t work as expected", "body": "<p>I'm using Angular 8 and faced some problems with routing when I'm using lazy-loaded child modules.</p>\n\n<blockquote>\n  <p>app-routing.module.ts</p>\n</blockquote>\n\n<pre class=\"lang-js prettyprint-override\"><code>...\nconst routes: Routes = [\n   {\n      path: :id,\n      component: ParentComponent,\n      children: [\n         { path: 'child', loadChildren: './child.module#ChildModule' }\n      ]\n   }\n]\n...\n</code></pre>\n\n<blockquote>\n  <p>child-routing.module.ts</p>\n</blockquote>\n\n<pre class=\"lang-js prettyprint-override\"><code>...\nconst routes: Routes = [\n   { path: 'child1', component: Child1Component },\n   { path: 'child2', component: Child2Component }\n]\n...\n</code></pre>\n\n<p>Now, we have routing in these ways.\nfoo.com/123/child/child1 -> Child1Component\nfoo.com/123/child/child2 -> Child2Component</p>\n\n<p>Here, I tried to navigate to foo.com/123/child/child2 inside Child1Component.\nI was thinking child module is apart from app module and it's lazy loaded so this code will be working correctly.</p>\n\n<blockquote>\n  <p>child2.component.ts</p>\n</blockquote>\n\n<pre class=\"lang-js prettyprint-override\"><code>...\nconstructor(private router: Router) {}\n\n...\nthis.router.navigate(['child/child2']);\n...\n</code></pre>\n\n<p>But once I launched the application, it is navigated to foo.com/child/child2.\nI was expecting foo.com/123/child/child2.</p>\n\n<p>If I make these changes, it's working as expected.</p>\n\n<blockquote>\n  <p>child2.component.ts</p>\n</blockquote>\n\n<pre class=\"lang-js prettyprint-override\"><code>...\nprivate parentId;\nconstructor(private router: Router, private route: ActivatedRoute) {\n   this.route.parent.parent.params.subscribe((params) =&gt; {this.parentId = params.id});\n}\n\n...\nthis.router.navigate([this.parentId, 'child', 'child2']);\n...\n</code></pre>\n\n<p>It's getting parentId from the URL inside the component and navigate using it.\nBut I don't like this approach because it's not scalable.\nIf I change the Route Param name or add some more routing params, I have to update the child components for routing as well.</p>\n\n<p>Is there any better approach for handling routing in child components defined on child module lazy-loaded?</p>\n"}, {"tags": ["typescript", "typescript-generics"], "comments": [{"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 1, "creation_date": 1572468523, "post_id": 58633157, "comment_id": 103573815, "body": "Be careful with the usage of <code>as</code> keyword, it just tells TypeScript to shut up.. :) What happens if I want to store functions in my state (this is what you ignore with the first <code>as</code>)? What if I call <code>resolveHookState</code> with a stateSetter and no current state (second <code>as</code>)?"}, {"owner": {"reputation": 31, "user_id": 5502793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104b093fd9af3249bf3e761936aa48ad?s=128&d=identicon&r=PG&f=1", "display_name": "xobotyi", "link": "https://stackoverflow.com/users/5502793/xobotyi"}, "reply_to_user": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572469328, "post_id": 58633157, "comment_id": 103574172, "body": "@Grabofus i&#39;m making custorm React hook that should be used as it&#39;s native <code>useState</code>, it&#39;s arguments can be a value or function that returns a value, if it is a function it is invoked with no arguments and it&#39;s result used as state. In this part it will act exactly as react (and if you want to store a function you have to wrap it with another function)."}, {"owner": {"reputation": 31, "user_id": 5502793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104b093fd9af3249bf3e761936aa48ad?s=128&d=identicon&r=PG&f=1", "display_name": "xobotyi", "link": "https://stackoverflow.com/users/5502793/xobotyi"}, "reply_to_user": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572469676, "post_id": 58633157, "comment_id": 103574313, "body": "@Grabofus Furthermore, react&#39;s <code>useState</code> hook returns a function that can set new state. It can be a value or function too, but this time function will receive 1 argument - current state value. So if i am right (i hope i am %)) i made a function that covers both usecases.  This function will not be exposed to users, so ivalid use-cases would be caught by tests"}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572469854, "post_id": 58633157, "comment_id": 103574372, "body": "The only problem is, if <code>&lt;S&gt;</code> is of type function (but not a StateSetter), you&#39;ll invoke it, instead of saving it as state. Please have a look at my answer below to see if it fits your scenario. :)"}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572471377, "post_id": 58633157, "comment_id": 103574884, "body": "Edit: Removed the answer, seem to have some issues.. I&#39;ll revisit it and update it soon if you don&#39;t find a solution"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 3861567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdbdd5fe0bf9cbc57f5c106a58e155a?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Cheek", "link": "https://stackoverflow.com/users/3861567/devin-cheek"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468816, "creation_date": 1572468816, "answer_id": 58633493, "question_id": 58633157, "link": "https://stackoverflow.com/questions/58633157/typescript-optional-type-inferring/58633493#58633493", "title": "Typescript optional type inferring", "body": "<pre><code>interface Callable&lt;ReturnType&gt; {\n  (...args: any[]): ReturnType;\n}\n\ntype GenericReturnType&lt;ReturnType, F&gt; = F extends Callable&lt;ReturnType&gt;\n  ? ReturnType\n  : never;\n\nfunction someFunction(initialState: ResolvableHookState&lt;number&gt; = 0){\n  const resolvedState = GenericReturnType&lt;number, typeof initialState&gt;;\n}\n</code></pre>\n\n<p><a href=\"https://dev.to/busypeoples/notes-on-typescript-returntype-3m5a\" rel=\"nofollow noreferrer\">This</a> article might be able to help you.</p>\n"}, {"tags": [], "owner": {"reputation": 1822, "user_id": 3184194, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1569695241/picture?type=large", "display_name": "caseyWebb", "link": "https://stackoverflow.com/users/3184194/caseywebb"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469360, "creation_date": 1572469360, "answer_id": 58633607, "question_id": 58633157, "link": "https://stackoverflow.com/questions/58633157/typescript-optional-type-inferring/58633607#58633607", "title": "Typescript optional type inferring", "body": "<p>If you're fine with keeping <code>as</code> around, this works</p>\n\n<pre><code>export type StateSetter&lt;S&gt; = (prevState?: S) =&gt; S\n\nexport type ResolvableHookState&lt;S&gt; = S | StateSetter&lt;S&gt;\n\nexport function resolveHookState&lt;S&gt;(\n  state: ResolvableHookState&lt;S&gt;,\n  currentState?: S\n): S {\n  if (typeof state === 'function') {\n    return (state as StateSetter&lt;S&gt;)(currentState)\n  } else {\n    return state as S\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5502793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104b093fd9af3249bf3e761936aa48ad?s=128&d=identicon&r=PG&f=1", "display_name": "xobotyi", "link": "https://stackoverflow.com/users/5502793/xobotyi"}, "edited": false, "score": 0, "creation_date": 1572479557, "post_id": 58634511, "comment_id": 103577114, "body": "Thank you alot! Basing on your solution i&#39;ve made one that fully fits my needs."}], "tags": [], "owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474801, "creation_date": 1572474801, "answer_id": 58634511, "question_id": 58633157, "link": "https://stackoverflow.com/questions/58633157/typescript-optional-type-inferring/58634511#58634511", "title": "Typescript optional type inferring", "body": "<p>This is the closest I could get. One thing to keep in mind is your state cannot be of type <code>Function</code> otherwise you wouldn't be able to tell which overload you're trying to handle.</p>\n\n<pre><code>type State&lt;S&gt; = Exclude&lt;S, Function&gt;;\ntype StateSetter&lt;S&gt; = (prevState: S) =&gt; S;\ntype ResolvableHookState&lt;S&gt; = State&lt;S&gt; | StateSetter&lt;S&gt;;\n\nfunction resolveHookState&lt;S&gt;(state: State&lt;S&gt;): S;\nfunction resolveHookState&lt;S&gt;(stateSetter: StateSetter&lt;State&lt;S&gt;&gt;, currentState: State&lt;S&gt;): S;\nfunction resolveHookState&lt;S&gt;(stateOrStateSetter: ResolvableHookState&lt;S&gt;, currentState?: State&lt;S&gt;): S {\n  if (typeof stateOrStateSetter === 'function') {\n    if (currentState !== undefined) {\n      // From: StateSetter&lt;S&gt; | (Exclude&lt;S, Function&gt; &amp; Function)\n      // Not sure why (Exclude&lt;S, Function&gt; &amp; Function) doesn't resolve to never\n      const stateSetter = stateOrStateSetter as StateSetter&lt;S&gt;; \n      return stateSetter(currentState);\n    } else {\n      // If you call resolveHookState with a stateSetter and no currentState\n      // This should not be possible based on the method signatures.\n      throw new Error('Oops?'); \n    }\n  } else {\n    const state = stateOrStateSetter;\n    return state;\n  }\n}\n\n// Call with state\nresolveHookState(0);\n\n// Or with setter\nconst stateSetter = (prevState: number) =&gt; prevState + 1;\nresolveHookState(stateSetter, 5);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5502793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104b093fd9af3249bf3e761936aa48ad?s=128&d=identicon&r=PG&f=1", "display_name": "xobotyi", "link": "https://stackoverflow.com/users/5502793/xobotyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1572479690, "creation_date": 1572479690, "answer_id": 58635181, "question_id": 58633157, "link": "https://stackoverflow.com/questions/58633157/typescript-optional-type-inferring/58635181#58635181", "title": "Typescript optional type inferring", "body": "<p>Basing on @Grabofus solution made my own:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type StateSetter&lt;S&gt; = (prevState: S) =&gt; S;\nexport type InitialStateSetter&lt;S&gt; = () =&gt; S;\n\nexport type InitialHookState&lt;S&gt; = S | InitialStateSetter&lt;S&gt;;\nexport type HookState&lt;S&gt; = S | StateSetter&lt;S&gt;;\nexport type ResolvableHookState&lt;S&gt; = S | StateSetter&lt;S&gt; | InitialStateSetter&lt;S&gt;;\n\nexport function resolveHookState&lt;S&gt;(newState: S | InitialStateSetter&lt;S&gt;): S;\nexport function resolveHookState&lt;S&gt;(newState: Exclude&lt;HookState&lt;any&gt;, StateSetter&lt;any&gt;&gt;, currentState: S): S;\nexport function resolveHookState&lt;S&gt;(newState: StateSetter&lt;S&gt;, currentState: S): S;\nexport function resolveHookState&lt;S&gt;(newState: ResolvableHookState&lt;S&gt;, currentState?: S): S {\n  if (typeof newState === 'function') {\n    return (newState as Function)(currentState);\n  }\n\n  return newState as S;\n}\n\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5502793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104b093fd9af3249bf3e761936aa48ad?s=128&d=identicon&r=PG&f=1", "display_name": "xobotyi", "link": "https://stackoverflow.com/users/5502793/xobotyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1572479690, "creation_date": 1572467202, "last_edit_date": 1572468092, "question_id": 58633157, "link": "https://stackoverflow.com/questions/58633157/typescript-optional-type-inferring", "title": "Typescript optional type inferring", "body": "<p>Not sure if question is right, but I want it to infer the result type but actually have no clue how to do it.</p>\n\n<p>Here how i did it now:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type StateSetter&lt;S&gt; = (prevState: S) =&gt; S;\ntype ResolvableHookState&lt;S&gt; = S | StateSetter&lt;S&gt;;\n\nexport function resolveHookState&lt;S&gt;(state: S): S;\nexport function resolveHookState&lt;S&gt;(state: StateSetter&lt;S&gt;, currentState?: S): S;\nexport function resolveHookState&lt;S&gt;(state: ResolvableHookState&lt;S&gt;, currentState?: S): S {\n  if (typeof state === 'function') {\n    return (state as StateSetter&lt;S&gt;)(currentState as S);\n  }\n\n  return state;\n}\n</code></pre>\n\n<p>Here is how i want to use it:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function someFunction(initialState: ResolvableHookState&lt;number&gt; = 0){\n  const resolvedState = resolveHookState(initialState);\n}\n</code></pre>\n\n<p>Idea is to make <code>resolveHookState(initialState)</code> return the number type, but for obvious reasons it returns <code>ResolvableHookState&lt;number&gt;</code></p>\n\n<p>I've tried to make it via infering but it seems not to work as i expect.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type ResolvableHookStateType&lt;S extends ResolvableHookState&lt;any&gt;&gt; = S extends StateSetter&lt;infer T&gt; ? T : S;\n</code></pre>\n\n<p><strong>[UPD 1]</strong><br>\nAfter some tinkering ended up with this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type StateSetter&lt;S&gt; = (prevState?: S) =&gt; S;\n\nexport type ResolvableHookState&lt;S&gt; = S | StateSetter&lt;S&gt;;\n\ntype ResolvableHookStateType&lt;S&gt; = S extends ResolvableHookState&lt;infer T&gt; ? T : never;\n\nexport function resolveHookState&lt;S&gt;(state: S): ResolvableHookStateType&lt;S&gt;;\nexport function resolveHookState&lt;S&gt;(state: StateSetter&lt;S&gt;, currentState?: S): ResolvableHookStateType&lt;S&gt;;\nexport function resolveHookState&lt;S&gt;(state: ResolvableHookState&lt;S&gt;, currentState?: S): ResolvableHookStateType&lt;S&gt; {\n  if (typeof state === 'function') {\n    return (state as StateSetter&lt;S&gt;)(currentState) as ResolvableHookStateType&lt;S&gt;;\n  }\n\n  return state as ResolvableHookStateType&lt;S&gt;;\n</code></pre>\n\n<p>But i'm not sure it is the most elegant way to solve the problem.</p>\n"}, {"tags": ["json", "typescript", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 596, "user_id": 2901952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514374779a37a8a15daed7414dc2cd9b?s=128&d=identicon&r=PG", "display_name": "tripathiakshit", "link": "https://stackoverflow.com/users/2901952/tripathiakshit"}, "edited": false, "score": 0, "creation_date": 1572466087, "post_id": 58632861, "comment_id": 103572851, "body": "If <code>supportedCurrencies</code> is a key in data, you can try <code>doc.data().supportedCurrencies.join(&quot;, &quot;)</code>"}, {"owner": {"reputation": 178, "user_id": 7852939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f3480a65bc3f5720c14190a7969c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rehan", "link": "https://stackoverflow.com/users/7852939/rehan"}, "reply_to_user": {"reputation": 596, "user_id": 2901952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514374779a37a8a15daed7414dc2cd9b?s=128&d=identicon&r=PG", "display_name": "tripathiakshit", "link": "https://stackoverflow.com/users/2901952/tripathiakshit"}, "edited": false, "score": 0, "creation_date": 1572466200, "post_id": 58632861, "comment_id": 103572899, "body": "what does .join(&quot;, &quot;) means here?"}, {"owner": {"reputation": 596, "user_id": 2901952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514374779a37a8a15daed7414dc2cd9b?s=128&d=identicon&r=PG", "display_name": "tripathiakshit", "link": "https://stackoverflow.com/users/2901952/tripathiakshit"}, "edited": false, "score": 0, "creation_date": 1572531800, "post_id": 58632861, "comment_id": 103595859, "body": "it creates a string from the array and joins adds the given string in the middle of the elements. so <code>[a, b, c].join(&#39;|&#39;)</code> would give you <code>&quot;a|b|c&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 0, "last_activity_date": 1572466805, "creation_date": 1572466805, "answer_id": 58633077, "question_id": 58632861, "link": "https://stackoverflow.com/questions/58632861/want-read-a-specific-item-from-data-method-in-firestore/58633077#58633077", "title": "want read a specific item from data() method in firestore", "body": "<p>When you call <code>doc.data()</code> you get a plain JavaScript object whose properties are each of the fields in the document:</p>\n\n<pre><code>const data = doc.data();\n</code></pre>\n\n<p>If you want one of those fields, just access it by name as a property of that object:</p>\n\n<pre><code>const supportedCurrencies = data.supportedCurrencies;\n</code></pre>\n\n<p>If it's an array, then you can treat it just like any other JavaScript <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\" rel=\"nofollow noreferrer\">array object</a>.</p>\n"}], "owner": {"reputation": 178, "user_id": 7852939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f3480a65bc3f5720c14190a7969c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Rehan", "link": "https://stackoverflow.com/users/7852939/rehan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 58633077, "answer_count": 1, "score": 0, "last_activity_date": 1572466805, "creation_date": 1572465835, "question_id": 58632861, "link": "https://stackoverflow.com/questions/58632861/want-read-a-specific-item-from-data-method-in-firestore", "title": "want read a specific item from data() method in firestore", "body": "<pre><code>snapshot.forEach(doc =&gt; {\n  console.log(\"ID: \"+doc.id, '=&gt;', \"Doc DATA: \"+JSON.stringify(doc.data()));\n});\n</code></pre>\n\n<p>I want to read only 1 item from doc.data() and that is an array of strings called (\"supportedCurrencies\").\nHow do i read? I'm new to firestore and TS so any help much appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1572473499, "post_id": 58632844, "comment_id": 103575574, "body": "Titles in any help forum or Q&amp;A system should always succinctly describe what the problem is. Do not add &quot;please help me&quot; or other pleading - that does not help readers."}, {"owner": {"reputation": 5738, "user_id": 7496073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ad17da5f307d0462eff39880d8f105b?s=128&d=identicon&r=PG&f=1", "display_name": "John Montgomery", "link": "https://stackoverflow.com/users/7496073/john-montgomery"}, "edited": false, "score": 0, "creation_date": 1572473601, "post_id": 58632844, "comment_id": 103575604, "body": "In the future, please post your code as text, not images. Images should only supplement your question and not be necessary to understand it, for a variety of reasons (for example, they can&#39;t be searched for and screen readers can&#39;t parse them)."}], "answers": [{"tags": [], "owner": {"reputation": 5529, "user_id": 1939697, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5af836fe4c7401f77e1f58f0d5cce819?s=128&d=identicon&r=PG", "display_name": "UncleDave", "link": "https://stackoverflow.com/users/1939697/uncledave"}, "is_accepted": false, "score": 3, "last_activity_date": 1572466015, "creation_date": 1572466015, "answer_id": 58632898, "question_id": 58632844, "link": "https://stackoverflow.com/questions/58632844/how-to-resolve-a-syntax-checker-error-on-typescript-in-visual-studio/58632898#58632898", "title": "How to resolve a syntax-checker error on TypeScript in Visual Studio", "body": "<p>You're trying to assign an array of <code>Goal</code> to a property of type <code>Goal</code> (singular). Change the type of the <code>Goal</code> property to <code>Goal[]</code>.</p>\n\n<pre><code>goals: Goal[] = [\n  { id: 1, name: '...' },\n  { id: 2, name: '...' },\n  ...\n];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12100207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb1215aa1b014af1054a1ca27919edbe?s=128&d=identicon&r=PG&f=1", "display_name": "Boston Wilfred", "link": "https://stackoverflow.com/users/12100207/boston-wilfred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1572473385, "creation_date": 1572465764, "last_edit_date": 1572473385, "question_id": 58632844, "link": "https://stackoverflow.com/questions/58632844/how-to-resolve-a-syntax-checker-error-on-typescript-in-visual-studio", "title": "How to resolve a syntax-checker error on TypeScript in Visual Studio", "body": "<p>I am trying to display an array using Angular and TypeScript, and I am getting an error I do not understand.</p>\n\n<p>When I move my cursor to the Goal that red lined it shows this:</p>\n\n<blockquote>\n  <p>Type '{ id: number; name: string; }[]' is missing the following properties from type 'Goal': id, name</p>\n</blockquote>\n\n<p>Image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/AcHNP.png\" alt=\"Image\"></p>\n\n<p>Visual Studio shows a red line on Goal saying this:</p>\n\n<blockquote>\n  <p>Type '{ id: number; name: string; }[]' is missing the following properties from type 'Goal': id, name</p>\n</blockquote>\n\n<p>Can any coder show me exactly what to do?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1572465906, "post_id": 58632809, "comment_id": 103572773, "body": "it is giving undefined"}, {"owner": {"reputation": 2344, "user_id": 5613720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5108eebd0ca5da227b09c34fbb8aa84?s=128&d=identicon&r=PG&f=1", "display_name": "yazantahhan", "link": "https://stackoverflow.com/users/5613720/yazantahhan"}, "reply_to_user": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1572465968, "post_id": 58632809, "comment_id": 103572801, "body": "It should be in the ProfileComponent, not in the AppComponent"}, {"owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1572466008, "post_id": 58632809, "comment_id": 103572813, "body": "but i want to acces it in app component"}], "tags": [], "owner": {"reputation": 2344, "user_id": 5613720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5108eebd0ca5da227b09c34fbb8aa84?s=128&d=identicon&r=PG&f=1", "display_name": "yazantahhan", "link": "https://stackoverflow.com/users/5613720/yazantahhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1572467079, "last_edit_date": 1572467079, "creation_date": 1572465617, "answer_id": 58632809, "question_id": 58632718, "link": "https://stackoverflow.com/questions/58632718/not-able-to-find-route-custom-data-in-angular-6-in-app-component/58632809#58632809", "title": "Not able to find route custom data in angular 6 in app component", "body": "<p><strong>Update</strong></p>\n\n<p>You will need to subscribe to the router events in the AppComponent and get the params from it:</p>\n\n<pre><code>constructor(private router: Router, route: ActivatedRoute) { }\n\nngOnInit() {\n  this.router.events.subscribe(event =&gt; {\n    if(event instanceof NavigationEnd){\n      console.log(this.route.root.firstChild.snapshot.data['title']);\n    }\n  });\n}\n</code></pre>\n\n<p>If you want it only for that path, you can add one more condition</p>\n\n<pre><code>if(event instanceof NavigationEnd &amp;&amp; event.url === '/profile')\n</code></pre>\n\n<hr>\n\n<p><strong>Old Answer</strong></p>\n\n<p>You will need to access the snapshot to get the data params</p>\n\n<pre><code>this.route.snapshot.data['title'];\n</code></pre>\n"}], "owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 58632809, "answer_count": 1, "score": 0, "last_activity_date": 1572467079, "creation_date": 1572465128, "question_id": 58632718, "link": "https://stackoverflow.com/questions/58632718/not-able-to-find-route-custom-data-in-angular-6-in-app-component", "title": "Not able to find route custom data in angular 6 in app component", "body": "<p>I have an angular application and added custom data to the route given as</p>\n\n<pre><code>{ path: 'profile', component: ProfileComponent, data: {title: 'example'} }\n</code></pre>\n\n<p>and in app.component.ts file I have the following code as</p>\n\n<pre><code>private route: ActivatedRoute\n\nconsole.log('route snapshot', this.route.firstChild.data._value.pageType );\n</code></pre>\n\n<p>the error i am getting is </p>\n\n<pre><code>ERROR in src/app/app.component.ts(71,64): error TS2339: Property '_value' does not exist on type 'Observable&lt;Data&gt;'.\n</code></pre>\n\n<p>can anyone tell me how to access data of route in app.component.ts</p>\n"}, {"tags": ["javascript", "typescript", "optimization"], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 4512868, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9ab134436477876d5197b8b09e2aef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/4512868/tomas"}, "edited": false, "score": 0, "creation_date": 1572465403, "post_id": 58632710, "comment_id": 103572587, "body": "Thank U for Reduce, but i have task with map() &amp; find() ussage. Is it possible?"}, {"owner": {"reputation": 143310, "user_id": 5157454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPadFFLbBGA/AAAAAAAAAAI/AAAAAAAADB8/FkNCMP_vkAc/photo.jpg?sz=128", "display_name": "Ori Drori", "link": "https://stackoverflow.com/users/5157454/ori-drori"}, "reply_to_user": {"reputation": 569, "user_id": 4512868, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9ab134436477876d5197b8b09e2aef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/4512868/tomas"}, "edited": false, "score": 0, "creation_date": 1572465665, "post_id": 58632710, "comment_id": 103572696, "body": "I&#39;ve added another solution."}, {"owner": {"reputation": 569, "user_id": 4512868, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9ab134436477876d5197b8b09e2aef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/4512868/tomas"}, "edited": false, "score": 1, "creation_date": 1572465873, "post_id": 58632710, "comment_id": 103572768, "body": "Wow! Nice! Thank you very much!"}, {"owner": {"reputation": 569, "user_id": 4512868, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9ab134436477876d5197b8b09e2aef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/4512868/tomas"}, "edited": false, "score": 0, "creation_date": 1572466041, "post_id": 58632710, "comment_id": 103572825, "body": "P.s. What is meen <code>...offers</code>?"}, {"owner": {"reputation": 143310, "user_id": 5157454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPadFFLbBGA/AAAAAAAAAAI/AAAAAAAADB8/FkNCMP_vkAc/photo.jpg?sz=128", "display_name": "Ori Drori", "link": "https://stackoverflow.com/users/5157454/ori-drori"}, "reply_to_user": {"reputation": 569, "user_id": 4512868, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9ab134436477876d5197b8b09e2aef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/4512868/tomas"}, "edited": false, "score": 1, "creation_date": 1572466146, "post_id": 58632710, "comment_id": 103572881, "body": "The <code>Math.min()</code> function accepts a list of items <code>Math.min(10, 5, 4, 3)</code>, and not an array (the result of map). I&#39;m using the spread syntax to apply convert the array of prices to a list of parameters that <code>Math.min()</code> can handle."}], "tags": [], "owner": {"reputation": 143310, "user_id": 5157454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPadFFLbBGA/AAAAAAAAAAI/AAAAAAAADB8/FkNCMP_vkAc/photo.jpg?sz=128", "display_name": "Ori Drori", "link": "https://stackoverflow.com/users/5157454/ori-drori"}, "is_accepted": true, "score": 1, "last_activity_date": 1572465649, "last_edit_date": 1572465649, "creation_date": 1572465103, "answer_id": 58632710, "question_id": 58632647, "link": "https://stackoverflow.com/questions/58632647/how-to-earch-minimal-value-in-objects-array-using-map-and-find-methods/58632710#58632710", "title": "How to earch minimal value in objects array using map() and find() methods?", "body": "<p>You can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\" rel=\"nofollow noreferrer\"><code>Array.reduce()</code></a> to find the best offer by price. On each iteration check if the current item's (<code>o</code>) price is less than the accumulator's (<code>r</code>) price, and take the one with the lowest.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const productList = [{\"title\":\"Product X1\",\"offers\":[{\"seller\":\"Company X1\",\"price\":400},{\"seller\":\"Company X2\",\"price\":200},{\"seller\":\"Company X3\",\"price\":300}]},{\"title\":\"Product Y1\",\"offers\":[{\"seller\":\"Company Y1\",\"price\":1700},{\"seller\":\"Company Y2\",\"price\":1600},{\"seller\":\"Company Y3\",\"price\":1500},{\"seller\":\"Company Y4\",\"price\":1400}]},{\"title\":\"Product Z1\",\"offers\":[{\"seller\":\"Company Z1\",\"price\":50},{\"seller\":\"Company Z2\",\"price\":60},{\"seller\":\"Company Z3\",\"price\":10},{\"seller\":\"Company Z4\",\"price\":90},{\"seller\":\"Company Z5\",\"price\":70}]}]\r\n\r\nconst findBestOffer = ({ offers = [] }) =&gt; offers\r\n  .reduce((r, o) =&gt; o.price &lt; r.price ? o : r)\r\n\r\nconst formatOffer = item =&gt; item ? ({\r\n  name: item.seller,\r\n  price: item.price\r\n}) : 'none'\r\n\r\nconst destinations = productList.map(item =&gt; ({\r\n  title: item.title,\r\n  bestOffer: formatOffer(findBestOffer(item))\r\n}))\r\n\r\nconsole.log(destinations)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If you need to use <code>Array.map()</code> and <code>Array.find()</code> - map the array to the price numbers, and get the lowest one using <code>Math.min()</code>, and then find the item with that price:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const productList = [{\"title\":\"Product X1\",\"offers\":[{\"seller\":\"Company X1\",\"price\":400},{\"seller\":\"Company X2\",\"price\":200},{\"seller\":\"Company X3\",\"price\":300}]},{\"title\":\"Product Y1\",\"offers\":[{\"seller\":\"Company Y1\",\"price\":1700},{\"seller\":\"Company Y2\",\"price\":1600},{\"seller\":\"Company Y3\",\"price\":1500},{\"seller\":\"Company Y4\",\"price\":1400}]},{\"title\":\"Product Z1\",\"offers\":[{\"seller\":\"Company Z1\",\"price\":50},{\"seller\":\"Company Z2\",\"price\":60},{\"seller\":\"Company Z3\",\"price\":10},{\"seller\":\"Company Z4\",\"price\":90},{\"seller\":\"Company Z5\",\"price\":70}]}]\r\n\r\nconst findBestOffer = ({ offers = [] }) =&gt; {\r\n  const min = Math.min(...offers.map(o =&gt; o.price))\r\n  \r\n  return offers.find(o =&gt; o.price === min)\r\n}\r\n\r\nconst formatOffer = item =&gt; item ? ({\r\n  name: item.seller,\r\n  price: item.price\r\n}) : 'none'\r\n\r\nconst destinations = productList.map(item =&gt; ({\r\n  title: item.title,\r\n  bestOffer: formatOffer(findBestOffer(item))\r\n}))\r\n\r\nconsole.log(destinations)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 5385845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0jwsA.jpg?s=128&g=1", "display_name": "samtax01", "link": "https://stackoverflow.com/users/5385845/samtax01"}, "is_accepted": false, "score": 0, "last_activity_date": 1572467082, "last_edit_date": 1572467082, "creation_date": 1572466583, "answer_id": 58633023, "question_id": 58632647, "link": "https://stackoverflow.com/questions/58632647/how-to-earch-minimal-value-in-objects-array-using-map-and-find-methods/58633023#58633023", "title": "How to earch minimal value in objects array using map() and find() methods?", "body": "<p>Since you prefer to use FIND and MAP, I have a clearer solution for you then.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// product list\r\nconst productList = [{\"title\":\"Product X1\",\"offers\":[{\"seller\":\"Company X1\",\"price\":400},{\"seller\":\"Company X2\",\"price\":200},{\"seller\":\"Company X3\",\"price\":300}]},{\"title\":\"Product Y1\",\"offers\":[{\"seller\":\"Company Y1\",\"price\":1700},{\"seller\":\"Company Y2\",\"price\":1600},{\"seller\":\"Company Y3\",\"price\":1500},{\"seller\":\"Company Y4\",\"price\":1400}]},{\"title\":\"Product Z1\",\"offers\":[{\"seller\":\"Company Z1\",\"price\":50},{\"seller\":\"Company Z2\",\"price\":60},{\"seller\":\"Company Z3\",\"price\":10},{\"seller\":\"Company Z4\",\"price\":90},{\"seller\":\"Company Z5\",\"price\":70}]}]\r\n\r\n\r\n\r\n// Search text from Collection\r\nfunction searchProduct(niddle, haystack){\r\n  const searchResult  = haystack.find(item=&gt; item['title'] === niddle);\r\n  let bestOffer;\r\n  if(searchResult){\r\n    bestOffer = getBestOffer(searchResult);\r\n  }\r\n  return bestOffer; \r\n}\r\n\r\n\r\n\r\n// Search for best Offer\r\nfunction getBestOffer(dataInfo){\r\n  let bestOffer = {seller: null,price: null};\r\n  dataInfo['offers'].map((item, index)=&gt;{\r\n    if(bestOffer.price === null || bestOffer.price &gt; item.price){\r\n      bestOffer = item;\r\n    }\r\n  })\r\n  return bestOffer;\r\n}\r\n\r\n\r\n//run\r\nconsole.log( searchProduct(\"Product Z1\", productList) );\r\n\r\n//output is \r\n//  Object {seller: \"Company Z3\", price: 10}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I hope you like it.</p>\n"}], "owner": {"reputation": 569, "user_id": 4512868, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9ab134436477876d5197b8b09e2aef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/4512868/tomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58632710, "answer_count": 2, "score": 0, "last_activity_date": 1572467082, "creation_date": 1572464783, "question_id": 58632647, "link": "https://stackoverflow.com/questions/58632647/how-to-earch-minimal-value-in-objects-array-using-map-and-find-methods", "title": "How to earch minimal value in objects array using map() and find() methods?", "body": "<h3>Task</h3>\n\n<p>There is an array of objects of the form:</p>\n\n<pre><code>{\n  title: 'Macbook Air',\n  offers: [\n    {\n      seller: 'Avic',\n      price: 1200\n    },\n    {\n      seller: 'Citrus',\n      price: 1600\n    }\n  ]\n}\n</code></pre>\n\n<p>It is necessary to Convert to an array of objects of the form:  </p>\n\n<pre><code>{\n  title: 'Macbook Air',\n  bestOffer: {\n    name: 'Avic',\n    price: 1200\n  }\n}\n</code></pre>\n\n<p>Where <strong>bestOffer</strong> is an offer with <em>a minimum price value</em>.<br>\n<strong>Write in one line using <em>map()</em> and <em>find()</em>.</strong></p>\n\n<h2>Code</h2>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>\"use_strict\";\r\n \r\nvar productList = [\r\n  {\r\n    title: \"Product X1\",\r\n    offers: [\r\n      {\r\n        seller: \"Company X1\",\r\n        price: 400\r\n      },\r\n \r\n      {\r\n        seller: \"Company X2\",\r\n        price: 200\r\n      },\r\n \r\n      {\r\n        seller: \"Company X3\",\r\n        price: 300\r\n      }\r\n    ]\r\n  },\r\n \r\n  {\r\n    title: \"Product Y1\",\r\n    offers: [\r\n      {\r\n        seller: \"Company Y1\",\r\n        price: 1700\r\n      },\r\n \r\n      {\r\n        seller: \"Company Y2\",\r\n        price: 1600\r\n      },\r\n \r\n      {\r\n        seller: \"Company Y3\",\r\n        price: 1500\r\n      },\r\n \r\n      {\r\n        seller: \"Company Y4\",\r\n        price: 1400\r\n      }\r\n    ]\r\n  },\r\n \r\n  {\r\n    title: \"Product Z1\",\r\n    offers: [\r\n      {\r\n        seller: \"Company Z1\",\r\n        price: 50\r\n      },\r\n \r\n      {\r\n        seller: \"Company Z2\",\r\n        price: 60\r\n      },\r\n \r\n      {\r\n        seller: \"Company Z3\",\r\n        price: 10\r\n      },\r\n \r\n      {\r\n        seller: \"Company Z4\",\r\n        price: 90\r\n      },\r\n \r\n      {\r\n        seller: \"Company Z5\",\r\n        price: 70\r\n      }\r\n    ]\r\n  }\r\n]; \r\n \r\nconst destinations = productList.map(item =&gt;\r\n    ({\r\n        title: item.title,\r\n        bestOffer: ({\r\n            name: item.offers[0].seller, // TODO: How to implement find() method????\r\n            price: item.offers[0].price\r\n        })\r\n    })\r\n)\r\nconsole.log(destinations) </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My code work for restructuring objects for new array, BUT i dont know how to implement find() method for searching minimal value. Is it possible using find() method in this case??</p>\n"}, {"tags": ["typescript", "syntax"], "comments": [{"owner": {"reputation": 1547, "user_id": 3044117, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Rmo1E.jpg?s=128&g=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/3044117/eduardo"}, "reply_to_user": {"reputation": 2354, "user_id": 6540936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5365ef69ba8eeefddfaff5cc1750dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/6540936/julian"}, "edited": false, "score": 0, "creation_date": 1572467205, "post_id": 58632473, "comment_id": 103573266, "body": "I have no idea what did you mean! Are you saying the value of b = &#39;&#39; no matter the values at c?"}, {"owner": {"reputation": 2354, "user_id": 6540936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5365ef69ba8eeefddfaff5cc1750dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/6540936/julian"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1572467697, "post_id": 58632473, "comment_id": 103573458, "body": "Thanks @zerkms. I was wrong"}], "answers": [{"comments": [{"owner": {"reputation": 1547, "user_id": 3044117, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Rmo1E.jpg?s=128&g=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/3044117/eduardo"}, "edited": false, "score": 0, "creation_date": 1572467310, "post_id": 58633170, "comment_id": 103573303, "body": "Are you saying the value of b = &#39;&#39; no matter the values at c?"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 1547, "user_id": 3044117, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Rmo1E.jpg?s=128&g=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/3044117/eduardo"}, "edited": false, "score": 0, "creation_date": 1572467654, "post_id": 58633170, "comment_id": 103573438, "body": "@Eduardo <code>b</code> is assigned an empty string <code>&#39;&#39;</code> only if <code>c.a</code> is <code>undefined</code>."}, {"owner": {"reputation": 16, "user_id": 3861567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdbdd5fe0bf9cbc57f5c106a58e155a?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Cheek", "link": "https://stackoverflow.com/users/3861567/devin-cheek"}, "reply_to_user": {"reputation": 1547, "user_id": 3044117, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Rmo1E.jpg?s=128&g=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/3044117/eduardo"}, "edited": false, "score": 0, "creation_date": 1572467823, "post_id": 58633170, "comment_id": 103573522, "body": "@Eduardo The code you wrote basically says assign b to c.a unless c.a is undefined then assign b to &#39;&#39;. so if c.a is equal to &#39;hello&#39; b will also be equal to &#39;hello&#39;. however, if c.a is undefined then b will be set to the default value of &#39;&#39;"}], "tags": [], "owner": {"reputation": 16, "user_id": 3861567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdbdd5fe0bf9cbc57f5c106a58e155a?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Cheek", "link": "https://stackoverflow.com/users/3861567/devin-cheek"}, "is_accepted": true, "score": 0, "last_activity_date": 1572467233, "creation_date": 1572467233, "answer_id": 58633170, "question_id": 58632473, "link": "https://stackoverflow.com/questions/58632473/typescript-syntax-when-assigning-default-values/58633170#58633170", "title": "typescript syntax when assigning default values", "body": "<p>Properties are assigned the default value if their value is undefined. So if <code>c.a</code> is undefined you would be correct. </p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\" rel=\"nofollow noreferrer\">here</a> are the docs on destructuring if you want more information.</p>\n"}], "owner": {"reputation": 1547, "user_id": 3044117, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Rmo1E.jpg?s=128&g=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/3044117/eduardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 58633170, "answer_count": 1, "score": 0, "last_activity_date": 1572467233, "creation_date": 1572463907, "question_id": 58632473, "link": "https://stackoverflow.com/questions/58632473/typescript-syntax-when-assigning-default-values", "title": "typescript syntax when assigning default values", "body": "<p>I have something like this:</p>\n\n<p><code>\nconst {\n  a: b = ''\n} = c;\n</code></p>\n\n<p>and later on, many validations are done based on the value at <code>b</code>, but, according to me, that value was assigned '', is this correct?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 868, "user_id": 8555571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1ac59eb89771c08fe0f08d3dd3dbfd?s=128&d=identicon&r=PG", "display_name": "cuddlemeister", "link": "https://stackoverflow.com/users/8555571/cuddlemeister"}, "edited": false, "score": 0, "creation_date": 1572463914, "post_id": 58632461, "comment_id": 103571969, "body": "If you type console.log instead of navigate method, will you see the output?"}, {"owner": {"reputation": 87, "user_id": 11815621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f57e1c4e8f494becbbc134e587c1a5?s=128&d=identicon&r=PG&f=1", "display_name": "igor", "link": "https://stackoverflow.com/users/11815621/igor"}, "reply_to_user": {"reputation": 868, "user_id": 8555571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1ac59eb89771c08fe0f08d3dd3dbfd?s=128&d=identicon&r=PG", "display_name": "cuddlemeister", "link": "https://stackoverflow.com/users/8555571/cuddlemeister"}, "edited": false, "score": 0, "creation_date": 1572464234, "post_id": 58632461, "comment_id": 103572094, "body": "@cuddlemeister Yep, if I change <code>this.router.navigate([&#39;home&#39;])</code> to <code>console.log(&#39;home&#39;)</code>, I do see <code>home</code> in the console."}, {"owner": {"reputation": 509, "user_id": 9185707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40bc2bc1da2f0e1cef5fd1fbd544f86?s=128&d=identicon&r=PG&f=1", "display_name": "Antediluvian", "link": "https://stackoverflow.com/users/9185707/antediluvian"}, "edited": false, "score": 0, "creation_date": 1572474598, "post_id": 58632461, "comment_id": 103575883, "body": "try <code>tap(_ =&gt; setTimeout(_ =&gt; this.router.navigate([&#39;home&#39;]), 0))</code>"}, {"owner": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1572480321, "post_id": 58632461, "comment_id": 103577276, "body": "do you get any errors in your console? I suppose you may need to add a leading slash in the route <code>this.router.navigate([&#39;&#47;home&#39;]</code>"}, {"owner": {"reputation": 87, "user_id": 11815621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f57e1c4e8f494becbbc134e587c1a5?s=128&d=identicon&r=PG&f=1", "display_name": "igor", "link": "https://stackoverflow.com/users/11815621/igor"}, "reply_to_user": {"reputation": 509, "user_id": 9185707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40bc2bc1da2f0e1cef5fd1fbd544f86?s=128&d=identicon&r=PG&f=1", "display_name": "Antediluvian", "link": "https://stackoverflow.com/users/9185707/antediluvian"}, "edited": false, "score": 0, "creation_date": 1572505872, "post_id": 58632461, "comment_id": 103582773, "body": "@Antediluvian No, it did not change anything... Seems like the whole issue has something to do with the part I refactored, I will provide more information on that a bit later."}, {"owner": {"reputation": 87, "user_id": 11815621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f57e1c4e8f494becbbc134e587c1a5?s=128&d=identicon&r=PG&f=1", "display_name": "igor", "link": "https://stackoverflow.com/users/11815621/igor"}, "reply_to_user": {"reputation": 5325, "user_id": 6118550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jq2eV.png?s=128&g=1", "display_name": "C_Ogoo", "link": "https://stackoverflow.com/users/6118550/c-ogoo"}, "edited": false, "score": 0, "creation_date": 1572505970, "post_id": 58632461, "comment_id": 103582808, "body": "@C_Ogoo Nah, it used to work like that and as far as I remember in the doc they don&#39;t recommend using slashes in cases like this. The router is smart enough to figure it out."}], "owner": {"reputation": 87, "user_id": 11815621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f57e1c4e8f494becbbc134e587c1a5?s=128&d=identicon&r=PG&f=1", "display_name": "igor", "link": "https://stackoverflow.com/users/11815621/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572464948, "creation_date": 1572463832, "last_edit_date": 1572464948, "question_id": 58632461, "link": "https://stackoverflow.com/questions/58632461/angular-routing-navigation-wont-work-inside-the-tap-operator", "title": "Angular routing navigation won&#39;t work inside the tap operator", "body": "<p>Here is the <code>signIn</code> method, it's not complete but it used to work until I made some refactoring (now the guards return <code>Observable</code>s):</p>\n\n<pre><code>  public signInWithGooglePopup(): any {\n    this.firebaseAuthService.setMediaProvider(new auth.GoogleAuthProvider());\n    this.firebaseAuthService.signInWithPopup()\n        .pipe\n        (\n          tap(() =&gt; this.router.navigate(['home'])),\n          map(userCredential =&gt; new FirebaseUser().deserialize(userCredential.user)),\n          switchMap(firebaseUser =&gt; this.firebaseUserService.update(firebaseUser))\n        ).subscribe();\n  }\n</code></pre>\n\n<p>Seems like after that piece of refactoring the navigation went to the dogs...I don't get why.</p>\n\n<p>After I click my <code>Sign In</code> button the url stays the same even though I can  access the home page (the one I'm supposed to be navigated to) by typing its url in the address bar. That's the navigation that does not work. what am I doing wrong?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here is the logic inside the authentication guard:</p>\n\n<pre><code>    return this.firebaseAuthService.isSignedIn().pipe(\n      map(\n        isLoggedIn =&gt; {\n          if (isLoggedIn) {\n            return true;\n          } else {\n            this.router.navigate(['sign-in']);\n            return false;\n          }\n        }\n      )\n    );\n</code></pre>\n"}, {"tags": ["typescript", "unit-testing", "jasmine", "mocking"], "comments": [{"owner": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1572466636, "post_id": 58632377, "comment_id": 103573067, "body": "I don&#39;t see you creating an instance of <code>DrugPriceApi</code> in your tests, however the methods in your class are instance methods rather than static methods. You will need to create a reference via <code>drugPriceApi = new DrugPriceApi()</code> and use that in the places where you are trying to use <code>DrugPriceApi</code> (i.e. <code>spyOn(DrugPriceApi, &#39;core&#39;)</code> and <code>DrugPriceApi.core(param)</code>)"}, {"owner": {"reputation": 677, "user_id": 1944403, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ea9a77e95fc58abbac2faa36a9a4ca?s=128&d=identicon&r=PG", "display_name": "aftab", "link": "https://stackoverflow.com/users/1944403/aftab"}, "reply_to_user": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1572467014, "post_id": 58632377, "comment_id": 103573205, "body": "@DanielWStrimpel ok thanks for the help, how do we call inherited methods that are private to class , there are methods in core that i wanted to test , Any idea ? i updated my question so in core we are calling getDrug how can i test that call ?"}, {"owner": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1572470444, "post_id": 58632377, "comment_id": 103574575, "body": "You don&#39;t mock out private methods in tests (esp. as there isn&#39;t a way if it is truly private). You mock out the external interface. If you need to mock out internals in a class that gives you an indication that you probably need to break out some logic into another class with public methods that you can mock out."}, {"owner": {"reputation": 677, "user_id": 1944403, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ea9a77e95fc58abbac2faa36a9a4ca?s=128&d=identicon&r=PG", "display_name": "aftab", "link": "https://stackoverflow.com/users/1944403/aftab"}, "reply_to_user": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1572471771, "post_id": 58632377, "comment_id": 103575028, "body": "understood but how to cover that in coverage report it shows still untested code"}, {"owner": {"reputation": 7054, "user_id": 7407935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v4eTR.jpg?s=128&g=1", "display_name": "Daniel W Strimpel", "link": "https://stackoverflow.com/users/7407935/daniel-w-strimpel"}, "edited": false, "score": 0, "creation_date": 1572562750, "post_id": 58632377, "comment_id": 103609007, "body": "You will have to provide more details about the code to try to help you out with testing the class. You don&#39;t mock out methods of the class you are trying to test. You mock out dependencies that it uses. If you can show the relevant code in the class, we can try to help you determine how to test what you are doing."}], "owner": {"reputation": 677, "user_id": 1944403, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ea9a77e95fc58abbac2faa36a9a4ca?s=128&d=identicon&r=PG", "display_name": "aftab", "link": "https://stackoverflow.com/users/1944403/aftab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572467079, "creation_date": 1572463381, "last_edit_date": 1572467079, "question_id": 58632377, "link": "https://stackoverflow.com/questions/58632377/how-to-spy-on-typescript-class-using-jasmine", "title": "How to spy on typescript class using jasmine?", "body": "<p>I have a class that is calling backend to get data , so in below code i tried to write unit test for the class in order to mock it using spyOn so i can get the desire result, it is failing to import the class , Any idea how spyOn class methods using jasmine ?</p>\n\n<p>Basically trying to spyOn on <code>core</code> method and underlying calls.</p>\n\n<p>DrugPriceApi.ts</p>\n\n<pre><code>export class DrugPriceApi extends Types.ModuleBase &lt; DrugPriceParam, DrugPriceResultSet[] &gt; {\n\n    private _memberId: string = \"\";\n    private _dependencies: any;\n    private errorMessage: string = \"There was an issue while retrieving drug price. Please try again.\";\n\n    before(args: DrugPriceParam): Promise &lt; DrugPriceParam &gt; {\n        args.daysSupply = args.daysSupply ? args.daysSupply : args.appName === \"VOYA\" ? \"90\" : \"BLNK\";\n        return Promise.resolve(args);\n    }\n\n    core(args: DrugPriceParam, requestMethod: Interface.Core.RequestMethod, _dependencies: any): Promise &lt; any &gt; {\n        this._dependencies = _dependencies;\n\n        return new Promise &lt; any &gt; ((resolve: Function, reject: Function) =&gt; {\n               this.getDrug(function(resolve){ resolve( //response here);});\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p>DrugPriceApi.spec.ts</p>\n\n<pre><code>import { Interface } from \"dist/karma/core-sdk-lib/src/ts/interface/index\";\nimport { } from 'jasmine';\nimport { Index } from \"../../../../../index\";\nimport { setup } from \"dist/karma/core-sdk-lib/src/ts/helper/TestSetup.helper\";\nimport { CApiSettings, CLogger } from \"@cvsdigital_specialty/common-utils\";\nimport { DrugPriceParam } from \"./DrugPriceApi.interface\";\nimport {DrugPriceApi} from \"./DrugPriceApi.node\";\n    describe(\"Module\", () =&gt; {\n        let _sdkInstance: any;\n        let param = {\n            tokenId: '123',\n            appName: 'CMK_TEST',\n            refId: '123'\n        } as DrugPriceParam;\n\n        let memberInfo: any = {};\n        memberInfo.dateOfBirth = \"11/11/11\";\n        memberInfo.externalID = \"6172\";\n        memberInfo.internalID = \"12\";\n        memberInfo.clientId = \"22322\";\n        memberInfo.planId = \"902H93\";\n        memberInfo.eligibility = {\n            \"benefitPlanList\": {\n                \"benefitPlan\": [\n                    {\n                        \"active\": true,\n                        \"deliverySystem\": 2,\n                    },\n                    {\n                        \"active\": true,\n                        \"deliverySystem\": 3,\n                    }\n                ]\n            }\n        };\n        param.memberInfo = memberInfo;\n        beforeEach(() =&gt; {\n            spyOn(DrugPriceApi, 'core' as any).and.returnValue(1); // 'as any' prevents compiler warning\n          });\n\n          it('verifies that core was called', () =&gt; {\n            const module = DrugPriceApi.core(param);\n          });\n\n    });\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "firebase", "npm", "node-modules"], "answers": [{"comments": [{"owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573635017, "post_id": 58832707, "comment_id": 103941814, "body": "As far as I know, npm link is only for testing and does not work if you want to deploy the resulting code (for example my functions)."}, {"owner": {"reputation": 329, "user_id": 7437032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7jk6.jpg?s=128&g=1", "display_name": "friedow", "link": "https://stackoverflow.com/users/7437032/friedow"}, "reply_to_user": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573646540, "post_id": 58832707, "comment_id": 103947875, "body": "I see, you should probably add this requirement to your question."}, {"owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573646812, "post_id": 58832707, "comment_id": 103948029, "body": "It is mentioned in the question already, but I will clarify it."}], "tags": [], "owner": {"reputation": 329, "user_id": 7437032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7jk6.jpg?s=128&g=1", "display_name": "friedow", "link": "https://stackoverflow.com/users/7437032/friedow"}, "is_accepted": false, "score": -1, "last_activity_date": 1573632314, "creation_date": 1573632314, "answer_id": 58832707, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes/58832707#58832707", "title": "Using a shared node module for common classes", "body": "<p>The tool you are looking for is <code>npm link</code>. <code>npm link</code> provides symlinks to a local npm package. That way you can link a package and use it in your main project without publishing it to the npm package library.</p>\n\n<p>Applied to your use case:</p>\n\n<ol>\n<li>Use <code>npm link</code> inside your <code>shared</code> package. This will set the symlink destination for future installs.</li>\n<li>Navigate to your main project(s). Inside your <code>functions</code> package and use <code>npm link shared</code> to link the shared package and add it to the <code>node_modules</code> directory. </li>\n</ol>\n\n<p>Here is a link to the documentation: <a href=\"https://docs.npmjs.com/cli/link.html\" rel=\"nofollow noreferrer\">https://docs.npmjs.com/cli/link.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573747017, "post_id": 58836897, "comment_id": 103992670, "body": "It is actually not a bad idea, but local development and testing is basically gone with this approach."}], "tags": [], "owner": {"reputation": 329, "user_id": 7437032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7jk6.jpg?s=128&g=1", "display_name": "friedow", "link": "https://stackoverflow.com/users/7437032/friedow"}, "is_accepted": false, "score": 2, "last_activity_date": 1573647236, "creation_date": 1573647236, "answer_id": 58836897, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes/58836897#58836897", "title": "Using a shared node module for common classes", "body": "<p>Another possible solution, if you are using git to manage your code, is using <code>git submodule</code>. Using <code>git submodule</code> you are able to include another git repository into your project.</p>\n\n<p>Applied to your use case:</p>\n\n<ol>\n<li>Push the current version of your shared-git-repository</li>\n<li>Use <code>git submodule add &lt;shared-git-repository-link&gt;</code> inside your main project(s) to link the shared repository.</li>\n</ol>\n\n<p>Here is a link to the documentation: <a href=\"https://git-scm.com/docs/git-submodule\" rel=\"nofollow noreferrer\">https://git-scm.com/docs/git-submodule</a></p>\n"}, {"comments": [{"owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573809214, "post_id": 58862738, "comment_id": 104015088, "body": "Intresting! I will definitly check it out and look if this is the right fit."}, {"owner": {"reputation": 8234, "user_id": 3818829, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/157f73e33d8d41a48c8fd4d5e7dfc37d?s=128&d=identicon&r=PG", "display_name": "jasan", "link": "https://stackoverflow.com/users/3818829/jasan"}, "edited": false, "score": 0, "creation_date": 1614057844, "post_id": 58862738, "comment_id": 117261274, "body": "this does not work for deploying firebase functions.  GET <a href=\"https://registry.npmjs.org/@appName%!f(MISSING)shared\" rel=\"nofollow noreferrer\">registry.npmjs.org/@appName%!f(MISSING)shared</a> - Not found"}], "tags": [], "owner": {"reputation": 3930, "user_id": 264502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLTLo.png?s=128&g=1", "display_name": "Jan Molak", "link": "https://stackoverflow.com/users/264502/jan-molak"}, "is_accepted": false, "score": 2, "last_activity_date": 1573771495, "last_edit_date": 1573771495, "creation_date": 1573752984, "answer_id": 58862738, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes/58862738#58862738", "title": "Using a shared node module for common classes", "body": "<p>You might want to try <a href=\"https://github.com/lerna/lerna\" rel=\"nofollow noreferrer\">Lerna</a>, a tool for managing JavaScript (and TypeScript) projects with multiple packages.</p>\n\n<h2>Setup</h2>\n\n<p>Assuming that your project has the following directory structure:</p>\n\n<pre><code>packages\n  ionic-app\n    package.json\n  firebase-functions\n    package.json\n  shared\n    package.json\n</code></pre>\n\n<p>Make sure to specify the correct access level (<code>private</code> and <code>config/access</code> keys) in all the modules you don't wish to have published, as well as the <code>typings</code> entry in your <code>shared</code> module:</p>\n\n<p>Shared:</p>\n\n<pre><code>{\n  \"name\": \"shared\",\n  \"version\": \"1.0.0\",\n  \"private\": true,\n  \"config\": {\n    \"access\": \"private\"\n  },\n  \"main\": \"lib/index.js\",\n  \"typings\": \"lib/index.d.ts\",\n  \"scripts\": {\n    \"compile\": \"tsc --project tsconfig.json\"\n  }\n}\n</code></pre>\n\n<p>Ionic-app:</p>\n\n<pre><code>{\n  \"name\": \"ionic-app\",\n  \"version\": \"1.0.0\",\n  \"private\": true,\n  \"config\": {\n    \"access\": \"private\"\n  },\n  \"main\": \"lib/index.js\",\n  \"scripts\": {\n    \"compile\": \"tsc --project tsconfig.json\"\n  },\n  \"dependencies\": {\n    \"shared\": \"1.0.0\"\n  }\n}\n</code></pre>\n\n<p>With the above changes in place, you can create a root-level <code>package.json</code> where you can specify any <code>devDependencies</code> that you wish all your project modules to have access to, such as your unit testing framework, tslint, etc.</p>\n\n<pre><code>packages\n  ionic-app\n    package.json\n  firebase-functions\n    package.json\n  shared\n    package.json\npackage.json         // root-level, same as the `packages` dir\n</code></pre>\n\n<p>You can also use this root-level <code>package.json</code> to define npm scripts that will invoke the corresponding scripts in your project's modules (via lerna):</p>\n\n<pre><code>{\n  \"name\": \"my-project\",\n  \"version\": \"1.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"compile\": \"lerna run compile --stream\",\n    \"postinstall\": \"lerna bootstrap\",\n  },\n  \"devDependencies\": {\n    \"lerna\": \"^3.18.4\",\n    \"tslint\": \"^5.20.1\",\n    \"typescript\": \"^3.7.2\"\n  },\n}\n</code></pre>\n\n<p>With that in place, add the lerna config file in your root directory:</p>\n\n<pre><code>packages\n  ionic-app\n    package.json\n  firebase-functions\n    package.json\n  shared\n    package.json\npackage.json\nlerna.json\n</code></pre>\n\n<p>with following contents:</p>\n\n<pre><code>{\n  \"lerna\": \"3.18.4\",\n  \"loglevel\": \"info\",\n  \"packages\": [\n    \"packages/*\"\n  ],\n  \"version\": \"1.0.0\"\n}\n</code></pre>\n\n<p>Now when you run <code>npm install</code> in the root directory, the <code>postinstall</code> script defined in your root-level <code>package.json</code> will invoke <code>lerna bootstrap</code>.</p>\n\n<p>What <code>lerna bootstrap</code> does is that it will symlink your <code>shared</code> module to <code>ionic-app/node_modules/shared</code> and <code>firebase-functions/node_modules/shared</code>, so from the point of those two modules, <code>shared</code> looks just like any other npm module.</p>\n\n<h2>Compilation</h2>\n\n<p>Of course, symlinking the modules is not enough as you still need to compile them from TypeScript to JavaScript.</p>\n\n<p>That's where the root-level <code>package.json</code> <code>compile</code> script comes into play.</p>\n\n<p>When you run <code>npm run compile</code> in your project root, npm will invoke <code>lerna run compile --stream</code>, and <code>lerna run compile --stream</code> invokes the script called <code>compile</code> in each of your modules' <code>package.json</code> file.</p>\n\n<p>Since each of your modules now has its own <code>compile</code> script, you should can have a <code>tsonfig.json</code> file per module. If you don't like the duplication you could get away with a root-level tsconfig, or a combination of a root-level tsconfig and module-level tsconfig files inheriting from the root one.</p>\n\n<p>If you'd like to see how this setup works on a real-world project, have a look at <a href=\"https://github.com/jan-molak/serenity-js/tree/2.0\" rel=\"nofollow noreferrer\">Serenity/JS</a> where I've been using it quite extensively.</p>\n\n<h2>Deployment</h2>\n\n<p>The nice thing about having the <code>shared</code> module symlinked under <code>node_modules</code> under <code>firebase-functions</code> and <code>ionic-app</code>, and your <code>devDepedencies</code> under <code>node_modules</code> under project root is that if you need to deploy the consumer module anywhere (so the <code>ionic-app</code> for example), you could just zip it all up together with its <code>node_modules</code> and not worry about having to remove the dev depedencies prior to deployment.</p>\n\n<p>Hope this helps!</p>\n\n<p>Jan</p>\n"}, {"comments": [{"owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573809175, "post_id": 58873238, "comment_id": 104015066, "body": "I think you misunderstood something. I never said I don&#39;t want to use npm. In fact all three of those modules are node modules. I just said, that I don&#39;t want to upload my modules to npm. Can you elaborate on that 4th part a bit more - that sounds intresting? maybe provide a code sample?"}, {"owner": {"reputation": 157, "user_id": 7027626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12758d902298f23437749452c40a03ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dzhurov", "link": "https://stackoverflow.com/users/7027626/ivan-dzhurov"}, "reply_to_user": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1573809357, "post_id": 58873238, "comment_id": 104015170, "body": "I will add another answer, as it will be long and unreadable as a comment"}], "tags": [], "owner": {"reputation": 157, "user_id": 7027626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12758d902298f23437749452c40a03ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dzhurov", "link": "https://stackoverflow.com/users/7027626/ivan-dzhurov"}, "is_accepted": false, "score": 0, "last_activity_date": 1573810042, "last_edit_date": 1573810042, "creation_date": 1573807503, "answer_id": 58873238, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes/58873238#58873238", "title": "Using a shared node module for common classes", "body": "<p>If I understand your problem correctly, the solution is more complex than a single answer and it partly depends on your preference.</p>\n\n<p><strong>Approach 1: Local copies</strong></p>\n\n<p>You can use <a href=\"https://gulpjs.com/\" rel=\"nofollow noreferrer\">Gulp</a> to automate the working solution you described already, but IMO it is not very easy to maintain and drastically increases the complexity if at some point another developer comes in.</p>\n\n<p><strong>Approach 2: Monorepo</strong></p>\n\n<p>You can create a single repository that contains all three folders and connect them so they behave as a single project. As already answered above, you can use <a href=\"https://github.com/lerna/lerna\" rel=\"nofollow noreferrer\">Lerna</a>. It requires a bit of a configuration, but once done, those folders will behave as a single project.</p>\n\n<p><strong>Approach 3: Components</strong></p>\n\n<p>Treat each one of these folders as a stand-alone component. Take a look at <a href=\"https://bit.dev/\" rel=\"nofollow noreferrer\">Bit</a>. It will allow you to set up the folders as smaller parts of a bigger project and you can create a private account that will scope those components only to you. \nOnce initially set up, it will allow you to even apply updates to the separate folders and the parent one that uses them will automatically get the updates.</p>\n\n<p><strong>Approach 4: Packages</strong></p>\n\n<p>You specifically said that you don't want to use npm, but i want to share it, because I am currently working with a set up as described below and is doing a perfect job for me:</p>\n\n<ol>\n<li>Use <code>npm</code> or <code>yarn</code> to create a package for each folder(you can create scoped packages for both of them so the code will only available to you, if this is your concern).</li>\n<li>In the parent folder(that uses all of these folders), the created packages are connected as dependencies.</li>\n<li>I use webpack to bundle all the code, using webpack path aliases in combination with typescript paths.</li>\n</ol>\n\n<p>Works like a charm and when the packages are symlinked for local development it works entirely offline and in my experience - each folder is scalable separately and very easy to maintain. </p>\n\n<p><strong>Note</strong></p>\n\n<p>The 'child' packages are already precompiled in my case as they are pretty big and I have created separate tsconfigs for each package, but the beautiful thing is that you can change it easily. In the past I've both used typescript in the module and compiled files, and also raw js files, so the entire thing is very, very versatile.</p>\n\n<p>Hope this helps</p>\n\n<p>*****UPDATE****\nTo continue on point 4:\nI apologize, my bad. Maybe I got it wrong because as far as I know, you cannot symlink a module if it is not uploaded. Nevertheless, here it is:</p>\n\n<ol>\n<li>You have a separate npm module, let's use <code>firebase-functions</code> for that. You compile it, or use raw ts, depending on your preference.</li>\n<li>In your parent project add <code>firebase-functions</code> as a dependency.</li>\n<li>In <code>tsconfig.json</code>, add <code>\"paths\": {\"firebase-functions: ['node_modules/firebase-functions']\"}</code></li>\n<li>In webpack - <code>resolve: {extensions: ['ts', 'js'], alias: 'firebase-functions': }</code></li>\n</ol>\n\n<p>This way, you reference all your exported functions from the <code>firebase-functions</code> module simply by using <code>import { Something } from 'firebase-functions'</code>. Webpack and TypeScript will link it to the node modules folder. With this configuration, the parent project will not care if the <code>firebase-functions</code> module is written in TypeScript or vanilla javascript.</p>\n\n<p>Once set up, it will work perfectly for production. Then, to link and work offline:</p>\n\n<ol>\n<li>Navigate to <code>firebase-functions</code> project and write <code>npm link</code>. It will create a symlink, local to your machine and will map the link the name you set in package.json.</li>\n<li>Navigate to parent project and write <code>npm link firebase-functions</code>, which will create the symlink and map the dependency of firebase-functions to the folder in you have created it.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 9545, "user_id": 3068190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDAi7.jpg?s=128&g=1", "display_name": "samthecodingman", "link": "https://stackoverflow.com/users/3068190/samthecodingman"}, "is_accepted": false, "score": 4, "last_activity_date": 1573821508, "creation_date": 1573821508, "answer_id": 58877253, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes/58877253#58877253", "title": "Using a shared node module for common classes", "body": "<p><strong>Preface:</strong> I'm not too familiar with how Typescript compilation works and how <code>package.json</code> in such a module should be defined. This solution, although it works, could be considered a hacky way of achieving the task at hand.</p>\n\n<p>Assuming the following directory structure:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>project/\n  ionic-app/\n    package.json\n  functions/\n    src/\n      index.ts\n    lib/\n      index.js\n    package.json\n  shared/\n    src/\n      shared.ts\n    lib/\n      shared.js\n    package.json\n</code></pre>\n\n<p>When deploying a Firebase service, you can attach commands to the <a href=\"https://firebase.google.com/docs/cli#hooks\" rel=\"nofollow noreferrer\">predeploy and postdeploy hooks</a>. This is done in <code>firebase.json</code> via the properties <code>predeploy</code> and <code>postdeploy</code> on the desired service. These properties contain an array of sequential commands to run before and after deploying your code respectively. Furthermore, these commands are called with the environment variables <code>RESOURCE_DIR</code> (the directory path of <code>./functions</code> or <code>./ionic-app</code>, whichever is applicable) and <code>PROJECT_DIR</code> (the directory path containing <code>firebase.json</code>).</p>\n\n<p>Using the <code>predeploy</code> array for <code>functions</code> inside <code>firebase.json</code>, we can copy the shared library's code into the folder that is deployed to the Cloud Functions instance. By doing this, you can simply include the shared code as if it were a library located in a subfolder or you can map it's name using <a href=\"https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping\" rel=\"nofollow noreferrer\">Typescript's path mapping</a> in <code>tsconfig.json</code> to a named module (so you can use <code>import { hiThere } from 'shared';</code>).</p>\n\n<p>The <code>predeploy</code> hook definition (uses global install of <a href=\"https://www.npmjs.com/package/shx\" rel=\"nofollow noreferrer\"><code>shx</code></a> for Windows compatibility):</p>\n\n<pre><code>// firebase.json\n{\n  \"functions\": {\n    \"predeploy\": [\n      \"shx rm -rf \\\"$RESOURCE_DIR/src/shared\\\"\", // delete existing files\n      \"shx cp -R \\\"$PROJECT_DIR/shared/.\\\" \\\"$RESOURCE_DIR/src/shared\\\"\", // copy latest version\n      \"npm --prefix \\\"$RESOURCE_DIR\\\" run lint\", // lint &amp; compile\n      \"npm --prefix \\\"$RESOURCE_DIR\\\" run build\"\n    ]\n  },\n  \"hosting\": {\n    \"public\": \"ionic-app\",\n    ...\n  }\n}\n</code></pre>\n\n<p>Linking the copied library's typescript source to the functions typescript compiler config:</p>\n\n<pre><code>// functions/tsconfig.json\n{\n  \"compilerOptions\": {\n    ...,\n    \"baseUrl\": \"./src\",\n    \"paths\": {\n      \"shared\": [\"shared/src\"]\n    }\n  },\n  \"include\": [\n    \"src\"\n  ],\n  ...\n}\n</code></pre>\n\n<p>Associating the module name, \"shared\", to the copied library's package folder.</p>\n\n<pre><code>// functions/package.json\n{\n  \"name\": \"functions\",\n  \"scripts\": {\n    ...\n  },\n  \"engines\": {\n    \"node\": \"8\"\n  },\n  \"main\": \"lib/index.js\",\n  \"dependencies\": {\n    \"firebase-admin\": \"^8.6.0\",\n    \"firebase-functions\": \"^3.3.0\",\n    \"shared\": \"file:./src/shared\",\n    ...\n  },\n  \"devDependencies\": {\n    \"tslint\": \"^5.12.0\",\n    \"typescript\": \"^3.2.2\",\n    \"firebase-functions-test\": \"^0.1.6\"\n  },\n  \"private\": true\n}\n</code></pre>\n\n<p>The same approach can be used with the hosting folder.\n<hr>\nHopefully this inspires someone who is more familiar with Typescript compilation to come up with a cleaner solution that makes use of these hooks.</p>\n"}, {"comments": [{"owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1574071627, "post_id": 58909630, "comment_id": 104086215, "body": "This might be a solution, but it is unfortunately not for me. Thank you for your time though!"}, {"owner": {"reputation": 37059, "user_id": 85597, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/pc3cE.jpg?s=128&g=1", "display_name": "Akash Kava", "link": "https://stackoverflow.com/users/85597/akash-kava"}, "reply_to_user": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "edited": false, "score": 0, "creation_date": 1574077002, "post_id": 58909630, "comment_id": 104089297, "body": "There is also a local npm repository which is installed as a small node server, <a href=\"https://verdaccio.org/\" rel=\"nofollow noreferrer\">verdaccio.org</a>"}], "tags": [], "owner": {"reputation": 37059, "user_id": 85597, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/pc3cE.jpg?s=128&g=1", "display_name": "Akash Kava", "link": "https://stackoverflow.com/users/85597/akash-kava"}, "is_accepted": false, "score": 0, "last_activity_date": 1574061502, "creation_date": 1574061502, "answer_id": 58909630, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes/58909630#58909630", "title": "Using a shared node module for common classes", "body": "<blockquote>\n  <p>I don't want to upload my code to npm to use it locally and am not planning on uploading the code at all. It should 100% work offline.</p>\n</blockquote>\n\n<p>All npm modules are installed locally and always work offline, but if you do not want to publish your packages publicly so people can see it, you can install private npm registry.</p>\n\n<p>ProGet is NuGet/Npm Private repository server available for windows which you can use in your private development/production environment to host, access and publish your private packages. Though it is on windows but I am sure there are various alternatives available on linux.</p>\n\n<ol>\n<li>Git Submodules is bad idea, it is really an old fashion way to share code which is not versioned like packages are, changing and committing submodules are real pain.</li>\n<li>Source import folder is also a bad idea, again versioning is issue, because if someone modifies dependent folder in dependent repository, again tracking it is nightmare.</li>\n<li>Any third party scripted tools to emulate package separation is waste of time as npm already provides range of tools to manage packages so well.</li>\n</ol>\n\n<p><strong>Here is our build/deployment scenario.</strong></p>\n\n<ol>\n<li>Every private package has <code>.npmrc</code> which contains <code>registry=https://private-npm-repository</code>.</li>\n<li>We publish all our private packages onto our privately hosted ProGet repository.</li>\n<li>Every private package contains dependent private packages on ProGet.</li>\n<li>Our build server accesses ProGet via npm authentication set by us. Nobody outside our network has access to this repository.</li>\n<li>Our build server creates npm package with <code>bundled dependencies</code> which contains all packages inside <code>node_modules</code> and production server never needs to access NPM or private NPM packages as all necessary packages are already bundled.</li>\n</ol>\n\n<p><strong>Using private npm repository has various advantages,</strong></p>\n\n<ol>\n<li>No need of custom script</li>\n<li>Fits into node buid/publish pipeline</li>\n<li>Every private npm package will contain direct link to your private git source control, easy to debug and investigate errors in future</li>\n<li>Every package is a readonly snapshot, so once published cannot be modified, and while you are making new features, existing code base with older version of dependent packages will not be affected.</li>\n<li>You can easily make some packages public and move to some other repository in future</li>\n<li>If your private npm provider software changes, for example you decide to move your code into node's private npm package registry cloud, you will not need to make any changes into your code.</li>\n</ol>\n"}], "owner": {"reputation": 4702, "user_id": 9150652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wq-FHmDsL9Q/AAAAAAAAAAI/AAAAAAAAAAc/2nUaRgj2kpQ/photo.jpg?sz=128", "display_name": "MauriceNino", "link": "https://stackoverflow.com/users/9150652/mauricenino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3085, "favorite_count": 2, "answer_count": 6, "score": 15, "last_activity_date": 1574061502, "creation_date": 1572462271, "last_edit_date": 1573747605, "question_id": 58632138, "link": "https://stackoverflow.com/questions/58632138/using-a-shared-node-module-for-common-classes", "title": "Using a shared node module for common classes", "body": "<p><strong>Goal</strong></p>\n\n<p>So I am having a project with this structure:</p>\n\n<ul>\n<li>ionic-app</li>\n<li>firebase-functions</li>\n<li>shared</li>\n</ul>\n\n<p>The goal is to define common interfaces and classes in the <code>shared</code> module.</p>\n\n<p><strong>Restrictions</strong></p>\n\n<p>I don't want to upload my code to npm to use it locally and am not planning on uploading the code at all. It should 100% work offline.</p>\n\n<p>While the development process should work offline, the <code>ionic-app</code> and <code>firebase-functions</code> modules are going to be deployed to firebase (hosting &amp; functions). Therefore, the code from the <code>shared</code> module should be available there.</p>\n\n<p><strong>What I have tried so far</strong></p>\n\n<ul>\n<li>I have tried using <a href=\"https://www.typescriptlang.org/docs/handbook/project-references.html\" rel=\"noreferrer\">Project References</a> in typescript, but I have not gotten it close to working</li>\n<li>I tried it with installing it as an npm module like in the second answer of <a href=\"https://stackoverflow.com/questions/8088795/installing-a-local-module-using-npm\">this question</a>\n\n<ul>\n<li>It seems to be working fine at first, but during the build, I get an error like this when running <code>firebase deploy</code>: </li>\n</ul></li>\n</ul>\n\n<pre><code>Function failed on loading user code. Error message: Code in file lib/index.js can't be loaded.\nDid you list all required modules in the package.json dependencies?\nDetailed stack trace: Error: Cannot find module 'shared'\n    at Function.Module._resolveFilename (module.js:548:15)\n    at Function.Module._load (module.js:475:25)\n    at Module.require (module.js:597:17)\n    at require (internal/module.js:11:18)\n    at Object.&lt;anonymous&gt; (/srv/lib/index.js:5:18)\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Do you have a solution for making a shared module using either typescripts config, or NPM?</p>\n\n<p>Please do not mark this as a duplicate \u2192 I have tried any solution I have found on StackOverflow.</p>\n\n<p><strong>Additional Info</strong></p>\n\n<p>Config for shared:</p>\n\n<pre><code>// package.json\n{\n  \"name\": \"shared\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"dist/src/index.js\",\n  \"types\": \"dist/src/index.d.ts\",\n  \"files\": [\n    \"dist/src/**/*\"\n  ],\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"publishConfig\": {\n    \"access\": \"private\"\n  }\n}\n\n// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"rootDir\": \".\",\n    \"sourceRoot\": \"src\",\n    \"outDir\": \"dist\",\n    \"sourceMap\": true,\n    \"declaration\": true,\n    \"target\": \"es2017\"\n  }\n}\n</code></pre>\n\n<p>Config for functions:</p>\n\n<pre><code>// package.json\n{\n  \"name\": \"functions\",\n  \"scripts\": {\n    \"lint\": \"tslint --project tsconfig.json\",\n    \"build\": \"tsc\",\n    \"serve\": \"npm run build &amp;&amp; firebase serve --only functions\",\n    \"shell\": \"npm run build &amp;&amp; firebase functions:shell\",\n    \"start\": \"npm run shell\",\n    \"deploy\": \"firebase deploy --only functions\",\n    \"logs\": \"firebase functions:log\"\n  },\n  \"engines\": {\n    \"node\": \"8\"\n  },\n  \"main\": \"lib/index.js\",\n  \"dependencies\": {\n    \"firebase-admin\": \"^8.0.0\",\n    \"firebase-functions\": \"^3.1.0\",\n    \"shared\": \"file:../../shared\"\n  },\n  \"devDependencies\": {\n    \"@types/braintree\": \"^2.20.0\",\n    \"tslint\": \"^5.12.0\",\n    \"typescript\": \"^3.2.2\"\n  },\n  \"private\": true\n}\n\n\n// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \"./\",\n    \"module\": \"commonjs\",\n    \"noImplicitReturns\": true,\n    \"noUnusedLocals\": false,\n    \"rootDir\": \"src\",\n    \"outDir\": \"lib\",\n    \"sourceMap\": true,\n    \"strict\": true,\n    \"target\": \"es2017\"\n  }\n}\n</code></pre>\n\n<p><strong>Current soution</strong></p>\n\n<p>I have added a npm script to the shared module, which copies all files (without the index.js) to the other modules. This has the problem, that I check in duplicate code into SCM, and that I need to run that command on every change. Also, the IDE just treats it as different files.</p>\n"}, {"tags": ["javascript", "node.js", "typescript", "google-cloud-firestore", "google-cloud-functions"], "comments": [{"owner": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 0, "creation_date": 1572462848, "post_id": 58631955, "comment_id": 103571511, "body": "Can you elaborate on your high level design in pseudo code or narrative?  Am I sensing that there are two incoming REST requests at play here?   One that creates some data that is uncommitted and a second request that tries to update the original data?"}, {"owner": {"reputation": 1, "user_id": 11816132, "user_type": "registered", "profile_image": "https://graph.facebook.com/2282392248464926/picture?type=large", "display_name": "user11816132", "link": "https://stackoverflow.com/users/11816132/user11816132"}, "reply_to_user": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 0, "creation_date": 1572465104, "post_id": 58631955, "comment_id": 103572457, "body": "My issue is that the data isnt committed for me some reasons. So I am unable to find it when the call back is triggered."}, {"owner": {"reputation": 1, "user_id": 11816132, "user_type": "registered", "profile_image": "https://graph.facebook.com/2282392248464926/picture?type=large", "display_name": "user11816132", "link": "https://stackoverflow.com/users/11816132/user11816132"}, "reply_to_user": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 0, "creation_date": 1572465234, "post_id": 58631955, "comment_id": 103572514, "body": "Basically I prepare a transaction on postIntouch submit the request to a third party  api then saves the transaction record on a user collection. Once the third party confirm the transaction they send a payload with the transaction Id. That is used to update the transaction on firestore."}, {"owner": {"reputation": 1, "user_id": 11816132, "user_type": "registered", "profile_image": "https://graph.facebook.com/2282392248464926/picture?type=large", "display_name": "user11816132", "link": "https://stackoverflow.com/users/11816132/user11816132"}, "reply_to_user": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 0, "creation_date": 1572465335, "post_id": 58631955, "comment_id": 103572559, "body": "As the document isnt submitted I am unable to find it when I receive confirmation on the callback"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11816132, "user_type": "registered", "profile_image": "https://graph.facebook.com/2282392248464926/picture?type=large", "display_name": "user11816132", "link": "https://stackoverflow.com/users/11816132/user11816132"}, "edited": false, "score": 0, "creation_date": 1572467047, "post_id": 58632770, "comment_id": 103573218, "body": "Thanks Philip this line generates a document Id not adding the records at this moment."}], "tags": [], "owner": {"reputation": 106, "user_id": 10285130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd7859f20472584d6de07913bb7691b?s=128&d=identicon&r=PG&f=1", "display_name": "Philip", "link": "https://stackoverflow.com/users/10285130/philip"}, "is_accepted": false, "score": 0, "last_activity_date": 1572465429, "creation_date": 1572465429, "answer_id": 58632770, "question_id": 58631955, "link": "https://stackoverflow.com/questions/58631955/unable-to-write-batch-document-in-firestore-collection/58632770#58632770", "title": "Unable to write batch document in firestore collection", "body": "<p>I am not in a position to check the code thoroughly, but do you expect</p>\n\n<pre><code> const transactionId = _.db.collection('users-beta').doc(user.uid).collection('transactions').doc().id\n</code></pre>\n\n<p>to add data to firestore. If so, it does not.</p>\n\n<p>You need to do an .add or .set to do this.</p>\n"}], "owner": {"reputation": 1, "user_id": 11816132, "user_type": "registered", "profile_image": "https://graph.facebook.com/2282392248464926/picture?type=large", "display_name": "user11816132", "link": "https://stackoverflow.com/users/11816132/user11816132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572465429, "creation_date": 1572461316, "question_id": 58631955, "link": "https://stackoverflow.com/questions/58631955/unable-to-write-batch-document-in-firestore-collection", "title": "Unable to write batch document in firestore collection", "body": "<p>My function receives data from a mobile app. When a CASHIN request is made, the function postIntouch sends a Https requests to a third party API then saves the current transaction in a Firestore collection as a unconfirmed transaction. while waiting for the third-party callback with the transaction status. When the callback is triggered, <code>enter code here</code>the function update the user balance by checking the user collection to find the correct transaction and update the status in the document and and then send it to the ledger. My problem is that the callback isn't able to update the correct user balance because the unconfirmed transaction isn't saved in the user collection.  Any help would be appreciated !</p>\n\n<p>Check the callback sent by the third party.\nUnable to find any trace on of the transaction in the collection</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/**\r\n * Logic to initiate a cash in/out operation\r\n * \r\n * @param data\r\n * {\r\n *   ...\r\n *   provider: 'ORANGE' | 'TELMOB' | 'TELECEL',\r\n *   operation: 'CASHIN' | 'CASHOUT' | 'AIRTIME',\r\n *   amount: number,\r\n *   otp: string,\r\n *   ...\r\n * }\r\n * \r\n * @returns code 200 on transaction pending\r\n *          In case of errors, return message '5-Insufficiant funds' or '8-Amount cannot be negative'\r\n */\r\nexports.postIntouch = functions.https.onCall(async (\r\n    data:\r\n        {\r\n            provider: _.IntouchProvider,\r\n            operation: _.IntouchOperation,\r\n            amount: number,\r\n            email : string\r\n            otp: string,\r\n            clientTimestamp: string\r\n        },\r\n    context) =&gt; {\r\n    if (!context.auth) {\r\n        throw new functions.https.HttpsError('unauthenticated', 'A user must be authenticated')\r\n    }\r\n    const { provider, operation, amount, otp,} = data\r\n\r\n    /* PRELIMINARY VALIDATION */\r\n    if (amount &lt;= 0) throw new functions.https.HttpsError('invalid-argument', `${_.Errors.negativeAmount.code}-${_.Errors.negativeAmount.message}`)\r\n    if (_.INTOUCH_SERVICE[provider][operation].length === 0) throw new functions.https.HttpsError('unimplemented', 'Service not available')\r\n\r\n    /* FIND USER */\r\n    const user = await _.findUser({ uid: context.auth.uid })\r\n    if (user === undefined) throw new functions.https.HttpsError('not-found', 'Could not find user')\r\n\r\n    /* IF CASHOUT OR AIRTIME OR BILL, MAKE SURE USER HAS ENOUGH FUNDS */\r\n    if (operation === _.IntouchOperation.CASHOUT || operation === _.IntouchOperation.AIRTIME || operation === _.IntouchOperation.BILL) {\r\n        if (user.wallet.fcfa &lt; amount) throw new functions.https.HttpsError('failed-precondition',\r\n            `${_.Errors.insufficiantFunds.code}-${_.Errors.insufficiantFunds.message}`\r\n        )\r\n    }\r\n\r\n    /* GENERATE TRANSACTION ID */\r\n    const transactionId = _.db.collection('users-beta').doc(user.uid).collection('transactions').doc().id\r\n\r\n    /* CALL INTOUCH API */\r\n    let resp\r\n     try {\r\n         resp = await _.initiateIntouchTransaction(amount, user.phoneNumber, `${user.uid}|${transactionId}`, provider, operation, otp)\r\n     } catch (error) {\r\n         console.log(error)\r\n         throw new functions.https.HttpsError('aborted', 'Intouch transaction failed')\r\n     }\r\n    //If transaction failed, stop execution right here\r\n     if (resp.status !== _.IntouchTransactionStatus.PENDING &amp;&amp; resp.status !== _.IntouchTransactionStatus.INITIATED) {\r\n         throw new functions.https.HttpsError('aborted', 'Intouch transaction failed')\r\n     }\r\n\r\n    console.log('response '+resp)\r\n\r\n    /* UPDATE LEDGER AND FIRESTORE */\r\n    const batch = _.db.batch()\r\n    const userRef = _.db.collection('users-beta').doc(user.uid)\r\n    const transactionRef = _.db.collection('users-beta').doc(user.uid).collection('transactions').doc(transactionId)\r\n    console.log('user reference '+userRef)\r\n    console.log('transactionRef '+transactionRef)\r\n\r\n    const record: _.TransactionRecord = {\r\n        type: operation === _.IntouchOperation.CASHIN ? _.TransactionType.CASHIN\r\n            : operation === _.IntouchOperation.CASHOUT ? _.TransactionType.CASHOUT\r\n                : operation === _.IntouchOperation.AIRTIME ? _.TransactionType.AIRTIME\r\n                    : _.TransactionType.BILL,\r\n        sender: {\r\n            uid: user.uid,\r\n            handle: '',\r\n            firstName: '',\r\n            lastName:  otp\r\n        },\r\n        receiver: {\r\n            uid: '',\r\n            handle: '',\r\n            firstName: '',\r\n            lastName: ''\r\n        },\r\n        amount: amount,\r\n        passPhrase: '',\r\n        status: _.TransactionStatus.ONHOLD,\r\n        ledgerRecords: { first: {}, second: {} },\r\n        intouchResponses: { first: resp, second: {} },\r\n        clientTimestamp: data.clientTimestamp\r\n    }\r\n\r\n    //If CASHOUT OR AIRTIME OR BILL, reserve tokens on ledger\r\n    if (operation === _.IntouchOperation.CASHOUT || operation === _.IntouchOperation.AIRTIME || operation === _.IntouchOperation.BILL) {\r\n        //Ledger\r\n        let transaction\r\n        try {\r\n            transaction = await _.writeTransactionToLedger(_.TransactionType.RESERVATION, amount,\r\n                { sourceAccountId: user.uid, destinationAccountId: operation })\r\n        } catch (error) {\r\n            console.log(error)\r\n            throw new functions.https.HttpsError('internal', 'Could not write transaction to ledger')\r\n        }\r\n\r\n        //Firestore\r\n        record.ledgerRecords.first = transaction\r\n        batch\r\n            .update(userRef, { wallet: { fcfa: user.wallet.fcfa - amount, points: user.wallet.points } })\r\n            .set(transactionRef, record)\r\n\r\n    } else if (operation === _.IntouchOperation.CASHIN) {\r\n        //Firestore\r\n        batch.set(transactionRef, record)\r\n    }\r\n\r\n    /* WRITE TO FIRESTORE */\r\n     try {\r\n         await batch.commit()\r\n     } catch (error) {\r\n         console.log(error)\r\n         throw new functions.https.HttpsError('unknown', 'Firestore write failed after intouch api call')\r\n     }\r\n})\r\n\r\n/**\r\n * Callback for Intouch\r\n */\r\nexports.intouchCallback = functions.https.onRequest(async (req, res) =&gt; {\r\n    const { partner_transaction_id, status } = req.body\r\n    if (typeof partner_transaction_id !== 'string' || typeof status !== 'string') { res.end(); return }\r\nconsole.log(req.body)\r\n    //Extract both from partnerTransactionId\r\n    const [uid, transactionId] = partner_transaction_id.split('|')\r\n\r\n    /* LOOKUP USER AND TRANSACTION */\r\n    const user = await _.findUser({ uid: uid })\r\n    if (user === undefined) { res.end(); return }\r\n\r\n    const transaction = await _.findTransaction(transactionId, { senderUid: uid })\r\n    if (transaction === undefined) {\r\n        console.log('cannot find transaction')\r\n        res.end(); \r\n        return \r\n    }\r\n\r\n    /* UPDATE BALANCE ON LEDGER AND FIRESTORE BASED ON STATUS */\r\n    const batch = _.db.batch()\r\n    const userRef = _.db.collection('users-beta').doc(uid)\r\n    const transactionRef = _.db.collection('users-beta').doc(uid).collection('transactions').doc(transactionId)\r\n\r\n    let ledgerRecord\r\n    if (status === _.IntouchTransactionStatus.SUCCESSFUL) {\r\n        if (transaction.type === _.TransactionType.CASHIN) {\r\n            //WRITE TO LEDGER\r\n            try {\r\n                ledgerRecord = await _.writeTransactionToLedger(transaction.type, transaction.amount, { destinationAccountId: uid })\r\n            } catch (error) {\r\n                console.log(error)\r\n                res.end(); \r\n                return error\r\n            }\r\n            //Update user balance\r\n            batch.update(userRef, { wallet: { fcfa: user.wallet.fcfa + transaction.amount, points: user.wallet.points } })\r\n            //Update transaction record\r\n            batch.update(transactionRef,\r\n                {\r\n                    status: _.IntouchTransactionStatus.SUCCESSFUL,\r\n                    ledgerRecords: { first: ledgerRecord, second: {} },\r\n                    intouchResponses: { first: transaction.intouchResponses.first, second: req.body }\r\n                }\r\n            )\r\n        } else if (transaction.type === _.TransactionType.CASHOUT || transaction.type === _.TransactionType.AIRTIME || transaction.type === _.TransactionType.BILL) {\r\n            //WRITE TO LEDGER\r\n            try {\r\n                ledgerRecord = await _.writeTransactionToLedger(transaction.type, transaction.amount, { sourceAccountId: uid })\r\n            } catch (error) {\r\n                console.log(error)\r\n                res.end(); return\r\n            }\r\n\r\n            //Update transaction record\r\n            batch.update(transactionRef,\r\n                {\r\n                    status: _.IntouchTransactionStatus.SUCCESSFUL,\r\n                    ledgerRecords: { first: transaction.ledgerRecords.first, second: ledgerRecord },\r\n                    intouchResponses: { first: transaction.intouchResponses.first, second: req.body }\r\n                }\r\n            )\r\n        }\r\n\r\n    } else if (status === _.IntouchTransactionStatus.FAILED) {\r\n        //Update status and save intouch response in transaction record\r\n        batch.update(transactionRef,\r\n            {\r\n                status: _.IntouchTransactionStatus.FAILED,\r\n                intouchResponses: { first: transaction.intouchResponses.first, second: req.body }\r\n            }\r\n        )\r\n\r\n        if (transaction.type === _.TransactionType.CASHOUT || transaction.type === _.TransactionType.AIRTIME || transaction.type === _.TransactionType.BILL) {\r\n            //CANCEL TRANSACTION ON LEDGER\r\n            const operation = transaction.type === _.TransactionType.CASHOUT ? _.IntouchOperation.CASHOUT\r\n                : transaction.type === _.TransactionType.AIRTIME ? _.IntouchOperation.AIRTIME\r\n                    : _.IntouchOperation.BILL\r\n            try {\r\n                ledgerRecord = await _.writeTransactionToLedger(_.TransactionType.CANCELLATION, transaction.amount,\r\n                    { sourceAccountId: uid, destinationAccountId: operation })\r\n            } catch (error) {\r\n                console.log(error)\r\n                res.end(); return\r\n            }\r\n\r\n            //REVERT BALANCE IN FIRESTORE\r\n            batch\r\n                .update(userRef, { wallet: { fcfa: user.wallet.fcfa + transaction.amount, points: user.wallet.points } })\r\n                .update(transactionRef, { ledgerRecords: { first: transaction.ledgerRecords.first, second: ledgerRecord } })\r\n        }\r\n    } else { res.end(); return }\r\n\r\n    //Commit batch\r\n    try {\r\n        await batch.commit()\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n    /* SEND NOTIFICATION TO USER */\r\n    if (status === _.IntouchTransactionStatus.SUCCESSFUL) {\r\n        try {\r\n            switch (transaction.type) {\r\n                case _.TransactionType.CASHIN: {\r\n                    await _.notify(user.notificationToken, `Votre balance a \u00e9t\u00e9 credit\u00e9e de ${transaction.amount}`, '', { transactionId: transactionId })\r\n                    break\r\n                }\r\n                case _.TransactionType.CASHOUT: {\r\n                    await _.notify(user.notificationToken, `Votre balance a \u00e9t\u00e9 debit\u00e9e de ${transaction.amount}`, '', { transactionId: transactionId })\r\n                    break\r\n                }\r\n                case _.TransactionType.AIRTIME: {\r\n                    await _.notify(user.notificationToken, `Votre achat de ${transaction.amount} d'unit\u00e9s a r\u00e9ussi`, '', { transactionId: transactionId })\r\n                    break\r\n                }\r\n                /* case _.TransactionType.BILL: {\r\n                    \r\n                } */\r\n                default: {\r\n                    break\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    } else if (status === _.IntouchTransactionStatus.FAILED) {\r\n        try {\r\n            await _.notify(user.notificationToken, `Votre transaction ${transactionId} a echou\u00e9e`, '', { transactionId: transactionId })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n    res.end(); return\r\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 5875, "user_id": 4383512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PdRqP.png?s=128&g=1", "display_name": "Meme Composer", "link": "https://stackoverflow.com/users/4383512/meme-composer"}, "edited": false, "score": 0, "creation_date": 1572461685, "post_id": 58631942, "comment_id": 103571050, "body": "Not sure if it will do anything, but try changing <b>.js</b> to <b>.ts</b>"}, {"owner": {"reputation": 1594, "user_id": 2663916, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/412f5ee659dc56c3e5acf996b27052cc?s=128&d=identicon&r=PG", "display_name": "se22as", "link": "https://stackoverflow.com/users/2663916/se22as"}, "reply_to_user": {"reputation": 5875, "user_id": 4383512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PdRqP.png?s=128&g=1", "display_name": "Meme Composer", "link": "https://stackoverflow.com/users/4383512/meme-composer"}, "edited": false, "score": 0, "creation_date": 1572522077, "post_id": 58631942, "comment_id": 103590481, "body": "Unfortunately I can not do that. The files in the scripts directory are shared among different projects and are not written in typescript/"}], "owner": {"reputation": 1594, "user_id": 2663916, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/412f5ee659dc56c3e5acf996b27052cc?s=128&d=identicon&r=PG", "display_name": "se22as", "link": "https://stackoverflow.com/users/2663916/se22as"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572461263, "creation_date": 1572461263, "question_id": 58631942, "link": "https://stackoverflow.com/questions/58631942/angular-typescript-critical-dependency-the-request-of-a-dependency-is-an-expres", "title": "Angular TypeScript Critical dependency: the request of a dependency is an expression", "body": "<p>When running \"ng build\" for my Angular application i am seeing the following error in the console.</p>\n\n<pre><code>WARNING in ./node_modules/myModule/myModule.min.js 1:16288-16703\nCritical dependency: the request of a dependency is an expression\n    at AMDRequireContextDependency.getWarnings (C:\\MyAngularApp\\node_modules\\webpack\\lib\\dependencies\\ContextDependency.js:40:18)\n    at Compilation.reportDependencyErrorsAndWarnings (C:\\MyAngularApp\\node_modules\\webpack\\lib\\Compilation.js:1416:24)\n    at Compilation.reportDependencyErrorsAndWarnings (C:\\MyAngularApp\\node_modules\\webpack\\lib\\Compilation.js:1436:9)\n    at C:\\MyAngularApp\\\\node_modules\\webpack\\lib\\Compilation.js:1221:10\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (C:\\MyAngularApp\\node_modules\\tapable\\lib\\HookCodeFactory.js:33:10), &lt;anonymous&gt;:31:1)\n    at AsyncSeriesHook.lazyCompileHook (C:\\MyAngularApp\\node_modules\\tapable\\lib\\Hook.js:154:20)\n    at Compilation.finish (C:\\MyAngularApp\\node_modules\\webpack\\lib\\Compilation.js:1216:28)\n    at C:\\MyAngularApp\\\\node_modules\\webpack\\lib\\Compiler.js:662:17\n    at _done (eval at create (C:\\MyAngularApp\\node_modules\\tapable\\lib\\HookCodeFactory.js:33:10), &lt;anonymous&gt;:9:1)\n    at eval (eval at create (C:\\MyAngularApp\\node_modules\\tapable\\lib\\HookCodeFactory.js:33:10), &lt;anonymous&gt;:36:22)\n    at C:\\MyAngularApp\\\\node_modules\\webpack\\lib\\Compilation.js:1148:12\n    at C:\\MyAngularApp\\\\node_modules\\webpack\\lib\\Compilation.js:1060:9\n    at processTicksAndRejections (internal/process/task_queues.js:72:11)\n @ ./src/scripts/myScript1.js\n @ ./src/app/component1.ts\n @ ./src/app/app.module.ts\n @ ./src/main.ts\n @ multi ./src/main.ts\n</code></pre>\n\n<p>When running the applications locally (from Visual Studio Code) it runs perfectly OK, however it does not build and run in a proper deployed environment.</p>\n\n<p><strong>My Application</strong> </p>\n\n<p>My Project Structure</p>\n\n<pre><code>| src\n   |- app\n        |- component1.html\n        |- component1.ts   \n   | scripts\n        | myScript1.js\n        | myScript2.js\n</code></pre>\n\n<p>myScript1.js</p>\n\n<pre><code>export function s1Func1(s) {....}\n</code></pre>\n\n<p>myScript2.js</p>\n\n<pre><code>export function myFunc1(s) {...}\nexport function myFunc2(s) {...}\nexport function myFunc3(s) {...}\n</code></pre>\n\n<p>component1.ts</p>\n\n<pre><code>import {s1Func1} from '../scripts/myScript1';\nimport {myFunc1, myFunc2} from '../scripts/myScript2';\n</code></pre>\n\n<p><strong>Searching for a solution</strong></p>\n\n<p>I have spent a while searching online for explanations of what this error exactly means and how to resolve it.  There appears to be a number of questions on stack overflow for this but I have tried a number of the suggested solutions and nothing has worked. I also still do not truly understand the cause of the error.</p>\n\n<p><strong>Fixes I have tried</strong></p>\n\n<p><em>tsconfig.ts</em></p>\n\n<p>added \"allowJS\" in both top level and under \"compilerOptions\"</p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"allowJs\": true,  \n  \"compilerOptions\": {\n   ....\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n       \"allowJs\": true,  \n ....\n</code></pre>\n\n<p><em>angular.json</em></p>\n\n<p>added my scripts under \"scripts\" key</p>\n\n<pre><code>{\n    \"$schema\": \"./node_modules/@angular/cli/lib/config/schema.json\",\n     ....\n     \"projects\": {\n          .....\n          \"architect\": {\n                \"build\": {\n                     ....\n                     \"options\": {\n                         ....\n                         \"scripts\": [\n                              \"src/scripts/myScript1.js,\n                              \"src/scripts/myScript2.js,\n                              \"node_modules/jquery/dist/jquery.js\",\n                              \"node_modules/bootstrap/dist/js/bootstrap.bundle.js\"\n                         ]\n    ....\n</code></pre>\n\n<p><em>create \".d.ts\" files for each \".js\" file</em></p>\n\n<pre><code>| src\n   |- app\n        |- component1.html\n        |- component1.ts   \n   | scripts\n        | myScript1.js\n        | myScript1.d.ts\n        | myScript2.js\n        | myScript2.d.ts\n\nmyScript1.d.ts\n    export function myFunc1(s: String) : String\n\nmyScript2.d.ts\n\n    export function myFunc1(s: String) : String\n    export function myFunc2(s: String) : String\n    export function myFunc3(s: String) : String\n</code></pre>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 1702, "user_id": 3500118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b533304882b3d15dce2dad7ea45511d?s=128&d=identicon&r=PG&f=1", "display_name": "10100111001", "link": "https://stackoverflow.com/users/3500118/10100111001"}, "edited": false, "score": 2, "creation_date": 1572461172, "post_id": 58631878, "comment_id": 103570858, "body": "I dont quite understand? Just call the method (getApiGoogleDesktop) again inside the if statement with the same params."}, {"owner": {"reputation": 177, "user_id": 9263321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d931d81bb9e71c4c290995a95e47392?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Pereira", "link": "https://stackoverflow.com/users/9263321/rafael-pereira"}, "reply_to_user": {"reputation": 1702, "user_id": 3500118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b533304882b3d15dce2dad7ea45511d?s=128&d=identicon&r=PG&f=1", "display_name": "10100111001", "link": "https://stackoverflow.com/users/3500118/10100111001"}, "edited": false, "score": 0, "creation_date": 1572461906, "post_id": 58631878, "comment_id": 103571143, "body": "I tried this way <code>let data =  JSON.parse(body);                 if (data.error) {                     console.log(data.error);                     this.getApiGoogleDesktop(req, res)                 }</code>but I get an error"}, {"owner": {"reputation": 8552, "user_id": 1941241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YvyT6.png?s=128&g=1", "display_name": "rickdenhaan", "link": "https://stackoverflow.com/users/1941241/rickdenhaan"}, "edited": false, "score": 0, "creation_date": 1572462182, "post_id": 58631878, "comment_id": 103571244, "body": "Assuming <code>this</code> is bound correctly, that is the way to do it. What error do you get?"}, {"owner": {"reputation": 177, "user_id": 9263321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d931d81bb9e71c4c290995a95e47392?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Pereira", "link": "https://stackoverflow.com/users/9263321/rafael-pereira"}, "edited": false, "score": 0, "creation_date": 1572462287, "post_id": 58631878, "comment_id": 103571281, "body": "<code>....\\controllers\\psiControllers.js:43                     this.getApiGoogleDesktop(req, res);                          ^  TypeError: Cannot read property &#39;getApiGoogleDesktop&#39; of undefined</code>"}, {"owner": {"reputation": 8552, "user_id": 1941241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YvyT6.png?s=128&g=1", "display_name": "rickdenhaan", "link": "https://stackoverflow.com/users/1941241/rickdenhaan"}, "edited": false, "score": 0, "creation_date": 1572462890, "post_id": 58631878, "comment_id": 103571528, "body": "That means <code>this</code> is undefined within the scope of that function. You&#39;ll need to tell it what <code>this</code> is by binding it to the instance of your class when you call it."}], "answers": [{"comments": [{"owner": {"reputation": 911, "user_id": 1624260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81b9879f518d0ea97088cdb64068773f?s=128&d=identicon&r=PG", "display_name": "wkrueger", "link": "https://stackoverflow.com/users/1624260/wkrueger"}, "edited": false, "score": 0, "creation_date": 1572483917, "post_id": 58633600, "comment_id": 103578029, "body": "which means calling the function recursively inside is tail-call optimizeable YAY DATA STRUCTURE CLASSES"}], "tags": [], "owner": {"reputation": 35167, "user_id": 46194, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4eca63bc630dcac855080d2871f73ee7?s=128&d=identicon&r=PG", "display_name": "Klas Mellbourn", "link": "https://stackoverflow.com/users/46194/klas-mellbourn"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469332, "creation_date": 1572469332, "answer_id": 58633600, "question_id": 58631878, "link": "https://stackoverflow.com/questions/58631878/how-to-execute-the-method-again-if-there-is-an-error/58633600#58633600", "title": "How to execute the method again if there is an error", "body": "<p>Add a <code>while</code> loop where you set the <code>url</code> outside first, and then on error inside the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 3410890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8093e7bcb99c821b7c54a0c3a202ba32?s=128&d=identicon&r=PG&f=1", "display_name": "Ardeshir Valipoor", "link": "https://stackoverflow.com/users/3410890/ardeshir-valipoor"}, "is_accepted": false, "score": 0, "last_activity_date": 1572478634, "creation_date": 1572478634, "answer_id": 58635044, "question_id": 58631878, "link": "https://stackoverflow.com/questions/58631878/how-to-execute-the-method-again-if-there-is-an-error/58635044#58635044", "title": "How to execute the method again if there is an error", "body": "<p>I would do something like this:</p>\n\n<pre><code>     class PsiController {\n        public async getApiGoogleDesktop(req: Request, res: Response) {\n\n            console.log('Consumiendo API Google Desktop... ')\n            let url = `${urlParams.url}?url=${urlParams.psiUrl}&amp;key=${urlParams.key}&amp;category=${urlParams.category[1]}&amp;strategy=${urlParams.strategy[1]}&amp;locale=${urlParams.locale}`\n\n            const data = await makeRequest(url)\n            return res.send(data)\n\n            async function makeRequest(url) {\n                return new Promise&lt;any&gt;((resolve, reject) =&gt; {\n                    Request.get(url, (error: any, response: any, body: any) =&gt; {\n                        if (error) {\n                            return error\n                        }\n                        let data = JSON.parse(body)\n                        if (data.error) {\n                            console.log(data.error)\n                            return makeRequest('http://localhost:3000/api/psi/desktop')\n                        }\n                        // ...\n                        return resolve(data)\n                    })\n\n                })\n            }\n            //...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9320, "user_id": 5196394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52GqN.jpg?s=128&g=1", "display_name": "hoangdv", "link": "https://stackoverflow.com/users/5196394/hoangdv"}, "is_accepted": true, "score": 1, "last_activity_date": 1572488284, "creation_date": 1572488284, "answer_id": 58636088, "question_id": 58631878, "link": "https://stackoverflow.com/questions/58631878/how-to-execute-the-method-again-if-there-is-an-error/58636088#58636088", "title": "How to execute the method again if there is an error", "body": "<p>Use a \"recursion\" function to do this task. For this case, you can use a callback style function, it will easy to implement and understand.</p>\n\n<pre><code>class PsiController {\n  public async getApiGoogleDesktop(req: Request, res: Response) {\n\n    console.log('Consumiendo API Google Desktop... ');\n\n    let url = `${urlParams.url}?url=${urlParams.psiUrl}&amp;key=${urlParams.key}&amp;category=${urlParams.category[1]}&amp;strategy=${urlParams.strategy[1]}&amp;locale=${urlParams.locale}`;\n\n    const whenSuccess = (data) =&gt; { // callback in success case\n      res.send(data);\n    }\n\n    const whenError = (error) =&gt; { // callback in error case. We catch \"system\" error like NetworkError\n      res.status(500).send(error);\n    }\n\n    const forceRequest = (url: string, onSuccess: (data) =&gt; void, onError: (error) =&gt; void) =&gt; { // the recursion function\n      Request.get(url, (error: any, response: any, body: any) =&gt; {\n        if (error) {\n          return onError(error); // stop\n        }\n\n        let data = JSON.parse(body);\n        if (data.error) {\n          console.log(data.error);\n          return forceRequest(url, onSuccess, onError); // retry with original params\n        }\n\n        // ...\n\n        onSuccess(data); // stop when successfully\n\n      })\n    }\n\n    // start\n    forceRequest(url, whenSuccess, whenError); // call recursion function, with above callbacks\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 9263321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d931d81bb9e71c4c290995a95e47392?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Pereira", "link": "https://stackoverflow.com/users/9263321/rafael-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 58636088, "answer_count": 3, "score": 0, "last_activity_date": 1572488284, "creation_date": 1572461022, "last_edit_date": 1572483743, "question_id": 58631878, "link": "https://stackoverflow.com/questions/58631878/how-to-execute-the-method-again-if-there-is-an-error", "title": "How to execute the method again if there is an error", "body": "<p><a href=\"https://i.stack.imgur.com/XESlz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XESlz.png\" alt=\"enter image description here\"></a></p>\n\n<p>If the method <code>getApiGoogleDesktop</code> receives an error I would like to run it again infinitely</p>\n\n<pre><code>class PsiController {\n  public async getApiGoogleDesktop(req: Request, res: Response) {\n\n    console.log('Consumiendo API Google Desktop... ');\n\n    let url = `${urlParams.url}?url=${urlParams.psiUrl}&amp;key=${urlParams.key}&amp;category=${urlParams.category[1]}&amp;strategy=${urlParams.strategy[1]}&amp;locale=${urlParams.locale}`;\n\n    await Request.get(url, (error: any, response: any, body: any) =&gt; {\n      if (error) {\n        return error;\n      }\n\n      let data = JSON.parse(body);\n      if (data.error) {\n        console.log(data.error);\n        Request.get('http://localhost:3000/api/psi/desktop')\n      }\n\n      // ...\n\n      return res.send(data);\n\n    })\n  }\n}\n</code></pre>\n"}, {"tags": ["typescript", "webpack", "typescript-typings"], "comments": [{"owner": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "edited": false, "score": 1, "creation_date": 1572460501, "post_id": 58631575, "comment_id": 103570550, "body": "<code>I am using the typescript-json-schema to inspect interfaces at runtime.</code> may I ask why? It sounds like you may have an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}, {"owner": {"reputation": 275, "user_id": 4416573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c563ec3d34520b416345f53682bca6?s=128&d=identicon&r=PG&f=1", "display_name": "surrz", "link": "https://stackoverflow.com/users/4416573/surrz"}, "reply_to_user": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "edited": false, "score": 0, "creation_date": 1572461235, "post_id": 58631575, "comment_id": 103570889, "body": "@Kyll We need to verify that TS interfaces match JSON configs on our backend. Neither the interface nor the config is known at compile time. So we want to generate a schema from the interface and compare it against the config.  Apart from being a potential XY problem I would still like to know why the bundling changes the behavior. :)"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572472648, "post_id": 58631575, "comment_id": 103575305, "body": "@surrz I haven&#39;t looked into this but I&#39;m almost certain that it has something to do with inference based on member names or export names that are being mangled."}, {"owner": {"reputation": 275, "user_id": 4416573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c563ec3d34520b416345f53682bca6?s=128&d=identicon&r=PG&f=1", "display_name": "surrz", "link": "https://stackoverflow.com/users/4416573/surrz"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572473731, "post_id": 58631575, "comment_id": 103575639, "body": "@AluanHaddad that&#39;s what I don&#39;t quite get, neither the interface nor the type files are bundled. After webpack, TS is still able to find the json-schema, node and lodash types but <b>not</b> the ts types such as Record or Map."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572520723, "post_id": 58631575, "comment_id": 103589772, "body": "@surrz based on your edit, that&#39;s what we would expect. Those files aren&#39;t part of your project. It&#39;s up to the consumer to provide those files. That would be the same when in development however."}, {"owner": {"reputation": 275, "user_id": 4416573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c563ec3d34520b416345f53682bca6?s=128&d=identicon&r=PG&f=1", "display_name": "surrz", "link": "https://stackoverflow.com/users/4416573/surrz"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572566226, "post_id": 58631575, "comment_id": 103609778, "body": "@AluanHaddad Yes, but I would expect the result to be the same after and before webpack."}], "owner": {"reputation": 275, "user_id": 4416573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c563ec3d34520b416345f53682bca6?s=128&d=identicon&r=PG&f=1", "display_name": "surrz", "link": "https://stackoverflow.com/users/4416573/surrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572473648, "creation_date": 1572459724, "last_edit_date": 1572473648, "question_id": 58631575, "link": "https://stackoverflow.com/questions/58631575/bundled-typescript-compiler-api", "title": "Bundled Typescript Compiler API", "body": "<p>I am using the <a href=\"https://github.com/YousefED/typescript-json-schema\" rel=\"nofollow noreferrer\">typescript-json-schema</a> to inspect interfaces at runtime. Due to some other dependencies I am required to bundle my code in the end using webpack, after bundling the code does not work anymore and it fails to find the typescript types.</p>\n\n<p>After some investigation I figured the issue is related to the typescript compiler API. Without bundling the code below outputs all the type files found in node_modules including the typescript ones, after bundling it still finds all but not the typescript ones.</p>\n\n<pre><code>import * as ts from \"typescript\";\nexport async function main() {\n    const p = ts.createProgram({\n        rootNames: [\"src/dummy.ts\"], options: {}\n    });\n    p.getSourceFiles().forEach(s =&gt; console.log(s.fileName));\n    console.log(p.getSourceFiles().length);\n}\n</code></pre>\n\n<p>Am I missing something or is bundling the typescript not supported?</p>\n\n<hr>\n\n<p><strong>webpack.config.js</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const path = require('path');\n\nconst mode = process.env.NODE_ENV == \"development\" ? \"development\" : \"production\";\n\nmodule.exports = {\n    mode,\n    entry: \"./src/app.ts\",\n    target: \"node\",\n    devtool: mode === \"development\" ? \"source-map\" : undefined,\n    node: {\n        global: true\n    },\n    output: {\n        path: path.resolve(__dirname, \"bin\"),\n        filename: \"bundle.js\",\n        libraryExport: 'default'\n    },\n    resolve: {\n        extensions: [\".ts\", \".js\"]\n    },\n    module: {\n        rules: [\n            {\n                loader: \"ts-loader\",\n                test: /\\.tsx?$/\n            }\n        ]\n    }\n};\n</code></pre>\n\n<p><strong>tsconfig.json</strong></p>\n\n<pre><code>{\n    \"compilerOptions\": {\n        \"moduleResolution\": \"node\",\n        \"module\": \"commonjs\",\n        \"target\": \"ES6\",\n        \"declaration\": true,\n        \"outDir\": \"bin\",\n        \"resolveJsonModule\": true,\n        \"sourceMap\": true\n    },\n    \"include\": [\n        \"src/**/*\"\n    ],\n    \"exclude\": [\n        \"bin/**/*.ts\",\n        \"build/*.ts\",\n        \"**/node_modules/**\"\n    ]\n}\n</code></pre>\n\n<hr>\n\n<p>Edit: Adding the output<br>\n<strong>Before Webpack</strong></p>\n\n<pre><code>project/node_modules/typescript/lib/lib.d.ts\nproject/node_modules/typescript/lib/lib.es5.d.ts\nproject/node_modules/typescript/lib/lib.es2015.d.ts\n&lt;ommitted...&gt;\nsrc/dummy.ts\nproject/node_modules/@types/json-schema/index.d.ts\nproject/node_modules/@types/node/globals.d.ts\nproject/node_modules/@types/node/assert.d.ts\nproject/node_modules/@types/node/async_hooks.d.ts\nproject/node_modules/@types/node/buffer.d.ts\n&lt;ommitted...&gt;\n</code></pre>\n\n<p><strong>After Webpack</strong></p>\n\n<pre><code>src/dummy.ts\nproject/node_modules/@types/json-schema/index.d.ts\nproject/node_modules/@types/node/globals.d.ts\nproject/node_modules/@types/node/assert.d.ts\nproject/node_modules/@types/node/async_hooks.d.ts\nproject/node_modules/@types/node/buffer.d.ts\n&lt;ommitted...&gt;\n</code></pre>\n"}, {"tags": ["typescript", "azure-application-insights", "nestjs"], "comments": [{"owner": {"reputation": 356, "user_id": 4796342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b324794ac9963fcba214c3c1e57ca3?s=128&d=identicon&r=PG", "display_name": "Bram", "link": "https://stackoverflow.com/users/4796342/bram"}, "edited": false, "score": 0, "creation_date": 1591971205, "post_id": 58631550, "comment_id": 110264645, "body": "have you found a solutons for this?"}], "owner": {"reputation": 11, "user_id": 1408747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f435d5fb84b7bd93f17ff0cefebdfc57?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1408747/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572459661, "creation_date": 1572459661, "question_id": 58631550, "link": "https://stackoverflow.com/questions/58631550/issue-with-using-azure-applications-insights-sdk-with-nestjs-logger", "title": "Issue with using Azure Applications Insights sdk with NestJS logger", "body": "<p>In our nestjs application we are trying to use multiple loggers, one using Logger from nestjs and the other is Azure Application Insight client.trackTrace . When both loggers are called I see the following error <code>\n 1: 0x10003c597 node::Abort() [/usr/local/bin/node]\n 2: 0x1000bc617 node::Chdir(v8::FunctionCallbackInfo&lt;v8::Value&gt; const&amp;) [/usr/local/bin/node]\n 3: 0x10023663f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo*) [/usr/local/bin/node]\n 4: 0x100235b81 v8::internal::MaybeHandle&lt;v8::internal::Object&gt; v8::internal::(anonymous namespace)::HandleApiCallHelper&lt;false&gt;(v8::internal::Isolate*, v8::internal::Handle&lt;v8::internal::HeapObject&gt;, v8::internal::Handle&lt;v8::internal::HeapObject&gt;, v8::internal::Handle&lt;v8::internal::FunctionTemplateInfo&gt;, v8::internal::Handle&lt;v8::internal::Object&gt;, v8::internal::BuiltinArguments) [/usr/local/bin/node]\n 5: 0x100235220 v8::internal::Builtin_Impl_HandleApiCall(v8::internal::BuiltinArguments, v8::internal::Isolate*) [/usr/local/bin/node]\n 6: 0x3196422dbe3d \nAbort trap: 6</code></p>\n\n<p>If only one logger is used then no issue, both work fine on their own. </p>\n\n<p>If the nestjs Logger is replaced with a logger that either calls console.log, console.error ..etc or process.env.stdout.write(..) then it works fine. So there seems to be something going on between nestjs Logger and the AppicationInsights client.</p>\n\n<p>factory to create logger</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as appInsights from 'applicationinsights';\nimport {Logger, LoggerService} from '@nestjs/common';\n\n\n\n  appInsights\n    .setup()\n    .setAutoCollectConsole(true, true)\n    .setAutoDependencyCorrelation(true)\n    .start();\n\n\n\nexport const getLogger = (prefix: string): LoggerService =&gt; {\n\n\n    const appInsightLogger: LoggerService = new AppInsightLogger(\n      prefix,\n      appInsights.defaultClient,\n\n\n\n    return new MultiLogger(appInsightLogger, new Logger(prefix));\n\n\n  }\n\n</code></pre>\n\n<p>MultiLogger</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { LoggerService } from '@nestjs/common';\n\nexport class MultiLogger implements LoggerService {\n  constructor(private readonly logger1: LoggerService, private readonly logger2:LoggerService) {}\n\n  error(message: any, trace?: string, context?: string) {\n\n    this.logger1.error(message, trace, context);\n   this.logger2.error(message, trace, context);\n  }\n  log(message: any, context?: string) {\n\n    this.logger1.log(message, context);\n    this.logger2.log(message, context)\n  }\n\n\n  warn(message: any, context?: string) {\n\n    this.logger1.warn(message, context);\n    this.logger2.warn(message, context)\n  }\n\n  debug?(message: any, context?: string) {\n\n    this.logger1.debug(message, context);\n    this.logger2.debug(message, context);\n  }\n  verbose?(message: any, context?: string) {\n\n    this.logger1.verbose(message, context);\n    this.logger2.verbose(message, context)\n  }\n}\n\n</code></pre>\n"}, {"tags": ["typescript", "semantic-versioning"], "comments": [{"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 3, "creation_date": 1572466544, "post_id": 58631483, "comment_id": 103573026, "body": "As your users will have to change their code, I think it is a breaking change."}, {"owner": {"reputation": 1027, "user_id": 8550747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mWcgFaR5itA/AAAAAAAAAAI/AAAAAAAAB-Q/DmJQZTP55SI/photo.jpg?sz=128", "display_name": "Scott Rudiger", "link": "https://stackoverflow.com/users/8550747/scott-rudiger"}, "reply_to_user": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572494519, "post_id": 58631483, "comment_id": 103580014, "body": "Thanks @Grabofus, that&#39;s where I was leaning but lack of TypeScript expertise led me to ask. \ud83d\udc4d"}], "owner": {"reputation": 1027, "user_id": 8550747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mWcgFaR5itA/AAAAAAAAAAI/AAAAAAAAB-Q/DmJQZTP55SI/photo.jpg?sz=128", "display_name": "Scott Rudiger", "link": "https://stackoverflow.com/users/8550747/scott-rudiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572459393, "creation_date": 1572459393, "question_id": 58631483, "link": "https://stackoverflow.com/questions/58631483/would-updating-return-types-from-any-to-specific-types-be-a-breaking-change", "title": "Would updating return types from `any` to specific types be a breaking change?", "body": "<p>Suppose an API client returned <code>Promise&lt;any&gt;</code> from all its methods. Then, it's updated to return specific types instead.</p>\n\n<p>Would this call for a <code>major</code> version bump or a <code>minor</code> version bump under semantic versioning?</p>\n\n<p><strong>Note</strong>: Some users were already overriding <code>Promise&lt;any&gt;</code> to more specific types, which may be different than the types we're planning to release. Would this be a breaking change for them?</p>\n\n<p><strong>Note2</strong>: I'm very familiar with JavaScript and semantic versioning, just new-ish to TypeScript so thanks for the help!</p>\n"}, {"tags": ["javascript", "typescript", "vue.js", "vuejs2", "vue-component"], "owner": {"reputation": 1355, "user_id": 9263418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOML3.jpg?s=128&g=1", "display_name": "Anonymous Creator", "link": "https://stackoverflow.com/users/9263418/anonymous-creator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572459045, "creation_date": 1572459045, "question_id": 58631410, "link": "https://stackoverflow.com/questions/58631410/children-are-reactive-but-children-of-children-are-not-reactive-vue", "title": "children are reactive, but children of children are not reactive - vue", "body": "<p>When I have following data.</p>\n\n<pre><code>private static _docFields: TreeData[] = [\n    {\n      id: 0,\n      id: NodeType.Annotation,\n      label: 'Annotations',\n      children: [],\n    },\n</code></pre>\n\n<p>and if I do following, it is reactive.</p>\n\n<pre><code>ApiService.post(\n          'documentAnnotation/annotations', { projectId: AppStore.projectId },\n        ).then((responseData: KeyValue[]) =&gt; {\n          // TODO: Can't there be a mapper which can transform the results?\n          responseData.forEach((documentAnnotation) =&gt; {\n\n            AppStore.docFields.find((x) =&gt; x.id === NodeType.Annotation)!.children!.push({\n              label: documentAnnotation.value,\n              value: documentAnnotation.key,\n            });\n\n          });\n        });\n</code></pre>\n\n<p>But when I have following data,</p>\n\n<pre><code>private static _docFields: TreeData[] = [\n    {\n      id: '0.' + NodeType.Annotation,\n      label: 'Annotations',\n      nodeType: NodeType.Annotation,\n      children: [{\n        id: '0.' + NodeType.SinglePageAnnotation,\n        label: 'Single',\n        children: [],\n        nodeType: NodeType.SinglePageAnnotation,\n      }, {\n        id: '0.' + NodeType.MultiPageAnnotation,\n        label: 'Multiple',\n        children: [],\n        nodeType: NodeType.MultiPageAnnotation,\n      }],\n    },\n</code></pre>\n\n<p>and I do following, it is not reactive. what I need to do?</p>\n\n<pre><code>AppStore.docFields\n        .find((x) =&gt; x.nodeType === NodeType.Annotation)!.children!\n        .find((y) =&gt; y.nodeType === NodeType.SinglePageAnnotation)!.children!.push({\n                  label: documentAnnotation.value,\n                  value: documentAnnotation.key,\n                });\n</code></pre>\n\n<p>I have bound element UI tree as following.</p>\n\n<pre><code>&lt;el-tree :data=\"AppStore.docFields\"&gt;\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "next.js", "react-proptypes"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11074345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caace42a334136680cb12d54602c2f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Petriczech", "link": "https://stackoverflow.com/users/11074345/petriczech"}, "is_accepted": false, "score": 0, "last_activity_date": 1607192268, "creation_date": 1607192268, "answer_id": 65160416, "question_id": 58631172, "link": "https://stackoverflow.com/questions/58631172/how-do-you-use-next-js-dynamic-with-libraries-that-exports-multiple-functions/65160416#65160416", "title": "How do you use Next.js dynamic with libraries that exports multiple functions?", "body": "<p>As I found out <a href=\"https://github.com/vercel/next.js/discussions/13139\" rel=\"nofollow noreferrer\">here</a> it's done like this</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const { geolocated } = { \n  geolocated: dynamic(() =&gt; \n    import('react-geolocated').then((module) =&gt; module.geolocated)\n    )\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1019, "user_id": 857030, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/9V4My.jpg?s=128&g=1", "display_name": "Tithos", "link": "https://stackoverflow.com/users/857030/tithos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1607192268, "creation_date": 1572458007, "question_id": 58631172, "link": "https://stackoverflow.com/questions/58631172/how-do-you-use-next-js-dynamic-with-libraries-that-exports-multiple-functions", "title": "How do you use Next.js dynamic with libraries that exports multiple functions?", "body": "<p>I cannot seem to figure out how to use Next.js's <code>dynamic()</code> function to import a class or function from libraries that exports multiple functions.</p>\n\n<p>In my project, I am trying to do this:</p>\n\n<pre><code>import dynamic from 'next/dynamic';\nconst { geolocated } = dynamic(() =&gt; import('react-geolocated'));\n</code></pre>\n\n<p>The official Next.js docs give this example:</p>\n\n<pre><code>//import Highlight from 'react-highlight'\nimport dynamic from 'next/dynamic';\n\nconst Highlight = dynamic(() =&gt; import('react-highlight'));\n</code></pre>\n\n<p>This is the error I am getting:</p>\n\n<pre><code>TypeError: geolocated is not a function\n    at Module../components/Map.js (/home/tithos/Web Projects/nextjs-ipeefreely/.next/server/0.js:71:23)\n    at __webpack_require__ (/home/tithos/.../.next/server/static/development/pages/map.js:29:31)\n</code></pre>\n\n<p>Which now as I look at it makes me think this is a TypeScript and/or PropType issue.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "eslint"], "owner": {"reputation": 31, "user_id": 12298861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56c98106ba418a6d2a959c5728eee50?s=128&d=identicon&r=PG&f=1", "display_name": "Marc97", "link": "https://stackoverflow.com/users/12298861/marc97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1572457309, "creation_date": 1572457309, "question_id": 58630998, "link": "https://stackoverflow.com/questions/58630998/how-to-set-component-displayname-in-arrow-function-hoc", "title": "How to set Component displayName in arrow function HOC", "body": "<p>I'm trying figure out how to add displayname to my HOC and remove comment <em>eslint-disable-next-line react/display-name</em> from following code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const withMyHOC = () =&gt; &lt;P extends MyProps&gt;(WrappedComponent: React.ComponentType&lt;P&gt;):\n    React.FunctionComponent&lt;P&gt; =&gt; {\n    // eslint-disable-next-line react/display-name\n    return (props: P): ReactElement =&gt; (\n        &lt;MyComponent&gt;\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n            &lt;WrappedComponent {...props} /&gt;\n        &lt;/MyComponent&gt;);\n};\n</code></pre>\n\n<p>I found below solution: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const withMyHOC = () =&gt; &lt;P extends MyProps&gt;(WrappedComponent: React.ComponentType&lt;P&gt;):\n    React.FunctionComponent&lt;P&gt; =&gt; {\n    const innerHOC = (props: P): ReactElement =&gt; (\n        &lt;MyComponent&gt;\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n            &lt;WrappedComponent {...props} /&gt;\n        &lt;/MyComponent&gt;);\n    return innerHOC;\n};\n</code></pre>\n\n<p>But I think it not looks good.</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 3432, "user_id": 7845022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312141912201749/picture?type=large", "display_name": "Andrii Golubenko", "link": "https://stackoverflow.com/users/7845022/andrii-golubenko"}, "edited": false, "score": 1, "creation_date": 1572461948, "post_id": 58630750, "comment_id": 103571157, "body": "why you don&#39;t want to pass only one type of props from parent component to <code>SampleComponent</code>? You can pass <code>&lt;SampleComponent name={name} &#47;&gt;</code> or <code>&lt;SampleComponent name={color} &#47;&gt;</code>."}, {"owner": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "reply_to_user": {"reputation": 3432, "user_id": 7845022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312141912201749/picture?type=large", "display_name": "Andrii Golubenko", "link": "https://stackoverflow.com/users/7845022/andrii-golubenko"}, "edited": false, "score": 0, "creation_date": 1572464794, "post_id": 58630750, "comment_id": 103572321, "body": "@AndriiGolubenko, please don&#39;t take the component implementation details literally. The question is more about how to create a component that can accept a series of different prop interfaces."}, {"owner": {"reputation": 3432, "user_id": 7845022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312141912201749/picture?type=large", "display_name": "Andrii Golubenko", "link": "https://stackoverflow.com/users/7845022/andrii-golubenko"}, "edited": false, "score": 1, "creation_date": 1572469934, "post_id": 58630750, "comment_id": 103574392, "body": "I understand that you gave just an example. But what you want to create is not a component. It is like a fabric of components, that accepts type, data and then renders the desired component."}], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "edited": false, "score": 0, "creation_date": 1572472303, "post_id": 58632783, "comment_id": 103575193, "body": "I want a user to be able to provide a <code>name</code> prop or a <code>color</code> prop, but not both."}, {"owner": {"reputation": 1752, "user_id": 6489012, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vodDy.jpg?s=128&g=1", "display_name": "ysfaran", "link": "https://stackoverflow.com/users/6489012/ysfaran"}, "reply_to_user": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "edited": false, "score": 2, "creation_date": 1572479749, "post_id": 58632783, "comment_id": 103577141, "body": "@Jimmy oh, sorry. I edited the question. It&#39;s a bit more code but I dont think there is another option here. Also you might want to consider implementing 2 different components which use a 3 common component."}, {"owner": {"reputation": 733, "user_id": 13029900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad27f973ad74b45ca1e5f0881c39925?s=128&d=identicon&r=PG&f=1", "display_name": "Esther-I", "link": "https://stackoverflow.com/users/13029900/esther-i"}, "edited": false, "score": 0, "creation_date": 1587534967, "post_id": 58632783, "comment_id": 108545289, "body": "@ysfaran, Any idea to do this? -&gt; &quot;I want a user to be able to provide a name prop or a color prop, but not both.&quot; ? ,Thanks!"}, {"owner": {"reputation": 1752, "user_id": 6489012, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vodDy.jpg?s=128&g=1", "display_name": "ysfaran", "link": "https://stackoverflow.com/users/6489012/ysfaran"}, "reply_to_user": {"reputation": 733, "user_id": 13029900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad27f973ad74b45ca1e5f0881c39925?s=128&d=identicon&r=PG&f=1", "display_name": "Esther-I", "link": "https://stackoverflow.com/users/13029900/esther-i"}, "edited": false, "score": 0, "creation_date": 1587547963, "post_id": 58632783, "comment_id": 108551459, "body": "@Esther-I I think it should be clear from the answer. To break it down, you need to use union types: <code>type Props = { name: string } | { color: string }</code>. I don&#39;t know about your exact issue, so I can not answer it properly. Consider asking a new question!"}, {"owner": {"reputation": 733, "user_id": 13029900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad27f973ad74b45ca1e5f0881c39925?s=128&d=identicon&r=PG&f=1", "display_name": "Esther-I", "link": "https://stackoverflow.com/users/13029900/esther-i"}, "reply_to_user": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "edited": false, "score": 0, "creation_date": 1587550706, "post_id": 58632783, "comment_id": 108552956, "body": "Sorry, you&#39;re right. It was supposed to be directed to @Jimmy, he had the same issue. Thanks!"}, {"owner": {"reputation": 733, "user_id": 13029900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad27f973ad74b45ca1e5f0881c39925?s=128&d=identicon&r=PG&f=1", "display_name": "Esther-I", "link": "https://stackoverflow.com/users/13029900/esther-i"}, "reply_to_user": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "edited": false, "score": 0, "creation_date": 1587550785, "post_id": 58632783, "comment_id": 108552999, "body": "@Jimmy, Any idea to do this? -&gt; &quot;I want a user to be able to provide a name prop or a color prop, but not both.&quot; ? ,Thanks!"}], "tags": [], "owner": {"reputation": 1752, "user_id": 6489012, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vodDy.jpg?s=128&g=1", "display_name": "ysfaran", "link": "https://stackoverflow.com/users/6489012/ysfaran"}, "is_accepted": false, "score": 4, "last_activity_date": 1572479592, "last_edit_date": 1572479592, "creation_date": 1572465472, "answer_id": 58632783, "question_id": 58630750, "link": "https://stackoverflow.com/questions/58630750/react-typescript-component-with-two-different-prop-interfaces/58632783#58632783", "title": "React TypeScript component with two different prop interfaces", "body": "<p>I think what you are looking for are <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types\" rel=\"nofollow noreferrer\">intersection types</a>.</p>\n\n<p>Replace this line:</p>\n\n<pre><code>type Props = SamplePropsOne | SamplePropsTwo;\n</code></pre>\n\n<p>with this line:</p>\n\n<pre><code>type Props = SamplePropsOne &amp; SamplePropsTwo;\n</code></pre>\n\n<ul>\n<li><p><strong>Intersection types:</strong> combine multiple interfaces/types into one</p></li>\n<li><p><strong>Union types:</strong> choose one of multiple interfaces/types</p></li>\n</ul>\n\n<p><strong>EDIT</strong></p>\n\n<p>What you want is not possible (i think). What you could do is destructuring every type in a single line after casting <code>props</code>:</p>\n\n<pre><code>const SampleComponent: React.FC&lt;Props&gt; = props =&gt; {\n  const { name } = props as SamplePropsOne;\n  const { color } = props as SamplePropsTwo;\n\n  return color ? &lt;h1&gt;{color}&lt;/h1&gt; : &lt;h1&gt;{name}&lt;/h1&gt;;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13057, "user_id": 388951, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a2aaa6cd108f9a803ec61e20d76963f1?s=128&d=identicon&r=PG", "display_name": "danvk", "link": "https://stackoverflow.com/users/388951/danvk"}, "is_accepted": false, "score": 8, "last_activity_date": 1587494467, "creation_date": 1587494467, "answer_id": 61350778, "question_id": 58630750, "link": "https://stackoverflow.com/questions/58630750/react-typescript-component-with-two-different-prop-interfaces/61350778#61350778", "title": "React TypeScript component with two different prop interfaces", "body": "<p>Before TypeScript will let you read <code>name</code> or <code>color</code> off the union type, it needs some evidence that you're working with the correct type of Props (<code>SamplePropsOne</code> or <code>SamplePropsTwo</code>). There are a few standard ways to provide it with this.</p>\n\n<p>One is by making the union a <em>tagged</em> union by introducing a property to distinguish branches of the union. This type checks just fine:</p>\n\n<pre><code>interface SamplePropsOne {\n  type: 'one';\n  name: string;\n}\n\ninterface SamplePropsTwo {\n  type: 'two';\n  color: string;\n}\n\ntype Props = SamplePropsOne | SamplePropsTwo;\n\nconst SampleComponent: React.FC&lt;Props&gt; = props =&gt; (\n  props.type === 'one' ? (\n    &lt;h1&gt;{props.name}&lt;/h1&gt;\n  ) : (\n    &lt;h1&gt;{props.color}&lt;/h1&gt;\n  )\n);\n</code></pre>\n\n<p>If you get the cases backwards (as I did when writing this!) then TypeScript will complain.</p>\n\n<p>If the presence of a property is enough to distinguish the types, then you can use the <code>in</code> operator:</p>\n\n<pre><code>interface SamplePropsOne {\n  name: string;\n}\ninterface SamplePropsTwo {\n  color: string;\n}\ntype Props = SamplePropsOne | SamplePropsTwo;\n\nconst SampleComponent: React.FC&lt;Props&gt; = props =&gt; (\n  'color' in props ? (\n    &lt;h1&gt;{props.color}&lt;/h1&gt;\n  ) : (\n    &lt;h1&gt;{props.name}&lt;/h1&gt;\n  )\n);\n</code></pre>\n\n<p>If determining which type of object you have requires more complex logic, you can write a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\" rel=\"noreferrer\">user-defined type guard</a>. The key part is the \"is\" in the return type:</p>\n\n<pre><code>function isSampleOne(props: Props): props is SamplePropsOne {\n  return 'name' in props;\n}\n\nconst SampleComponent: React.FC&lt;Props&gt; = props =&gt; (\n  isSampleOne(props) ? (\n    &lt;h1&gt;{props.name}&lt;/h1&gt;\n  ) : (\n    &lt;h1&gt;{props.color}&lt;/h1&gt;\n  )\n);\n</code></pre>\n\n<p>It's also worth noting that because of the way structural typing works, there's no reason <code>props</code> in your example couldn't have both <code>name</code> <em>and</em> <code>color</code>:</p>\n\n<pre><code>const el = &lt;SampleComponent name=\"roses\" color=\"red\" /&gt;;  // ok\n</code></pre>\n\n<p>If it's important to not allow this, you'll need to use some slightly fancier types:</p>\n\n<pre><code>interface SamplePropsOne {\n  name: string;\n  color?: never;\n}\ninterface SamplePropsTwo {\n  color: string;\n  name?: never;\n}\ntype Props = SamplePropsOne | SamplePropsTwo;\n</code></pre>\n\n<p>The ts-essentials library has an <a href=\"https://github.com/krzkaczor/ts-essentials#xor\" rel=\"noreferrer\"><code>XOR</code> generic</a> that can be used to help construct exclusive unions like this.</p>\n"}], "owner": {"reputation": 1560, "user_id": 7460467, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a1b029d7797f40f5be6056fa1ae640f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7460467/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5396, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1587494467, "creation_date": 1572456293, "question_id": 58630750, "link": "https://stackoverflow.com/questions/58630750/react-typescript-component-with-two-different-prop-interfaces", "title": "React TypeScript component with two different prop interfaces", "body": "<p>I want to create a React TypeScript component whose props is a union of two different interfaces. However, when I do so, I get the warning:</p>\n\n<pre><code>TS2339: Property 'color' does not exist on type 'PropsWithChildren&lt;Props&gt;'\n</code></pre>\n\n<p>How can I create a React TypeScript component with a union of two different prop interfaces and at the same time am able to destructure those props? Thanks!</p>\n\n<p><strong>sampleComponent.tsx:</strong></p>\n\n<pre><code>import * as React from 'react';\n\ninterface SamplePropsOne {\n  name: string;\n}\n\ninterface SamplePropsTwo {\n  color: string;\n}\n\ntype Props = SamplePropsOne | SamplePropsTwo;\n\nconst SampleComponent: React.FC&lt;Props&gt; = ({ color, name }) =&gt; (\n  color ? (\n    &lt;h1&gt;{color}&lt;/h1&gt;\n  ) : (\n    &lt;h1&gt;{name}&lt;/h1&gt;\n  )\n);\n\nexport default SampleComponent;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/NY2v7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NY2v7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["angular", "typescript", "testing", "jasmine", "protractor"], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 5300496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JFKjP.jpg?s=128&g=1", "display_name": "Julien METRAL", "link": "https://stackoverflow.com/users/5300496/julien-metral"}, "is_accepted": true, "score": 0, "last_activity_date": 1572871130, "last_edit_date": 1572871130, "creation_date": 1572860549, "answer_id": 58690686, "question_id": 58630417, "link": "https://stackoverflow.com/questions/58630417/cannot-add-custom-matchers-for-jasmine-using-typescript-and-angular/58690686#58690686", "title": "Cannot add custom matchers for Jasmine using typescript and angular", "body": "<p>I found a solution, i just import my definition file in the helper file below the <code>custom-matchers.ts</code> file and rename it to have a different name import, so i have :</p>\n\n<pre><code>import './custom-matchers';\nimport './custom-matchers-types'; // definition file\n</code></pre>\n"}], "owner": {"reputation": 1434, "user_id": 5300496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JFKjP.jpg?s=128&g=1", "display_name": "Julien METRAL", "link": "https://stackoverflow.com/users/5300496/julien-metral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58690686, "answer_count": 1, "score": 0, "last_activity_date": 1572871130, "creation_date": 1572454948, "last_edit_date": 1572457727, "question_id": 58630417, "link": "https://stackoverflow.com/questions/58630417/cannot-add-custom-matchers-for-jasmine-using-typescript-and-angular", "title": "Cannot add custom matchers for Jasmine using typescript and angular", "body": "<p>I'm trying to add multiple new custom matchers to jasmine and use it, the goal is to create a file that register 2 matchers and all that matchers must be available for each test file with a single registration.</p>\n\n<p>so i've got a file named <code>custom-matchers.ts</code></p>\n\n<pre><code>/// &lt;reference path=\"custom-matchers.d.ts\"/&gt;\n\n(() =&gt; {\n  beforeEach(() =&gt; {\n    jasmine.addMatchers({\n      toHaveText: () =&gt; {\n        return {\n          compare: (actual, expected) =&gt; {\n            return {\n              pass: actual.getText().then(pass =&gt; pass === expected)\n            };\n          },\n        };\n      },\n      toBePresent: () =&gt; {\n        return {\n          compare: (actual, expected) =&gt; {\n            return {\n              pass: actual.isPresent().then(pass =&gt; pass === expected),\n            };\n          },\n        };\n      }\n    });\n  });\n})();\n</code></pre>\n\n<p>A type definition file named <code>custom-matchers.d.ts</code> (i've tried with a different name than the references file but it's the same):</p>\n\n<pre><code>declare namespace jasmine {\n  interface Matchers&lt;T&gt; {\n    toHaveText(text: any): boolean;\n    toBePresent(text: any): boolean;\n  }\n}\n</code></pre>\n\n<p>this file is registered in another file named e2e-helper, this file is imported in every test file <code>e2e-helper.ts</code>:</p>\n\n<pre><code>/// &lt;reference path=\"custom-matchers.d.ts\"/&gt;\nimport './custom-matchers';\n</code></pre>\n\n<p>When i try to use it in a test file for exemple:</p>\n\n<pre><code>expect(object as any).toBePresent();\n</code></pre>\n\n<p>I got an error :</p>\n\n<blockquote>\n  <p>Property 'toBePresent' does not exist on type 'Matchers'</p>\n</blockquote>\n"}, {"tags": ["angular", "typescript", "firebase", "firebase-authentication"], "comments": [{"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 1, "creation_date": 1572459378, "post_id": 58630111, "comment_id": 103570028, "body": "I suggest you start fresh... you have some mixed deps there as well. Both <code>angularfire2</code> and <code>@angular&#47;fire</code>, makes no sense ;)"}, {"owner": {"reputation": 36, "user_id": 12224005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DWtYp.jpg?s=128&g=1", "display_name": "AmirHamza Sabuz", "link": "https://stackoverflow.com/users/12224005/amirhamza-sabuz"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1572563742, "post_id": 58630111, "comment_id": 103609245, "body": "TypeError: app.firestore is not a function <a href=\"https://stackblitz.com/edit/hamza-fruit-shop?file=src%2Fapp%2Fservices%2Fgoods.service.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a> Here I have only used @angular/fire. I didn&#39;t used angularfire2. But I got the error TypeError: app.firestore is not a function"}], "owner": {"reputation": 36, "user_id": 12224005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DWtYp.jpg?s=128&g=1", "display_name": "AmirHamza Sabuz", "link": "https://stackoverflow.com/users/12224005/amirhamza-sabuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572560480, "creation_date": 1572453795, "last_edit_date": 1572560480, "question_id": 58630111, "link": "https://stackoverflow.com/questions/58630111/error-typeerror-app-auth-is-not-a-function", "title": "ERROR TypeError: app.auth is not a function", "body": "<p><a href=\"https://stackblitz.com/edit/angular-qxwzto?file=src%2Fapp%2Fbs-navbar%2Fbs-navbar.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-qxwzto?file=src%2Fapp%2Fbs-navbar%2Fbs-navbar.component.ts</a> </p>\n\n<p>In stackblitz when I write this code </p>\n\n<pre><code>import { AngularFireAuth } from 'angularfire2/auth';\nimport { Component, OnInit } from '@angular/core';  \n\n@Component({\n  selector: 'bs-navbar',\n  templateUrl: './bs-navbar.component.html',\n  styleUrls: ['./bs-navbar.component.css']\n})\nexport class BsNavbarComponent {\n\n\n  constructor(private afAuth: AngularFireAuth ) {\n    afAuth.authState.subscribe(x=&gt; console.log(x));\n  }\n\n  logout() {\n    this.afAuth.auth.signOut();\n  }\n\n}\n</code></pre>\n\n<p>I got this error </p>\n\n<blockquote>\n  <p>ERROR TypeError: app.auth is not a function</p>\n</blockquote>\n\n<p>By default firebase version is firebase@6.6.2</p>\n\n<p>I have tried to install firebase@4.6.0 but then I have got the new error </p>\n\n<blockquote>\n  <p>ERROR FirebaseError\u00a0{code: \"app/bad-app-name\", message: \"Firebase:\n  Illegal App name: '[object Object] (app/bad-app-name).\", name:\n  \"[object Object]\"</p>\n</blockquote>\n\n<p>=========================================</p>\n\n<blockquote>\n  <p><strong>TypeError: app.firestore is not a function</strong> </p>\n</blockquote>\n\n<p><a href=\"https://stackblitz.com/edit/hamza-fruit-shop?file=src%2Fapp%2Fservices%2Fgoods.service.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/hamza-fruit-shop?file=src%2Fapp%2Fservices%2Fgoods.service.ts</a> </p>\n\n<p><strong>goods.service.ts</strong></p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class GoodsService {\n    constructor(private fs: AngularFirestore) {}\n    getAllGoods() {\n        return this.fs.collection('goods').valueChanges();\n    }\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/hamza-fruit-shop?file=src%2Fapp%2Fcomponents%2Fhome%2Fhome.component.ts\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/hamza-fruit-shop?file=src%2Fapp%2Fcomponents%2Fhome%2Fhome.component.ts</a> </p>\n\n<p><strong>home.component.ts</strong> </p>\n\n<pre><code>import { GoodsService } from './../../services/goods.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Good } from './../../interfaces/good.interface';\n\n@Component({\n    selector: 'app-home',\n    templateUrl: './home.component.html',\n    styleUrls: [ './home.component.css' ]\n})\nexport class HomeComponent implements OnInit {\n    goods: Good[] = [];\n\n    constructor(private gs: GoodsService) {}\n\n    ngOnInit() {\n        this.gs.getAllGoods().subscribe((data) =&gt; (this.goods = data));\n    }\n\n    addToCart(index) {\n        console.log('added', this.goods[index]);\n    }\n}\n</code></pre>\n\n<p>I got the error</p>\n\n<blockquote>\n  <p>TypeError: app.firestore is not a function</p>\n</blockquote>\n"}, {"tags": ["javascript", "node.js", "typescript", "protractor"], "comments": [{"owner": {"reputation": 113, "user_id": 2696422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb160ce874e10bbdfe63ecb72a5d84e0?s=128&d=identicon&r=PG&f=1", "display_name": "fumiya.f", "link": "https://stackoverflow.com/users/2696422/fumiya-f"}, "edited": false, "score": 0, "creation_date": 1572453911, "post_id": 58630049, "comment_id": 103567471, "body": "I think you should consider to use <code>sendKeys</code>. <a href=\"https://stackoverflow.com/questions/19914915/how-to-make-protractor-press-the-enter-key\" title=\"how to make protractor press the enter key\">stackoverflow.com/questions/19914915/&hellip;</a>"}, {"owner": {"reputation": 2600, "user_id": 2140747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CsujY.jpg?s=128&g=1", "display_name": "tehbeardedone", "link": "https://stackoverflow.com/users/2140747/tehbeardedone"}, "edited": false, "score": 1, "creation_date": 1572458133, "post_id": 58630049, "comment_id": 103569467, "body": "Could it be the site you are using? I copied your exacts script and replaced the url with <a href=\"https://google.com\" rel=\"nofollow noreferrer\">google.com</a> and it worked fine."}, {"owner": {"reputation": 2600, "user_id": 2140747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CsujY.jpg?s=128&g=1", "display_name": "tehbeardedone", "link": "https://stackoverflow.com/users/2140747/tehbeardedone"}, "edited": false, "score": 1, "creation_date": 1572458767, "post_id": 58630049, "comment_id": 103569747, "body": "I take that back. It works fine if you don&#39;t use <code>async</code>. I originally did not have that and it was working. When I added the <code>async</code> keyword and set <code>SELENIUM_PROMISE_MANAGER: false,</code> in my config it stopped working. I removed the config property and <code>async</code> keyword from the test and it started working again."}, {"owner": {"reputation": 1381, "user_id": 2868069, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ccf832c91ad3d59751be99ed7d11c620?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh H", "link": "https://stackoverflow.com/users/2868069/ganesh-h"}, "reply_to_user": {"reputation": 113, "user_id": 2696422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb160ce874e10bbdfe63ecb72a5d84e0?s=128&d=identicon&r=PG&f=1", "display_name": "fumiya.f", "link": "https://stackoverflow.com/users/2696422/fumiya-f"}, "edited": false, "score": 0, "creation_date": 1572496878, "post_id": 58630049, "comment_id": 103580507, "body": "@funatsu.fumiya No, I can&#39;t use send keys there is a purpose I asked.However thanks for reply"}], "answers": [{"tags": [], "owner": {"reputation": 2600, "user_id": 2140747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CsujY.jpg?s=128&g=1", "display_name": "tehbeardedone", "link": "https://stackoverflow.com/users/2140747/tehbeardedone"}, "is_accepted": false, "score": 1, "last_activity_date": 1572460172, "creation_date": 1572460172, "answer_id": 58631702, "question_id": 58630049, "link": "https://stackoverflow.com/questions/58630049/how-to-execute-powershell-script-in-protractor-tests/58631702#58631702", "title": "How to execute powershell script in protractor tests?", "body": "<p>Here is how I was able to get it to work with <code>async</code>. </p>\n\n<p>Add <code>SELENIUM_PROMISE_MANAGER: false</code> to your config. </p>\n\n<p>Then use <code>spawnSync</code> instead of <code>spawn</code>. </p>\n\n<pre><code>const { browser } = require('protractor');\nconst { spawnSync } = require('child_process');\n\ndescribe('spawn test', () =&gt; {\n  it('should execute powershell script', async () =&gt; {\n    await browser.get('https://google.com')\n    await spawnSync('powershell.exe', ['-noexit', './test.ps1']);\n  });\n});\n</code></pre>\n\n<p>This ran the script but it doesn't look like <code>-noexit</code> is working. I could see the text entered into the search input, the results popped up for just a second and then the script exited. </p>\n"}], "owner": {"reputation": 1381, "user_id": 2868069, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ccf832c91ad3d59751be99ed7d11c620?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh H", "link": "https://stackoverflow.com/users/2868069/ganesh-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572460172, "creation_date": 1572453545, "last_edit_date": 1572455989, "question_id": 58630049, "link": "https://stackoverflow.com/questions/58630049/how-to-execute-powershell-script-in-protractor-tests", "title": "How to execute powershell script in protractor tests?", "body": "<p>I am trying to execute powershell script inside protractor test</p>\n\n<p>Protractor spec.ts</p>\n\n<pre><code> it(\"Should Execute Powershell Script\", async () =&gt; {\n    browser.get('http://mywebsite.com')\n       var spawn = require('child_process').spawn;\n       var child = spawn('powershell.exe', ['-noexit', './test.ps1']);\n});\n</code></pre>\n\n<p>test.ps1</p>\n\n<pre><code>$wshell = New-Object -ComObject wscript.shell;\n$wshell.AppActivate('Chrome')\n$wshell.SendKeys('Ganesh Hegde')\n$wshell.SendKeys(\"{ENTER}\")\n</code></pre>\n\n<p>The powershell script is not getting executed could you please help me?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 4686, "user_id": 6736888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f70e865bb04192d8afa5fb27e88c3d?s=128&d=identicon&r=PG&f=1", "display_name": "penleychan", "link": "https://stackoverflow.com/users/6736888/penleychan"}, "edited": false, "score": 0, "creation_date": 1572452222, "post_id": 58629635, "comment_id": 103566534, "body": "You can try using <code>forkJoin</code> <a href=\"https://www.learnrxjs.io/operators/combination/forkjoin.html\" rel=\"nofollow noreferrer\">learnrxjs.io/operators/combination/forkjoin.html</a>"}, {"owner": {"reputation": 436, "user_id": 11227930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XOK1KBr5X3w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfprIBFJctaul0-yX8JQVamOB7DBQ/mo/photo.jpg?sz=128", "display_name": "Ron Rofe", "link": "https://stackoverflow.com/users/11227930/ron-rofe"}, "reply_to_user": {"reputation": 4686, "user_id": 6736888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f70e865bb04192d8afa5fb27e88c3d?s=128&d=identicon&r=PG&f=1", "display_name": "penleychan", "link": "https://stackoverflow.com/users/6736888/penleychan"}, "edited": false, "score": 0, "creation_date": 1572452766, "post_id": 58629635, "comment_id": 103566850, "body": "@penleychan Looks good but I want to do that only once and not always. If the first time when the Store emits has completed, I no longer want to wait for it when the ActivatedRoute subscribes"}, {"owner": {"reputation": 155, "user_id": 6359420, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1197712216928681/picture?type=large", "display_name": "Nitin Shekhar", "link": "https://stackoverflow.com/users/6359420/nitin-shekhar"}, "edited": false, "score": 0, "creation_date": 1572453601, "post_id": 58629635, "comment_id": 103567310, "body": "better pass the menueItems list from where you are navigating to this page via navigationExtras  in router.navigate method"}], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 11227930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XOK1KBr5X3w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfprIBFJctaul0-yX8JQVamOB7DBQ/mo/photo.jpg?sz=128", "display_name": "Ron Rofe", "link": "https://stackoverflow.com/users/11227930/ron-rofe"}, "edited": false, "score": 0, "creation_date": 1572498429, "post_id": 58629968, "comment_id": 103580792, "body": "Great approach, but this is not works in this case as I am retreiving the data of the Store from the child components = after ngOnInit (as they are loaded only after the parent component is activated). But thank you!"}], "tags": [], "owner": {"reputation": 20573, "user_id": 1643676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/418606a9471058ad35cb48144e582371?s=128&d=identicon&r=PG", "display_name": "Athanasios Kataras", "link": "https://stackoverflow.com/users/1643676/athanasios-kataras"}, "is_accepted": false, "score": 0, "last_activity_date": 1572453222, "creation_date": 1572453222, "answer_id": 58629968, "question_id": 58629635, "link": "https://stackoverflow.com/questions/58629635/angular-rxjs-delay-subscription-till-other-observable-emits/58629968#58629968", "title": "Angular rxjs: Delay subscription till other Observable emits", "body": "<p>Don't get your data in init from the store if possible. Get them from a resolver.</p>\n\n<p>You can ofcourse get them from the store in the resolver and then access them in the init function as a value. </p>\n\n<p>Look for more information here <a href=\"https://angular.io/api/router/Resolve\" rel=\"nofollow noreferrer\">https://angular.io/api/router/Resolve</a></p>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 11227930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XOK1KBr5X3w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfprIBFJctaul0-yX8JQVamOB7DBQ/mo/photo.jpg?sz=128", "display_name": "Ron Rofe", "link": "https://stackoverflow.com/users/11227930/ron-rofe"}, "edited": false, "score": 0, "creation_date": 1572498466, "post_id": 58631982, "comment_id": 103580798, "body": "Works perfect and exectly what I needed. Thank you."}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "reply_to_user": {"reputation": 436, "user_id": 11227930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XOK1KBr5X3w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfprIBFJctaul0-yX8JQVamOB7DBQ/mo/photo.jpg?sz=128", "display_name": "Ron Rofe", "link": "https://stackoverflow.com/users/11227930/ron-rofe"}, "edited": false, "score": 0, "creation_date": 1572510533, "post_id": 58631982, "comment_id": 103584523, "body": "You are very welcome, glad to hear it was suitable for you! :)"}], "tags": [], "owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "is_accepted": true, "score": 2, "last_activity_date": 1572461972, "last_edit_date": 1572461972, "creation_date": 1572461463, "answer_id": 58631982, "question_id": 58629635, "link": "https://stackoverflow.com/questions/58629635/angular-rxjs-delay-subscription-till-other-observable-emits/58631982#58631982", "title": "Angular rxjs: Delay subscription till other Observable emits", "body": "<p>Based on your comment...</p>\n\n<blockquote>\n  <p>If the first time when the Store emits has completed, I no longer want to wait for it when the ActivatedRoute subscribes</p>\n</blockquote>\n\n<p>You are looking for <a href=\"https://www.learnrxjs.io/operators/combination/combinelatest.html\" rel=\"nofollow noreferrer\"><code>combineLatest</code></a>, which...</p>\n\n<blockquote>\n  <p>When any observable emits a value, emit the last emitted value from each.</p>\n</blockquote>\n\n<p>So I suggest the following:</p>\n\n<pre><code>import { Subscription, combineLatest } from 'rxjs';\n\n// ...\n\nmySubscription: Subscription;\n\nngOnInit() {\n  this.mySubscription = combineLatest(\n    this.store.select('menuItems'),\n    this.route.fragment.pipe(\n      filter((fragment: string) =&gt; typeof fragment === 'string')\n    )\n  // DON'T USE ANY, type your data...!\n  ).subscribe((data: [any, any]) =&gt; {\n    this.menuItems = data[0];\n    const fragment = data[1]\n    // do your thing...\n  })\n}\n\nngOnDestroy() {\n  this.mySubscription.unsubscribe();\n}\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 11227930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XOK1KBr5X3w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfprIBFJctaul0-yX8JQVamOB7DBQ/mo/photo.jpg?sz=128", "display_name": "Ron Rofe", "link": "https://stackoverflow.com/users/11227930/ron-rofe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 58631982, "answer_count": 2, "score": 3, "last_activity_date": 1572461972, "creation_date": 1572451980, "question_id": 58629635, "link": "https://stackoverflow.com/questions/58629635/angular-rxjs-delay-subscription-till-other-observable-emits", "title": "Angular rxjs: Delay subscription till other Observable emits", "body": "<p>I have 2 Subscription - one is a subscription of my ActivatedRoute and another from ngrx Store.</p>\n\n<pre><code>  ngOnInit() {\n    this.menuItems$ = this.store.select('menuItems');\n    this.menuItems$.subscribe(data =&gt; {\n      this.menuItems = data.menuItems;\n    });\n  }\n\n  ngAfterViewInit() {\n    this.fragmentSubscription = this.route.fragment.pipe(\n      filter((fragment: string) =&gt; typeof fragment === 'string')\n    ).subscribe((fragment: string) =&gt; {\n      setTimeout(() =&gt; {\n        const element: ElementRef = this.menuItems.find(menuItem =&gt; menuItem.link === fragment).element;\n        if(element !== undefined) {\n          element.nativeElement.scrollIntoView({ behavior: \"smooth\", block: \"start\", inline: \"center\" });\n        }\n      });\n    });\n  }\n</code></pre>\n\n<p>As my ActivatedRoute (fragment) subscription depends on my store subscription data, I want to delay my ActivatedRoute (fragment) subscription till my Store is subscribed for the first time</p>\n\n<p>Is there any rxjs operator for this?</p>\n\n<p>Tnx</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572453151, "post_id": 58629426, "comment_id": 103567081, "body": "Do you want <code>test</code> to accept <i>either</i> a <code>Callback&lt;number, &#39;first&#39;&gt;</code> <i>or</i> a <code>Callback&lt;string, &#39;second&#39;&gt;</code>?  That&#39;s how you&#39;ve typed it, but I doubt that&#39;s what you mean since such a callback would be impossible to call safely.  Or do you want <code>test</code> to accept a callback which itself can act as either type, meaning it is <i>both</i> of them?  That would be more like <code>&amp;</code> instead of <code>|</code>."}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572453568, "post_id": 58629426, "comment_id": 103567296, "body": "I want to accept either / or, which why I&#39;m using the <code>|</code>."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572453608, "post_id": 58629426, "comment_id": 103567317, "body": "So, assuming <code>test</code>&#39;s implementation didn&#39;t just <code>return</code>, what would you hope to do with <code>x</code>?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572453778, "post_id": 58629426, "comment_id": 103567403, "body": "Or, put another way, you need <code>y</code> to be something like <code>number &amp; string</code> the way you&#39;ve got it, not <code>number | string</code>.  That doesn&#39;t make much sense, so I&#39;m questioning the typing of <code>x</code>.  See <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-3.html#improved-behavior-for-calling-union-types\" rel=\"nofollow noreferrer\">this feature</a>; unions of function types can only be called with intersections of parameters."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1572453860, "post_id": 58629426, "comment_id": 103567449, "body": "You can almost do it with <code>type Callback = (...args: [number, &#39;first&#39;] | [string, &#39;second&#39;]) =&gt; void</code>. With this the &quot;implicit any&quot; errors are gone, but the compiler still doesn&#39;t know that z must be &#39;first&#39; if y is a number."}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572454013, "post_id": 58629426, "comment_id": 103567519, "body": "@jcalz I do not need to do much with the data itself inside the method, it&#39;s used more like a proxy with a bunch of generics in the real code. Just wanted to extract the absolute minimum to be able to see the problem."}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1572454138, "post_id": 58629426, "comment_id": 103567570, "body": "@emlai I don&#39;t have compile errors currently either, my issue is that the arguments are implicit <code>any</code>s."}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572455445, "post_id": 58629426, "comment_id": 103568239, "body": "The only way I found so far is to provide the arguments as an object. I&#39;ll add that as a potential solution for now. If you find anything closed please feel free to add it. :)"}], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572458386, "post_id": 58630595, "comment_id": 103569582, "body": "Please note that <code>(args: Test&lt;number, 1&gt; | Test&lt;string, &#39;second&#39;&gt;) =&gt; void</code> is not equivalent to <code>((args: Test&lt;number, 1&gt;)=&gt;void) | ((args: Test&lt;string, &#39;second&#39;&gt;)=&gt;void)</code>.  Functions are <a href=\"https://www.stephanboyer.com/post/132/what-are-covariance-and-contravariance\" rel=\"nofollow noreferrer\"><i>contravariant</i></a> in their parameter types, so unions of functions correspond to intersections of function parameters, and vice versa."}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572458667, "post_id": 58630595, "comment_id": 103569699, "body": "I&#39;m aware they are not equivalent, bot for the second scenario TypeScript will only infer an <code>any</code> type. That&#39;s why this answer is only the closest I could get, not 1:1 response for the question I had."}], "tags": [], "owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "is_accepted": false, "score": 0, "last_activity_date": 1572455668, "creation_date": 1572455668, "answer_id": 58630595, "question_id": 58629426, "link": "https://stackoverflow.com/questions/58629426/typescript-union-function-types/58630595#58630595", "title": "TypeScript union function types", "body": "<p>Seems like it's not possible to achieve that result with the current tooling of TS, however similar can be achieved if the arguments are supplied as a single object. Although doing a <code>typeof</code> check on <code>y</code> still doesn't narrow the type of <code>z</code>. </p>\n\n<pre><code>type Test&lt;T1, T2&gt; = {\n    y: T1;\n    z: T2;\n};\n\nconst test = (x: (args: Test&lt;number, 1&gt; | Test&lt;string, 'second'&gt;) =&gt; void) =&gt; {\n    return;\n}\n\ntest((args) =&gt; {\n    if(args.z === 1) {\n        // args.y recognized as number\n        args.y.toExponential();\n    } else {\n        // args.y recognized as string\n        args.y.split('');\n    }\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572462706, "post_id": 58632009, "comment_id": 103571445, "body": "Thanks for the lengthy explanation, really useful! Happy that you filed an issue, support for this would be really handy. As a side note the TL;DR code is basically the same that i posted, just a tuple args instead of an object. I guess it&#39;s handy that way i can keep the arguments separate. :) Thanks again!"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 7, "last_activity_date": 1572461586, "creation_date": 1572461586, "answer_id": 58632009, "question_id": 58629426, "link": "https://stackoverflow.com/questions/58629426/typescript-union-function-types/58632009#58632009", "title": "TypeScript union function types", "body": "<p>Here's what's going on as I see it.  Let's use these definitions:</p>\n\n<pre><code>type Callback&lt;T1, T2&gt; = (y: T1, z: T2) =&gt; void;\ntype First = Callback&lt;number, 'first'&gt;;\ntype Second = Callback&lt;string, 'second'&gt;;\n</code></pre>\n\n<p>First, I'm definitely skeptical that you want a union of functions as opposed to an intersection of functions.  Observe that such a union of functions is essentially useless:</p>\n\n<pre><code>const unionTest = (x: First | Second) =&gt; {\n  // x is *either* a First *or* it is a Second, \n  // *but we don't know which one*.  So how can we ever call it?\n\n  x(1, \"first\"); // error! \n  // Argument of type '1' is not assignable to parameter of type 'never'.\n  x(\"2\", \"second\"); // error!\n  // Argument of type '\"2\"' is not assignable to parameter of type 'never'.\n}\n</code></pre>\n\n<p>The <code>unionTest()</code> function is the same as your <code>test()</code>, but it can't do anything with <code>x</code>, which is only known to be a <code>First</code> <em>or</em> a <code>Second</code>.  If you try to call it you'll get an error no matter what.  A <em>union</em> of functions can only safely act on the <em>intersection</em> of their parameters.  Some support for this was <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-3.html#improved-behavior-for-calling-union-types\" rel=\"noreferrer\">added in TS3.3</a>, but in this case the parameter types are mutually exclusive, so only acceptable parameters are of type <code>never</code>... so <code>x</code> is uncallable.  </p>\n\n<p>I doubt such a union of mutually incompatible functions is ever what anyone wants.  The duality of unions and intersections and the <a href=\"https://www.stephanboyer.com/post/132/what-are-covariance-and-contravariance\" rel=\"noreferrer\">contravariance</a> of function types with respect to the types of their parameters are confusing and hard to talk about, but the distinction is important so I feel it's worth belaboring this point.  This union is like finding out that I have to schedule a meeting with someone who will <em>either</em> be available on Monday <em>or</em> will be available on Tuesday, but I don't know which.  I suppose if I could have the meeting on both Monday <em>and</em> Tuesday that would work, but assuming that doesn't make sense, I'm stuck.  The person I'm meeting with is a union, and the day I'm meeting is an intersection.  Can't do it.</p>\n\n<hr>\n\n<p>Instead, what I think you want is an <em>intersection</em> of functions.  This is something that corresponds to an <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"noreferrer\">overloaded</a> function; you can call it both ways.  That looks like this:</p>\n\n<pre><code>const intersectionTest = (x: First &amp; Second) =&gt; {\n  // x is *both* a First *and* a Second, so we can call it either way:\n  x(1, \"first\"); // okay!\n  x(\"2\", \"second\"); // okay!\n  // but not in an illegal way:\n  x(1, \"second\"); // error, as desired\n  x(\"2\", \"first\"); // error, as desired\n}\n</code></pre>\n\n<p>Now we know that <code>x</code> is both a <code>First</code> <em>and</em> a <code>Second</code>.  You can see that you can treat it like a <code>First</code> or like a <code>Second</code> and be fine.  You can't treat it like some weird hybrid, though, like <code>x(1, \"second\")</code>, but presumably that's what you want.  Now I'm scheduling a meeting with someone who will be available on <em>both</em> Monday <em>and</em> Tuesday.  If I ask that person what day to schedule the meeting, she might say \"either Monday or Tuesday is fine with me\".  The day of the meeting is a union, and the person I'm meeting with is an intersection.  That works.</p>\n\n<hr>\n\n<p>So now I'm assuming you're dealing with an intersection of functions.  Unfortunately the compiler <a href=\"https://github.com/microsoft/TypeScript/issues/14107\" rel=\"noreferrer\">doesn't automatically synthesize the union of parameter types for you</a>, and you'll still end up with that \"implicit any\" error.</p>\n\n<pre><code>// unfortunately we still have the implicitAny problem:\nintersectionTest((x, y) =&gt; { }) // error! x, y implicitly any\n</code></pre>\n\n<p>You can <em>manually</em> transform the intersection of functions into a single function that acts on a union of parameter types.  But with two constrained parameters, the only way to express this is with <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#tuples-in-rest-parameters-and-spread-expressions\" rel=\"noreferrer\">rest arguments and rest tuples</a>.  Here's how we can do it:</p>\n\n<pre><code>const equivalentToIntersectionTest = (\n  x: (...[y, z]: Parameters&lt;First&gt; | Parameters&lt;Second&gt;) =&gt; void\n) =&gt; {\n  // x is *both* a First *and* a Second, so we can call it either way:\n  x(1, \"first\"); // okay!\n  x(\"2\", \"second\"); // okay!\n  // but not in an illegal way:\n  x(1, \"second\"); // error, as desired\n  x(\"2\", \"first\"); // error, as desired\n}\n</code></pre>\n\n<p>That is the same as <code>intersectionTest()</code> in terms of how it behaves, but now the parameters have types that are known and can be contextually typed to something better than <code>any</code>:</p>\n\n<pre><code>equivalentToIntersectionTest((y, z) =&gt; {\n  // y is string | number\n  // z is 'first' | 'second'\n  // relationship gone\n  if (z === 'first') {\n    y.toFixed(); // error!\n  }\n})\n</code></pre>\n\n<p>Unfortunately, as you see above, if you implement that callback with <code>(y, z) =&gt; {...}</code>, the types of <code>y</code> and <code>z</code> become independent unions.  The compiler forgets that they are related to each other.  As soon as you treat the parameter list as separate parameters, you lose the correlation.  I've seen enough questions that want some solution to this that I <a href=\"https://github.com/microsoft/TypeScript/issues/30581\" rel=\"noreferrer\">filed an issue about it</a>, but for now there's no direct support.</p>\n\n<p>Let's see what happens if we don't immediately separate the parameter list, by spreading the rest parameter into an array and using that:</p>\n\n<pre><code>equivalentToIntersectionTest((...yz) =&gt; {\n  // yz is [number, \"first\"] | [string, \"second\"], relationship preserved!\n</code></pre>\n\n<p>Okay, that's good.  Now <code>yz</code> is still keeping track of the constraints.  </p>\n\n<hr>\n\n<p>The next step here is trying to narrow <code>yz</code> to one or the other leg of the union via a type guard test.  The easiest way to do this is if <code>yz</code> is a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" rel=\"noreferrer\">discriminated union</a>.  And it <em>is</em>, but not because of <code>y</code> (or <code>yz[0]</code>).  <code>number</code> and <code>string</code> aren't literal types and can't be used directly as a discriminant:</p>\n\n<pre><code>  if (typeof yz[0] === \"number\") {\n    yz[1]; // *still* 'first' | 'second'.  \n  }\n</code></pre>\n\n<p>If you have to check <code>yz[0]</code>, you would have to implement your own <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\" rel=\"noreferrer\">type guard function</a> to support that.  Instead I'll suggest switching on <code>z</code> (or <code>yz[1]</code>), since <code>\"first\"</code> and <code>\"second\"</code> are string literals that can be used to discriminate the union:</p>\n\n<pre><code>  if (yz[1] === 'first') {\n    // you can only destructure into y and z *after* the test\n    const [y, z] = yz;\n    y.toFixed(); // okay\n    z === \"first\"; // okay\n  } else {\n    const [y, z] = yz;\n    y.toUpperCase(); // okay\n    z === \"second\"; // okay\n  }\n});\n</code></pre>\n\n<p>Notice that after <code>yz[1]</code> has been compared to <code>'first'</code>, the type of <code>yz</code> is no longer a union, and so you can destructure into <code>y</code> and <code>z</code> in a more useful way.</p>\n\n<hr>\n\n<p>Okay, whew. That's a lot.  TL;DR code:</p>\n\n<pre><code>const test = (\n  x: (...[y, z]: [number, \"first\"] | [string, \"second\"]) =&gt; void\n) =&gt; { }\n\ntest((...yz) =&gt; {\n  if (yz[1] === 'first') {\n    const [y, z] = yz;\n    y.toFixed();\n  } else {\n    const [y, z] = yz;\n    y.toUpperCase(); // okay\n  }\n});\n</code></pre>\n\n<p>Hope that helps; good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play//?ssl=96&amp;ssc=1&amp;pln=83&amp;pc=1#code/C4TwDgpgBAwghgGwQIzgYwNYB4AqBGAGihwCYA+KAXigAoQAuYwqAL0dIEoqKA3AewCWAEwDcAWABQoSFABiAgE4BnYFViIU6bADsArgFtkEBUQDkAM0UrTZcVPDQAyhDR9tQtfCSpMWFQoFtAHMzJRc3IRs7SVdtFShdbQE3HAh46hoAD0Z5ZVUAHyhnWKEuSgoAb0koKAB6WqhMqAElKAAqCAFgAAtjNqg4OStVNr4Ffq7m1sHiiKJquoa25F1VAHdoITdTVQxtPjWoNe6BNG6oNwg2gDoaxz4oboOoNDhtI+gIHmMXjWbgAD8kgWmRozAARJY8uCOCJFlBjAoxgBCKALepQACCCiCBgg2lUfHMUGk0FMeFMUyg+1UcCUSgEQW0cGQCGgwAeYDgCjg+ggwB+RJJDigpm0X2MpmuIJo4JI4KI4LCJRhcIxiJR6Ia2NxfIJF2JpNFcvBlJa1L4tPpjOZrPZnO5vP5gsNIrFEoUUskAF9gRIYm54oEBcoXMBktpUulaNkhnkoAAyIrhdxlSpaxpU5aW7r9Qa5eJtN5CPPJkpEJQPDa-d6vJD-BFdXoKI5wBgyiFQlSq+F8DBt5Eyk2K5URHsYvsDjMrVQ05rvN7NJAQIKIVvtiQ1UEQ0fuccNDUmAatIRpRQQIRD+WKrvAfcIhRIo90qCnhkKC8+v0YxLmMbARI4AFBAQA+KAVAEetujgb4SV6Zp9DABBTi6TFtFAsAkTtfR6EkYNjGVcMUjSYAaCyIgQDTKAKigb0uHVR8UUaCiEKQlDgBAgZ0L9SQMWrV53n0N5dA0UDgB5OI-wUfQuPnENCIjA0oHMRI0CIuJeIaYMHkGBlgjZZTVPUuCgJJOAMDSAYEiSNwlK5Hk+RDKBkJUJQCE0qAZwubROLWJsoA-eJuV1fFgGmdwApIkldCQtIK0CNB2Xg2J-DgYMPKMYANnxZThi4jxdw8YK8X1c03E4iBMkwtIGTtY8rJS8S0v1NwPJ6aB7KdJy2hc4A8wiudbLCTqBSgLlHII3D-QkRqEQAR10AQeEQUKcD4ABJAkCLDCMo1UDIQUYGhrhOgBtEAiBYABdRgAAVHQm5QsALYAKEKe6HOdJ7ZncMgqP4YRJCoqpN3hJpzWzHpSxe9pi1LH6hArKtoAE3560mTp2pbNY2ymrcwRvYZ70nEBB1B0FhygJUUyEYn+1J6dVgtVRAlkyC2VXBB1zxxoCapwr70PIgXzfc9L3J2Vryp29BcY58TzPD9xd9aaMX2Q4BEQ5C0EmN5QJaJRdGgII+EsuAcYuzymYEYkQD4XQEjCKBQOLVhwIgEaIBAtrmwgUxWn2ddlLGOCUb4RDIJ+DlIuqsJ9XaxQEQJN4gjZDxSSUKaIAWpaVoJNbNvknbiJUMjLZYYGM311p-ECIIoEKPRDGMDMWCpCxhkpQp-Zp0wMw-BAgIjJQTjAKATfFBYbdoNvKDn0Vb1MLgQZqGoQGuDl5EyC8aFheFDzJmoVbo78tLiAU4A8O2Heg2Do6UarL9DsaHq+1ptNk7keRdiKLI90OZKsyxhAKakhs6LWWmyfOG0tqhjUrtEiZETrXBABXbg1Eq5t3NKdJuRgjyQiJldBuUBTq12CCOGm4IrpEAHkPQMo8xqBWMN8IQZNMFUkGEIFoaAAj6ECEBC81kIxEC8rgn4rsyH125PiHYaJQYYjCDlEW3DeH8IJJnKexIaCkiFKg06AAGIhc9qDgjEQoGEGDQZrxYKdPAV01RLAgkgfoHc8hd1FIVKUNQFgq0ZqoVx1h8oeN7gMD84FxJ12cl0YwiBwoeCLB+foiiFwnhUZrNRYVNG0D0XYqg88AnACXpY1e8Jr41m8pxN84ldBqV0GEj+P8PBtyLOYEM-R2okhIgsGos1zqXSMc7FgdgSnr03gIbeQhd4OIuPTbpbtjHSyJtMkmPiEQICdivVevTy4DNQcM1eoy+AAFUwCQAUPAMIUzeyzKsfM+e1MVTLJuUfH0sJT71A+Z8r5ny-SzQFNGGgh1aDIL6awG6JCzGE2hEQwopCInkP5pQq6-1BDi2BrRP0-zSLHROqgyuoNp50BsbkhZBSimbJ6YGVQoLrpqD2XMw5W8d5vNBt6NZGy5nbP6XSoZDKN7HNOcYC5EArkTmeRiiQdE7BAA\" rel=\"noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1647, "favorite_count": 2, "accepted_answer_id": 58632009, "answer_count": 2, "score": 7, "last_activity_date": 1572461586, "creation_date": 1572451297, "question_id": 58629426, "link": "https://stackoverflow.com/questions/58629426/typescript-union-function-types", "title": "TypeScript union function types", "body": "<p>I'm trying to create a union type for arrow functions. The goal would be to be able to infer the type of the second argument based on the first.</p>\n\n<p>Ideally I would like <code>y</code> to be of type <code>number | string</code>, and <code>z</code> to be <code>'first' | 'second'</code>. But after narrowing down the type of either <code>y</code> or <code>z</code>, infer the narrowed type of the other parameter automatically.</p>\n\n<p>Unfortunately TypeScript doesn't seem to handle a complex case like this, but I was wondering if any of you had ever faced a similar issue.</p>\n\n<p>In a simplified scenario my code looks like:</p>\n\n<pre><code>type Callback&lt;T1, T2&gt; = (y: T1, z: T2) =&gt; void;\n\nconst test = (x: Callback&lt;number, 'first'&gt; | Callback&lt;string, 'second'&gt;) =&gt; {\n    return;\n}\n\n// Parameter 'y' implicitly has an 'any' type.\n// Parameter 'z' implicitly has an 'any' type.\ntest((y, z) =&gt; {\n    if(typeof y === 'number') {\n        // y is a number\n        // so z must be 'first'\n    } else {\n        // y is a string\n        // so z must be 'second'\n    }\n});\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["typescript", "enums"], "comments": [{"owner": {"reputation": 5947, "user_id": 2924577, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c499286ca761a5b21f3744ca229dffb0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/2924577/nikhil"}, "edited": false, "score": 1, "creation_date": 1572450722, "post_id": 58629107, "comment_id": 103565663, "body": "Can you also post the item you are passing?"}, {"owner": {"reputation": 59, "user_id": 10525877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93736c425f86ae3ec338dbb20296ee45?s=128&d=identicon&r=PG&f=1", "display_name": "BobiSad", "link": "https://stackoverflow.com/users/10525877/bobisad"}, "reply_to_user": {"reputation": 5947, "user_id": 2924577, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c499286ca761a5b21f3744ca229dffb0?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/2924577/nikhil"}, "edited": false, "score": 0, "creation_date": 1572451000, "post_id": 58629107, "comment_id": 103565823, "body": "An enum of type Item is being passed in the getEnumValue function. I won&#39;t know which item exactly is being passed."}, {"owner": {"reputation": 18991, "user_id": 4235784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b39477142baa729b47de7434341f19?s=128&d=identicon&r=PG&f=1", "display_name": "altocumulus", "link": "https://stackoverflow.com/users/4235784/altocumulus"}, "edited": false, "score": 0, "creation_date": 1572454235, "post_id": 58629107, "comment_id": 103567607, "body": "This might help: <a href=\"https://stackoverflow.com/questions/48478361/how-to-merge-two-enums-in-typescript\"><i>How to merge two enums in TypeScript</i></a>."}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 12148549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50838f0c2b8dd1cefaf3c918aeae167f?s=128&d=identicon&r=PG&f=1", "display_name": "Denerator", "link": "https://stackoverflow.com/users/12148549/denerator"}, "is_accepted": false, "score": 0, "last_activity_date": 1572454553, "creation_date": 1572454553, "answer_id": 58630318, "question_id": 58629107, "link": "https://stackoverflow.com/questions/58629107/get-the-value-of-an-enum-by-key-without-knowing-the-specific-enum-type/58630318#58630318", "title": "Get the value of an enum by key without knowing the specific enum type", "body": "<p>You should combine all the enums to a single object:</p>\n\n<pre><code>const MENU: IMenu = {\n  ... FoodItem,\n  ... DrinkItem\n};\n</code></pre>\n\n<p>And the typing for this object will be next </p>\n\n<pre><code>interface IMenu {\n  [key: string]: Item;\n}\n</code></pre>\n\n<p>And in the function, you will easily call value that you need: </p>\n\n<pre><code>Menu[item]\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10525877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93736c425f86ae3ec338dbb20296ee45?s=128&d=identicon&r=PG&f=1", "display_name": "BobiSad", "link": "https://stackoverflow.com/users/10525877/bobisad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572454553, "creation_date": 1572450373, "last_edit_date": 1572453848, "question_id": 58629107, "link": "https://stackoverflow.com/questions/58629107/get-the-value-of-an-enum-by-key-without-knowing-the-specific-enum-type", "title": "Get the value of an enum by key without knowing the specific enum type", "body": "<p>I have a type that consists of 3 enums.</p>\n\n<pre><code>enum TextItem {\n  BOOK = \"inventory.book\",\n  PAGE = \"inventory.page\"\n}\n\nenum FoodItem {\n  BURGER = \"food.burger\",\n  LETTUCE = \"food.lettuce\",\n}\n\nenum DrinkItem {\n  WATER = \"drinks.water\",\n  COLA = \"drinks.cola\",\n}\n\ntype Item = TextItem | FoodItem | DrinkItem;\n\nconst getEnumValue(item: Item) {\n  // What to do here?\n}\n\n</code></pre>\n\n<p>An enum of type <code>Item</code> is passed in the <code>getEnumValue</code> function. Which item it is, I won't know. But it's certain it's of type <code>Item</code> (e.g. <code>DrinkItem.WATER</code>).</p>\n\n<p>When passing the item in the function <code>getEnumValue</code>, how do I determine the associated string value?</p>\n\n<p>I was thinking instead of Items I'd say <code>keyof Item</code>. But then Typescript starts complaining about item being of type never.</p>\n"}, {"tags": ["typescript", "typescript-decorator"], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1572452140, "creation_date": 1572452140, "answer_id": 58629686, "question_id": 58628920, "link": "https://stackoverflow.com/questions/58628920/using-decorators-together-with-class-constructors/58629686#58629686", "title": "Using decorators together with class constructors", "body": "<p>The <code>target</code> you get will be the class's prototype, not any instance.  So binding a method to <code>target</code> will have the effect of losing the actual instance's <code>this</code> context and instead calling it in the context of the prototype, which generally won't have any of those instance properties.  </p>\n\n<p>You have to wait until the class method is actually called to get an appropriate <code>this</code>. So forget <code>target</code> and instead bind <code>func</code> to <code>this</code> inside your new method.  And note that arrow functions won't have their own <code>this</code> so <code>descriptor.value</code> should not be an arrow function (without more hoop jumping).  So I'd suggest a traditional anonymous <code>function</code> instead.  So, change <code>someDecorator()</code>'s implementation to something like the following: </p>\n\n<pre><code>function someDecorator() {\n  return (target: any, _2: any, descriptor: PropertyDescriptor) =&gt; {\n    const func = descriptor.value; // don't bind here\n    descriptor.value = function (...args: any) {\n      console.log('Doing decorator stuff!');\n      func.apply(this, args); // bind here (applying args is optional I guess)\n    }\n  }\n}\n</code></pre>\n\n<p>That should work now:</p>\n\n<pre><code>new Foo('Hello world!').bar(); \n// Doing decorator stuff!\n// Hello world!\n</code></pre>\n\n<p>Hope that helps.  Good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play//?experimentalDecorators=true&amp;ssl=23&amp;ssc=16&amp;pln=21&amp;pc=1#code/GYVwdgxgLglg9mABAZzgWwKYBEMTgJwEMoCAKASkQG8BYAKEUXwyhHyVKkPwHMWAuRITABPADSIA+gCZBw8YgAmGZBHwwADiXyCACvjgaM+KCJyr1WgpQC8APmr1GjPGGRREoSIhtKVazW0AOgA3QgAbEAwAbidnZQtAglCIqJ9PcGh4DiDc7h5kOVFKWgZnFwRUcIwg8LgeUgByLDgYMB4-PCJtFFZgYABCRvJYsvKvCCDCDQ1wkU4ACxhkCXzkEbjGAF84nbo9+ghwwmRkRAAxODhHOjiNEAAjcJgIRFd3fBBoMg11MKgMIgoEt2oIPm0eCVEAcygABVCYHBdYhkchxB7cCg3crvODVWr1RbLILAiEbMp7GFgDAAdwuVyaAAkMOE6ogaQRwoohuQghj8BRooh6AB6EWIFoQzoEFH4XogfoDUXi5ms64c-BcgZAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 99, "user_id": 4242749, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e8304eba8947518a70c4e718c1a661d?s=128&d=identicon&r=PG&f=1", "display_name": "mortenl", "link": "https://stackoverflow.com/users/4242749/mortenl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 58629686, "answer_count": 1, "score": 1, "last_activity_date": 1572452140, "creation_date": 1572449778, "question_id": 58628920, "link": "https://stackoverflow.com/questions/58628920/using-decorators-together-with-class-constructors", "title": "Using decorators together with class constructors", "body": "<p>I'm trying to use decorators in a class that gets initialized with a parameter but the value set in the constructor is undefined when the decorator is apply to my function. Please see the below toy example:</p>\n\n<pre><code>function someDecorator() {\n  return (target: any, _2: any, descriptor: PropertyDescriptor) =&gt; {\n    const func = descriptor.value.bind(target);\n    descriptor.value = () =&gt; {\n      console.log('Doing decorator stuff!');\n      func();\n    }\n  }\n}\n\nclass Foo {\n\n  public constructor(private thing: string) { }\n\n  @someDecorator()\n  bar() {\n    console.log(this.thing);\n  }\n}\n\nnew Foo('Hello world!').bar();\n</code></pre>\n\n<p>I would of cause like to have the output:</p>\n\n<pre><code>&gt; Doing decorator stuff!\n&gt; Hello world!\n</code></pre>\n\n<p>but sadly I get the output:</p>\n\n<pre><code>&gt; Doing decorator stuff!\n&gt; undefined\n</code></pre>\n\n<p>Anybody able to point me in the right direction?</p>\n"}, {"tags": ["typescript", "parsing"], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "is_accepted": true, "score": 0, "last_activity_date": 1572449780, "creation_date": 1572449780, "answer_id": 58628922, "question_id": 58628606, "link": "https://stackoverflow.com/questions/58628606/problem-to-deserialize-array-data-on-typescript-react-native/58628922#58628922", "title": "problem to deserialize array data on typescript (React-native)", "body": "<p>So easy kkkkkk</p>\n\n<pre><code>  export function getMockFAQ(): FAQInterface[] {\nreturn [\n{\n    title: \"FAQ Question 1\"\n},\n{\n    title: \"FAQ Question 1\"\n},\n{\n    title: \"FAQ Question 1\"\n}\n]\n}\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 58628922, "answer_count": 1, "score": -1, "last_activity_date": 1572458212, "creation_date": 1572448801, "last_edit_date": 1572458212, "question_id": 58628606, "link": "https://stackoverflow.com/questions/58628606/problem-to-deserialize-array-data-on-typescript-react-native", "title": "problem to deserialize array data on typescript (React-native)", "body": "<p>i need to parse my data array to myModel[].</p>\n\n<p>this is data load:</p>\n\n<pre><code>    export function getMockFAQ() {\nreturn [\n    {\n        title: \"FAQ Question 1\"\n    },\n    {\n        title: \"FAQ Question 1\"\n    },\n    {\n        title: \"FAQ Question 1\"\n    }\n]\n}\n</code></pre>\n\n<p>my model:</p>\n\n<pre><code>export interface FAQInterface {\ntitle: string;\n}\n</code></pre>\n\n<p>how can i convert this data to FAQInterface[] ?</p>\n\n<pre><code>const data = getMockFAQ();\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "material-ui"], "comments": [{"owner": {"reputation": 1038, "user_id": 6014489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ue4oG.jpg?s=128&g=1", "display_name": "Zeke Hernandez", "link": "https://stackoverflow.com/users/6014489/zeke-hernandez"}, "edited": false, "score": 1, "creation_date": 1572447960, "post_id": 58628308, "comment_id": 103564075, "body": "I&#39;d say it&#39;s feasible, but you will need to build a custom input component probably."}, {"owner": {"reputation": 42001, "user_id": 7495930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BvE1j04g-0c/AAAAAAAAAAI/AAAAAAAAB34/GwTEooh9wPo/photo.jpg?sz=128", "display_name": "Ryan Cogswell", "link": "https://stackoverflow.com/users/7495930/ryan-cogswell"}, "edited": false, "score": 0, "creation_date": 1572448420, "post_id": 58628308, "comment_id": 103564343, "body": "See my answer <a href=\"https://stackoverflow.com/questions/58402130/how-can-i-set-an-static-outlined-div-similar-to-material-uis-outlined-textfield/58421725#58421725\">here</a> if you are just trying to reuse the outlined-input look with custom stuff inside it."}, {"owner": {"reputation": 95, "user_id": 7522601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68234e467f429e127e2ae5834cb10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Paikz", "link": "https://stackoverflow.com/users/7522601/paikz"}, "reply_to_user": {"reputation": 42001, "user_id": 7495930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BvE1j04g-0c/AAAAAAAAAAI/AAAAAAAAB34/GwTEooh9wPo/photo.jpg?sz=128", "display_name": "Ryan Cogswell", "link": "https://stackoverflow.com/users/7495930/ryan-cogswell"}, "edited": false, "score": 0, "creation_date": 1572448929, "post_id": 58628308, "comment_id": 103564608, "body": "@RyanCogswell I want the value to be the same as the upper input field in the image. But to display as the lower input field. So form validation and all that stuff still works. Thanks for the link."}, {"owner": {"reputation": 95, "user_id": 7522601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68234e467f429e127e2ae5834cb10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Paikz", "link": "https://stackoverflow.com/users/7522601/paikz"}, "reply_to_user": {"reputation": 1038, "user_id": 6014489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ue4oG.jpg?s=128&g=1", "display_name": "Zeke Hernandez", "link": "https://stackoverflow.com/users/6014489/zeke-hernandez"}, "edited": false, "score": 0, "creation_date": 1572448995, "post_id": 58628308, "comment_id": 103564639, "body": "@ZekeHernandez Yeah, I&#39;&#39;m using Material UI textfield right now but i feels like i have to build a custom one in the end. I&#39;d rather avoid that because it takes a lot of time and can become buggy. But I think there is no options. Thanks for confirming."}], "owner": {"reputation": 95, "user_id": 7522601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68234e467f429e127e2ae5834cb10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Paikz", "link": "https://stackoverflow.com/users/7522601/paikz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572447830, "creation_date": 1572447830, "question_id": 58628308, "link": "https://stackoverflow.com/questions/58628308/is-it-possible-to-display-react-components-in-an-input-field", "title": "Is it possible to display react components in an input field?", "body": "<p>I'm using Material UI with React and I'm trying to build an input field that can display react components mixed with text. The reason is to be able to scan the text in the input field with a regex to find \"variables\". For example 'Hello, my name is $name'. I want to replace the variable with a material UI chip component.<a href=\"https://material-ui.com/components/chips/#chip\" rel=\"nofollow noreferrer\">(Link)</a> </p>\n\n<p>To clarify how I want it to look like.</p>\n\n<p><a href=\"https://i.stack.imgur.com/D2Hb6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D2Hb6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have looked around for libraries and I've found that <a href=\"https://github.com/TeamWertarbyte/material-ui-chip-input\" rel=\"nofollow noreferrer\">material-ui-chip-input</a> does something similar but it doesn't look to be customisable to solve my issue.</p>\n\n<p>Is there a way to render a react component in an input field or should I rethink how I should go about doing this? Any help is appreciated!</p>\n"}, {"tags": ["html", "css", "reactjs", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 14689, "user_id": 558972, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/cHti9.jpg?s=128&g=1", "display_name": "vijayst", "link": "https://stackoverflow.com/users/558972/vijayst"}, "is_accepted": true, "score": -1, "last_activity_date": 1572448509, "creation_date": 1572448509, "answer_id": 58628524, "question_id": 58628184, "link": "https://stackoverflow.com/questions/58628184/react-how-to-modify-the-html-inside-root/58628524#58628524", "title": "React - How to modify the html inside root?", "body": "<p>React HTML is all in JavaScript. In the node_modules, look for index.js and see if you can find the className or id attribute.</p>\n\n<p>Alternatively, you can go to the github repo of the component and browse the code files.</p>\n"}], "owner": {"reputation": 25, "user_id": 12106991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebKSE.jpg?s=128&g=1", "display_name": "AidanCL85", "link": "https://stackoverflow.com/users/12106991/aidancl85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 58628524, "answer_count": 1, "score": 0, "last_activity_date": 1572448509, "creation_date": 1572447459, "question_id": 58628184, "link": "https://stackoverflow.com/questions/58628184/react-how-to-modify-the-html-inside-root", "title": "React - How to modify the html inside root?", "body": "<p>Maybe its a stupid question but:</p>\n\n<p>I have an external Typescript-React app implemented into my code, but in order to add some CSS into one particular DIV (which doesnt have .class or #id) i need to reach the HTML code thats its inside root, how can i reach this HTML code? </p>\n\n<p>Obviously i am able to see the code via Dev-tools but these changes doesn\u2019t get saved after refreshing the page, and also I don\u2019t think that modifying the web page via dev-tools could be considered as a good practice\u2026</p>\n\n<p>I tried to find the HTML file but its not inside my files or neither inside node_modules,</p>\n\n<p>Thank you in advance,</p>\n\n<p>Best Regards.</p>\n"}, {"tags": ["javascript", "node.js", "angular", "typescript", "ecmascript-6"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9848259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkwRr.jpg?s=128&g=1", "display_name": "Lion To", "link": "https://stackoverflow.com/users/9848259/lion-to"}, "edited": false, "score": 0, "creation_date": 1572451306, "post_id": 58628561, "comment_id": 103566010, "body": "but issue that when noWhiteSpaceValidator is activated, minlength  validator is unactivated"}, {"owner": {"reputation": 27, "user_id": 9848259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkwRr.jpg?s=128&g=1", "display_name": "Lion To", "link": "https://stackoverflow.com/users/9848259/lion-to"}, "edited": false, "score": 0, "creation_date": 1572490168, "post_id": 58628561, "comment_id": 103579210, "body": "yes, I make sure, all validations is cool (maxlength, minLength, isMatchaPassword) and I dont know when I add function isWhiteSpace into the form (i have checked this function and it&#39;s cool), when I enter the password &lt; minlength and has a white space, it&#39;s return a error that about white space, but my expectation is both errors white space and minlenth"}], "tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": true, "score": 1, "last_activity_date": 1572448622, "creation_date": 1572448622, "answer_id": 58628561, "question_id": 58627986, "link": "https://stackoverflow.com/questions/58627986/dont-allow-whitespace-in-angular-form/58628561#58628561", "title": "Don&#39;t allow WhiteSpace in Angular Form", "body": "<p>You can do like this</p>\n\n<pre><code>ngOnInit() {\n        this.userForm = this.fb.group({\n            username: [\"\", noWhitespaceValidator]\n        });\n    }\n\nnoWhitespaceValidator(control: FormControl) {\n    const isWhitespace = (control.value || \"\").trim().length === 0;\n    const isValid = !isWhitespace;\n    return of(isValid ? null : { whitespace: true });\n}\n</code></pre>\n\n<p>Then in your view simply use</p>\n\n<pre><code>*ngIf=\"userForm.get('username').hasError('whitespace')\"\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9848259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NkwRr.jpg?s=128&g=1", "display_name": "Lion To", "link": "https://stackoverflow.com/users/9848259/lion-to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 58628561, "answer_count": 1, "score": 1, "last_activity_date": 1572448651, "creation_date": 1572446832, "last_edit_date": 1572448651, "question_id": 58627986, "link": "https://stackoverflow.com/questions/58627986/dont-allow-whitespace-in-angular-form", "title": "Don&#39;t allow WhiteSpace in Angular Form", "body": "<p>I am implementing register an user in Angular <a href=\"https://i.stack.imgur.com/4XkQh.jpg\" rel=\"nofollow noreferrer\">Form register image</a>, it have validated maxlength and minlength before. And now, I add an validation to check enter password have white space.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>const form = new FormGroup&lt;UserRegister&gt;({\r\n      email: new FormControl&lt;string&gt;(email, [\r\n        Validators.required,\r\n        Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')\r\n      ]),\r\n      password: new FormControl&lt;string&gt;(password, [\r\n        Validators.required,\r\n        Validators.minLength(PASSWORD_MINLENGTH),\r\n        Validators.maxLength(PASSWORD_MAXLENGTH),\r\n      ]),\r\n      confirmPassword: new FormControl&lt;string&gt;(confirmPassword, [\r\n        Validators.required\r\n      ]),\r\n    }, {validators: [isWhiteSpace, passwordMatchValidator]});</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>      &lt;input matInput type=\"password\" required formControlName=\"password\" [errorStateMatcher]=\"errorStateMatcher\"\r\n            placeholder=\"{{ 'password' | translate }}\"&gt;\r\n          &lt;mat-error *ngIf=\"form.hasError('required', ['password'])\" [translate]=\"'validation.required'\"\r\n            [translateParams]=\"{ value: 'password' | translate }\"&gt;&lt;/mat-error&gt;\r\n          &lt;mat-error *ngIf=\"form.hasError('isWhiteSpace', ['password'])\" [translate]=\"'validation.isWhiteSpace'\"\r\n          [translateParams]=\"{ value: 'password' | translate }\"&gt;&lt;/mat-error&gt;\r\n          &lt;mat-error *ngIf=\"form.hasError('minlength', ['password'])\" [translate]=\"'validation.minLength'\"\r\n            [translateParams]=\"{ value: 'password' | translate, minLength: PASSWORD_MINLENGTH  }\"&gt;&lt;/mat-error&gt;\r\n          &lt;mat-error *ngIf=\"form.hasError('maxlength', ['password'])\" [translate]=\"'validation.maxLength'\"\r\n            [translateParams]=\"{ value: 'password' | translate, maxLength: PASSWORD_MAXLENGTH  }\"&gt;&lt;/mat-error&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But when I add function isWhiteSpace to form, validation of min-max length unactivated.\nWhen I enter a string &lt; minlength and have space but it show only an error about whitespace, my expectation result is show 2 errors about minlength and space.\nCould anybody give me a solution?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1027, "user_id": 10270173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FrmXM.jpg?s=128&g=1", "display_name": "Bilel-Zheni", "link": "https://stackoverflow.com/users/10270173/bilel-zheni"}, "is_accepted": true, "score": 2, "last_activity_date": 1572450280, "creation_date": 1572450280, "answer_id": 58629073, "question_id": 58627683, "link": "https://stackoverflow.com/questions/58627683/angular-keep-files-when-i-select-others-to-add/58629073#58629073", "title": "Angular Keep files when I select others to add", "body": "<p>You are initializing your urls array every time the detectFiles function is called ( new images are selected) </p>\n\n<p>just delete this line : this.urls = [];</p>\n\n<p><strong>Component</strong></p>\n\n<pre><code>files:any;\n\n   urls = new Array&lt;string&gt;();\n  detectFiles(event) {\n    //this.urls = [];\n    this.files = event.target.files;\n    if (this.files.length &lt; 7 ) {\n\n      for (let file of this.files) {\n        let reader = new FileReader();\n        reader.onload = (e: any) =&gt; {\n          this.urls.push(e.target.result);\n        }\n\n        reader.readAsDataURL(file);    \n      }\n    }   \n  }\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12247846"}, "edited": false, "score": 0, "creation_date": 1572451025, "post_id": 58629157, "comment_id": 103565844, "body": "Thanks to try help me ! best regards"}], "tags": [], "owner": {"reputation": 233, "user_id": 8134774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5997bf4b9e8a56c1be558dea1deab011?s=128&d=identicon&r=PG&f=1", "display_name": "saidutt", "link": "https://stackoverflow.com/users/8134774/saidutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1572450495, "creation_date": 1572450495, "answer_id": 58629157, "question_id": 58627683, "link": "https://stackoverflow.com/questions/58627683/angular-keep-files-when-i-select-others-to-add/58629157#58629157", "title": "Angular Keep files when I select others to add", "body": "<p>The problem here as mentioned by 'Z.bolbol' above.\nUnderstanding the scope. The urls array should be declared at global or root level. You have it at lexial scope which makes the urls array to initiate every time you hit the method.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12247846"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 58629073, "answer_count": 2, "score": 1, "last_activity_date": 1572450495, "creation_date": 1572445918, "question_id": 58627683, "link": "https://stackoverflow.com/questions/58627683/angular-keep-files-when-i-select-others-to-add", "title": "Angular Keep files when I select others to add", "body": "<p>I have a function to add images and preview them. I selected 3 images, these 3 images are displayed, but if you try to insert one more image, those three uploaded disappear and only visible to what I uploaded at that moment.</p>\n\n<p>Is there a way to increment the images? That is, if I added 3 and then want to add another image, I get 4 and not 1.</p>\n\n<p>How can I do this?</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-bqktnl\" rel=\"nofollow noreferrer\">Stackblitz  ---> My Code</a></p>\n\n<p><strong>Html</strong></p>\n\n<pre><code>&lt;div class=\"drop\"&gt;\n\n      &lt;ng-container *ngIf=\"urls.length &gt; 0\"&gt;\n          &lt;img [src]=\"urls[0]\"&gt;&lt;span class=\"delete\" style=\"cursor: pointer;\" (click)=\"deleteImage(urls[0])\"&gt;&lt;img src=\"./assets/cruz.svg\"&gt;&lt;/span&gt;\n        &lt;/ng-container&gt;\n        &lt;input type=\"file\" id=\"files\" multiple (change)=\"detectFiles($event)\" accept=\"image/*\"&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n\n      &lt;div class=\"Upcard\" *ngFor=\"let url of urls | slice:1\"&gt;\n          &lt;img [src]=\"url\"&gt;&lt;span class=\"delete\" style=\"cursor: pointer;\" (click)=\"deleteImage(url)\"&gt;&lt;img src=\"./assets/cruz.svg\"&gt;&lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>Component</strong></p>\n\n<pre><code>files:any;\n\n   urls = new Array&lt;string&gt;();\n  detectFiles(event) {\n    this.urls = [];\n    this.files = event.target.files;\n    if (this.files.length &lt; 7 ) {\n\n      for (let file of this.files) {\n        let reader = new FileReader();\n        reader.onload = (e: any) =&gt; {\n          this.urls.push(e.target.result);\n        }\n\n        reader.readAsDataURL(file);    \n      }\n    }   \n  }\n</code></pre>\n"}, {"tags": ["css", "reactjs", "typescript", "caching", "webpack"], "comments": [{"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1572445032, "post_id": 58627321, "comment_id": 103562200, "body": "This looks like browser cache problem to me"}, {"owner": {"reputation": 199, "user_id": 4916837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSGzf.jpg?s=128&g=1", "display_name": "ap.dev", "link": "https://stackoverflow.com/users/4916837/ap-dev"}, "edited": false, "score": 0, "creation_date": 1572448516, "post_id": 58627321, "comment_id": 103564398, "body": "Like you said it could be any number of things.   You could try appending a query string to the end of your main css file to trick the browser into repainting/reloading the styles. Or try setting the mini apps display to display:none and display:&lt;your display&gt; to force the browser to repaint.  Another work around could be to override the styles by applying a unique selector to each app.   ie. #mini-app-1 .your-common-class {...},  #mini-app-2 .your-common-class {...}"}], "answers": [{"tags": [], "owner": {"reputation": 4508, "user_id": 707618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/44cadbd9207c17c103b7b583a4f1427e?s=128&d=identicon&r=PG", "display_name": "Smudge202", "link": "https://stackoverflow.com/users/707618/smudge202"}, "is_accepted": true, "score": 1, "last_activity_date": 1572448947, "creation_date": 1572448947, "answer_id": 58628656, "question_id": 58627321, "link": "https://stackoverflow.com/questions/58627321/how-can-i-remove-css-loaded-with-a-script-tag-from-my-website-along-with-the-rem/58628656#58628656", "title": "How can I remove css loaded with a script tag from my website along with the removal of that script tag?", "body": "<p>In your webpack config you're using <a href=\"https://github.com/webpack-contrib/style-loader\" rel=\"nofollow noreferrer\">style loader</a>. By default this is adding the styles as a tag in the dom.</p>\n\n<p>If your main app loads css differently to how your sub apps are loading css, you should just be able to remove the anonymous style tags after unloading the script tag.</p>\n\n<p>Otherwise, the style-loader does allow you to inject attributes into the generated style tags (or indeed load the styles in different ways). That should allow you to locate the sub-app style and strip it from the DOM.</p>\n"}], "owner": {"reputation": 1361, "user_id": 5073189, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/783103cd0c5602484616eb286aa4871b?s=128&d=identicon&r=PG&f=1", "display_name": "James Morrison", "link": "https://stackoverflow.com/users/5073189/james-morrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 58628656, "answer_count": 1, "score": 3, "last_activity_date": 1585149236, "creation_date": 1572444831, "last_edit_date": 1585149236, "question_id": 58627321, "link": "https://stackoverflow.com/questions/58627321/how-can-i-remove-css-loaded-with-a-script-tag-from-my-website-along-with-the-rem", "title": "How can I remove css loaded with a script tag from my website along with the removal of that script tag?", "body": "<p>This is an oddly specific problem that I can't find any information about anywhere.</p>\n\n<p>I have a main React app that dynamically loads other react mini-apps. It does this via a component's <code>componentDidMount()</code> function, adding a script tag to the end of the document body with pure JavaScript, the src address of the tag proxies a request through to a web server to return a single bundled file which is the sub-app to load. When the component is unmounted the script tag is removed from the document's body and div root blanked out.</p>\n\n<p>The mini-app needs to be loadable in a single bundle (no need to get into that here) and I achieve this by building the react app via a modified <code>npm run build</code> function which runs as below;</p>\n\n<pre><code>\"scripts\": {\n    \"build\": \"npm run build:sass &amp;&amp; npm run build:react &amp;&amp; npm run build:bundle\",\n    \"build:react\": \"react-scripts build\",\n    \"build:bundle\": \"webpack --config webpack.config.js\",\n    \"build:sass\": \"node-sass --precision=5 --indent-type=space --output-style=nested --indent-width=2 src/styles/Site.scss src/styles/Site.css\"\n  }\n</code></pre>\n\n<p>The bundle part of this command use the webpack.config.js file below;</p>\n\n<pre><code>const path = require(\"path\")\nconst UglifyJsPlugin = require(\"uglifyjs-webpack-plugin\")\nconst glob = require(\"glob\")\n\nmodule.exports = {\n  entry: {\n    \"bundle.js\": glob.sync(\"build/static/?(js|css)/*.?(js|css)\").map(f =&gt; path.resolve(__dirname, f)),\n  },\n  output: {\n    filename: \"build/bundle.min.js\"\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\"style-loader\", \"css-loader\"],\n      },\n    ],\n  },\n  plugins: [new UglifyJsPlugin()],\n}\n</code></pre>\n\n<p>This in turn produces a single bundle.min.js file with all the scripts, node_modules and css from the mini-app which the main app loads via the component below.</p>\n\n<pre><code>export class MyComponent extends React.PureComponent&lt;Props, object&gt; {\n\n    componentDidMount() {\n        const script = document.createElement(\"script\");\n        script.src = \"myScriptSrc\";\n        script.async = true;\n        script.id = this.AppIdToScriptId();\n        document.body.appendChild(script);\n    }\n\n    componentWillUnmount() {\n        document.getElementById(\"miniAppRoot\").innerHTML = \"\";\n        if (this.props.app) {\n            document.getElementById(this.AppIdToScriptId()).remove();\n        }\n    }\n\n    AppIdToScriptId = () =&gt; \"d\" + this.props.App.Id.replace(\"-\", \"\");\n\n    public render() {\n        return (&lt;div id=\"miniAppRoot\" &gt;&lt;/div&gt;);\n    }\n}\n\nexport default MyComponent;\n</code></pre>\n\n<p>This all works great, the only issue I'm having here is the css loaded via the react mini-app bundled script persists even after I've removed the script tag and blanked the html root. Does anyone have any idea of why this is happening? I'm not sure if the webpack config is to blame, client-side caching or any other number of possibilities, any ideas of how to fix this?</p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1572445286, "post_id": 58627089, "comment_id": 103562365, "body": "Your error message says &quot;(see above)&quot;.  What&#39;s above?  Did you run <code>npm run build</code> as it suggested?"}, {"owner": {"reputation": 5631, "user_id": 10064334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cl7s7.png?s=128&g=1", "display_name": "SebastianG", "link": "https://stackoverflow.com/users/10064334/sebastiang"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1572446298, "post_id": 58627089, "comment_id": 103563006, "body": "@DougStevenson hi Doug, above is simply a stack trace for the error in the title: <code>!  Error: Cannot find module &#39;reports-function\\server&#39;</code>"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1572446987, "post_id": 58627089, "comment_id": 103563460, "body": "Why do you think that module isn&#39;t loading? There really isn&#39;t enough information here for us to know the reason."}], "answers": [{"comments": [{"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 1, "creation_date": 1575202906, "post_id": 58633862, "comment_id": 104479430, "body": "in my case i had to update output path- &quot;main&quot;: &quot;lib/src/index.js&quot;, in package.json"}], "tags": [], "owner": {"reputation": 5631, "user_id": 10064334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cl7s7.png?s=128&g=1", "display_name": "SebastianG", "link": "https://stackoverflow.com/users/10064334/sebastiang"}, "is_accepted": false, "score": 3, "last_activity_date": 1572470781, "creation_date": 1572470781, "answer_id": 58633862, "question_id": 58627089, "link": "https://stackoverflow.com/questions/58627089/firebase-function-error-cannot-find-module-when-serving-locally-out-of-the-blu/58633862#58633862", "title": "firebase function Error: Cannot find module when serving locally, out of the blue on previously working project", "body": "<p>Found the issue in my tsconfig.json</p>\n\n<p>Firebase will look in the package.json's main property to find your function code, in my case I had: </p>\n\n<pre><code>  \"main\": \"dist/index.js\",\n</code></pre>\n\n<p>but index.js is outside the SRC folder and to get vscode to shut up about the tsconfig file I added that 'includes' property there that broke things.</p>\n\n<p>Removing the includes/excludes from there works perfectly.</p>\n\n<p>This mistake was easily identifiable from my screenshot and tsconfig that I had in my first post.</p>\n"}, {"comments": [{"owner": {"reputation": 5631, "user_id": 10064334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cl7s7.png?s=128&g=1", "display_name": "SebastianG", "link": "https://stackoverflow.com/users/10064334/sebastiang"}, "edited": false, "score": 1, "creation_date": 1593020332, "post_id": 62560776, "comment_id": 110636109, "body": "it seems like a problem with multiple possible culprits, i&#39;m hoping anyone stumbling across the question will be able to get some insight into where their potential problem lies -- have marked this as the solution as its weird marking your own answer as the solution"}, {"owner": {"reputation": 13909, "user_id": 1857292, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/50eda10b9e16333f9e9cd3b8f1e0918a?s=128&d=identicon&r=PG", "display_name": "Jimmy Kane", "link": "https://stackoverflow.com/users/1857292/jimmy-kane"}, "reply_to_user": {"reputation": 5631, "user_id": 10064334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cl7s7.png?s=128&g=1", "display_name": "SebastianG", "link": "https://stackoverflow.com/users/10064334/sebastiang"}, "edited": false, "score": 1, "creation_date": 1593020788, "post_id": 62560776, "comment_id": 110636320, "body": "@SebastianG nah it aint weird bro. Do as you like. for me it&#39;s multiple.   Let the users perhaps decide eventually. For now yours or mine, it&#39;s all good bro."}], "tags": [], "owner": {"reputation": 13909, "user_id": 1857292, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/50eda10b9e16333f9e9cd3b8f1e0918a?s=128&d=identicon&r=PG", "display_name": "Jimmy Kane", "link": "https://stackoverflow.com/users/1857292/jimmy-kane"}, "is_accepted": true, "score": 2, "last_activity_date": 1593019719, "creation_date": 1593019719, "answer_id": 62560776, "question_id": 58627089, "link": "https://stackoverflow.com/questions/58627089/firebase-function-error-cannot-find-module-when-serving-locally-out-of-the-blu/62560776#62560776", "title": "firebase function Error: Cannot find module when serving locally, out of the blue on previously working project", "body": "<p>In my case I had by accident imported an uncompiled Typescript file from the parent project of the functions.</p>\n<p>Typically that was a lib that should have been a package dependency.</p>\n"}, {"tags": [], "owner": {"reputation": 1481, "user_id": 3799856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QmOiT.jpg?s=128&g=1", "display_name": "SeizeTheDay", "link": "https://stackoverflow.com/users/3799856/seizetheday"}, "is_accepted": false, "score": 0, "last_activity_date": 1600560582, "last_edit_date": 1600560582, "creation_date": 1600560246, "answer_id": 63974401, "question_id": 58627089, "link": "https://stackoverflow.com/questions/58627089/firebase-function-error-cannot-find-module-when-serving-locally-out-of-the-blu/63974401#63974401", "title": "firebase function Error: Cannot find module when serving locally, out of the blue on previously working project", "body": "<p>In my case, I needed to install <code>tslib</code> in the functions directory before they would deploy.</p>\n<p>I'll be honest, I <em>don't</em> know why. In one of my projects I didn't see this issue at all. In both that project and this one, the compiled code references <code>tslib</code> all over the place.</p>\n<p>This solution worked for me with <code>tslib@2.0.1</code>. I'm low-key worried that a new version of TypeScript might break things unexpectedly, but for now, this seems to work under <code>typescript@4.0.2</code>.</p>\n<p>For context, firebase-tools kept giving me errors like this one:</p>\n<pre><code>Function failed on loading user code. Error message: Error: please examine your function logs to see the error cause: https://cloud.google.com/functions/docs/monitoring/logging#viewing_logs\n</code></pre>\n<p>In the cloud terminal, I found this message:</p>\n<pre><code>Provided module can't be loaded.\nDid you list all required modules in the package.json dependencies?\nDetailed stack trace: Error: Cannot find module 'tslib'\n</code></pre>\n"}], "owner": {"reputation": 5631, "user_id": 10064334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cl7s7.png?s=128&g=1", "display_name": "SebastianG", "link": "https://stackoverflow.com/users/10064334/sebastiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 62560776, "answer_count": 3, "score": 4, "last_activity_date": 1600560582, "creation_date": 1572444049, "question_id": 58627089, "link": "https://stackoverflow.com/questions/58627089/firebase-function-error-cannot-find-module-when-serving-locally-out-of-the-blu", "title": "firebase function Error: Cannot find module when serving locally, out of the blue on previously working project", "body": "<p>I haven't touched any firebase related files and I can't seem to figure out why exactly this has just started occuring, but I keep getting:</p>\n\n<pre><code>We were unable to load your functions code. (see above)\n   - It appears your code is written in Typescript, which must be compiled before emulation.\n   - You may be able to run \"npm run build\" in your functions directory to resolve this.\n</code></pre>\n\n<p>my firebase config file:</p>\n\n<pre><code>{\n    \"functions\": {\n        \"predeploy\": \"npm --prefix \\\"$RESOURCE_DIR\\\" run build\",\n        \"source\": \"server\"\n    }\n}\n\n</code></pre>\n\n<p>and my folder structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/564N1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/564N1.png\" alt=\"enter image description here\"></a></p>\n\n<p>My tsconfig:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"declaration\": true,\n    \"removeComments\": true,\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"target\": \"es6\",\n    \"sourceMap\": true,\n    \"outDir\": \"./dist\"\n  },\n  \"exclude\": [\"node_modules\", \"test\", \"**/*spec.ts\"],\n  \"include\": [\"src/**/*\", \"src\"]\n}\n\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "webpack", "angular8"], "comments": [{"owner": {"reputation": 42804, "user_id": 2181397, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/616931b5c5ba8790a191fa6aea465c65?s=128&d=identicon&r=PG", "display_name": "brk", "link": "https://stackoverflow.com/users/2181397/brk"}, "edited": false, "score": 1, "creation_date": 1572444158, "post_id": 58627070, "comment_id": 103561692, "body": "show the full file"}, {"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 0, "creation_date": 1572496594, "post_id": 58627070, "comment_id": 103580436, "body": "Show your webpack config file"}, {"owner": {"reputation": 188, "user_id": 3982102, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004912148808/picture?type=large", "display_name": "Shaul Naim", "link": "https://stackoverflow.com/users/3982102/shaul-naim"}, "edited": false, "score": 0, "creation_date": 1572502382, "post_id": 58627070, "comment_id": 103581717, "body": "added webpack.config"}, {"owner": {"reputation": 1210, "user_id": 1071439, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7bd9c238a038fe01c2a965db60e2b607?s=128&d=identicon&r=PG", "display_name": "bokkie", "link": "https://stackoverflow.com/users/1071439/bokkie"}, "edited": false, "score": 0, "creation_date": 1581519953, "post_id": 58627070, "comment_id": 106462900, "body": "did you solve it?"}], "owner": {"reputation": 188, "user_id": 3982102, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004912148808/picture?type=large", "display_name": "Shaul Naim", "link": "https://stackoverflow.com/users/3982102/shaul-naim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572502355, "creation_date": 1572443985, "last_edit_date": 1572502355, "question_id": 58627070, "link": "https://stackoverflow.com/questions/58627070/lazy-loading-not-working-in-angular-8-and-webpack", "title": "lazy loading not working in angular 8 and webpack", "body": "<p>i upgraded to angular 8 and tried using\ni add a new lazyLoad route like this:</p>\n\n<pre><code>{ path: 'error', loadChildren:  () =&gt; import('./modules/errors/errors.module').then(m =&gt; m.ErrorsModule) }\n</code></pre>\n\n<p>and unfortunately getting an error like this </p>\n\n<blockquote>\n  <p>ERROR in ./src/app/app.routes.ts 154:41 Module parse failed:\n  Unexpected token (154:41) You may need an appropriate loader to handle\n  this file type. |         canActivate: [RouteGuardService] |     },</p>\n  \n  <blockquote>\n<pre><code>{ path: 'error', loadChildren: () =&gt; import('./modules/errors/errors.module').then(m =&gt; m.ErrorsModule) },\n</code></pre>\n    \n    <p>|     { path: '**', redirectTo: 'error/404', pathMatch: 'full' } | ]; \n    @ ./src/app/app.module.ts 89:0-48 161:12-28  @ ./src/singleSpaEntry.ts\n    @ multi (webpack)-dev-server/client?<a href=\"http://0.0.0.0:9001\" rel=\"nofollow noreferrer\">http://0.0.0.0:9001</a>\n    src/singleSpaEntry.ts i \uff62wdm\uff63: Failed to compile.</p>\n  </blockquote>\n</blockquote>\n\n<p>which loader should I add to webpack (ejected from CLI)</p>\n\n<p>webpack.config file ( the app is part of singlespa (microfrontend))</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const path = require('path');\r\nconst ContextReplacementPlugin = require('webpack/lib/ContextReplacementPlugin');\r\n\r\nlet webpackLoader;\r\nlet AngularCompilerPluginAttempt;\r\ntry {\r\n  AngularCompilerPluginAttempt = require('@ngtools/webpack');\r\n  AngularCompilerPluginAttempt = AngularCompilerPluginAttempt.AngularCompilerPlugin;\r\n  webpackLoader = '@ngtools/webpack';\r\n} catch (e) {\r\n}\r\n\r\nif (!webpackLoader) {\r\n  webpackLoader = '@angular-devkit/build-angular/node_modules/@ngtools/webpack';\r\n}\r\nconst AngularCompilerPlugin = AngularCompilerPluginAttempt ? AngularCompilerPluginAttempt : require('@angular-devkit/build-angular/node_modules/@ngtools/webpack').AngularCompilerPlugin;\r\nconst BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\r\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\r\n\r\n\r\nmodule.exports = function (env) {\r\n  const analyzeBundle = !!(env &amp;&amp; env.analyzeBundle);\r\n  const prodMode = !!(env &amp;&amp; env.production);\r\n\r\n\r\n  const plugins = [\r\n    new ContextReplacementPlugin(\r\n      /(.+)?angular(\\\\|\\/)core(.+)?/,\r\n      path.resolve(__dirname, '../src')\r\n    ),\r\n    new AngularCompilerPlugin({\r\n      mainPath: path.resolve(__dirname, 'src/singleSpaEntry.ts'),\r\n      tsConfigPath: path.resolve(__dirname, 'tsconfig.json'),\r\n      sourceMap: !prodMode,\r\n      skipCodeGeneration: !prodMode,\r\n      platform: 0,\r\n      hostReplacementPaths: {\r\n        \"environments/environment.ts\": prodMode ? \"environments/environment.prod.ts\" : \"environments/environment.ts\"\r\n      }\r\n    }),\r\n    new CopyWebpackPlugin([\r\n      {from: 'src/assets', to: 'assets'},\r\n      {from: 'src/mustUseAppFramework.html', to: 'index.html'}])\r\n  ];\r\n\r\n  if (analyzeBundle) {\r\n    plugins.push(new BundleAnalyzerPlugin());\r\n  }\r\n\r\n  const devTypescriptLoader = [\r\n    {\r\n      test: /\\.ts$/,\r\n      loader: webpackLoader\r\n    }\r\n  ];\r\n\r\n  const prodTypescriptLoader = [\r\n    {\r\n      \"test\": /\\.js$/,\r\n      \"use\": [\r\n        {\r\n          \"loader\": \"@angular-devkit/build-optimizer/webpack-loader\",\r\n          \"options\": {\r\n            \"sourceMap\": false\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      test: /(?:\\.ngfactory\\.js|\\.ngstyle\\.js|\\.ts)$/,\r\n      use: [\r\n        {\r\n          \"loader\": \"@angular-devkit/build-optimizer/webpack-loader\",\r\n          \"options\": {\r\n            \"sourceMap\": false\r\n          }\r\n        },\r\n        webpackLoader\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const typescriptLoader = prodMode ? prodTypescriptLoader : devTypescriptLoader;\r\n\r\n  return {\r\n    entry: {\r\n      singleSpaEntry: 'src/singleSpaEntry.ts',\r\n    },\r\n    output: {\r\n      filename: '[name].js',\r\n      path: path.resolve(__dirname, 'release'),\r\n      libraryTarget: 'umd',\r\n      library: 'segmentation-root'\r\n    },\r\n    module: {\r\n      rules: [\r\n        {\r\n          test: /\\.polyfill\\/\\.js$/,\r\n          use: [ 'script-loader' ]\r\n        },\r\n        {\r\n          test: /\\.html$/,\r\n          loader: [\"raw-loader\", {\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /assets/g,\r\n              replace: '\\/seg\\/assets',\r\n              file: false\r\n            }\r\n          },{\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /\\/assets/g,\r\n              replace: 'assets',\r\n              file: false\r\n            }\r\n          }]\r\n        },\r\n        {\r\n          test: /\\.(jpe?g|png|webp|gif|otf|ttf|woff2?|ani)$/,\r\n          loader: \"url-loader\",\r\n          options: {\r\n            name: \"[name].[hash:20].[ext]\",\r\n            limit: 10000,\r\n            publicPath: '/seg/'\r\n          }\r\n        },\r\n        {\r\n          test: /\\.(eot|svg|cur)$/,\r\n          loader: \"file-loader\",\r\n          options: {\r\n            name: \"[name].[hash:20].[ext]\",\r\n            publicPath: '/seg/'\r\n          }\r\n        },\r\n        {\r\n          test: /bootstrap\\.scss$/,\r\n          exclude: [\r\n            path.resolve(__dirname, \"src/styles.scss\")\r\n          ],\r\n          use: [{\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /assets/g,\r\n              replace: '\\/seg\\/assets',\r\n              file: false\r\n            }\r\n          },{\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /\\/assets/g,\r\n              replace: 'assets',\r\n              file: false\r\n            }\r\n          }, 'to-string-loader', 'style-loader', 'css-loader', 'sass-loader'],\r\n        },\r\n        {\r\n          test: /styles\\.scss$/,\r\n          exclude: [\r\n            path.resolve(__dirname, \"node_modules/bootstrap\")\r\n          ],\r\n          use: [{\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /assets/g,\r\n              replace: '\\/seg\\/assets',\r\n              file: false\r\n            }\r\n          },{\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /\\/assets/g,\r\n              replace: 'assets',\r\n              file: false\r\n            }\r\n          }, 'to-string-loader', 'style-loader', 'css-loader', 'sass-loader']\r\n        },\r\n        {\r\n          test: /\\.scss$/,\r\n          exclude: [\r\n            path.resolve(__dirname, \"node_modules/bootstrap\"),\r\n            path.resolve(__dirname, \"src/styles.scss\")\r\n          ],\r\n          use: ['to-string-loader', {\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /assets/g,\r\n              replace: '\\/seg\\/assets',\r\n              file: false\r\n            }\r\n          },{\r\n            loader: 'replace-string-loader',\r\n            options: {\r\n              search: /\\/assets/g,\r\n              replace: 'assets',\r\n              file: false\r\n            }\r\n          }, 'raw-loader', 'sass-loader']\r\n        },\r\n        {\r\n          test: /\\.css$/,\r\n          exclude: [\r\n            path.resolve(__dirname, \"node_modules/bootstrap\"),\r\n            path.resolve(__dirname, \"src/styles.scss\")\r\n          ],\r\n          use: ['to-string-loader', 'style-loader', 'css-loader']\r\n        }\r\n      ].concat(typescriptLoader)\r\n    },\r\n    resolve: {\r\n      extensions: [\".ts\", \".js\"],\r\n      modules: [\r\n        __dirname,\r\n        'node_modules'\r\n      ]\r\n    },\r\n    devtool: prodMode ? 'none' : 'inline-sourcemap',\r\n    externals: [],\r\n    plugins: plugins,\r\n    devServer: {\r\n      historyApiFallback: true,\r\n      watchOptions: {aggregateTimeout: 300, poll: 1000},\r\n      headers: {\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, PATCH, OPTIONS\",\r\n        \"Access-Control-Allow-Headers\": \"X-Requested-With, content-type, Authorization\"\r\n      }\r\n    }\r\n  }\r\n};</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["json", "typescript", "webpack"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12251171"}, "edited": false, "score": 0, "creation_date": 1572443666, "post_id": 58626719, "comment_id": 103561375, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43121661/typescript-type-inference-issue-with-string-literal\">TypeScript type inference issue with string literal</a>"}, {"owner": {"reputation": 720, "user_id": 1542994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/53EyS.png?s=128&g=1", "display_name": "vpoulain", "link": "https://stackoverflow.com/users/1542994/vpoulain"}, "edited": false, "score": 0, "creation_date": 1572444459, "post_id": 58626719, "comment_id": 103561868, "body": "I am trying to load JSON, it&#39;s quite different"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12251171"}, "edited": false, "score": 0, "creation_date": 1572445033, "post_id": 58626719, "comment_id": 103562201, "body": "TypeScript is inferring your JSON property <code>foo</code> is a string, while your type <code>Bar</code> is a string literal. It&#39;s the same problem but just different ways of getting it."}, {"owner": {"reputation": 15749, "user_id": 4420812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yQ4D.jpg?s=128&g=1", "display_name": "Maciej Sikora", "link": "https://stackoverflow.com/users/4420812/maciej-sikora"}, "edited": false, "score": 0, "creation_date": 1572445298, "post_id": 58626719, "comment_id": 103562375, "body": "You need first of all do JSON.parse, and second you need to do as Foo."}, {"owner": {"reputation": 720, "user_id": 1542994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/53EyS.png?s=128&g=1", "display_name": "vpoulain", "link": "https://stackoverflow.com/users/1542994/vpoulain"}, "edited": false, "score": 0, "creation_date": 1572450997, "post_id": 58626719, "comment_id": 103565820, "body": "@Bauke The solution suggests to cast the &quot;center&quot; object as &#39;as &quot;center&quot;&#39; while I do not see how I could cast it. Are suggesting that I could use a temporary object"}], "owner": {"reputation": 720, "user_id": 1542994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/53EyS.png?s=128&g=1", "display_name": "vpoulain", "link": "https://stackoverflow.com/users/1542994/vpoulain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1572445336, "creation_date": 1572442886, "question_id": 58626719, "link": "https://stackoverflow.com/questions/58626719/typescript-union-type-string-is-not-loaded-from-json", "title": "Typescript union type string is not loaded from JSON", "body": "<p>I have json file <code>test.json</code></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>{ \"foo\": \"bar0\" }\n</code></pre>\n\n<p>Given those types declaration</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\ntype Bar = 'bar0' | 'bar1'\n\ninterface Foo {\n    foo: Bar\n}\n</code></pre>\n\n<p>I tried to load this json</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import test from './test.json'\n\nconst foo: Foo = test\n</code></pre>\n\n<p>And I got this error </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>Type '{ \"foo\": string; }' is not assignable to type 'Foo'.\n  Types of property 'foo' are incompatible.\n    Type 'string' is not assignable to type 'Bar'.\n</code></pre>\n\n<p>I also tried with enum</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>enum Bar {\n    bar0 = 'bar0',\n    bar1 =  'bar1'\n}\n</code></pre>\n\n<p>Of course it works with <code>type Bar = string</code></p>\n\n<p>Any idea about what can be wrong?</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 1, "creation_date": 1572444257, "post_id": 58627031, "comment_id": 103561740, "body": "The ternary condition did the part. Thank You!"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572446224, "post_id": 58627031, "comment_id": 103562975, "body": "You could create a directive that accepted nested arrays an objects, but it probably wouldn&#39;t be a great idea."}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572491602, "post_id": 58627031, "comment_id": 103579437, "body": "@AluanHaddad - That&#39;s not going to add any value so that would just be tedious and superfluous."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572520353, "post_id": 58627031, "comment_id": 103589567, "body": "I was just making the point that it&#39;s not an inherent limitation. I agree that it&#39;s ill-advised."}], "tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": true, "score": 1, "last_activity_date": 1572443887, "creation_date": 1572443887, "answer_id": 58627031, "question_id": 58626668, "link": "https://stackoverflow.com/questions/58626668/ngclass-mixed-condition/58627031#58627031", "title": "ngClass mixed condition", "body": "<p>You can't use both arrays and objects in <code>ngClass</code> at the same time (See <a href=\"https://github.com/angular/angular/issues/20232\" rel=\"nofollow noreferrer\">here</a>). Instead, you can just use a combination of <code>class</code> and <code>ngClass</code> or use a ternary condition.</p>\n\n<p>Using <code>class</code> and <code>ngClass</code>.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;button [class]=\"'btn-' + buttonStyle + ' btn-' + buttonSize\" [ngClass]=\"{'btn-rounded': isRounded}\"&gt;Test&lt;/button&gt;\n</code></pre>\n\n<p>Using ternary condition in <code>ngClass</code>.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;button [ngClass]=\"['btn-' + buttonStyle, 'btn-' + buttonSize, isRounded ? 'btn-rounded' : '']\"&gt;Test&lt;/button&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 12297670, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCBoi59y5kQrlXAMnRlnl8kS_jfFAahGXclxx3Y=k-s128", "display_name": "Steve", "link": "https://stackoverflow.com/users/12297670/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1572444459, "creation_date": 1572444459, "answer_id": 58627203, "question_id": 58626668, "link": "https://stackoverflow.com/questions/58626668/ngclass-mixed-condition/58627203#58627203", "title": "ngClass mixed condition", "body": "<p>You can do something like that</p>\n\n<pre class=\"lang-js prettyprint-override\"><code> this.btnClassList = {\n      [`btn-${this.buttonStyle}`]: true,\n      [`btn-${this.buttonSize}`]: true,\n      [`btn-rounded`]: this.isRounded,\n}\n</code></pre>\n\n<p>and in template </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;a [ngClass]=\"btnClassList\"&gt;okay&lt;/a&gt;\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-vrg37c\" rel=\"nofollow noreferrer\">stack blitz example</a></p>\n"}], "owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58627031, "answer_count": 2, "score": 1, "last_activity_date": 1572444459, "creation_date": 1572442720, "question_id": 58626668, "link": "https://stackoverflow.com/questions/58626668/ngclass-mixed-condition", "title": "ngClass mixed condition", "body": "<p>I want to implement the following - I want two pre-set classes, which are completed by some component variables I have set, which is working fine, but I need to add another <a href=\"https://angular.io/api/common/NgClass\" rel=\"nofollow noreferrer\">conditional class</a>.</p>\n\n<p>This is what I have, first part is working, the object part is not:</p>\n\n<p><code>[ngClass]=\"['btn-' + buttonStyle, 'btn-' + buttonSize, {'btn-rounded': isRounded}]\"</code></p>\n\n<p>Where <strong><em><code>isRounded</code></em></strong> is a component <code>@Input()</code>.</p>\n\n<p><code>@Input() isRounded: boolean = false;</code></p>\n\n<p>End result that I am aiming for:</p>\n\n<p><code>&lt;a class=\"btn btn-success btn-md btn-rounded\"&gt;okay&lt;/a&gt;</code></p>\n"}, {"tags": ["javascript", "angular", "typescript", "momentjs", "moment-timezone"], "answers": [{"tags": [], "owner": {"reputation": 37752, "user_id": 2225281, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/71156aec1325d8a1a20751655ef9be44?s=128&d=identicon&r=PG", "display_name": "Aaron Beall", "link": "https://stackoverflow.com/users/2225281/aaron-beall"}, "is_accepted": true, "score": 1, "last_activity_date": 1572443249, "last_edit_date": 1592644375, "creation_date": 1572443249, "answer_id": 58626829, "question_id": 58626591, "link": "https://stackoverflow.com/questions/58626591/is-there-any-built-in-function-in-moment-moment-timezone-to-convert-from-a-timez/58626829#58626829", "title": "Is there any built-in function in moment/moment-timezone to convert from a timezone name to a &quot;human readable format&quot;?", "body": "<p>This is addressed in <a href=\"https://momentjs.com/timezone/docs/#/using-timezones/formatting/\" rel=\"nofollow noreferrer\">the docs on formatting</a>:</p>\n<blockquote>\n<p>Moment.js also provides a hook for the long form time zone name. Because these strings are generally localized, Moment Timezone does not provide any long names for zones.</p>\n<p>To provide long form names, you can override <code>moment.fn.zoneName</code> and use the <code>zz</code> token.</p>\n</blockquote>\n<pre><code>var abbrs = {\n    EST : 'Eastern Standard Time',\n    EDT : 'Eastern Daylight Time',\n    CST : 'Central Standard Time',\n    CDT : 'Central Daylight Time',\n    MST : 'Mountain Standard Time',\n    MDT : 'Mountain Daylight Time',\n    PST : 'Pacific Standard Time',\n    PDT : 'Pacific Daylight Time',\n};\n\nmoment.fn.zoneName = function () {\n    var abbr = this.zoneAbbr();\n    return abbrs[abbr] || abbr;\n};\n\nmoment.tz([2012, 0], 'America/New_York').format('zz');    // Eastern Standard Time\nmoment.tz([2012, 5], 'America/New_York').format('zz');    // Eastern Daylight Time\nmoment.tz([2012, 0], 'America/Los_Angeles').format('zz'); // Pacific Standard Time\nmoment.tz([2012, 5], 'America/Los_Angeles').format('zz'); // Pacific Daylight Time\n</code></pre>\n"}], "owner": {"reputation": 12486, "user_id": 5640649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab190da855988ffae29d287c7d55ebbe?s=128&d=identicon&r=PG", "display_name": "lealceldeiro", "link": "https://stackoverflow.com/users/5640649/lealceldeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 58626829, "answer_count": 1, "score": 0, "last_activity_date": 1577914646, "creation_date": 1572442507, "last_edit_date": 1577914646, "question_id": 58626591, "link": "https://stackoverflow.com/questions/58626591/is-there-any-built-in-function-in-moment-moment-timezone-to-convert-from-a-timez", "title": "Is there any built-in function in moment/moment-timezone to convert from a timezone name to a &quot;human readable format&quot;?", "body": "<p>Take as an example the following <a href=\"https://stackblitz.com/edit/typescript-moment-moment-timezone-convert-to-human-readable?embed=1&amp;file=index.ts\" rel=\"nofollow noreferrer\"><strong>minimal reproducible example</strong></a> of a project I'm working on where I receive a timezone name and I need to convert it to a \"human-readable format\".</p>\n\n<p>i.e.:</p>\n\n<ul>\n<li>input: <code>America/Los_Angeles</code></li>\n<li>output: <code>America Los Angeles</code></li>\n</ul>\n\n<p>I now, you may consider \"America/Los_Angeles\" is already \"human-readable\" and I agree, but it's a requirement of my issue to convert it to the mentioned format (or similar, without including slashes, underscores, etc).</p>\n\n<p>Also, this could be achieved easily using a regular expression, but as <a href=\"https://momentjs.com/\" rel=\"nofollow noreferrer\">moment</a> and <a href=\"https://momentjs.com/timezone/\" rel=\"nofollow noreferrer\">moment timezone</a> are being used as part of the project... I wonder, is there a way to do achieve this using any built-in mechanism provided by any of these libraries?</p>\n\n<hr>\n\n<pre><code>import 'moment-timezone';\nimport * as moment from 'moment';\n\nconst tz = moment.tz.zone(\"America/Los_Angeles\");\n\nconst result = tz.name;\n\nconsole.log(result);  // America/Los_Angeles, need \"America Los Angeles\"\n</code></pre>\n\n<p>If it is of any help, this is in an Angular project.</p>\n"}, {"tags": ["reactjs", "typescript", "material-ui", "react-proptypes", "union-types"], "comments": [{"owner": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "edited": false, "score": 0, "creation_date": 1582734504, "post_id": 58626371, "comment_id": 106881967, "body": "Is <code>Breakpoint</code> an enum? Would you mind inlining its definition?"}, {"owner": {"reputation": 162, "user_id": 4655177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/859072680825859/picture?type=large", "display_name": "Xiduzo", "link": "https://stackoverflow.com/users/4655177/xiduzo"}, "reply_to_user": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "edited": false, "score": 0, "creation_date": 1584442961, "post_id": 58626371, "comment_id": 107431956, "body": "<code>export type Breakpoint = &#39;xs&#39; | &#39;sm&#39; | &#39;md&#39; | &#39;lg&#39; | &#39;xl&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 14263, "user_id": 10325032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UwH88.jpg?s=128&g=1", "display_name": "Karol Majewski", "link": "https://stackoverflow.com/users/10325032/karol-majewski"}, "is_accepted": true, "score": 1, "last_activity_date": 1584455051, "creation_date": 1584455051, "answer_id": 60724319, "question_id": 58626371, "link": "https://stackoverflow.com/questions/58626371/react-proptypes-union-type-breakpoint-gives-error/60724319#60724319", "title": "React Proptypes union type Breakpoint gives error", "body": "<p><strong>Problem</strong></p>\n\n<p>When you do this:</p>\n\n<pre><code>App.propTypes = {\n  width: PropTypes.oneOf(['xs', 'sm', 'md', 'lg', 'xl']).isRequired,\n}\n</code></pre>\n\n<p>TypeScript will treat <code>['xs', 'sm', 'md', 'lg', 'xl']</code> as an array of random strings, not the specific strings you are interested in.</p>\n\n<p><strong>Solution (TypeScript 3.4+)</strong></p>\n\n<p>To narrow their types down to the specific values defined by <code>Breakpoint</code>, use a <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#const-assertions\" rel=\"nofollow noreferrer\">const assertion</a>.</p>\n\n<pre><code>App.propTypes = {\n  width: PropTypes.oneOf(['xs', 'sm', 'md', 'lg', 'xl'] as const).isRequired,\n}\n</code></pre>\n\n<p><strong>Solution (TypeScript &lt;3.4)</strong></p>\n\n<p>If you're running a version of TypeScript older than 3.4, you can achieve the same result by creating an array of well-known string literals before you define your <code>propTypes</code>.</p>\n\n<pre><code>const breakpoints: Breakpoint[] = ['xs', 'sm', 'md', 'lg', 'xl'];\n\nApp.propTypes = {\n  width: PropTypes.oneOf(breakpoints).isRequired,\n}\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 4655177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/859072680825859/picture?type=large", "display_name": "Xiduzo", "link": "https://stackoverflow.com/users/4655177/xiduzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 60724319, "answer_count": 1, "score": 1, "last_activity_date": 1584455051, "creation_date": 1572441791, "question_id": 58626371, "link": "https://stackoverflow.com/questions/58626371/react-proptypes-union-type-breakpoint-gives-error", "title": "React Proptypes union type Breakpoint gives error", "body": "<p>I am having trouble giving the right proptype to the material-ui <code>Breakpoint</code> type.</p>\n\n<p>The breakpoint is as follows: <code>export type Breakpoint = 'xs' | 'sm' | 'md' | 'lg' | 'xl';</code></p>\n\n<p>In my App.tsx if have the following code:</p>\n\n<pre><code>import React, { FC } from 'react'\nimport PropTypes from 'prop-types'\nimport { Breakpoint } from '@material-ui/core/styles/createBreakpoints'\nimport withWidth from '@material-ui/core/withWidth'\n\ninterface IApp {\n  width: Breakpoint\n}\n\nconst App: FC&lt;IApp&gt; = ({ width }) =&gt; {\n    // Code here\n}\n\nApp.propTypes = {\n  width: PropTypes.oneOf(['xs', 'sm', 'md', 'lg', 'xl']).isRequired,\n}\n\nexport default withWidth()(App)\n</code></pre>\n\n<p>Which is giving me the following error:</p>\n\n<pre><code>Type '{ width: Validator&lt;string&gt;; }' is not assignable to type 'WeakValidationMap&lt;IApp&gt;'.\n  Types of property 'width' are incompatible.\n    Type 'Validator&lt;string&gt;' is not assignable to type 'Validator&lt;Breakpoint&gt;'.\n      Type 'string' is not assignable to type 'Breakpoint'.ts(2322)\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1572440204, "post_id": 58625851, "comment_id": 103559331, "body": "Why would it matter? Are you worried about size of the produced javascript file or code cleanup or something else? Also if it is just one component why not clean it up manually?"}, {"owner": {"reputation": 7547, "user_id": 3429323, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fc5012a49b4671fdf8c473ee90190fc0?s=128&d=identicon&r=PG", "display_name": "Elias Soares", "link": "https://stackoverflow.com/users/3429323/elias-soares"}, "edited": false, "score": 1, "creation_date": 1572440365, "post_id": 58625851, "comment_id": 103559431, "body": "Try using <code>ng lint</code>. It will point many syntax errors and anti-patterns. Also will point unused variables, imports and property. <code>ng lint --fix</code> should fix many of it, but not unused variables/property"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1572440426, "post_id": 58625851, "comment_id": 103559455, "body": "WebStorm will show unused properties for a component both by functions, methods or Angular templates."}], "answers": [{"comments": [{"owner": {"reputation": 4666, "user_id": 3264998, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/As8MR.png?s=128&g=1", "display_name": "Gerald Hughes", "link": "https://stackoverflow.com/users/3264998/gerald-hughes"}, "edited": false, "score": 1, "creation_date": 1572440344, "post_id": 58625923, "comment_id": 103559416, "body": "This runs over all project? Does it consider a Angular project, where you can use a declared property just in the html template?"}, {"owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "reply_to_user": {"reputation": 4666, "user_id": 3264998, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/As8MR.png?s=128&g=1", "display_name": "Gerald Hughes", "link": "https://stackoverflow.com/users/3264998/gerald-hughes"}, "edited": false, "score": 0, "creation_date": 1572440399, "post_id": 58625923, "comment_id": 103559447, "body": "it works over all project. whatever variables unused will show up"}, {"owner": {"reputation": 4666, "user_id": 3264998, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/As8MR.png?s=128&g=1", "display_name": "Gerald Hughes", "link": "https://stackoverflow.com/users/3264998/gerald-hughes"}, "edited": false, "score": 0, "creation_date": 1572441439, "post_id": 58625923, "comment_id": 103560078, "body": "This seems to organize imports only"}], "tags": [], "owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "is_accepted": true, "score": 0, "last_activity_date": 1572440257, "creation_date": 1572440257, "answer_id": 58625923, "question_id": 58625851, "link": "https://stackoverflow.com/questions/58625851/is-there-a-way-to-automatically-remove-all-unused-properties-in-a-angular-projec/58625923#58625923", "title": "Is there a way to automatically remove all unused properties in a Angular project?", "body": "<p>If you are using VS Code</p>\n\n<p><code>Shift+Alt+O</code> will take care of you.</p>\n"}, {"comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1572440830, "post_id": 58626018, "comment_id": 103559680, "body": "Properties aren&#39;t imports."}], "tags": [], "owner": {"reputation": 9, "user_id": 6076031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300421829651150e6be1b729ffeb01ef?s=128&d=identicon&r=PG&f=1", "display_name": "Metinerk", "link": "https://stackoverflow.com/users/6076031/metinerk"}, "is_accepted": false, "score": -1, "last_activity_date": 1572445720, "last_edit_date": 1572445720, "creation_date": 1572440587, "answer_id": 58626018, "question_id": 58625851, "link": "https://stackoverflow.com/questions/58625851/is-there-a-way-to-automatically-remove-all-unused-properties-in-a-angular-projec/58626018#58626018", "title": "Is there a way to automatically remove all unused properties in a Angular project?", "body": "<p><kbd>Control</kbd>+<kbd>Option</kbd>+<kbd>O</kbd> optimises imports in webstorm.</p>\n"}], "owner": {"reputation": 4666, "user_id": 3264998, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/As8MR.png?s=128&g=1", "display_name": "Gerald Hughes", "link": "https://stackoverflow.com/users/3264998/gerald-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "accepted_answer_id": 58625923, "answer_count": 2, "score": 0, "last_activity_date": 1572445720, "creation_date": 1572440096, "question_id": 58625851, "link": "https://stackoverflow.com/questions/58625851/is-there-a-way-to-automatically-remove-all-unused-properties-in-a-angular-projec", "title": "Is there a way to automatically remove all unused properties in a Angular project?", "body": "<p>I have a large Angular project, and I believe there are a lot of unused properties declared in .component.ts.</p>\n\n<p>Is there a way to automatically remove all unused properties in a Angular project that also considers if the property is used in the template.component.html ?</p>\n"}, {"tags": ["typescript", "ionic-framework", "stenciljs", "capacitor"], "answers": [{"tags": [], "owner": {"reputation": 7002, "user_id": 513570, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8a17b4d28084ddc12905d1a66869ffa7?s=128&d=identicon&r=PG", "display_name": "Miquel", "link": "https://stackoverflow.com/users/513570/miquel"}, "is_accepted": false, "score": 0, "last_activity_date": 1572439820, "creation_date": 1572439820, "answer_id": 58625782, "question_id": 58625527, "link": "https://stackoverflow.com/questions/58625527/ion-router-toast-on-route/58625782#58625782", "title": "ion-router toast on route", "body": "<p>Right now I've resolved by creating a new toast each time:</p>\n\n<pre><code>@Element() me: HTMLElement;\n\n@Watch('error')\nonErrorChange(err: string) {\n    if (err) {\n        const toast: HTMLIonToastElement = document.createElement('ion-toast');\n        toast.message = err;\n        toast.duration = 2000;\n        toast.onDidDismiss().then(() =&gt; toast.remove());\n        this.me.appendChild(toast);\n\n        return toast.present();\n    }\n    return Promise.resolve();\n}\n\nrender() {\n    return (\n        &lt;ion-app&gt;\n            &lt;ion-router useHash={false}&gt;\n                &lt;ion-route url='/' component='app-home' /&gt;\n                &lt;ion-route url='/settings' component='app-settings' /&gt;\n            &lt;/ion-router&gt;\n            &lt;ion-nav /&gt;\n        &lt;/ion-app&gt;\n    );\n}\n</code></pre>\n"}], "owner": {"reputation": 7002, "user_id": 513570, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8a17b4d28084ddc12905d1a66869ffa7?s=128&d=identicon&r=PG", "display_name": "Miquel", "link": "https://stackoverflow.com/users/513570/miquel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572439820, "creation_date": 1572438894, "question_id": 58625527, "link": "https://stackoverflow.com/questions/58625527/ion-router-toast-on-route", "title": "ion-router toast on route", "body": "<p>I'm using stencil basic app integrated with redux and all together with capacitor. I would like to present a toast when an error occurred. My <code>app-root.tsx</code> looks like this:</p>\n\n<pre><code>    @State() error: any;\n\n    componentWillLoad() {\n        this.store.setStore(configureStore({}));\n\n        this.store.mapStateToProps(this, (state: RootState) =&gt; {\n            const { error, isStatusBarLight } = state.app;\n            return { error, isStatusBarLight };\n        });\n    }\n\n    @Watch('isStatusBarLight')\n    onIsStatusBarLightChange() {\n        return this.setStatusBarStyle();\n    }\n\n    async setStatusBarStyle() {\n        try {\n            await StatusBar.setStyle({\n                style: this.isStatusBarLight ? StatusBarStyle.Dark : StatusBarStyle.Light,\n            });\n        } catch (err) {\n            this.error = err.toString();\n        }\n    }\n\n    @Watch('error')\n    onErrorChange(err: string) {\n        if (err) {\n            this.toast.message = err;\n            this.toast.duration = 2000;\n            return this.toast.present();\n        }\n        return Promise.resolve();\n    }\n\n    render() {\n        return (\n            &lt;ion-app&gt;\n                &lt;ion-router useHash={false}&gt;\n                    &lt;ion-route url='/' component='app-home' /&gt;\n                    &lt;ion-route url='/settings' component='app-settings' /&gt;\n                &lt;/ion-router&gt;\n                &lt;ion-nav /&gt;\n                &lt;ion-toast message='' duration={2000} ref={elm =&gt; this.toast = elm}&gt;&lt;/ion-toast&gt;\n            &lt;/ion-app&gt;\n        );\n    }\n</code></pre>\n\n<p>It works smoothly when in <code>app-root</code> view. But when <code>isStatusBarLight</code> is changed in <code>app-settings</code>, this <code>app-root</code> component receives the event via <code>mapStateToProps</code> but does not show the toast. Also I receive a console log:</p>\n\n<blockquote>\n  <p>The \"ionToastWillPresent\" event was emitted, but the dispatcher node\n  is not longer connected to the dom.</p>\n</blockquote>\n\n<p>I've also tried to add and remove toast in render function, depending whether if there is an error or not, but this leads to an error if the toast is removed before it is auto hidden (i.e. because a state change). Then it stops showing toasts in child views. Also I'm not sure if this is an optimal way:</p>\n\n<pre><code>render() {\n    return (\n        &lt;ion-app&gt;\n            &lt;ion-router useHash={false}&gt;\n                &lt;ion-route url='/' component='app-home' /&gt;\n                &lt;ion-route url='/settings' component='app-settings' /&gt;\n            &lt;/ion-router&gt;\n            &lt;ion-nav /&gt;\n            {this.error ? &lt;ion-toast message={this.error} duration={2000} ref={elm =&gt; elm.present()}&gt;&lt;/ion-toast&gt; : null}\n        &lt;/ion-app&gt;\n    );\n}\n</code></pre>\n\n<p>I'm not looking for a workaround, I'm looking a way to present modals and toasts in the whole app, having a unified way to present this kind of messages to user via app state. Please, can anyone help me on this?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 12279362, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDeRyy_GQnGetFSOnilqVIDmBW8YMrKGUbNkQ2SPA=k-s128", "display_name": "LALIT KANTA DIBYADARSHAN", "link": "https://stackoverflow.com/users/12279362/lalit-kanta-dibyadarshan"}, "edited": false, "score": 0, "creation_date": 1572440069, "post_id": 58625554, "comment_id": 103559232, "body": "Does it wait if one API takes a longer time to resolve??"}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "reply_to_user": {"reputation": 565, "user_id": 12279362, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDeRyy_GQnGetFSOnilqVIDmBW8YMrKGUbNkQ2SPA=k-s128", "display_name": "LALIT KANTA DIBYADARSHAN", "link": "https://stackoverflow.com/users/12279362/lalit-kanta-dibyadarshan"}, "edited": false, "score": 0, "creation_date": 1572440141, "post_id": 58625554, "comment_id": 103559290, "body": "Yes. Read <a href=\"https://www.learnrxjs.io/operators/combination/forkjoin.html\" rel=\"nofollow noreferrer\">learnrxjs.io/operators/combination/forkjoin.html</a>"}], "tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": true, "score": 3, "last_activity_date": 1572439913, "last_edit_date": 1572439913, "creation_date": 1572439003, "answer_id": 58625554, "question_id": 58625418, "link": "https://stackoverflow.com/questions/58625418/how-to-trigger-an-event-only-when-response-is-recieved-from-multiple-apis/58625554#58625554", "title": "How to trigger an event only when response is recieved from multiple APIs?", "body": "<p>You can use <strong>forkJoin</strong> to achieve it.</p>\n\n<p>Try like this:</p>\n\n<p><strong><a href=\"https://stackblitz.com/edit/angular-cx6xez?embed=1&amp;file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">Working Demo</a></strong></p>\n\n<pre><code>  ngOnInit() {    \n    const request1 = this.serviceOne.someApi();\n    const request2 = tthis.serviceTwo.someApi();\n\n    forkJoin([request1, request2]).subscribe(data =&gt; {\n      this.response1 = data[0];\n      this.response2 = data[1];\n      this.someMethod();\n    });\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 6076031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300421829651150e6be1b729ffeb01ef?s=128&d=identicon&r=PG&f=1", "display_name": "Metinerk", "link": "https://stackoverflow.com/users/6076031/metinerk"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468050, "last_edit_date": 1572468050, "creation_date": 1572440257, "answer_id": 58625922, "question_id": 58625418, "link": "https://stackoverflow.com/questions/58625418/how-to-trigger-an-event-only-when-response-is-recieved-from-multiple-apis/58625922#58625922", "title": "How to trigger an event only when response is recieved from multiple APIs?", "body": "<p>same answer with array destructuring.</p>\n\n<pre><code>forkJoin([\n  this.serviceOne.someApi(),\n  this.serviceTwo.someApi(),\n]).subscribe(data =&gt; {\n    let [serviceOneResponse, serviceTwoResponse] = data;\n    // use responses.\n});\n</code></pre>\n"}], "owner": {"reputation": 565, "user_id": 12279362, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDeRyy_GQnGetFSOnilqVIDmBW8YMrKGUbNkQ2SPA=k-s128", "display_name": "LALIT KANTA DIBYADARSHAN", "link": "https://stackoverflow.com/users/12279362/lalit-kanta-dibyadarshan"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1572442769, "accepted_answer_id": 58625554, "answer_count": 2, "score": -1, "last_activity_date": 1572468080, "creation_date": 1572438574, "last_edit_date": 1572468080, "question_id": 58625418, "link": "https://stackoverflow.com/questions/58625418/how-to-trigger-an-event-only-when-response-is-recieved-from-multiple-apis", "closed_reason": "Duplicate", "title": "How to trigger an event only when response is recieved from multiple APIs?", "body": "<p>I am working on a component, where I need to call two APIs parallelly. And I want to call a method only when both the API calls are resolved.</p>\n\n<pre><code>ngOnInit() {\n    this.serviceOne.someApi().subscribe((res) =&gt; {\n        this.response1 = res;  \n    });\n    this.serviceTwo.someApi().subscribe((res) =&gt; {\n        this.response2 = res;  \n    });\n}\n</code></pre>\n\n<p>I want to call a method only when <code>this.response1</code> and <code>this.response2</code> is getting populated.</p>\n\n<p>Currently, I am wrapping the logic inside the method with an <code>if statement</code>. </p>\n\n<pre><code>someMethod() {\n    if(this.response1 &amp;&amp; this.response2) {\n        //logic\n    }\n}\n</code></pre>\n\n<p>and putting <code>someMethod()</code> inside <code>subscribe()</code> of both the api calls.</p>\n\n<p><strong>What is the best way to achieve this?</strong></p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "webpack"], "owner": {"reputation": 641, "user_id": 6346565, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-bSQM57_XQ7M/AAAAAAAAAAI/AAAAAAAAABY/6UClJHMekLg/photo.jpg?sz=128", "display_name": "Peterhack", "link": "https://stackoverflow.com/users/6346565/peterhack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1572437220, "creation_date": 1572437220, "question_id": 58625048, "link": "https://stackoverflow.com/questions/58625048/storybooks-webpack-config-loader-not-configured", "title": "Storybooks webpack config: loader not configured", "body": "<p>I was having a working webpack config for storybooks. Then I realized that during start of storybooks some files could not be bundled from my application. Of course I do not want the app to be bundled but only my shared ui. So I was trying to add the include path in my webpack config:</p>\n\n<pre><code>// https://storybook.js.org/docs/configurations/typescript-config/\nconst path = require('path');\n\nmodule.exports = ({ config }) =&gt; {\n    config.module.rules.push({\n        test: /\\.(ts|tsx)$/,\n        use: [\n            {\n                loader: require.resolve('awesome-typescript-loader'),\n            },\n            {\n                loader: require.resolve('react-docgen-typescript-loader'),\n            }\n            ],\n        include: path.resolve(__dirname, './base/shared-ui'),\n        },\n        {\n        test: /\\.scss$/,\n            use: [\n                {\n                    loader: require.resolve('style-loader'),\n                },\n                {\n                    loader: require.resolve('css-loader'),\n                },\n                {\n                    loader: require.resolve('sass-loader'),\n                }\n            ],\n        include: path.resolve(__dirname, './base/shared-ui'),\n        });\n    config.resolve.extensions.push('.ts', '.tsx', '.scss');\n    return config;\n};\n</code></pre>\n\n<p>However, now I do get the following error:</p>\n\n<pre><code>WARNING in ./base/shared-ui/components/src/buttons/Buttons.stories.tsx 22:10\nModule parse failed: Unexpected token (22:10)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| stories.add(\n|     'Toast',\n&gt;     () =&gt; &lt;ToastsShowcase/&gt;,\n|     { info: {\n|         text: `\n @ ./base/shared-ui sync \\.stories\\.tsx$ ./components/src/buttons/Buttons.stories.tsx\n @ ./.storybook/config.ts\n @ multi ./node_modules/@storybook/core/dist/server/common/polyfills.js ./node_modules/@storybook/core/dist/server/preview/globals.js ./.storybook/config.ts (webpack)-hot-middleware/client.js?reload=true&amp;quiet=true\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 514, "user_id": 3443505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fSpSD.png?s=128&g=1", "display_name": "Animus", "link": "https://stackoverflow.com/users/3443505/animus"}, "edited": false, "score": 0, "creation_date": 1572437275, "post_id": 58624993, "comment_id": 103557621, "body": "There are a lot of similar assignments inside every <code>if</code> just put them out of the condition, and it&#39;ll become more readable at once."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12296049"}, "reply_to_user": {"reputation": 514, "user_id": 3443505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fSpSD.png?s=128&g=1", "display_name": "Animus", "link": "https://stackoverflow.com/users/3443505/animus"}, "edited": false, "score": 0, "creation_date": 1572437520, "post_id": 58624993, "comment_id": 103557759, "body": "Thank you. but can you give little example will be nice"}, {"owner": {"reputation": 7547, "user_id": 3429323, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fc5012a49b4671fdf8c473ee90190fc0?s=128&d=identicon&r=PG", "display_name": "Elias Soares", "link": "https://stackoverflow.com/users/3429323/elias-soares"}, "edited": false, "score": 0, "creation_date": 1572438487, "post_id": 58624993, "comment_id": 103558319, "body": "Extract common values to outside if statements. You will reduce some lines of code. Also I think that all this logic should be on the template, don&#39;t be afraid of using ngIf"}], "answers": [{"comments": [{"owner": {"reputation": 7547, "user_id": 3429323, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fc5012a49b4671fdf8c473ee90190fc0?s=128&d=identicon&r=PG", "display_name": "Elias Soares", "link": "https://stackoverflow.com/users/3429323/elias-soares"}, "edited": false, "score": 0, "creation_date": 1572438625, "post_id": 58625146, "comment_id": 103558418, "body": "Just made it more organized, but still have a lot of repeated code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12296049"}, "edited": false, "score": 0, "creation_date": 1572438626, "post_id": 58625146, "comment_id": 103558421, "body": "Thank you. but I have learned never use a switch case. Sorry, I had to mention this in the post."}, {"owner": {"reputation": 736, "user_id": 12048970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC153CV25pRN86-Nj3-chgHofTb2z_57QAPe5fA=k-s128", "display_name": "Manuel Panizzo", "link": "https://stackoverflow.com/users/12048970/manuel-panizzo"}, "edited": false, "score": 0, "creation_date": 1572439289, "post_id": 58625146, "comment_id": 103558791, "body": "The problem is not repeat assignation of flags. the problem is the logic behing the setting of flags. whe you change the set of flag your component take one behaviour. when you sent other groups of flags change behaviour again. you dont need reduce the code. you need separate the behaviour in clases / functions / etc.  Less lines dont make a better code. single responsavilitie does it.. And you can use switch case like you use a for. a while . do while. if, else etc..."}], "tags": [], "owner": {"reputation": 736, "user_id": 12048970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC153CV25pRN86-Nj3-chgHofTb2z_57QAPe5fA=k-s128", "display_name": "Manuel Panizzo", "link": "https://stackoverflow.com/users/12048970/manuel-panizzo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572437627, "creation_date": 1572437627, "answer_id": 58625146, "question_id": 58624993, "link": "https://stackoverflow.com/questions/58624993/refactoring-a-long-function-in-typescript/58625146#58625146", "title": "refactoring a long function in typescript", "body": "<p>i would do something like this:</p>\n\n<pre><code>  setSelectedSearchOptions(optionLabel: string) {\n    this.selectedOption = optionLabel;\n    this.selectedSearch = optionLabel;\n\n    switch (optionLabel) {\n      case 'Registratie':\n        this.registratie();\n        break;\n      case 'Vcheq':\n        this.vcheq();\n        break;\n      case 'Doelen':\n        this.doelen();\n        break;\n    }\n  }\n\n  private registratie() {\n    this.showDatePickerOne = true;\n    this.showDatePickerTwo = false;\n    this.showDatePickerThree = false;\n    this.buttonFilterDisabled = false;\n    this.startDate = undefined;\n    this.selectedValue = '';\n    this.showDropdownChallenge = false;\n    this.showDropdownVcheqCode = false;\n    this.showDropdownMeasurement = false;\n    this.showDropdownIndicator = false;\n  }\n\n  private vcheq() {\n    this.showDatePickerOne = true;\n    this.showDatePickerTwo = false;\n    this.showDatePickerThree = false;\n    this.showDropdownMeasurement = false;\n    this.isButtonVisible = true;\n    this.startDate = undefined;\n    this.showDropdownVcheqCode = true;\n    this.showDropdownChallenge = false;\n    this.showDropdownQrCode = false;\n    this.showDropdownIndicator = false;\n  }\n\n  private doelen() {\n    this.showDatePickerOne = true;\n    this.showDatePickerTwo = false;\n    this.showDatePickerThree = false;\n    this.showDropdownMeasurement = false;\n    this.isButtonVisible = false;\n    this.startDate = undefined;\n    this.selectedValue = ',';\n    this.selectedValueOptie = ',';\n    this.selectedValueProgressie = ',';\n    this.showDropdownQrCode = true;\n    this.showDropdownChallenge = false;\n    this.showDropdownVcheqCode = false;\n    this.showDropdownIndicator = false;\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12296049"}, "edited": false, "score": 0, "creation_date": 1572438586, "post_id": 58625152, "comment_id": 103558389, "body": "Thank you. I try it now"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12296049"}, "edited": false, "score": 0, "creation_date": 1572440695, "post_id": 58625152, "comment_id": 103559601, "body": "But I get an error on entries: Property &#39;entries&#39; does not exist on type &#39;{ showDatePickerOne: [1, 1, 1, 1, 0, 0, 1, 1]; showDatePickerTwo: [0, 1, 0, 0, 1, 0, 0, 1]; showDateP"}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "edited": false, "score": 0, "creation_date": 1572441239, "post_id": 58625152, "comment_id": 103559946, "body": "@savantCodeEngineer: anytime ;)"}], "tags": [], "owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "is_accepted": true, "score": 2, "last_activity_date": 1572440738, "last_edit_date": 1572440738, "creation_date": 1572437650, "answer_id": 58625152, "question_id": 58624993, "link": "https://stackoverflow.com/questions/58624993/refactoring-a-long-function-in-typescript/58625152#58625152", "title": "refactoring a long function in typescript", "body": "<p>You can put the values in a \"table\" like </p>\n\n<pre><code>const LABELS = ['Registratie', 'Vcheq', 'Doelen'];\n\nconst OPTIONS = {\n                             // Registratie   Vcheq   Doelen\n    showDatePickerOne:    [             1,      1,       1],\n    showDatePickerTwo:    [             0,      1,       0],\n    showDatePickerThree:  [             1,      1,       0],\n    ...etc\n\n};\n</code></pre>\n\n<p>and then replace your code with </p>\n\n<pre><code>let index = LABELS.indexOf(optionLabel);\n\nfor (let [k, v] of Object.entries(OPTIONS)) {\n    this[k] = v[index];\n}\n</code></pre>\n\n<p>This way you keep the code compact without losing the flexibility.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12296049"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58625152, "answer_count": 2, "score": 1, "last_activity_date": 1572440738, "creation_date": 1572437048, "question_id": 58624993, "link": "https://stackoverflow.com/questions/58624993/refactoring-a-long-function-in-typescript", "title": "refactoring a long function in typescript", "body": "<p>I have this function? And I try to do some refactoring. So with for example a generic function</p>\n\n<pre><code>\nsetSelectedSearchOptions(optionLabel: string) {\n    //this.filterSection.reset();\n    this.selectedOption = optionLabel;\n    this.selectedSearch = optionLabel;\n\n    if (optionLabel === 'Registratie') {\n       this.showDatePickerOne = true;\n      this.showDatePickerTwo = false;\n      this.showDatePickerThree = false;\n      this.buttonFilterDisabled = false;\n      this.startDate = undefined;\n      this.selectedValue = '';\n      this.showDropdownChallenge = false;\n      this.showDropdownVcheqCode = false;\n      this.showDropdownMeasurement = false;\n      this.showDropdownIndicator = false;\n    }\n\n    if (optionLabel === 'Vcheq') {\n      this.showDatePickerOne = true;\n      this.showDatePickerTwo = false;\n      this.showDatePickerThree = false;\n      this.showDropdownMeasurement = false;\n      this.isButtonVisible = true;\n      this.startDate = undefined;\n      this.showDropdownVcheqCode = true;\n      this.showDropdownChallenge = false;\n      this.showDropdownQrCode = false;\n      this.showDropdownIndicator = false;\n\n    }\n\n    if (optionLabel === 'Doelen') {\n      this.showDatePickerOne = true;\n      this.showDatePickerTwo = false;\n      this.showDatePickerThree = false;\n      this.showDropdownMeasurement = false;\n      this.isButtonVisible = false;\n      this.startDate = undefined;\n      this.selectedValue = ',';\n      this.selectedValueOptie = ',';\n      this.selectedValueProgressie = ',';\n      this.showDropdownQrCode = true;\n      this.showDropdownChallenge = false;\n      this.showDropdownVcheqCode = false;\n      this.showDropdownIndicator = false;\n\n    }\n}\n\n\n</code></pre>\n\n<p>But seems for me that it can be shorten. But I don't know how exactly.</p>\n\n<p>So my question is, how to make this function shorter?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["typescript", "generics", "compilation"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1572435382, "post_id": 58624258, "comment_id": 103556645, "body": "Why should it fail? What error do you think it should have failed with?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12296915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-H6A-WDJsHGI/AAAAAAAAAAI/AAAAAAAAAIE/YIv7H-4LhjU/photo.jpg?sz=128", "display_name": "Florent PASQUER", "link": "https://stackoverflow.com/users/12296915/florent-pasquer"}, "edited": false, "score": 0, "creation_date": 1572435524, "post_id": 58624428, "comment_id": 103556723, "body": "Thanks for your response ! I think i understand.   Ive updated the playground with &quot;case n&#176;2&quot; to illustrate."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12251171"}, "is_accepted": true, "score": 0, "last_activity_date": 1572435492, "last_edit_date": 1572435492, "creation_date": 1572435046, "answer_id": 58624428, "question_id": 58624258, "link": "https://stackoverflow.com/questions/58624258/why-compilation-doesnt-fail-in-an-empty-class-with-use-of-generic-type/58624428#58624428", "title": "Why compilation doesnt fail in an empty class with use of generic type?", "body": "<pre><code>Argument of type 'SheepV1' is not assignable to parameter of type 'BergerV1'.\n  Types have separate declarations of a private property 'color'.`\n</code></pre>\n\n<p>You're declaring the same private property in your first example, and not in your second. In your second example you're allowed to cast it because your class shapes are compatible.</p>\n\n<p>For example, if you add a <code>private otherColor: string = \"blue\";</code> to your empty class it'll say that they're incompatible:</p>\n\n<pre><code>Argument of type 'SheepV2' is not assignable to parameter of type 'BergerV2'.\n  Property 'newColor' is missing in type 'SheepV2' but required in type 'BergerV2'.\n</code></pre>\n\n<p>These 2 are essentially the same problem, except in the first it's because it declares the same properties. And it the second because they aren't compatible.</p>\n\n<hr>\n\n<p>Edit: To expand and get a clearer error, if you try this with the empty class setup:</p>\n\n<pre><code>const test1: BergerV1 = new SheepV1() as BergerV1;\nconst test2: BergerV2 = new SheepV2() as BergerV2;\n</code></pre>\n\n<p>You'll get this error for V1 and none for V2:</p>\n\n<pre><code>Conversion of type 'SheepV1' to type 'BergerV1' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.\n  Types have separate declarations of a private property 'color'.\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12296915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-H6A-WDJsHGI/AAAAAAAAAAI/AAAAAAAAAIE/YIv7H-4LhjU/photo.jpg?sz=128", "display_name": "Florent PASQUER", "link": "https://stackoverflow.com/users/12296915/florent-pasquer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 58624428, "answer_count": 1, "score": 1, "last_activity_date": 1572435538, "creation_date": 1572434429, "last_edit_date": 1572435538, "question_id": 58624258, "link": "https://stackoverflow.com/questions/58624258/why-compilation-doesnt-fail-in-an-empty-class-with-use-of-generic-type", "title": "Why compilation doesnt fail in an empty class with use of generic type?", "body": "<p>The compilation doesnt fail when i use an empty class and call it into a generic typed class : </p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/MYGwhgzhAEDKD2BbApgFwBYEsB2BzAPACoB80A3gLABQ0t0w82EqATgK7CrwsAUADi0wA3MKmTQQmZgC5ohAJTkAvtRVVqAeg3QAtHv0HDR6AGEAgrACi0AIzRZhABIBJWNFfQAcgHkASgFkzABlqUEgYWHRkZD4ANTtKGjoBYVFxBhBuWWZBPGgAXmgAIhZkABMigG5ValDwKGgAIWQWXBb48mo6aBSRMXp4TJZs1hxcAuLSiuqqNS1oSwAPPmROcvtoADMwTBB1hkQ+XeRNbUIogcPd0UxGLZ2QGFlMVAByGGxuRDAQaB5gSDibAABps8mo2GQAHc4Eg0Fg8Phmq12jZiDxITDItE4jYePJ5DNalR5kYyeTTBZrAAmDZODweWCEXxmTwAcUsxLCDWxMVitMS3V6aQGQxGuXGhRK5SqNXUVG5MGRbRY-M6s2J8yWKzWZQ222OeoORz2pzkF2N11Qt2w912T2gL3e0E+LG+v3+gJdwOp4KomNhKAwY3wvLi1PRAeV7Wp+MJmu02tWYj1sgNeyNSBNJxJZwtWatNugZXgyAg2FQdseGyh6AAntAAPzN5sQ6GB+Eh6OqiMY9th-lxolUIA\" rel=\"nofollow noreferrer\">View Playground</a></p>\n"}, {"tags": ["node.js", "angular", "typescript", "npm"], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 6018230, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153971257355786/picture?type=large", "display_name": "Ali Keserwan", "link": "https://stackoverflow.com/users/6018230/ali-keserwan"}, "is_accepted": false, "score": 0, "last_activity_date": 1572871622, "last_edit_date": 1572871622, "creation_date": 1572871445, "answer_id": 58693734, "question_id": 58624253, "link": "https://stackoverflow.com/questions/58624253/is-there-a-way-to-abstract-the-import-from-a-node-module-using-typescript-config/58693734#58693734", "title": "Is there a way to abstract the import from a node module using typescript config files in the same style as the &#39;paths&#39; property?", "body": "<p>Check <a href=\"https://github.com/nrwl/nx\" rel=\"nofollow noreferrer\">https://github.com/nrwl/nx</a>\nThey can help you in using monorepo approach.\nYou can split your system into Applications and Libraries.</p>\n"}, {"tags": [], "owner": {"reputation": 1765, "user_id": 1434301, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d8de9f3bd3f0ca6d0d32e63696c52bf3?s=128&d=identicon&r=PG", "display_name": "yantrab", "link": "https://stackoverflow.com/users/1434301/yantrab"}, "is_accepted": true, "score": 0, "last_activity_date": 1572872827, "creation_date": 1572872827, "answer_id": 58694074, "question_id": 58624253, "link": "https://stackoverflow.com/questions/58624253/is-there-a-way-to-abstract-the-import-from-a-node-module-using-typescript-config/58694074#58694074", "title": "Is there a way to abstract the import from a node module using typescript config files in the same style as the &#39;paths&#39; property?", "body": "<p>Create index.ts file , import and export your modules:</p>\n\n<pre><code>import { assign, assignWith } from 'lodash';\nimport { addDays } from 'date-fns';\nexport { assign, assignWith, addDays };\n</code></pre>\n\n<p>and import modules from that index:</p>\n\n<pre><code>import { assign, addDays } from './index';\n</code></pre>\n"}], "owner": {"reputation": 1214, "user_id": 7230887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f474cfee3a57041a619f9e34ce57e58a?s=128&d=identicon&r=PG&f=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/7230887/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 58694074, "answer_count": 2, "score": 0, "last_activity_date": 1572872827, "creation_date": 1572434411, "question_id": 58624253, "link": "https://stackoverflow.com/questions/58624253/is-there-a-way-to-abstract-the-import-from-a-node-module-using-typescript-config", "title": "Is there a way to abstract the import from a node module using typescript config files in the same style as the &#39;paths&#39; property?", "body": "<p>I am creating private node modules which for now might change considerably in structure which could mean splitting existing code into multiple packages.</p>\n\n<p>If I have 100 files importing from a package that no longer holds the import I can do a find and replace but it becomes more difficult when classes are imported from that package...</p>\n\n<p>so something like:</p>\n\n<pre><code>import { thing1, thing2} from 'my-package';\n</code></pre>\n\n<p>in the future may need to be:</p>\n\n<pre><code>import { thing1} from 'my-package';\nimport { thing2} from 'my-package2';\n</code></pre>\n\n<p>You can abstract imports using tsconfig like so:</p>\n\n<pre><code>\"paths\": {\n  \"@shared/*\": [\"app/shared/*\"]\n}\n</code></pre>\n\n<p>But I cant figure out a way to do the same thing with node modules so that if there is a bigger change I only need to change 1 line. Is this possible?</p>\n"}, {"tags": ["angular", "typescript", "lint", "tslint"], "comments": [{"owner": {"reputation": 793711, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1572434300, "post_id": 58624168, "comment_id": 103556103, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34414766/javascript-object-literal-what-exactly-is-a-b-c\">Javascript object literal: what exactly is {a, b, c}?</a>"}, {"owner": {"reputation": 793711, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1572434313, "post_id": 58624168, "comment_id": 103556115, "body": "See also: <a href=\"https://stackoverflow.com/questions/9549780/what-does-this-symbol-mean-in-javascript\" title=\"what does this symbol mean in javascript\">stackoverflow.com/questions/9549780/&hellip;</a>"}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1572434322, "post_id": 58624168, "comment_id": 103556119, "body": "Why is TSLint doing any changes at all? It should just be telling you about what changes you need to make. As an aside, this is shorthand syntax <code>obj = { id }</code> is the same as <code>obj = { id: id }</code>"}, {"owner": {"reputation": 793711, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1572434350, "post_id": 58624168, "comment_id": 103556135, "body": "@VLAZ \u2014 TSLint has an option for automatic code formatting."}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "reply_to_user": {"reputation": 793711, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1572434440, "post_id": 58624168, "comment_id": 103556190, "body": "@Quentin I wouldn&#39;t have thought this falls under the formatting functionality. All linters I&#39;ve used consider stuff like whitespace to be auto-fixable, not any structural changes to the code. Sure, this <i>is</i> equivalent but it&#39;s more of a change than cosmetics."}, {"owner": {"reputation": 793711, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1572434830, "post_id": 58624168, "comment_id": 103556375, "body": "@VLAZ \u2014 OK, it&#39;s called &quot;fix&quot; not &quot;format&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 40169, "user_id": 457268, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/404bbb83c4aecfce65c2c882dc0cd94e?s=128&d=identicon&r=PG", "display_name": "k0pernikus", "link": "https://stackoverflow.com/users/457268/k0pernikus"}, "is_accepted": false, "score": -1, "last_activity_date": 1572434308, "creation_date": 1572434308, "answer_id": 58624221, "question_id": 58624168, "link": "https://stackoverflow.com/questions/58624168/why-does-tslint-remove-object-keys/58624221#58624221", "title": "Why does tslint remove object-keys?", "body": "<p>This is fine and a handy shorthand.</p>\n\n<p>TypeScript allows for easy assignment of object properties if the property has the same name as the variable.</p>\n\n<pre><code>const foo = \"bar\";\nconst object =  {\n   foo\n}\n</code></pre>\n\n<p>Will create an object containing of:</p>\n\n<pre><code>{\n    foo: \"bar\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2060, "user_id": 6851836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3d881c8af1ff5dafe72b5d2ca3f256?s=128&d=identicon&r=PG", "display_name": "Hsuan Lee", "link": "https://stackoverflow.com/users/6851836/hsuan-lee"}, "is_accepted": true, "score": 3, "last_activity_date": 1572435637, "last_edit_date": 1572435637, "creation_date": 1572435243, "answer_id": 58624481, "question_id": 58624168, "link": "https://stackoverflow.com/questions/58624168/why-does-tslint-remove-object-keys/58624481#58624481", "title": "Why does tslint remove object-keys?", "body": "<p>You just enabled the <code>object-literal-shorthand</code> rule, you can set it in the <code>tslint.json</code> file.</p>\n\n<pre><code>{\n \"rules\": {\n    \"object-literal-shorthand\": false\n  }\n}\n</code></pre>\n\n<p><a href=\"https://palantir.github.io/tslint/rules/object-literal-shorthand/\" rel=\"nofollow noreferrer\">https://palantir.github.io/tslint/rules/object-literal-shorthand/</a></p>\n\n<p>This is not an error, it is the standard syntax of ECMAScript 2015.</p>\n\n<blockquote>\n  <p>In ECMAScript 2015, a shorthand notation is available, so that the keyword \"function\" is no longer necessary.</p>\n</blockquote>\n\n<pre class=\"lang-js prettyprint-override\"><code>// Shorthand property names (ES2015)\nvar a = 'foo', b = 42, c = {};\nvar o = {a, b, c};\n</code></pre>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer</a></p>\n"}], "owner": {"reputation": 13, "user_id": 5836935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0qAZH.png?s=128&g=1", "display_name": "porta.nigra", "link": "https://stackoverflow.com/users/5836935/porta-nigra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 58624481, "answer_count": 2, "score": 1, "last_activity_date": 1572435637, "creation_date": 1572434157, "question_id": 58624168, "link": "https://stackoverflow.com/questions/58624168/why-does-tslint-remove-object-keys", "title": "Why does tslint remove object-keys?", "body": "<p>I started using tslint on my TypeScript project. When i reviewed the linted source, i noticed that sometimes keys were removed from objects.</p>\n\n<p>I made a production build (locally) and no errors were shown. How is this possible? I could not find something about this behaviour on the net.</p>\n\n<p>Before:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.streamsDataModelDistance = new SimpleStreamsDataModel({\n            polylineValueModels: polylineValueModels,\n            fields: this.settingsModel.fields,\n            commuters: distanceCommuters\n        });\n</code></pre>\n\n<p>After:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.streamsDataModelDistance = new SimpleStreamsDataModel({\n            polylineValueModels,\n            fields: this.settingsModel.fields,\n            commuters: distanceCommuters\n        });\n</code></pre>\n\n<p>Notice the missing key \"polylineValueModels\".</p>\n\n<p>How does this even compile to JavaScript without errors? I'm hesitant to check this in into the trunk.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "redux", "react-redux"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 4169203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W0uKo.png?s=128&g=1", "display_name": "J. Castellanos", "link": "https://stackoverflow.com/users/4169203/j-castellanos"}, "is_accepted": false, "score": 3, "last_activity_date": 1572433707, "last_edit_date": 1572433707, "creation_date": 1572432851, "answer_id": 58623804, "question_id": 58623339, "link": "https://stackoverflow.com/questions/58623339/inferring-mapped-props-when-using-typescript-and-react-redux/58623804#58623804", "title": "Inferring mapped props when using TypeScript and React-Redux", "body": "<p>I don't think so. You could make your setup more concise by using Redux hooks: <a href=\"https://react-redux.js.org/next/api/hooks\" rel=\"nofollow noreferrer\">https://react-redux.js.org/next/api/hooks</a></p>\n\n<pre><code>    // Your function component . You don't need to connect it\n    const App: React.FC = () =&gt; {\n      const counter = useSelector&lt;number&gt;((state: MyState) =&gt; state.counter);\n      const dispatch = useDispatch(); // for dispatching actions\n    };\n</code></pre>\n\n<p>Edit: You can if you just use the same <code>MyState</code> type. But I don't think you would want that.  </p>\n"}, {"tags": [], "owner": {"reputation": 4452, "user_id": 6410845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908332e239853c5d7628090a2c2c87ea?s=128&d=identicon&r=PG&f=1", "display_name": "Win", "link": "https://stackoverflow.com/users/6410845/win"}, "is_accepted": false, "score": 2, "last_activity_date": 1572435496, "creation_date": 1572435496, "answer_id": 58624545, "question_id": 58623339, "link": "https://stackoverflow.com/questions/58623339/inferring-mapped-props-when-using-typescript-and-react-redux/58624545#58624545", "title": "Inferring mapped props when using TypeScript and React-Redux", "body": "<p>I would type mapped dispatch props, and component props separately and then combine the inferred type of the mapped state to props function. See below for a quick example. There might be a more elegant solution but hopefully, it will hopefully get you on the right track.</p>\n\n<pre><code>import * as React from \"react\";\nimport { Action } from \"redux\";\nimport { connect } from \"react-redux\";\n\n// Lives in some lib file\ntype AppState = {\n  counter: number;\n};\n\ntype MappedState = {\n  computedValue: number;\n};\ntype MappedDispatch = {\n  doSomethingCool: () =&gt; Action;\n};\ntype ComponentProps = {\n  someProp: string;\n};\n\nconst mapStateToProps = (state: AppState) =&gt; ({\n  computedValue: state.counter\n});\n\nconst mapDispatchToProps: MappedDispatch = {\n  doSomethingCool: () =&gt; {\n    return {\n      type: \"DO_SOMETHING_COOL\"\n    };\n  }\n};\n\ntype Props = ReturnType&lt;typeof mapStateToProps&gt; &amp;\n  MappedDispatch &amp;\n  ComponentProps;\n\nclass DumbComponent extends React.Component&lt;Props&gt; {\n  render() {\n    return (\n      &lt;div&gt;\n        &lt;h1&gt;{this.props.someProp}&lt;/h1&gt;\n        &lt;div&gt;{this.props.computedValue}&lt;/div&gt;\n        &lt;button onClick={() =&gt; this.props.doSomethingCool()}&gt;Click me&lt;/button&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nconst SmartComponent = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(DumbComponent);\n\nexport default SmartComponent;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14209, "user_id": 828584, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/498f20465c08db69a48f10e852ba6263?s=128&d=identicon&r=PG", "display_name": "mowwwalker", "link": "https://stackoverflow.com/users/828584/mowwwalker"}, "edited": false, "score": 0, "creation_date": 1606498802, "post_id": 58630099, "comment_id": 114987585, "body": "This is great! This in combination with slices really makes redux lot easier to work with"}], "tags": [], "owner": {"reputation": 40959, "user_id": 62937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52f79e92fdda71a258de1818558dcea4?s=128&d=identicon&r=PG", "display_name": "markerikson", "link": "https://stackoverflow.com/users/62937/markerikson"}, "is_accepted": true, "score": 9, "last_activity_date": 1572453764, "creation_date": 1572453764, "answer_id": 58630099, "question_id": 58623339, "link": "https://stackoverflow.com/questions/58623339/inferring-mapped-props-when-using-typescript-and-react-redux/58630099#58630099", "title": "Inferring mapped props when using TypeScript and React-Redux", "body": "<p>Yes.  There's a neat technique for inferring the type of the combined props that <code>connect</code> will pass to your component based on <code>mapState</code> and <code>mapDispatch</code>.</p>\n\n<p>There is a new <code>ConnectedProps&lt;T&gt;</code> type that is available in <code>@types/react-redux@7.1.2</code>.  You can use it like this:</p>\n\n<pre><code>function mapStateToProps(state: MyState) {\n    return {\n        counter: state.counter\n    };\n}\n\nconst mapDispatch = {increment};\n\n// Do the first half of the `connect()` call separately, \n// before declaring the component\nconst connector = connect(mapState, mapDispatch);\n\n// Extract \"the type of the props passed down by connect\"\ntype PropsFromRedux = ConnectedProps&lt;typeof connector&gt;\n// should be: {counter: number, increment: () =&gt; {type: \"INCREMENT\"}}, etc\n\n// define combined props\ntype MyComponentProps = PropsFromRedux &amp; PropsFromParent;\n\n// Declare the component with the right props type\nclass MyComponent extends React.Component&lt;MyComponentProps&gt; {}\n\n// Finish the connect call\nexport default connector(MyComponent)\n</code></pre>\n\n<p>Note that this correctly infers the type of thunk action creators included in <code>mapDispatch</code> if it's an object, whereas <code>typeof mapDispatch</code> does not.</p>\n\n<p>We will add this to the official React-Redux docs as a recommended approach soon.</p>\n\n<p>More details:</p>\n\n<ul>\n<li><a href=\"https://gist.github.com/christianchown/05e084c78ec216070a5a2b80f0534d4b\" rel=\"noreferrer\">Gist: ConnectedProps - the missing TS helper for Redux</a></li>\n<li><a href=\"https://dev.to/voronar/practical-typescript-react--redux-4enh\" rel=\"noreferrer\">Practical TypeScript with React+Redux</a></li>\n<li><a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/issues/31227\" rel=\"noreferrer\">DefinitelyTyped #31227: Connected component inference</a></li>\n<li><a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/pull/37300\" rel=\"noreferrer\">DefinitelyTyped PR #37300: Add ConnectedProps type</a></li>\n</ul>\n"}], "owner": {"reputation": 3841, "user_id": 257169, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21a0a83dad6adfbfea61835c9ad1b61a?s=128&d=identicon&r=PG", "display_name": "amoe", "link": "https://stackoverflow.com/users/257169/amoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1861, "favorite_count": 1, "accepted_answer_id": 58630099, "answer_count": 3, "score": 6, "last_activity_date": 1572453764, "creation_date": 1572431441, "question_id": 58623339, "link": "https://stackoverflow.com/questions/58623339/inferring-mapped-props-when-using-typescript-and-react-redux", "title": "Inferring mapped props when using TypeScript and React-Redux", "body": "<p>I found a way to get type safety when using <code>mapStateToProps</code> from <code>react-redux</code>: as <a href=\"https://redux.js.org/recipes/usage-with-typescript#usage-with-react-redux\" rel=\"noreferrer\">documented</a> you can define an interface and parameterize <code>React.Component&lt;T&gt;</code> with your interface.</p>\n\n<p>However, when I am defining <code>mapStateToProps</code>, I'm already defining a function where the types of the properties of the resulting object can be inferred.  Eg,</p>\n\n<pre><code>function mapStateToProps(state: MyState) {\n    return {\n        counter: state.counter\n    };\n}\n</code></pre>\n\n<p>Here, the prop <code>counter</code> can be inferred to be the same type as <code>state.counter</code>.  But I still have to have boilerplate code like the following:</p>\n\n<pre><code>interface AppProps {\n    counter: number;\n}\n\n\nclass App extends React.Component&lt;AppProps&gt; { ... }\n\nexport default connect(mapStateToProps)(App);\n</code></pre>\n\n<p>So the question is, is there any way to structure the code so that I can avoid writing the type of <code>counter</code> twice?  Or to avoid parameterizing the type of <code>React.Component</code> -- even if I could have the props of the component inferred from an explicitly-hinted result type of the <code>mapStateToProps</code> function, that would be preferable.  I am wondering if the duplication above is indeed the normal way to write typed components using React-Redux.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "routing", "react-router"], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 11136807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dGP5p.jpg?s=128&g=1", "display_name": "Vinit Bhavsar", "link": "https://stackoverflow.com/users/11136807/vinit-bhavsar"}, "is_accepted": true, "score": 0, "last_activity_date": 1572971242, "creation_date": 1572971242, "answer_id": 58715568, "question_id": 58622932, "link": "https://stackoverflow.com/questions/58622932/fetch-data-before-resolve-route/58715568#58715568", "title": "Fetch data before resolve route", "body": "<p>Make state isLoading : false,\nThen in componentWiilMount() / DidMount() set isLoading state true.\nAfter on fetch sucess reset isLoading to false;</p>\n\n<pre><code>componenetWillMount/didMount(){\nthis.setState({\nisLoading: true\n})\nfetchData().then(res =&gt; this.setState(isLoading: false))\n.catch(err =&gt; this.setState({isLoading: false}));\n\n\nrender(){\nreturn(\n{this.state.isLoading ? &lt;Loader /&gt; : &lt;Component View /&gt; }\n)\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12296314, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDUeyC1rhm0cSjECTeTdWqWFvfb9m3eH5931qQQwg=k-s128", "display_name": "Merynek", "link": "https://stackoverflow.com/users/12296314/merynek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 58715568, "answer_count": 1, "score": 0, "last_activity_date": 1572971242, "creation_date": 1572430091, "question_id": 58622932, "link": "https://stackoverflow.com/questions/58622932/fetch-data-before-resolve-route", "title": "Fetch data before resolve route", "body": "<p>I\u00b4m using for routing \"react-router\" lib. Before render page component, I need fetch data. I want show loader before every routing, because all routes need data from server. All my components is driven by controller, so my solution for this is create this controller in constructor of all components, and on create controller fetch data.</p>\n\n<p>It works, but I\u00b4m using typescript and I want access to data without (!) check for data. Better solution for that use wrapper component which wait for data and render currently page. For first routing it works, but componentDidMounnt \"below in code\" is called only once, so second rounting doesnt work.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>&lt;Router&gt;\n   &lt;Switch&gt;\n     &lt;MyRoute path=\"/login\" component={LoginPage} exact={true} /&gt;\n     &lt;MyRoute path=\"/reg\" component={RegistrationPage} exact={true} /&gt;\n   &lt;/Switch&gt;\n&lt;/Router&gt;\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>/*MyRoute*/\nasync componentDidMount() {\n    try {\n            await this.props.routeController.getController(this.props.path).then((controller: PageController) =&gt; {\n                this.setState({\n                    controller: controller\n                })\n                this.props.routeController.loading = false;\n            })\n        } catch(err) {\n            // error handling\n        }\n    }\n\n    render() {\n        if (!this.props.routeController.loading) {\n            const { controller } = this.state; \n            return (\n                &lt;this.props.component controller={controller} /&gt;\n            )\n        }\n\n        return &lt;div&gt;LOADING&lt;/div&gt;;\n    }\n</code></pre>\n\n<p>So I need fetch data before routing. After that I need render page component with data in props. Is it possible or Is it good solution for this problem? If not, how can I solve problem with asynchronous routing. Thank you :-)</p>\n"}, {"tags": ["android", "typescript", "react-native", "rn-fetch-blob"], "answers": [{"comments": [{"owner": {"reputation": 768, "user_id": 8934481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cH0mZ.jpg?s=128&g=1", "display_name": "Nobady", "link": "https://stackoverflow.com/users/8934481/nobady"}, "edited": false, "score": 0, "creation_date": 1572430205, "post_id": 58622952, "comment_id": 103553891, "body": "yes, I already do this but can I download it from the image viewer? or does it depend on the device?"}, {"owner": {"reputation": 576, "user_id": 9223264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hd8CHstY9js/AAAAAAAAAAI/AAAAAAAAAOk/pJ463aKM9HY/photo.jpg?sz=128", "display_name": "Jaspalsinh Gohil", "link": "https://stackoverflow.com/users/9223264/jaspalsinh-gohil"}, "reply_to_user": {"reputation": 768, "user_id": 8934481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cH0mZ.jpg?s=128&g=1", "display_name": "Nobady", "link": "https://stackoverflow.com/users/8934481/nobady"}, "edited": false, "score": 1, "creation_date": 1572430738, "post_id": 58622952, "comment_id": 103554172, "body": "check out this  i think this link  resolve  your issue : <a href=\"https://reactnativecode.com/download-image-from-url-into-gallery-folder/\" rel=\"nofollow noreferrer\">reactnativecode.com/download-image-from-url-into-gallery-fol&zwnj;&#8203;der</a>"}, {"owner": {"reputation": 768, "user_id": 8934481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cH0mZ.jpg?s=128&g=1", "display_name": "Nobady", "link": "https://stackoverflow.com/users/8934481/nobady"}, "edited": false, "score": 1, "creation_date": 1572431519, "post_id": 58622952, "comment_id": 103554594, "body": "thanks guys, both solutions are acceptable .. as soon as I finish I accept the answer I used ;-)"}], "tags": [], "owner": {"reputation": 576, "user_id": 9223264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hd8CHstY9js/AAAAAAAAAAI/AAAAAAAAAOk/pJ463aKM9HY/photo.jpg?sz=128", "display_name": "Jaspalsinh Gohil", "link": "https://stackoverflow.com/users/9223264/jaspalsinh-gohil"}, "is_accepted": false, "score": 1, "last_activity_date": 1572430129, "creation_date": 1572430129, "answer_id": 58622952, "question_id": 58622793, "link": "https://stackoverflow.com/questions/58622793/rnfetchblob-android-first-view-and-then-download-the-image/58622952#58622952", "title": "RNFetchBlob android, first view and then download the image", "body": "<p>show an image in image viewer</p>\n\n<pre><code>android.actionViewIntent(PATH_OF_IMG, 'image/png')\n</code></pre>\n\n<p>visit this link for for more info : <a href=\"https://github.com/joltup/rn-fetch-blob/wiki/Android-API\" rel=\"nofollow noreferrer\">https://github.com/joltup/rn-fetch-blob/wiki/Android-API</a></p>\n"}, {"comments": [{"owner": {"reputation": 768, "user_id": 8934481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cH0mZ.jpg?s=128&g=1", "display_name": "Nobady", "link": "https://stackoverflow.com/users/8934481/nobady"}, "edited": false, "score": 0, "creation_date": 1572431515, "post_id": 58623241, "comment_id": 103554591, "body": "thanks guys, both solutions are acceptable .. as soon as I finish I accept the answer I used ;-)"}], "tags": [], "owner": {"reputation": 311, "user_id": 3254264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sva04.jpg?s=128&g=1", "display_name": "Muni Kumar Gundu", "link": "https://stackoverflow.com/users/3254264/muni-kumar-gundu"}, "is_accepted": false, "score": 2, "last_activity_date": 1572435309, "last_edit_date": 1572435309, "creation_date": 1572431121, "answer_id": 58623241, "question_id": 58622793, "link": "https://stackoverflow.com/questions/58622793/rnfetchblob-android-first-view-and-then-download-the-image/58623241#58623241", "title": "RNFetchBlob android, first view and then download the image", "body": "<p>You can use react-native-image-view \nurl: \n <a href=\"https://github.com/antonKalinin/react-native-image-view\" rel=\"nofollow noreferrer\">https://github.com/antonKalinin/react-native-image-view</a></p>\n\n<p>It provides feasibility to  custom render for footer and control types. There you can make a download button on click of button,  write a code for image download using RNFetchBlob. </p>\n"}], "owner": {"reputation": 768, "user_id": 8934481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cH0mZ.jpg?s=128&g=1", "display_name": "Nobady", "link": "https://stackoverflow.com/users/8934481/nobady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572435309, "creation_date": 1572429650, "last_edit_date": 1572429889, "question_id": 58622793, "link": "https://stackoverflow.com/questions/58622793/rnfetchblob-android-first-view-and-then-download-the-image", "title": "RNFetchBlob android, first view and then download the image", "body": "<p>Is there a way to open an image file (mainly jpeg) with:</p>\n\n<pre><code>RNFetchBlob.android.actionViewIntent(res.path(), item.mime_type);\n</code></pre>\n\n<p>and then allow to save the image, I'm trying on an emulator Nexus 4 and API 25 but both from the gallery and from the photo there is no option to save the image ... thanks!</p>\n"}, {"tags": ["reactjs", "typescript", "redux"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 8499653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acdfdc7243e2ad6f5e40d40122ec5896?s=128&d=identicon&r=PG&f=1", "display_name": "Ditiz", "link": "https://stackoverflow.com/users/8499653/ditiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1572430965, "last_edit_date": 1572430965, "creation_date": 1572429908, "answer_id": 58622877, "question_id": 58622736, "link": "https://stackoverflow.com/questions/58622736/how-to-give-an-interface-to-an-object-string-value/58622877#58622877", "title": "How to give an interface to an object &lt;string, Value&gt;", "body": "<p>For plain object, as it says in the docs of <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html\" rel=\"nofollow noreferrer\">typescript</a>, you can do: </p>\n\n<pre><code>interface IObject {\n    key1: 'value1';\n    key2: 'value2';\n    key3: 'value3';\n}\n\nconst object: IObject = {\n    key1: 'value1',\n    key2: 'value2',\n    key3: 'value3'\n};\n</code></pre>\n\n<p>For Map, \nIt as already answers <a href=\"https://stackoverflow.com/questions/30019542/es6-map-in-typescript\">here</a>, you can do something like:  </p>\n\n<pre><code>type keys = \"key1\" | \"key2\" | \"key3\"\ntype values = \"value1\" | \"value2\" | \"value3\"\n\nconst map = new Map&lt;keys, values&gt;();\nmap.set('key1', \"value1\");\nmap.set('key2', \"value2\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 274424, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35c2e9680f4ece4705681fd98f5c54d0?s=128&d=identicon&r=PG", "display_name": "Federico Bellucci", "link": "https://stackoverflow.com/users/274424/federico-bellucci"}, "is_accepted": false, "score": 0, "last_activity_date": 1601634965, "creation_date": 1601634965, "answer_id": 64170112, "question_id": 58622736, "link": "https://stackoverflow.com/questions/58622736/how-to-give-an-interface-to-an-object-string-value/64170112#64170112", "title": "How to give an interface to an object &lt;string, Value&gt;", "body": "<p>I guess your problem is with <code>redux-persist</code> not persisting your state because it is an ES6 Map which is not supported by it.</p>\n<p>If so, you may add a transformer to your persist configuration object. Something like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const persistConfig = {\n  &lt;your configuration&gt;,\n  transforms: [createTransform(\n    map =&gt; Array.from(map),\n    array =&gt; new Map(array),\n    { whitelist: ['&lt;your Map property name&gt;'] }\n  )],\n}\n</code></pre>\n<p>If your whole state is a Map you can avoid using the whitelist property.</p>\n"}], "owner": {"reputation": 2375, "user_id": 3241192, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/613c032be74a10f24138c3486120638e?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/3241192/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1601634965, "creation_date": 1572429461, "question_id": 58622736, "link": "https://stackoverflow.com/questions/58622736/how-to-give-an-interface-to-an-object-string-value", "title": "How to give an interface to an object &lt;string, Value&gt;", "body": "<p>I am using react, redux persist, and redux-starter-kit.</p>\n\n<p>My server is returning data like the following :</p>\n\n<pre><code>'key1':'value1'\n'key2':'value2' \n'key3':'value3'  \n}\n</code></pre>\n\n<p>The problem is, I setup those value as Map in the states, but redux is totally ignoring those value because they are not serializable. (or returning an object and not a map)</p>\n\n<p>I am ok with storing a plain object, but I would like to know if there is a way to add an interface for this kind of object. If I use a type object, it will be to generic, I would like to store something like object</p>\n\n<p>Is this possible ? </p>\n\n<p>I want</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1572428679, "post_id": 58622442, "comment_id": 103553026, "body": "typo: <code>this.props.onOkClick</code> and <code>this.props.onCancelClick</code>"}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 7334097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb757405c6469911e1e67df389b8922?s=128&d=identicon&r=PG&f=1", "display_name": "BennKingy", "link": "https://stackoverflow.com/users/7334097/bennkingy"}, "edited": false, "score": 0, "creation_date": 1572428930, "post_id": 58622553, "comment_id": 103553152, "body": "Omg thank you! That fixed it. No syntax errors were showing in my code... but yeah thanks a bunch :D"}, {"owner": {"reputation": 1755, "user_id": 5124488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43bb8786cddcba2287ee03d6b8c6111f?s=128&d=identicon&r=PG&f=1", "display_name": "blueseal", "link": "https://stackoverflow.com/users/5124488/blueseal"}, "edited": false, "score": 1, "creation_date": 1572429007, "post_id": 58622553, "comment_id": 103553205, "body": "if that helped you then accept this answer and upvote it"}, {"owner": {"reputation": 796, "user_id": 7334097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb757405c6469911e1e67df389b8922?s=128&d=identicon&r=PG&f=1", "display_name": "BennKingy", "link": "https://stackoverflow.com/users/7334097/bennkingy"}, "edited": false, "score": 0, "creation_date": 1572429412, "post_id": 58622553, "comment_id": 103553434, "body": "I did upvote and had to wait 6 minutes untill accepting it as the right answer :)"}], "tags": [], "owner": {"reputation": 254, "user_id": 2581549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ee84da67be4a482dc3397f849344f7?s=128&d=identicon&r=PG", "display_name": "MubashirEbad", "link": "https://stackoverflow.com/users/2581549/mubashirebad"}, "is_accepted": true, "score": 2, "last_activity_date": 1572428817, "creation_date": 1572428817, "answer_id": 58622553, "question_id": 58622442, "link": "https://stackoverflow.com/questions/58622442/simple-react-component-expected-an-assignment-or-function-call-and-instead-saw/58622553#58622553", "title": "Simple react component - Expected an assignment or function call and instead saw an expression no-unused-expressions", "body": "<p>You have to call a method with parentheses, such as write</p>\n\n<pre><code>private handleOkClick = () =&gt; {\n        this.props.onOkClick;\n    }\n</code></pre>\n\n<p>as </p>\n\n<pre><code>private handleOkClick = () =&gt; {\n        this.props.onOkClick();\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 592, "user_id": 4938828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHIBE.png?s=128&g=1", "display_name": "Saqib Naseeb", "link": "https://stackoverflow.com/users/4938828/saqib-naseeb"}, "is_accepted": false, "score": 0, "last_activity_date": 1572429039, "creation_date": 1572429039, "answer_id": 58622629, "question_id": 58622442, "link": "https://stackoverflow.com/questions/58622442/simple-react-component-expected-an-assignment-or-function-call-and-instead-saw/58622629#58622629", "title": "Simple react component - Expected an assignment or function call and instead saw an expression no-unused-expressions", "body": "<p>The handlers { handleOkClick ,handleCancelClick }  have function calls passed as props, so call it as  <strong>this.props.onOkClick()</strong> rather than  <strong><em>this.props.onOkClick;</em></strong></p>\n\n<pre><code>import * as React from \"react\";\n\ninterface Iprops {\n    title: string;\n    content: string;\n    cancelCaption?: string;\n    okCaption?: string;\n    onOkClick: () =&gt; void;\n    onCancelClick: () =&gt; void;\n}\n\nclass Confirm extends React.Component&lt;Iprops&gt; {\n\n    public static defaultProps = {\n    cancelCaption: \"Cancel\",\n    okCaption: \"Okay\"\n    }\n\n    private handleOkClick = () =&gt; {\n        this.props.onOkClick();\n    }\n\n    private handleCancelClick = () =&gt; {\n        this.props.onCancelClick();\n    }\n\n    public render() {\n        return (\n        &lt;div className=\"confirm-wrapper confirm-visible\"&gt;\n        &lt;div className=\"confirm-container\"&gt;\n            &lt;div className=\"confirm-title-container\"&gt;\n                &lt;span&gt;{this.props.title}&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div className=\"confirm-content-container\"&gt;\n                &lt;p&gt;{this.props.content}&lt;/p&gt;\n            &lt;/div&gt;\n            &lt;div className=\"confirm-buttons-container\"&gt;\n                &lt;button className=\"confirm-cancel\" onClick={this.handleCancelClick}&gt;\n                    {this.props.cancelCaption}\n                &lt;/button&gt;\n                &lt;button className=\"confirm-ok\" onClick={this.handleOkClick}&gt;\n                    {this.props.okCaption}\n                &lt;/button&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;/div&gt;\n        );\n    }\n\n}\n\nexport default Confirm;\n</code></pre>\n"}], "owner": {"reputation": 796, "user_id": 7334097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb757405c6469911e1e67df389b8922?s=128&d=identicon&r=PG&f=1", "display_name": "BennKingy", "link": "https://stackoverflow.com/users/7334097/bennkingy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58622553, "answer_count": 2, "score": 0, "last_activity_date": 1572429039, "creation_date": 1572428480, "last_edit_date": 1572428666, "question_id": 58622442, "link": "https://stackoverflow.com/questions/58622442/simple-react-component-expected-an-assignment-or-function-call-and-instead-saw", "title": "Simple react component - Expected an assignment or function call and instead saw an expression no-unused-expressions", "body": "<p>I am following a book 'Learn React with TypeScript' and I have finished chapter 3 but I can't seem to get my program to compile properly. I am just creating a simple confirm component with buttons. </p>\n\n<blockquote>\n  <p>ERROR: ./src/Confirm.tsx   Line 20:3:  Expected an assignment or\n  function call and instead saw an expression  no-unused-expressions</p>\n</blockquote>\n\n<p>I feel like I have written the code correctly, could anyone point me in the right direction please? :) </p>\n\n<p>App.tsx</p>\n\n<pre><code>import React, { Component } from \"react\";\nimport './Confirm.css';\nimport Confirm from './Confirm';\n\nclass App extends Component {\n\n  private handleCancelConfirmClick = () =&gt; {\n    console.log(\"Cancel clicked\");\n  }\n\n  private handleOkConfirmClick = () =&gt; {\n    console.log(\"Cancel clicked\");\n  }  \n\n  public render() {\n    return (\n      &lt;div className=\"App\"&gt;\n        &lt;Confirm\n          title=\"React and TypeScript\"\n          content=\"Are you sure you want to learn?\"\n          cancelCaption=\"No way\"\n          okCaption=\"Yes please!\"\n          onCancelClick={this.handleCancelConfirmClick}\n          onOkClick={this.handleOkConfirmClick}\n        /&gt;\n      &lt;/div&gt;\n    );\n  }\n\n}\n\nexport default App;\n</code></pre>\n\n<p>Confirm.tsx</p>\n\n<pre><code>import * as React from \"react\";\n\ninterface Iprops {\n    title: string;\n    content: string;\n    cancelCaption?: string;\n    okCaption?: string;\n    onOkClick: () =&gt; void;\n    onCancelClick: () =&gt; void;\n}\n\nclass Confirm extends React.Component&lt;Iprops&gt; {\n\n    public static defaultProps = {\n        cancelCaption: \"Cancel\",\n        okCaption: \"Okay\"\n    }\n\n    private handleOkClick = () =&gt; {\n        this.props.onOkClick;\n    }\n\n    private handleCancelClick = () =&gt; {\n        this.props.onCancelClick;\n    }\n\n    public render() {\n        return (\n            &lt;div className=\"confirm-wrapper confirm-visible\"&gt;\n                &lt;div className=\"confirm-container\"&gt;\n                    &lt;div className=\"confirm-title-container\"&gt;\n                        &lt;span&gt;{this.props.title}&lt;/span&gt;\n                    &lt;/div&gt;\n                    &lt;div className=\"confirm-content-container\"&gt;\n                        &lt;p&gt;{this.props.content}&lt;/p&gt;\n                    &lt;/div&gt;\n                    &lt;div className=\"confirm-buttons-container\"&gt;\n                        &lt;button className=\"confirm-cancel\" onClick={this.handleCancelClick}&gt;\n                            {this.props.cancelCaption}\n                        &lt;/button&gt;\n                        &lt;button className=\"confirm-ok\" onClick={this.handleOkClick}&gt;\n                            {this.props.okCaption}\n                        &lt;/button&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n        &lt;/div&gt;\n        );\n    }\n\n}\n\nexport default Confirm;\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 9277476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2889f4d5798df177e352f652d58f0b?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Ridding", "link": "https://stackoverflow.com/users/9277476/jamie-ridding"}, "is_accepted": false, "score": 1, "last_activity_date": 1572428919, "creation_date": 1572428919, "answer_id": 58622585, "question_id": 58622422, "link": "https://stackoverflow.com/questions/58622422/return-value-related-to-file-content-header/58622585#58622585", "title": "Return value related to file content header", "body": "<p>JavaScript strings have methods to test against only the start and end of a string: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\" rel=\"nofollow noreferrer\">String.prototype.startsWith</a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\" rel=\"nofollow noreferrer\">String.prototype.endsWith</a>. The two methods each take a string, and check that it is equal to the start and end of their host string respectively.</p>\n\n<p>Using this knowledge, you can reduce the <code>if</code> statement in your function <code>getAttachmentType</code> to test for <code>image/</code> only by replacing</p>\n\n<pre><code>if (\n    attachmentTypeHeader === 'image/png' ||\n    attachmentTypeHeader === 'image/jpg' ||\n    attachmentTypeHeader === 'image/jpeg'\n)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if (attachmentTypeHeader.startsWith('image/'))\n</code></pre>\n\n<p>Hope this helps. If you have any questions, I will do my best to answer them in the comments.</p>\n"}], "owner": {"reputation": 1515, "user_id": 10021083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F4opwx4U8H8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq13JczyNUx5Nh4JYB6LEEig1b94fg/mo/photo.jpg?sz=128", "display_name": "Eugene Sukh", "link": "https://stackoverflow.com/users/10021083/eugene-sukh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572428919, "creation_date": 1572428397, "question_id": 58622422, "link": "https://stackoverflow.com/questions/58622422/return-value-related-to-file-content-header", "title": "Return value related to file content header", "body": "<p>I have an attachment uploading feature in my web app.</p>\n\n<p>File can have type- <code>image/png</code> or <code>image/jpg</code> or <code>image/jpeg</code> or <code>application/pdf</code></p>\n\n<p>For images, I need to return Photo, for pdf Document.</p>\n\n<p>Documents will be the only pdf, but images can be extended to images/ico, etc.</p>\n\n<p>Now my code looks like this.</p>\n\n<pre><code>getAttachmentType(attachmentTypeHeader: string): string {\n    if (\n        attachmentTypeHeader === 'image/png' ||\n        attachmentTypeHeader === 'image/jpg' ||\n        attachmentTypeHeader === 'image/jpeg'\n    ) {\n        return 'Photo';\n    }\n    if (attachmentTypeHeader === 'application/pdf') {\n        return 'Document';\n    }\n}\n</code></pre>\n\n<p>How I can make it check like <code>image/*</code>?</p>\n"}, {"tags": ["angular", "typescript", "rgb", "heatmap", "ngx-charts"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8170138, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c3nnF8k2-Uo/AAAAAAAAAAI/AAAAAAAAAA4/uSrYSa2NZfY/photo.jpg?sz=128", "display_name": "\u96ea \u9701", "link": "https://stackoverflow.com/users/8170138/%e9%9b%aa-%e9%9c%81"}, "is_accepted": false, "score": -1, "last_activity_date": 1572428685, "creation_date": 1572428685, "answer_id": 58622502, "question_id": 58622255, "link": "https://stackoverflow.com/questions/58622255/how-to-fix-error-typeerror-t-rgb-is-not-a-function-in-ngx-charts-heat-map-graph/58622502#58622502", "title": "How to fix ERROR TypeError: t.rgb is not a function In ngx-charts heat map graph", "body": "<p>it has nothing to do with typescript, typescript doesn't affect runtime.</p>\n\n<p>the <code>TypeError</code> exception was raised because <code>t.rgb</code> wasn't a function literally during runtime. try to add breakpoints in your code and see if anything goes wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 11436323, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kKnBC1_cHvo/AAAAAAAAAAI/AAAAAAAAArU/A7ev2lV1_aM/photo.jpg?sz=128", "display_name": "Rajitha Warusavitarana", "link": "https://stackoverflow.com/users/11436323/rajitha-warusavitarana"}, "is_accepted": true, "score": 0, "last_activity_date": 1573651882, "creation_date": 1573651882, "answer_id": 58838282, "question_id": 58622255, "link": "https://stackoverflow.com/questions/58622255/how-to-fix-error-typeerror-t-rgb-is-not-a-function-in-ngx-charts-heat-map-graph/58838282#58838282", "title": "How to fix ERROR TypeError: t.rgb is not a function In ngx-charts heat map graph", "body": "<p>Updated version of @angular-devkit/build-angular from 0.800.0 to 0.803.17 solved the issue.</p>\n\n<p>solved with the help of Michael Kopf's answer on github <a href=\"https://github.com/swimlane/ngx-charts/issues/1291\" rel=\"nofollow noreferrer\">link to answer</a></p>\n"}], "owner": {"reputation": 125, "user_id": 11436323, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kKnBC1_cHvo/AAAAAAAAAAI/AAAAAAAAArU/A7ev2lV1_aM/photo.jpg?sz=128", "display_name": "Rajitha Warusavitarana", "link": "https://stackoverflow.com/users/11436323/rajitha-warusavitarana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "accepted_answer_id": 58838282, "answer_count": 2, "score": 0, "last_activity_date": 1573651882, "creation_date": 1572427865, "last_edit_date": 1573634239, "question_id": 58622255, "link": "https://stackoverflow.com/questions/58622255/how-to-fix-error-typeerror-t-rgb-is-not-a-function-in-ngx-charts-heat-map-graph", "title": "How to fix ERROR TypeError: t.rgb is not a function In ngx-charts heat map graph", "body": "<p>I'm trying to create a heap map using ngx-charts, the graph is up and running but the colors of the graph is not shown because of an RGB error in the library. Any suggestions to solve this issue? </p>\n\n<p>Here is an Image of the chart with no colors. These bars should be filled with colors. Found that <code>d3js</code> is used as a dependency on ngx-charts </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZG8zs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZG8zs.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Error message in console - </p>\n\n<pre><code>main-es2015.c512fe386c6a4d3e4777.js:1 ERROR TypeError: t.rgb is not a function\n    at _ (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at w (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at i (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at b (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at y (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at t.f [as scale] (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at t.getColor (main-es2015.c512fe386c6a4d3e4777.js:1)\n    at main-es2015.c512fe386c6a4d3e4777.js:1\n    at Array.map (&lt;anonymous&gt;)\n    at main-es2015.c512fe386c6a4d3e4777.js:1\n</code></pre>\n\n<p>Link for the issue in GitHub - <a href=\"https://github.com/swimlane/ngx-charts/issues/1291\" rel=\"nofollow noreferrer\">link to issue</a></p>\n"}, {"tags": ["angular", "typescript", "angular8"], "comments": [{"owner": {"reputation": 2460, "user_id": 2466342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4hkq.png?s=128&g=1", "display_name": "terahertz", "link": "https://stackoverflow.com/users/2466342/terahertz"}, "edited": false, "score": 0, "creation_date": 1572427796, "post_id": 58621919, "comment_id": 103552541, "body": "Hi Ahmad, in future, you can use 3x single quotes: ```, to format a block of code using markdown =) Try to use single quote only for single, inline codes."}, {"owner": {"reputation": 917, "user_id": 11048793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/322AO.jpg?s=128&g=1", "display_name": "varundhariyal", "link": "https://stackoverflow.com/users/11048793/varundhariyal"}, "edited": false, "score": 0, "creation_date": 1572428642, "post_id": 58621919, "comment_id": 103552998, "body": "For using all modules at app initialization import modules in root/app modules which is not recommended at all but will solve your problem.For optimization refer  my answer"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7368895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5715a079816236e0a00e165e1886bebe?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/7368895/arjun"}, "is_accepted": false, "score": 0, "last_activity_date": 1572427761, "creation_date": 1572427761, "answer_id": 58622214, "question_id": 58621919, "link": "https://stackoverflow.com/questions/58621919/import-module-a-into-module-b-but-a-has-already-imported-module-b-angular/58622214#58622214", "title": "Import module A into module B, but A has already imported module B angular", "body": "<pre><code>    you need to register that shared module to app.module like this\n\n    App Module\n\n\n\n  @NgModule({\n      declarations: [],\n      imports: [\n        SharedModule\n      ], exports: []\n    })\n    export class AppModule { }\n\n    And shared module should look like this\n\n\n  @NgModule({\n      declarations: [ProductListComponent,UserListComponent],\n      imports: [\n        CommonModule,\n        UserModule,\n        ProductModule\n      ], exports: []\n    })\n    export class SharedModule { }\n\n Now you can able to use all the modules\n please don't import modules multiple times\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 549, "user_id": 3564156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566c0a28a8374c935002d38927c3dcd4?s=128&d=identicon&r=PG&f=1", "display_name": "akpgp", "link": "https://stackoverflow.com/users/3564156/akpgp"}, "is_accepted": false, "score": 0, "last_activity_date": 1572427922, "creation_date": 1572427922, "answer_id": 58622275, "question_id": 58621919, "link": "https://stackoverflow.com/questions/58621919/import-module-a-into-module-b-but-a-has-already-imported-module-b-angular/58622275#58622275", "title": "Import module A into module B, but A has already imported module B angular", "body": "<p>import the <strong>SharedModule</strong> inside the app module file. </p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572429796, "post_id": 58622310, "comment_id": 103553655, "body": "Initially I was using only Product List so as you said I imported ProductModule in UserModule as Product List Component was exported but later i got a requirement to use UserList in Product but now importing UserModule in ProductModule is not possible, putting user list and product list in common shared module removes the feature of listing from there corresponding modules and makes me dependent on Shared Module as if i want to use ProductListing of Product Module also having other Components, I will also have to include SharedModule"}, {"owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572431672, "post_id": 58622310, "comment_id": 103554677, "body": "In that case it throws  WARNING in Circular dependency detected: src/app/user/user.module.ts -&gt; src/app/product/product.module.ts -&gt; src/app/user/user.module.ts"}, {"owner": {"reputation": 917, "user_id": 11048793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/322AO.jpg?s=128&g=1", "display_name": "varundhariyal", "link": "https://stackoverflow.com/users/11048793/varundhariyal"}, "reply_to_user": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572431790, "post_id": 58622310, "comment_id": 103554736, "body": "import modules in root module instead of importing in cycle in two modules.Circular warning will be thrown because you are  importing user module in product module when product module is already imported in user module."}, {"owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572433634, "post_id": 58622310, "comment_id": 103555747, "body": "Now UserList is not available to ProductModule and vice versa after adding the imports in the AppModule"}, {"owner": {"reputation": 917, "user_id": 11048793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/322AO.jpg?s=128&g=1", "display_name": "varundhariyal", "link": "https://stackoverflow.com/users/11048793/varundhariyal"}, "reply_to_user": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572433684, "post_id": 58622310, "comment_id": 103555768, "body": "have you exported userlistcomponent in usermodule?"}, {"owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572434068, "post_id": 58622310, "comment_id": 103555994, "body": "Yes, I&#39;ve exported the component"}, {"owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "edited": false, "score": 0, "creation_date": 1572434138, "post_id": 58622310, "comment_id": 103556033, "body": "It says app-user-list is not a known element   and same error for app-product-list"}, {"owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "reply_to_user": {"reputation": 917, "user_id": 11048793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/322AO.jpg?s=128&g=1", "display_name": "varundhariyal", "link": "https://stackoverflow.com/users/11048793/varundhariyal"}, "edited": false, "score": 0, "creation_date": 1572434234, "post_id": 58622310, "comment_id": 103556079, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201597/discussion-between-ahmad-qureshi-and-varundhariyal\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 917, "user_id": 11048793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/322AO.jpg?s=128&g=1", "display_name": "varundhariyal", "link": "https://stackoverflow.com/users/11048793/varundhariyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1572428418, "last_edit_date": 1572428418, "creation_date": 1572428011, "answer_id": 58622310, "question_id": 58621919, "link": "https://stackoverflow.com/questions/58621919/import-module-a-into-module-b-but-a-has-already-imported-module-b-angular/58622310#58622310", "title": "Import module A into module B, but A has already imported module B angular", "body": "<p>Ahmad, it is <strong>never</strong> suggested/required to import each and every module in shared module.Shared module is there to keep components,directives etc which are required by many modules like <strong>Header(Navbar),footer,sidebar</strong> etc.</p>\n\n<p>In your case ideally you should make a common component/directive if same functionality required at various components(reusability) that component/directive can be kept in shared module and then SharedModule can be imported to FeatureModule (User/Product in your case).</p>\n\n<ul>\n<li>If functionality not common then only export particular\ncomponent(ProductListComponent) and import that components's\nmodules(ProductModule) in required module (UserModule) or vice-versa\n(UserListComponent in ProductModule)</li>\n</ul>\n\n<p><strong>If every module is imported in each and every module whats the use of using Angular.Moreover, optimization will be heavily effected!</strong>  </p>\n"}], "owner": {"reputation": 141, "user_id": 9094429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cpwt3.jpg?s=128&g=1", "display_name": "Ahmad Qureshi", "link": "https://stackoverflow.com/users/9094429/ahmad-qureshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 544, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1572428914, "creation_date": 1572426716, "last_edit_date": 1572428914, "question_id": 58621919, "link": "https://stackoverflow.com/questions/58621919/import-module-a-into-module-b-but-a-has-already-imported-module-b-angular", "title": "Import module A into module B, but A has already imported module B angular", "body": "<p>I have two modules <strong>User and Product</strong>. User Module has already imported Product Module in order to use the ProductListComponent. Now I want to import/use UserListComponent from User Module in Product Module. But when importing the User Module in Product Module it throws <em>circular dependency</em> error. Is there a way to use every module in other module so that my logic always stays in its corresponding module but I can reuse its features?   </p>\n\n<p>I was thinking to have a common/Shared Module that imports all other modules in it and that Shared Module is then imported by all the other modules, so this will make all of my modules available to each other. But doing this throws a circular dependency error which is indeed a valid error.</p>\n\n<p>Product Module</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  declarations: [ProductListComponent],\n  imports: [\n    CommonModule,\n    ProductRoutingModule,\n  ], exports: [ProductListComponent]\n})\nexport class ProductModule { }\n</code></pre>\n\n<p>User Module</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  declarations: [UserListComponent],\n  imports: [\n    CommonModule,\n    UserRoutingModule,\n    ProductModule\n  ], exports: []\n})\nexport class UserModule { }\n</code></pre>\n\n<p><b>What I tried with shared module and it looks like</b></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    UserModule,\n    ProductModule\n  ], exports: []\n})\nexport class SharedModule { }\n</code></pre>\n\n<p>Product Module</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  declarations: [ProductListComponent],\n  imports: [\n    CommonModule,\n    ProductRoutingModule,\n    SharedModule\n  ], exports: [ProductListComponent]\n})\nexport class ProductModule { }\n</code></pre>\n\n<p>User Module</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  declarations: [UserListComponent],\n  imports: [\n    CommonModule,\n    UserRoutingModule,\n    SharedModule\n  ], exports: []\n})\nexport class UserModule { }\n</code></pre>\n\n<p>Please help me to have a way to share all the modules across all the other modules in the application in order to avoid code repetition or making applications design independent.</p>\n"}, {"tags": ["typescript", "ionic-framework", "stenciljs"], "comments": [{"owner": {"reputation": 6485, "user_id": 1242317, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fHHUQ.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1242317/thomas"}, "edited": false, "score": 0, "creation_date": 1572524207, "post_id": 58621832, "comment_id": 103591574, "body": "I recently had a similar problem. Can you check where <code>ion-modal</code> and <code>ion-popover</code> are attached to the DOM? They should both be direct children of <code>ion-app</code>."}, {"owner": {"reputation": 65, "user_id": 9167214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3057f35491d0f54b47f1eae5ed075186?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Manders", "link": "https://stackoverflow.com/users/9167214/mike-manders"}, "reply_to_user": {"reputation": 6485, "user_id": 1242317, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fHHUQ.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1242317/thomas"}, "edited": false, "score": 0, "creation_date": 1572527880, "post_id": 58621832, "comment_id": 103593699, "body": "The ion-modal is attached to the body &gt; app-root &gt; ion-app, while the ion-popover is  attached to the body"}], "answers": [{"tags": [], "owner": {"reputation": 6485, "user_id": 1242317, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fHHUQ.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1242317/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1572531774, "creation_date": 1572531774, "answer_id": 58645396, "question_id": 58621832, "link": "https://stackoverflow.com/questions/58621832/position-of-ion-popover-over-ion-modal/58645396#58645396", "title": "position of ion-popover over ion-modal", "body": "<p>The problem seems to be that the <code>target</code> property of the click event is the shadowed parent, not the clicked item itself so it <a href=\"https://github.com/ionic-team/ionic/blob/master/core/src/components/popover/animations/ios.enter.ts#L20\" rel=\"nofollow noreferrer\">sets the wrong popover position</a>.</p>\n\n<p>Since you manually pass the event, a workaround would be to manually set the <code>target</code>. But because it's a read only field you need to do this with <code>Object.defineProperty</code> (replace <code>theClickedElement</code>):</p>\n\n<pre><code>Object.defineProperty(event, 'target', {value: theClickedElement})\n\nconst popoverElement = Object.assign(document.createElement('ion-popover'), {\n  component: 'info-popover',\n  event: event,      \n});\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9167214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3057f35491d0f54b47f1eae5ed075186?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Manders", "link": "https://stackoverflow.com/users/9167214/mike-manders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 58645396, "answer_count": 1, "score": 1, "last_activity_date": 1572534381, "creation_date": 1572426446, "last_edit_date": 1572528826, "question_id": 58621832, "link": "https://stackoverflow.com/questions/58621832/position-of-ion-popover-over-ion-modal", "title": "position of ion-popover over ion-modal", "body": "<p>I'm trying to display an information popover within the already opened modal.\nHowever the popover doesn't display in the right location. Even when the event is passed to the popoverController the location isn't correct.</p>\n\n<p>Is it possible to display the popover just under the information button?</p>\n\n<p>The code within the modal, where i call the popover:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const popoverElement = Object.assign(document.createElement('ion-popover'), {\n      component: 'info-popover',\n      event: event,      \n    });\n\ndocument.body.appendChild(popoverElement);\nreturn await popoverElement.present();\n\n</code></pre>\n\n<p>Screenshot of Popover above:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Mepgf.png\" alt=\"\"></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is what the DOM looks like. As you can see the modal is attached to <code>body</code> > <code>app-root</code> > <code>ion-app</code>. And the popover is attached just to <code>body</code>\n<img src=\"https://i.stack.imgur.com/cFs9G.png\" alt=\"\"></p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Turning off the shadow DOM in stencil can solve this issue, however I would prefer not to.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Component({\n  tag: \"component\",\n  styleUrl: \"component.css\",\n  shadow: false\n})\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 11010792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gwZa.jpg?s=128&g=1", "display_name": "abin peter", "link": "https://stackoverflow.com/users/11010792/abin-peter"}, "edited": false, "score": 0, "creation_date": 1572434132, "post_id": 58621981, "comment_id": 103556028, "body": "I got your point, Then how can i get each value correctly into an array while submitting the form.I am new to Angular,trying to find a solution"}], "tags": [], "owner": {"reputation": 3521, "user_id": 4300608, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YSsa5.png?s=128&g=1", "display_name": "ViqMontana", "link": "https://stackoverflow.com/users/4300608/viqmontana"}, "is_accepted": false, "score": 1, "last_activity_date": 1572426956, "creation_date": 1572426956, "answer_id": 58621981, "question_id": 58621824, "link": "https://stackoverflow.com/questions/58621824/creating-dynamic-text-box-in-angular-8-and-binding-the-value-to-component-while/58621981#58621981", "title": "Creating Dynamic text-box in Angular 8 and binding the value to component while form submit", "body": "<p>I think you're confused as to how this should be working. Your <code>contributeForm</code> only has a single <code>options</code> field so you can only bind a single value to this...perhaps you'd like to make this an array.</p>\n\n<p>Every time the <code>add()</code> functions is called, it'll get the current value for <code>options</code>. <code>options</code> is only bound to a single text box, which will be the last created one, i.e. the bottom text box. So each time you add a new options, the newest option text box will be bound to <code>options</code>.</p>\n\n<p>Take a look at <a href=\"https://stackblitz.com/edit/angular-ek9jjn\" rel=\"nofollow noreferrer\">this</a> StackBlitz and look at this console each time you add a new option. </p>\n"}], "owner": {"reputation": 397, "user_id": 11010792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gwZa.jpg?s=128&g=1", "display_name": "abin peter", "link": "https://stackoverflow.com/users/11010792/abin-peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1724, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1575668727, "creation_date": 1572426423, "last_edit_date": 1575668727, "question_id": 58621824, "link": "https://stackoverflow.com/questions/58621824/creating-dynamic-text-box-in-angular-8-and-binding-the-value-to-component-while", "title": "Creating Dynamic text-box in Angular 8 and binding the value to component while form submit", "body": "<p>I am trying to add a Dynamic text box when a button is pressed.The dynamic text box is added successfully but unable to grab all the values (dynamically added textbox's value) while form submit.it always bind the last updated text box's value. Following is my code snippet</p>\n\n<p>contribute.component.ts</p>\n\n<pre><code>export class ContributeComponent implements OnInit {\ncategories = [];\ncontribute = {};\nprivate options = [{ value: '' }];\nprivate contributeForm: FormGroup;\nconstructor(private formBuilder: FormBuilder) {}\n\nngOnInit() {\nthis.contributeForm = this.formBuilder.group({\n  question: new FormControl(),\n  category: new FormControl(),\n  options: new FormControl()\n});\nadd() {\nthis.options.push({ value: this.contributeForm.controls.options.value });\n}\n</code></pre>\n\n<p>and in my html file contribute.component.html</p>\n\n<pre><code>&lt;form [formGroup]=\"contributeForm\" (ngSubmit)=\"onSubmit(contributeForm.value)\"&gt;\n&lt;div class=\"form-group\"&gt;\n                &lt;label class=\"control-label col-sm-2\" for=\"message\"&gt;Options:&lt;/label&gt;\n                &lt;div class=\"col-sm-10 inputGroupContainer\"&gt;\n                    &lt;div *ngFor=\"let option of options; let in=index\" class=\"spacer\"&gt;\n                        &lt;div class=\"input-group\"&gt;\n                            &lt;span class=\"input-group-addon\"&gt;Option {{in+1}}&lt;/span&gt;\n                            &lt;input type=\"text\" class=\"form-control\" rows=\"4\" placeholder=\"Type your option here\"\n                                formControlName=\"options\" name=\"option\" [value]=\"options[in].value\"/&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"row\"&gt;&lt;/div&gt;\n\n                &lt;div class=\"col-sm-12 pull-right\"&gt;\n                    &lt;div class=\"col-sm-4\"&gt;&lt;/div&gt;\n                    &lt;div class=\"col-sm-4\"&gt;\n                        &lt;button class=\"btn btn-warning\" type=\"button\" (click)=\"add()\"&gt;Add option &lt;span\n                                class=\"glyphicon glyphicon-send\"&gt;&lt;/span&gt;\n                        &lt;/button&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"col-sm-4\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["angular", "typescript", "cordova", "ionic-framework", "ionic4"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 2910565, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XWZQ7.jpg?s=128&g=1", "display_name": "Seloka", "link": "https://stackoverflow.com/users/2910565/seloka"}, "is_accepted": false, "score": 0, "last_activity_date": 1572433929, "creation_date": 1572433929, "answer_id": 58624093, "question_id": 58621815, "link": "https://stackoverflow.com/questions/58621815/using-non-ionic-native-cordova-plugin/58624093#58624093", "title": "Using non ionic-native cordova plugin", "body": "<p>so instead of using <code>declare var locationservices: any</code> i used <code>declare var cordova: any;</code> </p>\n\n<pre><code>`declare var cordova: any;\ncordova.plugins.locationServices.geolocation.getCurrentPosition(\n      position =&gt; {\n         console.log(position)\n      }\n    );`\n</code></pre>\n\n<p>NB:the code will always result to undefined when tested on a browser, it needs to be tested on a device</p>\n"}], "owner": {"reputation": 153, "user_id": 2910565, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XWZQ7.jpg?s=128&g=1", "display_name": "Seloka", "link": "https://stackoverflow.com/users/2910565/seloka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572433929, "creation_date": 1572426382, "question_id": 58621815, "link": "https://stackoverflow.com/questions/58621815/using-non-ionic-native-cordova-plugin", "title": "Using non ionic-native cordova plugin", "body": "<p>i am trying to integrate [This]<a href=\"https://github.com/louisbl/cordova-plugin-locationservices\" rel=\"nofollow noreferrer\">https://github.com/louisbl/cordova-plugin-locationservices</a>  plugin into my ionic 4 app.</p>\n\n<p>since its a non ionic-native plugin, how do i go about calling its functions withing my typescript code?</p>\n\n<p>i have tried using  <code>declare var locationservices: any;\nlocationServices.geolocation.getCurrentPosition(geolocationSuccess,[geolocationError],geolocationOptions]);\n</code></p>\n\n<p>but i get an error that locationservices is not defined</p>\n"}, {"tags": ["javascript", "jquery", "angular", "typescript", "slickgrid"], "comments": [{"owner": {"reputation": 8565, "user_id": 1212166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d38e52d85ca4f638286390c9eff5111?s=128&d=identicon&r=PG", "display_name": "ghiscoding", "link": "https://stackoverflow.com/users/1212166/ghiscoding"}, "edited": false, "score": 0, "creation_date": 1572450083, "post_id": 58621767, "comment_id": 103565248, "body": "Adding a dropdown with actions was added recently in this <a href=\"https://ghiscoding.github.io/Angular-Slickgrid/#/angular-components\" rel=\"nofollow noreferrer\">Example 22</a> (last column). The component file for the code is <a href=\"https://github.com/ghiscoding/Angular-Slickgrid/blob/master/src/app/examples/grid-angular.component.ts\" rel=\"nofollow noreferrer\">here</a>. Adding a bootstrap dropdown in SlickGrid is not exactly straight forward because of how SlickGrid build the grid in the DOM, changing the <code>z-index</code> is also not enough, long story short, just go see that example 22."}, {"owner": {"reputation": 1, "user_id": 12295333, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DvQHFYIMglo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2k04lvHepfF027aQr2JwA3XrbpA/photo.jpg?sz=128", "display_name": "uzkhan786", "link": "https://stackoverflow.com/users/12295333/uzkhan786"}, "reply_to_user": {"reputation": 8565, "user_id": 1212166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d38e52d85ca4f638286390c9eff5111?s=128&d=identicon&r=PG", "display_name": "ghiscoding", "link": "https://stackoverflow.com/users/1212166/ghiscoding"}, "edited": false, "score": 0, "creation_date": 1572589742, "post_id": 58621767, "comment_id": 103613858, "body": "thank you for replying,but the thing is i am new in this coding field and as you said, i have seen this (example22) many time and i am not getting any idea how to deal with this,so if any  other option let me know it would be really helpful."}], "owner": {"reputation": 1, "user_id": 12295333, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DvQHFYIMglo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2k04lvHepfF027aQr2JwA3XrbpA/photo.jpg?sz=128", "display_name": "uzkhan786", "link": "https://stackoverflow.com/users/12295333/uzkhan786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572463134, "creation_date": 1572426222, "last_edit_date": 1572463134, "question_id": 58621767, "link": "https://stackoverflow.com/questions/58621767/is-there-any-method-to-display-dropdown-menu-with-different-options-in-table-cel", "title": "Is there any method to display dropdown menu with different options in table cell using typescript in angular slickgrid", "body": "<p>In the  given image below i want to display options={completed} when status is completed and similarly options={scheduled,suspended,abort} when status is scheduled and it should also change the label <strong>Status</strong> to selected <strong>option</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/OkErS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OkErS.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have created a custom component:</p>\n\n<p><em>custom-actionFormatter.component.html</em></p>\n\n<pre><code>&lt;!------------------custom-actionFormatter.component.html-----------------------&gt;\n\n    &lt;div id=\"myDrop\" style=\"position:absolute; z-index:12000;    margin: 2px 1000px 0;\"&gt;\n        &lt;ul class=\"mainDropdown\"&gt;\n            &lt;li class=\"dropdownCompleted\" id=\"completed\"&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;{{ dataContext.Status }}&lt;/li&gt;\n                    &lt;li role=\"separator\" class=\"divider\"&gt;&lt;/li&gt;\n                    &lt;li&gt;AAAAA&lt;/li&gt;\n                    &lt;li&gt;BBBBB&lt;/li&gt;\n                    &lt;li role=\"separator\" class=\"divider\"&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/li&gt;\n            &lt;li class=\"dropdownScheduled\" id=\"scheduled\"&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;{{ dataContext.Status }}&lt;/li&gt;\n                    &lt;li role=\"separator\" class=\"divider\"&gt;&lt;/li&gt;\n                    &lt;li&gt;CCCCC&lt;/li&gt;\n                    &lt;li&gt;DDDDD&lt;/li&gt;\n                    &lt;li role=\"separator\" class=\"divider\"&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><em>custom-actionFormatter.component.ts</em></p>\n\n<pre><code>/***************************custom-actionFormatter.component.ts**************/\n\n    import { Component, OnInit, ViewEncapsulation } from \"@angular/core\";\n    import * as $ from \"jquery\";\n\n    @Component({\n      templateUrl: \"./custom-actionFormatter.component.html\",\n      stylstrong texteUrls: [\"./custom-actionFormatter.component.css\"],\n      encapsulation: ViewEncapsulation.None\n    })\n    export class CustomActionFormatterComponent implements OnInit {\n      parent: any; // parent component context\n      row: number;\n      dataContext: any;\n      dropdownId = \"myDrop\";\n      dropDownToggleId = \"toggleDrop\";\n\n      constructor() {\n\n      }\n\n      ngOnInit() {\n\n       if (this.dataContext.Status === \"Completed\") {\n       document.getElementById(\"completed\").style.display == 'block';\n       document.getElementById(\"scheduled\").style.display == 'none';\n    }\n    if (this.dataContext.Status === \"Scheduled\") {\n       document.getElementById(\"completed\").style.display == 'none';\n       document.getElementById(\"scheduled\").style.display == 'block';\n    }\n    }\n    }\n</code></pre>\n\n<p>This is the main page where I want to display dropdown menu:</p>\n\n<p><em>running-schedule.component.ts</em></p>\n\n<pre><code>/***************************running-schedule.component.ts**************/\n\n    import {\n      Component,\n      OnInit,\n      Injectable,\n      ViewEncapsulation,\n      HostListener\n    } from \"@angular/core\";\n    import { Headers, RequestOptions } from \"@angular/http\";\n    import { Http, Response } from \"@angular/http\";\n\n    import {\n      Column,\n      GridOption,\n      AngularGridInstance,\n      Filters,\n      BsDropDownService,\n      ExtensionName,\n      FieldType,\n      Formatter,\n      Formatters,\n      Editors,\n      Statistic,\n      GridStateChange,\n      GridOdataService,\n      OperatorType,\n      OnEventArgs,\n      EditorValidator,\n\n      SelectOption,\n      AngularUtilService\n    } from \"../../modules/angular-slickgrid\";\n    import { RemoteServerCommunicationService } from \"./../../Services/ListView/RemoteServerCommunication.service\";\n    import { GlobalDataService } from \"./../../Services/global-data.service\";\n    import { PathStorageService } from \"./../../Services/ListView/path-storage.service\";\n    import settingPayLoadProcessing from \"./../../../assets/data/applicationSetting.json\"\n    import{CustomActionFormatterComponent}from '../custom-actionFormatter/custom-actionFormatter.component';\n    import * as $ from \"jquery\";\n    Component({\n      selector: \"app-running-schedule\",\n      templateUrl: \"./running-schedule.component.html\",\n      styleUrls: [\"./running-schedule.component.css\"],\n      encapsulation: ViewEncapsulation.None\n    })\n    @Injectable()\n    export class RunningScheduleComponentMenu implements OnInit {\n    columnDefinitions: Column[] = [];\n      gridOptions: GridOption = {};\n      dataset = [];\n    constructor(\n        private http: Http,\n        private remoteservercommunicationservice: RemoteServerCommunicationService,\n        public pathstorageservice: PathStorageService,\n        private globaldataservice: GlobalDataService,\n        private bsDropdown: BsDropDownService,\n        private angularUtilService: AngularUtilService\n      ) { }\n\n     ngOnInit() {\n       this.defineGrid();\n    }\n\n     angularGridReady(angularGrid: AngularGridInstance) {\n        this.angularGrid = angularGrid;\n     }\n\n     defineGrid() {\n        this.columnDefinitions = [\n\n          {\n            id: \"Status\",\n            name: \"Status\",\n            field: \"Status\",\n            minWidth: 100,\n            filterable: true,\n            type: FieldType.string,\n            formatter: Formatters.bsDropdown,\n            params: { label: 'Status' },\n            filter: {\n              collection: [\n                { value: \"\", labelKey: \"All\" },\n                { value: \"Completed\", labelKey: \"Completed\" },\n                { value: \"Abort\", labelKey: \"Abort\" },\n                { value: \"Scheduled\", labelKey: \"Scheduled\" },\n                { value: \"Suspended\", labelKey: \"Suspended\" },\n                { value: \"Inprogress\", labelKey: \"Inprogress\" }\n              ],\n              model: Filters.singleSelect\n            },\n            onCellClick: (e: Event, args: OnEventArgs) =&gt; {;\n              this.bsDropdown.render({\n                component:CustomActionFormatterComponent ,\n                args,\n               offsetLeft: 92,\n                offsetDropupBottom: 15,\n                parent: this, // provide this object to the child component so we can call a method from here if we wish\n              });\n            }\n        }\n        ];\n        this.gridOptions = {\n          asyncEditorLoading: false,\n          autoCommitEdit: false,\n          enableAutoResize: true,\n          autoEdit: true,\n        editable: true,\n          autoResize: {\n            containerId: \"demo-container\",\n            sidePadding: 15,\n            maxHeight: this.scrHeight - 125\n            // minHeight: 300,\n          },\n          // true by default\n          enableCellNavigation: true,\n          enableColumnPicker: true,\n          enableExcelCopyBuffer: true,\n          enableCheckboxSelector: true,\n          enableFiltering: true,\n          enableAsyncPostRender: true,\n          asyncPostRenderDelay: 0,\n          alwaysShowVerticalScroll: false,\n          params: {\n            angularUtilService: this.angularUtilService // provide the service to all at once (Editor, Filter, AsyncPostRender)\n          },\n          checkboxSelector: {\n            // you can toggle these 2 properties to show the \"select all\" checkbox in different location\n            hideInFilterHeaderRow: false,\n            hideInColumnTitleRow: true\n          },\n          rowSelectionOptions: {\n            // True (Single Selection), False (Multiple Selections)\n            selectActiveRow: false\n          },\n          pagination: {\n            pageSizes: [this.page],\n            pageSize: null, //defaultPageSize,\n            totalItems: 0\n          },\n          presets: {\n            pagination: { pageNumber: 1, pageSize: this.page }\n          },\n          backendServiceApi: {\n            service: new GridOdataService(),\n            process: query =&gt; this.getCustomerApiCall(query),\n            postProcess: response =&gt; {\n              this.getCustomerCallback(response);\n            }\n          }\n        };\n      }\n    }\n    }\n</code></pre>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "comments": [{"owner": {"reputation": 95, "user_id": 11855640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vfz5FaREW_I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerzRmeohnmf5xhOxxbFvLbXkc1DQ/photo.jpg?sz=128", "display_name": "Kedar Kulkarni", "link": "https://stackoverflow.com/users/11855640/kedar-kulkarni"}, "edited": false, "score": 0, "creation_date": 1572425133, "post_id": 58621405, "comment_id": 103551133, "body": "Why don&#39;t you setInterval and call it as soon as the video gets over."}, {"owner": {"reputation": 98, "user_id": 6716154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BF1D5.jpg?s=128&g=1", "display_name": "Checkium", "link": "https://stackoverflow.com/users/6716154/checkium"}, "edited": false, "score": 0, "creation_date": 1572427302, "post_id": 58621405, "comment_id": 103552264, "body": "Chromium automatically disables audio playback unless it was initiated by an user action or you&#39;ve previously played a video on the same site, there are a few workarounds such as playing a small empty audio file first"}, {"owner": {"reputation": 98, "user_id": 6716154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BF1D5.jpg?s=128&g=1", "display_name": "Checkium", "link": "https://stackoverflow.com/users/6716154/checkium"}, "edited": false, "score": 0, "creation_date": 1572427646, "post_id": 58621405, "comment_id": 103552462, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/50490304/how-to-make-audio-autoplay-on-chrome\">How to make audio autoplay on chrome</a>"}, {"owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "edited": false, "score": 0, "creation_date": 1572428425, "post_id": 58621405, "comment_id": 103552880, "body": "problem is at initial loading video is not playing in chrome browser"}, {"owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "reply_to_user": {"reputation": 98, "user_id": 6716154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BF1D5.jpg?s=128&g=1", "display_name": "Checkium", "link": "https://stackoverflow.com/users/6716154/checkium"}, "edited": false, "score": 0, "creation_date": 1572428834, "post_id": 58621405, "comment_id": 103553100, "body": "@Checkium no at initial loading chrome is blocking autoplay video but when you use muted its working fine. But i want to play video and audio at the same time"}, {"owner": {"reputation": 98, "user_id": 6716154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BF1D5.jpg?s=128&g=1", "display_name": "Checkium", "link": "https://stackoverflow.com/users/6716154/checkium"}, "edited": false, "score": 0, "creation_date": 1572428992, "post_id": 58621405, "comment_id": 103553195, "body": "@Rohit exactly, chrome blocks autoplay audio by default like I explained, read the question I linked"}, {"owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "reply_to_user": {"reputation": 98, "user_id": 6716154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BF1D5.jpg?s=128&g=1", "display_name": "Checkium", "link": "https://stackoverflow.com/users/6716154/checkium"}, "edited": false, "score": 0, "creation_date": 1572688934, "post_id": 58621405, "comment_id": 103641950, "body": "@Checkium thanks for the help... i have solve my problem by using muted in video tag and added audio button for unmute video"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "edited": false, "score": 0, "creation_date": 1572428235, "post_id": 58621470, "comment_id": 103552765, "body": "i had tried but still getting same problem autoplay is not working in chrome"}, {"owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "edited": false, "score": 0, "creation_date": 1572428298, "post_id": 58621470, "comment_id": 103552800, "body": "<code>&lt;video [vgMedia]=&quot;media&quot; #media id=&quot;video-player&quot; preload=&quot;auto&quot; autoplay=&quot;true&quot;&gt;             &lt;source src=&quot;https:&#47;&#47;############&quot; type=&quot;video&#47;mp4&quot; crossorigin=&quot;anonymous&quot;&gt;                      &lt;&#47;video&gt;</code>"}, {"owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "edited": false, "score": 0, "creation_date": 1578551696, "post_id": 58621470, "comment_id": 105476837, "body": "according to the chrome policy at the initial loading of video, only auto play will work not both( audio and video at the same time ). i have created the audio button if user want to listen audio of that video then only audio will play. It solve my problem."}], "tags": [], "owner": {"reputation": 167, "user_id": 9552369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XlGl_WJruG0/AAAAAAAAAAI/AAAAAAAAADI/wCF7j1MnzwE/photo.jpg?sz=128", "display_name": "Darwin Gonzalez", "link": "https://stackoverflow.com/users/9552369/darwin-gonzalez"}, "is_accepted": false, "score": 0, "last_activity_date": 1572425695, "last_edit_date": 1572425695, "creation_date": 1572425138, "answer_id": 58621470, "question_id": 58621405, "link": "https://stackoverflow.com/questions/58621405/is-there-any-way-to-autoplay-video-with-audio-in-chrome-in-angular/58621470#58621470", "title": "Is there any way to autoplay video with audio in chrome in angular", "body": "<p>If you are using Angular, you could use this external library <a href=\"https://github.com/videogular/videogular2\" rel=\"nofollow noreferrer\">Videogular</a>. It's very easy to use and you could configure almost everything related to the video player. </p>\n\n<p>Here you can see a live example of the use of this library <a href=\"https://stackblitz.com/edit/angular-videogular?file=app%2Fhello.component.ts\" rel=\"nofollow noreferrer\">live-demo</a></p>\n\n<p>All you have to do to \"autoplay\" the video is to put the parameter \"autoplay\" to <em>true</em> as you can see below:</p>\n\n<pre><code>&lt;video [vgMedia]=\"media\" #media id=\"singleVideo\" preload=\"auto\" autoplay=\"true\" controls&gt;\n</code></pre>\n\n<p>You can try this in the <a href=\"https://stackblitz.com/edit/angular-videogular?file=app%2Fhello.component.ts\" rel=\"nofollow noreferrer\">live-demo</a> adding this parameter.</p>\n"}], "owner": {"reputation": 61, "user_id": 9348348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0089dd8978288d0435768f2228e0546?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9348348/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 949, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572425695, "creation_date": 1572424866, "question_id": 58621405, "link": "https://stackoverflow.com/questions/58621405/is-there-any-way-to-autoplay-video-with-audio-in-chrome-in-angular", "title": "Is there any way to autoplay video with audio in chrome in angular", "body": "<p>i'm working on spa where i have to show banner video on top of the website. when loading video at initial phase is there any way to unmute the audio of video.</p>\n\n<p>I have tried to unmute video and override but it's not working on chrome browser. i have read article about chrome autoplay video blocking but still is there anyway to unmute video.</p>\n\n<p>tried below code</p>\n\n<pre><code>&lt;video autoplay preload=\"auto\" muted onloadedmetadata=\"this.muted = true\" oncanplay=\"this.play()\" id=\"video-player\"&gt;\n&lt;source src=\"https://###########\" type=\"video/mp4\" crossorigin=\"anonymous\"&gt;\n&lt;/video&gt;\n\nlet audioPlayer = &lt;HTMLVideoElement&gt; document.getElementById('video-player');\naudioPlayer.addEventListener('play', () =&gt; {\n  // audioPlayer.muted = true;\n  audioPlayer.play();\n  audioPlayer.muted = false;\n});\n\naudioPlayer.addEventListener('ended', () =&gt; {\n  this.showPlayBtn = true;\n})\n</code></pre>\n\n<p>i need to auto play video with audio in all browser.</p>\n\n<p>Any help will be appreciated. Thanks in advance!</p>\n"}, {"tags": ["reactjs", "typescript", "react-router", "jestjs"], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 5594492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e8866226fb038d2222eca991ea23a?s=128&d=identicon&r=PG&f=1", "display_name": "Safi Nettah", "link": "https://stackoverflow.com/users/5594492/safi-nettah"}, "is_accepted": true, "score": 2, "last_activity_date": 1572424895, "creation_date": 1572424895, "answer_id": 58621414, "question_id": 58621346, "link": "https://stackoverflow.com/questions/58621346/how-to-reuse-jest-mock-of-react-routers-usehistory/58621414#58621414", "title": "How to reuse jest mock of react-router&#39;s useHistory", "body": "<p>You can try with the <code>__mocks__</code> folder \n<a href=\"https://jestjs.io/docs/en/manual-mocks.html\" rel=\"nofollow noreferrer\">https://jestjs.io/docs/en/manual-mocks.html</a></p>\n"}], "owner": {"reputation": 5731, "user_id": 2646358, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/bJHBN.jpg?s=128&g=1", "display_name": "Philip Feldmann", "link": "https://stackoverflow.com/users/2646358/philip-feldmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1942, "favorite_count": 0, "accepted_answer_id": 58621414, "answer_count": 1, "score": 2, "last_activity_date": 1572432669, "creation_date": 1572424654, "last_edit_date": 1572432669, "question_id": 58621346, "link": "https://stackoverflow.com/questions/58621346/how-to-reuse-jest-mock-of-react-routers-usehistory", "title": "How to reuse jest mock of react-router&#39;s useHistory", "body": "<p>I am mocking the <code>useHistory</code> of <code>react-router-dom</code> in my test like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>jest.mock(\"react-router-dom\", () =&gt; ({\n  useHistory: () =&gt; ({\n    length: 13,\n    push: jest.fn(),\n    block: jest.fn(),\n    createHref: jest.fn(),\n    go: jest.fn(),\n    goBack: jest.fn(),\n    goForward: jest.fn(),\n    liten: jest.fn(),\n    replace: jest.fn(),\n    action: \"REPLACE\",\n    location: null\n  })\n}));\n</code></pre>\n\n<p>This works perfectly fine in a single test, but I need this for basically every single test and I don't want to copy it every single time.</p>\n\n<p>How can I reuse this mock? I've tried the obvious, moving it to a different file and exporting a function that creates the mock:</p>\n\n<p><code>export default () =&gt; jest.mock(\"react-router-dom\", () =&gt; ({...})</code> </p>\n\n<p>However, importing it and calling the function to create the mock results in an error.</p>\n\n<pre><code>import useHistoryMock from \"../../../testUtils/hooks/useHistory\";\nuseHistoryMock()\n</code></pre>\n\n<p>My component implementation then throws <code>TypeError: Cannot read property 'history' of undefined</code>, which it doesn't if I define the mock in the test file itself.</p>\n\n<p>What is a convenient way to reuse the mock? I am using typescript so preferably I would not want to break any compiler rules.</p>\n"}, {"tags": ["typescript", "vue.js"], "owner": {"reputation": 117, "user_id": 2794439, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/43a53ebb75569765411d692f41b1aca6?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond", "link": "https://stackoverflow.com/users/2794439/raymond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572424621, "creation_date": 1572424222, "last_edit_date": 1572424621, "question_id": 58621254, "link": "https://stackoverflow.com/questions/58621254/how-to-extend-type-of-options-property", "title": "How to extend type of $options property?", "body": "<p>I want to make the <code>$options</code> property of Vue instance well typed as possible. By default, this property typed as object <code>ComponentOptions&lt;Vue&gt;</code> with <code>string</code> keys and <code>any</code> values.</p>\n\n<p>I want to replace <code>any</code> with my custom type <code>GenericOption</code>. I trying to extend <code>$options</code> via modules augmentation according to the official Vue documentation, but it fails.</p>\n\n<pre><code>import Vue from 'vue';\n\ntype GenericOption = {\n  key: string,\n  value: string // only for testing purpose\n}\n\ndeclare module 'vue/types/vue' {\n  interface Vue {\n    readonly $options: GenericOption\n  }\n}\n</code></pre>\n\n<p>I expect that <code>$options</code> will overriden and extended, but got following error: </p>\n\n<blockquote>\n  <p>Subsequent property declarations must have the same type. Property\n  '$options' must be of type 'ComponentOptions,\n  DefaultMethods, DefaultComputed, PropsDefinition>, Record>', but here has type 'GenericOption'</p>\n</blockquote>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic3"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8483272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--AUpnJnEA1Q/AAAAAAAAAAI/AAAAAAAAABo/NQPuzJbWEq4/photo.jpg?sz=128", "display_name": "reza ridwansyah", "link": "https://stackoverflow.com/users/8483272/reza-ridwansyah"}, "edited": false, "score": 0, "creation_date": 1572425904, "post_id": 58621076, "comment_id": 103551490, "body": "if i set auth in app_initilzer. do i still need observable?"}, {"owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "reply_to_user": {"reputation": 1, "user_id": 8483272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--AUpnJnEA1Q/AAAAAAAAAAI/AAAAAAAAABo/NQPuzJbWEq4/photo.jpg?sz=128", "display_name": "reza ridwansyah", "link": "https://stackoverflow.com/users/8483272/reza-ridwansyah"}, "edited": false, "score": 0, "creation_date": 1572426779, "post_id": 58621076, "comment_id": 103551993, "body": "@rezaridwansyah I think you do, for instance when the auth token expires and the user is still logged in"}], "tags": [], "owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "is_accepted": false, "score": 1, "last_activity_date": 1572423506, "creation_date": 1572423506, "answer_id": 58621076, "question_id": 58620987, "link": "https://stackoverflow.com/questions/58620987/object-is-exist-with-value-but-when-access-the-property-returned-undefined/58621076#58621076", "title": "Object is exist with value, but when access the property returned undefined", "body": "<p>This is due to when the chrome console evaluates the object. If you open the object in your console, you'll see a tiny blue info icon. This will say:</p>\n\n<blockquote>\n  <p>Value was evaluated just now</p>\n</blockquote>\n\n<p>Basically what happens is that the object content changed between the time you logged it, and the time you opened it in your console. </p>\n\n<p>The login action is asynchronous, which means that the <code>loggedIn</code> property on the auth object will be set after the <code>ionViewDidLoad</code> is called. Perhaps a good thing would be to set the auth inside an <a href=\"https://angular.io/api/core/APP_INITIALIZER\" rel=\"nofollow noreferrer\"><code>APP_INITIALIZER</code></a> provider, or have some Observable on your auth on which you can listen for auth changes</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8483272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--AUpnJnEA1Q/AAAAAAAAAAI/AAAAAAAAABo/NQPuzJbWEq4/photo.jpg?sz=128", "display_name": "reza ridwansyah", "link": "https://stackoverflow.com/users/8483272/reza-ridwansyah"}, "edited": false, "score": 0, "creation_date": 1572425976, "post_id": 58621453, "comment_id": 103551526, "body": "in auth.service.ts i use isLoggedIn() :boolean{     return this.loggedIn;   } and still returning undefined"}], "tags": [], "owner": {"reputation": 147, "user_id": 9577782, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N820likR0FM/AAAAAAAAAAI/AAAAAAAACXk/FSHQqLxmb3c/photo.jpg?sz=128", "display_name": "Durai Vinoth", "link": "https://stackoverflow.com/users/9577782/durai-vinoth"}, "is_accepted": false, "score": 0, "last_activity_date": 1572426643, "last_edit_date": 1572426643, "creation_date": 1572425075, "answer_id": 58621453, "question_id": 58620987, "link": "https://stackoverflow.com/questions/58620987/object-is-exist-with-value-but-when-access-the-property-returned-undefined/58621453#58621453", "title": "Object is exist with value, but when access the property returned undefined", "body": "<p>1.you have colling this.loggedIn before assign so that it's undefined.<br>\nin your case write console.log(this.auth.loggedIn) after login. please check that scenario.</p>\n\n<p>2.for now, assign some value for loggedIn variable then print it will print a value  </p>\n\n<p><strong>loggedIn: boolean;</strong> =>  <strong>loggedIn: boolean=false;</strong> \n then print a value it will work</p>\n\n<p>in some other component </p>\n\n<pre><code> ngOnInit() {\n    console.log(this.auth.loggedIn)\n  }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8483272, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--AUpnJnEA1Q/AAAAAAAAAAI/AAAAAAAAABo/NQPuzJbWEq4/photo.jpg?sz=128", "display_name": "reza ridwansyah", "link": "https://stackoverflow.com/users/8483272/reza-ridwansyah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572426643, "creation_date": 1572423112, "question_id": 58620987, "link": "https://stackoverflow.com/questions/58620987/object-is-exist-with-value-but-when-access-the-property-returned-undefined", "title": "Object is exist with value, but when access the property returned undefined", "body": "<p>i find weird things. I have AuthService which saves authentication needs of my apps, included authentication token. </p>\n\n<pre><code>@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public modalCtrl:ModalController,public auth: AuthService) {\n\n  }\n\n  ionViewDidLoad() {\n    console.log(this.auth)\n    console.log(this.auth.loggedIn)\n    if(this.auth.loggedIn){\n      console.log(this.auth);\n      this.navCtrl.push(\"TabsPage\");\n    }    \n  }\n}\n</code></pre>\n\n<p>when i call </p>\n\n<pre><code>console.log(this.auth)\n</code></pre>\n\n<p>it returned <a href=\"https://i.stack.imgur.com/hbJzn.png\" rel=\"nofollow noreferrer\">authentication</a>\nbuth when i call</p>\n\n<pre><code>console.log(this.auth.loggedIn)\n</code></pre>\n\n<p>it return null </p>\n\n<p>this my auth.service.ts</p>\n\n<pre><code>import { Injectable, NgZone, Component } from '@angular/core';\nimport { Storage } from '@ionic/storage';\n\n// Import AUTH_CONFIG, Auth0Cordova, and auth0.js\nimport { AUTH_CONFIG } from './auth.config';\nimport Auth0Cordova from '@auth0/cordova';\nimport * as auth0 from 'auth0-js';\n\n@Injectable()\nexport class AuthService {\n  Auth0 = new auth0.WebAuth(AUTH_CONFIG);\n  Client = new Auth0Cordova(AUTH_CONFIG);\n  accessToken: string;\n  user: any;\n  loggedIn: boolean;\n  loading = true;\n\n  constructor(\n    public zone: NgZone,\n    private storage: Storage\n  ) {\n    this.storage.get('profile').then(user =&gt; this.user = user);\n    this.storage.get('access_token').then(token =&gt; this.accessToken = token);\n    this.storage.get('expires_at').then(exp =&gt; {\n      this.loggedIn = Date.now() &lt; JSON.parse(exp);\n      this.loading = false;\n    });\n\n  }\n\n  login() {\n    this.loading = true;\n    const options = {\n      scope: 'openid profile offline_access'\n    };\n    // Authorize login request with Auth0: open login page and get auth results\n    this.Client.authorize(options, (err, authResult) =&gt; {\n      if (err) {\n        throw err;\n      }\n      // Set access token\n      this.storage.set('access_token', authResult.accessToken);\n      this.accessToken = authResult.accessToken;\n      // Set access token expiration\n      const expiresAt = JSON.stringify((authResult.expiresIn * 1000) + new Date().getTime());\n      this.storage.set('expires_at', expiresAt);\n      // Set logged in\n      this.loading = false;\n      this.loggedIn = true;\n      // Fetch user's profile info\n      this.Auth0.client.userInfo(this.accessToken, (err, profile) =&gt; {\n        if (err) {\n          throw err;\n        }\n        this.storage.set('profile', profile).then(val =&gt;\n          this.zone.run(() =&gt; this.user = profile)\n        );\n      });\n    });\n  }\n\n  logout() {\n    this.storage.remove('profile');\n    this.storage.remove('access_token');\n    this.storage.remove('expires_at');\n    this.accessToken = null;\n    this.user = null;\n    this.loggedIn = false;\n  }\n\n  isLoggedIn() :boolean{\n    return this.loggedIn;\n  }\n}\n</code></pre>\n\n<p>i'm using ionic3 and auth0 authentication, previously i think that was my fault to not use public identifier on my property. but when i change the property to public, or create getter method that returned the property it still not working at all.</p>\n"}, {"tags": ["html", "angular", "typescript", "angular-material", "sidenav"], "answers": [{"tags": [], "owner": {"reputation": 20573, "user_id": 1643676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/418606a9471058ad35cb48144e582371?s=128&d=identicon&r=PG", "display_name": "Athanasios Kataras", "link": "https://stackoverflow.com/users/1643676/athanasios-kataras"}, "is_accepted": true, "score": 1, "last_activity_date": 1572425632, "last_edit_date": 1572425632, "creation_date": 1572424785, "answer_id": 58621383, "question_id": 58620904, "link": "https://stackoverflow.com/questions/58620904/angular-material-how-to-toggle-sidenav-when-the-trigger-is-in-a-different-compo/58621383#58621383", "title": "Angular Material: How to toggle sidenav when the trigger is in a different component", "body": "<p>There are three posible ways to communicate between components. The error you are getting is because there is not sidevav property in your component and no toggle function is declared on an undefined member.</p>\n\n<p>There are specific ways you can communicate between components.</p>\n\n<h2>Use the native event driven communication.</h2>\n\n<p>Parent to child through input (value), child to parent through output (event).</p>\n\n<pre><code>  //this is how to create an event emitter\n  @Output() toggle: EventEmitter&lt;any&gt; = new EventEmitter();\n\n  constructor() { }\n\n  emit() {\n      this.toggle.emit(null);\n  }\n</code></pre>\n\n<ul>\n<li>In your <strong>TopbarComponent</strong> you add the above code.</li>\n<li><p>In your <strong>AppComponent</strong> you bind to the toggle</p>\n\n<p></p></li>\n</ul>\n\n<p>and in the ts file you create the toggle function</p>\n\n<pre><code>toggle() {\n     this.firstSelected = !this.firstSelected;\n}\n</code></pre>\n\n<p>Then you pass the first selected value to your components and hide unhide accordingly.</p>\n\n<p>This is the official way. Check this solution working on <a href=\"https://stackblitz.com/edit/angular-material-sidenav-2-fix?file=src/app/components/sidebar-left/sidebar-left.component.ts\" rel=\"nofollow noreferrer\">stackblitz here</a></p>\n\n<h1>Use an event service</h1>\n\n<p>You can create an event service from which you can raise events and the toggle master can subscribe to them and toggle application wide. check for example <a href=\"https://stackoverflow.com/questions/45446724/angular-2-using-a-service-to-broadcast-an-event\">here</a></p>\n\n<h1>Use a libary to share state via stores</h1>\n\n<p>Check documentation <a href=\"https://blog.angular-university.io/angular-2-redux-ngrx-rxjs/\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 29, "user_id": 2139794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DAZal.png?s=128&g=1", "display_name": "JayP", "link": "https://stackoverflow.com/users/2139794/jayp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 58621383, "answer_count": 1, "score": 1, "last_activity_date": 1572425632, "creation_date": 1572422736, "question_id": 58620904, "link": "https://stackoverflow.com/questions/58620904/angular-material-how-to-toggle-sidenav-when-the-trigger-is-in-a-different-compo", "title": "Angular Material: How to toggle sidenav when the trigger is in a different component", "body": "<p>how do I toggle the sidenav from  another component?</p>\n\n<p>When the button/trigger is in the same .html file as the sidenav, it work just fine, but if I generate a new component, in my case I named them \"sidebar-left\" and \"topbar,\" it don't work.</p>\n\n<p>What I did is I generated components to separate them. I put the sidenav in the \"sidebar-left\" component and the button/trigger in \"topbar\" component.</p>\n\n<p><strong>sidebar-left.component.html</strong></p>\n\n<pre><code>&lt;mat-sidenav-container&gt;\n\n    &lt;mat-sidenav #sidenav mode=\"side\" [(opened)]=\"opened\" opened&gt;\n        &lt;h3&gt;Sidenav&lt;/h3&gt;\n    &lt;/mat-sidenav&gt;\n\n    &lt;mat-sidenav-content&gt;\n        &lt;app-dashboard&gt;&lt;/app-dashboard&gt;\n    &lt;/mat-sidenav-content&gt;\n\n&lt;/mat-sidenav-container&gt;\n</code></pre>\n\n<p><strong>topbar.component.html</strong></p>\n\n<pre><code>&lt;mat-toolbar&gt;\n    &lt;button (click)=\"sidenav.toggle()\" mat-raised-button&gt;Toggle Sidenav&lt;/button&gt;\n&lt;/mat-toolbar&gt;\n</code></pre>\n\n<p>I would like to be able to trigger the sidenav no matter where I trigger it inside the application.</p>\n\n<p>And when I do hit the toggle button, I'm having this error:</p>\n\n<pre><code>TopbarComponent.html:1 ERROR TypeError: Cannot read property 'toggle' of undefined\n    at Object.eval [as handleEvent] (TopbarComponent.html:2)\n    at handleEvent (core.js:43993)\n    at callWithDebugContext (core.js:45632)\n    at Object.debugHandleEvent [as handleEvent] (core.js:45247)\n    at dispatchEvent (core.js:29804)\n    at core.js:42925\n    at HTMLButtonElement.&lt;anonymous&gt; (platform-browser.js:2668)\n    at ZoneDelegate.invokeTask (zone-evergreen.js:391)\n    at Object.onInvokeTask (core.js:39680)\n    at ZoneDelegate.invokeTask (zone-evergreen.js:390)\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-material-sidenav-2\" rel=\"nofollow noreferrer\">Here is my not-working StackBlitz code</a></p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1572421926, "post_id": 58620706, "comment_id": 103549777, "body": "post your database structure."}, {"owner": {"reputation": 3, "user_id": 6385659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7885e5d89a35f8545ffb877affa21c?s=128&d=identicon&r=PG&f=1", "display_name": "CODEr", "link": "https://stackoverflow.com/users/6385659/coder"}, "reply_to_user": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1572426616, "post_id": 58620706, "comment_id": 103551899, "body": "@Ashish Hi, please take a look at the updated image above."}, {"owner": {"reputation": 652, "user_id": 9726037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtEYC.jpg?s=128&g=1", "display_name": "MichelDelpech", "link": "https://stackoverflow.com/users/9726037/micheldelpech"}, "edited": false, "score": 0, "creation_date": 1572427686, "post_id": 58620706, "comment_id": 103552487, "body": "is your getid variable undefined ? that my be the issue"}, {"owner": {"reputation": 3, "user_id": 6385659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7885e5d89a35f8545ffb877affa21c?s=128&d=identicon&r=PG&f=1", "display_name": "CODEr", "link": "https://stackoverflow.com/users/6385659/coder"}, "reply_to_user": {"reputation": 652, "user_id": 9726037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtEYC.jpg?s=128&g=1", "display_name": "MichelDelpech", "link": "https://stackoverflow.com/users/9726037/micheldelpech"}, "edited": false, "score": 0, "creation_date": 1572430368, "post_id": 58620706, "comment_id": 103553989, "body": "@Firebaser but I can get the value of <code>getid</code> in <code>console.log(getid);</code>"}], "owner": {"reputation": 3, "user_id": 6385659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7885e5d89a35f8545ffb877affa21c?s=128&d=identicon&r=PG&f=1", "display_name": "CODEr", "link": "https://stackoverflow.com/users/6385659/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572426570, "creation_date": 1572421825, "last_edit_date": 1572426570, "question_id": 58620706, "link": "https://stackoverflow.com/questions/58620706/how-to-query-in-angularfirestorecollection", "title": "How to query in AngularFirestoreCollection?", "body": "<p>How can I query data in <code>AngularFirestoreCollection</code> using <code>where()</code>? Here's what I have tried but to no avail. What I want is to display the current user's tasks when logged in.</p>\n\n<p>Firestore: <a href=\"https://i.stack.imgur.com/MePdx.png\" rel=\"nofollow noreferrer\">database</a></p>\n\n<pre><code>import { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport { Observable } from 'rxjs';\nimport { AngularFireAuth } from '@angular/fire/auth';\n\nexport interface Tasks {\n  title: string;\n  description: string ;\n}\n\n@Injectable({\n    providedIn: 'root'\n  })\n\nexport class getData {\n\nprivate taskCollection: AngularFirestoreCollection&lt;Tasks&gt;;\nprivate task: Observable&lt;Tasks[]&gt;;\n\nconstructor(\n  private afs: AngularFirestore,\n  private afAuth: AngularFireAuth\n) {\n  var getid = afAuth.auth.currentUser;\n\n  this.taskCollection = afs.collection&lt;Tasks&gt;('taskList', \n  ref =&gt; ref.where('user', '==', getid))\n\n   this.task = this.taskCollection.snapshotChanges().pipe(\n    map(actions =&gt; {\n      return actions.map(a =&gt; {\n        const data = a.payload.doc.data();\n        const id = a.payload.doc.id;\n        return { id, ...data};\n      });\n    })\n  );\n }\n}\n</code></pre>\n\n<p>However, when I check the console I'm getting an error: <code>ERROR Error: Uncaught (in promise): FirebaseError: [code=invalid-argument]: Function Query.where() called with invalid data. Unsupported field value: a custom P object</code>.</p>\n\n<p>Reference : <a href=\"https://stackoverflow.com/a/50958131/6385659\">https://stackoverflow.com/a/50958131/6385659</a></p>\n"}, {"tags": ["html", "angular", "typescript"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1572421143, "post_id": 58620526, "comment_id": 103549511, "body": "Please fix your indentation, your code as it stands is not readable."}, {"owner": {"reputation": 8098, "user_id": 5621827, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2DQqw.png?s=128&g=1", "display_name": "jitender", "link": "https://stackoverflow.com/users/5621827/jitender"}, "edited": false, "score": 1, "creation_date": 1572421389, "post_id": 58620526, "comment_id": 103549589, "body": "can you explain <code>But when I click Agent radio button It display relevant data for Hospital radio button</code>"}, {"owner": {"reputation": 1739, "user_id": 6561293, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/RusOP.jpg?s=128&g=1", "display_name": "Akash Agrawal", "link": "https://stackoverflow.com/users/6561293/akash-agrawal"}, "edited": false, "score": 1, "creation_date": 1572421609, "post_id": 58620526, "comment_id": 103549660, "body": "Could you try by giving local reference (#someName) to your radios and pass the value in the checktype function?"}], "answers": [{"comments": [{"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "reply_to_user": {"reputation": 171, "user_id": 6494984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3in1t.jpg?s=128&g=1", "display_name": "usenanayake", "link": "https://stackoverflow.com/users/6494984/usenanayake"}, "edited": false, "score": 0, "creation_date": 1572421762, "post_id": 58620589, "comment_id": 103549720, "body": "You are welcome. I answered this first and then got 2 downvotes, not sure why the hatred!"}, {"owner": {"reputation": 9918, "user_id": 5695162, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZCKFs.jpg?s=128&g=1", "display_name": "Vikas", "link": "https://stackoverflow.com/users/5695162/vikas"}, "edited": false, "score": 2, "creation_date": 1572423259, "post_id": 58620589, "comment_id": 103550328, "body": "Why use two-way data binding for input control at all? A simple solution would be to pass a custom value to the event handler, Something like <a href=\"https://stackblitz.com/edit/angular-8yd6jq?file=src/app/app.component.html\" rel=\"nofollow noreferrer\">this</a>"}], "tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": true, "score": 2, "last_activity_date": 1572421395, "creation_date": 1572421395, "answer_id": 58620589, "question_id": 58620526, "link": "https://stackoverflow.com/questions/58620526/angular-click-event-binding-is-not-working-properly/58620589#58620589", "title": "Angular click event binding is not working properly", "body": "<p>Replace <code>(click)</code> by <code>(ngModelChange)</code></p>\n\n<p>Try like this:</p>\n\n<p><strong><a href=\"https://stackblitz.com/edit/angular-vj2se5?embed=1&amp;file=src/app/app.component.html\" rel=\"nofollow noreferrer\">Working Demo</a></strong></p>\n\n<pre><code>&lt;input type=\"radio\" name=\"colors\" [(ngModel)]=\"typing\" (ngModelChange)= \"checktype(typing)\" value=\"Agent\"&gt;Agent&lt;br&gt;\n&lt;input type=\"radio\" name=\"colors\" [(ngModel)]=\"typing\" (ngModelChange)= \"checktype(typing)\" value=\"Hospital\" &gt;Hospital\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8098, "user_id": 5621827, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2DQqw.png?s=128&g=1", "display_name": "jitender", "link": "https://stackoverflow.com/users/5621827/jitender"}, "is_accepted": false, "score": 2, "last_activity_date": 1572421658, "creation_date": 1572421658, "answer_id": 58620658, "question_id": 58620526, "link": "https://stackoverflow.com/questions/58620526/angular-click-event-binding-is-not-working-properly/58620658#58620658", "title": "Angular click event binding is not working properly", "body": "<p>Use <code>change</code> event instead </p>\n\n<pre><code>&lt;input type=\"radio\" name=\"colors\" [(ngModel)]=\"typing\" (change)= \"checktype(typing)\" value=\"Agent\"&gt;Agent&lt;br&gt;\n  &lt;input type=\"radio\" name=\"colors\" [(ngModel)]=\"typing\" (change)= \"checktype(typing)\" value=\"Hospital\" &gt;Hospital\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-a4px17\" rel=\"nofollow noreferrer\">demo</a></p>\n"}], "owner": {"reputation": 171, "user_id": 6494984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3in1t.jpg?s=128&g=1", "display_name": "usenanayake", "link": "https://stackoverflow.com/users/6494984/usenanayake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 0, "accepted_answer_id": 58620589, "answer_count": 2, "score": 2, "last_activity_date": 1572421658, "creation_date": 1572421053, "last_edit_date": 1572421318, "question_id": 58620526, "link": "https://stackoverflow.com/questions/58620526/angular-click-event-binding-is-not-working-properly", "title": "Angular click event binding is not working properly", "body": "<p>I want to get relevant selections when radio button clicks. my relevant files are as below.</p>\n\n<p>app.component.html      </p>\n\n<pre><code> &lt;div class=\"col-md-3\"&gt;\n &lt;b&gt;Select Catogory&lt;/b&gt;&lt;br&gt;\n  &lt;input type=\"radio\" name=\"colors\" [(ngModel)]=\"typing\" (click)= \"checktype(typing)\" value=\"Agent\"&gt;Agent&lt;br&gt;\n  &lt;input type=\"radio\" name=\"colors\" [(ngModel)]=\"typing\" (click)= \"checktype(typing)\" value=\"Hospital\" &gt;Hospital\n  &lt;select&gt;                                                                                                                                          \n    &lt;option [(value)]=\"agent\" *ngFor=\"let agent of agents\"&gt;{{agent}}&lt;/option&gt;\n  &lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>app.component.ts</p>\n\n<pre><code>checktype(typing){\n   console.log(typing)\n   if(typing==\"Agent\"){\n    this.agents=[\"amila\",\"kasun\", \"ayesh\"]\n    console.log(typing)\n  }else{\n   this.agents=[\"hemas\",\"general\", \"Asiri\"]\n   console.log(typing)\n   }\n  }\n</code></pre>\n\n<p>But when I click Agent radio button It display relevant data for Hospital radio button. I can't figure out what is the wrong with code. Any one can help me? Are there any mistakes done by me?</p>\n"}, {"tags": ["javascript", "node.js", "json", "angular", "typescript"], "comments": [{"owner": {"reputation": 4770, "user_id": 318765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q81vS.jpg?s=128&g=1", "display_name": "mgutt", "link": "https://stackoverflow.com/users/318765/mgutt"}, "edited": false, "score": 0, "creation_date": 1572422122, "post_id": 58620498, "comment_id": 103549876, "body": "The title does not contain a question!"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "reply_to_user": {"reputation": 4770, "user_id": 318765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q81vS.jpg?s=128&g=1", "display_name": "mgutt", "link": "https://stackoverflow.com/users/318765/mgutt"}, "edited": false, "score": 0, "creation_date": 1572452072, "post_id": 58620498, "comment_id": 103566447, "body": "Quentin sir , Title include error , question is also for solution of that error"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572421917, "post_id": 58620645, "comment_id": 103549772, "body": "Thanks Sourav Golui please suggest me any book or article"}, {"owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572422157, "post_id": 58620645, "comment_id": 103549896, "body": "You are welcome. please check this source code. <a href=\"https://github.com/souravgolui/matDash\" rel=\"nofollow noreferrer\">github.com/souravgolui/matDash</a>. This is in MongoDB."}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572422401, "post_id": 58620645, "comment_id": 103549982, "body": ":-) Thanks for sharing  Sir &quot; Sourav Golui&quot; please suggest me one thing more ,, i am doing my final year project , i learn and used SQL and sql queries most of the time , so there are many articles ,, as in your also with mongodb ? shoud i use mongodb or Mysql?"}, {"owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572424760, "post_id": 58620645, "comment_id": 103550981, "body": "&quot; shoud i use mongodb or Mysql? &quot;. its depends on your project. Mysql is a relational database and MongoDB is non relational database. if you use MySQL no matter ."}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572431561, "post_id": 58620645, "comment_id": 103554610, "body": "Thanks Dear Sir &quot;Sourav Golui &quot; With replacing your above mentioned corrected code that error gone but new error shows please help me , look once again &quot;User Registerdundefined&quot;"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572431956, "post_id": 58620645, "comment_id": 103554810, "body": "in console this error shows &quot;{loggedin: false} loggedin: false <b>proto</b>: Object&quot;,"}, {"owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572444707, "post_id": 58620645, "comment_id": 103562015, "body": "Now you can check if <code>loggedin</code> is  <code>false</code> show some error message and if <code>true</code> now it is logged in"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572445399, "post_id": 58620645, "comment_id": 103562444, "body": "Thanks  Dear Sir &quot; Sourav Golui&quot;"}, {"owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572445479, "post_id": 58620645, "comment_id": 103562501, "body": "You are welcome . can you please approve and up vote this answer :)"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572452181, "post_id": 58620645, "comment_id": 103566516, "body": "Surely Sir i did upvote but unfortunately this option does not allow me to public  my vote because of new in this platform ,"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572452332, "post_id": 58620645, "comment_id": 103566592, "body": "i use console.log(username) api receives correct data but unfortunately it generates an error , i think this may be SQL query issue or logical issue to matching the values from sql database ? is that please have a look"}], "tags": [], "owner": {"reputation": 393, "user_id": 8564803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LCqnspc903o/AAAAAAAAAAI/AAAAAAAABXI/QHq0K51BuM0/photo.jpg?sz=128", "display_name": "Sourav Golui", "link": "https://stackoverflow.com/users/8564803/sourav-golui"}, "is_accepted": false, "score": 0, "last_activity_date": 1572421932, "last_edit_date": 1572421932, "creation_date": 1572421620, "answer_id": 58620645, "question_id": 58620498, "link": "https://stackoverflow.com/questions/58620498/i-am-getting-this-error-error-error-code-200-message-http-failure-during-par/58620645#58620645", "title": "I am getting this error &quot; ERROR Error Code: 200 Message: Http failure during parsing for http://localhost:3000/login&quot;", "body": "<p>Your back-end API is totally wrong. If you want to use session in this is not make seance. If you call this login API form a mobile device ??? then what happens ??? and you are not returning anything from back-end. Just rewrite the API. Why you use <code>res.end()</code> it work like <code>exit</code></p>\n\n<pre><code>app.post('/login',(req,res)=&gt;{\nvar username = req.body.username;\nvar password = req.body.password;\nif(username&amp;&amp;password){\n    con.query('SELECT * FROM register WHERE username= ? AND password=?',[username,password],(error,results,fields)=&gt;{\n            if(results.lenghtL&gt;0){\n                res.json({loggedin: true, username: username});\n            }\n            else{\n                res.json({loggedin: false});\n            }\n\n        });\n    }\n    else {\n        res.json({loggedin: false});\n    }\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572422007, "post_id": 58620669, "comment_id": 103549808, "body": "responseType: &#39;text&#39; sir i did paste this code , &quot;responseType:&quot; generate an error is anything /module file need to import ?"}, {"owner": {"reputation": 240, "user_id": 8557136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9ae2974fba531b03c779064c095c17?s=128&d=identicon&r=PG&f=1", "display_name": "ajaykumar mp", "link": "https://stackoverflow.com/users/8557136/ajaykumar-mp"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572422304, "post_id": 58620669, "comment_id": 103549950, "body": "try using this { headers, responseType: &#39;text&#39; as &#39;json&#39; }"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572422467, "post_id": 58620669, "comment_id": 103550008, "body": "(property) responseType: &quot;arraybuffer&quot;"}, {"owner": {"reputation": 240, "user_id": 8557136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9ae2974fba531b03c779064c095c17?s=128&d=identicon&r=PG&f=1", "display_name": "ajaykumar mp", "link": "https://stackoverflow.com/users/8557136/ajaykumar-mp"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572423629, "post_id": 58620669, "comment_id": 103550481, "body": "Please send me the complete error, so that i can have a look at it. thanks"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572428383, "post_id": 58620669, "comment_id": 103552855, "body": "ERROR in src/app/shared/login.service.ts(24,81): error TS2345: Argument of type &#39;{ this: any; responseType: &quot;json&quot;; }&#39; is not assignable to parameter of type &#39;{ headers?: HttpHeaders | { [header: string]: string | string[]; }; observe?: &quot;body&quot;; params?: HttpParams | { [param: string]: string | string[]; }; reportProgress?: boolean; responseType?: &quot;json&quot;; withCredentials?: boolean; }&#39;."}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572428440, "post_id": 58620669, "comment_id": 103552887, "body": "httpOptions={    headers: new HttpHeaders({     &#39;content-type&#39;:&#39;application/json&#39;   }) } //httpCrud Operations For RestFull Api login(logindata:any): Observable &lt;Login&gt; {    return this.http.post&lt;Login&gt;(this.apiUrl+&#39;/login&#39;,JSON.stringify(lo&zwnj;&#8203;gindata),{ this.httpOptions, responseType: &#39;json&#39; })   .pipe(     retry(2),     catchError(this.handleError)   ) };"}, {"owner": {"reputation": 240, "user_id": 8557136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9ae2974fba531b03c779064c095c17?s=128&d=identicon&r=PG&f=1", "display_name": "ajaykumar mp", "link": "https://stackoverflow.com/users/8557136/ajaykumar-mp"}, "reply_to_user": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572428667, "post_id": 58620669, "comment_id": 103553013, "body": "no it should be like   this.http.post&lt;Login&gt;(this.apiUrl+&#39;/login&#39;,JSON.stringify(lo&zwnj;&#8203;gindata),{ headers: this.httpOptions, responseType: &#39;text&#39; })"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572429738, "post_id": 58620669, "comment_id": 103553624, "body": "vs code highlight error on &quot;header:&quot; -&gt; &quot;(property) headers?: HttpHeaders | {     [header: string]: string | string[]; }&quot;"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572429854, "post_id": 58620669, "comment_id": 103553680, "body": "While in console this error shows &quot;      ERROR in src/app/shared/login.service.ts(22,23): error TS2355: A function whose declared type is neither &#39;void&#39; nor &#39;any&#39; must return a value.     src/app/shared/login.service.ts(24,73): error TS2322: Type &#39;{ headers: HttpHeaders; }&#39; is not assignable to type &#39;HttpHeaders | { [header: string]: string | string[]; }&#39;.       Type &#39;{ headers: HttpHeaders; }&#39; is not assignable to type &#39;{ [header: string]: string | string[]; }&#39;.         .&quot;"}, {"owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "edited": false, "score": 0, "creation_date": 1572431679, "post_id": 58620669, "comment_id": 103554682, "body": "Thanks Alot Dear sir , i did change api code with above mentioned code of sir &quot; Sourav Golui &quot;  now new error just alert not shows in console &quot;User Registerdundefined&quot;"}], "tags": [], "owner": {"reputation": 240, "user_id": 8557136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9ae2974fba531b03c779064c095c17?s=128&d=identicon&r=PG&f=1", "display_name": "ajaykumar mp", "link": "https://stackoverflow.com/users/8557136/ajaykumar-mp"}, "is_accepted": false, "score": -1, "last_activity_date": 1572421697, "creation_date": 1572421697, "answer_id": 58620669, "question_id": 58620498, "link": "https://stackoverflow.com/questions/58620498/i-am-getting-this-error-error-error-code-200-message-http-failure-during-par/58620669#58620669", "title": "I am getting this error &quot; ERROR Error Code: 200 Message: Http failure during parsing for http://localhost:3000/login&quot;", "body": "<p>This issue is not at the node side, it's at the Angular side\nWhile sending the request you should also mention what's the response you are expecting, Since you have not mentioned anything, you are getting this error\nFind the below code which resolves you issue</p>\n\n<pre><code>login(logindata:any): Observable &lt;Login&gt; {\n\n  return this.http.post&lt;Login&gt;(this.apiUrl+'/login',JSON.stringify(logindata),{ this.httpOptions, responseType: 'text' })\n  .pipe(\n    retry(2),\n    catchError(this.handleError)\n  ) };\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 11812564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvuxX.jpg?s=128&g=1", "display_name": "Saad Abbasi", "link": "https://stackoverflow.com/users/11812564/saad-abbasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574789139, "creation_date": 1572420943, "last_edit_date": 1574789139, "question_id": 58620498, "link": "https://stackoverflow.com/questions/58620498/i-am-getting-this-error-error-error-code-200-message-http-failure-during-par", "title": "I am getting this error &quot; ERROR Error Code: 200 Message: Http failure during parsing for http://localhost:3000/login&quot;", "body": "<p>This is my Login.component.html pass formdata to OnSubmit method  i want to send formdata from angular front end application and want to login if username and password match to existing registered persons (in mysql)</p>\n\n<p>****This is angular Reactive login form****</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;form [formGroup]=\"loginForm\" class=\"form-horizontal\" (ngSubmit)=\"onSubmit()\"&gt;\n  &lt;div class=\"panel panel-primary pb-3\"&gt;\n    &lt;div class=\"panel-heading\"&gt;\n      &lt;h3 class=\"panel-title\"&gt;Instrutors Login Form&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"pane-body\"&gt;\n      &lt;div class=\"form-group \"&gt;\n        &lt;label class=\"col-sm-2 control-label\" for=\"username\"&gt;User Name:&lt;/label&gt;\n        &lt;div class=\"col-md-8\"&gt;\n          &lt;input type=\"text\" id=\"username\" formControlName=\"username\" class=\"form-control\" ng-model=\"mymdl\"&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n          &lt;label class=\"col-sm-2 control-label\" for=\"password\"&gt;Password:&lt;/label&gt;\n          &lt;div class=\"col-md-8\"&gt;\n            &lt;input type=\"password\" id=\"password\" formControlName=\"password\" class=\"form-control\"&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;div class=\"panel-footer\"&gt;\n        &lt;button type=\"submit\"&gt;login&lt;/button&gt; &lt;p&gt; &lt;a routerLink=\"/register\"&gt;Signup&lt;/a&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>A This is login.component.ts file it get the form values and pass to the service to generate server request </p>\n\n<pre><code>//this runs on  \"http://localhost:4200/login/login\"\n\nimport { Component, OnInit } from '@angular/core';\nimport {FormBuilder} from '@angular/forms';\nimport {LoginService} from '../shared/login.service'\nimport { Login } from '../shared/login';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n  information:any;\n  loginForm = this.fb.group({\n    username: [''],\n    password: ['']\n  });\n\n\n  constructor(\n\n              private  api : LoginService,\n              private fb : FormBuilder\n    ) {}\n\n  ngOnInit() {\n  }\n\n  onSubmit():any{\n\n      this.api.login(this.loginForm.value).subscribe((data)=&gt;{\n        alert(\"User Registerd\"+this.loginForm.value.firstname)\n      });\n    }\n</code></pre>\n\n<p>This is login.service.ts file  it uses http method to call the service </p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport {HttpClient,HttpHeaders} from '@angular/common/http';\nimport {Observable,throwError} from 'rxjs';\nimport {retry,catchError} from'rxjs/operators';\nimport{Login} from './login';\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginService {\n\n  apiUrl = 'http://localhost:3000';\n\nconstructor(private http:HttpClient) { }\n\n//httpOptions\nhttpOptions={ \n  headers: new HttpHeaders({\n    'content-type':'application/json'\n  })\n}\n//httpCrud Operations For RestFull Api\nlogin(logindata:any): Observable &lt;Login&gt; {\n\n  return this.http.post&lt;Login&gt;(this.apiUrl+'/login',JSON.stringify(logindata),this.httpOptions)\n  .pipe(\n    retry(2),\n    catchError(this.handleError)\n  ) };\n</code></pre>\n\n<p>Node Api files with database connection</p>\n\n<pre><code>var express = require('express');\nvar db = require('mysql');\nvar http = require('http');\nvar bodyparser = require('body-parser');\nconst cors = require('cors');\nvar session = require('express-session');\nvar path = require('path');\n\n//starting server\nvar app = express();\napp.use(cors());\n\n//creating database connection\nvar con = db.createConnection(\n    {\n        host: 'localhost',\n        user: \"root\",\n        password:\"\",\n        database: \"angular\"\n    }\n);\napp.use(session({\n    secret: 'secret',\n    resave: true,\n    saveUninitialized: true\n}));\n//body parser for JSON format data\napp.use(bodyparser.json());\napp.use(bodyparser.urlencoded({\n    extended:true\n}));\n\napp.post('/login',(req,res)=&gt;{\n    var username = req.body.username;\n    var password = req.body.password;\n    if(username&amp;&amp;password){\n        con.query('SELECT * FROM register WHERE username= ? AND password=?',[username,password],(error,results,fields)=&gt;{\n            if(results.lenghtL&gt;0){\n                console.log('user logged in');\n                req.session.loggedin = true;\n                req.session.username = username;\n                res.redirect('/home');\n\n            }\n            else{\n                res.send(\"incorrect data \");\n            }\n        res.end();\n        });\n    }\n    else {\n        res.send(\"Please Enter Username and password\");\n        res.end();\n    }\n});\napp.get('/home', function(request, response) {\n    if (request.session.loggedin) {\n        response.send('Welcome back, ' + request.session.username + '!');\n    } else {\n        response.send('Please login to view this page!');\n    }\n    response.end();\n});\n\napp.listen(3000,()=&gt;{\n    console.log(\"listining on port 3000\");\n});\n</code></pre>\n"}, {"tags": ["angular", "typescript", "lazy-loading"], "comments": [{"owner": {"reputation": 4016, "user_id": 2202748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9tSQE.jpg?s=128&g=1", "display_name": "Joel Joseph", "link": "https://stackoverflow.com/users/2202748/joel-joseph"}, "edited": false, "score": 0, "creation_date": 1572414738, "post_id": 58619331, "comment_id": 103547510, "body": "first your <code>app.component.ts</code> looks  nothing like a component  it must be app.module.ts. make sure you export and import <code>@NgModule({  imports: [RouterModule.forRoot(routes)],  exports: [RouterModule] })   export class AppRoutingModule {}</code> in app.routes.ts ( should have been app.routing.module.ts by  the way) and just import  <code>AppRoutingModule</code> to the <code>app.module.ts</code>"}, {"owner": {"reputation": 1634, "user_id": 9380944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee6d96ba0c97cf891345b066dcbac7d?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Prajapati", "link": "https://stackoverflow.com/users/9380944/ankit-prajapati"}, "edited": false, "score": 1, "creation_date": 1572415521, "post_id": 58619331, "comment_id": 103547697, "body": "have you added <code>&lt;router-outlet&gt;</code> in <code>app.component.html</code> ?, also show the <code>HOME_ROUTES</code> array."}], "owner": {"reputation": 710, "user_id": 4592670, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/629be5836903c3df12ed05f53008f57e?s=128&d=identicon&r=PG&f=1", "display_name": "bschmitty", "link": "https://stackoverflow.com/users/4592670/bschmitty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572415142, "creation_date": 1572414016, "last_edit_date": 1572415142, "question_id": 58619331, "link": "https://stackoverflow.com/questions/58619331/angular-4-lazy-loading-components-with-separate-imported-modules-not-loading-no", "title": "Angular 4 lazy loading components with separate imported modules not loading. No console errors", "body": "<p>I am working to lazy load each page of my Angular component. But I am having some issues: when the page loads, the screen is just blank with no console errors or anything... I am trying to use one module per reusable component but doing this is causing the issue.</p>\n\n<p>app.component.ts</p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { LocalStorageModule } from 'angular-2-local-storage';\nimport { AuthHttp, provideAuth } from 'angular2-jwt';\nimport { HttpModule } from '@angular/http';\nimport { RouterModule } from '@angular/router';\n\nimport { MAIN_SITE_ROUTES } from './app.routes';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  imports: [\n    HttpModule,\n    BrowserModule,\n    RouterModule.forRoot(MAIN_SITE_ROUTES),\n    LocalStorageModule.withConfig({\n       prefix: 'my-app',\n       storageType: 'localStorage'\n    })\n  ],\n  declarations: [\n    // main component\n    AppComponent\n  ],\n  providers: [\n    AuthHttp,\n    provideAuth({\n      headerName: 'Authorization',\n      headerPrefix: 'bearer',\n      tokenName: 'token',\n      tokenGetter: (() =&gt; localStorage.getItem('id_token')),\n      globalHeaders: [{ 'Content-Type': 'application/json' }],\n      noJwtError: true\n    })\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n</code></pre>\n\n<p>app.routes.ts</p>\n\n<pre><code>import { Routes } from '@angular/router';\n\nexport const MAIN_SITE_ROUTES: Routes = [\n  { path: '', loadChildren: './mainSite/pages/home/home.module#HomeModule'},\n  { path: 'about', loadChildren: './mainSite/pages/about/about.module#AboutModule'},\n]\n</code></pre>\n\n<p>home.module.ts</p>\n\n<pre><code>import { CommonModule } from \"@angular/common\";\nimport { RouterModule } from \"@angular/router\";\nimport { NgModule } from \"@angular/core\";\nimport { HOME_ROUTES } from \"./home.routes\";\nimport { HomeComponent } from \"./home.component\";\nimport { HomeService } from \"./home.service\";\n\nimport { SettingsAdminService } from '../../../adminSite/pages/settings/settings.service';\nimport { PageSetupService } from '../../../services/pageSetup';\nimport { UtilitiesService } from '../../../services/utilities';\n\nimport { LoaderModule } from \"../../../sharedComponents/loader/loader.component\";\nimport { ErrorModule } from \"../../../sharedComponents/error/error.component\";\nimport { ChangeNoticeModule } from \"../../../sharedComponents/changeNotice/change-notice.component\";\nimport { AdminModalModule } from \"../../../sharedComponents/modal/admin-modal.component\";\nimport { NavigationModule } from \"../../../sharedComponents/navigation/navigation.component\";\n\n\n@NgModule({\n    declarations: [HomeComponent],\n    providers: [\n        HomeService,\n        SettingsAdminService,\n        PageSetupService, \n        UtilitiesService\n    ],\n    imports: [\n        CommonModule,\n        LoaderModule,\n        ErrorModule,\n        NavigationModule,\n        ChangeNoticeModule,\n        AdminModalModule,\n        RouterModule.forChild(HOME_ROUTES)\n    ]\n})\n\nexport class HomeModule { }\n</code></pre>\n\n<p>Is there anything I'm missing to get the page to load??? </p>\n"}, {"tags": ["angular", "typescript", "unit-testing", "jasmine", "angular6"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572415174, "post_id": 58619284, "comment_id": 103547611, "body": "Not related to your issue but your use of <code>: Object</code> as a type annotation is a bad practice and corresponds to a misunderstanding of the language. Remove it."}, {"owner": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572415357, "post_id": 58619284, "comment_id": 103547645, "body": "@AluanHaddad in the actual app the types are defined as something more meaningful, I only added <code>: Object</code> here for demonstration purposes. It&#39;s not relevant to the question."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572415505, "post_id": 58619284, "comment_id": 103547689, "body": "But your annotation is actually removing information. I agree that importing arbitrary types into the example would be bad, but why annotate when the compiler will infer something better?"}], "answers": [{"comments": [{"owner": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572417464, "post_id": 58619472, "comment_id": 103548216, "body": "Could you please elaborate on the way I spy vs your suggestion? I followed one of the examples from <a href=\"https://v6.angular.io/guide/testing#angular-testbed\" rel=\"nofollow noreferrer\">v6.angular.io/guide/testing#angular-testbed</a> (<code>Ctrl+f</code> for <code>jasmine.SpyObj&lt;ValueService&gt;</code> as an example). In your example is it still possible to assert on the spy tracking properties? E.g. <code>expect(dependencyService.postData.calls.count()).toBe(1)</code>"}, {"owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "reply_to_user": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572418759, "post_id": 58619472, "comment_id": 103548627, "body": "@Ash My bad. I didn&#39;t notice that you injected a <code>dependencyServiceSpyObj</code> in the <code>providers</code> array. Your approach would also work. Sorry about that."}, {"owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "reply_to_user": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 1, "creation_date": 1572418877, "post_id": 58619472, "comment_id": 103548677, "body": "If you want to check other properties of the spy (as in my approach), you could assign the spy to a variable and check:       <code>const postDataSpy = spyOn(dependencyService, &#39;postData&#39;).and.returnValue(...);     expect(postDataSpy.calls.count()).toBe(1);</code>"}, {"owner": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572422386, "post_id": 58619472, "comment_id": 103549976, "body": "Thanks, and for clarifying not needing to care about dependency service. Correct me here if I&#39;m wrong but in my question I <code>expect(req.request.method).toEqual(&#39;POST&#39;)</code> while testing <code>MyService</code> and importing <code>HttpTestingController</code>. Since the http request is actually occurring with the dependency service, I shouldn&#39;t care about it in the test suite for <code>MyService</code>. This is why we can use the spy and <code>Observer.create</code>. Is this correct?"}, {"owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "reply_to_user": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 1, "creation_date": 1572422910, "post_id": 58619472, "comment_id": 103550189, "body": "Correct. You can remove <code>HttpTestingController</code> and all HTTP request testing from <code>MyService</code>. They need to be in <code>DependencyService</code> spec."}, {"owner": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572425114, "post_id": 58619472, "comment_id": 103551125, "body": "Cleaning up my test and when removing <code>imports: [HttpClientTestingModule]</code> I get the error <code>Error: StaticInjectorError(DynamicTestModule)[DependencyService -&gt; HttpClient] ... No provider for HttpClient</code>. But this shouldn&#39;t happen because <code>MyService</code> doesn&#39;t use <code>HttpClient</code>, only <code>DependencyService</code> does. Any idea why this happens and is your approach a false positive?"}, {"owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "reply_to_user": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572425448, "post_id": 58619472, "comment_id": 103551271, "body": "How are you providing <code>DependencyService</code>? Is it the original service or a mock? If it is the original service, it has a dependency on <code>HttpClient</code>."}, {"owner": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572425911, "post_id": 58619472, "comment_id": 103551495, "body": "No mock, providing the original <code>DependencyService</code>, so I guess I&#39;ll need to import the <code>HttpClientTestingModule</code> in the <code>MyService</code> test suite."}, {"owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "reply_to_user": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "edited": false, "score": 0, "creation_date": 1572427128, "post_id": 58619472, "comment_id": 103552179, "body": "Or better, provide a mock service.   <code>class MockDependencyService{ postData(a,b){} }</code> and in providers <code>{provide: DependencyService, useClass: MockDependencyService}</code>"}], "tags": [], "owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "is_accepted": true, "score": 2, "last_activity_date": 1572415204, "creation_date": 1572415204, "answer_id": 58619472, "question_id": 58619284, "link": "https://stackoverflow.com/questions/58619284/how-to-test-angular-6-service-with-dependency-that-uses-private-methods-properti/58619472#58619472", "title": "How to test Angular 6 service with dependency that uses private methods/properties to modify output of public methods/properties", "body": "<p>You need not worry about the dependency service. If the user is authenticated or if network calls are being made correctly or not should be a part of the spec for dependency service. </p>\n\n<p>There is also an issue with the way you spy <code>dependencyService</code>. <code>TestBed.get(DependencyService)</code> return the current instance of <code>DependencyService</code>, and not the spy. Would be wise to rename the variable as below:</p>\n\n<pre><code>let dependencyService: DependencyService;\n</code></pre>\n\n<p>and the assignment as below:</p>\n\n<pre><code>dependencyService = TestBed.get(DependencyService);\n</code></pre>\n\n<p>You just need to spy <code>postData</code> method.</p>\n\n<p>From the perspective of <code>MyService</code>, there are only two scenarios for <code>DependencyService</code>.</p>\n\n<ol>\n<li><p><strong>User is not authenticated</strong></p>\n\n<p>In this case, all you need is that <code>postData</code> should return null. You need not worry about <code>checkAuth</code>. You can spy on the <code>postData</code> and return Observable with null value. You are only concerned about the output of <code>postData</code> method, not how the output is generated.</p>\n\n<pre><code>it('#doSomething should return null if user is not authenticated', () =&gt; {\n    const payloadData = {\n        name: 'Ash',\n        food: 'donut'\n    };\n\n    spyOn(dependencyService, 'postData').and.returnValue(Observable.create(observer =&gt; {\n        observer.next(null);\n        observer.complete();\n    }));\n\n    myService.doSomething('/api/endpoint', payloadData).subscribe(data =&gt; {\n        expect(data).toBeNull();\n    }, fail);\n\n});\n</code></pre>\n\n<p>As you can see above, you need not specify how <code>postData</code> arrives at returning null. You know that in this scenario <code>postData</code> should return null. How it is achieved needs to tested in the spec of <code>DependencyService</code>.</p></li>\n<li><p><strong>User is authenticated</strong></p>\n\n<p>In this case, <code>postData</code> returns the value from HTTP call. Again, you just need to return the value. If the network call is made correctly or not is to be tested in the spec of <code>DependencyService</code>.</p>\n\n<pre><code>it('#doSomething should post some data', () =&gt; {\n    const payloadData = {\n        name: 'Ash',\n        food: 'donut'\n    };\n\n    const responseData = {\n        success: true,\n        msg: 'Payload received'\n    };\n\n    spyOn(dependencyService, 'postData').and.returnValue(Observable.create(observer =&gt; {\n        observer.next(responseData);\n        observer.complete();\n    }));\n\n    myService.doSomething('/api/endpoint', payloadData).subscribe(data =&gt; {\n        expect(data).toEqual(responseData);\n    }, fail);\n\n});\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 10493, "user_id": 1494989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df83386219d85354f90ff2a32ce103c?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/1494989/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 58619472, "answer_count": 1, "score": 1, "last_activity_date": 1572415204, "creation_date": 1572413592, "question_id": 58619284, "link": "https://stackoverflow.com/questions/58619284/how-to-test-angular-6-service-with-dependency-that-uses-private-methods-properti", "title": "How to test Angular 6 service with dependency that uses private methods/properties to modify output of public methods/properties", "body": "<p>I'm stuck on trying to write a Jasmine/Karma test in an Angular 6 app for a service which depends on another service, and that dependency has several private properties/methods that modify how the public method executes, and my test always fail.</p>\n\n<p>All the code is working as expected during run time but I don't get how to test this correctly. I've tried spies for the private methods and properties which doesn't work, nor does changing them to public. Clearly I'm missing something.</p>\n\n<p>Right now, I don't care or want to test <code>DependencyService</code>. I want to be able to test <code>MyService</code> function <code>doSomething</code> works, currently it always returns <code>null</code> so my test output is <code>Failed: Cannot read property 'subscribe' of null</code>. Removing the <code>if</code> statement in <code>postData()</code> returns the observable as expected and the test passes.</p>\n\n<p>It feels I'm spying on the wrong things here as my test is becoming tightly coupled with the dependency service or <code>localStorage</code> values.</p>\n\n<p>How do I mock/spy on the <code>checkAuth</code> and <code>isAuth</code> in my service dependency? Perhaps more accurately, how do I test <code>doSomething()</code> correctly so that the test is isolated to the <code>MyService</code> service?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export class MyService {\n    constructor(private depService: DependencyService) { }\n\n    public doSomething(additionalPayload: Object) {\n        const payload = { ...additionalPayload, modified: true };\n        return this.depService.postData('/api/endpoint', payload);\n    }\n\n}\n\nexport class DependencyService {\n    constructor(private httpClient: HttpClient) { }\n\n    private isAuth: boolean = false;\n\n    private checkAuth() {\n        const token = localStorage.get('token');\n        if (token !== null) {\n            this.isAuth = true;\n        } else {\n            this.isAuth = false;\n        }\n    }\n\n    postData(url, body): Observable&lt;any&gt; {\n        this.checkAuth();\n        if (!this.isAuth) {\n            return null;\n        }\n        return this.httpClient.post(url, body);\n    }\n}\n</code></pre>\n\n<p>The <code>myservice.spec.ts</code> so far which isn't passing:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>describe('MyService', () =&gt; {\n  let httpTestingController: HttpTestingController;\n\n  let myService: MyService;\n  let dependencyServiceSpy: jasmine.SpyObj&lt;DependencyService&gt;;\n\n  beforeEach(() =&gt; {\n    const dependencyServiceSpyObj = jasmine.createSpyObj('DependencyService', ['postData']);\n\n    TestBed.configureTestingModule({\n      imports: [ HttpClientTestingModule ],\n      providers: [\n        MyService,\n        { provide: DependencyService, useValue: dependencyServiceSpyObj },\n      ]\n    });\n\n    httpTestingController = TestBed.get(HttpTestingController);\n\n    myService = TestBed.get(MyService);\n    dependencyServiceSpy = TestBed.get(DependencyService);\n  });\n\n  afterEach(() =&gt; {\n    httpTestingController.verify();\n  });\n\n  it('#doSomething should post some data', async(() =&gt; {\n    const payloadData: Object = {\n      name: 'Ash',\n      food: 'donut'\n    };\n\n    const responseData: Object = {\n      success: true,\n      msg: 'Payload received'\n    };\n\n    // HELP HERE \u2193\n    // need to spy/mock dependencyService.isAuth so that it is `true`\n    // otherwise inside `postData` the if statement will always return a `null` value\n    // ...spy/mock `localStorage`?\n    dependencyServiceSpy.postData.and.returnValue(/* return http observable so that .subscribe can be called */);\n\n    myService.doSomething(payloadData).subscribe(data =&gt; {\n      expect(data).toEqual(responseData);\n    }, fail);\n\n    const req = httpTestingController.expectOne('/api/endpoint');\n\n    expect(req.request.method).toEqual('POST');\n    expect(req.request.body).toEqual({ ...payloadData, modified: true });\n\n    expect(dependencyServiceSpy.postData.calls.count()).toBe(1);\n    expect(dependencyServiceSpy.postData.calls.mostRecent().returnValue).toBe(responseData);\n\n    req.flush(responseData);\n  }));\n});\n</code></pre>\n"}, {"tags": ["html", "angular", "typescript", "angular-material", "angular-material2"], "comments": [{"owner": {"reputation": 972, "user_id": 4213780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8f9616269d9b5b6399e107e6382026?s=128&d=identicon&r=PG&f=1", "display_name": "Aref Ben Lazrek", "link": "https://stackoverflow.com/users/4213780/aref-ben-lazrek"}, "edited": false, "score": 0, "creation_date": 1572409772, "post_id": 58618632, "comment_id": 103546438, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/46705101/mat-form-field-must-contain-a-matformfieldcontrol\">mat-form-field must contain a MatFormFieldControl</a>"}, {"owner": {"reputation": 7, "user_id": 11265125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aace0bc5e74dbfbc3614c6a84c5b6eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Janet", "link": "https://stackoverflow.com/users/11265125/janet"}, "reply_to_user": {"reputation": 972, "user_id": 4213780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8f9616269d9b5b6399e107e6382026?s=128&d=identicon&r=PG&f=1", "display_name": "Aref Ben Lazrek", "link": "https://stackoverflow.com/users/4213780/aref-ben-lazrek"}, "edited": false, "score": 0, "creation_date": 1572410058, "post_id": 58618632, "comment_id": 103546502, "body": "No, It does not."}, {"owner": {"reputation": 1396, "user_id": 2012333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tTm8H.jpg?s=128&g=1", "display_name": "shaktimaan", "link": "https://stackoverflow.com/users/2012333/shaktimaan"}, "edited": false, "score": 1, "creation_date": 1572410242, "post_id": 58618632, "comment_id": 103546537, "body": "Can you please specify version of angular material you are using. I tried your code in stackblitz(<a href=\"https://stackblitz.com/edit/sa-xbn5hq-hqhkhs\" rel=\"nofollow noreferrer\">stackblitz.com/edit/sa-xbn5hq-hqhkhs</a>) and its working fine."}], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 11999413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7af2cc06c50fd295f34f12c75950721?s=128&d=identicon&r=PG&f=1", "display_name": "MaBbKhawaja", "link": "https://stackoverflow.com/users/11999413/mabbkhawaja"}, "is_accepted": false, "score": 0, "last_activity_date": 1572417571, "last_edit_date": 1572417571, "creation_date": 1572417190, "answer_id": 58619772, "question_id": 58618632, "link": "https://stackoverflow.com/questions/58618632/i-am-getting-this-error-mat-form-field-must-contain-a-matformfieldcontrol-whi/58619772#58619772", "title": "I am getting this &#39;Error: mat-form-field must contain a matformfieldcontrol&#39; while using mat native select", "body": "<p>You need to use mat-select and mat-option tags here </p>\n\n<pre><code>&lt;mat-form-field&gt;\n    &lt;mat-select matNativeControl formControlName=\"xyz\"&gt;\n        &lt;mat-option value=\"a\"&gt;A&lt;/mat-option&gt;\n        &lt;mat-option value=\"b\"&gt;B&lt;/mat-option&gt;\n    &lt;/mat-select&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n\n<p>and input works fine because we right it as </p>\n\n<pre><code>&lt;input type=\"text\" matInput formControlName=\"carrierName\" placeholder=\"CarrierName\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11265125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aace0bc5e74dbfbc3614c6a84c5b6eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Janet", "link": "https://stackoverflow.com/users/11265125/janet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572420045, "creation_date": 1572408594, "last_edit_date": 1572420045, "question_id": 58618632, "link": "https://stackoverflow.com/questions/58618632/i-am-getting-this-error-mat-form-field-must-contain-a-matformfieldcontrol-whi", "title": "I am getting this &#39;Error: mat-form-field must contain a matformfieldcontrol&#39; while using mat native select", "body": "<p>I am using angular material native select and getting <code>error: mat-form-field must contain a matformfieldcontrol</code> </p>\n\n<p>HTML : </p>\n\n<pre><code>&lt;mat-form-field&gt;\n     &lt;select matNativeControl formControlName=\"xyz\" required&gt;\n             &lt;option [value]=\"a\"&gt;A&lt;/option&gt;\n             &lt;option [value]=\"a\"&gt;B&lt;/option&gt;\n             &lt;option [value]=\"a\"&gt;C&lt;/option&gt;\n     &lt;/select&gt;\n&lt;/mat-form-field&gt;\n</code></pre>\n\n<p>I have imported \n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatOptionModule,\nmodules in my app.module.ts</p>\n\n<p>app.module.ts : </p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { MatFormFieldModule, MatInputModule, MatSelectModule, MatOptionModule } from '@angular/material';\n\n@NgModule({\nimports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatOptionModule\n  ],\n})\n</code></pre>\n\n<p>I have used <code>&lt;input&gt;</code> as well in the same form and that is working fine. But getting this particular error only in <code>&lt;select&gt;</code> . </p>\n\n<p>Could not find any solution for it.</p>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 11573648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FMGNXxIiFOg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reftI-DdYboggzToA9jdmLtFAwxsg/mo/photo.jpg?sz=128", "display_name": "Mike Caputo", "link": "https://stackoverflow.com/users/11573648/mike-caputo"}, "edited": false, "score": 0, "creation_date": 1572467781, "post_id": 58620158, "comment_id": 103573506, "body": "But as I said in my question, if I put a console.log() outside the define block in that file, it does get called. So I don&#39;t think that&#39;s the reason."}, {"owner": {"reputation": 10585, "user_id": 3505900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f97fa5f3c78a38e538f0e415ffaa5e82?s=128&d=identicon&r=PG", "display_name": "unional", "link": "https://stackoverflow.com/users/3505900/unional"}, "reply_to_user": {"reputation": 57, "user_id": 11573648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FMGNXxIiFOg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reftI-DdYboggzToA9jdmLtFAwxsg/mo/photo.jpg?sz=128", "display_name": "Mike Caputo", "link": "https://stackoverflow.com/users/11573648/mike-caputo"}, "edited": false, "score": 0, "creation_date": 1572482409, "post_id": 58620158, "comment_id": 103577706, "body": "The file is loaded does not mean it is executed. It is within a <code>define()</code> function. Until you import that module, the content will not be executed."}, {"owner": {"reputation": 10585, "user_id": 3505900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f97fa5f3c78a38e538f0e415ffaa5e82?s=128&d=identicon&r=PG", "display_name": "unional", "link": "https://stackoverflow.com/users/3505900/unional"}, "reply_to_user": {"reputation": 57, "user_id": 11573648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FMGNXxIiFOg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reftI-DdYboggzToA9jdmLtFAwxsg/mo/photo.jpg?sz=128", "display_name": "Mike Caputo", "link": "https://stackoverflow.com/users/11573648/mike-caputo"}, "edited": false, "score": 0, "creation_date": 1572482442, "post_id": 58620158, "comment_id": 103577713, "body": "by the way, this has nothing to do with TypeScript. It is just JavaScript."}, {"owner": {"reputation": 57, "user_id": 11573648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FMGNXxIiFOg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reftI-DdYboggzToA9jdmLtFAwxsg/mo/photo.jpg?sz=128", "display_name": "Mike Caputo", "link": "https://stackoverflow.com/users/11573648/mike-caputo"}, "edited": false, "score": 0, "creation_date": 1572492932, "post_id": 58620158, "comment_id": 103579729, "body": "So what do I do within TypeScript to get it to compile such that it runs? If I just move the console.log outside the define, it won&#39;t work because the reference to _06modules_Circle_1 is no longer valid."}], "tags": [], "owner": {"reputation": 10585, "user_id": 3505900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f97fa5f3c78a38e538f0e415ffaa5e82?s=128&d=identicon&r=PG", "display_name": "unional", "link": "https://stackoverflow.com/users/3505900/unional"}, "is_accepted": false, "score": 0, "last_activity_date": 1572419276, "creation_date": 1572419276, "answer_id": 58620158, "question_id": 58618561, "link": "https://stackoverflow.com/questions/58618561/compiled-typescript-using-systemjs-not-logging-to-console/58620158#58620158", "title": "Compiled TypeScript using systemjs not logging to console", "body": "<p>It is because while you have defined the module (your file), you have not reference it thus the code it contains is not being processed.</p>\n\n<p>That's why your <code>console.log()</code> is not being executed.</p>\n"}], "owner": {"reputation": 57, "user_id": 11573648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FMGNXxIiFOg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reftI-DdYboggzToA9jdmLtFAwxsg/mo/photo.jpg?sz=128", "display_name": "Mike Caputo", "link": "https://stackoverflow.com/users/11573648/mike-caputo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572419276, "creation_date": 1572407938, "question_id": 58618561, "link": "https://stackoverflow.com/questions/58618561/compiled-typescript-using-systemjs-not-logging-to-console", "title": "Compiled TypeScript using systemjs not logging to console", "body": "<p>I'm learning TypeScript. In the course I'm taking, the teacher suggests using systemjs to import modules. I have systemjs installed and configured, but my compiled TypeScript doesn't seem to be working properly. I have a console.log call that is not showing up.</p>\n\n<p>I've tried putting a console.log call into the compiled .js file, outside of the \"define\" statement, and it works, so I don't think it's an issue with my references to files. It's just the console.log call inside the second define that doesn't work.</p>\n\n<p>Here is my TypeScript:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>/// &lt;reference path=\"06lesson_circle.ts\"/&gt;\n/// &lt;reference path=\"06lesson_rectangle.ts\"/&gt;\n\nimport CircleMath = MyMath.Circle;\n\nimport { pi, calculateCircumference} \n    from \"./math/06modules_Circle\";\n\nconsole.log(calculateCircumference(10));\n</code></pre>\n\n<p>And here is the transpiled JavaScript:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var MyMath;\n(function (MyMath) {\n    var Circle;\n    (function (Circle) {\n        var pi = 3.1415;\n        function calculateCircumference(diameter) {\n            return diameter * pi;\n        }\n        Circle.calculateCircumference = calculateCircumference;\n    })(Circle = MyMath.Circle || (MyMath.Circle = {}));\n})(MyMath || (MyMath = {}));\nvar MyMath;\n(function (MyMath) {\n    function calculateRectangle(width, length) {\n        return width * length;\n    }\n    MyMath.calculateRectangle = calculateRectangle;\n})(MyMath || (MyMath = {}));\ndefine(\"math/06modules_Circle\", [\"require\", \"exports\"], function (require, exports) {\n    \"use strict\";\n    exports.__esModule = true;\n    exports.pi = 3.1415;\n    function calculateCircumference(diameter) {\n        return diameter * exports.pi;\n    }\n    exports.calculateCircumference = calculateCircumference;\n});\n/// &lt;reference path=\"06lesson_circle.ts\"/&gt;\n/// &lt;reference path=\"06lesson_rectangle.ts\"/&gt;\ndefine(\"06lesson\", [\"require\", \"exports\", \"math/06modules_Circle\"], function (require, exports, _06modules_Circle_1) {\n    \"use strict\";\n    exports.__esModule = true;\n    console.log(_06modules_Circle_1.calculateCircumference(10));\n});\n</code></pre>\n\n<p>I don't get any error messages; just a blank console. I'm not sure what else to try in order to troubleshoot this, as I have no prior experience with systemjs and only what I've learned of TypeScript in the course, so any help would be greatly appreciated. Thanks in advance.</p>\n"}, {"tags": ["css", "angular", "typescript", "angular-material"], "comments": [{"owner": {"reputation": 4166, "user_id": 11393381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SShVL.jpg?s=128&g=1", "display_name": "Awais", "link": "https://stackoverflow.com/users/11393381/awais"}, "edited": false, "score": 2, "creation_date": 1572414861, "post_id": 58618143, "comment_id": 103547541, "body": "Its the default behavior of angular material tables. If you want scroll out side you need to make two separate tables or somehow you able to make scroll inside then your header and body cell aliment create problem"}], "answers": [{"comments": [{"owner": {"reputation": 1800, "user_id": 234910, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8a7b83e4271b81ca523d0c88bd72cbfa?s=128&d=identicon&r=PG", "display_name": "Mikkel R. Lund", "link": "https://stackoverflow.com/users/234910/mikkel-r-lund"}, "edited": false, "score": 2, "creation_date": 1594379089, "post_id": 58619841, "comment_id": 111112189, "body": "Be aware that this solution causes the headers to misalign, because the scrollbar doesn&#39;t take up space there."}], "tags": [], "owner": {"reputation": 549, "user_id": 3564156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566c0a28a8374c935002d38927c3dcd4?s=128&d=identicon&r=PG&f=1", "display_name": "akpgp", "link": "https://stackoverflow.com/users/3564156/akpgp"}, "is_accepted": true, "score": 1, "last_activity_date": 1572417554, "creation_date": 1572417554, "answer_id": 58619841, "question_id": 58618143, "link": "https://stackoverflow.com/questions/58618143/angular-material-table-with-sticky-header/58619841#58619841", "title": "Angular material table with sticky header", "body": "<p>You can do something like that using two table one for the header and another for the data. Please see the working <a href=\"https://stackblitz.com/edit/sticky-column-header-2qry3k\" rel=\"nofollow noreferrer\">demo</a>.</p>\n"}], "owner": {"reputation": 538, "user_id": 12022853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0a5493bb8bf4c574691d6ec6a997e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravu", "link": "https://stackoverflow.com/users/12022853/pravu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5227, "favorite_count": 0, "accepted_answer_id": 58619841, "answer_count": 1, "score": 0, "last_activity_date": 1572417554, "creation_date": 1572404356, "question_id": 58618143, "link": "https://stackoverflow.com/questions/58618143/angular-material-table-with-sticky-header", "title": "Angular material table with sticky header", "body": "<p>I'm using angular7 with Angular material design templates. Currently, my result is as follows, \n<a href=\"https://i.stack.imgur.com/G4W78.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G4W78.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But I want my result is as follows. Scrollbar under sticky header.</p>\n\n<p><a href=\"https://i.stack.imgur.com/WgjVh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WgjVh.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I put some demo code and <a href=\"https://stackblitz.com/edit/angular-8fuwbr\" rel=\"nofollow noreferrer\">live demo</a> as your reference.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;div class=\"example-container mat-elevation-z8\"&gt;\n  &lt;table mat-table [dataSource]=\"dataSource\"&gt;\n\n    &lt;!-- Position Column --&gt;\n    &lt;ng-container matColumnDef=\"position\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef&gt; No. &lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt; {{element.position}} &lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;!-- Name Column --&gt;\n    &lt;ng-container matColumnDef=\"name\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef&gt; Name &lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt; {{element.name}} &lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;!-- Weight Column --&gt;\n    &lt;ng-container matColumnDef=\"weight\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef&gt; Weight &lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt; {{element.weight}} &lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;!-- Symbol Column --&gt;\n    &lt;ng-container matColumnDef=\"symbol\"&gt;\n      &lt;th mat-header-cell *matHeaderCellDef&gt; Symbol &lt;/th&gt;\n      &lt;td mat-cell *matCellDef=\"let element\"&gt; {{element.symbol}} &lt;/td&gt;\n    &lt;/ng-container&gt;\n\n    &lt;tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"&gt;&lt;/tr&gt;\n    &lt;tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"&gt;&lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>CSS</strong></p>\n\n<pre><code>.example-container {\n  height: 400px;\n  overflow: auto;\n}\n\ntable {\n  width: 100%;\n}\n</code></pre>\n"}, {"tags": ["typescript", "push-notification", "firebase-cloud-messaging", "google-cloud-functions", "ionic4"], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 5735893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a9602dcf18b974965534743c0fe421?s=128&d=identicon&r=PG&f=1", "display_name": "Prabhashi Buddhima", "link": "https://stackoverflow.com/users/5735893/prabhashi-buddhima"}, "edited": false, "score": 0, "creation_date": 1589185931, "post_id": 58636541, "comment_id": 109181979, "body": "Hi, can you explain more how you solved this? I&#39;m currently facing same issue."}], "tags": [], "owner": {"reputation": 1194, "user_id": 7797500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72def50d8c82a705f7497d6219edb3fc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hodges", "link": "https://stackoverflow.com/users/7797500/d-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1572492438, "creation_date": 1572492438, "answer_id": 58636541, "question_id": 58618024, "link": "https://stackoverflow.com/questions/58618024/ionic-does-not-navigate-to-specified-url-after-push-notification/58636541#58636541", "title": "Ionic does not navigate to specified URL after push notification", "body": "<p>Finally figured this out.  I'm using a tabs module. So in order to get this working I had to put the fcm.onNotification in the main tabs module.  Now it works when the app is in the background</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11686787, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyzy8G5YDsg/AAAAAAAAAAI/AAAAAAAABbM/Qf-peCDOGLg/photo.jpg?sz=128", "display_name": "Smit Nirmal", "link": "https://stackoverflow.com/users/11686787/smit-nirmal"}, "is_accepted": false, "score": 0, "last_activity_date": 1573344245, "creation_date": 1573344245, "answer_id": 58784668, "question_id": 58618024, "link": "https://stackoverflow.com/questions/58618024/ionic-does-not-navigate-to-specified-url-after-push-notification/58784668#58784668", "title": "Ionic does not navigate to specified URL after push notification", "body": "<p>I was getting the same issue.\nBut then I tried sending notification using <a href=\"https://cordova-plugin-fcm.appspot.com/\" rel=\"nofollow noreferrer\">https://cordova-plugin-fcm.appspot.com/</a> .\nSo after sending notification from the given link, when I clicked to the notification it redirected to the desired page.\nSo I came to know that there was no issue in my code but there is issue in code of sending notification.\nFor more go through this article <a href=\"https://enappd.com/blog/implement-ionic-4-firebase-push/34/\" rel=\"nofollow noreferrer\">https://enappd.com/blog/implement-ionic-4-firebase-push/34/</a></p>\n"}], "owner": {"reputation": 1194, "user_id": 7797500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72def50d8c82a705f7497d6219edb3fc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hodges", "link": "https://stackoverflow.com/users/7797500/d-hodges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 1, "accepted_answer_id": 58636541, "answer_count": 2, "score": 0, "last_activity_date": 1573344245, "creation_date": 1572403278, "last_edit_date": 1572437182, "question_id": 58618024, "link": "https://stackoverflow.com/questions/58618024/ionic-does-not-navigate-to-specified-url-after-push-notification", "title": "Ionic does not navigate to specified URL after push notification", "body": "<p>I have an ionic chat app that receives push notifications from firebase cloud functions...you click the icon and the app open.  The problem is it's not navigating to the specified page when the notification is received in the background, only in the foreground.</p>\n\n<p>Here's my app component:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>  initializeApp() {\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig);\r\n    }\r\n\r\n    this.platform.ready().then(() =&gt; {\r\n        const unsubscribe = firebase.auth().onAuthStateChanged( user =&gt; {\r\n          if (!user) {\r\n            this.router.navigateByUrl('login');\r\n            unsubscribe();\r\n          } else {\r\n            this.router.navigateByUrl('tabs');\r\n            unsubscribe();\r\n          }\r\n        });\r\n      this.statusBar.styleDefault();\r\n      this.splashScreen.hide();\r\n      this.getDeviceToken();\r\n    });\r\n  }\r\n\r\n  getDeviceToken() {\r\n    this.fcm.onNotification().subscribe(data =&gt; {\r\n      if (data.wasTapped) {\r\n        this.router.navigateByUrl('tabs/connections');\r\n\r\n        console.log(\"Received in background\", data.wasTapped);\r\n      } else {\r\n        console.log(\"Received in foreground\", data.wasTapped);\r\n        this.router.navigateByUrl('tabs/connections');\r\n      }\r\n    });\r\n\r\n    this.fcm.onTokenRefresh().subscribe(token =&gt; {\r\n      // Register your new token in your back-end if you want\r\n      this.fcmService.saveTokenToFirestore(token, this.loggedInUser.uid);\r\n    });\r\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>if the app is open and it receives a push notification in the foreground it will navigate to the specified page, but not when it's closed.</p>\n\n<p>I doubt these errors that appear when I open the app has anything to do with it...they were there before push notifications and they haven't encumbered any functionality...just thought it was worth mentioning:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>Failed to load resource: the server responded with a status of 404 ()\r\npolyfills.js:3040 Unhandled Promise rejection: Error Status 404: App not found ; Zone: &lt;root&gt; ; Task: Promise.then ; Value: Error: Error Status 404: App not found\r\n    at IonicDeployImpl.&lt;anonymous&gt; (/plugins/cordova-plugin-ionic/dist/common.js:291)\r\n    at step (/plugins/cordova-plugin-ionic/dist/common.js:37)\r\n    at Object.next (/plugins/cordova-plugin-ionic/dist/common.js:18)\r\n    at fulfilled (/plugins/cordova-plugin-ionic/dist/common.js:9)\r\n    at ZoneDelegate.push../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke (polyfills.js:2749)\r\n    at Zone.push../node_modules/zone.js/dist/zone.js.Zone.run (polyfills.js:2508)\r\n    at polyfills.js:3247\r\n    at ZoneDelegate.push../node_modules/zone.js/dist/zone.js.ZoneDelegate.invokeTask (polyfills.js:2781)\r\n    at Zone.push../node_modules/zone.js/dist/zone.js.Zone.runTask (polyfills.js:2553)\r\n    at drainMicroTaskQueue (polyfills.js:2959) Error: Error Status 404: App not found\r\n    at IonicDeployImpl.&lt;anonymous&gt; (http://localhost/plugins/cordova-plugin-ionic/dist/common.js:291:35)\r\n    at step (http://localhost/plugins/cordova-plugin-ionic/dist/common.js:37:23)\r\n    at Object.next (http://localhost/plugins/cordova-plugin-ionic/dist/common.js:18:53)\r\n    at fulfilled (http://localhost/plugins/cordova-plugin-ionic/dist/common.js:9:58)\r\n    at ZoneDelegate.push../node_modules/zone.js/dist/zone.js.ZoneDelegate.invoke (http://localhost/polyfills.js:2749:26)\r\n    at Zone.push../node_modules/zone.js/dist/zone.js.Zone.run (http://localhost/polyfills.js:2508:43)\r\n    at http://localhost/polyfills.js:3247:34\r\n    at ZoneDelegate.push../node_modules/zone.js/dist/zone.js.ZoneDelegate.invokeTask (http://localhost/polyfills.js:2781:31)\r\n    at Zone.push../node_modules/zone.js/dist/zone.js.Zone.runTask (http://localhost/polyfills.js:2553:47)\r\n    at drainMicroTaskQueue (http://localhost/polyfills.js:2959:35)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Otherwise, I'm not getting any errors in the console.  ALSO, it's not console logging \"console.log(\"Received in background\", data.wasTapped);\"</p>\n\n<p>It will console.log \"console.log(\"Received in foreground\", data.wasTapped);\"</p>\n\n<p>Again, this is Ionic 4 with Firebase...any help would be greatly appreciated.</p>\n\n<p>I was able to at least the console to log the data was tapped = true.  But now I'm getting this error:</p>\n\n<p>Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?</p>\n"}, {"tags": ["typescript", "three.js", "glsl", "transparency", "depth-buffer"], "comments": [{"owner": {"reputation": 91346, "user_id": 1461008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78b128c27703eda687128251033e032?s=128&d=identicon&r=PG&f=1", "display_name": "WestLangley", "link": "https://stackoverflow.com/users/1461008/westlangley"}, "edited": false, "score": 2, "creation_date": 1572400857, "post_id": 58616902, "comment_id": 103544760, "body": "<code>material.depthTest = false;</code> or <code>material.depthWrite = false;</code> are options for you."}, {"owner": {"reputation": 1, "user_id": 12294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bb801e4c1d835836ecbce41c8423f8?s=128&d=identicon&r=PG&f=1", "display_name": "Hexwrench", "link": "https://stackoverflow.com/users/12294175/hexwrench"}, "reply_to_user": {"reputation": 91346, "user_id": 1461008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78b128c27703eda687128251033e032?s=128&d=identicon&r=PG&f=1", "display_name": "WestLangley", "link": "https://stackoverflow.com/users/1461008/westlangley"}, "edited": false, "score": 0, "creation_date": 1572445119, "post_id": 58616902, "comment_id": 103562255, "body": "@WestLangley ...but I need depth testing / depth writing for the cells to not show up out of order... unless I am missing something major here? Here is the fiddle with depth test and depth write set to false on the material:   <a href=\"https://jsfiddle.net/hexwrench/ob04a3xp/142/\" rel=\"nofollow noreferrer\">jsfiddle.net/hexwrench/ob04a3xp/142</a>"}, {"owner": {"reputation": 305, "user_id": 8886455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6mzUt.png?s=128&g=1", "display_name": "vHawk", "link": "https://stackoverflow.com/users/8886455/vhawk"}, "edited": false, "score": 0, "creation_date": 1572445634, "post_id": 58616902, "comment_id": 103562600, "body": "@Hexwrench You should look into <a href=\"https://en.wikipedia.org/wiki/Order-independent_transparency\" rel=\"nofollow noreferrer\">order-independent transparency</a>. There are a few WebGL implementations."}], "owner": {"reputation": 1, "user_id": 12294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bb801e4c1d835836ecbce41c8423f8?s=128&d=identicon&r=PG&f=1", "display_name": "Hexwrench", "link": "https://stackoverflow.com/users/12294175/hexwrench"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572392942, "creation_date": 1572392942, "question_id": 58616902, "link": "https://stackoverflow.com/questions/58616902/proper-way-to-manipulate-the-depth-buffer-for-instancedbuffergeometry-using-raws", "title": "Proper way to manipulate the depth buffer for InstancedBufferGeometry using RawShaderMaterial WITH TRANSPARENCY in three.js?", "body": "<p>I just cant seem to wrap my head around why transparency works from one side of a semi transparent instance and not the other when the depth buffer seems to be correct.</p>\n\n<p>I am trying to set up a (semi) wireframe grid of cells (with quad like edges rather than tri edges) that are regular in the x and y directions but can vary in depth (the z direction). I would like to be able to render up to around 2 million cells (that's 24 million triangles if my math is correct), and since every cell is a variation on a rectangular prism, I used Three.js's InstancedBufferGeometry so that I can let the shader do the heavy lifting with translation, scale, color, etc. The barycentric function does great with the wireframe. I would like for the cells to be semi-transparent (more opaque wires, less opaque faces. They seem correct when viewed from one side but are opaque when viewed from the other.</p>\n\n<p>Vertex Shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>  precision lowp float;\n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n  uniform vec3 cameraPosition;\n  attribute vec3 position;\n  attribute vec3 translation;\n  attribute vec3 scale;\n  attribute vec3 color;\n  attribute float near;\n  attribute float far;\n  attribute vec3 center;\n  attribute float colorByDepth;\n  vec3 transform(inout vec3 position, vec3 T, vec3 S) {\n    position *= S;\n    position += T;\n    return position;\n  }\n  varying float vDepth;\n  varying vec3 vColor;\n  varying vec3 vCenter;\n  varying float vColorByDepth;\n  void main() {\n    vec3 pos = position;\n    transform(pos, translation, scale);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n    float z = distance(vec4(cameraPosition, 1.0), gl_Position);\n    vDepth = (z - near) / (far - near);\n    vColor = color;\n    vCenter = center;\n    vColorByDepth = colorByDepth;\n  }\n</code></pre>\n\n<p>Fragment Shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>  #extension GL_EXT_frag_depth : enable\n  precision lowp float;\n  varying float vDepth;\n  varying vec3 vColor;\n  varying vec3 vCenter;\n  varying float vColorByDepth;\n  float edgeFactorTri() {\n    vec3 d = fwidth(vCenter.xyz);\n    vec3 a3 = smoothstep(vec3(0.0), d * 1.5, vCenter.xyz);\n    return min(min(a3.x, a3.y), a3.z);\n  }\n  void main() {\n    vec4 edgeColor = vec4(vColor, 0.1);\n    vec4 faceColor = vec4(vColor, 0.01);\n    float edgeFactor = edgeFactorTri();\n    vec4 opaqueWhite = vec4(1.0, 1.0, 1.0, 1.0);\n    vec4 opaqueBlack = vec4(0.0, 0.0, 0.0, 1.0);\n    float depthFactor = vDepth;\n    gl_FragColor = vColorByDepth &gt; 0.5 ? mix(opaqueWhite, opaqueBlack, depthFactor) : mix(edgeColor, faceColor, edgeFactor);\n    gl_FragDepthEXT = depthFactor;\n  }\n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/hexwrench/ob04a3xp/138/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/hexwrench/ob04a3xp/138/</a></p>\n\n<p>For this fiddle, I have included a small example data set. The cells are colored by cell top depth. When the mouse is down on the rotating grid, the cells are colored by depth from the camera. Notice that when the mesh is viewed from an angle where it is \"c\" shaped, proper transparency is observed. When the mesh is viewed from the other side and the mesh is \"\u0254\" shaped (thanks google), the cells are (incorrectly) opaque.</p>\n"}, {"tags": ["typescript", "vue.js", "vue-component", "typescript-decorator"], "comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1572406711, "post_id": 58616774, "comment_id": 103545869, "body": "Your component has been imported as <code>WindowMenu</code> but your template has <code>&lt;menu&gt;</code>. Try using <code>&lt;window-menu :list=&quot;[&#39;foo&#39;, &#39;bar&#39;]&quot; &#47;&gt;</code> or <code>&lt;WindowMenu :list=&quot;[&#39;foo&#39;, &#39;bar&#39;]&quot; &#47;&gt;</code>"}, {"owner": {"reputation": 21, "user_id": 10758131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eIBh8.jpg?s=128&g=1", "display_name": "pleshw", "link": "https://stackoverflow.com/users/10758131/pleshw"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1572573806, "post_id": 58616774, "comment_id": 103611119, "body": "I deleted the &#39;window&#39; when i edited the question, but it is right on code. My bad, i&#39;m gonna fix that."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10758131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eIBh8.jpg?s=128&g=1", "display_name": "pleshw", "link": "https://stackoverflow.com/users/10758131/pleshw"}, "is_accepted": true, "score": 2, "last_activity_date": 1572574874, "creation_date": 1572574874, "answer_id": 58653361, "question_id": 58616774, "link": "https://stackoverflow.com/questions/58616774/vue-prop-not-defined-and-or-cannot-be-used-on-v-for-using-typescript-and-decor/58653361#58653361", "title": "Vue Prop not defined, and/or cannot be used on v-for. Using typescript and decorators", "body": "<p>I fixed that. Well the error was i was not using the @Component decorator, then Vue could not compile props. <strong>Code fixed below</strong>.</p>\n\n<pre><code>&lt;script lang=\"ts\"&gt;\nimport { Prop, Vue, Component} from \"vue-property-decorator\";\n\n@Component\nexport default class Menu extends Vue {\n  @Prop() private list!: string[];\n}\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10758131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eIBh8.jpg?s=128&g=1", "display_name": "pleshw", "link": "https://stackoverflow.com/users/10758131/pleshw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1579, "favorite_count": 0, "accepted_answer_id": 58653361, "answer_count": 1, "score": 0, "last_activity_date": 1572574874, "creation_date": 1572391755, "last_edit_date": 1572573828, "question_id": 58616774, "link": "https://stackoverflow.com/questions/58616774/vue-prop-not-defined-and-or-cannot-be-used-on-v-for-using-typescript-and-decor", "title": "Vue Prop not defined, and/or cannot be used on v-for. Using typescript and decorators", "body": "<p>Well, i'm using Vue with typescript and trying to use props with v-for, but it renders nothing. <strong><em>Code below</em></strong></p>\n\n<p>I've tried computed props, also giving default values to the list and creating a new variable instantiating on constructor, even on mounted, but it only works when i instantiate the list like: <code>@Prop() list!: string[] = ['foo', 'bar']</code></p>\n\n<p>My code gives the following error: \"Property or method 'list' is not defined on the instance but referenced during render.\" (it render the styles for menu but not the list):</p>\n\n<pre><code>&lt;template&gt;\n  &lt;div class=\"home\"&gt;\n    &lt;window-menu :list=\"['foo', 'bar']\" /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\nimport { Component, Vue } from \"vue-property-decorator\";\nimport WindowMenu from \"@/components/WindowMenu.vue\";\n\n@Component({\n  components: {\n    WindowMenu\n  }\n})\nexport default class Home extends Vue {}\n&lt;/script&gt;\n\n</code></pre>\n\n<pre><code>&lt;template&gt;\n  &lt;div class=\"window-menu\"&gt;\n    &lt;ul class=\"window-list\"&gt;\n      &lt;li v-for=\"(item, index) in list\" v-bind:key=\"index\"&gt;{{item}}&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\nimport { Prop, Vue, Watch } from \"vue-property-decorator\";\n\nexport default class Menu extends Vue {\n  @Prop() private list!: string[];\n}\n&lt;/script&gt;\n\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1572393025, "post_id": 58616748, "comment_id": 103543242, "body": "You could create 2 tsconfig files!"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572416362, "post_id": 58616748, "comment_id": 103547919, "body": "You can also override this setting on the command line <code>tsc --project .&#47;tsconfig.json --module umd</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572416546, "post_id": 58616965, "comment_id": 103547966, "body": "One would typically use the <code>&quot;extends&quot;</code> option to share configuration in such a setup."}], "tags": [], "owner": {"reputation": 164, "user_id": 2210053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TLIPC.png?s=128&g=1", "display_name": "blrzzzt", "link": "https://stackoverflow.com/users/2210053/blrzzzt"}, "is_accepted": false, "score": 1, "last_activity_date": 1572393456, "creation_date": 1572393456, "answer_id": 58616965, "question_id": 58616748, "link": "https://stackoverflow.com/questions/58616748/typescript-to-compile-to-both-commonjs-and-umd/58616965#58616965", "title": "TypeScript to compile to both commonjs and umd", "body": "<p>No, Typescript doesn't support simultaneous compiler modules. You can however create multiple tsconfig.json files:</p>\n\n<ul>\n<li>tsconfig.json (for development, etc.)</li>\n<li>umd.tsc.json</li>\n<li>commonjs.tsc.json (it can be named anything as long as it's a valid json tsconfig.)</li>\n</ul>\n\n<p>Configure those as you need and then call them to achieve the same effect. You can add a build script, whatever you like.</p>\n\n<p>package.json</p>\n\n<pre><code>{\n...\n  \"scripts\": {\n...\n    \"build:both\": \"tsc -p path/to/umd.tsc.json &amp;&amp; tsc -p path/to/commonjs.tsc.json\"\n  }\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#using-tsconfigjson\" rel=\"nofollow noreferrer\">Docs</a>\n<a href=\"https://github.com/Microsoft/TypeScript/issues/2867#issuecomment-204528633\" rel=\"nofollow noreferrer\">Github Issue</a> </p>\n"}], "owner": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572393456, "creation_date": 1572391595, "question_id": 58616748, "link": "https://stackoverflow.com/questions/58616748/typescript-to-compile-to-both-commonjs-and-umd", "title": "TypeScript to compile to both commonjs and umd", "body": "<p>Is it possible to have a tsconfig such that I can create both commonjs and umd output such that I end up getting</p>\n\n<pre><code>src/\n  files.ts\nlib/\n  umd.js\ndist/\n  files.js\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "edited": false, "score": 0, "creation_date": 1572393681, "post_id": 58616703, "comment_id": 103543364, "body": "Actually <code>pairsByIntOrderId</code> is of type <code>PairTransactionsById</code> which is an object with index signature."}], "tags": [], "owner": {"reputation": 31873, "user_id": 6695924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RFTZc.png?s=128&g=1", "display_name": "kind user", "link": "https://stackoverflow.com/users/6695924/kind-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1572391230, "creation_date": 1572391230, "answer_id": 58616703, "question_id": 58616447, "link": "https://stackoverflow.com/questions/58616447/why-cant-type-intersection-of-an-interface-with-a-property-and-an-interface-wi/58616703#58616703", "title": "Why can&#39;t type `intersection of an interface with a property and an interface with index signature` be assigned to an object with just the property?", "body": "<p>You can't assign an empty object to <code>pairsByIntOrderId</code> since it's type expects two fields - <code>amount</code> and <code>id</code>. TypeScript expects them since they are not optional. There are two ways to solve it:</p>\n\n<p>either you could make both of the fields optional;</p>\n\n<pre><code>interface Transaction {\n   amount?: number;\n   id?: string;\n}\n</code></pre>\n\n<p>or use <code>Partial</code> type, which constructs a new type with every field optional;</p>\n\n<pre><code>[id: string]: Partial&lt;Transaction&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 1, "last_activity_date": 1572400478, "creation_date": 1572400478, "answer_id": 58617718, "question_id": 58616447, "link": "https://stackoverflow.com/questions/58616447/why-cant-type-intersection-of-an-interface-with-a-property-and-an-interface-wi/58617718#58617718", "title": "Why can&#39;t type `intersection of an interface with a property and an interface with index signature` be assigned to an object with just the property?", "body": "<blockquote>\n  <p>Why can't I define lastById below with only the property pairsByIntOrderId?</p>\n</blockquote>\n\n<p>Because an index signature enforces that <em>all</em> properties <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html#indexable-types\" rel=\"nofollow noreferrer\">match its return type</a>.</p>\n\n<p>With type <code>TransactionsByIdState</code> you are basically saying that all string properties are obligated to have a <code>Transaction</code> type. This condition applies to property \n<code>pairsByIntOrderId</code> as well, which is added via intersection.</p>\n\n<p><code>pairsByIntOrderId</code> is also declared to be of type <code>PairTransactionsById</code>. Because <code>PairTransactionsById</code> is not assignable to <code>Transaction</code>, you in a way have created a \"never-fulfilling\" type here. The only thing that prevents the compiler from emitting an error is, that intersection intentionally can never create errors (compare <a href=\"https://github.com/Microsoft/TypeScript/issues/24970#issuecomment-397435307\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/Microsoft/TypeScript/issues/13986#issuecomment-278826312\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>Having said that, a concrete solution depends on your use case and type requirements. You can check out and subscribe to this <a href=\"https://github.com/microsoft/TypeScript/issues/17867\" rel=\"nofollow noreferrer\">feature request</a> for hybrid types with  index signature + properties. If <code>Transaction</code> and <code>PairTransactionsById</code> are intended to be incompatible (which seems to be the case here), they should be stored independently. Also <a href=\"https://basarat.gitbooks.io/typescript/docs/types/index-signatures.html#design-pattern-nested-index-signature\" rel=\"nofollow noreferrer\">separating index signature from explicit properties</a> in general is a good rule of thumb to have stronger typings.</p>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58617718, "answer_count": 2, "score": -1, "last_activity_date": 1572400478, "creation_date": 1572389466, "question_id": 58616447, "link": "https://stackoverflow.com/questions/58616447/why-cant-type-intersection-of-an-interface-with-a-property-and-an-interface-wi", "title": "Why can&#39;t type `intersection of an interface with a property and an interface with index signature` be assigned to an object with just the property?", "body": "<p>Why can't I define <code>lastById</code> below with only the property <code>pairsByIntOrderId</code>?</p>\n\n<p>Isn't the type TransactionsByIdState: has property <code>pairsByIntOrderId</code> and can optionally have additional properties of type string that map to Transaction?</p>\n\n<pre><code>interface Transaction {\n  amount: number,\n  id: string\n}\n\ninterface PairTransactionsById {\n  [id: string]: {\n    amount1: number,\n    amount2: number,\n  }\n}\nexport type TransactionsByIdState = {\n  [id: string]: Transaction;\n} &amp; { pairsByIntOrderId: PairTransactionsById };\n\nconst lastById: TransactionsByIdState = { pairsByIntOrderId: {} };\n</code></pre>\n"}, {"tags": ["typescript", "yargs"], "answers": [{"comments": [{"owner": {"reputation": 938, "user_id": 11855662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP1Hg.jpg?s=128&g=1", "display_name": "Jesus", "link": "https://stackoverflow.com/users/11855662/jesus"}, "edited": false, "score": 0, "creation_date": 1572424592, "post_id": 58620289, "comment_id": 103550909, "body": "I installed locally ts-node.When I run ts-node <code>.&#47;src &#47; index.ts </code> I get an error              <code>ts-node: Unable to load file C: \\ Users \\ Rich ... ts-node.ps1, because script execution is disabled in \u00a0 this system</code>"}], "tags": [], "owner": {"reputation": 10585, "user_id": 3505900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f97fa5f3c78a38e538f0e415ffaa5e82?s=128&d=identicon&r=PG", "display_name": "unional", "link": "https://stackoverflow.com/users/3505900/unional"}, "is_accepted": false, "score": 0, "last_activity_date": 1572419985, "creation_date": 1572419985, "answer_id": 58620289, "question_id": 58615681, "link": "https://stackoverflow.com/questions/58615681/terminal-node-src-index-ts-syntaxerror/58620289#58620289", "title": "terminal `node ./src/index.ts` SyntaxError", "body": "<p><code>node</code> does not understand TypeScript. It only understands JavaScript.</p>\n\n<p>If you want to run TypeScript directly, use <code>ts-node</code>.</p>\n"}], "owner": {"reputation": 938, "user_id": 11855662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP1Hg.jpg?s=128&g=1", "display_name": "Jesus", "link": "https://stackoverflow.com/users/11855662/jesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572419985, "creation_date": 1572384513, "last_edit_date": 1572387177, "question_id": 58615681, "link": "https://stackoverflow.com/questions/58615681/terminal-node-src-index-ts-syntaxerror", "title": "terminal `node ./src/index.ts` SyntaxError", "body": "<p>this my code</p>\n\n<pre><code>import * as yargs from 'yargs';\n\nconst newYargs = yargs.argv;\n\nconsole.log(newYargs.value);\n</code></pre>\n\n<p>run the command in the terminal <code>node ./src/index.ts</code> i get this error</p>\n\n<blockquote>\n  <p>import * as yargs from 'yargs': SyntaxError: Cannot use import statement outside a module</p>\n</blockquote>\n\n<p>What is the problem? How to fix it?</p>\n"}, {"tags": ["angular", "typescript", "jspdf"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6805533, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209662631738031/picture?type=large", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/6805533/julio-cesar"}, "is_accepted": false, "score": 0, "last_activity_date": 1595351222, "creation_date": 1595351222, "answer_id": 63019541, "question_id": 58615649, "link": "https://stackoverflow.com/questions/58615649/content-is-cutting-if-it-doesnt-fit-inside-the-page-jspdf-how-to-show-content/63019541#63019541", "title": "Content is cutting if it doesn&#39;t fit inside the page, jspdf. How to show content in another page?", "body": "<p>It's really late i guess but i resolved this with something like</p>\n<blockquote>\n<pre><code>const doc = new jsPDF(jsPDFConfig);\nconst x = 20;\nlet y = 40;\n</code></pre>\n</blockquote>\n<p>Adding to (Y) on every line like this</p>\n<blockquote>\n<pre><code>doc.setFontSize(10);\ndoc.setFontStyle('bold');\ndoc.text(this.clinicName, x, y);\ny += 12;\n</code></pre>\n</blockquote>\n<p>Later check with this and adding a page an restarting (Y)</p>\n<blockquote>\n<pre><code>if (y + 20 &gt; (PAGE HEIGHT)) {\n    doc.addPage();\n    y = 40;\n  }\n</code></pre>\n</blockquote>\n<p>The page height in my case is 841.89 from &quot;a4&quot; format. But you can try to get from doc.</p>\n"}], "owner": {"reputation": 55, "user_id": 12065165, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBPXTK68fsSxfJjgvvCie1TZqaGqxbrryfVWUhp9A=k-s128", "display_name": "Gabriela Reyes", "link": "https://stackoverflow.com/users/12065165/gabriela-reyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1595351222, "creation_date": 1572384386, "question_id": 58615649, "link": "https://stackoverflow.com/questions/58615649/content-is-cutting-if-it-doesnt-fit-inside-the-page-jspdf-how-to-show-content", "title": "Content is cutting if it doesn&#39;t fit inside the page, jspdf. How to show content in another page?", "body": "<p>I'm using jspdf in angular. I'm generating the pdf on my .ts (I'm not using html).</p>\n\n<p>I'm printing on my document the contents of an array of objects I get from my API.</p>\n\n<p>Problem is that, when the contents on the array doesn't fit on the page, the contents get cut. I tried adding a new page but the page is blank.</p>\n\n<p>Here's my method:</p>\n\n<pre><code>onNewReporte() {\n    const doc = new jsPDF();\n    const pageWidth =\n      doc.internal.pageSize.width || doc.internal.pageSize.getWidth();\n    // let imgData = this.logo();\n    const pageHeight = doc.internal.pageSize.height;\n\n    //nombre paciente\n    const pacienteInfo = this.consultas.map(a =&gt; a.pacienteId);\n    const pacienteObj = pacienteInfo[0];\n    const pacienteArray = Object.values(pacienteObj);\n    const pacienteName = pacienteArray[2];\n\n    //nombre guardian\n    const guardian = pacienteArray[1];\n\n    //formato fecha\n    var options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\n\n    //El pdf\n    doc.setFontType(\"bold\");\n    doc.text(\"Historial de Consultas M\u00e9dicas\", pageWidth / 2, 75, \"center\");\n    doc.setFontType(\"normal\");\n    doc.setFontSize(14);\n    doc.text(\n      \"Paciente: \" + pacienteName + \"       Guardian: \" + guardian,\n      pageWidth / 2,\n      90,\n      \"center\"\n    );\n    doc.setFontSize(12);\n\n    doc.line(20, 95, 190, 95);\n\n    for (var i = 0; i &lt; this.consultas.length; i++) {\n      if (this.consultas[i] != null) {\n        doc.text(\"Consulta N\u00b0 \" + (i + 1), 30, 110 + 75 * i);\n        doc.text(\n          \"Fecha: \" +\n            new Date(this.consultas[i].fecha)\n              .toLocaleDateString(\"es\", options)\n              .toString(),\n          30,\n          120 + 75 * i\n        );\n        doc.text(\"Motivo: \" + this.consultas[i].motivo, 30, 130 + 75 * i);\n        doc.text(\n          \"Pruebas a realizar: \" + this.consultas[i].pruebas,\n          30,\n          140 + 75 * i\n        );\n        doc.text(\n          \"Observaciones: \" + this.consultas[i].observaciones,\n          30,\n          150 + 75 * i\n        );\n        doc.text(\n          \"Diagn\u00f3stico: \" + this.consultas[i].diagnostico,\n          30,\n          160 + 75 * i\n        );\n        doc.text(\n          \"Tratamiento: \" + this.consultas[i].tratamiento,\n          30,\n          170 + 75 * i\n        );\n        //separacion\n      }\n\n      if (this.consultas.length &gt; 2) {\n        doc.addPage();\n      }\n    }\n    //separacion\n\n    doc.save(pacienteName + \".pdf\");\n  }\n</code></pre>\n\n<p>I've been googling to find something that could help me but I realize jspdf without using html2canvas or something like that has minimal documentation. I couldnt' find any linebreaks or page splits so I'm literally in blank right here.</p>\n"}, {"tags": ["reactjs", "typescript", "redux"], "comments": [{"owner": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1572386484, "post_id": 58615616, "comment_id": 103541687, "body": "Upon error thrown at <code>render</code> stage your component still is instantiated. So it will not be recreated, neither <code>props.fetchCourses</code> is changed. So React does not see any need to re-run <code>useEffect</code>. Hard to propose elegant solution by now, you use routing, right? Probably, redirecting to some different component in case of error(&quot;/error&quot;) would be easiest way. Then navigating back to &quot;/&quot; would re-create your component and re-run <code>fetch()</code> in <code>useEffect</code>"}, {"owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "reply_to_user": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1572425294, "post_id": 58615616, "comment_id": 103551206, "body": "Thanks @skyboyer, much appreciated :) Yep, using routing. I have since added a home button to my ErrorBoundary component for redirecting to &#39;/&#39;. However, after clicking home, if I then click on link to display my CourseList container the ErrorBoundary is again displayed. I do not see console log message in useEffect. When navigating back to &#39;/courses&#39; should this recreate the <i>CourseList</i> container? Is this not happening because the error was thrown in render previously, so container is reused? Amending question to include routing class and will investigate your redirect approach...."}, {"owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "reply_to_user": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1572453607, "post_id": 58615616, "comment_id": 103567316, "body": "Hi @skyboyer, just tried routing to /error @skyboyer and have updated question with details. Get an error in console, that <code>Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state. </code> On subsequent visits back to the container there seems to be a race condition between the fetch completing in useEffects and the redirection based on check of error state....Wonder if there is someway to wait until useEffects has completed?"}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572467034, "post_id": 58615616, "comment_id": 103573214, "body": "Instead of pushing to history try rendering a <code>&lt;Redirect to=&quot;&#47;error&quot; &#47;&gt;</code> component. Using <code>history.push()</code> (state update) in a render method (your functional component) will result in that error."}, {"owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "reply_to_user": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572469979, "post_id": 58615616, "comment_id": 103574408, "body": "Many thanks @Grabofus. Yep, that gets rid of the error concerning cannot update an existing state transition... :) Almost there...if I stop the external API server, causing a network connection error in client, then redirected to error page ok. If I then restart the external API server and revisit the link then the error is still displayed. If I then visit the link again the course list is displayed"}, {"owner": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572470113, "post_id": 58615616, "comment_id": 103574464, "body": "When you revisit the link, you mean revisit <code>&#47;error</code> page of your site? It seems correct to me that the error message is still there."}, {"owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "edited": false, "score": 0, "creation_date": 1572471230, "post_id": 58615616, "comment_id": 103574843, "body": "If I revisit <code>&#47;courses</code> link after restarting API server, it redirects to error page. If I revisit <code>&#47;courses</code> link again it displays the list of courses. Sequence of events that occur are: 1. Stop external API server 2. Visit the container page (CourseList). It makes request via dispatching fetch action onto redux store. 3. Fetch Error state is detected from store and redirected to error page. 4. Start external API server again 5. Revisit the container page (CourseList) again. Redirected to error page. 6. Revisit the container page (CourseList) page again. CourseList displayed."}, {"owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "reply_to_user": {"reputation": 1185, "user_id": 5554464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glUaO.png?s=128&g=1", "display_name": "Grabofus", "link": "https://stackoverflow.com/users/5554464/grabofus"}, "edited": false, "score": 0, "creation_date": 1572471296, "post_id": 58615616, "comment_id": 103574864, "body": "Apologies @Grabofus for list formatting in my response comment. Have amended question with clearer formatted list"}], "owner": {"reputation": 754, "user_id": 12152982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a96f15c74d4368c8399d71a09d8834?s=128&d=identicon&r=PG&f=1", "display_name": "anon_dcs3spp", "link": "https://stackoverflow.com/users/12152982/anon-dcs3spp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572470740, "creation_date": 1572384218, "last_edit_date": 1572470740, "question_id": 58615616, "link": "https://stackoverflow.com/questions/58615616/why-is-the-react-useeffect-hook-not-activating-when-a-component-is-reloaded-afte", "title": "Why is the React useEffect hook not activating when a component is reloaded after previously throwing an error?", "body": "<p>I am learning React and Redux within a Typescript environment. I have managed to implement a container that dispatches a fetch action and subscribes to corresponding fetch success and error state notifications from a redux store. The source code is listed below:</p>\n\n<p><strong>Container</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React, { useEffect } from 'react';\n\nimport { connect } from 'react-redux';\nimport Grid from '@material-ui/core/Grid';\nimport { GridSpacing } from '@material-ui/core/Grid';\n\nimport Course from '../components/Course/Course';\n\nimport { courseModels } from '../redux/features/course';\nimport { courseSelectors } from '../redux/features/course';\nimport { fetchCoursesAsync } from '../redux/features/course/actions';\n\nimport { Redirect } from 'react-router';\nimport { RootState } from 'ReduxTypes';\n\nimport { RouteComponentProps, withRouter } from 'react-router';\n\ntype ErrorReport = { hasError: boolean; error?: Error };\ntype StateProps = {\n  isLoading: boolean;\n  courses: courseModels.Course[];\n  error: ErrorReport;\n};\n\n/**\n * Redux dispatch and state mappings\n */\nconst dispatchProps = {\n  fetchCourses: fetchCoursesAsync.request,\n};\n\nconst mapStateToProps = (state: RootState): StateProps =&gt; ({\n  isLoading: state.courses.isLoadingCourses,\n  courses: courseSelectors.getReduxCourses(state.courses),\n  error: courseSelectors.getReduxCoursesError(state.courses),\n});\n\n/**\n * Component property type definitions\n */\ntype Props = ReturnType&lt;typeof mapStateToProps&gt; &amp;\n  typeof dispatchProps &amp;\n  RouteComponentProps;\n\n/**\n * CourseList component\n */\nconst CourseList = ({\n  courses = [],\n  error,\n  fetchCourses,\n  history,\n  isLoading,\n}: Props): JSX.Element =&gt; {\n  // fetch course action on mount\n  useEffect(() =&gt; {\n    console.log('COURSELIST FETCHING COURSES');\n    fetchCourses();\n  }, [fetchCourses]);\n\n  if (isLoading) {\n    return &lt;p&gt;Loading...&lt;/p&gt;;\n  }\n\n  if (error &amp;&amp; error.hasError &amp;&amp; error.error) {\n    console.log('COURSELIST ENCOUNTERED AN ERROR');\n    // option 1. history.push('/error'); // triggers state transition error\n    // option 2. throw error.error;\n    // if throw the error from state then encapsulating error boundary catches and displays\n    // however subsequent request actions are not processed by redux-observable action stream\n    // needs further investigation and if necessary a subsequent question posted....\n    // if render error inside component then redux-observable stream continues\n    // to process subsequent actions.\n    return &lt;Redirect to=\"/error\" /&gt;;\n  }\n\n  return (\n    &lt;div style={{ marginTop: 20, padding: 30 }}&gt;\n      {\n        &lt;Grid container spacing={2 as GridSpacing} justify=\"center\"&gt;\n          {courses.map(element =&gt; (\n            &lt;Grid item key={element.courseID}&gt;\n              &lt;Course course={element} /&gt;\n            &lt;/Grid&gt;\n          ))}\n        &lt;/Grid&gt;\n      }\n    &lt;/div&gt;\n  );\n};\n\n/**\n * Exports\n */\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    dispatchProps,\n  )(CourseList),\n);\n\n</code></pre>\n\n<p>If I throw an error within the container then the encapsulating error boundary catches and displays it. However, when the container is reloaded via clicking on a Navbar link the useEffect\naction does not trigger. Subsequently, the fetchCourses action is not dispatched.</p>\n\n<p>Why is the <em>useEffect</em> hook not triggered on second load after it previously threw an error?</p>\n\n<p>Have tried suggestion in comments to redirect to an error page instead of throwing the error. This resulted in the error displayed in the image below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4oQLw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4oQLw.jpg\" alt=\"Error screenshot when redirect to /error page\"></a></p>\n\n<p>The <em>useEffect</em> seems to be triggered with this approach, each time the page is visited. However, I think that what is happening is that there is a race condition occurring between <em>useEffects</em> and the render on each subsequent visit to the page. The inspection of the error state and redirection to /error seems to be happening while a fetch is in progress..... Maybe resort to using a class component, unless there is a way to wait for <em>useEffects</em> to complete before rendering?</p>\n\n<p>Another suggestion is to use  tag instead of <code>history.push(url)</code>. This was successful in the sense that no error was displayed in console related to transitive state. Nearly there now....experiencing the following behaviour:</p>\n\n<ol>\n<li>Stop external API server</li>\n<li>Visit the container page (CourseList). On load it makes the request via dispatching fetch action onto redux store.</li>\n<li>Fetch Error state is then detected on redux store and redirected to error page.</li>\n<li>Start external API server again</li>\n<li>Visit the container page (CourseList) page again. Redirected to error page.</li>\n<li>Revisit the container page (CourseList) page again. CourseList displayed.</li>\n</ol>\n\n<p><strong>Error Boundary Component</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React, { Component, ErrorInfo, ReactNode } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\n\nimport * as stackTrace from 'stacktrace-js';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { UnregisterCallback } from 'history';\nimport Box from '@material-ui/core/Box';\n\ntype ErrorBoundaryProps = {};\ntype ErrorBoundaryState = {\n  hasError: boolean;\n  error?: Error;\n  info?: ErrorInfo;\n};\n\nclass ErrorBoundary extends Component&lt;\n  ErrorBoundaryProps &amp; RouteComponentProps,\n  ErrorBoundaryState\n&gt; {\n  private static homePath = '/';\n\n  private unlisten!: UnregisterCallback;\n\n  constructor(props: ErrorBoundaryProps &amp; RouteComponentProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: undefined,\n      info: undefined,\n    };\n    this.goHome = this.goHome.bind(this);\n  }\n\n  componentDidMount(): void {\n    this.unlisten = this.props.history.listen(() =&gt; {\n      if (this.state.hasError) {\n        this.setState({ hasError: false });\n      }\n    });\n  }\n\n  componentWillUnmount(): void {\n    this.unlisten();\n  }\n\n  async componentDidCatch(error: Error, info: ErrorInfo): Promise&lt;void&gt; {\n    console.log(`Error =&gt; ${JSON.stringify(error)}`);\n    console.log(`ErrorInfo =&gt; ${JSON.stringify(info)}`);\n    this.setState({\n      hasError: true,\n      error: APP_CONF.isProd ? await this.normaliseError(error) : error,\n      info: info,\n    });\n  }\n\n  goHome(): void {\n    this.props.history.push(ErrorBoundary.homePath);\n  }\n\n  render(): JSX.Element | ReactNode {\n    if (this.state.hasError) {\n      return (\n        &lt;p&gt;Error&lt;/p&gt;\n        // &lt;Dialog\n        //   open={this.state.hasError}\n        //   onClose={this.goHome}\n        //   aria-labelledby=\"alert-dialog-title\"\n        //   aria-describedby=\"alert-dialog-description\"\n        //   scroll=\"paper\"\n        // &gt;\n        //   &lt;DialogTitle\n        //     disableTypography\n        //     id=\"alert-dialog-title\"\n        //     style={{ backgroundColor: 'lightseagreen', color: 'cyan' }}\n        //   &gt;\n        //     &lt;Typography variant=\"h6\"&gt;\n        //       {this.state.error\n        //         ? this.state.error.message\n        //         : 'error message unavailable'}\n        //     &lt;/Typography&gt;\n        //   &lt;/DialogTitle&gt;\n        //   &lt;DialogContent&gt;\n        //     &lt;DialogContentText component=\"div\" id=\"alert-dialog-description\"&gt;\n        //       &lt;Typography\n        //         variant=\"caption\"\n        //         style={{ color: 'midnightblue' }}\n        //         component=\"span\"\n        //       &gt;\n        //         &lt;Box textAlign=\"justify\" mt={1} style={{ whiteSpace: 'pre' }}&gt;\n        //           {this.state.error\n        //             ? this.state.error.stack\n        //             : 'stack trace unavailable'}\n        //         &lt;/Box&gt;\n        //         &lt;Box textAlign=\"justify\" mt={1} style={{ whiteSpace: 'pre' }}&gt;\n        //           {this.state.info &amp;&amp; APP_CONF.mode !== 'production'\n        //             ? this.state.info.componentStack\n        //             : 'component stack unavailable in production'}\n        //           &lt;br /&gt;\n        //         &lt;/Box&gt;\n        //       &lt;/Typography&gt;\n        //     &lt;/DialogContentText&gt;\n        //   &lt;/DialogContent&gt;\n        //   &lt;DialogActions&gt;\n        //     &lt;Button onClick={this.goHome}&gt;Home&lt;/Button&gt;\n        //   &lt;/DialogActions&gt;\n        // &lt;/Dialog&gt;\n      );\n    }\n\n    return this.props.children;\n  }\n\n  private async normaliseError(error: Error): Promise&lt;Error&gt; {\n    const stackFrames: Array&lt;\n      stackTrace.StackFrame\n    &gt; = await stackTrace.fromError(error);\n\n    const stack: string = stackFrames.reduce((prev, cur) =&gt; {\n      return prev.toString() + cur.toString() + '\\n';\n    }, '');\n\n    return {\n      name: error.name,\n      message: error.message,\n      stack: stack.trim(),\n    };\n  }\n}\n\nexport default withRouter(ErrorBoundary);\n</code></pre>\n\n<p><strong>Routing</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import React, { Component, Suspense, lazy } from 'react';\n\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nimport ErrorBoundary from '../errors/ErrorBoundary';\nimport { NavBar } from './NavBar/NavBar';\n\n/**\n * Lazy load definitions\n */\nconst About = lazy(() =&gt;\n  import(\n    /*\n  webpackChunkName: \"about-page\",\n  webpackPrefetch: true\n  */ '../views/About/About'\n  ),\n);\n\nconst CourseList = lazy(() =&gt;\n  import(\n    /*\n  webpackChunkName: \"course-list\",\n  webpackPrefetch: true\n  */ '../containers/CourseList'\n  ),\n);\n\nconst Home = lazy(() =&gt;\n  import(\n    /*\nwebpackChunkName: \"home-page\",\nwebpackPrefetch: true\n*/ '../views/Home/Home'\n  ),\n);\n\ntype AppProps = {};\n\nexport class App extends Component&lt;AppProps, {}&gt; {\n  public render(): JSX.Element {\n    return (\n      &lt;BrowserRouter&gt;\n        &lt;div&gt;\n          &lt;NavBar /&gt;\n          &lt;Suspense fallback={&lt;div&gt;LoaderOptionsPlugin...&lt;/div&gt;}&gt;\n            &lt;Switch&gt;\n              &lt;Route path=\"/\" component={Home} exact&gt;&lt;/Route&gt;\n              &lt;Route path=\"/about\" component={About}&gt;&lt;/Route&gt;\n              &lt;Route\n                path=\"/courses\"\n                render={(props): JSX.Element =&gt; (\n                  &lt;ErrorBoundary {...props}&gt;\n                    &lt;CourseList /&gt;\n                  &lt;/ErrorBoundary&gt;\n                )}\n              &gt;&lt;/Route&gt;\n              {/* &lt;Route component={Error404}&gt;&lt;/Route&gt; */}\n            &lt;/Switch&gt;\n          &lt;/Suspense&gt;\n        &lt;/div&gt;\n      &lt;/BrowserRouter&gt;\n    );\n  }\n}\n</code></pre>\n"}, {"tags": ["html", "angular", "typescript", "angular7"], "comments": [{"owner": {"reputation": 7629, "user_id": 978005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9219975d0b744e19422761516d419f12?s=128&d=identicon&r=PG", "display_name": "Phix", "link": "https://stackoverflow.com/users/978005/phix"}, "edited": false, "score": 0, "creation_date": 1572382651, "post_id": 58615279, "comment_id": 103540398, "body": "I believe you need to also put it in exports of CoreModule. Also, what&#39;s HomeHeaderComponent?"}], "answers": [{"tags": [], "owner": {"reputation": 183792, "user_id": 1749403, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/g0aFU.png?s=128&g=1", "display_name": "Sajeetharan", "link": "https://stackoverflow.com/users/1749403/sajeetharan"}, "is_accepted": false, "score": 2, "last_activity_date": 1572382652, "creation_date": 1572382652, "answer_id": 58615327, "question_id": 58615279, "link": "https://stackoverflow.com/questions/58615279/child-component-html-is-not-rendering-while-is-in-the-dom/58615327#58615327", "title": "Child component HTML is not rendering while is in the DOM", "body": "<p>You need to export the HomeHeaderComponent in order to use it in the AppModule,</p>\n\n<pre><code>import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { HeaderSearchBarComponent } from \"./components/header-search- \nbar/header-search-bar\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule\n    ],\n    declarations: [\n        HomeHeaderComponent\n    ]\n    exports : [\n        HomeHeaderComponent\n    ]\n })\n export class CoreModule {}\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 5147771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c61a9937dae3b38592192429246711a?s=128&d=identicon&r=PG&f=1", "display_name": "ahsan", "link": "https://stackoverflow.com/users/5147771/ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572382652, "creation_date": 1572382437, "question_id": 58615279, "link": "https://stackoverflow.com/questions/58615279/child-component-html-is-not-rendering-while-is-in-the-dom", "title": "Child component HTML is not rendering while is in the DOM", "body": "<p>I have create a general search component and declare in CoreModule and imported the module in the CoreModule.</p>\n\n<p>Now, when I'm using the general search component its HTML is not rendering in the DOM but when inspect element in the browser, selector of the component is on the same place but not  having its inner HTML.</p>\n\n<p>Search Component HTML:</p>\n\n<pre><code>&lt;div&gt;\n&lt;a class=\"header-link search-link\"&gt;\n    &lt;i class=\"fa fa-search icon text-white\" aria-hidden=\"true\"&gt;&lt;/i&gt;\n    &lt;p class=\"site-header-text text-white\"&gt;Search&lt;/p&gt;\n&lt;/a&gt;\n&lt;div class=\"onclick-search-div mb-3 position-relative\" style=\"display:none;\"&gt;\n    &lt;input type=\"text\" class=\"referling-search\" placeholder=\"ClassPass .etc\" aria-describedby=\"basic-addon2\"&gt;\n    &lt;i class=\"fa fa-search search-icon position-absolute\" aria-hidden=\"true\"&gt;&lt;/i&gt;\n    &lt;div class=\"searched-items\"&gt;\n        &lt;ul class=\"bgWhite\"&gt;\n            &lt;li&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Search Component TS:</p>\n\n<pre><code>import { Component } from \"@angular/core\";\n@Component({\n  selector: 'app-header-search-bar',\n  templateUrl: './header-search-bar.html',\n  styleUrls:['./header-search-bar.css']\n})\nexport class HeaderSearchBarComponent {\n   constructor() {}\n}\n</code></pre>\n\n<p>CoreModule:</p>\n\n<pre><code>import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { HeaderSearchBarComponent } from \"./components/header-search- \nbar/header-search-bar\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule\n    ],\n    declarations: [\n        HomeHeaderComponent\n    ]\n })\n export class CoreModule {}\n</code></pre>\n\n<p>AppModule:</p>\n\n<pre><code>import { NgModule } from \"@angular/core\";\nimport { CommonModule } from\"@angular/common\";\nimport { HomeComponent } from \"./components/home/home.component\";\nimport { CoreModule } from './core/core.module';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        CoreModule \n    ],\n    declarations: [\n        HomeComponent\n    ]\n})\nexport class CoreModule {}\n</code></pre>\n\n<p>HomeComponent.html:</p>\n\n<pre><code>&lt;app-header-search-bar&gt;&lt;/app-header-search-bar&gt;\n</code></pre>\n"}, {"tags": ["json", "typescript", "mocking"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1572416758, "post_id": 58615173, "comment_id": 103548021, "body": "set <code>&quot;traceResolution&quot;: true</code> and search the output for  <code>..&#47;..&#47;mocks&#47;FAQ.json</code>"}], "answers": [{"tags": [], "owner": {"reputation": 747, "user_id": 8762597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zbGl.jpg?s=128&g=1", "display_name": "Emon", "link": "https://stackoverflow.com/users/8762597/emon"}, "is_accepted": false, "score": 0, "last_activity_date": 1572424989, "creation_date": 1572424989, "answer_id": 58621438, "question_id": 58615173, "link": "https://stackoverflow.com/questions/58615173/fail-to-import-json-typescript/58621438#58621438", "title": "Fail to import JSON typescript", "body": "<p>It should work if you set <code>\"resolveJsonModule\": true</code>. and save <code>tsconfig.json</code> like:</p>\n\n<pre><code>import * as MOCK_FAQ from '../../mocks/FAQ.json';\n</code></pre>\n\n<p>Or you can try another way to import json file as below:</p>\n\n<pre><code>const MOCK_FAQ = require('../../mocks/FAQ.json');\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572424989, "creation_date": 1572381944, "question_id": 58615173, "link": "https://stackoverflow.com/questions/58615173/fail-to-import-json-typescript", "title": "Fail to import JSON typescript", "body": "<p>I need to use mock json to test my front-end render.</p>\n\n<pre><code>import MOCK_FAQ from '../../mocks/FAQ.json';\n</code></pre>\n\n<p>When I try to import the file i got this exception:</p>\n\n<pre><code>Cannot find module '../../mocks/FAQ.json'. Consider using '--resolveJsonModule' to import module with '.json' extensionts(2732)\n</code></pre>\n\n<p>But I'm ready using this property on my tsconfig file:</p>\n\n<pre><code>{\n\"compilerOptions\": {\n\"allowJs\": true,\n\"allowSyntheticDefaultImports\": true,\n\"resolveJsonModule\": true,\n\"esModuleInterop\": true,\n\"isolatedModules\": true,\n\"jsx\": \"react\",\n\"lib\": [\n  \"dom\",\n  \"es6\"\n],\n\"moduleResolution\": \"node\",\n\"noEmit\": true,\n\"strict\": true,\n\"target\": \"esnext\"\n  },\n \"exclude\": [\n\"node_modules\",\n\"babel.config.js\",\n\"metro.config.js\",\n\"jest.config.js\"\n ]\n}\n</code></pre>\n\n<p>Someone can helps? o/</p>\n"}, {"tags": ["typescript", "types", "type-inference"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1572384046, "post_id": 58615109, "comment_id": 103540920, "body": "After making some research it looks like there is no type-safe way to do that, and unfortunately cast <code>any</code> is unavoidable here."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572385591, "post_id": 58615109, "comment_id": 103541439, "body": "@zerkms and perfectly acceptable... So it seems a type guard has not to be type safe, after all."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572386902, "post_id": 58615109, "comment_id": 103541789, "body": "@A.Chiesa &quot;and perfectly acceptable&quot; --- it depends, I don&#39;t believe I know JS better than tsc."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572387262, "post_id": 58615109, "comment_id": 103541883, "body": "@zerkms if you don&#39;t know if code as complicated as <code>myObject &amp;&amp; typeof myObject.data === &quot;string&quot;</code> can throw errors or not in JS, you shouldn&#39;t work with TS. But I think you know, and you&#39;re just pretending for the sake of it ;) TS <i>is</i> JS with types, and truthy and falsy values are really the basics."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572387331, "post_id": 58615109, "comment_id": 103541898, "body": "@A.Chiesa I know yep, but I don&#39;t trust myself - I make mistakes, and <code>tsc</code> does not* :-) And I agree though that this would be a <i>very rare</i> case when <code>any</code> is unavoidable."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1572475846, "post_id": 58615109, "comment_id": 103576205, "body": "@zerkms I thought a lot about your assertion and there is merit in the checking of property keys. I elaborated (quite a bit) my original answer with a proposal for an type guard factory, with type safe definitions. Thanks for the arguing! It was a useful discussion."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572475991, "post_id": 58615109, "comment_id": 103576243, "body": "@A.Chiesa at that degree of safety I&#39;d simply take <code>io-ts</code> <a href=\"https://github.com/gcanti/io-ts\" rel=\"nofollow noreferrer\">github.com/gcanti/io-ts</a> because you implemented a very shallow version of it now"}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572476360, "post_id": 58615109, "comment_id": 103576355, "body": "@zerkms io-ts seems interesting, but I fear the complexity of it for the introduction in my team. Is the learning curve as steep as it seems? Skimming through the docs I see a lot of pretty esoteric examples."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572477295, "post_id": 58615109, "comment_id": 103576590, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201625/discussion-between-zerkms-and-a-chiesa\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572382632, "post_id": 58615294, "comment_id": 103540391, "body": "My personal tip would also be to use <code>unknown</code> not <code>any</code> in type guards."}, {"owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "edited": false, "score": 1, "creation_date": 1572382725, "post_id": 58615294, "comment_id": 103540424, "body": "Your method works because the <code>myObject</code> argument is of type <code>any</code>, not <code>unknown</code>. If possible, I would prefer to use <code>unknown</code>, since <code>any</code> opens up a lot more roof for mistakes, which I indicated in my question."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572383601, "post_id": 58615294, "comment_id": 103540772, "body": "Well, I would say unknown is perfectly useless in a type guard: you are effectively &quot;sniffing&quot; the type using only plain JavaScript."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1572383688, "post_id": 58615294, "comment_id": 103540802, "body": "&quot;unknown is perfectly useless in a type guard&quot; --- it&#39;s the opposite: <code>unknown</code> is extremely useful because it protects you from making assumptions <code>any</code> allows you to do. &quot;you are effectively &quot;sniffing&quot; the type using only plain JavaScript.&quot; --- exactly, that&#39;s the very point of the <code>unknown</code> type."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572383979, "post_id": 58615294, "comment_id": 103540901, "body": "A type guard is NOT type safe. It makes <i>the rest</i> of the code type safe. Do not overestimate the power of unknown: it allows you to not call properties which are not known to be present. But the WHOLE POINT of a type guard id to check if a &quot;something&quot; conforms to an interface. And the only way you do it is peeking into it for properties that are not known to exist (yet!)."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572384096, "post_id": 58615294, "comment_id": 103540939, "body": "&quot;A type guard is NOT type safe&quot; --- a type guard implementation <b>must be</b> type safe. It&#39;s its job to ensure a value is of a particular type and <b>guarantee</b> to never throw in runtime."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572384240, "post_id": 58615294, "comment_id": 103540994, "body": "Oh my. &quot;Type safe&quot; means that your code is safe because it knows about the type of what is using. A type guard doesn&#39;t know what is using, and is necessary so the rest of your code can be type safe. However, the bit about &quot;guarantee to never throw in runtime&quot; is correct: a type guard must manage everything that can be thrown at it."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572384332, "post_id": 58615294, "comment_id": 103541033, "body": "@A.Chiesa without &quot;type safety&quot; the implementation is not <b>guaranteed</b> to not throw, you just hope you did not miss some edge case. &quot;A type guard doesn&#39;t know what is using&quot; --- that&#39;s correct, that&#39;s why <code>unknown</code> type was introduced."}], "tags": [], "owner": {"reputation": 146, "user_id": 9788471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Martin Sommer", "link": "https://stackoverflow.com/users/9788471/martin-sommer"}, "is_accepted": false, "score": 0, "last_activity_date": 1572385711, "last_edit_date": 1572385711, "creation_date": 1572382493, "answer_id": 58615294, "question_id": 58615109, "link": "https://stackoverflow.com/questions/58615109/can-typescript-infer-the-properties-of-an-object/58615294#58615294", "title": "Can TypeScript infer the properties of an object?", "body": "<p>did you try using the \"in\" operator? <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#using-the-in-operator\" rel=\"nofollow noreferrer\">Doc</a></p>\n\n<pre><code>type DataObject = {\n  data: string\n};\n\nfunction hasDataProperty(myObject: any): myObject is DataObject {\n    return \"data\" in myObject\n}\n\nlet a = {data: 'a'}\nif (hasDataProperty(a)) {\n  console.log(a.data); //\n} else {\n  console.log(a.data); //error\n}\n</code></pre>\n\n<p>Seems like it exactly does what you want except that it does not check the type.</p>\n\n<p>Just to make sure I'd add another type check like this:</p>\n\n<pre><code>function hasDataProperty(myObject: any): myObject is DataObject {\n    return \"data\" in myObject &amp;&amp; typeof myObject.data === 'string'\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Sorry for cheating. Now with a two step approach:</p>\n\n<pre><code>type DataObject = {\n  data: string\n};\n\nfunction hasDataProperty(myObject: unknown): myObject is DataObject {\n  function hasDataPropertyAny(myObject: any): myObject is DataObject {\n    return \"data\" in myObject &amp;&amp; typeof myObject.data === 'string';\n  }\n  if (!!myObject &amp;&amp; typeof myObject === 'object') {\n    return hasDataPropertyAny(myObject);\n  } \n  return false;\n}\n\nconst tests = [\n  { data: 'foobar' } as unknown,\n  { data: 42 } as unknown,\n  42,\n  null,\n  undefined\n]\ntests.forEach((a: unknown) =&gt; {\n  if (hasDataProperty(a)) {\n    console.log('DataObject value: ', a.data);\n  } else {\n    console.log('Not a DataObject!')\n  }\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1572384143, "post_id": 58615592, "comment_id": 103540961, "body": "It&#39;s actually <code>KISSANTS</code>, where <code>ANTS</code> stands for <code>and not type safe</code>"}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572384323, "post_id": 58615592, "comment_id": 103541027, "body": "Than write a type guard which is type safe (that is, that knows the type of what is passed on). Good luck with that."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572384408, "post_id": 58615592, "comment_id": 103541049, "body": "&quot;Than write a type guard which is type safe&quot; --- tbh, in my code bases all type guards are type safe and I have zero <code>any</code> or other unsafe casts. It&#39;s just this case that TS type system is not capable to express easily."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572384545, "post_id": 58615592, "comment_id": 103541090, "body": "Ok, so could please share an example? I&#39;m genuinely curious on how you access a property of <code>unknown</code> when you don&#39;t know it exists. I&#39;m not kidding: if it&#39;s possible, I want to know how it&#39;s done."}, {"owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "edited": false, "score": 0, "creation_date": 1572384624, "post_id": 58615592, "comment_id": 103541107, "body": "So am I @A.Chiesa, that&#39;s why I asked this question :)"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572384669, "post_id": 58615592, "comment_id": 103541123, "body": "@A.Chiesa I don&#39;t think it&#39;s possible with the current TS type system tools (I&#39;m not a TS expert though). In my apps no type guards presumably type assert objects (I use <code>io-ts</code> for that), and for primitive types it&#39;s possible to use <code>unknown</code> only."}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "reply_to_user": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "edited": false, "score": 0, "creation_date": 1572384796, "post_id": 58615592, "comment_id": 103541170, "body": "@Adam you can throw whatever you want to the guard I wrote: it will not throw and it will return true only if the object has a <code>data</code> property of type string. I don&#39;t know what&#39;s more safe. It&#39;s <i>not</i> type safe, however, but my point is you don&#39;t need to. This is the ONLY place you need to use any: because you can&#39;t use unknown if you need to access the object."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1572476034, "post_id": 58615592, "comment_id": 103576260, "body": "Now we&#39;re coming somewhere :-D I like your effort though!"}], "tags": [], "owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "is_accepted": false, "score": 2, "last_activity_date": 1572475738, "last_edit_date": 1572475738, "creation_date": 1572384086, "answer_id": 58615592, "question_id": 58615109, "link": "https://stackoverflow.com/questions/58615109/can-typescript-infer-the-properties-of-an-object/58615592#58615592", "title": "Can TypeScript infer the properties of an object?", "body": "<p>The problem you have is that the bit <code>typeof myObject === \"object\"</code> tells the compiler that the myObject instance <em>is</em> effectively an Object. So TypeScript assumes in the rest of the expression that myObject is of type <code>{}</code>, which obviously is not.</p>\n\n<p>I would let go of <code>unknown</code>, in this method, and apply KISS:</p>\n\n<pre><code>function isDataObject(myObject: any): myObject is DataObject {\n    return myObject &amp;&amp; typeof myObject.data === \"string\";\n}\n</code></pre>\n\n<p><strong>Edit</strong> after extensive discussions with zerkms and Adam.\nWell, I'm quite stubborn, so I continued picking on zerkms solutions. Turns out there <em>could</em> be a safer way to build Type Guards, and I'm going to propose it in the following.</p>\n\n<p>My idea is to use the compile time checks of the compiler to check a \"blueprint\" of the type guard. I'm going to define a ValidatorDefinition as in the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export type ValidatorTypes =\n  | \"string\"\n  | \"boolean\"\n  | \"number\"\n  | \"array\"\n  | \"string?\"\n  | \"boolean?\"\n  | \"number?\";\n\nexport type ValidatorDefinition&lt;T&gt; = {\n  [key in keyof T]: T[key] extends string\n    ? \"string\" | \"string?\"\n    : T[key] extends number\n    ? \"number\" | \"number?\"\n    : T[key] extends boolean\n    ? \"boolean\" | \"boolean?\"\n    : (T[key] extends Array&lt;infer TArrayItem&gt;\n        ? Array&lt;ValidatorDefinition&lt;TArrayItem&gt;&gt;\n        : ValidatorTypes);\n};\n</code></pre>\n\n<p>So each property of a simple type must be associated to a string defining exactly the kind of validation.<br>\nThen, I'm going to build a TypeGuard factory:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function typeGuardFactory&lt;T&gt;(\n  reference: ValidatorDefinition&lt;T&gt;\n): (value: any) =&gt; value is T {\n  const validators: ((propertyValue: any) =&gt; boolean)[] = Object.keys(\n    reference\n  ).map(key =&gt; {\n    const referenceValue = (&lt;any&gt;reference)[key];\n    switch (referenceValue) {\n      case \"string\":\n        return v =&gt; typeof v[key] === \"string\";\n      case \"boolean\":\n        return v =&gt; typeof v[key] === \"boolean\";\n      case \"number\":\n        return v =&gt; typeof v[key] === \"number\";\n      case \"string?\":\n        return v =&gt; v[key] == null || typeof v[key] === \"string\";\n      case \"boolean?\":\n        return v =&gt; v[key] == null || typeof v[key] === \"boolean\";\n      case \"number?\":\n        return v =&gt; v[key] == null || typeof v[key] === \"number\";\n      default:\n        // we are not accepting null/undefined for empty array... Should decide how to\n        // handle/configure the specific case\n        if (Array.isArray(referenceValue)) {\n          const arrayItemValidator = typeGuardFactory&lt;any&gt;(referenceValue[0]);\n          return v =&gt; Array.isArray(v[key]) &amp;&amp; v[key].every(arrayItemValidator);\n        }\n        // TODO: handle default case\n        return _v =&gt; false;\n    }\n  });\n  return (value: T): value is T =&gt;\n    (value &amp;&amp; validators.every(validator =&gt; validator(value))) || false;\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>type DataObject = {\n  data: string\n};\nconst hasDataObject = typeGuardFactory&lt;DataObject&gt;({ data: \"string\" });\n</code></pre>\n\n<p>The nice thing is that if you misspell the definition of the Validator, you'll get compile time errors.</p>\n\n<p>Some simple unit testing code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const validatorForDataObject = typeGuardFactory({ data: \"string\" });\n\nconst testCases: { value: any; expected: boolean }[] = [\n  { value: null, expected: false },\n  { value: undefined, expected: false },\n  { value: { data: 0 }, expected: false },\n  { value: { data: \"0\" }, expected: true }\n];\n\ntestCases.forEach(testCase =&gt; {\n  const testResult = validatorForDataObject(testCase.value);\n  if (testResult === testCase.expected) {\n    console.info(`Success (with value ${testResult})`, testCase.value);\n  } else {\n    console.error(`Fail (with value ${testResult})`, testCase.value);\n  }\n});\n\ninterface AnotherType {\n  stringProp: string;\n  numberProp: number;\n  booleanProp: boolean;\n  nullableStringProp?: string;\n  nullableNumberProp?: number;\n  nullableBooleanProp?: boolean;\n  arrayProp: {\n    data: string;\n  }[];\n}\n\nconst validatorForAnotherType = typeGuardFactory&lt;AnotherType&gt;({\n  stringProp: \"string\",\n  numberProp: \"number\",\n  booleanProp: \"boolean\",\n  nullableStringProp: \"string?\",\n  nullableNumberProp: \"number?\",\n  nullableBooleanProp: \"boolean?\",\n  arrayProp: [\n    {\n      data: \"string\"\n    }\n  ]\n});\n\nconst testCases2: { value: any; expected: boolean }[] = [\n  { value: null, expected: false },\n  { value: undefined, expected: false },\n  { value: { data: 0 }, expected: false },\n  {\n    value: {\n      stringProp: \"string\",\n      numberProp: 1,\n      booleanProp: true,\n      nullableStringProp: \"string\",\n      nullableNumberProp: 1,\n      nullableBooleanProp: false,\n      arrayProp: [{ data: \"\" }]\n    },\n    expected: true\n  },\n  {\n    value: {\n      stringProp: \"string\",\n      numberProp: 1,\n      booleanProp: true,\n      nullableStringProp: null,\n      nullableNumberProp: null,\n      nullableBooleanProp: null,\n      arrayProp: []\n    },\n    expected: true\n  },\n  {\n    value: {\n      stringProp: \"string\",\n      numberProp: 1,\n      booleanProp: true,\n      nullableStringProp: \"string\",\n      nullableNumberProp: null,\n      nullableBooleanProp: null,\n      arrayProp: [{ data: \"\" }, { data: \"\" }, { data: 0 }]\n    },\n    expected: false\n  },\n  {\n    value: {\n      stringProp: \"string\",\n      numberProp: 1,\n      booleanProp: true,\n      nullableStringProp: \"string\",\n      nullableNumberProp: null,\n      nullableBooleanProp: null,\n      arrayProp: [{ data: \"\" }, { data: \"\" }, { data: 0 }]\n    },\n    expected: false\n  },\n  {\n    value: {\n      stringProp: null,\n      numberProp: 1,\n      booleanProp: true,\n      nullableStringProp: null,\n      nullableNumberProp: null,\n      nullableBooleanProp: null,\n      arrayProp: []\n    },\n    expected: false\n  }\n];\n\ntestCases2.forEach(testCase =&gt; {\n  const testResult = validatorForAnotherType(testCase.value);\n  if (testResult === testCase.expected) {\n    console.info(`Success (with value ${testResult})`, testCase.value);\n  } else {\n    console.error(`Fail (with value ${testResult})`, testCase.value);\n  }\n});\n</code></pre>\n\n<p>The funny thing is that, still, the validation code makes plenty of use of <code>any</code>, but everything else in the porcelain world outside the guard seems pretty solid. It's just a sketch, but I think it shows some potential.</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=1&amp;ssc=1&amp;pln=170&amp;pc=1#code/KYDwDg9gTgLgBDAnmYcBqBDANgSwCYYzQAqywAznALwCwAUHHAD5wBE5MUOAdgOav1GLVgCMIELMAzcBDZm24BXALYjgUWULYYoUDIk3z2nHrwD8h4WIlTuFwUaWr1FgNz16oSLARl02fEJoABFgADMeHBgcCG4AHmIAPmo4AG8HAG0Aa2BEOB44HMQIMLhiAF0ALjLs3PK4UBhgbjxKDi4%20B0YzNnbTViM%20vns5RmriWsR6xubWuCc1KC64HtYF9QHhdagRxjGaoumQJpbKa0lpZdXz2022G%20ldveqACgnDhuPZygBBXX04jwwuoyn89IgAJJNZSJZZ7FZwMEAzC4AhEKChCLcKIxeLEJGQ6GJWGjeFwaoowLo0gocgASncdAAvoz6GFFNwAMbRWK%20FAAcUUOjwADEMNzoIgEokXg4oOF1M1OcAKQE0SFwpEeXiSXTXgA3bCKFVwaSIOnUZKGrDG-KUYhpByc2IcODWqnQcivF5gKAQFCwRAo43VM0WqjJB7cOkZepUOAAeREACtgNyAHRFciy0ny4HyrnABx09PKDBgF5FS2O0nO7iuvOKwvB1Dxl5xM2JRsF5Uxw6M%20HkADuUU5AAs4C9u0rgC2LelSYxORhyKhjB1%20JU4Xt5TBFFBuG7q0gUCU3ZM41R4%20v%20gOycvV-dxBcZFvFzvgHuD0eI3zgGf9QvagryfGxpFYO94QfNdtlYN8yQ-L9D31Y8yAAoCr2vWDIL2aDehMYY4O3Rhd33ZDq0Aj4QKULAsGYFgT3-UpKLqYDryGfgcKXFc1yjCx4IQuBSO-FDfxYqZgPmRRaPov90KokDRGfW4uLgPC1hURZ%20OIoTPzIn8rQw%20MaLopgGLQ5ijKwzSNlUvBwgwaSYAEhCAHpXLgIdUB0VBuAgeBxWVMBoj4KTaNcjl7KxYA8DgMJoAaZRgryHRwXTdK4AAZTHCBpNi%20zOXwVAcqHBAIB09y4DHaQ8EkVy6wiXh91QGAx1QcgUEKiJOTUnidJwUoXgJdMcHIAkpwVHtZyNYA6XnHSlxdAL-kJYBlEpdUoBSRjBWFMUJSgKVOwm-MZxbDIAAZygZBbdKQgzERWkaxpWl5xOuuAADJPvPQ502AfV1EQF5Uv0KE1o2oIoBu99GCZCqPOIBNggTapqpaSQ4CixysHgaCdOEw8AH1ROSMJsFXHD4bkJkYZIvTvzembxj1N0ZrtMpLWWJmbVQb62dRKHyH%20wHDp5j0trEtUoZ5405otMy4op4BGWp%20g61dd1NpFEJCAwJNU25bayF2qBRXFdFgdSLG9eqG8%20AGWnWToDX4CaDgAGEeK9NIBZDU1uEQVxPk6po8GqKM4CZWMUgyBxretf2TIAGhDtMw%20qcmsEfJlk-jv2TUizVuBi1OvHTmLM%20VqO87kBPmd9tEMGqC6a7T7lK6V7PUFz-PE5Na2m7ti7HbL8AK-DhAoFtanymd92YC91dhfiqAAFFxTHF4F6X1tkgXRb6zdigYAAJQoJyUi1qGdYxPWDfT7eT939N%207p-JBoX8-yEvzCEGfni-1x4dzwPNWsLobAjW4PFF4AADTKihOTKnIJQF4I5WoFzgAAElSF-C%20uNaawNTjvQBb87xMgaN3GsUEIGSH%20roaAcCxQ4DomgqIE5%207YNwSfb%20TlCHEIAauV%20M137Uydh4OgPAmhQHJsqREflWrqBpKgA%20cAOIAAU-RgGqBxO82xNH%20mqNsO8UYDHaLgFGPR0ksAYBEJITKBFeBmLMDoxxVjaK2MkAAORslAZxRjfHuJsXY4AAAhZS0h-EWIidwO8oNEBmOqKoxgQ81FuIcNHOe9A1YuyWgLCWt8fgKLalAZRxsBRCjNvtS2cQin%20RKcomUqiNFaLthxVgtdGD6NaQoXxHSHCmJ6UpMCMhOlhWCfYxxiT8IbgsGMkynjgA%20OcH4oZ2w5kOAWSE8JIzpnDJfBsuQ8Tplx1JMkvYqT7b8GWNTRg5Rskw3Vnkkhy8ABMSSC6hkDsHcuICI4xKjjHeMpzGD115gE2iY9Q6dyzjnMZYL-ZF2ingKFE8q5UN7nXT5jdbZwFbrnduGcu5wvjssfuSTtwtMMTM-oYz4TdOpQARjpXsQZ1LODGhZV06xiyHEbj2e0rl4zFnLMWNM5l24tmSB2S%20aZsLgBCuOT0jIg9cWsEdvc0kmL4S-KJRyosNN4VkobucxgVLzFXP6e%20Bl5iJXvjZeY-VQqpXAD5aYaZKdJU8pCaK9QHrrHOu9dKmJ-rIXbiVdS2MNyWW6s7vqjJRrSTkuoWSc1bTHFWoQja6odqEIOuqE6r1HiQlur4AKjNgbi3eN8aGrAlaJlhJDT0z174I3mJVTbGAzc2CjxxV2u2vbVX9rxVHTV8JtV7FjZPeVCbSVJpNZSqZQzBVepWeKoV%20ap6cqLQ20tTjl0Vp3SKmtzaA1Hu2U26lLaEJtuqB2y5g7O3dvVW3Id3b8Vjr2BOxgU70WrlnXXY14KU2DiXVes91qT1Mo3Zex108FXnsmfy09YbINVqWVB8x16yQuplbYWtiqVonM-XDGNwCiUzppvQLJdB6AvIoK89Mq8N7jifp7Hi1ZVGu3-hwXhuMr7S3RIU4pSiyBscXqQkRd4BqTjwT-fjf96NAOhaAkDalaHACgTA%20BiDkGoPQRw9mOC5N8LpEQnjEmhFkIyZQx85yNaQPUH6KATCMAsMnAZzBxmeH4JgPwizL9rNUeZDDIAA\" rel=\"nofollow noreferrer\">The full snippet</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572454465, "post_id": 58616683, "comment_id": 103567725, "body": "What kind of safety? <code>any</code> is not a demon: it means just plain JavaScript for 1 line of code. YMMV, so, if you prefer this way, do it, but I see a lot more possible bugs in this implementation than in mine."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572464000, "post_id": 58616683, "comment_id": 103572004, "body": "@A.Chiesa share any?"}, {"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572464510, "post_id": 58616683, "comment_id": 103572206, "body": "I asked first ;) what kind of safety? You still have the burden of checking every single property, spelling it correctly, and your checks are EXACTLY the same as <code>obj &amp;&amp; typeof obj.data === &#39;string&#39;</code>. What is better and effectively more safe?"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572464938, "post_id": 58616683, "comment_id": 103572396, "body": "@A.Chiesa &quot;and your checks are EXACTLY the same as&quot; --- tinyurl.com/yy7l4pk7 tinyurl.com/y6pfrkox (sorry for tinyurl, the links are too long) On the links you can see the case when a little change in the initial interface makes my solution type safer."}], "tags": [], "owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "is_accepted": false, "score": 2, "last_activity_date": 1572391023, "creation_date": 1572391023, "answer_id": 58616683, "question_id": 58615109, "link": "https://stackoverflow.com/questions/58615109/can-typescript-infer-the-properties-of-an-object/58616683#58616683", "title": "Can TypeScript infer the properties of an object?", "body": "<p>Ok, after googling and discussing it with somebody else I came to this solution:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type DataObject = {\n  data: string\n};\n\nfunction isDataObjectLike(v: unknown): v is { [K in keyof DataObject]: unknown } {\n  return typeof v === 'object'\n    &amp;&amp; v !== null\n    &amp;&amp; 'data' in v;\n}\n\nfunction hasDataProperty(v: unknown): v is DataObject {\n  return isDataObjectLike(v)\n    &amp;&amp; typeof v.data === 'string';\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=1&amp;ssc=1&amp;pln=14&amp;pc=2#code/C4TwDgpgBAIghsOB5ARgKwgY2FAvFAbwFgAoKKAEwTgC4oBnYAJwEsA7Ac1IF8BuU0gDMArm2wsA9mygt68RKgzYAMiwDWEABQA3OqLVsJAdzYBKOtpn1CUANoBpGdI0gJg2NUVZgAXT1sDY2luQlJyJghgYSZpUEg3KEtcZKgAcgl0b1Sw8igAMjzEqABCFLZhABsKnPICtKpEVKdE-hJuARIRMWBJaQALODlqAAUmCUgmUB1-QJNzItkPBUzsULIoCKiYq3lkFeBVDR1TGvzCuIgE7QA6Brg8FNTGVk5U1u4gA\" rel=\"nofollow noreferrer\">typescript/play</a></p>\n\n<p>Not that it is <em>significantly</em> better than the one with <code>any</code> but it provides more safety from the compiler.</p>\n"}, {"comments": [{"owner": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 0, "creation_date": 1572455386, "post_id": 58630274, "comment_id": 103568206, "body": "I seriously do not understand what problem this solution solves. You still have to check for each property presence, you still have to check the type of each property, your code still returns the same result of a simple one liner. If the DataObject contains more than one property, you still have to duplicate the checking code for each property and keep it updated (e.g. if you change the name of the &quot;data&quot; field in the interface, this code is going to give you a false security). Interfaces exist only when compiling: if you want &quot;true&quot; type safety, you must use classes and <code>instanceof</code>."}, {"owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "reply_to_user": {"reputation": 5329, "user_id": 1395758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/D5fXD.jpg?s=128&g=1", "display_name": "A. Chiesa", "link": "https://stackoverflow.com/users/1395758/a-chiesa"}, "edited": false, "score": 1, "creation_date": 1572461382, "post_id": 58630274, "comment_id": 103570939, "body": "@A.Chiesa, I think you&#39;re focusing too much on the type guard, which is just one example where something like this could be used.  My question could be simplified to: what is a typesafe alternative to <code>&quot;someKey&quot; in myObject</code>. Having that answered allows me to use <code>unknown</code> in cases where it might be useful, potentially in type guards, but also other cases."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1572465753, "post_id": 58630274, "comment_id": 103572729, "body": "Oh right, I see - it&#39;s cool. You should type it as <code>o is { [_ in K]: unknown } {</code> though perhaps. Also, given you type <code>o: {}</code> you probably don&#39;t need <code>typeof o === &#39;object&#39;</code> check as well."}], "tags": [], "owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "is_accepted": true, "score": 0, "last_activity_date": 1572454378, "creation_date": 1572454378, "answer_id": 58630274, "question_id": 58615109, "link": "https://stackoverflow.com/questions/58615109/can-typescript-infer-the-properties-of-an-object/58630274#58630274", "title": "Can TypeScript infer the properties of an object?", "body": "<p>While I do appreciate zerkms' answer, I would prefer to have a generic and type-safe method to determine if a parameter exists in an object.</p>\n\n<p>I did some further exploring and found a solution that I like better. <a href=\"https://github.com/microsoft/TypeScript/issues/10485\" rel=\"nofollow noreferrer\">I found this issue in the TypeScript repo</a>, which has the code block for <code>hasKey</code>, a type-safe way to determine if a key exists in an object.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export function hasKey&lt;K extends string&gt;(k: K, o: {}): o is { [_ in K]: {} } {\n  return typeof o === 'object' &amp;&amp; k in o\n}\n</code></pre>\n\n<p>While I would prefer to use the <code>in</code> operator, <code>hasKey</code> is an acceptable alternative for now. Here is how I can use it in my type guard:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type DataObject = {\n  data: string\n};\n\nexport function hasKey&lt;K extends string&gt;(k: K, o: {}): o is { [_ in K]: {} } {\n  return typeof o === 'object' &amp;&amp; k in o\n}\n\nfunction hasDataProperty(myObject: unknown): myObject is DataObject {\n    return typeof myObject === \"object\" &amp;&amp;\n      !!myObject &amp;&amp;\n      hasKey(\"data\", myObject) &amp;&amp;\n      typeof myObject.data === \"string\";\n}\n\n// Testing hasKey\nconst myThing: object = {};\nif (hasKey(\"myVariable\", myThing)) {\n  console.log(myThing.myVariable); // This does not error\n} else {\n  console.log(myThing.myVariable); // This errors\n}\n</code></pre>\n\n<p>Strangely, the above TypeScript issue was closed and \"fixed\", although the <code>in</code> operator still doesn't act as a type-guard for objects. <a href=\"https://github.com/microsoft/TypeScript/issues/21732\" rel=\"nofollow noreferrer\">There is a new issue here which seems to track something similar</a>, although that one is still open.</p>\n"}], "owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2448, "favorite_count": 0, "accepted_answer_id": 58630274, "answer_count": 4, "score": 2, "last_activity_date": 1572475738, "creation_date": 1572381620, "last_edit_date": 1572383300, "question_id": 58615109, "link": "https://stackoverflow.com/questions/58615109/can-typescript-infer-the-properties-of-an-object", "title": "Can TypeScript infer the properties of an object?", "body": "<p>I'm attempting to define a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\" rel=\"nofollow noreferrer\">user-defined type guard</a> to verify if a variable of <code>unknown</code> type has a <code>data</code> property. My code is defined below.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type DataObject = {\n  data: string\n};\n\nfunction hasDataProperty(myObject: unknown): myObject is DataObject {\n    return typeof myObject === \"object\" &amp;&amp;\n        !!myObject &amp;&amp;\n        typeof myObject.data === \"string\";\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/?ssl=5&amp;ssc=68&amp;pln=5&amp;pc=77#code/C4TwDgpgBAIghsOB5ARgKwgY2FAvFAbwFgAoKKAEwTgC4oBnYAJwEsA7Ac1IF8BuU0gDMArm2wsA9mygALOPXiIACkwmQmoABQBbEKgzY6ogNZsJAdzYBKOrv1YcLerGr3shUuXJMIwYU2lQSAlBKDt0BzxcfAAiCQjsGKgAMmTPLwyAQkzwgxxU9IzyXIcAOjl6JEsVNQgNEE0YqkQYqxS0siLyIIgQsL0E4FLmuCjYxlZOGP4SbiA\" rel=\"nofollow noreferrer\">Try it on the Typescript Playground.</a></p>\n\n<p>If you open the playground, you'll see an error on line 8 indicating <code>Property 'data' does not exist on type 'object'.</code>, which makes sense, because I haven't verified that the <code>data</code> property exists on <code>myObject</code>.</p>\n\n<p>I've tried using both <code>\"data\" in myObject</code> and <code>myObject.hasOwnProperty(\"data\")</code> to check if the property exists, but neither seem to affect TypeScript's inferred type of <code>myObject</code> to include <code>data</code>, it is still a plain <code>object</code> type.</p>\n\n<p>I could change the function signature to <code>hasDataProperty(myObject: any)</code> or use a type assertion to change the type from <code>unknown</code>, but both of those options ignore the object's actual properties, which could result in bugs in the type guard's logic.</p>\n\n<p>Is there a way to determine if <code>myObject</code> has a <code>data</code> property without the use of type assertions or <code>any</code>?</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "code-cleanup", "resource-cleanup"], "comments": [{"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572382615, "post_id": 58614955, "comment_id": 103540383, "body": "Can you add the html code as well? Using the angular <code>renderer2</code> should be the last resort."}, {"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572382802, "post_id": 58614955, "comment_id": 103540462, "body": "Also this might already be answered: <a href=\"https://stackoverflow.com/questions/46688843/how-does-angular-destroy-event-handlers-and-property-bindings-when-a-component-i\" title=\"how does angular destroy event handlers and property bindings when a component i\">stackoverflow.com/questions/46688843/&hellip;</a>"}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "reply_to_user": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572384493, "post_id": 58614955, "comment_id": 103541072, "body": "@DanielHabenicht: The html retrieved dynamically and isn&#39;t processed by angular. As as far as I know, needs to be processed manually (which this component is doing). The html would otherwise look a little like this: <code>&lt;div&gt;some &lt;a data-tag=&quot;link-target&quot;&gt;text&lt;&#47;a&gt;&lt;&#47;div&gt;</code>"}, {"owner": {"reputation": 1406, "user_id": 9277073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyqoKgXyDDU/AAAAAAAAAAI/AAAAAAAAAyo/-BZXbYAsJl0/photo.jpg?sz=128", "display_name": "Daniel Habenicht", "link": "https://stackoverflow.com/users/9277073/daniel-habenicht"}, "edited": false, "score": 0, "creation_date": 1572384689, "post_id": 58614955, "comment_id": 103541130, "body": "Ahh, ok. Then the other Stackoverflow should help :)"}], "answers": [{"comments": [{"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1572386587, "post_id": 58615689, "comment_id": 103541710, "body": "The elements are dynamically generated and not static so I&#39;m not sure if this applies. But even then, there are other perfectly good cases for needing something to happen at a certain point of an application lifecycle, in this case, cleanup. In any case, I would not prefer to let the GC handle it, even if it probably could with 100% certainty."}, {"owner": {"reputation": 15130, "user_id": 1679126, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/82c8608808b8c4c719e9d0c71fb5c366?s=128&d=identicon&r=PG", "display_name": "Adrian Brand", "link": "https://stackoverflow.com/users/1679126/adrian-brand"}, "reply_to_user": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1572388009, "post_id": 58615689, "comment_id": 103542076, "body": "That is what garbage collection is for, if two objects that reference each other both fall into garbage collection you don&#39;t need to break the reference between them. If you dynamically create a DOM element that will be destroyed when the component is destroyed you don&#39;t need to remove event handlers."}], "tags": [], "owner": {"reputation": 15130, "user_id": 1679126, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/82c8608808b8c4c719e9d0c71fb5c366?s=128&d=identicon&r=PG", "display_name": "Adrian Brand", "link": "https://stackoverflow.com/users/1679126/adrian-brand"}, "is_accepted": false, "score": -1, "last_activity_date": 1572384566, "creation_date": 1572384566, "answer_id": 58615689, "question_id": 58614955, "link": "https://stackoverflow.com/questions/58614955/pattern-for-cleaning-up-event-handlers-automatically-similar-to-subscriptions-d/58615689#58615689", "title": "Pattern for cleaning up event handlers automatically, similar to subscriptions deterministically", "body": "<p>You don't need to clean up event handlers on DOM elements that are part of the component, you would only need to clean up an event handler if the DOM element is still active after the component is destroyed.</p>\n\n<p>The reason you need to clean up subscriptions to observables returned from services is because those observables are still referenced after the component is destroyed, if you have an observable created by the component then you can let the whole component fall to garbage collection without worrying about subscriptions. Same thing for DOM elements.</p>\n"}, {"comments": [{"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1572568523, "post_id": 58642325, "comment_id": 103610202, "body": "I thought about doing that, but I&#39;m not sure whether it&#39;s advisable. I&#39;ve seen a lot of advice on avoiding using DOM methods (in-)directly and stick to using angular&#39;s api&#39;s (which is why I was using Renderer2)."}], "tags": [], "owner": {"reputation": 8533, "user_id": 9423231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54730771ababc9c107cf6dac3087b23?s=128&d=identicon&r=PG&f=1", "display_name": "frido", "link": "https://stackoverflow.com/users/9423231/frido"}, "is_accepted": false, "score": 0, "last_activity_date": 1572521069, "creation_date": 1572521069, "answer_id": 58642325, "question_id": 58614955, "link": "https://stackoverflow.com/questions/58614955/pattern-for-cleaning-up-event-handlers-automatically-similar-to-subscriptions-d/58642325#58642325", "title": "Pattern for cleaning up event handlers automatically, similar to subscriptions deterministically", "body": "<p>I think you could use <a href=\"https://rxjs-dev.firebaseapp.com/api/index/function/fromEvent\" rel=\"nofollow noreferrer\"><code>fromEvent</code></a> to create Observables that listen to events instead of using <code>Renderer2.listen</code>. And then just use the same unsubscribe pattern you use for other Observables.</p>\n\n<p>Something like:</p>\n\n<pre><code>import { fromEvent } from 'rxjs';\n\nprivate setTagLink(\n  element: Element,\n  clickHandler: (event: any) =&gt; void\n) {\n  fromEvent(element, 'click').pipe(\n    untilDestroyed(this)\n  ).subscribe(clickHandler);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 10715502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cnyaZ.jpg?s=128&g=1", "display_name": "Tal Ohana", "link": "https://stackoverflow.com/users/10715502/tal-ohana"}, "is_accepted": false, "score": 0, "last_activity_date": 1572591945, "creation_date": 1572591945, "answer_id": 58655390, "question_id": 58614955, "link": "https://stackoverflow.com/questions/58614955/pattern-for-cleaning-up-event-handlers-automatically-similar-to-subscriptions-d/58655390#58655390", "title": "Pattern for cleaning up event handlers automatically, similar to subscriptions deterministically", "body": "<p>When looking for something similar I came across two options:  </p>\n\n<ul>\n<li>Using <a href=\"https://github.com/wardbell/subsink\" rel=\"nofollow noreferrer\">subsink</a> library which basically does what you are doing, but in less verbose way.</li>\n<li>Creating your own unsubscribe decorator that does the dirty job, a tutorial by Natanel Basel can found <a href=\"https://netbasal.com/automagically-unsubscribe-in-angular-4487e9853a88\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n"}], "owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1572591945, "creation_date": 1572380919, "last_edit_date": 1572386347, "question_id": 58614955, "link": "https://stackoverflow.com/questions/58614955/pattern-for-cleaning-up-event-handlers-automatically-similar-to-subscriptions-d", "title": "Pattern for cleaning up event handlers automatically, similar to subscriptions deterministically", "body": "<p>I'm familiar with the patterns that are used to clean up subscriptions on observables as outlined here: <a href=\"https://stackoverflow.com/a/41177163\">Angular/RxJs When should I unsubscribe from <code>Subscription</code></a></p>\n\n<p><strong>But is there a similar pattern for cleaning up event handlers?</strong></p>\n\n<p>I have a component which modifies a dynamically provided template to apply some event handlers to various elements among other things. There are other subscriptions involved and cleaned up using <code>ngrx-take-until-destroy</code> simplifying everything further. Currently, I'm just maintaining a separate array of <code>Unsubscribable</code> to collect and cleanup when destroyed.</p>\n\n<pre><code>@Component(...)\nclass MyComponent implements OnInit, OnDestroy {\n  constructor(private renderer: Renderer2, private service: SomeService) {}\n  private subscriptions: Unsubscribable[] = [];\n\n  ngOnInit() {\n    this.service.doSomething(...).pipe(\n      untilDestroyed(this)\n    ).subscribe(...);\n  }\n\n  private setTagLink(\n    element: Element,\n    clickHandler: (event: any) =&gt; (boolean|void)\n  ) {\n    this.subscriptions.push({\n      unsubscribe: this.renderer.listen(element, 'click', clickHandler)\n    });\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach(s =&gt; s.unsubscribe());\n  }\n}\n</code></pre>\n\n<p>I'd rather not maintain this array and in a similar fashion have some automatic cleanup of the listeners. What are my options?</p>\n"}, {"tags": ["node.js", "typescript", "webpack", "spfx"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 5300411, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b776cf4dc056978aa963720bc8ac23b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Gaskell", "link": "https://stackoverflow.com/users/5300411/andrew-gaskell"}, "is_accepted": true, "score": 0, "last_activity_date": 1572470783, "creation_date": 1572470783, "answer_id": 58633863, "question_id": 58614937, "link": "https://stackoverflow.com/questions/58614937/unable-to-load-sp-loader-for-spfx-solution-with-webpack/58633863#58633863", "title": "Unable to load sp-loader for spfx solution with webpack", "body": "<p>I ended up using a workaround for this. I gave up on SPComponentLoader to load my bootstrap and instead installed bootstrap modules locally and then referenced them from my custom sass. \nMy thoughts are that gulp with yeoman normally handles the SPComponentLoader dependencies, but this time I am using a custom webpack and I did not want to deal with every missing dependency manually.</p>\n"}], "owner": {"reputation": 59, "user_id": 5300411, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b776cf4dc056978aa963720bc8ac23b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Gaskell", "link": "https://stackoverflow.com/users/5300411/andrew-gaskell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 58633863, "answer_count": 1, "score": 1, "last_activity_date": 1572470783, "creation_date": 1572380857, "last_edit_date": 1572381809, "question_id": 58614937, "link": "https://stackoverflow.com/questions/58614937/unable-to-load-sp-loader-for-spfx-solution-with-webpack", "title": "Unable to load sp-loader for spfx solution with webpack", "body": "<p>my typescript file includes the following import:</p>\n\n<pre><code>import { SPComponentLoader } from '@microsoft/sp-loader';\n</code></pre>\n\n<p>But I get a lot of errors when building with webpack</p>\n\n<p><code>npx webpack --config webpack.config.js</code></p>\n\n<p>Here are some of the errors:</p>\n\n<blockquote>\n  <p>ERROR in\n  ./node_modules/@microsoft/sp-loader/lib/requirejs/RequireJsLoader.js\n  Module not found: Error: Can't resolve './test/RequireJsMock' in\n  'C:\\users\\agaskell\\source\\repos\\spfxBanner\\node_modules@microsoft\\sp-loader\\lib\\requirejs'\n  @ ./node_modules/@microsoft/sp-loader/lib/requirejs/RequireJsLoader.js\n  258:14-45  @\n  ./node_modules/@microsoft/sp-loader/lib/requirejs/SPRequireJsComponentLoader.js\n  @ ./node_modules/@microsoft/sp-loader/lib/starter/SPStarter.js  @\n  ./node_modules/@microsoft/sp-loader/lib/index.js  @\n  ./Classic/client/bootHeader.ts  @ multi @babel/polyfill\n  ./Classic/client/bootHeader.ts</p>\n  \n  <p>ERROR in\n  ./node_modules/@microsoft/sp-loader/lib/systemjs/SystemJsLoader.js\n  Module not found: Error: Can't resolve './test/SystemJsMock' in\n  'C:\\users\\agaskell\\source\\repos\\spfxBanner\\node_modules@microsoft\\sp-loader\\lib\\systemjs'</p>\n</blockquote>\n\n<p>I am trying to build my ts file into js for classic SharePoint sites and I normally use gulp for modern pages, but for classic I am using a separate bootloader.ts file and webpack.</p>\n\n<p>Can anyone help?</p>\n\n<p>Here is the webpack.config.js file:</p>\n\n<pre><code>    const path = require(\"path\");\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nmodule.exports = {\n  mode: \"development\",\n  entry: ['@babel/polyfill',\n    path.resolve(__dirname, './Classic/client/bootHeader.ts')],\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        use: \"ts-loader\",\n        exclude: /node_modules/\n      },\n      {\n        test: /\\.(s*)css$/,\n        use: [\n          // fallback to style-loader in development\n          process.env.NODE_ENV !== \"production\"\n            ? \"style-loader\"\n            : MiniCssExtractPlugin.loader,\n          \"css-loader\",\n          \"sass-loader\"\n        ]\n      },\n      {\n        test: /\\.(png|jp(e*)g|svg)$/,\n        use: [\n          {\n            loader: \"url-loader\",\n            options: {\n              limit: 15000, // Convert images &lt; 8kb to base64 strings\n              name: \"images/[hash]-[name].[ext]\"\n            }\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: \"[name].css\",\n      chunkFilename: \"[id].css\"\n    })\n  ],\n  resolve: {\n    extensions: [\".tsx\", \".ts\", \".js\"]\n  },\n  output: {\n    filename: \"classicBundleAG.js\",\n    path: path.resolve(__dirname, \"Classic\"),\n    libraryTarget: \"umd\"\n  }\n};\n</code></pre>\n"}, {"tags": ["javascript", "regex", "typescript", "visual-studio-code"], "comments": [{"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1572381518, "post_id": 58614936, "comment_id": 103539965, "body": "This part <code>(.*(\\r\\n)){29,}</code> repeats 29 or more times so that is why you get the whole document if there are more than 28 lines followed by a newline. What do you want to accomplish? You want to make sure that is it exactly 28 lines?"}, {"owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "reply_to_user": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1572381637, "post_id": 58614936, "comment_id": 103540020, "body": "I understand why the second expression is failing, but the first is where I think it should work. It should be 29 or more times followed by a \\f, and each instance of a match should be separated by \\f. The \\f is key."}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1572382216, "post_id": 58614936, "comment_id": 103540249, "body": "You get a single match because you repeat the pattern 29 or more times using a quantifier and matching the whole line including newlines. If you use <code>{29}</code> instead you get 29 lines."}, {"owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "reply_to_user": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1572439396, "post_id": 58614936, "comment_id": 103558850, "body": "Yes @Thefourthbird, you are correct. It&#39;s because I&#39;m matching the new lines. I realize now that I need to exclude newlines from the initial * times, but I&#39;m having trouble with this implementation..."}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1572440196, "post_id": 58614936, "comment_id": 103559327, "body": "If you want all the separate lines, you could also split the complete match on a newline. Or first check the number of the lines, and if that is correct, then match each line separately using <code>.*</code> for example."}, {"owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "reply_to_user": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1572440958, "post_id": 58614936, "comment_id": 103559765, "body": "I was able to get a match on a single line excluding \\f\\r\\n ending with \\r\\n, but I&#39;m having trouble getting a specific number of lines to match now, before even introducing the terminating \\f. If I look for any specific number of lines, such as {2}, it results in no matches at all."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "edited": false, "score": 0, "creation_date": 1572439471, "post_id": 58615199, "comment_id": 103558888, "body": "No, lines end with \\r\\n, I want to find blocks of text that are 29 or more lines long without being broken by a \\f character."}, {"owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "edited": false, "score": 0, "creation_date": 1572440874, "post_id": 58615199, "comment_id": 103559713, "body": "You&#39;re right, I realized my mistake with the negation. Please see the latest Edit 4. I was able to get a match on a single line excluding \\f\\r\\n ending with \\r\\n, but I&#39;m having trouble getting a specific number of lines to match now, before even introducing the terminating \\f"}], "tags": [], "owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1572441759, "last_edit_date": 1572441759, "creation_date": 1572382068, "answer_id": 58615199, "question_id": 58614936, "link": "https://stackoverflow.com/questions/58614936/js-regex-for-finding-number-of-lines-in-a-page-separated-by-form-feed-f/58615199#58615199", "title": "JS RegEx for finding number of lines in a page, separated by form feed \\f", "body": "<p><strong>Edit:</strong></p>\n\n<p>As you clarified more your problem, and provided your updated regex:</p>\n\n<pre><code>/([^\\f^\\r^\\n]*(\\r\\n)){29,}\\f/;\n</code></pre>\n\n<p>Your negations are not right here, use <code>[^\\f\\r\\n]</code> instead of <code>[^\\f^\\r^\\n]</code>. This will negate all of <code>\\f</code>, <code>\\r</code>, and <code>\\n</code>.</p>\n\n<p>So, your regex becomes:</p>\n\n<pre><code>/([^\\f\\r\\n]*(\\r\\n)){29,}\\f/;\n</code></pre>\n\n<p>This will match 29 or more lines of characters (that can be anything but <code>\\f</code>, <code>\\r</code> or <code>\\n</code>), the whole thing followed by a single <code>\\f</code>.</p>\n\n<hr>\n\n<p><strong>Original answer:</strong></p>\n\n<p>Your current regular expression:</p>\n\n<pre><code>let expression = /(([^\\f]*)(\\r\\n)){29,}\\f/;\n</code></pre>\n\n<p>Matches strings that consist of 29 or more lines (separated by <code>\\r\\n</code>), the whole thing followed by one single <code>\\f</code>.</p>\n\n<p>As far as I understood, you want each of your lines to end with <code>\\f</code>. Did you mean to include the <code>\\f</code> inside?</p>\n\n<pre><code>let expression = /(([^\\f]*)(\\r\\n\\f)){29,}/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "is_accepted": false, "score": 0, "last_activity_date": 1572441602, "creation_date": 1572441602, "answer_id": 58626316, "question_id": 58614936, "link": "https://stackoverflow.com/questions/58614936/js-regex-for-finding-number-of-lines-in-a-page-separated-by-form-feed-f/58626316#58626316", "title": "JS RegEx for finding number of lines in a page, separated by form feed \\f", "body": "<p>Thanks for all the help to those who commented, a friend ended up helping me get the final regex</p>\n\n<pre><code>let expression = /([^\\f\\r\\n]*?\\r??\\n){29,}?\\f/;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12153933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78713ed1fac91adcc8f24f9ff289721a?s=128&d=identicon&r=PG&f=1", "display_name": "jacobgqc", "link": "https://stackoverflow.com/users/12153933/jacobgqc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572441759, "creation_date": 1572380855, "last_edit_date": 1572440637, "question_id": 58614936, "link": "https://stackoverflow.com/questions/58614936/js-regex-for-finding-number-of-lines-in-a-page-separated-by-form-feed-f", "title": "JS RegEx for finding number of lines in a page, separated by form feed \\f", "body": "<p>I have a use case that requires a plain-text file to have lines to consist of at most 38 characters, and 'pages' to consist of at most 28 lines. To enforce this, I'm using regular expressions. I was able to enforce the line-length without any problems, but the page-length is proving to be much trickier.\nAfter several iterations, I came to the following as a regular expression that I feel should work, but it isn't.</p>\n\n<pre><code>let expression = /(([^\\f]*)(\\r\\n)){29,}\\f/;\n</code></pre>\n\n<p>It simply results in no matches.</p>\n\n<p>If anyone could provide some feedback, I'd greatly appreciate it! - Jacob</p>\n\n<p>Edit 1 - removed code block around second expression, it was probably making my question confusing.</p>\n\n<p>Edit 2 - removed following text, it's not pertinent:\nAs a comparison, the following expression results in a single match, the entire document. I'm assuming it's matching all lines up until the final\nlet expression = /(.*(\\r\\n)){29,}</p>\n\n<p>Edit 3 - So after some thinking, I realized that my issue is due to the initial section of the regex that matches any characters before a newline is including newlines. Therefore, I believe I need to match any characters before a newline EXCEPT (\\f\\r\\n). However, I'm now having trouble implementing this. I tried the following:</p>\n\n<p><code>let expression = /([^\\f^\\r^\\n]*(\\r\\n)){29,}\\f/;</code></p>\n\n<p>But it's also not matching. I'm assuming that my negations are wrong...</p>\n\n<p>Edit 4 - I have the following regex that matches each line: <code>let expression = /([^\\f\\r\\n]{0,}(\\r\\n))/;</code>\nThis is pretty close to what I want. All I need now is to match any instances of 29 or more lines followed by \\f</p>\n"}, {"tags": ["typescript", "visual-studio-code", "vscode-debugger"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12251171"}, "edited": false, "score": 3, "creation_date": 1572379842, "post_id": 58614630, "comment_id": 103539236, "body": "Did you set VS Code to use your TypeScript version too? <a href=\"https://i.imgur.com/69OQ8vX.png\" rel=\"nofollow noreferrer\">There&#39;s this version number</a> in the bottom right that you can click on to set it."}, {"owner": {"reputation": 155, "user_id": 5145199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f823fa05c6bdb6873af34160200f52dc?s=128&d=identicon&r=PG", "display_name": "Saeed Ganji", "link": "https://stackoverflow.com/users/5145199/saeed-ganji"}, "edited": false, "score": 0, "creation_date": 1572380048, "post_id": 58614630, "comment_id": 103539306, "body": "yes, and that&#39;s why it shows no error at <code>Problems</code> tab"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 5145199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f823fa05c6bdb6873af34160200f52dc?s=128&d=identicon&r=PG", "display_name": "Saeed Ganji", "link": "https://stackoverflow.com/users/5145199/saeed-ganji"}, "is_accepted": true, "score": 1, "last_activity_date": 1572759123, "last_edit_date": 1572759123, "creation_date": 1572757640, "answer_id": 58677559, "question_id": 58614630, "link": "https://stackoverflow.com/questions/58614630/why-vs-code-fails-to-debug-sources-with-ts-3-7-1-rc-syntax-support/58677559#58677559", "title": "Why VS Code fails to debug sources with TS 3.7.1-rc syntax support?", "body": "<p>Here is a <a href=\"https://github.com/microsoft/vscode/issues/83628\" rel=\"nofollow noreferrer\">link</a> to the discussion on GitHub to how to solve the problem. </p>\n\n<p>Short Answer: Install <code>typescript@3.7.1-rc</code> globally, or configure the task.json file to reference the locally installed tsc( this is different than the selected version for <a href=\"https://code.visualstudio.com/docs/typescript/typescript-compiling#_using-newer-typescript-versions\" rel=\"nofollow noreferrer\">VS Code</a>.</p>\n\n<p>Configure the <code>problemMatcher</code> of your  <strong>task.json</strong> to point to locally installed <code>tsc</code></p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"tsc\",\n            \"type\": \"typescript\",\n            \"tsconfig\": \"tsconfig.json\",\n            \"problemMatcher\": [\n                {\n                    \"base\": \"$tsc\",\n                    \"fileLocation\": [\n                        \"relative\",\n                        \"${workspaceRoot}/node_modules/typescript/lib\"\n                    ]\n                }\n            ],\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true\n            }\n        }\n    ],\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5145199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f823fa05c6bdb6873af34160200f52dc?s=128&d=identicon&r=PG", "display_name": "Saeed Ganji", "link": "https://stackoverflow.com/users/5145199/saeed-ganji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 58677559, "answer_count": 1, "score": 2, "last_activity_date": 1574986075, "creation_date": 1572379562, "question_id": 58614630, "link": "https://stackoverflow.com/questions/58614630/why-vs-code-fails-to-debug-sources-with-ts-3-7-1-rc-syntax-support", "title": "Why VS Code fails to debug sources with TS 3.7.1-rc syntax support?", "body": "<p>I have a code base and I am willing to use <code>typescript 3.7</code>, to be precise I use <code>3.7.1-rc</code>. I could build the source with the command line and even run tests in the command line, but when I want to debug the project using <code>F5</code>, it fails, vs code claims there are some errors, but it shows nothing in the <code>Problems</code> tab, but in the <code>Outputs</code> it says: </p>\n\n<pre><code>sample.ts(42,53): error TS1109: Expression expected.\nsample.ts(42,68): error TS1005: ':' expected.\n</code></pre>\n\n<p>the source file is something like the following: </p>\n\n<pre><code>if (filterElements || configuration.classes?.filterElements) {\n            const filter = filterElements || configuration.classes!.filterElements;\n\n</code></pre>\n\n<p>in which column 53 is where the question mark exists, and 68 is where the close parenthesis exists. I even tried the VS Code Insider, it behaves the same.</p>\n\n<p>I have no idea what to do. I have the same error where ever I used <code>?</code> of <code>3.7</code>.</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "comments": [{"owner": {"reputation": 2344, "user_id": 5613720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5108eebd0ca5da227b09c34fbb8aa84?s=128&d=identicon&r=PG&f=1", "display_name": "yazantahhan", "link": "https://stackoverflow.com/users/5613720/yazantahhan"}, "edited": false, "score": 0, "creation_date": 1572384922, "post_id": 58614536, "comment_id": 103541218, "body": "Can you please explain more? Do you mean when going back to choose other things the blue color is lost?"}, {"owner": {"reputation": 19, "user_id": 11489656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4f5c0d010a101140e968d9416f2895?s=128&d=identicon&r=PG&f=1", "display_name": "gabyta", "link": "https://stackoverflow.com/users/11489656/gabyta"}, "reply_to_user": {"reputation": 2344, "user_id": 5613720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5108eebd0ca5da227b09c34fbb8aa84?s=128&d=identicon&r=PG&f=1", "display_name": "yazantahhan", "link": "https://stackoverflow.com/users/5613720/yazantahhan"}, "edited": false, "score": 0, "creation_date": 1572386180, "post_id": 58614536, "comment_id": 103541600, "body": "I have a pizza ordering list with topping I want to re-edit the pizza  topping and I want when I edit the topping buttons already selected before editing to be blue and everything else is red"}, {"owner": {"reputation": 2344, "user_id": 5613720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5108eebd0ca5da227b09c34fbb8aa84?s=128&d=identicon&r=PG&f=1", "display_name": "yazantahhan", "link": "https://stackoverflow.com/users/5613720/yazantahhan"}, "edited": false, "score": 0, "creation_date": 1572417839, "post_id": 58614536, "comment_id": 103548328, "body": "Check the answer please"}], "answers": [{"tags": [], "owner": {"reputation": 2344, "user_id": 5613720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5108eebd0ca5da227b09c34fbb8aa84?s=128&d=identicon&r=PG&f=1", "display_name": "yazantahhan", "link": "https://stackoverflow.com/users/5613720/yazantahhan"}, "is_accepted": true, "score": 0, "last_activity_date": 1572389649, "creation_date": 1572389649, "answer_id": 58616469, "question_id": 58614536, "link": "https://stackoverflow.com/questions/58614536/edit-item-in-the-shopping-cart/58616469#58616469", "title": "Edit Item in the Shopping Cart", "body": "<p>As you have the list of toppings saved in the cart, you can add the styles using it.\nSo when the topping is selected, the you it will be blue, otherwise, it will be red. This can be done using classes.</p>\n\n<p>You can go over the toppings before in ngOnInit, and add a <code>selected</code> field to it</p>\n\n<pre><code>ngOnInit() {\n  this.toppings = this.toppings\n    // Create new array with selected field;\n    .map(topping =&gt; {\n      // Check if the topping is selected\n      const isSelected = this.mealService.getTopping()\n        .some(selectedTopping =&gt; topping.name === selectedTopping.name);\n      topping.selected = isSelected;\n      return topping; \n    })\n}\n</code></pre>\n\n<p>In the stylesheet:</p>\n\n<pre><code>.red {\n  background: red;\n}\n\n.blue {\n  background: blue;\n}\n</code></pre>\n\n<p>in the template:</p>\n\n<pre><code>&lt;div class=\"col-md-4\" style= \"padding-top: 10px;\"&gt;\n  &lt;button type=\"button\" class=\"btn\"  style=\"width: 110px\" (click)= \"onClickDown(topping)\" \n    [ngClass]=\"{'red': !topping.selected, 'blue': topping.selected }\" &gt;\n  {{topping.name}}\n  &lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And in the <code>onClickDown</code> function, you can change the <code>selected</code> flag</p>\n\n<pre><code>onClickDown(topping) {\n  topping.selected = !topping.selected;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11489656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4f5c0d010a101140e968d9416f2895?s=128&d=identicon&r=PG&f=1", "display_name": "gabyta", "link": "https://stackoverflow.com/users/11489656/gabyta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58616469, "answer_count": 1, "score": 0, "last_activity_date": 1572413013, "creation_date": 1572379073, "last_edit_date": 1572413013, "question_id": 58614536, "link": "https://stackoverflow.com/questions/58614536/edit-item-in-the-shopping-cart", "title": "Edit Item in the Shopping Cart", "body": "<p>I'm building a project to order pizza, and I want to edit the toppings of the pizza in a specific order.</p>\n\n<p>I have a button to select toppings. The button changes to blue when I click on it.</p>\n\n<p>My problem is what to do add to the return, to select button topping and the blue button stay blue.</p>\n\n<p>for example I choose topping of onion and olive and their buttons are now blue, and when I want to change my choices, I want the button of onion and olive to stay blue.</p>\n\n<p><strong>Directive</strong></p>\n\n<pre><code>@Directive({\n  selector: '[appButton]'\n})\nexport class ButtonDirective  {\n\n  constructor(private elRef: ElementRef, private renderer: Renderer2) {\n\n  }\n@HostListener('mousedown') onmousedown() {\n   if (this.elRef.nativeElement.style.backgroundColor === 'blue') {\n    // console.log(this.elRef.nativeElement);\n     this.renderer.setStyle(this.elRef.nativeElement, 'background-color', 'rgba(200,0,0,0.7)');\n   } else {\n     this.renderer.setStyle(this.elRef.nativeElement, 'background-color', 'blue');\n\n   }\n}\n</code></pre>\n\n<p><strong>html</strong></p>\n\n<pre><code>&lt;div class=\"row choiceBoxTopping\" style=\"position: relative; top: 90px; padding-top: 10px \"&gt;\n  &lt;p style=\"padding-left: 10px\"&gt;Please choose a Topping&lt;/p&gt;\n  &lt;app-button *ngFor=\"let topping of toppings; let i = index\"\n              [topping]=\"topping\"\n              [index]=\"i\"&gt;&lt;/app-button&gt;\n  &lt;button class=\"btn btn-primary\" style=\" position:absolute; bottom: 7px; right: 20px\" (click)=\"onContinue()\"&gt;Continue&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>html  app-button</strong></p>\n\n<pre><code>    &lt;div class=\"col-md-4\" style= \"padding-top: 10px;\"&gt;\n    &lt;button id=\"top\" type=\"button\" class=\"btn btn-danger\"  style=\"width: 110px\" appButton (click)= \"onClickDown()\"  &gt;\n      {{topping.name}}\n    &lt;/button&gt;\n    &lt;/div&gt;\n\n</code></pre>\n\n<p><strong>ts</strong></p>\n\n<pre><code>  onContinue() {\n\n    this.carts = new Cart(this.mealService.getPizzaName(),\n      this.mealService.getOrderChoosePrice(), this.mealService.getTopping());\n    this.orderService.addItemCart(this.carts);\n   }\n</code></pre>\n\n<p><strong>service</strong></p>\n\n<pre><code>public addItemCart(cart: Cart) {\n  this.cart.push(cart);\n  this.cartChanged.next(this.cart.slice());\n  this.price += cart.price;\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12247846"}, "edited": false, "score": 0, "creation_date": 1572383913, "post_id": 58615388, "comment_id": 103540875, "body": "Perfect thank you!! Do you know how I can solve the problem of always trying to load an image into src [0] even if I don&#39;t have any images selected? this should only happen when selecting an image ... I tried * ngif but got no results :("}, {"owner": {"reputation": 3786, "user_id": 3131085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af46eb34957e6fdc051e365e5853aa54?s=128&d=identicon&r=PG&f=1", "display_name": "Jason White", "link": "https://stackoverflow.com/users/3131085/jason-white"}, "edited": false, "score": 0, "creation_date": 1572386534, "post_id": 58615388, "comment_id": 103541703, "body": "@HarryJames Check my edit, I think that is what you&#39;re looking for."}], "tags": [], "owner": {"reputation": 3786, "user_id": 3131085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af46eb34957e6fdc051e365e5853aa54?s=128&d=identicon&r=PG&f=1", "display_name": "Jason White", "link": "https://stackoverflow.com/users/3131085/jason-white"}, "is_accepted": true, "score": 1, "last_activity_date": 1572386516, "last_edit_date": 1572386516, "creation_date": 1572382942, "answer_id": 58615388, "question_id": 58614495, "link": "https://stackoverflow.com/questions/58614495/angular-remove-first-image/58615388#58615388", "title": "Angular remove first Image", "body": "<p>In your template you are passing  <code>url</code> to the <code>deleteImage()</code> function instead of <code>url[0]</code>.</p>\n\n<pre><code>&lt;img [src]=\"urls[0]\"&gt;\n&lt;span class=\"delete\" style=\"cursor: pointer;\" (click)=\"deleteImage(url[0])\"&gt;X&lt;/span&gt;\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://stackblitz.com/edit/angular-vgyfam\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-vgyfam</a></p>\n</blockquote>\n\n<hr>\n\n<h3>Edit (response to the comment)</h3>\n\n<p>You can wrap the <code>&lt;img [src]=\"urls[0]\"&gt;</code> in an <code>&lt;ng-container&gt;</code> conditionally showing if <code>urls.length &gt; 0</code>.</p>\n\n<pre><code>&lt;ng-container *ngIf=\"urls.length &gt; 0\"&gt;\n  &lt;img [src]=\"urls[0]\"&gt;\n  &lt;span class=\"delete\" style=\"cursor: pointer;\" (click)=\"deleteImage(urls[0])\"&gt;X&lt;/span&gt;\n&lt;/ng-container&gt;\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://stackblitz.com/edit/angular-yvn93z\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-yvn93z</a></p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12247846"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 58615388, "answer_count": 1, "score": 0, "last_activity_date": 1572386516, "creation_date": 1572378890, "question_id": 58614495, "link": "https://stackoverflow.com/questions/58614495/angular-remove-first-image", "title": "Angular remove first Image", "body": "<p>I created an input to select multiple images. When selecting the various images they are placed in boxes (1 large box and the rest small).</p>\n\n<p>I can delete the images in the small boxes, but I can't delete the one from the 1st box (big box).</p>\n\n<p>Does anyone help me get the big box image remove working? Is it possible that by deleting the big box image, one of the small box images will fill that box?</p>\n\n<p>Another thing that is not right is that to load the image in the first box I use src = url [0], it is always loading an image, even if it does not exist, how can I solve it?</p>\n\n<p>Thanks !!!</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-eyuwtq\" rel=\"nofollow noreferrer\">My Code --> StackBlitz</a></p>\n\n<p><strong>Html</strong></p>\n\n<pre><code>&lt;div class=\"drop\"&gt;\n      &lt;div class=\"cont\"&gt;\n        &lt;div class=\"browse\"&gt;\n            Upload files\n          &lt;/div&gt;\n        &lt;div class=\"desc\"&gt;\n          Click to upload or drop your files\n        &lt;/div&gt;       \n      &lt;/div&gt;\n      &lt;img [src]=\"urls[0]\"&gt;&lt;span class=\"delete\" style=\"cursor: pointer;\" (click)=\"deleteImage(url)\"&gt;X&lt;/span&gt;\n      &lt;input type=\"file\" id=\"files\" multiple (change)=\"detectFiles($event)\" accept=\"image/*\"&gt;\n&lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"Upcard\" *ngFor=\"let url of urls | slice:1\"&gt;\n          &lt;img [src]=\"url\"&gt;&lt;span class=\"delete\" style=\"cursor: pointer;\" (click)=\"deleteImage(url)\"&gt;X&lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>Typescript</strong></p>\n\n<pre><code>files:any;\n  urls = new Array&lt;string&gt;();\n  detectFiles(event) {\n    this.urls = [];\n    this.files = event.target.files;   \n      for (let file of this.files) {\n        let reader = new FileReader();\n        reader.onload = (e: any) =&gt; {\n          this.urls.push(e.target.result);\n        }\n        reader.readAsDataURL(file);\n      }\n  }\n  private deleteImage(url: any): void {\n    this.urls = this.urls.filter((a) =&gt; a !== url);\n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "functional-programming", "modularity", "control-flow"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1572374647, "post_id": 58613536, "comment_id": 103537282, "body": "<a href=\"https://en.wikipedia.org/wiki/Fluent_interface#JavaScript\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Fluent_interface#JavaScript</a>"}, {"owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1572382257, "post_id": 58613536, "comment_id": 103540258, "body": "@RobertHarvey You can&#39;t chain async functions in this way without a Proxy. It&#39;s a major downside of using this method."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1572382614, "post_id": 58613536, "comment_id": 103540382, "body": "No, but you could use continuation-passing style with async functions.  See <a href=\"https://2ality.com/2012/06/continuation-passing-style.html\" rel=\"nofollow noreferrer\">2ality.com/2012/06/continuation-passing-style.html</a>"}, {"owner": {"reputation": 3831, "user_id": 5536315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/38Cjm.png?s=128&g=1", "display_name": "scriptum", "link": "https://stackoverflow.com/users/5536315/scriptum"}, "edited": false, "score": 0, "creation_date": 1572425780, "post_id": 58613536, "comment_id": 103551425, "body": "I am the author of <a href=\"https://github.com/kongware/scriptum\" rel=\"nofollow noreferrer\">scriptum</a> that includes a couple of composition combinators with variadic interfaces, so that you can chain asynchronous computations in a functorial/applicative/monadic way. I use the asynchronous <code>Task</code> type in production and it works well."}], "answers": [{"comments": [{"owner": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "edited": false, "score": 0, "creation_date": 1572376364, "post_id": 58613876, "comment_id": 103537951, "body": "I can make it more complex if you have a specific case that above is not covering."}, {"owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "edited": false, "score": 0, "creation_date": 1572382240, "post_id": 58613876, "comment_id": 103540255, "body": "You can&#39;t chain async functions in this way without a Proxy. It&#39;s a major downside of using this method."}, {"owner": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "reply_to_user": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "edited": false, "score": 1, "creation_date": 1572390399, "post_id": 58613876, "comment_id": 103542637, "body": "maybe use pies. see above"}, {"owner": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "reply_to_user": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "edited": false, "score": 0, "creation_date": 1572432875, "post_id": 58613876, "comment_id": 103555332, "body": "Let me know if you need any more details on this."}], "tags": [], "owner": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1572390433, "last_edit_date": 1572390433, "creation_date": 1572375860, "answer_id": 58613876, "question_id": 58613536, "link": "https://stackoverflow.com/questions/58613536/stackable-functions/58613876#58613876", "title": "Stackable functions", "body": "<p>Returning <code>this</code> is usually the way for being able to chain methods. I made you an example showing both sync and async functions:</p>\n\n<pre><code>class ChainedOperations {\n  constructor(private value: number){}\n\n  public add(n: number): this {\n    this.value += n;\n    return this;\n  }\n\n  public subtract(n: number): this {\n    this.value -= n;\n    return this;\n  }\n\n  public async send(): Promise&lt;this&gt; {\n    console.log(`Sending ${this.value} somewhere`);\n    return this;\n  }\n}\n\nasync function somewhereElse(): Promise&lt;void&gt; {\n  const firstChain = await new ChainedOperations(1).add(1).subtract(1).send();\n  await firstChain.add(1).subtract(2).send()\n}\n\nsomewhereElse().catch(e =&gt; { throw new Error(e) });\n</code></pre>\n\n<p>For better dealing with async functions you can use pipe pattern where you chain but also wait for the final result and pass it to the next guy:</p>\n\n<pre><code>abstract class Pipable {\n  public pipe(...functions: Function[]) {\n    return (input: any) =&gt; functions.reduce((chain, func: any) =&gt; chain.then(func.bind(this)), Promise.resolve(input));\n  }\n}\n\nclass AClass extends Pipable {\n\n  constructor(private value: number){\n    super();\n  }\n\n  public add(n: number): number {\n    this.value += n;\n    return this.value;\n  }\n\n  public subtract(n: number): number {\n    this.value -= n;\n    return this.value;\n  }\n\n  public async send(): Promise&lt;number&gt; {\n    console.log(`Sending ${this.value} somewhere`);\n    return this.value;\n  }\n}\n\n\nasync function Something(){\n  const myClass = new AClass(2);\n  const composition = await myClass.pipe(myClass.add, myClass.subtract, myClass.send)(2);\n}\n\nSomething();\n</code></pre>\n\n<p>Some people don't like to start from beginning but work their way backwards from the last function. If you want that just replace .reduce with .reduceRight. If you like fancy names, starting from last is called Composing as opposed to piping.</p>\n"}], "owner": {"reputation": 42593, "user_id": 340688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/46a6db74ccc3bf4e009f875283401c14?s=128&d=identicon&r=PG", "display_name": "ThomasReggi", "link": "https://stackoverflow.com/users/340688/thomasreggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572390433, "creation_date": 1572374310, "question_id": 58613536, "link": "https://stackoverflow.com/questions/58613536/stackable-functions", "title": "Stackable functions", "body": "<p>I am looking for a library agnostic way to \"stack\" functions. The paradigm's I am used to is \"middleware\", where something happens within a function errors can be thrown, and a <code>context</code> (or <code>req</code>) global is used to attach new properties or change existing ones. These ideas are found in libraries like <code>express</code>, or <code>type-graphql</code>.</p>\n\n<p>I am looking for some agnostic way to chain middleware, not dependent on these type of libraries. </p>\n\n<p>Here's an example of the kinds of functions I have.</p>\n\n<p>I am struggling with some kind of clean way to author functions. The global approach is not complimentary to proper typing using typescript, and isn't very functional.</p>\n\n<p>Where the more functional approach lacks this kind of \"chainablity\", where I can simply have an array of functions like below.</p>\n\n<pre><code>// logs the start of middleware\ncontext.utility.log(debug, ids.onLoad),\n// fetches user by email submitted\ncontext.potentialUser.fetchByEmail(SignupOnSubmitArgs),\n// throws error if the user is found\ncontext.potentialUser.errorContextPropPresent,\n// checks if passowrd and reenterPassword match\ncontext.potentialUser.signupPassword(SignupOnSubmitArgs),\n// creates the user\ncontext.user.create(SignupOnSubmitArgs, ''),\n// thows error if create failed in some way\ncontext.user.errorContextPropAbsent,\n// adds user id to session\ncontext.utility.login,\n// redirects user to dashboard\ncontext.utility.redirect(Pages2.dashboardManage)\n</code></pre>\n\n<p>Is there any tools / libraries out there that will allow be to author clear and clean chain-able functions, and glue them together in a stackable way?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 70314, "user_id": 5043867, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/RX8Aw.jpg?s=128&g=1", "display_name": "Pardeep Jain", "link": "https://stackoverflow.com/users/5043867/pardeep-jain"}, "reply_to_user": {"reputation": 395, "user_id": 11056703, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HjkpXNFIpr8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP4tBgqW5chp6xl9Bzvcx6RtuOoGA/mo/photo.jpg?sz=128", "display_name": "SIn san sun", "link": "https://stackoverflow.com/users/11056703/sin-san-sun"}, "edited": false, "score": 1, "creation_date": 1572373606, "post_id": 58613316, "comment_id": 103536879, "body": "@SInsansun IMO you should add <code>HomeComponent</code> into the <code>AppModule</code> itself, as it is always recommended to add entery level component in <code>AppModule</code>"}, {"owner": {"reputation": 395, "user_id": 11056703, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HjkpXNFIpr8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP4tBgqW5chp6xl9Bzvcx6RtuOoGA/mo/photo.jpg?sz=128", "display_name": "SIn san sun", "link": "https://stackoverflow.com/users/11056703/sin-san-sun"}, "edited": false, "score": 0, "creation_date": 1572373781, "post_id": 58613316, "comment_id": 103536951, "body": "A trued this and I have this error: <code>Uncaught Error: Template parse errors: There is no directive with &quot;exportAs&quot; set to &quot;slick-carousel&quot; (&quot;         &lt;&#47;div&gt;     &lt;&#47;div&gt;     &lt;ngx-slick-carousel class=&quot;carousel&quot; [ERROR -&gt;]#slickModal=&quot;slick-carousel&quot; [config]=&quot;slideConfig&quot;&gt;         &lt;div ngxSlickItem *ngFor=&quot;let slide of &quot;): ng:&#47;&#47;&#47;AppModule&#47;HomeComponent.html@65:41 Can&#39;t bind to &#39;config&#39; since it isn&#39;t a known property of &#39;ngx-slick-carousel&#39;.</code>"}, {"owner": {"reputation": 70314, "user_id": 5043867, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/RX8Aw.jpg?s=128&g=1", "display_name": "Pardeep Jain", "link": "https://stackoverflow.com/users/5043867/pardeep-jain"}, "reply_to_user": {"reputation": 395, "user_id": 11056703, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HjkpXNFIpr8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP4tBgqW5chp6xl9Bzvcx6RtuOoGA/mo/photo.jpg?sz=128", "display_name": "SIn san sun", "link": "https://stackoverflow.com/users/11056703/sin-san-sun"}, "edited": false, "score": 0, "creation_date": 1572393178, "post_id": 58613316, "comment_id": 103543266, "body": "Yes this problem is something different, you can ask new question for the same. If problem solved for this question/query mart it as accepted."}], "tags": [], "owner": {"reputation": 70314, "user_id": 5043867, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/RX8Aw.jpg?s=128&g=1", "display_name": "Pardeep Jain", "link": "https://stackoverflow.com/users/5043867/pardeep-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1572393314, "last_edit_date": 1572393314, "creation_date": 1572373182, "answer_id": 58613316, "question_id": 58613251, "link": "https://stackoverflow.com/questions/58613251/lazy-loading-search-homecomponent-who-is-not-used-in-the-module/58613316#58613316", "title": "Lazy Loading search HomeComponent who is not used in the module", "body": "<p>I Believe issue is with loading order of file, can you give it a try using below code -</p>\n\n<pre><code>....\nimports: [\n    BrowserModule,\n    CoreModule,    // Interchanged the order here in order to make HomeComponent available before routing file.\n    AppRoutingModule,\n    ShopCartModule,\n    HttpClientModule,\n    FormsModule,\n    SharedModule,\n    AboutModule,\n    ContactModule,\n    NgbModule.forRoot()\n  ],\n.....\n</code></pre>\n\n<p>Update -</p>\n\n<pre><code>imports: [\n  ....\n  // Specify your library as an import\n  SlickCarouselModule   // You need to add SlickCarousel Module here before use\n  ....\n]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 395, "user_id": 11056703, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HjkpXNFIpr8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP4tBgqW5chp6xl9Bzvcx6RtuOoGA/mo/photo.jpg?sz=128", "display_name": "SIn san sun", "link": "https://stackoverflow.com/users/11056703/sin-san-sun"}, "edited": false, "score": 0, "creation_date": 1572373563, "post_id": 58613356, "comment_id": 103536859, "body": "I added the <code>HomeComponent</code> to the export and I still have this error."}], "tags": [], "owner": {"reputation": 318, "user_id": 8135644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P4IPD.png?s=128&g=1", "display_name": "Ruslan Gataullin", "link": "https://stackoverflow.com/users/8135644/ruslan-gataullin"}, "is_accepted": false, "score": 0, "last_activity_date": 1572722057, "last_edit_date": 1572722057, "creation_date": 1572373396, "answer_id": 58613356, "question_id": 58613251, "link": "https://stackoverflow.com/questions/58613251/lazy-loading-search-homecomponent-who-is-not-used-in-the-module/58613356#58613356", "title": "Lazy Loading search HomeComponent who is not used in the module", "body": "<p>You should add <code>HomeComponent</code> into exports if you want to use it anywhere outside of <code>CoreModule</code></p>\n"}, {"tags": [], "owner": {"reputation": 1528, "user_id": 12171299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B0Kus.jpg?s=128&g=1", "display_name": "German Quinteros", "link": "https://stackoverflow.com/users/12171299/german-quinteros"}, "is_accepted": false, "score": 0, "last_activity_date": 1572394788, "creation_date": 1572394788, "answer_id": 58617117, "question_id": 58613251, "link": "https://stackoverflow.com/questions/58613251/lazy-loading-search-homecomponent-who-is-not-used-in-the-module/58617117#58617117", "title": "Lazy Loading search HomeComponent who is not used in the module", "body": "<p>Well, the first error that I see is the order of the imports in the modules. the Angular modules should be first (CommonModule, BrowserModule, FormsModule). Then if you have the \"moduleA\" that uses the \"moduleB\", so the order should be imported: [moduleB, moduleA].</p>\n\n<p>Second, you are importing the AppRouting Module more than once, it should be imported only once (Do it in the AppModule or in the CoreModule).</p>\n\n<p>Third, you have to import the HttpClientModule only once (Do it in the AppModule or in the CoreModule). If you imported more than once you will reinitialize the interceptors.</p>\n\n<pre><code>**AppModule**\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    FormsModule,\n    SharedModule,\n    CoreModule,\n    ShopCartModule,\n    AboutModule,\n    ContactModule,\n    NgbModule.forRoot(),\n    AppRoutingModule\n  ],\n  providers: [\n    NgbActiveModal\n  ],\n  bootstrap: [AppComponent],\n})\n\nexport class AppModule {\n}\n</code></pre>\n\n<p><strong>CoreModule :</strong></p>\n\n<p>@NgModule({</p>\n\n<pre><code>imports: [\n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    CarouselModule.forRoot(),\n    SharedModule,\n    SlickCarouselModule\n],\nexports: [\n    AppRoutingModule,\n    HeaderComponent,\n    FooterComponent\n\n],\ndeclarations: [\n    HeaderComponent,\n    HomeComponent,\n    FooterComponent,\n    LogoutComponent\n],\nproviders: [\n    DataStorageService,\n    ProductsService,\n    ShopCartService,\n    AdminSerivice,\n    MessageService,\n    CategoryService,\n    ProductService,\n    EmailService,\n    AuthenticationService,\n    BasicAuthHtppInterceptorService,\n    ProductModelOrder,\n    {provide: HTTP_INTERCEPTORS, useClass: BasicAuthHtppInterceptorService, multi: true}\n]\n})\nexport class CoreModule {\n}\n</code></pre>\n\n<p>Try it now.</p>\n"}], "owner": {"reputation": 395, "user_id": 11056703, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HjkpXNFIpr8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP4tBgqW5chp6xl9Bzvcx6RtuOoGA/mo/photo.jpg?sz=128", "display_name": "SIn san sun", "link": "https://stackoverflow.com/users/11056703/sin-san-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1572722057, "creation_date": 1572372882, "question_id": 58613251, "link": "https://stackoverflow.com/questions/58613251/lazy-loading-search-homecomponent-who-is-not-used-in-the-module", "title": "Lazy Loading search HomeComponent who is not used in the module", "body": "<p>I have a problem with Lazy Loading in Angular.\nI have module <code>ShopCartModule</code> who I have to implement Lazy Loading.</p>\n\n<p>I have <code>AppModule</code> and <code>CoreModule</code>.</p>\n\n<p>This is my <code>AppModule</code>:</p>\n\n<pre><code>@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    CoreModule,\n    ShopCartModule,\n    HttpClientModule,\n    FormsModule,\n    SharedModule,\n    AboutModule,\n    ContactModule,\n    NgbModule.forRoot()\n  ],\n  providers: [\n    NgbActiveModal\n  ],\n  bootstrap: [AppComponent],\n})\n\nexport class AppModule {\n}\n</code></pre>\n\n<p>And this is my CoreModule :</p>\n\n<pre><code>@NgModule({\n\n\n    imports: [\n        CommonModule,\n        AppRoutingModule,\n        CarouselModule.forRoot(),\n        SharedModule,\n        SlickCarouselModule,\n        BrowserModule,\n        AppRoutingModule,\n        HttpClientModule,\n        FormsModule,\n        BrowserModule\n    ],\n    exports: [\n        AppRoutingModule,\n        HeaderComponent,\n        FooterComponent\n\n    ],\n    declarations: [\n        HeaderComponent,\n        HomeComponent,\n        FooterComponent,\n        LogoutComponent\n    ],\n    providers: [\n        DataStorageService,\n        ProductsService,\n        ShopCartService,\n        AdminSerivice,\n        MessageService,\n        CategoryService,\n        ProductService,\n        EmailService,\n        AuthenticationService,\n        BasicAuthHtppInterceptorService,\n        ProductModelOrder,\n        {provide: HTTP_INTERCEPTORS, useClass: BasicAuthHtppInterceptorService, multi: true}\n    ]\n})\nexport class CoreModule {\n}\n</code></pre>\n\n<p>I have the <code>app-routing.module</code> the main router module:</p>\n\n<pre><code>const appRoutes: Routes = [\n  { path: '', redirectTo: 'home', pathMatch: 'full'},\n  { path: 'home', component: HomeComponent },\n  { path: 'o-nama', component: AboutComponent},\n  { path: 'kontakt', component: ContactComponent},\n  { path: 'shopCart', loadChildren:'./shop-cart/shop-cart.module#ShopCartModule' },\n  { path: 'administration', loadChildren: './admin/admin.module#AdminModule', canActivate: [AuthGaurdService] },\n  { path: 'productsList', loadChildren: './products/products.module#ProductsModule' },\n  { path: 'not-found', component: PageNotFoundComponent },\n  { path: '**', redirectTo: '/not-found' }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(appRoutes, { preloadingStrategy: PreloadAllModules }),\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n</code></pre>\n\n<p>And this is my router module for shop-cart:</p>\n\n<pre><code>const shopCartRoutes: Routes = [\n    {\n        path: '', component: ShopCartComponent\n    },\n\n]\n@NgModule({\n    imports: [\n        RouterModule.forChild(shopCartRoutes)\n    ],\n    exports: [\n        RouterModule\n    ]\n})\nexport class ShopCartRoutingModule{}\n</code></pre>\n\n<p>I have error like this: </p>\n\n<pre><code>ERROR Error: Uncaught (in promise): Error: Component HomeComponent is not part of any NgModule or the module has not been imported into your module.\n</code></pre>\n\n<p>But I do not use my HomeComponent in the module, I do not understand what is problem. Everting work well when I do not implement lazy loading.</p>\n"}, {"tags": ["angular", "typescript", "ngrx", "ngrx-store"], "comments": [{"owner": {"reputation": 1164, "user_id": 6729295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10154409674010699/picture?type=large", "display_name": "Marcel Hoekstra", "link": "https://stackoverflow.com/users/6729295/marcel-hoekstra"}, "edited": false, "score": 0, "creation_date": 1572376992, "post_id": 58613214, "comment_id": 103538161, "body": "probably not the problem, but I think you don&#39;t have to use the spread operator when you use .concat because it does return a new array. Why don&#39;t you use [...state.shoppingList, shoppingItem] like you do in the filter example"}, {"owner": {"reputation": 105, "user_id": 7207154, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e623e34687e896d5d0f55fd0827d21af?s=128&d=identicon&r=PG&f=1", "display_name": "quimak", "link": "https://stackoverflow.com/users/7207154/quimak"}, "reply_to_user": {"reputation": 1164, "user_id": 6729295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10154409674010699/picture?type=large", "display_name": "Marcel Hoekstra", "link": "https://stackoverflow.com/users/6729295/marcel-hoekstra"}, "edited": false, "score": 0, "creation_date": 1572377399, "post_id": 58613214, "comment_id": 103538298, "body": "Yeah i dont have to use spread operator and brackets and it will go like this: return ({ ...state, shoppingList: state.shoppingList.concat(shoppingItem) }); and it compiles but still when I am adding first object to empty array it is duplicated. What is interesting if I add few entries and then wipe them out so array is again empty, adding works normally - no duplicates"}, {"owner": {"reputation": 684, "user_id": 3232331, "user_type": "registered", "profile_image": "https://graph.facebook.com/606123427/picture?type=large", "display_name": "mah.cr", "link": "https://stackoverflow.com/users/3232331/mah-cr"}, "edited": false, "score": 0, "creation_date": 1572386948, "post_id": 58613214, "comment_id": 103541802, "body": "Could you please make an example in <a href=\"https://stackblitz.com/\" rel=\"nofollow noreferrer\">stackblitz.com</a> and update the question with the link?"}], "answers": [{"tags": [], "owner": {"reputation": 9151, "user_id": 10112124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6297e8a8df7affbe897ed476212148?s=128&d=identicon&r=PG", "display_name": "timdeschryver", "link": "https://stackoverflow.com/users/10112124/timdeschryver"}, "is_accepted": false, "score": 1, "last_activity_date": 1572425781, "creation_date": 1572425781, "answer_id": 58621630, "question_id": 58613214, "link": "https://stackoverflow.com/questions/58613214/ngrxstore-first-object-is-inserted-to-times-into-array/58621630#58621630", "title": "NgrxStore - First object is inserted to times into array", "body": "<p>Going from the code, this is the expected behavior and this isn't something the store can solve.</p>\n\n<p>The problem is that you're appending an item to the array. The only solution to this is using the <code>filter</code> as you've done.</p>\n\n<p>If you structure your state as a dictionary, you don't have this problem because the <code>id</code> will be unique. See <a href=\"https://timdeschryver.dev/posts/normalizing-state\" rel=\"nofollow noreferrer\">Normalizing State</a> for more info.</p>\n\n<p>See <a href=\"https://github.com/timdeschryver/ngrx-immer/blob/ngrx/src/app/reducers/cart.ts\" rel=\"nofollow noreferrer\">this</a> for an example.</p>\n\n<pre><code>export const initialState: State = {\n  cartItems: {},\n};\n\nexport function reducer(state = initialState, action: CartActions) {\n  switch (action.type) {\n    case CartActionTypes.AddToCart:\n      return {\n        ...state,\n        cartItems: {\n          ...state.cartItems,\n          [action.payload.sku]: (state.cartItems[action.payload.sku] || 0) + 1,\n        },\n      };\n\n    case CartActionTypes.RemoveFromCart:\n      return {\n        ...state,\n        cartItems: {\n          ...state.cartItems,\n          [action.payload.sku]: Math.max((state.cartItems[action.payload.sku] || 0) - 1, 0),\n        },\n      };\n\n    case CartActionTypes.EmptyCart:\n      return initialState;\n\n    default:\n      return state;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7207154, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e623e34687e896d5d0f55fd0827d21af?s=128&d=identicon&r=PG&f=1", "display_name": "quimak", "link": "https://stackoverflow.com/users/7207154/quimak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572425781, "creation_date": 1572372710, "question_id": 58613214, "link": "https://stackoverflow.com/questions/58613214/ngrxstore-first-object-is-inserted-to-times-into-array", "title": "NgrxStore - First object is inserted to times into array", "body": "<p>I am playing around with ngrx store, deleting, fetching, and editing elements in array works just fine, but the problem is when I first time insert object into an array like {id: 1, name: 'Potato', quantity: 2}, two exactly same objects are inserted unless i filter it like in reducer below.</p>\n\n<p>State</p>\n\n<pre><code>export const initialShoppingState: ShoppingState = {\n    shoppingList: [],\n};\n</code></pre>\n\n<p>This one works but probably i shouldn't filter it to prevent adding same object</p>\n\n<pre><code>on(ShoppingAction.shoppingItemAdded, (state, { shoppingItem }) =&gt; {\n    console.log(state);\n    return ({ ...state, shoppingList: [...state.shoppingList.filter((item) =&gt; item.id !== shoppingItem.id), shoppingItem] });\n}),\n</code></pre>\n\n<p>This one adds first item two times, next items items only once.</p>\n\n<pre><code>on(ShoppingAction.shoppingItemAdded, (state, { shoppingItem }) =&gt; {\n    console.log(state);\n    return ({ ...state, shoppingList: [...state.shoppingList.concat(shoppingItem)] });\n}),\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1572373404, "post_id": 58612863, "comment_id": 103536784, "body": "&quot;What works for parent should work for children&quot;.  If you have a <code>parent</code> variable of type <code>Parent</code>, you can call <code>func(&quot;&quot;, parent)</code>, right?  But <code>myFunction(&quot;&quot;, parent)</code> will do bad things.  So the substitution principle says you <i>can&#39;t</i> use <code>myFunction</code> as the value of <code>func</code>.  What is your use case (with code)?  You can change <code>FunctionType</code> to be something generic, but I don&#39;t know if that works for you."}], "answers": [{"comments": [{"owner": {"reputation": 1807, "user_id": 1818628, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dd2d8a76c883e3787c012404cfbb9f3e?s=128&d=identicon&r=PG", "display_name": "splash27", "link": "https://stackoverflow.com/users/1818628/splash27"}, "edited": false, "score": 0, "creation_date": 1572374210, "post_id": 58613317, "comment_id": 103537135, "body": "Not exactly what I need. Your example states that myFunction will definitely work with &lt;Child&gt;. But in my case it may be any other function with same signature but different child type.  I am looking something like <code>FunctionType&lt;any&gt;</code>, but instead of <code>any</code> only Parent&#39;s descendants and Parent itself might be used."}, {"owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "reply_to_user": {"reputation": 1807, "user_id": 1818628, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dd2d8a76c883e3787c012404cfbb9f3e?s=128&d=identicon&r=PG", "display_name": "splash27", "link": "https://stackoverflow.com/users/1818628/splash27"}, "edited": false, "score": 0, "creation_date": 1572420630, "post_id": 58613317, "comment_id": 103549308, "body": "@splash27 I&#39;ve added an example of a non working version which uses a class that does not descends from Parents. As you can see, it will show an error"}], "tags": [], "owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "is_accepted": false, "score": 1, "last_activity_date": 1572420603, "last_edit_date": 1572420603, "creation_date": 1572373186, "answer_id": 58613317, "question_id": 58612863, "link": "https://stackoverflow.com/questions/58612863/how-to-substitute-type-by-child-type-in-function-definition-in-typescript/58613317#58613317", "title": "How to substitute type by child type in function definition in TypeScript?", "body": "<p>I suppose you can make generic to make it work, which seems to be the way to go in your case:</p>\n\n<pre><code>declare type FunctionType&lt;T extends Parent = Parent&gt; = (text: string, target: T) =&gt; T;\n\nconst func: FunctionType&lt;Child&gt; = myFunction;\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/?ssl=23&amp;ssc=46&amp;pln=20&amp;pc=1#code/JYOwLgpgTgZghgYwgAgApyhcyDeAoZQ5EOAWwgC5kBnMKUAcwG48BfPPUSWRFAYQAWwADYATZBAAekEKOpoMWMLgJES5KrXohmqwpGma6jFuzwwAriARhgAexDJSATwBiVm-ZAAKA2CPaDAA0yGAYDBD+yIIiogCUVDFiKkSh4ZEAdH7IALyhUmAsqQgO1HbCEBnCdgy+6WBxRUSYYBZQjmFQEYVsHCUgtPm0SaKJQsl5+KnqlMgA5JC0c0F6+Ybz1GQADhXLbCx4ohAIwoqhzlso7ta2DgAqFxAAPHcS0lhyCpjYeejfYAA+XLIXwFAKMEKdbpUO5xXJAu4HfqDSzWKjXTz3R5PEZAvIuDG3EAHVEIbxzEAQADudwKyyGYBGjSAA\" rel=\"nofollow noreferrer\">playground</a></p>\n\n<p>example to show it only works with descendants of <code>Parent</code>, because of <code>T extends Parent</code>:</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgApyhcyDeAoZQ5EOAWwgC5kBnMKUAcwG48BfPPUSWRFAYQAWwADYATZBAAekEKOpoMWMLgJES5KrXohmqwpGma6jFuzwwAriARhgAexDJSATwBiVm-ZAAKA2CPaDAA0yGAYDBD+yIIiogCUVDFiKkSh4ZEAdH7IALyhUmAsqQgO1HbCEBnCdgy+6WBxRUSYYBZQjmFQEYVsHCUgtPm0SaKJQsl5+KnqlMgA5JC0c0F6+Ybz1GQADhXLbCyc4NDwSMgAIjUpRABGGADW1FTXduUQcCCmHKIQCMKKoc4tih3NZbA4ACqAiAAHnBEmkWDkCkw2Dy6BRYAAfLlkL4CgFGCFOt0qOC4rlseCDv1BpZrFQQZ4IVDoRcGNi8i5GWCPhw6QhvHMQBAAO7ggrLIZgEaNIA\" rel=\"nofollow noreferrer\">playground</a></p>\n"}], "owner": {"reputation": 1807, "user_id": 1818628, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dd2d8a76c883e3787c012404cfbb9f3e?s=128&d=identicon&r=PG", "display_name": "splash27", "link": "https://stackoverflow.com/users/1818628/splash27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572420603, "creation_date": 1572371112, "last_edit_date": 1572371648, "question_id": 58612863, "link": "https://stackoverflow.com/questions/58612863/how-to-substitute-type-by-child-type-in-function-definition-in-typescript", "title": "How to substitute type by child type in function definition in TypeScript?", "body": "<pre><code>interface Parent {\n    name: string;\n}\n\ninterface Child extends Parent {\n    name: string;\n    text: string;\n}\n\nfunction myFunction(text: string, target: Child): Child {\n    target.text = text;\n    console.log(target);\n    return target;\n}\n\nconst testChild: Child = {\n    name: 'test',\n    text: 'sample',\n};\n\ndeclare type FunctionType = (text: string, target: Parent) =&gt; Parent;\n\nconst func: FunctionType = myFunction;\n\nfunc('newText', testChild);\n\n</code></pre>\n\n<p>This code leads to an error, because FunctionType awaits a function that has Parent (instead of Child) as one of arguments and result. Is there a way to make it works with direct descendants of Parent (like Child is)?</p>\n\n<p>When it might be useful? \nLet's imagine we have Angular component that accepts simple slim items (like our Parent) and handler function, but we want to give a Child item and corresponding handler function (myFunction in our case) to this component. All component's internal functions touch only Parent-related fields.\nI know that it is possible to create a subclass for parent component's class in Angular and override properties. But this will be a pain to create a new component or class for each new 'Child' type.\nIt's only for example.</p>\n\n<p>My general question is how to define function type that will accept not only Parent interface, but also all child interfaces (without listing children)?</p>\n\n<p>Actually I am trying to implement basic substitution principle: What works for parent should work for children.</p>\n"}, {"tags": ["javascript", "typescript", "react-native", "npm", "expo"], "comments": [{"owner": {"reputation": 1013, "user_id": 4506566, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/490ec3c6984a8bad2aad4c08b9e15c0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna Ira Hurnaus", "link": "https://stackoverflow.com/users/4506566/anna-ira-hurnaus"}, "edited": false, "score": 0, "creation_date": 1572371125, "post_id": 58612850, "comment_id": 103535842, "body": "I posted the same question in the expo forum: <a href=\"https://forums.expo.io/t/build-web-fails-inside-npm-script-with-typescript/29444\" rel=\"nofollow noreferrer\">forums.expo.io/t/&hellip;</a>"}, {"owner": {"reputation": 892, "user_id": 4810478, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/HBg7W.gif?s=128&g=1", "display_name": "JKL", "link": "https://stackoverflow.com/users/4810478/jkl"}, "edited": false, "score": 1, "creation_date": 1572371593, "post_id": 58612850, "comment_id": 103536033, "body": "This might be helpful: <a href=\"https://github.com/expo/expo-cli/blob/c82248438885f4fe494d5cfc72e2beaa62c2baaa/packages/webpack-config/src/withWorkbox.ts\" rel=\"nofollow noreferrer\">withWorkbox.ts</a>. As you can see the error happens at line number 142. It seems it can&#39;t load <code>register-service-worker.js</code> or something. Don&#39;t have the time at this moment but hope it helps!"}, {"owner": {"reputation": 1013, "user_id": 4506566, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/490ec3c6984a8bad2aad4c08b9e15c0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna Ira Hurnaus", "link": "https://stackoverflow.com/users/4506566/anna-ira-hurnaus"}, "reply_to_user": {"reputation": 892, "user_id": 4810478, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/HBg7W.gif?s=128&g=1", "display_name": "JKL", "link": "https://stackoverflow.com/users/4810478/jkl"}, "edited": false, "score": 0, "creation_date": 1572372015, "post_id": 58612850, "comment_id": 103536212, "body": "@JKL There is not node_modules/@expo/webpack-config/src/withWorkbox.ts, but there is a node_modules/@expo/webpack-config/webpack/withWorkbox.ts, which is mentioned two lines below. I have no clue why. Why do you think it tried to load <code>register-service-worker.js</code> here?"}, {"owner": {"reputation": 798, "user_id": 3687017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba87fe85fbce6a11da66cfc2a4e9328f?s=128&d=identicon&r=PG", "display_name": "brookemitchell", "link": "https://stackoverflow.com/users/3687017/brookemitchell"}, "edited": false, "score": 1, "creation_date": 1572406772, "post_id": 58612850, "comment_id": 103545887, "body": "Had this problem too, for now I&#39;ve patched this line node_modules/@expo/webpack-config/webpack/withWorkbox.js:93 to <code>if (false &amp;&amp; entries.app &amp;&amp; !entries.app.includes(swPath) &amp;&amp; autoRegister) {</code> to skip the whole <code>register-service-worker.js</code> block"}, {"owner": {"reputation": 400, "user_id": 1302625, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a9067f842317e3bf52a658aa360f77f0?s=128&d=identicon&r=PG", "display_name": "rickysullivan", "link": "https://stackoverflow.com/users/1302625/rickysullivan"}, "edited": false, "score": 1, "creation_date": 1575934134, "post_id": 58612850, "comment_id": 104725397, "body": "I had this error too and made a comment on the issue: <a href=\"https://github.com/expo/expo-cli/issues/1161\" rel=\"nofollow noreferrer\">github.com/expo/expo-cli/issues/1161</a>  &quot;Not using TS or expo-cli as a dep myself, but readFile -&gt; readFileSync fixed it for me.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3851541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46564c14578fffdf510622523b1ca74f?s=128&d=identicon&r=PG&f=1", "display_name": "user3851541", "link": "https://stackoverflow.com/users/3851541/user3851541"}, "is_accepted": false, "score": -3, "last_activity_date": 1573000267, "creation_date": 1573000267, "answer_id": 58721422, "question_id": 58612850, "link": "https://stackoverflow.com/questions/58612850/buildweb-fails-inside-npm-script-with-typescript/58721422#58721422", "title": "build:web fails inside npm script with typescript", "body": "<p>Add webpack-config to your project</p>\n\n<p><code>yarn add -D @expo/webpack-config</code></p>\n\n<p>Create a webpack.config.js file to the route of your project with:</p>\n\n<pre><code>const createExpoWebpackConfig = require(\"@expo/webpack-config\");\nmodule.exports = function(env, argv) {\n  env.mode = \"development\";\n  const config = createExpoWebpackConfig(env, argv);\n  return config;\n};\n</code></pre>\n\n<p>source: <a href=\"https://medium.com/@toastui/from-zero-to-publish-expo-web-react-native-for-web-tutorial-e3e020d6d3ff\" rel=\"nofollow noreferrer\">https://medium.com/@toastui/from-zero-to-publish-expo-web-react-native-for-web-tutorial-e3e020d6d3ff</a></p>\n"}], "owner": {"reputation": 1013, "user_id": 4506566, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/490ec3c6984a8bad2aad4c08b9e15c0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna Ira Hurnaus", "link": "https://stackoverflow.com/users/4506566/anna-ira-hurnaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1573000267, "creation_date": 1572371062, "question_id": 58612850, "link": "https://stackoverflow.com/questions/58612850/buildweb-fails-inside-npm-script-with-typescript", "title": "build:web fails inside npm script with typescript", "body": "<p>We are using the expo-cli as a local dependency to run build:web from a npm script without global installation of expo-cli. When executing <code>npm run build:web</code> we get the exception below.</p>\n\n<p>To create a minimal example we created a blank typescript project with expo init and ran <code>npm install expo-cli -D</code>. Doing the same without typescript everything worked as expected, so we think that the problem has something to do with typescript.</p>\n\n<p>The following exception happens when trying to build:</p>\n\n<pre><code>&gt;&gt;npm run build:web\n\n&gt; @ build:web /home/anna/examplets\n&gt; expo build:web\n\n(node:24316) UnhandledPromiseRejectionWarning: TypeError: Cannot read property 'replace' of undefined\n    at Object.&lt;anonymous&gt; (/home/anna/examplets/node_modules/@expo/webpack-config/src/withWorkbox.ts:142:10)\n    at Generator.next (&lt;anonymous&gt;)\n    at fulfilled (/home/anna/examplets/node_modules/@expo/webpack-config/webpack/withWorkbox.js:4:58)\n(node:24316) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\n(node:24316) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n</code></pre>\n\n<p>Output of <code>expo-diagnostics</code>:</p>\n\n<pre><code>Expo CLI 3.4.1 environment info:\n    System:\n      OS: Linux 4.15 Ubuntu 18.04.3 LTS (Bionic Beaver)\n      Shell: 4.4.20 - /bin/bash\n    Binaries:\n      Node: 10.16.2 - ~/.nvm/versions/node/v10.16.2/bin/node\n      Yarn: 1.19.1 - /usr/bin/yarn\n      npm: 6.9.0 - ~/.nvm/versions/node/v10.16.2/bin/npm\n    IDEs:\n      Android Studio: 3.5 AI-191.8026.42.35.5900203\n    npmPackages:\n      @types/react: ^16.8.23 =&gt; 16.9.11 \n      @types/react-native: ^0.57.65 =&gt; 0.57.65 \n      expo: ^35.0.0 =&gt; 35.0.0 \n      react: 16.8.3 =&gt; 16.8.3 \n      react-native: https://github.com/expo/react-native/archive/sdk-35.0.0.tar.gz =&gt; 0.59.8\n</code></pre>\n\n<p>This is the <code>package.json</code>:</p>\n\n<pre><code>{\n  \"main\": \"node_modules/expo/AppEntry.js\",\n  \"scripts\": {\n    \"start\": \"expo start\",\n    \"android\": \"expo start --android\",\n    \"ios\": \"expo start --ios\",\n    \"web\": \"expo start --web\",\n    \"eject\": \"expo eject\",\n    \"build:web\": \"expo build:web\"\n  },\n  \"dependencies\": {\n    \"expo\": \"^35.0.0\",\n    \"react\": \"16.8.3\",\n    \"react-dom\": \"16.8.3\",\n    \"react-native\": \"https://github.com/expo/react-native/archive/sdk-35.0.0.tar.gz\",\n    \"react-native-web\": \"^0.11.7\"\n  },\n  \"devDependencies\": {\n    \"@types/react\": \"^16.8.23\",\n    \"@types/react-native\": \"^0.57.65\",\n    \"babel-preset-expo\": \"^7.1.0\",\n    \"expo-cli\": \"^3.4.1\",\n    \"typescript\": \"^3.6.3\"\n  },\n  \"private\": true\n}\n</code></pre>\n"}]