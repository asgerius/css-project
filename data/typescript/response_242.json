[{"tags": ["angular", "typescript", "ngfor"], "comments": [{"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1567157145, "post_id": 57700936, "comment_id": 101888538, "body": "worth a read: <a href=\"https://angular.io/guide/pipes#appendix-no-filterpipe-or-orderbypipe\" rel=\"nofollow noreferrer\">angular.io/guide/pipes#appendix-no-filterpipe-or-orderbypipe</a> I would first of all suggest you handle this in the component, like the angular team also recommends."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567035246, "post_id": 57701098, "comment_id": 101846154, "body": "No that didn&#39;t work sadly, what i changed was the following:  (memo &amp;&amp; (filter[keyName] === item[keyName])) || filter[keyName] === &quot;&quot;, true))"}, {"owner": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567121693, "post_id": 57701098, "comment_id": 101879287, "body": "have any other suggestions?"}], "tags": [], "owner": {"reputation": 10247, "user_id": 386188, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/IX45D.jpg?s=128&g=1", "display_name": "Toan Nguyen", "link": "https://stackoverflow.com/users/386188/toan-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1567034182, "creation_date": 1567034182, "answer_id": 57701098, "question_id": 57700936, "link": "https://stackoverflow.com/questions/57700936/how-to-get-exact-word-using-angular-filter-pipe-and-not-words-matching-the-value/57701098#57701098", "title": "How to get exact word using angular filter pipe and not words matching the value?", "body": "<p>Instead of doing <code>new RegExp(filter[keyName], 'gi').test(item[keyName]))</code>, you will need to do <code>filter[keyName] === item[keyName]</code>. I hope this helps</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567058155, "post_id": 57703704, "comment_id": 101850476, "body": "I get filter.map is not a function error when using that"}, {"owner": {"reputation": 51, "user_id": 11960689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20657c551826c0f66d479fb441e028c8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/11960689/david"}, "reply_to_user": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567058307, "post_id": 57703704, "comment_id": 101850531, "body": "filter is the name to variable an I suppose is other array, if is a string is more easy :)"}, {"owner": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567059243, "post_id": 57703704, "comment_id": 101850826, "body": "So if it was a string it would not need filter.map?"}, {"owner": {"reputation": 51, "user_id": 11960689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20657c551826c0f66d479fb441e028c8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/11960689/david"}, "reply_to_user": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567059763, "post_id": 57703704, "comment_id": 101851039, "body": "if you pass as string, only need items.filter(itemItem =&gt; itemItem === filter)"}, {"owner": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567121671, "post_id": 57703704, "comment_id": 101879281, "body": "Neither one of those work sadly, have any other idea?"}, {"owner": {"reputation": 51, "user_id": 11960689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20657c551826c0f66d479fb441e028c8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/11960689/david"}, "reply_to_user": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "edited": false, "score": 0, "creation_date": 1567142262, "post_id": 57703704, "comment_id": 101882667, "body": "can you share an example how do you implement and what is the final label that you expect"}], "tags": [], "owner": {"reputation": 51, "user_id": 11960689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20657c551826c0f66d479fb441e028c8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/11960689/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1567057575, "creation_date": 1567057575, "answer_id": 57703704, "question_id": 57700936, "link": "https://stackoverflow.com/questions/57700936/how-to-get-exact-word-using-angular-filter-pipe-and-not-words-matching-the-value/57703704#57703704", "title": "How to get exact word using angular filter pipe and not words matching the value?", "body": "<p>I think with this code is success</p>\n\n<pre><code>export class FilterPipe implements PipeTransform {\n  transform(items: any, filter: any, isAnd: bool): any {\n    if (filter &amp;&amp; Array.isArray(items)) {\n      return filter.map(filterItem =&gt; items.filter(itemItem =&gt; itemItem === filterItem).join())\n    } else {\n      return items;\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11991311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e563ef687456ee894c4759b143784c4?s=128&d=identicon&r=PG&f=1", "display_name": "Orange", "link": "https://stackoverflow.com/users/11991311/orange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567057575, "creation_date": 1567032727, "question_id": 57700936, "link": "https://stackoverflow.com/questions/57700936/how-to-get-exact-word-using-angular-filter-pipe-and-not-words-matching-the-value", "title": "How to get exact word using angular filter pipe and not words matching the value?", "body": "<p>Example if i search [App] i don't want to see [Apple, Appliance, Appliances], instead i want to only see [App] in the search</p>\n\n<pre><code>    @Pipe({\n    name: 'filter'\n})\nexport class FilterPipe implements PipeTransform {\n  transform(items: any, filter: any, isAnd: bool): any {\n    if (filter &amp;&amp; Array.isArray(items)) {\n      let filterKeys = Object.keys(filter);\n      if (isAnd) {\n        return items.filter(item =&gt;\n            filterKeys.reduce((memo, keyName) =&gt;\n                (memo &amp;&amp; new RegExp(filter[keyName], 'gi').test(item[keyName])) || filter[keyName] === \"\", true));\n      } else {\n        return items.filter(item =&gt; {\n          return filterKeys.some((keyName) =&gt; {\n            console.log(keyName);\n            return new RegExp(filter[keyName], 'gi').test(item[keyName]) || filter[keyName] === \"\";\n          });\n        });\n      }\n    } else {\n      return items;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ngrx", "ngrx-store"], "comments": [{"owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1567089509, "post_id": 57700905, "comment_id": 101867358, "body": "Can you share the sample of the response received from firebase? I would propose to use <code>@ngrx&#47;effect</code> to normalize the data and then dispatch an action to update the store."}], "answers": [{"tags": [], "owner": {"reputation": 572, "user_id": 4112651, "user_type": "registered", "profile_image": "https://graph.facebook.com/558405123/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/4112651/ash"}, "is_accepted": true, "score": 1, "last_activity_date": 1567033869, "creation_date": 1567033869, "answer_id": 57701064, "question_id": 57700905, "link": "https://stackoverflow.com/questions/57700905/normalising-data-shape-in-ngrx-data-store/57701064#57701064", "title": "Normalising data shape in ngrx data store", "body": "<pre><code>(state, payload) =&gt; ({\n    ...state,\n    tasks: payload.payload ? [ { ...state, ...payload.payload } ] : []\n  })\n</code></pre>\n\n<p>This is in practice setting the existing state <code>tasks</code> object to a <strong>copy</strong> of the state and <strong>merging</strong> the <code>payload.payload</code> object with it.</p>\n\n<p>Did you mean to just add the payload to the <code>tasks</code> array? If so you should do this</p>\n\n<pre><code>if (payload.payload) {\n   return {\n      ...state,\n      tasks: [...state.tasks,  payload.payload]\n   }\n}\n\nreturn state\n</code></pre>\n"}], "owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57701064, "answer_count": 1, "score": 0, "last_activity_date": 1567033869, "creation_date": 1567032447, "last_edit_date": 1567032800, "question_id": 57700905, "link": "https://stackoverflow.com/questions/57700905/normalising-data-shape-in-ngrx-data-store", "title": "Normalising data shape in ngrx data store", "body": "<p>I have an application that retrieves tasks associated with a user from Firebase. In the example below, I have retrieved three tasks, but I can't understand why my data shape has come out as below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PwryK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PwryK.png\" alt=\"enter image description here\"></a></p>\n\n<p>I was hoping that it would look like this:</p>\n\n<pre><code>task: [{ ... }, { ... }, { ... }]\n</code></pre>\n\n<p>Is it possible to flatten my store as above? This is my code as follows. The mapping happens at <code>TaskActions.dataReceived</code>:</p>\n\n<pre><code>import * as TaskActions from './task.actions';\nimport { Action, createReducer, on } from '@ngrx/store';\nimport { ITask } from '../../models/task';\n\nexport interface State {\n  task: ITask | null;\n  error: any;\n}\n\nconst initialState: ITask = null;\n\nexport const taskReducer = createReducer(\n  initialState,\n  on(TaskActions.getData, state =&gt; ({ ...state })),\n  on(TaskActions.dataReceived, (state, payload) =&gt; ({\n    ...state,\n    tasks: payload.payload ? [ { ...state, ...payload.payload } ] : []\n  })),\n  on(TaskActions.dataNotReceived, state =&gt; ({ ...state })),\n  on(TaskActions.signOut, state =&gt; ({ ...state })),\n  on(TaskActions.signOutSuccess, state =&gt; ({ ...state, ...initialState })),\n);\n\nexport function reducer(state: ITask | undefined, action: Action) {\n  return taskReducer(state, action);\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "react-bootstrap"], "comments": [{"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 5, "creation_date": 1567029812, "post_id": 57700557, "comment_id": 101845090, "body": "Make it a regular class based component and call setState"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 2, "creation_date": 1567030008, "post_id": 57700557, "comment_id": 101845128, "body": "The answer to <code>How to use useState in React 15</code> is <b>You don&#39;t</b>. It isn&#39;t supported, so either upgrade your version of react or dont use hooks. If you want to create this same example in v15 then just create a regular class with state."}], "answers": [{"comments": [{"owner": {"reputation": 13341, "user_id": 10030970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e57ef36f01ce7924715bdc240cebae?s=128&d=identicon&r=PG", "display_name": "Cool Guy", "link": "https://stackoverflow.com/users/10030970/cool-guy"}, "reply_to_user": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 1, "creation_date": 1567030660, "post_id": 57700624, "comment_id": 101845271, "body": "@JohnRuddell that&#39;s hilarious lol. Also, explains why I&#39;ve been able to get more marked answers, since you&#39;re leaving them open for me haha."}, {"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567098818, "post_id": 57700624, "comment_id": 101871895, "body": "Thanks for your replies, but let&#39;s tone down the ribbing please. Back the problem at hand, I can&#39;t get the above solution to work under react 15.0.8."}, {"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567100863, "post_id": 57700624, "comment_id": 101872749, "body": "Christopher Ngo, I&#39;ve modified your answer so that it compiles, but the Collapse does not open/close. Can you give me a working version or explain why it doesn&#39;t work."}, {"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567102856, "post_id": 57700624, "comment_id": 101873515, "body": "I&#39;m waiting for my edits to be peer-reviewed, so sorry if my comment doesn&#39;t make sense."}, {"owner": {"reputation": 13341, "user_id": 10030970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e57ef36f01ce7924715bdc240cebae?s=128&d=identicon&r=PG", "display_name": "Cool Guy", "link": "https://stackoverflow.com/users/10030970/cool-guy"}, "reply_to_user": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 1, "creation_date": 1567104115, "post_id": 57700624, "comment_id": 101873997, "body": "@dfdumaresq you probably still need to add the stylesheet and scripts that are required to use react-strap see: <a href=\"https://react-bootstrap.github.io/getting-started/introduction/\" rel=\"nofollow noreferrer\">react-bootstrap.github.io/getting-started/introduction</a>   Put those items in your publc/index.html file Also here is a working sandbox: <a href=\"https://codesandbox.io/s/billowing-framework-gd73l\" rel=\"nofollow noreferrer\">codesandbox.io/s/billowing-framework-gd73l</a> which you can refer to"}, {"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567106110, "post_id": 57700624, "comment_id": 101874795, "body": "Thanks for that, Christopher! Mine briefly shows the text, but then the container collapses. I see the same thing in your sandbox, when I downgrade react-bootstrap to &quot;react-bootstrap&quot;: &quot;^0.32.4&quot;. When I try to run with &quot;react-bootstrap&quot;: &quot;1.0.0-beta.12&quot; it causes breaking changes. I will upload my package.json. I see you&#39;re using react 16, but this might work just be fixing the Transistion in react-bootstrap."}, {"owner": {"reputation": 13341, "user_id": 10030970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e57ef36f01ce7924715bdc240cebae?s=128&d=identicon&r=PG", "display_name": "Cool Guy", "link": "https://stackoverflow.com/users/10030970/cool-guy"}, "reply_to_user": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567112940, "post_id": 57700624, "comment_id": 101877218, "body": "@dfdumaresq hmm thats so strange, I dont actually see the bug you&#39;ve mentioned :(. You&#39;re right, it might just be compatibility issues with the package versions. Have you had any luck resolving this? Or I might just be misinterpreting the bug haha. Do you just want the text to be hidden on click, (no transition)."}, {"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567115681, "post_id": 57700624, "comment_id": 101877904, "body": "Yeah - I just want it to be hidden on click. No transition."}, {"owner": {"reputation": 13341, "user_id": 10030970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e57ef36f01ce7924715bdc240cebae?s=128&d=identicon&r=PG", "display_name": "Cool Guy", "link": "https://stackoverflow.com/users/10030970/cool-guy"}, "reply_to_user": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567117633, "post_id": 57700624, "comment_id": 101878407, "body": "@dfdumaresq you can just give the Collapse component a timeout prop as noted in the documentation.         <code>&lt;Collapse in={open} timeout={0}&gt;</code> that will make it so theres no transition. See updated code above and sandbox for reference."}, {"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567127924, "post_id": 57700624, "comment_id": 101880327, "body": "Christopher, using a timeout on the Collapse component does not seem to work with <code>react-bootstrap: 0.32.4</code>"}], "tags": [], "owner": {"reputation": 13341, "user_id": 10030970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e57ef36f01ce7924715bdc240cebae?s=128&d=identicon&r=PG", "display_name": "Cool Guy", "link": "https://stackoverflow.com/users/10030970/cool-guy"}, "is_accepted": false, "score": 4, "last_activity_date": 1567117645, "last_edit_date": 1567117645, "creation_date": 1567030081, "answer_id": 57700624, "question_id": 57700557, "link": "https://stackoverflow.com/questions/57700557/how-to-use-usestate-in-react-15-with-react-bootstrap/57700624#57700624", "title": "How to use useState in React 15 with react-bootstrap", "body": "<p>It's not mandatory that you use hooks for this reactstrap example. You can create a class-based component and still accomplish the same feature.</p>\n\n<pre><code>import { Button, Collapse } from 'react-bootstrap';\n\nclass Example extends React.Component&lt;any, any&gt; {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      open: true\n    };\n  }\n\n  handleClick = () =&gt; {\n    this.setState( (prevState: { open: any; }) =&gt; ({\n      open: !prevState.open\n    }))\n  }\n\n  render() {\n    const {open} = this.state\n    console.log(open);\n    return (\n      &lt;div&gt;\n      &lt;Button\n          onClick={this.handleClick}\n          aria-controls=\"example-collapse-text\"\n          aria-expanded={open}\n        &gt;\n          click\n        &lt;/Button&gt;\n        &lt;Collapse in={open} timeout={0}&gt;\n          &lt;div id=\"example-collapse-text\"&gt;\n            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus\n            terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer\n            labore wes anderson cred nesciunt sapiente ea proident.\n          &lt;/div&gt;\n        &lt;/Collapse&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default Example;\n</code></pre>\n\n<p>Also, make sure to import the react-strap stylesheet and scripts to your public/index.html file. Put these in the <code>head</code> tag</p>\n\n<pre><code>  &lt;head&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n      integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n      crossorigin=\"anonymous\"\n    /&gt;\n    &lt;script\n      src=\"https://unpkg.com/react/umd/react.production.min.js\"\n      crossorigin\n    /&gt;\n\n    &lt;script\n      src=\"https://unpkg.com/react-dom/umd/react-dom.production.min.js\"\n      crossorigin\n    /&gt;\n\n    &lt;script\n      src=\"https://unpkg.com/react-bootstrap@next/dist/react-bootstrap.min.js\"\n      crossorigin\n    /&gt;\n\n    &lt;script&gt;\n      var Alert = ReactBootstrap.Alert;\n    &lt;/script&gt;\n  &lt;/head&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "edited": false, "score": 0, "creation_date": 1567103241, "post_id": 57700687, "comment_id": 101873655, "body": "Thanks for the answer Webber. We <i>are</i> challenging the reasons for not upgrading, but have a lot of dependencies that need to be dealt with. A collapsing container is the important part of this and I may need to look at something other than Boostrap that just works in v15."}], "tags": [], "owner": {"reputation": 2760, "user_id": 3593896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJpxY.jpg?s=128&g=1", "display_name": "Webber", "link": "https://stackoverflow.com/users/3593896/webber"}, "is_accepted": false, "score": 1, "last_activity_date": 1567030565, "creation_date": 1567030565, "answer_id": 57700687, "question_id": 57700557, "link": "https://stackoverflow.com/questions/57700557/how-to-use-usestate-in-react-15-with-react-bootstrap/57700687#57700687", "title": "How to use useState in React 15 with react-bootstrap", "body": "<p>You can refer to the current <a href=\"https://github.com/facebook/react/blob/master/packages/react/src/ReactHooks.js\" rel=\"nofollow noreferrer\">implementation</a> by react.</p>\n\n<p>However, i wouldn't recommend recreating it. So here are the real options:</p>\n\n<ul>\n<li><p>First it might be a good idea to challenge the reasons for not upgrading if you want to start using hooks. (many people don't challenge this, but i'd say the best option would always be to upgrade. It resolves security issues and prevents you from having to reinvent the wheel.</p></li>\n<li><p>That said; if it's really not an option to upgrade, you may refer to the official documentation for <a href=\"https://reactjs.org/docs/state-and-lifecycle.html#adding-local-state-to-a-class\" rel=\"nofollow noreferrer\">react: state and lifecycle</a>. It will mean that you have to convert your components into classes every time you need state in your component. You may refer to the answer from @ChristopherNgo for what your implementation would look like.</p></li>\n<li><p>For specific cases you may use redux, to make the state globally available to your app. In your example case it may make little sense however.</p></li>\n</ul>\n"}], "owner": {"reputation": 1468, "user_id": 183349, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d07490f2d72cfd391289581976c8f1f?s=128&d=identicon&r=PG", "display_name": "dfdumaresq", "link": "https://stackoverflow.com/users/183349/dfdumaresq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1974, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567117645, "creation_date": 1567029618, "last_edit_date": 1567106525, "question_id": 57700557, "link": "https://stackoverflow.com/questions/57700557/how-to-use-usestate-in-react-15-with-react-bootstrap", "title": "How to use useState in React 15 with react-bootstrap", "body": "<p>I want to use react-bootstrap's Collapse in a project, but it requires useState from react-hooks, which has been introduced in react version 16.8. However, the project is still on react version 15.3 and updating is not an option.</p>\n\n<p>Can someone suggest how to implement this react-bootstrap example using react 15.3?</p>\n\n<pre><code>  function Example() {\n    const [open, setOpen] = useState(false);\n\n    return (\n      &lt;&gt;\n        &lt;Button\n          onClick={() =&gt; setOpen(!open)}\n          aria-controls=\"example-collapse-text\"\n          aria-expanded={open}\n        &gt;\n          click\n        &lt;/Button&gt;\n        &lt;Collapse in={open}&gt;\n          &lt;div id=\"example-collapse-text\"&gt;\n            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus\n            terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer\n            labore wes anderson cred nesciunt sapiente ea proident.\n          &lt;/div&gt;\n        &lt;/Collapse&gt;\n      &lt;/&gt;\n    );\n  }\n\n  render(&lt;Example /&gt;);\n</code></pre>\n\n<p>Here is my package.json</p>\n\n<pre><code>{\n  \"name\": \"hello-react-bootstrap\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"@types/jest\": \"24.0.18\",\n    \"@types/node\": \"12.7.2\",\n    \"@types/react\": \"^15.0.8\",\n    \"@types/react-bootstrap\": \"^0.32.19\",\n    \"@types/react-dom\": \"^15.5.0\",\n    \"react\": \"^15.3.2\",\n    \"react-bootstrap\": \"^0.32.4\",\n    \"react-dom\": \"^15.3.2\",\n    \"react-scripts\": \"3.1.1\",\n    \"typescript\": \"3.6.2\"\n  },\n  \"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n  \"eslintConfig\": {\n    \"extends\": \"react-app\"\n  },\n  \"browserslist\": {\n    \"production\": [\n      \"&gt;0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 32699, "user_id": 202694, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/982e5d5973bcd2be7b77e52ec7dca27c?s=128&d=identicon&r=PG", "display_name": "Pace", "link": "https://stackoverflow.com/users/202694/pace"}, "is_accepted": false, "score": 2, "last_activity_date": 1567034824, "creation_date": 1567034824, "answer_id": 57701170, "question_id": 57700502, "link": "https://stackoverflow.com/questions/57700502/observables-inside-of-tap-complete/57701170#57701170", "title": "Observables inside of tap() complete", "body": "<p>Yes, RxJS will run the piped operators in order.  As long as the tap operators are synchronous they will complete before the map operator is run.  If they do anything asynchronous they will not.</p>\n"}], "owner": {"reputation": 10809, "user_id": 149358, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b1e45f43831a8a7d53b102b495db1dab?s=128&d=identicon&r=PG", "display_name": "Darthg8r", "link": "https://stackoverflow.com/users/149358/darthg8r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2315, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567080014, "creation_date": 1567029258, "question_id": 57700502, "link": "https://stackoverflow.com/questions/57700502/observables-inside-of-tap-complete", "title": "Observables inside of tap() complete", "body": "<p>If I use the tap rxjs operator on an observable to call another observable, can I guarantee that it completes before the rest of the pipe?</p>\n\n<p>The idea here is to have a service make an http call to the backend, if it's a good login, create a cookie, then return a mapped  response to the consuming component.  I want to make sure the cookie is added before continuing to make sure there are no race conditions.</p>\n\n<pre><code>import { of, Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n\nconst httpObservable = loginAccount('fsdfds', 'fdsfsd');\n\nhttpObservable.subscribe(x =&gt; {\n    console.log(x);\n});\n\n\n\nfunction loginAccount(username, password): Observable&lt;any&gt; {\n    const httpResponse = of({ loggedIn: false, data: 'faketokenfrombackend' });\n\n    return httpResponse.pipe(\n        // Will this AWLAYS complete before map?\n        tap(resp =&gt; fakeLocalStorage('Do something with the result')),\n        // Will this AWLAYS complete before map?\n        tap(resp =&gt; fakeLocalStorage('Do something else with the result')),\n        map(resp =&gt; {\n            if (!resp.loggedIn)\n                return { success: false, message: 'really bad thing happened' };\n            else\n                return {success: true, message: 'WEEEEEE, it worked!'}\n        }));\n}\n\nfunction fakeLocalStorage(data: string): Observable&lt;boolean&gt; {\n    console.log('adding token to cookie');\n    return of(true);\n}\n</code></pre>\n\n<p>The above script outputs this to the console window as expected, but can I rely on it?</p>\n\n<pre><code>adding token to cookie\nadding token to cookie\n{success: false, message: \"really bad thing happened\"}\n</code></pre>\n"}, {"tags": ["typescript", "constructor"], "answers": [{"tags": [], "owner": {"reputation": 12464, "user_id": 7497763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQEbN.png?s=128&g=1", "display_name": "cyr_x", "link": "https://stackoverflow.com/users/7497763/cyr-x"}, "is_accepted": true, "score": 1, "last_activity_date": 1567028550, "creation_date": 1567028550, "answer_id": 57700403, "question_id": 57700373, "link": "https://stackoverflow.com/questions/57700373/get-type-of-construct-function-in-typescript-interface/57700403#57700403", "title": "Get type of construct function in Typescript interface", "body": "<p>Typescript added a type called <code>InstanceType</code> for this case with version 2.8.</p>\n\n<pre><code>interface Foo {\n    new(a: string): Bar\n}\n\ntype X = InstanceType&lt;Foo&gt;; // Bar\n</code></pre>\n"}], "owner": {"reputation": 148451, "user_id": 309308, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/dd7e03fbbfcabd4675844173ec5390d2?s=128&d=identicon&r=PG", "display_name": "Michael Mrozek", "link": "https://stackoverflow.com/users/309308/michael-mrozek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57700403, "answer_count": 1, "score": 0, "last_activity_date": 1567028550, "creation_date": 1567028333, "question_id": 57700373, "link": "https://stackoverflow.com/questions/57700373/get-type-of-construct-function-in-typescript-interface", "title": "Get type of construct function in Typescript interface", "body": "<p>Given a Typescript interface:</p>\n\n<pre><code>interface Foo {\n    bar(a: string): Bar\n}\n</code></pre>\n\n<p>I can get the type of a function by indexing into the interface type:</p>\n\n<pre><code>type X = Foo[\"bar\"] // X is (a: string) =&gt; Bar\n</code></pre>\n\n<p>But this doesn't work with a construct signature:</p>\n\n<pre><code>interface Foo {\n    new(a: string): Bar\n}\n\ntype X = Foo[\"new\"] // Property 'new' does not exist on type 'Foo'\n</code></pre>\n\n<p>Is there a way to access this type (really just the return type, <code>Bar</code>)? I hacked together this, but I'm sure there's a better way:</p>\n\n<pre><code>const foo: Foo\nconst inst = new foo('')\ntype X = typeof inst // Bar\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 1949, "user_id": 6651984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BM3Ui.jpg?s=128&g=1", "display_name": "Abel Valdez", "link": "https://stackoverflow.com/users/6651984/abel-valdez"}, "edited": false, "score": 0, "creation_date": 1567028436, "post_id": 57700163, "comment_id": 101844713, "body": "You need to investigate about [(ngModel)] to get the reference of the input"}, {"owner": {"reputation": 19848, "user_id": 1090206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BVW9D.jpg?s=128&g=1", "display_name": "Chris W.", "link": "https://stackoverflow.com/users/1090206/chris-w"}, "edited": false, "score": 0, "creation_date": 1567028547, "post_id": 57700163, "comment_id": 101844752, "body": "I think you&#39;re looking for to get your event.target is <code>(event.target as HTMLInputElement).value</code> instead and <code>Event</code> is correct considering that&#39;s the <a href=\"https://html.spec.whatwg.org/multipage/indices.html#events-2\" rel=\"nofollow noreferrer\">correct interface</a> for <code>change</code> technically, but can&#39;t test at the moment so just a comment."}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 9453665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ryan Sperzel", "link": "https://stackoverflow.com/users/9453665/ryan-sperzel"}, "edited": false, "score": 0, "creation_date": 1567087307, "post_id": 57700638, "comment_id": 101865987, "body": "This gives me a similar TS linting error <code>Property &#39;files&#39; does not exist on type &#39;Element&#39;.</code>"}], "tags": [], "owner": {"reputation": 395, "user_id": 7061557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/202d8e456de564b67f897050b294eebe?s=128&d=identicon&r=PG&f=1", "display_name": "iams0nus", "link": "https://stackoverflow.com/users/7061557/iams0nus"}, "is_accepted": false, "score": 2, "last_activity_date": 1567030187, "creation_date": 1567030187, "answer_id": 57700638, "question_id": 57700163, "link": "https://stackoverflow.com/questions/57700163/what-typescript-type-is-a-change-event-in-angular/57700638#57700638", "title": "What Typescript type is a change event? (In Angular)", "body": "<p>the files should be a accessible thru the <code>event.srcElement.files</code> property.</p>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 9453665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ryan Sperzel", "link": "https://stackoverflow.com/users/9453665/ryan-sperzel"}, "edited": false, "score": 0, "creation_date": 1567088665, "post_id": 57701995, "comment_id": 101866836, "body": "This does work to get rid of that TS error, but has a problem with on line 3: <code>Type &#39;FileList&#39; is not an array type</code> @qt-ray"}, {"owner": {"reputation": 594, "user_id": 5875929, "user_type": "registered", "profile_image": "https://graph.facebook.com/861848937425/picture?type=large", "display_name": "QT Ray", "link": "https://stackoverflow.com/users/5875929/qt-ray"}, "reply_to_user": {"reputation": 275, "user_id": 9453665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ryan Sperzel", "link": "https://stackoverflow.com/users/9453665/ryan-sperzel"}, "edited": false, "score": 0, "creation_date": 1567093250, "post_id": 57701995, "comment_id": 101869331, "body": "Would you be able to wrap the event.target in line three as HTMLInputElement and use <code>const files = (event.target as HTMLInputElement).files</code> and get the file you need? I can help more wit that if you&#39;d like as well!"}], "tags": [], "owner": {"reputation": 594, "user_id": 5875929, "user_type": "registered", "profile_image": "https://graph.facebook.com/861848937425/picture?type=large", "display_name": "QT Ray", "link": "https://stackoverflow.com/users/5875929/qt-ray"}, "is_accepted": true, "score": 19, "last_activity_date": 1567043846, "creation_date": 1567043846, "answer_id": 57701995, "question_id": 57700163, "link": "https://stackoverflow.com/questions/57700163/what-typescript-type-is-a-change-event-in-angular/57701995#57701995", "title": "What Typescript type is a change event? (In Angular)", "body": "<p>It is an event. But you're going to have to cast the const you're using as an HTMLInputElement.</p>\n\n<pre><code>public onChange(event: Event): void {\n  if ((event.target as HTMLInputElement).files &amp;&amp; (event.target as HTMLInputElement).files.length) {\n    const [file] = event.target.files;\n  }\n}\n</code></pre>\n\n<p>The only other way is going to be to suppress the error with tsignore. In react, flow, they have a type SyntheticEvent that you can type this particular case as to get around it but angular doesn't have a real equivalent.</p>\n"}, {"comments": [{"owner": {"reputation": 3864, "user_id": 1199708, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/BpL42.jpg?s=128&g=1", "display_name": "Yodacheese", "link": "https://stackoverflow.com/users/1199708/yodacheese"}, "edited": false, "score": 2, "creation_date": 1603839933, "post_id": 63030281, "comment_id": 114163371, "body": "ChangeEvent isn&#39;t a valid type in Typescript or Angular"}], "tags": [], "owner": {"reputation": 7, "user_id": 4249792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc964ea1ce82730c290dc094e13c9e25?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Y", "link": "https://stackoverflow.com/users/4249792/dmitry-y"}, "is_accepted": false, "score": -1, "last_activity_date": 1595407515, "creation_date": 1595407515, "answer_id": 63030281, "question_id": 57700163, "link": "https://stackoverflow.com/questions/57700163/what-typescript-type-is-a-change-event-in-angular/63030281#63030281", "title": "What Typescript type is a change event? (In Angular)", "body": "<pre><code>public onChange(event: ChangeEvent&lt;HTMLInputElement&gt;) {\n   const [file] = event.target.files;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1369, "user_id": 8784402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3806de82c331e8be734156459ad42850?s=128&d=identicon&r=PG&f=1", "display_name": "nkitku", "link": "https://stackoverflow.com/users/8784402/nkitku"}, "is_accepted": false, "score": 3, "last_activity_date": 1606166418, "last_edit_date": 1606166418, "creation_date": 1606163855, "answer_id": 64976048, "question_id": 57700163, "link": "https://stackoverflow.com/questions/57700163/what-typescript-type-is-a-change-event-in-angular/64976048#64976048", "title": "What Typescript type is a change event? (In Angular)", "body": "<pre><code>public onChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n\n    if (!input.files?.length) {\n        return;\n    }\n\n    const file = input.files[0];\n    console.log(file);\n}\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 9453665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ryan Sperzel", "link": "https://stackoverflow.com/users/9453665/ryan-sperzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17141, "favorite_count": 2, "accepted_answer_id": 57701995, "answer_count": 4, "score": 13, "last_activity_date": 1606166418, "creation_date": 1567027075, "last_edit_date": 1587157521, "question_id": 57700163, "link": "https://stackoverflow.com/questions/57700163/what-typescript-type-is-a-change-event-in-angular", "title": "What Typescript type is a change event? (In Angular)", "body": "<p>I'm trying to figure out what Typescript type a change event is used in an Angular project.</p>\n\n<p>The code is something simple like this:</p>\n\n<p><strong>file-upload.component.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;input type=\"file\" (change)=\"onChange($event)\"/&gt;\n</code></pre>\n\n<p><strong>file-upload.ts</strong></p>\n\n<pre><code>public onChange(event: Event): void {\n  if (event.target.files &amp;&amp; event.target.files.length) {\n    const [file] = event.target.files;\n    console.log(file);\n  }\n}\n</code></pre>\n\n<p>Typing the event as <code>Event</code> gives me the following Typescript linting error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Property 'files' does not exist on type 'EventTarget'\n</code></pre>\n\n<p>What should I be typing this if not <code>Event</code>?</p>\n"}, {"tags": ["javascript", "typescript", "pdfmake"], "comments": [{"owner": {"reputation": 458, "user_id": 1800371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Sd5S.jpg?s=128&g=1", "display_name": "Dieter Casier", "link": "https://stackoverflow.com/users/1800371/dieter-casier"}, "edited": false, "score": 0, "creation_date": 1567696300, "post_id": 57700106, "comment_id": 102048439, "body": "You set the text of the table body to data.text, data.status and this.getFeedback(data) but where does this &quot;data&quot; coming from?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 8564621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SumQgL0TaOk/AAAAAAAAAAI/AAAAAAAAGWk/CexagO-CMV0/photo.jpg?sz=128", "display_name": "Alexander Valach", "link": "https://stackoverflow.com/users/8564621/alexander-valach"}, "is_accepted": false, "score": 0, "last_activity_date": 1569503864, "creation_date": 1569503864, "answer_id": 58117699, "question_id": 57700106, "link": "https://stackoverflow.com/questions/57700106/pdfmake-table-dynamic-data/58117699#58117699", "title": "PDFmake table dynamic data", "body": "<p>I am not sure if this was your goal. </p>\n\n<p>I have rewritten your code and created JSON structure (const phases) for PDF and then dynamically filled table.body with JSON array consisting of rows. I did not try to run it, so there might be some compile errors. Hope this helps!</p>\n\n<pre><code>getData(installation, request) {\n  const phases = {\n    layout: {\n      hLineWidth: function(i, node) {\n        return 0.45;\n      },\n      vLineWidth: function(i, node) {\n       return 0.45;\n      }\n    },\n    table: {\n     dontBreakRows: true,\n     widths: [\"30%\", \"10%\", \"60%\"],\n     body: []\n    }\n   }\n\n   installation.phases.forEach(value =&gt; {\n    phases.table.body.push([\n     { text: value.text, style: 'cell' },\n     { text: value.status, },\n     { text: this.getFeedback(value), style: 'commentCell' }\n    ])\n   })\n\n  console.log(phases)\n  return phases\n}\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 10977489, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VYgSiO1T7FU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNag-6LuBk0iE0BtJ-AR9T76XQS0A/mo/photo.jpg?sz=128", "display_name": "Muhammad Ali", "link": "https://stackoverflow.com/users/10977489/muhammad-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1330, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569503864, "creation_date": 1567026811, "question_id": 57700106, "link": "https://stackoverflow.com/questions/57700106/pdfmake-table-dynamic-data", "title": "PDFmake table dynamic data", "body": "<p>I am using PDFmake to create pdf file, I want to add dynamic data in the table butt the body display empty.</p>\n\n<p>this one works when I print [0] but I have lots of dynamic data</p>\n\n<pre><code> getData(installation, request) {\n          const phases = {\n            layout: {\n              hLineWidth: function(i, node) {\n                return 0.45;\n              },\n              vLineWidth: function(i, node) {\n                return 0.45;\n              }\n            },\n            table: {\n              dontBreakRows: true,\n              widths: [\"30%\", \"10%\", \"60%\"],\n              body: [\n                [\n\n                  {\n                    text: installation.phases[0].text,\n                    style: \"cell\"\n                  },\n                  { text: installation.phases[0].status},\n                  {\n                    text: this.getFeedback(installation.phases[0]),\n                    style: \"commentCell\"\n                  }\n                ],\n              ]\n            }\n          };\n          console.log(phases);\n          return phases;\n      }\n</code></pre>\n\n<p>but If I use this one it create table body empty.</p>\n\n<pre><code>  getData(installation, request) {\ninstallation.phase.forEach(value =&gt;{\n          const phases = {\n            layout: {\n              hLineWidth: function(i, node) {\n                return 0.45;\n              },\n              vLineWidth: function(i, node) {\n                return 0.45;\n              }\n            },\n            table: {\n              dontBreakRows: true,\n              widths: [\"30%\", \"10%\", \"60%\"],\n              body: [\n                [\n\n                  {\n                    text: data.text,\n                    style: \"cell\"\n                  },\n                  { text: data.status},\n                  {\n                    text: this.getFeedback(data),\n                    style: \"commentCell\"\n                  }\n                ],\n              ]\n            }\n          };\n          console.log(phases);\n          return phases;\n});\n}\n</code></pre>\n\n<p>What could be wrong here? I have tried but cannot find solution</p>\n"}, {"tags": ["typescript", "generics", "type-safety"], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 7105287, "user_type": "registered", "profile_image": "https://graph.facebook.com/762129833940124/picture?type=large", "display_name": "elderapo", "link": "https://stackoverflow.com/users/7105287/elderapo"}, "edited": false, "score": 0, "creation_date": 1567074764, "post_id": 57701527, "comment_id": 101858574, "body": "Thanks for the answer! The trick with distributive conditional types seems to do the job for the arrays. However, it makes it impossible to return some transformed options from <code>someFunc</code> (strong typing is lost). Also, I&#39;ve realized that in my case it would be better to use an object instead of an array for options. I had to add 1 more generic (for the option name - key in the config object). <a href=\"https://gist.github.com/elderapo/c022a58576a8288a31235ab3b432b114\" rel=\"nofollow noreferrer\">Here is</a> link to the gist. Link ot TS playground was too long to fit in the comment."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1567038577, "creation_date": 1567038577, "answer_id": 57701527, "question_id": 57700091, "link": "https://stackoverflow.com/questions/57700091/problem-with-inferring-correct-types-from-generic-for-arrays/57701527#57701527", "title": "Problem with inferring correct types from generic for arrays", "body": "<p>It's pretty confusing to have such similar type names (<code>TYPE</code> vs <code>Type</code> vs <code>TYPE_ID</code> vs <code>TypeID</code>) so I'm going to make the names distinct in what follows... for generic parameters I use one-or-two capital letters (which is the convention for whatever reason).  Here's <code>Type</code>:</p>\n\n<pre><code>type Type&lt;T extends TypeID&gt; = {\n  [TypeID.Number]: number;\n  [TypeID.String]: string;\n  [TypeID.Boolean]: boolean;\n}[T];\n</code></pre>\n\n<p>And here's <code>Item</code>:  </p>\n\n<pre><code>type Item&lt;T extends TypeID&gt; = {\n  typeID: T; // &lt;-- T, not TypeID\n  format: (input: Type&lt;T&gt;) =&gt; Type&lt;T&gt;;\n};\n</code></pre>\n\n<p>Note this is modified further from your example.  You had two type parameters here, but only seemed to use a default value for the second one, so I removed it and used that default value.  But the important modification here is that the <code>typeID</code> property is of the <em>generic</em> type <code>T</code>, not the <em>concrete</em> type <code>TypeID</code>.  I think you probably meant to do this in your code, but maybe it was hard to see the difference.</p>\n\n<hr>\n\n<p>Now the way I'd go from here is to generate a type called <code>SomeItem</code> which is the union of all possible <code>Item&lt;T&gt;</code> types.  This concrete type can be used more easily than generic types:</p>\n\n<pre><code>type _SomeItem&lt;T extends TypeID&gt; = T extends any ? Item&lt;T&gt; : never;\ntype SomeItem = _SomeItem&lt;TypeID&gt;;\n// type SomeItem = Item&lt;TypeID.Number&gt; | Item&lt;TypeID.String&gt; | Item&lt;TypeID.Boolean&gt;\n</code></pre>\n\n<p>That worked by using a <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#distributive-conditional-types\" rel=\"nofollow noreferrer\">distributive conditional type</a> in the definition of <code>_SomeItem</code>, to distribute <code>Item&lt;T&gt;</code> across the union of <code>TypeID</code> values.</p>\n\n<p>Finally, <code>someFunc</code> can be a concrete function:</p>\n\n<pre><code>const someFunc = (options: Array&lt;SomeItem&gt;) =&gt; {\n  return null as any;\n};\n</code></pre>\n\n<p>And when you use it, you get the inference you expect:</p>\n\n<pre><code>someFunc([\n  {\n    typeID: TypeID.Number,\n    format: input =&gt; input // has type number\n  },\n  {\n    typeID: TypeID.Boolean,\n    format: input =&gt; input // has type boolean\n  },\n  {\n    typeID: TypeID.String,\n    format: input =&gt; input // has type string\n  }\n]);\n</code></pre>\n\n<p>Okay, hope that helps.  Good luck!<br>\n<a href=\"https://www.typescriptlang.org/play/#code/KYOwrgtgBAKgngB2ASQCJQN4FgBQUoBykARsAE5QC8UARAPp3gSlkM0A0u+AygC5kBLEAHMqtBgGd+Q4W054oAIQD2ygDbAAhiDH06xVRu1tcAX1y5eiYLGsAeGFGAAPXqAAmE20jQA+MdgKANrwPqgAdETM5AC6AFxQTCwA3FxQIdZo4XyCIvFQUrnCqcGhKBEq6log+QZV2iWmITElltZQyG4QDk6uHl5lfgFpVmEJMMlQAPRTUHYAtPOw7InKvN7laQBmymQQmrwJABRCCGCHGw6+AJRU-mVXja04ozZ03MoQKF09Lm4gng2Q2ojj+-Sg2jgUAA-B0fjB-AkQMAAG7kEqvKAfL6dYDQajvT7fPEOTKoXwlGZQTHY4n4uEkwYRKIsfwAHwZ3SZ2WkInZnNJYXClSMIF8FhwAGNlCApAUiQAxMAgSViI7KBC8AQyiQJACCZDImjgdlpuIgNzumDSZGAvDAZB04DUaghXkhTwlEkVyslRyCaUC+HwrzQ4zJkRI5HkwagOz2BwSp3OVuT6ypAAtNF5MUlyGlTDHrQoQ2Tw0KRdUi-h4-sLmnUyAzunZlmc+06qKC0Wg8HQ6hy+UeUVq3HdnWk02U5R-A3M9nqe1CjIC7gYtcSkA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 356, "user_id": 7105287, "user_type": "registered", "profile_image": "https://graph.facebook.com/762129833940124/picture?type=large", "display_name": "elderapo", "link": "https://stackoverflow.com/users/7105287/elderapo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57701527, "answer_count": 1, "score": 0, "last_activity_date": 1567038577, "creation_date": 1567026701, "question_id": 57700091, "link": "https://stackoverflow.com/questions/57700091/problem-with-inferring-correct-types-from-generic-for-arrays", "title": "Problem with inferring correct types from generic for arrays", "body": "<p>I have a hard time figuring out how to narrow inferred types in the following example. For now, all format functions accept <code>string | number | boolean</code> and expect to return <code>string | number | boolean</code>.</p>\n\n<p>Ideally, I would like to narrow these to only 1 type based on value of <code>typeID</code>.</p>\n\n<pre><code>enum TypeID {\n  Number = \"__number__\",\n  String = \"__string__\",\n  Boolean = \"__boolean__\"\n}\n\ntype Type&lt;TYPE_ID extends TypeID&gt; = {\n  [TypeID.Number]: number;\n  [TypeID.String]: string;\n  [TypeID.Boolean]: boolean;\n}[TYPE_ID];\n\ntype Item&lt;\n  TYPE_ID extends TypeID,\n  TYPE extends Type&lt;TYPE_ID&gt; = Type&lt;TYPE_ID&gt;\n&gt; = {\n  typeID: TypeID;\n  format: (input: TYPE) =&gt; TYPE;\n};\n\ntype Options&lt;TYPE_ID extends TypeID&gt; = Array&lt;Item&lt;TYPE_ID&gt;&gt;;\n\nconst someFunc = &lt;TYPE_ID extends TypeID&gt;(options: Options&lt;TYPE_ID&gt;) =&gt; {\n  return null as any;\n};\n\nsomeFunc([\n  {\n    typeID: TypeID.Number,\n    format: input =&gt; input // these should have type \"number\"\n  },\n  {\n    typeID: TypeID.Boolean,\n    format: input =&gt; input // these should have type \"boolean\"\n  },\n  {\n    typeID: TypeID.String,\n    format: input =&gt; input // these should have type \"string\"\n  }\n]);\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs", "typescript2.0", "angular8"], "answers": [{"tags": [], "owner": {"reputation": 1285, "user_id": 1454656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561bed0472fea7af0e48404f8a548ac0?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Nojek", "link": "https://stackoverflow.com/users/1454656/%c5%81ukasz-nojek"}, "is_accepted": true, "score": 0, "last_activity_date": 1567027065, "creation_date": 1567027065, "answer_id": 57700160, "question_id": 57700083, "link": "https://stackoverflow.com/questions/57700083/pass-data-from-observable-to-observable/57700160#57700160", "title": "Pass data from observable to observable", "body": "<p>The Data Service should return on Observable - something like (pseudo code):</p>\n\n<pre><code>    GetData(req):Observable&lt;Object[]&gt; {\n\n      return backendService.querydb(request).map(\n        pipe((res)=&gt; {\n          if(res) {\n             return \"result converted to the Object I can use\";\n          } else {\n             return \"something else\";\n          }\n        })         \n      );     \n   }\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 9969157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b24173484735f5dbe958a110634843b?s=128&d=identicon&r=PG&f=1", "display_name": "user9969157", "link": "https://stackoverflow.com/users/9969157/user9969157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 57700160, "answer_count": 1, "score": 0, "last_activity_date": 1567027065, "creation_date": 1567026663, "question_id": 57700083, "link": "https://stackoverflow.com/questions/57700083/pass-data-from-observable-to-observable", "title": "Pass data from observable to observable", "body": "<p>Just started learning rxjs. </p>\n\n<p>I am confused how to throw the observable from the Data Service layer to UI component layer. Also if the DB layer throws an error can I catch it in the UI component layer if I rethrow at all the below layers?</p>\n\n<p>This is my setup -</p>\n\n<p>UI Component -</p>\n\n<pre><code>   OnInit() {\n         dataService.GetData(req).Subscribe((d)=&gt; {\n            if(d) {\n               comboBox.data = d;\n            }\n         }\n       )\n   }\n</code></pre>\n\n<p>Data Service - I am confused at this part</p>\n\n<pre><code>   GetData(req):Observable&lt;Object[]&gt; {\n\n      backendService.querydb(request).Subscribe((res)=&gt; {\n          if(res) {\n             result: Object[] = Convert result to the Object I can use.\n             return of(result)\n          }\n        }         \n      );     \n   }\n</code></pre>\n\n<p>DB Service Layer -</p>\n\n<pre><code>   queryDB(request):Observable&lt;any&gt; {\n      return this.http.get(url).pipe(map(\n            (rslt: any) =&gt; {\n                return rslt;\n            },\n            (error) =&gt; {\n                this.consoleLogError(error);\n                throw error;\n            }\n        ));\n   }\n</code></pre>\n"}, {"tags": ["javascript", "asp.net-mvc", "typescript", "visual-studio", "import"], "answers": [{"comments": [{"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1567023011, "post_id": 57699249, "comment_id": 101842740, "body": "Thanks, omitting brackets fixed the problem! I think I&#39;ll have to read the TypeScript docs a bit more carefully to get a better idea of how this works."}], "tags": [], "owner": {"reputation": 13146, "user_id": 243192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UmXVb.png?s=128&g=1", "display_name": "Rengers", "link": "https://stackoverflow.com/users/243192/rengers"}, "is_accepted": true, "score": 1, "last_activity_date": 1567022057, "creation_date": 1567022057, "answer_id": 57699249, "question_id": 57699222, "link": "https://stackoverflow.com/questions/57699222/how-to-use-two-js-in-typescript/57699249#57699249", "title": "How to use two.js in TypeScript", "body": "<p>You should be able to import it like this if you installed it into <code>node_modules</code>. The Typescript compiler will resolve the module by finding it in the node_modules folder.</p>\n\n<p>Because it is a default export, you must omit the brackets here.</p>\n\n<pre><code>import Two from \"two.js\"\n</code></pre>\n"}], "owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 57699249, "answer_count": 1, "score": 0, "last_activity_date": 1567022274, "creation_date": 1567021906, "last_edit_date": 1567022274, "question_id": 57699222, "link": "https://stackoverflow.com/questions/57699222/how-to-use-two-js-in-typescript", "title": "How to use two.js in TypeScript", "body": "<p>I am using Visual Studio to write a ASP.NET MVC web application. I am also quite new to TypeScript, but I know C# and JavaScript so I don't have issues with the syntax.</p>\n\n<p>However I am completely confused with importing/referencing <strong>.js files</strong>, namely for the <a href=\"https://github.com/jonobr1/two.js\" rel=\"nofollow noreferrer\">two.js</a> library:</p>\n\n<p>One of the files (<a href=\"https://github.com/jonobr1/two.js/blob/dev/build/two.module.js\" rel=\"nofollow noreferrer\"><code>two.module.js</code></a>) seems to be annotated with JSDoc and ends with:</p>\n\n<pre><code>export default (this || window).Two;\n</code></pre>\n\n<p>so I am presuming it should be importable as an ES6 module, but how does this work with TypeScript?</p>\n\n<p>I tried using this:</p>\n\n<pre><code>import { Two } from \"../twojs/twojs.module.js\"\n</code></pre>\n\n<p>but I get an error (cannot find module <code>\"../twojs/twojs.module.js\"</code>, presumably because it's not a .ts file.</p>\n"}, {"tags": ["angular", "typescript", "webgl", "webgl2"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1567023137, "post_id": 57699205, "comment_id": 101842796, "body": "change <code>require(&#39;.&#47;Textures&#47;dirswindsigma995.jpg&#39;)</code> to <code>require(&#39;.&#47;Textures&#47;dirswindsigma995.jpg?&#39; + new Date().getTime())</code>"}, {"owner": {"reputation": 181, "user_id": 3821972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/57CKU.jpg?s=128&g=1", "display_name": "Kedriik", "link": "https://stackoverflow.com/users/3821972/kedriik"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1567023842, "post_id": 57699205, "comment_id": 101843038, "body": "@Reactgular didnt work; &quot;Cannot find module&quot;"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1567024171, "post_id": 57699205, "comment_id": 101843155, "body": "Right, because you&#39;re using require. I missed that."}], "answers": [{"comments": [{"owner": {"reputation": 1469, "user_id": 4656479, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh4.googleusercontent.com/-LRPVQu4jQQY/AAAAAAAAAAI/AAAAAAAAEQo/5okNKJbWhsU/photo.jpg?sz=128", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/4656479/ganesh"}, "edited": false, "score": 0, "creation_date": 1618976129, "post_id": 57702052, "comment_id": 118762341, "body": "If the image is not present at the specified path, it triggers the request forever. As Date.now() will keep changing the url, it doesn&#39;t consider onError function for showing default images."}], "tags": [], "owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "is_accepted": true, "score": 2, "last_activity_date": 1567044328, "creation_date": 1567044328, "answer_id": 57702052, "question_id": 57699205, "link": "https://stackoverflow.com/questions/57699205/disable-images-caching-in-browser/57702052#57702052", "title": "Disable images caching in browser", "body": "<p>This is not a texture issue it's an <code>&lt;img&gt;</code> issue. The supposed solution is you need to send the correct headers from your server to tell the browser not to cache the texture. If you can't set the correct headers a workaround is to add query parameters to your image URL.</p>\n\n<pre><code>const imageUrl = `./Textures/dirswindsigma995.jpg?${Date.now()}`;\n</code></pre>\n\n<p>Now every time you request the image the browser will see a different URL</p>\n\n<p>Note that it's unlikely you can use <code>require</code> for this.</p>\n"}], "owner": {"reputation": 181, "user_id": 3821972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/57CKU.jpg?s=128&g=1", "display_name": "Kedriik", "link": "https://stackoverflow.com/users/3821972/kedriik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 57702052, "answer_count": 1, "score": 2, "last_activity_date": 1567153113, "creation_date": 1567021861, "last_edit_date": 1567153113, "question_id": 57699205, "link": "https://stackoverflow.com/questions/57699205/disable-images-caching-in-browser", "title": "Disable images caching in browser", "body": "<p>I have Earth weather web application that once per six hours receives new weather maps (as images). I want to browser to not cache these images to allow user experience fresh weather not cached from previous days.\nMy setup is:</p>\n\n<ul>\n<li>Angular 2 application build with --prod param and uploaded to hosting via ftp</li>\n<li>Python \"backend\" that once per six hours download grib data, convert it to images and upload to ftp.</li>\n</ul>\n\n<p>I've tried to add to header of index.html meta data:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>  &lt;meta http-equiv='cache-control' content='no-cache'&gt;\n  &lt;meta http-equiv='expires' content='0'&gt;\n  &lt;meta http-equiv='pragma' content='no-cache'&gt;\n</code></pre>\n\n<p>These textures are loaded this way:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>   this.ParticlesVelocitiesImage = new Image();\n   this.ParticlesVelocitiesImage.src = require('./Textures/dirswindsigma995.jpg');\n   this.ParticlesVelocitiesImage.onload = () =&gt; {\n       this.ParticlesVelocities = this.gl.createTexture();\n       this.gl.bindTexture(this.gl.TEXTURE_2D, this.ParticlesVelocities);\n       this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.ParticlesVelocitiesImage.width,\n       this.ParticlesVelocitiesImage.height, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.ParticlesVelocitiesImage)\n       this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n       this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n    }\n</code></pre>\n\n<p>However textures are still cached. I need to clear cache manually to experience freshly updated weather maps.</p>\n\n<p><strong>UPDATE</strong>\nAfter Reactgular and gman responses I started to look after another way of loading images. So instead of <code>require()</code> I added <code>&lt;img hidden=\"true\" [src] = \"urlwith?timestamp\"&gt;</code> tags in my component's HTML template and provide url with timestamp after question mark. Then the rest is the same, <code>onload</code> function of image is triggered and my texture is loaded. However because my webgl2 application is quite performance needy I'd rather avoid another images being rendered in HTML. </p>\n"}, {"tags": ["javascript", "angular", "typescript", "ag-grid-angular"], "answers": [{"tags": [], "owner": {"reputation": 2275, "user_id": 1016302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iALTE.jpg?s=128&g=1", "display_name": "adrian", "link": "https://stackoverflow.com/users/1016302/adrian"}, "is_accepted": false, "score": 1, "last_activity_date": 1567172224, "creation_date": 1567172224, "answer_id": 57727819, "question_id": 57698987, "link": "https://stackoverflow.com/questions/57698987/how-to-make-a-custom-tooltip-component-for-ag-grid-using-material-tooltip/57727819#57727819", "title": "how to make a custom tooltip component for ag-grid using material tooltip", "body": "<p>In terms of the data issue, your StackBlitz is a bit of out sync with this question, but you need to ensure the properties on the data object have the same casing as the properties on the row data; if you change <code>fname</code> to <code>fName</code> and <code>lname</code> to <code>lName</code> in tool-tip.component.html then you should see the data come through correctly. </p>\n\n<p>Regarding the material tooltip, the designed usage is that you have an element (e.g. a <code>span</code>) with a <code>matTooltip</code> attribute, and then when you hover over that element you will see a tooltip rendered using the contents of the attribute. However, the way you're using it here is to try to render an element with a material tooltip attached inside the tooltip that ag-Grid is rendering, which is why you're seeing plain text. If you do wish to bypass ag-Grid's tooltip rendering and use the material tooltip instead, then you might have more luck with a <a href=\"https://www.ag-grid.com/javascript-grid-cell-rendering-components/\" rel=\"nofollow noreferrer\">custom cell renderer</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 11991004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2dff1123733747de77149294df04c7?s=128&d=identicon&r=PG&f=1", "display_name": "Matthewz", "link": "https://stackoverflow.com/users/11991004/matthewz"}, "is_accepted": true, "score": 3, "last_activity_date": 1567519374, "last_edit_date": 1567519374, "creation_date": 1567196619, "answer_id": 57732841, "question_id": 57698987, "link": "https://stackoverflow.com/questions/57698987/how-to-make-a-custom-tooltip-component-for-ag-grid-using-material-tooltip/57732841#57732841", "title": "how to make a custom tooltip component for ag-grid using material tooltip", "body": "<p>It's not perfect but I was able to get it to work while using the <code>cellRendererFramework</code> as mentioned by @adrian above. Here is a working example of my fix to be able to use a <code>[matTooltip]</code> with all of its features in an angular ag-grid custom component. Including line breaks being passed as a string array. Thanks for all the help!</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-ag-grid-tooltip-example-ywzxle\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-ag-grid-tooltip-example-ywzxle</a></p>\n"}], "owner": {"reputation": 71, "user_id": 11991004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2dff1123733747de77149294df04c7?s=128&d=identicon&r=PG&f=1", "display_name": "Matthewz", "link": "https://stackoverflow.com/users/11991004/matthewz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6065, "favorite_count": 0, "accepted_answer_id": 57732841, "answer_count": 2, "score": 4, "last_activity_date": 1567519374, "creation_date": 1567020826, "last_edit_date": 1567115013, "question_id": 57698987, "link": "https://stackoverflow.com/questions/57698987/how-to-make-a-custom-tooltip-component-for-ag-grid-using-material-tooltip", "title": "how to make a custom tooltip component for ag-grid using material tooltip", "body": "<p>The current angular ag-grid tooltip example is not working.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-ag-grid-tooltip-example-fb7nko\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-ag-grid-tooltip-example-fb7nko</a></p>\n\n<p>Javascript/typescript. Running Angular 8 and newest ag-grid release. I have tried to follow the plunker example to a T and have had no luck. I am now trying this. I have a component called CustomTooltipComponent that has a  dynamic mat-tooltip in the template that is taking in {{data}} from my .ts file. The tooltip doesnt show so i put in a span and it shows, but it shows in plain text. The created component has also been added to my entry and declaration modules.</p>\n\n<pre><code>&lt;&lt;&lt;----   component that wants the tooltip ---&gt;\n\nthis.gridOptions = {\n      deltaRowDataMode: true,\n      getRowNodeId: (data) =&gt; data.name,\n      onRowDoubleClicked: (data) =&gt; this.selectRow(data),\n      rowSelection: 'single',\n      defaultColDef: {\n        sortable: true,\n        resizable: true,\n        tooltipComponentFramework: CustomTooltipComponent,\n        tooltipValueGetter: (params: ITooltipParams) =&gt; params.data,\n      }\n    };```\n\n      this.columnDefs = [\n        {\n          headerName: 'Name',\n          field: 'name',\n          sort: 'asc',\n         // tooltipField: 'name'\n        }\n\n\n\n&lt;&lt;&lt;-------- tooltip component .ts -------&gt;&gt;&gt;\n\nimport { Component } from '@angular/core';\nimport { ITooltipAngularComp } from 'ag-grid-angular';\nimport { ITooltipParams } from 'ag-grid-community';\n\n@Component({\n  selector: 'app-custom-tooltip',\n  templateUrl: './custom-tooltip.component.html',\n  styleUrls: ['./custom-tooltip.component.scss'],\n})\nexport class CustomTooltipComponent implements ITooltipAngularComp {\n\n  public params: ITooltipParams;\n  public data: any;\n\n  constructor() { }\n\n  agInit(params: ITooltipParams): void {\n    this.data = params.api.getDisplayedRowAtIndex(params.rowIndex).data;\n  }\n\n}\n\n&lt;&lt;&lt;----------- tooltip component .html ----&gt;&gt;&gt;\n\n&lt;span matTooltip=\"{{data.name}}\"&gt;&lt;/span&gt;\n\n&lt;div&gt;\n&lt;p&gt;&lt;span&gt;Name: &lt;/span&gt;{{data.name}}&lt;/p&gt;\n&lt;p&gt;&lt;span&gt;Created by: &lt;/span&gt;{{data.createdBy}}&lt;/p&gt;\n&lt;p&gt;&lt;span&gt;Modified by: &lt;/span&gt;{{data.modifiedBy}}&lt;/p&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>expected a tooltip to display in mat-tooltip format\nexpected the toolTipParams: () to work with this approach</p>\n"}, {"tags": ["angular", "typescript", "angular-routing"], "comments": [{"owner": {"reputation": 15073, "user_id": 2279488, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/c41VI.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/2279488/reza"}, "edited": false, "score": 0, "creation_date": 1567020933, "post_id": 57698792, "comment_id": 101841921, "body": "Sorry I didn&#39;t see that"}, {"owner": {"reputation": 15073, "user_id": 2279488, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/c41VI.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/2279488/reza"}, "edited": false, "score": 1, "creation_date": 1567021970, "post_id": 57698792, "comment_id": 101842293, "body": "seems related to routes, I didn&#39;t figured it out yet, btw even if you put the whole path as <code>&#47;nest-a&#47;nest-1&#47;test-z</code> doesn&#39;t find the route"}, {"owner": {"reputation": 1255, "user_id": 3198951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sqpYw.jpg?s=128&g=1", "display_name": "Luca Regazzi", "link": "https://stackoverflow.com/users/3198951/luca-regazzi"}, "edited": false, "score": 1, "creation_date": 1567022972, "post_id": 57698792, "comment_id": 101842727, "body": "You can pass <code>{ enableTracing: true }</code> as a second parameter to the <code>.forRoot()</code> method to help you debug the problem. the router will print some useful info in the console."}, {"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "reply_to_user": {"reputation": 1255, "user_id": 3198951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sqpYw.jpg?s=128&g=1", "display_name": "Luca Regazzi", "link": "https://stackoverflow.com/users/3198951/luca-regazzi"}, "edited": false, "score": 0, "creation_date": 1567036973, "post_id": 57698792, "comment_id": 101846454, "body": "@LucaRegazzi  Thanks, I didn&#39;t know that existed.  However it is more like a trace than a debug.  It only logs useful information if the route was found, otherwise nothing is really logged.  :("}, {"owner": {"reputation": 1255, "user_id": 3198951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sqpYw.jpg?s=128&g=1", "display_name": "Luca Regazzi", "link": "https://stackoverflow.com/users/3198951/luca-regazzi"}, "edited": false, "score": 0, "creation_date": 1567060500, "post_id": 57698792, "comment_id": 101851360, "body": "i think i have some idea where the problem lies, but i&#39;m not able to solve it keeping all the redirects.. The angular router wants to fully consume the url while matching it against the rules. The problem is that the empty path matches all 3 redirect conditions (the one to redirect to nest-a the one to nest-1 and the one to test-z). all these redirects might confuse the router"}], "answers": [{"comments": [{"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1567095785, "post_id": 57706440, "comment_id": 101870576, "body": "SO many articles don&#39;t talk about <code>loadChildren</code> ... I&#39;m migrating a ton of my code, we&#39;ll see how it goes :)  Thank you so much."}, {"owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "edited": false, "score": 0, "creation_date": 1567101848, "post_id": 57706440, "comment_id": 101873121, "body": "Wow it looks so much better.  Thank you."}], "tags": [], "owner": {"reputation": 1255, "user_id": 3198951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sqpYw.jpg?s=128&g=1", "display_name": "Luca Regazzi", "link": "https://stackoverflow.com/users/3198951/luca-regazzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1567068581, "creation_date": 1567068581, "answer_id": 57706440, "question_id": 57698792, "link": "https://stackoverflow.com/questions/57698792/deep-nested-components-not-displaying/57706440#57706440", "title": "Deep nested components not displaying", "body": "<p>There are a couple of things that are wrong in your code and cause some trouble to the router resolution:</p>\n\n<ul>\n<li>Your paths are divided in different modules but in the routes definition you are telling the router to load direcly a component and not the entire sub-module (which contains the sub-module routes definitions)</li>\n<li>In your sub-module you need to have the first path as empty to load the module main component (in nest-1 module your empty path would load the nest-1 component. it's not the parent module that has the job to load the sub-module <em>entry</em> component)</li>\n<li>Your routes are set-up both in the router-module and in the main module (ex: both in the nest-a.module and nest-a.routing.module you have this line <code>RouterModule.forChild(nestARoutes),</code>). They must be defined only in one place (the routing module, and then import it the main module)</li>\n<li>The router is responsible of loading the sub-module (using the <code>loadChildren</code> property in the path definition) so you don't need to import the sub-module in your parent module (es: nest-a.module doesn't need to import nest-1.module</li>\n</ul>\n\n<p>Below you find your example modified as explained above. The main 2 things are:</p>\n\n<ul>\n<li>In your parent module route definition you need to use the <code>loadChildren</code> property to load the sub-module (and his route definition)</li>\n<li>In the sub-module you have the first path as empty and load the sub-module <em>entry</em> component (es: nest-1 module will load the nest-1 component)</li>\n</ul>\n\n<p><a href=\"https://stackblitz.com/edit/angular-cpidzy\" rel=\"nofollow noreferrer\">WORKING EXAMPLE</a></p>\n\n<p>Hope i was clear enough.</p>\n"}, {"tags": [], "owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "is_accepted": true, "score": 0, "last_activity_date": 1569628053, "last_edit_date": 1592644375, "creation_date": 1569628053, "answer_id": 58142290, "question_id": 57698792, "link": "https://stackoverflow.com/questions/57698792/deep-nested-components-not-displaying/58142290#58142290", "title": "Deep nested components not displaying", "body": "<p>After updating my code Luca Regazzi's Answer I started getting the following error messsage in production.</p>\n<blockquote>\n<p>Error: Uncaught (in promise): Error: Runtime compiler is not loaded</p>\n<p>Error: Runtime compiler is not loaded</p>\n</blockquote>\n<p>It appears that with AOT there is even another way to loadChildren Documented <a href=\"https://github.com/angular/angular-cli/issues/14763\" rel=\"nofollow noreferrer\">In this Bug Report on Angular/Angular-cli</a>.</p>\n<p>Instead of:</p>\n<pre><code>import { MyComponent } from './path/mycomponent.component';\n\n...\n\nloadChildren: () =&gt; MyComponent\n</code></pre>\n<p>it should be:</p>\n<pre><code>// no import\n\n...\n\nloadChildren: () =&gt; import('./path/mycomponent.component')\n  .then(m =&gt; m.MyComponent)\n</code></pre>\n"}], "owner": {"reputation": 48290, "user_id": 209259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bSPBw.jpg?s=128&g=1", "display_name": "Erik Philips", "link": "https://stackoverflow.com/users/209259/erik-philips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 1, "accepted_answer_id": 58142290, "answer_count": 2, "score": 2, "last_activity_date": 1569628053, "creation_date": 1567019799, "last_edit_date": 1567021020, "question_id": 57698792, "link": "https://stackoverflow.com/questions/57698792/deep-nested-components-not-displaying", "title": "Deep nested components not displaying", "body": "<p>I'm having trouble displaying the third nested component.</p>\n\n<p>Expected:</p>\n\n<blockquote>\n  <p>Hello App Component</p>\n  \n  <p>Hello Nest-A Component</p>\n  \n  <p>Hello Nest-1 Component</p>\n  \n  <p>Hello Test-Z Component</p>\n</blockquote>\n\n<p>Actual:</p>\n\n<blockquote>\n  <p>Hello App Component</p>\n  \n  <p>Hello Nest-A Component</p>\n  \n  <p>Hello Nest-1 Component</p>\n</blockquote>\n\n<p>Why is my Test-Z component not displaying?</p>\n\n<p>TLDR; <a href=\"https://stackblitz.com/edit/angular-kaugjn\" rel=\"nofollow noreferrer\">StackBlitz - Code Example</a></p>\n\n<p><strong>app.module.ts</strong></p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AppComponent } from './app.component';\nimport { NestAModule } from './nest-a/nest-a.module';\n\nconst rootRoutes: Routes = [\n  { path: '', redirectTo: 'nest-a', pathMatch: 'full' },\n  { path: 'nest-a', redirectTo: 'nest-a', pathMatch: 'full' },\n];\n\n@NgModule({\n  imports: [ \n    BrowserModule, \n    FormsModule,\n    RouterModule.forRoot(rootRoutes),\n    NestAModule,\n  ],\n  declarations: [ \n    AppComponent, \n  ],\n  bootstrap: [ \n    AppComponent \n  ]\n})\nexport class AppModule { }\n</code></pre>\n\n<p><strong>app.component.ts</strong></p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n  selector: 'my-app',\n  template: '&lt;h1&gt;Hello App Component&lt;/h1&gt;&lt;router-outlet&gt;&lt;/router-outlet&gt;',\n})\nexport class AppComponent {\n}\n</code></pre>\n\n<p><strong>nest-a/nest-a-routing-module.ts</strong></p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { NestAComponent } from './nest-a.component';\nimport { Nest1Component } from './nest-1/nest-1.component';\n\nexport const nestARoutes = [\n  {\n    title: 'Nest A',\n    path: 'nest-a',\n    component: NestAComponent,\n    children: [\n      { path: '', redirectTo: 'nest-1', pathMatch: 'full' },\n      { path: 'nest-1', component: Nest1Component },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(nestARoutes),\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class NestARoutingModule { }\n</code></pre>\n\n<p><strong>nest-a/nest-a.component.ts</strong></p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n    selector: 'my-nest-a',\n    template: `&lt;h1&gt;Hello Nest-A Component&lt;/h1&gt;&lt;router-outlet&gt;&lt;/router-outlet&gt;`\n})\nexport class NestAComponent {\n}\n</code></pre>\n\n<p><strong>nest-a/nest-a.module.ts</strong></p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { NestAComponent } from './nest-a.component';\nimport { NestARoutingModule, nestARoutes } from './nest-a-routing.module';\nimport { Nest1Module } from './nest-1/nest-1.module';\n\n\n@NgModule({\n  declarations: [\n    NestAComponent,\n  ],\n  imports: [\n    NestARoutingModule,\n    Nest1Module,\n    RouterModule.forChild(nestARoutes),\n  ],\n})\nexport class NestAModule { }\n</code></pre>\n\n<p><strong>nest-a/nest-1/nest-1-routing.module.ts</strong></p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { Nest1Component } from './nest-1.component';\nimport { TestYComponent } from './test-y/test-y.component'\nimport { TestZComponent } from './test-z/test-z.component'\n\nexport const nest1Routes = [\n  {\n    title: 'Nest 1',\n    path: 'nest-1',\n    component: Nest1Component,\n    children: [\n      { path: '', redirectTo: 'test-z', pathMatch: 'full'},\n      { path: 'test-y', component: TestYComponent},\n      { path: 'test-z', component: TestZComponent},\n    ]\n  },\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(nest1Routes),\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class Nest1RoutingModule { }\n</code></pre>\n\n<p><strong>nest-a/nest-1/nest-1.component.ts</strong></p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n    selector: 'my-nest-1',\n    template: `&lt;h1&gt;Hello Nest-1 Component&lt;/h1&gt;&lt;router-outlet&gt;&lt;/router-outlet&gt;`\n})\n\nexport class Nest1Component {\n}\n</code></pre>\n\n<p><strong>nest-a/nest-1/nest-1.module.ts</strong></p>\n\n<pre><code>import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { Nest1Component } from './nest-1.component';\nimport { Nest1RoutingModule, nest1Routes } from './nest-1-routing.module';\nimport { TestZModule } from './test-z/test-z.module'\n\n@NgModule({\n  declarations: [\n    Nest1Component,\n  ],\n  imports: [\n    Nest1RoutingModule,\n    TestZModule,\n    RouterModule.forChild(nest1Routes),\n  ],\n})\nexport class Nest1Module { }\n</code></pre>\n\n<p><strong>nest-a/nest-1/nest-<em>/nest-</em>.component.ts</strong></p>\n\n<p>(there is an Y and Z, the are no important differences)</p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n    selector: 'my-test-*',\n    template: `&lt;h1&gt;Hello Test-* Component&lt;/h1&gt;`\n})\n\nexport class Test*Component {\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "types"], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1567019422, "post_id": 57698689, "comment_id": 101841359, "body": "Interested parties can consult the TS standard library&#39;s type declaration for <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.5.3/lib/lib.dom.d.ts#L4440\" rel=\"nofollow noreferrer\"><code>Document.createElement()</code></a> which mentions the <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.5.3/lib/lib.dom.d.ts#L17922\" rel=\"nofollow noreferrer\"><code>HTMLElementTagNameMap</code> interface</a> containing the relevant <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.5.3/lib/lib.dom.d.ts#L18013\" rel=\"nofollow noreferrer\"><code>script</code>/<code>HTMLScriptElement</code> key-value pair</a>"}, {"owner": {"reputation": 4929, "user_id": 2050629, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f60dbf1e0b2f02120551724a3d4bcae1?s=128&d=identicon&r=PG", "display_name": "wiesson", "link": "https://stackoverflow.com/users/2050629/wiesson"}, "edited": false, "score": 1, "creation_date": 1567020205, "post_id": 57698689, "comment_id": 101841648, "body": "Typescript can also infer the type automatically, so it&#39;s not required to set <code>const foo: HTMLScriptElement = ...</code>"}], "tags": [], "owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "is_accepted": true, "score": 7, "last_activity_date": 1567019242, "creation_date": 1567019242, "answer_id": 57698689, "question_id": 57698613, "link": "https://stackoverflow.com/questions/57698613/typescript-errors-when-not-all-properties-of-htmlscriptelement-are-provided/57698689#57698689", "title": "Typescript errors when not all properties of HTMLScriptElement are provided", "body": "<p>Change <code>SCRIPT</code> to <code>script</code> and TypeScript will realize that <code>createElement()</code> returns an <code>HTMLScriptElement</code>.</p>\n"}], "owner": {"reputation": 11962, "user_id": 1252748, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9DbOP.gif?s=128&g=1", "display_name": "1252748", "link": "https://stackoverflow.com/users/1252748/1252748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 57698689, "answer_count": 1, "score": 0, "last_activity_date": 1567019242, "creation_date": 1567018931, "question_id": 57698613, "link": "https://stackoverflow.com/questions/57698613/typescript-errors-when-not-all-properties-of-htmlscriptelement-are-provided", "title": "Typescript errors when not all properties of HTMLScriptElement are provided", "body": "<p>I'm appending a script to the page in a typescript file.</p>\n\n<pre><code>function getScript() {\n  return new Promise((resolve, reject) =&gt; {\n    const script: HTMLScriptElement = document.createElement('SCRIPT');\n    document.body.appendChild(script);\n    script.onload = resolve;\n    script.onerror = reject;\n    script.async = true;\n    script.src = './scripts/my-script.js';\n  });\n}\n</code></pre>\n\n<p>Typescript gives me the following error, which I've had before on <code>img</code> tags, except the error indicated I was missing many, many more properties.</p>\n\n<blockquote>\n  <p><code>Type 'HTMLElement' is missing the following properties from type 'HTMLScriptElement': async, charset, crossOrigin, defer, and 8 more.ts(2740)</code></p>\n</blockquote>\n\n<p>I don't want to use/specify all of the properties available on the script element's interface: should I use something more generic (what?), or just omit the interface entirely? Or is there a way to use an interface so I get the intellisense helpers for autocomplete, warning me if a prop doesn't exist on the interface, but being silent when I don't use them all?</p>\n"}, {"tags": ["angular", "typescript", "typeerror", "nested-lists"], "comments": [{"owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1567018310, "post_id": 57698443, "comment_id": 101840891, "body": "Hi welcome to SO, Can you share your sample data!"}, {"owner": {"reputation": 1, "user_id": 11990778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ca2f590ebed4bea0439b978125ccff?s=128&d=identicon&r=PG&f=1", "display_name": "Anandhi ", "link": "https://stackoverflow.com/users/11990778/anandhi"}, "reply_to_user": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "edited": false, "score": 0, "creation_date": 1567059190, "post_id": 57698443, "comment_id": 101850812, "body": "Hi I tried a different solution and it worked. <code>this.tasklists[this.index] = [];</code> Did this on the tasklist creation everytime ,and then pushed the subtasks using the Index of the task it belongs to. <code>this.tasklists[ind].push(subtaskname);</code>"}], "owner": {"reputation": 1, "user_id": 11990778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ca2f590ebed4bea0439b978125ccff?s=128&d=identicon&r=PG&f=1", "display_name": "Anandhi ", "link": "https://stackoverflow.com/users/11990778/anandhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1567111608, "creation_date": 1567018102, "last_edit_date": 1567111608, "question_id": 57698443, "link": "https://stackoverflow.com/questions/57698443/im-trying-to-create-a-lists-of-lists-where-my-inner-list-is-getting-the-same-v", "title": "I&#39;m trying to create a lists of lists, where my inner list is getting the same value for every index &#39;i&#39;", "body": "<p>This is for tasks and sub tasks creation in Angular 8 and TypeScript. I have tried using <code>Object()</code>, and 2D array. It is showing me two different errors:</p>\n\n<ol>\n<li>Cannot read property 'push' of undefined</li>\n<li>Cannot set property '0' of undefined</li>\n</ol>\n\n<pre class=\"lang-js prettyprint-override\"><code>tasks = [];\nsub_tasks = [][];\n\ntask_to_sub_tasks(x) {\n    for (var i = 0; i &lt; this.tasks.length; i++) {\n        this.sub_tasks[i].push(this.tasks[i]);\n        var count = this.tasks[i].length;\n        for (var j = 0; j &lt; count; j++) {\n            this.sub_tasks[i][j] = x;\n        }\n    }\n}\n</code></pre>\n\n<p>I have created a separate lists for tasks. I'm passing the sub-tasks name one by one on a <em>button click</em> after getting the input value for sub-task. I couldn't access the 2D array for <code>j = 0</code>, instead it throws:</p>\n\n<pre><code>Cannot set property '0' of undefined\n</code></pre>\n\n<p>Expected output is:\n<code>sub_tasks[0][0]</code> should return the first sub-task created under <code>task[0]</code></p>\n"}, {"tags": ["typescript", "webpack", "babeljs"], "comments": [{"owner": {"reputation": 643, "user_id": 7389957, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FG7DGj1ia7s/AAAAAAAAAAI/AAAAAAAAArw/dqXW_DJKl4s/photo.jpg?sz=128", "display_name": "Daniel Varela", "link": "https://stackoverflow.com/users/7389957/daniel-varela"}, "edited": false, "score": 0, "creation_date": 1567019101, "post_id": 57698373, "comment_id": 101841203, "body": "You can run both <code>tsc</code> and <code>webpack-dev-server</code> concurrently using the <code>concurrent</code> npm module and add a script: <code>&quot;concurrently \\&quot;tsc --watch\\&quot; \\&quot;webpack-dev-server\\&quot;&quot;</code>. This should get around <code>tsc --watch</code> never exiting issue."}, {"owner": {"reputation": 763, "user_id": 3734818, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9fe2ce372ecf1f534e5a634d37d07e4?s=128&d=identicon&r=PG", "display_name": "mohsinulhaq", "link": "https://stackoverflow.com/users/3734818/mohsinulhaq"}, "reply_to_user": {"reputation": 643, "user_id": 7389957, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FG7DGj1ia7s/AAAAAAAAAAI/AAAAAAAAArw/dqXW_DJKl4s/photo.jpg?sz=128", "display_name": "Daniel Varela", "link": "https://stackoverflow.com/users/7389957/daniel-varela"}, "edited": false, "score": 0, "creation_date": 1567021480, "post_id": 57698373, "comment_id": 101842113, "body": "I already mentioned that I run them parallelly, but that makes them independent of each other"}], "owner": {"reputation": 763, "user_id": 3734818, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9fe2ce372ecf1f534e5a634d37d07e4?s=128&d=identicon&r=PG", "display_name": "mohsinulhaq", "link": "https://stackoverflow.com/users/3734818/mohsinulhaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567017770, "creation_date": 1567017770, "question_id": 57698373, "link": "https://stackoverflow.com/questions/57698373/how-to-get-awesome-typescript-loader-experience-with-babel", "title": "How to get awesome-typescript-loader experience with babel", "body": "<p>I have a webpack project using awesome-typescript-loader. I recently switched to @babel/preset-typescript, but it only does the compilation, but doesn't typecheck before that, halting it. I tried running <code>tsc --watch</code> and <code>webpack-dev-server</code> parallelly, but then they both become independent. I also tried <code>tsc --watch &amp;&amp; webpack-dev-server</code>, but since <code>tsc --watch</code> never exits, <code>webpack-dev-server</code> is never run.\nHow can I get the earlier experience of failing compilation on typecheck fail using babel and webpack?</p>\n"}, {"tags": ["mongodb", "typescript", "mongoose"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8835118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7967a3063d8fac04a54dcca955ca2e?s=128&d=identicon&r=PG&f=1", "display_name": "vmheadaches", "link": "https://stackoverflow.com/users/8835118/vmheadaches"}, "is_accepted": false, "score": 1, "last_activity_date": 1567101199, "last_edit_date": 1567101199, "creation_date": 1567028930, "answer_id": 57700454, "question_id": 57698371, "link": "https://stackoverflow.com/questions/57698371/missing-subdocument-methods-in-mongoose-with-typescript/57700454#57700454", "title": "Missing Subdocument Methods in Mongoose with Typescript", "body": "<p><strong>Gross:</strong>\nFor now, I'm going with a very quick and dirty polyfill solution that doesn't actually answer my question:</p>\n\n<pre><code>declare module \"mongoose\" {\n    namespace Types {\n        class Collection&lt;T&gt; extends mongoose.Types.Array&lt;T&gt; {\n            public id: (_id: string) =&gt; (T | null);\n        }\n    }\n}\n</code></pre>\n\n<p>then we declare <code>IParent</code> as such:</p>\n\n<pre><code>interface IParent {\n    name: string;\n    children: mongoose.Types.Collection&lt;IChild&gt;;\n}\n</code></pre>\n\n<p>Because the function <code>id()</code> already exists and typescript just doesn't know about it, the code works and the polyfill lets it compile.</p>\n\n<p><strong>Even Grosser:</strong> Otherwise for an even quicker and dirtier solution, when you create the parent model instance simply typecast it to <code>any</code> and throw out all typescript checks:</p>\n\n<pre><code>const child = new ChildModel({name: \"Lisa\", age: 7});\nconst parent: any = new ParentModel({name: \"Steve\", children: [child]});\nconst idRetrievedChild = parent.children.id(childId); // works because declared any\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 382, "user_id": 10494969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96981c95d8b36ab228e1587681ed4757?s=128&d=identicon&r=PG&f=1", "display_name": "T. Dayya", "link": "https://stackoverflow.com/users/10494969/t-dayya"}, "edited": false, "score": 2, "creation_date": 1603195339, "post_id": 63832238, "comment_id": 113953961, "body": "Almost, you just need to use Embedded instead of Document for IChild. This way you&#39;ll have access to Subdocument methods such as parent() and ownerDocument() in addition to the usual document methods."}, {"owner": {"reputation": 445, "user_id": 4717826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f029beec5b4aabaa10385395649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Davo", "link": "https://stackoverflow.com/users/4717826/davo"}, "edited": false, "score": 1, "creation_date": 1611543316, "post_id": 63832238, "comment_id": 116477267, "body": "cannot find <code>Embedded</code> in mongoose, is this removed ?"}, {"owner": {"reputation": 470, "user_id": 9842828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCSRm.jpg?s=128&g=1", "display_name": "jamomani", "link": "https://stackoverflow.com/users/9842828/jamomani"}, "edited": false, "score": 2, "creation_date": 1613662270, "post_id": 63832238, "comment_id": 117149963, "body": "<code>Embedded</code> is found in <code>Types.Embedded</code>"}], "tags": [], "owner": {"reputation": 481, "user_id": 7556011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fbb1e08caf743d4904f0ec1fad21b7?s=128&d=identicon&r=PG&f=1", "display_name": "Drei", "link": "https://stackoverflow.com/users/7556011/drei"}, "is_accepted": false, "score": 7, "last_activity_date": 1603217389, "last_edit_date": 1603217389, "creation_date": 1599749224, "answer_id": 63832238, "question_id": 57698371, "link": "https://stackoverflow.com/questions/57698371/missing-subdocument-methods-in-mongoose-with-typescript/63832238#63832238", "title": "Missing Subdocument Methods in Mongoose with Typescript", "body": "<p>Kind of a late response, but I looked through the typings and found the <code>DocumentArray</code></p>\n<pre><code>import { Document, Embedded, Types } from 'mongoose';\ninterface IChild extends Embedded {\n    name: string;\n}\n\ninterface IParent extends Document {\n    name: string;\n    children: Types.DocumentArray&lt;IChild&gt;;\n}\n</code></pre>\n<p>Just wanted to put this here incase anyone else needs it.</p>\n"}], "owner": {"reputation": 41, "user_id": 8835118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7967a3063d8fac04a54dcca955ca2e?s=128&d=identicon&r=PG&f=1", "display_name": "vmheadaches", "link": "https://stackoverflow.com/users/8835118/vmheadaches"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1529, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1603217389, "creation_date": 1567017769, "question_id": 57698371, "link": "https://stackoverflow.com/questions/57698371/missing-subdocument-methods-in-mongoose-with-typescript", "title": "Missing Subdocument Methods in Mongoose with Typescript", "body": "<p>I'm working on a project and need to retrieve specific subdocuments from a model by their subdocument <code>_id</code>'s. I then plan on making updates to those subdocuments and saving the main document. The mongoose subdocument documentation lists a number of methods you can call on the <code>parent.children</code> array, but methods that don't already exist in Javascript for arrays give an error saying they do not exist and it doesn't compile. I'm referencing this documentation: <a href=\"https://mongoosejs.com/docs/subdocs.html\" rel=\"nofollow noreferrer\">https://mongoosejs.com/docs/subdocs.html</a></p>\n\n<p>I understand that should be able to use <code>.findOneAndUpdate</code> to make my updates, and using the <code>runValidators</code> option everything should still be validated, but I would also like to just retrieve the subdocument itself as well.</p>\n\n<p>I looked at this post: <a href=\"https://stackoverflow.com/questions/21142524/mongodb-mongoose-how-to-find-subdocument-in-found-document\">MongoDB, Mongoose: How to find subdocument in found document?</a> , and I will comment that the answer is incorrect that if a subdocument schema is registered it automatically creates a collection for that schema, the collection is only made if that schema is saved separately. You cannot use <code>ChildModel.findOne()</code> and retrieve a subdocument, as the collection does not exist, there is nothing in it.</p>\n\n<p>Having <code>IChildModel</code> extend <code>mongoose.Types.Subdocument</code> and having the <code>IParent</code> interface reference that instead of <code>IChild</code> and not registering the <code>ChildModel</code> does not change anything other than no longer allowing calls to <code>.push()</code> to not accept simple objects (missing 30 or so properties). Also trying <code>mongoose.Types.Array&lt;IChild&gt;</code> in the <code>IParent</code> interface with this method does not change anything.</p>\n\n<p>Changing the <code>IParent</code> interface to use <code>mongoose.Types.Array&lt;IChild&gt;</code> for the <code>children</code> property allows <code>addToSet()</code> to work, but not <code>id()</code> or <code>create()</code></p>\n\n<p>I'm using Mongoose version <code>5.5.10</code>, MongoDb version <code>4.2.0</code> and Typescript version <code>3.4.5</code></p>\n\n<pre><code>import mongoose, { Document, Schema } from \"mongoose\";\n\n// Connect to mongoDB with mongoose\nmongoose.connect(process.env.MONGO_HOST + \"/\" + process.env.DB_NAME, {useNewUrlParser: true, useFindAndModify: false});\n\n// Interfaces to be used throughout application\ninterface IParent {\n    name: string;\n    children: IChild[];\n}\n\ninterface IChild {\n    name: string;\n    age: number;\n}\n\n// Model interfaces which extend Document\ninterface IParentModel extends IParent, Document { }\ninterface IChildModel extends IChild, Document { }\n\n// Define Schema\nconst Child: Schema = new Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    age: {\n        type: Number,\n        required: true\n    }\n});\n\nconst ChildSchema: Schema = Child;\n\nconst Parent: Schema = new Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    children: [ChildSchema]\n});\n\nconst ParentSchema: Schema = Parent;\n\n// Create the mongoose models\nconst ParentModel = mongoose.model&lt;IParentModel&gt;(\"Parent\", Parent);\nconst ChildModel = mongoose.model&lt;IChildModel&gt;(\"Child\", Child);\n\n// Instantiate instances of both models\nconst child = new ChildModel({name: \"Lisa\", age: 7});\nconst parent = new ParentModel({name: \"Steve\", children: [child]});\n\nconst childId = child._id;\n\n// Try to use mongoose subdocument methods\nconst idRetrievedChild = parent.children.id(childId); // Property 'id' does not exist on type 'IChild[]'.ts(2339)\nparent.children.addToSet({ name: \"Liesl\", age: 10 }); // Property 'addToSet' does not exist on type 'IChild[]'.ts(2339)\nparent.children.create({ name: \"Steve Jr\", age: 2 }); // Property 'create' does not exist on type 'IChild[]'.ts(2339)\n\n// If I always know the exact position in the array of what I'm looking for\nconst arrayRetrievedChild = parent.children[0]; // no editor errors\nparent.children.unshift(); // no editor errors\nparent.children.push({ name: \"Emily\", age: 18 }); // no editor errors\n</code></pre>\n"}, {"tags": ["typescript", "react-native", "react-navigation"], "answers": [{"tags": [], "owner": {"reputation": 304, "user_id": 4863526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X-kc3iWH3CQ/AAAAAAAAAAI/AAAAAAAAAJo/vj-ZKt852S8/photo.jpg?sz=128", "display_name": "Pedro Henrique", "link": "https://stackoverflow.com/users/4863526/pedro-henrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1567038988, "creation_date": 1567038988, "answer_id": 57701566, "question_id": 57698172, "link": "https://stackoverflow.com/questions/57698172/getparam-errors-about-argument-of-type-x-is-not-assignable-to-parameter-of-type/57701566#57701566", "title": "getParam errors about Argument of type X is not assignable to parameter of type &#39;&quot;navigation&quot; | &quot;screenProps&quot; | &quot;navigationOptions&quot;&#39;", "body": "<p>I think you're typing <code>venueId</code> incorrectly. Is it just a string? Just type it as <code>string</code> and I think you're good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 11619989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YXWr0p2vtmA/AAAAAAAAAAI/AAAAAAAAAAc/k_nNR-X9zuE/photo.jpg?sz=128", "display_name": "Emmanuel Martinez", "link": "https://stackoverflow.com/users/11619989/emmanuel-martinez"}, "is_accepted": false, "score": 1, "last_activity_date": 1576364577, "creation_date": 1576364577, "answer_id": 59339907, "question_id": 57698172, "link": "https://stackoverflow.com/questions/57698172/getparam-errors-about-argument-of-type-x-is-not-assignable-to-parameter-of-type/59339907#59339907", "title": "getParam errors about Argument of type X is not assignable to parameter of type &#39;&quot;navigation&quot; | &quot;screenProps&quot; | &quot;navigationOptions&quot;&#39;", "body": "<p>If you're using react-navigation v4 you'd want to type it as follows:</p>\n\n<pre><code>import { NavigationStackScreenComponent } from 'react-navigation-stack';\n\nconst VenueDetails: NavigationStackScreenComponent = ({ navigation }) =&gt; {\n    const venueId = navigation.getParam('id','NO-ID');\n\n    return(...)\n}\n</code></pre>\n\n<p>If you want to extend this to work with custom props you can type that as follows:</p>\n\n<pre><code>import { NavigationStackScreenComponent } from 'react-navigation-stack';\n\ntype Params = { venuId: string };\ntype ScreenProps = { myCoolProp: number };\n\nconst VenueDetails: NavigationStackScreenComponent&lt;Params, ScreenProps&gt; = ({ navigation, screenProps }) =&gt; {\n    const venueId = navigation.getParam('id','NO-ID');\n    const { myCoolProp } = screenProps\n\n    return(...)\n}\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 4524542, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5a4cbc185c63111fc1d1ce490786ef48?s=128&d=identicon&r=PG&f=1", "display_name": "gafemoyano", "link": "https://stackoverflow.com/users/4524542/gafemoyano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1576364577, "creation_date": 1567016757, "question_id": 57698172, "link": "https://stackoverflow.com/questions/57698172/getparam-errors-about-argument-of-type-x-is-not-assignable-to-parameter-of-type", "title": "getParam errors about Argument of type X is not assignable to parameter of type &#39;&quot;navigation&quot; | &quot;screenProps&quot; | &quot;navigationOptions&quot;&#39;", "body": "<p>I've been trying to get react-navigation to play nice with typescript, but I'm having a hard time with all the warnings.</p>\n\n<p>I tried looking into the types api but I can't really find what I'm supposed to do to make the warning go away.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const VenueDetails: NavigationScreenComponent&lt;NavigationScreenProps&gt; = ({\n  navigation\n}) =&gt; {\n  const venueId: NavigationScreenProp&lt;string&gt; = navigation.getParam(\n    'id',\n    'NO-ID'\n  )\nreturn(...)\n}\n</code></pre>\n\n<p>so getParam throws the following warning:</p>\n\n<p><code>Argument of type '\"id\"' is not assignable to parameter of type '\"navigation\" | \"screenProps\" | \"navigationOptions\"'.ts(2345)\n</code>\nAnd I have no idea what I'm doing wrong.</p>\n"}, {"tags": ["typescript", "typescript-compiler-api"], "comments": [{"owner": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 0, "creation_date": 1567023575, "post_id": 57697892, "comment_id": 101842953, "body": "Really weird... when I log the parent node in the console it has a <code>decorators</code> property showing one item, but when I call <code>.length</code> on the array or try to index into it, it will have zero items &amp; be undefined. Seems like a bug. As a workaround, you may have luck by setting the parent&#39;s <code>decorator</code> property to undefined."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 0, "creation_date": 1567023728, "post_id": 57697892, "comment_id": 101843006, "body": "@DavidSherret hey! Thanks. I did try that too, same result. I have no idea, really. I appreciate your interest btw"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 0, "creation_date": 1567076227, "post_id": 57697892, "comment_id": 101859403, "body": "@DavidSherret it was TS 3.5.3. Updating to 3.6.2 solved this! Also, I&#39;m using your TypeScript AST viewer, thank you very much ;)"}, {"owner": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 1, "creation_date": 1567079261, "post_id": 57697892, "comment_id": 101861074, "body": "nice! That was perfect timing :) Also, I\u2019m glad the site has been useful for you!"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 0, "creation_date": 1567086799, "post_id": 57697892, "comment_id": 101865669, "body": "@DavidSherret btw, do you happen to know if TSC will support transformers in a better way in future releases? Currently they cannot even be used via command line. I will ask on Gitter too."}, {"owner": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 1, "creation_date": 1567087484, "post_id": 57697892, "comment_id": 101866092, "body": "I hope so! It was mentioned in the <a href=\"https://github.com/Microsoft/TypeScript/issues/30281\" rel=\"nofollow noreferrer\">TS 3.4 iteration plan</a>, but I have yet to see it since."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 80876, "user_id": 188246, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bTzLq.jpg?s=128&g=1", "display_name": "David Sherret", "link": "https://stackoverflow.com/users/188246/david-sherret"}, "edited": false, "score": 1, "creation_date": 1567088095, "post_id": 57697892, "comment_id": 101866458, "body": "@DavidSherret thanks. I&#39;ve added a comment on the Roadmap <a href=\"https://github.com/microsoft/TypeScript/issues/33118\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/33118</a>"}], "owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567016636, "creation_date": 1567015496, "last_edit_date": 1567016636, "question_id": 57697892, "link": "https://stackoverflow.com/questions/57697892/typescript-transformer-decorator-isnt-completely-removed-from-ast", "title": "TypeScript Transformer - decorator isn&#39;t completely removed from AST", "body": "<p>I'm trying to remove a specific <em>Decorator</em> from the AST of certain source files.<br>\nI was able to lookup the Decorator <code>Node</code>s, however the emitted code still contains a call to the <code>__decorate([...])</code> function.</p>\n\n<p>Following is the Transformer, with its <code>Visitor</code>.</p>\n\n<pre><code>export default function() {\n  function createVisitor(\n    ctx: ts.TransformationContext,\n    sourceFile: ts.SourceFile\n  ): (node: ts.Node) =&gt; ts.VisitResult&lt;ts.Node&gt; {\n    const visitor: ts.Visitor = (node: ts.Node): ts.VisitResult&lt;any&gt; =&gt; {\n      if (ts.isDecorator(node)) {\n        if (node.getText(sourceFile) === '@Stateful') {\n          return undefined;\n        }\n      }\n\n      return ts.visitEachChild(node, visitor, ctx);\n    };\n\n    return visitor;\n  }\n\n  return (ctx: ts.TransformationContext) =&gt; (sourceFile: ts.SourceFile) =&gt;\n    sourceFile.fileName.endsWith('component.ts')\n      ? ts.visitNode(sourceFile, createVisitor(ctx, sourceFile))\n      : sourceFile;\n}\n</code></pre>\n\n<p>As you can see, I intercept <code>@Stateful</code> decorator <code>Node</code>s</p>\n\n<pre><code>if (ts.isDecorator(node)) {\n  if (node.getText(sourceFile) === '@Stateful') {\n    return undefined;\n  }\n}\n</code></pre>\n\n<p>And I remove that AST <code>Node</code> by returning <code>undefined</code>.<br>\nHowever the compiled code still uses the <code>__decorate</code> function, though with an empty array </p>\n\n<pre><code>var __decorate = (this &amp;&amp; this.__decorate) || function (decorators, target, key, desc) {\n    ...\n};\nimport { Stateful } from './test.decorator';\nexport class Example {\n    constructor() {\n        this.str = '';\n    }\n    getStr() {\n        return this.str;\n    }\n}\nExample = __decorate([], Example);\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["javascript", "typescript", "mapping", "typed-arrays"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 3, "creation_date": 1567015252, "post_id": 57697683, "comment_id": 101839777, "body": "Why not <code>const names = [...testMap.values()].map(display =&gt; display.displayName);</code>?"}, {"owner": {"reputation": 1981, "user_id": 3393520, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d38d36d0144bb8606b1a9f0bbb112d5c?s=128&d=identicon&r=PG", "display_name": "Methodician", "link": "https://stackoverflow.com/users/3393520/methodician"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567016109, "post_id": 57697683, "comment_id": 101840056, "body": "Yep that&#39;s it! I am actually using the key in my code too, but just after posting this I realized the answer."}], "answers": [{"tags": [], "owner": {"reputation": 1981, "user_id": 3393520, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d38d36d0144bb8606b1a9f0bbb112d5c?s=128&d=identicon&r=PG", "display_name": "Methodician", "link": "https://stackoverflow.com/users/3393520/methodician"}, "is_accepted": false, "score": 1, "last_activity_date": 1567016200, "creation_date": 1567016200, "answer_id": 57698052, "question_id": 57697683, "link": "https://stackoverflow.com/questions/57697683/avoid-typescript-never-when-iterating-one-of-several-strongly-typed-maps/57698052#57698052", "title": "Avoid TypeScript &quot;never&quot; when iterating one of several strongly typed Maps", "body": "<p>As it turns out I was just under-utilizing the power of Maps, treating them more like dictionaries. Here is better code that also avoids the error:</p>\n\n<pre><code>let isFirstPicked = false;\nconst testMap = !isFirstPicked ? MMeasurementType : MMeasurementSize;\nconst items = [...testMap.entries()].map(\n    ([key, value]) =&gt; `key: ${key}, name: ${value.displayName}`\n);\nconsole.log(items);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1981, "user_id": 3393520, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d38d36d0144bb8606b1a9f0bbb112d5c?s=128&d=identicon&r=PG", "display_name": "Methodician", "link": "https://stackoverflow.com/users/3393520/methodician"}, "edited": false, "score": 0, "creation_date": 1567141084, "post_id": 57698112, "comment_id": 101882403, "body": "That&#39;s pretty helpful, though I don&#39;t understand the inner workings of TS enough to get the (Union) and (intersection) references. So like if the yet types shared items ( a or b or c or d, and c or d or e or f) would never become c or d?  Link to docs?"}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "reply_to_user": {"reputation": 1981, "user_id": 3393520, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d38d36d0144bb8606b1a9f0bbb112d5c?s=128&d=identicon&r=PG", "display_name": "Methodician", "link": "https://stackoverflow.com/users/3393520/methodician"}, "edited": false, "score": 0, "creation_date": 1567167707, "post_id": 57698112, "comment_id": 101893349, "body": "@Methodician: added some explanations"}], "tags": [], "owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "is_accepted": false, "score": 3, "last_activity_date": 1567167642, "last_edit_date": 1567167642, "creation_date": 1567016528, "answer_id": 57698112, "question_id": 57697683, "link": "https://stackoverflow.com/questions/57697683/avoid-typescript-never-when-iterating-one-of-several-strongly-typed-maps/57698112#57698112", "title": "Avoid TypeScript &quot;never&quot; when iterating one of several strongly typed Maps", "body": "<p>To answer the \"why\" question, consider the following</p>\n\n<pre><code>interface Phone {\n    turnOn()\n    turnOff()\n    ring()\n}\n\ninterface Printer {\n    turnOn()\n    turnOff()\n    print()\n}\n</code></pre>\n\n<p>Let's add a new type, which is either a Phone or a Printer:</p>\n\n<pre><code>type Device = Phone | Printer\n</code></pre>\n\n<p>Mathematically, it's a Union of the set of phones and the set of printers. That's why it's called \"union type\". Now, given a Device object, what do we know for sure? Can it be turned on or off? Sure, because both the Phone and the Printer can do that. But can it print? The answer is generally no, because it might just happen to be a Phone, which can't. Can it ring? Similarly, the answer is no, because it can be a Printer. That is, the Device type only has methods that are common to Phone and Printer. That gives us the</p>\n\n<p><strong>fun fact #1</strong>: a <em>union</em> of compound types contains an <em>intersection</em> of their parts.</p>\n\n<p>Now consider:</p>\n\n<pre><code>type FaxMachine = Phone &amp; Printer\n</code></pre>\n\n<p>This is an \"intersection type\" and represents an object which is a Phone and a Printer at the same time. Can it be turned on/off? Sure. Can it <code>ring</code>? The answer is yes, because it <em>is</em> a Phone. Can it <code>print</code>? Again, yes, because it <em>is</em> a Printer. So,</p>\n\n<p><strong>fun fact #2</strong>: an <em>intersection</em> of compound types contains a <em>union</em> of their parts.</p>\n\n<p>Back to the Maps example,</p>\n\n<pre><code>type keyA = 'x' | 'y' | 'a'\ntype keyB = 'x' | 'y' | 'b'\n\ntype A = Map&lt;keyA, any&gt;\ntype B = Map&lt;keyB, any&gt;\n\ntype U = A | B\n</code></pre>\n\n<p>What is the type of the keys of <code>U</code>? According to the above, it's <code>keyA &amp; keyB</code>, that is, <code>'x' | 'y'</code>. If the maps have disjoint sets of keys, as in</p>\n\n<pre><code>type keyA = 'a1' | 'a2'\ntype keyB = 'b1' | 'b2'\n</code></pre>\n\n<p>then the type of the keys of <code>U</code> will be an empty set, or <code>never</code>.</p>\n\n<p>In your code, the type of </p>\n\n<pre><code>!isFirstPicked ? MMeasurementType : MMeasurementSize\n</code></pre>\n\n<p>is inferred as</p>\n\n<pre><code>Map&lt;TMeasurementSize, IDisplayName&gt; | Map&lt;TMeasurementType, IDisplayName&gt;\n</code></pre>\n\n<p>respectively, the keys  have type </p>\n\n<pre><code>TMeasurementSize &amp; TMeasurementType\n</code></pre>\n\n<p>which is <code>never</code> since there's no intersection. </p>\n\n<p>Docs: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types</a></p>\n"}], "owner": {"reputation": 1981, "user_id": 3393520, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d38d36d0144bb8606b1a9f0bbb112d5c?s=128&d=identicon&r=PG", "display_name": "Methodician", "link": "https://stackoverflow.com/users/3393520/methodician"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1567167642, "creation_date": 1567014680, "last_edit_date": 1567016372, "question_id": 57697683, "link": "https://stackoverflow.com/questions/57697683/avoid-typescript-never-when-iterating-one-of-several-strongly-typed-maps", "title": "Avoid TypeScript &quot;never&quot; when iterating one of several strongly typed Maps", "body": "<p>So you have a couple strongly typed Maps and you're building a UI that makes use of them by iterating, but you could be iterating over one or the other depending on another variable. TypeScript complains about the type \"never\" in an odd situation. (in fact TypeScript seems to have poor support for maps in general).</p>\n\n<p>Consider this simplified example: </p>\n\n<pre><code>let isFirstPicked = false;\nconst testMap = !isFirstPicked ? MMeasurementType : MMeasurementSize;\nconst items = [...testMap.keys()].map(\n    key =&gt;  key: ${key}, name: ${testMap.get(key).displayName}`\n);\nconsole.log(names);\n</code></pre>\n\n<p>This works just fine, but TypeScript complains about</p>\n\n<pre><code>testMap.get(key)\n</code></pre>\n\n<blockquote>\n  <p>Argument of type '\"T_SHIRT\" | \"DRESS\" | \"JACKET\" | \"PANTS\" | \"SHOES\" | \"XS\" | \"S\" | \"M\" | \"L\" | \"XL\" | \"XXL\"' is not assignable to parameter of type 'never'.\n    Type '\"T_SHIRT\"' is not assignable to type 'never'.ts(2345)</p>\n</blockquote>\n\n<p>I do not like using \"any\" but this makes the error go away: </p>\n\n<pre><code>(testMap as any).get(key)\n</code></pre>\n\n<p>Here are my typings:</p>\n\n<pre><code>export interface IDisplayName {\n    displayName: string;\n}\n\nexport type TMeasurementType =\n    | \"T_SHIRT\"\n    | \"DRESS\"\n    | \"JACKET\"\n    | \"PANTS\"\n    | \"SHOES\";\nexport const MMeasurementType = new Map&lt;TMeasurementType, IDisplayName&gt;([\n    [\"T_SHIRT\", { displayName: \"T-Shirts\" }],\n    [\"DRESS\", { displayName: \"Dresses\" }],\n    [\"JACKET\", { displayName: \"Jackets\" }],\n    [\"PANTS\", { displayName: \"Pants\" }],\n    [\"SHOES\", { displayName: \"Shoes\" }],\n]);\n\nexport type TMeasurementSize = \"XS\" | \"S\" | \"M\" | \"L\" | \"XL\" | \"XXL\";\nexport const MMeasurementSize = new Map&lt;TMeasurementSize, IDisplayName&gt;([\n    [\"XS\", { displayName: \"XS\" }],\n    [\"S\", { displayName: \"Small\" }],\n    [\"M\", { displayName: \"Medium\" }],\n    [\"L\", { displayName: \"Large\" }],\n    [\"XL\", { displayName: \"XL\" }],\n    [\"XXL\", { displayName: \"Double XL\" }],\n]);\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1567014624, "post_id": 57697579, "comment_id": 101839521, "body": "What is the type for <code>item</code>?"}, {"owner": {"reputation": 44, "user_id": 9493031, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6DEPopKY-5Q/AAAAAAAAAAI/AAAAAAAAAD8/CbOVYHlFSTA/photo.jpg?sz=128", "display_name": "Kendall Adkins", "link": "https://stackoverflow.com/users/9493031/kendall-adkins"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1567016426, "post_id": 57697579, "comment_id": 101840202, "body": "export interface IAudit {     retentionDays: number;     server: string;     selection: ISelection[]; }  export interface ISelection {     name: string;     displayName: string;     events: IEvent; }  export interface IEvent {     [name: string]: {         available: boolean;         enable: boolean;     }; }  Item is ISelection in this case... I&#39;ll add above"}], "owner": {"reputation": 44, "user_id": 9493031, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6DEPopKY-5Q/AAAAAAAAAAI/AAAAAAAAAD8/CbOVYHlFSTA/photo.jpg?sz=128", "display_name": "Kendall Adkins", "link": "https://stackoverflow.com/users/9493031/kendall-adkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567016534, "creation_date": 1567014177, "last_edit_date": 1567016534, "question_id": 57697579, "link": "https://stackoverflow.com/questions/57697579/typescript-identifier-x-is-not-defined-y-does-not-contain-such-a-member", "title": "Typescript: Identifier &#39;X&#39; is not defined. &#39;Y&#39; does not contain such a member", "body": "<p>My program still runs but I'm getting the error message so I want to fix this in case it causes a break somewhere else.</p>\n\n<p>I have created an interface which looks like this...</p>\n\n<pre><code>export interface IAudit {\n    retentionDays: number;\n    server: string;\n    selection: ISelection[];\n}\n\nexport interface ISelection {\n    name: string;\n    displayName: string;\n    events: IEvent;\n}\n\nexport interface IEvent {\n    [name: string]: {\n        available: boolean;\n        enable: boolean;\n    };\n}\n</code></pre>\n\n<p>example this will look like</p>\n\n<pre><code>'addition': { available: true, enable: false },\n'deletion': { available: true, enable: false }\n</code></pre>\n\n<p>I am using it here:</p>\n\n<pre><code>&lt;div *ngFor=\"let item of model.selection\"&gt;\n&lt;div class=\"col-xs-2 no-pl no-pr text-center\"&gt;\n{{ item.events.addition.available ?item.events.addition.enable : 'N/A' }}&lt;/div&gt;\n\n&lt;div class=\"col-xs-2 no-pl no-pr text-center\"&gt;\n{{ item.events.deletion.available ? item.events.deletion.enable : 'N/A' }}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>model.selection is ISelection[]</p>\n\n<p>addition and deletion is being flagged as not existing in the interface.</p>\n\n<p>Identifier 'addition' is not defined. 'Y' does not contain such a member</p>\n\n<p>Is name correct or should I be approaching this from a different angle?</p>\n"}, {"tags": ["javascript", "typescript", "visual-studio-code", "vscode-settings", "monorepo"], "answers": [{"tags": [], "owner": {"reputation": 2431, "user_id": 626911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae474dd4a074fd22e897c4c54770c05a?s=128&d=identicon&r=PG", "display_name": "Brady Holt", "link": "https://stackoverflow.com/users/626911/brady-holt"}, "is_accepted": true, "score": 8, "last_activity_date": 1567192830, "last_edit_date": 1567192830, "creation_date": 1567192484, "answer_id": 57732155, "question_id": 57697571, "link": "https://stackoverflow.com/questions/57697571/go-to-typescript-source-definition-instead-of-compiled-definition-in-visual-stud/57732155#57732155", "title": "Go to Typescript Source Definition instead of Compiled Definition in Visual Studio Code", "body": "<p>TypeScript 2.9 introduced a compilerOption called <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html\" rel=\"noreferrer\">declarationMap</a>.  Per the release notes:</p>\n\n<blockquote>\n  <p>Enabling --declarationMap alongside --declaration causes the compiler\n  to emit .d.ts.map files alongside the output .d.ts files. Language\n  Services can also now understand these map files, and uses them to map\n  declaration-file based definition locations to their original source,\n  when available.</p>\n  \n  <p>In other words, hitting go-to-definition on a declaration from a .d.ts\n  file generated with --declarationMap will take you to the source file\n  (.ts) location where that declaration was defined, and not to the\n  .d.ts.</p>\n</blockquote>\n\n<p>I <a href=\"https://github.com/flolude/stackoverflow-typescript-go-to-definition/pull/1\" rel=\"noreferrer\">submitted a PR</a> on your example repo to enable this setting.</p>\n"}], "owner": {"reputation": 1065, "user_id": 8586803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e8c652696320e48b44cd9610fe8860?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Ludewig", "link": "https://stackoverflow.com/users/8586803/florian-ludewig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "accepted_answer_id": 57732155, "answer_count": 1, "score": 10, "last_activity_date": 1567192830, "creation_date": 1567014151, "question_id": 57697571, "link": "https://stackoverflow.com/questions/57697571/go-to-typescript-source-definition-instead-of-compiled-definition-in-visual-stud", "title": "Go to Typescript Source Definition instead of Compiled Definition in Visual Studio Code", "body": "<p>I am working on a typescript project with Visual Studio Code including multiple npm packages structured like this:</p>\n\n<ul>\n<li>Source code: <code>/src/index.ts</code></li>\n<li>Compiled code: <code>/dist/...</code></li>\n</ul>\n\n<p>When I right click on imported objects and choose \"Go to Definition\" or click <code>F12</code> or by clicking on the object with holding down <code>CTRL</code>, Visual Studio Code opens the corresponding <code>.d.ts</code> file in <code>/dist</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/RrcUL.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RrcUL.jpg\" alt=\"vscode go to definition\"></a>\n<a href=\"https://i.stack.imgur.com/wx7B0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wx7B0.png\" alt=\"vscode open .d.ts\"></a></p>\n\n<p>However, I want VSCode to open the corresponding <code>.ts</code> file in <code>/src</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/FNy2Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FNy2Y.png\" alt=\".ts file\"></a></p>\n\n<p>Is it possible to change this behavior, as it is really annoying to manually search for the source file.</p>\n\n<p>I've created git repo, so that you can try it yourself:\n<a href=\"https://github.com/flolude/stackoverflow-typescript-go-to-definition\" rel=\"noreferrer\">https://github.com/flolude/stackoverflow-typescript-go-to-definition</a></p>\n\n<ul>\n<li>you just need to run <code>yarn bootstrap</code> in order to replicate the issue.</li>\n</ul>\n"}, {"tags": ["angular", "typescript", "function"], "answers": [{"tags": [], "owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "is_accepted": true, "score": 1, "last_activity_date": 1567014541, "creation_date": 1567014541, "answer_id": 57697666, "question_id": 57697569, "link": "https://stackoverflow.com/questions/57697569/export-a-function-that-returns-a-function/57697666#57697666", "title": "Export a function that returns a function", "body": "<pre><code>export var generateValidCharacterGenerator : (validCharacters: string) =&gt; (control: FormControl)=&gt; any = (validCharacters: string) =&gt; {\n    const result = (control: FormControl): any =&gt; {\n    };\n    return result;\n}\n</code></pre>\n\n<p>I would recommend you use arrow functions instead of <code>function</code> as it preserves <code>this</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": false, "score": 1, "last_activity_date": 1567015271, "creation_date": 1567015271, "answer_id": 57697834, "question_id": 57697569, "link": "https://stackoverflow.com/questions/57697569/export-a-function-that-returns-a-function/57697834#57697834", "title": "Export a function that returns a function", "body": "<p>You don't use the word <code>function</code> to declare a function as a type in TypeScript.</p>\n\n<p>For example;</p>\n\n<pre><code>// this is a function\nfunction foo(): number {\n   return 4;\n}\n\n// this is a type\ntype foo = () =&gt; number;\n</code></pre>\n\n<p>The arrow function is both a function and a type.</p>\n\n<p>For example;</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// this is a function\nconst foo = () =&gt; 4;\n</code></pre>\n\n<p>Arrow functions are a feature of JavaScript.</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions</a></p>\n\n<p>Arrow types are a feature of TypeScript.</p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/functions.html\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/functions.html</a></p>\n\n<p>When you write arrows as a type they do not have a function body. The parameters yield a return type, for example: <code>(a: boolean) =&gt; number</code> takes a boolean and returns a number. When the arrow is a function it has a body and a return type, for example: <code>(a: boolean): number =&gt; 4;</code></p>\n\n<p>It depends <em>where</em> you use them.</p>\n"}], "owner": {"reputation": 11068, "user_id": 967330, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=128&d=identicon&r=PG", "display_name": "Thom", "link": "https://stackoverflow.com/users/967330/thom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 57697666, "answer_count": 2, "score": 1, "last_activity_date": 1567015271, "creation_date": 1567014148, "last_edit_date": 1567014466, "question_id": 57697569, "link": "https://stackoverflow.com/questions/57697569/export-a-function-that-returns-a-function", "title": "Export a function that returns a function", "body": "<p>Still new to Angular...</p>\n\n<p>After researching the documentation and searching the web, I can't seem to figure out how to export a function that returns a function. Trying something like:</p>\n\n<pre><code>export function generateValidCharacterGenerator(validCharacters: string): function(control: FormControl): any {\n    const result = function (control: FormControl): any {\n\n    };\n\n    return result;\n}\n</code></pre>\n\n<p>(I tried this from reading: <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/functions.html</a>)</p>\n\n<p>But gets syntax errors on everything I try. You can do this, right?</p>\n"}, {"tags": ["reactjs", "typescript", "asp.net-core", "asp.net-core-mvc"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "edited": false, "score": 0, "creation_date": 1617203126, "post_id": 57717156, "comment_id": 118239753, "body": "Warning: this is now old UseWebpackDevMiddleware is deprecated and this is way more complicated than necessary at this point."}], "tags": [], "owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "is_accepted": true, "score": 4, "last_activity_date": 1567109433, "creation_date": 1567109433, "answer_id": 57717156, "question_id": 57697563, "link": "https://stackoverflow.com/questions/57697563/how-to-add-react-with-typescript-to-existing-asp-net-core-mvc-application/57717156#57717156", "title": "How to add react with typescript to existing asp.net core mvc application", "body": "<p>You basically need to use webpack and modify your .csproj to do a yarn build before running to transpile your typescript and connect all of the dependencies into a bundle. </p>\n\n<p>Start by adding Nuget packages: <strong>Yarn.MSBuild</strong> and <strong>Microsoft.TypeScript.MSBuild</strong> to your project.</p>\n\n<p><strong>tsconfig.json:</strong> (put in root dir of your project)</p>\n\n<pre><code>{\n  \"typeAcquisition\": {\n    \"enable\": true\n  },\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"sourceMap\": true,\n    \"module\": \"commonjs\",\n    \"target\": \"es6\",\n    \"noImplicitAny\": false,\n    \"jsx\": \"react\",\n    \"outDir\": \"wwwroot/dist\",\n    \"moduleResolution\": \"node\"\n  },\n  \"exclude\": [\n    \"node_modules\",\n    \"wwwroot\"\n  ]\n}\n</code></pre>\n\n<p>^^Note that this will make it so that your .tsx files transpile into folder: wwwroot/dist, change outDir if you want it somewhere else</p>\n\n<p><strong>package.json</strong> (put in root dir of your project)</p>\n\n<pre><code>{\n  \"scripts\": {\n    \"webpack\": \"webpack\"\n  },\n  \"devDependencies\": {\n    \"@types/react\": \"^16.4.6\",\n    \"@types/react-dom\": \"^16.0.6\",\n    \"@types/webpack-env\": \"^1.13.6\",\n    \"aspnet-webpack\": \"^3.0.0\",\n    \"awesome-typescript-loader\": \"^5.2.0\",\n    \"babel-core\": \"^6.26.3\",\n    \"bootstrap\": \"4.3.1\",\n    \"clean-webpack-plugin\": \"^0.1.19\",\n    \"typescript\": \"^2.9.2\",\n    \"webpack\": \"^4.15.1\",\n    \"webpack-cli\": \"^3.0.8\",\n    \"webpack-dev-middleware\": \"^3.1.3\",\n    \"webpack-hot-middleware\": \"^2.22.2\"\n  },\n  \"dependencies\": {\n    \"react\": \"^16.4.1\",\n    \"react-dom\": \"^16.4.1\",\n    \"react-hot-loader\": \"^4.0.0\"\n  }\n}\n</code></pre>\n\n<p>^^add whatever npm dependencies you need in your package.json (obviously) as well as your typescript @type dependencies. These are just the minimum viable packages for react and hot reloading.</p>\n\n<p><strong>Webpack.targets</strong> (put in root dir of your project)</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Project&gt;\n\n  &lt;Target Name=\"EnsureNodeModulesInstalled\"\n          BeforeTargets=\"Build\"\n          Inputs=\"yarn.lock;package.json\"\n          Outputs=\"node_modules/.yarn-integrity\"&gt;\n\n    &lt;Yarn Command=\"install\" /&gt;\n  &lt;/Target&gt;\n\n  &lt;Target Name=\"PublishWebpack\"\n          BeforeTargets=\"Publish\"&gt;\n\n    &lt;ConvertToAbsolutePath Paths=\"$(PublishDir)\"&gt;\n      &lt;Output TaskParameter=\"AbsolutePaths\" PropertyName=\"AbsPublishDir\" /&gt;\n    &lt;/ConvertToAbsolutePath&gt;\n\n    &lt;Yarn Command=\"run webpack --env.prod --env.publishDir=$(AbsPublishDir)\" /&gt;\n  &lt;/Target&gt;\n\n&lt;/Project&gt;\n</code></pre>\n\n<p>^^this file <code>Webpack.target</code> is to be added to your .csproj file (I added it at the end) and should be added like so:\n<strong>In your .csproj:</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Import Project=\"Webpack.targets\" /&gt;\n</code></pre>\n\n<p><strong>webpack.config.js:</strong> (put in root dir of your project)</p>\n\n<pre><code>const path = require('path');\nconst CheckerPlugin = require('awesome-typescript-loader').CheckerPlugin;\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\n\nmodule.exports = (env) =&gt; {\n    const isDevBuild = !(env &amp;&amp; env.prod);\n\n    const outputDir = (env &amp;&amp; env.publishDir)\n        ? env.publishDir\n        : __dirname;\n\n    return [{\n        mode: isDevBuild ? 'development' : 'production',\n\n        devtool: 'inline-source-map',\n\n        stats: { modules: false },\n\n        entry: {\n            'App': './ClientApp/App.tsx',\n        },\n\n        watchOptions: {\n            ignored: /node_modules/\n        },\n\n        output: {\n            filename: \"dist/[name].js\",\n            path: path.join(outputDir, 'wwwroot'),\n            publicPath: '/'\n        },\n\n        resolve: {\n            // Add '.ts' and '.tsx' as resolvable extensions.\n            extensions: [\".ts\", \".tsx\", \".js\", \".json\"]\n        },\n\n        devServer: {\n            hot: true\n        },\n\n        module: {\n            rules: [\n                // All files with a '.ts' or '.tsx' extension will be handled by 'awesome-typescript-loader'.\n                {\n                    test: /\\.tsx?$/,\n                    include: /ClientApp/,\n                    loader: [\n                        {\n                            loader: 'awesome-typescript-loader',\n                            options: {\n                                useCache: true,\n                                useBabel: true,\n                                babelOptions: {\n                                    babelrc: false,\n                                    plugins: ['react-hot-loader/babel'],\n                                }\n                            }\n                        }\n                    ]\n                }\n            ]\n        },\n        plugins: [\n            new CleanWebpackPlugin(path.join(outputDir, 'wwwroot', 'dist')),\n            new CheckerPlugin()\n        ]\n    }];\n};\n</code></pre>\n\n<p>^^Note the entry point and modules->rules->include. That means webpack is being configured to look in a folder called ClientApp (in the root dir of your project) for the .tsx files to be transpiled. If you want your .tsx files elsewhere simply change these up. The entry point also specifies that the file entry point is App.tsx, put your highest level react component (that depends on all of your other components) into here or simply include it in this file.</p>\n\n<p>Now add <strong>WebpackDevMiddleware</strong> to your Startup->Configure function:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions\n{\n    HotModuleReplacement = true\n});\n</code></pre>\n\n<p>Now if in your App.tsx file you select a div (say one with id: 'root') and render your component in it, all you need to do to add your React component to your .cshtml file is include the transpiled App.js (in wwwroot/dist) to the .cshtml along with a div with id: 'root' and bam. You have react components that can be added to .cshtml without using any SPA bs \ud83d\ude80</p>\n\n<p>Credit:\n<a href=\"https://natemcmaster.com/blog/2018/07/05/aspnetcore-hmr/\" rel=\"nofollow noreferrer\">https://natemcmaster.com/blog/2018/07/05/aspnetcore-hmr/</a></p>\n"}], "owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1742, "favorite_count": 0, "accepted_answer_id": 57717156, "answer_count": 1, "score": 3, "last_activity_date": 1567109433, "creation_date": 1567014098, "question_id": 57697563, "link": "https://stackoverflow.com/questions/57697563/how-to-add-react-with-typescript-to-existing-asp-net-core-mvc-application", "title": "How to add react with typescript to existing asp.net core mvc application", "body": "<p>I am trying to add react components (typescript) in the form of .tsx files to be rendered on some of my asp.net core mvc .cshtml pages but cannot seem to get things working properly. Is there a good way to do this?</p>\n"}, {"tags": ["c#", "typescript", "swagger", "angular-cli", "angular8"], "comments": [{"owner": {"reputation": 32699, "user_id": 202694, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/982e5d5973bcd2be7b77e52ec7dca27c?s=128&d=identicon&r=PG", "display_name": "Pace", "link": "https://stackoverflow.com/users/202694/pace"}, "edited": false, "score": 2, "creation_date": 1567014113, "post_id": 57697310, "comment_id": 101839302, "body": "You are saying <code>this.file = event.target.files[0];</code> but then you are sending <code>this.uploadForm.get(&#39;profile&#39;).setValue(file);</code>.  Should you be saying <code>setValue(this.file)</code> instead?"}, {"owner": {"reputation": 247, "user_id": 3119737, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c7f7260b77694c10b5412221c63610c6?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Schneider", "link": "https://stackoverflow.com/users/3119737/adam-schneider"}, "reply_to_user": {"reputation": 32699, "user_id": 202694, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/982e5d5973bcd2be7b77e52ec7dca27c?s=128&d=identicon&r=PG", "display_name": "Pace", "link": "https://stackoverflow.com/users/202694/pace"}, "edited": false, "score": 0, "creation_date": 1567015041, "post_id": 57697310, "comment_id": 101839695, "body": "Pace, I can&#39;t seem to find the kiss button on Stackoverflow, I am gonna make a feature request."}], "owner": {"reputation": 247, "user_id": 3119737, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c7f7260b77694c10b5412221c63610c6?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Schneider", "link": "https://stackoverflow.com/users/3119737/adam-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567015795, "creation_date": 1567012923, "last_edit_date": 1567015795, "question_id": 57697310, "link": "https://stackoverflow.com/questions/57697310/read-the-contents-of-a-posted-file-from-angular-to-c", "title": "Read the contents of a Posted File from Angular to C#", "body": "<p>I am trying to upload a PDF using Angular 8. I am successfully getting the file the user selects on the front end. I am passing something off to the back-end but when I am attempt to read the file from the memory stream, during my test in converting it to a string I get \"[object FileList]\" instead of the contents of the file. </p>\n\n<p>Is this something with swagger I am not familiar with?</p>\n\n<p>Below is my HTML for the selection of the file.</p>\n\n<pre><code>    &lt;div&gt;\n        &lt;form [formGroup] = \"uploadForm\" (ngSubmit)=\"onSubmit()\"&gt;      \n      &lt;div&gt;\n        &lt;!-- TODO: rename profile --&gt;\n        &lt;input type=\"file\" name=\"profile\" (change)=\"onFileSelect($event)\" \n    accept=\".pdf\"/&gt;\n      &lt;/div&gt;\n      &lt;div&gt;\n        &lt;button type=\"submit\"&gt;Upload&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/form&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Below is my TypeScript: ALL HAIL PACE FOR NOTICING I FORGOT this.file</p>\n\n<pre><code>    import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\n\n@Component({\n  selector: 'app-pdf',\n  templateUrl: './pdf.component.html',\n  styleUrls: ['./pdf.component.css']\n})\nexport class PDFComponent implements OnInit {\n\n  SERVER_URL = \"http://localhost:64528/api/uploadPDF\";\n  uploadForm: FormGroup; \n  file;\n\n  constructor(private formBuilder: FormBuilder, private httpClient: HttpClient) { }\n\n  ngOnInit() {\n    this.uploadForm = this.formBuilder.group({\n      profile:['']\n    });\n  }\n\n  onFileSelect(event){\n    var file = event.target.files;\n    if(file.length &gt; 0){\n       this.file = event.target.files[0];\n      // ERROR WAS HERE! thank you PACE, all hail PACE!\n      this.uploadForm.get('profile').setValue(this.file);\n\n      var confirm = this.uploadForm.get('profile').value;\n    }\n  }\n\n  onSubmit(){\n    const formData = new FormData();\n    formData.append('file', this.uploadForm.get('profile').value);\n\n    this.httpClient.post&lt;any&gt;(this.SERVER_URL, formData).subscribe(\n      (res) =&gt; console.log(res),\n      (err) =&gt; console.log(err)\n    );\n  }\n\n}\n</code></pre>\n\n<p>and Below is my C#</p>\n\n<pre><code>using HeadcountTrackingAPI.Repositories;\nusing HeadcountTrackingAPI.Utilities;\nusing Swashbuckle.Swagger.Annotations;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Net;\nusing System.Net.Http;\nusing System.Threading.Tasks;\nusing System.Web;\nusing System.Web.Http;\n\nnamespace HeadcountTrackingAPI.Controllers\n{\n    public class PDFController : ApiController\n    {\n        // GET api/&lt;controller&gt;\n        [SwaggerOperation(\"uploadPDF\")]\n        [HttpPost]\n        [Route(\"api/uploadPDF\")]\n        public async Task&lt;IHttpActionResult&gt; UploadFile()\n        {\n            try\n            {\n                if (!Request.Content.IsMimeMultipartContent(\"form-data\"))\n                    throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);\n\n                // Initialize the memorty stream provider\n                MultipartMemoryStreamProvider memoryStream = new MultipartMemoryStreamProvider();\n\n                // Assign it's contents\n                memoryStream = await Request.Content.ReadAsMultipartAsync();\n\n                // Read the contents asynchronosly \n                using (System.IO.Stream pdfStream = await memoryStream.Contents.First().ReadAsStreamAsync())\n                {\n\n                    byte[] bytes = new byte[pdfStream.Length];\n\n                    // streamBytes to the byte array starting a position 0 and ending at the end of the file\n                    pdfStream.Read(bytes, 0, (int)pdfStream.Length);\n\n                    var byteString = BitConverter.ToString(bytes);\n                    string utfString = System.Text.Encoding.UTF8.GetString(bytes, 0, bytes.Length);\n                }\n\n                    return Ok(new { Posted = true });\n            }\n            catch (Exception ex)\n            {\n                ex.LogException();\n                return InternalServerError(ex);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Below is the resources I have accessed:\n<a href=\"https://www.c-sharpcorner.com/article/how-to-convert-a-byte-array-to-a-string/\" rel=\"nofollow noreferrer\">https://www.c-sharpcorner.com/article/how-to-convert-a-byte-array-to-a-string/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/8624071/save-and-load-memorystream-to-from-a-file\">Save and load MemoryStream to/from a file</a></p>\n\n<p>any and all help is appreciated, thank you.</p>\n"}, {"tags": ["angular", "typescript", "ionic-framework"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6210499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ff365b8d67f56e842d23913d0bbcdb?s=128&d=identicon&r=PG", "display_name": "Efra&#237;n", "link": "https://stackoverflow.com/users/6210499/efra%c3%adn"}, "is_accepted": true, "score": 1, "last_activity_date": 1574192685, "creation_date": 1574192685, "answer_id": 58941776, "question_id": 57697116, "link": "https://stackoverflow.com/questions/57697116/validate-duplicated-data-before-add-to-local-storage-in-ionic-framework-3/58941776#58941776", "title": "validate duplicated data before add to local storage in ionic framework 3+", "body": "<p>// SERVICE FUNCTION ADDITEM</p>\n\n<pre><code>addItem(ITEMS_KEY, item: any): Promise&lt;any&gt; {\n    return this.storage.get(ITEMS_KEY).then((items: any[]) =&gt; {\n        const newItems: GlucoseMeasurement[] = [];\n        if (items) {\n            for (const i of items) {\n                if (i.date === item.date) {\n                    // manage\n                    return 'Ya existe';\n                } else {\n                    newItems.push(i);\n                }\n            }\n            return this.storage.set(ITEMS_KEY, newItems);\n        } else {\n            return this.storage.set(ITEMS_KEY, [item]);\n       }\n  });\n}\n</code></pre>\n\n<p>// Validate if item in storage exists with the same date value</p>\n"}], "owner": {"reputation": 79, "user_id": 6080153, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248656378482151/picture?type=large", "display_name": "Jordan Quiroz", "link": "https://stackoverflow.com/users/6080153/jordan-quiroz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58941776, "answer_count": 1, "score": 0, "last_activity_date": 1574192685, "creation_date": 1567012009, "question_id": 57697116, "link": "https://stackoverflow.com/questions/57697116/validate-duplicated-data-before-add-to-local-storage-in-ionic-framework-3", "title": "validate duplicated data before add to local storage in ionic framework 3+", "body": "<p>hope you are doing well, today i need your help to solve a little problem, i have a app where i get data from a bluetooth device and store it in local storage (for now), im using the timestamp of the device data as primary key, so, i want to validate this primary key with the items who already are stored in the localstorage before add a new one to evade add duplicated data, because now the app only get the data from the device and store it without validate if the value already exist.</p>\n\n<p>this is my current code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>// INTERFACE\r\n\r\nglucometerData: GlucoseMeasurement = {\r\n   id: ''\r\n    glucoseValue: '',\r\n   date: ''\r\n};\r\n// THE FUNCTION IN MY PAGE.TS\r\nsaveData(glucometerData) {\r\n   this.functionUtil.addItem('glucometer', glucometerData).then(item =&gt; {\r\n     this.loadItems();\r\n     this.ui.showToast('Saved ' + item.length + ' items.');\r\n    });\r\n\r\n }\r\n \r\n // SERVICE FUNCTION ADDITEM\r\n  addItem(ITEMS_KEY, item: any): Promise&lt;any&gt; {\r\n    return this.storage.get(ITEMS_KEY).then((items: any[]) =&gt; {\r\n      if (items) {\r\n        items.push(item);\r\n        return this.storage.set(ITEMS_KEY, items);\r\n      } else {\r\n        return this.storage.set(ITEMS_KEY, [item]);\r\n      }\r\n    });\r\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>any help is welcome.</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 1668280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/999ab9088e832cca32faec96f37b9998?s=128&d=identicon&r=PG", "display_name": "Vitaly", "link": "https://stackoverflow.com/users/1668280/vitaly"}, "edited": false, "score": 0, "creation_date": 1567015744, "post_id": 57697058, "comment_id": 101839931, "body": "Thank you. So, in run time it will be equivalent code as in my samples. why then not to allow it to compile... most probably i stick to <code>any</code> type for now, too much boilerplate with <code>unknown</code> type IMO :-)"}, {"owner": {"reputation": 1818, "user_id": 5801753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXtbq.jpg?s=128&g=1", "display_name": "Johnny Zabala", "link": "https://stackoverflow.com/users/5801753/johnny-zabala"}, "reply_to_user": {"reputation": 570, "user_id": 1668280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/999ab9088e832cca32faec96f37b9998?s=128&d=identicon&r=PG", "display_name": "Vitaly", "link": "https://stackoverflow.com/users/1668280/vitaly"}, "edited": false, "score": 1, "creation_date": 1567018610, "post_id": 57697058, "comment_id": 101840999, "body": "You are right. At runtime it will be pretty much the same. But I would still prefer the Typescript (boilerplate) way. The reason is that outside the <code>if</code> you are secure. You can&#39;t call <code>data.blab</code> or <code>data.foo</code> or even <code>data.arrayProp</code> again. By forcing you to add the boilerplate Typescript is forcing you to be very thoughtful about the way you will be accessing that <code>unknown</code>."}, {"owner": {"reputation": 570, "user_id": 1668280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/999ab9088e832cca32faec96f37b9998?s=128&d=identicon&r=PG", "display_name": "Vitaly", "link": "https://stackoverflow.com/users/1668280/vitaly"}, "edited": false, "score": 0, "creation_date": 1567019959, "post_id": 57697058, "comment_id": 101841558, "body": "I&#39;d love to use <code>unknown</code>. Boilerplate is not the most problematic thing about it. The thing is i don&#39;t get why not to allow to compile my second sample? i did all the checks which are necessary for code inside <code>if</code> block. And outside of <code>if</code> block you&#39;re still safe. I.e. i see no value in this boilerplate..."}], "tags": [], "owner": {"reputation": 1818, "user_id": 5801753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dXtbq.jpg?s=128&g=1", "display_name": "Johnny Zabala", "link": "https://stackoverflow.com/users/5801753/johnny-zabala"}, "is_accepted": true, "score": 3, "last_activity_date": 1567012213, "last_edit_date": 1567012213, "creation_date": 1567011705, "answer_id": 57697058, "question_id": 57696665, "link": "https://stackoverflow.com/questions/57696665/typescript-check-if-method-property-exists-in-the-variable-of-unknown-type/57697058#57697058", "title": "Typescript. Check if method/property exists in the variable of unknown type", "body": "<p>The thing with <code>unknown</code> is that you have to narrow its type before you can use it. You can use a custom type guard for this:</p>\n\n<pre><code>interface ArrayProp {\n  arrayProp: []\n}\nfunction isArrayProps(value: unknown): value is ArrayProp {\n  return !!value &amp;&amp; !!(value as ArrayProp).arrayProp;\n}\n\nfunction handle(data: unknown) {\n   if (isArrayProps(data) &amp;&amp; typeof data.arrayProp[Symbol.iterator] === 'function') {\n   }\n}\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgIJSnAngBSgewAdkBvAKGWTg2zyIC5kBtAXTIF8yYBXEBMYPhDJgAZ3SZcBQqIAUANzgAbbhEa8A1iHwB3EAEpGilSjFoaUoqQrIoEMNyjCAhM+OrkAMk-JXC5R5wouaSdIT6AHTUodIA3BxkXLz8gsIAFnAgACZKELJZcGBw6iBaugbWlCIwyLJiErTScgVF+l4+YFiEEPg1LXBRFmFMAMpYALYARvhKEcCQmGD4UCzIALwbyADkPHwCQltt5FWc7EA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 570, "user_id": 1668280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/999ab9088e832cca32faec96f37b9998?s=128&d=identicon&r=PG", "display_name": "Vitaly", "link": "https://stackoverflow.com/users/1668280/vitaly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "accepted_answer_id": 57697058, "answer_count": 1, "score": 3, "last_activity_date": 1567012213, "creation_date": 1567009841, "last_edit_date": 1567011599, "question_id": 57696665, "link": "https://stackoverflow.com/questions/57696665/typescript-check-if-method-property-exists-in-the-variable-of-unknown-type", "title": "Typescript. Check if method/property exists in the variable of unknown type", "body": "<p>TS v3.x brought new type: <code>unknown</code>. But it's not very clear how to easily use this type instead of <code>any</code>.\nExample: you're using some 3rd party library which has no types. And you don't have time to write those types yourself. You need to handle some data provided by that library.</p>\n\n<p>Before <code>unknown</code>:</p>\n\n<pre><code>function handle(data: any) {\n   if (data &amp;&amp; data.arrayProp &amp;&amp; typeof data.arrayProp[Symbol.iterator] === 'function') {\n       for (let x of data.arrayProp) {...}\n   }\n}\n</code></pre>\n\n<p>With <code>unknown</code>:</p>\n\n<pre><code>function handle(data: unknown) {\n   // this line gives TS error: `data` is unknown type\n   if (data &amp;&amp; data.arrayProp &amp;&amp; typeof data.arrayProp[Symbol.iterator]=== 'function') {  \n...\n</code></pre>\n\n<p>Most docs in internet are using kind of <code>instanceof</code> ways to check what type <code>data</code> has. But i'm not really interested what type <code>data</code> has. Everything i want to know is if there's <code>arrayProp</code> there. that's it</p>\n\n<p>How to do this with <code>unknown</code> type?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11990152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46400ab82fa5da34437e3bc251114bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Vultimitavin", "link": "https://stackoverflow.com/users/11990152/vultimitavin"}, "edited": false, "score": 0, "creation_date": 1567019410, "post_id": 57696782, "comment_id": 101841350, "body": "Thanks for your Input. I want to avoid defining a class. Could I use a generic Array? How would that look like?  If it orders it by Key, why would &#39;dropDownDivider&#39; be in last place? What is it order by when not alphebatically?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 25, "user_id": 11990152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46400ab82fa5da34437e3bc251114bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Vultimitavin", "link": "https://stackoverflow.com/users/11990152/vultimitavin"}, "edited": false, "score": 0, "creation_date": 1567020186, "post_id": 57696782, "comment_id": 101841642, "body": "It&#39;s ordered lexicographically. In lexicographic ordre (i.e. the numeric order of the Unicode characters), uppercase ASCII letters come before lowercase ASCII letters. Why would you need to define a class? You can pass an array of arrays (as you&#39;re doing now to construct your map), or better, an array of objects. These objects can implement an interface, to make your code type-safe and readable."}, {"owner": {"reputation": 25, "user_id": 11990152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46400ab82fa5da34437e3bc251114bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Vultimitavin", "link": "https://stackoverflow.com/users/11990152/vultimitavin"}, "edited": false, "score": 1, "creation_date": 1567023134, "post_id": 57696782, "comment_id": 101842793, "body": "It works now perfectly fine, thanks for taking the time to help out a newbie. I use <code>@Input() listItems: [{name: string, url: string}];</code> with: <code>listitems = [       {name: &#39;Alle&#39;, url: &#39;#&#39;},       {name: &#39;dropDownDivider&#39;, url: &#39;#&#39;},       {name: &#39;Einstellungen&#39;, url: &#39;#&#39;}     ];</code>"}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 1, "last_activity_date": 1567010474, "creation_date": 1567010474, "answer_id": 57696782, "question_id": 57696610, "link": "https://stackoverflow.com/questions/57696610/angular-ngswitch-delivers-unexpected-result/57696782#57696782", "title": "Angular ngswitch delivers unexpected result", "body": "<p>The <a href=\"https://angular.io/api/common/KeyValuePipe\" rel=\"nofollow noreferrer\">KeyValue pipe</a> orders the entries by key.</p>\n\n<p>If you want to pass an ordered list of items, don't use a Map and the KeyValue pipe. Just pass an array of items. </p>\n"}], "owner": {"reputation": 25, "user_id": 11990152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46400ab82fa5da34437e3bc251114bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Vultimitavin", "link": "https://stackoverflow.com/users/11990152/vultimitavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57696782, "answer_count": 1, "score": 0, "last_activity_date": 1567010474, "creation_date": 1567009580, "question_id": 57696610, "link": "https://stackoverflow.com/questions/57696610/angular-ngswitch-delivers-unexpected-result", "title": "Angular ngswitch delivers unexpected result", "body": "<p>this is my very first question at stackoverflow. Usually I get by pretty good by just reading other questions.</p>\n\n<p>I am getting to know Angular at the moment, and I wonder why the ngSwitch directive is giving me results I wouldnt expect.</p>\n\n<p>I created a component for my angular app that returns a ngx-bootstrap dropdown which I plan to use in different views. I dont know if this makes any architectural sense, but thats not the point here. If you have time, I certainly appreciate a comment to the architectural approach.</p>\n\n<p>Now I hand over a <code>Map&lt;string, string&gt;</code> to my Dropdown component where key is what I want to show as an item in the Dropdown and value is the url I want to navigate to. This actually works nicely.</p>\n\n<p>The ngx-bootstrap DropDown lets you put a divider in your Dropdown to seperate certain Dropdown items. To specify where a divider should appear, I thought I could simply hand over a key-value just like <code>['dropDownDivider', '']</code> and use ngSwitch to get the divider into my Dropdown HTML-Markup.</p>\n\n<p>This actually works, the only thing is, the divider is always the last item in the Dropdown, no matter in which order I hand over the Map Collection.</p>\n\n<p>This is what I hand over to my Dropdown component:</p>\n\n<pre><code>listitems = new Map([\n  ['Alle', '#'],\n  ['Detailseite', '#'],\n  ['dropDownDivider', ''],\n  ['Entfernen', '#'],\n  ['Einstellungen', '#']\n])\n</code></pre>\n\n<p>My @Input decorator <code>@Input() listItems: Map&lt;string, string&gt;;</code></p>\n\n<p>This is the list part of the Dropdown component view (I use angulars keyvalue pipe):</p>\n\n<pre><code>&lt;!-- DropDown List --&gt;\n&lt;ng-container *ngFor=\"let listItem of listItems | keyvalue\"&gt;\n    &lt;ng-container [ngSwitch]=\"listItem.key\"&gt;\n        &lt;li *ngSwitchCase=\"'dropDownDivider'\" class=\"divider dropdown-divider\"&gt;&lt;/li&gt;\n        &lt;li *ngSwitchDefault&gt;\n            &lt;a class=\"dropdown-item\" href=\"{{listItem.value}}\"&gt;{{listItem.key}}&lt;/a&gt;\n        &lt;/li&gt;\n     &lt;/ng-container&gt;\n &lt;/ng-container&gt;\n</code></pre>\n\n<p>I would expect that there is a divider in my dropdown list between 'Detailseite' and 'Entfernen'. The divider is always in the last Position, no matter in which position I put it in the Map collection.</p>\n\n<p>Can someone explain this behaviour to me? If I log my Map to the console,  its values are still in the order I put them initially.</p>\n"}, {"tags": ["typescript"], "owner": {"reputation": 543, "user_id": 9834967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215744379859940/picture?type=large", "display_name": "Leandro", "link": "https://stackoverflow.com/users/9834967/leandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1567008899, "creation_date": 1567008429, "last_edit_date": 1567008899, "question_id": 57696364, "link": "https://stackoverflow.com/questions/57696364/duplicate-identifier-file", "title": "Duplicate identifier &#39;File&#39;", "body": "<p>I have checked every previous answer and I was not able to find a solution.</p>\n\n<p>I have a monorepo using Lerna. I one of the projects I created a class named <code>File</code>. The following error is being thrown:</p>\n\n<pre><code> error TS2300: Duplicate identifier 'File'.\n\n1 abstract class File {\n                 ~~~~\n\n  node_modules/typescript/lib/lib.dom.d.ts:5263:11\n    5263 interface File extends Blob {\n                   ~~~~\n    'File' was also declared here.\n  node_modules/typescript/lib/lib.dom.d.ts:5268:13\n    5268 declare var File: {\n                     ~~~~\n    and here.\n\n</code></pre>\n\n<p>root tsconfig.json</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"declaration\": true,\n    \"noImplicitAny\": false,\n    \"removeComments\": true,\n    \"noLib\": false,\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"target\": \"es6\",\n    \"sourceMap\": true,\n    \"lib\": [\"es6\", \"dom\"],\n    \"skipLibCheck\": true\n  },\n  \"exclude\": [\"node_modules/**\"]\n}\n\n</code></pre>\n\n<p>project tsconfig.json</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"outDir\": \"./lib\",\n    \"module\": \"commonjs\",\n    \"declaration\": true,\n    \"noImplicitAny\": false,\n    \"removeComments\": true,\n    \"noLib\": false,\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"target\": \"es6\",\n    \"sourceMap\": true,\n    \"lib\": [\"es6\", \"dom\"],\n    \"skipLibCheck\": true,\n    \"skipDefaultLibCheck\": true\n  },\n  \"include\": [\"./src\"],\n  \"exclude\": [\"node_modules/**\", \"**/*.spec.ts\", \"**/*.test.ts\"]\n}\n\n</code></pre>\n\n<p>I have already tried:</p>\n\n<ul>\n<li><p>Adding the <code>skipLibCheck</code> setting set to true.</p></li>\n<li><p>Removing <code>typescript</code> from my dependencies and using the global \ndependency.</p></li>\n<li><p>Using the flags <code>--skipLibCheck</code> and <code>--skipDefaultLibCheck</code> which of course where redundant.</p></li>\n</ul>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567009220, "post_id": 57696211, "comment_id": 101837306, "body": "Looks like you want a union type like <code>type ValueGetter&lt;T&gt; = {[K in keyof T]: {property: K; getValueFunction: (value: T[K]) =&gt; T[K]}}[keyof T]</code>, but I don&#39;t understand why <code>getValueFunction()</code> should take the property and return it untouched.  What&#39;s the use case for that?  I could understand something like <code>(value: T) =&gt; T[K]</code>, which takes a <code>T</code> and returns the property value corresponding to the <code>property</code> key...  What am I missing?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2032936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f962716ad52a759eb7dd425ade6990?s=128&d=identicon&r=PG", "display_name": "Domini Vesely", "link": "https://stackoverflow.com/users/2032936/domini-vesely"}, "is_accepted": false, "score": 1, "last_activity_date": 1567009739, "creation_date": 1567009739, "answer_id": 57696646, "question_id": 57696211, "link": "https://stackoverflow.com/questions/57696211/auto-type-recognizing-in-interface/57696646#57696646", "title": "Auto type recognizing in interface", "body": "<p>You could resolve this by adding the desired property key as a type argument to your <code>ValueGetter</code> interface.</p>\n\n<p>So something like:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface ValueGetter&lt;T, K extends keyof T&gt; {\n    property: K;\n    getValueFunction: (value: T[K]) =&gt; T[K];\n}\n\nconst valueGetter: ValueGetter&lt;Person, 'age'&gt; = {\n    property: 'age', // here you can only enter 'age' now, nothing else\n    getValueFunction: \u2026 Expected type: (value: number) =&gt; number\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2171, "user_id": 10706046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f1EJuD_WTVs/AAAAAAAAAAI/AAAAAAAAAHA/DoBrKXxPHzY/photo.jpg?sz=128", "display_name": "Artur Tagisow", "link": "https://stackoverflow.com/users/10706046/artur-tagisow"}, "is_accepted": false, "score": 0, "last_activity_date": 1567010810, "creation_date": 1567010810, "answer_id": 57696863, "question_id": 57696211, "link": "https://stackoverflow.com/questions/57696211/auto-type-recognizing-in-interface/57696863#57696863", "title": "Auto type recognizing in interface", "body": "<pre class=\"lang-js prettyprint-override\"><code>interface ValueGetter&lt;T,K extends keyof T&gt; {\n    property: K,\n    getValueFunction: () =&gt; T[K];\n}\n\ninterface Person {\n    age: number;\n    name: string;\n}\n\nconst person : Person = {\n    age: 25,\n    name: \"John\"\n}\n\nconst ageGetter : ValueGetter&lt;Person, 'age'&gt; = {\n    property: 'age',\n    getValueFunction: () =&gt; person[ageGetter.property]\n} \n\n\n</code></pre>\n\n<p>This is as close I could come to what you needed. It's redundant with the propety declaration but it works. If you don't use <code>K</code>, TS will default to printing all propety types (so <code>number | string</code> in this case)</p>\n"}], "owner": {"reputation": 919, "user_id": 4746190, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yRxyn.png?s=128&g=1", "display_name": "Marin Takanov", "link": "https://stackoverflow.com/users/4746190/marin-takanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567010810, "creation_date": 1567007816, "question_id": 57696211, "link": "https://stackoverflow.com/questions/57696211/auto-type-recognizing-in-interface", "title": "Auto type recognizing in interface", "body": "<p>I have an interface similar to this:</p>\n\n<pre><code>interface ValueGetter&lt;T&gt; {\n    property: keyof T;\n    getValueFunction: (value: any) =&gt; value;\n}\n</code></pre>\n\n<p>I want to be able to provide a custom <code>getValueFunction</code> to access some property of <code>T</code>, I\u2019m having trouble with defining the right type and substituting the <code>any</code>.</p>\n\n<p>Given the following interface I need is:</p>\n\n<pre><code>interface Person {\n    name: string;\n    age: number;\n}\n\nconst valueGetter: ValueGetter&lt;Person&gt; = {\n    property: 'name',\n    getValueFunction: \u2026 \n    // I want here the type checker to recognize that the\n    // correct type of this function should be: (value: string) =&gt; string, because \n    // the property 'property' is 'name' and the type of Person['name'] is string.\n}\n</code></pre>\n\n<p>If I want to access the other property <code>age</code>:</p>\n\n<pre><code>const valueGetter: ValueGetter&lt;Person&gt; = {\n    property: 'age',\n    getValueFunction: \u2026 Expected type: (value: number) =&gt; number\n}\n</code></pre>\n"}, {"tags": ["typescript", "promise", "async-await", "union-types"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1567038069, "post_id": 57695992, "comment_id": 101846640, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/198616/discussion-on-question-by-d-patrick-in-typescript-why-cant-an-async-function\">moved to chat</a>."}, {"owner": {"reputation": 40169, "user_id": 457268, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/404bbb83c4aecfce65c2c882dc0cd94e?s=128&d=identicon&r=PG", "display_name": "k0pernikus", "link": "https://stackoverflow.com/users/457268/k0pernikus"}, "edited": false, "score": 0, "creation_date": 1567092615, "post_id": 57695992, "comment_id": 101869072, "body": "Related: <a href=\"https://stackoverflow.com/questions/35302431/async-await-implicitly-returns-promise\" title=\"async await implicitly returns promise\">stackoverflow.com/questions/35302431/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1567126943, "post_id": 57696017, "comment_id": 101880188, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/198693/discussion-on-answer-by-k0pernikus-in-typescript-why-cant-an-async-function-re\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 40169, "user_id": 457268, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/404bbb83c4aecfce65c2c882dc0cd94e?s=128&d=identicon&r=PG", "display_name": "k0pernikus", "link": "https://stackoverflow.com/users/457268/k0pernikus"}, "is_accepted": false, "score": 3, "last_activity_date": 1567092255, "last_edit_date": 1567092255, "creation_date": 1567007075, "answer_id": 57696017, "question_id": 57695992, "link": "https://stackoverflow.com/questions/57695992/in-typescript-why-cant-an-async-function-return-a-union-of-type-t-promiset/57696017#57696017", "title": "In TypeScript, why can&#39;t an async function return a union of type T | Promise&lt;T&gt;?", "body": "<p>The <code>async</code> notation is syntactic sugar for:</p>\n\n<p><strong>This function will always return a promise</strong>.</p>\n\n<p>Even if you declare it as such:</p>\n\n<pre><code>const foo = async() =&gt; 3;\n</code></pre>\n\n<p>It's basically the same (though more strict) as:</p>\n\n<pre><code>const foo = () =&gt; new Promise(resolve =&gt; resolve(3));\n</code></pre>\n\n<p>or as:</p>\n\n<pre><code>const foo = () =&gt; Promise.resolve(3);\n</code></pre>\n\n<p>All of these examples will return a Promise.</p>\n\n<p>The main difference is, that \"normal\" functions can return both a Promise and other types, yet once <code>async</code> is used it, it <em>always</em> will return a promise.</p>\n\n<p>Even if a promise resolves immediately, there is <em>no way</em> for an <code>async</code> function <em>to NOT return a promise</em> by design.</p>\n\n<p>You'll have to await it / use then on it.</p>\n\n<p>This is also stated on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" rel=\"nofollow noreferrer\">mozilla's JavaScript reference about the async keyword</a>:</p>\n\n<blockquote>\n  <p>The async function declaration defines an asynchronous function, which\n  returns an AsyncFunction object. An asynchronous function is a\n  function which operates asynchronously via the event loop, using an\n  implicit Promise to return its result. But the syntax and structure of\n  your code using async functions is much more like using standard\n  synchronous functions.</p>\n</blockquote>\n\n<p>And specifically on the return type:</p>\n\n<blockquote>\n  <p>A Promise which will be resolved with the value returned by the async\n  function, or rejected with an uncaught exception thrown from within\n  the async function.</p>\n</blockquote>\n\n<hr>\n\n<p>With that in mind, I recommend making your API <code>async</code> per default. It doesn't matter to the outside world if some of your actions are synchronous. You can resolve the promise right away in that case. There is no need for your <code>type StringyThingy = string | Promise&lt;string&gt;;</code> </p>\n\n<p>Type against <code>Promise&lt;string&gt;</code> and let async handle the wrapping into promise for you or actually return other promises in the real async use-case. That way you don't have to check for instance of promise, but you'll handle both the async / sync branch the same way.</p>\n\n<hr>\n\n<p>If you really want the union type (I really don't recommend this), then you have to give up the usage of the <code>async</code> keyword.</p>\n\n<p>You can define normal functions that return either type:</p>\n\n<pre><code>const foo = (x:number): Promise&lt;number&gt;|number =&gt; {\n    if(x &gt;=0) {\n         return new Promise(resolve =&gt; resolve(x));\n    } else {\n         return x;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2555, "user_id": 103075, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/8d9db74f1bd8be46264b0fe72825725b?s=128&d=identicon&r=PG", "display_name": "D. Patrick", "link": "https://stackoverflow.com/users/103075/d-patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1058, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1567092255, "creation_date": 1567006950, "last_edit_date": 1567007968, "question_id": 57695992, "link": "https://stackoverflow.com/questions/57695992/in-typescript-why-cant-an-async-function-return-a-union-of-type-t-promiset", "title": "In TypeScript, why can&#39;t an async function return a union of type T | Promise&lt;T&gt;?", "body": "<p>I'm building an API in typescript and some controller actions can be synchronous while others can't.  I'd like to specify a response type like so:</p>\n\n<pre><code>type ActionResult =IHttpActionResult | Promise&lt;IHttpActionResult&gt;;\n</code></pre>\n\n<p>Then, as I'm building actions, when they become promise based, I can just prepend async and be done with it.</p>\n\n<p>But, typescript complains that \"the return type of an async function or method must be the global Promise type.\"</p>\n\n<p>Why can't an async function return a union of <code>T | Promise&lt;T&gt;</code>?</p>\n\n<p>Here's an example:</p>\n\n<pre><code>type StringPromise = Promise&lt;string&gt;;\n\n// These two work as you'd expect\nasync function getHello(): Promise&lt;string&gt; {\n    return 'hello';\n}\n\nasync function getGoodbye(): StringPromise {\n    return 'goodbye';\n}\n\ntype StringyThingy = string | Promise&lt;string&gt;;\n\n// the next two work as you would expect them to\nfunction getHoorah(): StringyThingy {\n    return 'hoorah!';\n}\n\nfunction getWahoo(): StringyThingy {\n  return new Promise(resolve =&gt; resolve('wahoo'));\n}\n\n// This one results in the error:\n// \"the return type of an async function or method must be the global Promise type.\"\nasync function getSadface(): StringyThingy {\n  return ':(';\n}    \n</code></pre>\n\n<p>Here are some sample outputs for the code above:</p>\n\n<pre><code>getHello().then(console.log);\ngetGoodbye().then(console.log);\nconsole.log(getHoorah());\n\n// The library I'm using is probably using typeguards for this\n// I'd imagine\nconst wahoo = getWahoo();\nif (typeof(wahoo) === 'string') {\n  console.log(wahoo);\n} else {\n  wahoo.then(console.log);\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "visual-studio-code", "vscode-extensions", "vscode-debugger"], "comments": [{"owner": {"reputation": 184, "user_id": 3545256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OxEyP.jpg?s=128&g=1", "display_name": "marvhen", "link": "https://stackoverflow.com/users/3545256/marvhen"}, "edited": false, "score": 0, "creation_date": 1571049708, "post_id": 57695794, "comment_id": 103099118, "body": "I too am confounded by this!  I was somehow able to get it to run once but can&#39;t reproduce it!"}, {"owner": {"reputation": 39, "user_id": 6420341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4713ac24c377f30cb8c1695ba33831?s=128&d=identicon&r=PG&f=1", "display_name": "Tobi", "link": "https://stackoverflow.com/users/6420341/tobi"}, "reply_to_user": {"reputation": 184, "user_id": 3545256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OxEyP.jpg?s=128&g=1", "display_name": "marvhen", "link": "https://stackoverflow.com/users/3545256/marvhen"}, "edited": false, "score": 0, "creation_date": 1571137833, "post_id": 57695794, "comment_id": 103132456, "body": "It depends on the way you run the tests which classes are called. Look below for how to do it if you want them to be called"}], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 3545256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OxEyP.jpg?s=128&g=1", "display_name": "marvhen", "link": "https://stackoverflow.com/users/3545256/marvhen"}, "is_accepted": true, "score": 1, "last_activity_date": 1571053035, "creation_date": 1571053035, "answer_id": 58375949, "question_id": 57695794, "link": "https://stackoverflow.com/questions/57695794/runtest-ts-class-in-vscode-test-setup-gets-never-used-even-in-example-project-w/58375949#58375949", "title": "runTest.ts class in vscode-test setup gets never used even in example project, what is it&#39;s use?", "body": "<p>Instead of launching a debug session from the vscode debug viewlet, you have to start the test task from the Terminal > Run Task menu item.  In package.json these scripts are in the <a href=\"https://code.visualstudio.com/api/get-started/your-first-extension\" rel=\"nofollow noreferrer\">yeoman generated test extension</a> and the last one runs runTest.js.</p>\n\n<pre><code>    \"scripts\": {\n        \"vscode:prepublish\": \"npm run compile\",\n        \"compile\": \"tsc -p ./\",\n        \"watch\": \"tsc -watch -p ./\",\n        \"pretest\": \"npm run compile\",\n        \"test\": \"node ./out/test/runTest.js\"\n    },\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6420341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4713ac24c377f30cb8c1695ba33831?s=128&d=identicon&r=PG&f=1", "display_name": "Tobi", "link": "https://stackoverflow.com/users/6420341/tobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 58375949, "answer_count": 1, "score": 1, "last_activity_date": 1571053035, "creation_date": 1567006188, "last_edit_date": 1567107955, "question_id": 57695794, "link": "https://stackoverflow.com/questions/57695794/runtest-ts-class-in-vscode-test-setup-gets-never-used-even-in-example-project-w", "title": "runTest.ts class in vscode-test setup gets never used even in example project, what is it&#39;s use?", "body": "<p>I am new to Typescript, JavaScript and VScode Extensions</p>\n\n<p>I have a vscode-test setup as outlined here:</p>\n\n<p><a href=\"https://code.visualstudio.com/api/working-with-extensions/testing-extension#custom-setup-with-vscodetest\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/api/working-with-extensions/testing-extension#custom-setup-with-vscodetest</a></p>\n\n<p>Modeled after the <code>helloworld-test-sample</code> from here:</p>\n\n<p><a href=\"https://github.com/microsoft/vscode-extension-samples/tree/master/helloworld-test-sample\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-extension-samples/tree/master/helloworld-test-sample</a> </p>\n\n<p>I want to download a vscode instance in the <code>runTest.ts</code> class <code>main</code> method and then install my extension on it. But by debugging I have found that the <code>runTest.ts</code> class is <em>never</em> called. The <code>index.ts</code> class <em>is</em>, the <code>extension.test.ts</code> class <em>is</em>, the tests run, but the <code>runTest.ts</code> class never is, which hinders me greatly, because I want to do what is shown in the first link.</p>\n\n<p>This is also the case in the original example project, so I assume it is meant that way. But what is the purpose of the <code>runTest.ts</code> class then? </p>\n\n<p>My goal is to actually install my extension in a test and see if it gets installed correctly and activated, but this fails because <code>downloadAndUnzipVSCode</code> fails when <code>await</code> is used and <code>resolveCliPathFromVSCodeExecutablePath</code> can only be used with a <code>Promise&lt;String&gt;</code>. So I am trying it like in the version shown in the first link. </p>\n\n<p>Can someone maybe explain why the <code>runTest.ts</code> main method seems to be never called, and maybe how to implement a test that does download a VSCode instance, installs a local .vsix extension and evaluates if it was started correctly? </p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["javascript", "typescript", "unhandled"], "comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1567005451, "post_id": 57695552, "comment_id": 101835259, "body": "When you call your function you need to use a <code>try&#47;catch</code> block if using <code>async&#47;await</code> or a <code>.catch()</code> handler if using the Promise directly."}], "answers": [{"tags": [], "owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1567005535, "creation_date": 1567005535, "answer_id": 57695606, "question_id": 57695552, "link": "https://stackoverflow.com/questions/57695552/unhandlel-promise-rejection-warning/57695606#57695606", "title": "Unhandlel promise rejection warning", "body": "<p>When you call your function you need to use a try/catch block if using async/await or a .catch() handler if using the Promise directly:</p>\n\n<pre><code>try {\n  const answr = await retrieveVersionFromJira('1.1');\n} catch (error) {\n  console.error(error);\n}\n\n// alternatively\nretrieveVersionFromJira('1.1').catch(console.error);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1567005543, "creation_date": 1567005543, "answer_id": 57695610, "question_id": 57695552, "link": "https://stackoverflow.com/questions/57695552/unhandlel-promise-rejection-warning/57695610#57695610", "title": "Unhandlel promise rejection warning", "body": "<p>Wherever you call this function, you don't either have a <code>.catch</code> in the promise chain, or <code>try / catch</code> around <code>await retrieveVersionFromJira(...)</code> in async context.</p>\n\n<p>That is, the promise gets rejected, but there's no code to handle the rejection, your code ignores it and proceeds. The runtime warns you about that.</p>\n"}], "owner": {"reputation": 145, "user_id": 11101762, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OldhxdeF9Sc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPxsfh-oJQ0BbVS5o-7jrqhd7kikw/mo/photo.jpg?sz=128", "display_name": "jeremy", "link": "https://stackoverflow.com/users/11101762/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567005543, "creation_date": 1567005325, "question_id": 57695552, "link": "https://stackoverflow.com/questions/57695552/unhandlel-promise-rejection-warning", "title": "Unhandlel promise rejection warning", "body": "<p>I'm using Promise.reject</p>\n\n<p>I've got this warning: Unhandled promise rejection warning: version 1.1 is not released</p>\n\n<p>how can I solve this warning ?</p>\n\n<p>Thanks for your help </p>\n\n<pre><code>public async retrieveVersionFromJira(versionName: string): Promise&lt;ReleaseVersion&gt; {\n        const searchVersionsUri = config.jiraApiUri + 'versions';\n        const jsonResp = await this.jiraClient.get(searchVersionsUri);\n        const version: any = jsonResp.find(version =&gt; {\n            if (version.name == versionName) {\n                if (version.released == true) {\n                    return Promise.reject(\"version \" + versionName + \" is not released\");\n                }\n            }\n        });\n        if (!version) {\n            return Promise.reject(\"missing version \" + versionName + \" on jira\");\n        }\n        return new ReleaseVersion(version.id, version.name, version.released);\n    }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "jasmine", "angular-test"], "comments": [{"owner": {"reputation": 13470, "user_id": 3092377, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/8lUZ9.jpg?s=128&g=1", "display_name": "Shashank Vivek", "link": "https://stackoverflow.com/users/3092377/shashank-vivek"}, "edited": false, "score": 0, "creation_date": 1567006413, "post_id": 57695550, "comment_id": 101835855, "body": "There are 4 diff return type for same method .. You can use <code>useClass</code> . <a href=\"https://medium.com/@shashankvivek.7/testing-a-component-with-stub-services-and-spies-in-jasmine-1428d4242a49\" rel=\"nofollow noreferrer\">You can refer this article</a> in which I have tried to cover this type of scenario"}, {"owner": {"reputation": 13470, "user_id": 3092377, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/8lUZ9.jpg?s=128&g=1", "display_name": "Shashank Vivek", "link": "https://stackoverflow.com/users/3092377/shashank-vivek"}, "edited": false, "score": 0, "creation_date": 1567006483, "post_id": 57695550, "comment_id": 101835894, "body": "Can you provide the <code>component</code> file to help you further on this"}, {"owner": {"reputation": 2447, "user_id": 4786273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d430245706eaa71e471c7b72eba6b78f?s=128&d=identicon&r=PG", "display_name": "Random", "link": "https://stackoverflow.com/users/4786273/random"}, "edited": false, "score": 1, "creation_date": 1567006520, "post_id": 57695550, "comment_id": 101835926, "body": "You cannot do polymorphism with Typescript. All you can do is optionnal parameters. Can you be more explicit on how <code>getFoo</code> declaration is expected to work (showing the whole class maybe) ?"}], "owner": {"reputation": 10206, "user_id": 865866, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QXzpS.jpg?s=128&g=1", "display_name": "0leg", "link": "https://stackoverflow.com/users/865866/0leg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567005311, "creation_date": 1567005311, "question_id": 57695550, "link": "https://stackoverflow.com/questions/57695550/typescript-constructor-overload-does-not-recognize-the-type", "title": "TypeScript constructor overload does not recognize the type", "body": "<p>There is a back-end service (auto-generated from the Swagger, cannot be modified):</p>\n\n<pre><code>public getFoo(account: string, name: string, observe?: 'body', reportProgress?: boolean): Observable&lt;Foo&gt;;\npublic getFoo(account: string, name: string, observe?: 'response', reportProgress?: boolean): Observable&lt;HttpResponse&lt;Foo&gt;&gt;;\npublic getFoo(account: string, name: string, observe?: 'events', reportProgress?: boolean): Observable&lt;HttpEvent&lt;Foo&gt;&gt;;\npublic getFoo(account: string, name: string, observe: any = 'body', reportProgress: boolean = false ): Observable&lt;any&gt; {\n</code></pre>\n\n<p>Trying to write Angular test:</p>\n\n<pre><code>backendServiceSpyObj = jasmine.createSpyObj('BackendService', ['getFoo']);\nbackendServiceSpyObj.getFoo.and.returnValue(of(mockedFoo));\n</code></pre>\n\n<p>Now this fails:</p>\n\n<pre><code>Argument of type 'Observable&lt;Foo&gt;' is not assignable to parameter of type Observable&lt;HttpEvent&lt;Foo&gt;&gt;'.\n</code></pre>\n\n<p>Any clues how to make TypeScript linter now that the <code>Observable&lt;Foo&gt;</code> is expected instead?</p>\n"}, {"tags": ["typescript", "visual-studio-code", "feathersjs"], "comments": [{"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 0, "creation_date": 1590445041, "post_id": 57695537, "comment_id": 109677226, "body": "Hah. For some reason, VS Code (latest version) generated it without the &quot;preLaunchTask&quot; line and output that error on my computer. I added that line and now it works."}], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 371034, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9bf8293609c2b2197ffc3da3163f5197?s=128&d=identicon&r=PG", "display_name": "Ant&#243;nio", "link": "https://stackoverflow.com/users/371034/ant%c3%b3nio"}, "is_accepted": false, "score": 1, "last_activity_date": 1604960411, "last_edit_date": 1604960411, "creation_date": 1567007145, "answer_id": 57696035, "question_id": 57695537, "link": "https://stackoverflow.com/questions/57695537/how-to-debug-feathersjs-with-typescript-on-vs-code/57696035#57696035", "title": "How to debug feathersjs with typescript on VS Code?", "body": "<p>The typescript sourceMaps are not being generated.</p>\n<p>To fix this problem go to the <code>tsconfig.json</code> and add <code>'&quot;sourceMap&quot;: true'</code> on the <code>compilerOptions</code>.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  \"compilerOptions\": {\n    \"target\": \"es2018\",\n    \"module\": \"commonjs\",\n    \"outDir\": \"./lib\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    <b>\"sourceMap\": true</b>\n  },\n  \"exclude\": [\n    \"test\"\n  ]\n}\n\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 371034, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9bf8293609c2b2197ffc3da3163f5197?s=128&d=identicon&r=PG", "display_name": "Ant&#243;nio", "link": "https://stackoverflow.com/users/371034/ant%c3%b3nio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1604960411, "creation_date": 1567005253, "question_id": 57695537, "link": "https://stackoverflow.com/questions/57695537/how-to-debug-feathersjs-with-typescript-on-vs-code", "title": "How to debug feathersjs with typescript on VS Code?", "body": "<p>I want to debug a typescript feathersjs project using VSCode but when I launch the program a get the error </p>\n\n<blockquote>\n  <p>\"Cannot launch program '[project_path]/src/index.ts' because\n  corresponding JavaScript cannot be found. \"</p>\n</blockquote>\n\n<p>My launch.json look like this:</p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"node\",\n            \"request\": \"launch\",\n            \"name\": \"Launch Program\",\n            \"program\": \"${workspaceFolder}/src/index.ts\",\n            \"preLaunchTask\": \"tsc: build - tsconfig.json\",\n            \"outFiles\": [\n                \"${workspaceFolder}/lib/**/*.js\"\n            ]\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "edited": false, "score": 1, "creation_date": 1567004955, "post_id": 57695376, "comment_id": 101834965, "body": "Please post some code detailing what you have tried so far. A small sample of your template and controller code would suffice in this case."}, {"owner": {"reputation": 1429, "user_id": 5549377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kz9V1.jpg?s=128&g=1", "display_name": "Jay Geeth", "link": "https://stackoverflow.com/users/5549377/jay-geeth"}, "edited": false, "score": 0, "creation_date": 1567005746, "post_id": 57695376, "comment_id": 101835437, "body": "Please provide some code."}, {"owner": {"reputation": 143, "user_id": 10493796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfb052ca9615592ab7969cac18815981?s=128&d=identicon&r=PG&f=1", "display_name": "Zephers", "link": "https://stackoverflow.com/users/10493796/zephers"}, "reply_to_user": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "edited": false, "score": 0, "creation_date": 1567032018, "post_id": 57695376, "comment_id": 101845528, "body": "@richbai90 Updated with code"}, {"owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "edited": false, "score": 0, "creation_date": 1567091279, "post_id": 57695376, "comment_id": 101868366, "body": "I don&#39;t know much about Angular &gt; 1.x so I won&#39;t post this as an answer, but from what I can tell, you need to create a reference to your ng select that you can access in the component (IE this.ngSelect) and call the .select method on that reference."}], "answers": [{"comments": [{"owner": {"reputation": 12472, "user_id": 3680098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uuWp6.png?s=128&g=1", "display_name": "Evaldas Buinauskas", "link": "https://stackoverflow.com/users/3680098/evaldas-buinauskas"}, "edited": false, "score": 1, "creation_date": 1567006234, "post_id": 57695645, "comment_id": 101835742, "body": "I think question is about <a href=\"https://github.com/ng-select/ng-select\" rel=\"nofollow noreferrer\"><i>ng-select</i></a>, not native <i>select</i> element."}], "tags": [], "owner": {"reputation": 405, "user_id": 9902269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6ZmTZssvSsg/AAAAAAAAAAI/AAAAAAAADLU/7Uy5GEVFrHU/photo.jpg?sz=128", "display_name": "Miguel Pinto", "link": "https://stackoverflow.com/users/9902269/miguel-pinto"}, "is_accepted": false, "score": 0, "last_activity_date": 1567005683, "creation_date": 1567005683, "answer_id": 57695645, "question_id": 57695376, "link": "https://stackoverflow.com/questions/57695376/how-to-pre-populate-ngselect-in-angular/57695645#57695645", "title": "How to pre-populate ngselect in Angular?", "body": "<p>You need set your result to the list (countries) and then use setvalue to choose the option</p>\n\n<p>Set result to your list in your component:</p>\n\n<pre><code>this.countries = ['XPTO','XPTO2','XPTO3']\n</code></pre>\n\n<p>Define the following in your html:</p>\n\n<pre><code>&lt;select&gt;\n   &lt;option [value]=\"country\" *ngFor=\"let country of countries\"&gt;             {{country}}&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 10493796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfb052ca9615592ab7969cac18815981?s=128&d=identicon&r=PG&f=1", "display_name": "Zephers", "link": "https://stackoverflow.com/users/10493796/zephers"}, "edited": false, "score": 0, "creation_date": 1567032086, "post_id": 57696482, "comment_id": 101845550, "body": "This doesn&#39;t show how to set a default selected value"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 143, "user_id": 10493796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfb052ca9615592ab7969cac18815981?s=128&d=identicon&r=PG&f=1", "display_name": "Zephers", "link": "https://stackoverflow.com/users/10493796/zephers"}, "edited": false, "score": 0, "creation_date": 1567040751, "post_id": 57696482, "comment_id": 101847080, "body": "What is the default value you want to set? You can set it using <code>ngModel</code>. Also, do you want to use to be able to select only 1? or multiple?"}], "tags": [], "owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "is_accepted": false, "score": 0, "last_activity_date": 1567009024, "creation_date": 1567009024, "answer_id": 57696482, "question_id": 57695376, "link": "https://stackoverflow.com/questions/57695376/how-to-pre-populate-ngselect-in-angular/57696482#57696482", "title": "How to pre-populate ngselect in Angular?", "body": "<p>The right way of using <a href=\"https://github.com/ng-select/ng-select\" rel=\"nofollow noreferrer\">ng-select</a>, would be to assign the values to the <code>items</code> input binding.</p>\n\n<p>For instance,</p>\n\n<pre><code>&lt;ng-select [items]=\"cities2\"\n  bindLabel=\"name\"\n  bindValue=\"id\"\n  [multiple]=\"true\"\n  placeholder=\"Select cities\"\n  [(ngModel)]=\"selectedCityIds\"&gt;\n&lt;/ng-select&gt;\n</code></pre>\n\n<p>And on your component.ts, you will populate <code>ng-select</code> options by subscribing to the observable returned by the HTTP request, and assigning it the <code>cities2</code> property.</p>\n\n<pre><code>cities2: any[] = [];\n\nngOnInit() {\n  this.dataService.getData.subscribe(res =&gt; {\n    this.cities2 = res;\n  });\n}\n</code></pre>\n\n<p>This <a href=\"https://stackblitz.com/edit/ng-select\" rel=\"nofollow noreferrer\">demo</a> might not directly answer your queries, but it shows how the various input bindings (such as <code>items</code>) work with <code>ng-select</code>.</p>\n"}], "owner": {"reputation": 143, "user_id": 10493796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfb052ca9615592ab7969cac18815981?s=128&d=identicon&r=PG&f=1", "display_name": "Zephers", "link": "https://stackoverflow.com/users/10493796/zephers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 867, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1567037883, "creation_date": 1567004761, "last_edit_date": 1567037883, "question_id": 57695376, "link": "https://stackoverflow.com/questions/57695376/how-to-pre-populate-ngselect-in-angular", "title": "How to pre-populate ngselect in Angular?", "body": "<p>I am grabbing some items through a <code>http</code> call and then want to pre-populate the <code>ngselect</code>, but using the <code>abstractcontrol.setvalue()</code> method does not seem to work.</p>\n\n<p><strong>Template Code</strong></p>\n\n<pre><code>&lt;ng-select [items]=\"cars\"\n         bindValue=\"code\"\n         bindLabel=\"displayName\"\n         formControlName=\"car\"\n         [clearable]=\"false\"\n         [searchable]=\"false\"\n         id=\"car\"\n         placeholder=\"Select a car\"&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>Component Code</strong></p>\n\n<pre><code>this.setValueForPrePopulatedPlanningDetail('car', car);\n\nprivate setDefaultValue(fieldName: string, value: any) {\n    if (value &amp;&amp; value.length &gt; 0) {\n    const field = this.myFormGroup.get(fieldName);\n    field.markAsDirty();\n    field.setValue(value);\n    }\n}\n</code></pre>\n"}, {"tags": ["json", "typescript"], "comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1567003930, "post_id": 57695086, "comment_id": 101834369, "body": "Personally I never managed to get this to work with <code>import</code> however the equivalent of <code>const data  = require(&#39;.&#47;assets&#47;fonts&#47;helvetiker_bold.typeface.json&#39;)</code> seems to have worked for me as a workaround"}, {"owner": {"reputation": 710, "user_id": 4569894, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/974070732616563/picture?type=large", "display_name": "Nicholas Siegmundt", "link": "https://stackoverflow.com/users/4569894/nicholas-siegmundt"}, "reply_to_user": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1567004095, "post_id": 57695086, "comment_id": 101834456, "body": "@apokryfos I think i&#39;ve tried that already. When i run the code in my browser i get <code>ReferenceError: require is not defined</code>"}, {"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1567004372, "post_id": 57695086, "comment_id": 101834607, "body": "Maybe you need to switch <code>module</code> to <code>commonjs</code> to get this to work."}, {"owner": {"reputation": 710, "user_id": 4569894, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/974070732616563/picture?type=large", "display_name": "Nicholas Siegmundt", "link": "https://stackoverflow.com/users/4569894/nicholas-siegmundt"}, "reply_to_user": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1567005510, "post_id": 57695086, "comment_id": 101835300, "body": "@apokryfos i have tried that aswell and still get the require is not defined error /: really wanting to look for a solution that doesn&#39;t need <code>require</code> because nothing i&#39;ve tried makes require work"}], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 4569894, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/974070732616563/picture?type=large", "display_name": "Nicholas Siegmundt", "link": "https://stackoverflow.com/users/4569894/nicholas-siegmundt"}, "is_accepted": true, "score": 0, "last_activity_date": 1567018465, "creation_date": 1567018465, "answer_id": 57698524, "question_id": 57695086, "link": "https://stackoverflow.com/questions/57695086/importing-json-file-in-typescript-causing-unexpected-token-error-with-valid-js/57698524#57698524", "title": "Importing json file in typescript causing &quot;Unexpected token&quot; error with valid json", "body": "<p>My solution to this problem was to just create a class that contained my JSON object and use it in combination with the <code>FontLoader.parse()</code> function instead of loading the JSON from a file. This was accomplished like so:</p>\n\n<ol>\n<li>Created a file called <code>HelvetikerUtils.ts</code> that contained my json object:</li>\n</ol>\n\n<pre><code>export class HelvetikerUtil {\n    constructor() { }\n\n    data: any = &lt;YOUR_FONT_JSON_HERE&gt;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Import this class wherever</li>\n</ol>\n\n<p><code>import { HelvetikerUtil } from './HelvetikerUtil';</code></p>\n\n<ol start=\"3\">\n<li>Load the data using FontLoader.parse()</li>\n</ol>\n\n<pre><code>let myFont = new HelvetikerUtil;\nlet FONTLoader = new FontLoader();\nlet font = FONTLoader.parse(myFont.data);\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 4569894, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/974070732616563/picture?type=large", "display_name": "Nicholas Siegmundt", "link": "https://stackoverflow.com/users/4569894/nicholas-siegmundt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57698524, "answer_count": 1, "score": 1, "last_activity_date": 1567018465, "creation_date": 1567003791, "question_id": 57695086, "link": "https://stackoverflow.com/questions/57695086/importing-json-file-in-typescript-causing-unexpected-token-error-with-valid-js", "title": "Importing json file in typescript causing &quot;Unexpected token&quot; error with valid json", "body": "<p>So i followed <a href=\"https://hackernoon.com/import-json-into-typescript-8d465beded79\" rel=\"nofollow noreferrer\">this article</a> to try and import a json file into my code. Here is my import line:</p>\n\n<p><code>import data from './assets/fonts/helvetiker_bold.typeface.json';</code></p>\n\n<p>Here is the font json file (just to test if it will even import right now):</p>\n\n<p><code>{\"hi\":\"true\"}</code></p>\n\n<p>here is my tsconfig.json file:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"moduleResolution\": \"node\",\n    \"resolveJsonModule\": true,\n    \"esModuleInterop\": true,\n    \"target\": \"es5\",\n    \"module\":\"es2015\",\n    \"lib\": [\"es2015\", \"es2016\", \"es2017\", \"dom\"],\n    \"strict\": true,\n    \"sourceMap\": true,\n    \"declaration\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    \"declarationDir\": \"dist/types\",\n    \"outDir\": \"dist/lib\",\n    \"typeRoots\": [\n      \"node_modules/@types\"\n    ]\n  },\n  \"include\": [\n    \"src\"\n  ]\n}\n\n</code></pre>\n\n<p>and here is the error i get when trying to compile:</p>\n\n<pre><code>[!] Error: Unexpected token\nsrc\\assets\\fonts\\helvetiker_bold.typeface.json (1:5)\n1: {\"hi\":\"true\"}\n        ^\n</code></pre>\n\n<p>I have no clue what it is complaining about.. any help is appreciated</p>\n"}, {"tags": ["typescript", "typescript-typings", "typescript2.0"], "comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 1, "creation_date": 1567004083, "post_id": 57695079, "comment_id": 101834451, "body": "I don&#39;t think this should be possible. If you have a class that handles <code>Orders</code> then based on <a href=\"https://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow noreferrer\">LSP</a> it should also handle <code>NewOrders</code>, however this violates that."}, {"owner": {"reputation": 493, "user_id": 3007690, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/0rsC3.jpg?s=128&g=1", "display_name": "kandarp", "link": "https://stackoverflow.com/users/3007690/kandarp"}, "reply_to_user": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1567004170, "post_id": 57695079, "comment_id": 101834497, "body": "So is there any other way to achieve this, I don&#39;t want to write all the properties in a new class"}, {"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 1, "creation_date": 1567004574, "post_id": 57695079, "comment_id": 101834722, "body": "I would do something like <code>type NewOrders = Omit&lt;Orders, &#39;sequence&#39;&gt; &amp; { sequence: string[] };</code> however since you seem to be targeting TS 2.0 (based on your tags) I don&#39;t know how you&#39;d write the equivalent since Omit was only added in 3.4 and is based on conditional types added in 2.8"}], "owner": {"reputation": 493, "user_id": 3007690, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/0rsC3.jpg?s=128&g=1", "display_name": "kandarp", "link": "https://stackoverflow.com/users/3007690/kandarp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567004184, "creation_date": 1567003768, "last_edit_date": 1567004184, "question_id": 57695079, "link": "https://stackoverflow.com/questions/57695079/how-to-change-type-of-property-of-extended-parent-class-in-a-child-class", "title": "How to change type of property of extended parent class in a child class", "body": "<p>Maybe this is a silly question however I wanted to achieve as follow.</p>\n\n<p>I have a parent class with many properties that I use as a model in my angular project. However, I want to create one more class that have these all properties, but among them, one property should contain different type. How should I achieve?  </p>\n\n<p>So here I have a class called Orders</p>\n\n<pre><code>export class Orders {\n    public id: string;\n    public version: string;\n    public status: string;\n    public name: string;\n    public icon?: string;\n    public steps?: FlowStep[];\n    public sequence: Sequence[]; &lt;----- I want to change type of this\n    public start: Trigger;\n    public context: Context;\n}\n</code></pre>\n\n<p>Now I need one more class for another method, that requires  <code>public sequence: string[]</code>. So I tried as follow.</p>\n\n<pre><code>export class NewOrders extends Orders {\n    public sequence: string[]; &lt;-- Error: Type 'string[]' is not assignable to type 'Sequence[]'.\n}\n</code></pre>\n\n<p>I know I can define or condition <code>public sequence: Sequence[]  | string[]</code> in <code>Orders</code> class. But I really don't want to do that, because then <code>Orders</code> class will accept data of both type  <code>Sequence[] and string[]</code></p>\n"}, {"tags": ["javascript", "node.js", "typescript", "express"], "comments": [{"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1567002889, "post_id": 57694760, "comment_id": 101833784, "body": "<code>cron</code> is <code>cronRules</code> inside the <code>generateCron</code> function and you do this <code>cronRules[key] = &#39;*&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7920, "user_id": 2533082, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7097e6c465ed546a571fd85b9aa5e16c?s=128&d=identicon&r=PG", "display_name": "Vinz243", "link": "https://stackoverflow.com/users/2533082/vinz243"}, "is_accepted": false, "score": 0, "last_activity_date": 1567002827, "creation_date": 1567002827, "answer_id": 57694825, "question_id": 57694760, "link": "https://stackoverflow.com/questions/57694760/function-mutates-an-object-argument-after-execution/57694825#57694825", "title": "Function mutates an object argument after execution", "body": "<p>With</p>\n\n<pre><code> cronRules[key] = '*';\n</code></pre>\n\n<p>You are mutating your object passed to the function, since javascript is a pass-by-reference language for object</p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 11937915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UP_TnGhuCjs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGK0FOLWu6xmGTWYczi7IkdlaWMg/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11937915/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1567002962, "creation_date": 1567002962, "answer_id": 57694869, "question_id": 57694760, "link": "https://stackoverflow.com/questions/57694760/function-mutates-an-object-argument-after-execution/57694869#57694869", "title": "Function mutates an object argument after execution", "body": "<p>Objects are passed by reference in javascript, so when you call </p>\n\n<pre><code>cronRules[key] = '*';\n</code></pre>\n\n<p>you are changing the \"cron\" object that you passed into the function.</p>\n\n<p>Instead of messing with the cron object, you could use this for the entire function:</p>\n\n<pre><code>const { minute, hour, day, month, year } = cronRules;\nconst cron: string = `${minute || '*'} ${hour || '*'} ${day || '*'} ${month || '*'} ${year || '*'}`;\nreturn cron;\n</code></pre>\n\n<p>Which accomplishes the same task without modifying the original \"cron\" object.</p>\n"}, {"tags": [], "owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "is_accepted": true, "score": 0, "last_activity_date": 1567003044, "creation_date": 1567003044, "answer_id": 57694889, "question_id": 57694760, "link": "https://stackoverflow.com/questions/57694760/function-mutates-an-object-argument-after-execution/57694889#57694889", "title": "Function mutates an object argument after execution", "body": "<p>Just because you iterate <code>cronRules</code> inside a loop, you need to take reference of <code>cronRules</code> and make a change on it.</p>\n\n<pre><code>const ref = JSON.parse(JSON.stringify(cronRules));\n\n   const cronKeys: Array&lt;string&gt; = ['minute', 'hour', 'day', 'month', 'year'];\n   cronKeys.forEach(key =&gt; {\n     if (!ref[key]) {\n       ref[key] = '*';\n     }\n   });\n\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8250522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad326d789922b160ef1f94c49b02c41?s=128&d=identicon&r=PG&f=1", "display_name": "sammy mbugua", "link": "https://stackoverflow.com/users/8250522/sammy-mbugua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57694889, "answer_count": 3, "score": 1, "last_activity_date": 1567003044, "creation_date": 1567002662, "question_id": 57694760, "link": "https://stackoverflow.com/questions/57694760/function-mutates-an-object-argument-after-execution", "title": "Function mutates an object argument after execution", "body": "<p>I have a function that takes an object argument and should generate a string value from this argument. I need to use this argument in another function but upon execution of the first function, the argument is changed.</p>\n\n<p>This is the function that takes the object argument</p>\n\n<pre><code>export const  generateCron(cronRules: any): string {\n   const cronKeys: Array&lt;string&gt; = ['minute', 'hour', 'day', 'month', 'year'];\n   cronKeys.forEach(key =&gt; {\n     if (!cronRules[key]) {\n       cronRules[key] = '*';\n     }\n   });\n   const { minute, hour, day, month, year } = cronRules;\n   const cron: string = `${minute} ${hour} ${day} ${month} ${year}`;\n   return cron;\n }\n</code></pre>\n\n<p>This is how am calling the function</p>\n\n<pre><code>    const { cron } = data;\n    console.log(cron)\n    const cronRules: string = generateCron(cron);\n    console.log(cron)\n</code></pre>\n\n<p>suppose I have the cron object as <code>{ minute: 1, hour: 2 }</code> the \nfunction returns <code>1 2 * * *</code> as expected. but consoling the cron\nobject(second console) the object has already been changed to \n<code>{ minute: 1, hour: 2, day: '*', month: '*', year: '*' }</code></p>\n\n<p>could someone please help me understand what is happening</p>\n"}, {"tags": ["reactjs", "typescript", "react-router-dom", "react-transition-group"], "comments": [{"owner": {"reputation": 58167, "user_id": 1333975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/G2aQ2.png?s=128&g=1", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/1333975/ahmad"}, "edited": false, "score": 0, "creation_date": 1567002249, "post_id": 57694523, "comment_id": 101833367, "body": "where exactly is this line with &quot;var Component&quot;"}, {"owner": {"reputation": 58167, "user_id": 1333975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/G2aQ2.png?s=128&g=1", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/1333975/ahmad"}, "edited": false, "score": 0, "creation_date": 1567002792, "post_id": 57694523, "comment_id": 101833723, "body": "Did you try changing the variable name in <code>routes.map(({ path, Component }) =&gt; (</code> to something other than <code>Component</code>"}, {"owner": {"reputation": 4958, "user_id": 4627262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iTGZT9YcyLE/AAAAAAAAAAI/AAAAAAAAALU/-5defYeBo50/photo.jpg?sz=128", "display_name": "rrd", "link": "https://stackoverflow.com/users/4627262/rrd"}, "edited": false, "score": 0, "creation_date": 1567002845, "post_id": 57694523, "comment_id": 101833753, "body": "Can you provide the entire class code? It appears to be a class, so probably related to the declaration."}, {"owner": {"reputation": 21, "user_id": 11989702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mUxm9O5xUQA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYi0lsDuOHHoSnZ2uTCY_ZvghFcg/photo.jpg?sz=128", "display_name": "Joseph Arakelian", "link": "https://stackoverflow.com/users/11989702/joseph-arakelian"}, "edited": false, "score": 0, "creation_date": 1567002862, "post_id": 57694523, "comment_id": 101833764, "body": "When hovering over the &lt;Component /&gt; line (red squiggles) I get a two line comment, with a line break, of var Component and the JSX message"}, {"owner": {"reputation": 21, "user_id": 11989702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mUxm9O5xUQA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYi0lsDuOHHoSnZ2uTCY_ZvghFcg/photo.jpg?sz=128", "display_name": "Joseph Arakelian", "link": "https://stackoverflow.com/users/11989702/joseph-arakelian"}, "edited": false, "score": 0, "creation_date": 1567003355, "post_id": 57694523, "comment_id": 101834030, "body": "Updated the code to include entire class"}, {"owner": {"reputation": 21, "user_id": 11989702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mUxm9O5xUQA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYi0lsDuOHHoSnZ2uTCY_ZvghFcg/photo.jpg?sz=128", "display_name": "Joseph Arakelian", "link": "https://stackoverflow.com/users/11989702/joseph-arakelian"}, "edited": false, "score": 0, "creation_date": 1567004053, "post_id": 57694523, "comment_id": 101834426, "body": "Ahmad, I have tried using names other than Component and it did not change the effect"}, {"owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "edited": false, "score": 0, "creation_date": 1567004668, "post_id": 57694523, "comment_id": 101834783, "body": "Do you have <code>@types&#47;react</code> in your <code>package.json</code> (and only once)?"}, {"owner": {"reputation": 21, "user_id": 11989702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mUxm9O5xUQA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYi0lsDuOHHoSnZ2uTCY_ZvghFcg/photo.jpg?sz=128", "display_name": "Joseph Arakelian", "link": "https://stackoverflow.com/users/11989702/joseph-arakelian"}, "edited": false, "score": 0, "creation_date": 1567005151, "post_id": 57694523, "comment_id": 101835074, "body": "Yes, currently using  @types/react ^16.8.15"}], "owner": {"reputation": 21, "user_id": 11989702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mUxm9O5xUQA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYi0lsDuOHHoSnZ2uTCY_ZvghFcg/photo.jpg?sz=128", "display_name": "Joseph Arakelian", "link": "https://stackoverflow.com/users/11989702/joseph-arakelian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567003339, "creation_date": 1567001874, "last_edit_date": 1567003339, "question_id": 57694523, "link": "https://stackoverflow.com/questions/57694523/getting-the-jsx-element-type-component-does-not-have-any-construct-or-call-si", "title": "Getting the &quot;JSX element type &#39;Component&#39; does not have any construct or call signatures.ts(2604)&quot;", "body": "<p>I am working on an internal software for my company, and my supervisor wants a clean up the the sharp transition that usually occurs with react-router. What I found was react-transition-group. I added it to my project, and attempted to copy what was done via <a href=\"http://reactcommunity.org/react-transition-group/with-react-router\" rel=\"nofollow noreferrer\">http://reactcommunity.org/react-transition-group/with-react-router</a> but when I did, I got the following error: \"var Component: JSX.Element\" :: \"JSX element type 'Component' does not have any construct or call signatures.ts(2604)\"</p>\n\n<p>Currently, I have been looking to updates for both react or typescript, attempted to change name from 'Component' in case it was an issue of overlap.</p>\n\n<pre><code>import * as React from 'react';\nimport {\n  Container,\n  Button\n} from 'reactstrap'\nimport NavMenu from './components/nav/NavMenu'\nimport { Route, BrowserRouter as Router } from 'react-router-dom'\nimport Home from './components/pages/Home'\nimport AccountInfo from './components/pages/AccountInfo/AccountInfo'\nimport LeaveRequests from './components/pages/LeaveRequests/LeaveRequests'\nimport PersonnelView from       './components/pages/PersonnelViews/PersonnelView'\nimport { IAppState } from './interfaces/state/state'\nimport { Summary401k } from './components/pages/HR/401PreTaxCash/401kSummary'\n// eslint-disable-next-line\nimport authStore from './stores/AuthStore'\nimport { CashBalanceSummary } from './components/pages/HR/401PreTaxCash/CashBalanceSummary';\nimport { MarketPlaceCoverage } from     './components/pages/HR/HealthBenefits/MarketPlaceCoverage';\nimport { PreTaxSummary } from './components/pages/HR/HealthBenefits/PreTaxSummary';\nimport { UHCPrescription } from './components/pages/HR/HealthBenefits/UHCPrescription';\nimport { DiscriminationPolicy } from './components/pages/HR/OnboardingDocuments/DiscriminationPolicy';\nimport { EmployeeHandbook } from './components/pages/HR/OnboardingDocuments/EmployeeHandbook';\nimport { Holidays } from './components/pages/HR/OnboardingDocuments/Holidays';\nimport { RemoteWork } from './components/pages/HR/OnboardingDocuments/RemoteWork';\nimport { SensitiveInformation } from './components/pages/HR/OnboardingDocuments/SensitiveInformation';\nimport { VacationLeavePolicy } from './components/pages/HR/OnboardingDocuments/VacationLeavePolicy';\nimport { Timekeeping } from './components/pages/HR/Timekeeping/Timekeeping';\nimport { TimekeepingLeave } from './components/pages/HR/Timekeeping/TimekeepingLeave';\nimport { UHCMedical } from './components/pages/HR/HealthBenefits/UHCMedical';\nimport HRHome from './components/pages/HR/HrHome';\nimport { CSSTransition } from 'react-transition-group';\n\nexport default class App extends React.Component&lt;{}, IAppState&gt; {\n  private _logout: any;\n\n  constructor(props: {}) {\n    super(props)\n\n    this.state = {\n      AuthState: {\n        isLoggedIn: false,\n        jwtToken: \"\",\n        pId: -1\n      },\n      logout: false\n    }\n  }\n\n  render() {\n\n    const routes = [\n      { path: '/', name: 'Home', Component: &lt;Home authCallback={this.authCallback} isLoggedIn={this.state.AuthState.isLoggedIn} authenticatedFunction={this.authenticatedFunction} unauthenticatedFunction={this.unauthenticatedFunction} /&gt; },\n      { path: '/account', name: 'Account Info', Component: &lt;AccountInfo jwtToken={this.state.AuthState.jwtToken} pId={this.state.AuthState.pId} /&gt; },\n      { path: '/personnel', name: 'Personnel', Component: &lt;PersonnelView jwtToken={this.state.AuthState.jwtToken} /&gt; },\n      { path: '/hrhome', name: 'HR Home', Component: &lt;HRHome /&gt; },\n      { path: '/401ksummary', name: '401(k) Summary', Component: &lt;Summary401k /&gt; },\n      { path: '/cashbalancesummary', name: 'Cash Balance Summary', Component: &lt;CashBalanceSummary /&gt; },\n      { path: '/marketplacecoverage', name: 'Marketplace Coverage', Component: &lt;MarketPlaceCoverage /&gt; },\n      { path: '/pretaxsummary', name: 'Pre-Tax Summary', Component: &lt;PreTaxSummary /&gt; },\n      { path: '/uhcmedical', name: 'UHC Medical', Component: &lt;UHCMedical /&gt; },\n      { path: '/uhcprescription', name: 'UHC Prescription', Component: &lt;UHCPrescription /&gt; },\n      { path: '/discriminationpolicy', name: 'Discrimination Policy', Component: &lt;DiscriminationPolicy /&gt; },\n      { path: '/employeehandbook', name: 'Employee Handbook', Component: &lt;EmployeeHandbook /&gt; },\n      { path: '/holidays', name: 'Holidays', Component: &lt;Holidays /&gt; },\n      { path: '/remotework', name: 'Remote Work', Component: &lt;RemoteWork /&gt; },\n      { path: '/sensitiveinformation', name: 'Sensitive Information', Component: &lt;SensitiveInformation /&gt; },\n      { path: '/vacationleavepolicy', name: 'Vacation Leave Policy', Component: &lt;VacationLeavePolicy /&gt; },\n      { path: '/timekeeping', name: 'Timekeeping', Component: &lt;Timekeeping /&gt; },\n      { path: '/timekeepingleave', name: 'Timekeeping Leave', Component: &lt;TimekeepingLeave /&gt; }\n    ]\n\n    return (\n      &lt;Router&gt;\n        &lt;NavMenu logout={this._logout} isLoggedIn= {this.state.AuthState.isLoggedIn} /&gt;\n        &lt;Container&gt;\n          {\n            routes.map(({ path, Component }) =&gt; (\n              &lt;Route key={path} exact path={path}&gt;\n                {\n                  ({ match }) =&gt; {\n                    if (!Component) return null\n                    return (\n                      &lt;CSSTransition\n                        in={match != null}\n                        timeout={300}\n                        classNames=\"page\"\n                        unmountOnExit\n                      &gt;\n                        &lt;Component /&gt;\n                      &lt;/CSSTransition&gt;\n                    )\n                  }\n                }\n              &lt;/Route&gt;\n            ))\n          }\n        &lt;/Container&gt;\n        &lt;Route exact path=\"/leaverequests\" component={() =&gt; &lt;LeaveRequests pId={this.state.AuthState.pId} jwtToken={this.state.AuthState.jwtToken} /&gt;} /&gt;\n      &lt;/Router&gt;\n    );\n  }\n\n  authCallback = async (receivedAccountInfo: any) =&gt; {\n    if (!this.state.AuthState.isLoggedIn) {\n      if (this.state.AuthState.pId &lt; 0) {\n        this.setState({\n          AuthState: {\n            isLoggedIn: false,\n            jwtToken: \"\",\n            pId: 0\n          }\n        })\n        /*\n        * Store Logout\n\n        authStore.logout()\n        */\n      }\n      const url =  `${process.env.REACT_APP_API_URL}/api/personnel/id/${receivedAccountInfo.account.userName}`\n      const response = await fetch(url, {\n        headers: new Headers({\n          'Authorization': 'Bearer ' + receivedAccountInfo.jwtIdToken\n        })\n      })\n      const id = await response.json()\n      this.setState({\n        AuthState: {\n          isLoggedIn: true,\n          jwtToken: receivedAccountInfo.jwtIdToken,\n          pId: id\n        }\n      })\n      /*\n      * Store Login\n\n      authStore.startLogin(receivedAccountInfo.jwtIdToken)\n      await  authStore.fetchLogin(`api/personnel/id/${receivedAccountInfo.account.userName}`)\n      console.log(authStore.getState())\n      */\n    }\n  }\n\n  unauthenticatedFunction = (loginFunction: any) =&gt; {\n    return (\n      &lt;Button color=\"primary\" onClick={loginFunction}&gt;Login&lt;/Button&gt;\n    )\n  }\n\n  authenticatedFunction = (logout: any) =&gt; {\n    this._logout = logout\n    return (\n      &lt;Button color=\"primary\" onClick={logout}&gt;&lt;/Button&gt;\n    )\n  }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0Bv1E.png\" rel=\"nofollow noreferrer\">Error via Browser</a></p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1567003175, "post_id": 57694301, "comment_id": 101833946, "body": "I don&#39;t think you can do it any more cleanly than this. There are other ways of doing it without repeating <code>this.showText1()</code> but they all wind up being more verbose and less readable."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1567004177, "post_id": 57694301, "comment_id": 101834501, "body": "I&#39;ll post an answer. It&#39;s going to be a long one :)"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1567004896, "post_id": 57694301, "comment_id": 101834928, "body": "@Reactgular looking forward :)"}], "answers": [{"comments": [{"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 1, "creation_date": 1567003871, "post_id": 57695059, "comment_id": 101834338, "body": "Yes I need because I initially work with them in my Angular project and switching between Observables and Promises back and forth doesn&#39;t seem to be a good idea."}, {"owner": {"reputation": 542, "user_id": 11886299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095e6f3f268850b0a190dddd0d740b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey", "link": "https://stackoverflow.com/users/11886299/mickey"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1567005852, "post_id": 57695059, "comment_id": 101835500, "body": "Ah, in that case I&#39;m sorry I can&#39;t be more helpful. Hope you find the answer you&#39;re looking for!"}], "tags": [], "owner": {"reputation": 542, "user_id": 11886299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095e6f3f268850b0a190dddd0d740b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey", "link": "https://stackoverflow.com/users/11886299/mickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1567003698, "creation_date": 1567003698, "answer_id": 57695059, "question_id": 57694301, "link": "https://stackoverflow.com/questions/57694301/conditional-expanding-observable-chain/57695059#57695059", "title": "Conditional expanding observable chain", "body": "<p>Do you absolutely need to use observables? It looks like you might be able to write this more cleanly with a simple async function</p>\n\n<pre><code>async () =&gt; {\n    if(this.savedLocally) return this.showText1();\n\n    const isOnServer = await this.checkOnServer();\n    if(isOnserver) return this.showText2();\n\n    const isAnotherCondition = await this.checkAnotherCondition();\n    if(isAnotherCondition ) return this.showText3();\n\n    return this.showText1();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1567059753, "post_id": 57695506, "comment_id": 101851029, "body": "I&#39;ve made a small test sample to test your solution, because for me it seemed to execute only the last one observable since <code>of</code> emits all of the values one by one and <code>switchMap</code> changes active subscription. <a href=\"https://stackblitz.com/edit/rxjs-q6vieb?devtoolsheight=60\" rel=\"nofollow noreferrer\">stackblitz.com/edit/rxjs-q6vieb?devtoolsheight=60</a> here it can be observed in a console where <code>2</code> is print meanwhile <code>1</code> had to be (in a logic of what needed)."}], "tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": false, "score": 0, "last_activity_date": 1567005184, "creation_date": 1567005184, "answer_id": 57695506, "question_id": 57694301, "link": "https://stackoverflow.com/questions/57694301/conditional-expanding-observable-chain/57695506#57695506", "title": "Conditional expanding observable chain", "body": "<p>You're describing a collection of observables where each observable determines if the next observable should be used.</p>\n\n<p>If the value of an observable does not satisfy a condition, then the value of the next observable is used until the end of the collection is reached, but if an observable does satisfy a condition you don't need any of the remaining observables.</p>\n\n<p>When the observable completes you need the accumulation of conditions.</p>\n\n<p>You want something scalable. Allowing you to resolve a long list of conditions asynchronously, but stopping when there is no need for additional logic.</p>\n\n<p>You can use a combination of a <a href=\"https://rangle.io/blog/thinking-in-nested-streams-with-rxjs/\" rel=\"nofollow noreferrer\">high-order observable</a>, <a href=\"https://medium.com/async-la/a-short-and-sour-guide-to-reducers-b5b54d3bb018\" rel=\"nofollow noreferrer\">reducers</a> and a state object.</p>\n\n<p>A high-order observable is an observable that emits an observable. For example;</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const higherOrder$ = of(of(true));\n</code></pre>\n\n<p>Let's use a state object to hold the <em>satisfy</em> condition and accumulation of values.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface State {\n   // continue when value is false\n   satisfy: boolean;\n   // accumulation of data\n   values: {[key:string]: any};\n}\n</code></pre>\n\n<p>Let's start with a <em>default</em> state value.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const DEFAULT_STATE = {\n   satisfy: false,\n   values: {\n      savedLocally: false,\n      onServer: false\n   }\n};\n</code></pre>\n\n<p>Let's define our observables that will emit values that will be accumulated.</p>\n\n<ul>\n<li>Each observable will emit <code>satisfy</code> and <code>values</code>.</li>\n<li>As long as <code>satisfy</code> is <em>false</em> the next observable will be used.</li>\n<li>Each <code>values</code> will be accumulated in the final result.</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>const savedLocally$ = this.http.get(...).pipe(map(resp =&gt; ({\n    satisfy: Boolean(resp), values: {savedLocally: resp}\n})));\n\nconst checkOnServer$ = this.http.get(...).pipe(map(resp =&gt; ({\n    satisfy: Boolean(resp), values: {onServer: resp}\n})));\n</code></pre>\n\n<p>We can create a high-order observable, switch to each observable, accumate the results and stop on the first satisfied value.</p>\n\n<p>Here I use the <a href=\"https://www.learnrxjs.io/operators/transformation/scan.html\" rel=\"nofollow noreferrer\">scan()</a> operator to accumate the values over each emitted value.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>of(savedLocally$, checkOnServer$).pipe(\n   switchMap(ob$ =&gt; ob$),\n   scan((acc, next) =&gt; ({\n      satisfy: next.satisfy,\n      values: {...acc.values, ...next.values}\n   }), DEFAULT_STATE),\n   filter(state =&gt; state.satisfy),\n   first(),\n   map(state =&gt; state.values)\n).subscribe(values =&gt; console.log(values));\n</code></pre>\n\n<p>Now I don't know if this is <em>simpler</em> than what you have now, but it does scale to support a long collection of observables.</p>\n\n<p>In this example, the <code>switchMap()</code> does not have access to the <em>previous</em> state values. It can be done, but is more complicated and I would need time to think of how to do it.</p>\n"}], "owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1567005184, "creation_date": 1567001113, "question_id": 57694301, "link": "https://stackoverflow.com/questions/57694301/conditional-expanding-observable-chain", "title": "Conditional expanding observable chain", "body": "<p>The problem:</p>\n\n<p>I have multiple conditions to check. Some of them result in the same observable.</p>\n\n<p>The flow is following:</p>\n\n<ol>\n<li>I check if a form is saved locally</li>\n<li>If it is then I show a user text 1</li>\n<li>If it is not then I check whether a server has this form in DB</li>\n<li>If the server has it then I show text 2</li>\n<li>If it does not I show text 1</li>\n</ol>\n\n<p>Is there a way to avoid multiple conditions leading to the same result but being copy-pasted?</p>\n\n<p>Now it looks like this</p>\n\n<pre><code>iif(\n  () =&gt; this.savedLocally,\n  this.showText1(),\n  this.checkOnServer().pipe(\n    switchMap(onServer =&gt; iif(\n      () =&gt; onServer,\n      this.showText2(),\n      this.showText1()\n    ))\n  )\n)\n</code></pre>\n\n<p>If there is one more condition then it has one more level with repeating <code>this.showText1()</code> in somewhere.</p>\n\n<p>What I'm looking is to re-design this logic to be less repetitive.</p>\n\n<p>The trick is that I need to perform three checks (next one is performed only when the previous has expected result) and all of these are asynchronous.</p>\n\n<p>If it was simple <code>if</code> I would use <code>if (cond1 &amp;&amp; cond2 &amp;&amp; cond3)</code> but here it's not that simple. I have a strict order for checks and each check is dependent on previous result.</p>\n"}, {"tags": ["javascript", "arrays", "typescript", "object"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1566999873, "post_id": 57693778, "comment_id": 101831827, "body": "how do you feel about plain <code>for</code> loops?  Or do you need to use methods like <code>forEach()</code>?"}, {"owner": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567000658, "post_id": 57693778, "comment_id": 101832346, "body": "I need to keep the functionality of the Map to allow me accessing Shapes by id (Shapes are removed and added to the ids are not sequential)"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567000959, "post_id": 57693778, "comment_id": 101832536, "body": "You should be able to hold onto your <code>Map</code> even if you iterate over its <code>entries()</code> output.  But, why does your map have objects as <i>keys</i> and ids as <i>values</i>?  If you want to look up objects by id, the id should be the key and the object should be the value."}, {"owner": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1567001046, "post_id": 57693778, "comment_id": 101832595, "body": "You are correct, I accidentally switched between key and value. (edited original post)"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1567001095, "post_id": 57693778, "comment_id": 101832628, "body": "Okay I will change my answer then to match it (and you should change <code>(shape1, shapeId1)</code> to <code>(shapeId1, shape1)</code> in your question, and likewise with <code>2</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "edited": false, "score": 1, "creation_date": 1567000492, "post_id": 57693939, "comment_id": 101832253, "body": "This will still run over each pair more than once"}, {"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "reply_to_user": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "edited": false, "score": 0, "creation_date": 1567000891, "post_id": 57693939, "comment_id": 101832492, "body": "Fixed @Guy, better now?"}], "tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": false, "score": 0, "last_activity_date": 1567000885, "last_edit_date": 1567000885, "creation_date": 1566999925, "answer_id": 57693939, "question_id": 57693778, "link": "https://stackoverflow.com/questions/57693778/iterating-over-every-pair-of-elements-in-a-map/57693939#57693939", "title": "Iterating over every pair of elements in a Map", "body": "<p>Use a Set with the two indexes:</p>\n\n<pre><code>let indexes = new Set();\n\nshapes.forEach((shape1, shapeId1) =&gt; {\n\n    shapes.forEach((shape2, shapeId2) =&gt; {\n\n        if (set.has(`${shapeId1}-${shapeId2}`) || set.has(`${shapeId2}-${shapeId1}`)) return;\n        set.add(`${shapeId1}-${shapeId2}`);\n\n    });\n\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "edited": false, "score": 0, "creation_date": 1567000543, "post_id": 57693945, "comment_id": 101832276, "body": "This is the result that I&#39;m looking for but I have a Map, not an array."}, {"owner": {"reputation": 658, "user_id": 998818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NUYjA.png?s=128&g=1", "display_name": "Cornel Stefanache", "link": "https://stackoverflow.com/users/998818/cornel-stefanache"}, "reply_to_user": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "edited": false, "score": 0, "creation_date": 1567000699, "post_id": 57693945, "comment_id": 101832363, "body": "You can convert your map to an array: <code>const arr = Array.from(myMap.values())</code>"}], "tags": [], "owner": {"reputation": 658, "user_id": 998818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NUYjA.png?s=128&g=1", "display_name": "Cornel Stefanache", "link": "https://stackoverflow.com/users/998818/cornel-stefanache"}, "is_accepted": false, "score": 0, "last_activity_date": 1566999945, "creation_date": 1566999945, "answer_id": 57693945, "question_id": 57693778, "link": "https://stackoverflow.com/questions/57693778/iterating-over-every-pair-of-elements-in-a-map/57693945#57693945", "title": "Iterating over every pair of elements in a Map", "body": "<p>You can use two for iterations using an index and start the nested iteration from the root index + 1. This will ensure you that you will never process two pairs.</p>\n\n<pre><code>const arr = [1,2,3,4];\n\n\nfor (let i = 0; i&lt;arr.length-1; i++) {\n  for (let j = i+1; j&lt;arr.length; j++) {\n    console.log(`${arr[i]} - ${arr[j]}`)\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 3, "last_activity_date": 1567001366, "last_edit_date": 1567001366, "creation_date": 1567000502, "answer_id": 57694123, "question_id": 57693778, "link": "https://stackoverflow.com/questions/57693778/iterating-over-every-pair-of-elements-in-a-map/57694123#57694123", "title": "Iterating over every pair of elements in a Map", "body": "<p>I'd suggest first converting the <code>Map</code> to an array of its entries:</p>\n\n<pre><code>const entryArray = Array.from(shapes.entries());\n</code></pre>\n\n<p>Then you can choose to iterate pairs either via traditional <code>for</code> loop:</p>\n\n<pre><code>console.log(\"FOR LOOP\");\nfor (let i = 0; i &lt; entryArray.length; i++) {\n  const [shapeId1, shape1] = entryArray[i];\n  for (let j = i + 1; j &lt; entryArray.length; j++) {\n    const [shapeId2, shape2] = entryArray[j];\n    console.log(shapeId1, shapeId2);\n  }\n}\n</code></pre>\n\n<p>Or via the functional <code>forEach</code> array methods:</p>\n\n<pre><code>console.log(\"FOREACH\");\nentryArray.forEach(([shapeId1, shape1], i) =&gt;\n  entryArray.slice(i + 1).forEach(([shapeId2, shape2]) =&gt; {\n    console.log(shapeId1, shapeId2);\n  })\n);\n</code></pre>\n\n<p>In each case you are avoiding duplicates by the inner loop only iterating the elements  <em>after</em> the outer loop index.  I don't know what your <code>Shape</code> or id types look like, but given this:</p>\n\n<pre><code>interface Shape {\n  area: number;\n}\n\nconst shapes: Map&lt;string, Shape&gt; = new Map([\n  [\"a\", { area: 1 }],\n  [\"b\", { area: 2 }],\n  [\"c\", { area: 3 }]\n]);\n</code></pre>\n\n<p>The above code outputs </p>\n\n<pre><code>FOR LOOP\na b\na c\nb c\nFOREACH\na b\na c\nb c\n</code></pre>\n\n<p>So you can see that you get distinct pairs.  Hope that helps; good luck!  </p>\n\n<p><a href=\"https://www.typescriptlang.org/play/?strictNullChecks=false&amp;jsx=1#code/JYOwLgpgTgZghgYwgAgMoAs4AcUG8BQyycUEcAXMiAK4C2ARtANz4C+++CA9iAM5jJemHL0oBZbAB5+UUAHMANGmEQAfMgC8VCAHdkErAAoA2oWTGARHAtLcxUhWQBGZKwC6Cs5fo3kdkmSUAEyuHl4WCL7+DpQAzKH4bgCULJw8-MgQ4FAAngCCUFBwOZrIBUU5AHQwUFy0hkLYELyVWWCyzYZJKRzcfFwANhCVA1xyhhYAYgDyAErIADLT0wAKFj0wXFDIhkMCwKUADEzIB5KZ2fmFxSNZcmDoJ8AA1M9JfmZ9GcaNOACSABMnEpfhAnG5Sm1cuVisZgG4WERNttdhABAArUoHZ7OE6Y85Qq4VW4ge6PZDo17vAhEIhfAQ-FSAoIglRBCFaQkwnLGdEIsx09KDYajcagwHAwRMgFBHpEdjsNL9IYjMYTGazACieQAwgAJdYsLnXKrIzWIdCGEzioGsprgpTAd4aVRmY3E3gDYBIQzY5xJapbc0IS3W6UsqVNdnO9Q02lfYWqsXSyU22WI1xJfA9IA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 169, "user_id": 4180680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3cab6e6ec7ad4f55a46c0d3c03d1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/4180680/guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57694123, "answer_count": 3, "score": 0, "last_activity_date": 1567001366, "creation_date": 1566999437, "last_edit_date": 1567000996, "question_id": 57693778, "link": "https://stackoverflow.com/questions/57693778/iterating-over-every-pair-of-elements-in-a-map", "title": "Iterating over every pair of elements in a Map", "body": "<p>I have a Map which holds Shape object values with their id as key.\nI need to iterate over every pair of Shapes in this Map, but I want to iterate over each pair only once.</p>\n\n<p>I know I can use forEach or for..of, but I can't find a way to prevent duplicate pairs. Also, this should be a as efficient as possible.</p>\n\n<pre><code>shapes.forEach((shape1, shapeId1) =&gt; {\n    shapes.forEach((shape2, shapeId2) =&gt; {\n        // iterating over each pair many times\n    });\n});\n</code></pre>\n"}, {"tags": ["angular", "typescript", "drag-and-drop", "ag-grid"], "comments": [{"owner": {"reputation": 7881, "user_id": 5020253, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/64fa8e1349810b2b61a3827a185e108c?s=128&d=identicon&r=PG&f=1", "display_name": "SDekov", "link": "https://stackoverflow.com/users/5020253/sdekov"}, "edited": false, "score": 0, "creation_date": 1592322349, "post_id": 57693638, "comment_id": 110381386, "body": "Did you find an answer to this?"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6060533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97ff057ff049c3d60c68d243a0647ba?s=128&d=identicon&r=PG&f=1", "display_name": "User0101", "link": "https://stackoverflow.com/users/6060533/user0101"}, "edited": false, "score": 0, "creation_date": 1567071500, "post_id": 57694008, "comment_id": 101856784, "body": "Thanks for the fast reply. The problem I&#39;m facing is that I can&#39;t use rowDrag and dndSource together if I declare them. Means there will be two drag buttons with different effect. Basically, I want to achieve the &quot;rowDrag&quot; with the possibility to drop outside the grid with custom data but want to keep the features of &quot;rowDrag&quot;."}], "tags": [], "owner": {"reputation": 1, "user_id": 7929335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2684dbbd31577ad8bda370275fca6df5?s=128&d=identicon&r=PG&f=1", "display_name": "pmayur25", "link": "https://stackoverflow.com/users/7929335/pmayur25"}, "is_accepted": false, "score": 0, "last_activity_date": 1567000134, "creation_date": 1567000134, "answer_id": 57694008, "question_id": 57693638, "link": "https://stackoverflow.com/questions/57693638/using-rowdrag-with-dndsource-in-ag-grid/57694008#57694008", "title": "Using rowDrag with dndSource in ag-grid", "body": "<p>Please Follow link below :  <br>\n<a href=\"https://ag-grid.com/javascript-grid-column-properties/\" rel=\"nofollow noreferrer\">Ag-grid Reference: Column Properties</a></p>\n\n<p>Link Mentioned below some properties for row drag : </p>\n\n<ol>\n<li>rowDrag - Boolean</li>\n<li>dndSource - Boolean </li>\n</ol>\n\n<p>Also check below link for row drag &amp; drop : <br>\n<a href=\"https://www.ag-grid.com/javascript-grid-row-dragging/\" rel=\"nofollow noreferrer\">javascript grid row dragging</a></p>\n"}], "owner": {"reputation": 85, "user_id": 6060533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97ff057ff049c3d60c68d243a0647ba?s=128&d=identicon&r=PG&f=1", "display_name": "User0101", "link": "https://stackoverflow.com/users/6060533/user0101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1567000134, "creation_date": 1566998983, "question_id": 57693638, "link": "https://stackoverflow.com/questions/57693638/using-rowdrag-with-dndsource-in-ag-grid", "title": "Using rowDrag with dndSource in ag-grid", "body": "<p>Is it possible to use \"rowDrag\" and \"dndSource=true\" together?</p>\n\n<p>As I understand, to achieve to drag &amp; drop outside the grid, I have to set the \"dndSource=true\". But I can't seem to use it when \"rowDrag\" is active.</p>\n"}, {"tags": ["reactjs", "typescript", "react-tsx"], "answers": [{"tags": [], "owner": {"reputation": 6380, "user_id": 11599909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d6760778bf35138d266f24c3552c46?s=128&d=identicon&r=PG&f=1", "display_name": "Domino987", "link": "https://stackoverflow.com/users/11599909/domino987"}, "is_accepted": true, "score": 4, "last_activity_date": 1574678727, "last_edit_date": 1574678727, "creation_date": 1566998540, "answer_id": 57693492, "question_id": 57693420, "link": "https://stackoverflow.com/questions/57693420/how-do-i-include-a-namespace-with-a-react-tsx-import/57693492#57693492", "title": "How do I include a namespace with a react tsx import?", "body": "<p>You need to write JSX-Elements upper-case so that react can distinguish between custom elements and build-in ones like span or div. <a href=\"https://reactjs.org/docs/jsx-in-depth.html#html-tags-vs.-react-components\" rel=\"nofollow noreferrer\">Docs</a></p>\n\n<p>If you write it lower case, it will look for a native element, which does not exist. So change the name to be upper-case and it will work:</p>\n\n<pre><code>import DeleteButton from './Components/deleteButton';\n</code></pre>\n\n<p>Hope this helps. Happy coding.</p>\n"}, {"tags": [], "owner": {"reputation": 1690, "user_id": 10104341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7326ce0b47203cf7bf776da128e5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Efst", "link": "https://stackoverflow.com/users/10104341/dimitris-efst"}, "is_accepted": false, "score": -1, "last_activity_date": 1566998928, "creation_date": 1566998928, "answer_id": 57693617, "question_id": 57693420, "link": "https://stackoverflow.com/questions/57693420/how-do-i-include-a-namespace-with-a-react-tsx-import/57693617#57693617", "title": "How do I include a namespace with a react tsx import?", "body": "<p>You should specify the return type. On the render()..</p>\n\n<pre><code>render(): ReactNode {\n  return (\n   ...\n )\n}\n``\n\nAlso, import the ReactNode from React itself like this,\n\n</code></pre>\n\n<p>Port React, {ResctNode} from 'react'\n``|</p>\n"}], "owner": {"reputation": 47, "user_id": 8224046, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UuP9Q2Vat6w/AAAAAAAAAAI/AAAAAAAAB9s/yZbGvLfsKsU/photo.jpg?sz=128", "display_name": "Ryan Bircham", "link": "https://stackoverflow.com/users/8224046/ryan-bircham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 57693492, "answer_count": 2, "score": 2, "last_activity_date": 1574678727, "creation_date": 1566998312, "question_id": 57693420, "link": "https://stackoverflow.com/questions/57693420/how-do-i-include-a-namespace-with-a-react-tsx-import", "title": "How do I include a namespace with a react tsx import?", "body": "<p>When I try to import the component 'deleteButton', the compiler claims the class does not exist.</p>\n\n<p>I have tried using an export default, and importing it under an alias.</p>\n\n<pre><code>import React from 'react';\nimport deleteButton from './Components/deleteButton';\n\nconst App: React.FC = () =&gt; {\n  return (\n    &lt;deleteButton/&gt;\n\n  );\n}\n\nexport default App;\n</code></pre>\n\n<pre><code>import React from 'react';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nexport default class deleteButton extends React.Component {\n  submit = () =&gt; {\n    confirmAlert({\n      title: 'Confirm to delete',\n      message: 'Are you sure to delete this file?.',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () =&gt; alert('File deleted')\n        },\n        {\n          label: 'No',\n          onClick: () =&gt; alert('Canceled')\n        }\n      ]\n    });\n  };\n  render() {\n    return (&lt;div className='container'&gt;\n      &lt;button onClick={this.submit}&gt;Delete&lt;/button&gt;\n    &lt;/div&gt;);\n  }\n}\n</code></pre>\n\n<p>The expected output should be an HTML Element.\nThe compiler claims:\nProperty 'deleteButton' does not exist on type 'JSX.IntrinsicElements'.  TS2339</p>\n"}, {"tags": ["typescript", "jenkins", "jestjs", "jenkins-pipeline", "ts-jest"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 12507739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBGdbsGYFBtU3APaP-g0wJP5amFnpwiGJYirq4-_g=k-s128", "display_name": "Amir Sufyani", "link": "https://stackoverflow.com/users/12507739/amir-sufyani"}, "is_accepted": true, "score": 3, "last_activity_date": 1575926373, "creation_date": 1575926373, "answer_id": 59256795, "question_id": 57693402, "link": "https://stackoverflow.com/questions/57693402/jest-typescript-tests-failing-in-jenkins/59256795#59256795", "title": "Jest TypeScript tests failing in Jenkins", "body": "<p>Teammate of asker here, this ended up being a bit more subtle. \nThe culprit here is the /lib/ in the testPathIgnorePatterns. testPathIgnorePatterns match against the <em>full path</em> of any test files found by testMatch or testRegex.</p>\n\n<p>As it turns out, the working directory for our Jenkins instance was something like <code>/var/lib/jenkins/workspace</code> so the testMatch would find all of our test files, but then the testPathIgnorePatterns would match them all on /lib/ and exclude them all. </p>\n\n<p>The correct way to exclude the '/lib/' folder in an environment-agnostic way was to use the <code>&lt;rootDir&gt;</code> token like so </p>\n\n<p><code>testPathIgnorePatterns: [\n    '&lt;rootDir&gt;/lib/',\n  ],</code></p>\n"}], "owner": {"reputation": 9562, "user_id": 20489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8daed6e147b68f7d82fde4963d30bbdb?s=128&d=identicon&r=PG", "display_name": "bingles", "link": "https://stackoverflow.com/users/20489/bingles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 59256795, "answer_count": 1, "score": 1, "last_activity_date": 1575926373, "creation_date": 1566998283, "last_edit_date": 1567002380, "question_id": 57693402, "link": "https://stackoverflow.com/questions/57693402/jest-typescript-tests-failing-in-jenkins", "title": "Jest TypeScript tests failing in Jenkins", "body": "<p>We have a React / TypeScript project and are using Jest + ts-jest as our test runner. Everything works fine locally but fails when running in our Jenkins CI.</p>\n\n<p>Here is a snippet from the Jenkins console:</p>\n\n<pre><code>No tests found, exiting with code 1\nIn /var/lib/jenkins/workspace/fix-jenkins-tests\n  403 files checked.\n  testMatch: **/__tests__/**/*.[jt]s?(x), **/?(*.)+(spec|test).[jt]s?(x) - 38 matches\n  testPathIgnorePatterns: /lib/, /node_modules/ - 0 matches\n  testRegex:  - 0 matches\nPattern:  - 0 matches\nerror Command failed with exit code 1.\n</code></pre>\n\n<p>The odd part is that Jest says \"No tests found\" but also says \"testMatch: ... 38 matches\"</p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 4505, "user_id": 1956072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1bcd4bb9c114b7f5e3a0e8462fcded2?s=128&d=identicon&r=PG", "display_name": "kvetis", "link": "https://stackoverflow.com/users/1956072/kvetis"}, "is_accepted": false, "score": 1, "last_activity_date": 1566998948, "creation_date": 1566998948, "answer_id": 57693627, "question_id": 57693327, "link": "https://stackoverflow.com/questions/57693327/rxjs-withlatestfrom-precedence/57693627#57693627", "title": "rxjs: withLatestFrom precedence", "body": "<p>Use <code>combineLatest</code> utility function:</p>\n\n<pre><code>import { combineLatest } from 'rxjs';\nthis.app$ = combineLatest(this.inputApp$, this.scopes$).pipe(...);\n</code></pre>\n\n<p><code>combineLatest</code> emits only after all of the observables have emitted value and then every time any of them emits.</p>\n"}], "owner": {"reputation": 14794, "user_id": 3227319, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d0dfcc684d444bcbd4b48734230d5b11?s=128&d=identicon&r=PG&f=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/3227319/jordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566998948, "creation_date": 1566998095, "question_id": 57693327, "link": "https://stackoverflow.com/questions/57693327/rxjs-withlatestfrom-precedence", "title": "rxjs: withLatestFrom precedence", "body": "<p>I've coded an <code>Observable</code> using <code>withLatestFrom</code>:</p>\n\n<pre><code>this.scopes$ = service.getScopes();\n</code></pre>\n\n<p>Also, I've coded this another <code>Observable</code>:</p>\n\n<pre><code>@Component(...)\nexport class MyComponent {\n    @Input('app')\n    public set app(app: ApplicationUser) {\n        this._app = app;\n        this.inputApp$.next({...this._app});\n    };\n\n    constructor(...) {\n       this.inputApp$ = new BehaviorSubject&lt;ApplicationUser&gt;({...this._app});\n       this.app$ = this.inputApp$.pipe(this.digestAppPipe());\n    }\n}\n</code></pre>\n\n<p>where <code>digestAppPipe</code> is:</p>\n\n<pre><code>private digestAppPipe = () =&gt; pipe(\n    withLatestFrom(this.scopes$, anySelectFunction,\n    ...\n);\n</code></pre>\n\n<p>So, <code>app$</code> is a combination of <code>inputApp$ + scopes$</code> observables.</p>\n\n<p>The problem is that <code>inputApp$</code> emits before than <code>scopes$</code>, so the combination is never reached.</p>\n\n<p>Any ideas about how to solve that?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 4384, "user_id": 9321755, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJdCwK_eJfw/AAAAAAAAAAI/AAAAAAAAAUg/iwt-_10hlFE/photo.jpg?sz=128", "display_name": "Vaibhav Vishal", "link": "https://stackoverflow.com/users/9321755/vaibhav-vishal"}, "edited": false, "score": 0, "creation_date": 1566998486, "post_id": 57693271, "comment_id": 101830966, "body": "I don&#39;t think it emits an event."}], "answers": [{"tags": [], "owner": {"reputation": 1690, "user_id": 10104341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7326ce0b47203cf7bf776da128e5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Efst", "link": "https://stackoverflow.com/users/10104341/dimitris-efst"}, "is_accepted": false, "score": 0, "last_activity_date": 1566999560, "creation_date": 1566999560, "answer_id": 57693816, "question_id": 57693271, "link": "https://stackoverflow.com/questions/57693271/react-typescript-how-to-attach-an-event-listener-to-window-matchmedia/57693816#57693816", "title": "React TypeScript How to attach an event listener to window.matchMedia", "body": "<p><code>darkMode</code> is a state that has <code>type</code> value if I understand correctly. And if it is not it should be in state in order to manipulate it. The type e.matches returns is a Boolean as you see. So, you need to change the <code>darkMode</code> type to Boolean..</p>\n\n<p>And setState, base on the condition. I do not have the complete code so, I will not make guesses. If you paste more code samples I can help more..</p>\n"}, {"comments": [{"owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 0, "creation_date": 1567004770, "post_id": 57693953, "comment_id": 101834852, "body": "I still get the same error <code>Type &#39;true&#39; is not assignable to type &#39;MediaQueryList&#39;.</code> the error comes on darkMode in `    if (e.matches) {       darkMode = true;     } else {       darkMode = false;     }`"}, {"owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "reply_to_user": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 0, "creation_date": 1567006755, "post_id": 57693953, "comment_id": 101836053, "body": "DarkMode points to window.watchMedia. You can not assign true false to it. Check for your key"}, {"owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "reply_to_user": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "edited": false, "score": 1, "creation_date": 1567007223, "post_id": 57693953, "comment_id": 101836316, "body": "you have to make showHide as part of the component state. something like const [showHide] = React.useState(0); then use it"}], "tags": [], "owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "is_accepted": true, "score": 0, "last_activity_date": 1566999962, "creation_date": 1566999962, "answer_id": 57693953, "question_id": 57693271, "link": "https://stackoverflow.com/questions/57693271/react-typescript-how-to-attach-an-event-listener-to-window-matchmedia/57693953#57693953", "title": "React TypeScript How to attach an event listener to window.matchMedia", "body": "<p>You are adding eventListener on matches, which is boolean. You have to do it like below code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var darkMode = window.matchMedia('(prefers-color-scheme: dark)');\r\n\r\ndarkMode.addEventListener( \"change\", (e) =&gt; {\r\n    if (e.matches) {\r\n    //Perform your action for dark\r\n  } else {\r\n    //Perform other action\r\n  }\r\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 2574, "user_id": 1019893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0c00e9f987c3cfaff25903330f06e9e?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1019893/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "accepted_answer_id": 57693953, "answer_count": 2, "score": 0, "last_activity_date": 1567008065, "creation_date": 1566997910, "last_edit_date": 1567008065, "question_id": 57693271, "link": "https://stackoverflow.com/questions/57693271/react-typescript-how-to-attach-an-event-listener-to-window-matchmedia", "title": "React TypeScript How to attach an event listener to window.matchMedia", "body": "<p>When the react page loads it detects if the user has set dark mode in their operating system </p>\n\n<pre><code>const darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\n</code></pre>\n\n<p>and then renders one of two images depending on the result</p>\n\n<pre><code>import logoDark from '../images/logoDark.svg';\nimport logoLight from '../images/logoLight.svg';\n\n&lt;img src={darkMode ? logoDark : logoLight} /&gt;\n</code></pre>\n\n<p>But if the user changes mode after the page has loaded the image isn't updated, how do I add an event listener to window.matchMedia ? </p>\n\n<p>I have tried with..</p>\n\n<pre><code>  darkMode.addEventListener( \"change\", (e) =&gt; {\n    darkMode = e.matches;\n    console.log(e.matches) // true / false\n  });\n</code></pre>\n\n<p>but I get the error <code>Type 'boolean' is not assignable to type 'MediaQueryList'.ts(2322)</code></p>\n\n<p><strong>UDATE</strong>: Working Code</p>\n\n<pre><code>import React, {useContext} from \"react\";\nimport Context from '../components/context';\nimport logoDark from '../images/logoDark.svg';\nimport logoLight from '../images/logoLight.svg';\n\nconst Home: React.FC = () =&gt; {\n  const darkMode = window.matchMedia('(prefers-color-scheme: dark)');   \n  darkMode.addEventListener( \"change\", (e) =&gt; {\n    if (e.matches) {\n      setGlobal({...global, mode: true})\n    } else {\n      setGlobal({...global, mode: false})\n    }\n  });\n  return (\n  &lt;img src={global.mode ? logoDark : logoLight} /&gt;\n}\n\nexport default Home;\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 108213, "user_id": 27423, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CoNYx.jpg?s=128&g=1", "display_name": "Daniel Earwicker", "link": "https://stackoverflow.com/users/27423/daniel-earwicker"}, "is_accepted": false, "score": 0, "last_activity_date": 1566997793, "creation_date": 1566997793, "answer_id": 57693232, "question_id": 57692983, "link": "https://stackoverflow.com/questions/57692983/case-insensitive-dictionary-in-typescript/57693232#57693232", "title": "Case insensitive dictionary in TypeScript", "body": "<p>This is not possible. A plain JS object with dynamically added properties is not really a general purpose dictionary anyway. The true equivalent in JS is the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\" rel=\"nofollow noreferrer\">Map</a>, but that also <a href=\"https://2ality.com/2015/01/es6-maps-sets.html\" rel=\"nofollow noreferrer\">does not support replacing the comparison operator</a> for keys.</p>\n\n<p>Your approach is probably the best option. You can formalise it by wrapping the storage (your plain JS object or a <code>Map</code>) inside a wrapper object that ensures all operations using keys will make them lowercase before performing comparisons or lookups.</p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 3, "last_activity_date": 1567004307, "creation_date": 1567004307, "answer_id": 57695247, "question_id": 57692983, "link": "https://stackoverflow.com/questions/57692983/case-insensitive-dictionary-in-typescript/57695247#57695247", "title": "Case insensitive dictionary in TypeScript", "body": "<p>At runtime you can get fairly close to what you're asking for using a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\" rel=\"nofollow noreferrer\"><code>Proxy</code></a>.  </p>\n\n<p>TypeScript can't do much to help with strongly typing the keys past just <code>string</code>, since the type system does not have the ability to represent the effect of string operations on <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types\" rel=\"nofollow noreferrer\">string literal types</a>.  So if you wanted an object with <code>keystring</code> as a known key, the compiler would have no idea that <code>KEYSTRING</code> was also a known key.  There are suggestions for manipulating string literal types, such as <a href=\"https://github.com/microsoft/TypeScript/issues/6579\" rel=\"nofollow noreferrer\">using regular expressions on them</a>, but nothing is currently part of the language.  Luckily for you, I think, you're asking for a dictionary type, which usually means the keys are just <code>string</code>.  As long as you don't expect the compiler to keep track of valid keys for you, you'll be okay.</p>\n\n<p>Here's a possible implementation of using a <code>Proxy</code>.  Note that I haven't completely tested every possible edge case, but the basic idea is to get in the way of everything that accepts a property key and replace it with a canonical version: </p>\n\n<pre><code>function dictWithCanonicalKeys&lt;V&gt;(canon: (prop: keyof any) =&gt; keyof any) {\n  return new Proxy&lt;{ [k: string]: V }&gt;(\n    {},\n    {\n      get(target, prop) {\n        return Reflect.get(target, canon(prop));\n      },\n      set(target, prop, value) {\n        return Reflect.set(target, canon(prop), value);\n      },\n      has(target, prop) {\n        return Reflect.has(target, canon(prop));\n      },\n      defineProperty(target, prop, attribs) {\n        return Reflect.defineProperty(target, canon(prop), attribs);\n      },\n      deleteProperty(target, prop) {\n        return Reflect.deleteProperty(target, canon(prop));\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return Reflect.getOwnPropertyDescriptor(target, canon(prop));\n      }\n    }\n  );\n}\n</code></pre>\n\n<p>And let's use it, passing in a canonicalizing function that converts the key to lowercase (if it's a <code>string</code>, that is... it leaves <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\" rel=\"nofollow noreferrer\"><code>symbol</code></a> keys alone):</p>\n\n<pre><code>const dict = dictWithCanonicalKeys&lt;number | undefined&gt;(\n  p =&gt; (typeof p === \"string\" ? p.toLowerCase() : p)\n);\n\ndict.keyString = 1;\nconsole.log(dict.KEYSTRING); // 1\ndict.KEYstring = \"two\"; // error! \"two\" is not a number\ndict.KEYstring = 2; \nconsole.log(dict.keyStrinG); // 2\nconsole.log(JSON.stringify(dict)); // {\"keystring\": 2};\nconsole.log(\"KeyString\" in dict); // true\nObject.keys(dict).forEach(k =&gt; console.log(k + \":\" + dict[k])); // keystring:2\n</code></pre>\n\n<p>That all looks reasonable to me.  </p>\n\n<hr>\n\n<p>Finally, a caveat: you should be careful introducing things like this to your code.  It would be quite surprising to most developers to find that their supposedly plain objects have case-insensitive keys (<code>console.log(Object.keys(dict).indexOf(\"keyString\")); // -1?!</code>), and even if you can explain it to developers, their IDEs will not understand and might flag a key that differs in case from an expected one  (e.g., <code>KeyString</code>) as an error.   If you're doing this to deal with user input, it might be cleaner to just define strict barriers where the input is allowed into your program, and canonicalize the case there, so the dictionary can be blissfully unaware and be implemented as a plain object.  </p>\n\n<p>Of course, only you know your use case, and maybe a case-insensitive dictionary-like object is the right choice.  If so, I hope the above code helps you.  Good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/?jsx=1#code/GYVwdgxgLglg9mABAExtA6jKALAwgQzATXwBsBpAUwE8BnAHgDUA+ACgkIQC5FWAHAE5w+PANY04wRIWoBKRAF5micdUnSwcxAG8AUIkQDKUEAKRhKAd0QAFIQA9q9bYgDaonrSgCYYAOYAujyMiAC+bPoGOqEANJEGelFRfsasUPgCKVAxiILC8olJUUYmZogASpTApJTQAHRZaRlZORxEYPxCfLKyANzxUbEDBrSp6ZnGOXl8OQBuZCCUBcPFxqZIldW1UHWjUE0T2YhtCJ35cwtL-UVhcTfY+LQHLbldyzcGJesVVTX1D09xi8Th1pj1rkUhjdkFVfJQ7MJKAIoNRnpNXsIcvgoN4YAAjWjvD5fMqbP47GHAOEIvhIlFoo4gs7dLE4nwEvorKFFGE1KDwrp01FA9FgnQrT5rUm-bZ1XnGAWI5HC5roplgzk3blJLIAeUsYBpQoAIpRaBAfHwoHABAypm9xR9DFKNjL6nqDUblabzZbrbaRYzOKC3prIQNQpFOZHdBAEF4UGgoIpExgsHhgyQKDQGGAQABbPFIxAAH0Q4EpcOQEQMfEUyjS1Fp6jrCjbiAARF4fP4O4gAPy5OrWgAycEsSIIo1Y8h43V0nN0qHqqgAyrj-CmAIz9ONgWhwGp1UhwPysZc7cgAUQAmquACrlACSADkAOJ9RAAei-iC3S6TOprxvbtfD8FMOygSw4A7Xpv1-JEhAEABCTsoJgxAYFoRAiGTfAcILIsBAA+pgNAzcFEQAAmODY3jQ9KGPU9z0AtcNw-OCf2ouj9wYpizwAKVXXUX12Dc-BgYBUQvcF4J0DtVHIvwOx4KjQl3eijxPM8Oyoah1x7ZTMKQGTON-bxFl0XU8QAK1lRSWOgWQ6mAG0r3wCBsFYUR62OTTGO07zEAAak7Lg+1Ci93ACWSuMU8SuCo3QeIPLTmOsuyVxzRyoGc3wYXsXVgFYBSaAMsCO1i38AFot37ZDkqAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 400, "user_id": 1568195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c38ba4b5bf03d27c02577bafffbb5c?s=128&d=identicon&r=PG&f=1", "display_name": "LeBavarois", "link": "https://stackoverflow.com/users/1568195/lebavarois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 57695247, "answer_count": 2, "score": 0, "last_activity_date": 1567004307, "creation_date": 1566997044, "question_id": 57692983, "link": "https://stackoverflow.com/questions/57692983/case-insensitive-dictionary-in-typescript", "title": "Case insensitive dictionary in TypeScript", "body": "<p>In C# there is the possibility to create case insensitive dictionaries (for keys of type string) using the <code>StringComparer</code>:</p>\n\n<pre><code>Dictionary&lt;string, int&gt; dict = new Dictionary&lt;string, int&gt;(StringComparer.OrdinalIgnoreCase);\n</code></pre>\n\n<p>I am looking for the same functionality in TypeScript, but searching online, it looks as if this is not built into TypeScript yet.</p>\n\n<p>As a workaround I am currently using <code>toLowerCase()</code> everywhere in my code where I add values to or read values from the dictionary. However this is prone to errors and I am looking for a better solution.</p>\n\n<p>Example:\nAfter adding a value</p>\n\n<pre><code>dict = {};\ndict['keystring'] = 1;\n</code></pre>\n\n<p>I want to be able to access it using <code>dict['keystring]</code> or <code>dict['KEYSTRING']</code> without worrying about correct casing. What is the recommended approach to solve this in TypeScript?</p>\n"}, {"tags": ["angular", "typescript", "angular-services"], "comments": [{"owner": {"reputation": 131158, "user_id": 266143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/487f6927f37c3005e5b918d131892715?s=128&d=identicon&r=PG", "display_name": "CodeCaster", "link": "https://stackoverflow.com/users/266143/codecaster"}, "edited": false, "score": 0, "creation_date": 1566997211, "post_id": 57692841, "comment_id": 101830161, "body": "You should initialize <code>sensorObject</code> with a value. You need to define a class that implements this interface. You then instantiate an object of this class, for example in your service&#39;s constrictor, or you use dependency injection to assign it."}, {"owner": {"reputation": 1592, "user_id": 10754437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQ20TT_LpsQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hAKkgUh4-8Hy8fUoI1tRFx-xHxVA/mo/photo.jpg?sz=128", "display_name": "Ruud Verhoef", "link": "https://stackoverflow.com/users/10754437/ruud-verhoef"}, "reply_to_user": {"reputation": 131158, "user_id": 266143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/487f6927f37c3005e5b918d131892715?s=128&d=identicon&r=PG", "display_name": "CodeCaster", "link": "https://stackoverflow.com/users/266143/codecaster"}, "edited": false, "score": 0, "creation_date": 1566997475, "post_id": 57692841, "comment_id": 101830330, "body": "That&#39;s how I was told to use interfaces in a conventional way as well. But from what I understand Angular uses them to make binding to properties more easy. Declaring a variable of that interface type makes it possible to do stuff like sensorObject.sensor1.push(1). In short the variable implements the interface and you do not need an entire class."}, {"owner": {"reputation": 1311, "user_id": 5591211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dq1iO.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5591211/rich"}, "edited": false, "score": 0, "creation_date": 1566998078, "post_id": 57692841, "comment_id": 101830697, "body": "Right, but you can&#39;t define default values for members in an interface. You need to either create a class that implements the interface, which provides the default, or you need to provide the default values when instantiating the variable."}], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 10754437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQ20TT_LpsQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hAKkgUh4-8Hy8fUoI1tRFx-xHxVA/mo/photo.jpg?sz=128", "display_name": "Ruud Verhoef", "link": "https://stackoverflow.com/users/10754437/ruud-verhoef"}, "edited": false, "score": 0, "creation_date": 1566997611, "post_id": 57692910, "comment_id": 101830419, "body": "I am trying to prevent the use of Classes here. I was thinking the same about it as your second option but did not want to pollute the space I am declaring all attributes in. Guess I could also just put the instantiation in a function and call that before I need the variable."}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "reply_to_user": {"reputation": 1592, "user_id": 10754437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQ20TT_LpsQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hAKkgUh4-8Hy8fUoI1tRFx-xHxVA/mo/photo.jpg?sz=128", "display_name": "Ruud Verhoef", "link": "https://stackoverflow.com/users/10754437/ruud-verhoef"}, "edited": false, "score": 0, "creation_date": 1566997773, "post_id": 57692910, "comment_id": 101830517, "body": "You can do it as a one liner just like the other answer if you don&#39;t want a class but it gets annoying quickly if you have to build the whole object just to add default value every time you want to use it."}], "tags": [], "owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "is_accepted": false, "score": 2, "last_activity_date": 1566996766, "creation_date": 1566996766, "answer_id": 57692910, "question_id": 57692841, "link": "https://stackoverflow.com/questions/57692841/angular-variable-undefined/57692910#57692910", "title": "Angular - variable undefined", "body": "<p>Use a class if you want to have a default value. Otherwise, do something like that:</p>\n\n<pre><code>sensorObject.sensor1 = [];\nsensorObject.sensor2 = [];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1592, "user_id": 10754437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQ20TT_LpsQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hAKkgUh4-8Hy8fUoI1tRFx-xHxVA/mo/photo.jpg?sz=128", "display_name": "Ruud Verhoef", "link": "https://stackoverflow.com/users/10754437/ruud-verhoef"}, "edited": false, "score": 1, "creation_date": 1566997700, "post_id": 57692911, "comment_id": 101830473, "body": "Trying to keep the space I use for declaring attributes as clean as possible. I just realized I could still use this technique by moving the instantiation to a function and call that before I use it."}], "tags": [], "owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1566996767, "creation_date": 1566996767, "answer_id": 57692911, "question_id": 57692841, "link": "https://stackoverflow.com/questions/57692841/angular-variable-undefined/57692911#57692911", "title": "Angular - variable undefined", "body": "<p>You can simply instantiate the object:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>private sensorObject: objectWithSensors = {\n  sensor1: [],\n  sensor2: []\n}\n</code></pre>\n"}], "owner": {"reputation": 1592, "user_id": 10754437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQ20TT_LpsQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hAKkgUh4-8Hy8fUoI1tRFx-xHxVA/mo/photo.jpg?sz=128", "display_name": "Ruud Verhoef", "link": "https://stackoverflow.com/users/10754437/ruud-verhoef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566996767, "creation_date": 1566996541, "question_id": 57692841, "link": "https://stackoverflow.com/questions/57692841/angular-variable-undefined", "title": "Angular - variable undefined", "body": "<p>I am writing a service but am encountering a problem. </p>\n\n<p>The service contains a variable that is implementing an interface. When the service is first created the variable holds the value of undefined. </p>\n\n<p>To explain it with less code I came up with the following example.</p>\n\n<p>This is an interface.</p>\n\n<pre><code>interface objectWithSensors {\n  sensor1: number[];\n  sensor2: number[];\n}\n</code></pre>\n\n<p>The service has a varaible of this type declared as:</p>\n\n<pre><code>private sensorObject: objectWithSensors;\n</code></pre>\n\n<p>At this point in time this object is undefined.</p>\n\n<p>Is there a way to define it at this point (put an object in there that I can later modify) or should I change the interface to a class with public attributes?</p>\n"}, {"tags": ["postgresql", "typescript", "nestjs", "typeorm"], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 11562430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yHPvs.jpg?s=128&g=1", "display_name": "RalphJS", "link": "https://stackoverflow.com/users/11562430/ralphjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1566998888, "creation_date": 1566998888, "answer_id": 57693603, "question_id": 57692838, "link": "https://stackoverflow.com/questions/57692838/typeorm-doesnt-save-entity-with-its-relation-on-update/57693603#57693603", "title": "TypeOrm doesn&#39;t save entity with it&#39;s relation on update", "body": "<p>Doing that kind of update on sql is quite complicated and even with queryBuilder TypeORM doesn't support join updates (you can see it <a href=\"https://github.com/typeorm/typeorm/issues/564\" rel=\"nofollow noreferrer\">here</a>). The relation selector is quite helpfull but I would advise you to use it when its really necesary and add a nullable field to get the Ids of the address and obtain the address on separate it makes the things a lot easier in cases you need to change that relation lets say when you want to change the whole address object. this would be the result in the relations:</p>\n\n<pre><code>@Entity({name: 'accounts'})\nexport class Account {\n\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ nullable: true })\n  address_id: string;\n\n  @OneToOne(type =&gt; Address, address =&gt; address.id)\n  @JoinColumn({name: 'address_id'})\n  address: Address;\n\n  @Column()\n  name: string;\n}\n</code></pre>\n\n<p>And you can keep calling the relation as you did before with:</p>\n\n<pre><code>public async getAccountByAccountIdWithRelations(accountId: string): Promise&lt;Account&gt; {\n    return await this.findOneOrFail({id: accountId}, {relations: ['address']});\n  }\n</code></pre>\n\n<p>Using this aproach would keep inserting and updating easy and it works also in the oneToMany => manyToOne Relations too</p>\n"}, {"comments": [{"owner": {"reputation": 2808, "user_id": 11805688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZ1Zb.png?s=128&g=1", "display_name": "atymic", "link": "https://stackoverflow.com/users/11805688/atymic"}, "edited": false, "score": 0, "creation_date": 1567037610, "post_id": 57694439, "comment_id": 101846558, "body": "Can you add some more context around your answer?"}, {"owner": {"reputation": 1693, "user_id": 6750581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4ce77cf710ef819c66b1f37f3491e1?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/6750581/tano"}, "reply_to_user": {"reputation": 2808, "user_id": 11805688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZ1Zb.png?s=128&g=1", "display_name": "atymic", "link": "https://stackoverflow.com/users/11805688/atymic"}, "edited": false, "score": 0, "creation_date": 1567061177, "post_id": 57694439, "comment_id": 101851629, "body": "I&#39;ve added a complete example"}, {"owner": {"reputation": 705, "user_id": 1609248, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/71cca5c2d212a48636df57486cf96595?s=128&d=identicon&r=PG", "display_name": "Ben Beri", "link": "https://stackoverflow.com/users/1609248/ben-beri"}, "edited": false, "score": 0, "creation_date": 1567067102, "post_id": 57694439, "comment_id": 101854591, "body": "That&#39;s right, cascade makes it delete and save recursive, thanks!"}], "tags": [], "owner": {"reputation": 1693, "user_id": 6750581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4ce77cf710ef819c66b1f37f3491e1?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/6750581/tano"}, "is_accepted": true, "score": 1, "last_activity_date": 1567061142, "last_edit_date": 1567061142, "creation_date": 1567001592, "answer_id": 57694439, "question_id": 57692838, "link": "https://stackoverflow.com/questions/57692838/typeorm-doesnt-save-entity-with-its-relation-on-update/57694439#57694439", "title": "TypeOrm doesn&#39;t save entity with it&#39;s relation on update", "body": "<p>The cascade should be set. Here is an example of mine entities:</p>\n\n<pre><code>@Entity()\n@Index([ 'studyId', 'teamId', 'enterdate' ])\nexport class DataMessage extends BaseEntity {\n    @PrimaryGeneratedColumn('increment') id: number;\n\n    @CreateDateColumn() enterdate: Date;\n    @UpdateDateColumn({ select: false })\n    updatedAt?: Date;\n    @Column() owner: string;\n    @Column() studyId: number;\n    @Column() teamId: number;\n    @Column() patient: string;\n    @Column() orderId: number;\n    @Column({ default: DataMessageStatus.OPEN })\n    status: DataMessageStatus;\n\n    @Column()\n    @Index()\n    resultId: number;\n\n    @OneToMany(() =&gt; DataMessageContent, (c) =&gt; c.message, { cascade: true })\n    contents: DataMessageContent[];\n}\n\n@Entity()\nexport class DataMessageContent extends BaseEntity {\n    @PrimaryGeneratedColumn('increment') id: number;\n\n    @CreateDateColumn() enterdate: Date;\n    @Column() owner: string;\n    @Column() role: UserRole;\n    @Column({ default: MessageStatus.UNREAD })\n    status: MessageStatus;\n\n    @Column() txt: string;\n\n    @ManyToOne(() =&gt; DataMessage, (m) =&gt; m.contents)\n    message: DataMessage;\n}\n</code></pre>\n\n<p>This should also work for onetoone relation as well.</p>\n"}], "owner": {"reputation": 705, "user_id": 1609248, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/71cca5c2d212a48636df57486cf96595?s=128&d=identicon&r=PG", "display_name": "Ben Beri", "link": "https://stackoverflow.com/users/1609248/ben-beri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8060, "favorite_count": 0, "accepted_answer_id": 57694439, "answer_count": 2, "score": 3, "last_activity_date": 1567061142, "creation_date": 1566996531, "question_id": 57692838, "link": "https://stackoverflow.com/questions/57692838/typeorm-doesnt-save-entity-with-its-relation-on-update", "title": "TypeOrm doesn&#39;t save entity with it&#39;s relation on update", "body": "<p>Given the following relation:</p>\n\n<pre><code>@Entity({name: 'accounts'})\nexport class Account {\n\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @OneToOne(type =&gt; Address, address =&gt; address.id)\n  @JoinColumn({name: 'address_id'})\n  address: Address;\n\n  @Column()\n  name: string;\n}\n</code></pre>\n\n<p>And the addres relation:</p>\n\n<pre><code>@Entity({name: 'addresses'})\nexport class Address {\n\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({length: 45})\n  country: string;\n}\n</code></pre>\n\n<p>When I get the <code>account</code> entity by this:</p>\n\n<pre><code>  /**\n   * Gets account by haccount ID with ALL relations\n   * @param accountId The account ID\n   */\n  public async getAccountByAccountIdWithRelations(accountId: string): Promise&lt;Account&gt; {\n    return await this.findOneOrFail({id: accountId}, {relations: ['address']});\n  }\n</code></pre>\n\n<p>I get the full <code>Account</code> entity with the <code>Address</code> relation in it.</p>\n\n<p>And then when I do the following:</p>\n\n<pre><code>account.address.country = 'newcountry';\n</code></pre>\n\n<p>and do <code>this.save(account)</code> in <code>accountRepository</code> the address won't update at all!</p>\n\n<p><em>When I do console log before the save, I see the <code>account</code> entity with the updated address, so this is something really strange!</em></p>\n\n<p>Why is it happening?</p>\n\n<p><strong>Note: All queries are done in a transaction; I dont know if it matters</strong></p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular7", "angular-routing"], "comments": [{"owner": {"reputation": 191, "user_id": 7635755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69bb7426f20a84da51914f735b1b89d7?s=128&d=identicon&r=PG&f=1", "display_name": "kyselm", "link": "https://stackoverflow.com/users/7635755/kyselm"}, "edited": false, "score": 0, "creation_date": 1598516341, "post_id": 57692735, "comment_id": 112486005, "body": "I think you are talking about PATH parameter, not QUERY parameter. If you are trying to pass path param, MuruGan&#39;s answer is the right one and url will look like &#39;/dashboard/ProjectShipment/634&#39;. But if we are talking about query parameters, then Miguel Pinto&#39;s answer is the right one and the url will look smth like &#39;/dashboard/ProjectShipment?prj=634&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "edited": false, "score": 0, "creation_date": 1566996755, "post_id": 57692867, "comment_id": 101829896, "body": "Do I still use &#39;/634&#39; in the navigate() ?"}, {"owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "reply_to_user": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "edited": false, "score": 0, "creation_date": 1566996854, "post_id": 57692867, "comment_id": 101829970, "body": "no need. You can now get value from router param and load data for that id using your service."}, {"owner": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "edited": false, "score": 0, "creation_date": 1566996997, "post_id": 57692867, "comment_id": 101830057, "body": "You answer has /634"}, {"owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "reply_to_user": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "edited": false, "score": 0, "creation_date": 1566997141, "post_id": 57692867, "comment_id": 101830125, "body": "modified my answer."}, {"owner": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "edited": false, "score": 0, "creation_date": 1566997338, "post_id": 57692867, "comment_id": 101830235, "body": "I get error like <code>ERROR Error: Uncaught (in promise): Error: Cannot match any routes. URL Segment: &#39;dashboard&#47;ProjectShipment;reportProject=027121&#39;</code>"}, {"owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "reply_to_user": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "edited": false, "score": 0, "creation_date": 1566997500, "post_id": 57692867, "comment_id": 101830348, "body": "remove dashboard.from path."}], "tags": [], "owner": {"reputation": 297, "user_id": 5464033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QsLCTm8TyGg/AAAAAAAAAAI/AAAAAAAAC3U/iw0lkfpkb8g/photo.jpg?sz=128", "display_name": "Mahendra Pratap", "link": "https://stackoverflow.com/users/5464033/mahendra-pratap"}, "is_accepted": false, "score": -2, "last_activity_date": 1566997551, "last_edit_date": 1566997551, "creation_date": 1566996627, "answer_id": 57692867, "question_id": 57692735, "link": "https://stackoverflow.com/questions/57692735/passing-query-parameter-by-using-navigatebyurl/57692867#57692867", "title": "Passing query parameter by using navigateByUrl()", "body": "<p>You can do it like below code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>this.router.navigate(['/ProjectShipment', { reportProject: this.prj }]);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 1412, "user_id": 196931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2249c403edf66fc71750f5fdfeecb253?s=128&d=identicon&r=PG", "display_name": "Ignacio Lago", "link": "https://stackoverflow.com/users/196931/ignacio-lago"}, "edited": false, "score": 3, "creation_date": 1581585525, "post_id": 57692896, "comment_id": 106487136, "body": "It is worth to comment that your answer seems right if you read the documentation, but it is wrong: <code>navigateByUrl</code> ignores those <code>NavigationExtras</code>. Related issues requesting an update of Angular docs: <a href=\"https://github.com/angular/angular/issues/22668\" rel=\"nofollow noreferrer\">github.com/angular/angular/issues/22668</a>. and <a href=\"https://github.com/angular/angular/issues/18798\" rel=\"nofollow noreferrer\">github.com/angular/angular/issues/18798</a>"}], "tags": [], "owner": {"reputation": 475, "user_id": 5011810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd96049d00de5d48bbdaead4a47f79b2?s=128&d=identicon&r=PG&f=1", "display_name": "Chiffie", "link": "https://stackoverflow.com/users/5011810/chiffie"}, "is_accepted": false, "score": 0, "last_activity_date": 1566997302, "last_edit_date": 1566997302, "creation_date": 1566996705, "answer_id": 57692896, "question_id": 57692735, "link": "https://stackoverflow.com/questions/57692735/passing-query-parameter-by-using-navigatebyurl/57692896#57692896", "title": "Passing query parameter by using navigateByUrl()", "body": "<pre><code>// Set our navigation extras object\n// that passes on our global query params and fragment\nlet navigationExtras: NavigationExtras = {\n  queryParams: {...},\n  state: {...}\n};\n\n// Redirect the user\nthis.router.navigateByUrl(redirect, navigationExtras);\n</code></pre>\n\n<p><a href=\"https://angular.io/api/router/NavigationExtras\" rel=\"nofollow noreferrer\">NavigationExtras docs</a> </p>\n\n<p>EDIT: <a href=\"https://stackoverflow.com/a/44865817/5011818\">https://stackoverflow.com/a/44865817/5011818</a> this is also worth to look at</p>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 9902269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6ZmTZssvSsg/AAAAAAAAAAI/AAAAAAAADLU/7Uy5GEVFrHU/photo.jpg?sz=128", "display_name": "Miguel Pinto", "link": "https://stackoverflow.com/users/9902269/miguel-pinto"}, "is_accepted": false, "score": 7, "last_activity_date": 1567002918, "creation_date": 1567002918, "answer_id": 57694857, "question_id": 57692735, "link": "https://stackoverflow.com/questions/57692735/passing-query-parameter-by-using-navigatebyurl/57694857#57694857", "title": "Passing query parameter by using navigateByUrl()", "body": "<p>You can use 'router.navigate' instead 'router.navigateByUrl':</p>\n\n<pre><code>this.router.navigate([URL],{ queryParams: { id: this.prj });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 376, "user_id": 5607991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-90jWqQyKP9M/AAAAAAAAAAI/AAAAAAAAA7Q/hveXPU_MQ0k/photo.jpg?sz=128", "display_name": "afe", "link": "https://stackoverflow.com/users/5607991/afe"}, "edited": false, "score": 0, "creation_date": 1587457393, "post_id": 57695011, "comment_id": 108511554, "body": "what if prj is an object?"}, {"owner": {"reputation": 840, "user_id": 4264464, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/HjIyg.jpg?s=128&g=1", "display_name": "Karthic G", "link": "https://stackoverflow.com/users/4264464/karthic-g"}, "edited": false, "score": 0, "creation_date": 1608537546, "post_id": 57695011, "comment_id": 115604367, "body": "what can we specify the route.module.ts"}], "tags": [], "owner": {"reputation": 1172, "user_id": 6926744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/632624016899322/picture?type=large", "display_name": "MuruGan", "link": "https://stackoverflow.com/users/6926744/murugan"}, "is_accepted": true, "score": 4, "last_activity_date": 1567003541, "creation_date": 1567003541, "answer_id": 57695011, "question_id": 57692735, "link": "https://stackoverflow.com/questions/57692735/passing-query-parameter-by-using-navigatebyurl/57695011#57695011", "title": "Passing query parameter by using navigateByUrl()", "body": "<p>Simply use string interpolation</p>\n\n<pre><code>this.router.navigateByUrl(`/dashboard/ProjectShipment/${this.prj}`);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2385919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2be3ff2420692f1f94de0f5621fae30?s=128&d=identicon&r=PG", "display_name": "Shafqat Jan", "link": "https://stackoverflow.com/users/2385919/shafqat-jan"}, "is_accepted": false, "score": -1, "last_activity_date": 1589525881, "last_edit_date": 1589525881, "creation_date": 1589472637, "answer_id": 61802121, "question_id": 57692735, "link": "https://stackoverflow.com/questions/57692735/passing-query-parameter-by-using-navigatebyurl/61802121#61802121", "title": "Passing query parameter by using navigateByUrl()", "body": "<p><code>this.router.navigate(['/route1'], { variable1: \"Value\" });</code>\n<code>this.router.navigateByUrl('/route1', { variable1: \"Value\" });</code></p>\n\n<p>Please none: if your url is <code>urlencoded</code> use <code>navigateByUrl</code>, if your url is not <code>urlencoded</code> use <code>navigate</code></p>\n"}], "owner": {"reputation": 1767, "user_id": 2698249, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3877ca800f0ae02b2aa4a6aa0a5a3e38?s=128&d=identicon&r=PG&f=1", "display_name": "trx", "link": "https://stackoverflow.com/users/2698249/trx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9306, "favorite_count": 0, "accepted_answer_id": 57695011, "answer_count": 5, "score": 3, "last_activity_date": 1589525881, "creation_date": 1566996254, "question_id": 57692735, "link": "https://stackoverflow.com/questions/57692735/passing-query-parameter-by-using-navigatebyurl", "title": "Passing query parameter by using navigateByUrl()", "body": "<p>I am trying to Navigate to a new page on click of an icon and below is the code </p>\n\n<pre><code>  this.prj = e.data.project_number;\n  this.router.navigateByUrl('/dashboard/ProjectShipment/634');\n</code></pre>\n\n<p>Instead of this hardcoded query parameter <code>000634</code> I have to pass a <code>this.prj</code> in to it. My path is like below</p>\n\n<pre><code>const appRoutes: Routes = [\n  {\n  path: 'dB',\n  data: { title: 'Dashboard' },\n  children: [\n      {\n          path: 'ProjectShipment/:reportProject',\n          component: ProjectShipmentComponent,\n          data: { title: 'Project Shipment' },\n      }\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "react-select"], "answers": [{"comments": [{"owner": {"reputation": 1415, "user_id": 1439748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zHRqY.jpg?s=128&g=1", "display_name": "LCIII", "link": "https://stackoverflow.com/users/1439748/lciii"}, "edited": false, "score": 0, "creation_date": 1566997767, "post_id": 57693110, "comment_id": 101830513, "body": "I added <code>isSearchable={false}</code> but nothing changed."}, {"owner": {"reputation": 3432, "user_id": 7845022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312141912201749/picture?type=large", "display_name": "Andrii Golubenko", "link": "https://stackoverflow.com/users/7845022/andrii-golubenko"}, "reply_to_user": {"reputation": 1415, "user_id": 1439748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zHRqY.jpg?s=128&g=1", "display_name": "LCIII", "link": "https://stackoverflow.com/users/1439748/lciii"}, "edited": false, "score": 1, "creation_date": 1566998499, "post_id": 57693110, "comment_id": 101830972, "body": "@LCIII I have added an example"}, {"owner": {"reputation": 1415, "user_id": 1439748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zHRqY.jpg?s=128&g=1", "display_name": "LCIII", "link": "https://stackoverflow.com/users/1439748/lciii"}, "edited": false, "score": 0, "creation_date": 1566999244, "post_id": 57693110, "comment_id": 101831461, "body": "Thanks for all the help. I see that you&#39;ve disabled the menu, but I want the menu to be gone completely--equivalent to <code>{display: none}</code> for it."}, {"owner": {"reputation": 1415, "user_id": 1439748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zHRqY.jpg?s=128&g=1", "display_name": "LCIII", "link": "https://stackoverflow.com/users/1439748/lciii"}, "edited": false, "score": 0, "creation_date": 1566999673, "post_id": 57693110, "comment_id": 101831714, "body": "Sorry, in my previous comment when I said menu I meant to say <i>Input</i>. I still want the selectable list to display, but I want the input above it to disappear. So when a user clicks the elipsis they see only a selectable list appear without any input block."}, {"owner": {"reputation": 3432, "user_id": 7845022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312141912201749/picture?type=large", "display_name": "Andrii Golubenko", "link": "https://stackoverflow.com/users/7845022/andrii-golubenko"}, "reply_to_user": {"reputation": 1415, "user_id": 1439748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zHRqY.jpg?s=128&g=1", "display_name": "LCIII", "link": "https://stackoverflow.com/users/1439748/lciii"}, "edited": false, "score": 2, "creation_date": 1567000805, "post_id": 57693110, "comment_id": 101832436, "body": "@LCIII if you don&#39;t need a full <code>react-select</code> functionality, but just dropdown with options, it will be better to search for another library or write your own component. You are trying to import in your project big library with a lot of different functions and use one component that you could write quickly by yourself."}], "tags": [], "owner": {"reputation": 3432, "user_id": 7845022, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312141912201749/picture?type=large", "display_name": "Andrii Golubenko", "link": "https://stackoverflow.com/users/7845022/andrii-golubenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1566998400, "last_edit_date": 1566998400, "creation_date": 1566997397, "answer_id": 57693110, "question_id": 57692704, "link": "https://stackoverflow.com/questions/57692704/how-to-get-rid-of-input-box-on-react-select-dropdown/57693110#57693110", "title": "How to get rid of input box on react-select dropdown", "body": "<p>You didn't provide a code and example, so I suppose that you just want to remove an <code>input</code> that allows to search options in the <code>Select</code> component.\nFor this, you just need to add <a href=\"https://react-select.com/props#select-props\" rel=\"nofollow noreferrer\"><code>isSearchable</code></a> prop with <code>false</code> value.</p>\n\n<pre><code>&lt;Select\n  isSearchable={false}\n  ...\n/&gt;\n\n</code></pre>\n\n<p>Here is an <a href=\"https://codesandbox.io/s/react-select-5j2v4?from-embed\" rel=\"nofollow noreferrer\">example</a></p>\n"}], "owner": {"reputation": 1415, "user_id": 1439748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zHRqY.jpg?s=128&g=1", "display_name": "LCIII", "link": "https://stackoverflow.com/users/1439748/lciii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566999554, "creation_date": 1566996139, "last_edit_date": 1566999554, "question_id": 57692704, "link": "https://stackoverflow.com/questions/57692704/how-to-get-rid-of-input-box-on-react-select-dropdown", "title": "How to get rid of input box on react-select dropdown", "body": "<p><strong>What I want</strong>: A horizontal list of tabs at the top of my app with a little elipsis at the right end which, when clicked, displays a dropdown list display of the tabs. So if the tabs are 50 items long, the user can just click the dropdown. Clicking an item in the dropdown would have the equivalent behavior of clicking that tab.</p>\n\n<p><strong>What I have that works</strong>: Tabs are homebrewed and work fine. Elipsis displays the dropdown list fine (I am using <a href=\"https://react-select.com/home\" rel=\"nofollow noreferrer\">React-Select</a>) and the selection functionality all works.</p>\n\n<p><strong>The problem:</strong> When the user clicks the elipsis they see the selectable list of options, but between the elipsis and the selectable list is the menu input. <strong><em>I don't want that menu input and I want it gone completely from the screen.</em></strong></p>\n\n<p>I tried fudging around with the <a href=\"https://react-select.com/components\" rel=\"nofollow noreferrer\">components api</a> for React-Select, but I don't even know where to start because there isn't any example code that I've found and I don't know how to decipher the documentation on the site.</p>\n\n<p>What I got:</p>\n\n<pre><code>  &lt;Select\n    options={tabList}\n    menuIsOpen={openMenu}\n    defaultValue={blankOption}\n    closeMenuOnSelect\n    isSearchable={false}\n    onChange={option =&gt; handleChange(option)}\n  /&gt;\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-library", "ng-packagr"], "answers": [{"tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": true, "score": 6, "last_activity_date": 1566996216, "creation_date": 1566996216, "answer_id": 57692727, "question_id": 57692570, "link": "https://stackoverflow.com/questions/57692570/how-to-angular-library-divided-in-independent-feature-sub-libraries/57692727#57692727", "title": "HOW-TO: Angular library divided in independent feature sub libraries", "body": "<p>Angular already supports multiple <em>sub-libraries</em> out of the box.</p>\n\n<p>The default project structure contains an <em>\"app\"</em> application that is a regular Angular project, and then you add additional <em>sub-libraries</em> that are Angular Library projects. There are placed in the <code>library</code> sub-folder.</p>\n\n<p>A single Angular project can contain multiple <em>sub-library</em> projects.</p>\n\n<p>Each <em>sub-library</em> project can be published as a separate npm package, because they have their own <code>package.json</code> file.</p>\n\n<p>npm supports something called <a href=\"https://docs.npmjs.com/about-scopes\" rel=\"noreferrer\">scoped</a> package names. Which allows you to name a package as <code>@angular/core</code> where <code>@angular</code> is the scope of the package.</p>\n\n<p>You can add a scoped library to your current Angular project like this.</p>\n\n<pre><code>ng generate library @my-scope/my-library\n</code></pre>\n\n<p>When you import from a scoped project it must be prefixed with the scope.</p>\n\n<p>For example;</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { CommonService } from '@cool-lib/common';\nimport { FeatAComponent, FeatAService } from '@cool-lib/feature-a';\nimport { FeatBModule } from '@cool-lib/feature-b';\n</code></pre>\n\n<p>In the above, the name <code>@cool-lib</code> is the scope and <code>common</code> is the name of the npm package.</p>\n\n<p>Using scopes lets you do two basic things (as far as I'm aware).</p>\n\n<ol>\n<li>prevents name collision with other packages, for example <code>@cool-lib/animations</code> will not collide with <code>@angular/animations</code></li>\n<li>organizes packages into <code>node_modules/@cool-lib</code></li>\n</ol>\n"}], "owner": {"reputation": 4533, "user_id": 3023947, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/LnmhP.jpg?s=128&g=1", "display_name": "charliebrownie", "link": "https://stackoverflow.com/users/3023947/charliebrownie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 1, "closed_date": 1567010068, "accepted_answer_id": 57692727, "answer_count": 1, "score": 4, "last_activity_date": 1567000160, "creation_date": 1566995720, "last_edit_date": 1567000160, "question_id": 57692570, "link": "https://stackoverflow.com/questions/57692570/how-to-angular-library-divided-in-independent-feature-sub-libraries", "closed_reason": "Needs more focus", "title": "HOW-TO: Angular library divided in independent feature sub libraries", "body": "<p>I am currently developing an Angular library (in <em>Angular v</em> <strong>8.1.0</strong>) and wondering how is it possible to have it <em>\"split in different sub-libraries\"</em>?</p>\n\n<p>For example, Angular (<code>@angular</code>) is split somehow in different \"parts\" like:</p>\n\n<ul>\n<li><code>@angular/common</code></li>\n<li><code>@angular/core</code></li>\n<li><code>@angular/forms</code></li>\n<li>etc.</li>\n</ul>\n\n<p>and for instance, <code>@angular/common</code> has different sub-directories available to import from:</p>\n\n<ul>\n<li><code>@angular/common/http</code></li>\n<li><code>@angular/common/locale</code></li>\n<li><code>@angular/common/testing</code></li>\n</ul>\n\n<p>I am wondering how to do this kind of structuring in my own Angular library to keep different context elements independent one of each other. Let's say my library is called <code>cool-lib</code> and there are different feature modules which contain their own services/components/etc: <code>common</code>, <code>featureA</code>, <code>featureB</code>.</p>\n\n<p>I would like to achieve something like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { CommonService } from 'cool-lib/common';\nimport { FeatAComponent, FeatAService } from 'cool-lib/feature-a';\nimport { FeatBModule } from 'cool-lib/feature-b';\n</code></pre>\n\n<p>instead of having:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { \n  CommonService, \n  FeatAComponent, \n  FeatAService,\n  FeatBModule\n} from 'cool-lib';\n</code></pre>\n\n<p>and it even also would be nice to be able to independently bump version numbers of the different feature modules or simply having installed only those that are going to be needed without having to install the whole libary (let's say I only need <code>featureA</code>).</p>\n\n<p>For example, having on my <strong>package.json</strong>:</p>\n\n<pre><code>{\n  \"dependencies\": {\n    \"cool-lib/common\": \"1.0.0\",\n    \"cool-lib/feature-a\": \"1.0.0\",\n    \"cool-lib/feature-b\": \"1.3.0\"\n  }\n}\n</code></pre>\n\n<p>or just:</p>\n\n<pre><code>{\n  \"dependencies\": {\n    \"cool-lib/feature-a\": \"1.0.0\"\n  }\n}\n</code></pre>\n\n<p>instead of: </p>\n\n<pre><code>{\n  \"dependencies\": {\n    \"cool-lib\": \"1.0.0\"\n  }\n}\n</code></pre>\n\n<p>I have read a lot about creating Angular libraries so far, but couldn't find this specific use case as all of them cover just the very basics of creating and publishing them on npm... so any help on this is very welcomed!</p>\n"}, {"tags": ["angular", "typescript", "webpack"], "comments": [{"owner": {"reputation": 988, "user_id": 1931563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3MpO.png?s=128&g=1", "display_name": "AlokeT", "link": "https://stackoverflow.com/users/1931563/aloket"}, "edited": false, "score": 0, "creation_date": 1566997002, "post_id": 57692522, "comment_id": 101830060, "body": "Where do you put your json file?"}, {"owner": {"reputation": 3, "user_id": 11989123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6a753fc5b3a712038e4df831d1311c4?s=128&d=identicon&r=PG&f=1", "display_name": "Aryan", "link": "https://stackoverflow.com/users/11989123/aryan"}, "reply_to_user": {"reputation": 988, "user_id": 1931563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3MpO.png?s=128&g=1", "display_name": "AlokeT", "link": "https://stackoverflow.com/users/1931563/aloket"}, "edited": false, "score": 0, "creation_date": 1567067059, "post_id": 57692522, "comment_id": 101854573, "body": "json file is in root directory @AlokeT"}, {"owner": {"reputation": 988, "user_id": 1931563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3MpO.png?s=128&g=1", "display_name": "AlokeT", "link": "https://stackoverflow.com/users/1931563/aloket"}, "edited": false, "score": 0, "creation_date": 1567070026, "post_id": 57692522, "comment_id": 101856031, "body": "First you need to put it in assets folder. and then some code will help you to done the job. let me add it but remember this solution works on @ ng5+ hope works as well in @ ng4"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11989123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6a753fc5b3a712038e4df831d1311c4?s=128&d=identicon&r=PG&f=1", "display_name": "Aryan", "link": "https://stackoverflow.com/users/11989123/aryan"}, "edited": false, "score": 0, "creation_date": 1566999880, "post_id": 57692900, "comment_id": 101831835, "body": "I created a config.ts file but it doesn&#39;t work if AOT is enabled"}], "tags": [], "owner": {"reputation": 157, "user_id": 7425154, "user_type": "registered", "profile_image": "https://graph.facebook.com/810117669127554/picture?type=large", "display_name": "Satish Deokar", "link": "https://stackoverflow.com/users/7425154/satish-deokar"}, "is_accepted": false, "score": 0, "last_activity_date": 1566996725, "creation_date": 1566996725, "answer_id": 57692900, "question_id": 57692522, "link": "https://stackoverflow.com/questions/57692522/how-to-access-environment-variable-from-json-file-in-angular-4/57692900#57692900", "title": "How to access environment variable from JSON file in Angular 4?", "body": "<p>Instead of creating the .json file create the <code>appsettings.js</code> file and export the json configuration from file.</p>\n\n<pre><code>    //appsettings.js file\n    configValue = {\n    \"ExtraConf\": {\n        \"CDNPATH\": \"https://share-dev-cdn.test.net/\",\n        \"ICONPATH\": \"skin/icons/\",\n        \"APPLTITLE\": \"Title\"\n    },\n    \"Environments\": {\n        \"production\": false,\n        \"appInsights\": {\n            \"appkey\": \"0908776554\"\n        }\n    },\n    \"EnvironmentsProd\": {\n        \"production\": true,\n        \"appInsights\": {\n            \"appkey\": \"55678900\"\n        }\n    }\n}\nexports.configValue = configValue;\n</code></pre>\n\n<p>then import your appsettings.js file under the environment.ts file and asses configuration like this.</p>\n\n<pre><code>import * as config from './appsettings.js';\n\nexport const environment = configValue.Environments;\n</code></pre>\n\n<p>And For Production Like this.\n    //environment.prod.ts\n    import * as config from './appsettings.js';</p>\n\n<pre><code>export const environment = configValue.EnvironmentsProd;\n</code></pre>\n\n<p>Note: appsettings.js and environment.ts and environment.prod.ts is in the same folder otherwise you have to change the import path.</p>\n"}, {"tags": [], "owner": {"reputation": 988, "user_id": 1931563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3MpO.png?s=128&g=1", "display_name": "AlokeT", "link": "https://stackoverflow.com/users/1931563/aloket"}, "is_accepted": false, "score": 0, "last_activity_date": 1567144105, "creation_date": 1567144105, "answer_id": 57721119, "question_id": 57692522, "link": "https://stackoverflow.com/questions/57692522/how-to-access-environment-variable-from-json-file-in-angular-4/57721119#57721119", "title": "How to access environment variable from JSON file in Angular 4?", "body": "<p>You can try out this approach:</p>\n\n<blockquote>\n  <p>1: ConfigLoaderService:</p>\n</blockquote>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigLoaderService {\n\n  private config: Config;\n\n  constructor(private http: HttpClient) {\n    this.config = new Config();\n  }\n\n  public getConfigData(): Config {\n    return this.config;\n  }\n\n  load(): Promise&lt;any&gt; {\n    console.log(`getSettings:: before http.get call`);\n    const promise = this.http.get('../assets/myconfig.json', HttpOptions)\n      .toPromise()\n      .then((settings: Config) =&gt; {\n        this.config = settings;\n        return settings;\n      });\n\n    return promise;\n  }\n}\n</code></pre>\n\n<p>This <code>ConfigLoaderService</code> will load the settings from json on app startup.</p>\n\n<blockquote>\n  <p>2: ConfigModel:</p>\n</blockquote>\n\n<pre><code>export class Config {\n    [name: string]: any;\n}\n</code></pre>\n\n<p>This is a generic class will load anything from json as <strong>key-value</strong> pair.</p>\n\n<blockquote>\n  <p>3: AppMdoule:</p>\n</blockquote>\n\n<pre><code>... Your imports ...\nexport function configProviderFactory(provider: ConfigLoaderService) {\n  return () =&gt; provider.load();\n}\n@NgModule({\n.... Your all imports , declaration...\nproviders: [\n{ provide: APP_INITIALIZER, useFactory: configProviderFactory, deps: [ConfigLoaderService], multi: true },\n\n\n.... Your other providers ....\n  ],\n</code></pre>\n\n<p>So what happened here, You declare to angular that when app initialize it will first call the configLoaderService and load the config json file from assets and set in the config class which is accessible thorough out the application.\nNow you can access the models through this.</p>\n\n<pre><code>export class MyComponent implements OnInit {\n\n  private config: Config;\n\n  constructor(\n    configLoader: ConfigLoaderService,\n\n  ) {\n\n    this.config = configLoader.getConfigData();\n\n  }\n\n  ngOnInit() {\n    console.log(this.config['MY_URL']);\n    console.log(this.config.MY_URL);\n  }\n</code></pre>\n\n<p>Note: This will work in NG5+ but for Ng4 you need to change httpClient import.</p>\n"}], "owner": {"reputation": 3, "user_id": 11989123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6a753fc5b3a712038e4df831d1311c4?s=128&d=identicon&r=PG&f=1", "display_name": "Aryan", "link": "https://stackoverflow.com/users/11989123/aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2347, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567144105, "creation_date": 1566995552, "last_edit_date": 1567078309, "question_id": 57692522, "link": "https://stackoverflow.com/questions/57692522/how-to-access-environment-variable-from-json-file-in-angular-4", "title": "How to access environment variable from JSON file in Angular 4?", "body": "<p>I have one file \"appsettings.json\". It has configuration for some other purpose. I want to put variables from \"environment.ts\" and \"environment.prod.ts\" to this file and access inside environment files.</p>\n\n<p><strong>If I'm trying to import/require \"appsettings.json\" and use values it works in development mode but not in \"--prod\" with aot enabled. --prod --aot=false works fine</strong></p>\n\n<p>Error being thrown:\nERROR in Error encountered resolving symbol values statically. Reference to a local (non-exported) symbol 'json'. Consider exporting the symbol\n (position 3:5 in the original .ts file), resolving symbol CONFIG</p>\n\n<pre><code> \"ExtraConf\" : {\n    \"CDNPATH\": \"https://share-dev-cdn.test.net/\",\n    \"ICONPATH\":\"skin/icons/\",\n    \"APPLTITLE\":\"Title\"\n  },\n  \"Environments\" : {\n    \"production\": false,\n    \"appInsights\": {\n        \"appkey\":\"0908776554\"\n    }\n  },\n  \"EnvironmentsProd\" : {\n    \"production\": true,\n     \"appInsights\": {\n         \"appkey\":\"55678900\"\n    }\n  }\n\n\nenvironment.ts\ndeclare var require: any;\n\nvar json:any = require(\"../../appsettings.json\");\n\nexport const environment = json.Environments;\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "typescript", "optimization"], "comments": [{"owner": {"reputation": 8011, "user_id": 3049127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9ef44fca009f9f18ecaf67b5c53936?s=128&d=identicon&r=PG&f=1", "display_name": "Shilly", "link": "https://stackoverflow.com/users/3049127/shilly"}, "edited": false, "score": 1, "creation_date": 1566996426, "post_id": 57692473, "comment_id": 101829703, "body": "Could you explain in words what you are trying to calculate? It seems like you want to know if some values still exist, but that should be very easy by comparing the length of <code>res</code> and <code>idarray</code>. Hence could you explain the logic better? Since we can probably code this using array methods like <code>.forEach()</code>, <code>.filter()</code>, and <code>.find()</code>, making the whole a bit more readable."}, {"owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "reply_to_user": {"reputation": 8011, "user_id": 3049127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9ef44fca009f9f18ecaf67b5c53936?s=128&d=identicon&r=PG&f=1", "display_name": "Shilly", "link": "https://stackoverflow.com/users/3049127/shilly"}, "edited": false, "score": 0, "creation_date": 1566999291, "post_id": 57692473, "comment_id": 101831495, "body": "@Shilly Actually, array and idarray are based on the same level. But I was fetching id from front-end value while the array was from backend which I calculate the next item if id wasn&#39;t -1. If it was then I would fetch the next item. But as you can notice if idarray value was changed into:  [-1, 2, -1, -1, -1] and pos to 2 you would find that it&#39;s not returning the &quot;final index&quot; console since I need to recursively increase the + value in:  <code>if (res[i + 2] != undefined) {           console.log(&quot;Next = &quot; + res[i + 2]);</code> but I haven&#39;t managed to do so. I hope that was clear enough."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567005214, "post_id": 57692473, "comment_id": 101835109, "body": "@Shinjo I don&#39;t think you got the point. You&#39;re telling too much details while we have no clue what you try to achieve with the current code. We could try to reverse engineer your issue, but most people don&#39;t have the time or will to do this. Let me give you a short example: I have two arrays and are trying to find out if these arrays share any elements. I currently have the following code: ... My current issue is ..."}, {"owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567037711, "post_id": 57692473, "comment_id": 101846584, "body": "@3limin4t0r I&#39;m sorry m_m I&#39;ve added examples of what to expect when having certain values. And another attempt to iterate it."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567037945, "post_id": 57692473, "comment_id": 101846619, "body": "@Shinjo That&#39;s already a lot better. \ud83d\udc4d"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567038223, "post_id": 57692473, "comment_id": 101846658, "body": "Are the <code>idarray</code> and <code>array</code> always the same size?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567038848, "post_id": 57692473, "comment_id": 101846765, "body": "@Shinjo I&#39;ve added the intent of the code to the question. Can you check if this matches your requirements?"}, {"owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567043738, "post_id": 57692473, "comment_id": 101847580, "body": "@3limin4t0r Yes they are always the same size."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "edited": false, "score": 0, "creation_date": 1567037856, "post_id": 57695123, "comment_id": 101846600, "body": "Sorry if I wasn&#39;t being clear enough earlier m_m I&#39;ve added examples with another attempt on iterating. &quot;I want to check if any of the ids following the id corresponding with my value, is not -1 ?&quot; It&#39;s not. I want to check if the next item in data to search having -1 or not in the value and skip if do have -1 until found != = -1 or return &quot;final index&quot; if the next item doesn&#39;t have any leftover id with != -1."}, {"owner": {"reputation": 8011, "user_id": 3049127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9ef44fca009f9f18ecaf67b5c53936?s=128&d=identicon&r=PG&f=1", "display_name": "Shilly", "link": "https://stackoverflow.com/users/3049127/shilly"}, "reply_to_user": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "edited": false, "score": 0, "creation_date": 1567080610, "post_id": 57695123, "comment_id": 101861860, "body": "I don&#39;t see the difference. You want to keep checking ids until you found one that isn&#39;t -1, or &#39;final index&#39; if none are, since you mentioned the need to recursively check. I&#39;ve updated the shortest code a bit to return the value instead of the id or &quot;final index&quot;, but the algo is the same. For the longer code using objects, I only had to add <code>|| &quot;final index&quot;</code> to make it return final index if the length is 0. Your two extra examples both work with my code, so I do think both my codes are correct."}, {"owner": {"reputation": 8011, "user_id": 3049127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9ef44fca009f9f18ecaf67b5c53936?s=128&d=identicon&r=PG&f=1", "display_name": "Shilly", "link": "https://stackoverflow.com/users/3049127/shilly"}, "reply_to_user": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "edited": false, "score": 0, "creation_date": 1567081095, "post_id": 57695123, "comment_id": 101862135, "body": "<code>to make it return final index if the length is 0</code> should be <code>to make it return final index if no object is found</code>. And your value is inside <code>result.value</code> obviously."}, {"owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "edited": false, "score": 0, "creation_date": 1567129639, "post_id": 57695123, "comment_id": 101880569, "body": "Yeah. I&#39;ve upvoted both answer. It&#39;s just that I can&#39;t accept two answer at the same time."}], "tags": [], "owner": {"reputation": 8011, "user_id": 3049127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9ef44fca009f9f18ecaf67b5c53936?s=128&d=identicon&r=PG&f=1", "display_name": "Shilly", "link": "https://stackoverflow.com/users/3049127/shilly"}, "is_accepted": false, "score": 1, "last_activity_date": 1567080681, "last_edit_date": 1567080681, "creation_date": 1567003925, "answer_id": 57695123, "question_id": 57692473, "link": "https://stackoverflow.com/questions/57692473/how-to-keep-checking-array-until-certain-condition-is-met/57695123#57695123", "title": "How to keep checking array until certain condition is met", "body": "<p>Ok, I think I kind of understand the logic, but I'm not sure.\nIs the question: <code>I want to check if any of the ids following the id corresponding with my value, is not -1</code> ?</p>\n\n<p>Hope I understood the logic correctly.</p>\n\n<p>If you have no use for reusable functions, or don't care about structure, you can write this very short as well:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var pos = 0;\r\nvar idarray = [ -1, 2, -1, 4, -1 ];\r\nvar array = [ 3, 2, 1, 0, 7 ];\r\n\r\nvar get_result = ( array, idarray, pos, ex ) =&gt; {\r\n  const offset = array.indexOf( pos ) + 1;\r\n  return idarray\r\n    .slice( offset )\r\n    .reduce(( result, id, index ) =&gt; {\r\n      if ( result === \"final index\" &amp;&amp; id !== -1 ) result = array[ index + offset ];\r\n      return result;\r\n    }, \"final index\" );\r\n};\r\n\r\n// example 1:\r\nconst ex1_search_value = 0; // pos\r\nconst ex1_ids = [ -1, 2, -1, 4, -1 ]; // idarray\r\nconst ex1_values = [3, 2, 1, 0, 7]; // array\r\n// expect \"final index\", since our range will only contain the last id, which is -1\r\nconst result1 = get_result( ex1_values, ex1_ids, ex1_search_value );\r\nconsole.log( `expect final index, ${ result1 }` );\r\n\r\n// example2:\r\nconst ex2_search_value = 2;\r\nconst ex2_ids = [ -1, 2, -1, -1, -1 ];\r\nconst ex2_values = [3, 2, 1, 0, 7];\r\n// expect \"final index\", since our range is the last two items, both with id -1\r\nconst result2 = get_result( ex2_values, ex2_ids, ex2_search_value );\r\nconsole.log( `expect final index, ${ result2 }` );\r\n\r\n// example3:\r\nconst ex3_search_value = 2;\r\nconst ex3_ids =    [ -1, 2, -1, -1, -1, -1, -1, -1, -1, 3, -1,  2, -1, -1 ];\r\nconst ex3_values = [  3, 2,  1,  0,  7,  4,  9, 14, 74, 8, 45, 14, 17, 84 ];\r\n// expect { id: 3, value: 8 }\r\nconst result3 = get_result( ex3_values, ex3_ids, ex3_search_value );\r\nconsole.log( `expect 8, ${ result3 }` );\r\n\r\n// example4:\r\nconst ex4_search_value = 2;\r\nconst ex4_ids =    [-1, 2, -1, 4, 1];\r\nconst ex4_values = [ 3, 2,  1, 0, 7];\r\n// expect { id: 4, value: 0 }\r\nconst result4 = get_result( ex4_values, ex4_ids, ex4_search_value );\r\nconsole.log( `expect 0, ${ result4 }` );\r\n\r\n// example5:\r\nconst ex5_search_value = 2;\r\nconst ex5_ids =    [-1, 2, -1, -1, 1];\r\nconst ex5_values = [ 3, 2,  1,  0, 7];\r\n// expect { id: 1, value: 7 }\r\nconst result5 = get_result( ex5_values, ex5_ids, ex5_search_value );\r\nconsole.log( `expect 7, ${ result5 }` );\r\n\r\n// example6:\r\nconst ex6_search_value = 2;\r\nconst ex6_ids =    [-1, 2, -1, -1, -1];\r\nconst ex6_values = [ 3, 2,  1,  0,  7];\r\n// expect \"final index\"\r\nconst result6 = get_result( ex6_values, ex6_ids, ex6_search_value );\r\nconsole.log( `expect final index, ${ result6 }` );</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My other approach here is to merge the arrays into one array containing objects, so that we do not have to check for undefined values, while still being able to use array methods instead of plain loops. This would help if you have to use the id/value combinations alot in the code past this point. The functions are just there to make everything reusable.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Create an object from the id and value combinations.\r\nconst create_collection = ( ids, values ) =&gt; {\r\n  return ids.map(( id, index ) =&gt; ({\r\n    id,\r\n    value: values[ index ]\r\n  }));\r\n};\r\n\r\nconst has_valid_descendants = ( collection, search_value ) =&gt; {\r\n  // Find the index of the first item that has our requested value.\r\n  const search_index = collection.findIndex( item =&gt; item.value === search_value );\r\n  // Slice the relevant part from the collection.\r\n  // Since we will only look at records past the item ahving the search_value, we mights well only slice the relevant parts.\r\n  const collection_in_range = collection.slice( search_index + 1 );\r\n  // Find the first item in range has an id that is not -1.\r\n  return collection_in_range.find( item =&gt; item.id !== -1 ) || 'final index';\r\n};\r\n\r\n\r\n// example 1:\r\nconst ex1_search_value = 0; // pos\r\nconst ex1_ids = [ -1, 2, -1, 4, -1 ]; // idarray\r\nconst ex1_values = [3, 2, 1, 0, 7]; // array\r\n// Collection should be: [{ id: -1, value: 3 },{ id: 2, value: 2 },{ id: -1, value: 1 },{ id: 4, value: 0 },{ id: -1, value: 7 }];\r\nconst ex1_collection = create_collection( ex1_ids, ex1_values );\r\nconsole.log( ex1_collection );\r\n// Is there a valid next item?\r\n// expect \"final index\", since our range will only contain the last id, which is -1\r\nconst ex1_result = has_valid_descendants( ex1_collection, ex1_search_value );\r\nconsole.log( 'expect 1: \"final index\"' );\r\nconsole.log( `example 1: ${ JSON.stringify( ex1_result ) }` );\r\n\r\n\r\n// example2:\r\nconst ex2_search_value = 2;\r\nconst ex2_ids = [ -1, 2, -1, -1, -1 ];\r\nconst ex2_values = [3, 2, 1, 0, 7];\r\n// expect \"final index\", since our range is the last two items, both with id -1\r\nconst ex2_result = has_valid_descendants(\r\n  create_collection( ex2_ids, ex2_values ),\r\n  ex2_search_value\r\n);\r\nconsole.log( 'expect 2: \"final index\"' );\r\nconsole.log( `example 2: ${ JSON.stringify( ex2_result ) }` );\r\n\r\n\r\n// example3:\r\n// We add a bunch of other values and ids.\r\n// This proves it will work with longer arrays as well\r\n// and that the result is the first item without the id -1\r\nconst ex3_search_value = 2;\r\nconst ex3_ids =    [ -1, 2, -1, -1, -1, -1, -1, -1, -1, 3, -1,  2, -1, -1 ];\r\nconst ex3_values = [  3, 2,  1,  0,  7,  4,  9, 14, 74, 8, 45, 14, 17, 84 ];\r\n// expect { id: 3, value: 8 }\r\nconst ex3_result = has_valid_descendants(\r\n  create_collection( ex3_ids, ex3_values ),\r\n  ex3_search_value\r\n);\r\nconsole.log( 'expect 3: { id: 3, value: 8 }\"' );\r\nconsole.log( `example 3: ${ JSON.stringify( ex3_result ) }` );\r\n\r\n\r\n// example4:\r\n// Note: I've added || 'final index'; to the has_valid_descendants() function.\r\nconst ex4_search_value = 2;\r\nconst ex4_ids = [-1, 2, -1, 4, 1];\r\nconst ex4_values = [3, 2, 1, 0, 7];\r\n// expect { id: 4, value: 0 }\r\nconst ex4_result = has_valid_descendants(\r\n  create_collection( ex4_ids, ex4_values ),\r\n  ex4_search_value\r\n);\r\nconsole.log( 'expect 4: { id: 4, value: 0 }' );\r\nconsole.log( `example 4: ${ JSON.stringify( ex4_result ) }` );\r\n\r\n\r\n// example5:\r\n// Note: I've added || 'final index'; to the has_valid_descendants() function.\r\nconst ex5_search_value = 2;\r\nconst ex5_ids = [-1, 2, -1, -1, 1];\r\nconst ex5_values = [3, 2, 1, 0, 7];\r\n// expect { id: 1, value: 7 }\r\nconst ex5_result = has_valid_descendants(\r\n  create_collection( ex5_ids, ex5_values ),\r\n  ex5_search_value\r\n);\r\nconsole.log( 'expect 5: { id: 1, value: 7 }' );\r\nconsole.log( `example 5: ${ JSON.stringify( ex5_result ) }` );\r\n\r\n\r\n// example6:\r\n// Note: I've added || 'final index'; to the has_valid_descendants() function.\r\nconst ex6_search_value = 2;\r\nconst ex6_ids = [-1, 2, -1, -1, -1];\r\nconst ex6_values = [3, 2, 1, 0, 7];\r\n// expect \"final index\"\r\nconst ex6_result = has_valid_descendants(\r\n  create_collection( ex6_ids, ex6_values ),\r\n  ex6_search_value\r\n);\r\nconsole.log( 'expect 6: \"final index\"' );\r\nconsole.log( `example 6: ${ JSON.stringify( ex6_result ) }` );</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1567041504, "post_id": 57701644, "comment_id": 101847231, "body": "If the length of both arrays can vary hugely you might want to change <code>index &lt; idarray.length</code> into <code>index &lt; idarray.length &amp;&amp; index &lt; array.length</code> since there is no point in finding an index that will return <code>undefined</code> anyway because it exceeds the length of <code>array</code>."}, {"owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "edited": false, "score": 0, "creation_date": 1567045034, "post_id": 57701644, "comment_id": 101847805, "body": "Thanks for the help. Yeah, I was able to get what I want after optimize your function a bit: <a href=\"https://jsfiddle.net/91o0ztsw/\" rel=\"nofollow noreferrer\">jsfiddle.net/91o0ztsw</a>"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1567040632, "last_edit_date": 1567040632, "creation_date": 1567039892, "answer_id": 57701644, "question_id": 57692473, "link": "https://stackoverflow.com/questions/57692473/how-to-keep-checking-array-until-certain-condition-is-met/57701644#57701644", "title": "How to keep checking array until certain condition is met", "body": "<p>If I understand your question good enough you're looking for something like this. Even if this isn't exactly the solution you want you might be able to get some inspiration from it.</p>\n\n<ul>\n<li>This solution starts by finding the index of the element to search in <code>idarray</code>. If it can't be found return <code>undefined</code>. </li>\n<li>Next start looping from 1 index higher until the end of the <code>idarray</code>. If an element is found that is not <code>-1</code> return the element on the current index from <code>array</code>.</li>\n<li>If nothing is found <code>undefined</code> is returned.</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var idarray, array;\r\n\r\nfunction giveThisABetterName(item_tosearch, idarray, array) {\r\n  var index = idarray.indexOf(item_tosearch);\r\n  if (index === -1) return; // data not found\r\n\r\n  for (index += 1; index &lt; idarray.length; ++index) {\r\n    if (idarray[index] !== -1) return array[index];\r\n  }\r\n  \r\n  // reach end of array\r\n}\r\n\r\nidarray = [-1, 2, -1, 4, 1];\r\narray   = [ 3, 2,  1, 0, 7];\r\nconsole.log(giveThisABetterName(2, idarray, array));\r\n\r\nidarray = [-1, 2, -1, -1, 1];\r\narray   = [ 3, 2,  1,  0, 7];\r\nconsole.log(giveThisABetterName(2, idarray, array));\r\n\r\nidarray = [-1, 2, -1, -1, 1];\r\narray   = [ 3, 2,  1,  0, 7];\r\nconsole.log(giveThisABetterName(9, idarray, array));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 611, "user_id": 11328122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fbafd464109ea52d22f1528ef5f869?s=128&d=identicon&r=PG&f=1", "display_name": "Shinjo", "link": "https://stackoverflow.com/users/11328122/shinjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1340, "favorite_count": 0, "accepted_answer_id": 57701644, "answer_count": 2, "score": 2, "last_activity_date": 1567080681, "creation_date": 1566995392, "last_edit_date": 1567038799, "question_id": 57692473, "link": "https://stackoverflow.com/questions/57692473/how-to-keep-checking-array-until-certain-condition-is-met", "title": "How to keep checking array until certain condition is met", "body": "<p>I have two arrays <code>idarray</code> and <code>array</code> and want to find <code>item_tosearch</code> in <code>idarray</code>. Then using the found index loop forward through <code>idarray</code> until an element is found that is not <code>-1</code>. Then use that index to retreive the value from <code>array</code>.</p>\n\n<p>From what I know, if you want to keep checking you can use any sort of iteration either <code>for</code> or <code>while</code> or <code>foreach</code> in this case, I've got 2 arrays. First is for <code>idarray</code> and second is for <code>array</code>. I've managed to check what is the next data and if the data has reached the final value. I also able to get what I want which is the next data as long as the <code>id</code> wasn't <code>-1</code>.</p>\n\n<p>What I've tried:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var item_tosearch = 0;\r\nvar idarray = [-1, 2, -1, 4, -1]\r\nvar array = [3, 2, 1, 0, 7];\r\nvar index = array.indexOf(item_tosearch);\r\n\r\nif (index &gt; -1) {\r\n  var res = array.slice(index);\r\n}\r\n\r\nif (res != undefined) {\r\n  for (let i = 0; i &lt; res.length; i++) {\r\n    if (res[i + 1] != undefined) {\r\n      if (idarray[index + 1] == -1) {\r\n        if (res[i + 2] != undefined) {\r\n          console.log(\"Next = \" + res[i + 2]);\r\n          break;\r\n        } else {\r\n          console.log(\"Final index\");\r\n          break;\r\n        }\r\n      } else {\r\n        console.log(\"Next = \" + res[i + 1]);\r\n        break;\r\n      }\r\n    } else {\r\n      console.log(\"Final index\");\r\n    }\r\n  }\r\n} else {\r\n  console.log('data not found');\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My question is, is there any way I could've improved the method?</p>\n\n<p>Any advice is apreciated.</p>\n\n<hr>\n\n<p>Clarification:</p>\n\n<p>If I have the following:</p>\n\n<p>idarray = [-1, 2, -1, 4, 1];\narray = [3, 2, 1, 0, 7];</p>\n\n<p>What I would like to have is if I put 2 on item_tosearch as value, I'm expecting to have: 0 as the returned value since it was the next item without -1 in the id. </p>\n\n<hr>\n\n<p>Another case, if I had:</p>\n\n<p>idarray = [-1, 2, -1, -1, 1];\narray = [3, 2, 1, 0, 7];</p>\n\n<p>And if I put 2 on item_tosearch as value, I'm expecting to have: 7 as the returned value since it was the next item without -1 in the id. </p>\n\n<p>But if idarray was = [-1, 2, -1, -1, -1] with the same 2 on item_tosearch as value. I expect \"final index\" to be returned. Since no more item without -1 as the id.</p>\n\n<p>I've tried another iteration to fetch but doesn't seem to get what I want:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var item_tosearch = 2;\r\nvar idarray = [-1, 2, -1, -1, -1]\r\nvar array = [3, 2, 1, 0, 7];\r\nvar index = array.indexOf(item_tosearch);\r\n\r\nif (index &gt; -1) {\r\n  var res = array.slice(index);\r\n}\r\n\r\nif (res != undefined) {\r\n  for (let i = 0; i &lt; res.length; i++) {\r\n    if (res[i + 1] != undefined) {\r\n      if (idarray[index + 1] == -1) {\r\n        for (let j = i + 1; j &lt; res.length - i; j++) {\r\n          if (res[j + 1] != undefined) { // fetch if still got data with id != -1\r\n            console.log(\"Next = \" + res[j + 1]); // should show next item without -1 in id\r\n            break;\r\n          } else {\r\n            console.log(\"Final index\"); // reach end of array\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        console.log(\"Next = \" + res[i + 1]); // should show next item without -1 in id\r\n        break;\r\n      }\r\n    } else {\r\n      console.log(\"Final index\"); // reach end of array\r\n    }\r\n  }\r\n} else {\r\n  console.log('data not found');\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["angular", "typescript", "observable"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566995491, "post_id": 57692411, "comment_id": 101829146, "body": "This is <a href=\"https://stackoverflow.com/questions/57690182/how-to-return-blob-url-after-http-request-inside-function-in-angular#comment101827378_57690182\"><i>still</i></a> covered in the tutorial: <a href=\"https://angular.io/tutorial\" rel=\"nofollow noreferrer\">angular.io/tutorial</a>."}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "edited": false, "score": 0, "creation_date": 1566995532, "post_id": 57692411, "comment_id": 101829168, "body": "that was mistake while copying. I edited the post"}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566995596, "post_id": 57692411, "comment_id": 101829203, "body": "@jonrsharpe I can&#39;t find the solution there, there is no example to use the observable function and get data from there"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 2, "creation_date": 1566995708, "post_id": 57692411, "comment_id": 101829285, "body": "not related, but you should rethink: <code>&lt;img [src]=&quot;getImageSrc(chatMessage.value)&quot;&gt;</code> anyway. This is called on each change detection and since it&#39;s a http-request inside ngFor, I would assume it will just kill your browser."}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1566995810, "post_id": 57692411, "comment_id": 101829339, "body": "@AJT_82 that is true, it could help me to resolve me this problem too. Thank You !"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1566996125, "post_id": 57692411, "comment_id": 101829524, "body": "There are absolutely examples of that; I&#39;d recommend running through the whole tutorial at least once, it covers a lot of useful concepts."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1566996993, "post_id": 57692411, "comment_id": 101830055, "body": "The <code>async</code> pipe should work. Does the server return anything?"}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "edited": false, "score": 0, "creation_date": 1566997260, "post_id": 57692411, "comment_id": 101830194, "body": "Yes, it return proper Blob object, I take this code to service and in subscribe function I update the message and it works. I can see the image."}], "owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567009808, "creation_date": 1566995197, "last_edit_date": 1567009808, "question_id": 57692411, "link": "https://stackoverflow.com/questions/57692411/how-to-get-value-from-observable-function-in-template-angular", "title": "How to get value from Observable function in template - Angular", "body": "<p>I want get Blob object from request in observable function during *ngFor loop. I have a small chat app wich get data from service and print it in the view. One kind of the messages are images. When I try to get the Blob from the server, the function returend to my <code>null</code> (if I usce async in template) or <code>[object Object]</code> if I do not use async. How to return this data properly ? </p>\n\n<p>I use Angular 8</p>\n\n<p><strong><em>HTML Template</em></strong></p>\n\n<pre><code>&lt;div class=\"row message_chat_row\" *ngFor=\"let chatMessage of chatMessages | async\"&gt;\n    &lt;div class=\"col chat_message_outer align-self-center\"&gt;\n        &lt;div class=\"row\" [ngClass]=\"getChatMessageRowClass(chatMessage.sender_type)\"&gt;\n\n&lt;div *ngIf=\"chatMessage.type === 'text' || chatMessage.type === 'info'\" [innerHTML]=\"chatMessage.value\" class=\"conpeek_chat_message_inner\"&gt;&lt;/div&gt;\n\n&lt;div *ngIf=\"chatMessage.type === 'image'\" class=\"chat_message_inner\"&gt;\n                &lt;a (click)=\"downloadImg()\"&gt;&lt;img [src]=\"getImageSrc(chatMessage.value)\"&gt;&lt;/a&gt;\n            &lt;/div&gt;\n\n&lt;div *ngIf=\"chatMessage.type === 'file'\" class=\"chat_message_inner\"&gt;\n                &lt;a (click)=\"downloadFile()\"&gt;{{chatMessage.filename}}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong><em>Chat Component</em></strong></p>\n\n<pre><code>getImageSrc(img_url):Observable&lt;any&gt; {\n    console.log('GET IMGAGE SRC', img_url);\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': $c.params.token\n    });\n\n\n    return this.httpClient.get(img_url, {\n      responseType: \"blob\",\n      headers: headers\n    }).pipe(\n      map(res =&gt; URL.createObjectURL(res))\n    );\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular-directive"], "answers": [{"tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": true, "score": 2, "last_activity_date": 1566995454, "creation_date": 1566995454, "answer_id": 57692499, "question_id": 57692305, "link": "https://stackoverflow.com/questions/57692305/ngif-multiple-template-variables/57692499#57692499", "title": "NgIf multiple template variables", "body": "<p>You can only declare a single <code>as</code> alias using a structural directive, but here is what I do.</p>\n\n<p>You can use <a href=\"https://www.learnrxjs.io/operators/combination/combinelatest.html\" rel=\"nofollow noreferrer\">combineLatest()</a> to combine together multiple observables and create a state object that is used in the templates. You create a single object where the properties are a snapshot of the multiple observable values.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>   this.state$ = combineLatest(asyncCond1$, asyncCond2$, asyncCond3$).pipe(\n      map(([asyncCond1, asyncCond2, asyncCond3]) =&gt; ({asyncCond1, asyncCond2, asyncCond3}))\n   );\n</code></pre>\n\n<p>Now you can use the state object like this in the template.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;ng-container *ngIf=\"state$ | async as state\"&gt;\n    &lt;div *ngIf=\"state.asyncCond1 &amp;&amp; state.asyncCond2\"&gt;&lt;/div&gt;\n    &lt;div *ngIf=\"state.asyncCond3\"&gt;&lt;/div&gt;\n    &lt;div&gt;\n       {{state.asyncCond1 ? \"Yes\" : \"No\"}}\n    &lt;/div&gt;\n&lt;/ng-container&gt;\n</code></pre>\n\n<p>For more complex templates that use several observables it makes things a lot easier to work with.</p>\n"}], "owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "closed_date": 1567268150, "accepted_answer_id": 57692499, "answer_count": 1, "score": 2, "last_activity_date": 1566995454, "creation_date": 1566994858, "question_id": 57692305, "link": "https://stackoverflow.com/questions/57692305/ngif-multiple-template-variables", "closed_reason": "Duplicate", "title": "NgIf multiple template variables", "body": "<p>I found that</p>\n\n<pre><code>&lt;div\n  *ngIf=\"asyncCond$ | async as c1 &amp;&amp; cond2\"\n&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Won't work.\nIs there a way to define multiple conditions with multiple aliases in a one directive?</p>\n\n<p>Like <code>asyncCond1$ | async as c1 &amp;&amp; asyncCond2$ | async as c2</code> and so on. Adding <code>()</code> doesn't seem to make any impact.</p>\n"}, {"tags": ["typescript", "yarn-workspaces"], "comments": [{"owner": {"reputation": 1433, "user_id": 3345885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/W25fG.jpg?s=128&g=1", "display_name": "Colliot", "link": "https://stackoverflow.com/users/3345885/colliot"}, "edited": false, "score": 0, "creation_date": 1566995620, "post_id": 57691806, "comment_id": 101829229, "body": "TypeScript only does the resolution. Use something like webpack for transpilation."}], "owner": {"reputation": 905, "user_id": 7868630, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/52a181d7dcac404020bcf8ab3e9ee3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Thiago Nascimento", "link": "https://stackoverflow.com/users/7868630/thiago-nascimento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566993205, "creation_date": 1566993205, "question_id": 57691806, "link": "https://stackoverflow.com/questions/57691806/typescript-path-alias-in-monorepo", "title": "Typescript path alias in monorepo", "body": "<p>I have a monorepo setup using yarn workspaces that uses Typescript and have the following structure:</p>\n\n<pre><code>- node_modules\n- packageA\n  |- src (typescript)\n  |- lib (compiled from /src)\n- packageB\n  |- src (typescript)\n  |- lib (compiled from /src)\n</code></pre>\n\n<p>Package B uses resources from package A. What I want to be able to do is: import <code>packageA/src</code> in <code>packageB/src</code> and in the compile process of packageB automatically change the path to <code>packageA/lib</code> (the compiled version of A).</p>\n\n<p>I tried setting up the path configuration in tsconfig like:</p>\n\n<pre><code>{\n  paths: {\n    \"packageA/src/*\": [\n       \"packageA/lib/*\"\n     ]\n  }\n}\n</code></pre>\n\n<p>But the nothing changed in the compiled version. Is their anyway I can make that?</p>\n"}, {"tags": ["typescript", "generics", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 7884, "user_id": 458356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a4f78de294cf8eaa7c8a00e6c93a3d77?s=128&d=identicon&r=PG", "display_name": "Ian Bytchek", "link": "https://stackoverflow.com/users/458356/ian-bytchek"}, "edited": false, "score": 2, "creation_date": 1566995159, "post_id": 57691779, "comment_id": 101828934, "body": "This. Is. Crazy. \ud83d\udc4d"}, {"owner": {"reputation": 1110, "user_id": 8649945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155712401424520/picture?type=large", "display_name": "Helmer Barcos", "link": "https://stackoverflow.com/users/8649945/helmer-barcos"}, "edited": false, "score": 1, "creation_date": 1605046567, "post_id": 57691779, "comment_id": 114532271, "body": "This is insane!!"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 3, "last_activity_date": 1566993097, "creation_date": 1566993097, "answer_id": 57691779, "question_id": 57691618, "link": "https://stackoverflow.com/questions/57691618/generic-interface-with-index-type-property-and-method/57691779#57691779", "title": "Generic interface with index-type property and method", "body": "<p>You can use a mapped type to generate a union of all combinations of <code>key</code>/<code>map</code> possibilities. This union will enforce the constraint that the parameter to <code>map</code> will be the same type as <code>T[K]</code> and contextual typing will also work as expected:</p>\n\n<pre><code>type Test = {\n  a: string;\n  b: number;\n}\n\ntype Foo&lt;T&gt; = { \n  [P in keyof T]: {\n      key: P;\n      map: (value: T[P]) =&gt; any;\n  }\n}[keyof T]\n\nlet o: Foo&lt;Test&gt; =  {\n  key: \"a\", \n  map: v =&gt; v.toLocaleLowerCase() // v is string\n};\n\nlet o2: Foo&lt;Test&gt; =  {\n  key: \"b\", \n  map: v =&gt; v.toLocaleLowerCase() // v is number, so err\n};\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAKhDOwoF4oG8BQUoEMBcUiATgJYB2A5gNxZQBGBZArgLZ0RE0C+GGokUAGIB7YQB4YAPhTootANoAFKOSgBrCCGEAzWAF0CmbMfWaCimiewscYAgAoAbjgA2TCARhK9AShTScMhBLKB4ueQ0tXRg9XhcIJGECEXE4RGlUdFpIggAiHFyAGjlrWwJHfyhHADpgYQAZYQBjVwhGgHcOAGEceAh7PwB6QaqVeEJgUkoMLhoMeMSAJmTRCQRgDOwjUxA8uiKSqBs7UeRpGrrGlviO7t7+oZGKknHmNg5i+GEoDiIZqiAA\" rel=\"nofollow noreferrer\">Play</a></p>\n"}], "owner": {"reputation": 7884, "user_id": 458356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a4f78de294cf8eaa7c8a00e6c93a3d77?s=128&d=identicon&r=PG", "display_name": "Ian Bytchek", "link": "https://stackoverflow.com/users/458356/ian-bytchek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 57691779, "answer_count": 1, "score": 0, "last_activity_date": 1566993097, "creation_date": 1566992558, "question_id": 57691618, "link": "https://stackoverflow.com/questions/57691618/generic-interface-with-index-type-property-and-method", "title": "Generic interface with index-type property and method", "body": "<p>Is there a way in TypeScript to declare the following interface using <a href=\"http://www.typescriptlang.org/docs/handbook/advanced-types.html#index-types\" rel=\"nofollow noreferrer\">index types</a> and <em>exactly one generic type</em>, where <code>map</code> method would accept value of the same type as <code>T</code>'s key instead of <code>any</code>?</p>\n\n<pre><code>interface Foo&lt;T&gt; {\n    key: keyof T;\n    map: (value: any) =&gt; any;\n}\n</code></pre>\n\n<p>Again, the interface needs to accept only one generic type. The following is a possible solution, but does't solve this problem since takes two generic types:</p>\n\n<pre><code>interface Foo&lt;T, K extends keyof T&gt; {\n    key: K;\n    map: (value: T[K]) =&gt; any;\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "rxjs", "rxjs-pipeable-operators"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1566992666, "post_id": 57691553, "comment_id": 101827506, "body": "<code>of</code> completes after emitting the supplied values, <code>EMPTY</code> completes without emitting any values. That doesn&#39;t necessarily mean the consumer has to complete too."}, {"owner": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566992791, "post_id": 57691553, "comment_id": 101827576, "body": "What test could I write to see the difference? The outputs for the tests I wrote are identical."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1566992821, "post_id": 57691553, "comment_id": 101827595, "body": "Because the behaviour&#39;s identical. Why do you think there <i>is</i> any difference?"}, {"owner": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566992913, "post_id": 57691553, "comment_id": 101827643, "body": "That&#39;s specifically my question - if there is a functional difference between <code>filter</code> and <code>flatMap</code>ing into <code>EMPTY</code>."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1566993115, "post_id": 57691553, "comment_id": 101827763, "body": "I don&#39;t understand <i>why</i> that&#39;s your question, given that your experiment has already answered it (as: no) and demonstrated that <code>flatMap</code>ping <code>EMPTY</code> (or, for that matter, <code>of</code>) <i>doesn&#39;t</i> cause the outer observable to complete too. Also why were you looking to reimplement <code>filter</code> to begin with?"}, {"owner": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566993237, "post_id": 57691553, "comment_id": 101827834, "body": "I thought my test might not cover functionality that would behave differently.  I found code that does <code>flatMap</code> into <code>EMPTY</code> and wanted to replace it with <code>filter</code>, but was unsure if that would preserve the functionality exactly."}, {"owner": {"reputation": 3847, "user_id": 3772379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/444ca8c36af9dfdd52f57662dbfd0370?s=128&d=identicon&r=PG", "display_name": "Oles Savluk", "link": "https://stackoverflow.com/users/3772379/oles-savluk"}, "edited": false, "score": 1, "creation_date": 1566993653, "post_id": 57691553, "comment_id": 101828059, "body": "There could be a difference if Observable returned from <code>flatMap</code> have different scheduler, but in your example visible behavior should be the same"}, {"owner": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "reply_to_user": {"reputation": 3847, "user_id": 3772379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/444ca8c36af9dfdd52f57662dbfd0370?s=128&d=identicon&r=PG", "display_name": "Oles Savluk", "link": "https://stackoverflow.com/users/3772379/oles-savluk"}, "edited": false, "score": 0, "creation_date": 1566994037, "post_id": 57691553, "comment_id": 101828289, "body": "@OlesSavluk can you give an example?"}], "answers": [{"comments": [{"owner": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "edited": false, "score": 0, "creation_date": 1566995111, "post_id": 57692318, "comment_id": 101828908, "body": "So can the difference only stem from <code>flatMap</code> altering the returned observable? If I return it exactly, are the two pipes identical?"}, {"owner": {"reputation": 3847, "user_id": 3772379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/444ca8c36af9dfdd52f57662dbfd0370?s=128&d=identicon&r=PG", "display_name": "Oles Savluk", "link": "https://stackoverflow.com/users/3772379/oles-savluk"}, "reply_to_user": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "edited": false, "score": 1, "creation_date": 1566995718, "post_id": 57692318, "comment_id": 101829291, "body": "They are not &quot;identical&quot;, but should be safe to refactor this way in most cases"}], "tags": [], "owner": {"reputation": 3847, "user_id": 3772379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/444ca8c36af9dfdd52f57662dbfd0370?s=128&d=identicon&r=PG", "display_name": "Oles Savluk", "link": "https://stackoverflow.com/users/3772379/oles-savluk"}, "is_accepted": true, "score": 1, "last_activity_date": 1566994909, "creation_date": 1566994909, "answer_id": 57692318, "question_id": 57691553, "link": "https://stackoverflow.com/questions/57691553/is-there-a-difference-between-filtercond-and-flatmapx-cond-ofx-empty/57692318#57692318", "title": "Is there a difference between filter(cond) and flatMap(x =&gt; cond? of(x) : EMPTY)?", "body": "<p>There could be a difference if Observable returned from <code>flatMap</code> have different scheduler, but in your example visible behavior should be the same. Usually this can happen if you rely on side effects, which is generally discouraged.</p>\n\n<p>Here is example when <code>asyncScheduler</code> change behavior (values printed after creation in the second example):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const { of, asyncScheduler, EMPTY, from } = rxjs; // = require(\"rxjs\")\r\nconst { filter, flatMap } = rxjs.operators; // = require(\"rxjs/operators\")\r\n\r\nconst items$ = from([1, 2, 3, 4, 5]);\r\n\r\nconsole.log(\"------------ SYNC\");\r\nconst sync$ = items$.pipe(\r\n  filter(v =&gt; v % 2 === 0)\r\n);\r\nsync$.subscribe(e =&gt; console.log(e));\r\nconsole.log(\"after sync\");\r\n\r\n\r\nconsole.log(\"------------ ASYNC\");\r\nitems$.pipe(\r\n  flatMap(v =&gt; v % 2 === 0 ? of(v, asyncScheduler) : EMPTY)\r\n).subscribe(e =&gt; console.log(e));\r\nconsole.log(\"after async\");</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://unpkg.com/rxjs@6.5.2/bundles/rxjs.umd.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 416, "user_id": 6338059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16a70ade41a79bc77512ab3b8dc1a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Lottem", "link": "https://stackoverflow.com/users/6338059/ran-lottem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 57692318, "answer_count": 1, "score": 0, "last_activity_date": 1566994909, "creation_date": 1566992344, "question_id": 57691553, "link": "https://stackoverflow.com/questions/57691553/is-there-a-difference-between-filtercond-and-flatmapx-cond-ofx-empty", "title": "Is there a difference between filter(cond) and flatMap(x =&gt; cond? of(x) : EMPTY)?", "body": "<p>I'm trying to understand what the difference would be between these two observables. The only difference in code is this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>/**\n* Inside rxjs pipe\n*/\nif(typeof x === 'number' &amp;&amp; x &gt; 3) {\n    return of(x);\n} else {\n    return EMPTY;\n}\n</code></pre>\n\n<p>vs:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>.filter(typeof x === 'number' &amp;&amp; x &gt; 3)\n</code></pre>\n\n<p>The test I'm running:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const a$ = from([1, 6, '4']).pipe(\n            tap(console.log),\n            flatMap((x) =&gt; {\n                if (typeof x === 'number') {\n                    if (x &gt; 3) {\n                        return of(x);\n                    }\n                    return EMPTY;\n                }\n                return EMPTY;\n            }),\n            tap(console.log)\n        );\n        const sub_a = a$.subscribe(\n            (x) =&gt; { console.log(x, 'success'); done(); },\n            (e) =&gt; { console.log(e, 'error'); done(); },\n            () =&gt; { console.log('complete'); sub_a.unsubscribe(); done(); }\n        );\n</code></pre>\n\n<p>and:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>        const b$ = from([2, 5, '8']).pipe(\n            tap(console.log),\n            filter(x =&gt; typeof x === 'number' &amp;&amp; x &gt; 3),\n            tap(console.log)\n        );\n        const sub_b = b$.subscribe(\n            (x) =&gt; { console.log(x, 'success'); done(); },\n            (e) =&gt; { console.log(e, 'error'); done(); },\n            () =&gt; { console.log('complete'); sub_b.unsubscribe(); done(); }\n        );\n</code></pre>\n\n<p>for both of them I get the first value logged once (before the filter/flatMap), the second value logged twice from the taps and once with \"complete\", and the third one once.</p>\n\n<p>I thought the difference would be that emitting <code>EMPTY</code> would cause the observable to close entirely but subsequent values are still seen through the pipe.</p>\n\n<p>I've done the same with a <code>Subject</code> and the only difference was that the <code>Subject</code>s didn't emit <code>Complete</code> which was to be expected.</p>\n"}, {"tags": ["reactjs", "typescript", "visual-studio-2019"], "comments": [{"owner": {"reputation": 251, "user_id": 3359330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/633eb89af8477d34752007b3bc938e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Gupta", "link": "https://stackoverflow.com/users/3359330/akshay-gupta"}, "edited": false, "score": 0, "creation_date": 1566992464, "post_id": 57691520, "comment_id": 101827380, "body": "can you share the full file, what is AdminDropdown?"}], "answers": [{"comments": [{"owner": {"reputation": 6380, "user_id": 11599909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d6760778bf35138d266f24c3552c46?s=128&d=identicon&r=PG&f=1", "display_name": "Domino987", "link": "https://stackoverflow.com/users/11599909/domino987"}, "edited": false, "score": 1, "creation_date": 1566992792, "post_id": 57691677, "comment_id": 101827577, "body": "To ermove the any, you could ust wirte it with {}:  React.Component&lt;{}, IState&gt; { }, which will prevent unknown props in the future."}, {"owner": {"reputation": 4958, "user_id": 4627262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iTGZT9YcyLE/AAAAAAAAAAI/AAAAAAAAALU/-5defYeBo50/photo.jpg?sz=128", "display_name": "rrd", "link": "https://stackoverflow.com/users/4627262/rrd"}, "reply_to_user": {"reputation": 6380, "user_id": 11599909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d6760778bf35138d266f24c3552c46?s=128&d=identicon&r=PG&f=1", "display_name": "Domino987", "link": "https://stackoverflow.com/users/11599909/domino987"}, "edited": false, "score": 0, "creation_date": 1566992826, "post_id": 57691677, "comment_id": 101827597, "body": "Yes, I assumed he would have props."}, {"owner": {"reputation": 3, "user_id": 2929846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81bc7e52e525e0258f6caa7c2ab9df6?s=128&d=identicon&r=PG&f=1", "display_name": "dasago78", "link": "https://stackoverflow.com/users/2929846/dasago78"}, "edited": false, "score": 0, "creation_date": 1566993197, "post_id": 57691677, "comment_id": 101827811, "body": "But it has been working fine in production since today."}, {"owner": {"reputation": 4958, "user_id": 4627262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iTGZT9YcyLE/AAAAAAAAAAI/AAAAAAAAALU/-5defYeBo50/photo.jpg?sz=128", "display_name": "rrd", "link": "https://stackoverflow.com/users/4627262/rrd"}, "edited": false, "score": 0, "creation_date": 1566993366, "post_id": 57691677, "comment_id": 101827904, "body": "tsc won&#39;t stop it being compiled - it will be transpiled to javascript and this is valid javascript so production code won&#39;t be affected. Your IDE has thrown this error because it -is- a typescript error."}, {"owner": {"reputation": 3, "user_id": 2929846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81bc7e52e525e0258f6caa7c2ab9df6?s=128&d=identicon&r=PG&f=1", "display_name": "dasago78", "link": "https://stackoverflow.com/users/2929846/dasago78"}, "edited": false, "score": 0, "creation_date": 1566995270, "post_id": 57691677, "comment_id": 101829013, "body": "yes thanks! Typescript 3.5 now need this implementation"}], "tags": [], "owner": {"reputation": 4958, "user_id": 4627262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iTGZT9YcyLE/AAAAAAAAAAI/AAAAAAAAALU/-5defYeBo50/photo.jpg?sz=128", "display_name": "rrd", "link": "https://stackoverflow.com/users/4627262/rrd"}, "is_accepted": true, "score": 1, "last_activity_date": 1566992738, "creation_date": 1566992738, "answer_id": 57691677, "question_id": 57691520, "link": "https://stackoverflow.com/questions/57691520/ts2339ts-property-state-does-not-exist-on-type/57691677#57691677", "title": "TS2339\t(TS) Property &#39;state&#39; does not exist on type", "body": "<p>If you are using typescript you need to change it to this to declare the state interface:</p>\n\n<pre><code>interface IState = {\n  user: any;\n  loading: boolean;\n}\n</code></pre>\n\n<p>Then the class declaration:</p>\n\n<pre><code>export default class Employee extends React.Component&lt;any, IState&gt; { }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2929846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81bc7e52e525e0258f6caa7c2ab9df6?s=128&d=identicon&r=PG&f=1", "display_name": "dasago78", "link": "https://stackoverflow.com/users/2929846/dasago78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1726, "favorite_count": 0, "accepted_answer_id": 57691677, "answer_count": 1, "score": 0, "last_activity_date": 1566992738, "creation_date": 1566992228, "last_edit_date": 1566992349, "question_id": 57691520, "link": "https://stackoverflow.com/questions/57691520/ts2339ts-property-state-does-not-exist-on-type", "title": "TS2339\t(TS) Property &#39;state&#39; does not exist on type", "body": "<p>I had my react project working fine using Visual Studio 2019 and typescript. After 1 month without coding I open the Visual Studio solution and I was alerted to update typescript 3.4 to 3.5. And now, suddenly I have a Build error on this.state definition of the component.</p>\n\n<p><a href=\"https://drive.google.com/file/d/1h4LzcpLqSHrsUdCNefMhlbBq7NpCd-u6/view?usp=sharing\" rel=\"nofollow noreferrer\">link</a></p>\n\n<pre><code>export default class Employee extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            user: null,\n            loading: true\n        }       \n    }\n}\n</code></pre>\n"}, {"tags": ["node.js", "typescript", "ecmascript-6", "mocha.js", "sinon"], "comments": [{"owner": {"reputation": 3494, "user_id": 5045563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9dccd10e57c08cb05ec5b39fa80f6d?s=128&d=identicon&r=PG&f=1", "display_name": "shkaper", "link": "https://stackoverflow.com/users/5045563/shkaper"}, "edited": false, "score": 0, "creation_date": 1567006000, "post_id": 57690820, "comment_id": 101835586, "body": "It looks like you&#39;re trying to check object equality via the <code>==</code> operator unless I&#39;m missing something. If they are two different objects, what is your expected result?"}], "answers": [{"tags": [], "owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "is_accepted": true, "score": 1, "last_activity_date": 1574152274, "creation_date": 1574152274, "answer_id": 58929630, "question_id": 57690820, "link": "https://stackoverflow.com/questions/57690820/mocking-os-nodejs-module-issues/58929630#58929630", "title": "Mocking &#39;os&#39; nodejs module issues", "body": "<p>Here is the unit test solution:</p>\n\n<p><code>index.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as os from 'os';\n\nexport class Something {\n  getInterfaces() {\n    return os.networkInterfaces();\n  }\n}\n</code></pre>\n\n<p><code>index.spec.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import proxyquire from 'proxyquire';\nimport sinon from 'sinon';\nimport { expect } from 'chai';\n\nconst ip1 = '192.168.1.114';\nconst mockedInterfaces = {\n  en0: [\n    {\n      address: 'fe80::3e07:54ff:fe66:f0f8',\n      netmask: 'ffff:ffff:ffff:ffff::',\n      family: 'IPv6' as 'IPv6',\n      mac: '3c:07:54:66:f0:f8',\n      scopeid: 4,\n      internal: false,\n      cidr: '::1/128'\n    },\n    {\n      address: ip1,\n      netmask: '255.255.255.0',\n      family: 'IPv4' as 'IPv4',\n      mac: '3c:07:54:66:f0:f8',\n      internal: false,\n      cidr: '127.0.0.1/8'\n    }\n  ]\n};\n\ndescribe('Something', () =&gt; {\n  it('Returns the mock', () =&gt; {\n    const networkInterfacesStub = sinon.stub().returns(mockedInterfaces);\n    const { Something } = proxyquire('./', {\n      os: {\n        networkInterfaces: networkInterfacesStub\n      }\n    });\n    const something = new Something();\n    const interfaces = something.getInterfaces();\n    expect(interfaces).to.deep.equal(mockedInterfaces);\n    expect(networkInterfacesStub.calledOnce).to.be.true;\n  });\n});\n</code></pre>\n\n<p>Unit test result with 100% coverage:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>  Something\n    \u2713 Returns the mock (190ms)\n\n\n  1 passing (198ms)\n\n---------------|----------|----------|----------|----------|-------------------|\nFile           |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n---------------|----------|----------|----------|----------|-------------------|\nAll files      |      100 |      100 |      100 |      100 |                   |\n index.spec.ts |      100 |      100 |      100 |      100 |                   |\n index.ts      |      100 |      100 |      100 |      100 |                   |\n---------------|----------|----------|----------|----------|-------------------|\n</code></pre>\n\n<p>Source code: <a href=\"https://github.com/mrdulin/mocha-chai-sinon-codelab/tree/master/src/stackoverflow/57690820\" rel=\"nofollow noreferrer\">https://github.com/mrdulin/mocha-chai-sinon-codelab/tree/master/src/stackoverflow/57690820</a></p>\n"}], "owner": {"reputation": 1284, "user_id": 3649977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde22dae0b134207981672daa28d3461?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Devloo", "link": "https://stackoverflow.com/users/3649977/jeffrey-devloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 58929630, "answer_count": 1, "score": 0, "last_activity_date": 1574152332, "creation_date": 1566989763, "last_edit_date": 1574152332, "question_id": 57690820, "link": "https://stackoverflow.com/questions/57690820/mocking-os-nodejs-module-issues", "title": "Mocking &#39;os&#39; nodejs module issues", "body": "<p>I'm currently facing some difficulties mocking the 'os' module in NodeJS.\nI'd like to mock the 'networkInterfaces' function of the module to return a fixed configuration. It is however still returning the interface data of my machines.</p>\n\n<p>I've created a small test case which isolates the problem:\n<code>something.ts</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as os from 'os';\n\nexport class Something {\n    getInterfaces(){\n        return os.networkInterfaces()\n    }\n}\n</code></pre>\n\n<p><code>something.spec.ts</code>:</p>\n\n<pre><code>import * as chai from 'chai';\nimport * as os from 'os';\nimport * as sinon from 'sinon';\nimport sinonChai from 'sinon-chai';\nimport { Something } from './something';\nimport { ImportMock } from 'ts-mock-imports';\n\nconst expect = chai.expect;\nchai.use(sinonChai);\n\nconst ip1 = '192.168.1.114';\n\nconst mockedInterfaces = {\n  en0: [\n    {\n      address: 'fe80::3e07:54ff:fe66:f0f8',\n      netmask: 'ffff:ffff:ffff:ffff::',\n      family: 'IPv6' as 'IPv6',\n      mac: '3c:07:54:66:f0:f8',\n      scopeid: 4,\n      internal: false,\n      cidr: '::1/128'\n    },\n    {\n      address: ip1,\n      netmask: '255.255.255.0',\n      family: 'IPv4' as 'IPv4',\n      mac: '3c:07:54:66:f0:f8',\n      internal: false,\n      cidr: '127.0.0.1/8'\n    }\n  ]\n};\n\ndescribe('Something', () =&gt; {\n  let sandbox: sinon.SinonSandbox;\n  let something: Something;\n  let stub: sinon.SinonStub;\n\n  before(() =&gt; {\n    sandbox = sinon.createSandbox();\n    // sandbox.stub(os, 'networkInterfaces').callsFake(() =&gt; {\n    //     return mockedInterfaces\n    // });\n    stub = ImportMock.mockFunction(os, 'networkInterfaces', mockedInterfaces);\n    something = new Something();\n  });\n\n  after(() =&gt; {\n    sandbox.restore();\n    stub.restore();\n  });\n\n  it('Returns the mock', () =&gt; {\n    const interfaces = something.getInterfaces();\n    expect(interfaces).to.deep.equal(mockedInterfaces);\n  });\n});\n</code></pre>\n\n<p>Running it yields:</p>\n\n<pre><code>\nAssertionError: expected { Object (lo, eno2, ...) } to deeply equal { Object (en0) }\n&lt;Click to see difference&gt;\n\n    at Context.&lt;anonymous&gt; (socket/xml2/something.spec.ts:57:36)\n</code></pre>\n\n<p>Which means that it is listing my interfaces as opposed to returning the mocked ones.</p>\n\n<p>I'm kind of clueless on how to mock the nodejs module. Any guidance is appreciated.</p>\n"}, {"tags": ["typescript", "nativescript", "typescript-typings"], "comments": [{"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 1, "creation_date": 1566993813, "post_id": 57690703, "comment_id": 101828179, "body": "TypeScript declarations (<code>*.d.ts</code>) are just for the sake of IntelliSense support with your IDE. Hence there is nothing called valid or invalid as long you export right definitions you want to expose. Most plugins will just export <code>index.d.ts</code> that will usually expose everything from <code>*-common.ts</code>."}, {"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1566994016, "post_id": 57690703, "comment_id": 101828279, "body": "If you are extending <code>ViewBase</code> then your declarations doesn&#39;t look quite right to me. For example you may take a look at <a href=\"https://github.com/nstudio/nativescript-camera-plus/blob/master/src/index.d.ts\" rel=\"nofollow noreferrer\">camara-plus plugin</a>, the base class is extended to add new methods."}, {"owner": {"reputation": 602, "user_id": 9967934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2219a8533eac5960706ea6451261a95e?s=128&d=identicon&r=PG&f=1", "display_name": "lolelo", "link": "https://stackoverflow.com/users/9967934/lolelo"}, "reply_to_user": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1566995198, "post_id": 57690703, "comment_id": 101828969, "body": "Note I am adding an extension method to viewbase. Not extending the viewbase class."}, {"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1566996549, "post_id": 57690703, "comment_id": 101829777, "body": "Understood, thanks for clarifying that."}, {"owner": {"reputation": 602, "user_id": 9967934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2219a8533eac5960706ea6451261a95e?s=128&d=identicon&r=PG&f=1", "display_name": "lolelo", "link": "https://stackoverflow.com/users/9967934/lolelo"}, "reply_to_user": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1567243389, "post_id": 57690703, "comment_id": 101912613, "body": "@Manoj Do you know if there is any way to stop <code>npm run demo.ios</code>/<code>npm run demo.android</code> from generating <code>d.ts</code>, <code>.js</code> and <code>.js.map</code> files?"}, {"owner": {"reputation": 602, "user_id": 9967934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2219a8533eac5960706ea6451261a95e?s=128&d=identicon&r=PG&f=1", "display_name": "lolelo", "link": "https://stackoverflow.com/users/9967934/lolelo"}, "reply_to_user": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1567254264, "post_id": 57690703, "comment_id": 101915008, "body": "I think am hitting: <a href=\"https://stackoverflow.com/questions/12706290/typescript-define-class-and-its-methods-in-separate-files\" title=\"typescript define class and its methods in separate files\">stackoverflow.com/questions/12706290/&hellip;</a>. I can&#39;t have abstract class/interface in one file and implement it in another file?"}, {"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1567267012, "post_id": 57690703, "comment_id": 101918156, "body": "Yes, you can. The thread also mentions the same. You can have a abstract class in a different file and implement the same in another file."}, {"owner": {"reputation": 602, "user_id": 9967934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2219a8533eac5960706ea6451261a95e?s=128&d=identicon&r=PG&f=1", "display_name": "lolelo", "link": "https://stackoverflow.com/users/9967934/lolelo"}, "reply_to_user": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1567268040, "post_id": 57690703, "comment_id": 101918427, "body": "I see. Indeed. After renaming the platform implementation files. And moving the extension method out of <code>common.ts</code> I can in fact have my abstract class in separate file from the implementation."}], "answers": [{"tags": [], "owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "is_accepted": false, "score": 1, "last_activity_date": 1567245561, "creation_date": 1567245561, "answer_id": 57736983, "question_id": 57690703, "link": "https://stackoverflow.com/questions/57690703/index-d-ts-when-creating-a-nativescript-plugin/57736983#57736983", "title": "index.d.ts when creating a NativeScript plugin?", "body": "<p>TypeScript declarations <code>(*.d.ts)</code> are just for the sake of IntelliSense support with your IDE. Hence there is nothing called valid or invalid as long you export right definitions you want to expose. Most plugins will just export <code>index.d.ts</code> that will usually expose everything from <code>*-common.ts</code>.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>In order to prevent generating <code>.d.ts</code> and <code>.js.map</code> files, you will set <code>declaration</code> &amp; <code>sourceMap</code> flags in <code>src/tsconfig.json</code> to <code>false</code>.</p>\n\n<p>You can not avoid <code>.js</code> files, that's the only sole reason of using TypeScript compiler (Converting TS to JS). While publishing your plugin or using it in demo app, <code>.js</code> files are the ones actually used. </p>\n\n<p>Between, without <code>sourceMap</code> debugging may be difficult for you.</p>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 9967934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2219a8533eac5960706ea6451261a95e?s=128&d=identicon&r=PG&f=1", "display_name": "lolelo", "link": "https://stackoverflow.com/users/9967934/lolelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567269527, "creation_date": 1567269527, "answer_id": 57739872, "question_id": 57690703, "link": "https://stackoverflow.com/questions/57690703/index-d-ts-when-creating-a-nativescript-plugin/57739872#57739872", "title": "index.d.ts when creating a NativeScript plugin?", "body": "<p>I finally manage to set up the plugin in a correct and satisfying manner</p>\n\n<p>The two main point are (if using extension method as entry point):</p>\n\n<pre><code>declare module \"tns-core-modules/ui/core/view-base\" {\n    interface ViewBase {\n        addGestureHandler(gesture: string): void;\n    }\n}\nViewBase.prototype.addGestureHandler = function(gesture: string) {\n    console.log(\"addGestureHandler: \" + gesture);\n    // then calling platform specific singleton\n}\n</code></pre>\n\n<p>... has to defined in inside a <strong>separate file</strong> from <code>myplugin.common.ts</code>. I call it <code>myplugin.ts</code>.</p>\n\n<p>Also with this set up. <code>myplugin.ios.ts</code> and <code>myplugin.android.ts</code> has to <strong>removed</strong>. Create new files: <code>ios.impl.ts</code> and <code>android.impl.ts</code>. The <code>common.ts</code> then ends up containing the abstract class or interface.</p>\n\n<hr>\n\n<p>So in the demo application home-page.ts the usage of the plugin becomes like so:</p>\n\n<pre><code>import \"nativescript-gestures\"; // available only by having a common.ts file src folder in the plugin\n\nimport { NavigatedData, Page } from \"tns-core-modules/ui/page\";\nimport { HomeViewModel } from \"./home-view-model\";\n\nexport function onNavigatingTo(args: NavigatedData) {\n    const page = &lt;Page&gt;args.object;\n    page.bindingContext = new HomeViewModel();\n    page.addGestureHandler(\"hello\"); // &lt;-- addGestureHandler extension method\n}\n</code></pre>\n"}], "owner": {"reputation": 602, "user_id": 9967934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2219a8533eac5960706ea6451261a95e?s=128&d=identicon&r=PG&f=1", "display_name": "lolelo", "link": "https://stackoverflow.com/users/9967934/lolelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567269527, "creation_date": 1566989342, "last_edit_date": 1567255378, "question_id": 57690703, "link": "https://stackoverflow.com/questions/57690703/index-d-ts-when-creating-a-nativescript-plugin", "title": "index.d.ts when creating a NativeScript plugin?", "body": "<p>I have recently started to make a plugin in NativeScript - following the <a href=\"https://docs.nativescript.org/plugins/building-plugins\" rel=\"nofollow noreferrer\">documention</a>. And I made some successfull runs with <code>npm run demo.ios</code> in the src folder. </p>\n\n<p>However when starting to build the actual plugin I intended on - I am encountering the following error: </p>\n\n<blockquote>\n  <p>file:///node_modules/tns-core-modules/ui/builder/builder.js:179:0 JS ERROR Error: Building UI from XML. @app-root.xml:1:1\n  undefined is not an object (evaluating 'b.prototype')</p>\n</blockquote>\n\n<p>I have set up an extension method onto <code>ViewBase</code> in my <code>myplugin.common.ts</code> file that I attempt to call from the demo application </p>\n\n<p>The problem could lie in the <code>index.d.ts</code> I believe. According the docs the <code>myplugin.ios.d.ts</code> and <code>myplugin.android.d.ts</code> files should be copied in there or defined manually. I am attempting to copy the <code>myplugin.common.d.ts</code> file content in there instead. Is that valid?</p>\n\n<p>I have also noticed two runs seem to be necceseray - since the first run generates the <code>...d.ts.</code> Of which content then has to copied into <code>index.d.ts</code>.</p>\n\n<hr>\n\n<p>some code...</p>\n\n<p>myplugin.common.ts</p>\n\n<pre><code>declare module \"tns-core-modules/ui/core/view-base/view-base\" {\n  interface ViewBase {\n    myExenstionMethod(myNumber: number): void;\n  }\n}\nViewBase.prototype.myExenstionMethod = function(myNumber: number) {\n  console.log(\"myNumber: \" + myNumber);\n}\n</code></pre>\n\n<p>and <code>index.d.ts</code> (copied from <code>myplugin.common.d.ts</code>):</p>\n\n<pre><code>declare module \"tns-core-modules/ui/core/view-base/view-base\" {\n    interface ViewBase {\n        myExenstionMethod(myNumber: number): void;\n    }\n}\n</code></pre>\n\n<p>It is shown in the demo project:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ubxd1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ubxd1.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the error comes from simply importing the extension method from the plugin in my demo project:</p>\n\n<pre><code>import \"nativescript-myplugin\";\n</code></pre>\n\n<hr>\n\n<p><strong>Note</strong> </p>\n\n<p>I created a new plugin project - only adding the extension method and it worked. So there was something else in the original plugin project that caused the error. Adding <code>declare module</code> in <code>index.d.ts</code> was not needed.</p>\n\n<hr>\n\n<p><strong>Hitting it again</strong> </p>\n\n<p>with the same error as before - when instantiating myplugin.ios.ts/myplugin.android.ts - myplugin class - from inside <code>myplugin.common.ts</code>. I initially thought about creating a platform specific singleton instance to interact with in <code>.common.ts</code> - but that does not seem to work?</p>\n\n<pre><code>import { Gestures as iOSGestures} from \"./gestures.ios\";\nimport {Gestures as AndroidGestures} from \"./gestures.android\";\n\nexport abstract class Common extends Observable {\n  private static _instance = null;\n\n  static instance(os: string): Common {\n    if(Common._instance == null) {\n      /* crash from instantiating iOSGestures or AndroidGestures */\n      this._instance = os == \"iOS\" ? new iOSGestures() : new AndroidGestures();\n    }\n    return Common._instance;\n  }\n  abstract _attach(viewBase: ViewBase, gesture: string): void;\n}\n</code></pre>\n\n<p>What is strange is that that particular code is never called from anywhere yet. And commenting out that line I can create that error by simply having dead code containing the instantiation:</p>\n\n<pre><code>// still inside .common.ts\nimport { Gestures } from \"./gestures.android\";\n\nconst object = {\n  methodInFile()  {\n    const g = new Gestures() // &lt;--\n  }\n}\n</code></pre>\n\n<p>Here is the android.ts:</p>\n\n<pre><code>export class Gestures extends Common {\n    _attach(viewBase: ViewBase, gesture: string): void {\n        console.log(\"_attach android\");\n        if(gesture == touch.down) {\n\n        }\n    }\n}\n</code></pre>\n\n<p>It could be some sort of conflict with the index.d.ts?:</p>\n\n<pre><code>import { Common } from './gestures.common';\nexport declare class Gestures extends Common {\n  // define your typings manually\n  // or..\n  // take the ios or android .d.ts files and copy/paste them here\n}\n</code></pre>\n\n<p>This my first time attempting to build a plugin NativeScript - so I might be setting things completely wrong. I hope to provide my plugin as an extension method on <code>ViewBase</code> though - and the extension method defined in common.ts is called successfully.</p>\n\n<hr>\n\n<pre><code>// inside common.ts\nexport class Gestures extends Common {\n  _attach(): void {\n      console.log(\"_attach ios\");\n  }\n}\nconst object = {\n  methodInFile()  {\n    const g = new Gestures() // &lt;--\n  }\n}\n</code></pre>\n\n<p>... works.</p>\n\n<p>But when the class is imported from another file, having <code>new Gestures()</code> - causes the crash as mentioned. It neither works creating a new file - <code>ios.common.ts</code>. So it could be that <code>npm run demo.ios</code> is generating faulty js files on build? I also removed the content of <code>index.d.ts</code> completely - so it can't involved causing the error.</p>\n\n<hr>\n\n<p>Making the <code>common.ts</code> an interface - that gets implemented in <code>.ios.ts</code> and <code>android.ts</code>. I encountered a new error;</p>\n\n<blockquote>\n  <p>file:///app/home/home-page.ts:17:27 JS ERROR TypeError: page.addGestureHandler is not a function. (In 'page.addGestureHandler(\"hello\")', 'page.addGestureHandler' is undefined)</p>\n</blockquote>\n\n<p>My conclusion so far is that I <strong>can't have Common as an abstract class or interface</strong> - and instantiate <code>ios.ts</code> and <code>android.ts</code> as singletons. The class extending abstract Common - or implementing interface Common - must be in the same file as (common.ts). <s> This can be related to the fact I am using an extension method as entry point into the plugin. </s></p>\n"}, {"tags": ["angular", "typescript", "jasmine", "karma-jasmine"], "comments": [{"owner": {"reputation": 13470, "user_id": 3092377, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/8lUZ9.jpg?s=128&g=1", "display_name": "Shashank Vivek", "link": "https://stackoverflow.com/users/3092377/shashank-vivek"}, "edited": false, "score": 1, "creation_date": 1566991323, "post_id": 57690695, "comment_id": 101826753, "body": "You are over complicating it and not doing it right. Share your  <code>component</code> code. I would highly recommend <a href=\"https://medium.com/@shashankvivek.7/say-hi-to-jasmine-karma-in-angular-intro-d728d669a1c7\" rel=\"nofollow noreferrer\">this beginner article which I wrote</a> and <a href=\"https://medium.com/@shashankvivek.7/testing-a-component-with-stub-services-and-spies-in-jasmine-1428d4242a49\" rel=\"nofollow noreferrer\">this specific article for this question</a> ."}, {"owner": {"reputation": 13470, "user_id": 3092377, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/8lUZ9.jpg?s=128&g=1", "display_name": "Shashank Vivek", "link": "https://stackoverflow.com/users/3092377/shashank-vivek"}, "edited": false, "score": 0, "creation_date": 1566991471, "post_id": 57690695, "comment_id": 101826833, "body": "Try to understand the essence of <code>unit testing</code> before directly jumping into it, otherwise it would be of not much use ,no matter how much time you put into it :)  . Update the question with component code , if you need further help after reading those articles , and your new <code>spec</code> code"}, {"owner": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1566991648, "post_id": 57690695, "comment_id": 101826916, "body": "Also, it looks like you want to test the ProjectManagementService getProject() method. But actually, you are providing a stub service as the object under test. Your question does not contain the code of the stub service which makes it hard to give any advice."}, {"owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "reply_to_user": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1566993107, "post_id": 57690695, "comment_id": 101827756, "body": "@Stevy. I added the component service stub also. Kindly check."}, {"owner": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1566994370, "post_id": 57690695, "comment_id": 101828466, "body": "Your test setup suggests you are testing ProjectManagementComponent while in reality you are trying to test a service method. Then, actually, you are testing a stub class when you should test your real service class. One more thing I noticed is you are using deprecated angular/http which you should replace by angular/common/http. See <a href=\"https://angular.io/guide/http#testing-http-requests\" rel=\"nofollow noreferrer\">angular.io/guide/http#testing-http-requests</a>"}, {"owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "edited": false, "score": 0, "creation_date": 1566996477, "post_id": 57690695, "comment_id": 101829732, "body": "I want to test all... Component which has services from the component.service.ts file and since services..which i tried to test from service.ts file but I saw that you need to create a stub for it. So i did it. Can&#39;t we test all in one ?"}, {"owner": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1566996691, "post_id": 57690695, "comment_id": 101829859, "body": "You might want to create stubs for the <i>dependencies</i> of your object under test, not for the object itself. Apart from that, you should keep your unit tests for the component and the service in separate files following the <a href=\"https://angular.io/guide/file-structure\" rel=\"nofollow noreferrer\">Angular project structure</a>"}, {"owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "reply_to_user": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1566996840, "post_id": 57690695, "comment_id": 101829960, "body": "@Stevy . You might want to create stubs for the dependencies of your object under test, not for the object itself.  - Means ?"}, {"owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "edited": false, "score": 0, "creation_date": 1566997198, "post_id": 57690695, "comment_id": 101830152, "body": "Also, My Component has nested services call to avoid them being in async. So how do i test the methods (/ functions ) in the component. ?"}, {"owner": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1567089963, "post_id": 57690695, "comment_id": 101867605, "body": "Unit testing means you stub/mock dependencies of the unit under test. In your example, if you wanna test ProjectManagementService you mock its dependency HttpClient. If you wanna test ProjectManagementComponent you mock its dependencies (most likely ProductsService and ProjectManagementService)."}], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "reply_to_user": {"reputation": 577, "user_id": 2918809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a222f89d7d94a111997146e5bee7a4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/2918809/stevy"}, "edited": false, "score": 0, "creation_date": 1567505850, "post_id": 57704540, "comment_id": 101974318, "body": "Hi Stevy. Yeah this is working . However, now I have queries in the component - <a href=\"https://stackoverflow.com/questions/57769446/unexpected-value-undefined-imported-by-the-module-dynamictestmodule-in-jasmi\" title=\"unexpected value undefined imported by the module dynamictestmodule in jasmi\">stackoverflow.com/questions/57769446/&hellip;</a>"}], "tags": [], "owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "is_accepted": true, "score": 0, "last_activity_date": 1567061399, "creation_date": 1567061399, "answer_id": 57704540, "question_id": 57690695, "link": "https://stackoverflow.com/questions/57690695/expected-response-with-status-null-null-for-url-null-to-equal-project11/57704540#57704540", "title": "Expected Response with status: null null for URL: null to equal &#39;Project11&#39;", "body": "<p>@Stevy and Shashank, Thanks for your advice. I created a separate service.spec.ts file and tested the service like this - </p>\n\n<pre><code>fdescribe('ProjectManagementServiceStub', () =&gt; {\n  let service: ProjectManagementServiceStub;\n  let httpMock: HttpTestingController;\n  beforeEach(()=&gt;{\n\n      TestBed.configureTestingModule({ providers : [\n          ProjectManagementServiceStub] , \n\n        imports: [HttpClientModule, HttpClientTestingModule,RouterTestingModule, RouterModule, NgbModule, NgxPaginationModule, FormsModule, ReactiveFormsModule, BrowserModule,]\n        ,})\n\n        service = TestBed.get(ProjectManagementServiceStub);\n        httpMock = TestBed.get(HttpTestingController);\n  })\n\n\n  it(\"should be initialized \", inject([ProjectManagementServiceStub], (service1:ProjectManagementServiceStub)=&gt;{\n      expect(service1).toBeTruthy();\n  }));\n\n  it(\"should fetch data asynchronously\", \n     fakeAsync(\n         inject(\n             [ProjectManagementServiceStub, HttpTestingController],\n             (service1: ProjectManagementServiceStub, backend : HttpTestingController)=&gt;{\nconst url = \"http://192.168.x.xxx:3002/api/project/\";\nconst responseObject :any[]= [{\n    projectId: \"ID123\",\n    name: 'Project1'\n}]\nlet response = null;\n\nservice1.getProject().subscribe(\n    (receivedResponse : any) =&gt;{\n        response = receivedResponse;\n        console.log(\"Response = \", response)  \n\n\n        expect (response).toEqual(responseObject);\n        expect(receivedResponse.length).toBe(1);\n    },\n    (error: any) =&gt;{}\n);\n\nconst requestWrapper = backend.expectOne({url :\"http://192.168.x.xxx:3002/api/project/\" });\n\n\nexpect (requestWrapper.request.method). toEqual('GET');\nexpect(requestWrapper.cancelled).toBeFalsy();\n\nrequestWrapper.flush(responseObject)\n\n             }\n         )\n     ))\n\n     afterEach(() =&gt; {\n        httpMock.verify();\n    });\n\n});\n</code></pre>\n\n<p>courtsey - <a href=\"https://blog.knoldus.com/unit-testing-of-angular-service-with-httpclient/\" rel=\"nofollow noreferrer\">https://blog.knoldus.com/unit-testing-of-angular-service-with-httpclient/</a></p>\n\n<p><a href=\"https://alligator.io/angular/testing-httpclient/\" rel=\"nofollow noreferrer\">https://alligator.io/angular/testing-httpclient/</a></p>\n"}], "owner": {"reputation": 741, "user_id": 9874339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAlzP.jpg?s=128&g=1", "display_name": "Techdive", "link": "https://stackoverflow.com/users/9874339/techdive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 57704540, "answer_count": 1, "score": -1, "last_activity_date": 1567061399, "creation_date": 1566989325, "last_edit_date": 1566992972, "question_id": 57690695, "link": "https://stackoverflow.com/questions/57690695/expected-response-with-status-null-null-for-url-null-to-equal-project11", "title": "Expected Response with status: null null for URL: null to equal &#39;Project11&#39;", "body": "<p>I am using angular7 and doing unit testing in jasmine and karma. And I am facing error - </p>\n\n<blockquote>\n  <p>Error: Expected Response with status: null null for URL: null to equal 'Project11'.</p>\n</blockquote>\n\n<p>My packages versions are -</p>\n\n<blockquote>\n  <p>\"@types/jasmine\": \"~2.8.6\",\n      \"@types/jasminewd2\": \"~2.0.3\",\n      \"@types/jquery\": \"^3.3.22\",\n      \"@types/node\": \"~8.9.4\",\n      \"codelyzer\": \"~4.2.1\",\n      \"jasmine-core\": \"~2.99.1\",\n      \"jasmine-spec-reporter\": \"~4.2.1\",\n      \"karma\": \"~1.7.1\",\n      \"karma-chrome-launcher\": \"~2.2.0\",\n      \"karma-coverage-istanbul-reporter\": \"~1.4.2\",\n      \"karma-jasmine\": \"~1.1.1\",\n      \"karma-jasmine-html-reporter\": \"^0.2.2\",\n      \"protractor\": \"^5.4.1\",\n      \"ts-node\": \"~5.0.1\",\n      \"tslint\": \"~5.9.1\",\n      \"typescript\": \"~3.1.3\"</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/39472364/testing-cant-resolve-all-parameters-for-classname\">Testing - Can&#39;t resolve all parameters for (ClassName)</a></p>\n\n<pre><code>import { inject } from '@angular/core/testing';\nimport { MockBackend, MockConnection } from '@angular/http/testing';\nimport {\n  Http, HttpModule, XHRBackend, ResponseOptions,\n  Response, BaseRequestOptions\n} from '@angular/http';\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA, NO_ERRORS_SCHEMA} from '@angular/core';;\n\n\nfdescribe('ProjectManagementComponent', () =&gt; {\n  let comp: ProjectManagementComponent;\n  let fixture: ComponentFixture&lt;ProjectManagementComponent&gt;;\n  let de: DebugElement;\n  let el: HTMLElement;\n\n  beforeEach(async(() =&gt; {\n    TestBed.configureTestingModule({\n      declarations: [ProjectManagementComponent],\n      schemas: [CUSTOM_ELEMENTS_SCHEMA, NO_ERRORS_SCHEMA],\n      imports: [HttpClientModule, RouterTestingModule, RouterModule, NgbModule, NgxPaginationModule, FormsModule, ReactiveFormsModule, BrowserModule,],\n      providers: [{ provide: ProjectManagementServiceStub, useClass: ProjectManagementServiceStub },\n      { provide: ProductsService, useClass: ProductsService }, {\n        provide: HttpClient,Http, useFactory: (backend, options) =&gt; {\n          return new Http(backend, options);\n        },\n        deps: [MockBackend, BaseRequestOptions]\n      },\n        MockBackend,\n        BaseRequestOptions,ProjectManagementService\n      ]\n    }) .compileComponents()\n\n  }));\n\n  beforeEach(async(() =&gt; {\n    fixture = TestBed.createComponent(ProjectManagementComponent);\n    comp = fixture.componentInstance;\n\n    fixture.nativeElement.querySelectorAll('button');\n  }));\n\n  it('should create component', () =&gt; {\n    fixture = TestBed.createComponent(ProjectManagementComponent);\n    comp = fixture.componentInstance;\n    expect(comp).toBeTruthy();\n  });\n\n\n  it('should get value of toEqual', async(inject([ProjectManagementServiceStub, MockBackend],\n    (service: ProjectManagementServiceStub, backend: MockBackend) =&gt; {\n\n      backend.connections.subscribe((conn: MockConnection) =&gt; {\n        const options: ResponseOptions = new ResponseOptions({ body: 'Project11' });\n        conn.mockRespond(new Response(options));\n      });\n\n      service.getProject(\"http://192.168.5.140:3002/api/project/\").subscribe(res =&gt; {\n        console.log(\"Subscription called\")\n        expect(res).toEqual('Project11')\n      })\n    })))\n});\n</code></pre>\n\n<p>app.component.service.stub.ts</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport { config } from \"config\";\nimport { Observable } from \"rxjs\";\nconst baseUrl: string = config.url;\n\n@Injectable()\nexport class ProjectManagementServiceStub {\n    constructor(private http: HttpClient) { }\n\n    getProject(url) :Observable&lt;any&gt;{\n\n        return this.http.get(url )\n            .pipe(map(Response =&gt; Response))\n\n    }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 409, "user_id": 6639439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5yuiG.jpg?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/6639439/sayan"}, "edited": false, "score": 0, "creation_date": 1566990155, "post_id": 57690622, "comment_id": 101826168, "body": "You have created a loader component, not a custom structural directive. Check how to create custom directive here - <a href=\"https://stackoverflow.com/questions/34613065/what-is-the-difference-between-component-and-directive/34616190\" title=\"what is the difference between component and directive\">stackoverflow.com/questions/34613065/&hellip;</a>"}, {"owner": {"reputation": 409, "user_id": 6639439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5yuiG.jpg?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/6639439/sayan"}, "edited": false, "score": 0, "creation_date": 1566990557, "post_id": 57690622, "comment_id": 101826377, "body": "You may find this article useful as well - <a href=\"http://avenshteinohad.blogspot.com/2018/06/custom-ngif-directive.html\" rel=\"nofollow noreferrer\">avenshteinohad.blogspot.com/2018/06/custom-ngif-directive.ht&zwnj;&#8203;ml</a>, <a href=\"https://blog.angularindepth.com/exploring-angular-dom-abstractions-80b3ebcfc02\" rel=\"nofollow noreferrer\">blog.angularindepth.com/&hellip;</a>"}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 409, "user_id": 6639439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5yuiG.jpg?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/6639439/sayan"}, "edited": false, "score": 0, "creation_date": 1566994745, "post_id": 57690622, "comment_id": 101828688, "body": "@SayanSamanta OP created a valid structural directive. The only missing thing was assigning the context variables."}], "answers": [{"comments": [{"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1566991226, "post_id": 57690782, "comment_id": 101826681, "body": "Here&#39;s the working <a href=\"https://stackblitz.com/edit/angular-gjrz2a\" rel=\"nofollow noreferrer\">stackblitz project</a>"}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1566991424, "post_id": 57690782, "comment_id": 101826802, "body": "My apologies, I missed <code>this.context.$implicit = this.context.loader = c;</code>. With this part it works. Why is it required to create an input mirrored context property?"}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1566991658, "post_id": 57690782, "comment_id": 101826920, "body": "No worries :) As stated <a href=\"https://angular.io/guide/structural-directives#microsyntax\" rel=\"nofollow noreferrer\">here</a>, it is the microsyntax of structural directives. <code>$implicit</code> means the default value. When you pass anything with <code>context</code>, you can access them inside the template with the given name."}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1566991904, "post_id": 57690782, "comment_id": 101827073, "body": "However, when I simply pass input to the <code>$implicit</code> it doesn&#39;t work. Only when I pass it to the <code>loader</code> property. Somehow it drastically differs and setting values to <code>$implicit</code> may be wrong (because it seems like they can overlap)."}, {"owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "reply_to_user": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1566993046, "post_id": 57690782, "comment_id": 101827719, "body": "I checked it again. You are right. It can cause an overlap. I currently use this solution in my project. So I too had better have another look at this issue :) If I find something, I will add it here as a comment."}, {"owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "edited": false, "score": 0, "creation_date": 1566994532, "post_id": 57690782, "comment_id": 101828561, "body": "It would be great. It isn&#39;t obvious that you should make this assignment in order to make template variables work though."}], "tags": [], "owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1566989616, "creation_date": 1566989616, "answer_id": 57690782, "question_id": 57690622, "link": "https://stackoverflow.com/questions/57690622/custom-structural-directive-syntax-as-not-working/57690782#57690782", "title": "Custom structural directive syntax &quot;as&quot; not working", "body": "<p>You need to pass <a href=\"https://angular.io/api/core/ViewContainerRef#createembeddedview\" rel=\"nofollow noreferrer\">context</a> to view when using</p>\n\n<pre><code>this.vc.createEmbeddedView(this.templateRef);\n</code></pre>\n\n<p>In order to do it, you can define a <code>context</code> variable inside the directive:</p>\n\n<pre><code>@Directive({\n  selector: '[loader]'\n})\nexport class LoaderDirective {\n    constructor(\n        private readonly templateRef: TemplateRef&lt;any&gt;,\n        private readonly vc: ViewContainerRef,\n        private readonly resolver: ComponentFactoryResolver\n    ) {\n    }\n\n    context: any = {};\n\n    /** True - \u043a\u043e\u043d\u0442\u0435\u043d\u0442, false - \u043b\u043e\u0430\u0434\u0435\u0440 */\n    @Input('loader')\n    set show(c: boolean) {\n        if (c) {\n            this.vc.clear();\n            this.context.$implicit = this.context.loader = c;\n            this.vc.createEmbeddedView(this.templateRef, this.context);\n        } else {\n            this.vc.clear();\n            const comp = this.vc.createComponent(this.factory);\n        }\n    }\n\n    private get factory() {\n        return this.resolver.resolveComponentFactory(LoaderComponent);\n    }\n}\n</code></pre>\n\n<p>Note that <code>$implicit</code> and <code>loader</code> properties of <code>context</code> is assigned separately. This means you can pass any property with <code>context</code> to the view.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 4920, "user_id": 8144405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1430257373725355/picture?type=large", "display_name": "Sergey", "link": "https://stackoverflow.com/users/8144405/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57690782, "answer_count": 1, "score": -1, "last_activity_date": 1567488285, "creation_date": 1566989112, "last_edit_date": 1566995033, "question_id": 57690622, "link": "https://stackoverflow.com/questions/57690622/custom-structural-directive-syntax-as-not-working", "title": "Custom structural directive syntax &quot;as&quot; not working", "body": "<p>I've created a structural directive to show loader when there is no data, however I cannot make \"as\" syntax work (i.e. <code>asyncData$ | async as data</code>).</p>\n\n<p>I've created a <a href=\"https://stackblitz.com/edit/angular-edlefz?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">StackBlitz</a> example.</p>\n\n<p>Here when you click on button it sends data to <code>BehaviorSubject</code>.</p>\n\n<p>If I use <code>ngIf</code> it works but not with my own directive.</p>\n\n<pre><code>&lt;pre *loader=\"name | async as b\"&gt;\n  !{{ b | json }}!\n&lt;/pre&gt;\n\n&lt;hr&gt;\nngIf\n\n&lt;pre *ngIf=\"name | async as b\"&gt;\n  !{{ b | json }}!\n&lt;/pre&gt;\n\n&lt;br&gt;\n\n&lt;button (click)=\"handler()\"&gt;Load data&lt;/button&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/U2m0s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U2m0s.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>This question being considered as \"off-topic\" whilst it's not. </p>\n\n<p>I've created a sample code. It doesn't work, while showing my attempt to solve the issue. The issue is fully connected to the code itself.</p>\n"}, {"tags": ["typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 1769563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CA4DX.jpg?s=128&g=1", "display_name": "Mahmoud Nasr", "link": "https://stackoverflow.com/users/1769563/mahmoud-nasr"}, "edited": false, "score": 0, "creation_date": 1566993880, "post_id": 57691917, "comment_id": 101828212, "body": "This is pure Javascript function which called with onkeypress=&quot;validate(event,&#39;ar&#39;)&quot;  with input control, it is easy to figure it out using angular and typescript"}], "tags": [], "owner": {"reputation": 186, "user_id": 1769563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CA4DX.jpg?s=128&g=1", "display_name": "Mahmoud Nasr", "link": "https://stackoverflow.com/users/1769563/mahmoud-nasr"}, "is_accepted": false, "score": 0, "last_activity_date": 1566993555, "creation_date": 1566993555, "answer_id": 57691917, "question_id": 57690514, "link": "https://stackoverflow.com/questions/57690514/is-there-a-way-to-make-a-textbox-accept-only-arabic-characters-in-angular-6/57691917#57691917", "title": "Is there a way to make a textbox accept only arabic characters in angular 6", "body": "<pre><code>function validate(evt) {\nvar theEvent = evt || window.event;\nvar key = theEvent.keyCode || theEvent.which;\nkey = String.fromCharCode(key);\nvar regex;\n regex = /[\u062f\u062c\u062d\u062e \u0647\u0639\u063a\u0641\u0642\u062b\u0635\u0636\u0630\u0637\u0643\u0645\u0646\u062a\u0627\u0644\u0628\u064a\u0633\u0634\u0638\u0632\u0648\u0629\u0649\u0644\u0627\u0631\u0624\u0621\u0626\u0625\u0644\u0625\u0644\u0623\u0623\u061f\u0622\u0644\u0622]|\\.|\\s/;\n\nif (!regex.test(key)) {\n    theEvent.returnValue = false;\n    if (theEvent.preventDefault) theEvent.preventDefault();\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10922061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SheCXqt9Z4g/AAAAAAAAAAI/AAAAAAAAAD4/RlLE40e9IDI/photo.jpg?sz=128", "display_name": "TheOfficeGamer", "link": "https://stackoverflow.com/users/10922061/theofficegamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566993555, "creation_date": 1566988760, "question_id": 57690514, "link": "https://stackoverflow.com/questions/57690514/is-there-a-way-to-make-a-textbox-accept-only-arabic-characters-in-angular-6", "title": "Is there a way to make a textbox accept only arabic characters in angular 6", "body": "<p>I need to set a validation to a textbox that can only accept arabic characters</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-http-interceptors"], "comments": [{"owner": {"reputation": 1297, "user_id": 6672179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sa5GS.jpg?s=128&g=1", "display_name": "Sheik Althaf", "link": "https://stackoverflow.com/users/6672179/sheik-althaf"}, "edited": false, "score": 0, "creation_date": 1566988229, "post_id": 57690266, "comment_id": 101825123, "body": "what is your angular version?"}, {"owner": {"reputation": 4533, "user_id": 3023947, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/LnmhP.jpg?s=128&g=1", "display_name": "charliebrownie", "link": "https://stackoverflow.com/users/3023947/charliebrownie"}, "reply_to_user": {"reputation": 1297, "user_id": 6672179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sa5GS.jpg?s=128&g=1", "display_name": "Sheik Althaf", "link": "https://stackoverflow.com/users/6672179/sheik-althaf"}, "edited": false, "score": 0, "creation_date": 1566988330, "post_id": 57690266, "comment_id": 101825176, "body": "@SheikAlthaf my Angular version is <b>8.1.0</b>"}, {"owner": {"reputation": 1297, "user_id": 6672179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sa5GS.jpg?s=128&g=1", "display_name": "Sheik Althaf", "link": "https://stackoverflow.com/users/6672179/sheik-althaf"}, "edited": false, "score": 0, "creation_date": 1566988788, "post_id": 57690266, "comment_id": 101825429, "body": "As for as i know that the interceptor depends on the HttpClientModule, so that the request passes directly from AppModule so AuthenticationModule interceptors not getting considers. I&#39;m thinking like that, Maybe others will help.  FYI, <a href=\"https://angular.io/guide/http#http-interceptors\" rel=\"nofollow noreferrer\">angular.io/guide/http#http-interceptors</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": false, "score": 2, "last_activity_date": 1567021259, "creation_date": 1567021259, "answer_id": 57699081, "question_id": 57690266, "link": "https://stackoverflow.com/questions/57690266/httpinterceptor-provided-in-angular-library-is-not-working-from-angular-app/57699081#57699081", "title": "HttpInterceptor provided in Angular library is not working from Angular app", "body": "<p>You're very close to a working solution.</p>\n\n<p>The key is to look at how the module is being imported by the <code>AppModule</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  imports: [\n    BrowserModule,\n    HttpClientModule,\n    AuthenticationModule.forRoot({ /* config stuff */ })\n  ],\n</code></pre>\n\n<p>That is how the <code>AuthenticationModule</code> is imported by the <code>AppModule</code>, but that <code>NgModule</code> does not <em>provide</em> the <code>HTTP_INTERCEPTORS</code>.</p>\n\n<p>You've provided the token in the <code>@NgModule()</code> decorator, but that module is not being used by your application. It's the module defined by the <code>forRoot()</code> function. </p>\n\n<p>Move the declaration of the <code>HTTP_INTERCEPTORS</code> to the <code>forRoot()</code> function.</p>\n\n<p>Try this instead:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n    imports: [ConcreteAuthModule]\n})\nexport class AuthenticationModule {\n    static forRoot(config: AuthConfig): ModuleWithProviders {\n        return {\n            ngModule: AuthenticationModule,\n            providers: [\n                {\n                    provide: AUTH_CONFIG,\n                    useValue: config\n                }, {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: BearerInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 3023947, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/LnmhP.jpg?s=128&g=1", "display_name": "charliebrownie", "link": "https://stackoverflow.com/users/3023947/charliebrownie"}, "is_accepted": true, "score": 1, "last_activity_date": 1567610269, "creation_date": 1567610269, "answer_id": 57791405, "question_id": 57690266, "link": "https://stackoverflow.com/questions/57690266/httpinterceptor-provided-in-angular-library-is-not-working-from-angular-app/57791405#57791405", "title": "HttpInterceptor provided in Angular library is not working from Angular app", "body": "<p>The problem was because I was installing the library locally for testing purposes like the following:</p>\n\n<pre><code>$ npm i --save my-lib_path/dist/my-lib\n</code></pre>\n\n<p>After I published it and installed it from the npm registry it worked fine:</p>\n\n<pre><code>$ npm i --save my-lib\n</code></pre>\n"}], "owner": {"reputation": 4533, "user_id": 3023947, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/LnmhP.jpg?s=128&g=1", "display_name": "charliebrownie", "link": "https://stackoverflow.com/users/3023947/charliebrownie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 57791405, "answer_count": 2, "score": 4, "last_activity_date": 1567610269, "creation_date": 1566987932, "last_edit_date": 1566988500, "question_id": 57690266, "link": "https://stackoverflow.com/questions/57690266/httpinterceptor-provided-in-angular-library-is-not-working-from-angular-app", "title": "HttpInterceptor provided in Angular library is not working from Angular app", "body": "<p>I am developing an Angular library where there is an authentication module that provides an <code>HttpInterceptor</code>. The main idea is to have this interceptor working automatically in any app that imports this authentication module without having to do any extra setup at it.</p>\n\n<p>What I have so far is the following:</p>\n\n<p><strong>AuthenticationModule</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  imports: [ConcreteAuthModule],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: BearerInterceptor,\n      multi: true\n    }\n  ]\n})\nexport class AuthenticationModule {\n  static forRoot(config: AuthConfig): ModuleWithProviders {\n    return {\n      ngModule: AuthenticationModule,\n      providers: [\n        {\n          provide: AUTH_CONFIG,\n          useValue: config\n        }\n      ]\n    };\n  }\n}\n</code></pre>\n\n<p><strong>ConcreteAuthModule</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  imports: [ThirdPartyLibModule],\n  providers: [\n    {\n      provide: AuthenticationService,\n      useClass: ConcreteAuthService\n    }\n  ]\n})\nexport class ConcreteAuthModule { }\n</code></pre>\n\n<p><strong>BearerInterceptor</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Injectable()\nexport class BearerInterceptor implements HttpInterceptor {\n  constructor(private authService: AuthenticationService) { }\n\n  intercept(\n    req: HttpRequest&lt;any&gt;,\n    next: HttpHandler\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    const headers: any = {};\n\n    if (this.authService.isUserAuthenticated()) {\n      headers.Authorization = `Bearer ${this.singleSignOnService.getUserToken()}`;\n    }\n\n    const authReq = req.clone({ setHeaders: headers });\n\n    return next.handle(authReq);\n  }\n}\n</code></pre>\n\n<p>And from a test Angular app I am importing this module the following way at the <strong>AppModule</strong>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    AuthenticationModule.forRoot({ /* config stuff */ })\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n</code></pre>\n\n<p>I checked how some third party libraries did this, also came across a couple of Stack Overflow questions that discussed about this and they all suggested having an Angular module created (I already have it: <code>AuthenticationModule</code>), then provide the http-interceptor on it (already have it too) and finally importing this module from an Angular app (also did this).</p>\n\n<p>But still, none of the http requests in my app are being intercepted.</p>\n\n<p>Tried importing the <code>BearerInterceptor</code> directly from my test app and providing it on the <strong>AppModule</strong> like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { BearerInterceptor } from 'my-lib':\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    AuthenticationModule.forRoot({ /* config stuff */ })\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: BearerInterceptor,\n      multi: true\n    }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n</code></pre>\n\n<p>And that works! But this workaround is not what I am looking for...</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566988021, "post_id": 57690182, "comment_id": 101825008, "body": "Return the observable - <code>return this.httpClient.get(...).pipe(map((res) =&gt; URL.createObjectURL(res)))</code>"}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566990395, "post_id": 57690182, "comment_id": 101826292, "body": "This method return object to template in this case. I change <code>map(res =&gt; URL.createObjectURL(res))</code> to <code>map(res =&gt; &#39;test&#39;)</code> and it still return object"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566991838, "post_id": 57690182, "comment_id": 101827031, "body": "It returns an <i>observable</i>, you&#39;ll need to resolve it"}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566991964, "post_id": 57690182, "comment_id": 101827103, "body": "@jonrsharpe could You give some example please ? I do not know how to do this in this case :/"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566992462, "post_id": 57690182, "comment_id": 101827378, "body": "They cover that in the tutorial: <a href=\"https://angular.io/tutorial\" rel=\"nofollow noreferrer\">angular.io/tutorial</a>"}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566994250, "post_id": 57690182, "comment_id": 101828406, "body": "I can&#39;t see example like my one. The function return me a object, but I need a value."}, {"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1566995638, "post_id": 57690182, "comment_id": 101829241, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198587/discussion-between-storin-and-jonrsharpe\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "edited": false, "score": 0, "creation_date": 1566991693, "post_id": 57690397, "comment_id": 101826936, "body": "This method return object to template in this case. I change <code>map(res =&gt; URL.createObjectURL(res))</code> to <code>map(res =&gt; &#39;test&#39;)</code> and it still return object."}, {"owner": {"reputation": 639, "user_id": 3456021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1cd14813b3135483cea7581a6ab769?s=128&d=identicon&r=PG&f=1", "display_name": "Askirkela", "link": "https://stackoverflow.com/users/3456021/askirkela"}, "reply_to_user": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "edited": false, "score": 1, "creation_date": 1567004148, "post_id": 57690397, "comment_id": 101834489, "body": "Yes. It returns an <code>Observable</code>, which is an object. You can then <code>subscribe</code> to this observable like <code>getImageSrc(&#39;url&#39;).subscribe(image =&gt; &#47;* Do something with your value *&#47;</code>. the point being that you are no longer limited to the <code>getImageSrc</code> method body to do something with the value. (Plus, it being asynchronous can have advantages too)"}], "tags": [], "owner": {"reputation": 639, "user_id": 3456021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1cd14813b3135483cea7581a6ab769?s=128&d=identicon&r=PG&f=1", "display_name": "Askirkela", "link": "https://stackoverflow.com/users/3456021/askirkela"}, "is_accepted": false, "score": 0, "last_activity_date": 1566988337, "creation_date": 1566988337, "answer_id": 57690397, "question_id": 57690182, "link": "https://stackoverflow.com/questions/57690182/how-to-return-blob-url-after-http-request-inside-function-in-angular/57690397#57690397", "title": "How to return blob url after http request inside function in Angular", "body": "<p>Your request is asynchronous. In this case you return <code>result</code> before its assignation in your get request.</p>\n\n<p>Regarding your issue, you could try something like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>getImageSrc(img_url): Observable&lt;any&gt; {\n  console.log('GET IMGAGE SRC', img_url);\n\n  const headers = new HttpHeaders({\n    'Content-Type': 'application/json',\n    'Authorization': $c.params.token\n  });\n\n  return this.httpClient.get(img_url, {\n    responseType: \"blob\",\n    headers: headers\n  }).pipe(\n    map(res =&gt; URL.createObjectURL(res))\n  );\n}\n</code></pre>\n\n<p>That way, you return an observable and can subscribe to it wherever you want.</p>\n"}], "owner": {"reputation": 103, "user_id": 4791772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be81fd4c1975737fe22a22a8d617001a?s=128&d=identicon&r=PG&f=1", "display_name": "storin", "link": "https://stackoverflow.com/users/4791772/storin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566988337, "creation_date": 1566987664, "last_edit_date": 1566988061, "question_id": 57690182, "link": "https://stackoverflow.com/questions/57690182/how-to-return-blob-url-after-http-request-inside-function-in-angular", "title": "How to return blob url after http request inside function in Angular", "body": "<p>I want to make simple chat application. I get messages from service, and ngFor in template print the messages. When I have message image type, I want to get blob from server and return url to image src.</p>\n\n<p>This is what I have</p>\n\n<p><strong><em>HTML Template</em></strong></p>\n\n<pre><code>&lt;div class=\"row message_chat_row\" *ngFor=\"let chatMessage of chatMessages | async\"&gt;\n    &lt;div class=\"col chat_message_outer align-self-center\"&gt;\n        &lt;div class=\"row\" [ngClass]=\"getChatMessageRowClass(chatMessage.sender_type)\"&gt;\n\n&lt;div *ngIf=\"chatMessage.type === 'text' || chatMessage.type === 'info'\" [innerHTML]=\"chatMessage.value\" class=\"conpeek_chat_message_inner\"&gt;&lt;/div&gt;\n\n&lt;div *ngIf=\"chatMessage.type === 'image'\" class=\"chat_message_inner\"&gt;\n                &lt;a (click)=\"downloadImg()\"&gt;&lt;img [src]=\"getImageSrc(chatMessage.value)\"&gt;&lt;/a&gt;\n            &lt;/div&gt;\n\n&lt;div *ngIf=\"chatMessage.type === 'file'\" class=\"chat_message_inner\"&gt;\n                &lt;a (click)=\"downloadFile()\"&gt;{{chatMessage.filename}}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong><em>Chat Component</em></strong></p>\n\n<pre><code>getImageSrc(img_url) {\n    console.log('GET IMGAGE SRC', img_url);\n\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': $c.params.token\n    });\n\n    let result; \n\n    this.httpClient.get(img_url, {\n        responseType: \"blob\",\n        headers: headers\n      }).subscribe(res =&gt; {\n        result = URL.createObjectURL(res);\n      });\n\n    return result;\n  }\n</code></pre>\n\n<p>What should I do in this situation ? I want to return result after request is done.</p>\n"}, {"tags": ["typescript", "jestjs"], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 2139913, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6ec4390d23e22fa1e40ed9ae843ec85a?s=128&d=identicon&r=PG&f=1", "display_name": "Akheloes", "link": "https://stackoverflow.com/users/2139913/akheloes"}, "edited": false, "score": 0, "creation_date": 1566995554, "post_id": 57691393, "comment_id": 101829184, "body": "Hi, actually that would land me other errors <code>error TS2304: Cannot find name &#39;fail&#39;.</code> (<code>expect</code>, <code>it</code>, etc). So while I&#39;d like to avoid the compilation erros of the jest typings, I&#39;d like to compile files that contain these keywords !"}, {"owner": {"reputation": 1215, "user_id": 2139913, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6ec4390d23e22fa1e40ed9ae843ec85a?s=128&d=identicon&r=PG&f=1", "display_name": "Akheloes", "link": "https://stackoverflow.com/users/2139913/akheloes"}, "edited": false, "score": 0, "creation_date": 1566995630, "post_id": 57691393, "comment_id": 101829237, "body": "Maybe a more precise question is how to deal with typings for tests in compilation of old versions of typescript (2.7.1 and older) ?"}], "tags": [], "owner": {"reputation": 9320, "user_id": 5196394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52GqN.jpg?s=128&g=1", "display_name": "hoangdv", "link": "https://stackoverflow.com/users/5196394/hoangdv"}, "is_accepted": false, "score": 0, "last_activity_date": 1566991821, "creation_date": 1566991821, "answer_id": 57691393, "question_id": 57690159, "link": "https://stackoverflow.com/questions/57690159/suppress-an-errno-2-error-in-typescript-compilation/57691393#57691393", "title": "Suppress an ERRNO 2 error in typescript compilation", "body": "<p>Just exclude your <code>node_modules</code> folder. Update you tsconfig file into</p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"allowJs\": true,\n    \"moduleResolution\": \"classic\",\n    \"sourceMap\": true,\n    \"inlineSources\": true,\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"skipLibCheck\": true,\n    \"target\": \"es5\",\n    \"outDir\": \"../../build/\",\n    \"outFile\": \"../../build/framework-client.js\",\n    \"typeRoots\": [\n      \"node_modules/@types\",\n      \"../../node_modules/typescript/lib/lib.d.ts\"\n    ],\n    \"types\": [\"jest\"]\n  },\n  \"files\": [...]\n  \"exclude\": [\n    \"node_modules\"\n  ]\n}\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 2139913, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6ec4390d23e22fa1e40ed9ae843ec85a?s=128&d=identicon&r=PG&f=1", "display_name": "Akheloes", "link": "https://stackoverflow.com/users/2139913/akheloes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566991821, "creation_date": 1566987606, "question_id": 57690159, "link": "https://stackoverflow.com/questions/57690159/suppress-an-errno-2-error-in-typescript-compilation", "title": "Suppress an ERRNO 2 error in typescript compilation", "body": "<p>I have an error in my compilation that is the following: </p>\n\n<pre><code>node_modules/@types/jest/index.d.ts(256,23): error TS1144: '{' or ';' expected.\nnode_modules/@types/jest/index.d.ts(258,9): error TS1005: '(' expected.\nnode_modules/@types/jest/index.d.ts(258,16): error TS1005: ')' expected.\nnode_modules/@types/jest/index.d.ts(278,26): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(278,50): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(279,31): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(279,56): error TS1005: '(' expected.\nnode_modules/@types/jest/index.d.ts(279,62): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(279,69): error TS1005: ')' expected.\nnode_modules/@types/jest/index.d.ts(280,31): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(280,57): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(280,60): error TS1109: Expression expected.\nnode_modules/@types/jest/index.d.ts(282,63): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(282,115): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(284,60): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(284,104): error TS1128: Declaration or statement expected.\nnode_modules/@types/jest/index.d.ts(284,112): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(404,32): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(404,33): error TS1003: Identifier expected.\nnode_modules/@types/jest/index.d.ts(912,11): error TS1005: '&gt;' expected.\nnode_modules/@types/jest/index.d.ts(912,24): error TS1109: Expression expected.\nnode_modules/@types/jest/index.d.ts(912,39): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(912,40): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(912,42): error TS1128: Declaration or statement expected.\nnode_modules/@types/jest/index.d.ts(913,7): error TS1109: Expression expected.\nnode_modules/@types/jest/index.d.ts(914,22): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(914,30): error TS1005: ':' expected.\nnode_modules/@types/jest/index.d.ts(914,74): error TS1005: '(' expected.\nnode_modules/@types/jest/index.d.ts(914,81): error TS1005: ')' expected.\nnode_modules/@types/jest/index.d.ts(929,30): error TS1005: ';' expected.\nnode_modules/@types/jest/index.d.ts(931,13): error TS1005: '(' expected.\nnode_modules/@types/jest/index.d.ts(931,20): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(933,13): error TS1005: '(' expected.\nnode_modules/@types/jest/index.d.ts(934,5): error TS1005: ',' expected.\nnode_modules/@types/jest/index.d.ts(934,7): error TS1109: Expression expected.\nnode_modules/@types/jest/index.d.ts(935,10): error TS1005: ')' expected.\nnode_modules/@types/jest/index.d.ts(1128,1): error TS1128: Declaration or statement expected.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 2\nnpm ERR! SocleTechniqueClient@0.0.0 tsc-compile-client: `node ./node_modules/typescript/bin/tsc -p projects/framework/tsconfig.client.json`\nnpm ERR! Exit status 2\nnpm ERR!\nnpm ERR! Failed at the SocleTechniqueClient@0.0.0 tsc-compile-client script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n</code></pre>\n\n<p>I would like for my compilation to run without this error, however, I cannot fix the error since it's due to an uncompatibility of my typescript version (2.7.1) and the typing file's syntax of jest. </p>\n\n<p>Hence, I wish to suppress the errors altogether. Some research lead me to the use of the <code>--silent</code> option, it does in fact suppress the <code>npm ERR! errno 2</code> but I still get all the syntax error lines of jest's typing. </p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/54639274/types-jest-index-d-ts-file-returning-error\">post</a> suggests adding a <code>\"skipLibCheck\": true</code> to the <code>tsconfig</code> file, but it did not work for me.</p>\n\n<p>I am looking for a way to suppress even those messages. </p>\n\n<p>BTW: \nMy <code>tsconfig</code> looks something like this: </p>\n\n<pre><code>{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"allowJs\": true,\n    \"moduleResolution\": \"classic\",\n    \"sourceMap\": true,\n    \"inlineSources\": true,\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"skipLibCheck\": true,\n    \"target\": \"es5\",\n    \"outDir\": \"../../build/\",\n    \"outFile\": \"../../build/framework-client.js\",\n    \"typeRoots\": [\n      \"node_modules/@types\",\n      \"../../node_modules/typescript/lib/lib.d.ts\"\n    ],\n    \"types\": [\"jest\"]\n  },\n  \"files\": [...]\n}\n</code></pre>\n"}, {"tags": ["html", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1713, "user_id": 3755353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a3bdf4e88381bb2eecaf937d748a37?s=128&d=identicon&r=PG&f=1", "display_name": "ranjeet8082", "link": "https://stackoverflow.com/users/3755353/ranjeet8082"}, "is_accepted": false, "score": 0, "last_activity_date": 1566988025, "creation_date": 1566988025, "answer_id": 57690298, "question_id": 57690116, "link": "https://stackoverflow.com/questions/57690116/delete-row-from-div-table-when-button-clicked/57690298#57690298", "title": "Delete row from DIV table when button clicked", "body": "<p>After deletion from database delete it from array.</p>\n\n<pre><code>submit(ID){\n    let isDeleted = null;\n    this.alerts.deleteCurrentAlert(ID).subscribe(result =&gt; isDeleted = result);\n    this.manageCurrentAlerts();\n    for(var i = 0; i&lt; this.currentAlerts.length ; i++) {\n     if(this.currentAlerts[i].ID === ID) {\n       this.currentAlerts.splice(i, 1);\n     }\n    }    \n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": true, "score": 1, "last_activity_date": 1566988437, "last_edit_date": 1566988437, "creation_date": 1566988125, "answer_id": 57690318, "question_id": 57690116, "link": "https://stackoverflow.com/questions/57690116/delete-row-from-div-table-when-button-clicked/57690318#57690318", "title": "Delete row from DIV table when button clicked", "body": "<ul>\n<li>Add <code>index</code> in <code>ngFor</code>, <code>*ngFor=\"let com of currentAlerts;let i = index\"</code></li>\n<li>In delete button, pass <code>index</code> i.e <code>i</code> instead of <code>com.ID</code></li>\n<li>Use <code>splice</code> in TS function, <code>this.currentAlerts.splice(index,1)</code></li>\n</ul>\n\n<p>Try like this:</p>\n\n<pre><code>&lt;div class=\"divTableRow\" *ngFor=\"let com of currentAlerts;let i = index\"&gt;\n  ...\n  &lt;div class=\"divTableCell\"&gt;\n    &lt;button mat-stroked-button color=\"primary\" (click)=\"submit(i)\"&gt;Delete&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>TS</p>\n\n<pre><code>submit(index){\n  this.currentAlerts.splice(index,1)\n  ...\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7022809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4dbc00067ca79afe015f646a91ad98?s=128&d=identicon&r=PG&f=1", "display_name": "Pantea V.", "link": "https://stackoverflow.com/users/7022809/pantea-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1566988313, "creation_date": 1566988313, "answer_id": 57690385, "question_id": 57690116, "link": "https://stackoverflow.com/questions/57690116/delete-row-from-div-table-when-button-clicked/57690385#57690385", "title": "Delete row from DIV table when button clicked", "body": "<p>In your response from the server you need to delete the item from the array so in your method: \n<code>this.alerts.deleteCurrentAlert(ID).subscribe(result =&gt; isDeleted = result);</code></p>\n\n<p>you should apply the filter method. Splice could work too but Filter has better performance.</p>\n\n<p>Your method should look like this : </p>\n\n<pre><code>this.alerts.deleteCurrentAlert(ID).subscribe(result =&gt; {\n  this.currentAlerts = this.currentAlerts.filter(item =&gt; item.ID != ID);\n  isDeleted = result;\n});\n\n\n</code></pre>\n"}], "owner": {"reputation": 2245, "user_id": 2050577, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/7a89ef9eede78c07f1d1378d5cf29ac7?s=128&d=identicon&r=PG&f=1", "display_name": "Silentbob", "link": "https://stackoverflow.com/users/2050577/silentbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57690318, "answer_count": 3, "score": 1, "last_activity_date": 1566992048, "creation_date": 1566987469, "last_edit_date": 1592644375, "question_id": 57690116, "link": "https://stackoverflow.com/questions/57690116/delete-row-from-div-table-when-button-clicked", "title": "Delete row from DIV table when button clicked", "body": "<p>I have the following divTable:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=&quot;divTable&quot;&gt;\n        &lt;div class=&quot;divTableBody&quot;&gt;\n                &lt;div class=&quot;divTableRow&quot;&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;TagName&lt;/div&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;Higher/Lower&lt;/div&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;Threshold&lt;/div&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;Delete Alert?&lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;divTableRow&quot; *ngFor=&quot;let com of currentAlerts&quot;&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;{{com.tagname}}&lt;/div&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;{{com.symbol == 1 ? 'Higher than' : 'Lower than'}}&lt;/div&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;{{com.threshold}}&lt;/div&gt;\n                        &lt;div class=&quot;divTableCell&quot;&gt;\n                           &lt;button mat-stroked-button color=&quot;primary&quot; (click)=&quot;submit(com.ID)&quot;&gt;\n                              Delete\n                           &lt;/button&gt;\n                        &lt;/div&gt;\n                &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n<p>As you can see this table loops through the array <code>currentAlerts</code> and creates a row for each item found.</p>\n<p>The array is popuplated within <code>ngOnInit()</code> by connecting to a web API.</p>\n<pre class=\"lang-js prettyprint-override\"><code>this.alerts.getCurrentAlerts(this.loginEmail)\n      .subscribe\n      ((data: CurrentAlerts[]) =&gt; {this.currentAlerts = data;\n        console.log(this.currentAlerts.length)\n        if(!this.currentAlerts || !this.currentAlerts.length){\n          this.alertsTitleMessage = &quot;You have no alerts configured.&quot;\n        }else{\n          this.alertsTitleMessage = &quot;Here are the Alerts you have set up &quot;\n        }}\n      );\n</code></pre>\n<p>When the Delete button is clicked the a delete request is sent to the database.</p>\n<pre class=\"lang-js prettyprint-override\"><code>  submit(ID){\n    let isDeleted = null;\n    this.alerts.deleteCurrentAlert(ID).subscribe(result =&gt; isDeleted = result);\n    this.manageCurrentAlerts();\n    \n  }\n</code></pre>\n<p>All the above works as expected and the data is deleted from the database.</p>\n<h1>Question</h1>\n<p>How do I get the table to remove the deleted row?  I have read answers that state to delete the row from the arra using <code>splice</code> but I couldnt get that working.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "scroll", "angular7"], "comments": [{"owner": {"reputation": 2441, "user_id": 6816518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MpJyjagijP8/AAAAAAAAAAI/AAAAAAAAAgM/JNeyZ_dDCTQ/photo.jpg?sz=128", "display_name": "alt255", "link": "https://stackoverflow.com/users/6816518/alt255"}, "edited": false, "score": 1, "creation_date": 1566987500, "post_id": 57689994, "comment_id": 101824731, "body": "thats how change detection works."}], "answers": [{"comments": [{"owner": {"reputation": 412, "user_id": 1564170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53bb5071493bb5ae3b2ec49ccc94af5c?s=128&d=identicon&r=PG", "display_name": "Rafael S. Fijalkowski", "link": "https://stackoverflow.com/users/1564170/rafael-s-fijalkowski"}, "edited": false, "score": 0, "creation_date": 1609624499, "post_id": 57690288, "comment_id": 115882126, "body": "Great explanation. Every day learning and never finish. Thanks!"}], "tags": [], "owner": {"reputation": 1056, "user_id": 2610466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1290c0352451c49626cbb35ea006de?s=128&d=identicon&r=PG", "display_name": "Krypt1", "link": "https://stackoverflow.com/users/2610466/krypt1"}, "is_accepted": true, "score": 3, "last_activity_date": 1566987991, "creation_date": 1566987991, "answer_id": 57690288, "question_id": 57689994, "link": "https://stackoverflow.com/questions/57689994/angular-7-scroll-event-in-component-re-rendering-all-components-on-scroll/57690288#57690288", "title": "Angular 7 scroll event in component re rendering all components on scroll", "body": "<p>The rendering is triggered by the default change detection strategy.</p>\n\n<p>Basically the <code>HeaderComponent</code> is triggered by <code>HostListener</code> to check the state of the component, which then propagates to the child components.</p>\n\n<p>The <code>FirstComponent</code>'s change detector is by default <code>ChangeDetectionStrategy.Default</code>, because of which it re-checks the state each time change detection is triggered. The other option would be to set <code>ChangeDetectionStrategy</code> to <code>OnPush</code>.</p>\n\n<p>This would make the component to check for changes only whenever the actual state is changed. For example when <code>Input()</code> or <code>Output()</code> is changed or when the template event is raised (<code>(click)=\"onClick()\"</code> in HTML for example).</p>\n\n<p>I would highly recommend to read more about the change detection mechanism in Angular in more details.</p>\n\n<p>Here's the working solution:</p>\n\n<pre><code>import { Component, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-first',\n  template: `{{abc()}}`,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FirstComponent  {\n  constructor() {}\n  abc(){\n    console.log('first component')\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3294, "user_id": 3814490, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2636z.jpg?s=128&g=1", "display_name": "Ghazanfar Khan", "link": "https://stackoverflow.com/users/3814490/ghazanfar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 57690288, "answer_count": 1, "score": 1, "last_activity_date": 1566987991, "creation_date": 1566987101, "question_id": 57689994, "link": "https://stackoverflow.com/questions/57689994/angular-7-scroll-event-in-component-re-rendering-all-components-on-scroll", "title": "Angular 7 scroll event in component re rendering all components on scroll", "body": "<p>I am using HostListener 'window:scroll' event in my component as shown in this <a href=\"https://stackblitz.com/edit/angular-host-listener-scroll-y4xm1u?file=app/app.component.ts\" rel=\"nofollow noreferrer\">demo</a>. While I scroll the components re render itself. In console I am printing sample text which is inside component that should run only one time.</p>\n\n<p>Need help what I am doing wrong here.</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1566987322, "post_id": 57689781, "comment_id": 101824650, "body": "why not subscribe in ngAfterViewChecked?"}, {"owner": {"reputation": 54, "user_id": 10109610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CaCyHb6xUkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oJtvaotdwK5mZ3UGLbjlKFfcGdsw/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/10109610/paula"}, "reply_to_user": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1566990547, "post_id": 57689781, "comment_id": 101826373, "body": "i dont want to load data from the Api/Database, everytime something in the component changes. Or which subscribe do you mean?"}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1566992469, "post_id": 57689781, "comment_id": 101827383, "body": "sorry, I think that was ngAfterViewInit -not your ngAfterViewChanges-"}, {"owner": {"reputation": 54, "user_id": 10109610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CaCyHb6xUkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oJtvaotdwK5mZ3UGLbjlKFfcGdsw/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/10109610/paula"}, "reply_to_user": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1566993243, "post_id": 57689781, "comment_id": 101827838, "body": "@Eliseo no, doesnt change anything. And I dont really know, what you want to achieve with this, i dont see any context to my problem"}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1567014510, "post_id": 57689781, "comment_id": 101839467, "body": "put in ngAfterViewChanges and store in a variable the OBservable, so you only subscribe if this variable is null"}], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 10109610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CaCyHb6xUkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oJtvaotdwK5mZ3UGLbjlKFfcGdsw/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/10109610/paula"}, "edited": false, "score": 0, "creation_date": 1567513035, "post_id": 57697653, "comment_id": 101978106, "body": "This doenst help my problem. :/ I added an if statement in the change detection, not very beautiful but works"}], "tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567014460, "creation_date": 1567014460, "answer_id": 57697653, "question_id": 57689781, "link": "https://stackoverflow.com/questions/57689781/how-to-start-iterablediffer-only-after-oninit/57697653#57697653", "title": "How to start iterableDiffer only after OnInit?", "body": "<p>Always can has a variable 'myObserver' and do</p>\n\n<pre><code>myObserver:any=null\nngAfterViewChecked() {\n    const changes = this.iterableDiffer.diff(this.myArray);\n    if (changes) {\n      changes.forEachAddedItem((record: IterableChangeRecord&lt;MyClass&gt;) =&gt; {\n\n        console.log('Added Changes detected');\n\n        this.StoreService.addToDatabase(record.item);\n      });\n    }\n    if (!myObserver)\n    {\n      const id = this.route.snapshot.params.id;\n      myObserver=this.StoreService.getData(id)\n         .subscribe(data =&gt; this.myArray = data);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 10109610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CaCyHb6xUkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oJtvaotdwK5mZ3UGLbjlKFfcGdsw/mo/photo.jpg?sz=128", "display_name": "Paula", "link": "https://stackoverflow.com/users/10109610/paula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1567014460, "creation_date": 1566986446, "question_id": 57689781, "link": "https://stackoverflow.com/questions/57689781/how-to-start-iterablediffer-only-after-oninit", "title": "How to start iterableDiffer only after OnInit?", "body": "<p>My problem is that the iterableDiffer detect a change when I only what to inialize the data from the database. I dont want to get this first change detection. I only want to get a change detection when the user edits the array.</p>\n\n<p>I tryed to put the database request in the constructor. Didnt change anything.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\n  constructor(\n    private route: ActivatedRoute,\n    private StoreService: StoreService,\n    private iterableDiffers: IterableDiffers\n  ) {\n     this.iterableDiffer = \n       this.iterableDiffers.find([]).create(null);\n  }\n\n  myArray: MyClass[] = [];\n\n  iterableDiffer: IterableDiffer&lt;unknown&gt;;\n\n  ngOnInit() {\n    const id = this.route.snapshot.params.id;\n    this.StoreService.getData(id)\n       .subscribe(data =&gt; this.myArray = data);\n    // on this subscribe, the Differ falsely gets triggered\n  }\n\n  ngAfterViewChecked() {\n    const changes = this.iterableDiffer.diff(this.myArray);\n    if (changes) {\n      changes.forEachAddedItem((record: IterableChangeRecord&lt;MyClass&gt;) =&gt; {\n\n        console.log('Added Changes detected');\n\n        this.StoreService.addToDatabase(record.item);\n      });\n    }\n  }\n\n  // gets called by User Click, here i want to have the Differ called\n  // This works fine\n  addElmt(elmt: MyClass) {\n    this.myArray.push(elmt);\n  }\n\n</code></pre>\n\n<p>The code snippet is a simplified version of the real code. I can not call the <code>StoreService.addToDatabase()</code> in the function <code>addElmt()</code>. This is just for better explanation.</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["angular", "typescript", "angular-material"], "comments": [{"owner": {"reputation": 881, "user_id": 9628950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "skolldev", "link": "https://stackoverflow.com/users/9628950/skolldev"}, "edited": false, "score": 0, "creation_date": 1566985742, "post_id": 57689482, "comment_id": 101823692, "body": "Where is your code?"}, {"owner": {"reputation": 1210, "user_id": 3096646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eFv8S.jpg?s=128&g=1", "display_name": "Nutan", "link": "https://stackoverflow.com/users/3096646/nutan"}, "edited": false, "score": 0, "creation_date": 1566986101, "post_id": 57689482, "comment_id": 101823906, "body": "i see no problems in the above link. It works fine for me... I am able to upload 2 png files one after another without any issues."}, {"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "reply_to_user": {"reputation": 881, "user_id": 9628950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "skolldev", "link": "https://stackoverflow.com/users/9628950/skolldev"}, "edited": false, "score": 0, "creation_date": 1566986114, "post_id": 57689482, "comment_id": 101823918, "body": "My bad @xdecdec, I just edited my original post, here&#39;s the link : <a href=\"https://stackblitz.com/edit/angular-dragdropupload\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-dragdropupload</a>"}, {"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "reply_to_user": {"reputation": 1210, "user_id": 3096646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eFv8S.jpg?s=128&g=1", "display_name": "Nutan", "link": "https://stackoverflow.com/users/3096646/nutan"}, "edited": false, "score": 0, "creation_date": 1566986148, "post_id": 57689482, "comment_id": 101823943, "body": "@Nutan did you add the exact same file twice ?"}, {"owner": {"reputation": 1210, "user_id": 3096646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eFv8S.jpg?s=128&g=1", "display_name": "Nutan", "link": "https://stackoverflow.com/users/3096646/nutan"}, "edited": false, "score": 0, "creation_date": 1566986183, "post_id": 57689482, "comment_id": 101823969, "body": "Yes .. Maybe I checked on your older link. I will check on new link"}, {"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "reply_to_user": {"reputation": 1210, "user_id": 3096646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eFv8S.jpg?s=128&g=1", "display_name": "Nutan", "link": "https://stackoverflow.com/users/3096646/nutan"}, "edited": false, "score": 0, "creation_date": 1566986420, "post_id": 57689482, "comment_id": 101824117, "body": "@Nutan here&#39;s a video showing what issue I&#39;m having : <a href=\"https://i.gyazo.com/8498af8f3100b46b24159e6ed181e7d3.mp4\" rel=\"nofollow noreferrer\">i.gyazo.com/8498af8f3100b46b24159e6ed181e7d3.mp4</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "edited": false, "score": 0, "creation_date": 1566987098, "post_id": 57689951, "comment_id": 101824526, "body": "Thank you, I&#39;ll test this as soon as I finish my lunch ! I&#39;ll keep you updated"}, {"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "edited": false, "score": 0, "creation_date": 1567001616, "post_id": 57689951, "comment_id": 101832951, "body": "@paul your solution works when dragging one or multiple files to the drop zone, but selecting multiple files with the input window (opened when clicking on the + button or on the drag &amp; drop div) won&#39;t work. When selecting multiple files, only the first selected file is added to the array."}, {"owner": {"reputation": 20573, "user_id": 1280587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/j4XVS.png?s=128&g=1", "display_name": "paul", "link": "https://stackoverflow.com/users/1280587/paul"}, "reply_to_user": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "edited": false, "score": 0, "creation_date": 1567065947, "post_id": 57689951, "comment_id": 101853963, "body": "@Mateo yes, that&#39;s an additional problem with your code, I only solved the problem you mentioned in your question"}, {"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "edited": false, "score": 0, "creation_date": 1567072416, "post_id": 57689951, "comment_id": 101857263, "body": "@paul I&#39;m sorry, as I said before I&#39;m a beginner so I might not understand the behavior of an input when selecting multiple files. I don&#39;t get why clearing the value of an input makes it impossible to select multiple files through the input window while dragging multiple files works flawlessly. Is my entire <code>startUpload()</code> function broken ?"}], "tags": [], "owner": {"reputation": 20573, "user_id": 1280587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/j4XVS.png?s=128&g=1", "display_name": "paul", "link": "https://stackoverflow.com/users/1280587/paul"}, "is_accepted": false, "score": 2, "last_activity_date": 1566986941, "creation_date": 1566986941, "answer_id": 57689951, "question_id": 57689482, "link": "https://stackoverflow.com/questions/57689482/cant-add-same-file-to-array-twice-in-a-row-file-upload-form/57689951#57689951", "title": "Can&#39;t add same file to array twice in a row (file upload form)", "body": "<p>You can drag/drop the same file twice in a row, but you cannot add the same file twice using the plus button.</p>\n\n<p>What you need to do is to clear the value of the input control after adding each file.</p>\n\n<pre><code>import { Component, OnInit, Input, ElementRef, ViewChild } from \"@angular/core\";\n\n...\n\nexport class FileUploadComponent implements OnInit {\n\n  @Input() accept = \"image/*\";\n\n  // get reference to fileInput DOM element\n  @ViewChild('fileInput', null) fileInput: ElementRef;\n\n  ...\n\n  startUpload(event) {\n    for (let i = 0; i &lt; event.length; i++) {\n      const file = event[i];\n      if (file.type.split(\"/\")[0] !== \"image\") {\n        console.error(\"The file type of\", file.name, \"is not supported\");\n      } else {\n        this.files.push(file);\n        console.log(file);\n      }\n      //  clear fileinput box after adding file\n      this.fileInput.nativeElement.value = '';\n    }\n  }\n\n  ...\n\n}\n\n\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "edited": false, "score": 0, "creation_date": 1566992762, "post_id": 57690213, "comment_id": 101827557, "body": "I&#39;m a beginner and can&#39;t really figure out how (click) could be applied to this feature. Afaik (click) won&#39;t work when dropping files inside the drag &amp; drop div because it requires the input (or the elements which are bound to it) to be clicked... But I&#39;m probably wrong ! How would you apply (click) in this specific use case ?"}], "tags": [], "owner": {"reputation": 11, "user_id": 7296681, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SHyAeM4eOZE/AAAAAAAAAAI/AAAAAAAAFv0/RChQJkwtuec/photo.jpg?sz=128", "display_name": "Neeraj Chauhan", "link": "https://stackoverflow.com/users/7296681/neeraj-chauhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1566987766, "creation_date": 1566987766, "answer_id": 57690213, "question_id": 57689482, "link": "https://stackoverflow.com/questions/57689482/cant-add-same-file-to-array-twice-in-a-row-file-upload-form/57690213#57690213", "title": "Can&#39;t add same file to array twice in a row (file upload form)", "body": "<p>The Issue with what you have done here is that you are listening to the \"change\" event on your input, and the way this event works is that since you are uploading the same exact file to that form-control, it correctly detects that there is no change here and does not trigger your function. </p>\n\n<p>In my opinion, logically this makes sense. But if you still want to implement this, change the event you are listening to. Change and input will behave this way only, you can use (click) event. </p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 12004033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8991065cbde3e3094531fe094ba46663?s=128&d=identicon&r=PG&f=1", "display_name": "ValentinG", "link": "https://stackoverflow.com/users/12004033/valenting"}, "is_accepted": true, "score": 1, "last_activity_date": 1567278287, "creation_date": 1567278287, "answer_id": 57740912, "question_id": 57689482, "link": "https://stackoverflow.com/questions/57689482/cant-add-same-file-to-array-twice-in-a-row-file-upload-form/57740912#57740912", "title": "Can&#39;t add same file to array twice in a row (file upload form)", "body": "<p>The solution of @paul is correct but just put the reset value after the For</p>\n\n<pre><code>startUpload(event) {\n    for (let i = 0; i &lt; event.length; i++) {\n      const file = event[i];\n      if (file.type.split(\"/\")[0] !== \"image\") {\n        console.error(\"The file type of\", file.name, \"is not supported\");\n      } else {\n        this.files.push(file);\n        console.log(file);\n      }\n    }\n\n    this.fileInput.nativeElement.value = '';\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9702612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a3129b4a552f31a99eec716b328c3?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9702612/mateo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 57740912, "answer_count": 3, "score": 1, "last_activity_date": 1567278287, "creation_date": 1566985561, "last_edit_date": 1566986077, "question_id": 57689482, "link": "https://stackoverflow.com/questions/57689482/cant-add-same-file-to-array-twice-in-a-row-file-upload-form", "title": "Can&#39;t add same file to array twice in a row (file upload form)", "body": "<p>First time posting an issue here \ud83d\ude00 !</p>\n\n<p>So, I have been trying to create my own file upload component with a drag &amp; drop feature, but whenever I try to add an identical file twice in a row, nothing happens.\nNo errors, no nothing.\nMy <code>startUpload()</code> function is simply not executed.</p>\n\n<p>To replicate my issue follow these steps :</p>\n\n<ol>\n<li><p>Add a file (let's call it test1.png) to the array while drag &amp; dropping it or using the button</p></li>\n<li><p>Repeat the first step and you'll see that no file is added to the array.</p></li>\n</ol>\n\n<p>You can add an identical file twice in the array, but not in a row.\nAdding test1.png, then test2.png and again test1.png works.</p>\n\n<p>I know my explanation is kinda messy so here's a link to a Stackblitz project I made to show the issue I'm having :</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-dragdropupload\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-dragdropupload</a></p>\n\n<p>The expected behavior would be that even if a file is identical, I'd be able to add it twice to the array of files.</p>\n"}, {"tags": ["asp.net-mvc", "typescript", "knockout.js"], "answers": [{"tags": [], "owner": {"reputation": 18926, "user_id": 3297291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d0d7237254b7a62c94e8e97cf1e0e29?s=128&d=identicon&r=PG&f=1", "display_name": "user3297291", "link": "https://stackoverflow.com/users/3297291/user3297291"}, "is_accepted": true, "score": 1, "last_activity_date": 1566984757, "creation_date": 1566984757, "answer_id": 57689229, "question_id": 57689057, "link": "https://stackoverflow.com/questions/57689057/knockout-js-data-bind-click-runs-on-page-load/57689229#57689229", "title": "Knockout.js data-bind: click, runs on page load", "body": "<p>When you <code>applyBindings</code>, knockout evaluates all its binding strings.</p>\n\n<p>In the case of <code>click: QuickReplyToSpecificRequestByManager(@item.Id)</code>, it will initialize the <code>click</code> binding (left of the <code>:</code>), by evaluating the part right of the <code>:</code>.</p>\n\n<p>Since <code>QuickRepl...</code> is a function, and it's followed by <code>( ... )</code>, it's being called.</p>\n\n<p>To fix it, you can <code>bind</code> the injected value without calling:</p>\n\n<pre><code>click: QuickReplyToSpecificRequestByManager.bind($data, @item.Id)\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 10944806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hVpc5.png?s=128&g=1", "display_name": "Jacob Zielinski", "link": "https://stackoverflow.com/users/10944806/jacob-zielinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 57689229, "answer_count": 1, "score": 1, "last_activity_date": 1567190305, "creation_date": 1566984145, "last_edit_date": 1567190305, "question_id": 57689057, "link": "https://stackoverflow.com/questions/57689057/knockout-js-data-bind-click-runs-on-page-load", "title": "Knockout.js data-bind: click, runs on page load", "body": "<p>I have a table with a <code>foreach</code> binding. I wan't to create a button that will trigger a function when clicked. Instead the function runs automatically on page load.</p>\n\n<p>I've tried to use a button or empty <code>&lt;td&gt;</code> element with the <code>click</code> binding. The results are the same. </p>\n\n<p>CSHTML</p>\n\n<pre><code>&lt;td&gt;\n\n  &lt;button type=\"button\" \n          class=\"btn btn-primary\" \n          data-bind=\"click: QuickReplyToSpecificRequestByManager(@item.Id)\"\n  &gt;Accept&lt;/button&gt;\n\n&lt;/td&gt;\n</code></pre>\n\n<p>TS</p>\n\n<pre><code>public QuickReplyToSpecificRequestByManager(obs) {\n\n    var data = {\n        idToPass: obs,\n        Description: \"Approved\",\n        Status: 3\n    };\n    if (data.idToPass == undefined) {\n        console.log(\"Id missing\");\n    } else {\n\n        console.log(obs);\n        $.post(\"/Request/SubmitReplyRequestDetails\", data)\n            .done(function () {\n                console.log(\"Success\");\n                window.location.reload();\n            });\n    }\n};\n</code></pre>\n\n<p>I would excpect to run function only when I click the button.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566984808, "post_id": 57688978, "comment_id": 101823224, "body": "What if you actually subscribe to the behaviorsubjects when retrieving the value, are the businesses still emtpy?"}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "reply_to_user": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566985036, "post_id": 57688978, "comment_id": 101823334, "body": "@JelleBruisten Just tried it.. it&#39;s still empty O_o"}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "reply_to_user": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566985141, "post_id": 57688978, "comment_id": 101823383, "body": "@JelleBruisten I updated the log-output and the code. <code>businessesChange</code> is the observable of <code>_businesses</code>."}, {"owner": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566985971, "post_id": 57688978, "comment_id": 101823830, "body": "Seems like the behaviorSubject value is not updated, the behaviorsubject should always put out the latest value even on a new subscribtion. Therefore It seems maybe the applicationState object is not the same as the one used before?"}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "reply_to_user": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566986369, "post_id": 57688978, "comment_id": 101824088, "body": "@JelleBruisten Yes, I just checked this (see my update). Apparently it gets instanciated twice? Should this happen? I thoguth injectables are singleton and get instanciated only once?"}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "reply_to_user": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566986446, "post_id": 57688978, "comment_id": 101824132, "body": ".. and ffs I don&#39;t know how long I am doing it like this already. This worked for weeks and like an hour ago it broke. I can&#39;t recall doing something related to this behavior. I implemented a FormControl and all of a sudden.. boom .."}, {"owner": {"reputation": 391, "user_id": 3834873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9606d15995560df9d1a4b4e16c3d77?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle Bruisten", "link": "https://stackoverflow.com/users/3834873/jelle-bruisten"}, "edited": false, "score": 0, "creation_date": 1566986782, "post_id": 57688978, "comment_id": 101824332, "body": "Indeed it seems like because it&#39;s lazyloaded/in other modules  <a href=\"https://angular.io/guide/singleton-services#the-forroot-pattern\" rel=\"nofollow noreferrer\">angular.io/guide/singleton-services#the-forroot-pattern</a>"}], "answers": [{"tags": [], "owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "is_accepted": true, "score": 1, "last_activity_date": 1566987926, "creation_date": 1566987926, "answer_id": 57690263, "question_id": 57688978, "link": "https://stackoverflow.com/questions/57688978/why-is-my-injectable-service-created-more-than-once/57690263#57690263", "title": "Why is my @Injectable service created more than once?", "body": "<p>Okay, the answer <em>why</em> this happened was apparently due to lazy loading. It seems to have something to do how the dependency tree gets build or something like that. </p>\n\n<p>I do not know the details and I would accept any anser which is more detailed about this topic.</p>\n\n<p>Anyway, I thought it should be enough to provide the service in a <em>parent</em> module. Because it makes sence, doesn't it?</p>\n\n<p>Turns out that this really has to be provided in the <code>app.module.ts</code>. I have another module, called <code>application.module.ts</code> (should not be confused) where I provided <code>ApplicationState</code>. <code>application.module.ts</code> is lazy loaded but also has some routes which are again lazy loaded e.g. <code>businesses.module.ts</code>. So my hierarchy looks something like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>app.module.ts\n|_ application.module.ts  // lazy, providers: [ApplicationState]\n|  |_ businesses.ts       // lazy, uses ApplicationState too\n|_ public-pages.module.ts // not lazy\n</code></pre>\n\n<p>and what I had to change was to set </p>\n\n<pre><code>providers: [ApplicationState]\n</code></pre>\n\n<p>in <code>app.module.ts</code>. </p>\n\n<p>This is not ideal imo but since lazy loading works like this I'll have to deal with it. </p>\n\n<p>Apparently this is a known issue (<a href=\"https://github.com/angular/angular/issues/12869\" rel=\"nofollow noreferrer\">https://github.com/angular/angular/issues/12869</a>) but there is also a possible solution on stack<strong>overflow</strong>: <a href=\"https://stackoverflow.com/a/41293784/826983\">https://stackoverflow.com/a/41293784/826983</a></p>\n"}], "owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 57690263, "answer_count": 1, "score": 1, "last_activity_date": 1566987926, "creation_date": 1566983870, "last_edit_date": 1566987142, "question_id": 57688978, "link": "https://stackoverflow.com/questions/57688978/why-is-my-injectable-service-created-more-than-once", "title": "Why is my @Injectable service created more than once?", "body": "<blockquote>\n  <p><strong>Note:</strong> Please scroll  down to the \"Update\" as the issue was boiled down to a <code>@Injectable</code> service being instanciated more than once.</p>\n</blockquote>\n\n<p>I have a resolver that loads businesses:</p>\n\n<pre><code>resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable&lt;any&gt; | Promise&lt;any&gt; | any {\n  this._logger.debug('Loading application data.');\n  return forkJoin([\n    this._userService.getMe(),\n    this._businessService.getAll()\n  ]).pipe(\n    tap(([user, businesses]) =&gt; {\n      this._appState.user = user;\n      this._appState.businesses = businesses;\n    }),\n    finalize(() =&gt; this._logger.debug('Application data loaded.'))\n  );\n}\n</code></pre>\n\n<p>There is an <code>ApplicationState</code> that has two <code>BehaviorSubject</code> members <code>_business</code> and <code>_businesses</code>:</p>\n\n<pre><code>constructor() {\n  this.businessChange = this._business.asObservable();\n  this.businessesChange = this._businesses.asObservable();\n}\n\nset business(business: BusinessModel) {\n  console.log(business);\n  this._business.next(business);\n}\n\nget business(): BusinessModel {\n  return this._business.getValue();\n}\n\nset businesses(value) {\n  this._businesses.next(value);\n  console.log(this.businesses);\n}\n\nget businesses(): Array&lt;BusinessModel&gt; {\n  return this._businesses.getValue();\n}\n</code></pre>\n\n<p>As you can see, <code>businesses</code> of said state gets set in the resolver. <code>business</code> however depends on the route and gets set in a (lazy-loaded) module depending on that route:</p>\n\n<pre><code>ngOnInit() {\n\n  this._appState.businessesChange.subscribe(\n    (b) =&gt; {\n      console.log('businessesChange');\n      console.log(b);\n    }\n  );\n\n  this._subscriptions.add(\n    this._activatedRoute.params\n      .subscribe((params) =&gt; {\n        this._routeParams = params;\n        const businessId: number = parseInt(params['businessId'], 10);\n        const businesses = this._appState.businesses;\n        console.log(`businessId ${businessId}`);\n        console.log('available businesses');\n        console.log(businesses);\n        this._appState.business = businesses.find(b =&gt; b.id === businessId);\n      })\n  );\n}\n</code></pre>\n\n<p>This is the relevant log output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2019-08-28T09:11:04.989Z DEBUG [..~df7ced28.js:428] Loading application data.\nngx-logger.js:251 2019-08-28T09:11:04.992Z DEBUG [main.js:398] Fetching /me\napplication.state.ts:56 Set businesses:\napplication.state.ts:58 (3)\u00a0[{\u2026}, {\u2026}, {\u2026}]\nngx-logger.js:251 2019-08-28T09:11:06.781Z DEBUG Application data loaded.\nbusinesses.component.ts:43 businessesChange\nbusinesses.component.ts:44 []\nbusinesses.component.ts:47 businessId 4\nbusinesses.component.ts:48 available businesses\nbusinesses.component.ts:49 []\napplication.state.ts:46 Set business:\napplication.state.ts:47 undefined\nngx-logger.js:251 2019-08-28T09:11:08.386Z DEBUG Place is null. No action.\n</code></pre>\n\n<p>As you can see, <code>businesses</code> gets set and contains three elements. Then we see that <em>Application data loaded.</em> from the resolver. After that, we see the <code>_activatedRoute.params</code> subscription stating that the route reveals a <code>businessId</code> of <code>4</code> but then.. <code>this._appState.businesses</code> is all of a sudden an empty list - the initial value of the <code>BehaviorSubject</code> even though we printed that out a few moments earlier.</p>\n\n<p>Since I am logging/debuggin the <code>set</code> methods as well, I can see that this value does <strong>not</strong> get changed after being set to that list of three elements.</p>\n\n<p>I have no idea what's going on here. What could possibly cause this?</p>\n\n<hr>\n\n<p>What I already tried:</p>\n\n<ul>\n<li>Restart the server</li>\n<li>Use the debugger (but I printf-debug anyway)</li>\n</ul>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Okay I have boiled the issue down to the <code>ApplicationState</code> being instanciated more than once:</p>\n\n<p>By giving the <code>ApplicationState</code> a simple ID (timestamp):</p>\n\n<pre><code>constructor() {\n  this.businessChange = this._business.asObservable();\n  this.businessesChange = this._businesses.asObservable();\n  this.timestamp = moment().format('MM.SS SSS');\n  console.log(`${this.timestamp} ApplicationState created`);\n}\n</code></pre>\n\n<p>and changing the log-output in the <code>set</code> and <code>get</code> methods, I get this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>08.09 095 ApplicationState created\nngx-logger.js:251 2019-08-28T09:51:16.098Z DEBUG Loading application data.\nngx-logger.js:251 2019-08-28T09:51:16.099Z DEBUG [main.js:398] Fetching /me\n:4200/#/businesses/4/calendar:1 This site does not have a valid SSL certificate! Without SSL, your site's and visitors' data is vulnerable to theft and tampering. Get a valid SSL certificate before releasing your website to the public.\napplication.state.ts:60 08.09 095 Set businesses:\napplication.state.ts:62 (3)\u00a0[{\u2026}, {\u2026}, {\u2026}]\napplication.state.ts:38 08.14 145 ApplicationState created\nngx-logger.js:251 2019-08-28T09:51:16.161Z DEBUG Application data loaded.\nbusinesses.component.ts:43 businessesChange\nbusinesses.component.ts:44 []\nbusinesses.component.ts:54 businessId 4\nbusinesses.component.ts:55 available businesses\nbusinesses.component.ts:56 []\napplication.state.ts:50 08.14 145 Set business:\napplication.state.ts:51 undefined\nngx-logger.js:251 2019-08-28T09:51:16.178Z DEBUG Place is null. No action.\ncalendar.component.ts:105 \n</code></pre>\n\n<p>So there is a <code>08.09 095</code> (A) and a <code>08.14 145</code> (B) instance of <code>ApplicationState</code>.</p>\n\n<p>A gets the businesses set but further B is used apparently. </p>\n\n<p>I checked, <code>ApplicationState</code> gets imported only once in my <code>ApplicationModule</code>:</p>\n\n<pre><code>providers: [\n  // Services\n  ApplicationState,\n  ApiServices,\n  ApplicationResolver,\n]\n</code></pre>\n\n<p>So why is this happening? Shouldn't this be Singleton? Is it because this goes over a lazy-loaded module?</p>\n\n<p>But most importantly: Why did this work for the last few weeks?</p>\n\n<p>I also added <code>providedIn</code> by now:</p>\n\n<pre><code>@Injectable({providedIn: 'root'})\nexport class ApplicationState {\n</code></pre>\n\n<p>but it still behaves the same.</p>\n"}, {"tags": ["angular", "typescript", "angular-material"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 9467887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7Asg.png?s=128&g=1", "display_name": "Abu Taha", "link": "https://stackoverflow.com/users/9467887/abu-taha"}, "edited": false, "score": 0, "creation_date": 1566995340, "post_id": 57691602, "comment_id": 101829052, "body": "Lopez: Yes that is working but the doc is really confusing and in Will Howell&#39;s comment (<a href=\"https://github.com/angular/components/issues/5252#issuecomment-309832671\" rel=\"nofollow noreferrer\">github.com/angular/components/issues/&hellip;</a>) ,he said it stands for directive so again I&#39;m more confused.And I&#39;m still not clear why they mentioned it in docs if we have to use it with the help of ViewChild."}, {"owner": {"reputation": 64, "user_id": 5765107, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-moR4bMbRoGQ/AAAAAAAAAAI/AAAAAAAABJk/0LDhBKmbQNc/photo.jpg?sz=128", "display_name": "Federico L&#243;pez", "link": "https://stackoverflow.com/users/5765107/federico-l%c3%b3pez"}, "reply_to_user": {"reputation": 211, "user_id": 9467887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7Asg.png?s=128&g=1", "display_name": "Abu Taha", "link": "https://stackoverflow.com/users/9467887/abu-taha"}, "edited": false, "score": 0, "creation_date": 1566995975, "post_id": 57691602, "comment_id": 101829435, "body": "I think he meant that the property name <code>overlayDir</code> stands for overlay directive. So that property is a reference to the overlay directive, but is not a directive by itself."}, {"owner": {"reputation": 121, "user_id": 4772651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153219996671941/picture?type=large", "display_name": "Sushil Kumar Gupta", "link": "https://stackoverflow.com/users/4772651/sushil-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1580142815, "post_id": 57691602, "comment_id": 105992320, "body": "Can we add <code>backdropClass</code> to <code>CdkConnectedOverlay</code> using this? If yes how?"}, {"owner": {"reputation": 64, "user_id": 5765107, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-moR4bMbRoGQ/AAAAAAAAAAI/AAAAAAAABJk/0LDhBKmbQNc/photo.jpg?sz=128", "display_name": "Federico L&#243;pez", "link": "https://stackoverflow.com/users/5765107/federico-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1580221145, "post_id": 57691602, "comment_id": 106021265, "body": "Yes you can do it using:  <code>this.selectComponent.overlayDir.backdropClass = &quot;myCustomBackdropClass&quot;;</code>  But you will have to include the styles for that class in your styles.css file, if you include them on the component&#39;s style file, Angular CSS shadowing and encapsulation logic would avoid them to apply to the child directive. I have updated the stackblitz example to include this."}], "tags": [], "owner": {"reputation": 64, "user_id": 5765107, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-moR4bMbRoGQ/AAAAAAAAAAI/AAAAAAAABJk/0LDhBKmbQNc/photo.jpg?sz=128", "display_name": "Federico L&#243;pez", "link": "https://stackoverflow.com/users/5765107/federico-l%c3%b3pez"}, "is_accepted": false, "score": 1, "last_activity_date": 1566992498, "creation_date": 1566992498, "answer_id": 57691602, "question_id": 57688963, "link": "https://stackoverflow.com/questions/57688963/how-to-use-overlaydir-directive-in-mat-select/57691602#57691602", "title": "How to use &#39;overlayDir&#39; directive in mat-select?", "body": "<p>According to <a href=\"https://material.angular.io/components/select/api\" rel=\"nofollow noreferrer\">Angular Material's documentation</a>, <code>overlayDir</code> is not a directive but a property inside the <code>mat-select</code> component. So you should get <code>mat-select</code> component using the ViewChild decorator, then get the overlayDir property, and finally subscribe to the <code>backdropClick</code> event emitter. Please see this <a href=\"https://stackblitz.com/edit/get-overlaydir-from-mat-select?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">stackblitz example</a>.</p>\n"}], "owner": {"reputation": 211, "user_id": 9467887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7Asg.png?s=128&g=1", "display_name": "Abu Taha", "link": "https://stackoverflow.com/users/9467887/abu-taha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566992498, "creation_date": 1566983825, "question_id": 57688963, "link": "https://stackoverflow.com/questions/57688963/how-to-use-overlaydir-directive-in-mat-select", "title": "How to use &#39;overlayDir&#39; directive in mat-select?", "body": "<p>I want to style mat-select-panel based on its overLay position,so mat-select provides a <code>overlayDir: CdkConnectedOverlay</code> property.</p>\n\n<p>And <code>CdkConnectedOverlay</code> provides property <code>@Output()\npositionChange: EventEmitter&lt;ConnectedOverlayPositionChange&gt;</code> but I can't seem to work it out.</p>\n\n<p>Heres the doc's link: <a href=\"https://material.angular.io/cdk/overlay/api#CdkConnectedOverlay\" rel=\"nofollow noreferrer\">https://material.angular.io/cdk/overlay/api#CdkConnectedOverlay</a></p>\n\n<pre><code> &lt;mat-form-field&gt;\n      &lt;mat-label&gt;Favorite food&lt;/mat-label&gt;\n      &lt;mat-select disableOptionCentering panelClass=\"select-panel-class\" overlayDir (attach)=\"test($event)\" (backdropClick)=\"test($event)\" (positionChange)=\"test($event)\"&gt;\n        &lt;mat-option value=\"food.value1\"&gt;\n          value1\n        &lt;/mat-option&gt;\n        &lt;mat-option value=\"food.value2\"&gt;\n          value2\n        &lt;/mat-option&gt;\n        &lt;mat-option value=\"food.value3\"&gt;\n          value3\n        &lt;/mat-option&gt;\n      &lt;/mat-select&gt;\n &lt;/mat-form-field&gt;\n\n----------------ts-----------------\n\n test(evt){\n    console.log(evt)\n  }\n</code></pre>\n\n<p>It should console log the 'backdropClick' ,'attach' and  'positionChange' events but its not displaying anything nor it is showing any errors.\nAm I using it correctly? If not please explain how to use it.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "ngrx"], "comments": [{"owner": {"reputation": 1433, "user_id": 3345885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/W25fG.jpg?s=128&g=1", "display_name": "Colliot", "link": "https://stackoverflow.com/users/3345885/colliot"}, "edited": false, "score": 0, "creation_date": 1566986105, "post_id": 57688796, "comment_id": 101823907, "body": "Why not <code>state.tasks</code>?"}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "reply_to_user": {"reputation": 1433, "user_id": 3345885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/W25fG.jpg?s=128&g=1", "display_name": "Colliot", "link": "https://stackoverflow.com/users/3345885/colliot"}, "edited": false, "score": 0, "creation_date": 1566986337, "post_id": 57688796, "comment_id": 101824063, "body": "You mean like <code>tasks: payload.payload ? [ ...state.task, payload.payload ] : []</code>?"}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "reply_to_user": {"reputation": 1433, "user_id": 3345885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/W25fG.jpg?s=128&g=1", "display_name": "Colliot", "link": "https://stackoverflow.com/users/3345885/colliot"}, "edited": false, "score": 0, "creation_date": 1566986382, "post_id": 57688796, "comment_id": 101824096, "body": "I get the error <code>Error:(22, 41) TS2339: Property &#39;task&#39; does not exist on type &#39;ITask&#39;.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566986712, "post_id": 57689835, "comment_id": 101824296, "body": "What should the default initial state be in my case?"}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566986853, "post_id": 57689835, "comment_id": 101824368, "body": "I get the error: <code>Error:(5, 21) TS2314: Generic type &#39;State&lt;T&gt;&#39; requires 1 type argument(s).</code>. This is my code: <a href=\"https://pastebin.com/PAuuFzAt\" rel=\"nofollow noreferrer\">pastebin.com/PAuuFzAt</a>"}], "tags": [], "owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "is_accepted": false, "score": 0, "last_activity_date": 1566987145, "last_edit_date": 1566987145, "creation_date": 1566986584, "answer_id": 57689835, "question_id": 57688796, "link": "https://stackoverflow.com/questions/57688796/state-concat-is-not-a-function-type-itask-is-not-an-array-type/57689835#57689835", "title": "state.concat is not a function - Type &#39;ITask&#39; is not an array type", "body": "<p>You need to change your code like this</p>\n\n<pre><code>const initialState: State = {\n  //set default initial state inside\n};\n</code></pre>\n\n<p>Using State interface for initialState not ITask </p>\n\n<p>Since your interface only have 2 property</p>\n\n<pre><code>task: ITask | null;\nerror: any;\n</code></pre>\n\n<p>So your initialState will be</p>\n\n<pre><code>const initialState: State = {\n  task: null,\n  error: null\n};\n</code></pre>\n\n<p>And your reducer</p>\n\n<pre><code>on(TaskActions.dataReceived, (state, payload) =&gt; ({\n    ...state,\n    task: payload.payload ? [ ...state,  payload.payload ] : []\n  })),\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566988010, "post_id": 57690117, "comment_id": 101825003, "body": "I get the error <code>Error:(23, 43) TS2461: Type &#39;Partial&lt;ITask&gt;&#39; is not an array type.</code>: <a href=\"https://imgur.com/oNzV1Ch\" rel=\"nofollow noreferrer\">imgur.com/oNzV1Ch</a>."}, {"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "reply_to_user": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566988874, "post_id": 57690117, "comment_id": 101825482, "body": "@methuselah okay, it looks like <code>state</code> and <code>payload.payload</code> are not arrays. So there is no need to use spread operator. Please, see my updated answer"}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566989658, "post_id": 57690117, "comment_id": 101825908, "body": "Thanks, this works but why is the data structure like this: <a href=\"https://imgur.com/a/z0I5leD\" rel=\"nofollow noreferrer\">imgur.com/a/z0I5leD</a>"}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566990025, "post_id": 57690117, "comment_id": 101826088, "body": "I was expecting an array as follows: tasks: [ { ... }, { ... } ]. This is my code atm: <a href=\"https://pastebin.com/RQ8Qz9C7\" rel=\"nofollow noreferrer\">pastebin.com/RQ8Qz9C7</a>"}, {"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "reply_to_user": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566990117, "post_id": 57690117, "comment_id": 101826140, "body": "@methuselah if <code>payload.payload</code> is <code>task</code> object from your image, then <code>spread</code> operator cannot be used as there is task is object type. However, <code>task.tasks</code> is an array."}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566990593, "post_id": 57690117, "comment_id": 101826390, "body": "Thanks, getting this error: <a href=\"https://imgur.com/a/AkaZ5YQ\" rel=\"nofollow noreferrer\">imgur.com/a/AkaZ5YQ</a>. <code>app&#47;core&#47;store&#47;task&#47;task.reducer.ts:23:34 - error TS1003: Identifier expected.  23     tasks: payload.payload ? [ { ..state}, {...payload.payload} ] : []                                     ~ app&#47;core&#47;store&#47;task&#47;task.reducer.ts:23:35 - error TS1003: Identifier expected.  23     tasks: payload.payload ? [ { ..state}, {...payload.payload} ] : []</code>"}, {"owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "reply_to_user": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1566990650, "post_id": 57690117, "comment_id": 101826423, "body": "@methuselah try this approach and add three points: <code>tasks: payload.payload ? [ { ...state}, {...payload.payload} ] : []</code>"}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1567020878, "post_id": 57690117, "comment_id": 101841897, "body": "Thanks and sorry for the late reply. I tried this, and its working, but I get the following data output: <a href=\"https://imgur.com/cc8wvgz\" rel=\"nofollow noreferrer\">imgur.com/cc8wvgz</a>. How do I get it to be an array as follows: <code>tasks: [ { ... }, { ... } ]</code>"}], "tags": [], "owner": {"reputation": 26971, "user_id": 1646240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbd5c282ccb929604467e3b3f900b0d5?s=128&d=identicon&r=PG", "display_name": "StepUp", "link": "https://stackoverflow.com/users/1646240/stepup"}, "is_accepted": true, "score": 1, "last_activity_date": 1566995386, "last_edit_date": 1566995386, "creation_date": 1566987470, "answer_id": 57690117, "question_id": 57688796, "link": "https://stackoverflow.com/questions/57688796/state-concat-is-not-a-function-type-itask-is-not-an-array-type/57690117#57690117", "title": "state.concat is not a function - Type &#39;ITask&#39; is not an array type", "body": "<p><code>Task</code>, <code>payload</code> are not arrays. So, there is no need to use <code>spread</code> operator.</p>\n\n<pre><code>tasks: payload.payload ? [ state,  payload.payload ] : []\n</code></pre>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" rel=\"nofollow noreferrer\">MDN says:</a></p>\n\n<blockquote>\n  <p>Spread syntax allows an iterable such as an <strong>array expression or\n  string</strong> to be expanded in places where zero or more arguments (for function \n  calls) or elements (for array literals) are expected, or an object\n  expression to be expanded in places where zero or more key-value pairs\n  (for object literals) are expected.</p>\n</blockquote>\n\n<p>If you want add them as objects:</p>\n\n<pre><code>tasks: payload.payload ? [ { ...state}, {...payload.payload} ] : []\n</code></pre>\n"}], "owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 57690117, "answer_count": 2, "score": 1, "last_activity_date": 1566995386, "creation_date": 1566983311, "last_edit_date": 1566986666, "question_id": 57688796, "link": "https://stackoverflow.com/questions/57688796/state-concat-is-not-a-function-type-itask-is-not-an-array-type", "title": "state.concat is not a function - Type &#39;ITask&#39; is not an array type", "body": "<p>I'm trying to add an array to my store, but keep getting the following error at <code>tasks: payload.payload ? [ ...state,  payload.payload ] : []</code>, <code>Error:(22, 35) TS2461: Type 'ITask' is not an array type</code>. How do I fix it?</p>\n\n<pre><code>import * as TaskActions from './task.actions';\nimport { Action, createReducer, on } from '@ngrx/store';\nimport { ITask } from '../../models/task';\n\nexport interface State {\n  task: ITask | null;\n  error: any;\n}\n\nconst initialState: ITask = {\n  basketTotal: 0,\n  carePlanPrice: 0,\n  category: null,\n  completionDate: null\n};\n\nexport const taskReducer = createReducer(\n  initialState,\n  on(TaskActions.getData, state =&gt; ({ ...state })),\n  on(TaskActions.dataReceived, (state, payload) =&gt; ({\n    ...state,\n    tasks: payload.payload ? [ ...state,  payload.payload ] : []\n  })),\n  on(TaskActions.dataNotReceived, state =&gt; ({ ...state })),\n  on(TaskActions.signOut, state =&gt; ({ ...state })),\n  on(TaskActions.signOutSuccess, state =&gt; ({ ...state, ...initialState })),\n);\n\nexport function reducer(state: ITask | undefined, action: Action) {\n  return taskReducer(state, action);\n}\n</code></pre>\n\n<p>Screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/93nVJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/93nVJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "angular", "typescript", "blockly", "google-blockly"], "comments": [{"owner": {"reputation": 1861, "user_id": 1298824, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/849ff916cc15ac93b4a45ab2e0fefaad?s=128&d=identicon&r=PG", "display_name": "Nithin Kumar Biliya", "link": "https://stackoverflow.com/users/1298824/nithin-kumar-biliya"}, "edited": false, "score": 0, "creation_date": 1567612149, "post_id": 57688791, "comment_id": 102017042, "body": "Do you want to have a custom block factory in your project or do you want to use the custom blocks created from the factory in your project? Or are you having trouble integrating blockly with angular?"}], "owner": {"reputation": 177, "user_id": 8406218, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-Cuz1QgqHJyA/AAAAAAAAAAI/AAAAAAAAAkk/1pGgHvyH5PI/photo.jpg?sz=128", "display_name": "Sohel Ahmed", "link": "https://stackoverflow.com/users/8406218/sohel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568926209, "creation_date": 1566983299, "last_edit_date": 1566985106, "question_id": 57688791, "link": "https://stackoverflow.com/questions/57688791/implement-google-blocklys-block-factory-in-angular-project", "title": "Implement Google-Blockly&#39;s Block Factory in Angular Project", "body": "<p>I want to Implement Block Factory in my Angular Project to create blocks that can be used in my work-space. The link for the block factory demo and github repository are below</p>\n\n<p><a href=\"https://blockly-demo.appspot.com/static/demos/blockfactory/index.html\" rel=\"nofollow noreferrer\">https://blockly-demo.appspot.com/static/demos/blockfactory/index.html</a></p>\n\n<p><a href=\"https://github.com/google/blockly-devtools\" rel=\"nofollow noreferrer\">https://github.com/google/blockly-devtools</a>.</p>\n\n<p>I did not find any reference to implement this feature.</p>\n\n<pre><code>Blockly['JavaScript']['turtle_move_internal'] = function(block) {\n      // Generate JavaScript for moving forward or backwards.\n      const value = block.getFieldValue('VALUE');\n      return 'Turtle.' + block.getFieldValue('DIR') +\n          '(' + value + ', \\'block_id_' + block.id + '\\');\\n';\n    };\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 770, "user_id": 8996129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2c972965678b9a87bcc658ab48286b?s=128&d=identicon&r=PG", "display_name": "Tobias Fuchs", "link": "https://stackoverflow.com/users/8996129/tobias-fuchs"}, "is_accepted": false, "score": 1, "last_activity_date": 1566983640, "creation_date": 1566983640, "answer_id": 57688907, "question_id": 57688778, "link": "https://stackoverflow.com/questions/57688778/display-the-enum-type-in-a-select-box-with-angular-5-and-typescript/57688907#57688907", "title": "Display the enum type in a select box with angular 5 and typescript?", "body": "<p>you can loop throught the keys of the enum and take them as value of your dropdown \n like this:</p>\n\n<pre><code>&lt;select&gt; \n  &lt;option [value]=\"key\" *ngFor=\"let key of getKeys(DateRange)\"&gt;{{ DateRange[key] }}&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>and i the component.ts you have to add the function <code>getKeys</code> like this:</p>\n\n<pre><code>getKeys(obj: any) { return Object.keys(obj); }\n</code></pre>\n\n<p>for sure the enum must also be a part of this component...</p>\n"}, {"tags": [], "owner": {"reputation": 372, "user_id": 6838291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333cf79659440b5c3d9f3668e832363f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/6838291/victor"}, "is_accepted": false, "score": 2, "last_activity_date": 1566983715, "creation_date": 1566983715, "answer_id": 57688929, "question_id": 57688778, "link": "https://stackoverflow.com/questions/57688778/display-the-enum-type-in-a-select-box-with-angular-5-and-typescript/57688929#57688929", "title": "Display the enum type in a select box with angular 5 and typescript?", "body": "<p>You can convert enum like JS object.</p>\n\n<pre><code>Object.values(DateRange); // [ 'Today', 'This Week', 'This Month', 'This Year']\nObject.keys(DateRange); // [ 'TODAY', 'THIS_WEEK', 'THIS_MONTH', 'THIS_YEAR' ]\n</code></pre>\n\n<p>now you can show it use *ngFor</p>\n"}, {"tags": [], "owner": {"reputation": 14180, "user_id": 2358409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RMJS4.png?s=128&g=1", "display_name": "uminder", "link": "https://stackoverflow.com/users/2358409/uminder"}, "is_accepted": false, "score": 1, "last_activity_date": 1566983855, "creation_date": 1566983855, "answer_id": 57688969, "question_id": 57688778, "link": "https://stackoverflow.com/questions/57688778/display-the-enum-type-in-a-select-box-with-angular-5-and-typescript/57688969#57688969", "title": "Display the enum type in a select box with angular 5 and typescript?", "body": "<p>Define the following in your component:</p>\n\n<pre><code>const dateRanges = Object.keys(DateRange).map(key =&gt; DateRange[key]);\nconst selectedDateRange: DateRange = dateRanges[0];\n</code></pre>\n\n<p>Then use it in your template as follows:</p>\n\n<pre><code>&lt;mat-form-field&gt; \n    &lt;mat-select placeholder=\"Date Range\" [(value)]=\"selectedDateRange\"&gt;\n        &lt;mat-option *ngFor=\"let dateRange of dateRanges\" [value]=\"dateRange\"&gt;\n            {{ dateRange }}\n        &lt;/mat-option&gt;\n    &lt;/mat-select&gt;\n&lt;/mat-form-field&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 9902269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6ZmTZssvSsg/AAAAAAAAAAI/AAAAAAAADLU/7Uy5GEVFrHU/photo.jpg?sz=128", "display_name": "Miguel Pinto", "link": "https://stackoverflow.com/users/9902269/miguel-pinto"}, "is_accepted": true, "score": 3, "last_activity_date": 1595873068, "last_edit_date": 1595873068, "creation_date": 1566984127, "answer_id": 57689052, "question_id": 57688778, "link": "https://stackoverflow.com/questions/57688778/display-the-enum-type-in-a-select-box-with-angular-5-and-typescript/57689052#57689052", "title": "Display the enum type in a select box with angular 5 and typescript?", "body": "<p>Define the following in your html:</p>\n<pre><code>&lt;select&gt; \n   &lt;option *ngFor=&quot;let range of Object.keys(ranges)&quot; [ngValue]=&quot;range&quot;&gt;{{ranges[range]}}&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n<p>Define the following in your component:</p>\n<pre><code>ranges= DateRange;\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2031, "favorite_count": 0, "accepted_answer_id": 57689052, "answer_count": 4, "score": 0, "last_activity_date": 1595873068, "creation_date": 1566983239, "last_edit_date": 1566983313, "question_id": 57688778, "link": "https://stackoverflow.com/questions/57688778/display-the-enum-type-in-a-select-box-with-angular-5-and-typescript", "title": "Display the enum type in a select box with angular 5 and typescript?", "body": "<p>I have an angular 5 application. I have declared an enum constant \nnamed DateRange. </p>\n\n<pre><code>export enum DateRange {\n  TODAY = 'Today',\n  THIS_WEEK = 'This Week',\n  THIS_MONTH = 'This Month',\n  THIS_YEAR = 'This Year'\n}\n</code></pre>\n\n<p>I would like to display this enum in my select box in my components html. Any idea how can I achieve it?</p>\n\n<p>I would expect it as follows</p>\n\n<pre><code>&lt;select&gt; \n  &lt;option value=\"TODAY\"&gt; Today &lt;/option&gt;\n  &lt;option value=\"THIS_WEEK\"&gt; This Week&lt;/option&gt;\n  &lt;option value=\"THIS_MONTH\"&gt;This Month &lt;/option&gt;\n  &lt;option value=\"THIS_YEAR\"&gt; This Year &lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular8", "array-push"], "comments": [{"owner": {"reputation": 443, "user_id": 9177552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8580fc8fc62a67947167ca40a050c4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Damian Pio\u015b", "link": "https://stackoverflow.com/users/9177552/damian-pio%c5%9b"}, "edited": false, "score": 0, "creation_date": 1566983263, "post_id": 57688737, "comment_id": 101822378, "body": "<a href=\"https://stackoverflow.com/questions/48041597/angular-4-updating-view-on-array-push\" title=\"angular 4 updating view on array push\">stackoverflow.com/questions/48041597/&hellip;</a>"}, {"owner": {"reputation": 2814, "user_id": 8259771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VmVQA.jpg?s=128&g=1", "display_name": "Yash Krishan", "link": "https://stackoverflow.com/users/8259771/yash-krishan"}, "edited": false, "score": 0, "creation_date": 1566983367, "post_id": 57688737, "comment_id": 101822436, "body": "Share your html code"}, {"owner": {"reputation": 1532, "user_id": 6113960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c1166defd66f28cce815ecb42cbf55?s=128&d=identicon&r=PG&f=1", "display_name": "Yasser Mas", "link": "https://stackoverflow.com/users/6113960/yasser-mas"}, "edited": false, "score": 0, "creation_date": 1566983493, "post_id": 57688737, "comment_id": 101822502, "body": "Please check that you have got success response and log the response first to check the structure, also please mention the html code"}, {"owner": {"reputation": 401, "user_id": 9308080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c27ddd996f7fdc152ccf8d4b0141fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Rushi Patel", "link": "https://stackoverflow.com/users/9308080/rushi-patel"}, "edited": false, "score": 0, "creation_date": 1566984202, "post_id": 57688737, "comment_id": 101822894, "body": "this.myObjects = [...this.myObjects,this.newObj[0]] may be it helps. or can you share more details about what problem you are facing?"}, {"owner": {"reputation": 881, "user_id": 9628950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "skolldev", "link": "https://stackoverflow.com/users/9628950/skolldev"}, "edited": false, "score": 0, "creation_date": 1566984242, "post_id": 57688737, "comment_id": 101822916, "body": "Angular change detection will not detect elements being pushed into an array, only the reference of the array being changed."}, {"owner": {"reputation": 93, "user_id": 11876549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJXHUm9Kqa8/AAAAAAAAAAI/AAAAAAAAABk/KE2JF4IodeA/photo.jpg?sz=128", "display_name": "Hama Bohel", "link": "https://stackoverflow.com/users/11876549/hama-bohel"}, "edited": false, "score": 0, "creation_date": 1567053953, "post_id": 57688737, "comment_id": 101849432, "body": "I&#39;ve updated my question with explain result of each array (dynamic define and direct define element), both of them have elements but only direct define shows in output  and has rendered"}, {"owner": {"reputation": 93, "user_id": 11876549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJXHUm9Kqa8/AAAAAAAAAAI/AAAAAAAAABk/KE2JF4IodeA/photo.jpg?sz=128", "display_name": "Hama Bohel", "link": "https://stackoverflow.com/users/11876549/hama-bohel"}, "edited": false, "score": 0, "creation_date": 1567055720, "post_id": 57688737, "comment_id": 101849845, "body": "I have their result in console but seems the read process for render has problem with dynamic array! same progress for static array works correct and render"}, {"owner": {"reputation": 2289, "user_id": 470014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-Vp8vKkWxtwE/AAAAAAAAAAI/AAAAAAAAENo/ZP9OI9J-5t0/photo.jpg?sz=128", "display_name": "Caltor", "link": "https://stackoverflow.com/users/470014/caltor"}, "edited": false, "score": 0, "creation_date": 1582737873, "post_id": 57688737, "comment_id": 106883638, "body": "Could you put your solution into an answer please."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 11876549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJXHUm9Kqa8/AAAAAAAAAAI/AAAAAAAAABk/KE2JF4IodeA/photo.jpg?sz=128", "display_name": "Hama Bohel", "link": "https://stackoverflow.com/users/11876549/hama-bohel"}, "edited": false, "score": 0, "creation_date": 1567054114, "post_id": 57689224, "comment_id": 101849471, "body": "my code could catch elements and push into array and I have all elements inside array but couldnt use them and render it"}, {"owner": {"reputation": 2289, "user_id": 470014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-Vp8vKkWxtwE/AAAAAAAAAAI/AAAAAAAAENo/ZP9OI9J-5t0/photo.jpg?sz=128", "display_name": "Caltor", "link": "https://stackoverflow.com/users/470014/caltor"}, "edited": false, "score": 0, "creation_date": 1582807398, "post_id": 57689224, "comment_id": 106909273, "body": "I can&#39;t see a comment by xdecdec so no idea what that refers to. Perhaps it has been deleted."}], "tags": [], "owner": {"reputation": 1712, "user_id": 11420760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432eb295e1d61c5ae03aa621b9e3e74b?s=128&d=identicon&r=PG", "display_name": "talhature", "link": "https://stackoverflow.com/users/11420760/talhature"}, "is_accepted": false, "score": 1, "last_activity_date": 1566984742, "creation_date": 1566984742, "answer_id": 57689224, "question_id": 57688737, "link": "https://stackoverflow.com/questions/57688737/array-made-by-array-push-has-elements-but-couldnt-use-angular/57689224#57689224", "title": "Array made by array.push() has elements but couldn&#39;t use angular", "body": "<p>Angular's change detection mechanism does not handle the content change of an array.\nYou can either change the referance of the array as xdecdec suggested earlier in comments or you can implement your own ngDoChange so that you can implement your own way to detect the change of array content.</p>\n\n<p>Check this answer for further explanation on implementing ngDoChange: <a href=\"https://stackoverflow.com/a/42962723/11420760\">https://stackoverflow.com/a/42962723/11420760</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8231499, "user_type": "registered", "profile_image": "https://graph.facebook.com/1836518126676503/picture?type=large", "display_name": "Shlomi Tubul", "link": "https://stackoverflow.com/users/8231499/shlomi-tubul"}, "is_accepted": false, "score": 0, "last_activity_date": 1582807970, "last_edit_date": 1582807970, "creation_date": 1566984949, "answer_id": 57689299, "question_id": 57688737, "link": "https://stackoverflow.com/questions/57688737/array-made-by-array-push-has-elements-but-couldnt-use-angular/57689299#57689299", "title": "Array made by array.push() has elements but couldn&#39;t use angular", "body": "<p>assuming your service return any value, you can call <a href=\"https://angular.io/api/core/ChangeDetectorRef\" rel=\"nofollow noreferrer\">detectchanges</a> method after each arr.push(), because angular does not recognize changes like push / pop automatically. Like so:</p>\n\n<pre><code>constructor(private changeDetectorRef: ChangeDetectorRef) { }\n\npublic testMethod() {\n    this.arr.push({name: 'test'});\n    this.changeDetectorRef.detectChanges();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 11960689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20657c551826c0f66d479fb441e028c8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/11960689/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1567143248, "creation_date": 1567143248, "answer_id": 57720985, "question_id": 57688737, "link": "https://stackoverflow.com/questions/57688737/array-made-by-array-push-has-elements-but-couldnt-use-angular/57720985#57720985", "title": "Array made by array.push() has elements but couldn&#39;t use angular", "body": "<p>if in <code>this.tmpObj</code> you get all data and the problem is when you try to assign this data to <code>this.myObjects</code> then use slice method from arrays <code>this.myObjects = this.tmpObj.slice()</code></p>\n"}, {"tags": [], "owner": {"reputation": 2289, "user_id": 470014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-Vp8vKkWxtwE/AAAAAAAAAAI/AAAAAAAAENo/ZP9OI9J-5t0/photo.jpg?sz=128", "display_name": "Caltor", "link": "https://stackoverflow.com/users/470014/caltor"}, "is_accepted": false, "score": 0, "last_activity_date": 1582810088, "last_edit_date": 1582810088, "creation_date": 1582809243, "answer_id": 60434084, "question_id": 57688737, "link": "https://stackoverflow.com/questions/57688737/array-made-by-array-push-has-elements-but-couldnt-use-angular/60434084#60434084", "title": "Array made by array.push() has elements but couldn&#39;t use angular", "body": "<h2>Method 1 - Use rest / spread operator instead of a push to change the array</h2>\n\n<p>Kudos to Rushi Patel for this method.</p>\n\n<pre><code>this.myObjects = [...this.myObjects, this.newObj[0]];\n</code></pre>\n\n<h2>Method 2 - Use rest / spread operator to change array reference after a push</h2>\n\n<pre><code>this.myObjects.push(this.newObj[0]);\nthis.myObjects = [...this.myObjects];\n</code></pre>\n\n<h2>Method 3 - Use JSON.stringify/parse to change array reference after a push</h2>\n\n<pre><code>this.myObjects.push(this.newObj[0]);\nthis.myObjects = JSON.parse(JSON.stringify(this.myObjects));\n</code></pre>\n\n<h2>Method 4 - Use detectChanges() to notify Angular that something has changed</h2>\n\n<p>This is also suggested in <a href=\"https://stackoverflow.com/a/57689299/470014\">https://stackoverflow.com/a/57689299/470014</a></p>\n\n<pre><code>constructor(private changeDetectorRef: ChangeDetectorRef) { }\n\npublic testMethod() {\n    this.myObjects.push(this.newObj[0]);\n    this.changeDetectorRef.detectChanges();}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 11876549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJXHUm9Kqa8/AAAAAAAAAAI/AAAAAAAAABk/KE2JF4IodeA/photo.jpg?sz=128", "display_name": "Hama Bohel", "link": "https://stackoverflow.com/users/11876549/hama-bohel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1582810088, "creation_date": 1566983122, "last_edit_date": 1567140888, "question_id": 57688737, "link": "https://stackoverflow.com/questions/57688737/array-made-by-array-push-has-elements-but-couldnt-use-angular", "title": "Array made by array.push() has elements but couldn&#39;t use angular", "body": "<p>I have 2 <code>Array&lt;object&gt;</code>. One of them has initial elements and another one has its elements added by <code>array.push()</code> in <code>ngOnInit</code>. In the end, both have the elements in output but html doesn't render the elements which were pushed with <code>.push</code></p>\n\n<pre><code>//the result of array that made by array.push\n&gt; [] \n &gt; 0: {id: '1', title: 'title 1'}\n &gt; 1: {id: '2', title: 'title 2'}\n &gt; 2: {id: '3', title: 'title 3'}\n   length: 3\n &gt; __proto__: Array(0)\n\n\n//initialize array\n&gt; (3) [{\u2026}, {\u2026}, {\u2026}] \n &gt; 0: {id: '1', title: 'title 1'}\n &gt; 1: {id: '2', title: 'title 2'}\n &gt; 2: {id: '3', title: 'title 3'}\n   length: 3\n &gt; __proto__: Array(0)\n</code></pre>\n\n<p>the code</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>newObj;\nerror;\n\nmyObjects: Array&lt;object&gt; = [];\n\nitsObjects: Array&lt;object&gt; = [\n  {\n    id: '1',\n    title: 'title 1'\n  },\n  {\n    id: '2',\n    title: 'title 2'\n  },\n  {\n    id: '3',\n    title: 'title 3'\n  }\n];\n\nngOnInit() {\n  this.subscription = this.mys.myService().subscribe(\n    res =&gt; {\n      this.newObj = res,\n      this.myObjects.push(\n          {\n            id: element.id,\n            title: element.title\n          }\n        )\n    },\n    error =&gt; this.error = error,\n  )\n}\n</code></pre>\n\n<p><strong>Solved</strong></p>\n\n<p>The main notice was <code>this.myObjects = this.tmpObj</code> after <code>forEach</code> that collects all elements for pass to out of <code>ngOnInit</code> scope, I edited my code to:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>servicOutput; //get data\ntmpObj: Array&lt;object&gt; = []; //manage data as temp;\nmyObjects: Array&lt;object&gt; = []; //for collect all elements to html\nerror;\n\nngOnInit() {\n  this.subscription = this.mys.myService().subscribe(\n    res =&gt; {\n      this.servicOutput = res,\n      this.servicOutput.forEach(element =&gt; {\n        this.pushFunc(element);\n        }\n      ),\n      this.myObjects = this.tmpObj; //here collect all elements as an object and pass out of ngOnInit scope\n    },\n    error =&gt; this.error = error,\n  )\n}\n\npushFunc(element) {\n  this.tmpObj.push(\n    {\n      id:    element.id,\n      title: element.title\n    }\n  )\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "react-redux", "next.js"], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "edited": false, "score": 1, "creation_date": 1578498112, "post_id": 57689342, "comment_id": 105459601, "body": "This is not a fix. You may as well just remove Typescript if you&#39;re going to do this."}], "tags": [], "owner": {"reputation": 588, "user_id": 10553879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nbTIa.jpg?s=128&g=1", "display_name": "BURGERFLIPPER101", "link": "https://stackoverflow.com/users/10553879/burgerflipper101"}, "is_accepted": false, "score": -2, "last_activity_date": 1566985086, "creation_date": 1566985086, "answer_id": 57689342, "question_id": 57688660, "link": "https://stackoverflow.com/questions/57688660/next-js-redux-wrapper-w-typescript-implementation-error-store-does-not-exist/57689342#57689342", "title": "Next.Js Redux Wrapper w/ Typescript - Implementation error, store does not exist as type", "body": "<p>Fixed the issue.</p>\n\n<p>I added a simple</p>\n\n<pre><code>interface Props {\n    store: any\n}\n</code></pre>\n\n<p>To circumvent the Typescript error. </p>\n"}, {"comments": [{"owner": {"reputation": 1164, "user_id": 3110920, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bca24c0bfed04fdb620388f3b8f109d0?s=128&d=identicon&r=PG&f=1", "display_name": "Illorian", "link": "https://stackoverflow.com/users/3110920/illorian"}, "edited": false, "score": 1, "creation_date": 1575354715, "post_id": 58698533, "comment_id": 104527711, "body": "But what should I do to get store in some page? <code>NextPageContext</code> does not have field <code>store</code> and I do not understand what type should I set to my page component (functional component)"}], "tags": [], "owner": {"reputation": 193, "user_id": 3242159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wa06f.jpg?s=128&g=1", "display_name": "dramus", "link": "https://stackoverflow.com/users/3242159/dramus"}, "is_accepted": false, "score": 5, "last_activity_date": 1572890305, "last_edit_date": 1572890305, "creation_date": 1572889146, "answer_id": 58698533, "question_id": 57688660, "link": "https://stackoverflow.com/questions/57688660/next-js-redux-wrapper-w-typescript-implementation-error-store-does-not-exist/58698533#58698533", "title": "Next.Js Redux Wrapper w/ Typescript - Implementation error, store does not exist as type", "body": "<p><code>Container</code> is deprecated now; use <code>App</code> instead and pass it props with <code>Store</code>. Setting something to 'any' because it's giving you errors is not a good solution and kind of defeats the whole purpose of using TypeScript in the first place.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import App, { AppContext } from 'next/app'\nimport { Provider } from 'react-redux'\nimport withRedux from 'next-redux-wrapper'\nimport { Store } from 'redux'\nimport Page from '../components/Page'\nimport { initializeStore } from '../store'\n\ninterface Props {\n  store: Store;\n}\n\nclass MyApp extends App&lt;Props&gt; {\n  static async getInitialProps({ Component, ctx }: AppContext) {\n    return {\n      pageProps: (Component.getInitialProps \n        ? await Component.getInitialProps(ctx) \n        : {}),\n    }\n  }\n\n  render() {\n    const { Component, pageProps, store } = this.props\n\n    return (\n      &lt;Provider store={store}&gt;\n        &lt;Page&gt;\n          &lt;Component {...pageProps} /&gt;\n        &lt;/Page&gt;\n      &lt;/Provider&gt;\n    )\n  }\n}\n\nexport default withRedux(initializeStore)(MyApp)\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 10553879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nbTIa.jpg?s=128&g=1", "display_name": "BURGERFLIPPER101", "link": "https://stackoverflow.com/users/10553879/burgerflipper101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2656, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1572890305, "creation_date": 1566982862, "question_id": 57688660, "link": "https://stackoverflow.com/questions/57688660/next-js-redux-wrapper-w-typescript-implementation-error-store-does-not-exist", "title": "Next.Js Redux Wrapper w/ Typescript - Implementation error, store does not exist as type", "body": "<p>I am implementing state management for React. I am using Next.js and Typescript. </p>\n\n<p>I used the next redux wrapper and have the following on /pages/_app.js as instructed by the guide.</p>\n\n<pre><code>import React from \"react\";\nimport {createStore} from \"redux\";\nimport {Provider} from \"react-redux\";\nimport App, {Container} from \"next/app\";\nimport withRedux from \"next-redux-wrapper\";\nimport configureStore from '../state/store';\n\nclass MyApp extends App {\n\n    static async getInitialProps ({Component, ctx}) {\n        return {\n          pageProps: (Component.getInitialProps ? await Component.getInitialProps(ctx) : {})\n        }\n      }\n\n    render() {\n        const {Component, pageProps, store} = this.props;\n        return (\n            &lt;Container&gt;\n                &lt;Provider store={store}&gt;\n                    &lt;Component {...pageProps} /&gt;\n                &lt;/Provider&gt;\n            &lt;/Container&gt;\n        );\n    }\n\n}\n\nexport default withRedux(configureStore)(MyApp);\n</code></pre>\n\n<p>I get a typescript error on the store variable I'm trying to declare in the render() function, which throws me an error as follows:</p>\n\n<pre><code>const store: any\nProperty 'store' does not exist on type 'Readonly&lt;AppInitialProps &amp; { Component: NextComponentType&lt;NextPageContext, any, {}&gt;; router: Router; }&gt; &amp; Readonly&lt;{ children?: ReactNode; }&gt;'.ts(2339)\n</code></pre>\n\n<p>I am unsure as to what the issue is. I am not able to access any type/interface to allow store to be a variable. And this is interesting because this is the solution for many developers when using Typescript/Redux/Next.js. </p>\n\n<p>Any help/pointers would be appreciated, thank you.</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 5385135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r9D6X.jpg?s=128&g=1", "display_name": "Bahador Raghibizadeh", "link": "https://stackoverflow.com/users/5385135/bahador-raghibizadeh"}, "is_accepted": false, "score": 1, "last_activity_date": 1566982866, "creation_date": 1566982866, "answer_id": 57688661, "question_id": 57688599, "link": "https://stackoverflow.com/questions/57688599/how-can-i-select-from-object-array-in-angular/57688661#57688661", "title": "How can I select from object array in angular?", "body": "<pre><code>let min = Math.min(...a.map((item)=&gt;{return item.min}))\nlet max = Math.max(...a.map((item)=&gt;{return item.max}))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5270, "user_id": 694716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d0770bb5d21a52549cae04645449cae2?s=128&d=identicon&r=PG", "display_name": "barteloma", "link": "https://stackoverflow.com/users/694716/barteloma"}, "edited": false, "score": 0, "creation_date": 1566983077, "post_id": 57688683, "comment_id": 101822263, "body": "what means &quot;...&quot; in front of a.map?"}, {"owner": {"reputation": 25159, "user_id": 2930661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/zbiMW.jpg?s=128&g=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/2930661/eddie"}, "reply_to_user": {"reputation": 5270, "user_id": 694716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d0770bb5d21a52549cae04645449cae2?s=128&d=identicon&r=PG", "display_name": "barteloma", "link": "https://stackoverflow.com/users/694716/barteloma"}, "edited": false, "score": 0, "creation_date": 1566983121, "post_id": 57688683, "comment_id": 101822291, "body": "That is spread syntax. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25159, "user_id": 2930661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/zbiMW.jpg?s=128&g=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/2930661/eddie"}, "is_accepted": true, "score": 1, "last_activity_date": 1566983093, "last_edit_date": 1566983093, "creation_date": 1566982943, "answer_id": 57688683, "question_id": 57688599, "link": "https://stackoverflow.com/questions/57688599/how-can-i-select-from-object-array-in-angular/57688683#57688683", "title": "How can I select from object array in angular?", "body": "<p>You can use <code>map</code> to get all min/max values. Use <code>Math.min</code> and <code>Math.max</code> to get the values.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let a = [{min:0, max:10},{min:10, max:810},{min:-10, max:110}];\r\n\r\nlet min = Math.min(...a.map(o =&gt; o.min));\r\nlet max = Math.max(...a.map(o =&gt; o.max));\r\n\r\nconsole.log(min);\r\nconsole.log(max);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Another option is using <code>reduce</code>. This option only needs to loop the array once.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let a = [{min:0, max:10},{min:10, max:810},{min:-10, max:110}];\r\n\r\nlet min = a.reduce((c, v) =&gt; v.min &lt; c ? v.min : c, 0);\r\nlet max = a.reduce((c, v) =&gt; v.max &gt; c ? v.max : c, 0);\r\n\r\nconsole.log(min);\r\nconsole.log(max);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 368, "user_id": 6445892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dSniL.jpg?s=128&g=1", "display_name": "Jonas Johansson", "link": "https://stackoverflow.com/users/6445892/jonas-johansson"}, "edited": false, "score": 0, "creation_date": 1566983124, "post_id": 57688689, "comment_id": 101822293, "body": "<code>_</code>is a library that is not part of native javaScript. If using underscore this would be a good answer. However, since OP is not asking about underscore/lodash I think this answer is not correct."}], "tags": [], "owner": {"reputation": 1592, "user_id": 11016183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usqVz.jpg?s=128&g=1", "display_name": "Seba Cherian", "link": "https://stackoverflow.com/users/11016183/seba-cherian"}, "is_accepted": false, "score": 0, "last_activity_date": 1566983221, "last_edit_date": 1566983221, "creation_date": 1566982953, "answer_id": 57688689, "question_id": 57688599, "link": "https://stackoverflow.com/questions/57688599/how-can-i-select-from-object-array-in-angular/57688689#57688689", "title": "How can I select from object array in angular?", "body": "<p>Try this:</p>\n\n<pre><code> let a = [{min:0, max:10},{min:10, max:810},{min:-10, max:110}];\n\n    let min = Math.min(...a.map(value =&gt; value.min));\n    let max = Math.max(...a.map(value =&gt; value.max));\n</code></pre>\n"}], "owner": {"reputation": 5270, "user_id": 694716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d0770bb5d21a52549cae04645449cae2?s=128&d=identicon&r=PG", "display_name": "barteloma", "link": "https://stackoverflow.com/users/694716/barteloma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 57688683, "answer_count": 3, "score": 1, "last_activity_date": 1566983221, "creation_date": 1566982666, "question_id": 57688599, "link": "https://stackoverflow.com/questions/57688599/how-can-i-select-from-object-array-in-angular", "title": "How can I select from object array in angular?", "body": "<p>I have an object array in my angular (typescript) Project.</p>\n\n<pre><code>let a = [{min:0, max:10},{min:10, max:810},{min:-10, max:110}];\n</code></pre>\n\n<p>So I want to get minimum of min, and maximum of the max items. I need two variables like following:</p>\n\n<pre><code>let min = // minimum of all items min property = -10;\nlet max = // maximum of all items max property = 810;\n</code></pre>\n\n<p>can I do this using lambda or other ways practically?</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 1681, "user_id": 2350208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/G70IT.jpg?s=128&g=1", "display_name": "StickyCube", "link": "https://stackoverflow.com/users/2350208/stickycube"}, "edited": false, "score": 0, "creation_date": 1566982397, "post_id": 57688300, "comment_id": 101821885, "body": "Thanks! That&#39;s exactly what i&#39;m looking for."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1566981710, "creation_date": 1566981710, "answer_id": 57688300, "question_id": 57688140, "link": "https://stackoverflow.com/questions/57688140/using-a-string-literal-as-a-template-parameter-for-a-computed-property-name/57688300#57688300", "title": "Using a string literal as a template parameter for a computed property name", "body": "<p>You can use the build in mapped type <code>Record</code>, which takes a <code>string</code> literal type (or a union of string literal types) which will be the property names, and the type for the member:</p>\n\n<pre><code>interface Stuff&lt;T&gt; {\n  a: number;\n  b: string;\n  c: T;\n}\n\ntype ThingOne = Record&lt;'one', Stuff&lt;string&gt;&gt;;\ntype ThingTwo = Record&lt;'two', Stuff&lt;number&gt;&gt;;\ntype ThingThree = Record&lt;'three', Stuff&lt;boolean&gt;&gt;;\n\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgMpgK4xgHgCoB8yA3gFDLJwBcyIGAtgEbQDc5yjNAzmFKAOZsKCGnjYBfUqTABPAA4o8ACwEB5ECgC8yAEoQEAeygATHAHIDGswBo0mbDh58Q-AgTayFyZQLwB3A2RtPUMTczAAmzssXDomaDcPeUUVF2UoCC1dfSNTMzAlDIgo9BicRgMDABsIOBBEoA\" rel=\"nofollow noreferrer\">Play</a></p>\n"}], "owner": {"reputation": 1681, "user_id": 2350208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/G70IT.jpg?s=128&g=1", "display_name": "StickyCube", "link": "https://stackoverflow.com/users/2350208/stickycube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 57688300, "answer_count": 1, "score": 0, "last_activity_date": 1566981710, "creation_date": 1566981236, "question_id": 57688140, "link": "https://stackoverflow.com/questions/57688140/using-a-string-literal-as-a-template-parameter-for-a-computed-property-name", "title": "Using a string literal as a template parameter for a computed property name", "body": "<p>Lets say i have a few objects each of which contain some property whose type is similar</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\ninterface Stuff&lt;T&gt; {\n  a: number;\n  b: string;\n  c: T;\n}\n\ntype ThingOne {\n  one: Stuff&lt;string&gt;;\n}\n\ntype ThingTwo {\n  two: Stuff&lt;number&gt;;\n}\n\ntype ThingThree {\n  three: Stuff&lt;boolean&gt;;\n}\n\n</code></pre>\n\n<p>Is there some way i can parameterize the property name using generics?\nI was thinking something along the lines of:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\ninterface Thing&lt;T, U&gt; {\n  [key: U]: Stuff&lt;T&gt;;\n}\n\n// then\n\ntype ThingOne = Thing&lt;string, 'one'&gt;;\ntype ThingTwo = Thing&lt;number, 'two'&gt;;\ntype ThingThree = Thing&lt;boolean, 'three'&gt;;\n\n</code></pre>\n\n<p>Obviously <code>[key: U]</code> is incorrect. I cant seem to figure out what it should be or if it's even possible.</p>\n"}, {"tags": ["reactjs", "typescript", "higher-order-functions", "higher-order-components"], "comments": [{"owner": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1566981735, "post_id": 57688082, "comment_id": 101821495, "body": "I don&#39;t understand wrapMyHoc, you pass <code>Component</code> and never use it, you use <code>title</code> but it&#39;s never defined."}, {"owner": {"reputation": 4220, "user_id": 528617, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4hEuv.png?s=128&g=1", "display_name": "Arnab Datta", "link": "https://stackoverflow.com/users/528617/arnab-datta"}, "reply_to_user": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1566981987, "post_id": 57688082, "comment_id": 101821649, "body": "@HMR : updated the code. All I am looking for is to have a way to allow <i>one</i> type that calls <code>wrapMyHoc</code> to always have a default value, and for all other types to not have to specify the default value."}, {"owner": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1566982460, "post_id": 57688082, "comment_id": 101821908, "body": "Something like <code>if Component of type MySecondComponent props.title = &quot;my second title&quot;</code> (obviously not working code)"}, {"owner": {"reputation": 4220, "user_id": 528617, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4hEuv.png?s=128&g=1", "display_name": "Arnab Datta", "link": "https://stackoverflow.com/users/528617/arnab-datta"}, "reply_to_user": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1566983330, "post_id": 57688082, "comment_id": 101822415, "body": "@HMR: That seems like something would go inside the HOC. I don&#39;t want to touch my HOC"}, {"owner": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1566984655, "post_id": 57688082, "comment_id": 101823147, "body": "Can you wrap the HOC and set default value for <code>title</code> if component passed is <code>MySecondComponent</code> and title is undefined? You can&#39;t set a default for it in <code>MySecondComponent</code> because the class returned by HOC also uses the title somewhere right?"}, {"owner": {"reputation": 4220, "user_id": 528617, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4hEuv.png?s=128&g=1", "display_name": "Arnab Datta", "link": "https://stackoverflow.com/users/528617/arnab-datta"}, "reply_to_user": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "edited": false, "score": 0, "creation_date": 1566988696, "post_id": 57688082, "comment_id": 101825376, "body": "<code>You can&#39;t set a default for it in MySecondComponent because the class returned by HOC also uses the title somewhere right? </code> Correct. But I was wondering if there could be two different HOCs (one for the title and one for everything else) and <code>MySecondComponent</code> could just wrap one of them and provide the other."}], "answers": [{"tags": [], "owner": {"reputation": 29842, "user_id": 1641941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q8zet.png?s=128&g=1", "display_name": "HMR", "link": "https://stackoverflow.com/users/1641941/hmr"}, "is_accepted": true, "score": 1, "last_activity_date": 1566989240, "creation_date": 1566989240, "answer_id": 57690663, "question_id": 57688082, "link": "https://stackoverflow.com/questions/57688082/default-values-for-higher-order-components-in-react/57690663#57690663", "title": "Default values for higher order components in React", "body": "<p>Based on your last comment about MySecondComponent usig another HOC, I think you can do it something like this:</p>\n\n<pre><code>const doubeWrappedHOC = Component =&gt; {\n  const HOC = wrapMyHoc(Component);\n  return props =&gt;\n    props.title === undefined &amp;&amp;\n    Component === MySecondComponent\n      ? HOC({ ...props, title: defaultValue })\n      : HOC(props);\n};\n</code></pre>\n\n<p>It is not in TypeScript and <code>MySecondComponent</code> has to be in scope/inported but all your components could use this HOC instead of using another HOC just for MyCompnent. If you want to create MyCompnent with a diffeerent HOC then you can leave out <code>&amp;&amp; Component === MySecondComponent</code>. Re use logic <code>wrapMyHoc</code> again and just set a default for title.</p>\n"}], "owner": {"reputation": 4220, "user_id": 528617, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4hEuv.png?s=128&g=1", "display_name": "Arnab Datta", "link": "https://stackoverflow.com/users/528617/arnab-datta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57690663, "answer_count": 1, "score": 1, "last_activity_date": 1566989240, "creation_date": 1566980975, "last_edit_date": 1566981853, "question_id": 57688082, "link": "https://stackoverflow.com/questions/57688082/default-values-for-higher-order-components-in-react", "title": "Default values for higher order components in React", "body": "<p>Say I have a higher order component:</p>\n\n<pre><code>interface MyHOCInterface { title: string }\n\nexport function wrapMyHoc&lt;T extends MyHOCInterface&gt;(\n  Component: React.ComponentType&lt;T&gt;,) {\n  return class extends React.Component&lt;T&gt; {\n    state = {...this.props,}\n    const {title} = {...(this.props as T)}\n    render() {\n      return(\n        &lt;&gt;\n          {title}\n          &lt;Component {...this.props as T} /&gt;\n        &lt;/&gt;\n      )\n    }\n  }\n}\n</code></pre>\n\n<p>And then some components that I define like this:</p>\n\n<pre><code>export const MyFirstComponent = wrapMyHoc(\n  (props: MyHocInterface) =&gt; (&lt;&gt;&lt;/&gt;)\n)\n\nexport const MySecondComponent = wrapMyHoc(\n  (props: MyHocInterface) =&gt; (&lt;&gt;&lt;/&gt;)\n)\n</code></pre>\n\n<p>Naturally, this would allow me to render them like below. I noticed this code (all instances of the <code>MySecondComponent</code> component always has the same title):</p>\n\n<pre><code>&lt;&gt;\n  &lt;MyFirstComponent title='my first title'/&gt;\n  &lt;MySecondComponent title='my second title' /&gt;\n  &lt;MySecondComponent title='my second title' /&gt;\n  &lt;MySecondComponent title='my second title' /&gt;\n&lt;/&gt;\n</code></pre>\n\n<p>How would I go about putting a default value so I can write the following and still have <code>my second title</code> as the title:</p>\n\n<pre><code>&lt;&gt; &lt;MySecondComponent /&gt; &lt;/&gt;\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11224633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_qtA1B1fWkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdi5ZR1RZGTvxDzhTwjEpPUjKhs7g/mo/photo.jpg?sz=128", "display_name": "cao champ", "link": "https://stackoverflow.com/users/11224633/cao-champ"}, "edited": false, "score": 0, "creation_date": 1566981535, "post_id": 57687985, "comment_id": 101821369, "body": "I know this,I don&#39;t understand why is &quot;&amp;&quot; work different from js."}, {"owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "reply_to_user": {"reputation": 17, "user_id": 11224633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_qtA1B1fWkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdi5ZR1RZGTvxDzhTwjEpPUjKhs7g/mo/photo.jpg?sz=128", "display_name": "cao champ", "link": "https://stackoverflow.com/users/11224633/cao-champ"}, "edited": false, "score": 0, "creation_date": 1566982174, "post_id": 57687985, "comment_id": 101821755, "body": "@caochamp Because this is Typescript."}, {"owner": {"reputation": 163, "user_id": 11020041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94199fe1fcab15009ee4fbbebf436f98?s=128&d=identicon&r=PG", "display_name": "Rauks", "link": "https://stackoverflow.com/users/11020041/rauks"}, "edited": false, "score": 0, "creation_date": 1567083920, "post_id": 57687985, "comment_id": 101863872, "body": "When used on types (like in your question), they are the intersection (&#39;&amp;&#39;) and union (&#39;|&#39;) operators. See <a href=\"https://stackoverflow.com/questions/33875609/typescript-operator\">stackoverflow.com/questions/33875609/typescript-operator</a> answer for more details.  When used on numbers, in Typescript and Javascript, they are bitwise operators (for AND and OR operations). See <a href=\"https://www.w3schools.com/js/js_bitwise.asp\" rel=\"nofollow noreferrer\">w3schools.com/js/js_bitwise.asp</a>."}], "tags": [], "owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "is_accepted": false, "score": 3, "last_activity_date": 1566980627, "creation_date": 1566980627, "answer_id": 57687985, "question_id": 57687929, "link": "https://stackoverflow.com/questions/57687929/what-do-and-after-a-type-name-mean-in-typescript/57687985#57687985", "title": "What do &quot;&amp;&quot; and&quot;|&quot; after a type name mean in typescript?", "body": "<p>That is an <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types\" rel=\"nofollow noreferrer\">intersection type</a>. Basically it combines multiple types into one so your new type <code>Point</code> is an object with the properties of <code>PartialPointX</code> and <code>{ y: number; }</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 11224633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_qtA1B1fWkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdi5ZR1RZGTvxDzhTwjEpPUjKhs7g/mo/photo.jpg?sz=128", "display_name": "cao champ", "link": "https://stackoverflow.com/users/11224633/cao-champ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566982259, "creation_date": 1566980449, "last_edit_date": 1566982259, "question_id": 57687929, "link": "https://stackoverflow.com/questions/57687929/what-do-and-after-a-type-name-mean-in-typescript", "title": "What do &quot;&amp;&quot; and&quot;|&quot; after a type name mean in typescript?", "body": "<p>I saw a typescript code like </p>\n\n<pre><code>type Point = PartialPointX &amp; { y: number; };\n</code></pre>\n\n<p>and I know '&amp;' in javascript is \"and\",'|' is \"OR\", do they work different in typescript?</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 1, "last_activity_date": 1566982595, "creation_date": 1566982595, "answer_id": 57688572, "question_id": 57687627, "link": "https://stackoverflow.com/questions/57687627/narrow-possible-values-of-a-proerty-based-on-keys-in-the-same-object/57688572#57688572", "title": "Narrow possible values of a proerty based on keys in the same object", "body": "<p>You can do it with <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html\" rel=\"nofollow noreferrer\">Generics</a> and <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-1.html\" rel=\"nofollow noreferrer\">keyof/Index Type Query operator</a>.</p>\n\n<p>1.) Add generic type parameter <code>B</code> to your Config class, that is assignable to/extends BrandConfig:</p>\n\n<pre><code>export class Config&lt;B extends BrandsConfig&gt; implements IConfig&lt;B&gt; {\n  public readonly brands: B;\n\n  public readonly master: keyof B;\n\n  public constructor(init: IConfig&lt;B&gt;) {\n    // Make it compile. Feel free to replace it by delegates, getters,etc.\n    this.brands = init.brands;\n    this.master = init.master;\n  }\n}\n</code></pre>\n\n<p>2.) Also add a corresponding generic type parameter in <code>IConfig</code>, so we can define master as a key that is dependent on your keys in BrandsConfig:</p>\n\n<pre><code>export interface IConfig&lt;B extends BrandsConfig&gt; {\n  brands: B;\n  master: keyof B;\n}\n</code></pre>\n\n<p>Let's test the client side. Here we expect an error, if we pass in the wrong key for <code>master</code>. </p>\n\n<pre><code>const myConfig = {\n  brands: {\n    brand1: { encryptionKey: \"\", db: {} },\n    brand2: { encryptionKey: \"\", db: {} }\n  },\n  master: \"brand1\"\n} as const\n\nconst config = new Config(myConfig); // works!\n</code></pre>\n\n<p>Now change your master property to <code>master: \"Wanna be a brand\"</code>, then you'll get:</p>\n\n<blockquote>\n  <p>Type '\"Wanna be a brand\"' is not assignable to type '\"brand1\" | \"brand2\"'.</p>\n</blockquote>\n\n<p>Also note, that we use <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#const-assertions\" rel=\"nofollow noreferrer\">const assertions</a> to narrow down the inferred type of <code>myConfig</code>.</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAKuEHkBOBbAsgewCYFcA2iYwAlhgHYDOUAvFDmQNZkYDuZA3AFCcQAeYGJMCjEywCEgBmAQwDG0AIJgwAYXKTiAcygBvTlCgQyspOBLkA0hBAAuKBWBJRmrgawAjO3EjJ02fITmlFwAvtx8AkIiYhIy8lAAQkjSZFgUamQa2noGAPQAVPn6BvmJyalQZNIoEMVQ+bnFANoM1nYOTmSaALp2SqrqWqHh-ILCouJSctAAkhlZADwJhrziqVRJKWnzWgB8usXu5Wl2Ca5QKNIOEnatIBiSicM8o1GyeFdUO5pLK2tpZS26UGmn2xBQYAINTEVDmIKW+xyUDAOHceGIsigSAg0iw5DwICgRyBpy4xRRaIxWJxeLIBIuV0mt2sDye3AMFPRmNk5A6OFkwEEAApRMRgHY4ZktAiAJQHAx5XIM1oiYQ8iHEAgAOjqUFySskEAgeCgkmx0EF1Mh01VRMJWGNEE00nEFAANFBNBBgJN3d7ZDqFVBgAALYgULXE9Y0aJiyPHCjnAyh8Nay7XJAx0XANOMiTnMJhTg8yjCFAgb4xpFRk7yhU1gCMdh0hmMpiIpDIVlsUAARL2PR5myEoCE3bqawAmZutkxmTvduz9weeXQjsIGMfFdNMvuN3ucEdXKAlhzcU9qkExsgQFhQb5C8vfGXsKCcIA\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 1313, "user_id": 2679866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c043927880f4c0ffa4606631b12e91f3?s=128&d=identicon&r=PG", "display_name": "boen_robot", "link": "https://stackoverflow.com/users/2679866/boen-robot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 57688572, "answer_count": 1, "score": 0, "last_activity_date": 1566982595, "creation_date": 1566979365, "question_id": 57687627, "link": "https://stackoverflow.com/questions/57687627/narrow-possible-values-of-a-proerty-based-on-keys-in-the-same-object", "title": "Narrow possible values of a proerty based on keys in the same object", "body": "<p>I have the following structure:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface AppConfig {\n  encryptionKey: string;\n  db: TypeOrmModuleOptions;\n}\n\nexport interface BrandsConfig {\n  /**\n   * Brand name\n   */\n  [key: string]: AppConfig;\n}\n\nexport interface IConfig {\n  brands: BrandsConfig;\n  master: string;\n}\n\nexport class Config implements IConfig {\n  public readonly brands: BrandsConfig;\n  public readonly master: string;\n  public constructor(init: IConfig) {\n    Object.assign(this, init);\n  }\n}\n\n</code></pre>\n\n<p>The idea is that BrandsConfig is a key/value collection, where the value is a setting for this named instance. Meanwhile, \"master\" is supposed to give one (and only one) of those instances a special status.</p>\n\n<p>Is there any way I can statically restrict the possible values of \"master\" (at least in the Config class, ideally in the interface as well), so that they aren't just any string, but a string that's within the BrandConfig keys? I know I could do this check at runtime in the constructor, but I am trying to move as much checks as I can into the compilation phase, and offer proper intellisense for it.</p>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "ionic4", "capacitor"], "comments": [{"owner": {"reputation": 901, "user_id": 5902532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d63fb72be1b9562418ad3eb63f46588?s=128&d=identicon&r=PG&f=1", "display_name": "WirelessKiwi", "link": "https://stackoverflow.com/users/5902532/wirelesskiwi"}, "edited": false, "score": 0, "creation_date": 1566979255, "post_id": 57687420, "comment_id": 101820157, "body": "The problem here is getUserProfile() returns null or undefined."}], "answers": [{"tags": [], "owner": {"reputation": 752, "user_id": 2909375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30851b13fe9a526da30ca969d467a73?s=128&d=identicon&r=PG&f=1", "display_name": "egorgrushin", "link": "https://stackoverflow.com/users/2909375/egorgrushin"}, "is_accepted": false, "score": 1, "last_activity_date": 1566978811, "creation_date": 1566978811, "answer_id": 57687471, "question_id": 57687420, "link": "https://stackoverflow.com/questions/57687420/how-to-fix-unable-to-get-property-get-of-undefined-or-null-reference/57687471#57687471", "title": "How to fix &quot; Unable to get property &#39;get&#39; of undefined or null reference &quot;", "body": "<p>Probable your <code>this.profileService.getUserProfile()</code> just returns null or undefined. Check it using chrome dev tools Source tab (search your file using ctrl (cmd) + p)</p>\n"}, {"tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": true, "score": 0, "last_activity_date": 1566979130, "creation_date": 1566979130, "answer_id": 57687565, "question_id": 57687420, "link": "https://stackoverflow.com/questions/57687420/how-to-fix-unable-to-get-property-get-of-undefined-or-null-reference/57687565#57687565", "title": "How to fix &quot; Unable to get property &#39;get&#39; of undefined or null reference &quot;", "body": "<p>Try like this:</p>\n\n<pre><code>ngOnInit() {\n\nif(this.profileService.getUserProfile() {\n    this.profileService\n      .getUserProfile()\n      .get()\n      .then(userProfileSnapshot =&gt; {\n        this.userProfile = userProfileSnapshot.data();\n        this.birthDate = userProfileSnapshot.data().birthDate;\n      });\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10544000, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IVwP_qPh7Fk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC6Bw5dNsRGJM1AZ1HAavurvV0zGw/mo/photo.jpg?sz=128", "display_name": "Amp", "link": "https://stackoverflow.com/users/10544000/amp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 57687565, "answer_count": 2, "score": 0, "last_activity_date": 1566979130, "creation_date": 1566978637, "question_id": 57687420, "link": "https://stackoverflow.com/questions/57687420/how-to-fix-unable-to-get-property-get-of-undefined-or-null-reference", "title": "How to fix &quot; Unable to get property &#39;get&#39; of undefined or null reference &quot;", "body": "<p>I'm trying to create application. However I keep getting error saying \"Unable to get property 'get' of undefined or null reference at  ProfilePage.prototype.ngOnInit\".</p>\n\n<p>I'm using ionic 4 as my framework. This error occur when I was trying to navigate from my home page to my profile page</p>\n\n<pre><code>HomePage.html:\n&lt;ion-header&gt;\n    &lt;ion-toolbar&gt;\n      &lt;ion-title&gt;Home&lt;/ion-title&gt;\n      &lt;ion-buttons slot=\"end\"&gt;\n        &lt;ion-button routerLink=\"/profile\"&gt;\n          &lt;ion-icon slot=\"icon-only\" name=\"person\"&gt;&lt;/ion-icon&gt;\n        &lt;/ion-button&gt;\n      &lt;/ion-buttons&gt;\n    &lt;/ion-toolbar&gt;\n&lt;/ion-header&gt;\n</code></pre>\n\n<pre><code>profile.page.ts\nimport { Component, OnInit } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { AuthService } from '../../services/user/auth.service';\nimport { ProfileService } from '../../services/user/profile.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss']\n})\nexport class ProfilePage implements OnInit {\n  public userProfile: any;\n  public birthDate: Date;\n  constructor(\n    private alertCtrl: AlertController,\n    private authService: AuthService,\n    private profileService: ProfileService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.profileService\n      .getUserProfile()\n      .get()\n      .then(userProfileSnapshot =&gt; {\n        this.userProfile = userProfileSnapshot.data();\n        this.birthDate = userProfileSnapshot.data().birthDate;\n      });\n  }\n......\n</code></pre>\n\n<pre><code>Homepage.ts\n\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n</code></pre>\n\n<p>The code above is expected to allow user to go to profile page. however the result were \"Unable to get property 'get' of undefined or null reference at  ProfilePage.prototype.ngOnInit\"</p>\n"}, {"tags": ["angular", "typescript", "angular7", "image-uploading"], "answers": [{"comments": [{"owner": {"reputation": 4048, "user_id": 3292482, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jd3T1.jpg?s=128&g=1", "display_name": "Pathik Vejani", "link": "https://stackoverflow.com/users/3292482/pathik-vejani"}, "edited": false, "score": 0, "creation_date": 1566980374, "post_id": 57687614, "comment_id": 101820734, "body": "I don&#39;t want to save file, I want to upload/put it in the folder. Saving will be done via API"}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "reply_to_user": {"reputation": 4048, "user_id": 3292482, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jd3T1.jpg?s=128&g=1", "display_name": "Pathik Vejani", "link": "https://stackoverflow.com/users/3292482/pathik-vejani"}, "edited": false, "score": 0, "creation_date": 1566980505, "post_id": 57687614, "comment_id": 101820806, "body": "From Javascript, saving/uploading can be done only to upload/put the file in Download folder"}, {"owner": {"reputation": 4048, "user_id": 3292482, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jd3T1.jpg?s=128&g=1", "display_name": "Pathik Vejani", "link": "https://stackoverflow.com/users/3292482/pathik-vejani"}, "edited": false, "score": 0, "creation_date": 1566980814, "post_id": 57687614, "comment_id": 101820988, "body": "I don&#39;t think so."}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "reply_to_user": {"reputation": 4048, "user_id": 3292482, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jd3T1.jpg?s=128&g=1", "display_name": "Pathik Vejani", "link": "https://stackoverflow.com/users/3292482/pathik-vejani"}, "edited": false, "score": 0, "creation_date": 1566981028, "post_id": 57687614, "comment_id": 101821107, "body": "Well, I cannot help then, I hope you find a solution on how to save/upload file to a specific folder using Angular and please share it with me."}, {"owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "reply_to_user": {"reputation": 4048, "user_id": 3292482, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jd3T1.jpg?s=128&g=1", "display_name": "Pathik Vejani", "link": "https://stackoverflow.com/users/3292482/pathik-vejani"}, "edited": false, "score": 0, "creation_date": 1566981079, "post_id": 57687614, "comment_id": 101821138, "body": "You can put it in your download location via file-saver"}], "tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1566980435, "last_edit_date": 1566980435, "creation_date": 1566979316, "answer_id": 57687614, "question_id": 57687408, "link": "https://stackoverflow.com/questions/57687408/upload-image-in-folder-using-angular-7/57687614#57687614", "title": "upload image in folder using angular 7", "body": "<p>This is not possible, you cannot upload any file from frontend (Angular, Javascript etc).</p>\n\n<p>Through Javascript, you cannot specify a user's Desktop location to download files.</p>\n\n<p>Create an API in backend(nodeJs, Php,Java etc), pass your image <code>formData</code> to it, and save the file in the desired location via the API</p>\n"}], "owner": {"reputation": 4048, "user_id": 3292482, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jd3T1.jpg?s=128&g=1", "display_name": "Pathik Vejani", "link": "https://stackoverflow.com/users/3292482/pathik-vejani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1566980435, "creation_date": 1566978589, "question_id": 57687408, "link": "https://stackoverflow.com/questions/57687408/upload-image-in-folder-using-angular-7", "title": "upload image in folder using angular 7", "body": "<p>I want to upload Image in <code>assets/</code> folder using Angular 7, below is my try:</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;form [formGroup]=\"form\" (ngSubmit)=\"postData()\" class=\"intro-form-css\"&gt;\n              &lt;div class=\"form-row\"&gt;\n                &lt;div class=\"form-group col-lg-12 col-md-12 col-12\"&gt;\n                    &lt;label class=\"form-text\"&gt;Icon&lt;/label&gt;\n                  &lt;input type=\"file\" class=\"file\" #introIcon id=\"uploadBtn\" (change)=\"onFileChange($event)\" name=\"browseIcon\"&gt;\n                  &lt;div class=\"input-group\"&gt;\n                    &lt;span class=\"input-group-btn\"&gt;\n                      &lt;button class=\"btn btn-css-browse\" type=\"button\" (click)=\"triggerFile()\"&gt;Browse&lt;/button&gt;\n                    &lt;/span&gt;\n                    &lt;input type=\"text\" class=\"form-control css-input\" disabled placeholder=\"Upload Icon\" #uploadFileName id=\"uploadFile\"&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n              &lt;div class=\"form-row\"&gt;\n                &lt;div class=\"form-group col-lg-12 col-md-12 col-12\"&gt;\n                  &lt;label class=\"form-text\"&gt;Title&lt;/label&gt;\n                  &lt;input type=\"text\" formControlName=\"introTitle\" placeholder=\"Enter Title\" class=\"form-control border-radius-0\" /&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n\n              &lt;div class=\"form-row\"&gt;\n                  &lt;div class=\"form-group col-lg-12 col-md-12 col-12\"&gt;\n                    &lt;label class=\"form-text\"&gt;Description&lt;/label&gt;\n                    &lt;textarea rows=\"5\" cols=\"50\" formControlName=\"introDesc\" placeholder=\"Enter Description\" class=\"form-control border-radius-0 no-resize\"&gt;&lt;/textarea&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\n              &lt;div class=\"form-row\"&gt;\n                &lt;div class=\"form-group col-lg-6 col-md-6 col-6\"&gt;\n                  &lt;button type=\"button\" class=\"btn btn-block custom-css-btn\" &gt;Submit&lt;/button&gt;\n                &lt;/div&gt;\n                &lt;div class=\"form-group col-lg-6 col-md-6 col-6\"&gt;\n                  &lt;button type=\"button\" class=\"btn btn-block custom-css-btn\" &gt;Cancel&lt;/button&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/form&gt;\n</code></pre>\n\n<p><strong>ts:</strong></p>\n\n<pre><code>      fileName;\n      fileType;\n      form: FormGroup;\n\n      @ViewChild('introIcon') uploadFileVariable: ElementRef;\n      @ViewChild('uploadFileName') uploadFileName: ElementRef;\n      ngOnInit() {\n          this.form = this.formBuilder.group({\n            browseIcon: [''],\n            introTitle: '',\n            introDecs: ''\n          });\n        }\n\n        triggerFile(){\n          document.getElementById('uploadBtn').click()\n        }\n\n        onFileChange(event) {\n          if (event.target.files.length &gt; 0) {\n            const file = event.target.files[0];\n            this.fileName = file.name;\n            this.fileType = file.type;\n            if(this.fileType == 'image/png' || this.fileType == 'image/jpeg' || this.fileType == 'image/PNG' || this.fileType == 'image/JPEG') {\n              let fName = (&lt;HTMLSelectElement&gt;document.getElementById('uploadFile')).value;\n              fName = this.fileName;\n              this.uploadFileName.nativeElement.value = fName;\n              this.form.get('browseIcon').setValue(file);\n            } else {\nconsole.log('Error!');\n            }\n          }\n        }\n\n        postData() {\n          const formData = new FormData();\n          if (this.form.get('browseIcon').value == '' || this.form.get('browseIcon').value == null) {\nconsole.log('Error!');\n          } else {\n            formData.append('file', this.form.get('browseIcon').value);\n            formData.append('introDecs', this.form.get('introDecs').value);\n            formData.append('introTitle', this.form.get('introTitle').value);\n            console.log('formData:', formData);\n          }\n        }\n</code></pre>\n\n<p>I am not getting where/what to add code for upload image in local folder. Also, I am not getting any response in <code>formData</code>. I also want to send that file name, title and description in web-service.</p>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1566979161, "post_id": 57687142, "comment_id": 101820124, "body": "You should not put <code>await</code> before the <code>Promise.resolve</code> but you should not put <code>Promise.resolve</code> either. Since your function is async it will return a promise of whatever it is you normally return so you should just do <code>return userWithRelation;</code> . Note this is not a node.js quirk it&#39;s how ES6 and TypeScript work with async functions. The catch part is also not necessary at all since when an exception happens the returned promise will be rejected anyway"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2692863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/936116d738bb060fbcbb25730a3cc12f?s=128&d=identicon&r=PG&f=1", "display_name": "paradox37", "link": "https://stackoverflow.com/users/2692863/paradox37"}, "edited": false, "score": 0, "creation_date": 1566978001, "post_id": 57687189, "comment_id": 101819548, "body": "It was not the question how or should I simplify. This is just example function, not the real code which I can&#39;t show."}], "tags": [], "owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": false, "score": 1, "last_activity_date": 1566977775, "creation_date": 1566977775, "answer_id": 57687189, "question_id": 57687142, "link": "https://stackoverflow.com/questions/57687142/await-with-promise-inside-try-catch/57687189#57687189", "title": "await with promise inside try/catch", "body": "<p>If an <code>await</code>ed Promise rejects, its reject value will be what the error in the <code>catch</code> handler is. If it resolves, the value the <code>await</code>ed Promise is assigned to will be the resolve value. So, your code can be simplified to the following:</p>\n\n<pre><code>public static async getUser(userId: number): Promise&lt;UserModel&gt; {\n    return this.findUsers(userId);\n}\n</code></pre>\n\n<p><code>await</code>ing a Promise whose resolve value will be returned immediately, and whose rejection will be returned as a rejected Promise, is superfluous - just return the Promise itself.</p>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 2692863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/936116d738bb060fbcbb25730a3cc12f?s=128&d=identicon&r=PG&f=1", "display_name": "paradox37", "link": "https://stackoverflow.com/users/2692863/paradox37"}, "edited": false, "score": 0, "creation_date": 1566978057, "post_id": 57687208, "comment_id": 101819566, "body": "It was not the question how or should I simplify. This is just example function, not the real code which I can&#39;t show"}], "tags": [], "owner": {"reputation": 8965, "user_id": 3580745, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bc63c3ca36686abbc49e566bebaea528?s=128&d=identicon&r=PG", "display_name": "ThomasThiebaud", "link": "https://stackoverflow.com/users/3580745/thomasthiebaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1566977834, "creation_date": 1566977834, "answer_id": 57687208, "question_id": 57687142, "link": "https://stackoverflow.com/questions/57687142/await-with-promise-inside-try-catch/57687208#57687208", "title": "await with promise inside try/catch", "body": "<p>I'm not sure about the warning, but you can shorten your code to</p>\n\n<pre><code>public static async getUser(userId: number): Promise&lt;UserModel&gt; {\n    try {\n        return this.findUsers(userId);\n    } catch (e) {\n        // Do something with the error\n        return Promise.reject(e);\n    }\n}\n</code></pre>\n\n<p>If your're not doing anything else in the <code>catch</code> block, then you can actually just omit it and reduce your function to</p>\n\n<pre><code>public static async getUser(userId: number): Promise&lt;UserModel&gt; {\n  return this.findUsers(userId);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 2692863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/936116d738bb060fbcbb25730a3cc12f?s=128&d=identicon&r=PG&f=1", "display_name": "paradox37", "link": "https://stackoverflow.com/users/2692863/paradox37"}, "edited": false, "score": 0, "creation_date": 1566978761, "post_id": 57687400, "comment_id": 101819923, "body": "I can&#39;t agree, await should not be returned inside async. You call async function with await. Also, If I remove try/catch block, WebStorm does not expect await."}], "tags": [], "owner": {"reputation": 2662, "user_id": 5833816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9aQhZ.jpg?s=128&g=1", "display_name": "Lazar Nikolic", "link": "https://stackoverflow.com/users/5833816/lazar-nikolic"}, "is_accepted": false, "score": 0, "last_activity_date": 1566978559, "creation_date": 1566978559, "answer_id": 57687400, "question_id": 57687142, "link": "https://stackoverflow.com/questions/57687142/await-with-promise-inside-try-catch/57687400#57687400", "title": "await with promise inside try/catch", "body": "<p>Promise and async/await are two different syntax's for asynchronous programming. What WebStorm is warning you about is that since you are using await inside async function, then await should be the thing to be returned from async function and not resolved Promise. You should choose to use either async/await syntax or Promise. You can see the difference on MDN's site:</p>\n\n<p>For async/await: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function</a></p>\n\n<p>For Promises: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>\n"}], "owner": {"reputation": 389, "user_id": 2692863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/936116d738bb060fbcbb25730a3cc12f?s=128&d=identicon&r=PG&f=1", "display_name": "paradox37", "link": "https://stackoverflow.com/users/2692863/paradox37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1566978593, "creation_date": 1566977637, "last_edit_date": 1566978593, "question_id": 57687142, "link": "https://stackoverflow.com/questions/57687142/await-with-promise-inside-try-catch", "title": "await with promise inside try/catch", "body": "<p>For example, I have following function:</p>\n\n<pre><code>public static async getUser(userId: number): Promise&lt;UserModel&gt; {\n    try {\n        const permissions: PermissionsModel[] = await this.getPermissions(userId);\n        const userWithRelation: UserModel[] = await this.findUsers(userId, permissions);\n\n        return Promise.resolve(userWithRelation);\n\n    } catch (e) {\n        return Promise.reject(e);\n    }\n}\n</code></pre>\n\n<p>Now, WebStorm warns me that I should put await before Promise.resolve() in try and catch block. I'm pretty new with Node, so should I put await or not and why?</p>\n\n<p>Note: This is just example function, not the real code which I can't publicly show.</p>\n"}, {"tags": ["node.js", "typescript", "npm", "types"], "owner": {"reputation": 11, "user_id": 11987656, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VWrSKY7kifw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezafCRSe-uDAKQwou4QwvPx8wUtw/photo.jpg?sz=128", "display_name": "Natasha Mat", "link": "https://stackoverflow.com/users/11987656/natasha-mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566977574, "creation_date": 1566977574, "question_id": 57687122, "link": "https://stackoverflow.com/questions/57687122/function-in-declaration-file-in-packed-node-project-vs-in-local-ts-project", "title": "Function in declaration file in packed node project vs. in local TS project", "body": "<p>I set up a declaration file for a node library so that I'll be able to consume it in my TS project. </p>\n\n<p>Initially, when tested locally on the TS project, my .d.ts file looked something like the following which worked when was in the TS project  </p>\n\n<pre><code>declare module 'my_module' {\n    export function myFunction(value?: string) any;\n}\n</code></pre>\n\n<p>I then added the .d.ts declaration file to the node library, packed it, and imported it into the TS project. When I try to access myFunction as such-</p>\n\n<pre><code>import * as testing from '&lt;my_node_project&gt;';\n\ntesting.myFunction(\"foo\");\n\n</code></pre>\n\n<p>I'm getting an error that TypeError: testing.myFunction is not a function</p>\n\n<p>Is there a reason why this is working locally but not when packed?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 8769188, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11b9ebff3e4c704a4ca0c131e7f06940?s=128&d=identicon&r=PG&f=1", "display_name": "Olive", "link": "https://stackoverflow.com/users/8769188/olive"}, "edited": false, "score": 0, "creation_date": 1566984355, "post_id": 57687338, "comment_id": 101822979, "body": "Thanks for the response. It&#39;s working for me but its show same file name to all the label once I selected file for the specific row."}, {"owner": {"reputation": 3974, "user_id": 9764133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qcf47.jpg?s=128&g=1", "display_name": "ganesh045", "link": "https://stackoverflow.com/users/9764133/ganesh045"}, "reply_to_user": {"reputation": 109, "user_id": 8769188, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11b9ebff3e4c704a4ca0c131e7f06940?s=128&d=identicon&r=PG&f=1", "display_name": "Olive", "link": "https://stackoverflow.com/users/8769188/olive"}, "edited": false, "score": 0, "creation_date": 1566985271, "post_id": 57687338, "comment_id": 101823452, "body": "@Olive use index value to solve this issue, i have updated the answer chek it once"}], "tags": [], "owner": {"reputation": 3974, "user_id": 9764133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qcf47.jpg?s=128&g=1", "display_name": "ganesh045", "link": "https://stackoverflow.com/users/9764133/ganesh045"}, "is_accepted": false, "score": 2, "last_activity_date": 1566985222, "last_edit_date": 1566985222, "creation_date": 1566978304, "answer_id": 57687338, "question_id": 57687068, "link": "https://stackoverflow.com/questions/57687068/how-to-display-selected-file-in-label-instead-of-input-tag-in-angular-6/57687338#57687338", "title": "How to display selected file in label instead of input tag in angular 6", "body": "<p>try this once..</p>\n\n<p>This will display the name of the file you have selected.</p>\n\n<blockquote>\n  <p><strong>In Template</strong></p>\n</blockquote>\n\n<pre><code>&lt;div *ngFor='let item of list; let i = index'&gt;\n  &lt;span *ngIf=\"selectedLogoFile[i]\"&gt;{{selectedLogoFile[i].name}}&lt;/span&gt;\n  &lt;input style=\"display: none\" type=\"file\" (change)=\"onFileChanged($event,i)\" #fileInput&gt;\n  &lt;button type=\"button\" (click)=\"fileInput.click()\"&gt;trigger&lt;/button&gt;\n  &lt;button type=\"button\" (click)=\"reset(fileInput, i)\"&gt;Reset&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<blockquote>\n  <p>In Component</p>\n</blockquote>\n\n<pre><code>  selectedLogoFile: File[]= [];\n\n  onFileChanged(event: any,index: any) {\n    this.selectedLogoFile.push(event.target.files[i]);\n    console.log(this.selectedLogoFile[i].name);\n  }\n</code></pre>\n\n<p>hope this will give you an idea to solve your issue.. :)</p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 8769188, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11b9ebff3e4c704a4ca0c131e7f06940?s=128&d=identicon&r=PG&f=1", "display_name": "Olive", "link": "https://stackoverflow.com/users/8769188/olive"}, "edited": false, "score": 0, "creation_date": 1566984799, "post_id": 57687384, "comment_id": 101823218, "body": "Thanks for the response. It&#39;s working for me but its show same file name to all the label once I selected file for the specific row."}, {"owner": {"reputation": 692, "user_id": 11241667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9901803963e61cb4e185ee93b63f59?s=128&d=identicon&r=PG&f=1", "display_name": "Komal Sakhiya", "link": "https://stackoverflow.com/users/11241667/komal-sakhiya"}, "reply_to_user": {"reputation": 109, "user_id": 8769188, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11b9ebff3e4c704a4ca0c131e7f06940?s=128&d=identicon&r=PG&f=1", "display_name": "Olive", "link": "https://stackoverflow.com/users/8769188/olive"}, "edited": false, "score": 0, "creation_date": 1566985091, "post_id": 57687384, "comment_id": 101823361, "body": "You can use for loop for that."}], "tags": [], "owner": {"reputation": 692, "user_id": 11241667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9901803963e61cb4e185ee93b63f59?s=128&d=identicon&r=PG&f=1", "display_name": "Komal Sakhiya", "link": "https://stackoverflow.com/users/11241667/komal-sakhiya"}, "is_accepted": false, "score": 3, "last_activity_date": 1566978482, "creation_date": 1566978482, "answer_id": 57687384, "question_id": 57687068, "link": "https://stackoverflow.com/questions/57687068/how-to-display-selected-file-in-label-instead-of-input-tag-in-angular-6/57687384#57687384", "title": "How to display selected file in label instead of input tag in angular 6", "body": "<p>Try this code.I hope it will helps you.</p>\n\n<p>HTML:</p>\n\n<pre><code> &lt;div&gt;\n        &lt;div&gt;\n            &lt;input #fileInput type=\"file\" (change)=\"fileProgress($event)\" /&gt;\n            &lt;button type=\"button\" (click)=\"fileInput.click()\"&gt;trigger&lt;/button&gt;\n            &lt;button type=\"button\" (click)=\"reset(fileInput, i)\"&gt;Reset&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;span *ngIf=\"fileName\"&gt;{{fileName}}&lt;/span&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>TS:</p>\n\n<pre><code>fileProgress(fileInput: any) {\n    let file = fileInput.target.files[0];\n     this.fileName = file.name;\n    console.log(this.fileName)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 8769188, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11b9ebff3e4c704a4ca0c131e7f06940?s=128&d=identicon&r=PG&f=1", "display_name": "Olive", "link": "https://stackoverflow.com/users/8769188/olive"}, "edited": false, "score": 0, "creation_date": 1566983765, "post_id": 57687417, "comment_id": 101822641, "body": "Thanks for the response. I&#39;m using the reactive form so ngModel cannot be used to register form controls with a parent formGroup directive"}], "tags": [], "owner": {"reputation": 371, "user_id": 6190470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca0401602f87050f5c8420dd226ae8?s=128&d=identicon&r=PG&f=1", "display_name": "kaminarifox", "link": "https://stackoverflow.com/users/6190470/kaminarifox"}, "is_accepted": false, "score": 1, "last_activity_date": 1566978625, "creation_date": 1566978625, "answer_id": 57687417, "question_id": 57687068, "link": "https://stackoverflow.com/questions/57687068/how-to-display-selected-file-in-label-instead-of-input-tag-in-angular-6/57687417#57687417", "title": "How to display selected file in label instead of input tag in angular 6", "body": "<ul>\n<li>You can hide input and wrap it with label</li>\n<li>Bind variable to input with [(ngModel)] </li>\n</ul>\n\n<pre><code>&lt;label&gt; {{fileName}}\n  &lt;input #fileInput type=\"file\" [(ngModel)]=\"selectedFile\" [style.display]=\"'none'\"&gt;\n&lt;/label&gt;\n</code></pre>\n\n<p>and make getter</p>\n\n<pre><code>get fileName(): string {\n  return this.selectedFile ? this.selectedFile.split('/').pop() : 'Select file';\n}\n</code></pre>\n\n<p>then use this getter in any tag like <code>{{ fileName }}</code></p>\n"}], "owner": {"reputation": 109, "user_id": 8769188, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11b9ebff3e4c704a4ca0c131e7f06940?s=128&d=identicon&r=PG&f=1", "display_name": "Olive", "link": "https://stackoverflow.com/users/8769188/olive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1566985222, "creation_date": 1566977339, "question_id": 57687068, "link": "https://stackoverflow.com/questions/57687068/how-to-display-selected-file-in-label-instead-of-input-tag-in-angular-6", "title": "How to display selected file in label instead of input tag in angular 6", "body": "<p>I should display the selected file name in label tag instead of displaying in the input tag. Can you please help me to achieve this. Thanks in advance</p>\n\n<p>My code looks like below,</p>\n\n<pre><code>&lt;div *ngFor='let item of list; let i = index'&gt;\n  &lt;input #fileInput type=\"file\"  /&gt;\n  &lt;button type=\"button\" (click)=\"fileInput.click()\"&gt;trigger&lt;/button&gt;\n  &lt;button type=\"button\" (click)=\"reset(fileInput, i)\"&gt;Reset&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have tried changing input tag to label but it's not working. Could you please help me to achieve it. Thanks in advance.</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 1403, "user_id": 7219473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea9bd6cb715ad22fdb60d3ca6cbed21?s=128&d=identicon&r=PG&f=1", "display_name": "Shalom Peles", "link": "https://stackoverflow.com/users/7219473/shalom-peles"}, "is_accepted": false, "score": 0, "last_activity_date": 1566976819, "creation_date": 1566976819, "answer_id": 57686928, "question_id": 57686671, "link": "https://stackoverflow.com/questions/57686671/is-there-a-way-to-declare-a-type-that-depends-on-its-sibling-type/57686928#57686928", "title": "Is there a way to declare a type that depends on its sibling type", "body": "<p>This may help you (<a href=\"https://www.typescriptlang.org/play/index.html#code/JYOwLgpgTgZghgYwgAgKIA84FsAOAbCAHgBUAaZAaWQnUhABMBnZAawgE8B7GZYgPmQBvALAAoZMgBucPAFcIALl4BtCgF0A3GIC+Y0JFiIUxCIzBCxEmMChmlZqKADmW8ckYQEnBkpCysAEbQrrqiYtJQyNa2YEoY2PhEJmbkAETRZql8rhlgAHTSchAayAD0pe5gjiBOYuFwkR5ePmiYuAQkpmBpTd70Wa69DAUy8iXlyH6B0GJAA\" rel=\"nofollow noreferrer\">live demo</a>):</p>\n\n<pre><code>interface Example&lt;T, K extends keyof T&gt; {\n  value: T[K];\n}\ninterface Test {\n  first: string;\n  second: number;\n}\n\nvar first: Example&lt;Test, \"first\"&gt;;\nfirst.value; // string\n\nvar second: Example&lt;Test, \"second\"&gt;;\nsecond.value; // number\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1078, "user_id": 94078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/090dd080d136567fc21adccc5faf28fb?s=128&d=identicon&r=PG", "display_name": "eug", "link": "https://stackoverflow.com/users/94078/eug"}, "is_accepted": false, "score": 0, "last_activity_date": 1566976934, "creation_date": 1566976934, "answer_id": 57686956, "question_id": 57686671, "link": "https://stackoverflow.com/questions/57686671/is-there-a-way-to-declare-a-type-that-depends-on-its-sibling-type/57686956#57686956", "title": "Is there a way to declare a type that depends on its sibling type", "body": "<p>This might be close enough:</p>\n\n<pre><code>interface Example&lt;T, K extends keyof T&gt; {\n    key: K;\n    value: T[K];\n}\ninterface Test {\n    first: string;\n    second: number;\n}\nconst ok1 : Example&lt;Test, \"first\"&gt; = {\n    key: \"first\",\n    value: \"s\",\n}\nconst ok2 : Example&lt;Test, \"second\"&gt; = {\n    key: \"second\",\n    value: 12,\n}\nconst error1 : Example&lt;Test, \"first\"&gt; = {\n    key: \"first\",\n    value: 12,\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1566982640, "creation_date": 1566982640, "answer_id": 57688590, "question_id": 57686671, "link": "https://stackoverflow.com/questions/57686671/is-there-a-way-to-declare-a-type-that-depends-on-its-sibling-type/57688590#57688590", "title": "Is there a way to declare a type that depends on its sibling type", "body": "<p>There are multiple ways to do this, depending on what you are trying to do.</p>\n\n<p>If you have a function and you need to enforce this on a parameter, we can do this using a generic type parameter:</p>\n\n<pre><code>interface Example&lt;T, K extends keyof T&gt; {\n    key: K;\n    value: T[K];\n}\nfunction withProp&lt;T&gt;(){\n  return function&lt;K extends keyof T&gt;(value: Example&lt;T, K&gt;) {\n\n  }\n}\n\nlet test= withProp&lt;Test&gt;()({\n    key: \"first\",\n    value: \"Hello world!\"\n});\n\n// Error\nlet test2 = withProp&lt;Test&gt;()({\n    key: \"first\",\n    value: 123\n});\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgCoQM5mQbwFDKHIzBRYBcyWUoA5gNwFEYQID2IAJpSAK4C2AI2iMAvnlCRYiFAFEAHnH4AHADYQAPKgA0yANLII8yFwzIA1hACebGGgB8uJoUtXKexkWQA3OKt4QlKgA2noAumJ4MLwgCGDAHMgA7sBgABYAClBsylr2ABQAlPiEUBBgvFAgxDFxCSAaBkYmnGautg75vv6ByApKapo6+vaFTkzi4njq2JBYALzJqZnZuehYBYX5JUSulABEJGRg+9rOPn4BBwASEKqqbMlsUKqcAIT7eKKFjHgA9H8+lBslBpuVkHMwAAmZCLFLpLI5LSYMCbbbnPbIQ6kLCnc7dK7IACMUIAzF8fkA\" rel=\"nofollow noreferrer\">Play</a></p>\n\n<p>If you want to enforce this on a random variable, you can use a mapped type to generate all possible combinations of key-type as a union: </p>\n\n<pre><code>type Example&lt;T&gt; = {\n  [K in keyof T]: {\n      key: K;\n      value: T[K];\n  }\n}[keyof T]\n\nlet test: Example&lt;Test&gt; = {\n    key: \"first\",\n    value: \"Hello world!\"\n};\n\n// Error\nlet test2: Example&lt;Test&gt; = {\n    key: \"first\",\n    value: 123\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAogHgQwLZgDYQDwBUB8UC8UA3gFBRQDaA0lAJYB2UA1hCAPYBmUWAugFzEy5YSxACqAbiHCoANwSoArhAFZqPKeQC+JLRVGduPEiQbAIAJw4IAxtCwQAzsEEyOtC84HOLDAOaawo4QNmz0ACYC9IpIAEaWUjok6C7mXrCIKOjYTsB4hKQyogIARO6ewCUANNJyCsqlABIQqKhsUADubBao4QCEJbpSJAD0I7AWFt3JEKm5AEwC8MhomA7O+a4irKXlztW18koqUACM8wDMukA\" rel=\"nofollow noreferrer\">Play</a></p>\n"}], "owner": {"reputation": 190, "user_id": 6396633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10157083311475089/picture?type=large", "display_name": "Yousif Al-Raheem", "link": "https://stackoverflow.com/users/6396633/yousif-al-raheem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57688590, "answer_count": 3, "score": 1, "last_activity_date": 1566982640, "creation_date": 1566975834, "question_id": 57686671, "link": "https://stackoverflow.com/questions/57686671/is-there-a-way-to-declare-a-type-that-depends-on-its-sibling-type", "title": "Is there a way to declare a type that depends on its sibling type", "body": "<p>I\u2019m trying to achieve something that might be an overkill but nice to have. I want to declare two parameters where one represents a <code>keyof</code> a <strong>Model</strong>, while the other represents whatever the type of that in a <strong>Model</strong> See the example below:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Example&lt;T&gt; {\n    key: keyof T;\n    value: typeof T[key];\n}\ninterface Test {\n    first: string;\n    second: number;\n}\n</code></pre>\n\n<p>a correct value is:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>let test: Example&lt;Test&gt; = {\n    key: \u201cfirst\u201d,\n    value: \u201cHello world!\u201d\n};\n</code></pre>\n\n<p>An incorrect example would be:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>let test: Example&lt;Test&gt; = {\n    key: \u201cfirst\u201d,\n    value: 123\n};\n</code></pre>\n\n<p>Is it possible to achieve such a thing with <strong>Typescript</strong>?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 256, "user_id": 10323899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b980dc953e6a3c9a09b7fc979cbd2f?s=128&d=identicon&r=PG&f=1", "display_name": "lesiano", "link": "https://stackoverflow.com/users/10323899/lesiano"}, "edited": false, "score": 1, "creation_date": 1566978318, "post_id": 57686313, "comment_id": 101819704, "body": "perhaps it&#39;s answered  here: <a href=\"https://stackoverflow.com/questions/54470329/how-to-make-a-generic-add-operator-in-typescript-that-works-with-numbers-and-str\" title=\"how to make a generic add operator in typescript that works with numbers and str\">stackoverflow.com/questions/54470329/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7499416"}, "reply_to_user": {"reputation": 256, "user_id": 10323899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b980dc953e6a3c9a09b7fc979cbd2f?s=128&d=identicon&r=PG&f=1", "display_name": "lesiano", "link": "https://stackoverflow.com/users/10323899/lesiano"}, "edited": false, "score": 1, "creation_date": 1566981067, "post_id": 57686313, "comment_id": 101821132, "body": "Still can&#39;t understand why <code>myFunction&lt;number&gt;(2);</code> is not forcing the type to <code>return input + 2;</code>; TypeScript shouldn&#39;t return error in that case!"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7499416"}, "edited": false, "score": 1, "creation_date": 1567019579, "post_id": 57696667, "comment_id": 101841418, "body": "Now I understand, your answer was really really helpful. Tons of thanks!"}], "tags": [], "owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "is_accepted": true, "score": 5, "last_activity_date": 1567010875, "last_edit_date": 1567010875, "creation_date": 1567009850, "answer_id": 57696667, "question_id": 57686313, "link": "https://stackoverflow.com/questions/57686313/how-does-typescript-operator-work-with-generics-and-functions/57696667#57696667", "title": "How does Typescript &quot;+&quot; operator work with generics and functions?", "body": "<p>In general, TypeScript <code>+</code>operator is more restrictive than JavaScript <code>+</code>operator. Latter and can do implicit conversions between types and is more tolerant in terms of its operands.</p>\n\n<h3>Interaction with Generics and functions</h3>\n\n<p>Let's take your function example. Given <code>myFunction</code> down under, you get the error as <code>T</code> can be literally anything (see TypeScript + operator section down under for compatible types).</p>\n\n<pre><code>function myFunction&lt;T&gt;(input: T): T {\n  // Operator '+' cannot be applied to types 'T' and '2'.  \n  return input + 2; \n}\n</code></pre>\n\n<p>TypeScript also requires, that you narrow down an union type like <code>string | number</code> via control flow analysis.</p>\n\n<pre><code>declare const t: string | number;\nt + 3; // Operator '+' cannot be applied to types 'string | number' and '3'.\n\n// this works!\nif (typeof t === \"string\") {\n  const res = t + 3; // const res: string\n} else {\n  const res = t + 3; // const res: number\n}\n</code></pre>\n\n<p>Unfortunately, type narrowing does not work so well with <a href=\"https://github.com/microsoft/TypeScript/issues/13995\" rel=\"noreferrer\">generics extending a union type</a> yet:</p>\n\n<pre><code>function myFunction&lt;T extends string | number&gt;(input: T): string | number {\n  if (typeof input === \"string\") {\n    return input + 3;\n  } else {\n    // TypeScript could not narrow here to number, we have to cast.\n    const inputNumber = input as number;\n    return inputNumber + 3;\n  }\n}\n</code></pre>\n\n<p>So that would be the final version and answer to your question, I guess. As enhancement, a neat thing is to actually return a conditional type. So when we put in string, we want string back. Analogues <code>number -&gt; number</code>. See this <a href=\"https://www.typescriptlang.org/play/#code/GYVwdgxgLglg9mABAWwJ4DFzXmAPAFUQFMAPKIsAEwGdFqoAnGMAc0QB9EwRkAjIhgD4AFMwAOIKAC5E+AJQz6TVhy49+DRAG8AUIkQxgiYVFRiicI+MmIAvPcQAiJcxaO52vfsQMiUEAxI1lCIANSIAMwA3F4AvsQANtREnt6IAPTpsmZEAMoQTGIhEHAgCZRccCFgAIYMDHAA7ogAFgIpUHBqfAJe+iVg9AZgElAAcuoCdsOjiDW03D0MMWm+-oEzkhNLYZEriLE6hzpomJCwCMIATHIxp1gXYMKOV+4xOqDnOCgYDzhXBGIZAoNDojFcqkWGhEXmCMnwOgUsiB5CotBcKgA-GDlGwZFCprp9IZjKZzJZNiF7LYnBi3B4id41gEkKIRjZwhEPPNkaRUaC6YhsYL8ZNlnFEslUt5MtlzPlCsVSuVKtU6g1mm1fIhOt0NH1EAMhsFthppsE5gsxft9MyNmzRqappzubRCHyQejwVicRDRUt9odjvcvggrtdbidfqGwOGXm8gA\" rel=\"noreferrer\">Playground</a> example.</p>\n\n<hr>\n\n<h3>Possible combinations for <a href=\"https://github.com/microsoft/TypeScript/blob/master/doc/spec.md#4192-the--operator\" rel=\"noreferrer\">TypeScript <code>+</code>operator</a></h3>\n\n<p>Type matrix for operands (empty spaces means compile error; e.g. between \"Other\" and \"Boolean\" type):</p>\n\n<pre><code>+----------+---------+----------+---------+---------+--------+\n|          |  Any    | Boolean  | Number  | String  | Other  |\n+----------+---------+----------+---------+---------+--------+\n| Any      | Any     | Any      | Any     | String  | Any    |\n| Boolean  | Any     |          |         | String  |        |\n| Number   | Any     |          | Number  | String  |        |\n| String   | String  | String   | String  | String  | String |\n| Other    | Any     |          |         | String  |        |\n+----------+---------+----------+---------+---------+--------+\n</code></pre>\n\n<p>Excerpt from the specs:</p>\n\n<blockquote>\n  <p>The binary + operator requires both operands to be of the Number primitive type or an enum type, or at least one of the operands to be of type Any or the String primitive type. Operands of an enum type are treated as having the primitive type Number. If one operand is the null or undefined value, it is treated as having the type of the other operand. If both operands are of the Number primitive type, the result is of the Number primitive type. If one or both operands are of the String primitive type, the result is of the String primitive type. Otherwise, the result is of type Any.</p>\n</blockquote>\n\n<p>Some of the phrases seem a bit outdated. Numeric enums resolve to numbers, but string enums are treated as strings. With <code>null</code> or <code>undefined</code> and number you get a compile error regardless strict settings or not, with string you do a concatenation.\n<a href=\"https://www.typescriptlang.org/play/?noImplicitAny=false&amp;strictNullChecks=false&amp;strictFunctionTypes=false&amp;strictPropertyInitialization=false&amp;noImplicitThis=false&amp;noImplicitReturns=false&amp;alwaysStrict=false#code/KYOwrgtgBAsgngOUsATgSwMYFFzQN4CwAUFFAIYA0xpARlSVBsQL7HGiSxwDKALuiADmOToQZkoAXigAiMjPq0psmguqNlMjDJZsiGAPYgAzryi9gpgIzKbAai5IIqTCIgA6MgG5ihk2YtTACZbKAd4PgFhXHcaPT9Tc0teAGZQhzAQABNgADM0EGAs3yNEwN4AFnSocAAbWqA\" rel=\"noreferrer\">Playground</a></p>\n\n<hr>\n\n<h3>Background info: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Addition\" rel=\"noreferrer\">Javascript <code>+</code>operator</a></h3>\n\n<blockquote>\n  <p>The addition operator produces the sum of numeric operands or string concatenation.</p>\n</blockquote>\n\n<p>Some constellations, you can only \"do\" in JavaScript:</p>\n\n<pre><code>true + 1 // 2\nfalse + false // 0\n1 + undefined // NaN\n1 + null // 1; typeof(1+ null) === \"number\";   // :)\nnew Date() + new Date() // toString() is invoked for both Date objects implicitly\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#code/C4JwrgpgBA1FCMUD0SoCYCwAobAzAhgDYDO0cBJ0KUADNtonGAHYAmEuAlsxK8qgDl8AhrCjMwhQvwQBuKMACeABwgB7XAAp4cCVICUUALwmoAIgkBbAEYQQZ+VBmz99LNWBqAyqG4BzTUNOYihuADc1AGteKFw1EChrNWAACygAEXxgaDVrACsIAGNgEM5LZUJOQs5gQkVsDzUoEAhlFtJmYAUUiEsofBDiX2Y-bB4AdwysiECxCanswLdqcfjI4mwzOLUzMRZ2Lh4+ai21NX2Obl4zTe3d3UlpE+29QjMgA\" rel=\"noreferrer\">Playground</a></p>\n\n<p>Hope, this wasn't too much text for the scope of your question! </p>\n\n<p>Cheers</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7499416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 57696667, "answer_count": 1, "score": 0, "last_activity_date": 1567015705, "creation_date": 1566974114, "last_edit_date": 1567015705, "question_id": 57686313, "link": "https://stackoverflow.com/questions/57686313/how-does-typescript-operator-work-with-generics-and-functions", "title": "How does Typescript &quot;+&quot; operator work with generics and functions?", "body": "<p>I have a function that takes some value, and executes <code>+</code> operator over it and a <code>2</code> value:</p>\n\n<pre><code>function myFunction(input: number): number {\n    return input + 2;\n}\n</code></pre>\n\n<p>If I pass a number, it will add this number to <code>2</code>:</p>\n\n<pre><code>const result = myFunction(2);\nconsole.log('Result: ', result);\n// Result: 2\n</code></pre>\n\n<p>If I pass a string, it will concatenate this string to <code>2</code>:</p>\n\n<pre><code>const result = myFunction(\");\nconsole.log('Result: ', result);\n// Result: \"22\"\n</code></pre>\n\n<p>Everything good so far. Now I want to use generics in order to capture the type:</p>\n\n<pre><code>function myFunction&lt;T&gt;(input: T): T {\n    return input + 2;\n}\n</code></pre>\n\n<p>And if I want to use it capturing the implicit type of the parameter I can do:</p>\n\n<pre><code>const result = myFunction(2);\nconsole.log('Result: ', result);\n// Error: `(parameter) input: T. Operator '+' cannot be applied to types 'T' and '2'.`\n</code></pre>\n\n<p>As you see TypeScript returns an error about the type and the <code>+</code> operator, and I can't understand why. The same if I set the type explicitly:</p>\n\n<pre><code>const result = myFunction&lt;number&gt;(2);\nconsole.log('Result: ', result);\n// Error: `(parameter) input: T. Operator '+' cannot be applied to types 'T' and '2'.`\n</code></pre>\n\n<p>I cant understand why it returns an error with <code>+</code>. Any help will be welcome!</p>\n"}, {"tags": ["typescript", "binding", "styles"], "comments": [{"owner": {"reputation": 11075, "user_id": 1495595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u9Lea.jpg?s=128&g=1", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1495595/rafal"}, "edited": false, "score": 1, "creation_date": 1566974638, "post_id": 57686299, "comment_id": 101818055, "body": "<code>ngStyle</code> directive is throwing exception it wants to interpret the value that you have set as a differ. To set raw style you need to bind to <code>style</code> instead of <code>ngstyle</code> or wrapp it in quotes"}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "reply_to_user": {"reputation": 11075, "user_id": 1495595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u9Lea.jpg?s=128&g=1", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1495595/rafal"}, "edited": false, "score": 0, "creation_date": 1566974766, "post_id": 57686299, "comment_id": 101818106, "body": "Ok i bound <code>style</code> instead of <code>ngStyle</code> and now the table is rendered but the coloring when pressed still not working ; i get warnings on each row: <code>core.js:11407 WARNING: sanitizing unsafe style value cursor:pointer (see http:&#47;&#47;g.co&#47;ng&#47;security#xss)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 706, "user_id": 353485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3f7e0e5a7d77f72c5ac050eb377d55?s=128&d=identicon&r=PG", "display_name": "Nail Achmedzhanov", "link": "https://stackoverflow.com/users/353485/nail-achmedzhanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1566981533, "creation_date": 1566981533, "answer_id": 57688248, "question_id": 57686299, "link": "https://stackoverflow.com/questions/57686299/why-i-can-not-set-style-dynamically-from-method-in-typescript/57688248#57688248", "title": "Why i can not set style dynamically from method in Typescript", "body": "<p>ngStyle expects object but not string <a href=\"https://angular.io/api/common/NgStyle\" rel=\"nofollow noreferrer\">https://angular.io/api/common/NgStyle</a></p>\n\n<pre><code>@Input()\nngStyle: { [klass: string]: any; }\n</code></pre>\n\n<p>The code change</p>\n\n<pre><code>  public setStyle(value:Computer):any{\n\n    let style: any ={'cursor': 'pointer'};\n    if(this.SelectedComputer==null ||!(this.SelectedComputer.id==value.id) ){\n      console.log(style);\n      return style;\n    }\n    return {...style, 'background-color' : '#6699ff' };\n  }\n</code></pre>\n"}], "owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 57688248, "answer_count": 1, "score": 0, "last_activity_date": 1566981533, "creation_date": 1566974055, "question_id": 57686299, "link": "https://stackoverflow.com/questions/57686299/why-i-can-not-set-style-dynamically-from-method-in-typescript", "title": "Why i can not set style dynamically from method in Typescript", "body": "<p>I am trying to set style of rows in a table using a method in the <code>.ts</code> file and i get the following error:</p>\n\n<pre><code>&gt; IndexComponent.html:16 ERROR Error: Cannot find a differ supporting\n&gt; object 'cursor:pointer'\n&gt;     at KeyValueDiffers.push../node_modules/@angular/core/fesm5/core.js.KeyValueDiffers.find\n&gt; (core.js:16533)\n&gt;     at NgStyle.set [as ngStyle] (common.js:3816)\n&gt;     at updateProp (core.js:18743)\n&gt;     at checkAndUpdateDirectiveInline (core.js:18494)\n&gt;     at checkAndUpdateNodeInline (core.js:19801)\n&gt;     at checkAndUpdateNode (core.js:19763)\n&gt;     at debugCheckAndUpdateNode (core.js:20397)\n&gt;     at debugCheckDirectivesFn (core.js:20357)\n&gt;     at Object.eval [as updateDirectives] (IndexComponent.html:16)\n&gt;     at Object.debugUpdateDirectives [as updateDirectives] (core.js:20349)\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Id&lt;/th&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n      &lt;/tr&gt;\n\n      &lt;tr [ngStyle]=\"setStyle(item)\" (mousedown)=\"onSelectionChanged(item)\" *ngFor=\"let item of viewComputers\"&gt;\n        &lt;td&gt;{{item.id}}&lt;/td&gt;\n        &lt;td&gt;{{item.username}}&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p><strong>TS</strong></p>\n\n<pre><code>export class IndexComponent implements OnInit {\n\n  public viewComputers:Computer[]=null;\n  protected SelectedComputer:Computer=null;\n\n  onSelectionChanged(data:Computer){\n    this.SelectedComputer=data;\n  }\n\n  public setStyle(value:Computer):string{\n\n    var style=\"cursor:pointer\";\n    if(this.SelectedComputer==null ||!(this.SelectedComputer.id==value.id) ){\n      console.log(style);\n      return style;\n    }\n    return style+\";background-color: #6699ff\";\n  }\n\n}\n</code></pre>\n\n<p>As you can see if there is no selection on the table (didn't place the logic here) or if the current row is not selected i want to style, otherwise i want the specific one.</p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1566990264, "post_id": 57686195, "comment_id": 101826219, "body": "Please contact Firebase support directly if you&#39;re unable to deploy functions.  <a href=\"https://support.google.com/firebase/contact/support\" rel=\"nofollow noreferrer\">support.google.com/firebase/contact/support</a>"}, {"owner": {"reputation": 1, "user_id": 10223450, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3qkoOQtBIjU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pX0wsVwq7mYZ4XYDjzZzZlvdWDRw/mo/photo.jpg?sz=128", "display_name": "Suraj Ghadge", "link": "https://stackoverflow.com/users/10223450/suraj-ghadge"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1566990771, "post_id": 57686195, "comment_id": 101826473, "body": "yes raised issue.."}], "owner": {"reputation": 1, "user_id": 10223450, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3qkoOQtBIjU/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pX0wsVwq7mYZ4XYDjzZzZlvdWDRw/mo/photo.jpg?sz=128", "display_name": "Suraj Ghadge", "link": "https://stackoverflow.com/users/10223450/suraj-ghadge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566978682, "creation_date": 1566973479, "last_edit_date": 1566978682, "question_id": 57686195, "link": "https://stackoverflow.com/questions/57686195/successful-cloud-function-deployment-but-code-not-getting-reflected-getting-pre", "title": "Successful Cloud Function deployment but code not getting reflected. Getting previously executed log", "body": "<p>I'm trying to update a Cloud Function using Visual Code. Getting successful when I try to update it but the code is not reflecting the update. I tied deleting and updating the function again. It successfully gets deleted and uploaded as well, but still executed previously uploaded Cloud Function. </p>\n\n<p>Getting Firebase Cloud Function logs additionally getting below log as well:</p>\n\n<pre><code>\n    {\"@type\":\"type.googleapis.com/google.cloud.audit.AuditLog\",\"authenticationInfo\":{\"principalEmail\":\"sghadge@xxx.com\"},\"requestMetadata\":{\"callerIp\":\"115.97.82.202\",\"callerSuppliedUserAgent\":\"FirebaseCLI/6.0.0,gzip(gfe),gzip(gfe)\",\"requestAttributes\":{\"time\":\"2019-08-28T06:26:55.075Z\",\"auth\":{}},\"destinationAttributes\":{}},\"serviceName\":\"cloudfunctions.googleapis.com\",\"methodName\":\"google.cloud.functions.v1.CloudFunctionsService.UpdateFunction\",\"authorizationInfo\":[{\"permission\":\"cloudfunctions.functions.update\",\"granted\":true,\"resourceAttributes\":{}},{\"resource\":\"projects/sample-project/locations/us-central1/functions/updateProduct\",\"permission\":\"cloudfunctions.functions.update\",\"granted\":true,\"resourceAttributes\":{}}],\"resourceName\":\"projects/sample-project/locations/us-central1/functions/updateProduct\",\"request\":{\"@type\":\"type.googleapis.com/google.cloud.functions.v1.UpdateFunctionRequest\",\"function\":{\"name\":\"projects/wardrobe-manager-dev/locations/us-central1/functions/updateProduct\",\"httpsTrigger\":{},\"labels\":{\"deployment-callable\":\"true\",\"deployment-tool\":\"cli-firebase\"},\"sourceUploadUrl\":\"https://storage.googleapis.com/gcf-upload-us-central1-7dced446-cee5-4518-a082-90e14aaed2ce/db6dbd9d-5c89-4804-b83a-f04a2ee2d929.zip?GoogleAccessId=service-42911962822@gcf-admin-robot.iam.gserviceaccount.com&amp;Expires=1566975412&amp;Signature=dAr1G%2BGKr79OUOotyYLlqX1uFL2ua1%2F22EF6HabVLFrlrgXQRGc6ZRKqLITM1JjlATSVyRUQH4SvPsDaVC8zd7yQSGFBzJqlbO3tBLpW01VPZSbrCLbYlvRHQ7F9VK%2F%2Fw7S8Q%2FQ83tEh0jluRPkMpwChH%2BdhrxndthToJSx0EIYFs2FlPahYuwrnDmxeQVxeWza2LIRXBJ%2BW%2BlDEZLTfGwcaVqKj51nwhcHXAynK7g2GenTHxw1qUW4ZsO6CiqhnRoly%2F6z2BCcF8iqFdwAlOvWa9dkeXSMrxVG9L6c3COA3IF3Up50Ojv5lgZY8PTpJ6vwDsrHwKduRJXhWij8cKw%3D%3D\"},\"updateMask\":\"sourceUploadUrl,name,labels,httpsTrigger\"}}\n\n</code></pre>\n\n<pre><code>{\n    \"@type\": \"type.googleapis.com/google.cloud.audit.AuditLog\",\n    \"authenticationInfo\": {\n        \"principalEmail\": \"sghadge@xxx.com\"\n    },\n    \"methodName\": \"google.cloud.functions.v1.CloudFunctionsService.UpdateFunction\",\n    \"resourceName\": \"projects/sample-project/locations/us-central1/functions/updateProduct\",\n    \"serviceName\": \"cloudfunctions.googleapis.com\",\n    \"status\": {}\n}\n</code></pre>\n\n<p>Any Suggestion kindly appreciated, thanks.</p>\n"}, {"tags": ["arrays", "angular", "typescript", "dictionary", "filter"], "comments": [{"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566977287, "post_id": 57686189, "comment_id": 101819235, "body": "Please let me mention, that your result of <code>getApprovedItems</code> is not used."}], "answers": [{"comments": [{"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566976573, "post_id": 57686252, "comment_id": 101818893, "body": "Please don&#39;t return any. At least indicate that it is an Array"}], "tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 2, "last_activity_date": 1566977388, "last_edit_date": 1566977388, "creation_date": 1566973793, "answer_id": 57686252, "question_id": 57686189, "link": "https://stackoverflow.com/questions/57686189/how-to-get-items-with-approved-ids-from-another-array-map-filter-or/57686252#57686252", "title": "How to get items with approved ids from another array? map() filter() or?", "body": "<p>You can use <strong>filter()</strong></p>\n\n<p>Try like this:</p>\n\n<pre><code>public getApprovedItems(): any[] {\n  return this.items.filter(x =&gt; this.approvedId.includes(x.id))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566976619, "post_id": 57686374, "comment_id": 101818912, "body": "It is only an output, why you even use map?"}, {"owner": {"reputation": 2417, "user_id": 10831557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gbr55.png?s=128&g=1", "display_name": "Pushprajsinh Chudasama", "link": "https://stackoverflow.com/users/10831557/pushprajsinh-chudasama"}, "reply_to_user": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566977026, "post_id": 57686374, "comment_id": 101819102, "body": "I didn&#39;t get you . Can you explain in detail . And the reason behind downVote ?"}, {"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566977116, "post_id": 57686374, "comment_id": 101819152, "body": "ou map doesn&#39;t map anything"}, {"owner": {"reputation": 2417, "user_id": 10831557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gbr55.png?s=128&g=1", "display_name": "Pushprajsinh Chudasama", "link": "https://stackoverflow.com/users/10831557/pushprajsinh-chudasama"}, "reply_to_user": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566977633, "post_id": 57686374, "comment_id": 101819408, "body": "Through map , i can get particular object on which i can check the condition . Therefore i used the map."}, {"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566979110, "post_id": 57686374, "comment_id": 101820095, "body": "You get this particular item with other operations like foreach and filter too. My point is you are using map in a completely wrong manner. Your function maybe prints the correct values to console, but doesn&#39;t return them. It is just not how you use map."}, {"owner": {"reputation": 2417, "user_id": 10831557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gbr55.png?s=128&g=1", "display_name": "Pushprajsinh Chudasama", "link": "https://stackoverflow.com/users/10831557/pushprajsinh-chudasama"}, "reply_to_user": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566979218, "post_id": 57686374, "comment_id": 101820141, "body": "Ok sir . Thanks for guiding me in proper manner and making me correct. Will take care ofthis next time . Thank you ."}], "tags": [], "owner": {"reputation": 2417, "user_id": 10831557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gbr55.png?s=128&g=1", "display_name": "Pushprajsinh Chudasama", "link": "https://stackoverflow.com/users/10831557/pushprajsinh-chudasama"}, "is_accepted": false, "score": 0, "last_activity_date": 1575230928, "last_edit_date": 1575230928, "creation_date": 1566974461, "answer_id": 57686374, "question_id": 57686189, "link": "https://stackoverflow.com/questions/57686189/how-to-get-items-with-approved-ids-from-another-array-map-filter-or/57686374#57686374", "title": "How to get items with approved ids from another array? map() filter() or?", "body": "<p>Hope this solution works for you:</p>\n\n<pre><code>public getApprovedItems(): any {\n    this.items.map((singleObject) =&gt; {\n        if(this.approvedId.includes(singleObject.id)){\n            console.log(singleObject);\n            //{id: 535345, code: \"432gdh4356\"}\n           // {id: 978767, code: \"eaw32134dd\"}\n        }\n\n    });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1566976644, "post_id": 57686529, "comment_id": 101818924, "body": "Please don&#39;t return any. At least indicate that it is an Array"}], "tags": [], "owner": {"reputation": 1592, "user_id": 11016183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usqVz.jpg?s=128&g=1", "display_name": "Seba Cherian", "link": "https://stackoverflow.com/users/11016183/seba-cherian"}, "is_accepted": false, "score": 2, "last_activity_date": 1566975199, "creation_date": 1566975199, "answer_id": 57686529, "question_id": 57686189, "link": "https://stackoverflow.com/questions/57686189/how-to-get-items-with-approved-ids-from-another-array-map-filter-or/57686529#57686529", "title": "How to get items with approved ids from another array? map() filter() or?", "body": "<p>Try using filter:</p>\n\n<pre><code> items = [\n    { id: 535345, code: '432gdh4356' },\n    { id: 634586, code: 'irdtry4567' },\n    { id: 124315, code: 'fgdt43104f' },\n    { id: 978767, code: 'eaw32134dd' }\n  ];\n\n approvedId = [ 535345, 978767 ];\n\npublic getApprovedItems(): any {\n  return this.items.filter(item =&gt; this.approvedId.includes(item.id))\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "is_accepted": false, "score": 1, "last_activity_date": 1566978781, "creation_date": 1566978781, "answer_id": 57687462, "question_id": 57686189, "link": "https://stackoverflow.com/questions/57686189/how-to-get-items-with-approved-ids-from-another-array-map-filter-or/57687462#57687462", "title": "How to get items with approved ids from another array? map() filter() or?", "body": "<p>Please consider Typing und using the result of your function.</p>\n\n<pre><code>export interface Code {\n  id: number;\n  code: string;\n}\n\nexport class AppComponent  {\n  name = 'Angular';\n  items: Code[] = [\n    { id: 535345, code: '432gdh4356' },\n    { id: 634586, code: 'irdtry4567' },\n    { id: 124315, code: 'fgdt43104f' },\n    { id: 978767, code: 'eaw32134dd' }\n  ];\n  approvedItems: Code[];\n\n  approvedId: number[] = [ 535345, 978767 ];\n\n  ngOnInit() {\n    this.approvedItems = this.getApprovedItems();\n  }\n\n  public getApprovedItems(): Code[] {\n    return this.items.filter((x: Code) =&gt; this.approvedId.includes(x.id);\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 6445892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dSniL.jpg?s=128&g=1", "display_name": "Jonas Johansson", "link": "https://stackoverflow.com/users/6445892/jonas-johansson"}, "is_accepted": true, "score": 0, "last_activity_date": 1566980609, "creation_date": 1566980609, "answer_id": 57687977, "question_id": 57686189, "link": "https://stackoverflow.com/questions/57686189/how-to-get-items-with-approved-ids-from-another-array-map-filter-or/57687977#57687977", "title": "How to get items with approved ids from another array? map() filter() or?", "body": "<p>I think we can all try to be a little more educational in our answers. The answer with filter is definitely good and is working. But why is it working? And why is OP's thinking about using map()?.</p>\n\n<p>Here is my answer:</p>\n\n<p>You don't have to use <code>map()</code> at all. The <code>.map()</code> method, as you might know, is applying a function to all items in the list. It would make sense to think that mapping (applying) a filter-function on every item makes sense. And it does! Only, this is exactly what the <code>.filter()</code>method is doing. <code>.filter()</code>works exactly like <code>.map()</code> in the sense that it applies a function to every element in the array. However, <code>.filter()</code>wants a function that returns a boolean (true/false). If the functions return is true <code>.filter()</code>will add it to the returning array, else if it is false it will not. This is why we only have to use <code>.filter()</code>in this case.</p>\n\n<p>Some code heavily inspired by MoxxiManagarm's answer (mostly added comments):</p>\n\n<pre><code>export interface Code {\n  id: number;\n  code: string;\n}\n\nexport class AppComponent  {\n  name = 'Angular';\n  items: Code[] = [\n    { id: 535345, code: '432gdh4356' },\n    { id: 634586, code: 'irdtry4567' },\n    { id: 124315, code: 'fgdt43104f' },\n    { id: 978767, code: 'eaw32134dd' }\n  ];\n  approvedItems: Code[];\n\n  approvedId: number[] = [ 535345, 978767 ];\n\n  ngOnInit() {\n    this.approvedItems = this.getApprovedItems();\n  }\n\n\n  public getApprovedItems(): Code[] {\n    // (item: Code) =&gt; this.approvedId.includes(item.id) will return true if\n    // the item's id is included in the approvedId array and therefore add it\n    // to the returning array\n    return this.items.filter((item: Code) =&gt; this.approvedId.includes(item.id));\n  }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 6691741, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/edqoa.jpg?s=128&g=1", "display_name": "JanuszFrontEnd&#39;u", "link": "https://stackoverflow.com/users/6691741/januszfrontendu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 57687977, "answer_count": 5, "score": 4, "last_activity_date": 1575230928, "creation_date": 1566973435, "last_edit_date": 1566974082, "question_id": 57686189, "link": "https://stackoverflow.com/questions/57686189/how-to-get-items-with-approved-ids-from-another-array-map-filter-or", "title": "How to get items with approved ids from another array? map() filter() or?", "body": "<p>Hi I don't know how to get only this items (array with objects) \nwhich have approved id? Basically, I'm not sure what to do first... <code>map()</code> then <code>filter()</code> or <code>filter()</code> them <code>map()</code>?</p>\n\n<pre><code>export class AppComponent  {\n  name = 'Angular';\n  items = [\n    { id: 535345, code: '432gdh4356' },\n    { id: 634586, code: 'irdtry4567' },\n    { id: 124315, code: 'fgdt43104f' },\n    { id: 978767, code: 'eaw32134dd' }\n  ];\n\n  approvedId = [ 535345, 978767 ];\n\n  ngOnInit() {\n    this.getApprovedItems();\n  }\n\n  public getApprovedItems(): any {\n    // result:\n    // [{ id: 535345, code: '432gdh4356' }, { id: 978767, code: 'eaw32134dd' }]\n  }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11987198, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxLk7HAfN0yzorFqGZHuFtrhx2stnYKq1f9POhgQ=k-s128", "display_name": "Sak", "link": "https://stackoverflow.com/users/11987198/sak"}, "edited": false, "score": 0, "creation_date": 1566972935, "post_id": 57686050, "comment_id": 101817434, "body": "ORBIT: sorry  i tried many times forget delete my url code, however i replaced to &#39;api&#39; when i call post method. it work fine when running locally, except on hosting server."}, {"owner": {"reputation": 3975, "user_id": 6183113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248564385154034/picture?type=large", "display_name": "Chanaka Weerasinghe", "link": "https://stackoverflow.com/users/6183113/chanaka-weerasinghe"}, "reply_to_user": {"reputation": 1, "user_id": 11987198, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxLk7HAfN0yzorFqGZHuFtrhx2stnYKq1f9POhgQ=k-s128", "display_name": "Sak", "link": "https://stackoverflow.com/users/11987198/sak"}, "edited": false, "score": 0, "creation_date": 1566973112, "post_id": 57686050, "comment_id": 101817501, "body": "remove your proxy"}, {"owner": {"reputation": 1, "user_id": 11987198, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxLk7HAfN0yzorFqGZHuFtrhx2stnYKq1f9POhgQ=k-s128", "display_name": "Sak", "link": "https://stackoverflow.com/users/11987198/sak"}, "edited": false, "score": 0, "creation_date": 1566973755, "post_id": 57686050, "comment_id": 101817723, "body": "i have tried but CORS err issued. that why i use proxy."}, {"owner": {"reputation": 3975, "user_id": 6183113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248564385154034/picture?type=large", "display_name": "Chanaka Weerasinghe", "link": "https://stackoverflow.com/users/6183113/chanaka-weerasinghe"}, "reply_to_user": {"reputation": 1, "user_id": 11987198, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxLk7HAfN0yzorFqGZHuFtrhx2stnYKq1f9POhgQ=k-s128", "display_name": "Sak", "link": "https://stackoverflow.com/users/11987198/sak"}, "edited": false, "score": 0, "creation_date": 1566973805, "post_id": 57686050, "comment_id": 101817740, "body": "yep in real server you dont want proxy"}], "tags": [], "owner": {"reputation": 3975, "user_id": 6183113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248564385154034/picture?type=large", "display_name": "Chanaka Weerasinghe", "link": "https://stackoverflow.com/users/6183113/chanaka-weerasinghe"}, "is_accepted": false, "score": 0, "last_activity_date": 1566972647, "creation_date": 1566972647, "answer_id": 57686050, "question_id": 57686005, "link": "https://stackoverflow.com/questions/57686005/how-to-fix-call-external-domain-through-angular-proxy-keep-returning-index-html/57686050#57686050", "title": "how to fix call external domain through angular proxy keep returning index.html", "body": "<p>Your <code>URL</code> not this</p>\n\n<pre><code>let url = 'https://notify-api.line.me/api/notify';\n</code></pre>\n\n<p>it is </p>\n\n<pre><code>let url = './api';\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11987198, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxLk7HAfN0yzorFqGZHuFtrhx2stnYKq1f9POhgQ=k-s128", "display_name": "Sak", "link": "https://stackoverflow.com/users/11987198/sak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566974045, "creation_date": 1566972442, "last_edit_date": 1566974045, "question_id": 57686005, "link": "https://stackoverflow.com/questions/57686005/how-to-fix-call-external-domain-through-angular-proxy-keep-returning-index-html", "title": "how to fix call external domain through angular proxy keep returning index.html", "body": "<p>my angular app works fine when i run and test it with localhost:4200. when i deployed to web hosting, web hosting server keep returning my app 'index.html' in plaintex and did not call external api. \ni confused why it works when developing time, but deploy to web hosting not.</p>\n\n<p>proxy.conf.json :</p>\n\n<pre><code> {\n   \"/api\": {\n     \"target\": \"https://notify-api.line.me/api/notify\",\n     \"secure\": true,\n     \"pathRewrite\": {\"^/api\": \"\"},\n     \"changeOrigin\": true,\n     \"logLevel\": \"debug\"\n   }\n }\n</code></pre>\n\n<p>my service call function.</p>\n\n<pre><code>sendLineNotify(msg: string) {\n\n    let token = \"Bearer ----my_token------\";\n\n    let headers = new HttpHeaders().set(\"Content-Type\", \"application/x-www-form-urlencoded\").set(\"Authorization\", token);\n\n    let params = new HttpParams().set(\"message\", msg);\n    return this.http.post&lt;string&gt;('api', params, { headers: headers, responseType: 'text' as 'json' }).toPromise().then(r =&gt; { \n\n      console.log(r);\n    }).catch(function (error) {\n      console.error(\"line say: \", error);\n    });\n  }\n</code></pre>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 858, "user_id": 380414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84ad6819b7f828c3811cf2c0e674cb18?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/380414/sam"}, "edited": false, "score": 0, "creation_date": 1566972223, "post_id": 57685926, "comment_id": 101817212, "body": "so I must include ChildProps then since the type will always be any?"}, {"owner": {"reputation": 134, "user_id": 11950301, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R4lsUVyb5JM/AAAAAAAAAAI/AAAAAAAAADg/xd1Z3-wCurg/photo.jpg?sz=128", "display_name": "Aman Kumar", "link": "https://stackoverflow.com/users/11950301/aman-kumar"}, "reply_to_user": {"reputation": 858, "user_id": 380414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84ad6819b7f828c3811cf2c0e674cb18?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/380414/sam"}, "edited": false, "score": 1, "creation_date": 1566973457, "post_id": 57685926, "comment_id": 101817620, "body": "yes, you can do that or you can also say  <code>const Parent = props =&gt; ( &lt;Child value={props.value as ChildProps} &#47;&gt; )</code> this will expect <code>props.value</code> to be of type <code>ChildProps</code>"}], "tags": [], "owner": {"reputation": 134, "user_id": 11950301, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R4lsUVyb5JM/AAAAAAAAAAI/AAAAAAAAADg/xd1Z3-wCurg/photo.jpg?sz=128", "display_name": "Aman Kumar", "link": "https://stackoverflow.com/users/11950301/aman-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1566971957, "creation_date": 1566971957, "answer_id": 57685926, "question_id": 57685744, "link": "https://stackoverflow.com/questions/57685744/why-cant-typescript-type-check-react-props/57685926#57685926", "title": "Why can&#39;t TypeScript type check React props?", "body": "<p>Here type of <code>props</code> is <code>any</code> so, props.value can be a string or can be a object which is correct</p>\n\n<pre><code>const Parent = props =&gt; (\n  &lt;Child value={props.value} /&gt;\n)\n</code></pre>\n\n<p>Here Props of Child is always undefined which is not correct</p>\n\n<pre><code>const Parent = props =&gt; (\n  &lt;Child /&gt;\n)\n</code></pre>\n\n<p>Note: Typescript only does compile-time type checking, if you get a number inside a sting type in typescript, at run-time it will pass.</p>\n"}, {"comments": [{"owner": {"reputation": 15350, "user_id": 6877799, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j85tT.jpg?s=128&g=1", "display_name": "AmerllicA", "link": "https://stackoverflow.com/users/6877799/amerllica"}, "edited": false, "score": 0, "creation_date": 1583320354, "post_id": 57686236, "comment_id": 107073870, "body": "Thanks for your answer I prefer to use <code>type</code> instead of <code>interface</code>. upvote for your awesome answer."}], "tags": [], "owner": {"reputation": 8132, "user_id": 8605960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/manal.jpg?s=128&g=1", "display_name": "Asaf Aviv", "link": "https://stackoverflow.com/users/8605960/asaf-aviv"}, "is_accepted": false, "score": 3, "last_activity_date": 1566973732, "creation_date": 1566973732, "answer_id": 57686236, "question_id": 57685744, "link": "https://stackoverflow.com/questions/57685744/why-cant-typescript-type-check-react-props/57686236#57686236", "title": "Why can&#39;t TypeScript type check React props?", "body": "<p>You need to type your components with <code>React.FC</code> and pass an <code>interface</code> to be merged with react props</p>\n\n<pre><code>interface ChildProps {\n  value: string;\n}\n\nconst Child: React.FC&lt;ChildProps&gt; = props =&gt; (\n  &lt;div&gt;{props.value}&lt;/div&gt;\n)\n\nconst Parent: React.FC = props =&gt; (\n  &lt;Child value=\"val\" /&gt;\n)\n</code></pre>\n"}], "owner": {"reputation": 858, "user_id": 380414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84ad6819b7f828c3811cf2c0e674cb18?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/380414/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 0, "accepted_answer_id": 57685926, "answer_count": 2, "score": 1, "last_activity_date": 1566973732, "creation_date": 1566971041, "last_edit_date": 1566971937, "question_id": 57685744, "link": "https://stackoverflow.com/questions/57685744/why-cant-typescript-type-check-react-props", "title": "Why can&#39;t TypeScript type check React props?", "body": "<p>Why isn't TypeScript able to type-check React props? The following example passes Typescript even though it is incorrect:</p>\n\n<pre><code>import * as React from 'react';\n\ntype ChildProps = {\n  value: string\n}\n\nconst Child = (props:ChildProps) =&gt; (\n  &lt;div&gt;{props.value}&lt;/div&gt;\n)\n\nconst Parent = props =&gt; (\n  &lt;Child {... props} /&gt;\n)\n\nconst BadParent = &lt;Parent /&gt;; // incorrect behavior: passes type check even though value is missing\n</code></pre>\n\n<p>While this code passes fine:</p>\n\n<pre><code>import * as React from 'react';\n\ntype ChildProps = {\n  value: string\n}\n\nconst Child = (props:ChildProps) =&gt; (\n  &lt;div&gt;{props.value}&lt;/div&gt;\n)\n\nconst Parent = props =&gt; (\n  &lt;Child /&gt;         // correct behavior: throws type error\n)\n</code></pre>\n\n<p>So it seems Typescript knows what types should be passed to the Child component but doesn't know how to interpret types from props being passed in.</p>\n\n<p>I know I can just change the function signature of the Parent to include the ChildProps argument type, but I'm looking for a way to avoid doing this because I need to have a different Parent defined in several different modules, which means I have to import the ChildProps type every time.</p>\n"}, {"tags": ["angular", "typescript", "bootstrap-modal"], "comments": [{"owner": {"reputation": 3058, "user_id": 2776473, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/JvVL6.jpg?s=128&g=1", "display_name": "Shmulik Klein", "link": "https://stackoverflow.com/users/2776473/shmulik-klein"}, "edited": false, "score": 1, "creation_date": 1566971553, "post_id": 57685626, "comment_id": 101816988, "body": "&quot;However the same attribute which is displayed inside the modal window is same for both instances of custom component when button is clicked&quot; - are you referring to the <code>div class= &quot;modal-body&quot;</code> element?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9693453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b7gvBCdb7Hw/AAAAAAAAAAI/AAAAAAAAD5M/ohmk6n8HCdg/photo.jpg?sz=128", "display_name": "Anuj Marwaha", "link": "https://stackoverflow.com/users/9693453/anuj-marwaha"}, "edited": false, "score": 0, "creation_date": 1567015421, "post_id": 57688490, "comment_id": 101839824, "body": "Thanks a lot John. You saved a lot of my time."}], "tags": [], "owner": {"reputation": 686, "user_id": 6566070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007b9259bfd264ca0b1ed21b74bd72e1?s=128&d=identicon&r=PG&f=1", "display_name": "Johns Mathew", "link": "https://stackoverflow.com/users/6566070/johns-mathew"}, "is_accepted": true, "score": 1, "last_activity_date": 1566982349, "creation_date": 1566982349, "answer_id": 57688490, "question_id": 57685626, "link": "https://stackoverflow.com/questions/57685626/bootstrap-modal-issue-in-angular-6/57688490#57688490", "title": "BootStrap Modal issue in angular 6", "body": "<p>Your component is rendered correctly by Angular. If you inspect your angular application in chrome, you can see two distinct modal components with the correct data. But, the issue here is that you are using the same id for both the modals.</p>\n\n<p>In your test-modal.component.html file, you have a <code>data-target=\"#myModal\"</code> code. When bootstrap sees this code, it is interpreted as - When this button is clicked, show the modal box with id = myModal. This would work if there is only one modal. But in your case, there are two instances of app-tesmodal. This creates two modals with same id myModal. So, when you click the <em>Open Modal</em> button, bootstrap looks for the first item with id = myModal and opens it. This is why you always get the same modal irrespective of the button clicked.</p>\n\n<p>To solve this, you need unique id for each modal. Replace the <em>Open Modal</em> button code with the below:</p>\n\n<pre><code>&lt;button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" [attr.data-target]=\"'#myModal' + testInput\"&gt;Open Modal&lt;/button&gt;\n</code></pre>\n\n<p>Replace the modal div open tag with the below code:</p>\n\n<pre><code>&lt;div class=\"modal\" [attr.id]=\"'myModal' + testInput\" role=\"dialog\"&gt;\n</code></pre>\n\n<p>Now, you are dynamically setting the id for the modals based on the input passed to the <em>tesmodal</em> component. This ensures that the correct modal is triggered on button click. </p>\n\n<p>Full html code for test-modal.component.html below:</p>\n\n<pre><code>{{testInput}}\n&lt;div class=\"container\"&gt;\n  &lt;h2&gt;Modal Example&lt;/h2&gt;\n  &lt;button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" [attr.data-target]=\"'#myModal' + testInput\"&gt;Open Modal&lt;/button&gt;\n  &lt;div class=\"modal\" [attr.id]=\"'myModal' + testInput\" role=\"dialog\"&gt;\n    &lt;div class=\"modal-dialog\"&gt;\n      &lt;h4 class=\"modal-title\"&gt;{{testInput}}&lt;/h4&gt;\n\n      &lt;div class=\"modal-content\"&gt;\n        &lt;div class=\"modal-header\"&gt;\n          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n          &lt;h4 class=\"modal-title\"&gt;Modal Header &lt;/h4&gt;\n          &lt;h4 class=\"modal-title\"&gt;{{testInput}}&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-body\"&gt;\n          &lt;p&gt;Some text in the modal.&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9693453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b7gvBCdb7Hw/AAAAAAAAAAI/AAAAAAAAD5M/ohmk6n8HCdg/photo.jpg?sz=128", "display_name": "Anuj Marwaha", "link": "https://stackoverflow.com/users/9693453/anuj-marwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "accepted_answer_id": 57688490, "answer_count": 1, "score": 0, "last_activity_date": 1566982349, "creation_date": 1566970351, "question_id": 57685626, "link": "https://stackoverflow.com/questions/57685626/bootstrap-modal-issue-in-angular-6", "title": "BootStrap Modal issue in angular 6", "body": "<p>I have created a custom component in my project. The html of that component has Bootstrap modal in which i am displaying some text which gets passed as input to this component from app module (attribute name is testInput) . The type script of this component has the attribute name marked with @Input annotation.</p>\n\n<p>In app component html file, I have two instances of this custom component and value passed as input is different. When i run this project, the displayed value in html (outside of the modal) of the custom component comes different for two instances. However the same attribute which is displayed inside the modal window is same for both instances of custom component when button is clicked. Please help to resolve the issue.</p>\n\n<p>app.component.html</p>\n\n<pre><code>&lt;app-tesmodal [testInput] =\"'anish'\"&gt;&lt;/app-tesmodal&gt;\n&lt;app-tesmodal [testInput] =\"'anuj'\"&gt;&lt;/app-tesmodal&gt;\n</code></pre>\n\n<p>test-modal.component.ts</p>\n\n<pre><code>import { Component, OnInit, Input } from '@angular/core';\n@Component({\n  selector: 'app-tesmodal',\n  templateUrl: './tesmodal.component.html',\n  styleUrls: ['./tesmodal.component.css']\n})\nexport class TesmodalComponent implements OnInit {\n\n  @Input() testInput: string;\n  constructor() { }\n\n  ngOnInit() {\n  }\n}\n</code></pre>\n\n<p>Code for test-modal.component.html</p>\n\n<pre><code> {\u200c{testInput}}\n&lt;div class=\"container\"&gt;\n    &lt;h2&gt;Modal Example&lt;/h2&gt;\n    &lt;button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"&gt;Open Modal&lt;/button&gt;\n    &lt;div class=\"modal\" id=\"myModal\" role=\"dialog\"&gt;\n      &lt;div class=\"modal-dialog\"&gt;\n        &lt;h4 class=\"modal-title\"&gt;{\u200c{testInput}}&lt;/h4&gt;\n\n        &lt;div class=\"modal-content\"&gt;\n          &lt;div class=\"modal-header\"&gt;\n            &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n            &lt;h4 class=\"modal-title\"&gt;Modal Header &lt;/h4&gt;\n            &lt;h4 class=\"modal-title\"&gt;{\u200c{test}}&lt;/h4&gt;\n          &lt;/div&gt;\n          &lt;div class=\"modal-body\"&gt;\n            &lt;p&gt;Some text in the modal.&lt;/p&gt;\n          &lt;/div&gt;\n          &lt;div class=\"modal-footer\"&gt;\n            &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;        \n      &lt;/div&gt;\n    &lt;/div&gt;    \n  &lt;/div&gt;  \n</code></pre>\n\n<p>I am expecting the modal content to be different for two different instances of component</p>\n"}, {"tags": ["angular", "typescript", "angular7", "angular-forms"], "comments": [{"owner": {"reputation": 4052, "user_id": 4948483, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Xeqa2.jpg?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4948483/manish"}, "edited": false, "score": 1, "creation_date": 1566967801, "post_id": 57685207, "comment_id": 101816003, "body": "I wont recommend the way you have created the form. In such scenarios use <code>FormArray</code> Instead"}], "answers": [{"comments": [{"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1566973570, "post_id": 57685449, "comment_id": 101817655, "body": "if you only need a form Array, use only a formArray -it&#39;s not necesary create a formGroup with a formArray inside, see <a href=\"https://stackoverflow.com/questions/56622872/angular-reactive-form-array/56623003#56623003\" title=\"angular reactive form array\">stackoverflow.com/questions/56622872/&hellip;</a>"}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1566974558, "post_id": 57685449, "comment_id": 101818013, "body": "@Eliseo - I was of the opinion that the questioner had other data in his <code>FormGroup</code> and posted only the relevant data for his issue. @NeerajNauni - If there is no other data in the <code>FormGroup</code>, then yes, creating just a <code>FormArray</code> should be sufficient."}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "edited": false, "score": 0, "creation_date": 1566979074, "post_id": 57685449, "comment_id": 101820073, "body": "@NeerajNauni - Let me know if the solution is working for you"}, {"owner": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "edited": false, "score": 0, "creation_date": 1566985671, "post_id": 57685449, "comment_id": 101823652, "body": "@nash11 not exactly, I did some tweaking in that ."}], "tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": false, "score": 0, "last_activity_date": 1566974673, "last_edit_date": 1566974673, "creation_date": 1566969186, "answer_id": 57685449, "question_id": 57685207, "link": "https://stackoverflow.com/questions/57685207/how-to-get-the-value-of-list-with-same-formcontrolname/57685449#57685449", "title": "How to get the value of list with same formcontrolname?", "body": "<p>You need to use <code>FormArray</code> instead</p>\n\n<p>In your component, create your <code>FormGroup</code> and <code>FormArray</code>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.dataForm = new FormGroup({\n    key: new FormArray(this.dataArr.map(data =&gt; new FormControl(data.key, [Validators.required])))\n    // Add other form groups or form controls here\n});\n\nsave() {\n    console.log(this.dataForm.value);\n}\n</code></pre>\n\n<p>Bind these controls in your <code>form</code> like below. You don't need to <code>value</code> attribute because <code>FormControl</code> will bind the value for you instead.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form [formGroup]=\"dataForm\"&gt;\n    &lt;div *ngFor=\"let data of dataArr; let i = index\" formArrayName=\"key\"&gt;\n        &lt;input type=\"text\" placeholder=\"Key\" [formControlName]=\"i\" /&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n\n&lt;button type=\"button\" style=\"background-color: #4980FF;\" (click)=\"save();\"&gt;Save&lt;/button&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "edited": false, "score": 0, "creation_date": 1566971611, "post_id": 57685475, "comment_id": 101817006, "body": "The data in dataArr will come from the API and the problem is that since the API call will be async in nature , the form is rendering first and then the API is getting called , so my dataArr is showing null , while rendering the form."}, {"owner": {"reputation": 4052, "user_id": 4948483, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Xeqa2.jpg?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4948483/manish"}, "reply_to_user": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "edited": false, "score": 0, "creation_date": 1566975532, "post_id": 57685475, "comment_id": 101818450, "body": "So thats not a problem at all just use a *ngIf on the form.. Updated the Code to execute when the api has returned the result.. I have added a setTimeout of 2 sec after which the dataArr object is set and the form is loaded.. This solves your API data issue.."}, {"owner": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "edited": false, "score": 0, "creation_date": 1566979843, "post_id": 57685475, "comment_id": 101820454, "body": "But dataArr size is not fixed and also it doesn&#39;t contain any key like &#39;key&#39;"}, {"owner": {"reputation": 4052, "user_id": 4948483, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Xeqa2.jpg?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4948483/manish"}, "reply_to_user": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "edited": false, "score": 0, "creation_date": 1566987732, "post_id": 57685475, "comment_id": 101824850, "body": "Thats OK dataArr can be of any size doesnt matters all the items will be displayed. Also that property key is what i have set to demonstrate FormArray you can use whatever you want or whatever is the property in dataArr.."}], "tags": [], "owner": {"reputation": 4052, "user_id": 4948483, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Xeqa2.jpg?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4948483/manish"}, "is_accepted": false, "score": 0, "last_activity_date": 1566975445, "last_edit_date": 1566975445, "creation_date": 1566969336, "answer_id": 57685475, "question_id": 57685207, "link": "https://stackoverflow.com/questions/57685207/how-to-get-the-value-of-list-with-same-formcontrolname/57685475#57685475", "title": "How to get the value of list with same formcontrolname?", "body": "<p>When working with an array of items in forms where you might need to add controls or remove controls or even editing the values of existing items always use angular FormArray. </p>\n\n<p>Below is a working example of FormArray.. Here is a working <a href=\"https://stackblitz.com/edit/angular-z7z9if\" rel=\"nofollow noreferrer\">Stackblitz</a>\nMore on <a href=\"https://angular.io/api/forms/FormArray\" rel=\"nofollow noreferrer\">FormArray</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import {\r\n  Component,\r\n  OnInit\r\n} from '@angular/core';\r\nimport {\r\n  FormBuilder,\r\n  FormGroup,\r\n  FormArray\r\n} from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'my-app',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  name = 'Angular';\r\n  dataForm: FormGroup;\r\n  items: FormArray;\r\n  dataArr: any;\r\n  constructor(private formBuilder: FormBuilder) {\r\n\r\n  }\r\n  ngOnInit() {\r\n    this.dataForm = this.formBuilder.group({\r\n      items: this.formBuilder.array([])\r\n    });\r\n    setTimeout(() =&gt; {\r\n      this.dataArr = [{\r\n          key: 'First'\r\n        },\r\n        {\r\n          key: 'Second'\r\n        },\r\n        {\r\n          key: 'Third'\r\n        },\r\n        {\r\n          key: 'Fourth'\r\n        }\r\n      ];\r\n      this.createItems();\r\n    }, 2000)\r\n  }\r\n  createItems() {\r\n    this.items = this.dataForm.get('items') as FormArray;\r\n    this.dataArr.forEach((elem: any) =&gt; {\r\n      const ctrl = this.formBuilder.group({\r\n        key: [elem.key]\r\n      });\r\n      this.items.push(ctrl);\r\n    })\r\n  }\r\n\r\n\r\n  save() {\r\n    console.log(this.dataForm.get('items').value)\r\n    return this.dataForm.get('items').value;\r\n  }\r\n\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form [formGroup]=\"dataForm\"&gt;\r\n  &lt;div formArrayName=\"items\" *ngFor=\"let item of dataForm.get('items').controls; let i = index;\"&gt;\r\n    &lt;div [formGroupName]=\"i\"&gt;\r\n      &lt;input type=\"text\" placeholder=\"Key\" formControlName=\"key\" /&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/form&gt;\r\n\r\n&lt;button type=\"button\" style=\"background-color: #4980FF;\" (click)=\"save();\"&gt;Save&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 5, "user_id": 11812495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb1838638fe9e425f5c89651331ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj Nauni", "link": "https://stackoverflow.com/users/11812495/neeraj-nauni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2871, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566975445, "creation_date": 1566967605, "question_id": 57685207, "link": "https://stackoverflow.com/questions/57685207/how-to-get-the-value-of-list-with-same-formcontrolname", "title": "How to get the value of list with same formcontrolname?", "body": "<p>I have 4 inputs which are generated using loop . And I am using angular forms for UI , but the problem is I am getting only last input value and the requirement is I need all the input values provided I cannot generate the formControlName dynamic . Is there any way to bypass only getting the last value and get all values ?? </p>\n\n<p>The HTML code for the same is(this loop will execute based on dataArr,here assume it is executing 4 times)  :</p>\n\n<pre><code>&lt;form [formGroup]=\"dataForm\"&gt;\n   &lt;div *ngFor = \"let data of dataArr;\"&gt;\n\n    &lt;input type=\"text\" placeholder=\"Key\" value={{data.key}} formControlName=\"key\"/&gt;\n\n   &lt;/div&gt;\n&lt;/form&gt;\n\n&lt;button type=\"button\" style=\"background-color: #4980FF;\" (click)=\"save();\"&gt;Save&lt;/button&gt;\n</code></pre>\n\n<p>The code in .ts file :</p>\n\n<pre><code>  // it is initializing and registering the form value\n  dataForm = new FormGroup({\n    key: new FormControl('', [Validators.required])\n\n  });\n\n  save(){\n   // Here I am trying to print the form value \n  }\n</code></pre>\n\n<p>I am looking to get all the values when I click save button and not only the last value .</p>\n"}]