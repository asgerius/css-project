[{"tags": ["javascript", "angular", "typescript", "oop"], "comments": [{"owner": {"reputation": 15416, "user_id": 3509591, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rshrf.jpg?s=128&g=1", "display_name": "Zze", "link": "https://stackoverflow.com/users/3509591/zze"}, "edited": false, "score": 1, "creation_date": 1564011129, "post_id": 57192468, "comment_id": 100894272, "body": "This is exactly how I do it. Also, depending on your backend (if you have one) this may deserialize esaier depending what Object structure you are expecting on your form post."}, {"owner": {"reputation": 5769, "user_id": 2493235, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/837a3de9f984381fd8558ec6d6ca334a?s=128&d=identicon&r=PG", "display_name": "Nigel B. Peck", "link": "https://stackoverflow.com/users/2493235/nigel-b-peck"}, "reply_to_user": {"reputation": 15416, "user_id": 3509591, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rshrf.jpg?s=128&g=1", "display_name": "Zze", "link": "https://stackoverflow.com/users/3509591/zze"}, "edited": false, "score": 0, "creation_date": 1564011288, "post_id": 57192468, "comment_id": 100894301, "body": "Awesome, thanks, interested why it might deserialize more easily?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1564011310, "post_id": 57192468, "comment_id": 100894306, "body": "Why <code>class</code> and not just <code>interface</code>?"}, {"owner": {"reputation": 5769, "user_id": 2493235, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/837a3de9f984381fd8558ec6d6ca334a?s=128&d=identicon&r=PG", "display_name": "Nigel B. Peck", "link": "https://stackoverflow.com/users/2493235/nigel-b-peck"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1564011497, "post_id": 57192468, "comment_id": 100894345, "body": "@jcalz Because I need to use it to create objects for the checkboxes?"}, {"owner": {"reputation": 9413, "user_id": 3534636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PdxWC.png?s=128&g=1", "display_name": "JayChase", "link": "https://stackoverflow.com/users/3534636/jaychase"}, "edited": false, "score": 1, "creation_date": 1564012378, "post_id": 57192468, "comment_id": 100894501, "body": "There is an <a href=\"https://angular.io/guide/styleguide#style-guide\" rel=\"nofollow noreferrer\">Angular Style Guide</a> issue <a href=\"https://github.com/angular/angular/issues/19632\" rel=\"nofollow noreferrer\">here</a> which has a good discussion on the pros/cons of classes and interfaces for models."}], "answers": [{"comments": [{"owner": {"reputation": 5769, "user_id": 2493235, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/837a3de9f984381fd8558ec6d6ca334a?s=128&d=identicon&r=PG", "display_name": "Nigel B. Peck", "link": "https://stackoverflow.com/users/2493235/nigel-b-peck"}, "edited": false, "score": 0, "creation_date": 1564011956, "post_id": 57192530, "comment_id": 100894429, "body": "Got it, thanks, that makes sense. Knew something smelled wrong but couldn&#39;t figure it out. I&#39;d tried <code>companions: { id: string, name: string, chosen: boolean }[];</code> but TypeScript didn&#39;t like it when assigning objects. This makes much more sense, will give it a try. Thanks!"}, {"owner": {"reputation": 5769, "user_id": 2493235, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/837a3de9f984381fd8558ec6d6ca334a?s=128&d=identicon&r=PG", "display_name": "Nigel B. Peck", "link": "https://stackoverflow.com/users/2493235/nigel-b-peck"}, "edited": false, "score": 2, "creation_date": 1564012339, "post_id": 57192530, "comment_id": 100894493, "body": "Yep, just tried it and it is indeed awesome :) Thanks again."}], "tags": [], "owner": {"reputation": 16557, "user_id": 586809, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/18fe0affe54dda2f031efc78babcf2a6?s=128&d=identicon&r=PG", "display_name": "frosty", "link": "https://stackoverflow.com/users/586809/frosty"}, "is_accepted": true, "score": 2, "last_activity_date": 1564011600, "creation_date": 1564011600, "answer_id": 57192530, "question_id": 57192468, "link": "https://stackoverflow.com/questions/57192468/typescript-classes-declaring-an-array-of-objects-as-a-property/57192530#57192530", "title": "TypeScript Classes - Declaring an Array of Objects as a Property", "body": "<p>I think that most people in Typescript (not just Angular) don't use classes for these models. We use interfaces for them. So your <code>ExampleForm</code> would look like this. </p>\n\n<pre><code>export class ExampleForm{\n    // This was what you already had\n    companions: Companion[];\n}\n</code></pre>\n\n<p>and then use an interface to define <code>Companion</code>. </p>\n\n<pre><code>export interface Companion{\n    id: string;\n    name: string;\n    chosen: boolean;\n}\n</code></pre>\n\n<p>Doing it like this will allow you to just use plain JavaScript objects for the <code>Companion</code>s. But you will get type safety on each of those objects. It's pretty awesome. </p>\n"}], "owner": {"reputation": 5769, "user_id": 2493235, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/837a3de9f984381fd8558ec6d6ca334a?s=128&d=identicon&r=PG", "display_name": "Nigel B. Peck", "link": "https://stackoverflow.com/users/2493235/nigel-b-peck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 57192530, "answer_count": 1, "score": 1, "last_activity_date": 1564011600, "creation_date": 1564010774, "question_id": 57192468, "link": "https://stackoverflow.com/questions/57192468/typescript-classes-declaring-an-array-of-objects-as-a-property", "title": "TypeScript Classes - Declaring an Array of Objects as a Property", "body": "<p>I'm looking for the most appropriate way to declare an array of objects as a property when declaring a class using TypeScript. This is for use with a form that will have an unknown number of checkboxes for an Angular Template-Driven form.</p>\n\n<p>Is it advisable to have a separate class for the objects, as I have below, or is there a better way? Tried searching for advice on this in many ways and can't find much. Am I way off the mark here?</p>\n\n<pre><code>export class Companion {\n    id: string;\n    name: string;\n    chosen: boolean;\n}\n\nexport class ExampleForm {\n    name: string;\n    email: string;\n    companions: Companion[];\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "socket.io", "rxjs", "observable"], "comments": [{"owner": {"reputation": 16557, "user_id": 586809, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/18fe0affe54dda2f031efc78babcf2a6?s=128&d=identicon&r=PG", "display_name": "frosty", "link": "https://stackoverflow.com/users/586809/frosty"}, "edited": false, "score": 0, "creation_date": 1564011780, "post_id": 57192249, "comment_id": 100894393, "body": "Do you mean that you want the UI to use the <code>this.chatList$</code> and create all the DOM, and THEN you call another function? Is that what you are asking?"}, {"owner": {"reputation": 2067, "user_id": 4971999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSofZ.jpg?s=128&g=1", "display_name": "Keenan Diggs", "link": "https://stackoverflow.com/users/4971999/keenan-diggs"}, "edited": false, "score": 0, "creation_date": 1564012301, "post_id": 57192249, "comment_id": 100894487, "body": "Using the dollar sign like that <code>this.chatList$</code> conventionally means that the variable is an Observable, so I think it is weird that you are doing that.  More importantly, I don&#39;t understand what you are asking, could you add the relevant template code?"}, {"owner": {"reputation": 2067, "user_id": 4971999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSofZ.jpg?s=128&g=1", "display_name": "Keenan Diggs", "link": "https://stackoverflow.com/users/4971999/keenan-diggs"}, "edited": false, "score": 0, "creation_date": 1564013334, "post_id": 57192249, "comment_id": 100894678, "body": "This might sound dumb, but are are you scrolling immediately after page load? If you want the user to see something immediately, why not put it at the top of the page and then sit back and let the page render naturally and avoiding scrolling altogether?"}, {"owner": {"reputation": 13, "user_id": 11823527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc108b0495b56a691c405978e097ce73?s=128&d=identicon&r=PG&f=1", "display_name": "Raithar", "link": "https://stackoverflow.com/users/11823527/raithar"}, "reply_to_user": {"reputation": 16557, "user_id": 586809, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/18fe0affe54dda2f031efc78babcf2a6?s=128&d=identicon&r=PG", "display_name": "frosty", "link": "https://stackoverflow.com/users/586809/frosty"}, "edited": false, "score": 0, "creation_date": 1564014181, "post_id": 57192249, "comment_id": 100894790, "body": "@frosty Yes that&#39;s excatly how I meant. When you put it that way, it seems like the issue actually lies at DOM not rendered in time?"}, {"owner": {"reputation": 13, "user_id": 11823527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc108b0495b56a691c405978e097ce73?s=128&d=identicon&r=PG&f=1", "display_name": "Raithar", "link": "https://stackoverflow.com/users/11823527/raithar"}, "reply_to_user": {"reputation": 2067, "user_id": 4971999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSofZ.jpg?s=128&g=1", "display_name": "Keenan Diggs", "link": "https://stackoverflow.com/users/4971999/keenan-diggs"}, "edited": false, "score": 0, "creation_date": 1564014351, "post_id": 57192249, "comment_id": 100894820, "body": "@KeenanDiggs I see, thanks for clarifying. I shouldn&#39;t use a dollar sign here.  <b>Template code to render the chatList:</b> <code>&lt;div *ngFor=&quot;let item of chatList&quot;&gt;</code> (removed dollar sign)"}, {"owner": {"reputation": 13, "user_id": 11823527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc108b0495b56a691c405978e097ce73?s=128&d=identicon&r=PG&f=1", "display_name": "Raithar", "link": "https://stackoverflow.com/users/11823527/raithar"}, "reply_to_user": {"reputation": 2067, "user_id": 4971999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSofZ.jpg?s=128&g=1", "display_name": "Keenan Diggs", "link": "https://stackoverflow.com/users/4971999/keenan-diggs"}, "edited": false, "score": 0, "creation_date": 1564014636, "post_id": 57192249, "comment_id": 100894866, "body": "@KeenanDiggs To answer your second comment: I know it&#39;s not optimal, it&#39;s just for the sake of learning. I believe now it&#39;s because of DOM not being rendered in time by ngFor."}], "answers": [{"tags": [], "owner": {"reputation": 8097, "user_id": 8618350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f100e1a27815164cb9a9bf00487858?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Cheung", "link": "https://stackoverflow.com/users/8618350/fan-cheung"}, "is_accepted": false, "score": 0, "last_activity_date": 1564019550, "creation_date": 1564019550, "answer_id": 57193228, "question_id": 57192249, "link": "https://stackoverflow.com/questions/57192249/run-function-after-an-observable-variable-is-initialized/57193228#57193228", "title": "Run function after an observable variable is initialized", "body": "<p>Use <code>MutationObserver</code> to watch the parent node that contains your child list. Then use <code>subject</code> to emit from the callback to signal the list is ready for scroll to happen. Theoretically it should work </p>\n\n<pre><code>this.childReady=new Subject()\n// replace the dom select with your angular viewChild nativeElement\nvar targetNode = document.getElementById('some-id');\n\n// Options for the observer (which mutations to observe)\nvar config = {childList: true };\n\n// Callback function to execute when mutations are observed\nvar callback = function(mutationsList, observer) {\n        if (mutation.type == 'childList') {\n              this.childReady.next(true)\n        }\n};\n\n// Create an observer instance linked to the callback function\nvar observer = new MutationObserver(callback);\n\n// Start observing the target node for configured mutations\nobserver.observe(targetNode, config);\n\nthis.getMessages().pipe(\n  tap((chat: string[]) =&gt; {\n    this.chatList$ = chat;\n   }),\n   switchMap(()=&gt;this.childReady())\n).subscribe(()=&gt;{\n     this.conversationList.nativeElement.scrollTop = this.conversationList.nativeElement.scrollHeight;\n\n})\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11823527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc108b0495b56a691c405978e097ce73?s=128&d=identicon&r=PG&f=1", "display_name": "Raithar", "link": "https://stackoverflow.com/users/11823527/raithar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564019550, "creation_date": 1564008950, "question_id": 57192249, "link": "https://stackoverflow.com/questions/57192249/run-function-after-an-observable-variable-is-initialized", "title": "Run function after an observable variable is initialized", "body": "<p>I'm setting up a chat application with socket.io in Angular. I'm having problem to run a code/function right after an observable variable is initialized via subscription. That specific code after initializing should scroll down to the latest message, but it triggers too early.</p>\n\n<p>I think the problem is because the variable <code>chatList</code> below didn't have enough time to get the list of messages.</p>\n\n<p>Using <code>setTimeout(() =&gt; {/*scroll function here*/}, 1);</code> works, but it is not ideal at all. </p>\n\n<pre><code>this.getMessages()\n  .subscribe((chat: string[]) =&gt; {\n    this.chatList$ = chat;\n\n    //I want the code below to run once the code above is fully Initialized.\n     this.conversationList.nativeElement.scrollTop = this.conversationList.nativeElement.scrollHeight;\n  });\n</code></pre>\n\n<p>What's the proper way to run a code/function once the observable is completed?</p>\n"}, {"tags": ["angular", "typescript", "tslint"], "comments": [{"owner": {"reputation": 16212, "user_id": 946789, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/65df17cba0f5e1b7fe8e2c2928911153?s=128&d=identicon&r=PG", "display_name": "c69", "link": "https://stackoverflow.com/users/946789/c69"}, "edited": false, "score": 0, "creation_date": 1565049821, "post_id": 57192220, "comment_id": 101220623, "body": "do you use any other transpilers (than TS) ? also - try to remove codelizer default ruleset <code>&quot;rulesDirectory&quot;: [&quot;node_modules&#47;codelyzer&quot;],</code>"}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 16212, "user_id": 946789, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/65df17cba0f5e1b7fe8e2c2928911153?s=128&d=identicon&r=PG", "display_name": "c69", "link": "https://stackoverflow.com/users/946789/c69"}, "edited": false, "score": 0, "creation_date": 1565050087, "post_id": 57192220, "comment_id": 101220661, "body": "@c69 I dont think so.. where could I find that out?? I will remove codelyzer from the rulesDirectory and update"}, {"owner": {"reputation": 16212, "user_id": 946789, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/65df17cba0f5e1b7fe8e2c2928911153?s=128&d=identicon&r=PG", "display_name": "c69", "link": "https://stackoverflow.com/users/946789/c69"}, "edited": false, "score": 0, "creation_date": 1565050461, "post_id": 57192220, "comment_id": 101220725, "body": "you execute <code>ng lint</code>, this sound like you have NG CLI. Try running <code>ng version</code> (see <a href=\"https://angular.io/cli\" rel=\"nofollow noreferrer\">angular.io/cli</a> ) And also, optionally, <code>npm -v</code>, <code>node -v</code>, <code>typescript -v</code>, <code>npm ls</code>, <code>npm audit</code> ) to understand if you have everything up to date and no broken dependencies."}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 16212, "user_id": 946789, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/65df17cba0f5e1b7fe8e2c2928911153?s=128&d=identicon&r=PG", "display_name": "c69", "link": "https://stackoverflow.com/users/946789/c69"}, "edited": false, "score": 1, "creation_date": 1565050708, "post_id": 57192220, "comment_id": 101220762, "body": "@c69 I have updated my question with my angular version"}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 16212, "user_id": 946789, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/65df17cba0f5e1b7fe8e2c2928911153?s=128&d=identicon&r=PG", "display_name": "c69", "link": "https://stackoverflow.com/users/946789/c69"}, "edited": false, "score": 1, "creation_date": 1565050834, "post_id": 57192220, "comment_id": 101220785, "body": "npm: <code>6.90</code>, node: <code>v10.16.0</code>, typescript -v returns <code>zsh: no command found typescript</code> (could this be the issue??)"}, {"owner": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565051011, "post_id": 57192220, "comment_id": 101220815, "body": "@SmokeyDawson try <code>ts -v</code>"}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565051133, "post_id": 57192220, "comment_id": 101220833, "body": "@Jacques\u30b8\u30e3\u30c3\u30af I get command not found"}, {"owner": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565051312, "post_id": 57192220, "comment_id": 101220858, "body": "In that case, you probably have typescript installed only in the local npm scope. Run <code>npm install -g typescript</code> to install it globally. Regarding your actual issue. Try deleting your <code>node_modules</code> directory, then running <code>npm ci</code> then trying the linter again."}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565051395, "post_id": 57192220, "comment_id": 101220873, "body": "@Jacques\u30b8\u30e3\u30c3\u30af I will try this thankyou"}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565052935, "post_id": 57192220, "comment_id": 101221128, "body": "@Jacques\u30b8\u30e3\u30c3\u30af unfortunately still getting the same errors"}, {"owner": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565054664, "post_id": 57192220, "comment_id": 101221419, "body": "@SmokeyDawson if this is a public repo somewhere, I can pull it down and see if I&#39;m getting the same errors. It seems like an environment issue, but I cannot be sure without more information."}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "reply_to_user": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1565054713, "post_id": 57192220, "comment_id": 101221426, "body": "@Jacques\u30b8\u30e3\u30c3\u30af no unfortunately it cant be made public"}], "answers": [{"comments": [{"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "edited": false, "score": 0, "creation_date": 1565058865, "post_id": 57367960, "comment_id": 101222050, "body": "Upgrading from Angular 8.1.2 to 8.2.0 fixed this issue! Thanks a lot!"}, {"owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "edited": false, "score": 0, "creation_date": 1565058882, "post_id": 57367960, "comment_id": 101222052, "body": "I cant award the bounty until tomorrow"}, {"owner": {"reputation": 1471, "user_id": 1315672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3hc5C.jpg?s=128&g=1", "display_name": "tim545", "link": "https://stackoverflow.com/users/1315672/tim545"}, "reply_to_user": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "edited": false, "score": 0, "creation_date": 1565061798, "post_id": 57367960, "comment_id": 101222546, "body": "That&#39;s ok, I&#39;m glad it helped"}], "tags": [], "owner": {"reputation": 1471, "user_id": 1315672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3hc5C.jpg?s=128&g=1", "display_name": "tim545", "link": "https://stackoverflow.com/users/1315672/tim545"}, "is_accepted": true, "score": 4, "last_activity_date": 1565056715, "creation_date": 1565056715, "answer_id": 57367960, "question_id": 57192220, "link": "https://stackoverflow.com/questions/57192220/ng-lint-returning-false-errors-angular-8/57367960#57367960", "title": "ng lint returning false errors Angular 8", "body": "<p>I started a new local project using the latest version of the CLI and framework (v8.2.0), then added your file in as is. Running <code>npm run lint</code> only gave me one linting error</p>\n\n<p><code>ERROR: /&lt;...&gt;/file.ts:145:9 - Expected a 'for-of' loop instead of a 'for' loop with this simple iteration</code></p>\n\n<p>So perhaps the issues your having might be solved by updating the cli/framework version. If not then perhaps check your <code>angular.json</code> file to make sure your project is using the ts config that you expect, this was in mine from the default installation</p>\n\n<pre><code>\"lint\": {\n  \"builder\": \"@angular-devkit/build-angular:tslint\",\n  \"options\": {\n    \"tsConfig\": [\n      \"tsconfig.app.json\",\n      \"tsconfig.spec.json\",\n      \"e2e/tsconfig.json\"\n    ],\n    \"exclude\": [\n      \"**/node_modules/**\"\n    ]\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 6268, "user_id": 8724160, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mmcTl.jpg?s=128&g=1", "display_name": "Smokey Dawson", "link": "https://stackoverflow.com/users/8724160/smokey-dawson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2624, "favorite_count": 0, "accepted_answer_id": 57367960, "answer_count": 1, "score": 1, "last_activity_date": 1565056715, "creation_date": 1564008694, "last_edit_date": 1565050625, "question_id": 57192220, "link": "https://stackoverflow.com/questions/57192220/ng-lint-returning-false-errors-angular-8", "title": "ng lint returning false errors Angular 8", "body": "<p>Out of nowhere when I run ng lint, I get all these false errors </p>\n\n<p><code>Forbidden 'var' keyword, use 'let' or 'const' instead</code></p>\n\n<p>but I know for a fact that I am not using <code>var</code> anywhere in these files, also when I run <code>ng lint --fix</code> It replaces the <code>exp</code> in <code>export</code> and <code>fun</code> in <code>function</code> with let so <code>export function</code> becomes <code>letport letction</code></p>\n\n<p>I have no Idea how this started happening or why this started happening</p>\n\n<p>this is my tslint file</p>\n\n<pre><code>{\n    \"rulesDirectory\": [\"node_modules/codelyzer\"],\n    \"rules\": {\n        \"arrow-return-shorthand\": true,\n        \"callable-types\": true,\n        \"class-name\": true,\n        \"comment-format\": [true],\n        \"curly\": true,\n        \"eofline\": true,\n        \"forin\": true,\n        \"import-blacklist\": [true],\n        \"import-spacing\": true,\n        \"interface-over-type-literal\": true,\n        \"label-position\": true,\n        \"max-line-length\": [false],\n        \"member-access\": false,\n        \"member-ordering\": [\n            true,\n            {\n                \"order\": [\"static-field\", \"instance-field\", \"static-method\", \"instance-method\"]\n            }\n        ],\n        \"no-arg\": true,\n        \"no-bitwise\": true,\n        \"no-console\": [true, \"debug\", \"info\", \"time\", \"timeEnd\", \"trace\"],\n        \"no-construct\": true,\n        \"no-debugger\": true,\n        \"no-duplicate-super\": true,\n        \"no-empty\": false,\n        \"no-empty-interface\": true,\n        \"no-eval\": false,\n        \"no-inferrable-types\": [true, \"ignore-params\"],\n        \"no-misused-new\": true,\n        \"no-non-null-assertion\": true,\n        \"no-shadowed-variable\": false,\n        \"no-string-literal\": false,\n        \"no-string-throw\": true,\n        \"no-switch-case-fall-through\": true,\n        \"no-trailing-whitespace\": true,\n        \"no-unnecessary-initializer\": true,\n        \"no-unused-expression\": false,\n        \"no-var-keyword\": true,\n        \"object-literal-sort-keys\": false,\n        \"one-line\": [true, \"check-open-brace\", \"check-catch\", \"check-else\", \"check-whitespace\"],\n        \"prefer-const\": false,\n        \"quotemark\": [true, \"single\"],\n        \"radix\": false,\n        \"semicolon\": [true, \"always\"],\n        \"triple-equals\": [true, \"allow-null-check\"],\n        \"typedef-whitespace\": [\n            true,\n            {\n                \"call-signature\": \"nospace\",\n                \"index-signature\": \"nospace\",\n                \"parameter\": \"nospace\",\n                \"property-declaration\": \"nospace\",\n                \"variable-declaration\": \"nospace\"\n            }\n        ],\n        \"unified-signatures\": true,\n        \"variable-name\": false,\n        \"whitespace\": [true, \"check-branch\", \"check-decl\", \"check-operator\", \"check-separator\", \"check-type\"],\n        \"directive-selector\": [false, \"attribute\", \"app\", \"camelCase\"],\n        \"component-selector\": [false, \"element\", \"app\", \"kebab-case\"],\n        \"no-input-rename\": true,\n        \"no-output-rename\": true,\n        \"use-life-cycle-interface\": true,\n        \"use-pipe-transform-interface\": true,\n        \"component-class-suffix\": true,\n        \"directive-class-suffix\": true,\n        \"no-access-missing-member\": false\n    }\n}\n</code></pre>\n\n<p>and in my package.json</p>\n\n<pre><code>\"typescript\": \"3.4.5\",\n\"codelyzer\": \"^5.1.0\",\n\"tslint\": \"5.17.0\",\n</code></pre>\n\n<p>I also seem to be getting heaps of warnings like</p>\n\n<pre><code>The 'no-arg' rule threw an error in '/angular/src/shared/helpers/FormattedStringValueExtracter.ts':\n</code></pre>\n\n<p>and this is that file</p>\n\n<pre><code>class ExtractionResult {\n    public IsMatch: boolean;\n    public Matches: any[];\n\n    constructor(isMatch: boolean) {\n        this.IsMatch = isMatch;\n        this.Matches = [];\n    }\n}\n\nenum FormatStringTokenType {\n    ConstantText,\n    DynamicValue\n}\n\nclass FormatStringToken {\n    public Text: string;\n\n    public Type: FormatStringTokenType;\n\n    constructor(text: string, type: FormatStringTokenType) {\n        this.Text = text;\n        this.Type = type;\n    }\n}\n\nclass FormatStringTokenizer {\n    Tokenize(format: string, includeBracketsForDynamicValues: boolean = false): FormatStringToken[] {\n        const tokens: FormatStringToken[] = [];\n\n        let currentText = '';\n        let inDynamicValue = false;\n\n        for (let i = 0; i &lt; format.length; i++) {\n            const c = format[i];\n            switch (c) {\n                case '{':\n                    if (inDynamicValue) {\n                        throw new Error(\n                            'Incorrect syntax at char ' + i + '! format string can not contain nested dynamic value expression!'\n                        );\n                    }\n\n                    inDynamicValue = true;\n\n                    if (currentText.length &gt; 0) {\n                        tokens.push(new FormatStringToken(currentText, FormatStringTokenType.ConstantText));\n                        currentText = '';\n                    }\n\n                    break;\n                case '}':\n                    if (!inDynamicValue) {\n                        throw new Error(\n                            'Incorrect syntax at char ' + i + '! These is no opening brackets for the closing bracket }.'\n                        );\n                    }\n\n                    inDynamicValue = false;\n\n                    if (currentText.length &lt;= 0) {\n                        throw new Error('Incorrect syntax at char ' + i + '! Brackets does not containt any chars.');\n                    }\n\n                    let dynamicValue = currentText;\n                    if (includeBracketsForDynamicValues) {\n                        dynamicValue = '{' + dynamicValue + '}';\n                    }\n\n                    tokens.push(new FormatStringToken(dynamicValue, FormatStringTokenType.DynamicValue));\n                    currentText = '';\n\n                    break;\n                default:\n                    currentText += c;\n                    break;\n            }\n        }\n\n        if (inDynamicValue) {\n            throw new Error('There is no closing } char for an opened { char.');\n        }\n\n        if (currentText.length &gt; 0) {\n            tokens.push(new FormatStringToken(currentText, FormatStringTokenType.ConstantText));\n        }\n\n        return tokens;\n    }\n}\n\nexport class FormattedStringValueExtracter {\n    Extract(str: string, format: string): ExtractionResult {\n        if (str === format) {\n            return new ExtractionResult(true);\n        }\n\n        const formatTokens = new FormatStringTokenizer().Tokenize(format);\n        if (!formatTokens) {\n            return new ExtractionResult(str === '');\n        }\n\n        const result = new ExtractionResult(true);\n\n        for (let i = 0; i &lt; formatTokens.length; i++) {\n            const currentToken = formatTokens[i];\n            const previousToken = i &gt; 0 ? formatTokens[i - 1] : null;\n\n            if (currentToken.Type === FormatStringTokenType.ConstantText) {\n                if (i === 0) {\n                    if (str.indexOf(currentToken.Text) !== 0) {\n                        result.IsMatch = false;\n                        return result;\n                    }\n\n                    str = str.substr(currentToken.Text.length, str.length - currentToken.Text.length);\n                } else {\n                    const matchIndex = str.indexOf(currentToken.Text);\n                    if (matchIndex &lt; 0) {\n                        result.IsMatch = false;\n                        return result;\n                    }\n\n                    result.Matches.push({ name: previousToken.Text, value: str.substr(0, matchIndex) });\n                    str = str.substring(0, matchIndex + currentToken.Text.length);\n                }\n            }\n        }\n\n        const lastToken = formatTokens[formatTokens.length - 1];\n        if (lastToken.Type === FormatStringTokenType.DynamicValue) {\n            result.Matches.push({ name: lastToken.Text, value: str });\n        }\n\n        return result;\n    }\n\n    IsMatch(str: string, format: string): string[] {\n        const result = new FormattedStringValueExtracter().Extract(str, format);\n        if (!result.IsMatch) {\n            return [];\n        }\n\n        const values = [];\n        for (let i = 0; i &lt; result.Matches.length; i++) {\n            values.push(result.Matches[i].value);\n        }\n\n        return values;\n    }\n}\n</code></pre>\n\n<p>When I view any of the files that it says it has issues with, there are no warnings or errors... and when I actually but <code>var</code> in a file it no longer gives me any warnings.. in the problem panel in VSCODE</p>\n\n<p>any help would be appreciated!! Seriously can't figure this one out!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'm also seeing errors like </p>\n\n<pre><code>TypeError: Cannot read property 'pos' of undefined\n    at cb (/node_modules/tslint/lib/rules/oneLineRule.js\n\n</code></pre>\n\n<p>like theres something wrong with tslint???</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is my angular version</p>\n\n<pre><code>Angular CLI: 8.1.2\nNode: 10.16.0OS: linux x64\nAngular: 8.1.2\n... animations, cli, common, compiler, compiler-cli, core, forms\n... platform-browser, platform-browser-dynamic, platform-server \n... router, service-worker\n\nPackage                           Version\n-----------------------------------------------------------\n@angular-devkit/architect         0.800.6\n@angular-devkit/build-angular     0.800.6\n@angular-devkit/build-optimizer   0.800.6\n@angular-devkit/build-webpack     0.800.6\n@angular-devkit/core              8.1.2\n@angular-devkit/schematics        7.3.9\n@angular/cdk                      7.3.7\n@angular/http                     7.2.15\n@angular/pwa                      0.12.4\n@ngtools/webpack                  8.0.6\n@schematics/angular               7.2.4\n@schematics/update                0.801.2\nrxjs                              6.5.2\ntypescript                        3.4.5\n</code></pre>\n"}, {"tags": ["typescript", "cucumber", "webdriver-io", "cucumberjs"], "comments": [{"owner": {"reputation": 3808, "user_id": 1458144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWSL8.jpg?s=128&g=1", "display_name": "iamdanchiv", "link": "https://stackoverflow.com/users/1458144/iamdanchiv"}, "edited": false, "score": 0, "creation_date": 1564033449, "post_id": 57192104, "comment_id": 100898720, "body": "Hey there! You get that error cause of the ES6 <code>import</code> statement. It looks like the compiler doesn&#39;t approve of the library version included. I&#39;ll try to draft an answer, but I&#39;d also appreciate if you update the answer with the relevant <code>package.json</code> dependencies (<code>ts-node</code>, all the <code>@types</code>, etc.)."}], "answers": [{"tags": [], "owner": {"reputation": 3808, "user_id": 1458144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWSL8.jpg?s=128&g=1", "display_name": "iamdanchiv", "link": "https://stackoverflow.com/users/1458144/iamdanchiv"}, "is_accepted": false, "score": 2, "last_activity_date": 1564116913, "last_edit_date": 1564116913, "creation_date": 1564035247, "answer_id": 57195419, "question_id": 57192104, "link": "https://stackoverflow.com/questions/57192104/syntaxerror-unexpected-token-error-when-converting-webdriverio-project-to-t/57195419#57195419", "title": "SyntaxError: Unexpected token { - Error when converting WebDriverio project to Typrscript", "body": "<p>To be honest, your <code>tsconfig.json</code> config file look OK, my only concern is with the <code>\"target\"</code> compiler option. </p>\n\n<p><strong><em>Usually,</em></strong> with a <code>\"target\": \"es6\"</code> option, the following list of libraries would be injected: <code>DOM</code>, <code>ES6</code>, <code>DOM.Iterable</code> &amp; <code>ScriptHost</code>. So <code>import</code> should not throw any error since the ES6 module library is included.</p>\n\n<p>I'd try to explicitly suggest the library to the compiler via the <code>\"lib\"</code> <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"nofollow noreferrer\">compiler option</a>.</p>\n\n<p>The following worked for me:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"lib\": [\n        \"dom\",\n        \"es7\" // or es2016, es2017, es2018 ...\n    ],\n    \"target\": \"es5\",\n    \"module\": \"commonjs\",\n    \"moduleResolution\": \"node\",\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"esModuleInterop\": true,\n    \"removeComments\": true,\n    \"noImplicitAny\": false,\n    \"outDir\": \"dist\",\n    \"baseUrl\": \".\",\n    \"paths\": {\n        \"*\": [ \"./*\" ],\n        \"src/*\": [\"./src/*\"]\n    },\n    \"types\": [\"node\", \"@wdio/sync\",\"jest\"]\n  },\n</code></pre>\n\n<p><strong>!Note:</strong> Other library versions include: <code>'ES3'</code> (<em>default</em>), <code>'ES5'</code>, <code>'ES2015'</code>, <code>'ES2016'</code>, <code>'ES2017'</code>,<code>'ES2018'</code>, or <code>'ESNEXT'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1309, "user_id": 1118399, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/832bc8fdc80dcd9f0a267e46bab4c48b?s=128&d=identicon&r=PG", "display_name": "Dev", "link": "https://stackoverflow.com/users/1118399/dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1564670465, "creation_date": 1564670465, "answer_id": 57311534, "question_id": 57192104, "link": "https://stackoverflow.com/questions/57192104/syntaxerror-unexpected-token-error-when-converting-webdriverio-project-to-t/57311534#57311534", "title": "SyntaxError: Unexpected token { - Error when converting WebDriverio project to Typrscript", "body": "<p>I got it working by compiling the Typescript files to Javascript files And then providing the location of Javascript files in the cucumberOpts => require</p>\n"}], "owner": {"reputation": 1309, "user_id": 1118399, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/832bc8fdc80dcd9f0a267e46bab4c48b?s=128&d=identicon&r=PG", "display_name": "Dev", "link": "https://stackoverflow.com/users/1118399/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "accepted_answer_id": 57311534, "answer_count": 2, "score": 1, "last_activity_date": 1564670465, "creation_date": 1564007805, "question_id": 57192104, "link": "https://stackoverflow.com/questions/57192104/syntaxerror-unexpected-token-error-when-converting-webdriverio-project-to-t", "title": "SyntaxError: Unexpected token { - Error when converting WebDriverio project to Typrscript", "body": "<p>I am trying to convert my webdriver.io + cucumber project to Typescript by following <a href=\"https://webdriver.io/docs/typescript.html\" rel=\"nofollow noreferrer\">https://webdriver.io/docs/typescript.html</a> and getting the error message \"Unexpected toke { \".\nI am using WebDriver.io + TypeScript + Cucumber.</p>\n\n<p>In wdio.conf.js, I have the cucumberOpts as below </p>\n\n<pre><code>cucumberOpts: {\n    requireModule: [\n            'tsconfig-paths/register',\n        () =&gt; { require('ts-node').register({files: true}) },\n    ],\n    require: ['./src/step_definitions/*.ts'],\n    backtrace: false,   \n    requireModule: [],\n    dryRun: false,      \n    failFast: false,    \n    format: ['pretty'], \n    colors: true,       \n    snippets: true,     \n    source: true,       \n    profile: [],        \n    strict: false,      \n    tags: [],           \n    timeout: 60000,     \n    ignoreUndefinedDefinitions: false,\n},\n</code></pre>\n\n<p>And my tsconfig.json looks like below </p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es6\",\n    \"module\": \"commonjs\",\n    \"moduleResolution\": \"node\",\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"esModuleInterop\": true,\n    \"removeComments\": true,\n    \"noImplicitAny\": false,\n    \"outDir\": \"dist\",\n    \"baseUrl\": \".\",\n    \"paths\": {\n        \"*\": [ \"./*\" ],\n        \"src/*\": [\"./src/*\"]\n    },\n    \"types\": [\"node\", \"@wdio/sync\",\"jest\"]\n  },\n\n  \"include\": [\n      \"./src/**/*\"\n  ]\n}\n</code></pre>\n\n<p>and my folder structure is as below</p>\n\n<pre><code>src/features/\nsrc/step_definitions\nsrc/pageObjects\n</code></pre>\n\n<p>And my Step definition has below as first statement</p>\n\n<h2>step.ts</h2>\n\n<pre><code>import { Given, When, Then } from \"cucumber\";\n</code></pre>\n\n<p>Package.json</p>\n\n<pre><code>\"scripts\": {\n    \"test\":\"./node_modules/.bin/wdio wdio.conf.js\"\n  },\n</code></pre>\n\n<p>When I run my tests, I am getting the error message \" SyntaxError: Unexpected token {\" on the above first line in my step.ts.</p>\n\n<p>How do I fix this error.</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1564003978, "post_id": 57191526, "comment_id": 100892634, "body": "<code>const MasterDetail = ({MasterComponent, DetailComponent}) =&gt; {</code>? The type for them would be dependent on the component <code>React.FC</code> for a functional component. <code>React.ComponentClass</code>... etc"}, {"owner": {"reputation": 18465, "user_id": 293680, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/yEwH0.jpg?s=128&g=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/293680/naresh"}, "reply_to_user": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1564004769, "post_id": 57191526, "comment_id": 100892843, "body": "Thanks @JohnRuddell. The types is what I was struggling with: whether they should be <code>React.FC</code> or <code>React.ReactNode</code>. Whatever I did, instantiating them in the body was giving me TypeScript errors. But I can try again with <code>React.FC</code>"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1564005236, "post_id": 57191526, "comment_id": 100892981, "body": "Yep! <a href=\"https://codesandbox.io/s/master-detail-framework-opnkd\" rel=\"nofollow noreferrer\"><b>heres your codesandbox updated with the types</b></a>. Let me know if that isn&#39;t what you were looking for"}, {"owner": {"reputation": 18465, "user_id": 293680, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/yEwH0.jpg?s=128&g=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/293680/naresh"}, "reply_to_user": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1564005416, "post_id": 57191526, "comment_id": 100893016, "body": "Thank you!!! Very elegant. Can you please write a short answer and I will mark it as the correct solution?"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1564005542, "post_id": 57191526, "comment_id": 100893046, "body": "Yep sure thing!"}], "answers": [{"comments": [{"owner": {"reputation": 18465, "user_id": 293680, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/yEwH0.jpg?s=128&g=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/293680/naresh"}, "edited": false, "score": 0, "creation_date": 1564006316, "post_id": 57191824, "comment_id": 100893266, "body": "Thank you! Works like a charm."}], "tags": [], "owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "is_accepted": true, "score": 1, "last_activity_date": 1564005804, "creation_date": 1564005804, "answer_id": 57191824, "question_id": 57191526, "link": "https://stackoverflow.com/questions/57191526/generic-master-detail-component-in-typescript-react/57191824#57191824", "title": "Generic master-detail component in TypeScript &amp; React", "body": "<p>If you want to make the <code>Master</code> and <code>Detail</code> components variable / dynamic then make them a prop that you can pass, so its more generic</p>\n\n<p>usage would be <code>&lt;MasterDetail MasterComponent={Master} DetailComponent={Detail} /&gt;</code> </p>\n\n<p>Now, defining your types.. you have to be specific / make sure the types match up.</p>\n\n<pre><code>interface Props {\n  DetailComponent: React.FC&lt;DetailProps&gt;;\n  MasterComponent: React.FC&lt;MasterProps&gt;;\n}\n\nexport const MasterDetail: React.FC&lt;Props&gt; = ({ DetailComponent, MasterComponent }) =&gt; {\n  const [itemId, setItemId] = React.useState(\"\");\n  const handleClick = (itemId: string) =&gt; {\n    setItemId(itemId);\n  };\n\n  return (\n    &lt;div className=\"d-flex p-2\"&gt;\n      &lt;div className=\"lhs\"&gt;\n        &lt;MasterComponent onClick={handleClick} /&gt;\n      &lt;/div&gt;\n      &lt;div className=\"flex-fill\"&gt;\n        &lt;DetailComponent itemId={itemId} /&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>\n\n<p>Remember to define the different instances of your <code>Detail</code> component this way <code>export const Detail: React.FC&lt;DetailProps&gt; = ({ itemId }) =&gt; {</code> and you should be good</p>\n"}], "owner": {"reputation": 18465, "user_id": 293680, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/yEwH0.jpg?s=128&g=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/293680/naresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 57191824, "answer_count": 1, "score": 1, "last_activity_date": 1564005804, "creation_date": 1564003857, "question_id": 57191526, "link": "https://stackoverflow.com/questions/57191526/generic-master-detail-component-in-typescript-react", "title": "Generic master-detail component in TypeScript &amp; React", "body": "<p>I am trying to create a generic master-detail component in TypeScript and React. The parent component should be responsible for the coordination between the master component and the detail component, i.e. pass the id of the item selected in the master to the detail. However, the master and detail components should not be hard-coded in the parent. This allows me to use the parent <code>MasterDetail</code> for different kind of entities. In summary, I would like to pass master and detail components as props, preferably as children.</p>\n\n<p>Just for illustration, here's my hard-coded implementation (you can find a working version on <a href=\"https://codesandbox.io/s/master-detail-framework-lkvxb\" rel=\"nofollow noreferrer\">CodeSandbox</a>):</p>\n\n<pre><code>const MasterDetail = () =&gt; {\n  const [itemId, setItemId] = React.useState(\"\");\n\n  const handleClick = (itemId: string) =&gt; {\n    setItemId(itemId);\n  };\n\n  return (\n    &lt;div className=\"d-flex p-2\"&gt;\n      &lt;div className=\"lhs\"&gt;\n        &lt;Master onClick={handleClick} /&gt;\n      &lt;/div&gt;\n      &lt;div className=\"flex-fill\"&gt;\n        &lt;Detail itemId={itemId} /&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>\n\n<p>As you can see, <code>Master</code> and <code>Detail</code> are hard-coded in this component. How do I pass them in as props in a TypeScript friendly manner?</p>\n\n<p>I have mostly seen implementations using \"Render Props\", but that pattern seems to allow for only one child. Are there any patterns to extend this to multiple children?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 2770, "user_id": 4123372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554c51966d0ad0646b8d62f8d25dccd3?s=128&d=identicon&r=PG&f=1", "display_name": "Train", "link": "https://stackoverflow.com/users/4123372/train"}, "edited": false, "score": 0, "creation_date": 1564003529, "post_id": 57191425, "comment_id": 100892481, "body": "<code>&lt;div *ngIf=&quot;condition&quot;&gt;&lt;&#47;div&gt;</code> empty div"}, {"owner": {"reputation": 4679, "user_id": 264950, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6547dde625b0276765c68a7d6d1e4574?s=128&d=identicon&r=PG", "display_name": "sasori", "link": "https://stackoverflow.com/users/264950/sasori"}, "reply_to_user": {"reputation": 2770, "user_id": 4123372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554c51966d0ad0646b8d62f8d25dccd3?s=128&d=identicon&r=PG&f=1", "display_name": "Train", "link": "https://stackoverflow.com/users/4123372/train"}, "edited": false, "score": 0, "creation_date": 1564003669, "post_id": 57191425, "comment_id": 100892523, "body": "my div content is randomly generated. I want to clear the div content itself via the component and not through the html template"}, {"owner": {"reputation": 788, "user_id": 1088237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526982b2bdf61eccd6d5de69f566580?s=128&d=identicon&r=PG", "display_name": "JayArby", "link": "https://stackoverflow.com/users/1088237/jayarby"}, "reply_to_user": {"reputation": 2770, "user_id": 4123372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554c51966d0ad0646b8d62f8d25dccd3?s=128&d=identicon&r=PG&f=1", "display_name": "Train", "link": "https://stackoverflow.com/users/4123372/train"}, "edited": false, "score": 2, "creation_date": 1564004002, "post_id": 57191425, "comment_id": 100892646, "body": "In angular it&#39;s usually easiest to update some variable and have the template respond. In niche situations it&#39;s possible to pull of what you are trying to do (i.e., programmatically changing the contents of a component) but it&#39;s rarely useful or worth the effort. I would take @Train&#39;s advice if I were you. There&#39;s probably a way to do it."}, {"owner": {"reputation": 788, "user_id": 1088237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526982b2bdf61eccd6d5de69f566580?s=128&d=identicon&r=PG", "display_name": "JayArby", "link": "https://stackoverflow.com/users/1088237/jayarby"}, "edited": false, "score": 0, "creation_date": 1564004111, "post_id": 57191425, "comment_id": 100892675, "body": "Also Angular uses a virtual DOM and besides innerHTML returns a string, so what you are doing here would never work anyway."}], "answers": [{"comments": [{"owner": {"reputation": 4679, "user_id": 264950, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6547dde625b0276765c68a7d6d1e4574?s=128&d=identicon&r=PG", "display_name": "sasori", "link": "https://stackoverflow.com/users/264950/sasori"}, "edited": false, "score": 0, "creation_date": 1564005239, "post_id": 57191683, "comment_id": 100892984, "body": "core.js:15724 ERROR TypeError: Cannot set property &#39;innerHTML&#39; of null"}, {"owner": {"reputation": 108, "user_id": 9648878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6a288b7ae2aa5736c1cf59c0a5fd5b?s=128&d=identicon&r=PG&f=1", "display_name": "Rokas Rudgalvis", "link": "https://stackoverflow.com/users/9648878/rokas-rudgalvis"}, "reply_to_user": {"reputation": 4679, "user_id": 264950, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6547dde625b0276765c68a7d6d1e4574?s=128&d=identicon&r=PG", "display_name": "sasori", "link": "https://stackoverflow.com/users/264950/sasori"}, "edited": false, "score": 0, "creation_date": 1564006004, "post_id": 57191683, "comment_id": 100893170, "body": "It seems it could not find your element. Console log out what document.querySelector(&#39;div#graphDiv&#39;) returns and try to fix the query to find the element"}], "tags": [], "owner": {"reputation": 108, "user_id": 9648878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6a288b7ae2aa5736c1cf59c0a5fd5b?s=128&d=identicon&r=PG&f=1", "display_name": "Rokas Rudgalvis", "link": "https://stackoverflow.com/users/9648878/rokas-rudgalvis"}, "is_accepted": false, "score": 0, "last_activity_date": 1564004901, "creation_date": 1564004901, "answer_id": 57191683, "question_id": 57191425, "link": "https://stackoverflow.com/questions/57191425/how-to-clear-div-contents-in-angular-angular-7/57191683#57191683", "title": "how to clear div contents in Angular ? (angular 7)", "body": "<p>You could do it like this:</p>\n\n<pre><code> document.querySelector('div#graphDiv').innerHTML = \"\";\n</code></pre>\n\n<p>(though approaches pointed out in comments would be better)</p>\n"}], "owner": {"reputation": 4679, "user_id": 264950, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6547dde625b0276765c68a7d6d1e4574?s=128&d=identicon&r=PG", "display_name": "sasori", "link": "https://stackoverflow.com/users/264950/sasori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2506, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564004901, "creation_date": 1564003317, "last_edit_date": 1564003729, "question_id": 57191425, "link": "https://stackoverflow.com/questions/57191425/how-to-clear-div-contents-in-angular-angular-7", "title": "how to clear div contents in Angular ? (angular 7)", "body": "<p>I have tried</p>\n\n<pre><code>    let graphDiv = document.querySelector('div#graphDiv').innerHTML;\n    graphDiv.clear();\n\nor\n\n   graphDiv.destroy();\n</code></pre>\n\n<p>didn't find answer in google search.\nmy div content is randomly generated (hence I was using Math.random() to pre-fill a graph ). I want to clear the div content itself via the component and not through the html template.</p>\n"}, {"tags": ["node.js", "typescript"], "comments": [{"owner": {"reputation": 5738, "user_id": 7496073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ad17da5f307d0462eff39880d8f105b?s=128&d=identicon&r=PG&f=1", "display_name": "John Montgomery", "link": "https://stackoverflow.com/users/7496073/john-montgomery"}, "edited": false, "score": 0, "creation_date": 1564002162, "post_id": 57191148, "comment_id": 100892040, "body": "It&#39;s not a TS error, it&#39;s a JS syntax error, so you can&#39;t ignore it."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1564002168, "post_id": 57191148, "comment_id": 100892042, "body": "Are you sure this is a valid js identifier? If so I&#39;d report a bug. I remember a recent bug about strange characters in variables"}, {"owner": {"reputation": 6038, "user_id": 468384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvYpQ.jpg?s=128&g=1", "display_name": "Bill Software Engineer", "link": "https://stackoverflow.com/users/468384/bill-software-engineer"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1564002396, "post_id": 57191148, "comment_id": 100892114, "body": "@TitianCernicova-Dragomir Yes, this is valid Javascript name, I am not getting a Javascript error, I am getting a Typescript error."}, {"owner": {"reputation": 6038, "user_id": 468384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvYpQ.jpg?s=128&g=1", "display_name": "Bill Software Engineer", "link": "https://stackoverflow.com/users/468384/bill-software-engineer"}, "reply_to_user": {"reputation": 5738, "user_id": 7496073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ad17da5f307d0462eff39880d8f105b?s=128&d=identicon&r=PG&f=1", "display_name": "John Montgomery", "link": "https://stackoverflow.com/users/7496073/john-montgomery"}, "edited": false, "score": 0, "creation_date": 1564002444, "post_id": 57191148, "comment_id": 100892129, "body": "@JohnMontgomery Yes, Unicode are valid Javascript name"}, {"owner": {"reputation": 5738, "user_id": 7496073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ad17da5f307d0462eff39880d8f105b?s=128&d=identicon&r=PG&f=1", "display_name": "John Montgomery", "link": "https://stackoverflow.com/users/7496073/john-montgomery"}, "edited": false, "score": 1, "creation_date": 1564002470, "post_id": 57191148, "comment_id": 100892141, "body": "@Bill I just tried it right now and got &quot;SyntaxError: illegal character&quot;"}, {"owner": {"reputation": 6038, "user_id": 468384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvYpQ.jpg?s=128&g=1", "display_name": "Bill Software Engineer", "link": "https://stackoverflow.com/users/468384/bill-software-engineer"}, "reply_to_user": {"reputation": 5738, "user_id": 7496073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ad17da5f307d0462eff39880d8f105b?s=128&d=identicon&r=PG&f=1", "display_name": "John Montgomery", "link": "https://stackoverflow.com/users/7496073/john-montgomery"}, "edited": false, "score": 0, "creation_date": 1564002721, "post_id": 57191148, "comment_id": 100892224, "body": "@JohnMontgomery Alright, I guess not all unicode are valid."}, {"owner": {"reputation": 1565, "user_id": 5093377, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9O8p.jpg?s=128&g=1", "display_name": "Milan Velebit", "link": "https://stackoverflow.com/users/5093377/milan-velebit"}, "edited": false, "score": 0, "creation_date": 1564002802, "post_id": 57191148, "comment_id": 100892250, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7451524/why-arent-%dc%ab-and-valid-javascript-variable-names\">Why aren&#39;t \u25ce\u072b\u25ce and \u263a valid JavaScript variable names?</a>. They go into great detail there."}, {"owner": {"reputation": 6038, "user_id": 468384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvYpQ.jpg?s=128&g=1", "display_name": "Bill Software Engineer", "link": "https://stackoverflow.com/users/468384/bill-software-engineer"}, "reply_to_user": {"reputation": 1565, "user_id": 5093377, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9O8p.jpg?s=128&g=1", "display_name": "Milan Velebit", "link": "https://stackoverflow.com/users/5093377/milan-velebit"}, "edited": false, "score": 0, "creation_date": 1564004954, "post_id": 57191148, "comment_id": 100892894, "body": "@MilanVelebit Good duplicate, didn&#39;t see that one before"}], "answers": [{"comments": [{"owner": {"reputation": 6038, "user_id": 468384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvYpQ.jpg?s=128&g=1", "display_name": "Bill Software Engineer", "link": "https://stackoverflow.com/users/468384/bill-software-engineer"}, "edited": false, "score": 0, "creation_date": 1564002829, "post_id": 57191302, "comment_id": 100892257, "body": "I believe you, I will use that website"}], "tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": true, "score": 1, "last_activity_date": 1564002621, "creation_date": 1564002621, "answer_id": 57191302, "question_id": 57191148, "link": "https://stackoverflow.com/questions/57191148/typescript-doesnt-like-my-variable-name-and-i-cant-suppress-the-error/57191302#57191302", "title": "Typescript doesn&#39;t like my variable name &quot;\u26c4&quot; and I can&#39;t suppress the error", "body": "<p>According to the <a href=\"https://mothereff.in/js-variables\" rel=\"nofollow noreferrer\">JavaScript variable name validator</a> it's an invalid identifier:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HwsyZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HwsyZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you still think it should be valid, then maybe a defect report is the next step.</p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 7516783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O3ESK.jpg?s=128&g=1", "display_name": "kess", "link": "https://stackoverflow.com/users/7516783/kess"}, "is_accepted": false, "score": 1, "last_activity_date": 1564002655, "creation_date": 1564002655, "answer_id": 57191312, "question_id": 57191148, "link": "https://stackoverflow.com/questions/57191148/typescript-doesnt-like-my-variable-name-and-i-cant-suppress-the-error/57191312#57191312", "title": "Typescript doesn&#39;t like my variable name &quot;\u26c4&quot; and I can&#39;t suppress the error", "body": "<p>\"That\u2019s an invalid identifier according to ECMAScript 6 / Unicode 8.0.0.\"</p>\n\n<p>You are getting a javascript error, not a typescript one.</p>\n\n<p>Also.. <em>I don't think naming variables with emojis is good coding practice.</em></p>\n\n<p><a href=\"https://mothereff.in/js-variables#%E2%9B%84\" rel=\"nofollow noreferrer\">https://mothereff.in/js-variables#%E2%9B%84</a></p>\n"}], "owner": {"reputation": 6038, "user_id": 468384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvYpQ.jpg?s=128&g=1", "display_name": "Bill Software Engineer", "link": "https://stackoverflow.com/users/468384/bill-software-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "closed_date": 1564006969, "accepted_answer_id": 57191302, "answer_count": 2, "score": 3, "last_activity_date": 1564002969, "creation_date": 1564001899, "last_edit_date": 1564002969, "question_id": 57191148, "link": "https://stackoverflow.com/questions/57191148/typescript-doesnt-like-my-variable-name-and-i-cant-suppress-the-error", "closed_reason": "Duplicate", "title": "Typescript doesn&#39;t like my variable name &quot;\u26c4&quot; and I can&#39;t suppress the error", "body": "<p>I am trying to write a server and I keeping typescript error that I cannot supress:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zpXUe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zpXUe.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see I already try to use ts-ignore but it does not supress the error, what am I doing wrong?</p>\n\n<p><a href=\"https://i.stack.imgur.com/I3pwf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I3pwf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my code:</p>\n\n<pre><code>// @ts-ignore\nconst \u26c4 = (fn) =&gt; {\n  return (req, res, next) =&gt; {\n    return fn(req, res, next).catch((err) =&gt; {\n      return next(err);\n    });\n  };\n};\n</code></pre>\n\n<p>EDIT:  Yes, this Unicode is valid Javascript variable name:\nEDIT 2:  Apparently \u26c4 is not valid, alrighty then.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "edited": false, "score": 0, "creation_date": 1564001934, "post_id": 57191068, "comment_id": 100891955, "body": "Are you trying to create an object from a JSON file structure, some other input, etc. and are you needing an generic object as output, or are you trying to do something more specific with it?"}, {"owner": {"reputation": 1675, "user_id": 5278172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jTAWbrXhfEc/AAAAAAAAAAI/AAAAAAAANIg/GIP3ITSgasc/photo.jpg?sz=128", "display_name": "Rohit Jain", "link": "https://stackoverflow.com/users/5278172/rohit-jain"}, "reply_to_user": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "edited": false, "score": 0, "creation_date": 1564002114, "post_id": 57191068, "comment_id": 100892020, "body": "trying to create an object from JSON object structure."}, {"owner": {"reputation": 13146, "user_id": 243192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UmXVb.png?s=128&g=1", "display_name": "Rengers", "link": "https://stackoverflow.com/users/243192/rengers"}, "edited": false, "score": 0, "creation_date": 1564003285, "post_id": 57191068, "comment_id": 100892404, "body": "What have you tried so far? What problems did you run into?"}, {"owner": {"reputation": 1675, "user_id": 5278172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jTAWbrXhfEc/AAAAAAAAAAI/AAAAAAAANIg/GIP3ITSgasc/photo.jpg?sz=128", "display_name": "Rohit Jain", "link": "https://stackoverflow.com/users/5278172/rohit-jain"}, "edited": false, "score": 0, "creation_date": 1564003715, "post_id": 57191068, "comment_id": 100892536, "body": "I have an string array like this [&quot;A1&quot;, &#39;A1#B1&#39;,&quot;A1#B1:C1&quot;], Wanted to create node tree without recursion. I am able to create tree with the help of <a href=\"https://stackoverflow.com/questions/51661889/array-of-strings-to-tree-data-structure/51662337#51662337\" title=\"array of strings to tree data structure\">stackoverflow.com/questions/51661889/&hellip;</a> post."}], "answers": [{"tags": [], "owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "is_accepted": false, "score": 1, "last_activity_date": 1564013734, "last_edit_date": 1564013734, "creation_date": 1564006126, "answer_id": 57191880, "question_id": 57191068, "link": "https://stackoverflow.com/questions/57191068/create-node-structure-from-tree-structure/57191880#57191880", "title": "Create Node Structure From Tree Structure", "body": "<p>You can define a recursive function using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\" rel=\"nofollow noreferrer\"><code>Object.entries()</code></a> to map over the key-value pairs of each sub-structure in your tree:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const myTree = {\r\n  A1: {\r\n    B1: {\r\n      C1: {},\r\n      C2: {}\r\n    },\r\n    B2: {\r\n      C2: {}\r\n    }\r\n  },\r\n  A2: {}\r\n};\r\n\r\nfunction treeToNode (tree) {\r\n  return Object.entries(tree).map(\r\n    ([key, value]) =&gt; ({\r\n      name: key,\r\n      child: treeToNode(value)\r\n    })\r\n  );\r\n}\r\n\r\nconsole.log(treeToNode(myTree));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Based on <a href=\"https://stackoverflow.com/q/51661889/1541563\">your previous question</a>, if you wanted to skip the intermediate step of generating a tree, you could convert the array of delimited strings directly to a node, using a helper class that extends <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\" rel=\"nofollow noreferrer\"><code>Map</code></a>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const myHierarchy = [\r\n  'house.bedroom.bed',\r\n  'house.kitchen.spoon',\r\n  'house.kitchen.knife',\r\n  'house.bedroom.sofa',\r\n  'house.bedroom.tv',\r\n  'neighbor.house',\r\n  'plants.trees',\r\n  'house.birds.parrot.grey'\r\n];\r\n\r\nclass NodeMap extends Map {\r\n  static fromHierarchy (hierarchy) {\r\n    return hierarchy.reduce(\r\n      (node, id) =&gt; (\r\n        id.split('.').reduce(\r\n          (node, key) =&gt; node.add(key),\r\n          node\r\n        ),\r\n        node\r\n      ),\r\n      new NodeMap()\r\n    );\r\n  }\r\n\r\n  add (key) {\r\n    const value = this.get(key) || new NodeMap();\r\n    this.set(key, value);\r\n    return value;\r\n  }\r\n\r\n  search (id) {\r\n    return Array.from(this).flatMap(\r\n      ([key, value]) =&gt; [\r\n        ...(key === id ? [key] : []),\r\n        ...value.search(id).map(\r\n          rest =&gt; [key, rest].join('.')\r\n        )\r\n      ]\r\n    );\r\n  }\r\n\r\n  toJSON () {\r\n    return Array.from(this).map(\r\n      ([key, value]) =&gt; ({\r\n        name: key,\r\n        child: value\r\n      })\r\n    );\r\n  }\r\n}\r\n\r\nconst myNode = NodeMap.fromHierarchy(myHierarchy);\r\n\r\nconsole.log(myNode.search('knife'));\r\nconsole.log(myNode.search('birds'));\r\nconsole.log(myNode.search('house'));\r\nconsole.log(myNode.search('flowers'));\r\nconsole.log(myNode);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><code>search()</code> returns an array of results in case there are multiple matches, such as <code>house</code> in the example.</p>\n"}], "owner": {"reputation": 1675, "user_id": 5278172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jTAWbrXhfEc/AAAAAAAAAAI/AAAAAAAANIg/GIP3ITSgasc/photo.jpg?sz=128", "display_name": "Rohit Jain", "link": "https://stackoverflow.com/users/5278172/rohit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1564013734, "creation_date": 1564001525, "last_edit_date": 1564005771, "question_id": 57191068, "link": "https://stackoverflow.com/questions/57191068/create-node-structure-from-tree-structure", "title": "Create Node Structure From Tree Structure", "body": "<p>I currently have a structure like this </p>\n\n<pre><code>{\n\n    \"A1\": {\n        \"B1\": {\n            \"C1\": {},\n            \"C2\": {}\n        },\n        \"B2\": {\n            \"C2\": {}\n        }\n    },\n    \"A2\": {}\n}\n</code></pre>\n\n<p>And I want something like this</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>[\n\n {\n   name: A1,\n   child:[ {\n            name: B1,\n            child:[\n                    {\n                        name: C1,\n                        child:[]\n                    },\n                    {\n                        name: C2,\n                        child:[]\n                    }\n                ]\n            },\n            {\n            name: B2,\n            child:[\n                    {\n                        name: C1,\n                        child:[]\n                    },\n                    {\n                        name: C2,\n                        child:[]\n                    }\n                ]\n            }\n        ]\n },\n {\n   name: A1,\n   child:[] \n }\n]\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "generics", "typing"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9137242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d30dc64fbba83955b7c0196d969eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Herv&#233;", "link": "https://stackoverflow.com/users/9137242/herv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1563999881, "post_id": 57190632, "comment_id": 100891213, "body": "Hmmm i see, isn&#39;t there a way to make sure that my variable <code>item</code> is either of type <code>Hero</code> or <code>Item</code> depending on <code>&lt;T&gt;</code> ? because to me tha&#39;ts what <code>item: T</code> means but i must be wrong"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 31, "user_id": 9137242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d30dc64fbba83955b7c0196d969eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Herv&#233;", "link": "https://stackoverflow.com/users/9137242/herv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1564000285, "post_id": 57190632, "comment_id": 100891351, "body": "@Herv&#233; you could go with overloads .. I&#39;ll add a version"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 31, "user_id": 9137242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d30dc64fbba83955b7c0196d969eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Herv&#233;", "link": "https://stackoverflow.com/users/9137242/herv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1564000451, "post_id": 57190632, "comment_id": 100891412, "body": "@Herv&#233; added the version"}, {"owner": {"reputation": 31, "user_id": 9137242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d30dc64fbba83955b7c0196d969eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Herv&#233;", "link": "https://stackoverflow.com/users/9137242/herv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1564000949, "post_id": 57190632, "comment_id": 100891608, "body": "Thanks a lot ! The pattern is not good at all but it was a question purely about generics. I would split with into two methods if this code had to go to production ;)"}, {"owner": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 0, "creation_date": 1564008785, "post_id": 57190632, "comment_id": 100893862, "body": "You could make the constraint <code>T extends (Hero | Item)</code> or extract a common <code>INamed</code> interface from both and use that in the constraint."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 1, "last_activity_date": 1564000441, "last_edit_date": 1564000441, "creation_date": 1563999391, "answer_id": 57190632, "question_id": 57190541, "link": "https://stackoverflow.com/questions/57190541/generics-error-variable-name-does-not-exist-on-type-t/57190632#57190632", "title": "Generics error, variable name does not exist on type T", "body": "<p>If you want to be able to access properties of <code>T</code> you will need to add a constraint. A constraint ensures that any argument passed in meets the constraint requirements. </p>\n\n<pre><code>export const getContent = async &lt;T extends { name : string }&gt;(genre: string): Promise&lt;T[]&gt; =&gt; {\n  const res = await fetch(`${apiEndpoint}${genre}`)\n  const response = await res.json()\n  const defaultContent = response.result[category]\n  const contentWithImage = defaultContent.map((item: T) =&gt; {\n    const contentImageUrl = `${imgURL}${item.name.replace('__', '')}.png`\n\n    return { ...item,  avatar: contentImageUrl }\n  })\n  return contentWithImage\n}\n</code></pre>\n\n<p>Having generic type parameters that must be specified explicitly is usually not recommended. If you just have these two options, overloads might be a better choice:</p>\n\n<pre><code>\nasync function getContent (genre: \"heroes\"): Promise&lt;Hero[]&gt;\nasync function getContent (genre: \"items\"): Promise&lt;Item[]&gt; \nasync function getContent (genre: string): Promise&lt;(Item | Hero)[]&gt;{\n  const res = await fetch(`${apiEndpoint}${genre}`)\n  const response = await res.json()\n  const defaultContent = response.result[category]\n  const contentWithImage = defaultContent.map((item: Item | Hero) =&gt; {\n    const contentImageUrl = `${imgURL}${item.name.replace('__', '')}.png`\n\n    return { ...item,  avatar: contentImageUrl }\n  })\n  return contentWithImage\n}\n\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9137242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d30dc64fbba83955b7c0196d969eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Herv&#233;", "link": "https://stackoverflow.com/users/9137242/herv%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564000441, "creation_date": 1563998933, "last_edit_date": 1563999466, "question_id": 57190541, "link": "https://stackoverflow.com/questions/57190541/generics-error-variable-name-does-not-exist-on-type-t", "title": "Generics error, variable name does not exist on type T", "body": "<p>i have a problem with typescript generics. here is the code :</p>\n\n<p>interface : </p>\n\n<pre><code>export interface Hero {\n  id: number\n  name: string\n  localized_name: string\n  avatar: string\n}\n\nexport interface Item {\n  id: number\n  name: string\n  cost: number\n  secret_shop: boolean\n  side_shop: boolean\n  recipe: boolean\n  localized_name: string\n  avatar: string\n}\n</code></pre>\n\n<p>the function itself</p>\n\n<pre><code>export const getContent = async &lt;T&gt;(genre: string): Promise&lt;T[]&gt; =&gt; {\n  const res = await fetch(`${apiEndpoint}${genre})\n  const response = await res.json()\n  const defaultContent = response.result[category]\n  const contentWithImage = defaultContent.map((item: T) =&gt; {\n    const contentImageUrl = `${imgURL}${item.name.replace('__', '')}.png`\n\n    return { ...item,  avatar: contentImageUrl }\n  })\n  return contentWithImage\n}\n</code></pre>\n\n<p>called this way : </p>\n\n<pre><code>const heroes = await getContent&lt;Hero&gt;('heroes')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>const items = await getContent&lt;Hero&gt;('items')\n</code></pre>\n\n<p>i get a name is undefined on type  (on item within map) and i really don't get it</p>\n\n<p>if you have any hints,\nthanks</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic-framework", "ionic4"], "comments": [{"owner": {"reputation": 109, "user_id": 8752435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d452080faa01fc16fb4c704d8729ea?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8752435/sagar"}, "edited": false, "score": 0, "creation_date": 1590406281, "post_id": 57190506, "comment_id": 109658712, "body": "Please specify your actual error"}], "owner": {"reputation": 11, "user_id": 6797995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2624b977dbf41883dfee62df2389342e?s=128&d=identicon&r=PG&f=1", "display_name": "STHGM", "link": "https://stackoverflow.com/users/6797995/sthgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563998773, "creation_date": 1563998773, "question_id": 57190506, "link": "https://stackoverflow.com/questions/57190506/ion-datetime-wont-update-view-value-after-change-in-controller", "title": "Ion-datetime won&#39;t update view value after change in controller", "body": "<p>I'm trying to validate two dates, initial and final. So if the initial date is after the final, then the initial should take the final value and so on. The model and view are correctly updated with some workarounds.</p>\n\n<p>Let's say I try to change the initial date again, the picker starts selection on the last value picked, which was the initial date being after the final, instead of the current value in model.</p>\n\n<pre><code>&lt;p class=\"data\" text-left (click)=\"initialDatePicker.open()\"&gt;{{initialDateView}}\n  &lt;ion-datetime #initialDatePicker [displayFormat]=\"configIonDateTime.displayFormat\"\n    [cancelText]=\"configIonDateTime.cancelText\" [(ngModel)]=\"initialDate\" [value]=\"initialDate\"\n    [min]=\"configIonDateTime.dateToday\" [doneText]=\"configIonDateTime.doneText\" picker-format=\"DD MMMM YYYY\"\n    [monthNames]=\"configIonDateTime.monthNames\" [monthShortNames]=\"configIonDateTime.monthShortNames\"\n    [dayNames]=\"configIonDateTime.dayNames\" [dayShortNames]=\"configIonDateTime.dayShortNames\"\n    (ionChange)=\"changeDates(1)\" [hidden]=\"true\"&gt;\n  &lt;/ion-datetime&gt;\n&lt;/p&gt;\n</code></pre>\n\n<pre><code>changeDates(option) {\n\n  switch (option) {\n\n    case 1:\n      if (moment(this.initialDate).isAfter(moment(this.dataValidade))) {\n        this.initialDate = this.finalDate;\n        this.initialDateView = moment(this.initialDate).format('L');\n        this.getInitialDat.emit(this.initialDate);\n        return;\n      }\n      this.initialDateView = moment(this.initialDate).format('L');\n      this.getInitialDate.emit(this.initialDate);\n      break;\n\n    case 2:\n      if (moment(this.finalDate).isBefore(moment(this.initialDate))) {\n        this.finalDate = this.initialDate;\n        this.finalDateView = moment(this.finalDate).format('L');\n        this.getDataValidade.emit(this.finalDate);\n        return;\n      }\n      this.finalDateView = moment(this.finalDate).format('L');\n      this.getFinalDate.emit(this.finalDate);\n      break;\n\n  }\n\n}\n</code></pre>\n\n<p>I need the values on the picker to update correctly according to the model</p>\n"}, {"tags": ["angular", "typescript", "firebase", "google-cloud-firestore", "progressive-web-apps"], "comments": [{"owner": {"reputation": 492, "user_id": 10408246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PPBqm.jpg?s=128&g=1", "display_name": "Vash72", "link": "https://stackoverflow.com/users/10408246/vash72"}, "edited": false, "score": 1, "creation_date": 1563998604, "post_id": 57190413, "comment_id": 100890708, "body": "w/ firebase: just use a table with a record (like verion) and subscribe to his datachanges, so you use this as trigger to refresh the client."}, {"owner": {"reputation": 268, "user_id": 7612669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l4S8C.png?s=128&g=1", "display_name": "Nadim", "link": "https://stackoverflow.com/users/7612669/nadim"}, "reply_to_user": {"reputation": 492, "user_id": 10408246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PPBqm.jpg?s=128&g=1", "display_name": "Vash72", "link": "https://stackoverflow.com/users/10408246/vash72"}, "edited": false, "score": 0, "creation_date": 1563999766, "post_id": 57190413, "comment_id": 100891171, "body": "Great idea i think about it but how to make it work! how to change the (version) each time i deploy a new one ?"}, {"owner": {"reputation": 1087, "user_id": 6310260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m1hmG.jpg?s=128&g=1", "display_name": "Mises", "link": "https://stackoverflow.com/users/6310260/mises"}, "edited": false, "score": 1, "creation_date": 1564000745, "post_id": 57190413, "comment_id": 100891527, "body": "Never works with service workers on Angular but about firebase if you want to ret rave real time data from firestore you need to call: <code>this.database.doc(&quot;pathToFile&quot;).valueChanges()</code> or <code>.snapshotChanges()</code> not <code>.get()</code>. Just think this could be a problem."}, {"owner": {"reputation": 268, "user_id": 7612669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l4S8C.png?s=128&g=1", "display_name": "Nadim", "link": "https://stackoverflow.com/users/7612669/nadim"}, "edited": false, "score": 0, "creation_date": 1564024627, "post_id": 57190413, "comment_id": 100896473, "body": "it&#39;s not about how to read or write data with firebase firestore or listen to any new value or changes, the problem is how i will store data when i deploy."}], "answers": [{"tags": [], "owner": {"reputation": 268, "user_id": 7612669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l4S8C.png?s=128&g=1", "display_name": "Nadim", "link": "https://stackoverflow.com/users/7612669/nadim"}, "is_accepted": false, "score": 0, "last_activity_date": 1564076210, "last_edit_date": 1564076210, "creation_date": 1564070255, "answer_id": 57206039, "question_id": 57190413, "link": "https://stackoverflow.com/questions/57190413/need-to-refresh-the-page-each-time-i-deploy-a-new-changes/57206039#57206039", "title": "Need to refresh the page each time i deploy a new changes", "body": "<p>I figured it out, based on the answer of @Mises and @Vash72 i create a service called\n<strong>log-update.service.ts</strong> i add in this service three fun : <br></p>\n\n<blockquote>\n  <p><strong>isAvailable()</strong></p>\n  \n  <p><strong>newVersion()</strong></p>\n  \n  <p><strong>sameVersion()</strong></p>\n</blockquote>\n\n<p>Then i add in my dashboard a button that change the state of the field <strong>isAvailable</strong> in firestore database to TRUE and then i call isAvailable function in <strong>main.ts</strong> in the <strong>ngOnInit()</strong> fun and whenever the <strong>isAvailable</strong> field in firestore change to <strong>TRUE</strong> i refresh the page for the client and i set back the field to <strong>FALSE</strong></p>\n\n<p><strong>log-update.service.ts</strong> :</p>\n\n<pre><code>export class LogUpdateService {\n  updateCollection: AngularFirestoreCollection&lt;Update&gt;;\n\n  constructor(private afs: AngularFirestore) {\n\n  }\n\n  isAvailable() {\n    return this.afs.collection('update').doc('available');\n  }\n\n  newVersion() {\n    const newversion: AngularFirestoreDocument&lt;any&gt; = this.afs.doc(`update/available`);\n    newversion.update({isAvailable: true}).then(res =&gt; {\n      console.log('Set new version to true');\n    }).catch(err =&gt; {\n      console.log(err);\n    });\n  }\n\n  sameVersion() {\n    const newversion: AngularFirestoreDocument&lt;any&gt; = this.afs.doc(`update/available`);\n    newversion.update({isAvailable: false}).then(res =&gt; {\n      location.reload();\n    });\n  }\n\n}\n</code></pre>\n\n<p><strong>update.ts</strong>:</p>\n\n<pre><code>export interface Update {\n  isAvailable: boolean;\n}\n</code></pre>\n\n<p><strong>main.ts</strong>:</p>\n\n<pre><code>this.logUpdateService.isAvailable().valueChanges().forEach(res =&gt; {\n      // @ts-ignore\n      if (res.isAvailable) {\n        console.log('refresh');\n        this.logUpdateService.sameVersion();\n      } else {\n        console.log('No update.');\n      }\n    });\n</code></pre>\n\n<p><strong>EDIT:</strong>\nBut there is a problem, if someone close the website and enter again he will find the same things because of the cache and also if some one open the website but the website tab is not active nothing happen too.</p>\n"}, {"tags": [], "owner": {"reputation": 2849, "user_id": 6744400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yGHSO.jpg?s=128&g=1", "display_name": "Ali SabziNezhad", "link": "https://stackoverflow.com/users/6744400/ali-sabzinezhad"}, "is_accepted": false, "score": 1, "last_activity_date": 1564480678, "creation_date": 1564480678, "answer_id": 57269023, "question_id": 57190413, "link": "https://stackoverflow.com/questions/57190413/need-to-refresh-the-page-each-time-i-deploy-a-new-changes/57269023#57269023", "title": "Need to refresh the page each time i deploy a new changes", "body": "<p>I used <a href=\"https://github.com/googlechrome/workbox\" rel=\"nofollow noreferrer\">Workbox</a> in my PWA and it works perfectly. With \n<a href=\"https://www.npmjs.com/package/workbox-window\" rel=\"nofollow noreferrer\">workbox-window</a> you can simply detect new service worker installation and prompt user to restart the application or restart it without user grant. For more detail, I suggest you read <a href=\"https://medium.com/@webmaxru/workbox-4-implementing-refresh-to-update-version-flow-using-the-workbox-window-module-41284967e79c\" rel=\"nofollow noreferrer\">this link</a>.</p>\n"}], "owner": {"reputation": 268, "user_id": 7612669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l4S8C.png?s=128&g=1", "display_name": "Nadim", "link": "https://stackoverflow.com/users/7612669/nadim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564480678, "creation_date": 1563998335, "question_id": 57190413, "link": "https://stackoverflow.com/questions/57190413/need-to-refresh-the-page-each-time-i-deploy-a-new-changes", "title": "Need to refresh the page each time i deploy a new changes", "body": "<p>i am developing a web application using firebase firestore as back end and NoSQL database and angular as front-end i make a lot of update's and change's on my website and each time a change something i need to ask for all the client to refresh the page and it's so ugly to do this so i try to get the main.[hash].js file from the dist folder and compare it with each new version but no succeed also i try to use serviceWorker also nothing and i search for it in stackoverflow and i can't find a satisfied answer for my question how to refresh the page automatically when i deploy a new version to my firebase hosting with angular 7, thank you.</p>\n\n<p><strong>This is my last try with serviceworker:</strong> <br></p>\n\n<blockquote>\n  <p>log-update.service.ts</p>\n</blockquote>\n\n<pre><code>isUpdateAvailable = new Promise((resolve, reject) =&gt; {\n    console.log('calling isUpdateAvailable');\n    if ('serviceWorker' in navigator &amp;&amp; ['localhost', '127'].indexOf(location.hostname) === -1) {\n      // register service worker file\n      navigator.serviceWorker.register('service-worker.js')\n        .then(reg =&gt; {\n          reg.onupdatefound = () =&gt; {\n            const installingWorker = reg.installing;\n            installingWorker.onstatechange = () =&gt; {\n              switch (installingWorker.state) {\n                case 'installed':\n                  if (navigator.serviceWorker.controller) {\n                    // new update available\n                    console.log('New update available...');\n                    resolve(true);\n                  } else {\n                    // no update available\n                    resolve(false);\n                  }\n                  break;\n              }\n            };\n          };\n        })\n        .catch(err =&gt; console.error('[ERROR]', err));\n    }\n    console.log('Dev mode...');\n  });\n</code></pre>\n\n<blockquote>\n  <p>app.component.ts</p>\n</blockquote>\n\n<pre><code>ngOnInit() {\n    this.logUpdateService.isUpdateAvailable.then(isAvailable =&gt; {\n      if (isAvailable) {\n        alert('New update found !');\n      } else {\n        console.log('No new update found.');\n      }\n    });\n}\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1563996583, "post_id": 57190002, "comment_id": 100889867, "body": "Why do you have a <code>() =&gt; </code> in there? That&#39;s lambda syntax. You&#39;re trying to assign a function to a variable with a Tuple type."}, {"owner": {"reputation": 4570, "user_id": 6426229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-d4LpnU-bOis/AAAAAAAAAAI/AAAAAAAAAFg/7PJbhWKlyRQ/photo.jpg?sz=128", "display_name": "Radex", "link": "https://stackoverflow.com/users/6426229/radex"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1563996648, "post_id": 57190002, "comment_id": 100889901, "body": "I want have a function which return some data as the tuple.... is it possible?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1563996709, "post_id": 57190002, "comment_id": 100889934, "body": "But you said that <code>Test</code> is a Tuple, not a function that returns a Tuple, and you have <code>xxx</code> as type <code>Test</code>. Do you want <code>xxx</code> to be a function returning a Tuple or a Tuple?"}, {"owner": {"reputation": 4570, "user_id": 6426229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-d4LpnU-bOis/AAAAAAAAAAI/AAAAAAAAAFg/7PJbhWKlyRQ/photo.jpg?sz=128", "display_name": "Radex", "link": "https://stackoverflow.com/users/6426229/radex"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1563996759, "post_id": 57190002, "comment_id": 100889961, "body": "yes please in what way"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1563996833, "post_id": 57190002, "comment_id": 100889990, "body": "Again, do you want Test to be a Type that&#39;s a function returning a Tuple, or a Tuple? Which one?"}, {"owner": {"reputation": 4570, "user_id": 6426229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-d4LpnU-bOis/AAAAAAAAAAI/AAAAAAAAAFg/7PJbhWKlyRQ/photo.jpg?sz=128", "display_name": "Radex", "link": "https://stackoverflow.com/users/6426229/radex"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1563996962, "post_id": 57190002, "comment_id": 100890043, "body": "sorry I want Test to be a Type which return a Tuple"}, {"owner": {"reputation": 3161, "user_id": 1513187, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3237cddbf003e1af3b51900c02ec005b?s=128&d=identicon&r=PG", "display_name": "Nikola Lukic", "link": "https://stackoverflow.com/users/1513187/nikola-lukic"}, "edited": false, "score": 0, "creation_date": 1569614767, "post_id": 57190002, "comment_id": 102667777, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/56188216/how-to-describe-the-relationship-between-elements-of-tuple-in-array-of-tuples-vi\">How to describe the relationship between elements of tuple in array of tuples via types in TypeScript?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563997185, "post_id": 57190086, "comment_id": 100890128, "body": "It sounds like OP actually wants <code>type Test = () =&gt; [string, number]</code>"}], "tags": [], "owner": {"reputation": 2443, "user_id": 1408356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1149c2e9e4df9452c19dc98e9c53af?s=128&d=identicon&r=PG", "display_name": "Scrimothy", "link": "https://stackoverflow.com/users/1408356/scrimothy"}, "is_accepted": true, "score": 1, "last_activity_date": 1569614414, "last_edit_date": 1569614414, "creation_date": 1563996826, "answer_id": 57190086, "question_id": 57190002, "link": "https://stackoverflow.com/questions/57190002/how-to-set-a-tuple-in-typescript/57190086#57190086", "title": "How to set a tuple in TypeScript?", "body": "<p>If you want to set <code>xxx</code> to type <code>Test</code>, then do something like this:</p>\n\n<pre><code>type Test = [string, number];\n\nconst xxx: Test = ['hello', 10];\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>const xxx: Test = getTest();\ngetTest(): Test { return ['hello', 10]; }\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Setting your <code>xxx</code> to a function that returns <code>Test</code> would look more like this:</p>\n\n<pre><code>type Test = () =&gt; [string, number];\n\nconst test: Test = () =&gt; ['hello', 10];\n</code></pre>\n\n<p>OR</p>\n\n<p>If you want <code>Test</code> to be just the tuple, but <code>xxx</code> to be the function that returns the tuple, you could do something like this too:</p>\n\n<pre><code>type Test = [string, number];\n\nconst xxx: () =&gt; Test = getTest;\n\ngetTest(): Test { return ['hello', 10]; }\n</code></pre>\n"}], "owner": {"reputation": 4570, "user_id": 6426229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-d4LpnU-bOis/AAAAAAAAAAI/AAAAAAAAAFg/7PJbhWKlyRQ/photo.jpg?sz=128", "display_name": "Radex", "link": "https://stackoverflow.com/users/6426229/radex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57190086, "answer_count": 1, "score": 0, "last_activity_date": 1569614414, "creation_date": 1563996478, "question_id": 57190002, "link": "https://stackoverflow.com/questions/57190002/how-to-set-a-tuple-in-typescript", "title": "How to set a tuple in TypeScript?", "body": "<p>I have the following annotation, I receive an error when defining a tuple in typescript 3.5.3 version.\nWhat could be the problem?</p>\n\n<pre><code>type Test = [string, number];\nconst xxx: Test = () =&gt; ['hello', 10];\n</code></pre>\n\n<p>I get error:\n<code>Type '() =&gt; (string | number)[]' is not assignable to type '[string, number]'.</code></p>\n"}, {"tags": ["typescript", "socket.io", "typescript-typings"], "answers": [{"tags": [], "owner": {"reputation": 10043, "user_id": 5770132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08d37535f8b1f2d7c5785cfd21067b9?s=128&d=identicon&r=PG", "display_name": "Oblosys", "link": "https://stackoverflow.com/users/5770132/oblosys"}, "is_accepted": true, "score": 14, "last_activity_date": 1564000742, "creation_date": 1564000742, "answer_id": 57190894, "question_id": 57189736, "link": "https://stackoverflow.com/questions/57189736/how-to-use-socket-io-client-type-definitions-for-typescript/57190894#57190894", "title": "How to use socket.IO client type definitions for Typescript?", "body": "<p>The <code>io</code> function has return type <code>SocketIOClient.Socket</code> and not <code>SocketIOClientStatic</code>. If you use that type, or leave out the signature altogether, it works as expected:</p>\n\n<pre><code>import io from 'socket.io-client';\n\nconst socket: SocketIOClient.Socket = io('http://localhost');\nconst anotherSocket = io('http://localhost');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 377, "user_id": 1536991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bb9463091fd728fceac6ed6a02cb36a?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1536991/niklas"}, "is_accepted": false, "score": 0, "last_activity_date": 1609101040, "creation_date": 1609101040, "answer_id": 65470164, "question_id": 57189736, "link": "https://stackoverflow.com/questions/57189736/how-to-use-socket-io-client-type-definitions-for-typescript/65470164#65470164", "title": "How to use socket.IO client type definitions for Typescript?", "body": "<p>I'd like to extend the answer of Oblosys:</p>\n<p>If the <code>esModuleInterop</code> flag is active and you get an error message like</p>\n<blockquote>\n<p>This module is declared with using 'export =', and can only be used\nwith a default import when using the 'esModuleInterop' flag.</p>\n</blockquote>\n<p>then do the import with the <code>as</code>-Syntax:</p>\n<pre><code>import * as io from 'socket.io-client';\n\nconst socket: SocketIOClient.Socket = io('http://localhost');\n</code></pre>\n"}], "owner": {"reputation": 18854, "user_id": 1083572, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9xSFI.png?s=128&g=1", "display_name": "Kokodoko", "link": "https://stackoverflow.com/users/1083572/kokodoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3733, "favorite_count": 1, "accepted_answer_id": 57190894, "answer_count": 2, "score": 7, "last_activity_date": 1609101040, "creation_date": 1563995396, "last_edit_date": 1563996045, "question_id": 57189736, "link": "https://stackoverflow.com/questions/57189736/how-to-use-socket-io-client-type-definitions-for-typescript", "title": "How to use socket.IO client type definitions for Typescript?", "body": "<p>I have installed the Typescript definitions for a SocketIO client using</p>\n\n<pre><code>npm install @types/socket.io-client\n</code></pre>\n\n<p>But in VS Code I still get type errors:</p>\n\n<pre><code>let socket: SocketIOClientStatic = io() \n</code></pre>\n\n<blockquote>\n  <p>Type 'Socket' is missing the following properties from type 'SocketIOClientStatic': protocol, Socket, Manager, managersts(2739)</p>\n</blockquote>\n\n<p>All these properties are not mentioned as options in intellisense, or in he socketIO docs... they shouldn't be needed when creating an <code>io()</code></p>\n\n<p>How can I use Typescript with the SocketIO client?</p>\n"}, {"tags": ["css", "typescript", "angular-material", "angular5", "mat-table"], "answers": [{"tags": [], "owner": {"reputation": 13080, "user_id": 9226213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d9b1e59fd7fb8bc106b44b337ce5d83?s=128&d=identicon&r=PG&f=1", "display_name": "G. Tranter", "link": "https://stackoverflow.com/users/9226213/g-tranter"}, "is_accepted": true, "score": 14, "last_activity_date": 1564004376, "last_edit_date": 1564004376, "creation_date": 1564001145, "answer_id": 57190983, "question_id": 57189625, "link": "https://stackoverflow.com/questions/57189625/select-only-one-row-in-mat-table-and-if-select-other-one-then-unselect-first-one/57190983#57190983", "title": "Select only one row in mat-table and if select other one then unselect first one", "body": "<p>Using a <code>SelectionModel</code> with multi-selection disabled will make things easier. See the example: <a href=\"https://material.angular.io/components/table/overview#selection\" rel=\"noreferrer\">https://material.angular.io/components/table/overview#selection</a>. </p>\n\n<p>Here's a modified version of the example on Stackblitz without the checkboxes and using single selection and some of your table's functionality: <a href=\"https://stackblitz.com/edit/angular-2yv8hk?file=app/table-selection-example.html\" rel=\"noreferrer\">https://stackblitz.com/edit/angular-2yv8hk?file=app/table-selection-example.html</a>. </p>\n\n<p>In particular:</p>\n\n<p>TS</p>\n\n<pre><code>export class TableSelectionExample {\n  displayedColumns: string[] = ['position', 'name', 'weight', 'symbol'];\n  dataSource = new MatTableDataSource&lt;PeriodicElement&gt;(ELEMENT_DATA);\n  selection = new SelectionModel&lt;PeriodicElement&gt;(false, []);\n}\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code>&lt;mat-row *matRowDef=\"let row; columns: displayedColumns;\" \n  (click)=\"selection.toggle(row)\" \n  [ngClass]=\"{hovered: row.hovered, highlighted: selection.isSelected(row)}\"\n  (mouseover)=\"row.hovered = true\" (mouseout)=\"row.hovered = false\"&gt;\n&lt;/mat-row&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 11735467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3adcf0d395377b36a303f8ab2890c9c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sdpotts93", "link": "https://stackoverflow.com/users/11735467/sdpotts93"}, "is_accepted": false, "score": 0, "last_activity_date": 1564001570, "creation_date": 1564001570, "answer_id": 57191079, "question_id": 57189625, "link": "https://stackoverflow.com/questions/57189625/select-only-one-row-in-mat-table-and-if-select-other-one-then-unselect-first-one/57191079#57191079", "title": "Select only one row in mat-table and if select other one then unselect first one", "body": "<p>Is there a way to get the index of the row? (I don't really use angular) So you save the index when clicking the row in data as 'pastIndex', define a method for when you click the row, pseudocodeish:</p>\n\n<pre><code>rowClick (index) {\n  if (this.pastIndex is defined) {\n      data[this.pastIndex].highlighted = false\n  }\n  this.pastIndex = index\n  data[index].highlighted = true\n}\n</code></pre>\n\n<p>If not, this is not ideal, but you could traverse your whole data and make everything false and then just make the one you need true</p>\n\n<pre><code>rowClick (index) {\n  for (var i = 0; i &lt; data.length; i++) {\n    data[i].highlighted = false\n  }\n  data[index].highlighted = true\n}\n</code></pre>\n"}], "owner": {"reputation": 156, "user_id": 5815865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y5sP.jpg?s=128&g=1", "display_name": "voltdev", "link": "https://stackoverflow.com/users/5815865/voltdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11698, "favorite_count": 0, "accepted_answer_id": 57190983, "answer_count": 2, "score": 3, "last_activity_date": 1564004376, "creation_date": 1563994900, "last_edit_date": 1564000206, "question_id": 57189625, "link": "https://stackoverflow.com/questions/57189625/select-only-one-row-in-mat-table-and-if-select-other-one-then-unselect-first-one", "title": "Select only one row in mat-table and if select other one then unselect first one", "body": "<p>I want to implement table with only one row selection. Now i have multiple selection. </p>\n\n<p>I tried coupe ways to do this and i stayed by this one.</p>\n\n<p>Graphic example:\n<a href=\"https://i.stack.imgur.com/W2WLn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W2WLn.png\" alt=\"Graphic example\"></a></p>\n\n<p><em>component.ts</em></p>\n\n<pre><code>import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { UsersReadRepository } from '../../../../core/services';\nimport { MatTableDataSource } from '@angular/material';\nimport { User } from 'domain-models';\nimport { Observable, Subscription } from 'rxjs';\nimport { Subscribable } from 'rxjs/Observable';\nimport { SelectionModel } from '@angular/cdk/collections';\n\n@Component({\n    selector: 'choose-supervisior',\n    templateUrl: './chooseSupervisior.component.html',\n    styleUrls: ['./chooseSupervisior.component.scss']\n})\n\nexport class ChooseSupervisiorComponent implements OnInit, OnDestroy {\n    selectedRow: User;\n    isLoading = true;\n    dataSource: MatTableDataSource&lt;User&gt; = new MatTableDataSource();\n    displayedColumns: string[] = ['name', 'surname', 'phone'];\n    subscription$ : Subscription;\n\n    constructor(public dialogRef: MatDialogRef&lt;ChooseSupervisiorComponent&gt;, private userReadRepository: UsersReadRepository) {\n    }\n    onCloseDialog(): void {\n        this.dialogRef.close(this.selectedRow);\n      }\n\n    ngOnInit() {\n        this.subscription$ = this.userReadRepository.getSupervisiorUsers()\n        .subscribe(\n            data =&gt; \n            {\n                this.isLoading = false,\n                this.dataSource.data = data;\n            }\n        )\n    }\n    highlight(highlighted: boolean) {\n        highlighted = !highlighted;\n      }\n\n    getSupervisiorRecordFromTable(user: User){\n        this.selectedRow = user;\n    }\n\n    ngOnDestroy() {\n        this.subscription$.unsubscribe();\n    }\n}\n</code></pre>\n\n<p><em>component.html</em></p>\n\n<pre><code>&lt;h2 mat-dialog-title&gt;{{'insideChats.chooseSupervisiorHeader' | translate}}&lt;/h2&gt;\n&lt;mat-divider&gt;&lt;/mat-divider&gt;\n&lt;div mat-dialog-content&gt;\n    &lt;mat-table #table [dataSource]=\"dataSource\" class=\"mat-elevation-z8\"&gt;\n        &lt;ng-container matColumnDef=\"name\"&gt;\n            &lt;mat-header-cell *matHeaderCellDef&gt; Name &lt;/mat-header-cell&gt;\n            &lt;mat-cell *matCellDef=\"let user\"&gt; {{user.name}} &lt;/mat-cell&gt;\n        &lt;/ng-container&gt;\n        &lt;ng-container matColumnDef=\"surname\"&gt;\n            &lt;mat-header-cell *matHeaderCellDef&gt; Surname &lt;/mat-header-cell&gt;\n            &lt;mat-cell *matCellDef=\"let user\"&gt; {{user.surname}} &lt;/mat-cell&gt;\n        &lt;/ng-container&gt;\n        &lt;ng-container matColumnDef=\"phone\"&gt;\n            &lt;mat-header-cell *matHeaderCellDef&gt; Phone &lt;/mat-header-cell&gt;\n            &lt;mat-cell *matCellDef=\"let user\"&gt; {{user.phone}} &lt;/mat-cell&gt;\n        &lt;/ng-container&gt;\n        &lt;mat-header-row *matHeaderRowDef=\"displayedColumns\"&gt;&lt;/mat-header-row&gt;\n        &lt;mat-row *matRowDef=\"let row; columns: displayedColumns;\" \n        (click)=\"getSupervisiorRecordFromTable(row)\"\n        [ngClass]=\"{hovered: row.hovered, highlighted: row.highlighted}\" (click)=\"row.highlighted = !row.highlighted\" (mouseover)=\"row.hovered = true\" (mouseout)=\"row.hovered = false\"&gt;&lt;/mat-row &gt;\n    &lt;/mat-table&gt;\n    &lt;mat-card class=\"loading-spinner\" *ngIf=\"isLoading\"&gt;\n  &lt;mat-progress-spinner \n    color=\"primary\" \n    mode=\"indeterminate\"&gt;\n  &lt;/mat-progress-spinner&gt;\n&lt;/mat-card&gt;\n&lt;/div&gt;\n&lt;mat-divider&gt;&lt;/mat-divider&gt;\n&lt;div mat-dialog-actions&gt;\n    &lt;button mat-dialog-close (click)=\"onCloseDialog()\" mat-icon-button color=\"warn\"&gt;\n        &lt;mat-icon&gt;close&lt;/mat-icon&gt;\n    &lt;/button&gt;\n        &lt;span class=\"buttons-spacer\"&gt;&lt;/span&gt;\n    &lt;button mat-button class=\"choose-button\"&gt;{{'insideChats.chooseSupervisiorStartChat' | translate}}&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><em>component.scss</em></p>\n\n<pre><code>.loading-spinner{\n    display: flex; \n    justify-content: center; \n    align-items: center;\n}\n\n  .buttons-spacer {\n    flex: 1 1 auto;\n  }\n\n  .mat-dialog-actions {\n    justify-content: flex-end;\n  }\n\n  .basic-container {\n    padding: 5px;\n  }\n\n  .mat-row.hovered {\n    background: #eee;\n  }\n\n  .mat-row.highlighted {\n    background: #999;\n  }\n\n  mat-cell.mat-cell, mat-header-cell.mat-header-cell {\n    overflow: visible; \n  }\n</code></pre>\n\n<p>How to implement row selection with unsellecting the last one clicked selection and then this same with other clicking.</p>\n\n<p>The point is just always available select only one row.</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1563995132, "post_id": 57189623, "comment_id": 100889207, "body": "Create the <code>properties</code> array in the constructor of the class?"}, {"owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1563995656, "post_id": 57189623, "comment_id": 100889441, "body": "@HereticMonkey I don&#39;t want to do this as it is too much overhead, I want to use one data object that has all or some of the valid properties"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1563995918, "post_id": 57189623, "comment_id": 100889573, "body": "Then pass the list of valid properties to the <code>isValidStructure</code> function... That would be the only way to make it &quot;generic&quot;. Otherwise, TypeScript can do the validation at compile time (without a function), if you set the types correctly."}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1563996843, "post_id": 57189623, "comment_id": 100889995, "body": "Maybe a work of mine could help: <a href=\"https://itnext.io/bringing-typescript-types-at-runtime-with-typeonly-c317e9dd8880\" rel=\"nofollow noreferrer\">itnext.io/&hellip;</a> ."}, {"owner": {"reputation": 2443, "user_id": 1408356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1149c2e9e4df9452c19dc98e9c53af?s=128&d=identicon&r=PG", "display_name": "Scrimothy", "link": "https://stackoverflow.com/users/1408356/scrimothy"}, "edited": false, "score": 0, "creation_date": 1563997087, "post_id": 57189623, "comment_id": 100890095, "body": "can you just have your class implement an interface which is the same type as your constructor obj?"}, {"owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "reply_to_user": {"reputation": 2443, "user_id": 1408356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1149c2e9e4df9452c19dc98e9c53af?s=128&d=identicon&r=PG", "display_name": "Scrimothy", "link": "https://stackoverflow.com/users/1408356/scrimothy"}, "edited": false, "score": 0, "creation_date": 1563997146, "post_id": 57189623, "comment_id": 100890112, "body": "@Scrimothy could you show me an example"}, {"owner": {"reputation": 1582, "user_id": 6501536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdfdabd02b67748574074aca1307499c?s=128&d=identicon&r=PG&f=1", "display_name": "motia", "link": "https://stackoverflow.com/users/6501536/motia"}, "edited": false, "score": 0, "creation_date": 1563999612, "post_id": 57189623, "comment_id": 100891127, "body": "Will the data you validate ever come from external input (network, filesystem, database, user input..)?"}, {"owner": {"reputation": 647, "user_id": 2779773, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4acc51b185ad5b5efba0ad204f15e373?s=128&d=identicon&r=PG&f=1", "display_name": "lucifer63", "link": "https://stackoverflow.com/users/2779773/lucifer63"}, "edited": false, "score": 0, "creation_date": 1564047268, "post_id": 57189623, "comment_id": 100905732, "body": "So you want to have dynamic validation? \u2013 lucifer63 Look at io-ts, <a href=\"https://www.olioapps.com/blog/checking-types-real-world-typescript/\" rel=\"nofollow noreferrer\">olioapps.com/blog/checking-types-real-world-typescript</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "is_accepted": false, "score": 0, "last_activity_date": 1563996816, "creation_date": 1563996816, "answer_id": 57190083, "question_id": 57189623, "link": "https://stackoverflow.com/questions/57189623/generic-way-of-validating-the-structure-of-javascript-class/57190083#57190083", "title": "Generic way of validating the structure of javascript class", "body": "<p>There is no way to get a list of properties of the defined-<code>class</code> in javascript or out-of-the-box solution for typescript, you have to manually inject it. </p>\n\n<pre><code>   export class Provider {\n      static properties = [...]\n   }\n\n   /// or\n   Provider.properties = []\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "edited": false, "score": 0, "creation_date": 1563998287, "post_id": 57190223, "comment_id": 100890574, "body": "When I pass {name: &#39;some name&#39;} to the constructor my variable has no properties, let provider = new Provider(validData)"}, {"owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "edited": false, "score": 0, "creation_date": 1563998411, "post_id": 57190223, "comment_id": 100890626, "body": "And how would I be able to valid the structure this way?"}, {"owner": {"reputation": 2443, "user_id": 1408356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1149c2e9e4df9452c19dc98e9c53af?s=128&d=identicon&r=PG", "display_name": "Scrimothy", "link": "https://stackoverflow.com/users/1408356/scrimothy"}, "reply_to_user": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "edited": false, "score": 0, "creation_date": 1563998709, "post_id": 57190223, "comment_id": 100890766, "body": "I just updated my answer to address your first question. For the second one, if you pass in a property that isn&#39;t a part of the <code>IProvider</code> interface, then you&#39;ll get red squigglies and compiler errors."}, {"owner": {"reputation": 2443, "user_id": 1408356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1149c2e9e4df9452c19dc98e9c53af?s=128&d=identicon&r=PG", "display_name": "Scrimothy", "link": "https://stackoverflow.com/users/1408356/scrimothy"}, "reply_to_user": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "edited": false, "score": 0, "creation_date": 1563999166, "post_id": 57190223, "comment_id": 100890960, "body": "Also, you&#39;ll still need to still need to set all the instance props to the obj props in the constructor like <code>this.name = obj.name</code>, but I left that out for simplicity of focusing on your question"}], "tags": [], "owner": {"reputation": 2443, "user_id": 1408356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1149c2e9e4df9452c19dc98e9c53af?s=128&d=identicon&r=PG", "display_name": "Scrimothy", "link": "https://stackoverflow.com/users/1408356/scrimothy"}, "is_accepted": false, "score": 0, "last_activity_date": 1564001467, "last_edit_date": 1564001467, "creation_date": 1563997486, "answer_id": 57190223, "question_id": 57189623, "link": "https://stackoverflow.com/questions/57189623/generic-way-of-validating-the-structure-of-javascript-class/57190223#57190223", "title": "Generic way of validating the structure of javascript class", "body": "<p>You could define an interface that has all the common properties between the class and your passed in config <code>obj</code> and then have your class implement it and your constructor take that type as a param.</p>\n\n<pre><code>export interface IProvider {\n    activeAccount?: boolean;\n    description?: String;\n    name?: String;\n    providerType?: any;\n    publicUrl?: String;\n    uuid?: String;\n}\n\nexport class Provider implements IProvider {\n    activeAccount: boolean;\n    description: String;\n    name: String;\n    providerType: any;\n    publicUrl: String;\n    uuid: String;\n\n    constructor(obj?: IProvider) {\n        if (obj) {\n            this.activeAccount = obj.activeAccount;\n            ...\n        }\n    }\n\n}\n\nconst provider = new Provider({...});\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>If none/any of the properties are required, you could add a <code>?</code> in the interface between the prop name and colon. That way you can allow the constructor obj have as many of the valid props as it needs, but it would still raise an error if you try to pass in:</p>\n\n<pre><code>const provider = new Provider({ invalid: true });\n</code></pre>\n\n<p>Take a look at <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html\" rel=\"nofollow noreferrer\">Typescript Interfaces</a> for more info</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>To put this back into your original example:</p>\n\n<pre><code>let validData: any = {name: 'some name'}\nlet invalidData: any = {namexx: 'the key is invalid'}\nlet provider = Object.assign(new Provider(), validData)\nlet provider2 = Object.assign(new Provider(), invalidData)\n</code></pre>\n\n<p>Defining both <code>validData</code> and <code>invalidData</code> as <code>any</code> will force Typescript not to yell at you with red squigglies because it basically says \"this might be an <code>IProvider</code>\". So you should set <code>validData: IProvider</code> instead of <code>any</code>.</p>\n\n<p>Also, the same thing happens with <code>Object.assign()</code> when adding props to a class instance. It appears that Typescript doesn't mind that you're attempting to put in invalid props if you do this:</p>\n\n<pre><code>const validData: IProvider = { name: 'some name' };\nconst invalidData: any = { namexx: 'the key is invalid' };\nconst provider: Provider = Object.assign(new Provider(validData), invalidData);\n\n// Provider { name: 'some name', namexx: 'the key is invalid' }\n</code></pre>\n\n<p>However, if you again change <code>any</code> to <code>IProvider</code> on <code>invalidData: IProvider</code>, it'll yell at you for the <code>namexx</code> prop in there.</p>\n\n<p>That all said, since typing and validating seems to be important to you, then you should try to ensure that all types are explicitly declared to allow Typescript to do what it does.</p>\n"}], "owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564001467, "creation_date": 1563994879, "last_edit_date": 1563996138, "question_id": 57189623, "link": "https://stackoverflow.com/questions/57189623/generic-way-of-validating-the-structure-of-javascript-class", "title": "Generic way of validating the structure of javascript class", "body": "<p>So I have a provider class</p>\n\n<pre><code>export class Provider {\n\n    activeAccount: boolean;\n    description: String;\n    name: String;\n    providerType: any;\n    publicUrl: String;\n    uuid: String;\n\n    isValidStructure(obj){\n\n        let keys = Object.keys(obj), valid = true,\n\n        properties = ['activeAccount', 'description', 'name', 'providerType', 'publicUrl', 'uuid']\n\n        keys.forEach((key)=&gt;{\n            if(!properties.includes(key)){\n                valid = false\n            }\n        })\n\n        return valid\n    }\n\n}\n</code></pre>\n\n<p>I have a method to validate that the data used to create the model is a property of the model, it works but is there a generic way of doing this</p>\n\n<p>The properties array is hardcoded in the function isValidStructure</p>\n\n<pre><code>        let validData: any = {name: 'some name'}\n        let invalidData: any = {namexx: 'the key is invalid'}\n        let provider = Object.assign(new Provider(), validData)\n        let provider2 = Object.assign(new Provider(), invalidData)\n\n        provider.isValidStructure(validData)//true\n        provider2.isValidStructure(invalidData)//false\n</code></pre>\n\n<p>Above is some examples of the function and its output\nIs there some way of getting the properties of the class</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1563993692, "post_id": 57189334, "comment_id": 100888698, "body": "You resolve the promise <i>outside</i> the asynchronous operation?"}, {"owner": {"reputation": 11, "user_id": 11832185, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCx7ve0sXxg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reuOj3d4l54EJpoyo-RcsLuSuEK3Q/photo.jpg?sz=128", "display_name": "emad alhamou", "link": "https://stackoverflow.com/users/11832185/emad-alhamou"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1563993846, "post_id": 57189334, "comment_id": 100888754, "body": "how do this with input file ? is not working outside the <code>comPress()</code>"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1563994342, "post_id": 57189334, "comment_id": 100888941, "body": "I would suggest creating an array of promises and using <code>Promise.all</code> to combine them. Or using <code>async&#47;await</code>. Or do something like the answers to <a href=\"https://stackoverflow.com/q/18983138/215552\">Callback after all asynchronous forEach callbacks are completed</a>..."}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1563995004, "post_id": 57189334, "comment_id": 100889155, "body": "Why are you rejecting the promise immediately after resolving it?"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1563998656, "post_id": 57189334, "comment_id": 100890738, "body": "The whole point of the promise executor with its callback arguments is that you can call <code>resolve</code> after the asynchronous stuff happened - in the <code>onload</code> listener."}], "answers": [{"comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1563998707, "post_id": 57190048, "comment_id": 100890764, "body": "Don&#39;t forget to install an error handle as well."}], "tags": [], "owner": {"reputation": 1267, "user_id": 1832228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iz8Ka.jpg?s=128&g=1", "display_name": "TPReal", "link": "https://stackoverflow.com/users/1832228/tpreal"}, "is_accepted": false, "score": 1, "last_activity_date": 1563996658, "creation_date": 1563996658, "answer_id": 57190048, "question_id": 57189334, "link": "https://stackoverflow.com/questions/57189334/why-the-code-does-new-promise-always-result-in-empty-array/57190048#57190048", "title": "Why the code does &quot;new Promise&quot; always result in empty array", "body": "<p>After the loop ends, your <code>onload</code> handlers are still not run. So data is not populated. What you can do first is this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function readFile(i) {\n  return new Promise(success =&gt; {  \n    const reader = new FileReader();\n    reader.onload = e =&gt; {\n      success(e.target['result']);\n    };\n    reader.readAsDataURL(i);\n  });\n}\n</code></pre>\n\n<p>You get a promise that resolves with the actual data from <code>FileReader</code>. Then in your main code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>return Promise.all(img.map(i =&gt; readFile(i)));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 439, "user_id": 10283665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0yOUDz4Nr38/AAAAAAAAAAI/AAAAAAAAACI/XBjny9i7TDw/photo.jpg?sz=128", "display_name": "Aimal Khan", "link": "https://stackoverflow.com/users/10283665/aimal-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1563997521, "creation_date": 1563997521, "answer_id": 57190231, "question_id": 57189334, "link": "https://stackoverflow.com/questions/57189334/why-the-code-does-new-promise-always-result-in-empty-array/57190231#57190231", "title": "Why the code does &quot;new Promise&quot; always result in empty array", "body": "<p>the problem with your code is that promise is resolved before on load event is called thus  resulting in empty array what you need to do is resolve your promise in onloadend event i.e </p>\n\n<pre><code>reader.onloadend = function() {\n  resolve(data)\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11832185, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCx7ve0sXxg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reuOj3d4l54EJpoyo-RcsLuSuEK3Q/photo.jpg?sz=128", "display_name": "emad alhamou", "link": "https://stackoverflow.com/users/11832185/emad-alhamou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1563998603, "answer_count": 2, "score": 0, "last_activity_date": 1563997521, "creation_date": 1563993616, "last_edit_date": 1563994679, "question_id": 57189334, "link": "https://stackoverflow.com/questions/57189334/why-the-code-does-new-promise-always-result-in-empty-array", "closed_reason": "Duplicate", "title": "Why the code does &quot;new Promise&quot; always result in empty array", "body": "<p>this is my Html5 code :</p>\n\n<pre><code>&lt;div&gt;\n    &lt;input type=\"file\" multiple (change)=\"comPress($event.target.files)\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>i need on change do this function comPress() with all files.\nthis is in Angular component.ts :</p>\n\n<pre><code>comPress(images){\n   function fetchResult(img) {\n    return new Promise(  function(resolve, reject) {\n\n      let data = [];\n      for(let i of img){\n      var reader = new FileReader();\n        reader.onload = function (e) {\n          data = [...data, e.target['result']];\n        }\n        reader.readAsDataURL(i);\n      }\n\n       resolve(data);\n       reject('reject');\n    })\n\n  };\n\n  fetchResult(images).then(data=&gt;{\n    console.log(data) // is always []\n  }).catch(err=&gt;console.log(err))\n\n}\n</code></pre>\n\n<p>i need  push this variable <code>let data = [];</code> with all result data from function <code>onload()</code></p>\n\n<p>but the result is always <code>[]</code> empty array!</p>\n\n<p>I expect this result :</p>\n\n<pre><code>[\"data:sadvdsbdsbdsvdsvdsbdb\", \"data:vaswbvewbewbregergreg\"]\n</code></pre>\n\n<p>What is wrong with this code?</p>\n"}, {"tags": ["mysql", "node.js", "typescript", "typeorm"], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 9136088, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k4V287ETZs8/AAAAAAAAAAI/AAAAAAAARW0/fFT-hPTaPCE/photo.jpg?sz=128", "display_name": "sagerobert", "link": "https://stackoverflow.com/users/9136088/sagerobert"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005877, "creation_date": 1564005877, "answer_id": 57191841, "question_id": 57188920, "link": "https://stackoverflow.com/questions/57188920/unable-to-add-new-record-with-onetomany-relation/57191841#57191841", "title": "Unable to add new record with OneToMany relation", "body": "<p>I figured it out, problem was the field <code>Detail.picture</code>, which was defined as string, but comes from the upload as <code>File</code>, therefore the syntax error in the query.</p>\n"}], "owner": {"reputation": 339, "user_id": 9136088, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k4V287ETZs8/AAAAAAAAAAI/AAAAAAAARW0/fFT-hPTaPCE/photo.jpg?sz=128", "display_name": "sagerobert", "link": "https://stackoverflow.com/users/9136088/sagerobert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564005877, "creation_date": 1563991772, "question_id": 57188920, "link": "https://stackoverflow.com/questions/57188920/unable-to-add-new-record-with-onetomany-relation", "title": "Unable to add new record with OneToMany relation", "body": "<p>For the last 3 days I'm going nuts because I can't add a new record with a @OneToMany() relation to a MySQL database anymore.</p>\n\n<p>The OneToMany entity is as follows:</p>\n\n<pre><code>import { Column, Entity, OneToMany, PrimaryGeneratedColumn } from 'typeorm';\nimport { Detail } from './Detail';\n\n\n@Entity()\nexport class Biergarten {\n\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column( { default: true } )\n    isBiergarten: boolean;\n\n    @Column(\"simple-array\")\n    attendees: string[];\n\n    @Column( { unique: true } )\n    date: number;\n\n    @Column( { unique: true } )\n    link: number;\n\n    @Column(\"simple-json\")\n    location: { latitude: number, longitude: number };\n\n    @Column()\n    name: string;\n\n    @OneToMany( type =&gt; Detail, detail =&gt; detail.biergarten, { eager: true, cascade: true } )\n    details: Detail[];\n\n    @Column( { type: \"mediumtext\", nullable: false } )\n    geojson: string;\n\n    @Column( { type: \"char\", length: 32 } )\n    hash: string;\n\n}\n</code></pre>\n\n<p>The ManyToOne-Side is as follows:</p>\n\n<pre><code>import {Entity, Column, ManyToOne, PrimaryGeneratedColumn} from \"typeorm\";\nimport { Biergarten } from './Biergarten';\n\n\n@Entity()\nexport class Detail {\n\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column()\n    comment: string;\n\n    @Column()\n    picture: string;\n\n    @ManyToOne( type =&gt; Biergarten, biergarten =&gt; biergarten.details, { onDelete: \"CASCADE\" } )\n    biergarten: Biergarten;\n\n}\n</code></pre>\n\n<p>I tried a bunch of combinations with \"cascade\" etc, but everytime I try to add a new record with the following code, I get an MySQL error message:</p>\n\n<pre><code>const repository = getRepository( Biergarten );\nconst biergarten = repository.create( {\n  attendees: _.body.attendees,\n  date: _.body.date,\n  link: _.body.link,\n  isBiergarten: _.body.isBiergarten,\n  location: _.body.location,\n  name: _.body.name,\n  geojson: '',\n  details: [],\n  hash: '',\n});\n\nlet details: Array&lt;Detail&gt; = Array.from(_.body.details);\ndetails.forEach( detail =&gt; biergarten.details.push( detail ) \nawait repository.save( biergarten );\n);\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>r] query: START TRANSACTION\n[server] query: INSERT INTO `biergarten`(`id`, `isBiergarten`, `attendees`, `date`, `link`, `location`, `name`, `geojson`, `hash`) VALUES (DEFAULT, ?, ?, ?, ?, ?, ?, ?, ?) -- PARAMETERS: [1,\"Robert\",1563989940,2084,\"{\\\"latitude\\\":48.12694671104566,\\\"longitude\\\":11.644134521484377}\",\"testtestest\",\"\",\"\"]\n[server] query: SELECT `Biergarten`.`id` AS `Biergarten_id`, `Biergarten`.`isBiergarten` AS `Biergarten_isBiergarten` FROM `biergarten` `Biergarten` WHERE `Biergarten`.`id` = ? -- PARAMETERS: [204]\n[server] query: INSERT INTO `detail`(`id`, `comment`, `picture`, `biergartenId`) VALUES (DEFAULT, ?, ?, ?) -- PARAMETERS: [\" :think: \",{},204]\n[server] query failed: INSERT INTO `detail`(`id`, `comment`, `picture`, `biergartenId`) VALUES (DEFAULT, ?, ?, ?) -- PARAMETERS: [\" :think: \",{},204]\n[server] error: { Error: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ' 204)' at line 1\n[server]     at Packet.asError (/home/robert/Repository/BiergartenByBike/server/node_modules/mysql2/lib/packets/packet.js:684:17)\n[server]     at Query.execute (/home/robert/Repository/BiergartenByBike/server/node_modules/mysql2/lib/commands/command.js:28:26)\n[server]     at PoolConnection.handlePacket (/home/robert/Repository/BiergartenByBike/server/node_modules/mysql2/lib/connection.js:449:32)\n[server]     at PacketParser.Connection.packetParser.p [as onPacket] (/home/robert/Repository/BiergartenByBike/server/node_modules/mysql2/lib/connection.js:72:12)\n[server]     at PacketParser.executeStart (/home/robert/Repository/BiergartenByBike/server/node_modules/mysql2/lib/packet_parser.js:75:16)\n[server]     at Socket.Connection.stream.on.data (/home/robert/Repository/BiergartenByBike/server/node_modules/mysql2/lib/connection.js:79:25)\n[server]     at Socket.emit (events.js:198:13)\n[server]     at addChunk (_stream_readable.js:288:12)\n[server]     at readableAddChunk (_stream_readable.js:269:11)\n[server]     at Socket.Readable.push (_stream_readable.js:224:10)\n[server]   code: 'ER_PARSE_ERROR',\n[server]   errno: 1064,\n[server]   sqlState: '42000',\n[server]   sqlMessage:\n[server]    'You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near \\' 204)\\' at line 1' }\n[server] query: ROLLBACK\n</code></pre>\n\n<p>I've also set up a minimal git repository to find where the error is, but there it's running fine: <a href=\"https://github.com/sagerio/ChildInsertFailed\" rel=\"nofollow noreferrer\">https://github.com/sagerio/ChildInsertFailed</a></p>\n\n<p>I've no idea where to look at now, I've also seen no difference in the tables used in the original and the minimal repository.</p>\n\n<p>Thanks,\nRobert</p>\n"}, {"tags": ["javascript", "arrays", "angular", "typescript"], "comments": [{"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "edited": false, "score": 0, "creation_date": 1564036394, "post_id": 57188805, "comment_id": 100899899, "body": "If your using angular material to show the data you must refresh the table. You can do it making a duplicate using spread operator, e.g. [...data], or using a <code>@ViewChild(&#39;table&#39;) myTable</code> and use myTable.renderRows(), see <a href=\"https://material.angular.io/components/table/api#MatTable\" rel=\"nofollow noreferrer\">material.angular.io/components/table/api#MatTable</a>, else must work. I put a simple example in <a href=\"https://stackblitz.com/edit/angular-rwfwdn?file=src%2Fapp%2Fapp.component.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1172, "user_id": 5212157, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-Q_5hxD9mHKs/AAAAAAAAAAI/AAAAAAAAHBo/iiS12tFEHPQ/photo.jpg?sz=128", "display_name": "Chris Rutherford", "link": "https://stackoverflow.com/users/5212157/chris-rutherford"}, "edited": false, "score": 0, "creation_date": 1563998257, "post_id": 57190144, "comment_id": 100890559, "body": "Yep changed it to your recommend and no issues"}], "tags": [], "owner": {"reputation": 1267, "user_id": 1832228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iz8Ka.jpg?s=128&g=1", "display_name": "TPReal", "link": "https://stackoverflow.com/users/1832228/tpreal"}, "is_accepted": true, "score": 1, "last_activity_date": 1563997079, "creation_date": 1563997079, "answer_id": 57190144, "question_id": 57188805, "link": "https://stackoverflow.com/questions/57188805/updating-components-based-on-sorted-array-angular-4-3/57190144#57190144", "title": "Updating components based on sorted array. Angular (4.3)", "body": "<p>The function you pass to <code>sort</code> is wrong. It is supposed to return a negative value for \"less\", a positive value for \"greater\" or zero for \"equal\". If <code>orderValue</code> is numeric then it's easiest to just return <code>a[orderValue] - b[orderValue]</code>, if not then just change your <code>0</code> to <code>-1</code>.</p>\n\n<p>(By the way, name <code>orderKey</code> could be a bit clearer maybe?)</p>\n\n<p>I don't think angular has anything to do here, but I cannot tell now why you get different results. Anyway, your sort function is invalid (it states that <em>a</em> equals <em>b</em>, but at the same time <em>b</em> is greater than <em>a</em>), I hope fixing this function helps.</p>\n"}], "owner": {"reputation": 1172, "user_id": 5212157, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-Q_5hxD9mHKs/AAAAAAAAAAI/AAAAAAAAHBo/iiS12tFEHPQ/photo.jpg?sz=128", "display_name": "Chris Rutherford", "link": "https://stackoverflow.com/users/5212157/chris-rutherford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 57190144, "answer_count": 1, "score": 0, "last_activity_date": 1563997079, "creation_date": 1563991276, "question_id": 57188805, "link": "https://stackoverflow.com/questions/57188805/updating-components-based-on-sorted-array-angular-4-3", "title": "Updating components based on sorted array. Angular (4.3)", "body": "<p>Working with an array of data that we want to be able to sort for display in a component, and it doesn't seem to be sorting or updating the DOM, however I have a working code sample that properly demonstrates the concept, and it should be sorting, but in the angular app, it's simply not getting sorted.</p>\n\n<p>The parent component that houses the original data stores the data on an Input parameter object called <code>Batch</code>, and the array we're sorting is on <code>Batch.Invoices.Results</code>. The event from the child component is fine, and the appropriate data is confirmed to bubble to the parent component.</p>\n\n<p>The function that's supposed to sort the array looks like this:</p>\n\n<pre><code> public OnInvoiceSortChange({orderValue, orderAscending}){\n        console.log(`Invoice Sorting has been called. Value: ${orderValue} . Ascending? ${orderAscending}`);\n        console.log(`Before:`);\n        console.log(this.BatchViewModel.Invoices.Results.map(x =&gt; x.VendorName));\n        const sortingArray = [...this.BatchViewModel.Invoices.Results];\n        if(orderAscending){\n            const sorted = sortingArray.sort((a, b) =&gt; a[orderValue] &gt; b[orderValue] ? 1 : 0);\n            this.BatchViewModel.Invoices.Results = sorted;\n            console.log('Sorted');\n            console.log(sorted.map(x =&gt; x.VendorName));\n        } else {\n            const sorted = sortingArray.sort((a, b) =&gt; a[orderValue] &lt; b[orderValue] ? 1 : 0);\n            this.BatchViewModel.Invoices.Results = sorted;\n            console.log(sorted.map(x =&gt; x.VendorName));\n        }\n        console.log(`After:`);\n        console.log(this.BatchViewModel.Invoices.Results.map(x =&gt; x.VendorName));\n    }\n</code></pre>\n\n<p>All the console logs are for debugger visibility, and the output is this:\n<a href=\"https://i.stack.imgur.com/Y9pE6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y9pE6.png\" alt=\"console output\"></a></p>\n\n<p>Where in my testing file (non-angular) looks like this:(where <code>data</code> is a direct copy of the array from the Angular app.</p>\n\n<pre><code>const ascendingData = [...data];\nconst descendingData = [...data];\n\nconst sortedDescending = descendingData.sort((a, b) =&gt; a['VendorName'] &lt; b['VendorName']? 0 : 1)\nconst sortedAscending = ascendingData.sort((a, b) =&gt; a['VendorName'] &gt; b['VendorName']? 0 : 1);\n\nconst vendorListAscending = sortedAscending.map(x =&gt; x.VendorName);\nconst vendorListDescending = sortedDescending.map(x =&gt; x.VendorName);\n\nconsole.log(vendorListDescending);\n\nconsole.log(vendorListAscending);\n</code></pre>\n\n<p>and the output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iUVnD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iUVnD.png\" alt=\"Quokka output sample\"></a></p>\n\n<p>So I see that the sorting should work, but it's just not happening in Angular.\nHow can I get the array sorted, and update the DOM as well?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic4"], "comments": [{"owner": {"reputation": 947, "user_id": 6134518, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9a35a3db41374ec0a50a35f549d7cdad?s=128&d=identicon&r=PG&f=1", "display_name": "canpan14", "link": "https://stackoverflow.com/users/6134518/canpan14"}, "edited": false, "score": 1, "creation_date": 1563990202, "post_id": 57188482, "comment_id": 100887104, "body": "Have you tried playing with ngClass or anything of the various angular directives? <a href=\"https://stackoverflow.com/questions/44535515/angular-ngclass-and-click-event-for-toggling-class\" title=\"angular ngclass and click event for toggling class\">stackoverflow.com/questions/44535515/&hellip;</a>"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1563991586, "post_id": 57188482, "comment_id": 100887739, "body": "first two code snippets should work, so when <code>func</code> is called, color should change. Worked fine for me when I tested it. Please provide a demo reproducing the issue."}, {"owner": {"reputation": 2143, "user_id": 11397070, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZvsX6QPbv40/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTpb79ZM_-uLtDAEQM-Fq8R-Xokw/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/11397070/tom"}, "edited": false, "score": 0, "creation_date": 1563992649, "post_id": 57188482, "comment_id": 100888232, "body": "For the first approach you need to use <code>[style.color]=&quot;...&quot;</code>."}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "reply_to_user": {"reputation": 2143, "user_id": 11397070, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZvsX6QPbv40/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTpb79ZM_-uLtDAEQM-Fq8R-Xokw/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/11397070/tom"}, "edited": false, "score": 1, "creation_date": 1563992941, "post_id": 57188482, "comment_id": 100888370, "body": "@Tim, ionic 4 has <code>color = &quot;...&quot;</code>, different from angular. so when ternary operator with variable <code>[color]</code> is correct."}, {"owner": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1563995540, "post_id": 57188482, "comment_id": 100889382, "body": "The first syntax appears to work when <code>ion-button</code> is used a as attribute: <code>&lt;button ion-button ... &#47;&gt;</code>. See <a href=\"https://stackblitz.com/edit/ionic-button-q8vtiv?file=pages/home/home.html\" rel=\"nofollow noreferrer\">this stackblitz</a>."}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "reply_to_user": {"reputation": 57675, "user_id": 1009922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K0eeL.jpg?s=128&g=1", "display_name": "ConnorsFan", "link": "https://stackoverflow.com/users/1009922/connorsfan"}, "edited": false, "score": 0, "creation_date": 1564042592, "post_id": 57188482, "comment_id": 100903100, "body": "@ConnorsFan , that is ionic 3, but syntax has changed in ionic 4 :) it should work just fine if OP is using ionic 4: <a href=\"https://stackblitz.com/edit/angular-ionic-4-rcuycb?file=src/app/home/home.page.html\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-ionic-4-rcuycb?file=src/app/home&zwnj;&#8203;/&hellip;</a> Tried both on this beta version and stable version."}], "answers": [{"tags": [], "owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1563990738, "creation_date": 1563990738, "answer_id": 57188666, "question_id": 57188482, "link": "https://stackoverflow.com/questions/57188482/how-to-change-the-buttons-color-on-an-event/57188666#57188666", "title": "How to change the buttons color on an event?", "body": "<p>You can do so using the <code>ngStyle</code> directive. <a href=\"https://stackblitz.com/edit/angular-unclbq\" rel=\"nofollow noreferrer\">Here's</a> the stackblitz for the same.</p>\n\n<p>.ts</p>\n\n<pre><code>export class AppComponent  {\n  toggle: boolean;\n\n  toggleColor() {\n    this.toggle = !this.toggle;\n  }\n}\n</code></pre>\n\n<p>.html</p>\n\n<pre><code>&lt;button (click)=\"toggleColor()\"\n        [ngStyle]=\"{\n          'background-color' : toggle ? 'yellow' : 'pink'\n        }\"\n&gt;Click me&lt;/button&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1563993562, "post_id": 57189264, "comment_id": 100888636, "body": "how is this any different than the first two snippets OP has presented, also, this is worse, since calling a function in template, which is fired on each change detection."}, {"owner": {"reputation": 12294, "user_id": 156388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6811db2b37e824fdf6c5c4fcdddd4146?s=128&d=identicon&r=PG", "display_name": "rtpHarry", "link": "https://stackoverflow.com/users/156388/rtpharry"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 1, "creation_date": 1564023781, "post_id": 57189264, "comment_id": 100896352, "body": "@ajt_82 - do you think I&#39;ve intentionally tried to do things worse? If I&#39;ve made a mistake be nice."}, {"owner": {"reputation": 12294, "user_id": 156388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6811db2b37e824fdf6c5c4fcdddd4146?s=128&d=identicon&r=PG", "display_name": "rtpHarry", "link": "https://stackoverflow.com/users/156388/rtpharry"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1564023899, "post_id": 57189264, "comment_id": 100896361, "body": "I am interested in what you are saying though. I thought the idea was to move all logic out of the template and only have function calls."}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 1, "creation_date": 1564043378, "post_id": 57189264, "comment_id": 100903571, "body": "Sorry, didn&#39;t mean to sound harsh :) Calling functions in template is strongly discouraged, in worst case can cause what seems to be an infinite loop and crash your browser. It&#39;s not an infinite loop, it&#39;s just change detection happening. See following sample. Type in the input and see console on how <code>getColor</code> is called. Here we have just one input, what if we have lots of things going on in our component, like we usually do, change detection is happening all the time and that function is called over and over. <a href=\"https://stackblitz.com/edit/angular-ionic-4-wzh9eq?file=src/app/home/home.page.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-ionic-4-wzh9eq?file=src/app/home&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 12294, "user_id": 156388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6811db2b37e824fdf6c5c4fcdddd4146?s=128&d=identicon&r=PG", "display_name": "rtpHarry", "link": "https://stackoverflow.com/users/156388/rtpharry"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1564110854, "post_id": 57189264, "comment_id": 100930828, "body": "hmm thanks yes I see it&#39;s making a mess. Guess I have to go back to the drawing board for some best practices theory. So the <code>&lt;ion-button [color]=&quot;done ? &#39;primary&#39; : &#39;danger&#39;&quot;&gt; &lt;&#47;ion-button&gt;</code> is just as bad then? I guess its being run just as many times. You have to set the value elsewhere so its calculated once, and then trust that while the change detection isnt triggered by you updating the value, it is checking it often enough to see when you have."}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1564126600, "post_id": 57189264, "comment_id": 100935364, "body": "<code>&lt;ion-button [color]=&quot;done ? &#39;primary&#39; : &#39;danger&#39;&quot;&gt; &lt;&#47;ion-button&gt;</code> is exactly what you should do, use variables, angular can detect when the <code>done</code> property changes and act accordingly, but angular cannot detect if the value returned from <code>getColor()</code> has changed unless the function is run, thus angular needs to run it. Hopefully a bit clearer now :)"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 1, "creation_date": 1564127323, "post_id": 57189264, "comment_id": 100935712, "body": "This is a really simplified example, but what if the function did something really expensive, like a http-call, it would massively impact the performance, and that would also likely crash the browser, as the http-call would be called over and over. So only use functions in template if you know exactly what you are doing :) This is why angular team warns about impure pipes, since it&#39;s basically the equivalent of calling functions in template, as they are run on each change detection. Also a reason why there isn&#39;t an <code>orderBy</code> or <code>filter</code> pipe inbuilt in angular, like there was in angularjs."}, {"owner": {"reputation": 12294, "user_id": 156388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6811db2b37e824fdf6c5c4fcdddd4146?s=128&d=identicon&r=PG", "display_name": "rtpHarry", "link": "https://stackoverflow.com/users/156388/rtpharry"}, "reply_to_user": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 1, "creation_date": 1564131107, "post_id": 57189264, "comment_id": 100937398, "body": "Thanks. Yes, I did do something expensive a few weeks back a scenario like this and totally melted the browser. I didn&#39;t really understand why at the time. Thanks for your insight :)"}], "tags": [], "owner": {"reputation": 12294, "user_id": 156388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6811db2b37e824fdf6c5c4fcdddd4146?s=128&d=identicon&r=PG", "display_name": "rtpHarry", "link": "https://stackoverflow.com/users/156388/rtpharry"}, "is_accepted": false, "score": 0, "last_activity_date": 1564110658, "last_edit_date": 1564110658, "creation_date": 1563993325, "answer_id": 57189264, "question_id": 57188482, "link": "https://stackoverflow.com/questions/57188482/how-to-change-the-buttons-color-on-an-event/57189264#57189264", "title": "How to change the buttons color on an event?", "body": "<h2>edit: dont do this</h2>\n\n<p>I would do it like this:</p>\n\n<pre><code>&lt;ion-button [color]=\"getColor()\"&gt;&lt;/ion-button&gt;\n</code></pre>\n\n<p>Then write a your code behind that returns the colour you want:</p>\n\n<pre><code>getColor(): string {\n  return this.done ? 'primary' : 'danger';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 8739878, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wx6BhCg5tGA/AAAAAAAAAAI/AAAAAAAAAWw/oS8aE-1Pu8Q/photo.jpg?sz=128", "display_name": "Maharoz Alam Mugdho", "link": "https://stackoverflow.com/users/8739878/maharoz-alam-mugdho"}, "is_accepted": false, "score": 0, "last_activity_date": 1563993899, "creation_date": 1563993899, "answer_id": 57189404, "question_id": 57188482, "link": "https://stackoverflow.com/questions/57188482/how-to-change-the-buttons-color-on-an-event/57189404#57189404", "title": "How to change the buttons color on an event?", "body": "<p>Have a look <a href=\"https://stackblitz.com/edit/angular-bjpxsg\" rel=\"nofollow noreferrer\">Stackblitz</a></p>\n\n<p>.ts File</p>\n\n<pre><code>export class AppComponent  {\n  name = 'Angular';\n  toggle: boolean ;\n  propColor:string ='red' ;\n\n  changeColor() {\n    this.toggle = !this.toggle;\n    if(this.toggle ==true){\n      this.propColor = 'blue'\n\n    }else{\n      this.propColor = 'red'\n    }\n\n    //console.log(this.toggle);\n  }\n}\n</code></pre>\n\n<p>html template</p>\n\n<pre><code>&lt;button (click)=\"changeColor()\"\n        [ngStyle]=\"{\n          'background-color' :  propColor \n        }\"\n&gt;Toggle Color&lt;/button&gt;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 9603357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b23514521b6433c96b07a06f0b45e52f?s=128&d=identicon&r=PG&f=1", "display_name": "CMC", "link": "https://stackoverflow.com/users/9603357/cmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1274, "favorite_count": 0, "accepted_answer_id": 57188666, "answer_count": 3, "score": 1, "last_activity_date": 1564110658, "creation_date": 1563989946, "question_id": 57188482, "link": "https://stackoverflow.com/questions/57188482/how-to-change-the-buttons-color-on-an-event", "title": "How to change the buttons color on an event?", "body": "<p>I want to change my buttons color on event. I tried 2 approaches but both failed. With the first option I even couldnt start the app anymore, with the second option the color just doesnt change.</p>\n\n<p>1.\nHTML</p>\n\n<pre><code>&lt;ion-button [color]=\"done ? 'primary' : 'danger'\"&gt; &lt;/ion-button&gt;\n</code></pre>\n\n<p>TS</p>\n\n<pre><code>public done: boolean = true;\n\nfunc() { \nthis.done = !this.done;\n}\n</code></pre>\n\n<p>2.\nHTML</p>\n\n<pre><code>     &lt;ion-button (click)=\"toggleNamedColor()\"&gt;&lt;/ion-button&gt;\n</code></pre>\n\n<p>TS</p>\n\n<pre><code>public ionicNamedColor: string = 'light';\npublic ionicNamedColor2: string = 'primary';\n\npublic toggleNamedColor(): void {\n  if(this.ionicNamedColor === 'light') { \n    this.ionicNamedColor = 'primary'\n  } else {\n    this.ionicNamedColor = 'light'\n  }\n</code></pre>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 1324, "user_id": 10623752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882b2e83da82c948ea0d0236ad3cf2d0?s=128&d=identicon&r=PG&f=1", "display_name": "abd995", "link": "https://stackoverflow.com/users/10623752/abd995"}, "edited": false, "score": 1, "creation_date": 1563990287, "post_id": 57188468, "comment_id": 100887135, "body": "Can you add the rest of the code. I think the error is not in this line."}, {"owner": {"reputation": 44007, "user_id": 941240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SCC3P.jpg?s=128&g=1", "display_name": "Wiktor Zychla", "link": "https://stackoverflow.com/users/941240/wiktor-zychla"}, "edited": false, "score": 0, "creation_date": 1564040387, "post_id": 57188468, "comment_id": 100901851, "body": "The definition of the <code>logon</code> class would help here. It sounds like there&#39;s something wrong with the definition of its index signature."}], "owner": {"reputation": 43, "user_id": 5603566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71344de835b57e4d9e725cee9bde579c?s=128&d=identicon&r=PG&f=1", "display_name": "\uae40\uc131\ubbfc", "link": "https://stackoverflow.com/users/5603566/%ea%b9%80%ec%84%b1%eb%af%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563989849, "creation_date": 1563989849, "question_id": 57188468, "link": "https://stackoverflow.com/questions/57188468/element-implicitly-has-an-any-type-because-expression-of-type-any-cant-be-u", "title": "Element implicitly has an &#39;any&#39; type because expression of type &#39;any&#39; can&#39;t be used to index type &#39;login&#39;", "body": "<pre class=\"lang-js prettyprint-override\"><code>  @action\n  onChange = (e: any) =&gt; {\n    this[e.target.id] = e.target.value;\n  };\n</code></pre>\n\n<p>this code gives error of typescript. how can I solve it?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>Element implicitly has an 'any' type because expression of type 'any' can't be used to index type 'login'\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "types"], "comments": [{"owner": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 0, "creation_date": 1563989157, "post_id": 57188204, "comment_id": 100886621, "body": "Is the MyService class exported in the MyService.ts or whereever it is defined?"}, {"owner": {"reputation": 2380, "user_id": 1934798, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9359fd288e3f55b85a64d547279f24d3?s=128&d=identicon&r=PG", "display_name": "pranavjindal999", "link": "https://stackoverflow.com/users/1934798/pranavjindal999"}, "reply_to_user": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 0, "creation_date": 1563989519, "post_id": 57188204, "comment_id": 100886806, "body": "yes it is an exported member of <code>&#39;.&#47;path&#47;to&#47;file&#39;</code>"}, {"owner": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 0, "creation_date": 1563990313, "post_id": 57188204, "comment_id": 100887150, "body": "This is a problem with mixing ambient module declarations with import statements. You can find more discussion and a potential solution with TS 2.9 <a href=\"https://stackoverflow.com/a/51114250/5416902\">here</a>"}, {"owner": {"reputation": 2380, "user_id": 1934798, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9359fd288e3f55b85a64d547279f24d3?s=128&d=identicon&r=PG", "display_name": "pranavjindal999", "link": "https://stackoverflow.com/users/1934798/pranavjindal999"}, "reply_to_user": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 2, "creation_date": 1563990700, "post_id": 57188204, "comment_id": 100887315, "body": "thanks man. This is exactly what I was facing and seems like this is how typescript is by design and I&#39;m not doing anything wrong here."}, {"owner": {"reputation": 119, "user_id": 5416902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62890f7138b5bff39a91a82294cd3590?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Saxena", "link": "https://stackoverflow.com/users/5416902/piyush-saxena"}, "edited": false, "score": 0, "creation_date": 1563991307, "post_id": 57188204, "comment_id": 100887595, "body": "Yeah no problem!"}], "owner": {"reputation": 2380, "user_id": 1934798, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9359fd288e3f55b85a64d547279f24d3?s=128&d=identicon&r=PG", "display_name": "pranavjindal999", "link": "https://stackoverflow.com/users/1934798/pranavjindal999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 762, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1563989068, "creation_date": 1563988749, "last_edit_date": 1563989068, "question_id": 57188204, "link": "https://stackoverflow.com/questions/57188204/import-statements-in-d-ts-file-along-with-declare-module-does-not-work", "title": "import statements in .d.ts file along with declare module does not work", "body": "<hr>\n\n<ul>\n<li><strong>What works =></strong></li>\n</ul>\n\n<hr>\n\n<p>I have a <code>index.d.ts</code> file in my app root where I have global things declared for example global modules.</p>\n\n<p>So my <code>index.d.ts</code> looks like following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>declare module 'moment';\n</code></pre>\n\n<p>and I can import <code>moment</code> in any <code>.ts</code> file without any error.</p>\n\n<hr>\n\n<ul>\n<li><strong>Where problem arises =></strong></li>\n</ul>\n\n<hr>\n\n<p><strong>Now problem arises when I import something in my <code>index.d.ts</code> file to make more declarations. Lets say my as follows:</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { MyService } from './path/to/file';   //line#1\n\ndeclare module 'moment';\n\nexport interface SomeInterface {\n name: string;\n salary: number;\n myService: MyService\n}\n</code></pre>\n\n<p>Now any imports in my <code>.ts</code> file that were importing <code>moment</code> are erroneous and throw <code>Cannot find module 'moment'.ts(2307)</code></p>\n\n<p>As soon as I comment <code>line#1</code>, the <code>moment</code> imports start working again. </p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"comments": [{"owner": {"reputation": 1535, "user_id": 610610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db1aeb72c95a77c259849d455c16776a?s=128&d=identicon&r=PG", "display_name": "Itanex", "link": "https://stackoverflow.com/users/610610/itanex"}, "edited": false, "score": 0, "creation_date": 1563989183, "post_id": 57188248, "comment_id": 100886635, "body": "Thanks martin, I just found that page and was about to create my own answer when I saw yours come in. Thanks! This was a doozy. Also, I prefer not to squelch any kind of code linting/syntax issues and instead address the issue. Unless there is no other solution. :)"}], "tags": [], "owner": {"reputation": 75411, "user_id": 310726, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cc38ee5e151f1efb6470740c66262058?s=128&d=identicon&r=PG", "display_name": "martin", "link": "https://stackoverflow.com/users/310726/martin"}, "is_accepted": true, "score": 6, "last_activity_date": 1563988931, "creation_date": 1563988931, "answer_id": 57188248, "question_id": 57188016, "link": "https://stackoverflow.com/questions/57188016/combinelatest-throws-ts2349-with-6-or-more-streams/57188248#57188248", "title": "combineLatest throws TS2349 with 6 or more streams", "body": "<p>This is true, maximum number of source Observables is 6, see <a href=\"https://github.com/ReactiveX/rxjs/blob/master/src/internal/observable/combineLatest.ts#L68\" rel=\"noreferrer\">https://github.com/ReactiveX/rxjs/blob/master/src/internal/observable/combineLatest.ts#L68</a>. </p>\n\n<p>However, The only reason is that it's unlikely to have so many inputs so there are no function overloads defined for that. This still doesn't restrict you from combining multiple <code>combineLatest</code>s:</p>\n\n<pre><code>combineLatest([\n  combineLatest([s1, s2, ...]),\n  combineLatest([s7, s8, ...]),\n]).pipe(\n  map(([results1, results2]) =&gt; [...results1, ...results2]),\n);\n</code></pre>\n\n<p>Btw, this is a TypeScript error that you should be able to suppress with <code>@ts-ignore</code> (even though you might miss other TypeScript errors later):</p>\n\n<pre><code>// @ts-ignore\nplans$ = combineLatest([\n  this.planService.getPlans(),\n  this.databaseService.getSpecieses(),\n  ...\n  this.databaseService.getAnalysises(),\n])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 2029378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf7cf02b377cab850e8089c27a896b?s=128&d=identicon&r=PG", "display_name": "Balu", "link": "https://stackoverflow.com/users/2029378/balu"}, "is_accepted": false, "score": 0, "last_activity_date": 1605195538, "last_edit_date": 1605195538, "creation_date": 1605174991, "answer_id": 64801685, "question_id": 57188016, "link": "https://stackoverflow.com/questions/57188016/combinelatest-throws-ts2349-with-6-or-more-streams/64801685#64801685", "title": "combineLatest throws TS2349 with 6 or more streams", "body": "<p>The accepted answer might have been correct in the past, but as of now the pipeable <code>combineLatest</code> can combine more than 6 source, although you have to manually typecast it, please see: <a href=\"https://github.com/ReactiveX/rxjs/issues/3601\" rel=\"nofollow noreferrer\">issue 3601</a></p>\n"}, {"tags": [], "owner": {"reputation": 2054, "user_id": 3186941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66556df6867b075375d3b847cc3443e4?s=128&d=identicon&r=PG&f=1", "display_name": "Moshezauros", "link": "https://stackoverflow.com/users/3186941/moshezauros"}, "is_accepted": false, "score": 0, "last_activity_date": 1611038862, "creation_date": 1611038862, "answer_id": 65786657, "question_id": 57188016, "link": "https://stackoverflow.com/questions/57188016/combinelatest-throws-ts2349-with-6-or-more-streams/65786657#65786657", "title": "combineLatest throws TS2349 with 6 or more streams", "body": "<p>Just for the sake of completeness (and having all the answer available on stackoverflow, and not in some link), the solution from the issue Balu linked is simply declaring the types each observable will emit:</p>\n<pre><code>combineLatest&lt;any&gt;(a$, b$, c$, d$, e$, f$).pipe(\n  // Manually typed arguments below :(\n  map(([a, b, c, d, e, f]: [string, number, string, Foo, Bar, Baz]) =&gt; doStuff(a, b, c, d, e, f))\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114, "user_id": 6483146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mi6hs.jpg?s=128&g=1", "display_name": "Oleg Postoev", "link": "https://stackoverflow.com/users/6483146/oleg-postoev"}, "is_accepted": false, "score": 0, "last_activity_date": 1611319012, "creation_date": 1611319012, "answer_id": 65845337, "question_id": 57188016, "link": "https://stackoverflow.com/questions/57188016/combinelatest-throws-ts2349-with-6-or-more-streams/65845337#65845337", "title": "combineLatest throws TS2349 with 6 or more streams", "body": "<p>This way losing types:</p>\n<pre><code>combineLatest([\n  combineLatest([s1, s2, ...]),\n  combineLatest([s7, s8, ...]),\n]).pipe(\n  map(([results1, results2]) =&gt; [...results1, ...results2]),\n);\n</code></pre>\n<p>I didnt found the way to save it except this:</p>\n<pre><code>combineLatest([\n  combineLatest([A, B, C]),\n  combineLatest([D, E, F]),\n  combineLatest([G]),\n]).pipe(\n  map(([r1, r2, r3]) =&gt; {\n    return [...r1, ...r2, ...r3] as [\n      typeof r1[0],\n      typeof r1[1],\n      typeof r1[2],\n      typeof r2[0],\n      typeof r2[1],\n      typeof r2[2],\n      typeof r3[0],\n    ];\n  }))\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 610610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db1aeb72c95a77c259849d455c16776a?s=128&d=identicon&r=PG", "display_name": "Itanex", "link": "https://stackoverflow.com/users/610610/itanex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 1, "accepted_answer_id": 57188248, "answer_count": 4, "score": 7, "last_activity_date": 1611319012, "creation_date": 1563987911, "question_id": 57188016, "link": "https://stackoverflow.com/questions/57188016/combinelatest-throws-ts2349-with-6-or-more-streams", "title": "combineLatest throws TS2349 with 6 or more streams", "body": "<p>This is my first foray into RxJS, so if there is a better solution I am all for it. My goal is to collect related objects and join them (essentially a sql left join) in code. This stems from me using an Angular In Memory API object to serve as the DB until such time it is established.</p>\n\n<p>When I combine Plans, Specieses, Codebooks, UpstreamModalities, and TissueProcessions this code works as expected. When I include the Probes, Imaging, and Analysises streams I get a headache of a error blob to read. Essentially every line in the array.map function throws the TS2349 error, even the ones that worked before adding the remaining three sources.</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { Plan } from '../plan';\nimport { PlanService } from '../plan.service';\nimport { DatabaseService } from 'src/app/serivces/database.service';\nimport { combineLatest } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-plans-list',\n  templateUrl: './plans-list.component.html',\n  styleUrls: ['./plans-list.component.scss']\n})\nexport class PlansListComponent implements OnInit {\n  plans$ = combineLatest([\n    this.planService.getPlans(),\n    this.databaseService.getSpecieses(),\n    this.databaseService.getCodebooks(),\n    this.databaseService.getUpstreamModalities(),\n    this.databaseService.getTissueProcessions(),\n    this.databaseService.getProbes(),\n    this.databaseService.getImagings(),\n    this.databaseService.getAnalysises(),\n  ])\n    .pipe(\n      tap(x =&gt; console.log(`Plans.join lookup tables: `, x)),\n      map(\n        // destructuring\n        ([plans, \n          specieses, \n          codebooks, \n          modalities, \n          tissues,\n          probes,\n          imagings, \n          analysises\n        ]) =&gt;\n          plans.map(plan =&gt;\n            ({\n              ...plan,\n              species: specieses.find(x =&gt; x.id === plan.speciesId).shortName,\n              codebook: codebooks.find(x =&gt; x.id === plan.codebookId).codebookName,\n              upstreamModality: modalities.find(x =&gt; x.id === plan.upstreamModalityId).SOPName,\n              tissueProcession: tissues.find(x =&gt; x.id === plan.tissueProcessionId).SOPName,\n              probe: probes.find(x =&gt; x.id === plan.probeId).SOPName,\n              imaging: imagings.find(x =&gt; x.id === plan.imagingId).SOPName,\n              analysis: analysises.find(x =&gt; x.id === plan.analysisId).SOPName,\n            }) as Plan\n          )\n      )\n    )\n\n\n  constructor(\n    private planService: PlanService,\n    private databaseService: DatabaseService\n  ) { }\n\n  ngOnInit() {  }\n}\n</code></pre>\n\n<p>Is this TS validation just choking up on the volume of streams? Since the code still compiles and executes as expected.</p>\n\n<pre><code>ERROR in src/app/plans/plans-list/plans-list.component.ts(40,11): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '(&lt;U&gt;(callbackfn: (value: Plan, index: number, array: Plan[]) =&gt; U, thisArg?: any) =&gt; U[]) | (&lt;U&gt;(callbackfn: (value: StandardOperatingProcess, index: number, array: StandardOperatingProcess[]) =&gt; U, thisArg?: any) =&gt; U[]) | (&lt;U&gt;(callbackfn: (value: Species, index: number, array: Species[]) =&gt; U, thisArg?: any) =&gt; U[...' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(43,24): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(44,25): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(45,33): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(46,33): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(47,22): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(48,24): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n    src/app/plans/plans-list/plans-list.component.ts(49,25): error TS2349: Cannot invoke an expression whose type lacks a call signature. Type '{ &lt;S extends Plan&gt;(predicate: (this: void, value: Plan, index: number, obj: Plan[]) =&gt; value is S, thisArg?: any): S; (predicate: (value: Plan, index: number, obj: Plan[]) =&gt; boolean, thisArg?: any): Plan; } | { ...; } | { ...; } | { ...; }' has no compatible call signatures.\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1563988091, "post_id": 57187939, "comment_id": 100886129, "body": "This test doesn&#39;t make any sense to me. The front end doesn&#39;t control what&#39;s returned (unless you&#39;re using GraphQL or something)--the front end cannot test all permutations of what an API it doesn&#39;t control returns. TypeScript is (roughly) compile-time type checking, although IIRC there are run-time options. Threads like <a href=\"https://github.com/microsoft/TypeScript/issues/1573\" rel=\"nofollow noreferrer\">github.com/microsoft/TypeScript/issues/1573</a> may help explain in more detail."}, {"owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1563988617, "post_id": 57187939, "comment_id": 100886385, "body": "@DaveNewton the idea of the test is that it will catch changes to the model. So if someone on the backend team changes person.name to person.firstName my test will catch this. I will be passing my own data to my tests. So basically the backend changes name to firstName then someone on the frontend changes to person model to person.firstName and that may or may not be the correct thing to do"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1563988671, "post_id": 57187939, "comment_id": 100886412, "body": "Well your &quot;backend&quot; <code>data</code> has type <code>any</code>, of course that won&#39;t be typechecked. But it sounds like you are asking for a runtime typecheck, which TypeScript doesn&#39;t do anyway?"}, {"owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1563988736, "post_id": 57187939, "comment_id": 100886438, "body": "@Bergi yes a runtime check, is this possible?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1563991896, "post_id": 57187939, "comment_id": 100887896, "body": "So this is an integration test, not a unit test. You can look in to run-time type checking extensions (I know nothing about them), otherwise you&#39;ll just need to validate JS as usual, which it&#39;d seem like you&#39;d need some of anyway."}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 2957291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nUUus.jpg?s=128&g=1", "display_name": "saulotoledo", "link": "https://stackoverflow.com/users/2957291/saulotoledo"}, "is_accepted": false, "score": 0, "last_activity_date": 1563989447, "creation_date": 1563989447, "answer_id": 57188373, "question_id": 57187939, "link": "https://stackoverflow.com/questions/57187939/validate-construction-of-typescript-model/57188373#57188373", "title": "Validate construction of typescript model", "body": "<p>TypeScript is transpiled to JavaScript. Such verifications will not work at runtime.\nYou need to implement that manually. I believe you are looking for something like <a href=\"https://validatejs.org/\" rel=\"nofollow noreferrer\">validate.js</a>.</p>\n"}], "owner": {"reputation": 540, "user_id": 5077134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed246f00900f7fe7d66d9a5fb341df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Keane", "link": "https://stackoverflow.com/users/5077134/dave-keane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563989447, "creation_date": 1563987551, "last_edit_date": 1563989155, "question_id": 57187939, "link": "https://stackoverflow.com/questions/57187939/validate-construction-of-typescript-model", "title": "Validate construction of typescript model", "body": "<p>So I have a person model for example</p>\n\n<pre><code>export class Person {\n\n    name: string;\n    id: Number;\n}\n</code></pre>\n\n<p>I want to make sure that name and id are the only fields to be defined</p>\n\n<p>So when I construct the Object like the following(METHOD 1)</p>\n\n<pre><code>let person = new Person({name: 'john', id:2, invalidField: 'notAllowed'})\n</code></pre>\n\n<p>Typescript does not allow this above</p>\n\n<p>However if I get the data from the backend it will allow it to construct the object like the following(METHOD 2)</p>\n\n<pre><code>  let data: any = {name: 'john', id:2, invalidField: 'notAllowed'}// resp from backend\n  let person = new Person(data)\n</code></pre>\n\n<p>Typescript allows this above</p>\n\n<p>Is there anyway to make sure that constructing the object via method two gets invalidated?</p>\n\n<p>The reason I want to able to do this is so I can create unit tests to make sure that data from the backend is in the format that I expect</p>\n\n<p>Not sure if this is clear I'm fairly new to typescript\nAny questions please add a comments</p>\n\n<p>Maybe some run-time check in the constructor?</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "edited": false, "score": 0, "creation_date": 1563990171, "post_id": 57188470, "comment_id": 100887092, "body": "I see that makes a lot of sense, thank you for the explanation. What&#39;s the fix for this then? If I do want to keep the two separated, i.e. use <code>hasRealm</code> in the next line, how should I make TS compile this?"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "edited": false, "score": 0, "creation_date": 1563991091, "post_id": 57188470, "comment_id": 100887509, "body": "@Kousha I&#39;ve added in a couple options"}], "tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": true, "score": 3, "last_activity_date": 1563991081, "last_edit_date": 1563991081, "creation_date": 1563989860, "answer_id": 57188470, "question_id": 57187917, "link": "https://stackoverflow.com/questions/57187917/typescript-object-possibly-undefined-if-check-is-not-performed-on-the-same-line/57188470#57188470", "title": "TypeScript Object Possibly undefined if check is not performed on the same line", "body": "<p>Typescript does some flow control analysis to narrow down types, but your example 2 isn't written in a way that would allow it. In your first case, you have this:</p>\n\n<pre><code>const subDomain = realm &amp;&amp; ServiceClient.realms.includes(realm) ? `.${realm.toLowerCase()}` : '';\n</code></pre>\n\n<p>When this line starts running, <code>realm</code> might be undefined. Typescript analyses the code, and since that condition includes a check on <code>realm</code>, it deduces that every possible way of getting into <code>.${realm.toLowerCase()}</code> will have excluded <code>realm</code> from being undefined, and therefore its type has been narrowed. </p>\n\n<p>But then there's a line like this:</p>\n\n<pre><code>const subDomain = hasRealm ? `.${realm.toLowerCase()}` : '';\n</code></pre>\n\n<p>When this line of code starts running, again <code>realm</code> might be undefined. But this time, the only check is of a boolean which, from typescript's perspective, is unrelated to <code>realm</code>. Depending on how <code>hasRealm</code> was produced, there are ways to get into <code>.${realm.toLowerCase()}</code> with realm still undefined. You know that's impossible because you're looking at the previous line, but typescript doesn't walk through the history of how hasRealm came to be and make deductions about other types based on that.</p>\n\n<hr>\n\n<p>With regard to how to fix this, one option is to insist to typescript that you know the types better than it does, with a <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertion</a>:</p>\n\n<pre><code>const realm = process.env.REALM;\nconst hasRealm = realm &amp;&amp; ServiceClient.realms.includes(realm);\nconst subDomain = hasRealm ? `.${(realm as string).toLowerCase()}` : '';\n</code></pre>\n\n<p>Be aware that this removes some typesafety, because you're telling typescript to ignore what it has figured out and trust you instead. So if you made a mistake, it will trust in your mistake.</p>\n\n<p>Another option is to rearrange the way you're doing things so that the lines don't begin with the value being unknown. For example, if the check is done in the condition of an <code>if</code> block, then typescript can narrow the types inside the block:</p>\n\n<pre><code>const realm = process.env.REALM;\nlet hasRealm, subDomain;\nif (realm &amp;&amp; ServiceClient.realms.includes(realm)) {\n  hasRealm = true;\n  subDomain = `.${realm.toLowerCase()}`\n} else {\n  hasRealm = false;\n  subDomain = '';\n}\n</code></pre>\n\n<p>It's more verbose, but safer in terms of types.</p>\n"}], "owner": {"reputation": 21939, "user_id": 834045, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vpxna.jpg?s=128&g=1", "display_name": "Kousha", "link": "https://stackoverflow.com/users/834045/kousha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57188470, "answer_count": 1, "score": 0, "last_activity_date": 1563991081, "creation_date": 1563987467, "question_id": 57187917, "link": "https://stackoverflow.com/questions/57187917/typescript-object-possibly-undefined-if-check-is-not-performed-on-the-same-line", "title": "TypeScript Object Possibly undefined if check is not performed on the same line", "body": "<p>Take a look at these two examples:</p>\n\n<pre><code>// Example 1\nconst realm = process.env.REALM;\nconst hasRealm = realm &amp;&amp; ServiceClient.realms.includes(realm);\nconst subDomain = realm &amp;&amp; ServiceClient.realms.includes(realm) ? `.${realm.toLowerCase()}` : '';\n\n// Example 2\nconst realm = process.env.REALM;\nconst hasRealm = realm &amp;&amp; ServiceClient.realms.includes(realm);\nconst subDomain = hasRealm ? `.${realm.toLowerCase()}` : '';\n</code></pre>\n\n<p>In the case of Example1, everything is fine. In the case of Example2, I get TS error <code>TS2532: Object is possibly 'undefined'.</code>.</p>\n\n<p>Is this a bug? </p>\n"}, {"tags": ["javascript", "typescript", "visual-studio-code", "vscode-extensions"], "comments": [{"owner": {"reputation": 24360, "user_id": 2631715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25382df099e692f409929ce3bf4e9961?s=128&d=identicon&r=PG", "display_name": "Gama11", "link": "https://stackoverflow.com/users/2631715/gama11"}, "edited": false, "score": 0, "creation_date": 1563987148, "post_id": 57187525, "comment_id": 100885752, "body": "The sample you linked only ever creates a single collection (which should be enough)."}, {"owner": {"reputation": 425, "user_id": 2455162, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/27L47.jpg?s=128&g=1", "display_name": "greatTeacherOnizuka", "link": "https://stackoverflow.com/users/2455162/greatteacheronizuka"}, "reply_to_user": {"reputation": 24360, "user_id": 2631715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25382df099e692f409929ce3bf4e9961?s=128&d=identicon&r=PG", "display_name": "Gama11", "link": "https://stackoverflow.com/users/2631715/gama11"}, "edited": false, "score": 0, "creation_date": 1563987969, "post_id": 57187525, "comment_id": 100886079, "body": "@Gama11 I do have a button that calls the command multiple times though and errors are stacking. Whats the way to clear those errors before running a new istance?"}, {"owner": {"reputation": 24360, "user_id": 2631715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25382df099e692f409929ce3bf4e9961?s=128&d=identicon&r=PG", "display_name": "Gama11", "link": "https://stackoverflow.com/users/2631715/gama11"}, "edited": false, "score": 0, "creation_date": 1563988391, "post_id": 57187525, "comment_id": 100886284, "body": "I don&#39;t see why you&#39;d need to create a new instance just because the command is called multiple times. And yeah, <code>clear()</code> is how you clear it, are you sure you&#39;re calling it on the correct instance?"}, {"owner": {"reputation": 425, "user_id": 2455162, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/27L47.jpg?s=128&g=1", "display_name": "greatTeacherOnizuka", "link": "https://stackoverflow.com/users/2455162/greatteacheronizuka"}, "reply_to_user": {"reputation": 24360, "user_id": 2631715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25382df099e692f409929ce3bf4e9961?s=128&d=identicon&r=PG", "display_name": "Gama11", "link": "https://stackoverflow.com/users/2631715/gama11"}, "edited": false, "score": 0, "creation_date": 1563996448, "post_id": 57187525, "comment_id": 100889814, "body": "@Gama11 I think I might understand whats happening. If I re-run the command it creates a new istance and <code>collections.clear()</code> does not work. As a test I added a timeout of 15 secs and run that clear command in the same istance and the issues do go away..."}, {"owner": {"reputation": 425, "user_id": 2455162, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/27L47.jpg?s=128&g=1", "display_name": "greatTeacherOnizuka", "link": "https://stackoverflow.com/users/2455162/greatteacheronizuka"}, "reply_to_user": {"reputation": 24360, "user_id": 2631715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25382df099e692f409929ce3bf4e9961?s=128&d=identicon&r=PG", "display_name": "Gama11", "link": "https://stackoverflow.com/users/2631715/gama11"}, "edited": false, "score": 0, "creation_date": 1563996500, "post_id": 57187525, "comment_id": 100889834, "body": "Any tip on how to clear it everytime a new instance is run?"}, {"owner": {"reputation": 24360, "user_id": 2631715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25382df099e692f409929ce3bf4e9961?s=128&d=identicon&r=PG", "display_name": "Gama11", "link": "https://stackoverflow.com/users/2631715/gama11"}, "edited": false, "score": 0, "creation_date": 1563999042, "post_id": 57187525, "comment_id": 100890917, "body": "Just don&#39;t create a new instance, reuse the old one."}], "owner": {"reputation": 425, "user_id": 2455162, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/27L47.jpg?s=128&g=1", "display_name": "greatTeacherOnizuka", "link": "https://stackoverflow.com/users/2455162/greatteacheronizuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563985776, "creation_date": 1563985776, "question_id": 57187525, "link": "https://stackoverflow.com/questions/57187525/vscode-extension-clean-diagnostic-collection-on-second-run", "title": "VScode extension clean diagnostic collection on second run", "body": "<p>I am creating a <code>diagnosticCollection</code> on a vscode extension following this \n<a href=\"https://github.com/microsoft/vscode-extension-samples/blob/master/diagnostic-related-information-sample/src/extension.ts\" rel=\"nofollow noreferrer\">sample:</a></p>\n\n<p>It works but if I run the same command twice on the same file it creates a \"duplicate\" diagnostics issues list in the problems terminal window.</p>\n\n<p>What is the best way to clear that terminal window problems? I have tried to run <code>collections.clear()</code> which I thought would do the job but it did not work.</p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 1190, "user_id": 6853068, "user_type": "registered", "profile_image": "https://graph.facebook.com/1234074719957575/picture?type=large", "display_name": "Akshay Rana", "link": "https://stackoverflow.com/users/6853068/akshay-rana"}, "edited": false, "score": 0, "creation_date": 1563984474, "post_id": 57187108, "comment_id": 100884381, "body": "what&#39;s your rxjs verison?"}, {"owner": {"reputation": 3562, "user_id": 2328891, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/HgZFa.jpg?s=128&g=1", "display_name": "Shohel", "link": "https://stackoverflow.com/users/2328891/shohel"}, "reply_to_user": {"reputation": 1190, "user_id": 6853068, "user_type": "registered", "profile_image": "https://graph.facebook.com/1234074719957575/picture?type=large", "display_name": "Akshay Rana", "link": "https://stackoverflow.com/users/6853068/akshay-rana"}, "edited": false, "score": 0, "creation_date": 1563984556, "post_id": 57187108, "comment_id": 100884432, "body": "@AkshayRana, &quot;rxjs&quot;: &quot;~6.4.0&quot;,"}, {"owner": {"reputation": 1190, "user_id": 6853068, "user_type": "registered", "profile_image": "https://graph.facebook.com/1234074719957575/picture?type=large", "display_name": "Akshay Rana", "link": "https://stackoverflow.com/users/6853068/akshay-rana"}, "edited": false, "score": 0, "creation_date": 1563984734, "post_id": 57187108, "comment_id": 100884514, "body": "try concat(obs1, obs2) That&#39;s how it is in the docs. <a href=\"https://www.learnrxjs.io/operators/combination/concat.html\" rel=\"nofollow noreferrer\">learnrxjs.io/operators/combination/concat.html</a>"}, {"owner": {"reputation": 1846, "user_id": 1608690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d94e12f15d54961d8fdb679100346e?s=128&d=identicon&r=PG", "display_name": "Kelvin Lai", "link": "https://stackoverflow.com/users/1608690/kelvin-lai"}, "edited": false, "score": 1, "creation_date": 1563984905, "post_id": 57187108, "comment_id": 100884597, "body": "might be easier to store and push to the actual array <code>SimilarIdea[]</code> instead of <code>Observable&lt;SimilarIdea[]&gt;</code> :)"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1563991427, "post_id": 57187108, "comment_id": 100887657, "body": "Unrelated, but you don&#39;t need to use parentheses with a pipe. <code>let similarIdea of similarIdeasObservable | async</code>"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1563991734, "post_id": 57187108, "comment_id": 100887816, "body": "Can you please update the question to show how the first observable is assigned to <code>similarIdeasObservable</code>? How is it assigned an observable?"}, {"owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "edited": false, "score": 0, "creation_date": 1564029200, "post_id": 57187108, "comment_id": 100897407, "body": "what does <code>getSimilarIdeas</code> return ? array of observables ?"}, {"owner": {"reputation": 3562, "user_id": 2328891, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/HgZFa.jpg?s=128&g=1", "display_name": "Shohel", "link": "https://stackoverflow.com/users/2328891/shohel"}, "edited": false, "score": 0, "creation_date": 1564033642, "post_id": 57187108, "comment_id": 100898776, "body": "both are observables"}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 6853068, "user_type": "registered", "profile_image": "https://graph.facebook.com/1234074719957575/picture?type=large", "display_name": "Akshay Rana", "link": "https://stackoverflow.com/users/6853068/akshay-rana"}, "is_accepted": false, "score": 0, "last_activity_date": 1563985085, "creation_date": 1563985085, "answer_id": 57187330, "question_id": 57187108, "link": "https://stackoverflow.com/questions/57187108/push-to-observable-in-angular/57187330#57187330", "title": "Push to observable in angular", "body": "<p>For rxjs 6+ version,</p>\n\n<p>concat works like : </p>\n\n<pre><code>import { concat } from 'rxjs';\nconcat(observable1, observable2, observable3 ...);\n</code></pre>\n\n<p>It should be like:</p>\n\n<pre><code>concat(\n    this.similarIdeasObservable,\n    this.ideaService.getSimilarIdeas(this.idea).pipe(...)\n)\n</code></pre>\n\n<p>Reference: <a href=\"https://www.learnrxjs.io/operators/combination/concat.html\" rel=\"nofollow noreferrer\">Documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "is_accepted": true, "score": 1, "last_activity_date": 1564036848, "last_edit_date": 1564036848, "creation_date": 1564029530, "answer_id": 57194414, "question_id": 57187108, "link": "https://stackoverflow.com/questions/57187108/push-to-observable-in-angular/57194414#57194414", "title": "Push to observable in angular", "body": "<p>Use <code>combineLatest</code> operator in <code>onScrollDown()</code> function instead:</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-6dmtpf\" rel=\"nofollow noreferrer\">A working stackblitz example</a> for you:</p>\n\n<pre><code>this.similarIdeasObservable = combineLatest(this.similarIdeasObservable,this.ideaService.getSimilarIdeas(this.idea).pipe(...))\n        //Merge 2 array returned from two above Observables\n        .pipe(map(([first$, second$]) =&gt; [...first$, ...second$ ]) \n\nthis.similarIdeasObservable.subscribe(data =&gt; {console.log(data);});\n</code></pre>\n\n<p>But i notice there might be performance issue if your <code>onScroll()</code> is call several times in your app, you should unsubscribe to previous subscribe when it is called again:</p>\n\n<pre><code>onScrollDown(): void {\n if(this.scrollDownSubscriptions) {\n    this.scrollDownSubscription.unsubscribe();\n }\n ........\n this.scrollDownSubscription = this.similarIdeasObservable.subscribe( ...);\n}\n</code></pre>\n"}], "owner": {"reputation": 3562, "user_id": 2328891, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/HgZFa.jpg?s=128&g=1", "display_name": "Shohel", "link": "https://stackoverflow.com/users/2328891/shohel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57194414, "answer_count": 2, "score": 0, "last_activity_date": 1564036848, "creation_date": 1563984275, "last_edit_date": 1564028753, "question_id": 57187108, "link": "https://stackoverflow.com/questions/57187108/push-to-observable-in-angular", "title": "Push to observable in angular", "body": "<p>I have Observable array which is <code>similarIdeasObservable: Observable&lt;SimilarIdea[]&gt;;</code> and containing 10 rows and binded to html\n<code>\n&lt;article class=\"list-group-item\" *ngFor=\"let similarIdea of (similarIdeasObservable | async)\"&gt;\n</code>\nNow I want to push further 10 rows into <code>similarIdeasObservable: Observable&lt;SimilarIdea[]&gt;;</code> by using the following method</p>\n\n<pre><code>  onScrollDown(): void {\n    this.loading = true;\n    if (this.idea !== null) {\n      this.loading = true;\n      concat(this.similarIdeasObservable, this.ideaService.getSimilarIdeas(this.idea).pipe(\n        concatMap(i =&gt; i),\n        toArray(),\n        catchError(error =&gt; {\n          this.loading = false;\n          return throwError(error);\n        }),\n        finalize(() =&gt; {\n          this.loading = false;\n        })\n      )).subscribe(data =&gt; {\n        console.log(data);\n      });\n    }\n  }\n</code></pre>\n\n<p>First 10 ideas are loaded the following code</p>\n\n<pre><code>this.similarIdeasObservable = this.ideaService.getSimilarIdeas(idea).pipe(\n            concatMap(i =&gt; i),\n            startWith(idea.toSimilarIdea()),\n            toArray(),\n            catchError(error =&gt; {\n              this.loading = false;\n              return throwError(error);\n            }),\n            finalize( () =&gt; {\n              this.loading = false;\n            })\n          );\n</code></pre>\n\n<p>The above method did not work. Could you solve the problem that how can I push into Observable next time?</p>\n"}, {"tags": ["angular", "typescript", "http", "parameters"], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 6853068, "user_type": "registered", "profile_image": "https://graph.facebook.com/1234074719957575/picture?type=large", "display_name": "Akshay Rana", "link": "https://stackoverflow.com/users/6853068/akshay-rana"}, "is_accepted": true, "score": 1, "last_activity_date": 1563984301, "creation_date": 1563984301, "answer_id": 57187118, "question_id": 57186987, "link": "https://stackoverflow.com/questions/57186987/appending-to-httpparams-adds-to-map-property-in-one-method-but-not-the-other/57187118#57187118", "title": "Appending to HttpParams adds to map property in one method, but not the other", "body": "<p>You are not using params in get call that's why:</p>\n\n<p>It's </p>\n\n<pre><code>return this.http.get&lt;LogEntry[]&gt;(apiUrl, { headers })\n</code></pre>\n\n<p>Instead of :</p>\n\n<pre><code>return this.http.get&lt;LogEntry[]&gt;(apiUrl, { headers, params })\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 5158164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yuLjq.jpg?s=128&g=1", "display_name": "heatherblairs", "link": "https://stackoverflow.com/users/5158164/heatherblairs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57187118, "answer_count": 1, "score": 0, "last_activity_date": 1563984301, "creation_date": 1563983884, "question_id": 57186987, "link": "https://stackoverflow.com/questions/57186987/appending-to-httpparams-adds-to-map-property-in-one-method-but-not-the-other", "title": "Appending to HttpParams adds to map property in one method, but not the other", "body": "<p>I'm making a request with some optional HttpParams by appending them. In one method inside of my service, this adds the params to the <code>map</code> property. In the neighboring method within the same service, after appending <code>map</code> is still null.</p>\n\n<p>I create the HttpParams, then append what I need.</p>\n\n<p>The entire working method looks like this.</p>\n\n<pre><code>    const user = this.sessionHelperService.checkUser();\n    const headers = this.sessionHelperService.getAuthHeader();\n    const apiUrl = `${this.LAB_URL_CHUNK}/${user.lab}/${this.LOG_BOOK_INSTRUMENTS_URL_CHUNK}/`;\n    let params = new HttpParams();\n    pageIndex++;\n    params = params.append('page', pageIndex.toString());\n    params = params.append('page_size', pageSize.toString());\n    params = params.append('paginate', 'true');\n    if (locationId) {\n      params = params.append('location_id', locationId.toString());\n    }\n\n    return this.http.get&lt;LogBookInstruments[]&gt;(apiUrl, { headers, params })\n      .pipe(\n        catchError((res: HttpResponse&lt;any&gt;) =&gt; observableThrowError(res.status)));\n</code></pre>\n\n<p>The method that isn't forming params correctly looks like this. They're extremely similar, so I don't know why the params are being formed differently.</p>\n\n<pre><code>    const user = this.sessionHelperService.checkUser();\n    const headers = this.sessionHelperService.getAuthHeader();\n\n    sortColumn = sortDirection === '' ? '' : sortDirection === 'asc' ? sortColumn : '-' + sortColumn;\n    const apiUrl = `${this.LAB_URL_CHUNK}/${user.lab}/${this.LOG_BOOK_ENTRIES_URL_CHUNK}/?sort=${sortColumn}`;\n    let params = new HttpParams();\n    pageIndex++;\n    params = params.append('page', pageIndex.toString());\n    params = params.append('page_size', pageSize.toString());\n    params = params.append('paginate', 'true');\n\n    return this.http.get&lt;LogEntry[]&gt;(apiUrl, { headers })\n      .pipe(\n        catchError((res: HttpResponse&lt;any&gt;) =&gt; observableThrowError(res.status)));\n</code></pre>\n\n<p>When I log the params inside the working method, it shows the appended params inside of a <code>map</code> array, and the <code>cloneFrom</code> property is different.</p>\n\n<pre><code>cloneFrom: null\nencoder: HttpUrlEncodingCodec {}\nmap: Map(3)\nsize: (...)\n__proto__: Map\n[[Entries]]: Array(3)\n0: {\"page\" =&gt; Array(1)}\n1: {\"page_size\" =&gt; Array(1)}\n2: {\"paginate\" =&gt; Array(1)}\nlength: 3\nupdates: (3) [{\u2026}, {\u2026}, {\u2026}]\n__proto__: Object\n</code></pre>\n\n<p>When I log the params inside the new, not working method, the <code>map</code> array is null.</p>\n\n<pre><code>cloneFrom: HttpParams {updates: null, cloneFrom: null, encoder: HttpUrlEncodingCodec, map: null}\nencoder: HttpUrlEncodingCodec {}\nmap: null\nupdates: (3) [{\u2026}, {\u2026}, {\u2026}]\n__proto__: Object\n</code></pre>\n\n<p>Why should such similar methods create params differently?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 5261, "user_id": 858757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMQgQ.png?s=128&g=1", "display_name": "Silvermind", "link": "https://stackoverflow.com/users/858757/silvermind"}, "edited": false, "score": 2, "creation_date": 1563982505, "post_id": 57186521, "comment_id": 100883326, "body": "Where is srcElement coming from?"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "reply_to_user": {"reputation": 5261, "user_id": 858757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMQgQ.png?s=128&g=1", "display_name": "Silvermind", "link": "https://stackoverflow.com/users/858757/silvermind"}, "edited": false, "score": 0, "creation_date": 1563982541, "post_id": 57186521, "comment_id": 100883352, "body": "it should be the button @Silvermind"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "edited": false, "score": 0, "creation_date": 1563982687, "post_id": 57186521, "comment_id": 100883442, "body": "This is not a very clear example.. Did you try using some sort of template reference variable?"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "reply_to_user": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "edited": false, "score": 0, "creation_date": 1563982932, "post_id": 57186521, "comment_id": 100883579, "body": "@wentjun I&#39;ve added the template to the post"}, {"owner": {"reputation": 556, "user_id": 2992901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62682a8e590b63c6a91c965af02ae45f?s=128&d=identicon&r=PG", "display_name": "LkPark", "link": "https://stackoverflow.com/users/2992901/lkpark"}, "edited": false, "score": 0, "creation_date": 1563983026, "post_id": 57186521, "comment_id": 100883626, "body": "I think this should solve your problem, <a href=\"https://stackoverflow.com/questions/32693061/how-can-i-select-an-element-in-a-component-template\" title=\"how can i select an element in a component template\">stackoverflow.com/questions/32693061/&hellip;</a> You just need to get the element ref to make it work."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1563984681, "post_id": 57186891, "comment_id": 100884490, "body": "it works, thanks! but it does not work perfectly.. well for example if I have 2 posts and I want to vote to the second one  the vote is only for the first means if I up vote to the second or down vote for it all it goes to the first one and the changes is only for it"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1563984917, "post_id": 57186891, "comment_id": 100884605, "body": "@alex yeah I know. It is simplified code. The main point of my answer is to show that you can use template reference variables to mutate the element&#39;s CSS properties :)"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1563985381, "post_id": 57186891, "comment_id": 100884851, "body": "alright but could u guide me how to fix this problem in order to separate them (I don(t master this language too much)"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1563987515, "post_id": 57186891, "comment_id": 100885897, "body": "@alex understood! I have updated my demo to reflect my new logic. If you click on the demo, you will see the updated one. I will try to explain it on my post :)"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1563988145, "post_id": 57186891, "comment_id": 100886154, "body": "there is no other way ? I guess it is not practise to initialise yes and no at every post.. in this exemple is easy but should think when u have more data :)"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564012266, "post_id": 57186891, "comment_id": 100894481, "body": "the editor shows <b>Property &#39;toArray&#39; does not exist on type &#39;ElementRef&lt;any&gt;&#39;.</b>  . look at <a href=\"https://stackblitz.com/edit/angular-hjckyy?embed=1&amp;file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">demo</a>.. and I have to admit that I didn&#39;t understand exactly what this line do <code>const parentNode = this.buttonYes.toArray()[index].nativeElement.parentNode;</code>"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564015936, "post_id": 57186891, "comment_id": 100895073, "body": "@alex Hmm.. Can you click on the demo(<a href=\"https://stackblitz.com/edit/angular-hxqhbw?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-hxqhbw?file=src/app/&hellip;</a>) I have posted above again? I have previously made some changes to line 9 and 10 to use QueryList instead. Also, the <code>parentNode</code> variable is a HTMLElement reference to the parent node of the button"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564078356, "post_id": 57186891, "comment_id": 100922401, "body": "yeah I know that parentNode refers to the parent element of the current node, I just didn&#39;t understand the conversion <code>toArray()</code>"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564079846, "post_id": 57186891, "comment_id": 100923060, "body": "I see! Ok, that is because, I am trying to return it as a copy of the List as an an array, so that I can access the child/elements of the List via the index!"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564173249, "post_id": 57186891, "comment_id": 100957572, "body": "what if I wanted to use <code>list-group-item-success</code> instead of <code>style.backgroundColor = &#39;blue&#39;;</code>"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564844842, "post_id": 57186891, "comment_id": 101167462, "body": "@alex hello, sorry for the late response. I was on vacation. Do you still need help?"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564952980, "post_id": 57186891, "comment_id": 101188219, "body": "hi wentjun ! hope u had fun :D  yeah I still need help"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565105272, "post_id": 57186891, "comment_id": 101243281, "body": "Oh, what is <code>list-group-item-success</code> supposed to be?"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565105675, "post_id": 57186891, "comment_id": 101243532, "body": "it would be something like this (but it is not the correct form)      <code>if (this.posts[index].yes &gt; this.posts[index].no{ parentNode.style.backgroundColor = &#39;list-group-item-success&#39;; } else if (this.posts[index].no &gt; this.posts[index].yes) {     parentNode.style.backgroundColor = &#39;list-group-item-danger&#39;;   }</code> u got what I mean ?"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565189226, "post_id": 57186891, "comment_id": 101275804, "body": "@alex Hmmm... Sorry, I mean, what does <code>list-group-item-success</code> actually represent? You have to supply a valid color string (such as black, white, red, etc), or some hex code values!"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565205279, "post_id": 57186891, "comment_id": 101283516, "body": "oh yes, since <code>list-group-item-success</code> and <code>list-group-item-danger</code> form specific classes in <b>bootstrap</b>, we must use <code>[ngClass]</code>"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565393975, "post_id": 57186891, "comment_id": 101353663, "body": "it seems like u changed ur mind about helping me ! :o"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565407131, "post_id": 57186891, "comment_id": 101355195, "body": "@alex ohh I thought you have figured it out, because you mentioned you are going to use <code>ngClass</code>!! Sorry about that. Alternatively, you can use <code>. className</code> do apply the class dynamically. Let me try it in a while"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565431854, "post_id": 57186891, "comment_id": 101358820, "body": "no problem hah&#224;, I prefer to use <code>ngClass</code> (I&#39;m already asked to employ it) but if u can do the 2 demo (<code>className</code> &amp; <code>ngClass</code>) I won&#39;t say no. So I will learn how it works both ;)"}, {"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565521656, "post_id": 57186891, "comment_id": 101374138, "body": "@alex sorry for the late response!! I have just done it with <code>ngClass</code>, as shown in this demo! <a href=\"https://stackblitz.com/edit/angular-njvhuf?file=src/app/app.component.html\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-njvhuf?file=src/app/&hellip;</a> . I added the conditions on the <code>ngClass</code>, such that the different classes are used based on the number of yes/no votes."}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1565534097, "post_id": 57186891, "comment_id": 101376691, "body": "sorry u might didn&#39;t figure out what I meant exactly.. instead of writting <code>background-color: red </code> we have to use <code>list-group-item-danger</code> which will color it by light red, whereas this code does not use bootstrap classes. here is just used as selector"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 1, "creation_date": 1565694187, "post_id": 57186891, "comment_id": 101424589, "body": "Hi @wentjun I just wanted to tell u that I managed to reach the goal.. and also to thank u for your patience hah&#224; :D"}, {"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 1, "creation_date": 1565694259, "post_id": 57186891, "comment_id": 101424630, "body": "this was the expected <a href=\"https://stackblitz.com/edit/angular-1smibu\" rel=\"nofollow noreferrer\">result</a>"}], "tags": [], "owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "is_accepted": true, "score": 0, "last_activity_date": 1565521869, "last_edit_date": 1565521869, "creation_date": 1563983563, "answer_id": 57186891, "question_id": 57186521, "link": "https://stackoverflow.com/questions/57186521/cannot-find-name-srcelement/57186891#57186891", "title": "Cannot find name &#39;srcElement&#39;", "body": "<p>You can make use of <a href=\"https://angular.io/guide/template-syntax#template-reference-variables-var\" rel=\"nofollow noreferrer\">template reference variables</a> when it comes to referencing to the DOM element on your template/component.html.</p>\n\n<p>First, we use the <code>#</code> character to declare the template reference variables for both buttons. </p>\n\n<pre><code>&lt;ul class=\"list-group\"&gt;    \n  &lt;li class=\"list-group-item\" *ngFor=\"let post of posts; let i = index\"&gt; \n    &lt;p style=\"font-size:35px;\"&gt; {{  post.title }} \n    &lt;button class=\"btn btn-success\"  (click)=\"onYes(i)\" #buttonYes&gt;Love it!&lt;/button&gt; &amp;nbsp;\n    &lt;button class=\"btn btn-danger\" (click) =\"onNo(i)\" #buttonNo&gt;Don't love it!&lt;/button&gt; &lt;br&gt;\n  &lt;/li&gt;    \n&lt;/ul&gt; \n</code></pre>\n\n<p>And on you component.ts, we use <code>@ViewChildren</code> to access the list of reference variables within the <code>ngFor</code>. We will also pass the index of the clicked button to the methods binded to the click events. This will allow the component logic to access the index which is clicked, thus using the index to provide the references for the index of the element within the <code>QueryList</code>. </p>\n\n<p>Do note that we have to use the <code>.ToArray()</code> to return a copy of the result from QueryList as an array, so that we can access the each element within the QueryList via its index. For more details regarding the usage of QueryList, feel free to refer to the <a href=\"https://angular.io/api/core/QueryList\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<pre><code>import { Component, ViewChildren, ElementRef, QueryList } from '@angular/core';\n.\n.\nposts = [{\n title: 'AAA',\n yes: 0,\n no: 0 \n},{\n title: 'BBB',\n yes: 0,\n no: 0 \n}, {\n title: 'CCC',\n yes: 0,\n no: 0  \n}];\n\nonYes(index: number){\n  this.posts[index].yes++;\n  this.onWhich(index);\n}\n\nonNo(index: number){\n  this.posts[index].no++;\n  this.onWhich(index);\n}\n\nonWhich(index: number){\n  const parentNode = this.buttonYes.toArray()[index].nativeElement.parentNode;\n  if (this.posts[index].yes &gt; this.posts[index].no) {\n    parentNode.style.backgroundColor = 'blue';\n  } else if (this.posts[index].no &gt; this.posts[index].yes) {\n    parentNode.style.backgroundColor = 'red';\n  } else{\n    parentNode.style.backgroundColor = 'white';\n  }    \n}\n</code></pre>\n\n<p>I have created a <a href=\"https://stackblitz.com/edit/angular-hxqhbw?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">demo</a>. </p>\n\n<hr>\n\n<p>Alternatively, the better solution is to use <code>ngClass</code>, whereby the classes <code>.list-group-item-success</code> and <code>.list-group-item-danger</code> are conditionally applied based on the number of yes and no votes for each <code>post</code>.</p>\n\n<pre><code>&lt;ul class=\"list-group\"&gt;    \n  &lt;li class=\"list-group-item\" *ngFor=\"let post of posts; let i = index\"&gt; \n    &lt;p [ngClass]=\"{\n      'list-group-item-success': post.yes &gt; post.no,\n      'list-group-item-danger': post.yes &lt; post.no}\" style=\"font-size:35px;\"&gt; {{  post.title }} \n      &lt;button class=\"btn btn-success\"  (click)=\"onYes(i)\" #buttonYes&gt;Love it!&lt;/button&gt; &amp;nbsp;\n      &lt;button class=\"btn btn-danger\" (click) =\"onNo(i)\" #buttonNo&gt;Don't love it!&lt;/button&gt; \n    &lt;/p&gt;\n  &lt;/li&gt;    \n&lt;/ul&gt; \n</code></pre>\n\n<p>And on the component.css, we define the classes required.</p>\n\n<pre><code>.list-group-item-success {\n  background-color: blue;\n}\n\n.list-group-item-danger {\n  background-color: red;\n}\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-njvhuf?file=src/app/app.component.html\" rel=\"nofollow noreferrer\">DEMO</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564079020, "post_id": 57188563, "comment_id": 100922706, "body": "thank u for providing the effort to answer.. ur code is fine too, but u know I can not admit more than one answer, and since wentjun preceded u I had to admit his answer :) manipulating DOM from ts file is a best way ?"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "reply_to_user": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "edited": false, "score": 0, "creation_date": 1564127929, "post_id": 57188563, "comment_id": 100935981, "body": "My personal opinion is that do NOT manipulate the DOM in any way if only possible. Angular have other tools to do what you need. Also for example angular team warns about manipulating the DOM: <a href=\"https://angular.io/api/core/ElementRef#description\" rel=\"nofollow noreferrer\">angular.io/api/core/ElementRef#description</a> I just have taken it as a rule of thumb to not manipulate the dom from the TS if only possible, thus I prefer my solution (guess I&#39;m a bit biased tho, hahah) But yes, accept the answer that you feel is more suitable for you. If you think Wentjun&#39;s answer is more suitable for you, I&#39;m ok with thast ;)"}], "tags": [], "owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "is_accepted": false, "score": 0, "last_activity_date": 1563990327, "creation_date": 1563990327, "answer_id": 57188563, "question_id": 57186521, "link": "https://stackoverflow.com/questions/57186521/cannot-find-name-srcelement/57188563#57188563", "title": "Cannot find name &#39;srcElement&#39;", "body": "<p>I would go the same route as wentjun with adding properties <code>yes</code> and <code>no</code>, but I wouldn't manipulate the DOM from the TS file, instead we can use <code>ngClass</code> and apply style classes. Let's say classes like:</p>\n\n<pre><code>.blue-bg {\n  background-color: blue;\n}\n\n.red-bg {\n  background-color: red;\n}\n\n.white-bg {\n  background-color: white;\n}\n</code></pre>\n\n<p>If you have an existing array of <code>posts</code>, you can add the new properties with:</p>\n\n\n\n<pre class=\"lang-ts prettyprint-override\"><code>this.posts = this.posts.map(post =&gt; { return {...post, yes: 0, no: 0} });\n</code></pre>\n\n<p>Then add the click handlers for the button like wentjun and pass the index:</p>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;button (click)=\"onYes(i)\"&gt;Love it!&lt;/button&gt;\n&lt;button (click) =\"onNo(i)\"&gt;Don't love it!&lt;/button&gt;\n</code></pre>\n\n<p>And the corresponding functions:</p>\n\n\n\n<pre class=\"lang-ts prettyprint-override\"><code>onYes(i: number){\n  this.posts[i].yes++;\n}\n\nonNo(i: number){\n  this.posts[i].no++;\n}\n</code></pre>\n\n<p>Then mark in the template with conditions in <code>ngClass</code>:</p>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>[ngClass]=\"[post.yes &gt; post.no ? 'blue-bg' : '',  \n            post.yes &lt; post.no ? 'red-bg' : '', \n            post.yes === post.no ? 'white-bg' : '']\"\n</code></pre>\n\n<p><strong>DEMO: <a href=\"https://stackblitz.com/edit/angular-vimk2s?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">Stackblitz</a></strong> (which I kindly forked from wentjuns stackblitz)</p>\n"}], "owner": {"reputation": 3, "user_id": 11233595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b0f50392fdeefd48c1fac90371f3e3?s=128&d=identicon&r=PG&f=1", "display_name": "alex", "link": "https://stackoverflow.com/users/11233595/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 57186891, "answer_count": 2, "score": -2, "last_activity_date": 1565521869, "creation_date": 1563982363, "last_edit_date": 1563987890, "question_id": 57186521, "link": "https://stackoverflow.com/questions/57186521/cannot-find-name-srcelement", "title": "Cannot find name &#39;srcElement&#39;", "body": "<p>I have 2 buttons for votting, on click I call a methed \"onWhich\" that compares  the number of up and down clicks and depending on the result the background-color changes</p>\n\n<p>but the editor is showing Cannot find name 'srcElement'</p>\n\n<p>maybe my method is incomplete....</p>\n\n<pre><code>yes= 0;\nno = 0;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n\nonYes(index: number){\nthis.yes ++;\nthis.onWhich();\n}\n\nonNo(index: number){\nthis.no ++;\nthis.onWhich();\n}\n\nonWhich(){\n  if(this.yes &gt; this.no){\n    srcElement.parentElement.style.backgroundColor = 'blue';\n  }else if(this.yes &lt; this.no){\n    srcElement.parentElement.style.backgroundColor = 'red';\n  }else{\n    srcElement.parentElement.style.backgroundColor = 'white';\n  }\n\n}\n</code></pre>\n\n<p>here is the template</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ul class=\"list-group\"&gt;\r\n    \r\n   &lt;li class=\"list-group-item\" *ngFor=\"let post of posts; let i = index\"&gt; \r\n\r\n\r\n      &lt;p style=\"font-size:35px;\"&gt; {{  post.title }} \r\n      \r\n                   \r\n   &lt;button class=\"btn btn-success\"  (click)=\"onYes(i)\" &gt;Love it!&lt;/button&gt; &amp;nbsp;\r\n   &lt;button class=\"btn btn-danger\" (click) =\"onNo(i)\"&gt;Don't love it!&lt;/button&gt; &lt;br&gt;\r\n\r\n\r\n    &lt;/li&gt;    \r\n        \r\n &lt;/ul&gt; </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["reactjs", "typescript", "react-redux", "jestjs"], "comments": [{"owner": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1563991235, "post_id": 57186472, "comment_id": 100887563, "body": "does this component work fine in live project?"}, {"owner": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 2, "creation_date": 1563991445, "post_id": 57186472, "comment_id": 100887666, "body": "take a look into <a href=\"https://stackoverflow.com/questions/48701121/jsx-element-type-does-not-have-any-construct-or-call-signatures-typescript\" title=\"jsx element type does not have any construct or call signatures typescript\">stackoverflow.com/questions/48701121/&hellip;</a> Not sure if your and that cases are equal but there are few ideas how to make work around"}, {"owner": {"reputation": 31, "user_id": 11831284, "user_type": "registered", "profile_image": "https://graph.facebook.com/884743291881385/picture?type=large", "display_name": "Romaric_1988", "link": "https://stackoverflow.com/users/11831284/romaric-1988"}, "reply_to_user": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1564003988, "post_id": 57186472, "comment_id": 100892637, "body": "Yes it is imported the same way and it is working fine live. Thank you"}, {"owner": {"reputation": 31, "user_id": 11831284, "user_type": "registered", "profile_image": "https://graph.facebook.com/884743291881385/picture?type=large", "display_name": "Romaric_1988", "link": "https://stackoverflow.com/users/11831284/romaric-1988"}, "reply_to_user": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1564004942, "post_id": 57186472, "comment_id": 100892889, "body": "Thank you Skyboyer, indeed adding &quot;as React.ComponentType&quot; solved my issue"}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 8282453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9f3e67db4f0728a1b6419d13a84d29f?s=128&d=identicon&r=PG&f=1", "display_name": "sk01", "link": "https://stackoverflow.com/users/8282453/sk01"}, "is_accepted": false, "score": 1, "last_activity_date": 1563985462, "creation_date": 1563985462, "answer_id": 57187445, "question_id": 57186472, "link": "https://stackoverflow.com/questions/57186472/impossible-to-test-a-react-component-wrapped-with-redux-compose/57187445#57187445", "title": "Impossible to test a React component wrapped with redux compose", "body": "<p>You can write <code>export  class Toto extends ...</code> and then can <code>import {Toto} from ...</code> in test file.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11831284, "user_type": "registered", "profile_image": "https://graph.facebook.com/884743291881385/picture?type=large", "display_name": "Romaric_1988", "link": "https://stackoverflow.com/users/11831284/romaric-1988"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005013, "creation_date": 1564005013, "answer_id": 57191700, "question_id": 57186472, "link": "https://stackoverflow.com/questions/57186472/impossible-to-test-a-react-component-wrapped-with-redux-compose/57191700#57191700", "title": "Impossible to test a React component wrapped with redux compose", "body": "<p>Adding \"as React.ComponentType\" solved my issue. Thank you for your help</p>\n"}], "owner": {"reputation": 31, "user_id": 11831284, "user_type": "registered", "profile_image": "https://graph.facebook.com/884743291881385/picture?type=large", "display_name": "Romaric_1988", "link": "https://stackoverflow.com/users/11831284/romaric-1988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1564005013, "creation_date": 1563982211, "last_edit_date": 1563991185, "question_id": 57186472, "link": "https://stackoverflow.com/questions/57186472/impossible-to-test-a-react-component-wrapped-with-redux-compose", "title": "Impossible to test a React component wrapped with redux compose", "body": "<p>I need to test a React component (Toto) with Jest.\nThis component is exported with two HOC thanks to the redux compose function.</p>\n\n<p>When I try to use the Toto component in my test file (Toto.test.tsx) I have a TS2604 error (JSX element type 'Toto' does not have any construct or call signatures).</p>\n\n<p>Toto.test.tsx</p>\n\n<pre><code>import { shallow } from 'enzyme';\nimport * as React from 'react';\nimport Toto from '../../Toto';\n\nfunction setupFullRenderingComponent(options: any = {}) {\n  const props = {\n    toto: 'hello'\n  }\n\n  const wrapper = shallow(   \n    &lt;Toto {...props} /&gt;\n  );\n\n  return {\n    props,\n    wrapper\n  };\n}\n\ndescribe('Toto', () =&gt; {\n  const { wrapper } = setupFullRenderingComponent();\n  console.log(wrapper);\n});\n</code></pre>\n\n<p>Toto.tsx</p>\n\n<pre><code>import * as React from 'react';\nimport { withRouter } from 'react-router';\nimport { compose } from 'redux';\nimport WithHelp from '../../../WithHelp';\n\nclass Toto extends React.Component&lt;\n  any,\n  any\n&gt; {\n  public constructor(props: any) {\n    super(props);\n\n    this.state = {\n      total: 0\n    };\n  }\n\n  // SOME STUFF\n\n  public render() {\n    return (\n      &lt;div&gt;{this.state.total}&lt;/div&gt;\n    );\n  }\n}\n\nexport default compose(\n  withRouter,\n  WithHelp\n)(Toto);\n\n</code></pre>\n\n<p>How can i fix this ?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["json", "angular", "typescript", "angular7"], "answers": [{"comments": [{"owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "edited": false, "score": 0, "creation_date": 1563982776, "post_id": 57186624, "comment_id": 100883496, "body": "But how do I check if the parsing returns a specific type of object, in this case my custom object? This only checks if the string passed is a correct json string..."}, {"owner": {"reputation": 129, "user_id": 9924715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1w9-HZUAR_M/AAAAAAAAAAI/AAAAAAAAAD4/5V7IZHtashk/photo.jpg?sz=128", "display_name": "Nikhil Paliwal", "link": "https://stackoverflow.com/users/9924715/nikhil-paliwal"}, "reply_to_user": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "edited": false, "score": 0, "creation_date": 1563983541, "post_id": 57186624, "comment_id": 100883912, "body": "You can use the <code>typeof</code> operator of javascript. Might it will help.  example if var a contains the JSON object. Then you can write it in conditional statement as <code>if(typeof a == &#39;object&#39;)</code>. These will return you true of false value."}, {"owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "edited": false, "score": 0, "creation_date": 1564065846, "post_id": 57186624, "comment_id": 100916444, "body": "Yes with typeof it tells me it&#39;s an object, not if it&#39;s a particular custom Object"}], "tags": [], "owner": {"reputation": 129, "user_id": 9924715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1w9-HZUAR_M/AAAAAAAAAAI/AAAAAAAAAD4/5V7IZHtashk/photo.jpg?sz=128", "display_name": "Nikhil Paliwal", "link": "https://stackoverflow.com/users/9924715/nikhil-paliwal"}, "is_accepted": false, "score": 3, "last_activity_date": 1563982699, "creation_date": 1563982699, "answer_id": 57186624, "question_id": 57186330, "link": "https://stackoverflow.com/questions/57186330/angular-7-correct-way-to-check-if-json-parse-returns-a-specific-object/57186624#57186624", "title": "Angular 7 correct way to check if JSON parse returns a specific object", "body": "<p>Here is the simple way to check it:</p>\n\n<pre><code>checkJsonObject(string) {\n    try {\n        JSON.parse(string);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 1926, "user_id": 4116960, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cab1c670f060a6df29f55da6148184d9?s=128&d=identicon&r=PG&f=1", "display_name": "Usr", "link": "https://stackoverflow.com/users/4116960/usr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "closed_date": 1564037975, "answer_count": 1, "score": -1, "last_activity_date": 1563982848, "creation_date": 1563981707, "last_edit_date": 1563982848, "question_id": 57186330, "link": "https://stackoverflow.com/questions/57186330/angular-7-correct-way-to-check-if-json-parse-returns-a-specific-object", "closed_reason": "Needs details or clarity", "title": "Angular 7 correct way to check if JSON parse returns a specific object", "body": "<p>I'm a little confused about this.<br>\nI have a server returning a JSON string that represents an array of custom objects that I have defined. I need to perform some tests and check if each element of this array can be correctly cast/parsed to my object.<br>\nWhat is the correct way to do this?<br>\nI thought about creating a new Object and passing my <code>JSON.parse(element)</code> result to the constructor, but then how do I check if it was correctly created? Does it throw an exception?   </p>\n"}, {"tags": ["angular", "typescript", "angular-datatables"], "answers": [{"tags": [], "owner": {"reputation": 379, "user_id": 9945674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iSoYEK-ZqA8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3fvnXMBwICQ1du6ykC6MMcz7bD7A/mo/photo.jpg?sz=128", "display_name": "GaryB", "link": "https://stackoverflow.com/users/9945674/garyb"}, "is_accepted": false, "score": 0, "last_activity_date": 1566221110, "creation_date": 1566221110, "answer_id": 57557693, "question_id": 57186268, "link": "https://stackoverflow.com/questions/57186268/configure-angular-datatable-renderer-with-typescript-instead-of-javascript/57557693#57557693", "title": "Configure Angular DataTable Renderer with TypeScript instead of JavaScript", "body": "<p>Have you tried this, from then datatables examples?\n<a href=\"https://l-lin.github.io/angular-datatables/#/extensions/responsive\" rel=\"nofollow noreferrer\">https://l-lin.github.io/angular-datatables/#/extensions/responsive</a></p>\n\n<p>just the \" responsive: true \" bit is important...</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7595612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d644dc276dfe400f03a86a1ecc834d76?s=128&d=identicon&r=PG&f=1", "display_name": "Arbarus", "link": "https://stackoverflow.com/users/7595612/arbarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1566225303, "creation_date": 1566225303, "answer_id": 57558900, "question_id": 57186268, "link": "https://stackoverflow.com/questions/57186268/configure-angular-datatable-renderer-with-typescript-instead-of-javascript/57558900#57558900", "title": "Configure Angular DataTable Renderer with TypeScript instead of JavaScript", "body": "<p>You can use the data table of angular material <a href=\"https://material.angular.io/components/table/overview\" rel=\"nofollow noreferrer\">https://material.angular.io/components/table/overview</a></p>\n"}], "owner": {"reputation": 5437, "user_id": 445884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e632aa8c7643fc73e874fb31343c18ab?s=128&d=identicon&r=PG", "display_name": "coder", "link": "https://stackoverflow.com/users/445884/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1566225303, "creation_date": 1563981486, "last_edit_date": 1563984498, "question_id": 57186268, "link": "https://stackoverflow.com/questions/57186268/configure-angular-datatable-renderer-with-typescript-instead-of-javascript", "title": "Configure Angular DataTable Renderer with TypeScript instead of JavaScript", "body": "<p>I'm setting up <a href=\"https://l-lin.github.io/angular-datatables/#/getting-started\" rel=\"nofollow noreferrer\">Angular DataTables</a> with the Responsive plugin in my Angular app for the first time and it's not clear how to configure the Renderer using TypeScript.  <a href=\"https://datatables.net/reference/option/responsive.details.renderer\" rel=\"nofollow noreferrer\">The example given</a> is in JavaScript.  I have created a template reference variable and called the DataTable function on it, but it gives an error that 'DataTable' doesn't exist on type 'ElementRef >any>' </p>\n\n<pre><code>    this.dataTableID.DataTable({\n      responsive: {\n        details: {\n          renderer: $.fn.dataTable.Responsive.renderer.tableAll()\n        }\n      }  \n    })\n</code></pre>\n\n<p>I also tried passing the renderer function as part of the dtOptions, but I get this build error: \"Property 'Responsive' does not exist on type 'StaticFunctions'\".</p>\n\n<pre><code>  ngOnInit(): void {\n    this.dtOptions = {\n      responsive: {\n        details: {\n          renderer: $.fn.dataTable.Responsive.renderer.tableAll()\n        }\n      }\n    };\n  }\n</code></pre>\n\n<p>How do I convert this example to TypeScript for Angular?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563983404, "post_id": 57185972, "comment_id": 100883842, "body": "String index signature key types <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#support-number-and-symbol-named-properties-with-keyof-and-mapped-types\" rel=\"nofollow noreferrer\">include <code>number</code> since TS2.9</a>.  What do you see as needing correction?"}, {"owner": {"reputation": 9293, "user_id": 63621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1698e0dceda985e2b71b15b5567dd795?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/63621/henrik"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563988033, "post_id": 57185972, "comment_id": 100886106, "body": "All keys of the object are <code>string</code>, never <code>number</code>, and specifically, I expect the <code>Testing</code> type to be aliased to <code>&quot;testing&quot;</code> (a string value as a type). Or as seen from the other side around: why doesn&#39;t <code>[k: number]</code> signatures produce <code>string | number</code> <code>Testing</code> types? And why doesn&#39;t enum?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563989459, "post_id": 57185972, "comment_id": 100886782, "body": "<code>number</code> indexes aren&#39;t really <code>number</code>... since in JavaScript all index access is coerced to <code>string</code> values first... so <code>a[1]</code> is the same as <code>a[&quot;1&quot;]</code>.  In TypeScript, a <code>number</code> index is <i>really</i> is a special subset of a <code>string</code> index.  Read <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html#indexable-types\" rel=\"nofollow noreferrer\">this documentation</a>.  If this makes sense to you I can turn it into an answer."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563989568, "post_id": 57185972, "comment_id": 100886820, "body": "Also, please avoid posting images of code, as described in <a href=\"https://stackoverflow.com/help/how-to-ask\">the guidelines for how to ask a good question</a>: &quot;DO NOT post images of code, data, error messages, etc. - copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563988972, "post_id": 57188111, "comment_id": 100886540, "body": "&quot;That string-keys are inferred to <code>string | number </code>is probably a bug.&quot; No, it is intended behavior, introduced in TS2.9: <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#support-number-and-symbol-named-properties-with-keyof-and-mapped-types\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/wiki/&hellip;</a> &quot;If <code>X</code> contains a string index signature, <code>keyof X</code> is a union of <code>string</code>, <code>number</code>, and the literal types representing symbol-like properties&quot;"}], "tags": [], "owner": {"reputation": 9293, "user_id": 63621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1698e0dceda985e2b71b15b5567dd795?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/63621/henrik"}, "is_accepted": true, "score": 0, "last_activity_date": 1563991682, "last_edit_date": 1563991682, "creation_date": 1563988361, "answer_id": 57188111, "question_id": 57185972, "link": "https://stackoverflow.com/questions/57185972/typescript-infers-object-key-to-number-instead-of-string/57188111#57188111", "title": "Typescript infers object key to number instead of string", "body": "<p>The type annotation <code>{ [k: string]: Record&lt;string, any&gt; }</code> throws away the actual key(-types) of the object by generalising all of them to <code>string</code> or <code>number</code>.</p>\n\n<p>That string-keys are inferred to <code>string | number</code> is probably a quirk in how TypeScript deals with <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#support-number-and-symbol-named-properties-with-keyof-and-mapped-types\" rel=\"nofollow noreferrer\">string indexers</a></p>\n"}], "owner": {"reputation": 9293, "user_id": 63621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1698e0dceda985e2b71b15b5567dd795?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/63621/henrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 57188111, "answer_count": 1, "score": 0, "last_activity_date": 1563991682, "creation_date": 1563980601, "last_edit_date": 1563988100, "question_id": 57185972, "link": "https://stackoverflow.com/questions/57185972/typescript-infers-object-key-to-number-instead-of-string", "title": "Typescript infers object key to number instead of string", "body": "<p>I'm trying to use a stringly keyed object literal and create a type that is <code>\"monkey\"</code> named <code>Testing</code>. However, it infers <code>string | number</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5lu8k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5lu8k.png\" alt=\"monkeying around, repro\"></a></p>\n\n<p>How do I correct it?</p>\n\n<p>As a counter-example to the comment, creating an Enum-indexed object looks correct:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eF8wv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eF8wv.png\" alt=\"enum objects\"></a></p>\n"}, {"tags": ["html", "css", "angular", "typescript"], "comments": [{"owner": {"reputation": 181, "user_id": 11739715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jb78aUf_hOI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4ZqfQ0DsyOT4O6WG6ZdyNv8XZag/photo.jpg?sz=128", "display_name": "Okere Chukwudi", "link": "https://stackoverflow.com/users/11739715/okere-chukwudi"}, "edited": false, "score": 0, "creation_date": 1563980235, "post_id": 57185732, "comment_id": 100882068, "body": "Hi, do you mean changing the border color with a variable or a boolean condition?"}, {"owner": {"reputation": 1030, "user_id": 9244138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39148e76ae32cbb7711a7ca476a8a608?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Ragnar&#246;k", "link": "https://stackoverflow.com/users/9244138/colin-ragnar%c3%b6k"}, "reply_to_user": {"reputation": 181, "user_id": 11739715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jb78aUf_hOI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4ZqfQ0DsyOT4O6WG6ZdyNv8XZag/photo.jpg?sz=128", "display_name": "Okere Chukwudi", "link": "https://stackoverflow.com/users/11739715/okere-chukwudi"}, "edited": false, "score": 0, "creation_date": 1563980287, "post_id": 57185732, "comment_id": 100882098, "body": "with a variable condition"}, {"owner": {"reputation": 181, "user_id": 11739715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jb78aUf_hOI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4ZqfQ0DsyOT4O6WG6ZdyNv8XZag/photo.jpg?sz=128", "display_name": "Okere Chukwudi", "link": "https://stackoverflow.com/users/11739715/okere-chukwudi"}, "edited": false, "score": 0, "creation_date": 1563980352, "post_id": 57185732, "comment_id": 100882134, "body": "Ok. writing in a jiffy"}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 11739715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jb78aUf_hOI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4ZqfQ0DsyOT4O6WG6ZdyNv8XZag/photo.jpg?sz=128", "display_name": "Okere Chukwudi", "link": "https://stackoverflow.com/users/11739715/okere-chukwudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1563981157, "last_edit_date": 1563981157, "creation_date": 1563980678, "answer_id": 57185992, "question_id": 57185732, "link": "https://stackoverflow.com/questions/57185732/how-to-assign-dynamic-colors-to-the-css-border-of-an-image/57185992#57185992", "title": "How to assign dynamic colors to the css-border of an image?", "body": "<p>Hi you can change the color of your border dynamically in different ways, this works perfectly.</p>\n\n<pre><code>&lt;ion-thumbnail slot=\"start\" [style.border-color]=\"condition ? '#fff' : '#040404'\"&gt;\n      &lt;ion-img [src]=\"item.src\"&gt;&lt;/ion-img&gt;\n&lt;/ion-thumbnail&gt;\n</code></pre>\n\n<p>You may also choose to have different css classes for the various colors like this:</p>\n\n<pre><code>.white {\n      border-color: #fff !important\n }\n.blue {\n      border-color: blue !important\n }\n.black {\n      border-color: #000000 !important\n }\n</code></pre>\n\n<p>then in your code you can write this</p>\n\n<pre><code>&lt;ion-thumbnail slot=\"start\" [ngClass]=\"{'white' : \ncondition === true, 'blue': bluecondition === true, 'black': blackcondition === true}\"&gt;\n  &lt;ion-img [src]=\"item.src\"&gt;&lt;/ion-img&gt;\n&lt;/ion-thumbnail&gt;\n</code></pre>\n\n<p>in this case one should be true in order not to complicate thing, but feel free to move around it.\nYou could also do this</p>\n\n<pre><code>&lt;ion-thumbnail slot=\"start\" [ngClass]=\"condition? 'white' : 'blue'\"&gt;\n  &lt;ion-img [src]=\"item.src\"&gt;&lt;/ion-img&gt;\n&lt;/ion-thumbnail&gt;\n</code></pre>\n"}], "owner": {"reputation": 1030, "user_id": 9244138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39148e76ae32cbb7711a7ca476a8a608?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Ragnar&#246;k", "link": "https://stackoverflow.com/users/9244138/colin-ragnar%c3%b6k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 57185992, "answer_count": 1, "score": 0, "last_activity_date": 1563981157, "creation_date": 1563979884, "question_id": 57185732, "link": "https://stackoverflow.com/questions/57185732/how-to-assign-dynamic-colors-to-the-css-border-of-an-image", "title": "How to assign dynamic colors to the css-border of an image?", "body": "<p>At the moment it changes the background color of the slider component. How can I assign the dynamic color to other objects like the border of an image?</p>\n\n<p>where I want the dynamic colors</p>\n\n<pre><code> &lt;ion-thumbnail slot=\"start\"&gt;\n      &lt;ion-img [src]=\"item.src\"&gt;&lt;/ion-img&gt;\n    &lt;/ion-thumbnail&gt;\n</code></pre>\n\n<p>The color of that border should change depending on the value in ion-range</p>\n\n<pre><code>ion-thumbnail{\n          border: 2px solid #ffffff;\n        }\n</code></pre>\n\n<p>current working code</p>\n\n<pre><code>&lt;ion-range [(ngModel)]=\"value\" color=\"white\" [style.background]=\"getSliderBgColor(value)\"&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "flatpickr"], "answers": [{"tags": [], "owner": {"reputation": 2400, "user_id": 4380849, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uPPLQ.png?s=128&g=1", "display_name": "WalksAway", "link": "https://stackoverflow.com/users/4380849/walksaway"}, "is_accepted": true, "score": 2, "last_activity_date": 1563981347, "creation_date": 1563981347, "answer_id": 57186215, "question_id": 57185640, "link": "https://stackoverflow.com/questions/57185640/how-to-pass-function-to-disable-dates/57186215#57186215", "title": "How to pass function to disable dates", "body": "<p>You made mistake in your code, your not suppose to pass the function`s execution your suppose to pass a function definition </p>\n\n<p>instead of </p>\n\n<pre><code>&lt;input\n               type=\"text\"\n               mwlFlatpickr\n               [altInput]=\"true\"\n               dateFormat=\"Z\"\n               [(ngModel)]=\"desiredDate\"\n               [disable]=\"[disabledDay(date)]\"&gt;\n</code></pre>\n\n<p>change to</p>\n\n<pre><code>&lt;input\n               type=\"text\"\n               mwlFlatpickr\n               [altInput]=\"true\"\n               dateFormat=\"Z\"\n               [(ngModel)]=\"desiredDate\"\n               [disable]=\"[disabledDay]\"&gt;\n</code></pre>\n\n<p>I forked your blitz checkout the example:</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-u7r7rj\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-u7r7rj</a></p>\n"}, {"tags": [], "owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "is_accepted": false, "score": 1, "last_activity_date": 1563984722, "last_edit_date": 1563984722, "creation_date": 1563982412, "answer_id": 57186538, "question_id": 57185640, "link": "https://stackoverflow.com/questions/57185640/how-to-pass-function-to-disable-dates/57186538#57186538", "title": "How to pass function to disable dates", "body": "<p>As the documentation state: the <code>[disable]</code> directive will take an array of dates that you want to disable.</p>\n\n<p>For example:</p>\n\n<p>By function that return true false (which take in a Date object as default argument), and it trigger for every date loaded into the UI calendar:</p>\n\n<pre><code> [disable] = \"[functionReturnBool]\"\n\n//In the ts:\n functionReturnBool(date){\n   //Disable July:\n   return date.getMonth() === 6 // july index is 6\n }\n</code></pre>\n\n<p>By range:</p>\n\n<pre><code> [disable] = \"[{from: '2025-04-01',\n                to: '2025-05-01'},\n               {from: '2025-09-01',\n                to: '2025-12-01'}]\";\n</code></pre>\n\n<p>By specific date:</p>\n\n<pre><code> [disable] = \"['2025-03-30', '2025-05-21']\"\n</code></pre>\n\n<p>Or combine all of them:</p>\n\n<pre><code> [disable] = \"[functionReturnBool, new Date(2019,6,24), '2019-07-25', {from: '2019-07-01', to: '2019-07-08'}]\"\n</code></pre>\n"}], "owner": {"reputation": 823, "user_id": 10437436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVyGq.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10437436/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 57186215, "answer_count": 2, "score": 1, "last_activity_date": 1576499287, "creation_date": 1563979538, "last_edit_date": 1576499287, "question_id": 57185640, "link": "https://stackoverflow.com/questions/57185640/how-to-pass-function-to-disable-dates", "title": "How to pass function to disable dates", "body": "<p>I'm using fatpickr with the angular wrap <a href=\"https://www.npmjs.com/package/angularx-flatpickr\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/angularx-flatpickr</a></p>\n\n<p>StackBlitz with the problem: <a href=\"https://stackblitz.com/edit/angular-npep74\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-npep74</a></p>\n\n<p><strong>Objective:</strong> I want to make Saturdays and Sundays appear disabled (The next step is that holidays cannot be selected either)</p>\n\n<p><strong>Problem:</strong> I can't find the explanation of how to do it with this angular wrap and doing it like the original flatpickr documentation doesn't work</p>\n\n<p>Official documentation says it should be like this:</p>\n\n<pre><code> \"disable\": [\n        function(date) {\n            // return true to disable\n            return (date.getDay() === 0 || date.getDay() === 6);\n\n        }\n    ],\n</code></pre>\n\n<p>Wrapper documentation doesnt say anything</p>\n\n<p><strong>What have I tried ?:</strong></p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;input\n               type=\"text\"\n               mwlFlatpickr\n               [altInput]=\"true\"\n               dateFormat=\"Z\"\n               [(ngModel)]=\"desiredDate\"\n               [disable]=\"[disabledDay(date)]\"&gt;\n</code></pre>\n\n<p>TS:</p>\n\n<pre><code>disabledDay(date) {\n    console.log(date); // &lt;--- on this point date is undefined\n    return true;\n  }\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["reactjs", "typescript", "react-bootstrap-table"], "comments": [{"owner": {"reputation": 6380, "user_id": 11599909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d6760778bf35138d266f24c3552c46?s=128&d=identicon&r=PG&f=1", "display_name": "Domino987", "link": "https://stackoverflow.com/users/11599909/domino987"}, "edited": false, "score": 0, "creation_date": 1563980223, "post_id": 57185633, "comment_id": 100882061, "body": "can you show us the console.log(this.props.expandRow) output for the first example?"}, {"owner": {"reputation": 828, "user_id": 2163837, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7a0ab67d0d3783d3dd23a161f5893819?s=128&d=identicon&r=PG", "display_name": "Sujit Y. Kulkarni", "link": "https://stackoverflow.com/users/2163837/sujit-y-kulkarni"}, "reply_to_user": {"reputation": 6380, "user_id": 11599909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d6760778bf35138d266f24c3552c46?s=128&d=identicon&r=PG&f=1", "display_name": "Domino987", "link": "https://stackoverflow.com/users/11599909/domino987"}, "edited": false, "score": 0, "creation_date": 1563980592, "post_id": 57185633, "comment_id": 100882268, "body": "I have added it. See in yellow in the question. Can&#39;t share screenshot."}, {"owner": {"reputation": 6380, "user_id": 11599909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d6760778bf35138d266f24c3552c46?s=128&d=identicon&r=PG&f=1", "display_name": "Domino987", "link": "https://stackoverflow.com/users/11599909/domino987"}, "edited": false, "score": 0, "creation_date": 1563980845, "post_id": 57185633, "comment_id": 100882414, "body": "That is the error message of the render fucntion but not the console.log(this.props.expandRow)."}, {"owner": {"reputation": 1906, "user_id": 1263904, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2c81126b316d09cb8176624f2b9a816b?s=128&d=identicon&r=PG", "display_name": "pritam", "link": "https://stackoverflow.com/users/1263904/pritam"}, "edited": false, "score": 0, "creation_date": 1569005041, "post_id": 57185633, "comment_id": 102469524, "body": "I tried both the cases you mentioned, it worked for me every time. Sandbox link - <a href=\"https://codesandbox.io/embed/react-boot-table-expand-row-592ct\" rel=\"nofollow noreferrer\">codesandbox.io/embed/react-boot-table-expand-row-592ct</a>"}], "owner": {"reputation": 828, "user_id": 2163837, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7a0ab67d0d3783d3dd23a161f5893819?s=128&d=identicon&r=PG", "display_name": "Sujit Y. Kulkarni", "link": "https://stackoverflow.com/users/2163837/sujit-y-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563979695, "creation_date": 1563979527, "last_edit_date": 1563979695, "question_id": 57185633, "link": "https://stackoverflow.com/questions/57185633/expand-row-passed-as-a-prop-has-no-effect", "title": "Expand row passed as a prop has no effect", "body": "<p>I am using react-bootstrap-table2, along with typescript. I have a wrapper component called <code>&lt;Table&gt;</code> which ultimately renders <code>&lt;BootstrapTable&gt;</code> component.</p>\n\n<p>When I pass <code>expandRow</code> prop to my wrapper component, which passes it on to the underlying <code>&lt;BootstrapTable&gt;</code> component, it simply makes no effect, when row is clicked. And I see this error in the console.</p>\n\n<blockquote>\n  <p>Uncaught Invariant Violation: Objects are not valid as a React child\n  (found: object with keys {status, type, comments}). If you meant to\n  render a collection of children, use an array instead.</p>\n</blockquote>\n\n<pre><code>// does not work\n// when passed as prop\nconst expandRow = {\n    renderer: (row: any) =&gt; (&lt;h3&gt;Expanded content&lt;/h3&gt;)\n}\n//Wrapper component\n&lt;Table expandRow={expandRow} /&gt;\n...\nexport class Table extends React.Component {\n    render(){\n         ....\n        return (\n             &lt;BootstrapTable ... expandRow={this.props.expandRow} /&gt;\n        )\n    }\n\n...\n}\n</code></pre>\n\n<p>But instead, when I define <code>expandRow</code> inside the wrapper component and pass as prop to the <code>&lt;BootstrapTable&gt;</code>, it works.</p>\n\n<pre><code>// works\n&lt;Table /&gt;\n...\nexport class Table extends React.Component {\n   render(){\n       const expandRow = {\n          renderer: (row: any) =&gt; (&lt;h3&gt;Expanded content&lt;/h3&gt;)\n       }\n       return (\n          &lt;BootstrapTable ... expandRow={expandRow} /&gt;\n       )\n   }\n}\n</code></pre>\n\n<p>What is happening wrong here?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 1534, "user_id": 4589931, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-7h3oUiT0GNI/AAAAAAAAAAI/AAAAAAAAAJk/BMEx6gt1MWg/photo.jpg?sz=128", "display_name": "Rastalamm", "link": "https://stackoverflow.com/users/4589931/rastalamm"}, "edited": false, "score": 0, "creation_date": 1563979177, "post_id": 57185466, "comment_id": 100881447, "body": "In your initial array, will you ever have two objects with the same <code>itemsId</code> and different <code>quantity</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 14808, "user_id": 8053274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3b63d7d92b7c13a683e3763941972e7?s=128&d=identicon&r=PG&f=1", "display_name": "User863", "link": "https://stackoverflow.com/users/8053274/user863"}, "edited": false, "score": 0, "creation_date": 1563979526, "post_id": 57185518, "comment_id": 100881659, "body": "No need to worry about unique keys in this case. i think"}], "tags": [], "owner": {"reputation": 42804, "user_id": 2181397, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/616931b5c5ba8790a191fa6aea465c65?s=128&d=identicon&r=PG", "display_name": "brk", "link": "https://stackoverflow.com/users/2181397/brk"}, "is_accepted": false, "score": 1, "last_activity_date": 1563979182, "creation_date": 1563979182, "answer_id": 57185518, "question_id": 57185466, "link": "https://stackoverflow.com/questions/57185466/need-to-pair-values-of-objects-from-array/57185518#57185518", "title": "Need to pair values of objects from array", "body": "<p>You can use <code>map</code> to return an array and inside the callback return an object.Use square notation to create the object key. Since object key is unique the new value will overwrite old value inside an object</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let boxes = [{\r\n  \"itemsId\": 19,\r\n  \"quantity\": 0\r\n}, {\r\n  \"itemsId\": 1053,\r\n  \"quantity\": 1\r\n}, {\r\n  \"itemsId\": 1056,\r\n  \"quantity\": 1\r\n}];\r\n\r\nlet newData = boxes.map(function(elem) {\r\n  return {\r\n    [elem.itemsId]: elem.quantity\r\n  }\r\n\r\n});\r\n\r\nconsole.log(newData)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 14808, "user_id": 8053274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3b63d7d92b7c13a683e3763941972e7?s=128&d=identicon&r=PG&f=1", "display_name": "User863", "link": "https://stackoverflow.com/users/8053274/user863"}, "is_accepted": false, "score": 1, "last_activity_date": 1563979272, "creation_date": 1563979272, "answer_id": 57185550, "question_id": 57185466, "link": "https://stackoverflow.com/questions/57185466/need-to-pair-values-of-objects-from-array/57185550#57185550", "title": "Need to pair values of objects from array", "body": "<p>Using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" rel=\"nofollow noreferrer\"><strong><code>map()</code></strong></a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var boxes = [{\"itemsId\":19,\"quantity\":0},{\"itemsId\":1053,\"quantity\":1},{\"itemsId\":1056,\"quantity\":1}];\r\n\r\nvar result = boxes.map(({itemsId, quantity}) =&gt; ({[itemsId]: quantity}))\r\n\r\nconsole.log(result)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 57406, "user_id": 7461381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20611e3583655e5bf1f727727804c4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Mamun", "link": "https://stackoverflow.com/users/7461381/mamun"}, "is_accepted": false, "score": 2, "last_activity_date": 1563979680, "last_edit_date": 1563979680, "creation_date": 1563979273, "answer_id": 57185552, "question_id": 57185466, "link": "https://stackoverflow.com/questions/57185466/need-to-pair-values-of-objects-from-array/57185552#57185552", "title": "Need to pair values of objects from array", "body": "<p>You can try with <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" rel=\"nofollow noreferrer\"><code>Array.prototype.map()</code></a>:</p>\n\n<blockquote>\n  <p>The <code>map()</code> method creates a new array with the results of calling a provided function on every element in the calling array.</p>\n</blockquote>\n\n<p>In each iteration set the value of <em>itemsId</em> as the key and the value of <em>quantity</em> as the value for that key.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var boxes= [{\"itemsId\":19,\"quantity\":0},{\"itemsId\":1053,\"quantity\":1},{\"itemsId\":1056,\"quantity\":1}];\r\nboxes = boxes.map(i =&gt; ({[i.itemsId]:i.quantity}));\r\nconsole.log(boxes);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 11, "user_id": 11582039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61aa7b5f66a5d8697373b43ab84a9dc8?s=128&d=identicon&r=PG&f=1", "display_name": "Galla87", "link": "https://stackoverflow.com/users/11582039/galla87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1563979680, "creation_date": 1563979026, "last_edit_date": 1563979050, "question_id": 57185466, "link": "https://stackoverflow.com/questions/57185466/need-to-pair-values-of-objects-from-array", "title": "Need to pair values of objects from array", "body": "<p>I have an array of objects:</p>\n\n<pre><code>boxes= [{\"itemsId\":19,\"quantity\":0},{\"itemsId\":1053,\"quantity\":1},{\"itemsId\":1056,\"quantity\":1}];\n</code></pre>\n\n<p>How to pair values of objects from array? \nHere's what I'd like boxes to look like:</p>\n\n<pre><code>boxes= [{\"itemsId\":quantity},{\"itemsId\":quantity},{\"itemsId\":quantity}];\n</code></pre>\n\n<p>ie.</p>\n\n<pre><code>boxes= [{\"19\":0},{\"1053\":1},{\"1056\":1}];\n</code></pre>\n"}, {"tags": ["typescript", "aws-cdk"], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 7182586, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8cfda2963b4f53b4aad942c44cb3604c?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/7182586/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1564168823, "creation_date": 1564168823, "answer_id": 57225934, "question_id": 57185458, "link": "https://stackoverflow.com/questions/57185458/aws-cdk-how-to-invoke-function-fn-cidr/57225934#57225934", "title": "AWS CDK - How to invoke function Fn.cidr?", "body": "<p>The issue is that instead of</p>\n\n<pre><code>for(let cidr in subnetCidrs){\n        console.log('cidr: '+cidr);\n}\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>for(let cidr of subnetCidrs){\n        console.log('cidr: '+cidr);\n}\n</code></pre>\n\n<p>it should be <code>let ... of</code> instead of <code>let ... in</code></p>\n"}], "owner": {"reputation": 499, "user_id": 7182586, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8cfda2963b4f53b4aad942c44cb3604c?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/7182586/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564168823, "creation_date": 1563979003, "question_id": 57185458, "link": "https://stackoverflow.com/questions/57185458/aws-cdk-how-to-invoke-function-fn-cidr", "title": "AWS CDK - How to invoke function Fn.cidr?", "body": "<p>I am trying to invoke function <code>Fn.cidr('10.0.0.0/16', 256, '8');</code> using AWS CDK (typescript <a href=\"https://docs.aws.amazon.com/cdk/api/latest/typescript/api/core/fn.html#core_Fn_cidr\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cdk/api/latest/typescript/api/core/fn.html#core_Fn_cidr</a>), but so far this function keeps returning an array of 1 with a cidr value of 0. It seems like this function doesn't work, does anyone knows how to use this function and have a working example?</p>\n\n<p>I was expecting this function to work as described in <a href=\"https://blog.james.rcpt.to/2018/03/16/aws-vpcs-calculating-subnets-in-cloudformation/\" rel=\"nofollow noreferrer\">https://blog.james.rcpt.to/2018/03/16/aws-vpcs-calculating-subnets-in-cloudformation/</a></p>\n\n<p>Example:</p>\n\n<pre><code>const subnetCidrs = Fn.cidr('10.0.0.0/16', 256, '8');\nconsole.log('length'+subnetCidrs.length);\nfor(let cidr in subnetCidrs){\n    console.log('cidr: '+cidr);\n}\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563978593, "post_id": 57185274, "comment_id": 100881063, "body": "<code>P</code> and <code>A</code> and <code>B</code> are the same type.  TypeScript&#39;s type system is <a href=\"https://github.com/Microsoft/TypeScript/wiki/FAQ#what-is-structural-typing\" rel=\"nofollow noreferrer\">structural</a>, not nominal.  That is: names don&#39;t define types, shapes do.  <code>Exclude&lt;A | B, B&gt;</code> is the same as <code>Exclude&lt;A | A, A&gt;</code> or <code>Exclude&lt;A, A&gt;</code> or <code>never</code>."}, {"owner": {"reputation": 182, "user_id": 5950790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1952194bd6ea175af048ec1f4a8feae8?s=128&d=identicon&r=PG&f=1", "display_name": "spmdc", "link": "https://stackoverflow.com/users/5950790/spmdc"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563978934, "post_id": 57185274, "comment_id": 100881289, "body": "Thanks, that already makes it a bit clearer, but my actual types are not the same and it still shows as <code>never</code>. I will try to update the example with better types."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1563980113, "post_id": 57185274, "comment_id": 100881989, "body": "Yes, <code>A extends B</code> is considered true, since an object of type <code>A</code> is <i>almost</i> always assignable to a variable of type <code>B</code>, with the exception of something like <code>{id: &quot;a&quot;, attrA: &quot;a&quot;, attrB: 123}</code>, which requires subtraction/negation types to represent more soundly.  Can you just make sure <code>B</code> has a property that distinguishes it from <code>A</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3284, "user_id": 1841827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7626f7fd5a7d9ecc5f84d42c7eea4405?s=128&d=identicon&r=PG", "display_name": "Kewin Dousse", "link": "https://stackoverflow.com/users/1841827/kewin-dousse"}, "edited": false, "score": 0, "creation_date": 1563998167, "post_id": 57189802, "comment_id": 100890516, "body": "Thanks a lot for the lengthy but complete explanation."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 3, "last_activity_date": 1563995688, "creation_date": 1563995688, "answer_id": 57189802, "question_id": 57185274, "link": "https://stackoverflow.com/questions/57185274/typescript-how-to-exclude-an-interface-with-only-optional-properties-from-a-uni/57189802#57189802", "title": "Typescript: how to Exclude an interface with only optional properties from a union type", "body": "<p>Given these types:</p>\n\n<pre><code>interface P {\n    id: string\n}\n\ninterface A extends P {\n    attrA: string\n}\n\ninterface B extends P {\n    attrB?: string\n}\n\ntype R = Exclude&lt;A | B, B&gt;; // never\n</code></pre>\n\n<p>The type <code>R</code> is <code>never</code> because <code>A extends B</code> is perceived by the compiler to be true:</p>\n\n<pre><code>const a: A = { id: \"a\", attrA: \"A\" };\nconst b: B = a; // okay\n</code></pre>\n\n<p>You can see that <code>a</code> is a valid <code>A</code>, but it's also a valid <code>B</code>.  Object types in TypeScript are not <a href=\"https://github.com/Microsoft/TypeScript/issues/12936\" rel=\"nofollow noreferrer\">exact</a>; you can extend a type by adding properties (which is why <code>A</code> is assignable to <code>P</code>, even though <code>A</code> has an extra property).  From the type system's point of view, every value of type <code>A</code> is also a value of type <code>B</code>, and so, <code>Exclude&lt;A | B, B&gt;</code> removes both <code>A</code> and <code>B</code> from the union and you are left with <code>never</code>.</p>\n\n<hr>\n\n<p>Of course, it isn't actually type safe to have <code>A</code> assignable to <code>B</code>.  The compiler assumes that <em>every</em> value of type <code>A</code> is also of type <code>B</code>, but really it's more like <em>almost</em> every value.  There are some specific values of type <code>A</code> which are should not be assignable to type <code>B</code>, namely anything with an <code>attrB</code> property of an incompatible type:</p>\n\n<pre><code>const aButNotB = {id: \"a\", attrA: \"A\", attrB: 123}\nconst alsoA: A = aButNotB; // okay\nconst notB: B = aButNotB; // error, attrB is incompatible\nconst butWait: B = alsoA; // no error?! attrB is still incompatible, but compiler forgot!\n</code></pre>\n\n<p>But since TypeScript doesn't yet support <a href=\"https://github.com/microsoft/TypeScript/pull/29317#issuecomment-504379078\" rel=\"nofollow noreferrer\">negated types</a>, there's no way in TypeScript to represent \"Every <code>A</code> which is not a <code>B</code>\" as a concrete type.  And so, when comparing two object types, the compiler just ignores optional properties present in just one of them... leading to this blind spot.  </p>\n\n<hr>\n\n<p>So that's why it's happening.  As for how to fix this, it depends on your use case.  </p>\n\n<p>Ideally if you really need to be able to discriminate values of a union of types from each other, you would use a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" rel=\"nofollow noreferrer\">discriminated union</a>.  This means the union should contain some property or properties which can be used to absolutely tell them apart from each other.  For example, let's imagine adding a <code>type</code> discriminant property:</p>\n\n<pre><code>interface A\u02b9 extends A {\n  type: \"A\";\n}\n\ninterface B\u02b9 extends B {\n  type: \"B\";\n}\n\ntype R\u02b9 = Exclude&lt;A\u02b9 | B\u02b9, B\u02b9&gt;; // A\u02b9\n</code></pre>\n\n<p>Now there is no way for a value of type <code>A\u02b9</code> to be assignable to type <code>B\u02b9</code> or vice versa, and now <code>Exclude</code> behaves as you expect.</p>\n\n<hr>\n\n<p>Or, if you're just looking at how to do the <code>Exclude</code> the way you expect, you can modify your <code>A</code> and <code>B</code> types before processing them, and then unmodify the result, like this:</p>\n\n<pre><code>type OptToUndef&lt;T&gt; = {\n  [K in keyof Required&lt;T&gt;]: T[K] | ({} extends Pick&lt;T, K&gt; ? undefined : never)\n};\ntype UndefToOpt&lt;T&gt; = (Partial&lt;\n  Pick&lt;T, { [K in keyof T]: undefined extends T[K] ? K : never }[keyof T]&gt;\n&gt; &amp;\n  Pick&lt;\n    T,\n    { [K in keyof T]: undefined extends T[K] ? never : K }[keyof T]\n  &gt;) extends infer O\n  ? { [K in keyof O]: O[K] }\n  : never;\n</code></pre>\n\n<p>Basically <code>OptToUndef&lt;T&gt;</code> takes an object type <code>T</code> and makes all optional types required but their property types include <code>undefined</code>.  And <code>UndefToOpt&lt;T&gt;</code> takes an object type <code>T</code> and makes all properties whose types include <code>undefined</code> into optional properties.  These are more-or-less inverse operations of each other (as long as you don't have <em>required</em> types including <code>undefined</code>).   Then you can do this:</p>\n\n<pre><code>type UA = OptToUndef&lt;A&gt;; // {id: string; attrA: string }\ntype UB = OptToUndef&lt;B&gt;; // {id: string; attrB: string | undefined }\ntype UR = Exclude&lt;UA | UB, UB&gt;; // same as UA\ntype Rfixed = UndefToOpt&lt;UR&gt;; // same as A\n</code></pre>\n\n<p>Something like that might work for you, where you tweak <code>B</code> to not be all-optional, and then un-tweak it when you're done.</p>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"http://www.typescriptlang.org/play//?target=6#code/JYOwLgpgTgZghgYwgAgArIN4FgBQznAAmAXMgM5hSgDmA3LgL666iSyIoCCyEAHpCEJk0mXPjhhKnUhSog6jZjlbR4SZACEe-CIOHpseZBMoaA-DMo16OJjlxgAngAcUAJWQBeZAFFeCABsAV0IIAB5uAB9NABpNAD5aZAB6ZOQQCAA3aCUEAHsQCmNSbm8MAhJkACI4KriTKGlqzirkBht8wrBkACNSLW84JNTkPIBrOEdcgqK4DSCwADk8sAHMCtIauuNJRs2W+t2NUgBGACYAZjaOme64ALI8ptLjeaWVjWG08cncTqKQB9+l5XgtlqsvjwoFA8lBDqYCMJQPkALbOCTAHoBCB-W69BYAdTgwDAwMGDyekMBUJhUDMAEIdgjgMIKMAAgECCBUeiwJjsXEegtkDz2dBkDBYdQVvSlCp2OpUIBOoG0AiEIkM+CcrkscgUtjl4FUHGQnBVfDVwm4muQ2og+yqNjsLCNCpQGnNOj0mlERjtmw0jsU9hwduQbhV3j8gRC4TNyGiHriHsSKTSZqUYYA8s4wAAVPIAVUEEBgYTz8RBNoA2gBpLnIMYQRx5GDhiAARyCwCgEEI5fiAF1SHm64OE8gABQYBiq3Tq1DABBjctxWuVszIIIlmCgPvIUgZbJQACUjBsYeLoRgBZzYAHIMnqDgUD59zCYjQS5Xebi5TrDZNi2bZ5sOW47nuhBzt6o61uOm71oeWTigw1ZAa2yCgfEuCVgAZJ+i7Lh+Rj4L+n74P+9agI2zYYaBpDbtekHQeqsHwekyFQAeyD1qh6EgYOn7xCeLFIiAMDilmn6bpRgG0W2WZgVmY5tJ+SHHjYDguCghYvHeBZXqWESJFprjIIWaz6UWO5hBoJmhtp5keFG-jBKEYS6ROFlxBZqYjGQcAoigcDCLppnuLuvD7t4hk3nkd4eW4flpAFQXGFauBAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 182, "user_id": 5950790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1952194bd6ea175af048ec1f4a8feae8?s=128&d=identicon&r=PG&f=1", "display_name": "spmdc", "link": "https://stackoverflow.com/users/5950790/spmdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 1, "accepted_answer_id": 57189802, "answer_count": 1, "score": 2, "last_activity_date": 1563995688, "creation_date": 1563978389, "last_edit_date": 1563979921, "question_id": 57185274, "link": "https://stackoverflow.com/questions/57185274/typescript-how-to-exclude-an-interface-with-only-optional-properties-from-a-uni", "title": "Typescript: how to Exclude an interface with only optional properties from a union type", "body": "<p>I have a few interfaces similar to these, where the interface that I want to later exclude consists of only optional properties:</p>\n\n<pre><code>interface P {\n    id: string\n}\n\ninterface A extends P {\n    attrA: string\n}\n\ninterface B extends P {\n    attrB?: string\n}\n</code></pre>\n\n<p>Now excluding this interface from a union with other interfaces doesn't work:</p>\n\n<pre><code>type R = Exclude&lt;A | B, B&gt; // expected: A, is: never\n</code></pre>\n\n<p>Type <code>R</code> is <code>never</code>, but should be <code>A</code>.</p>\n\n<p>I can see that <code>Exclude&lt;T, U&gt; = T extends U ? never : T</code> and apparently <code>A extends B</code> is <code>true</code> if <code>B</code> consists only of optional properties. Why is that?</p>\n\n<p>And how can I properly exclude a type from a union type of interfaces?</p>\n"}, {"tags": ["reactjs", "typescript", "material-ui", "styled-components"], "comments": [{"owner": {"reputation": 833, "user_id": 2798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276b0af29760b43c0f78494ad0a4be92?s=128&d=identicon&r=PG", "display_name": "ron4ex", "link": "https://stackoverflow.com/users/2798063/ron4ex"}, "edited": false, "score": 0, "creation_date": 1564006234, "post_id": 57185059, "comment_id": 100893237, "body": "Which version of <code>styled-components</code> are you using? This is not reproducible in <code>4.3.2</code>."}, {"owner": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "reply_to_user": {"reputation": 833, "user_id": 2798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276b0af29760b43c0f78494ad0a4be92?s=128&d=identicon&r=PG", "display_name": "ron4ex", "link": "https://stackoverflow.com/users/2798063/ron4ex"}, "edited": false, "score": 0, "creation_date": 1564029948, "post_id": 57185059, "comment_id": 100897601, "body": "these are the versions -- styled-components: ^4.3.2,  @types/styled-components: ^4.1.18, react: ^16.8.6, react-dom: ^16.8.6, typescript: 3.5.3,"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "edited": false, "score": 0, "creation_date": 1564037189, "post_id": 57194646, "comment_id": 100900270, "body": "Your Link is Useful and i missed some code from my error (sorry about that) here i again update my question. Please check it.!"}, {"owner": {"reputation": 833, "user_id": 2798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276b0af29760b43c0f78494ad0a4be92?s=128&d=identicon&r=PG", "display_name": "ron4ex", "link": "https://stackoverflow.com/users/2798063/ron4ex"}, "reply_to_user": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "edited": false, "score": 0, "creation_date": 1564048717, "post_id": 57194646, "comment_id": 100906569, "body": "Updated the answer. Have a look."}, {"owner": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "edited": false, "score": 0, "creation_date": 1564118553, "post_id": 57194646, "comment_id": 100932417, "body": "thank you for your share! i used typescript with react. so still i could not used your code. anyhow i find another way to fix that error.!"}, {"owner": {"reputation": 833, "user_id": 2798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276b0af29760b43c0f78494ad0a4be92?s=128&d=identicon&r=PG", "display_name": "ron4ex", "link": "https://stackoverflow.com/users/2798063/ron4ex"}, "reply_to_user": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "edited": false, "score": 0, "creation_date": 1564119842, "post_id": 57194646, "comment_id": 100932739, "body": "Using string is what I mentioned as well, as one of two ways \u2014 <i>You can either use &quot;true&quot; or &quot;false&quot; as string like the error suggests</i>. Good that you were able to solve it."}], "tags": [], "owner": {"reputation": 833, "user_id": 2798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276b0af29760b43c0f78494ad0a4be92?s=128&d=identicon&r=PG", "display_name": "ron4ex", "link": "https://stackoverflow.com/users/2798063/ron4ex"}, "is_accepted": false, "score": 2, "last_activity_date": 1564048678, "last_edit_date": 1564048678, "creation_date": 1564031012, "answer_id": 57194646, "question_id": 57185059, "link": "https://stackoverflow.com/questions/57185059/when-using-props-in-styled-component-it-works-well-but-shows-warning-warning-r/57194646#57194646", "title": "when using props in styled component it works well but shows warning (Warning: Received `true` for a non-boolean attribute `cen` )", "body": "<p>Here is a demo of the exact code that you have shared: <a href=\"https://stackblitz.com/edit/react-styled-components-warning\" rel=\"nofollow noreferrer\">demo</a></p>\n\n<p>It doesn't show any warning. Is there anything else that might be missing from the code that you've shared?</p>\n\n<p>In general though, here is why you get such a warning: <a href=\"https://www.styled-components.com/docs/faqs#why-am-i-getting-html-attribute-warnings\" rel=\"nofollow noreferrer\">HTML Attribute Warning</a></p>\n\n<blockquote>\n  <p>If you're seeing this warning you are probably passing true where\n  \"true\" would be appropriate. It's likely that this comes from a .attrs\n  property, or from a completely unrelated prop that you're passing to a\n  styled(Component) component.</p>\n</blockquote>\n\n<h3>UPDATE:</h3>\n\n<p>Unfortunately it is <code>@material-ui/core</code> that is passing all the props which it cannot recognize down to html. Since <code>cen</code> is unrecognized, it gets passed down to html and only string value can be flushed to html. Hence the error. You can either use \"true\" or \"false\" as string like the error suggests or another way would be to separate your custom props from the rest of the props by using <code>styled-components</code>'s css prop. Rewrite the component in this manner:</p>\n\n<pre><code>const StyledButton = ({ cen, ...props }) =&gt; {\n  return (\n    &lt;Button\n      css={`\n        &amp;&amp; {\n            ${cen &amp;&amp; 'display: block;'}\n            margin: 30px auto;\n            border-radius: 24px;\n            padding: 8px 28px;\n          }\n      `}\n      {...props}\n    /&gt;\n  )\n}\n</code></pre>\n\n<p>This way you can stop your custom props from propagating down the tree.</p>\n\n<p>Here's a couple of official posts to check if you're not aware of how to setup <code>css</code> prop in <code>styled-components</code>.</p>\n\n<ul>\n<li><a href=\"https://medium.com/styled-components/announcing-native-support-for-the-css-prop-in-styled-components-245ca5252feb\" rel=\"nofollow noreferrer\">Manual setup</a></li>\n<li><a href=\"https://medium.com/styled-components/css-prop-support-for-create-react-app-37e8c5d96861\" rel=\"nofollow noreferrer\">For create-react-app</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "is_accepted": true, "score": 0, "last_activity_date": 1564119014, "creation_date": 1564119014, "answer_id": 57213673, "question_id": 57185059, "link": "https://stackoverflow.com/questions/57185059/when-using-props-in-styled-component-it-works-well-but-shows-warning-warning-r/57213673#57213673", "title": "when using props in styled component it works well but shows warning (Warning: Received `true` for a non-boolean attribute `cen` )", "body": "<p>it's a kind of data type error.! so i try to fix with string type instead of Boolean.</p>\n\n<pre><code>import React from 'react'  \nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\n\ninterface Cnt {\n  cen?: string\n}\nconst Bnt3 = styled(Button)`\n&amp;&amp;{\n  ${(props:Cnt) =&gt; props.cen &amp;&amp; 'display: block;'}\n  margin: 30px auto;\n  border-radius: 24px;\n  padding: 8px 28px;\n}`\n\nconst Test: React.FC = () =&gt; {\n  return (\n    &lt;&gt;\n    &lt;Bnt3 cen='true' variant=\"contained\" type=\"button\" color=\"secondary\" &gt;Log In&lt;/Bnt3&gt;\n    &lt;Bnt3 variant=\"contained\" type=\"button\" color=\"secondary\"&gt;Log In&lt;/Bnt3&gt;\n    &lt;/&gt;\n  ); \n}\nexport default Test;\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 8467320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c40592895e9f7064cd24759aa443bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8467320/rizwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "accepted_answer_id": 57213673, "answer_count": 2, "score": 1, "last_activity_date": 1564119014, "creation_date": 1563977752, "last_edit_date": 1564037019, "question_id": 57185059, "link": "https://stackoverflow.com/questions/57185059/when-using-props-in-styled-component-it-works-well-but-shows-warning-warning-r", "title": "when using props in styled component it works well but shows warning (Warning: Received `true` for a non-boolean attribute `cen` )", "body": "<p><strong>Warning: Received \"true\" for a non-boolean attribute \"cen\" If you want to write it to the DOM, pass a string instead: cen=\"true\" or cen={value.toString()}.</strong> When i using Props in Styled-Component with typescript and Material-UI it works well but shows warning </p>\n\n<pre><code>import React from 'react'  \nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\n\ninterface Cnt {\n  cen?: boolean\n}\nconst Bnt3 = styled(Button)`\n&amp;&amp;{\n  ${(props:Cnt) =&gt; props.cen &amp;&amp; 'display: block;'}\n  margin: 30px auto;\n  border-radius: 24px;\n  padding: 8px 28px;\n}\n`\nconst Test: React.FC = () =&gt; {\n  return (\n    &lt;&gt;\n    &lt;Bnt3 cen variant=\"contained\" type=\"button\" color=\"secondary\" &gt;Log In&lt;/Bnt3&gt;\n    &lt;Bnt3 variant=\"contained\" type=\"button\" color=\"secondary\"&gt;Log In&lt;/Bnt3&gt;\n    &lt;/&gt;\n  ); \n}\nexport default Test;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/hKwFG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hKwFG.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions"], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "edited": false, "score": 0, "creation_date": 1563991291, "post_id": 57186591, "comment_id": 100887587, "body": "I am familiar with this, I know that the const variable is the top level and that in the app.get or app.post, etc the second part of the path is, which is out of control of the firebase cloud. I also know that the first part is unavoidable but I try to find a way that the second part of the path isn&#39;t required so I don&#39;t need 2 names in my path (I call them function names, which propably generated some confusing, it could be any name of course).   The link you gave states the solution you offer only works in the us-central region, I want to use the europe-west region."}, {"owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "edited": false, "score": 0, "creation_date": 1563991383, "post_id": 57186591, "comment_id": 100887639, "body": "Also, when I want to use the rewrite like suggested in the link, the source: ** is already used for the spa configuration of firebase in firebase.json and redirects to /index.html. So I didn&#39;t quite understand how that can work without conflicting situations."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "edited": false, "score": 0, "creation_date": 1563993771, "post_id": 57186591, "comment_id": 100888730, "body": "Seems to me that you don&#39;t have any options, then, unless you wanted to migrate to Cloud Run.  Firebase Hosting will proxy to a region of your choice with that product.  You should file a feature request for multiple region support for proxy to Cloud Functions.  <a href=\"https://support.google.com/firebase/contact/support\" rel=\"nofollow noreferrer\">support.google.com/firebase/contact/support</a>"}, {"owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "edited": false, "score": 0, "creation_date": 1564003570, "post_id": 57186591, "comment_id": 100892499, "body": "okay, no problem. It is not the end of the world of course to have endpoints with 2 names. In the services of the client I want to add a function anyway that is concating the base url with the endpoint path and now I have to add an additional name. It looks a bit silly but if there is no other way, then so be it. Thank you for answering and thinking along."}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1563982584, "creation_date": 1563982584, "answer_id": 57186591, "question_id": 57184832, "link": "https://stackoverflow.com/questions/57184832/eliminitate-double-function-name-in-firebase-https-function-endpoint/57186591#57186591", "title": "eliminitate double function name in firebase https function endpoint", "body": "<p>This has nothing to do the the way you're organizing your code.  The URL that Cloud Functions assigns will always have the name of the top-level exported function as the first path component.  This is unavoidable.  Your Express route is then adding another path component.</p>\n\n<p>If you want to customize the names of the paths, consider using Firebase Hosting as a caching proxy in front of Cloud Functions.  You can then use a URL rewrite to make the leading part of the path look any way you want.</p>\n\n<p>Here's the documentation: <a href=\"https://firebase.google.com/docs/hosting/functions\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/hosting/functions</a></p>\n"}], "owner": {"reputation": 1257, "user_id": 1856913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68b3c4166ab68850721df43d0fabdb7b?s=128&d=identicon&r=PG", "display_name": "Cornelis", "link": "https://stackoverflow.com/users/1856913/cornelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563982584, "creation_date": 1563977050, "last_edit_date": 1563982393, "question_id": 57184832, "link": "https://stackoverflow.com/questions/57184832/eliminitate-double-function-name-in-firebase-https-function-endpoint", "title": "eliminitate double function name in firebase https function endpoint", "body": "<p>In my journey to get familiar with google cloud functions, I also try to find the 'best' way to organize my functions in a folder structure as well as the endpoint routing structure. I also want to apply the CORS functionality and prevent as many repeating code as possible. And I am almost satisfied with what I have reached, only one last issue is bugging me. The endpoints as I have it now, are now build up like this pattern:</p>\n\n<pre><code>https://&lt;region&gt;-&lt;projectId&gt;.cloudfunctions.net/&lt;functionname1&gt;/functionname2&gt;\n</code></pre>\n\n<p>I have now 2 function names in my route and I haven't found a way yet to eliminate one function name. Out of the box, cloud functions only have 1 function name and the reason I am having 2 function names, got to do with applying CORS to the cloud functions. I am using express and the CORS middleware to do that.</p>\n\n<p>In a single file, I configure my cors (applying whitelisting, handling errors):</p>\n\n<pre><code>const corsConfig = express();\ncorsConfig.use(cors({origin: originCheck })); //&lt;-- function to apply whitelisting\ncorsConfig.use(handleCorsError); //&lt;-- change the 500 error to a 403 error\n\nexport const app = corsConfig;\n</code></pre>\n\n<p>This module I use to add my functions with their endpoints:</p>\n\n<p>test1.ts</p>\n\n<pre><code>import { app } from '../cors';\n\napp.get('/test1', async (_request, response) =&gt; {\n    response.send(\"test1\");\n});\n\nexport const test1 = functionsEUWest1.https.onRequest(app);\n</code></pre>\n\n<p>test2.ts</p>\n\n<pre><code>import { app } from '../cors';\n\napp.get('/test2', async (_request, response) =&gt; {\n    response.send(\"test2\");\n});\n\nexport const test2 = functionsEUWest1.https.onRequest(app);\n</code></pre>\n\n<p>Sidenote: functionsEUWest1 is to configure the region for where to deploy the functions.</p>\n\n<p>Both the test files then are 'imported' (actually exported) in the index.ts which is used by the CLI to find and deploy the functions.</p>\n\n<p>export * from './test1';\nexport * from './test2';</p>\n\n<p>After deploying these functions, the firebase console shows only one functionname in the endpoint url (/test1) but when calling that endpoint, it returns the error: </p>\n\n<blockquote>\n  <p>Cannot GET /\n  When calling with both the function names (/test1/test1) the text 'test1' is returned. The second /test1 is handled internally in the cloud function itself. </p>\n</blockquote>\n\n<p>By using express, it is possible to add more endpoints to the cloud function endpoint and there is a way where for example the endpoints could look like this:</p>\n\n<blockquote>\n  <p>/v1/test1\n  /v1/test2</p>\n</blockquote>\n\n<p>But that would (propably) mean that all the functions are placed in one firebase cloud function. And I think this isn't the way to go due to logging and perhaps performance impact. </p>\n\n<p>Has anyone faced the same situation and managed to find a way to eliminate a function name in the endpoint? Or am I completely on the wrong path with how I try to organize my code now?</p>\n"}, {"tags": ["javascript", "typescript", "object"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 1, "creation_date": 1563976941, "post_id": 57184760, "comment_id": 100879993, "body": "How would you determine if you want &quot;cow&quot; or &quot;monkey&quot; or anything else?"}, {"owner": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "edited": false, "score": 3, "creation_date": 1563976947, "post_id": 57184760, "comment_id": 100879996, "body": "Loop over the keys using <code>Object.keys()</code> and, for each one, check if the key&#39;s value contains <code>leg</code>. Or, if it will only ever be one key, no need to loop; you can just do <code>Object.keys(obj)[0]</code> to get the first key. Or, better yet, if you don&#39;t actually need the key name and just want to know if <code>leg</code> exists, use <code>Object.values(obj)[0].leg</code>."}, {"owner": {"reputation": 441, "user_id": 6573027, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1749905625289064/picture?type=large", "display_name": "Nambi N Rajan", "link": "https://stackoverflow.com/users/6573027/nambi-n-rajan"}, "edited": false, "score": 0, "creation_date": 1563976973, "post_id": 57184760, "comment_id": 100880016, "body": "What do you mean by dynamic.U need to loop through the array and use object.keys function to get the key name and use that to get value inside the array .If you are uncertain of these (monkey,cow...)  keys"}], "answers": [{"comments": [{"owner": {"reputation": 649, "user_id": 11755228, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k16QLfgBgko/AAAAAAAAAAI/AAAAAAAAABU/uJVXrsD12vo/photo.jpg?sz=128", "display_name": "David Fontes", "link": "https://stackoverflow.com/users/11755228/david-fontes"}, "reply_to_user": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "edited": false, "score": 0, "creation_date": 1563977711, "post_id": 57184907, "comment_id": 100880481, "body": "@TylerRoper Thank you, I made it as an inline snippet as you suggested. Also, with the array supplied it works, however I will try to come up with a better solution."}, {"owner": {"reputation": 649, "user_id": 11755228, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k16QLfgBgko/AAAAAAAAAAI/AAAAAAAAABU/uJVXrsD12vo/photo.jpg?sz=128", "display_name": "David Fontes", "link": "https://stackoverflow.com/users/11755228/david-fontes"}, "reply_to_user": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "edited": false, "score": 1, "creation_date": 1563978454, "post_id": 57184907, "comment_id": 100880955, "body": "@vivek_23 I&#39;m not iterating over the array with <code>Object.keys()</code>, I&#39;m only using it to get the keys of each animal."}, {"owner": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "edited": false, "score": 0, "creation_date": 1563978549, "post_id": 57184907, "comment_id": 100881026, "body": "@DavidFontes Ahh!! Overlooked that."}], "tags": [], "owner": {"reputation": 649, "user_id": 11755228, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k16QLfgBgko/AAAAAAAAAAI/AAAAAAAAABU/uJVXrsD12vo/photo.jpg?sz=128", "display_name": "David Fontes", "link": "https://stackoverflow.com/users/11755228/david-fontes"}, "is_accepted": false, "score": 5, "last_activity_date": 1563978298, "last_edit_date": 1563978298, "creation_date": 1563977260, "answer_id": 57184907, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript/57184907#57184907", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>If you are sure that each object within the array as only 1 property (which would be the type of animal), you can do something like this.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>animals = [{\"cow\":{\"leg\":4,\"eye\":2}},{\"monkey\":{\"leg\":2,\"eye\":2}}];\r\n    \r\nfor (let animal of animals) {\r\n  let propName = Object.keys(animal)[0];\r\n  let result = animal[propName];\r\n  console.log(result); // &lt;- Do what you want with it\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1106, "user_id": 4208022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8PLXt.jpg?s=128&g=1", "display_name": "Brandon Dyer", "link": "https://stackoverflow.com/users/4208022/brandon-dyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1563977391, "creation_date": 1563977391, "answer_id": 57184947, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript/57184947#57184947", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>This will give you an array of objects with the contents of each animal.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>animals.map(animal =&gt; animal[Object.keys(animal)[0]]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13597, "user_id": 2513722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/idsXg.jpg?s=128&g=1", "display_name": "mehulmpt", "link": "https://stackoverflow.com/users/2513722/mehulmpt"}, "edited": false, "score": 0, "creation_date": 1563977783, "post_id": 57185000, "comment_id": 100880529, "body": "@TylerRoper thanks for the hint! or I could flatten the array using <code>flat</code>"}, {"owner": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "edited": false, "score": 0, "creation_date": 1563977944, "post_id": 57185000, "comment_id": 100880633, "body": "You can, although you&#39;re using an additional iteration (<code>map</code> -&gt; <code>flat</code>) as opposed to a single <code>flatMap</code>. Not sure what the efficiency difference would be though so it may be negligible."}], "tags": [], "owner": {"reputation": 13597, "user_id": 2513722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/idsXg.jpg?s=128&g=1", "display_name": "mehulmpt", "link": "https://stackoverflow.com/users/2513722/mehulmpt"}, "is_accepted": false, "score": 0, "last_activity_date": 1563977754, "last_edit_date": 1563977754, "creation_date": 1563977533, "answer_id": 57185000, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript/57185000#57185000", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>Maybe convert it into a \"non-dynamic-key\" object?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const animal = [{\"cow\":{\"leg\":4,\"eye\":2}},{\"monkey\":{\"leg\":2,\"eye\":2}}]\r\nconst newanimal = animal.map(obj =&gt; {\r\n  const keys = Object.keys(obj)\r\n  return keys.map(key =&gt; ({ key, value: obj[key] }))\r\n}).flat(Math.Infinity)\r\n\r\nconsole.log(newanimal)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1563977684, "creation_date": 1563977684, "answer_id": 57185040, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript/57185040#57185040", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>1) Find an animal with that key</p>\n\n<p>2) Return it with [animal]</p>\n\n<p>3) Use it as you would (<code>.leg</code>)</p>\n\n<pre><code>const animals = [{ cow: { leg: 4, eye: 2 } }, { monkey: { leg: 2, eye: 2 } }];\n\nconst animal = 'cow';\nconst leg = animals.find(a =&gt; !!a[animal])[animal].leg;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42804, "user_id": 2181397, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/616931b5c5ba8790a191fa6aea465c65?s=128&d=identicon&r=PG", "display_name": "brk", "link": "https://stackoverflow.com/users/2181397/brk"}, "is_accepted": false, "score": 0, "last_activity_date": 1563977784, "creation_date": 1563977784, "answer_id": 57185064, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript/57185064#57185064", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>You can use <code>map</code> &amp; <code>Object.keys</code>. <code>map</code> will return a new array. <code>Object.keys</code> is use to get all the keys inside each of the object in animal array.Then this line <code>elem[getKeys].leg</code> will retrieve the value of the leg key</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let animal = [{\r\n  \"cow\": {\r\n    \"leg\": 4,\r\n    \"eye\": 2\r\n  }\r\n}, {\r\n  \"monkey\": {\r\n    \"leg\": 2,\r\n    \"eye\": 2\r\n  }\r\n}];\r\n\r\nlet legVal = animal.map((elem) =&gt; {\r\n  let getKeys = Object.keys(elem)[0];\r\n  return elem[getKeys].leg\r\n})\r\n\r\nconsole.log(legVal)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1748, "user_id": 4374738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d814eac36e4f8ffba259b43025f3813?s=128&d=identicon&r=PG&f=1", "display_name": "adz5A", "link": "https://stackoverflow.com/users/4374738/adz5a"}, "is_accepted": false, "score": 0, "last_activity_date": 1563978614, "creation_date": 1563978614, "answer_id": 57185339, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript/57185339#57185339", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>You can use the newly added <code>Object.entries</code>, which make the most sense imo.</p>\n\n<p>Thus for your data you have:</p>\n\n<pre><code>const animal = ...\nfor (a of animal) {\n    const [animalName, animalDesc] = Object.entries(a)[0]; // assumes there is only one\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1722366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dafeb9e0d7ec921960c00f5fa62e15c2?s=128&d=identicon&r=PG", "display_name": "user1722366", "link": "https://stackoverflow.com/users/1722366/user1722366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7054, "favorite_count": 0, "answer_count": 6, "score": 2, "last_activity_date": 1563978614, "creation_date": 1563976833, "question_id": 57184760, "link": "https://stackoverflow.com/questions/57184760/how-to-get-value-if-the-object-key-is-dynamic-in-typescript", "title": "how to get value if the object key is dynamic in typescript?", "body": "<p>I have an array of object.structure is like that. </p>\n\n<pre><code>animal = [{\"cow\":{\"leg\":4,\"eye\":2}},{\"monkey\":{\"leg\":2,\"eye\":2}}]\n</code></pre>\n\n<p>here first key is dynamic like cow and monkey</p>\n\n<p>so my question is how can i access the key leg if first key is dynamic</p>\n"}, {"tags": ["angular", "typescript", "constructor", "angular6", "jsplumb"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "edited": false, "score": 0, "creation_date": 1563978602, "post_id": 57184822, "comment_id": 100881066, "body": "thanks for the quick response. I don&#39;t understand how can I use the index to stop the constructor from being called twice?"}], "tags": [], "owner": {"reputation": 34, "user_id": 6489009, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4r2BaXEwznQ/AAAAAAAAAAI/AAAAAAAAABI/EIs3dKS9tws/photo.jpg?sz=128", "display_name": "Joe Lee", "link": "https://stackoverflow.com/users/6489009/joe-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1563977021, "creation_date": 1563977021, "answer_id": 57184822, "question_id": 57184606, "link": "https://stackoverflow.com/questions/57184606/components-constructor-called-twice/57184822#57184822", "title": "Component&#39;s Constructor called twice", "body": "<p>You can use the local variables \"let i = index\" to get your index of *ngFor array ( in your case , nodes ) . And pass back using (click), write the logic in your parent.component.ts file. </p>\n\n<pre><code>&lt;div *ngFor=\"let n of nodes; let i = index\"&gt;\n  &lt;&lt;app-file-selection (click)=\"addNode(i)&gt;&lt;/&lt;app-file-selection&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "edited": false, "score": 0, "creation_date": 1563979881, "post_id": 57184886, "comment_id": 100881861, "body": "thanks this did work and the constructor is called only once now, but I don&#39;t a list with objects now, it&#39;s just a list of strings, how can I access the child element properties like <code>id</code>, <code>selected_file</code>, <code>type</code>,... ??"}, {"owner": {"reputation": 779, "user_id": 3329325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1296992706/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/3329325/alex"}, "reply_to_user": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "edited": false, "score": 0, "creation_date": 1563980568, "post_id": 57184886, "comment_id": 100882255, "body": "If you need to access some data from your child component, use Angular bindings like Output: <a href=\"https://angular.io/guide/component-interaction\" rel=\"nofollow noreferrer\">angular.io/guide/component-interaction</a>"}, {"owner": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "edited": false, "score": 0, "creation_date": 1563984262, "post_id": 57184886, "comment_id": 100884273, "body": "Actually I was trying to avoid that, I&#39;m planing to use different kinds of nodes not just <code>FileSelectionComponent</code> and passing data from one to the other. Using <code>@Output</code> and <code>@Input</code> will make it happen but it would be more complex than just objects in a list, where I can directly acces their attributes. If there is no work around then I&#39;ll take that."}, {"owner": {"reputation": 779, "user_id": 3329325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1296992706/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/3329325/alex"}, "reply_to_user": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "edited": false, "score": 0, "creation_date": 1563984577, "post_id": 57184886, "comment_id": 100884444, "body": "Your way would work too, but it&#39;s getting out of the framework kinda. I would create a service to store the common data for all involved components to access it instead, containing both the array of nodes and the data generated by the child components. You can use an Enum for your node types and use an ngSwitch to decide which to display depending on the id"}, {"owner": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "edited": false, "score": 0, "creation_date": 1563986341, "post_id": 57184886, "comment_id": 100885332, "body": "Great, that service approach might be exactly what I need. Thanks"}], "tags": [], "owner": {"reputation": 779, "user_id": 3329325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1296992706/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/3329325/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1563977181, "creation_date": 1563977181, "answer_id": 57184886, "question_id": 57184606, "link": "https://stackoverflow.com/questions/57184606/components-constructor-called-twice/57184886#57184886", "title": "Component&#39;s Constructor called twice", "body": "<p>Your <code>&lt;app-file-selection&gt;&lt;/app-file-selection&gt;</code> tag is already instantiating the component by default. That means that it gets instanciated both in your template and in your logic. You don't need to use a New with angular components generally speaking.</p>\n\n<p>You can go for something like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>this.nodes = new BehaviorSubject&lt;Array&lt;any&gt;&gt;([]);\r\nthis.fileSelectorNodes = [];\r\n\r\nngOnInit() {\r\n  this.nodes.subscribe(nodes =&gt; {\r\n    this.updateNodes(nodes);\r\n  });\r\n}\r\n\r\naddNode(type) {\r\n  const nodes = this.nodes.getValue();\r\n  nodes.push(type);\r\n  this.nodes.next(nodes);\r\n}\r\n\r\nupdateNodes(nodes: Array&lt;any&gt;) {\r\n  this.fileSelectorNodes = nodes.filter(node =&gt; node === 'app-file-selection');\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;app-file-selection [jspinst]=\"jspl\" *ngFor=\"let fileSelector of fileSelectorNodes\"&gt;&lt;/app-file-selection&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 13, "user_id": 11829397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1630883250278389/picture?type=large", "display_name": "Muhammad", "link": "https://stackoverflow.com/users/11829397/muhammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 57184886, "answer_count": 2, "score": 0, "last_activity_date": 1563977181, "creation_date": 1563976426, "last_edit_date": 1563976930, "question_id": 57184606, "link": "https://stackoverflow.com/questions/57184606/components-constructor-called-twice", "title": "Component&#39;s Constructor called twice", "body": "<p>So I have this child component, where the <code>id</code> property is set randomly :</p>\n\n<pre><code>export class FileSelectionComponent implements AfterViewInit {\n  public type = 'app-file-selection';\n  public id = 'FileSelection#' + Math.random().toString(16).slice(2, 8);\n  @Input() jspinst: any;\n  public x;\n  public y;\n  public selected_file: string;\n\n  constructor(public dialog: MatDialog, private httpClient: HttpClient) {\n    this.selected_file = '';\n    console.log('constructor called');\n    console.log(this.id);\n  }\n  ngAfterViewInit() {\n    ...\n    this.jspinst.addEndpoint(this.id, { anchor: 'Right'}, Endpoint1);\n    this.jspinst.addEndpoint(this.id, { anchor: 'Left'}, Endpoint2);\n    this.jspinst.draggable(this.id);\n  }\n}\n</code></pre>\n\n<p>and the parent component goes like this:</p>\n\n<pre><code>export class FlowComponent implements OnInit, AfterViewInit, OnChanges {\n public nodes: Array&lt;any&gt;;\n public jspl;\n\n  constructor() {\n    this.nodes = [];\n    this.jspl = jsPlumb.getInstance();\n  }\n\n  addNode(type) {\n        let nn = new FileSelectionComponent();\n        this.nodes = this.nodes.concat([nn]);\n        s = this.nodes;\n        console.log('object created and added');\n  }\n\n  ngAfterViewInit() {\n    s = this.nodes;\n    this.jspl.bind('connection', function (info) {\n      console.log(info.sourceId+' ----&gt; '+info.targetId); //this output\n      console.log(s[0].id+' ----&gt; '+s[1].id); // and this output are not the same while they should\n      console.log(Object.keys(s[0]));\n      console.log(Object.values(s[0]));\n    });\n  }\n}\n</code></pre>\n\n<p>the <code>addNode</code> methode is called when I click a button, and as you can guess the constructor for the <code>FileSelectionComponent</code> is called twice, generating two different ids, which making it impossible for me retrieve the concerned nodes when the <code>connection</code> event is fired.\nI found some similar questions like <a href=\"https://stackoverflow.com/questions/38787795/why-ngoninit-called-twice\">this one</a>, but none helped:</p>\n\n<ol>\n<li>My button have a <code>type=\"button\"</code> on it</li>\n<li>I'm not bootstrapping both parent and child component, actually I'm not bootstrapping any of them, I already checked the <code>app.module.ts</code> (I don't even know bootstrapping is about).</li>\n<li>I didn't forget to close the selector tag in the host component.</li>\n<li>I don't have a <code>platformBrowserDynamic().bootstrapModule(AppModule);</code> in my code.</li>\n<li>the compiler doesn't show any error messages.</li>\n</ol>\n\n<p>the Template for the parent goes like this:</p>\n\n<pre><code>&lt;div id=\"cont\"&gt;\n  &lt;div *ngFor=\"let n of nodes\"&gt;\n    &lt;app-file-selection [jspinst]=\"jspl\" *ngIf=\"n.type === 'app-file-selection'\"&gt;&lt;/app-file-selection&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n  &lt;button type=\"button\" mat-icon-button matTooltip=\"Files selection\" (click)=\"addNode('file-selection')\"&gt;&lt;mat-icon aria-label=\"Side nav toggle icon\"&gt;insert_drive_file&lt;/mat-icon&gt;&lt;/button&gt;\n</code></pre>\n\n<p>I know this kind of questions was asked over and over, but my searchs don't seem to be helpful, thanks in advance.</p>\n\n<p><strong>EDIT</strong>\nI already tried placing that random assignement inside the constructor (resulting in two ids one caught by jsplumb and one received by the parent component), and placing it inside the OnInit (results in just one id but not known by the parent component).</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 2, "creation_date": 1563976744, "post_id": 57184504, "comment_id": 100879871, "body": "You&#39;ve really constrained possible answers since you don&#39;t want to use type assertions (TS has &quot;assertions&quot;, not &quot;casts&quot;), guard functions, or the refactoring at the bottom of your code; I assume you also wouldn&#39;t want to use <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">overloads</a> (which I&#39;d say are morally equivalent to type assertions).  All I can say at this point is that you are highlighting a <a href=\"https://github.com/microsoft/TypeScript/issues/13995\" rel=\"nofollow noreferrer\">known issue filed in GitHub</a> so I&#39;d expect any progress on this in the future to be reflected there.  Good luck!"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563978502, "post_id": 57184504, "comment_id": 100880992, "body": "Please, file the reference to the issue as an answer so that I could approve it. I couldn&#39;t find the issue for quite a while, and it&#39;s the only correct answer we can have right now. Thank you!"}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1563978583, "post_id": 57184504, "comment_id": 100881056, "body": "Until/unless that&#39;s resolved, though, overloads (although morally equivalent to type assertions) at least contain the problem to only the <code>f</code> code, not to all the code <i>using</i> <code>f</code>. <a href=\"http://www.typescriptlang.org/play/#code/C4TwDgpgBAKlC8UDeAoK6oEMBcUB2ArgLYBGEATgNxoYm4DOw5AlngObUC+1KAZgXgDGwZgHs8UXgAoA1rgDkmeQEpchUhWr8hI8ZNkKSKhk1Yc+A4WIm8APAGkoEAB7AIeACb0oMiCFG8sAB8BlD2qlh4IMg06MyBsgjwiIoqMRgZUOQQwATkEgCslFAA9CVO5OSi5LFQnE4ANvTQqJkY2bn5UPIF8tQZnCiDQA\" rel=\"nofollow noreferrer\">Example</a>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1563978730, "post_id": 57184504, "comment_id": 100881162, "body": "@T.J.Crowder that&#39;s not the type of overloading I meant...you want the caller to have a generic function but the implementer to have something concrete, like <a href=\"http://www.typescriptlang.org/play//?target=6#code/C4TwDgpgBAKlC8UDeBYAUFKBDAXFAdgK4C2ARhAE4Dc6mpeAzsBQJb4DmNaAvl+gGaF8AY2AsA9vij8APAGkoEAB7AI+ACYMoAawghx-WAD4AFNrxyAlHhgBtOQF0ugkWMnSzeXfsMxrsW28DWAdkWigWQzMEeEQAIiw4yzCMTCgKCGBCCikAVi5MbkUAGwZoVFTMDKycqDjcuIKobnQWtCA\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563980618, "post_id": 57184504, "comment_id": 100882282, "body": "@jcalz - I have so much to learn about TS. :-) Took me several minutes to figure out why that worked...if I have."}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1615562695, "last_edit_date": 1615562695, "creation_date": 1563979447, "answer_id": 57185609, "question_id": 57184504, "link": "https://stackoverflow.com/questions/57184504/how-to-guard-on-returned-mapped-value/57185609#57185609", "title": "How to guard on returned mapped value", "body": "<p>This issue is filed as a suggestion in GitHub: <a href=\"https://github.com/microsoft/TypeScript/issues/24085\" rel=\"nofollow noreferrer\">microsoft/TypeScript#24085</a></p>\n<p>The problem is that control flow analysis (checking <code>k === 'a'</code>) only narrows the types of <em>values</em> (that is, <code>k</code> can possibly be narrowed from <code>keyof T</code> to <code>&quot;a&quot;</code>); it does not narrow the types of <em>associated generic type parameters</em>... so the type <code>K extends keyof T</code> is never narrowed in control flow analysis to something like <code>K extends &quot;a&quot;</code>.  Such narrowing is not, in general, type safe... since of course you could have two variables of type <code>K</code>, and narrowing one of them does not necessarily mean the other is narrowed... especially because <code>T extends &quot;x&quot; | &quot;y&quot;</code> does not mean that <code>T</code> must be <em>just one of</em> <code>&quot;x&quot;</code> or <code>&quot;y&quot;</code>... it might just be <code>&quot;x&quot; | &quot;y&quot;</code> itself.  And there's <a href=\"https://github.com/microsoft/TypeScript/issues/27808\" rel=\"nofollow noreferrer\">no way to say that &quot;just one of&quot; concept</a>.</p>\n<p>In the issue, it is <a href=\"https://github.com/microsoft/TypeScript/issues/13995#issuecomment-363265172\" rel=\"nofollow noreferrer\">mentioned</a> that the fixes they can think of for this would have significant compiler performance implications, and that the issue is in the state of &quot;awaiting more feedback&quot;... that means if you want to see this happen you might want to go to that issue and give it a \ud83d\udc4d or detail your use case if it's more compelling than what's already in there.</p>\n<p>The workarounds for this are more or less the ones you stated: <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertions</a> and refactoring so as to perform an actual index access.  The one not mentioned is using a single-call-signature <a href=\"https://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">overload</a>, but this is essentially the same as asserting the return value:</p>\n<pre><code>function f&lt;K extends keyof T&gt;(k: K): T[K]; // call signature same\nfunction f(k: keyof T): T[keyof T] { // impl signature looser\n  if (k === &quot;a&quot;) {\n    return 5;\n  } else {\n    return &quot;5&quot;;\n  }\n}\n</code></pre>\n<p><a href=\"http://www.typescriptlang.org/play//?target=6#code/C4TwDgpgBAKlC8UDeBYAUFKBDAXFAdgK4C2ARhAE4Dc6mpeAzsBQJb4DmNaAvl+gGaF8AY2AsA9vij8APAGkoEAB7AI+ACYMoAawghx-WAD4AFNrxyAlHhgBtOQF0ugkWMnSzeXfsMxrsW28DWAdkWigWQzMEeEQAIiw4yzCMTCgKCGBCCikAVi5MbkUAGwZoVFTMDKycqDjcuIKobnQWtCA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n<hr />\n"}], "owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 57185609, "answer_count": 1, "score": 0, "last_activity_date": 1615562695, "creation_date": 1563976084, "question_id": 57184504, "link": "https://stackoverflow.com/questions/57184504/how-to-guard-on-returned-mapped-value", "title": "How to guard on returned mapped value", "body": "<p>How do I fix the following error without resorting to <code>any</code>, explicit casts and guard functions?</p>\n\n<pre><code>type T = {\n    a: number;\n    b: string;\n};\n\nconst f = &lt;K extends keyof T&gt;(k: K): T[K] =&gt; {\n    if (k === 'a') {\n        /*\n        Type '5' is not assignable to type 'T[K]'.\n            Type '5' is not assignable to type 'number &amp; string'.\n                Type '5' is not assignable to type 'string'.\n        */\n        return 5; // error\n    } else {\n        return '5';\n    }\n};\n\n// this is equivalent and works, but not always possible/convenient\nconst g = &lt;K extends keyof T&gt;(k: K): T[K] =&gt; {\n    return {a: 5, b: '5'}[k];\n};\n</code></pre>\n"}, {"tags": ["arrays", "angular", "typescript", "object", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 1, "creation_date": 1563979155, "post_id": 57185424, "comment_id": 100881436, "body": "<code>this.objCopy.slice()</code> will achieve the same shallow copy"}, {"owner": {"reputation": 4686, "user_id": 6736888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f70e865bb04192d8afa5fb27e88c3d?s=128&d=identicon&r=PG&f=1", "display_name": "penleychan", "link": "https://stackoverflow.com/users/6736888/penleychan"}, "reply_to_user": {"reputation": 21922, "user_id": 4855306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6aabb85641845de100ab0b0b87463a?s=128&d=identicon&r=PG&f=1", "display_name": "bryan60", "link": "https://stackoverflow.com/users/4855306/bryan60"}, "edited": false, "score": 0, "creation_date": 1563979266, "post_id": 57185424, "comment_id": 100881494, "body": "@bryan60, yep, whichever OP prefers, I personally like the spread operator."}, {"owner": {"reputation": 7, "user_id": 4499070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb02c63c1258a24bacba101b91e33fb?s=128&d=identicon&r=PG&f=1", "display_name": "smila", "link": "https://stackoverflow.com/users/4499070/smila"}, "edited": false, "score": 0, "creation_date": 1563980711, "post_id": 57185424, "comment_id": 100882333, "body": "The same issue is still happening on both of those solutions. But I think the issue os that as @penleychan mentioned its pointing to memory, so even if I&#39;m using the spread operator or the slice, it&#39;s too late because whats in memory has already been updated?"}], "tags": [], "owner": {"reputation": 4686, "user_id": 6736888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f70e865bb04192d8afa5fb27e88c3d?s=128&d=identicon&r=PG&f=1", "display_name": "penleychan", "link": "https://stackoverflow.com/users/6736888/penleychan"}, "is_accepted": true, "score": 0, "last_activity_date": 1563983909, "last_edit_date": 1563983909, "creation_date": 1563978884, "answer_id": 57185424, "question_id": 57184455, "link": "https://stackoverflow.com/questions/57184455/how-to-prevent-a-previously-defined-object-updating-when-a-new-object-is-filtere/57185424#57185424", "title": "How to prevent a previously defined object updating when a new object is filtered (new object created based on original object)", "body": "<p>Variables that are assigned a non-primitive value are given a reference to that value. That reference points to the object\u2019s location in memory. The variables don\u2019t actually contain the value. </p>\n\n<p>So try using the <code>spread</code> operator</p>\n\n<p><code>this.navFilterList = [...this.objCopy];</code></p>\n\n<p>EDIT:</p>\n\n<p>I noticed you are modifying the object, which then means the <code>spread</code> operator and <code>slice</code> will not work because they are shallow copy not deep clone.</p>\n\n<p>Your original method <code>JSON.parse(JSON.stringify(Object))</code> will work for deep clone:</p>\n\n<p><code>this.navFilterList = JSON.parse(JSON.stringify(this.objCopy));</code></p>\n"}], "owner": {"reputation": 7, "user_id": 4499070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb02c63c1258a24bacba101b91e33fb?s=128&d=identicon&r=PG&f=1", "display_name": "smila", "link": "https://stackoverflow.com/users/4499070/smila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57185424, "answer_count": 1, "score": 0, "last_activity_date": 1563983909, "creation_date": 1563975928, "question_id": 57184455, "link": "https://stackoverflow.com/questions/57184455/how-to-prevent-a-previously-defined-object-updating-when-a-new-object-is-filtere", "title": "How to prevent a previously defined object updating when a new object is filtered (new object created based on original object)", "body": "<p>I want to filter an array of object based on their year, but whenever I filter out a set of values, it filters the values in the newly created object and also the original object. But I want the original object to stay the same so I can apply different filters. </p>\n\n<p>I've tried using .assign, JSON.parse(JSON.stringify(Object)) and the clone deep function. </p>\n\n<p>component code </p>\n\n<pre><code>export class LeaderboardComponent implements OnInit {\n  title = \"Leaderboard\"\n  public navList = [];\n  public navFilterList = [];\n  routeCount = 0; \n  logsCount = 0;\n  completeJourneys = 0;\n  selectFilter = \"\";\n  selectDateFilter = \"\";\n  currentDate = new Date;\n  minutes = 1000 * 60;\n  hours = this.minutes * 60;\n  days = this.hours * 24;\n  month = this.days * 30;\n  years = this.days * 365;\n  currTimestamp = this.currentDate.getTime();\n  clonedObject;\n  objCopy = [];\n\n  constructor(private leaderboardService: LeaderboardService) { }\n\n  ngOnInit() {\n    this.leaderboardService.getNavList()\n    .subscribe(data =&gt; {\n      this.navList = data;\n       this.objCopy = Object.assign([], data);\n      console.log(\"here\");\n      console.log(this.objCopy);\n    });\n  }\n\n\n  orderByDate(){\n    console.log(this.objCopy);\n    var tempLogArray = 0;\n    this.navFilterList = this.objCopy;\n\n    if(this.selectDateFilter != \"all\"){\n\n      for(var i = 0; i &lt; this.navFilterList.length; i ++){\n        for(var j = 0; j &lt; this.navFilterList[i].user.routes.length; j ++){\n          for(var k = 0; k &lt; this.navFilterList[i].user.routes[j].logs.length; k++){\n                var logDate = new Date(this.navFilterList[i].user.routes[j].logs[k].attemptDate);\n                this.navFilterList[i].user.routes[j].logs[k].timestamp = logDate.getTime(); \n          }\n          this.navFilterList[i].user.routes[j].logs =  this.navFilterList[i].user.routes[j].logs.filter(log =&gt; ((this.currTimestamp - log.timestamp)/this.years)  &lt; 1);\n        }\n      }\n      console.log(\"here year\");\n    }\n}\n}\n</code></pre>\n\n<p>html code which calls the filter by date function </p>\n\n<pre><code>              &lt;select [(ngModel)]=\"selectDateFilter\"  (change)=\"orderByDate()\" class=\"form-group\" style=\"width: 100px;\" &gt;\n                &lt;option  disabled selected value=\"\" &gt;Order by: &lt;/option&gt;\n                &lt;option  value = \"week\"&gt;Last 7 Days&lt;/option&gt;\n                  &lt;option  value = \"month\"&gt;Last Month&lt;/option&gt;\n                  &lt;option  value = \"year\" &gt;Last Year&lt;/option&gt;\n                  &lt;option  value = \"all\" &gt;All Time&lt;/option&gt;\n                &lt;/select&gt;\n</code></pre>\n\n<p>I expect the objCopy to always contain the data which is taken from the JSON file in an API but instead its updated with the filtered data.</p>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "ionic4"], "comments": [{"owner": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "edited": false, "score": 0, "creation_date": 1563976255, "post_id": 57184352, "comment_id": 100879543, "body": "Console log your form to see which item is failing the validation"}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 8264221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35e9dbc10a0acc5b2b69356197b7df2?s=128&d=identicon&r=PG&f=1", "display_name": "H. Gybels", "link": "https://stackoverflow.com/users/8264221/h-gybels"}, "is_accepted": true, "score": 2, "last_activity_date": 1563976281, "creation_date": 1563976281, "answer_id": 57184565, "question_id": 57184352, "link": "https://stackoverflow.com/questions/57184352/adding-not-required-fields-to-formbuilder/57184565#57184565", "title": "Adding not required fields to formBuilder", "body": "<p>Reactive forms are great with basic inputs, but you can't use validators with file inputs. </p>\n\n<p>You have several options de manage this issue, one is to use a hidden input which will contain your validator (<a href=\"https://stackoverflow.com/questions/44072909/using-reactive-form-validation-with-input-type-file-for-an-angular-app\">Using reactive form validation with &lt;input type=&quot;file&quot;&gt; for an Angular app</a>)</p>\n\n<p>Another way to manage it is to use (change) envent : <a href=\"https://medium.com/@amcdnl/file-uploads-with-angular-reactive-forms-960fd0b34cb5\" rel=\"nofollow noreferrer\">https://medium.com/@amcdnl/file-uploads-with-angular-reactive-forms-960fd0b34cb5</a></p>\n"}], "owner": {"reputation": 1972, "user_id": 9494140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-RiQCuWECqiE/AAAAAAAAAAI/AAAAAAAAEsI/GLtd18UG8w8/photo.jpg?sz=128", "display_name": "Ahmed Wagdi", "link": "https://stackoverflow.com/users/9494140/ahmed-wagdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 57184565, "answer_count": 1, "score": 1, "last_activity_date": 1563976281, "creation_date": 1563975624, "question_id": 57184352, "link": "https://stackoverflow.com/questions/57184352/adding-not-required-fields-to-formbuilder", "title": "Adding not required fields to formBuilder", "body": "<p>On <code>ionic4</code> project am using form builder to build and validate my forms, and then am using <code>[disbaled]</code> in the form to make the form disabled if not all field valid. </p>\n\n<p>but when I don't add <code>Validators.required</code> to a field, it still treats it as required fields. here are my codes</p>\n\n<p><strong>.ts file</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    createAddAtelierDressForm() {\n        this.addAtelierDressForm = this.fb.group({\n            title: ['', Validators.required],\n            description: ['', Validators.required],\n            type: ['', Validators.required],\n            size: ['', Validators.required],\n            category: ['', Validators.required],\n            city: ['', Validators.required],\n            action: ['', Validators.required],\n            price: ['', Validators.required],\n            discount: ['', Validators.required],\n            image_1: ['', Validators.required],\n            image_2: [''],\n            image_3: [''],\n        });\n    }\n</code></pre>\n\n<p>as you see <code>image_2</code> and <code>image_3</code> does not have the required condition.</p>\n\n<p>in my <strong>HTML</strong></p>\n\n<pre><code>            &lt;form [formGroup]=\"addAtelierDressForm\"&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Title&lt;/ion-label&gt;\n                    &lt;ion-input formControlName=\"title\" type=\"text\"&gt;&lt;/ion-input&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Description&lt;/ion-label&gt;\n                    &lt;ion-input formControlName=\"description\" type=\"text\"&gt;&lt;/ion-input&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Type&lt;/ion-label&gt;\n                    &lt;ion-select formControlName=\"type\" type=\"select\"&gt;\n                        &lt;ion-select-option *ngFor=\"let type of allTypes\"&gt;{{type.name}}\n                        &lt;/ion-select-option&gt;\n                    &lt;/ion-select&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Size&lt;/ion-label&gt;\n                    &lt;ion-select formControlName=\"size\" type=\"select\"&gt;\n                        &lt;ion-select-option *ngFor=\"let size of allSizes\"&gt;{{size.name}}\n                        &lt;/ion-select-option&gt;\n                    &lt;/ion-select&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Category&lt;/ion-label&gt;\n                    &lt;ion-select formControlName=\"category\" type=\"select\"&gt;\n                        &lt;ion-select-option *ngFor=\"let category of allCategories\"&gt;{{category.name}}\n                        &lt;/ion-select-option&gt;\n                    &lt;/ion-select&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;City&lt;/ion-label&gt;\n                    &lt;ion-select formControlName=\"city\" type=\"select\"&gt;\n                        &lt;ion-select-option *ngFor=\"let city of allCities\"&gt;{{city.name}}\n                        &lt;/ion-select-option&gt;\n                    &lt;/ion-select&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Action&lt;/ion-label&gt;\n                    &lt;ion-select formControlName=\"action\" type=\"select\"&gt;\n                        &lt;ion-select-option *ngFor=\"let action of allActions\"&gt;{{action.name}}\n                        &lt;/ion-select-option&gt;\n                    &lt;/ion-select&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Original Price&lt;/ion-label&gt;\n                    &lt;ion-input formControlName=\"price\" type=\"number\"&gt;&lt;/ion-input&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label position=\"stacked\"&gt;Discount %&lt;/ion-label&gt;\n                    &lt;ion-select formControlName=\"discount\" type=\"select\"&gt;\n                        &lt;ion-select-option *ngFor=\"let discount of allDiscounts\"&gt;{{discount.amount}}\n                        &lt;/ion-select-option&gt;\n                    &lt;/ion-select&gt;\n                &lt;/ion-item&gt;\n\n                &lt;ion-item&gt;\n                    &lt;ion-label &gt;Image 1&lt;/ion-label&gt;\n                    &lt;ion-input formControlName=\"image_1\" type=\"file\" (change)=\"fileChange1($event)\"&gt;&lt;/ion-input&gt;\n                    &lt;img *ngIf=\"img1\" [src]=\"img1\" style=\"width: 100px; height: 100px;\"/&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label &gt;Image 2&lt;/ion-label&gt;\n                    &lt;ion-input formControlName=\"image_2\" type=\"file\" (change)=\"fileChange2($event)\"&gt;&lt;/ion-input&gt;\n                    &lt;img *ngIf=\"img2\" [src]=\"img2\" style=\"width: 100px; height: 100px;\"/&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-item&gt;\n                    &lt;ion-label &gt;Image 3&lt;/ion-label&gt;\n                    &lt;ion-input formControlName=\"image_3\" type=\"file\" (change)=\"fileChange3($event)\"&gt;&lt;/ion-input&gt;\n                    &lt;img *ngIf=\"img3\" [src]=\"img2\" style=\"width: 100px; height: 100px;\"/&gt;\n                &lt;/ion-item&gt;\n                &lt;ion-button expand=\"full\" type=\"submit\" [disabled]=\"!addAtelierDressForm.valid\"&gt;Add Dress&lt;/ion-button&gt;\n            &lt;/form&gt;\n</code></pre>\n\n<p>the form still disabled even when I fill all fields including <code>image_2</code> and <code>image_3</code></p>\n"}, {"tags": ["typescript", "typeorm"], "owner": {"reputation": 177, "user_id": 2262287, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/T1Ayj.jpg?s=128&g=1", "display_name": "Andre Smith", "link": "https://stackoverflow.com/users/2262287/andre-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1563975747, "creation_date": 1563975411, "last_edit_date": 1563975747, "question_id": 57184284, "link": "https://stackoverflow.com/questions/57184284/typeorm-save-freezes-blocks-all-other-threads", "title": "TypeORM save freezes / blocks all other threads", "body": "<p>Im using typeorm with a nativescript application. While I upsert data to the local db, i want to have a timer running. So i start the timer before i call entitymanager.save. The timer runs for 1 - 2 seconds... freezes.. then continues running when the query is finished.</p>\n\n<p>The point of this is so that i can show or hide icons on the main screen while the user is waiting for the upsert to finish.</p>\n\n<p>Is there a way that i can let the timer continue running while typeorm does its thing?</p>\n\n<p>Ive tried to\n1. Wrapping the .save method in an observable.\n2. Wrapping the timer in a promise</p>\n\n<pre><code>\npublic uploadAllCodes() {\n  let intervalId = setInterval(() =&gt; {\n  this.counter = this.counter + 1;\n  console.log(this.counter);\n    if (this.counter === 25) {\n      clearInterval(intervalId);\n    }\n  }, 1000);\n\n\n  try {\n    await this.Upsert(Codes, this.codes);\n  } catch (e) {\n    await alert(e);\n  }\n\n}\n\nstatic async Upsert(EntityType: any, Entity: any) {\n        let databaseConnection = await this.GetDatabaseConnection();\n\n        await databaseConnection.manager.transaction(async manager =&gt; {\n            await manager.save(EntityType, Entity, {\n                listeners: false,\n                chunk: 1000\n            });\n        });\n\n    }\n</code></pre>\n\n<p>I just want to know if there is a way that i can allow the timer to continue to run while the upsert is taking place.</p>\n"}, {"tags": ["angular", "typescript", "angular6"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1563978230, "post_id": 57184252, "comment_id": 100880797, "body": "<i>global static variables</i> === <b>bad</b>"}, {"owner": {"reputation": 1, "user_id": 10679599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e2e849202206a3e706668e4d7a6eea?s=128&d=identicon&r=PG&f=1", "display_name": "Verb", "link": "https://stackoverflow.com/users/10679599/verb"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1563979332, "post_id": 57184252, "comment_id": 100881545, "body": "Thks but what kind of solutions you advocate ? Knowing that my ConfigService  provide to my components certains key/appId of config, you suggest to keep config not static, construct an object in each component, import in all constructor and add to test unit only for some key/appId of configuration which are not treatment after/before consuming..."}], "answers": [{"comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1563978413, "post_id": 57184538, "comment_id": 100880924, "body": "I upvoted because you fixed the problem, but technically there is no need now to use <code>APP_INITIALIZER</code> at all. Since reading config is now async it no longer needs to prevent the app from loading. You can just move the code from <code>init()</code> to <code>ConfigService</code>. All consumers now have to wait for it to emit now. So why stop the app from loading?"}, {"owner": {"reputation": 1, "user_id": 10679599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e2e849202206a3e706668e4d7a6eea?s=128&d=identicon&r=PG&f=1", "display_name": "Verb", "link": "https://stackoverflow.com/users/10679599/verb"}, "edited": false, "score": 0, "creation_date": 1563978457, "post_id": 57184538, "comment_id": 100880961, "body": "@Andrei T&#227;tar thanks a lot for your comment. With the help of your answer i have simplify my init() method with this and it works like a charm : typescript <code>async init() {      ConfigService.config = await this.getconfig().toPromise();     await forkJoin(         this.getDatas1(), ...     ).subscribe((ret: Object) =&gt; {      this.setDatas1(response[0]); ...     this.contextInitialized.next(true);     this.inj.get(Router).initialNavigation();     });    }</code> Not need to update my ConfigService with ReplaySubject"}], "tags": [], "owner": {"reputation": 5932, "user_id": 3016654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f841e106c58a9e27aa79fcb686607c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei T\u0103tar", "link": "https://stackoverflow.com/users/3016654/andrei-t%c4%83tar"}, "is_accepted": false, "score": 1, "last_activity_date": 1563977272, "last_edit_date": 1563977272, "creation_date": 1563976213, "answer_id": 57184538, "question_id": 57184252, "link": "https://stackoverflow.com/questions/57184252/ensure-static-variable-is-initialized-before-inject-provider/57184538#57184538", "title": "Ensure static variable is initialized before inject provider", "body": "<p>The simplest way I can think of is going async using rx:</p>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigService {\n  private static _configuration = new ReplaySubject&lt;Config&gt;(1);\n\n  public static config$ = this._configuration.asObservable();\n\n  public static setConfig(config: Config) {\n    this._configuration.next(config);\n  }\n}\n</code></pre>\n\n<p>But you need to go async all the way (which is not a bad thing in my opinion):</p>\n\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class TestService {\n\n  foo$: Observable&lt;boolean&gt; = ConfigService.config$.pipe(map(config =&gt; config.foo));\n\n  // you don't even need the contextService anymore :), config is pushed when it's available\n  constructor(private contextService: ContextService) {\n\n  }\n\n  async getFooValue(): Promise&lt;boolean&gt; {\n    const firstFooValue = await this.foo$.pipe(first()).toPromise();\n    // this will get the first available value or wait for it (wrapped in a promise)\n    return firstFooValue;\n  }\n}\n</code></pre>\n\n<p>Now, responding to your question... Yes, it's possible to block the application until something is loaded but that's not the greatest user experience and you still need to use promises/observables to \"block\" it.</p>\n\n<p>Your <code>contextservice.init</code> needs to be async (return a promise or an observable) in order for angular to know when it's done.</p>\n\n<p>This could be a fix:</p>\n\n<pre><code>async init() {\n    const config = await this.getConfig().toPromise();\n    ConfigService.config = config;\n    const response = await forkJoin(\n        this.getDatas1(),\n        this.getDatas2(),\n        this.getDatas3()\n    ).toPromise();\n    this.setDatas1(response[0]);\n    this.setDatas2(response[1]);\n    this.setDatas3(response[2]);\n    this.contextInitialized.next(true);\n    this.inj.get(Router).initialNavigation(); // &lt;-- Init router when all responses are retrieved\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10679599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e2e849202206a3e706668e4d7a6eea?s=128&d=identicon&r=PG&f=1", "display_name": "Verb", "link": "https://stackoverflow.com/users/10679599/verb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563978009, "creation_date": 1563975328, "last_edit_date": 1563978009, "question_id": 57184252, "link": "https://stackoverflow.com/questions/57184252/ensure-static-variable-is-initialized-before-inject-provider", "title": "Ensure static variable is initialized before inject provider", "body": "<p>We have an Angular6 application which use a globalcontextServiceFactory to initialize application before renderer views. </p>\n\n<p>This works with a subscription to get configuration to back-end endpoint and after launch forkJoin to get environment application datas. </p>\n\n<p>Issue comes from a provider which use static variable to save/store configuration retrieved from subscription. \nConsidering hierarchical dependency injectors, this providers used provideIn: 'root' injector.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>app.module.ts\n\n\nexport function contextServiceFactory(contextService: ContextService): Function {return () =&gt; contextService.init();}\n\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [...],\n  providers: [...,\n    {provide: APP_INITIALIZER, useFactory: contextServiceFactory, deps: [ContextService], multi: true}\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>context.service.ts\n\n@Injectable()\nexport class ContextService{\n  constructor(...){}\n\ninit() {\n       this.configSubscription = this.getConfig().subscribe((config: Config) =&gt; {\n      ConfigService.config = config;\n        this.globalSubscription = forkJoin(\n        this.getDatas1(),\n        this.getDatas2(),\n        this.getDatas3()\n      ).subscribe((response: Object) =&gt; {\n        this.setDatas1(response[0]),\n        this.setDatas2(response[1]),\n        this.setDatas3(response[2])\n        this.contextInitialized.next(true);\n        this.inj.get(Router).initialNavigation(); // &lt;-- Init router when all responses are retrieved\n      });\n    });\n\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>config.service.ts\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigService {\n  private static _configuration: Config;\n\n  public static get config(): Config {\n    return ConfigService._configuration;\n  }\n\n  public static set config(config: Config) {\n    ConfigService._configuration = config;\n  }\n}\n\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>test.service.ts\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TestService {\n\n  foo: boolean;\n\n  constructor(private contextService: ContextService) { // ContextService is called here because used inside TestService - not describe here\n\n// THIS WORK\n// We have to wait context is initalized before set 'foo'\n/*    this.contextService.contextInitialized.subscribe((isInit: boolean) =&gt; {\n      if (isInit) {\n        this.foo = ConfigService.config.bar;\n      }\n    });*/\n\n// THIS NOT WORK\n    this.foo = ConfigService.config.bar;\n  }\n}\n\n</code></pre>\n\n<p>We have this error from console because TestService is call after ContextService but before static variable is initalized by init()</p>\n\n<p>ERROR TypeError: Cannot read property 'bar' of undefined\n    at new TestService (test.service.ts)\n    at TestService_Factory (test.service.ts)</p>\n\n<p>Question : is it possible to wait application is fully loaded before use static value store in other service ?</p>\n\n<p>Thks</p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1563975629, "post_id": 57184217, "comment_id": 100879127, "body": "Just tap after switchMap <code>pipe(switchMap(), tap(console.log))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "is_accepted": false, "score": 0, "last_activity_date": 1563977479, "creation_date": 1563977479, "answer_id": 57184975, "question_id": 57184217, "link": "https://stackoverflow.com/questions/57184217/how-read-data-coming-from-forkjoin-map/57184975#57184975", "title": "How read data coming from forkjoin map?", "body": "<p>This is rather messy to read, but, within the code of code for <code>switchMap</code>, but you can use the <a href=\"https://rxjs-dev.firebaseapp.com/api/operators/tap\" rel=\"nofollow noreferrer\">tap</a> operator to log the responses. </p>\n\n<pre><code>forkJoin(\n  familles.map(f =&gt; forkJoin(\n    this.serviceAffecter.getAffecterServiceFamille(service, f.nom),\n    this.serviceOpe.getOperationsServiceFamille(service, f.nom)\n  ).pipe(\n    tap(res =&gt; {\n      console.log(res);\n    }),\n    map(([listAffecter, listeOperations]) =&gt; [f, listAffecter, listeOperations])\n  ))\n)\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563977479, "creation_date": 1563975244, "question_id": 57184217, "link": "https://stackoverflow.com/questions/57184217/how-read-data-coming-from-forkjoin-map", "title": "How read data coming from forkjoin map?", "body": "<p>I'm new to angular and rxjs and I need to know how can I read data which are coming from forkJoin on a map.</p>\n\n<pre><code>ngOnInit(): void {\n    this.serviceData.currentService.subscribe(service =&gt;\n        this.serviceFam.getAllFamilles().pipe(\n          switchMap(familles =&gt;\n            forkJoin(\n              familles.map(f =&gt; forkJoin(\n                this.serviceAffecter.getAffecterServiceFamille(service, f.nom),\n                this.serviceOpe.getOperationsServiceFamille(service, f.nom)\n                ).pipe(\n                map(([listAffecter, listeOperations]) =&gt; [f, listAffecter, listeOperations])\n                )\n              )\n            )\n          )\n        ).pipe(switchMap((data: [Famille, Affecter, Operation][]) =&gt; {\n          return forkJoin(data.map((f, a, o) =&gt; {\n\n            //Here I want to read my data\n\n          }));\n        }))\n    );\n\n    this.serviceData.changeAffaire(4);\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular-ui-router", "canactivate"], "comments": [{"owner": {"reputation": 6216, "user_id": 1471485, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8qRCk.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/1471485/john"}, "edited": false, "score": 0, "creation_date": 1563973616, "post_id": 57183642, "comment_id": 100878006, "body": "Does it work if you remove the  { path: &#39;&#39;, redirectTo: &#39;user&#39; ....} from the routes?"}, {"owner": {"reputation": 385, "user_id": 2823537, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e813247fba806d4e9c3e93075e8dcb8f?s=128&d=identicon&r=PG&f=1", "display_name": "NiAu", "link": "https://stackoverflow.com/users/2823537/niau"}, "reply_to_user": {"reputation": 6216, "user_id": 1471485, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8qRCk.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/1471485/john"}, "edited": false, "score": 0, "creation_date": 1563976518, "post_id": 57183642, "comment_id": 100879711, "body": "@John I could try that, but how can I then handle the empty path?"}], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 2823537, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e813247fba806d4e9c3e93075e8dcb8f?s=128&d=identicon&r=PG&f=1", "display_name": "NiAu", "link": "https://stackoverflow.com/users/2823537/niau"}, "is_accepted": false, "score": 1, "last_activity_date": 1564125451, "creation_date": 1564125451, "answer_id": 57214960, "question_id": 57183642, "link": "https://stackoverflow.com/questions/57183642/canactivate-guard-is-not-triggered-for-one-component-in-angular-5-1-app/57214960#57214960", "title": "canActivate guard is not triggered for one component in Angular 5.1 app", "body": "<p>I missed a very obvious thing (so stupid!). At the user path I also have children assigned. So when I set the canActivate guard there, it worked fine.</p>\n\n<pre><code>const routes: Routes = [{\npath: 'user',\ncomponent: UserComponent,\ncanActivate: [AuthenticationGuard],\nchildren: [\n    { path: 'invite/:key', component: ModalContainerComponent, canActivate: [AuthenticationGuard] }\n]\n}]\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 2823537, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e813247fba806d4e9c3e93075e8dcb8f?s=128&d=identicon&r=PG&f=1", "display_name": "NiAu", "link": "https://stackoverflow.com/users/2823537/niau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564125451, "creation_date": 1563973415, "question_id": 57183642, "link": "https://stackoverflow.com/questions/57183642/canactivate-guard-is-not-triggered-for-one-component-in-angular-5-1-app", "title": "canActivate guard is not triggered for one component in Angular 5.1 app", "body": "<p>In my Angular 5.1.1 application, the canActivate guard on a single component is not triggered. When I route to 'user' the AuthenticationGuard is never triggered, but it works for all other paths. </p>\n\n<p>I thought that it has something to do with that 'user' is used to redirect to when path is empty. So I changed the redirectTo property to client. First time the AuthGuard is not triggered, but next times always. For 'user' it is still not triggered.</p>\n\n<p>Routes</p>\n\n<pre><code>const routes: Routes = [\n    { path: 'error', component: ErrorComponent /* , canActivate: [AuthenticationGuard] */  },\n    { path: 'id_token', component: OAuthCallbackComponent, canActivate: [OAuthCallbackHandler] },                   // reply URL AAD\n    { path: 'client', component: ClientsComponent, canActivate: [AuthenticationGuard] },\n    { path: 'colleagues', component: ColleaguesComponent, canActivate: [AuthenticationGuard]},\n    { path: 'user', component: UserComponent, canActivate: [AuthenticationGuard] },\n    { path: 'useroverview', component: UserOverviewComponent, canActivate: [AuthenticationGuard] },\n    { path: 'login', component: LoginComponent },\n    { path: '', redirectTo: 'user', pathMatch: 'full', canActivate: [AuthenticationGuard] },\n    { path: 'loading', component: OAuthCallbackComponent },\n    { path: 'noaccess', component: NoAccessComponent },\n    { path: '**', component: NoAccessComponent }\n];\n</code></pre>\n\n<p>AuthGuard</p>\n\n<pre><code> canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        const navigationExtras: NavigationExtras = {\n            queryParams: { 'redirectUrl': route.url }\n        };\n\n        if (!this.adalService.userInfo || !this.adalService.accessToken) {\n            sessionStorage.clear();\n            sessionStorage.setItem('redirect', this.setRedirectUrl(route.url));\n            this.router.navigate(['login'], navigationExtras);\n            return false;\n        }\n\n        if (((route.routeConfig.path === \"client\" || route.routeConfig.path === \"useroverview\") &amp;&amp; UserRights[sessionStorage.getItem('Role')] &lt; 3) ||\n            ((sessionStorage.getItem('UserType') === '66' || sessionStorage.getItem('UserType') === '74') &amp;&amp; route.routeConfig.path === \"colleagues\") &amp;&amp; UserRights[sessionStorage.getItem('Role')] === 0)\n        {\n            this.router.navigate(['404']);\n            return false;\n        }\n\n        if (sessionStorage.length === 0) {\n            this.spinner.show();\n            return this.userManService.getUserInfo().switchMap(resp =&gt; {\n                this.sessionUser(resp);\n                return this.userManService.getMyAccountData().map(data =&gt; {\n                    this.setUserInfo(data);\n                    $(document).trigger('Authenticated');\n                    this.spinner.hide();\n                    this.myMenuOption();\n                    return true;\n                }).catch(() =&gt; {\n                    this.spinner.hide();\n                    return Observable.of(false);\n                });\n            }).catch(() =&gt; {\n                this.spinner.hide();\n                return Observable.of(false);\n            });\n        }\n        else\n            return Observable.of(true);\n    }\n</code></pre>\n\n<p>How is it possible that the AuthGuard is not triggered for that component?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "audio", "jsx"], "comments": [{"owner": {"reputation": 4134, "user_id": 1736012, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cdfeab51edd576023dd1c13f1fa02fd7?s=128&d=identicon&r=PG", "display_name": "olefrank", "link": "https://stackoverflow.com/users/1736012/olefrank"}, "edited": false, "score": 0, "creation_date": 1580140165, "post_id": 57183590, "comment_id": 105990807, "body": "Did you ever solve this? I have the same problem and would be grateful for tips"}, {"owner": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "reply_to_user": {"reputation": 4134, "user_id": 1736012, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cdfeab51edd576023dd1c13f1fa02fd7?s=128&d=identicon&r=PG", "display_name": "olefrank", "link": "https://stackoverflow.com/users/1736012/olefrank"}, "edited": false, "score": 0, "creation_date": 1580201014, "post_id": 57183590, "comment_id": 106009974, "body": "@olefrank In my case it was an issue with being new to the project and I hadn&#39;t been told yet that the environment I was working with assumed that the files were not local but on a server so I had to upload to a server that then fed me img/audio files to use in the project.  I would assume that what Rahul Roy below said would work just fine in a local project on your own machine."}, {"owner": {"reputation": 4134, "user_id": 1736012, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cdfeab51edd576023dd1c13f1fa02fd7?s=128&d=identicon&r=PG", "display_name": "olefrank", "link": "https://stackoverflow.com/users/1736012/olefrank"}, "edited": false, "score": 1, "creation_date": 1580245889, "post_id": 57183590, "comment_id": 106033085, "body": "I fixed it by putting the audio files in the &quot;public&quot; folder (Create React App) and referencing them like this: <code>${process.env.PUBLIC_URL}&#47;audio&#47;click.ogg</code>"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "edited": false, "score": 0, "creation_date": 1563975054, "post_id": 57183858, "comment_id": 100878815, "body": "I can just use the local file link on a web browser to play the mp3 if that&#39;s what you meant. I will add a picture of the file path to the original question.  EDIT: Added pictures for better reference."}, {"owner": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "edited": false, "score": 0, "creation_date": 1564131531, "post_id": 57183858, "comment_id": 100937635, "body": "Thanks for the response. When I follow your instructions and try to import the soundfile from &quot;neure-resources&quot; folder where it&#39;s located I get an error on the import line saying: &quot;Cannot find module &quot;../neure-resources/test.mp3&quot;&quot;. I have no idea why this is happening though as you can see from my picture of the file path the folder is there and the mp3 is inside it. Do I need to somehow make the &quot;neure-resources&quot; file exportable first or something?"}, {"owner": {"reputation": 504, "user_id": 7419457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9292b6e2accc6c214a8e1dd2e17e7950?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/7419457/rahul"}, "reply_to_user": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "edited": false, "score": 0, "creation_date": 1564220392, "post_id": 57183858, "comment_id": 100965040, "body": "no you don&#39;t need to make the mp3 file exportable in any way. That error occurs when the path is wrong. can you upload the code some where github/ or other hosting site"}, {"owner": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "edited": false, "score": 0, "creation_date": 1564402685, "post_id": 57183858, "comment_id": 101007114, "body": "Unfortunately as this is not my own project but a company owned one (ant not open source), I am not able to share the code in it&#39;s entirety. I&#39;ll have one of my seniors check the problem out as they will be returning soon from their summer holidays. Was trying to be efficient and see if I could get it fixed before then. Thanks for all the help though!"}], "tags": [], "owner": {"reputation": 504, "user_id": 7419457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9292b6e2accc6c214a8e1dd2e17e7950?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/7419457/rahul"}, "is_accepted": true, "score": 1, "last_activity_date": 1564033964, "last_edit_date": 1564033964, "creation_date": 1563974114, "answer_id": 57183858, "question_id": 57183590, "link": "https://stackoverflow.com/questions/57183590/edit-how-to-import-mp3-files-in-react-app/57183858#57183858", "title": "EDIT: How to import MP3 files in React app", "body": "<p>Hi Ksk this is probably an error of wrong file path. Please test you file path in a separate tab on browser(chrome preferably). Enter the URL in new tab or using inspect element open the URL in new tab and check if you are able to access the mp3 file. </p>\n\n<p>If the audio file gets played in the separate browser tab please share the file structure image. </p>\n\n<p>&lt;------------------- new edit -------------------></p>\n\n<p>Hi ksk to play an mp3 file or render an image in react you have to first import it as an alias and then at the path place you can use that alias. Take this example for clear understanding.</p>\n\n<pre><code>import React, { Component } from \u2018react\u2019;\nimport soundfile from \u2018../assets/alert.mp3\u2019\n</code></pre>\n\n<p>in the above the mp3 file is in a directory outside the code directory and then inside the assets folder. The .. operator is to move outside the current directory.</p>\n\n<p>once you import the mp3 file you can render it in the html syntax as</p>\n\n<pre><code>    export default class Alert extends Component {\nrender() {\n return (\n   &lt;Sound\n   url={soundfile}\n   playStatus={Sound.status.PLAYING}\n   onLoading={this.handleSongLoading}\n   onPlaying={this.handleSongPlaying}\n   onFinishedPlaying={this.handleSongFinishedPlaying}\n   /&gt;\n  );\n }\n}\n</code></pre>\n\n<p>here this sample is using react-sound module you can also use the defualt html5 mp3 player and customize it according to your requirement.</p>\n\n<p>Now coming up to the image you have uploaded and assuming the code is in NeureCountNumberEquivalence.tsx and mp3 file as test.mp3 your import syntax would look like.</p>\n\n<pre><code>import soundfile from \u2018../neure-resources/test.mp3\u2019\n\n&lt;audio controls&gt;\n  &lt;source src={soundfile} type=\"audio/ogg\"&gt;\n  &lt;source src={soundfile} type=\"audio/mpeg\"&gt;\nYour browser does not support the audio element.\n&lt;/audio&gt;\n</code></pre>\n\n<p>That's it :p hope this one works out for you.</p>\n\n<p>For further reference you can use </p>\n\n<p><a href=\"https://medium.com/@jerrysbusiness/playing-a-sound-file-in-a-react-project-bd0ad079ad93\" rel=\"nofollow noreferrer\">mp3 in react</a>  </p>\n\n<p><a href=\"https://www.w3schools.com/html/html5_audio.asp\" rel=\"nofollow noreferrer\">html5 audio component</a></p>\n"}, {"tags": [], "owner": {"reputation": 584, "user_id": 10035001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9b12ed90be9635b00b096d224a3639c?s=128&d=identicon&r=PG&f=1", "display_name": "Harshit Singhai", "link": "https://stackoverflow.com/users/10035001/harshit-singhai"}, "is_accepted": false, "score": 2, "last_activity_date": 1587858232, "creation_date": 1587858232, "answer_id": 61434060, "question_id": 57183590, "link": "https://stackoverflow.com/questions/57183590/edit-how-to-import-mp3-files-in-react-app/61434060#61434060", "title": "EDIT: How to import MP3 files in React app", "body": "<p>You can do something like </p>\n\n<pre><code>import React from \"react\";\nconst pokemon = require(\"./pokemon.mp3\");\n\nconst sound = () =&gt; &lt;audio src={pokemon} autoPlay /&gt;;\n\nexport default sound;\n</code></pre>\n\n<p>and then use it </p>\n\n<pre><code>import Soundify from \"./soundify\";\n&lt;Soundify /&gt;\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 11758715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d1ee338da600ef3e73a2470172945?s=128&d=identicon&r=PG&f=1", "display_name": "KsK", "link": "https://stackoverflow.com/users/11758715/ksk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11323, "favorite_count": 0, "accepted_answer_id": 57183858, "answer_count": 2, "score": 5, "last_activity_date": 1587858232, "creation_date": 1563973252, "last_edit_date": 1592644375, "question_id": 57183590, "link": "https://stackoverflow.com/questions/57183590/edit-how-to-import-mp3-files-in-react-app", "title": "EDIT: How to import MP3 files in React app", "body": "<p><strong>UPDATE\nThe problem lied with my lack of knowledge in the environment I was working on but the answers given below should be useful for others with similar problems.</strong></p>\n<p>EDIT: As it seems the problem is that there's something funky going on with trying to import my mp3 to my React app/component.\nThe current issues is that when I try to use:</p>\n<p><code> import soundfile from &quot;../neure-resources/test.mp3&quot;</code></p>\n<p><strong>I end up with an error of:</strong></p>\n<blockquote>\n<p>&quot;Cannot find module &quot;../neure-resources/test.mp3&quot;</p>\n</blockquote>\n<p><strong>Solving this issue for any other import of an component would be to make sure that the component that is being imported has also been defined to be exportable but how would one go about doing this to an MP3-file?</strong></p>\n<hr />\n<p>So to start with I'm not sure if my problem has to do with importing/linking my mp3 file OR with how to play audio clips in React (or something else). I will edit the title once we figure out what my issue exactly is.</p>\n<p>So I have an app where I have a button on the web page that the user can push to play a mp3-file. Simple stuff but I'm running constantly into the following error:</p>\n<blockquote>\n<p>HTTP load failed with status 404. Load of media resource &quot;...&quot; failed.</p>\n</blockquote>\n<p>Now while I am not super proficient in file paths etc. I'd figure by looking at guides and examples I could figure it out, but I haven't been able to.</p>\n<p>My abbreviated file structure is something like (<strong>check bottom of post for more detailed description</strong>):</p>\n<blockquote>\n<p>student/src/components</p>\n</blockquote>\n<p>and under components I have my actual app in a folder and another folder under components where I planned to store my &quot;resources&quot; so:</p>\n<blockquote>\n<p>components/my-app-folder/my-actual-app.tsx</p>\n<p>components/my-resources/my.mp3</p>\n</blockquote>\n<p>For the filepath as I understood</p>\n<blockquote>\n<p>&quot;..&quot;</p>\n</blockquote>\n<p>signifies for the path to start from one folder above the current location which would be my</p>\n<blockquote>\n<p>&quot;/components&quot; -folder</p>\n</blockquote>\n<p>and my resources folder is under the component folder so I figured that should be fine.\nI looked up a few other SO questions about playing audio in React and found a question that suggested roughly the following:</p>\n<p>Inside my</p>\n<p><code>render()</code></p>\n<pre><code>let path = &quot;../my-resources/test.mp3&quot;;\nlet audio = new Audio(path);\n</code></pre>\n<p>And then for the JSX part:</p>\n<pre><code>audioPlayer = (\n            &lt;div className=&quot;count-number-equivelance-audioPlayer&quot;&gt;\n                &lt;button id=&quot;equivalence-audio-button&quot; onClick={() =&gt; audio.play()}&gt;Soundclip!&lt;/button&gt;\n            &lt;/div&gt;\n        ); \n</code></pre>\n<p>I've tried:</p>\n<p><code>    let path = &quot;../my-resources/test.mp3&quot;;</code></p>\n<p>and</p>\n<p><code>    let path = &quot;../../my-resources/test.mp3&quot;;</code></p>\n<p>as I wasn't sure if one &quot;..&quot; pointed to the folder the actual app was nested in and required another &quot;..&quot; to actual point at the &quot;components&quot; folder but both of them produce the same error. I also tried using the whole path and moving the mp3 around to the same folder as the app itself but got the same result.</p>\n<p>So I am thoroughly confused as to if I just suck at using external resources in my app or is my actual code and/or knowledge of React to blame here. The error I receive would lead me to believe that the resource isn't being located properly but I'm not sure if that's just a side effect of faulty code.</p>\n<p>EDIT: I'm also working in a virtual environment, running my own stack locally if that makes some difference to the situation.</p>\n<p>Also for reference a picture of the file tree:</p>\n<p><strong>The files opened in the picture contain the app in question and the resource it's trying to use:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/MRjr5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MRjr5.png\" alt=\"File tree\" /></a></p>\n<p>The path leading up to components is the following (pic would be really big if I tried to grab the whole path in one picture).</p>\n<blockquote>\n<p>/Users/&quot;name of user&quot;/arvio/client/student/src/components</p>\n</blockquote>\n"}, {"tags": ["javascript", "reactjs", "typescript", "react-router"], "comments": [{"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1563973495, "post_id": 57183554, "comment_id": 100877928, "body": "Careful, setState does not execute/complete \u201cright away\u201d there will be a moment where isAuthenticated will be false causing your routing to navigate to login view. Do you have a redirect in that login view?"}, {"owner": {"reputation": 95, "user_id": 3453999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c0d33efcd477ebb475690a35243f7b?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsky59", "link": "https://stackoverflow.com/users/3453999/kaminsky59"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1563975662, "post_id": 57183554, "comment_id": 100879142, "body": "I don&#39;t have a redirect on the login view, but I&#39;m not getting a rerender at all. If there is a delay in the change, I&#39;m fine with that, but it doesn&#39;t trigger the <code>render</code> call at all"}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 1, "creation_date": 1563975969, "post_id": 57183554, "comment_id": 100879339, "body": "Are you sure a rerender isn\u2019t happening? If isAuthenticated is false it will go to /signin/ view. Once it\u2019s there, you\u2019re first Route with ternary operation checking isAuthenticated to route to dashboard will not hit because the url is no longer /. So unless you have redirect logic in signin view to redirect to dashboard, it will never get there unless you are redirecting back to / after some event so that first route logic attempts execute again after isAuthenticated as been set to true."}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1563976078, "post_id": 57183554, "comment_id": 100879407, "body": "The router documentation has a great example for an auth flow <a href=\"https://reacttraining.com/react-router/web/example/auth-workflow\" rel=\"nofollow noreferrer\">reacttraining.com/react-router/web/example/auth-workflow</a> it uses the values of the redirect to navigate the user to originally requested route after a login, definitely check it out."}], "owner": {"reputation": 95, "user_id": 3453999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c0d33efcd477ebb475690a35243f7b?s=128&d=identicon&r=PG&f=1", "display_name": "kaminsky59", "link": "https://stackoverflow.com/users/3453999/kaminsky59"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563973115, "creation_date": 1563973115, "question_id": 57183554, "link": "https://stackoverflow.com/questions/57183554/setstate-doesnt-rerender-component-after-calling-it-in-componentdidmount", "title": "SetState doesn&#39;t rerender component after calling it in componentDidMount", "body": "<p>I am trying to change a route in my component if the user has logged in before and that information is saved. I see <code>setState</code> being called in the <code>componentDidMount</code> method, but the <code>render</code> method is not being called again, not \"logging\" in the user.</p>\n\n<p>If I log in the user, <code>loggedIn()</code> gets called and the component is rerendered with the correct state set. </p>\n\n<p>According to the ReactJS docs, I can call <code>setState</code> in <code>componentDidMount</code> right away but it doesn't seem to render using the correct state. Any help would be appreciated</p>\n\n<pre><code>import * as React from 'react';\nimport { Route, Redirect, withRouter, RouteComponentProps } from 'react-router-dom';\nimport SignIn from '../components/signIn/signInComponent';\nimport Register from '../components/register/registerComponent';\nimport Dashboard from '../components/dashboard/dashboard.component';\n\ninterface AuthState {\n  isAuthenticated: boolean\n}\n\nclass Routes extends React.Component&lt;any, AuthState&gt;{\n\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      isAuthenticated: false\n    };\n  }\n\n  componentDidMount = () =&gt; {\n    this.setState({\n      isAuthenticated: true\n    });\n  }\n\n  loggedIn = () =&gt; {\n    this.setState({\n      isAuthenticated: true\n    });\n  }\n\n  render() {\n    return (\n      &lt;div&gt;\n            &lt;Route path='/' exact render={() =&gt; (\n              !this.state.isAuthenticated ? (&lt;Redirect to='/signin'/&gt;) : (&lt;Dashboard/&gt;)\n            )}/&gt;\n            &lt;Route path='/signin' exact render={() =&gt; (\n              &lt;SignIn onLoggedIn={this.loggedIn}/&gt;\n            )}/&gt;\n            &lt;Route path='/register' exact component={Register}/&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default withRouter(Routes);\n</code></pre>\n"}, {"tags": ["typescript", "typescript-typings", "conditional-types"], "owner": {"reputation": 57, "user_id": 3537094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000489124683/picture?type=large", "display_name": "bo.", "link": "https://stackoverflow.com/users/3537094/bo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563972996, "creation_date": 1563972996, "question_id": 57183509, "link": "https://stackoverflow.com/questions/57183509/resolve-object-item-type-correctly-when-using-conditionally-mapped-keys-key-ap", "title": "Resolve object item type correctly, when using conditionally mapped keys (key applied back on the object)", "body": "<p>Hopefully, I just miss something and someone could point it out, but I ran into a problem, when TS can not determine correctly the type of an object item value, taken by a property, the name of which was conditionally mapped from that very item type.</p>\n\n<p>Assume we have an interface, some properties of which contain an array of a specific type.</p>\n\n<pre><code>interface Aa {\n  foo: string;\n  bar: Bb[];\n}\n\ninterface Bb {\n  zap: string;\n}\n\n</code></pre>\n\n<p>Based on that, creating a new interface, which would restrict the 'prop' property to be equal only to 'bar' in our case, where B[] is stored. Imagine, there will be other but similar type combinations.</p>\n\n<pre><code>interface Kk&lt;T, U&gt; {\n  prop: {[keyT in keyof T]: T[keyT] extends U[] ? keyT : never}[keyof T];\n}\n\nconst key: Kk&lt;Aa, Bb&gt; = {\n  prop: 'bar'\n};\n</code></pre>\n\n<p>And it works as expected: 'key' cannot have value of 'prop' other than 'bar'.</p>\n\n<p>However, when it comes for referencing value by that property there comes a TS problem, that item does not have forEach method.</p>\n\n<pre><code>let b1: Bb = { zap: 'b1' }, b2: Bb = { zap: 'b2' };\nlet a1: Aa = { foo: 'foo', bar: [b1, b2] };\n\nfunction f&lt;T, U&gt;(k: K&lt;T, U&gt;, a: T) {\n    a[k.prop].forEach((b: Bb) =&gt; { console.log(b); }); // TS no forEach \n    return k.prop;   \n}\n</code></pre>\n\n<p>As it's described in <a href=\"https://stackoverflow.com/questions/53169687/typescript-getting-correct-inference-type-when-using-conditional-mapped-keys\">relevant post here</a> it seems like the problem is that T occurs in the function signature 'too often'.\nAnd if we try to use the result of the function as a key, there is no error.</p>\n\n<pre><code>let k = f(key, a1);\na1[k].forEach(() =&gt; {});\n</code></pre>\n\n<p>Still I bear a hope that there is a clean solution for this and I miss something.</p>\n\n<p>Link to <a href=\"https://typescript-play.js.org/#code/JYOwLgpgTgZghgYwgAgILIN4ChnJge3wC5kBnMKUAcwG4dkAjOKEgIQG0BdOgXyy1CRYiFK0z0AXnAAOJcpRC0sfAeGjwkyANIAeACoAaZAFUAfONzSo+WZnYBrCAE89yUMkdP8MZHs4k9B2c-ZAgAD0gQABNSEy5kAH4PYOQSEAgAN2geIK8fP15+BHwQcmSnEl1UI1ZzAF4LZCsbEgByJihW5TosABsIMEYARjZkBoxkKVtWqaHW5B4jBgAmUfHJmTap5fmeOn7BuBG0McbcAmJkVovWg3pcDpJ2BiGl5c47lRgAVxAEMGAJTw+iMZgAFPZKiCTKYjHAAgBKM7IOAOAB0zWknDRBCgAFFEAALMFghhsJF1cwTYqlfD9NG9fBUUkImgLVn3ZBQAbfKAgDwY6zSNm4ZT8A4eU4wCHOOFDDlHBzY3EEhDEsEUqk8DlYIA\" rel=\"nofollow noreferrer\">TS playground</a></p>\n"}, {"tags": ["node.js", "typescript", "firebase", "google-cloud-firestore", "google-cloud-functions"], "answers": [{"comments": [{"owner": {"reputation": 7173, "user_id": 1413687, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1t9XQ.png?s=128&g=1", "display_name": "Sebastian Kreft", "link": "https://stackoverflow.com/users/1413687/sebastian-kreft"}, "edited": false, "score": 0, "creation_date": 1587403304, "post_id": 57184055, "comment_id": 108493020, "body": "This is an instance of the bug reported here <a href=\"https://github.com/firebase/firebase-functions/issues/659\" rel=\"nofollow noreferrer\">github.com/firebase/firebase-functions/issues/659</a>."}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 3, "last_activity_date": 1563974746, "creation_date": 1563974746, "answer_id": 57184055, "question_id": 57183349, "link": "https://stackoverflow.com/questions/57183349/getting-object-possibly-undefined-when-triggering-cloud-function-on-document-c/57184055#57184055", "title": "Getting &quot;Object possibly undefined&quot; when triggering Cloud Function on document creation", "body": "<p>My first guess is that the typescript compiler can't know whether <code>snap.data()</code> has a value, so you'll need to check for that:</p>\n\n<pre><code>  const newValue = snap.data();\n\n  if (newValue) {\n    const email = newValue.email;\n    const phone = newValue.phone;\n\n    console.log(newValue);\n</code></pre>\n\n<p>If this is indeed the case, it might have the same problem later on, since it can't be sure that <code>newValue</code> has <code>email</code> and <code>phone</code> properties. If you get a similar message for those, you'll have to add a similar checks for them too.</p>\n"}], "owner": {"reputation": 287, "user_id": 10607599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc0def948ffafff1d95430337490a06?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Enache", "link": "https://stackoverflow.com/users/10607599/andrei-enache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "closed_date": 1563982969, "accepted_answer_id": 57184055, "answer_count": 1, "score": 2, "last_activity_date": 1563983135, "creation_date": 1563972500, "last_edit_date": 1563982963, "question_id": 57183349, "link": "https://stackoverflow.com/questions/57183349/getting-object-possibly-undefined-when-triggering-cloud-function-on-document-c", "closed_reason": "Duplicate", "title": "Getting &quot;Object possibly undefined&quot; when triggering Cloud Function on document creation", "body": "<p>I'm trying to create a new authenticated user whenever a new document is added in collection \"users\". The user details shall be provided in the new document in the fields \"email\" and \"phone\". </p>\n\n<p>The code below only triggers when a new document is created but can not fetch the values in that document for creating an authenticated user with email, phone and a random userId.</p>\n\n<pre><code>import * as functions from 'firebase-functions';\n\nconst admin = require('firebase-admin');\n\nadmin.initializeApp();\n\nexports.updateUser = functions.firestore\n\n    .document('users/{user}').onCreate((snap, context) =&gt; {\n      // ... Your code here\n\n      const newValue = snap.data();\n\n      const email = newValue.email;\n      const phone = newValue.phone;\n\n      console.log(newValue);\n\n      console.log(\"new user added\");\n\n      admin.auth().createUser({\n        uid: 'some-uid',\n        email: email,\n        phoneNumber: phone\n      })\n        .then(function() {\n          // See the UserRecord reference doc for the contents of userRecord.\n          console.log('Successfully created new user:');\n        })\n        .catch(function() {\n          console.log('Error creating new user:');\n        });\n\n\n    });\n</code></pre>\n\n<p>I'm getting an error \"Object possibly undefined\" for the const \"newValue\" in these lines of code.</p>\n\n<pre><code>const email = newValue.email;\nconst phone = newValue.phone;\n</code></pre>\n"}, {"tags": ["html", "typescript", "frontend"], "comments": [{"owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "reply_to_user": {"reputation": 3162, "user_id": 5729813, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/543553a29a670d036966954eebda5a27?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar Walzade", "link": "https://stackoverflow.com/users/5729813/tushar-walzade"}, "edited": false, "score": 0, "creation_date": 1563971959, "post_id": 57183041, "comment_id": 100877004, "body": "why that? i need to define the functions don&#39;t i? and it throws errors without the function keyword"}, {"owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "reply_to_user": {"reputation": 3162, "user_id": 5729813, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/543553a29a670d036966954eebda5a27?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar Walzade", "link": "https://stackoverflow.com/users/5729813/tushar-walzade"}, "edited": false, "score": 0, "creation_date": 1563972633, "post_id": 57183041, "comment_id": 100877434, "body": "it&#39;s everything in the question : <a href=\"https://stackblitz.com/edit/typescript-94uuuu\" rel=\"nofollow noreferrer\">stackblitz.com/edit/typescript-94uuuu</a>"}, {"owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "reply_to_user": {"reputation": 3162, "user_id": 5729813, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/543553a29a670d036966954eebda5a27?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar Walzade", "link": "https://stackoverflow.com/users/5729813/tushar-walzade"}, "edited": false, "score": 0, "creation_date": 1563973046, "post_id": 57183041, "comment_id": 100877665, "body": "@ Tushar Walzade: thanks, already tried that and did not help :("}, {"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1563974651, "post_id": 57183041, "comment_id": 100878600, "body": "where is index.ts? app.use(express.static(&quot;src/public&quot;)); will acess public folder. if your index.ts is somewhere else it wont get the file"}, {"owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "reply_to_user": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1564060370, "post_id": 57183041, "comment_id": 100913122, "body": "the indes.ts is in the public folder. could be that the index.js needs to be in that folder"}, {"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1564069784, "post_id": 57183041, "comment_id": 100918590, "body": "if compile ts on server that should be izi for you. just import index.js not ts. if you want to import ts file you need to have runtime compilers... so your app will compile ts on client side. if you have index.js just add it do your public folder and in script use this js file"}], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "edited": false, "score": 0, "creation_date": 1563973344, "post_id": 57183479, "comment_id": 100877841, "body": "unfortunately it doesn&#39;t help because the index.ts itself is not found i guess"}], "tags": [], "owner": {"reputation": 168, "user_id": 5822229, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0KvLSFCJQww/AAAAAAAAAAI/AAAAAAAAABI/4NGYiDd__lo/photo.jpg?sz=128", "display_name": "Marc Hern&#225;ndez", "link": "https://stackoverflow.com/users/5822229/marc-hern%c3%a1ndez"}, "is_accepted": false, "score": 1, "last_activity_date": 1563972906, "creation_date": 1563972906, "answer_id": 57183479, "question_id": 57183041, "link": "https://stackoverflow.com/questions/57183041/integrate-ts-into-html-uncaught-referenceerror-clickbutton-not-defined/57183479#57183479", "title": "Integrate ts into html: uncaught ReferenceError clickbutton not defined", "body": "<p>It seems to be an error caused because the function is defined outside of the global scope.\nYou can try to assign the function to the global <strong>window</strong> object just below of the function declaration:</p>\n\n<pre><code>function clickButton(){\n   ...\n}\n\nwindow.clickButton = clickButton; // Now the function can be accessed from global scope\n</code></pre>\n\n<p>Also u can try to add the eventlistener on your JS file instead of using the html attribute onclick:</p>\n\n<pre><code>function clickButton(){\n   ...\n}\n\ndocument.querySelector('.button-smth').addEventListener('click', clickButton);\n</code></pre>\n\n<p>This way you don't need to assign the function to the global scope at all, but you will need to add the class <strong>'.button-smth'</strong> (or whatever) to the html button element.</p>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "edited": false, "score": 0, "creation_date": 1564060328, "post_id": 57183987, "comment_id": 100913091, "body": "i already tried to integrate the compiled js file. the output directory is another one and the js file is not found either."}, {"owner": {"reputation": 3162, "user_id": 5729813, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/543553a29a670d036966954eebda5a27?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar Walzade", "link": "https://stackoverflow.com/users/5729813/tushar-walzade"}, "reply_to_user": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "edited": false, "score": 0, "creation_date": 1564063604, "post_id": 57183987, "comment_id": 100915094, "body": "So, you&#39;ll need to provide the relative path of your js file"}], "tags": [], "owner": {"reputation": 3162, "user_id": 5729813, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/543553a29a670d036966954eebda5a27?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar Walzade", "link": "https://stackoverflow.com/users/5729813/tushar-walzade"}, "is_accepted": false, "score": 0, "last_activity_date": 1563974506, "last_edit_date": 1592644375, "creation_date": 1563974506, "answer_id": 57183987, "question_id": 57183041, "link": "https://stackoverflow.com/questions/57183041/integrate-ts-into-html-uncaught-referenceerror-clickbutton-not-defined/57183987#57183987", "title": "Integrate ts into html: uncaught ReferenceError clickbutton not defined", "body": "<p>Your ts need to be compiled to js first. Then, you could possibly use it as follows -</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function clickButton() {\n   document.getElementById(\"cases\").innerText = \"Hello Cases\"\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;head&gt;\n    &lt;script type=\"text/javascript\" src=\"index.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;button onclick=\"clickButton()\"&gt;Click&lt;/button&gt;\n    &lt;div id=\"cases\"&gt;&lt;/div&gt;\n&lt;/body&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><strong>Note:</strong> This is just a possible solution</p>\n"}], "owner": {"reputation": 158, "user_id": 10232938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f3fa698ba2931e27f893705651db0b?s=128&d=identicon&r=PG&f=1", "display_name": "tamara d", "link": "https://stackoverflow.com/users/10232938/tamara-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563974528, "creation_date": 1563971521, "question_id": 57183041, "link": "https://stackoverflow.com/questions/57183041/integrate-ts-into-html-uncaught-referenceerror-clickbutton-not-defined", "title": "Integrate ts into html: uncaught ReferenceError clickbutton not defined", "body": "<p>I try to build a simple CRUD frontend with <strong>no frameworks</strong>! I try to integrate a TypeScript file (intex.ts) into my index.html but it keeps beeing not found so that the called functions are undefined. I'm aware that browsers can't handle typescript but need javascript. I build my app before testing and all ts files get compiled. I tried integrating the compiled js file but it's not found either. All my frontend code is in directory src/public.</p>\n\n<p><strong>How do I connect my public/index.html with my public/index.ts so that the fundtions work?</strong></p>\n\n<p><strong>relevant index.html code</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>  &lt;head&gt;\n    &lt;script type=\"text/typescript\" src=\"index.ts\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n     &lt;button onclick=\"clickButton()\"&gt;Click&lt;/button&gt;\n  &lt;/body&gt;\n</code></pre>\n\n<p><strong>all index.ts code</strong></p>\n\n<pre><code>function clickButton() {\n   document.getElementById(\"cases\").innerText = \"Hello Cases\"\n}\n</code></pre>\n\n<p><strong>error i'm getting when clicking the button</strong></p>\n\n<pre><code>index.html:18 Uncaught ReferenceError: clickButton is not defined\n    at HTMLButtonElement.onclick (index.html:18)\n</code></pre>\n\n<p>I use express in the backend and use express.static:</p>\n\n<pre><code>app.use(express.static(\"src/public\"));\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "sap-cloud-platform", "sap-cloud-sdk"], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 1474237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/f52po.jpg?s=128&g=1", "display_name": "maxstreifeneder", "link": "https://stackoverflow.com/users/1474237/maxstreifeneder"}, "edited": false, "score": 0, "creation_date": 1564303085, "post_id": 57183630, "comment_id": 100979992, "body": "looks good! I&#39;d like to add a few - maybe already done - steps:   1) enabling the ssh for your space: cf allow-space-ssh [spacename] 2) cf enable-ssh [yourapp] 3) restart your app, so that the previous command becomes effective"}], "tags": [], "owner": {"reputation": 669, "user_id": 4792009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5753d9cbdfc07f99a8e052c35a8e945d?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis H", "link": "https://stackoverflow.com/users/4792009/dennis-h"}, "is_accepted": false, "score": 4, "last_activity_date": 1563973391, "creation_date": 1563973391, "answer_id": 57183630, "question_id": 57183017, "link": "https://stackoverflow.com/questions/57183017/remote-debugging-a-node-js-application-on-sap-cloud-foundry/57183630#57183630", "title": "Remote Debugging a node.js application on SAP Cloud Foundry", "body": "<p>I'm not sure whether this is the best approach, but it works for me, so here goes:</p>\n\n<p>First, you need to adapt the start <code>command</code> of your app in the manifest.yml so that you're able to to attach your debugger. For example:</p>\n\n<pre><code>command: node --inspect --require ts-node/register src/index.ts\u000b\n</code></pre>\n\n<p>In this example I'm using TypeScript, if you're using plain JS, it would probably look something like this:</p>\n\n<pre><code>command: node --inspect src/index.js\n</code></pre>\n\n<p>Next, in order to be able to attach the debugger to the inspector, you will need to open an ssh tunnel to your app, like this:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>cf ssh &lt;APP_NAME&gt; -N -T -L 9229:127.0.0.1:9229\n</code></pre>\n\n<p>This will tunnel port 9229 of your local machine to port 9229 on the container your app is running in (9229 is the default port the inspector runs on).</p>\n\n<p>Finally, (and I'm assuming you use VS code here) you need to start your debugger. Here's the configuration I'm using for that:</p>\n\n<pre><code>{\n  \"type\": \"node\",\n  \"request\": \"attach\",\n  \"name\": \"Attach to Remote\",\n  \"address\": \"localhost\",\n  \"port\": 9229,\n  \"localRoot\": \"${workspaceFolder}\",\n  \"remoteRoot\": \"/home/vcap/app\"\n}\n</code></pre>\n\n<p>The drawback of this approach is (compared to debugging a Java app) that there is now way to attach to a running application, because you will need to have started your with <code>--inspect</code> (which you probably will not want to do by default for a productive app). I have not found a solution for this yet. So you might wanna have a separate deployment in case you're already running productively.</p>\n"}], "owner": {"reputation": 33, "user_id": 8578869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hQMDPw8EzCc/AAAAAAAAAAI/AAAAAAAADPY/wGh87xcPvBE/photo.jpg?sz=128", "display_name": "HSSE", "link": "https://stackoverflow.com/users/8578869/hsse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1563973391, "creation_date": 1563971438, "question_id": 57183017, "link": "https://stackoverflow.com/questions/57183017/remote-debugging-a-node-js-application-on-sap-cloud-foundry", "title": "Remote Debugging a node.js application on SAP Cloud Foundry", "body": "<p>We have hosted several node.js express services on SAP Cloud Foundry. Since we can't get any further with this problem and maybe others are faced with <a href=\"https://stackoverflow.com/questions/57110113/cannot-access-s-4hana-on-premise-system-via-cloud-connector-using-sap-cloud-sdk\">this</a> problem, here is the explicit question about this:<br>\nHow can you remotely debug a node.js application (our own) hosted on SAP Cloud Foundry? <br>\nIn our case, we have an express service that uses the SAP Cloud SDK (v1.6.1) to provide various data from SAP Cloud and OnPremise.</p>\n"}, {"tags": ["reactjs", "typescript", "ubuntu-18.04", "autosuggest"], "comments": [{"owner": {"reputation": 1095, "user_id": 1147618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2def0de279c2a009f9339e20878e698?s=128&d=identicon&r=PG", "display_name": "dbramwell", "link": "https://stackoverflow.com/users/1147618/dbramwell"}, "edited": false, "score": 0, "creation_date": 1563971222, "post_id": 57182877, "comment_id": 100876524, "body": "Have you tried doing what it says?"}], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 10147342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cf72c2ef1f529b1a042ad68e7e355d?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/10147342/tushar"}, "edited": false, "score": 0, "creation_date": 1563971466, "post_id": 57183001, "comment_id": 100876678, "body": "i edit my post please review it again and give me a suggestion for that @jsdeveloper"}, {"owner": {"reputation": 3348, "user_id": 5707700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28bfee9c700466251036ecb2d9ab6932?s=128&d=identicon&r=PG&f=1", "display_name": "jsdeveloper", "link": "https://stackoverflow.com/users/5707700/jsdeveloper"}, "reply_to_user": {"reputation": 104, "user_id": 10147342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cf72c2ef1f529b1a042ad68e7e355d?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/10147342/tushar"}, "edited": false, "score": 0, "creation_date": 1563971599, "post_id": 57183001, "comment_id": 100876771, "body": "does it still build ok? if so I wouldn&#39;t worry about the types since you aren&#39;t using Typescript"}, {"owner": {"reputation": 104, "user_id": 10147342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cf72c2ef1f529b1a042ad68e7e355d?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/10147342/tushar"}, "edited": false, "score": 0, "creation_date": 1563971867, "post_id": 57183001, "comment_id": 100876948, "body": "its not build ok , but first of all, i have a problem for importing react-autosuggest module if I not write anything in the file ,error which i suggest above its still there"}, {"owner": {"reputation": 3348, "user_id": 5707700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28bfee9c700466251036ecb2d9ab6932?s=128&d=identicon&r=PG&f=1", "display_name": "jsdeveloper", "link": "https://stackoverflow.com/users/5707700/jsdeveloper"}, "reply_to_user": {"reputation": 104, "user_id": 10147342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cf72c2ef1f529b1a042ad68e7e355d?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/10147342/tushar"}, "edited": false, "score": 0, "creation_date": 1563972201, "post_id": 57183001, "comment_id": 100877170, "body": "did you do: npm install @types/react-autosuggest ? Otherwise, try a different code editor."}], "tags": [], "owner": {"reputation": 3348, "user_id": 5707700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28bfee9c700466251036ecb2d9ab6932?s=128&d=identicon&r=PG&f=1", "display_name": "jsdeveloper", "link": "https://stackoverflow.com/users/5707700/jsdeveloper"}, "is_accepted": false, "score": 0, "last_activity_date": 1563971401, "creation_date": 1563971401, "answer_id": 57183001, "question_id": 57182877, "link": "https://stackoverflow.com/questions/57182877/not-able-to-import-react-autosuggest-module-showing-the-error-below/57183001#57183001", "title": "Not able to import react-autosuggest module showing the error below", "body": "<p>you can't do this:</p>\n\n<pre><code>import AutoSuggest = require(\"react-autosuggest\");\n</code></pre>\n\n<p>You are mixing nodejs style 'require' and es6 style imports in the same line.</p>\n\n<p>Try either:</p>\n\n<pre><code>const AutoSuggest = require(\"react-autosuggest\");\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>import AutoSuggest from 'react-autosuggest'\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 10147342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cf72c2ef1f529b1a042ad68e7e355d?s=128&d=identicon&r=PG&f=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/10147342/tushar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563971998, "creation_date": 1563971057, "last_edit_date": 1563971998, "question_id": 57182877, "link": "https://stackoverflow.com/questions/57182877/not-able-to-import-react-autosuggest-module-showing-the-error-below", "title": "Not able to import react-autosuggest module showing the error below", "body": "<p>I am importing the react-autosuggestion module but its showing error in my typescript file, I have Ubuntu v18 OS.</p>\n\n<p>1st I did :</p>\n\n<blockquote>\n  <p><code>sudo npm install react-autosuggest --save</code></p>\n</blockquote>\n\n<pre><code>import Autosuggest from 'react-autosuggest';\n\n\nconst languages = [\n  {\n    name: 'C',\n    year: 1972\n  },\n  {\n    name: 'Elm',\n    year: 2012\n  },\n\n];\n// value.\nconst getSuggestions = value =&gt; {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n\n  return inputLength === 0 ? [] : languages.filter(lang =&gt;\n    lang.name.toLowerCase().slice(0, inputLength) === inputValue\n  );\n};\n// the\n\nconst getSuggestionValue = suggestion =&gt; suggestion.name;\n\n\nconst renderSuggestion = suggestion =&gt; (\n  &lt;div&gt;\n    {suggestion.name}\n  &lt;/div&gt;\n);\n\nclass Example extends React.Component {\n  constructor() {\n    super();\n\n\n    this.state = {\n      value: '',\n      suggestions: []\n    };\n  }\n\n  onChange = (event, { newValue }) =&gt; {\n    this.setState({\n      value: newValue\n    });\n  };\n\n  // suggestions.\n\n  onSuggestionsFetchRequested = ({ value }) =&gt; {\n    this.setState({\n      suggestions: getSuggestions(value)\n    });\n  };\n\n  // suggestions.\n  onSuggestionsClearRequested = () =&gt; {\n    this.setState({\n      suggestions: []\n    });\n  };\n\n  render() {\n    const { value, suggestions } = this.state;\n\n\n    const inputProps = {\n      placeholder: 'Type a programming language',\n      value,\n      onChange: this.onChange\n    };\n\n    return (\n      &lt;Autosuggest\n        suggestions={suggestions}\n        onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        inputProps={inputProps}\n      /&gt;\n    );\n  }\n}\n</code></pre>\n\n<p>this error I got, when I hover on the import statement in my file</p>\n\n<p>Could not find a declaration file for module 'react-autosuggest'. '/var/www/html/rennga-app/node_modules/react-autosuggest/dist/index.js' implicitly has an 'any' type.\n  Try <code>npm install @types/react-autosuggest</code> if it exists or add a new declaration (.d.ts) file containing <code>declare module 'react-autosuggest';</code>ts(7016)</p>\n"}, {"tags": ["typescript", "meta", "nuxt.js"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "edited": false, "score": 0, "creation_date": 1563983028, "post_id": 57183476, "comment_id": 100883628, "body": "I see what you are saying. But, I guess Vue works with ts a little bit more complicated. Because without &quot;meta&quot; it works. Moreover, $t is a function of i18n which is known all over the project because it is injected."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "reply_to_user": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "edited": false, "score": 0, "creation_date": 1563986419, "post_id": 57183476, "comment_id": 100885373, "body": "You are saying <code>{data() { return this.$t(&#39;&#39;); }}</code> isn&#39;t a type check error?"}, {"owner": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "edited": false, "score": 1, "creation_date": 1564118340, "post_id": 57183476, "comment_id": 100932367, "body": "No, it&#39;s not. please refer to the vuejs and typescript documents and you&#39;ll see this works. In fact, in my question, there is a problem with meta not this.$t"}], "tags": [], "owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "is_accepted": false, "score": 0, "last_activity_date": 1563972901, "creation_date": 1563972901, "answer_id": 57183476, "question_id": 57182796, "link": "https://stackoverflow.com/questions/57182796/nuxtjs-using-typescript-has-problem-with-using-meta/57183476#57183476", "title": "Nuxtjs using typescript has problem with using meta", "body": "<p>By using <code>&lt;type=\"ts\"&gt;</code> we are invoking TypeScript typechecking.\nNow lets break the code down to see why the error is legitimate.</p>\n\n<pre><code>const obj = {\n  meta: {\n    authorization: ['Organization/List']\n  },\n  data() {\n    return {\n           text: this.$t('organization.title'),\n    }\n   }\n};\n\nexport default obj;\n</code></pre>\n\n<p>Now, in the <code>data</code> method, <code>this</code> refers to the object <code>obj</code> and we reference the property <code>$t</code> of <code>this</code>, of <code>obj</code>. Clearly there is no such property.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "edited": false, "score": 0, "creation_date": 1566769618, "post_id": 57354774, "comment_id": 101750405, "body": "it is possible to set meta without using decorator. By the way, with or without decorator, i cannot get meta properties in the middleware as follows: <code>route.meta.forEach(item =&gt; {         if (item.authorization &amp;&amp; typeof item.authorization !== undefined) { } })</code>"}, {"owner": {"reputation": 204, "user_id": 11537130, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D8ZfmD8ugvU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaOX70ZHhZ0L_lBmNwisJ8W_NPWg/mo/photo.jpg?sz=128", "display_name": "user11537130", "link": "https://stackoverflow.com/users/11537130/user11537130"}, "reply_to_user": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "edited": false, "score": 0, "creation_date": 1567338072, "post_id": 57354774, "comment_id": 101929273, "body": "okay I think you&#39;re referring to the router meta. in this case you can use the extendRoutes but this solution maybe long, but it&#39;s working enough for the this.$t you must inject it the vue instances <a href=\"https://nuxtjs.org/guide/plugins/#inject-into-vue-instances\" rel=\"nofollow noreferrer\">link</a> or use a ts ignore [code]// @ts-ignore [/code] above the this.$t"}, {"owner": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "edited": false, "score": 0, "creation_date": 1568724696, "post_id": 57354774, "comment_id": 102358914, "body": "Yes, I meant like this: (<a href=\"https://router.vuejs.org/guide/advanced/meta.html\" rel=\"nofollow noreferrer\">router.vuejs.org/guide/advanced/meta.html</a>). However, in Nuxt, routes would generated based on folders convention. in Nuxt without ts this meta can be added in the component without any problem, but the issue would raise when I use ts :            &lt;script lang=&quot;ts&quot;&gt; import Vue from &#39;vue&#39; export default Vue.extend({}) I tried everything in the past days and ended up using beforeRouteEnter in the component.  export default Vue.extend({   beforeRouteEnter(to, from, next) {} but in case of lacking access, it seems to enter the page for a few seconds."}], "tags": [], "owner": {"reputation": 204, "user_id": 11537130, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D8ZfmD8ugvU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaOX70ZHhZ0L_lBmNwisJ8W_NPWg/mo/photo.jpg?sz=128", "display_name": "user11537130", "link": "https://stackoverflow.com/users/11537130/user11537130"}, "is_accepted": false, "score": 1, "last_activity_date": 1567339085, "last_edit_date": 1567339085, "creation_date": 1564993641, "answer_id": 57354774, "question_id": 57182796, "link": "https://stackoverflow.com/questions/57182796/nuxtjs-using-typescript-has-problem-with-using-meta/57354774#57354774", "title": "Nuxtjs using typescript has problem with using meta", "body": "<p>You can achieve this by using the nuxt-property-decorator\nthis refer to the head property I'm not sure if this suits your need with plugin vue-meta but you can refer to the link given below about creating decorator to set vue-meta package</p>\n\n<pre><code>&lt;script lang=\"ts\"&gt;\nimport { Component, Vue } from 'nuxt-property-decorator';\n\n@Component({\n  layout: 'home',\n  head() {\n    return {\n      title: 'Test Title',\n      meta: [\n        { hid: 'description', name: 'description', content: 'My custom description' }\n      ]\n    }\n  }\n})\nexport default class MainPage extends Vue {\n\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>or create your own decorator so that you can define it inside the class</p>\n\n<p>@Meta</p>\n\n<p><a href=\"https://github.com/nuxt/vue-meta/issues/181#issuecomment-390258209\" rel=\"nofollow noreferrer\">https://github.com/nuxt/vue-meta/issues/181#issuecomment-390258209</a></p>\n\n<p>@Update 1/9/2019</p>\n\n<p>You can use extendRoutes, this isn't advisable but still works :)</p>\n\n<p>create permissions.js and inside it, it looks like this</p>\n\n<pre><code>export const normalUser = [\n  'route-name-invoices',\n  'route-name-invoices-create'\n];\n</code></pre>\n\n<p>in your nuxt.config.js - import your permission js</p>\n\n<pre><code>import { normalUser } from './permissions'\n\n...\n// find the router or you can define it\nrouter: {\n  extendRoutes(routes) {\n    return routes.map(route =&gt; {\n      if (normalUser.includes(route.name)) {\n        route.meta = { authorization: ['Organization/list'] };\n      }\n      return route;\n    });\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "is_accepted": true, "score": 0, "last_activity_date": 1570122849, "creation_date": 1570122849, "answer_id": 58223973, "question_id": 57182796, "link": "https://stackoverflow.com/questions/57182796/nuxtjs-using-typescript-has-problem-with-using-meta/58223973#58223973", "title": "Nuxtjs using typescript has problem with using meta", "body": "<p>It seems that the definition of meta key in route was added recently:\n<a href=\"https://github.com/nuxt/typescript/pull/89\" rel=\"nofollow noreferrer\">https://github.com/nuxt/typescript/pull/89</a></p>\n"}], "owner": {"reputation": 125, "user_id": 7493885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84f66f5755654cbf12136145d844bf8?s=128&d=identicon&r=PG&f=1", "display_name": "Narges Moemenyan", "link": "https://stackoverflow.com/users/7493885/narges-moemenyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1717, "favorite_count": 1, "accepted_answer_id": 58223973, "answer_count": 3, "score": 0, "last_activity_date": 1570122849, "creation_date": 1563970762, "question_id": 57182796, "link": "https://stackoverflow.com/questions/57182796/nuxtjs-using-typescript-has-problem-with-using-meta", "title": "Nuxtjs using typescript has problem with using meta", "body": "<p>In Nuxtjs I put my permissionKeys of the page so that i could check user's access in the middleware. when my script'language is js everything works like a charm, however, in case of lagn=\"ts\" I face errors.</p>\n\n<p>I've looked for the solution and using vue-meta package, but i ended up getting the same error.</p>\n\n<pre><code>&lt;script lang=\"ts\"&gt;\nexport default {\n  meta: {\n    authorization: ['Organization/List']\n  },\n  data() {\n    return {\n           text: this.$t('organization.title'),\n    }\n   }\n}\n</code></pre>\n\n<p>in this case i face this error: \"Property '$t' does not exist on type '{ meta: { authorization: string[]; }; data(): any; }'.\"</p>\n\n<p>I don't know what is the problem of using meta and global varaibles.</p>\n"}, {"tags": ["angular", "typescript", "redux", "ngrx", "ngrx-store"], "comments": [{"owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1563970640, "post_id": 57182646, "comment_id": 100876186, "body": "When and how <code>events</code> state is populated in the store? Looks like you are not populating <code>events</code> state"}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "reply_to_user": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1563970801, "post_id": 57182646, "comment_id": 100876264, "body": "The store is generating inside app.module.ts using &quot;StoreModule.forRoot({&#39;user&#39;: userReducer, &#39;events&#39;: eventsReducer})&quot;  import statement."}, {"owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1563970971, "post_id": 57182646, "comment_id": 100876356, "body": "That you are registering your reducers with the store. I am asking when and how are you updating the <code>events</code> state? You must dispatch an action to update the <code>events</code> state in your store. When you dispatch an action, the respective reducer will update the <code>events</code> in the store."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "reply_to_user": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1563971325, "post_id": 57182646, "comment_id": 100876591, "body": "Actually, the problem is not with the events slice. However, I dispatch an action to update the event slice from a service&#39;s function and that function is called under HomeComponent@ngOnInit hook. i.e before using a selector for &#39;eventsByUser_&#39;"}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1563971365, "post_id": 57182646, "comment_id": 100876619, "body": "Can you provide your reducer and effect. Your state does not magically get populated, you need to do it in your reducer."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563971407, "post_id": 57182646, "comment_id": 100876645, "body": "Sure. I am going to update my question."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "reply_to_user": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1563972459, "post_id": 57182646, "comment_id": 100877332, "body": "I didn&#39;t create effects. @ukn"}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1563972821, "post_id": 57182646, "comment_id": 100877535, "body": "What do you have inside you action.payload when assigning it to the state."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563973059, "post_id": 57182646, "comment_id": 100877672, "body": "I want to clear one thing is that the data is populated inside the store but as you can see that homecompont@ngonint when i called eventsByUser the user object is consoled as same intial value. I.e bookmarksid is returned empty object."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563973128, "post_id": 57182646, "comment_id": 100877721, "body": "Is this because i didn&#39;t use effects and the eventsByUser selector is called before dispatching the loaduser action?"}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1563973251, "post_id": 57182646, "comment_id": 100877790, "body": "The selector is triggered every time the data attached to it changes"}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563973362, "post_id": 57182646, "comment_id": 100877854, "body": "Ok so now i want to call the selector only when the user slice don&#39;t have intial value. How?"}, {"owner": {"reputation": 2477, "user_id": 2236151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce96c62de9de9ecf9f6433a77114bcb?s=128&d=identicon&r=PG", "display_name": "Alexandr Mihalciuc", "link": "https://stackoverflow.com/users/2236151/alexandr-mihalciuc"}, "edited": false, "score": 0, "creation_date": 1563974109, "post_id": 57182646, "comment_id": 100878294, "body": "Filter out state  from you store like this.store.pipe(select(eventsByUser_)).pipe(filter(event =&gt; &lt;you condition&gt;))"}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1563974268, "post_id": 57182646, "comment_id": 100878379, "body": "filter(Boolean) should do it"}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563974430, "post_id": 57182646, "comment_id": 100878461, "body": "Brother the question is that why this line &#39;console.log(&#39;User: &#39; + JSON.stringify(user));&#39; returns the initial state of the user. However, i populated the store with user state at appcomponent?"}, {"owner": {"reputation": 1425, "user_id": 5041973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74d15de9e0a9d237fcf5104246bfc13?s=128&d=identicon&r=PG&f=1", "display_name": "ukn", "link": "https://stackoverflow.com/users/5041973/ukn"}, "edited": false, "score": 0, "creation_date": 1563975026, "post_id": 57182646, "comment_id": 100878798, "body": "Are you sure your state is populated with the data returning from your service. The selector is triggered if the state update. Add a breakpoint inside your selector and checked if it breaks there after the reducer is called."}], "owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 725, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563972431, "creation_date": 1563970326, "last_edit_date": 1563972431, "question_id": 57182646, "link": "https://stackoverflow.com/questions/57182646/how-to-get-the-correct-slice-data-using-selectors-for-multiple-pieces-of-state-a", "title": "How to get the correct slice data using selectors for multiple pieces of state and use them inside component | ngRx | Redux | Angular 6 | typescript", "body": "<p>I am going to create an application using angular 6 and ngrx v6. I have created the following app state.</p>\n\n<p>app.module.ts</p>\n\n<pre><code>  StoreModule.forRoot({'user': userReducer, 'events': eventsReducer}),\n</code></pre>\n\n<p>app.state.ts</p>\n\n<pre><code>import { UsersState } from '@app/reducers/users.reducers';\nimport { EventsState } from '@app/reducers/events.reducers';\n\nexport interface AppState{\n    user:UsersState,\n    events:EventsState\n}\n</code></pre>\n\n<p>users.reducers.ts</p>\n\n<pre><code>export interface UsersState {\n    lastInteractionTime: number,\n    bookmarksId: object\n}\n\nconst intialState: UsersState = {\n    lastInteractionTime: time,\n    bookmarksId: {}\n}\n\nexport function userReducer(state = intialState, action: usersActions.Action): UsersState{\n  switch (action.type) {\n    case usersActions.LOAD_USERS:{\n      return Object.assign({}, action.payload, state);\n      // return action.payload;\n    }\n    default:{\n      return state;\n    }\n  }\n}\n</code></pre>\n\n<p>events.reducers.ts</p>\n\n<pre><code>import { AppState } from '@app/app-state';\n\nexport interface EventsState {\n  data: Array&lt;Object&gt;;\n}\n\nconst intialState: EventsState = {\n  lastInteractionTime: time,\n  data: []\n}\n\n\nexport function eventsReducer(state = intialState, action: eventsActions.Action): EventsState{\n  switch (action.type) {\n    case eventsAction.LOAD_EVENTS:{\n      return Object.assign({}, action.payload, state);\n      // return action.payload;\n    }\n    default:{\n      return state;\n    }\n  }\n}\n\nexport const selectUser = (state: AppState) =&gt; state.user;\n\nexport const selectEvents = (state: AppState) =&gt; state.events;\n\nexport const eventsByUser_ = createSelector(\n  selectUser,\n  selectEvents,\n  (user, events) =&gt; {\n      console.log('User: ' + JSON.stringify(user));\n      /*\n        add some logic, filter the data and return events by user's bookmark property.bookmark\n      */\n      return events.all[user.bookmarksId];\n    }\n)\n</code></pre>\n\n<p>When the application starts I dispatch the LoadUserAction action which called my API and returns user object with bookmarksId property.</p>\n\n<p>AppComponent@ngOnInit() </p>\n\n<pre><code>this.userData = this.userService.getUser().subscribe(\n      data =&gt; {\n        this.userData = data.response;\n        if(this.userData) {\n          this.store.dispatch(new LoadUserAction(this.userData));\n        }\n      },\n      err  =&gt; {\n        console.log(err);\n      }\n    );\n</code></pre>\n\n<p><strong>Problem:</strong> But in HomeComponent, I want to get the user's events based on their bookmarksId property. I didn't get the user's data is just because may be the API's response is not returned.</p>\n\n<p>HomeComponent.ts</p>\n\n<pre><code>export class HomeComponent implements OnInit {\n  constructor(private eventService:EventService) {\n\n  }\n}\nngOnInit() {\n  this.eventService.getData(\n    data =&gt; {\n       this.store.dispatch(loadEventData(data));\n    },\n    err  =&gt; {\n      console.log(err);\n    }\n  );\n  this.store.pipe(select(eventsByUser_)).subscribe(\n    console.log // it consoles the empty as because the user is always returning initial state with bookmarksId as empty object {}.\n  )\n}\n</code></pre>\n\n<p>EventService.ts</p>\n\n<pre><code>getData(){\n  ...\n  return eventsData //Observable of data.\n}\n</code></pre>\n\n<p>Do I need to place the subscribe method \"eventsByUser_\" somewhere else? How can I ensure that the \"eventsByUser_\" selector is working only when the user slice has data.</p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11399212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Dwlj.png?s=128&g=1", "display_name": "OfficialCRUGG", "link": "https://stackoverflow.com/users/11399212/officialcrugg"}, "edited": false, "score": 0, "creation_date": 1563971727, "post_id": 57182911, "comment_id": 100876854, "body": "I fixed the react import now. Thanks. But where do I have to put the types folder? In the root directory of the project or in the src directory?"}, {"owner": {"reputation": 1033, "user_id": 5261390, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ee60e0a2a2331094c351d33209ead4bc?s=128&d=identicon&r=PG", "display_name": "Ovidiu G", "link": "https://stackoverflow.com/users/5261390/ovidiu-g"}, "reply_to_user": {"reputation": 41, "user_id": 11399212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Dwlj.png?s=128&g=1", "display_name": "OfficialCRUGG", "link": "https://stackoverflow.com/users/11399212/officialcrugg"}, "edited": false, "score": 0, "creation_date": 1563971838, "post_id": 57182911, "comment_id": 100876929, "body": "I put mine in the root directory"}, {"owner": {"reputation": 41, "user_id": 11399212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Dwlj.png?s=128&g=1", "display_name": "OfficialCRUGG", "link": "https://stackoverflow.com/users/11399212/officialcrugg"}, "edited": false, "score": 0, "creation_date": 1563972702, "post_id": 57182911, "comment_id": 100877477, "body": "So I have tried putting the file in there, but a) it gives me an error when I only do &quot;declare&quot; (can not find name &quot;declare&quot;) and when I use &quot;declare module&quot; there is no error within the file, but in my App.tsx it still tells me the exact same error."}, {"owner": {"reputation": 1033, "user_id": 5261390, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ee60e0a2a2331094c351d33209ead4bc?s=128&d=identicon&r=PG", "display_name": "Ovidiu G", "link": "https://stackoverflow.com/users/5261390/ovidiu-g"}, "reply_to_user": {"reputation": 41, "user_id": 11399212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Dwlj.png?s=128&g=1", "display_name": "OfficialCRUGG", "link": "https://stackoverflow.com/users/11399212/officialcrugg"}, "edited": false, "score": 0, "creation_date": 1563972866, "post_id": 57182911, "comment_id": 100877554, "body": "Yes, it was actually declare module. I edited my response. Try to open and close the editor. I had some issues with vscode not detecting the declaration but after I restarted the editor, it worked."}], "tags": [], "owner": {"reputation": 1033, "user_id": 5261390, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ee60e0a2a2331094c351d33209ead4bc?s=128&d=identicon&r=PG", "display_name": "Ovidiu G", "link": "https://stackoverflow.com/users/5261390/ovidiu-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1563972772, "last_edit_date": 1563972772, "creation_date": 1563971153, "answer_id": 57182911, "question_id": 57182552, "link": "https://stackoverflow.com/questions/57182552/problems-with-dependencies-after-switching-to-typescript/57182911#57182911", "title": "Problems with Dependencies after switching to TypeScript", "body": "<p>1) You can make a <code>types</code> folder where you will keep all the declarations that you can't find under @types. Basically you make a <code>some-react-component.d.ts</code> file where you declare:</p>\n\n<pre><code>declare module \"some-react-component\";\n</code></pre>\n\n<p>2) You can try to import react this way: <code>import * as React from \"react\";</code> and see if that's fixing it.</p>\n"}], "owner": {"reputation": 41, "user_id": 11399212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Dwlj.png?s=128&g=1", "display_name": "OfficialCRUGG", "link": "https://stackoverflow.com/users/11399212/officialcrugg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563972772, "creation_date": 1563970005, "question_id": 57182552, "link": "https://stackoverflow.com/questions/57182552/problems-with-dependencies-after-switching-to-typescript", "title": "Problems with Dependencies after switching to TypeScript", "body": "<p>I have just switched one of my React Projects over to TypeScript, which is actually my first time using it. So I renamed my App.jsx file to App.tsx and got some errors with my dependencies. Most of them I could fix by using <code>npm i @types/{package}</code>. There are three errors left though:</p>\n\n<p>1) For two of my packages, there is no @types package, as they aren't that popular. It says <em>\"Could not find a declaration file for module [...] [...]/index.js' implicitly has an 'any' type. [...]\"</em> In the rest of the error it says that I should try to install the @types package if it exists, which doesn't. If it doesn't exist, it says something about some declaration file, but I wasn't able to find any information about that online.</p>\n\n<p>2) It almost says the exact same thing for the 'react' package, even though I installed the @types package of it. Instead of telling me to install the package it says: <em>\"If the 'react' package actually exposes this module, consider sending a pull request to amend '<a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react\" rel=\"nofollow noreferrer\">https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react</a>'\"</em> which I don't understand what it is supossed to mean.</p>\n\n<p>Also, I copied the tsconfig.json from the create-react-app typescript template (<code>create-react-app {name} --typescript</code></p>\n"}, {"tags": ["typescript", "extension-methods"], "comments": [{"owner": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 0, "creation_date": 1563970697, "post_id": 57182508, "comment_id": 100876209, "body": "JavaScript (and TypeScript) doesn&#39;t have extension methods - what you&#39;re probably talking about here is modifying the prototype of Object which is normally something to avoid. The standard ways you would do this in JavaScript are still valid here such as a statement like <code>book &amp;&amp; book.title</code> or alternatively you could use <code>filter()</code> rather than find and this will simply end up with an empty array so your <code>map</code> to retrieve the title won&#39;t encounter an undefined."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1563981067, "post_id": 57182508, "comment_id": 100882544, "body": "<code>undefined.method()</code> will always blow up at runtime, so your only chance here is to prevent <code>undefined</code> from showing up in the first place.  If you&#39;re going to override anything it should be a replacement for <code>Array.prototype.find()</code> that returns <code>Optional&lt;T&gt;</code>.  I would suggest subclassing <code>Array</code> and not adding into <code>Array</code> if you&#39;re doing that.    So instead of <code>const books: Book[] = ...</code> you have <code>const books: MyArray&lt;Book&gt; = ...</code> and you call <code>books.findOptional(book =&gt; ...).map...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11829949, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzVQc1UMJXA/AAAAAAAAAAI/AAAAAAAAAHI/EY6_eJFTjyw/photo.jpg?sz=128", "display_name": "In Dev", "link": "https://stackoverflow.com/users/11829949/in-dev"}, "edited": false, "score": 0, "creation_date": 1563976100, "post_id": 57182840, "comment_id": 100879427, "body": "No, I&#39;m not. <code>Optional&lt;T&gt;</code> has method <code>map</code> that changes the item if it&#39;s not null. Then i wanted to log that to console. &quot;It doesn&#39;t make sense to use T | null in a chain.&quot; Yes, but in JavaScript i think its impossible to invoke any method if <code>this</code> equals to <code>null</code>."}], "tags": [], "owner": {"reputation": 3684, "user_id": 2186639, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cdc7804e9b5848a50abf9977969ab705?s=128&d=identicon&r=PG", "display_name": "Do\u011fancan Arabac\u0131", "link": "https://stackoverflow.com/users/2186639/do%c4%9fancan-arabac%c4%b1"}, "is_accepted": false, "score": -1, "last_activity_date": 1563970960, "creation_date": 1563970960, "answer_id": 57182840, "question_id": 57182508, "link": "https://stackoverflow.com/questions/57182508/typescript-is-it-possible-to-add-extension-method-to-type-union-such-as-t-nul/57182840#57182840", "title": "Typescript: Is it possible to add extension method to type union such as T | null | undefined?", "body": "<p>Typescript is actually saving your implementation, which might result in a null pointer exception. It doesn't make sense to use T | null in a chain.</p>\n\n<p>And I think you are mistaken .filter with .find? Since you treat result of find as an array?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const books = [\r\n  { title: 'This is a title', authors: [1] }, \r\n  { title: 'This is another title', authors: [1,2]}\r\n]\r\n\r\nbooks\r\n  .filter(book =&gt; Boolean(book.title) &amp;&amp; book.authors.length &gt; 1)\r\n  .map(book =&gt; book.title)\r\n  .forEach(console.log)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Even if you'd like to add an extension to an already existing method, the implementation will remain same. You can pass compile time but in runtime you might end up with null pointer exception. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11829949, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzVQc1UMJXA/AAAAAAAAAAI/AAAAAAAAAHI/EY6_eJFTjyw/photo.jpg?sz=128", "display_name": "In Dev", "link": "https://stackoverflow.com/users/11829949/in-dev"}, "edited": false, "score": 0, "creation_date": 1564027665, "post_id": 57188133, "comment_id": 100897025, "body": "That&#39;s so sad. I think the most elegant solution is to add the brand new extension method for <code>Array&lt;T&gt;</code> interface like <code>findOptional(predicate: T =&gt; boolean): Optional&lt;T&gt;;</code>. I wont close this thread, because I hope someone will find better solution."}, {"owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "reply_to_user": {"reputation": 11, "user_id": 11829949, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzVQc1UMJXA/AAAAAAAAAAI/AAAAAAAAAHI/EY6_eJFTjyw/photo.jpg?sz=128", "display_name": "In Dev", "link": "https://stackoverflow.com/users/11829949/in-dev"}, "edited": false, "score": 0, "creation_date": 1564050804, "post_id": 57188133, "comment_id": 100907766, "body": "You can do that in a derived class as well - just rename the <code>find()</code> method in <code>MyArray</code> to <code>findOptional()</code>. I&#39;d advise against extending the native <code>Array</code> directly (as in <code>Array.prototype.findOptional = ...</code>). This <i>could</i> introduce hard to debug bugs in your application (imagine you add this method and a library does the same but with another signature - or the same signature but different results)."}], "tags": [], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "is_accepted": false, "score": 0, "last_activity_date": 1563988471, "creation_date": 1563988471, "answer_id": 57188133, "question_id": 57182508, "link": "https://stackoverflow.com/questions/57182508/typescript-is-it-possible-to-add-extension-method-to-type-union-such-as-t-nul/57188133#57188133", "title": "Typescript: Is it possible to add extension method to type union such as T | null | undefined?", "body": "<p>This is not possible natively. The only workaround I can think of (apart from wrapping your whole chain) is overwriting the <code>find</code> method to return an <code>Optional&lt;T&gt;</code> instead of <code>T | null</code>. I'd really not recommend to do that though, since you'd change the implementation for  the whole page. So if libraries depend on <code>find</code> returning <code>T | null</code> and not an <code>Optional&lt;T&gt;</code>, it will give you problems.</p>\n\n<p>You could create your own implementation of <code>Array</code> to mitigate that problem, but gives you a slight overhead of transforming existing Arrays to your implementation.</p>\n\n<pre><code>class MyArray&lt;T&gt; extends Array {\n  public find(cb:any):Optional&lt;T&gt; {\n    return Optional.ofNullable(super.find(cb));\n  }\n}\n\ninterface Book { title: string, authors: Author[] }\nconst books: MyArray&lt;Book&gt; = new MyArray(); // Create clean instance\n\nconst booksNormal: Book[] = [/* Some Values */];\nconst books2: MyArray&lt;Book&gt; = new MyArray(...booksNormal); // Transform existing, \"normal\" array\n\nbooks.\n    // some operations\n    .find(item =&gt; item)\n    .map(book =&gt; book.title)\n    .ifPresent(console.log);\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2958, "user_id": 4174789, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_tvwxU53qjY/AAAAAAAAAAI/AAAAAAAAALk/QEVRxbOFmIE/photo.jpg?sz=128", "display_name": "Bart Hofland", "link": "https://stackoverflow.com/users/4174789/bart-hofland"}, "is_accepted": false, "score": 0, "last_activity_date": 1565957285, "last_edit_date": 1592644375, "creation_date": 1565957285, "answer_id": 57524401, "question_id": 57182508, "link": "https://stackoverflow.com/questions/57182508/typescript-is-it-possible-to-add-extension-method-to-type-union-such-as-t-nul/57524401#57524401", "title": "Typescript: Is it possible to add extension method to type union such as T | null | undefined?", "body": "<p>Interesting question. I would like to share my initial thoughts about declaring and using extension methods on union types here:</p>\n<blockquote>\n<p>When you use a union type like <code>string | number</code>, you will be able to use only the interface that is shared by all the types in the union. If you want to use an extension method for such a union type, I guess you will have to implement your extension method (with compatible signatures) on all those types separately. In this case an extension method on the <code>String</code> interface and also an extension method on the <code>Number</code> interface. This way you can also implement separate logic that applies to those specific types. The correct extension method will be called automatically.</p>\n<p>When not all types in your union implement the extension method, like <code>string | null | undefined</code>, you will have to include proper type guards in your code to make sure that you are not calling (extension) methods on types that do not implement it. Otherwise you will get a compilation error. That would just be default TypeScript behavior, as I see it; no difference between extension methods and native methods.</p>\n<p>When you want to call (extension) methods on generic types like <code>&lt;T&gt;</code>, you have to make sure that those generic types will inherit from types that implement those (extension) methods. This would also be default TypeScript behavior; no difference here between extension methods and native methods as well.</p>\n</blockquote>\n<p>Having said that, I want to remark that there is a very vivid discussion about the use of extension methods. They can potentially conflict with existing or future (native) implementations, so be very careful with them.</p>\n<p>Now, let's look at your issue and the examples you provided.</p>\n<p>Hmmm. For a solution to your example code, it seems that you do not need custom extension methods at all, I think. If you just want to show the titles of all the books that have more than one author, you could use this code instead:</p>\n<pre class=\"lang-ts prettyprint-override\"><code>books\n  .filter(book =&gt; book.title &amp;&amp; book.authors.length &gt; 1)\n  .forEach(book =&gt; console.log(book.title));\n</code></pre>\n<p>(Note that the <code>Array</code>'s <code>filter</code> method returns an array containing all the elements that satisfy the provided testing function, but the <code>find</code> method only returns the first element in the array that satisfies the provided testing function.)</p>\n<p>If this simple solution does not fit your actual scenarios in production (perhaps because your example was greatly simplified) and you still want to use a clean fluent interface as much as possible, you might want to consider the following:</p>\n<ul>\n<li><p>Create (extension) methods that always return valid object instances themselves (never <code>null</code> or <code>undefined</code>) and fall back to some predefined default instance when necessary. You could use an additional parameter in your (extension) methods that take the default instance you want to return instead of <code>null</code> or <code>undefined</code>.</p>\n</li>\n<li><p>Put intermediate results that can possibly be <code>null</code> or <code>undefined</code> (for example the result of the <code>find</code> call) in a temporary variable. Continue your fluent coding on that variable if its value is valid. That should avoid your dreaded wrapping in parentheses:</p>\n</li>\n</ul>\n<pre class=\"lang-ts prettyprint-override\"><code> // Instead of this:\n\nbooks\n    .find(...)\n    .authors.forEach(author =&gt; console.log(author));\n\n// you could write:\n\nconst book = books\n    .find(...);\n\nbook &amp;&amp; book\n    .authors.forEach(author =&gt; console.log(author));\n</code></pre>\n<p>Happy coding. :)</p>\n"}], "owner": {"reputation": 11, "user_id": 11829949, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzVQc1UMJXA/AAAAAAAAAAI/AAAAAAAAAHI/EY6_eJFTjyw/photo.jpg?sz=128", "display_name": "In Dev", "link": "https://stackoverflow.com/users/11829949/in-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1565957285, "creation_date": 1563969889, "question_id": 57182508, "link": "https://stackoverflow.com/questions/57182508/typescript-is-it-possible-to-add-extension-method-to-type-union-such-as-t-nul", "title": "Typescript: Is it possible to add extension method to type union such as T | null | undefined?", "body": "<p>I'm learning typescript language features and recently i have figured out how to write extension methods for built-in classes (Array, String, Object, etc) and external modules. However, I still can't understand if it's possible to extend types, like type unions, intersections and other stuff.</p>\n\n<p>For example, sometimes I get variables typed as <code>T | null</code> after calling some methods:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface Book { title: string, authors: Author[] }\nconst books: Book[] = ...\nbooks.\n    // some operations\n    .find(item =&gt; item)\n    // right here i want to call method\n</code></pre>\n\n<p>The <code>Array.prototype.find</code> method returns <code>T | null</code> and i want to convert it to <a href=\"https://github.com/bromne/typescript-optional\" rel=\"nofollow noreferrer\"><code>Optional&lt;T&gt;</code></a> on fly, but it's impossible. Of course, I can just wrap the entire methods chain into <code>Optional.ofNullable(/* huge code fragment here */)</code>. That looks so ugly.</p>\n\n<p>What I've done so far is trying to add extension method to <code>Object</code> interface and restrict <code>this</code> with type annotation.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>declare global {\n    interface Object {\n        toOptional&lt;T&gt;(this: T | null): Optional&lt;T&gt;;\n    }\n}\n\n// Implementation of the method above\n\nbooks\n    .find(book =&gt; Boolean(book.title) &amp;&amp; book.authors.length &gt; 1)\n    .toOptional()\n    .map(book =&gt; book.title)\n    .ifPresent(console.log);\n</code></pre>\n\n<p>It doesn't work. I expect this code to log any title that has more than one author, but it won't even compile. To be honest, Typescript does not allow to engage <em>any</em> method on type unions like these. Result: <code>Object is possibly null</code>.</p>\n"}, {"tags": ["javascript", "typescript", "strongloop", "loopback", "loopback4"], "answers": [{"comments": [{"owner": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "edited": false, "score": 0, "creation_date": 1563973419, "post_id": 57183489, "comment_id": 100877888, "body": "I am now even more confused. I don&#39;t understand why sending an email has to be so complex. Thanks though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4277682"}, "reply_to_user": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "edited": false, "score": 0, "creation_date": 1563977618, "post_id": 57183489, "comment_id": 100880432, "body": "It seems to be complex because of the implementation as a service. You could use it just as listed in the link below, but you would have to implement this for every part of your application where you want to send mails. By implementing it as a service you are able to use it in an easier way at multiple parts of your application. Link: <a href=\"https://nodemailer.com/about/\" rel=\"nofollow noreferrer\">nodemailer.com/about</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4277682"}, "is_accepted": false, "score": 0, "last_activity_date": 1563972941, "creation_date": 1563972941, "answer_id": 57183489, "question_id": 57182231, "link": "https://stackoverflow.com/questions/57182231/send-email-with-loopback-4/57183489#57183489", "title": "Send email with Loopback 4", "body": "<p>You should have a file where your <a href=\"https://loopback.io/doc/en/lb4/Binding.html\" rel=\"nofollow noreferrer\">Bindings</a> are stored. There you have to create the binding key:</p>\n\n<pre><code>export namespace MailerBindings {\n  export const SERVICE = BindingKey.create&lt;MailerService&gt;('mailer.services');\n}\n</code></pre>\n\n<p>To actually bind the service, you have to call the bind function in the constructor of your application:</p>\n\n<pre><code>this.bind(MailerBindings.SERVICE).toClass(MailerService);\n</code></pre>\n\n<p>Now you are able to inject the service using your binding:</p>\n\n<pre><code>@inject(MailerBindings.SERVICE) public mailerService: MailerService,\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 3497155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b516d57239e485a43237d1ed41f4cf73?s=128&d=identicon&r=PG", "display_name": "Lavika", "link": "https://stackoverflow.com/users/3497155/lavika"}, "edited": false, "score": 0, "creation_date": 1576487635, "post_id": 57188371, "comment_id": 104901960, "body": "Any documentation for Loopback 4?"}], "tags": [], "owner": {"reputation": 136, "user_id": 7435861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d8fb0092e44987efed05b1513e35d8c?s=128&d=identicon&r=PG&f=1", "display_name": "diego92sigma6", "link": "https://stackoverflow.com/users/7435861/diego92sigma6"}, "is_accepted": false, "score": 0, "last_activity_date": 1563989447, "creation_date": 1563989447, "answer_id": 57188371, "question_id": 57182231, "link": "https://stackoverflow.com/questions/57182231/send-email-with-loopback-4/57188371#57188371", "title": "Send email with Loopback 4", "body": "<p>There is a tutorial for this on <a href=\"https://loopback.io/doc/en/lb3/Email-connector.html\" rel=\"nofollow noreferrer\">https://loopback.io/doc/en/lb3/Email-connector.html</a>. It has a special mail connector that can be used as a datasource. A model should be able to handle the sending details. The procedure should be pretty much the same as when you are creating a db connector using lb4 cli.</p>\n\n<p>cli    </p>\n\n<pre><code>lb4 datasource //select email\n</code></pre>\n\n<p>datasources.json</p>\n\n<pre><code>{\n  ...\n  \"myEmailDataSource\": {\n    \"connector\": \"mail\",\n    \"transports\": [{\n      \"type\": \"smtp\",\n      \"host\": \"smtp.private.com\",\n      \"secure\": false,\n      \"port\": 587,\n      \"tls\": {\n        \"rejectUnauthorized\": false\n      },\n      \"auth\": {\n        \"user\": \"me@private.com\",\n        \"pass\": \"password\"\n      }\n    }]\n  }\n  ...\n}\n</code></pre>\n\n<p>model</p>\n\n<pre><code>module.exports = function(MyModel) {\n  // send an email\n  MyModel.sendEmail = function(cb) {\n    MyModel.app.models.Email.send({\n      to: 'foo@bar.com',\n      from: 'you@gmail.com',\n      subject: 'my subject',\n      text: 'my text',\n      html: 'my &lt;em&gt;html&lt;/em&gt;'\n    }, function(err, mail) {\n      console.log('email sent!');\n     cb(err);\n    });\n  }\n};`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "edited": false, "score": 0, "creation_date": 1564560754, "post_id": 57194329, "comment_id": 101067160, "body": "late response, sorry. Could you show me how to bind your service to the application? That is the last thing I am having trouble with."}, {"owner": {"reputation": 1775, "user_id": 4575211, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jdzik.jpg?s=128&g=1", "display_name": "Manish Balodia", "link": "https://stackoverflow.com/users/4575211/manish-balodia"}, "reply_to_user": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "edited": false, "score": 0, "creation_date": 1564574090, "post_id": 57194329, "comment_id": 101074817, "body": "@Peterrosevelt I have update my answer to show &quot;how to bind Email service in my user controller file?&quot;"}], "tags": [], "owner": {"reputation": 1775, "user_id": 4575211, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jdzik.jpg?s=128&g=1", "display_name": "Manish Balodia", "link": "https://stackoverflow.com/users/4575211/manish-balodia"}, "is_accepted": true, "score": 2, "last_activity_date": 1564574017, "last_edit_date": 1564574017, "creation_date": 1564028849, "answer_id": 57194329, "question_id": 57182231, "link": "https://stackoverflow.com/questions/57182231/send-email-with-loopback-4/57194329#57194329", "title": "Send email with Loopback 4", "body": "<p><strong>email.service.ts</strong></p>\n\n<pre><code>import Utils from '../utils';\nimport * as nodemailer from 'nodemailer';\nimport { IEmail } from '../type-schema';\n\nexport interface EmailManager&lt;T = Object&gt; {\n  sendMail(mailObj: IEmail): Promise&lt;T&gt;;\n}\n\nexport class EmailService {\n  constructor() { }\n\n  async sendMail(mailObj: IEmail): Promise&lt;object&gt; {\n    const configOption = Utils.getSiteOptions();\n\n    let transporter = nodemailer.createTransport(configOption.email);\n\n    return await transporter.sendMail(mailObj);\n  }\n}\n</code></pre>\n\n<p>define your smtp option in your config file like following:-</p>\n\n<pre><code>\"email\": {\n    \"type\": \"smtp\",\n    \"host\": \"smtp.gmail.com\",\n    \"secure\": true,\n    \"port\": 465,\n    \"tls\": {\n      \"rejectUnauthorized\": false\n    },\n    \"auth\": {\n      \"user\": \"example@gmail.com\",\n      \"pass\": \"sample-password\"\n    }\n  }\n</code></pre>\n\n<p>in controller send mail like following way:-</p>\n\n<pre><code>import { EmailManager } from '../services/email.service';\nimport { EmailManagerBindings } from '../keys';\n\n// inject in constructor\n@inject(EmailManagerBindings.SEND_MAIL) public emailManager: EmailManager,\n\n// call service method like following way\nconst mailOptions = {\n          from: configOption.fromMail,\n          to: getUser.email,\n          subject: template.subject,\n          html: Utils.filterEmailContent(template.message, msgOpt)\n        };\n\n        await this.emailManager.sendMail(mailOptions).then(function (res: any) {\n          return { message: `Successfully sent reset mail to ${getUser.email}` };\n        }).catch(function (err: any) {\n          throw new HttpErrors.UnprocessableEntity(`Error in sending E-mail to ${getUser.email}`);\n        });\n</code></pre>\n\n<p><strong>Simple Way:-</strong>\nIf you don't want to make a service function just import nodemailer in your controller and send mail, but its not a good approach.</p>\n\n<pre><code>import * as nodemailer from 'nodemailer';\n\nlet transporter = nodemailer.createTransport({\n    \"type\": \"smtp\",\n    \"host\": \"smtp.gmail.com\",\n    \"secure\": true,\n    \"port\": 465,\n    \"tls\": {\n      \"rejectUnauthorized\": false\n    },\n    \"auth\": {\n      \"user\": \"example@gmail.com\",\n      \"pass\": \"sample-password\"\n    }\n  });\n\n return await transporter.sendMail({\n          from: \"sender-email\",\n          to: \"receiver-email\",\n          subject: \"email-subject\",\n          html: \"message body\"\n        });\n</code></pre>\n\n<p><strong>Update:-</strong></p>\n\n<p><strong>keys.ts</strong></p>\n\n<pre><code>import { BindingKey } from '@loopback/context';    \nimport { EmailManager } from './services/email.service';    \nimport { Member } from './models';\nimport { Credentials } from './type-schema';\n\nexport namespace PasswordHasherBindings {\n  export const PASSWORD_HASHER = BindingKey.create&lt;PasswordHasher&gt;('services.hasher');\n  export const ROUNDS = BindingKey.create&lt;number&gt;('services.hasher.round');\n}\n\nexport namespace UserServiceBindings {\n  export const USER_SERVICE = BindingKey.create&lt;UserService&lt;Member, Credentials&gt;&gt;('services.user.service');\n}\n\nexport namespace TokenManagerBindings {\n  export const TOKEN_HANDLER = BindingKey.create&lt;TokenManager&gt;('services.token.handler');\n}\n\nexport namespace EmailManagerBindings {\n  export const SEND_MAIL = BindingKey.create&lt;EmailManager&gt;('services.email.send');\n}\n</code></pre>\n\n<p><strong>aplication.ts</strong></p>\n\n<pre><code>import { BootMixin } from '@loopback/boot';\nimport { ApplicationConfig } from '@loopback/core';\nimport { RepositoryMixin } from '@loopback/repository';\nimport { RestApplication } from '@loopback/rest';\nimport { ServiceMixin } from '@loopback/service-proxy';\nimport * as path from 'path';\nimport { MySequence } from './sequence';\n\nimport { TokenServiceBindings, UserServiceBindings, TokenServiceConstants, } from './keys';\nimport { JWTService, TokenGenerator } from './services/jwt-service';\nimport { EmailService } from './services/email.service';\nimport { MyUserService } from './services/user-service';\nimport { AuthenticationComponent, registerAuthenticationStrategy, } from '@loopback/authentication';\nimport { PasswordHasherBindings, TokenManagerBindings, EmailManagerBindings } from './keys';\nimport { BcryptHasher } from './services/hash.password.bcryptjs';\nimport { JWTAuthenticationStrategy } from './authentication-strategies/jwt-strategy';\n\nexport class AmpleServerApplication extends BootMixin(ServiceMixin(RepositoryMixin(RestApplication))) {\n  constructor(options: ApplicationConfig = {}) {\n    super(options);\n\n    this.setUpBindings();\n\n    // Bind authentication component related elements\n    this.component(AuthenticationComponent);\n\n    registerAuthenticationStrategy(this, JWTAuthenticationStrategy);\n\n    // Set up the custom sequence\n    this.sequence(MySequence);\n\n    // Set up default home page\n    this.static('/', path.join(__dirname, '../public'));\n\n    this.projectRoot = __dirname;\n\n    this.bootOptions = {\n      controllers: {\n        dirs: ['controllers'],\n        extensions: ['.controller.js'],\n        nested: true,\n      },\n    };\n  }\n\n  setUpBindings(): void {\n    this.bind(TokenServiceBindings.TOKEN_SECRET).to(TokenServiceConstants.TOKEN_SECRET_VALUE);\n    this.bind(TokenServiceBindings.TOKEN_EXPIRES_IN).to(TokenServiceConstants.TOKEN_EXPIRES_IN_VALUE);\n\n    this.bind(UserServiceBindings.USER_SERVICE).toClass(MyUserService);\n\n    this.bind(EmailManagerBindings.SEND_MAIL).toClass(EmailService);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 536, "user_id": 6049829, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a260785d4c7672e2a417654a2674faa7?s=128&d=identicon&r=PG&f=1", "display_name": "Peter rosevelt", "link": "https://stackoverflow.com/users/6049829/peter-rosevelt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1745, "favorite_count": 1, "accepted_answer_id": 57194329, "answer_count": 3, "score": 2, "last_activity_date": 1591805641, "creation_date": 1563969023, "last_edit_date": 1564660957, "question_id": 57182231, "link": "https://stackoverflow.com/questions/57182231/send-email-with-loopback-4", "title": "Send email with Loopback 4", "body": "<p>i am kinda new to Loopback and Typescript so I have no idea how to implement this. I am trying to call Nodemailer directly, but so far I keep getting an error. </p>\n\n<p>My Mailer service: </p>\n\n<pre><code>import { SentMessageInfo } from 'nodemailer';\nimport Mail = require('nodemailer/lib/mailer');\nconst nodemailer = require(\"nodemailer\");\n\nexport class MailerService {\n  async sendMail(mailOptions: Mail.Options): Promise&lt;SentMessageInfo&gt; {\n    const transporter = nodemailer.createTransport({\n      host: 'smtp.ethereal.email',\n      port: 587,\n      auth: {\n        user: 'albert.grimes@ethereal.email',\n        pass: 'qN85JT6SneBA9S5dhy'\n      }\n    });\n    return await transporter.sendMail(mailOptions);\n  }\n}\n</code></pre>\n\n<p>My Mailer controller: </p>\n\n<pre><code>import { Request, RestBindings, get, ResponseObject } from \n\n'@loopback/rest';\nimport { inject } from '@loopback/context';\nimport { MailerService } from \"../services\";\n\nexport class MailController {\n  constructor(\n    @inject ???\n    public mailerService: MailerService\n  ) { }\n\n  @get('/mail/acceptation')\n  async sendEmail(email: string): Promise&lt;any&gt; {\n    let info = await this.mailerService.sendMail({\n      to: `${email}`,\n      subject: 'testmail',\n      html: '&lt;p&gt;Hallo&lt;/p&gt;'\n    })\n    return info;\n  }\n}\n</code></pre>\n\n<p>I keep getting this as a error: </p>\n\n<blockquote>\n  <p>Unhandled error in GET /mail/acceptation: 500 Error: Cannot resolve injected arguments for MailController.prototype.sendEmail[0]: The arguments[0] is not decorated for dependency injection, but a value is not supplied</p>\n</blockquote>\n\n<p>So what I am gathering from this is that I should inject a value in my controller, but I have no idea what. </p>\n"}, {"tags": ["javascript", "typescript", "angular6"], "answers": [{"tags": [], "owner": {"reputation": 240, "user_id": 8557136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9ae2974fba531b03c779064c095c17?s=128&d=identicon&r=PG&f=1", "display_name": "ajaykumar mp", "link": "https://stackoverflow.com/users/8557136/ajaykumar-mp"}, "is_accepted": false, "score": 0, "last_activity_date": 1564014412, "last_edit_date": 1564014412, "creation_date": 1563968447, "answer_id": 57182082, "question_id": 57181979, "link": "https://stackoverflow.com/questions/57181979/i-want-to-hide-div-after-clicking-on-close-button-angular-6/57182082#57182082", "title": "I want to hide div after clicking on close button Angular 6", "body": "<p>Your approach is wrong in angular. Try avoiding document.xxx use angular.xxx.\nPlease find the below code</p>\n\n<p>In component.html</p>\n\n<pre><code>&lt;div id=\"custom-div\"&gt;\n&lt;button class=\"close\" type=\"button\" (click)=\"featureHide()\"&gt;X&lt;/button&gt;\n&lt;/div&gt;\n&lt;div *ngIf=\"hideFalg\" id=\"another-div\" class=\"col-sm-7\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>In my component.ts\n    hideFalg:Boolean  = true</p>\n\n<pre><code>featureHide()\n{\n  this.hideFalg = false; // this code will hide the div element since we have added the *ngIf\n}\n</code></pre>\n\n<p>To display div</p>\n\n<pre><code>showDiv(){\nthis.hideFalg = true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "is_accepted": true, "score": 1, "last_activity_date": 1563970924, "last_edit_date": 1563970924, "creation_date": 1563968738, "answer_id": 57182157, "question_id": 57181979, "link": "https://stackoverflow.com/questions/57181979/i-want-to-hide-div-after-clicking-on-close-button-angular-6/57182157#57182157", "title": "I want to hide div after clicking on close button Angular 6", "body": "<p>I suggest to use Angular <a href=\"https://angular.io/api/common/NgClass\" rel=\"nofollow noreferrer\"><strong><code>[ngClass]</code></strong></a> directive instead:</p>\n\n<p>Here a <a href=\"https://stackblitz.com/edit/angular-vjcfyk?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">stackblitz working example</a> (remember to expand the browser tab to exceed the <code>sm</code> breakpoint)</p>\n\n<pre><code>  //Apply [hidden] to hide the button\n&lt;div id=\"custom-div\" [hidden]=\"!isShow\" &gt;\n  // Use '(click)' instead of 'click' \n  &lt;button class=\"close\" type=\"button\" (click)=\"featureHide()\"&gt;X&lt;/button&gt;\n&lt;/div&gt;\n  //Apply [ngClass] directive\n&lt;div id=\"another-div\" [ngClass]=\"{'col-sm-7': isShow , 'col-sm-12': !isShow }\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>In your ts file:</p>\n\n<pre><code>isShow = true;\n\nfeatureHide() {\n this.isShow= false;\n};\n\n</code></pre>\n\n<p>It can also be done the way you tried, but change <code>click</code> to <code>(click)</code> first, then in your ts:</p>\n\n<pre><code>featureHide() {\n  document.getElementById('custom-div').style.display = 'none';\n  const element = document.getElementById(\"another-div\");\n  element.classList.remove(\"col-sm-7\");\n  element.classList.add(\"col-sm-12\");\n}  \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9816310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c4d112bce667bb93cfdc2a80feca7b?s=128&d=identicon&r=PG&f=1", "display_name": "kpjack", "link": "https://stackoverflow.com/users/9816310/kpjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1808, "favorite_count": 0, "accepted_answer_id": 57182157, "answer_count": 2, "score": 0, "last_activity_date": 1564014412, "creation_date": 1563968120, "last_edit_date": 1563976979, "question_id": 57181979, "link": "https://stackoverflow.com/questions/57181979/i-want-to-hide-div-after-clicking-on-close-button-angular-6", "title": "I want to hide div after clicking on close button Angular 6", "body": "<p>I want to hide div after clicking on close button in Angular 6 and other want to change the other div class.</p>\n\n<p>For example other div class is <code>col-sm-7</code>, once close button clicked it will change to <code>col-sm-12</code>.</p>\n\n<p>In my component.html</p>\n\n<pre><code>&lt;div id=\"custom-div\"&gt;\n &lt;button class=\"close\" type=\"button\" click=\"featureHide()\"&gt;X&lt;/button&gt;\n&lt;/div&gt;\n&lt;div id=\"another-div\" class=\"col-sm-7\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>In my component.ts</p>\n\n<pre><code>featureHide() {\n  document.getElementById('custom-div').style.display='none';\n  var element = document.getElementById(\"another-div\");\n  element.classList.add(\"col-sm-12\");\n}  \n</code></pre>\n\n<p>But its not working, please suggest.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 1721, "user_id": 9907293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae67c5374c6bad59016f9b13c58b8c4?s=128&d=identicon&r=PG&f=1", "display_name": "Buczkowski", "link": "https://stackoverflow.com/users/9907293/buczkowski"}, "edited": false, "score": 5, "creation_date": 1563968620, "post_id": 57181683, "comment_id": 100875082, "body": "there is some info why you should avoid it - <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/event\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/API/Window/event</a>"}], "owner": {"reputation": 193, "user_id": 641544, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ce5a197fbbf749008f783b92f57e0f0c?s=128&d=identicon&r=PG", "display_name": "Shahar Shmaram", "link": "https://stackoverflow.com/users/641544/shahar-shmaram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1996, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1563967124, "creation_date": 1563967124, "question_id": 57181683, "link": "https://stackoverflow.com/questions/57181683/event-deprecated-in-typescript-3-5-3", "title": "event deprecated in typescript 3.5.3", "body": "<p>In Typescript version 3.5.3 I found that event is now marked as deprecated. \nthis can be found in file lib.dom.d.ts.\nI didn't found any reference in JS documents that this is indeed deprecated. </p>\n\n<p>Can anyone please explain this ? </p>\n\n<pre><code>/** @deprecated */\ndeclare var event: Event | undefined;\n</code></pre>\n"}, {"tags": ["javascript", "css", "twitter-bootstrap", "typescript"], "comments": [{"owner": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1563967211, "post_id": 57181667, "comment_id": 100874280, "body": "This makes very little sense to begin with \u2026 you are adding a new additional click handler to all those elements every time changeClass is called."}, {"owner": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1563967281, "post_id": 57181667, "comment_id": 100874310, "body": "If you are using that kind of old-school event handler binding via HTML attributes, <code>onclick=&quot;changeClass()&quot;</code> \u2013 then you might as well pass an identifier or index to the function right there, <code>onclick=&quot;changeClass(0)&quot;</code>, and use that to determine what you need to do."}, {"owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "reply_to_user": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1563967377, "post_id": 57181667, "comment_id": 100874366, "body": "Actually there is a button click from that I need to handle these, but for now I need to change these classes. Can you please show me the right way of doing it?"}, {"owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "reply_to_user": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1563967471, "post_id": 57181667, "comment_id": 100874417, "body": "Child components are dynamically injected using angular, which is why I am unable to pass value inside the event"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "edited": false, "score": 0, "creation_date": 1563973053, "post_id": 57182140, "comment_id": 100877669, "body": "Good work:) I get it but why my return statement is not working when I put it inside the loop"}, {"owner": {"reputation": 6405, "user_id": 4862133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1d18aecd6078b3e1d84e529285f32b3e?s=128&d=identicon&r=PG&f=1", "display_name": "random", "link": "https://stackoverflow.com/users/4862133/random"}, "reply_to_user": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "edited": false, "score": 1, "creation_date": 1563974215, "post_id": 57182140, "comment_id": 100878358, "body": "@Onera - See edit, within the for loop you have call back function and the <code>return</code> statement return value to callback function. In order to return the callback function output to function <code>getIndexOfParent</code> prepend it with <code>return statement</code>. i:e <code>return ((index) =&gt; {</code>"}, {"owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "edited": false, "score": 0, "creation_date": 1563974795, "post_id": 57182140, "comment_id": 100878668, "body": "Can you please explain this, Array.prototype.filter.call(target.parentNode.children, div =&gt; div != target)[0]; I am new to programming and finding it difficult to understand this."}, {"owner": {"reputation": 6405, "user_id": 4862133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1d18aecd6078b3e1d84e529285f32b3e?s=128&d=identicon&r=PG&f=1", "display_name": "random", "link": "https://stackoverflow.com/users/4862133/random"}, "reply_to_user": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "edited": false, "score": 1, "creation_date": 1563975446, "post_id": 57182140, "comment_id": 100879017, "body": "<code>children</code> return <code>HTMLCollection</code>, which is not a regular array and filter work on regular array. So, <code>Array.prototype.filter</code> is used. The main purpose of <code>filter</code> used here is to get the sibling element. The first param in filter is <code>HTMLCollection</code> and second is callback function, which take each element from array as param, the <code>div =&gt; div != target</code> check if the div is not equal to the clicked <code>element</code>, if yes then it return the div else won&#39;t. <code>filter</code> return array, so to get the filtered element used <code>[0]</code>."}, {"owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "edited": false, "score": 0, "creation_date": 1563979695, "post_id": 57182140, "comment_id": 100881756, "body": "Thanks for your support pal:)"}], "tags": [], "owner": {"reputation": 6405, "user_id": 4862133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1d18aecd6078b3e1d84e529285f32b3e?s=128&d=identicon&r=PG&f=1", "display_name": "random", "link": "https://stackoverflow.com/users/4862133/random"}, "is_accepted": true, "score": 1, "last_activity_date": 1563974107, "last_edit_date": 1563974107, "creation_date": 1563968687, "answer_id": 57182140, "question_id": 57181667, "link": "https://stackoverflow.com/questions/57181667/change-classes-only-for-the-child-clicked-within-the-parent-using-javascript/57182140#57182140", "title": "Change classes only for the child clicked within the parent using JavaScript", "body": "<p>You have added <code>onclick</code> within the <code>for loop</code>. Instead add the class to the clicked <code>child div</code> and remove the class from it's sibling div.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>document.querySelectorAll('div.row &gt; div')\r\n  .forEach((div) =&gt; {\r\n    div.addEventListener('click', function({\r\n      target\r\n    }) {\r\n      target.classList.add('d-none', 'd-sm-block');\r\n      const sibDiv = Array.prototype.filter.call(target.parentNode.children, div =&gt; div != target)[0];\r\n      sibDiv.classList.remove('col-6', 'd-none', 'd-sm-block');\r\n    });\r\n  });</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.row {\r\n  background: #f8f9fa;\r\n  margin-top: 20px;\r\n}\r\n\r\n.row&gt;div {\r\n  border: solid 1px black;\r\n  padding: 10px;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"container\"&gt;\r\n  &lt;div class=\"row\"&gt;\r\n    &lt;div class=\"col-md-6 col-6\"&gt;\r\n      child-div-1\r\n    &lt;/div&gt;\r\n    &lt;div class=\"col-md-6 col-6\"&gt;\r\n      child-div-2\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>-- Edit --</p>\n\n<p>The <code>return</code> statement will return the value of <code>index</code> to the <code>callback</code> function, you also need to add return to the callback function, so whatever result the callback function get will return to the function <code>getIndexOfParent</code>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function getIndex() {\r\n    let i = 0;\r\n    ((index) =&gt; {          // No return, logs undefined\r\n        return index;\r\n    })(i);\r\n}\r\nconsole.log(getIndex());</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function getIndex() {\r\n    let i = 0;\r\n    return ((index) =&gt; { // with return\r\n        return index;\r\n    })(i);\r\n}\r\nconsole.log(getIndex());</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1115, "user_id": 9646384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ws8NM.jpg?s=128&g=1", "display_name": "Ahmed Gaafer", "link": "https://stackoverflow.com/users/9646384/ahmed-gaafer"}, "is_accepted": false, "score": 1, "last_activity_date": 1563969964, "creation_date": 1563969964, "answer_id": 57182533, "question_id": 57181667, "link": "https://stackoverflow.com/questions/57181667/change-classes-only-for-the-child-clicked-within-the-parent-using-javascript/57182533#57182533", "title": "Change classes only for the child clicked within the parent using JavaScript", "body": "<p>I made a pen for solving this problem.\n<a href=\"https://codepen.io/Ahmed_Gaafer/pen/qeZMab\" rel=\"nofollow noreferrer\">Check the pen here</a></p>\n\n<p>the solution is easy you simply have to write this line</p>\n\n<p><code>e.stopPropagation();</code></p>\n\n<p>this will stop the event from triggering on parent divs</p>\n\n<p>basically what you are describing is called event bubbling.\nyou can read about it more on <a href=\"https://medium.com/@vsvaibhav2016/event-bubbling-and-event-capturing-in-javascript-6ff38bec30e\" rel=\"nofollow noreferrer\">medium</a></p>\n"}], "owner": {"reputation": 501, "user_id": 6462896, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aea43f3cdff8c9201ae5cfc2c435b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Onera", "link": "https://stackoverflow.com/users/6462896/onera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57182140, "answer_count": 2, "score": 0, "last_activity_date": 1563979732, "creation_date": 1563967065, "last_edit_date": 1563979732, "question_id": 57181667, "link": "https://stackoverflow.com/questions/57181667/change-classes-only-for-the-child-clicked-within-the-parent-using-javascript", "title": "Change classes only for the child clicked within the parent using JavaScript", "body": "<p>I have two div's within a parent div. I need to change the classes for the child div which I clicked. For that I am writing a method to check which child was clicked and respectively I am trying to hide the other child div.\nBut I am not able to add classes or remove classes since the index is showing always as undefined. I am feeling there is some problem with the return statement.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function changeClass() {\r\n\r\n    const list = document.getElementById('my_div').children;\r\n    const indx = this.getIndexOfParent(list);\r\n\r\n      for (let i = 0; i &lt; list.length; i++) {\r\n        if (indx === 0) {\r\n          list[indx + 1].classList.add(\"d-none d-sm-block\");\r\n          list[indx].classList.remove(\"col-6 d-none d-sm-block\");\r\n        } else if (indx === 1) {\r\n          list[indx - 1].classList.add(\"d-none d-sm-block\");\r\n          list[indx].classList.remove(\"col-6 d-none d-sm-block\");\r\n        }\r\n        list[indx].classList.add(\"d-xs-block\");\r\n      }\r\n      \r\n  }\r\n\r\n  function getIndexOfParent(child_list) {\r\n    for (var i = 0, len = child_list.length; i &lt; len; i++) {\r\n      ((index) =&gt; {\r\n        child_list[i].onclick = () =&gt; {\r\n          return index;\r\n        };\r\n      })(i);\r\n    }\r\n}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.row {\r\n  background: #f8f9fa;\r\n  margin-top: 20px;\r\n}\r\n\r\n.row &gt; div {\r\n  border: solid 1px black;\r\n  padding: 10px;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"container\"&gt;\r\n  &lt;div class=\"row\"&gt;\r\n    &lt;div  onclick=\"changeClass()\" class=\"col-md-6 col-6\"&gt;\r\n     child-div-1\r\n    &lt;/div&gt;\r\n    &lt;div  onclick=\"changeClass()\" class=\"col-md-6 col-6\"&gt;\r\n       child-div-2  \r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>All I want is that, when I click on child-div-1 it should hide child-div-2 and vice versa <strong>only for small screens</strong> (which is why I am handling it by col-6 and d-xs-block classes)\nCan anyone help me to solve the below problem.</p>\n"}, {"tags": ["typescript", "axios"], "comments": [{"owner": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 0, "creation_date": 1563966819, "post_id": 57181194, "comment_id": 100874078, "body": "The type system in TypeScript is compile-time only, there&#39;s no representation of it at run-time that you can assert on to determine this. You would need to fall back to a standard JavaScript way of doing it which might be, if you&#39;re using constructor functions for example, to use the <code>name</code> property of the constructor. Other options might be just setting a property yourself with the value or doing some structural comparison of the object to determine its type."}], "answers": [{"tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": true, "score": 1, "last_activity_date": 1563968923, "last_edit_date": 1563968923, "creation_date": 1563968480, "answer_id": 57182087, "question_id": 57181194, "link": "https://stackoverflow.com/questions/57181194/generic-crud-api-client-with-typescript-and-axios/57182087#57182087", "title": "Generic CRUD API client with Typescript and Axios", "body": "<p>I may suggest following solution using function overloading. I don't recomment using generics in this situation as <code>T</code> is limited to either <code>user</code> or <code>post</code>. As TypeScript interface is about shape, with generics <code>T</code> can be virtually anything that extends <code>Persistable</code></p>\n\n<p>I have imagined that users and posts will not be array of strings, but array of objects. <code>type</code> property will create <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions\" rel=\"nofollow noreferrer\">discriminated union</a> and will stay after compilation.</p>\n\n<p>I've added additional argument <code>reqType</code> to <code>getPage</code> function to distinguish between users and posts request. <code>reqType</code> may be either <code>'user'</code> or <code>'post'</code>. Other values will lead to error.</p>\n\n<p>This <code>User['type']</code> is <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#index-types\" rel=\"nofollow noreferrer\">indexed access operator</a>, so if you'll add another type of response in future, reqType will be populated with <code>type</code> value automatically.</p>\n\n<pre><code>type User = { type: 'user', user: string };\ntype Post = { type: 'post', post: string };\n\nexport interface PaginatedResponse&lt;T&gt; {\n    readonly total: number;\n    readonly items: T[];\n}\n\n// This is type guard which will stay in run time\nfunction reqTypeIsUser(a: User['type'] | Post['type']): a is User['type'] {\n    return (a as User['type']) === 'user'\n}\n\nasync function getPage\n    (offset: number, count: number, reqType: User['type']): Promise&lt;PaginatedResponse&lt;User&gt;&gt;\nasync function getPage\n    (offset: number, count: number, reqType: Post['type']): Promise&lt;PaginatedResponse&lt;Post&gt;&gt;\nasync function getPage\n    (offset: number, count: number, reqType: User['type'] | Post['type']): Promise&lt;PaginatedResponse&lt;User | Post&gt;&gt; {\n\n        const response = await axios.get&lt;PaginatedResponse&lt;User | Post&gt;&gt;(\n            'url' + reqTypeIsUser(reqType) ? 'users' : 'posts',\n            {\n                params: { offset, count },\n                transformResponse: [\n                    (data) =&gt; ({\n                        ...data,\n                        items: data[reqType].map((d: string) =&gt; ({ type: reqType, [reqType]: d })),\n                      })\n                    ]\n                  },\n                );\n                return response.data;\n};\n\nlet user = getPage(1, 2, \"user\");  // user will be Promise&lt;PaginatedResponse&lt;User&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3690454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4879201ae1eea7d1876cc00ca5bc8fc4?s=128&d=identicon&r=PG", "display_name": "Kizivat", "link": "https://stackoverflow.com/users/3690454/kizivat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 1, "accepted_answer_id": 57182087, "answer_count": 1, "score": 1, "last_activity_date": 1563968923, "creation_date": 1563965491, "question_id": 57181194, "link": "https://stackoverflow.com/questions/57181194/generic-crud-api-client-with-typescript-and-axios", "title": "Generic CRUD API client with Typescript and Axios", "body": "<p>I'm trying to implement a generic CRUD interface for my API in Typescript using Axios.</p>\n\n<p>Suppose the API exposes endpoints for doing CRUD operations with 2 entities. Say the endpoints are <code>/users</code> and <code>/posts/</code> and both take URL parameters <code>offset</code> and <code>count</code> (for pagination). Example of responses:</p>\n\n<pre><code>GET /users?offset=2&amp;count=2\n\n{\n  \"users\": [\"user1\", \"user2\"],\n  \"total\": 4 // the total number of users that exist\n}\n</code></pre>\n\n<p>and similarly for <code>posts</code> instead the key for the array of posts is `\"posts\".</p>\n\n<p>I tried to create a generic function to get either of users/posts as follows:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const getPage =\n  async &lt;T extends Persistable&gt;(offset: number, count: number): Promise&lt;PaginatedResponse&lt;T&gt;&gt; =&gt; {\n    const response = await axios.get&lt;PaginatedResponse&lt;T&gt;&gt;(\n      `${SOME_URL}/&lt;BLANK&gt;`,\n      {\n        params: { page, size },\n        transformResponse: [\n          (data) =&gt; ({\n            ...data,\n            items: data[&lt;BLANK&gt;],\n          })\n        ]\n      },\n    );\n    return response.data;\n  };\n</code></pre>\n\n<p>Where <code>Persistable</code> interface that both <code>User</code> and <code>Post</code> interfaces inherit from and <code>PaginatedResponse</code> interface looks as follows:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface PaginatedResponse&lt;T&gt; {\n  readonly total: number;\n  readonly items: T[];\n}\n</code></pre>\n\n<p>Basically, I'd need to fill in the <code>&lt;BLANK&gt;</code>s by e.g. somehow getting strings <code>\"users\"</code>/<code>\"posts\"</code> respectively based on the passed type <code>T</code>.</p>\n\n<p>Can anyone think of a way to achieve this, please?</p>\n"}, {"tags": ["angular", "typescript", "cucumber"], "comments": [{"owner": {"reputation": 1853, "user_id": 8099744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789f02ce08565883147629e6065606e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sureshmani", "link": "https://stackoverflow.com/users/8099744/sureshmani"}, "edited": false, "score": 0, "creation_date": 1563986298, "post_id": 57181040, "comment_id": 100885308, "body": "On the config - the cucumberopts syntax is incorrect  - try with cucumberOpts: {     &#39;require&#39;: [&#39;./src/steps/**/*.steps.ts&#39;]   }"}, {"owner": {"reputation": 121, "user_id": 1933690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86b4c5907d44f6fe9f0d8a6c444eac2?s=128&d=identicon&r=PG", "display_name": "sanky", "link": "https://stackoverflow.com/users/1933690/sanky"}, "edited": false, "score": 0, "creation_date": 1571578169, "post_id": 57181040, "comment_id": 103280115, "body": "@iQuain did you find solution for this?"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 1933690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86b4c5907d44f6fe9f0d8a6c444eac2?s=128&d=identicon&r=PG", "display_name": "sanky", "link": "https://stackoverflow.com/users/1933690/sanky"}, "is_accepted": false, "score": 1, "last_activity_date": 1571579691, "creation_date": 1571579691, "answer_id": 58473704, "question_id": 57181040, "link": "https://stackoverflow.com/questions/57181040/unexpected-token-error-from-import-statement-in-cucumber/58473704#58473704", "title": "Unexpected token error from import statement in cucumber", "body": "<p>The compiler is not provided inside protractor.config.js for TS\nadd below callback function to initiate.</p>\n\n<pre><code>onPrepare() {\n        require('ts-node').register({\n          project: require('path').join(__dirname, './tsconfig.json')\n        });\n      }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10549205, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QCY1-IALiY4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDckAnCbEPHR5SCIhXBTaoTtCZEww/mo/photo.jpg?sz=128", "display_name": "iQuain", "link": "https://stackoverflow.com/users/10549205/iquain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571579691, "creation_date": 1563965002, "question_id": 57181040, "link": "https://stackoverflow.com/questions/57181040/unexpected-token-error-from-import-statement-in-cucumber", "title": "Unexpected token error from import statement in cucumber", "body": "<p>I am attempting to create Angular e2e testing using Cucumber and chai.  When I run the tests with 'ng e2e', the E/launcher encounters an error.</p>\n\n<p>I've tried comparing the file to guides/tutorials on the internet but I am new to cucumber and can't seem to find any references to the issue.</p>\n\n<p>protractor.conf.js</p>\n\n<pre><code>// Protractor configuration file, see link for more information\n// https://github.com/angular/protractor/blob/master/lib/config.ts\n\nexports.config = {\n  allScriptsTimeout: 11000,\n  specs: [\n    './src/features/**/*.feature'\n  ],\n  capabilities: {\n    'browserName': 'chrome'\n  },\n  directConnect: true,\n  baseUrl: 'http://localhost:4200/',\n  framework: 'custom',\n  frameworkPath: require.resolve('protractor-cucumber-framework'),\n  cucumberOpts: {\n    require: ['./src/steps/**/*.steps.ts'],\n  }\n};\n</code></pre>\n\n<p>app.feature</p>\n\n<pre><code>Feature: Go to the home\n  Display the title\n\n  Scenario: Home Page\n    Given I am on the home page\n    When I do nothing\n    Then I should see the title\n</code></pre>\n\n<p>app.po.ts</p>\n\n<pre><code>import { browser, by, element } from 'protractor';\n\nexport class AppPage {\n  navigateTo() {\n    return browser.get(browser.baseUrl) as Promise&lt;any&gt;;\n  }\n\n  getTitleText() {\n    return element(by.css('app-root h1')).getText() as Promise&lt;string&gt;;\n  }\n}\n</code></pre>\n\n<p>app.steps.ts</p>\n\n<pre><code>import { Before, Given, Then, When } from 'cucumber';\nimport { expect } from 'chai';\n\nimport { AppPage } from '../app.po';\n\nlet page: AppPage;\n\nBefore(() =&gt; {\n  page = new AppPage();\n});\n\nGiven(/^I am on the home page$/, async () =&gt; {\n  await page.navigateTo();\n});\n\nWhen(/^I do nothing$/, () =&gt; {});\n\nThen(/^I should see the title$/, async () =&gt; {\n  expect(await page.getTitleText()).to.equal('TopicCreationFrontEnd');\n});\n</code></pre>\n\n<p>I was expecting it to run but instead this is the terminal output that I am getting:</p>\n\n<pre><code>[11:07:51] E/launcher - Error: /Users/n0361431/Developments/Workspaces/Angular/topic-creation-front-end/e2e/src/steps/app.steps.ts:1\n(function (exports, require, module, __filename, __dirname) { import { Before, Given, Then, When } from 'cucumber';\n                                                                     ^\n\nSyntaxError: Unexpected token {\n    at new Script (vm.js:79:7)\n    at createScript (vm.js:251:10)\n    at Object.runInThisContext (vm.js:303:10)\n    at Module._compile (internal/modules/cjs/loader.js:657:28)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:700:10)\n    at Module.load (internal/modules/cjs/loader.js:599:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:538:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:530:3)\n    at Module.require (internal/modules/cjs/loader.js:637:17)\n    at require (internal/modules/cjs/helpers.js:22:18)\n    at supportCodePaths.forEach.codePath (/Users/n0361431/Developments/Workspaces/Angular/topic-creation-front-end/node_modules/cucumber/lib/cli/index.js:142:42)\n    at Array.forEach (&lt;anonymous&gt;)\n    at Cli.getSupportCodeLibrary (/Users/n0361431/Developments/Workspaces/Angular/topic-creation-front-end/node_modules/cucumber/lib/cli/index.js:142:22)\n    at /Users/n0361431/Developments/Workspaces/Angular/topic-creation-front-end/node_modules/cucumber/lib/cli/index.js:169:41\n    at Generator.next (&lt;anonymous&gt;)\n    at asyncGeneratorStep (/Users/n0361431/Developments/Workspaces/Angular/topic-creation-front-end/node_modules/cucumber/lib/cli/index.js:44:103)\n[11:07:51] E/launcher - Process exited with error code 100\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "edited": false, "score": 0, "creation_date": 1563965852, "post_id": 57180923, "comment_id": 100873567, "body": "What do you mean by &#39;keep&#39;? If you need them outside of the for loop, why don&#39;t you assign them to some global class variable?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "edited": false, "score": 0, "creation_date": 1563970735, "post_id": 57182037, "comment_id": 100876237, "body": "ok but tu create my combined$, I need a value retrieved by my foreach loop so how can I do it ?"}, {"owner": {"reputation": 1267, "user_id": 1832228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iz8Ka.jpg?s=128&g=1", "display_name": "TPReal", "link": "https://stackoverflow.com/users/1832228/tpreal"}, "reply_to_user": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "edited": false, "score": 0, "creation_date": 1563976841, "post_id": 57182037, "comment_id": 100879930, "body": "Sorry, I did not understand your code properly, hopefully it&#39;s better now, please take a look. One ugly thing you do in your original post is assigning <code>this.listeAffecter</code> in a loop, which is useless as a field and should just be a local constant. It also confused me somewhat. The same with <code>listeOperations</code>, you overwrite it multiple times."}], "tags": [], "owner": {"reputation": 1267, "user_id": 1832228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iz8Ka.jpg?s=128&g=1", "display_name": "TPReal", "link": "https://stackoverflow.com/users/1832228/tpreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1563976768, "last_edit_date": 1563976768, "creation_date": 1563968320, "answer_id": 57182037, "question_id": 57180923, "link": "https://stackoverflow.com/questions/57180923/how-can-i-keep-my-array-values-even-with-an-asynchronous-call/57182037#57182037", "title": "How can I keep my array values even with an asynchronous call?", "body": "<p>If you have subscribe inside a subscribe then you are definitely using RxJS wrong. You should instead construct a pipe that modifies the values passed through it, until you have a single result emitted, containing all the data you need. How about you changed your <code>.subscribe</code> to something more like this:</p>\n\n<pre><code>.pipe(switchMap((data: [Famille, Affecter, Operation][]) =&gt; {\n  return forkJoin(data.map((f,as,o) =&gt; {\n    return forkJoin(as.map(a =&gt; {\n      // Create your combined$ here using zip.\n      return combined$;\n    }));\n  }));\n})).subscribe(vals =&gt; {\n  // Here vals is an array of arrays because of the nested forkJoin.\n  this.points = vals.flat().map(val =&gt; {\n    // Here you transform a value to a point.\n  });\n  this.draw(...);\n});\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563976768, "creation_date": 1563964659, "last_edit_date": 1563965402, "question_id": 57180923, "link": "https://stackoverflow.com/questions/57180923/how-can-i-keep-my-array-values-even-with-an-asynchronous-call", "title": "How can I keep my array values even with an asynchronous call?", "body": "<p>I have a function that draw lines for each category, and in each of this lines, my function has to put some points, each of them representing a member of the category.</p>\n\n<p>For each member of the family, I put them in an array. To put them in the array, I make 3 query (to get all the informations of the member, retrieved in some table of my database with an API), and put the result of those queries in an array by using zip operator from rxjs and pipe them.</p>\n\n<p>How can I keep my array values even when I'm out of the foreach loop ?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>ngOnInit(): void {\n    this.serviceData.currentService.subscribe(service =&gt;\n        this.serviceFam.getAllFamilles().pipe(\n          switchMap(familles =&gt; // switchMap to switch into new observable\n            forkJoin( // forkJoin to run observables in parrallel\n              // map families to observables and run these calls in parallel\n              familles.map(f =&gt; forkJoin(\n                this.serviceAffecter.getAffecterServiceFamille(service, f.nom),\n                this.serviceOpe.getOperationsServiceFamille(service, f.nom)\n                ).pipe( // gather them all up\n                map(([listAffecter, listeOperations]) =&gt; [f, listAffecter, listeOperations])\n                )\n              )\n            )\n          )\n        ).subscribe((data: [Famille, Affecter, Operation][]) =&gt; {\n          //  now that your observables are done, do the rest.\n          this.familles = data.map(d =&gt; d[0]);\n          for (let d of data) {\n            const f = d[0];\n            // why are these overwritten at every loop?\n            this.listeAffecter = d[1];\n            this.listeOperations = d[2];\n\n            //Here is my foreach loop where I put the info of all my members\n\n            for (let a of this.listeAffecter) {\n              var accessoire$ = this.serviceAccessoire.getAccessoireByIdAffaire(a.idAffaire);\n              var variante$ = this.serviceVar.getVarianteByIdAffaire(a.idAffaire);\n              var affaire$ = this.serviceAffaire.getAffaireById(a.idAffaire);\n\n              //Here is where I use zip to put the info in the array\n\n              var combined$ = zip(accessoire$, variante$.pipe(), affaire$.pipe());\n              combined$.subscribe(val =&gt;\n                this.points.push({\n                  \"value\": this.getTAT(a.dateEntree),\n                  \"name\": val[0].nom + \" \" + f.nom +\n                    \" \" + val[1].nom + \" \" + val[2].sn,\n                  \"operateur\": \"PERSONNE\",\n                  \"affaire\": a.id\n                })\n              );\n            }\n\n            //And this is where I want my data to be keeped\n\n            this.element = document.getElementById(f.nom) as HTMLElement;\n            this.element.innerText = \"\";\n            this.draw(\"#\" + f.nom, this.points, {dateDimension: false, color: \"teal\", labelFormat: \"%Y\"});\n            this.points.length = 0;\n            this.operation.length = 0;\n          }\n        }),\n      err =&gt; {\n        console.log(err);\n      });\n\n    this.serviceData.changeAffaire(4);\n  }\n</code></pre>\n\n<p>If anybody has an idea on how to do it, it will be cool.</p>\n"}, {"tags": ["html", "angular", "typescript", "ionic-framework"], "comments": [{"owner": {"reputation": 2155, "user_id": 5909026, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-VWT4S_cML3I/AAAAAAAAAAI/AAAAAAAADdw/OpPjHPOydG4/photo.jpg?sz=128", "display_name": "Najam Us Saqib", "link": "https://stackoverflow.com/users/5909026/najam-us-saqib"}, "edited": false, "score": 0, "creation_date": 1563967524, "post_id": 57180848, "comment_id": 100874444, "body": "check your ViewChild: it should be like <code>@ViewChild(Content) content: Content;</code>"}, {"owner": {"reputation": 34, "user_id": 10952040, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YTru5zo2ki4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca6Vw69uhpk28SjwS0Vo0gCdmhhVw/mo/photo.jpg?sz=128", "display_name": "Christopher Kock", "link": "https://stackoverflow.com/users/10952040/christopher-kock"}, "reply_to_user": {"reputation": 2155, "user_id": 5909026, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-VWT4S_cML3I/AAAAAAAAAAI/AAAAAAAADdw/OpPjHPOydG4/photo.jpg?sz=128", "display_name": "Najam Us Saqib", "link": "https://stackoverflow.com/users/5909026/najam-us-saqib"}, "edited": false, "score": 0, "creation_date": 1563986687, "post_id": 57180848, "comment_id": 100885507, "body": "Thanks for your answer. It still doesnt work unfortunately. However, my bad - I noticed that I have to use IonContent instead else i cant find the method scrollToBottom() so i edited my question if that could be helpful!"}], "owner": {"reputation": 34, "user_id": 10952040, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YTru5zo2ki4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca6Vw69uhpk28SjwS0Vo0gCdmhhVw/mo/photo.jpg?sz=128", "display_name": "Christopher Kock", "link": "https://stackoverflow.com/users/10952040/christopher-kock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563986730, "creation_date": 1563964394, "last_edit_date": 1563986730, "question_id": 57180848, "link": "https://stackoverflow.com/questions/57180848/scroll-to-bottom-not-working-chatwindow-ionic", "title": "scroll to bottom not working chatwindow ionic", "body": "<p>I have a chat page in my app where the chat-div is inside a wrapper-div. The structure looks like this:</p>\n\n<pre><code>&lt;ion-content&gt;\n &lt;div class=\"wrapper&gt;\n &lt;div class=\"chatwindow\"&gt;\n &lt;ion-grid&gt;\n &lt;ion-row *ngFor=\"let message of messages\"&gt;\n &lt;ion-col *ngIf=\"message.fromId !== myUid&gt;\n &lt;div class=\"message other-message&gt;\n &lt;span&gt;{{message.text}}&lt;/span&gt;\n &lt;/div&gt;\n &lt;/ion-col&gt;\n &lt;ion-col *ngIf=\"message.fromId === myUid&gt;\n &lt;div class=\"message my-message&gt;\n &lt;span&gt;{{message.text}}&lt;/span&gt;\n &lt;/div&gt;\n &lt;/ion-col&gt;\n &lt;/ion-row&gt;\n &lt;/ion-grid&gt;\n &lt;/div&gt;\n &lt;/div\n&lt;/ion-content&gt;\n</code></pre>\n\n<p>My problem is that I am not able to make the chatpage scroll to bottom (both at pageload and when new messages arrives).</p>\n\n<p>What I have tried so far:\nTS: file</p>\n\n<pre><code>import {IonContent} from '@ionic/angular';\n\n@ViewChild(\u2018content\u2019) content: IonContent;\n\nngOninit(){\nsetTimeout(()=&gt;{this.content.scrollToBottom();},200);\n}\n</code></pre>\n\n<p>HTML file:</p>\n\n<pre><code>&lt;ion-content #content&gt;\n</code></pre>\n\n<p>Above does not give any effect, i also tried using ngZone and <code>[scrollEvents=\u201ctrue\u201d]</code>.</p>\n\n<p>The only thing that has given some effect is <code>[ScrollTop]=\u201ccontent.scrollheight\u201d</code>. But then the whole chatpage reloades everytime a message arrives and it scroll up and down very fast.</p>\n\n<p>Any help with this will be much appreciated.\nThank you in advance.</p>\n"}, {"tags": ["angular", "typescript", "angular6"], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 9493547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouB3g.jpg?s=128&g=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/9493547/shane"}, "edited": false, "score": 0, "creation_date": 1563967003, "post_id": 57181480, "comment_id": 100874184, "body": "Will this work for errors occurring in the component.html template file also?"}, {"owner": {"reputation": 676, "user_id": 3634274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhODu.jpg?s=128&g=1", "display_name": "JohnnyDevNull", "link": "https://stackoverflow.com/users/3634274/johnnydevnull"}, "edited": false, "score": 0, "creation_date": 1563968615, "post_id": 57181480, "comment_id": 100875080, "body": "No will it not! The only way is to write clean code!"}, {"owner": {"reputation": 487, "user_id": 9493547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouB3g.jpg?s=128&g=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/9493547/shane"}, "edited": false, "score": 0, "creation_date": 1564056152, "post_id": 57181480, "comment_id": 100910585, "body": "Thank you for your response, I am looking for a way to catch issues in production that we may have missed, we already abide by all of these clean coding standards"}], "tags": [], "owner": {"reputation": 269, "user_id": 11770299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0438c7f1ea8a8debb79956cb482aa9e7?s=128&d=identicon&r=PG&f=1", "display_name": "bahadrdsr", "link": "https://stackoverflow.com/users/11770299/bahadrdsr"}, "is_accepted": false, "score": 1, "last_activity_date": 1563969014, "last_edit_date": 1563969014, "creation_date": 1563966422, "answer_id": 57181480, "question_id": 57180491, "link": "https://stackoverflow.com/questions/57180491/how-to-catch-undefined-errors-in-angular-6/57181480#57181480", "title": "How to catch &quot;undefined&quot; errors in Angular 6", "body": "<p>You can use try/catch blocks on your code but it can be tedious to manage in bigger applications. Instead, you can create your own error handling logic by extending the ErrorHandler from @angular/core.</p>\n\n<p>Something like this;</p>\n\n<pre><code>import { ErrorHandler } from '@angular/core';\n\n@Injectable()\nexport class YourErrorHandler implements ErrorHandler {\n\n  handleError(error) {\n    // your custom error handling logic    \n  }\n}\n</code></pre>\n\n<p>Then, add it to your root module like this;</p>\n\n<pre><code>@NgModule({   \n  providers: [{provide: ErrorHandler, useClass: GlobalErrorHandler}]\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 487, "user_id": 9493547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouB3g.jpg?s=128&g=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/9493547/shane"}, "edited": false, "score": 1, "creation_date": 1564056127, "post_id": 57182187, "comment_id": 100910571, "body": "Thank you for your response, I am looking for a way to catch issues in production that we may have missed, we already abide by all of these clean coding standards"}, {"owner": {"reputation": 676, "user_id": 3634274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhODu.jpg?s=128&g=1", "display_name": "JohnnyDevNull", "link": "https://stackoverflow.com/users/3634274/johnnydevnull"}, "reply_to_user": {"reputation": 487, "user_id": 9493547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouB3g.jpg?s=128&g=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/9493547/shane"}, "edited": false, "score": 0, "creation_date": 1564150166, "post_id": 57182187, "comment_id": 100947742, "body": "Some day&#39;s ago i&#39;ve researched in a smiliar direction and maybe one of these topics could help you: <a href=\"https://stackoverflow.com/questions/19846078/how-to-read-from-chromes-console-in-javascript/19846113#19846113\" title=\"how to read from chromes console in javascript\">stackoverflow.com/questions/19846078/&hellip;</a> <a href=\"https://stackoverflow.com/questions/11403107/capturing-javascript-console-log/11403146#11403146\" title=\"capturing javascript console log\">stackoverflow.com/questions/11403107/&hellip;</a>"}], "tags": [], "owner": {"reputation": 676, "user_id": 3634274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhODu.jpg?s=128&g=1", "display_name": "JohnnyDevNull", "link": "https://stackoverflow.com/users/3634274/johnnydevnull"}, "is_accepted": false, "score": 0, "last_activity_date": 1563969198, "last_edit_date": 1563969198, "creation_date": 1563968874, "answer_id": 57182187, "question_id": 57180491, "link": "https://stackoverflow.com/questions/57180491/how-to-catch-undefined-errors-in-angular-6/57182187#57182187", "title": "How to catch &quot;undefined&quot; errors in Angular 6", "body": "<p>There are no general way to catch all <code>undefined</code> at one place.\nThis error just occurs when you write code that is not secure or/and not clean enough.</p>\n\n<p>Some good practices area:</p>\n\n<ol>\n<li>initialize values</li>\n</ol>\n\n<pre><code>const myVar: string = null;\n\nclass MyClass {\n  public myAttr: string = null\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Set only value if not undefined or null or both</li>\n</ol>\n\n<pre><code>\n// matches not null &amp; not undefined\nif (newVal != null) {\n  myVar = newVal;\n}\n\n// matches only not undefined\nif (newVal !== undefined) {\n  myVar = newVal;\n}\n\n// matches only not null\nif (newVal !== null) {\n  myVar = newVal\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>Check Object path's</li>\n</ol>\n\n<p>Example see here: <a href=\"https://stackoverflow.com/a/2631198/3634274\">https://stackoverflow.com/a/2631198/3634274</a></p>\n"}], "owner": {"reputation": 487, "user_id": 9493547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouB3g.jpg?s=128&g=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/9493547/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2221, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563969862, "creation_date": 1563963195, "question_id": 57180491, "link": "https://stackoverflow.com/questions/57180491/how-to-catch-undefined-errors-in-angular-6", "title": "How to catch &quot;undefined&quot; errors in Angular 6", "body": "<p>I am trying to find a way to handle if an undefined error is thrown in my component template. When this occurs the app will break, the desired solution is to navigate to an \"app error\" component or replace the errored component with an \"app error\" component so that the app remains in a functioning state. </p>\n"}, {"tags": ["html", "angular", "typescript"], "comments": [{"owner": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "edited": false, "score": 1, "creation_date": 1563962797, "post_id": 57180217, "comment_id": 100871749, "body": "Follow their official tutorial: <a href=\"https://www.npmjs.com/package/ngx-smart-modal\" rel=\"nofollow noreferrer\">npmjs.com/package/ngx-smart-modal</a>"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 5952059, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xnHQpsdotRI/AAAAAAAAAAI/AAAAAAAAABE/Teuwo4A4Ew0/photo.jpg?sz=128", "display_name": "Kraus Vincent", "link": "https://stackoverflow.com/users/5952059/kraus-vincent"}, "is_accepted": false, "score": 0, "last_activity_date": 1564147993, "creation_date": 1564147993, "answer_id": 57221167, "question_id": 57180217, "link": "https://stackoverflow.com/questions/57180217/how-to-add-the-css-file-reference-in-angular-json-ngx-smart-modal-angular/57221167#57221167", "title": "How to add the css file reference in angular.json? ngx-smart-modal - Angular", "body": "<p>Your stackblitz example use ngx-smart-modal@2.0.4, however we are currently in @7.1.1.</p>\n\n<p>I recommand you to follow the official documentation for <a href=\"https://www.npmjs.com/package/ngx-smart-modal#setup\" rel=\"nofollow noreferrer\">Setup</a> your modals.</p>\n\n<p>Instead of absolute path, use relativ path as <code>@import \"~ngx-smart-modal/ngx-smart-modal.css\";</code></p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5952059, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xnHQpsdotRI/AAAAAAAAAAI/AAAAAAAAABE/Teuwo4A4Ew0/photo.jpg?sz=128", "display_name": "Kraus Vincent", "link": "https://stackoverflow.com/users/5952059/kraus-vincent"}, "edited": false, "score": 0, "creation_date": 1564403229, "post_id": 57223553, "comment_id": 101007393, "body": "That&#39;s unfortunately not the same package. It&#39;s not an answer of your issue."}], "tags": [], "owner": {"reputation": 1, "user_id": 11739430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1GQqA.jpg?s=128&g=1", "display_name": "Salaheddine Elhassani", "link": "https://stackoverflow.com/users/11739430/salaheddine-elhassani"}, "is_accepted": false, "score": 0, "last_activity_date": 1564157046, "creation_date": 1564157046, "answer_id": 57223553, "question_id": 57180217, "link": "https://stackoverflow.com/questions/57180217/how-to-add-the-css-file-reference-in-angular-json-ngx-smart-modal-angular/57223553#57223553", "title": "How to add the css file reference in angular.json? ngx-smart-modal - Angular", "body": "<p>I followed some steps but with no luck, so I moved to another example that did work: <a href=\"https://www.youtube.com/watch?v=Jm9q9Alva0M\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=Jm9q9Alva0M</a> with code at: <a href=\"https://stackblitz.com/edit/ngx-modal\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/ngx-modal</a></p>\n\n<p>but I had to add the line:<br>\n&lt; link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css\" ></p>\n\n<p>at the top of the \"app.component.html\" file, then the modal page showed up.  </p>\n"}], "owner": {"reputation": 1, "user_id": 11739430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1GQqA.jpg?s=128&g=1", "display_name": "Salaheddine Elhassani", "link": "https://stackoverflow.com/users/11739430/salaheddine-elhassani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564157046, "creation_date": 1563962337, "question_id": 57180217, "link": "https://stackoverflow.com/questions/57180217/how-to-add-the-css-file-reference-in-angular-json-ngx-smart-modal-angular", "title": "How to add the css file reference in angular.json? ngx-smart-modal - Angular", "body": "<p>I followed this StackBlitz example: <a href=\"https://stackblitz.com/edit/ngx-smart-modal-example\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/ngx-smart-modal-example</a> to add the ngx-smart-modal window, but the component opens on the page instead of in a modal pop-up.  Can anyone tell me how to solve this problem, or how to add the css file reference if that's what solves the problem?</p>\n\n<ul>\n<li>I tied many things, </li>\n<li><p>I tried following the first 2 answers of this post: <a href=\"https://stackoverflow.com/questions/52086099/ngx-smart-modal-angular-6\">ngx-smart-modal - Angular 6</a>\nbut with no luck: </p></li>\n<li><p>I tried adding the line: </p></li>\n</ul>\n\n<p>\"node_modules/ngx-smart-modal/ngx-smart-modal.css\",</p>\n\n<p>to the section:</p>\n\n<pre><code> \"styles\": [\n          ],\n</code></pre>\n\n<p>in the angular.json</p>\n\n<ul>\n<li><p>I tried adding the line: </p>\n\n<p>@import \"../node_modules/ngx-smart-modal/ngx-smart-modal.css\";</p></li>\n</ul>\n\n<p>into the src/styles.css file as well as adding: the line: \n     \"src/styles.css\"\nto the section </p>\n\n<pre><code>\"styles\": [    \n              ],\n</code></pre>\n\n<p>in the angular.json</p>\n\n<pre><code>...\n\n       \"styles\": [\n\n              \"./node_modules/ngx-smart-modal/ngx-smart-modal.css\"\n\n        ],\n...\n</code></pre>\n"}, {"tags": ["angular", "typescript", "controlvalueaccessor"], "answers": [{"comments": [{"owner": {"reputation": 324, "user_id": 5085934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe63e6fa414645d698a8a8916d48ab83?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Schroijen", "link": "https://stackoverflow.com/users/5085934/joshua-schroijen"}, "edited": false, "score": 0, "creation_date": 1563962550, "post_id": 57180167, "comment_id": 100871591, "body": "I&#39;m quite sure that the QueryList is not the problem here. I use accessors to do the model binding in the example. When I put logging into the getters I see that the model values are only accessed for updating after validate has been called on my component ...  I do understand that reactive forms would probably be better here, but I can&#39;t use them since my team really dislikes them for some reason ..."}, {"owner": {"reputation": 2477, "user_id": 2236151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce96c62de9de9ecf9f6433a77114bcb?s=128&d=identicon&r=PG", "display_name": "Alexandr Mihalciuc", "link": "https://stackoverflow.com/users/2236151/alexandr-mihalciuc"}, "reply_to_user": {"reputation": 324, "user_id": 5085934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe63e6fa414645d698a8a8916d48ab83?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Schroijen", "link": "https://stackoverflow.com/users/5085934/joshua-schroijen"}, "edited": false, "score": 0, "creation_date": 1563963231, "post_id": 57180167, "comment_id": 100871991, "body": "You are right QueryList is not a problem, the problem is order of events in templated forms, which obviously do not work for you. You can try to hack it by checking if the validate call is first or not, but why to do it if Angular already have provided a better option. In fact TemplatedForms internally are build on top of reactive ones, so you use it probably without realising it :))"}, {"owner": {"reputation": 324, "user_id": 5085934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe63e6fa414645d698a8a8916d48ab83?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Schroijen", "link": "https://stackoverflow.com/users/5085934/joshua-schroijen"}, "edited": false, "score": 0, "creation_date": 1563979377, "post_id": 57180167, "comment_id": 100881577, "body": "You were right, reactive forms were the way to go in this case. I implemented my component with the child inputs together in a FormGroup and things are working great now. If anyone wants to know the exact way I implemented it now, <a href=\"https://stackblitz.com/edit/angular-jqge2d\" rel=\"nofollow noreferrer\">check out this Stackblitz</a>"}], "tags": [], "owner": {"reputation": 2477, "user_id": 2236151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce96c62de9de9ecf9f6433a77114bcb?s=128&d=identicon&r=PG", "display_name": "Alexandr Mihalciuc", "link": "https://stackoverflow.com/users/2236151/alexandr-mihalciuc"}, "is_accepted": true, "score": 0, "last_activity_date": 1563962201, "creation_date": 1563962201, "answer_id": 57180167, "question_id": 57179847, "link": "https://stackoverflow.com/questions/57179847/run-controlvalueaccessor-validate-after-updating-and-validating-child-components/57180167#57180167", "title": "Run ControlValueAccessor validate after updating and validating child components", "body": "<p>You code would be much simpler if you use ReactiveForms, in ReactiveForms you source of truth is the model and you always have access to the state of your individual control or group of controls without scanning component with @ViewChildren, here is very good example of how this is implemented from angular docs <a href=\"https://angular.io/guide/form-validation#cross-field-validation\" rel=\"nofollow noreferrer\">https://angular.io/guide/form-validation#cross-field-validation</a>   </p>\n"}, {"tags": [], "owner": {"reputation": 788, "user_id": 1841710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZSBVV.jpg?s=128&g=1", "display_name": "Eli", "link": "https://stackoverflow.com/users/1841710/eli"}, "is_accepted": false, "score": 0, "last_activity_date": 1563962778, "creation_date": 1563962778, "answer_id": 57180355, "question_id": 57179847, "link": "https://stackoverflow.com/questions/57179847/run-controlvalueaccessor-validate-after-updating-and-validating-child-components/57180355#57180355", "title": "Run ControlValueAccessor validate after updating and validating child components", "body": "<p>You can try using FormGroup controls to nest forms:\n<a href=\"https://angular.io/guide/reactive-forms#step-1-creating-a-nested-group\" rel=\"nofollow noreferrer\">https://angular.io/guide/reactive-forms#step-1-creating-a-nested-group</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12759042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84a72d3bc4f5dad937f1bb4a7bd6fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Subodh Kumar", "link": "https://stackoverflow.com/users/12759042/subodh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1579681757, "creation_date": 1579681757, "answer_id": 59855463, "question_id": 57179847, "link": "https://stackoverflow.com/questions/57179847/run-controlvalueaccessor-validate-after-updating-and-validating-child-components/59855463#59855463", "title": "Run ControlValueAccessor validate after updating and validating child components", "body": "<p>thanks for such a detailed explanation...I had a similar issue where a default value set on custom-component was not validating the wrapping component. After debugging realised that the onChangeCb() is still the one i initialized &amp; not the one which registerOnChange assigns. So that changes were not propogating. Below is the change i tried &amp; seems to be working. Please check</p>\n\n<pre><code>...\npublic registerOnChange(fn) {\n            this._onChange = fn;\n            /* value is model */\n            this.value &amp;&amp; setTimeout(()=&gt;{this._onChange(this.value)},0);\n        }\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12759042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84a72d3bc4f5dad937f1bb4a7bd6fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Subodh Kumar", "link": "https://stackoverflow.com/users/12759042/subodh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1579767341, "creation_date": 1579767341, "answer_id": 59874072, "question_id": 57179847, "link": "https://stackoverflow.com/questions/57179847/run-controlvalueaccessor-validate-after-updating-and-validating-child-components/59874072#59874072", "title": "Run ControlValueAccessor validate after updating and validating child components", "body": "<p>In addition to one above, the below solution is better i feel as it does not invlolve any 'setTimeout'</p>\n\n<pre><code>public writeValue(val) {\n// EXISING CODE\n...\n\n(val!==this.value) &amp;&amp; this._onChange(this.value);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 324, "user_id": 5085934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe63e6fa414645d698a8a8916d48ab83?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Schroijen", "link": "https://stackoverflow.com/users/5085934/joshua-schroijen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 57180167, "answer_count": 4, "score": 0, "last_activity_date": 1579767341, "creation_date": 1563961201, "question_id": 57179847, "link": "https://stackoverflow.com/questions/57179847/run-controlvalueaccessor-validate-after-updating-and-validating-child-components", "title": "Run ControlValueAccessor validate after updating and validating child components", "body": "<p>I'm dealing with a tough problem in Angular. I want to create a custom form component that \"bundles\" several child input elements and is valid when all children are valid.</p>\n\n<p>I thought I'd simply create a component implementing both the ControlValueAccessor and Validator interfaces. I'd inject the inputs with the ViewChildren decorator as NgModels so I could loop over them and collect any validation errors in the component's validate method. Here is a sample implementation for an address input component I made that does this for two inputs (street and street number) which both require a value :</p>\n\n<pre><code>import { AfterViewInit, Component, forwardRef, OnInit, QueryList, ViewChildren } from '@angular/core';\nimport { AbstractControl, ControlValueAccessor, NG_VALIDATORS, NgModel, NG_VALUE_ACCESSOR, ValidationErrors, Validator } from '@angular/forms';\nimport { Address } from './address';\n\n@Component({\n    selector: `address-input`,\n    template: `\n        &lt;label for=\"street\"&gt;Street&lt;/label&gt;\n        &lt;input id=\"street\" name=\"street\" type=\"text\" [(ngModel)]=\"Street\" (blur)=\"onTouchedAField()\" required /&gt;&lt;br /&gt;\n        &lt;label for=\"number\"&gt;Number&lt;/label&gt;\n        &lt;input id=\"number\" name=\"number\" type=\"number\" [(ngModel)]=\"Number\" (blur)=\"onTouchedAField()\" required /&gt;`,\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: AddressInputComponent,\n            multi: true,\n        },\n        {\n            provide: NG_VALIDATORS,\n            useExisting: AddressInputComponent,\n            multi: true,\n        },\n    ],\n})\nexport class AddressInputComponent implements ControlValueAccessor, Validator {\n    @ViewChildren(NgModel) public validatedFields!: QueryList&lt;NgModel&gt;;\n\n    private address: Address = new Address(null, null);\n\n    private onFormCtrlChanged!: (_: any) =&gt; void;\n    private onFormCtrlTouched!: (_: any) =&gt; void;\n\n    public get Street(): string | null {\n        if (this.address) {\n            return this.address.Street;\n        } else {\n            return null;\n        }\n    }\n    public set Street(val: string) {\n      this.address = new Address(val, this.address.Number);\n\n        this.emitChanged();\n    }\n\n    public get Number(): number | null {\n        if (this.address) {\n            return this.address.Number;\n        } else {\n            return null;\n        }\n    }\n    public set Number(val: number | null) {\n        this.address = new Address(this.address.Street, val);\n\n        this.emitChanged();\n    }\n\n    public onTouchedAField(): void {\n        this.emitTouched();\n    }\n\n    public writeValue(newAddress: Address): void {\n        if (newAddress !== undefined) {\n            this.address = newAddress;\n        }\n    }\n\n    public registerOnChange(fn: (_: any) =&gt; void): void {\n        this.onFormCtrlChanged = fn;\n    }\n\n    public registerOnTouched(fn: (_: any) =&gt; void): void {\n        this.onFormCtrlTouched = fn;\n    }\n\n    public validate(control: AbstractControl): ValidationErrors | null {\n        let validationErrors: ValidationErrors | null = null;\n        this.validatedFields.forEach((ngm: NgModel) =&gt; {\n            console.log(`ValidationErrs for ${ngm.name} with value ${ngm.value}`, ngm.errors);\n            if (ngm.errors !== null) {\n                if (validationErrors === null)\n                    validationErrors = {};\n                validationErrors[ngm.name] = ngm.errors;\n            }\n        });\n\n        console.log(`validationErrors `, validationErrors);\n        return validationErrors;\n    }\n\n    private emitChanged(): void {\n        this.onFormCtrlChanged(this.address);\n    }\n\n    private emitTouched(): void {\n        this.onFormCtrlTouched(this.address);\n    }\n}\n</code></pre>\n\n<p>This mostly works fine when I embed the address component into a form like this:</p>\n\n<pre><code>&lt;form (ngSubmit)=\"onSubmit()\" #myForm=\"ngForm\"&gt;\n    &lt;address-input name=\"address\" [(ngModel)]=\"address\" #addressInput=\"ngModel\"&gt;&lt;/address-input&gt;\n\n    &lt;button type=\"submit\"&gt;SUBMIT&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The only, but an annoying, issue is that when the address input component will be filled in correctly through a model binding the address input component will nevertheless remain in an invalid state.</p>\n\n<p>I.e. when the app component containing the form that contains the custom form component defines the address field that it binds to the custom form component like so:</p>\n\n<pre><code>public address: Address = new Address('Baker Street', 123);\n</code></pre>\n\n<p>the custom form component should be valid but remains invalid.</p>\n\n<p>When I then add a letter or digit to a field, for example, the custom form component immediately becomes valid.</p>\n\n<p>After some investigation I noticed that this is because Angular calls the validate method of the Validator interface immediately after it calls the writeValue method of the ControlValueAccessor interface on the custom form component. That way, the values of the child inputs of the custom form component and their validation state are not updated yet when Angular calls the validate method on the custom form component.</p>\n\n<p>To solve my issue, I am wondering if there is any way to force Angular to update the value and validation state of ngModels or to run validate again when child inputs/components have been updated. Or if there is any other way to make this work. More broadly, I am also wondering if there is a better way to implement a form component that is valid when all its children are, because I feel that fixing this issue is going to require some \"hacks\" or inefficient code. </p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-dngdam\" rel=\"nofollow noreferrer\">You can find a Stackblitz here</a> containing a simple reproduction of the issue.</p>\n\n<p>Thanks in advance for your time and help,\nJoshua</p>\n"}, {"tags": ["node.js", "typescript", "azure", "npm", "azure-devops"], "answers": [{"comments": [{"owner": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "edited": false, "score": 0, "creation_date": 1564393650, "post_id": 57181715, "comment_id": 101002361, "body": "This did seem like a promising solution, but in my case ended up with having to fix every import in my project to resolve a list of errors when using webpack. This didn&#39;t seem very maintainable so I didn&#39;t implement it any further."}, {"owner": {"reputation": 30946, "user_id": 6587650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bjWRF.jpg?s=128&g=1", "display_name": "starian chen-MSFT", "link": "https://stackoverflow.com/users/6587650/starian-chen-msft"}, "reply_to_user": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "edited": false, "score": 0, "creation_date": 1564399609, "post_id": 57181715, "comment_id": 101005502, "body": "@Jordi You can upload node_modules folder to wwwroot. Or you can try to include package.json during deployment: <a href=\"https://docs.microsoft.com/en-us/azure/nodejs-use-node-modules-azure-apps#using-a-packagejson-file\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/&hellip;</a>"}, {"owner": {"reputation": 30946, "user_id": 6587650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bjWRF.jpg?s=128&g=1", "display_name": "starian chen-MSFT", "link": "https://stackoverflow.com/users/6587650/starian-chen-msft"}, "reply_to_user": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "edited": false, "score": 0, "creation_date": 1564399820, "post_id": 57181715, "comment_id": 101005606, "body": "@Jordi There is a blog about deploying nodejs project and check node_modules: <a href=\"https://blogs.msdn.microsoft.com/laurelle/2015/12/01/how-to-deploy-a-node-js-site-into-azure-web-app-to-create-a-website/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/laurelle/2015/12/01/&hellip;</a>"}, {"owner": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "edited": false, "score": 0, "creation_date": 1564653715, "post_id": 57181715, "comment_id": 101105564, "body": "So the node_module being missing was indeed the issue. After some struggeling in Azure DevOps I managed to get the files together with the dist. It was still giving some troubles because I was forcing the application onto a specific port number, but after I let azure decide the port number, the application started running."}], "tags": [], "owner": {"reputation": 30946, "user_id": 6587650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bjWRF.jpg?s=128&g=1", "display_name": "starian chen-MSFT", "link": "https://stackoverflow.com/users/6587650/starian-chen-msft"}, "is_accepted": true, "score": 3, "last_activity_date": 1563967229, "creation_date": 1563967229, "answer_id": 57181715, "question_id": 57178989, "link": "https://stackoverflow.com/questions/57178989/cannot-find-module-lib-tsc-js-when-releasing-typescript-application-to-azur/57181715#57181715", "title": "Cannot find module &#39;../lib/tsc.js&#39; when releasing typescript application to azure", "body": "<p>You are using <strong>tsc</strong> command to compile your typescript file, for this way, it won't include necessary packages' code to the result file (js), so you need to upload/publish <strong>node_modules</strong> folder (include package files) to <strong>/home/site/wwwroot</strong> too (can publish <strong>node_modules</strong> with result file through release together). </p>\n\n<p>You can compile your typescript file through webpack, which can include packages' code to the result file. <a href=\"https://webpack.js.org/guides/typescript/\" rel=\"nofollow noreferrer\">https://webpack.js.org/guides/typescript/</a></p>\n"}, {"comments": [{"owner": {"reputation": 43256, "user_id": 57611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fbIWO.jpg?s=128&g=1", "display_name": "ErikE", "link": "https://stackoverflow.com/users/57611/erike"}, "edited": false, "score": 0, "creation_date": 1616389518, "post_id": 62682761, "comment_id": 117977057, "body": "Do NOT use <code>sudo</code> to make your <code>npm install</code> work correctly. This just leads to more problems that then require the use of <code>sudo</code>. And believeme, you don&#39;t want open source packages being able to run their postinstall scripts as sudo. Instead, use <code>chown</code> to take possession of the <code>~&#47;.npm</code> folder, and any other cache, temporary, or binary folders used by npm."}], "tags": [], "owner": {"reputation": 78, "user_id": 10391465, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aeKlyPpctZc/AAAAAAAAAAI/AAAAAAAACpU/zw-ih2HMfDE/photo.jpg?sz=128", "display_name": "Mani kiran", "link": "https://stackoverflow.com/users/10391465/mani-kiran"}, "is_accepted": false, "score": 0, "last_activity_date": 1593626387, "creation_date": 1593626387, "answer_id": 62682761, "question_id": 57178989, "link": "https://stackoverflow.com/questions/57178989/cannot-find-module-lib-tsc-js-when-releasing-typescript-application-to-azur/62682761#62682761", "title": "Cannot find module &#39;../lib/tsc.js&#39; when releasing typescript application to azure", "body": "<p>I have faced the same issue and solved it by updating the npm to appropriate version(Compatible with installed nodejs version) and deleted all node modules and then did &quot;sudo npm install typescript -g&quot; and &quot;npm install&quot;</p>\n"}], "owner": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4854, "favorite_count": 0, "accepted_answer_id": 57181715, "answer_count": 2, "score": 4, "last_activity_date": 1593626387, "creation_date": 1563958580, "question_id": 57178989, "link": "https://stackoverflow.com/questions/57178989/cannot-find-module-lib-tsc-js-when-releasing-typescript-application-to-azur", "title": "Cannot find module &#39;../lib/tsc.js&#39; when releasing typescript application to azure", "body": "<p>I'm trying to release a typescript application to a Azure App Service running on Linux. I'm doing this using Azure DevOps. I've setup a build and release pipeline which succeed, but when I visit the URL of my app service, I see a message saying \":c Application Error\" and it refers to the diagnostic logs. These logs give me the following error:</p>\n\n<blockquote>\n  <p>Error: Cannot find module '../lib/tsc.js'</p>\n</blockquote>\n\n<p><strong>Full Error Log</strong></p>\n\n<pre><code>myApp@1.0.0 prod /home/site/wwwroot\n&gt; npm run build &amp;&amp; npm run start\n&gt; myApp@1.0.0 build /home/site/wwwroot\n&gt; tsc\ninternal/modules/cjs/loader.js:583\nthrow err;\n^\nError: Cannot find module '../lib/tsc.js'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:581:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:507:25)\n    at Module.require (internal/modules/cjs/loader.js:637:17)\n    at require (internal/modules/cjs/helpers.js:22:18)\n    at Object. (/home/site/wwwroot/node_modules/.bin/tsc:2:1)\n    at Module._compile (internal/modules/cjs/loader.js:689:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:700:10)\n    at Module.load (internal/modules/cjs/loader.js:599:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:538:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:530:3)\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! myApp@1.0.0 build: `tsc`\nnpm ERR! Exit status 1\n</code></pre>\n\n<p>My Azure Devops environment cosists of build pipeline which performs a npm install and publishes that to an artifact and a release pipeline which performs a deploy and then runs a start command. These steps succeed and the start command is ran, but it creates the above errors.</p>\n\n<p>I've tried building the application before creating the artifact, but this gave errors in the build step where it couldn't find files that were being imported. I can run the <strong>npm run prod</strong> command without any issues localy.</p>\n\n<p>Does anyone have any idea what could be causing this? </p>\n\n<p><strong>Package.json</strong></p>\n\n<pre><code>{\n\"name\": \"MyApp\",\n\"version\": \"1.0.0\",\n\"description\": \"\",\n\"main\": \"./dist/index.js\",\n\"scripts\": {\n\"build\": \"tsc\",\n\"dev\": \"nodemon --watch 'src/**/*.ts' --ignore 'src/**/*.spec.ts' --exec ts-node src/index.ts\",\n\"start\": \"nodemon ./dist/index.js\",\n\"prod\": \"npm run build &amp;&amp; npm run start\",\n\"test\": \"mocha --ui tdd -r ts-node/register tests/**/*.test.ts\"\n},\n\"author\": \"\",\n\"license\": \"ISC\",\n\"dependencies\": {\n    \"@google/chatbase\": \"^1.1.2\",\n    \"@types/express\": \"^4.17.0\",\n    \"actions-on-google\": \"^2.7.1\",\n    \"body-parser\": \"^1.19.0\",\n    \"dotenv\": \"^8.0.0\",\n    \"express\": \"^4.17.1\",\n    \"morgan\": \"^1.9.1\",\n    \"nodemon\": \"^1.19.1\",\n    \"ssml-builder\": \"^0.4.3\",\n    \"ts-sinon\": \"^1.0.17\",\n    \"ts-node\": \"^8.3.0\",\n    \"tsc-watch\": \"^2.2.1\",\n    \"typescript\": \"^3.5.3\",\n    \"uuid\": \"^3.3.2\"\n    },\n\"devDependencies\": {\n    \"@types/chai\": \"^4.1.7\",\n    \"@types/mocha\": \"^5.2.7\",\n    \"chai\": \"^4.2.0\",\n    \"mocha\": \"^6.1.4\"\n}\n}\n</code></pre>\n\n<p><strong>Tsconfig.json</strong></p>\n\n<pre><code>{\n\"compilerOptions\": {\n\"module\": \"commonjs\",\n  \"moduleResolution\": \"node\",\n  \"pretty\": true,\n  \"sourceMap\": true,\n  \"target\": \"es6\",\n  \"outDir\": \"./dist\",\n  \"baseUrl\": \"./src\",\n  \"resolveJsonModule\": true,\n  \"esModuleInterop\": true,\n},\n\"include\": [\n  \"src/**/*.ts\",\n  \"src/data/*.json\",\n  \"src/data/sounds/*.mp3\"\n],\n\"exclude\": [\n  \"node_modules\"\n]\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "leaflet", "openstreetmap"], "comments": [{"owner": {"reputation": 1412, "user_id": 8534088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CrzSh.png?s=128&g=1", "display_name": "Dmitriy Popov", "link": "https://stackoverflow.com/users/8534088/dmitriy-popov"}, "edited": false, "score": 1, "creation_date": 1563958635, "post_id": 57178936, "comment_id": 100869462, "body": "Welcome to SO. Please post the exact error you&#39;re getting."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11808369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp4-xu-Y794/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNI13OWKh10BqoobPEdG6T4_6K4Q/photo.jpg?sz=128", "display_name": "Dominik Lorke", "link": "https://stackoverflow.com/users/11808369/dominik-lorke"}, "edited": false, "score": 0, "creation_date": 1563959164, "post_id": 57179048, "comment_id": 100869752, "body": "I used that earlier<code>Module &#39;&quot;xyz&#47;node_modules&#47;@types&#47;leaflet&#47;index&quot;&#39; has no default export.ts(1192)</code>"}, {"owner": {"reputation": 153, "user_id": 11374205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bQPAX.png?s=128&g=1", "display_name": "Hadrien K.", "link": "https://stackoverflow.com/users/11374205/hadrien-k"}, "reply_to_user": {"reputation": 27, "user_id": 11808369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp4-xu-Y794/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNI13OWKh10BqoobPEdG6T4_6K4Q/photo.jpg?sz=128", "display_name": "Dominik Lorke", "link": "https://stackoverflow.com/users/11808369/dominik-lorke"}, "edited": false, "score": 0, "creation_date": 1563959484, "post_id": 57179048, "comment_id": 100869922, "body": "Can you try : <code>import &#39;leaflet&#39;;  const L = window[&#39;L&#39;];</code>"}, {"owner": {"reputation": 153, "user_id": 11374205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bQPAX.png?s=128&g=1", "display_name": "Hadrien K.", "link": "https://stackoverflow.com/users/11374205/hadrien-k"}, "reply_to_user": {"reputation": 27, "user_id": 11808369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp4-xu-Y794/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNI13OWKh10BqoobPEdG6T4_6K4Q/photo.jpg?sz=128", "display_name": "Dominik Lorke", "link": "https://stackoverflow.com/users/11808369/dominik-lorke"}, "edited": false, "score": 0, "creation_date": 1563959666, "post_id": 57179048, "comment_id": 100870012, "body": "If this doesn&#39;t work put <code>allowSyntheticDefaultImports: true</code> in your typescript config file."}, {"owner": {"reputation": 27, "user_id": 11808369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp4-xu-Y794/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNI13OWKh10BqoobPEdG6T4_6K4Q/photo.jpg?sz=128", "display_name": "Dominik Lorke", "link": "https://stackoverflow.com/users/11808369/dominik-lorke"}, "edited": false, "score": 0, "creation_date": 1563969345, "post_id": 57179048, "comment_id": 100875445, "body": "I must use global and source, now import leaflet in typings.json and package.json. I have a problem with old source type. <code>error TS1110: Type expected.</code>"}], "tags": [], "owner": {"reputation": 153, "user_id": 11374205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bQPAX.png?s=128&g=1", "display_name": "Hadrien K.", "link": "https://stackoverflow.com/users/11374205/hadrien-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1563958768, "creation_date": 1563958768, "answer_id": 57179048, "question_id": 57178936, "link": "https://stackoverflow.com/questions/57178936/runtime-error-error-ts2307-cannot-find-module-leaflet/57179048#57179048", "title": "Runtime Error: error TS2307: Cannot find module &#39;leaflet&#39;", "body": "<p>You should use <code>import L from 'leaflet'</code> :)</p>\n"}], "owner": {"reputation": 27, "user_id": 11808369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp4-xu-Y794/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNI13OWKh10BqoobPEdG6T4_6K4Q/photo.jpg?sz=128", "display_name": "Dominik Lorke", "link": "https://stackoverflow.com/users/11808369/dominik-lorke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 0, "accepted_answer_id": 57179048, "answer_count": 1, "score": 1, "last_activity_date": 1563958768, "creation_date": 1563958410, "last_edit_date": 1563958611, "question_id": 57178936, "link": "https://stackoverflow.com/questions/57178936/runtime-error-error-ts2307-cannot-find-module-leaflet", "title": "Runtime Error: error TS2307: Cannot find module &#39;leaflet&#39;", "body": "<p>I have problem with leaflet dictionary. I saw similar problems on stackoverflow, but it has not been resolved. I reinstalled leaflet and types, but there is still a problem. When I import L from leaflet, i have this problem</p>\n\n<p>I installed leaflet like that <code>npm install leaflet</code> and <code>npm install @types/leaflet</code></p>\n\n<p>This is line of code where i have problem</p>\n\n<p><code>import * as L from 'leaflet'</code></p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 591, "user_id": 6169436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aci3r.png?s=128&g=1", "display_name": "Micha\u0142 Tkaczyk", "link": "https://stackoverflow.com/users/6169436/micha%c5%82-tkaczyk"}, "edited": false, "score": 0, "creation_date": 1563958502, "post_id": 57178854, "comment_id": 100869392, "body": "Can you add screen of the console.log?"}, {"owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "reply_to_user": {"reputation": 591, "user_id": 6169436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aci3r.png?s=128&g=1", "display_name": "Micha\u0142 Tkaczyk", "link": "https://stackoverflow.com/users/6169436/micha%c5%82-tkaczyk"}, "edited": false, "score": 0, "creation_date": 1563958920, "post_id": 57178854, "comment_id": 100869621, "body": "1: Object                                                                                                                                                                                                                                                                   Object {id: &quot;1&quot;, name: &quot;irish msisdn 1&quot;, total: 1000, displayName: &quot;irish msisdn 2(1000)&quot;}"}], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 8491205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KZMG.jpg?s=128&g=1", "display_name": "Debabrata Paul Chowdhury", "link": "https://stackoverflow.com/users/8491205/debabrata-paul-chowdhury"}, "is_accepted": false, "score": 0, "last_activity_date": 1563961216, "last_edit_date": 1563961216, "creation_date": 1563959583, "answer_id": 57179298, "question_id": 57178854, "link": "https://stackoverflow.com/questions/57178854/could-some-one-explain-why-printing-an-option-value-showing-2-object/57179298#57179298", "title": "Could some one explain why printing an option value showing &quot;2: Object&quot;?", "body": "<p>Because you have binded contactList in  [ngValue]=\"contactList\" that's why object the selected in  contactListChanged($event) to select the  name bind  contactList.name to ngValue as follows</p>\n\n<pre><code>&lt;option *ngFor=\"let contactList of contactLists\" [ngValue]=\"contactList.name\"&gt;{{ contactList.name }}&lt;/option&gt;\n</code></pre>\n\n<p>you can use value also if you only pass string.The only difference between two is that value is always string, where in ngValue you can pass object.</p>\n"}, {"tags": [], "owner": {"reputation": 2454, "user_id": 10201194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-myH4W2x1w2E/AAAAAAAAAAI/AAAAAAAAAAc/wuXN1cHXzvo/photo.jpg?sz=128", "display_name": "Ethan Vu", "link": "https://stackoverflow.com/users/10201194/ethan-vu"}, "is_accepted": false, "score": 0, "last_activity_date": 1563961808, "last_edit_date": 1563961808, "creation_date": 1563959686, "answer_id": 57179326, "question_id": 57178854, "link": "https://stackoverflow.com/questions/57178854/could-some-one-explain-why-printing-an-option-value-showing-2-object/57179326#57179326", "title": "Could some one explain why printing an option value showing &quot;2: Object&quot;?", "body": "<p>It important to understand that when you get a value from an input ( radio, checkbox, options...), it's value will always be convert to <code>string</code> type.</p>\n\n<p>And because <code>contactList</code> is an object, the console is showing you exactly what it is: an object that converted to string.  </p>\n\n<p>So if you want the value to identify the object you want, use the id  instead <code>[value]=\"contactList.id\"</code> (or the property that specify each object) :</p>\n\n<pre><code>&lt;option *ngFor=\"let contactList of contactLists\" [value]=\"contactList.id\"&gt;{{ contactList.name }}&lt;/option&gt;\n</code></pre>\n\n<p>Then use the id to get the object you want:</p>\n\n<pre><code>contactListChanged($event) {\n    let objId  = $event.target.value ;\n    console.log(this.contactLists.find(x =&gt; x.id == objId));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": true, "score": 0, "last_activity_date": 1563964830, "creation_date": 1563964830, "answer_id": 57180981, "question_id": 57178854, "link": "https://stackoverflow.com/questions/57178854/could-some-one-explain-why-printing-an-option-value-showing-2-object/57180981#57180981", "title": "Could some one explain why printing an option value showing &quot;2: Object&quot;?", "body": "<p>Javascript by default does not support objects/arrays in the <code>value</code> attribute of the <code>select</code> element. Angular has solved this issue using <code>ngValue</code>. When we use <code>ngValue</code> for objects in Angular, it sets the Javascript value of the <code>select</code> element to <code>id: Object</code> where <code>id</code> is the index of the selected option. and <code>Object</code> is a plain string value. So if you access the value of the selected option using plain Javascript (<code>$event.target.value</code>), you will receive <code>1: Object</code>, <code>2: Object</code>, etc. depending on the selected option. You can access the object by mapping the index to the options but Angular already does that for you.</p>\n\n<p>Instead, you should access the selected value using Angular's native binding methods (<code>formControl</code> or <code>ngModel</code>) because Angular extracts the index (<code>id</code>) in the Javascript value (<code>id: Object</code>) and maps it to the index of the options in the <code>select</code> dropdown to get the object value.</p>\n\n<p>So the correct way to access the value would be to use either <code>formControl</code> or <code>ngModel</code> to access the selected value. Since you are using reactive forms, in your case, you have already shown how to access the value.</p>\n\n<pre><code>contactListChanged() {\n  const selectedValue = this.contactListControl.value;\n  console.log(selectedValue);\n}\n\nget contactListControl() {\n  return this.form.get('contactList');\n}\n</code></pre>\n\n<p>(Source: <a href=\"https://github.com/angular/angular/blob/f8096d499324cf0961f092944bbaedd05364eea1/packages/forms/src/directives/select_control_value_accessor.ts\" rel=\"nofollow noreferrer\">Angular codebase</a>)</p>\n"}], "owner": {"reputation": 149, "user_id": 11402309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35821995abd90727dba8cb684d40cd31?s=128&d=identicon&r=PG&f=1", "display_name": "knowledgeseeker", "link": "https://stackoverflow.com/users/11402309/knowledgeseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57180981, "answer_count": 3, "score": 1, "last_activity_date": 1563964830, "creation_date": 1563958108, "last_edit_date": 1563959878, "question_id": 57178854, "link": "https://stackoverflow.com/questions/57178854/could-some-one-explain-why-printing-an-option-value-showing-2-object", "title": "Could some one explain why printing an option value showing &quot;2: Object&quot;?", "body": "<p>Hi Currently i have UI developed using angular 5 and typescript.\nIn one of my component i have a reactive form and in the component view i have select box form control. So what I want is whenever i choose a different option from the select box it should print the chosen value . so i have registered a function contactListChanged in my component class.</p>\n\n<pre><code>&lt;select formControlName=\"contactList\" [compareWith]=\"compareResource\" (change)=\"contactListChanged($event)\"&gt;\n&lt;option value=\"\" disabled&gt;{{ 'PLACEHOLDERS.CONTACT_LIST' | translate }}&lt;/option&gt;\n&lt;option *ngFor=\"let contactList of contactLists\" [ngValue]=\"contactList\"&gt;{{ contactList.name }}&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>in the component ts file</p>\n\n<pre><code>  contactListChanged($event){\n    let a  = $event.target.value ;\n    console.log(a);// prints 1: Object\n\n    console.log(this.contactListControl.value); // prints Object {id: \"1\", name: \"irish msisdn 1\", total: 1000, displayName: \"irish msisdn 2(1000)\"}\n  }\n</code></pre>\n\n<p>console.log(a) print the value \"2: Object\". However console.log(this.contactListControl.value); prints the value correctly. \nObject {id: \"2\", name: \"irish msisdn 2\", total: 1200, displayName: \"irish msisdn 2(1200)\"}</p>\n\n<p>why is this behaviour ? i would expect console.log(a) to print the value\nObject {id: \"2\", name: \"irish msisdn 2\", total: 1200, displayName: \"irish msisdn 2(1200)\"} </p>\n\n<p>so what i want is to use [ngValue] and get the selected object in the method contactListChanged. How can i achieve it ?</p>\n\n<p>really appreciate your help</p>\n\n<p>thank you </p>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 11031, "user_id": 3083093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a793d3552f6f3864cd024a6c1d92f356?s=128&d=identicon&r=PG", "display_name": "R3tep", "link": "https://stackoverflow.com/users/3083093/r3tep"}, "edited": false, "score": 1, "creation_date": 1563958116, "post_id": 57178820, "comment_id": 100869164, "body": "I think, you can use <a href=\"https://www.learnrxjs.io/operators/combination/combinelatest.html\" rel=\"nofollow noreferrer\"><code>combineLatest</code></a> to do that"}, {"owner": {"reputation": 3562, "user_id": 2328891, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/HgZFa.jpg?s=128&g=1", "display_name": "Shohel", "link": "https://stackoverflow.com/users/2328891/shohel"}, "reply_to_user": {"reputation": 11031, "user_id": 3083093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a793d3552f6f3864cd024a6c1d92f356?s=128&d=identicon&r=PG", "display_name": "R3tep", "link": "https://stackoverflow.com/users/3083093/r3tep"}, "edited": false, "score": 0, "creation_date": 1563958179, "post_id": 57178820, "comment_id": 100869206, "body": "@R3tep, could you make a example"}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1563962011, "post_id": 57178820, "comment_id": 100871281, "body": "You need to explain what does &quot;merge&quot; mean. How will the result observable emit for each emission of single observables? Also concat is not deprecated."}], "answers": [{"tags": [], "owner": {"reputation": 11031, "user_id": 3083093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a793d3552f6f3864cd024a6c1d92f356?s=128&d=identicon&r=PG", "display_name": "R3tep", "link": "https://stackoverflow.com/users/3083093/r3tep"}, "is_accepted": true, "score": 0, "last_activity_date": 1563959370, "last_edit_date": 1563959370, "creation_date": 1563958529, "answer_id": 57178976, "question_id": 57178820, "link": "https://stackoverflow.com/questions/57178820/merge-two-observables-array-into-single-observable-array/57178976#57178976", "title": "merge two observables array into single observable array", "body": "<p>You can use <a href=\"https://www.learnrxjs.io/operators/combination/merge.html\" rel=\"nofollow noreferrer\"><code>merge</code></a> to merge multiple observable. </p>\n\n<p>e.g.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import { merge } from 'rxjs';\r\n\r\nconst example = merge(\r\n  similarIdeasObservable$,\r\n  this.ideaService.getSimilarIdeas(this.idea)\r\n);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 5261, "user_id": 858757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMQgQ.png?s=128&g=1", "display_name": "Silvermind", "link": "https://stackoverflow.com/users/858757/silvermind"}, "edited": false, "score": 3, "creation_date": 1563978197, "post_id": 57179067, "comment_id": 100880776, "body": "In newer versions forkJoin with <code>params args</code> is obsolete. You should use an array: <code>forkJoin([observableA, observableB]);</code>"}], "tags": [], "owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "is_accepted": false, "score": 1, "last_activity_date": 1563958836, "creation_date": 1563958836, "answer_id": 57179067, "question_id": 57178820, "link": "https://stackoverflow.com/questions/57178820/merge-two-observables-array-into-single-observable-array/57179067#57179067", "title": "merge two observables array into single observable array", "body": "<p>I would recommend you to use <a href=\"https://www.learnrxjs.io/operators/combination/forkjoin.html\" rel=\"nofollow noreferrer\">forkJoin</a>. </p>\n\n<p>The idea of how <code>forkJoin</code> works is that it requires the input observables (<code>observableA</code> and <code>observableB</code> on the below example) to be completed, and it will eventually be used to return an observable represented by an array, which consists of the values returned by the input observables.</p>\n\n<pre><code>import { forkJoin } from 'rxjs';\n\nconst observableA = this.similarIdeasObservable$;\nconst observableB = this.ideaService.getSimilarIdeas(this.idea);\n\nforkJoin(observableA, observableB);\n</code></pre>\n"}], "owner": {"reputation": 3562, "user_id": 2328891, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/HgZFa.jpg?s=128&g=1", "display_name": "Shohel", "link": "https://stackoverflow.com/users/2328891/shohel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1254, "favorite_count": 0, "accepted_answer_id": 57178976, "answer_count": 2, "score": 0, "last_activity_date": 1563959370, "creation_date": 1563957994, "question_id": 57178820, "link": "https://stackoverflow.com/questions/57178820/merge-two-observables-array-into-single-observable-array", "title": "merge two observables array into single observable array", "body": "<p>I have a Observable array <code>similarIdeasObservable$</code> and another Observable array being getting from server by like <code>this.ideaService.getSimilarIdeas()</code>. I want to merge these two Observable arrays without using subscribe. How Can I do this? </p>\n\n<p>I am trying following way</p>\n\n<pre><code> this.similarIdeasObservable$.pipe(concat(this.ideaService.getSimilarIdeas(this.idea).pipe(\n        concatMap(i =&gt; i),\n        toArray(),\n        catchError(error =&gt; {\n          throw error;\n        }),\n        finalize(() =&gt; {\n          this.loading = false;\n        })\n      )));\n</code></pre>\n\n<p><code>concat</code> is deprecated.</p>\n"}, {"tags": ["angular", "typescript", "static", "static-methods", "angular-http-interceptors"], "comments": [{"owner": {"reputation": 1658, "user_id": 6475284, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4be636df95ad64c032e87d6796cf4e56?s=128&d=identicon&r=PG&f=1", "display_name": "Codehan25", "link": "https://stackoverflow.com/users/6475284/codehan25"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1563957006, "post_id": 57178459, "comment_id": 100868583, "body": "The part where I commented &quot;This method is not recognized anymore..&quot;"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 1, "creation_date": 1563957282, "post_id": 57178459, "comment_id": 100868724, "body": "Change it to <code>this.createHttpErrorMessage(...)</code> OR make the method static and invoke it using <code>HttpInterceptorService.createHttpErrorMessage(...)</code>"}, {"owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 1, "creation_date": 1563957442, "post_id": 57178459, "comment_id": 100868812, "body": "++ Why do you <i>really</i> need a static reference in your service class?"}, {"owner": {"reputation": 1658, "user_id": 6475284, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4be636df95ad64c032e87d6796cf4e56?s=128&d=identicon&r=PG&f=1", "display_name": "Codehan25", "link": "https://stackoverflow.com/users/6475284/codehan25"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 0, "creation_date": 1563958576, "post_id": 57178459, "comment_id": 100869437, "body": "With this.createHttpErrorMessage the console says: _this.createHttpErrorMessage is not a function. It seem to work with making the method static and move it to the top. I also had to make another method static in order to make it work. I had to make it static because a lot of other stuff is going on in that service and it was the only way to make it work :("}, {"owner": {"reputation": 1658, "user_id": 6475284, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4be636df95ad64c032e87d6796cf4e56?s=128&d=identicon&r=PG&f=1", "display_name": "Codehan25", "link": "https://stackoverflow.com/users/6475284/codehan25"}, "reply_to_user": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "edited": false, "score": 1, "creation_date": 1563958730, "post_id": 57178459, "comment_id": 100869508, "body": "If you want you can post your comment as an answer to let me confirm it :)"}], "answers": [{"tags": [], "owner": {"reputation": 14058, "user_id": 6139527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m3NWl.jpg?s=128&g=1", "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1563958956, "creation_date": 1563958956, "answer_id": 57179100, "question_id": 57178459, "link": "https://stackoverflow.com/questions/57178459/typescript-call-static-method-inside-the-class-angular-httpinterceptor/57179100#57179100", "title": "Typescript: Call static method inside the class (Angular HttpInterceptor)", "body": "<p>You can make one of the following changes in order to fix the compilation issues.</p>\n\n<ul>\n<li><p>Invoke it using</p>\n\n<pre><code>this.createHttpErrorMessage(...)\n</code></pre></li>\n</ul>\n\n<p>OR</p>\n\n<ul>\n<li><p>Make the method static and invoke it using </p>\n\n<pre><code>HttpInterceptorService.createHttpErrorMessage(...)\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 1658, "user_id": 6475284, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4be636df95ad64c032e87d6796cf4e56?s=128&d=identicon&r=PG&f=1", "display_name": "Codehan25", "link": "https://stackoverflow.com/users/6475284/codehan25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "accepted_answer_id": 57179100, "answer_count": 1, "score": 0, "last_activity_date": 1563958956, "creation_date": 1563956769, "question_id": 57178459, "link": "https://stackoverflow.com/questions/57178459/typescript-call-static-method-inside-the-class-angular-httpinterceptor", "title": "Typescript: Call static method inside the class (Angular HttpInterceptor)", "body": "<p>I'm currently working on an http interceptor that worked well until yesterday.</p>\n\n<p>It defines static methods and one of them does not want to be recognized.</p>\n\n<p>The console says:</p>\n\n<blockquote>\n  <p>my.component.ts:162 Error in PUT Request TypeError: HttpInterceptorService_1.httpInterceptorService.createHttpErrorMessage is not a function</p>\n</blockquote>\n\n<pre><code>at TapSubscriber._tapNext (http-interceptor.service.ts:113)\nat TapSubscriber.push../node_modules/rxjs/_esm5/internal/operators/tap.js.TapSubscriber._next (tap.js:45)\nat TapSubscriber.push../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next (Subscriber.js:54)\nat TakeSubscriber.push../node_modules/rxjs/_esm5/internal/operators/take.js.TakeSubscriber._next (take.js:40)\nat TakeSubscriber.push../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next (Subscriber.js:54)\nat Notification.push../node_modules/rxjs/_esm5/internal/Notification.js.Notification.observe (Notification.js:15)\nat AsyncAction.push../node_modules/rxjs/_esm5/internal/operators/delay.js.DelaySubscriber.dispatch [as work] (delay.js:42)\nat AsyncAction.push../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js.AsyncAction._execute (AsyncAction.js:63)\nat AsyncAction.push../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js.AsyncAction.execute (AsyncAction.js:51)\nat AsyncScheduler.push../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js.AsyncScheduler.flush (AsyncScheduler.js:43)\n</code></pre>\n\n<p>My interceptor looks like this (I have reduced it to the parts that are interesting for the bug):</p>\n\n<pre><code>// My imports\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HttpInterceptorService implements HttpInterceptor {\n  // Other static stuff and below my httpInterceptorService\n  static httpInterceptorService: HttpInterceptorService;\n\n  constructor(\n    httpInterceptorService: HttpInterceptorService,\n  ) {\n    HttpInterceptorService.httpInterceptorService = httpInterceptorService;;\n  }\n\n  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    const headers = new HttpHeaders({\n      // Some headers\n    });\n\n    const clone = req.clone({\n      // ..\n    });\n\n    return next.handle(clone).pipe(\n      // ..\n    );\n  }\n\n  createHttpErrorMessage(error: HttpErrorResponse, statusText: string) {\n    const msg: string = error.status + ' ' + error.statusText + ' - ' + statusText;\n    switch (error.status) {\n      case 404:\n        this.showError('Error ID: ' + this.id, msg);\n        break;\n      default:\n        break;\n    }\n    console.error(\n      // Some error messages\n    );\n  }\n\n  handleHttpError(error: HttpErrorResponse) {\n    if (my condition) {\n      // some logic\n    } else {\n      return throwError(error).pipe(\n        retryWhen(errors =&gt; errors.pipe(\n          delay(1000),\n          take(1),\n          tap(() =&gt; {\n            switch (error.status) {\n              case 404: // This method is not recognized anymore.. \n                HttpInterceptorService.httpInterceptorService.createHttpErrorMessage(\n                  error, HttpInterceptorService.otherService.doSomething());\n                break;\n              default:\n                console.error(error);\n                break;\n              }\n            }),\n          ),\n        )\n      );\n    }\n  }\n}\n</code></pre>\n\n<p>As I said, the Interceptor has worked without any problems so far, until this error appeared yesterday.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 1, "creation_date": 1563956601, "post_id": 57178216, "comment_id": 100868353, "body": "I personally use <code>undefined</code> instead of <code>null</code>. I keep <code>null</code> values for 2 cases only: 1/ on the backend, to represent a SQL <code>NULL</code> value, 2/ on the frontend, to deal with Vue.js observable objects (due to a limitation of Vue.js)."}, {"owner": {"reputation": 1230, "user_id": 11306392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f712ad3fe37ee35c0f5c2dcaa373f2e3?s=128&d=identicon&r=PG&f=1", "display_name": "Bohdan Stupak", "link": "https://stackoverflow.com/users/11306392/bohdan-stupak"}, "edited": false, "score": 0, "creation_date": 1563957215, "post_id": 57178216, "comment_id": 100868691, "body": "As a person with F# background where discriminated union types and <code>Option&lt;T&gt;</code> are a thing I think that having <code>string | null</code> in your code and not a quite big deal and the ability to know explicitly whether your type is nullable is a great benefit. So if you ask me: go ahead with it."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 68051, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8a1aabc40d859fcb786eb4d28b95d299?s=128&d=identicon&r=PG", "display_name": "Tim Perry", "link": "https://stackoverflow.com/users/68051/tim-perry"}, "is_accepted": true, "score": 3, "last_activity_date": 1563962489, "last_edit_date": 1563962489, "creation_date": 1563962164, "answer_id": 57180150, "question_id": 57178216, "link": "https://stackoverflow.com/questions/57178216/strictnullchecks-and-null-value-propagation/57180150#57180150", "title": "strictNullChecks and null value propagation", "body": "<p>Personally, I would suggest dropping <code>null</code> entirely, and using <code>undefined</code> instead.</p>\n\n<p>If you have a semantic difference between a <code>null</code> and <code>undefined</code> value in your application, it's likely to cause confusion (in both TS &amp; plain JS). If you don't, and you're just returning <code>null</code>/<code>undefined</code> at random, it'll be simpler and more consistent to use only one.</p>\n\n<p>In terms of which to use, I suggest <code>undefined</code> primarily because TypeScript has slightly better support for it (i.e. <code>?</code>). There are arguments for using only <code>null</code> instead, it's just more verbose, and it's often convenient to have <code>undefined</code> as your indicator of missing data because it's the default value of every uninitialized variable/field, and those <em>should</em> usually have the same semantics &amp; behaviour as explicitly unavailable data. </p>\n"}, {"tags": [], "owner": {"reputation": 91104, "user_id": 613198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a8a4fb43f9c19b3391a7b1066d491f?s=128&d=identicon&r=PG", "display_name": "rsp", "link": "https://stackoverflow.com/users/613198/rsp"}, "is_accepted": false, "score": 0, "last_activity_date": 1577943767, "last_edit_date": 1577943767, "creation_date": 1573775618, "answer_id": 58868308, "question_id": 57178216, "link": "https://stackoverflow.com/questions/57178216/strictnullchecks-and-null-value-propagation/58868308#58868308", "title": "strictNullChecks and null value propagation", "body": "<p>I would agree with the answer by Tim Perry with regards to using only one - either null or undefined - and my advice is also to stick with undefined, mostly because you cannot avoid it as this is the value of missing fields and uninitialized variables.</p>\n\n<p>Also null doesn't work for default function parameters:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function f(x = 1) {\n  // ...\n}\n</code></pre>\n\n<p>Here <code>f(undefined)</code> will set <code>x</code> to <code>1</code> but <code>f(null)</code> will not!</p>\n\n<p>The only argument for null is that JSON doesn't support explicit undefined but this is not such a problem as for those cases when you deserialize JSON that needs explicit null values (as opposed to just missing values, effectively meaning undefined) you can easily convert that.</p>\n\n<p>In my projects I go as far as to forbid nulls with a linter config, e.g. for TSLint:</p>\n\n<pre><code>    \"no-any\": true,\n    \"no-null-keyword\": true\n</code></pre>\n\n<p>This witch <code>strictNullChecks</code> works great in avoiding many kinds of errors.</p>\n\n<p>Remember that the creator of NULL has called it his billion-dollar mistake. Having two nullish values is even worse. But if you have just one (like undefined) <strong>and</strong> you are using strict null checks in TypeScript then you can be pretty safe from the problems usually caused by null/undefined in most of the languages.</p>\n\n<p>No matter if you go for undefined, null or both, I strongly advice you to always use strictNullChecks because without it your code is not really type safe.</p>\n\n<p>See the <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html\" rel=\"nofollow noreferrer\">TypeScript 2.0 release notes</a> about null- and undefined-aware types:</p>\n\n<blockquote>\n  <p>The type checker previously considered null and undefined assignable to anything. Effectively, null and undefined were valid values of every type and it wasn\u2019t possible to specifically exclude them <strong>(and therefore not possible to detect erroneous use of them)</strong>. [emphasis added]</p>\n</blockquote>\n\n<p>It is not enabled by default for backwards compatibility with old code that was written before the new way of checking null and undefined was added.</p>\n\n<p>Consider this simple function:</p>\n\n<pre><code>const f = (x: string) =&gt; x.toLowerCase();\n</code></pre>\n\n<p>It is <strong>not</strong> type safe without the strict flags.\nIt can <strong>crash</strong> with runtime TypeError exceptions like:</p>\n\n<blockquote>\n  <p><code>TypeError: Cannot read property 'toLowerCase' of undefined</code></p>\n</blockquote>\n\n<p>With the strict flags:</p>\n\n<pre><code>const f = (x: string | null) =&gt; x.toLowerCase(); // COMPILE TIME ERROR\nconst f = (x: string | null) =&gt; x &amp;&amp; x.toLowerCase(); // OK and safe\n</code></pre>\n\n<p>For more info, see:</p>\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=PtGP6v29SZQ\" rel=\"nofollow noreferrer\">Call me irresponsible if I crash on null or undefined in JavaScript or TypeScript</a> (my talk on YouTube)</li>\n<li><a href=\"https://github.com/denoland/deno/issues/3324#issuecomment-553453386\" rel=\"nofollow noreferrer\">My arguments about enabling strict flag by default in Deno</a></li>\n<li><a href=\"https://github.com/denoland/deno/issues/504#issuecomment-552963725\" rel=\"nofollow noreferrer\">More arguments for enabling all strict flags</a></li>\n</ul>\n\n<p><strong>Update:</strong> Soon you will be able to use optional chaining in the example above:</p>\n\n<pre><code>const f = (x: string | null) =&gt; x?.toLowerCase(); // OK and safe\n</code></pre>\n\n<p>and even like this, if <code>x</code> could be not null but possibly a type without <code>.toLowerCase()</code> method:</p>\n\n<pre><code>const f = (x: string | number | null) =&gt; x?.toLowerCase?.(); // safe as well\n</code></pre>\n\n<p>For more info, see the documentation about the <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#optional-chaining\" rel=\"nofollow noreferrer\">optional chaining</a> operator.</p>\n"}], "owner": {"reputation": 17100, "user_id": 458093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed588ac7cf65e779943059cc8cedfa37?s=128&d=identicon&r=PG", "display_name": "Gabriel Llamas", "link": "https://stackoverflow.com/users/458093/gabriel-llamas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "accepted_answer_id": 57180150, "answer_count": 2, "score": 2, "last_activity_date": 1577943767, "creation_date": 1563955859, "last_edit_date": 1563956943, "question_id": 57178216, "link": "https://stackoverflow.com/questions/57178216/strictnullchecks-and-null-value-propagation", "title": "strictNullChecks and null value propagation", "body": "<p>I would like to start using <code>strictNullChecks</code> flag in a very big code base. It is definitely a very useful flag but I'm starting to include null types in most of the interface definitions. Maybe it's a personal perception since I never used the flag before, but it's starting to decrease the code readability (imho). I have the sensation that null is everywhere. All originates in a function returning <code>&lt;type&gt; | null</code> that propagates up in the functions call stack, forcing me to also include null types in interfaces.</p>\n\n<p>Most of the time I have optional nullable fields like:</p>\n\n<pre><code>interface X {\n  field?: string | null\n}\n</code></pre>\n\n<p>This kind of things are a bit weird when both null and undefined are falsy values.</p>\n\n<p>I've thought about replacing null types with undefined, eg: <code>&lt;type&gt; | undefined</code> to remove null types from optional interface fields so I just have: </p>\n\n<pre><code>interface X {\n  field?: string\n}\n</code></pre>\n\n<p>But then I lose the semantic value of null which is something that I would like to maintain.</p>\n\n<p>So, what do you think about strictNullChecks? Do you find this kind of fields <code>field?: string | null</code> a bit weird or is something that you like and feel comfortable with it?</p>\n"}, {"tags": ["angular", "typescript", "angular-changedetection"], "answers": [{"comments": [{"owner": {"reputation": 3912, "user_id": 7384435, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c10fc736279eca87fe67640a0105c41d?s=128&d=identicon&r=PG&f=1", "display_name": "dave0688", "link": "https://stackoverflow.com/users/7384435/dave0688"}, "edited": false, "score": 0, "creation_date": 1563959310, "post_id": 57178827, "comment_id": 100869831, "body": "Nice explanation! One thing just to be complete on that: For <code>ChangeDetectionStrategy.OnPush</code> Angular ChangeDetection runs only when an <code>Input</code> parameter is changed, AND it is a literal (like boolean or string). It does not run when something inside an object has changed. Then, you can see the change in <code>ngOnChanges</code>, but have to run changeDetection manually."}, {"owner": {"reputation": 9738, "user_id": 4858777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R121o.png?s=128&g=1", "display_name": "Valeriy Katkov", "link": "https://stackoverflow.com/users/4858777/valeriy-katkov"}, "reply_to_user": {"reputation": 3912, "user_id": 7384435, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c10fc736279eca87fe67640a0105c41d?s=128&d=identicon&r=PG&f=1", "display_name": "dave0688", "link": "https://stackoverflow.com/users/7384435/dave0688"}, "edited": false, "score": 0, "creation_date": 1563961177, "post_id": 57178827, "comment_id": 100870803, "body": "@dave0688 Yes, you are right. Even more, it runs only when the <code>@Input</code> property is changed by data binding, which can change only the prop reference, but not internal state. I updated the answer a little. If an object internal prop can be mutated, I make that prop observable, and it solves the problem. I wrote a big angular project last year without manual change detection at all, I just only used ChangeDetectorRef to manually trigger change detection few times."}], "tags": [], "owner": {"reputation": 9738, "user_id": 4858777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R121o.png?s=128&g=1", "display_name": "Valeriy Katkov", "link": "https://stackoverflow.com/users/4858777/valeriy-katkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1563960606, "last_edit_date": 1563960606, "creation_date": 1563958016, "answer_id": 57178827, "question_id": 57178179, "link": "https://stackoverflow.com/questions/57178179/changedetection-in-angular/57178827#57178827", "title": "ChangeDetection in Angular", "body": "<p><code>SimpleChanges</code> contains only changed values, so, if the <code>isInspectionReopened</code> prop isn't changed, it's missing there.</p>\n\n<p>When you use <code>ChangeDetectionStrategy.OnPush</code>, usually you shouldn't use the ngOnChanges callback at all. <code>ChangeDetectionStrategy.OnPush</code> affects only logic, which makes a decision when to run change detection. So, when <code>isInspectionReopened</code> prop is changed, change detection will be triggered, because it's an '@Input' property, and your component html will be updated, if it's bound to the property.</p>\n\n<p>But, if <code>isInspectionReopened</code> isn't an '@Input' property, for example the component loads the value from a server and updates it, <code>OnPush</code> detection won't recognize that change, unlike standard change detection. You can use RxJs Observables with <code>async</code> pipe to force change detection in case of OnPush strategy, <a href=\"https://stackoverflow.com/a/35386913/4858777\">here is</a> an example.</p>\n\n<p>Also, keep in mind that '@Input' properties trigger change detection only when they are updated via data binding of your parent component. If an '@Input' property value is changed by the component itself, the change detection won't be triggered.</p>\n\n<p>Change detection is also triggered by the component dom events. For example, if you listen an click event, and change something inside the click handler, change detection will be triggered anyway because of the event.</p>\n"}], "owner": {"reputation": 375, "user_id": 8916057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGDlU.png?s=128&g=1", "display_name": "Sergiu Molnar", "link": "https://stackoverflow.com/users/8916057/sergiu-molnar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563960606, "creation_date": 1563955746, "question_id": 57178179, "link": "https://stackoverflow.com/questions/57178179/changedetection-in-angular", "title": "ChangeDetection in Angular", "body": "<p>I'm trying to understand better how ChangeDetection is working and I have a question related to this.</p>\n\n<p>If I'm using <code>changeDetection: ChangeDetectionStrategy.OnPush</code>, on <code>ngOnChanges</code> lifecycle hook I need to verify also if <code>currentValue</code> exists? Or it's enough to verify if the input was changed ?</p>\n\n<p>I can give you an example to understand better what I'm talking about:</p>\n\n<p>So, as I mentioned, I'm using <code>changeDetection: ChangeDetectionStrategy.OnPush</code> and this is my input <code>@Input() isInspectionReopened: boolean;</code> and <code>ngOnChanges</code> looks like this:</p>\n\n<pre><code>ngOnChanges(changes: SimpleChanges) {\n  if(changes.isInspectionReopened) {\n     // do something\n  }\n}\n</code></pre>\n\n<p>It's enough to verify <code>changes.isInspectionReopened</code> or I need to add <code>changes.isInspectionReopened.currentValue</code> ?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 1, "creation_date": 1563957744, "post_id": 57178137, "comment_id": 100868966, "body": "Is your file <code>store&#47;app&#47;app.actions.ts</code>?"}, {"owner": {"reputation": 71, "user_id": 10553715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DqGYWqZZn_s/AAAAAAAAAAI/AAAAAAAAAKw/hMUNeg5hPOQ/photo.jpg?sz=128", "display_name": "Shamaila Mahmood", "link": "https://stackoverflow.com/users/10553715/shamaila-mahmood"}, "reply_to_user": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1563958955, "post_id": 57178137, "comment_id": 100869645, "body": "yes, this is the complete path of the file."}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1563959968, "post_id": 57178137, "comment_id": 100870161, "body": "But with the extension <code>.ts</code>?"}, {"owner": {"reputation": 71, "user_id": 10553715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DqGYWqZZn_s/AAAAAAAAAAI/AAAAAAAAAKw/hMUNeg5hPOQ/photo.jpg?sz=128", "display_name": "Shamaila Mahmood", "link": "https://stackoverflow.com/users/10553715/shamaila-mahmood"}, "reply_to_user": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1563960048, "post_id": 57178137, "comment_id": 100870208, "body": "Yes with the extension ts."}], "owner": {"reputation": 71, "user_id": 10553715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DqGYWqZZn_s/AAAAAAAAAAI/AAAAAAAAAKw/hMUNeg5hPOQ/photo.jpg?sz=128", "display_name": "Shamaila Mahmood", "link": "https://stackoverflow.com/users/10553715/shamaila-mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563959012, "creation_date": 1563955617, "last_edit_date": 1563959012, "question_id": 57178137, "link": "https://stackoverflow.com/questions/57178137/exporting-union-of-interfaces-as-type-throwing-error", "title": "Exporting union of interfaces as type throwing error", "body": "<p>I am writing a react/redux based application using Typescript. I want to expert union of action interfaces so that I can use in the reducer as ActionType. But the compiler is throwing error that there is no such export found. </p>\n\n<pre><code>// Filename: store/app/app.actions\nimport {\n  Language,\n  LANGUAGE_SELECTED,\n  User,\n  USER_FOUND\n} from './app.types';\n\ninterface UserFoundAction {\n  type: typeof USER_FOUND;\n  payload: User\n}\n\ninterface LanguageSelectedAction {\n  type: typeof LANGUAGE_SELECTED;\n  payload: Language\n}\n\nexport type AppActionTypes = UserFoundAction | LanguageSelectedAction;\n</code></pre>\n\n<p>I am inporting AppActionTypes in reducer like the following</p>\n\n<pre><code>import {AppActionTypes} from './app.actions';\n</code></pre>\n\n<p>And getting following error</p>\n\n<p>Line 4:  AppActionTypes not found in 'store/app/app.actions'</p>\n\n<p>Following links validate that what I am doing is correct</p>\n\n<p>I am using Typescript version 3.5.3 and babel 7.4</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43516451/typescript-union-type-as-interface\">Typescript: Union Type as interface</a></p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/35482241/how-to-type-redux-actions-and-redux-reducers-in-typescript\">How to type Redux actions and Redux reducers in TypeScript?</a></p>\n"}, {"tags": ["typescript", "destructuring", "for-of-loop"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1563955747, "creation_date": 1563955747, "answer_id": 57178180, "question_id": 57178090, "link": "https://stackoverflow.com/questions/57178090/when-yielding-a-tuple-why-does-typescript-union-the-types-of-both-indices/57178180#57178180", "title": "When yielding a tuple, why does typescript union the types of both indices?", "body": "<p>This is not a generator issue. Array literals are usually widened to array types. If you use a <code>as const</code> assertion to preserve the tuple type it works as expected</p>\n\n<pre><code>(function iterate() {\n    function* iterator() {\n        let id: number = 0;\n        const value: {\n            a: number,\n            b: number\n        } = {\n            a: 1,\n            b: 2\n        };\n        while (id &lt; 10) {\n            yield [\n                id,\n                value\n            ] as const;\n\n            id += 1;\n        }\n    }\n\n    for (const [k, v] of iterator()) {\n        console.log(k, v.a);\n    }\n})();\n\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 2360304, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1739859e2ad930d7b57c1e7ab60475e6?s=128&d=identicon&r=PG", "display_name": "s4san", "link": "https://stackoverflow.com/users/2360304/s4san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 57178180, "answer_count": 1, "score": 0, "last_activity_date": 1563957566, "creation_date": 1563955448, "last_edit_date": 1563957566, "question_id": 57178090, "link": "https://stackoverflow.com/questions/57178090/when-yielding-a-tuple-why-does-typescript-union-the-types-of-both-indices", "title": "When yielding a tuple, why does typescript union the types of both indices?", "body": "<p>I am yielding an array with values of type <code>[number, object]</code> from a generator function and iterating over the function through <code>for...of</code> loop. When destructuring the values using <code>for (const [k, v] of iterator())</code> the type of <code>v</code> is <code>number | object</code>. I expected it to have the type <code>object</code>- same as the one I used in the <code>yield</code> of the generator function.</p>\n\n<p>I have created a demo of the problem I'm facing in the typescript REPL <a href=\"https://www.typescriptlang.org/play/index.html#code/BQMwrgdgxgLglgewgAjjApgJwIYeASmQG8AoZc5caeJAKlQxxgUwOLIs4Bt0ZUATAFzIIYALYAjLMgC8yAAwBuDp3JQkAZz4A3bFzDphpVSeTZhoyVgA0K0+QkXxUzHc4BfWe3udzyAIy2PhSOyABMbhTuyvYA7gAWcDzIwHD8yAA8AfKExsHIAJ5w6FzpANqRwWlB+Zy6+uiVqgC6yk2cacgA1HL+MabudoN2ICwp6hBayGUA1tbI2s3ICCAMWLgsBLlNExoIPAB0XAgA5sBzCwfY+P3kg+74BIpAA\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The problem is in line number 22 where typescript compiler complains about accessing a key that possibly does not exist after destructuring.</p>\n\n<p>Why does typescript think that the destructured variables could be of either of the types?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 3543, "user_id": 1010911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/465c08c1433b9836d8880bafc7463161?s=128&d=identicon&r=PG", "display_name": "Bjorn &#39;Bjeaurn&#39; S", "link": "https://stackoverflow.com/users/1010911/bjorn-bjeaurn-s"}, "edited": false, "score": 1, "creation_date": 1563954921, "post_id": 57177885, "comment_id": 100867510, "body": "Are you using <code>SVGElement</code> anywhere?"}, {"owner": {"reputation": 1177, "user_id": 1934308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c67237d79f37cae95e5fea5fa273e5fd?s=128&d=identicon&r=PG", "display_name": "Guy", "link": "https://stackoverflow.com/users/1934308/guy"}, "reply_to_user": {"reputation": 3543, "user_id": 1010911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/465c08c1433b9836d8880bafc7463161?s=128&d=identicon&r=PG", "display_name": "Bjorn &#39;Bjeaurn&#39; S", "link": "https://stackoverflow.com/users/1010911/bjorn-bjeaurn-s"}, "edited": false, "score": 0, "creation_date": 1563955124, "post_id": 57177885, "comment_id": 100867612, "body": "Yes, in d3 charts (d3 version is 3.5.x). I can try to upgrade d3, but I think they have some breaking changes, so not sure it will be easy."}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1563955271, "post_id": 57177885, "comment_id": 100867676, "body": "Are you using them in <i>your</i> code?"}, {"owner": {"reputation": 1177, "user_id": 1934308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c67237d79f37cae95e5fea5fa273e5fd?s=128&d=identicon&r=PG", "display_name": "Guy", "link": "https://stackoverflow.com/users/1934308/guy"}, "edited": false, "score": 0, "creation_date": 1563955546, "post_id": 57177885, "comment_id": 100867806, "body": "I&#39;m using SVG, but not SVGElement as a typed object somewhere. I have no declaration of an object of type SVGElement in my code."}, {"owner": {"reputation": 603, "user_id": 10916580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b8Ksl.png?s=128&g=1", "display_name": "Robin Webb", "link": "https://stackoverflow.com/users/10916580/robin-webb"}, "edited": false, "score": 0, "creation_date": 1563957388, "post_id": 57177885, "comment_id": 100868786, "body": "Radical approach - Have you tried removing node_modules folder and make sure you don&#39;t have multiple node_modules folders? You could even try removing package-lock.json. Try fresh npm install. Sorry this isn&#39;t a particularly technical answer but it might help?"}, {"owner": {"reputation": 1177, "user_id": 1934308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c67237d79f37cae95e5fea5fa273e5fd?s=128&d=identicon&r=PG", "display_name": "Guy", "link": "https://stackoverflow.com/users/1934308/guy"}, "edited": false, "score": 0, "creation_date": 1563960486, "post_id": 57177885, "comment_id": 100870429, "body": "It fails not only locally, but also in our build server. The build server works with the most updated package.json and does npm install, And also locally, I deleted node_modules and started npm install (no package.lock). The error is still there, both locally and in the build server."}], "owner": {"reputation": 1177, "user_id": 1934308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c67237d79f37cae95e5fea5fa273e5fd?s=128&d=identicon&r=PG", "display_name": "Guy", "link": "https://stackoverflow.com/users/1934308/guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563954816, "creation_date": 1563954816, "last_edit_date": 1592644375, "question_id": 57177885, "link": "https://stackoverflow.com/questions/57177885/compilation-error-after-upgrading-to-typescript-3-1-6-or-higher", "title": "Compilation error after upgrading to TypeScript 3.1.6 (or higher)", "body": "<p>During the upgrade to Angular 7 (in a hybrid project of AngularJS and Angular), TypeScript was upgraded to version 3.1.6.</p>\n<p>A compilation error has occurred:</p>\n<blockquote>\n<p>TS2320: Interface 'SVGElement' cannot simultaneously extend types\n'Element' and 'SVGElementInstance'.</p>\n<p>Named property 'getBoundingClientRect' of types 'Element' and\n'SVGElementInstance' are not identical.</p>\n</blockquote>\n<p>Tried to upgrade Typescript to the latest version (currently 3.5.3), and had the same error.</p>\n<p>Any suggestions?</p>\n<p>Do I have another npm package that conflicts with TypeScript? And if so, how can I know which package is it?</p>\n<blockquote>\n<p>Angular version: 7.2.15</p>\n<p>AngularJS version: 1.5.x</p>\n<p>TypeScript version: 3.1.x and higher</p>\n<p>rxjs version: 6.5.2</p>\n</blockquote>\n"}, {"tags": ["javascript", "typescript", "date"], "comments": [{"owner": {"reputation": 309, "user_id": 7514990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e545a7e5776abf9a3881d4c4d1fb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikail Bayram", "link": "https://stackoverflow.com/users/7514990/mikail-bayram"}, "edited": false, "score": 0, "creation_date": 1563954712, "post_id": 57177815, "comment_id": 100867419, "body": "This question is similar to: <a href=\"https://stackoverflow.com/questions/17528340/ios-vs-android-different-dates-displayed-for-the-same-program\" title=\"ios vs android different dates displayed for the same program\">stackoverflow.com/questions/17528340/&hellip;</a>."}, {"owner": {"reputation": 318, "user_id": 7713720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77a420e8227f865d6d20b300c2c0b321?s=128&d=identicon&r=PG&f=1", "display_name": "zerk", "link": "https://stackoverflow.com/users/7713720/zerk"}, "reply_to_user": {"reputation": 309, "user_id": 7514990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e545a7e5776abf9a3881d4c4d1fb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikail Bayram", "link": "https://stackoverflow.com/users/7514990/mikail-bayram"}, "edited": false, "score": 0, "creation_date": 1563954865, "post_id": 57177815, "comment_id": 100867482, "body": "Thanks, @MikailBayram, I will look into that question."}, {"owner": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1563954879, "post_id": 57177815, "comment_id": 100867492, "body": "I think it&#39;s an XY problem. You should ask yourself whether it&#39;s the correct approach to use that format specifically, since due to the format itself, some informations are lost (like the timezone). I personally would recommend you to use a completer format instead, like an ISO string, easier to parse in both environments that just <b>can&#39;t</b> be interpreted differently across environments and devices."}, {"owner": {"reputation": 34040, "user_id": 1346234, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/2y3FX.png?s=128&g=1", "display_name": "Justinas", "link": "https://stackoverflow.com/users/1346234/justinas"}, "edited": false, "score": 0, "creation_date": 1563955021, "post_id": 57177815, "comment_id": 100867565, "body": "Does your iPhone and Android devices has same time zone? JS Date uses user device date and locale"}, {"owner": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "edited": false, "score": 0, "creation_date": 1563960803, "post_id": 57177815, "comment_id": 100870604, "body": "HH:MM DD-MM-YYYY is not a format supported by ECMA-262, so parsing is implementation dependent. You might get a correct parse, incorrect parse or invalid date, with different results in different hosts. All are compliant. Either write your own parser function (not difficult if the format is known and fixed) or use a library, there are plenty available."}], "owner": {"reputation": 318, "user_id": 7713720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77a420e8227f865d6d20b300c2c0b321?s=128&d=identicon&r=PG&f=1", "display_name": "zerk", "link": "https://stackoverflow.com/users/7713720/zerk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1563960753, "answer_count": 0, "score": 0, "last_activity_date": 1563954559, "creation_date": 1563954559, "question_id": 57177815, "link": "https://stackoverflow.com/questions/57177815/iphone-previews-other-date-then-android-device", "closed_reason": "Duplicate", "title": "Iphone previews other date then android device", "body": "<p>Currently, I am developing a website for the company I work for. \nI am facing one issue at the moment, I have tested my local project on my computer, an android device, and an iPhone.</p>\n\n<p><strong>The problem</strong></p>\n\n<p>I am getting a Date object from the back-end (written in C#). I am trying to parse this to the following string: \"HH:MM  DD-MM-YYYY\".</p>\n\n<p>The method I have written does the job but for some reason, the time on my iPhone is two hours further than the time on my computer or android phone.</p>\n\n<p><strong>Code I am using to parse Date to string</strong></p>\n\n<pre><code>let dateObject;\n\n// InitialCreationDateTime contains the DateTime object that I have received from the back-end\nif (this.initialCreationDateTime != null) {\n  dateObject = new Date(this.initialCreationDateTime);\n} else {\n  dateObject = new Date();\n}\n\n// InitialCreationDateTime is nothing more then a string variable to store the final date string\nthis.initialCreationDateTimeString = dateObject.getHours() + ':' + ((dateObject.getMinutes() &lt; 10 ? '0' : '') + dateObject.getMinutes()) + '\\xa0\\xa0' + dateObject.getDate() + '-' + (dateObject.getMonth() + 1) + '-' + dateObject.getFullYear();\n</code></pre>\n\n<p><strong>Devices I have used for testing</strong></p>\n\n<ul>\n<li>Huawei P20</li>\n<li>iPhone 5</li>\n</ul>\n\n<p>I hope that my problem is clear, if not, do not hesitate to ask me for more information.</p>\n\n<p>I hope someone can give me some insight/advice.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["typescript", "npm", "alias"], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 8606839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb14c2effd9dab309949e992e6312ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Monbrey", "link": "https://stackoverflow.com/users/8606839/monbrey"}, "edited": false, "score": 0, "creation_date": 1605668040, "post_id": 57177750, "comment_id": 114719631, "body": "Is there a suggest approach on how to address this when the typing are bundles with the package?"}], "tags": [], "owner": {"reputation": 282, "user_id": 3432106, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Cu8oO.jpg?s=128&g=1", "display_name": "wopolow", "link": "https://stackoverflow.com/users/3432106/wopolow"}, "is_accepted": false, "score": 0, "last_activity_date": 1563955282, "last_edit_date": 1563955282, "creation_date": 1563954333, "answer_id": 57177750, "question_id": 57177749, "link": "https://stackoverflow.com/questions/57177749/npm-package-aliases-and-typescript-definition-files/57177750#57177750", "title": "NPM package aliases and Typescript definition files", "body": "<p>One solution I've come up with is copying <code>@types/package-name</code> into <code>@types/package-alias</code>, run after postinstall npm script. Maybe it'll get automated overtime.</p>\n\n<p>EDIT: The better approach would be to just install <code>@types</code> in specified version, aliased as well. </p>\n\n<p><code>npm install @types/package-alias@npm:@types/package@1.0.0</code></p>\n"}], "owner": {"reputation": 282, "user_id": 3432106, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Cu8oO.jpg?s=128&g=1", "display_name": "wopolow", "link": "https://stackoverflow.com/users/3432106/wopolow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563955282, "creation_date": 1563954333, "question_id": 57177749, "link": "https://stackoverflow.com/questions/57177749/npm-package-aliases-and-typescript-definition-files", "title": "NPM package aliases and Typescript definition files", "body": "<p>I have a package that I need in two separate versions - luckily, as of npm 6.9.0 I can achieve that <a href=\"https://github.com/npm/rfcs/blob/latest/implemented/0001-package-aliases.md#detailed-explanation\" rel=\"nofollow noreferrer\">pretty easily</a>. </p>\n\n<p>The question is: the package has type definitions. But, if I create an alias for that package, i refer to it by the alias created - and the typings are not automatically detected because the name is changed. How can I achieve so it's auto-detected? </p>\n"}, {"tags": ["angular", "typescript", "observable"], "comments": [{"owner": {"reputation": 5261, "user_id": 858757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMQgQ.png?s=128&g=1", "display_name": "Silvermind", "link": "https://stackoverflow.com/users/858757/silvermind"}, "edited": false, "score": 0, "creation_date": 1563954591, "post_id": 57177747, "comment_id": 100867353, "body": "Is your question: &quot;How do I read data from a <code>concat</code> response?"}, {"owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "reply_to_user": {"reputation": 5261, "user_id": 858757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMQgQ.png?s=128&g=1", "display_name": "Silvermind", "link": "https://stackoverflow.com/users/858757/silvermind"}, "edited": false, "score": 0, "creation_date": 1563955141, "post_id": 57177747, "comment_id": 100867618, "body": "@Silvermind I would like to get accessoire$, variante$ and affaire$ values at each loop iteration"}, {"owner": {"reputation": 5261, "user_id": 858757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMQgQ.png?s=128&g=1", "display_name": "Silvermind", "link": "https://stackoverflow.com/users/858757/silvermind"}, "edited": false, "score": 0, "creation_date": 1563977007, "post_id": 57177747, "comment_id": 100880040, "body": "You mean you want them before the next loop starts? It&#39;s a bit vague what you want. Can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a> demonstrating the problem?"}], "owner": {"reputation": 75, "user_id": 11703452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--SAagd6FTe8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcfwt7VeH-3SbCJ1Mn5h2lEW62Jw/photo.jpg?sz=128", "display_name": "Maxime Alza", "link": "https://stackoverflow.com/users/11703452/maxime-alza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563960759, "creation_date": 1563954313, "last_edit_date": 1563960759, "question_id": 57177747, "link": "https://stackoverflow.com/questions/57177747/how-to-concat-observable-values-in-the-desired-order-instead-of-all-the-values-o", "title": "How to concat observable values in the desired order instead of all the values of each one separately?", "body": "<p>I have a for each loop in which I create three observable, each of them call an API, with a parameter returned by my loop.</p>\n\n<p>I would like to successively get the first value of my first observable, next the first value of my second observable, and next the first value of my third observable. After that, the second value of my first observable, etc...</p>\n\n<p>Here, with the concat function, I get all the value from the first observable, after all the value from the second observable, and finally all the value from the third observable.</p>\n\n<p>Which function do I have to use to achieve it?</p>\n\n<pre><code>ngOnInit(): void {\n\n    this.serviceData.currentService.subscribe(service =&gt;\n        this.serviceFam.getAllFamilles().pipe(\n          switchMap(familles =&gt;\n            forkJoin( \n              familles.map(f =&gt; forkJoin(\n                this.serviceAffecter.getAffecterServiceFamille(service, f.nom),\n                this.serviceOpe.getOperationsServiceFamille(service, f.nom)\n                ).pipe(\n                map(([listAffecter, listeOperations]) =&gt; [f, listAffecter, listeOperations])\n                )\n              )\n            )\n          )\n        ).subscribe((data: [Famille, Affecter, Operation][]) =&gt; {\n          this.familles = data.map(d =&gt; d[0]);\n          for (let d of data) {\n            const f = d[0];\n            this.listeAffecter = d[1];\n            this.listeOperations = d[2];\n            for (let a of this.listeAffecter) {\n             //Here is where I concat my observables\n              var accessoire$ = this.serviceAccessoire.getAccessoireByIdAffaire(a.affaire.id);\n              var variante$ = this.serviceVar.getVarianteByIdAffaire(a.affaire.id);\n              var affaire$ = this.serviceAffaire.getAffaireById(a.affaire.id);\n              var combined$ = concat(accessoire$, variante$, affaire$)\n              combined$.subscribe(data =&gt;\n                //And data is what is returned by combined$\n                console.log(data),\n                this.points.push({\n                  \"value\": this.getTAT(a.dateEntree),\n                  \"name\": a.affaire.accessoire.nom + \" \" + f.nom +\n                    \" \" + a.affaire.variante.nom + \" \" + a.affaire.sn,\n                  \"operateur\": \"PERSONNE\",\n                  \"affaire\": a.id\n                })\n              );\n\n            }\n            for (let o of this.listeOperations){\n              this.points.forEach(function (arrayItem) {\n                if(o.affecter.id === arrayItem.affaire){\n                  arrayItem.operateur = o.operateur.id;\n                }\n              });\n            }\n            this.element = document.getElementById(f.nom) as HTMLElement;\n            this.element.innerText = \"\";\n            this.draw(\"#\" + f.nom, this.points, {dateDimension: false, color: \"teal\", labelFormat: \"%Y\"});\n            this.points.length = 0;\n            this.operation.length = 0;\n          }\n        }),\n      err =&gt; {\n        console.log(err);\n      });\n\n    this.serviceData.changeAffaire(4);\n  }\n</code></pre>\n\n<p>Please can anybody help me ? </p>\n"}, {"tags": ["typescript", "redux"], "comments": [{"owner": {"reputation": 1208, "user_id": 5521670, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-25AGpL5h4WA/AAAAAAAAAAI/AAAAAAAAAMo/IEAeMQ43ydI/photo.jpg?sz=128", "display_name": "\u0160imon Koc&#250;rek", "link": "https://stackoverflow.com/users/5521670/%c5%a0imon-koc%c3%barek"}, "edited": false, "score": 0, "creation_date": 1563954570, "post_id": 57177334, "comment_id": 100867342, "body": "Can you provide the code snippet, where you call your <code>setFetchingMenuItems</code> method? Also is updating Typescript version an option?"}], "answers": [{"comments": [{"owner": {"reputation": 64, "user_id": 11828604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sesxd.jpg?s=128&g=1", "display_name": "Nikomtis", "link": "https://stackoverflow.com/users/11828604/nikomtis"}, "edited": false, "score": 0, "creation_date": 1563954355, "post_id": 57177544, "comment_id": 100867224, "body": "Now I have this: <code>PayloadAction&lt;false | true&gt;</code>. But nothing changed. Error is the same."}], "tags": [], "owner": {"reputation": 1208, "user_id": 5521670, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-25AGpL5h4WA/AAAAAAAAAAI/AAAAAAAAAMo/IEAeMQ43ydI/photo.jpg?sz=128", "display_name": "\u0160imon Koc&#250;rek", "link": "https://stackoverflow.com/users/5521670/%c5%a0imon-koc%c3%barek"}, "is_accepted": false, "score": 0, "last_activity_date": 1563953614, "creation_date": 1563953614, "answer_id": 57177544, "question_id": 57177334, "link": "https://stackoverflow.com/questions/57177334/why-boolean-becomes-false-true-in-payloadaction-in-redux-starter-kit/57177544#57177544", "title": "Why &quot;boolean&quot; becomes &quot;false &amp; true&quot; in PayloadAction in redux-starter-kit?", "body": "<p>The expansion to <code>true | false</code> seems to be an <a href=\"https://github.com/Microsoft/TypeScript/issues/30029\" rel=\"nofollow noreferrer\">active issue</a> with Typescript. What seems strange is that it's expanded to <code>false &amp; true</code> instead of <code>false | true</code>.</p>\n\n<p>To fix your problem you could try replacing <code>boolean</code> with <code>false | true</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 11828604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sesxd.jpg?s=128&g=1", "display_name": "Nikomtis", "link": "https://stackoverflow.com/users/11828604/nikomtis"}, "is_accepted": true, "score": 2, "last_activity_date": 1563957198, "creation_date": 1563957198, "answer_id": 57178587, "question_id": 57177334, "link": "https://stackoverflow.com/questions/57177334/why-boolean-becomes-false-true-in-payloadaction-in-redux-starter-kit/57178587#57178587", "title": "Why &quot;boolean&quot; becomes &quot;false &amp; true&quot; in PayloadAction in redux-starter-kit?", "body": "<p>The problem was in redux-starter-kit (I had version 0.5.1). Version <a href=\"https://github.com/reduxjs/redux-starter-kit/releases/tag/v0.6.0\" rel=\"nofollow noreferrer\">0.6.0</a> fixes it. So I updated to 0.6.2 and now it works.</p>\n"}], "owner": {"reputation": 64, "user_id": 11828604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sesxd.jpg?s=128&g=1", "display_name": "Nikomtis", "link": "https://stackoverflow.com/users/11828604/nikomtis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 57178587, "answer_count": 2, "score": 2, "last_activity_date": 1563957198, "creation_date": 1563952853, "last_edit_date": 1563955014, "question_id": 57177334, "link": "https://stackoverflow.com/questions/57177334/why-boolean-becomes-false-true-in-payloadaction-in-redux-starter-kit", "title": "Why &quot;boolean&quot; becomes &quot;false &amp; true&quot; in PayloadAction in redux-starter-kit?", "body": "<p>I am using redux-starter-kit in React project. I am trying to describe type of action payload in reducer in createSlice method.</p>\n\n<p>I have two reducers:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>setFetchingMenuItems: (\n  state: IPagesState,\n  { payload }: PayloadAction&lt;boolean&gt;\n) =&gt; {\n  state.isFetchingMenuItems = payload;\n},\nsetMenuItems: (\n  state: IPagesState,\n  { payload }: PayloadAction&lt;IMenuItemViewModel[]&gt;\n) =&gt; {\n  state.menuItems = payload;\n},\n</code></pre>\n\n<p>The second one works as expected. If I try to dispatch setMenuItems action, it accepts only array of IMenuItemViewModel.</p>\n\n<p>But if I try to dispatch setFetchingMenuItems action with true or false payload, TypeScript shows me error: \"TS2345: Argument of type 'false' is not assignable to parameter of type 'false &amp; true'.\"</p>\n\n<p>What I am missing?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Here is my async method where I dispatch actions:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const fetchMenuItems = () =&gt; async (\n  dispatch: Dispatch\n): Promise&lt;void&gt; =&gt; {\n  dispatch(setFetchingMenuItems(true));\n\n  try {\n    const { value } = await PageService.getMenuItems();\n\n    dispatch(setMenuItems(value));\n  } catch (e) {\n    console.log(e);\n  }\n\n  dispatch(setFetchingMenuItems(false));\n};\n</code></pre>\n\n<p>TypeScript version is 3.5.1.</p>\n"}, {"tags": ["angular", "typescript", "asynchronous", "callback"], "comments": [{"owner": {"reputation": 808, "user_id": 1446298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HahZK.jpg?s=128&g=1", "display_name": "Harsh kurra", "link": "https://stackoverflow.com/users/1446298/harsh-kurra"}, "edited": false, "score": 1, "creation_date": 1563953287, "post_id": 57177307, "comment_id": 100866687, "body": "It&#39;s better if u shared more code, well there are some basic mistake, first, you are declaring info without <code>this</code>, but you are trying to access <code>info</code> with <code>this</code> in next line,  <code>this.info</code> will create new info object in your context which I believe is some event handler, now if you try to access this.info when you remove the second you will get an error because there is not any <code>info</code> on <code>this</code> context, read <a href=\"https://tylermcginnis.com/this-keyword-call-apply-bind-javascript/\" rel=\"nofollow noreferrer\">tylermcginnis.com/this-keyword-call-apply-bind-javascript</a> &amp; <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a>"}, {"owner": {"reputation": 614, "user_id": 6284022, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/81c1a72cf14a5615035986eadaef6616?s=128&d=identicon&r=PG&f=1", "display_name": "active92", "link": "https://stackoverflow.com/users/6284022/active92"}, "reply_to_user": {"reputation": 808, "user_id": 1446298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HahZK.jpg?s=128&g=1", "display_name": "Harsh kurra", "link": "https://stackoverflow.com/users/1446298/harsh-kurra"}, "edited": false, "score": 0, "creation_date": 1563954399, "post_id": 57177307, "comment_id": 100867253, "body": "@Harshkurra I can&#39;t declare info with <code>this</code> in typescript."}, {"owner": {"reputation": 538, "user_id": 11363925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc765c8d4e5ca7f4f81abe7044e90693?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Rico", "link": "https://stackoverflow.com/users/11363925/luis-rico"}, "edited": false, "score": 0, "creation_date": 1563956809, "post_id": 57177307, "comment_id": 100868467, "body": "show where you  are calling previewInfo(infos)"}, {"owner": {"reputation": 614, "user_id": 6284022, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/81c1a72cf14a5615035986eadaef6616?s=128&d=identicon&r=PG&f=1", "display_name": "active92", "link": "https://stackoverflow.com/users/6284022/active92"}, "reply_to_user": {"reputation": 538, "user_id": 11363925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc765c8d4e5ca7f4f81abe7044e90693?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Rico", "link": "https://stackoverflow.com/users/11363925/luis-rico"}, "edited": false, "score": 0, "creation_date": 1563957166, "post_id": 57177307, "comment_id": 100868664, "body": "@LuisRico updated as per request."}, {"owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "edited": false, "score": 0, "creation_date": 1563958547, "post_id": 57177307, "comment_id": 100869419, "body": "better that you share a MVCE stackblitz here"}, {"owner": {"reputation": 614, "user_id": 6284022, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/81c1a72cf14a5615035986eadaef6616?s=128&d=identicon&r=PG&f=1", "display_name": "active92", "link": "https://stackoverflow.com/users/6284022/active92"}, "reply_to_user": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "edited": false, "score": 0, "creation_date": 1563959552, "post_id": 57177307, "comment_id": 100869957, "body": "@AkberIqbal <a href=\"https://stackblitz.com/edit/angular-ipyocr\" rel=\"nofollow noreferrer\">stackblitz requested</a>"}, {"owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "edited": false, "score": 0, "creation_date": 1563966131, "post_id": 57177307, "comment_id": 100873709, "body": "The issue is of asynchronous calls; when your loop finishes and these 2 lines are executed... by that time the <code>reader.onload</code> hadn&#39;t finished and therefore <code>this.info.push(temp);</code> didn&#39;t run and you see a blank in your console       console.log(this.info);     console.log(this.info[0]); //this is what i need"}, {"owner": {"reputation": 614, "user_id": 6284022, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/81c1a72cf14a5615035986eadaef6616?s=128&d=identicon&r=PG&f=1", "display_name": "active92", "link": "https://stackoverflow.com/users/6284022/active92"}, "reply_to_user": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "edited": false, "score": 0, "creation_date": 1563973950, "post_id": 57177307, "comment_id": 100878203, "body": "@AkberIqbal got it working. thanks so much."}], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "is_accepted": true, "score": 0, "last_activity_date": 1563968496, "creation_date": 1563968496, "answer_id": 57182091, "question_id": 57177307, "link": "https://stackoverflow.com/questions/57177307/angular-declaring-array-of-objects-in-typescript/57182091#57182091", "title": "Angular: Declaring array of objects in Typescript", "body": "<p>The issue is of asynchronous calls; </p>\n\n<p>When your loop finishes and these 2 lines are executed... by that time the <code>reader.onload</code> hadn't finished and therefore <code>this.info.push(temp);</code> didn't run and you see a blank in your console when you run these 2 lines below:</p>\n\n<pre><code>console.log(this.info);\nconsole.log(this.info[0]); //this is what i need\n</code></pre>\n\n<p>What we need to do is to let the loop finish, and in the very last iteration (where <code>i == infos.length - 1</code>) of the loop... we print the values on the console and get the correct result;</p>\n\n<p>relevant <strong>TS</strong>:</p>\n\n<pre><code>import { Component } from '@angular/core';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\n\nexport class AppComponent {\n\n  //Variable declaration\n  attachments = [];\n  info = [];\n\n  onFileSelected(event) {\n    this.attachments = [];\n    for (var index = 0; index &lt; event.target.files.length; index++) {\n      var file = event.target.files[index];\n      this.attachments.push(file);\n    }\n    if (this.attachments.length &gt; 0) {\n      this.previewInfo(this.attachments);\n      console.log('caller', this.attachments);\n    }\n  }\n\n  previewInfo(infos) {\n    this.info = [];\n    if (infos) {\n      for (let i = 0; i &lt; infos.length; i++) {\n        let reader = new FileReader();\n        reader.onload = (e: any) =&gt; {\n          let temp = {\n            id: i,\n            url: e.target.result,\n            message: \"\",\n          }\n          //console.log(temp);\n          if (i == infos.length - 1) {\n            this.pusher(temp, true);\n          } else {\n            this.pusher(temp, false);\n          }\n          //this.info.push(temp, function(){ console.log('pushed'); } );\n        }\n        reader.readAsDataURL(infos[i]);\n      }\n      console.log('empty: ', this.info);\n      console.log('empty: ', this.info[0]); //this is what i need\n    }\n  }\n\n  pusher(tempFile, lastFile) {\n    this.info.push(tempFile);\n    if (lastFile == true) {\n      console.log('Correct Filled: ', this.info.length);\n      console.log('Correct Filled: ', this.info[0]); //this is what i need\n    }\n  }\n\n}\n</code></pre>\n\n<p>complete <a href=\"https://stackblitz.com/edit/angular-c6vs4d\" rel=\"nofollow noreferrer\">working stackblitz here</a></p>\n"}, {"tags": [], "owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "is_accepted": false, "score": 1, "last_activity_date": 1563974351, "last_edit_date": 1563974351, "creation_date": 1563972905, "answer_id": 57183478, "question_id": 57177307, "link": "https://stackoverflow.com/questions/57177307/angular-declaring-array-of-objects-in-typescript/57183478#57183478", "title": "Angular: Declaring array of objects in Typescript", "body": "<p>Akber Iqbal's answer works, but their solution does not guarantee that the files are in the same order as the <code>attachments</code> array, so</p>\n\n<p>here is a solution, if there is an importance of that the <code>info</code> items are in the same order as the files in the <code>attachments</code> array. You are looking for the first item, so maybe it is important. We can use Promises and <code>async/await</code>:</p>\n\n\n\n<pre class=\"lang-ts prettyprint-override\"><code>async onFileSelected(event) {\n  this.attachments = [];\n  this.info = [];\n\n  for (let index = 0; index &lt; event.target.files.length; index++) {\n    let file = event.target.files[index];\n    this.attachments.push(file);\n  }\n\n  if (this.attachments.length &gt; 0) {\n    for (let i = 0; i &lt; this.attachments.length; i++) {\n      try {\n        // wait that the file has been processed before moving on to next file\n        let temp = await this.readFile(this.attachments[i], i);\n        this.info.push(temp)\n\n        if (this.attachments.length === this.info.length) {\n          // here we have the first item after all files has been completed\n          console.log(this.info[0])\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>And processing the file from the <code>for</code>-loop here, by passing the file and the index and returning the temp file:</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>readFile(file, i) {\n  return new Promise((resolve, reject) =&gt; {\n    let reader = new FileReader();\n\n    reader.onload = (e: any) =&gt; {\n      let temp = {\n        id: i,\n        url: e.target.result,\n        message: file.name, // for testing I put the file name as message\n      }\n      resolve(temp);\n    };\n    reader.readAsDataURL(file)\n  })\n}\n</code></pre>\n\n<p><strong>DEMO: <a href=\"https://stackblitz.com/edit/angular-pthuaj?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">StackBlitz</a></strong></p>\n"}], "owner": {"reputation": 614, "user_id": 6284022, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/81c1a72cf14a5615035986eadaef6616?s=128&d=identicon&r=PG&f=1", "display_name": "active92", "link": "https://stackoverflow.com/users/6284022/active92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2608, "favorite_count": 1, "accepted_answer_id": 57182091, "answer_count": 2, "score": 0, "last_activity_date": 1563974351, "creation_date": 1563952776, "last_edit_date": 1563968628, "question_id": 57177307, "link": "https://stackoverflow.com/questions/57177307/angular-declaring-array-of-objects-in-typescript", "title": "Angular: Declaring array of objects in Typescript", "body": "<p>I'm trying to declare an array of object in Typescript. However, I'm facing error retrieving the object. Below is my code. Image shows output of <code>this.attachments</code>.</p>\n\n<pre><code>info: Info[];\n\nif (this.attachments.length &gt; 0) {\n  this.previewInfo(this.attachments);\n}\n\npreviewInfo(infos) {\n  this.info = [];\n  for (let i = 0; i &lt; infos.length; i++) {\n    let reader = new FileReader();\n    reader.onload = (e: any) =&gt; {\n      var temp = new Info;\n      temp = {\n        id: i,\n        url: e.target.result,\n        message: \"\"\n      }\n      this.info.push(temp);\n    }\n    reader.readAsDataURL(infos[i]);\n  }\n}\n</code></pre>\n\n<p>The result I get contains an empty array in front which looks like this.</p>\n\n<pre><code>[]0: {id: 0, url: \"test1\", message: \"\"}\n1: {id: 1, url: \"test2\", message: \"\"}\n2: {id: 2, url: \"test3\", message: \"\"}\n</code></pre>\n\n<p>This causes undefined when I try to retrieve them using </p>\n\n<pre><code>this.info[0]\n</code></pre>\n\n<p>If I skip the second line which is <code>this.info=[]</code>, I'm getting an error which says</p>\n\n<blockquote>\n  <p>Cannot read property '0' of undefined</p>\n</blockquote>\n\n<p>Did I declare it wrongly? How can I retrieve info by index?</p>\n\n<p><a href=\"https://i.stack.imgur.com/H7E1h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H7E1h.png\" alt=\"Image shows output of &lt;code&gt;this.attachments&lt;/code&gt;\"></a></p>\n"}, {"tags": ["angular", "reactjs", "typescript", "redux", "ngrx"], "comments": [{"owner": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 0, "creation_date": 1563960424, "post_id": 57177286, "comment_id": 100870396, "body": "You want to get the data in the component or in the view ?"}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "reply_to_user": {"reputation": 14359, "user_id": 11487196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4493b1f4bc88550d52d4556bc74c096?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ngo", "link": "https://stackoverflow.com/users/11487196/tony-ngo"}, "edited": false, "score": 0, "creation_date": 1563961372, "post_id": 57177286, "comment_id": 100870914, "body": "in component. I want to modify the data first and set the property value of the component."}, {"owner": {"reputation": 1776, "user_id": 9011723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20385cc990720ff64499b9de3b52fc70?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Ghignatti", "link": "https://stackoverflow.com/users/9011723/jo%c3%a3o-ghignatti"}, "edited": false, "score": 0, "creation_date": 1564006652, "post_id": 57177286, "comment_id": 100893355, "body": "I think we&#39;re missing some links here. Your first question is if there&#39;s an instant get to the store. Would be better to create another question on why your selector is not working properly and provide more code. Are you using effects for that dispatched action? Do you have only a reducer?"}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1564019696, "post_id": 57177286, "comment_id": 100895691, "body": "I am only using reducers till now. Here is the link of another question. <a href=\"https://stackoverflow.com/questions/57182646/how-to-get-the-correct-slice-data-using-selectors-for-multiple-pieces-of-state-a\" title=\"how to get the correct slice data using selectors for multiple pieces of state a\">stackoverflow.com/questions/57182646/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563957170, "post_id": 57178172, "comment_id": 100868666, "body": "Now the question is that if I need a single property from the user slice like &quot;user.image&quot; then I need to create the selector for each property."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1563958370, "post_id": 57178172, "comment_id": 100869320, "body": "I am also facing an issue with selects. I updated the question, please check that."}, {"owner": {"reputation": 1776, "user_id": 9011723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20385cc990720ff64499b9de3b52fc70?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Ghignatti", "link": "https://stackoverflow.com/users/9011723/jo%c3%a3o-ghignatti"}, "reply_to_user": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1564006711, "post_id": 57178172, "comment_id": 100893367, "body": "Consider my last comment, I&#39;d be glad to help on your new question. Please, provide some code. If you can, place the new question link here so I can try and help you."}, {"owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "edited": false, "score": 0, "creation_date": 1564129586, "post_id": 57178172, "comment_id": 100936706, "body": "Sure, here is the link of another question. <a href=\"https://stackoverflow.com/questions/57182646/how-to-get-the-correct-slice-data-using-selectors-for-multiple-pieces-of-state-a\" title=\"how to get the correct slice data using selectors for multiple pieces of state a\">stackoverflow.com/questions/57182646/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1776, "user_id": 9011723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20385cc990720ff64499b9de3b52fc70?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Ghignatti", "link": "https://stackoverflow.com/users/9011723/jo%c3%a3o-ghignatti"}, "is_accepted": false, "score": 1, "last_activity_date": 1563955723, "creation_date": 1563955723, "answer_id": 57178172, "question_id": 57177286, "link": "https://stackoverflow.com/questions/57177286/equivalent-to-getstate-method-of-react-redux-in-ngrx-angular-6-ngrx-6/57178172#57178172", "title": "Equivalent to getState() method of react-redux in ngrx | Angular 6 | ngrx 6", "body": "<p>Yes, NgRx has no instant <code>get()</code> method to access a slice of your store. I couldn't find it, but there's an issue on GitHub where they said that on the first version they had it, but people weren't using it correctly, so they removed and now you only get Observables.</p>\n\n<p>Your</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.store.pipe(select(fromRoot.selectUser)).subscribe(\n  user =&gt; this.user = user\n)\n</code></pre>\n\n<p>is correct. You just gotta remember to unsubscribe from it.</p>\n\n<p>If you can, there's no problem on storing the whole Observable, without having to subscribe on it. Angular has a async pipe so you can easily use Observables on your templates and you can always operate over that Observable and return a new Observable to your required needs.</p>\n\n<p>Ps: It's best to use <code>createSelector</code> method.</p>\n\n<pre><code>export const selectUser = createSelector(\n  selectAppState,\n  (state: AppState) =&gt; state.user;\n);\n</code></pre>\n"}], "owner": {"reputation": 1837, "user_id": 7182381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nDe2X.jpg?s=128&g=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/7182381/sachin-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563958329, "creation_date": 1563952693, "last_edit_date": 1563958329, "question_id": 57177286, "link": "https://stackoverflow.com/questions/57177286/equivalent-to-getstate-method-of-react-redux-in-ngrx-angular-6-ngrx-6", "title": "Equivalent to getState() method of react-redux in ngrx | Angular 6 | ngrx 6", "body": "<p>I have created an application using react and redux. In which I used getState() to get the state of the store and fetch the particular slice by destruction like this.</p>\n\n<pre><code>const { user } = getState();\n</code></pre>\n\n<p>Now I want to move to the application in angular 6. I installed ngrx v6.0. I read the documentation but I didn't find the method of getting the user slice.\nHowever, I think I can achieve the thing by creating a selector like this</p>\n\n<pre><code>export const selectUser = (state: AppState) =&gt; state.user;\n</code></pre>\n\n<p>But I need to subscribe that selector and get the user state like this.</p>\n\n<pre><code>this.store.pipe(select(fromRoot.selectUser)).subscribe(\n        user =&gt; this.user = user\n    )\n</code></pre>\n\n<p>Do I need to create a manual function like below?</p>\n\n<pre><code>function getState(store: Store&lt;State&gt;): State {\n    let state: State;\n\n    store.take(1).subscribe(s =&gt; state = s);\n\n    return state;\n} \n</code></pre>\n\n<p>Can someone provide the best solution for this or I miss something?</p>\n\n<p>I am also facing another problem with creating a selector. I dispatch an action with payload userData(which one is coming from API response)\nAppComponent@ngOnInit()\n    this.store.dispatch(new LoadUserAction(this.userData));</p>\n\n<p>But when I use the user selector for getting user slice of state in the feature module's component\nHomeComponent@ngOnInit()</p>\n\n<pre><code>this.store.pipe(select(fromRoot.selectUser)).subscribe(\n            user =&gt; this.user = user //user is same as intial not the updated one.\n\n        )\n</code></pre>\n\n<p>I didn't get the data at once. Always return the initial state.</p>\n\n<p>Do I need to use effects or placing some if conditions?</p>\n\n<p>Can someone explain to me how to perform another action after getting the correct data from the first selector?</p>\n"}, {"tags": ["typescript", "entity", "nestjs", "typeorm"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 11312009, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bXGxqbG5RBI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6ijZhlmOmY-Qj9IWky5yH3uF00g/mo/photo.jpg?sz=128", "display_name": "Thibault Burger", "link": "https://stackoverflow.com/users/11312009/thibault-burger"}, "is_accepted": false, "score": 1, "last_activity_date": 1564061443, "creation_date": 1564061443, "answer_id": 57203162, "question_id": 57177125, "link": "https://stackoverflow.com/questions/57177125/many-to-one-one-to-many-relation-column-not-showing-up-in-find-and-update-req/57203162#57203162", "title": "Many-To-One/ One-To-Many Relation column not showing up in find() and Update request not checking Foreign Key Constraint", "body": "<p>If you want the repository to include relations, you have to add a <code>relations</code> attribute to the repository's <code>find</code> method argument like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const usersWithPhotos = await this.userRepository.find({relations: ['photos']});\n</code></pre>\n\n<p>Another way to do this without having to explicitly define the included relations when calling the repository's <code>find</code> method would be to make an eager relation this way:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Entity()\nexport class User {\n\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  name: string;\n\n  @OneToMany(\n    type =&gt; Photo,\n    photo =&gt; photo.user,\n    {eager: true}\n  )\n  photos: Photo[];\n}\n</code></pre>\n\n<p>This will automatically include the <code>photos</code> relation when querying for users.</p>\n"}], "owner": {"reputation": 1, "user_id": 10211665, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MOCnOfCpZg4/AAAAAAAAAAI/AAAAAAAAeqc/UE4wb-8HjrI/photo.jpg?sz=128", "display_name": "Chriss Martin", "link": "https://stackoverflow.com/users/10211665/chriss-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1564061443, "creation_date": 1563952152, "question_id": 57177125, "link": "https://stackoverflow.com/questions/57177125/many-to-one-one-to-many-relation-column-not-showing-up-in-find-and-update-req", "title": "Many-To-One/ One-To-Many Relation column not showing up in find() and Update request not checking Foreign Key Constraint", "body": "<p>I have tried changing the name of the column.\nUsed the repository.find({select: ['id', 'name','ForeignRelation'],} ,but this throws error, that 3rd parameter is invalid.</p>\n\n<pre><code>import {Entity, PrimaryGeneratedColumn, Column, ManyToOne} from \"typeorm\";\nimport {User} from \"./User\";\n@Entity()\nexport class Photo {\n\n@PrimaryGeneratedColumn()\nid: number;\n\n@Column()\nurl: string;\n\n@ManyToOne(type =&gt; User, user =&gt; user.photos)\nuser: User;\n}\n\n\n\nimport {Entity, PrimaryGeneratedColumn, Column, OneToMany} from \"typeorm\";\nimport {Photo} from \"./Photo\";\n@Entity()\nexport class User {\n\n@PrimaryGeneratedColumn()\nid: number;\n\n@Column()\nname: string;\n\n@OneToMany(type =&gt; Photo, photo =&gt; photo.user)\nphotos: Photo[];\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 9552112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mr. Learner", "link": "https://stackoverflow.com/users/9552112/mr-learner"}, "edited": false, "score": 0, "creation_date": 1563950198, "post_id": 57176470, "comment_id": 100865159, "body": "Ha. Great. Let me try and come back"}], "tags": [], "owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563949384, "creation_date": 1563949384, "answer_id": 57176470, "question_id": 57176375, "link": "https://stackoverflow.com/questions/57176375/how-to-remove-particular-character-and-spcl-character-from-api-response-javasc/57176470#57176470", "title": "How to remove particular character and spcl character from API response - Javascript", "body": "<p>You are using <code>replace</code> function on <code>str</code> variable. Instead, you should use <code>sample</code> variable. And remove <code>/</code> from the beginning of the search string.</p>\n\n<pre><code>var sample = \"test data [sampleA:a][sampleB:b]\";\nvar removed = sample.replace('test data [sampleA:a][sampleB:b]','');\nconsole.log(removed);\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 9552112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mr. Learner", "link": "https://stackoverflow.com/users/9552112/mr-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563949384, "creation_date": 1563948951, "question_id": 57176375, "link": "https://stackoverflow.com/questions/57176375/how-to-remove-particular-character-and-spcl-character-from-api-response-javasc", "title": "How to remove particular character and spcl character from API response - Javascript", "body": "<p>Could some one tell me, how to get expected output for below combination of data.</p>\n\n<p>I'm having API response with properties like <code>someData: 'test data [sampleA:a][sampleB:b]'</code>.</p>\n\n<p>Here i want to remove whatever coming like this for few scenarios.</p>\n\n<p><strong>Actual:</strong></p>\n\n<p><code>someData: 'test data [sampleA:a][sampleB:b]' // applicable for few scenarios</code>.  </p>\n\n<p><strong>expected:</strong></p>\n\n<p><code>someData: ''</code></p>\n\n<p>it tried like below, but getting as its again.</p>\n\n<pre><code>var sample= \"test data [sampleA:a][sampleB:b]\";\nvar removed= str.replace('/test data [sampleA:a][sampleB:b]','');\nconsole.log(removed);\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 26417, "user_id": 10959940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe2af4009a4fe0acb46a707c8d5eab3?s=128&d=identicon&r=PG&f=1", "display_name": "wentjun", "link": "https://stackoverflow.com/users/10959940/wentjun"}, "edited": false, "score": 1, "creation_date": 1563948475, "post_id": 57176260, "comment_id": 100864490, "body": "Is there any particular reason why  you want to handle it as a promise, rather than an observable?"}, {"owner": {"reputation": 4439, "user_id": 1255819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9Cizi.png?s=128&g=1", "display_name": "distante", "link": "https://stackoverflow.com/users/1255819/distante"}, "edited": false, "score": 0, "creation_date": 1563948811, "post_id": 57176260, "comment_id": 100864621, "body": "What are the function signatures of <code>fileService.downloadResource</code> and <code>JSZip.loadAsync</code> ?"}, {"owner": {"reputation": 163341, "user_id": 314488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYzi5.jpg?s=128&g=1", "display_name": "Pranay Rana", "link": "https://stackoverflow.com/users/314488/pranay-rana"}, "edited": false, "score": 0, "creation_date": 1563949951, "post_id": 57176260, "comment_id": 100865058, "body": "try to await on promise as given in answer that might resolve your issue"}], "answers": [{"tags": [], "owner": {"reputation": 4439, "user_id": 1255819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9Cizi.png?s=128&g=1", "display_name": "distante", "link": "https://stackoverflow.com/users/1255819/distante"}, "is_accepted": true, "score": 3, "last_activity_date": 1563950289, "last_edit_date": 1563950289, "creation_date": 1563949782, "answer_id": 57176574, "question_id": 57176260, "link": "https://stackoverflow.com/questions/57176260/promise-within-observable-not-able-to-return-data/57176574#57176574", "title": "Promise within Observable: Not able to return data", "body": "<p>I am not sure why you use it as a promise so I have left everything as observables until the end.</p>\n\n<pre><code>async getJSONfromZip(zip_filename: string, json_filename: string) {\n    return this.fileService\n      .downloadResource(zip_filename)\n      .pipe(\n        switchMap(data =&gt; from(JSZip.loadAsync(data))), // make the promise a observable\n        map(zip =&gt; {\n          const fileNames = Object.keys(zip.files);\n          const fileExist = zipFiles.find( fileName =&gt; fileName === json_fileName);\n          if (fileExist) {\n            return zipFiles[fileName];\n          } else {\n            return undefined;\n          }\n        }),\n        filter(zipFile =&gt; zipFile), // do not process anything if the file is not found\n        switchMap(zipFile =&gt; from(zipFile.async('string')))\n      )\n      .toPromise();\n  }\n\nconst myJson = await getJSONfromZip('something.zip', 'json_name.json');\n</code></pre>\n\n<p>Be aware that your promise could never be full filled, if you need that then you should remove the filter and throw an exception or similar.</p>\n\n<p>I would recommend use it as observable instead of promise.</p>\n"}, {"tags": [], "owner": {"reputation": 163341, "user_id": 314488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aYzi5.jpg?s=128&g=1", "display_name": "Pranay Rana", "link": "https://stackoverflow.com/users/314488/pranay-rana"}, "is_accepted": false, "score": 1, "last_activity_date": 1563949800, "creation_date": 1563949800, "answer_id": 57176580, "question_id": 57176260, "link": "https://stackoverflow.com/questions/57176260/promise-within-observable-not-able-to-return-data/57176580#57176580", "title": "Promise within Observable: Not able to return data", "body": "<p>you are not awiting your promise that is problem here , it should be like this </p>\n\n<p>so you wait in function as below </p>\n\n<pre><code>async getJSONfromZip(zip_filename: string, json_filename: string) {\n    var promise = this.fileService.downloadResource(zip_filename)\n    .pipe(\n      map (async (data: any) =&gt; {\n        return JSZip.loadAsync(data)\n          .then((zip: any) =&gt; {\n            Object.keys(zip.files)\n            // iterate over all containing files\n            .forEach((filename) =&gt; {\n            // look for json file\n            if (filename === json_filename) {\n              return zip.files[filename].async('string')\n                .then((fileData: any) =&gt; {\n                  console.log(fileData);\n\n                  return fileData;\n              });\n            }\n          });\n      });\n    }))\n    .toPromise();\n\n     await promise;\n  }\n</code></pre>\n\n<p>or wait for function </p>\n\n<pre><code>var output = await getJSONfromZip(filename,jsongfilname);\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 10899944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc939f318c7a976de267acf5d176b38a?s=128&d=identicon&r=PG&f=1", "display_name": "Manuela", "link": "https://stackoverflow.com/users/10899944/manuela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 57176574, "answer_count": 2, "score": 1, "last_activity_date": 1563950289, "creation_date": 1563948368, "question_id": 57176260, "link": "https://stackoverflow.com/questions/57176260/promise-within-observable-not-able-to-return-data", "title": "Promise within Observable: Not able to return data", "body": "<p>I'm using Angular 7 and Typescript and I'm trying to read a json file within a zip file. I can print the correct json output on console, but I'm not able to return the json data from that function.\nI'm downloading the zip File using another service and an observable and within that observable I'm using a promise (that's what the JSZip library offers) to extract the zip file and read the data of my json file. The code of the function is as follows:</p>\n\n<p>extract-zip.service.ts:</p>\n\n<pre><code>async getJSONfromZip(zip_filename: string, json_filename: string) {\n    return this.fileService.downloadResource(zip_filename)\n    .pipe(\n      map (async (data: any) =&gt; {\n        return JSZip.loadAsync(data)\n          .then((zip: any) =&gt; {\n            Object.keys(zip.files)\n            // iterate over all containing files\n            .forEach((filename) =&gt; {\n            // look for json file\n            if (filename === json_filename) {\n              return zip.files[filename].async('string')\n                .then((fileData: any) =&gt; {\n                  console.log(fileData);\n\n                  return fileData;\n              });\n            }\n          });\n      });\n    }))\n    .toPromise();\n  }\n</code></pre>\n\n<p>It returns a Promise, but I want to return the content of the json file (fileData).\nHow can I do that? I tried converting it to Promise and also using and returning a class member variable, but nothing works.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 3836, "user_id": 4152153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s6Znl.png?s=128&g=1", "display_name": "dcg", "link": "https://stackoverflow.com/users/4152153/dcg"}, "edited": false, "score": 1, "creation_date": 1563947238, "post_id": 57176043, "comment_id": 100864006, "body": "Use the <code>map</code> operator."}], "answers": [{"tags": [], "owner": {"reputation": 977, "user_id": 2889673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c06ced94ab64e50b32c6791baf6efa9?s=128&d=identicon&r=PG&f=1", "display_name": "yanky_cranky", "link": "https://stackoverflow.com/users/2889673/yanky-cranky"}, "is_accepted": false, "score": 1, "last_activity_date": 1563947581, "creation_date": 1563947581, "answer_id": 57176101, "question_id": 57176043, "link": "https://stackoverflow.com/questions/57176043/json-responce-from-rest-as-string-in-angular/57176101#57176101", "title": "JSON responce from REST as string in Angular", "body": "<p>You can do this in two ways :</p>\n\n<p>1)  set request headers as :</p>\n\n<pre><code>'Content-Type', 'text/plain; charset=utf-8'\n</code></pre>\n\n<p>2) Transform your response in stringified format inside map operator</p>\n\n<pre><code>JSON.stringify(data);\n</code></pre>\n\n<p>Note for second. it will still be JSON but stringified</p>\n"}, {"tags": [], "owner": {"reputation": 3974, "user_id": 9764133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qcf47.jpg?s=128&g=1", "display_name": "ganesh045", "link": "https://stackoverflow.com/users/9764133/ganesh045"}, "is_accepted": true, "score": 1, "last_activity_date": 1563948051, "last_edit_date": 1563948051, "creation_date": 1563947722, "answer_id": 57176123, "question_id": 57176043, "link": "https://stackoverflow.com/questions/57176043/json-responce-from-rest-as-string-in-angular/57176123#57176123", "title": "JSON responce from REST as string in Angular", "body": "<blockquote>\n  <p>By default <strong><code>HttpClient</code></strong> will return <strong>JSON</strong> Object</p>\n</blockquote>\n\n<p>in your case you need to convert it to String. So do some changes like below,</p>\n\n<pre><code>getUIData(): Observable&lt;any&gt; {\n    const url = `${this.baseUrl}/uiData`;\n    return this.http.get&lt;any&gt;(url).map( response =&gt; JSON.stringify(response.data)).\n      catchError(this.handleError&lt;any&gt;('Get Data:');\n  }\n</code></pre>\n\n<p>as @dcg suggested use <code>map</code> instead of <code>pipe</code> to convert your response data to string in the Service method itself.</p>\n\n<p>I hope it helps :).</p>\n"}], "owner": {"reputation": 724, "user_id": 7962589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOsYs.png?s=128&g=1", "display_name": "Ismail", "link": "https://stackoverflow.com/users/7962589/ismail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57176123, "answer_count": 2, "score": 0, "last_activity_date": 1563948051, "creation_date": 1563947179, "question_id": 57176043, "link": "https://stackoverflow.com/questions/57176043/json-responce-from-rest-as-string-in-angular", "title": "JSON responce from REST as string in Angular", "body": "<p>I have a REST service in Angular which returns JSON response. I need to get the response as string to do some pattern matching and value replacement.</p>\n\n<p>I am using Angular 7. Below is my service.</p>\n\n<pre><code>getUIData(): Observable&lt;any&gt; {\n    const url = `${this.baseUrl}/uiData`;\n    return this.http.get&lt;any&gt;(url).pipe(\n      catchError(this.handleError&lt;any&gt;('Get Data:'))\n    );\n  }\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 5367, "user_id": 11011793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0p7CT.jpg?s=128&g=1", "display_name": "MoxxiManagarm", "link": "https://stackoverflow.com/users/11011793/moxximanagarm"}, "edited": false, "score": 0, "creation_date": 1563951001, "post_id": 57175993, "comment_id": 100865539, "body": "I think best practice would be to use a ngrx store"}], "owner": {"reputation": 1890, "user_id": 2672863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fff9eec4a5f15cfe58afeb3612813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Saqlain", "link": "https://stackoverflow.com/users/2672863/muhammad-saqlain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563947793, "creation_date": 1563946919, "question_id": 57175993, "link": "https://stackoverflow.com/questions/57175993/call-api-once-on-login-for-meta-data-and-store-as-enum-angular", "title": "Call API once on login for Meta Data and store as Enum Angular", "body": "<p>Need to know the best practice for requesting API once on login for Meta Data and store response objects as Enum in Typescript Angular.</p>\n\n<p>Should I use cache feature in <code>$http</code> module?</p>\n"}, {"tags": ["angular", "typescript", "visual-studio-code"], "comments": [{"owner": {"reputation": 1178, "user_id": 4292792, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/23Sw5.jpg?s=128&g=1", "display_name": "Carrm", "link": "https://stackoverflow.com/users/4292792/carrm"}, "edited": false, "score": 0, "creation_date": 1563947951, "post_id": 57175907, "comment_id": 100864278, "body": "I&#39;m not sure why you made your code this way and if you really need all the FormControl related stuff for something else later, but your code sample could be much easier to achieve the exact same thing. You should check ngModel as the answer below suggested it, but also check about the <code>change</code> event on input fields with angular. You don&#39;t actually need the Form related classes for this."}, {"owner": {"reputation": 11964, "user_id": 484390, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f96a856f907c0c05ca8d1213904d819?s=128&d=identicon&r=PG&f=1", "display_name": "What&#39;sUP", "link": "https://stackoverflow.com/users/484390/whatsup"}, "reply_to_user": {"reputation": 1178, "user_id": 4292792, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/23Sw5.jpg?s=128&g=1", "display_name": "Carrm", "link": "https://stackoverflow.com/users/4292792/carrm"}, "edited": false, "score": 0, "creation_date": 1563978324, "post_id": 57175907, "comment_id": 100880864, "body": "Do you have a sample or something similar that I can learn from your perspective?"}], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 6942155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YA7uu.jpg?s=128&g=1", "display_name": "Carlos Tenorio P&#233;rez", "link": "https://stackoverflow.com/users/6942155/carlos-tenorio-p%c3%a9rez"}, "is_accepted": true, "score": 1, "last_activity_date": 1563946956, "creation_date": 1563946956, "answer_id": 57176003, "question_id": 57175907, "link": "https://stackoverflow.com/questions/57175907/preseleced-check-icon-dont-show-in-console-log/57176003#57176003", "title": "Preseleced Check icon dont show in console log", "body": "<p>You should be use the <strong>ngModel</strong> property to bind the values.</p>\n\n<p>Instead this</p>\n\n<pre><code>[checked]=\"musicPreferences[i].checked\"\n</code></pre>\n\n<p>Use this</p>\n\n<pre><code>[ngModel]=\"musicPreferences[i].checked\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1178, "user_id": 4292792, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/23Sw5.jpg?s=128&g=1", "display_name": "Carrm", "link": "https://stackoverflow.com/users/4292792/carrm"}, "is_accepted": false, "score": 0, "last_activity_date": 1564126183, "creation_date": 1564126183, "answer_id": 57215148, "question_id": 57175907, "link": "https://stackoverflow.com/questions/57175907/preseleced-check-icon-dont-show-in-console-log/57215148#57215148", "title": "Preseleced Check icon dont show in console log", "body": "<p>Here is a fork of your stackblitz with some of the changes I was talking about in my comment:\n<a href=\"https://stackblitz.com/edit/angular-3uhecx\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-3uhecx</a></p>\n\n<p>I removed all the Form-related stuff from the component, and worked instead with <code>ngModel</code> and <code>change</code> event. I also simplified the <code>*ngFor</code> loop, you didn't need to keep track of the index for this.</p>\n\n<p>Again, I don't know what you intend to do with your form. FormBuilders are great and are the correct way to go if you have a complex form that need some sort of validation. If you only have that checkbox list, then I don't think you need something as complex as FormBuilders, you could work with ngModel and regular events like in my sample.</p>\n"}], "owner": {"reputation": 11964, "user_id": 484390, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f96a856f907c0c05ca8d1213904d819?s=128&d=identicon&r=PG&f=1", "display_name": "What&#39;sUP", "link": "https://stackoverflow.com/users/484390/whatsup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57176003, "answer_count": 2, "score": -1, "last_activity_date": 1564126183, "creation_date": 1563946516, "question_id": 57175907, "link": "https://stackoverflow.com/questions/57175907/preseleced-check-icon-dont-show-in-console-log", "title": "Preseleced Check icon dont show in console log", "body": "<p>Goal:<br>\nShow preselected data of selected checkbox in console.log  </p>\n\n<p>Problem:<br>\nThe preselected data don't show in the consolelog.<br>\nIf I make a manual check, the data will show.</p>\n\n<p>What part am I missing?  </p>\n\n<p>Info:<br>\nI'm new in angular  </p>\n\n<p>Thank you!  </p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-bfq9cu\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-bfq9cu</a></p>\n"}, {"tags": ["javascript", "node.js", "typescript", "zip"], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 4563339, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce489e6d3a761ed4b63346651b73f23?s=128&d=identicon&r=PG", "display_name": "bluelovers", "link": "https://stackoverflow.com/users/4563339/bluelovers"}, "edited": false, "score": 1, "creation_date": 1564048994, "post_id": 57177371, "comment_id": 100906729, "body": "looks like can&#39;t use <code>zip.folder(&quot;nested&quot;).file(&quot;hello.txt&quot;, &quot;Hello World\\n&quot;, options);</code> if use <code>zip.folder(&quot;nested&quot;)</code> , md5 will still change"}, {"owner": {"reputation": 17110, "user_id": 7237224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpIj6.png?s=128&g=1", "display_name": "Terry Lennox", "link": "https://stackoverflow.com/users/7237224/terry-lennox"}, "reply_to_user": {"reputation": 745, "user_id": 4563339, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce489e6d3a761ed4b63346651b73f23?s=128&d=identicon&r=PG", "display_name": "bluelovers", "link": "https://stackoverflow.com/users/4563339/bluelovers"}, "edited": false, "score": 0, "creation_date": 1564049594, "post_id": 57177371, "comment_id": 100907048, "body": "Yes, because it will create a folder in the zip directory with the timestamp, which will change the md5. You might be able to set the timestamp of the folder, but I don&#39;t think so. If you use zip.file(&quot;nested/hello.txt&quot;, &quot;Hello World\\n&quot;, options);, it should give the same result!"}, {"owner": {"reputation": 745, "user_id": 4563339, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce489e6d3a761ed4b63346651b73f23?s=128&d=identicon&r=PG", "display_name": "bluelovers", "link": "https://stackoverflow.com/users/4563339/bluelovers"}, "edited": false, "score": 1, "creation_date": 1564066233, "post_id": 57177371, "comment_id": 100916673, "body": "i make a pr <a href=\"https://github.com/Stuk/jszip/pull/610\" rel=\"nofollow noreferrer\">github.com/Stuk/jszip/pull/610</a> and a helper function for this <a href=\"https://github.com/bluelovers/ws-epub/blob/master/packages/jszip-fixed-date/index.ts\" rel=\"nofollow noreferrer\">github.com/bluelovers/ws-epub/blob/master/packages/&hellip;</a>"}], "tags": [], "owner": {"reputation": 17110, "user_id": 7237224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpIj6.png?s=128&g=1", "display_name": "Terry Lennox", "link": "https://stackoverflow.com/users/7237224/terry-lennox"}, "is_accepted": true, "score": 0, "last_activity_date": 1563952995, "creation_date": 1563952995, "answer_id": 57177371, "question_id": 57175871, "link": "https://stackoverflow.com/questions/57175871/how-to-make-jszip-generate-same-buffer/57177371#57177371", "title": "How to make jszip generate same buffer", "body": "<p>The problem is that the .zip archive entries created by JSZip will have file modification timestamps associated with them. This results in small differences (a couple of bytes usually) between files generated at different times. So we need to specify the file timestamps manually as well as ensuring we create only <em>virtual</em> folders in the .zip archive. </p>\n\n<p>This approach should work for you (giving the same MD5 hash each time): </p>\n\n<pre><code>import JSZip = require('jszip');\nimport crypto = require('crypto');\n\n// You must fix the date (set to the same value) so that the zip archive timestamps will be equal.\n// Also we must create virtual folders or they will be assigned timestamps too, resulting in a different hash.\nconst options = { date: new Date('2019-07-24 06:00:00Z'), createFolders: false};\nzip.file(\"hello.txt\", \"Hello World\\n\", options);\nzip.file(\"nested/hello.txt\", \"Hello World\\n\", options);\n\nzip.generateAsync({\n    type: 'nodebuffer',\n    mimeType: 'application/epub+zip',\n    compression: 'DEFLATE',\n    compressionOptions: {\n        level: 9\n    },\n})\n    .then(buf =&gt; {\n        const md5 = crypto.createHash('md5');\n        let result = md5.update(buf).digest('hex');\n        console.dir(result);\n    })\n;\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 4563339, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce489e6d3a761ed4b63346651b73f23?s=128&d=identicon&r=PG", "display_name": "bluelovers", "link": "https://stackoverflow.com/users/4563339/bluelovers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 57177371, "answer_count": 1, "score": 1, "last_activity_date": 1563952995, "creation_date": 1563946316, "question_id": 57175871, "link": "https://stackoverflow.com/questions/57175871/how-to-make-jszip-generate-same-buffer", "title": "How to make jszip generate same buffer", "body": "<p>Here is code</p>\n\n<pre><code>import JSZip = require('jszip');\nimport crypto = require('crypto');\n\nlet zip = new JSZip();\n\nzip.file(\"hello.txt\", \"Hello World\\n\");\nzip.folder(\"nested\").file(\"hello.txt\", \"Hello World\\n\");\n\nzip.generateAsync({\n    type: 'nodebuffer',\n    mimeType: 'application/epub+zip',\n    compression: 'DEFLATE',\n    compressionOptions: {\n        level: 9\n    },\n})\n    .then(buf =&gt; {\n        const md5 = crypto.createHash('md5');\n        let result = md5.update(buf).digest('hex');\n\n        console.dir(result);\n    })\n;\n</code></pre>\n\n<p>If run this code 2 time, will get diff md5</p>\n\n<p>How can i make it is same buffer when context is same</p>\n"}, {"tags": ["typescript", "ionic3"], "comments": [{"owner": {"reputation": 37, "user_id": 11823091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UKhqE7VupDg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbea_TO1MHKEy2v_TgzUAN0E1ygA/photo.jpg?sz=128", "display_name": "Qassim Ali", "link": "https://stackoverflow.com/users/11823091/qassim-ali"}, "reply_to_user": {"reputation": 19681, "user_id": 402037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc3b3667c918504550fd656ac50b87f?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/402037/andreas"}, "edited": false, "score": 0, "creation_date": 1563946980, "post_id": 57175818, "comment_id": 100863910, "body": "Is the title confusing? I am reading it as add 2 to the value of price every time the amount of hours goes up by 1."}, {"owner": {"reputation": 19681, "user_id": 402037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc3b3667c918504550fd656ac50b87f?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/402037/andreas"}, "edited": false, "score": 0, "creation_date": 1563947230, "post_id": 57175818, "comment_id": 100864002, "body": "Sorry, I haven&#39;t thought about it that way. But still... <code>Price</code> is twice the amount of <code>hours</code>. Why don&#39;t you use this correlation?"}, {"owner": {"reputation": 37, "user_id": 11823091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UKhqE7VupDg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbea_TO1MHKEy2v_TgzUAN0E1ygA/photo.jpg?sz=128", "display_name": "Qassim Ali", "link": "https://stackoverflow.com/users/11823091/qassim-ali"}, "reply_to_user": {"reputation": 19681, "user_id": 402037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc3b3667c918504550fd656ac50b87f?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/402037/andreas"}, "edited": false, "score": 0, "creation_date": 1563947303, "post_id": 57175818, "comment_id": 100864030, "body": "Yeah for some reason I did not notice that, made the problem seem way bigger in my head than it actually was. Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11823091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UKhqE7VupDg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbea_TO1MHKEy2v_TgzUAN0E1ygA/photo.jpg?sz=128", "display_name": "Qassim Ali", "link": "https://stackoverflow.com/users/11823091/qassim-ali"}, "edited": false, "score": 1, "creation_date": 1563947220, "post_id": 57176040, "comment_id": 100863999, "body": "I actually cannot believe I did not notice that thank you."}], "tags": [], "owner": {"reputation": 8859, "user_id": 1766444, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/BkIjo.png?s=128&g=1", "display_name": "Marek Urbanowicz", "link": "https://stackoverflow.com/users/1766444/marek-urbanowicz"}, "is_accepted": true, "score": 1, "last_activity_date": 1563947158, "creation_date": 1563947158, "answer_id": 57176040, "question_id": 57175818, "link": "https://stackoverflow.com/questions/57175818/how-to-add-2-to-a-value-every-time-another-value-goes-up-by-1/57176040#57176040", "title": "How to add 2 to a value every time another value goes up by 1?", "body": "<p>Solution is crazy simple.</p>\n\n<p>If you look at your code, you can easily see that the <strong>price is hours multipled by 2</strong>.</p>\n\n<p>Just use:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.Price = hours * 2;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11823091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UKhqE7VupDg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbea_TO1MHKEy2v_TgzUAN0E1ygA/photo.jpg?sz=128", "display_name": "Qassim Ali", "link": "https://stackoverflow.com/users/11823091/qassim-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 57176040, "answer_count": 1, "score": -1, "last_activity_date": 1563947158, "creation_date": 1563946041, "question_id": 57175818, "link": "https://stackoverflow.com/questions/57175818/how-to-add-2-to-a-value-every-time-another-value-goes-up-by-1", "title": "How to add 2 to a value every time another value goes up by 1?", "body": "<p>I am designing an app that offers some services and for every 1 hour you have to pay 2$. The least amount of time you can book is 3 hours(so starting price is 6$) and the highest is 8 hours, I am trying to write some code where It would check the amount of hours the user entered and output the price accordingly.</p>\n\n<p>I solved this by creating multiple if statements for each scenario from 3-8 but I am looking for a way to minimize the code.</p>\n\n<pre><code> if(hours == 3){\n        this.Price = 6;\n      } \n      if(hours == 4){\n        this.Price = 8;\n      } \n  .\n  .\n  .\n    if(hours == 8){\n        this.Price = 16;\n      } \n\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs", "rxjs5", "angular-httpclient"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1563947924, "post_id": 57175787, "comment_id": 100864266, "body": "Define &quot;not working&quot;, precisely. What are you doing, what do you  expect to happen, and what happens instead?"}, {"owner": {"reputation": 1, "user_id": 11828184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa52284977b4e7432420c1a1d15ca43b?s=128&d=identicon&r=PG&f=1", "display_name": "gsudheer", "link": "https://stackoverflow.com/users/11828184/gsudheer"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1563971288, "post_id": 57175787, "comment_id": 100876565, "body": "@JBNizet, Thank you for looking into it."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1563988617, "post_id": 57175787, "comment_id": 100886386, "body": "You didn&#39;t answer any of my questions. What are you doing, what do you expect to happen, and what happens instead?"}, {"owner": {"reputation": 1, "user_id": 11828184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa52284977b4e7432420c1a1d15ca43b?s=128&d=identicon&r=PG&f=1", "display_name": "gsudheer", "link": "https://stackoverflow.com/users/11828184/gsudheer"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1563998591, "post_id": 57175787, "comment_id": 100890702, "body": "I have updated my description, hope this explains your questions."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1564003083, "post_id": 57175787, "comment_id": 100892337, "body": "<i>The service is making http get call every time I reload the browser</i>: that&#39;s normal and expected: the cache is in the memory of your JavaScript application. When you refresh the browser, you restart from scratch: a new HTML page is loaded, and your application restarts. If you want something to be kept between browser refreshes, then you need to store it in a cookie, the session storage or the local storage. Not in memory."}, {"owner": {"reputation": 1, "user_id": 11828184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa52284977b4e7432420c1a1d15ca43b?s=128&d=identicon&r=PG&f=1", "display_name": "gsudheer", "link": "https://stackoverflow.com/users/11828184/gsudheer"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1564015783, "post_id": 57175787, "comment_id": 100895050, "body": "I request you to refer this blog.. <a href=\"https://blog.thoughtram.io/angular/2018/03/05/advanced-caching-with-rxjs.html\" rel=\"nofollow noreferrer\">blog.thoughtram.io/angular/2018/03/05/&hellip;</a> . Also here is the final solution which was mentioned in the blog - <a href=\"https://advanced-caching-with-rxjs-step-4.stackblitz.io\" rel=\"nofollow noreferrer\">advanced-caching-with-rxjs-step-4.stackblitz.io</a>. This is the one I&#39;m trying achieve."}, {"owner": {"reputation": 1, "user_id": 11828184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa52284977b4e7432420c1a1d15ca43b?s=128&d=identicon&r=PG&f=1", "display_name": "gsudheer", "link": "https://stackoverflow.com/users/11828184/gsudheer"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1564284895, "post_id": 57175787, "comment_id": 100977304, "body": "Thank you very much ! Understood your answer."}], "owner": {"reputation": 1, "user_id": 11828184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa52284977b4e7432420c1a1d15ca43b?s=128&d=identicon&r=PG&f=1", "display_name": "gsudheer", "link": "https://stackoverflow.com/users/11828184/gsudheer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564070920, "creation_date": 1563945917, "last_edit_date": 1564070920, "question_id": 57175787, "link": "https://stackoverflow.com/questions/57175787/angular-caching-in-http-request-is-not-cached-when-using-publishreplay-and-refco", "title": "angular caching in http request is not cached when using publishReplay and refCount rxjs operators", "body": "<p>I'm looking for an example on http request cache in angular >=6, I tried an example as well but some how its not working.</p>\n\n<p>Here is the sample code I tried but not working. <a href=\"https://stackblitz.com/edit/angular-jggfzh?embed=1&amp;file=src/app/app.component.html\" rel=\"nofollow noreferrer\">Stackblitz Code Example</a></p>\n\n<p>Any help will be much appreciated.</p>\n\n<p>@JBNizet, Thank you for looking into it. Here is the service code I have. </p>\n\n<p><strong>What I'm trying to do :</strong></p>\n\n<p>I wrote a sample code to test http cache request, I came to know that I can implement caching using publishReplay() and refCount() from rxjs.</p>\n\n<p><strong>Expected Behavior :</strong></p>\n\n<p>The service should make http get call only once.</p>\n\n<p><strong>Actual Behavior :</strong></p>\n\n<p>The service is making http get call every time I reload the browser.\nIf you observe the console.log statement in my service code, its printing every time undefined which I guess shouldn't.</p>\n\n<p><strong>Component :</strong></p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { HelloService } from './hello.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n\n  name = 'Angular';\n  test$: Observable&lt;String&gt;;\n  test: string = '';\n\n  constructor(private helloService: HelloService) { }\n\n  ngOnInit() {\n    this.helloService.test.subscribe(res =&gt; this.test = res);\n  }\n\n}\n\n</code></pre>\n\n<p><strong>Service :</strong></p>\n\n<pre><code>import { Injectable, OnDestroy } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { shareReplay, publishReplay, refCount, map } from 'rxjs/operators';\n\nconst API_ENDPOINT = 'https://api.icndb.com/jokes/random/';\n\n@Injectable()\nexport class HelloService {\n\n  private test$: Observable&lt;String&gt;;\n\n  constructor(private http: HttpClient) { }\n\n  get test(): Observable&lt;String&gt; {\n\n   console.log('Object Testing : ', this.test$); \\\\ First time the value is undefined which is expected, second time when I execute also coming as undefined.\n\n    if (!this.test$) {\n      this.test$ = this.requestService().pipe(\n        publishReplay(1),\n        refCount()\n      );\n    }\n    return this.test$;\n  }\n\n  private requestService(): Observable&lt;String&gt; {\n    return this.http.get(API_ENDPOINT).pipe(\n      map(response =&gt; response['type'])\n    );\n  }\n\n}\n\n</code></pre>\n"}, {"tags": ["typescript", "angular7"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11084503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qSidJHBh5s0/AAAAAAAAAAI/AAAAAAAAADo/I-wyUCOmsko/photo.jpg?sz=128", "display_name": "Basavarajayya Hiremath", "link": "https://stackoverflow.com/users/11084503/basavarajayya-hiremath"}, "is_accepted": false, "score": 0, "last_activity_date": 1563953954, "creation_date": 1563953954, "answer_id": 57177646, "question_id": 57175290, "link": "https://stackoverflow.com/questions/57175290/how-to-show-error-message-when-login-fails-in-angular-7/57177646#57177646", "title": "How to show error message when login fails in angular 7", "body": "<p>Return only below statement from your API call method.</p>\n\n<pre><code>  return this.http.post&lt;User&gt;(apiURL, credentailData, httpOptions);\n</code></pre>\n\n<p>And in your login.ts subscribe to HTTP call as follows and handle success and error messages.</p>\n\n<pre><code>this.authServiceObj.onLoginSubmit(logCredential).subscribe(data=&gt; {\n     this.setSessionObj(data);\n     console.log(data);\n     this.router.navigate(['home']); \n}, error =&gt; {\n     // use message in error object\n     // you can use Angular Material dialog to show message in the popup.\n     // to show message in the form, you can use a class variable and bind it to the template.\n}); \n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 6436209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3bbb653f3d9f03c6edafdfe1af131d7?s=128&d=identicon&r=PG&f=1", "display_name": "Krazy", "link": "https://stackoverflow.com/users/6436209/krazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2837, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1563953954, "creation_date": 1563942680, "question_id": 57175290, "link": "https://stackoverflow.com/questions/57175290/how-to-show-error-message-when-login-fails-in-angular-7", "title": "How to show error message when login fails in angular 7", "body": "<p>I have login page.When user enters wrong password ,server sends error response .How can I show the error message or login fails message in popup.Any Help</p>\n\n<p>//login .ts file</p>\n\n<pre><code>onLoginSubmit() {\n    this.submitted = true;\n    if (this.loginForm.invalid) {\n      return;\n    } else {\n      const logCredential = {\n        username: this.loginForm.get('username').value,\n        password: this.loginForm.get('password').value\n      };\n     this.authServiceObj.onLoginSubmit(logCredential);\n }\n</code></pre>\n\n<p>//html </p>\n\n<pre><code>&lt;div class=\"form-content\"&gt;\n    &lt;form [formGroup]=\"loginForm\" (ngSubmit)=\"onLoginSubmit()\"&gt;\n      &lt;h3&gt;LOG IN&lt;/h3&gt;\n      &lt;div class=\"form-controls\"&gt;\n        &lt;mat-form-field class=\"example-full-width\"&gt;\n          &lt;input matInput placeholder=\"Email\" type=\"email\" fo    rmControlName=\"username\"&gt;\n          &lt;mat-error *ngIf=\"submitted &amp;&amp; formControl.username.errors\"&gt;\n            &lt;mat-error *ngIf=\"formControl.username.errors.required\"&gt; * email required&lt;/mat-error&gt;\n\n          &lt;/mat-error&gt;\n        &lt;/mat-form-field&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-controls\"&gt;\n        &lt;mat-form-field&gt;\n          &lt;input matInput type=\"password\" placeholder=\"password\" formControlName=\"password\"&gt;\n          &lt;mat-error *ngIf=\"submitted &amp;&amp; formControl.password.errors\"&gt;\n            &lt;mat-error *ngIf=\"formControl.password.errors.required\"&gt; * password required&lt;/mat-error&gt;\n\n              &lt;/mat-error&gt;\n        &lt;/mat-form-field&gt;\n      &lt;/div&gt;\n      &lt;div&gt;\n         &lt;button mat-flat-button color=\"primary\"&gt;Log In&lt;/button&gt;\n      &lt;/div&gt;      \n    &lt;/form&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>//api call</p>\n\n<pre><code> return this.http.post&lt;User&gt;(apiURL, credentailData,      \n httpOptions).subscribe(\n       data =&gt; {\n         this.setSessionObj(data);\n         console.log(data);\n         this.router.navigate(['home']);\n       },\n       error =&gt; {\n         console.log('Error', error);\n\n       }\n     );\n</code></pre>\n\n<p>and also same case with adding details of user .when error is thrown from server.I have to show it in form</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 1494, "user_id": 3236706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6JCJ4.jpg?s=128&g=1", "display_name": "BlueWater86", "link": "https://stackoverflow.com/users/3236706/bluewater86"}, "edited": false, "score": 0, "creation_date": 1563937122, "post_id": 57174592, "comment_id": 100861630, "body": "It&#39;s very hard to answer this without seeing your code and all of the flag permutations."}, {"owner": {"reputation": 527, "user_id": 10308913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UXo7WHeloVQ/AAAAAAAAAAI/AAAAAAAACuc/zwKIh-V72MM/photo.jpg?sz=128", "display_name": "Ramya Selvaraj", "link": "https://stackoverflow.com/users/10308913/ramya-selvaraj"}, "edited": false, "score": 0, "creation_date": 1563938666, "post_id": 57174592, "comment_id": 100861886, "body": "Can you add your sample code with conditions?"}], "answers": [{"tags": [], "owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "is_accepted": false, "score": 0, "last_activity_date": 1563953060, "last_edit_date": 1563953060, "creation_date": 1563951206, "answer_id": 57176898, "question_id": 57174592, "link": "https://stackoverflow.com/questions/57174592/alternative-to-using-multiple-flags-to-show-hide-multiple-elements/57176898#57176898", "title": "Alternative to using multiple flags to show hide multiple elements", "body": "<p>There are a \"tecnique\" that is using binary operator. I try explain with an example</p>\n\n<p>Imagine you has an array like - I put in comments the value of index in binary-</p>\n\n<pre><code>data: any[] = [\n  {name:\"data1\",index:1},           //[00001]\n  {name:\"data2\",index:2},           //[00010]\n  {name:\"data3\",index:4},           //[00100]\n  {name:\"data4\",index:8},           //[01000]\n  {name:\"data5\",index:16},          //[10000]\n  {name:\"data1 or data 2\",index:3}, //[00011]\n  {name:\"data1 or data 3\",index:5}, //[00101]\n  {name:\"data3 or data 4\",index:12},//[01100]\n  ]\n</code></pre>\n\n<p>And a function</p>\n\n<pre><code>show(index,count) {\n    return index &amp; Math.pow(2,count)\n    //or, if we can that count=0 no show anything \n    //const binary=[0,1,2,4,8,16,32,64,128]\n    //return index &amp; binary[count]\n}\n</code></pre>\n\n<p>If we has an html like</p>\n\n<pre><code>&lt;ng-container *ngFor=\"let item of data\"&gt;\n  &lt;div *ngIf=\"show(item.index,count)\"&gt;{{item.name}}&lt;/div&gt;\n&lt;/ng-container&gt;\n&lt;button (click)=\"count=count+1\"&gt;click&lt;/button&gt;\n</code></pre>\n\n<p>You see that, e.g. if count=2, Math.pow(2,2)=4 [00100], and show the data with index 4 [00100], 5 [00101], and 12 [01100] -all of them that the index in binary has an 1 in the 3rd position from last-</p>\n\n<p>a simple <a href=\"https://stackblitz.com/edit/angular-fgpwsc?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">stackblitz</a></p>\n\n<p><strong>Update</strong> well, in general it's a bad idea using a function in an *ngFor, so we can has a function that add a propertie \"visible\" like</p>\n\n<pre><code>setModelVisible(count)\n{\n this.data.forEach(x=&gt;{\n   x.visible=this.show(x.index,count)\n })\n}\n</code></pre>\n\n<p>call to the funciton when change \"count\", and use data.visible in the *ngIf</p>\n"}], "owner": {"reputation": 59, "user_id": 10371303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e261fb12f3043aca9d22cab6541ad357?s=128&d=identicon&r=PG&f=1", "display_name": "stackmj18", "link": "https://stackoverflow.com/users/10371303/stackmj18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563953060, "creation_date": 1563936961, "question_id": 57174592, "link": "https://stackoverflow.com/questions/57174592/alternative-to-using-multiple-flags-to-show-hide-multiple-elements", "title": "Alternative to using multiple flags to show hide multiple elements", "body": "<p>I'm using multiple flags to show/hide certain elements in my angular component. For example, if 'Add New' is clicked, I set addNewClicked to true. If 'Update' clicked, I set updateClicked flag to true. And based on the flags, I show/hide multiple elements. When this flag is true, show 'A' &amp; 'B' element, When another flag true, hide 'A' and show 'B' &amp; 'C' and so on..\nAs I keep adding new operations, number of flags is growing, I have created almost 10-15 flags, which is becoming hard to manage. Is there any alternative to using multiple flags. How to better manage show/hide multiple elements based on different operations (button clicked or events).</p>\n"}, {"tags": ["reactjs", "typescript", "react-native", "react-redux", "redux-thunk"], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 7282148, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d3a60ab5819b7f2d6174f1e799cc6df6?s=128&d=identicon&r=PG&f=1", "display_name": "Arron J. Linton", "link": "https://stackoverflow.com/users/7282148/arron-j-linton"}, "edited": false, "score": 0, "creation_date": 1563937730, "post_id": 57174627, "comment_id": 100861727, "body": "getLocationSuccess() is defined above. Sorry, I just added it. I need that to signal the reducer to update state."}], "tags": [], "owner": {"reputation": 294, "user_id": 2977955, "user_type": "registered", "profile_image": "https://graph.facebook.com/646012034/picture?type=large", "display_name": "adam_th", "link": "https://stackoverflow.com/users/2977955/adam-th"}, "is_accepted": false, "score": 0, "last_activity_date": 1563937241, "creation_date": 1563937241, "answer_id": 57174627, "question_id": 57174557, "link": "https://stackoverflow.com/questions/57174557/how-to-fix-uncaught-typeerror-callback-is-not-a-function-thrown-by-redux-redu/57174627#57174627", "title": "How to fix \u201cUncaught TypeError: callback is not a function\u201d thrown by redux/redux thunk?", "body": "<p><code>getLocationSuccess</code> doesn't appear to be defined anywhere. By the looks of it, if you want to use the callback provided to <code>getLocation</code> you need to call dispatch like this <code>dispatch(cb(data));</code> or change the name of the argument for <code>getLocation</code> to <code>getLocationSuccess</code>:</p>\n\n<pre><code>export const getLoaction = (getLocationSuccess: Function) =&gt; {\n\n  return (dispatch: Function, getState: Function) =&gt; {\n\n    const { locationState } = getState();\n    const { latitude, longitude } = locationState.region;\n    axios.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&amp;key=&lt;API KEY&gt;`)\n    .then(json =&gt; {\n\n      const address = json.data.results[0].formatted_address;\n\n      const data = {\n        loading: false,\n        currentLocation: address\n      };\n\n      dispatch(getLocationSuccess(data));   \n    })\n    .catch((err: any) =&gt; {\n      console.log('NAVIGATOR FAILED: ', err)\n    })\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 493, "user_id": 7282148, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d3a60ab5819b7f2d6174f1e799cc6df6?s=128&d=identicon&r=PG&f=1", "display_name": "Arron J. Linton", "link": "https://stackoverflow.com/users/7282148/arron-j-linton"}, "edited": false, "score": 0, "creation_date": 1563988219, "post_id": 57187821, "comment_id": 100886194, "body": "Not sure why that is. I had it correct in my code, but that&#39;s not causing the error above. Good catch though."}], "tags": [], "owner": {"reputation": 191, "user_id": 8282453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9f3e67db4f0728a1b6419d13a84d29f?s=128&d=identicon&r=PG&f=1", "display_name": "sk01", "link": "https://stackoverflow.com/users/8282453/sk01"}, "is_accepted": false, "score": 1, "last_activity_date": 1563987022, "creation_date": 1563987022, "answer_id": 57187821, "question_id": 57174557, "link": "https://stackoverflow.com/questions/57174557/how-to-fix-uncaught-typeerror-callback-is-not-a-function-thrown-by-redux-redu/57187821#57187821", "title": "How to fix \u201cUncaught TypeError: callback is not a function\u201d thrown by redux/redux thunk?", "body": "<p>In function name  <code>getlocationSuccess</code> , the letter <code>L</code> is small. However, it is capital while making call. </p>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 7282148, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d3a60ab5819b7f2d6174f1e799cc6df6?s=128&d=identicon&r=PG&f=1", "display_name": "Arron J. Linton", "link": "https://stackoverflow.com/users/7282148/arron-j-linton"}, "is_accepted": true, "score": 1, "last_activity_date": 1565736701, "creation_date": 1565736701, "answer_id": 57486214, "question_id": 57174557, "link": "https://stackoverflow.com/questions/57174557/how-to-fix-uncaught-typeerror-callback-is-not-a-function-thrown-by-redux-redu/57486214#57486214", "title": "How to fix \u201cUncaught TypeError: callback is not a function\u201d thrown by redux/redux thunk?", "body": "<p>I solved the issue. The problem wasn't in any of the redux files. It was a version issue with React. I wasn't running on the latest version of React and as a result,  React did not explicitly install the correct version of a \"scheduler package 0.14.0\" (which is what the error message points to).</p>\n\n<p>The fix, you can either install the correct scheduler package, or you can upgrade to the latest version of React.</p>\n\n<p>They mention it in this issue regarding hooks:\n<a href=\"https://github.com/facebook/react/issues/15647\" rel=\"nofollow noreferrer\">https://github.com/facebook/react/issues/15647</a></p>\n"}], "owner": {"reputation": 493, "user_id": 7282148, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d3a60ab5819b7f2d6174f1e799cc6df6?s=128&d=identicon&r=PG&f=1", "display_name": "Arron J. Linton", "link": "https://stackoverflow.com/users/7282148/arron-j-linton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2563, "favorite_count": 0, "accepted_answer_id": 57486214, "answer_count": 3, "score": 1, "last_activity_date": 1565736701, "creation_date": 1563936652, "last_edit_date": 1563987150, "question_id": 57174557, "link": "https://stackoverflow.com/questions/57174557/how-to-fix-uncaught-typeerror-callback-is-not-a-function-thrown-by-redux-redu", "title": "How to fix \u201cUncaught TypeError: callback is not a function\u201d thrown by redux/redux thunk?", "body": "<p>I'm making asynchronous calls in my redux actions and when I dispatch a successful call, the following error is returned in dev tools:</p>\n\n<p><code>Uncaught TypeError: callback is not a function</code></p>\n\n<p>When I comment out the dispatch invocation the app hangs of course, but I do not receive the error above. So that tells me something perhaps has to be flawed with my redux action.</p>\n\n<p>Then additional lines in the error point to lines in the react-native npm package. I'm currently running on react-native <code>0.59.6</code>. Perhaps the version i'm running on has a play here.</p>\n\n<p>location.tsx</p>\n\n<pre><code>const getLocationSuccess = (data: any) =&gt; {\n  return {\n    type: GET_GEOLOCATION_SUCCESS,\n    data\n  }\n}\n\nexport const getLocation = (cb: Function) =&gt; {\n\n  return (dispatch: Function, getState: Function) =&gt; {\n\n    const { locationState } = getState();\n    const { latitude, longitude } = locationState.region;\n    axios.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&amp;key=&lt;API KEY&gt;`)\n    .then(json =&gt; {\n\n      const address = json.data.results[0].formatted_address;\n\n      const data = {\n        loading: false,\n        currentLocation: address\n      };\n\n      // THIS LINE IS CAUSING THE ERROR\n      dispatch(getLocationSuccess(data));\n      cb(true)\n\n    })\n    .catch((err: any) =&gt; {\n      console.log('NAVIGATOR FAILED: ', err)\n    })\n  }\n}\n</code></pre>\n\n<p>index.tsx</p>\n\n<pre><code>componentDidMount(){\n\n  this.props.actions.getLocation(() =&gt; {\n      console.log('LOCATION SUCCESS')\n   });\n };\n</code></pre>\n"}, {"tags": ["typescript", "amazon-web-services", "aws-cdk"], "comments": [{"owner": {"reputation": 11773, "user_id": 223339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bd0d1b04580c60fccc0bfa94d261456?s=128&d=identicon&r=PG", "display_name": "Romain", "link": "https://stackoverflow.com/users/223339/romain"}, "edited": false, "score": 0, "creation_date": 1563955014, "post_id": 57174298, "comment_id": 100867561, "body": "It would help if you could provide your VPC&#39;s subnet description, too (<code>aws ec2 describe-subnets --filters &quot;Name=vpcId,Values=${VPC_ID}&quot;</code> - you&#39;ll want to remove <code>SubnetArn</code>, <code>SubnetId</code>, <code>VpcId</code> and <code>OwnerId</code> from the result before pasting it here)."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2979288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e6c51be4c39e3e4c56b4732a31d166?s=128&d=identicon&r=PG&f=1", "display_name": "saud ansari", "link": "https://stackoverflow.com/users/2979288/saud-ansari"}, "edited": false, "score": 0, "creation_date": 1564034169, "post_id": 57178612, "comment_id": 100898964, "body": "i mentioned in my description that using fromVPCAttributes i was getting the error &quot;Cannot read property &#39;selectSubnets&#39; of undefined&quot;."}, {"owner": {"reputation": 443, "user_id": 2342082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973948ccde4bf12a596411e8c64ed272?s=128&d=identicon&r=PG", "display_name": "jfl", "link": "https://stackoverflow.com/users/2342082/jfl"}, "edited": false, "score": 0, "creation_date": 1603372759, "post_id": 57178612, "comment_id": 114021009, "body": "How would the code look if all your private subnets are in &#39;eu-west-1a&#39; and all the public ones in &#39;eu-west-1b&#39;?"}], "tags": [], "owner": {"reputation": 4064, "user_id": 11339287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6_SmP9xeM5U/AAAAAAAAAAI/AAAAAAAAWzg/1Y3Ox6-nLrQ/photo.jpg?sz=128", "display_name": "jogold", "link": "https://stackoverflow.com/users/11339287/jogold"}, "is_accepted": false, "score": 0, "last_activity_date": 1563961905, "last_edit_date": 1563961905, "creation_date": 1563957296, "answer_id": 57178612, "question_id": 57174298, "link": "https://stackoverflow.com/questions/57174298/vpc-fromlookup-results-in-all-private-subnets-and-no-public-subnets/57178612#57178612", "title": "VPC &quot;fromLookup&quot; results in all Private Subnets and no Public Subnets", "body": "<p>The easiest way to import and control how your subnets are categorized is to use <code>ec2.Vpc.fromVpcAttributes</code>:</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>// Import existing VPC\nconst vpc = ec2.Vpc.fromVpcAttributes(this, 'Vpc', {\n  vpcId: 'vpc-xxxxxx',\n  availabilityZones: ['eu-west-1a', 'eu-west-1b', 'eu-west-1c'],\n  publicSubnetIds: ['subnet-xxxxxx', 'subnet-xxxxxx', 'subnet-xxxxxx'],\n  privateSubnetIds: ['subnet-xxxxxx', 'subnet-xxxxxx', 'subnet-xxxxxx'],\n});\n</code></pre>\n\n<p>Subnet order and length matters and must match availability zones.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2979288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e6c51be4c39e3e4c56b4732a31d166?s=128&d=identicon&r=PG&f=1", "display_name": "saud ansari", "link": "https://stackoverflow.com/users/2979288/saud-ansari"}, "is_accepted": false, "score": 1, "last_activity_date": 1564035292, "last_edit_date": 1564035292, "creation_date": 1564034084, "answer_id": 57195179, "question_id": 57174298, "link": "https://stackoverflow.com/questions/57174298/vpc-fromlookup-results-in-all-private-subnets-and-no-public-subnets/57195179#57195179", "title": "VPC &quot;fromLookup&quot; results in all Private Subnets and no Public Subnets", "body": "<p>Took me a while, but i figured it out. \nFor my Public Subnet, the attribute: <code>Auto-assign public IPv4 address</code> needed to be enabled (set to YES). \n<br>\n<p>\nBut that led to a weird requirement, I have to have the same number of public and private Subnets in all of the supported AZs. I don't understand why. Otherwise i get the error:<br> \n<code>Not all subnets in VPC have the same AZs: \nap-southeast-2a,ap-southeast-2b vs ap-southeast-2a,ap-southeast-2a,ap-southeast-2a,ap-southeast-2a,ap-southeast-2b,ap-southeast-2b,ap-southeast-2b,ap-southeast-2b,ap-southeast-2c,ap-southeast-2c,ap-southeast-2c</code>\n<p></p>\n"}], "owner": {"reputation": 31, "user_id": 2979288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e6c51be4c39e3e4c56b4732a31d166?s=128&d=identicon&r=PG&f=1", "display_name": "saud ansari", "link": "https://stackoverflow.com/users/2979288/saud-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2294, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564035292, "creation_date": 1563934160, "last_edit_date": 1563944822, "question_id": 57174298, "link": "https://stackoverflow.com/questions/57174298/vpc-fromlookup-results-in-all-private-subnets-and-no-public-subnets", "title": "VPC &quot;fromLookup&quot; results in all Private Subnets and no Public Subnets", "body": "<p>Using CDK v1.1.0 I'm trying to create an internet-facing Application Load Balancer.</p>\n\n<p>When I call <code>ec2.vpc.fromLookup</code> using my <code>vpcId</code>, I get all my subnets, but all of them are marked as <code>PRIVATE</code> Subnets. Due to this I get an error that there are no Public Subnets Available. </p>\n\n<p>If I try using <code>ec2.vpc.fromVpcAttributes</code> using my <code>vpcId</code>, <code>availabilityZones</code> and <code>SubnetIDs</code>, I get the error \"Cannot read property 'selectSubnets' of undefined\".</p>\n\n<p>Route Table of My Subnets: \nWithin the Subnets, my RouteTable has two Routes:</p>\n\n<ul>\n<li>Destination: 10.140.0.0/16, Target: Local, Status Active</li>\n<li>Destination: 0.0.0.0/0, Target: internet-gateway, Status Active</li>\n</ul>\n\n<p>I'm not sure whether my subnet/VPC configuration are incorrect or aws-cdk has a bug. </p>\n\n<p>I've manually tried creating an Application Load Balancer with the public subnets and was able to create is successfully. So I can't say my subnet configs are incorrect. </p>\n"}]